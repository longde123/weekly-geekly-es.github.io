<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏻 😩 👜 Comment nous avons overclocké CAD COMPASS-3D → Partie 2 🤙🏿 👨🏽‍🏭 🐡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la dernière partie, nous avons parlé de la naissance de KOMPAS-3D v18, quelque chose sur la sélection de critères et de modèles pour tester de no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons overclocké CAD COMPASS-3D → Partie 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ascon/blog/447516/">  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dernière partie,</a> nous avons parlé de la naissance de KOMPAS-3D v18, quelque chose sur la sélection de critères et de modèles pour tester de nouvelles fonctions, et avons également abordé le sujet du rendu dans la version «Basic». <br>  Continuons avec l'histoire de l'option de rendu «Amélioré». <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/eh/lx/rgehlxcmqgdhw0tfwtdl_ajgyp8.jpeg"></div><a name="habracut"></a><br><h1>  <font color="#00B2FF">Appeler des appels</font> </h1><blockquote><a href=""><img align="right" src="https://habrastorage.org/webt/ld/gb/19/ldgb19esjt6fk41auvk5dirjluy.png"></a>  <b>Alexander Tulup, programmeur:</b> <br>  «Le principal problème des performances d'affichage de grandes scènes est associé à un grand nombre de soi-disant« appels de dessin ».  L'ancienne version du rendu est construite au-dessus du modèle de données mathématiques.  Ainsi, pour chaque primitive - points, arêtes, faces - une méthode distincte a été appelée pour son affichage. <br><br>  Pour chaque appel de tirage, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenGL</a> (pilote) effectue une série de vérifications, traduisant simultanément les commandes entrantes dans un format compréhensible pour la carte vidéo, après quoi les appels sont ajoutés à la file d'attente et sont déjà exécutés. <br><br><img src="https://habrastorage.org/webt/ei/rd/on/eirdonw__vgqgxcuby2kfglkm9c.png"><br>  <i>Schéma de transfert de commande GPU dans OpenGL ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">source</a> )</i> <br><br>  Avec un grand nombre de détails, le nombre d'appels au CPU augmente tellement que les données n'ont tout simplement pas le temps d'arriver sur la carte vidéo.  Nous obtenons une situation où sur une carte vidéo très forte, elle "ralentit" de la même manière que sur une carte moyenne ou plus faible. <br><br>  Vous pouvez y faire face en réduisant le nombre de rendus (transitions d'états) - regrouper par matériau, combiner une géométrie commune ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">instanciation</a> ), etc. <br><br>  N'oublions pas que de toute la scène, nous n'en voyons qu'une partie.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Des algorithmes de détection d'objets invisibles sont</a> applicables ici (abattage tronconique, abattage d'occlusion, etc.) <br><br>  Inspirés par l'exemple de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">The Road to One Million Draws</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AZDO</a> , nous avons décidé d'emprunter une voie assez inhabituelle: se débarrasser autant que possible des changements d'état côté CPU.  Maintenant, presque tout est fait sur la carte graphique.  Tous les attributs nécessaires sont directement extraits de la mémoire vidéo tout en puisant dans le shader lui-même ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">shader</a> ), ce qui a été rendu possible grâce à l'augmentation de la mémoire vidéo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VRAM</a> ) et à l'avènement du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SSBO</a> . <br><br><img src="https://habrastorage.org/webt/ta/is/xf/taisxf8tjdkcztftev7mbuvxi2m.png"><br>  <i>1000000 de dés</i> <br><br>  Parmi les avantages de cette approche: la vitesse d'affichage est devenue très élevée.  La vitesse n'est limitée que par les capacités du GPU, à savoir la quantité de données qu'il est capable de traiter. <br><br>  Il a également permis de mettre en œuvre assez efficacement des mécanismes de détourage pour les objets invisibles.  Les résultats du contrôle de visibilité sont enregistrés directement dans la mémoire vidéo et à partir de là, les commandes de dessin sont formées en fonction de celles-ci.  Autrement dit, du côté du processeur, vous n'avez pas besoin d'attendre. <br><br>  L'un des principaux inconvénients de cette approche est la grande complexité du développement.  Beaucoup doit être mis en œuvre à nouveau, en tenant compte de l'approche choisie.  De plus, nous avons souvent dû faire face à une situation où le même code de shader fonctionnait différemment ou ne fonctionnait pas du tout sur les cartes vidéo de différents fabricants.  Souvent, cela a été "traité" par la mise à jour du pilote, mais parfois après un long débogage, il était nécessaire de réécrire le code. <br><br>  Naturellement, les exigences pour la carte vidéo ont également augmenté.  La prise en charge d'OpenGL 4.5 est une clé, mais pas la seule exigence. </blockquote>  Ci-dessous, nous présentons les résultats de la vitesse de rendu lors de la rotation de l'assemblage.  Rappelons que 24 images par seconde (ips) sont considérées comme des indicateurs confortables pour l'œil humain. <br><blockquote>  <b>Ci-après, des mesures ont été prises sur un PC avec la configuration suivante:</b> <br>  Processeur: Intel Core i7-6700K 4,00 GHz <br>  RAM: 32 Go <br>  GPU: NVidia Quadro P2000 <br>  Système d'exploitation: Microsoft Windows 10 x64 Professional </blockquote>  <i>Tableau 1. Fréquence d'images (images par seconde, ips) sur divers modèles.</i>  <i>Plus c'est mieux.</i>  <i>Mode d'affichage: Demi-teinte + filaire, mode simplifié désactivé, qualité anti-aliasing: moyenne (MSAA 8x)</i> <br><table><tbody><tr><td rowspan="2">  <b>Modèle</b> </td><td rowspan="2">  <b>La quantité</b> <b><br></b>  <b>composants</b> </td><td colspan="3">  <b>Fréquence d'images, fps</b> </td></tr><tr><td>  <b>V16.1</b> </td><td>  <b>v17.1</b> </td><td>  <b>v18</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/ls/hl/6s/lshl6shv12lncujsabab3t5ed1c.png" alt="image"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voiture</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">broyage de mosaïque</a> <br></td><td>  2764 </td><td>  4.1 </td><td>  4.7 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/_d/4j/bn/_d4jbnztqcslsnedjtneaudg3ey.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PGU-410</a> </td><td>  108337 </td><td>  0,3 </td><td>  0,4 </td><td>  <b>28,6</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/w6/nm/m5/w6nmm5nt369jn5vldy_5faa2iii.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tombereau de voiture</a> </td><td>  17342 </td><td>  1,1 </td><td>  1.4 </td><td>  <b>124,7</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/vb/qs/xz/vbqsxzx8qc1gj8isnfdynncvhy0.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Trolleybus</a> </td><td>  9783 </td><td>  1,9 </td><td>  2,4 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/wp/bv/jm/wpbvjmjl094bur5ajdkwgpjf7z8.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marée nord</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">centrale électrique</a> </td><td>  48445 </td><td>  0,3 </td><td>  0,5 </td><td>  <b>76,1</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'installation</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vide technologique</a> </td><td>  7189 </td><td>  1,9 </td><td>  2,3 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Réducteur de navire</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">centrale électrique</a> </td><td>  6414 </td><td>  2.6 </td><td>  3,6 </td><td>  <b>123,9</b> </td></tr></tbody></table><br><br><h3>  <font color="#00B2FF">Ajout de composants à un grand assemblage</font> </h3><br>  Le scénario avec l'ajout de composants à un grand assemblage est finalement devenu le test dit complexe, décrit dans le tableau 2. <br><br>  <i>Tableau 2. Scénario avec l'ajout de composants à un grand assemblage.</i>  <i>Critères de test.</i> <br><table><tbody><tr><td>  <b>Critère</b> </td><td>  <b>Description du critère</b> </td></tr><tr><td>  Vitesse d'ouverture des fichiers </td><td>  <i>Le composant ajouté à l'assemblage doit être chargé à partir du disque</i> </td></tr><tr><td>  Vitesse de rendu </td><td>  <i>L'assemblage et le composant inséré doivent être positionnés, pour cela vous devez faire pivoter / déplacer / zoomer l'image</i> </td></tr><tr><td>  Vitesse de sélection des objets </td><td>  <i>Pour créer des contraintes, vous devez sélectionner les objets de base: faces, plans, arêtes, etc.</i> </td></tr><tr><td>  Vitesse de synchronisation avec l'arbre de construction </td><td>  <i>Le composant ajouté à l'assemblage et ses interfaces doivent être représentés dans l'arbre de construction</i> </td></tr><tr><td>  Vitesse de synchronisation du module de spécification </td><td>  <i>Le composant ajouté à l'assemblage doit être pris en compte dans la spécification.</i> </td></tr></tbody></table><br>  Dans le tableau, vous pouvez voir les points (dessin, ouverture) qui, dès le début, ont été sélectionnés comme directions d'accélération distinctes.  Mais les améliorations nécessitaient d'autres composants. <br><br>  Un temps important a été pris par synchronisation avec un arbre.  Nous avons résolu le problème en implémentant une mise à jour partielle. <br><br>  Une autre difficulté a été l'impact significatif de la spécification sur les performances de KOMPAS-3D.  Dans certains scénarios de test complexes, ce composant était le principal (50% ou plus). <br><div class="spoiler">  <b class="spoiler_title">Spécification</b> <div class="spoiler_text"><blockquote>  La spécification est le module système KOMPAS-3D, qui est responsable de la formation du document de conception du même nom.  Il est développé par une équipe distincte. <br><br>  En particulier, l'équipe a accéléré la synchronisation lors de l'insertion en repensant les mécanismes internes du module de spécification. </blockquote><br></div></div><br><h3>  <font color="#00B2FF">Quelques résultats</font> </h3><br>  Ajoutez des composants à l'assemblage «Réducteur de la centrale électrique du navire». <br><br><img src="https://habrastorage.org/webt/oh/zs/d-/ohzsd-w4xu3jcz-zko7iein1t8g.png"><br>  <i>Test complet pour l'assemblage "Réducteur d'une centrale marine".</i> <i><br></i>  <i>Les chiffres indiquent: 1 - support, 2 - rondelle, 3 - boulon.</i> <br><br>  <i>Tableau 3. Temps d'insertion des composants dans un grand assemblage en secondes.</i>  <i>Moins c'est mieux.</i> <br><table><tbody><tr><td rowspan="2">  <b>Composant</b> </td><td colspan="2" rowspan="2">  <b>Action</b> </td><td colspan="3">  <b>Heure s</b> </td></tr><tr><td>  <b>V16.1</b> </td><td>  <b>v17.1</b> </td><td>  <b>v18</b> </td></tr><tr><td rowspan="13">  Insérer <br>  composant <br>  Bracket <br><br><img src="https://habrastorage.org/webt/0_/uh/gz/0_uhgzadc0r1vpwsjdijjrsx-qa.png"></td><td colspan="2">  Chargement </td><td>  <b>2.0</b> </td><td>  3.0 </td><td>  2.2 </td></tr><tr><td colspan="2">  Passer en mode d'appairage </td><td>  0,6 </td><td>  0,4 </td><td>  0,4 </td></tr><tr><td rowspan="3">  Premier appariement </td><td>  Sélection du premier objet </td><td>  0,4 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  Le choix du deuxième objet </td><td>  0,5 </td><td>  1,1 </td><td>  <b>0,2</b> </td></tr><tr><td>  Sélectionnez le bon appariement </td><td>  3.8 </td><td>  3,6 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Deuxième appariement </td><td>  Sélection du premier objet </td><td>  0,5 </td><td>  1.4 </td><td>  0,5 </td></tr><tr><td>  Le choix du deuxième objet </td><td>  0,5 </td><td>  1.4 </td><td>  <b>0,2</b> </td></tr><tr><td>  Sélectionnez le bon appariement </td><td>  3,6 </td><td>  3.0 </td><td>  <b>1,2</b> </td></tr><tr><td rowspan="3">  Troisième appariement </td><td>  Sélection du premier objet </td><td>  0,5 </td><td>  0,5 </td><td>  0,5 </td></tr><tr><td>  Le choix du deuxième objet </td><td>  0,3 </td><td>  1,1 </td><td>  0,3 </td></tr><tr><td>  Sélectionnez le bon appariement </td><td>  3,7 </td><td>  3.2 </td><td>  <b>1,1</b> </td></tr><tr><td colspan="2">  Confirmer la création d'insertion </td><td>  7.8 </td><td>  5.2 </td><td>  <b>2,3</b> </td></tr><tr><td colspan="2">  Insert de support total </td><td>  24,2 </td><td>  24,6 </td><td>  <b>10.1</b> </td></tr><tr><td rowspan="4">  Insérer <br>  rondelles <br>  de la bibliothèque <br>  standard <br>  les produits <br><br><img src="https://habrastorage.org/webt/ch/hm/6g/chhm6g-guxcbwvetqsd5teyb3os.png"><br><br></td><td colspan="2">  Première sélection d'appariement </td><td>  6,4 </td><td>  2,4 </td><td>  <b>0,4</b> </td></tr><tr><td colspan="2">  Sélection de la deuxième paire </td><td>  4.2 </td><td>  3,1 </td><td>  <b>0,4</b> </td></tr><tr><td colspan="2">  Confirmer la création d'insertion </td><td>  15,7 </td><td>  9.2 </td><td>  <b>4.4</b> </td></tr><tr><td colspan="2">  Total pour rondelles d'insertion </td><td>  26,3 </td><td>  14,7 </td><td>  <b>5.2</b> </td></tr><tr><td rowspan="13">  Insérer <br>  boulons <br><br><img src="https://habrastorage.org/webt/14/lp/ro/14lproscfkxs7g82wmaemf0ncbe.png"></td><td colspan="2">  Chargement </td><td>  2.0 </td><td>  2.7 </td><td>  2.0 </td></tr><tr><td colspan="2">  Passer en mode d'appairage </td><td>  0,5 </td><td>  0,5 </td><td>  0,5 </td></tr><tr><td rowspan="3">  Premier appariement </td><td>  Sélection du premier objet </td><td>  0,4 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  Le choix du deuxième objet </td><td>  0,4 </td><td>  1,1 </td><td>  <b>0,2</b> </td></tr><tr><td>  Sélectionnez le bon appariement </td><td>  3.4 </td><td>  2.7 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Deuxième appariement </td><td>  Sélection du premier objet </td><td>  0,4 </td><td>  1,2 </td><td>  0,4 </td></tr><tr><td>  Le choix du deuxième objet </td><td>  0,5 </td><td>  0,5 </td><td>  <b>0,4</b> </td></tr><tr><td>  Sélectionnez le bon appariement </td><td>  3,7 </td><td>  2.9 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Troisième appariement </td><td>  Sélection du premier objet </td><td>  0,5 </td><td>  1,0 </td><td>  0,5 </td></tr><tr><td>  Le choix du deuxième objet </td><td>  0,5 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  Sélectionnez le bon appariement </td><td>  4.2 </td><td>  3.9 </td><td>  <b>1,2</b> </td></tr><tr><td colspan="2">  Confirmer la création d'insertion </td><td>  32,5 </td><td>  5,4 </td><td>  <b>2.2</b> </td></tr><tr><td colspan="2">  Total pour l'insertion des boulons </td><td>  49 </td><td>  21,2 </td><td>  <b>9,8</b> </td></tr><tr><td colspan="3">  <i><b>L'insertion totale des trois composants</b></i> </td><td>  <i>99,5</i> </td><td>  <i>60,5</i> </td><td>  <b><i>25,1</i></b> </td></tr></tbody></table><br><br>  Un test complet peut être considéré comme l'un des scénarios d'édition de l'assemblage (à partir du nombre de scénarios courants). <br><br>  De plus, la reconstruction de l'assemblage s'est accélérée.  Maintenant, si vous modifiez une opération, l'assemblage entier ne sera pas complètement reconstruit - seuls les objets modifiés seront mis à jour.  Pour déterminer les opérations dépendantes, c'est-à-dire les opérations dont le résultat pourrait être affecté par le résultat de l'opération modifiée, un algorithme spécial est utilisé pour établir des relations entre les opérations, les corps et les insertions. <br><br><h3>  <font color="#00B2FF">Ouverture des assemblages</font> </h3><br>  L'idée principale pour augmenter la vitesse de lecture des fichiers est de faire en sorte que KOMPAS-3D ne lise que ce dont l'utilisateur a besoin pour le moment. <br><br>  Par exemple: <br><br><ul><li>  lecture seule de l'exécution en cours pour les insertions d'assemblage, </li><li>  pour les types de téléchargement, lisez uniquement les informations nécessaires: triangulation ou triangulation + résultats ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">B-rep</a> ). </li></ul><br>  Tout cela a nécessité un raffinement de la structure des données dans le fichier afin que ses différentes parties puissent être lues. <br><br><blockquote> <a href=""><img align="right" src="https://habrastorage.org/webt/br/cu/ku/brcukuey6fmjicbcsx2tibjhjhw.png"></a>  <b>Anton Sidyakin, programmeur, chef d'équipe:</b> <br><br>  «Depuis quelque temps, le fichier KOMPAS-3D est une archive combinant plusieurs fichiers de service.  L'un d'eux contient des données de modèle / document d'assemblage organisées en arborescence.  La possibilité de naviguer dans cette structure existait déjà.  Pour une lecture partielle, il fallait assurer l'indépendance des pièces les unes par rapport aux autres.  Ainsi, les parties reçues n'auraient pas dû se référer entre elles, sinon la partie avec le lien serait devenue «inférieure». <br><br>  Par conséquent, pour plus de détails, il a été possible de séparer les performances du document et les unes des autres.  Dans les assemblages, le conteneur d'inserts et de contraintes est mis en surbrillance séparément.  A l'intérieur des exécutions, il a également été possible de séparer les données initiales de la construction et les résultats sous forme de triangulation et de corps. <br><br><img src="https://habrastorage.org/webt/yh/h3/kc/yhh3kchzbyacjohgjlzvu1laoz4.png"><br><br>  Si nous parlons de types de chargement simplifiés, l'assemblage modifiable est entièrement chargé, et seule la triangulation et, selon le type, la représentation des limites (B-rep) sont chargées à partir de ses insertions.  L'affichage des insertions avec des variables externes modifiées dans ce mode était d'une certaine difficulté, car elles étaient précédemment obtenues à la volée en reconstruisant lors de la lecture, et dans les types de chargement simplifiés, il n'y a pas de données pour cela.  La solution consistait à noter les résultats de la reconstruction de ces inserts dans l'assemblage.  Cela a donné une accélération et en raison du manque de reconstruction. <br><br>  La division décrite du document en pièces ne permettait de charger dans l'assemblage que les performances sélectionnées dans les inserts. </blockquote>  En plus d'accélérer l'ouverture des fichiers, la lecture partielle a également permis de réduire les ressources consommées - principalement la RAM. <br><br>  Sur la base des améliorations, un nouveau type de chargement d'assemblage est apparu - «Partiel».  Dans ce type de chargement, seuls les résultats (corps, surfaces) et la triangulation sont soustraits du fichier.  Le chargement partiel vous permet de créer des paires et est proche en termes de fonctionnalité du chargement complet des composants. <br><br>  Après avoir implémenté des améliorations sur la lecture partielle, la création de types de chargement personnalisés devient prometteuse. <br><br><div class="spoiler">  <b class="spoiler_title">Indice</b> <div class="spoiler_text"><blockquote>  Les types de démarrage personnalisés sont des combinaisons de méthodes système pour charger un composant.  Cette fonction n'est pas nouvelle, mais les améliorations apportées à la v18 vous permettent d'obtenir des bonus importants de son utilisation. </blockquote><br></div></div><br>  Pour les composants qui ne sont pas importants pour les futures générations, le type de charge «Vide» peut être appliqué.  Il peut s'agir de composants cachés à l'intérieur des autres («vnutryanka»).  Dans la version 18, les composants (et les assemblages entiers) avec le type de démarrage «Vide» s'ouvrent presque instantanément. <br><br>  <i>Tableau 4. Temps d'ouverture des assemblages avec les types de démarrage «Vide» et «Dimension» en secondes.</i>  <i>Moins c'est mieux.</i> <br><table><tbody><tr><td rowspan="2">  Modèle </td><td rowspan="2">  Type de téléchargement </td><td colspan="3">  Heure d'ouverture, s </td></tr><tr><td>  V16.1 </td><td>  v17.1 </td><td>  v18 </td></tr><tr><td rowspan="2"><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'installation</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vide technologique</a> </td><td>  Vide </td><td>  12,8 </td><td>  11,7 </td><td>  <b>2,5</b> </td></tr><tr><td>  La taille </td><td>  21,2 </td><td>  20,8 </td><td>  <b>2.6</b> </td></tr><tr><td rowspan="2"><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Réducteur de navire</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">centrale électrique</a> </td><td>  Vide </td><td>  31,0 </td><td>  15,9 </td><td>  <b>7.2</b> </td></tr><tr><td>  La taille </td><td>  371,5 </td><td>  114,8 </td><td>  <b>7.3</b> </td></tr></tbody></table><br><br>  Les composants restants, qui sont nécessaires pour comprendre l'apparence du produit ou qui seront utilisés comme objets de support pour une construction ultérieure, peuvent être chargés «complètement» ou «partiellement». <br><br>  En tant qu'outil de préparation de types de démarrage personnalisés, vous pouvez utiliser de nouvelles commandes pour sélectionner des composants «invisibles».  Nous appliquons la commande puis utilisons le menu contextuel pour changer le type de chargement des composants sélectionnés en «Vide». <br><br><h3>  <font color="#00B2FF">Projection</font> </h3><br>  Lors de l'accélération de la projection, nous nous sommes posé la question du filtrage des données reçues en entrée du noyau mathématique. <br><br>  Tout d'abord, nous avons décidé de filtrer les composants / corps invisibles.  À cette fin, le mécanisme d'occlusion-élimination a été utilisé - il vous permet de savoir si le corps qui sera projeté est visible ou s'il se ferme et se trouve à l'intérieur d'un autre corps.  Cette opération est effectuée sur le côté de la carte vidéo. <br><br>  Le plus grand effet sera lors de la création de projections de modèles avec un grand nombre de composants cachés dans des volumes fermés, par exemple: <br><br><ul><li>  entraînements complexes, boîtes de vitesses, etc., </li><li>  véhicules </li><li>  les bâtiments </li><li>  armoires avec équipement électrique. </li></ul><br>  Pour l'inclusion, l'option "Rough projection" est responsable.  Le nom n'est pas accidentel - des pièces relativement petites (par exemple, un boulon à l'échelle d'une centrale électrique) peuvent ne pas être projetées à l'échelle d'un assemblage.  Pour de nombreux utilisateurs, cette situation conviendra, en particulier dans le cas de la création de dessins dimensionnels et de dessins généraux. <br><br><div class="spoiler">  <b class="spoiler_title">En savoir plus sur l'option Rough Projection.</b> <div class="spoiler_text"><blockquote>  L'option n'est disponible que pour les projections standard.  Pour spécifier des images (sections, sections, vues à distance), la "projection grossière" n'est pas impliquée. </blockquote><br></div></div><br>  Même sans utiliser cette option, la projection est sensiblement plus rapide par rapport à V16 et v17.  Cela a été aidé par des améliorations du côté du noyau mathématique. <br><br>  <i>Tableau 5. Temps nécessaire pour créer trois projections standard en quelques secondes.</i>  <i>Moins c'est mieux.</i> <br><table><tbody><tr><td rowspan="2">  Modèle </td><td colspan="4">  Il est temps de créer trois projections standard, s </td></tr><tr><td>  V16.1 </td><td>  v17.1 </td><td>  v18 <br>  Inclus <br>  brouillon <br>  projection </td><td>  v18 <br>  Éteint <br>  brouillon <br>  projection </td></tr><tr><td><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'installation</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vide technologique</a> </td><td>  124,1 </td><td>  47,5 </td><td>  <b>12,9</b> </td><td>  34,6 </td></tr><tr><td><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Réducteur de navire</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">centrale électrique</a> </td><td>  256 </td><td>  410 </td><td>  <b>38,4</b> </td><td>  54,4 </td></tr><tr><td><img src="https://habrastorage.org/webt/bi/nn/nl/binnnlusnbewy71vya0vorxubpg.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Multi-usages</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">unifié</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">corps de boîte</a> </td><td>  99,9 </td><td>  123,4 </td><td>  <b>44,9</b> </td><td>  53,5 </td></tr></tbody></table><br><br>  Toujours en v18, la possibilité de reconstruire des espèces associatives individuelles a été implémentée. <br><br>  Dans un dessin contenant de nombreuses vues associatives, l'utilisateur a la possibilité de reconstruire des vues individuelles non pertinentes.  Par exemple, celui auquel il souhaite ajouter des annotations.  Vous pouvez également spécifier les vues créées avec l'option Projection grossière activée. <br><br><div class="spoiler">  <b class="spoiler_title">Reconstruire une vue unique</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/og/nk/em/ognkemiqn2re1hneq0cbw4rcjgy.png"><br></div></div><br>  Cette fonctionnalité ne s'applique pas aux accélérations explicites, mais permet à l'utilisateur de gagner du temps. <br><br>  Résultat du travail effectué pour accélérer la projection du modèle Installation technologique sous vide dans le dessin: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/P2kloyNOedE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie suivante,</a> nous décrirons comment nous avons accéléré le calcul des caractéristiques de centrage de masse (MTC), la contribution du noyau géométrique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">c3dlabs</a> aux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">performances</a> COMPAS-3D, les modifications apportées à C3D Modeler et également le matériel adapté à la v18.</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447516/">https://habr.com/ru/post/fr447516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447502/index.html">Comment créer un CV pour des entreprises informatiques étrangères</a></li>
<li><a href="../fr447508/index.html">Sergey Zonov: «J'ai fait le premier Spectrum parce que j'étais intéressé»</a></li>
<li><a href="../fr447510/index.html">GeekUniversity ouvre ses inscriptions au département Design</a></li>
<li><a href="../fr447512/index.html">Et qui a fait ça? Automatisez l'audit de la sécurité des informations</a></li>
<li><a href="../fr447514/index.html">7 startups intéressantes dans l'IoT</a></li>
<li><a href="../fr447520/index.html">Fonctionnalités de hiérarchisation automatique dans le stockage Qsan XCubeSAN</a></li>
<li><a href="../fr447522/index.html">Quelles choses utiles peuvent être extraites des journaux d'un poste de travail Windows</a></li>
<li><a href="../fr447526/index.html">Propre vélo pour synchroniser MariaDB et Sphinx</a></li>
<li><a href="../fr447528/index.html">Qui est responsable de la qualité?</a></li>
<li><a href="../fr447530/index.html">OceanLotus: mise à jour Malvari pour macOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>