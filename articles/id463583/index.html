<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§±üèø üòç üêì Plugin yang fantastis, vol. 1. Teori ü§òüèª üîì üë©üèø‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hidup dengan proyek multi-modul tidak begitu sederhana. Untuk menghindari rutin membuat modul baru, kami membuat plug-in kami sendiri untuk Android St...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plugin yang fantastis, vol. 1. Teori</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/463583/"><p>  Hidup dengan proyek multi-modul tidak begitu sederhana.  Untuk menghindari rutin membuat modul baru, kami membuat plug-in kami sendiri untuk Android Studio.  Dalam proses implementasi, kami menemukan kurangnya dokumentasi praktis, mencoba beberapa pendekatan dan menggali banyak jebakan.  Ternyata dua artikel: "Teori" dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Praktek"</a> .  Temui aku! </p><br><p><img src="https://habrastorage.org/webt/an/fg/dp/anfgdpffwxapeeei7coineoxdvk.png" alt="gambar"></p><a name="habracut"></a><br><h1 id="o-chem-budu-govorit">  Apa yang akan saya bicarakan? </h1><br><ul><li>  Mengapa plugin?  Mengapa plugin? <br><ul><li>  Menyusun daftar periksa </li><li>  Opsi Otomasi daftar periksa </li></ul></li><li>  Dasar-Dasar Pengembangan Plugin <br><ul><li>  Tindakan </li><li>  Pengembangan UI dalam plugin </li><li>  Kesimpulan </li></ul></li><li>  Internal IDEA: komponen, PSI <br><ul><li>  Unit Internal IDEA </li><li>  PSI </li><li>  Kesimpulan </li></ul></li></ul><br><h1 id="zachem-plagin-pochemu-plagin">  Mengapa plugin?  Mengapa plugin? </h1><br><p>  Jika Anda sedang mengembangkan proyek multi-modul Android, maka Anda tahu rutinitas macam apa untuk membuat modul baru setiap kali.  Anda perlu membuat modul, mengkonfigurasi Gradle di dalamnya, menambahkan dependensi, menunggu sinkronisasi, jangan lupa untuk memperbaiki sesuatu di modul aplikasi - semuanya membutuhkan banyak waktu.  Kami ingin mengotomatiskan rutinitas, dan kami mulai dengan menyusun daftar periksa tentang apa yang kami lakukan setiap kali kami membuat modul baru. </p><br><p>  1. Pertama, kita membuat modul itu sendiri melalui menu File -&gt; New -&gt; New module -&gt; Android library. </p><br><p><img src="https://habrastorage.org/webt/eo/nt/tk/eonttksy33ofpojuctkl8aoghuo.png" alt="gambar"></p><br><p>  2. Kami menulis lintasan ke modul di file settings.gradle, karena kami memiliki beberapa jenis modul - modul inti dan modul fitur, yang ada di folder yang berbeda. </p><br><div class="spoiler">  <b class="spoiler_title">Kami menulis jalur ke modul</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// settings.gradle include ':analytics project(':analytics').projectDir = new File(settingsDir, 'core/framework-metrics/analytics) ... include ':feature-worknear' project(':feature-worknear').projectDir = new File(settingsDir, 'feature/feature-worknear')</span></span></code> </pre> </div></div><br><p>  3. Kami mengubah konstanta <em>compileSdk</em> , <em>minSdk</em> , <em>targetSdk</em> di <em>build.gradle</em> yang dihasilkan: kami menggantinya dengan konstanta yang didefinisikan dalam root <em>build.gradle</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Mengubah konstanta di build.gradle dari modul baru</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Feature module build.gradle ‚Ä¶ android { compileSdkVersion rootProject.ext.targetSdkVersion defaultConfig { minSdkVersion rootProject.ext.minSdkVersion targetSdkVersion rootProject.ext.targetSdkVersion ... } }</span></span></code> </pre> </div></div><br><p>  Catatan: kami baru-baru ini menghapus bagian dari pekerjaan kami ini ke plugin Gradle kami, yang membantu mengonfigurasi semua parameter yang diperlukan dari file <em>build.gradle</em> dalam beberapa baris. </p><br><p>  4. Karena kita menulis semua kode baru di Kotlin, sebagai standar kita menghubungkan dua plugin: <em>kotlin-android</em> dan <em>kotlin-kapt</em> .  Jika modul entah bagaimana terhubung dengan UI, kami juga menghubungkan <em>modul kotlin-android-extensions</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Hubungkan plugin Kotlin</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Feature module build.gradle apply plugin: 'com.android.library' apply plugin: 'kotlin-android' apply plugin: 'kotlin-android-extensions' apply plugin: 'kotlin-kapt'</span></span></code> </pre></div></div><br><p>  5. Kami menghubungkan perpustakaan umum dan modul inti.  Modul inti, misalnya, logger, analitik, beberapa utilitas umum, dan perpustakaan - RxJava, Moxy, dan banyak lainnya. </p><br><div class="spoiler">  <b class="spoiler_title">Kami menghubungkan perpustakaan dan modul yang dibagikan</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Feature module build.gradle dependencies { def libraries = rootProject.ext.deps compileOnly project(':logger') compileOnly project(':analytics') ‚Ä¶ // Kotlin compileOnly libraries.kotlin // DI compileOnly libraries.toothpick kapt libraries.toothpickCompiler }</span></span></code> </pre></div></div><br><p>  6. Siapkan kapt untuk Tusuk Gigi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tusuk gigi</a> adalah kerangka DI utama kami.  Kemungkinan besar Anda tahu: untuk menggunakan pembuatan kode daripada refleksi dalam rilis rilis, Anda perlu mengkonfigurasi prosesor anotasi sehingga mengerti di mana mendapatkan pabrik untuk objek yang sedang dibuat: </p><br><div class="spoiler">  <b class="spoiler_title">Mengkonfigurasi prosesor anotasi untuk Tusuk Gigi</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Feature module build.gradle defaultConfig { ... javaCompileOptions { annotationProcessorOptions { arguments = [ toothpick_registry_package_name: "ru.hh.feature_worknear" ] } } ...</span></span></code> </pre> </div></div><br><p>  Catatan: di hh.ru kami menggunakan versi pertama dari Tusuk Gigi, di yang kedua kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menghapus kemampuan untuk menggunakan pembuatan kode</a> . </p><br><p>  7. Kami mengkonfigurasi kapt untuk Moxy di dalam modul yang dibuat.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Moxy</a> adalah kerangka kerja utama kami untuk membuat MVP dalam suatu aplikasi, dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda perlu sedikit</a> memutarnya agar dapat bekerja dalam proyek multi-modul.  Secara khusus, daftarkan paket modul yang dibuat dalam argumen kapt: </p><br><div class="spoiler">  <b class="spoiler_title">Mengkonfigurasi kapt untuk Moxy</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Feature module build.gradle android { ... kapt { arguments { arg("moxyReflectorPackage", "ru.hh.feature_worknear") } } ...</span></span></code> </pre></div></div><br><p>  Catatan: kami telah beralih ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">versi baru Moxy</a> , dan bagian pembuatan kode ini telah kehilangan relevansinya. </p><br><p>  8. Kami menghasilkan banyak file baru.  Maksud saya bukan file-file yang dibuat secara otomatis (AndroidManifest.xml, build.gradle, .gitignore), tetapi kerangka umum modul baru: interaksor, repositori, modul DI, presenter, fragmen.  Ada banyak file-file ini, mereka memiliki struktur yang sama di awal, dan membuatnya secara rutin. </p><br><p><img src="https://habrastorage.org/webt/j2/f5/sz/j2f5szalxm1nmgg4yj9kivxpdfs.png" alt="gambar"></p><br><p>  9. Kami menghubungkan modul yang kami buat ke modul aplikasi.  Pada langkah ini Anda harus ingat untuk mengonfigurasi Tusuk Gigi di file build.gradle pada modul aplikasi.  Untuk melakukan ini, kami menambahkan paket modul yang dibuat ke prosesor penjelasan argumen khusus - <em>toothpick_registry_children_package_names</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Tuning Tusuk Gigi</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// App module build.gradle defaultConfig { ‚Ä¶ javaCompileOptions { annotationProcessorOptions { arguments = [ toothpick_registry_package_name: "ru.hh.android", toothpick_registry_children_package_names: [ "ru.hh.analytics", "ru.hh.feature_worknear", ... ].join(",") ] } } ‚Ä¶</span></span></code> </pre></div></div><br><p>  Setelah itu, kami mengkonfigurasi Moxy di modul aplikasi.  Kami memiliki kelas yang ditandai dengan penjelasan <strong>@RegisterMoxyReflectorPackages</strong> - di sana kami menambahkan nama paket dari modul yang dibuat: </p><br><div class="spoiler">  <b class="spoiler_title">Konfigurasikan MoxyReflectorStub</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// App module file @RegisterMoxyReflectorPackages( "ru.hh.feature_force_update", "ru.hh.feature_profile", "ru.hh.feature_worknear" ... ) class MoxyReflectorStub</span></span></code> </pre> </div></div><br><p>  Dan, pada akhirnya, jangan lupa menghubungkan modul yang dibuat ke blok <em>dependensi</em> dari modul aplikasi: </p><br><div class="spoiler">  <b class="spoiler_title">Menambahkan dependensi</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Application module build.gradle dependencies { def libraries = rootProject.ext.deps implementation project(':logger') implementation project(':dependency-handler') implementation project(':common') implementation project(':analytics') implementation project(':feature_worknear') ...</span></span></code> </pre> </div></div><br><p>  Kami mendapat daftar periksa sembilan poin. </p><br><p>  Karena ada banyak poin, kemungkinan besar akan melupakan sesuatu.  Dan kemudian menghabiskan berjam-jam bertanya-tanya apa yang terjadi dan mengapa proyek ini tidak terjadi. </p><br><p>  Kami memutuskan bahwa Anda tidak bisa hidup seperti itu dan Anda perlu mengubah sesuatu. </p><br><h2 id="varianty-avtomatizacii-chek-lista">  Opsi Otomasi daftar periksa </h2><br><p>  Setelah menyusun daftar periksa, kami mulai mencari opsi untuk mengotomatisasi item-itemnya. </p><br><p>  Opsi pertama adalah upaya untuk melakukan <strong>"Ctrl + C, Ctrl + V"</strong> .  Kami mencoba menemukan implementasi untuk membuat modul Perpustakaan Android, yang tersedia bagi kami ‚Äúout of the box‚Äù.  Dalam folder dengan Android Studio (untuk MacOs: <em>/ Aplikasi / Android \ Studio.app/Contents/plugins/android/lib/templates/gradle-projects/</em> ) Anda dapat menemukan folder khusus dengan templat proyek-proyek yang Anda lihat ketika Anda memilih File - &gt; Baru -&gt; Modul Baru.  Kami mencoba menyalin template NewAndroidModule dengan mengubah id di dalam file <em>template.xml.ftl</em> .  Kemudian mereka meluncurkan IDE, mulai membuat modul baru, dan ... Android Studio macet karena daftar modul yang Anda lihat di menu untuk membuat modul baru adalah kode-keras, Anda tidak dapat mengubahnya dengan copy-paste primitif.  Saat Anda mencoba untuk mengambil dan menambahkan, menghapus atau mengubah suatu elemen, Android Studio mogok. </p><br><p><img src="https://habrastorage.org/webt/ym/ww/sw/ymwwsw1rzibvaxwrhkqkwd5fqyk.png" alt="gambar"></p><br><p>  Opsi kedua untuk mengotomatisasi daftar periksa adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mesin template FreeMarker</a> .  Setelah upaya salin-tempel yang gagal, kami memutuskan untuk melihat lebih dekat pada templat modul dan menemukan templat FreeMarker di bawah tenda. </p><br><p>  Saya tidak akan memberi tahu Anda detail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">FreeMarker</a> - ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel bagus dari RedMadRobot</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video dari MosDroid dari Lesha Bykov</a> .  Namun singkatnya - ini adalah mesin untuk menghasilkan file menggunakan templat dan Map-ki java-objek khusus.  Anda memberi makan template, objek, dan FreeMarker menghasilkan kode pada output. </p><br><p>  Tetapi lihat kembali daftar periksa: </p><br><p><img src="https://habrastorage.org/webt/nf/hl/81/nfhl811qacot1f4j_pt2fhsmm8k.png" alt="gambar"></p><br><p>  Jika Anda melihat lebih dekat, Anda dapat melihat bahwa itu dibagi menjadi dua kelompok besar tugas: </p><br><ul><li>  Tugas menghasilkan kode baru (1, 3, 4, 5, 6, 7, 8) dan </li><li>  Tugas untuk memodifikasi kode yang ada (2, 7, 8, 9) </li></ul><br><p>  Dan jika FreeMarker berupaya dengan tugas-tugas dari kelompok pertama dengan keras, maka itu tidak mengatasi yang kedua sama sekali.  Sebagai contoh kecil: dalam implementasi integrasi FreeMarker saat ini di Android Studio, ketika Anda mencoba untuk memasukkan baris ke file settings.gradle yang tidak dimulai dengan kata 'termasuk', <a href="">studio akan macet</a> .  Di sini kami menangkap yang sedih, dan memutuskan untuk meninggalkan penggunaan FreeMarker. </p><br><p>  Setelah kegagalan dengan FreeMarker, muncul ide untuk menulis utilitas konsol saya sendiri untuk melakukan daftar periksa.  Di dalam Intellij IDEA dimungkinkan untuk menggunakan terminal, jadi mengapa tidak?  Mari kita menulis skrip di bash, bisnis total: </p><br><p><img src="https://habrastorage.org/webt/t0/2h/ki/t02hki4jlkvs_7eaqisfbuqnyb0.png" alt="gambar"></p><br><p>  Tetapi karena kita ingin dapat mengkonfigurasi modul yang dibuat secara fleksibel, kita harus memasukkan banyak flag yang berbeda, yang tidak nyaman untuk dicetak di konsol. </p><br><p>  Setelah itu, kami mundur selangkah dan ingat bahwa kami bekerja di dalam Intellij IDEA.  Dan bagaimana cara mengaturnya?  Ada inti kelas tertentu, sebuah mesin yang banyak plug-in terpasang, yang menambahkan fungsi yang kita butuhkan. </p><br><p>  Berapa banyak dari Anda yang melihat dalam tangkapan layar lebih dari dua plugin yang terhubung? </p><br><p><img src="https://habrastorage.org/webt/rf/fr/dm/rffrdmuui00uxtruelogjpor_le.png" alt="gambar"></p><br><div class="spoiler">  <b class="spoiler_title">Di mana mencarinya? ..</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/0m/uw/ua/0muwuamgty0p8kri2ywhq3dsbaw.png" alt="gambar"></p></div></div><br><p>  Di sini mereka terhubung setidaknya tiga.  Jika Anda bekerja dengan Kotlin, maka Anda mengaktifkan plugin Kotlin.  Jika Anda bekerja dalam proyek dengan Gradle, maka plugin Gradle juga disertakan.  Jika Anda bekerja dalam proyek dengan sistem kontrol versi - Git, SVN atau yang lainnya - Anda memiliki plug-in yang sesuai untuk mengintegrasikan VCS ini. </p><br><p>  Kami melihat ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori plugin</a> JetBrains <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">resmi</a> , dan ternyata sudah ada lebih dari 4000 plugin yang terdaftar secara resmi!  Hampir seluruh dunia menulis plugin, dan plugin ini dapat melakukan apa saja: mulai dari mengintegrasikan bahasa pemrograman ke IDEA dan berakhir dengan alat khusus yang dapat dijalankan dari dalam IDEA. </p><br><p>  Singkatnya, kami memutuskan untuk menulis plugin kami sendiri. </p><br><h1 id="osnovy-razrabotki-plaginov">  Dasar-Dasar Pengembangan Plugin </h1><br><p>  Kami beralih ke dasar-dasar pengembangan plugin.  Untuk memulai, Anda hanya perlu tiga hal: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">IntelliJ IDEA</a> , Edisi Komunitas minimum (Anda dapat bekerja dalam versi Ultimate, tetapi itu tidak akan memberikan keuntungan khusus ketika mengembangkan plugin); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Plugin DevKit yang</a> terhubung dengannya adalah plugin khusus yang menambahkan kemampuan untuk menulis plugin lain; </li><li>  Dan bahasa JVM apa pun di mana Anda ingin menulis sebuah plugin.  Bisa jadi Kotlin, Jawa, Groovy - apa pun. </li></ol><br><p>  Kami mulai dengan membuat proyek plugin.  Kami memilih <strong>proyek baru</strong> , titik <strong>Gradle</strong> , kami mencentang <strong>Plugin Platform IntelliJ</strong> dan kami membuat proyek. </p><br><p><img src="https://habrastorage.org/webt/je/rf/wd/jerfwdeqfmpzdef-_cypw4wahw8.png" alt="gambar"></p><br><p>  Catatan: Jika Anda tidak melihat kotak centang IntelliJ Platform Plugin, itu berarti Anda tidak menginstal DevKit Plugin. </p><br><p>  Setelah mengisi kolom yang diperlukan, kita akan melihat struktur plugin kosong. </p><br><p><img src="https://habrastorage.org/webt/i2/sy/59/i2sy59dpr0pi8nlmhfyhson20h8.png" alt="gambar"></p><br><p>  Mari kita lihat lebih dekat.  Terdiri dari: </p><br><ul><li>  Folder tempat Anda akan menulis kode untuk proyek mendatang;  ( <em>main / java</em> , <em>main / kotlin</em> , dll); </li><li>  file <em>build.gradle</em> , di mana Anda akan mendeklarasikan dependensi plugin Anda pada beberapa perpustakaan, dan juga akan mengonfigurasi hal tersebut sebagai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>gradle-intellij-plugin</em></a> . </li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>gradle-intellij-plugin</em></a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>Plugin</em></a> Gradle yang memungkinkan Anda menggunakan Gradle sebagai sistem pembuat plugin.  Ini nyaman karena hampir setiap pengembang Android terbiasa dengan Gradle dan tahu cara bekerja dengannya.  Selain itu, gradle-intellij-plugin menambahkan tugas gradle yang berguna untuk proyek Anda, khususnya: </p><br><ul><li>  runIde - tugas ini meluncurkan instance IDEA terpisah dengan sebuah plugin yang sedang Anda kembangkan sehingga Anda dapat men-debug-nya; </li><li>  buildPlugin - mengumpulkan arsip zip plugin Anda sehingga Anda dapat mendistribusikannya secara lokal atau melalui repositori IDEA resmi; </li><li>  memverifikasiPlugin - tugas ini memeriksa plugin Anda untuk kesalahan kotor yang mungkin tidak memungkinkan untuk diintegrasikan ke dalam Android Studio atau IDEA lainnya. </li></ul><br><p>  Apa lagi <em>pemberian gradle-intellij-plugin</em> ?  Dengan bantuannya, menjadi lebih mudah untuk menambahkan dependensi pada plugin lain, tetapi kita akan membicarakannya nanti, tetapi untuk sekarang saya dapat mengatakan bahwa <em>gradle-intellij-plugin</em> adalah bro Anda, gunakanlah. </p><br><p>  Kembali ke struktur plugin.  File terpenting dari setiap plugin adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>plugin.xml</em></a> . </p><br><div class="spoiler">  <b class="spoiler_title">plugin.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>com.experiment.simple.plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>Hello, world<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vendor</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">email</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myemail@yourcompany.com"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.mycompany.com"</span></span></span><span class="hljs-tag">&gt;</span></span> My company <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vendor</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>&lt;![CDATA[ My first ever plugin - try to open Hello world dialog&lt;br&gt; ]]&gt;<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>com.intellij.modules.lang<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.intellij.groovy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-version</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">since-build</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"163"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">actions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">description</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"My actions"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyActionGroup"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"My actions"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">separator</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.experiment.actions.OpenHelloWorldAction"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.experiment.actions.OpenHelloWorldAction"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Show Hello world"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">description</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Open dialog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add-to-group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">group-id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NewGroup"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">anchor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"last"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">actions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Ini adalah file yang berisi: </p><br><ul><li>  Metadata plugin Anda: pengidentifikasi, nama, deskripsi, informasi vendor, log perubahan </li><li>  Deskripsi dependensi pada plugin lain; </li><li>  Di sini Anda juga dapat menentukan versi IDEA yang dengannya plugin Anda akan berfungsi dengan benar </li><li>  <em>Tindakan</em> juga dijelaskan di sini. </li></ul><br><h3 id="actions">  Tindakan </h3><br><p>  Apa itu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tindakan</a> ?  Misalkan Anda membuka menu untuk membuat file baru.  Faktanya, setiap elemen menu ini telah ditambahkan oleh beberapa jenis plugin: </p><br><p><img src="https://habrastorage.org/webt/al/8y/kg/al8ykgojltbksqkuqu5l8cww4fw.png" alt="gambar"></p><br><p>  Tindakan adalah titik masuk ke plugin Anda untuk pengguna.  Setiap kali pengguna mengklik item menu, Anda mendapatkan kendali di dalam plugin, Anda dapat merespons klik ini dan melakukan apa yang diperlukan. <br>  Bagaimana Tindakan dibuat?  Mari kita menulis Tindakan sederhana yang akan menampilkan dialog dengan pesan "Halo, Dunia". </p><br><div class="spoiler">  <b class="spoiler_title">OpenHelloWorldAction</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHelloWorldAction</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AnAction</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionPerformed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(actionEvent: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnActionEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project = actionEvent.project Messages.showMessageDialog( project, <span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>, <span class="hljs-string"><span class="hljs-string">"Greeting"</span></span>, Messages.getInformationIcon() ) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnActionEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.update(e) <span class="hljs-comment"><span class="hljs-comment">// TODO - Here we can update our action (for example, disable it) } override fun beforeActionPerformedUpdate(e: AnActionEvent) { super.beforeActionPerformedUpdate(e) // TODO - This method calls right before 'actionPerformed' } }</span></span></code> </pre> </div></div><br><p>  Untuk membuat Action, pertama-tama kita membuat kelas yang mewarisi dari kelas <em>AnAction</em> .  Kedua, kita harus mendefinisikan kembali metode actionPerformed, di mana parameter khusus dari kelas <em>AnActionEvent datang</em> .  Parameter ini berisi informasi tentang konteks pelaksanaan Aksi Anda.  Konteksnya merujuk pada proyek di mana Anda bekerja, file yang sekarang terbuka untuk pengguna dalam editor kode, elemen yang dipilih dalam pohon proyek dan data lain yang dapat membantu dalam memproses tugas Anda. </p><br><p>  Untuk memperlihatkan dialog "Halo, dunia", pertama-tama kita mendapatkan proyek (hanya dari parameter <em>AnActionEvent</em> ), dan kemudian menggunakan <em>Pesan</em> kelas utilitas untuk menampilkan kotak dialog. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fitur tambahan</a> apa yang kita miliki di dalam Aksi?  Kami dapat mengesampingkan dua metode: <em>perbarui</em> dan <em>beforeActionPerformedUpdate</em> . </p><br><p>  Metode <em>pembaruan</em> dipanggil setiap kali konteks eksekusi dari Action Anda berubah.  Mengapa ini mungkin berguna bagi Anda: misalnya, untuk memperbarui item menu yang ditambahkan oleh plugin Anda.  Misalkan Anda menulis Tindakan yang hanya dapat berfungsi dengan file Kotlin, dan pengguna kini telah membuka file Groovy.  Kemudian dalam metode pembaruan Anda dapat membuat tindakan Anda tidak dapat diakses. </p><br><p>  Metode <em>beforeActionPerformedUpdate</em> mirip dengan metode pembaruan, tetapi disebut tepat sebelum <em>actionPerformed</em> .  Ini adalah kesempatan terakhir untuk memengaruhi Aksi Anda.  Dokumentasi merekomendasikan agar Anda tidak melakukan apa pun "berat" dalam metode ini sehingga berjalan sesegera mungkin. </p><br><p>  Anda juga dapat mengikat Tindakan ke elemen tertentu dari antarmuka IDEA dan mengaturnya kombinasi tombol default untuk panggilan - Saya sarankan membaca lebih lanjut tentang ini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><h3 id="razrabotka-ui-v-plaginah">  Pengembangan UI dalam plugin </h3><br><p>  Jika Anda membutuhkan desain dialog Anda sendiri, Anda harus bekerja keras.  Kami mengembangkan UI kami karena kami ingin memiliki antarmuka grafis yang nyaman yang memungkinkan untuk menandai beberapa kutu, memiliki pemilih untuk nilai enum, dan sebagainya. </p><br><p>  Plugin DevKit untuk pengembangan UI menambahkan beberapa tindakan, seperti <em>formulir GUI</em> dan <em>Dialog</em> .  Yang pertama membuat formulir kosong untuk kami, yang kedua - formulir dengan dua tombol: <em>Oke</em> dan <em>Batal</em> . </p><br><p><img src="https://habrastorage.org/webt/wd/bx/3r/wdbx3rhggovpfv-fey53fucs2aw.png" alt="gambar"></p><br><p>  Oke, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ada perancang formulir</a> , tapi dia ... begitu-begitu.  Sebagai perbandingan, bahkan desainer Layout di Android Studio terlihat nyaman dan baik.  Seluruh UI dikembangkan di perpustakaan seperti Java Swing.  Perancang formulir ini menghasilkan file XML yang dapat dibaca manusia.  Jika Anda tidak dapat melakukan sesuatu di perancang formulir (contoh: menyisipkan beberapa kontrol dalam sel kotak yang sama dan menyembunyikan semua kecuali satu dari kontrol), Anda perlu membuka file ini dan mengubahnya - IDEA akan mengambil perubahan ini. </p><br><p>  Hampir setiap bentuk terdiri dari dua file: yang pertama memiliki ekstensi <em>.form</em> , ini hanya file XML, yang kedua adalah yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>kelas Bound</em></a> , yang dapat ditulis dalam Java, Kotlin, tetapi apa pun yang Anda inginkan.  Karena berfungsi sebagai pengontrol bentuk.  Tanpa diduga, tetapi menulis di Jawa jauh lebih mudah daripada dalam bahasa lain.  Karena, misalnya, penyetelan untuk Kotlin belum begitu sempurna.  Ketika Anda menambahkan komponen baru dalam bekerja dengan kelas Java, komponen ini secara otomatis ditambahkan ke kelas, dan ketika Anda mengubah nama komponen di perancang, itu akan ditarik secara otomatis.  Tetapi dalam kasus Kotlin, komponen tidak ditambahkan - tidak ada integrasi terjadi, Anda dapat melupakan sesuatu dan tidak mengerti mengapa tidak ada yang berhasil. </p><br><h3 id="rezyumiruem-osnovy">  Kami meringkas dasar-dasarnya </h3><br><ul><li>  Untuk membuat plugin, Anda perlu: IDEA Community Edition, Plugin DevKit dan Java yang terhubung dengannya. </li><li>  gradle-intellij-plugin adalah bro Anda, itu akan sangat menyederhanakan hidup Anda, saya sarankan menggunakannya. </li><li>  Jangan menulis UI Anda sendiri kecuali diperlukan.  Ada banyak kelas utilitas di IDEA yang memungkinkan Anda membuat UI sendiri di luar kotak.  Jika Anda membutuhkan sesuatu yang rumit - bersiaplah untuk bekerja keras. </li><li>  Plugin dapat memiliki sejumlah Tindakan.  Plugin yang sama dapat menambahkan banyak fungsi ke IDEA Anda. </li></ul><br><h1 id="vnutrennosti-idea-komponenty-psi">  Internal IDEA: komponen, PSI </h1><br><p>  Mari kita bicara tentang usus IDEA, tentang bagaimana itu diatur di dalam.  Saya memberi tahu Anda agar tidak ada yang hancur di kepala Anda ketika saya menjelaskan bagian praktisnya, dan agar Anda mengerti dari mana asalnya. </p><br><p>  Bagaimana cara mengatur IDEA?  Pada tingkat pertama hierarki adalah kelas seperti <a href=""><em>Aplikasi</em></a> .  Ini adalah contoh IDEA yang terpisah.  Untuk setiap instance IDEA, satu objek kelas Aplikasi dibuat.  Misalnya, jika Anda menjalankan AppCode, Intellij IDEA, Android Studio secara bersamaan, Anda akan mendapatkan tiga instance terpisah dari kelas Aplikasi.  Kelas ini dirancang untuk menangani aliran input / output. </p><br><div class="spoiler">  <b class="spoiler_title">Tempatkan Aplikasi dalam hierarki</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/rw/_y/vm/rw_yvmpfn1hyekftipxwuq-qxn8.png" alt="gambar"></p></div></div><br><p>  Level selanjutnya adalah kelas <a href=""><em>Project</em></a> .  Ini adalah konsep terdekat dengan apa yang Anda lihat saat membuka proyek baru di IDEA.  Proyek biasanya diperlukan untuk mendapatkan komponen lain di dalam IDEA: kelas utilitas, manajer, dan banyak lagi. </p><br><div class="spoiler">  <b class="spoiler_title">Tempat Proyek di Hirarki</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/xv/ku/z6/xvkuz6ezzzd5w5_c9suloyafcza.png" alt="gambar"></p></div></div><br><p>  Level detail selanjutnya adalah kelas <a href=""><em>Module</em></a> .  Secara umum, modul adalah hierarki kelas yang dikelompokkan ke dalam satu folder.  Tapi di sini yang dimaksud dengan modul adalah modul Maven, modul Gradle.  Kelas ini diperlukan, pertama, untuk menentukan dependensi antar modul, dan kedua, untuk mencari kelas di dalam modul ini. </p><br><div class="spoiler">  <b class="spoiler_title">Tempatkan Modul dalam Hirarki</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/zr/vs/ah/zrvsahicec7gak2sfqhox2ldts0.png" alt="gambar"></p></div></div><br><p>  Tingkat detail selanjutnya adalah kelas <a href=""><em>VirtualFile</em></a> .  Ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">abstraksi dari file asli</a> yang ada di disk Anda.  Beberapa instance <em>VirtualFile</em> dapat sesuai dengan setiap file nyata, tetapi semuanya sama.  Pada saat yang sama, jika file asli dihapus, maka <em>VirtualFile</em> tidak akan dihapus sendiri, tetapi hanya menjadi tidak valid. </p><br><div class="spoiler">  <b class="spoiler_title">Tempat Hierarki VirtualFile</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/z8/4y/hq/z84yhqyl6tzv-1uwc_ersyhmqv0.png" alt="gambar"></p></div></div><br><p>  Entitas seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>Dokumen</em></a> dikaitkan dengan setiap <em>VirtualFile</em> .  Ini adalah abstraksi atas teks file Anda.  Diperlukan <em>dokumen</em> agar Anda dapat melacak peristiwa yang terkait dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perubahan dalam teks file</a> : pengguna menyisipkan baris, menghapus baris, dll., Dll. </p><br><div class="spoiler">  <b class="spoiler_title">Tempatkan Dokumen dalam Hirarki</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/nc/qg/frncqgrdpc3xgtnn_txrhlvdcv0.png" alt="gambar"></p></div></div><br><p>  Sedikit ke sisi hierarki ini adalah kelas <a href=""><em>Editor</em></a> - itu adalah editor kode.  Setiap proyek dapat memiliki satu <em>Editor</em> .  Diperlukan agar Anda dapat melacak peristiwa yang terkait dengan editor kode: pengguna telah menyoroti garis di mana tanda sisipan berada, dan sebagainya. </p><br><div class="spoiler">  <b class="spoiler_title">Tempat editor dalam hierarki</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fk/kj/l-/fkkjl-c-t5nyehcwt6j-ywdhwf0.png" alt="gambar"></p></div></div><br><p>  Hal terakhir yang ingin saya bicarakan adalah <a href=""><em>PsiFile</em></a> .  Ini juga merupakan abstraksi atas file nyata, tetapi dari sudut pandang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mewakili elemen kode</a> .  PSI adalah singkatan dari Program Structure Interface. </p><br><div class="spoiler">  <b class="spoiler_title">Tempat PsiFile di Hirarki</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ho/kn/l0/hoknl08rk2giwbxure86b3pqcva.png" alt="gambar"></p></div></div><br><p>  Dan apa yang terdiri dari setiap program?  Pertimbangkan kelas Java reguler. </p><br><div class="spoiler">  <b class="spoiler_title">Kelas java polos</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.experiment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.inject.Inject; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> String injectedString; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">someMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(injectedString); } }</code> </pre> </div></div><br><p>  Ini terdiri dari menentukan paket, impor, kelas, bidang, metode, anotasi, kata kunci, tipe data, pengubah, pengidentifikasi, referensi metode, ekspresi dan token.  Dan untuk setiap elemen ada abstraksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>PsiElement</em></a> .  Artinya, masing-masing program Anda terdiri dari <em>PsiElements</em> . </p><br><p><img src="https://habrastorage.org/webt/ps/oa/2t/psoa2timve59g__naf1rrskzfdm.png" alt="gambar"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PsiFile</a> , pada gilirannya, adalah struktur pohon di mana setiap elemen dapat memiliki orang tua dan banyak keturunan. </p><br><p><img src="https://habrastorage.org/webt/mi/4j/f2/mi4jf2mdcqjc1huurmu2ca0hsfi.png" alt="gambar"></p><br><p>  Saya ingin menyebutkan bahwa PSI tidak sama dengan <strong>pohon sintaksis abstrak</strong> .  Pohon sintaksis abstrak adalah pohon representasi dari program Anda setelah parser lulus program Anda, dan itu <strong>terlepas</strong> dari bahasa pemrograman apa pun.  PSI, sebaliknya, <strong>terkait</strong> dengan bahasa pemrograman tertentu.  Saat Anda bekerja dengan kelas Java, Anda berhadapan dengan Java PsiElements.  Ketika bekerja dengan kelas Groovy - dengan PsiElements Groovy, dan sebagainya.   ,         PSI-  -  ,      ,   , ‚Äì    . </p><br><p>      PSI ‚Äì   PSI-   IDEA.            ,    ,        ,   .         . </p><br><h3 id="rezyumiruem-chast-pro-vnutrennosti-idea">     IDEA </h3><br><ul><li> PSI      IDEA; </li><li> PSI-   IDEA,            ; </li><li>         PsiElement-. </li></ul><br><p>      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> .            . </p><br><h2 id="dopolnitelnye-materialy-po-plaginostroeniyu">     </h2><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">     </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   ,    </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  Tool window</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">      IntelliJ IDEA</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">       IDEA</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">      IntelliJ IDEA</a> </li><li>   , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>     .    ,     . </li><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  Droidcon Italy 2017</a> ,  ,   , ,        FreeMarker- .        ,      . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   KotlinConf</a> ,     Square       SQLDelight,        Java,   Kotlin. </li></ul></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id463583/">https://habr.com/ru/post/id463583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id463573/index.html">Chip pertama untuk pusat data berdasarkan arsitektur Zen 2</a></li>
<li><a href="../id463575/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 22. CCNA ketiga: terus belajar RIP</a></li>
<li><a href="../id463577/index.html">Plastisitas dan kekuatan: pengerasan intermetalik tanpa penekanan pada dislokasi</a></li>
<li><a href="../id463579/index.html">Windows: cari tahu siapa yang login di mana</a></li>
<li><a href="../id463581/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 23. Teknologi Routing Lanjut</a></li>
<li><a href="../id463585/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 24. IPv6</a></li>
<li><a href="../id463587/index.html">ConfigureAunggu, siapa yang harus disalahkan dan apa yang harus dilakukan?</a></li>
<li><a href="../id463591/index.html">BlueKeep-2 - semua versi Windows baru sekarang rentan</a></li>
<li><a href="../id463595/index.html">Kami mengontrol fokus atau sejumput C # dan STM32 untuk webcam</a></li>
<li><a href="../id463597/index.html">Menggunakan Context API in React untuk membuat desain aplikasi yang responsif</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>