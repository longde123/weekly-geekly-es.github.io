<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧗🏻 🤟🏿 💈 在Linux中使用加密信息保护和硬件密钥载体 ✉️ 🛌🏽 🍋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="将令牌存储在令牌和智能卡上可提供针对外部和内部入侵者的额外保护，其中包括对信息系统和设备具有一定访问权限的那些入侵者。 

 今天，我将告诉您我们如何保护信息系统中的加密密钥和电子签名，并且将在详细，说明充分的指南中进行此操作，以设置SUSE Linux Enterprise Server 12 S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>在Linux中使用加密信息保护和硬件密钥载体</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfa/blog/441212/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/6t/xz/yg/6txzyg12acxsce8jlw0nl-ukdqa.png" width="80%" height="80%"></div><br> 将令牌存储在令牌和智能卡上可提供针对外部和内部入侵者的额外保护，其中包括对信息系统和设备具有一定访问权限的那些入侵者。 <br><br> 今天，我将告诉您我们如何保护信息系统中的加密密钥和电子签名，并且将在详细，说明充分的指南中进行此操作，以设置SUSE Linux Enterprise Server 12 SP3以与Aladdin JaCarta PKI令牌和CryptoPro CSP KC2 4.0.9944一起使用。 <br><br> 发布本指南的原因有很多： <br><a name="habracut"></a><br><h4> 原因1 </h4><br> 有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Aladdin-RD JaCarta</a>的官方文档更适用于Astra Linux和ALT Linux操作系统，并获得了国防部，FSTEC和FSB的认证，可以作为保护信息的手段。 <br><br><h4> 原因2 </h4><br> 找到的关于在Linux中配置与硬件媒体交互的最佳说明，也来自<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">wiki.astralinux.ru-使用CryptoPro CSP</a> <br><br><h4> 原因3 </h4><br>  <b>UPD 04/16/2019：</b>在设置环境和设备的过程中，事实证明，与预期的一样，最早可用的载体根本不是JaCarta PKI Nano，而是在SafeNet Authentication Client eToken PRO模式下运行的设备。 <br><br>  <b>UPD 04/16/2019：</b>一旦银行需要一种可以在与eToken PRO（Java）相同的基础架构中运行的设备。 作为这种设备，“ ZAO Aladdin R.D.”公司 提供了由银行选择的JaCarta PRO令牌。 但是，在形成商品和运输单据的阶段，公司的一名员工犯了一个错误。 代替JaCarta PRO模型，JaCarta PKI意外地输入到商品和运输文件中。 <br><br>  <b>UPD 04/16/2019：我</b>感谢Aladdin R.D.公司帮助我们弄清并确立了真相。 <br><br><blockquote> 此错误没有任何政治和隐藏的含义，只有员工在准备文档时的技术错误。  Token JaCarta PRO是Aladdin R.D.公司的产品。 执行功能部分的小程序由“ ZAO Aladdin R.D.”公司开发。 </blockquote><br><br> 该eToken PRO适用于2017年12月1日之前发布的聚会。 <br> 此日期之后，公司为“ Aladdin R.D.” 停止销售eToken PRO（Java）设备。 <br><br> 向前走一点，我必须说与他的合作是通过适当的驱动程序<b>-SafenetAuthenticationClient-10.0.32-0.x86_64配置的</b> ，只有在支持Aladdin R.D的情况下才能获得。 在单独的在线应用程序上。 <br><br> 在CryptoPro CSP中，要使用此令牌，需要安装<b>cprocsp-rdr-emv-64</b>软件包<b>|</b>  <b>EMV / Gemalto支持模块</b> 。 <br><br> 该令牌已确定并得到响应。 使用<b>SafenetAuthenticationClient</b>软件包中的<b>SACTools</b>实用程序，可以对其进行初始化。 但是，在使用密码信息保护时，他的行为极其奇怪且不可预测。 <br><br> 在命令上显示如下： <br><br><pre><code class="plaintext hljs">csptest -keyset -cont '\\.\Aladdin RD JaCarta [SCR Interface] (205D325E5842) 00 00\alfa_shark' -check</code> </pre> <br> 答案是一切都很好： <br><br><pre> <code class="plaintext hljs">[ErrorCode: 0x00000000]</code> </pre> <br> 但是在尝试以编程方式读取密钥之后，相同的检查立即开始产生错误： <br><br><pre> <code class="plaintext hljs">[ErrorCode: 0x8009001a]</code> </pre> <br> 根据Microsoft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">COM错误代码（安全性和安装程序）</a>的组件的对象模型的错误代码列表 <br><br><pre> <code class="plaintext hljs">NTE_KEYSET_ENTRY_BAD 0x8009001A Keyset as registered is invalid.</code> </pre> <br>  “无效的密钥集”-产生此消息的原因可能是由于旧的Gemalto芯片，固件和小程序，或者是其操作系统的驱动程序不支持新的ES生成标准和哈希函数GOST R 34.10-2012和GOST R 34.11- 2012。 <br><br> 在这种状态下，令牌被阻止。 密码信息保护指数开始显示读取器和密钥容器的无关状态。 重新启动<b>cprocspractor</b>提供程序<b>cprocsp</b>服务， <b>pcscd令牌</b>和智能卡<b>服务</b>以及整个操作系统都没有帮助，仅重新初始化即可。 <br><br> 公平地说，应该注意的是，SafeNet eToken PRO在Windows 7和10 OS中与GOST R 34.10-2001密钥一起正常工作。 <br><br> 您可以尝试安装<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CryptoPro CSP 4.0 FCN（Gemalto）</a> ，但是目标是使用支持新标准的JaCarta系列认证的FSB和FSTEC产品保护我们的ES和加密密钥。 <br><br> 通过在（XL）常规外壳中使用真正的JaCarta PKI令牌解决了该问题。 <br><br> 但是花了很多时间试图使Safenet eToken PRO正常工作。 我想提请大家注意，也许可以保护某人免受此侵害。 <br><br><h4> 原因4 </h4><br> 有时您自己需要返回到旧文章和说明。 当信息放置在外部源中时，这很方便。 因此，感谢Habr的机会。 <br><br><h2> 设定指南 </h2><br> 在服务器的USB端口中安装JaCarta PKI令牌并启动系统后，我们验证是否检测到新设备并出现在列表中： <br><br> <code>lsusb</code> <br> <br><img src="https://habrastorage.org/webt/ge/fs/tu/gefstux3tlhb7j0pag8r_fa-ose.png"><br><br> 在本例中，它是<i>总线004设备003：ID 24dc：0101</i> <br><br> 要诊断读者，可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">安全性：Chipcard项目（software.opensuse.org）中</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">pcsc-tools</a>实用程序。 <br><br> 它由以下命令启动： <br><br> <code>pcsc_scan</code> <br> <br><img src="https://habrastorage.org/webt/rm/v3/ki/rmv3kikfuuwmh8c9mijm3it-ieq.png"><br><br> 在安装所有必需的软件包之前，将不会显示有关令牌的信息。 <br><br><h3> 安装驱动程序和软件以使用JaCarta PKI </h3><br> 在网站“ Aladdin R.D.”的“支持”页面上 我们下载的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档和软件仅适用于JaCarta PKI</a> <br><br> 根据《 JaCarta for Linux实施指南》第4.2节，第一步是安装<b>pcsc-lite</b> ， <b>ccid</b>和<b>libusb</b> 。 <br><blockquote> 为了使JaCarta管理实用程序正常工作，必须安装以下组件： <br><br><ul><li>  PC / SC Lite-中间层，用于根据PC / SC标准pcsc-lite软件包提供对智能卡的访问。 </li><li>  Ccid和libusb库，用于使用USB密钥，智能卡和智能卡读取器。 </li></ul></blockquote> 我们检查这些软件包的可用性并安装： <br><br> <code>zypper search pcsc-lite</code> <br> <br><img src="https://habrastorage.org/webt/ez/0m/n_/ez0mn_o8-hmwibwiiltr5jk34xi.jpeg"><br><br> <code>zypper search libusb</code> <br> <br><img src="https://habrastorage.org/webt/ba/jn/zt/bajnztgbtt_fsbfp0tanzfvv7hk.png"><br><br> <code>zypper install pcsc-lite</code> <br> <br><img src="https://habrastorage.org/webt/qe/6i/pl/qe6ipldd5fimbo_m7j4yrmvtibw.jpeg"><br><br><img src="https://habrastorage.org/webt/1m/bo/mc/1mbomc3je9v8e82whld_0tqheje.png"><br><br> <code>zypper search CCID</code> <br> <br><img src="https://habrastorage.org/webt/mq/f4/8x/mqf48xewg61la3nuv_kumzsaxkq.png"><br><br> <code>zypper install pcsc-ccid</code> <br> <br><img src="https://habrastorage.org/webt/lx/yv/ng/lxyvngqgd1d_rdkh7tw2lofepjs.png"><br><br> <code>zypper search CCID</code> <br> <br><img src="https://habrastorage.org/webt/kq/az/ly/kqazlyxzmdusuprtyyfjhkkjick.jpeg"><br><br> <code>zypper install libusb</code> <br> <br><img src="https://habrastorage.org/webt/1f/ul/bk/1fulbklde9aj87m_ur21u8xvms0.png"><br><br> 结果，更新了pcsc-lite软件包，安装了CCID，无需执行libusb。 <br><br> 以下两个命令可直接使用JaCarta PKI安装带有驱动程序和软件的软件包： <br><br> <code>zypper install idprotectclientlib-637.03-0.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/ux/ep/1u/uxep1uijp_2kvyix-yn6qkg5ing.jpeg"><br><br> <code>zypper install idprotectclient-637.03-0.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/xy/32/hq/xy32hqxgtmgwpn-pocygfs-rn3q.jpeg"><br><br> 检查是否已安装JaCarta PKI的驱动程序和软件： <br><br> <code>zypper search idprotectclient</code> <br> <br><img src="https://habrastorage.org/webt/7k/os/nk/7kosnk44-yewdh9i7odevcdzqdc.jpeg"><br><br> 当尝试使SafeNet eToken PRO正常工作时，我发现以下信息：SLES中预装的<b>openct-智能卡读卡器</b>程序包可能与<b>pcsc-lite-PCSC智能卡程序库</b>冲突，该程序的安装需要AladdinR.D。 <br><br> <code>zypper search openct</code> <br> <br><img src="https://habrastorage.org/webt/g8/ja/mr/g8jamrjqjkxybghgrj8rnbfuuaw.png"><br><br> 因此，我们删除了openct软件包： <br><br> <code>rpm -e openct</code> <br> <br> 现在，已安装了使用令牌的所有必需驱动程序和软件。 <br><br>  <b>我们</b>使用<b>pcsc-tools</b>实用程序<b>执行</b>诊断，并确保在操作系统中检测到JaCarta： <br><br> <code>pcsc_scan</code> <br> <br><img src="https://habrastorage.org/webt/t_/5s/ga/t_5sgar9ugi-z-mx2isjhpxfzj8.jpeg"><br><br><h3> 安装CryptoPro CSP软件包 </h3><br> 默认情况下安装CryptoPro CSP时，缺少用于令牌和智能卡的必要软件包。 <br><br> <code>zypper search cprocsp</code> <br> <br><img src="https://habrastorage.org/webt/kq/g7/sc/kqg7scnpbnxlbxiicva_gjejk8k.png"><br><br> 在<b>CSP中</b>安装<b>用于CryptoPro CSP</b>支持<b>组件</b>的<b>JaCarta组件</b> <br><br> <code>zypper install cprocsp-rdr-jacarta-64-3.6.408.683-4.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/9d/uu/3e/9duu3e1vs9wu3qotu6dsllot9km.jpeg"><br><br> 一些组件具有依赖性。 因此，例如，如果您尝试安装SafeNet eToken PRO支持包<b>cprocsp-rdr-emv-64-4.0.9944-5.x86_64.rpm-EMV / Gemalto支持模块</b> ，我们将收到一条消息，提示您需要首先安装CSP阅读器支持<b>cprocsp</b>的基本组件<b>-rdr-pcsc-64-4.0.9944-5.x86_64.rpm-用于CryptoPro CSP读取器的PC / SC组件</b> ： <br><br><pre> <code class="plaintext hljs">zypper install cprocsp-rdr-emv-64-4.0.9944-5.x86_64.rpm Loading repository data... Reading installed packages... Resolving package dependencies... Problem: nothing provides cprocsp-rdr-pcsc-64 &gt;= 4.0 needed by cprocsp-rdr-emv-64-4.0.9944-5.x86_64 Solution 1: do not install cprocsp-rdr-emv-64-4.0.9944-5.x86_64 Solution 2: break cprocsp-rdr-emv-64-4.0.9944-5.x86_64 by ignoring some of its dependencies Choose from above solutions by number or cancel [1/2/c] (c): c</code> </pre><br> 为读者和关键媒体安装基本支持包： <br><br> <code>zypper install cprocsp-rdr-pcsc-64-4.0.9944-5.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/ku/al/eh/kualehuiobnjcc6sxcfgzlzedcu.png"><br><br> <code>zypper install lsb-cprocsp-pkcs11-64-4.0.9944-5.x86_64.rpm</code> <br> <br> 现在，您可以安装用于与其他类型的媒体和GUI组件一起使用的模块： <br><br> <code>zypper install cprocsp-rdr-emv-64-4.0.9944-5.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/b1/ka/hy/b1kahy9lzptzyp6gclxtou5775y.png"><br><br><pre> <code class="plaintext hljs">zypper install cprocsp-rdr-novacard-64-4.0.9944-5.x86_64.rpm zypper install cprocsp-rdr-mskey-64-4.0.9944-5.x86_64.rpm zypper install cprocsp-rdr-gui-gtk-64-4.0.9944-5.x86_64.rpm</code> </pre><br><img src="https://habrastorage.org/webt/gn/rs/s-/gnrss-ht0-vovsebsgfdvdioxhc.png"><br><br> 检查CryptoPro CSP的最终配置： <br><br><pre> <code class="plaintext hljs">zypper search cprocsp Loading repository data... Reading installed packages...</code> </pre><br><br> <code>S | Name | Summary | Type <br> ---+-----------------------------+----------------------------------------------------+-------- <br> i+ | cprocsp-curl-64 | CryptoPro Curl shared library and binaris. Build 9944. | package <br> i+ | cprocsp-rdr-emv-64 | EMV/Gemalto support module | package <br> i+ | cprocsp-rdr-gui-gtk-64 | GUI components for CryptoPro CSP readers. Build 9944. | package <br> i+ | cprocsp-rdr-jacarta-64 | JaCarta components for CryptoPro CSP. Build 683. | package <br> i+ | cprocsp-rdr-mskey-64 | Mskey support module | package <br> i+ | cprocsp-rdr-novacard-64 | Novacard support module | package <br> i+ | cprocsp-rdr-pcsc-64 | PC/SC components for CryptoPro CSP readers. Build 9944.| package <br> i+ | lsb-cprocsp-base | CryptoPro CSP directories and scripts. Build 9944. | package <br> i+ | lsb-cprocsp-ca-certs | CA certificates. Build 9944. | package <br> i+ | lsb-cprocsp-capilite-64 | CryptoAPI lite. Build 9944. | package <br> i+ | lsb-cprocsp-kc2-64 | CryptoPro CSP KC2. Build 9944. | package <br> i+ | lsb-cprocsp-pkcs11-64 | CryptoPro PKCS11. Build 9944. | package <br> i+ | lsb-cprocsp-rdr-64 | CryptoPro CSP readers. Build 9944. | package <br></code> <br><br><img src="https://habrastorage.org/webt/f-/rc/ad/f-rcadtwgu68ba6ad5wde2zke-m.jpeg"><br><br> 要应用更改，我们重新启动加密提供程序服务并检查其状态： <br><br><pre> <code class="plaintext hljs">/etc/init.d/cprocsp restart /etc/init.d/cprocsp status</code> </pre><br><img src="https://habrastorage.org/webt/vd/1a/th/vd1athcps5p7fe9cjp_ipmvvq-a.jpeg"><br><br><h3>  CryptoPro CSP设置和诊断 </h3><br> 使用以下命令检查密码提供程序是否看到我们的令牌和其他可用媒体类型： <br><br> <code>/opt/cprocsp/bin/amd64/csptest -card -enum -v –v</code> <br> <br><img src="https://habrastorage.org/webt/2m/z1/d4/2mz1d4m5oyvg9nknwbnci24wcre.jpeg"><br><br> <code>/opt/cprocsp/bin/amd64/csptest -enum -info -type PP_ENUMREADERS | iconv -f cp1251</code> <br> <br><img src="https://habrastorage.org/webt/i0/xw/ro/i0xwroly12wmu3ejps9udt4tvxs.png"><br><br> <code>/opt/cprocsp/sbin/amd64/cpconfig -hardware reader -view -f cp1251</code> <br> <br><img src="https://habrastorage.org/webt/id/qu/rm/idqurmsxvepldfelr_w9vakfbwu.jpeg"><br><br>  <b>阿拉丁RD JaCarta [SCR接口]（000000000000）00 00</b>是我们的媒介。 <br><br> 遵循<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CryptoPro CSP for Linux的说明。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">配置</a> ，在密码提供者中执行其注册： <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/sbin/amd64/cpconfig -hardware reader -add "Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00"</code> </pre> <br><img src="https://habrastorage.org/webt/1v/xj/z_/1vxjz_h0nppdftdaeylhhobwt-a.png"><br><br> 由于在配置文件<b>/etc/opt/cprocsp/config64.ini</b>中执行 <br> 条目将添加到[KeyDevices \ PCSC]部分： <br><br> <code>[KeyDevices\PCSC\"Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00"\Default] <br></code> <br><br> 为了符合CryptoPro CSP表格的要求，《使用条款和安全性管理员指南》： <br><blockquote> 禁止在关闭了增强密钥控制模式的情况下使用CryptoPro CSP CIP版本4.0。  ZHTYA.00087-01 91 02.安全管理员指南中介绍了此模式的包含。 </blockquote> 有必要启用对密钥用法的增强控制： <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/sbin/amd64/cpconfig -ini '\config\parameters' -add long StrengthenedKeyUsageControl 1</code> </pre> <br> 检查是否启用了该模式： <br><br> <code>cat /etc/opt/cprocsp/config64.ini | grep StrengthenedKeyUsageControl</code> <br> <br><img src="https://habrastorage.org/webt/lg/hn/mm/lghnmmk1d5g9xhmxgmyqjcsrddo.jpeg"><br><br> 我们重新启动加密提供程序服务： <br><br><pre> <code class="plaintext hljs">/etc/init.d/cprocsp restart /etc/init.d/cprocsp status</code> </pre><br> 重新启动后，我们检查提供商与主要承运人的合作中是否没有错误： <br><br> <code>/opt/cprocsp/bin/amd64/csptest -keyset –verifycontext</code> <br> <br><img src="https://habrastorage.org/webt/qo/5x/v7/qo5xv7ayjfqa1ssyuds6dl-f-ue.jpeg"><br><br> <code>/opt/cprocsp/bin/amd64/csptest -keyset -verifycontext -enum –unique</code> <br> <br><pre> <code class="plaintext hljs">CSP (Type:80) v4.0.9017 KC2 Release Ver:4.0.9944 OS:Linux CPU:AMD64 FastCode:REA AcquireContext: OK. HCRYPTPROV: 16052291 alfa_shark1 |SCARD\JACARTA_4E3900154029304C\CC00\E9F6 OK. Total: SYS: 0.000 sec USR: 0.000 sec UTC: 4.560 sec [ErrorCode: 0x00000000]</code> </pre><br><h3> 使用JaCarta PKI令牌 </h3><br> 让我们在工作站上运行Xming（X11转发）程序，以便我们可以通过SSH打开并使用必要实用程序的图形界面。 <br><br><img src="https://habrastorage.org/webt/-s/8j/r9/-s8jr9lfz0xkjurnsrgvwx71pfy.png"><br><br> 安装<b>IDProtectClient-</b>用于JaCarta PKI的软件后，服务器上的<b>/ usr / share / applications</b>文件夹中出现了两个文件： <br><br> 雅典娜IDProtectClient.desktop <br> 雅典娜IDProtectManager.desktop <br><br> 这些是可以查看实用程序<i>Exec = / usr / bin / SACTools</i>的启动选项的快捷方式 <br><br> 运行<b>IDProtectPINTool</b>实用程序。 <br><br> 使用它，可以设置和更改令牌的PIN访问代码。 <br><br> <code>/usr/bin/IDProtectPINTool</code> <br> <br><img src="https://habrastorage.org/webt/wx/nf/-j/wxnf-jyonzkwr2hs2cnfy1wzxie.png"><br><br> 首次初始化令牌时， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">默认情况下</a>包含<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密钥载体的PIN码（密码）的</a>链接将非常有用 <br><br>  <b>IDProtect_Manager</b>程序允许<b>您</b>查看有关带有​​密钥和证书的令牌和容器的信息： <br><br> <code>/usr/bin/IDProtect_Manager</code> <br> <br><img src="https://habrastorage.org/webt/nb/xb/ex/nbxbexx9njsuvpxawxszgs3lr8s.png"><br><br> 要使用密钥访问容器，您需要输入密码： <br><br><img src="https://habrastorage.org/webt/oh/pp/l_/ohppl_roac1knnwejckvd8afypy.png"><br><br><img src="https://habrastorage.org/webt/to/bh/vb/tobhvb23ey_zq2cdwp166-qrs5m.png"><br><br> 要使用<b>SafeNet身份验证客户端eToken PRO</b> ，可以使用类似的程序<b>-SafeNet身份验证客户端监视器</b>和<b>SafeNet身份验证客户端工具</b> ，其运行方式如下： <br><br><pre> <code class="plaintext hljs">/usr/bin/SACMonitor /usr/bin/SACTools</code> </pre><br><img src="https://habrastorage.org/webt/ox/kl/by/oxklbysagi4vqp8crlzbzpmbuv8.jpeg"><br><br> 在密码提供程序CryptoPro JavaCSP的接口中直接使用密钥容器执行操作更加方便： <br><br> <code>/jdk1.8.0_181/jre/bin/java ru.CryptoPro.JCP.ControlPane.MainControlPane <br></code> <br><br><img src="https://habrastorage.org/webt/yj/fi/je/yjfije_eiqqx49g1s7lvwbcwtlc.jpeg"><br><br> 要使用键显示有关容器内容的信息，可以运行以下命令： <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/bin/amd64/csptest -keyset -cont '\\.\Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00\alfa_shark1' -info</code> </pre> <br> 要诊断容器，请使用与–check开关相同的命令 <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/bin/amd64/csptest -keyset -cont '\\.\Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00\alfa_shark' –check</code> </pre> <br> 您将需要输入容器的密码： <br><br><img src="https://habrastorage.org/webt/m1/n4/cv/m1n4cvq78kcuqrfn1c7oxm9y3o4.png"><br><br><img src="https://habrastorage.org/webt/jr/vi/ga/jrvigahwffdkjcmfuwnwij4pdds.jpeg"><br><br><h3> 软件密钥检索 </h3><br> 通常，使用CryptoPro Java CSP从令牌上的容器中检索私钥和公钥证书的示例如下： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.CryptoPro.JCP.KeyStore.JCPPrivateKeyEntry; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.CryptoPro.JCP.params.JCPProtectionParameter; KeyStore keyStore = KeyStore.getInstance(<span class="hljs-string"><span class="hljs-string">"Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00"</span></span>, <span class="hljs-string"><span class="hljs-string">"JCSP"</span></span>); keyStore.load(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); JCPPrivateKeyEntry entry = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; X509Certificate certificate = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; PrivateKey privateKey = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { entry = (JCPPrivateKeyEntry) keyStore.getEntry(keyAlias, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JCPProtectionParameter(pwd)); certificate = (X509Certificate) entry.getCertificate(); privateKey = entry.getPrivateKey(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (UnrecoverableEntryException | NullPointerException e) { LOGGER.log(Level.WARNING, PRIVATE_KEY_NOT_FOUND + keyAlias + ExceptionUtils.getFullStackTrace(e)); }</code> </pre><br><br> 如果您这样操作： <br><br><pre> <code class="java hljs">Key key = keyStore.getKey(keyAlias, pwd);</code> </pre><br> 然后密码提供者将尝试显示请求，以通过控制台或GUI窗口向容器输入密码。 <br><br><h3> 结果 </h3><br> 令牌密钥载体令牌已安装在服务器的内部USB端口中。 <br><br> 服务器硬件本身被密封并放置在访问受限的房间中。 <br><br> 这样的措施可以提高我们的信息系统的保护水平，以防在网络上和物理上被盗和破坏电子签名或加密密钥。 <br><br><h3> 有用的链接 </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Aladdin-RD JaCarta文档</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">wiki.astralinux.ru-使用CryptoPro CSP</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microsoft COM错误代码（安全性和安装程序）的组件的对象模型的错误代码列表</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CryptoPro CSP 4.0 CSP 4.0 FCN（金雅拓）</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">来自安全性的PCSC工具读取器诊断实用程序：芯片卡项目（software.opensuse.org）</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">适用于Linux的CryptoPro CSP。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">定制化。</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Aladdin-RD默认密钥载体PIN（密码）</a> <br></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN441212/">https://habr.com/ru/post/zh-CN441212/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN441202/index.html">服务公司是否梦想着他们的产品？ 与Maxilect对话</a></li>
<li><a href="../zh-CN441204/index.html">以船壁为例的边界探测先进方法</a></li>
<li><a href="../zh-CN441206/index.html">Wolfensteiny 3D-反向工程251字节的JavaScript</a></li>
<li><a href="../zh-CN441208/index.html">我们如何将贷款发行减少到2次点击</a></li>
<li><a href="../zh-CN441210/index.html">集群存储Pacemaker + DRBD（双主）+ samba</a></li>
<li><a href="../zh-CN441214/index.html">Kibana用户指南。 可视化。 第一部分</a></li>
<li><a href="../zh-CN441216/index.html">黑镜还是Picooc广告？</a></li>
<li><a href="../zh-CN441218/index.html">OpenAI Gym + ROS + Gazebo：在家训练一个独立的机器人。 第一部分</a></li>
<li><a href="../zh-CN441220/index.html">使用DNS捕获分析最近的大规模攻击</a></li>
<li><a href="../zh-CN441222/index.html">为什么Kubernetes的存储库如此复杂？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>