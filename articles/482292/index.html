<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèΩ üç• üë®üèº‚Äçüíª El mundo interior de los Formantes P432 üò£ üé± ‚ìÇÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La historia de c√≥mo compr√© inesperadamente un sintetizador, lo repar√©, descubr√≠ c√≥mo funciona y escrib√≠ un emulador. 

 Esta historia comenz√≥ durante ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El mundo interior de los Formantes P432</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482292/"><img src="https://habrastorage.org/webt/dv/3b/pd/dv3bpdmwtjhonhrkr64jbohha3m.jpeg"><br><br>  La historia de c√≥mo compr√© inesperadamente un sintetizador, lo repar√©, descubr√≠ c√≥mo funciona y escrib√≠ un emulador. <br><a name="habracut"></a><br>  Esta historia comenz√≥ durante el festival <a href="https://2019.chaosconstructions.ru/" rel="nofollow">Chaos Constructions el</a> pasado fin de semana de agosto de 2019.  Al mirar Avito por la noche en busca de artefactos interesantes de una √©poca pasada, me encontr√© con un sintetizador Formant P432 econ√≥mico.  Parec√≠a bastante familiar para los sintetizadores digitales: en la parte inferior hay un teclado de 41 teclas (3.5 octavas), en la parte superior hay botones para seleccionar un tono, activar los efectos de coro y un√≠sono, as√≠ como ajustar el efecto de vibrato.  Un joystick est√° instalado a la izquierda del teclado, lo que le permite cambiar el tono hacia arriba y hacia abajo, as√≠ como conectar sin problemas el vibrato. <br><br>  Lo m√°s interesante para m√≠ fue que este sintetizador era digital y generaba sonidos utilizando el m√©todo de tabla de ondas, es decir, al momento de presionar la tecla, generaba sonido basado en datos tabulares almacenados en chips ROM.  Despu√©s de un r√°pido conocimiento de los circuitos en Internet, qued√≥ claro que el control del sintetizador se basa en el conocido microprocesador KP580VM80 (i8080), y los sonidos se almacenan en 8 chips ROM con un volumen total de 8 * 2 = 16 Kb. <br><br>  El sintetizador fue comprado y despacio de la ciudad del vendedor a la oficina local de la compa√±√≠a de transporte, y continu√© estudiando los esquemas.  El vendedor escribi√≥ en un anuncio que la herramienta tiene un defecto que se manifiesta en forma de sibilancias cuando presiona m√°s de una tecla.  M√°s interesante, pens√©.  "Ser√° necesario encontrar y eliminar". <br><br>  Pero el motivo principal para comprar fue el deseo de lidiar con el dispositivo interno y extraer muestras de sonidos de la ROM del sintetizador. <br><br>  <b>DESCARGO DE RESPONSABILIDAD</b> : Los nombres de los componentes de los nodos y se√±ales del sintetizador (distintos de los indicados en "comillas" y en GRANDES letras) fueron inventados por m√≠ y pueden diferir de lo que pretend√≠an los desarrolladores.  La descripci√≥n del funcionamiento de los nodos se basa en mi conocimiento (limitado), materiales de Internet y el asesoramiento de personas con experiencia. <br><br><h3>  Reparaci√≥n </h3><br>  Cuando P432 [ <a href="https://habr.com/ru/post/482292/">2</a> ] me lleg√≥ sano y salvo, lo primero que hice fue desarmarlo.  En el interior no esperaba una vista muy agradable de los haces de cables y varias placas de circuito impreso. <br><br><div class="spoiler">  <b class="spoiler_title">Nodo de control</b> <div class="spoiler_text">  La placa en la que se sueldan los botones y controles del panel frontal, as√≠ como una indicaci√≥n de los modos de funcionamiento. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Nodo del procesador</b> <div class="spoiler_text">  Contiene el microprocesador KR580VM80 y otros chips del kit 580, una ROM de 2 KB en RF2, dos chips RAM est√°ticos con una capacidad total de 256 bytes (K541RU2).  Adem√°s, se instalan decodificadores en el tablero, que asignan partes del espacio de direcciones para la interacci√≥n con el teclado, con botones y registros de control, a la salida de los cuales se generan se√±ales de control para el nodo generador. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Nodo de interfaz MIDI</b> <div class="spoiler_text">  Se instala sobre el nodo del procesador y consta de una ROM separada con rutinas de mensajer√≠a MIDI, l√≥gica fina y dos microcircuitos grandes: el controlador de interrupci√≥n VN59 y la interfaz BB51 en serie.  Para los contactos TX / RX VN51, se conecta un circuito de implementaci√≥n de bucle de corriente midi est√°ndar con aislamiento de optoacoplador. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Nudo de coro</b> <div class="spoiler_text">  En forma de una placa aislada con solo entrada anal√≥gica, salida y potencia.  Se implementa en microcircuitos KA528BR2: l√≠neas de retardo anal√≥gicas.  La unidad es muy ruidosa, pero le da al sonido un color interesante. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Conjunto generador</b> <div class="spoiler_text">  El m√≥dulo principal del sintetizador.  Contiene 8 chips ROM de 2 KB cada uno, l√≥gica digital (registros, sumadores), dos DAC, un filtro anal√≥gico con par√°metros variables y estabilizaci√≥n t√©rmica.  El nodo tambi√©n contiene un generador de reloj con el que se sincroniza el funcionamiento de los registros del nodo del procesador.  La placa secundaria en este nodo tiene una placa VCO (generador de voltaje controlado), que es un refinamiento de f√°brica de revisiones posteriores del sintetizador. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Conjunto rectificador y estabilizador</b> <div class="spoiler_text">  Una fuente de alimentaci√≥n lineal que produce + 5V para potencia l√≥gica y + 12 / -15V para amplificadores operacionales.  + 5V es estabilizado por KR142EN5, cuyo radiador es la carcasa met√°lica del sintetizador, y + 12 / -15V son los estabilizadores param√©tricos m√°s simples en diodos y transistores zener.  Un voltaje de suministro adicional de -5V para el KR580VM50 est√° formado por un diodo zener desde -15V directamente en la placa de la unidad del procesador.  La tierra anal√≥gica y digital se separan por separado y se conectan solo en este bloque. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Teclado del instrumento</b> <div class="spoiler_text">  Interruptor de l√°minas, no sensible a la velocidad, como en otros sintetizadores de la f√°brica de radio Kachkanar de Formant. <br></div></div><br><img src="https://habrastorage.org/webt/ug/qe/2x/ugqe2xza93bmihgm3hhezgz9qxi.jpeg"><br><br>  La eliminaci√≥n del nodo MIDI en una placa separada con su ROM se debe a la presencia de otro sintetizador en la l√≠nea P432: el "Formant MINI", que no tiene una interfaz MIDI y el efecto HOR.  El nodo del procesador MINI es ligeramente diferente en firmware y el nodo generador es el mismo que en P432. <br><br>  Entonces, cuando encend√≠ por primera vez, not√© dos problemas: un nivel de se√±al muy d√©bil en la salida lineal y el sonido ya mencionado al presionar m√°s de una tecla a la vez.  Cabe se√±alar que el P432 es un sintetizador polif√≥nico, y puede reproducir simult√°neamente 4 voces (frecuencias) de un timbre.  Y con la inclusi√≥n del efecto UNISON, el n√∫mero de voces sonoras simult√°neas aumenta a 8, dos por cada tecla. <br><br>  La raz√≥n del sonido silencioso se encontr√≥ casi de inmediato, la salida quemada OU K544UD1A fue la culpable. <br><br>  Despu√©s de reemplazarlo, el instrumento comenz√≥ a sonar fuerte incluso cuando los auriculares pasivos estaban conectados a la salida. <br><br>  Pero con sonidos extra√±os, la situaci√≥n era muy incomprensible, porque incluso cuando se presionaron teclas individuales, los sonidos de los tonos no eran como la demostraci√≥n de P432 de YouTube. <br><br>  Tard√≥ bastante tiempo en encontrar el problema, pero al final se localiz√≥ en el nivel del DAC principal.  El bit alto de la entrada digital no fue suficiente para reconocerlo como 1 l√≥gico, por lo que la se√±al de salida anal√≥gica estaba distorsionada.  El culpable de esta historia fue encontrado y eliminado, luego de lo cual se resolvi√≥ el problema.  Todos los tonos comenzaron a sonar claros y sin problemas con unos pocos toques. <br><br>  Habr√≠a un final para la historia, pero ya se hab√≠a dedicado mucho tiempo a la reparaci√≥n, as√≠ que decid√≠ que no deber√≠amos detenernos all√≠ y tenemos que resolverlo: <br><br><ul><li>  como es el proceso de s√≠ntesis de sonido </li><li>  lo que est√° almacenado en la ROM de la unidad generadora </li><li>  c√≥mo funciona el filtro y sus caracter√≠sticas </li><li>  donde se almacena la configuraci√≥n para cada tono y par√°metros de envolvente </li></ul><br>  El resultado de este trabajo fue la emulaci√≥n de software de P432 utilizando datos de la ROM original. <br><br><h3>  Conjunto generador </h3><br>  La forma de onda en la salida del DAC principal de la unidad generadora est√° formada por el principio de s√≠ntesis digital directa (DDS) [ <a href="https://habr.com/ru/post/482292/">1</a> ].  La se√±al anal√≥gica recibida se pasa a trav√©s de un filtro de paso bajo, luego, si es necesario, se mezcla con la salida del conjunto del coro, se amplifica mediante un amplificador de salida y se alimenta a una salida lineal.  El filtro en P432 se realiza de acuerdo con el esquema utilizado previamente en el sintetizador Polyvox [ <a href="https://habr.com/ru/post/482292/">3</a> ]. <br><br><img src="https://habrastorage.org/webt/ts/7l/5c/ts7l5cybnhehm2zl7btvloqsorq.png"><br>  <i>El diagrama muestra la unidad generadora y sus principales bloques funcionales.</i>  <i>Las flechas naranjas indican entradas y salidas de se√±ales digitales externas, se√±ales digitales negras dentro del m√≥dulo, se√±ales anal√≥gicas azules.</i> <i><br></i> <br><br>  Primero, considere las entradas y salidas: <br><br><ul><li>  Entrada "Frecuencia" (11 bits): para cada voz, incluido el un√≠sono, los valores correspondientes a la tecla presionada o nota MIDI provienen del nodo del procesador. <br></li><li>  Entrada de amplificador (8 bits): el valor de envolvente para la amplitud de la se√±al. </li><li>  Entrada "Filtro" (8 bits): valores de la envolvente de la frecuencia de corte del filtro. </li><li>  Entrada de "control" - (8 bits) - 3 bits menos significativos son responsables de la selecci√≥n de la forma de onda, 2 bits para el desplazamiento del filtro, 2 m√°s para el nivel de calidad del filtro Q Q (resonancia) y el √∫ltimo bit determina si el efecto UNISON est√° activado o desactivado. </li><li>  Salida "Direcci√≥n" (3 bits): responsable de la sincronizaci√≥n con el nodo del procesador. </li></ul><br>  Ahora veamos c√≥mo funcionan los bloques principales del nodo. <br><br>  El circuito de sincronizaci√≥n con la ayuda de multivibradores, un contador y elementos l√≥gicos genera pulsos de control para varios m√≥dulos de la unidad generadora y da el n√∫mero de voz actual a la "Direcci√≥n" de salida.  Cuando el modo UNISON "Direcci√≥n" est√° activo, toma los valores [0,1,2,3,4,5,6,7] y cuando est√° inactivo: [0,2,4,6].  La frecuencia del oscilador maestro se puede cambiar en peque√±a medida con la perilla de ajuste en el panel frontal y el joystick a la izquierda del teclado. <br><br><img src="https://habrastorage.org/webt/kc/m2/cf/kcm2cfudodvfljpi178cyw3yy3k.png">  <i>Diagrama de tiempos de pulsos de reloj.</i>  <i>Explicaciones: Unison - log.</i>  <i>0 nivel activo, FA0-2 - Salida "Direcci√≥n", DD8-12 - registro de acumulador de fase, DD33-35 - registro total de votos, DD36-37 - registro DAC.</i> <i><br></i> <br><br>  La parte digital de la placa del generador para cada uno de los 4 (8) votos simult√°neamente con un cambio en el valor de la "Direcci√≥n" de salida realiza las siguientes operaciones.  Desde el nodo del procesador, la entrada "Frecuencia" recibe los valores de frecuencia de la se√±al.  El decodificador de la ROM convierte el valor lineal de la frecuencia en incremento de fase.  Los incrementos se suman en el acumulador de fase (20 bits), que consta de un sumador y 8 palabras de RAM.  Los 9 bits m√°s altos de la suma se alimentan a las entradas de direcci√≥n de la ROM de forma de onda.  Los tres bits menos significativos de la entrada "Control" seleccionan un √°rea ROM espec√≠fica.  10 bits de la salida de la ROM se suman con el valor en la entrada del "Amplificador" y se alimentan a las entradas de la ROM de escala, que genera un c√≥digo bipolar para el DAC.  El resultado cae en el b√∫fer de acumulaci√≥n, construido en sumadores y registros, que suma secuencialmente los valores de c√≥digo de los 4 (8) votos.  Al final de cada ciclo, el c√≥digo final es retenido por el registro de almacenamiento y llega al DAC de 12 bits.  La frecuencia de emisi√≥n del c√≥digo en el DAC es la frecuencia de muestreo de la se√±al y para P432 es de aproximadamente 33 kilohercios.  Seg√∫n Nyquist, la frecuencia de sonido m√°xima disponible para el generador P432 es de aproximadamente 16.5 kHz. <br><br>  Si el timbre seleccionado requiere un cambio din√°mico de los par√°metros del filtro de paso bajo, los valores de envolvente se env√≠an a la entrada del filtro, que, pasando por el DAC de 10 bits, forma el voltaje de control para el filtro del amplificador operacional.  El filtro de paso bajo est√° hecho de acuerdo con el filtro sin condensador del filtro de estado variable e incluye un circuito de estabilizaci√≥n de temperatura, un bloque para cambiar el factor Q de Q y la polarizaci√≥n inicial. <br><a name="dia1"></a><br><img src="https://habrastorage.org/webt/ii/fh/bq/iifhbqm2guxdn1b2vpagozcg9l8.png"><br>  <i>Este gr√°fico de tiempos muestra dos per√≠odos de discretizaci√≥n de la placa del generador.</i>  <i>UNISON est√° apagado.</i>  <i>La entrada de frecuencia (Freq_in) sincr√≥nicamente con el cambio de direcci√≥n recibe los n√∫meros de frecuencia de cuatro teclas diferentes.</i>  <i>Pero solo se presionan los dos √∫ltimos (Volume_in = 0xFF).</i>  <i>Al mismo tiempo, se emite un valor constante (Filter_in = 0x60) a la entrada "Filtro".</i>  <i>El c√≥digo final se ingresa al DAC (DAC) despu√©s de encajar en los registros de almacenamiento (DD36-37).</i> <br><br><div class="spoiler">  <b class="spoiler_title">Para UNISON incluido</b> <div class="spoiler_text">  todo se ve igual, solo la entrada "Frecuencia" recibe un par de n√∫meros: para la voz principal y al un√≠sono. <br><br>  Nota: solo se muestra un per√≠odo. <br><br><img src="https://habrastorage.org/webt/nn/-n/z2/nn-nz27kbozdrgb9nvn9l8apzzy.png"><br></div></div><br><h4>  Una descripci√≥n m√°s detallada del conjunto generador. </h4><br>  A continuaci√≥n se detallan los diagramas esquem√°ticos y el√©ctricos para aquellos que desean comprender el dispositivo sintetizador con m√°s detalle.  Los circuitos se encontraron en Internet, aunque se adjuntaron a mi sintetizador un manual de instrucciones [ <a href="https://habr.com/ru/post/482292/">4</a> ] y un conjunto completo de circuitos en papel [ <a href="https://habr.com/ru/post/482292/">5</a> ].  Las buenas personas compartieron el archivo con el contenido de todas las ROM en un foro, pero result√≥ que hubo un error en uno de los archivos, as√≠ que tuve que cancelar la suscripci√≥n de ROM individuales y compararlas con el firmware del archivo. <br><br>  Cabe se√±alar que durante la producci√≥n de P432, el fabricante emiti√≥ varias revisiones de las placas sintetizadoras para mejorar las caracter√≠sticas t√©cnicas, que pueden diferir de los primeros esquemas de revisi√≥n presentados a continuaci√≥n. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/r_/j2/wh/r_j2wh8ff0lhsgn0t4-vewucrge.jpeg"></a> <br><br><ol><li>  La ROM de conversi√≥n de incremento de frecuencia - DD1-2, ejecutada en dos 573RF2, contiene una tabla de correspondencia del valor de frecuencia lineal con el incremento de fase exponencial.  Gr√°ficamente, su contenido se ve as√≠ <br><br><img src="https://habrastorage.org/webt/u4/dm/w0/u4dmw0zfe_tzpofn0b8bfg-yege.png"><br><br>  Sincr√≥nicamente con un cambio en el valor en la "Direcci√≥n" de salida, el nodo del procesador emite un valor de frecuencia de 11 bits de la voz correspondiente a la "Frecuencia" de entrada, que se convierte en incrementos de 16 bits. <br><br><div class="spoiler">  <b class="spoiler_title">Si consideramos el contenido de las primeras 16 palabras de DD1-2, entonces se escriben algunos n√∫meros extra√±os que parecen no usarse en la s√≠ntesis del sonido:</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/9e/vx/rz/9evxrzasws-fe1lhvnloma1gzp4.png"><br></div></div></li><li>  Acumulador de fase: consta de sumadores DD3-7 (561IM1) y registros DD8-12 (561IR11).  Los sumadores se incluyen en la cadena con una capacidad total de 20 bits.  El bloque de registro le permite almacenar ocho valores de fase de se√±al de 20 bytes.  Las entradas de direcci√≥n de los registros de lectura / escritura est√°n conectadas a la "Direcci√≥n" del bus.  Esta inclusi√≥n le permite recibir el valor anterior en la salida del pulso del reloj y guardar el valor actual de la entrada.  Esto asegura la acumulaci√≥n de fase por separado para cada sintetizador de voz.  Los 9 bits altos de la salida del registro se alimentan a las entradas de direcci√≥n de la forma de onda ROM. </li><li>  Forma de onda ROM - DD13-14, DD18-19 (5732) contiene tablas de ocho formas de onda que pueden ser sintetizadas por un conjunto generador.  Los bits S0-S2 de la se√±al "Control" seleccionan un √°rea de memoria espec√≠fica y un par de ROM.  Bajo la descripci√≥n de cada se√±al, se asignan 512 palabras con una capacidad de 11 bits.  El 10 bit m√°s significativo tiene un prop√≥sito de utilidad, indicando la polaridad de la se√±al: 1 positivo, 0 negativo.  La apariencia de las formas de onda se da teniendo en cuenta la inversi√≥n de los valores negativos: <br><br><div class="spoiler">  <b class="spoiler_title">Wave_00</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/or/vw/6u/orvw6ufj6zwaagtsfpnkhbi7kco.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_01</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/f7/ki/qe/f7kiqemlbbaeapbd8zk0a1v25yi.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_02</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bp/1r/6y/bp1r6ypxrnj5ux1gcavtzv-77tk.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_03</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xu/sb/l3/xusbl3xahaejjicw-dilwuiumtw.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_04</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/h_/ki/6l/h_ki6lga37bdnhfrul7cxoufp6m.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_05</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dm/ic/6m/dmic6msl9qiow18hx4qtvj8g_-s.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_06</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ud/q0/kj/udq0kj3ce_wdf5dclef5kdruy3m.png"></div></div><div class="spoiler">  <b class="spoiler_title">Wave_07</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ec/gq/tf/ecgqtft3xeliwxyp4rkrtjlhqjq.png"></div></div></li><li>  Sumador de envolvente: se reciben 8 bits de envolvente (desplazados a la izquierda 2 bits) en la entrada del amplificador, que se suman en los elementos DD23-25 ‚Äã‚Äã(561IM1) con los 10 bits de orden m√°s bajo de la salida ROM de la forma de onda.  El sobre tiene 4 fases: Ataque, Decaimiento, Sostenido, Liberaci√≥n, que son formadas por la unidad del procesador por separado para cada una de las 4 voces principales, dependiendo del momento en que se presiona / suelta la tecla. <br>  Un ejemplo de un sobre para el tono 00: un ataque r√°pido a 255 es claramente visible, luego una disminuci√≥n para soportar el nivel 239, luego una disminuci√≥n suave en el nivel, que termina con una fuerte atenuaci√≥n a 0 cuando sueltas la tecla.  En el eje horizontal est√° el tiempo en segundos, en el eje vertical est√° el valor de la entrada "Amplificador". <br><br><div style="text-align:center;"><img alt="Sobre de la entrada \ &quot;Amplificador \&quot;" src="https://habrastorage.org/webt/sc/ih/1e/scih1ebv64qe7hr9uywlvqixrpw.png"></div><br><br>  Los valores en la ROM del sintetizador se seleccionan de tal manera que a 0 en la entrada del "Amplificador", la salida del DAC tambi√©n tendr√° un nivel de se√±al cero, a pesar de que todos los circuitos intermedios cambian constantemente los valores de las variables y generan diferentes se√±ales. </li><li>  La ROM de escalado, que consta de DD27-28 (5732), contiene curvas para obtener el c√≥digo de la se√±al bipolar de acuerdo con el valor del bit de orden superior de la forma de onda.  En forma gr√°fica, el contenido de la ROM se ve as√≠. <br><br><img src="https://habrastorage.org/webt/si/vk/qd/sivkqdmz_xprac6wlofmlq85cfy.png"><br><br>  Si el d√©cimo bit es 1, se utiliza el valor de la salida DD28 + 256, y si es 0, entonces DD27 + 1. </li><li>  El acumulador de votos en DD30-32 (561IM1) y registra DD33-DD35 (5619) mezcla los valores de los c√≥digos de todos los votos antes de emitirlos al DAC.  Despu√©s de procesar el c√≥digo de la √∫ltima voz, el valor recibido se transfiere al registro de almacenamiento y el registro del sumador se restablece a cero. <br><br>  Ejemplo: como se mencion√≥ anteriormente, si "Amplificador" = 0, y el valor de amplitud m√°ximo posible en la salida de la ROM de forma de onda (1 &lt;&lt; 10) -1 = 1023, entonces en la salida de la ROM de escala obtenemos 0 + 256 o 255+ 1 dependiendo de 10 bits de la forma de onda, lo que da un total de 256 * 8 = 2048 y corresponde a 0 en la salida del DAC. </li><li>  El registro de almacenamiento en los elementos DD36-37 (555TM9) recibe y almacena el valor del c√≥digo en la salida durante el intervalo de muestreo.  La frecuencia de muestreo del nodo generador es aproximadamente igual a 33000 Hz. </li><li>  DA38 DAC (534PA1): convierte un valor de 12 bits en una se√±al bipolar anal√≥gica, el c√≥digo 2048 corresponde al anal√≥gico 0. </li><li>  Filtro de paso bajo: construido de acuerdo con el esquema desarrollado por Vladimir Kuzmin para el sintetizador Polivox, sin embargo, se ha agregado a P432 un nodo para la estabilizaci√≥n t√©rmica de la corriente de control del filtro OA.  Adem√°s, se toma del mismo Polivox, donde se utiliz√≥ para estabilizar la frecuencia de los generadores.  En el sitio del autor puede encontrar instrucciones sobre c√≥mo configurar este nodo [ <a href="https://habr.com/ru/post/482292/">6</a> ]. <br><br>  Ya se ha escrito mucho sobre el filtro en s√≠, por lo que podemos prescindir de los detalles. <br>  El control del filtro se basa en un DAC de 10 bits (572PA1), cuya entrada se alimenta con una se√±al de "Filtro" de 8 bits, que es la envolvente del filtro, y, seg√∫n el timbre, puede ser un valor constante y generalmente igual a cero.  Los par√°metros del filtro tambi√©n se ven afectados por el valor de 4 bits de la se√±al de "Control": F0-F1 establece el desplazamiento del voltaje de salida del DAC, y Q0-Q1 son responsables del factor de calidad (nivel de resonancia) del filtro. </li><li>  Despu√©s del filtro, se instala un interruptor que le permite habilitar la mezcla con la se√±al principal de su copia procesada por el efecto HOP.  En las primeras modificaciones del P432, se usaba el mismo interruptor para apagar la salida de sonido cuando no se presionaba ninguna tecla.  Pero en revisiones posteriores esto fue rechazado, comenzaron a cortar caminos, lanzar cables y agregar nuevos elementos al circuito. </li><li>  Amplificador: eleva el nivel de la se√±al de salida a 250 mV. </li></ol><br><h3>  Configuraci√≥n de CPU y nodo </h3><br>  Entonces, descubrimos los generadores.  Ahora queda por comprender de d√≥nde provienen todas las se√±ales de control y d√≥nde se almacenan los par√°metros que las describen. <br><br>  Al principio, plane√© eliminar los volcados de todas las se√±ales de control mediante un analizador l√≥gico y crear un algoritmo para describirlas.  Por ejemplo, las envolventes del amplificador y el filtro pueden describirse mediante una funci√≥n lineal por partes, que requiere un n√∫mero limitado de par√°metros. <br><br>  Con la entrada "Frecuencia", tambi√©n fue suficiente para registrar los valores de frecuencia de una sola tecla para cada timbre y calcular todos los dem√°s en funci√≥n de ella. <br><br>  Seg√∫n el manual de instrucciones, el P432 tiene un teclado de 41 teclas con un volumen de 3 y 5/12 octavas con un rango de C1-E4 en notaci√≥n cient√≠fica o C1-e1 en notaci√≥n de Helmholtz.  Sin embargo, en la pr√°ctica (para el tono 00), basado en la correspondencia A4 = 440 Hz, result√≥ que la tecla A en la segunda octava izquierda produce un sonido de esta frecuencia, y esto ya da el rango C3-E6.  Como result√≥ m√°s tarde, dependiendo del tono activo, el rango de frecuencias reproducidas puede variar, cambiando en 1 o 2 octavas. <br><br>     ¬´¬ª             . <br><br><div class="spoiler"> <b class="spoiler_title">     ¬´¬ª</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/za/0x/9n/za0x9nglorah92outrafd3zafp8.png"></div></div><br>  ,            ,           DD16  . ,    5732  2048 . <br><br><img src="https://habrastorage.org/webt/ra/li/sr/ralisrftayjhrw4kilnbi20ere4.png"><br><br> 1024       32 ,  32     .               ,    .      . <br><br><div class="spoiler"> <b class="spoiler_title">    .</b> <div class="spoiler_text">      ,      00/FF,     . <br><div class="scrollable-table"><table><tbody><tr><th>  </th><th>  </th><th>  Descripci√≥n </th></tr><tr><td>  0 0 </td><td> FA_min </td><td>      </td></tr><tr><td>  1 </td><td> FA_dt </td><td>     </td></tr><tr><td>  2 </td><td> FA_max </td><td>     </td></tr><tr><td>  3 </td><td>  ? </td><td>  ? </td></tr><tr><td>  4 4 </td><td> FD_ft </td><td>      </td></tr><tr><td>  5 5 </td><td> FD_dt </td><td>     </td></tr><tr><td>  6 6 </td><td> FS_lvl </td><td>    </td></tr><tr><td>  7 7 </td><td> FREQ_u1 </td><td>     </td></tr><tr><td>  8 </td><td> FS_ft </td><td>      </td></tr><tr><td>  9 9 </td><td> FS_dt </td><td>     </td></tr><tr><td>  10 </td><td> FR_ft </td><td>      </td></tr><tr><td>  11 </td><td> FR_dt </td><td>     </td></tr><tr><td>  12 </td><td>  ? </td><td>  ? </td></tr><tr><td>  13 </td><td></td><td>  00 </td></tr><tr><td>  14 </td><td> FREQ_u2 </td><td>     </td></tr><tr><td>  15 </td><td> Ctrl </td><td>  ¬´¬ª </td></tr><tr><td>  16 </td><td> A_min </td><td>      </td></tr><tr><td>  17 </td><td> A_dt </td><td>     </td></tr><tr><td>  18 a√±os </td><td> A_max </td><td>      </td></tr><tr><td>  19 </td><td></td><td>  FF </td></tr><tr><td>  20 </td><td> D_ft </td><td>      </td></tr><tr><td>  21 </td><td> D_dt </td><td>     </td></tr><tr><td>  22 </td><td> S_lvl </td><td>    </td></tr><tr><td>  23 </td><td></td><td>  FF </td></tr><tr><td>  24 </td><td> S_ft </td><td>      </td></tr><tr><td>  25 </td><td></td><td>  00 </td></tr><tr><td>  26 </td><td></td><td>  00 </td></tr><tr><td>  27 </td><td> R_dt </td><td>      </td></tr><tr><td>  28 </td><td>  ? </td><td>  ? </td></tr><tr><td>  29 </td><td></td><td>  00 </td></tr><tr><td>  30 </td><td> FREQ_1 </td><td>     </td></tr><tr><td>  31 </td><td> FREQ_2 </td><td>     </td></tr></tbody></table></div></div></div><br>    ,       :    ¬´¬ª,   ¬´¬ª,   ¬´¬ª  ,          ¬´¬ª. <br><br>       ,       .        ,     ,   -     . <br><br>    *_dt       , ,   00: A_min=0, A_dt=48  A_max=255.  ,     0    48,     255.     D_dt    A_max   S_lvl,  S_ft&gt;0,         S_ft  1,    .  R_dt     :       R_dt       0.  dt  1,    *_dt&lt;=1   *_dt   . <br><br>  *_ft  ,       ,      .   ,       ~ 100     ~ 3 .          <i>int(256 / *_ft) * 100</i> , .. *_ft       100  . <br><br> ,      .              *_ft/*_dt. <br><br><img src="https://habrastorage.org/webt/l4/4x/eh/l44xehulnortzobmt4psredmfka.png"><br><br>  ¬´¬ª      ,        . <br><br>      ¬´¬ª.    ,     4  (),   ,   ,                 1-2 . <br><br>    : FREQ_1, FREQ_2    FREQ_u1, FREQ_u2  .          A    432. <br><br><pre><code class="python hljs">freq_offset = {<span class="hljs-number"><span class="hljs-number">4</span></span>:<span class="hljs-number"><span class="hljs-number">0xd0</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">0x90</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>:<span class="hljs-number"><span class="hljs-number">0x50</span></span>} freq = (config[<span class="hljs-string"><span class="hljs-string">'FREQ_1'</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) + freq_offset[config[<span class="hljs-string"><span class="hljs-string">'FREQ_1'</span></span>]] + config[<span class="hljs-string"><span class="hljs-string">'FREQ_2'</span></span>]</code> </pre> <br>  Un ejemplo para el tono 00, donde: FREQ_1 = 6, FREQ_2 = 8, obtenemos: 6 * 0x100 + 0x50 + 8 = 0x658, que es consistente con los datos del analizador l√≥gico para todos los tonos.  Para un√≠sono, el c√°lculo es similar. <br><br>  Vale la pena se√±alar que para el tono 00, el valor 0x658 corresponde a una frecuencia de 440 Hz o nota A4. <br>  Se estableci√≥ experimentalmente que el intervalo de "Frecuencia" para las teclas adyacentes (incluidas las negras) es de 16 (0x10) unidades.  Por lo tanto, si conocemos el valor de la tecla 22 a la izquierda (A de la segunda octava) - 0x658, entonces podemos obtener f√°cilmente el valor para el extremo izquierdo (No. 1): 0x508 y el extremo derecho (No. 41): 0x788. <br><br>  Basado en esto, puede calcular el rango del teclado y las frecuencias reproducidas para diferentes tonos.  La columna "Frecuencia" ser√° correcta solo para formas de onda simples. <br><div class="scrollable-table"><table><tbody><tr><th>  FREQ_1 </th><th>  Alcance </th><th>  Frecuencia Hz </th><th>  Timbres </th></tr><tr><td>  4 4 </td><td>  C1 - E4 </td><td>  32,70 - 329,63 </td><td>  01, 07, 13, 14, 25, 30, 31, 32, 33, 34, 35 </td></tr><tr><td>  5 5 </td><td>  C2 - E5 </td><td>  65.41 - 659.26 </td><td>  03, 05, 06, 10, 15, 17, 23, 24, 27, 37 </td></tr><tr><td>  6 6 </td><td>  C3 - E6 </td><td>  130.81 - 1318.51 </td><td>  00, 02, 04, 11, 12, 16, 20, 21, 22, 26, 36 </td></tr></tbody></table></div>  Lo anterior es m√°s que suficiente para crear el emulador P432, as√≠ que pasemos a √©l. <br><br><h3>  Crear emulaci√≥n P432 en Python </h3><br>  Pens√© que ser√≠a bueno separar el almacenamiento de configuraci√≥n y la generaci√≥n de sonido, por lo que se crearon dos clases principales: <br><br><ul><li>  P432data, responsable de cargar valores de im√°genes ROM y llevar la configuraci√≥n de tonos a una forma conveniente para su uso; </li><li>  P432, que contiene m√©todos para crear formas envolventes y generar muestras digitales. <br></li></ul>  No me detendr√© en los datos P432 en detalle, el c√≥digo fuente se puede ver en github. <br>  Pero los m√©todos de P432 se consideran con m√°s detalle. <br><br>  El principal, por supuesto, es <b>gen_samples</b> con un par√°metro que indica el n√∫mero de muestras que debe devolver.  En este m√©todo, el procesamiento de se√±ales desde la recepci√≥n del valor en la entrada "Frecuencia" hasta la salida al DAC se recrea lo m√°s cerca posible del prototipo.  En principio, centr√°ndose en el esquema P432, puede encontrar r√°pidamente los equivalentes de Python de los m√≥dulos del conjunto generador.  Lo √∫nico que tuvo que agregarse expl√≠citamente fue la reducci√≥n de las variables a la dimensi√≥n dada: 20 bits para el acumulador de fase, 11 bits para el sumador de sobres y 12 bits para el sumador de votos.  Esta restricci√≥n es necesaria para que la l√≥gica de desbordamiento de estas variables funcione normalmente. <br><br>  Los m√©todos para crear envolventes del amplificador <b>getADS</b> y el <b>formulario getFADS</b> filtran listas con valores de la amplitud de envolvente, de los cuales gen_samples toma valores al momento de presionar las teclas.  Tienen un par de m√©todos <b>getR</b> y <b>getFR</b> en su empresa que forman la fase de atenuaci√≥n de sobres.  Toman el par√°metro de nivel como entrada: el valor actual del nivel de envolvente, a partir del cual disminuir√° a 0. <br><br>  Las cuatro voces principales tienen la misma forma de envolvente que el Amplificador y el Filtro, pero si el Sobre tiene su propia envolvente para cada voz y comienza cuando se presiona una tecla, entonces para el filtro es com√∫n para todas las voces, comienza desde la primera pulsaci√≥n, se reinicia despu√©s de la siguiente y dura hasta la √∫ltima. soltando  <a href="https://habr.com/ru/post/482292/">Mira arriba</a> <br><br>  De acuerdo con el manual de instrucciones, P432 emite n√∫meros de nota MIDI del 36 al 77 (en realidad 76) para las teclas del teclado del 1 al 41, respectivamente.  Para no reinventar la rueda, decid√≠ usar el rango 36-76 en el emulador como los n√∫meros de la tecla presionada, por lo que necesitaba el m√©todo midi2freq, que convierte el n√∫mero de tecla al valor de "Frecuencia", teniendo en cuenta el tono seleccionado. <br><br>  El √∫ltimo par de m√©todos fueron <b>key_press</b> (midi_note) y <b>key_release</b> (midi_note), que formaron un diccionario de correspondencia de la voz con la frecuencia del tono fundamental, la fase y la posici√≥n actual de la envolvente. <br><br>  El √∫ltimo m√©todo principal es <b>setprog</b> (prog, clean = True), dise√±ado para seleccionar el tono activo.  <b>Setprog</b> carga la configuraci√≥n del tono deseado y, si no se borra el indicador de limpieza, borra las variables internas.  Si clean se establece en False, las variables internas no se restablecen, lo que le permite cambiar entre tonos durante la generaci√≥n de sonido pr√°cticamente sin clics u otros sonidos desagradables. <br><br>  Para escribir las muestras generadas en el archivo WAV, se cre√≥ el m√©todo de utilidad write_wav basado en el m√≥dulo wave.  Para cada muestra, el escalado se realiza para aumentar la amplitud y llevarlo a una forma firmada de 16 bits. <br><br>  Estos m√©todos son suficientes para obtener un archivo wav con la grabaci√≥n de unos segundos de cualquiera de los sonidos del sintetizador. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    p432=P432() #   p432.setprog(0) #     (  ) p432.unison=False p432.filter_en = False #   A   p432.key_press(57) #  3   samples=p432.gen_samples(33000*3) #   p432.key_release(57) #    p432.write_wav('test_00.wav',samples)</span></span></code> </pre> <br>  La forma de onda del timbre 00 es una sinusoide, por lo que en la salida obtenemos una sinusoide con una envolvente superpuesta.  <a href="https://soundcloud.com/user-439332338/sound-00" rel="nofollow">Para escuchar</a> <br><br><img src="https://habrastorage.org/webt/ab/69/fj/ab69fjssefu7whas7t2cgdwnehg.png"><br><br>  Un poco m√°s interesante ser√° la grabaci√≥n del tono 14 con el un√≠sono y el filtro activados.  <a href="https://soundcloud.com/user-439332338/sound-14" rel="nofollow">Para escuchar</a> <br><br><img src="https://habrastorage.org/webt/xp/zt/nc/xpztnckj7tfji6_nmuiozfuvn_o.png"><br><br><h4>  GUI </h4><br>  Un generador de sonido de consola es bueno, pero tambi√©n quiero tocar en el teclado.  As√≠ que decid√≠ hacer una GUI simple en Tkinter. <br><br>  La interfaz fue influenciada por el P432 real con la adici√≥n de una leyenda del teclado, un bot√≥n de selecci√≥n de entrada MIDI y la capacidad de apagar el filtro. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2p/1z/ac/2p1zac1vtiabmog8o9wurzqfoli.png"></div><br>  El bot√≥n "Midi In" aparecer√° si tiene instalado el m√≥dulo "python-rtmidi".  Despu√©s de presionarlo y seleccionar el dispositivo de entrada Midi, el programa activa una funci√≥n de devoluci√≥n de llamada que captura los eventos de Note-On, Note-Off y Program Change en los 16 canales midi.  A trav√©s del cambio de programa, puede cambiar el n√∫mero del tono del emulador activo. <br><br>  Para interceptar las pulsaciones del teclado, use el <b>m√©todo</b> Tkinter <b>bind ('&lt;KeyPress')</b> , <b>bind ('&lt;KeyRelease')</b> , y luego en la funci√≥n de devoluci√≥n de llamada, el n√∫mero de tecla se verifica con la lista permitida, se convierte en una nota midi y se <b>llama a los</b> m√©todos <b>p432.key_press ()</b> , <b>p432.key_release ()</b> .  La intercepci√≥n se activa cuando se inicia el programa y se desactiva al final. <br><br>  Para emitir sonido de transmisi√≥n, el m√≥dulo pyaudio se usa en modo sin bloqueo.  Despu√©s de renderizar la interfaz, comienza en un subproceso de subprocesamiento separado y tkinter contin√∫a funcionando principalmente.  En la funci√≥n de devoluci√≥n de llamada, pyaudio pasa el n√∫mero de muestras que se generar√°n y, a cambio, recibe muestras de gen_samples y un indicador de estado.  Para reducir la latencia entre el evento de nota activada (presionando una tecla) y la aparici√≥n del sonido, se selecciona un b√∫fer bastante peque√±o: 200 muestras.  Se establece mediante el par√°metro frames_per_buffer del m√©todo open pyaudio. <br><br>  La versi√≥n compilada de Pyinstall de P432_emulator para Windows se puede descargar de las <a href="" rel="nofollow">versiones</a> . <br><br><h3>  Conclusi√≥n </h3><br>  En este art√≠culo, los detalles del funcionamiento del filtro anal√≥gico en el nodo generador (y su implementaci√≥n digital en el emulador), el nodo procesador, el efecto HOP y la interfaz MIDI casi no se revelan.  Se hizo hincapi√© en el dise√±o de la parte digital de la unidad generadora, el m√©todo de almacenamiento de los par√°metros de los timbres y su uso al crear el emulador. <br><br>  Si el tema es de inter√©s, planificar√© un segundo art√≠culo con un an√°lisis del resto. <br><br>  Adem√°s, si le parece que hay errores o imprecisiones en la descripci√≥n del funcionamiento de los nodos P432, escriba los comentarios. <br><br>  El c√≥digo fuente del proyecto, el firmware ROM, los diagramas y el manual de operaci√≥n est√°n disponibles en <a href="https://github.com/sintech/Formanta_P432" rel="nofollow">github</a> . <br><br><h3>  Referencias </h3><br><ol><li><a name="lit1"></a>  <a href="https://www.kit-e.ru/articles/elcomp/2001_07_50.php" rel="nofollow">Ridiko L. DDS: S√≠ntesis de frecuencia digital directa.</a> </li><li><a name="lit2"></a>  Museo de Sintetizadores Sovi√©ticos, Formante P432.  <a href="http://www.ruskeys.net/base/form432.php" rel="nofollow">www.ruskeys.net/base/form432.php</a> </li><li><a name="lit3"></a>  Wikipedia  <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25B8%25D0%25B2%25D0%25BE%25D0%25BA%25D1%2581" rel="nofollow">Polyvox</a> </li><li><a name="lit4"></a>  Instrumento de teclado electromusical "Formant P432".  <a href="https://github.com/sintech/Formanta_P432/raw/master/docs/Formanta%2520P432%2520Users%2520manual.pdf" rel="nofollow">Manual de operaci√≥n</a> . </li><li><a name="lit5"></a>  <a href="https://github.com/sintech/Formanta_P432/tree/master/schematic" rel="nofollow">Diagramas esquem√°ticos el√©ctricos del "Formante P432".</a> </li><li><a name="lit6"></a>  <a href="http://www.muztech.com/manuals.php" rel="nofollow">Ajuste de la estabilidad de temperatura de Polyvox.</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/482292/">https://habr.com/ru/post/482292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../482282/index.html">El final de la era ARMv7 o un poco sobre portar juegos</a></li>
<li><a href="../482284/index.html">"50 tonos de marr√≥n" o "¬øC√≥mo llegamos a esto?"</a></li>
<li><a href="../482286/index.html">Revisi√≥n colectiva inesperada de cartuchos Audio-Technica</a></li>
<li><a href="../482288/index.html">Regalos para el oyente atento: qu√© ganchos de audio estaban ocultos en el "pre-gap" en el CD de audio</a></li>
<li><a href="../482290/index.html">Discord bot con econom√≠a con sqlite</a></li>
<li><a href="../482294/index.html">Noticias del mundo de OpenStreetMap No. 491 (10.12.2019-16.12.2019)</a></li>
<li><a href="../482296/index.html">Tutorial de Ember.js tutorial. Aplicaci√≥n Super Rentals. Parte 1.1</a></li>
<li><a href="../482298/index.html">Programador fan√°tico. ¬øC√≥mo mantener ventajas competitivas y hacerse visible?</a></li>
<li><a href="../482300/index.html">Explorando los registros de Java 14</a></li>
<li><a href="../482302/index.html">Neblina psicol√≥gica sobre el a√±o nuevo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>