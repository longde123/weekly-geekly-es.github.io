<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ¥Ô∏è üíø üìÑ Kuckucksuhr basierend auf Lego Mindstorms üòá ‚úä üó°Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor zweieinhalb Jahren kaufte ich das Lego Mindstorms EV3-Kit, um meine ersten Schritte in der Robotik zu unternehmen. Nachdem ich die ev3dev-Baugrupp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kuckucksuhr basierend auf Lego Mindstorms</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417255/">  Vor zweieinhalb Jahren kaufte ich das Lego Mindstorms EV3-Kit, um meine ersten Schritte in der Robotik zu unternehmen.  Nachdem ich die ev3dev-Baugruppe auf den Controller gerollt und genug mit der SSH-Motor- und Sensorsteuerung gespielt hatte, k√ºhlte ich mich f√ºr zwei Jahre f√ºr einen Kauf ab.  Der Grund war, dass ich nicht genug Fantasie hatte, um dies zu erm√∂glichen: Nach mehreren zusammengebauten Modellen von Lego Technics (sowohl verpackt als auch hausgemacht) war ich bereits an Wunder wie ferngesteuertes Spielzeug und einfache Roboter wie gew√∂hnt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Modelle von Lego,</a> die auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Krakauer Ausstellung</a> als Person vorgestellt wurden, die fr√ºher an einem Telemechanik-System gearbeitet hat, haben nicht mehr genug Inspiration inspiriert.  Ich wollte die Erfahrung eines anderen nicht wirklich wiederholen. <br><br>  Am Ende wurde mir klar: Eine Kuckucksuhr k√∂nnte ein Modell werden, das ziemlich komplex, interessant, praktisch und nicht zu abgedroschen ist.  Inspiriert von dieser Idee machte ich mich an die Arbeit. <br><a name="habracut"></a><br>  Nach meiner Idee sollte das Modell nicht nur ein Spielzeug, sondern ein voll funktionsf√§higes Ger√§t werden.  Dies war durchaus m√∂glich: Die Uhr h√§ngt an meiner Wand und zeigt die aktuelle Uhrzeit im 24/7-Modus an.  Ich habe mir nicht die Aufgabe gestellt, den Mechanismus des Originals in allen Details zu reproduzieren - zum Beispiel sind die Pfeile unabh√§ngig, der Ton wird √ºber den Lautsprecher des Controllers wiedergegeben und die Gewichte und das Pendel werden ausschlie√ülich f√ºr die Umgebung verwendet.  Nachdem ich daher alle Hauptarbeiten auf den Softwareteil √ºbertragen hatte, baute ich den Mechanismus in der einfachsten m√∂glichen Version zusammen.  Ich habe nicht den gesamten Montageprozess dokumentiert, daher kann ich das Modell nicht in derselben Form wieder zusammenbauen.  Die Grundprinzipien f√ºr das Pairing von Software und Mechanik sind jedoch so, dass das Programm mit minimalen √Ñnderungen an anderen Modellen arbeiten sollte, die nach einem √§hnlichen Prinzip zusammengestellt wurden. <br><br>  Uhren in verschiedenen Formen werden in dem Video pr√§sentiert, das ich auf Youtube gepostet habe: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rCxNfV3xOM0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Grundlegende Informationen zum Modell finden Sie im Video.  Im Folgenden werde ich Sie etwas detaillierter √ºber die Mechanik, die Software sowie √ºber die Probleme informieren, die bei der Montage und dem Betrieb dieses Entwurfs aufgetreten sind. <br><br><h2>  Die Mechanik </h2><br>  Die Montage des mechanischen Teils dauerte 6 Tage.  Nachdem ich in den Neujahrsferien die Lego-Boxen auf den Tisch gelegt hatte, baute ich einen Mechanismus zusammen, der sich von der endg√ºltigen Version nur in den T√ºren unterscheidet, hinter denen der Kuckuck lebt (mehr dazu weiter unten).  Ich habe keine besonderen Designf√§higkeiten, daher ist die Uhr eine rechteckige Box mit zwei Zeigern und einem Zifferblatt, das auf der Vorderseite mit Punkten markiert ist.  Im oberen Teil der Uhr befindet sich ein durch zwei T√ºren geschlossenes Fach, in dem sich der Kuckuck niedergelassen hat, und im unteren Teil befinden sich ein schematisches Pendel und zwei Gewichte.  Teile wurden aus mehreren Lego-Sets entnommen: einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lego Mindstorms EV3 (31313)</a> , zwei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Volvo-Gradern (42030)</a> , einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mercedes-LKW mit pneumatischem Ausleger (42043)</a> und einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LKW-Kran (42009)</a> .  Trotz der F√ºlle an Sets gab es f√ºr ein Modell dieser Gr√∂√üe kaum genug Details - das Uhrendeckel besteht aus Streifen unterschiedlicher Farben, die jedoch nicht ins Auge fallen, da es bei einer Wandmontage √ºber Augenh√∂he liegt. <br><br>  Als Minutenzeiger wird die Standard-Lego-Technik-Leiste f√ºr 15 Einheiten verwendet.  Es wird auf die Achse gelegt und fest mit dem Motor verbunden.  Somit stellte sich heraus, dass die Genauigkeit der Einstellung des Minutenzeigers ausreichend war, um die minutengenaue Zeit zu bestimmen.  Der Stundenzeiger ist k√ºrzer und auf einem Schwenkmechanismus montiert.  Es ist √ºber mehrere G√§nge mit dem Motor verbunden, so dass ein ziemlich merkliches Spiel auftritt - jedoch nicht so gro√ü, dass es Probleme bei der Zeitbestimmung gibt. <br><br>  Die H√§nde werden von zwei gro√üen Motoren (LM) angetrieben.  Zus√§tzlich funktioniert mit jedem der externen Zeiger ein anderer, der interne - f√ºr den Minutenzeiger ist er auf derselben Achse wie der erste fixiert, und f√ºr die Uhr ist der Drehmechanismus auf der Innenseite der Uhr dupliziert.  Der Zweck der inneren Pfeile besteht darin, die Taste (Ber√ºhrungssensor) zu dr√ºcken, w√§hrend die √§u√üeren Pfeile durch die obere Position gef√ºhrt werden.  Somit hat die Steuerung die M√∂glichkeit, die Position der Pfeile unmittelbar nach dem Einschalten zu bestimmen und ihre korrekte Position basierend auf der Systemzeit einzustellen, so dass der Benutzer die Pfeile nicht manuell eingeben muss. <br><br>  Gewichte haben eine rein dekorative Funktion.  Anfangs dachte ich daran, ein Gewicht zu machen, das sich langsam absenkt (wie bei einer normalen Uhr) und dann schnell in die obere Position zieht (analog zum manuellen Aufziehen einer Pendeluhr).  Ich habe diese Option sp√§ter aus mehreren Gr√ºnden abgelehnt.  Erstens hat der Schaltmechanismus zwischen dem Motor und dem Gewicht dem Modell zus√§tzliche Komplexit√§t verliehen (und der Antrieb des Pendels vom selben Motor hat ihn nur erh√∂ht).  Zweitens wird ein schneller Eyeliner, was auch immer man sagen mag, eine laute Operation sein, aber ich wollte, dass die Uhr so ‚Äã‚Äãleise wie m√∂glich arbeitet.  Drittens gibt es bei einer herk√∂mmlichen Kuckucksuhr normalerweise zwei Gewichte (eines liefert die Uhr, das zweite den Kuckuck), und die sofortige Platzierung von zwei Kippr√§dern f√ºr die Kette am unteren Ende der Uhr w√ºrde zu einer noch gr√∂√üeren Vergr√∂√üerung des Modells f√ºhren. <br><br>  Ausgehend davon ging ich einen einfacheren Weg: Ich installierte tats√§chlich zwei Gewichte auf der Uhr, platzierte sie jedoch auf einem gemeinsamen Stromkreis, der √ºber ein einzelnes Antriebsrad geworfen wurde.  In dieser Version bewegen sich die Gewichte immer in wetterfeindliche Richtungen und fallen abwechselnd ab.  Dieses Verhalten hat wenig mit echten Pendeluhren zu tun, sieht aber recht interessant aus. <br><br>  Die Kette besteht aus gew√∂hnlichen Verzierungen von drei Einheiten mit einer Kombination aus Achsen und Kolben: Ein Rutschkolben ist ein eher seltenes St√ºck, und ich habe die Achsen verwendet, um die L√§nge der resultierenden Kette zu verdoppeln.  Es war nicht so einfach, ein Rad herzustellen, das eine solche Kette ohne Schlupf und Pannen bewegt, aber am Ende war es m√∂glich. <br><br>  Was das Umschalten der Bewegungsrichtung von Gewichten angeht, war meine erste Idee, es rein mechanisch zu machen: Beim Anheben an die Bodenwand des Uhrengeh√§uses dr√ºckt die direkt √ºber dem Gewicht montierte breite Achse auf die Platte, durch die die Kette gef√ºhrt wird, und bewirkt, dass sich das Rad dreht.  Ich wollte das Schaltelement genauso verwenden wie zum Beispiel den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kran 42009</a> : Das schaltende Antriebsrad tritt entweder mit dem rechten oder dem linken Nachbarn in die Kupplung ein.  Diese Idee flog jedoch nicht: Die Druckplatte brachte das Gleitteil in die Mittelstellung, wenn es weder mit dem rechten noch mit dem linken Nachbarn in Eingriff stand, das Drehmoment nicht mehr auf das Rad traf und der Schalter in der Mittelstellung einfrierte. <br><br>  Um diese Situation zu korrigieren, habe ich beschlossen, dieser Schaltung ein bewegliches Dreieck hinzuzuf√ºgen, dessen zwei Seiten eine feste L√§nge haben und dessen dritte Seite durch ein federbelastetes Gleitteil dargestellt wird, das in der Aufh√§ngung desselben LKW-Krans verwendet wird.  Die Bedeutung dieser Konstruktion war, dass sich das Dreieck immer auf der Seite der Druckplatte befindet, die dem Hubgewicht entspricht: Wenn die Kettlebell die Oberseite erreicht, dr√ºckt die Platte auf das Dreieck, die Feder dr√ºckt zusammen, das Dreieck geht durch die Gleichgewichtsposition und ‚Äûkippt‚Äú dann auf die andere Seite und l√∂st sich Energie von einer Feder gespeichert.  Diese Energie sollte nach meinem Plan den Geschwindigkeitsschalter durch die Gleichgewichtsposition verschieben und ihn sofort in die entgegengesetzte Position verschieben. <br><br>  Ich konnte dieses System jedoch nicht stabilisieren.  An der Gr√∂√üe der Uhr kann man verstehen, dass Miniaturmechanismen nicht mein Ding sind, aber mit zunehmender Gr√∂√üe des Knotens f√ºhren die darin auftretenden Verzerrungen zu Reibung, die den gr√∂√üten Teil der Schaltenergie auffrisst.  Nachdem ich mit diesem Mechanismus gequ√§lt worden war, beschloss ich schlie√ülich, die gesamte Drecksarbeit auf den Mikrocontroller zu verlagern, indem ich anstelle komplexer Mechaniken einen Knopf √ºber den Drucktafeln (Ber√ºhrungssensor) installierte. <br><br>  Ein bisschen einfache Arithmetik.  Der EV3 verf√ºgt √ºber vier Eing√§nge und vier Ausg√§nge.  Zwei Eing√§nge und zwei Ausg√§nge waren bereits mit Tasten bzw. Pfeilmotoren belegt.  Das Hinzuf√ºgen eines Motors zum Drehen des Kettenrads und zweier Kn√∂pfe zu dieser Schaltung bedeutete, dass ich zum einen keine freien Anschl√ºsse zum Anschlie√üen des Kuckuckspositionssensors hatte (ich dachte, ich w√ºrde zu diesem Zweck einen optischen Abstandsmesser verwenden), und zum anderen Die √ºbrigen Knoten (Kuckuck und Pendel) haben nur einen Motor.  Ich dachte √ºber die Option nach, bei der beide Drucktafeln √ºber den Gewichten mit einem gemeinsamen Knopf verbunden w√ºrden, lehnte dies jedoch ab, da sich die Uhr zum Zeitpunkt des Einschaltens eines der Gewichte in der oberen Position befand und den Knopf gedr√ºckt hielt, nicht gen√ºgend Informationen zur Auswahl hatte Bewegungsrichtung der Kette. <br><br>  Da das Pendel leichter mit dem Kettenbewegungsmechanismus als mit dem Kuckuck zu verbinden war (sowohl in Bezug auf die Art der Bewegung als auch auf die Position), platzierte ich einen weiteren gro√üen Motor im unteren Teil des K√∂rpers, der zum einen das Pendel hin und her antreibt (1 Motorumdrehung) Dies f√ºhrt zu einem vollst√§ndigen Pendelschwung. Zweitens dreht sich durch ein Untersetzungsgetriebe das Rad, das die Kette antreibt.  Ein solches System hat den Nachteil, dass beim Umkehren der Bewegungsrichtung der Kette und dementsprechend der Drehung des Motors das Pendel auch die Bewegungsrichtung √§ndert, selbst wenn es sich in einer Zwischenposition befindet, die h√§sslich aussehen kann.  Das Umschalten der Bewegungsrichtung von Gewichten ist jedoch eine eher seltene Operation, daher habe ich dieses Problem vernachl√§ssigt.  Ein weiterer Nachteil meiner Baugruppe ist das ziemlich austauschbare Spiel im Pendelantrieb, weshalb das Pendel bei langsamer Bewegung f√ºr den Bruchteil einer Sekunde an einem niedrigeren Punkt stoppt, um ein wahrnehmbares Auge zu erhalten.  Ich war zu faul, um dieses Problem zu beheben. <br><br>  Apropos Pendelgeschwindigkeit.  Nachdem ich damit experimentiert hatte, w√§hlte ich einen Wert von 30 Grad des Motors pro Sekunde.  Dies bedeutet, dass das Pendel in 12 Sekunden vollst√§ndig schwingt.  Dies ist jedoch eine Menge, mit zunehmender Geschwindigkeit begann der Motor zu heulen, und die Aussicht, sein Lied kontinuierlich zu h√∂ren, l√§chelt mich √ºberhaupt nicht an.  Es war zu faul, durch den Mechanismus zu gehen und einen Overdrive einzuf√ºhren, also entschied ich mich f√ºr ein solches "Mond" -Format.  Die √úbersetzungsverh√§ltnisse zwischen Motor und Kettenantriebsrad sind so, dass das Gewicht in 40-50 Minuten von der unteren in die obere Position geht. <br><br>  Der EV3-Anschluss blieb nach allen vorherigen Manipulationen frei und belegte den mittleren Motor (mittlerer Motor), der den Kuckuck antreibt.  Der Kuckuck selbst besteht aus Teilen derselben Lego-Technik.  In der H√∂he erreicht der Vogel 11 Einheiten und wird auf eine einziehbare Stange gestellt (auf diesen wurden im oben genannten LKW-Kran Fernstopps platziert).  Ein Miniaturmechanismus f√ºhrt eine √úbertragung zwischen den Fl√ºgeln des Vogels und seinem Schwanz ein, durch die ich ein Kabel geworfen habe, das in der Uhr befestigt ist.  Die L√§nge des Kabels wird so gew√§hlt, dass der Kuckuck mit den Fl√ºgeln nach unten vollst√§ndig verl√§sst und sie erst ganz am Ende der Bewegung leicht auseinander spreizt.  Es stellte sich als atmosph√§risch heraus - gerade auf der Ebene der Mechanisierung einfacher Uhrenmodelle.  Das Fehlen eines Positionssensors wird durch die Tatsache kompensiert, dass der Antrieb des Kuckucks √ºber das Rutschgetriebe eingeschaltet wird - es hilft, den Motor nicht zu besch√§digen, selbst wenn versucht wird, den Kuckuck √ºber die Grenzpunkte hinaus zu bewegen.  Die T√ºren sind eng mit der Planke verbunden, auf der der Vogel befestigt ist, und √∂ffnen sich gleichzeitig mit dem Abgang des Kuckucks. <br><br>  Anfangs habe ich 11 mal 5 f√ºr 1 Einheitspaneele als T√ºren verwendet, aber dies stellte sich als schlechte Idee heraus: Ihre Kanten waren nicht abgerundet, und die T√ºren, die an benachbarten Teilen hafteten, waren oft blockiert und lie√üen den Kuckuck im Inneren.  Das Video zeigt die zweite Version der T√ºrbaugruppe - gew√∂hnliche Verkleidungen mit abgerundeten Kanten verursachen kein solches Problem.  Dar√ºber hinaus √∂ffnet und schlie√üt die ‚ÄûPlanken‚Äú -Version der T√ºr viel leiser. <br><br>  Die Uhr ist an einem an der Wand befestigten Armband befestigt.  Die gesamte Struktur wiegt mehr als ein Kilogramm. <br><br>  Damit endet im Prinzip die Beschreibung des mechanischen Teils.  Es bleibt nur zu erw√§hnen, dass das Modell zu 100% aus Lego Mindstorms und Lego Technics zusammengesetzt ist. Der einzige Teil, der f√ºr diese Sets nicht gilt, ist das Netzkabel, das ich an meinen EV3 gel√∂tet habe, damit ich die Batterien nicht st√§ndig wechseln musste.  Dieses Kabel f√ºhrt zu dem in die Steckdose eingesteckten Netzteil. <br><br><h2>  Das Programm </h2><br>  Die ev3dev-Assembly bietet Ordner f√ºr viele Programmiersprachen.  Um keine Schwierigkeiten mit der Assembly zu haben, habe ich mich auf ein Python-Skript beschr√§nkt.  Dieses Skript ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im GitLab-Repository</a> verf√ºgbar.  Im Folgenden werde ich kurz auf seine Funktionalit√§t eingehen. <br><br>  Der Code, mit dem die Pfeile bewegt werden, ist relativ einfach: Er berechnet die Minuten und Stunden in die Rotationsgrade der Motoren neu, indem Daten √ºber die Gradzahl des Motors pro Umdrehung des Pfeils und die anf√§ngliche Verschiebung des Pfeils von der vertikalen Position verwendet werden.  Der ganze Spa√ü beginnt, wenn das Programm versucht, diese Daten zu erhalten. <br><br>  Wie ich bereits sagte, wurde beschlossen, die manuelle Verbindung des Sch√ºtzen aufzugeben.  Stattdessen f√ºhrt die Uhr beim Start eine Kalibrierung durch, indem Geometrieparameter bestimmt werden.  Die Kalibrierung wird f√ºr beide H√§nde unabh√§ngig voneinander durchgef√ºhrt. <br><br>  Der Kalibrierungsalgorithmus ist wie folgt.  Zuerst beginnt der Motor mit einer relativ hohen Geschwindigkeit zu drehen (ich verwende einen empirischen Wert von 180 Grad pro Sekunde), bis ein Best√§tigungssignal von der Taste kommt, die die obere Position des Pfeils festlegt.  Danach setzt der Motor die Drehzahl auf 30 Grad pro Sekunde zur√ºck und dreht den Pfeil weiter im Uhrzeigersinn (die Drehrichtung des Motors ist im Programm eingen√§ht), bis er um 70 Grad vom Punkt der letzten Knopf√∂ffnung getrennt ist.  Danach geht der Pfeil in entgegengesetzter Richtung durch die obere Position und fixiert den ersten Verschluss und die letzte √ñffnung der Kontakte (der Knopf kann in den Kantenpositionen klappern).  Wenn Sie sich um die gleichen 70 Grad von der letzten √ñffnung entfernen, √§ndert der Pfeil erneut die Bewegungsrichtung zur Geraden, und der Vorgang zum Registrieren des ersten und des letzten Schaltkreises wird wiederholt. <br><br>  Es wird angenommen, dass die obere Position des Pfeils dem arithmetischen Mittel zwischen den vier so erhaltenen Werten entspricht.  Die Praxis zeigt, dass diese Ann√§herung recht gut ist - die Abweichung der Zielposition des Minutenzeigers vom tats√§chlichen Wert betr√§gt selten mehr als einen Schritt und √ºberschreitet fast nie zwei Schritte.  (Das Video zeigt gr√∂√üere Abweichungen aufgrund der Tatsache, dass ich zum Zwecke der Aufnahme die Systemzeit verschoben habe und die Zeiger sich schneller als w√§hrend des normalen Betriebs bewegten, wodurch der Korrekturfehler bei jeder Umdrehung erh√∂ht wurde (siehe unten).) Bei Spielen im Uhrzeigersinn verschlingt das Spiel die Genauigkeit. aber der Algorithmus verwendet nat√ºrlich den gleichen. <br><br>  Nach der Berechnung der oberen Position des Pfeils und der Differenz zwischen dem ersten Einschalten des Sensors und der oberen Position des Pfeils (dieser Wert wird zur Korrektur ben√∂tigt, siehe unten) erh√∂ht der Kalibrierungsalgorithmus die Motordrehzahl erneut auf 180 Grad pro Sekunde und wiederholt die Suche nach der oberen Position.  Die Differenz zwischen zwei aufeinanderfolgenden oberen Positionen bestimmt die L√§nge einer vollen Pfeilumdrehung in Rotationseinheiten des Motors.  Der Suchvorgang f√ºr die oberste Position wird f√ºnfmal wiederholt, wodurch wir die erhaltenen Werte mitteln und die Genauigkeit leicht erh√∂hen k√∂nnen. <br><br>  Nach Abschluss der Kalibrierung wechseln die Zeiger in den aktuellen Zeitanzeigemodus.  Dar√ºber hinaus legt der Algorithmus auf jedem Pfeilkreis die Position fest, an der der Leistungsschalter zuerst geschlossen hat.  Die Differenz zwischen dem tats√§chlichen und dem erwarteten Drehwinkel des Motors zu diesem Zeitpunkt ist der Betrag der Korrektur;  Selbst wenn die volle Kreisl√§nge in der Kalibrierungsphase nicht korrekt berechnet wurde (die Debug-Ausgabe zeigt, dass die Abweichung selten 1 Grad √ºberschreitet), kann sich der Pfeil bei der Korrektur auf jedem Kreis aufgrund der Anh√§ufung von Fehlern nicht verschieben. <br><br>  Bitte beachten Sie, dass die einzige Information √ºber das Verh√§ltnis von Motor und Pfeil, die explizit in das Programm eingen√§ht ist, die Drehrichtung des Motors (vorw√§rts oder r√ºckw√§rts) ist, die der Vorw√§rtsbewegung des Pfeils entspricht.  Dank Positionssensoren entfallen Daten zum √úbersetzungsverh√§ltnis und zur Ausgangsposition des Pfeils.  Wenn Sie also eine Uhr sammeln, f√ºr die neben Stunde und Minute auch ein Sekundenzeiger angezeigt wird, k√∂nnen Sie diese mithilfe des Algorithmus verwenden, indem Sie nur wenige Zeilen hinzuf√ºgen, ohne Zeit mit dem Z√§hlen der Z√§hne zu verschwenden. <br><br>  Was im Pfeilbewegungsprogramm fehlt, ist der Schutz vor √úberlauf oder Genauigkeitsverlust.  Ich habe die Frage, was fr√ºher passieren wird, nicht untersucht: Die Bittiefe des Drehwinkels des Motors l√§uft √ºber, oder die Pfeile beginnen sich ruckartig zu bewegen, da die Genauigkeit in den h√∂heren Ziffern der Gleitkommazahl abweicht.  Die Praxis zeigt jedoch, dass in Zeiten in der Gr√∂√üenordnung von mehreren Wochen nichts dergleichen passiert.  Wenn ich jemals auf dieses Problem sto√üe, f√ºge ich h√∂chstwahrscheinlich in jeder Runde einen Befehl zum Zur√ºcksetzen des Motors hinzu, mit entsprechender Korrektur der Winkel im Programm. <br><br>  Wenn die Hand-Klasse in meinem Programm f√ºr die Bewegung der Pfeile verantwortlich ist, leuchtet die LedIndication-Klasse auf und schaltet die LEDs an der EV3-Frontplatte aus.  Ich wei√ü, dass der gleiche Effekt mit einem Team erzielt werden kann, aber urspr√ºnglich wurde diese Funktion entwickelt, um Programmabst√ºrze zu verfolgen, und dann blieb sie bestehen.  In dieser Klasse gibt es nichts Interessanteres. <br><br>  Die Pendelklasse ist f√ºr die Bewegung von Gewichten und einem Pendel verantwortlich.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Algorithmus startet den Motor einfach in eine Richtung und dreht ihn mit einer konstanten Geschwindigkeit, bis der Knopf, der dem vollst√§ndigen Anheben dieses Gewichts entspricht, festgeklemmt ist. </font><font style="vertical-align: inherit;">Danach wird die Bewegungsrichtung des Motors umgekehrt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In dieser Klasse wird √ºbrigens ein Schutz vor Programmabst√ºrzen angeboten, der darin besteht, dass sich die Engine nur 2 Sekunden lang mit einer Befehlsaktualisierungsdauer von 1 Sekunde einschaltet. </font><font style="vertical-align: inherit;">Wenn ich den Motor im Konstantdrehmodus einschalten w√ºrde, w√ºrde sich das Ausruhen auf der Taste beim Absturz des Programms weiter nach oben bewegen, was zu einer √úberlastung des Motors, einem Durchrutschen der G√§nge oder sogar zu einer Besch√§digung des Mechanismus f√ºhren k√∂nnte. </font><font style="vertical-align: inherit;">Mit dem Schutz k√∂nnen Sie dieses Problem verhindern.</font></font><br><br> ,  Cuckoo    ,    59     0 .     ,    ,     EV3,       .      ,    ‚Äî  1  12 .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  FreeSound</a>   ,     EV3. (  ,     ,          .) <br><br>              ,       ,     .  , ,  ev3dev   : -     ,         SSH-.      .   ,     ,        (  ev3dev      apt get upgrade, , ,     ),      ,        . <br><br>   , ,         ,        :          ,   ¬´¬ª,   ¬´¬ª     .     ,               . <br><br>     ,      .     . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Drehzahl des Motors, der den Kuckuck antreibt, und der Drehwinkel sind im Programm festgelegt. Zu Beginn des Programms wird der Kuckuck in das Geh√§use gezogen. Unter Ber√ºcksichtigung des auf der Motorachse installierten Schlupfgetriebes ist dieser Vorgang sicher, hat jedoch Auswirkungen, wenn sich der Kuckuck zum Zeitpunkt des Starts der Uhr au√üerhalb des Geh√§uses befand. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den Schlaf nicht zu beeintr√§chtigen, kuckt der Kuckuck nur tags√ºber. Ihr Arbeitstag beginnt um zehn Uhr morgens und das letzte Mal, dass sie spricht, ist Mitternacht. Ich habe den Kuckuck auch zu einem Zeitpunkt ausgeschaltet, an dem ich w√∂chentlich √ºber Skype telefoniere, um mich nicht einzumischen.</font></font><br><br>          Debian.  ,   ,      .     ‚Äî   EV3  WiFi-.  ,   ,  ,  , ,       . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>    BSD.            ,    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417255/">https://habr.com/ru/post/de417255/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417243/index.html">Installieren Sie den 3CX SBC Session Edge Controller unter Windows, Raspberry Pi oder Debian 9</a></li>
<li><a href="../de417245/index.html">Erlang f√ºr IoT</a></li>
<li><a href="../de417247/index.html">VSCE # 1: Podcast f√ºr Medienunternehmer</a></li>
<li><a href="../de417249/index.html">US-Pr√ºfungskammer warnt: SpaceX und Boeing warten auf neue Versp√§tungen, US-Unterbrechungen bei Fl√ºgen zur ISS sind m√∂glich</a></li>
<li><a href="../de417251/index.html">Verwenden des Fischauges auf Raspberry Pi 3 mit ROS - Teil 1</a></li>
<li><a href="../de417257/index.html">C-Zeiger als sprachliches Paradoxon</a></li>
<li><a href="../de417261/index.html">Uber entschied sich nach einem Unfall mit seinem Roboterauto, das Personal der Betreiber intelligenter Maschinen in Pittsburgh zu reduzieren</a></li>
<li><a href="../de417265/index.html">Top 10: die besten Berichte von DotNext 2017 Moskau</a></li>
<li><a href="../de417269/index.html">Wohin f√ºr einen Designer: renommierte internationale Auszeichnungen</a></li>
<li><a href="../de417271/index.html">Kann ein Hacker den √Ñrmelkanal blockieren?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>