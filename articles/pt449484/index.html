<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóùÔ∏è üóª üçà Criamos um sensor de controle de qualidade do ar no InfluxDB, Grafana, Docker e Raspberry Pi üëå üëåüèº üë©‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J√° pensou em monitorar a qualidade do ar dentro ou fora de sua casa: onde voc√™ mora e trabalha? Este projeto, batizado de balenaSense , √© uma unidade ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criamos um sensor de controle de qualidade do ar no InfluxDB, Grafana, Docker e Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449484/">  J√° pensou em monitorar a qualidade do ar dentro ou fora de sua casa: onde voc√™ mora e trabalha?  Este projeto, batizado de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaSense</a> , √© uma unidade para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">medir</a> temperatura, umidade, press√£o barom√©trica e qualidade do ar, al√©m de um painel que voc√™ pode acessar de qualquer lugar para ver estat√≠sticas resumidas e acompanhar tend√™ncias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ad/95d/d7a/9ad95dd7a878fefb4e5ea05732dba925.png"><br><a name="habracut"></a><br><h1>  Conte√∫do </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1. Introdu√ß√£o</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Equipamento necess√°rio</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">De software</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Montagem de equipamentos</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configurar Raspberry Pi</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Implanta√ß√£o de software</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ver painel</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como isso funciona?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que vem a seguir?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√öltimos pensamentos</a> </li></ul><br><a name="1"></a><h1>  1. Introdu√ß√£o </h1><br>  Para controlar a qualidade do ar e da esta√ß√£o meteorol√≥gica, s√£o necess√°rios muitos fios e v√°rios sensores, mas a situa√ß√£o ficou mais f√°cil ap√≥s o aparecimento de sensores que combinam todas as leituras em uma boa prancha pequena, o que √© f√°cil de come√ßar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/462/14c/ff9/46214cff9e49ae84360e58fb5ebb4a4e.jpg"><br><br>  Considere monitorar a temperatura, a umidade, a press√£o barom√©trica e a qualidade do ar usando um sensor all-in-one que se conecta diretamente ao Raspberry Pi sem componentes adicionais.  Voc√™ n√£o precisa ter nenhuma experi√™ncia em eletr√¥nica, mas um ferro de solda seria bem-vindo (embora tamb√©m seja opcional).  Este projeto implementa um banco de dados para armazenar leituras hist√≥ricas, juntamente com uma interface gr√°fica para visualizar as leituras atuais e ver imediatamente as tend√™ncias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d0/63e/8b2/7d063e8b2d6111ed55553a3b3e3c0a47.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce0/600/884/ce06008843e25c57e8b0979bce73b6b6.png"><br><br><a name="2"></a><h1>  Equipamento necess√°rio </h1><br>  Aqui est√° o que voc√™ precisa comprar para este projeto.  Dependendo se voc√™ deseja usar um ferro de soldar ou n√£o, escolhemos uma placa sensora: alguns funcionam imediatamente, outros requerem um pouco de solda. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/005/300/15d/00530015dce4ec449e0477a8d7bc6d14.jpg"><br><br><h3>  Eu n√£o quero soldar </h3><br>  Se voc√™ n√£o deseja soldar, precisar√° de: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Raspberry Pi Zero WH</a> (2Bv1.2 / 3B / 3B + / 3A + tamb√©m se encaixam) <br></li><li>  Cart√£o Micro-SD de 8 GB (ou mais), recomendamos os cart√µes Sandisk Extreme Pro SD <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte de alimenta√ß√£o e cabo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sensor de placa de transi√ß√£o Pimoroni BME680</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pimoroni Breakout Garden pHAT</a> </li></ul><br><h3>  Eu quero soldar - me d√™! </h3><br>  Se voc√™ estiver feliz em pegar um ferro de soldar, precisar√° de: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Raspberry Pi Zero W</a> (2Bv1.2 / 3B / 3B + / 3A + tamb√©m se encaixam) <br></li><li>  Cart√£o Micro-SD de 8 GB (ou mais), recomendamos os cart√µes Sandisk Extreme Pro SD <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte de alimenta√ß√£o e cabo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sensor Bosch BME680 com riser</a> (ver alternativas abaixo) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cabo de conex√£o</a> </li></ul><br><h3>  Outros sensores </h3><br>  Se voc√™ j√° possui algum tipo de sensor, este projeto oferece suporte ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sense HAT</a> com um b√¥nus adicional: um smiley na matriz de LEDs (dependendo da qualidade do ar, √© claro)! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ede/763/1ad/ede7631adecd352c97c0675c3adcde95.png"><br><br>  O Bosch BME680 com riser pode ser adquirido de diferentes fornecedores a pre√ßos diferentes. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pimoroni BME680</a> ¬£ 18,50 (pode haver uma vers√£o sem soldar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seu pHAT</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adafruit BME680</a> EUA $ 22.50 <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sparkfun SparkX BME680</a> US $ 19,95 (pode haver uma vers√£o sem soldar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seu pHAT</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Nameless BME680</a> US $ 9,92 </li></ul><br>  <b>Nota</b>  No artigo, usamos o Pimoroni: esta placa possui a vantagem adicional de que os contatos s√£o quebrados na ordem correta para o Raspberry Pi GPIO.  Ao usar outras placas, verifique se os pinos de alimenta√ß√£o, terra e I2C do barramento (SDA e SCL) correspondem, conforme explicado mais adiante neste manual. <br><br><a name="3"></a><h1>  De software </h1><br>  Abrimos o projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balena-sense</a> no GitHub, que cont√©m todo o software, configura√ß√£o e c√≥digo que voc√™ precisa para um sistema em funcionamento.  Vamos implantar este projeto em uma conta gratuita do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaCloud</a> para distribuir todo o software para o Raspberry Pi, al√©m de fornecer acesso remoto.  Portanto, voc√™ precisar√° de: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ferramenta de grava√ß√£o de</a> cart√£o SD como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balena</a> <br></li><li>  Conta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaCloud</a> gr√°tis <br></li><li>  Clone ou fa√ßa o download do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nosso projeto no GitHub</a> </li></ul><br><a name="4"></a><h1>  Montagem de equipamentos </h1><br>  H√° pouco trabalho na frente de hardware deste projeto.  Nosso objetivo √© conectar a placa do sensor ao pino GPIO no Raspberry Pi. <br><br>  O BME680 se comunica com o Raspberry Pi por um barramento chamado I2C (que √© o quadrado do olho), que √© um barramento serial de dois fios.  Esses dois fios s√£o chamados de linha de sincroniza√ß√£o (SCK) e linha de dados (SDA).  Al√©m dos dois fios, √© necess√°rio fornecer energia ao sensor (3,3V ou 3V3) e aterr√°-lo. <br><br>  Se voc√™ escolheu a op√ß√£o sem soldar da Pimoroni ou Sparkfun ou usando o Sense HAT, basta conectar os novos componentes brilhantes ao Raspberry Pi e todas as conex√µes ser√£o feitas para voc√™: prossiga para a pr√≥xima etapa! <br><br>  Se voc√™ decidir conectar o sensor diretamente ao Raspberry Pi usando Pimoroni ou outro riser, o principal √© garantir a conex√£o correta dos contatos descritos acima (SDA, SCK, 3V3 e GND). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/55f/165/c76/55f165c76f33633d3539393b1472d2f5.png"></div><br><br>  Um site √∫til para trabalhar com o GPIO no Raspberry Pi √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pinout.xyz</a> ;  mostra claramente que precisamos dos pinos 1 (pot√™ncia 3V3), 3 (SDA), 5 (SCL) e 9 (terra).  Um GPIO de 40 pinos √© padr√£o no Pi 2 e posterior.  Se voc√™ usa uma placa Pimoroni, os contatos est√£o na ordem correta para conectar as placas.  Observe como a inscri√ß√£o no quadro corresponde ao diagrama de pinagem acima. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebb/832/900/ebb832900d72244bfc6038de82e9164a.jpg"><br><br>  Mas se voc√™ conectar o sensor dessa maneira, o calor do processador Raspberry Pi afetar√° as leituras.  Para coletar leituras mais precisas, √© necess√°rio remover o sensor da placa: fa√ßa-o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com os cabos DuPont de</a> m√£e para m√£e (ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jumper Jerky</a> ), conforme mostrado abaixo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b6/5c1/45a/4b65c145a0bd694d5ca9e266d5771d1b.jpg"><br><br>  Da mesma forma, se voc√™ usar outro sensor, onde os diagramas de pinagem n√£o coincidem exatamente, poder√° conectar essas placas ao Pi usando o mesmo m√©todo.  O principal √© garantir a conformidade com 3V3, SDA, SCL e GND.  Se a placa tiver contatos para SDI, SDO, CS - voc√™ poder√° ignor√°-los, porque eles s√£o usados ‚Äã‚Äãpara uma interface SPI alternativa, que n√£o usamos neste projeto. <br><br>  Nas fotos acima, temos o Raspberry Pi 3A +, mas o Pi Zero tamb√©m √© adequado como uma solu√ß√£o mais barata. <br><br><a name="5"></a><h1>  Configurar Raspberry Pi </h1><br>  Vamos fazer o flash do cart√£o SD com o sistema operacional balenaOS, conectar-se √† nuvem balenaCloud, adicionar nosso dispositivo e configurar o projeto para que ele possa ser facilmente atualizado mais tarde. <br><br>  Primeiro, voc√™ precisa configurar uma conta balenaCloud.  Isso significa registrar, adicionar um aplicativo e adicionar um dispositivo. <br><br><h3>  Etapa 1. Inscreva-se no balenaCloud </h3><br>  Se voc√™ j√° possui uma conta do GitHub ou do Google, pode us√°-lo para efetuar login sem passar pelo processo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">registro</a> . <br><br><h3>  Etapa 2. Criando o Aplicativo </h3><br>  Adicione o aplicativo selecionando o tipo de dispositivo correto e <code>Starter</code> como o tipo de aplicativo e clique em <code>Create New Application</code> .  Este tipo suporta todos os microsservi√ßos e √© gratuito at√© dez dispositivos. <br><br>  Em seguida, voc√™ ser√° levado ao painel do aplicativo rec√©m-criado, onde poder√° ir para a pr√≥xima etapa e adicionar o dispositivo.  Voc√™ pode atribuir um nome arbitr√°rio ao aplicativo, mas ser√° necess√°rio mais tarde neste manual quando escrevermos o c√≥digo. <br><br><h3>  Etapa 3. Adicione o dispositivo e inicialize o sistema operacional </h3><br>  Ap√≥s criar o aplicativo, voc√™ pode adicionar um dispositivo a ele clicando no bot√£o verde <i>Adicionar dispositivo</i> .  Ao adicionar um dispositivo, especifique o tipo de dispositivo correto.  Se voc√™ estiver se conectando a uma rede sem fio, poder√° definir seu WiFI SSID e senha. <br><br>  <b>Nota:</b> Raspberry Pi 3 √© indicado na anima√ß√£o, n√£o se esque√ßa de selecionar o tipo correto de seu dispositivo! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e74/09c/595/e7409c595001458580b80e39809973a6.gif"><br><br>  Esse processo cria uma imagem personalizada para o aplicativo e o tipo de dispositivo, que inclui configura√ß√µes de rede, se especificado. <br><br>  <b>Nota:</b> para iniciantes, √© melhor escolher uma imagem de desenvolvimento para realizar alguns testes e solucionar problemas.  Para mais informa√ß√µes sobre as diferen√ßas entre imagens de desenvolvimento e produ√ß√£o, consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Se voc√™ tem certeza de que pode come√ßar a implantar uma imagem de produ√ß√£o agora - por favor. <br><br><h3>  Etapa 4. Grave o cart√£o SD e o dispositivo de inicializa√ß√£o </h3><br>  Quando a imagem do sistema operacional √© carregada, √© hora de piscar o cart√£o SD.  Voc√™ pode usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaEtcher</a> para isso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a57/b06/e30/a57b06e30b246d399ee8f8ef47c3b03f.gif"><br><br>  Ap√≥s a conclus√£o do processo, insira o cart√£o SD no Raspberry Pi e conecte a fonte de alimenta√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/845/649/28f/84564928f5f8fc0e7907089bc0818870.gif"><br><br>  Quando o dispositivo inicializa pela primeira vez, ele se conecta ao painel balenaCloud, ap√≥s o qual voc√™ pode v√™-lo na lista on-line e seguir para a pr√≥xima etapa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/740/785/d6c/740785d6c8aef63170470b81139a1a7b.png"><br><br>  <b>Solu√ß√£o de problemas: o</b> dispositivo deve aparecer no painel em alguns minutos.  Se n√£o aparecer, algo deu errado.  A documenta√ß√£o possui um extenso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guia de solu√ß√£o de problemas</a> com muitas informa√ß√µes sobre por que isso pode acontecer.  Se a documenta√ß√£o n√£o ajudou, entre em contato com os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">f√≥runs</a> . <br><br><a name="6"></a><h1>  Implanta√ß√£o de software </h1><br>  Quando o seu Raspberry Pi estiver preparado, baixado e conectado ao balenaCloud, voc√™ estar√° pronto para instalar o c√≥digo do aplicativo no dispositivo. <br><br><h4>  Instale as ferramentas da CLI balena em uma esta√ß√£o de trabalho </h4><br>  O BalenaCloud permite transferir remotamente o software / c√≥digo do aplicativo para o Raspberry Pi e outros dispositivos.  Para tornar isso poss√≠vel, sua esta√ß√£o de trabalho (n√£o o Raspberry Pi) deve atender a alguns requisitos m√≠nimos de software.  <b>Nota:</b> Para implantar com sucesso este projeto, voc√™ n√£o precisa executar nenhum comando no pr√≥prio dispositivo, por meio do SSH ou do painel balenaCloud.  Tudo √© feito remotamente! <br><br>  Se voc√™ j√° possui (ou pode configurar) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm</a> no seu computador, essa √© a maneira mais r√°pida de executar as ferramentas da CLI.  Tamb√©m existem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bin√°rios para Windows, macOS e Linux</a> .  <b>Nota:</b> se voc√™ j√° instalou essas ferramentas para nossos outros projetos, poder√° pular esta parte e ir diretamente para a pr√≥xima etapa. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A documenta√ß√£o para as ferramentas da CLI</a> descreve a instala√ß√£o e configura√ß√£o do pacote npm, al√©m dos bin√°rios. <br><br>  Quando a CLI est√° instalada e em execu√ß√£o, a primeira etapa √© efetuar login no balenaCloud executando o comando <code>balena login</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebe/2dd/a9e/ebe2dda9e415ee46f57ec346b89e0360.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8e/7ef/cda/c8e7efcda08bb42ef11aadfb231d5706.png"><br><br>  Quando houver uma CLI em funcionamento registrada na conta, voc√™ estar√° pronto para instalar programas no Raspberry Pi. <br><br><h4>  Baixando um projeto no GitHub </h4><br>  O pr√≥ximo passo √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixar o c√≥digo para este projeto no GitHub</a> . <br><br>  O bot√£o azul carregar√° o arquivo zip do projeto, mas se voc√™ j√° estiver familiarizado com o Git, poder√° usar o <code>git clone</code> maneira usual. <br><br><h4>  Instale no Raspberry Pi </h4><br>  Como a CLI e o c√≥digo mais recente est√£o instalados, voc√™ pode executar esse c√≥digo no balenaCloud com um comando.  L√°, a imagem do Docker √© coletada e configurada, que ser√° executada no seu dispositivo. <br><br>  No diret√≥rio do projeto ap√≥s descompact√°-lo, execute o <code>balena push &lt;appName&gt;</code> , em que appName √© o nome do aplicativo especificado no in√≠cio do manual.  Por exemplo, <code>balena push balenaSense</code> . <br><br>  Se tudo for feito corretamente, ap√≥s alguns minutos, a tela de informa√ß√µes do seu dispositivo no painel de controle dever√° mostrar os servi√ßos em execu√ß√£o, um para cada componente do software, algo como isto: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/452/08c/652/45208c6529a5735789917e8ca2783b8b.png"><br><br>  Na primeira vez que o download pode demorar alguns minutos (dependendo da velocidade da sua conex√£o com a Internet), mas somente as altera√ß√µes no cont√™iner s√£o baixadas, para que tudo aconte√ßa muito mais r√°pido. <br><br>  <b>Nota:</b> quando o aplicativo √© iniciado pela primeira vez (e voc√™ usa o BME680, n√£o o Sense HAT), o sensor executa um 'burn-in' por cerca de cinco minutos.  Durante esse per√≠odo, as leituras <i>n√£o ser√£o</i> feitas e inseridas no banco de dados.  O aplicativo registrar√° a contagem regressiva, exibida no painel balenaCloud: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/607/cd8/809/607cd8809b0176d8cb5888f9ae766fc3.png"><br><br>  Quando a contagem chegar a zero, voc√™ ver√° a mensagem 'Loop inicial ...'.  Depois disso, as leituras ser√£o realizadas e inseridas no banco de dados a cada 10 segundos. <br><br><a name="7"></a><h1>  Ver painel </h1><br>  Espero que voc√™ tenha atualizado o dispositivo, conectado √† rede e iniciado sem problemas.  Um dos grandes benef√≠cios do uso de uma conta balenaCloud gratuita √© o recurso de <code>Public Device URL</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75e/0be/d3f/75e0bed3f3dccd7b2d43baa9a84b8134.png"><br><br>  Ative essa op√ß√£o e clique no √≠cone de seta azul para acessar o painel.  Voc√™ pode compartilhar este link ou adicion√°-lo aos favoritos no seu telefone ou outro dispositivo.  Enquanto o dispositivo balenaSense est√° conectado e funcionando, voc√™ pode ver o painel de qualquer lugar! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce0/600/884/ce06008843e25c57e8b0979bce73b6b6.png"><br><br>  Se voc√™ n√£o deseja ativar o acesso p√∫blico, ainda pode visualizar o painel da sua rede local por endere√ßo IP, como pode ser visto na captura de tela acima.  O seu ser√° diferente, mas basta digitar <code>http://&lt;ip-&gt;</code> no navegador e voc√™ ainda ter√° acesso ao painel se estiver na mesma rede que o dispositivo.  Por exemplo, para acessar meu dispositivo, <code>http://10.1.231.36</code> . <br><br>  Se voc√™ deseja fazer login no Grafana e brincar com as configura√ß√µes, as credenciais padr√£o s√£o <code>admin</code> e <code>admin</code> . <br><br><a name="8"></a><h1>  Como isso funciona? </h1><br>  Este projeto possui tr√™s componentes principais, tr√™s servi√ßos.  Esses nomes est√£o no painel balenaCloud: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">InfluxDB</a> - um banco de dados usado para armazenar leituras de sensores <br></li><li>  Sensor - biblioteca e c√≥digo Python para acessar o sensor, fazer leituras e salv√°-las no banco de dados <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grafana</a> - usado para criar um painel com gr√°ficos e relat√≥rios </li></ul><br>  O sensor BME680 da Bosch detecta temperatura, umidade, press√£o e resist√™ncia a gases.  Os sensores de temperatura, umidade e press√£o funcionam imediatamente, mas as leituras de resist√™ncia de g√°s por si s√≥ n√£o s√£o muito √∫teis.  Estes s√£o indicadores de mudan√ßas na composi√ß√£o do ar.  Quando o sensor inicia, ele define a base e monitora as altera√ß√µes.  Os indicadores indicativos da qualidade do ar s√£o dados em porcentagem e levam em considera√ß√£o a influ√™ncia da umidade e da resist√™ncia do g√°s. <br><br>  Se voc√™ usar o Sense HAT, onde n√£o h√° sensor de resist√™ncia ao g√°s, aproximamos as leituras da qualidade do ar com base nos valores de temperatura e umidade desejados. <br><br><a name="9"></a><h1>  O que vem a seguir? </h1><br>  Espero que agora voc√™ tenha lan√ßado completamente o projeto, tenha acesso ao painel, tenha leituras e tenha come√ßado a preencher seu banco de dados.  Mencione algumas coisas mais importantes. <br><br><h3>  Alterar senha </h3><br>  Se voc√™ abrir o dispositivo para acesso p√∫blico, √© recomend√°vel alterar a senha do Grafana. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f5/bb8/75e/3f5bb875e74b17bf2eff4447f1245212.png"><br><br>  Configuramos o sistema com o nome de usu√°rio e a senha padr√£o <code>admin</code> <code>admin</code> .  Para alter√°-los, fa√ßa login no Grafana usando o bot√£o no canto inferior esquerdo do painel.  Voc√™ ser√° solicitado a alterar a senha na primeira vez que efetuar login. <br><br><h3>  Personaliza√ß√£o </h3><br>  O programa Grafana para o painel e os relat√≥rios possui muitos par√¢metros de configura√ß√£o.  Criamos um painel b√°sico que mostra um gr√°fico e gr√°fico para cada uma das quatro op√ß√µes de medi√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ca/cab/417/9cacab417c06bb7568701a26bfa5f2b2.png"><br><br>  Voc√™ pode personalizar cada painel do Grafana passando o mouse sobre o t√≠tulo e passando para a edi√ß√£o.  Eu recomendo brincar com as configura√ß√µes - as altera√ß√µes no painel n√£o s√£o salvas automaticamente; portanto, se voc√™ cometer um erro, basta recarregar a p√°gina e tudo voltar√° √† sua forma original.  Se voc√™ deseja salvar as altera√ß√µes, clique em <i>Salvar</i> na parte superior do painel de controle e todas as configura√ß√µes ser√£o salvas no seu dispositivo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5b/036/336/b5b03633659cfdf57133ba45f598f94c.png"><br><br>  Voc√™ tamb√©m pode configurar os sensores.  Por exemplo, no diagrama do man√¥metro, configuramos v√°rios intervalos b√°sicos e valores de texto em vez de n√∫meros.  Tudo isso muda ao seu gosto! <br><br><h3>  Habita√ß√£o </h3><br>  Esses sensores s√£o ideais para serem colocados em uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cabine meteorol√≥gica</a> , que protege os sensores da luz solar e do calor irradiado.  Se voc√™ controla o ambiente na sala, isso n√£o √© t√£o importante, mas se o sensor estiver instalado ao ar livre, seu posicionamento e prote√ß√£o s√£o importantes para obter leituras precisas. <br><br>  Cabines de previs√£o do tempo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">est√£o √† venda</a> , mas podem ser bastante caras, portanto, considere as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">op√ß√µes de bricolage</a> . <br><br>  O Thingiverse possui v√°rios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">edif√≠cios</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cabines clim√°ticas do</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BME680</a> . <br><br><a name="10"></a><h1>  √öltimos pensamentos </h1><br>  Obrigado pela leitura!  Se voc√™ decidir construir sua pr√≥pria esta√ß√£o meteorol√≥gica com controle de qualidade do ar - conte-nos como tudo correu, que problemas surgiram.  Id√©ias para o desenvolvimento do nosso projeto podem ser expressas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nos f√≥runs</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt449484/">https://habr.com/ru/post/pt449484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt449468/index.html">Como o "truque √©tico" do fabricante do software de jogos de azar se transformou em um pesadelo completo</a></li>
<li><a href="../pt449472/index.html">Dias sombrios do cataclismo adiante, an√°lise est√°tica e bagels</a></li>
<li><a href="../pt449476/index.html">Um novo tipo de armazenamento SSD reduzir√° o consumo de energia no data center - como funciona</a></li>
<li><a href="../pt449478/index.html">Adicionando UICollectionViews a um UITableViewCell personalizado, feito atrav√©s do Xib</a></li>
<li><a href="../pt449480/index.html">Escolha o rastreamento de bug apropriado</a></li>
<li><a href="../pt449486/index.html">√äxodo em massa de jogos de navegador</a></li>
<li><a href="../pt449488/index.html">Dias sombrios do cataclismo √† frente: an√°lise est√°tica e jogos do tipo Roguelike</a></li>
<li><a href="../pt449490/index.html">Slurm: Intenso por Kubernetes. Programa e b√¥nus</a></li>
<li><a href="../pt449494/index.html">Interfaces de IA e onde eles moram</a></li>
<li><a href="../pt449496/index.html">Hackathon DevDays'19 (parte 2): analisador de mensagem de √°udio para verifica√ß√£o de telegrama e gram√°tica no IntelliJ IDEA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>