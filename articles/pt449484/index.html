<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗝️ 🗻 🍈 Criamos um sensor de controle de qualidade do ar no InfluxDB, Grafana, Docker e Raspberry Pi 👌 👌🏼 👩‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Já pensou em monitorar a qualidade do ar dentro ou fora de sua casa: onde você mora e trabalha? Este projeto, batizado de balenaSense , é uma unidade ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criamos um sensor de controle de qualidade do ar no InfluxDB, Grafana, Docker e Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449484/">  Já pensou em monitorar a qualidade do ar dentro ou fora de sua casa: onde você mora e trabalha?  Este projeto, batizado de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaSense</a> , é uma unidade para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">medir</a> temperatura, umidade, pressão barométrica e qualidade do ar, além de um painel que você pode acessar de qualquer lugar para ver estatísticas resumidas e acompanhar tendências. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ad/95d/d7a/9ad95dd7a878fefb4e5ea05732dba925.png"><br><a name="habracut"></a><br><h1>  Conteúdo </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1. Introdução</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Equipamento necessário</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">De software</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Montagem de equipamentos</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configurar Raspberry Pi</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Implantação de software</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ver painel</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como isso funciona?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que vem a seguir?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Últimos pensamentos</a> </li></ul><br><a name="1"></a><h1>  1. Introdução </h1><br>  Para controlar a qualidade do ar e da estação meteorológica, são necessários muitos fios e vários sensores, mas a situação ficou mais fácil após o aparecimento de sensores que combinam todas as leituras em uma boa prancha pequena, o que é fácil de começar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/462/14c/ff9/46214cff9e49ae84360e58fb5ebb4a4e.jpg"><br><br>  Considere monitorar a temperatura, a umidade, a pressão barométrica e a qualidade do ar usando um sensor all-in-one que se conecta diretamente ao Raspberry Pi sem componentes adicionais.  Você não precisa ter nenhuma experiência em eletrônica, mas um ferro de solda seria bem-vindo (embora também seja opcional).  Este projeto implementa um banco de dados para armazenar leituras históricas, juntamente com uma interface gráfica para visualizar as leituras atuais e ver imediatamente as tendências. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d0/63e/8b2/7d063e8b2d6111ed55553a3b3e3c0a47.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce0/600/884/ce06008843e25c57e8b0979bce73b6b6.png"><br><br><a name="2"></a><h1>  Equipamento necessário </h1><br>  Aqui está o que você precisa comprar para este projeto.  Dependendo se você deseja usar um ferro de soldar ou não, escolhemos uma placa sensora: alguns funcionam imediatamente, outros requerem um pouco de solda. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/005/300/15d/00530015dce4ec449e0477a8d7bc6d14.jpg"><br><br><h3>  Eu não quero soldar </h3><br>  Se você não deseja soldar, precisará de: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Raspberry Pi Zero WH</a> (2Bv1.2 / 3B / 3B + / 3A + também se encaixam) <br></li><li>  Cartão Micro-SD de 8 GB (ou mais), recomendamos os cartões Sandisk Extreme Pro SD <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte de alimentação e cabo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sensor de placa de transição Pimoroni BME680</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pimoroni Breakout Garden pHAT</a> </li></ul><br><h3>  Eu quero soldar - me dê! </h3><br>  Se você estiver feliz em pegar um ferro de soldar, precisará de: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Raspberry Pi Zero W</a> (2Bv1.2 / 3B / 3B + / 3A + também se encaixam) <br></li><li>  Cartão Micro-SD de 8 GB (ou mais), recomendamos os cartões Sandisk Extreme Pro SD <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte de alimentação e cabo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sensor Bosch BME680 com riser</a> (ver alternativas abaixo) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cabo de conexão</a> </li></ul><br><h3>  Outros sensores </h3><br>  Se você já possui algum tipo de sensor, este projeto oferece suporte ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sense HAT</a> com um bônus adicional: um smiley na matriz de LEDs (dependendo da qualidade do ar, é claro)! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ede/763/1ad/ede7631adecd352c97c0675c3adcde95.png"><br><br>  O Bosch BME680 com riser pode ser adquirido de diferentes fornecedores a preços diferentes. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pimoroni BME680</a> £ 18,50 (pode haver uma versão sem soldar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seu pHAT</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adafruit BME680</a> EUA $ 22.50 <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sparkfun SparkX BME680</a> US $ 19,95 (pode haver uma versão sem soldar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seu pHAT</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Nameless BME680</a> US $ 9,92 </li></ul><br>  <b>Nota</b>  No artigo, usamos o Pimoroni: esta placa possui a vantagem adicional de que os contatos são quebrados na ordem correta para o Raspberry Pi GPIO.  Ao usar outras placas, verifique se os pinos de alimentação, terra e I2C do barramento (SDA e SCL) correspondem, conforme explicado mais adiante neste manual. <br><br><a name="3"></a><h1>  De software </h1><br>  Abrimos o projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balena-sense</a> no GitHub, que contém todo o software, configuração e código que você precisa para um sistema em funcionamento.  Vamos implantar este projeto em uma conta gratuita do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaCloud</a> para distribuir todo o software para o Raspberry Pi, além de fornecer acesso remoto.  Portanto, você precisará de: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ferramenta de gravação de</a> cartão SD como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balena</a> <br></li><li>  Conta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaCloud</a> grátis <br></li><li>  Clone ou faça o download do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nosso projeto no GitHub</a> </li></ul><br><a name="4"></a><h1>  Montagem de equipamentos </h1><br>  Há pouco trabalho na frente de hardware deste projeto.  Nosso objetivo é conectar a placa do sensor ao pino GPIO no Raspberry Pi. <br><br>  O BME680 se comunica com o Raspberry Pi por um barramento chamado I2C (que é o quadrado do olho), que é um barramento serial de dois fios.  Esses dois fios são chamados de linha de sincronização (SCK) e linha de dados (SDA).  Além dos dois fios, é necessário fornecer energia ao sensor (3,3V ou 3V3) e aterrá-lo. <br><br>  Se você escolheu a opção sem soldar da Pimoroni ou Sparkfun ou usando o Sense HAT, basta conectar os novos componentes brilhantes ao Raspberry Pi e todas as conexões serão feitas para você: prossiga para a próxima etapa! <br><br>  Se você decidir conectar o sensor diretamente ao Raspberry Pi usando Pimoroni ou outro riser, o principal é garantir a conexão correta dos contatos descritos acima (SDA, SCK, 3V3 e GND). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/55f/165/c76/55f165c76f33633d3539393b1472d2f5.png"></div><br><br>  Um site útil para trabalhar com o GPIO no Raspberry Pi é o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pinout.xyz</a> ;  mostra claramente que precisamos dos pinos 1 (potência 3V3), 3 (SDA), 5 (SCL) e 9 (terra).  Um GPIO de 40 pinos é padrão no Pi 2 e posterior.  Se você usa uma placa Pimoroni, os contatos estão na ordem correta para conectar as placas.  Observe como a inscrição no quadro corresponde ao diagrama de pinagem acima. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebb/832/900/ebb832900d72244bfc6038de82e9164a.jpg"><br><br>  Mas se você conectar o sensor dessa maneira, o calor do processador Raspberry Pi afetará as leituras.  Para coletar leituras mais precisas, é necessário remover o sensor da placa: faça-o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com os cabos DuPont de</a> mãe para mãe (ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jumper Jerky</a> ), conforme mostrado abaixo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b6/5c1/45a/4b65c145a0bd694d5ca9e266d5771d1b.jpg"><br><br>  Da mesma forma, se você usar outro sensor, onde os diagramas de pinagem não coincidem exatamente, poderá conectar essas placas ao Pi usando o mesmo método.  O principal é garantir a conformidade com 3V3, SDA, SCL e GND.  Se a placa tiver contatos para SDI, SDO, CS - você poderá ignorá-los, porque eles são usados ​​para uma interface SPI alternativa, que não usamos neste projeto. <br><br>  Nas fotos acima, temos o Raspberry Pi 3A +, mas o Pi Zero também é adequado como uma solução mais barata. <br><br><a name="5"></a><h1>  Configurar Raspberry Pi </h1><br>  Vamos fazer o flash do cartão SD com o sistema operacional balenaOS, conectar-se à nuvem balenaCloud, adicionar nosso dispositivo e configurar o projeto para que ele possa ser facilmente atualizado mais tarde. <br><br>  Primeiro, você precisa configurar uma conta balenaCloud.  Isso significa registrar, adicionar um aplicativo e adicionar um dispositivo. <br><br><h3>  Etapa 1. Inscreva-se no balenaCloud </h3><br>  Se você já possui uma conta do GitHub ou do Google, pode usá-lo para efetuar login sem passar pelo processo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">registro</a> . <br><br><h3>  Etapa 2. Criando o Aplicativo </h3><br>  Adicione o aplicativo selecionando o tipo de dispositivo correto e <code>Starter</code> como o tipo de aplicativo e clique em <code>Create New Application</code> .  Este tipo suporta todos os microsserviços e é gratuito até dez dispositivos. <br><br>  Em seguida, você será levado ao painel do aplicativo recém-criado, onde poderá ir para a próxima etapa e adicionar o dispositivo.  Você pode atribuir um nome arbitrário ao aplicativo, mas será necessário mais tarde neste manual quando escrevermos o código. <br><br><h3>  Etapa 3. Adicione o dispositivo e inicialize o sistema operacional </h3><br>  Após criar o aplicativo, você pode adicionar um dispositivo a ele clicando no botão verde <i>Adicionar dispositivo</i> .  Ao adicionar um dispositivo, especifique o tipo de dispositivo correto.  Se você estiver se conectando a uma rede sem fio, poderá definir seu WiFI SSID e senha. <br><br>  <b>Nota:</b> Raspberry Pi 3 é indicado na animação, não se esqueça de selecionar o tipo correto de seu dispositivo! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e74/09c/595/e7409c595001458580b80e39809973a6.gif"><br><br>  Esse processo cria uma imagem personalizada para o aplicativo e o tipo de dispositivo, que inclui configurações de rede, se especificado. <br><br>  <b>Nota:</b> para iniciantes, é melhor escolher uma imagem de desenvolvimento para realizar alguns testes e solucionar problemas.  Para mais informações sobre as diferenças entre imagens de desenvolvimento e produção, consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Se você tem certeza de que pode começar a implantar uma imagem de produção agora - por favor. <br><br><h3>  Etapa 4. Grave o cartão SD e o dispositivo de inicialização </h3><br>  Quando a imagem do sistema operacional é carregada, é hora de piscar o cartão SD.  Você pode usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">balenaEtcher</a> para isso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a57/b06/e30/a57b06e30b246d399ee8f8ef47c3b03f.gif"><br><br>  Após a conclusão do processo, insira o cartão SD no Raspberry Pi e conecte a fonte de alimentação. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/845/649/28f/84564928f5f8fc0e7907089bc0818870.gif"><br><br>  Quando o dispositivo inicializa pela primeira vez, ele se conecta ao painel balenaCloud, após o qual você pode vê-lo na lista on-line e seguir para a próxima etapa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/740/785/d6c/740785d6c8aef63170470b81139a1a7b.png"><br><br>  <b>Solução de problemas: o</b> dispositivo deve aparecer no painel em alguns minutos.  Se não aparecer, algo deu errado.  A documentação possui um extenso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guia de solução de problemas</a> com muitas informações sobre por que isso pode acontecer.  Se a documentação não ajudou, entre em contato com os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fóruns</a> . <br><br><a name="6"></a><h1>  Implantação de software </h1><br>  Quando o seu Raspberry Pi estiver preparado, baixado e conectado ao balenaCloud, você estará pronto para instalar o código do aplicativo no dispositivo. <br><br><h4>  Instale as ferramentas da CLI balena em uma estação de trabalho </h4><br>  O BalenaCloud permite transferir remotamente o software / código do aplicativo para o Raspberry Pi e outros dispositivos.  Para tornar isso possível, sua estação de trabalho (não o Raspberry Pi) deve atender a alguns requisitos mínimos de software.  <b>Nota:</b> Para implantar com sucesso este projeto, você não precisa executar nenhum comando no próprio dispositivo, por meio do SSH ou do painel balenaCloud.  Tudo é feito remotamente! <br><br>  Se você já possui (ou pode configurar) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm</a> no seu computador, essa é a maneira mais rápida de executar as ferramentas da CLI.  Também existem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">binários para Windows, macOS e Linux</a> .  <b>Nota:</b> se você já instalou essas ferramentas para nossos outros projetos, poderá pular esta parte e ir diretamente para a próxima etapa. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A documentação para as ferramentas da CLI</a> descreve a instalação e configuração do pacote npm, além dos binários. <br><br>  Quando a CLI está instalada e em execução, a primeira etapa é efetuar login no balenaCloud executando o comando <code>balena login</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebe/2dd/a9e/ebe2dda9e415ee46f57ec346b89e0360.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8e/7ef/cda/c8e7efcda08bb42ef11aadfb231d5706.png"><br><br>  Quando houver uma CLI em funcionamento registrada na conta, você estará pronto para instalar programas no Raspberry Pi. <br><br><h4>  Baixando um projeto no GitHub </h4><br>  O próximo passo é <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixar o código para este projeto no GitHub</a> . <br><br>  O botão azul carregará o arquivo zip do projeto, mas se você já estiver familiarizado com o Git, poderá usar o <code>git clone</code> maneira usual. <br><br><h4>  Instale no Raspberry Pi </h4><br>  Como a CLI e o código mais recente estão instalados, você pode executar esse código no balenaCloud com um comando.  Lá, a imagem do Docker é coletada e configurada, que será executada no seu dispositivo. <br><br>  No diretório do projeto após descompactá-lo, execute o <code>balena push &lt;appName&gt;</code> , em que appName é o nome do aplicativo especificado no início do manual.  Por exemplo, <code>balena push balenaSense</code> . <br><br>  Se tudo for feito corretamente, após alguns minutos, a tela de informações do seu dispositivo no painel de controle deverá mostrar os serviços em execução, um para cada componente do software, algo como isto: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/452/08c/652/45208c6529a5735789917e8ca2783b8b.png"><br><br>  Na primeira vez que o download pode demorar alguns minutos (dependendo da velocidade da sua conexão com a Internet), mas somente as alterações no contêiner são baixadas, para que tudo aconteça muito mais rápido. <br><br>  <b>Nota:</b> quando o aplicativo é iniciado pela primeira vez (e você usa o BME680, não o Sense HAT), o sensor executa um 'burn-in' por cerca de cinco minutos.  Durante esse período, as leituras <i>não serão</i> feitas e inseridas no banco de dados.  O aplicativo registrará a contagem regressiva, exibida no painel balenaCloud: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/607/cd8/809/607cd8809b0176d8cb5888f9ae766fc3.png"><br><br>  Quando a contagem chegar a zero, você verá a mensagem 'Loop inicial ...'.  Depois disso, as leituras serão realizadas e inseridas no banco de dados a cada 10 segundos. <br><br><a name="7"></a><h1>  Ver painel </h1><br>  Espero que você tenha atualizado o dispositivo, conectado à rede e iniciado sem problemas.  Um dos grandes benefícios do uso de uma conta balenaCloud gratuita é o recurso de <code>Public Device URL</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75e/0be/d3f/75e0bed3f3dccd7b2d43baa9a84b8134.png"><br><br>  Ative essa opção e clique no ícone de seta azul para acessar o painel.  Você pode compartilhar este link ou adicioná-lo aos favoritos no seu telefone ou outro dispositivo.  Enquanto o dispositivo balenaSense está conectado e funcionando, você pode ver o painel de qualquer lugar! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce0/600/884/ce06008843e25c57e8b0979bce73b6b6.png"><br><br>  Se você não deseja ativar o acesso público, ainda pode visualizar o painel da sua rede local por endereço IP, como pode ser visto na captura de tela acima.  O seu será diferente, mas basta digitar <code>http://&lt;ip-&gt;</code> no navegador e você ainda terá acesso ao painel se estiver na mesma rede que o dispositivo.  Por exemplo, para acessar meu dispositivo, <code>http://10.1.231.36</code> . <br><br>  Se você deseja fazer login no Grafana e brincar com as configurações, as credenciais padrão são <code>admin</code> e <code>admin</code> . <br><br><a name="8"></a><h1>  Como isso funciona? </h1><br>  Este projeto possui três componentes principais, três serviços.  Esses nomes estão no painel balenaCloud: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">InfluxDB</a> - um banco de dados usado para armazenar leituras de sensores <br></li><li>  Sensor - biblioteca e código Python para acessar o sensor, fazer leituras e salvá-las no banco de dados <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grafana</a> - usado para criar um painel com gráficos e relatórios </li></ul><br>  O sensor BME680 da Bosch detecta temperatura, umidade, pressão e resistência a gases.  Os sensores de temperatura, umidade e pressão funcionam imediatamente, mas as leituras de resistência de gás por si só não são muito úteis.  Estes são indicadores de mudanças na composição do ar.  Quando o sensor inicia, ele define a base e monitora as alterações.  Os indicadores indicativos da qualidade do ar são dados em porcentagem e levam em consideração a influência da umidade e da resistência do gás. <br><br>  Se você usar o Sense HAT, onde não há sensor de resistência ao gás, aproximamos as leituras da qualidade do ar com base nos valores de temperatura e umidade desejados. <br><br><a name="9"></a><h1>  O que vem a seguir? </h1><br>  Espero que agora você tenha lançado completamente o projeto, tenha acesso ao painel, tenha leituras e tenha começado a preencher seu banco de dados.  Mencione algumas coisas mais importantes. <br><br><h3>  Alterar senha </h3><br>  Se você abrir o dispositivo para acesso público, é recomendável alterar a senha do Grafana. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f5/bb8/75e/3f5bb875e74b17bf2eff4447f1245212.png"><br><br>  Configuramos o sistema com o nome de usuário e a senha padrão <code>admin</code> <code>admin</code> .  Para alterá-los, faça login no Grafana usando o botão no canto inferior esquerdo do painel.  Você será solicitado a alterar a senha na primeira vez que efetuar login. <br><br><h3>  Personalização </h3><br>  O programa Grafana para o painel e os relatórios possui muitos parâmetros de configuração.  Criamos um painel básico que mostra um gráfico e gráfico para cada uma das quatro opções de medição. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ca/cab/417/9cacab417c06bb7568701a26bfa5f2b2.png"><br><br>  Você pode personalizar cada painel do Grafana passando o mouse sobre o título e passando para a edição.  Eu recomendo brincar com as configurações - as alterações no painel não são salvas automaticamente; portanto, se você cometer um erro, basta recarregar a página e tudo voltará à sua forma original.  Se você deseja salvar as alterações, clique em <i>Salvar</i> na parte superior do painel de controle e todas as configurações serão salvas no seu dispositivo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5b/036/336/b5b03633659cfdf57133ba45f598f94c.png"><br><br>  Você também pode configurar os sensores.  Por exemplo, no diagrama do manômetro, configuramos vários intervalos básicos e valores de texto em vez de números.  Tudo isso muda ao seu gosto! <br><br><h3>  Habitação </h3><br>  Esses sensores são ideais para serem colocados em uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cabine meteorológica</a> , que protege os sensores da luz solar e do calor irradiado.  Se você controla o ambiente na sala, isso não é tão importante, mas se o sensor estiver instalado ao ar livre, seu posicionamento e proteção são importantes para obter leituras precisas. <br><br>  Cabines de previsão do tempo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estão à venda</a> , mas podem ser bastante caras, portanto, considere as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">opções de bricolage</a> . <br><br>  O Thingiverse possui vários <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">edifícios</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cabines climáticas do</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BME680</a> . <br><br><a name="10"></a><h1>  Últimos pensamentos </h1><br>  Obrigado pela leitura!  Se você decidir construir sua própria estação meteorológica com controle de qualidade do ar - conte-nos como tudo correu, que problemas surgiram.  Idéias para o desenvolvimento do nosso projeto podem ser expressas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nos fóruns</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt449484/">https://habr.com/ru/post/pt449484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt449468/index.html">Como o "truque ético" do fabricante do software de jogos de azar se transformou em um pesadelo completo</a></li>
<li><a href="../pt449472/index.html">Dias sombrios do cataclismo adiante, análise estática e bagels</a></li>
<li><a href="../pt449476/index.html">Um novo tipo de armazenamento SSD reduzirá o consumo de energia no data center - como funciona</a></li>
<li><a href="../pt449478/index.html">Adicionando UICollectionViews a um UITableViewCell personalizado, feito através do Xib</a></li>
<li><a href="../pt449480/index.html">Escolha o rastreamento de bug apropriado</a></li>
<li><a href="../pt449486/index.html">Êxodo em massa de jogos de navegador</a></li>
<li><a href="../pt449488/index.html">Dias sombrios do cataclismo à frente: análise estática e jogos do tipo Roguelike</a></li>
<li><a href="../pt449490/index.html">Slurm: Intenso por Kubernetes. Programa e bônus</a></li>
<li><a href="../pt449494/index.html">Interfaces de IA e onde eles moram</a></li>
<li><a href="../pt449496/index.html">Hackathon DevDays'19 (parte 2): analisador de mensagem de áudio para verificação de telegrama e gramática no IntelliJ IDEA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>