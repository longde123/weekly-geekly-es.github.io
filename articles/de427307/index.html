<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôãüèΩ ü§∂üèæ ü§æ Java-Backend-Testpraxis + Rest-Assured üßùüèæ üòö üôåüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem fr√ºheren Artikel habe ich meine Automatisierungserfahrung mit dem Robot Framework geteilt. Jetzt werden wir √ºber einen etwas anderen Ansatz z...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java-Backend-Testpraxis + Rest-Assured</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maxilect/blog/427307/">  In einem fr√ºheren Artikel habe ich meine Automatisierungserfahrung mit dem Robot Framework geteilt.  Jetzt werden wir √ºber einen etwas anderen Ansatz zum Testen der API f√ºr ein Projekt auf Kotlin sprechen. <br><br>  Ich nutzte die Freiheit, den Technologie-Stack zu w√§hlen und vertraute auf den Wunsch, ‚Äûim Kampf‚Äú etwas Neues auszuprobieren, und wandte mich an Rest-Assured.  Nicht ohne Schwierigkeiten haben meine Kollegen und ich Tests gestartet, und als Ergebnis der Entwicklung des Ansatzes haben wir ihn in die Liste der Schl√ºsselaufgaben f√ºr diese Art von Aufgabe aufgenommen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dp/fb/py/dpfbpyb84ceqlsxp7b0ixsvo9wq.jpeg" alt="Bild"></div><br>  <i>(Bild als Parodie verwendet)</i> <br><a name="habracut"></a><br>  Alles begann mit der Tatsache, dass die Anforderung bestand, die Test-API f√ºr eines der neuen Projekte im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ad-Tech-Segment</a> zu automatisieren.  Wir haben Campaign Manager, DMP und verschiedene Integrationen mit Systemen von Drittanbietern durchgef√ºhrt.  Und die Tester hatten eine √§u√üerst einfache Aufgabe: die Rauchpr√ºfung f√ºr die weitere Integration in CI und die st√§ndige √úberwachung des Status dieser API zu automatisieren, da Systeme von Drittanbietern daran gebunden sind und ein korrekter Betrieb von entscheidender Bedeutung ist.  Eine √úberpr√ºfung der Gesch√§ftslogik war in diesem Fall nicht erforderlich, da der getestete Dienst im Wesentlichen eine Proxy-Schnittstelle ist. <br><br><h2>  Warum beruhigt? </h2><br>  Unter dem Gesichtspunkt der Testautomatisierung haben wir es geschafft, in einer Vielzahl von Bereichen zu arbeiten - Benutzeroberfl√§che, Web, Mobile, Desktop, Backend, REST-API, SOAP.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das vorherige Projekt</a> hat uns ziemlich viel Erfahrung mit dem Robot Framework gebracht, daher w√§re es am logischsten, es zu verwenden.  Die meisten Testteams kennen ihn, und wenn ein dringender Austausch erforderlich ist, erfolgt dies schnell und praktisch schmerzlos.  Es wurde jedoch eine andere Entscheidung getroffen. <br><br>  Zun√§chst wurde das Projekt selbst in Kotlin geschrieben und mit Gradle erstellt.  Gleichzeitig wurde in der Entwurfsphase beschlossen, kein separates Projekt zuzuweisen.  Wie in den Kommentaren zum vorherigen Artikel erw√§hnt, ist das Zusammenhalten von Java (Kotlin) und dem Robot Framework ein gro√üer Schmerz, daher war es sinnlos, sich auf RF zu beziehen.  Als ich auf die Arbeit mit einem Roboter zur√ºckblickte, war ich daran interessiert, einen anderen Ansatz zu versuchen.  Dar√ºber hinaus konnten wir bei diesem Projekt unabh√§ngig einen Technologie-Stack ausw√§hlen - das Unternehmen hat keine eigenen Bedingungen festgelegt. <br><br>  Auf der Suche nach Ideen wandte ich mich an unser Entwicklungsteam sowie an Kollegen aus dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testbereich</a> , und CTO riet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mir</a> , mir Rest-Assured ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">rest-assured.io</a> ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">anzusehen</a> .  Nachdem ich die Dokumentation und Beispieltests in Open Source gelesen hatte, erschien mir der von Rest-Assured vorgeschlagene Ansatz sehr attraktiv.  Es bedeutet, eine Antwort vom Backend in Form von JSON zu erhalten, die wir in gute alte Java-Objekte deserialisieren. <br><br>  Au√üerdem k√∂nnen Sie mit dieser Struktur wie mit einem normalen Objekt arbeiten.  Als Ergebnis haben wir einen v√∂llig normalen objektorientierten Ansatz zur Validierung der Entsprechung der API-Antwort mit der beschriebenen Objektstruktur.  Als Bonus erhalten wir einen schnellen ausfallsicheren Test der Antwortstruktur. Wenn sich das durch Deserialisieren der API-Antwort empfangene Objekt in der Anzahl der Felder oder deren Namen unterscheidet, werden die Tests gel√∂scht, noch bevor die Daten mit einem Deserialisierungsfehler √ºberpr√ºft werden.  Wir werden also verstehen, ob wir das Backend reparieren oder die Tests gem√§√ü den neuen API-Anforderungen aktualisieren m√ºssen.  In unserem Fall war dies wichtig, da, wie oben erw√§hnt, viele Subsysteme von Drittanbietern an die API gebunden sind. <br><br>  Aus Gr√ºnden der Genauigkeit stelle ich fest, dass ungef√§hr der gleiche ausfallsichere Test f√ºr HF erhalten werden konnte, jedoch auf etwas andere Weise.  In der heutigen Geschichte geht es jedoch nicht darum.  Pers√∂nlich war es f√ºr mich bequemer und verst√§ndlicher, von der Seite von Rest-Assured mit einer Entit√§t mit bestimmten Feldern und Methoden einzutreten. <br><br><h2>  Federtest </h2><br>  Bevor ich anfing, den Stack f√ºr ein reales Projekt zu verwenden, entschied ich mich, ihn f√ºr einen kleinen CRUD-Dienst auszuprobieren.  Um seine eigenen Fehler nicht sofort zu √ºben, entschied er sich, in diesem Stapel nach Best Practices zu suchen, und fand schnell <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel von Philip Hauer</a> , in dem er seine Automatisierungserfahrung bei Rest-Assured widerspiegelte.  Nach dem Studium des Artikels war es nicht schwierig, eine funktionierende Version der Tests meines Dienstes zu schreiben.  Sie erwiesen sich als einfach, leicht zu lesen und zu verstehen. <br><br><h2>  In die Schlacht! </h2><br>  Das Projekt begann und als die ersten Antwortstrukturen beschrieben wurden, begannen die Erstellung der Testdokumentation und das Schreiben von Autotests.  Um das Gesamtbild zu verstehen, gebe ich einen vollst√§ndigen Stapel von Autotests: <br><br><ul><li>  Java </li><li>  JUnit4 - Ausf√ºhrung und Parametrisierung von Testskripten (Standard Annotation @Parametrize), <br></li><li>  Rest-Assured - Erstellen und Ausf√ºhren von Abfragen, </li><li>  AssertJ - Validierung der empfangenen Werte, </li><li>  Allure - Berichtsgeb√§ude, </li><li>  Gradle - Montage </li><li>  Jackson - Deserialisierung. </li></ul><br>  Als die ersten Tests geschrieben wurden, wurde das Problem der richtigen Parametrisierung offensichtlich.  Einfache Datenwerte und das erwartete Ergebnis zu vermitteln, schien √§u√üerst ineffizient und h√§sslich.  Ich hatte vor den Ferien keine Zeit, dieses Problem zu l√∂sen, aber meine Kollegen, die w√§hrend meiner Abwesenheit beteiligt waren, haben es gekl√§rt.  F√ºr eine sch√∂ne und einfach zu lesende Parametrisierung haben sie beschlossen, eine Basisklasse mit den Funktionen zum Hinzuf√ºgen, Empfangen und L√∂schen von Objektparametern zu erstellen, von denen alle Klassen geerbt wurden, deren Objekte zum Aufrufen der entsprechenden API-Methoden verwendet wurden. <br><br><img src="https://habrastorage.org/webt/9j/vt/7r/9jvt7rmcd1w3wddoqmomp-_cpz4.png" alt="Bild"><br><br>  Dies erm√∂glichte es buchst√§blich im laufenden Betrieb, die erforderlichen Daten zu erstellen und diese in den Testparametern zu √ºbertragen. <br><br><img src="https://habrastorage.org/webt/ll/rx/5o/llrx5opu0wbwa29_nmbywqxsubq.png" alt="Bild"><br><br>  Mit Rest-Assured k√∂nnen Sie die Antwort auf die erforderliche Klasse deserialisieren.  Die resultierende Antwort wird unter Verwendung von Jackson in eine zuvor bekannte Struktur zerlegt.  Klassen f√ºr die Deserialisierung sehen so einfach wie m√∂glich aus - alle erwarteten Felder mit ihren Typen werden beschrieben. <br><br><img src="https://habrastorage.org/webt/kw/kh/jr/kwkhjrtsj5zd6kxm0lkhcnaewqy.png" alt="Bild"><br><br>  Dar√ºber hinaus wird die einfache Arbeit mit Objekten und die Behauptung bestimmter Felder und ihrer Werte fortgesetzt. <br>  Das Schwierigste und Nicht-Offensichtliche, auf das ich bei diesem Ansatz gesto√üen bin, ist die Unf√§higkeit, Null als einen der Parameter an Rest-Assured zu √ºbergeben (das Ergebnis ist ein Abfall der NullPointerException).  Anscheinend ist dies ein bekanntes Problem, aber der Entwickler wird die Situation nicht korrigieren und empfiehlt, das Feld entweder leer oder gar nicht zu senden.  Wir hatten dieses Problem bereits zu dem Zeitpunkt, als die Grundlage des Projekts fertig war und nur noch Testklassen hinzugef√ºgt werden mussten.  Deshalb haben wir unseren Code nur geringf√ºgig korrigiert. <br><br>  Im Allgemeinen hat mir der Ansatz gefallen.  Es ist merkw√ºrdig, dass es nach einiger Zeit auf das Projekt eines anderen Kunden angewendet wurde (allerdings nicht aus unserem Angebot).  Und wir haben den zusammengestellten Stack f√ºr Automatisierungstest-APIs (JUnit + AssertJ + Rest-Assured) in die Kategorie der wichtigsten f√ºr Java / Kotlin-Projekte eingeordnet.  In Python ist das Ziehen nicht intuitiv, da es besser ist, dass sich die Entwicklungs- und Testkompetenzen √ºberschneiden. <br><br>  Es ist auch erw√§hnenswert, dass einer der Vorteile dieser L√∂sung ihre Skalierbarkeit und Anpassungsf√§higkeit an komplexe Logik ist.  Dies bedeutet, dass es am besten f√ºr ernsthafte Projekte geeignet ist, bei denen es wirklich sinnvoll ist, gro√üe Objekte, sauberen Code und Blockarchitektur zu beschreiben, wenn separate Teile f√ºr die Vorbereitung, √úbertragung und den Empfang von Daten in lesbarer Form sowie die anschlie√üende √úberpr√ºfung der Daten auf Konformit√§t verantwortlich sind einige Bedingungen.  In kleinen Projekten ist das alles sinnlos zu ziehen. <br><br><h2>  Zusammenfassung </h2><br>  In ungef√§hr einem Monat konnten wir ungef√§hr 250 Tests automatisieren und den erforderlichen Abdeckungsgrad bereitstellen.  Nat√ºrlich wurde nach dem Ende des Automatisierungsprozesses eine interne Pr√§sentation f√ºr alle abgehalten, damit die Mitarbeiter eine Vorstellung von der geleisteten Arbeit hatten und aus den Erfahrungen mit diesem Projekt lernen konnten. <br><br>  Artikelautor: Dmitry Masters <br><br>  PS Wir ver√∂ffentlichen unsere Artikel auf mehreren Websites der Runet.  Abonnieren Sie unsere Seiten auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VK</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FB</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Telegramm-Kanal</a> , um mehr √ºber unsere Ver√∂ffentlichungen und andere Maxilect-Nachrichten zu erfahren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427307/">https://habr.com/ru/post/de427307/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427295/index.html">JavaScript-Currying-Funktionen</a></li>
<li><a href="../de427297/index.html">Apache Ignite + Apache Spark-Datenrahmen: zusammen mehr Spa√ü</a></li>
<li><a href="../de427299/index.html">Lassen Sie uns noch etwas sammeln? Konstruktor 3 in 1 "Mondflotte"</a></li>
<li><a href="../de427301/index.html">GitHub st√ºrzt Datenbank ab</a></li>
<li><a href="../de427303/index.html">Windows verlangsamen Teil 2: Prozesse erstellen</a></li>
<li><a href="../de427309/index.html">Wie sich herausstellte, dass PVS-Studio aufmerksamer war als dreieinhalb Programmierer</a></li>
<li><a href="../de427311/index.html">So werden Sie ein Rechenzentrum, wenn Sie √ºber 40 Jahre alt sind und kein Programmierer sind</a></li>
<li><a href="../de427313/index.html">Wie SoftBank j√§hrlich 50 Milliarden US-Dollar in Startups investiert und warum es Investoren verbl√ºfft</a></li>
<li><a href="../de427315/index.html">Izba-Lesesaal oder eine Auswahl an Fachliteratur</a></li>
<li><a href="../de427317/index.html">Im IT-Bereich erfolgreich sein oder was t√∂tet IT'shnikov?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>