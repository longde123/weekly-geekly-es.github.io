<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😒 😼 🈷️ Ein Beispiel für die Erstellung einer Echtzeit-Sportanwendung auf Node.js. 👨🏼‍🎤 🌪️ 🎼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werde ich zeigen, wie Sie mit Node.js eine Webanwendung erstellen, mit der Sie die Ergebnisse von NHL-Spielen in Echtzeit verfolgen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ein Beispiel für die Erstellung einer Echtzeit-Sportanwendung auf Node.js.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/413957/"><img src="https://habrastorage.org/webt/ty/pi/vz/typivzoqbkyrfawb47veqd-mcis.jpeg"><br><br>  In diesem Artikel werde ich zeigen, wie Sie mit Node.js eine Webanwendung erstellen, mit der Sie die Ergebnisse von NHL-Spielen in Echtzeit verfolgen können.  Die Indikatoren werden entsprechend den Änderungen der Punktzahl während der Spiele aktualisiert. <br><br>  Ich habe es wirklich genossen, diesen Artikel zu schreiben, weil die Arbeit daran zwei Dinge beinhaltete, die ich liebte: Softwareentwicklung und Sport. <br><a name="habracut"></a><br>  Im Laufe der Arbeit werden wir folgende Werkzeuge verwenden: <br><br><ul><li>  Node.js; </li><li>  Socket.io; </li><li>  MySportsFeed.com. </li></ul><br>  Wenn Sie Node.js nicht installiert haben, besuchen Sie die Download-Seite und installieren Sie es. Dann fahren wir fort. <br><br><h3>  Was ist socket.io? </h3><br>  Dies ist die Technologie, die den Client mit dem Server verbindet.  Im aktuellen Beispiel ist der Client ein Webbrowser und der Server die Datei Node.js.  Der Server kann gleichzeitig mit mehreren Clients arbeiten. <br><br>  Sobald die Verbindung hergestellt ist, kann der Server Nachrichten an alle Clients oder nur an einen von ihnen senden.  Dies kann wiederum Nachrichten an den Server senden und die Kommunikation in zwei Richtungen ermöglichen. <br><br>  Vor Socket.io wurden Webanwendungen normalerweise unter AJAX ausgeführt.  Seine Verwendung sah vor, dass der Client den Server abfragen und umgekehrt nach neuen Ereignissen suchen musste.  Beispielsweise könnten solche Abfragen alle 10 Sekunden durchgeführt werden, um nach neuen Nachrichten zu suchen. <br><br>  Dies stellte eine zusätzliche Belastung dar, da die Suche nach neuen Nachrichten auch dann durchgeführt wurde, wenn sie überhaupt nicht vorhanden waren. <br><br>  Bei Verwendung von Socket.io werden Nachrichten in Echtzeit empfangen, ohne dass ständig nach ihrer Anwesenheit gesucht werden muss, wodurch die Last verringert wird. <br><br><h3>  Beispielanwendung für Socket.io </h3><br>  Bevor wir mit der Erfassung von Wettbewerbsdaten in Echtzeit beginnen, erstellen wir eine Beispielanwendung, um die Funktionsweise von Socket.io zu demonstrieren. <br><br>  Zuerst werde ich eine Node.js.-Anwendung erstellen.  Im Konsolenfenster müssen Sie in das Verzeichnis C: \ GitHub \ NodeJS wechseln, einen neuen Ordner für die Anwendung erstellen und darin eine neue Anwendung: <br><br><pre><code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> \GitHub\NodeJS <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> SocketExample <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> SocketExample npm init</code> </pre> <br>  Ich habe die Standardeinstellungen beibehalten, Sie können das gleiche tun. <br><br>  Da wir eine Webanwendung erstellen, verwende ich ein NPM-Paket namens Express, um die Installation zu vereinfachen.  Führen Sie an der Eingabeaufforderung die folgenden Befehle aus: npm install express --save. <br><br>  Natürlich müssen wir auch das Socket.io-Paket installieren: npm install socket.io --save <br><br>  Jetzt müssen Sie den Webserver starten.  Erstellen Sie dazu eine neue Datei index.js und platzieren Sie den folgenden Codeabschnitt: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>)(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).Server(app); app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">)</span></span>{ res.sendFile(__dirname + <span class="hljs-string"><span class="hljs-string">'/index.html'</span></span>); }); http.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'HTTP server started on port 3000'</span></span>); });</code> </pre> <br>  Wenn Ihnen Express nicht bekannt ist, enthält das obige Codebeispiel die Express-Bibliothek. Hier erstellen wir einen neuen HTTP-Server.  In dem Beispiel überwacht der HTTP-Server Port 3000, d. H.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">localhost</a> : 3000.  Der Pfad führt zur Wurzel „/“.  Das Ergebnis wird als HTML-Datei index index.html zurückgegeben. <br><br>  Bevor Sie diese Datei erstellen, beenden Sie den Serverstart, indem Sie Socket.io konfigurieren.  Führen Sie die folgenden Befehle aus, um einen Socket-Server zu erstellen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> io = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'socket.io'</span></span>)(http); io.on(<span class="hljs-string"><span class="hljs-string">'connection'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">socket</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Client connection received'</span></span>); });</code> </pre> <br>  Wie bei Express beginnt der Code mit dem Importieren der Socket.io-Bibliothek.  Dies wird durch die Variable io angezeigt.  Erstellen Sie als Nächstes mit dieser Variablen einen Ereignishandler mit der Funktion on.  Dieses Ereignis wird jedes Mal ausgelöst, wenn ein Client eine Verbindung zum Server herstellt. <br><br>  Nun erstellen wir einen einfachen Client.  Erstellen Sie dazu die Datei index.html und fügen Sie den folgenden Code ein: <br><br><pre> <code class="javascript hljs">&lt;!doctype html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Socket.IO Example</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/socket.io/socket.io.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="actionscript"><span class="xml"><span class="actionscript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="actionscript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="actionscript"> socket = io(); </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Der obige HTML-Code lädt den Socket.io-JavaScript-Client und initialisiert die Verbindung zum Server.  Führen Sie Node: node index.js aus, um ein Beispiel anzuzeigen. <br><br>  Geben Sie als Nächstes im Browser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">localhost ein</a> : 3000.  Die Seite bleibt leer, aber wenn Sie auf die Konsole schauen, während Node ausgeführt wird, werden zwei Meldungen angezeigt: <br><br>  <i>Der HTTP-Server wurde an Port 3000 gestartet</i> <i><br></i>  <i>Client-Verbindung empfangen</i> <br><br>  Nachdem wir uns erfolgreich verbunden haben, können wir die Arbeit fortsetzen.  Senden Sie beispielsweise eine Nachricht vom Server an den Client.  Wenn der Client es empfängt, wird eine Antwortnachricht gesendet: <br><br><pre> <code class="javascript hljs">io.on(<span class="hljs-string"><span class="hljs-string">'connection'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">socket</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Client connection received'</span></span>); socket.emit(<span class="hljs-string"><span class="hljs-string">'sendToClient'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">hello</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span> }); socket.on(<span class="hljs-string"><span class="hljs-string">'receivedFromClient'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); }); });</code> </pre> <br>  Die vorherige io.on-Funktion wurde aktualisiert und enthält mehrere neue Codezeilen.  Der erste, socket.emit, sendet eine Nachricht an den Client.  sendToClient ist der Name des Ereignisses.  Durch das Benennen von Ereignissen erhalten Sie die Möglichkeit, verschiedene Arten von Nachrichten zu senden, sodass der Client sie unterschiedlich interpretieren kann.  Ein weiteres Update ist socket.on, das ebenfalls einen Ereignisnamen hat: receiveFromClient.  All dies schafft eine Funktion, die Daten vom Client empfängt.  In diesem Fall werden sie auch im Konsolenfenster aufgezeichnet. <br><br>  Die abgeschlossenen Schritte schließen die Vorbereitung des Servers ab.  Jetzt kann es Daten von jedem verbundenen Client empfangen und senden. <br><br>  Beenden wir dieses Beispiel, indem wir den Client aktualisieren, indem wir das sendToClient-Ereignis empfangen.  Wenn ein Ereignis empfangen wird, wird eine Antwort von Client empfangen. <br><br>  Damit ist der JavaScript-Teil von HTML abgeschlossen.  In index.html hinzufügen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> socket = io(); socket.on(<span class="hljs-string"><span class="hljs-string">'sendToClient'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); socket.emit(<span class="hljs-string"><span class="hljs-string">'receivedFromClient'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">my</span></span>: <span class="hljs-string"><span class="hljs-string">'data'</span></span> }); });</code> </pre> <br>  Mit der integrierten Socket-Variablen erhalten wir auf dem Server eine ähnliche Logik mit der Funktion socket.on.  Der Client wartet auf das sendToClient-Ereignis.  Sobald der Client verbunden ist, sendet der Server diese Nachricht.  Der Client, der es empfängt, zeichnet das Ereignis in der Browserkonsole auf.  Danach verwendet der Client dasselbe socket.emit wie der Server, auf dem das ursprüngliche Ereignis gesendet wurde.  In diesem Fall sendet der Client das empfangene FromClient-Ereignis an den Server.  Wenn er eine Nachricht erhält, wird diese im Konsolenfenster protokolliert. <br><br>  Probieren Sie es selbst aus.  Starten Sie zunächst in der Konsole Ihre Knotenanwendung: node index.js.  Laden Sie dann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">localhost</a> : 3000 in den Browser. <br><br>  Überprüfen Sie Ihre Browserkonsole, und in den JSON-Protokollen wird Folgendes angezeigt: {Hallo: "Welt"} <br><br>  Während die Knotenanwendung ausgeführt wird, wird Folgendes angezeigt: <br><br>  <i>Der HTTP-Server wurde an Port 3000 gestartet</i> <i><br></i>  <i>Client-Verbindung empfangen</i> <i><br></i>  <i>{my: 'data'}</i> <br><br>  Sowohl der Client als auch der Server können JSON-Daten verwenden, um bestimmte Aufgaben auszuführen.  Mal sehen, wie Sie in Echtzeit mit Wettbewerbsdaten arbeiten können. <br><br><h3>  Wettbewerbsinformationen </h3><br>  Nachdem wir die Prinzipien des Sendens und Empfangens von Daten durch Client und Server verstanden haben, sollten Sie sicherstellen, dass Aktualisierungen in Echtzeit durchgeführt werden.  Ich habe die Wettkampfdaten verwendet, obwohl dies nicht nur mit Sportinformationen möglich ist.  Aber da wir damit arbeiten, müssen wir die Quelle finden.  Sie werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MySportsFeeds</a> dienen.  Der Service wird bezahlt - ab 1 US-Dollar pro Monat. <br><br>  Sobald Ihr Konto eingerichtet ist, können Sie mit der API beginnen.  Sie können das NPM-Paket dafür verwenden: npm install mysportsfeeds-node --save. <br><br>  Nach der Installation des Pakets verbinden wir die API: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> MySportsFeeds = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"mysportsfeeds-node"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msf = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySportsFeeds(<span class="hljs-string"><span class="hljs-string">"1.2"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); msf.authenticate(<span class="hljs-string"><span class="hljs-string">"********"</span></span>, <span class="hljs-string"><span class="hljs-string">"*********"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); msf.getData(<span class="hljs-string"><span class="hljs-string">'nhl'</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-2018-regular'</span></span>, <span class="hljs-string"><span class="hljs-string">'scoreboard'</span></span>, <span class="hljs-string"><span class="hljs-string">'json'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fordate</span></span>: today.getFullYear() + (<span class="hljs-string"><span class="hljs-string">'0'</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(today.getMonth() + <span class="hljs-number"><span class="hljs-number">1</span></span>)).slice(<span class="hljs-number"><span class="hljs-number">-2</span></span>) + (<span class="hljs-string"><span class="hljs-string">'0'</span></span> + today.getDate()).slice(<span class="hljs-number"><span class="hljs-number">-2</span></span>), <span class="hljs-attr"><span class="hljs-attr">force</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre> <br>  Ersetzen Sie im obigen Beispiel meine Daten durch Ihre. <br><br>  Der Code führt einen API-Aufruf durch, um die heutigen NHL-Wettbewerbsergebnisse zu erhalten.  Die fordate-Variable definiert das Datum.  Ich habe auch force und true verwendet, um Daten zurückzugewinnen, auch wenn die Ergebnisse gleich sind. <br><br>  Mit dem aktuellen Setup werden die Ergebnisse des API-Aufrufs in eine Textdatei geschrieben.  Im letzten Beispiel werden wir dies ändern.  Zu Demonstrationszwecken kann die Ergebnisdatei in einem Texteditor angezeigt werden, um den Inhalt der Antwort zu verstehen.  In unserem Ergebnis sehen wir das Ergebnis-Tabellenobjekt.  Dieses Objekt enthält ein Array namens gameScore.  Es speichert das Ergebnis jedes Spiels.  Jedes Objekt enthält wiederum ein untergeordnetes Objekt, das als Spiel bezeichnet wird.  Dieses Objekt gibt Auskunft darüber, wer spielt. <br><br>  Außerhalb des Spielobjekts gibt es mehrere Variablen, die den aktuellen Status des Spiels anzeigen.  Daten ändern sich abhängig von den Ergebnissen.  Wenn das Spiel noch nicht begonnen hat, werden Variablen verwendet, die Informationen darüber liefern, wann dies geschehen wird.  Wenn das Spiel begonnen hat, werden zusätzliche Daten zu den Ergebnissen bereitgestellt, einschließlich Informationen darüber, welcher Zeitraum jetzt ist und wie viel Zeit noch übrig ist.  Um besser zu verstehen, worum es geht, fahren wir mit dem nächsten Abschnitt fort. <br><br><h3>  Echtzeit-Updates </h3><br>  Wir haben alle Teile des Puzzles, also lasst es uns zusammenbauen!  Leider unterstützt MySportsFeeds die Ausgabe von Daten nur eingeschränkt, sodass Sie ständig Informationen anfordern müssen.  Hier gibt es einen positiven Punkt: Wir wissen, dass sich die Daten nur einmal alle 10 Minuten ändern, sodass es nicht erforderlich ist, den Dienst zu oft abzufragen.  Empfangene Daten können vom Server an alle verbundenen Clients gesendet werden. <br><br>  Um die erforderlichen Daten zu erhalten, verwende ich die JavaScript-Funktion setInterval, mit der Sie alle 10 Minuten (in meinem Fall) auf die API zugreifen können, um nach Updates zu suchen.  Wenn Daten eintreffen, wird das Ereignis an alle verbundenen Clients gesendet.  Die Ergebnisse werden dann über JavaScript in einem Webbrowser aktualisiert. <br><br>  MySportsFeeds wird auch aufgerufen, wenn die Knotenanwendung zuerst gestartet wird.  Die Ergebnisse werden für alle Clients verwendet, die vor dem ersten 10-Minuten-Intervall eine Verbindung herstellen.  Informationen dazu werden in einer globalen Variablen gespeichert.  Es wird wiederum im Rahmen einer Intervallumfrage aktualisiert.  Dies stellt sicher, dass jeder der Kunden relevante Ergebnisse erzielt. <br><br>  Damit in der Hauptdatei index.js alles in Ordnung ist, habe ich eine neue Datei mit dem Namen data.js erstellt.  Es enthält eine aus index.js exportierte Funktion, die die MySportsFeeds-API zuvor aufruft.  Hier ist der vollständige Inhalt dieser Datei: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> MySportsFeeds = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"mysportsfeeds-node"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msf = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySportsFeeds(<span class="hljs-string"><span class="hljs-string">"1.2"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); msf.authenticate(<span class="hljs-string"><span class="hljs-string">"*******"</span></span>, <span class="hljs-string"><span class="hljs-string">"******"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); exports.getData = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> msf.getData(<span class="hljs-string"><span class="hljs-string">'nhl'</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-2018-regular'</span></span>, <span class="hljs-string"><span class="hljs-string">'scoreboard'</span></span>, <span class="hljs-string"><span class="hljs-string">'json'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fordate</span></span>: today.getFullYear() + (<span class="hljs-string"><span class="hljs-string">'0'</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(today.getMonth() + <span class="hljs-number"><span class="hljs-number">1</span></span>)).slice(<span class="hljs-number"><span class="hljs-number">-2</span></span>) + (<span class="hljs-string"><span class="hljs-string">'0'</span></span> + today.getDate()).slice(<span class="hljs-number"><span class="hljs-number">-2</span></span>), <span class="hljs-attr"><span class="hljs-attr">force</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }); };</code> </pre> <br>  Die Funktion getData wird exportiert und gibt die Ergebnisse des Aufrufs zurück.  Schauen wir uns an, was wir in der Datei index.js haben. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>)(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).Server(app); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> io = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'socket.io'</span></span>)(http); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./data.js'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Global variable to store the latest NHL results var latestData; // Load the NHL data for when client's first connect // This will be updated every 10 minutes data.getData().then((result) =&gt; { latestData = result; }); app.get('/', function(req, res){ res.sendFile(__dirname + '/index.html'); }); http.listen(3000, function(){ console.log('HTTP server started on port 3000'); }); io.on('connection', function(socket){ // when clients connect, send the latest data socket.emit('data', latestData); }); // refresh data setInterval(function() { data.getData().then((result) =&gt; { // Update latest results for when new client's connect latestData = result; // send it to all connected clients io.emit('data', result); console.log('Last updated: ' + new Date()); }); }, 300000);</span></span></code> </pre> <br>  Die ersten sieben Codezeilen oben initialisieren die erforderlichen Bibliotheken und rufen die globale Variable latestData auf.  Die neueste Liste der verwendeten Bibliotheken lautet: Express, HTTP-Server, erstellt mit Express, Socket.io sowie die gerade erstellte Datei data.js. <br><br>  Unter Berücksichtigung der Anforderungen füllt die Anwendung die neuesten Daten (latestData) für Clients aus, die beim ersten Start des Servers eine Verbindung herstellen: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Global variable to store the latest NHL results var latestData; // Load the NHL data for when client's first connect // This will be updated every 10 minutes data.getData().then((result) =&gt; { latestData = result; });</span></span></code> </pre> <br>  In den nächsten Zeilen wird der Pfad für die Hauptseite der Site festgelegt (in unserem Fall <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">localhost</a> : 3000 /) und der HTTP-Server angewiesen, Port 3000 abzuhören. <br><br>  Socket.io ist dann so konfiguriert, dass nach neuen Verbindungen gesucht wird.  Wenn sie erkannt werden, sendet der Server Ereignisdaten mit dem Inhalt der neuesten Variablen. <br><br>  Und schließlich erstellt der letzte Code das erforderliche Abfrageintervall.  Wenn es erkannt wird, wird die Variable "latestData" mit den Ergebnissen des API-Aufrufs aktualisiert.  Diese Daten übergeben dann das gleiche Ereignis an alle Clients. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// refresh data setInterval(function() { data.getData().then((result) =&gt; { // Update latest results for when new client's connect latestData = result; // send it to all connected clients io.emit('data', result); console.log('Last updated: ' + new Date()); }); }, 300000);</span></span></code> </pre> <br>  Wie wir sehen, wird ein Client, der eine Verbindung herstellt und ein Ereignis definiert, mit einer Socket-Variablen ausgegeben.  Auf diese Weise können Sie ein Ereignis an einen bestimmten verbundenen Client senden.  Innerhalb des Intervalls wird das globale io verwendet, um das Ereignis auszulösen.  Es sendet Daten an alle Clients.  Das Server-Setup ist abgeschlossen. <br><br><h3>  Wie wird es aussehen? </h3><br>  Lassen Sie uns nun am Frontend des Clients arbeiten.  In einem frühen Beispiel habe ich die Basisdatei index.html erstellt, die eine Verbindung zum Client herstellt, um Serverereignisse aufzuzeichnen und zu senden.  Jetzt werde ich die Funktionen der Datei erweitern. <br><br>  Da der Server uns ein JSON-Objekt sendet, verwende ich jQuery und eine jQuery-Erweiterung namens JsRender.  Dies ist eine Vorlagenbibliothek.  Dadurch kann ich eine HTML-Vorlage erstellen, mit der der Inhalt jedes NHL-Spiels auf bequeme Weise angezeigt wird.  Jetzt können Sie die Breite seiner Fähigkeiten sehen.  Der Code enthält mehr als 40 Zeilen, daher werde ich ihn in mehrere kleinere Abschnitte unterteilen und am Ende den gesamten HTML-Inhalt anzeigen. <br><br>  Folgendes wird zum Anzeigen von Spieldaten verwendet: <br><br><pre> <code class="javascript hljs">&lt;script id=<span class="hljs-string"><span class="hljs-string">"gameTemplate"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text/x-jsrender"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"game"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{:game.awayTeam.City}} {{:game.awayTeam.Name}} at {{:game.homeTeam.City}} {{:game.homeTeam.Name}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{if isUnplayed == "true" }} Game starts at {{:game.time}} {{else isCompleted == "false"}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Current Score: {{:awayScore}} - {{:homeScore}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{if currentIntermission}} {{:~ordinal_suffix_of(currentIntermission)}} Intermission {{else currentPeriod}} {{:~ordinal_suffix_of(currentPeriod)}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> {{:~time_left(currentPeriodSecondsRemaining)}} {{else}} 1st {{/if}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{else}} Final Score: {{:awayScore}} - {{:homeScore}} {{/if}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Die Vorlage wird mithilfe des Skript-Tags definiert.  Es enthält eine Vorlagenkennung und einen speziellen Skripttyp namens text / x-jsrender.  Die Vorlage definiert einen Div-Container für jedes Spiel, der eine Spielklasse zum Anwenden eines bestimmten Basisstils enthält.  In diesem Div befindet sich der Anfang der Vorlage. <br><br>  Das nächste Div zeigt das Gastteam und das Host-Team an.  Dies wird implementiert, indem der Name der Stadt und des Teams mit dem Spielobjekt aus MySportsFeeds-Daten kombiniert werden. <br><br>  Mit {{: game.awayTeam.City}} definiere ich ein Objekt, das beim Rendern der Vorlage durch einen physischen Wert ersetzt wird.  Diese Syntax wird von der JsRender-Bibliothek definiert. <br><br>  Wenn das Spiel nicht gespielt wird, erscheint eine Zeile, in der das Spiel mit {{: game.time}} beginnt. <br><br>  Bis das Spiel beendet ist, wird die aktuelle Punktzahl angezeigt: {{: awayScore}} - {{: homeScore}}.  Und schließlich ein kleiner Trick, der bestimmt, wie spät es jetzt ist, und um zu klären, ob es jetzt eine Pause gibt. <br><br>  Wenn die Variable currentIntermission in den Ergebnissen erscheint, verwende ich die durch ordinal_suffix_of definierte Funktion I, die die Periodennummer in den folgenden Text konvertiert: 1. (2., 3. usw.) Pause. <br><br>  Wenn es keine Unterbrechung gibt, suche ich nach dem Wert von currentPeriod.  Ordinal_suffix_of wird auch hier verwendet, um zu zeigen, dass sich das Spiel in der 1. (2., 3. usw.) Periode befindet. <br><br>  Zusätzlich wird eine andere Funktion, die ich als time_left definiert habe, verwendet, um die Anzahl der verbleibenden Sekunden bis zum Ende des Zeitraums zu konvertieren.  Zum Beispiel: 10:12. <br><br>  Der letzte Teil des Codes zeigt das Endergebnis an, wenn das Spiel beendet ist. <br><br>  Hier ist ein Beispiel dafür, wie es aussieht, wenn es eine gemischte Liste abgeschlossener Spiele, noch nicht abgeschlossener Spiele und noch nicht gestarteter Spiele gibt (ich bin kein sehr guter Designer, daher sieht das Ergebnis so aus, wie es sein sollte, wenn der Entwickler eine benutzerdefinierte erstellt Do-it-yourself-Anwendungsoberfläche): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb9/736/7c3/bb97367c3d8d9b7cbf74e0e69ea1ed6b.png" alt="Bild"><br><br>  Als Nächstes wird ein JavaScript-Snippet erstellt, das einen Socket, Hilfsfunktionen ordinal_suffix_of und time_left sowie eine Variable erstellt, die auf die generierte jQuery-Vorlage verweist. <br><br><pre> <code class="javascript hljs">&lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> socket = io(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tmpl = $.templates(<span class="hljs-string"><span class="hljs-string">"#gameTemplate"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> helpers = { <span class="hljs-attr"><span class="hljs-attr">ordinal_suffix_of</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> j = i % <span class="hljs-number"><span class="hljs-number">10</span></span>, k = i % <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (j == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; k != <span class="hljs-number"><span class="hljs-number">11</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i + <span class="hljs-string"><span class="hljs-string">"st"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (j == <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; k != <span class="hljs-number"><span class="hljs-number">12</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i + <span class="hljs-string"><span class="hljs-string">"nd"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (j == <span class="hljs-number"><span class="hljs-number">3</span></span> &amp;&amp; k != <span class="hljs-number"><span class="hljs-number">13</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i + <span class="hljs-string"><span class="hljs-string">"rd"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i + <span class="hljs-string"><span class="hljs-string">"th"</span></span>; }, <span class="hljs-attr"><span class="hljs-attr">time_left</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">time</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> minutes = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(time / <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> seconds = time - minutes * <span class="hljs-number"><span class="hljs-number">60</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> minutes + <span class="hljs-string"><span class="hljs-string">':'</span></span> + (<span class="hljs-string"><span class="hljs-string">'0'</span></span> + seconds).slice(<span class="hljs-number"><span class="hljs-number">-2</span></span>); } }; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Das letzte Fragment ist der Code zum Empfangen des Socket-Ereignisses und zum Rendern der Vorlage: <br><br><pre> <code class="hljs matlab">socket.on(<span class="hljs-string"><span class="hljs-string">'data'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">; $</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">('#data')</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">html</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(tmpl.render(data.scoreboard.gameScore, helpers)</span></span></span><span class="hljs-function">); });</span></span></code> </pre> <br>  Ich habe ein Trennzeichen mit einer Daten-ID.  Das Ergebnis des Template-Renderings (tmpl.render) schreibt HTML in diesen Container.  Was wirklich cool ist - die JsRender-Bibliothek kann ein Array von Daten aufnehmen, in diesem Fall data.scoreboard.gameScore, das jedes Element im Array durchläuft und ein Spiel pro Element erstellt. <br><br>  Hier ist die oben versprochene endgültige Version, in der HTML und JavaScript zusammengestellt werden: <br><br><pre> <code class="javascript hljs">&lt;!doctype html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Socket.IO Example</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"data"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"gameTemplate"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text/x-jsrender"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> &lt;div </span></span><span class="hljs-class"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span></span><span class="xml"><span class="javascript">=</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"game"</span></span></span></span><span class="xml"><span class="javascript">&gt; </span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span></span><span class="hljs-name"><span class="xml"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span></span><span class="xml"><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="xml"><span class="javascript"><span class="xml"> {{:game.awayTeam.City}} {{:game.awayTeam.Name}} at {{:game.homeTeam.City}} {{:game.homeTeam.Name}} </span></span></span><span class="hljs-tag"><span class="xml"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span></span><span class="hljs-name"><span class="xml"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span></span><span class="xml"><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span></span><span class="xml"><span class="javascript"> &lt;div&gt; {{</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript"> isUnplayed == </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"true"</span></span></span></span><span class="xml"><span class="javascript"> }} Game starts at {{:game.time}} {{</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">else</span></span></span></span><span class="xml"><span class="javascript"> isCompleted == </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"false"</span></span></span></span><span class="xml"><span class="javascript">}} &lt;div&gt;Current Score: {{:awayScore}} - {{:homeScore}}&lt;</span></span><span class="hljs-regexp"><span class="xml"><span class="javascript"><span class="hljs-regexp">/div&gt; &lt;div&gt; {{if currentIntermission}} {{:~ordinal_suffix_of(currentIntermission)}} Intermission {{else currentPeriod}} {{:~ordinal_suffix_of(currentPeriod)}}&lt;br/</span></span></span></span><span class="xml"><span class="javascript">&gt; {{:~time_left(currentPeriodSecondsRemaining)}} {{</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">else</span></span></span></span><span class="xml"><span class="javascript">}} </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">1</span></span></span></span><span class="xml"><span class="javascript">st {{/</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript">}} &lt;</span></span><span class="hljs-regexp"><span class="xml"><span class="javascript"><span class="hljs-regexp">/div&gt; {{else}} Final Score: {{:awayScore}} - {{:homeScore}} {{/i</span></span></span></span><span class="xml"><span class="javascript">f}} &lt;</span></span><span class="hljs-regexp"><span class="xml"><span class="javascript"><span class="hljs-regexp">/div&gt; &lt;/</span></span></span></span><span class="xml"><span class="javascript">div&gt; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/jsrender/0.9.90/jsrender.min.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/socket.io/socket.io.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> socket = io(); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> helpers = { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">ordinal_suffix_of</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">i</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> j = i % </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">10</span></span></span></span><span class="xml"><span class="javascript">, k = i % </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">100</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript"> (j == </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">1</span></span></span></span><span class="xml"><span class="javascript"> &amp;&amp; k != </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">11</span></span></span></span><span class="xml"><span class="javascript">) { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> i + </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"st"</span></span></span></span><span class="xml"><span class="javascript">; } </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript"> (j == </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">2</span></span></span></span><span class="xml"><span class="javascript"> &amp;&amp; k != </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">12</span></span></span></span><span class="xml"><span class="javascript">) { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> i + </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"nd"</span></span></span></span><span class="xml"><span class="javascript">; } </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript"> (j == </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">3</span></span></span></span><span class="xml"><span class="javascript"> &amp;&amp; k != </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">13</span></span></span></span><span class="xml"><span class="javascript">) { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> i + </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"rd"</span></span></span></span><span class="xml"><span class="javascript">; } </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> i + </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"th"</span></span></span></span><span class="xml"><span class="javascript">; }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">time_left</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">time</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> minutes = </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">Math</span></span></span></span><span class="xml"><span class="javascript">.floor(time / </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">60</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> seconds = time - minutes * </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">60</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> minutes + </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">':'</span></span></span></span><span class="xml"><span class="javascript"> + (</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'0'</span></span></span></span><span class="xml"><span class="javascript"> + seconds).slice(</span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">-2</span></span></span></span><span class="xml"><span class="javascript">); } }; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> tmpl = $.templates(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"#gameTemplate"</span></span></span></span><span class="xml"><span class="javascript">); socket.on(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'data'</span></span></span></span><span class="xml"><span class="javascript">, </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> (</span></span></span><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">data</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(data); $(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'#data'</span></span></span></span><span class="xml"><span class="javascript">).html(tmpl.render(data.scoreboard.gameScore, helpers)); }); </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="css"><span class="xml"><span class="css"> </span></span><span class="hljs-selector-class"><span class="xml"><span class="css"><span class="hljs-selector-class">.game</span></span></span></span><span class="xml"><span class="css"> { </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">border</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">1px</span></span></span></span><span class="xml"><span class="css"> solid </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">#000</span></span></span></span><span class="xml"><span class="css">; </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">float</span></span></span></span><span class="xml"><span class="css">: left; </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">margin</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">1%</span></span></span></span><span class="xml"><span class="css">; </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">padding</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">1em</span></span></span></span><span class="xml"><span class="css">; </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">width</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">25%</span></span></span></span><span class="xml"><span class="css">; } </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Jetzt ist es an der Zeit, die Node-Anwendung zu starten und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">localhost</a> : 3000 zu öffnen, um das Ergebnis zu sehen! <br><br>  Alle X Minuten sendet der Server ein Ereignis an den Client.  Der Client wiederum zeichnet die Spielelemente mit aktualisierten Daten neu.  Wenn Sie die Website offen lassen, werden die Ergebnisse der Spiele daher ständig aktualisiert. <br><br><h3>  Fazit </h3><br>  Das Endprodukt verwendet Socket.io, um einen Server zu erstellen, mit dem Clients eine Verbindung herstellen.  Der Server ruft die Daten ab und sendet sie an den Client.  Wenn ein Kunde Daten erhält, kann er die Ergebnisse schrittweise aktualisieren.  Dies reduziert die Belastung des Servers, da der Client nur dann handelt, wenn er ein Ereignis vom Server empfängt. <br><br>  Der Server kann Nachrichten an den Client und den Client wiederum an den Server senden.  Wenn der Server die Nachricht empfängt, führt er die Datenverarbeitung durch. <br><br>  Chat-Anwendungen funktionieren ähnlich.  Der Server empfängt eine Nachricht vom Client und sendet dann alle Daten an die verbundenen Clients, um anzuzeigen, dass jemand eine neue Nachricht gesendet hat. <br><br>  Ich hoffe, Ihnen hat dieser Artikel gefallen, denn als ich diese Echtzeit-Sportanwendung entwickelte, hatte ich gerade einen Berg an Vergnügen, den ich mit meinem Wissen teilen wollte.  Hockey ist schließlich eine meiner Lieblingssportarten! <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/a-/lc/ia/a-lciamy-fqodfq0pwnkdqlgpgy.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413957/">https://habr.com/ru/post/de413957/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413947/index.html">Implementierung der Arbeit mit dem Long Poll-Server im VKontakte-Client für Sailfish OS</a></li>
<li><a href="../de413949/index.html">Warum lesen wir immer noch Papierbücher?</a></li>
<li><a href="../de413951/index.html">Bringen Sie anderen bei, ein besserer Programmierer zu werden</a></li>
<li><a href="../de413953/index.html">Wann und warum lohnt es sich, ES6-Pfeilfunktionen zu verwenden, und wann nicht?</a></li>
<li><a href="../de413955/index.html">Kompletter Entwicklungszyklus des IoT-Geräts zur Steuerung der Poolheizung auf dem ESP8266 in einer Arduino-Umgebung</a></li>
<li><a href="../de413959/index.html">Kleinstes Docker-Image - Weniger als 1000 Byte</a></li>
<li><a href="../de413963/index.html">Mini CRM für kleine Unternehmen</a></li>
<li><a href="../de413965/index.html">Codeüberprüfung: Sie machen es falsch</a></li>
<li><a href="../de413967/index.html">Animal Crossing Entwicklermodus Reverse Engineering</a></li>
<li><a href="../de413969/index.html">Technopark Russky - innovative Entwicklung von Milliardenbudgets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>