<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¾â€ğŸš€ ğŸ›ŒğŸ» ğŸ¥¨ UmgebungsÃ¼berwachung im Serverraum (Bolid + Zabbix) ğŸ‘¨ğŸ¼â€ğŸŒ¾ ğŸ´â€â˜ ï¸ âš”ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der wahrscheinlich einfachste Weg fÃ¼r einen IT-Experten, das Problem der UmgebungsÃ¼berwachung im Serverraum zu lÃ¶sen, ist die Verwendung spezialisiert...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UmgebungsÃ¼berwachung im Serverraum (Bolid + Zabbix)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438788/">  Der wahrscheinlich einfachste Weg fÃ¼r einen IT-Experten, das Problem der UmgebungsÃ¼berwachung im Serverraum zu lÃ¶sen, ist die Verwendung spezialisierter Controller mit SNMP-Ausgabe (z. B. NetBotz oder NetPing).  Aber fÃ¼r diejenigen, die keine Angst vor Schwierigkeiten haben und eine kostengÃ¼nstige LÃ¶sung auf industriellem Niveau (mit Serienproduktion von GerÃ¤ten) erhalten mÃ¶chten, gibt es eine interessante Option mit dem Modbus-Protokoll. <br><br><img src="https://habrastorage.org/webt/wu/uc/mi/wuucmi1fiyi7sglvrsekrvey0pk.png"><br><a name="habracut"></a><br>  Im Folgenden werde ich ein Ãœberwachungssystem beschreiben, das auf in Russland hergestellten Komponenten basiert - NVP Bolid, und wir werden die Daten in Zabbix 4.0 â€zusammenfÃ¼hrenâ€œ.  NVP "Bolid" ist in Kreisen von FeuerlÃ¶schautomatisierungsgerÃ¤ten weithin bekannt, und die in Betracht gezogene LÃ¶sung wird diesen "Abdruck" tragen.  Ihre GerÃ¤te unterscheiden sich, gelinde gesagt, nicht in der Gestaltung und Nachdenklichkeit der GehÃ¤use, aber ... der Preis gleicht all diese MÃ¤ngel mehr als aus.  Es ist erwÃ¤hnenswert, sehr gute Dokumentation und mehr oder weniger normalen kostenlosen technischen Support. <br><br><h2>  Protokolle und Schnittstellen </h2><br>  Bevor wir zur Hardware Ã¼bergehen, werfen wir einen kurzen Blick auf die verwendeten Protokolle und Schnittstellen: <br><br>  <b>Modbus</b> : Ein Industrieprotokoll, das auf dem Prinzip â€Masterâ€œ - â€Slaveâ€œ basiert.  Es kann nur einen Master in einem Modbus-Netzwerk geben, der die Slaves abfragt und â€sagtâ€œ, was zu tun ist.  Als Ãœbertragungsmedium kann es die RS-485- (Modbus RTU) oder Ethernet- (Modbus TCP) Schnittstelle verwenden.  Theoretisch betrÃ¤gt die maximale Anzahl von GerÃ¤ten 247. <br><br>  <b>Orion</b> : proprietÃ¤res Protokoll der Firma NVP "Bolid", aufgebaut auf dem Prinzip "Master" (Master) - "Slave" (Slave).  Anscheinend wird die modifizierte RS-485-Schnittstelle als DatenÃ¼bertragungsmedium verwendet, wodurch die maximale LeitungslÃ¤nge 3 km (!) Erreichen kann.  Die maximale Anzahl von GerÃ¤ten betrÃ¤gt 127. <br><br>  <b>DLS</b> (Two-Wire Communication Line): proprietÃ¤res Protokoll der Firma NVP "Bolid", aufgebaut auf dem Prinzip "Master" - "Slave" (Master).  Es wird ein Kupferpaarkabel als DatenÃ¼bertragungsmedium verwendet (Twisted Pair-Kabel wird empfohlen).  Die maximale Anzahl von GerÃ¤ten betrÃ¤gt 127 + 1.  Topologie - Bei einem Bus (oder Ring) mit Abzweigungen kann die maximale LeitungslÃ¤nge 1,5 km erreichen (abhÃ¤ngig von Kabeltyp, Kabelquerschnitt und Anzahl der angeschlossenen GerÃ¤te). <br><br>  <b>RS-485</b> : Schnittstelle der physischen Schicht, verwendet "Twisted Pair" (ein "2-Draht" - oder zwei "4-Draht" -Paare fÃ¼r die DatenÃ¼bertragung, das zweite ist weniger verbreitet).  Die angegebene maximale LeitungslÃ¤nge betrÃ¤gt 1,2 km.  Topologie ist ein Bus. <br><br>  Wie Sie sehen kÃ¶nnen, werden ziemlich weitreichende Kommunikationsleitungen verwendet.  In allen Protokollen wird die GerÃ¤teadressierung durch â€Handlesâ€œ festgelegt (Vorkonfiguration). <br><br><h2>  Sensoren </h2><br>  Das System umfasst das AnschlieÃŸen von â€speziellenâ€œ (proprietÃ¤ren) Adresssensoren (genauer gesagt â€Detektorenâ€œ, dh GerÃ¤te mit integriertem Sensor). Sie kÃ¶nnen jedoch auch â€normaleâ€œ Nichtadressen mithilfe von Adresserweiterern (von 1 bis 8 EingÃ¤ngen) anschlieÃŸen.  Die Verwendung von adressierbaren Detektoren bietet zwei Vorteile: Fast alle adressierbaren GerÃ¤te erhalten Strom Ã¼ber die Signalleitung (d. H. Es ist nicht erforderlich, eine separate 12-V-Stromleitung zu versorgen), und es ist nicht erforderlich, den Adress-Expander irgendwo zu platzieren.  Sensoren sind an den <abbr title="Zweidraht-Kommunikationsleitung">DPS angeschlossen</abbr> . <br>  Das Angebot an "EndgerÃ¤ten" ist ziemlich breit, aber ich werde das geben, das zur LÃ¶sung unseres Problems erforderlich sein kann: <br><br><ul><li>  S2000-VT - kombinierter Temperatur- und Feuchtigkeitssensor fÃ¼r den Innenbereich (IP41).  Hat ein Zertifikat des MessgerÃ¤ts, der Fehler betrÃ¤gt nur 0,5 Â° C und der empfohlene Verkaufspreis von nur 1200 Rubel! </li><li>  S2000-SMK (und seine Variationen) - Sensor â€TÃ¼r Ã¶ffnenâ€œ (Magnetkontaktdetektor, Reedschalter).  Empfohlener Verkaufspreis - 300 Rubel .; </li><li>  S2000-DZ - Punktflutungssensor (in Verbindung mit Realty, daher ist der Fall "unformatiert").  Empfohlener Verkaufspreis - 800 Rubel .; </li><li>  -2000-1, 2000-2, 2000-8 - Adress-Expander fÃ¼r 1, 2 und 8 Verbindungen kÃ¶nnen als "EmpfÃ¤nger" von Signalen vom Typ "Trockenkontakt" (Ein / Aus) von anderen GerÃ¤ten (z. B. von einem FeuerlÃ¶schgerÃ¤t) verwendet werden oder Klimapumpen); </li><li>  S2000-SP2 - Relaisblock (fÃ¼r 2 AusgÃ¤nge), mit dem Sie GerÃ¤te steuern kÃ¶nnen (z. B. eine Alarmlampe - eine Lichtanzeige).  Empfohlener Verkaufspreis - 1200 Rubel. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Aussehen der Sensoren</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wy/ff/2k/wyff2kk8bfwz0bcq5feyh-kvja4.png"><br><br></div></div><br>  Eine vollstÃ¤ndige Liste der GerÃ¤te finden Sie auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Website des Herstellers</a> . <br><br><h2>  Controller </h2><br>  Die "Reihe" der Steuerungen besteht, wenn ich so sagen darf, aus drei Modellen: <br><br><ul><li>  S2000-KDL - Basismodell (die Bezeichnung steht fÃ¼r "System 2000 - Controller einer Zweidraht-Kommunikationsleitung"); </li><li>  S2000-KDL-2I - zusÃ¤tzliche galvanische Trennung fÃ¼r RS-485 und DPS; </li><li>  S2000-KDL-Modbus - Dem S2000-KDL-2I-Design wurde ein Modbus S2000-PP-Protokollkonverter hinzugefÃ¼gt. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Das Aussehen der Controller</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gw/wu/nb/gwwunbbgi8jsdrp4lirdesxxoyi.png"><br></div></div><br>  Die Verwendung von S2000-KDL-Modbus ist optimaler, es ist jedoch auch mÃ¶glich, S2000-KDL / C2000-KDL-2I mit dem in der NÃ¤he installierten Protokollkonverter S2000-PP zu verwenden, der Ã¼ber ein SchalttafelgehÃ¤use verfÃ¼gt. <br><br>  Der Controller spielt die Rolle des â€Leaderâ€œ in der <abbr title="Zweidraht-Kommunikationsleitung">DLS-</abbr> Leitung (nur eine DPS-Leitung kann an einen Controller angeschlossen werden), und auf der RS-485 Orion-Leitung fungiert er bereits als â€Slaveâ€œ und es ist nicht mÃ¶glich, Daten â€direktâ€œ von ihm zu erfassen.  Zur Datenerfassung in der RS-485 Orion-Leitung wird die sogenannte 2000- oder 2000--Konsole (einschlieÃŸlich der integrierten Version) verwendet, die bereits standardisierte DatenÃ¼bertragungsschnittstellen aufweist. <br><br>  Die folgenden Steuerungen kÃ¶nnen auch die folgenden Eigenschaften unterscheiden: <br><br><ul><li>  sich auf einen konfigurierbaren Typ beziehen, nicht auf einen programmierbaren (d. h. Sie mÃ¼ssen nur die Parameter konfigurieren und kein Programm entwickeln); </li><li>  UnterstÃ¼tzung in <abbr title="Zweidraht-Kommunikationsleitung">DPS</abbr> bis zu 127 adressierbaren GerÃ¤ten (S2000-VT hat zwei Adressen), und viele Kommissare empfehlen nicht, mehr als 100-110 zu verwenden. </li><li>  doppelter Eingang fÃ¼r Stromversorgung DC 12-24V; </li><li>  Nicht allzu praktisches GehÃ¤usedesign (alle angeschlossenen Kabel kÃ¶nnen nicht im GerÃ¤tegehÃ¤use versteckt werden und mÃ¼ssen von der RÃ¼ckseite des GerÃ¤ts entfernt werden). </li></ul><br>  FÃ¼r die Systemfehlertoleranz kÃ¶nnen Sie die folgenden MaÃŸnahmen ergreifen (die optional sind): <br><br><ul><li>  Ringschleife - Eine Schleifenunterbrechung an einer Stelle hat keinen Einfluss auf das Vorhandensein von Signalen von adressierbaren Sensoren. </li><li>  Die Verwendung von VerzweigungsisolationsblÃ¶cken (BRIZ) - ermÃ¶glicht es Ihnen, radiale Verzweigungen vorzunehmen sowie das Schleifensegment zu isolieren, in dem ein Kurzschluss "DPS +" und "DPS-" aufgetreten ist. </li></ul><br>  WICHTIG: Die Controller werden stÃ¤ndig mit neuer Firmware ausgestattet, die Fehler beseitigt und Funktionen hinzufÃ¼gt. Die Firmware C2000-KDL und C2000-KDL-2I ist nicht kompatibel. <br><br><h2>  Modbus-Verbindung </h2><br>  Wie zuvor beschrieben, kann entweder ein C2000-Modbus-Controller oder ein C2000-PP-Wandler verwendet werden.  Beide Schemata sehen die Ausgabe von Signalen unter Verwendung des Modbus RTU 2-Draht-Protokolls unter Verwendung von RS-485 als Slave-GerÃ¤t vor (unser Host ist Zabbix oder ein SCADA-System).  FÃ¼r die Verbindung zum Server kÃ¶nnen zwei Methoden verwendet werden: <br><br><ul><li>  Bevorzugt - Modbus RTU / Modbus TCP-Konverter mit Verbindung zu demselben lokalen Netzwerk, in dem sich unser Server mit Software befindet; </li><li>  GÃ¼nstig - RS-485 / USB-Konverter mit direkter Verbindung zum Server.  Ich stelle fest, dass es viele Beschwerden Ã¼ber die ZuverlÃ¤ssigkeit dieser USB-Sticks gibt (Sie kÃ¶nnen fast jeden nehmen, ich habe aus China fÃ¼r 100 Rubel bestellt, ein paar RS-232 / RS-485-Konverter und einen USB / RS-232-Adapter verwendet und alles hat weiter funktioniert!). </li></ul><br>  Es sind zwei Schemata zum Ãœbertragen von Ereignissen an das Modbus-Protokoll mÃ¶glich: <br><br><ul><li>  direkt von 2000- / C2000--Modbus, wenn diese GerÃ¤te im "Orion-Master" -Modus (ausgewÃ¤hlt durch einen Jumper auf der Platine) arbeiten und als Interrogator des "Orion" -Systems fungieren; </li><li>  Verwenden der S2000M-Fernbedienung, wenn Informationen von den Steuerungen erfasst und erst dann Ã¼ber S2000-PP / C2000-KDL-Modbus (Orion-Slave-Modus) an Modbus Ã¼bertragen werden.  Dieses Schema ist insofern gut, als die Fernbedienung als â€lokales Terminalâ€œ verwendet werden kann (siehe Ereignisse auf dem eingebauten LCD-Bildschirm) und auch weiterhin Ereignisse bei einem Serverausfall mit Ãœberwachungssoftware aufzeichnet.  Minus: Das Setup ist etwas komplizierter und die Fernbedienung sieht sehr spezifisch aus. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Beispiele fÃ¼r Systemschaltungen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/u6/se/lr/u6selr6hievry0qlrqy77naclpm.png"><br><br><img src="https://habrastorage.org/webt/lr/mr/ny/lrmrnydyc3k7okcrwtfinacdvj8.png"><br><br><img src="https://habrastorage.org/webt/fz/hb/gf/fzhbgfqp5l5crnlkazfbvabmemg.png"><br></div></div><br><h2>  Stromversorgung und Installation </h2><br>  FÃ¼r die Stromversorgung ist eine 12-V-Gleichstromversorgung erforderlich, die vorzugsweise stabilisiert und auf einer DIN-Schiene montiert ist.  Seine Leistung (normalerweise entweder in mA oder A angegeben) kann grob aus der Berechnung von 1 Regler - 500 mA ausgewÃ¤hlt werden.  Ich wÃ¼rde die Verwendung eines redundanten Netzteils (mit eingebautem Akku, RIP) nur empfehlen, wenn die S2000M-Fernbedienung verwendet wird.  Stellen Sie auÃŸerdem sicher, dass die Stromquelle an dieselbe unterbrechungsfreie Stromversorgung (USV) angeschlossen ist wie der Server des Ãœberwachungssystems. <br><br>  NatÃ¼rlich kÃ¶nnen Sie all dies an der Wand montieren, aber Ã¼berlassen Sie es den Installateuren fÃ¼r Feuer- und Sicherheitsalarme, und wir verwenden eine 3U-DIN-Schiene fÃ¼r die Installation in einem 19-Zoll-Schrank (z. B. PSM-3U oder Cabeus CMO mit demselben Artikel, mÃ¼ssen Sie die Frontplatte wegwerfen ) Bei Verwendung der Fernbedienung S2000-M kÃ¶nnen Sie einen 19 "4U-Stecker (vorzugsweise perforiert) verwenden, der als Montageplatte dient und an dem bereits eine DIN-Schiene fÃ¼r die Klemmen und die Steuerung befestigt ist.  Minus der Entscheidung - die AusrÃ¼stung steht fÃ¼r die Montage 19 "Ebene. <br><br>  Das Zusammenbauen und Montieren eines Komponentensystems sollte keine Fragen aufwerfen, aber ich mache auf Folgendes aufmerksam: <br><br><ul><li>  Die meisten Sensoren haben ein kleines StÃ¼ck hervorstehendes Kabel.  Um das Kabel zu vergrÃ¶ÃŸern, kÃ¶nnen Sie entweder LÃ¶tmittel mit Schrumpfschlauch oder eine Zwei-Paar-Schwenkbox KS-2 (kompakt, aber die Verarbeitung ist "lahm") oder den Anschluss RJ11 (RJ45) verwenden. </li><li>  Vor der Montage in den Sensoren mÃ¼ssen deren Adressen registriert (wie unten beschrieben) und markiert werden. </li><li>  Beim AnschlieÃŸen von Sensoren muss die PolaritÃ¤t von â€DLS +â€œ und â€DPS-â€œ beachtet werden (siehe Dokumentation - welche Farbe hat DPS +, normalerweise farbig) - wenn Sie es verwechseln, wird der Sensor im System nicht erkannt. </li></ul><br>  FÃ¼r diejenigen, die nicht lÃ¶ten mÃ¶chten, aber â€Chipsâ€œ quetschen mÃ¶chten, kÃ¶nnen Sie die unten beschriebene Option verwenden (wahrscheinlich ist sie immer noch besser als RJ11 - um die DPS-Leitung nicht versehentlich mit dem Server zu verbinden). <br><br>  Es wird benÃ¶tigt: <br><br><ul><li>  Twisted Pair Kabel 2 Paare, ungeschirmt; </li><li>  "Beutel" mit RJ11-Steckern (6P4C oder 6P6C); </li><li>  RJ11-Splitter mit Sockel-EingÃ¤ngen (es gibt eine Vielzahl von Optionen zu sehr gÃ¼nstigen Preisen). </li></ul><br>  Bei einem Paar starten wir DPS, bei dem anderen beispielsweise 12 V DC.  Sensoren Ã¼ber Splitter anschlieÃŸen. <br><br><div class="spoiler">  <b class="spoiler_title">ErklÃ¤rendes Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xf/v-/93/xfv-93ihmj39n_uhdyhhlqidgjg.png"><br></div></div><br><h2>  MontagestÃ¤nder </h2><br>  FÃ¼r den â€praktischenâ€œ Teil wurde ein StÃ¤nder zusammengestellt, bestehend aus: <br><br><ul><li>  Protokollkonverter C2000-PP, hergestellt von NVP Bolid; </li><li>  Controller S2000-KDL, hergestellt von NVP "Bolid"; </li><li>  Thermohygrometer (kombinierter Temperatur- und Feuchtigkeitssensor) C2000-VT, hergestellt von NVP Bolid; </li><li>  Magnetkontaktdetektor S2000-SMK, hergestellt von NVP "Bolid"; </li><li>  Punktlecksensor S2000-DZ, hergestellt von Rielta; </li><li>  Adress-Extender S2000-AP1 isp.  02 Produktion von NVP "Bolid"; </li><li>  Volumendetektor Photon-10M, hergestellt von "Rielta" (wie ein "Haufen"); </li><li>  12V-AT / 12 / 1.5 DIN-Netzteil von AccordTec; </li><li>  RS-485 / USB-Adapter von <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aliexpress gekauft</a> (auf dem gÃ¤ngigen CH340G-Chip definiert Linux ihn als â€QinHeng Electronics HL-340 USB-Seriell-Adapterâ€œ).  Es wurde interessant, wie das System in der billigsten Konfiguration funktioniert. </li><li>  TONK 1811 Thin Client der TONK Group of Companies (wurde auf Avito fÃ¼r 500 Rubel gekauft) auf einem Intel Atom N270-Prozessor mit integrierter GMA950-Grafik. </li></ul><br><img src="https://habrastorage.org/webt/6b/kr/ed/6bkred606ln2axp3wlcrztumlly.png"><br><br><div class="spoiler">  <b class="spoiler_title">Verfeinerung des Thin Clients und des Erscheinungsbilds des Standes</b> <div class="spoiler_text">  Der Thin Client war etwas "fertig": <br><br><ul><li>  Ein 2-GB-DOM-Modul mit Windows XP-Embedded wurde durch 2,5-ATA-60-GB-Festplatten von einem alten Laptop ersetzt (ich musste ein Kabel kaufen, aus irgendeinem Grund hat die SATA-Festplatte nicht aufgenommen - sie enthielt den SATA-Anschluss im BIOS). </li><li>  ErhÃ¶hung des DDR2-SO-DIMM-RAM von 1 GB auf 2 GB; </li><li>  Linux Mint 19.1 "Tessa" Xfce Edition installiert und Remotedesktop mit TightVNC konfiguriert; </li><li>  Das KÃ¼hlsystem wurde â€verfeinertâ€œ - es reduzierte den KÃ¼hlkÃ¶rper so, dass die Festplatte fast â€bÃ¼ndigâ€œ mit dem GehÃ¤use Ã¼bereinstimmt, entfernte die obere Abdeckung und â€fÃ¼gteâ€œ oben einen 120-mm-LÃ¼fter hinzu, der Ã¼ber einen Widerstand angeschlossen war.  Sobald alle â€Bremsenâ€œ verschwunden waren, wurde es ziemlich vernÃ¼nftig zu arbeiten. </li></ul><br><br><img src="https://habrastorage.org/webt/ct/ri/5v/ctri5vgqehkummqppp22cd3k2uw.jpeg"><br></div></div><br><h2>  Konfigurieren Sie die Bolid-AusrÃ¼stung </h2><br>  Alle Einstellungen werden in der Windows-Umgebung vorgenommen. Bevor Sie mit der Arbeit beginnen, mÃ¼ssen Sie den Treiber auf dem RS-485 / USB-Adapter sowie zwei â€Superâ€œ -Programme des NVP â€Bolidâ€œ installieren, die kostenlos geliefert werden: <strong>Orion-prog</strong> und <strong>Uprog</strong> .  DarÃ¼ber hinaus werden die GerÃ¤te separat mit dem RS-485 / USB-Adapter an die RS-485-AnschlÃ¼sse des Orion AB angeschlossen (direktes Layout wird verwendet und nicht wie bei COM-AnschlÃ¼ssen). <br><br>  WICHTIG: Bei allen nachfolgenden Schritten auf dem S2000-PP muss der XP1-Jumper auf der Platine entfernt werden. <br><br>  Schritt 1. Stecken Sie den RS-485 / USB-Adapter in den USB-Anschluss und suchen Sie im GerÃ¤te-Manager, welche COM-Port-Nummer dem Adapter zugewiesen ist.  Die Treiber fÃ¼r den Adapter mÃ¼ssen ohne Ausrufezeichen im â€GerÃ¤te-Managerâ€œ installiert werden. <br><br>  Schritt 2. FÃ¼hren Sie im Auftrag des Administrators Orion-prog aus, wÃ¤hlen Sie den gewÃ¼nschten COM-Anschluss aus, fÃ¼hren Sie eine Suche durch und sehen Sie sich die Firmware-Version des GerÃ¤ts an.  Besuchen Sie die offizielle Website des Herstellers und Ã¼berprÃ¼fen Sie, ob eine neuere Firmware vorhanden ist. FÃ¼hren Sie gegebenenfalls (hÃ¶chstwahrscheinlich erforderlich) ein Update durch (zum Zeitpunkt dieses Schreibens: 1.32 fÃ¼r C2000-PP, 2.22 fÃ¼r C2000-KDL). <br><br><div class="spoiler">  <b class="spoiler_title">Instrumentenfirmware in Bildern</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/6i/lm/py/6ilmpyshwlwgygxsep6myrt-yzm.gif"><br></div></div><br>  * Firmware 1.32 in der Tat wurde ich "schief" installiert - in Uprog wurde die Konfiguration nicht vom GerÃ¤t gelesen.  Daher wurde ein Rollback auf 1,31 durchgefÃ¼hrt. <br><br>  Schritt 3. Festlegen der Adresse fÃ¼r GerÃ¤te (zuerst mit S2000-PP, z. B. 2 und dann mit S2000-KDL - 3).  FÃ¼hren Sie dazu Uprog aus - alle GerÃ¤te haben eine Standardadresse von 127, daher mÃ¼ssen Sie die GerÃ¤te jeweils am Anfang konfigurieren.  Ein ausfÃ¼hrlicheres Video des Herstellers finden Sie auf <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">YouTube</a> . <br><br>  Schritt 4. Nach dem Einstellen der Adresse in S2000-KDL mÃ¼ssen die Adressen der Sensoren in der Zweidraht-Kommunikationsleitung (DLS) eingestellt werden.  Sie haben auch die Standardadresse 127 (und der Kreis mit dem Sensor in Uprog ist nicht hervorgehoben).  Wir lesen die Konfiguration des GerÃ¤ts (Strg + F3) und verbinden die Sensoren nacheinander mit den AusgÃ¤ngen des DLS, wobei wir die Adressen einstellen.  Wenn Sie im KontextmenÃ¼ â€AU-Typ anfordernâ€œ auf den Sensor zeigen, kÃ¶nnen Sie den Sensortyp oder â€ADC-AU-Anforderungâ€œ angeben - prÃ¼fen Sie, ob der Sensor funktioniert (z. B. fÃ¼r einen Magnetkontaktdetektor des ADC beim SchlieÃŸen: 100 und beim Ã–ffnen: 50).  TatsÃ¤chlich habe ich die folgende Adresskonfiguration: 1 - C2000-SMK-Reed-Schalter, 2 - C2000-VT-Temperatur, 3 - C2000-VT-Luftfeuchtigkeit, 4 - C2000-DZ-Leck, 5 - C2000-AP1-Adress-Expander-ISP.  02 (mit angeschlossenem Photon-10M-Volumendetektor). <br><br><div class="spoiler">  <b class="spoiler_title">Adressierung von Sensoren in Bildern</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j9/vo/dk/j9vodkzjmmydzvrsk377m3zinok.gif"><br></div></div><br>  Wechseln Sie als NÃ¤chstes zur Registerkarte â€Eingabenâ€œ und gehen Sie wie folgt vor: <br><br><ul><li>  Geben Sie die Sensortypen an: fÃ¼r Temperatur - 10, zur Messung der Luftfeuchtigkeit - 15, fÃ¼r alle anderen - 6 (technologisch); </li><li>  FÃ¼r technologische Eingaben stellen wir "Wiederherstellungszeit, s" ein. Dies ist die Zeit, nach der die Schleife nach Erhalt des Status "Verletzung" in den Status "Normal" zurÃ¼ckkehrt.  Es ist notwendig, die Anzahl von mindestens dem Abfrageintervall in Zabbix anzugeben (ich habe 10 Sekunden gebraucht); </li><li>  Schalten Sie "Steuerung der AU-Anzeige" (0), "Ãœberwachung auf Unterbrechung und Kurzschluss" und "Ãœberwachung des Status der Pufferbatterie" aus, um die Einrichtung zu vereinfachen. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Konfigurieren der EingÃ¤nge fÃ¼r S2000-KDL in Bildern</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/90/cn/68/90cn68wqswa16_nt7pqxzy830de.gif"><br></div></div><br>  Nach all den â€Manipulationenâ€œ mit C2000-KDL fÃ¼hren wir den â€Konfigurationsdatensatz im Instrumentâ€œ durch. <br><br>  Schritt 5. Konfigurieren Sie S2000-PP. <br>  Auf der Registerkarte "GerÃ¤t" werden die Einstellungen im Bild angezeigt (dies sind die am hÃ¤ufigsten ausgefÃ¼hrten Einstellungen, die fÃ¼r die meisten GerÃ¤te standardmÃ¤ÃŸig verwendet werden).  Der COM-Anschluss des RS-485 / USB-Adapters und jedes andere an das Modbus-Netzwerk angeschlossene GerÃ¤t sollte Ã¤hnliche Einstellungen haben.  Ich habe die Adresse 11 fÃ¼r das S2000-PP-GerÃ¤t im Modbus-Netzwerk ausgewÃ¤hlt (die Adresse im Orion-System ist 2!). <br><br><img src="https://habrastorage.org/webt/ej/6y/31/ej6y31hxzfnze6nzx29rjcnsfwk.png"><br><br>  Dann gehen wir zur Registerkarte "GerÃ¤te" und beginnen, die "Zonentabelle" auszufÃ¼llen: <br><br><ul><li>  In der ersten Spalte habe ich â€3â€œ angegeben. Dies ist die Adresse des S2000-KDL-GerÃ¤ts im Orion-System. </li><li>  Alarmschleifennummer ("Alarmschleife") - Dies sind die Adressen der Sensoren (tatsÃ¤chlich die Alarmschleife = Adresse, wir kÃ¶nnen mehrere Adressen Ã¼berspringen, wenn wir keine Informationen von ihnen nehmen mÃ¶chten); </li><li>  Modbus Abschnitt Nr. - Sie kÃ¶nnen unsere Sensoren in Gruppen gruppieren.  Zur Vereinfachung - ich habe dies nicht getan und jedem 1 Abschnitt zugeschrieben; </li><li>  Der Zonentyp ist ein sehr wichtiger Parameter.  Wir wÃ¤hlen es je nach Sensortyp aus. </li></ul><br><img src="https://habrastorage.org/webt/8g/bo/ea/8gboea_ibzpk6nr04myidkbgtru.png"><br><br>  Nach dem Einstellen von S2000-PP fÃ¼hren wir die â€Datensatzkonfiguration im GerÃ¤tâ€œ durch. <br><br>  Schritt 6. Kombinieren Sie C2000-PP und C2000-KDL Ã¼ber RS-485 Orion zu einem Netzwerk, verbinden Sie die Sensoren mit C2000-KDL (Sie kÃ¶nnen zwei AnschlÃ¼sse verwenden) und verbinden Sie den RS-485 / USB-Adapter mit dem Modbus C2000-PP-Ausgang.  Wir setzen den XP1-Jumper in die geschlossene Position (wichtig: Nach der Installation des Jumpers mÃ¼ssen Sie das GerÃ¤t neu starten, indem Sie die Versorgungsspannung zurÃ¼cksetzen).  Alles - das System ist "bereit fÃ¼r den Kampf". <br><br>  Wir Ã¼berprÃ¼fen die FunktionsfÃ¤higkeit im kostenlosen Konsolenprogramm <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Modpoll Modbus Master Simulator</a> (im Folgenden als â€Modpollâ€œ bezeichnet), beispielsweise unter der Firmware-Adresse â€S2000-PPâ€œ oder durch Senden von Informationen von S2000-KDL an â€40000â€œ - dies ist der erste Sensor: <br><br><img src="https://habrastorage.org/webt/ij/hv/go/ijhvgoynxeyxwua5abdcgvapi3u.png"><br><br>  Die Firmware "zur Einarbeitung" kann hier heruntergeladen <a href="">werden</a> . <br><br><h2>  Zabbix-Setup </h2><br>  <font color="red">Warnung: Zabbix wurde zum ersten Mal konfiguriert, wie Linux Mint (da es unter Windows kein Zabbix gibt) :)</font> <br><br>  Nach der Installation von Zabbix mÃ¼ssen Sie die Pakete <i>autoconf</i> , <i>automake</i> , <i>libtool</i> , <i>pkg-config</i> und dann das Erweiterungsmodul <i>libzbxmodbus installieren</i> .  Es gibt einen separaten Artikel Ã¼ber ihn auf <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HabrÃ©</a> (ich werde stÃ¤ndig darauf verweisen) und er wurde kÃ¼rzlich aktualisiert, nur um mit Zabbix 4.0 zu arbeiten.  Der Artikel enthÃ¤lt auÃŸerdem detailliertere Informationen zum Modbus-Protokoll.  Das Modul selbst und mehr oder weniger detaillierte Anweisungen finden Sie auf <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> . <br><br>  Kleine Unterschiede in der Installation von der auf GitHub angegebenen: <br><br><pre><code class="plaintext hljs">... ./configure --prefix=/etc/zabbix --enable-zabbix-3.2 ... sudo make install</code> </pre> <br>  Bei der Untersuchung der Funktionsweise des <i>libzbxmodbus-</i> Moduls wurde klar, dass das Schema mit der Fernbedienung S2000M nicht angewendet werden kann, da in diesem Fall die Daten von Thermohygrometern folgendermaÃŸen aussehen: Schreiben Sie die Nummer der gewÃ¼nschten Zone in Register 46179 und sammeln Sie dann Daten aus Register 46328 - d. H.  sehr nicht trivial (in "groÃŸen" SCADA-Systemen kann dies beispielsweise in MasterSCADA implementiert werden). <br><br>  In der Konfigurationsdatei <i>etc / zabbix / zabbix_server.conf schreiben wir die Erweiterungslinks</i> und verbinden die Hardware mit Zabbix mit dem Server.  Ich musste keine Treiber fÃ¼r den RS-485 / USB-Adapter installieren, aber ich verstand immer noch nicht, wie ich herausfinden sollte, welche USB-Nummer verwendet werden soll. Es ist gut, dass die Verbindung zu <i>/ dev / ttyUSB0</i> funktioniert hat (Sie kÃ¶nnen sehen, dass das GerÃ¤t mit dem Befehl <i>lsusb</i> im System <i>gefunden wurde</i> ). <br><br>  Wie bei Windows Ã¼berprÃ¼fen wir mit dem Modpoll-Dienstprogramm (ich habe Linux i386 ausgefÃ¼hrt), ob die Hardware verbunden ist und Informationen von ihnen verfÃ¼gbar sind: <br><br><img src="https://habrastorage.org/webt/wn/8_/zz/wn8_zz98bldyf7hzc5zdkc90v80.png"><br><br>  Da der Artikel den Konfigurationsprozess am Beispiel von Zabbix 2.2 beschreibt - die BenutzeroberflÃ¤che ist dort etwas anders -, werde ich ErklÃ¤rungen und Bilder der Einstellungen bereitstellen. <br><br><p>  Schritt 1. Wir erstellen einen Netzwerkknoten und eine Gruppe, in die unsere Knoten aufgenommen werden (z. B. einen Knoten - "UmgebungsÃ¼berwachung" und eine Gruppe - "Technische Infrastruktur"): <br>  Einstellungen&gt; Hosts&gt; Host erstellen&gt; Geben Sie unsere Namen ein&gt; HinzufÃ¼gen <br><br><img src="https://habrastorage.org/webt/vj/cd/fi/vjcdfibmwzvcm7vudrfubf4nuaa.png"><br><br>  Schritt 2. Erstellen Sie die Datenelemente.  In dem Artikel wird empfohlen, Vorlagen zu erstellen. Da unser System jedoch keine doppelten Elemente enthÃ¤lt, werde ich diesen Schritt Ã¼berspringen.  Wenn wir beispielsweise mehrere Klimaanlagen Ã¼ber Modbus angeschlossen hÃ¤tten, kÃ¶nnten wir die SystemfunktionalitÃ¤t nutzen. <br><br>  Einstellungen&gt; Netzwerkknoten&gt; Klicken Sie in der Zeile mit dem Namen unseres Knotens "UmgebungsÃ¼berwachung" auf "Datenelemente"&gt; im angezeigten Fenster auf "Datenelement erstellen". <br><br>  Wir fangen an, unsere Sensoren zu "hÃ¤mmern": <br><br><img src="https://habrastorage.org/webt/j_/ei/9n/j_ei9nphfowd7sgjp6r8u3r9xyk.png"><br><br>  Kleinere Nuancen: <br><br></p><ul><li>  Der Artikel verwendet die Syntax der Funktion <em>"modbus_read_registers"</em> und gemÃ¤ÃŸ der Beschreibung von GitHub <em>"modbus_read"</em> - die zweite Option ist kÃ¼rzer und funktioniert; </li><li>  Anstelle der Makros <em>{$ MODBUS_PORT}</em> und <em>{$ MODBUS_SLAVE} kÃ¶nnen</em> Sie den Port in der Form <em>/ dev / ttyUSB0</em> und " <em>11</em> " angeben. Dies ist jedoch unpraktisch, wenn Sie spÃ¤ter den USB-Port oder die Adresse des S2000-PP Ã¤ndern mÃ¼ssen. </li><li>  In der Dokumentation heiÃŸt es, dass Sie sich an folgende Adresse wenden mÃ¼ssen, um den Status der Zone (Spalte "Modbus-Zonennummer") auf S2000-PP anzufordern: "Registeradresse 40000 + M, wobei M = (Zone Nr. â€“1)" - dies ist der Fortschritt: "Zonennummer. <strong>minus</strong> 1 " </li><li>  FÃ¼hren Sie keine sehr hÃ¤ufige Zeitumfrage durch: S2000-PP gibt einen Fehler â€Ausnahmefehler 15â€œ zurÃ¼ck - das GerÃ¤t hat keine Zeit, die Daten vorzubereiten (dies wird durch das konstante Leuchten der Anzeige auf dem GerÃ¤t ausgedrÃ¼ckt). </li><li>  fÃ¼r Temperatur- und Feuchtigkeitsdaten werden die Register 3000 -... genommen </li><li>  Im Fenster â€Datenelementeâ€œ befindet sich auch die gewÃ¼nschte Registerkarte â€Vorverarbeitungâ€œ.  Hier kÃ¶nnen Sie bearbeiten, was "am Ende" angezeigt wird.  Temperatur und Luftfeuchtigkeit ergeben sich aus den Auslesewerten, die durch 256 geteilt werden mÃ¼ssen: â€Benutzerfaktorâ€œ - 0,0039 (dh 1/256); </li><li>  FÃ¼r diskrete Reedschalter, Lecksensoren usw.  Sie mÃ¼ssen auch die "Wertanzeige" verwenden. Dies liegt an der Art und Weise, wie Informationen bereitgestellt werden. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Einstellen der Datenkonvertierung in Bildern</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/pj/g1/yr/pjg1yrlg-hfu83bgzuch6rke-xg.png"><br><br><img src="https://habrastorage.org/webt/k4/7o/hu/k47ohudcuf9ycomoxbdebii6kvu.png"><br></div></div><br>  Ein wenig darÃ¼ber, wie die Daten beim Abrufen von Zonen bereitgestellt werden. <br>  Angenommen, Sie haben eine Antwort im Dezimalformat 9148 (D) erhalten.  Wir werden es in das hexadezimale Format (HEX) Ã¼bersetzen: 23BC erhalten - gemÃ¤ÃŸ den Anweisungen fÃ¼r das S2000-PP-GerÃ¤t sind dies zwei Ereignisse mit den Codes 23 (HEX) / 35 (D) und BC (HEX) / 188 (D).  Weiter geht es zu Tabelle 5. â€Liste der Ereignisse (AL-ZustÃ¤nde) des Orion-Systemsâ€œ.  Darin finden wir 35 "Wiederherstellen des technologischen Inputs" und 188 "Wiederherstellen der Kommunikation mit dem Input".  Es ist nicht erforderlich, D-HEX-D zu Ã¼bersetzen. Das erste Ereignis ist der ganzzahlige Teil der Division des empfangenen Werts durch 256, und der Rest ist das zweite Ereignis ( <strong>9148</strong> = <strong>35</strong> * 256 + <strong>188</strong> ).  Bei der Befragung von technologischen Eingaben werden wir nur das erste Ereignis (PrioritÃ¤t) aufgreifen, das die ZustÃ¤nde 35 und 36 "annehmen" sollte ("Wiederherstellung der technologischen Eingaben" und "Verletzung der technologischen Eingaben").  Wir werden den Bruchteil (zweites Ereignis) mit der Datenelementeinstellung â€Informationstyp: Numerisch (positive Ganzzahl)â€œ verwerfen. <br><br>  Schritt 3. Geben Sie die Portmakros und GerÃ¤tenummern ein: <br>  Einstellungen&gt; Netzwerkknoten&gt; "UmgebungsÃ¼berwachung"&gt; wÃ¤hlen Sie "Makros" <br><br><img src="https://habrastorage.org/webt/h1/r-/qg/h1r-qgd4rrdym-txvbmnhsqwgre.png"><br><br>  Schritt 4. Anzeigen der Messwerte auf dem Bedienfeld: <br>  Startbildschirm&gt; Alle Bedienfelder, wÃ¤hlen Sie â€Bedienfeld erstellenâ€œ&gt; stellen Sie im angezeigten Fenster â€Bedienfeldnameâ€œ und den Benutzer ein, fÃ¼r den dieses Bedienfeld verfÃ¼gbar sein wird&gt; Klicken Sie auf â€Neues Widget erstellenâ€œ&gt; Geben Sie â€DatenÃ¼bersichtâ€œ, Aktualisierungsintervall â€10 Sekundenâ€œ, Gruppen ein Knoten des Engineering Infrastructure-Netzwerks&gt; HinzufÃ¼gen&gt; BedienfeldgrÃ¶ÃŸe anpassen und auf "Ã„nderungen speichern" klicken: <br><br><img src="https://habrastorage.org/webt/wl/ge/la/wlgelajwrwuuta5phssi2b5rx38.gif"><br><br><h2>  Fazit </h2><br>  Das resultierende System kann durch die Verwendung von "Langstrecken" -Protokollen eine hervorragende LÃ¶sung sein, sowohl fÃ¼r die Ãœberwachung des Servers als auch fÃ¼r zwei Cross-Office-Zonen (im Hinblick auf die Ãœberwachung der Temperatur- und Feuchtigkeitsbedingungen) oder sogar eines kleinen Rechenzentrums.  Jemand mag sagen, "fu fu fu, das Auto ist immer noch ekelhaft, Sie mÃ¼ssen XXX (Ersatz fÃ¼r etwas aus der industriellen Automatisierung) verwenden" ist ebenfalls eine Option, aber meiner Meinung nach wird es sehr Ã¼berflÃ¼ssig und auch teurer sein .  Und eine kleine Nuance: Wie Sie sehen kÃ¶nnen, ist das System auf dem Bolid recht einfach (obwohl es eine etwas seltsame Logik gibt), aber â€beendenâ€œ Sie die Entscheidung Ã¼ber den Abschlussball.  Controller - manchmal ist er immer noch ein "Schmutz". <br><br>  PS Dieser Artikel ist eine Adaption von zwei Artikeln in meinem Blog: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Preiswerte Ãœberwachung fÃ¼r den Serverraum (Teil 1 - EinfÃ¼hrung)</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">KostengÃ¼nstige Ãœberwachung fÃ¼r den Serverraum (Teil 2 - praktisch)</a> <br><br>  UPD  Nach 3 Tagen Arbeit fiel der RS485-USB-Adapter ab.  Es wird als instabil erkannt, ist aber fÃ¼r die Inbetriebnahme geeignet.  Es wurde durch einen Single-Port-Konverter MGate MB3170 von MOXA ersetzt (entnommen aus dem, was vorhanden war) - alles wurde stabil. <br>  Sie mÃ¼ssen verstehen, dass dieser Artikel nur ein Beispiel dafÃ¼r ist, wie Sie sich mit Zabbix und Bolid â€anfreundenâ€œ kÃ¶nnen.  FÃ¼r eine echte Implementierung kÃ¶nnen Sie mehr Ã¼berwachte DPS-ZustÃ¤nde sowie beispielsweise negative Temperaturen hinzufÃ¼gen (diese werden etwas anders verarbeitet). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438788/">https://habr.com/ru/post/de438788/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438774/index.html">Alles Gute auf einmal. Die lebendigsten Artikel des LANIT-Blogs zu HabrÃ© - 2018</a></li>
<li><a href="../de438776/index.html">Tipps und Tricks von meinem Telegramm-Kanal @pythonetc, Januar 2019</a></li>
<li><a href="../de438778/index.html">@ Pythonetc Januar 2019</a></li>
<li><a href="../de438782/index.html">Der FSB hat die Freigabe russischer SIM-Karten vorgeschlagen und die heimische Kryptographie fÃ¼r 5G verwendet</a></li>
<li><a href="../de438784/index.html">Probleme bei der Verwendung des Yandex.Metrica-Dienstes</a></li>
<li><a href="../de438790/index.html">Der QuadrigaCX-KryptowÃ¤hrungsaustausch wird keine 137 Millionen US-Dollar verschenken. Nur der Direktor kannte das Passwort aus dem GeschÃ¤ft und starb</a></li>
<li><a href="../de438792/index.html">Verwenden von AccelStor Alle Flash-Arrays in VDI-Projekten</a></li>
<li><a href="../de438794/index.html">JavaScript-Objektdetails</a></li>
<li><a href="../de438796/index.html">Docker lernen Teil 1: Die Grundlagen</a></li>
<li><a href="../de438798/index.html">Umgang mit Cyber-Intelligence-Daten: Wir lernen, Indikatoren fÃ¼r Systemkompromisse zu sammeln und zu identifizieren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>