<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜñ üßõ üè∞ ShIoTiny: kleine Automatisierung, das Internet der Dinge oder ‚Äûsechs Monate vor den Ferien‚Äú üëåüèª üéüÔ∏è üî•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wichtige Punkte oder worum es in diesem Artikel geht 


 Da die Interessen der Menschen unterschiedlich sind und die Menschen wenig Zeit haben, dann k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: kleine Automatisierung, das Internet der Dinge oder ‚Äûsechs Monate vor den Ferien‚Äú</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463107/"><br><img src="https://habrastorage.org/webt/op/yn/2p/opyn2pdqpdygsj93bqeqbyhuv6i.jpeg"><br><br><h4 id="osnovnye-tezisy-ili-o-chem-eta-statya">  Wichtige Punkte oder worum es in diesem Artikel geht </h4><br><p>  Da die Interessen der Menschen unterschiedlich sind und die Menschen wenig Zeit haben, dann kurz √ºber den Inhalt des Artikels. </p><br><p>  <strong>Dieser</strong> Artikel gibt einen √úberblick √ºber das Controller-Projekt mit einem Mindestpreis und der M√∂glichkeit der <strong>visuellen Programmierung</strong> √ºber einen WEB-Browser. </p><br><p>  Da dies ein √úbersichtsartikel ist, der zeigen soll, "was Sie aus einem Penny-Controller herausholen k√∂nnen", sollten Sie nicht nach tiefen Wahrheiten und detaillierten Algorithmen suchen. </p><br><p>  <strong>Die</strong> Motivation, Ideen und Ergebnisse des Aufbaus eines Controllers auf Basis des ESP8266 WiFI-Chips werden ber√ºcksichtigt. </p><a name="habracut"></a><br><h4 id="ipreduprezhdeniei">  <i>Warnung</i> </h4><br><p>  <i>Ich wollte diesen Artikel nicht schreiben.</i>  <i>Ich bin √ºberhaupt kein Fan von Artikeln.</i>  <i>Es ist notwendig zu denken und dar√ºber hinaus - viel.</i>  <i>√úberlegen, wie man schreibt, damit die Anzahl der Missverst√§ndnisse minimiert wird.</i>  <i>Zu √ºberlegen, wie man nicht bis zum √Ñu√üersten geht.</i>  <i>Und vieles mehr zum Nachdenken.</i> <i><br></i>  <i>Aber Freunde sagten, da meine Bem√ºhungen auf dem Gebiet des Internet der Dinge und anderer kleiner Automatisierungen f√ºr sie interessant sind, k√∂nnen sie f√ºr andere f√ºr die breite √ñffentlichkeit interessant sein.</i>  <i>Wohin geht das Publikum, das daran interessiert ist?</i>  <i>Nat√ºrlich auf einem habr.</i>  <i>Und hier bin ich.</i>  <i>Alter Leser und neuer Schriftsteller.</i> <i><br><br></i>  <i>F√ºr Fehler, Ungenauigkeiten, Tippfehler, nicht moderne Pr√§sentationsstile usw., die dem Leser m√∂glicherweise nicht gefallen, √ºbernehme ich keine Verantwortung.</i>  <i>Lesen Sie auf eigenes Risiko.</i> <i><br><br></i>  <i>Ich warne auch sofort, dass ich nicht erkl√§ren werde, was MQTT, WiFi und UDP Multicast und andere Dinge, die nicht direkt mit dem Thema zusammenh√§ngen.</i>  <i>Einige Links befinden sich am Ende des Artikels.</i> </p><br><h4 id="rozhdenie-idei-ili-nemnogo-liriki">  Die Geburt einer Idee oder einiger Texte </h4><br><p>  Nun, das Leben ist keine einfache Sache, und Seine Majest√§t Chance spielt dabei eine wichtige Rolle.  Daher m√∂chte ich mitteilen, wie zuf√§llige Ereignisse, multipliziert mit regelm√§√üiger Faulheit, zu einem ziemlich interessanten Controller-Design auf der Basis von ESP8266 gef√ºhrt haben. </p><br><p>  Alles begann eher beil√§ufig: Ich wollte ein Kontrollsystem f√ºr das Wasserversorgungssystem bauen und die Gartenbeete auf dem Land bew√§ssern. </p><br><p>  <strong>Aber</strong> ungef√§hr, da ich mich nur im Urlaub, vor dem es noch mehr als sechs Monate dauerte, voll und ganz mit Rohrkranen besch√§ftigen kann, beschr√§nkte sich alles auf die Diskussion bei der Arbeit mit Kollegen und Freunden-Kameraden in einem informellen Rahmen. </p><br><p>  <strong>Das</strong> Thema ‚ÄûKleine Automatisierung‚Äú oder, wie es in ‚ÄûDiese Ihre Schulhacker-Hacker-Schulkinder‚Äú √ºblich ist - das Thema IoT - das Internet der Dinge - war f√ºr mich schon lange interessant.  Lange vor dem Aufkommen des Internet als solches weit verbreitet. </p><br><p>  Schon in meiner Kindheit wollte ich, dass die Dinge etwas ‚Äûselbst‚Äú tun.  Und es ist w√ºnschenswert, dass ich sie irgendwie aus der Ferne kontrollieren kann.  Aber zu dieser Zeit (den 80ern, dem Beginn der 90er des letzten Jahrtausends) war dies schwierig.  Das Internet war nirgendwo auf der Welt weit verbreitet, da es nirgendwo Handys, Tablets und sogar LCD-Displays und USB-Sticks gab.  Also musste ich mich auf "Lichtschalter am Klatschen" und die einfachsten Funkfernbedienungen beschr√§nken.  Aber f√ºr diese Zeit und dieses Alter war es sch√∂n und interessant. </p><br><p>  <strong>Aber</strong> das ist die Vergangenheit.  Nonche im Hof ‚Äã‚Äãdes 21. Jahrhunderts.  Und jeder hat ein Smartphone in der Tasche, das Internet ist fast √ºberall dort, wo es notwendig und nicht notwendig ist, und die Datenbank der verf√ºgbaren elektronischen Komponenten ist jetzt so, dass der gew√∂hnliche Bewohner des Planeten Erde vor 15 Jahren nicht einmal davon getr√§umt hat. </p><br><p>  Nachdem ich mich entschlossen hatte, einen Controller f√ºr Wasserangelegenheiten im Land zu formen, wandte ich mich dem ESP8266-Chip zu. <br>  Zun√§chst einmal ist dieser Chip billig.  Und wenn ein Controller nicht ausreicht, k√∂nnen Sie zwei, drei oder f√ºnf setzen.  Zweitens hat es WiFi an Bord.  Das hei√üt, Sie k√∂nnen beobachten, was √ºber das Internet passiert, und sogar den Prozess von jedem Smartphone aus steuern.  Nat√ºrlich ben√∂tigen Sie einen Zugangspunkt mit Internetzugang, aber dies ist kein Problem.  Wie auch immer, es ist fast √ºberall oder wird es auch sein, einschlie√ülich - und in meinem Landhaus. </p><br><p>  Nachdem ich in die wunderbare Welt der Projekte f√ºr ESP8266 eingetaucht war, stellte ich √ºberrascht fest, dass Projekte auf diesem Chip trotz der unglaublichen F√§higkeiten dieses Chips mit seltenen Ausnahmen in zwei Typen unterteilt sind: Dies sind √§u√üerst primitive Programme wie ‚ÄûKlicken Sie auf die Rollen eines Smartphones und sehen Sie sich den Status an Temperatursensor √ºber das Internet ‚Äú;  oder gute und solide Interpreten von JavaScript oder Lua, aber leider verbrauchen sie fast den gesamten Speicher und erlauben Ihnen nicht, etwas Ernstes zu tun. </p><br><p>  Meine erste Idee war so einfach wie verdammt - ein einfaches Pumpensteuerungsprogramm zu schreiben, das auf dem Zustand der Sensoren basiert, und das ist alles.  Aber wie ein zerfetztes Kalach, wenn es darum geht, verschiedene Systeme einzuf√ºhren, wurde mir klar, dass ich definitiv nicht alle Biegungen des Algorithmus vorhersehen kann, die ich w√§hrend des Aufbaus des Wasserversorgungs- und Bew√§sserungssystems begradigen m√∂chte oder muss. </p><br><p>  <strong>D</strong> das Programm auf dem Land in einer dunklen Scheune auszuarbeiten - ist nicht sehr praktisch.  Und du musst. <br>  Was ist der Ausweg?  Das erste, was mir in den Sinn kam, war nat√ºrlich, den Algorithmus anpassbar zu machen.  Einer meiner Kollegen gab viele Ratschl√§ge - was und wie zu konfigurieren ist.  Damit hackte er meine erste Idee im Keim ab.  Dank ihm.  Wenn er nicht vor meinen Augen die Anzahl der Parameter bereitgestellt h√§tte, die ich konfigurieren m√ºsste, w√ºrde ich diese Option wahrscheinlich nicht ablehnen: Erstellen Sie eine Seite mit den Algorithmuseinstellungen. </p><br><p>  <strong>Aber</strong> ein erschreckendes Bild der Anzahl der Abstimmungsparameter und sogar der gegenseitigen Beeinflussung hat mich ern√ºchtert.  Wieder einmal wurde mir klar, dass nichts vorhersehbar war ... </p><br><p>  Ich werde sofort reservieren: Ich bin faul.  Sehr faul!  Ich bin ehrlich gesagt faul, das Programm jedes Mal neu zu schreiben.  Daher stellte sich die Aufgabe: Wie kann ein Algorithmus schnell und einfach eingestellt werden, vorzugsweise ohne Programmierung?  Dar√ºber hinaus wird dieser Algorithmus ziemlich kompliziert sein;  wird viele Parameter haben;  Es wird f√ºr meinen Fall individuell und f√ºr andere ungeeignet sein.  Und ich m√∂chte das Ger√§t wirklich mehr oder weniger universell machen ... </p><br><p>  Da es noch ungef√§hr sechs Monate vor den Ferien und allen Rohrleitungen war, beschloss ich, mir Zeit zu nehmen, um zu √ºberlegen: Wie kann ich es bequem und sch√∂n machen?  Wie programmiere ich ohne Programmierung?  Wie kann man auf eine Billion Parameter verzichten, die beim Einrichten ge√§ndert werden k√∂nnen? </p><br><p>  Wie immer war schon alles vor uns ausgedacht: Mir wurde klar, dass ich einen Algorithmus in Form von Aktionsquadraten zeichnen und diese mit Kommunikationsleitungen verbinden m√∂chte, die zeigen, woher und woher die Daten fliegen.  Nun, ich m√∂chte in der Lage sein, einige seiner einzelnen Parameter zu konfigurieren. </p><br><p>  <strong>Das</strong> Einstellen des Algorithmus und das Zeichnen mit Quadraten ist nicht neu.  Solche Systeme waren in den 80er Jahren;  Es gibt ein sehr beliebtes NodeRed-System, das allen bekannt ist, die bereits in die Welt der kleinen Automatisierung / des Internet der Dinge eingetreten sind. </p><br><p>  Das ist aber Pech: Solche Systeme sind f√ºr ‚Äûgro√üe PCs‚Äú ausgelegt.  Im schlimmsten Fall auf dem Raspberry PI.  Aber √ºberhaupt nicht auf dem ESP8266, der nur wenige zehn Kilobyte RAM hat und kein Betriebssystem hat! </p><br><p>  Wie soll ich sein?  Und es gibt nur zwei M√∂glichkeiten: Ein Programm auf einen "gro√üen PC" oder Laptop zu schreiben und zu zeichnen und es dann in irgendeiner Form auf ESP8266 zu √ºbertragen oder zu versuchen, das Unerw√ºnschte in den ESP8266-Controller selbst zu "stopfen". </p><br><p>  Daher war das maximale Programm, das ich hatte, folgendes: Um Ihren Controller zu programmieren, sollte nichts anderes als ein Laptop mit einem WEB-Browser erforderlich sein!  Das hei√üt, ein Laptop mit einem WEB-Browser und meinem Controller - dies sollte ausreichen, um Steuerungsprogramme vollst√§ndig zu konfigurieren und zu schreiben und zu zeichnen. </p><br><p>  <strong>Und</strong> wie sich herausstellte, war es durchaus m√∂glich, dies zu realisieren! <br>  Ich werde Sie nicht mit allen Details der Projektentwicklung langweilen.  Ich kann nur sagen, dass es auf der Grundlage der W√∂rter, die mir w√§hrend des Entwicklungsprozesses in den Sinn kamen, m√∂glich w√§re, ein separates ‚Äû <em>W√∂rterbuch der Obsz√∂nit√§t elektronischer Arbeitnehmer</em> ‚Äú zusammenzustellen.  Aber alles ist zur√ºck.  Genauer gesagt, nicht alle, aber die erste, schwierigste Phase, wenn es nicht klar ist - wird Ihre Idee sein zu leben oder ist es nur Unsinn des Wallachs in einer Mondnacht. </p><br><p>  <strong>Ich werde</strong> das Ergebnis dessen teilen, was herauskam und als <b>"ShIoTiny Controller" bezeichnet wird</b> . </p><br><h4 id="i-chto-zhe-vyshlo">  Und was ist passiert? </h4><br><p>  <b>Die Hardware des</b> ShIoTiny-Controllers ist Standard und einfach: drei Eing√§nge f√ºr Trockenkontaktsensoren (Tasten, Reedschalter, sie sind auch Wasserstandssensoren im Tank), ein ADC-Eingang, ein Eingang zum Anschlie√üen eines Temperatur- und Feuchtigkeitssensors wie DHT22 oder √§hnlichem .  Und schlie√ülich drei Ausg√§nge in Form von Schaltrelais f√ºr 220V, 1 Ampere.  Auf dem Relais steht 10A, aber ich bin ein Realist und werde sie nicht durch die 10A-Verst√§rkerplatine lassen.  Und um die Starter der Pumpen und 1 Ampere zu steuern, reicht es aus.  All dies wird von einer Stromquelle mit einer Spannung von 5 bis 9 Volt gespeist. </p><br><p>  Nat√ºrlich habe ich den Temperatursensor genau wie ‚ÄûSchaub was‚Äú hinzugef√ºgt, aber beim ADC gab es Hoffnungen, die Spannung des Netzes zu messen.  Ist es nicht genug </p><br><p>  Nat√ºrlich sind alle Eing√§nge au√üer dem Eingang zum Anschlie√üen von DHT22 vor Widerst√§nden und Dioden gesch√ºtzt: Ich hatte keine Lust, ESP8266 zu brennen, und Dioden und Widerst√§nde kosten nur wenige Cent. </p><br><p>  <strong>Ein Foto des</strong> fertigen Produkts ist am Anfang des Artikels zu sehen.  Ich habe mehrere dieser Bretter bestellt - was ist, wenn ich sie verbrenne oder die Wege und Beine abschneiden muss? <br>  Aber zum Gl√ºck - musste nicht. </p><br><p>  <strong>Das</strong> Produkt ist nat√ºrlich Sch√∂nheit und Gr√∂√üe.  Der Einfachheit halber ist das Folgende ein Zeichnungsdiagramm der Verbindung von Sensoren und Aktuatoren zu den Platinensimulatoren. </p><br><br><img src="https://habrastorage.org/webt/_v/qm/_k/_vqm_kjyjzpgxqvsqzjte7ct6y8.jpeg"><br><br><p>  Anstelle von F√ºllstandsensoren - Tasten Eingang1..3 anstelle von Startern - LEDs, die an das Relais Relais1..3 angeschlossen sind.  Nun, ein variabler Widerstand am ADC zur Simulation der Eingangsspannung. <br>  Wenn das Relais ausgeschaltet ist, leuchtet die rote LED.  Und wenn eingeschaltet - gr√ºn.  Also habe ich auf dem Tisch debuggt. </p><br><p>  <strong>Dar√ºber</strong> hinaus befinden sich links auf der Platine ein Stromanschluss und rechts zwei Servicetasten: Reset und AP.  Nun, ein DIP-Schalter, der das Ger√§t in den Programmiermodus versetzt.  Der Programmieranschluss ESP8266 √ºber USB-UART-Adapter ist ebenfalls erh√§ltlich. </p><br><p>  <strong>Einige Erkl√§rungen zu den Schaltfl√§chen.</strong>  Was ist <strong>Zur√ºcksetzen</strong> - und so ist es klar.  Die <strong>AP-</strong> Taste wird jedoch ben√∂tigt, um <strong>ShIoTiny</strong> in den Open Access Point-Modus (Konfigurationsmodus oder Konfigurationsmodus) zu versetzen.  Warum wird das ben√∂tigt?  Nun, Sie haben beispielsweise die Netzwerkeinstellungen durcheinander gebracht und m√∂chten sie √§ndern.  Dr√ºcken Sie die AP-Taste einige Sekunden lang (bis die sch√∂ne blaue LED aufleuchtet).  Nehmen Sie dann Ihr Smartphone oder Ihren Laptop, schalten Sie WLAN ein und sehen Sie dort einen offenen Zugangspunkt mit dem Namen esp_8266_xxxx und stellen Sie eine Verbindung her.  Gehen Sie dann zum Browser Ihres Smartphones oder Laptops und geben Sie die Adressleiste ein: 192.168.4.1.  Wenn alles in Ordnung ist, werden Sie zur ShIoTiny-Controller-Seite weitergeleitet und k√∂nnen diese auf neue Weise konfigurieren. </p><br><p>  <strong>Wie</strong> wir sehen, ist Hardware nichts Kompliziertes.  Daher √ºber den <strong>Software-Teil</strong> . </p><br><p>  <strong>In</strong> allen Implementierungsspr√ºngen werde ich aber dann beschreiben.  Eines Tages.  Und heute werde ich die Software nur "au√üerhalb" betrachten, dh aus der Sicht des Benutzers - ich selbst oder ein anderer, der das Risiko eingegangen ist, mein Handwerk zu benutzen (es gibt solche Stuntmen). </p><br><p>  <strong>Aus</strong> Sicht des Benutzers ist das Ger√§t ein HTTP-Server, auf den √ºber WLAN zugegriffen werden kann.  Alle Einstellungen, Programmierungen usw. werden mit einem WEB-Browser vorgenommen. </p><br><p>  <strong>Und</strong> so gingen wir zur Controller-Seite.  Was sehen wir?  Und wir sehen die Registerkarte ‚ÄûSteuerung und Status‚Äú, die den aktuellen Status der verwendeten Ger√§te anzeigt: Eing√§nge, Ausg√§nge, ADC, DHT22.  Zus√§tzlich werden die Verbindungsparameter zum Zugangspunkt angezeigt (wenn wir im Modus einer WiFi-Station arbeiten);  Zugangspunkteinstellungen (wenn wir im WiFi-Zugangspunktmodus arbeiten) oder beides.  Au√üerdem werden die Verbindungsparameter mit dem MQTT-Broker angezeigt, wenn das MQTT-Protokoll verwendet wird. </p><br><br><img src="https://habrastorage.org/webt/lm/02/tw/lm02twe6qzwhrrby1v9jhf8alb8.jpeg"><br><br><p>  <strong>Zu</strong> sehen, nichts Besonderes und Interessantes.  Es gibt nichts zu dr√ºcken!  Obwohl ... Es gibt zwei weitere Registerkarten!  Netzwerkeinstellungen konfigurieren <strong>Netzwerk-</strong> und Editor-Diagrammschemata <strong>ElDraw</strong> . </p><br><p>  Sie haben es erraten, <strong>Networking</strong> baut ein Netzwerk auf, aber nicht nur das.  Es hat ein paar weitere interessante Parameter.  Klicken Sie auf der Registerkarte " <strong>Netzwerk</strong> " auf "St√∂bern" und sehen Sie dort ungef√§hr, was in der Abbildung dargestellt ist. <br>  Konfigurieren des Zugangspunktnamens und des Kennworts f√ºr jeden der Modi - WiFi-Stationen und WiFi-Zugangspunkte.  Alles scheint klar zu sein.  Neben dem Zweck der <strong>Schaltfl√§che "WLAN scannen" ist</strong> sie vollst√§ndig transparent. <br>  Die Dropdown-Liste <strong>"ShIoTiny-Modus"</strong> muss jedoch <strong>pr√§zisiert werden</strong> .  Tatsache ist, dass ich mich nicht entscheiden konnte, in welchem ‚Äã‚ÄãModus ich bequemer arbeiten w√ºrde.  Und daher f√ºr 5 Betriebsarten des Ger√§tes vorgesehen. </p><br><br><img src="https://habrastorage.org/webt/kd/s_/hh/kds_hhoiybre9ivtlr1kl1peh24.png"><br><br><p>  Wir listen diese Betriebsarten kurz auf. </p><br><p>  Konfigurationsmodus - Konfigurationsmodus.  Dies ist der Open Access Point-Modus mit einer festen Adresse 192.168.4.1 und dem Namen esp_8266_xxxx. </p><br><p>  <strong>Stationsmodus</strong> - Der Modus der WiFi-Station, die mit Ihrem Zugangspunkt verbunden ist. </p><br><p>  <strong>AP-Modus</strong> - geschlossener Zugangspunktmodus.  Sie legen den Namen und das Passwort selbst fest. </p><br><p>  <strong>Der AP + Station-Modus</strong> ist die gleichzeitige Einbeziehung des AP-Modus + Station-Modus. </p><br><p>  <strong>Einzelmodus</strong> - Arbeiten ohne Verbindung zum Netzwerk.  Ein einsamer Controller mit seinem hohen Anteil ... </p><br><p>  <strong>In</strong> jedem Modus, mit Ausnahme des <strong>Konfigurationsmodus</strong> , k√∂nnen Sie die WEB-Seite blockieren, indem Sie das Kontrollk√§stchen <strong>"Web im Stationsmodus</strong> sperren <strong>"</strong> aktivieren.  Dies ist ein Typ aus Sicherheitsgr√ºnden. </p><br><p>  <strong>Die</strong> Einstellungen sind MQTT-offensichtlich: Server, Port, Passwort, offene Verbindung oder <strong>SSL</strong> .  Ich werde hier nicht im Detail darauf eingehen. </p><br><p>  Zus√§tzlich zu allem anderen kann der ShIoTiny-Controller Pakete in einem speziellen Format f√ºr Multicast senden und empfangen.  Die Einstellungen sind ebenfalls offensichtlich: Gruppenadresse und Port. <br>  Wenn Sie alle Nuancen der Einstellungen beschreiben, erhalten Sie nat√ºrlich einen separaten Artikel, der jedoch nicht in meinen Pl√§nen enthalten ist. </p><br><p>  <strong>Auf</strong> der Registerkarte <strong>Netzwerk</strong> ist also alles mehr oder weniger klar.  <strong>Kommen</strong> wir zum Hauptmerkmal des Controllers - dem <strong>ElDraw-</strong> Programmeditor. </p><br><p>  Wenn Sie auf die Registerkarte ElDraw tippen, sehen Sie Folgendes.  Wenn das Ger√§t keinen geladenen Stromkreis hat, ist das Stromkreisfeld nat√ºrlich leer. </p><br><br><img src="https://habrastorage.org/webt/hr/on/kc/hronkcmousbzptjr1olyag1whbk.png"><br><br><p>  Links befindet sich eine Palette von Elementen oder Knoten (Knoten). <br>  Rechts ein Diagrammfeld oder einfach ein ‚ÄûDiagramm‚Äú. <br>  <strong>Von</strong> oben - Schaltfl√§chen zum Laden und Entladen auf die Festplatte und zum Ger√§t sowie Schaltfl√§chen zum Bearbeiten. </p><br><p>  <strong>F√ºr</strong> diejenigen, die mit Redakteuren gearbeitet haben, ist das Management im Allgemeinen offensichtlich.  Wir m√ºssen dem Diagramm ein Element hinzuf√ºgen - nehmen Sie es mit der Maus und ziehen Sie es aus der Palette in das Diagramm.  Es ist notwendig, das Element oder den Link aus dem Diagramm zu entfernen - stecken Sie mit der Maus darauf oder darauf und dr√ºcken Sie die <strong>ENTF-</strong> Taste.  Wir m√ºssen die Elemente verbinden - wir nehmen die Eingabe eines Elements und verbinden sie mit der Ausgabe eines anderen. </p><br><p>  <strong>Es wird</strong> noch skaliert (UMSCHALT + Mausrad).  Leider gibt es keine M√∂glichkeit, Elemente und Elementgruppen zu kopieren.  Das st√∂rt aber nicht viel. </p><br><p>  Au√üerdem kann aus logischen Gr√ºnden der Eingang eines Knotens nur mit einem Ausgang eines anderen Knotens verbunden werden.  Die Knotenausgabe erfolgt jedoch mit mehreren Eingaben anderer Knoten.  Die Eingaben befinden sich immer links von den Knoten.  Die Ausg√§nge sind immer rechts. </p><br><p>  <strong>Welche</strong> F√§higkeiten haben wir zur Implementierung von Algorithmen? <br>  <strong>In</strong> M√∂glichkeiten - ziemlich umfangreich.  Die Palette enth√§lt Knoten, die die gesamte Hardware des <strong>ShIoTiny-</strong> Controllers darstellen: Eing√§nge, Relais, ADCs, DHT11 / 22. </p><br><p>  Es gibt logische und arithmetische Knoten f√ºr die Datenverarbeitung. </p><br><p>  Damit wir √ºber das Internet mit dem Ger√§t arbeiten k√∂nnen, gibt es Knoten zum Abonnieren und Ver√∂ffentlichen von Parametern f√ºr den MQTT-Broker. </p><br><p>  Wenn mehrere ShIoTiny-Controller Informationen miteinander austauschen sollen, k√∂nnen Sie die Knoten zum Senden und Empfangen von Parametern mithilfe des UDP-Multicast-Protokolls verwenden. </p><br><p>  <strong>Zu</strong> diesem Rum gibt es Timer-Knoten;  Ereignisverwaltungs-Steuerknoten. </p><br><p>  <strong>Ich werde</strong> einige Beispiele geben.  M√∂chten Sie beispielsweise, dass Temperatur- und Feuchtigkeitsdaten alle 30 Minuten auf einem MQTT-Server ver√∂ffentlicht werden?  Einfacher geht es nicht.  Zeichne so. </p><br><br><img src="https://habrastorage.org/webt/gf/bu/op/gfbuopoey6qqzbgtglgqm14otme.jpeg"><br><br><p>  <strong>Nun</strong> Meme Button "Upload".  Das ist alles! <br>  Wenn Sie die Verbindung mit dem MQTT-Broker auf der Registerkarte Netzwerk korrekt konfiguriert haben, ist das alles! <br>  Jede halbe Stunde wird die Temperatur auf dem Broker unter dem Thema / T und die Luftfeuchtigkeit unter dem Thema / H ver√∂ffentlicht.  Oder, wenn Sie nach Ihren Themennamen fragen, dann unter ihnen. <br>  Frage: Warum sind 18.000 30 Minuten?  Weil alle Zeiten in Zehntelsekunden gemessen werden. </p><br><p>  Jetzt m√∂chten Sie dieser Schaltung die M√∂glichkeit hinzuf√ºgen, Relais1-Relais √ºber das Internet und sogar f√ºr eine bestimmte Zeit einzuschalten?  Kein Problem.  Zeichne so. </p><br><br><img src="https://habrastorage.org/webt/mb/ai/l6/mbail6skmkridba4jx6zhnvpjng.png"><br><br><p>  <strong>Gegen</strong> f√ºnf klicken Sie auf die Schaltfl√§che "Hochladen".  Das ist alles!  Zus√§tzlich zu der Tatsache, dass jede halbe Stunde Temperatur und Luftfeuchtigkeit auf dem MQTT-Broker ver√∂ffentlicht werden, ist es jetzt m√∂glich, Relais 1-Relais einzuschalten.  Ja, nicht nur einschalten, sondern genau 10 Minuten lang.  Sie k√∂nnen das Relay aktivieren, indem Sie das Thema / r1cmd ver√∂ffentlichen, das auf 1 gesetzt ist. Der tats√§chliche Status des Relays wird im Thema / r1status ver√∂ffentlicht. </p><br><p>  Will ich nicht nur das Relais vorab einschalten, sondern auch ausschalten?  Ja, wie du sagst.  Die folgende Abbildung zeigt, wie es geht! </p><br><br><img src="https://habrastorage.org/webt/nq/nm/qz/nqnmqznqcj9ia1tco5tumywbblg.png"><br><br><p>  Ist das Prinzip klar?  Sie zeichnen den Algorithmus einfach mit der Maus!  Und schreibe ein paar Einstellungen: Zeit, Themenname und alles.  Dies ist viel klarer als das Schreiben einer Reihe von Code. </p><br><p>  <strong>Das</strong> Hervorheben von Links in verschiedenen Farben ist <strong>√ºbrigens</strong> kein ‚ÄûPhotoshop‚Äú - dies ist eine der Funktionen des Editors.  Sie k√∂nnen die Links nach Belieben einf√§rben, um nicht verwirrt zu werden. </p><br><p>  <strong>Aber</strong> oh und das ist noch nicht alles!  Um den Algorithmus zu debuggen, gibt es eine Schaltfl√§che "Monitorstart".  So seltsam es auch scheinen mag, es schaltet den "Monitor" -Modus ein.  In diesem Modus wird der Status aller Ausg√§nge aller Knoten regelm√§√üig vom <strong>ShIoTiny-</strong> Controller gelesen und auf der Schaltung angezeigt.  Ungef√§hr wie in der Abbildung unten. </p><br><br><img src="https://habrastorage.org/webt/av/zo/ev/avzoevodxkpmwylcw2da2tzqicq.png"><br><br><p>  Das hei√üt, wir k√∂nnen in ‚Äûfast Echtzeit‚Äú sehen, was wir am Ein- und Ausgang jedes Knotens haben.  Es hilft sehr, wenn etwas nicht klar ist. </p><br><p>  <strong>Es gibt</strong> immer noch viele ‚ÄûChips und Funktionen‚Äú, die ich beschreiben m√∂chte, und mein Gewissen wird es Ihnen nicht erlauben, Ihre Zeit damit in einem Artikel zu verbringen.  Die wichtigste realisierte Idee ist bereits klar: ein Minimum an konfigurierbaren Parametern - ein Maximum an Sichtbarkeit. </p><br><h4 id="lozhka-degtya">  Fliege in die Salbe </h4><br><p>  Nat√ºrlich m√∂chte ich, dass die Salbe keine Fliege enth√§lt, aber die Welt ist nicht perfekt.  Sowohl mein Editor als auch mein Controller sind nicht perfekt.  Ich habe zwei Hauptmerkmale gefunden, die ich noch nicht beseitigen konnte. </p><br><p>  Erstens treten manchmal St√∂rungen w√§hrend der Gruppenbewegung von Elementen auf.  Dies beeintr√§chtigt die Arbeit jedoch nicht wesentlich.  Eher eine Funktion als ein Fehler. </p><br><p>  <strong>Und</strong> zweitens wird der Stromkreis unter bestimmten Bedingungen neu gestartet, nachdem er √ºber die Schaltfl√§che ‚ÄûHochladen‚Äú in das Ger√§t geladen wurde.  Dies beeintr√§chtigt das Leben nicht, aber die Editorseite muss aktualisiert werden. </p><br><h4 id="zaklyuchenie">  Fazit </h4><br><p>  <strong>Ich</strong> hoffe, Ihnen gef√§llt die Idee, Algorithmen zu zeichnen, anstatt Programme zu schreiben.  Auf diese Weise f√ºhren zuf√§llige Gedanken, Ideen und Argumente manchmal zu tragf√§higen Entwicklungen f√ºr sich. </p><br><p>  Meiner Meinung nach ist das Volumen des Artikels jedoch allen vern√ºnftigen Grenzen entwachsen.  Also bin ich f√ºr heute fertig. <br>  Ich m√∂chte nur sagen, dass nur noch wenige Wochen bis zum Urlaub verbleiben, und ich bin ziemlich bereit, vom Debuggen des Controllers am Tisch zum Debuggen "vor Ort" √ºberzugehen. <br> <strong></strong>         ‚Äî   : <strong>shiotiny@yandex.ru</strong> </p><br><p> <strong></strong>      ,  , ,  . </p><br><p> <strong></strong>   ,   . </p><br><h4 id="ssylki-otsylki-i-posylki"> ,    </h4><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  ShIoTiny</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ESP8266</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wifi</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MQTT</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UDP Multicast</a> </p><br><h4 id="po-prosbam-trudyaschihsya">  Auf Wunsch der Arbeiter </h4><br><p> <strong></strong>      (). </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/shiotiny/ShIoTinyBin</a> </p><br><p> : <a href="">https://github.com/shiotiny/ShIoTinyBin/blob/master/bin/esp-07-shiotiny.bin</a> </p><br><p> : <a href="">https://github.com/shiotiny/ShIoTinyBin/blob/master/doc/esp-07-shiotiny.png</a> </p><br><p>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/shiotiny/ShIoTinyBin/blob/master/doc/ShIoT-esp8266-01_obzor.pdf</a> </p><br><p>  " "  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463107/">https://habr.com/ru/post/de463107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463095/index.html">Warum nicht SQL?</a></li>
<li><a href="../de463097/index.html">Go Produktentwicklung: Eine Projekthistorie</a></li>
<li><a href="../de463099/index.html">1000 und 1 Feedback. Wie man Feedback gibt und anderen beibringt, die Lamoda-Erfahrung</a></li>
<li><a href="../de463101/index.html">Verwalten von Hunderten von Servern f√ºr Lasttests: automatische Skalierung, benutzerdefinierte √úberwachung, DevOps-Kultur</a></li>
<li><a href="../de463105/index.html">Mein vierter Tag mit Haiku: Installations- und Bootprobleme</a></li>
<li><a href="../de463113/index.html">Daten und Modelle Versionskontrolle im Computer Vision-Meetup</a></li>
<li><a href="../de463115/index.html">Das T√ºrproblem im Shooter-Design</a></li>
<li><a href="../de463117/index.html">Vorladen in PHP 7.4</a></li>
<li><a href="../de463121/index.html">Wir essen den Elefanten in Teilen. Beispiel f√ºr eine Strategie zur √úberwachung des Anwendungszustands</a></li>
<li><a href="../de463123/index.html">Assembler-Codegenerator-Bibliothek f√ºr AVR-Mikrocontroller. Teil 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>