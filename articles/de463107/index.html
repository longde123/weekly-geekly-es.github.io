<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆖 🧛 🏰 ShIoTiny: kleine Automatisierung, das Internet der Dinge oder „sechs Monate vor den Ferien“ 👌🏻 🎟️ 🔥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wichtige Punkte oder worum es in diesem Artikel geht 


 Da die Interessen der Menschen unterschiedlich sind und die Menschen wenig Zeit haben, dann k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: kleine Automatisierung, das Internet der Dinge oder „sechs Monate vor den Ferien“</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463107/"><br><img src="https://habrastorage.org/webt/op/yn/2p/opyn2pdqpdygsj93bqeqbyhuv6i.jpeg"><br><br><h4 id="osnovnye-tezisy-ili-o-chem-eta-statya">  Wichtige Punkte oder worum es in diesem Artikel geht </h4><br><p>  Da die Interessen der Menschen unterschiedlich sind und die Menschen wenig Zeit haben, dann kurz über den Inhalt des Artikels. </p><br><p>  <strong>Dieser</strong> Artikel gibt einen Überblick über das Controller-Projekt mit einem Mindestpreis und der Möglichkeit der <strong>visuellen Programmierung</strong> über einen WEB-Browser. </p><br><p>  Da dies ein Übersichtsartikel ist, der zeigen soll, "was Sie aus einem Penny-Controller herausholen können", sollten Sie nicht nach tiefen Wahrheiten und detaillierten Algorithmen suchen. </p><br><p>  <strong>Die</strong> Motivation, Ideen und Ergebnisse des Aufbaus eines Controllers auf Basis des ESP8266 WiFI-Chips werden berücksichtigt. </p><a name="habracut"></a><br><h4 id="ipreduprezhdeniei">  <i>Warnung</i> </h4><br><p>  <i>Ich wollte diesen Artikel nicht schreiben.</i>  <i>Ich bin überhaupt kein Fan von Artikeln.</i>  <i>Es ist notwendig zu denken und darüber hinaus - viel.</i>  <i>Überlegen, wie man schreibt, damit die Anzahl der Missverständnisse minimiert wird.</i>  <i>Zu überlegen, wie man nicht bis zum Äußersten geht.</i>  <i>Und vieles mehr zum Nachdenken.</i> <i><br></i>  <i>Aber Freunde sagten, da meine Bemühungen auf dem Gebiet des Internet der Dinge und anderer kleiner Automatisierungen für sie interessant sind, können sie für andere für die breite Öffentlichkeit interessant sein.</i>  <i>Wohin geht das Publikum, das daran interessiert ist?</i>  <i>Natürlich auf einem habr.</i>  <i>Und hier bin ich.</i>  <i>Alter Leser und neuer Schriftsteller.</i> <i><br><br></i>  <i>Für Fehler, Ungenauigkeiten, Tippfehler, nicht moderne Präsentationsstile usw., die dem Leser möglicherweise nicht gefallen, übernehme ich keine Verantwortung.</i>  <i>Lesen Sie auf eigenes Risiko.</i> <i><br><br></i>  <i>Ich warne auch sofort, dass ich nicht erklären werde, was MQTT, WiFi und UDP Multicast und andere Dinge, die nicht direkt mit dem Thema zusammenhängen.</i>  <i>Einige Links befinden sich am Ende des Artikels.</i> </p><br><h4 id="rozhdenie-idei-ili-nemnogo-liriki">  Die Geburt einer Idee oder einiger Texte </h4><br><p>  Nun, das Leben ist keine einfache Sache, und Seine Majestät Chance spielt dabei eine wichtige Rolle.  Daher möchte ich mitteilen, wie zufällige Ereignisse, multipliziert mit regelmäßiger Faulheit, zu einem ziemlich interessanten Controller-Design auf der Basis von ESP8266 geführt haben. </p><br><p>  Alles begann eher beiläufig: Ich wollte ein Kontrollsystem für das Wasserversorgungssystem bauen und die Gartenbeete auf dem Land bewässern. </p><br><p>  <strong>Aber</strong> ungefähr, da ich mich nur im Urlaub, vor dem es noch mehr als sechs Monate dauerte, voll und ganz mit Rohrkranen beschäftigen kann, beschränkte sich alles auf die Diskussion bei der Arbeit mit Kollegen und Freunden-Kameraden in einem informellen Rahmen. </p><br><p>  <strong>Das</strong> Thema „Kleine Automatisierung“ oder, wie es in „Diese Ihre Schulhacker-Hacker-Schulkinder“ üblich ist - das Thema IoT - das Internet der Dinge - war für mich schon lange interessant.  Lange vor dem Aufkommen des Internet als solches weit verbreitet. </p><br><p>  Schon in meiner Kindheit wollte ich, dass die Dinge etwas „selbst“ tun.  Und es ist wünschenswert, dass ich sie irgendwie aus der Ferne kontrollieren kann.  Aber zu dieser Zeit (den 80ern, dem Beginn der 90er des letzten Jahrtausends) war dies schwierig.  Das Internet war nirgendwo auf der Welt weit verbreitet, da es nirgendwo Handys, Tablets und sogar LCD-Displays und USB-Sticks gab.  Also musste ich mich auf "Lichtschalter am Klatschen" und die einfachsten Funkfernbedienungen beschränken.  Aber für diese Zeit und dieses Alter war es schön und interessant. </p><br><p>  <strong>Aber</strong> das ist die Vergangenheit.  Nonche im Hof ​​des 21. Jahrhunderts.  Und jeder hat ein Smartphone in der Tasche, das Internet ist fast überall dort, wo es notwendig und nicht notwendig ist, und die Datenbank der verfügbaren elektronischen Komponenten ist jetzt so, dass der gewöhnliche Bewohner des Planeten Erde vor 15 Jahren nicht einmal davon geträumt hat. </p><br><p>  Nachdem ich mich entschlossen hatte, einen Controller für Wasserangelegenheiten im Land zu formen, wandte ich mich dem ESP8266-Chip zu. <br>  Zunächst einmal ist dieser Chip billig.  Und wenn ein Controller nicht ausreicht, können Sie zwei, drei oder fünf setzen.  Zweitens hat es WiFi an Bord.  Das heißt, Sie können beobachten, was über das Internet passiert, und sogar den Prozess von jedem Smartphone aus steuern.  Natürlich benötigen Sie einen Zugangspunkt mit Internetzugang, aber dies ist kein Problem.  Wie auch immer, es ist fast überall oder wird es auch sein, einschließlich - und in meinem Landhaus. </p><br><p>  Nachdem ich in die wunderbare Welt der Projekte für ESP8266 eingetaucht war, stellte ich überrascht fest, dass Projekte auf diesem Chip trotz der unglaublichen Fähigkeiten dieses Chips mit seltenen Ausnahmen in zwei Typen unterteilt sind: Dies sind äußerst primitive Programme wie „Klicken Sie auf die Rollen eines Smartphones und sehen Sie sich den Status an Temperatursensor über das Internet “;  oder gute und solide Interpreten von JavaScript oder Lua, aber leider verbrauchen sie fast den gesamten Speicher und erlauben Ihnen nicht, etwas Ernstes zu tun. </p><br><p>  Meine erste Idee war so einfach wie verdammt - ein einfaches Pumpensteuerungsprogramm zu schreiben, das auf dem Zustand der Sensoren basiert, und das ist alles.  Aber wie ein zerfetztes Kalach, wenn es darum geht, verschiedene Systeme einzuführen, wurde mir klar, dass ich definitiv nicht alle Biegungen des Algorithmus vorhersehen kann, die ich während des Aufbaus des Wasserversorgungs- und Bewässerungssystems begradigen möchte oder muss. </p><br><p>  <strong>D</strong> das Programm auf dem Land in einer dunklen Scheune auszuarbeiten - ist nicht sehr praktisch.  Und du musst. <br>  Was ist der Ausweg?  Das erste, was mir in den Sinn kam, war natürlich, den Algorithmus anpassbar zu machen.  Einer meiner Kollegen gab viele Ratschläge - was und wie zu konfigurieren ist.  Damit hackte er meine erste Idee im Keim ab.  Dank ihm.  Wenn er nicht vor meinen Augen die Anzahl der Parameter bereitgestellt hätte, die ich konfigurieren müsste, würde ich diese Option wahrscheinlich nicht ablehnen: Erstellen Sie eine Seite mit den Algorithmuseinstellungen. </p><br><p>  <strong>Aber</strong> ein erschreckendes Bild der Anzahl der Abstimmungsparameter und sogar der gegenseitigen Beeinflussung hat mich ernüchtert.  Wieder einmal wurde mir klar, dass nichts vorhersehbar war ... </p><br><p>  Ich werde sofort reservieren: Ich bin faul.  Sehr faul!  Ich bin ehrlich gesagt faul, das Programm jedes Mal neu zu schreiben.  Daher stellte sich die Aufgabe: Wie kann ein Algorithmus schnell und einfach eingestellt werden, vorzugsweise ohne Programmierung?  Darüber hinaus wird dieser Algorithmus ziemlich kompliziert sein;  wird viele Parameter haben;  Es wird für meinen Fall individuell und für andere ungeeignet sein.  Und ich möchte das Gerät wirklich mehr oder weniger universell machen ... </p><br><p>  Da es noch ungefähr sechs Monate vor den Ferien und allen Rohrleitungen war, beschloss ich, mir Zeit zu nehmen, um zu überlegen: Wie kann ich es bequem und schön machen?  Wie programmiere ich ohne Programmierung?  Wie kann man auf eine Billion Parameter verzichten, die beim Einrichten geändert werden können? </p><br><p>  Wie immer war schon alles vor uns ausgedacht: Mir wurde klar, dass ich einen Algorithmus in Form von Aktionsquadraten zeichnen und diese mit Kommunikationsleitungen verbinden möchte, die zeigen, woher und woher die Daten fliegen.  Nun, ich möchte in der Lage sein, einige seiner einzelnen Parameter zu konfigurieren. </p><br><p>  <strong>Das</strong> Einstellen des Algorithmus und das Zeichnen mit Quadraten ist nicht neu.  Solche Systeme waren in den 80er Jahren;  Es gibt ein sehr beliebtes NodeRed-System, das allen bekannt ist, die bereits in die Welt der kleinen Automatisierung / des Internet der Dinge eingetreten sind. </p><br><p>  Das ist aber Pech: Solche Systeme sind für „große PCs“ ausgelegt.  Im schlimmsten Fall auf dem Raspberry PI.  Aber überhaupt nicht auf dem ESP8266, der nur wenige zehn Kilobyte RAM hat und kein Betriebssystem hat! </p><br><p>  Wie soll ich sein?  Und es gibt nur zwei Möglichkeiten: Ein Programm auf einen "großen PC" oder Laptop zu schreiben und zu zeichnen und es dann in irgendeiner Form auf ESP8266 zu übertragen oder zu versuchen, das Unerwünschte in den ESP8266-Controller selbst zu "stopfen". </p><br><p>  Daher war das maximale Programm, das ich hatte, folgendes: Um Ihren Controller zu programmieren, sollte nichts anderes als ein Laptop mit einem WEB-Browser erforderlich sein!  Das heißt, ein Laptop mit einem WEB-Browser und meinem Controller - dies sollte ausreichen, um Steuerungsprogramme vollständig zu konfigurieren und zu schreiben und zu zeichnen. </p><br><p>  <strong>Und</strong> wie sich herausstellte, war es durchaus möglich, dies zu realisieren! <br>  Ich werde Sie nicht mit allen Details der Projektentwicklung langweilen.  Ich kann nur sagen, dass es auf der Grundlage der Wörter, die mir während des Entwicklungsprozesses in den Sinn kamen, möglich wäre, ein separates „ <em>Wörterbuch der Obszönität elektronischer Arbeitnehmer</em> “ zusammenzustellen.  Aber alles ist zurück.  Genauer gesagt, nicht alle, aber die erste, schwierigste Phase, wenn es nicht klar ist - wird Ihre Idee sein zu leben oder ist es nur Unsinn des Wallachs in einer Mondnacht. </p><br><p>  <strong>Ich werde</strong> das Ergebnis dessen teilen, was herauskam und als <b>"ShIoTiny Controller" bezeichnet wird</b> . </p><br><h4 id="i-chto-zhe-vyshlo">  Und was ist passiert? </h4><br><p>  <b>Die Hardware des</b> ShIoTiny-Controllers ist Standard und einfach: drei Eingänge für Trockenkontaktsensoren (Tasten, Reedschalter, sie sind auch Wasserstandssensoren im Tank), ein ADC-Eingang, ein Eingang zum Anschließen eines Temperatur- und Feuchtigkeitssensors wie DHT22 oder ähnlichem .  Und schließlich drei Ausgänge in Form von Schaltrelais für 220V, 1 Ampere.  Auf dem Relais steht 10A, aber ich bin ein Realist und werde sie nicht durch die 10A-Verstärkerplatine lassen.  Und um die Starter der Pumpen und 1 Ampere zu steuern, reicht es aus.  All dies wird von einer Stromquelle mit einer Spannung von 5 bis 9 Volt gespeist. </p><br><p>  Natürlich habe ich den Temperatursensor genau wie „Schaub was“ hinzugefügt, aber beim ADC gab es Hoffnungen, die Spannung des Netzes zu messen.  Ist es nicht genug </p><br><p>  Natürlich sind alle Eingänge außer dem Eingang zum Anschließen von DHT22 vor Widerständen und Dioden geschützt: Ich hatte keine Lust, ESP8266 zu brennen, und Dioden und Widerstände kosten nur wenige Cent. </p><br><p>  <strong>Ein Foto des</strong> fertigen Produkts ist am Anfang des Artikels zu sehen.  Ich habe mehrere dieser Bretter bestellt - was ist, wenn ich sie verbrenne oder die Wege und Beine abschneiden muss? <br>  Aber zum Glück - musste nicht. </p><br><p>  <strong>Das</strong> Produkt ist natürlich Schönheit und Größe.  Der Einfachheit halber ist das Folgende ein Zeichnungsdiagramm der Verbindung von Sensoren und Aktuatoren zu den Platinensimulatoren. </p><br><br><img src="https://habrastorage.org/webt/_v/qm/_k/_vqm_kjyjzpgxqvsqzjte7ct6y8.jpeg"><br><br><p>  Anstelle von Füllstandsensoren - Tasten Eingang1..3 anstelle von Startern - LEDs, die an das Relais Relais1..3 angeschlossen sind.  Nun, ein variabler Widerstand am ADC zur Simulation der Eingangsspannung. <br>  Wenn das Relais ausgeschaltet ist, leuchtet die rote LED.  Und wenn eingeschaltet - grün.  Also habe ich auf dem Tisch debuggt. </p><br><p>  <strong>Darüber</strong> hinaus befinden sich links auf der Platine ein Stromanschluss und rechts zwei Servicetasten: Reset und AP.  Nun, ein DIP-Schalter, der das Gerät in den Programmiermodus versetzt.  Der Programmieranschluss ESP8266 über USB-UART-Adapter ist ebenfalls erhältlich. </p><br><p>  <strong>Einige Erklärungen zu den Schaltflächen.</strong>  Was ist <strong>Zurücksetzen</strong> - und so ist es klar.  Die <strong>AP-</strong> Taste wird jedoch benötigt, um <strong>ShIoTiny</strong> in den Open Access Point-Modus (Konfigurationsmodus oder Konfigurationsmodus) zu versetzen.  Warum wird das benötigt?  Nun, Sie haben beispielsweise die Netzwerkeinstellungen durcheinander gebracht und möchten sie ändern.  Drücken Sie die AP-Taste einige Sekunden lang (bis die schöne blaue LED aufleuchtet).  Nehmen Sie dann Ihr Smartphone oder Ihren Laptop, schalten Sie WLAN ein und sehen Sie dort einen offenen Zugangspunkt mit dem Namen esp_8266_xxxx und stellen Sie eine Verbindung her.  Gehen Sie dann zum Browser Ihres Smartphones oder Laptops und geben Sie die Adressleiste ein: 192.168.4.1.  Wenn alles in Ordnung ist, werden Sie zur ShIoTiny-Controller-Seite weitergeleitet und können diese auf neue Weise konfigurieren. </p><br><p>  <strong>Wie</strong> wir sehen, ist Hardware nichts Kompliziertes.  Daher über den <strong>Software-Teil</strong> . </p><br><p>  <strong>In</strong> allen Implementierungssprüngen werde ich aber dann beschreiben.  Eines Tages.  Und heute werde ich die Software nur "außerhalb" betrachten, dh aus der Sicht des Benutzers - ich selbst oder ein anderer, der das Risiko eingegangen ist, mein Handwerk zu benutzen (es gibt solche Stuntmen). </p><br><p>  <strong>Aus</strong> Sicht des Benutzers ist das Gerät ein HTTP-Server, auf den über WLAN zugegriffen werden kann.  Alle Einstellungen, Programmierungen usw. werden mit einem WEB-Browser vorgenommen. </p><br><p>  <strong>Und</strong> so gingen wir zur Controller-Seite.  Was sehen wir?  Und wir sehen die Registerkarte „Steuerung und Status“, die den aktuellen Status der verwendeten Geräte anzeigt: Eingänge, Ausgänge, ADC, DHT22.  Zusätzlich werden die Verbindungsparameter zum Zugangspunkt angezeigt (wenn wir im Modus einer WiFi-Station arbeiten);  Zugangspunkteinstellungen (wenn wir im WiFi-Zugangspunktmodus arbeiten) oder beides.  Außerdem werden die Verbindungsparameter mit dem MQTT-Broker angezeigt, wenn das MQTT-Protokoll verwendet wird. </p><br><br><img src="https://habrastorage.org/webt/lm/02/tw/lm02twe6qzwhrrby1v9jhf8alb8.jpeg"><br><br><p>  <strong>Zu</strong> sehen, nichts Besonderes und Interessantes.  Es gibt nichts zu drücken!  Obwohl ... Es gibt zwei weitere Registerkarten!  Netzwerkeinstellungen konfigurieren <strong>Netzwerk-</strong> und Editor-Diagrammschemata <strong>ElDraw</strong> . </p><br><p>  Sie haben es erraten, <strong>Networking</strong> baut ein Netzwerk auf, aber nicht nur das.  Es hat ein paar weitere interessante Parameter.  Klicken Sie auf der Registerkarte " <strong>Netzwerk</strong> " auf "Stöbern" und sehen Sie dort ungefähr, was in der Abbildung dargestellt ist. <br>  Konfigurieren des Zugangspunktnamens und des Kennworts für jeden der Modi - WiFi-Stationen und WiFi-Zugangspunkte.  Alles scheint klar zu sein.  Neben dem Zweck der <strong>Schaltfläche "WLAN scannen" ist</strong> sie vollständig transparent. <br>  Die Dropdown-Liste <strong>"ShIoTiny-Modus"</strong> muss jedoch <strong>präzisiert werden</strong> .  Tatsache ist, dass ich mich nicht entscheiden konnte, in welchem ​​Modus ich bequemer arbeiten würde.  Und daher für 5 Betriebsarten des Gerätes vorgesehen. </p><br><br><img src="https://habrastorage.org/webt/kd/s_/hh/kds_hhoiybre9ivtlr1kl1peh24.png"><br><br><p>  Wir listen diese Betriebsarten kurz auf. </p><br><p>  Konfigurationsmodus - Konfigurationsmodus.  Dies ist der Open Access Point-Modus mit einer festen Adresse 192.168.4.1 und dem Namen esp_8266_xxxx. </p><br><p>  <strong>Stationsmodus</strong> - Der Modus der WiFi-Station, die mit Ihrem Zugangspunkt verbunden ist. </p><br><p>  <strong>AP-Modus</strong> - geschlossener Zugangspunktmodus.  Sie legen den Namen und das Passwort selbst fest. </p><br><p>  <strong>Der AP + Station-Modus</strong> ist die gleichzeitige Einbeziehung des AP-Modus + Station-Modus. </p><br><p>  <strong>Einzelmodus</strong> - Arbeiten ohne Verbindung zum Netzwerk.  Ein einsamer Controller mit seinem hohen Anteil ... </p><br><p>  <strong>In</strong> jedem Modus, mit Ausnahme des <strong>Konfigurationsmodus</strong> , können Sie die WEB-Seite blockieren, indem Sie das Kontrollkästchen <strong>"Web im Stationsmodus</strong> sperren <strong>"</strong> aktivieren.  Dies ist ein Typ aus Sicherheitsgründen. </p><br><p>  <strong>Die</strong> Einstellungen sind MQTT-offensichtlich: Server, Port, Passwort, offene Verbindung oder <strong>SSL</strong> .  Ich werde hier nicht im Detail darauf eingehen. </p><br><p>  Zusätzlich zu allem anderen kann der ShIoTiny-Controller Pakete in einem speziellen Format für Multicast senden und empfangen.  Die Einstellungen sind ebenfalls offensichtlich: Gruppenadresse und Port. <br>  Wenn Sie alle Nuancen der Einstellungen beschreiben, erhalten Sie natürlich einen separaten Artikel, der jedoch nicht in meinen Plänen enthalten ist. </p><br><p>  <strong>Auf</strong> der Registerkarte <strong>Netzwerk</strong> ist also alles mehr oder weniger klar.  <strong>Kommen</strong> wir zum Hauptmerkmal des Controllers - dem <strong>ElDraw-</strong> Programmeditor. </p><br><p>  Wenn Sie auf die Registerkarte ElDraw tippen, sehen Sie Folgendes.  Wenn das Gerät keinen geladenen Stromkreis hat, ist das Stromkreisfeld natürlich leer. </p><br><br><img src="https://habrastorage.org/webt/hr/on/kc/hronkcmousbzptjr1olyag1whbk.png"><br><br><p>  Links befindet sich eine Palette von Elementen oder Knoten (Knoten). <br>  Rechts ein Diagrammfeld oder einfach ein „Diagramm“. <br>  <strong>Von</strong> oben - Schaltflächen zum Laden und Entladen auf die Festplatte und zum Gerät sowie Schaltflächen zum Bearbeiten. </p><br><p>  <strong>Für</strong> diejenigen, die mit Redakteuren gearbeitet haben, ist das Management im Allgemeinen offensichtlich.  Wir müssen dem Diagramm ein Element hinzufügen - nehmen Sie es mit der Maus und ziehen Sie es aus der Palette in das Diagramm.  Es ist notwendig, das Element oder den Link aus dem Diagramm zu entfernen - stecken Sie mit der Maus darauf oder darauf und drücken Sie die <strong>ENTF-</strong> Taste.  Wir müssen die Elemente verbinden - wir nehmen die Eingabe eines Elements und verbinden sie mit der Ausgabe eines anderen. </p><br><p>  <strong>Es wird</strong> noch skaliert (UMSCHALT + Mausrad).  Leider gibt es keine Möglichkeit, Elemente und Elementgruppen zu kopieren.  Das stört aber nicht viel. </p><br><p>  Außerdem kann aus logischen Gründen der Eingang eines Knotens nur mit einem Ausgang eines anderen Knotens verbunden werden.  Die Knotenausgabe erfolgt jedoch mit mehreren Eingaben anderer Knoten.  Die Eingaben befinden sich immer links von den Knoten.  Die Ausgänge sind immer rechts. </p><br><p>  <strong>Welche</strong> Fähigkeiten haben wir zur Implementierung von Algorithmen? <br>  <strong>In</strong> Möglichkeiten - ziemlich umfangreich.  Die Palette enthält Knoten, die die gesamte Hardware des <strong>ShIoTiny-</strong> Controllers darstellen: Eingänge, Relais, ADCs, DHT11 / 22. </p><br><p>  Es gibt logische und arithmetische Knoten für die Datenverarbeitung. </p><br><p>  Damit wir über das Internet mit dem Gerät arbeiten können, gibt es Knoten zum Abonnieren und Veröffentlichen von Parametern für den MQTT-Broker. </p><br><p>  Wenn mehrere ShIoTiny-Controller Informationen miteinander austauschen sollen, können Sie die Knoten zum Senden und Empfangen von Parametern mithilfe des UDP-Multicast-Protokolls verwenden. </p><br><p>  <strong>Zu</strong> diesem Rum gibt es Timer-Knoten;  Ereignisverwaltungs-Steuerknoten. </p><br><p>  <strong>Ich werde</strong> einige Beispiele geben.  Möchten Sie beispielsweise, dass Temperatur- und Feuchtigkeitsdaten alle 30 Minuten auf einem MQTT-Server veröffentlicht werden?  Einfacher geht es nicht.  Zeichne so. </p><br><br><img src="https://habrastorage.org/webt/gf/bu/op/gfbuopoey6qqzbgtglgqm14otme.jpeg"><br><br><p>  <strong>Nun</strong> Meme Button "Upload".  Das ist alles! <br>  Wenn Sie die Verbindung mit dem MQTT-Broker auf der Registerkarte Netzwerk korrekt konfiguriert haben, ist das alles! <br>  Jede halbe Stunde wird die Temperatur auf dem Broker unter dem Thema / T und die Luftfeuchtigkeit unter dem Thema / H veröffentlicht.  Oder, wenn Sie nach Ihren Themennamen fragen, dann unter ihnen. <br>  Frage: Warum sind 18.000 30 Minuten?  Weil alle Zeiten in Zehntelsekunden gemessen werden. </p><br><p>  Jetzt möchten Sie dieser Schaltung die Möglichkeit hinzufügen, Relais1-Relais über das Internet und sogar für eine bestimmte Zeit einzuschalten?  Kein Problem.  Zeichne so. </p><br><br><img src="https://habrastorage.org/webt/mb/ai/l6/mbail6skmkridba4jx6zhnvpjng.png"><br><br><p>  <strong>Gegen</strong> fünf klicken Sie auf die Schaltfläche "Hochladen".  Das ist alles!  Zusätzlich zu der Tatsache, dass jede halbe Stunde Temperatur und Luftfeuchtigkeit auf dem MQTT-Broker veröffentlicht werden, ist es jetzt möglich, Relais 1-Relais einzuschalten.  Ja, nicht nur einschalten, sondern genau 10 Minuten lang.  Sie können das Relay aktivieren, indem Sie das Thema / r1cmd veröffentlichen, das auf 1 gesetzt ist. Der tatsächliche Status des Relays wird im Thema / r1status veröffentlicht. </p><br><p>  Will ich nicht nur das Relais vorab einschalten, sondern auch ausschalten?  Ja, wie du sagst.  Die folgende Abbildung zeigt, wie es geht! </p><br><br><img src="https://habrastorage.org/webt/nq/nm/qz/nqnmqznqcj9ia1tco5tumywbblg.png"><br><br><p>  Ist das Prinzip klar?  Sie zeichnen den Algorithmus einfach mit der Maus!  Und schreibe ein paar Einstellungen: Zeit, Themenname und alles.  Dies ist viel klarer als das Schreiben einer Reihe von Code. </p><br><p>  <strong>Das</strong> Hervorheben von Links in verschiedenen Farben ist <strong>übrigens</strong> kein „Photoshop“ - dies ist eine der Funktionen des Editors.  Sie können die Links nach Belieben einfärben, um nicht verwirrt zu werden. </p><br><p>  <strong>Aber</strong> oh und das ist noch nicht alles!  Um den Algorithmus zu debuggen, gibt es eine Schaltfläche "Monitorstart".  So seltsam es auch scheinen mag, es schaltet den "Monitor" -Modus ein.  In diesem Modus wird der Status aller Ausgänge aller Knoten regelmäßig vom <strong>ShIoTiny-</strong> Controller gelesen und auf der Schaltung angezeigt.  Ungefähr wie in der Abbildung unten. </p><br><br><img src="https://habrastorage.org/webt/av/zo/ev/avzoevodxkpmwylcw2da2tzqicq.png"><br><br><p>  Das heißt, wir können in „fast Echtzeit“ sehen, was wir am Ein- und Ausgang jedes Knotens haben.  Es hilft sehr, wenn etwas nicht klar ist. </p><br><p>  <strong>Es gibt</strong> immer noch viele „Chips und Funktionen“, die ich beschreiben möchte, und mein Gewissen wird es Ihnen nicht erlauben, Ihre Zeit damit in einem Artikel zu verbringen.  Die wichtigste realisierte Idee ist bereits klar: ein Minimum an konfigurierbaren Parametern - ein Maximum an Sichtbarkeit. </p><br><h4 id="lozhka-degtya">  Fliege in die Salbe </h4><br><p>  Natürlich möchte ich, dass die Salbe keine Fliege enthält, aber die Welt ist nicht perfekt.  Sowohl mein Editor als auch mein Controller sind nicht perfekt.  Ich habe zwei Hauptmerkmale gefunden, die ich noch nicht beseitigen konnte. </p><br><p>  Erstens treten manchmal Störungen während der Gruppenbewegung von Elementen auf.  Dies beeinträchtigt die Arbeit jedoch nicht wesentlich.  Eher eine Funktion als ein Fehler. </p><br><p>  <strong>Und</strong> zweitens wird der Stromkreis unter bestimmten Bedingungen neu gestartet, nachdem er über die Schaltfläche „Hochladen“ in das Gerät geladen wurde.  Dies beeinträchtigt das Leben nicht, aber die Editorseite muss aktualisiert werden. </p><br><h4 id="zaklyuchenie">  Fazit </h4><br><p>  <strong>Ich</strong> hoffe, Ihnen gefällt die Idee, Algorithmen zu zeichnen, anstatt Programme zu schreiben.  Auf diese Weise führen zufällige Gedanken, Ideen und Argumente manchmal zu tragfähigen Entwicklungen für sich. </p><br><p>  Meiner Meinung nach ist das Volumen des Artikels jedoch allen vernünftigen Grenzen entwachsen.  Also bin ich für heute fertig. <br>  Ich möchte nur sagen, dass nur noch wenige Wochen bis zum Urlaub verbleiben, und ich bin ziemlich bereit, vom Debuggen des Controllers am Tisch zum Debuggen "vor Ort" überzugehen. <br> <strong></strong>         —   : <strong>shiotiny@yandex.ru</strong> </p><br><p> <strong></strong>      ,  , ,  . </p><br><p> <strong></strong>   ,   . </p><br><h4 id="ssylki-otsylki-i-posylki"> ,    </h4><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  ShIoTiny</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ESP8266</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wifi</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MQTT</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UDP Multicast</a> </p><br><h4 id="po-prosbam-trudyaschihsya">  Auf Wunsch der Arbeiter </h4><br><p> <strong></strong>      (). </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/shiotiny/ShIoTinyBin</a> </p><br><p> : <a href="">https://github.com/shiotiny/ShIoTinyBin/blob/master/bin/esp-07-shiotiny.bin</a> </p><br><p> : <a href="">https://github.com/shiotiny/ShIoTinyBin/blob/master/doc/esp-07-shiotiny.png</a> </p><br><p>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/shiotiny/ShIoTinyBin/blob/master/doc/ShIoT-esp8266-01_obzor.pdf</a> </p><br><p>  " "  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463107/">https://habr.com/ru/post/de463107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463095/index.html">Warum nicht SQL?</a></li>
<li><a href="../de463097/index.html">Go Produktentwicklung: Eine Projekthistorie</a></li>
<li><a href="../de463099/index.html">1000 und 1 Feedback. Wie man Feedback gibt und anderen beibringt, die Lamoda-Erfahrung</a></li>
<li><a href="../de463101/index.html">Verwalten von Hunderten von Servern für Lasttests: automatische Skalierung, benutzerdefinierte Überwachung, DevOps-Kultur</a></li>
<li><a href="../de463105/index.html">Mein vierter Tag mit Haiku: Installations- und Bootprobleme</a></li>
<li><a href="../de463113/index.html">Daten und Modelle Versionskontrolle im Computer Vision-Meetup</a></li>
<li><a href="../de463115/index.html">Das Türproblem im Shooter-Design</a></li>
<li><a href="../de463117/index.html">Vorladen in PHP 7.4</a></li>
<li><a href="../de463121/index.html">Wir essen den Elefanten in Teilen. Beispiel für eine Strategie zur Überwachung des Anwendungszustands</a></li>
<li><a href="../de463123/index.html">Assembler-Codegenerator-Bibliothek für AVR-Mikrocontroller. Teil 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>