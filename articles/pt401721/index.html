<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖ üîó ü§¶üèø Derrotamos o m√≥dulo GPRS da Amperka üò≠ ‚õ∫Ô∏è üëßüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antes que pud√©ssemos derrotar o barramento CAN , tivemos que derrotar a pr√≥xima pe√ßa de hardware, a saber, o m√≥dulo GPRS. Esta √© a sua vida como desen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Derrotamos o m√≥dulo GPRS da Amperka</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401721/"><img src="https://habrastorage.org/files/f8d/d05/ce9/f8dd05ce94d24dc283d1abcbffdb5906.jpg" alt="imagem"><br>  Antes que pud√©ssemos derrotar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o barramento CAN</a> , tivemos que derrotar a pr√≥xima pe√ßa de hardware, a saber, o m√≥dulo GPRS.  Esta √© a sua vida como desenvolvedora - o tempo todo ela tem que ganhar algu√©m (deve haver um sorriso proibido). <br><br>  Para um dos projetos personalizados, eu precisava adicionar a capacidade de controlar e receber telemetria via GSM usando SMS.  Olhei para a lista de op√ß√µes dispon√≠veis e decidi pelo GPRS Shield de Amperka.  Porque n√£o  Parece decente, √© produzido por uma empresa conhecida, tem suporte t√©cnico, o pre√ßo n√£o √© muito diferente dos concorrentes e geralmente causa uma impress√£o muito boa. <br><br>  Mas l√° estava.  Voc√™ pode aprender sobre essa miss√£o e os incr√≠veis cursos de educa√ß√£o continuada pelos quais tive que passar, integrando este m√≥dulo GPRS ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Arduino Mega Server</a> , clicando no bot√£o abaixo. <br><a name="habracut"></a><br><h2>  M√≥dulo propriamente dito </h2><br>  Como eu disse, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o pr√≥prio m√≥dulo causa</a> uma impress√£o muito boa com sua precis√£o de execu√ß√£o e relacionamento com uma empresa conhecida.  Novamente, o site do fabricante tem exemplos de uso e uma biblioteca nativa.  Como o m√≥dulo √© de marca, h√° esperan√ßa de suporte adequado em caso de problemas com ele. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/332/bf2/2b2/332bf22b21a64277b46f78d65e580b13.jpg" alt="imagem"></div><br>  Olhando para o futuro, direi que o suporte t√©cnico respondeu minhas perguntas corretamente por duas semanas, procurou por bugs na minha biblioteca e at√© lan√ßou uma nova vers√£o com base no motivo da comunica√ß√£o comigo.  Mas ... eu ainda tinha que fazer o m√≥dulo funcionar sozinho. <br><br><h2>  Projeto </h2><br>  Algumas palavras sobre o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">projeto GSM Coop,</a> que exigia um m√≥dulo GPRS.  Era necess√°rio desenvolver automa√ß√£o para gerenciar o galinheiro.  De fato, em um momento incr√≠vel em que vivemos, agora o galinheiro precisa ser controlado por meio de um navegador da web, sensores inteligentes sem fio e telemetria GSM.  √â um objeto estrat√©gico de algum tipo, n√£o um galinheiro. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a91/e3a/6a4/a91e3a6a4cd94a2cabc35ca7ebb381b1.png" alt="imagem"></div><br>  Mas se for necess√°rio, ent√£o √© necess√°rio.  Compramos componentes, entre os quais o m√≥dulo GPRS, e prosseguimos. <br><br><h2>  Calcanhar de Aquiles </h2><br>  Agora, sobre os recursos do m√≥dulo.  Basicamente, funciona.  Ele trabalha com exemplos apresentados no site do fabricante e, com base nisso, voc√™ pode criar um esbo√ßo simples.  Mas existem tr√™s "mas". <br><br>  <i><strong>Nota</strong></i>  <i>Duas placas-m√£e foram usadas no projeto: <strong>Arduino Mega 2560</strong> e <strong>Arduino Due,</strong> e o seguinte se aplica especificamente a elas e somente a elas.</i> <br><br>  <strong>O primeiro "mas", hardware.</strong>  O m√≥dulo n√£o funciona com o Arduino Due.  De jeito nenhum.  Mesmo a correspond√™ncia de v√°rios dias com o suporte t√©cnico da Amperka n√£o ajudou.  Nem eu nem os especialistas da empresa conseguimos que o GPRS Shield funcionasse com o Arduino Due.  E isso √© muito decepcionante, porque Due √© um excelente controlador com grandes recursos e gostaria de poder us√°-lo com o GPRS Shield. <br><br>  <strong>O segundo "mas" √© sist√™mico.</strong>  O m√≥dulo requer que a biblioteca SoftwareSerial funcione.  Quando iniciei minha conversa com o GPRS Shield e o suporte t√©cnico da Amperka, essa era uma solu√ß√£o n√£o alternativa.  Ap√≥s nossos procedimentos, uma vers√£o revisada da biblioteca com suporte para trabalhar no Serial de ferro foi lan√ßada, mas ... nunca ganhou Due ou Mega.  O que geralmente √© dif√≠cil de explicar - se um m√≥dulo funciona no SoftSerial, o que o impede de trabalhar no ferro Serial? <br><br>  <strong>O terceiro "mas", conceitual.</strong>  Isso n√£o √© tudo.  A principal emboscada est√° no princ√≠pio da biblioteca de m√≥dulos.  Ele funciona no modo fechado, ou seja, bloqueia a opera√ß√£o do controlador enquanto aguarda a chegada do SMS (que √© 99% do tempo) e durante todas as outras opera√ß√µes do m√≥dulo.  O que isso significa?  Isso significa que na biblioteca padr√£o do fabricante, voc√™ n√£o pode criar nada al√©m de um esbo√ßo de teste.  O galinheiro estrat√©gico n√£o brilha para voc√™, pois milhares de aplicativos interessantes, como sistemas de seguran√ßa, gerenciamento de efeito estufa, controle dom√©stico inteligente via GSM, etc., etc. n√£o brilham. <br><br><h2>  Mais sobre SoftwareSerial </h2><br>  O m√≥dulo n√£o funciona no Arduino Due, portanto, falaremos sobre o Arduino Mega.  O ponto alto da situa√ß√£o √© que, tendo o Mega, possui tr√™s portas de hardware livres Serial1, Serial2 e Seria3, somos for√ßados a conectar e usar a biblioteca SoftwareSerial.  De nenhuma maneira imagin√°vel e inconceb√≠vel, incluindo rearranjo de jumpers no m√≥dulo e interrogat√≥rio com o suporte t√©cnico da Amperka, n√£o conseguiu que o GPRS Shield funcionasse com portas de hardware no Arduino Mega. <br><br>  Ok ... Usamos SoftwareSerial, mas aqui estamos aguardando uma emboscada.  O SoftwareSerial pode funcionar com muitos pinos Mega do Arduino, mas, por algum motivo, funciona apenas nos pinos 62 e 63.  Por que apenas neles?  Esse enigma √© √≥timo.  Para todas as apar√™ncias, nunca saberemos a resposta para esta pergunta. <br><br><h2>  Farinha de escolha </h2><br>  E agora, como sempre, entendemos que a biblioteca padr√£o n√£o √© adequada para uso pr√°tico.  Ao bloquear o controlador enquanto aguarda para receber uma resposta do m√≥dulo GPRS, a biblioteca tamb√©m bloqueia todos os outros processos.  O controlador simplesmente fica fora da realidade 99% do tempo, aguardando at√© que uma solicita√ß√£o ou resposta chegue ou o tempo limite termine. <br><br>  Isso p√µe fim a qualquer aplica√ß√£o do GPRS Shield, exceto a do teste: enviou uma solicita√ß√£o para ligar o soquete - ligou, enviou uma solicita√ß√£o para desligar - desligou.  N√£o se pode falar de nenhum trabalho do servidor da web, trabalhar com sensores, controle de atuadores e outras coisas; nada disso simplesmente funcionar√°. <br><br>  A quest√£o surgiu: ou recusamos a biblioteca do fabricante e escrevemos nosso c√≥digo de controle GPRS Shield (f√°cil de dizer), ou abandonamos o pr√≥prio m√≥dulo e procuramos uma solu√ß√£o alternativa.  Mas como o m√≥dulo j√° est√° l√°, foi decidido abandonar a biblioteca e escrever o c√≥digo de controle do m√≥dulo. <br><br><h2>  A conquista do Everest </h2><br>  Eu pulo todo o processo de cria√ß√£o do c√≥digo que substitui a biblioteca padr√£o da Amperka, apenas observo que foi muito, muito dif√≠cil e exigiu um trabalho de pesquisa consider√°vel, compila√ß√£o de um algoritmo sofisticado e esfor√ßos consider√°veis ‚Äã‚Äãpara testar a solu√ß√£o resultante. <br><br>  Tudo ser√° simples para voc√™ - um pouco de m√°gica e o c√≥digo de funcionamento do m√≥dulo AMS para suporte ao GPRS Shield est√° pronto. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/557/a58/157/557a58157e7b45589395e0a9d867ee52.jpg" alt="imagem"></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo do m√≥dulo AMS completo, substituindo a biblioteca padr√£o</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/* Modul GPRS part of Arduino Mega Server project */</span></span> #ifdef GPRS_FEATURE #include &lt;SoftwareSerial.h&gt; #define ALWAYS <span class="hljs-number"><span class="hljs-number">1</span></span> #define GPRS_ON_PIN <span class="hljs-number"><span class="hljs-number">2</span></span> #define GPRS_STATE_PIN <span class="hljs-number"><span class="hljs-number">3</span></span> #define GPRS_RX_PIN <span class="hljs-number"><span class="hljs-number">62</span></span> #define GPRS_TX_PIN <span class="hljs-number"><span class="hljs-number">63</span></span> #define MASTER <span class="hljs-string"><span class="hljs-string">"+7yyyxxxxxxx"</span></span> #define MESSAGE <span class="hljs-string"><span class="hljs-string">"Hello"</span></span> #define CHECK_ERROR <span class="hljs-number"><span class="hljs-number">0</span></span> #define CHECK_MARKER <span class="hljs-number"><span class="hljs-number">1</span></span> #define CHECK_OK <span class="hljs-number"><span class="hljs-number">2</span></span> #define NO_CHECK <span class="hljs-number"><span class="hljs-number">3</span></span> #define MARKER_OK <span class="hljs-string"><span class="hljs-string">"OK"</span></span> #define MARKER_NO_CHECK <span class="hljs-string"><span class="hljs-string">"-"</span></span> <span class="hljs-comment"><span class="hljs-comment">// GPRS commands #define DATA_TEMP1 "temp1" #define DATA_CONT1 "cont1" #define DATA_LEAK1 "leak1" #define DATA_SMOKE1 "smoke1" #define DATA_ALL "all" #define DATA_RELAY1 "relay1" #define DATA_SERVO1 "servo1" #define DATA_PERIOD "period" #define CMD_RELAY1 "relay1=" #define CMD_SERVO1 "servo1=" #define CMD_PERIOD "period=" byte gprsPeriod = 24; SoftwareSerial GPRS(GPRS_RX_PIN, GPRS_TX_PIN); #define MAX_SOFT_SERIAL 128 char bufferGprs[MAX_SOFT_SERIAL]; int curBuf = 0; #define MESSAGE_LENGTH 20 char message[MESSAGE_LENGTH]; char phone[16]; char datetime[24]; void gprsInit() { initStart("GPRS", true); GPRS.begin(9600); gprsOnOff(); gprsStart(); sendGprs("AT+CFUN=1", "OK"); sendGprs("AT+CNMI=2,1", "OK"); sendGprs("AT+CMGF=1", "OK"); sendGprs("AT+CLIP=1", "OK"); modulGprs = MODUL_ENABLE; initDone(true); } void clearBufferGprs() { for (int i = 0; i &lt; curBuf; i++) { bufferGprs[i] = 0; } } void gprsStart() { while (ALWAYS) { delay(1000); curBuf = 0; GPRS.println("AT"); if (GPRS.available() &gt; 0) { while (GPRS.available() &gt; 0) { bufferGprs[curBuf++] = GPRS.read(); } bufferGprs[curBuf] = '\0'; if (strcmp(bufferGprs, "AT\r\n\r\nOK\r\n") == 0) { timeStamp(); Serial.println(" GPRS ON"); break; } else { Serial.print("."); } } clearBufferGprs(); } } // gprsStart() void gprsOnOff() { pinMode(GPRS_ON_PIN, OUTPUT); if (digitalRead(GPRS_STATE_PIN) != HIGH) { digitalWrite(GPRS_ON_PIN, HIGH); delay(3000); } digitalWrite(GPRS_ON_PIN, LOW); } bool clearSoftwareSerial() { if (GPRS.available() &gt; 0) { while (GPRS.available() &gt; 0) { char c = GPRS.read(); } } } #define DELAY_GPRS_COMMAND 2000 byte sendGprs(String command, char marker[]) { unsigned long timer = millis(); bool success = false; clearSoftwareSerial(); clearBufferGprs(); Serial.print(F("Send command: ")); //Serial.println(command); while (ALWAYS) { if (millis() - timer &gt; DELAY_GPRS_COMMAND) { Serial.print(F("Send error: ")); Serial.println(command); //clearBufferGprs(); return CHECK_ERROR; } curBuf = 0; GPRS.println(command); delay(280); if (GPRS.available() &gt; 0) { while (GPRS.available() &gt; 0) { char c = GPRS.read(); if (curBuf &gt; MAX_SOFT_SERIAL - 2) {break;} bufferGprs[curBuf++] = c; Serial.print(c); } Serial.println(); bufferGprs[curBuf] = '\0'; if (marker == MARKER_NO_CHECK) { Serial.print(F("Send no check, ")); Serial.println(millis() - timer); return NO_CHECK; } else if (StrContains(bufferGprs, marker)) { Serial.print(F("Send success, ")); Serial.println(millis() - timer); return CHECK_MARKER; } else if (StrContains(bufferGprs, MARKER_OK)) { Serial.print(F("Send success, ")); Serial.println(millis() - timer); return CHECK_OK; } else { Serial.println("."); } } // if (GPRS.available() &gt; 0) delay(500); } // while (ALWAYS) } // sendGprs( ) // +CMGR: "REC READ", "XXXXXXXXXXX", "", "16/10/01,10:00:00+12" // SMS text void parseSms(char *message, char *phone, char *datetime) { int i = 0; int j = 0; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {phone[j++] = bufferGprs[i++];} phone[j] = '\0'; i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; j = 0; while (bufferGprs[i] != '\"') {datetime[j++] = bufferGprs[i++];} datetime[j] = '\0'; i++; while (bufferGprs[i] != '\n') {i++;} i++; j = 0; //Serial.print(F("strlen(bufferGprs): ")); Serial.println(strlen(bufferGprs)); while (i &lt; strlen(bufferGprs) - 1) { if (j &gt; MESSAGE_LENGTH - 1) {break;} if ((byte)bufferGprs[i] == 13) {break;} message[j++] = bufferGprs[i++]; } Serial.print(F("strlen(message1): ")); Serial.println(strlen(message)); message[j] = '\0'; Serial.print(F("strlen(message2): ")); Serial.println(strlen(message)); for (int z = 0; z &lt; strlen(message); z++) { Serial.print((byte)message[z]); Serial.print(F(" ")); } Serial.println(); } void deleteSms() { if (sendGprs("AT+CMGDA=\"DEL ALL\"", "OK")) { Serial.println(F("All SMS deleted")); } else { Serial.println(F("Error delete all SMS")); } } String stringSens(byte v) { String s = ""; switch (v) { case 0: s = (F("OFF")); break; case 1: s = (F("ON")); break; default: s = (F("?")); } return s; } String stringLeak(byte v) { String s = ""; switch (v) { case 0: s = (F("LEAK!")); break; case 1: s = (F("OK")); break; default: s = (F("?")); } return s; } String stringSmoke(byte v) { String s = ""; switch (v) { case 0: s = (F("OK")); break; case 1: s = (F("SMOKE!")); break; default: s = (F("?")); } return s; } String mkTemp1() {String s = DATA_TEMP1; s += '='; s += String(lpTempTemp); s += '\n'; return s;} String mkCont1() {String s = DATA_CONT1; s += '='; s += stringSens(lpContCont1); s += '\n'; return s;} String mkLeak1() {String s = DATA_LEAK1; s += '='; s += stringLeak(lpLeakLeak1); s += '\n'; return s;} String mkSmoke1() {String s = DATA_SMOKE1; s += '='; s += stringSmoke(smokeSmoke); s += '\n'; return s;} String mkRelay1() {String s = DATA_RELAY1; s += '='; s += stringSens(relayRelay); s += '\n'; return s;} String mkServo1() {String s = DATA_SERVO1; s += '='; s += stringSens(servoState); s += '\n'; return s;} String mkPeriod() {String s = DATA_PERIOD; s += '='; s += String(gprsPeriod); s += '\n'; return s;} String mkAll() { String s = ""; s += mkTemp1(); s += mkCont1(); s += mkLeak1(); s += mkSmoke1(); s += mkRelay1(); s += mkServo1(); s += mkPeriod(); return s; } void gprsSetRelay(byte v) { switch (v) { case 0: if (relayRelay) { relayRelay = STATE_OFF; } break; case 1: if (!relayRelay) { relayRelay = STATE_ON; } break; } } void gprsSetServo(byte v) { switch (v) { case 0: servoState = STATE_OFF; break; case 1: servoState = STATE_ON; break; } } void gprsAnswer() { String s = ""; String mess = String(message); String data = ""; if (mess == DATA_TEMP1) {s += mkTemp1();} else if (mess == DATA_CONT1) {s += mkCont1();} else if (mess == DATA_LEAK1) {s += mkLeak1();} else if (mess == DATA_SMOKE1) {s += mkSmoke1();} else if (mess == DATA_RELAY1) {s += mkRelay1();} else if (mess == DATA_SERVO1) {s += mkServo1();} else if (mess == DATA_PERIOD) {s += mkPeriod();} else if (mess == DATA_ALL) {s += mkAll();} else if (mess.indexOf(F("=")) &gt;= 0) { byte p = mess.indexOf(F("=")); if (mess.indexOf(CMD_RELAY1) &gt;= 0) {data = mess.substring(p + 1); gprsSetRelay(data.toInt()); s += DATA_RELAY1; s += '='; s += stringSens(relayRelay);} else if (mess.indexOf(CMD_SERVO1) &gt;= 0) {data = mess.substring(p + 1); gprsSetServo(data.toInt()); s += DATA_SERVO1; s += '='; s += stringSens(servoState);} else if (mess.indexOf(CMD_PERIOD) &gt;= 0) {data = mess.substring(p + 1); gprsPeriod = data.toInt(); s += DATA_PERIOD; s += '='; s += String(gprsPeriod);} } else { Serial.println(F("Not command!")); } //Serial.print(F("mess: ")); Serial.println(mess); //Serial.print(F("answ: ")); Serial.println(s); if (s == "") {s = "Error";} Serial.println(F("Send answer... ")); if (sendSms(MASTER, s)) { Serial.println(F("success")); } else { Serial.println(F("error")); } } void readSms() { byte result = sendGprs("AT+CMGR=1,1", "+CMGR:"); if (result == CHECK_MARKER) { parseSms(message, phone, datetime); Serial.print(F("Number: ")); Serial.println(phone); Serial.print(F("Datetime: ")); Serial.println(datetime); Serial.print(F("Message: ")); Serial.println(message); deleteSms(); if (String(phone) == String(MASTER)) { Serial.println(F("Message from MASTER!")); gprsAnswer(); } } else if (result == CHECK_OK) { Serial.println(F("No SMS")); } else { Serial.println(F("Error read SMS")); } } bool sendSms(char *number, String data) { String numstr = "AT+CMGS=\"" + String(number) + "\""; String messtr = data + String((char)26); if (sendGprs(numstr, "&gt;")) { if (sendGprs(messtr, MARKER_NO_CHECK)) { return true; } } return false; } void sendPeriod() { Serial.println(F("Send period SMS... ")); if (sendSms(MASTER, mkAll())) { Serial.println(F("success")); } else { Serial.println(F("error")); } } void gprsWorks() { if (cycle20s) { readSms(); } switch (gprsPeriod) { case 1: if (cycle1h) {sendPeriod();} break; case 6: if (cycle6h) {sendPeriod();} break; case 12: if (cycle12h) {sendPeriod();} break; default: if (cycle24h) {sendPeriod();} break; } } #endif // GPRS_FEATURE</span></span></code> </pre> <br></div></div><br>  O m√≥dulo foi desenvolvido e testado na vers√£o 0.16 do AMS para o Arduino Mega.  Os testes mostraram uma opera√ß√£o absolutamente est√°vel e confi√°vel do GPRS Shield sob o controle deste m√≥dulo. <br><br><h2>  Conecte ao m√≥dulo de suporte AMS GPRS Shield </h2><br>  Para conectar o m√≥dulo GPRS Shield ao Arduino Mega Server, voc√™ precisa executar algumas etapas simples.  Primeiro, adicione as seguintes linhas ao arquivo principal do AMS <br><br><pre> <code class="java hljs">#define GPRS_FEATURE</code> </pre><br>  e <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> modulGprs = MODUL_NOT_COMPILLED;</code> </pre><br>  nas se√ß√µes apropriadas.  L√° voc√™ precisa adicionar vari√°veis ‚Äã‚Äãde teste que, no seu projeto real, ser√£o respons√°veis ‚Äã‚Äãpelos par√¢metros controlados (temperatura, status do contato etc.). <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lpTempTemp; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lpContCont1; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lpLeakLeak1; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> smokeSmoke; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> relayRelay; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> servoState;</code> </pre><br><h2>  Explica√ß√£o dos recursos suportados </h2><br>  O m√≥dulo cont√©m um conjunto b√°sico de consultas e comandos, mas voc√™ pode substitu√≠-los por outros e / ou expandir o conjunto b√°sico de comandos e consultas necess√°rios. <br><br><h3>  Inqu√©ritos </h3><br>  As solicita√ß√µes s√£o enviadas via SMS, o sistema envia respostas (tamb√©m via SMS) contendo informa√ß√µes sobre o par√¢metro solicitado.  Muito simples: enviamos a solicita√ß√£o "temp1" do telefone, o sistema em resposta envia o valor atual da temperatura <code>temp1=20.50</code> . <br><br><blockquote>  <strong>temp1</strong> - solicita√ß√£o de temperatura <br>  <strong>cont1</strong> - solicitar status de contato <br>  <strong>leak1</strong> - solicita o status do sensor de vazamento <br>  <strong>smoke1</strong> - consulta ao status do detector de fuma√ßa <br>  <strong>relay1</strong> - solicita o status do rel√© (chave) <br>  <strong>servo1</strong> - solicita o status do servo alimentador <br>  <strong>period</strong> - solicita√ß√£o para o per√≠odo de pacotes de telemetria autom√°tica <br>  <strong>all</strong> - solicita todos os par√¢metros do sistema </blockquote><br>  Em resposta √† solicita√ß√£o "all", o sistema envia uma lista de todos os par√¢metros.  No caso de enviar um comando n√£o registrado, o sistema enviar√° uma resposta "Erro".  Se os par√¢metros monitorados estiverem fora da faixa normal, o pr√≥prio sistema poder√° enviar mensagens de alarme para o smartphone do operador. <br><br>  Para gerenciar o sistema que apenas um operador registrado poderia, o sistema possui prote√ß√£o contra acesso n√£o autorizado - ele responde apenas aos comandos de um n√∫mero de telefone espec√≠fico. <br><br><h3>  Equipas </h3><br>  Os comandos s√£o enviados via SMS, tendo aceito o comando, o sistema altera seu estado e envia respostas com informa√ß√µes sobre o novo estado de seus atuadores ou configura√ß√µes. <br><br><blockquote>  <strong>relay1 =</strong> - comando de controle do rel√© (chave) <br>  <strong>servo1 =</strong> - comando de controle do alimentador <br>  <strong>period =</strong> - comando para alterar o per√≠odo de envio autom√°tico de telemetria </blockquote><br>  Um exemplo  Comando <code>relay1=1</code> , resposta <code>relay1=ON</code> .  Comando <code>relay1=0</code> , resposta <code>relay1=OFF</code> . <br><br><h2>  Explica√ß√µes de c√≥digo </h2><br>  Inicializa√ß√£o do m√≥dulo GPRS.  Inicializa√ß√£o padr√£o do m√≥dulo AMS, o lan√ßamento do SoftwareSerial e um pouco de magia dos comandos GSM AT.  O objetivo deste bloco √© trazer √† vida o m√≥dulo GPRS e devolv√™-lo do nirvana, se nesse momento o havia deixado por algum motivo fora do nosso controle. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ initStart(<span class="hljs-string"><span class="hljs-string">"GPRS"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); GPRS.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); gprsOnOff(); gprsStart(); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CFUN=1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CNMI=2,1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CMGF=1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CLIP=1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); modulGprs = MODUL_ENABLE; initDone(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); }</code> </pre><br>  A principal fun√ß√£o de trabalho do m√≥dulo.  A cada 20 segundos, o Mega Server do Arduino verifica se h√° SMS recebidos e, no caso de quaisquer solicita√ß√µes ou comandos, os executa.  Como resultado, o atraso m√©dio na execu√ß√£o do comando √© de 10 segundos (excluindo o atraso no envio de mensagens SMS pelo operador de telecomunica√ß√µes).  Esse intervalo pode ser configurado, 20 segundos s√£o selecionados como um compromisso entre a velocidade de rea√ß√£o aos comandos do SMS e a inicializa√ß√£o do sistema. <br><br>  Nesses 20 segundos, o AMS pode fazer o que for necess√°rio, e o SMS que chega nesse per√≠odo de tempo n√£o √© perdido.  Ao usar a biblioteca padr√£o, o sistema n√£o pode fazer nada al√©m de aguardar a chegada do SMS, caso contr√°rio, apenas os perde (e o controlador tamb√©m n√£o pode fazer nada no momento). <br><br>  H√° tamb√©m um c√≥digo de envio de telemetria com um intervalo especificado de 1 hora, 6 horas, 12 horas ou 24 horas.  Esse intervalo pode ser alterado enviando o comando apropriado via SMS. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsWorks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle20s) { readSms(); } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (gprsPeriod) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle1h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle6h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle12h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle24h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br>  A intera√ß√£o do m√≥dulo GPRS e do controlador √© realizada usando comandos AT especiais e as seguintes fun√ß√µes formam os comandos do m√≥dulo GPRS em c√≥digos que s√£o compreens√≠veis para ele. <br><br>  Fun√ß√£o de envio de SMS.  Nos par√¢metros da fun√ß√£o, o n√∫mero de telefone de destino e o comando ou solicita√ß√£o s√£o transmitidos em forma de texto. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">bool </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendSms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *number, String data)</span></span></span><span class="hljs-function"> </span></span>{ String numstr = <span class="hljs-string"><span class="hljs-string">"AT+CMGS=\""</span></span> + String(number) + <span class="hljs-string"><span class="hljs-string">"\""</span></span>; String messtr = data + String((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>)<span class="hljs-number"><span class="hljs-number">26</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sendGprs(numstr, <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sendGprs(messtr, MARKER_NO_CHECK)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre><br>  Fun√ß√£o de leitura de SMS.  Os valores aceitos s√£o colocados nas vari√°veis ‚Äã‚Äãmensagem, telefone e data e hora, que cont√™m, respectivamente, o comando recebido, n√∫mero de telefone e hor√°rio de envio. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readSms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> result = sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CMGR=1,1"</span></span>, <span class="hljs-string"><span class="hljs-string">"+CMGR:"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == CHECK_MARKER) { parseSms(message, phone, datetime); Serial.print(F(<span class="hljs-string"><span class="hljs-string">"Number: "</span></span>)); Serial.println(phone); Serial.print(F(<span class="hljs-string"><span class="hljs-string">"Datetime: "</span></span>)); Serial.println(datetime); Serial.print(F(<span class="hljs-string"><span class="hljs-string">"Message: "</span></span>)); Serial.println(message); deleteSms(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (String(phone) == String(MASTER)) { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"Message from MASTER!"</span></span>)); gprsAnswer(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == CHECK_OK) { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"No SMS"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"Error read SMS"</span></span>)); } }</code> </pre><br>  A fun√ß√£o de formar uma resposta √†s solicita√ß√µes e comandos do SMS.  Essa fun√ß√£o √© espec√≠fica para cada projeto e voc√™ pode alter√°-la em seus projetos de acordo com a l√≥gica do seu sistema. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsAnswer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String s = <span class="hljs-string"><span class="hljs-string">""</span></span>; String mess = String(message); String data = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_TEMP1) {s += mkTemp1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_CONT1) {s += mkCont1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_LEAK1) {s += mkLeak1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_SMOKE1) {s += mkSmoke1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_RELAY1) {s += mkRelay1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_SERVO1) {s += mkServo1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_PERIOD) {s += mkPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_ALL) {s += mkAll();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(F(<span class="hljs-string"><span class="hljs-string">"="</span></span>)) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> p = mess.indexOf(F(<span class="hljs-string"><span class="hljs-string">"="</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(CMD_RELAY1) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) {data = mess.substring(p + <span class="hljs-number"><span class="hljs-number">1</span></span>); gprsSetRelay(data.toInt()); s += DATA_RELAY1; s += <span class="hljs-string"><span class="hljs-string">'='</span></span>; s += stringSens(relayRelay);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(CMD_SERVO1) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) {data = mess.substring(p + <span class="hljs-number"><span class="hljs-number">1</span></span>); gprsSetServo(data.toInt()); s += DATA_SERVO1; s += <span class="hljs-string"><span class="hljs-string">'='</span></span>; s += stringSens(servoState);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(CMD_PERIOD) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) {data = mess.substring(p + <span class="hljs-number"><span class="hljs-number">1</span></span>); gprsPeriod = data.toInt(); s += DATA_PERIOD; s += <span class="hljs-string"><span class="hljs-string">'='</span></span>; s += String(gprsPeriod);} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"Not command!"</span></span>)); } <span class="hljs-comment"><span class="hljs-comment">//Serial.print(F("mess: ")); Serial.println(mess); //Serial.print(F("answ: ")); Serial.println(s); if (s == "") {s = "Error";} Serial.println(F("Send answer... ")); if (sendSms(MASTER, s)) { Serial.println(F("success")); } else { Serial.println(F("error")); } }</span></span></code> </pre><br>  Fun√ß√µes de forma√ß√£o de respostas.  S√£o fun√ß√µes que formam as respostas que o sistema envia via SMS ao smartphone do usu√°rio em resposta a uma solicita√ß√£o ou a seu crit√©rio, de acordo com o programa estabelecido. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stringSens</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stringLeak</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stringSmoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkTemp1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkCont1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkLeak1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkSmoke1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkRelay1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkServo1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkPeriod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></code> </pre><br>  E as fun√ß√µes de execu√ß√£o de comandos.  Essas s√£o fun√ß√µes executadas pelos comandos do SMS e alteram o estado do sistema, ou seja, alteram suas configura√ß√µes ou ativam ou desativam os atuadores. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsSetRelay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsSetServo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span></code> </pre><br>  As demais fun√ß√µes s√£o puramente t√©cnicas, fazendo todo o trabalho dif√≠cil de atender √† intera√ß√£o entre o GPRS Shield e o microcontrolador. <br><br><h2>  Um pouco mais sobre o SoftwareSerial </h2><br>  Todas as op√ß√µes acima n√£o s√£o suficientes para o GPRS Shield funcionar em um modo transparente e parar de bloquear outros processos em execu√ß√£o no microcontrolador.  Voc√™ tamb√©m precisa modificar o c√≥digo da biblioteca SoftwareSerial.  O fato √© que seu buffer padr√£o de 64 bytes n√£o √© suficiente para digerir a maioria dos comandos AT GSM e manter a intera√ß√£o din√¢mica entre o m√≥dulo e o controlador. <br><br>  Voc√™ precisa aumentar esse buffer para pelo menos 128 bytes e somente depois disso a m√°gica funcionar√° e o GPRS Shield come√ßar√° a funcionar normalmente no modo transparente.  Isso √© feito no arquivo <code>SoftwareSerial.h</code> .  Linha <br><br><pre> <code class="java hljs">#define _SS_MAX_RX_BUFF <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-comment"><span class="hljs-comment">// RX buffer size</span></span></code> </pre><br>  precisa mudar para <br><br><pre> <code class="java hljs">#define _SS_MAX_RX_BUFF <span class="hljs-number"><span class="hljs-number">128</span></span> <span class="hljs-comment"><span class="hljs-comment">// RX buffer size</span></span></code> </pre><br><h2>  Conclus√£o </h2><br>  Voc√™ v√™ a troca de comandos do operador e respostas do sistema na tela do smartphone.  E enquanto o sistema executa dezenas de processos no modo pseudo-multitarefa.  E o GPRS Shield come√ßou a ocupar menos de 1% do tempo do processador, em vez de 99% como antes, liberando o restante do tempo para o servidor da web e outras tarefas para gerenciar o galinheiro. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2e1/615/a08/2e1615a08e2a4a29802805066509d3e4.png" alt="imagem"></div><br>  Isso √© tudo: integramos o GPRS Shield ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AMS</a> , superamos todos os obst√°culos, fizemos funcionar de modo transparente, sem bloquear outros processos, como um servidor web, a opera√ß√£o de sensores e atuadores sem fio, e isso abre perspectivas atraentes para a constru√ß√£o de um grande n√∫mero de sistemas com controle de SMS GSM e controle baseado no AMS - estufas, sistemas de seguran√ßa e aquecimento, v√°rias op√ß√µes para uma casa inteligente, etc., etc. quase ad infinitum. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt401721/">https://habr.com/ru/post/pt401721/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt401709/index.html">Lin Industrial n√£o desiste</a></li>
<li><a href="../pt401711/index.html">V√°lvula treina IA para detectar trapaceiros no CS: GO</a></li>
<li><a href="../pt401713/index.html">O que fazer quando est√° entediado no avi√£o - execute o Google Chrome nas costas da cadeira</a></li>
<li><a href="../pt401715/index.html">Space Fishing por Robert Winglee (NASA)</a></li>
<li><a href="../pt401719/index.html">Ciclone 10 - FPGA da marca Intel</a></li>
<li><a href="../pt401723/index.html">Renova√ß√£o de arte de equipamentos de inform√°tica antigos</a></li>
<li><a href="../pt401725/index.html">A hist√≥ria da tecnologia implant√°vel. Dentaduras</a></li>
<li><a href="../pt401727/index.html">Escolhendo um presente Geek para 23 de fevereiro: Guia Madrobots</a></li>
<li><a href="../pt401729/index.html">O que √© √∫til (e perigoso) "barulho" ao nosso redor</a></li>
<li><a href="../pt401735/index.html">Aprenda o interior dos alto-falantes m√≥veis vibrantes PartyFon Max</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>