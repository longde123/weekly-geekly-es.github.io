<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜­ ğŸ‘©ğŸ¾â€ğŸ”§ ğŸ‘¦ğŸ¼ ROSï¼šRaspberry Piâ€œä½è¡€â€çš„æ·±åº¦å›¾ ğŸ‘©ğŸ¾â€ğŸ¤ ğŸ˜ ğŸ¹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¦‚æœåœ¨åˆ›å»ºæœºå™¨äººæ—¶ä½¿ç”¨ROSï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½çŸ¥é“å®ƒæ”¯æŒä½¿ç”¨ç«‹ä½“æ‘„åƒæœºã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æ„å»ºç©ºé—´çš„å¯è§éƒ¨åˆ†æˆ–ç‚¹äº‘çš„æ·±åº¦å›¾ã€‚ è€Œä¸”æˆ‘æƒ³çŸ¥é“åœ¨ROSä¸­ä½¿ç”¨åŸºäºæ ‘è“æ´¾çš„StereoPiç«‹ä½“æ‘„åƒæœºæœ‰å¤šä¹ˆå®¹æ˜“ã€‚ æ—©äº›æ—¶å€™ï¼Œæˆ‘å·²ç»ç¡®ä¿¡æ·±åº¦å›¾æ˜¯ç”±OpenCVå®Œç¾æ„å»ºçš„ï¼Œä½†æˆ‘ä»æœªæ¶‰åŠè¿‡ROSã€‚ æˆ‘å†³å®šå°è¯•ä¸€ä¸‹ã€‚ æˆ‘æƒ³è°ˆè°ˆå¯»...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ROSï¼šRaspberry Piâ€œä½è¡€â€çš„æ·±åº¦å›¾</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431092/"><img src="https://habrastorage.org/webt/jl/ks/vn/jlksvndgnvhxzgvr_jmo19ni580.jpeg" alt="å›¾ç‰‡"><br><br> å¦‚æœåœ¨åˆ›å»ºæœºå™¨äººæ—¶ä½¿ç”¨ROSï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½çŸ¥é“å®ƒæ”¯æŒä½¿ç”¨ç«‹ä½“æ‘„åƒæœºã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æ„å»ºç©ºé—´çš„å¯è§éƒ¨åˆ†æˆ–ç‚¹äº‘çš„æ·±åº¦å›¾ã€‚ è€Œä¸”æˆ‘æƒ³çŸ¥é“åœ¨ROSä¸­ä½¿ç”¨åŸºäºæ ‘è“æ´¾çš„StereoPiç«‹ä½“æ‘„åƒæœºæœ‰å¤šä¹ˆå®¹æ˜“ã€‚ æ—©äº›æ—¶å€™ï¼Œæˆ‘å·²ç»ç¡®ä¿¡æ·±åº¦å›¾æ˜¯ç”±OpenCVå®Œç¾æ„å»ºçš„ï¼Œä½†æˆ‘ä»æœªæ¶‰åŠè¿‡ROSã€‚ æˆ‘å†³å®šå°è¯•ä¸€ä¸‹ã€‚ æˆ‘æƒ³è°ˆè°ˆå¯»æ‰¾è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ã€‚ <br><a name="habracut"></a><br><h3>  1. Raspberry Piä¸Šæ˜¯å¦æœ‰ä»»ä½•ROSï¼Ÿ </h3><br> é¦–å…ˆï¼Œæˆ‘å†³å®šæ‰¾å‡ºæ˜¯å¦æœ‰å¯èƒ½ä¸ºRaspberry Piæ„å»ºROSã€‚  Googleå‘Šè¯‰æˆ‘çš„ç¬¬ä¸€ä»¶äº‹æ˜¯åœ¨Raspberry Piä¸Šå®‰è£…ä¸åŒç‰ˆæœ¬çš„ROSçš„è¯´æ˜åˆ—è¡¨ï¼Œå³è¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ROS Wiki</a>é¡µé¢ <br><br> å¥½å§ï¼Œå·²ç»æœ‰ä¸€äº›èµ·ç‚¹äº†ï¼ æˆ‘å®Œå…¨è®°å¾—åœ¨Raspberryä¸Šæ„å»ºOpenCVéœ€è¦èŠ±è´¹å¤šé•¿æ—¶é—´ï¼ˆå¤§çº¦å…«ä¸ªå°æ—¶ï¼‰ï¼Œæ‰€ä»¥æˆ‘å†³å®šå¯»æ‰¾ç°æˆçš„MicroSDå¡æ˜ åƒä»¥èŠ‚çœæ—¶é—´ã€‚ <br><br><h3>  2.æ˜¯å¦æœ‰å¸¦æœ‰ROS for Raspberryçš„ç°æˆçš„microSDå¡æ˜ åƒï¼Ÿ </h3><br> äº‹å®è¯æ˜ï¼Œè¿™ä¸ªé—®é¢˜å·²ç»è¢«å¤šä¸ªå¼€å‘å›¢é˜Ÿè§£å†³ã€‚ å¦‚æœæ‚¨ä¸å–œæ¬¢å‘çƒ§å‹çš„ä¸€æ¬¡æ€§äº§å“ï¼Œé‚£ä¹ˆéšç€OSå’ŒROSæ–°ç‰ˆæœ¬çš„å‘å¸ƒï¼Œä¼šä¸æ–­æ›´æ–°ä¸€äº›å›¾åƒã€‚ <br><br> ç¬¬ä¸€ä¸ªé€‰é¡¹æ˜¯ROSbotså›¢é˜Ÿåœ¨æœ¬åœ°Raspbianæ“ä½œç³»ç»Ÿä¸Šå®‰è£…çš„ROSï¼Œè¿™æ˜¯å¸¦æœ‰æ›´æ–°çš„å›¾åƒé“¾æ¥çš„é¡µé¢ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ready-to-use-image-raspbian-stretch-ros-opencv</a> <br><br> ç¬¬äºŒä¸ªæ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¥è‡ªubuntuçš„Ubiquiti Robotics</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å›¾åƒ</a> ã€‚ <br><br> å¥½å§ï¼Œç¬¬äºŒä¸ªé—®é¢˜ä¹Ÿå¾ˆå¿«å°±ç»“æŸäº†ã€‚ æ˜¯æ—¶å€™æ·±å…¥äº†è§£äº†ã€‚ <br><br><h3>  3. ROSå¦‚ä½•ä¸Raspberry Piç›¸æœºé…åˆä½¿ç”¨ï¼Ÿ </h3><br>  ROSé€šå¸¸æ”¯æŒå“ªäº›ç«‹ä½“æ‘„åƒæœºï¼Ÿ æˆ‘çœ‹äº†çœ‹å¸¦æœ‰ç«‹ä½“æ‘„åƒæœºçš„é¡µé¢ï¼Œä¸ºæ­¤å£°æ˜äº†ç°æˆçš„ROSé©±åŠ¨ç¨‹åºçš„å¯ç”¨æ€§ï¼Œè¿™æ˜¯ï¼š <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">wiki.ros.org/ä¼ æ„Ÿå™¨</a> <br><br> æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼š <br>  <i><b>2.3 3Dä¼ æ„Ÿå™¨ï¼ˆæµ‹è·ä»ªå’ŒRGB-Dç›¸æœºï¼‰</b></i> <i><br></i>  <i><b>2.5ç›¸æœº</b></i> <br> äº‹å®è¯æ˜ï¼Œåœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œä¸ä»…åˆ—å‡ºäº†ç«‹ä½“ç›¸æœºï¼Œè¿˜åˆ—å‡ºäº†TOFä¼ æ„Ÿå™¨å’Œæ‰«ææ¿€å…‰é›·è¾¾-é€šå¸¸ï¼Œæ‰€æœ‰å¯ä»¥ç«‹å³ä»¥3Då½¢å¼æä¾›ä¿¡æ¯çš„å†…å®¹ã€‚ ç¬¬äºŒï¼Œå·²ç»æœ‰ç«‹ä½“æ‘„åƒæœºã€‚ å°è¯•æŸ¥çœ‹å‡ å°ç«‹ä½“æ‘„åƒæœºçš„é©±åŠ¨ç¨‹åºå¹¶æ²¡æœ‰å¢åŠ æˆ‘çš„ä¹è¶£ï¼Œå› ä¸ºè¿™æš—ç¤ºç€ä»£ç å·²æ²‰æµ¸å…¶ä¸­ã€‚ <br><br> å¥½å§ï¼Œé€€åä¸€æ­¥ã€‚  ROSä¸­çš„å•ä¸ªRaspberry Piç›¸æœºå¦‚ä½•å·¥ä½œï¼Ÿ <br><br> æˆ‘åœ¨è¿™é‡Œç­‰ç€ä¸‰ä¸ªæƒŠå–œï¼š <br><br><ul><li> äº‹å®è¯æ˜ï¼Œå¯¹äºROSï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„<b><i>raspicam_node</i></b>èŠ‚ç‚¹ä»…ç”¨äºRaspberry Piç›¸æœº </li><li> å„ç§å„æ ·çš„èŠ‚ç‚¹éƒ½ä½äºgithubä¸Šï¼Œä»£ç å¾—åˆ°äº†ç§¯æç»´æŠ¤å¹¶å¾—åˆ°äº†å¾ˆå¥½çš„è®°å½•ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github.com/UbiquityRobotics/raspicam_node</a> </li><li>  Rohan AgrawalèŠ‚ç‚¹ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">@Rohbotics</a> ï¼‰çš„ä½œè€…åœ¨ä¸€å®¶ç§¯ææ”¯æŒRaspberry Piçš„ç°æˆå›¾åƒä¹‹ä¸€çš„å…¬å¸å·¥ä½œ </li></ul><br> æˆ‘æŸ¥çœ‹äº†githubå­˜å‚¨åº“raspicam_nodeå¹¶æŸ¥çœ‹äº†é—®é¢˜ã€‚ å¤§çº¦ä¸ƒä¸ªæœˆå‰ï¼Œæˆ‘åœ¨è¿™é‡Œå‘ç°äº†ä¸€ä¸ªåä¸ºâ€œç«‹ä½“å£°æ¨¡å¼â€çš„å¤§é—®é¢˜ï¼Œæ²¡æœ‰ç­”æ¡ˆå’Œè¯„è®ºã€‚ å®é™…ä¸Šï¼Œæ‰€æœ‰äº‹ä»¶éƒ½åœ¨è¿›ä¸€æ­¥å‘å±•ã€‚ <br><br><h3>  4.é“æ†ä¸å¦ï¼Ÿ </h3><br> ä¸ºäº†ä¸å‘å­©å­ä»¬æå‡ºå­©å­ä»¬çš„é—®é¢˜ï¼Œæˆ‘å†³å®šçœ‹ä¸€ä¸‹æºä»£ç ï¼Œå¹¶è¯„ä¼°ä»€ä¹ˆå¨èƒå¢åŠ ç«‹ä½“å£°æ¨¡å¼ã€‚ æˆ‘å¯¹è¿™é‡Œçš„ç³»ç»Ÿéƒ¨åˆ†æ›´æ„Ÿå…´è¶£ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github.com/UbiquityRobotics/raspicam_node/tree/kinetic/src</a> <br> å¥½å§ï¼Œè¿™äº›å®¶ä¼™å†™çš„é©±åŠ¨ç¨‹åºé™·å…¥äº†MMALçº§åˆ«ã€‚ æˆ‘è¿˜è®°å¾—ï¼Œç«‹ä½“å£°æ¨¡å¼ä¸‹çš„æ ‘è“æ´¾çš„æºä»£ç ä¹Ÿæ˜¯å¼€æ”¾çš„ï¼ˆå¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨raspberryè®ºå›ä¸Šæ‰¾åˆ°å…¶</a>æ¼”å˜è¿‡ç¨‹ï¼‰ï¼Œç¼–å†™æˆç†Ÿçš„ç«‹ä½“å£°é©±åŠ¨ç¨‹åºçš„ä»»åŠ¡æ˜¯å¯ä»¥è§£å†³çš„ï¼Œä½†æ˜¯è§„æ¨¡å¾ˆå¤§ã€‚ é€šè¿‡æŸ¥çœ‹å…¶ä»–æ‘„åƒæœºçš„é©±åŠ¨ç¨‹åºçš„æè¿°ï¼Œæˆ‘æ„è¯†åˆ°ä¸ä»…éœ€è¦å‘å¸ƒå·¦å³å›¾ç‰‡ï¼Œè€Œä¸”è¿˜å¿…é¡»æä¾›ä¸¤ä¸ªæ‘„åƒæœºçš„å‚æ•°ï¼Œå°†æ ¡å‡†ç»“æœåº”ç”¨äºæ¯ä¸ªæ‘„åƒæœºï¼Œä»¥åŠæ‰§è¡Œè®¸å¤šå…¶ä»–æ“ä½œã€‚ è¿™å¸å¼•äº†é•¿è¾¾ä¸€ä¸¤ä¸ªæœˆçš„å®éªŒã€‚ å› æ­¤ï¼Œæˆ‘å†³å®šå¹¶è¡ŒåŒ–è¯¥æ–¹æ³•ï¼Œå³ï¼šå‘ä½œè€…å†™ä¸€ä¸ªæœ‰å…³ç«‹ä½“å£°æ”¯æŒçš„é—®é¢˜ï¼Œç„¶åè‡ªå·±å¯»æ‰¾ä¸€ä¸ªæ›´ç®€å•ä½†å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ <br><br><h3>  5.ä¸ä½œè€…çš„å¯¹è¯ </h3><br> åœ¨githubä¸Šæœ‰å…³ç«‹ä½“å£°æ¨¡å¼çš„ä¸»é¢˜ä¸­ï¼Œæˆ‘é—®äº†ä½œè€…ä¸€ä¸ªé—®é¢˜ï¼Œæåˆ°ç«‹ä½“å£°è‡ª2014å¹´ä»¥æ¥ä¸€ç›´å—åˆ°æ ‘è“çš„æ”¯æŒï¼Œå¹¶å»ºè®®ï¼Œå¦‚æœ‰å¿…è¦ï¼Œè¯·ç»™ä»–å‘é€è°ƒè¯•æ¿è¿›è¡Œå®éªŒã€‚ è®©æˆ‘æé†’æ‚¨ï¼Œæˆ‘ä»ç„¶æ€€ç–‘ç«‹ä½“å£°åœ¨è¿™ç§å‘è¡Œç‰ˆä¸­æ˜¯å¦å¯ä»¥åƒæœ¬æœºRaspbiané‚£æ ·å·¥ä½œã€‚ <br><br>  Rohanè¿…é€Ÿåšå‡ºäº†ä»¤äººæƒŠè®¶çš„å›åº”ï¼Œè¯´ä»–ä»¬çš„å‘è¡Œç‰ˆä½¿ç”¨æ ‘è“å†…æ ¸ï¼Œå¹¶ä¸”ä¸€åˆ‡æ­£å¸¸ã€‚ å¹¶è¦æ±‚æ£€æŸ¥å…¶ç»„è£…ä¹‹ä¸€ã€‚ <br><br> æ ‘è“æ ¸ï¼ ä¸‡å²ï¼ ä»ç†è®ºä¸Šè®²ï¼Œåº”è¯¥æ•è·ç«‹ä½“å£°å›¾åƒè€Œä¸ç”¨é“ƒé¼“è·³èˆï¼ <br><br> æˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨Rohançš„é“¾æ¥</a>ä¸‹è½½å¹¶éƒ¨ç½²äº†ä»–ä»¬çš„æœ€æ–°å›¾åƒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼Œ</a>å¹¶è¿è¡Œäº†ä¸€ä¸ªç®€å•çš„pythonè„šæœ¬æ¥æ•è·ç«‹ä½“å£°å¯¹ã€‚ å¥æ•ˆäº†ï¼ <br><br><img src="https://habrastorage.org/webt/vh/6i/fg/vh6ifg37hbuzr0khcyxnuxpq5fa.jpeg" alt="å›¾ç‰‡"><br><br> åœ¨é‚£ä¹‹åï¼ŒRohanå†™é“ä»–å°†æŸ¥çœ‹ç«‹ä½“å£°æ¨¡å¼çš„é©±åŠ¨ç¨‹åºä»£ç ï¼Œå¹¶æå‡ºäº†å‡ ä¸ªé—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„ç«‹ä½“å£°æ¨¡å¼äº§ç”Ÿä¸€å¼ ç²˜è´´çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶åˆ‡æˆä¸¤å¼ -å·¦å³ã€‚ å…³äºæ¯ä¸ªæ‘„åƒæœºçš„æ ¡å‡†å‚æ•°çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯å¦‚ä½•å¤„ç†å®ƒã€‚ <br><br> æˆ‘è¯´è¿‡ï¼Œç¬¬ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥ä»ç›¸æœºç‹¬ç«‹æ‹æ‘„ç…§ç‰‡ã€‚ æ˜¯çš„ï¼Œå®ƒä»¬åœ¨æ‹æ‘„æ—¶é—´å’Œè®¾ç½®ï¼ˆä¾‹å¦‚äº®åº¦å¯¹æ¯”ç™½å¹³è¡¡ï¼‰ä¸Šä¸ä¼šåŒæ­¥ï¼Œä½†æ˜¯ä½œä¸ºç¬¬ä¸€æ­¥ï¼Œè¿™å¾ˆå¯èƒ½ä¼šé™ä½ã€‚ <br><br>  Rohanè¿…é€Ÿ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¨å‡ºäº†ä¸€ä¸ªè¡¥ä¸</a> ï¼Œä½¿æ‚¨å¯ä»¥ç›´æ¥ä»ROSæŒ‡å®šè¦ä»å“ªä¸ªç›¸æœºæ‹æ‘„ç…§ç‰‡ã€‚ æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹-é€‰æ‹©ç›¸æœºå¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè¿™å·²ç»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç»“æœã€‚ <br><br><h3>  6.æ„å¤–çš„å¸®åŠ© </h3><br> ç„¶åï¼Œæ¥è‡ªWezzoidç”¨æˆ·çš„è¯„è®ºå‡ºç°åœ¨çº¿ç¨‹ä¸­ã€‚ ä»–è¯´ï¼Œä»–æ­£åœ¨ä½¿ç”¨æ ‘è“æ´¾å¼€å‘æ¿åœ¨Pi Compute 3ä¸ŠåŸºäºç«‹ä½“ç›¸æœºè¿›è¡Œé¡¹ç›®ã€‚ ä»–çš„å››è¶³æ­¥è¡Œæœºå™¨äººè·Ÿè¸ªäº†ç‰©ä½“åœ¨å¤ªç©ºä¸­çš„ä½ç½®ï¼Œæ›´æ”¹äº†æ‘„åƒå¤´çš„ä½ç½®å¹¶ä¿æŒäº†æŒ‡å®šçš„è·ç¦»ï¼ˆè¯¥é¡¹ç›®å‘å¸ƒåœ¨hackaday.ioä¸Šï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/og/sp/iy/ogspiywmjvs67yhodxpbes0pd-8.jpeg" alt="å›¾ç‰‡"><br><br> ç„¶åï¼Œä»–åˆ†äº«äº†æŠ“å–å›¾ç‰‡çš„ä»£ç ï¼Œå¹¶ç”¨pythonå°†å…¶åˆ‡æˆä¸¤åŠï¼Œç„¶ååƒå·¦å³æ‘„åƒæœºçš„èŠ‚ç‚¹ä¸€æ ·è¿›è¡Œå…±äº«ã€‚ <br> åœ¨è¿™äº›é—®é¢˜ä¸Šï¼ŒPythonå¹¶ä¸æ˜¯ä¸€ä¸ªéå¸¸å¿«çš„æœ‹å‹ï¼Œå› æ­¤ä»–ä½¿ç”¨äº†320x240çš„ä½åˆ†è¾¨ç‡å’Œä¸é”™çš„ç”Ÿæ´»æŠ€å·§ã€‚ å¦‚æœæˆ‘ä»¬æ•è·ä¸€ä¸ªå¹¶æ’çš„ç«‹ä½“å›¾åƒï¼ˆç«‹ä½“å›¾åƒå·¦ä¾§çš„ä¸€å°æ‘„åƒæœºï¼Œå³ä¾§çš„ç¬¬äºŒå°æ‘„åƒæœºï¼‰ï¼Œåˆ™pythonåº”è¯¥å°†240è¡Œä¸­çš„æ¯è¡Œéƒ½åˆ‡æˆä¸¤åŠã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åˆ¶ä½œä¸€å¼ ä¸Šä¸‹å›¾ç‰‡ï¼ˆå·¦æ‘„åƒæœºæ˜¯å¸§çš„ä¸ŠåŠéƒ¨ï¼Œå³æ‘„åƒæœºæ˜¯ä¸‹åŠéƒ¨ï¼‰ï¼Œåˆ™pythonä¼šåœ¨ä¸€æ¬¡æ“ä½œä¸­å°†æ•°ç»„åˆ‡æˆä¸¤åŠã€‚ è¿™æ˜¯ç”±ç”¨æˆ·WezzoidæˆåŠŸå®Œæˆçš„ã€‚ <br> å¦å¤–ï¼Œä»–å°†è‡ªå·±çš„pythonä»£ç å‘å¸ƒåˆ°äº†Pastebinä¸Šï¼Œè¯¥æ“ä½œå³å¯å®Œæˆã€‚ è¿™æ˜¯ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">Wezzoidä»£ç ï¼Œç”¨äºå‘å¸ƒç«‹ä½“å£°å¯¹ä¸­ä¸¤ä¸ªæ‘„åƒæœºçš„èŠ‚ç‚¹</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # picamera stereo ROS node using dual CSI Pi CS3 board # Wes Freeman 2018 # modified from code by Adrian Rosebrock, pyimagesearch.com # and jensenb, https://gist.github.com/jensenb/7303362 from picamera.array import PiRGBArray from picamera import PiCamera import time import rospy from sensor_msgs.msg import CameraInfo, Image import yaml import io import signal # for ctrl-C handling import sys def parse_calibration_yaml(calib_file): with file(calib_file, 'r') as f: params = yaml.load(f) cam_info = CameraInfo() cam_info.height = params['image_height'] cam_info.width = params['image_width'] cam_info.distortion_model = params['distortion_model'] cam_info.K = params['camera_matrix']['data'] cam_info.D = params['distortion_coefficients']['data'] cam_info.R = params['rectification_matrix']['data'] cam_info.P = params['projection_matrix']['data'] return cam_info # cam resolution res_x = 320 #320 # per camera res_y = 240 #240 target_FPS = 15 # initialize the camera print "Init camera..." camera = PiCamera(stereo_mode = 'top-bottom',stereo_decimate=False) camera.resolution = (res_x, res_y*2) # top-bottom stereo camera.framerate = target_FPS # using several camera options can cause instability, hangs after a while camera.exposure_mode = 'antishake' #camera.video_stabilization = True # fussy about res? stream = io.BytesIO() # ---------------------------------------------------------- #setup the publishers print "init publishers" # queue_size should be roughly equal to FPS or that causes lag? left_img_pub = rospy.Publisher('left/image_raw', Image, queue_size=1) right_img_pub = rospy.Publisher('right/image_raw', Image, queue_size=1) left_cam_pub = rospy.Publisher('left/camera_info', CameraInfo, queue_size=1) right_cam_pub = rospy.Publisher('right/camera_info', CameraInfo, queue_size=1) rospy.init_node('stereo_pub') # init messages left_img_msg = Image() left_img_msg.height = res_y left_img_msg.width = res_x left_img_msg.step = res_x*3 # bytes per row: pixels * channels * bytes per channel (1 normally) left_img_msg.encoding = 'rgb8' left_img_msg.header.frame_id = 'stereo_camera' # TF frame right_img_msg = Image() right_img_msg.height = res_y right_img_msg.width = res_x right_img_msg.step = res_x*3 right_img_msg.encoding = 'rgb8' right_img_msg.header.frame_id = 'stereo_camera' imageBytes = res_x*res_y*3 # parse the left and right camera calibration yaml files left_cam_info = parse_calibration_yaml('/home/pi/catkin_ws/src/mmstereocam/camera_info/left.yaml') right_cam_info = parse_calibration_yaml('/home/pi/catkin_ws/src/mmstereocam/camera_info/right.yaml') # --------------------------------------------------------------- # this is supposed to shut down gracefully on CTRL-C but doesn't quite work: def signal_handler(signal, frame): print 'CTRL-C caught' print 'closing camera' camera.close() time.sleep(1) print 'camera closed' sys.exit(0) signal.signal(signal.SIGINT, signal_handler) #----------------------------------------------------------- print "Setup done, entering main loop" framecount=0 frametimer=time.time() toggle = True # capture frames from the camera for frame in camera.capture_continuous(stream, format="rgb", use_video_port=True): framecount +=1 stamp = rospy.Time.now() left_img_msg.header.stamp = stamp right_img_msg.header.stamp = stamp left_cam_info.header.stamp = stamp right_cam_info.header.stamp = stamp left_cam_pub.publish(left_cam_info) right_cam_pub.publish(right_cam_info) frameBytes = stream.getvalue() left_img_msg.data = frameBytes[:imageBytes] right_img_msg.data = frameBytes[imageBytes:] #publish the image pair left_img_pub.publish(left_img_msg) right_img_pub.publish(right_img_msg) # console info if time.time() &gt; frametimer +1.0: if toggle: indicator = ' o' # just so it's obviously alive if values aren't changing else: indicator = ' -' toggle = not toggle print 'approx publish rate:', framecount, 'target FPS:', target_FPS, indicator frametimer=time.time() framecount=0 # clear the stream ready for next frame stream.truncate(0) stream.seek(0)</span></span></code> </pre> <br></div></div><br><h3>  7.å¼€å§‹å‘å¸ƒå·¦å³æ‘„åƒæœºçš„èŠ‚ç‚¹ </h3><br> æœ€åˆï¼Œä»£ç ä¼šè¯…å’’æ— æ³•è®¿é—®å¸¦æœ‰ç›¸æœºå‚æ•°çš„YMLæ–‡ä»¶ã€‚ æˆ‘ä½¿ç”¨äº†æ ‘è“è‰²çš„V2ç›¸æœºï¼Œå¹¶è®°å¾—å¸¦æœ‰ä¸åŒç›¸æœºå‹å·çš„æ ¡å‡†ç»“æœçš„ç°æˆæ–‡ä»¶è¿›å…¥githubä¸Šçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">raspicam_node</a> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github.com/UbiquityRobotics/raspicam_node/tree/kinetic/camera_info</a> <br> æˆ‘æ‹¿äº†å…¶ä¸­ä¸€ä¸ªï¼Œåˆ¶ä½œäº†ä¸¤ä¸ªå‰¯æœ¬ï¼Œå¹¶åˆ†åˆ«ä»¥left.ymlå’Œright.ymlçš„åç§°ä¿å­˜ï¼Œå¹¶ç”¨ä½œè€…è„šæœ¬ç¼–å†™äº†æ‘„åƒæœºçš„åˆ†è¾¨ç‡ã€‚ è¿™æ˜¯å·¦é•œå¤´å‘ç”Ÿçš„æƒ…å†µï¼š <br><br><div class="spoiler">  <b class="spoiler_title">left.yml</b> <div class="spoiler_text"><pre> <code class="xml hljs">image_width: 320 image_height: 240 camera_name: left camera_matrix: rows: 3 cols: 3 data: [1276.704618338571, 0, 634.8876509199106, 0, 1274.342831275509, 379.8318028940378, 0, 0, 1] distortion_model: plumb_bob distortion_coefficients: rows: 1 cols: 5 data: [0.1465167016954302, -0.2847343180128725, 0.00134017721235817, -0.004309553450829512, 0] rectification_matrix: rows: 3 cols: 3 data: [1, 0, 0, 0, 1, 0, 0, 0, 1] projection_matrix: rows: 3 cols: 4 data: [1300.127197265625, 0, 630.215390285608, 0, 0, 1300.670166015625, 380.1702884455881, 0, 0, 0, 1, 0]</code> </pre> <br></div></div><br> å¯¹äºå³ä¾§ï¼Œå°†æ‘„åƒæœºåç§°æ›¿æ¢ä¸ºrightï¼Œå¹¶å°†æ–‡ä»¶æœ¬èº«å‘½åä¸ºright.ymlã€‚ æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†ç›¸åŒã€‚ <br><br> ç”±äºæˆ‘ä¸æ‰“ç®—è¿›è¡Œå¤æ‚çš„é¡¹ç›®ï¼Œå› æ­¤ï¼Œæˆ‘æ²¡æœ‰é‡å¤ä½¿ç”¨å­æ–‡ä»¶å¤¹é‡å¤ä½œè€…çš„é•¿è·¯å¾„ï¼Œè€Œåªæ˜¯å°†æ–‡ä»¶æ”¾åœ¨pythonè„šæœ¬æ—è¾¹çš„ä¸»æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸­ã€‚ ä»£ç æˆåŠŸå¯åŠ¨ï¼Œåœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯ã€‚ <br><br><img src="https://habrastorage.org/webt/sz/oi/my/szoimymcugjmfggyfdez98l3kku.jpeg" alt="å›¾ç‰‡"><br><br> å‰©ä¸‹çš„å°±æ˜¯çœ‹çœ‹æˆ‘ä»¬çš„å·¦å³æ‘„åƒæœºæœ€ç»ˆå‘å¸ƒäº†ä»€ä¹ˆã€‚ ä¸ºæ­¤ï¼Œæˆ‘å¯åŠ¨äº†rqt_image_viewã€‚  /å·¦/ image_rawå’Œ/å³/ image_rawé¡¹ç›®å‡ºç°åœ¨ä¸‹æ‹‰èœå•ä¸­ï¼Œå½“æˆ‘é€‰æ‹©å®ƒä»¬æ—¶ï¼Œæˆ‘çœ‹åˆ°äº†å·¦å³æ‘„åƒæœºçš„å›¾åƒã€‚ <br><br><img src="https://habrastorage.org/webt/og/1i/du/og1iduqsqdfjq_j2ijp-fkzfxhm.jpeg" alt="å›¾ç‰‡"><br><br> å¥½å§ï¼Œè¿™ä¸œè¥¿èµšäº†ï¼ ç°åœ¨æœ‰è¶£çš„éƒ¨åˆ†ã€‚ <br><br><h3>  8.æˆ‘ä»¬çœ‹ä¸€ä¸‹æ·±åº¦å›¾ã€‚ </h3><br> è¦æŸ¥çœ‹æ·±åº¦å›¾ï¼Œæˆ‘æ²¡æœ‰æƒ³å‡ºè‡ªå·±çš„æ–¹æ³•ï¼Œè€Œæ˜¯ç¿»é˜…äº†ç»å…¸çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ROSæ‰‹å†Œæ¥è®¾ç½®ç«‹ä½“å£°å‚æ•°</a> ã€‚ <br> ä»é‚£é‡Œï¼Œæˆ‘å‘ç°æœ€å¥½å°†ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å‘å¸ƒåœ¨ç‰¹å®šçš„åç§°ç©ºé—´ä¸­ï¼Œè€Œä¸æ˜¯åƒWezzoidé‚£æ ·åœ¨æ ¹ç›®å½•ä¸­å‘å¸ƒã€‚ ç»“æœï¼Œè¡¨æ ¼çš„æ—§ç‰ˆæœ¬ <br><br><pre> <code class="python hljs">left_img_pub = rospy.Publisher(<span class="hljs-string"><span class="hljs-string">'left/image_raw'</span></span>, Image, queue_size=<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br> å¼€å§‹çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="python hljs">left_img_pub = rospy.Publisher(<span class="hljs-string"><span class="hljs-string">'stereo/right/image_raw'</span></span>, Image, queue_size=<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br> ä¹‹åï¼Œæˆ‘ä»¬å¯åŠ¨stereo_image_procç«‹ä½“å£°æ¨¡å¼å¤„ç†èŠ‚ç‚¹ï¼š <br><br><pre> <code class="bash hljs">ROS_NAMESPACE=stereo rosrun stereo_image_proc stereo_ige_proc</code> </pre> <br> å¥½äº†ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³çœ‹ä¸€ä¸‹ç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬å¯åŠ¨è§‚å¯Ÿå™¨ï¼š <br><br><pre> <code class="bash hljs">rosrun image_view stereo_view stereo:=/stereo image:=image_rect_color</code> </pre> <br> è¦é…ç½®æ·±åº¦å›¾çš„å‚æ•°ï¼Œè¯·è¿è¡Œé…ç½®å®ç”¨ç¨‹åºï¼š <br><br><pre> <code class="bash hljs">rosrun rqt_reconfigure rqt_reconfigure</code> </pre> <br> ç»“æœï¼Œæˆ‘ä»¬åœ¨æ–‡ç« çš„å¼€å¤´çœ‹åˆ°äº†å›¾ç‰‡ã€‚ è¿™é‡Œæ›´å¤§ï¼š <br><br><img src="https://habrastorage.org/webt/qc/oy/s8/qcoys8o4-yrwfxgc7kynjrxhd9m.jpeg" alt="å›¾ç‰‡"><br><br> æˆ‘åœ¨githubä¸Šå‘å¸ƒçš„æ‰€æœ‰æ–‡ä»¶ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github.com/realizator/StereoPi-ROS-depth-map-test</a> <br><br><h3>  9.è¿‘æœŸè®¡åˆ’ </h3><br> å½“æˆ‘åœ¨githubä¸Šçš„è®¨è®ºä¸­å‘è¡¨ç»“æœåï¼ŒRohanå†™é“ï¼šâ€œé…·ï¼ æˆ‘éœ€è¦å»æ¥æˆ‘çš„StereoPiã€‚â€ æˆ‘ä»¬é€šè¿‡é‚®ä»¶ç»™ä»–å†™ä¿¡ï¼Œæˆ‘ä»˜äº†ä»–è´¹ç”¨ã€‚ æˆ‘å¸Œæœ›é€šè¿‡ä»–æ‰‹ä¸­çš„å¯ç”¨ç¡¬ä»¶ï¼Œä»–å¯ä»¥æ›´è½»æ¾åœ°å®Œæˆå’Œè°ƒè¯•ç”¨äºROSå’ŒRaspberryçš„æˆç†Ÿçš„ç«‹ä½“å£°é©±åŠ¨ç¨‹åºã€‚ <br><br><h3>  10.æ€»ç»“ </h3><br> å¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼ä»ROSä¸­çš„æ ‘è“ä¸Šçš„ç«‹ä½“å›¾åƒè·å–æ·±åº¦å›¾ã€‚ å°±æ€§èƒ½è€Œè¨€ï¼Œé€‰æ‹©ç”¨äºå¿«é€ŸéªŒè¯çš„è·¯å¾„ä¸æ˜¯æœ€ä½³çš„ï¼Œä½†å¯ç”¨äºåº”ç”¨ç›®çš„ã€‚ å…¶ç®€å•æ€§ä¹‹ç¾å’Œç«‹å³å¯åŠ¨å®éªŒçš„èƒ½åŠ›ã€‚ <br><br> å¥½å§ï¼Œæœ‰è¶£çš„æ˜¯ï¼šæ”¶åˆ°ç»“æœåï¼Œæˆ‘æ³¨æ„åˆ°æå‡ºè§£å†³æ–¹æ¡ˆçš„éŸ¦ä½å¾·æ˜¯æœ‰å…³å‡ºç‰ˆä¸¤å¼ ç«‹ä½“å›¾ç‰‡çš„é—®é¢˜çš„ä½œè€…ã€‚ ä»–é—®è‡ªå·±ï¼Œä»–å†³å®šã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN431092/">https://habr.com/ru/post/zh-CN431092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN431082/index.html">Kotlinï¼šå¯»æ‰¾è¥é”€ä¸»ç®¡</a></li>
<li><a href="../zh-CN431084/index.html">åœ¨ä»»ä½•æ— æ³•ç†è§£çš„æƒ…å†µä¸‹-ç¼–å†™è„šæœ¬</a></li>
<li><a href="../zh-CN431086/index.html">æ‚¨æƒ³è¦äº†è§£çš„æœ‰å…³PVS-Studioçš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥éšæ—¶è¯¢é—®</a></li>
<li><a href="../zh-CN431088/index.html">æ–‡ä»¶ç®¡ç†åšé”™äº†-ç¬¬1éƒ¨åˆ†ï¼šæœ€åˆæ˜¯90å¹´ä»£</a></li>
<li><a href="../zh-CN431090/index.html">ä¸€ä¸ªVKæœºå™¨äººï¼Œä¸€ä¸ªCï¼ƒå’Œä¸€ä¸ªæ©™è‰²</a></li>
<li><a href="../zh-CN431094/index.html">çº¸ç‰Œæ’åº</a></li>
<li><a href="../zh-CN431096/index.html">å¦‚ä½•æ„å»ºèŠå¤©æœºå™¨äººäº§å“</a></li>
<li><a href="../zh-CN431098/index.html">å³ä½¿æ˜¯ç«ç¾ä¹Ÿä¸æ˜¯éšœç¢ï¼Œä¹Ÿä¸æ˜¯ç¾éš¾å‘ç”Ÿåçš„Zimbra Speed Recovery</a></li>
<li><a href="../zh-CN431102/index.html">ç‰©ç†åœ°å€å¦‚ä½•æ˜¾ç¤ºåœ¨DRAMå­—ç¬¦ä¸²å’Œå­˜å‚¨åŒºä¸­</a></li>
<li><a href="../zh-CN431104/index.html">æˆ‘ä»¬Neoflexå¦‚ä½•å¼€å‘DevOpsä¸“ä¸šçŸ¥è¯†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>