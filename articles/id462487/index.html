<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛺️ 😍 👧🏽 Cython: Lebih dari 30x Akselerasi Kode Python 🧖🏿 🎮 🦄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Python adalah bahasa yang disukai banyak programmer. Bahasa ini sangat mudah digunakan. Masalahnya adalah bahwa kode yang ditulis dengan Python intuit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cython: Lebih dari 30x Akselerasi Kode Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/462487/"> Python adalah bahasa yang disukai banyak programmer.  Bahasa ini sangat mudah digunakan.  Masalahnya adalah bahwa kode yang ditulis dengan Python intuitif dan mudah dibaca.  Namun, dalam percakapan tentang Python orang sering dapat mendengar keluhan yang sama tentang bahasa ini.  Terutama ketika para pakar C berbicara tentang Python. Begitulah kedengarannya: "Python lambat."  Dan mereka yang berkata demikian tidak berdosa terhadap kebenaran. <br><br>  Dibandingkan dengan banyak bahasa pemrograman lain, Python memang lambat.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berikut adalah</a> hasil pengujian yang membandingkan kinerja berbagai bahasa pemrograman dalam menyelesaikan berbagai masalah. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/yj/2f/ig/yj2figmt6bot5ytlcmommmnjrzm.jpeg"></a> <br><br>  Ada beberapa cara untuk mempercepat program Python.  Misalnya, Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perpustakaan yang</a> dirancang untuk menggunakan beberapa inti prosesor.  Mereka yang bekerja dengan Numpy, Pandas, atau Scikit-Learn dapat disarankan untuk melihat paket perangkat lunak <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rapids</a> , yang memungkinkan Anda untuk menggunakan GPU dalam perhitungan ilmiah. <br><a name="habracut"></a><br>  Semua teknik akselerasi ini bagus dalam kasus-kasus di mana tugas-tugas yang dapat diselesaikan menggunakan Python dapat diparalelkan.  Sebagai contoh, ini adalah tugas untuk pemrosesan data awal atau operasi dengan matriks. <br><br>  Tetapi bagaimana jika kode Anda adalah Python murni?  Bagaimana jika Anda memiliki loop besar <code>for</code> yang benar-benar harus Anda gunakan, dan eksekusi yang tidak dapat diparalelkan karena fakta bahwa data yang diproses di dalamnya harus diproses secara berurutan?  Apakah ada cara untuk mempercepat Python itu sendiri? <br><br>  Jawaban atas pertanyaan ini diberikan oleh Cython - sebuah proyek yang Anda gunakan untuk mempercepat kode yang ditulis dengan Python. <br><br><h2>  <font color="#3AC1EF">Apa itu Cython?</font> </h2><br>  Cython, pada intinya, adalah lapisan perantara antara Python dan C / C ++.  Cython memungkinkan Anda untuk menulis kode Python biasa dengan beberapa modifikasi kecil, yang kemudian langsung diterjemahkan ke dalam kode C. <br><br>  Satu-satunya perubahan pada kode Python adalah menambahkan informasi tentang jenisnya ke setiap variabel.  Saat menulis kode Python biasa, Anda dapat mendeklarasikan variabel seperti ini: <br><br><pre> <code class="python hljs">x = <span class="hljs-number"><span class="hljs-number">0.5</span></span></code> </pre> <br>  Saat menggunakan Cython saat mendeklarasikan variabel, Anda perlu menentukan tipenya: <br><br><pre> <code class="python hljs">cdef float x = <span class="hljs-number"><span class="hljs-number">0.5</span></span></code> </pre> <br>  Konstruk ini memberi tahu Cython bahwa variabelnya adalah angka floating point.  Dengan prinsip yang sama, variabel dideklarasikan dalam C. Menggunakan Python biasa, tipe variabel didefinisikan secara dinamis.  Deklarasi tipe eksplisit yang digunakan dalam Cython adalah apa yang memungkinkan untuk mengkonversi kode Python ke kode C.  Intinya adalah bahwa dalam C, deklarasi eksplisit jenis variabel diperlukan. <br><br>  Instalasi Cython sangat sederhana: <br><br><pre> <code class="python hljs">pip install cython</code> </pre> <br><h2>  <font color="#3AC1EF">Ketik dalam Cython</font> </h2><br>  Saat menggunakan Cython, dua set tipe dapat dibedakan.  Satu untuk variabel, yang kedua untuk fungsi. <br><br>  Jika kita berbicara tentang variabel, maka tipe berikut tersedia untuk kita: <br><br><ul><li> <code>cdef int a, b, c</code> </li> <li> <code>cdef char *s</code> </li> <li>  <code>cdef float x = 0.5</code> (angka presisi tunggal) </li><li>  <code>cdef double x = 63.4</code> (angka presisi ganda) </li><li> <code>cdef list names</code> </li> <li> <code>cdef dict goals_for_each_play</code> </li> <li> <code>cdef object card_deck</code> </li> </ul><br>  Harap dicatat bahwa di sini, sebenarnya, tipe C / C ++ diperlihatkan! <br><br>  Saat bekerja dengan fungsi, tipe berikut tersedia untuk kami: <br><br><ul><li>  <code>def</code> adalah fungsi Python biasa, yang hanya dipanggil dari Python. </li><li>  <code>cdef</code> adalah fungsi Cython yang tidak dapat dipanggil dari kode Python biasa.  Fungsi semacam itu hanya dapat dipanggil dalam kode Cython. </li><li>  <code>cpdef</code> - Fungsi yang dapat diakses dari C dan Python. </li></ul><br>  Sekarang setelah kami mengetahui jenis-jenis Python, kami akan mengambil kecepatan kode Python. <br><br><h2>  <font color="#3AC1EF">Mempercepat kode menggunakan Cython</font> </h2><br>  Mari kita mulai dengan membuat tolok ukur Python.  Ini akan menjadi <code>for</code> di mana faktorial suatu angka dihitung.  Kode Python murni yang sesuai akan terlihat seperti ini: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span>    y = <span class="hljs-number"><span class="hljs-number">1</span></span>    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, x+<span class="hljs-number"><span class="hljs-number">1</span></span>):        y *= i    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> y</code> </pre> <br>  Setara cython dari fungsi ini sangat mirip dengan versi aslinya.  Kode yang sesuai harus ditempatkan dalam file dengan ekstensi <code>.pyx</code> .  Satu-satunya perubahan yang perlu dilakukan pada kode adalah menambahkan informasi tentang jenis variabel dan fungsinya: <br><br><pre> <code class="python hljs">cpdef int test(int x):    cdef int y = <span class="hljs-number"><span class="hljs-number">1</span></span>    cdef int i    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, x+<span class="hljs-number"><span class="hljs-number">1</span></span>):        y *= i    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> y</code> </pre> <br>  Perhatikan bahwa fungsi tersebut memiliki kata kunci <code>cpdef</code> sebelumnya.  Ini memungkinkan Anda untuk memanggil fungsi ini dari Python.  Selain itu, jenis ini ditugaskan untuk variabel <code>i</code> , yang memainkan peran penghitung lingkaran.  Jangan lupa bahwa kita perlu mengetikkan semua variabel yang dideklarasikan dalam fungsi.  Ini akan membuat kompiler C tahu tipe mana yang digunakan. <br><br>  Sekarang buat <code>setup.py</code> , yang akan membantu kami mengonversi kode Cython ke kode C: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> distutils.core <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> setup <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Cython.Build <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cythonize setup(ext_modules = cythonize(<span class="hljs-string"><span class="hljs-string">'run_cython.pyx'</span></span>))</code> </pre> <br>  Mari kita kompilasi: <br><br><pre> <code class="python hljs">python setup.py build_ext --inplace</code> </pre> <br>  Kode C sekarang siap digunakan. <br><br>  Jika Anda melihat folder di mana kode Cython berada, di sana Anda dapat menemukan semua file yang diperlukan untuk menjalankan kode C, termasuk file <code>run_cython.c</code> .  Jika Anda tertarik, buka file ini dan lihat kode-C apa yang dihasilkan oleh Cython. <br><br>  Sekarang Anda siap untuk menguji kode C ultrafast kami.  Di bawah ini adalah kode yang digunakan untuk menguji dan membandingkan dua versi program. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> run_python <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> run_cython <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time number = <span class="hljs-number"><span class="hljs-number">10</span></span> start = time.time() run_python.test(number) end = time.time() py_time = end - start print(<span class="hljs-string"><span class="hljs-string">"Python time = {}"</span></span>.format(py_time)) start = time.time() run_cython.test(number) end = time.time() cy_time = end - start print(<span class="hljs-string"><span class="hljs-string">"Cython time = {}"</span></span>.format(cy_time)) print(<span class="hljs-string"><span class="hljs-string">"Speedup = {}"</span></span>.format(py_time / cy_time))</code> </pre> <br>  Kode ini sangat sederhana.  Kami mengimpor file yang diperlukan - seperti halnya file Python biasa yang diimpor, dan kemudian kami memanggil fungsi yang sesuai, melakukannya dengan cara yang sama seperti jika kami akan bekerja dengan fungsi Python biasa sepanjang waktu. <br><br>  Lihatlah tabel berikut.  Anda mungkin memperhatikan bahwa versi program Cython lebih cepat daripada versi Python dalam semua kasus.  Semakin besar tugas, semakin besar akselerasi yang disediakan Cython. <br><div class="scrollable-table"><table><tbody><tr><td>  <b>Nomor</b> <br></td><td>  <b>Metrik Waktu Python</b> <br></td><td>  <b>Metrik Waktu Cython</b> <br></td><td>  <b>Skor percepatan</b> <br></td></tr><tr><td>  10 <br></td><td>  1.6689300537109375e-06 <br></td><td>  4.76837158203125e-07 <br></td><td>  3.5 <br></td></tr><tr><td>  100 <br></td><td>  3.337860107421875e-06 <br></td><td>  4.76837158203125e-07 <br></td><td>  7.0 <br></td></tr><tr><td>  1000 <br></td><td>  2.193450927734375e-05 <br></td><td>  9.5367431640625e-07 <br></td><td>  23.0 <br></td></tr><tr><td>  10.000 <br></td><td>  0,0002090930938720703 <br></td><td>  6.4373016357421875e-06 <br></td><td>  32.481 <br></td></tr><tr><td>  100.000 <br></td><td>  0,0021562576293945312 <br></td><td>  6.008148193359375e-05 <br></td><td>  35.89 <br></td></tr><tr><td>  1.000.000 <br></td><td>  0,02128767967224121 <br></td><td>  0.0005953311920166016 <br></td><td>  35.75 <br></td></tr><tr><td>  10.000.000 <br></td><td>  0,2148280143737793 <br></td><td>  0,00594782829284668 <br></td><td>  36.1187317112278 <br></td></tr></tbody></table></div><br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Menggunakan Cython secara signifikan dapat mempercepat hampir semua kode yang ditulis dengan Python, tanpa melakukan upaya khusus.  Semakin banyak loop dalam program dan semakin banyak data yang diproses - hasil yang lebih baik dapat Anda harapkan dari Cython. <br><br>  <b>Pembaca yang budiman!</b>  Apakah Anda menggunakan Cython dalam proyek Anda? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id462487/">https://habr.com/ru/post/id462487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id462477/index.html">Para ilmuwan mengklaim AI sebagai penulis paten baru dan sedang berusaha mengubah hukum paten</a></li>
<li><a href="../id462479/index.html">Uap Eskalasi Privilege Lokal Klien Windows 0 hari</a></li>
<li><a href="../id462481/index.html">Ketik FAQ Sistem</a></li>
<li><a href="../id462483/index.html">Pemrograman fungsional: mainan aneh yang membunuh produktivitas tenaga kerja. Bagian 1</a></li>
<li><a href="../id462485/index.html">Pemrograman fungsional: mainan aneh yang membunuh produktivitas tenaga kerja. Bagian 2</a></li>
<li><a href="../id462489/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 374 (29 Juli - 4 Agustus 2019)</a></li>
<li><a href="../id462493/index.html">Multimodel DBMS - dasar sistem informasi modern?</a></li>
<li><a href="../id462495/index.html">Acara digital di Moskow dari 05 hingga 11 Agustus</a></li>
<li><a href="../id462501/index.html">Mengapa saya memerlukan otoritas sertifikasi saya sendiri</a></li>
<li><a href="../id462503/index.html">Untuk apa "sinyal emas" pemantauan dan SRE?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>