<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóùÔ∏è üë©üèª‚Äçüöí ‚úãüèº Les difficult√©s de travailler avec Redux et leur solution ü§∞üèª üôáüèø üç¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Redux parmi nous 
 C'est l'un des gestionnaires d'√âtat les plus populaires. 

 Il est facile √† utiliser, transparent et pr√©visible. Avec lui, vous pou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Les difficult√©s de travailler avec Redux et leur solution</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459460/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df8/bc8/3b0/df8bc83b092a5fd1f20da8bee9ffd297.png" alt="image"></div><br><h3>  Redux parmi nous </h3><br>  C'est l'un des <i>gestionnaires d'√âtat</i> les plus populaires. <br><br>  Il est facile √† utiliser, transparent et pr√©visible.  Avec lui, vous pouvez organiser le stockage et la modification des donn√©es.  Et si nous supposons que les <i>actions</i> `et les <i>r√©ducteurs</i> font partie de <i>redux`</i> a, alors nous pouvons dire sans exag√©ration qu'il est le d√©tenteur de toute la logique du domaine (aka la logique m√©tier) de nos applications. <br><br><h3>  Est-ce que tout est si rose? </h3><br>  Malgr√© toute sa simplicit√© et sa transparence, l'utilisation de <i>redux</i> pr√©sente un certain nombre d'inconv√©nients ... <br><a name="habracut"></a><br>  Les donn√©es dans l' <i>√©tat</i> ¬´ <i>redux¬ª</i> et se trouvent dans un simple objet <i>javascript</i> et peuvent √™tre obtenues de la mani√®re habituelle, il vous suffit de <b>conna√Ætre le chemin</b> . <br><br>  Mais comment organiser ces donn√©es?  Il n'y a que 2 options: une <u>liste plate</u> et un <u>mod√®le hi√©rarchique</u> . <br><br>  Une liste plate est une excellente option pour une application dans laquelle il n'y a, par exemple, qu'un compteur ... Pour quelque chose de plus s√©rieux, nous avons besoin d'une structure hi√©rarchique.  De plus, chaque niveau de donn√©es aura moins de connaissances que le pr√©c√©dent.  Tout est logique et compr√©hensible, mais le <b>chemin vers les donn√©es devient composite</b> . <br><br><div class="spoiler">  <b class="spoiler_title">Exemple</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataHierarchy = { <span class="hljs-attr"><span class="hljs-attr">user</span></span>: { id, name, experience, <span class="hljs-attr"><span class="hljs-attr">achievements</span></span>: { firstTraining, threeTrainingsInRow, }, }, <span class="hljs-attr"><span class="hljs-attr">training</span></span>: { currentSetId, status, totalAttemptsCount, attemptsLeft, <span class="hljs-attr"><span class="hljs-attr">mechanics</span></span>: { ... }, }, };</code> </pre> <br>  Ici, sous la cl√© utilisateur, les donn√©es utilisateur sont stock√©es, en particulier les r√©alisations.  Mais les r√©alisations n'ont pas besoin de conna√Ætre le reste des donn√©es de l'utilisateur. <br><br>  De la m√™me mani√®re, les m√©canismes sp√©cifiques de la formation n'ont pas besoin de savoir combien de tentatives l'utilisateur a laiss√©es - ce sont des donn√©es de formation en g√©n√©ral. <br></div></div><br><br>  La pr√©sence d'une structure de donn√©es hi√©rarchique et l'absence d'une approche modulaire de ces donn√©es conduit au fait que <b>partout</b> o√π ces donn√©es sont utilis√©es, <b>il est n√©cessaire de conna√Ætre le chemin</b> d' <b>acc√®s complet</b> √† celles-ci.  En d'autres termes, cela cr√©e une <b>coh√©sion de la structure de stockage de donn√©es et de ses structures d'affichage</b> et conduit √† des difficult√©s avec le refactoriseur de chemin et / ou la r√©organisation de la structure de donn√©es. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a5/05a/d97/3a505ad974baa4a9e17bff93588ab34a.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">La magie IDE n'aidera pas</b> <div class="spoiler_text">  Nous pouvons dire qu'il existe maintenant de puissants IDE qui changent les chemins avec une seule commande, mais peu peuvent changer plusieurs cl√©s imbriqu√©es d'un objet ou comprendre qu'une partie du chemin se trouve dans une variable. <br></div></div><br>  Un autre d√©fi est le test.  Oui, il y a un article s√©par√© dans la documentation pour les tests <i>redux</i> , mais maintenant il ne s'agit pas de tester des artefacts individuels comme le <i>r√©ducteur</i> et l' <i>action-creater</i> . <br><br>  Les donn√©es, les <i>actions</i> et les <i>r√©ducteurs</i> sont g√©n√©ralement interconnect√©s.  Et un arbre de donn√©es logiquement li√©es est souvent servi par plusieurs <i>r√©ducteurs</i> , qui doivent √™tre test√©s, y compris ensemble. <br><br>  Ajouter √† cette liste des <i>s√©lecteurs</i> dont les r√©sultats d√©pendent notamment du travail des <i>r√©ducteurs</i> ... <br><br>  En g√©n√©ral, vous pouvez tester tout cela, mais vous devez faire face √† un tas d'artefacts qui ne sont interconnect√©s que par la logique et les conventions. <br><br>  Et si nous arrivions √† une structure, par exemple, avec des donn√©es utilisateur, y compris des listes d'amis, des chansons pr√©f√©r√©es et quelque chose d'autre, ainsi que la fonctionnalit√© de les changer via des <i>r√©ducteurs d'action</i> .  Peut-√™tre que nous avons m√™me √©crit un tas de tests pour toutes ces fonctionnalit√©s.  Et maintenant, dans le prochain projet, nous avons besoin de la m√™me chose ... <br><br>  <b>Comment coder √† moindre co√ªt?</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06f/de3/217/06fde3217b754843ff3e41a272602bae.gif" alt="image"></div><br><h3>  Rechercher une solution </h3><br>  Afin de comprendre comment pr√©server les avantages de <i>redux</i> et √©liminer les inconv√©nients d√©crits, vous devez comprendre de quoi il d√©pend dans le cycle de vie des donn√©es: <br><br><ul><li>  <i>√âv√©nements de</i> rapport d'action, personnalis√©s et plus </li><li>  <i>Le r√©ducteur</i> r√©agit aux <i>actions</i> et change ou ne change pas l'√©tat des donn√©es </li><li>  La modification des donn√©es est un √©v√©nement en soi et peut entra√Æner la modification d'autres donn√©es. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b4/afb/955/0b4afb95591ec1d921c0a06948d2a60e.png" alt="image" width="400"></div><br>  Dans ce cas, le contr√¥leur est une abstraction qui traite √† la fois les actions de l'utilisateur et les modifications de donn√©es dans le <i>magasin</i> .  Il ne doit pas du tout √™tre une classe distincte, en r√®gle g√©n√©rale, il est r√©parti par composants. <br><br><h3>  Combinez l'ensemble du zoo de <i>Redux</i> dans une bo√Æte noire </h3><br>  Mais que se passe-t-il si nous enveloppons les <i>actions</i> , les <i>r√©ducteurs</i> et les <i>s√©lecteurs</i> dans un seul module et que nous lui <i>apprenons</i> √† ne pas d√©pendre du chemin sp√©cifique pour l'emplacement de ses donn√©es? <br><br>  Que faire si toutes <i>les</i> actions <i>utilisateur</i> , par exemple, sont valid√©es en appelant la m√©thode d'instance: <i>user.addFriend (friendId)</i> ?  Et les donn√©es sont obtenues via getter: <i>user.getFriendsCount ()</i> ? <br><br>  Et si nous pouvons importer toutes les fonctionnalit√©s de l'utilisateur avec une simple <i>importation</i> ? <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userModule <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'node_modules/user-module'</span></span>;</code> </pre> <br>  Est-ce pratique?  Surtout √©tant donn√© que pour cela, vous n'avez pas besoin d'√©crire un tas de code suppl√©mentaire: <br>  <i>Le</i> package <i>npm</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">redux-module-creator</a> fournit toutes les fonctionnalit√©s pour cr√©er <b>des modules <i>redux</i> faiblement coupl√©s, <i>r√©utilisables</i> et test√©s</b> . <br><br>  Chaque module se compose d'un <i>contr√¥leur</i> , d'un <i>r√©ducteur</i> et d'une <i>action</i> et pr√©sente les caract√©ristiques suivantes: <br><br><ul><li>  s'int√®gre dans le magasin via un appel √† la m√©thode int√©grateur, et pour changer le lieu d'int√©gration, il suffit de changer uniquement le lieu de l'appel de l'int√©grateur et son param√®tre <br><br><img src="https://habrastorage.org/getpro/habr/post_images/482/b12/c12/482b12c1271164c347c87372dbb4e31e.png" alt="image"><br></li><li>  le contr√¥leur a une connexion avec sa partie des donn√©es dans le <i>magasin</i> , se souvenant du chemin qui est pass√© √† l' <i>int√©grateur ()</i> une fois.  Cela √©limine le besoin de le savoir lors de l'utilisation des donn√©es. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/518/271/2f0/5182712f07a7d8dc1414e413930ff734.png" alt="image"><br></li><li>  le contr√¥leur est titulaire de tous les s√©lecteurs, adaptateurs, etc. n√©cessaires </li><li>  pour suivre les modifications, il est possible de s'abonner aux modifications de <u>vos propres</u> donn√©es </li><li>  <i>les r√©ducteurs</i> peuvent utiliser le contexte d'appel - une instance du module et en obtenir les <i>types d'action</i> appartenant au module.  Cela √©limine le besoin d'importer un tas d' <i>actions</i> et r√©duit le risque d'erreur. </li><li>  <i>les actions</i> obtiennent le contexte d'utilisation, car elles font partie de l'instance du module: maintenant ce n'est plus seulement <i>trainingFinished</i> , mais <i>readingModule.actions.trainingFinished</i> </li><li>  <i>l'action</i> existe d√©sormais dans l'espace de noms des modules, ce qui vous permet de cr√©er des √©v√©nements avec le m√™me nom pour diff√©rents modules </li><li>  chaque module peut √™tre instanci√© plusieurs fois, et chaque instance est int√©gr√©e dans diff√©rentes parties du <i>magasin</i> </li><li>  <i>Les actions</i> des diff√©rentes instances de module ont un type d' <i>action</i> diff√©rent - vous pouvez r√©pondre aux √©v√©nements d'une instance sp√©cifique </li></ul><br>  En cons√©quence, nous obtenons une bo√Æte noire qui peut g√©rer ses donn√©es elle-m√™me et poss√®de des poign√©es pour communiquer avec du code externe. <br><br>  En m√™me temps, c'est le m√™me <i>redux</i> , avec son flux de donn√©es unidirectionnel, sa transparence et sa pr√©visibilit√©. <br><br>  Et comme ce sont tous les m√™mes redux et tous les m√™mes <i>r√©ducteurs</i> , vous pouvez cr√©er √† partir d'eux la structure requise par la logique du domaine d'application. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459460/">https://habr.com/ru/post/fr459460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459450/index.html">La vuln√©rabilit√© du logiciel de t√©l√©conf√©rence Zoom permet √† n'importe quel site Web d'espionner les utilisateurs via webcam</a></li>
<li><a href="../fr459452/index.html">Un agro-robot avec l'IA a appris √† ramasser soigneusement uniquement la salade m√ªrie du jardin</a></li>
<li><a href="../fr459454/index.html">Comment s'est pass√© le premier hackathon √† The Standoff</a></li>
<li><a href="../fr459456/index.html">Dagaz: √©pisodes (partie 1)</a></li>
<li><a href="../fr459458/index.html">ok.tech: Explication des donn√©es # 2</a></li>
<li><a href="../fr459462/index.html">SEO pour Yandex. Recherchez tout?</a></li>
<li><a href="../fr459464/index.html">Lua √† Moscou 2019: entretien avec Roberto J√©rusalem</a></li>
<li><a href="../fr459466/index.html">Lua √† Moscou 2019: entretien avec Roberto Ierusalimschy</a></li>
<li><a href="../fr459470/index.html">Partie 4: Toujours en cours d'ex√©cution Linux sur RISC-V RISC-V</a></li>
<li><a href="../fr459472/index.html">Heroku + Docker + Spring Boot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>