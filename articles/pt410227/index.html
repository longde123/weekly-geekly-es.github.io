<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ™Ô∏è üñçÔ∏è ü¶Ü Pi-Sonos v2.0 ou a evolu√ß√£o do r√°dio na Internet no Raspberry Pi üîî üò£ üè§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como voc√™ sabe, n√£o h√° limite para a perfei√ß√£o. Mesmo para ac√∫stica port√°til caseira, cujo p√∫blico-alvo inclui apenas uma pessoa. Uma pessoa muito exi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pi-Sonos v2.0 ou a evolu√ß√£o do r√°dio na Internet no Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410227/"><img src="https://habrastorage.org/webt/gd/g9/zx/gdg9zxcp2lrffn69l2p0nfjlp5k.png" alt="imagem" align="left">  Como voc√™ sabe, n√£o h√° limite para a perfei√ß√£o.  Mesmo para ac√∫stica port√°til caseira, cujo p√∫blico-alvo inclui apenas uma pessoa.  Uma pessoa muito exigente e √†s vezes man√≠aca e teimosa.  Ap√≥s o lan√ßamento do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeiro post</a> sobre Pi-Sonos, quase 5 meses se passaram.  Durante esse per√≠odo, o software dentro dessa ac√∫stica conseguiu mudar drasticamente duas vezes.  A raz√£o para as mudan√ßas foram conselhos √∫teis dos habrachianos e sua pr√≥pria UX. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Um pouco de hist√≥ria para quem tem pregui√ßa de ler ou que j√° esqueceu o primeiro artigo</b> <div class="spoiler_text">  Pi-Sonos √© uma ac√∫stica compacta caseira, cuja cria√ß√£o foi inspirada no Sonos Play 1. O objetivo dessa ac√∫stica era, antes de tudo, tocar m√∫sica de esta√ß√µes de r√°dio da Internet.  Ao cri√°-lo, coloquei o minimalismo e a conveni√™ncia em primeiro plano: conectei-o a uma tomada e, em qualquer lugar da casa, controle a m√∫sica do seu smartphone / computador / tablet. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Sobre o que √© este artigo</b> <div class="spoiler_text">  Antes de tudo, sobre perseveran√ßa e curiosidade a caminho do ideal.  Sob o corte, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">nome de usu√°rio</a> , n√£o haver√° solu√ß√£o para nenhum problema global, nem uma descri√ß√£o de uma nova tecnologia exclusiva.  O artigo apenas apresenta uma compara√ß√£o de centros de m√≠dia populares para o Raspberry Pi, revela seus pontos fortes e fracos, bem como minha vis√£o pessoal da estrutura ideal para um r√°dio na Internet.  De fato, enquanto desenvolvia meu pr√≥prio software para o alto-falante, apenas repeti parcialmente o caminho dos criadores do Volumio, percebendo do zero apenas uma de suas fun√ß√µes (leia-se: ‚Äúinventou outra bicicleta‚Äù). <br>  Apesar do artigo abordar o t√≥pico de desenvolvimento de software, n√£o h√° c√≥digo, porque o objetivo do artigo √© descrever a ideia e a funcionalidade, e n√£o o processo de sua implementa√ß√£o.  Se o t√≥pico do c√≥digo for interessante para os residentes, tentarei dominar um artigo separado que descreve o processo de desenvolvimento. <br></div></div><br>  Inicialmente, o software para ac√∫stica era o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OSMC</a> , mas as pessoas s√°bias nos coment√°rios chamaram a aten√ß√£o para o fato de que Kodi (tamb√©m conhecido como OSMC) √© muito ousado como o "c√©rebro" de uma esta√ß√£o de r√°dio na Internet.  Ele √© muito inteligente e grande, apenas para projetos de √°udio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Volumio √©</a> melhor.  Na verdade, acabou assim.  O Volumio √© mais leve, aprimorado pela interface da web e possui uma API mais avan√ßada e f√°cil de desenvolver.  Al√©m disso, n√£o h√° necessidade de um cabo HDMI saindo por tr√°s, porque o Volumio √© totalmente personaliz√°vel em qualquer navegador. <br><br>  No entanto, Volumio tamb√©m mostrou algumas defici√™ncias importantes que me levaram a mais pesquisas.  Este √©, primeiro, o tempo de download e, segundo, a falta de reprodu√ß√£o autom√°tica.  Depois de estudar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o oficial</a> (da qual se pode entender que o Volumio √© um complemento para mpd (Music Player Daemon)), decidi que era hora de escrever meu pr√≥prio inv√≥lucro chamado RPi-Radio nos js que resolveria esses problemas.  Sua parte do servidor est√° em execu√ß√£o no Node.js, e a parte do cliente (GUI) usando o React.js est√° pronta desde o OSMC, apenas precisando ser ajustada.  Agora, ele aparece na tela do smartphone: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/nz/am/tenzamoyba4r-l2y4ypzu3zpt68.jpeg"></div><br>  Abaixo est√° uma placa que mostra claramente as desvantagens e vantagens de cada uma das estruturas. <br><table><tbody><tr><th>  Crit√©rio </th><th>  <nobr>OSMC</nobr> </th><th>  <nobr>Volumio</nobr> </th><th>  <nobr>RPi-Radio</nobr> </th></tr><tr><td>  Tempo de carregamento </td><td>  <nobr>35 s</nobr> </td><td>  <nobr>45 s</nobr> </td><td>  <nobr>20 s</nobr> </td></tr><tr><td>  Reprodu√ß√£o autom√°tica de inicializa√ß√£o </td><td>  <nobr>n√£o *</nobr> </td><td>  <nobr>n√£o *</nobr> </td><td>  <nobr>sim</nobr> </td></tr><tr><td>  O n√∫mero de fitas da tela principal da GUI ‚Äúnativa‚Äù no smartphone para selecionar uma esta√ß√£o de r√°dio da lista Favoritos ** </td><td>  <nobr>5 + 1 rolagem</nobr> </td><td>  <nobr>4</nobr> </td><td>  <nobr>1</nobr> </td></tr><tr><td>  A necessidade de um monitor, teclado e mouse *** </td><td>  <nobr>sim</nobr> </td><td>  <nobr>n√£o</nobr> </td><td>  <nobr>n√£o</nobr> </td></tr><tr><td>  Gerenciamento da Web </td><td>  <nobr>parcial</nobr> </td><td>  <nobr>completo</nobr> </td><td>  <nobr>parcial</nobr> </td></tr><tr><td>  Editando lista de esta√ß√µes </td><td>  <nobr>mais ou menos</nobr> </td><td>  <nobr>as normas</nobr> </td><td>  <nobr>mais ou menos</nobr> </td></tr><tr><td>  F√°cil configura√ß√£o inicial </td><td>  <nobr>mais ou menos</nobr> </td><td>  <nobr>√≥timo</nobr> </td><td>  <nobr>med√≠ocre</nobr> </td></tr><tr><td>  Integra√ß√£o com a GUI do meu smartphone </td><td>  <nobr>com muletas</nobr> </td><td>  <nobr>com muletas</nobr> </td><td>  <nobr>fora da caixa</nobr> </td></tr><tr><td>  Conveni√™ncia de uso di√°rio </td><td>  <nobr>‚òÜ</nobr> </td><td>  <nobr>‚òÜ‚òÜ</nobr> </td><td>  <nobr>‚òÜ‚òÜ‚òÜ</nobr> </td></tr></tbody></table>  <b>*</b> na verdade sim, mas voc√™ precisa fazer uma muleta e palma da m√£o na inicializa√ß√£o do Raspbian;  no caso do OSMC, a muleta √© escrita em python, e no caso do Volumio, em js ou bash.  Mas em ambos os casos, ainda n√£o funciona como gostar√≠amos. <br>  <b>**</b> para OSMC e Volumio, esses s√£o par√¢metros muito importantes, porque todos esses toques devem ser feitos sempre que voc√™ ativar a coluna.  Para o RPi-Radio, esse par√¢metro, embora m√≠nimo, ainda n√£o √© t√£o importante, pois a coluna come√ßa a ser reproduzida quando √© ligada. <br>  <b>*** Quero</b> dizer a conex√£o f√≠sica do monitor, teclado e mouse ao pr√≥prio Raspberry Pi, ou seja,  nos casos em que n√£o h√° como contornar a interface da web interna ou a conex√£o ssh. <br><br><div class="spoiler">  <b class="spoiler_title">Sob esse spoiler, h√° uma explica√ß√£o detalhada de cada um dos pontos de compara√ß√£o.</b> <div class="spoiler_text"> Um tempo de inicializa√ß√£o de 20 segundos √©, na minha opini√£o, o m√≠nimo que pode ser alcan√ßado sem a necessidade de otimizar o Raspbian para este projeto.  √â quanto tempo leva para o Malinka carregar o sistema operacional e iniciar o servi√ßo mpd.  Provavelmente, esse resultado poder√° ser aprimorado se voc√™ substituir o microSDHC pelo microSDXC com uma velocidade de leitura / grava√ß√£o mais alta (vou verificar se poss√≠vel).  Surpreendentemente, Volumio, fingindo ser leve e √°gil, leva mais tempo para carregar do que a colheitadeira de monstros OSMC.  45 segundos de espera est√£o al√©m do limiar da opera√ß√£o confort√°vel, e esse foi o principal motivo para deixar o Volumio. <br><br>  A reprodu√ß√£o autom√°tica est√° presente no mpd, n√£o precisei fazer nada para ativ√°-lo - convenientemente!  No Volumio, embora seja um wrapper mpd, essa fun√ß√£o foi estrangulada por causa de um belo som de sauda√ß√£o.  Como j√° escrevi, voc√™ pode criar um script e coloc√°-lo na inicializa√ß√£o.  A situa√ß√£o √© semelhante para o OSMC. <br><br>  O OSMC tem a maior parte da intera√ß√£o do usu√°rio atrav√©s do monitor: existe uma interface bonita, a capacidade de assistir v√≠deos, fotos, ler not√≠cias e assistir o clima - h√° muitas coisas que minha coluna nunca far√° na minha vida. <br><br>  Mas o gerenciamento da Web da OSMC √© muito limitado e voc√™ n√£o pode configurar remotamente sua lista de esta√ß√µes favoritas no plug-in Radio - apenas atrav√©s do monitor.  Na Volumio - pelo contr√°rio, tudo √© apenas atrav√©s da interface da web.  A edi√ß√£o da lista de esta√ß√µes √© mais conveniente no navegador do desktop / laptop, mas tamb√©m √© poss√≠vel no smartphone, se desejado.  Com o RPi-Radio, voc√™ pode selecionar apenas uma esta√ß√£o e ajustar o som pela interface da web.  A lista de esta√ß√µes e, de fato, tudo o mais deve ser feito atrav√©s do console via ssh.  A lista de esta√ß√µes √© a mais dif√≠cil: se o OSMC e o Volumio t√™m suas pr√≥prias bibliotecas extensas de esta√ß√µes de r√°dio na Internet, ent√£o no RPi-Radio eu tive que inserir manualmente os endere√ßos das minhas esta√ß√µes favoritas no formato JSON.  Inconvenientemente, mas apenas uma (ou v√°rias) vezes na vida. <br><br>  Com a configura√ß√£o inicial, o OSMC √© o pior.  Primeiro, voc√™ precisa conectar um monitor ao "raspberry" e configurar o plug-in Radio, depois configurar a sa√≠da de som para o IQAudio DAC externo (o mesmo da placa Suptronics X400) via console ou via ssh.  O RPi-Radio tem a mesma configura√ß√£o de DAC, mas pelo menos tudo o mais √© feito via ssh.  O l√≠der nesta categoria, √© claro, √© o Volumio - para emitir som atrav√©s de um DAC externo, basta selecionar o item apropriado na lista suspensa no menu de configura√ß√µes.  H√° uma compara√ß√£o mesmo no site oficial da Suptronics (http://www.suptronics.com/xseries/x400.html) <br><br>  A GUI no RPi-Radio √© uma p√°gina da web simples implementada no React.js.  A parte do servidor, respons√°vel pela intera√ß√£o entre a GUI do cliente e o mpd, √© executada no Node.js e √© um servidor HTTP e WebSocket simples baseado na conex√£o <code>express</code> <code>Socket.io</code> + <code>http</code> + <code>express</code> .  √â executado no Raspbian como um servi√ßo quando o sistema √© ligado imediatamente ap√≥s o servi√ßo mpd ser iniciado e usa o m√≥dulo <code>mpc-js</code> para controlar o mpd.  A GUI do cliente pode ser acessada em qualquer navegador da minha rede dom√©stica simplesmente por ip ou nome de host "raspberry".  Perfeito. <br></div></div><br>  As fontes RPi-Radio s√£o publicadas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Github</a> .  No mesmo reposit√≥rio, nos brunches correspondentes, √© poss√≠vel encontrar as duas adapta√ß√µes da GUI para trabalhar com OSMC e Volumio. <br><br>  O resultado dos meus exerc√≠cios, RPi-Radio, est√° al√©m do escopo de uma simples adi√ß√£o a uma √∫nica coluna.  Esse √© um tipo de solu√ß√£o pronta que transforma n√£o apenas o Raspberry Pi em um receptor de r√°dio da Internet, mas tamb√©m qualquer dispositivo com sa√≠da de √°udio, acesso √† Internet e a capacidade de executar mpd e Node.js.  A principal vantagem desse sistema √© a falta de tudo o que √© sup√©rfluo.  Na verdade, como foi feito no Sonos, no ideal que eu me esfor√ßo para alcan√ßar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt410227/">https://habr.com/ru/post/pt410227/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt410217/index.html">Seja saud√°vel! Com a Internet das coisas ...</a></li>
<li><a href="../pt410219/index.html">Oito batidas: sobre sons em jogos antigos</a></li>
<li><a href="../pt410221/index.html">Escolhendo um projetor de home theater</a></li>
<li><a href="../pt410223/index.html">Mineiro de Nova York for√ßado a desconectar equipamentos devido a interfer√™ncia na rede T-Mobile</a></li>
<li><a href="../pt410225/index.html">Pergunte a Ethan: A luz est√° sempre se movendo na mesma velocidade?</a></li>
<li><a href="../pt410229/index.html">A atividade f√≠sica fraca tem sido associada ao enfraquecimento do tecido nervoso e ao risco de dem√™ncia.</a></li>
<li><a href="../pt410231/index.html">A luz fraca torna-a mais pesada e a cintila√ß√£o cura Alzheimer na frequ√™ncia certa</a></li>
<li><a href="../pt410233/index.html">Valery Litvin, CTO cyber ‚Ä¢ Fund, ‚ÄúBlockchain. A lacuna de modelo √© uma introdu√ß√£o popular √† tecnologia blockchain e criptoeconomia ‚Äù</a></li>
<li><a href="../pt410235/index.html">Entusiasta enfrenta 15 meses de pris√£o por extrair CDs gratuitos do Dell Restore</a></li>
<li><a href="../pt410237/index.html">Os pais n√£o devem espionar seus filhos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>