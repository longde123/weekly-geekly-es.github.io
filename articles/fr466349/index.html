<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêüèº ‚ôÄÔ∏è üí† Comment effectuer des tests A / B dans 15 000 magasins hors ligne üí± ‚òòÔ∏è üç®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut Connected Big Data Ad-hoc analytics team from X5 Retail Group. 

 Dans cet article, nous parlerons de notre m√©thodologie de test A / B et des d√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment effectuer des tests A / B dans 15 000 magasins hors ligne</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/466349/">  Salut  Connected Big Data Ad-hoc analytics team from X5 Retail Group. <br><br>  Dans cet article, nous parlerons de notre m√©thodologie de test A / B et des d√©fis auxquels nous sommes confront√©s quotidiennement. <br><br>  Le Big Data X5 emploie environ 200 personnes, dont 70 la date des scientifiques et la date des analystes.  Notre partie principale est engag√©e dans des produits sp√©cifiques - demande, assortiment, campagnes de promotion, etc.  En plus d'eux, il y a notre √©quipe d'analyse Ad-hoc s√©par√©e. <br><br><img src="https://habrastorage.org/webt/fc/ab/by/fcabbyvlt69yxmfimt4iidjbsze.png"><br><a name="habracut"></a><br>  Nous sommes: <br><br><ul><li>  nous aidons les unit√©s commerciales avec des demandes d'analyse de donn√©es qui ne correspondent pas aux produits existants; </li><li>  nous aidons les √©quipes produits si elles ont besoin de mains suppl√©mentaires; </li><li>  Nous sommes engag√©s dans des tests A / B - et c'est la fonction principale de l'√©quipe. </li></ul><br>  La situation dans laquelle nous travaillons est tr√®s diff√©rente des tests A / B typiques.  En r√®gle g√©n√©rale, la technique est associ√©e √† des mesures en ligne et en ligne: comment les modifications ont affect√© la conversion, la r√©tention, le CTR, etc.  La plupart des exp√©riences sont li√©es √† des changements d'interface: r√©arrangement de la banni√®re, repeint le bouton, remplacement du texte, etc. <br><br>  Le commerce X5 est diff√©rent - il s'agit de 15 000 magasins hors ligne en direct de diff√©rents formats, r√©partis dans tout le pays.  Cette fonctionnalit√© impose certaines limitations.  Premi√®rement, l'ensemble des m√©triques qui peuvent √™tre test√©es varie consid√©rablement, et deuxi√®mement, la restriction sur les exp√©riences est impos√©e.  La t√¢che de changer la conception d'une devanture de magasin en ligne n'est pas comparable en termes de travail √† la t√¢che de changer l'ordre des rayons dans les magasins hors ligne. <br><br>  L'entreprise a une √©quipe engag√©e dans un programme de fid√©lit√© et leurs pilotes sont les plus proches de l'id√©e classique des tests A / B.  Les questions qui nous viennent sont tr√®s atypiques pour les tests A / B ¬´ordinaires¬ª.  Par exemple: <br><br><ul><li>  Comment la performance financi√®re du magasin changera-t-elle si je change l'ordre des rayons Saucisse et G√¢teaux? </li><li>  Comment le mod√®le de d√©sabonnement des clients affectera-t-il le r√©sultat financier? </li><li>  Comment la d√©finition de postamates affectera-t-elle les performances du magasin? </li></ul><br>  Les clients pensent qu'un certain changement affectera positivement l'un des indicateurs (nous en parlerons plus tard).  Notre travail consiste √† les aider √† valider leurs hypoth√®ses sur la base de donn√©es. <br><br><h3>  Mesures </h3><br>  Quels indicateurs testons-nous?  <b>RTO</b> , <b>contr√¥le moyen</b> et <b>trafic</b> sont les mots les plus fr√©quemment utilis√©s dans notre aile d'espace ouvert. <br><br><ul><li>  <b>RTO</b> (chiffre d'affaires de d√©tail) - le montant d'argent gagn√© par le magasin. </li></ul><br>  L'une des principales mesures pour les entreprises et la plus difficile √† tester. <br><br>  Le chiffre d'affaires quotidien du magasin est mesur√© en millions de roubles.  En cons√©quence, la propagation de l'indicateur est mesur√©e en au moins des milliers de roubles.  La formule longue et complexe pour d√©terminer la taille de l'√©chantillon indique que plus la variance est grande, plus il faut de donn√©es pour tirer des conclusions significatives.  Pour capter l'effet m√™me dans le dixi√®me pour cent avec une si grande dispersion de prise de force, les pilotes dans les magasins doivent passer six mois. <br><br>  Imaginez la r√©action du conseil d'administration, si lors d'une r√©union avec eux dire que le pilote doit passer six mois, voire un an dans tous les magasins?  =) <br><br>  Nous avons deux approches standard. <br><br>  La premi√®re approche: nous ne consid√©rons pas le RTO de l'ensemble du magasin, mais une sorte de cat√©gorie de produits.  Par exemple, √† la suite du r√©am√©nagement de deux sections dans le magasin (¬´G√¢teaux¬ª et ¬´Saucisses¬ª), une augmentation de la prise de force dans les deux cat√©gories est attendue.  Le RTO d'une cat√©gorie est beaucoup plus petit que le RTO de l'ensemble du magasin, par cons√©quent, la dispersion est plus faible.  Dans ce cas, nous esp√©rons que le pilote de ces cat√©gories sera isol√© des autres cat√©gories. <br><br>  Deuxi√®me approche: nous √©chantillonnons le temps.  L'unit√© d'observation n'est pas la prise de force du magasin pour l'ensemble du pilote, mais la prise de force par semaine ou par jour.  Ainsi, nous augmentons le nombre d'observations, tout en conservant la variance des donn√©es brutes. <br><br><img src="https://habrastorage.org/webt/kw/b_/w1/kwb_w1jmlkx4rynvidf5cfqvkny.jpeg"><br><br><ul><li>  <b>Ch√®que moyen</b> , ou <b>RTO / nombre de ch√®ques</b> - montant moyen d'un ch√®que. </li></ul><br>  Une partie des changements vise √† inciter les gens √† acheter plus, nous testons donc le RTO / nombre de ch√®ques, ou le ch√®que moyen, si nous faisons des analogies avec les mesures habituelles. <br><br>  La difficult√© de tester cette m√©trique est li√©e aux sp√©cificit√©s de la vente au d√©tail.  Par exemple, avec le lancement pilote de la promotion ¬´3 pour le prix de 2¬ª, une personne qui pr√©voyait d'acheter un produit en ach√®terait trois, et le montant du ch√®que augmentera.  Mais que se passe-t-il s'il devient plus tard moins susceptible d'aller au magasin et que le pilote ne r√©ussit pas vraiment? <br><br><ul><li>  <b>Trafic</b> - le nombre de ch√®ques dans le magasin pendant une certaine p√©riode de temps. </li></ul><br>  Pour √©viter des conclusions erron√©es lors du test d'hypoth√®ses qui affectent la v√©rification moyenne, nous examinons simultan√©ment les changements de trafic.  Nous ne pouvons pas suivre directement le nombre de personnes qui sont venues au magasin, car  tous les visiteurs ne sont pas des clients du programme de fid√©lit√©, donc pour les tests A / B, chaque ch√®que est une ¬´visite unique¬ª pour le client.  Par analogie avec la prise de force, nous consid√©rons le trafic √† diff√©rents intervalles de temps: trafic par jour, trafic par heure. <br><br>  L'interrelation entre le contr√¥le moyen et le trafic est tr√®s importante: le pilote pourrait-il augmenter le contr√¥le moyen, mais r√©duire le trafic et finalement conduire non pas √† une augmentation de la prise de force, mais √† sa diminution?  Le pilote pourrait-il aider √† augmenter le trafic sans modifier la facture moyenne? <br><br><ul><li>  <b>Marge</b> - la diff√©rence entre le prix d'un produit et son co√ªt </li></ul><br>  Il existe des pilotes dans le cadre desquels nous modifions les prix des marchandises - pour certains, le prix a augment√©, pour certains au contraire.  Puisque nous n'affectons pas les co√ªts de production, en modifiant les prix, nous modifions la marge des marchandises.  Un tel pilote peut entra√Æner une augmentation du trafic et augmenter le contr√¥le moyen.  Mais cela signifie-t-il que le pilote r√©ussit et m√©rite de changer les prix dans tous les magasins du r√©seau?  Non, il pourrait tr√®s bien arriver que les gens commencent √† acheter des produits √† marge n√©gative ou faible plus souvent et abandonnent des produits √† marge √©lev√©e.  Par cons√©quent, une augmentation de l'OTR n'est pas toujours suivie d'une augmentation de la marge totale; il convient donc de tester ces indicateurs s√©par√©ment. <br><br>  Eh bien, disons que nous avons d√©cid√© des mesures cibles.  Les questions suivantes: <br><br><ul><li>  Quel effet de taille le client pr√©voit-il de recevoir? </li><li>  Quel effet peut-on r√©ellement d√©tecter dans l'exp√©rience? </li><li>  Combien de temps dure l'exp√©rience? </li><li>  Quels groupes? </li></ul><br><h3>  R√©sum√© de l'exp√©rience </h3><br>  Les tests A / B men√©s sur les utilisateurs en ligne ont un avantage significatif - ils ont une grande capacit√© de g√©n√©ralisation.  En d'autres termes, les conclusions obtenues au cours de l'exp√©rience peuvent √™tre adapt√©es √† tous les utilisateurs.  La capacit√© de g√©n√©ralisation est garantie par le param√©trage de l'exp√©rience: les groupes de contr√¥le et de test sont form√©s de mani√®re al√©atoire, presque exactement les deux groupes de la m√™me distribution, vous pouvez attraper beaucoup de trafic dans les deux groupes - il y aurait un budget. <br><br>  Dans le cas de la vente au d√©tail hors ligne, aucun de ces param√®tres ne fonctionne.  Premi√®rement, le nombre de magasins est limit√©.  Deuxi√®mement, les magasins sont tr√®s diff√©rents les uns des autres.  Le magasin Perekrestok dans le quartier r√©sidentiel et le Perekrestok pr√®s du centre d'affaires sont, en fait, des objets tr√®s diff√©rents de diff√©rentes distributions. <br><br><img src="https://habrastorage.org/webt/-8/o_/so/-8o_sonaxffqinwcofkoegbxw58.jpeg"><br><br>  Sur le graphique, nous voyons que les magasins du groupe de test sont diff√©rents des magasins de l'ensemble du r√©seau.  C'est une situation assez typique: dans la cha√Æne de Pyaterochka, les magasins sont situ√©s non seulement dans les villes, mais aussi dans de petites colonies.  Les grands pilotes se d√©roulent le plus souvent dans les villes.  Quel que soit l'effet que nous capturons, sa mise √† l'√©chelle sur l'ensemble du r√©seau est incorrecte. <br><br>  L'effet total <b>–Ñ du</b> pilote que nous √©valuons par la formule: <br><br><img src="https://habrastorage.org/webt/0p/t7/-w/0pt7-w_eyalkcs_fafhwwgqzjx0.png"><br><br>  a est la zone d'intersection des distributions du groupe pilote et de tous les magasins du r√©seau. <br><br>  Notez que ce n'est pas une cons√©quence des lois statistiques, mais notre hypoth√®se sur la fa√ßon dont il est logique de consid√©rer l'effet cumulatif. <br><br>  L'option id√©ale consiste √† recruter un √©chantillon repr√©sentatif dans le groupe de test, c'est-√†-dire les magasins qui refl√®tent vraiment l'√©tat complet du r√©seau.  Mais la repr√©sentativit√© conduit √† l'h√©t√©rog√©n√©it√© de l'√©chantillon, car  les magasins avec une PDF faible ou √©lev√©e seront √©chantillonn√©s. <br><br><h3>  Taille des groupes, dur√©e du pilote et effet d√©tectable minimal </h3><br>  Et maintenant, pour la chose la plus importante - la taille de l'effet et la dur√©e du pilote.  En r√®gle g√©n√©rale, nous sommes confront√©s √† l'une des trois situations suivantes: <br><br><ol><li>  le client a une limite de temps pour le pilote et le nombre de magasins avec lesquels vous pouvez travailler; </li><li>  le client sait quelle taille d'effet il s'attend √† recevoir et demande d'indiquer le nombre de magasins dont le pilote a besoin (puis les magasins eux-m√™mes); </li><li>  le client est ouvert √† nos offres. </li></ol><br>  On ne peut pas dire que l'un des sc√©narios est plus simple, car en tout cas nous pr√©parons un tableau de l'effet-erreur. <br><br><img src="https://habrastorage.org/webt/tl/rb/dc/tlrbdcloe-j79-o-2rygs4aqira.png"><br><br>  Important pour elle: <br><br><ol><li>  une erreur du premier type - la probabilit√© de voir l'effet quand il n'est pas l√†; </li><li>  une erreur du deuxi√®me type - la probabilit√© de sauter l'effet quand il l'est; </li><li>  l'ampleur de l'effet que l'on s'attend √† voir avec un pilote r√©ussi. </li></ol><br>  La combinaison de ces trois param√®tres vous permet de calculer la dur√©e requise du pilote.  La valeur dans le tableau est la taille de l'√©chantillon - dans ce cas, le nombre de re√ßus ou la m√©trique moyenne dans le magasin par jour, qui sont n√©cessaires pour mener le pilote.  Si nous parlons du monde r√©el, la probabilit√© d'erreurs du premier et du deuxi√®me type est g√©n√©ralement de 5 √† 10%.  Comme le montre le tableau, avec de telles erreurs fixes, nous avons besoin de 421 jours de pyaterochka pour capter l'effet d'un pour cent.  Il semble que le chiffre soit assez bon - apr√®s tout, 421 jours Pyaterochka est un pilote dans 40 magasins pendant 10 jours.  Cependant, il y a un ¬´mais¬ª - il y a tr√®s peu de pilotes qui s'attendent vraiment √† un effet d'un pour cent.  Habituellement, nous parlons de dixi√®mes de pour cent.  √âtant donn√© que le RTO est mesur√© en milliards, un dixi√®me de pour cent de l'effet d'un pilote r√©ussi peut entra√Æner une forte augmentation des revenus.  Pour cette raison, je veux mesurer m√™me le plus petit effet.  Mais plus la taille de l'effet est petite, plus l'erreur du second type est √©lev√©e.  Cela est compr√©hensible: le petit effet est similaire au bruit al√©atoire et sera rarement consid√©r√© comme un v√©ritable √©cart par rapport √† la norme.  Ceci est clairement visible dans le graphique ci-dessous, o√π nous voulons attraper un petit effet dans les donn√©es avec une grande variance. <br><br><img src="https://habrastorage.org/webt/vr/na/lw/vrnalwenskdfrb2xpenvbhgq23o.jpeg"><br><br><h3>  Test A / A </h3><br>  Avant le d√©marrage du pilote, vous devez d√©cider du groupe de test et de contr√¥le.  Le client peut avoir ou non un groupe pilote.  Nous sommes pr√™ts √† l'aider dans les deux cas en demandant des restrictions - par exemple, les magasins doivent √™tre strictement de trois r√©gions sp√©cifiques. <br><br>  Supposons que nous ayons choisi en quelque sorte un groupe de test et de contr√¥le.  Comment √™tre s√ªr que les groupes s√©lectionn√©s sont bons et que vous pouvez vraiment effectuer des tests A / B sur eux?  Il semble que tout semble harmonieux: nous avons marqu√© le nombre requis d'observations, selon la formule nous pouvons attraper l'effet de 0,7%, nous avons trouv√© des magasins similaires.  Qu'est-ce qui ne nous convient pas maintenant? <br><br>  Malheureusement, beaucoup de faits s√©rieux: <br><br><ul><li>  les √©l√©ments de l'√©chantillon ne sont pas de la m√™me distribution - notre √©chantillon est un m√©lange d'observations provenant de diff√©rents magasins, et chaque magasin a sa propre distribution. </li><li>  les √©l√©ments de l'√©chantillon ne sont pas ind√©pendants - dans l'√©chantillon, il y a de nombreuses observations d'un magasin, respectivement, il y a un lien entre eux; </li><li>  l'√©galit√© des moyens n'est pas garantie en l'absence de pilote - c'est-√†-dire  nous ne sommes pas du tout s√ªrs que s'il n'y avait pas de pilote, les statistiques du magasin ne seraient pas diff√©rentes. </li></ul><br>  Tous ces probl√®mes ne sont pas pris en compte dans le calcul de la formule de s√©lection du nombre d'observations en fonction des erreurs et des effets.  Pour comprendre l'√©tendue de l'impact des probl√®mes ci-dessus, nous effectuons des tests A / A.  En fait, il s'agit d'une simulation de l'ensemble du pilote en magasin √† un moment o√π il n'y a pas de pilote en magasin.  Cette p√©riode est appel√©e pr√©-pilote. <br><img src="https://habrastorage.org/webt/rf/zd/vz/rfzdvzpvmqlff2x6ed2bzeqtuxy.png"><br>  Pendant la p√©riode pr√©-pilote, nous r√©p√©tons trois fois plusieurs √©tapes: <br><br><ol><li>  s√©lection de groupes similaires; </li><li>  tests d'√©galit√© dans deux groupes; </li><li>  ajouter de l'effet au groupe de test et tester les moyens d'√©galit√©. </li></ol><br><img src="https://habrastorage.org/webt/ri/ti/eg/ritieghfygj6kgxfyedloba-irk.png"><br><br><h3>  Faire correspondre des groupes similaires </h3><br>  Nous n'inventons pas de v√©lo, nous recherchons donc des groupes similaires avec la bonne vieille m√©thode des voisins les plus proches.  La strat√©gie de g√©n√©ration de fonctionnalit√©s pour le magasin est un art distinct.  Nous avons trouv√© trois m√©thodes de travail: <br><br><ul><li>  Chaque magasin est d√©crit par un vecteur d'entit√©s selon la m√©trique que nous testons.  Par exemple, lorsque nous examinons le ch√®que moyen, nous d√©crivons les ch√®ques moyens quotidiens pendant 8 semaines - nous obtenons 56 signes pour le magasin.  Ensuite, nous prenons la distance euclidienne entre les signes d'une paire de magasins. </li></ul><br><img src="https://habrastorage.org/webt/ra/nq/sy/ranqsy12gvkgu2tgk1lsocvbwcu.jpeg"><br><br><ul><li>  Trouvez des magasins dont la dynamique est similaire.  Les magasins peuvent diff√©rer en valeurs absolues de m√©triques, mais co√Øncident dans les tendances - et avec certaines manipulations math√©matiques, ces magasins peuvent √™tre consid√©r√©s comme les m√™mes. </li></ul><br><img src="https://habrastorage.org/webt/gw/pz/99/gwpz99ikylr7lyv7nyteclwdk8y.jpeg"><br><br><ul><li>  Pr√©disez les performances du magasin au cours de la p√©riode du pilote (dans le futur) et s√©lectionnez des performances similaires en fonction de celles-ci - mais ici, nous avons besoin d'un oracle qui peut pr√©dire les performances du pilote de mani√®re assez pr√©cise. </li></ul><br>  Nous adh√©rons √† une hypoth√®se tr√®s simple: si les magasins √©taient similaires avant le pilote, alors s'il n'y avait pas eu de changement de pilote, ils seraient rest√©s similaires. <br><br>  Vous pouvez remarquer que m√™me dans ces trois m√©thodes de travail, il existe de nombreux aspects qui peuvent √™tre vari√©s: le nombre de jours / semaines par lesquels une caract√©ristique est consid√©r√©e, une m√©thode pour √©valuer la dynamique d'un indicateur, etc. <br><br>  Il n'y a pas de pilule universelle, dans chaque exp√©rience, nous passons par diff√©rentes options en fonction de notre objectif.  Mais c'est tr√®s simple: trouvez une m√©thode pour s√©lectionner les voisins les plus proches qui donne des erreurs raisonnables du premier et du deuxi√®me type.  D'o√π ils viennent, nous disons plus loin. <br><br><h3>  Test d'√©galit√© des moyens, ou erreur du premier type de m√©thode </h3><br>  Rappelons qu'√† ce stade, nous: <br><br><ol><li>  d√©termin√© avec le client l'ampleur de l'effet et la dur√©e du pilote </li><li>  a expliqu√© l'essence des erreurs du premier et du deuxi√®me type </li><li>  construit une m√©thode pour s√©lectionner des groupes similaires </li></ol><br>  L'objectif de cette √©tape est de s'assurer que la m√©thode que nous avons s√©lectionn√©e dans la section 3 trouve des groupes tels qu'avant le d√©marrage du pilote, l'indicateur (RTO, contr√¥le moyen, trafic) dans ces magasins n'est pas statistiquement diff√©rent. <br><br>  Dans le cycle, nous s√©lectionnons les groupes s√©lectionn√©s √† plusieurs reprises pour l'√©galit√© par une sorte de test statistique et de bootstrap.  Si la proportion d'erreurs (c'est-√†-dire que les groupes ne sont pas √©gaux les uns aux autres) est sup√©rieure au seuil, la m√©thode est rejet√©e et une nouvelle est s√©lectionn√©e.  Donc, jusqu'√† ce que nous atteignions le seuil d'erreur souhait√©. <br><br><img src="https://habrastorage.org/webt/-r/wn/sg/-rwnsgtq1jyngzxrsdm446piem0.png"><br><br>  Il est important de savoir √† quelle fr√©quence nous captons l'effet lorsqu'il n'est pas l√†, c'est-√†-dire  si notre m√©thode de s√©lection r√©pond ou non aux diff√©rences al√©atoires entre les magasins. <br><br><h3>  Ajout d'un effet ou d'une erreur du deuxi√®me type de m√©thode </h3><br>  Une question raisonnable, mais ne nous recyclons-nous pas de mani√®re √† percevoir √©galement les effets r√©els comme du bruit et √† les ignorer?  En d'autres termes, pouvons-nous d√©tecter un effet quand il l'est? <br><br>  Apr√®s avoir v√©rifi√© √† la derni√®re √©tape que les groupes co√Øncident, nous ajoutons un effet artificiel √† l'un des groupes, c'est-√†-dire  Nous garantissons que le pilote r√©ussit et que l'effet devrait l'√™tre. <br><br>  Cette fois, l'objectif est de savoir √† quelle fr√©quence l'hypoth√®se d'√©galit√© est rejet√©e, c'est-√†-dire  le test a permis de distinguer deux groupes.  L'erreur dans ce cas est de supposer que les groupes sont √©gaux.  Nous appelons cette erreur une erreur du deuxi√®me type. <br><br>  De nouveau dans le cycle, nous testons l'√©galit√© du groupe t√©moin et du groupe de test ¬´bruyant¬ª.  Si nous commettons des erreurs assez rarement, nous pensons que la m√©thode de s√©lection des groupes a pass√© la validation.  Il peut √™tre utilis√© pour s√©lectionner des groupes dans la p√©riode pilote et √™tre s√ªr que si le pilote donne un effet, nous serons en mesure de le d√©tecter. <br><br><img src="https://habrastorage.org/webt/bw/gh/vw/bwghvwsqzs2uaxq81gf06e1z2zo.png"><br><br><h3>  √Ä propos de l'h√©t√©rog√©n√©it√© </h3><br>  Nous avons d√©j√† mentionn√© que l'h√©t√©rog√©n√©it√© des donn√©es est l'un des pires ennemis que nous combattons.  Les inhomog√©n√©it√©s proviennent de diverses causes profondes: <br><br><ul><li>  h√©t√©rog√©n√©it√© des achats - chaque magasin a sa propre valeur m√©trique moyenne (dans les magasins RTO de Moscou et le trafic est beaucoup plus que dans les magasins du village) </li><li>  h√©t√©rog√©n√©it√© par jour de la semaine - r√©partition diff√©rente du trafic et contr√¥le moyen diff√©rent selon les jours de la semaine: le trafic du mardi ne ressemble pas au trafic du vendredi </li><li>  h√©t√©rog√©n√©it√© m√©t√©orologique - les gens font leurs courses diff√©remment selon les conditions m√©t√©orologiques </li><li>  l'h√©t√©rog√©n√©it√© de la p√©riode de l'ann√©e - le trafic pendant les mois d'hiver diff√®re du trafic en √©t√© - cela doit √™tre pris en compte si le pilote dure plusieurs semaines. </li></ul><br>  L'inhomog√©n√©it√© augmente la variance qui, comme mentionn√© ci-dessus, dans l'√©valuation des magasins de PTO prend d√©j√† une √©norme importance.  La taille de l'effet capt√© d√©pend directement de la variance.  Par exemple, r√©duire la dispersion d'un facteur quatre vous permet de d√©tecter un demi-effet. <br><br>  Dans le cas le plus simple, nous sommes aux prises avec l'h√©t√©rog√©n√©it√© de la lin√©arisation. <br>  Supposons que nous ayons eu un pilote dans deux magasins pendant trois jours (oui, cela contredit toutes les formules prescrites concernant la taille de l'effet, mais ceci est un exemple).  Les <b>RTO</b> moyens dans les magasins sont respectivement de 200 000 et 500 000, tandis que la variance dans les deux groupes est de 10 000, et selon toutes les observations - 35 000 <br>  Apr√®s le pilote, les moyennes se situent dans les 300 et 600 groupes et les √©carts sont respectivement de 10 000 et 22 500 et le groupe entier est de 40 000. <br><br><img src="https://habrastorage.org/webt/om/yn/pb/omynpbpgftr7lsoa7bl6rubjos0.png"><br><br>  Une d√©marche simple et √©l√©gante consiste √† lin√©ariser les donn√©es, c'est-√†-dire  soustraire de chaque p√©riode la valeur moyenne de la pr√©c√©dente. <br><br><img src="https://habrastorage.org/webt/3t/xf/9t/3txf9tustucss6vaj6ydnkxnct8.png"><br><br>  En sortie, l'√©chantillon: 100, 0, 200, -50, 100, 250. La dispersion dans la p√©riode pilote a √©t√© r√©duite de 3 fois √† 13000. <br><br>  Cela signifie que nous pouvons voir un effet beaucoup plus subtil qu'avec les valeurs absolues d'origine. <br><br>  Ce n'est pas la seule fa√ßon de g√©rer l'h√©t√©rog√©n√©it√©.  Nous en parlerons dans le prochain article. <br><br><h3>  Approche g√©n√©rale des tests A / B </h3><br>  La pr√©paration des grands pilotes et leur √©valuation passent par notre √©quipe et sont minutieusement test√©es. <br><br>  Notre protocole: <br><br><ol><li>  recevoir des informations du client sur la m√©trique et l'effet attendu; </li><li>  d√©terminer la taille des groupes et la dur√©e du pilote; </li><li>  d√©velopper un algorithme de r√©partition des magasins par groupes; </li><li>  effectuer un test A / A entre les groupes et valider cet algorithme; </li><li>  attendez la fin du pilote et calculez l'effet. </li></ol><br>  Aucune de ces √©tapes ne passe sans difficult√©s, chacune a ses particularit√©s.  Comment nous traitons certains d'entre eux, nous l'avons d√©crit dans cet article.  Dans le prochain, nous parlerons de .... <br><br><h3>  L'√©quipe </h3><br>  Au final, je voudrais mentionner tous les acteurs: <br><br><ul><li>  Valery Babushkin </li><li>  Alexander Sakhnov </li><li>  Denis Ivanov </li><li>  Sergey Demchenko </li><li>  Nikolay Nazarov </li><li>  Sergey Kabanov </li><li>  Yuri Galimullin </li><li>  Helen Tevanyan </li><li>  Vladislav Ladenkov </li><li>  Sergey Zakharov </li><li>  Histoires de Vasily </li><li>  Alexander Belyaev </li><li>  Kismat Magomedov </li><li>  Egor Krashennikov </li><li>  Egor Karnaukh </li><li>  Svyatoslav Oreshin </li><li>  Yuri Trubitsyn </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466349/">https://habr.com/ru/post/fr466349/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466337/index.html">De quelle couleur est ta fonction?</a></li>
<li><a href="../fr466339/index.html">Comment dans Microsoft SQL Server pour obtenir des donn√©es de Google Analytics en utilisant R</a></li>
<li><a href="../fr466341/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 33. Pr√©paration √† l'examen ICND1</a></li>
<li><a href="../fr466345/index.html">M√©thode d'onde de construction d'un jeu de couleurs</a></li>
<li><a href="../fr466347/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 34. Concept VLAN avanc√©</a></li>
<li><a href="../fr466355/index.html">Les crocodiles volent, mais bas-bas (√† propos des ekranoplans sans √©motions, mais avec des digressions)</a></li>
<li><a href="../fr466359/index.html">Pourquoi la Journ√©e mondiale de la dette √©cologique et l'empreinte environnementale sont des non-sens pseudoscientifiques</a></li>
<li><a href="../fr466361/index.html">Comment le certificat GICSP des Cosaques a √©t√© re√ßu</a></li>
<li><a href="../fr466363/index.html">Slurm DevOps. Premier jour. Git, CI / CD, IaC et le dinosaure vert</a></li>
<li><a href="../fr466365/index.html">D√©veloppement d'un syst√®me d'exploitation monolithique de type Unix - Prise en main (1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>