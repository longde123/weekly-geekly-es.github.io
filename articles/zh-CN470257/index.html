<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’ ğŸ’Š ğŸ‘¨ğŸ¿â€ğŸ¤ Javaä¸­çš„ImmutableListå‘¨å›´çš„ä¼ªè£… ğŸ™ŒğŸ» ğŸ’ƒğŸ¼ ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘è¯»äº†æ–‡ç« â€œ Javaä¸­å°†ä¸ä¼šæœ‰ä¸å¯å˜çš„é›†åˆ-ç°åœ¨æˆ–ç°åœ¨éƒ½ä¸ä¼šâ€ï¼Œå¹¶è®¤ä¸ºJavaä¸­ç¼ºå°‘ä¸å¯å˜åˆ—è¡¨çš„é—®é¢˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å¯ä»¥è§£å†³çš„ï¼Œè¿™ä½¿ä½œè€…æ„Ÿåˆ°éš¾è¿‡ã€‚ æˆ‘æä¾›æœ‰å…³æ­¤ä¸»é¢˜çš„æƒ³æ³•å’Œä»£ç ã€‚ 


 ï¼ˆè¿™æ˜¯ç­”æ¡ˆæ–‡ç« ï¼Œè¯·å…ˆé˜…è¯»åŸå§‹æ–‡ç« ã€‚ï¼‰ 
 UnmodifiableListä¸ImmutableList 


å‡º...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Javaä¸­çš„ImmutableListå‘¨å›´çš„ä¼ªè£…</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470257/"><p> æˆ‘è¯»äº†æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œ Javaä¸­å°†ä¸ä¼šæœ‰</a>ä¸å¯å˜çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é›†åˆ-ç°åœ¨æˆ–ç°åœ¨éƒ½ä¸ä¼šâ€ï¼Œ</a>å¹¶è®¤ä¸ºJavaä¸­ç¼ºå°‘ä¸å¯å˜åˆ—è¡¨çš„é—®é¢˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å¯ä»¥è§£å†³çš„ï¼Œè¿™ä½¿ä½œè€…æ„Ÿåˆ°éš¾è¿‡ã€‚ æˆ‘æä¾›æœ‰å…³æ­¤ä¸»é¢˜çš„æƒ³æ³•å’Œä»£ç ã€‚ </p><a name="habracut"></a><br><p>  ï¼ˆè¿™æ˜¯ç­”æ¡ˆæ–‡ç« ï¼Œè¯·å…ˆé˜…è¯»åŸå§‹æ–‡ç« ã€‚ï¼‰ </p><br><h2 id="unmodifiablelist-vs-immutablelist">  UnmodifiableListä¸ImmutableList </h2><br><p>å‡ºç°çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šå¦‚æœæœ‰<code>ImmutableList</code> ï¼Œä¸ºä»€ä¹ˆæˆ‘éœ€è¦ä¸€ä¸ª<code>UnmodifiableList</code> ï¼Ÿ è®¨è®ºçš„ç»“æœæ˜¯ï¼Œåœ¨åŸå§‹æ–‡ç« çš„æ³¨é‡Šä¸­çœ‹åˆ°äº†æœ‰å…³<code>UnmodifiableList</code>å«ä¹‰çš„ä¸¤ç§æƒ³æ³•ï¼š </p><br><ul><li> è¯¥æ–¹æ³•æ”¶åˆ°ä¸€ä¸ª<code>UnmodifiableList</code> ï¼Œå®ƒæœ¬èº«ä¸èƒ½æ›´æ”¹ï¼Œä½†æ˜¯çŸ¥é“å†…å®¹å¯ä»¥è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ›´æ”¹ï¼ˆå¹¶ä¸”çŸ¥é“å¦‚ä½•æ­£ç¡®å¤„ç†å®ƒï¼‰ </li><li> å…¶ä»–çº¿ç¨‹<code>ImmutableList</code> ï¼Œ <code>UnmodifiableList</code>å’Œ<code>ImmutableList</code>ç­‰æ•ˆäºä¸€ç§æ–¹æ³•ï¼Œä½†<code>UnmodifiableList</code>ç”¨ä½œæ›´â€œè½»é‡â€çš„æ–¹æ³•ã€‚ </li></ul><br><p> åœ¨å®è·µä¸­ï¼Œç¬¬ä¸€ç§é€‰æ‹©ä¼¼ä¹å¤ªå°‘äº†ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨å¯ä»¥ä½¿<code>ImmutableList</code>çš„â€œè½»æ¾â€å®ç°ï¼Œåˆ™<code>UnmodifiableList</code>å˜å¾—ä¸æ˜¯éå¸¸å¿…è¦ã€‚ å› æ­¤ï¼Œå°†æ¥æˆ‘ä»¬ä¼šå¿˜è®°å®ƒï¼Œåªä¼šå®ç°<code>ImmutableList</code> ã€‚ </p><br><h2 id="postanovka-zadachi"> é—®é¢˜é™ˆè¿° </h2><br><p> æˆ‘ä»¬å°†å®ç°<code>ImmutableList</code>é€‰é¡¹ï¼š </p><br><ul><li> è¯¥APIåº”è¯¥ä¸â€œé˜…è¯»â€éƒ¨åˆ†ä¸­çš„å¸¸è§„<code>List</code> APIç›¸åŒã€‚ åº”è¯¥æ²¡æœ‰â€œå†™ä½œâ€éƒ¨åˆ†ã€‚ </li><li>  <code>ImmutableList</code>å’Œ<code>List</code>ä¸åº”é€šè¿‡ç»§æ‰¿å…³ç³»è¿›è¡Œå…³è”ã€‚ ä¸ºä»€ä¹ˆè¿™æ ·-äº†è§£åŸå§‹æ–‡ç« ã€‚ </li><li> ç”¨ç±»<code>ArrayList</code>å®ç°æ˜¯æœ‰æ„ä¹‰çš„ã€‚ è¿™æ˜¯æœ€ç®€å•çš„é€‰æ‹©ã€‚ </li><li> è¯¥å®ç°åº”å°½å¯èƒ½é¿å…å¤åˆ¶æ•°ç»„ã€‚ </li></ul><br><h2 id="realizaciya-immutablelist">  ImmutableListå®ç° </h2><br><p> é¦–å…ˆï¼Œæˆ‘ä»¬å¤„ç†APIã€‚ æˆ‘ä»¬æ£€æŸ¥äº†<code>Collection</code>å’Œ<code>List</code>æ¥å£ï¼Œå¹¶å°†å…¶ä¸­çš„â€œé˜…è¯»â€éƒ¨åˆ†å¤åˆ¶åˆ°æˆ‘ä»¬çš„æ–°æ¥å£ä¸­ã€‚ </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyCollection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isEmpty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span></span>; Object[] toArray(); &lt;T&gt; T[] toArray(T[] a); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">containsAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;?&gt; c)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyCollection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">E </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastIndexOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ListIterator&lt;E&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listIterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ListIterator&lt;E&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listIterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ReadOnlyList&lt;E&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fromIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toIndex)</span></span></span></span>; }</code> </pre> <br><p> æ¥ä¸‹æ¥ï¼Œåˆ›å»º<code>ImmutableList</code>ç±»ã€‚ ç­¾åç±»ä¼¼äº<code>ArrayList</code> ï¼ˆä½†å®ç°<code>ReadOnlyList</code>æ¥å£è€Œä¸æ˜¯<code>List</code> ï¼‰ã€‚ </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadOnlyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomAccess</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cloneable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span></span></code> </pre> <br><p> æˆ‘ä»¬ä»<code>ArrayList</code>å¤åˆ¶è¯¥ç±»çš„å®ç°å¹¶è¿›è¡Œç‰¢å›ºçš„é‡æ„ï¼Œä¸¢å¼ƒä¸â€œç¼–å†™â€éƒ¨åˆ†ç›¸å…³çš„æ‰€æœ‰å†…å®¹ï¼Œæ£€æŸ¥å¹¶å‘ä¿®æ”¹ç­‰ã€‚ </p><br><p> æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E[] original)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; original)</span></span></span></span></code> </pre> <br><p> ç¬¬ä¸€ä¸ªåˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ã€‚ ç¬¬äºŒä¸ªé€šè¿‡å¤åˆ¶æ•°ç»„åˆ›å»ºåˆ—è¡¨ã€‚ å¦‚æœæˆ‘ä»¬æƒ³å®ç°ä¸å¯å˜ï¼Œå°±ç¦»ä¸å¼€å¤åˆ¶ã€‚ ç¬¬ä¸‰ä¸ªæ›´æœ‰è¶£ã€‚ ç±»ä¼¼çš„<code>ArrayList</code>æ„é€ å‡½æ•°ä¹Ÿä»é›†åˆä¸­å¤åˆ¶æ•°æ®ã€‚ é™¤é<code>orginal</code>æ˜¯<code>ArrayList</code>æˆ–<code>Arrays$ArrayList</code>çš„å®ä¾‹ï¼ˆè¿™æ˜¯<code>Arrays.asList()</code>æ–¹æ³•è¿”å›çš„<code>Arrays.asList()</code> ï¼Œå¦åˆ™æˆ‘ä»¬å°†æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å‡è®¾è¿™äº›æƒ…å†µå°†è¦†ç›–90ï¼…çš„æ„é€ å‡½æ•°è°ƒç”¨ã€‚ </p><br><p> åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†é€šè¿‡åå°„æ¥â€œçªƒå–â€ <code>original</code>é˜µåˆ—ï¼ˆå¸Œæœ›è¿™æ¯”å¤åˆ¶åƒå…†å­—èŠ‚é˜µåˆ—è¦å¿«ï¼‰ã€‚  â€œç›—çªƒâ€çš„å®è´¨ï¼š </p><br><ul><li> æˆ‘ä»¬è¿›å…¥ç§æœ‰å­—æ®µ<code>original</code> ï¼Œå®ƒå­˜å‚¨æ•°ç»„ï¼ˆ <code>ArrayList.elementData</code> ï¼‰ </li><li> å°†é“¾æ¥å¤åˆ¶åˆ°æˆ‘ä»¬è‡ªå·±çš„æ•°ç»„ </li><li> æ”¾å…¥æºå­—æ®µnull </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Field data_ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { data_ArrayList = ArrayList.class.getDeclaredField(<span class="hljs-string"><span class="hljs-string">"elementData"</span></span>); data_ArrayList.setAccessible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NoSuchFieldException | SecurityException e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(e); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImmutableList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; original)</span></span></span><span class="hljs-function"> </span></span>{ Object[] arr = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (original <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ArrayList) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { arr = (Object[]) data_ArrayList.get(original); data_ArrayList.set(original, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-meta"><span class="hljs-meta">@SuppressWarnings</span></span>(<span class="hljs-string"><span class="hljs-string">"unused"</span></span>) IllegalArgumentException | IllegalAccessException e) { arr = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arr == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   ArrayList,      -  arr = original.toArray(); } this.data = arr; }</span></span></code> </pre> <br><p> ä½œä¸ºä¸€ç§çº¦å®šï¼Œæˆ‘ä»¬å‡è®¾åœ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œå¯å˜åˆ—è¡¨å°†<code>ImmutableList</code>ä¸º<code>ImmutableList</code> ã€‚ æ­¤åæ— æ³•ä½¿ç”¨åŸå§‹åˆ—è¡¨ã€‚ å°è¯•ä½¿ç”¨æ—¶ï¼Œå°†åˆ°è¾¾<code>NullPointerException</code> ã€‚ è¿™æ ·å¯ä»¥ç¡®ä¿â€œè¢«ç›—â€çš„æ•°ç»„ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„åˆ—è¡¨å°†æ˜¯çœŸæ­£ä¸å˜çš„ï¼ˆé™¤éæœ‰äººé€šè¿‡åå°„è¿›å…¥æ•°ç»„ï¼‰ã€‚ </p><br><h2 id="prochie-klassy"> å…¶ä»–ç­ </h2><br><p> å‡è®¾æˆ‘ä»¬å†³å®šåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨<code>ImmutableList</code> ã€‚ </p><br><p> è¯¥é¡¹ç›®ä¸åº“è¿›è¡Œäº¤äº’ï¼šä»åº“æ¥æ”¶å¹¶å‘å®ƒä»¬å‘é€å„ç§åˆ—è¡¨ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›åˆ—è¡¨å°†æ˜¯<code>ArrayList</code> ã€‚ æ‰€æè¿°çš„<code>ImmutableList</code>å®ç°å¯è®©<code>ImmutableList</code>å¿«é€Ÿå°†ç”Ÿæˆçš„<code>ArrayList</code>è½¬æ¢ä¸º<code>ImmutableList</code> ã€‚ è¿˜éœ€è¦å®ç°å‘é€åˆ°åº“çš„åˆ—è¡¨çš„è½¬æ¢ï¼š <code>ImmutableList</code>åˆ°<code>List</code> ã€‚ ä¸ºäº†å¿«é€Ÿè½¬æ¢ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªå®ç°<code>List</code>çš„<code>ImmutableList</code>åŒ…è£…å™¨ï¼Œåœ¨å°è¯•å†™å…¥åˆ—è¡¨æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆç±»ä¼¼äº<code>Collections.unmodifiableList</code> ï¼‰ã€‚ </p><br><p> åŒæ ·ï¼Œé¡¹ç›®æœ¬èº«ä»¥æŸç§æ–¹å¼å¤„ç†åˆ—è¡¨ã€‚ é€šè¿‡åŸºäº<code>ArrayList</code>çš„å®ç°ï¼Œåˆ›å»ºä¸€ä¸ªè¡¨ç¤ºå¯å˜åˆ—è¡¨çš„<code>MutableList</code>ç±»æ˜¯æœ‰æ„ä¹‰çš„ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ä¸ºæ‰€æœ‰<code>ArrayList</code>æ›¿æ¢<code>ArrayList</code>æ˜ç¡®å£°æ˜å…¶æ„å›¾<code>ArrayList</code>ç±»æ¥é‡æ„é¡¹ç›®ï¼š <code>ImmutableList</code>æˆ–<code>MutableList</code> ã€‚ </p><br><p> éœ€è¦ä»<code>ImmutableList</code>åˆ°<code>MutableList</code>çš„å¿«é€Ÿè½¬æ¢ï¼Œåä¹‹äº¦ç„¶ã€‚ åŒæ—¶ï¼Œä¸<code>ArrayList</code>åˆ°<code>ImmutableList</code>çš„è½¬æ¢ä¸åŒï¼Œæˆ‘ä»¬ä¸èƒ½å†ç ´ååŸå§‹åˆ—è¡¨ã€‚ </p><br><p> å¤åˆ¶æ•°ç»„é€šå¸¸ä¼šå¾ˆæ…¢ã€‚ ä½†æ˜¯ï¼Œå¯¹äºæ¥æ”¶åˆ°çš„<code>MutableList</code>å¹¶éæ€»æ˜¯æ›´æ”¹çš„æƒ…å†µï¼Œæ‚¨å¯ä»¥è¿›è¡ŒåŒ…è£…ï¼š <code>MutableList</code> ï¼Œå®ƒå°†ä¿å­˜å¯¹<code>ImmutableList</code>çš„å¼•ç”¨ï¼Œå¹¶å°†å…¶ç”¨äºâ€œè¯»å–â€æ–¹æ³•ï¼Œå¦‚æœè°ƒç”¨äº†â€œå†™å…¥â€æ–¹æ³•ï¼Œåˆ™åœ¨å¤åˆ¶å…¶å†…å®¹ä¹‹ååªä¼šå¿˜è®°<code>ImmutableList</code>æ•°ç»„æœ¬èº«ï¼Œç„¶åå®ƒå·²ç»å¯ä»¥ä½¿ç”¨å®ƒçš„æ•°ç»„äº†ï¼ˆåœ¨<code>CopyOnWriteArrayList</code>æœ‰ç‚¹ç›¸ä¼¼ï¼‰ã€‚ </p><br><p> è½¬æ¢â€œè¿”å›â€æ„å‘³ç€åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶æ¥æ”¶<code>MutableList</code>å†…å®¹çš„å¿«ç…§ã€‚ åŒæ ·ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸èƒ½ä¸å¤åˆ¶æ•°ç»„è€Œåšï¼Œä½†æ˜¯å¯ä»¥è¿›è¡ŒåŒ…è£…ä»¥ä¼˜åŒ–å¤šæ¬¡è½¬æ¢çš„æƒ…å†µï¼Œåœ¨<code>MutableList</code>è½¬æ¢ä¹‹é—´<code>MutableList</code>çš„å†…å®¹ä¸ä¼šæ”¹å˜ã€‚ è½¬æ¢â€œè¿”å›â€çš„å¦ä¸€ä¸ªé€‰é¡¹ï¼š <code>MutableList</code>æ”¶é›†äº†ä¸€äº›æ•°æ®ï¼Œå½“æ•°æ®æ”¶é›†å®Œæˆåï¼Œéœ€è¦å°†<code>MutableList</code>æ°¸ä¹…è½¬æ¢ä¸º<code>ImmutableList</code> ã€‚ å¦ä¸€ä¸ªåŒ…è£…ç¨‹åºä¹Ÿå¯ä»¥é¡ºåˆ©å®ç°ã€‚ </p><br><h2 id="itogo"> åˆè®¡ </h2><br><p>  <a href="">å®éªŒç»“æœä»¥ä»£ç å½¢å¼å‘å¸ƒåœ¨æ­¤å¤„</a> </p><br><p>  <code>ImmutableList</code>æœ¬èº«æ˜¯å·²<code>ImmutableList</code> ï¼Œè¿™åœ¨â€œå…¶ä»–ç±»â€éƒ¨åˆ†ä¸­è¿›è¡Œäº†æè¿°ï¼ˆä¸æ˜¯å—ï¼Ÿï¼‰ã€‚ </p><br><p> æˆ‘ä»¬å¯ä»¥å‡è®¾åŸå§‹æ–‡ç« â€œ Javaä¸­çš„ä¸å¯å˜é›†åˆå°†ä¸ä¼šâ€çš„å‰ææ˜¯é”™è¯¯çš„ã€‚ </p><br><p> å¦‚æœæœ‰éœ€æ±‚ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½ä½¿ç”¨ç±»ä¼¼çš„æ–¹æ³•ã€‚ æ˜¯çš„ï¼Œwithç€æ‹æ–ã€‚ æ˜¯çš„ï¼Œä¸åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ï¼Œè€Œä»…åœ¨ä»–ä»¬çš„é¡¹ç›®ä¸­ï¼ˆå°½ç®¡å¦‚æœæœ‰å¾ˆå¤šæ¸—é€çš„è¯ï¼Œå®ƒå°†é€æ¸è¿›å…¥åº“ä¸­ï¼‰ã€‚ </p><br><p> ä¸€ä»¶äº‹ï¼šå¦‚æœæœ‰æ¬²æœ›... <em>ï¼ˆå¡”å¸Œæå²›ï¼Œå¡”å¸Œæå²›â€¦â€¦æˆ‘ä»¬ä¸åœ¨å¡”å¸Œæå²›ï¼ä»–ä»¬åœ¨è¿™é‡Œå¾ˆå¥½åœ°å…»æ´»äº†æˆ‘ä»¬ã€‚ï¼‰</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN470257/">https://habr.com/ru/post/zh-CN470257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN470237/index.html">å‘¨æœ«æ–‡å­¦ï¼šæ˜“å­¦æ˜“è¯»</a></li>
<li><a href="../zh-CN470239/index.html">ç”Ÿäº§ä¸­æœªå¼€å‘çš„ERPï¼šåœ¨é‡ç—‡ç›‘æŠ¤å®¤è¿˜æ˜¯å¤ªå¹³é—´ï¼Ÿ</a></li>
<li><a href="../zh-CN470247/index.html">RESHI.RU-æœºå™¨äººè§£å†³å¹¶è§£é‡Šæ•°å­¦ä¸­çš„å­¦æ ¡è¯¾æ–‡é—®é¢˜</a></li>
<li><a href="../zh-CN470251/index.html">æˆ‘å¦‚ä½•åœ¨Flutterä¸Šåšæ¡Œé¢åº”ç”¨ç¨‹åºï¼ˆ+å¥–é‡‘ï¼‰</a></li>
<li><a href="../zh-CN470255/index.html">ä½¿ç”¨ALGLIBä¼˜åŒ–å€ºåˆ¸æŠ•èµ„ç»„åˆ</a></li>
<li><a href="../zh-CN470259/index.html">æœç´¢ä¸­çš„Aimyboxï¼šç”¨äºåˆ›å»ºè¯­éŸ³åŠ©æ‰‹çš„æ¡†æ¶éœ€è¦iOSå‘å¯¼</a></li>
<li><a href="../zh-CN470265/index.html">C ++ç¼©å†™å¤‡å¿˜å•ç­‰ã€‚ ç¬¬1éƒ¨åˆ†ï¼šC ++</a></li>
<li><a href="../zh-CN470267/index.html">è®¤è¯æ¸©åº¦ç›‘æ§</a></li>
<li><a href="../zh-CN470271/index.html">Fï¼ƒ6ï¼šå…ƒç»„</a></li>
<li><a href="../zh-CN470273/index.html">Fï¼ƒ7ï¼šè®°å½•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>