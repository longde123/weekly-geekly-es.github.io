<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃 🚚 🧓🏻 [signet] 23 recommandations pour protéger les applications Node.js 👨‍👧‍👦 🚬 🤲🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De nos jours, les services Web sont constamment exposés à une variété d'attaques. Par conséquent, la sécurité est quelque chose à retenir à toutes les...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[signet] 23 recommandations pour protéger les applications Node.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/419719/">  De nos jours, les services Web sont constamment exposés à une variété d'attaques.  Par conséquent, la sécurité est quelque chose à retenir à toutes les étapes du cycle de vie du projet.  Les auteurs du matériel, dont nous publions la traduction aujourd'hui, maintiennent un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">référentiel</a> sur GitHub contenant environ 80 recommandations pour sécuriser les applications s'exécutant sur la plate-forme Node.js.  Ce matériel, basé sur de nombreuses publications de sécurité, contient plus de deux douzaines de recommandations concernant Node.js et quelques conseils généraux.  De plus, ce matériel couvre les 10 principales vulnérabilités de la liste du projet OWASP. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/un/rv/yq/unrvyqhru9dijyht3zx9k9x4tlg.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1. Utilisez les règles du linter, visant à vérifier la sécurité du code</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recommandations </h3><br>  Pendant le développement, utilisez un plug-in de sécurité pour le linter, tel que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">eslint-plugin-security</a> .  Cela vous permet d'identifier très tôt les vulnérabilités et les problèmes de sécurité - au moment de la rédaction du code approprié.  Cette approche permet de détecter les faiblesses de la sécurité du programme.  Parmi eux, l'utilisation de la commande <code>eval</code> , l'invocation de processus enfants, l'importation de modules avec le transfert à la commande correspondante de quelque chose de différent d'un littéral de chaîne (par exemple, une certaine chaîne formée sur la base de données transmises au serveur par l'utilisateur). <br><br>  → <a href="">Voici quelques informations</a> utiles sur les règles de linter <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Adam Baldwin</a> dit ce qui suit sur le peluchage: «Linter ne devrait pas être juste un outil qui suit méticuleusement les règles concernant le nombre d'espaces utilisés, les points-virgules et l'utilisation de la commande eval.  ESLint fournit au développeur une plate-forme puissante qui peut détecter et éliminer un large éventail de modèles potentiellement dangereux dans le code.  Nous parlons, par exemple, d'expressions régulières, de la vérification des entrées utilisateur, etc.  Je crois que le linter offre aux développeurs qui sont préoccupés par les problèmes de sécurité un nouvel outil puissant qui mérite d'être étudié. » <br><br><h3>  Problèmes possibles </h3><br>  Ce qui ressemble à une faille de sécurité mineure pendant le développement devient une grave vulnérabilité dans la production.  De plus, si tous les développeurs de projets ne respectent pas des règles de sécurité uniformes lorsqu'ils travaillent avec du code, cela peut entraîner des vulnérabilités dans celui-ci ou, par exemple, la pénétration de données confidentielles dans des référentiels publics. <br><br><h2>  <font color="#3AC1EF">2. Limitez le nombre de demandes de serveur simultanées</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/49a/a03/c6b49aa0355cb99de053d330a5305b15.png"></div><br><h3>  Recommandations </h3><br>  Les attaques DoS sont très populaires parmi les cybercriminels et elles sont relativement faciles à réaliser.  Vous pouvez implémenter un système pour limiter le nombre de demandes à une application à l'aide d'un service externe, tel qu'un équilibreur de charge cloud, un pare-feu cloud, un serveur nginx ou, pour les petites applications qui ne sont pas critiques, utiliser un middleware pour limiter le nombre de demandes comme le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">débit express -limit</a> . <br><br>  → <a href="">Voici le</a> matériel sur la mise en place du système de limitation de la fréquence des requêtes au serveur <br><br><h3>  Problèmes possibles </h3><br>  Une application qui ne fournit pas de système pour limiter le nombre de requêtes simultanées peut être attaquée, ce qui entraînera son échec.  Cela se traduit par le fait que les utilisateurs d'une telle application auront soit des difficultés à travailler avec elle, soit ne pourront pas du tout interagir avec elle. <br><br><h2>  <font color="#3AC1EF">3. Supprimez les informations confidentielles des fichiers de configuration ou chiffrez-les</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  Recommandations </h3><br>  Ne stockez jamais de données sensibles en texte brut dans des fichiers de configuration ou dans du code.  Utilisez plutôt des systèmes de gestion des données sensibles tels que les produits Vault ou les systèmes Kubernetes / Docker Secrets, ou utilisez des variables d'environnement pour stocker ces données.  Les données confidentielles stockées dans le système de contrôle de version doivent être cryptées, des mesures doivent être prises pour leur stockage et leur utilisation en toute sécurité.  Parmi ces mesures figurent l'utilisation de clés dynamiques, l'utilisation de dates d'expiration de mot de passe, des audits de sécurité, etc.  Utilisez des systèmes pour vérifier le code avant de le valider ou avant de l'envoyer au référentiel pour éviter l'envoi accidentel de données sensibles au référentiel public. <br><br>  → <a href="">Voici des</a> informations sur la gestion des données sensibles <br><br><h3>  Problèmes possibles </h3><br>  Même si le code est stocké dans un référentiel fermé, un jour, par erreur, il peut devenir accessible au public.  À ce stade, toutes les données confidentielles qui y sont stockées deviendront du domaine public.  Par conséquent, un accès tiers au référentiel avec le code les conduira par inadvertance à accéder aux systèmes qui lui sont associés (bases de données, API, services, etc.). <br><br><h2>  <font color="#3AC1EF">4. Empêchez les vulnérabilités d'injection de code</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recommandations </h3><br>  Afin d'empêcher les injections SQL / NoSQL et autres attaques similaires, utilisez toujours des bibliothèques ORM / ODM ou des mécanismes SGBD visant à nettoyer les données ou à prendre en charge des requêtes paramétrées nommées ou indexées et à vérifier ce qui vient de l'utilisateur.  N'utilisez jamais, pour incorporer certaines valeurs dans des textes de requête, uniquement des chaînes JavaScript de modèle ou une concaténation de chaînes, car cette approche ouvre votre application à un large éventail de vulnérabilités.  Toutes les bibliothèques respectables pour Node.js utilisées pour travailler avec des données (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sequelize</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Knex</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mangouste</a> ) contiennent une protection intégrée contre les attaques par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">injection de</a> code. <br><br>  → <a href="">Voici le</a> matériel sur la prévention des injections à l'aide des bibliothèques ORM / ODM <br><br><h3>  Problèmes possibles </h3><br>  L'utilisation de données non vérifiées et non nettoyées reçues de l'utilisateur dans les requêtes peut entraîner une attaque en introduisant un opérateur lors de l'utilisation d'une base de données NoSQL telle que MongoDB.  Si vous n'utilisez pas de système de nettoyage de données ou de bibliothèque ORM lorsque vous travaillez avec une base de données SQL, cela entraînera la possibilité d'une attaque par injection SQL, ce qui crée un énorme trou de sécurité dans l'application. <br><br><h2>  <font color="#3AC1EF">5. Évitez les attaques DoS en définissant explicitement les conditions de fin anormale du processus</font> </h2><br><h3>  Recommandations </h3><br>  Le processus Node se bloque lorsqu'une erreur non gérée se produit.  Mais dans de nombreuses recommandations reflétant les meilleures pratiques pour Node, il est recommandé de mettre fin aux processus même lorsqu'une erreur a été interceptée et traitée.  Express, par exemple, se bloque lorsqu'une erreur asynchrone se produit - à moins que les routes ne soient enveloppées dans <code>catch</code> expressions <code>catch</code> .  Ce fait offre aux attaquants une opportunité très intéressante.  Après avoir découvert que lorsqu'une certaine demande arrive, le processus se bloque, ils commencent à lui envoyer de telles demandes.  Il n'y a aucune recommandation qui résoudrait ce problème d'un seul coup, cependant, certaines astuces peuvent l'atténuer.  Ainsi, à la fin du processus en raison d'une erreur non gérée, vous devez en informer l'administrateur, en accordant à cette notification la plus haute priorité.  Il est nécessaire de vérifier ce qui vient au processus dans les demandes et d'éviter les situations de fin anormale du processus en raison de demandes qui, accidentellement ou intentionnellement, sont mal formées.  Toutes les routes doivent être enveloppées dans <code>catch</code> expressions <code>catch</code> et le système doit être configuré de sorte que, si la demande était la cause de l'erreur, le processus ne se bloque pas (contrairement à ce qui se passe au niveau de l'application globale). <br><br><h3>  Problèmes possibles </h3><br>  Analysons la situation suivante.  Il existe de nombreuses applications Node.js.  Que se passe-t-il si nous commençons à leur envoyer des requêtes POST avec JSON vide comme corps de requête?  Cela entraînera le blocage de bon nombre de ces applications. <br><br>  Maintenant, si nous devions jouer le rôle de cybercriminels, pour que nous empêchions les applications de se bloquer, il suffirait de continuer à leur envoyer des demandes similaires. <br><br><h2>  <font color="#3AC1EF">6. Configurer les en-têtes de réponse HTTP pour augmenter la sécurité du projet</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  Recommandations </h3><br>  Une application doit utiliser des en-têtes HTTP orientés sécurité pour empêcher les attaquants de recourir à des techniques d'attaque courantes telles que le scriptage intersite (XSS), le détournement de clics et autres.  La personnalisation des en-têtes est facile en utilisant des modules spéciaux tels que le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">casque</a> . <br><br>  → <a href="">Voici des</a> informations sur l'utilisation des en-têtes sûrs <br><br><h3>  Problèmes possibles </h3><br>  Si des en-têtes HTTP sécurisés ne sont pas utilisés, les attaquants pourront effectuer des attaques contre les utilisateurs de vos applications, ce qui entraîne d'énormes vulnérabilités. <br><br><h2>  <font color="#3AC1EF">7. En continu, automatiquement, vérifiez vos projets pour l'utilisation des dépendances vulnérables en eux</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/810/c93/fcf/810c93fcf88a0b68e15d345fccc1b597.png"></div><br><h3>  Recommandations </h3><br>  Dans l'écosystème NPM, les projets avec de nombreuses dépendances sont très courants.  Les dépendances doivent toujours être contrôlées, compte tenu de la découverte de nouvelles vulnérabilités.  Utilisez des outils tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npm audit</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nsp</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">snyk</a> pour détecter, surveiller et corriger les dépendances vulnérables.  Intégrez ces outils dans votre système d'intégration continue.  Cela vous permettra de détecter les dépendances vulnérables avant leur mise en production. <br><br>  → <a href="">Voici des</a> informations sur la sécurité des dépendances du projet <br><br><h3>  Problèmes possibles </h3><br>  Un attaquant peut déterminer le framework web utilisé dans le projet et mener des attaques contre toutes les vulnérabilités connues. <br><br><h2>  <font color="#3AC1EF">8. Essayez de ne pas utiliser le module cryptographique Node.js standard pour le traitement des mots de passe, utilisez plutôt Bcrypt</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recommandations </h3><br>  Les mots de passe ou autres données sensibles (clés API, par exemple) doivent être stockés en les traitant avec des fonctions cryptographiques utilisant du «sel», comme Bcrypt.  Il vaut la peine d'utiliser exactement quelque chose de similaire, et non le module de <code>crypto</code> Node.js standard pour des raisons de sécurité et de performances. <br><br>  → <a href="">Voici le</a> matériel sur Bcrypt <br><br><h3>  Problèmes possibles </h3><br>  Les mots de passe ou certaines données confidentielles qui sont stockés sans l'application de mesures appropriées pour les protéger sont vulnérables aux attaques par force brute et aux attaques de dictionnaire, qui, par conséquent, conduisent à la divulgation de ces données. <br><br><h2>  <font color="#3AC1EF">9. Utilisez des systèmes d'échappement de caractères dans les données HTML, JS et CSS envoyées à l'utilisateur</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b7/846/638/0b7846638c9f820198235d61d8a2d0f0.png"></div><br><h3>  Recommandations </h3><br>  Si certaines données sont envoyées au navigateur de l'utilisateur à partir d'une source non fiable, même si elles doivent simplement être affichées, ces données peuvent être un code qui peut être exécuté.  Ceci est communément appelé script intersite (XSS).  Vous pouvez réduire le risque que de telles attaques soient possibles en utilisant des bibliothèques spéciales qui traitent les données afin qu'elles ne puissent pas être exécutées.  C'est ce qu'on appelle l'encodage ou le blindage des données. <br><br>  → <a href="">Voici des</a> informations sur le blindage de la sortie <br><br><h3>  Problèmes possibles </h3><br>  Si vous ne vous souciez pas du blindage des données, un attaquant peut, par exemple, enregistrer du code JavaScript malveillant dans votre base de données, qui peut être transmis aux clients inchangé et lancé. <br><br><h2>  <font color="#3AC1EF">10. Vérifiez les données JSON arrivant sur le serveur</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d5/56d/a15/9d556da155eb3922f32262c33522f797.png"></div><br><h3>  Recommandations </h3><br>  Contrôlez le contenu des corps des demandes entrantes, en vérifiant si elles correspondent à ce que vous attendez de voir dans de telles demandes.  Si la demande ne se présente pas comme prévu, arrêtez rapidement de la traiter.  Afin d'éviter l'opération fastidieuse d'écriture du code de vérification des demandes pour chaque itinéraire, vous pouvez utiliser des outils JSON légers pour la validation des données, tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jsonschema</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">joi</a> . <br><br>  → <a href="">Voici le</a> matériel sur la vérification des données JSON entrantes <br><br><h3>  Problèmes possibles </h3><br>  Si le serveur accepte les demandes cordialement sans les examiner minutieusement, cela augmente considérablement la surface d'attaque de l'application et incite les attaquants à essayer de trouver bon nombre d'entre elles qui conduisent à un «plantage» du système. <br><br><h2>  <font color="#3AC1EF">11. Maintenir les jetons JWT sur liste noire</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recommandations </h3><br>  Lorsque vous utilisez des jetons JWT (par exemple, si vous travaillez avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Passport.js</a> ), par défaut, il n'existe aucun mécanisme standard pour révoquer les privilèges d'accès au système pour les jetons déjà émis.  Même si vous constatez qu'un certain utilisateur fait quelque chose de manifestement anormal, vous n'avez aucun moyen, par le biais du mécanisme de jeton, de bloquer son accès au système, tant qu'il a un jeton valide.  Ce problème peut être atténué en implémentant une liste noire de jetons non approuvés, dont la validation est effectuée à chaque demande. <br><br>  → <a href="">Voici le</a> matériel sur les jetons JWT sur liste noire <br><br><h3>  Problèmes possibles </h3><br>  Les jetons qui tombent entre de mauvaises mains peuvent être utilisés par un attaquant.  Il pourra accéder à l'application et se faire passer pour un utilisateur ordinaire - le propriétaire du jeton. <br><br><h2>  <font color="#3AC1EF">12. Limitez le nombre de tentatives de connexion</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recommandations </h3><br>  Dans les applications basées sur express, pour se protéger contre les attaques par force brute et les attaques par dictionnaire, il vaut la peine d'utiliser le middleware approprié, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">express-brute</a> .  De même, vous devez protéger les itinéraires critiques tels que <code>/admin</code> ou <code>/login</code> .  La protection doit être basée sur l'analyse des propriétés de la requête, telles que le nom d'utilisateur utilisé dans la requête ou d'autres identificateurs, tels que les paramètres du corps de la requête. <br><br>  → <a href="">Voici le</a> matériel sur la limitation du nombre de tentatives de connexion <br><br><h3>  Problèmes possibles </h3><br>  Si l'application ne limite pas le nombre de tentatives de connexion, l'attaquant peut envoyer automatiquement un nombre illimité de demandes de connexion à votre système, par exemple, en essayant d'accéder à un compte privilégié. <br><br><h2>  <font color="#3AC1EF">13. Exécutez Node.js en tant qu'utilisateur non root</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c0/dca/b4d/4c0dcab4d9a0d1fce8fcaf8b6abbdcce.png"></div><br><h3>  Recommandations </h3><br>  Un scénario extrêmement courant est lorsque Node.js est exécuté en tant qu'utilisateur root avec des privilèges illimités.  Par exemple, voici comment tout est configuré par défaut dans les conteneurs Docker.  Il est recommandé de créer un utilisateur qui ne dispose pas des privilèges root et de l'intégrer dans l'image Docker ou de démarrer le processus au nom de cet utilisateur en appelant le conteneur avec l'indicateur <code>-u username</code> . <br><br>  → <a href="">Voici le</a> matériel sur le lancement de Node.js en tant qu'utilisateur non root <br><br><h3>  Problèmes possibles </h3><br>  Si Node.js est exécuté sous le compte d'utilisateur root, un attaquant qui a pu exécuter un script sur le serveur obtient des possibilités illimitées sur la machine locale.  Disons qu'il peut modifier les paramètres <code>iptable</code> et rediriger le trafic vers son propre ordinateur. <br><br><h2>  <font color="#3AC1EF">14. Limitez la quantité de données transmises dans les demandes à l'aide d'un serveur proxy inverse ou d'un middleware</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d5/56d/a15/9d556da155eb3922f32262c33522f797.png"></div><br><h3>  Recommandations </h3><br>  Plus la quantité de données dans le corps de la demande est grande, plus il est difficile pour un serveur à thread unique de traiter une telle demande.  L'utilisation de requêtes volumineuses donne à un attaquant la possibilité d'inonder le serveur de travaux inutiles sans lui envoyer un grand nombre de requêtes (c'est-à-dire sans effectuer d'attaque DoS / DDoS).  Vous pouvez réduire le risque de telles attaques en limitant la taille des corps des demandes entrantes sur un certain système de frontière (sur un pare-feu ou sur un équilibreur de charge), ou en configurant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">body-parser</a> express pour recevoir uniquement les paquets contenant une petite quantité de données. <br><br>  → <a href="">Voici des</a> informations sur la limitation de la quantité de données transmises dans les requêtes <br><br><h3>  Problèmes possibles </h3><br>  Si vous ne limitez pas la quantité de données transmises dans les requêtes, un attaquant peut charger l'application en traitant des requêtes volumineuses.  Pour le moment, il ne pourra pas résoudre les tâches pour lesquelles il est conçu.  Cela entraîne de mauvaises performances et rend l'application vulnérable aux attaques DoS. <br><br><h2>  <font color="#3AC1EF">15. Évitez d'utiliser la fonction eval en JavaScript</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/580/560/70a580560fba67e09f87bdd6c5ecda04.png"></div><br><h3>  Recommandations </h3><br>  La fonction <code>eval</code> est mauvaise car elle vous permet d'exécuter du code JS arbitraire qui lui est transmis pendant l'exécution du programme.  De plus, ce n'est pas seulement que ce code peut ralentir l'application.  Cette fonction pose un grave risque pour la sécurité, car du code JS malveillant envoyé au serveur par un attaquant pourrait y pénétrer. <br><br>  En outre, vous devez éviter le <code>new Function</code> constructeur <code>new Function</code> .  Les fonctions <code>setTimeout</code> et <code>setInterval</code> n'ont jamais besoin de transmettre du code JS généré dynamiquement. <br><br>  → <a href="">Voici les informations</a> sur eval <br><br><h3>  Problèmes possibles </h3><br>  Si quelqu'un trouve un moyen de transférer du code JS malveillant, sous forme de texte, d'une fonction <code>eval</code> ou d'un autre moteur JS similaire, il aura un accès complet à la page, à tout ce qui peut être fait en utilisant JavaScript.  Cette vulnérabilité est souvent associée aux attaques XSS. <br><br><h2>  <font color="#3AC1EF">16. Ne surchargez pas les applications Node.js à thread unique avec des expressions régulières malveillantes</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/49a/a03/c6b49aa0355cb99de053d330a5305b15.png"></div><br><h3>  Recommandations </h3><br>  Les expressions régulières, bien que pratiques, constituent une menace pour les applications JavaScript en général, et en particulier pour la plate-forme Node.js.  Le traitement avec une expression régulière de ce qui vient de l'utilisateur peut créer une énorme charge sur le processeur.  Par exemple, le traitement des expressions régulières peut être si inefficace que la vérification de dix mots peut bloquer le cycle des événements pendant plusieurs secondes et surcharger le processeur.  Par conséquent, il est préférable d'utiliser des packages tiers pour vérifier les données de chaîne, telles que <a href="">validator.js</a> , au lieu d'écrire vos propres expressions régulières.  Vous pouvez utiliser le package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">safe-regex</a> pour détecter les modèles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">regex</a> vulnérables. <br><br>  → <a href="">Voici</a> le matériel d'expression rationnelle anti-malware <br><br><h3>  Problèmes possibles </h3><br>  Les expressions régulières mal écrites peuvent être sujettes à un type particulier d'attaques DoS, au cours desquelles la boucle d'événements est complètement bloquée.  Par exemple, en novembre 2017, il a été découvert que le package de <code>moment</code> populaire était vulnérable à de telles attaques. <br><br><h2>  <font color="#3AC1EF">17. Évitez de charger des modules à l'aide de variables</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recommandations </h3><br>  Évitez d'importer des fichiers dont le chemin est spécifié en tant que paramètre, en fonction des considérations selon lesquelles ce paramètre peut être défini en fonction des données de l'utilisateur.  Cette règle peut être étendue pour inclure ici et, en général, l'accès aux fichiers (à l'aide de <code>fs.readFile()</code> ) et l'accès à toute autre ressource importante à l'aide des paramètres reçus de l'utilisateur.  L'utilisation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">eslint-plugin-security</a> permet de détecter très tôt de tels modèles dangereux. <br><br>  → <a href="">Voici des</a> informations sur le chargement sécurisé des modules <br><br><h3>  Problèmes possibles </h3><br>  Les données envoyées au serveur par un attaquant peuvent se trouver dans les paramètres chargés d'importer certains fichiers, parmi lesquels peut être un fichier malveillant qui a été précédemment téléchargé sur le serveur.  Ces données peuvent également être utilisées pour accéder aux fichiers système déjà sur l'ordinateur. <br><br><h2> <font color="#3AC1EF">18.     </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/580/560/70a580560fba67e09f87bdd6c5ecda04.png"></div><br><h3>  </h3><br>      ,        (,  ),  «»,         .    ,    ( <code>cluster.fork()</code> ),     npm-,   . <br><br> → <a href=""></a>        <br><br><h3>   </h3><br>  ,   ,      .   —  ,  ,    ,      . <br><br><h2> <font color="#3AC1EF">19.        </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  </h3><br> ,   ,   .      ,     ,          ,       .      <code>child_process.execFile</code> , ,  ,    ,        ,  . <br><br> → <a href=""></a>    ,       <br><br><h3>   </h3><br>                ,  ,    ,   ,   . <br><br><h2> <font color="#3AC1EF">20.      </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>    express,  ,    . ,   ,       ,    <code>Error</code> (    ).    , ,        ,      -  ,       . <br><br> → <a href=""></a>         <br><br><h3>   </h3><br>  ,    , ,      ,            ,    ,      . <br><br><h2> <font color="#3AC1EF">21.     npm  Yarn</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>     ,      -,      (MFA, multi-factor authentication).   npm  Yarn     ,      .  ,      ,       ,       .        ,      .   , ,  npm,                   . <br><br><h3>   </h3><br>  ,        ? <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    eslint,     . <br><br><h2> <font color="#3AC1EF">22.   ,   </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>   -       .    ,      —     ,   -  .   ,   ,      <code>X-Powered-By</code> ,          ,      .   ,        ( , , Node.js  express). <br><br> → <a href=""></a>   -    <br><br><h3>   </h3><br> -     .  ,         ,  -,   —    .            . <br><br><h2> <font color="#3AC1EF">23.     </font> </h2><br>           ,      .  —  ,     Node.js. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>     ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> OWASP</a> . <br><br><ul><li>      root-      . </li><li>        ( SSH-). </li><li>  ,      ,   ,   . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  OWASP,  . </li><li>       ,     .  ,      . <br></li><li>       OAuth, OpenID,   .     Basic Authentication. <br></li><li>    .      ,    (   —       ),   X   ,  Y . <br></li><li>        —     ,    —   .     ,      . <br></li><li>    ,  ,    .             ( —     GitHub, AWS, Jenkins,   ). <br></li></ul><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>      . ,        Node.js-. <br><br>  <b>Chers lecteurs!</b>       -,        ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ft/qm/bo/ftqmbopklpm88ixbi5vqyx2zcb8.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419719/">https://habr.com/ru/post/fr419719/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419707/index.html">Gamification des applications - 5 choses à retenir</a></li>
<li><a href="../fr419711/index.html">La première IT Bike Quest à Saint-Pétersbourg. Comment c'était</a></li>
<li><a href="../fr419713/index.html">Conférence de conception Mail.Ru + Meetup Dribbble 2018</a></li>
<li><a href="../fr419715/index.html">Vous ne savez pas comment travailler avec les transactions</a></li>
<li><a href="../fr419717/index.html">Conception d'une architecture d'application embarquée</a></li>
<li><a href="../fr419721/index.html">Biomarqueurs du vieillissement. Panel de fragilité. Partie 1</a></li>
<li><a href="../fr419725/index.html">Fléchettes, dés et pièces: algorithmes de distribution discrets</a></li>
<li><a href="../fr419727/index.html">Harbor - un registre pour les conteneurs Docker prêts à l'emploi</a></li>
<li><a href="../fr419729/index.html">Événement caritatif «Donner des ailes aux enfants»</a></li>
<li><a href="../fr419731/index.html">Mini-revue de l'imprimante 3D photopolymère dentaire MoonRay S</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>