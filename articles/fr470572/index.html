<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèæ üöØ ‚è¨ ¬´Automatisation des infrastructures. Pourquoi faisons-nous cela? " (Denis Yakovlev) üíç üë®‚Äç‚öñÔ∏è üïú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je propose de me familiariser avec le d√©codage du rapport de Denis Yakovlev "Automatisation des infrastructures. Pourquoi faisons-nous cela?" 


 Le r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬´Automatisation des infrastructures. Pourquoi faisons-nous cela? " (Denis Yakovlev)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470572/"><h4 id="predlagayu-oznakomitsya-s-rasshifrovkoy-doklada-denisa-yakovleva-avtomatizaciya-infrastruktury-zachem-my-eto-delaem">  Je propose de me familiariser avec le d√©codage du rapport de Denis Yakovlev "Automatisation des infrastructures. Pourquoi faisons-nous cela?" </h4><br><p>  <strong>Le rapport 2016 lui-m√™me.</strong>  <strong>Le rapport a √©t√© sp√©cialement d√©crypt√© pour ceux qui cr√©ent des machines virtuelles avec leurs mains.</strong> </p><br><p>  Rapportez comment nous, chez 2GIS, travaillons de mani√®re automatis√©e avec l'infrastructure. </p><br><p>  ¬´Il faut courir aussi vite pour rester en place, mais pour aller quelque part, il faut courir au moins deux fois plus vite¬ª (Alice au pays des merveilles). </p><br><p>  Que signifie cette phrase pour nous?  Dans un environnement hautement concurrentiel, les entreprises doivent s'efforcer de livrer leurs produits aux utilisateurs le plus rapidement possible.  La r√©duction du d√©lai de mise sur le march√© est une t√¢che √† plusieurs niveaux.  Pour le r√©soudre, vous devez modifier √† la fois les processus et les outils de d√©veloppement.  L'infrastructure est une base importante pour l'ensemble du processus de d√©veloppement.  Plus l'infrastructure est grande, plus elle pr√©sente de probl√®mes, de cas d'utilisation, etc.  Si toutes les op√©rations avec celui-ci ne sont pas automatis√©es, le nombre de probl√®mes augmente.  L'un d'eux est le temps qu'un d√©veloppeur passe sur les probl√®mes d'infrastructure au lieu d'√©crire la logique m√©tier. </p><br><p>  Parlons de: </p><br><ul><li>  Quels probl√®mes d'infrastructure ont rencontr√© les √©quipes; </li><li>  Comment les processus de d√©veloppement et de test en ont souffert; </li><li>  Comment nous avons impl√©ment√© OpenStack; </li><li>  Quels sont nos sc√©narios d'utilisation d'OpenStack; </li><li>  Comment l'automatisation a re√ßu une impulsion suppl√©mentaire dans le d√©veloppement et de nouveaux produits internes ont commenc√© √† appara√Ætre; </li><li>  Les aspects qui nous restent ne sont pas automatis√©s. </li></ul><br><iframe width="560" height="315" src="https://www.youtube.com/embed/18b-OWRKrO4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><p>  √Ä propos de moi.  Soci√©t√© 2GIS.  Je travaille dans l'entreprise depuis deux ans. </p><br><p><img src="https://habrastorage.org/webt/gy/ag/2-/gyag2-xckvwdkl7gdm_7hx6pvwk.png"></p><br><p>  √âquipe des infrastructures et des op√©rations.  Nous supportons principalement l'infrastructure interne du d√©partement Web.  R√©cemment, d'autres √©quipes de produits internes nous ont rejoint.  Nous sommes √©galement responsables du fonctionnement des produits Web de l'entreprise en production.  Et nous recherchons et d√©veloppons √©galement de nouveaux outils pour nous faciliter la vie et am√©liorer la vie de nos d√©veloppeurs bien-aim√©s.  Nous ne sommes que 9. </p><br><p><img src="https://habrastorage.org/webt/c3/uz/zk/c3uzzkplsh7pvj68b9jf3w0x6fw.png"></p><br><p>  Nous comprenons d'abord l'infrastructure.  Pourquoi parlons-nous d'elle?  Qu'est ce que c'est  Quand commen√ßons-nous √† parler d'elle? </p><br><p><img src="https://habrastorage.org/webt/kt/le/hu/ktlehulbfvgz5uniizdomjk3ksi.png"></p><br><p>  D√®s les premiers moments de travail sur le produit et certains projets, nous avons une question - o√π allons-nous d√©ployer?  o√π v√©rifier les r√©sultats?  o√π tester et ainsi de suite. </p><br><p><img src="https://habrastorage.org/webt/vc/f1/og/vcf1ogp7ucfxxsl7fcr0a1ovn4i.png"></p><br><p>  Imm√©diatement, la premi√®re r√©ponse est locale.  Localement parce que c'est tr√®s simple.  D√©velopp√© sur son ordinateur portable, lanc√©, v√©rifi√© - tout va bien.  Vous √™tes assis en pensant - pourquoi v√©rifier en plus de votre ordinateur portable?  Tout fonctionne pour moi. </p><br><p><img src="https://habrastorage.org/webt/tv/fo/8s/tvfo8s67s_3qr_lddgivqgufr1q.png"></p><br><p>  Et si nous avons un syst√®me d'exploitation sur l'ordinateur portable, et un autre tourne en production?  Ou notre produit doit-il prendre en charge plusieurs syst√®mes d'exploitation? </p><br><p><img src="https://habrastorage.org/webt/oi/1v/3v/oi1v3vxhil-0wjcz2nccgv35ane.png"></p><br><p>  L'affaire n'est pas couverte.  Autrement dit, diff√©rents syst√®mes d'exploitation. </p><br><p><img src="https://habrastorage.org/webt/cz/az/nd/czaznduqrmabsvhdrj3ghflrjmk.png"></p><br><p>  Si nous en avons l'occasion et que nous prenons une d√©cision ferme - nous avons Linux partout.  Par exemple, certains Ubuntu.  Le reste vient du malin.  Il nous semble que nous avons r√©solu tous nos probl√®mes. </p><br><p><img src="https://habrastorage.org/webt/fk/cm/n4/fkcmn40rxtplxg4wqwwrc5rfqzk.png"></p><br><p>  Mais il ne suffit pas de faire correspondre le syst√®me d'exploitation.  Nous avons besoin de packages d'une certaine version. </p><br><p><img src="https://habrastorage.org/webt/ur/wk/v2/urwkv23z-j7zrihbl1khhw-w15y.png"></p><br><p>  nous pensons comment r√©soudre ce probl√®me.  Et rappelez-vous - nous avons l'isolement.  Des trucs tr√®s √©lev√©s.  Dieu merci, il y a tellement de produits sur le march√©.  Nous prenons virtualbox.  Cr√©ez une machine virtuelle.  Nous roulons notre produit.  Nous faisons des instantan√©s.  Nous avons l'environnement. </p><br><p><img src="https://habrastorage.org/webt/r-/n9/bk/r-n9bka6ertxpzyqxpbhupanpky.png"></p><br><p>  Nous nous d√©veloppons.  Notre produit devient plus difficile.  Ce n'est plus seulement une application de base de donn√©es php.  L'application est devenue un syst√®me distribu√©.  Nous avons d'autres produits √† venir. </p><br><p><img src="https://habrastorage.org/webt/6s/i2/hk/6si2hkul51ld2phlv1mpz__aixw.png"></p><br><p>  L'entreprise se d√©veloppe.  Et nous avons de nouveaux cas d'utilisation.  Tous ces produits veulent s'int√©grer, pouvoir travailler ensemble.  Nous avons des fonctionnalit√©s qui passent par plusieurs produits.  On nous demande constamment de montrer ce que vous avez d√©velopp√©.  Voyons cela quelque part.  Nous n'avons plus de ressources pour les tests manuels.  Nous rappelons qu'il existe une int√©gration continue, des autotests.  Pour ce faire, vous avez besoin d'un logiciel suppl√©mentaire.  L'environnement local am√©ricain, m√™me avec tout l'isolement, ne suffit plus.  C'est l√† que l'infrastructure entre en jeu.  Nous avons besoin d'un endroit o√π nous pouvons d√©ployer nos produits et montrer √† quelqu'un les r√©sultats.  Nous devons en quelque sorte g√©rer tout cela et cela devrait √™tre pratique. </p><br><p><img src="https://habrastorage.org/webt/pr/vf/uh/prvfuhn624yrkiadhp2hsbuyvfe.png"></p><br><p>  Allons voir notre soci√©t√© 2GIS. </p><br><p><img src="https://habrastorage.org/webt/e-/a8/j-/e-a8j-63rvzelvponft65ysnbmw.png"></p><br><p>  Ceci est un guide et des cartes.  Vous pouvez consulter le plan de la ville, rechercher des organisations. </p><br><p><img src="https://habrastorage.org/webt/iy/lp/rc/iylprcfa5i3k3gevbgac_aun2ai.png"></p><br><p>  Nous avons: produits web, mobile, application bureautique.  Il y a environ trente-cinq √©quipes diff√©rentes de tailles diff√©rentes. </p><br><p><img src="https://habrastorage.org/webt/g4/za/ei/g4zaeixca9qx5xbjlb7c7pdhg-e.png"></p><br><p>  Quels probl√®mes avons-nous rencontr√©s avec l'infrastructure?  Fin 2013, nous avons utilis√© proxmox.  Il s'agit d'un syst√®me de gestion de virtualisation.  En l'utilisant, vous pouvez cr√©er des machines virtuelles KVM ou des conteneurs OpenVZ.  Mais tout cela se fait √† la main via des interfaces.  Pour un fonctionnement complet, vous devez toujours acc√©der √† la machine virtuelle et configurer le r√©seau, DNS. </p><br><p><img src="https://habrastorage.org/webt/jh/un/um/jhunumwvdccmklzouppnrkzu3ns.png"></p><br><p>  Par cons√©quent, pendant un certain temps, le flux de notre d√©veloppement a √©t√© le suivant.  En tant que d√©veloppeur, je recherche des administrateurs de tickets.  Les administrateurs, lorsqu'ils ont le temps, cr√©ent une machine virtuelle.  Ils donnent une adresse IP, un login, un mot de passe.  Mais si j'ai besoin de red√©ployer cette machine virtuelle, je reviens aux administrateurs qui me regardent d√©j√† avec m√©fiance.  Ils disent - un gars autant que possible? </p><br><p><img src="https://habrastorage.org/webt/hm/1a/ls/hm1alsxmnf5lmpfgtmminlzvtdq.png"></p><br><p>  Il n'y avait pas de s√©paration des projets.  Il y avait un ensemble de machines virtuelles sur plusieurs serveurs, o√π les administrateurs ont tout cr√©√© avec leurs mains.  Il y avait une forte probabilit√© d'erreur humaine.  Vous pouvez confondre l'adresse IP ou supprimer la mauvaise machine virtuelle.  Un tr√®s, tr√®s grand nombre de ces cas.  Et la responsabilit√© de la machine virtuelle est incompr√©hensible.  Les d√©veloppeurs ne sont pas responsables, les administrateurs ne prennent pas non plus de bain de vapeur.  Il n'est pas clair que quelqu'un d'autre ait besoin d'une machine virtuelle ou que tout le monde l'ait oubli√© depuis longtemps et ne le sache pas. </p><br><p><img src="https://habrastorage.org/webt/3y/9e/pw/3y9epwkzviqkgupe0toc_9pbioo.png"></p><br><p>  De plus, il y a une API faible.  Les plugins sont payants ou perl. </p><br><p><img src="https://habrastorage.org/webt/vb/pq/9y/vbpq9yat0roahzxzqzhca9i23hy.png"></p><br><p>  Mais en plus des probl√®mes, nous avions autre chose d'utile.  Nous avions notre propre fer √† repasser, sur lequel tout cela tournait.  Nos administrateurs syst√®me sont de bons amis, ils savent comment cuisiner ce fer, en prendre soin et l'acheter correctement.  Et ils avaient une certaine exp√©rience de la virtualisation. </p><br><p><img src="https://habrastorage.org/webt/kn/tl/ic/kntlic-tm5c91z9ogulyo9zweqa.png"></p><br><p>  Nous avons commenc√© √† penser: quelle solution nous conviendrait?  √Ä quoi devrait ressembler notre infrastructure pour ne pas interf√©rer avec le processus de d√©veloppement, mais plut√¥t aider? </p><br><p>  Nous avons obtenu la liste d'exigences suivante √† la suite de l'√©tude: </p><br><ul><li><p>  Utilisation efficace du fer.  Nous ne voulons pas de machines virtuelles orphelines.  Nous ne voulons pas simplement r√©chauffer l'air dans le centre de donn√©es. </p><br></li><li><p>  Nous voulons avoir des ressources d'√©quipe afin que l'√©quipe prenne la responsabilit√© des ressources qu'elle utilise.  Et elle √©tait attentive √† eux. </p><br></li><li><p>  Nous voulons que la solution soit modulaire, choisissez uniquement les services dont nous avons besoin.  Et en cas de besoin, avec de nouveaux d√©veloppements, √™tre en mesure de se d√©velopper. </p><br></li><li><p>  La solution doit √™tre facilement finalis√©e.  Si de nouvelles exigences apparaissent, nous pourrions affiner la solution √† nos besoins sp√©cifiques. </p><br></li><li><p>  Nous avons besoin non seulement d'une interface utilisateur, nous avons besoin d'une API pour √©crire nos liaisons et g√©rer l'infrastructure. </p><br></li><li><p>  Nous voulons isoler les √©quipes, et surtout l'√©quipe de test de charge.  Je voulais qu'elle ne d√©range pas du tout le reste. </p><br></li></ul><br><p><img src="https://habrastorage.org/webt/fg/nc/xf/fgncxfm2nnnkbfslzo0nnl35cfk.png"></p><br><p>  Quelles √©taient nos options? </p><br><p>  Nous avons examin√© le cloud public: AWS et plus encore.  L'option est int√©ressante dans la mesure o√π elle prend en charge presque tous les probl√®mes li√©s aux infrastructures.  Il √©tait possible de prendre et de payer beaucoup d'argent √† ces soci√©t√©s c√©l√®bres, mais nous √©tions contraints par la situation d√©go√ªtante du dollar (ou des sanctions).  Je ne voulais pas vraiment avoir de verrou de fournisseur.  La troisi√®me option, dans laquelle nous avons examin√© ce que nous avons sur le march√© open source?  Quelles solutions sont propos√©es?  Nous avons notre propre mat√©riel, il reste √† choisir quelque chose parmi ces nombreuses applications open source. </p><br><p><img src="https://habrastorage.org/webt/qk/ii/sw/qkiiswbwmdnunz_qpef2z7vpdso.png"></p><br><p>  Donc, √† la fin, nos recherches et exp√©riences nous ont conduit √† un logiciel appel√© OpenStack.  Softinke bien s√ªr, cela semble trop grossier. </p><br><p><img src="https://habrastorage.org/webt/o9/-8/rd/o9-8rd06u7nff83ufgzbdagqage.png"></p><br><p>  OpenStack est un logiciel √† part enti√®re, en fait, c'est un ensemble de services pour la construction d'un cloud public ou priv√©.  OpenStack est une solution open source.  Tous les services sont √©crits en python.  Chaque service est responsable de sa t√¢che, poss√®de sa propre API. </p><br><p><img src="https://habrastorage.org/webt/vw/x9/gm/vwx9gmn5e_jp0m9wcer_ajrj4e0.png"></p><br><p>  Et √ßa ressemble √† √ßa.  Rappelez-vous cette image.  Ensuite, nous reviendrons vers elle.  Il existe des services (g√©n√©raux) partag√©s.  Il existe des services √† cet effet: calcul, mise en r√©seau, stockage.  Et notre application ou utilisateur travaille avec ces services. </p><br><p><img src="https://habrastorage.org/webt/1i/eg/1e/1ieg1ek2kopjwzgf_3_tsatwdtg.png"></p><br><p>  Solution open source.  La sortie a lieu six mois.  La version comprend des composants de base.  Chaque version comprend de nouveaux composants qui apparaissent initialement dans cet incubateur.  Ils y passent du temps, corrigent des bugs, se stabilisent et ainsi de suite.  Et √† un moment donn√©, la communaut√© d√©cide que ce composant devrait √™tre inclus dans les composants de base de la prochaine version.  Il existe √©galement de nombreux mailings, r√©unions, conf√©rences.  La plus grande conf√©rence est l'OpenStack Summit.  Tenue chaque ann√©e.  Et lors du dernier OpenStack Summit, il y avait environ quatre ou cinq mille participants.  Un si grand √©v√©nement.  Beaucoup de rapports. </p><br><p><img src="https://habrastorage.org/webt/ac/ms/go/acmsgowharhocay2-ypwcuhhwky.png"></p><br><p>  Beaucoup de gens contribuent √† cette d√©cision.  Ici, je n'ai donn√© qu'une liste de ces hauts.  Cette liste est suffisante pour comprendre la gravit√© du projet et les entreprises et les ressources qu'elles y investissent. </p><br><p><img src="https://habrastorage.org/webt/mu/jd/i_/mujdi_xe4zcvroyq_czco2ccwvm.png"></p><br><p>  Comment nous avons r√©solu nos probl√®mes d'infrastructure. </p><br><ul><li>  L'un des composants d'OpenStack est le planificateur, qui s√©lectionne l'h√¥te sur lequel la machine virtuelle sera cr√©√©e. </li><li>  L'√©quipe dispose d√©sormais de ses propres ressources.  C'est la quantit√© de CPU, de m√©moire et plus encore.  Nous nous sommes d√©barrass√©s de ce sc√©nario pour cr√©er un virtuel sur tiket (application). </li><li>  OpenStack est un ensemble de services qui l'est.  Nous n'avons pris que le kit de base qui r√©pondait √† nos besoins. </li><li>  √âtant donn√© qu'OpenStack est open-source, il est possible de le modifier. </li><li>  Chaque service poss√®de une API.  Il existe des versions python.  Autrement dit, il est assez simple d'interagir avec chaque service et d'√©crire vos propres liaisons. </li><li>  Isolement.  Nous pouvons isoler des √©quipes pour nous sur des projets, sur des zones d'agr√©gation, sur des r√©seaux, etc. </li></ul><br><p><img src="https://habrastorage.org/webt/db/th/sr/dbthsrjfwry6lmqpejowmzephv4.png"></p><br><p>  Les d√©veloppeurs de l'√©quipe ont re√ßu l'infrastructure en tant que service.  √Ä quoi √ßa ressemble. </p><br><p><img src="https://habrastorage.org/webt/e7/q8/6y/e7q86ycmgunc1i0clqgi13hosza.png"></p><br><p>  Il existe deux concepts de pile et de mod√®le.  Stack est un ensemble de ressources cloud: machines virtuelles, r√©seau, enregistrements DNS et plus encore.  Un mod√®le est une description de cette pile.  Dans le cas d'OpenStack, il s'agit d'un fichier YAML normal.  Voici une partie du dossier.  Il indique qu'il existe une entit√© telle qu'un serveur avec un serveur OS Nova de type interne.  Pour son fonctionnement normal, vous avez besoin d'une adresse IP et d'un enregistrement DNS.  Ici, les param√®tres de nom sont accept√©s en entr√©e, la saveur est une description des ressources dont ce serveur a besoin.  Syst√®me d'exploitation d'image.  nom_cl√© - quelle cl√© publique mettre lors du d√©ploiement du serveur.  Nous avons tous ces mod√®les dans le r√©f√©rentiel de chacun d'eux dans git.  Tout le monde y a acc√®s.  Tout le monde peut envoyer une demande de pull. </p><br><p><img src="https://habrastorage.org/webt/ue/cn/yb/uecnybkseypqwackevttdl_urym.png"></p><br><p>  Et la cr√©ation de Stack est la suivante.  Heat est le composant OpenStack responsable de l'orchestration.  Nous disons cela dans ce contexte.  Il s'agit d'un excellent utilitaire que nous avons install√© pour nous-m√™mes.  Nous disons ch√®re chaleur, cr√©ez-nous une pile avec ce nom, voici une description des ressources dont nous avons besoin pour cr√©er cette pile.  Et voici l'entr√©e requise par notre mod√®le, qui d√©crit notre pile.  Nous le chargeons en chaleur.  Il y fait du bruit pendant un moment, cr√©e en nous toutes les ressources n√©cessaires.  Et aussi nous dans ce mod√®le ici, nous pouvons sp√©cifier la sortie.  Lorsque la chaleur a cr√©√© Stack, elle peut produire des informations: adresse IP, acc√®s et le reste que nous demandons.  De plus, nous pouvons d√©j√† appliquer ces informations pour une automatisation suppl√©mentaire. </p><br><p><img src="https://habrastorage.org/webt/8o/rw/wr/8orwwrabyca0-nmfxfeg8s9yrxg.png"></p><br><p>  Pour que vous ne pensiez pas qu'OpenStack est simple et bon march√©, je vais vous dire pour quel mat√©riel OpenStack fonctionne.  Le panneau de contr√¥le tourne sur 3 infra-n≈ìuds.  Ce sont des serveurs de fer avec de telles ressources.  Il s'agit de la configuration recommand√©e pour le basculement. </p><br><p><img src="https://habrastorage.org/webt/kv/r1/nv/kvr1nvsoifsdsnvnf9lnyxrcdvw.png"></p><br><p>  Nous avons √©galement deux n≈ìuds de r√©seau KVM qui desservent notre r√©seau. </p><br><p><img src="https://habrastorage.org/webt/ql/gw/oh/qlgwohgkf6ry1g_iiy8ousjoaum.png"></p><br><p>  Les ressources de l'√©quipe tournent sur 8 n≈ìuds de calcul.  Ils sont divis√©s en 3 zones d'agr√©gation.  Un n≈ìud de calcul est allou√© par zone pour les tests de charge.  L√†, les serveurs sont cr√©√©s uniquement √† partir de l'√©quipe de test de charge.  Afin de ne pas interf√©rer avec le reste.  Nous avons une zone d'agr√©gation pour notre projet d'automatisation des tests GUI internes.  Il a certaines exigences.  Il est situ√© dans une zone d'agr√©gation distincte.  Tous les autres environnements de d√©veloppement, serveurs, environnements de test tournent dans la troisi√®me grande zone d'agr√©gation.  Cela nous prend 6 n≈ìuds de calcul. </p><br><p><img src="https://habrastorage.org/webt/uq/qh/wb/uqqhwbqsf0aqg4xl4hibkvdjcyw.png"></p><br><p>  Nous faisons tourner environ 350 machines virtuelles pour toutes les √©quipes. </p><br><p><img src="https://habrastorage.org/webt/q9/u5/nw/q9u5nwuk8lajoby71bgk8ttftea.png"></p><br><p>  Qu'avons-nous compris alors que nous avions d√©j√† parcouru un certain chemin.  Pour d√©ployer et prendre en charge ce logiciel, vous avez besoin d'une √©quipe.  √âquipe en fonction de vos ressources. </p><br><p><img src="https://habrastorage.org/webt/8b/cs/eb/8bcsebrogamrpv-i4aevm6brqsu.png"></p><br><p>  Les √©quipes doivent avoir certaines comp√©tences. </p><br><p>  Tout d'abord, c'est naturellement Ansible.  OpenStack deploy est √©crit en Ansible.  Il existe un projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OpenStack-Ansible</a> .  Si vous souhaitez ajouter OpenStack-Ansible √† vos besoins, les personnes qui le feront doivent poss√©der Ansible. </p><br><p>  Exp√©rience de virtualisation.  Vous devez √™tre capable de cuisiner la virtualisation, vous devez r√©gler.  Comprenez comment cela fonctionne. </p><br><p>  Le m√™me r√©seau. </p><br><p>  Il en va de m√™me pour les services backend qu'OpenStack utilise pour son travail.  Cette base de donn√©es est MySQL Galera et RabbitMQ en tant que file d'attente. </p><br><p>  Comprendre le fonctionnement du DNS.  Comment le configurer. </p><br><p>  OpenStack est √©crit en python.  Vous devez pouvoir lire le code.  Id√©alement, vous devez pouvoir patcher.  Recherchez les correctifs de la communaut√©.  √ätre capable de d√©buter le code.  Tout cela est tr√®s utile.  Si une √©quipe a une telle approche, sait utiliser une approche comme Infrastructure comme code, comme ansible, par exemple, toutes les modifications sont stock√©es dans le code, alors elles n'auront pas de probl√®mes lors de la configuration des mains. </p><br><p>  Int√©gration continue.  La suite de services OpenStack comprend un service tel que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">tempest</a> .  Dans ce document, tous les tests sont √©crits sur tous les composants.  Si nous changeons la configuration, ex√©cutons un dipl√¥me s√©par√© dans l'installation All-In-One et ex√©cutons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Tempest</a> - nous cherchons √† voir si quelque chose est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">tomb√©</a> avec nous.  CI est configur√© et l'√©quipe doit comprendre cela et doit √™tre en mesure de configurer tout cela. </p><br><p><img src="https://habrastorage.org/webt/tf/ys/f5/tfysf5fh56lvcmsdh8ae1oqupnu.png"></p><br><p>  Parce que tout semble simple et attrayant √©tant donn√©. </p><br><p><img src="https://habrastorage.org/webt/pn/yw/d3/pnywd3j3eyzqffrnz3egw_wfyg8.png"></p><br><p>  Mais lorsque vous commencez √† vous y plonger davantage, vous comprenez qu'en fait, tout ressemble √† ceci.  Cela peut √™tre une surprise pour quelqu'un. </p><br><p><img src="https://habrastorage.org/webt/5p/9d/uj/5p9dujin57sxp6qs8akdiw3fgxw.png"></p><br><p>  L'introduction d'OpenStack n'est pas seulement une solution technique.  De plus, il faut pouvoir vendre, √™tre en mesure d'expliquer aux √©quipes le nouveau paradigme de leur fonctionnement actuel, quels b√©n√©fices cela apporte.  Comment travailler avec lui pour obtenir un profit.  Nous avons √©crit beaucoup de documentation.  La documentation est de la forme quickstart (d√©marrage rapide), premi√®res √©tapes (premi√®res √©tapes).  C'est-√†-dire ce qui doit √™tre fait pour vous faciliter la vie rapidement et ne pas y consacrer beaucoup de temps. </p><br><p>  Nous avons men√© TechTalk, nous avons parl√©, fait des sujets, montr√©, parl√©, maintenant voyez maintenant que vous pouvez obtenir votre produit comme suit.  litt√©ralement ici, nous √©crivons un mod√®le, nous le lan√ßons.  Tout est assez simple.  Maintenant, vous n'avez plus besoin d'aller voir les administrateurs pour leur demander quelque chose. </p><br><p>  Dans des cas particuli√®rement difficiles lorsque le projet est complexe, il a beaucoup de cas, nous sommes venus en √©quipes, avons travaill√© directement avec les √©quipes.  Autrement dit, ils ont en quelque sorte essay√© de les aider dans l'automatisation des processus.  Mettre en place toutes les √©quipes.  Bless√© quelques bugs.  Ils ont compris que nous n'avions pas configur√© quelque chose de mal l√†-bas.  En g√©n√©ral, un travail serr√© avec les √©quipes. </p><br><p><img src="https://habrastorage.org/webt/rh/kv/xo/rhkvxoaqqbbicptnizpn1iouykg.png"></p><br><p>  Nous avons re√ßu un d√©ploiement rapide de produits.  Auparavant, pour recevoir des produits, il fallait effectuer de nombreuses actions manuelles, interagir avec de nombreuses personnes.  Nous obtenons maintenant la cr√©ation d'Environnement (environnement, serveur) par bouton.  Et si le d√©ploiement est √©crit et fonctionne pour le projet, nous obtenons le d√©ploiement par le bouton ou le nouvel environnement (environnement, serveurs) avec le produit install√©. </p><br><p>  L'absence d'une infrastructure normale a √©t√© un obstacle pour certaines √©quipes en termes de mise en ≈ìuvre du processus CI au sein de l'√©quipe.  Nous avons r√©solu les probl√®mes d'infrastructure, les √©quipes form√©es sur le serveur CI, configur√© le pipeline, les machines virtuelles sont cr√©√©es dans le pipeline.  En g√©n√©ral, ils ont donn√© une impulsion au d√©veloppement de ces processus. </p><br><p>  Ils ont √©galement aid√© certains produits internes qui utilisent l'infrastructure pour automatiser les tests.  VM Master est un produit qui teste notre ligne.  Il doit √©lever beaucoup de machines virtuelles afin d'acc√©der au site √† partir de diff√©rents navigateurs, suivre certaines √©tapes pour comprendre que le fonctionnement en ligne dans tous les navigateurs connus.  Autrement dit, ils l'ont beaucoup aid√©. </p><br><p>  Un bon bonus est qu'ils ont d√©charg√© les administrateurs (eux-m√™mes).  Parce qu'√† un moment donn√©, l'activit√© de cr√©ation d'une machine virtuelle a commenc√© √† prendre du temps.  Et tout le monde a commenc√© √† devenir nerveux.  Maintenant, nous faisons des choses int√©ressantes, des produits complexes.  Nous nous sommes d√©barrass√©s de la t√¢che de routine. </p><br><p><img src="https://habrastorage.org/webt/ho/0f/4z/ho0f4zmwursgmh8xbvcx8anakg8.png"></p><br><p>  Des questions? </p><br><p>  Question: Combien de temps a-t-il fallu pour d√©ployer OpenStack? </p><br><p>  R√©ponse: La question est compliqu√©e parce que nous avions un processus qui peut accueillir une s√©rie comique.  Il a un seuil d'entr√©e √©lev√©.  Nous avons compris toute notre infrastructure, recherch√© une solution - cela a pris trois mois.  Puis, en un mois, nous avons d√©ploy√© la premi√®re installation quelque part.  Nous y avons ajout√© quelques projets.  Ils y vivaient.  Puis le facteur humain s'est produit - ils ont tir√© sur la t√™te de cette installation.  Nous avons r√©alis√© que le manque de tol√©rance aux pannes est mauvais.  Ensuite, nous avons attendu le fer. </p><br><p>  Question: Utilisez-vous un support payant? </p><br><p>  R√©ponse: non, nous ne l'utilisons pas. </p><br><p>  Question: Quelle version d'OpenStack utilisez-vous? </p><br><p>  R√©ponse: Les versions d'OpenStack sont appel√©es mots.  Tout d'abord, Juno, puis nous sommes pass√©s √† Liberty. </p><br><p>  Question: Les machines virtuelles sont-elles cr√©√©es dans le pipeline Int√©gration continue? </p><br><p>  R√©ponse: Construire dans Jenkins peut provoquer de la chaleur et cr√©er une machine virtuelle. </p><br><p>  Question: Avez-vous rencontr√© des probl√®mes avec le partage des ressources?  En gros, 2 machines virtuelles sont sur le m√™me serveur physique.  L'un d'eux commence √† charger un disque, par exemple une base de donn√©es.  Si vous √™tes confront√©, comment avez-vous d√©cid√©? </p><br><p>  R√©ponse: Nous n'avons pas rencontr√© de probl√®mes avec le partage des ressources.  Les produits des autres n'interf√®rent pas beaucoup.  Nous avons pr√©sent√© les scripts.  Si vous devez ex√©cuter un sc√©nario lourd, ex√©cuter des tests de charge, vous devez vous adresser √† l'√©quipe de test de charge et celle-ci ex√©cute le test de charge. </p><br><p> :            - ? </p><br><p> :      OpenStack .   .       .         . </p><br><p> :     .         .   OpenStack      ? </p><br><p> :     .  OpenStack  .   . </p><br><p> :          OpenStack? </p><br><p> :     .      proxmox.     OpenStack. </p><br><p> :   DevOps? </p><br><p> : DevOps  ,          .    , ,           . </p><br><p> PS  2019       OpenStack  heat   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Terraform</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470572/">https://habr.com/ru/post/fr470572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470561/index.html">Mon exp√©rience en cabinet 1C</a></li>
<li><a href="../fr470563/index.html">Comment les d√©veloppeurs vivent √† Ulianovsk</a></li>
<li><a href="../fr470566/index.html">Pr√©paration √† la certification professionnelle du printemps. Questions sur Spring MVC</a></li>
<li><a href="../fr470568/index.html">D√©ploiement bleu-vert des applications Spring avec Nginx Web Server</a></li>
<li><a href="../fr470570/index.html">GridmiAPI - une biblioth√®que Android simple et flexible pour travailler avec REST et RPC</a></li>
<li><a href="../fr470576/index.html">Les banques d'Am√©rique vont supprimer 200 000 emplois au cours des prochaines ann√©es</a></li>
<li><a href="../fr470578/index.html">Comment nous avons ¬´humanis√©¬ª la comptabilit√© dans une banque mobile</a></li>
<li><a href="../fr470584/index.html">V√©rifiez l'interface utilisateur Telerik pour UWP pour vous familiariser avec PVS-Studio</a></li>
<li><a href="../fr470592/index.html">Revue Plesk - Panneaux de contr√¥le d'h√©bergement et de site</a></li>
<li><a href="../fr470594/index.html">Reportage du spectacle de lumi√®re ¬´Circle of Light¬ª 2019 √† Moscou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>