<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úùÔ∏è üê∑ üåº SPA-Entwicklungserfahrung auf VueJS + Nuxt üçâ üôÜüèΩ üöç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unser Unternehmen befasst sich haupts√§chlich mit der Entwicklung von Online-Shops und wir m√∂chten unsere Erfahrungen bei der Entwicklung eines Projekt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SPA-Entwicklungserfahrung auf VueJS + Nuxt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414137/">  Unser Unternehmen befasst sich haupts√§chlich mit der Entwicklung von Online-Shops und wir m√∂chten unsere Erfahrungen bei der Entwicklung eines Projekts f√ºr eine Reihe von VueJS + Nuxt + Laravel teilen. <br><a name="habracut"></a><br>  In dem Artikel wird erl√§utert, wie wir beschlossen haben, den Online-Shop als SPA zu implementieren: Wie wir dazu gekommen sind, Schwierigkeiten, Leichtigkeit. <br><br>  Die Site, die diskutiert wird, ist ein fast klassischer Online-Shop mit einem Katalog, Filtern, Suche, Warenkorb, pers√∂nlichem Konto, d.h.  fast alles, was im Laden sein kann.  Das Projekt hat eine andere Logik, Preisgestaltung und Zuordnung f√ºr juristische Personen und Einzelpersonen. <br><br><h4>  Warum SPA </h4><br>  Vor dem aktuellen Projekt bestand unsere Erfahrung bei der Entwicklung von Anwendungen mit nur einer Seite nur aus wenigen internen Projekten.  In vielerlei Hinsicht war das SPA f√ºr uns in gewisser Weise ein dunkles Pferd. <br><br>  Es gab kein klares Verst√§ndnis f√ºr die Probleme, die mit dem Wachstum des Projekts, seiner SEO-F√∂rderung und Stabilit√§t verbunden waren, als sie als Erfahrung und langj√§hrige Prozesse bei der Schaffung gew√∂hnlicher Standorte keine Fragen zur L√∂sung dieser Probleme aufwarfen. <br><br>  Die Wahl des Ansatzes l√∂ste in unserem Unternehmen eine ziemlich hitzige Debatte aus, sowohl Skalen als auch Argumente waren gef√ºllt und die Entscheidung war sehr schwierig.  Unsere Entwickler haben beschlossen, einen Prototyp von mehreren Seiten des Projekts zu sammeln und zu pr√ºfen, welche Schwierigkeiten bei jedem Ansatz auftreten w√ºrden.  Dieser Ansatz half uns bei der endg√ºltigen L√∂sung.  Die Prototypen haben gezeigt, dass die Verwaltung des Status der Website (Katalog, Warenkorb, Kasse usw.) wesentlich komfortabler ist und in der SPA-Version weniger Probleme verursacht.  Die Geschwindigkeit der Entwicklung und Interaktion zwischen Setzern und Programmierern hat sich erheblich erh√∂ht, da Sie kein Layout √ºbertragen m√ºssen, sondern nur vorgefertigten Komponenten Logik hinzuf√ºgen m√ºssen.  Die Probleme, auf die wir sto√üen k√∂nnten, wurden ebenfalls klarer und dies f√ºhrte zu weiteren Ma√ünahmen.  Vor uns lag die Wahl der Technologie. <br><br>  Vor dem Fenster ist Sommer 2017. Auf Twitter und auf Medium lassen Streitigkeiten nicht nach, was noch besser ist, vue oder reagiert.  Unser B√ºro hat diesen Trend nicht bestanden.  Die Entwickler teilten sich auch in zwei Lager auf, jedes mit seinen eigenen Argumenten.  Zuvor hat jeder von uns bereits mit beiden Technologien gearbeitet. <br>  Jemand ist jsx n√§her gekommen, jemand bevorzugt das bekanntere HTML oder den Mops, jemand glaubt, dass Unver√§nderlichkeit hilft, den Status der Anwendung besser zu √ºberwachen und zu kontrollieren, f√ºr jemanden scheint dies eine √úberkomplikation zu sein.  Auf der anderen Seite bietet uns jedes Framework die M√∂glichkeit, Einzeldateikomponenten zu erstellen, und f√ºr beide gibt es bereits recht stabile Bibliotheken mit allen f√ºr uns erforderlichen Funktionen (SSR, globales Statusmanagement, Routing, Metadatenmanagement).  F√ºr die Reaktion ist es nextjs, und f√ºr vue ist es nuxtjs.  Nuxt befand sich zum Zeitpunkt der Auswahl noch in der Beta, war aber recht stabil.  Weil  Der Entwicklungsprozess wurde so erstellt, dass wir zun√§chst ein Layout haben und dann den Backend-Teil erstellen und das Layout der Seiten an das Frontend √ºbertragen. Die Auswahl des Frameworks war recht einfach.  Wir haben uns f√ºr vue und nuxtjs entschieden, weil  Es wurde beschlossen, die Site zu erstellen und die API parallel zu starten.  Mit diesem Ansatz ist es bequem, Komponenten sofort zusammenzusetzen und ihnen Logik hinzuzuf√ºgen.  Unsere Layout-Designer haben sich n√§her an die Erstellung ihres √ºblichen HTML-Codes gewandt. <br><br><h4>  Ein bisschen √ºber Backend </h4><br>  In Bezug auf Serverl√∂sungen und allgemein die Auswahl der Technologien f√ºr den Aufbau des Backends sind wir den bekannteren Weg gegangen.  Die Sprache wurde php gew√§hlt, f√ºr die wir das Laravel-Framework verwenden.  Alles dreht sich um Nginx.  Als Datenbankl√∂sung haben wir MySQL. <br><br><h4>  Beginn der Entwicklung, gebrauchte Pakete und Probleme </h4><br>  Nuxt bietet v√∂llig zufriedenstellende Pakete f√ºr die Verwaltung des Anwendungsstatus (vuex) und des Routings (vue-router).  Daher kann sofort mit dem Zusammenbau des Projekts und der Befestigung der Logik an den Komponenten begonnen werden. Suchen Sie dann nach Bedarf nach den ben√∂tigten Paketen.  Zun√§chst brauchte ich nat√ºrlich eine L√∂sung f√ºr die Kommunikation mit dem Backend-Teil.  Zu diesem Zweck wurde Axios ausgew√§hlt, der Standard, der bereits f√ºr alle verf√ºgbar ist, und der Nuxt-Axios-Modul-Wrapper dar√ºber.  Wir helfen dem Projekt auch sofort, sich nicht in der Umgebung zu verlieren und in jeder Umgebung mit der gew√ºnschten Konfiguration auszuf√ºhren - w√§hlen Sie dotenv und den nuxt-dotenv-Modul-Wrapper.  Um mit der Entwicklung zu beginnen, reicht dies aus und der Layoutprozess hat begonnen. <br><br>  Die erste Pause trat auf, als dem Layout ein Bildschieberegler hinzugef√ºgt werden musste.  "Wo ist mein Slick-Slider, ich will jquery" war von der Layout-Seite des Raumes zu h√∂ren.  Eine schnelle √úberpr√ºfung der vorgefertigten L√∂sungen ergab mehrere f√ºr uns geeignete Schieberegler.  Aber fast jeder hat eine Abh√§ngigkeit in Form von jquery mitgeschleppt, die ich dem fertigen Bundle nicht hinzuf√ºgen wollte, um dadurch seine Gr√∂√üe zu erh√∂hen.  Einige Pakete unterst√ºtzten kein Server-Rendering, was auch f√ºr uns wichtig war.  Infolgedessen fiel die Wahl auf einen fantastischen Swiper, der unsere Anforderungen voll und ganz erf√ºllte und noch ein bisschen mehr.  Nachdem der Schieber verschraubt war, blieben unsere Layouter lange Zeit ratlos.  ‚ÄûIst das alles, muss ich noch etwas tun?  Geben Sie einfach eine Liste mit Bildern an und es funktioniert? ‚Äú <br><br>  Als n√§chstes kam die Auswahl der Komponente f√ºr die Auswahl der Daten.  Es gab mehr Gl√ºck  Eine H√ºlle f√ºr unser geliebtes Flatpickr wurde schnell gefunden.  Alles was blieb war, es ein wenig zu stylen. <br><br>  An mehreren Stellen auf der Website befindet sich eine Karte.  Aber weil  Wir brauchten keine perfekten Details und keine Ausarbeitung der Karte, es gab keine Wahl zwischen den Diensten.  Dennoch gibt es zum Zeitpunkt der Entwicklung und auch jetzt noch keine L√∂sungen, die alle unsere Anforderungen ideal abdecken.  Basierend auf allen Vor- und Nachteilen wurden Google Maps und der Vue2-Google Maps-Wrapper ausgew√§hlt.  Das Paket ist gro√ü genug und zieht viel Unn√∂tiges f√ºr uns, aber es l√∂st seine Probleme gut. <br><br>  In einigen Formularen haben wir Felder zur Eingabe des Telefons.  Der Benutzer muss beim Eingeben des Telefons helfen, da es zu viele Optionen f√ºr das Format gibt. In Zukunft ist es einfacher, in Zukunft mit Daten zu arbeiten, die in einem einzigen Format eingegeben wurden.  Deshalb brauchst du eine Maske.  Ich wollte die bereits bekannte Textmaske verwenden, und hier hatten wir Gl√ºck, sie hatten bereits eine L√∂sung f√ºr vue - vue-text-mask. <br><br>  Diese Pakete deckten fast alle unsere Anforderungen ab.  Alles, was √ºbrig blieb, war, Klicks au√üerhalb der Komponente zu verfolgen, was Vue-Click-Outside half.  Wir haben ein schnelles Scrollen der Seite mit vue-backtotop implementiert.  Verwenden Sie moment, um mit Datumsangaben zu arbeiten. <br><br><h4>  Die endg√ºltige Bundle-Gr√∂√üe und woher kam 1 Megabyte? </h4><br>  Es sollte ber√ºcksichtigt werden, dass ein wichtiges Kriterium bei der Auswahl der Pakete ihr Gewicht war. <br><br>  In der Mitte des Projekts haben wir beschlossen, das endg√ºltige Projekt zu analysieren und die Baugruppenabmessungen zu sehen.  Die Ergebnisse waren, gelinde gesagt, √ºberraschend.  Die Ganggr√∂√üe der app.js betrug etwas mehr als 950 kb gzip.  Das npm run analyse Team brachte uns ein wundersch√∂nes Diagramm mit der Gr√∂√üe aller Module, aus dem wir feststellten, dass einige Module unn√∂tige Abh√§ngigkeiten in Form von jquery, lodash usw. ziehen.  Sie mussten diese Pakete ablehnen und eine Alternative zu ihnen finden.  Derzeit betr√§gt die Gr√∂√üe des gesamten Bundles 480 KB gzip. <br><br><img src="https://habrastorage.org/webt/d9/q5/wo/d9q5woogma0yygvlzimwhk8eu6w.png"><br><br>  Achten Sie auf Abh√§ngigkeiten und √ºberpr√ºfen Sie regelm√§√üig die Gr√∂√üe Ihrer Anwendung. <br><br><h4>  Erste Ladeseite und Daten von API erhalten </h4><br>  Nuxt bietet eine bequeme M√∂glichkeit, den Speicher vor dem Laden des Clients mit Daten auf der Serverseite zu f√ºllen.  Hierzu wird die Aktion nuxtServerInit verwendet.  F√ºr uns sieht es so aus: <br><br><img src="https://habrastorage.org/webt/bs/1t/yc/bs1tycfomfmwwuq8mbegz8movug.png"><br><br>  Da wir Kategorien und einige andere Entit√§ten in mehreren Komponenten gleichzeitig verwenden, war es f√ºr uns bequemer, sie sofort zu erhalten und in den Laden zu stellen. <br><br>  Aber hier gibt es ein Problem mit der JSON-Gr√∂√üe, die Sie erhalten.  Da der Server alle empfangenen Daten zum ersten Rendern an den Client sendet, ist die HTML-Gr√∂√üe m√∂glicherweise zu gro√ü.  Wir sind darauf gesto√üen, als wir in Kategorien begonnen haben, Bilder, Beschreibungen und andere Felder, die f√ºr uns unn√∂tig waren, auf alle Seiten zu √ºbertragen, die zu jeder Kategorie geh√∂ren.  Die JSON-Gr√∂√üe betrug √ºber 2 MB.  Gl√ºcklicherweise kann dies leicht behoben werden, indem unn√∂tige Felder aus den vom Server angegebenen Daten entfernt werden. <br><br><h4>  Speicherlecks </h4><br>  Nach einiger Zeit, der Anwendung auf unserem Testserver, stellten wir einen unnat√ºrlichen Anstieg des Speicherverbrauchs fest.  pm2 belegte bis zu 90% des gesamten Serverspeichers und die Anwendung st√ºrzte regelm√§√üig ab.  Auf der Github-Seite hat nuxt bereits ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">paar</a> Probleme mit dem gleichen Problem aufgeh√§ngt. <br><br>  Das Problem trat auf, als wir mehrere Anfragen in der asyncData-Methode unserer Seiten stellten. <br><br><img src="https://habrastorage.org/webt/6c/1j/pr/6c1jprerb-bhjbaekqpft8xqmig.png"><br><br>  Gl√ºcklicherweise haben Nuxt-Entwickler dieses Problem schnell gel√∂st, und derzeit verbraucht der Prozess etwa 40 MB Speicher. <br><br><h4>  Interessante Probleme und ihre L√∂sungen </h4><br>  <b>Komponentenartikel</b> <br>  In der Site-Systemsteuerung k√∂nnen Sie Artikel hinzuf√ºgen und verschiedene Bl√∂cke in den Artikelinhalt einf√ºgen, z. B. einen Block mit Waren. <br><br><img src="https://habrastorage.org/webt/09/tj/vz/09tjvzsjrrxk5sux44dhsxrvxty.png"><br><br>  Der HTML-Code, der vom Server kommt, sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><img src="https://habrastorage.org/webt/q_/-r/kx/q_-rkxht2vmhwby6ckddpwn3pqk.png"><br><br>  $ product-4 gibt an, dass die Product.vue-Komponente mit dem Bezeichner 4 anstelle dieses Zeigers stehen soll. Vue bietet uns umfangreiche M√∂glichkeiten zum Rendern der Komponente mithilfe der Rendermethode.  Zuerst suchen wir nach allen Verweisen auf Zeiger auf Komponenten im HTML, die angekommen sind, und wir erhalten per API die Daten, die zum Anzeigen dieser Komponente erforderlich sind.  Als n√§chstes teilen wir das gesamte HTML in einen Baum auf.  Die Himalaya-Bibliothek hat uns dabei geholfen.  Und dann sammeln wir HTML zur√ºck, indem wir Zeiger durch vorgefertigte Komponenten ersetzen. <br><br>  ... und es gab nicht genug Kraft, um einen Artikel zu schreiben.) Sie haben im Sommer 2017 w√§hrend der Entwicklung des Projekts mit dem Schreiben des Artikels begonnen. Es ist bereits Sommer 2018 auf dem Hof, das Projekt wurde gestartet und der Artikel wurde nicht ver√∂ffentlicht. <br>  Deshalb ver√∂ffentlichen wir, was wir gesammelt haben, aber wir haben immer noch viele interessante Themen und Beobachtungen. <br>  Wenn es interessant sein wird - schreibe, mag es)) Nun, was w√§re es sonst noch interessant zu h√∂ren, das du verpasst hast. <br><br>  Ich m√∂chte sagen, dass das Projekt seit ungef√§hr 4 Monaten funktioniert.  Es gab keine besonderen Probleme damit, und die Geschwindigkeit der Website ist beeindruckend und unterscheidet sie von anderen Gesch√§ften. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414137/">https://habr.com/ru/post/de414137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414127/index.html">Installieren Sie 3CX auf einem Hosting f√ºr 2,99 Euro / Monat. in 10 Minuten</a></li>
<li><a href="../de414129/index.html">Master in Theoretischer Informatik an der St. Petersburg State University</a></li>
<li><a href="../de414131/index.html">Die Auswirkung der Signalfrequenz auf die Energie von Funkverbindungen im freien Raum</a></li>
<li><a href="../de414133/index.html">Puzzlespieldesign am Beispiel von In The Shadows</a></li>
<li><a href="../de414135/index.html">Durch die Portierung eines Spiels auf PSVita wurde die Gesamtleistung verbessert</a></li>
<li><a href="../de414139/index.html">Ver√∂ffentlichung eines inoffiziellen MTProto-Proxys in Python, Protokollfunktionen</a></li>
<li><a href="../de414141/index.html">7 Regeln f√ºr die Gestaltung von Leiterplatten</a></li>
<li><a href="../de414149/index.html">Die Gr√ºnde f√ºr den schlechten Klang der meisten Android-Smartphones</a></li>
<li><a href="../de414151/index.html">Fintech-Digest: Banken melden Sch√§den durch Hackerangriffe, Western Union weigert sich, mit Kryptow√§hrungen zu arbeiten</a></li>
<li><a href="../de414155/index.html">Ereignissysteme in Unity3D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>