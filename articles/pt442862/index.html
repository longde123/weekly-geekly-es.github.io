<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèúÔ∏è üîß üé≠ Prova de jogo: vis√£o interna üëßüèæ ü§¶üèø üôÖüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existem muitos artigos e discuss√µes filisteus na Internet, mas n√£o h√° informa√ß√µes suficientes sobre os m√©ritos. Em algum momento, o autor percebeu que...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prova de jogo: vis√£o interna</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442862/"><p><img src="https://habrastorage.org/webt/yj/8k/rq/yj8krqpp54tlsgp9p1vupdz-ofi.jpeg"></p><br><blockquote>  Existem muitos artigos e discuss√µes filisteus na Internet, mas n√£o h√° informa√ß√µes suficientes sobre os m√©ritos.  Em algum momento, o autor percebeu que a mec√¢nica e muitas nuances de seguran√ßa relacionadas n√£o s√£o totalmente compreendidas, mesmo por muitos desenvolvedores de criptomoedas.  Isso foi revelado em um caso real de portar a implementa√ß√£o de PoS para uma das criptomoedas e na publica√ß√£o adicional de informa√ß√µes sobre as vulnerabilidades encontradas por especialistas de terceiros. </blockquote><p>  Este artigo ser√° √∫til para todos os desenvolvedores que j√° encontraram vulnerabilidades PoS ou que ainda est√£o por vir. </p><br><p>  Horrorizado sob o corte. </p><a name="habracut"></a><br><h2 id="krupica-istorii">  Um gr√£o de hist√≥ria </h2><br><p> Na Internet, o surgimento da Prova de Participa√ß√£o (PoS) em Peercoin √© rastreado ap√≥s uma discuss√£o em um dos f√≥runs em 2011, seu uso subsequente em Novaoin e sua distribui√ß√£o posterior em PIVX e outros garfos de Bitcoin.  Uma l√≥gica <code>kernel.cpp</code> bastante primitiva foi levada ao <code>kernel.cpp</code> <code>kernel.h</code> / <code>kernel.cpp</code> , que vagueia pelos espa√ßos dos garfos na forma de v√°rios m√≥dulos Frankenstein. </p><br><p>  O algoritmo PoS passou por v√°rios est√°gios de desenvolvimento, algu√©m fornece vers√µes.  Agora as op√ß√µes de PoS est√£o divididas por raz√µes naturais, o DPoS apareceu.  Uma das solu√ß√µes mais avan√ßadas √© o protocolo Casper no Ethereum. </p><br><p>  Qualquer blockchain requer a gera√ß√£o de blocos e algu√©m deve ter o direito de construir um novo bloco.  Se o autor faz isso sem muita concorr√™ncia em um blockchain como o sistema de controle de vers√£o Git, ent√£o em criptomoedas h√° uma luta feroz pela recompensa do bloco no √¢mbito do Proof-of-Work (PoW) - encontrando essa combina√ß√£o de par√¢metros de entrada vari√°veis ‚Äã‚Äãselecionando um resultado correspondente a determinado por um determinado objetivo (minera√ß√£o, minera√ß√£o). </p><br><p>  O PoS substitui a Prova de Trabalho (PoW) para evitar o desperd√≠cio de recursos na minera√ß√£o.  Em vez disso, todos os par√¢metros de entrada s√£o estritamente definidos com uma caracter√≠stica constante, com base nas economias existentes dos porta-moedas.  Portanto, o PoW √© necess√°rio como ponto de partida para o PoS, se voc√™ n√£o recorrer a v√°rias op√ß√µes para o enriquecimento hipotec√°rio inicial dos criadores da moeda. </p><br><h2 id="zachem">  Porque </h2><br><p>  Economizar energia √© t√£o importante para desenvolvedores e detentores de moedas quanto limitar as emiss√µes de gases de efeito estufa para produtores e consumidores.  A verdade cruel √© diferente: </p><br><ol><li>  Os projetos baseados em PoW est√£o sujeitos aos chamados  "Ataques de 51%": os atacantes podem alavancar grandes pot√™ncias, criar uma cadeia paralela e, de repente, public√°-la com um movimento de moeda diferente (por exemplo, desperd√≠cio duplo) </li><li>  Os mineradores de PoW precisam cobrir seus custos e investir em capacita√ß√£o - essa √© uma sa√≠da direta de capital de projetos, </li><li>  os propriet√°rios de poupan√ßa querem manter seu poder de compra aumentando seu capital, em vez de olhar para a infla√ß√£o natural. </li></ol><br><p>  <em>Em um exemplo vivo: entre novembro e dezembro de 2018, houve tentativas de ataques;</em>  <em>ent√£o, em dezembro-fevereiro, houve uma agita√ß√£o como a moeda mais lucrativa para minera√ß√£o em placas de v√≠deo;</em>  <em>a taxa caiu de 2+ para 0,5 USD;</em>  <em>Depois de mudar para PoS, a taxa subiu para 1 USD em uma semana e o influxo de investimentos aumentou.</em> </p><br><hr><br><h2 id="tehnicheskie-momenty">  Pontos t√©cnicos </h2><br><p>  <strong>Aten√ß√£o: nesta se√ß√£o, estamos falando sobre o PoS "tradicional" na forma como est√° em Peercoin, PIVX e seus garfos.</strong> </p><br><p>  Voc√™ precisa entender que n√£o h√° centraliza√ß√£o e contabiliza√ß√£o de "pontos".  Nesta vers√£o, o mesmo princ√≠pio de sorte funciona como no PoW. </p><br><h3 id="1-terminologiya">  1. Terminologia </h3><br><p>  A terminologia √© relativamente geral, mas em diferentes implementa√ß√µes suas nuances s√£o: </p><br><ul><li>  <strong>Alvo PoW</strong> - alvo = alvo b√°sico, geralmente 2 ^ 240 (0x0000ffff ...) dividido pela complexidade do bloco (aumenta o n√∫mero de zeros na frente). </li><li>  <strong>Dificuldade do bloco</strong> - a complexidade do bloco em rela√ß√£o √† meta base, determinada de forma determin√°vel com base na taxa de crescimento atual da cadeia. </li><li>  <strong>UTXO</strong> - Sa√≠da de transa√ß√£o n√£o <strong>gasta</strong> , um par de um hash de transa√ß√£o e um n√∫mero de sa√≠da. </li><li>  <strong>CoinBase</strong> √© uma transa√ß√£o especial com √≠ndice 0 no bloco que cont√©m a recompensa. </li><li>  <strong>Aposta</strong> ou <strong>CoinStake</strong> √© uma transa√ß√£o especial com o √≠ndice 1 em um bloco. </li><li>  <strong>Entrada de Aposta</strong> - UTXO que atende aos requisitos de uma aposta por tamanho e idade. </li><li>  <strong>Modificador de estaca</strong> - um par√¢metro especial calculado deterministicamente para cada <strong>entrada de estaca</strong> . </li><li>  <strong>O Hash da estaca</strong> √© um resultado de hash que deve ser aritmeticamente menor que o <strong>Alvo da estaca</strong> . </li><li>  <strong>Alvo de Aposta</strong> - o mesmo que o objetivo de PoW, mas aumentado proporcionalmente pela quantidade de <strong>Entrada</strong> de <strong>Aposta em</strong> rela√ß√£o ao lance m√≠nimo. </li><li>  <strong>Bloquear assinatura</strong> - <strong>Bloquear assinatura</strong> . </li><li>  <strong>Garfo</strong> - uma cadeia de ramifica√ß√£o. </li><li>  <strong>Split</strong> - compartilhamento de rede. </li><li>  Blocos <strong>√≥rf√£os</strong> - descartados devido √† escolha de outra alternativa. </li></ul><br><h3 id="2-anatomiya">  2. Anatomia </h3><br><p>  Processo de gera√ß√£o: </p><br><ol><li>  Encontramos todos os UTXO que atendem aos requisitos do Stake Input </li><li>  Encontre o modificador de estaca. </li><li>  Multiplique o alvo de PoW pela entrada da estaca <br><ul><li>  <em>em milion√©simos de fato - √© por isso que 1 MH PoW hashrate sai experimentalmente igual a uma moeda.</em> </li></ul></li><li>  <code>Stake Hash = H(Stake Modifier, Stake Block Time, UTXO output index, UTXO txid, Current Block Time)</code> . <br><ul><li>  <em>Somente par√¢metro vari√°vel</em> </li></ul></li><li>  Se <code>Stake Hash &gt;= Stake Target</code> , tente encontrar o <code>Current Block Time</code> no intervalo aceit√°vel. <br><ul><li>  <em>voc√™ precisa considerar a possibilidade de estouros de meta de estaca quando multiplicados pela quantidade de entrada de estaca, dependendo da implementa√ß√£o.</em> </li></ul></li><li>  Colocamos Coinbase em tx [0] e CoinStake em tx [1]. <br><ul><li>  <em>o benefici√°rio do Coinbase √© o mesmo script (endere√ßo) que o Stake Input.</em> </li></ul></li><li>  N√≥s assinamos o bloco. </li></ol><br><h4 id="21-vremya-bloka">  2.1  Tempo de bloqueio: </h4><br><p>  √â f√°cil ver que uma fraude pode trazer algum benef√≠cio ao longo do tempo.  O consenso padr√£o limita os limites inferior e superior. </p><br><p>  Os inferiores sempre definem o tempo m√©dio dos blocos nos √∫ltimos N blocos, geralmente acima de 11. Essa √© a toler√¢ncia √† imprecis√£o do tempo na gera√ß√£o de n√≥s. </p><br><p>  O limite superior hist√≥rico foi definido para PoW com um dedo para o c√©u √†s 2 horas.  Aumentar os intervalos reduz a complexidade e torna o ramo menos atraente - portanto, n√£o faz sentido.  Mas para PoS, isso faz sentido. </p><br><p>  O PIVX e outros limitam o tempo futuro a no m√°ximo 3 minutos.  Alguns colocam uma restri√ß√£o mais severa, mas isso cria problemas para os usu√°rios.  Algumas implementa√ß√µes de PoS decidiram alterar os intervalos m√≠nimos de tempo atual do bloco de um segundo para 15-16 segundos. </p><br><h4 id="22-stake-modifier">  2.2  Modificador de estaca: </h4><br><p>  O Modificador de Estaca foi concebido como um meio de dificultar a previs√£o e construir a cadeia adiante, mas algo deu errado ... </p><br><p>  Existem v√°rias op√ß√µes para o c√°lculo: os √∫ltimos bits de hashes de bloco no final de intervalos de tempo especificados progressivamente, valores [n√£o muito] mal previstos de blocos anteriores, etc.  Em alguns lugares, parece mais um c√≥digo ofuscante do que algo sensato. </p><br><p>  O original ocupa um intervalo de 64 intervalos.  Essa lacuna √© progressivamente dividida em 64 partes desiguais.  As bordas s√£o arredondadas para minutos.  Nas bordas, os blocos existentes s√£o selecionados e um √∫ltimo bit √© retirado deles.  Portanto, verifica-se um n√∫mero de 64 bits, algo semelhante ao Nonce. </p><br><p>  O intervalo em Peercon √© de 20 minutos, mas o pessoal da PIVX decidiu que o intervalo de 1 minuto, arredondado para o minuto, √© o que o m√©dico ordenou. </p><br><p>  Em geral, em algumas implementa√ß√µes como o Blackcoin V2 +, tudo √© corrigido e o Stake Modifier √© contado a partir da cabe√ßa, enquanto no Peercoin V03, PIVX, Blackcoin V1 e outros do bloco Stake Input.  Este √∫ltimo destr√≥i quase completamente o significado.  Sup√µe-se que a confus√£o ocorreu por causa do problema banal de nomear vari√°veis, outras metamorfoses e copiar-colar impensado.  E o pr√≥prio autor descobriu o problema bastante tarde, enquanto toda a sua aten√ß√£o estava focada na prote√ß√£o contra DoS.  N√£o seja pego! </p><br><h4 id="23-podpis-bloka">  2.3  Bloquear assinatura </h4><br><p>  Como o hash do bloco n√£o serve mais como prova de trabalho e qualquer pessoa pode receber a transa√ß√£o CoinStake assinada do bloco de outra pessoa, √© necess√°rio verificar se o bloco foi criado pelo propriet√°rio da Stake.  Portanto, o cabe√ßalho √© assinado com a mesma chave privada que o CoinStake. </p><br><h4 id="24-skript-vyhoda-coinbase-i-coinstake">  2.4  Script de sa√≠da CoinBase e CoinStake </h4><br><p>  Os mesmos scripts de sa√≠da, ou como as pessoas chamam endere√ßos de carteira, s√£o necess√°rios para preservar a privacidade e evitar vincular endere√ßos individuais em uma carteira. </p><br><h4 id="25-chto-i-kuda">  2.5 O que e onde? </h4><br><p>  Existem diferentes varia√ß√µes de como eles lidam com quantidades no CoinBase e CoinStake.  L√≥gica e motiva√ß√£o em um caso particular: </p><br><ol><li>  Os valores devem ser mantidos separados para evitar at√© a menor perda poss√≠vel de fundos do usu√°rio devido a erros de processamento. </li><li>  O CoinBase mant√©m suas 100 confirma√ß√µes, mas o CoinStake pode ser gasto imediatamente, o que naturalmente deixa o risco de gastos duplos. <br><ul><li>  o encaixe na profundidade dos blocos tamb√©m contradiz a qualifica√ß√£o de idade para uso como entrada da estaca. </li></ul></li><li>  O CoinBase e o CoinStake nunca devem entrar no mempool e todas as transa√ß√µes baseadas neles devem ser exclu√≠das durante a reconstru√ß√£o da cadeia. </li></ol><br><h3 id="3-polnye-bloki-protiv-zagolovkov">  3. Blocos completos contra cabe√ßalhos </h3><br><p>  A entrada de um n√≥ completo na rede come√ßa com a sincroniza√ß√£o.  No Bitcoin, a sincroniza√ß√£o √© baseada principalmente em cabe√ßalhos de bloco, como  eles cont√™m informa√ß√µes suficientes para verifica√ß√£o preliminar de consenso.  Primeiro, cabe√ßalhos relativamente pequenos s√£o retirados e verificados em lotes de at√© 2000 pe√ßas de um n√≥ lateral.  Se a verifica√ß√£o inicial foi bem-sucedida, todos os blocos s√£o puxados em paralelo de todos os n√≥s conectados. </p><br><p>  A prote√ß√£o contra inunda√ß√µes √© baseada no fato de que o n√≥ local compara o cabe√ßalho mais conhecido com o que possui e solicita toda a cadeia de cabe√ßalhos.  Durante o download, tudo √© verificado pelo baixo custo de espa√ßo em disco e computa√ß√£o.  As correntes s√£o comparadas em peso com base em uma caracter√≠stica, como o trabalho em <strong>cadeia</strong> , que √© a soma da complexidade de cada bloco individual.  Construir uma cadeia alternativa t√£o forte exigir√° investimentos extremamente grandes de recursos, o que torna os ataques pouco promissores. </p><br><p>  Com o PoS, essa abordagem n√£o funciona, porque  Para verificar os blocos, voc√™ precisa processar os blocos anteriores completos pelo menos at√© a idade m√≠nima da Estaca.  As implementa√ß√µes visualizadas pelo autor n√£o come√ßaram a ser pervertidas, mas simplesmente se recusaram a trabalhar com cabe√ßalhos. </p><br><p>  <strong>Portanto, o</strong> autor implementou um download paralelo oportunista de blocos seguindo os cabe√ßalhos, o que aumenta significativamente a velocidade de sincroniza√ß√£o devido ao uso de todas as conex√µes.  Atrasos menores ocorrem apenas se os pares estiverem em cadeias diferentes - a conex√£o ser√° interrompida ap√≥s um pequeno tempo limite, como no esquema padr√£o.  Como sinal de menos, a tend√™ncia de escolher uma cadeia falsa no momento da sincroniza√ß√£o. </p><br><p>  <em>A prop√≥sito, o cliente Bitcoin padr√£o e seus garfos t√™m captado o n√∫mero m√≠nimo padr√£o de conex√µes de sa√≠da por 8 por tempo suficiente, se alguns deles falharem por v√°rios motivos.</em>  <em>Isso foi resolvido por conex√µes de sa√≠da ass√≠ncronas.</em> </p><br><h3 id="4-forki-splity-i-orfany">  4. Garfos, fendas e √≥rf√£os </h3><br><p>  Com a concorr√™ncia na constru√ß√£o de blocos, cadeias alternativas de 1-2 links s√£o relativamente comuns.  Os garfos mais longos nas redes desenvolvidas ocorrem naturalmente apenas com falhas √©picas no consenso devido a um erro de programa√ß√£o ou uma interrup√ß√£o global da Internet. </p><br><p>  Mesmo com a separa√ß√£o, geralmente n√£o h√° amea√ßa √† integridade do processamento de transa√ß√µes, pois  ao desanexar blocos, todas as transa√ß√µes voltam ao mempool e j√° est√£o inclu√≠das em outros blocos.  Mempool √© um reposit√≥rio tempor√°rio de transa√ß√µes depois que elas s√£o criadas.  O pr√≥prio Mempool √© salvo em disco nas vers√µes recentes.  A recompensa pelo bloco √© destru√≠da.  √â por isso que o n√∫mero m√≠nimo de confirma√ß√µes (profundidade) √© definido para pr√™mios. </p><br><p>  Acontece que os segmentos de rede local perdem a conex√£o com o mundo externo e continuam a minerar, assumindo que h√° uma conex√£o com a rede principal.  Esses ramos geralmente n√£o representam uma amea√ßa devido √† sua fraqueza natural. </p><br><p>  O principal ataque de 51% para PoW j√° foi descrito acima - √© extremamente intensivo em recursos, mas para PoS est√° se tornando relativamente acess√≠vel.  Por esse motivo, torna-se tecnicamente poss√≠vel produzir muitos ramos a partir de v√°rios elos da cadeia.  Uma das solu√ß√µes cl√°ssicas √© proibir os garfos abaixo de uma certa profundidade. </p><br><p>  O principal problema dessa prote√ß√£o √© a incapacidade de os n√≥s dos segmentos eremitas retornarem independentemente ao circuito principal ap√≥s uma reinicializa√ß√£o. </p><br><p>  <strong>Portanto</strong> , uma abordagem foi implementada na proibi√ß√£o de garfos com mais de um certo per√≠odo de tempo somente se o topo da cadeia for bastante jovem. </p><br><p>  <em>Com um intervalo alvo de blocos de 1 minuto, o crit√©rio do garfo antigo foi escolhido em 1 hora, o que corresponde aproximadamente a 60% das confirma√ß√µes do CoinBase, e o crit√©rio de juventude da coroa aos 15 minutos √© 3 vezes maior que o atraso estat√≠stico m√°ximo do bloco.</em> </p><br><h3 id="5-hesh-bloka-i-splity">  5. Bloquear e dividir hash </h3><br><p>  No PoW, um hash de bloco cobre completamente todos os dados.  Tamb√©m √© usado para verificar o alvo.  No PoS, o Stake Hash √© um valor separado porque  √© necess√°rio excluir a possibilidade de sua sele√ß√£o.  Isso abre a principal amea√ßa - a capacidade de produzir um n√∫mero ilimitado de vers√µes diferentes do bloco com base na mesma estaca coincidente, que √© f√°cil de inundar e colocar a rede ou seus n√≥s individuais. </p><br><p>  As abordagens de defesa ing√™nua d√£o origem a vulnerabilidades divididas ainda mais graves.  Uma dessas abordagens em diferentes varia√ß√µes √© permitir o uso da entrada da estaca apenas uma vez.  Um ataque simples √© enviar blocos diferentes para n√≥s diferentes, o que cria imediatamente uma divis√£o suave. </p><br><p>  √â ainda mais fatal exacerbar isso com uma proibi√ß√£o de DoS, que dividir√° n√£o apenas as cadeias, mas a pr√≥pria rede em diferentes segmentos. </p><br><p>  Outros problemas surgem - a incapacidade de usar a estaca de um bloco derrubado. </p><br><p>  <strong>Portanto</strong> , o m√©todo do acelerador foi escolhido como a solu√ß√£o mais segura - a mesma estaca n√£o pode ser usada mais de uma vez por minuto.  A l√≥gica √© simples: um ataque pode durar apenas no intervalo de 1 hora (veja a bifurca√ß√£o antiga acima), para a qual √© poss√≠vel inundar n√£o mais do que 60 blocos.  Na melhor das hip√≥teses, no pr√≥ximo bloco, a rede j√° passar√° para um √∫nico circuito.  Na pior das hip√≥teses, com um ataque cont√≠nuo, isso acontecer√° em uma hora.  A probabilidade do pior caso - encontrar v√°rios blocos seguidos, est√° derretendo exponencialmente. </p><br><p>  <em>Mesmo assim, permanecem alguns pontos nos quais os n√≥s s√£o vulner√°veis ‚Äã‚Äãa inunda√ß√µes moderadas at√© o momento da sincroniza√ß√£o completa</em> . </p><br><h3 id="6-minimalnyy-vozrast">  6. idade m√≠nima </h3><br><p>  Para alguns, essa limita√ß√£o √© desconcertante, mas √© extremamente importante para a estabilidade da rede, pois  esse par√¢metro est√° diretamente relacionado ao comprimento m√°ximo da rede alternativa, que o n√≥ local poder√° verificar sem distor√ß√µes t√©cnicas graves. </p><br><p>  Como mencionado anteriormente, o n√≥ local deve processar todos os blocos at√© o limite de idade para poder verificar se a Entrada da Estaca a) tem um lugar para ser b) √© realmente UTXO e n√£o foi gasta. </p><br><p>  Verifique se isso √© poss√≠vel apenas atrav√©s da funcionalidade do chamado.  CoinView, que √© o estado do movimento de moedas no momento de um bloco espec√≠fico - o topo da cadeia principal no entendimento do n√≥ local. </p><br><p>  A implementa√ß√£o de um teste completo de circuitos alternativos em intervalos de tempo ou mesmo de uma maneira especial salva pelo CoinView parece pouco promissora, porque  o n√∫mero dessas cadeias alternativas √© infinitamente grande. </p><br><p>  Uma barra muito grande para o limite de idade do UTXO afeta negativamente os usu√°rios que desejam gastar ou combinar parte de suas moedas. </p><br><p>  Se voc√™ especificar essa borda na profundidade dos blocos, uma situa√ß√£o hipot√©tica de uma cadeia completa ser√° interrompida devido ao fato de n√£o haver UTXO adequado.  No caso de unidades de tempo, pelo menos algum movimento ocorre. </p><br><p>  <strong>Portanto</strong> , uma escolha equilibrada de 1 hora √© usada em outras redes em unidades de tempo absolutas, em vez da profundidade dos blocos. </p><br><h3 id="7-chto-luchshe-n-utxo-po-minimalnoy-summe-ili-odin-utxo-s-n-summoy">  7. O que √© melhor que N UTXO para a quantidade m√≠nima ou um UTXO com N total? </h3><br><p>  Aqui a analogia sugere: que √© melhor ter uma arma com precis√£o de 0,9 ou tr√™s armas com precis√£o de 0,3, mas com probabilidades da ordem de 1/2 ^ 20, os resultados de tais c√°lculos parecem estar nivelados.  Um pequeno mapa confunde a maturidade da qualifica√ß√£o. </p><br><p>  A cren√ßa atual de que muitas transa√ß√µes pequenas encontram mais blocos provavelmente data de quando a idade da entrada da estaca tamb√©m foi levada em considera√ß√£o na determina√ß√£o do peso.  Naquela √©poca, pequenas transa√ß√µes antigas realmente faziam muito sentido. </p><br><p>  No momento, com base em experimentos pr√°ticos e c√°lculos te√≥ricos, os grupos agrupados em UTXO grandes trazem mais blocos.  Al√©m disso, menos UTXO requer menos trabalho da CPU.  Algu√©m afirma o contr√°rio. </p><br><p>  <strong>Ent√£o</strong> pense por si mesmo. </p><br><h3 id="8-zabeganie-blokov-vperyod">  8. Executando blocos para a frente </h3><br><p>  Os mineradores PoS naturalmente superam um pouco os tempos de bloco.  Isso afeta a complexidade da rede para pior.  O c√≥digo Bitcoin padr√£o seleciona o primeiro bloco recebido, independentemente do tempo indicado nele.  A maioria das implementa√ß√µes de PoS faz o mesmo. </p><br><p>  <strong>Portanto, a</strong> l√≥gica do minerador PoS foi alterada para iniciar a sele√ß√£o a partir do tempo m√©dio dos blocos, se o tempo do bloco atual fosse adiante.  Ao mesmo tempo, antes de comparar a ordem, os n√≥s comparam o tempo indicado dos blocos.  O minerador PoS envia o bloco encontrado para a rede, mesmo que veja que est√° gerando um fork. </p><br><p>  Dessa forma, a rede tamb√©m √© protegida contra blocos hipot√©ticos enviados prematuramente, cuja entrada de estaca n√£o pode ser usada nos pr√≥ximos 60 segundos com o mesmo modificador de estaca devido √† prote√ß√£o contra DoS.  Como uma puni√ß√£o dupla por trapacear com o tempo. </p><br><h3 id="9-nebolshoy-cheklist">  9. Uma pequena lista de verifica√ß√£o </h3><br><ol><li>  A entrada da estaca deve ser UTXO v√°lida antes do ponto da bifurca√ß√£o: <br><ul><li>  no caso da corrente principal, o ponto da forquilha √© a ponta, </li><li>  no caso de um circuito alternativo - o UTXO ap√≥s o ponto de forquilha pode levar a auto-DoS ao alternar, </li><li>  O UTXO n√£o deve estar no mempool por si s√≥. </li></ul></li><li>  N√£o aceite o CoinStake no mempool ao reconstruir o circuito principal: <br><ul><li>  o mesmo acontece com o CoinBase, </li><li>  isso pode destruir a cadeia de transa√ß√µes (improv√°vel). </li></ul></li><li>  N√£o aceite garfos de blocos antigos se a parte superior estiver bem viva. </li><li>  O limite de idade em unidades de tempo absoluto para entrada de estaca √© necess√°rio para estabilidade e seguran√ßa. </li><li>  O Hash da estaca s√≥ deve mudar a partir do hor√°rio do bloco. </li><li>  O modificador de estaca n√£o deve ser vinculado ao bloco de entrada de estaca. </li><li>  Trabalhar com cabe√ßalhos de bloco requer processamento especial na rede e durante a reindexa√ß√£o. </li><li>  O CoinStake √© gravado na carteira local e requer algumas altera√ß√µes para a exibi√ß√£o correta dos ventiladores. </li><li>  Os mineradores PoS provavelmente t√™m batentes suficientes e precisam ser finalizados com um arquivo. </li><li>  O re-√≠ndice precisa ser aprimorado, porque  Ele funciona por analogia com os cabe√ßalhos - primeiro ele carrega e verifica apenas o √≠ndice de blocos e, em seguida, apenas tenta processar os blocos. </li><li>  Se a transi√ß√£o para o PoS n√£o for codificada, mas atrav√©s do spork, ser√° necess√°rio captur√°-la na inicializa√ß√£o, porque  sporks n√£o s√£o salvos. </li><li>  Os pontos de verifica√ß√£o no Dash e no Bitcoin s√£o quase uma farsa e exigem uma revis√£o muito s√©ria. </li><li>  Se a bifurca√ß√£o do Dash for da vers√£o 0.13, haver√° problemas com o processamento de dados de masternode no modo de usu√°rio simples. <br><ul><li>  Com o rein√≠cio frequente do cliente, a exibi√ß√£o da rede fica distorcida. </li><li>  √â melhor ignorar o cache se estiver executando no modo gr√°fico. </li></ul></li><li>  Altere a sele√ß√£o do melhor bloco, levando em considera√ß√£o o hor√°rio do bloco. </li><li>    Bitcoin          . </li><li>         mempool CoinStake  . </li></ol><br><hr><br><p><img src="https://habrastorage.org/webt/gw/fh/up/gwfhupvzahev6mwinu2-idrfpp8.png"></p><br><h2 id="vnedrenie-v-zhizn">    </h2><br><p>     .   mainnet    PoW       ,    ,      PoS,      . PoS       Ethereum   Casper'. </p><br><p>  GPU        -    ‚Äî ethminer'.           150-200 GH (ethash).  -                PoS  . </p><br><p>       PoS   PIVX 2.x  "   ".  -    PIVX     ,             ,  .         ,     PIVX 2.x    .      Dash         0.12      Bitcoin'. </p><br><p>          ,     PoS      .       ,         ,     . </p><br><h3 id="podgotovitelnye-raboty">   </h3><br><h4 id="dokumentaciya">  </h4><br><p>      .           .   whitepaper    -. </p><br><h4 id="pervoe-priblizhenie">   </h4><br><p>        PoS  PIVX       Bitcoin/Dash.     CoinStake          .      PoS    . </p><br><p>      ,      Stake Modifier   Stake Hash  ,       Stake Input   . -      ,  -    PIVX    . </p><br><h4 id="dinamichnye-chekpoynty">   </h4><br><p>          ‚Äî      .    : </p><br><ol><li>            . </li><li>         . </li><li>       ‚Äî ..    ,       . </li><li>      ,  -      ,         . </li></ol><br><p>            .    spork'    ,       . </p><br><p> <em>,        .    spork'     .</em> </p><br><h4 id="perehod-na-pos-ne-dolzhen-byt-zhyostko-zashit">   PoS      </h4><br><p>              ,   -    .        spork,   ,     . </p><br><h4 id="novaya-versiya-protokola">    </h4><br><p>  , ..              .  ,         . </p><br><h4 id="publichnoe-testirovanie">   </h4><br><p>      testnet,       . </p><br><p>  testnet      3   1   mainnet,        . </p><br><h4 id="kalkulyator-dohodnosti">   </h4><br><p>    PoW ,  PoS     - ,            1e6       PoW. </p><br><p>           .   mainnet          Stake Input. </p><br><p>           . </p><br><h3 id="perehod-na-pos-v-zhizni">   PoS   </h3><br><p>     X   spork    PoS . -       ,      . </p><br><p>             .  ,   .        . </p><br><p>     ,      ,     . </p><br><h3 id="lozhka-dyogtya">   </h3><br><p>      Stake Modifier  .        .    PIVX  - ‚Ä¶ ,     ,        Ethereum,    . </p><br><hr><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>    -      ,          .   ,          PoS   ,        .        . </p><br><p> <em>:       -           .</em> </p><br><p> <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  GitHub       </a></em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt442862/">https://habr.com/ru/post/pt442862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt442846/index.html">Nossa ind√∫stria espacial. Uma an√°lise dos problemas do setor da perspectiva de um desenvolvedor comum</a></li>
<li><a href="../pt442852/index.html">Dell 6000 ou ol√° de 2005</a></li>
<li><a href="../pt442854/index.html">Como fizemos o esquema de metr√¥ de Minsk</a></li>
<li><a href="../pt442856/index.html">Dois em um: rel√≥gio e monitor de qualidade do ar program√°vel Wi-Fi</a></li>
<li><a href="../pt442858/index.html">Existem muitos elefantes na √Åfrica? Como a coexist√™ncia pac√≠fica com as comunidades humanas pode ajudar nesse</a></li>
<li><a href="../pt442864/index.html">Quantos anos tem seu senhor?</a></li>
<li><a href="../pt442866/index.html">IA treinada a partir de d√©cadas de experimenta√ß√£o culin√°ria cria novos pratos</a></li>
<li><a href="../pt442868/index.html">Uma breve excurs√£o aos sistemas de refrigera√ß√£o do data center. Pr√≥s e contras</a></li>
<li><a href="../pt442870/index.html">O melhor do mundo da Angular da semana - Digest No. 2 (26 de janeiro a 7 de mar√ßo)</a></li>
<li><a href="../pt442872/index.html">Como encontrei o ovo da p√°scoa na prote√ß√£o do Android e n√£o consegui um emprego no Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>