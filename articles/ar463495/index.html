<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ณ ๐คฐ๐พ ๐จ๐ฟโ๐ซ ุงูุชุฎุฒูู ุงููุคูุช ูุงุฑุงููู: ุฃุณุงุณูุงุช ุจุงูุฅุถุงูุฉ ุฅูู ูุตุงุฆุญ ูุญูู ๐ง๏ธ ๐๐ป ๐จ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุชูุญ ูู ุชูููุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฅูุดุงุก ุชุทุจููุงุช ุฃูุซุฑ ูุงุจููุฉ ููุชุทููุฑ ุ ูุชุฎุฒูู ูุชุงุฆุฌ ุจุนุถ ุงูุงุณุชุนูุงูุงุช ูู ูุญุฏุฉ ุชุฎุฒูู ุณุฑูุนุฉ ูู ุงูุฐุงูุฑุฉ. ููุน ุฐูู ุ ูููู ุฃู ูุคุฏู ุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชุฎุฒูู ุงููุคูุช ูุงุฑุงููู: ุฃุณุงุณูุงุช ุจุงูุฅุถุงูุฉ ุฅูู ูุตุงุฆุญ ูุญูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463495/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชุชูุญ ูู ุชูููุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฅูุดุงุก ุชุทุจููุงุช ุฃูุซุฑ ูุงุจููุฉ ููุชุทููุฑ ุ ูุชุฎุฒูู ูุชุงุฆุฌ ุจุนุถ ุงูุงุณุชุนูุงูุงุช ูู ูุญุฏุฉ ุชุฎุฒูู ุณุฑูุนุฉ ูู ุงูุฐุงูุฑุฉ.  ููุน ุฐูู ุ ูููู ุฃู ูุคุฏู ุงูุชุฎุฒูู ุงููุคูุช ุงูุฐู ุชู ุชูููุฐู ุจุดูู ุบูุฑ ุตุญูุญ ุฅูู ุชูููู ุงูุทุจุงุน ุงููุณุชุฎุฏู ุนู ุงูุชุทุจูู ุฅูู ุญุฏ ูุจูุฑ.  ุชุญุชูู ูุฐู ุงูููุงูุฉ ุนูู ุจุนุถ ุงูููุงููู ุงูุฃุณุงุณูุฉ ุญูู ุงูุชุฎุฒูู ุงููุคูุช ูุงูููุงุนุฏ ุงููุฎุชููุฉ ูุงููุญุฑูุงุช ุงูุชู ุชุนููุชูุง ูู ุนุฏุฉ ูุดุงุฑูุน ุณุงุจูุฉ. </p><br><h2 id="ne-ispolzuyte-keshirovanie" style=";text-align:right;direction:rtl">  ูุง ุชุณุชุฎุฏู ุงูุชุฎุฒูู ุงููุคูุช. </h2><br><p style=";text-align:right;direction:rtl">  ูู ูุดุฑูุนู ุณุฑูุน ูููุณ ูุฏูู ูุดุงูู ูู ุงูุฃุฏุงุกุ <br>  ูุณูุงู ุงูุชุฎุฒูู ุงููุคูุช.  ุจุฌุฏูุฉ :) </p><br><p style=";text-align:right;direction:rtl">  ุณูู ูุนูุฏ ุฅูู ุญุฏ ูุจูุฑ ุนูููุงุช ุงููุฑุงุกุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏูู ุฃู ููุงุฆุฏ. </p><br><p style=";text-align:right;direction:rtl"> ุตุญูุญ ุฃู ูุญูุฏ ุณุนูุฏ ูู ุจุฏุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ูุฐู ุงูููุงูุฉ</a> ูููู ุจุจุนุถ ุงูุญุณุงุจุงุช ููุซุจุช ุฃูู ูู ุจุนุถ ุงูุญุงูุงุช ุ ูููู ุฃู ูุคุฏู ุชุญุณูู ุชุทุจูู ูููู ุซุงููุฉ ุฅูู ุชูููุฑ ุงููุซูุฑ ูู ุงููุงู ูู ุญุณุงุจ AWS ุงูุฎุงุต ุจู.  ูุฐูู ุฅุฐุง ูุงูุช ุงููุฏุฎุฑุงุช ุงููุชููุนุฉ ูู ูุดุฑูุนู ุชุฒูุฏ ุนู 1.86 ุฏููุงุฑ ุ ูุฑุจูุง ูููู ุงูุชุฎุฒูู ุงููุคูุช ููุฑุฉ ุฌูุฏุฉ. </p><a name="habracut"></a><br><h2 id="kak-eto-rabotaet" style=";text-align:right;direction:rtl">  ููู ูุนููุ </h2><br><p style=";text-align:right;direction:rtl"> ุนูุฏูุง ูุฑูุฏ ุฃุญุฏ ุงูุชุทุจููุงุช ุงูุญุตูู ุนูู ุจุนุถ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุงู <code>'post_' . $id</code> ุ ูุฅูู ููุดุฆ ููุชุงุญ ุชุฎุฒูู <code>'post_' . $id</code> ูุฑูุฏูุง ููุฐู ุงูุญุงูุฉ ( <code>'post_' . $id</code> ููุงุณุจ ุชูุงููุง) ููุญุงูู ุงูุนุซูุฑ ุนูู ุงููููุฉ ุจูุงุณุทุฉ ูุฐุง ุงูููุชุงุญ ูู ุงูุชุฎุฒูู ุงูุณุฑูุน ุฐู ุงููููุฉ ุงูุฑุฆูุณูุฉ (memcache ุ redis ุ ุฃู ุขุฎุฑ).  ุฅุฐุง ูุงูุช ุงููููุฉ ููุฌูุฏุฉ ุ ูุณูุณุชุฎุฏููุง ุงูุชุทุจูู.  ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅูู ูุฃุฎุฐ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุฎุงุฒู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุจูุงุณุทุฉ ูุฐุง ุงูููุชุงุญ ููุงุณุชุฎุฏุงู ูู ุงููุณุชูุจู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vd/9i/kj/vd9ikjg-gji5lauz1atmq9bkdpq.png"></p><br><p style=";text-align:right;direction:rtl">  ูุง ูุนุฏ ุงูุงุญุชูุงุธ ุจูุฐู ุงููููุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุฑุฉ ุฌูุฏุฉ ุฅูู ุงูุฃุจุฏ ุ ุญูุซ ูููู ุชุญุฏูุซ ููุงู ุงููุดุฑ ูุฐุง ุ ููู ุณูุชููู ุงูุชุทุจูู ุฏุงุฆููุง ุงููููุฉ ุงููุฏููุฉ ุงููุฎุฒูุฉ ูุคูุชูุง. <br>  ูุฐูู ุ ุนุงุฏุฉู ูุง ุชุทูุจ ูุธุงุฆู ุงูุชุฎุฒูู ุงููุคูุช ููุช ุชุฎุฒูู ูุฐู ุงููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุชูุงุก ูุฐุง ุงูููุช ุ "memcache ุฃู redis" ุณูู "ููุณุงู" ูุณูู ูุฃุฎุฐ ุงูุชุทุจูู ูููุฉ ุฌุฏูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Post</span></span></span><span class="hljs-function"> </span></span>{ $key = <span class="hljs-string"><span class="hljs-string">'post_'</span></span> . $id; $post = \Cache::get($key); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($post === <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { $post = Post::findOrFail($id); \Cache::put($key, $post, <span class="hljs-number"><span class="hljs-number">900</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $post; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃูุง ููุง ุฃุถุน ููุงู ุงูุจุฑูุฏ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุฏุฉ 15 ุฏูููุฉ (ููุฐ ุงูุฅุตุฏุงุฑ 5.8 ุ ูุณุชุฎุฏู laravel ุซูุงูู ูู ูุฐู ุงููุนููุฉ ุ ูุจู ุฏูุงุฆู).  ุชุญุชูู ูุงุฌูุฉ <code>Cache</code> ุฃูุถูุง ุนูู ุทุฑููุฉ <code>remember</code> ููุงุฆูุฉ ููุฐู ุงูุญุงูุฉ.  ูุนูู ูุฐุง ุงูููุฏ ุชูุงููุง ูุซู ุงูููุฏ ุงูุณุงุจู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Post</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> \Cache::remember(<span class="hljs-string"><span class="hljs-string">'post_'</span></span> . $id, <span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Post::findOrFail($id); }); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฌุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ูุตู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู</a> ูุซุงุฆู Laravel ุงูุชู ุชูุถุญ ููููุฉ ุชุซุจูุช ุจุฑุงูุฌ ุงูุชุดุบูู ุงูุถุฑูุฑูุฉ ููุชุทุจูู ูุงููุธุงุฆู ุงูุฑุฆูุณูุฉ. </p><br><h2 id="dannye-v-keshe" style=";text-align:right;direction:rtl">  ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุคูุชุง </h2><br><p style=";text-align:right;direction:rtl">  ุฌููุน ุงูุณุงุฆููู Laravel ุงูููุงุณูุฉ ุชุฎุฒูู ุงูุจูุงูุงุช ุนูู ุดูู ุณูุงุณู.  ุนูุฏูุง ูุทูุจ ููู ุงูุชุฎุฒูู ุงููุคูุช ููุซูู ุทุฑุงุฒ Eloquent ุ ูุฅูู ูุณุชุฎุฏู ุงูุฏุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงูุชุณูุณููุฉ</a> ููุญุตูู ุนูู ุงูุณูุณูุฉ ูู ุงููุงุฆู.  ุชููู ุงูุฏุงูุฉ ุบูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงูููุณูุณูุฉ</a> ุจุงุณุชุนุงุฏุฉ ุญุงูุฉ ุงููุงุฆู ุนูุฏูุง ูุญุตู ุนููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุชูุฑูุจูุง ุชุฎุฒูู ุฃู ุจูุงูุงุช ุชูุฑูุจูุง.  ุงูุฃุฑูุงู ูุงูุณูุงุณู ูุงููุตูููุงุช ูุงููุงุฆูุงุช (ุฅุฐุง ูุงู ูู ุงููููู ุฅุฌุฑุงุก ุชุณูุณู ุตุญูุญ ููุง ุ ูุฑุงุฌุน ุฃูุตุงู ุงููุธุงุฆู ูู ุงูุฑูุงุจุท ุงูุณุงุจูุฉ). </p><br><p style=";text-align:right;direction:rtl">  ูููู ุชุฎุฒูู ุงูููุงูุงุช ูุงููุฌููุนุงุช ุงูุจููุบุฉ ุจุณูููุฉ ูุชูุนุฏ ุฃูุซุฑ ุงูููู ุดููุนูุง ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุชุทุจูู Laravel.  ููุน ุฐูู ุ ูุฅู ููุงุฑุณุฉ ุงูุฃููุงุน ุงูุฃุฎุฑู ุชูุงุฑุณ ุนูู ูุทุงู ูุงุณุน.  ุฃุณููุจ <code>Cache::increment</code> ุดุงุฆุน ูุชุทุจูู ุนุฏุงุฏุงุช ูุชุนุฏุฏุฉ.  ุฃูุถุง ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงูุฃููุงู ุงูุฐุฑูุฉ</a> ูููุฏุฉ ููุบุงูุฉ ุนูุฏูุง ููุงุชู ุงููุทูุฑูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุธุฑูู ุงูุณุจุงู</a> . </p><br><h2 id="chto-keshirovat" style=";text-align:right;direction:rtl">  ูุง ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุชุ </h2><br><p style=";text-align:right;direction:rtl">  ุฃูู ุงููุฑุดุญูู ููุชุฎุฒูู ุงููุคูุช ูู ุงูุทูุจุงุช ุงูุชู ูุชู ุชูููุฐูุง ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูููู ุฎุทุฉ ุงูุชูููุฐ ุงูุฎุงุตุฉ ุจูู ููุณุช ูู ุงูุฃุณูู.  ุฃูุถู ูุซุงู ุนูู ุฐูู ูู ุฃูุถู 5 ููุงูุงุช ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุ ุฃู ุขุฎุฑ ุงูุฃุฎุจุงุฑ.  ูููู ุฃู ูุคุฏู ุชุฎุฒูู ูุฐู ุงูููู ูุคูุชูุง ุฅูู ุชุญุณูู ุฃุฏุงุก ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุจุดูู ูุจูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุนุงุฏุฉู ูุง ูููู ุฌูุจ ุงูููุงูุงุช ุจุงุณุชุฎุฏุงู ุงููุนุฑู ุจุงุณุชุฎุฏุงู <code>Model::find($id)</code> ุณุฑูุนูุง ููุบุงูุฉ ุ ูููู ุฅุฐุง ูุงู ูุฐุง ุงูุฌุฏูู ูุญููุงู ูุซูุฑูุง ุจุงูุนุฏูุฏ ูู ุงูุชุญุฏูุซุงุช ุ ูู ุจุฅุฏุฑุงุฌ ูุญุฐู ุงูุงุณุชุนูุงูุงุช ุ ููุง ูููู ูู ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช ุงููุญุฏุฏุฉ ุงูุชู ุณุชููุฑ ูุชุฑุฉ ุฑุงุญุฉ ุฌูุฏุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช.  ุงูููุงูุงุช ุงูุชู ููุง ุนูุงูุงุช <code>hasMany</code> ูุงูุชู ุณูุชู ุชุญููููุง ูู ูู ูุฑุฉ ูู ุฃูุถูุง ูุฑุดุญ ุฌูุฏ ููุชุฎุฒูู ุงููุคูุช.  ุนูุฏูุง ุนููุช ูู ูุดุฑูุน ูุน ุฃูุซุฑ ูู 10 ููุงููู ุฒุงุฆุฑ ูููููุง ุ ูููุง ุจุชุฎุฒูู ุฃู ุทูุจ ุชุญุฏูุฏ ูุคูุชูุง ุชูุฑูุจูุง. </p><br><h2 id="invalidaciya-kesha" style=";text-align:right;direction:rtl">  ุฅุจุทุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช </h2><br><p style=";text-align:right;direction:rtl">  ูุณุงุนุฏ ุชุณูุณ ุงูููุงุชูุญ ุจุนุฏ ููุช ูุญุฏุฏ ูู ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูููู ูุฐุง ูุง ูุญุฏุซ ุนูู ุงูููุฑ.  ูููู ูููุณุชุฎุฏู ุชุบููุฑ ุงูุจูุงูุงุช ุ ูููู ูุจุนุถ ุงูููุช ุณูุณุชูุฑ ูู ุฑุคูุฉ ุงูุฅุตุฏุงุฑ ุงููุฏูู ูููุง ูู ุงูุชุทุจูู.  ุงูุญูุงุฑ ุงููุนุชุงุฏ ุญูู ุฃุญุฏ ูุดุงุฑูุนู ุงูุณุงุจูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">:   ,     ! : ,  15 ( ,  )...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงูุณููู ุบูุฑ ูุฑูุญ ููุบุงูุฉ ูููุณุชุฎุฏููู ุ ูุงููุฑุงุฑ ุงููุงุถุญ ุจุญุฐู ุงูุจูุงูุงุช ุงููุฏููุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูุฏูุง ูููู ุจุชุญุฏูุซูุง ุจุณุฑุนุฉ ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู.  ูุฐู ุงูุนูููุฉ ุชุณูู ุงูุนุฌุฒ.  ุจุงููุณุจุฉ ููููุงุชูุญ ุงูุจุณูุทุฉ ูุซู <code>"post_%id%"</code> ุ ูุฅู ุนูููุฉ <code>"post_%id%"</code> ููุณุช ุตุนุจุฉ ููุบุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ุชุณุงุนุฏ ุงูุฃุญุฏุงุซ ุงูุจููุบุฉ ุ ุฃู ุฅุฐุง ูุงู ุชุทุจููู ููุดุฆ ุฃุญุฏุงุซูุง ุฎุงุตุฉ ูุซู <code>PostPublished</code> ุฃู <code>UserBanned</code> ููุฏ ูููู ุงูุฃูุฑ ุฃูุซุฑ ุจุณุงุทุฉ.  ูุซุงู ูุน ุงูุฃุญุฏุงุซ ุงููุตูุญุฉ.  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ูุตูู ุญุฏุซ.  ููุฑุงุญุฉ ุ ุณุฃุณุชุฎุฏู ูุฆุฉ ุชุฌุฑูุฏูุฉ ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostEvent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> Post */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $post; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Post $post)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;post = $post; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Post</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;post; } } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostSaved</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostEvent</span></span></span></span>{} <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostDeleted</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostEvent</span></span></span></span>{}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ููููุง ูู PSR-4 ุ ูุฌุจ ุฃู ูููู ูู ูุตู ูู ูููู ุงูุฎุงุต.  ูู ุจุฅุนุฏุงุฏ ูุฆุฉ Post Eloquent (ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงููุซุงุฆู</a> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Post</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $dispatchesEvents = [ <span class="hljs-string"><span class="hljs-string">'saved'</span></span> =&gt; PostSaved::class, <span class="hljs-string"><span class="hljs-string">'deleted'</span></span> =&gt; PostDeleted::class, ]; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุณุชูุน ููุฐู ุงูุฃุญุฏุงุซ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EventServiceProvider</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServiceProvider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $listen = [ PostSaved::class =&gt; [ ClearPostCache::class, ], PostDeleted::class =&gt; [ ClearPostCache::class, ], ]; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClearPostCache</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PostEvent $event)</span></span></span><span class="hljs-function"> </span></span>{ \Cache::forget(<span class="hljs-string"><span class="hljs-string">'post_'</span></span> . $event-&gt;getPost()-&gt;id); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุคุฏู ูุฐุง ุงูุฑูุฒ ุฅูู ุฅุฒุงูุฉ ุงูููู ุงููุฎุฒูุฉ ูุคูุชูุง ุจุนุฏ ูู ุชุญุฏูุซ ุฃู ุญุฐู ููุงูุงุช ุงููุดุฑ.  ุณุชููู ุฅุจุทุงู ููุงุฆู ุงูููุงูุงุช ุ ูุซู ุงูููุงูุงุช ุงูุฎูุณุฉ ุงูุฃููู ุฃู ุงูุฃุฎุจุงุฑ ุงูุนุงุฌูุฉ ุ ุฃูุซุฑ ุชุนููุฏูุง ุจุนุถ ุงูุดูุก.  ุฑุฃูุช ุซูุงุซ ุงุณุชุฑุงุชูุฌูุงุช: </p><br><h3 id="strategiya-ne-invalidiruem" style=";text-align:right;direction:rtl">  ูุง ุชูู ุจุชุนุทูู ุงูุฅุณุชุฑุงุชูุฌูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ููุท ูุง ุชููุณ ูุฐู ุงูููู.  ุนุงุฏุฉ ุ ูุฐุง ูุง ูุฌูุจ ุฃู ูุดุงูู.  ูุง ุจุฃุณ ุฃู ุชุธูุฑ ุงูุฃุฎุจุงุฑ ุงูุฌุฏูุฏุฉ ูู ูุงุฆูุฉ ุงูุฃุฎูุฑ ูู ููุช ูุงุญู (ุจุงูุทุจุน ุ ุฅุฐุง ูู ุชูู ูุฐู ุจูุงุจุฉ ุฃุฎุจุงุฑ ูุจูุฑุฉ).  ููู ุจุงููุณุจุฉ ูุจุนุถ ุงููุดุงุฑูุน ุ ูู ุงูููู ุญููุง ุงูุญุตูู ุนูู ุจูุงูุงุช ุฌุฏูุฏุฉ ูู ูุฐู ุงูููุงุฆู. </p><br><h3 id="strategiya-nayti-i-obezvredit" style=";text-align:right;direction:rtl">  ุงูุจุญุซ ููุฒุน ูุชูู ุงูุงุณุชุฑุงุชูุฌูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูู ูู ูุฑุฉ ุชููู ูููุง ุจุชุญุฏูุซ ููุดูุฑ ุ ููููู ูุญุงููุฉ ุงูุนุซูุฑ ุนููู ูู ุงูููุงุฆู ุงููุฎุฒูุฉ ูุคูุชูุง ุ ูุฅุฐุง ูุงู ููุงู ุ ุงุญุฐู ูุฐู ุงููููุฉ ุงููุฎุฒูุฉ ูุคูุชูุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopPosts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> \Cache::remember(<span class="hljs-string"><span class="hljs-string">'top_posts'</span></span>, <span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Post::<span class="hljs-comment"><span class="hljs-comment">/*   top-5*/</span></span>()-&gt;get(); }); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CheckAndClearTopPostsCache</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PostEvent $event)</span></span></span><span class="hljs-function"> </span></span>{ $updatedPost = $event-&gt;getPost(); $posts = \Cache::get(<span class="hljs-string"><span class="hljs-string">'top_posts'</span></span>, []); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($posts <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $post) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($updatedPost-&gt;id == $post-&gt;id) { \Cache::forget(<span class="hljs-string"><span class="hljs-string">'top_posts'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ูุจูุญุง ุ ูููู ูุนูู. </p><br><h3 id="strategiya-hranit-id" style=";text-align:right;direction:rtl">  ุงุณุชุฑุงุชูุฌูุฉ "ูุนุฑู ุงููุชุฌุฑ" </h3><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุชุฑุชูุจ ุงูุนูุงุตุฑ ูู ุงููุงุฆูุฉ ุบูุฑ ููู ุ ููููู ููุท ุชุฎุฒูู ูุนุฑู ุงูุฅุฏุฎุงูุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ุจุนุฏ ุชููู ุงููุนุฑู ุ ููููู ุฅูุดุงุก ูุงุฆูุฉ ููุงุชูุญ ูููููุฐุฌ <code>'post_'.$id</code> ูุงูุญุตูู ุนูู ุฌููุน ุงูููู ุจุงุณุชุฎุฏุงู <code>Cache::many</code> method ุ ูุงูุชู ุชุญุตู ุนูู ุงููุซูุฑ ูู ุงูููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุทูุจ ูุงุญุฏ (ููุฐุง ูุง ูุณูู ุฃูุถูุง multi get). </p><br><p style=";text-align:right;direction:rtl">  ุฅุจุทุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุณ ุนุจุซูุง ููุทูู ุนููู ุฅุญุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงูุตุนูุจุงุช ูู ุงูุจุฑูุฌุฉ</a> ููู ุตุนุจ ุฌุฏูุง ูู ุจุนุถ ุงูุญุงูุงุช. </p><br><h2 id="keshirovanie-otnosheniy" style=";text-align:right;direction:rtl">  ุงูุชุฎุฒูู ุงููุคูุช ุงูุนูุงูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุชุทูุจ ุงูุชุฎุฒูู ุงููุคูุช ููููุงูุงุช ุฐุงุช ุงูุนูุงูุงุช ูุฒูุฏูุง ูู ุงูุงูุชูุงู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">$post = Post::findOrFail($id); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($post-&gt;comments...)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุฐ ูุฐุง ุงูุฑูุฒ ุงุณุชุนูุงูุงุช <code>SELECT</code> .  ุงูุญุตูู ุนูู ุงูููุงู ุจูุงุณุทุฉ <code>id</code> ูุงูุชุนูููุงุช ุจูุงุณุทุฉ <code>post_id</code> .  ูููุฐ ุงูุชุฎุฒูู ุงููุคูุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Post</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> \Cache::remember(<span class="hljs-string"><span class="hljs-string">'post_'</span></span> . $id, <span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Post::findOrFail($id); }); } $post = getPost($id); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($post-&gt;comments...)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ุชุฎุฒูู ุงูุทูุจ ุงูุฃูู ูุคูุชูุง ุ ุจูููุง ูู ูุชู ุชุฎุฒูู ุงูุทูุจ ุงูุซุงูู.  ุนูุฏูุง ููุชุจ ุจุฑูุงูุฌ ุชุดุบูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุดุฑ ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุง ูุชู ุชุญููู <code>comments</code> ุจุนุฏ.  ุฅุฐุง ููุง ูุฑูุฏ ุชุฎุฒูููุง ูุคูุชูุง ุฃูุถูุง ุ ูุนูููุง ุชุญููููุง ูุฏูููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Post</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> \Cache::remember(<span class="hljs-string"><span class="hljs-string">'post_'</span></span> . $id, <span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $post = Post::findOrFail($id); $post-&gt;load(<span class="hljs-string"><span class="hljs-string">'comments'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $post; }); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุงูุขู ุชุฎุฒูู ููุง ุงูุทูุจูู ูุคูุชูุง ุ ูููู ูุชุนูู ุนูููุง ุฅุจุทุงู ููู <code>'post_'.$id</code> ูู ูุฑุฉ ูุชู ูููุง ุฅุถุงูุฉ ุชุนููู.  ุฅูู ุบูุฑ ูุนุงู ููุบุงูุฉ ุ ูุฐูู ูู ุงูุฃูุถู ุชุฎุฒูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุชุนููู ุจุดูู ูููุตู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPostComments</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Post $post)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> \Cache::remember(<span class="hljs-string"><span class="hljs-string">'post_comments_'</span></span> . $post-&gt;id, <span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($post)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $post-&gt;comments; }); } $post = getPost($id); $comments = getPostComments($post); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($comments...)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุจุนุถ ุงูุฃุญูุงู ุ ูุฑุชุจุท ุงูุฌููุฑ ูุงููููู ุจุจุนุถููุง ุงูุจุนุถ ููุชู ุงุณุชุฎุฏุงูููุง ุฏุงุฆููุง ูุนูุง (ุชุฑุชูุจ ูุน ุงูุชูุงุตูู ุ ูุงููุดุฑ ูุน ุงูุชุฑุฌูุฉ ุฅูู ุงููุบุฉ ุงููุทููุจุฉ).  ูู ูุฐู ุงูุญุงูุฉ ุ ูุนุฏ ุชุฎุฒูููุง ูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุงุญุฏุฉ ุฃูุฑูุง ุทุจูุนููุง ุฌุฏูุง. </p><br><h2 id="single-source-of-truth-dlya-klyuchey-keshirovaniya" style=";text-align:right;direction:rtl">  ูุตุฏุฑ ูุงุญุฏ ููุญูููุฉ ูููุงุชูุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช </h2><br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุชูููุฐ ุงููุดุฑูุน ูุฅูุบุงุก ุงูุชุญูู ุ ูุชู ุฅูุดุงุก ููุงุชูุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ููุงููู ุนูู ุงูุฃูู: ููุงุชุตุงู ุจู <code>Cache::get</code> / <code>Cache::remember</code> ูููุงุชุตุงู ุจู <code>Cache::forget</code> .  ููุฏ ูุงุฌูุช ุจุงููุนู ููุงูู ุนูุฏูุง ุชู ุชุบููุฑ ูุฐุง ุงูููุชุงุญ ูู ููุงู ูุงุญุฏ ุ ูููู ููุณ ูู ููุงู ุขุฎุฑ ุ ููุณุฑ ุงูุนุฌุฒ.  ุงููุตูุญุฉ ุงููุนุชุงุฏุฉ ููุซู ูุฐู ุงูุญุงูุงุช ูู ุงูุซูุงุจุช ุ ูููู ูุชู ุฅูุดุงุก ููุงุชูุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุจุดูู ุญููู ุ ูุฐูู ูููููู ุงุณุชุฎุฏุงู ูุฆุงุช ุฎุงุตุฉ ุชูุดุฆ ุงูููุงุชูุญ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CacheKeys</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($postId)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'post_'</span></span> . $postId; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postComments</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($postId)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'post_comments'</span></span> . $postId; } } \Cache::remember(CacheKeys::postById($id), <span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $post = Post::findOrFail($id); }); <span class="hljs-comment"><span class="hljs-comment">// .... \Cache::forget(CacheKeys::postById($id));</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุฃูุถูุง ุชูุฏูู ุงูุนูุฑ ุงูุงูุชุฑุงุถู ูู ุซูุงุจุช ูู ุฃุฌู ุชุญุณูู ุฅููุงููุฉ ุงููุฑุงุกุฉ.  ูุฐู 900 ุฃู 15 * 60 ุฒูุงุฏุฉ ุงูุญูู ุงููุนุฑูู ุนูุฏ ูุฑุงุกุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </p><br><h2 id="ne-ispolzuyte-kesh-v-operaciyah-zapisi" style=";text-align:right;direction:rtl">  ูุง ุชุณุชุฎุฏู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุนูููุงุช ุงููุชุงุจุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชูููุฐ ุนูููุงุช ุงููุชุงุจุฉ ุ ูุซู ุชุบููุฑ ุนููุงู ุฃู ูุต ุงูููุดูุฑ ุ ูู ุงููุบุฑู ุงุณุชุฎุฏุงู ุทุฑููุฉ <code>getPost</code> ุงูููุชูุจุฉ ูุณุจููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">$post = getPost($id); $post-&gt;title = $newTitle; $post-&gt;save();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุถูู ูุง ุชูุนู ุฐูู.  ูุฏ ุชููู ุงููููุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฏููุฉ ุ ุญุชู ุฅุฐุง ุชู ุงูุฅุจุทุงู ุจุดูู ุตุญูุญ.  ุณุชููุฏ ุญุงูุฉ ุงูุณุจุงู ุงูุตุบูุฑุฉ ูุงููุดุฑ ุงูุชุบููุฑุงุช ุงูุชู ุฃุฌุฑุงูุง ูุณุชุฎุฏู ุขุฎุฑ.  ุณูู ุชุณุงุนุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงูุฃููุงู ุงููุชูุงุฆูุฉ</a> ุนูู ุงูุฃูู ูู ุนุฏู ููุฏ ุงูุชุบููุฑุงุช ุ ููู ุนุฏุฏ ุงูุทูุจุงุช ุงูุฎุงุทุฆุฉ ูููู ุฃู ูุฒูุฏ ุจุดูู ูุจูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุถู ุญู ูู ุงุณุชุฎุฏุงู ููุทู ุงุฎุชูุงุฑ ููุงู ูุฎุชูู ุชูุงููุง ูุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ (ูุฑุญุจูุง ุ CQRS).  ูู ุนูููุงุช ุงููุชุงุจุฉ ุ ุชุญุชุงุฌ ุฏุงุฆููุง ุฅูู ุชุญุฏูุฏ ุฃุญุฏุซ ูููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ููุง ุชูุณ ุงูุฃููุงู (ูุชูุงุฆูุฉ ุฃู ูุชุดุงุฆูุฉ) ููุจูุงูุงุช ุงููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฃุนุชูุฏ ุฃู ูุฐุง ูููู ูููุงู ุชูููุฏู.  ูุนุฏ ุงูุชุฎุฒูู ุงููุคูุช ููุถูุนูุง ูุนูุฏูุง ูุทููููุง ููุบุงูุฉ ุ ูุน ูุตุงุฆุฏ ูููุทูุฑูู ุ ูููู ููุงุณุจ ุงูุฃุฏุงุก ุชููู ูู ุจุนุถ ุงูุฃุญูุงู ุฌููุน ุงูุตุนูุจุงุช. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar463495/">https://habr.com/ru/post/ar463495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar463477/index.html">ุงูุณูุงู ูุงููุฏูุก: ุณุฏุงุฏุงุช dBud ุฐุงุช ูุณุชูููู ูุฎูุถ ุงูุถูุถุงุก</a></li>
<li><a href="../ar463483/index.html">ุชุนุงูู ุงููุณุชูุฏุงุช ูุงูุฏุฑุฏุดุฉ ุงููุญุฏุซุฉ ููุดุฑูุงุช ูุชุทุจูู ุงูุฌูุงู: ูุง ุงูุฌุฏูุฏ ูู Zextras Suite 3.0</a></li>
<li><a href="../ar463489/index.html">ูุฐุจ ุงููุนุงุฏู ุงูุซูููุฉ: ูู ุงููุงูุน ุ ููููุณููู ุงูุซูููุฉ ุชุฃุซูุฑ ุฅูุฌุงุจู ุนูู ุตุญุฉ ุงููุนุฌุจูู ุจูุง</a></li>
<li><a href="../ar463491/index.html">ูุตุฉ ุชุฑุฌูุฉ ุฅูุฌููุฒูุฉ ุบุฑูุจุฉ ูู Metal Gear Solid</a></li>
<li><a href="../ar463493/index.html">ุงููุฒูุฏ ูู ุฅุญุตุงุกุงุช ุงููููุน ูู ูุณุชูุฏุนู ุงูุตุบูุฑ</a></li>
<li><a href="../ar463497/index.html">ุงูุฃุณูู ููุงุกุฉ ุญุงุณุจุฉ ู 5 ุฃุณุจุงุจ ููุงุฐุง ุงูุฃููุฑ ุฎุงุทุฆุฉ</a></li>
<li><a href="../ar463499/index.html">ููุชุจ ูุฑูุญ - ูุณุงุนุฏ ุนูู ุงูุนูู ุฃู ูุชุฏุงุฎู ููุตุฑูุ ุณูู Sidenis ุ ุฃูุนุงุจ Alternativa ู FunBox ุงูุฅุฌุงุจุฉ</a></li>
<li><a href="../ar463503/index.html">ููุงุฐุง ุชุทููุฑ ุงูุดุจูุฉ ุงูุญุฏูุซุฉ ูุนูุฏุฉ ููุบุงูุฉุ ุงูุฌุฒุก 1</a></li>
<li><a href="../ar463505/index.html">ููุงุฐุง ูุฌุจ ุฃู ูุตุจุญ ูุณุคููู ุงููุธุงู ูููุฏุณูู ูู DevOps</a></li>
<li><a href="../ar463507/index.html">ุงูููู ูู ุงููุฎุฑุฌ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>