<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß§ ü§úüèΩ üíî Chaleira e assistentes de voz. O come√ßo de uma grande amizade üî± üßëüèΩ‚Äçü§ù‚Äçüßëüèº ‚è∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O que temos por um determinado per√≠odo de tempo no mundo da GA ? Fato conhecido: cada uma das grandes empresas de TI possui sua pr√≥pria ferramenta par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chaleira e assistentes de voz. O come√ßo de uma grande amizade</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/readyforsky/blog/461363/"><img src="https://habrastorage.org/webt/lk/a3/rh/lka3rhuphajcjx25rj3w-eqv_1g.png"><br><br>  O que temos por um determinado per√≠odo de tempo no mundo da <abbr title="Assistente de voz">GA</abbr> ?  Fato conhecido: cada uma das grandes empresas de TI possui sua pr√≥pria ferramenta para trabalhar com resid√™ncias inteligentes.  E cada fornecedor fornece sua pr√≥pria API para os interessados ‚Äã‚Äãem integra√ß√£o.  E, no est√°gio inicial, paga at√© aos desenvolvedores novas habilidades (a√ß√µes, habilidades etc. - de acordo com a terminologia do fornecedor). <br><br>  O servi√ßo mais conveniente e pr√°tico at√© o momento, de acordo com nossos especialistas, √© o Amazon Alexa.  Ela tem mais oportunidades de forma√ß√£o detalhada de habilidades do que o Assistente do Google, Yandex "Alice", Mail.Ru "Maroussia", Tinkoff "Oleg" e outros.  Para o Alexa, um dispositivo √© uma entidade virtual param√©trica, como resultado de quais habilidades podem ser personalizadas para cada dispositivo individualmente.  Por exemplo, al√©m da temperatura da √°gua, voc√™ pode especificar consum√≠veis que o assistente oferecer√° para comprar na Amazon.  Infelizmente, atualmente, o Alexa n√£o suporta o idioma russo e n√£o funciona no territ√≥rio da Federa√ß√£o Russa; portanto, este GA √© in√∫til para um usu√°rio russo.  No Google e Yandex, o assistente √© mais "natural" - recebe e responde a comandos na linguagem "humana", pode dialogar com o usu√°rio, o que torna esse GA mais agrad√°vel de usar.  A √∫nica desvantagem s√©ria do Google foi que suas a√ß√µes n√£o suportavam o idioma russo.  No entanto, a partir de 24 de julho de 2019, o Google Actions trabalha em "telefones" em russo, ent√£o os colegas eliminam essa desvantagem. <br><br>  Est√° tudo bem.  E se queremos integrar um dispositivo com v√°rios GA? <br><a name="habracut"></a><br>  √â poss√≠vel  Usando o dispositivo <br><br>  Um dispositivo √© uma entidade com seu comportamento no sistema.  Este √© um princ√≠pio comum para todos os fornecedores.  E aqui vale a pena parar, aqui come√ßa toda a divers√£o.  As diferen√ßas est√£o nas abordagens.  Por exemplo, o Google e o Yandex est√£o tentando padronizar o gerenciamento de tecnologia.  Ou seja, agora √© necess√°rio escrever um c√≥digo n√£o para cada dispositivo individual, mas um programa para toda a s√©rie √© suficiente.  E mesmo que o firmware mude, voc√™ precisar√° alterar o c√≥digo uma vez, o que √© muito conveniente.  Nossa empresa j√° possui integra√ß√£o com Google, Yandex, Amazon.  A t√©cnica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ouve Alice</a> , Alex e o assistente do Google.  Anteriormente, mostramos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso nos assistentes de voz</a> . <br><br><h3>  <b>De onde vieram os assistentes de voz?</b> </h3><br>  Um dos sistemas de reconhecimento de fala mais avan√ßados do mundo pertence ao Google, sua hist√≥ria come√ßou em 2002.  A empresa lan√ßou a Pesquisa por voz, com base na qual o Google Assistant foi desenvolvido.  Em 2016, ele foi apresentado na apresenta√ß√£o do Google I / O.  A P√°gina inicial do Google √© uma das 'superf√≠cies' do Google Assistant.  Agora, a precis√£o do reconhecimento de fala do AG √© estimada em 95% e quase inferior √†s pessoas. <br><br>  O assistente de voz do Alexa foi introduzido pela Amazon em 2014. A coluna inteligente Amazon Echo, que pode controlar um grande n√∫mero de dispositivos em uma casa inteligente, tamb√©m foi apresentada l√°. <br><br>  Yandex SpeechKit - sistema de reconhecimento de voz Yandex.  √â usado em mais de 400 aplicativos.  A empresa tamb√©m incorpora seu GA - Alice - em navegadores e dispositivos eletr√¥nicos.  A empresa russa introduziu o seu GA em 2017 e, j√° no outono de 2018, a Yandex lan√ßou sua coluna inteligente Yandex.Station. <br><br><h3>  <b>Nossos especialistas dizem que, no cent√©simo quinquag√©simo sexto ano ...</b> </h3><br>  Estamos brincando, at√© agora apenas em 2020.  Um pouco sobre estat√≠sticas: <br><br><ol><li>  Em 2017, aproximadamente 33 milh√µes de dispositivos controlados por voz foram registrados em todo o mundo; </li><li>  Os especialistas ocidentais consideraram a pesquisa por voz uma das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tr√™s principais tend√™ncias de SEO em 2017</a> ; </li><li>  Para 2018, o Google Assistant funciona em 400 milh√µes de dispositivos em todo o mundo.  E esse n√∫mero est√° crescendo apenas; </li><li>  Segundo o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Global Web Index</a> , 25% das pessoas de 16 a 24 anos usam a pesquisa por voz em dispositivos m√≥veis; </li><li>  De acordo com as previs√µes da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Comscore</a> , at√© 2020, 50% dos pedidos ser√£o feitos por voz; </li><li>  De acordo com uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pesquisa de</a> 2018 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">da WalkerSands</a> , cada quinto usu√°rio de um alto-falante inteligente da Amazon comprou com ele e um terceiro planejava faz√™-lo no pr√≥ximo ano; </li><li>  De acordo com um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estudo da PWC</a> , 71% dos usu√°rios que pesquisam na web preferem digitar vozes em vez de manualmente. </li></ol><br>  Como voc√™ pode entender, a tend√™ncia para usar o GA est√° aumentando, o que sugere que √© hora de contratar um fornecedor e lan√ßar seu pr√≥prio assistente.  Para n√≥s, a chave √© a capacidade de controlar dispositivos inteligentes, que distinguir√£o o SkyFriend de outros assistentes. <br><br><h3>  <b>E vamos integrar!</b> </h3><br>  MAS tamb√©m nossa tarefa √© trabalhar com a abordagem de fornecedor existente e adapt√°-la ainda mais ao nosso protocolo de controle de tecnologia espec√≠fico.  Seguimos o caminho da padroniza√ß√£o, aplica√ß√£o pr√°tica, percebendo o dispositivo como um conjunto de habilidades: cada chaleira pode ferver √°gua (habilidade), tamb√©m pode aquec√™-la at√© a temperatura desejada (habilidade), manter essa temperatura por um tempo determinado, etc. Por exemplo, O comando "On / Off" √© padr√£o para qualquer dispositivo.  A tarefa √© transferir esse comando do servi√ßo para o nosso protocolo.  Qual √© a peculiaridade do nosso protocolo?  Ele conecta assistentes de voz diferentes (agora tr√™s, no futuro - todos grandes) e permite que todos trabalhem com dispositivos, inclusive ao mesmo tempo.  A comunica√ß√£o √© uma para muitos.  A √∫nica quest√£o √© como exatamente adaptaremos nosso protocolo a todas as abordagens? <br><br>  Vamos ver  Projetos separados para cada GA s√£o: <br><br><ul><li>  Maior n√∫mero de funcion√°rios </li><li>  Muito c√≥digo e legado no futuro; </li><li>  Incapacidade de escalar. </li></ul><br>  Quando novos assistentes aparecerem no mercado, ser√° necess√°rio aumentar proporcionalmente a equipe e o volume de trabalho.  √â l√≥gico que recusamos essa op√ß√£o.  No entanto, apesar das diferentes abordagens para cada assistente de voz, eles podem encontrar algo em comum - o que eles basicamente trabalham √© habilidade, caracter√≠stica, habilidade.  Os nomes s√£o diferentes, mas a ess√™ncia √© a mesma.  Portanto, a tarefa √© desenvolver sua "habilidade", que ser√° percebida pelos assistentes.  No futuro, voc√™ precisar√° adicionar apenas novos fornecedores, o que resolve o problema de dimensionamento.  Tamb√©m teremos em mente que uma quantidade significativa de nossos equipamentos utiliza ve√≠culos BLE, que ditam os recursos arquitet√¥nicos. <br><br>  Desenvolvemos dois microsservi√ßos que funcionam em pares. <br><br><img src="https://habrastorage.org/webt/zw/lo/zf/zwlozfjr3y51a2mc_rqpemr-biq.png"><br><br>  O primeiro √© a camada de comando.  Sua tarefa: realizar a convers√£o (mapeamento) entre a API do fornecedor e nosso protocolo.  Funciona assim: uma solicita√ß√£o espec√≠fica para um assistente √© mapeada para nossa habilidade - mapeamento para um protocolo de dispositivo.  Com essa abordagem, √© f√°cil adicionar novas habilidades: o mapeamento √© realizado para o protocolo R4S final - o c√≥digo √© transferido para o segundo servi√ßo.  O √∫ltimo item pode ser exclu√≠do ao transmitir um comando por Wi-Fi. <br><br>  A segunda camada de servi√ßo ou transporte √© usada para: <br><br><ol><li>  Estabele√ßa uma sess√£o com um gateway de cliente; </li><li>  Elevar e manter uma conex√£o Bluetooth; </li><li>  Recep√ß√£o / transmiss√£o de comandos desde o primeiro servi√ßo. </li></ol><br>  Este servi√ßo faz parte de uma entidade de n√≠vel superior: dispositivo BT mais intermedi√°rio de gateway, trabalhando com o princ√≠pio: receber comandos via Internet - enviar via BT.  As conex√µes sem fio podem n√£o ser confi√°veis.  Porque  O canal de r√°dio pode ser limitado por par√¢metros ambientais - paredes de concreto espessas, etc. ... Como resultado, os dispositivos podem "cair" de maneira elementar, portanto, manter uma conex√£o est√°vel torna-se uma tarefa importante para a camada de transporte. <br><br><img src="https://habrastorage.org/webt/fq/ui/ti/fquiti2wm64hfky4de4zy7hd9qe.jpeg"><br><br>  A pol√≠tica de conex√£o pode ser diferente: <br><br>  1. Suporte cont√≠nuo √† comunica√ß√£o. <br><br>  <b>Pr√≥s</b> : atraso m√≠nimo na execu√ß√£o dos comandos do GA. <br>  <b>Contras</b> : caro para o tr√°fego e o consumo de energia;  existe um limite no n√∫mero de dispositivos conectados simultaneamente (nesta gera√ß√£o, Bluetooth 4.0 / 4.2 - seis, no Bluetooth 5.0 at√© vinte).  Tamb√©m exigir√° recursos adicionais do servidor. <br><br>  2. Conex√£o sob demanda. <br><br>  <b>Pr√≥s</b> : conectar quase n√£o requer tr√°fego e cobran√ßa. <br>  <b>Contras</b> : n√£o √© garantido um alto atraso na execu√ß√£o dos comandos e a pr√≥pria execu√ß√£o (a conex√£o pode "cair" ou n√£o ter √™xito).  Com essa abordagem, n√£o nos ajustamos enquanto aguardamos a resposta do GA.  A sess√£o terminou e terminou. <br><br>  A quest√£o tamb√©m permanece - o comando foi recebido e elaborado, MAS o que fazer com a conex√£o: desconectar ou continuar.  Observe que exatamente da mesma maneira que o Apple HomeKit funciona ao trabalhar com dispositivos de terminal BLE (via Apple TV ou iPad como gateway).  Parece assim: na primeira vez em que voc√™ tenta enviar um comando, o processo leva muito tempo (ou melhor, √© percept√≠vel para o usu√°rio), mas os comandos subsequentes s√£o executados quase instantaneamente.  Ap√≥s a conclus√£o do trabalho do usu√°rio com o dispositivo, o sistema operacional "configura" a sess√£o ap√≥s um tempo razo√°vel e, em seguida, o processo √© repetido como novo. <br><br><h3>  <b>No entanto, isso n√£o √© tudo.</b> </h3><br>  <b>Dificuldade 1</b> .  Roteamento de gateway. <br><br><img src="https://habrastorage.org/webt/dp/tp/s9/dptps9c65buopbiskgfiki3bhpi.png"><br><br>  Se houver v√°rios gateways na sala, surge a pergunta - a quem conectar e qual gateway a que dispositivo est√° conectado.  Agora tudo funciona de acordo com o princ√≠pio - quem tiver sucesso est√° conectado.  A implementa√ß√£o nem sempre √© bem-sucedida, pois o gateway mais pr√≥ximo (e, portanto, capaz de se conectar com mais confiabilidade) pode estar ocupado no intervalo de tempo usado.  Ent√£o aquele que √© livre e capaz est√° conectado.  Isso acontece sem considerar a qualidade da comunica√ß√£o.  Portanto, √© importante construir uma hierarquia e um esquema de trabalho para que o usu√°rio fique o mais confort√°vel poss√≠vel. <br><br>  <b>Dificuldade 2</b> .  Muitos usu√°rios. <br><br>  Essa √© uma situa√ß√£o em que v√°rios usu√°rios podem usar um gateway ou dispositivo ao mesmo tempo.  Obviamente, com um alto n√≠vel de seguran√ßa.  Por exemplo, de diferentes GAs ou de GAs e telefones de usu√°rios.  Um enxame de perguntas: qual dispositivo ativar primeiro, se os comandos do GA se contradizem, qual comando √© uma prioridade e deve ser executado anteriormente etc. Parcialmente, nosso problema √© resolvido pelo servi√ßo Redis - um banco de dados no qual as sess√µes do usu√°rio, status do dispositivo e transceptor s√£o armazenados comandos e servindo barramento de dados entre o primeiro e o segundo servi√ßos.  Mas √© a√≠ que a solu√ß√£o para o problema para. <br><br>  O que fizemos?  N√≥s criamos o SkyFriend.  Este √© o nosso pr√≥prio desenvolvimento, um assistente de voz para gerenciamento de tecnologia, que tamb√©m suportar√° o idioma russo.  Uma caracter√≠stica importante do nosso GA √© que ele √© aprimorado para intera√ß√£o direta com a tecnologia Smart Ready for Sky sem instrumentos adicionais.  O dispositivo √© dois em um - o assistente √© combinado com o gateway, que receber√° informa√ß√µes atrav√©s dos comandos que o usu√°rio envia do smartphone ou diretamente por voz.  Al√©m disso, o SkyFriend possui recursos adicionais que lhe permitir√£o competir com aqueles que j√° existem.  Ele pode ativar lembretes mediante solicita√ß√£o, determinar a localiza√ß√£o geogr√°fica do usu√°rio, pesquisar informa√ß√µes na Wikipedia, recomendar filmes, fazer brindes, ler not√≠cias, responder perguntas, informar a hora e o tempo em qualquer cidade do mundo, jogar Mist√©rios e Cidades com o usu√°rio fazendo piadas.  A compra de passagens e o pedido de um t√°xi ainda est√£o em fase de teste alfa.  E isso √© apenas parte da funcionalidade. <br><br>  Mais recentemente, o Google anunciou o trabalho de sua coluna em uma arquitetura semelhante - o script de execu√ß√£o √© carregado diretamente na coluna P√°gina inicial do Google.  Ganhar do lado do usu√°rio √© reduzir o tempo necess√°rio para executar comandos.  Voc√™ n√£o precisa envi√°-lo para o servidor do fabricante do equipamento; ele voa diretamente para a coluna do servidor do Google pelo mesmo canal de comunica√ß√£o e √© executado l√°. <br><br>  No entanto, o Google ainda n√£o suporta outros transportes - Bluetooth, ZigBe, Z-Wave, RF etc.  diretamente na coluna, e o SkyFriend suporta Bluetooth 5.0. <br><br>  O que mais nos resta?  Trabalhe com recursos do sistema - adicione mem√≥ria, pot√™ncia do processador, etc.  E estamos prontos para oferecer aos usu√°rios uma nova qualidade de GA. <br><br><h3>  O que podemos dizer em conclus√£o? </h3><br>  O GA √© uma tend√™ncia, √© conveniente, √© pr√°tico.  O t√≥pico √© novo, abrangente, possui muitas perguntas que ainda s√£o dif√≠ceis de resolver.  Especialmente sozinho.  Portanto, convidamos voc√™ para uma discuss√£o. <br><br>  O que acontecer√° depois?  E depois haver√° nosso novo artigo sobre a arquitetura SkyFriend.  Vamos contar e mostrar tudo.  Mas ent√£o. <br><br>  As sugest√µes e cr√≠ticas do PS podem ser deixadas nos coment√°rios. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461363/">https://habr.com/ru/post/pt461363/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461351/index.html">Caleidosc√≥pio como na inf√¢ncia</a></li>
<li><a href="../pt461353/index.html">4 regras de neg√≥cios de David Jan</a></li>
<li><a href="../pt461355/index.html">Transforma√ß√£o digital de pequenas empresas do tipo fa√ßa voc√™ mesmo</a></li>
<li><a href="../pt461359/index.html">Localiza√ß√£o geogr√°fica e geolocaliza√ß√£o: mega-ferramenta</a></li>
<li><a href="../pt461361/index.html">Maior e mais poderoso: como garantimos a opera√ß√£o de novos equipamentos no data center MediaTek</a></li>
<li><a href="../pt461365/index.html">Dominar a vis√£o computacional - 8 etapas b√°sicas</a></li>
<li><a href="../pt461367/index.html">Como um graduado em Fiztekh abriu a maior escola de programa√ß√£o na Arm√™nia</a></li>
<li><a href="../pt461371/index.html">M√¥nada "Reader" atrav√©s de ass√≠ncrona / espera em C #</a></li>
<li><a href="../pt461373/index.html">GoLand 2019.2: suporte para chamadas de fun√ß√£o durante a depura√ß√£o, esquemas de cores aprimorados, conclus√£o personalizada do Postfix</a></li>
<li><a href="../pt461379/index.html">Museum DataArt. Modems da US Robotics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>