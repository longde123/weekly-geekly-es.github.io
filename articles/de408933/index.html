<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍💼 🎸 ☝️ Ersatz eines mechanischen Druckschalters durch einen digitalen (für Brunnenbesitzer) 👇🏼 🕜 🔵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Als ich zum ersten Mal einen mechanischen Druckschalter mit Federn einstellen musste, stellte ich fest, dass ich einen Anruf bei einem Freund oder vie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ersatz eines mechanischen Druckschalters durch einen digitalen (für Brunnenbesitzer)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408933/"> Als ich zum ersten Mal einen mechanischen Druckschalter mit Federn einstellen musste, stellte ich fest, dass ich einen Anruf bei einem Freund oder vielmehr bei meinem Vater brauchte, da der Mechanismus, obwohl er gut durchdacht und fehlertolerant ist, auf einem hohen Niveau liegt, aber es gibt einen Nachteil, selbst wenn das Gesicht einmalig eingestellt wird . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/13e/24d/072/13e24d0724dea32524577289dea261f6.jpg" alt="Bild"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/7be/772/9537be77296c01b41348a4e722cef8bf.jpg" alt="Bild"></div><br>  Ich bitte um einen Schnitt, dort ist es interessanter;) <br><a name="habracut"></a><br>  Ich habe es irgendwie herausgefunden und es sogar geschafft, es anzupassen, aber ich habe Zeit und Nerven darauf verwendet.  Dann wurde mir klar, dass ein digitales Relais großartig wäre. Drücken Sie einfach die Tasten und stellen Sie das gewünschte ein.  Natürlich können mich viele in mehrfacher Hinsicht verurteilen: <br><br>  "Sie sind ein Dummkopf, dass Sie nicht mit dem einfachsten Druckschalter und zwei Federn umgehen können." <br>  - Mechanik lenkt, es wird für immer funktionieren. <br>  - warum gibt es etwas zu regeln: einmal ein Klempner für XX * (Landessatz) Rubel und alles eingestellt <br><br>  Ohne Probleme können Sie die Liste für eine lange Zeit fortsetzen, aber aufgrund Ihrer Technik möchte ich alles um mich herum entwickeln und verbessern und nicht die Federn verdrehen und darüber nachdenken, wann die Kontakte des mechanischen Relais dort verbrennen und das Wärmepumpenschutzrelais zu funktionieren beginnt, wenn Sie alle in Seife sind: D und noch besser deine Frau :) <br><br>  Wir müssen Tribut zollen, das mechanische Relais arbeitet bereits seit dem 4. Jahr für mich und nichts ist damit passiert (pah pah pah). Ich musste nur wieder aufbauen, die Kontakte reinigen und diese „KLICK!“ Begannen zu funkeln.  Sie spannten sich ein wenig in der Garage an und ... erschreckten meine Maus, so dass er weglaufen musste. <br><br><div class="spoiler">  <b class="spoiler_title">Flucht</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/-fVq93IuNN0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Da ich Automatisierung mag und durch esp von 1-Draht zu Arduino gewechselt bin, kann und kann ich verschiedene Handarbeiten im Haus oder besser Geräte machen, um das Leben leichter zu machen.  Der Freundeskreis kennt die Liste der Projekte, die ich abschließen und umsetzen möchte, aber dafür ist absolut keine Zeit.  Der Bau des Bades wird den ganzen Sommer (750 Stunden) dauern, dann wird sich der Schnee häufen :), und hier ist das neue Jahr in der Nase! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/d20/61c/46b/d2061c46b4400e77cb2c657f745003d9.jpg" alt="Bild"></div><br>  Viele Leute "lieben" mich auch, besonders aus dem IT-Bereich.  Aber das macht nur Spaß, das Leben ist eine interessante Sache und in keiner Weise ohne.  Vielen Dank auch an alle, die mich unterstützen - ohne Ihre freundlichen Worte wäre der Antrieb nicht der gleiche.  Vielen Dank an meine Frau für das Verständnis der Liebe meiner Boards. <br><br>  Aus den Texten springen wir in die Realität.  Ich suchte nach einem digitalen Relais und stellte fest, dass es in dieser Richtung sehr schwierig war, entweder für 100 Dollar im Ausland und überhaupt nicht so, wie ich es gerne hätte ... oder für 15 Dollar bei einem Mechaniker.  Ich bringe es in $, da seit langem bekannt ist, dass selbst Großmütter nicht wie bei Münzen baden würden, wenn wir zu $ ​​wechseln würden.  Aber ich bin so ein Schlingel - das Haus ist mit dem Internet verbunden, aber es gibt keinen Druckschalter - verrückt! <br><br>  Thema für Trolle: Ich habe angefangen, mit Arduino chinesischer Herkunft zu arbeiten, nicht mit den ursprünglichen, sondern mit den chinesischen. Sie funktionieren auf die gleiche Weise, wo es kleinere Fehler gibt, aber sie verletzen mich nicht so, dass sie Lava aus Negativ spucken und esp8266 schütteln, das schneller an statischer Aufladung stirbt als Sie werden es an Ihren Computer anschließen und sogar mit 3,3-Leistung (die Sie suchen müssen), es sei denn, es ist NodeMCU, die ich verehre. <br><br>  Ich liebe esp8266 und Arduino und Menschen, aber um mich schnell hinzusetzen und ein funktionierendes und stabiles Automatisierungsgerät zusammenzubauen, ist Arduino eine unverzichtbare Sache. + Die Verkabelung der C-Sprache hilft sehr dabei, schnell zu erkennen, was erforderlich ist.  (Niemand wird vorwerfen, was Sie in der Bremssprache Lua geschrieben haben).  esp8266 (meiner Meinung nach) - gut, wenn Sie den ADC nicht messen müssen und das Internet benötigt wird.  Obwohl seine "Verbrennung \ Feuchtigkeit" sehr enttäuschend ist. <br><br>  Wir kehren zu unseren Schafen zurück, das heißt zu einer Staffel :) <br><br>  Als Ergebnis fand ich in China einen Sensor für 5 US-Dollar mit einem 0-5-V-ADC und beschloss, ihn auszuprobieren.  Nicht einmal so, ich habe dumm gefeuert, um es anzuwenden und das Gerät zusammenzubauen.  Sofortige erotische Fantasien begannen, wie die LEDs blinken) und die Tasten zum Einstellen gedrückt werden, und die geschätzten Ziffern leuchten auf dem chinesischen blauen Bildschirm und all dies funktioniert mit echtem Druck in unserem Kamm. <br><br>  Ich dachte darüber nach, skizzierte es, zeichnete es, plante es, bestellte es und begann, den Code zu schreiben, bis die Erotik mit Gedanken vorüberging. <br><br>  Als der Sensor ankam, stellte ich fest, dass der Sensor sehr gut verarbeitet ist. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/cac/9f7/0e4/cac9f70e428dc26b50ef47c3f69e21a3.jpg" alt="Bild"></div><br>  Außerdem wurde mir klar, dass Daten nicht von Grund auf angezeigt werden, sondern von 0,5 V bis 4,5 V.  von 0 bis 12 bar.  Ich war sehr glücklich, weil ich mich gefreut habe, die Singularität dieses Geräts zu erkennen. Sie können verfolgen, wann der Sensor stirbt und die begehrten 0,5 am Ausgang nicht anzeigen. <br><br>  Einsetzen des Sensors in das aktuelle System, so dass die Mechanik „nur für den Fall“ bleibt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/ff1/9a8/953ff19a89efd97c7de0c335a0d841a0.jpg" alt="Bild"></div><br>  Eines ist traurig, es gab keine Daten über den Sensor, wie man seine Messwerte berechnet, aber da es eine lineare Linie in der Grafik gab, musste ich (beschämt, ich gebe zu) das ALGEBRA-Lehrbuch öffnen und wieder lernen, mich daran erinnern, wie sie eine direkte lineare Beziehung aufbauen Gleichung :) Durch zwei Punkte und über ein Wunder bekam ich schnell (Sie können mich beschämen) eine geschätzte einfache Formel, in der ich nach der Umwandlung des ADC-Signals in VOLTS verstand, wie viel Druck ich in Bar habe.  Da der Sensor selbst von 0 bis 1,2 MPa ausgegeben hat, ist es nicht schwierig, ihn in Bar zu übersetzen. <br><br>  1 Pa = 1,0E-5 bar <br>  d.h. 1200000Pa = 12 Bar <br>  Da der Druck von der Pumpe 4 Bar nicht überschreitet, reicht dieser Sensor für die Augen! <br><br>  Dann habe ich das Arduino Uno genommen - es lag zu viel herum, ich benutze es normalerweise für schnelles Design mit Scharnieren, zum Testen und dann benutze ich das Arduino Nano, da es kein linkes Bodykit enthält und dreimal so groß ist!  Und ja, die Arduinisten chinesischer Herkunft werden mir vergeben, es tat mir leid, sie untätig zu sehen, ich muss sie in das Gerät lassen!  Ich dachte und kaufte eine kleine IP55 Plastikbox, trank ein Loch unter dem Bildschirm, das ich vor 4 Jahren gekauft hatte!  Karl!  Und dann wusste ich nicht, dass dieses LCD 16 * 2 ein so nützliches Geschäft werden würde.  Ich habe 2 Autoknöpfe auf dem Automarkt genommen, die Drähte verlötet und das Board nicht einmal separat entworfen, wie ich es für Nano getan habe - da Uno dumm groß ist und für solche Zwecke überhaupt nicht. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a6e/c78/d35/a6ec78d35d2e73c21da5ab9f53bfbd25.jpg" alt="Bild"><br><br>  Der Algorithmus ist recht einfach und wird noch vor Ort getestet. Der Projektcode für eine genauere Betrachtung befindet sich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Ich schäme mich nicht, es zu posten, wenn es konstruktive Kritik gibt. Ich bin bereit, Änderungen vorzunehmen, da es für jede Diskussion offen ist. <br><br>  Ich habe versucht, die folgenden Prinzipien in den Algorithmus zu integrieren: <br><br>  - Dateninitialisierung: Beim Start werden alle Variablen für den Betrieb geprüft und initiiert <br>  - Erstabfrage des Sensors: Es wird geprüft, ob der Sensor nicht ausgefallen ist (im Falle eines Ausfalls wird das Pumpenrelais für alle Fälle abgeschaltet). Die Daten werden berechnet und auf den aktuellen Druck im Kamm übertragen (Verteilungskamm, an den Nachbarn angeschlossen sind + Pumpeneinlass + Hydraulikspeicher). Wenn sich alles innerhalb des unteren und oberen eingestellten Drucks befindet, hören wir weiter zu und berechnen die Daten <br>  - Daten werden visuell auf dem Bildschirm angezeigt als: <br><br>  niedrigerer Druck - aktueller Druck - hoher Druck <br>  Druckabfallindex - [blockiert, zeigt den Druck im System an] <br><br>  Auf diese Weise können Sie schnell beurteilen, was gerade passiert. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a16/a6f/711/a16a6f7117f1602f238acc0115cba914.jpg" alt="Bild"><br><br>  - Wenn der aktuelle Druck niedriger als UNTER ist: Ein Halbleiterrelais wird um 15 A abgeschaltet (seit Jahren getestet) und die Pumpe schaltet sich ein und fördert leise, schnell und ohne Funken und Klicks Wasser.  Der obere Druck löst das Relais aus.  Die Pumpe schaltet sich niemals ein und aus, wenn überhaupt, mit Sensorwerten, die außerhalb des angemessenen Bereichs liegen.  Das ist Sicherheit. <br><br>  - Ich berechne den Druckabfallindex, wenn der halbe Druck im Kamm verbleibt und der vorherige und der aktuelle Druck alle 10 Sekunden überprüft werden. Wenn die Differenz kleiner als der Standardwert von 0,05 ist, ändert sich der aktuelle Index und die Pumpe schaltet sich ein, das heißt, die Logik ist der schnelle Wasserverbrauch und das Um die Einbeziehung der Pumpe vorherzusagen, verwende ich diese Logik.  Die Logik funktioniert bisher nicht zu 100%, da ich diesen Moment noch teste, es gibt Fehler im Zusammenhang mit dem Millis () - Timing der Arduine selbst, es stört mich ein bisschen, aber ich werde eine Lösung für eine klare Berechnung finden.  Die Logik wird zu Beginn ausgelöst, und dann sinkt der Index auf 0,01, und die Logik funktioniert nicht mehr. Dies hat jedoch keinen Einfluss auf das Ein- und Ausschalten der Pumpe.  Hier können Sie zum Thema „Die Pumpe sollte eine bestimmte Anzahl von Malen pro Stunde und nicht mehr eingeschaltet werden“ (Sie haben das Recht dazu), ich werde nicht argumentieren - dieses Thema wird analysiert. <br><br>  - Es gibt Seitentasten, mit denen Sie die NIEDRIG- und HOCH-Schwelle zum Ein- und Ausschalten der Pumpe DYNAMISCH ohne Neustart einstellen können. Schauen Sie auf den Bildschirm und drücken Sie die Seitentasten.  bequem auf!  Die Daten werden sofort in das EEPPROM geschrieben und beim Einschalten des Geräts von dort geladen (dies ist ein so konstanter Speicher zum Schreiben von Zahlen vom Typ 0 bis 255 Byte, dass dies für kleine Launen nicht ausreicht).  Es gibt jedoch einen Punkt, an dem Gleitkommazahlen so schwierig und blutend sind, dass ich einfach so entschieden habe: Da ich weiß, dass die Zahl x.x0 ein Gleitkommadruck ist, kann sie leicht in Byte umgewandelt werden, wenn Sie mit multiplizieren 10 und schreibe in den Speicher, das heißt: Beispiel: 1,80 * 10 = 18 - nach der Multiplikation verwirft die Gleitkommazahl automatisch die letzte Null und wir erhalten eine Zahl, die in den Bytetyp passt. Beim Lesen teilen wir sie durch 10,0 und erhalten die entgegengesetzte Form zum Arbeiten Unser System und Typ Float. <br><br>  - All das Gute kann außerhalb des Hauses „nur gelesen“ werden, wodurch wir die Situation mit Druck nicht nur im arteriellen Druck, sondern auch in den Rohren verstehen können! <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e04/3c9/963/e043c99632033b3dc2fe5bf4479c726f.jpg" alt="Bild"><br><br>  Nun, das ist alles, es ist vergeben, wer sich um die Details des Codes, die dummen Datentypen und die intimen Details des Ladens von Daten aus dem Speicher kümmert, überspringt dies, denn wenn er weiß, dass es Leute aus dem IT-Bereich gibt, werden sie alle möglichen Fragen stellen oder umgekehrt, lachen von meinen einfachen Algorithmen, die keine trendige AI \ ML und andere mega coole und Big-Data-Algorithmen verwenden.  Hoffentlich verstehen die Ingenieure auch andere Teile, die mit dem mechanischen Teil zusammenhängen. <br><br>  Im Allgemeinen lautet die Schlussfolgerung: Sie können alles tun, Sie können es leicht tun, tun es im Interesse, und wie einer meiner Lieblingskommentatoren einmal sagte: Sie können ein Erwachsener sein und „mit Kinderspielzeug spielen“. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/b98/8d9/760/b988d9760525a615924a2c77c37bb68f.jpg" alt="Bild"></div><br><div class="spoiler">  <b class="spoiler_title">Feldversuche</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/cn3C7iSAZ1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Ihre Kappe, Automatisierung, fähiger Kerl und einen schönen Tag für Sie! <br><br>  Unkraut: <br><br>  - Ich teste weiterhin den Druckabfallindex auf vorzeitigen Start <br>  - Arduino uno (China) - Probleme mit dem millis () - Timer sind aufgetreten - Ich werde nach Arduino nano suchen (es ist noch nie passiert, ich nehme an, ein gebogenes Modell) (ich habe es nicht verstanden, also nicht) <br>  - Der Fehler wird als 1,5% deklariert - von 1,2 Bar - dies ist 0,18 Bar - tatsächlich habe ich irgendwo 0,3 relativ zu meinem Manometer, aber ich weiß nicht, wie viel es liegt ... also erlauben 2% den maximalen Fehler - Sie können den Fehler (wie ich) in den Algorithmus eingeben und wird mehr oder weniger der Wahrheit ähnlich sein.  Starten Sie keine Satelliten - das reicht) <br><br>  <b>upd: Das</b> Preisschild in der Region von <b>15 bis</b> 18 US-Dollar wurde für das Produkt freigegeben. <br><br>  Frohes Neues Jahr!  Lassen Sie alle Ihre Pläne wahr werden, BÄDER werden gebaut, es wird WÄRME im Haus geben und Ihre ganze freundliche Familie wird bei Ihnen sein!  Möge es im neuen Jahr nur gute Nachrichten geben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408933/">https://habr.com/ru/post/de408933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408923/index.html">"Danke für die Hilfe, Genosse!" Beschleunigung der AMD Ryzen-Gaming-PCs</a></li>
<li><a href="../de408925/index.html">Steampunk Hi-Fi: eine alternative Vergangenheit für Soundgeräte</a></li>
<li><a href="../de408927/index.html">Steam akzeptierte aufgrund der hohen Volatilität der Kryptowährung keine Zahlungen in Bitcoin mehr</a></li>
<li><a href="../de408929/index.html">Die Entwickler einiger Handyspiele nutzen die Kryptowährung auf den Smartphones der Benutzer</a></li>
<li><a href="../de408931/index.html">Überprüfen Sie ASUS N580VD Notebook</a></li>
<li><a href="../de408935/index.html">Intelligente Antenne für LTE-Netzwerke</a></li>
<li><a href="../de408939/index.html">Abschlussbericht über das Mayak-Satellitenprojekt</a></li>
<li><a href="../de408941/index.html">OBD-II-Diagnosestecker als Schnittstelle für IoT</a></li>
<li><a href="../de408943/index.html">Was Langeweile einem Menschen antut: die Wissenschaft des wandernden Bewusstseins</a></li>
<li><a href="../de408945/index.html">Anonymer Bitcoin-Millionär gibt 86 Millionen US-Dollar für wohltätige Zwecke aus.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>