<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚡️ 🥡 👺 Grafikkartentreiber: Wessen Fehler? 👈🏾 ♨️ 👩🏼‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der kürzlich erschienene Artikel "Ein Fehler im Grafikkartentreiber kann das Inkognito-Surfen aufdecken " veranlasste die Vorbereitung dieses Material...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grafikkartentreiber: Wessen Fehler?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389039/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der kürzlich erschienene Artikel "Ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehler im Grafikkartentreiber kann das Inkognito-Surfen aufdecken</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " veranlasste die Vorbereitung dieses Materials </font><font style="vertical-align: inherit;">. Dieser Artikel wurde nach der Veröffentlichung der trivialen Methode zur Anzeige eines Bildes erstellt, das zu einem (einschließlich abgebrochenen) Prozess gehört und möglicherweise sogar den Anspruch hat, Informationen zu schützen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da ich zufällig auch an der Entwicklung von Grafiktreibern beteiligt bin, werde ich versuchen, kurz zu erklären, womit der Autor des ursprünglichen Fehlerberichts falsch ist, welche Verantwortung das Problem hat und wie es gelöst werden kann.</font></font><br>
<br>
<a name="habracut"></a><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unabhängig vom Betriebssystem, den zugehörigen System-APIs und Anwendungsschnittstellen für die Entwicklung von Grafikanwendungen löst ein beliebiger Grafikkartentreiber die folgenden systemweiten Aufgaben:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialisierung des Display-Controllers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einstellen des Videomodus, Verwalten der GPU-Ports, Erstellen eines / mehrerer unabhängiger Bilder, ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adressierbare Speicherverwaltung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befehlswarteschlangen, lineare / Kacheladressierung, Oberflächenzuweisung, Adressübersetzungstabellen, PCI-Aperturerweiterung, ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2D-Beschleunigung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cursor, Hardware-Ebenen, Alpha / Chroma-Tasten, ROP, Grundelemente, ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3D-Beschleunigung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL, OpenGL ES / EGL, OpenVG / EGL, OpenCL, Open *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Videodekodierung / Audiowiedergabe / EDID-Subtraktion / Bildpufferkomprimierung, ...</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Lösungsansätze für die in jeder Phase angewandten Aufgaben wurden lange Zeit auf etablierte Praktiken reduziert. </font><font style="vertical-align: inherit;">Dies erklärt nur die Reproduzierbarkeit des angegebenen Problems auf Geräten verschiedener Hersteller. </font><font style="vertical-align: inherit;">Mit Blick auf die Zukunft kann ich sagen, dass Sie einen ähnlichen Effekt auf Intel-Controller erzielen können. </font><font style="vertical-align: inherit;">Der Autor des Fehlerberichts hat im Rahmen der Lösung des Problems, bei dem der Effekt auftritt, absolut genau bestimmt - adressierbare Speicherverwaltung.</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speicherverwaltung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptentität, die der Fahrer in dieser Phase betreibt, ist die Oberfläche. Eine Oberfläche wird im Allgemeinen als kontinuierliches Video oder RAM bezeichnet, das von einer Anwendung zur Erzeugung eines Bildes verwendet wird. Für Controller, die keinen eigenen Speicher haben, kann eine aus dem RAM zugewiesene Ressource über eine Adressübersetzungstabelle (Graphics Translation Table, GTT) adressierbar werden. Andernfalls kann das Bild nur angezeigt werden, wenn die Oberfläche in den Videospeicher kopiert wird, entweder mithilfe des DMA-Controllers (falls vorhanden) oder aufgrund von CPU-Ressourcen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich steuern selbst Steuerungen mit ihrem eigenen diskreten Speicher in den meisten Fällen diesen auch über GTT, da auf diese Weise in Analogie zum TLB des Zentralprozessors ein virtueller Adressraum erstellt werden kann, um eine lineare oder Kacheladressierung bereitzustellen. </font><font style="vertical-align: inherit;">Die Adressierungsmethode bestimmt jeweils den Treiber und es gibt keinen grundsätzlichen Unterschied zwischen ihnen im Rahmen dieses Artikels.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel für die Kacheladressierung im Videospeicher aus dem Quellartikel</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/185/25e/551/18525e551094433f950686a295500018.png" alt="Bild"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Grafikcontroller-Treiber ist die Schnittstelle für das Betriebssystem zur GPU-Funktionalität, nichts weiter. </font><font style="vertical-align: inherit;">Alle Aufgaben zur Gewährleistung des Informationsschutzes sind jeder dafür zuständigen höheren Ebene zugeordnet. </font><font style="vertical-align: inherit;">Dafür verfügen die Treiber über alle verfügbaren Funktionen, es besteht der Wunsch, diese zu nutzen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf Anfrage eines Client-Treibers reserviert das Betriebssystem eine Reihe von Oberflächen dafür (weist sie zu). Da nach Angaben des Autors eine Fragmentierung des Bildes relativ selten ist, können wir argumentieren, dass die Kacheladressierung in diesen Fällen nicht häufig verwendet wird. Bei der linearen Adressierung ist jede Oberfläche hauptsächlich durch einen Versatz vom Beginn des virtuellen Adressraums des Controller-Speichers gekennzeichnet. Bei der Zuweisung von Speicher gibt der Treiber dem Betriebssystem genau diesen Offset zurück, der einem freien Speicherblock entspricht, der die Oberfläche mit den von der Anwendungssoftware angeforderten Eigenschaften aufnehmen kann. In diesem Fall führt der Treiber nur die folgenden Aktionen aus: Ändert GTT für die weitere Verwendung virtueller Speicherseiten, überwacht die Einhaltung der Anforderungen für die Ausrichtung physischer Adressen;definiert den Mechanismus des Zugriffs von Anwendungssoftware auf die Oberfläche (PCI / GPU-Apertur, durch physikalische Adresse außerhalb der Apertur, GTT-Erweiterung im laufenden Betrieb), reserviert einen Teil des Speichers für seine eigenen Bedürfnisse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basierend auf dem Vorstehenden können wir schließen, dass mit Informationen über die Gesamtmenge des verfügbaren Reglerspeichers und die erforderlichen Oberflächeneigenschaften die Versatzbestimmung für alle Regler einheitlich gelöst werden kann. </font><font style="vertical-align: inherit;">In der Praxis ist dies der Fall (basierend auf den Erfahrungen mit verschiedenen Unix-ähnlichen Betriebssystemen): Das Betriebssystem bietet einen Systemdienst / eine Systembibliothek, in der eine Liste bereits verwendeter Speicherblöcke gespeichert ist, und ermöglicht es Ihnen, schnell den ersten verfügbaren Offset für die logische Sicherung in dieser Bibliothek zu berechnen. </font><font style="vertical-align: inherit;">Gleichzeitig ermöglicht das Betriebssystem mit Informationen vom Treiber über den Mechanismus des Zugriffs auf den Speicherblock im Allgemeinen, dass Anwendungssoftware an denselben physischen Adressen von gemeinsam genutzten / sich überschneidenden Oberflächen gebildet wird.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Fahrer die Oberflächen nicht explizit steuert, wie wird dann die Beschleunigung implementiert?</font></font></b><div class="spoiler_text">  .  -  , ,           ( ),        .<br>
<br>
     ( )   ,      ( ),         .<br>
</div></div><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zurück zum ursprünglichen Problem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sicherlich haben zu diesem Zeitpunkt viele bereits erraten, worauf es bei der Kritik ankommt. </font><font style="vertical-align: inherit;">Bei der Ausführung verschiedener Anwendungen fragt das Betriebssystem nach der Oberfläche des Grafiktreibers für deren Anforderungen und verwendet sie erneut, sobald der Speicher frei wird (Prozessbeendigung). </font><font style="vertical-align: inherit;">Gleichzeitig kann der Treiber nicht erkennen, dass ein Speicherblock sofort zurückgesetzt werden muss, da er bestimmte Sicherheitsanforderungen hat und keine anderen Links enthält. </font><font style="vertical-align: inherit;">Das Nullstellen des Speichers selbst ist eine triviale Aufgabe der Hardware, die ein Rechteck ausfüllt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich ist der Test, der zum Veröffentlichen des Fehlerberichts geschrieben wurde, redundant. </font><font style="vertical-align: inherit;">Im allgemeinen Fall (wenn der Videospeicher in eine PCI / GPU-Öffnung passt) sind für Unix-ähnliche Systeme keine Anwendungs-APIs erforderlich. </font><font style="vertical-align: inherit;">Es reicht aus, / dev / mem über den Offset zu kontaktieren, der aus der Ausgabe des Dienstprogramms "lspci" bekannt ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Intel-Controllern ist die Situation anders, aber nicht viel. </font><font style="vertical-align: inherit;">Da der Controller keinen eigenen Speicher hat, wird GTT im laufenden Betrieb mit der Zuweisung von Speicher aus dem RAM gebildet. </font><font style="vertical-align: inherit;">Bei der Neuzuweisung der Oberfläche ist die tatsächliche Position des RAM-Blocks möglicherweise nicht zufriedenstellend, da in diesem Fall der virtuelle Adressierungsmechanismus des Betriebssystems bereits eine entscheidende Rolle spielt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt mehrere Lösungen, und ich glaube, dass die Schlussfolgerungen offensichtlich sein werden:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle Hersteller von Treibern müssen redundante Funktionen zum Speichern von Informationen über vorhandene Oberflächen implementieren (die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frage der Steuerung gemeinsam genutzter Oberflächen bleibt offen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Betriebssystem muss überwachen, ob diese oder jene Anwendung aufgeräumt werden muss ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dies ist entweder eine bestimmte Markierung der geschützten Oberflächen oder eine übermäßige Nullstellung von Oberflächen sowohl im RAM als auch im Videospeicher</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungssoftware sollte nach sich selbst korrekt bereinigen, da sie behauptet, an der Informationssicherheit beteiligt zu sein.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoffe die Notiz war interessant.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de389039/">https://habr.com/ru/post/de389039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de389025/index.html">Kompakter USB-Port-Expander zum Aufladen</a></li>
<li><a href="../de389029/index.html">RealSense für Dummies. Heimtests</a></li>
<li><a href="../de389031/index.html">Ford bringt unbemannten Autos bei, im Schnee zu fahren</a></li>
<li><a href="../de389033/index.html">John Chen bestätigt, dass BlackBerry-Updates 2016 veröffentlicht werden</a></li>
<li><a href="../de389035/index.html">DIY Buchscanner</a></li>
<li><a href="../de389041/index.html">Everykey: der universelle Schlüssel zu Ihren Geräten</a></li>
<li><a href="../de389043/index.html">Speichermedienentwicklung Teil 4: Solid State Drives</a></li>
<li><a href="../de389045/index.html">Elon Musk hat keine Angst vor Apples Elektroauto: Rivalität wird für die Branche nützlich sein</a></li>
<li><a href="../de389049/index.html">Настраиваем ИК управление кондиционером с гаджетов или «Готовь телегу летом»</a></li>
<li><a href="../de389051/index.html">CNET Smart Home: Testfeld für Gadgets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>