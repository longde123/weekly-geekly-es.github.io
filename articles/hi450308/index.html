<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСйЁЯП╜тАНЁЯдЭтАНЁЯСйЁЯП╗ ЁЯПй тЪУя╕П рдПрдХрддрд╛ рдореЗрдВ GPU рд░реЗ рдЯреНрд░реЗрд╕рд┐рдВрдЧ - рднрд╛рдЧ 3 ЁЯСиЁЯП╝тАНЁЯОУ ЁЯНП ЁЯЧУя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[ рдкрд╣рд▓рд╛ рдФрд░ рджреВрд╕рд░рд╛ рднрд╛рдЧред] 


 рдЖрдЬ рд╣рдо рдПрдХ рдмрдбрд╝реА рдЫрд▓рд╛рдВрдЧ рд▓рдЧрд╛рдПрдВрдЧреЗред рд╣рдо рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЧреЛрд▓рд╛рдХрд╛рд░ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдФрд░ рдЕрдирдВрдд рд╡рд┐рдорд╛рди рд╕реЗ рджреВрд░ рдЪрд▓реЗ рдЬрд╛рдПрдВрдЧреЗ рдЬреЛ рд╣рдордиреЗ рдкрд╣рд▓реЗ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдерд╛, рдФрд░ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХрддрд╛ рдореЗрдВ GPU рд░реЗ рдЯреНрд░реЗрд╕рд┐рдВрдЧ - рднрд╛рдЧ 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450308/">  [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╣рд▓рд╛</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреВрд╕рд░рд╛</a> рднрд╛рдЧред] <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9f/a8a/4f2/f9fa8a4f2a79b8c394636de6a128d0d5.png"></div><br>  рдЖрдЬ рд╣рдо рдПрдХ рдмрдбрд╝реА рдЫрд▓рд╛рдВрдЧ рд▓рдЧрд╛рдПрдВрдЧреЗред  рд╣рдо рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЧреЛрд▓рд╛рдХрд╛рд░ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдФрд░ рдЕрдирдВрдд рд╡рд┐рдорд╛рди рд╕реЗ рджреВрд░ рдЪрд▓реЗ рдЬрд╛рдПрдВрдЧреЗ рдЬреЛ рд╣рдордиреЗ рдкрд╣рд▓реЗ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдерд╛, рдФрд░ рддреНрд░рд┐рдХреЛрдг рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ - рдЖрдзреБрдирд┐рдХ рдХрдВрдкреНрдпреВрдЯрд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдХрд╛ рдкреВрд░рд╛ рд╕рд╛рд░, рдПрдХ рддрддреНрд╡ рдЬрд┐рд╕рдореЗрдВ рд╕рднреА рдЖрднрд╛рд╕реА рджреБрдирд┐рдпрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдпрджрд┐ рдЖрдк рдкрд┐рдЫрд▓реА рдмрд╛рд░ рдЬреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рдЪреБрдХреЗ рд╣реИрдВ рдЙрд╕реЗ рдЬрд╛рд░реА рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 2 рд╕реЗ рдХреЛрдб рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдЖрдЬ рд╣рдо рдЬреЛ рдХрд░реЗрдВрдЧреЗ рдЙрд╕рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдЙрдкрд▓рдмреНрдз <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред  рдЪрд▓реЛ рд╢реБрд░реВ рд╣реЛ рдЬрд╛рдУ! <br><br><h2>  рддреНрд░рд┐рдХреЛрдг </h2><br>  <em>рдПрдХ рддреНрд░рд┐рдХреЛрдг</em> рдХреЗрд╡рд▓ рддреАрди рдЬреБрдбрд╝реЗ рд╣реБрдП <em>рдХреЛрдиреЗ</em> рдХреА рдПрдХ рд╕реВрдЪреА рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЕрдкрдиреА рд╕реНрдерд┐рддрд┐ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдХрднреА-рдХрднреА рд╕рд╛рдорд╛рдиреНрдп рд╣реЛрддрд╛ рд╣реИред  рдЖрдкрдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдХреЛрдиреЗ рдХреЗ рдЯреНрд░реИрд╡рд░реНрд╕рд▓ рдХрд╛ рдХреНрд░рдо рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдХреНрдпрд╛ рджреЗрдЦ рд░рд╣реЗ рд╣реИрдВ - рддреНрд░рд┐рдХреЛрдг рдХреЗ рд╕рд╛рдордиреЗ рдпрд╛ рдкреАрдЫреЗ рдХреА рддрд░рдлред  рдкрд░рдВрдкрд░рд╛рдЧрдд рд░реВрдк рд╕реЗ, "рд╕рд╛рдордиреЗ" рдХреЛ рд╡рд╛рдорд╛рд╡рд░реНрдд рдкрд╛рд░рдЧрдорди рдХреНрд░рдо рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдХрд┐рд░рдг рдПрдХ рддреНрд░рд┐рднреБрдЬ рдХреЛ рдХрд╛рдЯрддреА рд╣реИ, рдФрд░ рдпрджрд┐ рд╣рд╛рдВ, рддреЛ рдХрд┐рд╕ рдмрд┐рдВрджреБ рдкрд░ред  1997 рдореЗрдВ рдПрдХ рддреНрд░рд┐рднреБрдЬ рдХреЗ рд╕рд╛рде рдПрдХ рдХрд┐рд░рдг рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╣реБрдд рд▓реЛрдХрдкреНрд░рд┐рдп (рд▓реЗрдХрд┐рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдирд╣реАрдВ</a> ) рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЛ 1997 рдореЗрдВ рд╕рдЬреНрдЬрди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдорд╛рдирд┐рди-рдореЗрд▓рд░</a> рдФрд░ рдмреЗрди рдЯреНрд░реЗрдордмреЛрд░ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЖрдк рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЙрдирдХреЗ рд▓реЗрдЦ "рдлрд╛рд╕реНрдЯ, рдорд┐рдирд┐рдордо рд╕реНрдЯреЛрд░реЗрдЬ рд░реЗ-рдЯреНрд░рд╛рдПрдВрдЧрд▓ рдЗрдВрдЯрд░рд╕реЗрдХреНрд╢рди" рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><a name="habracut"></a><br>  рд▓реЗрдЦ рдХреЗ рдХреЛрдб рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ HLSL shader рдХреЛрдб рдореЗрдВ рдкреЛрд░реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> EPSILON = <span class="hljs-number"><span class="hljs-number">1e-8</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntersectTriangle_MT97</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ray ray, float3 vert0, float3 vert1, float3 vert2, inout </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> t, inout </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> u, inout </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// find vectors for two edges sharing vert0 float3 edge1 = vert1 - vert0; float3 edge2 = vert2 - vert0; // begin calculating determinant - also used to calculate U parameter float3 pvec = cross(ray.direction, edge2); // if determinant is near zero, ray lies in plane of triangle float det = dot(edge1, pvec); // use backface culling if (det &lt; EPSILON) return false; float inv_det = 1.0f / det; // calculate distance from vert0 to ray origin float3 tvec = ray.origin - vert0; // calculate U parameter and test bounds u = dot(tvec, pvec) * inv_det; if (u &lt; 0.0 || u &gt; 1.0f) return false; // prepare to test V parameter float3 qvec = cross(tvec, edge1); // calculate V parameter and test bounds v = dot(ray.direction, qvec) * inv_det; if (v &lt; 0.0 || u + v &gt; 1.0f) return false; // calculate t, ray intersects triangle t = dot(edge2, qvec) * inv_det; return true; }</span></span></code> </pre> <br>  рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рддреНрд░рд┐рдХреЛрдг рдХреА рдХрд┐рд░рдг рдФрд░ рддреАрди рдХреЛрдиреЗ рдЪрд╛рд╣рд┐рдПред  рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рд╣рдореЗрдВ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рддреНрд░рд┐рдХреЛрдг рдЗрдВрдЯрд░рд╕реЗрдХреНрдЯреЗрдб рд╣реИред  рдЪреМрд░рд╛рд╣реЗ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рддреАрди рдЕрддрд┐рд░рд┐рдХреНрдд рдорд╛рдиреЛрдВ рдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ: <code>t</code> рдмреАрдо рдХреЗ рд╕рд╛рде рдЪреМрд░рд╛рд╣реЗ рдмрд┐рдВрджреБ рддрдХ рдХреА рджреВрд░реА рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ, рдФрд░ <code>u</code> / <code>v</code> рддреНрд░рд┐рднреБрдЬ рдкрд░ рдЪреМрд░рд╛рд╣реЗ рдмрд┐рдВрджреБ рдХреЗ рд╕реНрдерд╛рди рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рддреАрди рдмрд╛рдпрд░рд╕реЗрдВрдЯреНрд░рд┐рдХ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдореЗрдВ рд╕реЗ рджреЛ рд╣реИрдВ (рдЕрдВрддрд┐рдо рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреА рдЧрдгрдирд╛ <code>w = 1 - u - v</code> ) рдХреЗ рд░реВрдк рдореЗрдВ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рдпрджрд┐ рдЖрдк рдЕрднреА рддрдХ barycentric рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдирд╣реАрдВ рд╣реИрдВ, рддреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Scratchapixel</a> рдкрд░ рдЙрдирдХреА рдЙрддреНрдХреГрд╖реНрдЯ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдкрдврд╝реЗрдВред <br><br>  рдмрд╣реБрдд рдЕрдзрд┐рдХ рджреЗрд░реА рдХреЗ рдмрд┐рдирд╛, рдЪрд▓реЛ рдПрдХ рддреНрд░рд┐рдХреЛрдг рдХреЛ рдХреЛрдб рдореЗрдВ рджрд░реНрд╢рд╛рдП рдЧрдП рдХреЛрдиреЗ рдХреЗ рд╕рд╛рде рдЯреНрд░реЗрд╕ рдХрд░реЗрдВ!  рд╢реЗрдб рдореЗрдВ <code>Trace</code> рдлрд╝рдВрдХреНрд╢рди рдвреВрдВрдвреЗрдВ рдФрд░ рдЗрд╕рдореЗрдВ рдирд┐рдореНрди рдХреЛрдб рдЯреБрдХрдбрд╝рд╛ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Trace single triangle float3 v0 = float3(-150, 0, -150); float3 v1 = float3(150, 0, -150); float3 v2 = float3(0, 150 * sqrt(2), -150); float t, u, v; if (IntersectTriangle_MT97(ray, v0, v1, v2, t, u, v)) { if (t &gt; 0 &amp;&amp; t &lt; bestHit.distance) { bestHit.distance = t; bestHit.position = ray.origin + t * ray.direction; bestHit.normal = normalize(cross(v1 - v0, v2 - v0)); bestHit.albedo = 0.00f; bestHit.specular = 0.65f * float3(1, 0.4f, 0.2f); bestHit.smoothness = 0.9f; bestHit.emission = 0.0f; } }</span></span></code> </pre> <br>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдХрд╣рд╛, рдмреАрдо рдХреЗ рд╕рд╛рде рджреВрд░реА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╣рдо рд╕реАрдзреЗ рдЗрд╕ рдорд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдЪреМрд░рд╛рд╣реЗ рдХреЗ рдмрд┐рдВрджреБ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рд╛рдорд╛рдиреНрдп, рдЬреЛ рд╕рд╣реА рдкреНрд░рддрд┐рдмрд┐рдВрдм рдХреА рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рддреНрд░рд┐рдХреЛрдг рдХреЗ рдХрд┐рд╕реА рднреА рджреЛ рдХрд┐рдирд╛рд░реЛрдВ рдХреЗ рд╡реЗрдХреНрдЯрд░ рдЙрддреНрдкрд╛рдж рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЧрдгрдирд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рдЧреЗрдо рдореЛрдб рд▓реЙрдиреНрдЪ рдХрд░реЗрдВ рдФрд░ рдЕрдкрдиреЗ рдкрд╣рд▓реЗ рдЯреНрд░реЗрд╕ рддреНрд░рд┐рдХреЛрдг рдХреА рдкреНрд░рд╢рдВрд╕рд╛ рдХрд░реЗрдВ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b29/65a/a84/b2965aa84ae9d882e6c26f7f44da2af7.png"></div><br>  <strong>рд╡реНрдпрд╛рдпрд╛рдо:</strong> рджреВрд░реА рдХреЗ рдмрдЬрд╛рдп рдмреИрд░рд┐рдПрдЯреНрд░рд┐рдХ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд┐рддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдпрджрд┐ рдЖрдк рд╕рдм рдХреБрдЫ рд╕рд╣реА рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЪрдордХрджрд╛рд░ рддреНрд░рд┐рдХреЛрдг рдкрд╣рд▓реЗ рдХреА рддрд░рд╣ рд╣реА рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред <br><br><h2>  рддреНрд░рд┐рднреБрдЬ рдореЗрд╖ </h2><br>  рд╣рдордиреЗ рдкрд╣рд▓реА рдмрд╛рдзрд╛ рдХреЛ рдкрд╛рд░ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рддреНрд░рд┐рдХреЛрдг рд╕реЗ рдкреВрд░реЗ рдЬрд╛рд▓ рдХреЛ рдЯреНрд░реЗрд╕ рдХрд░рдирд╛ рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд▓рдЧ рдХрд╣рд╛рдиреА рд╣реИред  рдкрд╣рд▓реЗ рд╣рдореЗрдВ рдореЗрд╢ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдмреБрдирд┐рдпрд╛рджреА рдЬрд╛рдирдХрд╛рд░реА рд╕реАрдЦрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдпрджрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЕрдЧрд▓реЗ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдХрдВрдкреНрдпреВрдЯрд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдореЗрдВ, рдореЗрд╖ рдХреЛ рдХрдИ рдмрдлрд╝рд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг <em>рд╢реАрд░реНрд╖</em> рдФрд░ <em>рд╕реВрдЪрдХрд╛рдВрдХ</em> рдмрдлрд╝рд░ рд╣реИрдВред  <em>рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд░</em> <em>, рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдкреЗрд╕</em> рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЯреЗрдХреНрд╕ рдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ 3 рдбреА рд╡реИрдХреНрдЯрд░ рдХреА рдПрдХ рд╕реВрдЪреА <em>рд╣реИ</em> (рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ <em>рдСрдмреНрдЬреЗрдХреНрдЯ</em> рдХреЛ рд▓реЗ рдЬрд╛рдиреЗ, рдШреБрдорд╛рдиреЗ рдпрд╛ рд╕реНрдХреЗрд▓ рдХрд░рдиреЗ рдкрд░ рдРрд╕реЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рд╡реЗ рдореИрдЯреНрд░рд┐рдХреНрд╕ рдЧреБрдгрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдордХреНрдЦреА рдкрд░ <em>рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдкреЗрд╕</em> рд╕реЗ <em>рд╡рд░реНрд▓реНрдб рд╕реНрдкреЗрд╕ рдореЗрдВ</em> рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ) ред  <em>рдПрдХ рдЗрдВрдбреЗрдХреНрд╕ рдмрдлрд░</em> рдкреВрд░реНрдгрд╛рдВрдХ рдорд╛рдиреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реИ рдЬреЛ <em>рдЗрдВрдбреЗрдХреНрд╕ рд╣реИрдВ</em> рдЬреЛ рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд░ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд╣рд░ рддреАрди рдЗрдВрдбреЗрдХреНрд╕ рдПрдХ рддреНрд░рд┐рдХреЛрдг рдмрдирд╛рддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рд╕реВрдЪрдХрд╛рдВрдХ рдмрдлрд░ [0, 1, 2, 0, 2, 3] рд╣реИ, рддреЛ рдЗрд╕рдореЗрдВ рджреЛ рддреНрд░рд┐рдХреЛрдг рд╣реИрдВ: рдкрд╣рд▓реЗ рддреНрд░рд┐рдХреЛрдг рдореЗрдВ рд╢реАрд░реНрд╖ рдмрдлрд░ рдореЗрдВ рдкрд╣рд▓реЗ, рджреВрд╕рд░реЗ рдФрд░ рддреАрд╕рд░реЗ рдХреЛрдиреЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдФрд░ рджреВрд╕рд░реЗ рддреНрд░рд┐рдХреЛрдг рдореЗрдВ рдкрд╣рд▓реЗ, рддреАрд╕рд░реЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдФрд░ рдЪреМрдерд╛ рд╢рд┐рдЦрд░ред  рдЗрд╕рд▓рд┐рдП, рд╕реВрдЪрдХрд╛рдВрдХ рдмрдлрд░ рднреА рдкреВрд░реНрд╡реЛрдХреНрдд рдЯреНрд░реИрд╡рд░реНрд╕рд▓ рдСрд░реНрдбрд░ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд╝рд░реНрд╕ рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрддрд┐рд░рд┐рдХреНрдд рдмрдлрд╝рд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЯреЗрдХреНрд╕ рдореЗрдВ рдЕрдиреНрдп рдЬрд╛рдирдХрд╛рд░реА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдЖрдо рдЕрддрд┐рд░рд┐рдХреНрдд рдмрдлрд╝рд░ <em>рдорд╛рдирджрдВрдб</em> , <em>рдмрдирд╛рд╡рдЯ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ</em> (рдЬрд┐рд╕реЗ <em>рдЯреЗрдХреНрд╕рдХреЛрд░реНрдбреНрд╕</em> рдпрд╛ рдмрд╕ <em>рдпреВрд╡реА</em> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ), рд╕рд╛рде рд╣реА <em>рд╢реАрд░реНрд╖ рд░рдВрдЧ рднреА</em> рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреЗ <em>рд╣реИрдВ</em> ред <br><br><h2>  GameObjects рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h2><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреМрди рд╕реЗ рдЧреЗрдо рдСрдмрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд░реЗ рдЯреНрд░реЗрд╕рд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдмрдирдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдХ рднреЛрд▓рд╛ рд╕рдорд╛рдзрд╛рди рдХреЗрд╡рд▓ <code>FindObjectOfType&lt;MeshRenderer&gt;()</code> рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдХреБрдЫ рдЕрдзрд┐рдХ рд▓рдЪреАрд▓рд╛ рдФрд░ рддреЗрдЬрд╝ рдХрд░реЗрдВред  рдЖрдЗрдП рдПрдХ рдирдпрд╛ <code>RayTracingObject</code> рдШрдЯрдХ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [RequireComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(MeshRenderer))] [RequireComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(MeshFilter))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RayTracingObject</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RayTracingMaster.RegisterObject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDisable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RayTracingMaster.UnregisterObject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br>  рдпрд╣ рдШрдЯрдХ рдкреНрд░рддреНрдпреЗрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдХрд┐рд░рдг рдЕрдиреБрд░реЗрдЦрдг рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ <code>RayTracingMaster</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдирдХреЗ рдкрдВрдЬреАрдХрд░рдг рдореЗрдВ рд▓рдЧреЗ рд╣реБрдП рд╣реИрдВред  рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдореЗрдВ рдирд┐рдореНрди рдХрд╛рд░реНрдп рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;RayTracingObject&gt; _rayTracingObjects = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;RayTracingObject&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RayTracingObject obj</span></span></span><span class="hljs-function">)</span></span> { _rayTracingObjects.Add(obj); _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnregisterObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RayTracingObject obj</span></span></span><span class="hljs-function">)</span></span> { _rayTracingObjects.Remove(obj); _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  рд╕рдм рдХреБрдЫ рдареАрдХ рдЪрд▓ рд░рд╣рд╛ рд╣реИ - рдЕрдм рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХрд┐рди рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдлрд┐рд░ рдореБрд╢реНрдХрд┐рд▓ рд╣рд┐рд╕реНрд╕рд╛ рдЖрддрд╛ рд╣реИ: рд╣рдо рдпреВрдирд┐рдЯреА рдореЗрд╢ (рдореИрдЯреНрд░рд┐рдХреНрд╕, рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд╝рд░реНрд╕ рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ - рдЙрдиреНрд╣реЗрдВ рдпрд╛рдж рд░рдЦреЗрдВ?) рд╕реЗ рд╕рднреА рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рд╣рдорд╛рд░реА рдЦреБрдж рдХреА рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ GPU рдореЗрдВ рд▓реЛрдб рдХрд░реЗрдВ рддрд╛рдХрд┐ shader рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗред  рдЖрдЗрдП рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдореЗрдВ рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдФрд░ рдмрдлрд╝рд░реНрд╕ рдХреЛ C # рд╕рд╛рдЗрдб рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдХреЗ рд╢реБрд░реВ рдХрд░реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> MeshObject { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Matrix4x4 localToWorldMatrix; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_offset; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_count; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;MeshObject&gt; _meshObjects = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;MeshObject&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Vector3&gt; _vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Vector3&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _indices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ComputeBuffer _meshObjectBuffer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ComputeBuffer _vertexBuffer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ComputeBuffer _indexBuffer;</code> </pre> <br>  ... рдФрд░ рдЕрдм рд╣рдо рднреА рдпрд╣реА рдХрд░рддреЗ рд╣реИрдВред  рдХреНрдпрд╛ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЖрджрдд рд╣реИ? <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeshObject</span></span></span><span class="hljs-class"> {</span></span> float4x4 localToWorldMatrix; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_offset; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_count; }; StructuredBuffer&lt;MeshObject&gt; _MeshObjects; StructuredBuffer&lt;float3&gt; _Vertices; StructuredBuffer&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _Indices;</code> </pre> <br>  рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдПрдВ рддреИрдпрд╛рд░ рд╣реИрдВ, рдФрд░ рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдбреЗрдЯрд╛ рд╕реЗ рднрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рд╕рднреА рдореЗрд╖реЛрдВ рдХреЗ рд╕рднреА рд╢реАрд░реНрд╖реЛрдВ рдХреЛ рдПрдХ рдмрдбрд╝реА <code>List&lt;Vector3&gt;</code> рдореЗрдВ рдЗрдХрдЯреНрдард╛ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╕рднреА рдЕрдиреБрдХреНрд░рдорд┐рдд рдмрдбрд╝реА <code>List&lt;int&gt;</code> ред  рд╢реАрд░реНрд╖рдХреЛрдВ рдХреЗ рд╕рд╛рде рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╡реЗ рд╣рдорд╛рд░реЗ рдмрдбрд╝реЗ рдмрдлрд░ рдореЗрдВ рд╕рд╣реА рд╢реАрд░реНрд╖ рдкрд░ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд░рд╣реЗрдВред  рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА 1000 рдХреЛрдиреЗ рд╕реЗ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдЬреЛрдбрд╝рд╛ рд╣реИ, рдФрд░ рдЕрдм рд╣рдо рдПрдХ рд╕рд░рд▓ рдЬрд╛рд▓ рдХреНрдпреВрдм рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдкрд╣рд▓реЗ рддреНрд░рд┐рдХреЛрдг рдореЗрдВ рд╕реВрдЪрдХрд╛рдВрдХ [0, 1, 2] рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрдлрд░ рдореЗрдВ 1000 рдХреЛрдиреЗ рдереЗ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдШрди рдореЗрдВ рдХреЛрдиреЗ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣реА рд╣реИ, рд╡реЗ [1000, 1001, 1002] рдореЗрдВ рдмрджрд▓ рдЬрд╛рдПрдВрдЧреЗред  рдпрд╣рд╛рдБ рдХреЛрдб рдореЗрдВ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RebuildMeshObjectBuffers</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_meshObjectsNeedRebuilding) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; _currentSample = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Clear all lists _meshObjects.Clear(); _vertices.Clear(); _indices.Clear(); // Loop over all objects and gather their data foreach (RayTracingObject obj in _rayTracingObjects) { Mesh mesh = obj.GetComponent&lt;MeshFilter&gt;().sharedMesh; // Add vertex data int firstVertex = _vertices.Count; _vertices.AddRange(mesh.vertices); // Add index data - if the vertex buffer wasn't empty before, the // indices need to be offset int firstIndex = _indices.Count; var indices = mesh.GetIndices(0); _indices.AddRange(indices.Select(index =&gt; index + firstVertex)); // Add the object itself _meshObjects.Add(new MeshObject() { localToWorldMatrix = obj.transform.localToWorldMatrix, indices_offset = firstIndex, indices_count = indices.Length }); } CreateComputeBuffer(ref _meshObjectBuffer, _meshObjects, 72); CreateComputeBuffer(ref _vertexBuffer, _vertices, 12); CreateComputeBuffer(ref _indexBuffer, _indices, 4); }</span></span></code> </pre> <br>  рд╣рдо <code>RebuildMeshObjectBuffers</code> рдореЗрдВ <code>RebuildMeshObjectBuffers</code> рдХрд╣рддреЗ рд╣реИрдВ, рдФрд░ <code>OnDisable</code> рдореЗрдВ рдирдП рдмрдлрд╝рд░реНрд╕ рдХреЛ рдореБрдХреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛ред  рдпрд╣рд╛рдБ рджреЛ рд╕рд╣рд╛рдпрдХ рдХрд╛рд░реНрдп рд╣реИрдВ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдореИрдВрдиреЗ рдКрдкрд░ рдХреЗ рдХреЛрдб рдореЗрдВ рдмрдлрд░ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рд╣реИ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CreateComputeBuffer&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ComputeBuffer buffer, List&lt;T&gt; data, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> stride) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Do we already have a compute buffer? if (buffer != null) { // If no data or buffer doesn't match the given criteria, release it if (data.Count == 0 || buffer.count != data.Count || buffer.stride != stride) { buffer.Release(); buffer = null; } } if (data.Count != 0) { // If the buffer has been released or wasn't there to // begin with, create it if (buffer == null) { buffer = new ComputeBuffer(data.Count, stride); } // Set data on the buffer buffer.SetData(data); } } private void SetComputeBuffer(string name, ComputeBuffer buffer) { if (buffer != null) { RayTracingShader.SetBuffer(0, name, buffer); } }</span></span></code> </pre> <br>  рдорд╣рд╛рди, рд╣рдордиреЗ рдмрдлрд╝рд░реНрд╕ рдмрдирд╛рдП рдФрд░ рд╡реЗ рдЖрд╡рд╢реНрдпрдХ рдбреЗрдЯрд╛ рд╕реЗ рднрд░реЗ рд╣реИрдВ!  рдЕрдм рд╣рдореЗрдВ рд╕рд┐рд░реНрдл рдЗрд╕ shader рдХреЛ рд░рд┐рдкреЛрд░реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдирд┐рдореНрди рдХреЛрдб <code>SetShaderParameters</code> рдЬреЛрдбрд╝реЗрдВ (рдФрд░ рдирдП рд╕рд╣рд╛рдпрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рд╣рдо рдЧреЛрд▓реЗ рдмрдлрд░ рдХреЗ рдХреЛрдб рдХреЛ рдХрдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ): <br><br><pre> <code class="cs hljs">SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_Spheres"</span></span>, _sphereBuffer); SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_MeshObjects"</span></span>, _meshObjectBuffer); SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_Vertices"</span></span>, _vertexBuffer); SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_Indices"</span></span>, _indexBuffer);</code> </pre> <br>  рддреЛ, рдХрд╛рдо рдЙрдмрд╛рдК рд╣реИ, рд▓реЗрдХрд┐рди рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдордиреЗ рдЕрднреА рдХреНрдпрд╛ рдХрд┐рдпрд╛: рд╣рдордиреЗ рдореЗрд╖реЛрдВ (рдореИрдЯреНрд░рд┐рдХреНрд╕, рдХреЛрдиреЗ рдФрд░ рдЕрдиреБрдХреНрд░рдорд┐рдд) рдХреЗ рд╕рднреА рдЖрдВрддрд░рд┐рдХ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд┐рдП, рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдФрд░ рд╕рд░рд▓ рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рд░рдЦрд╛, рдФрд░ рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ GPU рдкрд░ рднреЗрдЬ рджрд┐рдпрд╛, рдЬреЛ рдЕрдм рдЖрдЧреЗ рджреЗрдЦрддрд╛ рд╣реИ рдХрд┐ рдХрдм рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><h2>  рдореЗрд╖ рдЕрдиреБрд░реЗрдЦрдг </h2><br>  рдЪрд▓реЛ рдЙрд╕реЗ рдЗрдВрддрдЬрд╛рд░ рдирд╣реАрдВ рд╣реИред  рд╢реЗрдбрд░ рдореЗрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд╡реНрдпрдХреНрддрд┐рдЧрдд рддреНрд░рд┐рдХреЛрдг рдХрд╛ рдЯреНрд░реЗрд╕ рдХреЛрдб рд╣реИ, рдФрд░ рдореЗрд╖ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдмрд╣реБрдд рд╕рд╛рд░реЗ рддреНрд░рд┐рдХреЛрдг рд╣реИрдВред  рдпрд╣рд╛рдБ рдХреЗрд╡рд▓ рдПрдХ рдирдпрд╛ рдкрд╣рд▓реВ рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдореИрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдкреЗрд╕ рд╕реЗ рд╡рд░реНрд▓реНрдб рд╕реНрдкреЗрд╕ рдореЗрдВ рдмрд┐рд▓реНрдЯ-рдЗрди <code>mul</code> рдлрдВрдХреНрд╢рди (рдорд▓реНрдЯреАрдкреНрд▓ рдХреЗ рд▓рд┐рдП рдЫреЛрдЯрд╛) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВред  рдореИрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЕрдиреБрд╡рд╛рдж, рд░реЛрдЯреЗрд╢рди рдФрд░ рд╕реНрдХреЗрд▓ рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдЖрдХрд╛рд░ 4 ├Ч 4 рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЧреБрдгрди рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ 4d рд╡реЗрдХреНрдЯрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдкрд╣рд▓реЗ рддреАрди рдШрдЯрдХ (x, y, z) рдХреЛ рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрдлрд░ рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╣рдо рдЪреМрдереЗ рдШрдЯрдХ (рдбрдмреНрд▓реНрдпреВ) рдХреЛ 1 рдкрд░ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдПрдХ рдмрд┐рдВрджреБ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдпрджрд┐ рдпрд╣ рджрд┐рд╢рд╛ рдереА, рддреЛ рд╣рдо рдореИрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╕рднреА рдЕрдиреБрд╡рд╛рдж рдФрд░ рдкреИрдорд╛рдиреЗ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдореЗрдВ 0 рд▓рд┐рдЦреЗрдВрдЧреЗред  рдХреНрдпрд╛ рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП рднреНрд░рд╛рдордХ рд╣реИ?  рдлрд┐рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓</a> рдХреЛ рдХрдо рд╕реЗ рдХрдо рдЖрда рдмрд╛рд░ рдкрдврд╝реЗрдВред  рдпрд╣рд╛рдБ shader рдХреЛрдб рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntersectMeshObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ray ray, inout RayHit bestHit, MeshObject meshObject)</span></span></span><span class="hljs-function"> </span></span>{ uint offset = meshObject.indices_offset; uint count = offset + meshObject.indices_count; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (uint i = offset; i &lt; count; i += <span class="hljs-number"><span class="hljs-number">3</span></span>) { float3 v0 = (mul(meshObject.localToWorldMatrix, float4(_Vertices[_Indices[i]], <span class="hljs-number"><span class="hljs-number">1</span></span>))).xyz; float3 v1 = (mul(meshObject.localToWorldMatrix, float4(_Vertices[_Indices[i + <span class="hljs-number"><span class="hljs-number">1</span></span>]], <span class="hljs-number"><span class="hljs-number">1</span></span>))).xyz; float3 v2 = (mul(meshObject.localToWorldMatrix, float4(_Vertices[_Indices[i + <span class="hljs-number"><span class="hljs-number">2</span></span>]], <span class="hljs-number"><span class="hljs-number">1</span></span>))).xyz; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t, u, v; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IntersectTriangle_MT97(ray, v0, v1, v2, t, u, v)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; t &lt; bestHit.distance) { bestHit.distance = t; bestHit.position = ray.origin + t * ray.direction; bestHit.normal = normalize(cross(v1 - v0, v2 - v0)); bestHit.albedo = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; bestHit.specular = <span class="hljs-number"><span class="hljs-number">0.65f</span></span>; bestHit.smoothness = <span class="hljs-number"><span class="hljs-number">0.99f</span></span>; bestHit.emission = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; } } } }</code> </pre> <br>  рд╣рдо рдпрд╣ рд╕рдм рдХрд╛рд░реНрд░рд╡рд╛рдИ рдореЗрдВ рджреЗрдЦрдиреЗ рд╕реЗ рд╕рд┐рд░реНрдл рдПрдХ рдХрджрдо рджреВрд░ рд╣реИрдВред  рдЖрдЗрдП <code>Trace</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдереЛрдбрд╝рд╛ рдкреБрдирд░реНрдЧрдарди рдХрд░реЗрдВ рдФрд░ рдореЗрд╖ рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдПрдХ рдирд┐рд╢рд╛рди рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">RayHit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Trace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ray ray)</span></span></span><span class="hljs-function"> </span></span>{ RayHit bestHit = CreateRayHit(); uint count, stride, i; <span class="hljs-comment"><span class="hljs-comment">// Trace ground plane IntersectGroundPlane(ray, bestHit); // Trace spheres _Spheres.GetDimensions(count, stride); for (i = 0; i &lt; count; i++) { IntersectSphere(ray, bestHit, _Spheres[i]); } // Trace mesh objects _MeshObjects.GetDimensions(count, stride); for (i = 0; i &lt; count; i++) { IntersectMeshObject(ray, bestHit, _MeshObjects[i]); } return bestHit; }</span></span></code> </pre> <br><h2>  рдкрд░рд┐рдгрд╛рдо </h2><br>  рд╡рд╣ рд╕рдм рд╣реИ!  рдЖрдЗрдП рдХреБрдЫ рд╕рд░рд▓ рдореЗрд╖реЛрдВ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ (рдПрдХрддрд╛ рдЖрджрд┐рдо рдареАрдХ рд╣реИрдВ), рдЙрдиреНрд╣реЗрдВ <code>RayTracingObject</code> рдШрдЯрдХ рджреЗрдВ рдФрд░ рдЬрд╛рджреВ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░реЗрдВред  рдЕрднреА рддрдХ рд╡рд┐рд╕реНрддреГрдд рдореЗрд╢ рдХрд╛ <strong>рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВ</strong> (рдХрдИ рд╕реМ рддреНрд░рд┐рдХреЛрдгреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ)!  рд╣рдорд╛рд░реЗ shader рдореЗрдВ рдЕрдиреБрдХреВрд▓рди рдХреА рдХрдореА рд╣реИ, рдФрд░ рдпрджрд┐ рдЖрдк рдЗрд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдкреНрд░рддрд┐ рдкрд┐рдХреНрд╕реЗрд▓ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдирдореВрдиреЗ рдХреЛ рдЯреНрд░реЗрд╕ рдХрд░рдиреЗ рдореЗрдВ рд╕реЗрдХрдВрдб рдпрд╛ рдорд┐рдирдЯ рд▓рдЧ рд╕рдХрддреЗ рд╣реИрдВред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╕рд┐рд╕реНрдЯрдо GPU рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдмрдВрдж рдХрд░ рджреЗрдЧрд╛, рдПрдХрддрд╛ рдЗрдВрдЬрди рдХреНрд░реИрд╢ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c80/1d4/40e/c801d440e5a0a21f660b5a7e82e1b368.png"></div><br>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдореЗрд╢ рдореЗрдВ рдЪрд┐рдХрдирд╛рдИ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдлреНрд▓реИрдЯ рд╢реЗрдбрд┐рдВрдЧ рд╣реИред  рдЪреВрдВрдХрд┐ рд╣рдордиреЗ рдмрдлрд╝рд░ рдореЗрдВ рд╡рд░реНрдЯрд┐рдХрд▓ рдХреЗ рдорд╛рдирджрдВрдбреЛрдВ рдХреЛ рдЕрднреА рддрдХ рд▓реЛрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рддреНрд░рд┐рднреБрдЬ рдХреЗ рд╕рд┐рд░реЛрдВ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рд╡реЗрдХреНрдЯрд░ рдЙрддреНрдкрд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рддреНрд░рд┐рднреБрдЬ рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдкреНрд░рдХреНрд╖реЗрдк рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗред <br><br>  рд░реБрдЪрд┐ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рд╕реНрдЯреИрдирдлреЛрд░реНрдб рдмрдиреА рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЙрд░реНрдЧрди рдореИрдХрдЧрд╡рд╛рдпрд░ рдЖрд░реНрдХрд╛рдЗрд╡</a> рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмреНрд▓реЗрдВрдбрд░</a> рдкреИрдХреЗрдЬ рдХреЗ рдбрд┐рдХрд┐рдореЗрдЯ рд╕рдВрд╢реЛрдзрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдореИрдВрдиреЗ рдХреЛрдиреЗ рдХреА рд╕рдВрдЦреНрдпрд╛ 431 рддрдХ рдШрдЯрд╛ рджреАред рдЖрдк рдЗрдВрдЯрд░реНрд╕реЗрдХреНрдЯрдореЗрд╢рдСрдмрдЬреЗрдХреНрдЯ рд╢реЗрдбрд░ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд▓рд╛рдЗрдЯрд┐рдВрдЧ рдорд╛рдкрджрдВрдбреЛрдВ рдФрд░ рд╣рд╛рд░реНрдб-рдХреЛрдб рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рдкреНрд░рдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣рд╛рдБ рд╕реБрдВрджрд░ рдирд░рдо рдЫрд╛рдпрд╛ рдХреЗ рд╕рд╛рде рдврд╛рдВрдХрддрд╛ рд╣реБрдЖ рдЦрд░рдЧреЛрд╢ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреНрд░реЗрдлрд╝рд┐рдЯреНрдЯреА рд╢реЗрд▓реНрдЯрд░</a> рдореЗрдВ рдереЛрдбрд╝рд╛ рдлреИрд▓рд╛ рд╣реБрдЖ рд╡реИрд╢реНрд╡рд┐рдХ рдкреНрд░рдХрд╛рд╢ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0da/860/bb4/0da860bb41d9465f2dc21d649a509a66.png"></div><br>  ... рдФрд░ рдпрд╣рд╛рдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЗрдк рд╣рд┐рд▓</a> рдХреЗ рдордЬрдмреВрдд рджрд┐рд╢рд╛рддреНрдордХ рдкреНрд░рдХрд╛рд╢ рдХреЗ рддрд╣рдд рдПрдХ рдзрд╛рддреБ рдХрд╛ рдЦрд░рдЧреЛрд╢ рд╣реИ, рдЬреЛ рдлрд░реНрд╢ рдХреЗ рддрд▓ рдкрд░ рдбрд┐рд╕реНрдХреЛ рдЪрдордХрддрд╛ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a76/bb1/a64/a76bb1a642d620929ecd250f92e1ef1f.jpg"></div><br>  ... рдФрд░ рдпрд╣рд╛рдВ рджреЛ рдЫреЛрдЯреЗ рдЦрд░рдЧреЛрд╢реЛрдВ рдХреЛ рдиреАрд▓реЗ рдЖрдХрд╛рд╢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЗрд░рд╛ 9 рдбреБрд╕реНрдХ рдХреЗ</a> рддрд╣рдд рдмрдбрд╝реЗ рдкрддреНрдерд░ рд╕реБрдЬреИрди рдХреЗ рдиреАрдЪреЗ рдЫрд┐рдкрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдореИрдВ рджреВрд╕рд░реА рд╡рд╕реНрддреБ рдХреЗ рд▓рд┐рдП рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕рд╛рдордЧреНрд░реА рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реВрдВ, рдЕрдЧрд░ рдЗрдВрдбреЗрдХреНрд╕ рд╢рд┐рдлреНрдЯ рд╢реВрдиреНрдп рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ, рддреЛ рдЬрд╛рдВрдЪ рдХрд░реЗрдВ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ef/196/a4f/7ef196a4f818b366b4838f2b1e4148f5.png"></div><br><h2>  рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ? </h2><br>  рдкрд╣рд▓реА рдмрд╛рд░ рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ рдЕрдиреБрд░реЗрдЦрдХ рдореЗрдВ рдПрдХ рдЕрд╕рд▓реА рдЬрд╛рд▓ рджреЗрдЦрдирд╛ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИ, рд╣реИ рдирд╛?  рдЖрдЬ рд╣рдордиреЗ рдХреБрдЫ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛, рдореЗрд▓рд░-рдЯреНрд░рд╛рдордмреЛрд░ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛, рдФрд░ рд╕рдм рдХреБрдЫ рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рддрд╛рдХрд┐ рд╣рдо рддреБрд░рдВрдд рдПрдХрддрд╛ рдЗрдВрдЬрди рдХреЗ рдЧреЗрдо рдСрдмрдЬреЗрдХреНрдЯ рдЗрдВрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдордиреЗ рд░реЗ рдЯреНрд░реЗрд╕рд┐рдВрдЧ рдХреЗ рдлрд╛рдпрджреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рджреЗрдЦрд╛: рдЬреИрд╕реЗ рд╣реА рдЖрдк рдХреЛрдб рдореЗрдВ рдПрдХ рдирдпрд╛ рдЪреМрд░рд╛рд╣рд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рд╕рднреА рд╕реБрдВрджрд░ рдкреНрд░рднрд╛рд╡ (рдирд░рдо рдЫрд╛рдпрд╛, рдкреНрд░рддрд┐рдмрд┐рдВрдмрд┐рдд рдФрд░ рд╡рд┐рд╕рд░рд┐рдд рд╡реИрд╢реНрд╡рд┐рдХ рдкреНрд░рдХрд╛рд╢ рд╡реНрдпрд╡рд╕реНрдерд╛, рдФрд░ рдЗрд╕реА рддрд░рд╣) рддреБрд░рдВрдд рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддреЗ рд╣реИрдВред <br><br>  рдПрдХ рдЪрдордХрджрд╛рд░ рдЦрд░рдЧреЛрд╢ рдХрд╛ рдкреНрд░рддрд┐рдкрд╛рджрди рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рд╕рдордп рд▓рдЧрд╛, рдФрд░ рдореБрдЭреЗ рдЕрднреА рднреА рд╕рдмрд╕реЗ рд╕реНрдкрд╖реНрдЯ рд╢реЛрд░ рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдЫрд╛рдирдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рджреГрд╢реНрдп рдЖрдорддреМрд░ рдкрд░ рдПрдХ рд╕реНрдерд╛рдирд┐рдХ рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдЧреНрд░рд┐рдб рдореЗрдВ, рдПрдХ рдХреЗ-рдЖрдпрд╛рдореА рдкреЗрдбрд╝ рдпрд╛ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рд╡реЙрд▓реНрдпреВрдо рдХрд╛ рдПрдХ рдкрджрд╛рдиреБрдХреНрд░рдо, рдЬреЛ рдмрдбрд╝реЗ рджреГрд╢реНрдпреЛрдВ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреА рдЧрддрд┐ рдХреЛ рдХрд╛рдлреА рдмрдврд╝рд╛рддрд╛ рд╣реИред <br><br>  рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдХреНрд░рдо рдореЗрдВ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ: рдЖрдЧреЗ рд╣рдо рд╕рдорд╕реНрдпрд╛ рдХреЛ рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрдВрдЧреЗ рддрд╛рдХрд┐ рд╣рдорд╛рд░реЗ рдореЗрд╢ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдХрдо-рдкрд╛рд▓реА рд╡рд╛рд▓реЗ) рдЕрдм рд╕реЗ рдЕрдзрд┐рдХ рдЪрд┐рдХрдиреА рджрд┐рдЦреЗрдВред  рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╕рдордп рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдореИрдЯреНрд░рд┐рд╕реЗрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдФрд░ рд╕реАрдзреЗ рдпреВрдирд┐рдЯреА рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛, рдФрд░ рди рдХреЗрд╡рд▓ рдЙрдиреНрд╣реЗрдВ рдХреЛрдб рдореЗрдВ рд▓рд┐рдЦреЗрдВред  рдпрд╣ рд╡рд╣ рд╣реИ рдЬреЛ рд╣рдо рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдХрд░реЗрдВрдЧреЗред  рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдФрд░ рдЖрдкрдХреЛ рднрд╛рдЧ 4 рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛рдПрдЧрд╛! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi450308/">https://habr.com/ru/post/hi450308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi450294/index.html">рд╕рдмрд╕реЗ рдЬрд╣рд░реАрд▓рд╛ рдЬрд╣рд░</a></li>
<li><a href="../hi450298/index.html">рдХреНрд╡рд╛рдВрдЯрдо рднрд╡рд┐рд╖реНрдп (рдЬрд╛рд░реА)</a></li>
<li><a href="../hi450300/index.html">рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдФрд░ OOP рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣рд╕ рдХрд░рдирд╛ рдмрдВрдж рдХрд░реЗрдВ</a></li>
<li><a href="../hi450302/index.html">рдПрдореЗрдЪреНрдпреЛрд░ рд░реЗрдбрд┐рдпреЛ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА: рдПрдХ рдЪреАрдиреА рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рд╕рд░реНрдХрд┐рдЯ рдмреЛрд░реНрдб рд╡рд┐рдирд┐рд░реНрдорд╛рдг</a></li>
<li><a href="../hi450304/index.html">рдХрд╛рд░рд╛рдкреБрдЬрд┐рдХ рдПрдХ рдЪреАрдВрдЯреА рдХреА рд╕рд╡рд╛рд░реА рдХрд░рддрд╛ рд╣реИ: 100 рдорд┐рд▓рд┐рдпрди рд╡рд░реНрд╖ рдХреА рдорд╛рдпрд░рд╛рдореЛрдлрд┐рд▓рд┐рдпрд╛</a></li>
<li><a href="../hi450310/index.html">рдХреИрд╕реЗ рдлрд┐рд▓рд┐рдкреНрд╕ рд╡реАрдбрд┐рдпреЛрд╡реЗрдпрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдкрд╣рд▓реЗ рд▓реЛрд╣реЗ рдХреА рддрд╕реНрд╡реАрд░реЗрдВ, рдлрд┐рд░ рдереЛрдбрд╝реА рдердХрд╛рди</a></li>
<li><a href="../hi450312/index.html">рдбреЙрдХрд░ рдХрдореНрдкреЛрдЬрд░ рд╕реНрдЯрд╛рд░реНрдЯрд░ рдЧрд╛рдЗрдб</a></li>
<li><a href="../hi450314/index.html">рд╢реБрд░реБрдЖрддреА рдХреЗ рд▓рд┐рдП TensorFlowред рднрд╛рдЧ 1: рд╕рд╛рдорд╛рдиреНрдп рдЬрд╛рдирдХрд╛рд░реА, рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛</a></li>
<li><a href="../hi450316/index.html">рдЯреАрдбреАрдбреА: рдПрдХ рд╡рд┐рдХрд╛рд╕ рдкрджреНрдзрддрд┐ рдЬрд┐рд╕рдиреЗ рдореЗрд░рд╛ рдЬреАрд╡рди рдмрджрд▓ рджрд┐рдпрд╛</a></li>
<li><a href="../hi450318/index.html">рдЖрдзреБрдирд┐рдХ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдбрд┐рдЬрд╛рдЗрди рдкреИрдЯрд░реНрди</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>