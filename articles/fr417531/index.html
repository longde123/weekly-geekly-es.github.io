<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕛 🍵 ⚱️ Comment nous avons gagné dans SmartMailHack 2 👬 🤽🏽 🤾🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le week-end dernier (14-15 juillet), un autre hackathon SmartMailHack a eu lieu au bureau du groupe Mail.Ru. On nous a demandé de "proposer une foncti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons gagné dans SmartMailHack 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/417531/"><p>  Le week-end dernier (14-15 juillet), un autre hackathon SmartMailHack a eu lieu au bureau du groupe Mail.Ru.  On nous a demandé de "proposer une fonctionnalité qui vous permettra d'accéder aux données du courrier et d'interagir plus efficacement avec eux". </p><a name="habracut"></a><br><h2>  Description des données, idées et solutions </h2><br><p>  Nous avons obtenu une boîte de test avec plus de 1500 messages, ainsi qu'un accès complet à celle-ci via l'API.  Les organisateurs ont fourni un grand manuel détaillé sur son utilisation (livre de 547 pages).  À l'aide d'un jeton et de requêtes JSON simples, nous pourrions recevoir toutes les informations nécessaires sur le courrier: lettres, noms d'expéditeur, diverses caractéristiques. </p><br><p>  Après avoir discuté que chacun de nous a environ plusieurs milliers de lettres non lues provenant des listes de diffusion dans le courrier, nous avons décidé de résoudre ce problème.  Dans notre cas, la pertinence de la lettre n'est plus déterminée par l'heure à laquelle elle est apparue dans la boîte aux lettres.  Et étant donné que toutes les lettres ne seront pas ouvertes, il est préférable de ne montrer à l'utilisateur que celles d'entre elles qu'il est susceptible d'ouvrir.  Et tout le reste peut être emporté en enfer.  Nous avons donc décidé de faire un tri pour le courrier. </p><br><p> Les lettres de tri étaient censées être par catégorie, et les catégories devraient être placées à l'intérieur des tuiles (salut, Trello).  La rangée supérieure de tuiles combinait la signification des lettres de différents expéditeurs.  Il peut y avoir des «voyages», «inscription», «correspondance avec Vasya», «événements», «finances» et ainsi de suite, au total environ 10 catégories.  La deuxième rangée était des tuiles avec les offres les plus cool des entreprises.  Nous avons recherché les codes promotionnels les plus pertinents, les promotions les plus remises, les offres les plus intéressantes et les avons affichés ici, regroupés par entreprise.  Ensuite, toutes les autres lettres distribuées aux sociétés d'envoi ont suivi, et ces expéditeurs, à leur tour, ont été répartis en catégories ("Alimentation", "Cosmétique", "Electronique" et autres).  De plus, les catégories étaient également classées selon la pertinence des lettres, et seules les lettres qui franchissaient un certain seuil de pertinence étaient affichées à l'intérieur.  Après avoir renforcé l'idée avec les mots «Trouver ce qui est nécessaire et se débarrasser de l'excès», nous sommes passés au ML. </p><br><h2>  Apprentissage automatique </h2><br><p>  Nous avons décidé de construire trois modèles: </p><br><ul><li>  un classificateur de plus de 30 catégories que nous avons désigné comme élémentaire pour tous les utilisateurs; </li><li>  regroupement et mise en évidence de nouvelles catégories en fonction des préférences des utilisateurs; </li><li>  classer les lettres dans la catégorie, du plus pertinent au moins. </li></ul><br><img src="https://habrastorage.org/webt/z1/lp/4c/z1lp4ctrc2qjtboon88dpqpe2iw.png"><br><h2>  Signes </h2><br><p>  Il semble que cet élément devrait être décrit individuellement pour chaque tâche.  Cependant, nous avons généré un jeu de données d'entités communes et formé tous les modèles sur celui-ci.  Il n'y avait pas de temps pour une sélection rigoureuse. </p><br><p>  Il y avait un tas de signes binaires qui sont déchargés à l'aide de l'API.  Cependant, la plupart d'entre eux ont été générés sur les textes: </p><br><ul><li>  tf-idf sur une collection de documents; </li><li>  Intégrations reçues avec Word2Vec; </li><li>  symptômes comportementaux tels que: <br>  - le nombre de messages lus dans la dernière fenêtre (il y a 1, 2, 5 semaines); <br>  - le nombre de messages de cela. </li></ul><br><h2>  Tâche de classification </h2><br><p>  Nous avons marqué à la main 1000 lettres pour l'entraînement.  Il s'est avéré que ce n'est pas un travail aussi lent et fastidieux que cela puisse paraître au premier abord.  Si vous utilisez des adresses et des en-têtes, vous pouvez accélérer considérablement le travail.  Par exemple, Lamoda envoie presque toujours des lettres à la catégorie «Vêtements». </p><br><p>  Ensuite, nous formons LightGBM sur l'ensemble des signes et obtenons la qualité d'une précision de 0,913 et de 0,892 mesures f1, ce que nous avons déterminé comme un très bon résultat au niveau de la ligne de base.  Cela montre que les lettres peuvent être très bien classées. </p><br><h2>  Tâche de classement </h2><br><p>  En tant que variable cible, nous avons utilisé l'indicateur binaire 0/1 - si le message a été lu par l'utilisateur.  Ils ont ensuite été classés en fonction de la probabilité prédite par le modèle, car c'est précisément ce qui reflète la confiance du modèle dans la lecture ou non du message par la personne. </p><br><p>  Ici, nous avons également formé LightGBM sur l'ensemble des fonctionnalités et obtenu une qualité d'environ 0,816 auc-roc. </p><br><h2>  Regroupement et mise en évidence de nouvelles catégories </h2><br><p>  En plus des catégories principales, nous avons la catégorie «Autre».  De là, vous pouvez mettre en évidence de nouveaux sujets. </p><br><p>  Nous avons formé le DBSCAN standard sur les lettres de ce groupe, puis nous avons sélectionné les clusters dans lesquels il y avait beaucoup de messages (le seuil peut être optimisé, mais il a été fixé par accident).  Par exemple, la modélisation thématique peut être définie sur une collection de documents d'un cluster, obtenir le sujet le plus pertinent pour un cluster donné et le sélectionner dans un groupe distinct.  Il n'y avait pas assez de temps pour valider cet algorithme. </p><br><p>  Ainsi, les lettres entrantes passent par le classificateur, si elles entrent dans la catégorie «Autre» - elles sont regroupées, de nouveaux sujets essaient de se démarquer, puis le classement a lieu.  Une demande de backend est envoyée, qui agrège tout, et le frontend est rendu. </p><br><img src="https://habrastorage.org/webt/hh/im/e2/hhime2drbnnlgca1jorvldzfvou.png"><br><hr><br><p>  <strong>Idées restantes</strong> </p><br><ul><li>  améliorer les modèles d'apprentissage automatique; </li><li>  recueillir des données auprès d'un plus grand nombre d'utilisateurs pour mieux prédire le comportement de chacun d'eux; </li><li>  validation approfondie des nouvelles catégories émergentes; </li><li>  l'utilisation d'images comme signes, par exemple, l'attribution de plongements à partir de réseaux de neurones pré-formés. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr417531/">https://habr.com/ru/post/fr417531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr417515/index.html">Ce que j'ai appris en créant 100 jeux en 5 ans</a></li>
<li><a href="../fr417517/index.html">Pages de l'histoire d'Intel. Chronique photo et quiz</a></li>
<li><a href="../fr417521/index.html">Examiner les certificats SSL pour la révocation</a></li>
<li><a href="../fr417527/index.html">Nous développons Shrimp: nous contrôlons les requêtes parallèles, nous nous connectons via spdlog et plus ...</a></li>
<li><a href="../fr417529/index.html">Trois tendances technologiques qui changent le commerce et le consommateur</a></li>
<li><a href="../fr417533/index.html">Bloc-notes sur Windows a reçu la première mise à jour importante en deux décennies</a></li>
<li><a href="../fr417535/index.html">Le développement de CUBA est-il un grand pas loin du printemps?</a></li>
<li><a href="../fr417537/index.html">"Votre jeu est ennuyeux", ou comment augmenter la rétention déjà élevée du premier jour</a></li>
<li><a href="../fr417539/index.html">Google condamné à une amende record de 5 milliards de dollars pour avoir enfreint les lois antitrust en Europe</a></li>
<li><a href="../fr417541/index.html">Les enregistrements des pourparlers de mission Apollo avec le centre de contrôle de vol de la NASA numérisés</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>