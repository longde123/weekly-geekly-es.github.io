<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî¶ üèõÔ∏è üó£Ô∏è API IntersectionObserver et chargement d'images paresseuses üôÖüèª üë®üèª‚ÄçüöÄ ‚úãüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'utilisation du chargement d'images paresseuses pour am√©liorer les performances des projets Web est une technique d'optimisation populaire. Le fait e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>API IntersectionObserver et chargement d'images paresseuses</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/453586/">  L'utilisation du chargement d'images paresseuses pour am√©liorer les performances des projets Web est une technique d'optimisation populaire.  Le fait est que les images sont des ressources ¬´lourdes¬ª qui sont bond√©es de sites Web modernes.  Nous avons d√©j√† publi√© quelque chose √† ce sujet.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> vous pouvez lire ce que le chargement paresseux a donn√© au site Web Walmart et apprendre √† utiliser IntersectionObserver dans les projets React.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> un article sur l'optimisation des sites statiques.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> des informations r√©centes sur l'impl√©mentation du chargement paresseux √† l'aide des outils du navigateur. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ao/_d/7t/ao_d7twyxzavzolz2ascrhfk1g4.png"></a> <br><br>  Aujourd'hui, nous attirons votre attention sur la traduction d'un article dans lequel l'utilisation de l'API IntersectionObserver est d√©crite en utilisant une simple page Web comme exemple.  Ce mat√©riel est destin√© aux programmeurs d√©butants. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Qu'est-ce que le chargement d'images paresseuses?</font> </h2><br>  Lors de l'analyse des performances des applications, deux indicateurs viennent au premier plan: le temps de la premi√®re interactivit√© (Time To Interactive) et la consommation des ressources (Resources Consumption).  Ils devront in√©vitablement faire face √† ceux qui sont engag√©s dans le d√©veloppement web.  De plus, des probl√®mes avec les applications peuvent survenir non seulement parce qu'ils mettent beaucoup de temps √† se pr√©parer au travail ou √† consommer trop de ressources.  Mais, dans tous les cas, il est tr√®s important de trouver les sources de ces probl√®mes le plus t√¥t possible et de veiller √† ce que les probl√®mes ne se posent m√™me pas. <br><br>  L'utilisation de technologies de chargement d'images paresseuses dans des applications Web minimise le risque de probl√®mes de performances.  √Ä savoir, si nous analysons le chargement paresseux du point de vue de son influence sur le moment de mettre la page en √©tat de fonctionnement et la consommation de ressources, nous obtenons ce qui suit: <br><br><ol><li>  Temps de premi√®re interactivit√©.  Il s'agit du temps dont l'application Web a besoin pour charger et mettre l'interface dans un √©tat adapt√© √† l'utilisateur pour travailler avec elle.  Le chargement paresseux (de plus, nous ne parlons pas seulement des images) optimise le temps de r√©ponse des applications gr√¢ce √† la technologie de s√©paration du code et de chargement uniquement de ce qui est n√©cessaire pour une page particuli√®re, ou de ce qui est n√©cessaire √† un moment pr√©cis. </li><li>  Consommation de ressources.  Les humains sont des √™tres impatients.  Si un site Web a besoin de plus de 3 secondes pour se charger, 70% des utilisateurs quittent ce site.  Les applications Web ne devraient pas se charger aussi longtemps.  Le chargement paresseux vous permet de r√©duire la quantit√© de ressources n√©cessaires pour faire fonctionner les pages.  Par exemple, il se peut que le code d'un certain projet soit divis√© en fragments qui ne sont charg√©s que sur les pages qui en ont besoin.  Par cons√©quent, les performances du site augmentent et la consommation des ressources syst√®me diminue. </li></ol><br>  Ainsi, les technologies de chargement paresseux acc√©l√®rent les applications, r√©duisant le temps qu'elles t√©l√©chargent et font appara√Ætre.  Ceci est r√©alis√© du fait que les ressources ne sont charg√©es que lorsqu'elles sont n√©cessaires. <br><br>  Voici quelques avantages que le chargement paresseux offre aux projets Web: <br><br><ul><li>  Les pages se chargent plus rapidement et deviennent op√©rationnelles. </li><li>  Lors du chargement initial des pages, vous devez transf√©rer et traiter moins de donn√©es. </li></ul><br>
<h2>  <font color="#3AC1EF">Chargement d'images paresseuses √† l'aide de l'API IntersectionObserver</font> </h2><br>  Si vous pensez √† la fa√ßon dont les pages Web se chargent, il devient clair que cela n'a aucun sens de t√©l√©charger des images ou d'autres ressources qui ne sont pas visibles par l'utilisateur.  Lorsque vous utilisez le chargement diff√©r√©, les images qui se trouvent dans la zone visible de la page sont d'abord charg√©es.  Ensuite, lorsque l'utilisateur fait d√©filer la page, d'autres images sont charg√©es qui tombent dans la zone visible de la page. <br><br>  Prenons un exemple. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b9/e36/782/7b9e367828e6af1dfd070461196dc7c1.png"></div><br>  <i><font color="#999999">Page et sa zone visible</font></i> <br><br>  Jetez un oeil √† la figure pr√©c√©dente.  Ici, vous pouvez voir le navigateur et la page Web charg√©s dans celui-ci.  Les images <code>#IMG_1</code> et <code>#IMG_2</code> font partie de la port√©e de la page.  Cela signifie qu'ils sont visibles pour l'utilisateur et se trouvent dans les limites de la zone de la fen√™tre du navigateur qui s'affiche √† l'√©cran. <br><br>  Cet ordre de travail avec la page ne peut √™tre consid√©r√© comme id√©al lorsque, lors de son chargement, les images <code>#IMG_1</code> , <code>#IMG_2</code> , <code>#IMG_3</code> et <code>#IMG_4</code> .  Seuls <code>#IMG_1</code> et <code>#IMG_2</code> sont visibles pour l' <code>#IMG_2</code> , et <code>#IMG_3</code> et <code>#IMG_4</code> sont cach√©s.  Si vous chargez les premi√®re et deuxi√®me images lors du chargement de la page, mais ne t√©l√©chargez pas les troisi√®me et quatri√®me images, cela pourrait avoir un impact positif sur les performances du site.  √Ä savoir, nous parlons de ce qui suit.  Lorsque l'utilisateur fait d√©filer la page pour que la troisi√®me image devienne visible, elle se charge.  Si le d√©filement continue et que la quatri√®me image devient visible, elle se charge √©galement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/783/85b/173/78385b17309c48150e2ce83554e7b857.png"></div><br>  <i><font color="#999999">Faire d√©filer une page et charger des images</font></i> <br><br>  Maintenant que nous avons compris exactement comment nous voulons travailler avec les images, nous nous demandons comment d√©couvrir qu'un certain √©l√©ment d'une page tombe dans sa zone visible.  Les navigateurs modernes ont une API qui permet au programmeur de savoir quand une certaine zone de la page devient visible.  Il s'agit de l'API IntersectionObserver.  Il permet, √† l'aide de m√©canismes asynchrones, d'organiser la surveillance des √©l√©ments et de recevoir des notifications dans les cas o√π un √©l√©ment franchit la port√©e du document ou franchit la fronti√®re d'un autre √©l√©ment. <br><br>  Afin de configurer le chargement paresseux des images, nous devons d'abord pr√©parer un code de mod√®le pour l'√©l√©ment qui sera utilis√© pour d√©crire les images.  Le voici: <br><br><pre> <code class="javascript hljs">&lt;img <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span> src=<span class="hljs-string"><span class="hljs-string">"lazy_img.jpg"</span></span> data-src=<span class="hljs-string"><span class="hljs-string">"real_img.jpg"</span></span> /&gt;</code> </pre> <br>  La classe vous permet d'identifier un √©l√©ment comme une image √† laquelle le chargement paresseux sera appliqu√©.  L'attribut <code>src</code> vous permet d'afficher une image d'espace r√©serv√© avant d'afficher l'image r√©elle.  <code>data-src</code> stocke l'adresse de l'image r√©elle, qui sera charg√©e lorsque l'√©l√©ment entrera dans la zone visible de la page. <br><br>  √âcrivons maintenant le code qui impl√©mente le chargement diff√©r√©.  Comme d√©j√† mentionn√©, nous utiliserons l'API IntersectionObserver pour d√©tecter le moment o√π l'image entre dans la zone de visualisation de la page. <br><br>  Cr√©ez d'abord une instance de <code>IntersectionObserver</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(...);</code> </pre> <br>  Le constructeur <code>IntersectionObserver</code> accepte une fonction avec deux param√®tres.  L'un d'eux stocke un tableau compos√© d'√©l√©ments qui doivent √™tre surveill√©s, l'autre une instance <code>IntersectionObserver</code> .  Cela ressemble √† ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-comment"><span class="hljs-comment">//...   }) });</span></span></code> </pre> <br>  Le code de fonction v√©rifie si les images repr√©sent√©es par les <code>entries</code> tableau d' <code>entries</code> croisent la fen√™tre.  Si tel est le cas, l'attribut <code>src</code> de l'image correspondante enregistre ce qui √©tait dans son attribut <code>data-src</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(entry.isIntersecting) {           <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target           lazyImage.src = lazyImage.dataset.src       }   }) });</code> </pre> <br>  Ici, nous v√©rifions, en utilisant la condition <code>if(entry.isIntersecting) {...}</code> , si l'√©l√©ment traverse la zone de visualisation du navigateur.  Si c'est le cas, nous enregistrons l'√©l√©ment <code>img</code> dans la constante <code>lazyImage</code> .  Ensuite, nous √©crivons dans son attribut <code>src</code> ce qui √©tait dans son attribut <code>data-src</code> .  Gr√¢ce √† cela, l'image dont l'adresse est stock√©e dans <code>data-src</code> est charg√©e et affich√©e.  Dans le navigateur, cela ressemble √† remplacer l'image d'espace r√©serv√©, <code>lazy_img.jpg</code> , par une image r√©elle. <br><br>  Nous devons maintenant utiliser la m√©thode <code>.observe()</code> de notre instance <code>IntersectionObserver</code> afin de commencer √† surveiller les √©l√©ments qui nous int√©ressent: <br><br><pre> <code class="javascript hljs">imageObserver.observe(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>));</code> </pre> <br>  Ici, nous s√©lectionnons tous les √©l√©ments <code>img</code> avec la classe <code>lzy_img</code> le <code>document.querySelectorAll('img.lzy_img')</code> avec la commande <code>document.querySelectorAll('img.lzy_img')</code> et les passons √† la m√©thode <code>.observe()</code> .  Ayant re√ßu une liste d'√©l√©ments, il entame le processus d'observation. <br><br>  Afin de tester cet exemple, nous commen√ßons par initialiser le projet Node.js: <br><br><pre> <code class="javascript hljs">mkdir lzy_img cd lzy_img npm init -y</code> </pre> <br>  Cr√©ez maintenant le fichier <code>lzy_img</code> dans le dossier <code>lzy_img</code> : <br><br><pre> <code class="html hljs xml">touch index.html</code> </pre> <br>  Ajoutez-y le code suivant: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Vous pouvez remarquer que 5 images sont d√©crites ici, dans lesquelles l' <code>lazy_img.jpg</code> r√©serv√© <code>lazy_img.jpg</code> s'affiche lors du chargement.  L'attribut <code>data-src</code> de chacun d'eux contient des informations sur des images r√©elles.  Voici une liste des noms d'images utilis√©s dans le projet: <br><br><pre> <code class="plaintext hljs">lazy_img.jpg img_1.jpg img_2.jpg img_3.jpg img_4.jpg img_5.jpg</code> </pre> <br>  Vous devez cr√©er toutes ces images vous-m√™me en amenant le dossier du projet dans la vue illustr√©e dans la figure suivante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb4/44e/3cb/bb444e3cbd0ad4e432901dba7a3b2710.png"></div><br>  <i><font color="#999999">Dossier de projet</font></i> <br><br>  Dans mon cas, le fichier <code>lazy_img.jpg</code> pr√©par√© √† l'aide de Windows Paint et les images r√©elles ( <code>img_*.jpg</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jpg</a> ) ont √©t√© prises √† partir de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pixabay.com</a> . <br><br>  Notez que le rappel utilis√© pour cr√©er l'instance <code>IntersectionObserver</code> a un appel <code>console.log()</code> .  Cela nous permettra d'apprendre √† effectuer des op√©rations pour charger diff√©rentes images. <br><br>  Maintenant, pour servir <code>index.html</code> , nous utilisons le package <code>http-server</code> : <br><br><pre> <code class="javascript hljs">npm i http-server</code> </pre> <br>  Ajoutez la propri√©t√© <code>start</code> √† la section <code>scripts</code> du fichier <code>package.json</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"http-server ./"</span></span> }</code> </pre> <br>  Apr√®s cela, ex√©cutez la commande <code>npm run start</code> dans le terminal. <br><br>  Ouvrez maintenant le navigateur et acc√©dez √† l'adresse <code>127.0.0.1:8080</code> .  Notre page <code>index.html</code> au tout d√©but ressemblera √† la figure suivante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd9/e0e/f53/fd9e0ef534be767b804179f38ed134a3.png"></div><br>  <i><font color="#999999">Page sans images r√©elles</font></i> <br><br>  Vous remarquerez peut-√™tre que l√† o√π les images r√©elles devraient se trouver, seuls les espaces r√©serv√©s sont maintenant affich√©s.  Ici, nous partons de l'hypoth√®se que la premi√®re image est dans la zone de visualisation, donc le navigateur commence √† la t√©l√©charger.  Par cons√©quent, la page ressemblera maintenant √† ceci. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ef/004/1ee/1ef0041eee5e8713415df640faed6cb8.png"></div><br>  <i><font color="#999999">Le navigateur a t√©l√©charg√© la premi√®re image</font></i> <br><br>  Autres images non encore t√©l√©charg√©es.  Ils n'ont pas encore atteint la zone d'observation. <br><br>  Si vous faites d√©filer la page tout en regardant la console, vous remarquerez un probl√®me.  Il consiste en ce que lors du d√©filement de la m√™me image dans la fen√™tre de visualisation, le navigateur essaie de la t√©l√©charger plusieurs fois. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c4/074/83e/3c407483e097cb7c2dd7ce3b82b37027.png"></div><br>  <i><font color="#999999">T√©l√©chargements multiples de la m√™me image</font></i> <br><br>  Ce n'est pas du tout ce dont nous avons besoin.  Cela entra√Æne un gaspillage inutile des ressources syst√®me et d√©grade les performances du projet. <br><br>  Afin de r√©soudre ce probl√®me, nous devons supprimer l'√©l√©ment <code>img</code> , dont l'image r√©elle est d√©j√† charg√©e, de la liste des √©l√©ments que notre instance <code>IntersectionObserver</code> surveille.  Nous devons √©galement supprimer la classe <code>lzy_img</code> de cet √©l√©ment.  Voici √† quoi cela ressemble dans le code de fonction de rappel modifi√©: <br><br><pre> <code class="javascript hljs">&lt;script&gt;   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {           entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entry.isIntersecting) {                   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target                   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"lazy loading "</span></span>, lazyImage)                   lazyImage.src = lazyImage.dataset.src                   lazyImage.classList.remove(<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span>);                   imgObserver.unobserve(lazyImage);               }           })       });       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>)       arr.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">) =&gt;</span></span> {           imageObserver.observe(v);       })   }) &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Apr√®s avoir charg√© l'image r√©elle de l'√©l√©ment <code>img</code> correspondant, sa classe <code>lzy_img</code> est <code>lzy_img</code> et l'√©l√©ment est exclu de la liste des √©l√©ments observ√©s par <code>IntersectionObserver</code> . <br><br>  Voici l'exemple de code: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                       lazyImage.classList.remove(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lzy_img"</span></span></span><span class="javascript">);                       imgObserver.unobserve(lazyImage);                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Nous avons examin√© l'exemple le plus simple de mise en ≈ìuvre du syst√®me de chargement paresseux d'images.  Mais IntersectionObserver vous permet de cr√©er des sch√©mas de chargement assez complexes et paresseux.  Si vous √™tes int√©ress√© par ce sujet, nous vous recommandons de consulter les publications mentionn√©es au d√©but du mat√©riel et de lire la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br>  <b>Chers lecteurs!</b>  Avez-vous des exemples d'am√©lioration des performances du site Web apr√®s avoir impl√©ment√© un syst√®me de chargement d'images paresseux? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453586/">https://habr.com/ru/post/fr453586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453576/index.html">Frontend Weekly Digest (20-26 mai 2019)</a></li>
<li><a href="../fr453578/index.html">De la critique aux algorithmes: labels, soci√©t√©s et culture musicale du XXe si√®cle</a></li>
<li><a href="../fr453580/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 366 (20-26 mai 2019)</a></li>
<li><a href="../fr453582/index.html">Projets Node.js dans lesquels il est pr√©f√©rable de ne pas utiliser de fichiers de verrouillage</a></li>
<li><a href="../fr453584/index.html">Pr√©parez-vous: Angular 8 est proche</a></li>
<li><a href="../fr453588/index.html">Opus sur Sa Majest√© Clay. Quatri√®me partie - Silicones</a></li>
<li><a href="../fr453590/index.html">Votre propre SaaS personnel</a></li>
<li><a href="../fr453592/index.html">Gagner sa vie et faire des jeux: 11 conseils Levelord</a></li>
<li><a href="../fr453594/index.html">Cr√©er des jeux pour gagner sa vie: 11 conseils de Levelord</a></li>
<li><a href="../fr453596/index.html">Fraudeurs et EDS - tout va tr√®s mal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>