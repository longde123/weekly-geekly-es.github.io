<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéì ‚Ñ¢Ô∏è ü§∞üèø In 15 Minuten erstellen wir einen interaktiven Gel√§ndeplan üÜñ üêã üï∫üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beim Toaster werden sie h√§ufig gefragt, wie ein interaktives Diagramm eines Hauses erstellt werden soll, wie ein Plan der internen Struktur erstellt w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>In 15 Minuten erstellen wir einen interaktiven Gel√§ndeplan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478698/"><p><img src="https://habrastorage.org/webt/n0/jb/-9/n0jb-9sfsmw2ewd-etwnl04ayvc.jpeg"></p><br><p> Beim Toaster werden sie h√§ufig gefragt, wie ein interaktives Diagramm eines Hauses erstellt werden soll, wie ein Plan der internen Struktur erstellt werden soll, ob Etagen oder Wohnungen mit entsprechenden Informationen ausgew√§hlt werden k√∂nnen, ob Informationen zu den Details eines bestimmten Produkts angezeigt werden sollen, wenn Sie auf einem Foto mit der Maus dar√ºber fahren.  Es geht nicht um ein dreidimensionales Modell, sondern um ein Bild, mit dem bestimmte Details hervorgehoben werden k√∂nnen.  All diese Aufgaben sind √§hnlich und einfach zu l√∂sen, aber es tauchen immer noch Fragen auf. Daher werden wir uns heute ansehen, wie solche Aufgaben mit SVG, einem Grafikeditor und einer Prise Javascript erledigt werden. </p><a name="habracut"></a><br><p>  Die Wahl von SVG beruht auf der Tatsache, dass dies die einfachste Option f√ºr die Entwicklung und das Debuggen ist.  Ich habe Leute getroffen, die geraten haben, dies alles auf Leinwand zu machen, aber dort ist es viel schwieriger zu verstehen, was passiert, und die Koordinaten aller Punkte auf den Kurven m√ºssen irgendwie im Voraus berechnet werden, aber hier habe ich die Tools des Entwicklers ge√∂ffnet und sofort die gesamte Struktur, alle Objekte, mit denen gibt es interaktion, und alles andere kann mit einer maus in einer menschenfreundlichen oberfl√§che angeklickt werden.  Die Leistung zwischen dem √ºblichen 2D-Canvas und SVG wird sich kaum unterscheiden.  WebGL mag diesbez√ºglich einen gewissen Bonus bieten, aber der Zeitrahmen f√ºr die Entwicklung wird sich erheblich verl√§ngern, ganz zu schweigen von der weiteren Unterst√ºtzung, die nicht immer in das Budget passt.  Ich w√ºrde sogar sagen "passt nie." </p><br><p>  In diesem Tutorial erstellen wir so etwas wie ein Widget f√ºr eine fiktive Website zum Mieten von Privath√§usern in einem bestimmten Bereich. Es ist jedoch klar, dass die Prinzipien f√ºr die Erstellung solcher fraglichen Dinge f√ºr jedes Thema gelten. </p><br><h2 id="nachinaem-nachinat">  Erste Schritte </h2><br><p>  Ich werde alles am Beispiel von <a href="https://inkscape.org/">Inkscape</a> zeigen, aber dieselben Aktionen k√∂nnen mit √§hnlichen Funktionen in jedem anderen Editor ausgef√ºhrt werden. </p><br><p>  F√ºr die Arbeit ben√∂tigen wir zwei Hauptdialogfelder: </p><br><ul><li>  XML-Editor (Strg + Umschalt + X oder ein Symbol in spitzen Klammern) - um die Struktur des Dokuments in Form von Markups anzuzeigen und einzelne Elemente zu bearbeiten. </li><li>  F√ºllen und Konturieren (Strg + Umschalt + F oder das Symbol mit einem Pinsel im Rahmen) - haupts√§chlich zum F√ºllen von Konturen. </li></ul><br><p>  Starten Sie sie sofort und fahren Sie mit der Erstellung des Dokuments fort. </p><br><blockquote>  Wenn Sie sie versehentlich in ein separates Fenster gezogen haben, k√∂nnen Sie unter den oberen Rahmen dieses Fensters klicken (wo sich nichts befindet) und sie zur√ºck in das Hauptfenster ziehen.  Dies ist nicht ganz intuitiv, sondern bequem. </blockquote><p>  √ñffnen Sie ein Foto mit Blick auf den Bereich.  Wir k√∂nnen das Bild selbst als base64-Zeichenfolge oder als externen Link einf√ºgen.  W√§hlen Sie den Link aus, da er gro√ü ist.  Dann werden wir den Pfad zum Bild mit unseren H√§nden √§ndern, wenn wir alles auf den Seiten der Site einf√ºgen.  Es wird ein SVG-Dokument erstellt, in das das Foto √ºber das Bild-Tag eingebettet wird. </p><br><blockquote>  Bei in SVG eingebetteten Rasterbildern, die in HTML eingebettet sind, ist es m√∂glich, das verz√∂gerte Laden sowie normale Bilder auf Seiten zu verwenden.  In diesem Beispiel werden wir nicht auf solche Optimierungen eingehen, aber sie in der praktischen Arbeit nicht vergessen. </blockquote><p>  Gegenw√§rtig sehen wir so etwas vor uns: </p><br><p><img src="https://habrastorage.org/webt/nf/1v/ak/nf1vak7y46k_uto-ov-85ifimrc.jpeg"></p><br><p>  Erstellen Sie nun eine neue Ebene (Strg + Umschalt + N oder Men√º&gt; Ebene&gt; Ebene hinzuf√ºgen).  Im XML-Editor sehen wir, dass das regul√§re g-Element aufgetreten ist.  Obwohl wir noch nicht weit gekommen sind, k√∂nnen wir ihm eine Klasse geben, die wir sp√§ter in Skripten verwenden werden. </p><br><blockquote>  Verlasse dich nicht auf id.  Je komplexer die Benutzeroberfl√§che ist, desto einfacher ist es, sie zu wiederholen und seltsame Fehler zu bekommen.  Und in unserer Aufgabe haben sie noch keinen Nutzen.  Klassen oder Datenattribute sind also unsere Wahl. </blockquote><p>  Wenn Sie sich die Struktur des Dokuments im XML-Editor genau ansehen, werden Sie feststellen, dass vieles √ºberfl√ºssig ist.  Jeder mehr oder weniger komplexe Vektorgrafik-Editor f√ºgt Dokumenten etwas Eigenes hinzu.  All dies mit den H√§nden zu entfernen ist eine lange und undankbare Aufgabe, der Editor wird st√§ndig etwas hinzuf√ºgen.  Daher wird SVG erst am Ende der Arbeit vom M√ºll befreit.  Und vorzugsweise in automatisierter Form, da es fertige Optionen gibt, zum Beispiel das gleiche <a href="https://github.com/svg/svgo">svgo</a> . </p><br><p>  Suchen Sie ein Werkzeug namens Bezierkurven und Gerade zeichnen (Umschalt + F6).  Damit zeichnen wir geschlossene Konturen um die Objekte.  In unserer Aufgabe m√ºssen wir alle Geb√§ude umrei√üen.  Zum Beispiel beschr√§nken wir uns auf sechs, aber unter realen Bedingungen w√§re es sinnvoll, Zeit im Voraus zuzuweisen, um alle erforderlichen Objekte genau zu umrei√üen.  Obwohl es h√§ufig viele √§hnliche Objekte gibt, k√∂nnen dieselben Stockwerke in einem Geb√§ude absolut identisch sein.  In solchen F√§llen k√∂nnen Sie die Geschwindigkeit etwas erh√∂hen und die Kurven kopieren und einf√ºgen. </p><br><p>  Nachdem wir die erforderlichen Geb√§ude umrundet haben, kehren wir zum XML-Editor zur√ºck, f√ºgen Klassen hinzu, oder es werden h√∂chstwahrscheinlich noch bequemere Datenattribute mit Indizes f√ºr sie sein (dies ist mit Adressen m√∂glich, aber da wir einen fiktiven Bereich haben, gibt es nur einen Indizes), und verschieben Sie alles auf die zuvor erstellte Ebene, sodass alles ‚Äûin Regalen angeordnet‚Äú wird.  Und das Bild wird √ºbrigens auch n√ºtzlich sein, um sich dorthin zu bewegen, so dass alles an einem Ort ist, aber das sind Kleinigkeiten. </p><br><p>  Nachdem Sie nun einen Pfad - eine Kurve um das Geb√§ude - ausgew√§hlt haben, k√∂nnen Sie alle mit Strg + A oder Men√º&gt; Bearbeiten&gt; Alle ausw√§hlen und gleichzeitig bearbeiten.  Sie m√ºssen sie alle im Fenster ‚ÄûF√ºllen und Konturieren‚Äú malen und gleichzeitig den zus√§tzlichen Strich dort entfernen.  Nun, oder f√ºgen Sie es hinzu, wenn Sie es aus Designgr√ºnden ben√∂tigen. </p><br><p><img src="https://habrastorage.org/webt/du/qi/7d/duqi7d2_rtovsgoo9osa-vo25-w.jpeg"></p><br><blockquote>  Es ist sinnvoll, alle Konturen mit einer Farbe mit einem f√ºr sie minimalen Deckkraftwert zu bemalen, auch wenn dies aus gestalterischer Sicht nicht erforderlich ist.  Fakt ist, dass intelligente Browser der Ansicht sind, dass Sie nicht auf einen leeren Pfad, sondern auf einen √ºberfluteten Pfad klicken k√∂nnen, auch wenn niemand diese F√ºllung sieht. </blockquote><p>  In unserem Beispiel lassen wir ein kleines Highlight in Wei√ü, um besser zu sehen, mit welchen Geb√§uden wir arbeiten, alles zu speichern und reibungslos zum Browser und zum bekannteren Code-Editor zu wechseln. </p><br><h2 id="bazovyy-primer">  Einfaches Beispiel </h2><br><p>  Erstellen wir eine leere HTML-Seite, f√ºgen die resultierende SVG-Datei direkt ein und f√ºgen CSS hinzu, damit nichts aus dem Bildschirm herauskommt.  Es gibt nichts zu kommentieren. </p><br><pre><code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.map</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">90%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">1300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">2rem</span></span> auto; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span> solid <span class="hljs-number"><span class="hljs-number">#fff</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">box-shadow</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> .<span class="hljs-number"><span class="hljs-number">5rem</span></span> <span class="hljs-built_in"><span class="hljs-built_in">rgba</span></span>(0, 0, 0, .3); } <span class="hljs-selector-class"><span class="hljs-selector-class">.map</span></span> &gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">svg</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: .<span class="hljs-number"><span class="hljs-number">5rem</span></span>; }</code> </pre> <br><p>  Wir erinnern uns, dass wir Geb√§ude mit Klassen versehen und diese so verwenden, dass CSS mehr oder weniger strukturiert ist. </p><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.building</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">transition</span></span>: opacity .<span class="hljs-number"><span class="hljs-number">3s</span></span> ease-in-out; } <span class="hljs-selector-class"><span class="hljs-selector-class">.building</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: .<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.building</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.-available</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: <span class="hljs-number"><span class="hljs-number">#0f0</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.building</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.-reserved</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: <span class="hljs-number"><span class="hljs-number">#f00</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.building</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.-service</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: <span class="hljs-number"><span class="hljs-number">#fff</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; }</code> </pre> <br><p>  Da wir Inline-Stile in Inkscape definiert haben, m√ºssen wir sie in CSS unterbrechen.  W√§re es bequemer, alles in CSS zu machen?  Ja und nein  Es kommt auf die Situation an.  Manchmal gibt es keine Wahl.  Zum Beispiel, wenn ein Designer viel von allem bunt gezeichnet hat und alles in CSS verpackt hat und es so aufbl√§st, dass es irgendwie unm√∂glich ist, es nicht richtig zu machen.  In diesem Beispiel verwende ich die Option "unbequem", um zu zeigen, dass sie im Kontext des zu l√∂senden Problems nicht besonders be√§ngstigend ist. </p><br><p><img src="https://habrastorage.org/webt/t0/r4/nr/t0r4nr0bqr-zyblc_srzafnogis.jpeg"></p><br><p>  Angenommen, wir haben neue Daten zu H√§usern erhalten und f√ºgen ihnen je nach aktuellem Status verschiedene Klassen hinzu: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">id_0</span></span>: { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'service'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_1</span></span>: { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'available'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_2</span></span>: { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'reserved'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_3</span></span>: { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'available'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_4</span></span>: { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'available'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_5</span></span>: { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'reserved'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">messages</span></span>: { <span class="hljs-string"><span class="hljs-string">'available'</span></span>: <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">'reserved'</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'service'</span></span>: <span class="hljs-string"><span class="hljs-string">'  1-2 '</span></span> } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> map = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'my-map'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> buildings = map.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'.building'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (building <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> buildings) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = building.getAttribute(<span class="hljs-string"><span class="hljs-string">'data-building-id'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> status = data[<span class="hljs-string"><span class="hljs-string">`id_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">`</span></span>].status; building.classList.add(<span class="hljs-string"><span class="hljs-string">`-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${status}</span></span></span><span class="hljs-string">`</span></span>); }</code> </pre> <br><p>  Wir bekommen so etwas: </p><br><p><img src="https://habrastorage.org/webt/zm/n6/tx/zmn6txixk7isjsgy9hdkukjjyc0.jpeg"></p><br><p>  √Ñhnliches wie das, was wir brauchen, ist bereits sichtbar.  Zu diesem Zeitpunkt haben wir Objekte auf dem Gel√§nde markiert, die auf das Schweben der Maus reagieren.  Und es ist nicht schwierig, ihnen eine Antwort auf einen Mausklick √ºber den Standard-AddEventListener hinzuzuf√ºgen. </p><br><h2 id="leader-line">  F√ºhrungslinie </h2><br><p>  H√§ufig besteht die Aufgabe darin, Linien zu erstellen, die die Objekte auf der Karte und einige Elemente auf der Seite mit zus√§tzlichen Informationen verbinden, sowie minimale QuickInfos zu erstellen, wenn Sie mit der Maus √ºber dieselben Objekte fahren.  Um diese Probleme zu l√∂sen, ist die <a href="https://github.com/anseki/leader-line">Leader-Line</a> -Minibibliothek sehr gut geeignet, die Vektorpfeile f√ºr jeden Geschmack und jede Farbe erstellt. </p><br><p>  F√ºgen wir den Daten die Preise f√ºr QuickInfos hinzu und zeichnen Sie diese Linien. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">id_0</span></span>: { <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-string"><span class="hljs-string">'3000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'service'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_1</span></span>: { <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-string"><span class="hljs-string">'3000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'available'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_2</span></span>: { <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-string"><span class="hljs-string">'2000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'reserved'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_3</span></span>: { <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-string"><span class="hljs-string">'5000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'available'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_4</span></span>: { <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-string"><span class="hljs-string">'2500'</span></span>, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'available'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">id_5</span></span>: { <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-string"><span class="hljs-string">'2500'</span></span>, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-string"><span class="hljs-string">'reserved'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">messages</span></span>: { <span class="hljs-string"><span class="hljs-string">'available'</span></span>: <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">'reserved'</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'service'</span></span>: <span class="hljs-string"><span class="hljs-string">'   (1-2 )'</span></span> } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> map = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'my-map'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> buildings = map.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'.building'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> info = map.querySelector(<span class="hljs-string"><span class="hljs-string">'.info'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lines = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (building <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> buildings) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = building.getAttribute(<span class="hljs-string"><span class="hljs-string">'data-building-id'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> status = data[<span class="hljs-string"><span class="hljs-string">`id_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">`</span></span>].status; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> price = data[<span class="hljs-string"><span class="hljs-string">`id_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">`</span></span>].price; building.classList.add(<span class="hljs-string"><span class="hljs-string">`-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${status}</span></span></span><span class="hljs-string">`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> line = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LeaderLine( LeaderLine.pointAnchor(building, { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-string"><span class="hljs-string">'50%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-string"><span class="hljs-string">'50%'</span></span> }), LeaderLine.pointAnchor(info, { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-string"><span class="hljs-string">'50%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }), { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#fff'</span></span>, <span class="hljs-attr"><span class="hljs-attr">startPlug</span></span>: <span class="hljs-string"><span class="hljs-string">'arrow1'</span></span>, <span class="hljs-attr"><span class="hljs-attr">endPlug</span></span>: <span class="hljs-string"><span class="hljs-string">'behind'</span></span>, <span class="hljs-attr"><span class="hljs-attr">endSocket</span></span>: <span class="hljs-string"><span class="hljs-string">'top'</span></span> } ); lines.push(line); }</code> </pre> <br><p>  Wie Sie sehen, passiert nichts Kompliziertes.  Die Linie hat ‚ÄûBefestigungspunkte‚Äú zu den Elementen.  Die Koordinaten dieser Punkte relativ zu den Elementen lassen sich in der Regel bequem in Prozent bestimmen.  Im Allgemeinen gibt es viele verschiedene Optionen. Es ist nicht sinnvoll, sie aufzulisten und sich zu merken. Ich empfehle daher, nur die Dokumentation durchzusehen.  Eine dieser Optionen - startLabel - wird ben√∂tigt, um einen kleinen Tooltip mit einem Preis zu erstellen. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> line = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LeaderLine( LeaderLine.pointAnchor(building, { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-string"><span class="hljs-string">'50%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-string"><span class="hljs-string">'50%'</span></span> }), LeaderLine.pointAnchor(info, { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-string"><span class="hljs-string">'50%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }), { <span class="hljs-attr"><span class="hljs-attr">startLabel</span></span>: LeaderLine.captionLabel(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${price}</span></span></span><span class="hljs-string">/`</span></span>, { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Rubik Mono One'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-attr"><span class="hljs-attr">offset</span></span>: [<span class="hljs-number"><span class="hljs-number">-30</span></span>, <span class="hljs-number"><span class="hljs-number">-50</span></span>], <span class="hljs-attr"><span class="hljs-attr">outlineColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#555'</span></span> }), <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#fff'</span></span>, <span class="hljs-attr"><span class="hljs-attr">startPlug</span></span>: <span class="hljs-string"><span class="hljs-string">'arrow1'</span></span>, <span class="hljs-attr"><span class="hljs-attr">endPlug</span></span>: <span class="hljs-string"><span class="hljs-string">'behind'</span></span>, <span class="hljs-attr"><span class="hljs-attr">endSocket</span></span>: <span class="hljs-string"><span class="hljs-string">'top'</span></span>, <span class="hljs-attr"><span class="hljs-attr">hide</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } );</code> </pre> <br><blockquote>  Es st√∂rt niemanden, alle Tipps in einem grafischen Editor zu zeichnen.  Wenn sie konsistenten Inhalt haben sollen, kann es sogar praktisch sein.  Vor allem, wenn es darum geht, sie nach unterschiedlichen Positionen f√ºr unterschiedliche Objekte zu fragen. </blockquote><p>  Wir k√∂nnen auch die Option zum Ausblenden hinzuf√ºgen, damit nicht alle Linien als Besen angezeigt werden.  Wir zeigen sie nacheinander, wenn Sie mit der Maus √ºber die Geb√§ude fahren, denen sie entsprechen: </p><br><pre> <code class="javascript hljs">building.addEventListener(<span class="hljs-string"><span class="hljs-string">'mouseover'</span></span>, () =&gt; { line.show(); }); building.addEventListener(<span class="hljs-string"><span class="hljs-string">'mouseout'</span></span>, () =&gt; { line.hide(); });</code> </pre> <br><p>  Hier k√∂nnen Sie zus√§tzliche Informationen (in unserem Fall einfach den aktuellen Status des Objekts) an der Stelle zur Information anzeigen.  Es wird sich fast herausstellen, was ben√∂tigt wird: </p><br><p><img src="https://habrastorage.org/webt/dj/6q/-3/dj6q-39gunb8vxq35elxb0bwse0.jpeg"></p><br><p>  Solche Dinge sind selten f√ºr mobile Ger√§te konzipiert, aber es ist zu beachten, dass sie h√§ufig auf dem Desktop im Vollbildmodus angezeigt werden, und sogar mit einigen Bedienfeldern an der Seite f√ºr zus√§tzliche Informationen, und Sie m√ºssen alles sch√∂n strecken.  So etwas zum Beispiel: </p><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">svg</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; }</code> </pre> <br><p>  In diesem Fall stimmen die Proportionen des SVG-Elements definitiv nicht mit den Proportionen des Bilds √ºberein.  Was zu tun </p><br><h2 id="nesovpadayuschie-proporcii">  Nicht √ºbereinstimmende Proportionen </h2><br><p>  Das erste, was mir einf√§llt, ist die <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit">Objektanpassung: Cover-</a> Eigenschaft von CSS.  Aber es gibt einen Punkt: Es ist absolut nicht in der Lage, mit SVG zu arbeiten.  Und selbst wenn es funktionieren w√ºrde, k√∂nnten die H√§user an den R√§ndern des Plans aus den R√§ndern des Schemas herauskommen und v√∂llig unzug√§nglich werden.  Hier m√ºssen Sie also einen etwas komplizierteren Weg gehen. </p><br><p>  Erster Schritt.  SVG hat ein Attribut <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio">preserveAspectRatio</a> , das der Eigenschaft object-fit etwas √§hnlich ist (nat√ºrlich nicht ganz, aber ...).  Durch <code>preserveAspectRatio="xMinYMin slice"</code> f√ºr das Haupt-SVG-Element unseres Plans erhalten wir eine erweiterte Schaltung ohne Hohlr√§ume an den R√§ndern und ohne Verzerrung. </p><br><p>  Zweiter Schritt  Sie m√ºssen mit der Maus ziehen und ablegen.  Technisch haben wir noch eine solche Chance.  Hier ist die Aufgabe vor allem f√ºr Anf√§nger komplizierter.  Theoretisch gibt es Standardereignisse f√ºr Maus und Touchscreen, die verarbeitet werden k√∂nnen und den Wert daf√ºr ermitteln, um wie viel die Karte verschoben werden muss.  In der Praxis kann man sich jedoch sehr lange darauf einlassen.  <a href="https://hammerjs.github.io/">Hammer.js</a> wird zur <a href="https://hammerjs.github.io/">Hilfe kommen</a> - eine weitere kleine Bibliothek, die die gesamte interne K√ºche in sich aufnimmt und eine einfache Oberfl√§che zum Arbeiten mit Drag &amp; Drop, Wischen usw. bietet. </p><br><p>  Wir m√ºssen die Ebene mit den Geb√§uden und dem Bild in alle Richtungen bewegen.  Machen Sie es sich einfach: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> buildingsLayer = map.querySelector(<span class="hljs-string"><span class="hljs-string">'.buildings_layer'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hammertime = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Hammer(buildingsLayer); hammertime.get(<span class="hljs-string"><span class="hljs-string">'pan'</span></span>).set({ <span class="hljs-attr"><span class="hljs-attr">direction</span></span>: Hammer.DIRECTION_ALL });</code> </pre> <br><p>  Standardm√§√üig enth√§lt hammer.js auch die Erkennung von svaypas, wir ben√∂tigen sie jedoch nicht auf der Karte. Deaktivieren Sie sie daher sofort, um uns nicht zu t√§uschen: </p><br><pre> <code class="javascript hljs">hammertime.get(<span class="hljs-string"><span class="hljs-string">'swipe'</span></span>).set({ <span class="hljs-attr"><span class="hljs-attr">enable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> });</code> </pre> <br><p>  Jetzt musst du irgendwie verstehen, was genau du posten musst, um die Karte nur an die R√§nder zu verschieben, aber nicht weiter.  Ausgehend von einer einfachen Darstellung von zwei Rechtecken in unserem Kopf verstehen wir, dass wir dazu die Einr√ºckung der Ebene mit Geb√§uden aus dem √ºbergeordneten Element (in unserem Fall SVG) von allen vier Seiten herausfinden m√ºssen.  GetBoundingClientRect kommt zur Rettung: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> layer = buildingsLayer.getBoundingClientRect(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> parent = svg.getBoundingClientRect(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> offsets = { <span class="hljs-attr"><span class="hljs-attr">top</span></span>: layer.top - parent.top, <span class="hljs-attr"><span class="hljs-attr">bottom</span></span>: layer.bottom - parent.bottom, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: layer.right - parent.right, <span class="hljs-attr"><span class="hljs-attr">left</span></span>: layer.left - parent.left, };</code> </pre> <br><p>  Und warum haben wir immer noch keine zivilisierte (und stabile) M√∂glichkeit, dies zu tun?  Das Abrufen von getBoundingClientRect ist in Bezug auf die Leistung jedes Mal sehr schlecht, aber die Auswahl ist nicht sehr reichhaltig und es ist fast unm√∂glich, eine Hemmung zu bemerken, sodass wir keine vorzeitigen Optimierungen finden, bei denen alles gut funktioniert.  So oder so k√∂nnen wir die Position der Ebene bei Geb√§uden √ºberpr√ºfen und alles nur verschieben, wenn es Sinn macht: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> translateX = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> translateY = <span class="hljs-number"><span class="hljs-number">0</span></span>; hammertime.on(<span class="hljs-string"><span class="hljs-string">'pan'</span></span>, (e) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> layer = buildingsLayer.getBoundingClientRect(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> parent = svg.getBoundingClientRect(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> offsets = { <span class="hljs-attr"><span class="hljs-attr">top</span></span>: layer.top - parent.top, <span class="hljs-attr"><span class="hljs-attr">bottom</span></span>: layer.bottom - parent.bottom, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: layer.right - parent.right, <span class="hljs-attr"><span class="hljs-attr">left</span></span>: layer.left - parent.left, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> speedX = e.velocityX * <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> speedY = e.velocityY * <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speedX &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; offsets.left &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  } else if (speedX &lt; 0 &amp;&amp; offsets.right &gt; 0) { //  } if (speedY &gt; 0 &amp;&amp; offsets.top &lt; 0) { //  } else if (speedY &lt; 0 &amp;&amp; offsets.bottom &gt; 0) { //   } buildingsLayer.setAttribute('transform', `translate(${translateX} ${translateY})`); });</span></span></code> </pre> <br><p>  An den R√§ndern lohnt es sich in der Regel, langsamer zu fahren, damit es nicht zu pl√∂tzlichen Stopps oder Rucken kommt.  So geht alles in etwa so vor und zur√ºck: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speedX &lt; -offsets.left) { translateX += speedX; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { translateX += -offsets.left * speedX / <span class="hljs-number"><span class="hljs-number">10</span></span>; }</code> </pre> <br><p>  Es gibt viele M√∂glichkeiten zur Verlangsamung.  Dieser ist der einfachste.  Und ja, es ist nicht sehr sch√∂n, aber es ist dumm wie ein Korken und klar.  Die Koeffizienten in solchen Beispielen werden in Abh√§ngigkeit vom gew√ºnschten Verhalten der Karte normalerweise per Auge ausgew√§hlt. </p><br><p>  Wenn Sie einen Browser √∂ffnen und mit der Fenstergr√∂√üe in den Tools des Entwicklers spielen, k√∂nnen Sie feststellen, dass ein Fehler aufgetreten ist ... </p><br><h2 id="nechistye-sily">  Unreine Kr√§fte </h2><br><p>  Auf Desktop-Ger√§ten funktioniert alles, aber auf Mobilger√§ten geschieht Magie: Anstatt die Karte zu verschieben, bewegt sich das K√∂rperelement.  Oooooooo!  Nur die Besetzung reicht da nicht.  Obwohl in Ordnung, geschieht dies, weil irgendwo etwas √ºberl√§uft und ein √úberschreiben nicht eingestellt wurde: versteckt.  In unserem Fall kann es jedoch vorkommen, dass sich √ºberhaupt nichts bewegt. </p><br><blockquote>  Ein R√§tsel f√ºr gr√ºne Schriftsetzer: Es gibt das Element g im Element svg im Element div im Element body im Element html.  Doctype nat√ºrlich HTML.  Wenn Sie transform: translate (...) hinzuf√ºgen, um das g-Element zu ziehen, bewegt es sich auf dem Laptop wie beabsichtigt, auf dem Telefon jedoch nicht einmal.  Es gibt keine Fehler in der Konsole.  Aber es gibt definitiv einen Bug.  Der Browser ist das letzte Chrome da und dort.  Die Frage ist warum? </blockquote><p>  <em>Ich schlage vor, Sie denken ungef√§hr 10 Minuten ohne Google nach, bevor Sie die Antwort lesen.</em> </p><br><p><img src="https://habrastorage.org/webt/th/ec/yg/thecygjfpw8dtmjtlwtc1ds5x8m.png"></p><br><div class="spoiler">  <b class="spoiler_title">Die antwort</b> <div class="spoiler_text"><p>  Ha ha!  Ich habe dich betrogen.  Genauer gesagt nicht so.  Ich habe beschrieben, was wir beim manuellen Testen beobachten w√ºrden.  Aber in Wirklichkeit funktioniert alles so, wie es sollte.  Dies ist kein Fehler, sondern eine Funktion, die mit der CSS-Eigenschaft von <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action">touch-action zusammenh√§ngt</a> .  Im Kontext unserer Aufgabe (ganz pl√∂tzlich!) Zeigt sich, dass sie existiert und dar√ºber hinaus einen bestimmten Wert hat, der die gesamte Logik der Interaktion mit der Karte durchbricht.  Deshalb gehen wir sehr grob mit ihm um: </p><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">svg</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">touch-action</span></span>: none <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; }</code> </pre> </div></div><br><p>  Aber zur√ºck zu unseren Schafen und schauen Sie sich das Ergebnis an (es ist nat√ºrlich besser, es in einem separaten Tab zu √∂ffnen): </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/sfi0zy/embed/preview/ZEYYjZL" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Ich habe beschlossen, den Code f√ºr keines der modischen Frameworks anzupassen, damit er in Form eines neutralen, formlosen Rohlings bleibt, auf dem Sie beim Erstellen Ihrer Komponenten aufbauen k√∂nnen. </p><br><h2 id="chto-v-itoge">  Was ist das ergebnis </h2><br><p>  Nach langer Zeit haben wir einen Plan erstellt, auf dem ein Rasterbild angezeigt wird, das die verschiedenen Details hervorhebt und nicht miteinander verbundene Objekte mit Pfeilen und Reaktionen mit der Maus verbindet.  Ich hoffe, dass es mir gelungen ist, die Grundidee zu vermitteln, wie das alles in der ‚ÄûBudget‚Äú -Version gemacht wird.  Wie wir am Anfang des Artikels bemerkt haben, gibt es viele verschiedene Anwendungen, einschlie√ülich solcher, die sich nicht auf verwirrte Design-Sites beziehen (obwohl dieser Ansatz bei ihnen sehr h√§ufig angewendet wird).  Wenn Sie etwas √ºber interaktive, aber bereits dreidimensionale Dinge lesen m√∂chten, hinterlasse ich einen Link zu einem Artikel zum Thema - <a href="https://habr.com/ru/post/433876/">Dreidimensionale Produktpr√§sentationen auf Three.js f√ºr die Kleinsten</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de478698/">https://habr.com/ru/post/de478698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de478688/index.html">Wie es war, 2019 Data Science zu studieren</a></li>
<li><a href="../de478690/index.html">Dynamische Assemblierung und Bereitstellung von Docker-Images mit werf anhand der Beispielsite der versionierten Dokumentation</a></li>
<li><a href="../de478692/index.html">Wie Java 8 auf Android unterst√ºtzt wird</a></li>
<li><a href="../de478694/index.html">Da empfehlen wir die neuesten Kataloge im ivi Online-Kino (+ Python-Code)</a></li>
<li><a href="../de478696/index.html">Wie ich Urban Tech 2019 besuchte. Veranstaltungsbericht</a></li>
<li><a href="../de478702/index.html">Metrische Verarbeitungstricks in Kapacitor</a></li>
<li><a href="../de478706/index.html">Hochlast-Architekt. Neuer Kurs von OTUS</a></li>
<li><a href="../de478708/index.html">Wie Sie mit Zufallsgeneratoren alten Spielen neues Leben einhauchen k√∂nnen</a></li>
<li><a href="../de478710/index.html">Einfache und √ºbersichtliche Bereitstellung von Anwendungen auf Tarantool Cartridge (Teil 1)</a></li>
<li><a href="../de478712/index.html">So zahlen Sie nicht f√ºr Java-Hosting oder den Schnellstart mit Google App Engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>