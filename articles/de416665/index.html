<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ü ü§õüèº üßìüèø Wiederverwendung privater Android-Bibliotheken mit Sonatype Nexus Repository OSS üíÜüèº ü•§ üçä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich denke, dass viele die Notwendigkeit hatten, einzelne Module ihrer Android-Anwendung in einem anderen Projekt wiederzuverwenden. Es gibt einfache M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wiederverwendung privater Android-Bibliotheken mit Sonatype Nexus Repository OSS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416665/"> <i>Ich denke, dass viele die Notwendigkeit hatten, einzelne Module ihrer Android-Anwendung in einem anderen Projekt wiederzuverwenden.</i>  <i>Es gibt einfache M√∂glichkeiten, um dieses Problem zu l√∂sen. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hosten Sie</a> beispielsweise Ihre Android-Bibliothek √∂ffentlich mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JitPack</a> .</i>  <i>Die L√∂sung ist ausgezeichnet, aber wenn Sie die Bibliothek privat platzieren m√ºssen, m√ºssen Sie bezahlen, und der Tarif h√§ngt meistens von der Anzahl der platzierten Artefakte ab.</i>  <i>Diese L√∂sung ist nicht f√ºr jeden geeignet.</i> <i><br><br></i>  <i>Im Folgenden werde ich eine einfache L√∂sung f√ºr dieses Problem mit Sonatype Nexus Repository OSS anbieten.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sx/ob/tl/sxobtlhtftpweuwfp36sn0xqtou.png"></div><a name="habracut"></a><br><h2>  Einf√ºhrung </h2><br>  Der Artikel soll nicht umfassend sein und spiegelt nur eine grundlegende L√∂sung wider.  Als Ergebnis haben Sie Software zum Verwalten von Artefakten auf der Seite eines Hosts installiert, ein Skript zum Ver√∂ffentlichen einer Android-Bibliothek und die M√∂glichkeit, Abh√§ngigkeiten in Ihrer Anwendung aus dem lokalen Maven-Repository zu implementieren.  Vielleicht gibt es bereits Ver√∂ffentlichungen dieser Art auf Habr√©, aber ich habe kein verst√§ndliches Tutorial f√ºr den Android-Entwickler gefunden, das mich dazu veranlasste, Informationen mit Ihnen zu teilen.  Ich werde mich freuen, wenn sich herausstellt, dass es bei der Arbeit wirklich n√ºtzlich ist. <br><br><h3>  Schritt 1. Vorbereitung </h3><br>  Zuerst m√ºssen Sie entscheiden, wo Nexus installiert werden soll.  Es ist logisch, wenn dies ein Server ist, auf den Sie w√§hrend der Entwicklung immer Zugriff haben.  In diesem Artikel installieren wir Nexus auf demselben Host, auf dem wir entwickeln.  Die Unterschiede bei der Installation auf dem Server bestehen nur in der IP-Adresse, unter der wir auf die Repositorys zugreifen. <br><br>  Vor der Installation von Nexus m√ºssen Sie JRE <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">herunterladen</a> und installieren.  Nur Oracle JRE ist geeignet und nur Version 1.8 (versucht 10, aber Nexus schwor), dies ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in der Dokumentation deutlich angegeben</a> .  Denken Sie daran, den Pfad zu den ausf√ºhrbaren JRE-Dateien in Ihrem PATH hinzuzuf√ºgen. <br><br>  Als n√§chstes m√ºssen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nexus von der offiziellen Website herunterladen</a> .  Zum Zeitpunkt des Schreibens ist dies Version 3.12 <br><br><h3>  Schritt 2. Installieren und konfigurieren Sie Nexus </h3><br>  Es reicht aus, das heruntergeladene Archiv dort zu entpacken, wo es f√ºr Sie bequem ist.  Dann k√∂nnen Sie das Programm starten und mit der Arbeit beginnen.  F√ºr eine langfristige und bequeme Verwendung m√ºssen Sie Nexus als Dienst registrieren und beim Start des Betriebssystems ausf√ºhren.  Wie das geht, ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in der Dokumentation</a> ganz klar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beschrieben</a> .  In unserem Fall gehen Sie einfach in den <code>nexus-3.12/bin/</code> " <code>nexus-3.12/bin/</code> " und f√ºhren Sie die Nexus-Datei √ºber die Befehlszeile aus. <br><br>  Im Fall von c Windows: <br><br><pre> <code class="bash hljs">nexus.exe /run</code> </pre> <br>  Im Fall von Unix: <br><br><pre> <code class="bash hljs">./nexus run</code> </pre> <br>  Infolgedessen sollte eine Benachrichtigung √ºber einen erfolgreichen Start angezeigt werden. Sie sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/y3/cm/-p/y3cm-pjjz88bd0w98he6o-koov0.png"><br></div></div><br>  Es ist an der Zeit, die Funktionalit√§t des Nexus zu testen.  Gehen Sie dazu einfach auf den Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http: // localhost: 8081</a> .  Wie Sie verstehen, m√ºssen Sie im Fall eines Servers anstelle von " <code>localhost</code> " die IP-Adresse Ihres Servers angeben, und Nexus verwendet Port 8081, um zu arbeiten. Diese Seite wird angezeigt: <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4j/9r/gw/4j9rgwjh5sh3fe4qwlakw1ncu1a.png"><br></div></div><br>  Zun√§chst m√ºssen Sie sich anmelden, oben rechts auf "Anmelden" klicken und den Login ( <code>admin</code> ) und das Passwort ( <code>admin123</code> ) des Administrators <code>admin123</code> .  Danach erscheint das Zahnradsymbol, indem Sie darauf klicken, um in die Einstellungen zu gelangen. <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/v0/9m/jz/v09mjzgstl_cec4ypfaub3ocrng.png"><br></div></div><br>  Auf dem Einstellungsbildschirm sehen Sie Links zu <code>Blob Stores</code> und <code>Repositories</code> .  <code>Blob Stores</code> sind die Repositorys f√ºr Ihre Repository-Daten.  In den Einstellungen jedes Repositorys k√∂nnen Sie einen bestimmten <code>Blob Store</code> zum Speichern von Informationen angeben.  Eine wird f√ºr uns ausreichen, standardm√§√üig erstellt.  <code>Repositories</code> sind die f√ºr uns interessanten Repositories, in denen die Bibliotheken gespeichert werden. <br><br>  Bevor Sie jedoch mit der Beschreibung der Repositorys fortfahren, sollten Sie grundlegende Einstellungen f√ºr Benutzer vornehmen.  Gehen wir zum Abschnitt " <code>Roles</code> ". <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hk/ej/bf/hkejbf6v6vfhkrouiyvzwgu4w78.png"><br></div></div><br>  Zus√§tzlich zu den Rollen des Administrators und des anonymen Benutzers schlage ich vor, Rollen vom Typ " <code>Downloader</code> " zuzuweisen - zum Laden von Abh√§ngigkeiten in Projekte " <code>Contributor</code> " - zum Senden von Bibliotheken an Nexus. <br><br>  Klicken Sie auf "Rolle erstellen", w√§hlen Sie dann die "Nexus-Rolle" aus und geben Sie die Daten f√ºr den "Downloader" wie im folgenden Screenshot ein: <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3h/46/f3/3h46f3qn0okr_a0bacvz9bua4ya.png"><br></div></div><br>  Welche Berechtigungen sind f√ºr das verantwortlich, was <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in der Dokumentation</a> ausf√ºhrlich beschrieben wird.  Wir m√ºssen ein Privileg mit dem Flag " <code>repository-view</code> " ausw√§hlen (es ist f√ºr die Arbeit mit den Daten der Repositorys verantwortlich). Das Privileg sollte auch das Recht zum Lesen der Repository-Daten einr√§umen. Dies ist das Flag " <code>read</code> ". Da wir in Android mit Maven-Repositorys arbeiten, lohnt es sich <code>maven2</code> Flag " <code>maven2</code> ", um zu verhindern, dass der Benutzer mit anderen Arten von Repositorys arbeitet.  Klicken Sie auf " <code>Create role</code> ". <br><br>  In Analogie erstellen wir die Rolle " <code>Contributor</code> ".  Der einzige Unterschied besteht darin, dass wir das Lesen direkt von der Rolle " <code>Downloader</code> " (Einstellung am Ende der Seite) erben und mit unseren H√§nden Berechtigungen zum Bearbeiten, Hinzuf√ºgen von Artefakten zum Repository und zum Anzeigen der Daten der Repositorys √ºber die Weboberfl√§che erteilen. <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zy/9f/ya/zy9fyarwz7uh9gpimpq7nnccwsm.png"><br></div></div><br>  Erstellen Sie als N√§chstes die Benutzer, denen wir die konfigurierten Rollen zuweisen.  Wir gehen zum Abschnitt " <code>Users</code> " (auf der linken Seite des Fensters) und klicken auf " <code>Create local user</code> ".  Zur √úberpr√ºfung k√∂nnen Sie Kennw√∂rter festlegen, die dem Standard-Administratorkennwort √§hnlich sind, dh " <code>downloader123</code> " und " <code>contributor123</code> ".  Probenf√ºllung auf dem Bildschirm: <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/e3/us/dv/e3usdvidigjijw9nlrn4kvel-eq.png"><br></div></div><br>  Da unser Ziel die private Arbeit ist, lohnt es sich, den Zugriff auf Repository-Daten f√ºr anonyme Benutzer zu deaktivieren. Gehen Sie dazu zum Benutzer " <code>anonimous</code> " und √§ndern Sie seinen Status von " <code>Active</code> " in " <code>Disabled</code> ".  In diesem Fall ist es nicht m√∂glich, Abh√§ngigkeiten im Android-Projekt anonym abzurufen, sondern nur mit einem bestimmten Benutzer und Kennwort. Es ist jedoch weiterhin m√∂glich, Daten √ºber die Weboberfl√§che herunterzuladen. <br><br>  Um zu verhindern, dass anonyme Benutzer den Inhalt der Repositorys √ºber die Weboberfl√§che <code>Anonimous</code> , gehen Sie zum Abschnitt " <code>Anonimous</code> " und deaktivieren <code>Allow anonymous users to access the server</code> Option " <code>Allow anonymous users to access the server</code> ".  Denken Sie daran, die √Ñnderungen zu speichern. <br><br>  Der letzte Schritt bleibt - das Einrichten von Repositorys.  Gehen Sie zum Abschnitt " <code>Repositories</code> " und sehen Sie sich die dort erstellten Standard-Repositorys an.  Unter ihnen gibt es Repositorys " <code>maven2</code> ". Wenn Sie genau hinschauen, k√∂nnen Sie verschiedene Typen sehen: "Proxy", "Gruppe", "gehostet".  Wenn das Proxy-Repository den Benutzer einfach an ein anderes Repository weiterleitet, ist dies im Fall des vorkonfigurierten " <code>maven-central</code> " ein Link zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://repo1.maven.org/maven2/</a> . "Group" kann mehrere Repositorys enthalten. und "gehostet" ist bereits ein bestimmtes Repository, das in Nexus gespeichert ist.  Sie werden uns jetzt n√ºtzlich sein. <br><br>  Erstellen Sie Repositorys f√ºr die Versionen "Release" und "Snapshot" der Artefakte.  Klicken Sie auf " <code>Create repository</code> " und w√§hlen Sie " <code>maven2 (hosted)</code> ".  Wir werden das erste Repository "android" nennen und es einfach speichern, ohne die Einstellungen zu √§ndern: <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5m/ak/n9/5makn9e9beis7qcsj6fbd0gv8yq.png"><br></div></div><br>  Wir nennen das zweite Repository "android_snapshot", √§ndern die " <code>Version policy</code> " in "Spapshot" und die " <code>Deployment policy</code> " in "Neu bereitstellen zulassen". <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dh/lb/3b/dhlb3bf_iy8to-k2r3952qrmlem.png"><br></div></div><br>  Wenn nicht klar ist, was dies betrifft, k√∂nnen Sie es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> lesen.  Tats√§chlich kann das "Android" -Repository nicht wiederholt dieselbe Version der Bibliothek herunterladen. Dies ist das √ºbliche Verhalten, wenn Sie beispielsweise mit maven-central kommunizieren.  F√ºr das Repository android_snapshot muss der Versionsname unbedingt auf SNAPSHOT enden, und dieselbe Version steht wieder zum Download zur Verf√ºgung. <br><br>  Beachten Sie auch die Tatsache, dass die Liste der Repositorys eine "URL" -Spalte mit "Kopieren" -Schaltfl√§chen enth√§lt. Diese Links werden wir in Zukunft ben√∂tigen, um auf Repositorys aus Projekten zugreifen zu k√∂nnen. <br><br>  Gl√ºckwunsch!  Die Grundkonfiguration von Nexus ist abgeschlossen. Es ist Zeit, mit dem Erstellen und Ver√∂ffentlichen der Bibliothek zu beginnen. <br><br><h3>  Schritt 3. Erstellen und ver√∂ffentlichen Sie die Android-Bibliothek </h3><br>  Wir erstellen das Android-Projekt, wir werden es "TestLibrary" nennen.  Klicken Sie anschlie√üend in der ‚ÄûProjektansicht‚Äú mit der rechten Maustaste auf das Projektstammverzeichnis und w√§hlen Sie ‚ÄûNeu‚Äú und ‚ÄûModul‚Äú.  W√§hlen Sie im folgenden Fenster "Android-Bibliothek" aus und nennen Sie die Bibliothek "HelloLibrary".  Als Ergebnis sehen Sie das Modul unserer neuen Bibliothek neben dem Modul ‚ÄûApp‚Äú. <br><br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zv/cl/hm/zvclhm_otuqkgiz7c_k5qrcsnnq.png"><br></div></div><br>  F√ºgen Sie der Bibliothek eine Klasse mit einer Willkommensfunktion hinzu: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.example.nexus.hellolibrary <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">helloFromOurLibrary</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { println(<span class="hljs-string"><span class="hljs-string">"### Hello World! This is our new Android library!"</span></span>) }</code> </pre><br>  Die Bibliothek ist fertig, es ist Zeit zu ver√∂ffentlichen.  F√ºgen Sie in der "Projektansicht" im Modul "hellolibrary" die Datei hinzu und nennen Sie sie "publisher.gradle".  Das Skript zum Ver√∂ffentlichen der Bibliothek wird gespeichert. <br><br><pre> <code class="hljs pgsql">//     apply plugin: <span class="hljs-string"><span class="hljs-string">'maven-publish'</span></span> ext { // URL  <span class="hljs-keyword"><span class="hljs-keyword">Release</span></span>  repositoryReleaseUrl = "http://localhost:8081/repository/android/" // URL  <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span>  repositorySnapshotUrl = "http://localhost:8081/repository/android_snapshot/" //  ,      contributorUserName = "contributor" //  ,      contributorPassword = "contributor123" //    libraryGroupId = "com.example.nexus" //   libraryArtifact = "hellolibrary" //   libraryVersion = "0.0.1" } //  publishing { //    repositories { //    maven { //     credentials { username contributorUserName <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> contributorPassword } //         <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span>     url libraryVersion.endsWith("SNAPSHOT") ? repositorySnapshotUrl : repositoryReleaseUrl } } //     maven-publish  publications { // AndroidLibrary -   ,    //  ,     AndroidLibrary(MavenPublication) { //     groupId libraryGroupId artifactId libraryArtifact <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> libraryVersion //      artifact "$buildDir/outputs/aar/${project.getName()}-release.aar" pom { //         , //   ClassNotFoundException   // . withXml { def dependencies = asNode().appendNode("dependencies") configurations.getByName("releaseCompileClasspath") .getResolvedConfiguration() .getFirstLevelModuleDependencies() .<span class="hljs-keyword"><span class="hljs-keyword">each</span></span> { def dependency = dependencies.appendNode("dependency") dependency.appendNode("groupId", it.moduleGroup) dependency.appendNode("artifactId", it.moduleName) dependency.appendNode("version", it.moduleVersion) } } // withXml } // pom } // AndroidLibrary } // publications //  assembleRelease   model { tasks.publishAndroidLibraryPublicationToMavenRepository { dependsOn project.tasks.assembleRelease } } } //publishing</code> </pre><br>  Gehen Sie als N√§chstes zum "build.gradle" unserer Bibliothek, wenden Sie unseren Herausgeber darauf an und entfernen Sie unn√∂tige Abh√§ngigkeiten: <br><pre> <code class="hljs pgsql">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> //  publisher apply <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: "publisher.gradle" android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { minSdkVersion <span class="hljs-number"><span class="hljs-number">18</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName "1.0" } buildTypes { <span class="hljs-keyword"><span class="hljs-keyword">release</span></span> { minifyEnabled <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { implementation fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version" } repositories { mavenCentral() }</code> </pre><br>  Jetzt k√∂nnen wir ver√∂ffentlichen, indem wir die Aufgabe " <code>publishAndroidLibraryPublicationToMavenRepository</code> " <code>publishAndroidLibraryPublicationToMavenRepository</code> . <br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hy/gu/ly/hyguly_fd3pu0wh1x7z6jxbg9kw.png"><br></div></div><br>  Die Bibliothek ist ver√∂ffentlicht, herzlichen Gl√ºckwunsch!  √úberpr√ºfen Sie das Ergebnis in der Weboberfl√§che unseres Nexus.  Gehen Sie zum Element "Durchsuchen" und w√§hlen Sie das Repository "Android" aus.  Sie sollten Folgendes sehen: <br><div class="spoiler">  <b class="spoiler_title">Bild</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/am/a-/l9/ama-l9nhjhc_wm1p6iaxoenp0ki.png"><br></div></div><br><h3>  Schritt 4. Verwenden von Abh√§ngigkeiten von Nexus </h3><br>  F√ºr den Test schlage ich vor, ein weiteres leeres Android-Projekt zu erstellen. <br><br>  Verbinden Sie zun√§chst das Repository mit dem Projekt, indem Sie einfach Daten zur Datei "build.gradle" auf Projektebene hinzuf√ºgen: <br><br><pre> <code class="hljs pgsql">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.2.50'</span></span> repositories { google() jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.1.3'</span></span> classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" } } allprojects { repositories { google() jcenter() //    maven { credentials { username "downloader" <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> "downloader123" } url "http://localhost:8081/repository/android" } } } task clean(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> rootProject.buildDir }</code> </pre><br>  Und jetzt, wie bei jeder anderen Bibliothek, erhalten wir durch die Implementierung in der Datei "build.gradle" der Ebene "app" eine Abh√§ngigkeit von unserer "hellolibrary". <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">apply</span></span> plugin: <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> android { <span class="hljs-attribute"><span class="hljs-attribute">compileSdkVersion</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { <span class="hljs-attribute"><span class="hljs-attribute">applicationId</span></span> <span class="hljs-string"><span class="hljs-string">"com.example.nexus.fff"</span></span> minSdkVersion <span class="hljs-number"><span class="hljs-number">18</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> testInstrumentationRunner <span class="hljs-string"><span class="hljs-string">"android.support.test.runner.AndroidJUnitRunner"</span></span> } buildTypes { <span class="hljs-section"><span class="hljs-section">release</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">minifyEnabled</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { <span class="hljs-attribute"><span class="hljs-attribute">implementation</span></span> fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, include: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation<span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$kotlin_version</span></span></span><span class="hljs-string">"</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support:appcompat-v7:28.0.0-alpha3'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span> testImplementation <span class="hljs-string"><span class="hljs-string">'junit:junit:4.12'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test:runner:1.0.2'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test.espresso:espresso-core:3.0.2'</span></span> //   implementation <span class="hljs-string"><span class="hljs-string">"com.example.nexus:hellolibrary:0.0.1"</span></span> }</code> </pre><br>  Der Pfad zur Abh√§ngigkeit wird als <code>groupId:artifactId:version</code> . <br><br>  Jetzt k√∂nnen Sie die Funktion <code>helloFromOurLibrary()</code> in Ihrem Android-Projekt aufrufen und die Leistung der gesamten Schaltung testen.  Gl√ºckwunsch! <br><br><h2>  Zusammenfassung </h2><br>  Jetzt haben Sie die M√∂glichkeit, private Android-Bibliotheken in Projekten wiederzuverwenden.  Warten auf Kommentare! <br><br>  Ich hoffe du hast deine Zeit nicht verschwendet, danke! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de416665/">https://habr.com/ru/post/de416665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de416651/index.html">1M HTTP-RPS auf 1 CPU-Kern. DPDK anstelle von Nginx + Linux Kernel TCP / IP</a></li>
<li><a href="../de416653/index.html">Bibliothek sortieren</a></li>
<li><a href="../de416657/index.html">Zwei Drittel der verwendeten Speicherkarten enthalten personenbezogene Daten von Vorbesitzern</a></li>
<li><a href="../de416659/index.html">Aufgrund dessen wird das Volumen der digitalen Zahlungen f√ºr die Gig Economy 1,2 Billionen Dollar erreichen</a></li>
<li><a href="../de416661/index.html">Welche Trends sollten Nutzer und Anbieter von Mobile Banking ber√ºcksichtigen?</a></li>
<li><a href="../de416667/index.html">Budget Staub- und Ger√§uschd√§mmung der alten Systemeinheit</a></li>
<li><a href="../de416669/index.html">Die ganze Wahrheit √ºber Linux Epoll</a></li>
<li><a href="../de416673/index.html">Analytische L√∂sung f√ºr Manager</a></li>
<li><a href="../de416677/index.html">Cyberpunk- und Spiegelgl√§ser: Reflexionen in Mode und Kultur</a></li>
<li><a href="../de416679/index.html">Peripheral Computing: eine freundschaftliche √úbereinstimmung des "Nebels" mit den "Wolken"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>