<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÜ üìü ü§± Sem√¢ntica das Ferramentas de Resolu√ß√£o de Depend√™ncias üçü ‚¨úÔ∏è üì™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ferramenta de Resolu√ß√£o de Depend√™ncias 


 Um resolvedor de depend√™ncias (daqui em diante referido como resolvedor, aprox. Transl.) Ou um gerenciador...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sem√¢ntica das Ferramentas de Resolu√ß√£o de Depend√™ncias</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/474106/"><h2 id="sredstvo-razresheniya-zavisimostey">  Ferramenta de Resolu√ß√£o de Depend√™ncias </h2><br><p>  Um resolvedor de depend√™ncias (daqui em diante referido como resolvedor, aprox. Transl.) Ou um gerenciador de pacotes √© um programa que define um conjunto consistente de m√≥dulos, levando em considera√ß√£o as restri√ß√µes definidas pelo usu√°rio. </p><br><p>  As restri√ß√µes s√£o geralmente especificadas por nomes de m√≥dulos e n√∫meros de vers√£o.  No ecossistema da JVM para os m√≥dulos Maven, o nome da organiza√ß√£o (ID do grupo) tamb√©m ser√° indicado.  Al√©m disso, as restri√ß√µes podem incluir intervalos de vers√µes, m√≥dulos exclu√≠dos, substitui√ß√µes de vers√µes etc. </p><br><p>  As tr√™s principais categorias de pacotes s√£o representadas por pacotes de SO (Homebrew, pacotes Debian, etc.), <br>  m√≥dulos para linguagens de programa√ß√£o espec√≠ficas (CPAN, RubyGem, Maven, etc) e extens√µes espec√≠ficas de aplicativos (plugins Eclipse, plugins IntelliJ, extens√µes VS Code). </p><a name="habracut"></a><br><h2 id="semantika-rezolvera">  Sem√¢ntica do resolvedor </h2><br><p>  Numa primeira aproxima√ß√£o, podemos representar as depend√™ncias dos m√≥dulos como um DAG (gr√°fico ac√≠clico direcionado, gr√°fico ac√≠clico direcionado). </p><br><p>  Essa representa√ß√£o √© chamada de gr√°fico de depend√™ncia.  Considere as depend√™ncias de dois m√≥dulos: </p><br><ul><li> <code>a:1.0</code> depende de <code>c:1.0</code> </li><li>  <code>b:1.0</code> depende de <code>c:1.0</code> <code>d:1.0</code> </li></ul><br><pre> <code class="plaintext hljs">+-----+ +-----+ |a:1.0| |b:1.0| +--+--+ +--+--+ | | +&lt;-------+ | | vv +--+--+ +--+--+ |c:1.0| |d:1.0| +-----+ +-----+</code> </pre> <br><p>  Se o m√≥dulo depender de <code>a:1.0</code> <code>b:1.0</code> , ser√° apresentada <code>a:1.0</code> lista completa de depend√™ncias <code>a:1.0</code> , <code>b:1.0</code> , <code>c:1.0</code> <code>d:1.0</code> .  E este √© apenas um passeio pelas √°rvores. </p><br><p>  A situa√ß√£o ficar√° mais complicada se as depend√™ncias transitivas forem especificadas por um intervalo de vers√µes: </p><br><ul><li>  <code>a:1.0</code> depende de <code>c:1.0</code> </li><li>  <code>b:1.0</code> depende de <code>c:[1.0,2)</code> <code>d:1.0</code> </li></ul><br><pre> <code class="plaintext hljs">+-----+ +-----+ |a:1.0| |b:1.0| +--+--+ +--+--+ | | | +-----------+ | | | vvv +--+--+ +--+------+ +--+--+ |c:1.0| |c:[1.0,2)| |d:1.0| +-----+ +---------+ +-----+</code> </pre> <br><p>  Ou, se vers√µes diferentes forem especificadas para depend√™ncias transitivas: </p><br><ul><li>  <code>a:1.0</code> depende de <code>c:1.0</code> </li><li>  <code>b:1.0</code> depende de <code>c:1.2</code> <code>d:1.2</code> </li></ul><br><p>  Ou, se exce√ß√µes forem lan√ßadas para a depend√™ncia: </p><br><ul><li>  depend√™ncia de <code>a:1.0</code> , que depende de <code>c:1.0</code> , excluindo <code>c:*</code> </li><li>  <code>b:1.0</code> depende de <code>c:1.2</code> <code>d:1.2</code> </li></ul><br><p>  Resolvedores diferentes interpretam as restri√ß√µes definidas pelos usu√°rios de maneira diferente.  Eu chamo essas regras de sem√¢ntica dos resolvedores. </p><br><p>  Voc√™ pode precisar conhecer algumas dessas sem√¢nticas, por exemplo: </p><br><ul><li>  sem√¢ntica do seu pr√≥prio m√≥dulo (determinada pela ferramenta de constru√ß√£o que voc√™ usa); </li><li>  a sem√¢ntica das bibliotecas que voc√™ usa (determinada pela ferramenta de constru√ß√£o que o autor usou); </li><li>  a sem√¢ntica dos m√≥dulos que seu m√≥dulo usar√° como uma depend√™ncia (definida pela ferramenta de cria√ß√£o do usu√°rio final). </li></ul><br><h2 id="sredstva-razresheniya-zavisimostey-v-ekosisteme-jvm">  Ferramentas de resolu√ß√£o de depend√™ncia no ecossistema da JVM </h2><br><p>  Como eu ap√≥io o <code>sbt</code> , tenho que trabalhar principalmente no ecossistema da JVM. </p><br><h2 id="semantika-maven-nearest-wins">  Semantics Maven: vit√≥rias mais pr√≥ximas </h2><br><p>  Nos gr√°ficos em que h√° um conflito de depend√™ncias (no gr√°fico de depend√™ncia <code>a</code> existem muitas vers√µes diferentes do componente <code>d</code> , por exemplo, <code>d:1.0</code> <code>d:2.0</code> ), o Maven usa a estrat√©gia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ganhos mais pr√≥ximos</a> para resolver o conflito. </p><br><blockquote>  A resolu√ß√£o de conflitos de depend√™ncia √© um processo que determina qual vers√£o de um artefato ser√° selecionada se v√°rias vers√µes diferentes do mesmo artefato forem encontradas entre as depend√™ncias.  Maven seleciona a defini√ß√£o mais pr√≥xima.  I.e.  usa a vers√£o mais pr√≥xima do seu projeto na √°rvore de depend√™ncias. <br>  Voc√™ sempre pode garantir o uso da vers√£o correta declarando-a explicitamente no POM do projeto.  Observe que, se duas vers√µes da depend√™ncia tiverem a mesma profundidade na √°rvore, a primeira ser√° selecionada.  A defini√ß√£o mais pr√≥xima significa que a vers√£o mais pr√≥xima do projeto na √°rvore de depend√™ncia ser√° usada.  Por exemplo, se as depend√™ncias para <code>A</code> , <code>B</code> e <code>C</code> definidas como <code>A -&gt; B -&gt; C -&gt; D 2.0</code> e <code>A -&gt; E -&gt; D 1.0</code> , ent√£o, ao criar <code>A</code> , <code>D 1.0</code> ser√° usado, porque  o caminho de <code>A</code> a <code>D</code> via <code>E</code> mais curto (do que via <code>B</code> e <code>C</code> , aprox. transl.). </blockquote><p>  Isso significa que muitos m√≥dulos Java publicados usando o Maven foram compilados usando a sem√¢ntica dos <code>nearest-wins</code> .  Para ilustrar o acima, crie um <code>pom.xml</code> simples: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>foo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencyManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.typesafe.play<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>play-ws-standalone_2.12<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencyManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <code>mvn dependency:build-classpath</code> retorna o <code>classpath</code> resolvido. <br>  Vale ressaltar que a √°rvore resultante usa <code>com.typesafe:config:1.2.0</code> mesmo que o <code>Akka 2.5.3</code> transitivamente dependente de <code>com.typesafe:config:1.3.1</code> . </p><br><p>  <code>mvn dependency:tree</code> d√° essa confirma√ß√£o visual: </p><br><pre> <code class="plaintext hljs">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ foo --- [INFO] com.example:foo:jar:1.0.0 [INFO] \- com.typesafe.play:play-ws-standalone_2.12:jar:1.0.1:compile [INFO] +- org.scala-lang:scala-library:jar:2.12.2:compile [INFO] +- javax.inject:javax.inject:jar:1:compile [INFO] +- com.typesafe:ssl-config-core_2.12:jar:0.2.2:compile [INFO] | +- com.typesafe:config:jar:1.2.0:compile [INFO] | \- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.0.4:compile [INFO] \- com.typesafe.akka:akka-stream_2.12:jar:2.5.3:compile [INFO] +- com.typesafe.akka:akka-actor_2.12:jar:2.5.3:compile [INFO] | \- org.scala-lang.modules:scala-java8-compat_2.12:jar:0.8.0:compile [INFO] \- org.reactivestreams:reactive-streams:jar:1.0.0:compile</code> </pre> <br><p>  Muitas bibliotecas fornecem compatibilidade com vers√µes anteriores, mas a compatibilidade direta n√£o √© garantida com algumas exce√ß√µes, o que √© alarmante. </p><br><h2 id="semantika-apache-ivy-latest-wins">  Sem√¢ntica do Apache Ivy: √∫ltimas vit√≥rias </h2><br><p>  Por padr√£o, o Apache Ivy usa a estrat√©gia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mais recente</a> para resolver conflitos de depend√™ncia. </p><br><blockquote>  Se esse cont√™iner n√£o estiver presente, o gerenciador de conflitos padr√£o ser√° usado para todos os m√≥dulos.  O gerenciador de conflitos padr√£o atual √© "revis√£o mais recente". <br>  <em>Nota: Os <code>conflicts</code> cont√™iner s√£o um dos arquivos Ivy.</em> </blockquote><p>  At√© a vers√£o <code>SBT 1.3.x</code> resolvedor de depend√™ncia interno √© o Apache Ivy.  O <code>pom.xml</code> usado anteriormente √© descrito no SBT um pouco mais brevemente: </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies += <span class="hljs-string"><span class="hljs-string">"com.typesafe.play"</span></span> %% <span class="hljs-string"><span class="hljs-string">"play-ws-standalone"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, )</code> </pre> <br><p>  No <code>sbt shell</code> digite <code>show externalDependencyClasspath</code> para obter o caminho de classe resolvido.  Deve indicar a vers√£o do <code>com.typesafe:config:1.3.1</code> .  Al√©m disso, o seguinte aviso ainda ser√° exibido: </p><br><pre> <code class="plaintext hljs">[warn] There may be incompatibilities among your library dependencies; run 'evicted' to see detailed eviction warnings.</code> </pre> <br><p>  Chamar o <code>evicted</code> no <code>sbt shell</code> permite obter um relat√≥rio de resolu√ß√£o de conflitos: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; evicted [info] Updating ... [info] Done updating. [info] Here are other dependency conflicts that were resolved: [info] * com.typesafe:config:1.3.1 is selected over 1.2.0 [info] +- com.typesafe.akka:akka-actor_2.12:2.5.3 (depends on 1.3.1) [info] +- com.typesafe:ssl-config-core_2.12:0.2.2 (depends on 1.2.0) [info] * com.typesafe:ssl-config-core_2.12:0.2.2 is selected over 0.2.1 [info] +- com.typesafe.play:play-ws-standalone_2.12:1.0.1 (depends on 0.2.2) [info] +- com.typesafe.akka:akka-stream_2.12:2.5.3 (depends on 0.2.1)</code> </pre> <br><p>  Na sem√¢ntica das <code>latest-wins</code> , especificar <code>config:1.2.0</code> na pr√°tica significa "fornecer-me a vers√£o 1.2.0 ou superior". <br>  Esse comportamento √© um pouco mais prefer√≠vel do que na estrat√©gia de <code>nearest-wins</code> , porque as vers√µes das bibliotecas transitivas n√£o s√£o rebaixadas.  No entanto, a chamada <code>evicted</code> deve verificar se as substitui√ß√µes foram feitas corretamente. </p><br><h2 id="semantika-coursier-latest-wins">  Semantics Coursier: √∫ltimas vit√≥rias </h2><br><p>  Antes de abordarmos a descri√ß√£o da sem√¢ntica, responderei a uma pergunta importante - como √© pronunciado Coursier.  De acordo com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a</a> nota de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Alex Arshambo</a> , √© pronunciado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">chick-sie</a> . </p><br><p>  Curiosamente, a documenta√ß√£o do Coursier tem uma p√°gina sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">controle</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vers√£o</a> , que fala sobre a sem√¢ntica da resolu√ß√£o de depend√™ncias. </p><br><blockquote>  Considere a interse√ß√£o de determinados intervalos: <br><ul><li>  Se estiver vazio (os intervalos n√£o se cruzam), h√° um conflito. </li><li>  Se nenhum intervalo for especificado, presume-se que a interse√ß√£o seja representada por (,) (o intervalo correspondente a todas as vers√µes). <br>  Em seguida, considere vers√µes espec√≠ficas: <br><ul><li>  Descartamos vers√µes espec√≠ficas abaixo dos limites do intervalo. </li><li>  Se houver vers√µes espec√≠ficas acima dos limites do intervalo, haver√° um conflito. </li><li>  Se vers√µes espec√≠ficas estiverem dentro dos limites do intervalo, o resultado dever√° ser o mais recente deles. </li><li>  Se n√£o houver vers√µes espec√≠ficas dentro ou acima dos limites do intervalo, o resultado dever√° ser o intervalo. </li></ul></li></ul><br></blockquote><p>  Porque  diz-se <code>  </code> , portanto - esta √© a sem√¢ntica das <code>latest-wins</code> . <br>  Voc√™ pode verificar isso usando o <code>sbt 1.3.0-RC3</code> , que usa o Coursier. </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies += <span class="hljs-string"><span class="hljs-string">"com.typesafe.play"</span></span> %% <span class="hljs-string"><span class="hljs-string">"play-ws-standalone"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, )</code> </pre> <br><p>  Chamar <code>show externalDependencyClasspath</code> partir do console do <code>sbt 1.3.0-RC3</code> retornar√° <code>com.typesafe:config:1.3.1</code> , conforme o esperado.  O Relat√≥rio de resolu√ß√£o de conflitos informa o mesmo: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; evicted [info] Here are other dependency conflicts that were resolved: [info] * com.typesafe:config:1.3.1 is selected over 1.2.0 [info] +- com.typesafe.akka:akka-actor_2.12:2.5.3 (depends on 1.3.1) [info] +- com.typesafe:ssl-config-core_2.12:0.2.2 (depends on 1.2.0) [info] * com.typesafe:ssl-config-core_2.12:0.2.2 is selected over 0.2.1 [info] +- com.typesafe.play:play-ws-standalone_2.12:1.0.1 (depends on 0.2.2) [info] +- com.typesafe.akka:akka-stream_2.12:2.5.3 (depends on 0.2.1)</code> </pre> <br><h2 id="primechanie-apache-ivy-emuliruet-semantiku-nearest-wins">  Nota: O Apache Ivy emula a sem√¢ntica das <code>nearest-wins</code> ? </h2><br><p>  Ao resolver depend√™ncias do m√≥dulo no reposit√≥rio Maven, o Ivy converte o arquivo <code>POM</code> e coloca o atributo <code>force="true"</code> em <code>ivy.xml</code> no cache. </p><br><p>  Por exemplo, <code>cat ~/.ivy2/cache/com.typesafe.akka/akka-actor_2.12/ivy-2.5.3.xml</code> : </p><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">org</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.scala-lang"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scala-library"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rev</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.12.2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">force</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compile-&gt;compile(*),master(compile);runtime-&gt;runtime(*)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">org</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.typesafe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"config"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rev</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.3.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">force</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compile-&gt;compile(*),master(compile);runtime-&gt;runtime(*)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">org</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.scala-lang.modules"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scala-java8-compat_2.12"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rev</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.8.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">force</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compile-&gt;compile(*),master(compile);runtime-&gt;runtime(*)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o do</a> Ivy diz: </p><br><blockquote>  Esses dois <code>latest</code> gerenciadores de conflitos levam em considera√ß√£o o atributo de depend√™ncia de <code>force</code> . <br>  Assim, depend√™ncias diretas podem declarar um atributo de <code>force</code> (consulte depend√™ncia), indicando que, de depend√™ncia direta e revis√µes indiretas, deve-se dar prefer√™ncia a revis√µes diretas de depend√™ncia. </blockquote><p>  Para mim, essa formula√ß√£o significa que <code>force="true"</code> concebido para redefinir a l√≥gica das <code>latest-wins</code> e emular a sem√¢ntica das <code>nearest-wins</code> .  Mas, felizmente, isso n√£o estava destinado a acontecer, e agora temos as <code>latest-wins</code> : como podemos ver, o <code>sbt 1.2.8</code> pega <code>com.typesafe:config:1.3.1</code> . </p><br><p>  No entanto, pode-se observar o efeito de <code>force="true"</code> ao usar um gerenciador de conflitos estrito, que parece estar quebrado. </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / conflictManager := <span class="hljs-type"><span class="hljs-type">ConflictManager</span></span>.strict</code> </pre> <br><p>  O problema √© que um gerenciador de conflitos estrito n√£o parece impedir a substitui√ß√£o da vers√£o.  <code>show externalDependencyClasspath</code> alegremente retorna <code>com.typesafe:config:1.3.1</code> . <br>  Um problema relacionado √© que a adi√ß√£o de uma vers√£o do <code>com.typesafe:config:1.3.1</code> , que um gerente de conflitos rigoroso coloca no gr√°fico, leva a um erro. </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / conflictManager := <span class="hljs-type"><span class="hljs-type">ConflictManager</span></span>.strict <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies ++= <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-string"><span class="hljs-string">"com.typesafe.play"</span></span> %% <span class="hljs-string"><span class="hljs-string">"play-ws-standalone"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.typesafe"</span></span> % <span class="hljs-string"><span class="hljs-string">"config"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.3.1"</span></span>, ) )</code> </pre> <br><p>  √â assim: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; show externalDependencyClasspath [info] Updating ... [error] com.typesafe#config;1.2.0 (needed by [com.typesafe#ssl-config-core_2.12;0.2.2]) conflicts with com.typesafe#config;1.3.1 (needed by [com.example#foo_2.12;1.0.0-SNAPSHOT]) [error] org.apache.ivy.plugins.conflict.StrictConflictException: com.typesafe#config;1.2.0 (needed by [com.typesafe#ssl-config-core_2.12;0.2.2]) conflicts with com.typesafe#config;1.3.1 (needed by [com.example#foo_2.12;1.0.0-SNAPSHOT])</code> </pre> <br><h2 id="o-poryadke-versionirovaniya">  Sobre controle de vers√£o </h2><br><p>  Mencionamos a sem√¢ntica das <code>latest-wins</code> , sugerindo que as vers√µes em uma representa√ß√£o de string podem ocorrer em alguma ordem. <br>  Portanto, o controle de vers√£o faz parte da sem√¢ntica. </p><br><h2 id="poryadok-versionirovaniya-v-apache-ivy">  Procedimento de vers√£o no Apache Ivy </h2><br><p>  Este <a href="">coment√°rio do Javadoc</a> diz que, ao criar o comparador de vers√µes, Ivy se concentrou na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√£o de comparar vers√µes do PHP</a> : </p><br><blockquote>  Esta fun√ß√£o primeiro substitui _, - e + por um ponto <code>.</code>  em representa√ß√µes de string de vers√µes e tamb√©m adiciona <code>.</code>  antes e depois de tudo que n√£o √© um n√∫mero.  Assim, por exemplo, '4.3.2RC1' se torna '4.3.2.RC.1'.  Ela ent√£o compara as partes recebidas da esquerda para a direita. <br><br>  Para pe√ßas que cont√™m elementos especiais ( <code>dev</code> , <code>alpha</code> ou <code>a</code> , <code>beta</code> ou <code>b</code> , <code>RC</code> ou <code>rc</code> , <code>#</code> , <code>pl</code> ou <code>p</code> ) *, os elementos s√£o comparados na seguinte ordem: <br><br>  <strong>qualquer sequ√™ncia que n√£o seja um elemento especial &lt;dev &lt;alfa = a &lt;beta = b &lt;RC = rc &lt;# &lt;pl = p.</strong> <br><br>  Portanto, n√£o apenas n√≠veis diferentes (por exemplo, '4.1' e '4.1.2') podem ser comparados, mas vers√µes espec√≠ficas do PHP contendo informa√ß√µes sobre o status do desenvolvimento. <br>  * aprox.  perev. </blockquote><p>  Podemos verificar como as vers√µes s√£o ordenadas escrevendo uma pequena fun√ß√£o. </p><br><pre> <code class="scala hljs">scala&gt; :paste <span class="hljs-comment"><span class="hljs-comment">// Entering paste mode (ctrl-D to finish) val strategy = new org.apache.ivy.plugins.latest.LatestRevisionStrategy case class MockArtifactInfo(version: String) extends org.apache.ivy.plugins.latest.ArtifactInfo { def getRevision: String = version def getLastModified: Long = -1 } def sortVersionsIvy(versions: String*): List[String] = { import scala.collection.JavaConverters._ strategy.sort(versions.toArray map MockArtifactInfo) .asScala.toList map { case MockArtifactInfo(v) =&gt; v } } // Exiting paste mode, now interpreting. scala&gt; sortVersionsIvy("1.0", "2.0", "1.0-alpha", "1.0+alpha", "1.0-X1", "1.0a", "2.0.2") res7: List[String] = List(1.0-X1, 1.0a, 1.0-alpha, 1.0+alpha, 1.0, 2.0, 2.0.2)</span></span></code> </pre> <br><h2 id="poryadok-versionirovaniya-v-coursier">  Procedimento de controle de vers√£o no Coursier </h2><br><p>  A p√°gina do GitHub sobre sem√¢ntica de resolu√ß√£o de depend√™ncias possui uma se√ß√£o sobre controle de vers√£o. </p><br><blockquote>  O Coursier usa a ordem de vers√£o personalizada do Maven.  Antes de comparar, as representa√ß√µes de string das vers√µes s√£o divididas em elementos separados ... <br>  Para obter esses elementos, as vers√µes s√£o separadas pelos caracteres., - e _ (e os pr√≥prios separadores s√£o descartados) e por substitui√ß√µes de letra a n√∫mero ou n√∫mero a letra. </blockquote><p>  Para escrever um teste, crie um subprojeto com as <code>libraryDependencies += "io.get-coursier" %% "coursier-core" % "2.0.0-RC2-6"</code> e execute o <code>console</code> : </p><br><pre> <code class="scala hljs">sbt:foo&gt; helper/console [info] <span class="hljs-type"><span class="hljs-type">Starting</span></span> scala interpreter... <span class="hljs-type"><span class="hljs-type">Welcome</span></span> to <span class="hljs-type"><span class="hljs-type">Scala</span></span> <span class="hljs-number"><span class="hljs-number">2.12</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span> (<span class="hljs-type"><span class="hljs-type">OpenJDK</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-<span class="hljs-type"><span class="hljs-type">Bit</span></span> <span class="hljs-type"><span class="hljs-type">Server</span></span> <span class="hljs-type"><span class="hljs-type">VM</span></span>, <span class="hljs-type"><span class="hljs-type">Java</span></span> <span class="hljs-number"><span class="hljs-number">1.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_212). <span class="hljs-type"><span class="hljs-type">Type</span></span> in expressions <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> evaluation. <span class="hljs-type"><span class="hljs-type">Or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> :help. scala&gt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> coursier.core.<span class="hljs-type"><span class="hljs-type">Version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> coursier.core.<span class="hljs-type"><span class="hljs-type">Version</span></span> scala&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortVersionsCoursier</span></span></span></span>(versions: <span class="hljs-type"><span class="hljs-type">String</span></span>*): <span class="hljs-type"><span class="hljs-type">List</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = | versions.toList.map(<span class="hljs-type"><span class="hljs-type">Version</span></span>.apply).sorted.map(_.repr) sortVersionsCoursier: (versions: <span class="hljs-type"><span class="hljs-type">String</span></span>*)<span class="hljs-type"><span class="hljs-type">List</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] scala&gt; sortVersionsCoursier(<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0-alpha"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0+alpha"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0-X1"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0a"</span></span>, <span class="hljs-string"><span class="hljs-string">"2.0.2"</span></span>) res0: <span class="hljs-type"><span class="hljs-type">List</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-type"><span class="hljs-type">List</span></span>(<span class="hljs-number"><span class="hljs-number">1.0</span></span>-alpha, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>-<span class="hljs-type"><span class="hljs-type">X1</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>+alpha, <span class="hljs-number"><span class="hljs-number">1.0</span></span>a, <span class="hljs-number"><span class="hljs-number">2.0</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>)</code> </pre> <br><p>  Como se v√™, Coursier ordena n√∫meros de vers√£o em uma ordem completamente diferente da Ivy. <br>  Se voc√™ usou tags alfab√©ticas permissivas, essa ordem pode causar alguma confus√£o. </p><br><h2 id="o-diapazonah-versiy">  Sobre os intervalos de vers√£o </h2><br><p>  Normalmente, evito usar intervalos de vers√µes, embora sejam amplamente usados ‚Äã‚Äãem webjars e m√≥dulos npm republicados no Maven Central.  Algo como <code>"is-number": "^4.0.0"</code> pode ser escrito no m√≥dulo <code>"is-number": "^4.0.0"</code> que corresponder√° a <code>[4.0.0,5)</code> . </p><br><h2 id="obrabotka-diapazonov-versiy-v-apache-ivy">  Manipula√ß√£o do intervalo de vers√µes no Apache Ivy </h2><br><p>  Nesta montagem, <code>angular-boostrap:0.14.2</code> depende de <code>angular:[1.3.0,)</code> . </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies ++= <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-string"><span class="hljs-string">"org.webjars.bower"</span></span> % <span class="hljs-string"><span class="hljs-string">"angular"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.4.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"org.webjars.bower"</span></span> % <span class="hljs-string"><span class="hljs-string">"angular-bootstrap"</span></span> % <span class="hljs-string"><span class="hljs-string">"0.14.2"</span></span>, ) )</code> </pre> <br><p>  Chamar <code>show externalDependencyClasspath</code> no <code>sbt 1.2.8</code> retornar√° <code>angular-bootstrap:0.14.2</code> e <code>angular:1.7.8</code> .  E para onde <code>1.7.8</code> foi?  Quando o Ivy encontra uma variedade de vers√µes, ele essencialmente acessa a Internet e encontra o que pode encontrar, √†s vezes at√© usando captura de tela. </p><br><p>  Esse processamento de intervalos de vers√£o torna as montagens n√£o repetitivas (a execu√ß√£o da mesma montagem a cada poucos meses fornece resultados diferentes). </p><br><h2 id="obrabotka-diapazonov-versiy-v-coursier">  Manuseio de vers√µes em Coursier </h2><br><p>  Se√ß√£o de resolu√ß√£o de depend√™ncia do Coursier na <a href="">p√°gina do</a> github <br>  l√™: </p><br><blockquote>  <strong>Vers√µes espec√≠ficas em intervalos s√£o preferidas</strong> <br>  Se o seu m√≥dulo depende de [1.0,2.0) e 1.4, a aprova√ß√£o da vers√£o ser√° realizada em favor do 1.4. <br>  Se houver uma depend√™ncia do 1.4, essa vers√£o ser√° preferida no intervalo [1.0,2.0). </blockquote><p>  Parece promissor. </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; show externalDependencyClasspath [warn] There may be incompatibilities among your library dependencies; run 'evicted' to see detailed eviction warnings. [info] * Attributed(/Users/eed3si9n/.sbt/boot/scala-2.12.8/lib/scala-library.jar) [info] * Attributed(/Users/eed3si9n/.coursier/cache/v1/https/repo1.maven.org/maven2/org/webjars/bower/angular/1.4.7/angular-1.4.7.jar) [info] * Attributed(/Users/eed3si9n/.coursier/cache/v1/https/repo1.maven.org/maven2/org/webjars/bower/angular-bootstrap/0.14.2/angular-bootstrap-0.14.2.jar)</code> </pre> <br><p>  <code>show externalDependencyClasspath</code> no mesmo assembly com <code>angular-bootstrap:0.14.2</code> retorna <code>angular-bootstrap:0.14.2</code> e <code>angular:1.4.7</code> conforme o esperado.  Esta √© uma melhoria em rela√ß√£o √† Ivy. </p><br><p>  Considere o caso mais complicado quando v√°rios intervalos de vers√£o separados s√£o usados.  Por exemplo: </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies ++= <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-string"><span class="hljs-string">"org.webjars.npm"</span></span> % <span class="hljs-string"><span class="hljs-string">"randomatic"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.1.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"org.webjars.npm"</span></span> % <span class="hljs-string"><span class="hljs-string">"is-odd"</span></span> % <span class="hljs-string"><span class="hljs-string">"2.0.0"</span></span>, ) )</code> </pre> <br><p>  Chamar <code>show externalDependencyClasspath</code> no <code>sbt 1.3.0-RC3</code> retorna o seguinte erro: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; show externalDependencyClasspath [info] Updating https://repo1.maven.org/maven2/org/webjars/npm/kind-of/maven-metadata.xml No new update since 2018-03-10 06:32:27 https://repo1.maven.org/maven2/org/webjars/npm/is-number/maven-metadata.xml No new update since 2018-03-09 15:25:26 https://repo1.maven.org/maven2/org/webjars/npm/is-buffer/maven-metadata.xml No new update since 2018-08-17 14:21:46 [info] Resolved dependencies [error] lmcoursier.internal.shaded.coursier.error.ResolutionError$ConflictingDependencies: Conflicting dependencies: [error] org.webjars.npm:is-number:[3.0.0,4):default(compile) [error] org.webjars.npm:is-number:[4.0.0,5):default(compile) [error] at lmcoursier.internal.shaded.coursier.Resolve$.validate(Resolve.scala:394) [error] at lmcoursier.internal.shaded.coursier.Resolve.validate0$1(Resolve.scala:140) [error] at lmcoursier.internal.shaded.coursier.Resolve.$anonfun$ioWithConflicts0$4(Resolve.scala:184) [error] at lmcoursier.internal.shaded.coursier.util.Task$.$anonfun$flatMap$2(Task.scala:14) [error] at scala.concurrent.Future.$anonfun$flatMap$1(Future.scala:307) [error] at scala.concurrent.impl.Promise.$anonfun$transformWith$1(Promise.scala:41) [error] at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64) [error] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [error] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [error] at java.lang.Thread.run(Thread.java:748) [error] (update) lmcoursier.internal.shaded.coursier.error.ResolutionError$ConflictingDependencies: Conflicting dependencies: [error] org.webjars.npm:is-number:[3.0.0,4):default(compile) [error] org.webjars.npm:is-number:[4.0.0,5):default(compile)</code> </pre> <br><p>  Tecnicamente, isso mesmo, porque  esses intervalos n√£o se sobrep√µem.  Enquanto o <code>sbt 1.2.8</code> resolve isso como <code>is-number:4.0.0</code> . </p><br><p>  Devido ao fato de os intervalos de vers√£o serem comuns o suficiente para serem irritantes, eu envio uma solicita√ß√£o de solicita√ß√£o ao Coursier para implementar regras sem√¢nticas adicionais das <code>latest-wins</code> que permitem selecionar vers√µes posteriores dos limites inferiores dos intervalos. <br>  Ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">coursier / coursier # 1284</a> . </p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  A sem√¢ntica do resolvedor define um caminho de classe espec√≠fico com base nas restri√ß√µes definidas pelo usu√°rio. </p><br><p>  Geralmente, as diferen√ßas nos detalhes s√£o manifestadas de diferentes maneiras para resolver conflitos de vers√£o. </p><br><ul><li>  O Maven usa a estrat√©gia de <code>nearest-wins</code> , que pode rebaixar depend√™ncias transitivas. </li><li>  Ivy usa a estrat√©gia de <code>latest-wins</code> . </li><li>  O Coursier usa principalmente a estrat√©gia de <code>latest-wins</code> , enquanto tenta especificar vers√µes mais estritamente. </li><li>  O manipulador de intervalo da vers√£o Ivy vai para a Internet, o que torna a mesma compila√ß√£o n√£o repet√≠vel. </li><li>  Coursier e Ivy organizam representa√ß√µes de strings de vers√µes de maneiras muito diferentes. </li></ul><br><blockquote>  Nem mesmo essas sutilezas do ecossistema Scala ser√£o discutidas na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ScalaConf</a> em 26 de novembro em Moscou.  Artem Seleznev <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresentar√°</a> a pr√°tica de trabalhar com o banco de dados em programa√ß√£o funcional sem JDBC.  Wojtek Pitula falar√° sobre integra√ß√£o e contar√° como ele criou um aplicativo no qual colocou todas as bibliotecas de trabalho.  E mais 16 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relat√≥rios</a> cheios de hardcore t√©cnico ser√£o apresentados na confer√™ncia. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt474106/">https://habr.com/ru/post/pt474106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt474090/index.html">Sal√°rios de desenvolvedor na Arm√™nia</a></li>
<li><a href="../pt474092/index.html">Se√ß√£o de back-end no DUMP Kazan: arquitetura de aplicativos em nuvem, microsservi√ßos de sa√≠da, DDD e mais</a></li>
<li><a href="../pt474094/index.html">Editor de diagrama de blocos - sobre a amizade entre Vue.js e MxGraph</a></li>
<li><a href="../pt474096/index.html">Linguagens de programa√ß√£o populares 2019 de usu√°rios do hh.ru</a></li>
<li><a href="../pt474104/index.html">Uma maneira universal de personalizar a apar√™ncia de um aplicativo WinForms (usando o exemplo do FAQ.Net)</a></li>
<li><a href="../pt474112/index.html">Otimize a distribui√ß√£o de servidores em rack</a></li>
<li><a href="../pt474114/index.html">Convidamos voc√™ para o GDG DevFest Moscow 2019 - uma confer√™ncia informal de TI</a></li>
<li><a href="../pt474116/index.html">Como voc√™ n√£o precisa obter consentimento para o processamento de dados pessoais</a></li>
<li><a href="../pt474118/index.html">O livro "inDriver: de Yakutsk ao Vale do Sil√≠cio. A hist√≥ria da cria√ß√£o de uma empresa global de tecnologia "</a></li>
<li><a href="../pt474122/index.html">Da teoria √† pr√°tica: como o blockchain √© usado na avia√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>