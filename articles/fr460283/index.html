<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ½â€ğŸ¨ ğŸ•¶ï¸ ğŸ”“ Nouveau langage de programmation Ã  faire soi-mÃªme ğŸ” ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ‘ŒğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Allez droit au but. En ce moment, je lis "The Dragon Book" et je dÃ©veloppe un compilateur pour mon langage de programmation appelÃ© Lolo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nouveau langage de programmation Ã  faire soi-mÃªme</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460283/">  Bonjour, Habr!  Allez droit au but.  En ce moment, je lis "The Dragon Book" et je dÃ©veloppe un compilateur pour mon langage de programmation appelÃ© Lolo (en l'honneur du pingouin du dessin animÃ© soviÃ©to-japonais).  Je prÃ©vois de terminer dans un an si rien ne me fait mal.  En parallÃ¨le, je posterai des extraits intÃ©ressants de lâ€™expÃ©rience de la traduction, de la construction de code intermÃ©diaire, de lâ€™optimisation, etc.  Asseyez-vous et partez. <br><br>  Le langage est compilÃ©, impÃ©ratif, pas orientÃ© objet, la sÃ©mantique a Ã©tÃ© impudemment supprimÃ©e de C et complÃ©tÃ©e par de nombreuses fonctionnalitÃ©s utiles.  CommenÃ§ons par eux. <br><a name="habracut"></a><br><h2>  Modifications sÃ©mantiques </h2><br><h4>  Pointeurs sÃ»rs </h4><br>  Vous avez peut-Ãªtre pensÃ© aux pointeurs intelligents de Rust en ce moment, mais ils ne le sont pas.  Dans ma langue, la sÃ©curitÃ© d'accÃ¨s Ã  la mÃ©moire est assurÃ©e par deux idiomes.  PremiÃ¨rement: l'absence d'une opÃ©ration de dÃ©rÃ©fÃ©rencement de pointeurs.  Au lieu de cela, lors de l'accÃ¨s au pointeur dÃ©clarÃ©, l'objet lui-mÃªme est rÃ©fÃ©rencÃ©.  Autrement dit, vous pouvez et devez Ã©crire comme ceci: <br><br><pre><code class="plaintext hljs">int # pointer ~~ new int(5) int variable ~ pointer + 7</code> </pre> <br>  La variable variable contient maintenant le nombre 12. Maintenant, vous voyez une syntaxe inconnue et, peut-Ãªtre, vous Ãªtes un peu perplexe, mais je vais tout expliquer au cours de l'article.  DeuxiÃ¨me idiome: manque d'opÃ©rations sur les pointeurs.  Encore une fois: toutes les opÃ©rations lors de l'accÃ¨s aux pointeurs, y compris l'affectation, l'incrÃ©mentation et la dÃ©crÃ©mentation sont effectuÃ©es sur les objets.  La seule opÃ©ration qui se rapporte directement au pointeur est l'affectation par adresse ou, comme je l'appelle, l'identification.  Dans l'exemple de code ci-dessus, dans la premiÃ¨re ligne, c'est prÃ©cisÃ©ment l'identification.  Tout pointeur peut Ãªtre dÃ©fini Ã  l'adresse de la zone mÃ©moire dÃ©jÃ  allouÃ©e, qui est la nouvelle opÃ©ration renvoyÃ©e.  Vous pouvez Ã©galement placer un pointeur sur l'adresse d'une autre variable allouÃ©e mÃªme sur le tas, mÃªme sur la pile.  Voici un exemple: <br><br><pre> <code class="plaintext hljs">int variable ~ 5 int # pointer ~~ variable</code> </pre> <br>  Ici "~" est l'opÃ©ration d'affectation habituelle.  Vous pouvez Ã©galement identifier des pointeurs avec un pointeur nul spÃ©cial.  Il agit comme un pointeur qui fait rÃ©fÃ©rence Ã  une adresse nulle.  AprÃ¨s avoir identifiÃ© les opÃ©rations de comparaison et de comparaison sur l'identitÃ© (adresses identiques) avec null, elles donneront vrai: <br><br><pre> <code class="plaintext hljs">int # pointer ~~ null if (pointer = null) nop ;; true if (pointer == nul) nop ;; true</code> </pre> <br>  Ici "=" est une comparaison de valeurs, "==" est une comparaison par adresses, "nop" est une opÃ©ration vide et aprÃ¨s ";;"  - commentaire.  Et oui, null est la seule opÃ©ration de pointeur avec laquelle il est possible de vÃ©rifier la compatibilitÃ© des types. <br><br>  Ainsi, les pointeurs ne peuvent Ãªtre affectÃ©s qu'Ã  la mÃ©moire allouÃ©e ou aux zones nulles et ne peuvent Ãªtre dÃ©placÃ©s nulle part.  Cependant, ces mesures ne protÃ¨gent pas complÃ¨tement contre les erreurs de segmentation.  Pour l'obtenir, suivez simplement ces Ã©tapes: <br><br><pre> <code class="plaintext hljs">int # pointer1 ~~ new int(5) int # pointer2 ~~ pointer1 delete pointer1 int variable ~ pointer2 ;; segmentation fault!</code> </pre> <br>  Je pense que tout est clair ici.  Mais commettre une telle erreur ne peut Ãªtre fait exprÃ¨s, et ensuite, avoir travaillÃ© dur.  AprÃ¨s tout, l'opÃ©ration de suppression fait la mÃªme chose que le garbage collector, mais moins en toute sÃ©curitÃ©.  En parlant de lui ... <br><br><h4>  Collecteur d'ordures </h4><br>  Collecteur d'ordures - il est Ã©galement collecteur Ã  Lolo.  Probablement pas besoin d'expliquer ce que c'est.  Je peux seulement dire qu'il peut Ãªtre dÃ©sactivÃ© par une option spÃ©ciale lors de la compilation.  Nous avons testÃ© le programme avec le collecteur, tout fonctionne comme il se doit - vous pouvez entrer l'option et essayer d'optimiser le programme en utilisant la gestion manuelle de la mÃ©moire. <br><br><h4>  Tableaux intÃ©grÃ©s </h4><br>  Bien que je dise que la sÃ©mantique du langage est radiÃ©e de C, les diffÃ©rences sont assez importantes.  Ici, les tableaux sont des pointeurs.  Les tableaux ont leur propre syntaxe et un adressage sÃ©curisÃ©.  Non, pas avec un contrÃ´le de portÃ©e.  Avec eux, en principe, il est difficile d'obtenir une erreur d'exÃ©cution.  C'est parce que chaque tableau stocke la longueur dans la taille variable, comme en Java, et Ã  chaque indexation de l'index ... il y a le reste de la division par cette taille!  Une dÃ©cision stupide, Ã  premiÃ¨re vue, jusqu'Ã  ce que nous examinions les indices nÃ©gatifs.  Si vous trouvez le reste de la division de -1 par la longueur du tableau, vous obtenez un nombre Ã©gal Ã  taille-1, c'est-Ã -dire l'Ã©lÃ©ment le plus fini.  Par une telle manÅ“uvre, nous pouvons accÃ©der aux index non seulement depuis le dÃ©but, mais aussi depuis la fin du tableau.  Une autre astuce consiste Ã  convertir n'importe quel type primitif dans le tableau d'octets [].  Mais comment obtenez-vous une erreur d'exÃ©cution, demandez-vous?  Je vais vous laisser cette question comme une Ã©nigme facile. <br><br><h4>  Les rÃ©fÃ©rences </h4><br>  Je ne sais pas avec certitude si la norme C actuelle comprend des liens, mais ils seront certainement dans Lolo.  Peut-Ãªtre le manque de rÃ©fÃ©rences dans les versions antÃ©rieures de C est l'une des principales raisons des pointeurs vers des pointeurs.  Ils sont nÃ©cessaires pour passer des arguments Ã  l'adresse, pour renvoyer les valeurs des fonctions sans copier.  Les pointeurs et les tableaux peuvent Ã©galement Ãªtre passÃ©s par rÃ©fÃ©rence (car lors du passage par valeur, les tableaux seront entiÃ¨rement copiÃ©s et les pointeurs dÃ©finis sur un nouvel emplacement par l'opÃ©ration ~~ ne l'enregistreront pas). <br><br><h4>  Multithreading </h4><br>  Tout est plus beau et plus beau.  Je suis dÃ©jÃ  amoureux de ma langue.  Son prochain passe-temps est le multithreading.  HonnÃªtement, je n'ai pas entiÃ¨rement dÃ©cidÃ© des outils qui lui seront fournis.  TrÃ¨s probablement, le mot clÃ© synchronisÃ© avec toutes les propriÃ©tÃ©s d'ala-Java et, Ã©ventuellement, le mot clÃ© simultanÃ© devant des fonctions non en ligne, ce qui signifie Â«exÃ©cuter ces fonctions dans des threads parallÃ¨lesÂ». <br><br><h4>  ChaÃ®nes en ligne </h4><br>  Ce sont des chaÃ®nes, pas des littÃ©raux de chaÃ®ne, comme en C ++.  Chaque ligne aura sa propre longueur, l'indexation se fera avec la recherche du reste.  En gÃ©nÃ©ral, les chaÃ®nes de Lolo sont trÃ¨s similaires aux tableaux de caractÃ¨res, sauf que les tableaux n'ont pas de concatÃ©nation via "+", d'animation via "*" et de comparaisons via "&lt;" et "&gt;".  Et puisque nous parlons de lignes, il faut mentionner les personnages.  Les symboles dans Lolo ne sont pas des nombres, comme dans C ++.  Et ils ne contiennent pas un octet, mais 4 pour les caractÃ¨res DKOTI et 6 pour les caractÃ¨res UTF.  Je parlerai de DKOTI la prochaine fois, mais pour l'instant, sachez que Lolo prend en charge les caractÃ¨res et les chaÃ®nes dans deux encodages.  Et oui, la propriÃ©tÃ© length peut mÃªme Ãªtre prise Ã  partir de constantes: <br><br><pre> <code class="plaintext hljs">int len ~ "Hello, world!".length ;; len = 13</code> </pre> <br><h4>  Type boolÃ©en avec trois valeurs </h4><br>  La grande majoritÃ© des langages de programmation qui ont un type de donnÃ©es logique utilisent une logique binaire.  Mais Ã  Lolo ce sera ternaire, ou plutÃ´t ternaire flou.  Trois valeurs: vrai - vrai, faux - faux et aucun - rien.  Jusqu'Ã  prÃ©sent, je n'ai pas trouvÃ© dans le langage des opÃ©rations qui n'en retournent aucun, mais je me souviens de nombreux exemples de pratique oÃ¹ des drapeaux avec trois valeurs seraient trÃ¨s utiles.  J'ai dÃ» utiliser des Ã©numÃ©rations ou un type entier.  Plus besoin de le faire.  C'est juste le nom de ce type que je ne peux pas choisir.  Le lieu le plus courant est Â«logiqueÂ», mais trop long.  D'autres options sont Â«lukÂ» en l'honneur de Jan Lukasevich, Â«brusÂ» en l'honneur de N. P. Brusnetsov et Â«tritÂ», mais Ã  proprement parler, ce type n'est pas un trit.  En gÃ©nÃ©ral, l'enquÃªte se trouve Ã  la fin de l'article. <br><br><h4>  Listes d'initialisation de structures et de listes </h4><br>  Si, aprÃ¨s avoir dÃ©clarÃ© une variable structurelle, mettez le signe ~ et ouvrez les crochets, vous pouvez dÃ©finir les valeurs de ses champs tour Ã  tour ou sous la forme d'un dictionnaire.  Si vous effectuez une telle procÃ©dure avec un tableau, vous pouvez dÃ©finir les valeurs de ses cellules, uniquement sans dictionnaire.  Il n'y a rien de spÃ©cial Ã  dire, il suffit de regarder le code: <br><br><pre> <code class="plaintext hljs">struct { int i; real r; str s; } variable ~ [ i: 5, r: 3.14, s: "Hello!" ] int[5] arr ~ [ 1, 2, 3, 4, 5 ]</code> </pre> <br><br><h4>  Renvoyer plusieurs valeurs des fonctions </h4><br>  Comme dans Go!  Vous pouvez Ã©crire plusieurs noms de variables sÃ©parÃ©s par des virgules et leur affecter toutes les valeurs renvoyÃ©es par la fonction Ã  la fois: <br><br><pre> <code class="plaintext hljs">int, real function() { return 5, 3.14 } byte Â§ { int i; real r i, r ~ function }</code> </pre> <br><h4>  Modules au lieu d'en-tÃªtes </h4><br>  Tout est clair ici.  Au lieu d'en-tÃªtes C-timides - modules de Java. <br><br><h4>  pour (Ã©lÃ©ment automatique: tableau) </h4><br>  Encore Java natif.  Puisque nous avons des tableaux de longueur, c'est un pÃ©chÃ© de ne pas utiliser l'expression pour chacun. <br><br><h4>  L'opÃ©rateur de sÃ©lection n'est pas seulement pour int </h4><br>  Je ne sais pas pour vous, mais en C et C ++, je suis terriblement enragÃ© par le manque de capacitÃ© Ã  utiliser lâ€™opÃ©ration de changement de casse pour les variables non entiÃ¨res.  Et la syntaxe exaspÃ¨re Ã©galement.  Ici, en Pascal, c'est une autre affaire.  Et maintenant Ã  Lolo: <br><br><pre> <code class="plaintext hljs">case variable { "hello", "HELLO": nop "world": { nop; nop } "WORLD": nop }</code> </pre> <br><h4>  OpÃ©rateurs de puissance et de division </h4><br>  Et cela vient de Python. <br><br><pre> <code class="plaintext hljs">real r ~ 3.14 ** 2 int i ~ r // 3</code> </pre> <br><h4>  Tuples de paramÃ¨tres de fonction </h4><br>  Rappelez-vous que toutes les opÃ©rations avec des pointeurs sont interdites Ã  Lolo, sauf pour l'identification?  Maintenant, rappelons-nous comment accÃ©der aux paramÃ¨tres de fonction Ã  partir de listes de paramÃ¨tres de longueur variable.  Vous devez dÃ©clarer un pointeur sur le premier Ã©lÃ©ment, puis incrÃ©menter jusqu'Ã  ce que la vÃ©rification de vÃ©ritÃ© renvoie true.  Vous ne pouvez pas incrÃ©menter dans Lolo.  Mais Ã§a va.  AprÃ¨s tout, la liste des paramÃ¨tres ici est prÃ©sentÃ©e sous la forme d'un tuple d'une longueur fixe (dÃ©pendante de l'appel), avec index-safe, comme dans les tableaux.  Son nom est "?"  La vÃ©rification de type est effectuÃ©e uniquement pour les paramÃ¨tres dÃ©finis dans la dÃ©finition de fonction.  Les paramÃ¨tres de repos (Â«multipointsÂ») sont rÃ©duits Ã  n'importe quel type, et avec un mouvement maladroit, leur comportement n'est pas dÃ©fini.  Mais encore, un tel tuple est beaucoup plus sÃ»r et plus pratique que les macros en C. <br><br><pre> <code class="plaintext hljs">void function(...) { if (?.size &gt; 1) { int i ~ ?[0] real r ~ ?[1] } }</code> </pre> <br><h4>  Intervalles numÃ©riques </h4><br>  Et un autre caractÃ¨re - une famille de types d'intervalles (plage, urange, lrange, etc.).  Ils sont donnÃ©s par deux entiers Ã  travers deux points (..) et peuvent couper un tableau d'un tableau, une chaÃ®ne d'une chaÃ®ne, en gÃ©nÃ©ral, une chose utile, je pense. <br><br><pre> <code class="plaintext hljs">int[5] arr ~ [ 1, 2, 3, 4, 5 ] int[3] subarr = arr[1..3] ;; [ 2, 3, 4 ]</code> </pre> <br><h4>  En opÃ©rateur </h4><br>  De Pascal.  Fonctionne avec des chaÃ®nes, des tableaux, des tuples?  et plages. <br><br><pre> <code class="plaintext hljs">int[5] arr ~ [ 1, 2, 3, 4, 5 ] if (4 in arr) nop</code> </pre> <br><h4>  Dictionnaire des paramÃ¨tres de fonction </h4><br>  HonnÃªtement, je suis dÃ©jÃ  confus comment cette chose est correctement appelÃ©e, avec elle, vous pouvez directement spÃ©cifier les arguments des fonctions non pures: <br><br><pre> <code class="plaintext hljs">int pos = str_find(string, npos: -1)</code> </pre> <br><h4>  Options par dÃ©faut </h4><br>  De C ++.  Ici, mÃªme un exemple n'est pas nÃ©cessaire de donner, et donc tout est clair. <br><br><h4>  Exceptions </h4><br>  Eh bien, et oÃ¹ sans eux? <br><br><pre> <code class="plaintext hljs">try { raise SEGMENTATION_FAULT_EXCEPTION } except (Exception e) { print(e.rus) }</code> </pre> <br><h4>  Pas de saut inconditionnel </h4><br>  Parce qu'en 2019, l'utilisation de l'opÃ©rateur de dÃ©cÃ¨s GOTO est similaire. <br><br><h2>  Syntaxe </h2><br>  Eh bien, un petit discours sur la syntaxe.  Comme vous l'avez remarquÃ©, le point-virgule est peu profond.  Les langages de programmation modernes fonctionnent trÃ¨s bien sans cette source d'erreur.  Les exemples sont Python, Kotlin.  L'opÃ©rateur flÃ¨che (-&gt;) est combinÃ© avec l'opÃ©rateur point.  Lors de l'appel de fonctions sans arguments, les crochets sont facultatifs.  Les chaÃ®nes sont donnÃ©es en nombre et vice versa.  Les opÃ©rateurs logiques et au niveau du bit sont combinÃ©s.  Il existe des modificateurs de fonction pour la tabulation.  Fonctions imbriquÃ©es  type_of.  Et surtout - le multilinguisme.  Oui, je vais dupliquer les mots clÃ©s, les propriÃ©tÃ©s des chaÃ®nes et des tableaux et tous les identifiants de la bibliothÃ¨que standard dans toutes les langues de communication internationale, Ã  savoir: anglais, russe, japonais, chinois, espagnol, portugais, arabe, franÃ§ais, allemand et latin. <br><br>  En fait, tout ce qui prÃ©cÃ¨de ne comprend pas la moitiÃ© des capacitÃ©s de Lolo.  Je ne peux tout simplement pas rappeler immÃ©diatement toutes ses fonctionnalitÃ©s.  J'ajouterai que le compilateur est prÃªt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460283/">https://habr.com/ru/post/fr460283/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460265/index.html">CrÃ©er un modÃ¨le de projet Xcode</a></li>
<li><a href="../fr460273/index.html">Autorisation dans Apple Pay pour le plus petit</a></li>
<li><a href="../fr460275/index.html">Pourquoi n'avez-vous pas besoin de la solution parfaite</a></li>
<li><a href="../fr460279/index.html">Contrat de 10 milliards: qui s'occupera du cloud pour le Pentagone</a></li>
<li><a href="../fr460281/index.html">Comment UX Writer aide Ã  amÃ©liorer le produit</a></li>
<li><a href="../fr460285/index.html">Nous prÃ©parons PHP. Comment sont while, foreach, array_walk et quelques autres mots effrayants</a></li>
<li><a href="../fr460287/index.html">Visualisation des nouvelles de Runet</a></li>
<li><a href="../fr460291/index.html">ProblÃ¨mes de traitement par lots des demandes et leurs solutions (partie 1)</a></li>
<li><a href="../fr460295/index.html">Que signifie dangereux Ã  Rust?</a></li>
<li><a href="../fr460297/index.html">WeakRef - proposition d'ajout Ã  la norme ECMAScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>