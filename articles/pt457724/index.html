<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§πüèæ üé® üí¶ OpenCV no STM32F7-Discovery üò¢ ü¶ñ üë¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sou um dos desenvolvedores do sistema operacional Embox e, neste artigo, falarei sobre como consegui executar o OpenCV na placa STM32746G. 


 Se voc√™...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenCV no STM32F7-Discovery</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/embox/blog/457724/"><p><img src="https://habrastorage.org/webt/kw/0o/tc/kw0otcinnxziccajz0hfh2fzbi8.png" align="right" width="320">  Sou um dos desenvolvedores do sistema operacional <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Embox</a> e, neste artigo, falarei sobre como consegui executar o OpenCV na placa STM32746G. </p><br><p>  Se voc√™ acessar um mecanismo de busca como "OpenCV na placa STM32", poder√° encontrar alguns interessados ‚Äã‚Äãem usar essa biblioteca em placas STM32 ou em outros microcontroladores. <br>  Existem v√°rios v√≠deos que, a julgar pelo nome, devem demonstrar o que √© necess√°rio, mas geralmente (em todos os v√≠deos que eu vi) na placa STM32, apenas a imagem foi recebida da c√¢mera e o resultado foi exibido na tela, e o processamento da imagem foi realizado em em um computador comum ou em placas mais poderosas (por exemplo, Raspberry Pi). </p><a name="habracut"></a><br><h1 id="pochemu-eto-slozhno">  Por que isso √© dif√≠cil? </h1><br><p>  A popularidade das consultas de pesquisa √© explicada pelo fato de o OpenCV ser a biblioteca de vis√£o computacional mais popular, o que significa que mais desenvolvedores est√£o familiarizados com ela e a capacidade de executar c√≥digo pronto para a √°rea de trabalho no microcontrolador simplifica bastante o processo de desenvolvimento.  Mas por que ainda n√£o existem receitas prontas populares para resolver esse problema? </p><br><p>  O problema do uso do OpenCV em pequenas placas est√° associado a dois recursos: </p><br><ul><li>  Se voc√™ compilar a biblioteca mesmo com um conjunto m√≠nimo de m√≥dulos, ela simplesmente n√£o caber√° na mem√≥ria flash da mesma STM32F7Discovery (mesmo sem levar em conta o SO) devido ao c√≥digo muito grande (v√°rios megabytes de instru√ß√µes) </li><li>  A pr√≥pria biblioteca √© escrita em C ++, o que significa <br><ul><li>  Precisa de suporte para um tempo de execu√ß√£o positivo (exce√ß√µes, etc.) </li><li>  H√° pouco suporte para LibC / Posix, que geralmente √© encontrado no SO para sistemas embarcados - voc√™ precisa de uma biblioteca padr√£o de vantagens e uma biblioteca padr√£o de modelos STL (vetor, etc.) </li></ul></li></ul><br><h1 id="portirovanie-na-embox">  Portando para a Embox </h1><br><p>  Como de costume, antes de portar qualquer programa para o sistema operacional, √© uma boa ideia tentar mont√°-lo da forma que os desenvolvedores pretendiam.  No nosso caso, n√£o h√° problemas com isso - as fontes podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> , a biblioteca √© constru√≠da no GNU / Linux com o cmake usual. </p><br><p>  Das boas not√≠cias - o OpenCV pronto para o uso pode ser montado como uma biblioteca est√°tica, o que facilita a transfer√™ncia.  Coletamos a biblioteca com a configura√ß√£o padr√£o e vemos quanto espa√ßo eles ocupam.  Cada m√≥dulo √© montado em uma biblioteca separada. </p><br><pre><code class="plaintext hljs">&gt; size lib/*so --totals text data bss dec hex filename 1945822 15431 960 1962213 1df0e5 lib/libopencv_calib3d.so 17081885 170312 25640 17277837 107a38d lib/libopencv_core.so 10928229 137640 20192 11086061 a928ed lib/libopencv_dnn.so 842311 25680 1968 869959 d4647 lib/libopencv_features2d.so 423660 8552 184 432396 6990c lib/libopencv_flann.so 8034733 54872 1416 8091021 7b758d lib/libopencv_gapi.so 90741 3452 304 94497 17121 lib/libopencv_highgui.so 6338414 53152 968 6392534 618ad6 lib/libopencv_imgcodecs.so 21323564 155912 652056 22131532 151b34c lib/libopencv_imgproc.so 724323 12176 376 736875 b3e6b lib/libopencv_ml.so 429036 6864 464 436364 6a88c lib/libopencv_objdetect.so 6866973 50176 1064 6918213 699045 lib/libopencv_photo.so 698531 13640 160 712331 ade8b lib/libopencv_stitching.so 466295 6688 168 473151 7383f lib/libopencv_video.so 315858 6972 11576 334406 51a46 lib/libopencv_videoio.so 76510375 721519 717496 77949390 4a569ce (TOTALS)</code> </pre> <br><p>  Como voc√™ pode ver na √∫ltima linha, .bss e .data n√£o ocupam muito espa√ßo, mas o c√≥digo tem mais de 70 MiB.  √â claro que se isso estiver vinculado estaticamente a um aplicativo espec√≠fico, o c√≥digo se tornar√° menor. </p><br><p>  Vamos tentar lan√ßar o m√°ximo de m√≥dulos poss√≠vel para que um exemplo m√≠nimo (que, por exemplo, apenas exiba a vers√£o do OpenCV) seja montado, assista ao <code>cmake .. -LA</code> e desative tudo o que estiver desabilitado nas op√ß√µes. </p><br><pre> <code class="plaintext hljs"> -DBUILD_opencv_java_bindings_generator=OFF \ -DBUILD_opencv_stitching=OFF \ -DWITH_PROTOBUF=OFF \ -DWITH_PTHREADS_PF=OFF \ -DWITH_QUIRC=OFF \ -DWITH_TIFF=OFF \ -DWITH_V4L=OFF \ -DWITH_VTK=OFF \ -DWITH_WEBP=OFF \ &lt;...&gt;</code> </pre> <br><pre> <code class="plaintext hljs">&gt; size lib/libopencv_core.a --totals text data bss dec hex filename 3317069 36425 17987 3371481 3371d9 (TOTALS)</code> </pre> <br><p>  Por um lado, este √© apenas um m√≥dulo de biblioteca, por outro lado, √© sem otimiza√ß√£o pelo compilador em termos de tamanho de c√≥digo ( <code>-Os</code> ).  ~ 3 MiB de c√≥digo ainda √© bastante, mas j√° d√° esperan√ßa de sucesso. </p><br><h2 id="zapusk-v-emulyatore">  Executar no emulador </h2><br><p>  A depura√ß√£o no emulador √© muito mais f√°cil, portanto, primeiro verifique se a biblioteca roda no qemu.  Como plataforma emulada, escolhi o Integrator / CP, porque  em primeiro lugar, tamb√©m √© ARM e, em segundo lugar, a Embox suporta sa√≠da gr√°fica para esta plataforma. </p><br><p>  A Embox possui um mecanismo para a constru√ß√£o de bibliotecas externas, e adicionamos o OpenCV como m√≥dulo (passando todas as mesmas op√ß√µes para a compila√ß√£o "m√≠nima" que as bibliotecas est√°ticas). Depois disso, adiciono o aplicativo mais simples que se parece com isso: </p><br><pre> <code class="plaintext hljs">version.cpp: #include &lt;stdio.h&gt; #include &lt;opencv2/core/utility.hpp&gt; int main() { printf("OpenCV: %s", cv::getBuildInformation().c_str()); return 0; }</code> </pre> <br><p>  Montamos o sistema, executamos - obtemos a conclus√£o esperada. </p><br><pre> <code class="plaintext hljs">root@embox:/#opencv_version OpenCV: General configuration for OpenCV 4.0.1 ===================================== Version control: bd6927bdf-dirty Platform: Timestamp: 2019-06-21T10:02:18Z Host: Linux 5.1.7-arch1-1-ARCH x86_64 Target: Generic arm-unknown-none CMake: 3.14.5 CMake generator: Unix Makefiles CMake build tool: /usr/bin/make Configuration: Debug CPU/HW features: Baseline: requested: DETECT disabled: VFPV3 NEON C/C++: Built as dynamic libs?: NO &lt;      --    ,   OpenCV     ..&gt;</code> </pre> <br><p>  O pr√≥ximo passo √© executar um exemplo, o melhor de tudo, um padr√£o daqueles que os pr√≥prios desenvolvedores oferecem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em seus sites</a> .  Eu escolhi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o detector de borda de Canny</a> . </p><br><p>  O exemplo teve que ser reescrito um pouco para exibir a imagem com o resultado diretamente no buffer do quadro.  Eu tive que fazer isso porque  a fun√ß√£o <code>imshow()</code> √© capaz de desenhar imagens atrav√©s das interfaces QT, GTK e Windows, as quais, √© claro, definitivamente n√£o estar√£o na configura√ß√£o do STM32.  De fato, o QT tamb√©m pode ser executado no STM32F7Discovery, mas isso ser√° discutido em outro artigo :) </p><br><p>  Ap√≥s um breve esclarecimento em que formato o resultado do detector de borda √© armazenado, obtemos uma imagem. </p><br><img src="https://habrastorage.org/webt/5n/8e/cn/5n8ecnbfmitf--cj7ogkwu_13yq.png"><br><p>  Imagem original </p><br><img src="https://habrastorage.org/webt/ai/j-/66/aij-66miy_z5t4hflyktlxd3qag.png"><br><p>  <em>Resultado</em> </p><br><h2 id="zapusk-na-stm32f7discovery">  Executando em STM32F7Discovery </h2><br><p>  Existem v√°rias parti√ß√µes de hardware no 32F746GDISCOVERY que podemos usar de qualquer maneira </p><br><ol><li>  320KiB RAM </li><li>  Flash de 1MiB para imagem </li><li>  8MiB SDRAM </li><li>  Unidade flash 16MiB QSPI NAND </li><li>  Slot para cart√£o MicroSD </li></ol><br><p>  Um cart√£o SD pode ser usado para armazenar imagens, mas no contexto de executar um exemplo m√≠nimo, isso n√£o √© muito √∫til. <br>  A tela tem uma resolu√ß√£o de 480x272, o que significa que a mem√≥ria do buffer de quadros ser√° de 522.240 bytes a uma profundidade de 32 bits, ou seja,  isso √© mais do que o tamanho da RAM, ent√£o colocaremos o buffer de quadros e um monte (o que ser√° necess√°rio para o OpenCV armazenar dados para imagens e estruturas auxiliares) na SDRAM; todo o resto (mem√≥ria para pilhas e outras necessidades do sistema) ser√° direcionado para a RAM . </p><br><p>  Se pegarmos a configura√ß√£o m√≠nima para STM32F7Discovery (jogar fora toda a rede, todos os comandos, tornar as pilhas o mais pequenas poss√≠vel, etc.) e adicionar o OpenCV com exemplos l√°, com a mem√≥ria necess√°ria, ser√° o seguinte: </p><br><pre> <code class="plaintext hljs"> text data bss dec hex filename 2876890 459208 312736 3648834 37ad42 build/base/bin/embox</code> </pre> <br><p>  Para aqueles que n√£o est√£o familiarizados com as se√ß√µes que est√£o sendo dobradas, explicarei: instru√ß√µes e constantes (aproximadamente dados somente leitura) est√£o em <code>.text</code> e <code>.rodata</code> , os dados s√£o mut√°veis ‚Äã‚Äãem <code>.data</code> e "zero" est√£o em <code>.bss</code> vari√°veis ‚Äã‚Äãque, no entanto, precisam de um local (esta se√ß√£o "ir√°" para a RAM). </p><br><p>  A boa not√≠cia √© que <code>.data</code> / <code>.bss</code> deve caber, mas com problemas de <code>.text</code> - h√° apenas 1MiB de mem√≥ria para a imagem.  Voc√™ pode <code>.text</code> imagem do exemplo do <code>.text</code> e l√™-la, por exemplo, do cart√£o SD para a mem√≥ria na inicializa√ß√£o, mas o fruits.png pesa cerca de 330KiB, portanto isso n√£o resolver√° o problema: a maior parte do <code>.text</code> consiste no c√≥digo OpenCV. </p><br><p>  Em geral, h√° apenas uma coisa: carregar parte do c√≥digo em uma unidade flash QSPI (ela possui um modo operacional especial para mapear mem√≥ria para o barramento do sistema, para que o processador possa acessar esses dados diretamente).  Nesse caso, surge um problema: em primeiro lugar, a mem√≥ria da unidade flash QSPI n√£o fica dispon√≠vel imediatamente ap√≥s a reinicializa√ß√£o do dispositivo (√© necess√°rio inicializar separadamente o modo de mapeamento de mem√≥ria) e, em segundo lugar, n√£o √© poss√≠vel piscar essa mem√≥ria com o carregador de inicializa√ß√£o comum. </p><br><p>  Como resultado, decidiu-se vincular todo o c√≥digo no QSPI e atualiz√°-lo com um gerenciador de inicializa√ß√£o, que receber√° o bin√°rio necess√°rio via TFTP. </p><br><h1 id="rezultat">  Resultado </h1><br><p>  A id√©ia de portar essa biblioteca para a Embox surgiu cerca de um ano atr√°s, mas repetidamente foi adiada devido a v√°rios motivos.  Um deles √© o suporte √† libstdc ++ e √† biblioteca de modelos padr√£o.  O problema de oferecer suporte ao C ++ na Embox est√° al√©m do escopo deste artigo, portanto, aqui apenas direi que conseguimos obter esse suporte na quantidade certa para que esta biblioteca funcione :) </p><br><p>  No final, esses problemas foram superados (pelo menos o suficiente para o exemplo do OpenCV funcionar), e o exemplo come√ßou.  40 segundos longos levam o conselho a procurar limites pelo filtro Canny.  Isso, √© claro, √© muito longo (h√° considera√ß√µes sobre como otimizar esse assunto, ser√° poss√≠vel escrever um artigo separado sobre ele, se for bem-sucedido). </p><br><img src="https://habrastorage.org/webt/mh/yz/13/mhyz13z16ziuv8zg9hdwex79ff0.png"><br><p></p><hr>  No entanto, o objetivo intermedi√°rio era criar um prot√≥tipo que mostrasse a possibilidade fundamental de executar o OpenCV no STM32, respectivamente, esse objetivo foi alcan√ßado, felicidades! <hr><br><h4 id="tldr-poshagovaya-instrukciya">  tl; dr: instru√ß√µes passo a passo </h4><br><p>  0: Fa√ßa o download das fontes da Embox, por exemplo: </p><br><pre> <code class="plaintext hljs"> git clone https://github.com/embox/embox &amp;&amp; cd ./embox</code> </pre> <br><p>  1: Vamos come√ßar criando um gerenciador de inicializa√ß√£o que ‚Äúpiscar√°‚Äù a unidade flash QSPI. </p><br><pre> <code class="plaintext hljs"> make confload-arm/stm32f7cube</code> </pre> <br><p>  Agora voc√™ precisa configurar a rede, porque  Carregaremos a imagem via TFTP.  Para definir os endere√ßos IP da placa e do host, voc√™ precisa modificar o arquivo conf / rootfs / network. </p><br><p>  Exemplo de configura√ß√£o: </p><br><pre> <code class="plaintext hljs">iface eth0 inet static address 192.168.2.2 netmask 255.255.255.0 gateway 192.168.2.1 hwaddress aa:bb:cc:dd:ee:02</code> </pre> <br><p>  <code>gateway</code> √© o endere√ßo do host de onde a imagem ser√° carregada; <code>address</code> √© o endere√ßo da placa. </p><br><p>  Depois disso, colete o gerenciador de inicializa√ß√£o: </p><br><pre> <code class="plaintext hljs"> make</code> </pre> <br><p>  2: Carregamento normal do carregador de inicializa√ß√£o (desculpe o trocadilho) no quadro - n√£o h√° nada espec√≠fico aqui, voc√™ precisa fazer isso como em qualquer outro aplicativo do STM32F7Discovery.  Se voc√™ n√£o sabe como fazer isso, pode ler sobre isso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br>  3: Compilando a imagem com a configura√ß√£o do OpenCV. </p><br><pre> <code class="plaintext hljs"> make confload-platform/opencv/stm32f7discovery make</code> </pre> <br><p>  4: Extraindo de se√ß√µes ELF que precisam ser gravadas no QSPI, em qspi.bin </p><br><pre> <code class="plaintext hljs"> arm-none-eabi-objcopy -O binary build/base/bin/embox build/base/bin/qspi.bin \ --only-section=.text --only-section=.rodata \ --only-section='.ARM.ex*' \ --only-section=.data</code> </pre> <br><p>  O diret√≥rio conf cont√©m um script que faz isso, para que voc√™ possa execut√°-lo </p><br><pre> <code class="plaintext hljs"> ./conf/qspi_objcopy.sh #   -- build/base/bin/qspi.bin</code> </pre> <br><p>  5: Usando tftp, carregue qspi.bin.bin em uma unidade flash QSPI.  Para fazer isso, no host, copie o qspi.bin para a pasta raiz do servidor tftp (geralmente s√£o / srv / tftp / ou / var / lib / tftpboot /; os pacotes para o servidor correspondente est√£o nas distribui√ß√µes mais populares, geralmente chamadas de tftpd ou tftp-hpa, √†s vezes voc√™ precisa fazer o <code>systemctl start tftpd.service</code> para iniciar). </p><br><pre> <code class="plaintext hljs"> #   tftpd sudo cp build/base/bin/qspi.bin /srv/tftp #   tftp-hpa sudo cp build/base/bin/qspi.bin /var/lib/tftpboot</code> </pre> <br><p>  Na Embox (ou seja, no carregador de inicializa√ß√£o), voc√™ precisa executar o seguinte comando (supomos que o servidor tenha o endere√ßo 192.168.2.1): </p><br><pre> <code class="plaintext hljs"> embox&gt; qspi_loader qspi.bin 192.168.2.1</code> </pre> <br><p>  6: Usando o comando <code>goto</code> , voc√™ precisa "pular" para a mem√≥ria QSPI.  O local espec√≠fico varia de acordo com a vincula√ß√£o da imagem. Voc√™ pode ver este endere√ßo com <code>mem 0x90000000</code> (o endere√ßo inicial se encaixa na segunda palavra da imagem de 32 bits);  voc√™ tamb√©m precisa definir a pilha com o sinalizador <code>-s</code> , o endere√ßo da pilha √© 0x90000000, por exemplo: </p><br><pre> <code class="plaintext hljs"> embox&gt;mem 0x90000000 0x90000000: 0x20023200 0x9000c27f 0x9000c275 0x9000c275 ‚Üë ‚Üë        embox&gt;goto -i 0x9000c27f -s 0x20023200 #  -i         &lt;      ,    OpenCV &gt;</code> </pre> <br><p>  7: Executar </p><br><pre> <code class="plaintext hljs"> embox&gt; edges 20</code> </pre> <br><p>  e desfrute de uma pesquisa de fronteira de 40 segundos :) </p><br><p>  Se algo der errado - escreva um problema em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nosso reposit√≥rio</a> , na lista de discuss√£o embox-devel@googlegroups.com ou nos coment√°rios aqui. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt457724/">https://habr.com/ru/post/pt457724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt457712/index.html">Como a Verizon e o BGP Optimizer configuram √≥timos offline</a></li>
<li><a href="../pt457714/index.html">Estouro de pilha em ingl√™s: Community Kill Guide</a></li>
<li><a href="../pt457718/index.html">HyperCard, o elo perdido na evolu√ß√£o da Web</a></li>
<li><a href="../pt457720/index.html">Autodesk Maya: Recursos √∫teis e b√°sicos para trabalhar com modelos 3D</a></li>
<li><a href="../pt457722/index.html">SQL: Problema de comparecimento do tempo: interrogat√≥rio</a></li>
<li><a href="../pt457728/index.html">Tabelas de hash no Go. Detalhes da implementa√ß√£o</a></li>
<li><a href="../pt457730/index.html">No escrit√≥rio, h√° uma ilus√£o de controle - n√£o est√° no controle remoto. Conversa com Devhab</a></li>
<li><a href="../pt457734/index.html">Come√ßa a revolu√ß√£o da fonte aberta na It√°lia</a></li>
<li><a href="../pt457736/index.html">"As ferramentas n√£o s√£o t√£o importantes quanto a capacidade de pensar nos sistemas que eles criam." √ìtima entrevista com Martin Kleppman</a></li>
<li><a href="../pt457738/index.html">Como implementamos o SD-Access e por que era necess√°rio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>