<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤘🏾 🗼 🤷🏾 Bahasa Pemrograman Mash Baru 👨‍⚖️ 🧛🏽 👇🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selama beberapa tahun saya mencoba mengembangkan bahasa pemrograman saya. Saya ingin membuat menurut saya bahasa yang paling sederhana, berfungsi penu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bahasa Pemrograman Mash Baru</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434966/">  Selama beberapa tahun saya mencoba mengembangkan bahasa pemrograman saya.  Saya ingin membuat menurut saya bahasa yang paling sederhana, berfungsi penuh dan nyaman. <br><br>  Dalam artikel ini saya ingin menyoroti tahap utama pekerjaan saya dan mulai dengan menjelaskan konsep bahasa yang dibuat dan implementasi pertamanya di mana saya saat ini bekerja. <br><a name="habracut"></a><br>  Saya akan katakan sebelumnya bahwa saya menulis seluruh proyek dalam Free Pascal, karena  Program di dalamnya dapat dirakit untuk sejumlah besar platform, dan kompiler itu sendiri menghasilkan binari yang sangat optimal (saya mengumpulkan semua komponen proyek dengan bendera O2). <br><br><h3>  Bahasa runtime </h3><br>  Hal pertama yang saya bicarakan adalah mesin virtual yang harus saya tulis untuk menjalankan aplikasi masa depan dalam bahasa saya.  Saya memutuskan untuk mengimplementasikan arsitektur stack, mungkin, karena itu cara termudah.  Saya tidak menemukan satu artikel pun yang normal tentang cara melakukan ini dalam bahasa Rusia, jadi setelah membaca materi berbahasa Inggris, saya duduk untuk mendesain dan menulis sepeda saya.  Selanjutnya saya akan memberikan ide-ide dan perkembangan "maju" saya dalam masalah ini. <br><br><h4>  Penumpukan implementasi </h4><br>  Jelas, VM berada di kepala tumpukan.  Dalam implementasi saya, ini bekerja dalam blok.  Intinya, ini adalah array sederhana pointer dan variabel untuk menyimpan indeks bagian atas tumpukan. <br>  Ketika diinisialisasi, array 256 elemen dibuat.  Jika lebih banyak pointer dilemparkan ke tumpukan, maka ukurannya meningkat dengan 256 elemen berikutnya.  Dengan demikian, saat mengeluarkan item dari tumpukan, ukurannya dapat disesuaikan. <br><br>  VM menggunakan beberapa tumpukan: <br><br><ol><li>  Tumpukan utama. </li><li>  Stack untuk menyimpan poin kembali. </li><li>  Tumpukan pengumpul sampah. </li><li>  Penangan tumpukan blok coba / tangkap / akhirnya. </li></ol><br><h4>  Konstanta dan variabel </h4><br>  Dengan ini, semuanya sederhana.  Konstanta diproses dalam potongan kode kecil yang terpisah dan tersedia di aplikasi di masa depan di alamat statis.  Variabel adalah array pointer dengan ukuran tertentu, akses ke selnya dilakukan oleh indeks - yaitu  alamat statis.  Variabel dapat ditempatkan di bagian atas tumpukan atau dibaca dari sana.  Sebenarnya, karena  variabel kita pada dasarnya menyimpan pointer ke nilai dalam memori VM, kemudian bekerja dengan pointer implisit yang mendominasi dalam bahasa. <br><br><h4>  Pengumpul sampah </h4><br>  Dalam VM saya ini semi-otomatis.  Yaitu  pengembang memutuskan kapan akan memanggil pengumpul sampah.  Ini tidak bekerja sesuai dengan penghitung pointer biasa, seperti dalam Python, Perl, Ruby, Lua, dll yang sama  Diimplementasikan melalui sistem penanda.  Yaitu  ketika dipahami bahwa suatu variabel diberi nilai sementara, sebuah penunjuk ke nilai ini ditambahkan ke tumpukan pengumpul sampah.  Di masa depan, kolektor dengan cepat menelusuri daftar petunjuk yang sudah disiapkan. <br><br><h4>  Menangani blok mencoba / menangkap / akhirnya </h4><br>  Seperti dalam bahasa modern lainnya, penanganan pengecualian adalah komponen penting dari itu.  Kernel VM dibungkus dalam blok try..catch, yang dapat kembali ke eksekusi kode setelah mendapatkan pengecualian dengan meletakkan sedikit informasi tentangnya di stack.  Dalam kode aplikasi, Anda dapat menentukan coba / tangkap / akhirnya blok kode, yang menunjukkan titik masuk untuk ditangkap (penangan pengecualian) dan akhirnya / akhir (ujung blok). <br><br><h4>  Multithreading </h4><br>  Ini didukung di tingkat VM.  Ini sederhana dan nyaman digunakan.  Ini bekerja tanpa sistem interupsi, sehingga kode harus berjalan di beberapa utas beberapa kali lebih cepat, masing-masing. <br><br><h4>  Pustaka Eksternal untuk VM </h4><br>  Tidak ada cara untuk melakukannya tanpanya.  VM mendukung impor, seperti halnya diterapkan dalam bahasa lain.  Anda dapat menulis sebagian kode dalam Mash dan sebagian kode dalam bahasa asli, lalu menautkannya bersama. <br><br><h3>  Penerjemah dari bahasa tingkat tinggi Mash ke bytecode untuk VM </h3><br><h4>  Bahasa menengah </h4><br>  Untuk dengan cepat menulis penerjemah dari bahasa yang rumit ke kode VM, saya pertama-tama mengembangkan bahasa perantara.  Ternyata pemandangan menakutkan seperti assembler, yang tidak ada rasa khusus untuk dipertimbangkan di sini.  Saya hanya bisa mengatakan bahwa pada level ini penerjemah memproses sebagian besar konstanta, variabel, menghitung alamat statis dan alamat titik masuknya. <br><br><h4>  Arsitektur Penerjemah </h4><br>  Saya memilih bukan arsitektur terbaik untuk implementasi.  Penerjemah tidak membangun pohon kode, sebagaimana layaknya penerjemah lainnya.  Dia melihat awal konstruksi.  Yaitu  jika potongan kode yang diuraikan seperti “while &lt;condition&gt;:”, maka jelas bahwa ini adalah konstruksi sementara dari loop dan perlu diproses sebagai konstruksi loop sementara.  Sesuatu seperti sakelar yang rumit. <br><br>  Berkat solusi arsitektur seperti itu, penerjemahnya tidak terlalu cepat.  Namun, kesederhanaan perbaikannya telah meningkat secara signifikan.  Saya menambahkan desain yang diperlukan lebih cepat daripada kopi saya bisa dingin.  Dukungan penuh untuk OOP dilaksanakan dalam waktu kurang dari seminggu. <br><br><h4>  Optimasi kode </h4><br>  Di sini, tentu saja, itu bisa direalisasikan lebih baik (dan itu akan terwujud, tetapi nanti, saat tangan menjangkau).  Sejauh ini, pengoptimal hanya tahu cara memotong kode, konstanta, dan impor yang tidak digunakan dari perakitan.  Juga, beberapa konstanta dengan nilai yang sama digantikan oleh satu.  Itu saja. <br><br><h3>  Bahasa Mash </h3><br><h4>  Konsep dasar bahasa </h4><br>  Gagasan utamanya adalah mengembangkan bahasa yang paling fungsional dan sederhana.  Saya percaya bahwa pembangunan mengatasi tugasnya dengan keras. <br><br><h4>  Blok Kode, Prosedur, dan Fungsi </h4><br>  Semua konstruksi dalam bahasa dibuka dengan titik dua <b>:</b> dan ditutup dengan operator <b>akhir</b> . <br><br>  Prosedur dan fungsi masing-masing dinyatakan sebagai proc dan func.  Argumen tercantum dalam tanda kurung.  Sama seperti kebanyakan bahasa lainnya. <br><br>  <b>Pernyataan kembali</b> dapat mengembalikan nilai dari suatu fungsi, pernyataan <b>istirahat</b> memungkinkan Anda untuk keluar dari prosedur / fungsi (jika di luar loop). <br><br>  Contoh kode: <br><br><pre><code class="ruby">...

func summ(a, b):
  return a + b
end

proc main():
  println(summ(inputln(), inputln()))
end
</code></pre><br>
<h4> </h4><br>
<ul>
<li>: for..end, while..end, until..end</li>
<li>: if..[else..]end, switch..[case..end..][else..]end</li>
<li>: proc &lt;&gt;():… end, func &lt;&gt;():… end</li>
<li>Label &amp; goto: &lt;&gt;:, jump &lt;&gt;</li>
<li>Enum    .</li>
</ul><br>
<h4></h4><br>
    ,     var   .<br>
<br>
 :<br>
<br>
<pre><code class="ruby">a ?= 10
b ?= a + 20
</code></pre><br>
<pre><code class="ruby">var a = 10, b = a + 20
</code></pre><br>
    .<br>
<br>
<h4></h4><br>
        .   Mash    - . .. , ,  ( .. ),      ().<br>
<br>
  ,     .<br>
<br>
     :<br>
<br>
<pre><code class="ruby">uses &lt;bf&gt;
uses &lt;crt&gt;

class MyClass:
  var a, b
  proc Create, Free
  func Summ
end

proc MyClass::Create(a, b):
  $a = new(a)
  $b = new(b)
end

proc MyClass::Free():
  Free($a, $b)
  $rem()
end

func MyClass::Summ():
  return $a + $b
end

proc main():
  x ?= new MyClass(10, 20)
  println(x-&gt;Summ())
  x-&gt;Free()
end
</code></pre><br>
: 30.<br>
<br>
  :<br>
<br>
<pre><code class="ruby">uses &lt;bf&gt;
uses &lt;crt&gt;

class MyClass:
  var a, b
  proc Create, Free
  func Summ
end

proc MyClass::Create(a, b):
  $a = new(a)
  $b = new(b)
end

proc MyClass::Free():
  Free($a, $b)
  $rem()
end

func MyClass::Summ():
  return $a + $b
end

class MyNewClass(MyClass):
  func Summ
end

func MyNewClass::Summ():
  return ($a + $b) * 2
end

proc main():
  x ?= new MyNewClass(10, 20)
  println(x-&gt;Summ())
  x-&gt;Free()
end
</code></pre><br>
: 60.<br>
<br>
    ?    !:<br>
<br>
<pre><code class="ruby">uses &lt;bf&gt;
uses &lt;crt&gt;

class MyClass:
  var a, b
  proc Create, Free
  func Summ
end

proc MyClass::Create(a, b):
  $a = new(a)
  $b = new(b)
end

proc MyClass::Free():
  Free($a, $b)
  $rem()
end

func MyClass::Summ():
  return $a + $b
end

class MyNewClass(MyClass):
  func Summ
end

func MyNewClass::Summ():
  return ($a + $b) * 2
end

proc main():
  x ?= new MyClass(10, 20)
  x-&gt;Summ ?= MyNewClass::Summ
  println(x-&gt;Summ())
  x-&gt;Free()
end
</code></pre><br>
: 60.<br>
<br>
        :<br>
<br>
<pre><code class="ruby">uses &lt;bf&gt;
uses &lt;crt&gt;

class MyClass:
  var a, b
end

proc main():
  x ?= new MyClass
  println(BoolToStr(x-&gt;type == MyClass))
  x-&gt;rem()
  println(BoolToStr(typeof(3.14) == typeReal))
end
</code></pre><br>
: true, true.<br>
<br>
<h4>     </h4><br>
 ?=         .<br>
 =        .<br>
     .        .<br>
@&lt;&gt; —     .<br>
?&lt;&gt; —    .<br>
@= —        .<br>
<br>
 :<br>
<br>
<pre><code class="ruby">uses &lt;bf&gt;
uses &lt;crt&gt;

proc main():
  var a = 10, b
  b ?= @a
  PrintLn(b)
  b ?= ?b
  PrintLn(b)
  b++
  PrintLn(a)
  InputLn()
end
</code></pre><br>
: - , 10, 11.<br>
<br>
<h4>Try..[catch..][finally..]end</h4><br>
 :<br>
<br>
<pre><code class="ruby">uses &lt;bf&gt;
uses &lt;crt&gt;

proc main():
  println("Start")
  try:
    println("Trying to do something...")
    a ?= 10 / 0
  catch:
    println(getError())
  finally:
    println("Finally")
  end
  println("End")
  inputln()
end
</code></pre><br>
<h4>  </h4><br>
     GraalVM &amp; Truffle.      JIT ,              . ,       JIT    GraalVM  LLVM.<br>
<br>
<h4></h4><br>
         .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  GitHub</a><br>
<br>
,    ,    .</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434966/">https://habr.com/ru/post/id434966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434952/index.html">OMower dengan ROS, langkah pertama</a></li>
<li><a href="../id434956/index.html">Perusahaan IT berkembang, laba tidak terlalu. Apa yang harus dilakukan</a></li>
<li><a href="../id434960/index.html">Tic-tac-toe: demonstrasi proses terkonfigurasi rekonfigurasi struktur DNA</a></li>
<li><a href="../id434962/index.html">Tidak, Anda tidak perlu Express di REST API Anda di Node.js</a></li>
<li><a href="../id434964/index.html">Cukup paranoia atau mengapa Anda tidak bersinar 100 poin dalam Kecepatan Halaman</a></li>
<li><a href="../id434968/index.html">Sesuatu tentang namespace</a></li>
<li><a href="../id434970/index.html">Tentang bisnis TI dan banyak lagi</a></li>
<li><a href="../id434972/index.html">Cara menulis unit test jika Anda tidak menyukainya sama sekali</a></li>
<li><a href="../id434974/index.html">Bekerja dengan format konfigurasi 1C: Enterprise</a></li>
<li><a href="../id434976/index.html">Fablab ITMO University: DIY-rekan kerja untuk orang-orang kreatif - tunjukkan apa yang ada di dalamnya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>