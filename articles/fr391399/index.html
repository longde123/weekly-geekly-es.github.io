<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏾 👨🏾‍🤝‍👨🏻 🧑🏿‍🤝‍🧑🏽 Pas un bureau stupide 🥔 🏅 💇🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je n'oserais jamais écrire un article sur la prochaine mise en œuvre d'une maison intelligente avec la connexion de capteurs de fuites d'eau dans la s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pas un bureau stupide</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/391399/"><img src="https://habrastorage.org/files/0dd/7a2/355/0dd7a23553144b86ab85d90d2b064823.jpg" align="left" width="255" height="189"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'oserais jamais écrire un article sur la prochaine mise en œuvre d'une maison intelligente avec la connexion de capteurs de fuites d'eau dans la salle de bain et de systèmes de suivi des tours de chats dans l'appartement. Dieu merci, le chat est sous le contrôle d'un chien, l'eau ne semble pas non plus couler. Mais encore, nous sommes plus au travail, dans divers bureaux, où il n'est pas toujours possible de créer un environnement de travail optimal. L'article est consacré au système de surveillance environnementale de l'espace de travail du bureau et aux activités que nous avons menées après un mois de travail (étonnamment) stable. Bien sûr, nous envoyons toutes les données dans les nuages, les regardons depuis nos smartphones, il n'y a aucune utilité, mais il n'y a aucune raison de se vanter auprès de parents et amis, et le bureau est devenu plus confortable. Tout est implémenté sur ESP8266, mais comment - vous êtes les bienvenus sous cat)</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Où est le moniteur? </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne dirai pas que nous travaillons directement dans des conditions insupportables. </font><font style="vertical-align: inherit;">Les bureaux de l'entreprise sont magnifiques, dans des chambres de trois personnes, beaucoup de fleurs. </font><font style="vertical-align: inherit;">Le bâtiment lui-même est entouré de forêt. </font><font style="vertical-align: inherit;">En général, un panorama du bureau où le système de surveillance est déployé est joint. </font></font><br>
<img src="https://habrastorage.org/files/984/d35/3ac/984d353ace384c1eae1e75d112a56c4c.jpg"> <br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que la surveillance? </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rien d'original. </font><font style="vertical-align: inherit;">Nous supprimons la température au bureau, l'humidité, la pression et le niveau de CO2. </font><font style="vertical-align: inherit;">Bien sûr, un capteur de lumière a été ajouté au système. </font><font style="vertical-align: inherit;">Le niveau d'éclairage des lieux de travail est même soumis à contrôle et devrait dans notre cas être au niveau de 300-400 Lux. </font><font style="vertical-align: inherit;">C'est peut-être le paramètre le plus important pour un travail confortable. </font><font style="vertical-align: inherit;">Et le plus dynamique de la journée.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3e1/150/cbc/3e1150cbc42247ad859b2faf45845c6b.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtenons la température et l'humidité du capteur DHT22. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description du</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> capteur.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/e10/371/788/e10371788d6747288bed75aebce84343.jpg" width="301" height="247"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prenons la pression du capteur BMP180. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description du</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> capteur.</font></font><div style="text-align:center;"><img src="https://habrastorage.org/files/26e/126/3d0/26e1263d0df142ec90551d66818d3226.jpg" width="225" height="230"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le niveau de CO2 est surveillé par le capteur optique MH-Z14. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description du</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> capteur.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/25c/952/171/25c952171b2449b7b1560bafcec9bfbe.jpg" width="260" height="250"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, le capteur TSL2561 sous la forme d'une plaque signalétique pour la série Arduino GROVE surveille la qualité de l'éclairage. </font><font style="vertical-align: inherit;">Description </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/293/d8a/b9c/293d8ab9c5fd451fa9c835ca64bd1b5a.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et enfin, le contrôleur ESP8266 sous la forme d'un mouchoir pour le prototypage rapide de NodeMcu (du nom du firmware), qui dans mon cas est flashé depuis l'IDE Arduino standard, dirige tout cela. </font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/ca4/d7c/47d/ca4d7c47d81a42f1b70252f2d1b0992f.jpg" width="320" height="220"></div><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous collectons la version en boîte</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Donc, tous les capteurs sont disposés sur la table - il est temps d'assembler l'appareil. </font><font style="vertical-align: inherit;">Cependant, pour commencer, nous analyserons quelques subtilités. </font><font style="vertical-align: inherit;">Esquissé un diagramme schématique pour plus de clarté.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/005/e9a/9aa/005e9a9aa1664c72aad7be7822bd1f32.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tous les capteurs sont alimentés à +3,3 V, que nous prendrons de la carte NodeMcu, car il y en a déjà trois sur la carte. Mais le capteur de dioxyde de carbone devra être alimenté séparément, il nécessite une alimentation de 4 à 6 volts, et le fabricant recommande fortement d'y prêter une attention particulière. Étant donné que je prévois d'alimenter l'appareil à partir d'une alimentation séparée à + 5 V, il n'y aura aucun problème. Nous alimentons la borne 1 du capteur MH-Z14 (ou 15, car elles sont dupliquées). Lorsque vous allumez le capteur pendant quelques minutes, cela dégage des ordures sur le port lors de la transmission via la ligne TX / RX, donc je prends le signal utile de ce capteur de la sortie PWM sur la 6e étape. En général, j'ai aimé ce capteur. Il est assez stable, a une sortie numérique et analogique, mais ne peut fonctionner qu'avec des microcontrôleurs avec une logique à trois volts, alors exécutez-le, par exemple, sur UNO sans</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">danser avec des tambourins, la</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coordination des niveaux logiques ne fonctionnera pas. Dans notre cas, l'ESP fonctionne sur une logique à trois volts, comme tous les autres capteurs. Dans le même temps, l'ESP lui-même est particulièrement pointilleux sur la qualité de l'énergie, mais sur la carte que j'ai utilisée dans cet article, le schéma normal de stabilisation de la puissance d'entrée jusqu'à +3,3 V est assemblé, mais je ne conseillerais toujours pas la carte à partir d'une IP douteuse serait plus de 5 volts. Nous ne déboguerons pas non plus un circuit entièrement assemblé, en l'alimentant uniquement à partir d'un port USB. Étant donné que le capteur de dioxyde de carbone a une grande consommation en raison de la présence d'une ampoule à incandescence (comme source infrarouge, probablement) dans sa conception, cela peut pousser le port. En avons-nous besoin?). Par conséquent, nous remplissons le firmware avec l'alimentation tierce incluse ou via USB, mais en déconnectant le capteur de dioxyde de carbone.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce n'est pas sans fer à souder ...</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Comme vous pouvez le voir sur le schéma, j'utilise deux capteurs sur la ligne i2c. </font><font style="vertical-align: inherit;">Il s'agit d'un capteur de pression et d'un capteur de lumière. </font><font style="vertical-align: inherit;">Comme vous le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">savez</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sur un bus série, vous pouvez "accrocher" jusqu'à 127 toutes sortes de capteurs et d'appareils. </font><font style="vertical-align: inherit;">Dans la mise en œuvre du protocole, les lignes SDA / SCL doivent être serrées à la puissance, mais une seule fois. </font><font style="vertical-align: inherit;">Et si nous accrochons N capteurs, dans chacun desquels il y a des accolades - vous pouvez planter une ligne. </font><font style="vertical-align: inherit;">Probablement, rien ne serait arrivé des deux capteurs - mais je suis toujours cohérent dans la conception. </font><font style="vertical-align: inherit;">Il ne devrait pas y avoir de dent - désolé ... Par conséquent, nous nous débarrassons des résistances de traction dans l'un des capteurs. </font><font style="vertical-align: inherit;">Il était plus pratique de retirer les résistances du capteur de pression. </font><font style="vertical-align: inherit;">La figure montre.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/606/4b0/ef3/6064b0ef37ef4f2dbcbcfba329f13b12.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après tous ces exercices, nous récupérons notre version en boîte. </font><font style="vertical-align: inherit;">Dans une boîte en papier)</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/d60/a52/e23/d60a52e239a941a7b1c143d0d4c2568a.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui est surprenant - cela a fonctionné tout de suite. </font><font style="vertical-align: inherit;">Ce n'est pas bon, mais quand même. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous digérons les données.</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Donc, l'idéologie est la suivante. </font><font style="vertical-align: inherit;">Nous collectons des données à partir de capteurs et, par exemple, toutes les 10 minutes, nous les déposons dans le stockage cloud via le Wi-Fi de bureau. </font><font style="vertical-align: inherit;">Nous construisons de beaux graphiques et analysons les résultats de Thingspeak.com. </font><font style="vertical-align: inherit;">Le service est gratuit, assez stable et facile à comprendre. </font><font style="vertical-align: inherit;">Beaucoup a été </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">écrit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur lui </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous enregistrons le canal, obtenons la clé API et réinitialisons les données de tous les capteurs à l'aide de la méthode POST.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code de programme</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">//    ,     <font></font>
#include &lt;Wire.h&gt;<font></font>
#include &lt;ESP8266WiFi.h&gt; //     ,    <font></font>
float index_comfort=0; //   <font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//   ,    <font></font>
//   <font></font>
#include "DHT.h"<font></font>
#define DHTTYPE DHT22  //   - Grove DHT22<font></font>
#define DHTPIN 14     //  14  ESP (   D5)  . <font></font>
<font></font>
//       <font></font>
float humidity_room = 0.0; //     <font></font>
//  humidity_room = dht.readHumidity();<font></font>
float temp_room = 0.0; //     <font></font>
//  temp_room = dht.readTemperature();<font></font>
<font></font>
//    .     <font></font>
//     <font></font>
DHT dht(DHTPIN, DHTTYPE);<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//     <font></font>
#include &lt;Digital_Light_TSL2561.h&gt;<font></font>
//      <font></font>
float light_room=0.0;<font></font>
//  light_room=TSL2561.readVisibleLux();<font></font>
<font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//  C02  <font></font>
int CO2; //     <font></font>
int pin_CO2 = 13; //  13,   7 <font></font>
//  2<font></font>
<font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//    . <font></font>
#include &lt;Adafruit_BMP085.h&gt;<font></font>
Adafruit_BMP085 bmp;<font></font>
float pressure =0.0; //   <font></font>
//  pressure=bmp.readPressure(); <font></font>
//   !<font></font>
// 1013.25 millibar = 101325  = 760  ..   ? ...<font></font>
//      ,  <font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//        -<font></font>
//     thingspeak.com , , ..,  <font></font>
#define myPeriodic 300; //        <font></font>
const char* server = "184.106.153.149"; //   thingspeak.com<font></font>
<font></font>
String apiKey ="1K******************GM"; //   <font></font>
<font></font>
const char* MY_SSID = "P********x"; //  Wi-Fi  <font></font>
const char* MY_PWD = ""; //  ,    ,  ""<font></font>
<font></font>
int sent = 0; //   ()  .  ?  ,  ...<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//    ,  <font></font>
<font></font>
void setup() {<font></font>
  Serial.begin(9600); //    <font></font>
 <font></font>
  Serial.println("Go! Go! Go!");<font></font>
  <font></font>
  Wire.begin(); <font></font>
 <font></font>
  dht.begin(); //    <font></font>
 <font></font>
  TSL2561.init(); //    <font></font>
 <font></font>
  pinMode(pin_CO2, INPUT); //    CO2  <font></font>
 <font></font>
  //   <font></font>
 if (!bmp.begin()) {<font></font>
 Serial.println("Promlem with sensor bmp180!");<font></font>
  while (1) {}<font></font>
  }<font></font>
  //  wi-Fi<font></font>
 connectWifi();<font></font>
}<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//       <font></font>
void connectWifi() <font></font>
{<font></font>
  Serial.print("Connecting to "+*MY_SSID);<font></font>
 WiFi.begin(MY_SSID, MY_PWD);<font></font>
 while (WiFi.status() != WL_CONNECTED) {<font></font>
  delay(1000);<font></font>
 Serial.print(".");<font></font>
  }<font></font>
  <font></font>
 Serial.println("");<font></font>
 Serial.println("Connected");<font></font>
 Serial.println(""); <font></font>
  Serial.print("SSID: ");<font></font>
  Serial.println(WiFi.SSID());<font></font>
<font></font>
  //   <font></font>
  IPAddress ip = WiFi.localIP();<font></font>
  Serial.print("IP Address: ");<font></font>
  Serial.println(ip);<font></font>
<font></font>
  //    <font></font>
  long rssi = WiFi.RSSI();<font></font>
  Serial.print("signal strength (RSSI):");<font></font>
  Serial.print(rssi);<font></font>
  Serial.println(" dBm"); <font></font>
}//end connect<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
//    <font></font>
void send_info(float temp_in, float temp_out, float humidity_in, int CO2_in, float light_in, float pressure_all )<font></font>
{  <font></font>
  WiFiClient client;<font></font>
  <font></font>
   if (client.connect(server, 80)) { // use ip 184.106.153.149 or api.thingspeak.com<font></font>
   Serial.println("WiFi Client connected ");<font></font>
   <font></font>
   //        <font></font>
   String postStr = apiKey; //  <font></font>
   postStr += "&amp;field1=";<font></font>
   postStr += String(temp_in); //    <font></font>
<font></font>
   postStr += "&amp;field2=";<font></font>
   postStr += String(temp_out); //   <font></font>
<font></font>
   postStr += "&amp;field3=";<font></font>
   postStr += String(humidity_in); //    <font></font>
<font></font>
   postStr += "&amp;field4=";<font></font>
   postStr += String(CO2_in); // 2   <font></font>
<font></font>
   postStr += "&amp;field5=";<font></font>
   postStr += String(light_in); //    <font></font>
<font></font>
   postStr += "&amp;field6=";<font></font>
   postStr += String(pressure_all); //   <font></font>
   <font></font>
   postStr += "\r\n\r\n"; //    <font></font>
   <font></font>
   client.print("POST /update HTTP/1.1\n");<font></font>
   client.print("Host: api.thingspeak.com\n");<font></font>
   client.print("Connection: close\n");<font></font>
   client.print("X-THINGSPEAKAPIKEY: " + apiKey + "\n");<font></font>
   client.print("Content-Type: application/x-www-form-urlencoded\n");<font></font>
   client.print("Content-Length: ");<font></font>
   client.print(postStr.length());<font></font>
   client.print("\n\n");<font></font>
   client.print(postStr);<font></font>
   delay(1000);  <font></font>
   }//end if<font></font>
   sent++; //   <font></font>
  <font></font>
 client.stop();<font></font>
 Serial.println("transmition closed ");<font></font>
}//end send<font></font>
<font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//    ,   ? <font></font>
<font></font>
void loop()<font></font>
{<font></font>
 delay(5000);<font></font>
 // <font></font>
 dht.begin();<font></font>
 humidity_room = dht.readHumidity();<font></font>
delay(500);<font></font>
<font></font>
//   <font></font>
 temp_room = dht.readTemperature();<font></font>
delay(500);<font></font>
<font></font>
//   <font></font>
light_room=TSL2561.readVisibleLux();<font></font>
delay(500);<font></font>
<font></font>
<font></font>
// CO2  <font></font>
 while(digitalRead(pin_CO2)==HIGH){;}<font></font>
float duration_h = pulseIn(pin_CO2,HIGH)/1000;<font></font>
 <font></font>
 CO2= int(5000*(duration_h-2)/(duration_h+(1004-duration_h)-4)); //   <font></font>
 delay(500);<font></font>
<font></font>
//  <font></font>
bmp.begin();<font></font>
pressure=bmp.readPressure(); <font></font>
pressure=int((pressure/101325)*760);<font></font>
delay(500);<font></font>
<font></font>
//    <font></font>
if (temp_room&lt;18) {<font></font>
  index_comfort=(2*light_room/300)+(400/CO2)+humidity_room/40;<font></font>
  }<font></font>
<font></font>
if (temp_room&gt;25) {<font></font>
  index_comfort=(2*light_room/300)+(400/CO2)+humidity_room/40;<font></font>
  }<font></font>
<font></font>
  index_comfort=1+(2*(light_room/300)+(400/CO2)+humidity_room/40);<font></font>
<font></font>
  if (index_comfort&gt;5){<font></font>
    index_comfort=5;<font></font>
    }<font></font>
  <font></font>
//    <font></font>
send_info(temp_room, index_comfort, humidity_room, CO2, light_room, pressure);<font></font>
  <font></font>
  //.      <font></font>
  int count = myPeriodic;<font></font>
  while(count--)<font></font>
  delay(1000);<font></font>
<font></font>
  // ,  .   ...<font></font>
  // , <font></font>
  //<font></font>
  //       i2c    ,   <font></font>
  // .     . <font></font>
  //     .  .    <font></font>
  //  ,   .    ,   . <font></font>
  //     ,  DHT22,    . <font></font>
  // --,     ... <font></font>
  // 15  2016 .    <font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si tout fonctionne correctement, alors ce sera quelque chose comme ça)</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/a16/19c/b2d/a1619cb2dc4342e48c4b02734610fc5b.jpg"></div><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que cela fonctionne, vous aurez besoin de bibliothèques pour travailler avec des capteurs sélectionnés et d'une bibliothèque pour travailler avec ESP8266 via Wi-Fi. Vous devez également ajouter la carte NodeMcu à la liste des cartes IDE Arduino, et pour que l'ordinateur la voie, vous avez besoin d'un pilote USB-SERIAL CH340, qui est facile à trouver et à télécharger sur le réseau sans aucun problème. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bibliothèque pour ESP8266 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Téléchargez la</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
bibliothèque pour travailler avec un capteur d'humidité. </font><font style="vertical-align: inherit;">
Bibliothèque de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">téléchargement</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour travailler avec le capteur de lumière. </font><font style="vertical-align: inherit;">
Bibliothèque de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">téléchargement</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour travailler avec un capteur de pression. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Télécharger</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le capteur de CO2 n'a pas besoin de bibliothèques. Les indications sont calculées par la durée de la sortie d'impulsion provenant de PWM et calculées par la formule de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">description</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capteur. </font><font style="vertical-align: inherit;">À propos, la plage de mesure n'est pas de 2000 ppm, mais de 5000, ce qui, d'ailleurs, est également écrit par l'utilisateur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hellsy22</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> récent </font><font style="vertical-align: inherit;">sur un capteur de dioxyde de carbone similaire. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusions organisationnelles</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Travaux </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. L'engin est digne de sortir d'une boîte de papier pour un bâtiment décent.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ça y est. </font><font style="vertical-align: inherit;">Ce sera comme un feu de circulation pour montrer le niveau de confort dans le bureau.</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/907/3a4/e47/9073a4e47fc247bfa7c88341594f2fbf.jpg"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Il n'y a pas beaucoup de lumière dans le bureau le soir - ils ont ajouté quelques plafonniers. Ça s'est amélioré. 350 lx </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. La femme de ménage travaille vraiment. Arrive tôt le matin, allume la lumière, le nettoyage humide donne une poussée d'humidité dans le bureau pendant une demi-heure. Pas beaucoup, mais quand même ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Après deux heures de travail (trois personnes respirent fort) au bureau, le niveau de CO2 décroît. Une diffusion de cinq minutes corrige la situation à la normale (500 ppm). Combinez (si vous le souhaitez) la diffusion avec de la gymnastique)))</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. Très sec. </font><font style="vertical-align: inherit;">Le chauffage en hiver, bien sûr, est la raison directe. </font><font style="vertical-align: inherit;">Il n'est pas possible d'atteindre une humidité confortable de 40 à 50%. </font><font style="vertical-align: inherit;">Cependant, les fleurs du bureau donnent vraiment plus de 10% d'humidité par rapport à une pièce similaire sans fleurs. </font><font style="vertical-align: inherit;">N'oubliez pas de les arroser, bien sûr). </font><font style="vertical-align: inherit;">Au fait, il faut 10 à 12 litres d'eau pour arroser les fleurs. </font><font style="vertical-align: inherit;">Le bureau dispose de 13 pots de fleurs. </font><font style="vertical-align: inherit;">Arrosez deux fois par semaine. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. L'utilité de cela dans tout, franchement, ne suffit pas. </font><font style="vertical-align: inherit;">Cependant, par exemple, pour les classes scolaires ou une clinique, de tels systèmes seraient probablement plus utiles.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ct/sl/yg/ctslygn5rw0wym3aqglkzwvrcoe.jpeg"></div></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr391399/">https://habr.com/ru/post/fr391399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr391385/index.html">Первая экскурсия по штаб-квартире Blue Origin</a></li>
<li><a href="../fr391387/index.html">Pourquoi le système solaire est-il plat? [Voiceover Vert Dider]</a></li>
<li><a href="../fr391389/index.html">Un homme heureux qui a réussi à réaliser tous ses rêves et projets. Ingénieur amiral et académicien A.I. Berg et ki berg netika</a></li>
<li><a href="../fr391393/index.html">Mauvais miel: un apiculteur français a appris à faire du miel de chanvre</a></li>
<li><a href="../fr391395/index.html">PCB Ruler. La ligne de radio amateur et de crowdfunding à Vkontakte</a></li>
<li><a href="../fr391401/index.html">HackerQuest v0.97: salle de quête de niveau de difficulté "Cauchemar"</a></li>
<li><a href="../fr391403/index.html">Esprit sans fil. Présentation du module ESP-8266 Witty</a></li>
<li><a href="../fr391407/index.html">Supercoupe du World Drone Prix Supercup: Lot de 1 million de dollars</a></li>
<li><a href="../fr391409/index.html">La sonde Dawn étudie Cérès pendant un an: découvertes intéressantes et nouveaux puzzles</a></li>
<li><a href="../fr391413/index.html">Visualisation musicale du 21e siècle: de l'animusic à la boîte à musique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>