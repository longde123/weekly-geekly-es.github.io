<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÄüèº üéâ üßöüèΩ Os ganchos s√£o substitu√≠dos no React Redux? üö∞ ‚õÖÔ∏è üö£üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde que os ganchos apareceram no React, houve muitas perguntas sobre se eles podem substituir o Redux. 

 Acredito que ganchos e Redux t√™m pouco em ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Os ganchos s√£o substitu√≠dos no React Redux?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/464293/">  Desde que os ganchos apareceram no React, houve muitas perguntas sobre se eles podem substituir o Redux. <br><br>  Acredito que ganchos e Redux t√™m pouco em comum.  Hooks n√£o nos d√° novas e surpreendentes oportunidades de trabalhar com o estado.  Em vez disso, eles estendem as APIs para que possam fazer no React o que j√° era poss√≠vel nele.  No entanto, a API do hook tornou o trabalho com os recursos de gerenciamento de estado do React muito mais conveniente.  Verificou-se que √© mais f√°cil usar os novos recursos para trabalhar com o estado do que os antigos que estavam dispon√≠veis nos componentes com base nas classes.  Agora eu uso as ferramentas para trabalhar com o estado dos componentes com muito mais frequ√™ncia do que antes.  Naturalmente, fa√ßo isso apenas quando √© apropriado. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/3l/la/tr/3llatro-chokmu9rdtwtga0l1sc.jpeg"></a> <br><br>  Para explicar minha atitude em rela√ß√£o ao React hooks e ao Redux, gostaria de falar primeiro sobre as situa√ß√µes em que o Redux geralmente √© usado. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">O que √© o Redux?</font> </h2><br>  Redux √© uma biblioteca que implementa o armazenamento previs√≠vel do estado do aplicativo.  √â tamb√©m uma arquitetura que se integra perfeitamente ao React. <br><br>  Aqui est√£o os principais pontos fortes do Redux: <br><br><ul><li>  Representa√ß√£o determin√≠stica do estado (em combina√ß√£o com componentes puros, isso torna poss√≠vel formar elementos visuais determin√≠sticos). </li><li>  Suporte para altera√ß√µes de estado transacional. </li><li>  Isolamento do gerenciamento de estado dos mecanismos de E / S e efeitos colaterais. </li><li>  A presen√ßa de uma √∫nica fonte de dados confi√°veis ‚Äã‚Äãpara o estado. </li><li>  F√°cil organiza√ß√£o da colabora√ß√£o com o estado em v√°rios componentes. </li><li>  Ferramentas de an√°lise transacional (registro autom√°tico de objetos de a√ß√£o). </li><li>  Depura√ß√£o com a capacidade de gravar e reproduzir o processo de execu√ß√£o do programa (Time Travel Debugging, TTD). </li></ul><br>  Em outras palavras, o Redux permite organizar bem seu c√≥digo e depur√°-lo convenientemente.  O Redux ajuda a desenvolver aplicativos f√°ceis de manter.  O uso desta biblioteca facilita a localiza√ß√£o das fontes de problemas que surgem nos programas. <br><br><h2>  <font color="#3AC1EF">O que s√£o ganchos React?</font> </h2><br>  Os ganchos de rea√ß√£o permitem, ao trabalhar com componentes funcionais, usar um an√°logo do estado dos componentes com base em classes e an√°logos de seus m√©todos de ciclo de vida.  Ganchos apareceram no React 16.8. <br><br>  Entre os principais pontos fortes dos ganchos est√£o os seguintes: <br><br><ul><li>  A capacidade de usar estado e manipular eventos de ciclo de vida de componentes sem usar componentes baseados em classe. </li><li>  Armazenamento conjunto da l√≥gica relacionada no mesmo local do componente em vez de dividir uma l√≥gica semelhante entre v√°rios m√©todos de ciclo de vida. </li><li>  Mecanismos de compartilhamento independentes da implementa√ß√£o do componente (isso √© semelhante ao modelo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suporte de renderiza√ß√£o</a> ). </li></ul><br>  Observe que esses √≥timos recursos n√£o sobrecarregam o Redux.  Os ganchos do React podem e devem ser usados ‚Äã‚Äãpara executar atualiza√ß√µes de estado determin√≠stico, mas esse sempre foi um dos recursos do React, e o modelo de estado determin√≠stico do Redux se encaixa bem nesse recurso.  √â assim que o React alcan√ßa o determinismo na sa√≠da dos elementos visuais, e esse √©, sem exagero, um dos motivos determinantes para a cria√ß√£o do React. <br><br>  Se voc√™ usar ferramentas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a API react-redux com suporte a gancho</a> ou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gancho React useReducer</a> , descobrir√° que n√£o h√° motivo para perguntar o que escolher - hooks ou Redux.  Voc√™ pode usar os dois, combinando e combinando essas tecnologias. <br><br><h2>  <font color="#3AC1EF">O que substitui os ganchos?</font> </h2><br>  Ap√≥s o advento das APIs de gancho, parei de usar as seguintes tecnologias: <br><br><ul><li>  Componentes baseados em classe. </li><li>  Padr√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suporte de renderiza√ß√£o</a> . </li></ul><br><h2>  <font color="#3AC1EF">O que n√£o substitui os ganchos?</font> </h2><br>  Eu ainda uso frequentemente as seguintes tecnologias: <br><br><ul><li>  Redux - por todas as raz√µes acima. </li><li>  Componentes de ordem superior - com o objetivo de executar a composi√ß√£o de componentes nos casos em que eu tenho que implementar a funcionalidade de ponta a ponta compartilhada por todos ou alguns dos componentes visuais do aplicativo.  Essa funcionalidade inclui provedores Redux, sistemas de layout de p√°gina, sistemas de suporte a configura√ß√µes de aplicativos, ferramentas de autentica√ß√£o e autoriza√ß√£o, ferramentas de internacionaliza√ß√£o de aplicativos e assim por diante. </li><li>  Separa√ß√£o entre componentes de cont√™iner e componentes que t√™m uma representa√ß√£o visual.  Isso permite melhorar a modularidade e a testabilidade dos aplicativos; √© melhor separar efeitos e pura l√≥gica. </li></ul><br><h2>  <font color="#3AC1EF">Quando usar ganchos?</font> </h2><br>  N√£o √© necess√°rio se esfor√ßar para usar o Redux em todos os aplicativos e componentes.  Se o seu projeto consistir em um componente visual, se ele n√£o salvar dados e n√£o carregar dados a partir dele, se opera√ß√µes de E / S ass√≠ncronas n√£o forem executadas nele, n√£o consigo pensar em um motivo digno para complicar esse projeto usando o Redux nele. <br><br>  O mesmo pode ser dito sobre componentes que possuem os seguintes recursos: <br><br><ul><li>  Eles n√£o usam recursos de rede. </li><li>  Eles n√£o armazenam dados no estado e n√£o os carregam a partir da√≠. </li><li>  Eles n√£o compartilham o estado com outros componentes que n√£o s√£o seus descendentes. </li><li>  Eles n√£o t√™m um determinado estado pr√≥prio, usado para armazenamento de dados a curto prazo. </li></ul><br>  Voc√™ pode ter um bom motivo para usar o modelo padr√£o de estado do componente React em determinadas situa√ß√µes.  Em tais situa√ß√µes, os ganchos React far√£o um bom trabalho.  Por exemplo, o formul√°rio descrito abaixo usa o estado local do componente usando o gancho React <code>useState</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TextField, { Input } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material/react-text-field'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> noop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Holder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{  itemPrice = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">175</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  name = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  email = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  id = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  removeHolder = noop,  showRemoveButton = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">, }</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name);  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> setter = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function"> =&gt;</span></span> e =&gt; {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { target } = e;    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { value } = target;    set(value);  }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (    &lt;div className="row"&gt;      &lt;div className="holder"&gt;        &lt;div className="holder-name"&gt;          &lt;TextField label="Name"&gt;            &lt;Input value={nameInput} onChange={setter(setName)} required /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        &lt;div className="holder-email"&gt;          &lt;TextField label="Email"&gt;            &lt;Input              value={emailInput}              onChange={setter(setEmail)}              type="email"              required            /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        {showRemoveButton &amp;&amp; (          &lt;button            className="remove-holder"            aria-label="Remove membership"            onClick={e =&gt; {              e.preventDefault();              removeHolder(id);            }}          &gt;            √ó          &lt;/button&gt;        )}      &lt;/div&gt;      &lt;div className="line-item-price"&gt;${itemPrice}&lt;/div&gt;      &lt;style jsx&gt;{cssHere}&lt;/style&gt;    &lt;/div&gt;  ); }; Holder.propTypes = {  name: t.string,  email: t.string,  itemPrice: t.number,  id: t.string,  removeHolder: t.func,  showRemoveButton: t.bool, }; export default Holder;</code> </pre> <br>  Aqui <code>useState</code> usado para controlar o estado usado brevemente dos campos de entrada de <code>name</code> e <code>email</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email);</code> </pre> <br>  Voc√™ pode perceber que ainda existe um criador da a√ß√£o <code>removeHolder</code> que entra nas propriedades do Redux.  Como j√° mencionado, a combina√ß√£o e combina√ß√£o de tecnologias √© completamente normal. <br><br>  Usar o estado local de um componente para resolver esses problemas sempre pareceu bom, mas antes dos ganchos do React, eu queria, em qualquer caso, salvar os dados do componente no armazenamento Redux e obter o estado das propriedades. <br><br>  Anteriormente, trabalhando com o estado de um componente envolvido usando componentes baseados em classe, gravando os dados iniciais no estado usando os mecanismos para declarar propriedades de classe (ou no construtor de classe) e assim por diante.  Como resultado, verificou-se que, para evitar o uso do Redux, o componente tinha que ser muito complicado.  O Redux tamb√©m falou a favor da exist√™ncia de ferramentas convenientes para gerenciar o estado dos formul√°rios usando o Redux.  Como resultado, antes, eu n√£o teria me preocupado com o fato de o estado tempor√°rio do formul√°rio ser armazenado no mesmo local que os dados com uma vida √∫til mais longa. <br><br>  Como j√° usei o Redux em todas as minhas aplica√ß√µes mais ou menos complexas, a escolha da tecnologia para armazenar o estado dos componentes dos componentes n√£o me causou muita reflex√£o.  Eu apenas usei o Redux em quase todos os casos. <br><br>  Em condi√ß√µes modernas, fazer uma escolha tamb√©m √© f√°cil: trabalhar com o estado do componente √© organizado usando mecanismos padr√£o do React e gerenciando o estado do aplicativo usando o Redux. <br><br><h2>  <font color="#3AC1EF">Quando usar o Redux?</font> </h2><br>  Outra pergunta comum sobre gerenciamento de estado √©: ‚ÄúPreciso colocar absolutamente tudo no reposit√≥rio Redux?  Se n√£o o fizer, ele violar√° a capacidade de depurar aplicativos usando mecanismos TTD? " <br><br>  N√£o h√° necessidade de hospedar absolutamente tudo no reposit√≥rio Redux.  O fato √© que os aplicativos usam muitos dados tempor√°rios dispersos demais para fornecer algumas informa√ß√µes que, sendo registradas no log ou usadas durante a depura√ß√£o, podem fornecer ao desenvolvedor uma ajuda significativa para encontrar problemas.  Provavelmente voc√™, a menos que esteja escrevendo um aplicativo de editor em tempo real, n√£o precisar√° gravar no estado todo movimento do mouse ou pressionamento de tecla.  Ao colocar algo em um estado Redux, voc√™ adiciona um n√≠vel adicional de abstra√ß√£o ao aplicativo, al√©m de um n√≠vel adicional de complexidade que o acompanha. <br><br>  Em outras palavras, voc√™ pode usar o Redux com seguran√ßa, mas deve haver algum motivo para isso.  O uso dos recursos Redux nos componentes pode ser justificado se os componentes diferirem nos seguintes recursos: <br><br><ul><li>  Eles usam E / S.  Por exemplo, eles trabalham com uma rede ou com determinados dispositivos. </li><li>  Eles salvam dados ou carregam dados deles. </li><li>  Eles trabalham com seu estado em conjunto com componentes que n√£o s√£o seus descendentes. </li><li>  Eles lidam com qualquer l√≥gica comercial com a qual outras partes do aplicativo lidam - eles processam dados que s√£o usados ‚Äã‚Äãem outras partes do aplicativo. </li></ul><br>  Aqui est√° outro exemplo retirado do aplicativo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TDDDay</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useDispatch, useSelector } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { compose } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ramda'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> page <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../hocs/page.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Purchase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { addHolder, removeHolder, getHolders } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-reducer.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PurchasePage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      // mapStateToProps  mapDispatchToProps  const dispatch = useDispatch();  const holders = useSelector(getHolders); const props = {    //           //    dispatch.    addHolder: compose(      dispatch,      addHolder    ),    removeHolder: compose(      dispatch,      removeHolder    ),    holders,  }; return &lt;Purchase {...props} /&gt;; }; // `page` -    ,    //        . export default page(PurchasePage);</span></span></code> </pre> <br>  Este documento n√£o lida com o DOM.  Este √© um componente de apresenta√ß√£o.  Ele est√° conectado ao Redux usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a API react-redux com suporte a gancho</a> . <br><br>  O redux √© usado aqui porque precisamos que os dados que este formul√°rio manipule sejam usados ‚Äã‚Äãem outras partes da interface do usu√°rio.  E ap√≥s a conclus√£o da opera√ß√£o de compra, precisamos salvar as informa√ß√µes relevantes no banco de dados. <br><br>  Os fragmentos de estado com os quais esse c√≥digo trabalha s√£o usados ‚Äã‚Äãpor v√°rios componentes; eles n√£o s√£o processados ‚Äã‚Äãpor apenas um componente.  N√£o s√£o dados, existindo apenas um curto per√≠odo de tempo.  Esses dados podem ser considerados permanentes, podem ser usados ‚Äã‚Äãem diferentes telas do aplicativo e em v√°rias sess√µes.  Todos esses s√£o cen√°rios nos quais os estados do componente para armazenamento de dados n√£o podem ser aplicados.  √â verdade que isso ainda √© poss√≠vel, mas apenas se o criador do aplicativo gravar, com base na API do React, sua pr√≥pria biblioteca para gerenciar o estado.  Isso √© muito mais dif√≠cil do que apenas usar o Redux. <br><br>  A API do React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Suspense</a> , no futuro, pode ser √∫til ao armazenar dados no estado e carreg√°-los a partir dele.  Precisamos aguardar seu lan√ßamento e ver se ele pode substituir os modelos para salvar e carregar dados Redux.  O Redux nos permite separar claramente os efeitos colaterais do restante da l√≥gica do componente, enquanto n√£o precisamos trabalhar com servi√ßos de E / S de uma maneira especial.  (O motivo pelo qual prefiro a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">redux-saga</a> ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">middleware redux-thunk</a> √© o isolamento do efeito).  Para competir com o Redux nesse cen√°rio, a API do React precisar√° fornecer isolamento de efeito. <br><br><h2>  <font color="#3AC1EF">Redux √© arquitetura</font> </h2><br>  O Redux √© muito mais (e geralmente muito menos) do que uma biblioteca de gerenciamento de estado.  √â tamb√©m um subconjunto da arquitetura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Flux</a> , que define muito mais estritamente como as mudan√ßas de estado s√£o implementadas.  Leia mais sobre a arquitetura Redux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Costumo usar redutores criados no estilo Redux nesses casos em que preciso manter o estado complexo do componente, mas n√£o preciso usar a biblioteca Redux.  Eu tamb√©m uso a√ß√µes criadas no esp√≠rito do Redux (e at√© mesmo ferramentas do Redux como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Autodux</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">redux-saga</a> ) para enviar a√ß√µes para aplicativos Node.js.  No entanto, nem importo o Redux para esses aplicativos. <br><br>  O projeto Redux sempre foi mais uma arquitetura e um conjunto de acordos volunt√°rios do que uma biblioteca.  De fato, a implementa√ß√£o b√°sica do Redux pode ser apresentada literalmente em algumas dezenas de linhas de c√≥digo. <br><br>  Isso acabar√° sendo uma boa not√≠cia para quem deseja usar o estado local dos componentes com ganchos com mais frequ√™ncia e n√£o vincula tudo ao Redux. <br><br>  O React suporta o gancho <code>useReducer</code> , que pode funcionar com redutores no estilo Redux.  Isso √© bom para implementar uma l√≥gica n√£o trivial de trabalhar com o estado, trabalhar com fragmentos de estado dependentes e assim por diante.  Se voc√™ encontrar um problema para o qual o estado tempor√°rio de um componente individual √© adequado, poder√° usar a arquitetura Redux para trabalhar com esse estado, mas, em vez da biblioteca Redux, poder√° usar o gancho <code>useReducer</code> para gerenciar o estado. <br><br>  Se, posteriormente, voc√™ precisar estabelecer um armazenamento permanente de dados que anteriormente s√≥ foram armazenados temporariamente, estar√° 90% pronto para essa altera√ß√£o.  Tudo o que voc√™ precisa fazer √© conectar o componente ao reposit√≥rio Redux e adicionar o redutor correspondente l√°. <br><br><h2>  <font color="#3AC1EF">Perguntas e Respostas</font> </h2><br><h3>  <font color="#3AC1EF">Determin O determinismo est√° quebrado se o Redux n√£o gerencia todos os dados do aplicativo?</font> </h3><br>  N√£o, n√£o est√° quebrado.  De fato, o uso do Redux n√£o torna um projeto determin√≠stico.  Mas os acordos s√£o.  Se voc√™ deseja que seu estado Redux seja determin√≠stico, use <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√µes puras</a> .  O mesmo se aplica a situa√ß√µes nas quais √© necess√°rio que o estado tempor√°rio dos componentes locais seja determinado. <br><br><h3>  <font color="#3AC1EF">‚ñç A biblioteca Redux deve desempenhar o papel de uma √∫nica fonte de dados confi√°veis?</font> </h3><br>  O princ√≠pio de uma √∫nica fonte de dados confi√°veis ‚Äã‚Äãn√£o indica que √© necess√°rio que todos os dados inclu√≠dos no estado do aplicativo sejam armazenados em um √∫nico local.  O significado desse princ√≠pio √© que cada fragmento do estado deve ter apenas uma fonte de dados confi√°veis.  Como resultado, podemos ter muitos fragmentos de estado, cada um dos quais com sua pr√≥pria fonte de dados confi√°veis. <br><br>  Isso significa que o programador pode decidir o que √© transferido para o Redux e o que √© transferido para o estado dos componentes.  Dados determinantes do estado tamb√©m podem ser obtidos de outras fontes.  Por exemplo, em uma API do navegador que permite trabalhar com informa√ß√µes sobre o endere√ßo da p√°gina que voc√™ est√° visualizando. <br><br>  O Redux √© uma √≥tima ferramenta para oferecer suporte a uma √∫nica fonte de dados confi√°veis ‚Äã‚Äãpara o estado de um aplicativo.  Por√©m, se o estado do componente estiver localizado e usado exclusivamente dentro desse componente, ent√£o, por defini√ß√£o, esse estado j√° ter√° uma √∫nica fonte de dados confi√°veis ‚Äã‚Äã- o estado do componente React. <br><br>  Se voc√™ colocar alguns dados no estado Redux, sempre deve ler esses dados no estado Redux.  Para tudo o que h√° no reposit√≥rio Redux, esse reposit√≥rio deve ser a √∫nica fonte de dados confi√°veis. <br><br>  Colocar tudo em um estado Redux, se necess√°rio, √© perfeitamente normal.  Talvez isso afete o desempenho se voc√™ usar fragmentos de estado que precisam ser atualizados com freq√º√™ncia ou se estiver falando sobre o armazenamento do estado de um componente no qual os fragmentos de estado dependentes s√£o muito usados.  Voc√™ n√£o deve se preocupar com desempenho at√© que haja problemas com o desempenho.  Mas se voc√™ estiver preocupado com a quest√£o do desempenho, tente as duas maneiras de trabalhar com o estado e avalie seu impacto no desempenho.  Crie um perfil do seu projeto e lembre-se do modelo de desempenho RAIL. <br><br><h3>  <font color="#3AC1EF">‚ñç Preciso usar a fun√ß√£o de conex√£o do react-redux, ou √© melhor usar ganchos?</font> </h3><br>  Depende muito.  A fun√ß√£o de <code>connect</code> cria um componente de ordem superior adequado para uso repetido, e os ganchos s√£o otimizados para integra√ß√£o com um √∫nico componente. <br><br>  Preciso conectar as mesmas propriedades a diferentes componentes?  Nesse caso, use <code>connect</code> .  Caso contr√°rio, eu preferiria pegar ganchos.  Por exemplo, imagine que voc√™ tenha um componente respons√°vel por autorizar permiss√µes para a√ß√µes do usu√°rio: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RequiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./requires-permission-component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { userHasPermission } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../features/user-profile/user-profile-reducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> curry <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/curry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> requiresPermission = curry(  <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NotPermittedComponent, { permission }, PermittedComponent</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({      NotPermittedComponent,      PermittedComponent,      <span class="hljs-attr"><span class="hljs-attr">isPermitted</span></span>: userHasPermission(state, permission),    });    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> connect(mapStateToProps)(RequiresPermission);  }, ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> requiresPermission;</code> </pre> <br>  Agora, se um administrador estiver trabalhando intensamente com o aplicativo, cujas a√ß√µes precisam de permiss√£o especial, voc√™ poder√° criar um componente de ordem superior que combine todas essas permiss√µes com toda a funcionalidade de ponta a ponta necess√°ria: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NextError <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'next/error'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../requires-permission'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withFeatures <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-features'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withAuth <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-auth'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withEnv <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-env'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-loader'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-layout'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose(  withEnv,  withAuth,  withLoader,  withLayout(),  withFeatures,  requiresPermission(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;NextError statusCode={<span class="hljs-number"><span class="hljs-number">404</span></span>} /&gt;, {    <span class="hljs-attr"><span class="hljs-attr">permission</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>,  }), );</code> </pre> <br>  Veja como us√°-lo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> adminPage <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../HOCs/admin-page'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AdminIndex <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../features/admin-index/admin-index-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> adminPage(AdminIndex);</code> </pre> <br>  A API do componente de ordem superior √© conveniente para esta tarefa.  Ele permite que voc√™ o resolva de forma mais sucinta, usando menos c√≥digo do que ganchos.  Mas, para usar a fun√ß√£o de <code>connect</code> , lembre-se de que ela leva <code>mapStateToProps</code> como o primeiro argumento e <code>mapStateToProps</code> como o segundo.  N√£o devemos esquecer que esta fun√ß√£o pode assumir fun√ß√µes ou objetos literais.  Voc√™ precisa saber como os diferentes usos da <code>connect</code> diferem e se essa √© uma fun√ß√£o ao curry, mas seu curry n√£o √© realizado automaticamente. <br><br>  Em outras palavras, posso dizer que acredito que, durante o desenvolvimento do <code>connect</code> muito trabalho foi feito na dire√ß√£o da concis√£o do c√≥digo, mas o c√≥digo resultante n√£o √© particularmente leg√≠vel nem conveniente.  Se n√£o precisar trabalhar com v√°rios componentes, preferirei com prazer a API de <code>connect</code> inconveniente a uma API de gancho muito mais conveniente, mesmo considerando que isso levar√° a um aumento na quantidade de c√≥digo. <br><br><h3>  <font color="#3AC1EF">‚ñç Se um singleton √© considerado um antipadr√£o e o Redux √© um singleton, isso significa que o Redux √© um antipadr√£o?</font> </h3><br>  N√£o, n√£o √©.  O uso de um singleton no c√≥digo sugere a qualidade duvidosa desse c√≥digo, indicando a presen√ßa de um estado mut√°vel compartilhado nele.  Este √© um verdadeiro anti-padr√£o.  O Redux, por outro lado, evita a muta√ß√£o do estado compartilhado atrav√©s do encapsulamento (voc√™ n√£o deve alterar o estado do aplicativo diretamente, fora dos redutores; o Redux resolve o problema de alterar o estado) e enviando mensagens (apenas o objeto de evento enviado pode causar uma altera√ß√£o de estado). <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  O Redux substitui os ganchos React?  Ganchos s√£o √≥timos, mas n√£o substituem o Redux. <br><br>  Esperamos que este material o ajude a escolher um modelo de gerenciamento de estado para seus projetos React. <br><br>  <b>Caros leitores!</b>  Voc√™ j√° encontrou situa√ß√µes em que os ganchos do React podem substituir o Redux? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464293/">https://habr.com/ru/post/pt464293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464283/index.html">Aplicativos para e-books no sistema operacional Android. Parte 3. Dicion√°rios e notas</a></li>
<li><a href="../pt464285/index.html">Atualizar automaticamente a foto do perfil do Vkontakte</a></li>
<li><a href="../pt464287/index.html">A passagem da m√°quina de laborat√≥rio para o penteado "Hackthebox - Friendzone"</a></li>
<li><a href="../pt464289/index.html">Como escrever pacotes Go</a></li>
<li><a href="../pt464291/index.html">As 10 linguagens de programa√ß√£o mais influentes dos √∫ltimos 50 anos e seus criadores</a></li>
<li><a href="../pt464295/index.html">Exemplos de uso de alguns novos recursos JavaScript</a></li>
<li><a href="../pt464299/index.html">0, 0, 1, 0, 2, 0, 2, 2, 1, 6, 0, 5, 0, 2, 6, 5, 4, 0, 5, 3, 0, 3, 2, 9, 0, 4, 9, 3, 6, 14, 0, 6, 3, 5, 15, 0, 5, 3, 5 ...</a></li>
<li><a href="../pt464303/index.html">Dados de s√©ries temporais em um DBMS relacional. Extens√µes TimescaleDB e PipelineDB for PostgreSQL</a></li>
<li><a href="../pt464305/index.html">Pequeno sim. Desembalagem do microvirtual Firecracker</a></li>
<li><a href="../pt464307/index.html">Teste de integra√ß√£o de microsservi√ßos no Scala</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>