<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüíª ‚öõÔ∏è üéç Wie kann ich unterbrochene virtuelle Yandex.Cloud-Maschinen verwenden und bei der L√∂sung gro√üer Probleme sparen? üïë üå∏ üöê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute m√∂chten wir √ºber eine so n√ºtzliche Funktion von Yandex.Cloud wie unterbrochene virtuelle Maschinen sprechen. Dies ist eine spezielle Option, die...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie kann ich unterbrochene virtuelle Yandex.Cloud-Maschinen verwenden und bei der L√∂sung gro√üer Probleme sparen?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/457538/">  Heute m√∂chten wir √ºber eine so n√ºtzliche Funktion von Yandex.Cloud wie unterbrochene virtuelle Maschinen sprechen.  Dies ist eine spezielle Option, die Sie beim Erstellen einer virtuellen Maschine ausw√§hlen k√∂nnen, um Computerressourcen zu einem reduzierten Preis zu verwenden.  Was ist das Besondere an unterbrechbaren virtuellen Maschinen, warum sind sie billiger als normale und in welchen F√§llen ist es ratsam, sie zu verwenden? <br><br><img src="https://habrastorage.org/webt/ox/8d/3e/ox8d3etklg4mebfli2f7r0ofdf0.png"><br><a name="habracut"></a><br>  Die Kapazit√§ten von Yandex.Cloud und genauer gesagt des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex Compute Cloud-</a> Infrastrukturdienstes sind deutlich h√∂her als die von Benutzern verwendeten.  Standardm√§√üig wird davon ausgegangen, dass Benutzer beliebig skalieren k√∂nnen.  Zumindest aus diesen Gr√ºnden √ºbersteigen die verf√ºgbaren Ressourcen der Cloud-Plattform ohne Ber√ºcksichtigung anderer Aspekte die aktuelle Nachfrage erheblich.  Bei diesen freien Kapazit√§ten entstehen unterbrochene virtuelle Maschinen. <br><br><h2>  Hauptbeschr√§nkungen </h2><br>  Kurz gesagt kann die Art der unterbrochenen virtuellen Maschinen wie folgt beschrieben werden: Der Dienst bietet an, seine kostenlosen Computerressourcen zu einem niedrigeren Preis zu nutzen, vorausgesetzt, diese Ressourcen k√∂nnen jederzeit abgerufen werden. <br><br>  Im Allgemeinen funktionieren unterbrochene virtuelle Maschinen wie normale virtuelle Maschinen, weisen jedoch eine Reihe von Einschr√§nkungen auf: <br><br><ul><li>  Sie sind nicht durch ein Service Level Agreement (SLA) abgedeckt. </li><li>  Die F√§higkeit zum Erstellen und Ausf√ºhren ist nicht garantiert. </li><li>  Sie k√∂nnen jederzeit zum Anhalten gezwungen werden.  Die Wahrscheinlichkeit eines Stopps ist gering, aber ungleich Null. Sie kann sich im Laufe der Zeit √§ndern und in verschiedenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex.Cloud-Verf√ºgbarkeitszonen</a> variieren. </li><li>  Eine unterbrochene virtuelle Maschine kann nicht normalisiert werden, sondern eine regul√§re unterbrochene.  Das entsprechende Flag wird einmal gesetzt und √§ndert sich nicht. </li><li>  Die Maschine wird sicher in einem Zeitraum von nicht mehr als 24 Stunden angehalten. </li></ul><br>  In der Praxis funktionieren unterbrochene virtuelle Maschinen in den allermeisten F√§llen alle 24 Stunden, die in den Servicebedingungen vorgesehen sind.  Ein erzwungener Stopp tritt in der Regel nur auf, wenn in kurzer Zeit eine gro√üe Anzahl gew√∂hnlicher virtueller Maschinen in einer bestimmten Verf√ºgbarkeitszone erstellt wird: Ein neuer Benutzer mit schwerwiegenden Anforderungen wird angezeigt oder aktuelle Benutzer werden massiv skaliert. <br><br>  Gleichzeitig kann die gestoppte virtuelle Maschine erneut gestartet werden: Alle Daten auf den Festplatten werden sowohl beim automatischen als auch beim manuellen Herunterfahren gespeichert. <br><br><h2>  Anwendungsf√§lle </h2><br>  Einschr√§nkungen f√ºr unterbrochene virtuelle Maschinen werfen eine logische Frage auf: Wie werden sie angewendet, wenn Ressourcen jederzeit widerrufen werden k√∂nnen?  Zur Erkl√§rung hier einige m√∂gliche Anwendungsf√§lle. <br><br><h3>  Stapelverarbeitung </h3><br>  Die Stapelverarbeitung umfasst die parallele Ausf√ºhrung einer gro√üen Anzahl ressourcenintensiver Aufgaben.  Dies kann die Konvertierung von Dateiformaten, Bildverarbeitung und -erkennung sowie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ETL-Operationen sein</a> .  Unter dem Strich gibt es in der Stapelverarbeitung eine Jobwarteschlange und eine ganze Reihe von Arbeitsprozessen (Executoren), die Jobs aus der Warteschlange empfangen.  Wenn ein einzelner Executor, der auf einem unterbrochenen Computer ausgef√ºhrt wird, stoppt, wird die Aufgabe einfach an den n√§chsten Executor √ºbertragen.  Mit anderen Worten, das Stoppen einer oder sogar mehrerer virtueller Maschinen hat keine wesentlichen negativen Auswirkungen auf den Prozess und das Ergebnis der Verarbeitung. <br><br><img src="https://habrastorage.org/webt/o9/tt/ny/o9ttnycyli2d6s7sg-c9i47rusk.png"><br><br>  Bei der Stapelverarbeitung von Daten geht es um die Verwendung von Dutzenden von virtuellen Maschinen.  Die Verwendung von intermittierenden Maschinen bietet sehr sp√ºrbare Einsparungen.  Einer der Hauptverbraucher produktiver diskontinuierlicher virtueller Maschinen mit 32 Kernen ist Seismotech, ein langj√§hriger Yandex.Cloud-Client.  Seismotek verarbeitet seismische Daten, die f√ºr die Erkundung von Gas- und √ñlfeldern erforderlich sind.  Bei der seismischen Erkundung wird mit gro√üen Informationsmengen gearbeitet.  Die Daten werden stapelweise verarbeitet.  Das Unternehmen verwendet gleichzeitig mehr als 60 unterbrochene Maschinen: insgesamt bis zu 2000 vCPU und 4000 GB RAM. <br><br><h3>  Projekte auf Hadoop </h3><br>  Mit Hadoop werden verteilte Programme entwickelt und ausgef√ºhrt, die auf Clustern von Hunderten und Tausenden von kosteng√ºnstigen Knoten ausgef√ºhrt werden.  Die von Hadoop bereitgestellten Mechanismen f√ºr die Dateireplikation und den automatischen Neustart von Aufgaben auf ausgefallenen Knoten gew√§hrleisten die Stabilit√§t eines verteilten Systems gegen√ºber Ausf√§llen einzelner Computer.  Aus diesem Grund kann bei Verwendung von Hadoop zumindest ein Teil der Knoten problemlos f√ºr unterbrochene virtuelle Maschinen bereitgestellt werden.  Wenn sie vorzeitig beendet werden, werden Aufgaben an andere Knoten gesendet. <br><br><h3>  Web Services-Failover </h3><br>  Die kontinuierliche Verf√ºgbarkeit des Webdienstes kann mithilfe eines Clusters sichergestellt werden.  Ein Cluster besteht aus zwei oder mehr Servern.  Eine seiner Aufgaben bei der Anwendung auf Webdienste besteht darin, einen stabilen Betrieb zum Zeitpunkt von Spitzenlasten sicherzustellen.  Typische Beispiele: Online-Shopping-Sites oder Sport-Sites, bei denen das Verkehrswachstum an bestimmte Daten gebunden ist.  F√ºr Gesch√§fte k√∂nnen dies traditionelle Feiertage oder Rabatte sein, und f√ºr sportbezogene Websites k√∂nnen dies Veranstaltungstage sein, an denen Live-√úbertragungen, Rezensionen und Fotoberichte ver√∂ffentlicht werden.  In solchen Momenten kann das Verkehrsaufkommen erheblich zunehmen. <br><br>  Der Cluster muss den Zustrom von Besuchern bew√§ltigen, indem er den Verkehr auf verschiedene Knoten verteilt.  F√ºr einen Zeitraum mit starkem, aber kurzlebigem Lastwachstum kann Fehlertoleranz durch Hinzuf√ºgen von Servern auf nicht mehr verf√ºgbaren virtuellen Maschinen bereitgestellt werden.  Diese Option ist kosteng√ºnstig und macht ihre Arbeit gut.  Es ist wichtig, eine Bedingung zu beachten: Ein solcher Cluster muss hybride sein, dh normale virtuelle Maschinen enthalten.  In diesem Fall f√ºhrt selbst das unwahrscheinliche Anhalten unterbrochener Maschinen nicht zu einem Servicefehler. <br><br><h3>  Projekte bei Kubernetes </h3><br>  Kubernetes automatisiert die Bereitstellung, Skalierung und Verwaltung von Containeranwendungen auf einer gro√üen Anzahl von Knoten.  Eine der Hauptentit√§ten, die als Baustein von Kubernetes bezeichnet werden kann, befindet sich unter (pod).  Pod erm√∂glicht den Start eines oder mehrerer Container auf einem Knoten.  Ein Knoten f√ºr jeden Herd wird vom Kubernetes-Scheduler ausgew√§hlt und zugewiesen.  Wenn ein separater Knoten mit einem laufenden Herd ausf√§llt, √ºbertr√§gt der Scheduler ihn automatisch an einen Knoten, der im normalen Modus arbeitet.  Dieses Schema zur Aufrechterhaltung des Zustands legt nahe, dass ein Teil der Knoten in diskontinuierlichen virtuellen Maschinen gehostet werden kann. <br><br><h3>  Kontinuierliche Integrationstests </h3><br>  Die Praxis der kontinuierlichen Integration basiert auf der h√§ufigen Montage und Erprobung des Projekts.  In diesem Fall werden haupts√§chlich automatisierte Tests verwendet.  Schematisch sieht es so aus: Eine Testumgebung wird auf einer virtuellen Maschine erstellt, der letzte Build der Anwendung wird auf diese hochgeladen, automatisierte Tests werden durchgef√ºhrt, die Testergebnisse werden hochgeladen, die virtuelle Maschine wird gel√∂scht.  Das Testen dauert in der Regel mehrere zehn Minuten, seltener mehrere Stunden. <br><br>  Traditionell sind die Schwachstellen der kontinuierlichen Integration erhebliche Kosten f√ºr die Unterst√ºtzung des Integrationsprozesses selbst und der hohe Bedarf an Computerressourcen.  Unter diesem Gesichtspunkt und unter Ber√ºcksichtigung des Zeitrahmens automatisierter Tests scheinen eingestellte virtuelle Maschinen f√ºr eine kontinuierliche Integration mehr als geeignet zu sein.  Sie sind viel billiger und die Wahrscheinlichkeit, dass ein Auto zum Zeitpunkt des Tests sofort anh√§lt, ist verschwindend gering.  Selbst wenn das Auto noch angehalten wird, ist der Schaden aus Sicht des Unternehmens minimal. <br><br><h3>  Verwendung in Verbindung mit anderen Yandex.Cloud-Diensten </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mit dem Yandex Instance Groups-Dienst</a> k√∂nnen Sie den Status einer ganzen Gruppe unterbrochener virtueller Maschinen automatisch √ºberwachen.  Er kann unabh√§ngig voneinander virtuelle Maschinen mit den angegebenen Merkmalen erstellen, die erforderliche Anzahl von Maschinen in der Gruppe verwalten und unterbrochene Instanzen neu starten, wenn sie anhalten.  Es spielt keine Rolle, ob seit dem Start ein erzwungener Stopp stattgefunden hat oder 24 Stunden vergangen sind.  Nur eines ist wichtig: Ein Neustart wird durchgef√ºhrt, wenn Ressourcen verf√ºgbar sind.  Yandex Instance Groups vereinfacht die Arbeit mit unterbrochenen virtuellen Maschinen, kann jedoch nicht garantieren, dass in einer bestimmten Verf√ºgbarkeitszone notwendigerweise freie Kapazit√§ten vorhanden sind. <br><br><h2>  Wirtschaftsleistung </h2><br>  Wie bereits erw√§hnt, k√∂nnen unterbrechbare virtuelle Maschinen die Kosten f√ºr die Verwendung von Computerressourcen senken.  In Yandex haben wir vor einigen Jahren begonnen, an einer √§hnlichen Funktion zu arbeiten.  Um Computeraufgaben in garantierte ausf√ºhrbare und unterbrechbare Aufgaben zu unterteilen, waren erhebliche Investitionen erforderlich.  Aber es war nicht umsonst: Am Ende haben wir die n√ºtzliche Auslastung der Serverinfrastruktur von 30-40% auf 70-80% erh√∂ht. <br><br><img src="https://habrastorage.org/webt/t5/co/jm/t5cojmli_xdhso9kjwoqbwciksk.png"><br><br>  Jetzt stehen allen Yandex.Cloud-Benutzern auf Knopfdruck √§hnliche Funktionen zur Verf√ºgung.  Ein einfaches Beispiel: Wenn Sie die H√§lfte der verwendeten virtuellen Maschinen mit hundertprozentiger Kernellast in das Interrupt-Format √ºbertragen, k√∂nnen Sie bis zu 35-40% des Budgets einsparen. <br><br>  Zu reduzierten Kosten stehen CPU- und RAM-Ressourcen zur Verf√ºgung.  Speicherplatz und IP-Adressen werden zu regul√§ren Preisen bezahlt.  Dies zeigt eine einfache Berechnung f√ºr die Cascade Lake-Plattform. <br><br><img src="https://habrastorage.org/webt/2z/u2/vh/2zu2vhioohfo6zfv77cl1a3lweq.png"><br><br>  Wenn Sie m√∂chten, k√∂nnen Sie die Kosten f√ºr die Verwendung virtueller Maschinen in verschiedenen Modi mithilfe eines <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Taschenrechners vergleichen</a> . <br><br>  Wir hoffen, dass wir ein wenig Klarheit schaffen und einige n√ºtzliche Beispiele nennen konnten. In diesen F√§llen k√∂nnen Sie unterbrechbare virtuelle Maschinen verwenden, um die Kosten f√ºr Computerressourcen zu senken, ohne die Qualit√§t bei der Ausf√ºhrung von Aufgaben zu verlieren. <br><br><h3>  Weitere Ver√∂ffentlichungen zu Cloud on Habr√© </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Distributed Message Queuing Service-Architektur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Network Load Balancer-Architektur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MPLS ist √ºberall.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie ist die Yandex.Cloud-Netzwerkinfrastruktur?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">So skalieren Sie Datenbanken ohne Ausfallzeiten.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiel mit drei Hosts</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex √∂ffnet die Cloud.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Architektur der neuen Plattform</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457538/">https://habr.com/ru/post/de457538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457522/index.html">Erh√∂hen Sie Ihren Mailinglistendienst oder verwenden Sie vorgefertigte L√∂sungen? Was ich √ºber 5 Jahre bei UniSender gelernt habe</a></li>
<li><a href="../de457524/index.html">Tiefenkameras - stille Revolution (wenn Roboter sehen) Teil 1</a></li>
<li><a href="../de457526/index.html">Technische Medien als Basar</a></li>
<li><a href="../de457532/index.html">Es ist h√∂chste Zeit, Teil eines Open Source-Projekts zu werden</a></li>
<li><a href="../de457534/index.html">Zertifizierte Versionen - der Rechen, den wir w√§hlen</a></li>
<li><a href="../de457540/index.html">Intel Optane DC Persistent Memory, ein Jahr sp√§ter</a></li>
<li><a href="../de457542/index.html">Das Hacken und Sch√ºtzen von Verschl√ºsselungslaufwerken LUKS</a></li>
<li><a href="../de457546/index.html">Demo-Tag: Warum ist das alles und wie geht das? UPD + Broadcast</a></li>
<li><a href="../de457548/index.html">Mehrphasige PWM-Signalerzeugung auf TMS320F28027</a></li>
<li><a href="../de457550/index.html">Wovor die digitale Industrie gesch√ºtzt werden muss</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>