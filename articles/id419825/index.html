<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—¡ï¸ âœğŸ¼ ğŸ§  Menguji kinerja beberapa jenis drive di lingkungan virtual ğŸ™ğŸ¾ ğŸ†” ğŸ•µï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Teknologi virtualisasi sangat diminati saat ini tidak hanya di segmen "bisnis besar", tetapi juga di SMB dan di antara pengguna rumahan. Secara khusus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menguji kinerja beberapa jenis drive di lingkungan virtual</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419825/">  Teknologi virtualisasi sangat diminati saat ini tidak hanya di segmen "bisnis besar", tetapi juga di SMB dan di antara pengguna rumahan.  Secara khusus, untuk perusahaan kecil, server virtualisasi dapat digunakan untuk mengimplementasikan sejumlah layanan layanan yang tidak terlalu intensif sumber daya.  Ini biasanya mengacu pada server yang berdiri sendiri berdasarkan pada platform prosesor tunggal atau ganda, dengan jumlah RAM yang relatif kecil dalam 32-64 GB dan tanpa sistem penyimpanan kinerja tinggi khusus.  Tetapi di luar seluruh rangkaian keuntungan, Anda perlu menyadari bahwa dalam hal kinerja, sistem virtual berbeda dari yang nyata.  Pada artikel ini, kami akan membandingkan kecepatan berbagai jenis drive lokal (HDD, SSD, dan NVMe) untuk beberapa konfigurasi mesin virtual untuk memperkirakan kerugian dari virtualisasi mereka.  Tidak ada yang membantah bahwa dalam implementasi sistem virtualisasi yang "benar" lebih baik menggunakan penyimpanan eksternal, tetapi dalam versi anggaran Anda dapat bertahan dengan disk lokal. <br><a name="habracut"></a><br>  Pengujian dilakukan pada server dengan konfigurasi berikut: Motherboard Asus Z10PE-D16, dua prosesor Intel Xeon E5-2609 v3, RAM 64 GB.  Proxmox VE versi 5.2, sistem open source berbasis pada Debian, dipilih sebagai lingkungan virtualisasi.  Untuk pemasangannya, SSD SATA terpisah digunakan, dan drive yang diuji terhubung secara terpisah ke antarmuka dan porta lain. <br><br>  Pertama, uji drive dari platform host.  Opsi kedua adalah meneruskan ke mesin virtual (KVM dan Debian 9 digunakan untuk itu, 2 core dan 8 GB RAM dialokasikan) sebagai disk fisik.  Konfigurasi ketiga adalah disk virtual pada LVM.  Yang keempat adalah file RAW pada volume dengan sistem file ext4.  Dalam dua opsi terakhir, ukuran disk 64 GB dipilih.  Jadi hasil tambahan dari artikel ini dapat berupa perbandingan LVM dan RAW untuk menyimpan gambar disk virtual. <br><br>  Utilitas fio dengan pola baca dan tulis berurutan dengan blok 256 KB dan operasi acak dengan blok 4 KB akan digunakan untuk mengukur kecepatan.  Pengujian dilakukan dengan parameter iodepth dari 1 hingga 256 untuk meniru beban yang berbeda.  Untuk operasi berurutan, kami memperkirakan kecepatan dalam MB / s, untuk operasi acak - IOPS.  Selain itu, kami melihat penundaan rata-rata (clat dari laporan pengujian). <br><br>  Mari kita mulai dengan hard drive tradisional, dalam peran HGST HUH728080ALE640 lansia - drive dengan antarmuka SATA dan kapasitas 2 TB.  Penggunaan hard drive tunggal, terutama jika tidak ada persyaratan volume, dalam skenario yang dijelaskan tentang virtualisasi murah untuk beban kecil dapat dianggap sebagai opsi khas jika Anda benar-benar menyimpan atau "memahat dari apa yang dulu" dan tidak memasukkan opsi ini dengan pertimbangan akan salah. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/p7/t9/wcp7t9eobeyhe_rvuer6t6jiixq.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zp/y4/og/zpy4og16idayiiof3txhbcr-6iy.jpeg" alt="gambar"></div><br>  Saat membaca, semua opsi, kecuali yang terakhir, menunjukkan hasil yang kira-kira sama pada level 190 MB / s (hanya dengan beban berat dengan iodepth = 256 untuk passthrough dan LVM hasilnya dikurangi menjadi 150 MB / s).  Sedangkan mentah, berkat caching pada tuan rumah, "terbang ke angkasa" dan yang lainnya tidak lagi terlihat dengan latar belakangnya.  Di satu sisi, kita dapat mengatakan bahwa tes yang digunakan dan pengaturan sistem tidak memungkinkan kita untuk mengevaluasi kecepatan konfigurasi ini dengan benar dan menunjukkan kinerja bukan RAM, tetapi RAM.  Di sisi lain, caching adalah salah satu teknologi paling efektif dan umum untuk meningkatkan produktivitas, dan jika berhasil, akan aneh jika menolaknya.  Tetapi jangan lupa tentang kekuatan yang dapat diandalkan dalam konfigurasi seperti itu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7d/_p/gj/7d_pgjvsszjnvacwb6bfvys_ffy.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/de/dh/fd/dedhfdxgsey_eq9ahayxxapthok.jpeg" alt="gambar"></div><br>  Tidak ada efek seperti itu pada rekaman lagi, sehingga dalam operasi berurutan semua konfigurasi kira-kira sama - kecepatan maksimumnya sekitar 190 MB / s.  Meskipun mentah masih berperilaku berbeda dari yang lain - dengan beban kecil itu lebih lambat, tetapi maksimum tidak melambat seperti yang lain.  Tidak ada perbedaan dalam keterlambatan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3_/jz/qg/3_jzqghdrkck7dbuematfrm-adk.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rr/lb/vb/rrlbvbj4a9kxjneixugzay40rmu.jpeg" alt="gambar"></div><br>  Penggunaan cache host juga terlihat dalam operasi baca acak - di sini mentah secara konsisten tercepat dan menunjukkan hingga 950 IOPS.  Sekitar dua kali lebih lambat dari LVM - hingga 450 IOPS.  Nah, hard drive itu sendiri, termasuk "penerusan" ke sistem tamu, menunjukkan sekitar 200 IOPS.  Distribusi peserta pada jadwal penundaan konsisten dengan kecepatan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mw/f8/gz/mwf8gzltrtsihnsukyilqtyi2gs.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ff/fn/yh/fffnyhvvdvquo7sp9rjbtr_o52a.jpeg" alt="gambar"></div><br>  Pada operasi penulisan acak, konfigurasi lvm, yang menyediakan hingga 400 IOPS, terbukti menjadi yang terbaik.  Ini diikuti oleh mentah (~ 330 IOPS), dan dua peserta terakhir dengan 290 IOPS menutup daftar.  Tidak ada perbedaan nyata dalam keterlambatan. <br><br>  Secara umum, jika Anda tidak memerlukan fungsi yang disediakan oleh lvm, dan kriteria utama bukanlah kecepatan tulis acak, lebih baik menggunakan raw dalam hal kecepatan saat menempatkan disk virtual di penyimpanan lokal.  Aplikasi teknologi untuk meneruskan disk fisik ke mesin virtual tidak memberikan keuntungan kinerja dalam kasus ini.  Tetapi bisa menarik jika Anda ingin menghubungkan drive dengan data yang ada ke mesin virtual. <br><br>  Peserta tes kedua adalah Samsung 850 EVO SSD.  Mengingat usianya dan bekerja dalam sistem tanpa TRIM, dalam beberapa tes (dalam rekaman berurutan tertentu), ia sudah kehilangan ke hard drive.  Namun demikian, karena perolehan kinerja yang signifikan pada operasi acak di depan hard drive tradisional, ini sangat menarik untuk mesin virtual juga. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k_/1y/on/k_1yon-hc7y0ybcvvldspq_dfas.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6q/vw/bn/6qvwbntvdeiacogszcaz0cbibc8.jpeg" alt="gambar"></div><br>  Hasil pembacaan berurutan dalam mode mentah dapat dikomentari mirip dengan varian dengan hard disk.  Tapi yang lebih menarik di sini adalah bahwa dua konfigurasi pertama menunjukkan stabil 370 MB / s di bawah beban berat, sedangkan lvm hanya mampu 190 MB / s.  Penundaan untuk mode ini juga lebih tinggi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/2r/js/oc2rjsdvfxgznupq-8xonsahxtq.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/zq/l5/wlzql5ra2fqyjk81-7-uzbrkqji.jpeg" alt="gambar"></div><br>  Pada operasi tulis, seperti yang telah disebutkan, SSD ini dalam keadaan saat ini tidak terlihat sangat menarik dan menunjukkan kecepatan 100 MB / s.  Adapun perbandingan konfigurasi, dalam tes ini mentah hilang pada beban rendah baik dalam kecepatan maupun penundaan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2p/my/yr/2pmyyretrpqncfaly3nfkwz6jry.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l2/mh/ho/l2mhhowl7-v5u1b0dqveolb5ccu.jpeg" alt="gambar"></div><br>  Operasi acak adalah SSD "kartu truf" utama.  Di sini kita melihat bahwa setiap opsi "virtual" jelas kehilangan ke drive "bersih" - mereka hanya menyediakan 30.000 IOPS, sementara SSD itu sendiri mampu bekerja tiga kali lebih cepat.  Ternyata, di sini batasannya adalah platform perangkat keras dan perangkat lunak.  Namun, keterlambatan dalam tes ini tidak melebihi 7 ms, jadi tidak mungkin perbedaan IOPS ini dapat diketahui oleh aplikasi umum. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/el/hk/wcelhk7kfzgtfs4k5xds4effhsg.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vx/gi/vz/vxgivzvxkosn3otkxcip65rfmbk.jpeg" alt="gambar"></div><br>  Dan pada catatan acak adalah keseimbangan kekuatan yang berbeda.  Disk "asli" sudah hilang, meskipun sedikit.  Itu mampu menampilkan hingga 4.200 IOPS.  lvm dan passthrough adalah satu atau dua ratus lebih, dan mentah sudah mencapai 5.500 IOPS.  Pada grafik penundaan dari video yang jelas menarik, fraktur iodepth = 32. <br><br>  Pengujian menunjukkan bahwa SSD berperilaku berbeda dari HDD dalam skenario ini.  Pertama, membaca berurutan dengan LVM tertinggal jauh di belakang opsi lain.  Kedua, disk virtual pada SSD terasa hilang dalam IOPS baca acak. <br><br>  Peserta ketiga agak keluar dari "murah", tetapi produk ini sendiri sangat menarik untuk "akselerator" universal dari operasi disk dan mampu bersaing dalam kecepatan tidak hanya dengan drive tunggal, tetapi juga dengan array RAID.  Ini tentang Intel Optane.  Dalam hal ini, kami menggunakan model 900P untuk bus PCIe 3.0 x4, dengan kapasitas 280 GB. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/aq/vf/lhaqvf9fxg0imqhxzvcrpx3o0i8.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eg/5h/32/eg5h32ohktgtm1iwuqci7fropdg.jpeg" alt="gambar"></div><br>  Intel Optane sudah mampu bersaing dengan RAM dalam tes ini.  Perbedaannya bukan lagi urutan besarnya, seperti peserta lainnya, tetapi hanya dua hingga tiga kali.  Selain itu, dengan meningkatnya beban, nilai-nilai tersebut secara praktis dibandingkan.  Keterlambatan seperti pada pengujian di atas lebih rendah untuk konfigurasi mentah. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/u3/h6/1w/u3h61w2cb4xmads1t3hb4z24hwq.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7n/ol/se/7nolse87xec2wvrs5exfbfl4voa.jpeg" alt="gambar"></div><br>  Dalam operasi penulisan berurutan, drive "bersih" bahkan hilang untuk peserta lain - dengan peningkatan beban, drive tersebut mencapai stabilitas 2.150 MB / s, dan mengurangi kecepatan menjadi sekitar 1.700 MB / s.  Keterlambatan dalam hal ini tidak bisa dibandingkan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yp/mn/ge/ypmngejmm9-_-jk0m2lvxgachji.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vb/dd/pb/vbddpbv9b1bhhyus7ovocl5zctw.jpeg" alt="gambar"></div><br>  Operasi baca acak model SSD ini ketika mengaksesnya dari host dapat memberikan hampir 200.000 IOPS (kecepatannya akan berada di level 760 MB / s).  Tetapi semua skema koneksi lain, seperti yang kita lihat di atas untuk SSD dengan antarmuka SATA, terbatas pada 35.000 IOPS, yang tidak bisa tidak mengecewakan.  Dengan demikian, mereka memiliki penundaan yang lebih tinggi, sekitar lima kali lipat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/my/jh/ja/myjhjar5pwk71zrtvpqd5j2ntrg.jpeg" alt="gambar"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nn/lj/wp/nnljwpk97cdlb6jcumd9dcrkztc.jpeg" alt="gambar"></div><br>  Pada perekaman acak, model drive unik ini menunjukkan hasil yang hampir sama dengan pembacaan acak - sekitar 190.000 IOPS untuk koneksi langsung dan 35.000 IOPS untuk opsi lain.  Penundaan juga bertepatan dengan grafik pada operasi baca.  Di sisi lain, lebih dari 700 MB / s dalam perekaman acak dalam blok kecil - hasil seperti itu masih perlu dicari. <br><br>  Penggunaan drive Intel Optane untuk masalah yang dipelajari menunjukkan bahwa tidak akan ada penurunan kecepatan yang signifikan pada operasi berurutan dalam sistem operasi tamu.  Tetapi jika Anda membutuhkan IOPS tinggi untuk membaca atau menulis secara acak, maka platform ini akan membatasi kinerja di level 35.000 IOPS, meskipun drive itu sendiri lima kali lebih cepat. <br><br>  Pengujian telah menunjukkan bahwa ketika membangun sistem penyimpanan untuk server virtual, Anda harus memperhatikan kerugian tertentu dari virtualisasi jika kecepatan penting untuk mesin virtual Anda.  Pada sebagian besar konfigurasi yang diuji, disk virtual menunjukkan indikator kinerja yang sangat berbeda dari perangkat fisik.  Namun, untuk hard drive tradisional, perbedaannya biasanya relatif kecil, karena mereka sendiri tidak begitu cepat.  Untuk SSD SATA, korban signifikan dalam IOPS dapat dicatat untuk akses acak, tetapi meskipun demikian, mereka tetap secara dramatis lebih cepat dalam tugas-tugas ini daripada Winchesters.  Drive Intel Optane tentu saja kehilangan banyak hal di lingkungan virtual pada operasi acak, tetapi bahkan dalam kasus ini ia tetap sangat cepat dalam perekaman.  Dan dalam operasi selanjutnya tidak ada komentar tentang dia.  Keunggulan penting lain dari perangkat ini adalah kinerjanya yang stabil - tidak memerlukan operasi pembersihan khusus, sehingga terlepas dari status dan riwayat masa lalu, serta OS dan pengaturannya, kecepatannya akan konstan setiap saat.  Tetapi, seperti biasa, tidak ada yang terjadi secara gratis.  Intel Optane 900P tidak hanya unik cepat, tetapi juga mahal. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419825/">https://habr.com/ru/post/id419825/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419813/index.html">Webinar Skillbox: pilihan hari Jumat</a></li>
<li><a href="../id419815/index.html">Rahasia toleransi kesalahan kantor depan kami</a></li>
<li><a href="../id419817/index.html">Meluncurkan Cluster RabbitMQ di Kubernetes</a></li>
<li><a href="../id419819/index.html">Biomarker penuaan. Panel Frailty. Bagian 2</a></li>
<li><a href="../id419823/index.html">Duet yang tidak biasa - frasa sandi dan gambar mnemonik</a></li>
<li><a href="../id419829/index.html">Enkripsi kunci default OpenSSH lebih buruk daripada tidak sama sekali</a></li>
<li><a href="../id419831/index.html">Cara Kerja JS: Elemen Kustom</a></li>
<li><a href="../id419833/index.html">Pekerjaan jarak jauh, cara kerjanya</a></li>
<li><a href="../id419835/index.html">Bagaimana memotivasi penulis, bernegosiasi dengan para ahli dan umumnya menulis artikel yang bagus</a></li>
<li><a href="../id419837/index.html">Saya, RoboLoyer, atau bagaimana mencari anomali dalam dokumen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>