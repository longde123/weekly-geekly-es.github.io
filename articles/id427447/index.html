<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äç‚öïÔ∏è üë©üèæ‚Äçü§ù‚Äçüë©üèª üõ∏ PVS-Studio termasuk dukungan untuk GNU Arm Embedded Toolchain üåí üõ°Ô∏è üçî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sistem tertanam telah lama dan dengan tegas memasuki kehidupan kita. Persyaratan untuk stabilitas dan keandalannya sangat tinggi, dan koreksi kesalaha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio termasuk dukungan untuk GNU Arm Embedded Toolchain</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/427447/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fef/427/f4c/fef427f4c05625dec0a8cfd484ad79d0.png" alt="GNU Arm Embedded Toolchain + PVS-Studio"></div><br>  Sistem tertanam telah lama dan dengan tegas memasuki kehidupan kita.  Persyaratan untuk stabilitas dan keandalannya sangat tinggi, dan koreksi kesalahan mahal.  Karenanya, sangat penting bagi pengembang tertanam untuk secara teratur menggunakan alat khusus untuk memastikan kualitas kode sumber.  Artikel ini akan berbicara tentang dukungan dari GNU Arm Embedded Toolchain di penganalisa PVS-Studio dan cacat kode yang ditemukan dalam proyek OS Mbed. <br><a name="habracut"></a><br><h2>  Pendahuluan </h2><br>  Alat analisa PVS-Studio sudah mendukung beberapa kompiler komersial untuk sistem embedded, misalnya: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">IAR Embedded Workbench</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Alat Pengembangan Tertanam Keil untuk Arm</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Alat Pembuatan Kode TI ARM</a> </li></ul><br>  Sekarang alat pengembang lain telah ditambahkan untuk mendukung - GNU Embedded Toolchain. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GNU Embedded Toolchain</a> adalah kumpulan kompiler dari Arm berdasarkan Koleksi Kompiler GNU.  Rilis resmi pertama berlangsung pada 2012, dan sejak itu proyek ini telah berkembang bersama dengan GCC. <br><br>  Tujuan utama GNU Embedded Toolchain adalah untuk menghasilkan kode yang berjalan pada bare metal, yaitu langsung pada prosesor tanpa interlayer dalam bentuk sistem operasi.  Paket termasuk kompiler untuk C dan C ++, assembler, satu set utilitas GNU Binutils, dan perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Newlib</a> .  Kode sumber untuk semua komponen sepenuhnya terbuka dan dilisensikan di bawah GNU GPL.  Dari situs resmi Anda dapat mengunduh versi untuk Windows, Linux dan macOS. <br><br><h2>  OS tidur </h2><br>  Untuk menguji penganalisa, Anda membutuhkan kode sumber sebanyak mungkin.  Biasanya tidak ada masalah dengan ini, tetapi ketika kita berhadapan dengan pengembangan tertanam yang ditujukan terutama pada perangkat yang termasuk dalam IoT, menemukan cukup banyak proyek besar bisa sulit.  Untungnya, masalah ini diselesaikan oleh sistem operasi khusus, kode sumber yang dalam banyak kasus terbuka.  Selanjutnya kita akan berbicara tentang salah satunya. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb9/5b1/8a8/bb95b18a83f4b1b97c8cb2519c6d7018.png" alt="OS Tidur + PVS-Studio"></div><br><br>  Meskipun tujuan utama dari artikel ini adalah untuk berbicara tentang dukungan untuk GNU Embedded Toolchain, sulit untuk menulis banyak tentang itu.  Selain itu, pembaca artikel kami mungkin menunggu deskripsi beberapa kesalahan menarik.  Yah, jangan menipu harapan mereka dan menjalankan analisa pada proyek OS Mbed.  Ini adalah sistem operasi open source yang dikembangkan dengan bantuan Arm. <br><br>  Situs web resmi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.mbed.com/</a> <br><br>  Kode Sumber: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/ARMmbed/mbed-os</a> <br><br>  Pilihan pada Mbed OS tidak jatuh secara tidak sengaja, berikut adalah cara penulis menggambarkan proyek: <br><br>  Arm Mbed OS adalah sistem operasi tertanam sumber terbuka yang dirancang khusus untuk "hal-hal" di Internet of Things.  Ini mencakup semua fitur yang Anda perlukan untuk mengembangkan produk yang terhubung berdasarkan mikrokontroler Arm Cortex-M, termasuk keamanan, konektivitas, RTOS dan driver untuk sensor dan perangkat I / O. <br><br>  Ini adalah proyek pembangunan ideal menggunakan GNU Embedded Toolchain, terutama mengingat keterlibatan Arm dalam pengembangannya.  Saya akan segera membuat reservasi bahwa saya tidak memiliki tujuan untuk menemukan dan menunjukkan sebanyak mungkin kesalahan dalam proyek tertentu, sehingga hasil ulasan tersebut ditinjau secara singkat. <br><br><h2>  Kesalahan </h2><br>  Selama verifikasi kode OS Mbed, analisa PVS-Studio menghasilkan 693 peringatan, 86 di antaranya dengan prioritas tinggi.  Saya tidak akan membahas semuanya secara rinci, terutama karena banyak dari mereka yang diulang atau tidak menarik.  Misalnya, penganalisis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menghasilkan</a> banyak peringatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V547</a> (Ekspresi selalu benar / salah) terkait dengan fragmen kode yang sama.  Penganalisis dapat dikonfigurasikan untuk secara signifikan mengurangi jumlah tanggapan yang salah dan tidak menarik, tetapi tugas ini tidak disetel saat menulis artikel.  Mereka yang ingin dapat melihat contoh konfigurasi seperti yang dijelaskan dalam artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">spesifikasi analisa PVS-Studio menggunakan contoh EFL Core Libraries, 10-15% dari false positive</a> ". <br><br>  Untuk artikel ini, saya memilih beberapa kesalahan menarik untuk menunjukkan operasi penganalisa. <br><br><h2>  Memori bocor </h2><br>  Mari kita mulai dengan kelas umum kesalahan dalam C dan C ++ - kebocoran memori. <br><br>  Peringatan Analyzer: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V773</a> CWE-401 Fungsi ini keluar tanpa melepaskan pointer 'read_buf'.  Kebocoran memori dimungkinkan.  cfstore_test.c 565 <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> cfstore_test_init_1(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { .... read_buf = (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*) <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(max_len); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(read_buf == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { CFSTORE_ERRLOG(....); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(node-&gt;key_name != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { .... ret = drv-&gt;Create(....); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(ret &lt; ARM_DRIVER_OK){ CFSTORE_ERRLOG(....); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; <span class="hljs-comment"><span class="hljs-comment">// &lt;= } .... free(read_buf); return ret; }</span></span></code> </pre> <br>  Situasi klasik saat bekerja dengan memori dinamis.  <i>Buffer yang</i> dialokasikan <i>malloc</i> hanya digunakan di dalam fungsi dan dibebaskan sebelum keluar.  Masalahnya adalah ini tidak terjadi jika fungsi berhenti bekerja lebih awal.  Catat kode yang sama di blok <i>if</i> .  Kemungkinan besar, penulis menyalin fragmen atas dan lupa menambahkan panggilan <i>gratis</i> . <br><br>  Contoh lain mirip dengan yang sebelumnya. <br><br>  Peringatan Analyzer: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V773</a> CWE-401 Fungsi ini keluar tanpa melepaskan pointer 'antarmuka'.  Kebocoran memori dimungkinkan.  nanostackemacinterface.cpp 204 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">nsapi_error_t</span></span> Nanostack::add_ethernet_interface( EMAC &amp;emac, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> default_if, Nanostack::EthernetInterface **interface_out, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *mac_addr) { .... Nanostack::EthernetInterface *interface; interface = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> (nothrow) Nanostack::EthernetInterface(*single_phy); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!interface) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NSAPI_ERROR_NO_MEMORY; } <span class="hljs-keyword"><span class="hljs-keyword">nsapi_error_t</span></span> err = interface-&gt;initialize(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err; <span class="hljs-comment"><span class="hljs-comment">// &lt;= } *interface_out = interface; return NSAPI_ERROR_OK; }</span></span></code> </pre> <br>  Pointer ke memori yang dialokasikan dikembalikan melalui parameter output, tetapi hanya jika panggilan <i>inisialisasi</i> berhasil, dan jika terjadi kesalahan, kebocoran terjadi karena variabel <i>antarmuka</i> lokal keluar dari ruang lingkup dan pointer hilang begitu saja.  Di sini, seseorang harus <i>menghapus</i> panggilan, atau setidaknya memberikan alamat yang disimpan dalam variabel <i>antarmuka</i> ke luar dalam hal apa pun, sehingga kode panggilan dapat menangani hal ini. <br><br><h2>  Memset </h2><br>  Menggunakan fungsi <i>memset</i> sering menyebabkan kesalahan; contoh masalah yang terkait dengannya dapat ditemukan di artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fungsi paling berbahaya di dunia C / C ++</a> ". <br><br>  Pertimbangkan peringatan penganalisa berikut: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V575</a> CWE-628 Fungsi 'memset' memproses elemen '0'.  Periksa argumen ketiga.  mbed_error.c 282 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">mbed_error_status_t</span></span> mbed_clear_all_errors(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { .... <span class="hljs-comment"><span class="hljs-comment">//Clear the error and context capturing buffer memset(&amp;last_error_ctx, sizeof(mbed_error_ctx), 0); //reset error count to 0 error_count = 0; .... }</span></span></code> </pre> <br>  Programmer dimaksudkan untuk mengatur ulang memori yang ditempati oleh struktur <i>last_error_ctx</i> , tetapi mencampurkan argumen kedua dan ketiga.  Akibatnya, <i>0</i> byte diisi dengan nilai <i>sizeof (mbed_error_ctx)</i> . <br><br>  Persis kesalahan yang sama ada seratus baris di atas: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V575</a> CWE-628 Fungsi 'memset' memproses elemen '0'.  Periksa argumen ketiga.  mbed_error.c 123 <br><br><h2>  Pernyataan 'kembali' tanpa syarat dalam satu lingkaran </h2><br>  Peringatan Analyzer: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V612</a> CWE-670 Suatu 'pengembalian' tanpa syarat dalam satu lingkaran.  thread_network_data_storage.c 2348 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thread_nd_service_anycast_address_mapping_from_network_data</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">thread_network_data_cache_entry_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *networkDataList, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *rlocAddress, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> S_id)</span></span></span><span class="hljs-function"> </span></span>{ ns_list_foreach(<span class="hljs-keyword"><span class="hljs-keyword">thread_network_data_service_cache_entry_t</span></span>, curService, &amp;networkDataList-&gt;service_list) { <span class="hljs-comment"><span class="hljs-comment">// Go through all services if (curService-&gt;S_id != S_id) { continue; } ns_list_foreach(thread_network_data_service_server_entry_t, curServiceServer, &amp;curService-&gt;server_list) { *rlocAddress = curServiceServer-&gt;router_id; return true; // &lt;= } } return false; }</span></span></code> </pre> <br>  Dalam cuplikan ini, <i>ns_list_foreach</i> adalah makro yang diperluas ke pernyataan <i>for</i> .  Loop dalam melakukan tidak lebih dari satu iterasi karena panggilan untuk <i>kembali</i> segera setelah baris di mana parameter output dari fungsi diinisialisasi.  Mungkin kode ini berfungsi seperti yang dimaksudkan, tetapi menggunakan loop dalam terlihat agak aneh dalam konteks ini.  Kemungkinan besar, inisialisasi <i>rlocAddress</i> dan keluar dari fungsi harus dilakukan berdasarkan kondisi, atau Anda dapat menyingkirkan loop dalam. <br><br><h2>  Kesalahan dalam kondisi </h2><br>  Seperti yang saya katakan di atas, alat analisa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menghasilkan sejumlah</a> besar peringatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V547 yang</a> tidak menarik, jadi saya mempelajarinya dengan lancar dan menulis hanya dua kasus untuk artikel tersebut. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V547</a> CWE-570 Ekspresi 'pcb-&gt; state == DENGARKAN' selalu salah.  lwip_tcp.c 689 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> tcp_state { CLOSED = <span class="hljs-number"><span class="hljs-number">0</span></span>, LISTEN = <span class="hljs-number"><span class="hljs-number">1</span></span>, .... }; <span class="hljs-function"><span class="hljs-function">struct tcp_pcb * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tcp_listen_with_backlog_and_err</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct tcp_pcb *pcb, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">u8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> backlog, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">err_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *err)</span></span></span><span class="hljs-function"> </span></span>{ .... LWIP_ERROR(<span class="hljs-string"><span class="hljs-string">"tcp_listen: pcb already connected"</span></span>, pcb-&gt;state == CLOSED, res = ERR_CLSD; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> done); <span class="hljs-comment"><span class="hljs-comment">/* already listening? */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pcb-&gt;state == LISTEN) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= lpcb = (struct tcp_pcb_listen*)pcb; res = ERR_ALREADY; goto done; } .... }</span></span></code> </pre> <br>  Penganalisa menganggap bahwa kondisi <i>pcb-&gt; state == LISTEN</i> selalu salah, mari kita <i>lihat</i> mengapa. <br><br>  Sebelum <i>pernyataan if</i> , makro <i>LWIP_ERROR digunakan</i> , yang, menurut logika operasinya, menyerupai <i>pernyataan</i> <i>tegas</i> .  Iklannya terlihat seperti ini: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LWIP_ERROR(message, expression, handler) do { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!(expression)) { \ LWIP_PLATFORM_ERROR(message); handler;}} while(0)</span></span></code> </pre> <br>  Jika kondisinya salah, makro melaporkan kesalahan dan mengeksekusi kode yang melewati parameter <i>handler</i> , dalam fragmen kode ini ada lompatan tanpa syarat menggunakan <i>goto</i> . <br><br>  Dalam contoh ini, kondisi 'pcb-&gt; state == CLOSED' dicentang, yaitu transisi ke label yang <i>dilakukan</i> terjadi ketika <i>pcb-&gt; state</i> memiliki nilai lain.  <i>Pernyataan if</i> setelah panggilan ke <i>LWIP_ERROR</i> memeriksa <i>status pcb-&gt;</i> untuk <i>LISTEN</i> , tetapi kondisi ini tidak pernah dipenuhi, karena <i>status</i> pada baris ini hanya dapat berisi nilai <i>TUTUP</i> . <br><br>  Pertimbangkan satu peringatan lagi terkait dengan ketentuan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V517</a> CWE-570 Penggunaan pola 'if (A) {...} else jika (A) {...}' terdeteksi.  Ada kemungkinan kehadiran kesalahan logis.  Periksa baris: 62, 65. libdhcpv6_server.c 62 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">libdhcpv6_address_generate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entry-&gt;linkType == DHCPV6_DUID_HARDWARE_EUI64_TYPE) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { memcpy(ptr, entry-&gt;linkId, 8); *ptr ^= 2; } else if (entry-&gt;linkType == DHCPV6_DUID_HARDWARE_EUI64_TYPE)// &lt;= { *ptr++ = entry-&gt;linkId[0] ^ 2; *ptr++ = entry-&gt;linkId[1]; .... } }</span></span></code> </pre> <br>  Di sini, <i>jika</i> dan <i>lainnya jika</i> memeriksa kondisi yang sama, sebagai akibatnya kode di tempat <i>lain jika</i> tubuh tidak pernah dieksekusi.  Kesalahan seperti itu sering terjadi ketika menulis kode menggunakan metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">salin-tempel</a> . <br><br><h2>  Ekspresi tanpa kepemilikan </h2><br>  Mari kita lihat sepotong kode yang menyenangkan. <br><br>  Peringatan Analyzer: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V607</a> Ekspresi tanpa pemilik '&amp; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Discover_response_tlv</a> '.  thread_discovery.c 562 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thread_discovery_response_send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">thread_discovery_class_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *class, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">thread_discovery_response_msg_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *msg_buffers)</span></span></span><span class="hljs-function"> </span></span>{ .... thread_extension_discover_response_tlv_write( &amp;discover_response_tlv, class-&gt;version, linkConfiguration-&gt;securityPolicy); .... }</code> </pre> <br>  Sekarang mari kita lihat <i>deklarasi</i> makro <i>thread_extension_discover_response_tlv_write</i> : <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> thread_extension_discover_response_tlv_write \ ( data, version, extension_bit)\ (data)</span></span></code> </pre> <br>  Makro diperluas ke argumen data, yaitu, panggilannya di dalam fungsi <i>thread_discovery_response_send</i> setelah preprocessing berubah menjadi ekspresi <i>(&amp;</i> <i>temukan_response_tlv</i> <i>)</i> . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/721/781/148/721781148d58d4fcfe8a8882c16bf2c5.png" alt="Tunggu apa"></div><br><br>  Saya tidak punya komentar.  Ini mungkin bukan kesalahan, tetapi kode seperti itu selalu menempatkan saya dalam keadaan yang mirip dengan gambar dalam gambar :). <br><br><h2>  Kesimpulan </h2><br>  Daftar kompiler yang didukung di PVS-Studio telah diperluas.  Jika Anda memiliki proyek yang dimaksudkan untuk perakitan menggunakan GNU Arm Embedded Toolchain, saya sarankan mencoba mengujinya menggunakan penganalisis kami.  Unduh demo di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Juga perhatikan opsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lisensi gratis</a> , yang cocok untuk beberapa proyek kecil. <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Yuri Minaev.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PVS-Studio Sekarang Mendukung GNU Arm Embedded Toolchain</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id427447/">https://habr.com/ru/post/id427447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id427435/index.html">STM32H7 - pengaturan jam tanpa HAL</a></li>
<li><a href="../id427437/index.html">Mengkonfigurasi server tertaut: ms sql server dan teradata</a></li>
<li><a href="../id427439/index.html">Seluruh kebenaran tentang RTOS. Artikel # 16. Sinyal</a></li>
<li><a href="../id427441/index.html">Konvergensi dengan Kubernet</a></li>
<li><a href="../id427443/index.html">Pembedahan kesuksesan</a></li>
<li><a href="../id427449/index.html">Bagaimana memahami Tensorflow dan tidak mati, dan bahkan mengajarkan sesuatu tentang mobil</a></li>
<li><a href="../id427451/index.html">Hubungkan tugas phpStorm ke Bitrix24</a></li>
<li><a href="../id427453/index.html">Bagaimana saya melakukan transmisi suara pada Raspberry Pi</a></li>
<li><a href="../id427457/index.html">Gelombang Ketiga AI dan Sistem untuk Keamanan Negara</a></li>
<li><a href="../id427459/index.html">Lampu LED diall dari toko Castorama</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>