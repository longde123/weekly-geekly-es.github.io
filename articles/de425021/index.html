<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê£ ü§õüèΩ üõ£Ô∏è Wir suchen nach einer schnellen universellen Bibliothek f√ºr die Arbeit mit Grafikdateien, verstehen Google Benchmark ‚õπüèΩ ü§üüèæ üò¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heutzutage, als neuronale Netze die Weiten von Big Data pfl√ºgen und k√ºnstliche Intelligenz √ºberlegt, ob es f√ºr ihn rentabel ist, ein Gehalt f√ºr seine ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir suchen nach einer schnellen universellen Bibliothek f√ºr die Arbeit mit Grafikdateien, verstehen Google Benchmark</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intel/blog/425021/"><img src="https://habrastorage.org/webt/2_/2t/wx/2_2twxajpekzwruuxeno7ssg3l4.jpeg"><br><br>  Heutzutage, als neuronale Netze die Weiten von Big Data pfl√ºgen und k√ºnstliche Intelligenz √ºberlegt, ob es f√ºr ihn rentabel ist, ein Gehalt f√ºr seine Arbeit in Bitcoin zu erhalten, sah die Aufgabe, die schnellste offene plattform√ºbergreifende Bibliothek zum Laden, Speichern und Transcodieren von Grafikdateien zu finden, wie ein echter Anachronismus aus .  Tats√§chlich ist diese Aufgabe relevanter denn je - f√ºr alle Technologien der Bildverarbeitung und des maschinellen Lernens m√ºssen Gigabyte an Bildern heruntergeladen und manchmal die Zwischendaten als Bilder gespeichert werden.  Dies auf dem schnellsten Weg zu tun, ist daher sehr w√ºnschenswert.  In diesem Artikel finden wir die Bibliothek, nach der wir suchen, und vor allem werden wir uns mit einem sehr n√ºtzlichen Produkt befassen, das √§hnliche und viele andere Aufgaben erheblich vereinfacht - Google Benchmark. <br><a name="habracut"></a><br>  Die genaue Aussage des Problems lautet also: In der Anwendung werden JPEG- und TIFF-Dateien mit 24- und 8-Bit-Farbtiefe sowie 32-Bit-BMP in den Speicher geladen.  Die Bildgr√∂√üen reichen von winzig (32 x 32 Pixel) bis gro√ü mit einer Aufl√∂sung von 15 KB.  Dabei werden Dateien ge√§ndert und anschlie√üend in den angegebenen Formaten auf der Festplatte gespeichert.  Dies sollte durch eine plattform√ºbergreifende Open-Source-Bibliothek erfolgen, die auf modernen Intel-Prozessoren maximale Leistung bietet und die Vektoranweisungen AVX2 unterst√ºtzt.  Die Bibliothek unterst√ºtzt auch die komprimierte DirectX DXT1-Texturformatbibliothek.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Windows Imaging-Komponente</a> wird als Ma√üstab f√ºr die Leistung verwendet - das Standardframework f√ºr die Arbeit mit Bildern unter Windows. Das hei√üt, Sie m√ºssen eine Bibliothek finden, die gleichberechtigt oder schneller als WIC funktioniert. <br><br>  Die wichtigste Voraussetzung ist jedoch, dass jetzt eine L√∂sung ben√∂tigt wird, aber gestern besser. <br><br><h2>  <font color="#0071c5">Treffen Sie die Bibliotheken f√ºr die Arbeit mit bmp, tiff, jpeg</font> </h2><br>  Die L√∂sung beginnt mit einem offensichtlichen und unkomplizierten, wenn auch nicht sehr schnellen Schritt - einer gr√ºndlichen Untersuchung von <s>Wikileaks</s> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stackoverflow</a> und anderem Google auf der Suche nach geeigneten Kandidaten f√ºr die Rolle der gew√ºnschten Bibliothek.  Es gab nur wenige davon: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>FreeImage</b></a> .  Eine H√ºlle √ºber den ber√ºhmten Bibliotheken LibJPEG, LibPNG, LibTIFF.  DXT1-Unterst√ºtzung ist √ºber das Plugin vorhanden.  Der Nachteil ist, dass die Qualit√§t des JPEG-Speicherns in der API zu diskret eingestellt ist - 100, 75,50 und 25%.  Um diesen Parameter zu √§ndern, m√ºssen Sie den Code verstehen und bearbeiten.  Das Projekt ist lebhaft und entwickelt sich weiter - die neueste Version 3.18.0 wurde am 31. Juli 2018 ver√∂ffentlicht. Die Assembly unter Windows ist trivial, alle Komponenten werden automatisch erstellt. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Cimg</b></a> Stellt eine C ++ - Header-Wrapper-Datei √ºber einem alten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ImageMagick-</a> <s>Artefaktpaket dar</s> .  Das Paket erfordert eine separate Build-Installation. Es kann auch direkt unter Umgehung von Cimg verwendet werden.  Es gibt viele M√∂glichkeiten, mit Bildern zu arbeiten: Filter, Transformationen, Definition der Morphologie usw.  Unterst√ºtzt HDR, unterst√ºtzt DXT1 nicht. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>DevIL</b></a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwickler-Bildbibliothek</a> ).  Eine sehr einfache C-Bibliothek im OpenGL-Stil.  Es enth√§lt eine Shell √ºber LibJPEG, LibPNG, LibTIFF, verf√ºgt aber auch √ºber umfangreiche integrierte Funktionen und unterst√ºtzt zus√§tzlich viele Bildformate, einschlie√ülich DXT1.  F√ºr die Montage wird CMake verwendet.  Die meisten Abh√§ngigkeiten, einschlie√ülich LibJPEG, LibPNG, LibTIFF, sind nicht in DevIL enthalten und m√ºssen unabh√§ngig heruntergeladen und separat kompiliert werden.  Das neueste DevIL-Update f√ºr das Build-System ist vom 01.01.2017, und das vorherige Update fand im Allgemeinen im Jahr 2014 statt. Wenn also Probleme mit der Bibliothek auftreten, kann es zu Problemen mit deren L√∂sung kommen. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>OpenImageIO</b></a> .  Es ist als Entwicklertool f√ºr professionelle Software f√ºr die Arbeit mit Bildern positioniert.  Es unterst√ºtzt in Form von Plug-Ins die Arbeit mit vielen exotischen Fotoformaten und sogar Videos.  Build f√ºr Windows erfordert vorkompiliertes Boost und Qt 4. Es gibt keine vorgefertigte zusammengestellte Version zum Testen. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Boost GIL</b></a> (Generic Image Library) Boost und fertig.  Obwohl nicht alle.  Diese Bibliothek enth√§lt auch einen Wrapper √ºber LibJPEG, LibPNG und LibTIFF. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>SDL_image 2.0</b></a> Wird zusammen mit der SDL-Bibliothek verwendet und Sie werden lachen, enth√§lt aber auch eine Shell √ºber LibJPEG, LibPNG und LibTIFF. </li></ul><br>  Alle gefundenen Bibliotheken wurden unter Windows unter Verwendung der maximalen Optimierungsstufe des Visual Studio-Compilers und des Schalters / arch: AVX2 kompiliert. <br><br>  Gleiches gilt f√ºr die Bibliotheken LibJPEG, LibPNG und LibTIFF, um die Arbeit aus dem neuen <a href="">OpenCV-Bibliothekspaket</a> zu beschleunigen. <br><br><h2>  <font color="#0071c5">Treffen Sie den Google Benchmark</font> </h2><br>  Der n√§chste L√∂sungsschritt liegt ebenfalls auf der Hand: Die Erstellung eines Benchmarks zum Vergleichen der Leistung gefundener Bibliotheken und die Verwendung der in engen Kreisen weithin bekannten Google Benchmark-Mikrobenchmarking-Bibliothek machen dies einfach und schnell. <br>  Google Benchmark kann die Leistung der Codeteile, die Sie in den Hauptteil des C ++ 11-Zyklus eingef√ºgt haben, genau messen. <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BM_foo1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(benchmark::State&amp; state)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     Init_your_code(); for (auto _ : state){ //  -  your_code_to_benchmark(); }</span></span></code> </pre> <br>  in Funktionen, die als Benchmark registriert sind <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//       BENCHMARK(BM_foo1);</span></span></code> </pre><br>  Und lass sie laufen: <br><br><pre> <code class="cpp hljs">BENCHMARK_MAIN();</code> </pre> <br>  Geben Sie dann einen Bericht im angegebenen Format aus - Konsolenausgabe, json, csv. <br><br>  Der Bericht enth√§lt Daten zum Ausf√ºhrungssystem (Prozessor, Cache-Konfiguration), die globale Gesamtbetriebszeit jeder der gemessenen Funktionen sowie die Zeit, die der Prozessor ben√∂tigt.  Diese Zeiten unterscheiden sich im Allgemeinen - die erste enth√§lt beispielsweise eine Lese- / Schreibverz√∂gerung, und die zweite f√ºr Multithread-Benchmarks ist die Summe der Betriebszeit aller Kerne. <br><br>  Der letzte vom Google-Benchmark angezeigte Parameter ist die Anzahl der f√ºr die Funktion durchgef√ºhrten Iterationen, die f√ºr die statistisch korrekte genaue Messung ihrer Betriebszeit erforderlich sind.  Das System w√§hlt es automatisch selbst aus und f√ºhrt vorl√§ufige Messungen durch. <br><br>  Was ist eine ‚Äûgenaue Messung‚Äú der Laufzeit?  Sie k√∂nnen Dissertationen zu diesem Thema schreiben, aber in diesem Fall reicht es zu sagen: <br><br><ul><li>  Standardm√§√üig erfolgt die Messung in Prozessorclustern, dh die theoretische Reihenfolge der Genauigkeit ist genau diese.  Die Standardausgabe erfolgt in Nanosekunden. </li><li>  Die Ergebnisse aller Tests, die ich gesehen habe, sind von Start zu Start sehr stabil. </li><li>  Nach meinen Daten wird der Google-Benchmark von Entwicklern von Bordcomputersoftware eines der weltweit gr√∂√üten Automobilunternehmen verwendet und von seinen Ergebnissen voll vertrauensw√ºrdig.  Also werden wir glauben. </li></ul><br>  Das einzige, worauf Sie achten sollten: Google Benchmark bietet keine "Bereinigung" des Caches zwischen den Starts der Benchmark-Iterationen.  Wenn n√∂tig, sollten Sie sich selbst darum k√ºmmern. <br><br>  Der Google-Benchmark kann jedoch noch viele andere Dinge tun: <br><br><ul><li>  Berechnen Sie die asymptotische Komplexit√§t des Algorithmus (O). </li><li>  Arbeiten Sie korrekt mit Multithread-Benchmarks und messen Sie deren Dauer nicht in Prozessor-Ticks, sondern im Echtzeitmodus (Wanduhr). </li><li>  Verwenden Sie Ihre eigene Funktion der "manuellen" Zeitmessung, die beispielsweise bei der Messung der Arbeit an der GPU hilfreich sein kann. </li><li>  Setzen Sie automatisch Benchmarks mit unterschiedlichen Argumenten f√ºr einen bestimmten K√∂rper der gemessenen Funktion. </li><li>  Zeigen Sie den Durchschnittswert, den Median und die Standardabweichung f√ºr mehrere Starts der Benchmark an. </li><li>  Legen Sie Ihre eigenen Z√§hler und Tags fest, die im Google-Benchmark-Bericht angezeigt werden. </li></ul><br>  Der Google-Benchmark wird aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Github-Repository</a> heruntergeladen und mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cmake</a> f√ºr die entsprechende Plattform zusammengestellt (Visual Studio-Assembly ist f√ºr Windows verf√ºgbar). Die resultierende Bibliothek wird mit Ihrem Projekt verkn√ºpft (bei Windows wird auch ein Link mit der shlwapi-Bibliothek ben√∂tigt). Die Benchmark-Headerdatei wird Ihrem Code hinzugef√ºgt .h, danach funktioniert alles wie oben beschrieben. <br><br>  Wenn dies nicht funktioniert, ist neben der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereits angegebenen Website</a> der einzige Ort, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">an</a> dem Sie zumindest einige Informationen und Hilfe zum Google-Benchmark erhalten k√∂nnen, ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">spezialisiertes Produktforum</a> . <br><br>  In unserem Fall hat alles ohne Probleme funktioniert.  Nach der Kommunikation mit Kunden wurden 4 Benchmarks definiert, die unter einem anderen Namen geladen und gespeichert werden: <br><br><ul><li>  8-Bit-JPEG-Datei mit einer Aufl√∂sung von 15k </li><li>  24-Bit-JPEG-Datei mit einer Aufl√∂sung von 15k </li><li>  24-Bit-TIFF-Datei mit einer Aufl√∂sung von 15k </li><li>  32-Bit-BMP-Datei mit einer Aufl√∂sung von 32x32 </li></ul><br><h2>  <font color="#0071c5">Treffen Sie die Ergebnisse</font> </h2><br>  Es war urspr√ºnglich geplant, dass alle gefundenen Bibliotheken, d. H. FreeImage, Cimg, DevIL, OpenImageIO, Boost GIL und SDL_image 2.0, am Testvergleich mit Windows Imaging Component (WIC) teilnehmen.  Aber die letzten drei Bibliotheken, abh√§ngig von solchen "Monstern" wie Boost und SDL, wurden von Kunden gebeten, im Notfall in Reserve zu bleiben, wenn die gew√ºnschte Bibliothek nicht unter den ersten drei gefunden wird.  Und zum Gl√ºck wurde sie gefunden.  Obwohl nicht sofort. <br><br>  Der folgende Bericht wurde vom Google-Benchmark erstellt und zeigt Folgendes: <br><br><ul><li>  FreeImage mit einem Crushing Score verliert WIC in allen Tests und kann daher nicht mehr ber√ºcksichtigt werden. </li><li>  Cimg verliert WIC √ºberall sauber, au√üer beim Laden von TIFF, wo es etwas (weniger als 5%) schneller ist.  Leider muss er auch gel√∂scht werden.  Dar√ºber hinaus gilt dies f√ºr die direkte Verwendung des ImageMagick-Pakets. </li></ul><br>  Bleibt die DevIL-Bibliothek.  Es zeigt hervorragende Ergebnisse beim Laden von bmp und tiff (3- und 2,8-mal h√∂her als WIC!), Schwarz-Wei√ü-JPEG (1,75-mal besser als WIC), verlangsamt sich jedoch beim Laden eines normalen 24-Bit-JPEG etwas - es macht es um 3 % langsamer als WIC. <br><table><tbody><tr><td colspan="4"> <code>08/15/18 11:15:44 <br> Running c:\WIC\WIC_test\Release\WIC_test.exe <br> Run on (8 X 4008 MHz CPU s) <br> CPU Caches: <br> L1 Data 32K (x4) <br> L1 Instruction 32K (x4) <br> L2 Unified 262K (x4) <br> L3 Unified 8388K (x1)</code> </td> </tr><tr><td> <code>Benchmark</code> </td> <td> <code>Time</code> </td> <td> <code>CPU</code> </td> <td> <code>Iterations</code> </td> </tr><tr><td> <code><font color="#0000FF">BM_WIC8jpeg</font></code> </td> <td> <code><font color="#0000FF">72 ms</font></code> </td> <td> <code><font color="#0000FF">70 ms</font></code> </td> <td> <code><font color="#0000FF">11</font></code> </td> </tr><tr><td> <code>BM_cimg8jpeg</code> </td> <td> <code>562 ms</code> </td> <td> <code>52 ms</code> </td> <td> <code>10</code> </td> </tr><tr><td> <code>BM_FreeImage8jpeg</code> </td> <td> <code>147 ms</code> </td> <td> <code>144 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL8jpeg</font></code> </td> <td> <code><font color="#FF0000">41 ms</font></code> </td> <td> <code><font color="#FF0000">41 ms</font></code> </td> <td> <code><font color="#FF0000">17</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24jpeg</font></code> </td> <td> <code><font color="#0000FF">266 ms</font></code> </td> <td> <code><font color="#0000FF">260 ms</font></code> </td> <td> <code><font color="#0000FF">3</font></code> </td> </tr><tr><td> <code>BM_cimg24jpeg</code> </td> <td> <code>656 ms</code> </td> <td> <code>128 ms</code> </td> <td> <code>6</code> </td> </tr><tr><td> <code>BM_FreeImage24jpeg</code> </td> <td> <code>594 ms</code> </td> <td> <code>594 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24jpeg</font></code> </td> <td> <code><font color="#FF0000">276 ms</font></code> </td> <td> <code><font color="#FF0000">276 ms</font></code> </td> <td> <code><font color="#FF0000">3</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24tiff</font></code> </td> <td> <code><font color="#0000FF">844 ms</font></code> </td> <td> <code><font color="#0000FF">844 ms</font></code> </td> <td> <code><font color="#0000FF">1</font></code> </td> </tr><tr><td> <code>BM_cimg24tiff</code> </td> <td> <code>808 ms</code> </td> <td> <code>131 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code>BM_FreeImage24tiff</code> </td> <td> <code>953 ms</code> </td> <td> <code>938 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24tiff</font></code> </td> <td> <code><font color="#FF0000">305 ms</font></code> </td> <td> <code><font color="#FF0000">305 ms</font></code> </td> <td> <code><font color="#FF0000">2</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC32</font></code> </td> <td> <code><font color="#0000FF">3 ms</font></code> </td> <td> <code><font color="#0000FF">3 ms</font></code> </td> <td> <code><font color="#0000FF">236</font></code> </td> </tr><tr><td> <code>BM_cimg32</code> </td> <td> <code>71 ms</code> </td> <td> <code>7 ms</code> </td> <td> <code>90</code> </td> </tr><tr><td> <code>BM_FreeImage32</code> </td> <td> <code>6 ms</code> </td> <td> <code>5 ms</code> </td> <td> <code>112</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL32</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">747</font></code> </td> </tr></tbody></table>  Nat√ºrlich k√∂nnte DevIL zu diesem Zeitpunkt auch abgelehnt werden, aber hier erscheint eine andere Bibliothek im Rahmen - <b>Libjpeg-turbo</b> . <br><br>  Die Ausgabe kann leicht mit Applaus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beantwortet werden</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Libjpeg-turbo</a> ist eine plattform√ºbergreifende Bibliothek, die die libjpeg-Funktionalit√§t (API) vollst√§ndig implementiert und ihre eigene Funktionalit√§t hinzuf√ºgt (z. B. Arbeiten mit 32-Bit-Puffern).  Gleichzeitig verwendet Libjpeg-turbo f√ºr die x86-Architektur aktiv Vektoranweisungen (SSE2, AVX2) und ist laut seinen Erstellern 2-6-mal schneller als libjpeg (!) <br><br>  Daher besteht der n√§chste Schritt darin, DevIL mit Libjpeg-turbo anstelle von libjpeg zu erstellen.  Libjpeg-turbo erstellt mit Hilfe von CMake problemlos Visual Studio und arbeitet dann fast sofort (mit dem Ersatz der einzigen #define, die die Version von libjpeg in der DevIL-Headerdatei bestimmt) als Teil von DevIL. <br><br>  Infolgedessen sieht der Google-Benchmark-Bericht folgenderma√üen aus: <br><table><tbody><tr><td> <code>Benchmark</code> </td> <td> <code>Time</code> </td> <td> <code>CPU</code> </td> <td> <code>Iterations</code> </td> </tr><tr><td> <code><font color="#0000FF">BM_WIC8jpeg</font></code> </td> <td> <code><font color="#0000FF">72 ms</font></code> </td> <td> <code><font color="#0000FF">68 ms</font></code> </td> <td> <code><font color="#0000FF">9</font></code> </td> </tr><tr><td> <code>BM_cimg8jpeg</code> </td> <td> <code>565 ms</code> </td> <td> <code>39 ms</code> </td> <td> <code>10</code> </td> </tr><tr><td> <code>BM_FreeImage8jpeg</code> </td> <td> <code>148 ms</code> </td> <td> <code>141 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL8jpeg</font></code> </td> <td> <code><font color="#FF0000">31 ms</font></code> </td> <td> <code><font color="#FF0000">31 ms</font></code> </td> <td> <code><font color="#FF0000">24</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24jpeg</font></code> </td> <td> <code><font color="#0000FF">269 ms</font></code> </td> <td> <code><font color="#0000FF">266 ms</font></code> </td> <td> <code><font color="#0000FF">2</font></code> </td> </tr><tr><td> <code>BM_cimg24jpeg</code> </td> <td> <code>675 ms</code> </td> <td> <code>131 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code>BM_FreeImage24jpeg</code> </td> <td> <code>604 ms</code> </td> <td> <code>594 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24jpeg</font></code> </td> <td> <code><font color="#FF0000">149 ms</font></code> </td> <td> <code><font color="#FF0000">150 ms</font></code> </td> <td> <code><font color="#FF0000">5</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24tiff</font></code> </td> <td> <code><font color="#0000FF">833 ms</font></code> </td> <td> <code><font color="#0000FF">828 ms</font></code> </td> <td> <code><font color="#0000FF">1</font></code> </td> </tr><tr><td> <code>BM_cimg24tiff</code> </td> <td> <code>785 ms</code> </td> <td> <code>138 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code>BM_FreeImage24tiff</code> </td> <td> <code>943 ms</code> </td> <td> <code>938 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24tiff</font></code> </td> <td> <code><font color="#FF0000">318 ms</font></code> </td> <td> <code><font color="#FF0000">320 ms</font></code> </td> <td> <code><font color="#FF0000">2</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC32</font></code> </td> <td> <code><font color="#0000FF">4 ms</font></code> </td> <td> <code><font color="#0000FF">3 ms</font></code> </td> <td> <code><font color="#0000FF">236</font></code> </td> </tr><tr><td> <code>BM_cimg32</code> </td> <td> <code>74 ms</code> </td> <td> <code>8 ms</code> </td> <td> <code>56</code> </td> </tr><tr><td> <code>BM_FreeImage32</code> </td> <td> <code>6 ms</code> </td> <td> <code>5 ms</code> </td> <td> <code>100</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL32</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">747</font></code> </td> </tr></tbody></table>  Nat√ºrlich sind Leistungsverbesserungen mit JPEG im Vergleich zu libjpeg nicht einmal doppelt so hoch, aber das sollte auch so sein - denn die Geschwindigkeits√ºberlegenheit gilt nur f√ºr die JPEG-Codierung / -Decodierung, und der Test beinhaltet den Aufwand f√ºr das Lesen / Schreiben einer Datei. <br><br>  Es ist jedoch ersichtlich, dass DevIL im Durchschnitt 8-Bit-JPEG <b>2,3-</b> mal, 24-Bit-JPEG <b>1,8-</b> mal, 24-Bit-TIFF - <b>2,7-</b> mal, 32-Bit-BMP - <b>3,5-</b> mal schneller als WIC ist. <br><br>  Das Problem ist gel√∂st.  Drei Sommerarbeitstage vor den Ferien wurden vollst√§ndig f√ºr die Entscheidung aufgewendet.  Wenn es ein bisschen mehr g√§be, w√§re es nat√ºrlich m√∂glich, dass es eine Bibliothek mit noch beeindruckenderen Ergebnissen gibt, und wenn es viel mehr w√§re, w√ºrde ich vielleicht die Bibliothek schreiben, die ich selbst gesucht habe. <br><br>  Aber auch was beeindruckend ist.  Wenn Sie also nach einer plattform√ºbergreifenden Bibliothek f√ºr die Arbeit mit Grafikdateien suchen, die in jeder Hinsicht schnell und einfach ist, achten Sie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DevIL</a> . Wenn Sie schnell und genau vergleichende Messungen des Codes durchf√ºhren m√ºssen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">steht</a> Ihnen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google-Benchmark</a> zur Verf√ºgung. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425021/">https://habr.com/ru/post/de425021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425007/index.html">Iridium und Jeff Bezos AWS haben sich zusammengetan, um ein globales Satelliten-Internetprojekt f√ºr IoT zu entwickeln</a></li>
<li><a href="../de425009/index.html">Lisa Alert: lebensrettende Freiwillige</a></li>
<li><a href="../de425011/index.html">Haiku R1 erste Beta ver√∂ffentlicht</a></li>
<li><a href="../de425015/index.html">Verkauf ohne Fehler: Digitale Sicherheit von E-Commerce-Plattformen</a></li>
<li><a href="../de425019/index.html">Woronesch, wartet auf dich (und nicht nur) + Wettbewerb</a></li>
<li><a href="../de425023/index.html">Wir √ºbersetzen das Rezept in die Multicooker-Sprache</a></li>
<li><a href="../de425025/index.html">Golang-Tests au√üerhalb von gotour</a></li>
<li><a href="../de425027/index.html">Entwicklung von GLSL-Shadern auf Kotlin</a></li>
<li><a href="../de425031/index.html">Mehr √úbung! Lassen Sie uns Spring Framework und Profiling ohne Konferenzen unterrichten</a></li>
<li><a href="../de425033/index.html">Erstellen eines Jetpacks: JetPack Aviation-Gesch√§ftsbericht 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>