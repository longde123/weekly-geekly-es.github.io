<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🍳 🐅 🐼 Comment fonctionne la recherche 📺 ⬛️ 👨🏻‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut, nom d'utilisateur! Chaque jour, nous sommes confrontés à une recherche de données diverses. Presque tous les sites Web contenant de nombreuses ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment fonctionne la recherche</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/413261/">  Salut, nom d'utilisateur!  Chaque jour, nous sommes confrontés à une recherche de données diverses.  Presque tous les sites Web contenant de nombreuses informations ont désormais une recherche.  La recherche se fait dans les ordinateurs personnels, dans les téléphones portables, dans divers types de logiciels.  Bien sûr, si vous interrogez un développeur sur la recherche en termes de technologie, elasticsearch, lucene ou sphinx vous viendra immédiatement à l'esprit.  Aujourd'hui, je veux regarder avec vous «sous le capot» d'une recherche en texte intégral et trouver une première approximation de son fonctionnement, en utilisant hh.ru comme exemple. <br><br><img src="https://habrastorage.org/webt/pn/cf/l7/pncfl7qsqbg5otgxyayrynymija.png" alt="image"><br><a name="habracut"></a><br>  <i>Avertissement: cet article n'est pas le seul vrai point de vue et ne sert que de point d'introduction pour une introduction initiale au travail de recherche de texte et quelques options pour la mise en œuvre de ses différentes parties.</i> <br><br>  Si vous regardez les détails de la recherche, en plus de la partie évidente sous la forme d'une chaîne de recherche, vous pouvez en voir beaucoup plus: <br><br><ul><li>  indice (elle suggère) </li><li>  compteur de résultats de recherche (compteur), </li><li>  différents types de tri (tri), </li><li>  facettes - caractéristiques groupées des documents, par exemple, le métro sur lequel se trouve une vacance, remplissant également la fonction de filtres (filtres), </li><li>  synonymes </li><li>  pagination </li><li> snippet (snippet) - une petite description du document dans l'émission, </li><li>  etc. </li></ul><br><img src="https://habrastorage.org/webt/bl/hy/so/blhyso9n80pgxke6lh-rggoft74.jpeg" alt="image"><br><br>  Et tout cela sert un seul objectif - satisfaire le besoin de l'utilisateur de trouver les bonnes informations aussi rapidement et de manière pertinente que possible.  Par exemple, le filtrage est important pour affiner les résultats de recherche, dans notre cas, il peut s'agir d'un filtre par expérience, emplacement ou emploi du candidat.  Les facettes sont utiles pour afficher le nombre de postes vacants dans chaque tranche de salaire.  Il est également important de compléter les requêtes et les documents par des synonymes afin qu'à la demande du «développeur Java», ils puissent trouver des documents «Développeur Java». <br><br>  En plus de la recherche elle-même, il y a toujours beaucoup de composants qui facilitent la vie de l'utilisateur: un tuteur qui est responsable de la correction des erreurs, ou un sajest qui invite des requêtes plus appropriées lorsque vous interagissez avec la barre de recherche.  Dans certains cas, il est important de pouvoir reformuler la demande.  Par exemple, déplacez une partie de la demande vers des filtres: à partir de la demande «programmeur de Moscou», Moscou peut être retiré dans le filtre par ville. <br><br><h3>  1. Basique </h3><br>  Maintenant au point.  La recherche elle-même est divisée en deux grandes étapes: <br><br><ul><li>  indexation (traitement des documents et mise en page selon des structures d'index particulières, pour que vous puissiez ensuite effectuer rapidement la recherche elle-même), </li><li>  recherche (application de filtres, recherche booléenne, classement, etc.). </li></ul><br><h3>  1.1.  Indexation </h3><br>  Une légère digression lyrique.  Je présenterai plus loin le concept de terme - car il est d'usage d'appeler l'unité minimale d'indexation et de requête.  C'est l'unité même qui sera stockée dans le dictionnaire d'index.  Il peut s'agir d'un mot réduit à sa forme ou base de mot normale, à son numéro, à son adresse électronique, à sa lettre n-grammes ou à autre chose.  En règle générale, un terme comprend un champ dans lequel il est indexé ou dans lequel une recherche est effectuée. <br><br>  Tout d'abord, vous devez transformer les documents d'entrée en un ensemble de termes et filtrer les mots vides.  Ils peuvent être comme des mots fréquents - prépositions, conjonctions, interjections et autres choses, par exemple, des caractères spéciaux que nous ne voulons pas rechercher.  Pour que la recherche fonctionne avec différentes formes de mots, au cours du processus d'indexation, nous amenons généralement tous les mots à un état de base.  Habituellement, l'une des deux procédures est utilisée: soit la racine - le processus d'isolement de la base d'un mot (développement -&gt; développement), soit la lemmatisation - le processus de mise en forme normale d'un mot (compétences -&gt; compétences). <br><br><h3>  1.2 Structures d'index </h3><br>  La façon la plus courante de représenter un index est un index inversé.  En fait, il s'agit d'une sorte de table de hachage, où la clé est un terme, et la valeur est une liste de documents (généralement une liste d'ID de document appelée liste de publications) dans laquelle ce terme est présent.  Habituellement, un index inversé se compose de deux parties - un dictionnaire (dictionnaire de termes) et des listes de documents pour chaque terme (liste de publication): <br><br><img src="https://habrastorage.org/webt/k1/zf/te/k1zftetx905m-wguaytcovdbx-i.png" alt="image"><br><br>  De plus, l'index peut contenir des informations sur les positions des termes dans le document (indice de position), qui seront utiles lors de la recherche de termes à une certaine distance, en particulier avec des requêtes phrasales, sur la fréquence des termes, ce qui aidera à classer et à construire un plan de requête.  Mais plus à ce sujet ci-dessous. <br><br><h3>  1.2.1 Dictionnaire des termes </h3><br>  Le dictionnaire stocke tous les termes qui existent dans l'index et est conçu pour trouver rapidement des liens vers une liste de documents.  Il existe plusieurs options pour stocker un dictionnaire: <br><br><ul><li>  Une table de hachage, où le terme est la clé et la valeur est un lien vers une liste de documents de ce terme. </li><li>  Une liste ordonnée par laquelle vous pouvez effectuer une recherche par recherche binaire. </li><li>  Arbre de préfixe (trie). </li></ul><br>  Le moyen le plus optimal est la dernière option, car  Elle présente plusieurs avantages.  Premièrement, sur un grand nombre de termes, l'arbre des préfixes occupera beaucoup moins de mémoire, car les parties répétées des préfixes ne seront stockées qu'une seule fois.  Deuxièmement, nous avons immédiatement la possibilité de faire des demandes de préfixe.  Et troisièmement, un tel arbre peut être compressé en combinant des parties non ramifiées. <br><br><img src="https://habrastorage.org/webt/lx/zn/1z/lxzn1zanyrwmc_cxbwvl6qv3bie.png" alt="image"><br><br>  Bien sûr, un arbre de préfixe peut ne pas être la seule structure pour stocker des termes dans un index.  Par exemple, un arbre de suffixes peut également être à proximité, ce qui à son tour sera plus optimal pour les requêtes avec jokers (requêtes de la forme po * sql). <br><br><h3>  1.2.2 Liste de diffusion </h3><br>  La liste des documents est une liste ordonnée d'identifiants de documents, qui permet de faire quelques optimisations avec elle.  Habituellement, il stocke en lui-même non seulement une liste de documents dans lesquels le terme apparaît, mais aussi les positions (publications) auxquelles il se produit.  Cela résout plusieurs problèmes à la fois: nous savons immédiatement combien de fois un mot apparaît dans un document, nous pouvons faire des phrases et des requêtes avec une certaine distance entre les termes, traverser plusieurs listes de documents à la fois et regarder les positions des termes. <br><br><img src="https://habrastorage.org/webt/7-/1v/lv/7-1vlvh3ycm7xm6kxlcu-stygos.png" alt="image"><br><br>  Par exemple, dans cette liste par le terme <b>scala</b> dans le 6ème document du <b>titre, le</b> mot apparaît 4 fois, aux positions 2, 15, 18 et 25. <br><br><h3>  1.2.3 Documents avec plusieurs champs </h3><br>  La plupart du document se compose de plusieurs champs, au moins à partir du nom du document et de son corps.  Cela aide lors de la recherche de parties individuelles du document et lorsque le terme est significatif lors du classement (par exemple, le terme apparaissant dans le titre peut être considéré comme plus significatif). <br><br>  De plus, dans l'index, généralement non seulement les champs de texte sont stockés, mais aussi les signes de documents, certaines valeurs numériques, etc. Le stockage dans l'index prend généralement la forme de {champ-terme}. <br><br><img src="https://habrastorage.org/webt/hk/zt/kq/hkztkq81x0tcc_twzuj_93qha34.png" alt="image"><br><br>  Par exemple, si vous prenez un poste vacant, alors il aura plusieurs champs à la fois: nom, description, entreprise, paie, ville et l'expérience nécessaire.  Cela est nécessaire pour que l'utilisateur puisse rechercher facilement non seulement par le nom et le texte de l'entreprise, mais aussi filtrer par salaire et expérience, voir combien de postes vacants sont dans sa ville et dans les villes voisines, ou même rechercher des postes vacants pour une entreprise particulière. <br><br><h3>  1.3 Compression et optimisation d'index </h3><br>  La vitesse de travail est importante pour la recherche, par conséquent, la plupart des opérations de recherche d'index sont généralement effectuées dans la RAM.  Pour ce faire, il est très important d'appliquer un certain nombre d'optimisations à l'index, qui l'adapteront à une taille de mémoire limitée.  En plus de cela, un certain nombre d'optimisations sont généralement appliquées, ce qui vous permet de vous déplacer autour de l'index à une vitesse plus élevée lors de la recherche, en ignorant les éléments inutiles. <br><br><h3>  1.3.1 Compression Delta </h3><br>  Comme nous nous souvenons que la liste des documents par terme (aka liste des publications) est ordonnée, la première idée de la façon de la compresser est de créer une liste avec les décalages d'ID au lieu de la liste avec l'ID du document par rapport aux précédents.  Sur une liste spécifique de 6 identifiants, cela ressemblera à ceci: <br><br><img src="https://habrastorage.org/webt/xo/oe/ww/xooewwppo3g9vpm8wj3wxnmudyw.png" alt="image"><br><br>  Ainsi, en parcourant la liste, nous calculerons toujours l'identifiant actuel à partir de la valeur précédente obtenue.  Par exemple, au deuxième décalage 3, nous ajoutons la première valeur 2 et obtenons l'id 5, au troisième 4 nous ajoutons 5, et obtenons 9 et ainsi de suite.  Avec un grand nombre de documents, cela fonctionne très bien, en particulier en conjonction avec une autre méthode de compression - l'enregistrement de nombres au format variable. <br><br><h3>  1.3.2 VarByte et VarInt </h3><br>  Il s'agit d'un moyen de stocker chaque élément de liste individuel en mémoire afin qu'il occupe le minimum d'espace.  Par exemple, si les trois premiers décalages ne tiennent que sur 1 octet, il n'est pas nécessaire d'en prendre plus.  Étant donné que notre liste ne contient pas de documents d'identité, mais des deltas, la compression sera très efficace.  Dans cette représentation des nombres, le premier bit de chaque octet est le drapeau indiquant si la représentation du numéro courant se termine sur cet octet. <br><br><img src="https://habrastorage.org/webt/xv/xq/xy/xvxqxy_wswvxsehxyy3heca4csg.png" alt="image"><br><br>  Si le premier bit de l'octet 0 est alors le dernier octet du nombre, si 1 ne l'est pas. <br><br><h3>  1.3.3 Sauter la liste / Sauter la table </h3><br>  Une liste de sauts est l'une des structures permettant de parcourir rapidement une liste de documents d'un certain terme, en sautant une partie inutile de la liste.  L'idée est de stocker des liens vers des éléments distants de la liste sur le disque en face de la liste elle-même, car après la compression, nous ne pouvons pas dire exactement où le document 100 ou 200 sera situé.  Par exemple, cela est pratique lorsqu'il y a une requête de deux termes, où un terme sera fréquemment trouvé, et le second, au contraire, sera rare, et la liste des documents ne commencera qu'avec le 200e identifiant du document.  Ensuite, s'il existe une liste avec des passes pour la première liste, nous pouvons gagner du temps sur le déplacement et ignorer immédiatement le bloc d'identifiants inutiles. <br><br><img src="https://habrastorage.org/webt/59/8w/cf/598wcfm9ouioywtepy1tueyern8.png" alt="image"><br><br><h3>  1.4 Demandes </h3><br><h3>  1.4.0 Requête de terme </h3><br>  Le type de demande le plus simple dans lequel il suffit de trouver la liste appropriée des documents et d'émettre des documents triés après classement. <br>  Par exemple, de cette façon, nous trouvons une liste de positions pour <b>java</b> : <br><br><img src="https://habrastorage.org/webt/fv/uv/l7/fvuvl7xxpopw0klzphutaijdbje.png" alt="image"><br><br><h3>  1.4.1 Requêtes booléennes (et, ou, non) </h3><br>  La recherche booléenne est l'une des parties les plus importantes de la recherche d'informations que nous trouvons partout.  La recherche booléenne entière est basée sur une combinaison de ET, OU et NON.  Par exemple, lorsque nous recherchons une requête en deux mots: <b>java android</b> , puis en fait, dans une recherche simple, elle sera convertie en <b>java AND android</b> .  Et cela signifie que nous voulons trouver tous les documents qui contiennent les deux mots. <br><br>  Il convient de mentionner tout de suite comment vous vous déplacez dans la liste des documents.  Étant donné que les listes de documents pour chaque terme sont triées, il existe généralement deux façons de parcourir les listes: parcourir les documents de manière séquentielle, en les passant un par un, ou passer immédiatement à un document spécifique, en ignorant ceux qui ne sont pas nécessaires (par exemple, lorsque la première liste est beaucoup plus petite) , et nous n'avons pas besoin de parcourir un grand bloc de documents dans la deuxième liste).  Dans ce cas, nous utilisons d'abord le pointeur des pointeurs de saut pour que la deuxième liste se rapproche le plus possible de l'ID de document souhaité, puis nous y déplaçons linéairement. <br><br>  Au moment de la recherche, les événements suivants se produisent: dans l'index des termes java et android sont des listes de documents, puis une intersection est faite sur eux - c'est-à-dire que nous trouvons des documents qui contiennent les deux termes.  Avec cette recherche, les deux méthodes de déplacement dans les listes sont utilisées pour un croisement plus rapide. <br><br><img src="https://habrastorage.org/webt/ug/jl/rf/ugjlrfbdm4vo7bv0xxsfx7nuapg.png" alt="image"><br><br>  Avec les requêtes OR du formulaire java OR scala, où nous devons trouver tous les documents contenant au moins un des termes, la situation est différente - ici, nous n'avons pas besoin que le terme soit dans toutes les listes de documents à la fois.  Mais il existe des requêtes avec plusieurs opérateurs OR, puis la condition pour un nombre minimum de correspondances peut se produire, par exemple, il peut y avoir une requête java OU scala OU cotlin OU clojure avec au moins deux correspondances, puis nous devons afficher tous les documents qui contiennent au moins deux mots de la requête . <br><br>  Dans ce cas, le tas fonctionne plus efficacement.  Nous pouvons y stocker des liens vers les itérateurs de chacune des listes et obtenir l'élément minimum pour un temps constant.  Après avoir pris l'élément minimum, nous supprimons l'itérateur du tas, faisons un pas en avant et l'ajoutons à nouveau au tas.  Vous pouvez stocker séparément le candidat actuel à ajouter au résultat et au compteur, combien de fois il s'est rencontré et au moment où le candidat différera de l'élément minimum dans le tas, voyez si nous passons par le nombre minimum de correspondances dans l'opération.  Et soit ajouter à la liste finale des résultats, soit jeter le document. <br><br><img src="https://habrastorage.org/webt/mn/o9/px/mno9pxfv5n91v7ilooaln719_s0.png" alt="image"><br><br><h3>  1.4.2 Préfixe / Jokers </h3><br>  Parfois, nous voulons trouver tous les documents qui contiennent un mot qui commence par un préfixe spécifique.  Dans de tels cas, la demande de préfixe nous aidera, qui ressemblera à <b>jav *</b> .  Une demande de préfixe fonctionne très bien lorsque le dictionnaire est implémenté sur une arborescence de préfixes, puis nous arrivons à l'imbrication du préfixe et prenons tous les termes qui se trouvent ci-dessous. <br><br><h3>  1.4.3 Requêtes sur des phrases et requête proche </h3><br>  Il y a des moments où vous devez trouver la phrase entière, par exemple, "développeur Java", ou trouver des mots entre lesquels il n'y aura pas plus de quelques mots, par exemple, "Java" et "développeur", entre lesquels pas plus de 2 mots, afin que vous puissiez trouver documents contenant java android kotlin developer.  Pour cela, des listes de positions de mots dans chaque document sont également utilisées. <br><br><img src="https://habrastorage.org/webt/s_/aa/x8/s_aax8ar79jyhyk87misztsg57s.png" alt="image"><br><br>  Au moment de traverser les listes de documents, tout est identique à l'opération ET.  Mais une fois le document trouvé dans les deux listes, une vérification supplémentaire est effectuée - que les termes sont à la bonne distance l'un de l'autre, par la différence de position (position). <br><br><h3>  1.4.4 Plan de demande </h3><br>  Habituellement, avant l'exécution de la demande elle-même, son plan est construit.  Cela se produit afin d'optimiser l'exécution de la demande et de faire fonctionner des optimisations telles qu'une liste avec omissions pour la liste des documents. <br><br>  Le moyen le plus simple d'optimiser votre requête est de parcourir les listes de documents par ordre croissant de taille.  Ainsi, nous ne gaspillerons pas le gaspillage de documents de grandes listes qui ne sont pas dans de petites listes. <br><br>  Par exemple, <b>analysons la requête android AND java AND sql</b> .  Disons qu'il y a 10 documents dans la liste android, en sql - 20, et en java - 100. Dans ce cas, il est préférable de traverser d'abord les plus petites listes, et la requête optimisée ressemblera à <b>(android AND sql) AND java</b> . <br><br>  Dans le cas de OR, le plus simple est de compter le nombre de documents à l'intersection comme la somme de deux listes potentiellement intersectées. <br><br><h3>  1.4.5 Extension de requête - Synonymes </h3><br>  En plus de ce que l'utilisateur entre dans la barre de recherche, la recherche essaie généralement d'étendre la requête elle-même pour trouver des documents plus pertinents.  Beaucoup peut être utilisé pour étendre la recherche: l'historique des requêtes de l'utilisateur, certaines données personnalisées le concernant, etc.  Mais en plus de tout cela, il existe également un moyen universel d'élargir la demande - les synonymes. <br><br>  Dans ce cas, lors de l'écriture de documents dans l'index, le terme est remplacé par un «lien» dans le dictionnaire des synonymes: <br><br><img src="https://habrastorage.org/webt/ej/cy/_m/ejcy_m-mukw_j8qjmnqoy-qreb8.png" alt="image"><br><br>  La même chose se produit lors de la conversion d'une demande.  Par exemple, lorsque nous demandons un <b>directeur des ventes</b> , la demande ressemble en fait à: <br><br><img src="https://habrastorage.org/webt/_z/pp/oo/_zppoo52_gvvdyytz3bsxldxmrc.png" alt="image"><br><br>  Ainsi, dans la réponse, nous recevrons non seulement les documents qui contiennent le directeur des ventes, mais aussi ceux qui contiennent l'agent de vente et les ventes. <br><br><h3>  1.5 Filtrage </h3><br><h3>  1.5.1 Filtre à plage rapide </h3><br>  Parfois, nous voulons filtrer quelque chose par une gamme de valeurs, par exemple, par l'expérience des années.  Supposons que nous voulons trouver tous les postes vacants avec l'expérience requise de 3 à 11 ans.  La première décision est de faire une demande avec toutes les options de la gamme, en les combinant via OR.  Mais le problème est qu'il peut y avoir trop de valeurs.  Une façon de résoudre ce problème consiste à enregistrer la valeur avec plusieurs précisions à la fois: <br><br><img src="https://habrastorage.org/webt/ti/2j/nm/ti2jnmqh8bvj2xoq6by86agw2-q.png" alt="image"><br><br>  Dans ce cas, nous enregistrerons 5 valeurs de précision: un an (nous considérerons cela comme la valeur initiale), deux, quatre, huit et seize. <br><br>  Ensuite, lors de l'enregistrement, les événements suivants se produiront: par exemple, lors de l'enregistrement d'un document avec une exigence d'expérience de 6 ans, nous enregistrons immédiatement la valeur en toute précision: <br><br><img src="https://habrastorage.org/webt/g8/so/l0/g8sol0rss7iadolb1-xqxy2e7pm.png" alt="image"><br><br>  Lors du filtrage «de 3 à 11 ans», il se produit ce qui suit: nous sélectionnons uniquement les valeurs dont nous avons besoin avec la précision requise, et nous n'obtenons que 3 valeurs au lieu de 8 et nous obtenons la requête <b>(valeur réelle == 3) OU (précision 4 == 4) OU (précision 4 == 8)</b> <br><br><img src="https://habrastorage.org/webt/4v/7u/bq/4v7ubqnlcqa9scgl7tq17m7b8ai.png" alt="image"><br><br><h3>  1.5.2 Masques de bits </h3><br>  Les masques de bits font partie intégrante d'un index.  L'utilisation la plus importante est le filtrage des documents supprimés.  Lorsque vous supprimez un document de l'index, la suppression physique ne se produit pas immédiatement.  Une structure spéciale est écrite à côté de l'index, où chaque bit signifie l'id du document dans l'index, et lorsqu'il est supprimé, un bit est levé et lors de la recherche, ces documents sont filtrés et ne tombent pas dans la sortie. <br><br>  Vous pouvez également utiliser des masques de bits pour définir des autorisations pour chaque utilisateur sur certains documents et pour mettre en cache des filtres populaires individuels.  Ensuite, les masques de bits sont généralement stockés séparément de l'index. <br><br>  Par exemple, nous avons des filtres populaires: la ville de Moscou, uniquement à temps partiel, sans expérience de travail.  Ensuite, avant la demande, nous pouvons obtenir les masques de bits déjà enregistrés pour ces documents, les ajouter et obtenir le masque de bits final - quels documents passent par ces trois filtres, ce qui permet de gagner du temps sur le filtrage. <br><br><img src="https://habrastorage.org/webt/cg/g7/cm/cgg7cmb42j_ugjkcna4fqyi2bqu.png" alt="image"><br><br><h3>  2. Classement </h3><br>  Comme nous nous en souvenons, la tâche principale de la recherche est d'obtenir les informations les plus pertinentes en un minimum de temps.  Et en cela, nous serons aidés par le classement des documents après avoir filtré les documents par requête de texte et appliqué les filtres et les droits nécessaires. <br><br>  Le moyen le plus simple et le moins cher de faire un classement est de simplement trier les documents par date.  Dans certains systèmes, cela se faisait auparavant, par exemple, dans les actualités ou dans les annonces immobilières, de sorte que l'utilisateur a d'abord été informé des derniers documents. <br><br>  Parfois, un modèle de classement par le nombre de mots trouvés dans un document peut être utilisé, par exemple, quand il n'y a pas autant de documents, et nous voulons trouver tous les documents dans lesquels au moins un des mots de la requête est trouvé.  Dans ce cas, les documents dans lesquels tous les mots de la requête ou plusieurs d'entre eux sont trouvés seront plus pertinents. <br><br>  Bien sûr, à l'heure actuelle, ces méthodes sont déjà devenues sans objet, et elles peuvent plus probablement être attribuées à l'histoire du problème. <br><br><h3>  2.1 TF-IDF </h3><br>  TF-IDF (terme fréquence - fréquence inverse des documents) est l'une des formules de classement les plus élémentaires et les plus utilisées.  L'essence de la formule est de réduire les termes utilisés partout, par exemple, les prépositions et les interjections, et de rendre les termes plus significatifs qui sont rares, montrant ainsi les premiers documents avec des termes plus rares et plus significatifs de la requête.  Maintenant, décomposons la formule en plusieurs parties: <br><br>  <b>TF (terme fréquence)</b> est la fréquence du terme apparaissant dans le document.  Il est calculé simplement: <br><br>  <i>TF terme `java` = nombre de termes` java` dans le document / nombre de tous les termes dans le document</i> <i><br></i> <br>  <b>IDF (fréquence de document inverse)</b> - l'inverse de la fréquence à laquelle le mot apparaît dans la collection de documents.  Aide à réduire le poids des mots couramment utilisés. <br><br>  <i>IDF (`java`) = log (nombre de documents dans la collection / nombre de documents dans lesquels le terme` java` apparaît)</i> <br><br>  De plus, pour obtenir le TF-IDF du terme java, il suffit de multiplier les valeurs TF et IDF obtenues.    ,     ,          .     , ,  developer       ,     ,    java developer       . <br><br><h3> 2.2   </h3><br>      ,      ,    .        ,     ,    ,     . <br><br><h3> 2.3 BM25  BM* </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BM25</a> (Okapi best match 25)      TF-IDF         .     BM25F,             (    ). <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>B</mi><mi mathvariant=&quot;normal&quot;>M</mi><mn>25</mn></mrow><mo>=</mo><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>w</mi></munderover><mfrac><mrow><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>+</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x22C5;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>T</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub><mo>&amp;#x22C5;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>I</mi><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub></mrow><mrow><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>T</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub><mo>+</mo><mi>k</mi><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>b</mi><mo>+</mo><mi>b</mi><mfrac><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>L</mi></mrow><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>L</mi></mrow></mrow></mfrac><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac><mspace linebreak=&quot;newline&quot; /><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>I</mi><mi mathvariant=&quot;normal&quot;>D</mi><mi mathvariant=&quot;normal&quot;>F</mi></mrow><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>l</mi><mi mathvariant=&quot;normal&quot;>o</mi><mi mathvariant=&quot;normal&quot;>g</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mfrac><mrow><mi>N</mi><mo>&amp;#x2212;</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>n</mi></mfrac><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>l</mi><mi mathvariant=&quot;normal&quot;>o</mi><mi mathvariant=&quot;normal&quot;>g</mi></mrow><mi>N</mi></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="76.867ex" height="14.467ex" viewBox="0 -1662 33095.6 6228.9" role="img" focusable="false" style="vertical-align: -10.607ex; max-width: 638px;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(8356,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-42" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-4D" x="708" y="0"></use><g transform="translate(1626,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-35" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-3D" x="2904" y="0"></use><g transform="translate(3961,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJSZ2-2211" x="0" y="0"></use><g transform="translate(147,-1090)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-31" x="1124" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-77" x="663" y="1627"></use></g><g transform="translate(5405,0)"><g transform="translate(286,0)"><rect stroke="none" width="10569" height="60" x="0" y="220"></rect><g transform="translate(1127,720)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-2B" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-6B" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-29" x="2634" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-22C5" x="3246" y="0"></use><g transform="translate(3746,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-46" x="722" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-69" x="1945" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-22C5" x="5689" y="0"></use><g transform="translate(6190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-44" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-46" x="1126" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-69" x="2516" y="-213"></use></g></g><g transform="translate(60,-862)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-46" x="722" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-69" x="1945" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-2B" x="1942" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-6B" x="2943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-28" x="3464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-31" x="3854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-2212" x="4576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-62" x="5577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-2B" x="6229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-62" x="7230" y="0"></use><g transform="translate(7659,0)"><g transform="translate(120,0)"><rect stroke="none" width="2160" height="60" x="0" y="220"></rect><g transform="translate(588,407)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-4C" x="764" y="0"></use></g><g transform="translate(59,-391)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-76" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-67" x="1014" y="0"></use><g transform="translate(1057,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-4C" x="764" y="0"></use></g></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-29" x="10059" y="0"></use></g></g></g></g><g transform="translate(12175,-3602)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-44" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-46" x="1126" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-69" x="2516" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-3D" x="2401" y="0"></use><g transform="translate(3180,0)"><g transform="translate(397,0)"><rect stroke="none" width="5046" height="60" x="0" y="220"></rect><g transform="translate(60,823)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-6F" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-67" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-28" x="1279" y="0"></use><g transform="translate(1669,0)"><g transform="translate(120,0)"><rect stroke="none" width="2627" height="60" x="0" y="220"></rect><g transform="translate(60,465)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-6E" x="1667" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-2B" x="2267" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-31" x="3046" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-6E" x="1557" y="-488"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-29" x="4536" y="0"></use></g><g transform="translate(1439,-686)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-6F" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMAIN-67" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hh/blog/413261/&amp;usg=ALkJrhjGFhA5un0trLswC1BTigiN5ctcBQ#MJMATHI-4E" x="1279" y="0"></use></g></g></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">B</mi><mi mathvariant="normal">M</mi><mn>25</mn></mrow><mo>=</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>w</mi></munderover><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>k</mi><mo stretchy="false">)</mo><mo>⋅</mo><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">T</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub><mo>⋅</mo><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">I</mi><mi mathvariant="normal">D</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub></mrow><mrow><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">T</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub><mo>+</mo><mi>k</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>b</mi><mo>+</mo><mi>b</mi><mfrac><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">D</mi><mi mathvariant="normal">L</mi></mrow><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">D</mi><mi mathvariant="normal">L</mi></mrow></mrow></mfrac><mo stretchy="false">)</mo></mrow></mfrac><mspace linebreak="newline"></mspace><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">I</mi><mi mathvariant="normal">D</mi><mi mathvariant="normal">F</mi></mrow><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><mo stretchy="false">(</mo><mfrac><mrow><mi>N</mi><mo>−</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>n</mi></mfrac><mo stretchy="false">)</mo></mrow><mrow><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><mi>N</mi></mrow></mfrac></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">\mathrm{BM25} = \sum_{i=1}^w \frac{(1 + k) \cdot \mathrm{TF}_i \cdot \mathrm{IDF}_i}{\mathrm{TF}_i + k(1 - b + b \frac{\mathrm{DL}}{avg\mathrm{DL}})} \\ \mathrm{IDF}_i = \frac{\mathrm{log} (\frac{N - n + 1}{n})}{\mathrm{log} N}</script></p><br><br><h3> 2.4    </h3><br>       , : <br><br><ul><li> DFR (divergence from randomness), </li><li> IBS (information-based models), </li><li> LM Dirichlet, </li><li> Jelinek-Mercer. </li></ul><br><h3> 2.5    </h3><br>          ,   ,        .              ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br><h3> 2.6 Top k    </h3><br>            ,   .    ,       ,         . <br><br>     ,            .          <b>top k</b> . <br><br>       —  .    k,  k  <b>  *   </b> .           heap.       n*log(n)    k. <br><br>           . ,        ,          ,   10    12,    score    10        score  .        ,      n — (n*page size)  . <br><br><h3> 3.    </h3><br><h3> 3.1  </h3><br>        —   .         , . <br><br>      ,        :    ,        ,       .  ,    .             .     (     ,        ).            (merge). <br><br>         ,     ,       : <br><br><img src="https://habrastorage.org/webt/2c/ec/gx/2cecgxgu5eyuhtaffs50anmywoa.png" alt="image"><br><br>       .            ,       ,   , -     . <br><br><h3> 3.2   (megre) </h3><br>        —  .         «» —      .      ,      ,        (    ). <br><br><img src="https://habrastorage.org/webt/ey/yv/n9/eyyvn9msvqryhqm3lh_rh9o4vv8.png" alt="image"><br><br>     ,    ,   ,       .      : <br><br><ul><li>     , </li><li>      (,           2 ), </li><li>      (,        ). </li></ul><br><h3> 4.   </h3><br>         ,    ,           .         ,  -     (,            . .).   ,      ,       ,    . <br><br><img src="https://habrastorage.org/webt/m0/jy/od/m0jyodvmhfv6vz093nofc5axnmk.png" alt="image"><br><br><h3> 4.1    </h3><br>           (,  hh     ,   ),     .        . <br><br>    ,        ,    . -,     ,          . -,     ,          ,         . <br><br><h3> 4.2   </h3><br>           ,       .        ,            . <br><br>    ,       hh,  <i> </i> ,        ,   -    : <br><br><img src="https://habrastorage.org/webt/bq/mo/cb/bqmocbqmz-t3kuyhddye_d04iy0.png" alt="image"><br><br><h3> 5.  …    </h3><br>    ,      ,         ,    .   ,     :   , , ,      ,     ,         (highlight),   .      ,    ,        ,   top k . <br><br>     : <br><br><ul><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction to Information Retrieval</a>     </li><li>         lucene ( elasticsearch)  sphinx </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir les rapports d'Andrei Aksenov, par exemple </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">venez étudier à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'école de programmation hh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et écouter des conférences sur la recherche :)</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C'est tout, merci à tous pour votre attention, il est intéressant d'entendre vos commentaires et vos questions. </font></font><br><br><h3>  PS </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je voudrais exprimer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ma</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratitude à </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;">gdanschin</font></a><font style="vertical-align: inherit;"> pour </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;">m'avoir</font></a><font style="vertical-align: inherit;"> aidé à écrire cet article.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413261/">https://habr.com/ru/post/fr413261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413247/index.html">Pourquoi surveiller les systèmes de stockage?</a></li>
<li><a href="../fr413249/index.html">Écriture d'un module du noyau Linux: I2C</a></li>
<li><a href="../fr413251/index.html">Réaction en chaîne par polymérase et Vladivostok</a></li>
<li><a href="../fr413253/index.html">Richard Hamming: Chapitre 21. Fibre optique</a></li>
<li><a href="../fr413255/index.html">Richard Hamming: Chapitre 27. Données invalides</a></li>
<li><a href="../fr413265/index.html">Vers les bains avec IT</a></li>
<li><a href="../fr413267/index.html">10 qualités incontournables à noter pour un chef de produit débutant</a></li>
<li><a href="../fr413269/index.html">Comment les machines analysent le Big Data: une introduction aux algorithmes de clustering</a></li>
<li><a href="../fr413271/index.html">Pas de mots de passe: comment fonctionne le système d'authentification sur un registre distribué</a></li>
<li><a href="../fr413273/index.html">Gestion des besoins en produits informatiques au sein de l'entreprise</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>