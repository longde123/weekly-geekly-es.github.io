<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍❤️‍💋‍👨 👨‍👩‍👦‍👦 💺 Sedikit latihan pemrograman fungsional di Swift untuk pemula 📁 🤜 🧜🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingin memperkenalkan konsep Pemrograman Fungsional kepada pemula dengan cara paling sederhana, menyoroti beberapa kelebihannya dari banyak yang l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sedikit latihan pemrograman fungsional di Swift untuk pemula</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440722/"><img src="https://habrastorage.org/webt/r4/cx/wi/r4cxwi9bjlhswlncf4ru1uslm4q.png"><br><br>  Saya ingin memperkenalkan konsep <i>Pemrograman Fungsional kepada</i> pemula dengan cara paling sederhana, menyoroti beberapa kelebihannya dari banyak yang lain yang benar-benar akan membuat kode lebih mudah dibaca dan ekspresif.  Saya mengambil beberapa demo menarik untuk Anda yang berada di <code>Playground</code> on <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Github</a></b> . <br><br><h2>  Pemrograman Fungsional: Definisi </h2><br>  Pertama-tama, <i>Pemrograman Fungsional</i> bukan bahasa atau sintaksis, tetapi kemungkinan besar cara untuk memecahkan masalah dengan memecah proses kompleks menjadi yang lebih sederhana dan komposisi mereka selanjutnya.  Seperti namanya, " <i>Pemrograman Fungsional,</i> " unit komposisi untuk pendekatan ini adalah <i>fungsi</i> ;  dan tujuan dari <i>fungsi tersebut</i> adalah untuk menghindari perubahan status atau nilai di luar <code>scope)</code> . <br><br>  Di <code>Swift</code> World, ada semua kondisi untuk ini, karena <i>fungsi di</i> sini adalah sebagai peserta penuh dalam proses pemrograman sebagai <i>objek,</i> dan masalah <code>mutation</code> diselesaikan pada tingkat konsep JENIS <code>value</code> (struktur struktur dan <code><font color="#0000FF">enum</font></code> enumerasi) yang membantu mengelola mutabilitas ( <code>mutation</code> ) dan jelas mengomunikasikan bagaimana dan kapan ini bisa terjadi. <br><br>  Namun, <code>Swift</code> tidak sepenuhnya memahami bahasa <i>pemrograman Fungsional</i> , ia tidak memaksa Anda untuk <i>pemrograman Fungsional</i> , meskipun <code>Swift</code> mengakui keunggulan pendekatan <i>Fungsional</i> dan menemukan cara untuk menanamkannya. <br><br>  Dalam artikel ini, kami akan fokus pada penggunaan elemen <i>bawaan</i> dari <i>Pemrograman Fungsional</i> di <code>Swift</code> (yaitu, "di luar kotak") dan memahami bagaimana Anda dapat menggunakannya dengan nyaman dalam aplikasi Anda. <br><a name="habracut"></a><br><h2>  Pendekatan Imperatif dan Fungsional: Perbandingan </h2><br>  Untuk mengevaluasi Pendekatan <i>Fungsional</i> , mari kita bandingkan solusi untuk beberapa masalah sederhana dengan dua cara berbeda.  Solusi pertama adalah " <i>Imperatif,</i> " di mana kode mengubah keadaan di dalam program. <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//Imperative Approach var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] for i in 0..&lt;numbers.count { let timesTen = numbers[i] * 10 numbers[i] = timesTen } print(numbers) //[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</span></span></code> </pre><br>  Perhatikan bahwa kita memanipulasi nilai-nilai di dalam array yang dapat diubah yang bernama <code><font color="#0000FF">numbers</font></code> , dan kemudian mencetaknya ke konsol.  Melihat kode ini, cobalah untuk menjawab pertanyaan-pertanyaan berikut yang akan kita bahas dalam waktu dekat: <br><br><ol><li>  Apa yang ingin Anda capai dengan kode Anda? </li><li>  Apa yang terjadi jika <code>thread</code> lain mencoba mengakses array <code><font color="#0000FF">numbers</font></code> saat kode Anda berjalan? </li><li>  Apa yang terjadi jika Anda ingin memiliki akses ke nilai asli dalam array <code><font color="#0000FF">numbers</font></code> ? </li><li>  Seberapa andal kode ini dapat diuji? </li></ol><br>  Sekarang mari kita lihat pendekatan " <i>Fungsional</i> " alternatif: <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//Functional Approach let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] extension Array where Element == Int { func timesTen() -&gt; [Int] { var output = [Int]() for num in self { output.append(num * 10) } return output } } let result = numbers.timesTen() print(numbers) //[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] print(result) //[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</span></span></code> </pre><br>  Dalam potongan kode ini, kita mendapatkan hasil yang sama pada konsol, mendekati solusi untuk masalah dengan cara yang sangat berbeda.  Perhatikan bahwa kali ini array <code><font color="#0000FF">numbers</font></code> kita tidak dapat diubah berkat kata kunci <code><font color="#0000FF">let</font></code> .  Kami telah memindahkan proses mengalikan angka dari array <code><font color="#0000FF">numbers</font></code> ke metode <code><font color="#0000FF">timesTen()</font></code> , yang terletak di ekstensi <code><font color="#0000FF">extension</font></code> <code><font color="#0000FF">Array</font></code> .  Kami masih menggunakan <code><font color="#0000FF">for</font></code> dan memodifikasi variabel yang disebut <code><font color="#0000FF">output</font></code> , tetapi <code>scope</code> variabel ini hanya dibatasi oleh metode ini.  Demikian pula, argumen input kami diteruskan ke metode <code><font color="#0000FF">timesTen()</font></code> berdasarkan nilai ( <code>by value</code> ), yang memiliki cakupan yang sama dengan output variabel.  Metode <code><font color="#0000FF">timesTen()</font></code> dipanggil, dan kita dapat mencetak pada konsol array <code><font color="#0000FF">numbers</font></code> asli dan hasil array <code><font color="#0000FF">result</font></code> . <br>  Mari kita kembali ke 4 pertanyaan kita. <br><br>  <i>1. Apa yang ingin Anda capai dengan kode Anda?</i> <br><br>  Dalam contoh kami, kami melakukan tugas yang sangat sederhana dengan mengalikan angka dalam array <code><font color="#0000FF">numbers</font></code> dengan <code><font color="#0000FF">10</font></code> . <br><br>  Dengan pendekatan <i>imperatif</i> , untuk mendapatkan output, Anda harus berpikir seperti komputer, mengikuti instruksi dalam <code><font color="#0000FF">for</font></code> loop.  Dalam hal ini, kode menunjukkan <code></code> Anda mencapai hasil.  Dengan Pendekatan <i>Fungsional</i> , " <code></code> " "dibungkus" dalam metode <code><font color="#0000FF">timesTen()</font></code> .  Asalkan metode ini diterapkan di tempat lain, Anda benar-benar hanya dapat melihat ekspresi <code><font color="#0000FF">numbers.timesTen()</font></code> .  Kode semacam itu dengan jelas menunjukkan <code></code> dicapai oleh kode ini, dan bukan <code></code> tugas tersebut diselesaikan.  Ini disebut <i>Pemrograman Deklaratif</i> , dan mudah ditebak mengapa pendekatan semacam itu menarik.  Pendekatan <i>imperatif</i> membuat pengembang memahami <code></code> kode bekerja untuk menentukan <code></code> harus ia lakukan.  Pendekatan <i>fungsional</i> dibandingkan dengan pendekatan <i>Imperatif</i> jauh lebih "ekspresif" dan memberikan pengembang kesempatan mewah untuk hanya berasumsi bahwa metode melakukan apa yang diklaimnya harus dilakukan!  (Jelas, asumsi ini hanya berlaku untuk kode pra-diverifikasi). <br><br>  <i>2. Apa yang terjadi jika <code>thread</code> lain mencoba mengakses array <code><font color="#0000FF">numbers</font></code> saat kode Anda berjalan?</i> <br><br>  Contoh-contoh yang disajikan di atas ada dalam ruang yang sepenuhnya terisolasi, meskipun dalam lingkungan multi-utas yang kompleks, sangat mungkin bahwa dua <code>threads</code> mencoba mengakses sumber daya yang sama secara bersamaan.  Dalam kasus pendekatan <i>Imperatif</i> , mudah untuk melihat bahwa ketika <code>thread</code> lain memiliki akses ke array <code><font color="#0000FF">numbers</font></code> dalam proses menggunakannya, hasilnya akan ditentukan oleh urutan di mana <code>threads</code> mengakses array <code><font color="#0000FF">numbers</font></code> .  Situasi ini disebut <code>race condition</code> dan dapat menyebabkan perilaku yang tidak terduga dan bahkan ketidakstabilan dan crash aplikasi. <br><br>  Sebagai perbandingan, Pendekatan <i>Fungsional</i> tidak memiliki "efek samping".  Dengan kata lain, output dari metode <code><font color="#0000FF">output</font></code> tidak mengubah nilai yang tersimpan di sistem kami dan hanya ditentukan oleh input.  Dalam hal ini, setiap utas ( <code>threads</code> ) yang memiliki akses ke array <code><font color="#0000FF">numbers</font></code> akan SELALU menerima nilai yang sama dan perilakunya akan stabil dan dapat diprediksi. <br><br>  3. Apa yang terjadi jika Anda ingin memiliki akses ke nilai asli yang disimpan dalam array <code><font color="#0000FF">numbers</font></code> ? <br><br>  Ini adalah kelanjutan dari diskusi kami tentang "efek samping".  Jelas, perubahan status tidak dilacak.  Oleh karena itu, dengan pendekatan <i>Imperatif</i> , kami kehilangan status awal array <code><font color="#0000FF">numbers</font></code> kami selama proses konversi.  Solusi kami, berdasarkan pada Pendekatan <i>Fungsional</i> , menyimpan array <code><font color="#0000FF">numbers</font></code> asli dan menghasilkan array <code><font color="#0000FF">result</font></code> baru dengan properti yang diinginkan pada output.  Itu meninggalkan array <code><font color="#0000FF">numbers</font></code> asli utuh dan cocok untuk diproses di masa depan. <br><br>  4. Seberapa andal kode ini dapat diuji? <br><br>  Karena pendekatan <i>Fungsional</i> menghancurkan semua "efek samping", fungsi yang diuji sepenuhnya berada di dalam metode.  Input dari metode ini TIDAK PERNAH akan mengalami perubahan, sehingga Anda dapat menguji beberapa kali menggunakan siklus sebanyak yang Anda suka, dan Anda akan SELALU mendapatkan hasil yang sama.  Dalam hal ini, pengujian sangat mudah.  Sebagai perbandingan, menguji solusi <i>Imperatif</i> dalam satu lingkaran akan mengubah awal entri dan Anda akan mendapatkan hasil yang sangat berbeda setelah setiap iterasi. <br><br><h2>  Ringkasan Manfaat </h2><br>  Seperti yang kita lihat dari contoh yang sangat sederhana, Pendekatan <i>Fungsional</i> adalah hal yang keren jika Anda berurusan dengan Model Data karena: <br><br><ul><li>  Itu deklaratif </li><li>  Ini memperbaiki masalah terkait utas seperti <code>race condition</code> dan kebuntuan </li><li>  Ini membuat keadaan tidak berubah, yang dapat digunakan untuk transformasi selanjutnya. </li><li>  Mudah untuk diuji. </li></ul><br>  Mari kita melangkah lebih jauh dalam mempelajari Pemrograman <i>Fungsional</i> di <code>Swift</code> .  Ini mengasumsikan bahwa "aktor" utama adalah fungsi, dan mereka harus menjadi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">objek utama dari kelas pertama</a> . <br><br><h2>  Fungsi Kelas Pertama dan Fungsi Orde Tinggi </h2><br>  Agar suatu fungsi menjadi kelas satu, ia harus memiliki kemampuan untuk dinyatakan sebagai variabel.  Ini memungkinkan Anda untuk mengelola fungsi sebagai JENIS data normal dan sekaligus menjalankannya.  Untungnya, di <code>Swift</code> fungsi adalah objek dari kelas pertama, yaitu, mereka didukung dengan meneruskannya sebagai argumen ke fungsi lain, mengembalikannya sebagai hasil dari fungsi lain, menugaskannya ke variabel, atau menyimpannya dalam struktur data. <br><br>  Karena itu, kami memiliki fungsi lain di <code>Swift</code> - fungsi tingkat tinggi yang didefinisikan sebagai fungsi yang menggunakan fungsi lain sebagai argumen atau mengembalikan fungsi.  Ada banyak dari mereka: <code><font color="#0000FF">map</font></code> , <code><font color="#0000FF">filter</font></code> , <code><font color="#0000FF">reduce</font></code> , <code><font color="#0000FF">forEach</font></code> , <code><font color="#0000FF">flatMap</font></code> , <code><font color="#0000FF">compactMap</font></code> , <code><font color="#0000FF">sorted</font></code> , dll.  Contoh paling umum dari fungsi tingkat tinggi adalah <code><font color="#0000FF">map</font></code> , <code><font color="#0000FF">filter</font></code> dan <code><font color="#0000FF">reduce</font></code> .  Mereka tidak global, mereka semua "melekat" pada JENIS-JENIS tertentu.  Mereka bekerja pada semua JENIS <code><font color="#0000FF">Sequence</font></code> , termasuk <code><font color="#0000FF">Collection</font></code> , yang diwakili oleh struktur data <code>Swift</code> seperti <code><font color="#0000FF">Array</font></code> , <code><font color="#0000FF">Dictionary</font></code> dan <code><font color="#0000FF">Set</font></code> .  Di <code>Swift 5</code> , fungsi tingkat tinggi juga berfungsi dengan TYPE yang sama sekali baru - <code><font color="#0000FF">Result</font></code> . <br><br><h2> <code><font color="#0000FF">map(_:)</font></code> </h2> <br>  Dalam <code>Swift</code> <code><font color="#0000FF">map(_:)</font></code> mengambil fungsi sebagai parameter dan mengubah nilai-nilai <code></code> tertentu sesuai dengan fungsi ini.  Misalnya, menerapkan <code><font color="#0000FF">map(_:)</font></code> ke array nilai <code><font color="#0000FF">Array</font></code> , kami menerapkan fungsi parameter untuk setiap elemen array asli dan kami mendapatkan array <code><font color="#0000FF">Array</font></code> , tetapi juga nilai yang dikonversi. <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//Functional Approach let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] func timesTen(_ x:Int) -&gt; Int { return x * 10 } let result = numbers.map (timesTen) print(numbers) //[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] print(result) //[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</span></span></code> </pre><br>  Dalam kode di atas, kami membuat fungsi <code><font color="#0000FF">timesTen (_:Int)</font></code> , yang mengambil nilai <code><font color="#0000FF">Int</font></code> integer dan mengembalikan nilai integer <code><font color="#0000FF">Int</font></code> dikalikan dengan <code><font color="#0000FF">10</font></code> , dan menggunakannya sebagai parameter input ke <code><font color="#0000FF">map(_:)</font></code> urutan tinggi kami <code><font color="#0000FF">map(_:)</font></code> fungsi, menerapkannya ke array kami <code><font color="#0000FF">numbers</font></code> .  Kami mendapatkan hasil yang kami butuhkan di array <code><font color="#0000FF">result</font></code> . <br><br>  Nama fungsi parameter kali. <code><font color="#0000FF">timesTen</font></code> untuk fungsi <code><font color="#0000FF">timesTen</font></code> tinggi seperti <code><font color="#0000FF">map(_:)</font></code> tidak masalah, <code></code> parameter input dan nilai kembali penting, yaitu tanda tangan <code><font color="#0000FF">(Int) -&gt; Int</font></code> parameter input fungsi.  Oleh karena itu, kita dapat menggunakan fungsi anonim di <code><font color="#0000FF">map(_:)</font></code> - closure - dalam bentuk apa pun, termasuk yang dengan nama argumen pendek <code><font color="#0000FF">$0</font></code> , <code><font color="#0000FF">$1</font></code> , dll. <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//Functional Approach let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] let result = numbers.map { $0 * 10 } print(numbers) //[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] print(result) //[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</span></span></code> </pre><br>  Jika kita melihat fungsi <code><font color="#0000FF">map(_ :)</font></code> untuk <code><font color="#0000FF">Array</font></code> , itu mungkin terlihat seperti ini: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span><span class="hljs-function">&lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> transform: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(Element)</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">T</span></span>) -&gt; [<span class="hljs-type"><span class="hljs-type">T</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> returnValue = [<span class="hljs-type"><span class="hljs-type">T</span></span>]() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { returnValue.append(transform(item)) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> returnValue }</code> </pre><br>  Ini adalah kode penting yang sudah tidak asing lagi bagi kami, tetapi ini bukan lagi masalah pengembang, ini masalah <code>Apple</code> , masalah <code>Swift</code> .  Implementasi fungsi <code><font color="#0000FF">map(_:)</font></code> tingkat tinggi <code><font color="#0000FF">map(_:)</font></code> dioptimalkan oleh <code>Apple</code> dalam hal kinerja, dan kami, para pengembang, dijamin fungsionalitas <code><font color="#0000FF">map(_:)</font></code> , jadi kami hanya dapat mengekspresikan dengan benar dengan argumen fungsi <code><font color="#0000FF">transform</font></code> <code></code> kami inginkan tanpa khawatir tentang <code></code> itu akan diterapkan.  Sebagai hasilnya, kami mendapatkan kode yang dapat dibaca dengan sempurna dalam bentuk satu baris, yang akan bekerja lebih baik dan lebih cepat. <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//Functional Approach let possibleNumbers = ["1", "2", "three", "///4///", "5"] let mapped = possibleNumbers.map {str in Int(str) } print (mapped) // [Optional(1), Optional(2), nil, nil, Optional(5)]</span></span></code> </pre><br>  <code></code> dikembalikan oleh fungsi parameter mungkin tidak bersamaan dengan <code></code> elemen dalam koleksi asli. <br><br>  Dalam kode di atas, kami memiliki bilangan bulat yang <code><font color="#0000FF">possibleNumbers</font></code> , Bilangan, diwakili sebagai string, dan kami ingin mengonversinya menjadi bilangan bulat dari <code></code> <code><font color="#0000FF">Int</font></code> , menggunakan <code><font color="#0000FF">Int(_ :String)</font></code> inisialisasi <code>failable</code> <code><font color="#0000FF">Int(_ :String)</font></code> diwakili oleh penutup <code><font color="#0000FF">{ str in Int(str) }</font></code> .  Kami melakukan ini menggunakan <code><font color="#0000FF">map(_:)</font></code> dan mendapatkan array yang <code><font color="#0000FF">mapped</font></code> dari <code></code> <code><font color="#0000FF">Optional</font></code> sebagai output: <br><br><img src="https://habrastorage.org/webt/43/mg/hd/43mghd5aphvgnytu06eos4zhxos.png"><br><br>  Kami tidak <code></code> mengonversi <code></code> elemen dari array kami yang mungkinNomor ke bilangan bulat, sebagai akibatnya, satu bagian menerima nilai <code><font color="#0000FF">nil</font></code> , menunjukkan ketidakmungkinan mengkonversi <code><font color="#0000FF">String</font></code> ke <code><font color="#0000FF">Int</font></code> integer, dan bagian lainnya berubah menjadi <code><font color="#0000FF">Optionals</font></code> , yang memiliki nilai: <br><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (mapped) <span class="hljs-comment"><span class="hljs-comment">// [Optional(1), Optional(2), nil, nil, Optional(5)]</span></span></code> </pre><br><h2> <code><font color="#0000FF">compactMap(_ :)</font></code> </h2> <br>  Jika fungsi parameter yang diteruskan ke fungsi orde lebih tinggi memiliki nilai <code><font color="#0000FF">Optional</font></code> pada output, maka mungkin lebih berguna untuk menggunakan fungsi orde lain yang lebih tinggi, serupa artinya - <code><font color="#0000FF">compactMap(_ :)</font></code> , yang melakukan hal yang sama seperti <code><font color="#0000FF">map(_:)</font></code> , tetapi juga "memperluas" nilai yang diterima pada output <code><font color="#0000FF">Optional</font></code> dan menghilangkan nilai <code><font color="#0000FF">nil</font></code> dari koleksi. <br><br><img src="https://habrastorage.org/webt/ie/a8/ls/iea8lshgmocoqytj8horz--kx0k.png"><br><br>  Dalam hal ini, kami mendapatkan array TYPE <code><font color="#0000FF">[Int]</font></code> <code><font color="#0000FF">compactMapped</font></code> , tetapi mungkin lebih kecil: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> possibleNumbers = [<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-string"><span class="hljs-string">"three"</span></span>, <span class="hljs-string"><span class="hljs-string">"///4///"</span></span>, <span class="hljs-string"><span class="hljs-string">"5"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> compactMapped = possibleNumbers.compactMap(<span class="hljs-type"><span class="hljs-type">Int</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (compactMapped) <span class="hljs-comment"><span class="hljs-comment">// [1, 2, 5]</span></span></code> </pre><br><img src="https://habrastorage.org/webt/wl/wf/ae/wlwfaep3tzyxrennftqqdtwezb8.png"><br><br>  Setiap kali Anda menggunakan <code><font color="#0000FF">init?()</font></code> Initializer sebagai fungsi transformasi, Anda harus menggunakan <code><font color="#0000FF">compactMap(_ :)</font></code> : <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Validate URLs let strings = ["https://demo0989623.mockable.io/car/1", "https://i.imgur.com/Wm1xcNZ.jpg"] let validateURLs = strings.compactMap(URL.init) // Separate Numbers and Operations let mathString: String = "12-37*2/5+44" let numbers1 = mathString.components(separatedBy: ["-", "*", "+", "/"]).compactMap(Int.init) print(numbers1) // [12, 37, 2, 5, 44]</span></span></code> </pre><br>  Saya harus mengatakan bahwa ada lebih dari cukup alasan untuk menggunakan fungsi <code><font color="#0000FF">compactMap(_ :)</font></code> tingkat tinggi <code><font color="#0000FF">compactMap(_ :)</font></code> .  <code>Swift</code> “loves” Nilai <code><font color="#0000FF">Optional</font></code> , mereka dapat diperoleh tidak hanya dengan menggunakan <code><font color="#0000FF">init?()</font></code> “ <code>failable</code> ” <code><font color="#0000FF">init?()</font></code> Initializer, tetapi juga dengan menggunakan <code><font color="#0000FF">as?</font></code>  <code></code> "Casting": <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> views = [innerView,shadowView,logoView] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> imageViews = views.compactMap{$<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">UIImageView</span></span>}</code> </pre><br>  ... dan <code><font color="#0000FF">try?</font></code>  saat memproses kesalahan yang dilemparkan oleh beberapa metode.  Saya harus mengatakan bahwa <code>Apple</code> khawatir bahwa penggunaan <code><font color="#0000FF">try?</font></code>  sangat sering mengarah ke <code><font color="#0000FF">Optional</font></code> ganda dan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Swift 5</a> sekarang hanya menyisakan satu level <code><font color="#0000FF">Optional</font></code> setelah <code><font color="#0000FF">try?</font></code>  . <br><br>  Ada satu lagi fungsi serupa dalam nama <code><font color="#0000FF">flatMap(_ :)</font></code> orde tinggi <code><font color="#0000FF">flatMap(_ :)</font></code> , yang sedikit lebih rendah. <br><br>  Terkadang, untuk menggunakan <code><font color="#0000FF">map(_:)</font></code> fungsi tingkat tinggi <code><font color="#0000FF">map(_:)</font></code> , berguna untuk menggunakan metode <code><font color="#0000FF">zip (_:, _:)</font></code> untuk membuat urutan pasangan dari dua urutan yang berbeda. <br><br>  Misalkan kita memiliki <code><font color="#0000FF">view</font></code> di mana beberapa titik diwakili, terhubung bersama dan membentuk garis putus-putus: <br><br><img src="https://habrastorage.org/webt/gj/ut/_3/gjut_3xu92asnbvjvibucndse5o.png"><br><br>  Kita perlu membangun garis terputus lain yang menghubungkan titik tengah segmen dari garis terputus asli: <br><br><img src="https://habrastorage.org/webt/zv/hr/ke/zvhrkexsungckflo4orcpnkkm7e.png"><br><br>  Untuk menghitung titik tengah segmen, kita harus memiliki koordinat dua titik: arus dan berikutnya.  Untuk melakukan ini, kita dapat membuat urutan yang terdiri dari pasangan poin - saat ini dan selanjutnya - menggunakan metode <code><font color="#0000FF">zip (_:, _:)</font></code> <code><font color="#0000FF">points.dropFirst()</font></code> <code><font color="#0000FF">zip (_:, _:)</font></code> , di mana kita akan menggunakan array dari titik awal dan array dari <code><font color="#0000FF">points.dropFirst()</font></code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pairs = <span class="hljs-built_in"><span class="hljs-built_in">zip</span></span> (points,points.<span class="hljs-built_in"><span class="hljs-built_in">dropFirst</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> averagePoints = pairs.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { <span class="hljs-type"><span class="hljs-type">CGPoint</span></span>(x: ($<span class="hljs-number"><span class="hljs-number">0</span></span>.x + $<span class="hljs-number"><span class="hljs-number">1</span></span>.x) / <span class="hljs-number"><span class="hljs-number">2</span></span>, y: ($<span class="hljs-number"><span class="hljs-number">0</span></span>.y + $<span class="hljs-number"><span class="hljs-number">1</span></span>.y) / <span class="hljs-number"><span class="hljs-number">2</span></span> )}</code> </pre><br>  Memiliki urutan seperti itu, kami sangat mudah menghitung titik tengah menggunakan <code><font color="#0000FF">map(_:)</font></code> fungsi tingkat tinggi <code><font color="#0000FF">map(_:)</font></code> dan menampilkannya pada grafik. <br><br><h2> <code><font color="#0000FF">filter (_:)</font></code> </h2> <br>  Di <code>Swift</code> , <code><font color="#0000FF">filter (_:)</font></code> fungsi urutan tinggi <code><font color="#0000FF">filter (_:)</font></code> tersedia untuk sebagian besar <code></code> yang menyediakan fungsi <code><font color="#0000FF">map(_:)</font></code> .  Anda dapat memfilter urutan <code><font color="#0000FF">Sequence</font></code> apa pun dengan <code><font color="#0000FF">filter (_:)</font></code> , ini jelas!  Metode <code><font color="#0000FF">filter (_:)</font></code> mengambil fungsi lain sebagai parameter, yang merupakan kondisi untuk setiap elemen dari urutan, dan jika kondisinya terpenuhi, maka elemen tersebut dimasukkan dalam hasil, dan jika tidak, itu tidak termasuk.  "Fungsi lain" ini mengambil nilai tunggal - elemen dari urutan <code><font color="#0000FF">Sequence</font></code> - dan mengembalikan <code><font color="#0000FF">Bool</font></code> , predikat yang disebut. <br><br>  Sebagai contoh, untuk array <code><font color="#0000FF">Array</font></code> , <code><font color="#0000FF">filter (_:)</font></code> fungsi orde tinggi <code><font color="#0000FF">filter (_:)</font></code> menerapkan fungsi predikat dan mengembalikan array lain yang hanya terdiri dari elemen-elemen array asli di mana fungsi predikat input mengembalikan <code><font color="#0000FF">true</font></code> . <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//Functional Approach let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] let filted = numbers.filter{$0 % 2 == 0} //[2, 4, 6, 8, 10]</span></span></code> </pre><br>  Di sini, <code><font color="#0000FF">filter (_:)</font></code> fungsi urutan tinggi <code><font color="#0000FF">filter (_:)</font></code> mengambil setiap elemen dari array <code><font color="#0000FF">numbers</font></code> (diwakili oleh <code><font color="#0000FF">$0</font></code> ) dan memeriksa untuk melihat apakah elemen ini adalah bilangan genap.  Jika ini adalah bilangan genap, maka elemen-elemen dari array <code><font color="#0000FF">numbers</font></code> termasuk dalam array yang baru, jika tidak.  Kami dalam bentuk deklaratif menginformasikan program <code></code> ingin kami dapatkan alih-alih peduli <code></code> kita harus melakukannya. <br><br>  Saya akan memberikan contoh lain menggunakan <code><font color="#0000FF">filter (_:)</font></code> fungsi tingkat tinggi <code><font color="#0000FF">filter (_:)</font></code> untuk mendapatkan hanya <code><font color="#0000FF">20</font></code> angka Fibonacci pertama dengan nilai <code><font color="#0000FF">&lt; 4000</font></code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fibonacci = sequence(first: (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), next: { ($<span class="hljs-number"><span class="hljs-number">1</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span> + $<span class="hljs-number"><span class="hljs-number">1</span></span>) }) .<span class="hljs-keyword"><span class="hljs-keyword">prefix</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{$<span class="hljs-number"><span class="hljs-number">0.0</span></span>} .<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> {$<span class="hljs-number"><span class="hljs-number">0</span></span> % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; $<span class="hljs-number"><span class="hljs-number">0</span></span> &lt; <span class="hljs-number"><span class="hljs-number">4000</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (fibonacci) <span class="hljs-comment"><span class="hljs-comment">// [0, 2, 8, 34, 144, 610, 2584]</span></span></code> </pre><br>  Kami mendapatkan urutan tupel yang terdiri dari dua elemen dari urutan Fibonacci: yang ke-n dan (ke-1): <br><br><pre> <code class="swift hljs">(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) …</code> </pre><br>  Untuk pemrosesan lebih lanjut, kami membatasi jumlah elemen ke dua puluh elemen pertama menggunakan <code><font color="#0000FF">prefix (20)</font></code> dan mengambil elemen <code><font color="#0000FF">0</font></code> - <code><font color="#0000FF">0</font></code> dari tupel yang dihasilkan menggunakan <code><font color="#0000FF">map {$0.0 }</font></code> , yang akan sesuai dengan urutan Fibonacci mulai dengan <code><font color="#0000FF">0</font></code> : <br><br><pre> <code class="swift hljs"><span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">21</span></span>, <span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">55</span></span>, <span class="hljs-number"><span class="hljs-number">89</span></span>, <span class="hljs-number"><span class="hljs-number">144</span></span>, <span class="hljs-number"><span class="hljs-number">233</span></span>, <span class="hljs-number"><span class="hljs-number">377</span></span>, <span class="hljs-number"><span class="hljs-number">610</span></span>, <span class="hljs-number"><span class="hljs-number">987</span></span>, <span class="hljs-number"><span class="hljs-number">1597</span></span>, <span class="hljs-number"><span class="hljs-number">2584</span></span>,...</code> </pre><br>  Kita bisa mengambil elemen <code><font color="#0000FF">1</font></code> dari tuple yang terbentuk menggunakan <code><font color="#0000FF">map {$0.1 }</font></code> , yang akan sesuai dengan urutan Fibonacci dimulai dengan <code><font color="#0000FF">1</font></code> : <br><br><pre> <code class="swift hljs"><span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">21</span></span>, <span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">55</span></span>, <span class="hljs-number"><span class="hljs-number">89</span></span>, <span class="hljs-number"><span class="hljs-number">144</span></span>, <span class="hljs-number"><span class="hljs-number">233</span></span>, <span class="hljs-number"><span class="hljs-number">377</span></span>, <span class="hljs-number"><span class="hljs-number">610</span></span>, <span class="hljs-number"><span class="hljs-number">987</span></span>, <span class="hljs-number"><span class="hljs-number">1597</span></span>, <span class="hljs-number"><span class="hljs-number">2584</span></span>,...</code> </pre><br>  Kami mendapatkan elemen yang kami butuhkan dengan bantuan <code><font color="#0000FF">filter {$0 % 2 == 0 &amp;&amp; $0 &lt; 4000}</font></code> fungsi orde tinggi <code><font color="#0000FF">filter {$0 % 2 == 0 &amp;&amp; $0 &lt; 4000}</font></code> , yang mengembalikan array elemen urutan yang memenuhi predikat yang diberikan.  Dalam kasus kami, ini akan menjadi array bilangan bulat <code><font color="#0000FF">[Int]</font></code> : <br><br><pre> <code class="swift hljs">[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">144</span></span>, <span class="hljs-number"><span class="hljs-number">610</span></span>, <span class="hljs-number"><span class="hljs-number">2584</span></span>]</code> </pre><br>  Ada contoh berguna lain menggunakan <code><font color="#0000FF">filter (_:)</font></code> untuk <code><font color="#0000FF">Collection</font></code> . <br><br>  Saya dihadapkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">dengan satu masalah nyata</a> , ketika Anda memiliki berbagai <code><font color="#0000FF">images</font></code> yang ditampilkan menggunakan <code><font color="#0000FF">CollectionView</font></code> , dan menggunakan teknologi <code>Drag &amp; Drop</code> Anda dapat mengumpulkan sejumlah besar gambar dan memindahkannya ke mana-mana, termasuk memindahkannya ke " tempat sampah. " <br><br><img src="https://habrastorage.org/webt/0s/-u/ks/0s-ukstskzfumukk9geirokdl-w.png"><br><br>  Dalam hal ini, array indeks yang <code><font color="#0000FF">removedIndexes</font></code> dibuang ke "tempat sampah" sudah diperbaiki, dan Anda perlu membuat array gambar baru, kecuali yang indeksnya berada dalam array yang <code><font color="#0000FF">removedIndexes</font></code> .  Misalkan kita memiliki array <code><font color="#0000FF">images</font></code> integer yang meniru gambar, dan array indeks integer ini <code><font color="#0000FF">removedIndexes</font></code> yang perlu dihapus.  Kami akan menggunakan <code><font color="#0000FF">filter (_:)</font></code> untuk menyelesaikan masalah kami: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> images = [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> removedIndexes = [<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> images1 = images .enumerated() .<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> { !removedIndexes.<span class="hljs-built_in"><span class="hljs-built_in">contains</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>.offset) } .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { $<span class="hljs-number"><span class="hljs-number">0</span></span>.element } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (images1) <span class="hljs-comment"><span class="hljs-comment">// [22, 14, 16, 9]</span></span></code> </pre><br>  Metode <code><font color="#0000FF">enumerated()</font></code> mengembalikan urutan tupel yang terdiri dari indeks <code><font color="#0000FF">offset</font></code> dan nilai <code><font color="#0000FF">element</font></code> array.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemudian kami menerapkan filter </font></font><code><font color="#0000FF">filter</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke urutan tupel yang dihasilkan, hanya menyisakan mereka yang indeksnya </font></font><code><font color="#0000FF">$0.offset</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak terkandung dalam array </font></font><code><font color="#0000FF">removedIndexes</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Langkah selanjutnya, kita memilih nilai dari tuple </font></font><code><font color="#0000FF">$0.element</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mendapatkan array yang kita butuhkan </font></font><code><font color="#0000FF">images1</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h2> <code><font color="#0000FF">reduce (_:, _:)</font></code> </h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode ini </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juga tersedia untuk sebagian besar </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang tersedia </font></font><code><font color="#0000FF">map(_:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">metode </font></font><code><font color="#0000FF">filter (_:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Metode </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"runtuh" ​​urutan </font></font><code><font color="#0000FF">Sequence</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke nilai akumulasi tunggal dan memiliki dua parameter. </font><font style="vertical-align: inherit;">Parameter pertama adalah nilai akumulasi awal, dan parameter kedua adalah fungsi yang menggabungkan nilai akumulasi dengan elemen urutan </font></font><code><font color="#0000FF">Sequence</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk mendapatkan nilai akumulasi baru. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fungsi parameter input diterapkan ke setiap elemen dari urutan </font></font><code><font color="#0000FF">Sequence</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, satu demi satu, hingga mencapai akhir dan menciptakan nilai akumulasi akhir.</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sum = <span class="hljs-type"><span class="hljs-type">Array</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>...<span class="hljs-number"><span class="hljs-number">100</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, +)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah contoh sepele klasik menggunakan fungsi urutan yang lebih tinggi </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- menghitung jumlah elemen array </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="swift hljs">    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> +<span class="hljs-number"><span class="hljs-number">1</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">6</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span> . . . . . . . . . . . . . . . . . . . <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">4950</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">4950</span></span> + <span class="hljs-number"><span class="hljs-number">100</span></span> = <span class="hljs-number"><span class="hljs-number">5050</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan menggunakan fungsi ini, </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kita dapat dengan mudah menghitung jumlah angka Fibonacci yang memenuhi kondisi tertentu:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fibonacci = sequence(first: (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), next: { ($<span class="hljs-number"><span class="hljs-number">1</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span> + $<span class="hljs-number"><span class="hljs-number">1</span></span>) }) .<span class="hljs-keyword"><span class="hljs-keyword">prefix</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{$<span class="hljs-number"><span class="hljs-number">0.0</span></span>} .<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> {$<span class="hljs-number"><span class="hljs-number">0</span></span> % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; $<span class="hljs-number"><span class="hljs-number">0</span></span> &lt; <span class="hljs-number"><span class="hljs-number">4000</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (fibonacci) <span class="hljs-comment"><span class="hljs-comment">// [0, 2, 8, 34, 144, 610, 2584] print(fibonacci.reduce(0,+)) // 3382</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi ada aplikasi yang lebih menarik dari fungsi urutan yang lebih tinggi </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, kita dapat dengan sangat sederhana dan ringkas menentukan parameter yang sangat penting untuk </font></font><code><font color="#0000FF">UIScrollView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ukuran area "yang dapat digulir" </font></font><code><font color="#0000FF">contentSize</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- berdasarkan ukurannya </font></font><code><font color="#0000FF">subviews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> scrollView = <span class="hljs-type"><span class="hljs-type">UIScrollView</span></span>() scrollView.addSubview(<span class="hljs-type"><span class="hljs-type">UIView</span></span>(frame: <span class="hljs-type"><span class="hljs-type">CGRect</span></span>(x: <span class="hljs-number"><span class="hljs-number">300.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">0.0</span></span>, width: <span class="hljs-number"><span class="hljs-number">200</span></span>, height: <span class="hljs-number"><span class="hljs-number">300</span></span>))) scrollView.addSubview(<span class="hljs-type"><span class="hljs-type">UIView</span></span>(frame: <span class="hljs-type"><span class="hljs-type">CGRect</span></span>(x: <span class="hljs-number"><span class="hljs-number">100.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">0.0</span></span>, width: <span class="hljs-number"><span class="hljs-number">300</span></span>, height: <span class="hljs-number"><span class="hljs-number">600</span></span>))) scrollView.contentSize = scrollView.subviews .<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>(<span class="hljs-type"><span class="hljs-type">CGRect</span></span>.zero,{$<span class="hljs-number"><span class="hljs-number">0</span></span>.union($<span class="hljs-number"><span class="hljs-number">1</span></span>.frame)}) .size <span class="hljs-comment"><span class="hljs-comment">// (500.0, 600.0)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam demo ini, nilai akumulasi adalah </font></font><code></code> <code><font color="#0000FF">GCRect</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan operasi akumulasi adalah operasi menggabungkan </font></font><code><font color="#0000FF">union</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">persegi panjang yang adalah </font></font><code><font color="#0000FF">frame</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">milik kita </font></font><code><font color="#0000FF">subviews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terlepas dari kenyataan bahwa fungsi tingkat tinggi </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengasumsikan karakter akumulatif, ia dapat digunakan dalam perspektif yang sama sekali berbeda. </font><font style="vertical-align: inherit;">Misalnya, untuk membagi tupel menjadi bagian-bagian dalam array tupel:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Separate Tuples let arr = [("one", 1), ("two", 2), ("three", 3), ("four", 4)] let (arr1, arr2) = arr.reduce(([], [])) { ($0.0 + [$1.0], $0.1 + [$1.1]) } print(arr1) // ["one", "two", "three", "four"] print(arr2) // [1, 2, 3, 4]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swift </font></font><code>4.2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memperkenalkan jenis baru fungsi orde tinggi </font></font><code><font color="#0000FF">reduce (into:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Metode </font></font><code><font color="#0000FF">reduce (into:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini lebih disukai dalam efisiensi dibandingkan dengan metode </font></font><code><font color="#0000FF">reduce (:, :)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika </font></font><code>COW (copy-on-write)</code> <code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, misalnya, </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font><font style="vertical-align: inherit;">digunakan sebagai struktur yang dihasilkan </font></font><code><font color="#0000FF">Dictionary</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini dapat digunakan secara efektif untuk menghapus nilai yang cocok dalam array bilangan bulat:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Remove duplicates let arrayInt = [1,1,2,6,6,7,2,9,7].reduce(into: []) { !$0.contains($1) ? $0.append($1) : () } // [1, 2, 6, 7, 9]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... atau ketika menghitung jumlah elemen yang berbeda dalam array: </font></font><br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Count equal elements in array let arrayIntCount = [1,1,2,2,6,6,7,2,9,7].reduce(into: [:]) { counts, letter in counts[letter, default: 0] += 1 } // [6: 2, 9: 1, 1: 2, 2: 3, 7: 2]</span></span></code> </pre><br><h2> <code><font color="#0000FF">flatMap (_:)</font></code> </h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sebelum beralih ke fungsi tingkat tinggi ini, mari kita lihat demo yang sangat sederhana. </font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> maybeNumbers = [<span class="hljs-string"><span class="hljs-string">"42"</span></span>, <span class="hljs-string"><span class="hljs-string">"7"</span></span>, <span class="hljs-string"><span class="hljs-string">"three"</span></span>, <span class="hljs-string"><span class="hljs-string">"///4///"</span></span>, <span class="hljs-string"><span class="hljs-string">"5"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstNumber = maybeNumbers.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> (<span class="hljs-type"><span class="hljs-type">Int</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>).first</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita menjalankan kode ini untuk mengeksekusi </font></font><code>Playground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka semuanya terlihat baik, dan kita </font></font><code><font color="#0000FF">firstNumber</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah sama </font></font><code><font color="#0000FF">42</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/ld/wu/t6/ldwut6x-1iu4yxapphmpzcyamj4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi, jika Anda tidak tahu, </font></font><code>Playground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sering menyembunyikan yang benar </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, khususnya </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konstanta </font></font><code><font color="#0000FF">firstNumber</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sebenarnya, konstanta </font></font><code><font color="#0000FF">firstNumber</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memiliki </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dua </font><font style="vertical-align: inherit;">hal </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/v9/0k/xy/v90kxymnnsd_cxv-y4pznc0yj5s.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini karena </font></font><code><font color="#0000FF">map (Int.init)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada output ia membentuk sebuah array </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari nilai-nilai TYPE </font></font><code><font color="#0000FF">[Int?]</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena tidak setiap baris </font></font><code><font color="#0000FF">String</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat dikonversi ke </font></font><code><font color="#0000FF">Int</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan penginisialisasi </font></font><code><font color="#0000FF">Int.int</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah "jatuh" ( </font></font><code>failable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Kemudian kita mengambil elemen pertama dari array yang dibentuk menggunakan fungsi </font></font><code><font color="#0000FF">first</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk array </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang juga membentuk output</font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena array mungkin kosong dan kami tidak akan bisa mendapatkan elemen pertama dari array. Sebagai hasilnya, kami memiliki dobel </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yaitu </font></font><code><font color="#0000FF">Int??</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memiliki struktur bersarang </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mana itu benar-benar lebih sulit untuk dikerjakan dan yang secara alami tidak kami inginkan. Untuk mendapatkan nilai dari struktur bersarang ini, kita harus "menyelam" ke dalam dua tingkat. Selain itu, setiap transformasi tambahan dapat memperdalam level </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lebih rendah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendapatkan nilai dari double nested </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benar </font><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">benar memberatkan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memiliki 3 opsi dan semuanya membutuhkan pengetahuan mendalam tentang bahasa tersebut </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><ul><li>      <code><font color="#0000FF">if let</font></code> ,       ;    «» «» <code><font color="#0000FF">Optional</font></code> ,    —  «» <code><font color="#0000FF">Optional</font></code> : <br><br><img src="https://habrastorage.org/webt/dp/wa/qh/dpwaqh4oebq7cjcwy35777cnno0.png"></li><li>       <code><font color="#0000FF">if case let</font></code>      ( <code>pattern match</code> )  : <br><br><img src="https://habrastorage.org/webt/v8/a6/tg/v8a6tg2npzwpktlvjpvqxf1pa0q.png"><br><br>       <code><font color="#0000FF">??</font></code>     : <br><br><img src="https://habrastorage.org/webt/a6/ny/ia/a6nyiaeq5bds4kiewmcugwomppq.png"></li><li> ,      <code><font color="#0000FF">switch</font></code>     : <br><br><img src="https://habrastorage.org/webt/oq/dx/1s/oqdx1siedfr6cxs2lug7zasq4qg.png"></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lebih buruk lagi, masalah bersarang tersebut </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muncul dalam situasi apa pun yang melibatkan </font></font><code>generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wadah </font><font style="vertical-align: inherit;">umum ( </font><font style="vertical-align: inherit;">) yang untuknya suatu operasi didefinisikan </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Misalnya, untuk array </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertimbangkan kode contoh lain. </font><font style="vertical-align: inherit;">Misalkan kita memiliki teks multi-baris </font></font><code><font color="#0000FF">multilineString</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang ingin kita bagi menjadi kata-kata yang ditulis dalam huruf kecil (kecil):</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> multilineString = <span class="hljs-string"><span class="hljs-string">"""  ,  ,   ;     , —  ,   :  —   ,   .   ,   ,   .    .  ,        ,  « »  .  ,  ,   ! """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> words = multilineString.lowercased() .<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(separator: <span class="hljs-string"><span class="hljs-string">"\n"</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{$<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(separator: <span class="hljs-string"><span class="hljs-string">" "</span></span>)}</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk mendapatkan array kata </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pertama-tama kita membuat huruf besar (besar) huruf kecil (kecil) menggunakan metode </font></font><code><font color="#0000FF">lowercased()</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Kemudian kita membagi teks menjadi </font></font><code><font color="#0000FF">split(separatot: "\n")</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">garis </font><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">garis </font><font style="vertical-align: inherit;">menggunakan metode </font><font style="vertical-align: inherit;">dan mendapatkan array string, dan kemudian menggunakannya </font></font><code><font color="#0000FF">map {$0.split(separator: " ")}</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk memisahkan setiap baris menjadi kata-kata yang terpisah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Akibatnya, kami mendapatkan array bersarang:</font></font><br><br><pre> <code class="swift hljs">[[<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">";"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">"—"</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">":"</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"—"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"«"</span></span>, <span class="hljs-string"><span class="hljs-string">"»"</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>], [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"!"</span></span>]]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memiliki </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ganda </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/b0/kc/y3/b0kcy3vh-dkhtw6ytrmk7fe_cbk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekali lagi, kami menerima "bersarang" struktur data, tapi kali ini kami tidak </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Jika kita ingin terus memproses kata-kata yang diterima </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, misalnya, untuk menemukan spektrum huruf dari teks multi-baris ini, maka pertama-tama kita harus “meluruskan” array ganda </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mengubahnya menjadi array tunggal </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini mirip dengan apa yang kami lakukan dengan menggandakan </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk demo di awal bagian ini pada </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> maybeNumbers = [<span class="hljs-string"><span class="hljs-string">"42"</span></span>, <span class="hljs-string"><span class="hljs-string">"7"</span></span>, <span class="hljs-string"><span class="hljs-string">"three"</span></span>, <span class="hljs-string"><span class="hljs-string">"///4///"</span></span>, <span class="hljs-string"><span class="hljs-string">"5"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstNumber = maybeNumbers.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> (<span class="hljs-type"><span class="hljs-type">Int</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>).first</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untungnya, </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kita tidak perlu menggunakan konstruksi sintaksis yang rumit. </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memberi kami solusi siap pakai untuk array </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini adalah fungsi urutan yang lebih tinggi </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! Ini sangat mirip dengan </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi memiliki fungsi tambahan yang terkait dengan "pelurusan" "lampiran" yang muncul selama eksekusi </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dan itulah mengapa disebut </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, itu “meluruskan” ( </font></font><code>flattens</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) hasilnya </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita coba menerapkan </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke </font></font><code><font color="#0000FF">firstNumber</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/l7/1g/ag/l71gagrp7qtfvn-9nae3ofbmlb0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami benar-benar mendapatkan output dengan satu level </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bekerja </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lebih menarik </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk sebuah array </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dalam ungkapan kami untuk, </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami hanya mengganti </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan</font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/zh/t9/bm/zht9bmajklq5ybm4xxpigddrrma.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan kami hanya mendapatkan berbagai kata </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tanpa "bersarang":</font></font><br><br><pre> <code class="swift hljs">[<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">";"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">"—"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">":"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"—"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"«"</span></span>, <span class="hljs-string"><span class="hljs-string">"»"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"!"</span></span>]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita dapat melanjutkan pemrosesan yang kita butuhkan dari susunan kata yang dihasilkan </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi hati-hati. </font><font style="vertical-align: inherit;">Jika kita menerapkannya sekali lagi </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk setiap elemen array </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kita akan mendapatkan, mungkin, hasil yang tak terduga, tetapi cukup bisa dimengerti. </font></font><br><br><img src="https://habrastorage.org/webt/vw/iq/jd/vwiqjd_y3ambrq0w8e-r9dnjpl4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mendapatkan satu array, bukan huruf "simbol" yang </font></font><code><font color="#0000FF">[Character]</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terkandung dalam frase multi-baris kami:</font></font><br><br><pre> <code class="swift hljs">[<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">","</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">";"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, ...]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faktanya adalah string </font></font><code><font color="#0000FF">String</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah kumpulan </font></font><code><font color="#0000FF">Collection</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">karakter </font></font><code><font color="#0000FF">[Character]</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan, berlaku </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk setiap kata individual, kami sekali lagi menurunkan tingkat "bersarang" dan datang ke berbagai karakter </font></font><code><font color="#0000FF">flattenCharacters</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mungkin ini yang Anda inginkan, atau mungkin tidak. </font><font style="vertical-align: inherit;">Perhatikan ini.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menyatukan semuanya: memecahkan beberapa masalah </font></font></h2><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TUGAS 1 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kita dapat melanjutkan pemrosesan susunan kata yang diperoleh pada bagian sebelumnya yang kita butuhkan </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan menghitung frekuensi kemunculan huruf dalam frasa multi-baris kita. </font><font style="vertical-align: inherit;">Untuk memulai, mari “tempel” semua kata dari array </font></font><code><font color="#0000FF">words</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke dalam satu baris besar dan kecualikan semua tanda baca darinya, yaitu, tinggalkan hanya huruf-huruf:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wordsString = words.<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span> (<span class="hljs-string"><span class="hljs-string">""</span></span>,+).<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> { <span class="hljs-string"><span class="hljs-string">""</span></span> .<span class="hljs-built_in"><span class="hljs-built_in">contains</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>)} <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, kami mendapat semua surat yang kami butuhkan. </font><font style="vertical-align: inherit;">Sekarang mari kita buat kamus mereka, di mana kuncinya </font></font><code><font color="#0000FF">key</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah huruf, dan nilainya </font></font><code><font color="#0000FF">value</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah frekuensi kemunculannya dalam teks. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kita bisa melakukan ini dengan dua cara. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode pertama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dikaitkan dengan penggunaan </font></font><code>Swift 4.2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variasi </font><font style="vertical-align: inherit;">baru </font><font style="vertical-align: inherit;">dari fungsi urutan yang lebih tinggi </font><font style="vertical-align: inherit;">yang telah muncul di </font></font><code><font color="#0000FF">reduce (into:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Metode ini sangat cocok bagi kita untuk mengatur kamus </font></font><code><font color="#0000FF">letterCount</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan frekuensi kemunculan huruf dalam frasa multi-baris kami:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> letterCount = wordsString.<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>(into: [:]) { counts, letter <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> counts[letter, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>] += <span class="hljs-number"><span class="hljs-number">1</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (letterCount) <span class="hljs-comment"><span class="hljs-comment">// ["": 1, "": 18, "": 2, "": 2, "": 5, "": 7, "": 17, "": 4, "": 23, ...]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai hasilnya, kita akan mendapatkan kamus </font></font><code><font color="#0000FF">letterCount</font></code> <code></code> <code><font color="#0000FF">[Character : Int]</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di mana kunci </font></font><code><font color="#0000FF">key</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah karakter yang ditemukan dalam frasa yang diteliti, dan karena nilainya </font></font><code><font color="#0000FF">value</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah jumlah karakter ini. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode kedua</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> melibatkan menginisialisasi kamus menggunakan pengelompokan, yang memberikan hasil yang sama:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> letterCountDictionary = <span class="hljs-type"><span class="hljs-type">Dictionary</span></span>(grouping: wordsString ){ $<span class="hljs-number"><span class="hljs-number">0</span></span>}.mapValues {$<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>} letterCount == letterCountDictionary <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami ingin mengurutkan kamus </font></font><code><font color="#0000FF">letterCount</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berdasarkan abjad:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lettersStat = letterCountDictionary .sorted(by: &lt;) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{<span class="hljs-string"><span class="hljs-string">"\($0.0):\($0.1)"</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (lettersStat) <span class="hljs-comment"><span class="hljs-comment">// [":17", ":5", ":18", ":4", ":8", ":35", ":3", ":4", ":18", ":5", ":2", ":10", ":4", ":26", ":34", ":5", ":7", ":23", ":25", ":4", ":2", ":3", ":4", ":2", ":1", ":14", ":2", ":4"]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi kami tidak dapat mengurutkan kamus secara langsung </font></font><code><font color="#0000FF">Dictionary</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena pada dasarnya ini bukan struktur data yang diurutkan. Jika kita menerapkan fungsi </font></font><code><font color="#0000FF">sorted (by:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke kamus </font></font><code><font color="#0000FF">Dictionary</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka itu akan mengembalikan kepada kita elemen-elemen dari urutan yang diurutkan dengan predikat yang diberikan dalam bentuk array dari nama tupel, yang </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kita ubah menjadi sebuah array string yang </font></font><code><font color="#0000FF">[":17", ":5", ":18", ...]</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mencerminkan frekuensi kemunculan huruf yang sesuai. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami melihat bahwa kali ini </font></font><code><font color="#0000FF">sorted (by:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hanya operator " </font></font><code><font color="#0000FF">&lt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font><font style="vertical-align: inherit;">yang dilewatkan </font><font style="vertical-align: inherit;">sebagai predikat ke fungsi </font><font style="vertical-align: inherit;">tingkat tinggi </font><font style="vertical-align: inherit;">. Fungsi </font></font><code><font color="#0000FF">sorted (by:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengharapkan "fungsi perbandingan" sebagai satu-satunya argumen pada input. Ini digunakan untuk membandingkan dua nilai yang berdekatan dan memutuskan apakah mereka dipesan dengan benar (dalam hal ini, pengembalian</font></font><code><font color="#0000FF">true</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) atau tidak (pengembalian </font></font><code><font color="#0000FF">false</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Kami dapat memberikan fungsi "fungsi perbandingan" ini </font></font><code><font color="#0000FF">sorted (by:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam bentuk penutupan anonim:</font></font><br><br><pre> <code class="swift hljs">sorted(by: {$<span class="hljs-number"><span class="hljs-number">0</span></span>.key &lt; $<span class="hljs-number"><span class="hljs-number">1</span></span>.key}</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan kita bisa memberikannya " </font></font><code><font color="#0000FF">&lt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font><font style="vertical-align: inherit;">operator </font><font style="vertical-align: inherit;">, yang memiliki tanda tangan yang kita butuhkan, seperti yang dilakukan di atas. </font><font style="vertical-align: inherit;">Ini juga fungsi, dan pengurutan berdasarkan kunci sedang berlangsung </font></font><code><font color="#0000FF">key</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita ingin mengurutkan kamus berdasarkan nilai </font></font><code><font color="#0000FF">value</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mencari huruf mana yang paling sering ditemukan dalam frasa ini, maka kita harus menggunakan penutup untuk fungsi </font></font><code><font color="#0000FF">sorted (by:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> countsStat = letterCountDictionary .sorted(by: {$<span class="hljs-number"><span class="hljs-number">0</span></span>.value &gt; $<span class="hljs-number"><span class="hljs-number">1</span></span>.value}) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{<span class="hljs-string"><span class="hljs-string">"\($0.0):\($0.1)"</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (countsStat ) <span class="hljs-comment"><span class="hljs-comment">//[":35", ":34", ":26", ":25", ":23", ":18", ":18", ":17", ":14", ":10", ":8", ":7", ":5", ":5", ":5", ":4", ":4", ":4", ":4", ":4", ":4", ":3", ":3", ":2", ":2", ":2", ":2", ":1"]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jika kita melihat solusi untuk masalah menentukan spektrum huruf dari frase multiline secara keseluruhan ... </font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> multilineString = <span class="hljs-string"><span class="hljs-string">"""  ,  ,   ;     , —  ,   :  —   ,   .   ,   ,   .    .  ,        ,  « »  .  ,  ,   ! """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> words = multilineString.lowercased() .<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(separator: <span class="hljs-string"><span class="hljs-string">"\n"</span></span>) .flatMap{$<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(separator: <span class="hljs-string"><span class="hljs-string">" "</span></span>)} <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wordsString = words.<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span> (<span class="hljs-string"><span class="hljs-string">""</span></span>,+).<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> { <span class="hljs-string"><span class="hljs-string">""</span></span> .<span class="hljs-built_in"><span class="hljs-built_in">contains</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>)} <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> letterCount = wordsString.<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>(into: [:]) { counts, letter <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> counts[letter, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>] += <span class="hljs-number"><span class="hljs-number">1</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lettersStat = letterCountDictionary .sorted(by: &lt;) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{<span class="hljs-string"><span class="hljs-string">"\($0.0):\($0.1)"</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (lettersStat) <span class="hljs-comment"><span class="hljs-comment">// [":17", ":5", ":18", ":4", ":8", ":35", ":3", ":4", ":18", ":5", ":2", ":10", ":4", ":26", ":34", ":5", ":7", ":23", ":25", ":4", ":2", ":3", ":4", ":2", ":1", ":14", ":2", ":4"] let countsStat = letterCountDictionary .sorted(by: {$0.value &gt; $1.value}) .map{"\($0.0):\($0.1)"} print (countsStat ) //[":35", ":34", ":26", ":25", ":23", ":18", ":18", ":17", ":14", ":10", ":8", ":7", ":5", ":5", ":5", ":4", ":4", ":4", ":4", ":4", ":4", ":3", ":3", ":2", ":2", ":2", ":2", ":1"]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... maka kita akan melihat bahwa dalam fragmen kode ini pada dasarnya tidak ada variabel (tidak </font></font><code><font color="#0000FF">var</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, hanya </font></font><code><font color="#0000FF">let)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua nama fungsi yang digunakan mencerminkan TINDAKAN (fungsi) atas informasi tertentu, sama sekali tidak khawatir tentang BAGAIMANA tindakan ini diimplementasikan: </font></font><br><br> <code><font color="#0000FF">split</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- split, </font></font><br> <code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- transform </font></font><br> <code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- transform with keselarasan (dengan menghapus satu tingkat bersarang), </font></font><br> <code><font color="#0000FF">filter</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- filter, </font></font><br> <code><font color="#0000FF">sorted</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- menyortir, </font></font><br> <code><font color="#0000FF">reduce</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- untuk mengubah data menjadi struktur tertentu dengan cara operasi tertentu </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam fragmen ini setiap baris kode menjelaskan nama fungsi yang kita gunakan jika kita berada dalam. fill "murni" transformasi digunakan </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika kita melakukan konversi dari tingkat bersarang digunakan</font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jika kami hanya ingin memilih data tertentu, maka kami menggunakan </font></font><code><font color="#0000FF">filter</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dll. Semua fungsi "urutan tertinggi" ini dirancang dan diuji </font></font><code>Apple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan mempertimbangkan pengoptimalan kinerja akun. Jadi kode ini sangat andal dan ringkas - kami tidak membutuhkan lebih dari 5 kalimat untuk menyelesaikan masalah kami. Ini adalah contoh pemrograman fungsional. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satu-satunya kelemahan menerapkan pendekatan fungsional dalam demo ini adalah bahwa, demi ketidakberdayaan, kemampuan pengujian dan keterbacaan, kami berulang kali mengejar teks kami melalui berbagai fungsi tingkat tinggi. Dalam kasus sejumlah besar barang koleksi, </font></font><code><font color="#0000FF">Collection</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kinerja dapat turun drastis. Misalnya, jika kita pertama kali menggunakan </font></font><code><font color="#0000FF">filter(_:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan, dan kemudian - </font></font><code><font color="#0000FF">first</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masuk</font></font><code>Swift 4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beberapa opsi fitur baru telah ditambahkan untuk meningkatkan kinerja, dan berikut adalah beberapa tips untuk menulis kode yang lebih cepat. </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Gunakan </font></font><code><font color="#0000FF">contains</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, BUKAN</font></font><code><font color="#0000FF">first( where: ) != nil</font></code> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memverifikasi bahwa suatu objek ada dalam koleksi </font></font><code><font color="#0000FF">Collection</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat dilakukan dengan banyak cara. </font><font style="vertical-align: inherit;">Performa terbaik disediakan oleh fungsi </font></font><code><font color="#0000FF">contains</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KODE YANG BENAR</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numbers = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] numbers.<span class="hljs-built_in"><span class="hljs-built_in">contains</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> KODE YANG TIDAK BENAR </font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numbers = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] numbers.<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> { number <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> number == <span class="hljs-number"><span class="hljs-number">1</span></span> }.isEmpty == <span class="hljs-literal"><span class="hljs-literal">false</span></span> numbers.first(<span class="hljs-keyword"><span class="hljs-keyword">where</span></span>: { number <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> number == <span class="hljs-number"><span class="hljs-number">1</span></span> }) != <span class="hljs-literal"><span class="hljs-literal">nil</span></span></code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Gunakan validasi </font></font><code><font color="#0000FF">isEmpty</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, BUKAN perbandingan </font></font><code><font color="#0000FF">count</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan nol</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena untuk beberapa koleksi, akses ke properti </font></font><code><font color="#0000FF">count</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dilakukan dengan mengulangi semua elemen koleksi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KODE YANG BENAR</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numbers = [] numbers.isEmpty</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> KODE YANG TIDAK BENAR </font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numbers = [] numbers.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Periksa string kosong </font></font><code><font color="#0000FF">String</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan</font></font><code><font color="#0000FF">isEmpty</font></code> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String </font></font><code><font color="#0000FF">String</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah kumpulan karakter </font></font><code><font color="#0000FF">[Character]</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ini berarti bahwa untuk string </font></font><code><font color="#0000FF">String</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juga lebih baik digunakan </font></font><code><font color="#0000FF">isEmpty</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KODE YANG BENAR</font></font><br><br><pre> <code class="swift hljs">myString.isEmpty</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> KODE YANG TIDAK BENAR </font></font><br><br><pre> <code class="swift hljs">myString == <span class="hljs-string"><span class="hljs-string">""</span></span> myString.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4. Memperoleh elemen pertama yang memenuhi kondisi tertentu </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iterasi seluruh koleksi untuk mendapatkan objek pertama yang memenuhi kondisi tertentu dapat dilakukan dengan menggunakan metode yang </font></font><code><font color="#0000FF">filter</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diikuti oleh suatu metode </font></font><code><font color="#0000FF">first</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi </font><font style="vertical-align: inherit;">metode </font><font style="vertical-align: inherit;">ini adalah yang terbaik dalam hal kecepatan </font></font><code><font color="#0000FF">first (where:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Metode ini berhenti mengulangi koleksi segera setelah memenuhi kondisi yang diperlukan. </font><font style="vertical-align: inherit;">Metode ini </font></font><code><font color="#0000FF">filter</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan terus beralih ke seluruh koleksi, terlepas dari apakah memenuhi elemen yang diperlukan atau tidak. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jelas, hal yang sama berlaku untuk metode ini </font></font><code><font color="#0000FF">last (where:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KODE YANG BENAR</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numbers = [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, -<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, -<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstNegative = numbers.first(<span class="hljs-keyword"><span class="hljs-keyword">where</span></span>: { $<span class="hljs-number"><span class="hljs-number">0</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> })</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> KODE YANG TIDAK BENAR </font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numbers = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> allEven = numbers.<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> { $<span class="hljs-number"><span class="hljs-number">0</span></span> % <span class="hljs-number"><span class="hljs-number">2</span></span> != <span class="hljs-number"><span class="hljs-number">0</span></span> }.isEmpty</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terkadang, ketika koleksinya </font></font><code><font color="#0000FF">Collection</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sangat besar dan kinerjanya sangat penting bagi Anda, ada baiknya kembali untuk membandingkan pendekatan imperatif dan fungsional dan memilih yang cocok untuk Anda.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TUGAS 2 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada contoh hebat lain tentang penggunaan fungsi urutan tinggi yang sangat singkat </font></font><code><font color="#0000FF">reduce (_:, _:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang saya temui. Ini adalah game </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inilah aturan dasarnya. Nama permainan </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berasal dari kata bahasa Inggris "set" - "set". Permainan ini </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melibatkan 81 kartu, masing-masing dengan gambar unik: </font></font><br><br><img src="https://habrastorage.org/webt/ho/tg/rr/hotgrrs2vjmbgdyuxo0l4if6fai.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap kartu memiliki 4 atribut, tercantum di bawah ini: </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jumlah</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : setiap kartu memiliki satu, dua atau tiga karakter. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis karakter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : oval, belah ketupat atau gelombang. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warna</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Simbol bisa merah, hijau atau ungu. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengisi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : karakter dapat dikosongkan, diarsir, atau diarsir. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tujuan permainan</font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Di antara 12 kartu yang diletakkan di atas meja, Anda perlu menemukan </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(satu set) yang terdiri dari 3 kartu, di mana masing-masing dari tanda-tanda itu benar-benar bertepatan atau sepenuhnya berbeda pada ketiga kartu. Semua tanda harus sepenuhnya mematuhi aturan ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, jumlah karakter pada ketiga kartu harus sama atau berbeda, warna pada ketiga kartu harus sama atau berbeda, dan seterusnya ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam contoh ini, kita hanya akan tertarik pada Model Peta </font></font><code>SET</code> <code><font color="#0000FF">struct SetCard</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan algoritma untuk menentukan </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan Peta ke-3 </font></font><code><font color="#0000FF">isSet( cards:[SetCard])</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SetCard</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Equatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> number: <span class="hljs-type"><span class="hljs-type">Variant</span></span> <span class="hljs-comment"><span class="hljs-comment">// number - 1, 2, 3 let color: Variant // color - 1, 2, 3 (, , , ) let shape: Variant // symbol - 1, 2, 3 (, , , ) let fill: Variant // fill - 1, 2, 3 (, , , ) enum Variant: Int, CaseIterable { case v1 = 1 case v2 case v3 } static func isSet(cards: [SetCard]) -&gt; Bool { guard cards.count == 3 else {return false} let sums = [ cards.reduce(0, { $0 + $1.number.rawValue }), cards.reduce(0, { $0 + $1.color.rawValue }), cards.reduce(0, { $0 + $1.shape.rawValue }), cards.reduce(0, { $0 + $1.fill.rawValue }) ] return sums.reduce(true, { $0 &amp;&amp; ($1 % 3 == 0) }) } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model setiap fitur - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jumlah</font></font></i> <code><font color="#0000FF">number</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jenis simbol</font></font></i> <code><font color="#0000FF">shape</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warna</font></font></i> <code><font color="#0000FF">color</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filling</font></font></i> <code><font color="#0000FF">fill</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - disajikan listing </font></font><code><font color="#0000FF">Variant</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memiliki tiga nilai yang mungkin </font></font><code><font color="#0000FF">var1</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">var2</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code><font color="#0000FF">var3</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang sesuai dengan bilangan bulat 3 </font></font><code><font color="#0000FF">rawValue</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code><font color="#0000FF">1,2,3</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dalam bentuk ini, </font></font><code><font color="#0000FF">rawValue</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mudah dioperasikan. Jika kita mengambil beberapa tanda, misalnya, </font></font><code><font color="#0000FF">color</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kemudian menambahkan semuanya </font></font><code><font color="#0000FF">rawValue</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk </font></font><code><font color="#0000FF">colors</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 kartu, kita akan menemukan bahwa jika </font></font><code><font color="#0000FF">colors</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua 3 kartu sama, maka jumlahnya akan sama </font></font><code><font color="#0000FF">3</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">6</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code><font color="#0000FF">9</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jika semuanya akan berbeda, maka jumlahnya akan menjadi sama </font></font><code><font color="#0000FF">6</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dalam salah satu dari kasus ini, kami memiliki kelipatan dari jumlah ketiga </font></font><code><font color="#0000FF">rawValue</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk</font></font><code><font color="#0000FF">colors</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semua 3 kartu. Kita tahu bahwa ini adalah prasyarat untuk membuat 3 kartu </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Agar 3 kartu menjadi benar-benar </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diperlukan, untuk semua tanda </font></font><code><font color="#0000FF">SetCard</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Jumlah </font></font><code><font color="#0000FF">number</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Jenis simbol </font></font><code><font color="#0000FF">shape</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Warna </font></font><code><font color="#0000FF">color</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan Mengisi </font></font><code><font color="#0000FF">fill</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- jumlahnya harus </font></font><code><font color="#0000FF">rawValue</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kelipatan ke-3. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oleh karena itu, dalam </font></font><code><font color="#0000FF">static</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metode, </font></font><code><font color="#0000FF">isSet( cards:[SetCard])</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pertama kita menghitung array </font></font><code><font color="#0000FF">sums</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari jumlah </font></font><code><font color="#0000FF">rawValue</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk semua 3 peta untuk semua peta 4 kinerja menggunakan fungsi yang lebih tinggi </font></font><code><font color="#0000FF">reduce</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan nilai awal sama untuk </font></font><code><font color="#0000FF">0</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan mengumpulkan fungsi </font></font><code><font color="#0000FF">{$0 + $1.number.rawValue}</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">{$0 + $1.color.rawValue}</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">{$0 + $1.shape.rawValue}</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">{ {$0 + $1.fill.rawValue}</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Setiap elemen array </font></font><code><font color="#0000FF">sums</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus merupakan kelipatan ke-3, dan sekali lagi kita menggunakan fungsinya</font></font><code><font color="#0000FF">reduce</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tapi kali ini dengan nilai awal sama dengan </font></font><code><font color="#0000FF">true</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mengakumulasikan fungsi logis " </font></font><code>AND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><code><font color="#0000FF">{$0 &amp;&amp; ($1 % 3) == 0}</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swift 5,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menguji multiplisitas dari satu angka ke yang lain, sebuah fungsi diperkenalkan </font></font><code><font color="#0000FF">isMultiply(of:)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai ganti operator yang </font></font><code><font color="#0000FF">%</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tersisa. Hal ini juga akan meningkatkan pembacaan kode: </font></font><code><font color="#0000FF">{ $0 &amp;&amp; ($1.isMultiply(of:3) }</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode pendek yang fantastis ini untuk mengetahui apakah 3 </font></font><code><font color="#0000FF">SetCard</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kartu adalah kartu yang </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diperoleh berkat </font><font style="vertical-align: inherit;">pendekatan " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsional</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", dan kita dapat memastikan bahwa itu berhasil </font></font><code>Playground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/9y/cg/6e/9ycg6e0hzi_kfdc4kvsnd0cnjsy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara </font></font><code>SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membangun antarmuka pengguna ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">pada Model Game ini di </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan di </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fitur murni dan efek samping </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fungsi murni memenuhi dua kondisi. </font><font style="vertical-align: inherit;">Itu selalu mengembalikan hasil yang sama dengan parameter input yang sama. </font><font style="vertical-align: inherit;">Dan perhitungan hasilnya tidak menyebabkan efek samping yang terkait dengan output data di luar (misalnya, ke disk) atau dengan meminjam data sumber dari luar (misalnya, waktu). </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk mengoptimalkan kode secara signifikan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Topik ini </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diatur dengan sempurna pada </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">point.free</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam episode pertama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fungsi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efek Samping</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang diterjemahkan ke dalam bahasa Rusia dan disajikan sebagai </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fungsi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Efek Samping</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">"</font></a></b></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Komposisi fungsi </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam pengertian matematika, ini berarti menerapkan satu fungsi ke hasil fungsi lainnya. Dalam suatu </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi, mereka bisa mengembalikan nilai yang bisa Anda gunakan sebagai input untuk fungsi lain. Ini adalah praktik pemrograman yang umum. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bayangkan bahwa kita memiliki array bilangan bulat dan kami ingin mendapatkan array kuadrat dari angka genap unik pada output. Biasanya kami menerapkan kembali ini sebagai berikut:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> integerArray = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unique</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> array: [Int])</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Int</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array.<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>(into: [], { (results, element) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !results.<span class="hljs-built_in"><span class="hljs-built_in">contains</span></span>(element) { results.append(element) } }) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">even</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> array: [Int])</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Int</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array.<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span>{ $<span class="hljs-number"><span class="hljs-number">0</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">square</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> array: [Int])</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Int</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{ $<span class="hljs-number"><span class="hljs-number">0</span></span>*$<span class="hljs-number"><span class="hljs-number">0</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = square(even(unique(integerArray))) <span class="hljs-comment"><span class="hljs-comment">// it returns [4, 16, 36, 64]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode ini memberi kami hasil yang benar, tetapi Anda melihat bahwa keterbacaan baris kode terakhir tidak begitu mudah. Urutan fungsi (dari kanan ke kiri) adalah kebalikan dari yang kita terbiasa (dari kiri ke kanan) dan ingin melihat di sini. Kita perlu mengarahkan logika kita terlebih dahulu ke bagian terdalam dari beberapa embeddings - ke array </font></font><code><font color="#0000FF">inegerArray</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kemudian ke fungsi di luar array ini </font></font><code><font color="#0000FF">unique</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kemudian kita naik satu level lagi - fungsi </font></font><code><font color="#0000FF">even</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan akhirnya, fungsi dalam kesimpulan </font></font><code><font color="#0000FF">square</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan di sini "komposisi" fungsi </font></font><code><font color="#0000FF">&gt;&gt;&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">operator datang untuk membantu kami </font></font><code><font color="#0000FF">|&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang memungkinkan kami untuk menulis kode dengan cara yang sangat nyaman, mewakili pemrosesan array asli </font></font><code><font color="#0000FF">integerArray</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai "konveyor" fungsi:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array1 = integerArray |&gt; unique &gt;&gt;&gt; even &gt;&gt;&gt; square</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hampir semua bahasa seperti pemrograman fungsional khusus </font></font><code>F#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Elixir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>Elm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan operator ini untuk "komposisi" fungsi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada operator built-in dari "komposisi" fungsi </font></font><code><font color="#0000FF">&gt;&gt;&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code><font color="#0000FF">|&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi kita dapat dengan mudah mendapatkannya dengan bantuan </font></font><code>Generics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penutupan ( </font></font><code>closure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dan </font></font><code><font color="#0000FF">infix</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operator:</font></font><br><br><pre> <code class="swift hljs">precedencegroup <span class="hljs-type"><span class="hljs-type">ForwardComposition</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">associativity</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> higherThan: <span class="hljs-type"><span class="hljs-type">ForwardApplication</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> &gt;&gt;&gt; : <span class="hljs-type"><span class="hljs-type">ForwardComposition</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt;&gt; &lt;A, B, C&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: @escaping </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(A)</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">B</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">right</span></span>: @escaping (<span class="hljs-type"><span class="hljs-type">B</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">C</span></span>) -&gt; (<span class="hljs-type"><span class="hljs-type">A</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">C</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">right</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">left</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>)) } } precedencegroup <span class="hljs-type"><span class="hljs-type">ForwardApplication</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">associativity</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> |&gt; : <span class="hljs-type"><span class="hljs-type">ForwardApplication</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> |&gt; &lt;A, B&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a: A, f: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(A)</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">B</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">B</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f(a) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meskipun ada biaya tambahan, dalam beberapa kasus ini dapat secara signifikan meningkatkan kinerja, keterbacaan dan pengujian kode Anda. </font><font style="vertical-align: inherit;">Misalnya, ketika di dalam </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda menempatkan seluruh rangkaian fungsi menggunakan operator "komposisi" </font></font><code><font color="#0000FF">&gt;&gt;&gt;</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alih-alih mengejar array melalui banyak </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> integerArray1 = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = integerArray1.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>( { $<span class="hljs-number"><span class="hljs-number">0</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> } &gt;&gt;&gt; { $<span class="hljs-number"><span class="hljs-number">0</span></span> * <span class="hljs-number"><span class="hljs-number">3</span></span> } &gt;&gt;&gt; <span class="hljs-type"><span class="hljs-type">String</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (b) <span class="hljs-comment"><span class="hljs-comment">// ["6", "9", "12", "15", "18", "21", "24", "27", "30", "6", "15", "18"]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun tidak selalu pendekatan fungsional memberikan efek positif. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada awalnya, ketika muncul </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada tahun 2014, semua orang bergegas untuk menulis perpustakaan dengan operator untuk "komposisi" fungsi dan menyelesaikan tugas yang sulit untuk waktu itu seperti parsing </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan operator pemrograman fungsional alih-alih menggunakan konstruksi bersarang tak terhingga </font></font><code><font color="#0000FF">if let</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya sendiri menerjemahkan </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel tentang parsing fungsional JSON yang</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menyenangkan saya dengan solusi yang elegan </font><font style="vertical-align: inherit;">dan adalah penggemar perpustakaan </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argo</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi para pengembang </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pergi dengan cara yang sama sekali berbeda dan mengusulkan, berdasarkan teknologi berorientasi protokol, cara penulisan kode yang jauh lebih ringkas. Untuk "mengirimkan" </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data langsung ke</font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cukup untuk melakukan hal ini </font></font><code></code> <code><font color="#0000FF">Codable</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang secara otomatis mengimplementasikan protokol ini, jika model Anda terdiri dari dikenal </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">struktur data: </font></font><code><font color="#0000FF">String</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">Int</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">URL</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">Array</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">Dictionary</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dll</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Blog</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Codable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id: <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> name: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url: <span class="hljs-type"><span class="hljs-type">URL</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memiliki </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data dari </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel terkenal itu</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...</font></font><br><pre> <code class="swift hljs">[ { <span class="hljs-string"><span class="hljs-string">"id"</span></span> : <span class="hljs-number"><span class="hljs-number">73</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Bloxus test"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span> : <span class="hljs-string"><span class="hljs-string">"http://remote.bloxus.com/"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span> : <span class="hljs-number"><span class="hljs-number">74</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Manila Test"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span> : <span class="hljs-string"><span class="hljs-string">"http://flickrtest1.userland.com/"</span></span> } ]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... saat ini Anda hanya perlu satu baris kode untuk mendapatkan berbagai blog </font></font><code><font color="#0000FF">blogs</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blogs = <span class="hljs-type"><span class="hljs-type">Bundle</span></span>.main.path(forResource: <span class="hljs-string"><span class="hljs-string">"blogs"</span></span>, ofType: <span class="hljs-string"><span class="hljs-string">"json"</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(<span class="hljs-type"><span class="hljs-type">URL</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(fileURLWithPath:)) .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">Data</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(contentsOf: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">JSONDecoder</span></span>().decode([<span class="hljs-type"><span class="hljs-type">Blog</span></span>].<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, from: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (<span class="hljs-string"><span class="hljs-string">"\(blogs!)"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// [id: 73 name: Bloxus test url: http://remote.bloxus.com/, // id: 74 name: Manila Test url: http://flickrtest1.userland.com/]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap orang dengan aman lupa tentang menggunakan operator dari "komposisi" fungsi untuk parsing </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jika ada cara lain, lebih mudah dimengerti dan mudah untuk melakukan ini menggunakan protokol. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika semuanya begitu mudah, maka kita dapat "mengunggah" </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data ke Model yang lebih kompleks. </font><font style="vertical-align: inherit;">Misalkan kita memiliki file </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data yang memiliki nama </font></font><code>user.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan terletak di direktori kita </font></font><code>Resources.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini berisi data tentang pengguna tertentu:</font></font><br><br><pre> <code class="swift hljs">{ <span class="hljs-string"><span class="hljs-string">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"blob@pointfree.co"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blob"</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan kami memiliki </font></font><code><font color="#0000FF">Codable</font></code> <code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengguna </font></font><code><font color="#0000FF">User</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan inisialisasi dari data </font></font><code><font color="#0000FF">json</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Codable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> email: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id: <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> name: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>?(json: <span class="hljs-type"><span class="hljs-type">Data</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newValue = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">JSONDecoder</span></span>().decode(<span class="hljs-type"><span class="hljs-type">User</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, from: json) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> = newValue } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami dapat dengan mudah mendapatkan pengguna baru </font></font><code><font color="#0000FF">newUser</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan kode fungsional yang bahkan lebih sederhana:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newUser = <span class="hljs-type"><span class="hljs-type">Bundle</span></span>.main.path(forResource: <span class="hljs-string"><span class="hljs-string">"user"</span></span>, ofType: <span class="hljs-string"><span class="hljs-string">"json"</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(<span class="hljs-type"><span class="hljs-type">URL</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(fileURLWithPath:)) .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">Data</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(contentsOf: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } .flatMap { <span class="hljs-type"><span class="hljs-type">User</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(json: $<span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jelas, </font></font><code><font color="#0000FF">newUser</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan ada </font><font style="vertical-align: inherit;">JENIS </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yaitu </font></font><code><font color="#0000FF">User?</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/ws/hp/ba/wshpbajpp-wrpb00sxusmhycttk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalkan dalam direktori kami </font></font><code>Resources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada file lain dengan nama </font></font><code>invoices.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan berisi data pada faktur pengguna ini.</font></font><br><br><pre> <code class="swift hljs">[ { <span class="hljs-string"><span class="hljs-string">"amountPaid"</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-string"><span class="hljs-string">"amountDue"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"closed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, { <span class="hljs-string"><span class="hljs-string">"amountPaid"</span></span>: <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">"amountDue"</span></span>: <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">"closed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> } ]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami dapat memuat data ini persis seperti yang kami lakukan dengan </font></font><code><font color="#0000FF">User</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mari mendefinisikan struktur sebagai Model Faktur </font></font><code><font color="#0000FF">struct Invoice</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Invoice</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Codable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> amountDue: <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> amountPaid: <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> closed: <span class="hljs-type"><span class="hljs-type">Bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id: <span class="hljs-type"><span class="hljs-type">Int</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan decode </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array faktur yang </font><font style="vertical-align: inherit;">disajikan di atas </font></font><code><font color="#0000FF">invoices</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, hanya mengubah jalur file dan logika decoding </font></font><code><font color="#0000FF">decode</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> invoices = <span class="hljs-type"><span class="hljs-type">Bundle</span></span>.main.path(forResource: <span class="hljs-string"><span class="hljs-string">"invoices"</span></span>, ofType: <span class="hljs-string"><span class="hljs-string">"json"</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>( <span class="hljs-type"><span class="hljs-type">URL</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(fileURLWithPath:) ) .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">Data</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(contentsOf: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">JSONDecoder</span></span>().decode([<span class="hljs-type"><span class="hljs-type">Invoice</span></span>].<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, from: $<span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br> <code></code> <code><font color="#0000FF">invoices</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan menjadi </font></font><code><font color="#0000FF">[Invoice]?</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/rk/-s/l0/rk-sl0uz-jcgqfdxuqlrzhpbrby.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kami ingin menghubungkan pengguna </font></font><code><font color="#0000FF">user</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bersama dengan fakturnya </font></font><code><font color="#0000FF">invoices</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jika faktanya tidak sama </font></font><code><font color="#0000FF">nil</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan menyimpan, misalnya, dalam struktur amplop </font></font><code><font color="#0000FF">UserEnvelope</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang dikirim ke pengguna bersama dengan fakturnya:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserEnvelope</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> user: <span class="hljs-type"><span class="hljs-type">User</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> invoices: [<span class="hljs-type"><span class="hljs-type">Invoice</span></span>] }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alih-alih melakukan dua kali </font></font><code><font color="#0000FF">if let</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newUser = newUser, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> invoices = invoices { }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... mari kita tulis analog fungsional ganda </font></font><code><font color="#0000FF">if let</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi </font><font style="vertical-align: inherit;">tambahan </font></font><code><font color="#0000FF">zip</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang mengubah dua </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai menjadi sebuah </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tuple:</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zip</span></span></span><span class="hljs-function">&lt;A, B&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a: A?, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b: B?)</span></span></span></span> -&gt; (<span class="hljs-type"><span class="hljs-type">A</span></span>, <span class="hljs-type"><span class="hljs-type">B</span></span>)? { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = a, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = b { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (a, b) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita tidak punya alasan untuk menetapkan sesuatu ke variabel </font></font><code><font color="#0000FF">newUser</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code><font color="#0000FF">invoices</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kita hanya membangun semuanya ke dalam fungsi baru kita </font></font><code><font color="#0000FF">zip</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, menggunakan penginisialisasi </font></font><code><font color="#0000FF">UserEnvelope.init</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan semuanya akan bekerja!</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> userEnv = <span class="hljs-built_in"><span class="hljs-built_in">zip</span></span>( <span class="hljs-type"><span class="hljs-type">Bundle</span></span>.main.path(forResource: <span class="hljs-string"><span class="hljs-string">"user"</span></span>, ofType: <span class="hljs-string"><span class="hljs-string">"json"</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(<span class="hljs-type"><span class="hljs-type">URL</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(fileURLWithPath:)) .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">Data</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(contentsOf: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } .flatMap { <span class="hljs-type"><span class="hljs-type">User</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(json: $<span class="hljs-number"><span class="hljs-number">0</span></span>) }, <span class="hljs-type"><span class="hljs-type">Bundle</span></span>.main.path(forResource: <span class="hljs-string"><span class="hljs-string">"invoices"</span></span>, ofType: <span class="hljs-string"><span class="hljs-string">"json"</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(<span class="hljs-type"><span class="hljs-type">URL</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(fileURLWithPath:)) .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">Data</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(contentsOf: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">JSONDecoder</span></span>().decode([<span class="hljs-type"><span class="hljs-type">Invoice</span></span>].<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, from: $<span class="hljs-number"><span class="hljs-number">0</span></span>) } ).flatMap (<span class="hljs-type"><span class="hljs-type">UserEnvelope</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (<span class="hljs-string"><span class="hljs-string">"\(userEnv!)"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// UserEnvelope(user: id: 42 name: Blob , // invoices: [id: 1 amountDue: 0 amountPaid: 1000 closed: true, // id: 2 amountDue: 500 amountPaid: 500 closed: false])</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam satu ekspresi tunggal, seluruh algoritme untuk mengirimkan </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data ke data yang kompleks </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam bentuk struktur </font><font style="vertical-align: inherit;">dikemas </font></font><code><font color="#0000FF">struct UserEnvelope</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><ul><li>    <code><font color="#0000FF">zip</font></code> ,  ,         .     <code><font color="#0000FF">user</font></code> , <code>JSON</code>   ,    <code><font color="#0000FF">invoices</font></code> ,      <code>JSON</code> .         . </li><li>    <code><font color="#0000FF">map</font></code> ,  ,   «»       . </li><li>    <code><font color="#0000FF">flatMap</font></code> ,  ,        ,     . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi </font></font><code><font color="#0000FF">zip</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mewakili semacam </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bahasa khusus domain (DSL)</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk konversi data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami selanjutnya dapat mengembangkan demo ini untuk mewakili secara asinkron membaca konten file sebagai fungsi khusus yang dapat Anda lihat di </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pointfree.co</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya bukan penggemar fanatik </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemrograman Fungsional di</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mana-mana dan dalam segala hal, tetapi penggunaan moderat menurut saya disarankan.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kesimpulan </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya memberi contoh berbagai pemrograman fungsional fitur </font></font><code>Swf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t «keluar dari kotak", berdasarkan pada penggunaan fungsi tingkat tinggi </font></font><code><font color="#0000FF">map</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">flatMap</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">reduce</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">filter</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan yang lainnya untuk urutan </font></font><code><font color="#0000FF">Sequence</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code><font color="#0000FF">Optional</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code><font color="#0000FF">Result</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mereka bisa menjadi "workhorses" dari pembuatan kode, </font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terutama jika nilai </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- struktur </font></font><code><font color="#0000FF">struct</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan enumerasi </font><font style="vertical-align: inherit;">terlibat di sana </font></font><code><font color="#0000FF">enum</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pengembang </font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplikasi harus memiliki alat ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua demo yang dikompilasi </font></font><code>Playground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat ditemukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jika Anda memiliki masalah dengan peluncurannya </font></font><code>Playground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Anda dapat melihat artikel ini:</font></font><br><br> <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara menyingkirkan kesalahan "beku" Xcode Playground dengan pesan "Launching Simulator" dan "Running Playground".</font></font></a></b> <br><br>  Referensi: <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Functional Programming in Swift: An Introduction.</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">An Introduction to Functional Programming in Swift.</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">The Many Faces of Flat-Map: Part 3</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Inside the Standard Library: Sequence.map()</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Practical functional programming in Swift</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440722/">https://habr.com/ru/post/id440722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440712/index.html">Cloud hanyalah komputer seseorang</a></li>
<li><a href="../id440714/index.html">Bagaimana menurunkan tingkat perolehan mempengaruhi kami (pemegang kartu)</a></li>
<li><a href="../id440716/index.html">Implementasi IDCS pra-rakitan terbesar untuk otoritas publik di Volgograd</a></li>
<li><a href="../id440718/index.html">Transfer Data Cross-Scene dalam Persatuan - Menerapkan Multi-Nilai untuk Pengembangan Game Sederhana</a></li>
<li><a href="../id440720/index.html">Kami menerapkan UI di iOS: kami meningkatkan, mempercepat, skala</a></li>
<li><a href="../id440724/index.html">Seleksi: 4 layanan bermanfaat untuk imigran potensial ke AS, Eropa dan negara-negara lain</a></li>
<li><a href="../id440726/index.html">The Game of Archetypes: Bagaimana Mendongeng Bekerja untuk Merek Teknologi</a></li>
<li><a href="../id440728/index.html">Pengembangan ponsel: dari ide hingga estimasi biaya</a></li>
<li><a href="../id440732/index.html">Tingkatkan papan debug dengan prosesor Baikal-T1: tambahkan kartu SD</a></li>
<li><a href="../id440734/index.html">Buka Sesi Dalam Tampilan di Boot Spring: The Phantom Menace</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>