<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèº üó∫Ô∏è ‚ù§Ô∏è Nuevo microcontrolador de control de motor dom√©stico K1921VK01T de OJSC NIIET üå™Ô∏è üçç üì®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De alguna manera, se pas√≥ la noticia sobre la aparici√≥n de un nuevo microcontrolador K1921VK01T de OJSC NIIET . ¬øC√≥mo es notable? Sus perif√©ricos dise...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nuevo microcontrolador de control de motor dom√©stico K1921VK01T de OJSC NIIET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/npf_vektor/blog/389129/"><img src="https://habrastorage.org/files/a97/a7f/0cf/a97a7f0cf9454cfb9f64cdb540e00f40.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De alguna manera, se pas√≥ la noticia sobre la aparici√≥n de un nuevo microcontrolador </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K1921VK01T de OJSC NIIET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ¬øC√≥mo es notable? Sus perif√©ricos dise√±ados para controlar motores el√©ctricos (motorcontrol). Esto no es solo un par de canales PWM. Estos son nueve sofisticados m√≥dulos PWM de dos canales (PWM), de los cuales tres son m√≥dulos (HRPWM) con un modo de resoluci√≥n "alta". Estos son seis m√≥dulos separados de captura CAP de 32 bits. Veinticuatro (!) Canales de ADC de 12 bits con un administrador de lanzamiento flexible, un promediador incorporado y comparadores digitales. Dos decodificadores de cuadratura (QEP), un mont√≥n de interfaces de comunicaci√≥n, memoria interna de usuario, relojes, todo esto en el n√∫cleo ARM Cortex-M4F con un megabyte de memoria flash "a bordo" y un rendimiento de 100 MIPS. Interesante?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, para no enumerar todas las caracter√≠sticas t√©cnicas del producto en el art√≠culo, lo env√≠o a la p√°gina del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio web del fabricante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Hay una lista corta y una hoja de datos completa (aunque siempre se esconde en diferentes rincones del sitio y al momento de escribir, puede descargarla ... de la tabla de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desarrollos actuales</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Y en el art√≠culo ser√° mejor que te diga algo que no est√° escrito en hojas de datos.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un poco de historia</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El trabajo en el microcontrolador (en adelante denominado MK) comenz√≥ en 2012 por la empresa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPP Digital Solutions,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por orden de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OJSC NIIET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Voronezh.) Se adquirieron licencias para el n√∫cleo ARM Cortex-M4F y algunos m√≥dulos perif√©ricos de comunicaci√≥n, y algunos de los m√≥dulos fueron desarrollados por esta compa√±√≠a de forma independiente: m√≥dulos PWM, un controlador ADC (no el propio ADC, sino un administrador para administrarlo), un m√≥dulo de captura CAP y un m√≥dulo decodificador de cuadratura QEP. NPP Digital Solutions primero produjo una maqueta de microcontrolador en el Kintex7 FPGA, que implement√≥ toda la l√≥gica del futuro microcontrolador, incluido el n√∫cleo ARM. Pero FPGA es un producto libremente reprogramable que le permite corregir errores en la l√≥gica MK si se detectan despu√©s de pasar las pruebas (adem√°s de las pruebas en un simulador). ¬øPero c√≥mo probar un microcontrolador motorcontrol? ¬°Adem√°s de las pruebas sint√©ticas, por supuesto, en la verdadera tarea de controlar un motor el√©ctrico! Para ello, NPP "Digital Solutions" se dirigi√≥ a nosotros en</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPF Vector LLC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ya que tenemos mucha experiencia en el campo de los accionamientos el√©ctricos basados ‚Äã‚Äãen MK Texas Instruments </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aunque m√°s bien porque estamos sentados en un edificio vecino</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En discusiones conjuntas al dise√±ar perif√©ricos para controlar motores el√©ctricos, se decidi√≥ tomar TMS320F28335 Texas Instruments (TI) como modelo, ya que este microcontrolador tiene probablemente los perif√©ricos de control de motores m√°s potentes y flexibles, merecidamente respetados en todo el mundo. Por lo tanto, armado con hojas de datos de TI, las "Soluciones Digitales" crearon sobre la base la l√≥gica interna de los m√≥dulos PWM, CAP y QEP para el K1921VK01T. Adem√°s, en base a nuestra experiencia con TI MK, tambi√©n propusimos algunas mejoras que TI carece. Este es un filtro de pulsos cortos en un m√≥dulo PWM (no todos los controladores de teclas de encendido, como abrir / cerrar durante un per√≠odo de tiempo muy corto, IGBT puede entrar en modo lineal), estos son algunos de los matices en el m√≥dulo decodificador de cuadratura, que le permiten deshacerse de los problemas al cambiar los divisores del medidor sobre la marcha etc.Las "soluciones digitales" los tomaron en cuenta y ampliaron la funcionalidad perif√©rica en consecuencia en comparaci√≥n con los m√≥dulos TI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si bien NPP Digital Solutions desarroll√≥ la l√≥gica interna de los m√≥dulos, en NPF Vector hicimos una prueba para probar el futuro microcontrolador. Era un peque√±o convertidor de frecuencia con seis transistores ("servoamplificador"), que estaba conectado por circuitos de control al prototipo de microcontrolador en el FPGA, y la parte de potencia estaba conectada a un peque√±o servomotor con sensores de posici√≥n Hall (para verificar el m√≥dulo CAP) y un sensor de posici√≥n en cuadratura (para verificar el m√≥dulo QEP) ) Nuestro objetivo era este: escribir software para el microcontrolador para garantizar el control vectorial completo del motor el√©ctrico utilizando cualquier sensor de posici√≥n de su elecci√≥n o ambos a la vez. Y, por supuesto, informar todos los problemas encontrados en la periferia a "Soluciones Digitales".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pesar de muchas de las propias pruebas de MK en Digital Solutions, se encontraron muchos errores durante las pruebas en un motor el√©ctrico con corriente. B√°sicamente, se asociaron con una implementaci√≥n inexacta de la l√≥gica de bloque interno, que no se describi√≥ expl√≠citamente en las hojas de datos de Texas Instruments. Por ejemplo, ¬øqu√© debe producir el m√≥dulo PWM si el punto de ajuste de comparaci√≥n se establece por encima del per√≠odo del temporizador? O si se incluye un divisor de se√±al de entrada para un decodificador de cuadratura, ¬ødeber√≠a el m√≥dulo detectar un cambio en la direcci√≥n de rotaci√≥n por una se√±al dividida o por la entrada original? Las respuestas a estas preguntas pueden ser obvias para el accionamiento el√©ctrico, pero no obvias para el arquitecto de la l√≥gica del microcontrolador. En la medida de lo posible, detectamos errores similares junto con Digital Solutions. La unidad ha funcionado con √©xito en el control de vectores sin ning√∫n problema.Sin embargo, por supuesto, no pudimos cubrir todos los errores con tales pruebas; seguro que en otras tareas los errores comenzar√°n a aparecer nuevamente. Pero para esto, hay erratas y nuevas revisiones de microcontroladores: para corregir errores, primero debe recopilarlos. Despu√©s de depurar la l√≥gica MK en el FPGA con "Soluciones digitales", se realiz√≥ el "cableado" del MK (o lo que sea)</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øSe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> llama microcontroladores? </font><font style="vertical-align: inherit;">¬øTopolog√≠a?), Despu√©s de lo cual todos los resultados del trabajo fueron transferidos a NIIET. </font><font style="vertical-align: inherit;">Por cierto, ya hemos encontrado varios errores despu√©s del lanzamiento de MK en la "piedra", pero NIIET los consider√≥ lo suficientemente cr√≠ticos como para cambiar el dise√±o de MK: se acumulan m√°s, lo solucionar√°n.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titulo</font></font></h1><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/086/09f/ff5/08609fff50fd4295ba078743bb8a0811.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n debo decir que el microcontrolador sobrevivi√≥ a varios nombres. </font><font style="vertical-align: inherit;">Al principio, durante el desarrollo, ten√≠a el nombre en clave "MS01", luego el lote experimental de piedras se llamaba NT32M4F1, y luego se convirti√≥ en K1921VK01T (adem√°s, en algunos lugares las letras est√°n escritas en ruso, en otras letras en ingl√©s). </font><font style="vertical-align: inherit;">Por lo tanto, si ve estos nombres en los primeros art√≠culos y publicaciones sobre este MK, no se sorprenda.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que tan caro</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actualmente (a principios de 2016), el NIIET est√° listo para vender el primer lote de microcontroladores, que ya ha comenzado a llegar a los clientes. Los cristales est√°n </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">encerrados</font></a><font style="vertical-align: inherit;"> en </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">parte</font></a><font style="vertical-align: inherit;"> en pl√°stico, en </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">parte</font></a><font style="vertical-align: inherit;"> en cer√°mica (de modo que en aplicaciones cr√≠ticas no funciona c√≥mo usted </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mismo_sabe_que_</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) El precio de la piedra en pl√°stico a finales de 2015, al parecer, fue ligeramente inferior a 3 tr, que es m√°s alto que el precio de TI TMS320F28335 al comprar en Rusia (en el momento de la escritura, el coeficiente para convertir "sus" precios a "nuestros" era 76). Sin embargo, en TMS320F28335 no hay memoria de usuario y horas, debe configurar las externas, por lo que el costo al final se vuelve comparable. Esto hace que K1921VK01T sea prometedor no solo en t√©rminos de sustituci√≥n de importaciones, sino tambi√©n por simples "intereses mercantiles". Aunque esta comparaci√≥n, por supuesto, no es del todo correcta: puede encontrar un mont√≥n de ejemplos de cristales m√°s baratos en el Cortex-M4F y con una frecuencia de reloj m√°s alta, pero con menos perif√©ricos. Por lo tanto, para tareas simples, el K1921VK01T ser√° excesivamente grande y costoso. Pero para la aplicaci√≥n principal (control de motores el√©ctricos y electr√≥nica de potencia compleja), es competitiva.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© tenemos con el rendimiento?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Hicimos una presentaci√≥n en la exposici√≥n sobre esto hace un a√±o, la presentaci√≥n se puede encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nuestras pruebas, por supuesto, no pretenden ser particularmente precisas: despu√©s de todo, no ejecutamos puntos de referencia reales, sino que "enrollamos" el mismo sistema de control de vectores en la prueba (¬øy qu√© m√°s puede excitar las unidades el√©ctricas?). Pero un breve recuento de la presentaci√≥n es este: la arquitectura ARM Cortex-M4F va a la zaga del DSP central C28 TI en los c√°lculos promedio requeridos para las tareas de manejo. Si reduce la precisi√≥n de los c√°lculos, cuando sea posible, utilizando funciones trigonom√©tricas aproximadas, etc., puede reducir esta brecha a aproximadamente el 15%. Pero al mismo tiempo, la frecuencia de reloj de los n√∫cleos C28 superiores (el mismo TMS320F28335) es de 150 MHz, y la frecuencia de K1921VK01T es de 100 MHz. Por lo tanto, con todas las optimizaciones de la biblioteca, el K1921VK01T es equivalente en potencia computacional en alg√∫n lugar a la serie TI piccolo MK con una frecuencia de 90 MHz. Lo que se puede interpretar como ... muy bueno, en nuestra opini√≥n,porque si usa correctamente todas las campanas y silbatos de hardware de la nueva MK como DMA y mediciones de ADC de auto-filtrado, puede ahorrar mucho en ciclos de reloj. De una forma u otra, logramos "meter" en K1921VK01T nuestro proyecto m√°s exigente de rendimiento, basado en el TMS320F2810 (150MHz, n√∫cleo C28), que ya choca con este mismo 2810.</font></font><br>
<br>
<h1>     ?</h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Y qu√© podr√≠a estar mal con ellos, es ARM! Normal, sin ning√∫n "pero". Tome cualquier JTAG, cualquier entorno de desarrollo, pero ... no, despu√©s de todo, ninguno no funcionar√°. "Pero" es el firmware de la memoria flash. A pesar de que el n√∫cleo ARM en s√≠ est√° estandarizado y cualquier JTAG y entorno se conectar√°n a K1921VK01T, no es tan simple con el firmware flash. Parece que cada fabricante de microcontroladores considera que es su deber hacer sus propios registros para trabajar con el firmware de su memoria flash, por lo que los creadores de herramientas de desarrollo est√°n atormentados con el apoyo de todo este zool√≥gico. K1921VK01T tampoco se queda atr√°s en este aspecto: tambi√©n hay m√©todos para trabajar con flash all√≠. Pero si para fabricantes eminentes programadores de memoria flash (controlador, flasher o ¬øc√≥mo deber√≠a llamarlo?) En entornos de desarrollo est√°n escritos y funcionan de f√°brica, entonces para K1921VK01T todo funciona solo para esos entornospara lo cual los programadores escribieron en NIIET. Afortunadamente, para IAR y Keil, todo est√° listo y se pueden encontrar ejemplos de proyectos con instrucciones de firmware en</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foro NIIET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as√≠ como en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositorio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abierto </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">en Bitbucket</font></a><font style="vertical-align: inherit;"> , que mantiene NIIET. Adem√°s, en NPF Vector escribimos soporte para la programaci√≥n del flash K1921VK01T para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenOCD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Abrir depurador en chip). Esta es una capa entre el depurador GDB y el hierro en forma de diferentes emuladores JTAG y diferentes piedras. Pero mientras est√°bamos sacando la "revisi√≥n de c√≥digo" en el repositorio de OpenOCD con resoluci√≥n de conflictos, los desarrolladores de NIIET escribieron lo mismo, pero fue mejor (tambi√©n agregaron la funci√≥n de grabaci√≥n del usuario adem√°s de grabar la memoria flash principal), pero ... esta es toda la letra. ¬øQu√© da este OpenOCD? Este es un tipo de capa de abstracci√≥n de hierro, que le permite crear su propio entorno de desarrollo gratuito para K1921VK01T basado en cualquier IDE popular. En el "Vector" amamos Eclipse (porque el entorno de TI Code Composer Studio, comenzando con v4, se basa en √©l, estamos acostumbrados </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y, en general, no hay mejor IDE en el mundo que Eclipse</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Y los desarrolladores de NIIET crearon un entorno de desarrollo en Qt Creator. Pero, en general, el significado es el mismo aqu√≠ y all√°: tomas el entorno, tomas el conjunto de herramientas gratuitas de desarrollo cruzado para GCC, tomas el complemento para trabajar con OpenOCD, OpenOCD, algunas configuraciones, un poco de magia ... y ya trabajas completamente con K1921VK01T, olvid√°ndote de IAR y Keil. Al momento de escribir, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publicamos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nuestro ensamblaje Eclipse (lo llamamos VectorIDE) para K1921VK01T </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">en nuestro sitio web</font></a><font style="vertical-align: inherit;"> , vea la receta de Qt Creator en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foro NIIET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Personalmente, llevamos a cabo todos los proyectos para K1921VK01T en un entorno gratuito y le asesoramos: el conjunto de compiladores de GCC realmente no va a la zaga de los IAR de marca (vea nuestra misma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), pero si es una empresa de buena reputaci√≥n, no necesita comprar software importado caro (¬°ya con un factor de conversi√≥n de </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">76, Karl!</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 78!). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh si Hay una cosa mas. Se llama </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codemaster ++ [ARM]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este es un entorno de desarrollo 100% dom√©stico, incluidos los compiladores, y tambi√©n dise√±ado para K1921VK01T. Examinamos sus primeras versiones hace un a√±o, pero descubrimos que a√∫n no estaba listo, un poco en t√©rminos de compiladores y mucho en t√©rminos de facilidad de edici√≥n de c√≥digo (aunque en esto puede competir con el IAR, qui√©n sabe a qu√© me refiero). Pero es peque√±o y r√°pido, y en la interfaz se asemeja a alg√∫n tipo de depurador de "piratas inform√°ticos" como OllyDbg (comp√°rese: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uno</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). En general, quiz√°s alguien est√© interesado. Debo decir que los desarrolladores (empresa</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Fiton"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) se esforz√≥ mucho, incluso solicit√≥ en alg√∫n momento nuestro punto de referencia a la "control vectorial del motor" para optimizar sus compiladores.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© tenemos con los kits de depuraci√≥n?</font></font></h1><br>
<img src="https://habrastorage.org/files/8ec/122/5f7/8ec1225f7ca24599a4a47bb25091e9f1.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A principios de 2016, cuatro tableros de depuraci√≥n en K1921VK01T son conocidos en la naturaleza. Esta es nuestra </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VectorCARD K1921BK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y otras ... de la competencia. Ok, que as√≠ sea, aqu√≠ est√°n los enlaces </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LDM-HELPER-K1921BK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MBS-K1921VK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tambi√©n parece que el NIIET en s√≠ tiene su propio tablero NIIET_1921BK01T, pero en su sitio, aparentemente, se est√° escondiendo de m√≠; si alguien encuentra un enlace, estar√© encantado de complementar el art√≠culo. ¬øCu√°l es la diferencia entre ellos? No vendemos una placa simple, sino un kit con un inversor, motor el√©ctrico, control vectorial en c√≥digos fuente C (seg√∫n lo que escribimos en ese momento para Digital Solutions), as√≠ como con un programa de nivel superior y un controlador CANopen para monitorear todos los procesos dentro del disco - vea nuestro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primer art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Por lo tanto, si solo quieres jugar con el nuevo MK, parpadear un LED o enviar datos a trav√©s de cualquier interfaz de comunicaci√≥n, entonces es mejor comprar placas de depuraci√≥n de la competencia (aunque tambi√©n tenemos una opci√≥n de placa desnuda por 15 tr, pero es completamente "desnuda" - algunas conclusiones) Sin embargo, si desea crear una unidad el√©ctrica en el nuevo MK, nuestro kit y software de depuraci√≥n puede ahorrarle medio a√±o o un a√±o de tiempo de desarrollo (o tal vez m√°s, dependiendo de si conoce la teor√≠a de la unidad el√©ctrica y si tiene sus propias herramientas de depuraci√≥n y oscilograf√≠a) similar al nuestro). Si lees detenidamente el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primer art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces, probablemente, recuerde que la depuraci√≥n de un sistema de control para un accionamiento el√©ctrico sin medios para visualizar los procesos en el interior es imposible. Y si en Texas Instruments el entorno de desarrollo es capaz de mostrar oscilogramas "listos para usar" basados ‚Äã‚Äãen los datos de la matriz de memoria de MK, para ARM en entornos de desarrollo universal (no de un fabricante espec√≠fico de MK), tal funci√≥n a√∫n no se ha observado (si los desarrolladores de Fiton leen esto - ¬øDesea modificar su Codemaster ++ [ARM] con el generador de osciloscopios? ¬°Es f√°cil hacerlo!). En nuestro kit de depuraci√≥n, tales medios de visualizaci√≥n de formas de onda est√°n presentes, por lo que puede ver de inmediato todo lo que se supone que controla los motores el√©ctricos: la forma de corrientes de fase, voltajes, entradas / salidas de todos los reguladores, etc. El precio de nuestro kit es grande, aproximadamente 130 tr.(actualmente solo un motor el√©ctrico con todos los sensores de posici√≥n cuesta alrededor de 30 tr). Pero para una organizaci√≥n que desea aprender un nuevo producto, esto no deber√≠a ser cr√≠tico: un entorno de desarrollo comercial solo para ARM puede costar m√°s.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desventajas de K1921VK01T</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øCu√°les son las principales desventajas del nuevo K1921VK01T que se pueden observar ahora? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ En primer lugar, este es sin duda un producto crudo, ya que hasta ahora estaba programado por 10-20 personas. </font><font style="vertical-align: inherit;">Cuando m√°s desarrolladores se sientan en √©l, se detectar√°n errores y se lanzar√°n nuevas revisiones. </font><font style="vertical-align: inherit;">As√≠ que prep√°rate. </font><font style="vertical-align: inherit;">Pero, sin embargo, pueden girar los motores, retorcidos personalmente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Por el momento, la documentaci√≥n tambi√©n est√° h√∫meda. </font><font style="vertical-align: inherit;">Hay pocos errores, pero se explican algunas cosas ... no est√° del todo claro. </font><font style="vertical-align: inherit;">Se podr√≠a pintar un poco m√°s de detalle, dar ejemplos. </font><font style="vertical-align: inherit;">Creo que con el tiempo se finalizar√°.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ El microcontrolador es muy grande y sofisticado. Esto es para alguien un plus, para alguien un menos. Muy pocas aplicaciones cubren la gama completa de sus capacidades. NIIET ya est√° pensando en una serie de MK basada en √©l, con diferentes edificios y un conjunto de perif√©ricos. Pero por ahora, solo hay K1921VK01T.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Tiene un ADC espec√≠fico. A menudo, los fabricantes de MK instalan un m√≥dulo ADC r√°pido (12 MS / s) y lo multiplexan a trav√©s de varios canales; por ejemplo, esto fue hecho por Texas Instruments en la serie C2000. Pero en K1921VK01T hay 12 m√≥dulos ADC lentos de dos canales (1.7MS / s) que funcionan en paralelo. ¬øPor qu√© es malo adem√°s de la incapacidad de medir algo muy r√°pido? Si hay un ADC en el MK, entonces en la placa del controlador puede enviar se√±ales de referencia calibradas, digamos 1V y 2V, a dos canales no utilizados, y usarlos para calcular y compensar el error multiplicativo y el error de compensaci√≥n de este ADC, extendiendo la correcci√≥n a todos los canales (el ADC es uno ) Cuando hay muchos ADC en MK, tal truco no funcionar√°, todos tendr√°n sus propios errores personales. Utilizamos el truco de calibraci√≥n en el Texas Instruments MK tipo TMS320F2810 (esto se describe en la hoja de datos y se recomienda),aqu√≠ en K1921VK01T sin calibraci√≥n, obtuvimos una menor precisi√≥n del ADC en comparaci√≥n con el TMS320F2810 calibrado. Tuvimos que hacer un soporte especial para calibrar cada m√≥dulo ADC K1921VK01T de forma independiente y unir la tabla de calibraci√≥n en la memoria de usuario incorporada. Luego, la precisi√≥n de las mediciones anal√≥gicas result√≥ ser comparable (la calibraci√≥n casi no se aleja flotando de la temperatura, se verific√≥). Probablemente, NIIET deber√≠a mostrar una tabla de este tipo en la f√°brica, ser√≠a conveniente. Pero mientras el flash est√° vac√≠o.Luego, la precisi√≥n de las mediciones anal√≥gicas result√≥ ser comparable (la calibraci√≥n casi no se aleja flotando de la temperatura, se verific√≥). Probablemente, NIIET deber√≠a mostrar una tabla de este tipo en la f√°brica, ser√≠a conveniente. Pero mientras el flash est√° vac√≠o.Luego, la precisi√≥n de las mediciones anal√≥gicas result√≥ ser comparable (la calibraci√≥n casi no se aleja flotando de la temperatura, se verific√≥). Probablemente, NIIET deber√≠a mostrar una tabla de este tipo en la f√°brica, ser√≠a conveniente. Pero mientras el flash est√° vac√≠o.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ La frecuencia de 100 MHz, por supuesto, es bastante baja, me gustar√≠a m√°s r√°pido. Pero eso es, eso es. Aunque en algunos lugares escriben la frecuencia de 125 MHz, todo depende de la temperatura ambiente. "Soluciones digitales" inform√≥ dicha informaci√≥n no oficial: dentro del cristal est√° dise√±ado para un m√°ximo de 125 grados. La temperatura en √©l es aproximadamente 15 grados m√°s alta que el medio ambiente. Seg√∫n el proyecto, K1921VK01T deber√≠a funcionar a 85 grados del entorno + reserva, lo que se garantiza que se alcanzar√° a 100 MHz. De hecho, MK puede acelerarse por encima de 100 MHz, las muestras individuales trabajaron a 140-170 MHz, pero depende de la muestra. Por lo tanto, si el cristal no se sobrecalienta, se puede dispersar si alguien lo necesita. Pero si en su aplicaci√≥n hace calor (+85), entonces es mejor no intimidar por encima de 100 MHz.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ No hay un gestor de arranque oficial (programador) a trav√©s de las interfaces de comunicaci√≥n (CAN, RS). </font><font style="vertical-align: inherit;">La costura MK solo es posible a trav√©s de JTAG / SWD. </font><font style="vertical-align: inherit;">En consecuencia, si el controlador del producto est√° en un caso cerrado, entonces debe escribir su gestor de arranque para la interfaz de comunicaci√≥n deseada. </font><font style="vertical-align: inherit;">O espere hasta que NIIET escriba. </font><font style="vertical-align: inherit;">Hasta ahora, no, pero creo que aparecer√°.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque, ¬øqu√© m√°s es la conclusi√≥n? </font><font style="vertical-align: inherit;">¬°Todo acaba de comenzar! </font><font style="vertical-align: inherit;">Finalmente, hay un microcontrolador dom√©stico en el que realmente puedes hacer un accionamiento el√©ctrico. </font><font style="vertical-align: inherit;">Antes de esto, todos los MK nacionales existentes eran d√©biles por el n√∫cleo o d√©biles por la periferia para hacer frente a las tareas de control de motores. </font><font style="vertical-align: inherit;">Pero ahora: total libertad para las estructuras de control m√°s complejas y la unidad de potencia m√°s compleja. </font><font style="vertical-align: inherit;">Me gustar√≠a se√±alar especialmente las perspectivas de este microcontrolador para servoaccionamientos de m√°quinas. </font><font style="vertical-align: inherit;">Hasta ahora, en Rusia no era posible fabricar una m√°quina de precisi√≥n multieje totalmente dom√©stica, ya que (una de las razones) no hab√≠a nada para hacer un servoaccionamiento de alta calidad. </font><font style="vertical-align: inherit;">Ahora hay un microcontrolador.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es389129/">https://habr.com/ru/post/es389129/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es389119/index.html">Agregar y configurar la base de datos 1C al servidor</a></li>
<li><a href="../es389121/index.html">Firefox 46 admitir√° m√∫ltiples monitores con diferentes densidades de p√≠xeles</a></li>
<li><a href="../es389123/index.html">M√©todos para depurar el software del microcontrolador en una unidad el√©ctrica</a></li>
<li><a href="../es389125/index.html">Galactoseismology: c√≥mo las galaxias enanas que consisten en materia oscura dejan rastros en el gas interestelar</a></li>
<li><a href="../es389127/index.html">Comercializaci√≥n agresiva o c√≥mo la motivaci√≥n de un arco brillante en la mu√±eca ("bolas") difiere de la motivaci√≥n de un brazalete de fitness</a></li>
<li><a href="../es389133/index.html">–°–æ–±–∞–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç —ç–º–æ—Ü–∏–∏ —á–µ–ª–æ–≤–µ–∫–∞ —Å –ø–æ–º–æ—â—å—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤ —á—É–≤—Å—Ç–≤</a></li>
<li><a href="../es389139/index.html">Drinky es un robot amigo que siempre est√° ah√≠</a></li>
<li><a href="../es389141/index.html">Discusi√≥n: amantes de la m√∫sica y audi√≥filos, reproductores de red y ac√∫stica incorporada.</a></li>
<li><a href="../es389143/index.html">Google Street View llega al pa√≠s de las maravillas en miniatura</a></li>
<li><a href="../es389145/index.html">C√≥mo evitar que los terroristas usen drones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>