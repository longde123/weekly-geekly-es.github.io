<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📨 ♌️ ♑️ Pengalaman menggunakan "koordinator" dalam proyek "iOS" nyata 🧑‍🤝‍🧑 🏆 💷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dunia pemrograman modern kaya akan tren, dan ini benar ganda untuk dunia pemrograman aplikasi "iOS" . Saya harap saya tidak banyak salah dalam menyata...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengalaman menggunakan "koordinator" dalam proyek "iOS" nyata</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444038/">  Dunia pemrograman modern kaya akan tren, dan ini benar ganda untuk dunia pemrograman aplikasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"iOS"</a> .  Saya harap saya tidak banyak salah dalam menyatakan bahwa salah satu pola arsitektur paling "modis" beberapa tahun terakhir adalah "koordinator".  Jadi tim kami beberapa waktu lalu menyadari keinginan yang tak tertahankan untuk mencoba teknik ini pada diri mereka sendiri.  Selain itu, kasus yang sangat bagus muncul - perubahan yang signifikan dalam logika dan perencanaan ulang total navigasi dalam aplikasi. <br><a name="habracut"></a><br><h2>  Masalahnya </h2><br>  Sering terjadi bahwa pengendali mulai mengambil terlalu banyak: "memberi perintah" langsung ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>UINavigationController</code></a> , "berkomunikasi" dengan pengendali "saudara" mereka (bahkan menginisialisasi dan meneruskannya ke tumpukan navigasi) - secara umum, ada banyak yang harus dilakukan tentang dari yang seharusnya tidak mereka curigai. <br><br>  Salah satu cara yang mungkin untuk menghindari hal ini adalah "koordinator".  Selain itu, ternyata, cukup nyaman untuk bekerja dan sangat fleksibel: templat ini mampu mengelola acara navigasi kedua modul kecil (mewakili, mungkin, hanya satu layar tunggal), dan seluruh aplikasi (meluncurkan "aliran" sendiri, secara relatif, langsung dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>UIApplicationDelegate</code></a> ). <br><br><h2>  Ceritanya </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Martin Fowler,</a> dalam bukunya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Patterns of Enterprise Application Architecture,</a> menyebut pola ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Application Controller</a> .  Dan popularizer pertamanya di lingkungan "iOS" adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sorush Khanlu</a> : semuanya dimulai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">laporannya tentang "NSSpain"</a> pada tahun 2015.  Kemudian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ulasan</a> muncul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di situs webnya</a> , yang memiliki beberapa sekuel (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> ). <br><br>  Dan kemudian banyak ulasan diikuti (permintaan "koordinator ios" memberikan puluhan hasil dengan kualitas dan tingkat detail yang berbeda), termasuk bahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">panduan tentang Ray Wenderlich</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebuah artikel dari Paul Hudson tentang "Peretasan Dengan Swift"</a> sebagai bagian dari serangkaian materi tentang cara menyingkirkan masalah. Pengontrol "Massive". <br><br>  Ke depan, topik diskusi yang paling menonjol adalah masalah tombol kembali di <code>UINavigationController</code> , klik yang diproses bukan oleh kode kita, tetapi kita hanya bisa mendapatkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">panggilan balik</a> . <br><br>  Sebenarnya, mengapa ini menjadi masalah?  Koordinator, seperti objek apa pun, agar dapat hidup dalam memori, perlu beberapa objek lain untuk "memiliki" mereka.  Sebagai aturan, ketika membangun sistem navigasi menggunakan koordinator, beberapa koordinator menghasilkan yang lain dan menjaga hubungan yang kuat dengan mereka.  Ketika "meninggalkan zona tanggung jawab" dari koordinator asal, kontrol kembali ke koordinator asal, dan memori yang ditempati oleh originator harus dibebaskan. <br><br>  Sorush memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">visinya sendiri untuk menyelesaikan masalah ini</a> , dan juga mencatat beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pendekatan yang</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">layak</a> .  Tapi kita akan kembali ke ini. <br><br><h2>  Pendekatan pertama </h2><br>  <i>Sebelum mulai menunjukkan kode asli, saya ingin mengklarifikasi bahwa meskipun prinsip-prinsipnya sepenuhnya konsisten dengan prinsip-prinsip yang kami temukan dalam proyek, kutipan dari kode dan contoh penggunaannya disederhanakan dan dikurangi di mana pun tidak mengganggu persepsi mereka.</i> <br><br>  Ketika kami pertama kali mulai bereksperimen dengan koordinator dalam tim, kami tidak punya banyak waktu dan kebebasan untuk bertindak: perlu mempertimbangkan prinsip-prinsip yang ada dan perangkat navigasi.  Opsi implementasi pertama untuk koordinator didasarkan pada "router" yang umum, yang dimiliki dan dioperasikan oleh <code>UINavigationController</code> .  Dia tahu bagaimana melakukan semua instance <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>UIViewController</code></a> yang diperlukan sehubungan dengan navigasi - push / pop, present / dismiss plus manipulasi dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">root controller</a> .  Contoh antarmuka router seperti itu: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UIKit protocol Router { func present(_ module: UIViewController, animated: Bool) func dismissModule(animated: Bool, completion: (() -&gt; Void)?) func push(_ module: UIViewController, animated: Bool, completion: (() -&gt; Void)?) func popModule(animated: Bool) func setAsRoot(_ module: UIViewController) func popToRootModule(animated: Bool) }</code> </pre> <br>  Implementasi spesifik diinisialisasi dengan turunan <code>UINavigationController</code> dan tidak mengandung sesuatu yang rumit.  Satu-satunya batasan: Anda tidak dapat melewatkan instance lain dari <code>UINavigationController</code> sebagai argumen untuk metode antarmuka (untuk alasan yang jelas: <code>UINavigationController</code> tidak dapat berisi <code>UINavigationController</code> dalam tumpukannya - ini adalah batasan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>UIKit</code></a> ). <br><br>  Koordinator, seperti objek apa pun, membutuhkan pemilik - objek lain yang akan menyimpan tautan ke sana.  Tautan ke root dapat disimpan oleh objek yang menghasilkannya, tetapi setiap koordinator juga dapat menghasilkan koordinator lain.  Oleh karena itu, antarmuka dasar ditulis untuk menyediakan mekanisme manajemen untuk koordinator yang dihasilkan: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> childCoordinators = [<span class="hljs-type"><span class="hljs-type">Coordinator</span></span>]() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } func remove(dependency coordinator: Coordinator) { // ... } }</span></span></code> </pre> <br>  Salah satu keuntungan tersirat dari koordinator adalah enkapsulasi pengetahuan tentang subkelas spesifik dari <code>UIViewController</code> .  Untuk memastikan interaksi router dan koordinator, kami memperkenalkan antarmuka berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Presentable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">presented</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> }</code> </pre> <br>  Maka setiap koordinator khusus harus mewarisi dari <code>Coordinator</code> dan mengimplementasikan antarmuka <code>Presentable</code> , dan antarmuka router harus mengambil bentuk berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Router</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">present</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> module: Presentable, animated: Bool)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dismissModule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(animated: Bool, completion: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)?) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> module: Presentable, animated: Bool, completion: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)?) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">popModule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(animated: Bool)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAsRoot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> module: Presentable)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">popToRootModule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(animated: Bool)</span></span></span></span> }</code> </pre> <br>  (Pendekatan dengan <code>Presentable</code> juga memungkinkan Anda menggunakan koordinator di dalam modul yang ditulis untuk berinteraksi langsung dengan instance <code>UIViewController</code> , tanpa menjadikannya (modul) pemrosesan radikal.) <br><br>  Contoh singkat dari semua tindakan ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FirstCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Presentable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">presented</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">UIViewController</span></span>() } } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecondCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Presentable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">presented</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">UIViewController</span></span>() } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nc = <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> router = <span class="hljs-type"><span class="hljs-type">RouterImpl</span></span>(navigationController: nc) <span class="hljs-comment"><span class="hljs-comment">// Router implementation. router.setAsRoot(FirstCoordinator()) router.push(SecondCoordinator(), animated: true, completion: nil) router.popToRootModule(animated: true)</span></span></code> </pre> <br><h2>  Perkiraan selanjutnya </h2><br>  Dan suatu hari tiba saatnya untuk perubahan total navigasi dan kebebasan berekspresi mutlak!  Saat ketika tidak ada yang menghalangi kami untuk mencoba menerapkan navigasi pada koordinator menggunakan metode <code>start()</code> didambakan - versi yang memikat awalnya dengan kesederhanaan dan keringkasannya. <br><br>  Fitur <code>Coordinator</code> disebutkan di atas jelas tidak akan berlebihan.  Tetapi metode yang sama perlu ditambahkan ke antarmuka umum: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> childCoordinators = [<span class="hljs-type"><span class="hljs-type">Coordinator</span></span>]() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } func remove(dependency coordinator: Coordinator) { // ... } func start() { } }</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Swift"</a> tidak menawarkan kemampuan untuk mendeklarasikan kelas abstrak (karena lebih berorientasi pada pendekatan berorientasi protokol daripada yang lebih klasik, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">berorientasi objek</a> ), oleh karena itu metode <code>start()</code> dapat dibiarkan dengan implementasi atau dorongan kosong ada sesuatu seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>fatalError(_:file:line:)</code></a> (memaksa untuk menimpa metode ini dengan ahli waris).  Secara pribadi, saya lebih suka opsi pertama. <br><br>  Tetapi Swift memiliki peluang besar untuk menambahkan metode implementasi standar ke metode protokol, jadi pemikiran pertama, tentu saja, bukan untuk mendeklarasikan kelas dasar, tetapi untuk melakukan sesuatu seperti ini: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } func remove(dependency coordinator: Coordinator) { // ... } }</span></span></code> </pre> <br>  Tetapi ekstensi protokol tidak dapat mendeklarasikan bidang yang disimpan, dan implementasi kedua metode ini jelas harus didasarkan pada properti tipe tersimpan pribadi. <br><br>  Dasar dari koordinator tertentu akan terlihat seperti ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseCoordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } }</span></span></code> </pre> <br>  Setiap dependensi yang diperlukan agar koordinator berfungsi dapat ditambahkan ke inisialisasi.  Sebagai contoh umum, instance dari <code>UINavigationController</code> . <br><br>  Jika ini adalah koordinator root yang tanggung jawabnya adalah memetakan <code>UIViewController</code> root, koordinator dapat, misalnya, menerima instance baru dari <code>UINavigationController</code> dengan tumpukan kosong. <br><br>  Saat memproses acara (lebih lanjut tentang itu nanti), koordinator dapat meneruskan <code>UINavigationController</code> ini lebih lanjut ke koordinator lain yang dihasilkannya.  Dan mereka juga dapat melakukan dengan kondisi navigasi saat ini apa yang mereka butuhkan: "push", "present", dan setidaknya mengganti seluruh tumpukan navigasi. <br><br><h3>  Kemungkinan peningkatan antarmuka </h3><br>  Ternyata nanti, tidak setiap koordinator akan menghasilkan koordinator lain, jadi tidak semuanya tergantung pada kelas dasar seperti itu.  Oleh karena itu, salah satu kolega dari tim terkait menyarankan untuk menyingkirkan warisan dan memperkenalkan antarmuka manajer dependensi sebagai ketergantungan eksternal: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CoordinatorDependencies</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultCoordinatorDependencies</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CoordinatorDependencies</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dependencies = [<span class="hljs-type"><span class="hljs-type">Coordinator</span></span>]() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dependency coordinator: Coordinator)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } func remove(dependency coordinator: Coordinator) { // ... } } final class SomeCoordinator: Coordinator { private let dependencies: CoordinatorDependencies init(dependenciesManager: CoordinatorDependencies = DefaultCoordinatorDependencies()) { dependencies = dependenciesManager } func start() { // ... } }</span></span></code> </pre> <br><h3>  Menangani acara yang dibuat pengguna </h3><br>  Nah, koordinator menciptakan dan entah bagaimana memulai pemetaan baru.  Kemungkinan besar, pengguna melihat layar dan melihat serangkaian elemen visual yang dengannya ia dapat berinteraksi: tombol, bidang teks, dll. Beberapa dari mereka memprovokasi acara navigasi, dan mereka harus dikendalikan oleh koordinator yang membuat pengontrol ini.  Untuk mengatasi masalah ini, kami menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">delegasi</a> tradisional. <br><br>  Misalkan ada subkelas dari <code>UIViewController</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br>  Dan koordinator yang menambahkannya ke stack: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dependencies: <span class="hljs-type"><span class="hljs-type">CoordinatorDependencies</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> navigationController: <span class="hljs-type"><span class="hljs-type">UINavigationController?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(navigationController: <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>, dependenciesManager: <span class="hljs-type"><span class="hljs-type">CoordinatorDependencies</span></span> = <span class="hljs-type"><span class="hljs-type">DefaultCoordinatorDependencies</span></span>()) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController = navigationController dependencies = dependenciesManager } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> vc = <span class="hljs-type"><span class="hljs-type">SomeViewController</span></span>() navigationController?.pushViewController(vc, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } }</code> </pre> <br>  Kami mendelegasikan pemrosesan kejadian pengontrol yang sesuai ke koordinator yang sama.  Di sini, pada kenyataannya, skema klasik digunakan: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeViewControllerRoute</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSomeEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> route: <span class="hljs-type"><span class="hljs-type">SomeViewControllerRoute?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(route: <span class="hljs-type"><span class="hljs-type">SomeViewControllerRoute</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.route = route <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(nibName: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, bundle: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">required</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>?(coder aDecoder: <span class="hljs-type"><span class="hljs-type">NSCoder</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"init(coder:) has not been implemented"</span></span>) } <span class="hljs-meta"><span class="hljs-meta">@IBAction</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { route?.onSomeEvent() } } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dependencies: <span class="hljs-type"><span class="hljs-type">CoordinatorDependencies</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> navigationController: <span class="hljs-type"><span class="hljs-type">UINavigationController?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(navigationController: <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>, dependenciesManager: <span class="hljs-type"><span class="hljs-type">CoordinatorDependencies</span></span> = <span class="hljs-type"><span class="hljs-type">DefaultCoordinatorDependencies</span></span>()) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController = navigationController dependencies = dependenciesManager } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> vc = <span class="hljs-type"><span class="hljs-type">SomeViewController</span></span>(route: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) navigationController?.pushViewController(vc, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeViewControllerRoute</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSomeEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... } }</span></span></code> </pre> <br><h3>  Menangani tombol kembali </h3><br>  Ulasan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagus</a> lain <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari template arsitektur yang dibahas diterbitkan oleh Paul Hudson di situs webnya "Hacking dengan Swift,"</a> bahkan ada yang mengatakan panduan.  Ini juga berisi penjelasan yang sederhana, langsung, dari salah satu solusi yang mungkin untuk masalah tombol kembali yang disebutkan di atas: koordinator (jika perlu) menyatakan dirinya sebagai delegasi dari instance <code>UINavigationController</code> diteruskan kepadanya dan memantau acara yang menarik bagi kami. <br><br>  Pendekatan ini memiliki kelemahan kecil: hanya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>NSObject</code></a> dapat menjadi delegasi <code>UINavigationController</code> . <br><br>  Jadi, ada koordinator yang memunculkan koordinator lain.  Yang lain ini, dengan memanggil <code>start()</code> menambahkan semacam <code>UIViewController</code> ke tumpukan <code>UINavigationController</code> .  Dengan mengeklik tombol kembali pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>UINavigationBar</code></a> yang perlu Anda lakukan adalah membiarkan koordinator asal tahu bahwa koordinator yang dihasilkan telah menyelesaikan pekerjaannya ("flow").  Untuk melakukan ini, kami memperkenalkan alat delegasi lain: delegasi dialokasikan untuk setiap koordinator yang dihasilkan, antarmuka yang diimplementasikan oleh koordinator pembangkit: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CoordinatorFlowListener</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFlowFinished</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(coordinator: Coordinator)</span></span></span></span> } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dependencies: <span class="hljs-type"><span class="hljs-type">CoordinatorDependencies</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> navigationController: <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(navigationController: <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>, dependenciesManager: <span class="hljs-type"><span class="hljs-type">CoordinatorDependencies</span></span> = <span class="hljs-type"><span class="hljs-type">DefaultCoordinatorDependencies</span></span>()) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController = navigationController dependencies = dependenciesManager <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someCoordinator = <span class="hljs-type"><span class="hljs-type">SomeCoordinator</span></span>(navigationController: navigationController, flowListener: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) dependencies.add(someCoordinator) someCoordinator.start() } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainCoordinator</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CoordinatorFlowListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFlowFinished</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(coordinator: Coordinator)</span></span></span></span> { dependencies.remove(coordinator) <span class="hljs-comment"><span class="hljs-comment">// ... } } final class SomeCoordinator: NSObject, Coordinator { private weak var flowListener: CoordinatorFlowListener? private weak var navigationController: UINavigationController? init(navigationController: UINavigationController, flowListener: CoordinatorFlowListener) { self.navigationController = navigationController self.flowListener = flowListener } func start() { // ... } } extension SomeCoordinator: UINavigationControllerDelegate { func navigationController(_ navigationController: UINavigationController, didShow viewController: UIViewController, animated: Bool) { guard let fromVC = navigationController.transitionCoordinator?.viewController(forKey: .from) else { return } if navigationController.viewControllers.contains(fromVC) { return } if fromVC is SomeViewController { flowListener?.onFlowFinished(coordinator: self) } } }</span></span></code> </pre> <br>  Dalam contoh di atas, <code>MainCoordinator</code> tidak melakukan apa-apa: itu hanya meluncurkan aliran koordinator lain - dalam kehidupan nyata, tentu saja, itu tidak berguna.  Dalam aplikasi kami, <code>MainCoordinator</code> menerima data dari luar, yang menurutnya menentukan status aplikasi yang diotorisasi, tidak diotorisasi, dll.  - dan layar mana yang perlu ditampilkan.  Bergantung pada ini, itu meluncurkan aliran koordinator yang sesuai.  Jika koordinator asal telah menyelesaikan pekerjaannya, koordinator utama menerima sinyal tentang hal ini melalui <code>CoordinatorFlowListener</code> dan, katakanlah, meluncurkan aliran koordinator lain. <br><br><h2>  Kesimpulan </h2><br>  Solusi yang biasa, tentu saja, memiliki sejumlah kelemahan (seperti solusi untuk masalah apa pun). <br><br>  Ya, Anda harus menggunakan banyak delegasi, tetapi sederhana dan memiliki arah tunggal: dari yang dihasilkan ke yang dihasilkan (dari controller ke koordinator, dari koordinator yang dihasilkan ke yang dihasilkan). <br><br>  Ya, untuk melarikan diri dari kebocoran memori, Anda harus menambahkan metode delegasi <code>UINavigationController</code> dengan implementasi yang hampir sama untuk setiap koordinator.  (Pendekatan pertama tidak memiliki kelemahan ini, tetapi lebih murah hati membagikan pengetahuan internalnya tentang penunjukan koordinator tertentu.) <br><br>  Tetapi kelemahan terbesar dari pendekatan ini adalah bahwa, dalam kehidupan nyata, koordinator, sayangnya, akan tahu sedikit lebih banyak tentang dunia di sekitar mereka daripada yang kita inginkan.  Lebih tepatnya, mereka harus menambahkan elemen logika yang tergantung pada kondisi eksternal, yang tidak diketahui langsung oleh koordinator.  Pada dasarnya, inilah yang sebenarnya terjadi ketika metode <code>start()</code> <code>onFlowFinished(coordinator:)</code> atau panggilan balik <code>onFlowFinished(coordinator:)</code> .  Dan apa pun bisa terjadi di tempat-tempat ini, dan itu akan selalu menjadi perilaku "hardcoded": menambahkan controller ke stack, mengganti stack, kembali ke root controller - apa pun.  Dan semua ini tidak tergantung pada kompetensi kontroler saat ini, tetapi pada kondisi eksternal. <br><br>  Namun demikian, kodenya “cantik” dan ringkas, sangat bagus untuk bekerja dengannya, dan navigasi melalui kodenya jauh lebih mudah.  Tampaknya bagi kita bahwa dengan kekurangan-kekurangan yang disebutkan itu, dengan menyadarinya, sangat mungkin untuk ada. <br><blockquote>  Terima kasih sudah membaca ke tempat ini!  Saya harap mereka belajar sesuatu yang berguna untuk diri mereka sendiri.  Dan jika Anda tiba-tiba ingin "lebih dari saya", maka di sini ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ke Twitter saya</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444038/">https://habr.com/ru/post/id444038/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444028/index.html">Memperkenalkan Microsoft Game Stack</a></li>
<li><a href="../id444030/index.html">Pengecer online China Gearbest telah membuka database dengan jutaan data pelanggan pribadi</a></li>
<li><a href="../id444032/index.html">Mengapa printer 3D bukan printer</a></li>
<li><a href="../id444034/index.html">7 dosa mematikan seorang manajer</a></li>
<li><a href="../id444036/index.html">Mempercepat C / C ++ file I / O tanpa benar-benar melelahkan</a></li>
<li><a href="../id444040/index.html">Peringkat autosentris. Laporan Yandex tentang menemukan audiens yang relevan untuk penulis Zen</a></li>
<li><a href="../id444044/index.html">Eropa akan mendaur ulang pusat data besi</a></li>
<li><a href="../id444048/index.html">Tip & Trik Forensik Digital: Cara Mendeteksi Perubahan Kebijakan Grup yang digerakkan oleh Penyelundup</a></li>
<li><a href="../id444050/index.html">Diskusi: Apakah Penyimpanan DNA Menjadi Masif</a></li>
<li><a href="../id444052/index.html">Bagaimana kami di IntelliJ IDEA mencari ekspresi lambda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>