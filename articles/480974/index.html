<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐀 🤙🏻 🚪 Desarrollo de aplicaciones en mini aplicaciones VK 🌲 📢 💫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¿Por qué debería buscar desarrollar aplicaciones para trabajar en VK? Tengo muchos años de desarrollo front-end para servicios masivos, y lo que la re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo de aplicaciones en mini aplicaciones VK</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480974/">  ¿Por qué debería buscar desarrollar aplicaciones para trabajar en VK?  Tengo muchos años de desarrollo front-end para servicios masivos, y lo que la red social VKontakte está ofreciendo actualmente al desarrollador es una forma rápida y efectiva de construir otro canal de comunicación con una audiencia realmente grande.  A continuación, le diré cuál es la idea de las mini aplicaciones VK, qué tecnologías usar al desarrollar la aplicación y a qué debe prestar atención. <br><br><img src="https://habrastorage.org/webt/au/2v/2d/au2v2d1ko6i5ifqn2lnydurcczg.jpeg" alt="imagen"><br><br>  <i>Publicación inicial de un artículo en la publicación del blog Blog.ru Cloud Solutions: <a href="https://mcs.mail.ru/blog/razrabotka-prilozhenij-v-vk-mini-apps" rel="nofollow">https://mcs.mail.ru/blog/razrabotka-prilozhenij-v-vk-mini-apps</a></i> <br><br><a name="habracut"></a><h2>  Plataforma de aplicaciones mini VK </h2><br>  VKontakte ofrece a los desarrolladores externos la oportunidad de escribir aplicaciones web y colocarlas en el directorio de aplicaciones y / o promocionarlas dentro de la red.  Los usuarios de la aplicación no necesitan descargar aplicaciones nativas individuales de Google Play / App Store, la funcionalidad de la aplicación seleccionada está disponible dentro de la sesión del usuario de la aplicación principal en VKontakte o mediante un navegador en el sitio de la red social.  La red social tiene instrucciones detalladas sobre cómo comenzar en <a href="https://vk.com/dev/vk_apps_docs" rel="nofollow">la plataforma de mini aplicaciones VK</a> . <br><br><h2>  Infraestructura de aplicaciones VK mini app </h2><br>  La mini aplicación VK es un recurso web regular ubicado en una dirección específica.  Debemos colocarlo en el "Panel de control de aplicaciones" de la red social. <br><br>  VKontakte le permite colocar tres versiones de la aplicación: <br><br><ul><li>  para clientes móviles, es decir, para abrir en la aplicación VKontakte nativa; </li><li>  opción de escritorio: <a href="https://vk.com/" rel="nofollow">vk.com</a> en el navegador; </li><li>  opción para navegadores en teléfonos móviles (https://m.vk.com). </li></ul><br>  Al colocar, también puede habilitar el "Modo de desarrollo".  Permite a los usuarios de VKontakte designados como administradores de aplicaciones usar una dirección separada para probar cada uno de los tres escaparates.  Es decir, al abrir la aplicación, un usuario común verá lo que se encuentra en la dirección condicional yourapp.com, y el administrador verá test.yourapp.com. <br><br>  Su recurso web está incrustado en la aplicación VKontakte a través del WebView habitual, cuando se abre desde el escritorio, a través de iFrame.  Por lo tanto, es necesario tener en cuenta que parte de la funcionalidad de JavaScript puede no estar disponible, es necesario realizar pruebas exhaustivas. <br><br>  Después de probar la aplicación web en diferentes dispositivos, se puede enviar con moderación para que se pueda colocar en el directorio.  La solicitud de moderación se envía desde el "Panel de control de la aplicación".  El período de moderación anunciado por VKontakte es de 7 días.  Los cálculos de nuevas aplicaciones (servicios en la terminología de VKontakte) se realizan una vez a la semana los jueves. <br><blockquote>  Hay una <a href="https://vk.com/%40vkappsdev-vk-apps-kak-popast-v-katalog" rel="nofollow">nota detallada</a> sobre cómo crear la aplicación correcta.  Le recomiendo que consulte cuidadosamente con ella antes de darle la solicitud de moderación. </blockquote><br><h2>  Desarrollo de aplicaciones VK mini app </h2><br>  Entonces, la aplicación VK Mini Apps es, de hecho, una aplicación web normal que está integrada en la plataforma a través de iFrame o WebView.  Por lo tanto, la elección de la tecnología en la que se escribirá es suya. <br><br>  Sin embargo, para desarrollar la interfaz, VKontakte recomienda su propia <a href="https://vkcom.github.io/vkui-styleguide/" rel="nofollow">biblioteca de componentes listos para VK UI</a> , realizada en React: <br><br>  Esto es conveniente: muchos componentes típicos ya están listos, solo queda incrustarlos en la estructura de su página o SPA. <br><br>  Los componentes ya están estilizados de acuerdo con la guía de estilo de VKontakte: será más familiar y conveniente para el usuario trabajar con los controles y la interactividad a la que ya está acostumbrado dentro de la red social. <br><br>  VKontakte no requiere que el desarrollador siga ninguna arquitectura frontend rígida: tomamos solo lo que se necesita y modificamos los componentes según sea necesario.  Por ejemplo, siempre puede agregar su clase, su controlador de eventos a un estúpido componente de vista, crear componentes anidados de cualquier profundidad, etc. <br>  Existe una documentación bastante detallada (aunque no completamente completa) <a href="https://vkcom.github.io/vkui-styleguide/" rel="nofollow">sobre VKUI</a> .  Código fuente en GitHub: <a href="https://github.com/VKCOM/VKUI" rel="nofollow">https://github.com/VKCOM/VKUI</a> .  En consecuencia, la instalación más simple: <br><br><pre><code class="javascript hljs">npm i —save-dev @vkontakte/vkui</code> </pre> <br>  Asegúrese de poner la siguiente metaetiqueta en el encabezado de la página de diseño de su aplicación, de lo contrario, en dispositivos iOS, la navegación nativa de VKontakte no se mostrará correctamente: <br><br><pre> <code class="javascript hljs">&lt;meta content=»width=device-width, initial-scale=<span class="hljs-number"><span class="hljs-number">1</span></span>, shrink-to-fit=no, user-scalable=no, viewport-fit=cover» name=»viewport» /&gt;</code> </pre> <br>  A continuación, solo necesitamos insertar la aplicación React en la página. <br><br><h3>  Opciones de apertura de aplicaciones </h3><br>  VKontakte agrega parámetros de inicio a la barra de direcciones mediante la cual se abre su aplicación.  Su lista es la siguiente: <i>vk_user_id, vk_app_id, vk_are_notifications_enabled, vk_language, vk_ref, vk_access_token_settings, vk_group_id, vk_viewer_group_role, vk_platform, vk_is_favorite, sign</i> .  Ese es el marco con su aplicación se abrirá con aproximadamente la misma dirección: <i><a href="https://youvkapp.ru/%3Fvk_access_token_settings%3Dnotify%26vk_app_id%3D888888%26vk_are_notifications_enabled%3D1%26vk_is_app_user%3D1%26vk_is_favorite%3D1%26vk_language%3Dru%26vk_platform%3Ddesktop_web%26vk_ref%3Dother%26vk_user_id%3D111111%26sign%3Dfsdfsdgfgfiuoitu8345u34j" rel="nofollow">youvkapp.ru/?vk_access_token_settings=notify&amp;vk_app_id=888888&amp;vk_are_notifications_enabled=1&amp;vk_is_app_user=1&amp;vk_is_favorite=1&amp;vk_language=ru&amp;vk_platform=desktop_web&amp;vk_ref=other&amp;vk_user_id=111111&amp;sign=fsdfsdgfgfiuoitu8345u34j</a></i> <br><br>  Esto le permite tener un conjunto bastante completo de datos extraídos de la URL cuando inicia la aplicación para comenzar la interacción personal con un usuario específico.  Por ejemplo, hable el mismo idioma con él: ruso, inglés o algún otro idioma, o solicite incluir sus notificaciones. <br><br>  Para noviembre de 2019, Vkontakte no planea incluir parámetros adicionales en esta lista de VKontakte.  Sin embargo, en la url puede pasar un hash arbitrario, por ejemplo: <i><a href="https://youvkapp.ru/" rel="nofollow">youvkapp.ru # custom_param</a></i> <br><br><h3>  Enrutamiento </h3><br>  Si la aplicación tiene más de una pantalla (creo que este es su caso), necesita una transición entre pantallas.  El estado de nuestra aplicación React es responsable de mostrar esta o aquella pantalla.  En cuanto a la organización de View, VKontakte ofrece dos formas: cambiar el componente activo de VKUI View y VKUI Panel. <br><br>  Cada vista es responsable de su propio escenario de usuario: primario, secundario, directorios de llamadas, páginas de búsqueda y otros.  Dentro de la vista contiene su propio conjunto de paneles: estos son pasos específicos (pantallas) en la secuencia de comandos del usuario.  En resumen, se ve así: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Root, View, Panel} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@vkontakte/vkui'</span></span>; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Root</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">activeView</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.views.activeView}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»main»</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">activePanel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.views.main.activePanel}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»step-1″</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»step-2″</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»search»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»search-panel»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»info»</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">activePanel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.views.info.activePanel}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»oferta»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»conditions»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»about»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Root</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  En estado en activePanel, especificamos la identificación del elemento que se mostrará. <br><br><h3>  Diseño y componentes </h3><br>  Ahora puede ver una página típica dentro del Panel, creada usando los componentes de VK UI. <br><br>  La biblioteca VK UI proporciona un conjunto casi completo de componentes necesarios para crear una aplicación interactiva: todo tipo de elementos de formulario, ventanas emergentes, alertas estilizadas, galerías, paneles de navegación, hilanderos, avatares, pies de página, etc. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Button, Div, FormLayout, Input, Panel, PanelHeader, PanelHeaderBack, Search, View } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@vkontakte/vkui"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Icon36Done <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@vkontakte/icons/dist/36/done"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CustomTextarea <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./YourComponents/CustomTextarea"</span></span>; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div&gt; &lt;PanelHeader left={&lt;PanelHeaderBack onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Actions.historyBack()}} /&gt;} &gt;App Title&lt;<span class="hljs-regexp"><span class="hljs-regexp">/PanelHeader&gt; &lt;Icon36Done width={48} height={48} /</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">This is the first page</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"page-hint"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">You can do some interaction here</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;FormLayout&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defaultValue</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">""</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Enter your name"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"active"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomTextarea</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"textarea1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"custom"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.blocks.textarea.disabled}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.userData.textarea}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"xl"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">level</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"secondary"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml">Submit</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FormLayout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Search</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.search.text}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.onSearch}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre><br>  Como puede ver, apareció otro paquete vkontakte: <br><br><pre> <code class="javascript hljs">npm i —save-dev @vkontakte/icons</code> </pre> <br>  Puede usar el <a href="https://vkcom.github.io/icons/" rel="nofollow">administrador conveniente</a> para seleccionar el icono deseado. <br><br>  <b>La regla principal</b> es usar el componente correctamente o su propio diseño del encabezado.  La aplicación nativa de VKontakte coloca botones de control en el lado derecho del encabezado. <br><br><img src="https://habrastorage.org/webt/ge/cc/_o/gecc_oj3rinrnjov7k-ddrsm3h0.jpeg" alt="imagen"><br><br>  Bloque personalizado: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Textarea } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> «@vkontakte/vkui»; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomTextarea</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div className=»form-group custom_textarea»&gt; &lt;div className=»FormLayout__row-top»&gt;Custom textarea is here&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;Textarea disabled={this.props.disabled} name={name} id={name} onChange={(e) =&gt; this.bindData(e, this.props.name)} value={this.props.value} className={this.props.className} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; </span></span></span><span class="hljs-function">); } }</span></span></code> </pre><br>  Vale la pena prestar atención: VKontakte declara que los componentes pueden no mostrarse adecuadamente en los escritorios.  Sin embargo, se pueden diseñar agregando sus propias reglas CSS.  Por ejemplo, la animación de transiciones entre paneles en una aplicación se estilizó de esta manera: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.desktop_web</span></span> { .View__panel—prev { <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">458px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> auto; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(50% — 230px) <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation</span></span>: root-android-animation-hide-back <span class="hljs-number"><span class="hljs-number">3s</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(.4, 0, .2, 1); <span class="hljs-attribute"><span class="hljs-attribute">animation</span></span>: root-android-animation-hide-back <span class="hljs-number"><span class="hljs-number">3s</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(.4, 0, .2, 1); } <span class="hljs-selector-class"><span class="hljs-selector-class">.View__panel</span></span>—<span class="hljs-selector-tag"><span class="hljs-selector-tag">next</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">460px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(50% — 230px) <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } }</code> </pre><br>  Estos estilos están conectados en la secuencia general de estilos conectados a su aplicación. <br><br><h2>  Biblioteca VK Connect </h2><br>  <a href="https://vk.com/dev/vk_apps_docs%3Ff%3D4.%2520VK%2520Connect" rel="nofollow">La biblioteca VK Connect</a> proporciona acceso a las amplias capacidades de la red VKontakte en sí, así como a las capacidades del dispositivo si estamos trabajando desde una aplicación móvil.  Para conectarlo, debe instalar el <a href="https://habr.com/ru/users/vkontakte/" class="user_link">paquete vkontakte</a> / vk-connect: <i>npm i —save-dev <a href="https://habr.com/ru/users/vkontakte/" class="user_link">vkontakte</a> / vk-connect</i> . <br><br>  Entre las muchas características de VK Connect están escanear un código QR, obtener una geolocalización y llamar una tarjeta de contacto.  También hay amplias oportunidades para usar las funciones de la red social: activar / desactivar notificaciones, publicar publicaciones en el muro, autorización de la comunidad, suscribirse a mensajes.  Deben usarse con prudencia: por ejemplo, hay un límite en el número de notificaciones, no más de una por día.  Hay <a href="https://vk.com/%40vkappsdev-uvedomleniya-za-kotorye-polzovateli-skazhut-spasibo" rel="nofollow">recomendaciones separadas para las notificaciones</a> .  Se proporciona una lista completa de características <a href="https://vk.com/dev/vk_connect_events" rel="nofollow">en la documentación</a> . <br><br>  Para que nuestra aplicación comience a funcionar en general, primero debemos realizar la inicialización: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> connect <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@vkontakte/vk-connect'</span></span>; connect.send(«VKWebAppInit», {});</code> </pre><br>  Toda interacción adicional con la biblioteca ocurre de manera similar.  Usando el método connect.send, llamamos a la acción deseada y escuchamos las respuestas.  Para hacer esto, debemos suscribirnos a eventos: <br><br><pre> <code class="javascript hljs">connect.subscribe(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (e.detail.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> «VKWebAppGetUserInfoResult» : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bindConnectUserData(e.detail.data); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } });</code> </pre><br>  En el objeto de detalle, se devuelve el tipo: el nombre del tipo de evento al que esperamos una respuesta y los datos, un conjunto de datos.  En el ejemplo anterior, escuchamos la respuesta a la solicitud connect.send ("VKWebAppGetUserInfo", {}), que debe devolver información sobre el usuario de la aplicación: nombre, sexo, fecha de nacimiento, lugar de residencia, enlace a la imagen del avatar en la red social. <br><br>  VKontakte no garantiza el soporte para todos los eventos en todos los dispositivos (iOS, Android, Web), por lo que es mejor verificar este soporte antes de ejecutar el código: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (connect.supports(«VKWebAppGetUserInfo»)) …</code> </pre> <br>  VK Connect también proporciona soporte para solicitudes a <a href="https://vk.com/dev/first_guide" rel="nofollow">la API de VK</a> , si necesita algo más de lo que la biblioteca de VK Connect puede proporcionar: <br><br><pre> <code class="javascript hljs">connect.send(«VKWebAppCallAPIMethod», {«method»: «users.get», «request_id»: «your_unique_req_id», «params»: {«user_ids»: «<span class="hljs-number"><span class="hljs-number">1</span></span>», «v»:»<span class="hljs-number"><span class="hljs-number">5.103</span></span>″, «access_token»:»your_token»}});</code> </pre> <br><h2>  VK Pay </h2><br>  VK Pay es, de hecho, un front-end conveniente para usar el servicio de pago en línea usando Money Mail.Ru.  Para llamar al formulario de pago, simplemente abra la ventana de pago mediante una llamada en la biblioteca VK Connect: <br><br><pre> <code class="javascript hljs">connect.send(«VKWebAppOpenPayForm», {«app_id»: <span class="hljs-number"><span class="hljs-number">888888</span></span>, «action»: «pay-to-service», «params»: {}});</code> </pre> <br>  Por lo tanto, puede vender sus servicios y bienes utilizando un medio de pago interno en la red VKontakte.  Más detalles en la <a href="https://vk.com/dev/vkpay" rel="nofollow">documentación oficial</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/480974/">https://habr.com/ru/post/480974/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../480958/index.html">Conexión satelital. Descripción general de las compañías operadoras y un poco sobre la calificación</a></li>
<li><a href="../480960/index.html">Encuentra archivos perdidos en múltiples objetivos Xcode</a></li>
<li><a href="../480962/index.html">Desarrollo del compilador C para el nuevo neuroprocesador multiclet</a></li>
<li><a href="../480964/index.html">¿Qué es la zona de Fresnel y CCQ (calidad de conexión del cliente) o los factores fundamentales de un puente inalámbrico de alta calidad?</a></li>
<li><a href="../480970/index.html">10 mejores prácticas para asegurar las imágenes de Docker. Parte 1</a></li>
<li><a href="../480976/index.html">Biblioteca de pruebas de API JSON-RPC</a></li>
<li><a href="../480978/index.html">¿Hay vida después de la signora?</a></li>
<li><a href="../480980/index.html">Tecnologías analíticas modernas en ciberseguridad</a></li>
<li><a href="../480982/index.html">3. Fortinet Getting Started v6.0. Preparación del diseño</a></li>
<li><a href="../480984/index.html">Evitar errores de seguridad de red populares</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>