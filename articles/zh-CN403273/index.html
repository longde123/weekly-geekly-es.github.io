<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‰ğŸ¼ ğŸ“Œ ğŸ¿ï¸ æ–¹ä¾¿çš„Pebbleï¼Œç¨³å®šçš„Nooliteå’Œä»·æ ¼åˆç†çš„esp8266å®ç°è‡ªåŠ¨åŒ– ğŸ® ğŸ‘©ğŸ¼â€ğŸš’ ğŸ“œ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»ä¸Šä¸€ç¯‡æ–‡ç« å¼€å§‹ï¼ˆ é“¾æ¥å·²ä½¿ç”¨äº†å°†è¿‘ä¸€å¹´ã€‚åœ¨è¿™ä¸€å¹´ä¸­ï¼Œæˆ‘é‡æ–°è€ƒè™‘äº†ä¸€äº›ä¸œè¥¿ï¼Œäº’è”ç½‘ï¼Œç»“æœè¯æ˜æ˜¯IoT :)â†’ç‰©è”ç½‘ï¼‰ã€‚ 

 æˆ‘å°†å°è¯•æ€»ç»“ç§¯ç´¯çš„çŸ¥è¯†çš„æ–°éƒ¨åˆ†ï¼Œæè¿°æˆ‘çš„åŠªåŠ›æ–¹å‘å’Œæƒ³è¦å®ç°çš„ç›®æ ‡â†’è¯·æ‚¨é˜…è¯»ã€‚ 

 Noolite F v2.0 
 åœ¨æ ‡é¢˜ä¸­ï¼Œæˆ‘å¾—åˆ°äº†è¿™æ ·çš„å­—çœ¼ï¼šåµçŸ³å’Œç¡…è—»åœŸã€‚ è®©æˆ‘ä»¬ç»§ç»­...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ–¹ä¾¿çš„Pebbleï¼Œç¨³å®šçš„Nooliteå’Œä»·æ ¼åˆç†çš„esp8266å®ç°è‡ªåŠ¨åŒ–</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403273/">ä»ä¸Šä¸€ç¯‡æ–‡ç« å¼€å§‹ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥å·²ä½¿ç”¨</a>äº†å°†è¿‘ä¸€å¹´ã€‚åœ¨è¿™ä¸€å¹´ä¸­ï¼Œæˆ‘é‡æ–°è€ƒè™‘äº†ä¸€äº›ä¸œè¥¿ï¼Œäº’è”ç½‘ï¼Œç»“æœè¯æ˜æ˜¯IoT :)â†’ç‰©è”ç½‘ï¼‰ã€‚ <br><br> æˆ‘å°†å°è¯•æ€»ç»“ç§¯ç´¯çš„çŸ¥è¯†çš„æ–°éƒ¨åˆ†ï¼Œæè¿°æˆ‘çš„åŠªåŠ›æ–¹å‘å’Œæƒ³è¦å®ç°çš„ç›®æ ‡â†’è¯·æ‚¨é˜…è¯»ã€‚ <br><a name="habracut"></a><br><h2>  Noolite F v2.0 </h2><br>  <b>åœ¨æ ‡é¢˜ä¸­ï¼Œæˆ‘å¾—åˆ°äº†è¿™æ ·çš„å­—çœ¼ï¼šåµçŸ³å’Œç¡…è—»åœŸã€‚</b>  <b>è®©æˆ‘ä»¬ç»§ç»­å‰è¿›å§ï¼</b> <br> æˆ‘ä»ç„¶ç”¨åµçŸ³æ¥ç®¡ç†æˆ‘çš„è¯ºè±ç‰¹ç¯ï¼Œè½¦åº“å’Œå¤§é—¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœç´¢å·²ç»</a>æ˜¾ç¤ºäº†å¾ˆå¤šæœ‰å…³Nooliteçš„æœ‰ç”¨ä¿¡æ¯ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœç´¢</a>æ˜¾ç¤ºäº†æ–°æ–‡ç« ã€‚ <br><br> é™¤äº†Nooliteç³»ç»Ÿçš„ç¬¬ä¸€ä»£è£…ç½®å¤–ï¼Œæˆ‘è¿˜æœ‰æ–°çš„è£…ç½®ï¼šå¸¦åé¦ˆåŠŸèƒ½çš„åŠ¨åŠ›è£…ç½®SLF-1-200ï¼ˆnooLite-Fï¼‰ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»¥åŠæ–°ä¸€ä»£åŠ å¯†è£…ç½®</a> ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/312/be1/be5/312be1be5d922ebcc46d307015f01eb0.png" alt="å›¾ç‰‡"><br><br> ç”µæºå—SB-1-150 <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0a1/575/b81/0a1575b813bdd72fa22800bf8b33374d.png" alt="å›¾ç‰‡"><br><br> å¹¶æ›´æ–°äº†USBé€‚é…å™¨MTRF-64 USBã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/61e/842/1de/61e8421deaa8155d33aba9f064002a3b.png" alt="å›¾ç‰‡"><br><br>  Nooliteç³»ç»Ÿä¸Šæˆ‘å®¶çš„æ‰€æœ‰ç¯éƒ½äº®ç€ã€‚ <br><br> ç›´åˆ°æœ€è¿‘ï¼Œæˆ‘è¿˜æ‹¥æœ‰ä¸€ä¸ªç¬¬ä¸€ä»£USBé€‚é…å™¨ï¼Œè¯¥é€‚é…å™¨å…·æœ‰16ä¸ªè®¾å¤‡ï¼Œç°åœ¨åœ¨â€œç³»ç»Ÿå®¶ç”¨æŠ½ç­‹â€ä¸­å…·æœ‰64ä¸ªé€šé“ï¼ˆMTRF-64 USBï¼‰ï¼Œè¿˜ç”¨äºå¸¦åé¦ˆçš„æ–°ä¸€ä»£è®¾å¤‡ï¼ˆnoolite Fï¼‰ã€‚ ä½†æ˜¯æŠ€æœ¯æ­£åœ¨æœç€æ­£ç¡®çš„æ–¹å‘å‘å±•ï¼Œåˆ›é€ äº†æ–°çš„ç°ä»£è®¾å¤‡ã€‚ <br><br>  <b>æ–°è®¾å¤‡æœ‰2ä¸ªæœ€é‡è¦çš„é€‰é¡¹ï¼šåé¦ˆå’Œé€šè¿‡åœ°å€æ ‡è¯†è®¾å¤‡çš„åŸç†ï¼šIDã€‚</b> ç°åœ¨ï¼Œæ‚¨ä¸å¿…å°†è®¾å¤‡å†™å…¥é€šé“1å¹¶æ§åˆ¶è¯¥é€šé“ã€‚ ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡å…¶IDåœ¨ä¸€ä¸ªé€šé“ä¸­è®¿é—®ç‰¹å®šè®¾å¤‡ï¼Œå¹¶å‘å…¶å‘é€æ‰§è¡Œå‘½ä»¤ã€‚ <br><br> æ–°ä¸€ä»£æ¨¡å—çš„æ–‡æ¡£<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯</a>åœ¨åˆ¶é€ å•†çš„ç½‘ç«™ä¸Šæ‰¾åˆ°ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¸€åˆ‡éƒ½å¯ä»¥ä½¿ç”¨pythonä»£ç é€šè¿‡ä¸²è¡Œç«¯å£å·¥ä½œã€‚</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- #!/usr/bin/env python import serial import time class NooLiteCommand: def __init__(self, ch, cmd, mode=0, ctr=0, res=0, fmt=0, d0=0, d1=0, d2=0, d3=0, id0=0, id1=0, id2=0, id3=0): self.st = 171 self.mode = mode self.ctr = ctr self.res = res self.ch = ch self.cmd = cmd self.fmt = fmt self.d0 = d0 self.d1 = d1 self.d2 = d2 self.d3 = d3 self.id0 = id0 self.id1 = id1 self.id2 = id2 self.id3 = id3 self.sp = 172 @property def crc(self): crc = sum([ self.st, self.mode, self.ctr, self.res, self.ch, self.cmd, self.fmt, self.d0, self.d1, self.d2, self.d3, self.id0, self.id1, self.id2, self.id3, ]) return crc if crc &lt; 256 else divmod(crc, 256)[1] def to_bytes(self): return bytearray([ self.st, self.mode, self.ctr, self.res, self.ch, self.cmd, self.fmt, self.d0, self.d1, self.d2, self.d3, self.id0, self.id1, self.id2, self.id3, self.crc, self.sp ]) class NooliteSerial: def __init__(self, tty_name): self.tty = self._get_tty(tty_name) def on(self, ch): self.send_command(ch, 2, 2, 0) pass def off(self, ch): self.send_command(ch, 0, 2, 0) pass def status(self, ch): m = self.send_command(ch, 128, 2, 0) pass def send_command(self, ch, cmd, mode=0, ctr=0, res=0, fmt=0, d0=0, d1=0, d2=0, d3=0, id0=0, id1=0, id2=0, id3=0): command = NooLiteCommand(ch, cmd, mode, ctr, res, fmt, d0, d1, d2, d3, id0, id1, id2, id3) self.tty.write(command.to_bytes()) while True: bytes_response = list(self.tty.read(117)) if bytes_response: all_responses.append(bytes_response) if bytes_response[3] == 0: break else: break return all_responses @staticmethod def _get_tty(tty_name): serial_port = serial.Serial(tty_name, timeout=0.1) if not serial_port.is_open: serial_port.open() serial_port.flushInput() serial_port.flushOutput() return serial_port noo_serial = NooliteSerial('/dev/ttyUSB0') #ch, cmd, mode, ctr #noo_serial.send_command(1, 15, 2, 0) #    1 #noo_serial.send_command(0, 4, 2, 0) #switch #noo_serial.send_command(0, 2, 2, 0) #turn on #noo_serial.send_command(0, 3, 2, 0) #   #noo_serial.send_command(0, 0, 2, 0) #turn off #noo_serial.send_command(0, 15, 2, 0) #  #noo_serial.send_command(0, 128, 2, 0,0,1) #CMD_Read_State + fmt = 1 #noo_serial.on(0) #noo_serial.status(0) #noo_serial.off(0) #noo_serial.off(0) #noo_serial.status(0) #noo_serial.send_command(ch=0,ctr=8, cmd=4, id0=0,id1=0,id2=48,id3=114) #switch noolite ID 0.0.48.114</span></span></code> </pre> <br></div></div><br> åœ¨æ­£ç¡®çš„æ—¶é—´ä½¿ç”¨å¿…è¦çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶Nooliteå—å¹¶ä»æ–°å—æ¥æ”¶çŠ¶æ€ã€‚ ç”±äºæˆ‘æœ‰99ï¼…çš„è¿™äº›æ—§å—ï¼Œå› æ­¤è€ƒè™‘åˆ°USBé€‚é…å™¨æ”¯æŒæ—§å—å’Œæ–°å—çš„äº‹å®ï¼Œæˆ‘ä»ç„¶å¯ä»¥ä½¿ç”¨å°†1ä¸ªå—å†™å…¥1ä¸ªé€šé“çš„æ—§æ–¹æ¡ˆï¼ˆæ„Ÿè°¢å¼€å‘äººå‘˜çš„å…¼å®¹æ€§ï¼Œæ— éœ€é“ƒé¼“è·³èˆï¼‰ã€‚ åœ¨è¿è¡Œä¸­ï¼Œæ‚¨å¯ä»¥ç®¡ç†å’Œæ¥æ”¶æ–°å—çš„çŠ¶æ€ä»¥åŠç®¡ç†æ—§å—çš„çŠ¶æ€ã€‚ <br><br> ç›´åˆ°æœ€è¿‘ï¼Œå±‹å­é‡Œè¿˜æ²¡æœ‰ä¸€ä¸ªæŒ‰é’®å¼€å…³ã€‚ æˆ‘ä¸å¾—ä¸åœ¨è½¦åº“é‡ŒåŠ å…‰ï¼ˆæˆ‘åˆšåˆ°é‚£å„¿æ•´ç†ä¸œè¥¿ï¼šDï¼‰ï¼ŒåŒ–å¦†é•œçš„èƒŒå…‰ç¯ä¸Šä¹Ÿå‡ºç°äº†ä¸€ä¸ªå¼€å…³ã€‚ çŸ¥é“æœ‰<b>ä¸€ä¸ªSB-1-150ç”µæºè®¾å¤‡å</b> ï¼Œæˆ‘è®¾ç½®äº†æ™®é€šå¼€å…³å¹¶è¿æ¥äº†<b>ç”µæº</b>è®¾å¤‡ã€‚ é•œå­çš„èƒŒå…‰ç”±ä¸€å—ç™½æ¿åˆ¶æˆï¼Œ3wçš„ç¯æ³¡4000 Kï¼Œç™½å…‰ã€‚  SB-1-150çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®ƒå¯ä»¥åœ¨ç°æœ‰ç”µè·¯ç¯å¢ƒä¸­æ”¾ç½®åœ¨å¢™å£å¼€å…³ï¼ˆå¼€å…³ï¼‰çš„ç›’å­ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å°†æŒ‰é’®å¼€å…³è¿æ¥åˆ°è®¾å¤‡æœ¬èº«æ¥æ”¾ç½®ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ­£æ˜¯æˆ‘çš„å¥³å­©éœ€è¦åŒ–å¦†:)</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/63d/97d/4ff/63d97d4ff9ed73ee3fe00abba6a94fed.png" alt="å›¾ç‰‡"><br></div></div><br><h2> åµçŸ³ </h2><br> å½“æˆ‘å¼€å§‹æ¶‰è¶³è‡ªåŠ¨åŒ–é¢†åŸŸæ—¶ï¼Œä¸»è¦å› ç´ ä¹‹ä¸€æ˜¯ï¼šç§°èŒä¸”æ–¹ä¾¿çš„ç®¡ç†ã€‚ <br><br> ç”¨æ™ºèƒ½æ‰‹æœºè¿›è¡Œæ§åˆ¶ä¼¼ä¹å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯...æ¯æ¬¡åœ¨ä¸èˆ’æœçš„å°æŒ‰é’®ï¼Œå·¦æ’‡å­å¹¿å‘Šæˆ–ç›´åˆ°æ‚¨æŒ‰ä¸‹æŒ‰é’®ä¹‹å‰ï¼Œæ¯æ¬¡åŠ è½½åº”ç”¨ç¨‹åºéƒ½ä¸æ–¹ä¾¿ï¼Œæ‰€æœ‰çš„æ¬²æœ›éƒ½æ¶ˆå¤±äº†ã€‚ è¯­éŸ³æ§åˆ¶æ¶ˆå¤±äº†ï¼Œå› ä¸ºå®ƒä¹Ÿå¾ˆä¸æ–¹ä¾¿å’Œå¥‡æ€ªï¼š)-è®©å®ƒä¿ç•™åœ¨ç§‘å¹»ç”µå½±çš„æƒ…èŠ‚ä¸­ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5ea/226/ba7/5ea226ba78a2e6fb2e61a63458aa88af.png" alt="å›¾ç‰‡"><br><br> ç„¶åï¼Œæˆ‘ä»¥å¦ä¸€ç§æ–¹å¼è§£å†³äº†è¿™ä¸ªé—®é¢˜-é€šè¿‡ä¸€å—æ‰‹è¡¨ï¼Œå®ƒä¸æˆ‘åœ¨ä¸€èµ·æ—¶ä¸ä¼šå ç”¨ç©ºé—´ï¼Œå¹¶ä¸”å°†æ‰€æœ‰ä¾¿åˆ©è®¾æ–½ï¼Œç§»åŠ¨æ€§å’Œæ§åˆ¶é€Ÿåº¦ç»“åˆåœ¨ä¸€èµ·ã€‚ é€šå¸¸-å°åµçŸ³è¿˜æ´»ç€ï¼ ä½†æ˜¯æœ€é‡â€‹â€‹è¦çš„æ˜¯ï¼Œæ‚¨ä»ç„¶å¯ä»¥éšæ—¶ç¼–å†™åº”ç”¨ç¨‹åº-æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºï¼Œä»¥ç®¡ç†è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚ å®é™…ä¸Šæ˜¯ç‚¸å¼¹ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å°åµçŸ³è¿˜æ´»ç€ï¼</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é—¨æ§è§†é¢‘</a> <br></div></div><br> å…³é—­pebble.comå…¬å¸çš„æ‚²å‰§ï¼ˆFitbitè´­ä¹°äº†æ‰€æœ‰pebble.comä»¥è·å¾—ä¸“åˆ©ï¼‰å¹¶æ²¡æœ‰å½±å“å…¶ä¸šç»©å’Œä¸šç»©ã€‚ æœ€è¿‘ï¼Œæœ‰ä¸€ä¸ªiOSå®‰å“ç³»ç»Ÿæ›´æ–°-æ‰‹è¡¨ä¸åµçŸ³äº‘æœåŠ¡ï¼ˆå¦‚æœç»ˆæ­¢æ”¯æŒï¼‰å’Œæˆæƒæ— å…³ã€‚ <br><br> ä»è§†è§‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šçœ‹</a> -æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä½†æœåŠ¡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»ç„¶å­˜åœ¨</a> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">cloudpebble.net</a> -WTFï¼Ÿ è¿™æ˜¯éå¸¸æœ‰ç”¨çš„äº‹æƒ…ã€‚ å¦‚æœæ‚¨å¯ä»¥ç”¨JSç¼–å†™ä»£ç ï¼ˆå¹¶ä¸”ä¸å¸Œæœ›åœ¨C ++ä¸ŠèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼‰-è¯·åœ¨æ¿ä¸Š:)-äº‘åµçŸ³å¯è®©æ‚¨å¿«é€Ÿåœ°â€œæŠ›å‡ºâ€åº”ç”¨ç¨‹åºã€‚ å—¯ï¼Œè¿™å°±æ˜¯æˆ‘åšåˆ°çš„æ–¹å¼ã€‚ å½“ç„¶ï¼ŒJSçš„æ€§èƒ½ä¸åº”è¯¥ä¸C ++ï¼ˆè¿™æ˜¯ç¥åœ£çš„ï¼‰ç›¸æå¹¶è®ºã€‚ æ˜¯çš„ï¼ <br><br><div class="spoiler">  <b class="spoiler_title">ç”¨äºAPIçš„Pebble Cloud JSä»£ç </b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UI = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ajax = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ajax'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> noolite = [ [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/mqtt/gate/slidegate'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/gate.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/mqtt/gate/garage'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/door.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'!'</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/103'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/100'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/system2.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'1  '</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'2  '</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1'</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/101'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2'</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/102'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/system/1'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/system1.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> water = [ [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/1'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/2'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/20'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/21'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 3 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/22'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 4 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/23'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 5 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/5'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 6 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/6'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 7 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/7'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 8 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/8'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 9 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/9'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> light1 = [ [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/6'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/0'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/1'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/7'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/8'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/2'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/3'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/4'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/5'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/9'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> light2 = [ [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/15'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/16'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/10'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/11'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/12'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/13'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/14'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;noolite.length; i++) { items[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: noolite[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: noolite[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items1 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;light1.length; i++) { items1[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: light1[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: light1[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items2 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;light2.length; i++) { items2[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: light2[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: light2[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items3 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;water.length; i++) { items3[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: water[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: water[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } menu.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items); menu1.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items1); menu2.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items2); menu3.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items3); menu.show(); menu.on(<span class="hljs-string"><span class="hljs-string">'select'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.itemIndex == <span class="hljs-number"><span class="hljs-number">4</span></span>) { menu1.show(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.itemIndex == <span class="hljs-number"><span class="hljs-number">5</span></span>) { menu2.show(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.itemIndex ==<span class="hljs-number"><span class="hljs-number">8</span></span>) { menu3.show(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = noolite[e.itemIndex][<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(url); ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: url, <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'get'</span></span> }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'switched OK'</span></span>); }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Failure! console.log('error'); } ); } }); menu1.on('select', function(e) { var url = light1[e.itemIndex][1]; console.log(url); ajax({ url: url, method: 'get' }, function(data) { console.log('switched OK'); }, function(error) { // Failure! console.log('error'); } ); }); menu2.on('select', function(e) { var url = light2[e.itemIndex][1]; console.log(url); ajax({ url: url, method: 'get' }, function(data) { console.log('switched OK'); }, function(error) { // Failure! console.log('error'); } ); }); menu3.on('select', function(e) { var url = water[e.itemIndex][1]; ajax({ url: url, method: 'get' }, function(data) { console.log('switched OK'); }, function(error) { // Failure! console.log('error'); } ); });</span></span></code> </pre><br></div></div><br> å¯ä»¥ç›´æ¥åœ¨Pebbleçš„äº‘ç½‘ç«™ä¸Šç¼–å†™ï¼Œç¼–è¯‘ä»£ç ï¼Œå¹¶å¯ä»¥é€šè¿‡ç”µè¯ä¸‹è½½å·²ç¼–è¯‘çš„åº”ç”¨ç¨‹åºï¼Œä»è€Œå¯ä»¥æŒ‰ç§’å®‰è£…æ—¶é’Ÿã€‚ ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼Œä»»ä½•å¹´è½»çš„è‡ªåŠ¨åŒ–å·¥ç¨‹å¸ˆéƒ½å¯ä»¥å¤„ç†ï¼›ï¼‰ <br><br> çœŸå¯æƒœ...å¯æƒœçš„æ˜¯ï¼ŒPebbleä¸å†å­˜åœ¨ï¼Œç›®å‰æˆ‘æ²¡æœ‰å…¶ä»–é€‰æ‹©ã€‚ åµçŸ³æ—¶é—´æ°¸è¿œåœ¨æˆ‘ä»¬å¿ƒä¸­ï¼ <br><br><h2>  MQTT </h2><br> å»å¹´ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå¾ˆæ£’çš„åè®®ï¼Œä¾‹å¦‚MQTTï¼ˆå†å²è®°å½•ï¼šè¯¥åè®®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ç”±Andy Stanford-Clarkåšå£«ï¼ˆIBMï¼‰å’ŒArlene Nipperï¼ˆArcomï¼‰äº1999å¹´å¼€å‘ï¼Œå¹¶åœ¨å…ç‰ˆç¨çš„è®¸å¯ä¸‹å‘å¸ƒçš„ã€‚MQTT3.1.1è§„èŒƒæ˜¯ç”±OASISè”ç›Ÿäº2014å¹´æ ‡å‡†åŒ–ã€‚ <br><br> å…³äºåè®®å¦‚ä½•å·¥ä½œä»¥åŠå®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆçš„ä¿¡æ¯å¾ˆå¤šï¼Œè€Œä»¤æˆ‘éå¸¸å¤±æœ›çš„æ˜¯ï¼Œæ²¡æœ‰çœŸæ­£çš„ç§»åŠ¨åº”ç”¨ç¨‹åºå®¢æˆ·ç«¯ï¼Œåªæœ‰åœ¨androidä¸Šã€‚ <br><br> äº†è§£ç¼ºä¹å¥½çš„ç§»åŠ¨åº”ç”¨ç¨‹åºæ˜¯ç‰©è”ç½‘é¢†åŸŸçš„ä¸€ä¸ªå¤§é—®é¢˜ï¼ˆå¾ˆå¤šäººè¯´ï¼Œä½†æ˜¯ä»–ä»¬åšçš„å¾ˆå°‘..ï¼‰-æˆ‘å’Œæˆ‘çš„å›¢é˜Ÿåœ¨å·¥ä½œä¸­å†³å®šä¸ºandroidï¼Œiosï¼Œwpåˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ä½¿å…¶ç¬¦åˆæ‰€æœ‰æ ‡å‡†ä¸”èˆ’é€‚ã€‚ ç¨åæˆ‘å°†ä»‹ç»æœ‰å…³å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ç»“äº¤ESP8266 + MTRF64ï¼ˆNooliteï¼‰æœ‹å‹å¹¶å‡†å¤‡Nodemcuå›ºä»¶çš„æ–¹æ³•ã€‚ å®ƒå°†æ˜¯ä¼Ÿå¤§ï¼Œæ–¹ä¾¿ï¼Œä¾¿å®œå’Œç¾ä¸½çš„ï¼ åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>å…³æ³¨åº”ç”¨ç¨‹åºæ–°é—»ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/96c/60d/e63/96c60de63c38253cccee7ddb9aad0b4b.png" alt="å›¾ç‰‡"><br><br>  <s>ç°åœ¨ï¼Œæ‚¨æ— éœ€ä»»ä½•å®¶ç”¨æœåŠ¡å™¨å’ŒUSBé€‚é…å™¨å³å¯æ§åˆ¶Nooliteç…§æ˜ï¼Œä»·æ ¼ä¸º50-100ç¾å…ƒï¼</s> <br><br><h2> å®¶åº­è‡ªåŠ¨åŒ–çš„æ€»ä½“æ–¹æ¡ˆ </h2><br> ä»ç„¶å­˜åœ¨ä»¥ä¸‹æ–¹æ¡ˆï¼š <br><br><blockquote> è§†é¢‘ç›‘æ§ï¼šxeomaè§†é¢‘ç›‘æ§[ç½‘ç»œæ‘„åƒæœº] <br> ç³»ç»Ÿå•å…ƒä¸Šçš„æœåŠ¡å™¨ï¼šnginx + gunicorn + python + mqttä»£ç† <br> ç®¡ç†ï¼šPebble watch + MQTTå®¢æˆ·ç«¯ <br> æ§åˆ¶æ¨¡å—ï¼ˆç³»ç»ŸèŠ‚ç‚¹ï¼‰ï¼šESP8266 +å…‰è€¦åˆå™¨\ ds18b20ï¼Œdht11ä¼ æ„Ÿå™¨[22] </blockquote><br> ç”±äºæˆ‘çœ‹åˆ°äº†MQTTåè®®ä¸­çš„è®¸å¤šä¾¿åˆ©æ€§ï¼Œä»è®¢é˜…ä½“ç³»ç»“æ„å’Œä¸æœ€ç»ˆIoTè®¾å¤‡çš„å³æ—¶é€šä¿¡å¼€å§‹ï¼Œåˆ°æœ€åä¸€ä¸ªäº‹å®æ˜¯MQTTæ¶ˆæ¯å¯ä»¥é€šè¿‡è·¯ç”±å™¨é£è¡Œè€Œæ— éœ€â€œè½¬å‘â€é‚£é‡Œçš„ä»»ä½•ç«¯å£å¹¶é“ƒé¼“è·³èˆã€‚ æ–¹ä¾¿ï¼ ç©å¾—å¼€å¿ƒï¼ çƒ­æƒ…åœ°:) <br><br> æ‰€æœ‰è¿™äº›å¯¼è‡´æˆ‘åˆ†æ•£äº†ç³»ç»Ÿçš„åˆ†æ•£æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé¿å…äº†ä¸€ä¸ªâ€œå®¶åº­æš´åŠ›â€å¹¶åˆ‡æ¢åˆ°è®¸å¤šæ‰€è°“çš„èŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨äº†ä¸€ä¸ªäº‘MQTTä»£ç†ï¼ˆæœ‰å…è´¹çš„MQTTä»£ç†ï¼Œä¾‹å¦‚ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">mqtt.ximxim.com</a> ï¼ˆåœ¨ç«™ç‚¹ç™»å½•å¹¶é€šè¿‡è®¿é—®æƒé™ï¼‰ ï¼‰ï¼‰-ç”±äºesp8266è§£å†³äº†æ‰€æœ‰é—®é¢˜ï¼Œå› æ­¤å®ƒåˆä½¿ç”¨MQTTåè®®é€šè¿‡wifiå·¥ä½œã€‚ <br><br> é‰´äºMQTT Buddyå°†æä¾›è„šæœ¬æœåŠ¡ï¼Œæˆ‘ä¸ä¼šè€ƒè™‘ç¼–å†™ä»»ä½•å®¶åº­è„šæœ¬ï¼Œæˆ‘åªä¼šåœ¨äº‘è§£å†³æ–¹æ¡ˆä¸­åˆ›å»ºå®ƒä»¬ï¼Œè¿™å°†æ˜¯çœŸæ­£çš„ç‰©è”ç½‘ï¼Œå¹¶ä¸”å¯ä»¥å·¥ä½œï¼ ä»è¨€è¯­åˆ°è¡ŒåŠ¨ï¼ <br><br><h2>  ESP8266 </h2><br> å½“æˆ‘ç†Ÿæ‚‰è¯¥å¼€å‘æ¿æ—¶ï¼Œå¼€å‘æ¿å¾ˆå°ï¼Œå°±ç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ï¼Œå®ƒæ”¯æŒNodemcuå›ºä»¶ä¸Šçš„LUAç¼–ç¨‹è¯­è¨€ã€‚ æ‚¨éœ€è¦çš„æ˜¯+ MQTTæ¨¡å—ã€‚ åœ¨è‡ªåŠ¨åŒ–é¢†åŸŸï¼Œç®€å•å¯é çš„è§£å†³æ–¹æ¡ˆæ˜¯åŸºç¡€ã€‚ è´¹ç”¨ä»2ç¾å…ƒåˆ°5ç¾å…ƒä¸ç­‰ï¼ˆä½¿ç”¨æ¿è½½USBé€‚é…å™¨çš„ç¬¬5ä¸ªå‹å·ç«‹å³æ”¶è´¹ï¼‰ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿéƒ¨ç½²å­ç³»ç»Ÿã€‚ <br><br>  WiFiè¿æ¥é€Ÿåº¦å¾ˆå¿«ï¼Œå¯èƒ½æ€§å¾ˆå¤šã€‚ ä¾‹å¦‚ï¼šå¤§é—¨/è½¦åº“\æµ‡æ°´\ç…§æ˜æ§åˆ¶ã€‚ æˆ‘æœ‰30ï¼…çš„è‰åªçŒæº‰ç”±Nooliteç³»ç»Ÿï¼ˆå¹²å¼æ¥è§¦å—ï¼‰é©±åŠ¨ï¼Œå…¶ä½™70ï¼…çš„esp8266å¼€å‘æ¿é€šè¿‡ä½¿ç”¨MQTTåè®®çš„LUAè¯­è¨€æ§åˆ¶ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ç¤ºä¾‹esp8266çš„LUAä»£ç ï¼Œè·å–ipå¹¶ä½¿ç”¨MQTTè°ƒç”¨å·¥ä½œæ–‡ä»¶</b> <div class="spoiler_text"><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--load credentials dofile("credentials.lua") function init(name, pass) wifi.setmode(wifi.STATION) wifi.sta.config(name, pass) wifi.sta.connect() tmr.alarm(0, 1000, 1, function() if wifi.sta.getip()== nil then print("IP unavaiable, Waiting...") else tmr.stop(0) print("Config done, IP is "..wifi.sta.getip()) print("mac : "..wifi.sta.getmac()) dofile("mqtt.lua") end end) end print("START!") init(SSID,PASSWORD)</span></span></code> </pre><br><br>  -mqtt.luaæ–‡ä»¶ <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> door = <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-comment"><span class="hljs-comment">-- gpio13 local window = 6 -- gpio12 local cooler = 5 --gpio14 local led = 4 --GPIO2 board led! LOW == turn ON local light1 = 8 --gpio 15 local light2 = 1 --gpio 5 local light3 = 2 -- gpio 4 function register_myself() m:subscribe("mqtt_buddy/#",0,function(conn) print ("subscribed to Xim mqtt.ximxim.com server") end) end m = mqtt.Client("MQTT_BUDDY_SHOW_ROOM", 120, MQTT_USER, MQTT_PASS) m:on("connect", function(client) print ("connected to Xim mqtt.ximxim.com server") end) m:on("offline", function(client) reconnect_mqtt() end) m:on("message", function(client, topic, data) --print(topic.." data:"..data) if topic == "mqtt_buddy/window" and data == "1" then print "open-close window..." gpio.write(window, gpio.HIGH) gpio.write(led, gpio.LOW) tmr.alarm(1, 1000, tmr.ALARM_SINGLE, function() gpio.write(window, gpio.LOW) gpio.write(led, gpio.HIGH) print "command to close\open window is sent!" end) elseif topic == "mqtt_buddy/door" and data == "1" then print "open-close door..." gpio.write(door, gpio.HIGH) gpio.write(led, gpio.LOW) tmr.alarm(2, 1000, tmr.ALARM_SINGLE, function() gpio.write(door, gpio.LOW) gpio.write(led, gpio.HIGH) print "command to close\open door is sent!" end) elseif topic == "mqtt_buddy/cooler" then if data == "1" then print "switch on fan..." gpio.write(cooler, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch off fan..." gpio.write(cooler, gpio.LOW) gpio.write(led, gpio.HIGH) end elseif topic == "mqtt_buddy/light1" then if data == "1" then print "switch light1 ON..." gpio.write(light1, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch light1 off..." gpio.write(light1, gpio.LOW) gpio.write(led, gpio.HIGH) end elseif topic == "mqtt_buddy/light2" then if data == "1" then print "switch light2 ON..." gpio.write(light2, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch light2 off..." gpio.write(light2, gpio.LOW) gpio.write(led, gpio.HIGH) end elseif topic == "mqtt_buddy/light3" then if data == "1" then print "switch light3 ON..." gpio.write(light3, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch light3 off..." gpio.write(light3, gpio.LOW) gpio.write(led, gpio.HIGH) end end end) m:connect(MQTT_SERVER, MQTT_SERVER_PORT, 0, function(conn) register_myself() end)</span></span></code> </pre><br></div></div><br><h3> é—®é¢˜ </h3><br> åœ¨ä¸€ä¸ªåºå¤§çš„æœ‰<b>æ€æƒ³çš„</b>ç¤¾åŒºä¸­ï¼Œæˆ‘æƒ³è°ˆä¸€ä¸ªéå¸¸é‡è¦çš„è¯é¢˜ï¼Œæˆ–è€…æ˜¯æˆ‘æƒ³è§£å†³çš„é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´è¿›è¡Œæ›´æ·±å…¥çš„ç ”ç©¶/çŸ¥è¯†ã€‚ <br><br> åº•çº¿æ˜¯ï¼šé€šè¿‡æƒåŠ›ä¸‹æ”¾ï¼Œè§†é¢‘ç›‘è§†ä»ç„¶å­˜åœ¨ï¼Œè¿™éœ€è¦ä¸€ç§æˆ–å¤šç§æ–¹å¼ï¼ˆè‡³å°‘ï¼‰å°†ä¸»æœºå›¾åƒä¼ è¾“åˆ°è§†é¢‘ç›‘è§†æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ivideonï¼‰æˆ–ä»€è‡³åœ¨xeomaä¹‹ç±»çš„å®¶ç”¨è®¡ç®—æœºä¸Šå¤„â€‹â€‹ç†è§†é¢‘çš„ä¸»æœºï¼ˆå°½ç®¡å®ƒä»¬ä¹Ÿæœ‰äº‘ï¼‰-ä¸€ç§æˆ–å¦ä¸€ç§æ–¹å¼-æ‚¨éœ€è¦â€œè½¬å‘â€è§†é¢‘æµï¼Œå…·æœ‰æœ€ç»ˆè®¡ç®—èƒ½åŠ›çš„å›¾ç‰‡ï¼ˆäº‘è§£å†³æ–¹æ¡ˆï¼‰ï¼ˆåä¹‹äº¦ç„¶ï¼‰ï¼Œä»¥ä½¿æµä¼ è¾“å˜å¾—ç®€å•ã€‚ <br><br> æœ‰æƒ³æ³•ä»ç›¸æœºæ¥æ”¶æºå›¾åƒï¼ˆè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸æ˜¯æ¯ä¸ªç›¸æœºéƒ½æœ‰ä¸€ä¸ªç”¨äºä»ç›¸æœºæ¥æ”¶å›¾ç‰‡çš„URLï¼Œé€šå¸¸ä¸æ¸…æ¥šå…¶ä»–äººå°†å¦‚ä½•è¯†åˆ«æ­¤URL ....ï¼‰å¹¶è½¬å‘åˆ°æ”¯æŒäºŒè¿›åˆ¶æ•°æ®çš„MQTTé€šé“ï¼ˆå³æœ‰ä¸€å¼ å›¾ç‰‡å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡mqttåè®®ä»¥äºŒè¿›åˆ¶å½¢å¼ä¼ è¾“ï¼‰ã€‚ <br><br> ä¹Ÿè®¸æœ‰äººå·²ç»å°è¯•å®ç°è¿™æ ·çš„äº‹æƒ…= ESP8266 + IPç½‘ç»œæ‘„åƒå¤´ï¼Ÿ <br> è¯·å›å¤ï¼ˆbogdanovich.alex [@] gmail.comï¼‰ã€‚ æˆ‘å°†éå¸¸æ„Ÿè°¢ï¼ <br><br> å½“å®æ–½probrosæ—¶ï¼Œå®¶åº­æœåŠ¡å™¨çš„é—®é¢˜å°†æ¶ˆå¤±ã€‚ æ€ä¹ˆäº† å› ä¸ºä»–åƒç”µå¹¶åŠ çƒ­æˆ‘çš„ç‚‰å­:) <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/148/bfb/eab/148bfbeab6e37921aa198344af6564de.png" alt="å›¾ç‰‡"><br><br> ä¸€åˆ‡é¡ºåˆ©ï¼Œå¿ƒæƒ…æ„‰å¿«ï¼ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN403273/">https://habr.com/ru/post/zh-CN403273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN403255/index.html">åˆ›å»ºç¬¬ä¸€ä¸ªâ€œæ„ŸçŸ¥â€å¹¿å‘Šæ‹¦æˆªå™¨ï¼Œå®ƒä¸é¡µé¢å¸ƒå±€æ— å…³</a></li>
<li><a href="../zh-CN403263/index.html">å¦‚ä½•åœ¨â€œ NAGâ€æœåŠ¡ä¸­å¿ƒå®‰æ’å·¥ä½œ</a></li>
<li><a href="../zh-CN403265/index.html">é…’åº—ä¸šå‘Airbnbå®£æˆ˜</a></li>
<li><a href="../zh-CN403267/index.html">é€šè¿‡FPGAåˆ°èŠ¯ç‰‡ä¸Šç³»ç»Ÿï¼šåŸºè¾…æ•°å­—å¾®ç”µå­å­¦å‘¨-2017å¹´4æœˆ24æ—¥è‡³29æ—¥</a></li>
<li><a href="../zh-CN403271/index.html">ç›´å‡æœºå°„å‡»</a></li>
<li><a href="../zh-CN403275/index.html">å¯»æ‰¾å®‡å®™ä¸­ç¼ºå°‘çš„åç‰©è´¨ä»å¤„äºä»¤äººä¸å®‰çš„ä¸ç¡®å®šçŠ¶æ€</a></li>
<li><a href="../zh-CN403277/index.html">è¿™äº›å°åº¦å¥³ç§‘å­¦å®¶å‘ç«æ˜Ÿå‘å°„äº†ç«ç®­å¼¹ï¼Œå…¶ä»·æ ¼ä½äºç”µå½±ã€Šç«æ˜Ÿäººã€‹çš„é¢„ç®—</a></li>
<li><a href="../zh-CN403279/index.html">RFIDæ–°é—»ï¼šç¢æ¯›çš®å¤§è¡£çš„é”€å”®å·²çªç ´...ä¸Šé™</a></li>
<li><a href="../zh-CN403281/index.html">Windows 10å°†ç¦æ­¢åå°åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN403283/index.html">3Dæ‰“å°æœºFuntastique EVO v1.0ï¼šé¦–æ¬¡ä»‹ç»</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>