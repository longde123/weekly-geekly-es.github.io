<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📏 🙋 😰 Geschichte der alten Ikonen. Das Rätsel der 18 Farben. Transparente und inverse Farben 🗃️ 👩‍❤️‍💋‍👨 💊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nur wenige Menschen interessieren sich jetzt nicht mehr für ein oder zwei Kilobyte. Aber es gibt solche Leute, und diese Notiz wurde nur für einen sol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geschichte der alten Ikonen. Das Rätsel der 18 Farben. Transparente und inverse Farben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422495/"> Nur wenige Menschen interessieren sich jetzt nicht mehr für ein oder zwei Kilobyte.  Aber es gibt solche Leute, und diese Notiz wurde nur für einen solchen <s>Nerd einer</s> Person geschrieben.  ) <br><br>  In diesen Einzelfällen, in denen ich ein ausdrucksstarkes Symbol (.ico) der Anwendung aufzeichnen und gleichzeitig Bytes speichern musste, habe ich den folgenden Hack verwendet: Ich habe das Bild im 16-Farben-Modus aufgenommen - aber!  - nicht in der üblichen festen Palette, sondern in der adaptiven. <br><br>  Was gibt es?  Symbol 48x48, 1-Bit-Transparenz, 256 Farben = 3774 Bytes, es ist auch in 16 Farben = 1662 Bytes.  Die Verstärkung beträgt 2 Kilobyte bei einer leichten Abnahme der Bildqualität. <br><br><img src="https://habrastorage.org/webt/7r/hi/ph/7rhiphjjh6lvnh-k1qtcfdhzpmm.png"><br><br>  Ein Beispiel.  Von links nach rechts: <br><br><ul><li>  256-Farben-Original </li><li>  eine feste Standard-16-Farben-Palette (und hier habe ich ein paar Minuten lang eine Luke aufgenommen, damit das Bild zumindest ein anständiges Aussehen hat) </li><li>  adaptive 16-Farben-Palette + Schraffur (Dithering). </li></ul><br>  Wie funktioniert es  Seltsamerweise enthält das 16-Farben-Symbol immer eine Palette.  Das heißt, 99,9% der alten Symbole enthalten genau dieselbe 64-Byte-Farbtabelle (4 Byte pro Farbe).  Und ja - es stellt sich heraus, dass es neu programmiert werden kann. <br><a name="habracut"></a><br>  Leider bin ich mit dem Programm nicht vertraut, das mit solchen Symbolen vollständig funktionieren kann.  Daher hier das Rezept, wie Sie ein "minderwertiges" Symbol erstellen: Nehmen Sie IrfanView, laden Sie ein Bild hinein: entweder eine vorbereitete 16-Farben-Farbe oder reduzieren Sie die Anzahl der Farben direkt darin: Menü - Bild - Farbtiefe reduzieren ... - 16 Farben.  Jetzt: Menü - Speichern unter ... - .ico-Format auswählen.  Ist das alles  Nein, nicht alle: Irfan View weiß nicht, wie man mit Transparenz arbeitet, es muss manuell in einem anderen Programm wiederhergestellt werden.  Microangelo Studio kann solche Symbole laden und bearbeiten (leider ist es nicht möglich, eine solche Bibliothek von Grund auf neu zu erstellen, genau wie das Erstellen solcher Symbole von Grund auf).  Wir laden das Symbol in Microangelo und ... vielleicht erhalten wir sofort ein Warnfenster über die "falsche Palette" - was dies in der Praxis bedeutet, wird später beschrieben.  Mit den Werkzeugen „Füllen“ und „Bleistift“ markieren wir die transparenten Zonen.  aufschreiben;  fertig! <br><br>  Das habe ich vor ungefähr zehn Jahren getan.  Nachdem ich mir die Microangelo-Palette genau angesehen habe, habe ich jetzt Fragen.  Was ist diese seltsame Palette, 18 Farben?  Wie können Sie 18 Farben in einer Datei speichern?  Die Zahl ist nicht rund, meine Herren, Programmierer tun dies nicht;  es ist einfach nicht bequem für sie.  )) Es ist zu sehen, dass die Palette einfarbige 16 Farben und zwei Servicefarben enthält: "transparent" und "invers".  Was für eine "Umkehrung"?  - Wenn eine solche Farbe auftritt, zeigt sie das Negativ dessen an, was darunter liegt.  es wird am häufigsten in Cursorn verwendet;  und der Cursor ist im Wesentlichen und in der Struktur der Datei auch ein Symbol.  Aber wie werden all diese Farben gespeichert?  Wenn gewöhnliche Bildpunkte in 4 Bit (16 Farben) gepackt sind, kann Transparenz nur als separate Bitmaske gespeichert werden (1 Bit für jeden Bildpunkt).  Okay, wo ist dann die Inversion gespeichert?  Noch eine Maske oder was?  Nicht wirtschaftlich, aber möglich ... Zählen wir. <br><br>  Symbol 48x48, 16 Farben, 1 Bild.  Die Dateigröße beträgt 1662 Bytes.  Was ist drin?  Ich stelle mir die Feinheiten schwach vor, versuche es aber herauszufinden.  Der Hauptteil, das Bild selbst: 48 * 48/2 = 1152 Bytes.  Palette: 16 * 4 = 64 Bytes.  Die Transparenzmaske ist 48 * 48/8 = 288 Bytes.  Header .ico, offiziell = 6 Bytes.  Beschreibung des Rahmens (1 Stk.) Aus der Dokumentation = 16 Bytes.  Gesamt: 1152 + 64 + 288 + 6 + 16 = 1526. Wahrscheinlich gibt es noch etwas anderes, da die tatsächliche Dateigröße größer ist - aber das spielt keine Rolle.  Eine andere Sache ist wichtig, der Rest der "Inkonsistenz" ist klein: 136 Bytes, und es erlaubt offensichtlich nicht, eine weitere Bitmaske mit einer Größe von 288 Bytes zu platzieren.  Also ... die umgekehrte Farbe ist irgendwie in das Bild selbst eingebettet.  Vielleicht können Sie jetzt selbst erraten, wie sie es gemacht haben? <br><br>  Und sie haben es anscheinend so gemacht: Im ursprünglichen Windows (es scheint, beginnend mit Win 95OSR2 vollständig und in Win XP und neueren bereits teilweise), streng genommen in den Symbolen und Cursorn - es gab keine wirklich transparente Farbe.  Wenn die Alpha-Maske Folgendes anzeigt: Der aktuelle Cursor / Symbolpunkt ist "transparent" - die Farbe unter dem Cursor / Symbol wurde übernommen und XOR-verknüpft ("exklusiv" oder ""; möglicherweise gab es nur eine Subtraktion) - Aufmerksamkeit!  - mit der aktuellen Punktfarbe aus der Symbolpalette. <br><br>  Was ist das  Wenn es die erste Farbe war (Schwarz in einer festen Palette), hat XOR „nichts“ mit dem Hintergrund gemacht - die Farbe wurde nur transparent.  Wenn es die letzte Farbe war (in einer festen Palette - Weiß), änderte sich die Farbe vollständig und wurde zu einem Negativ.  Dies ist das ganze Geheimnis, wie „18 Farben“ gespeichert wurden ... Das heißt noch einmal: „transparent“ = schwarze (+) Alpha-Maske, „invers“ = weiße (+) Alpha-Maske.  Und jetzt - lassen Sie uns über Störungen sprechen. <br><br>  In der oben von Microangelo erwähnten Warnung heißt es: "Sie haben keine vollwertigen weißen und schwarzen Farben in der Palette, die Arbeit mit Transparenz ist falsch!"  In der Tat kann unsere adaptive Palette durchaus auf Schwarz oder Weiß verzichten.  Wie wird dann Transparenz funktionieren?  Oh, genau wie wir es erwarten: Es wird etwas Farbe aus der Palette (zum Beispiel Grün), "XOR" mit dem Hintergrund, und wir werden eine schöne lila Farbe anstelle von Transparenz erhalten.  )) Oder ein anderes Beispiel - Schwarz ist versehentlich an die Stelle der letzten Farbe in der Palette gefallen: und die „Inversion“ wurde zur üblichen vollwertigen Transparenz. <br><br><img src="https://habrastorage.org/webt/ri/69/um/ri69um6yqmwzvzwbbtywqwimqpg.png"><br><br>  <i>Beispiel: Links ist eine Standardpalette, rechts ist neu programmiert.</i>  <i>Auf der linken Seite funktionieren Transparenz (P) und Inversion (I) so, wie sie sollten.</i>  <i>rechts - offensichtlich nicht.</i> <br><br>  Wir können jedoch alle diese Reize von Symbolen nur im ursprünglichen Windows beobachten.  Moderne Betriebssysteme wie Win 10 ignorieren die Farben der Palette, und die Bitmaske „Transparenz“ funktioniert immer genauso wie Transparenz in ihrer reinsten Form: Es gibt kein XOR und auch keine Inversion.  Im Cursor-Anzeigemechanismus besteht jedoch immer noch Kompatibilität - dort funktioniert eine vollwertige gute alte wirtschaftliche Schaltung;  "Warm, Lampe" und ... nur wenige Menschen verstehen und brauchen. <br><br><img src="https://habrastorage.org/webt/o_/r9/lo/o_r9lonhiwt4dyhaecuvewmsapw.png"><br><br>  <i>Beispiel: Unterschiedliche Anzeige derselben Symbole in Windows XP und Windows 7.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422495/">https://habr.com/ru/post/de422495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422483/index.html">MIS. Insertionen und entfernte Organe</a></li>
<li><a href="../de422485/index.html">So sparen Sie Geld bei der Gründung eines Unternehmens in den USA: Unternehmensregistrierung, Büro, Buchhaltung und Werbung</a></li>
<li><a href="../de422487/index.html">Kurzanleitung für CSS-Variablen (Anwendungsfälle, Syntax und Beispiele)</a></li>
<li><a href="../de422491/index.html">Geld entscheidet. "Wir haben drei Entwickler, aber wir wissen nicht, wie wir arbeiten sollen."</a></li>
<li><a href="../de422493/index.html">Kubernetes (k8s) + Helm + GitLab CI / CD. Richtig bereitstellen</a></li>
<li><a href="../de422497/index.html">ICANN hat eine detaillierte Anleitung veröffentlicht, was Sie beim Upgrade des KSK in der Root-Zone erwarten können</a></li>
<li><a href="../de422499/index.html">Noch einmal zu Webkomponenten ...</a></li>
<li><a href="../de422501/index.html">Neue technologische Verfahren zur Herstellung von Mikrochips werden zunehmend verschoben - warum?</a></li>
<li><a href="../de422507/index.html">PHP 7.3. Was gibt's Neues</a></li>
<li><a href="../de422509/index.html">Zusammenfassung des Buches "Never Eat Alone"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>