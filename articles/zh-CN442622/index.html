<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“ ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ½ ğŸ”¼ å¦‚ä½•åœ¨Unityä¸­ä½¿åç¨‹æ›´åŠ æ–¹ä¾¿ ğŸ‘©ğŸ¼â€ğŸŒ¾ ğŸ†™ ğŸµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ¯ä¸ªå¼€å‘äººå‘˜éƒ½ä¼šå‘ç°åœ¨Unityä¸­ä½¿ç”¨åç¨‹çš„ä¼˜ç¼ºç‚¹ã€‚ å¹¶ä¸”ä»–å†³å®šåœ¨å“ªäº›æ–¹æ¡ˆä¸­åº”ç”¨å®ƒä»¬ï¼Œä»¥åŠåœ¨å“ªäº›æ–¹æ¡ˆä¸­ä¼˜å…ˆè€ƒè™‘æ›¿ä»£æ–¹æ¡ˆã€‚ 


 åœ¨æ—¥å¸¸ç»ƒä¹ ä¸­ï¼Œæˆ‘ç»å¸¸å°†åç¨‹ç”¨äºå„ç§ç±»å‹çš„ä»»åŠ¡ã€‚ ä¸€æ¬¡ï¼Œæˆ‘æ„è¯†åˆ°æ˜¯æˆ‘æƒ¹æ¼å¹¶æ‹’ç»äº†è®¸å¤šæ–°æ¥è€…ã€‚ 
 å™©æ¢¦ç•Œé¢ 


 è¯¥å¼•æ“ä»…æä¾›äº†å‡ ç§æ–¹æ³•ä»¥åŠä½¿ç”¨åç¨‹çš„å‡ ç§é‡è½½ï¼š 


 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•åœ¨Unityä¸­ä½¿åç¨‹æ›´åŠ æ–¹ä¾¿</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442622/"><p> æ¯ä¸ªå¼€å‘äººå‘˜éƒ½ä¼šå‘ç°åœ¨Unityä¸­ä½¿ç”¨åç¨‹çš„ä¼˜ç¼ºç‚¹ã€‚ å¹¶ä¸”ä»–å†³å®šåœ¨å“ªäº›æ–¹æ¡ˆä¸­åº”ç”¨å®ƒä»¬ï¼Œä»¥åŠåœ¨å“ªäº›æ–¹æ¡ˆä¸­ä¼˜å…ˆè€ƒè™‘æ›¿ä»£æ–¹æ¡ˆã€‚ </p><br><p> åœ¨æ—¥å¸¸ç»ƒä¹ ä¸­ï¼Œæˆ‘ç»å¸¸å°†åç¨‹ç”¨äºå„ç§ç±»å‹çš„ä»»åŠ¡ã€‚ ä¸€æ¬¡ï¼Œæˆ‘æ„è¯†åˆ°æ˜¯æˆ‘æƒ¹æ¼å¹¶æ‹’ç»äº†è®¸å¤šæ–°æ¥è€…ã€‚ </p><a name="habracut"></a><br><h2 id="koshmarnyy-interfeys"> å™©æ¢¦ç•Œé¢ </h2><br><p> è¯¥å¼•æ“ä»…æä¾›äº†å‡ ç§æ–¹æ³•ä»¥åŠä½¿ç”¨åç¨‹çš„å‡ ç§é‡è½½ï¼š </p><br><p>  <strong>å¯åŠ¨</strong> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docs</a> ï¼‰ </p><br><ul><li><code>StartCoroutine(string name, object value = null)</code> </li> <li> <code>StartCoroutine(IEnumerator routine)</code> </li> </ul><br><p>  <strong>åœæ­¢</strong> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docs</a> ï¼‰ </p><br><ul><li> <code>StopCoroutine(string methodName)</code> </li> <li> <code>StopCoroutine(IEnumerator routine)</code> </li> <li> <code>StopCoroutine(Coroutine routine)</code> </li> </ul><br><p> å…·æœ‰å­—ç¬¦ä¸²å‚æ•°çš„é‡è½½ï¼ˆå°½ç®¡å®ƒä»¬å…·æœ‰æ¬ºéª—æ€§çš„ä¾¿åˆ©ï¼‰å¯ä»¥ç«‹å³ <del> é€åˆ°åƒåœ¾ç®± </del> è‡³å°‘å‡ºäºä¸‰ä¸ªåŸå› è€Œå¿˜è®°ã€‚ </p><br><ul><li> å­—ç¬¦ä¸²æ–¹æ³•åç§°çš„æ˜ç¡®ä½¿ç”¨å°†ä½¿å°†æ¥çš„ä»£ç åˆ†æï¼Œè°ƒè¯•ç­‰æ›´åŠ å¤æ‚ã€‚ </li><li> æ ¹æ®æ–‡æ¡£ï¼Œå­—ç¬¦ä¸²é‡è½½éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œå¹¶ä¸”åªå…è®¸ä¼ é€’ä¸€ä¸ªé™„åŠ å‚æ•°ã€‚ </li><li> åœ¨æˆ‘çš„å®è·µä¸­ï¼Œç»å¸¸å‘ç°<code>StopCoroutine</code>å­—ç¬¦ä¸²é‡è½½æ—¶ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚  Corutinç»§ç»­è¢«å¤„å†³ã€‚ </li></ul><br><p> ä¸€æ–¹é¢ï¼Œæä¾›çš„æ–¹æ³•è¶³ä»¥æ»¡è¶³åŸºæœ¬éœ€æ±‚ã€‚ ä½†æ˜¯éšç€æ—¶é—´çš„æµé€ï¼Œæˆ‘å¼€å§‹æ³¨æ„åˆ°ï¼Œåœ¨é¢‘ç¹ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œæˆ‘å¿…é¡»ç¼–å†™å¤§é‡çš„æ ·æ¿ä»£ç -è¿™å¾ˆç´¯äººï¼Œå¹¶ä¸”æŸå®³äº†å…¶å¯è¯»æ€§ã€‚ </p><br><h2 id="blizhe-k-suti"> æ›´æ¥è¿‘é‡ç‚¹ </h2><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³æè¿°ä¸€ä¸ªæˆ‘å·²ç»ä½¿ç”¨å¾ˆé•¿æ—¶é—´çš„å°å‹åŒ…è£…å™¨ã€‚ å¤šäºäº†å¥¹ï¼Œå¯¹åç¨‹çš„æƒ³æ³•ä½¿æ¨¡æ¿ä»£ç çš„ç‰‡æ®µä¸å†å‡ºç°åœ¨æˆ‘çš„è„‘æµ·ä¸­ï¼Œæˆ‘ä¸å¾—ä¸ä¸å®ƒä»¬å…±èˆã€‚ æ­¤å¤–ï¼Œæ•´ä¸ªå›¢é˜Ÿå˜å¾—æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ä½¿ç”¨åç¨‹çš„ç»„ä»¶ã€‚ </p><br><p> å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ä»»åŠ¡-ç¼–å†™ä¸€ä¸ªç»„ä»¶ï¼Œä½¿æ‚¨å¯ä»¥å°†å¯¹è±¡ç§»åŠ¨åˆ°ç»™å®šç‚¹ã€‚ </p><br><p> æ­¤æ—¶ï¼Œå°†ä½¿ç”¨å“ªç§æ–¹æ³•ä»¥åŠåœ¨ä»€ä¹ˆåæ ‡ä¸‹ç§»åŠ¨éƒ½æ— å…³ç´§è¦ã€‚ æˆ‘å°†é€‰æ‹©è®¸å¤šé€‰é¡¹ä¸­çš„ä»…ä¸€ä¸ª-è¿™äº›æ˜¯æ’å€¼å’Œå…¨å±€åæ ‡ã€‚ </p><br><p> è¯·æ³¨æ„ï¼Œå¼ºçƒˆå»ºè®®ä¸è¦é€šè¿‡æ›´æ”¹å¯¹è±¡çš„â€œå‰é¢â€åæ ‡æ¥ç§»åŠ¨å¯¹è±¡ï¼Œå³ï¼Œå¦‚æœå°†<code>RigidBody</code>ç»„ä»¶ä¸å¯¹è±¡ä¸€èµ·ä½¿ç”¨ï¼ˆç‰¹åˆ«æ˜¯åœ¨<code>Update</code>æ–¹æ³•ä¸­ï¼‰ï¼Œåˆ™æ„é€ <code>transform.position = newPosition</code> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docs</a> ï¼‰ã€‚ </p><br><h3 id="standartnaya-realizaciya"> æ ‡å‡†å®æ–½ </h3><br><p> æˆ‘ä¸ºæ‰€éœ€ç»„ä»¶æå‡ºä»¥ä¸‹å®ç°é€‰é¡¹ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> IEnumerator = System.Collections.IEnumerator; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MoveToPoint</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 target; [Space] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> threshold; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) StartCoroutine(MoveRoutine()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveRoutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Vector3.Distance(transform.position, target) &gt; threshold) { transform.position = Vector3.Lerp(transform.position, target, speed * Time.deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">å…³äºä»£ç çš„ä¸€ç‚¹</b> <div class="spoiler_text"><p> åœ¨<code>Move</code>æ–¹æ³•ä¸­ï¼Œä»…åœ¨å°šæœªè¿è¡Œåç¨‹æ—¶éå¸¸é‡è¦ã€‚ å¦åˆ™ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¯åŠ¨å®ƒä»¬ï¼Œå¹¶ä¸”å®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä¼šç§»åŠ¨å¯¹è±¡ã€‚ </p><br><p>  <code>threshold</code> -å…¬å·®ã€‚ æ¢å¥è¯è¯´ï¼Œåˆ°ç‚¹çš„è·ç¦»ï¼Œå³æˆ‘ä»¬å·²ç»è¾¾åˆ°ç›®æ ‡çš„æ¥è¿‘è·ç¦»ã€‚ </p><br><p>  <strong>è¿™æ˜¯ä¸ºäº†ä»€ä¹ˆ</strong> </p><br><p> è€ƒè™‘åˆ°<code>Vector3</code>ç»“æ„çš„æ‰€æœ‰åˆ†é‡ï¼ˆ <code>x</code> ï¼Œ <code>y</code> ï¼Œ <code>z</code> ï¼‰å‡ä¸º<code>float</code>ç±»å‹ï¼Œä½¿ç”¨æ£€æŸ¥åˆ°ç›®æ ‡çš„è·ç¦»ç›¸ç­‰å’Œå…¬å·®ä¸ºå¾ªç¯æ¡ä»¶çš„ç»“æœæ˜¯ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åä¸»æ„</a> ã€‚ </p><br><p> æˆ‘ä»¬æˆ–å¤šæˆ–å°‘åœ°æ£€æŸ¥åˆ°ç›®æ ‡çš„è·ç¦»ï¼Œè¿™å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ </p><br><p> å¦å¤–ï¼Œå¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>Mathf.Approximately</code> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docs</a> ï¼‰æ–¹æ³•è¿›è¡Œç›¸ç­‰æ€§<em>è¿‘ä¼¼</em>æ£€æŸ¥ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡æŸäº›ç§»åŠ¨æ–¹æ³•ï¼Œé€Ÿåº¦å¯èƒ½ä¼šå˜å¾—è¶³å¤Ÿå¤§ï¼Œä»¥ä½¿å¯¹è±¡åœ¨ä¸€å¸§ä¸­â€œè·³è·ƒâ€ç›®æ ‡ã€‚ ç„¶åï¼Œå¾ªç¯å°†æ°¸è¿œä¸ä¼šç»“æŸã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨<code>Vector3.MoveTowards</code>æ–¹æ³•ã€‚ </p><br><p>  <code>Vector3</code>æˆ‘æ‰€çŸ¥ï¼Œåœ¨<code>Vector3</code>ç»“æ„çš„Unityå¼•æ“ä¸­ï¼Œ <code>Vector3</code>è¿ç®—ç¬¦å·²ç»ä»¥<code>Mathf.Approximately</code>è°ƒç”¨çš„æ–¹å¼è¿›è¡Œäº†é‡æ–°å®šä¹‰ï¼Œä»¥æ£€æŸ¥å„ä¸ªç»„ä»¶çš„ç›¸ç­‰æ€§ã€‚ </p></div></div><br><p> åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ç»„ä»¶éå¸¸ç®€å•ã€‚ ç›®å‰æ²¡æœ‰é—®é¢˜ã€‚ ä½†æ˜¯ï¼Œè¯¥ç»„ä»¶æ˜¯ä»€ä¹ˆå…è®¸æ‚¨å°†å¯¹è±¡ç§»åŠ¨åˆ°æŸä¸ªç‚¹ï¼Œä½†æ²¡æœ‰æä¾›åœæ­¢å®ƒçš„æœºä¼šã€‚ è®©æˆ‘ä»¬è§£å†³è¿™ç§ä¸å…¬æ­£ç°è±¡ã€‚ </p><br><p> ç”±äºæ‚¨å’Œæˆ‘å†³å®šä¸èµ°åˆ°é‚ªæ¶çš„ä¸€é¢ï¼Œå¹¶ä¸”ä¸å¯¹å­—ç¬¦ä¸²å‚æ•°ä½¿ç”¨é‡è½½ï¼Œå› æ­¤ç°åœ¨æˆ‘ä»¬éœ€è¦å°†é“¾æ¥ä¿å­˜åˆ°æ­£åœ¨è¿è¡Œçš„åç¨‹çš„æŸä¸ªä½ç½®ã€‚ å¦åˆ™ï¼Œè¯¥å¦‚ä½•åˆ¶æ­¢å¥¹ï¼Ÿ </p><br><p> æ·»åŠ ä¸€ä¸ªå­—æ®µï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Coroutine moveRoutine;</code> </pre> <br><p> ä¿®æ­£<code>Move</code> ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) moveRoutine = StartCoroutine(MoveRoutine()); }</code> </pre> <br><p> æ·»åŠ å®šæ ¼æ–¹æ³•ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) StopCoroutine(moveRoutine); }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">æ•´ä¸ªä»£ç </b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> IEnumerator = System.Collections.IEnumerator; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MoveToPoint</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 target; [Space] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> threshold; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Coroutine moveRoutine; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) moveRoutine = StartCoroutine(MoveRoutine()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) StopCoroutine(moveRoutine); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveRoutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Vector3.Distance(transform.position, target) &gt; threshold) { transform.position = Vector3.Lerp(transform.position, target, speed * Time.deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> </div></div><br><p> å®Œå…¨ä¸åŒçš„äº‹æƒ…ï¼ <del> è‡³å°‘é€‚ç”¨äºä¼¤å£ã€‚ </del></p><br><p> è¿™æ ·å•Š æˆ‘ä»¬æœ‰ä¸€ä¸ªæ‰§è¡Œä»»åŠ¡çš„å°ç»„ä»¶ã€‚ æˆ‘çš„æ„¤æ…¨æ˜¯ä»€ä¹ˆï¼Ÿ </p><br><h3 id="problemy-i-ih-reshenie"> é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆ </h3><br><p> éšç€æ—¶é—´çš„æµé€ï¼Œè¯¥é¡¹ç›®ä¸æ–­å‘å±•ï¼Œå¹¶ä¸”ç»„ä»¶çš„æ•°é‡ä¹Ÿéšä¹‹å¢åŠ ï¼ŒåŒ…æ‹¬ä½¿ç”¨åç¨‹çš„ç»„ä»¶ã€‚ æ¯æ¬¡ï¼Œè¿™äº›äº‹æƒ…è¶Šæ¥è¶Šå›°æ‰°æˆ‘ï¼š </p><br><ul><li> æ­£åœ¨è¿›è¡Œçš„ä¸‰æ˜æ²»å‘¼å« </li></ul><br><pre> <code class="cs hljs">StartCoroutine(MoveRoutine());</code> </pre> <br><pre> <code class="cs hljs">StopCoroutine(moveRoutine);</code> </pre> <br><p> ä»…ä»…çœ‹ç€å®ƒä»¬ä¼šä½¿æˆ‘çš„çœ¼ç›æŠ½æï¼Œè€Œé˜…è¯»è¿™æ ·çš„ä»£ç æ˜¯ä¸€ç§å¯ç–‘çš„ä¹è¶£ï¼ˆæˆ‘åŒæ„ï¼Œå¯èƒ½ä¼šæ›´ç³Ÿï¼‰ã€‚ ä½†æ˜¯æ‹¥æœ‰è¿™æ ·çš„ä¸œè¥¿ä¼šæ›´å¥½ï¼Œæ›´ç›´è§‚ï¼š </p><br><pre> <code class="cs hljs">moveRoutine.Start();</code> </pre> <br><pre> <code class="cs hljs">moveRoutine.Stop();</code> </pre> <br><ul><li> æ¯æ¬¡è°ƒç”¨<code>StartCoroutine</code>å¿…é¡»è®°ä½è¦ä¿å­˜è¿”å›å€¼ï¼š </li></ul><br><pre> <code class="cs hljs">moveRoutine = StartCoroutine(MoveRoutine());</code> </pre> <br><p> å¦åˆ™ï¼Œç”±äºç¼ºä¹å¯¹åç¨‹çš„å¼•ç”¨ï¼Œæ‚¨æ ¹æœ¬æ— æ³•é˜»æ­¢å®ƒã€‚ </p><br><ul><li> æŒç»­æ£€æŸ¥ï¼š </li></ul><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine == <span class="hljs-literal"><span class="hljs-literal">null</span></span>)</code> </pre> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>)</code> </pre> <br><ul><li> è¿˜æœ‰ä½ å¿…é¡»æ°¸è¿œè®°ä½çš„å¦ä¸€ä»¶äº‹ï¼ˆæˆ‘ <del> å†æ¬¡å¿˜è®° </del> ç‰¹åˆ«é”™è¿‡ï¼‰ã€‚ åœ¨åç¨‹çš„æœ€æœ«ç«¯å¹¶ä¸”åœ¨æ¯æ¬¡é€€å‡ºåç¨‹ä¹‹å‰ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨<code>yield break</code> ï¼‰ï¼Œéƒ½å¿…é¡»é‡ç½®å­—æ®µå€¼ã€‚ <br><pre> <code class="cs hljs">moveRoutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre> </li></ul><br><p> å¦‚æœæ‚¨å¿˜è®°äº†ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€æ¬¡æ€§çš„åç¨‹ã€‚ åœ¨<code>moveRoutine</code>ç¬¬ä¸€æ¬¡è¿è¡Œåï¼Œä¸åç¨‹çš„é“¾æ¥å°†ä¿ç•™ï¼Œå¹¶ä¸”æ–°è¿è¡Œå°†ä¸èµ·ä½œç”¨ã€‚ </p><br><p> åŒæ ·ï¼Œåœ¨å¼ºåˆ¶åœæ­¢çš„æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { StopCoroutine(moveRoutine); moveRoutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">è¿›è¡Œæ‰€æœ‰æ›´æ”¹çš„ä»£ç </b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MoveToPoint</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 target; [Space] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> threshold; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Coroutine moveRoutine; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { moveRoutine = StartCoroutine(MoveRoutine()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (moveRoutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { StopCoroutine(moveRoutine); moveRoutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveRoutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Vector3.Distance(transform.position, target) &gt; threshold) { transform.localPosition = Vector3.Lerp(transform.position, target, speed * Time.deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } moveRoutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> </div></div><br><p> æœ‰ä¸€æ¬¡ï¼Œæˆ‘çœŸçš„æƒ³åœ¨æŸä¸ªåœ°æ–¹æ¶ˆé™¤æ•´ä¸ªåŒ–å¦†èˆä¼šï¼Œåªå‰©ä¸‹å¿…è¦çš„æ–¹æ³•ï¼š <code>Start</code> ï¼Œ <code>Stop</code>ä»¥åŠæ›´å¤šäº‹ä»¶å’Œå±æ€§ã€‚ </p><br><p>  <strong>ç»ˆäºå¼€å§‹å§ï¼</strong> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CoroutineObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MonoBehaviour Owner { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Coroutine Coroutine { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Func&lt;IEnumerator&gt; Routine { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsProcessing =&gt; Coroutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CoroutineObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MonoBehaviour owner, Func&lt;IEnumerator&gt; routine</span></span></span><span class="hljs-function">)</span></span> { Owner = owner; Routine = routine; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Process</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Routine.Invoke(); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Stop(); Coroutine = Owner.StartCoroutine(Process()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsProcessing) { Owner.StopCoroutine(Coroutine); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">æ±‡æŠ¥</b> <div class="spoiler_text"><p>  <code>Owner</code> -é“¾æ¥åˆ°åç¨‹çš„<code>MonoBehaviour</code>å®ä¾‹çš„é“¾æ¥ã€‚ å¦‚æ‚¨æ‰€çŸ¥ï¼Œå®ƒå¿…é¡»åœ¨ç‰¹å®šç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œå› ä¸º<code>StartCoroutine</code>å’Œ<code>StopCoroutine</code>æ–¹æ³•<code>StopCoroutine</code> ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé“¾æ¥ï¼Œè¯¥é“¾æ¥å°†æˆä¸ºåç¨‹çš„æ‰€æœ‰è€…ã€‚ </p><br><p> åç¨‹<code>MoveToPoint</code>ç»„ä»¶ä¸­<code>moveRoutine</code>å­—æ®µçš„ç±»ä¼¼ç‰©ï¼ŒåŒ…å«æŒ‡å‘å½“å‰åç¨‹çš„é“¾æ¥ã€‚ </p><br><p>  <code>Routine</code> -å°†ä¸å……å½“åç¨‹çš„æ–¹æ³•è¿›è¡Œé€šä¿¡çš„å§”æ‰˜äººã€‚ </p><br><p>  <code>Process()</code>æ˜¯ä¸»è¦<code>Routine</code>æ–¹æ³•çš„å°å‹åŒ…è£…ã€‚ ä¸ºäº†èƒ½å¤Ÿè·Ÿè¸ªåç¨‹æ‰§è¡Œçš„å®Œæˆæ—¶é—´ï¼Œæœ‰å¿…è¦é‡ç½®å®ƒçš„é“¾æ¥å¹¶åœ¨é‚£ä¸€åˆ»æ‰§è¡Œå¦ä¸€ä¸ªä»£ç ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰ã€‚ </p><br><p>  <code>IsProcessing</code>å…è®¸æ‚¨ç¡®å®šåç¨‹å½“å‰æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚ </p></div></div><br><p> å› æ­¤ï¼Œæˆ‘ä»¬æ‘†è„±äº†å¾ˆå¤šéº»çƒ¦ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç»„ä»¶å‘ˆç°å‡ºå®Œå…¨ä¸åŒçš„å¤–è§‚ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> IEnumerator = System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MoveToPoint</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 target; [Space] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> threshold; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CoroutineObject moveRoutine; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { moveRoutine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CoroutineObject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, MoveRoutine); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; moveRoutine.Start(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; moveRoutine.Stop(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveRoutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Vector3.Distance(transform.position, target) &gt; threshold) { transform.position = Vector3.Lerp(transform.position, target, speed * Time.deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><p> å‰©ä¸‹çš„åªæ˜¯åç¨‹æœ¬èº«å’Œä½¿ç”¨å®ƒçš„å‡ è¡Œä»£ç ã€‚ æ˜æ˜¾æ›´å¥½ã€‚ </p><br><p> å‡è®¾æœ‰ä¸€ä¸ªæ–°ä»»åŠ¡-æ‚¨éœ€è¦æ·»åŠ åœ¨å¯¹è±¡è¾¾åˆ°å…¶ç›®æ ‡ä¹‹åæ‰§è¡Œä»»ä½•ä»£ç çš„åŠŸèƒ½ã€‚ </p><br><p> åœ¨åŸå§‹ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸ªåç¨‹æ·»åŠ ä¸€ä¸ªé™„åŠ çš„å§”æ‰˜å‚æ•°ï¼Œè¯¥åç¨‹å¯ä»¥åœ¨å®Œæˆåè¢«æ‹‰å‡ºã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveRoutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">System.Action callback</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Vector3.Distance(transform.position, target) &gt; threshold) { transform.position = Vector3.Lerp(transform.position, target, speed * Time.deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } moveRoutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span> callback?.Invoke(); }</code> </pre> <br><p> å¹¶è°ƒç”¨å¦‚ä¸‹ï¼š </p><br><pre> <code class="cs hljs">moveRoutine = StartCoroutine(moveRoutine(CallbackHandler)); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CallbackHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// do something }</span></span></code> </pre> <br><p> è€Œä¸”å¦‚æœæœ‰ä¸€äº›lambdaä½œä¸ºå¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆå®ƒçœ‹èµ·æ¥ç”šè‡³æ›´ç³Ÿã€‚ </p><br><p> ä½¿ç”¨æˆ‘ä»¬çš„åŒ…è£…å™¨ï¼Œåªéœ€å°†æ­¤äº‹ä»¶æ·»åŠ ä¸€æ¬¡å³å¯ã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Action Finish;</code> </pre> <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Process</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Routine.Invoke(); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; Finish?.Invoke(); }</code> </pre> <br><p> ç„¶åï¼Œå¦‚æœ‰å¿…è¦ï¼Œè¯·è®¢é˜…ã€‚ </p><br><pre> <code class="cs hljs">moveRoutine.Finished += OnFinish; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnFinish</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// do something }</span></span></code> </pre> <br><p> æˆ‘ç›¸ä¿¡æ‚¨å·²ç»æ³¨æ„åˆ°ï¼Œå½“å‰ç‰ˆæœ¬çš„åŒ…è£…å™¨æä¾›äº†ä»…ä½¿ç”¨æ²¡æœ‰å‚æ•°çš„åç¨‹çš„èƒ½åŠ›ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„åç¨‹ç¼–å†™ä¸€ä¸ªé€šç”¨åŒ…è£…å™¨ã€‚ å…¶ä½™ç±»ä¼¼åœ°å®Œæˆã€‚ </p><br><p> ä½†æ˜¯ï¼Œä»å¥½çš„æ–¹é¢æ¥è¯´ï¼Œæœ€å¥½å°†ä»£ç ï¼ˆå¯¹äºæ‰€æœ‰åŒ…è£…å™¨éƒ½ç›¸åŒï¼‰æ”¾åˆ°æŸä¸ªåŸºç±»ä¸­ï¼Œä»¥å…ç¼–å†™ç›¸åŒçš„ä¸œè¥¿ã€‚ æˆ‘ä»¬æ­£åœ¨ä¸ºæ­¤è€Œæˆ˜ã€‚ </p><br><p> æˆ‘ä»¬å°†å…¶åˆ é™¤ï¼š </p><br><ul><li> å±æ€§<code>Owner</code> ï¼Œ <code>Coroutine</code> ï¼Œ <code>IsProcessing</code> </li><li> æ´»åŠ¨ç»“æŸ </li></ul><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Action = System.Action; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CoroutineObjectBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MonoBehaviour Owner { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Coroutine Coroutine { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsProcessing =&gt; Coroutine != <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action Finished; }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">é‡æ„åçš„æ— å‚æ•°åŒ…è£…å™¨</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CoroutineObject</span></span> : <span class="hljs-title"><span class="hljs-title">CoroutineObjectBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Func&lt;IEnumerator&gt; Routine { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action Finished; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CoroutineObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MonoBehaviour owner, Func&lt;IEnumerator&gt; routine</span></span></span><span class="hljs-function">)</span></span> { Owner = owner; Routine = routine; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Process</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Routine.Invoke(); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; Finished?.Invoke(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Stop(); Coroutine = Owner.StartCoroutine(Process()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(IsProcessing) { Owner.StopCoroutine(Coroutine); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> </div></div><br><p> ç°åœ¨ï¼Œå®é™…ä¸Šï¼Œæ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„åç¨‹åŒ…è£…å™¨ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CoroutineObject</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">CoroutineObjectBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Func&lt;T, IEnumerator&gt; Routine { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action Finished; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CoroutineObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MonoBehaviour owner, Func&lt;T, IEnumerator&gt; routine</span></span></span><span class="hljs-function">)</span></span> { Owner = owner; Routine = routine; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Process</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T arg</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Routine.Invoke(arg); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; Finished?.Invoke(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T arg</span></span></span><span class="hljs-function">)</span></span> { Stop(); Coroutine = Owner.StartCoroutine(Process(arg)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(IsProcessing) { Owner.StopCoroutine(Coroutine); Coroutine = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><p> å¦‚æ‚¨æ‰€è§ï¼Œä»£ç å‡ ä¹ç›¸åŒã€‚ ä»…åœ¨æŸäº›ä½ç½®æ·»åŠ äº†ç‰‡æ®µï¼Œå…·ä½“å–å†³äºå‚æ•°çš„æ•°é‡ã€‚ </p><br><p> å‡è®¾è¦æ±‚æˆ‘ä»¬æ›´æ–°MoveToPointç»„ä»¶ï¼Œä»¥ä¾¿ä¸èƒ½é€šè¿‡ç¼–è¾‘å™¨ä¸­çš„â€œ <code>Inspector</code>çª—å£æ¥è®¾ç½®ç‚¹ï¼Œè€Œå¯ä»¥é€šè¿‡è°ƒç”¨<code>Move</code>æ–¹æ³•æ—¶çš„ä»£ç æ¥è®¾ç½®ã€‚ </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> IEnumerator = System.Collections.IEnumerator; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MoveToPoint</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> threshold; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CoroutineObject&lt;Vector3&gt; moveRoutine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsMoving =&gt; moveRoutine.IsProcessing; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { moveRoutine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CoroutineObject&lt;Vector3&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, MoveRoutine); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 target</span></span></span><span class="hljs-function">)</span></span> =&gt; moveRoutine.Start(target); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; moveRoutine.Stop(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveRoutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 target</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Vector3.Distance(transform.position, target) &gt; threshold) { transform.localPosition = Vector3.Lerp(transform.position, target, speed); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><p> æœ‰è®¸å¤šé€‰é¡¹å¯ç”¨äºå°½å¯èƒ½æ‰©å±•æ­¤åŒ…è£…å™¨çš„åŠŸèƒ½ï¼šæ·»åŠ å»¶è¿Ÿå¯åŠ¨ï¼Œå¸¦æœ‰å‚æ•°çš„äº‹ä»¶ï¼Œå¯èƒ½çš„åç¨‹è¿›å±•è·Ÿè¸ªç­‰ã€‚ ä½†æˆ‘å»ºè®®åœ¨æ­¤é˜¶æ®µåœæ­¢ã€‚ </p><br><p> æœ¬æ–‡çš„ç›®çš„æ˜¯å¸Œæœ›åˆ†äº«æˆ‘é‡åˆ°çš„ç´§è¿«é—®é¢˜å¹¶æå‡ºè§£å†³æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯æ»¡è¶³æ‰€æœ‰å¼€å‘äººå‘˜çš„å¯èƒ½éœ€æ±‚ã€‚ </p><br><p> æˆ‘å¸Œæœ›æ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„åŒå¿—éƒ½å°†ä»æˆ‘çš„ç»éªŒä¸­å—ç›Šã€‚ ä¹Ÿè®¸ä»–ä»¬ä¼šåˆ†äº«ä»–ä»¬çš„æ„è§æˆ–æŒ‡å‡ºæˆ‘å¯èƒ½çŠ¯çš„é”™è¯¯ã€‚ </p><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442622/">https://habr.com/ru/post/zh-CN442622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442612/index.html">ç”µå­æ£‹ç›˜æ¸¸æˆçš„çº¸æ¿å¼•æ“ã€‚ æˆ‘ä»¬å¦‚ä½•ä½¿å…¶æ›´æ¥è¿‘ç°å®</a></li>
<li><a href="../zh-CN442614/index.html">åœ¨Kubernetesä¸Šä½¿ç”¨Jenkinsçš„CI / CD</a></li>
<li><a href="../zh-CN442616/index.html">æˆ‘ä»¬å°†äº‹ä»¶å¤„ç†é€Ÿåº¦æé«˜åˆ°æ¯ç§’160ä¸‡ä¸ª</a></li>
<li><a href="../zh-CN442618/index.html">ä¸ç”¨äºè‡ªæ‹ï¼šä½¿ç”¨åµŒå…¥åœ¨æ™ºèƒ½æ‰‹æœºä¸­çš„æ–°èŠ¯ç‰‡è¿›è¡Œæ•°å­—é…¶è”å…ç–«å¸é™„æµ‹å®š</a></li>
<li><a href="../zh-CN442620/index.html">ITç›‘æ§ä¸­çš„æœºå™¨å­¦ä¹ </a></li>
<li><a href="../zh-CN442624/index.html">ã€Šå®Œç¾ç®—æ³•ã€‹ä¸€ä¹¦ã€‚ åŸºç¡€çŸ¥è¯†</a></li>
<li><a href="../zh-CN442626/index.html">Habraitingï¼šåœ¨Habraæ ‡å¤´ç¤ºä¾‹ä¸Šæ„å»ºä¿„è¯­å•è¯äº‘</a></li>
<li><a href="../zh-CN442630/index.html">LEDç¯çš„è€ç”¨æ€§å’Œå‡å°‘çš„å…‰è¾“å‡º</a></li>
<li><a href="../zh-CN442632/index.html">åœ°çƒ­èƒ½ï¼šå¦‚ä½•å°†åœ°çƒçš„çƒ­é‡è½¬åŒ–ä¸ºæœ‰æ•ˆçš„èƒ½æº</a></li>
<li><a href="../zh-CN442636/index.html">æ‚¨ä¼šç»™ç®¡ç†å±‚å¸¦æ¥åæ¶ˆæ¯å—ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>