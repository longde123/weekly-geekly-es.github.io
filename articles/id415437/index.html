<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📧 💥 🎵 Cara menggulung ML dalam prod: enam garu yang kami injak 👨🏼‍🤝‍👨🏻 🚻 🖱️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, kami mencari ilmuwan data di tim (dan menemukan - halo, nik_son , dan Arseny!). Saat berbicara dengan para kandidat, kami menyadari bah...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara menggulung ML dalam prod: enam garu yang kami injak</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/415437/">  Baru-baru ini, kami mencari ilmuwan data di tim (dan menemukan - halo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">nik_son</a> , dan Arseny!).  Saat berbicara dengan para kandidat, kami menyadari bahwa banyak orang ingin mengubah pekerjaan mereka karena mereka melakukan sesuatu "di meja". <br><br>  Sebagai contoh, mereka mengambil peramalan kompleks yang diusulkan kepala, tetapi proyek berhenti karena perusahaan tidak mengerti apa dan bagaimana untuk memasukkan dalam produksi, bagaimana membuat keuntungan, bagaimana "menangkap kembali" sumber daya yang dihabiskan untuk model baru. <br><br><img src="https://habrastorage.org/webt/ok/et/et/oketet2tebg0tlbjkbrqimzn92g.jpeg"><br><br>  HeadHunter tidak memiliki kekuatan komputasi yang besar, seperti Yandex atau Google.  Kami memahami betapa sulitnya untuk meluncurkan ML kompleks ke dalam produksi.  Oleh karena itu, banyak perusahaan berkutat pada fakta bahwa model linier paling sederhana sedang diluncurkan ke dalam produksi. <br><br>  Dalam proses implementasi ML berikutnya dalam sistem rekomendasi dan dalam pencarian lowongan, kami menemukan sejumlah "garu" klasik.  Perhatikan mereka jika Anda berniat menerapkan ML di rumah: mungkin daftar ini akan membantu Anda untuk tidak menggunakannya <s>dan menemukan rake pribadi Anda sendiri</s> . <br><a name="habracut"></a><br><h2>  Rake No. 1: Ilmuwan Data - Artis Gratis </h2><br>  Di setiap perusahaan yang mulai memperkenalkan pembelajaran mesin, termasuk jaringan saraf ke dalam pekerjaannya, ada kesenjangan antara apa yang ingin dilakukan oleh ilmuwan data dan apa yang menguntungkan produksi.  Termasuk karena bisnis tidak selalu bisa menjelaskan apa manfaatnya dan bagaimana itu bisa membantu. <br><br>  Kami menangani ini dengan cara berikut: kami mendiskusikan semua ide yang muncul, tetapi hanya menerapkan apa yang akan bermanfaat bagi perusahaan - sekarang atau di masa depan.  Kami tidak melakukan penelitian dalam ruang hampa. <br><br>  Setelah setiap implementasi atau percobaan, kami mempertimbangkan kualitas, sumber daya, dan efek ekonomi serta memperbarui rencana kami. <br><br><h2>  Menyapu nomor 2: memperbarui perpustakaan </h2><br>  Masalah ini banyak terjadi.  Banyak perpustakaan baru dan nyaman muncul yang tidak ada yang pernah mendengar beberapa tahun yang lalu, atau tidak ada sama sekali.  Saya ingin menggunakan perpustakaan terbaru, karena lebih nyaman. <br><br>  Tetapi ada beberapa kendala: <br><br>  1. Jika prod menggunakan, misalnya, Ubuntu ke-14, maka kemungkinan besar tidak ada perpustakaan baru di dalamnya.  Solusinya adalah mentransfer layanan ke buruh pelabuhan dan menginstal pustaka Python menggunakan pip (bukan paket deb). <br><br>  2. Jika format yang bergantung pada kode digunakan untuk penyimpanan data (seperti acar), ini akan membekukan perpustakaan yang digunakan.  Yaitu, ketika model pembelajaran mesin diperoleh dengan menggunakan perpustakaan scikit-learning versi 15 dan disimpan dalam format acar, maka untuk pemulihan model yang benar, perpustakaan scikit-belajar versi lima belas akan diperlukan.  Anda tidak dapat memutakhirkan ke versi terbaru, dan ini adalah jebakan yang jauh lebih berbahaya daripada yang dijelaskan dalam ayat 1. <br><br>  Ada dua jalan keluar: <br><br><ul><li>  Gunakan format bebas kode untuk menyimpan model </li><li>  selalu dapat melatih kembali model apa pun.  Kemudian, ketika memperbarui perpustakaan, perlu untuk melatih semua model dan menyimpannya dengan versi perpustakaan yang baru. </li></ul><br>  Kami telah memilih jalur kedua. <br><br><h2>  Rake nomor 3: bekerja dengan model lama </h2><br>  Melakukan sesuatu yang baru dalam model lama dan terpelajar kurang berguna daripada melakukan sesuatu yang sederhana dalam model baru.  Seringkali pada akhirnya ternyata pengenalan model yang lebih sederhana, tetapi lebih segar lebih bermanfaat, dan jumlah usahanya kurang.  Penting untuk mengingat ini dan selalu memperhitungkan jumlah upaya bersama dalam mencari pola. <br><br><h2>  Menyapu nomor 4: hanya eksperimen lokal </h2><br>  Banyak ahli ilmu data suka bereksperimen secara lokal di server pembelajaran mesin mereka.  Hanya prod yang tidak memiliki fleksibilitas seperti itu: sebagai akibatnya, banyak alasan terungkap yang tidak memungkinkan untuk menyeret percobaan ini ke dalam produksi. <br><br>  Penting untuk mengkonfigurasi komunikasi antara spesialis DS dan insinyur penjualan untuk pemahaman bersama - bagaimana model ini atau itu akan bekerja dalam produksi, apakah ada kekuatan yang diperlukan dan kemampuan fisik untuk meluncurkannya.  Selain itu, semakin kompleks model dan faktornya, semakin sulit membuatnya andal dan dapat melatihnya lagi kapan saja.  Tidak seperti kompetisi Kaggle, dalam produksi seringkali lebih baik mengorbankan seperseribu pada metrik lokal dan bahkan KPI online kecil, tetapi untuk mengimplementasikan versi modelnya jauh lebih sederhana, stabil dalam hasil dan mudah dalam sumber daya komputasi. <br><br>  Kepemilikan bersama atas kode (pengembang dan ilmuwan data tahu bagaimana kode yang ditulis oleh pengembang lain bekerja), penggunaan kembali tanda-tanda dan meta-atribut dalam berbagai model baik dalam proses pembelajaran dan ketika bekerja di prod (kami dibantu oleh us framework), unit- dan autotests, yang sering kami kendarai, integrasi kode dengan pengujian ulang.  Kami menempatkan model akhir dalam repositori git dan menggunakannya dalam produksi juga. <br><br><h2>  Menyapu nomor 5: uji hanya prod </h2><br>  Setiap pengembang dan ilmuwan data kami memiliki bangku tes sendiri, terkadang tidak satu pun.  Komponen utama HH produksi dikerahkan di atasnya.  Itu mahal, tetapi membayar untuk kualitas dan kecepatan pengembangan.  Itu perlu, tetapi tidak cukup.  Kami memuat tidak hanya model yang sudah dalam produksi, tetapi juga yang akan segera hadir.  Ini membantu untuk memahami dalam waktu bahwa model yang bekerja sempurna pada mesin lokal, bangku tes atau dalam produksi untuk 5% pengguna, dan ketika dihidupkan 100%, terlalu berat. <br><br>  Kami menggunakan beberapa tahap pengujian.  Kami memeriksa kode dengan sangat cepat (ini adalah titik kunci) - ketika menambahkan atau mengubah komponen dalam repositori, kode dikumpulkan, unit dan autotest dijalankan pada komponen yang sesuai, jika perlu, kami juga menguji ulang secara manual - dan jika ada sesuatu yang salah, berikan jawaban "Putramu rusak, putuskan." <br><br><h2>  Rake nomor 6: perhitungan panjang dan kehilangan fokus </h2><br>  Jika seorang model membutuhkan, katakanlah, satu minggu untuk berlatih, mudah untuk kehilangan konsentrasi pada tugas karena beralih ke proyek lain.  Kami mencoba untuk tidak memberikan pengembang dan ilmuwan data lebih dari dua tugas di satu tangan.  Dan tidak lebih dari satu mendesak sehingga Anda dapat beralih ke sana segera setelah perhitungan atau percobaan A / B selesai untuk itu.  Aturan ini diperlukan agar tidak kehilangan fokus, dan karena kekhawatiran bahwa beberapa tugas ini umumnya berisiko hilang, dan bagian lain yang berjalan lebih lambat dari yang diperlukan. <br><br><h2>  Kami menginjak menyapu tetapi tidak menyerah </h2><br>  Kami baru-baru ini menyelesaikan percobaan memperkenalkan jaringan saraf ke dalam sistem pemberi rekomendasi.  Itu dimulai dengan fakta bahwa dalam dua hari hackathon internal menulis sebuah model untuk meramalkan tanggapan melalui resume, yang sangat memudahkan pencarian lowongan yang sesuai. <br><br>  Tetapi kemudian kami belajar: untuk membuatnya menjadi produksi, Anda perlu memperbarui hampir semua hal - misalnya, mentransfer sistem penggunaan ganda, yang mempertimbangkan tanda dan mengajarkan model, ke buruh pelabuhan, serta memperbarui perpustakaan pembelajaran mesin. <br><br><h3>  Bagaimana itu? </h3><br>  Kami menggunakan model DSSM dengan jaringan saraf single-layer.  Dalam artikel Microsoft asli, jaringan saraf tiga lapis digunakan, tetapi kami tidak mengamati peningkatan kualitas dengan peningkatan jumlah lapisan, jadi kami memilih satu lapisan. <br><br><img src="https://habrastorage.org/webt/ti/au/qj/tiauqjuapnwvgews3dvymzhqir8.jpeg"><br><br>  Singkatnya: <br><br><ol><li>  Teks kueri dan header lowongan dikonversikan menjadi dua vektor trigram simbol.  Kami menggunakan 20.000 trigram karakter. </li><li>  Vektor trigram diumpankan ke input jaringan saraf lapis tunggal.  Pada input lapisan jaringan saraf, ada 20.000 angka, pada output, 64. Pada dasarnya, jaringan saraf adalah 20.000 x 64 matriks di mana vektor trigram input dimensi 1 x 20 000 dikalikan. Vektor konstan dimensi 1 x 64 ditambahkan ke hasil penggandaan. Vektor oleh output dari jaringan saraf seperti itu sesuai dengan permintaan (atau judul lowongan). </li><li>  Produk skalar dari vektor dssm permintaan dan vektor dssm header lowongan dihitung.  Fungsi sigmoid diterapkan pada pekerjaan.  Hasil akhirnya adalah meta-tanda dssm. </li></ol><br>  Ketika kami mencoba memasukkan model ini untuk pertama kalinya, metrik lokal menjadi lebih baik, tetapi ketika kami mencoba memasukkannya ke dalam uji A / B, kami melihat bahwa tidak ada peningkatan. <br><br>  Setelah itu, kami mencoba meningkatkan lapisan kedua neuron menjadi 256 - diluncurkan oleh 5% pengguna: ternyata sistem rekomendasi dan pencarian menjadi lebih baik, tetapi ketika Anda menghidupkan model 100% tiba-tiba ternyata itu terlalu berat. <br><br>  Kami menganalisis mengapa model ini sangat berat, menghilangkan stemming, dan bereksperimen dengan jaringan saraf ini lagi.  Dan hanya setelah itu, setelah berjalan jauh lagi, mereka menemukan bahwa model itu berguna: jumlah respons dalam sistem rekomendasi meningkat sebesar 700 per hari, dan dalam pencarian, setelah semua penghitungan ulang, sebesar 4200. <br><br>  Pengenalan jaringan saraf yang tidak terlalu rumit memungkinkan pelanggan kami untuk mempekerjakan beberapa lusin karyawan tambahan setiap hari melalui hh.ru, dan selama implementasi kami mengalahkan bagian penting dari masalah besar.  Oleh karena itu, kami berencana untuk mengembangkan jaringan saraf kami lebih lanjut.  Rencananya adalah mencoba stemming umum, lemmatization tambahan, memproses teks lengkap dari lowongan dan melanjutkan, membuat percobaan dengan topologi (lapisan tersembunyi dan, mungkin, RNN / LSTM). <br><br>  Hal terpenting yang kami lakukan dengan model ini: <br><br><ul><li>  Jangan jatuhkan eksperimen di tengah. </li><li>  Kami menghitung indikator peningkatan respons dan menemukan bahwa pekerjaan pada model ini sepadan.  Sangat penting untuk memahami seberapa besar manfaat yang diberikan oleh setiap implementasi tersebut. </li></ul><br>  Menariknya, model yang kami lakukan dan akhirnya ditambahkan ke prod sangat mirip dengan metode komponen utama (PCA) yang diterapkan pada matriks [teks permintaan, judul dokumen, apakah ada klik].  Yaitu, ke matriks di mana baris terkait dengan kueri unik, kolom ke header lowongan unik;  nilai dalam sel adalah 1 jika setelah permintaan ini pengguna mengklik lowongan dengan tajuk ini, dan 0 jika tidak ada klik. <br><br>  Hasil penerapan model ini untuk permintaan scala, java, C #, "pengacara", "pengacara" ada dalam tabel di bawah ini.  Serupa dalam arti, pasangan pertanyaan disorot dalam gelap, tidak seperti - cahaya.  Dapat dilihat bahwa model memahami hubungan antara bahasa pemrograman yang berbeda, ada hubungan yang kuat antara permintaan "pengacara" dan "pengacara".  Tetapi antara "pengacara" dan bahasa pemrograman apa pun, koneksi sangat lemah. <br><img src="https://habrastorage.org/webt/wi/xl/bq/wixlbqi7eg_kdq5zirst9grmi7u.png"><br>  Pada titik tertentu, saya benar-benar ingin menyerah - percobaan sedang berlangsung, tetapi mereka tidak "memicu".  Pada titik ini, seorang ilmuwan data mungkin berguna untuk mendukung tim dan sekali lagi menghitung manfaatnya: mungkin bermanfaat untuk "mengubur pramugari" dan tidak mencoba untuk "menunggang kuda mati", ini bukan kegagalan, tetapi percobaan yang sukses dengan hasil negatif.  Atau, setelah mempertimbangkan pro dan kontra, Anda akan melakukan percobaan lain yang akan “menembak”.  Jadi itu terjadi pada kita. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id415437/">https://habr.com/ru/post/id415437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id415427/index.html">Seluruh kebenaran tentang RTOS dari Colin Walls. Artikel # 4. Tugas, pengalihan konteks, dan interupsi</a></li>
<li><a href="../id415429/index.html">Seluruh kebenaran tentang RTOS dari Colin Walls. Artikel # 5. Interaksi tugas dan sinkronisasi</a></li>
<li><a href="../id415431/index.html">Pengumuman Hackathon SmartMail Hack 2: Call of Data</a></li>
<li><a href="../id415433/index.html">Mengelola rilis pada perumahan GIS dan layanan komunal - kami berbagi pengalaman dan berjuang dengan intuisi</a></li>
<li><a href="../id415435/index.html">Pengembangan kartu antarmuka pada Soil Xilinx Zynq 7000 untuk perekaman suara dalam format analog dan digital</a></li>
<li><a href="../id415439/index.html">Apakah komunikasi korporat memaksa Anda untuk berhenti atau menyeret Anda ke dalam proyek seperti permainan?</a></li>
<li><a href="../id415441/index.html">Serangan Ransomware terhadap badan-badan pemerintah berkembang di AS</a></li>
<li><a href="../id415443/index.html">MDG dan ITMO University mengundang ke Machine Learning Summer School</a></li>
<li><a href="../id415445/index.html">Intisari acara untuk profesional SDM di bidang TI untuk Juli 2018</a></li>
<li><a href="../id415447/index.html">Rilis Token Utilitas adalah Jalan Buntu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>