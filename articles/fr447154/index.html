<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÖ ü§õüèº üë©üèø‚Äçü§ù‚Äçüë©üèæ Dette technique entra√Ænant une crise de l'entreprise üî† üë©‚Äçüëß‚Äçüë¶ üàÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'accumulation de dettes techniques peut conduire votre entreprise √† une crise. Mais il peut √©galement devenir un puissant moteur de changements massi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dette technique entra√Ænant une crise de l'entreprise</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/447154/">  L'accumulation de dettes techniques peut conduire votre entreprise √† une crise.  Mais il peut √©galement devenir un puissant moteur de changements massifs de processus et aider √† l'adoption des pratiques d'ing√©nierie.  Je vais vous en parler dans mon propre exemple. <br><br><img src="https://habrastorage.org/webt/vo/nt/1m/vont1m1pxmp9xt_l6ifnysa-og0.png"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'√©quipe informatique de Dodo Pizza est</a> pass√©e de 2 d√©veloppeurs desservant un pays √† 60 personnes desservant 12 pays en 7 ans.  En tant que Scrum Master et XP Coach, j'ai aid√© les √©quipes √† √©tablir des processus et √† adopter des pratiques d'ing√©nierie, mais cette adoption a √©t√© trop lente.  Il √©tait difficile pour moi de faire en sorte que les √©quipes conservent une qualit√© de code √©lev√©e lorsque plusieurs √©quipes travaillent sur un seul produit.  Nous sommes tomb√©s dans le pi√®ge de la pr√©f√©rence pour les caract√©ristiques commerciales par rapport √† l'excellence technique et avons accumul√© trop de dettes techniques architecturales.  Lorsque le marketing a lanc√© une campagne publicitaire massive en 2018, nous n'avons pas pu supporter la charge et sommes tomb√©s.  C'√©tait dommage.  Mais pendant la crise, nous avons r√©alis√© que nous √©tions capables de travailler plusieurs fois plus efficacement.  La crise nous a pouss√©s vers des changements r√©volutionnaires dans les processus et l'introduction rapide des pratiques d'ing√©nierie les plus connues. <br><br><h2>  Contexte </h2><br>  Vous pensez peut-√™tre que Dodo Pizza est un r√©seau de pizzeria r√©gulier.  Mais en fait, <b>Dodo Pizza est une entreprise informatique qui vend des pizzas</b> .  Notre entreprise est bas√©e sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dodo IS</a> - une plateforme bas√©e sur le cloud, qui g√®re tous les processus commerciaux, depuis la prise de commande, la cuisson et la finition jusqu'√† la gestion des stocks, la gestion des personnes et la prise de d√©cisions.  En seulement 7 ans, nous sommes pass√©s de 2 d√©veloppeurs desservant une seule pizzeria √† 70+ d√©veloppeurs desservant 470+ pizzerias dans 12 pays. <br><br>  Lorsque j'ai rejoint l'entreprise il y a deux ans, nous avions 6 √©quipes et une trentaine de d√©veloppeurs.  La base de code Dodo IS avait environ 1 million de lignes de code.  Il avait une architecture monolithique et tr√®s peu de couverture de tests unitaires.  Nous n'avions alors aucun test API / UI.  La qualit√© du code du syst√®me √©tait d√©cevante.  Nous le savions et r√™vions d'un avenir brillant en divisant le monolithe en une douzaine de services et en r√©√©crivant les parties les plus hideuses du syst√®me.  Nous avons m√™me dessin√© le diagramme ¬´√™tre l'architecture¬ª, mais honn√™tement, nous n'avons presque rien fait pour le futur √©tat.  <b>Mon objectif principal √©tait d'enseigner aux d√©veloppeurs les pratiques d'ing√©nierie et de construire un processus de d√©veloppement, faisant travailler 6 √©quipes sur un seul produit</b> . <br><br>  √Ä mesure que l'√©quipe grandissait, nous souffrions davantage d'un manque de processus et de pratiques d'ing√©nierie clairs.  Nos versions sont devenues plus grandes et plus longues car de plus en plus de d√©veloppeurs ont contribu√© au syst√®me, mais nous n'avions pas de tests de r√©gression automatis√©s et avons donc perdu plus de temps sur la r√©gression manuelle √† chaque version.  Nous avons souffert de nombreux changements effectu√©s par 6 √©quipes dans des succursales distinctes.  Lorsqu'une √©quipe fusionnait ses modifications dans une seule branche avant la publication, nous perdions parfois jusqu'√† 4 heures pour r√©soudre les conflits de fusion. <br><br><blockquote><h4>  La merde arrive </h4><br>  En 2018, Marketing a lanc√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notre premi√®re campagne de publicit√© f√©d√©rale √† la t√©l√©vision</a> .  Ce fut un √©v√©nement √©norme pour nous.  Nous avons d√©pens√© 100 millions de roubles (1,5 million de dollars) pour financer la campagne - un montant assez important pour nous.  L'√©quipe informatique s'est √©galement pr√©par√©e pour la campagne.  Nous avons automatis√© et simplifi√© notre d√©ploiement - maintenant avec un seul bouton dans TeamCity, nous pouvions d√©ployer le monolithe dans 12 pays.  Nous avons examin√© des tests de performances et effectu√© une analyse de vuln√©rabilit√©.  Nous avons fait de notre mieux mais nous avons rencontr√© des probl√®mes inattendus. <br><br>  La campagne publicitaire a √©t√© formidable.  Nous sommes pass√©s de 100 √† 300 commandes / minute.  C'√©tait une bonne nouvelle.  La mauvaise nouvelle √©tait que Dodo IS ne pouvait pas supporter une telle charge et est mort.  Nous avons atteint nos limites d'√©chelle verticale et ne pouvions plus traiter les commandes.  <b>Le syst√®me a red√©marr√© toutes les 3 heures.</b>  <b>Chaque minute d'arr√™t nous a co√ªt√© des millions d'argent ainsi que le manque de respect des clients furieux.</b> </blockquote><br>  Quand je suis arriv√© chez Dodo il y a 2 ans en tant que Chief Agile Officer, j'avais un grand d√©sir de faire de notre petite √©quipe d'alors - environ 12 personnes, une √©quipe de r√™ve.  J'ai imm√©diatement commenc√© √† introduire des pratiques d'ing√©nierie.  La plupart des √©quipes ont adopt√© la programmation par paires, les tests unitaires et DDD tr√®s bient√¥t.  Mais tout n'a pas √©t√© facile.  J'ai d√ª surmonter la r√©sistance des d√©veloppeurs, du Product Owner et de l'√©quipe de support. <br><br>  Contrairement aux pratiques d'ing√©nierie, tout le monde n'√©tait pas favorable √† l'id√©e d'√©quipes techniques.  Les d√©veloppeurs avaient l'habitude de penser qu'une √©quipe concentr√©e sur un composant r√©dige un meilleur code.  Il n'√©tait pas clair comment combiner le d√©veloppement rapide des fonctionnalit√©s de l'entreprise avec la refonte massive attendue depuis longtemps d'un syst√®me complexe.  Un flux continu de bogues exigeait √©galement une attention constante.  L'√©quipe de support a pr√©f√©r√© que sa propre √©quipe se concentre uniquement sur la correction des bogues.  De nombreuses √©quipes avaient l'habitude de travailler dans des branches distinctes et avaient peur de s'int√©grer fr√©quemment.  Nous ne sortions pas plus d'une fois par semaine, et chaque version prenait un temps assez long, n√©cessitant une √©norme quantit√© de prise en charge des tests de r√©gression manuelle et d'interface utilisateur.  J'ai essay√© de le r√©parer, mais mes changements de processus √©taient trop lents et fragment√©s. <br><br><h2>  L'histoire de l'automne et de la mont√©e </h2><br><h4>  √âtat initial: architecture monolithique </h4><br>  √Ä la recherche de la vitesse de d√©veloppement des fonctionnalit√©s commerciales, nous n'avons pas toujours bien r√©fl√©chi aux solutions techniques.  Un manque d'exp√©rience nous a √©galement touch√©s.  Au d√©but, l'entreprise ne pouvait pas se permettre d'embaucher les meilleurs d√©veloppeurs.  Nous avons travaill√© avec des passionn√©s qui ont accept√© d'aider √† la cr√©ation de Dodo IS, croyaient au fondateur de l'entreprise - Fedor et travaillaient presque pour la nourriture (pizza, bien s√ªr).  Les d√©veloppeurs qui ont rejoint l'√©quipe plus tard ont suivi l'architecture √©tablie, qui est devenue obsol√®te.  Nous avions donc une application monolithique avec une seule base de donn√©es, contenant toutes les donn√©es de tous les composants en un seul endroit.  Tracker, checkout, site, API pour les pages de destination - tous les composants du syst√®me fonctionnaient avec une seule base de donn√©es, qui devient un goulot d'√©tranglement.  Notre architecture monolithique a cr√©√© des probl√®mes monolithiques.  Un seul article de blog a entra√Æn√© une interruption de paiement au restaurant. <br><blockquote><h4>  Histoire vraie </h4><br>  Pour illustrer la fragilit√© de l'architecture monolithique, je ne donnerai qu'un exemple.  <b>Une fois que tous nos restaurants sur la Russie ont cess√© d'accepter les commandes √† cause d'un article de blog.</b>  <b>Comment cela peut-il arriver?</b> <br><br>  Un jour, notre PDG - Fedor a publi√© un article sur son blog.  Ce poste a rapidement gagn√© en popularit√©.  Il y a un compteur sur le site Web du blog de Fedor indiquant un certain nombre de pizzerias dans notre cha√Æne et le revenu total de toutes les pizzerias.  Chaque fois que quelqu'un lisait le blog de Fedor, le serveur Web envoyait une demande √† la base de donn√©es principale pour calculer les revenus.  Ces demandes ont surcharg√© la base de donn√©es et il a cess√© de servir les demandes de la caisse du restaurant.  Un article de blog populaire a donc perturb√© le travail de toute la cha√Æne de restaurants.  Nous avons rapidement r√©solu le probl√®me, mais c'√©tait un signe clair (parmi bien d'autres) que notre architecture n'√©tait pas en mesure de r√©pondre aux besoins de l'entreprise et devait √™tre repens√©e.  Mais nous avons ignor√© ces signes.  Nous avons mis en ≈ìuvre des solutions rapides et faciles (comme l'ajout d'une r√©plique en lecture seule de la base de donn√©es principale), mais nous n'avions aucune feuille de route de refonte technique. </blockquote><br>  L'architecture monolithique est bonne pour commencer car elle est simple.  Mais il ne peut pas supporter la charge √©lev√©e √©tant un point de d√©faillance unique. <br><br><h4>  √âchec pr√©coce en 2017 </h4><br>  <b>Le 14 f√©vrier est la Saint-Valentin</b> .  Tout le monde aime ces vacances.  Pour que les amoureux se f√©licitent, le 14 f√©vrier, nous faisons une pizza sp√©ciale - pepperoni en forme de c≈ìur.  Je me souviendrai du 14 f√©vrier 2017 pour toujours, car ce jour-l√†, lorsque toutes les pizzerias fonctionnaient √† pleine charge, Dodo IS a commenc√© √† tomber.  Dans chaque pizzeria, nous avons 4 √† 5 comprim√©s pour suivre la commande d'une pizzeria qui pr√©pare la p√¢te, met les ingr√©dients, cuit ou envoie √† la livraison.  Le nombre de pizzerias a atteint 300+, chaque tablette a mis √† jour son √©tat plusieurs fois par minute.  Toutes ces demandes ont cr√©√© une charge si massive sur la base de donn√©es que le serveur SQL a cess√© de r√©sister et que la base de donn√©es a commenc√© √† √©chouer.  Dodo EST pos√© au moment le plus inappropri√© - pendant le pic des ventes.  La saison des f√™tes √©tait charg√©e: le 23 f√©vrier (Journ√©e de l'arm√©e et de la marine), le 8 mars (Journ√©e internationale de la femme), le 1er mai (Journ√©e de la solidarit√© internationale des travailleurs) et le 9 mai (Jour de la victoire dans la Seconde Guerre mondiale).  Pendant ces vacances, nous nous attendions √† une croissance des commandes encore plus importante. <br><br>  <b>Le jour o√π tu mourras</b> .  Connaissant nos plans de croissance et la limite de la charge que nous pouvons supporter, nous avons compris combien de temps nous pouvons rester en vie, c'est-√†-dire lorsque la charge de pointe d'aujourd'hui devient r√©guli√®re.  La date estim√©e d'Armageddon attendue dans environ six mois - en ao√ªt ou septembre.  Comment vous sentez-vous de vivre, en connaissant la date de votre d√©c√®s? <br><br>  <b>Arr√™tez le d√©veloppement des fonctionnalit√©s pendant un an</b> .  Avec le PDG Fedor, nous avons d√ª prendre une d√©cision difficile.  Peut-√™tre l'une des d√©cisions les plus difficiles de l'histoire de l'entreprise.  Nous avons arr√™t√© le d√©veloppement de fonctionnalit√©s commerciales.  Nous pensions que nous allions arr√™ter pendant 3 mois, mais nous nous sommes vite rendu compte que le volume de la dette technique √©tait si important que 3 mois ne suffiraient pas et nous devons continuer √† travailler sur les questions techniques et reporter l'arri√©r√© d'affaires.  En fait, avec 6 √©quipes, nous n'avons cr√©√© qu'une seule fonctionnalit√© commerciale au cours de la prochaine ann√©e.  Le reste du temps, les √©quipes se sont engag√©es dans le remboursement de la dette technique.  Cette dette nous a co√ªt√© beaucoup - plus de 1,5 million de dollars. <br><br><h4>  Quelques am√©liorations apr√®s un an </h4><br>  Au cours de l'ann√©e, nous avons r√©alis√© ces r√©alisations notables: <br><ul><li>  Nous avons automatis√© et acc√©l√©r√© notre pipeline de d√©ploiement.  Auparavant, le d√©ploiement √©tait semi-manuel.  Nous avons √©t√© d√©ploy√©s dans 10 pays en environ 2 heures. </li><li>  A commenc√© √† diviser un monolithe.  La partie la plus charg√©e du syst√®me - le tracker - a √©t√© divis√©e en un service distinct, avec sa propre base de donn√©es.  Maintenant, le tracker communique avec le reste du syst√®me via une file d'attente d'√©v√©nements. </li><li>  Nous avons commenc√© √† s√©parer le caissier de livraison - le deuxi√®me composant qui cr√©e une charge √©lev√©e. </li><li>  R√©√©criture du syst√®me d'authentification des utilisateurs et des appareils. </li></ul><br>  Notre architecte a g√©r√© l'arri√©r√© technique.  Nous avons utilis√© les modifications architecturales pour g√©n√©rer l'arri√©r√©.  Chaque √©quipe avait la libert√© de faire ce qui √©tait juste pour cr√©er une architecture utile.  Pour l'ann√©e avec les 6√®mes √©quipes, nous n'avons fait pour les affaires qu'une seule caract√©ristique pr√©cieuse.  Le reste du temps, les √©quipes ont travaill√© sur la dette technique.  Il semblerait que nous pouvons √™tre fiers de nous.  Mais devant nous, il y avait une √©norme d√©ception. <br><br>  √âchec lors de la campagne de marketing f√©d√©rale.  La deuxi√®me crise de confiance. <br><br>  La dette technique est facile √† accumuler, mais tr√®s difficile √† rembourser.  Il est peu probable que vous puissiez comprendre √† l'avance combien cela vous co√ªtera. <br><br>  Malgr√© le fait que nous ayons pass√© une ann√©e enti√®re √† lutter contre la dette technique, nous n'√©tions pas pr√™ts pour une campagne de marketing massive et nous avons foir√© devant notre entreprise.  Vous gagnez la confiance dans les gouttes, vous la perdez dans des seaux.  Et nous avons d√ª le gagner √† nouveau. <br><br>  Nous avons manqu√© le moment o√π il fallait ralentir le d√©veloppement des fonctionnalit√©s de l'entreprise et s'attaquer √† la dette technique.  Il √©tait trop tard quand nous l'avons remarqu√©.  Nous nous couchons √† nouveau sous charge.  Le syst√®me s'est √©cras√© et red√©marr√© toutes les 3 heures.  Notre entreprise a perdu des dizaines de millions de roubles. <br><br><img src="https://habrastorage.org/webt/dc/e4/r5/dce4r5zrxw4mk9xhri2qvbora0c.jpeg"><br><br>  Mais gr√¢ce √† la crise, nous avons vu que dans des conditions extr√™mes, nous pouvons travailler plusieurs fois plus efficacement.  Nous sortions 20 fois par jour.  Tout le monde a travaill√© comme une seule √©quipe, en se concentrant sur un seul objectif.  Pendant deux semaines de crise, nous avons fait ce que nous avions peur de commencer auparavant car nous pensions que cela prendrait des mois de travail.  Ordre asynchrone, tests de performances, journaux effac√©s ne sont qu'une petite partie de ce que nous avons fait.  Nous √©tions impatients de continuer √† travailler aussi efficacement, mais sans heures suppl√©mentaires et sans stress. <br><br><h2>  Le√ßons apprises </h2><br>  Apr√®s la r√©trospective, nous avons compl√®tement restructur√© nos processus.  Nous avons pris le cadre LeSS et l'avons compl√©t√© par des pratiques d'ing√©nierie.  Au cours des prochains mois, nous avons fait une perc√©e dans l'adoption des pratiques d'ing√©nierie.  Sur la base du framework LeSS, nous avons impl√©ment√© et continuons √† utiliser: <br><ul><li>  carnet de commandes unique; </li><li>  √©quipes de fonctionnalit√©s enti√®rement interfonctionnelles et multi-composants; </li><li>  programmation par paires; </li><li>  Essayer la programmation Mob. </li><li>  V√©ritable int√©gration continue, ce qui signifie plusieurs int√©grations de code de 9 √©quipes dans une seule branche; </li><li>  gestion de configuration simplifi√©e avec d√©veloppement bas√© sur les troncs; </li><li>  versions fr√©quentes: d√©ploiement continu pour les microservices, plusieurs versions par jour pour le monolith; </li><li>  pas d'√©quipe QA distincte, les experts QA font partie des √©quipes de d√©veloppement. </li></ul><br><h4>  6 pratiques que nous avons choisies apr√®s la crise </h4><br>  <b>1. Le pouvoir de la concentration</b> .  Avant la crise, chaque √©quipe travaillait sur son propre carnet de commandes et se sp√©cialisait dans son domaine.  Dans l'arri√©r√©, il y avait des t√¢ches finement d√©compos√©es, l'√©quipe a s√©lectionn√© plusieurs t√¢ches pour un sprint.  Mais pendant la crise, nous avons travaill√© tr√®s diff√©remment.  Les √©quipes n'avaient pas de t√¢ches sp√©cifiques, elles avaient plut√¥t un gros objectif difficile.  Par exemple, une application mobile et une API doivent traiter 300 commandes par minute, quoi qu'il arrive.  C'est √† l'√©quipe de savoir comment atteindre l'objectif.  Les √©quipes formulent elles-m√™mes des hypoth√®ses, les v√©rifient rapidement en production et les jettent.  Et c'est exactement ce que nous voulions continuer √† faire.  Les √©quipes ne veulent pas √™tre des codeurs stupides, elles veulent r√©soudre des probl√®mes. <br><br>  Le pouvoir de concentration s'est manifest√© dans la r√©solution de probl√®mes complexes.  Par exemple, pendant la crise, nous avons cr√©√© un ensemble de tests de performance malgr√© que nous n'avions aucune expertise.  Nous avons √©galement rendu la logique de r√©ception d'une commande asynchrone.  Nous y avons longuement r√©fl√©chi et discut√©, et il nous a sembl√© que cette t√¢che est tr√®s difficile et longue.  Mais il s'est av√©r√© que l'√©quipe est tout √† fait capable de le faire en 2 semaines, si elle n'est pas distraite et compl√®tement concentr√©e sur le probl√®me. <br><br>  <b>2. Hackathons r√©guliers</b> .  Nous aimions travailler dans le mode quand toutes les √©quipes visent un seul but et nous avons d√©cid√© d'organiser parfois de tels ¬´hackathons¬ª.  On ne peut pas dire que nous les r√©alisons r√©guli√®rement, mais il y en a eu plusieurs fois.  Par exemple, il y a eu un hackathon de 500 erreurs lorsque toutes les √©quipes ont nettoy√© les journaux et supprim√© les causes de 500 erreurs sur le site et dans l'API.  L'objectif √©tait de garder les journaux propres.  Lorsque les journaux sont propres, les nouvelles erreurs sont clairement visibles, vous pouvez facilement configurer les valeurs de seuil pour les alertes.  C'est similaire aux tests unitaires - ils ne peuvent pas √™tre un peu rouges. <br><br>  Les bogues sont un autre exemple de hackathon.  Nous avions un √©norme backlog de bugs, certains des bugs √©taient dans le backlog depuis des ann√©es.  Il semblait qu'ils ne finiraient jamais.  Et chaque jour, il y en avait de nouveaux.  Vous devez en quelque sorte combiner le travail sur les bogues et les √©l√©ments de backlog r√©guliers. <br><br><div class="spoiler">  <b class="spoiler_title">Nous avons introduit la politique #zerobugspolicy en 4 √©tapes.</b> <div class="spoiler_text"><ol><li>  Nettoyage initial des bogues en fonction de la date.  Si le bogue est dans le backlog depuis plus de 3 mois, supprimez-le simplement.  Tr√®s probablement, il √©tait l√† depuis des si√®cles. </li><li>  Maintenant, triez les d√©fauts restants en fonction de leur incidence sur les clients.  Nous avons soigneusement tri√© les bogues restants.  Nous n'avons gard√© que les d√©fauts qui rendent la vie difficile √† un grand groupe d'utilisateurs.  Si c'est juste quelque chose qui cause des inconv√©nients, mais vous pouvez y faire face - supprimez impitoyablement.  Nous avons donc r√©duit le nombre de bogues √† 25, ce qui est acceptable. </li><li>  Hackathon.  Toutes les √©quipes pullulent et corrigent tous les bugs.  Nous l'avons fait en quelques sprints.  Chaque sprint, chaque √©quipe a pris plusieurs bugs et l'a corrig√©.  Apr√®s 2-3 sprints, nous avions un carnet de commandes clair.  Vous pouvez maintenant entrer #zerobugspolicy. </li><li>  #zerobugspolicy.  Chaque nouveau bug n'a d√©sormais que deux fa√ßons.  Ether √ßa tombe dans l'arri√©r√©, ou pas.  S'il p√©n√®tre dans l'arri√©r√©, nous le corrigeons en premier.  Tout bogue dans le backlog a une priorit√© plus √©lev√©e que tout autre √©l√©ment de backlog.  Mais pour entrer dans le backlog, le bug doit √™tre s√©rieux.  Soit elle cause un pr√©judice irr√©parable, soit elle affecte un grand nombre d'utilisateurs. </li></ol><br></div></div><br>  <b>3. √âquipes de projet temporaires pour √©quipes fonctionnelles stables</b> .  Il y avait une histoire dr√¥le avec les √©quipes de projet.  Pendant la crise, nous avons form√© des √©quipes de tigres compos√©es des personnes les plus comp√©tentes pour cette t√¢che.  Apr√®s la fin de la crise, les √©quipes ont d√©cid√© de poursuivre cette pratique et de dissoudre les √©quipes.  Malgr√© le fait que je n'aimais pas du tout cette id√©e, je les ai laiss√©s essayer.  En seulement 2 semaines (un sprint), lors de la prochaine r√©trospective, les √©quipes ont abandonn√© cette pratique (cette d√©cision m'a fait tr√®s plaisir).  Ils ont essay√© et compris pourquoi il est beaucoup plus confortable de travailler dans une √©quipe technique stable.  M√™me si l'√©quipe manque de comp√©tences, elle peut progressivement apprendre.  Mais l'esprit d'√©quipe, le soutien et l'entraide se forment depuis longtemps, cela prend des mois.  Les √©quipes de projet √† court terme sont constamment en phase de formation et d'assaut.  Vous pouvez le supporter pendant quelques semaines, mais vous ne pouvez pas travailler comme √ßa tout le temps.  Il est bon que les √©quipes aient essay√© et compris les avantages des √©quipes de fonctionnalit√©s stables. <br><br>  <b>4. D√©barrassez-vous de la r√©gression manuelle</b> .  Avant la crise, nous sortions une fois par semaine et pendant la crise - des dizaines de fois par jour.  Nous avons ador√© notre capacit√© √† sortir souvent.  Nous avons appr√©ci√© √† quel point il √©tait pratique de faire un petit changement, de le d√©ployer rapidement et d'obtenir imm√©diatement des commentaires de la production.  Par cons√©quent, nous avons chang√© notre approche des versions, ce qui a affect√© l'approche de programmation et de conception.  Maintenant, nous sortons en continu, tous les 1-2 jours.  Tout dans la branche dev est mis en production.  M√™me si certaines fonctionnalit√©s ne sont pas pr√™tes, ce n'est pas une raison pour ne pas publier le code.  Si nous ne voulons pas montrer aux utilisateurs une fonctionnalit√© qui n'est pas encore pr√™te, nous la cachons avec des bascules de fonctionnalit√©.  Cette approche nous a permis de nous d√©velopper par petites √©tapes. <br><br>  Nous nous sommes fix√© pour objectif de nous d√©barrasser des r√©gressions manuelles.  Il nous a fallu un an et demi pour l'atteindre.  Mais avoir un objectif ambitieux √† long terme vous fait penser aux √©tapes menant √† l'objectif. <br><br><div class="spoiler">  <b class="spoiler_title">Nous l'avons fait en 3 √©tapes.</b> <div class="spoiler_text"><ol><li>  Automatisez le chemin critique.  En juin 2017, nous avons form√© l'√©quipe QA.  La t√¢che de l'√©quipe √©tait d'automatiser la r√©gression de la fonction la plus critique de Dodo IS - la prise de commandes et la production.  Pour les 6 prochains mois, une nouvelle √©quipe AQ ‚Äã‚Äãde 4 personnes a couvert l'ensemble du chemin critique.  Les d√©veloppeurs des √©quipes de fonctionnalit√©s les ont activement aid√©s.  Ensemble, nous avons √©crit un langage DSL (Domain-Specific Language) beau et compr√©hensible, qui √©tait lisible m√™me par les clients.  Parall√®lement aux tests de bout en bout, les d√©veloppeurs ont couvert le code avec des tests unitaires.  Certains nouveaux composants ont √©t√© repens√©s avec TDD.  Apr√®s cela, nous avons dissous l'√©quipe QA.  Les anciens membres de l'√©quipe QA ont rejoint les √©quipes techniques pour partager leur expertise sur la prise en charge et la maintenance des autotests. </li><li>  Mode ombre.  Ayant des autotests, pendant 5 versions nous avons fait des r√©gressions manuelles en mode shadow.  Les √©quipes ne se sont appuy√©es que sur une suite de tests automatis√©s, mais lorsque l'√©quipe a d√©cid√© ¬´Nous sommes pr√™ts √† publier¬ª, nous ex√©cutons une r√©gression manuelle pour v√©rifier si nos autotests manquent des bogues.  Nous avons suivi le nombre de bogues d√©tect√©s manuellement et non d√©tect√©s par les autotests.  Apr√®s 5 versions, nous avons examin√© les donn√©es et d√©cid√© que nous pouvions faire confiance √† nos autotests.  Aucun bogue majeur n'a √©t√© manqu√©. </li><li>  Supprimez les r√©gressions manuelles.  Lorsque nous avons eu suffisamment de tests pour que nous commencions √† leur faire confiance, nous avons compl√®tement abandonn√© les tests manuels.  Plus nous effectuons nos tests, plus nous leur faisons confiance.  Mais cela n'est arriv√© que 1,5 an apr√®s que nous ayons commenc√© √† automatiser les tests de r√©gression. </li></ol><br></div></div><br>  <b>5. Le test de performance fait partie du test de r√©gression</b> .  Pendant la crise, nous avons cr√©√© un ensemble de tests de performance.  C'√©tait un domaine compl√®tement nouveau pour nous.  N√©anmoins, en seulement 2 semaines, nous avons r√©ussi √† cr√©er des tests de performances √† l'aide des outils Visual Studio.  Ces tests nous ont non seulement permis de d√©tecter la d√©gradation des performances.  Nous les avons utilis√©s pour ajouter une charge synth√©tique au serveur de production afin d'identifier les limites de performances.  Par exemple, si la charge de production organique est de 100 commandes / min et que nous ajoutons 50 commandes / min suppl√©mentaires √† l'aide de nos tests de performances, nous pouvons voir si les serveurs de production peuvent g√©rer la charge accrue.  D√®s que nous remarquons des exceptions ou une latence accrue, nous arr√™tons le test.  En faisant ces exp√©riences, nous avons d√©termin√© la charge maximale que nos serveurs de production peuvent g√©rer et quel sera le point d'acc√®s. <br><br>  L'ann√©e prochaine, nous avons d√©pass√© les tests de performance √† une √©quipe exp√©riment√©e de PerformanceLab.  Ils se sont r√©unis avec nos d√©veloppeurs et les gens de l'infrastructure et nous ont aid√©s √† cr√©er un ensemble robuste de tests de performances.  Maintenant, nous ex√©cutons ces tests chaque semaine et fournissons un retour rapide aux √©quipes de d√©veloppement si les performances sont affect√©es. <br><br>  Certaines des pratiques d'ing√©nierie ont √©t√© affin√©es de mani√®re it√©rative.  Par exemple, des versions fr√©quentes.  Nous avons commenc√© avec des cycles de publication hebdomadaires, soutenus par des tests manuels lents et fragiles.  Nous avons d√©velopp√© des fonctionnalit√©s pendant une semaine et test√© pendant une autre semaine.  Mais il √©tait difficile de maintenir les modifications apport√©es par plusieurs pendant une semaine.  Ensuite, nous avons essay√© des versions d'√©quipe isol√©es, lorsque seules les modifications apport√©es par une seule √©quipe ont √©t√© publi√©es.  Mais ce processus a √©chou√© car chaque √©quipe a d√ª attendre plusieurs semaines dans la file d'attente.  Ensuite, les √©quipes ont appris les avantages d'une int√©gration fr√©quente et nous avons commenc√© √† pratiquer des versions jointes de plusieurs changements d'√©quipe.  Les d√©veloppeurs ont commenc√© √† exp√©rimenter avec la fonctionnalit√© bascule et √† pousser vers la production de fonctionnalit√©s inachev√©es.  Finalement, nous sommes arriv√©s √† l'int√©gration continue et √† plusieurs versions par jour pour le monolithique et le d√©ploiement continu pour les microservices. <br><br><img src="https://habrastorage.org/webt/ce/yd/ay/ceyday2plzigxpfvhdmldzhpav4.jpeg"><br><br>  Un autre cas int√©ressant est celui de notre d√©partement AQ.  Auparavant, nous n'avions pas d'√©quipe QA, mais plut√¥t des testeurs manuels.  R√©alisant le besoin d'automatisation des tests, nous avons form√© une √©quipe d'assurance qualit√©, mais d√®s le premier jour, cette √©quipe savait qu'elle serait dissoute un jour.  Apr√®s 6 mois, l'√©quipe a automatis√© nos principaux sc√©narios commerciaux et, avec l'aide des d√©veloppeurs, a r√©dig√© un langage DSL (Domain Specific Language) pratique pour l'√©criture des tests.  L'√©quipe a √©clat√© et des ing√©nieurs de qualit√© ont rejoint les √©quipes techniques.  D√©sormais, les √©quipes elles-m√™mes d√©veloppent et maintiennent des autotests. <br><br>  Aujourd'hui, nous avons un seul carnet de commandes sur lequel 9 √©quipes techniques travaillent.  Les √©quipes techniques sont des √©quipes stables, interfonctionnelles et multi-composants.  La plupart de nos √©quipes sont des √©quipes sp√©ciales. <br><br>  <b>6. Focus sur les pratiques d'ing√©nierie</b> .  Toutes nos √©quipes utilisent la programmation par paires.  Je consid√®re la programmation en bin√¥me comme l'une des pratiques les plus simples mais les plus puissantes qui aident √† mettre en ≈ìuvre d'autres pratiques d'ing√©nierie.  Si vous ne savez pas quelle pratique d'ing√©nierie commencer, je recommande la programmation par paires. <br><br><h2>  R√©sultats </h2><br>  Le principal r√©sultat que la crise nous a donn√© est un bouleversement.  Nous nous sommes r√©veill√©s et avons commenc√© √† agir.  La crise nous a aid√©s √† voir le maximum de nos opportunit√©s.  Nous avons vu que nous pouvons travailler plusieurs fois plus efficacement et atteindre rapidement nos objectifs.  Mais cela n√©cessite de changer la fa√ßon de travailler habituelle.  Nous avons cess√© d'avoir peur de faire des exp√©riences audacieuses.  √Ä la suite de ces exp√©riences, au cours de l'ann√©e √©coul√©e, nous avons consid√©rablement am√©lior√© la qualit√© et la stabilit√© de Dodo IS.  Si pendant les vacances de printemps 2018 nos pizzerias ne pouvaient pas fonctionner √† cause de Dodo IS, alors en 2019, avec une croissance de 300 √† 450 pizzerias, Dodo IS fonctionnait parfaitement.  Nous avons tranquillement connu le pic des ventes du nouvel an, lors de la deuxi√®me campagne marketing et des vacances de printemps.  Pour la premi√®re fois depuis longtemps, nous sommes confiants dans la qualit√© du syst√®me et dormons bien la nuit.  Ceci est le r√©sultat de l'utilisation constante des pratiques d'ing√©nierie et de l'accent mis sur l'excellence technique. <br><br><h4>  R√©sultats pour les entreprises </h4><br>  Les pratiques d'ing√©nierie ne sont pas n√©cessaires en elles-m√™mes si elles ne profitent pas √† votre entreprise.  Gr√¢ce √† l'accent mis sur l'excellence technique, nous am√©liorons la qualit√© du code et d√©veloppons des fonctionnalit√©s commerciales √† une vitesse pr√©visible.  Les sorties sont devenues un √©v√©nement r√©gulier pour nous.  Nous publions le monolithe tous les 2 jours et des services plus petits toutes les quelques minutes.  Cela signifie que nous pouvons rapidement offrir une valeur commerciale √† nos utilisateurs et recueillir des commentaires plus rapidement.  Gr√¢ce √† la flexibilit√© des √©quipes de fonctionnalit√©s, nous obtenons une vitesse de d√©veloppement √©lev√©e. <br><br><blockquote>  Aujourd'hui, nous avons 480 pizzerias en ligne, dont 400 en Russie.  Pendant les vacances de mai de cette ann√©e, il y a eu des probl√®mes avec le traitement des commandes dans nos pizzerias.  Mais cette fois, le goulot d'√©tranglement √©tait le service client dans les pizzerias.  Dodo IS fonctionnait comme sur des roulettes, malgr√© le nombre croissant de pizzerias et de commandes. </blockquote><br><h4>  R√©sultats pour les √©quipes </h4><br>  Aujourd'hui, nous utilisons un large √©ventail de pratiques d'ing√©nierie: <br><ol><li>  √âquipes de fonctionnalit√©s enti√®rement interfonctionnelles et multi-composants. </li><li>  Programmation par paire / programmation Mob. </li><li>  V√©ritable int√©gration continue, ce qui signifie plusieurs int√©grations de code de 9 √©quipes dans une seule branche. </li><li>  Gestion de configuration simplifi√©e avec d√©veloppement bas√© sur tronc. </li><li>  Objectif commun √† plusieurs √©quipes. </li><li>  Expert en la mati√®re est dans l'√©quipe. </li><li>  Pas d'√©quipe QA distincte, les experts QA font partie des √©quipes de d√©veloppement. </li><li>  Remplacement manuel √©ventuel de r√©gression avec autotests. </li><li>  Politique z√©ro bogue. </li><li>  Carnet technique de la dette. </li><li>  Arr√™tez la ligne en tant que pilote pour l'acc√©l√©ration du pipeline de d√©ploiement. </li></ol><br>  Ils aident 9 √©quipes √† travailler sur un code commun et un produit unique qui comprend des dizaines de composants - un site mobile et de bureau, une application mobile sur iOS et Android, et un back office g√©ant avec caisse enregistreuse, suivi, affichage du restaurant, compte personnel , analyse et pr√©visions. <br><br><h4>  Quoi de mieux </h4><br>  Il peut sembler que nous avons d√©j√† bien progress√© dans les pratiques d'ing√©nierie, mais nous n'en sommes qu'au d√©but, nous avons encore de la place pour grandir.  Par exemple, nous essayons, mais jusqu'√† pr√©sent de mani√®re non syst√©matique, la programmation mob.  Nous √©tudions l'approche d'√©criture de test BDD.  Nous avons encore de la place pour grandir en CI, nous comprenons que l'int√©gration m√™me une fois par jour ne suffit pas souvent.  Et lorsque nous grossirons jusqu'√† 30 √©quipes, il faudra s'int√©grer plus souvent.  Nous sommes toujours en cours de transition de TDD √† ATDD.  Nous devons cr√©er un processus d√©cisionnel architectural durable et √©volutif. <br>  La chose la plus importante est que nous nous sommes dirig√©s vers le renforcement de l'excellence technique. <br><br>  √âtant donn√© que les 9 √©quipes travaillent sur un carnet de commandes commun et sur un produit, les √©quipes ont une forte volont√© de coop√©rer les unes avec les autres.  Ils ont appris √† prendre des d√©cisions fortes eux-m√™mes. <br><br><div class="spoiler">  <b class="spoiler_title">Par exemple, les pratiques suivantes ont √©t√© propos√©es et mises en ≈ìuvre par les √©quipes elles-m√™mes.</b> <div class="spoiler_text"><ol><li>  Arr√™tez la ligne en tant que pilote pour l'acc√©l√©ration du pipeline de d√©ploiement (voir mon rapport d'exp√©rience ¬´Arr√™tez la ligne pour rationaliser votre pipeline de d√©ploiement¬ª). </li><li>  Remplacez les tests d'interface utilisateur par des tests d'API. </li><li>  D√©ploiement automatis√© en un seul clic. </li><li>  H√¥te de Kubernetes. </li><li>  L'√©quipe de d√©veloppement se d√©ploie en production. </li></ol><br></div></div><br><br>  Certaines √©quipes ont manifest√© le d√©sir d'utiliser les 12 pratiques XP et m'ont demand√© de l'aide en tant que XP Coach et Scrum Master. <br><br><h2>  Ce que nous avons appris </h2><br>  Je souhaite que je ne laisse pas la crise se produire.  En tant que d√©veloppeur, je me sentais personnellement responsable d'avoir accumul√© une dette technique trop importante et de ne pas avoir lev√© le drapeau rouge plus t√¥t: <br><ul><li>  Les pratiques d'ing√©nierie prot√®gent les entreprises de la crise. </li><li>  N'accumulez pas de dettes techniques.  Il peut √™tre trop tard et co√ªter trop cher. </li><li>  Les changements √©volutifs prennent plusieurs fois plus de temps que les changements r√©volutionnaires. </li><li>  La crise n'est pas toujours une mauvaise chose.  Utilisez la crise pour r√©volutionner les processus. </li><li>  Cependant, une longue pr√©paration √©volutive est n√©cessaire √† l'avance. </li><li>  N'appliquez pas aveugl√©ment toutes les pratiques que vous aimez.  Certaines pratiques attendent dans les coulisses, et quand il viendra, les √©quipes les utiliseront sans r√©sistance.  Attendez le bon moment. </li><li>  Affinez et adaptez les pratiques √† votre contexte. </li><li>  Au fil du temps, les √©quipes elles-m√™mes commencent √† prendre des d√©cisions solides et √† les mettre en ≈ìuvre.  Donnez-leur un environnement s√ªr pour essayer, √©chouer et apprendre les erreurs. </li></ul><br><br>  La dette technique nous conduit √† la crise.  Mais de la crise, les d√©veloppeurs et les hommes d'affaires ont appris √† quel point l'accent sur l'excellence technique et les pratiques d'ing√©nierie est important.  Nous avons utilis√© la crise comme d√©clencheur d'un changement organisationnel et de processus massif. <br><hr><br><h4>  <i>Remerciements</i> </h4> <i><br></i>  <i>Je voudrais dire un grand merci √† toutes les personnes qui m'ont aid√© dans mon cheminement de la crise √† la transformation LeSS.</i>  <i>Je ressens constamment votre soutien.</i> <i><br><br></i>  <i>Un grand merci √† notre PDG, Fedor Ovchinnikov pour sa confiance.</i>  <i>Vous √™tes le v√©ritable leader de l'entreprise avec une v√©ritable culture agile.</i> <i><br><br></i>  <i>Un grand merci √† Dmitry Pavlov, notre Product Owner, mon vieil ami et co-formateur.</i> <i><br><br></i>  <i>Merci Alex Andronov et Andrey Morevsky de m'avoir soutenu dans mon r√¥le.</i> <i><br><br></i>  <i>Un grand merci √† Dasha Bayanova, notre premier Scrum Master √† plein temps, qui m'a cru et m'aide et me soutient toujours dans toutes nos initiatives.</i>  <i>Votre aide est difficile √† surestimer.</i> <i><br><br></i>  <i>Un grand merci sp√©cial √† Johanna Rothman qui m'a aid√© √† r√©diger ce rapport dans n'importe quelle condition: √™tre en vacances, r√©cup√©rer apr√®s une maladie.</i>  <i>Johanna, ce fut un grand plaisir de travailler avec vous.</i>  <i>Votre aide, vos conseils, votre attention aux d√©tails et votre diligence sont tr√®s appr√©ci√©s.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447154/">https://habr.com/ru/post/fr447154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447144/index.html">Comment j'ai organis√© le stockage de photos</a></li>
<li><a href="../fr447146/index.html">Commutateurs industriels non g√©r√©s EKI</a></li>
<li><a href="../fr447148/index.html">L'application Habr (non) officielle - HabrApp 2.0: acc√®s</a></li>
<li><a href="../fr447150/index.html">Chat sur le site et dans l'√©mission de Yandex</a></li>
<li><a href="../fr447152/index.html">Bo√Æte √† outils multiplateforme .NET UI version AvaloniaUI 0.8</a></li>
<li><a href="../fr447156/index.html">Wireshark 3.x: analyse de code sous macOS et revue des erreurs</a></li>
<li><a href="../fr447158/index.html">Wireshark 3.x: analyse de code macOS et r√©vision de bogues</a></li>
<li><a href="../fr447160/index.html">Espace pour les enfants. Quelques id√©es pour la Journ√©e de la cosmonautique</a></li>
<li><a href="../fr447162/index.html">N'achetez pas ERP</a></li>
<li><a href="../fr447164/index.html">Comment combiner les avantages d'un ordinateur portable et d'un ordinateur de bureau? Analyse des probl√®mes et des solutions (partie 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>