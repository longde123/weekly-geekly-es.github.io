<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ≤Ô∏è üì† üóØÔ∏è Synet - ein Framework zum Starten vorab trainierter neuronaler Netze auf der CPU ü§∞üèΩ üó£Ô∏è üé∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung 
 Hallo, liebe Chabrowiten! 

 Die letzten zwei Jahre meiner Arbeit bei Synesis waren eng mit dem Prozess der Erstellung und Entwicklung vo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Synet - ein Framework zum Starten vorab trainierter neuronaler Netze auf der CPU</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471074/"><img src="https://habrastorage.org/webt/gh/jk/rs/ghjkrs4akso0bxg4ijmhxcizzjq.jpeg" alt="mein Fahrrad"><br><br><h2>  Einf√ºhrung </h2><br>  Hallo, liebe Chabrowiten! <br><br>  Die letzten zwei Jahre meiner Arbeit bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Synesis</a> waren eng mit dem Prozess der Erstellung und Entwicklung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Synet verbunden</a> - einer offenen Bibliothek zum Ausf√ºhren von vorab trainierten Faltungs-Neuronalen Netzen auf der CPU.  Bei dieser Arbeit musste ich auf eine Reihe interessanter Punkte sto√üen, die sich auf die Optimierung direkter Signalausbreitungsalgorithmen in neuronalen Netzen beziehen.  Es scheint mir, dass eine Beschreibung dieser Punkte f√ºr die Leser von Habrahabr sehr interessant w√§re.  Was ich einer Reihe meiner Artikel widmen m√∂chte.  Die Dauer des Zyklus h√§ngt von Ihrem Interesse an diesem Thema und nat√ºrlich von meiner F√§higkeit ab, Faulheit zu √ºberwinden.  Ich m√∂chte den Zyklus mit einer Beschreibung des <s>Rahmenrads</s> selbst beginnen.  Die Fragen der zugrunde liegenden Algorithmen werden in den folgenden Artikeln offenbart: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Faltungsschicht: Techniken zur Optimierung der Matrixmultiplikation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Faltungsschicht: schnelle Faltung nach der Methode von Shmuel Vinograd</a> </li></ol><br><a name="habracut"></a><br><h2>  Antworten auf Fragen </h2><br>  Bevor ich mit einer detaillierten Beschreibung des Frameworks beginne, werde ich versuchen, eine Reihe von Fragen, die die Leser wahrscheinlich haben werden, sofort zu beantworten.  Die Erfahrung zeigt, dass es besser ist, dies im Voraus zu tun, da viele sofort anfangen, w√ºtende Kommentare zu schreiben, ohne bis zum Ende gelesen zu haben. <br><br>  Die erste Frage, die sich normalerweise in solchen F√§llen stellt: <i>Wer betreibt jetzt Netzwerke auf herk√∂mmlichen Prozessoren, wann gibt es Grafikbeschleuniger und Tensor- (Matrix-) Beschleuniger?</i> <br>  Ich werde das mit Ja beantworten - es ist wirklich nicht ratsam, neuronale Netze auf der CPU zu trainieren, aber das Ausf√ºhren vorgefertigter neuronaler Netze ist eine ziemliche Anforderung, insbesondere wenn das Netz klein genug ist.  Die Gr√ºnde daf√ºr m√∂gen unterschiedlich sein, aber die Hauptgr√ºnde: <br><br><ol><li>  CPUs sind h√§ufiger.  Nicht alle Computer verf√ºgen √ºber eine GPU, insbesondere Server. </li><li>  In kleinen neuronalen Netzen sind die Vorteile der Verwendung der GPU gering und fehlen manchmal vollst√§ndig. </li><li>  Die effektive Einbeziehung der GPU zur Beschleunigung neuronaler Netze erfordert typischerweise eine wesentlich komplexere Anwendungsstruktur. </li></ol><br>  Die n√§chste m√∂gliche Frage: <i>Warum eine spezielle L√∂sung zum Starten verwenden, wenn es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Tensorflow</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Caffe</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">MXNet gibt</a> ?</i> <br><br>  Sie k√∂nnen Folgendes beantworten: <br><br><ol><li>  Eine Vielzahl von Frameworks ist nicht immer gut. Wenn also in einem Projekt mehrere Modelle in unterschiedlichen Frameworks trainiert sind, m√ºssen Sie sie alle in eine vorgefertigte L√∂sung einbetten, was sehr unpraktisch ist. </li><li>  Klassische Frameworks wurden entwickelt, um GPU-Modelle zu trainieren - und sie sind auf jeden Fall gut darin!  Um trainierte Modelle auf der CPU auszuf√ºhren, ist ihre Funktionalit√§t jedoch redundant und nicht optimal. </li><li>  Die Best√§tigung der Notwendigkeit einer speziellen L√∂sung ist die Beliebtheit von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">OpenVINO</a> - einem Framework von Intel, das dieselbe Funktion erf√ºllt. </li></ol><br>  Hier stellt sich sofort eine logische Frage nach der Erfindung des Fahrrads: <i>Warum Ihr Handwerk einsetzen, wenn es eine vollst√§ndig professionelle L√∂sung von einem anerkannten Weltmarktf√ºhrer gibt?</i> <br>  Meine Antwort lautet: <br><br><ol><li>  Zu Beginn der Arbeiten an Synet steckte OpenVINO noch in den Kinderschuhen.  Und in Wahrheit, wenn OpenVINO zu diesem Zeitpunkt in seinem aktuellen Zustand w√§re, w√ºrde ich mich mit hoher Wahrscheinlichkeit nicht an meinem eigenen Projekt beteiligen. </li><li>  Sie k√∂nnen Ihr eigenes Framework an Ihre Bed√ºrfnisse anpassen.  In meinem Fall war die Hauptanforderung die maximale Single-Thread-Leistung. </li><li>  Sie k√∂nnen neue Funktionen so schnell wie m√∂glich unterst√ºtzen, wenn Sie sie pl√∂tzlich ben√∂tigen (z. B. eine neue Ebene hinzuf√ºgen und einen Leistungsfehler beseitigen). </li><li>  Einfache Integration in eine schl√ºsselfertige L√∂sung. </li><li>  Die Funktionsweise der Bibliothek auf anderen Plattformen als x86 / x86_64 - beispielsweise auf ARM. </li></ol><br>  Es ist wahrscheinlich, dass die Leser andere Fragen oder Einw√§nde haben werden - aber ich kann sie immer noch nicht vorhersagen, und deshalb werde ich in den Kommentaren zum Artikel antworten.  Beginnen wir in der Zwischenzeit mit einer direkten Beschreibung von Synet. <br><br><h2>  Synet-Kurzbeschreibung </h2><br>  Synet ist in <b>C ++ geschrieben</b> und enth√§lt nur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Header-Dateien</a> .  In <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Simd</a> , einem weiteren Open-Source-Projekt zur Beschleunigung der Bildverarbeitung auf einer CPU, werden plattformspezifische Optimierungen auf niedriger Ebene implementiert.  Und dies ist die einzige externe Abh√§ngigkeit von Synet (ein solches Schema wurde gew√§hlt, um die Integration der Bibliothek in Projekte von Drittanbietern zu erleichtern).  Zum Starten neuronaler Netze werden Modelle ihres eigenen internen Formats verwendet. <br><br><img src="https://habrastorage.org/webt/rp/bu/rn/rpburnoopqfamvrtyhhcmbp4nnm.png" alt="Bild"><br><br>  Die Konvertierung von vorab trainierten Modellen in das interne Format erfolgt nach einem zweistufigen Schema: 1) Konvertieren Sie zun√§chst das Modell in das Inference Engine-Format (gut) <br>  OpenVINO verf√ºgt dazu √ºber alle notwendigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Tools</a> .  2) Konvertieren Sie dann aus dieser Zwischendarstellung direkt in das interne Synet-Format. <br><br><img src="https://habrastorage.org/webt/pk/21/td/pk21tdeoswgjtrpnmym-hqby7-k.png" alt="Bild"><br><br>  Das Synet-Modell enth√§lt zwei Dateien: 1) * .XML - eine Datei mit einer Beschreibung der Struktur des Modells.  2) * .BIN - eine Datei mit trainierten Gewichten. <br><br><img src="https://habrastorage.org/webt/w-/xa/nr/w-xanrgyr20xe7oxpbdtlavuhua.png" alt="Bild"><br><br><h2>  Synet Beispiel </h2><br>  Das folgende Beispiel zeigt die Verwendung von Synet zum Erkennen von Gesichtern.  Das urspr√ºngliche Inference Engine-Modell wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier aufgenommen</a> . <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SYNET_SIMD_LIBRARY_ENABLE #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Synet/Network.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Synet/Converters/InferenceEngine.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Simd/SimdDrawing.hpp"</span></span></span><span class="hljs-meta"> typedef Synet::Network</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;float&gt; Net; typedef Synet::View View; typedef Synet::Shape Shape; typedef Synet::Region&lt;float&gt; Region; typedef std::vector&lt;Region&gt; Regions; int main(int argc, char* argv[]) { Synet::ConvertInferenceEngineToSynet("ie_fd.xml", "ie_fd.bin", true, "synet.xml", "synet.bin"); Net net; net.Load("synet.xml", "synet.bin"); net.Reshape(256, 256, 1); Shape shape = net.NchwShape(); View original; original.Load("faces_0.ppm"); View resized(shape[3], shape[2], original.format); Simd::Resize(original, resized, ::SimdResizeMethodArea); net.SetInput(resized, 0.0f, 255.0f); net.Forward(); Regions faces = net.GetRegions(original.width, original.height, 0.5f, 0.5f); uint32_t white = 0xFFFFFFFF; for (size_t i = 0; i &lt; faces.size(); ++i) { const Region &amp; face = faces[i]; ptrdiff_t l = ptrdiff_t(face.x - face.w / 2); ptrdiff_t t = ptrdiff_t(face.y - face.h / 2); ptrdiff_t r = ptrdiff_t(face.x + face.w / 2); ptrdiff_t b = ptrdiff_t(face.y + face.h / 2); Simd::DrawRectangle(original, l, t, r, b, white); } original.Save("annotated_faces_0.ppm"); return 0; }</span></span></span></span></code> </pre> <br>  Als Ergebnis des Beispiels sollte ein Bild mit kommentierten Gesichtern angezeigt werden: <br><br><img src="https://habrastorage.org/webt/fm/vt/cd/fmvtcdwcodslghhenbzsd2pjbz8.jpeg" alt="Bild"><br><br>  Nehmen wir nun ein Beispiel f√ºr die Schritte: <br><br><ol><li>  Zun√§chst wird das Modell vom Inference Engine-Format in Synet konvertiert: <br><br><pre> <code class="cpp hljs">Synet::ConvertInferenceEngineToSynet(<span class="hljs-string"><span class="hljs-string">"ie_fd.xml"</span></span>, <span class="hljs-string"><span class="hljs-string">"ie_fd.bin"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"synet.xml"</span></span>, <span class="hljs-string"><span class="hljs-string">"synet.bin"</span></span>);</code> </pre><br>  In der Realit√§t wird dieser Schritt einmal ausgef√ºhrt, und dann wird das bereits konvertierte Modell √ºberall verwendet. </li><li>  Konvertiertes Modell herunterladen: <br><br><pre> <code class="cpp hljs">Net net; net.Load(<span class="hljs-string"><span class="hljs-string">"synet.xml"</span></span>, <span class="hljs-string"><span class="hljs-string">"synet.bin"</span></span>);</code> </pre></li><li>  Ein optionaler Schritt zum √Ñndern der Gr√∂√üe des Eingabebilds und des Stapels (nat√ºrlich muss das Modell das √Ñndern der Gr√∂√üe des Eingabebilds unterst√ºtzen): <br><br><pre> <code class="cpp hljs">net.Reshape(<span class="hljs-number"><span class="hljs-number">256</span></span>, <span class="hljs-number"><span class="hljs-number">256</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre></li><li>  Laden Sie ein Bild und bringen Sie es in die Eingabegr√∂√üe des Modells: <br><br><pre> <code class="cpp hljs">View original; original.Load(<span class="hljs-string"><span class="hljs-string">"faces_0.ppm"</span></span>); <span class="hljs-function"><span class="hljs-function">View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resized</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(net.NchwShape()[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">], net.NchwShape()[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">], original.format)</span></span></span></span>; Simd::Resize(original, resized, ::SimdResizeMethodArea);</code> </pre></li><li>  Bild in Modell laden: <br><br><pre> <code class="cpp hljs">net.SetInput(resized, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">255.0f</span></span>);</code> </pre></li><li>  Starten der direkten Signalausbreitung im Netzwerk: <br><br><pre> <code class="cpp hljs">net.Forward();</code> </pre></li><li>  Abrufen einer Reihe von Regionen mit gefundenen Gesichtern: <br><br><pre> <code class="cpp hljs">Regions faces = net.GetRegions(original.width, original.height, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">0.5f</span></span>);</code> </pre></li></ol><br><h2>  Leistungsvergleich </h2><br>  Es w√§re wahrscheinlich nicht ganz richtig, Synet mit klassischen Frameworks f√ºr maschinelles Lernen zu vergleichen. Beispielsweise <a href="" rel="nofollow">umgeht</a> die Inference Engine <a href="" rel="nofollow">diese bei einer Reihe von Tests mehrmals</a> . <br>  Im Folgenden finden Sie ein Beispiel f√ºr den Vergleich der Single-Thread-Leistung der Inference Engine (ein Produkt mit √§hnlicher Funktionalit√§t) und von Synet anhand eines Beispiels aus einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Reihe offener Modelle</a> : <br><div class="scrollable-table"><table><tbody><tr><th>  Test </th><th>  Beschreibung </th><th>  i7-6700 3,4 GHz 4c / 8t FMA / AVX-2 </th><th>  i9-7900X 3,3 GHz 10c / 20t AVX-512 </th></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_000</a> </td><td>  Erkennung von Fahrzeugattributen (2,4 MB) </td><td>  1,520 / <font color="red">1,597</font> ms ( <font color="red">-5%</font> ) </td><td>  0,772 / <font color="green">0,690</font> ms ( <font color="green">+ 12%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_001</a> </td><td>  Altersgeschlechtserkennung (8,2 MB) </td><td>  1,659 / 1,418 ms ( <font color="green">+ 17%</font> ) </td><td>  0,988 / <font color="green">0,804</font> ms ( <font color="green">+ 23%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_002</a> </td><td>  Gesichtserkennung (4,0 MB) </td><td>  34,26 / <font color="red">43,17</font> ms ( <font color="red">-21%</font> ) </td><td>  26,72 / 24,57 ms ( <font color="green">+ 9%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_003f</a> </td><td>  Gesichtserkennung (2,2 MB) </td><td>  12,63 / <font color="red">14,87</font> ms ( <font color="red">-15%</font> ) </td><td>  8,680 / <font color="red">9,326</font> ms ( <font color="red">-7%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_004</a> </td><td>  Kennzeichenerkennung (4,6 MB) </td><td>  4,350 / <font color="red">4,871</font> ms ( <font color="red">-11%</font> ) </td><td>  2,838 / <font color="green">2,432</font> ms ( <font color="green">+ 17%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_005</a> </td><td>  Kennzeichenerkennung (0,7 MB) </td><td>  0,339 / <font color="green">0,260</font> ms ( <font color="green">+ 30%</font> ) </td><td>  0,200 / 0,142 ms ( <font color="green">+ 41%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_006</a> </td><td>  Gesichtsidentifikation (4,2 MB) </td><td>  11,82 / <font color="green">9,052</font> ms ( <font color="green">+ 31%</font> ) </td><td>  8.200 / <font color="green">4.559</font> ms ( <font color="green">+ 80%</font> ) </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">test_007</a> </td><td>  Neuidentifizierung der Person (3,1 MB) </td><td>  3,567 / <font color="green">3,402</font> ms ( <font color="green">+ 5%</font> ) </td><td>  <font color="green">2,471</font> / <font color="green">1,679</font> ms ( <font color="green">+ 47%</font> ) </td></tr><tr><th>  Durchschnitt </th><th></th><th>  + 2% </th><th>  + 25% </th></tr></tbody></table></div><br>  Wie aus der Tabelle hervorgeht, entspricht bei diesen Tests auf einem Computer mit Unterst√ºtzung f√ºr AVX2 (i7-6700) die Leistung von Synet im Allgemeinen der Leistung der Inference Engine (obwohl sie von Modell zu Modell sehr unterschiedlich ist).  Auf einem Computer mit Unterst√ºtzung f√ºr den AVX-512 (i9-7900X) liegt die Leistung von Synet im Durchschnitt um 25% √ºber der der Inference Engine. <br><br>  Alle Messungen wurden von der Testanwendung in Synet durchgef√ºhrt.  Auf Wunsch k√∂nnen die Leser die Tests selbst reproduzieren: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> -b master --recurse-submodules -v https://github.com/ermig1979/Synet.git synet <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> synet ./build.sh inference_engine ./test.sh</code> </pre><br><h2>  Vor- und Nachteile </h2><br>  Ich werde mit den Profis beginnen: <br><br><ol><li>  Das Projekt ist klein und kann problemlos in Projekten von Drittanbietern implementiert werden. </li><li>  Zeigt eine hohe Single-Threaded-Leistung. </li><li>  Funktioniert auf mobilen Prozessoren (unterst√ºtzt ARM-NEON). </li></ol><br>  Gut und Nachteile, wo ohne sie: <br><br><ol><li>  GPU und andere spezielle Beschleuniger werden nicht unterst√ºtzt. </li><li>  Schlechte Parallelisierung einer Aufgabe auf Mehrkern-CPUs. </li><li>  Keine Unterst√ºtzung f√ºr INT8 (Quantisierung von Gewichten). </li></ol><br><h2>  Fazit </h2><br>  Synet wird derzeit im Rahmen des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Kipod-</a> Projekts verwendet, einer Cloud-basierten Plattform f√ºr Videoanalysen.  Vielleicht hat er andere Benutzer, aber das ist nicht sicher :).  W√§hrend sich das Projekt entwickelt, m√∂chte ich in Zukunft Folgendes hinzuf√ºgen: <br><br><ol><li>  Unterst√ºtzung f√ºr neue Modelle, Ebenen, Algorithmen. </li><li>  Unterst√ºtzung f√ºr Ganzzahlberechnungen im INT8-Format (quantisierte Gewichte). </li><li>  GPU-Computing-Unterst√ºtzung. </li><li>  Vom ONNX-Format konvertieren. </li></ol><br>  Diese Liste ist bei weitem nicht vollst√§ndig und ich m√∂chte sie unter Ber√ºcksichtigung der Meinung der Community erg√§nzen - daher warte ich auf Ihr Feedback!  Damit das Tool nicht nur f√ºr unser Unternehmen, sondern auch f√ºr eine Vielzahl von Anwendern n√ºtzlich ist.  Au√üerdem w√ºrde der Autor die Unterst√ºtzung der Community im Entwicklungsprozess nicht verweigern. <br>  Bei der Beschreibung von Synet, die ich in diesem Artikel gemacht habe, habe ich mich bewusst nicht mit den Details seiner internen Implementierung befasst - es gibt viele leckere Algorithmen unter der Haube, aber ich m√∂chte die Details ihrer Implementierung in den folgenden Artikeln der Serie offenlegen: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Faltungsschicht: Techniken zur Optimierung der Matrixmultiplikation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Faltungsschicht: schnelle Faltung nach der Methode von Shmuel Vinograd</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471074/">https://habr.com/ru/post/de471074/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471054/index.html">Longrid √ºber den Realismus der Quantenbedrohung f√ºr Kryptow√§hrungen und die Probleme der ‚ÄûProphezeiung 2027‚Äú</a></li>
<li><a href="../de471062/index.html">Wie Sie Alice beibringen, Ihr Smart Home zu verwalten. Yandex-Bericht</a></li>
<li><a href="../de471066/index.html">Wie sieht das Zip-Archiv aus und was k√∂nnen wir dagegen tun?</a></li>
<li><a href="../de471070/index.html">Welche Serversprache soll man w√§hlen ... f√ºr einen mobilen Entwickler</a></li>
<li><a href="../de471072/index.html">Wie viel Gramm im Telegramm?</a></li>
<li><a href="../de471076/index.html">Wie die Matrix ein kugelsicheres Erbe schuf</a></li>
<li><a href="../de471078/index.html">Chrome blockiert gemischte Inhalte vollst√§ndig</a></li>
<li><a href="../de471080/index.html">Wer ist f√ºr die Qualit√§t des Testens der Anwendung verantwortlich? 10 Gr√ºnde f√ºr Produktionsfehler</a></li>
<li><a href="../de471084/index.html">Verfahrensmuster, die mit Kachelkarten verwendet werden k√∂nnen</a></li>
<li><a href="../de471086/index.html">Python-Musik-Cover-Generator in Blender</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>