<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚≠ïÔ∏è üé¥ üë®‚Äçüë©‚Äçüëß‚Äçüëß Leistungsstarker Vierkanal-Dimmer f√ºr LEDs üõ∑ üë≤üèº üë¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werde ich √ºber das Projekt eines leistungsstarken Vierkanaldimmers f√ºr LED-Streifen und -Lampen (bis zu 200 Watt Gesamtleistung, 50....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Leistungsstarker Vierkanal-Dimmer f√ºr LEDs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402155/">  In diesem Artikel werde ich √ºber das Projekt eines leistungsstarken Vierkanaldimmers f√ºr LED-Streifen und -Lampen (bis zu 200 Watt Gesamtleistung, 50..100 Watt pro Kanal) mit einer hohen Frequenz der PWM-Regelung (1 Kilohertz mit einer Farbtiefe von 10 Bit) f√ºr eine qualitativ hochwertige Beleuchtung sprechen .  Dar√ºber hinaus verf√ºgt es √ºber einen Eingang f√ºr den Lichtsensor, R√ºckkopplungsfunktionen (Ausgabe von Informationen √ºber die Eingangsspannung, Spannung an den Messeing√§ngen usw. an die Steuerung) und sogar √ºber eine galvanische Trennung des seriellen Steueranschlusses. <br><br><img src="https://habrastorage.org/files/34a/40c/43c/34a40c43cea94d2c86d0a577633c5993.JPG"><br><a name="habracut"></a><br>  So kam es, dass ich mich entschied, mein Profil zu √§ndern und mich mit Mikrocontrollern und Automatisierung zu besch√§ftigen. Nach einigen Monaten erhielt ich ein verlockendes Angebot, ein ‚ÄûSmart Home‚Äú in der Dominikanischen Republik zu bauen, sodass fast alle Aspekte des Lebens einer ziemlich gro√üen Villa mit drei gro√üen Villen verwaltet und automatisiert werden. Geb√§ude, von Beleuchtung und Klima bis hin zu Gartenrobotern und Bew√§sserungssystemen.  Da ich lange Zeit Schnee und Frost satt hatte, war es unm√∂glich, ein solches Angebot abzulehnen, zumal sie mir beim Bewegen und Anpassen sehr geholfen haben. <br><br>  Eine der wichtigsten Aufgaben ist nat√ºrlich die Steuerung der Beleuchtung in vielen R√§umen und im Freien.  Um hier teure Energie zu sparen, werden fast √ºberall LED-Streifen und 12-Volt-Lampen eingesetzt, die mit Dimmern gesteuert werden m√ºssen.  Bestehende Dimmermodelle waren nicht in jeder Hinsicht sehr zufriedenstellend (eine ausreichend hohe Steuerfrequenz f√ºr das Fehlen von Flackern; Leistung f√ºr die Steuerung heller langer Streifen oder Lampen / Scheinwerfer; geschlossene Austauschprotokolle usw.).  Also habe ich beschlossen, meinen Dimmer zu machen. <br><br>  Ein sehr schmerzhafter Punkt in der Entwurfsphase war die Wahl, eine Niederspannungsleistung aus 110 Volt Wechselstrom zu erhalten.  Sogar eine exotische Option wurde mit einem transformatorlosen Herunterschalten sofort auf 12 Volt in Betracht gezogen, aber aus elektrischen und brandschutzrechtlichen Gr√ºnden wurde sie abgelehnt.  Vorgefertigte Netzteile 110-&gt; 12 waren nicht so teuer (20 US-Dollar f√ºr 120 Watt und 40 US-Dollar f√ºr 200), wenn auch insgesamt.  Aber zum Gl√ºck gab es viel Platz f√ºr Ausr√ºstung, also habe ich mich f√ºr diese Option entschieden. <br><br>  Die Schaltung erwies sich als relativ einfach (mit Ausnahme des galvanischen Trennknotens der seriellen Schnittstelle bei vier Optokopplern) - der Mikrocontroller STM32F030F4P6, zwei ADP3624-MOSFET-Treiber und IRLB8748-Schl√ºsseltransistoren, die mit gro√üem Rand ausgew√§hlt wurden (mit einer Last von 100 Watt pro Kanal - sie waren kaum warm) plus ein fertiges chinesisches gepulstes Step-Down-Modul mit 3,3 Volt.  Mit ausgew√§hlten Treibern k√∂nnen Sie Frequenzen bis zu Megahertz steuern, die die Frequenz der Ausgangsspannung in Kilohertz mit einem PWM-Schritt von einer Mikrosekunde angeben.  In der Praxis wurde sogar ein Modus mit einer PWM-Frequenz von acht Kilohertz und einem Schritt von 125 Nanosekunden getestet. In der Praxis droht jedoch eine derart hohe Einstellfrequenz eine gewisse Instabilit√§t am Ausgang - Transistoren k√∂nnen m√∂glicherweise nicht so schnell schlie√üen und die Qualit√§t der Einstellung wird ‚Äûschweben‚Äú. <br><br> <a href=""><img src="https://habrastorage.org/files/066/0b3/8bb/0660b38bbd6f408894a90839f6ce3407.png" width="900"></a> <br><br>  Die Verkabelung der Platine f√ºr so hohe Str√∂me war f√ºr mich eine ziemlich schwierige Herausforderung, ich hatte solche Aufgaben noch nie zuvor erlebt.  Es wurde beschlossen, es so breit wie m√∂glich zu machen (ein Leiter mit einer Breite von mindestens 10 mm auf einer Schicht aus 70 Mikron Kupfer). Wenn dies nicht m√∂glich ist, verwenden Sie die zweite Schicht und kombinieren Sie sie mit einer gro√üen Anzahl von Durchkontaktierungen.  Ich habe die Maske von den hochbelasteten Leitern entfernt, damit bei Bedarf ein Kupferbus oben angebracht werden kann (dies war jedoch selbst bei einer maximalen Last von 200 Watt nicht erforderlich - die Platine erw√§rmt sich in einem geschlossenen Geh√§use auf knapp 40 Grad). <br><br>  Das Austauschprotokoll wurde aufgrund des fehlenden Flash-Speichers √§u√üerst einfach gew√§hlt, die Befehle werden zeilenweise in Form des Textes ‚Äû0: 512‚Äú (Kanal Null, PWM 512) √ºbertragen, die Ausgangsdaten werden auf die gleiche Weise √ºbertragen (Stromversorgung, Daten vom ersten Fotowiderstand, Daten vom zweiten Fotowiderstand, Eingangsspannung am Eingang von ADC3, Eingangsspannung am Eingang von ADC5, Spannung des Controllers, Chiptemperatur).  Es w√§re korrekter, das MQTT-Protokoll zu verwenden, aber ich bef√ºrchtete, dass es nicht in Flash passt (Kilobyte freier Speicherplatz blieben von 16 √ºbrig). <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quellcode auf Github</a> <br><br>  Ein Dimmer blinkt √ºber denselben Steueranschluss (Sie m√ºssen eine Einheit an den 4. Pin und dann einen Impuls an den 5. anschlie√üen, wonach der Mikrocontroller mit dem seriellen Standardprotokoll STM32 geladen werden kann. Um einen bereits blinkenden Dimmer zu steuern, reichen drei Dr√§hte aus, + 3,3 / + 5V am ersten Pin Daten am dritten, am sechsten - der Erde. Die Einstellungen des Steueranschlusses in der Firmware sind 38400 Baud, 8n1. <br><br>  Nat√ºrlich war die erste Version des Dimmers nicht ohne M√§ngel.  Es stellte sich heraus, dass ein Kondensator mit 470 Mikrofarad pro 12 Volt nicht ausreicht. Er erw√§rmt sich bei starker Belastung zu stark (insbesondere wenn die Dr√§hte zur Stromversorgung f√ºr solche Str√∂me d√ºnn sind). Wir m√ºssen ein paar st√§rkere hinzuf√ºgen (entsprechend dem maximal zul√§ssigen Strom).  Das chinesische Leistungsmodul stellte sich ebenfalls als erfolglose L√∂sung heraus. Eines der Module ist w√§hrend der Tests ohne ersichtlichen Grund ausgefallen. Ich werde es durch einen Konverter auf TPS62177 ersetzen. Au√üerdem werde ich einen weiteren optionalen Konverter auf AP1501 (24-&gt; 12) f√ºr den Fall einer Dimmer-Stromversorgung von hinzuf√ºgen 24 Volt.  Nun, Sie ben√∂tigen einen Steuerkreis f√ºr einen 120-mm-L√ºfter f√ºr die Stromversorgung (in F√§llen, in denen die Last nahe am Maximum liegt), mit thermischer Steuerung und stufenlos einstellbar.  Ich habe mich auch entschlossen, die komplexe galvanische Trennung des Steueranschlusses durch den SI8641-Chip zu ersetzen. <br><br>  Es gibt Probleme im Software-Teil - manchmal h√§ngt das Lesen von der seriellen Schnittstelle, blockiert die Kontrolle (die Erfahrung mit STM32 ist f√ºr mich noch nicht sehr gro√ü) und das Protokoll hat sich als zu idiotisch herausgestellt. Vielleicht werde ich versuchen, dort ein normales MQTT zu stopfen. <br><br>  Hier ist ein Beispiel f√ºr die Verwendung eines Dimmers auf einem Pr√ºfstand (meine Vordert√ºr) zusammen mit einem IR-Abstandssensor (Farbe und Helligkeit des RGBW-Streifens sind je nach Entfernung √ºber Openhab einstellbar): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/knXuq3a6p4M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Im n√§chsten Artikel werde ich √ºber eine vierkanalige Schalteinheit mit acht Kilowatt Wechselstromlasten mit bistabilen Relais sprechen (um den Energieverbrauch vergeblich zu reduzieren), indem der Stromverbrauch auf jedem Kanal gemessen wird. <br><br>  Nun, ich werde positiv abschlie√üen.  Wie sich herausstellte, k√∂nnen in der Dominikanischen Republik 99% Isopropyl- oder Ethylalkohol nicht zum Waschen von Leiterplatten (und auch von reinem Benzin) gefunden werden.  Sie finden 70% offensichtlich nicht mit destilliertem Wasser gemischt, was Flecken hinterl√§sst.  Und Sie k√∂nnen immer noch leicht 99,6% Methyl finden (ich wei√ü nicht, warum sie es √ºberhaupt verkaufen, es ist sogar be√§ngstigend, es als L√∂sungsmittel zu verwenden - Sie k√∂nnen paarweise atmen).  Ich beschloss, das erste Dimmerbrett mit destilliertem Wasser zu sp√ºlen, das ich in einem Haushaltswarengesch√§ft gekauft hatte.  Gl√ºcklicherweise war mir die Idee, die Qualit√§t des Destillats auf Geschmack zu √ºberpr√ºfen, nicht klar.  Aber die Leiterplatte und das verzinkte Waschbecken mochten es wirklich nicht, als ich sie mit Batterieelektrolyt einf√ºllte (Wasserflaschen standen damit im Regal, offensichtlich habe ich die falsche genommen, als ich sie in den Korb legte) ... <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de402155/">https://habr.com/ru/post/de402155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de402145/index.html">Fortsetzung des Themas ‚ÄûKrebs. Was soll man damit machen ... "</a></li>
<li><a href="../de402147/index.html">IBM hat ein einzelnes Informationsbit in einem Atom aufgezeichnet</a></li>
<li><a href="../de402149/index.html">Intel XMM 7560 - Gigabit √ºber Funk</a></li>
<li><a href="../de402151/index.html">Blockchain digitaler Notar: Emercoin DPO Antifake</a></li>
<li><a href="../de402153/index.html">"Wir sortieren" das gedruckte Haus</a></li>
<li><a href="../de402157/index.html">Chris Kaspersky ist gestorben. In Erinnerung an einen echten Hacker</a></li>
<li><a href="../de402159/index.html">Februar-Ranking der medienwissenschaftlichsten Entwicklungen</a></li>
<li><a href="../de402161/index.html">Softwarehersteller schlie√üen die von der CIA verwendeten Schwachstellen massiv</a></li>
<li><a href="../de402163/index.html">Steve Jobs Story aktualisiert</a></li>
<li><a href="../de402165/index.html">Der gr√∂√üte "Dome" der Wissenschaft von Istra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>