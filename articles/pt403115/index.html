<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèø üôáüèæ üçï Passeando pelos fantasmas em Pac-Man üìã üöí üï£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo √© um fragmento do meu livro Bug Voyage: A Tour of Classic Game Glitches. O livro tamb√©m cont√©m informa√ß√µes sobre a gera√ß√£o de n√∫meros pseu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Passeando pelos fantasmas em Pac-Man</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403115/"> <em>Este artigo √© um fragmento do meu livro Bug Voyage: A Tour of Classic Game Glitches.</em>  <em>O livro tamb√©m cont√©m informa√ß√µes sobre a gera√ß√£o de n√∫meros pseudo-aleat√≥rios, realizando c√°lculos de baixo n√≠vel com n√∫meros bin√°rios e decimais, bem como sobre como causar uma falha em qualquer m√°quina Galaga, mesmo sem cair moedas l√°.</em> <br><br>  Se voc√™ tem o Pac-Man Arcade Machine perto de voc√™, Sra.  Pac-Man ou algo assim, voc√™ est√° com sorte, hoje eles est√£o em falta.  At√© mesmo as m√°quinas mais comuns de "Reuni√£o de 20 anos" no passado, nas quais a Sra. √â instalada em conjunto  Pac-Man e Galaga agora s√£o menos comuns. <br><br>  Mas, para entender o que ser√° discutido, basta baixar um v√≠deo do YouTube sobre um desses jogos e assistir em apenas um minuto: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0LTUHRgzCS8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Voc√™ j√° reparou?  Como Pac-Man e fantasmas se movem suavemente pelo labirinto?  Eles deslizam com tanta confian√ßa e clareza. <br><br>  Essa fluidez, como veremos, √© uma ilus√£o, e isso n√£o √© tudo.  Aqui est√° outro v√≠deo do YouTube: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/VbzW6iNDx9U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Ele foi enviado por Jamey Pittman, autor do artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>do Pac-Man Dossier</em></a> , que tem sido a fonte de grande parte das informa√ß√µes do Pac-Man para o meu livro.  O v√≠deo foi rebobinado um pouco para economizar seu tempo.  D√™ uma olhada nisso.  Em particular, fique de olho no Pac-Man e no fantasma vermelho (o manual diz que o nome dele √© Blinky).  Observe o que acontece por volta do quadrag√©simo segundo! <br><a name="habracut"></a><br>  Voc√™ viu?  Pac-Man atravessou um fantasma vermelho sem nenhum problema!  Como isso aconteceu?  √â poss√≠vel garantir que isso aconte√ßa o tempo todo? <br><br>  Calma, agora vou explicar tudo, e sim, esse √© um comportamento constante.  Se voc√™ seguir exatamente as instru√ß√µes de Pittman no primeiro n√≠vel, isso sempre acontecer√°. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/84c/c16/fba/84cc16fba84cd8cebb0ed65f21cc405a.png"><br>  <em>Pac-man</em> <br><br><h2>  O que √© um sprite? </h2><br>  Uma parte do equipamento gr√°fico bidimensional usava objetos gr√°ficos especiais em jogos chamados sprites.  Voc√™ provavelmente j√° ouviu esse termo nas conversas modernas sobre os gr√°ficos de pixel dos personagens. <br><br>  Por√©m, antes, o significado do termo era diferente: denotava um objeto gr√°fico em movimento independente que podia ser colocado em qualquer lugar da tela ou em cima do restante dos gr√°ficos, chamado de plano de fundo ou abaixo dele.  O sprite recebe as coordenadas X e Y, a imagem e sua cor.  Muitas vezes, eles eram usados ‚Äã‚Äãpara personagens do jogo, mas tamb√©m usados ‚Äã‚Äãcomo adi√ß√µes ao plano de fundo e para outros fins. <br><br>  A maioria dos sistemas suporta m√∫ltiplos ou (no caso de Galaga) muitos sprites.  Eles tinham outros nomes: Atari os chamou pela primeira vez de "gr√°ficos de m√≠sseis de jogadores" e, na documenta√ß√£o inicial do Commodore, eles eram chamados de "MOBs (Movable Object Blocks").  No entanto, gradualmente quase todos come√ßaram a cham√°-los de sprites. <br><br>  A m√°quina de arcade de equipamentos Pac-Man suporta gr√°ficos de sprite.  Ele pode ser exibido na tela at√© oito sprites por vez, e isso sem usar truques com linhas de varredura.  Um dos sprites √© a imagem do pr√≥prio Pac-Man, e mais quatro s√£o usados ‚Äã‚Äãpor fantasmas.  Quando Pac-Man come o fantasma, seus olhos voltando para casa usam o sprite fantasma. <br><br>  Nem tudo o que muda na tela √© um sprite.  Outro tipo de gr√°fico usado pelo equipamento da √©poca √© o <em>fundo</em> do bloco.  Era apenas uma grade de elementos gr√°ficos individuais armazenados na mem√≥ria.  Ao alterar o conte√∫do de um local de mem√≥ria, uma pequena parte da tela correspondente a essa parte da grade tamb√©m muda imediatamente.  Portanto, trabalhar com essas grades √© simples. <br><br>  Os pontos no jogo Pac-Man s√£o pe√ßas (pe√ßas) do fundo, apagadas quando o Pac-Man as come.  A cintila√ß√£o do Energizer, que d√° for√ßa ao Pac-Man, √© feita colorindo essas c√©lulas de preto e branco, a cada poucos quadros.  Mas esses objetos n√£o se movem, eles s√≥ podem ser removidos ou substitu√≠dos. <br><br>  O problema com os gr√°ficos dos blocos de caracteres √© que eles n√£o podem se mover sem problemas.  Ele est√° localizado na grade, de modo que um objeto em segundo plano em movimento n√£o ser√° capaz de se mover pela tela sem problemas, como fazem o Pac-Man e os fantasmas.  S√≥ pode se mover entre c√©lulas da grade.  √â imposs√≠vel mover parte do espa√ßo da grade; est√° l√° ou n√£o. <br><br>  Bem, sim, isso √© interessante.  Mas e da√≠? <br><br><h2>  No√ß√µes b√°sicas do mundo do Pac-Man </h2><br>  Quando crian√ßa, escrevi pequenos jogos no Microsoft BASIC para o meu Commodore 64. Essa implementa√ß√£o do BASIC teve problemas.  Os programas eram executados lentamente e quase nunca usavam os recursos sonoros e gr√°ficos do computador, que eram incr√≠veis para a √©poca.  Se voc√™ queria fazer algo com gr√°ficos e som, tinha que aprender os comandos de acesso direto √† mem√≥ria t√©cnica chamados POKEs, ou aprender a escrever no c√≥digo da m√°quina. <br><br>  Uma solu√ß√£o foi usar objetos de caracteres em vez de gr√°ficos do sistema de sprites, como descrevi acima.  Os objetos faziam saltos do tamanho de ladrilhos, mas era muito mais f√°cil trabalhar com eles.  Foi poss√≠vel come√ßar a criar um jogo usando gr√°ficos de personagens e, quando o projeto j√° se tornou grande e s√©rio, e eu queria mostr√°-lo √†s pessoas, mudar para o uso de sprites de hardware. <br><br>  Um objeto na mem√≥ria ainda pode pular no mesmo incremento de oito pixels, mas o player n√£o viu isso.  Tudo o que ele viu foi uma imagem de sprite tremeluzente que poderia ser maior que o bloco de caracteres e ocultou o que estava realmente acontecendo.  Aproximando-se da programa√ß√£o com sabedoria, foi poss√≠vel interpolar a posi√ß√£o do sprite para que seu movimento parecesse mais suave.  Se voc√™ fez bem o suficiente, o jogador nunca notou a diferen√ßa.  S√≥ voc√™ saberia a verdade. <br><br>  Voc√™ deve ter adivinhado o que estou levando.  Porque <em>foi assim que o Pac-Man foi programado</em> . <br><br>  De fato, tanto o Pac-Man quanto os fantasmas tinham duas posi√ß√µes.  Esta √© a posi√ß√£o dos gr√°ficos em sprite que se movem suavemente na tela que o jogador v√™.  Essa informa√ß√£o √© dada ao jogador quando ele joga o jogo, mas isso √© apenas uma sombra, uma ilus√£o.  Se voc√™ quer entender como o Pac-Man realmente funciona, √© necess√°rio olhar mais profundamente. <br><br>  Nos bastidores do jogo, Pac-Man tamb√©m leva em considera√ß√£o quais c√©lulas de personagens s√£o ocupadas por Pac-Man e fantasmas.  N√£o h√° tra√ßos dessas coordenadas na tela.  Suspeito que, nos est√°gios iniciais do Pac-Man, ao experimentar a jogabilidade, os desenvolvedores pudessem desenhar pe√ßas diretamente na tela.  Jamie Pittman descobriu que essas coordenadas s√£o usadas para intelig√™ncia artificial de todos os fantasmas, e tamb√©m s√£o usadas para reconhecer todas as colis√µes no jogo. <br><br>  Para manter essa ilus√£o, o jogo tem que ser enganado.  Ela rastreia at√© que ponto o Pac-Man e os fantasmas se mudaram de sua c√©lula atual no n√≠vel do assinante e os muda para uma nova posi√ß√£o quando est√£o longe o suficiente.  Um objeto um pouco mais r√°pido ter√° uma velocidade que torna a troca de c√©lulas um pouco mais frequente. <br><br>  Esses elementos - coordenadas da grade, rastreamento entre c√©lulas e a posi√ß√£o do sprite na tela - criam a ilus√£o de movimento suave.  Mas, do ponto de vista do jogo, o movimento √© realizado exatamente da mesma maneira que no meu caso, quando programei os gr√°ficos das c√©lulas dos personagens no Commodore 64. <br><br><h2>  Acerto de contas </h2><br>  Agora, temos todas as informa√ß√µes necess√°rias para entender como o Pac-Man pode passar por fantasmas. <br><br>  As colis√µes do Pac-Man s√£o reconhecidas pela compara√ß√£o das coordenadas da grade com as coordenadas dos fantasmas.  Se eles s√£o iguais, ocorre uma colis√£o e um come o outro.  Se forem diferentes, n√£o haver√° colis√£o.  Isso √© tudo, nem mais, nem menos. <br><br>  Voc√™ pode ver que o motivo dessa decis√£o √© a velocidade do reconhecimento de colis√£o nos ciclos do processador.  Em cada quadro, ele compara os n√∫meros X e Y de um personagem do Pac-Man com os n√∫meros de cada um dos quatro fantasmas.  Gra√ßas a isso, ele n√£o precisa se preocupar com dist√¢ncias e situa√ß√µes de risco.  Colis√µes s√£o correspond√™ncias exatas de coordenadas no sistema de grade. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/63b/745/f6e/63b745f6eba1e94d8b8598b971d7e610.png"><br>  <em>Essa grade (aproximadamente) corresponde ao sistema de coordenadas do bloco, representando as posi√ß√µes reais dos personagens do jogo.</em>  <em>A detec√ß√£o de colis√£o usa essa grade.</em>  <em>O jogo registra uma colis√£o somente quando as coordenadas dos blocos de ambos os personagens coincidem.</em>  <em>Isso significa que eles devem ocupar uma c√©lula da grade.</em> <br><br>  O problema ocorre quando as posi√ß√µes do Pac-Man e do fantasma se movendo uma em dire√ß√£o √† outra alternam para a pr√≥xima c√©lula no mesmo quadro.  A verifica√ß√£o de colis√£o √© realizada depois que todos os objetos foram movidos no quadro atual.  Se o Pac-Man for para a c√©lula Blinky e o Blinky for para a c√©lula anterior do Pac-Man no mesmo quadro, ocorrer√° um erro quando uma colis√£o for detectada.  Eles trocaram de lugar! <br><br>  Como esse √© o √∫nico n√≠vel de realidade que realmente significa algo no jogo, o que o jogador <em>v√™</em> n√£o <em>√©</em> importante.  Pac-Man e o fantasma simplesmente passam, "divergindo como navios no mar". <br><br>  A intelig√™ncia artificial (IA) no jogo tem uma natureza determin√≠stica, para que voc√™ possa identificar um padr√£o para a repeti√ß√£o de comportamento.  Apesar do fato de que o tempo para a manifesta√ß√£o de um erro na passagem deve ser preciso para o quadro, o <em>jogador</em> n√£o precisa ser preciso para o quadro se seguir as regras para executar os padr√µes de movimento do Pac-Man.  Foi assim que o v√≠deo de Jamie Pittman foi gravado. <br><br>  Eu dei uma descri√ß√£o t√£o detalhada para enfatizar um fato importante.  √â muito f√°cil perceber objetos no jogo como reais.  Pac-Man √© <em>um objeto</em> na tela, fantasmas tamb√©m s√£o objetos como uma nave espacial, Mario, Sonic, Solid Snake, um soldado de Call of Duty.  Todos eles s√£o objetos.  Mas isso √© uma ilus√£o. <br><br>  De fato, todos eles apenas d√£o uma dica de um sistema interno e mais profundo.  Nesse sistema, o computador precisa realizar um trabalho s√©rio apenas para determinar se dois objetos <em>est√£o se tocando</em> .  O que voc√™ v√™ na tela √© uma ilustra√ß√£o do mundo abstrato, e parte do jogo transmite ao jogador informa√ß√µes deste mundo atrav√©s da tela, de maneira apropriada ao seu senso de realidade. <br><br>  √â muito f√°cil esquecer o qu√£o fina √© essa conex√£o.  Como voc√™ sabe qual objeto voc√™ controla na tela?  Ele √© diferente dos outros e responde √† ger√™ncia.  Mas e se exatamente o mesmo aparecer na tela?  Ou seu objeto √†s vezes se move aleatoriamente, responde aos sinais de controle com atraso, √†s vezes se transforma em invisibilidade, se divide em dois, se torna como um dos inimigos? <br><br>  A tarefa do designer √© fazer a conex√£o entre o mundo interno do jogo e o que voc√™ v√™ na tela o mais simples e imediato poss√≠vel (√© claro, se ele n√£o estiver tentando obter algum efeito especial).  √â isso que significa <em>imers√£o</em> , ou deveria significar. <br><br><h2>  Informa√ß√µes Adicionais </h2><br>  Insira uma moeda na m√°quina de fliperama ‚Äú20 Year Reunion‚Äù e entre com o joystick do primeiro jogador: cima, cima, cima, baixo, baixo, baixo, esquerda, direita, esquerda, direita, esquerda.  Se o fantasma na tela Game Select ficar rosa e voc√™ ouvir um som, tudo ser√° feito corretamente.  Agora, se voc√™ escolher o jogo Ms.  Pac-Man, ent√£o voc√™ jogar√° o Pac-Man original. <br><br>  Em alguns hardwares gr√°ficos, voc√™ pode usar truques com linhas de varredura para criar uma m√°gica poderosa.  Por exemplo, em um sistema que pode exibir apenas oito sprites, mais pode ser alcan√ßado, embora com o custo do tempo do processador e flexibilidade reduzida. <br><br>  Nesse sentido, o console Atari VCS / 2600 √© mais digno de nota, porque a maioria dos gr√°ficos do sistema foram criados usando truques com linhas de varredura.  Leia mais sobre essas t√©cnicas no livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>Racing The Beam</em></a> . <br><br>  <em>Fontes:</em> <em><br></em>  <em>Dossi√™ do Pac-Man: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://www.gamasutra.com/view/feature/3938/the_pacman_dossier.php?print=1</a></em> <em><br></em>  <em>Canal do YouTube de Jamie Pittman: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.youtube.com/user/jameypittman/videos</a></em> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt403115/">https://habr.com/ru/post/pt403115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt403101/index.html">O que considerar ao escolher uma fonte de alimenta√ß√£o ininterrupta</a></li>
<li><a href="../pt403105/index.html">Os carregadores Rombica fornecem energia de tudo, de notebooks a helic√≥pteros</a></li>
<li><a href="../pt403107/index.html">7 aplicativos m√≥veis da R√∫ssia, apareceu devido ao crowdfunding</a></li>
<li><a href="../pt403109/index.html">Um script foi desenvolvido para roubar um c√≥digo PIN por meio de um navegador de smartphone</a></li>
<li><a href="../pt403113/index.html">Processadores Intel Xeon, linha primavera-ver√£o 2017</a></li>
<li><a href="../pt403117/index.html">Vis√£o geral da impress√£o 3D da ESUN</a></li>
<li><a href="../pt403121/index.html">Fones de ouvido e fones de ouvido seguros para ciclistas</a></li>
<li><a href="../pt403123/index.html">Se voc√™ realmente quiser, pode encontrar algu√©m</a></li>
<li><a href="../pt403125/index.html">Polar em cartesiano ou o que o anel de moedas</a></li>
<li><a href="../pt403127/index.html">Caso pr√°tico: por que o servi√ßo de negocia√ß√£o de c√¢mbio pode precisar de uma blockchain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>