<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏼 🚓 🍗 Guia: como criar um bot simples para JS Telegram para iniciantes em programação 🚃 👋🏾 👩🏾‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comecei a mergulhar no mundo da TI apenas três semanas atrás. Sério, três semanas atrás, eu nem entendia a sintaxe HTML, e meu conhecimento de linguag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guia: como criar um bot simples para JS Telegram para iniciantes em programação</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447006/">  Comecei a mergulhar no mundo da TI apenas três semanas atrás.  Sério, três semanas atrás, eu nem entendia a sintaxe HTML, e meu conhecimento de linguagens de programação terminou com um currículo escolar de Pascal de 10 anos.  No entanto, eu decidi ir para o campo de TI, para cujos filhos seria bom fazer um bot.  Eu decidi que não era tão difícil. <br><br>  Isso iniciou uma longa jornada, na qual eu: <br><br><ul><li>  implantou um servidor em nuvem com o Ubuntu, </li><li>  registrado no github </li><li>  Aprendeu a sintaxe básica do JavaScript </li><li>  leia uma tonelada de artigos em inglês e russo, </li><li>  finalmente fez um bot </li><li>  escreveu este artigo finalmente. </li></ul><br>  O resultado final ficou assim: <br><br><img src="https://habrastorage.org/webt/qi/72/kz/qi72kzkdbw7i_mk0bry9i9bcrew.png"><br><a name="habracut"></a><br>  Eu direi imediatamente, este é um artigo para iniciantes - apenas para entender como fazer coisas elementares a partir do ponto zero. <br><br>  E também - para programadores avançados - apenas para fazê-los rir um pouco. <br><br>  <b>1. Como escrever código em JS?</b> <br><br>  Entendi que vale a pena começar pelo menos para entender a sintaxe do idioma.  A escolha recaiu sobre o JavaScript, simplesmente porque o próximo passo para mim foi criar um aplicativo no ReactNative.  Comecei com um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">curso</a> na Codecademy e fiquei encantado.  Os primeiros 7 dias são gratuitos.  Projetos reais.  Eu recomendo.  Passando, demorou cerca de 25 horas.  De fato, longe de tudo isso foi útil.  É assim que a estrutura do curso se parece e o primeiro bloco é detalhado. <br><br><img src="https://habrastorage.org/webt/cv/et/v9/cvetv9w-mfsa3oyb4rjzqhsaphu.png"><br><br>  <b>2. Como registrar um bot?</b> <br><br>  No começo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este artigo</a> do blog de um certo Archakov me ajudou muito.  Ele mastiga desde o começo.  Mas o principal é que existe uma instrução para registrar um bot.  Não vou escrever melhor e, como essa é a parte mais fácil, vou escrever a essência.  Você precisa criar um bot e obter sua API.  Isso é feito através de outro bot - @BotFather.  Encontre-o no telegrama, escreva-o, siga um caminho simples e obtenha (salve!) Uma chave de API (este é um conjunto de números e letras).  Foi útil mais tarde. <br><br><img src="https://habrastorage.org/webt/se/yv/pj/seyvpjcxg3cv4s_vcagqxyyhtwq.png"><br><br>  <b>3. Como é o código bot?</b> <br><cut><br>  Após um longo estudo dos artigos, percebi que vale a pena usar algum tipo de biblioteca (código de terceiros no formato de módulo) para não incomodar o aprendizado da API do telegrama e criar grandes partes de código do zero.  Eu encontrei a estrutura do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">telegraf</a> que precisava estar de alguma forma conectada a algo usando npm ou fios.  Foi assim que entendi no que consiste a implantação do bot.  Ria aqui.  Eu não ficarei ofendido.  Os seguintes exemplos da parte inferior da página me ajudaram principalmente durante a criação subsequente do bot: <br><br><img src="https://habrastorage.org/webt/j_/n_/pr/j_n_praw6dpswa0q0veu5bj1osm.png"><br><br>  <b>3. Como criar seu próprio servidor em nuvem por 100 rublos</b> <br><br>  Após uma longa pesquisa, percebi que o comando 'npm' da imagem acima se refere à linha de comando.  A linha de comando está em toda parte, mas para executá-la, você precisa instalar o NodePackageManager.  O problema era que eu estava programando no PixelBook com o ChromeOS.  Vou pular um grande bloco aqui sobre como eu aprendi Linux - para a maioria, isso é vazio e desnecessário.  Se você possui um Windows ou MacBook, já possui um console. <br><br>  Em poucas palavras, instalei o Linux através do Crostini. <br><br>  No entanto, no processo, percebi que, para o bot funcionar constantemente (e não apenas quando o computador está ligado), preciso de um servidor em nuvem.  Eu escolhi o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vscale.io</a> , joguei 100 rublos, comprei o servidor Ubuntu mais barato ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">veja a figura</a> ). <br><br><img src="https://habrastorage.org/webt/rs/ad/jn/rsadjnqc7eok_5wps7dqbftw9yo.png"><br><br>  <b>4. Como preparar um servidor para iniciar um bot</b> <br><br>  Depois disso, percebi que precisava criar algum tipo de pasta no servidor em que colocarei o arquivo com o texto do código.  Para fazer isso, no console (execute diretamente no site através do botão "Abrir console"), dirigi <br><br><pre><code class="plaintext hljs">mkdir bot</code> </pre> <br>  bot - este se tornou o nome da minha pasta.  Depois disso, instalei o npm e o Node.js, o que me permitirá executar o código dos arquivos com a permissão * .js <br><br><pre> <code class="plaintext hljs">sudo apt update sudo apt install nodejs sudo apt install npm</code> </pre> <br>  Eu recomendo que, nesta fase, configure a conexão com o servidor através do seu console.  Aqui está a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instrução:</a> Isso permitirá que você trabalhe com o servidor diretamente através do console do seu computador. <br><br>  <b>5. Como escrever o código do primeiro bot.</b> <br><br>  E agora é apenas uma descoberta para mim.  Qualquer programa é apenas linhas de texto.  Eles podem ser conduzidos em qualquer lugar, salvos com a extensão desejada e tudo.  Você é linda  Eu usei o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Atom</a> , mas, na verdade, você pode simplesmente escrever no bloco de notas padrão.  O principal é salvar o arquivo na extensão desejada posteriormente.  Isto é como escrever texto no Word e salvar. <br><br>  Criei um novo arquivo, no qual inseri o código do exemplo na página telegraf e salvei no arquivo index.js (não é necessário nomeá-lo dessa maneira, mas é aceito).  Importante - em vez de BOT_TOKEN, insira sua chave API do segundo parágrafo. <br><br><pre> <code class="plaintext hljs">const Telegraf = require('telegraf') const bot = new Telegraf(process.env.BOT_TOKEN) bot.start((ctx) =&gt; ctx.reply('Welcome!')) bot.help((ctx) =&gt; ctx.reply('Send me a sticker')) bot.on('sticker', (ctx) =&gt; ctx.reply('')) bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there')) bot.launch()</code> </pre> <br>  <b>6. Como fazer upload de código para o servidor via github</b> <br><br>  Agora eu precisava, de alguma forma, fazer upload desse código no servidor e executá-lo.  Para mim, isso se tornou um desafio.  Como resultado, após uma longa provação, percebi que seria mais fácil criar um arquivo no github, que chama para atualizar o código usando o comando no console.  Registrei uma conta no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> e fiz um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">novo projeto</a> , onde carreguei o arquivo.  Depois disso, eu precisava entender como configurar o upload de arquivos da minha conta (aberto!) Para o servidor na pasta bot (se você o deixou de repente, basta escrever cd bot). <br><br>  <b>7. Como fazer upload de arquivos para o servidor através do github parte 2</b> <br><br>  Eu precisava colocar no servidor um programa que baixe arquivos do git.  Coloquei o git no servidor, levando-o ao console <br><br><pre> <code class="plaintext hljs">apt-get install git</code> </pre> <br>  Depois disso, precisei configurar o upload do arquivo.  Para fazer isso, eu martelei na linha de comando <br><br><pre> <code class="plaintext hljs">git clone git://github.com/b0tank/bot.git bot</code> </pre><br>  Como resultado, tudo do projeto foi carregado no servidor.  O erro nesta fase foi que eu essencialmente criei uma segunda pasta dentro da pasta bot já existente.  O endereço antes do arquivo parecia * / bot / bot / index.js <br><br>  Eu decidi negligenciar esse problema. <br><br>  E para carregar a biblioteca telegraf, solicitada na primeira linha de código, direcione um comando para o console. <br><br><pre> <code class="plaintext hljs">npm install telegraf</code> </pre> <br>  <b>8. Como iniciar um bot</b> <br><br>  Para fazer isso, enquanto estiver na pasta com o arquivo (para alternar de pasta para pasta no console - execute o comando do formato <code>cd bot</code> para garantir que você esteja onde precisa de um comando que exiba no console todos os arquivos e pastas que estão lá <code>ls -a</code> <br><br>  Para rodar, entrei no console <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre><br>  Se não houver erro - está tudo bem, o bot funciona.  Procure por ele no telegrama.  Se houver um erro - aplique seu conhecimento a partir de 1 ponto. <br><br>  <b>9. Como iniciar um bot em segundo plano</b> <br><br>  Rapidamente, você perceberá que o bot só funciona quando você está sentado no console.  Para resolver esse problema, usei o comando <br><br><pre> <code class="plaintext hljs">screen</code> </pre> <br>  Depois disso, uma tela com algum texto será exibida.  Isso significa que tudo está bem.  Você está em um servidor virtual em um servidor em nuvem.  Para entender melhor como tudo isso funciona, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui está um artigo</a> .  Basta ir à sua pasta e dirigir o comando para iniciar o bot <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre> <br>  <b>10. Como o bot funciona e como expandir sua funcionalidade</b> <br><br>  O que nosso bot do exemplo pode fazer?  Ele pode <br><br><pre> <code class="plaintext hljs">bot.start((ctx) =&gt; ctx.reply('Welcome!'))</code> </pre> <br>  diga "Bem-vindo!"  no momento do início (tente alterar o texto) <br><br><pre> <code class="plaintext hljs">bot.help((ctx) =&gt; ctx.reply('Send me a sticker'))</code> </pre> <br>  em resposta ao comando / ajuda padrão, envie uma mensagem "Envie-me um adesivo" <br><br><pre> <code class="plaintext hljs">bot.on('sticker', (ctx) =&gt; ctx.reply(''))</code> </pre> <br>  em resposta ao adesivo envie aprovação <br><br><pre> <code class="plaintext hljs">bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there'))</code> </pre> <br>  responda "Olá" se eles disserem 'oi' <br>  bot.launch () <br><br><img src="https://habrastorage.org/webt/af/dy/rw/afdyrw8ffn4et_wcaqhpqvblxcc.png"><br><br>  Se você olhar o código no <a href="">github</a> , rapidamente perceberá que não fui muito longe dessa funcionalidade.  O que está sendo usado ativamente é a função <code>ctx.replyWithPhoto</code> permite enviar uma determinada foto ou gif em resposta a um texto específico. <br><br>  Uma parte significativa do código foi escrita por crianças de 11 a 13 anos, às quais dei acesso ao bot.  Eles apresentaram seu caso de usuário.  Eu acho que é fácil determinar qual parte foi feita por eles. <br><br>  Por exemplo, a mensagem "jake" vem com um gif com um personagem famoso do desenho animado Adventure Time. <br><br><img src="https://habrastorage.org/webt/d_/uw/7l/d_uw7lowyis6kiupnbc_vb5_cfs.png"><br><br>  Para desenvolver ainda mais o bot, para conectar o teclado, você precisa ver exemplos, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">daqui</a> <br><br>  <b>11. Como atualizar o código e reiniciar o bot</b> <br><br>  Não esqueça que você precisa atualizar o código não apenas no github, mas também no servidor.  Para fazer isso é simples - pare o bot (pressione ctrl + c), <br><br>  - entre no console, estando na pasta de destino, <code>git pull</code> <br>  - inicie o bot novamente com o <code>node index.js</code> <br><br>  <b>Fim</b> <br><br>  Muitas das coisas descritas neste arquivo serão super óbvias para programadores avançados.  No entanto, quando eu mesmo tentei de uma só vez pular o abismo para o mundo dos bots, realmente senti falta de um guia.  Um guia no qual coisas óbvias e simples para qualquer especialista em TI não são negligenciadas. <br><br>  No futuro, planejo um post sobre como fazer meu primeiro aplicativo ReactNative no mesmo estilo, inscreva-se! </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447006/">https://habr.com/ru/post/pt447006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446996/index.html">O método Pomodoro não é tão legal quanto poderia ser</a></li>
<li><a href="../pt446998/index.html">Iniciando o SAP GUI a partir de um navegador</a></li>
<li><a href="../pt447000/index.html">Guerra de formatos de áudio: 10 materiais em mídia digital e analógica</a></li>
<li><a href="../pt447002/index.html">Excursão de coworking de fotos no Cabinet Lounge</a></li>
<li><a href="../pt447004/index.html">Cão de guarda universal em ATtiny13</a></li>
<li><a href="../pt447008/index.html">Como assumir o controle de sua infraestrutura de rede. Sumário</a></li>
<li><a href="../pt447010/index.html">Não por muito tempo a música tocou ... ou como o OS Elbrus nunca se tornou livre</a></li>
<li><a href="../pt447014/index.html">Estruturas de ref descartáveis ​​em C # 8.0</a></li>
<li><a href="../pt447016/index.html">25 anos depois: uma entrevista com Linus Torvalds</a></li>
<li><a href="../pt447018/index.html">Enriquecimento quântico em uma interpretação multi-mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>