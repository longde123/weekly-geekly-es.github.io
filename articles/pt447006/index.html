<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèº üöì üçó Guia: como criar um bot simples para JS Telegram para iniciantes em programa√ß√£o üöÉ üëãüèæ üë©üèæ‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comecei a mergulhar no mundo da TI apenas tr√™s semanas atr√°s. S√©rio, tr√™s semanas atr√°s, eu nem entendia a sintaxe HTML, e meu conhecimento de linguag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guia: como criar um bot simples para JS Telegram para iniciantes em programa√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447006/">  Comecei a mergulhar no mundo da TI apenas tr√™s semanas atr√°s.  S√©rio, tr√™s semanas atr√°s, eu nem entendia a sintaxe HTML, e meu conhecimento de linguagens de programa√ß√£o terminou com um curr√≠culo escolar de Pascal de 10 anos.  No entanto, eu decidi ir para o campo de TI, para cujos filhos seria bom fazer um bot.  Eu decidi que n√£o era t√£o dif√≠cil. <br><br>  Isso iniciou uma longa jornada, na qual eu: <br><br><ul><li>  implantou um servidor em nuvem com o Ubuntu, </li><li>  registrado no github </li><li>  Aprendeu a sintaxe b√°sica do JavaScript </li><li>  leia uma tonelada de artigos em ingl√™s e russo, </li><li>  finalmente fez um bot </li><li>  escreveu este artigo finalmente. </li></ul><br>  O resultado final ficou assim: <br><br><img src="https://habrastorage.org/webt/qi/72/kz/qi72kzkdbw7i_mk0bry9i9bcrew.png"><br><a name="habracut"></a><br>  Eu direi imediatamente, este √© um artigo para iniciantes - apenas para entender como fazer coisas elementares a partir do ponto zero. <br><br>  E tamb√©m - para programadores avan√ßados - apenas para faz√™-los rir um pouco. <br><br>  <b>1. Como escrever c√≥digo em JS?</b> <br><br>  Entendi que vale a pena come√ßar pelo menos para entender a sintaxe do idioma.  A escolha recaiu sobre o JavaScript, simplesmente porque o pr√≥ximo passo para mim foi criar um aplicativo no ReactNative.  Comecei com um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">curso</a> na Codecademy e fiquei encantado.  Os primeiros 7 dias s√£o gratuitos.  Projetos reais.  Eu recomendo.  Passando, demorou cerca de 25 horas.  De fato, longe de tudo isso foi √∫til.  √â assim que a estrutura do curso se parece e o primeiro bloco √© detalhado. <br><br><img src="https://habrastorage.org/webt/cv/et/v9/cvetv9w-mfsa3oyb4rjzqhsaphu.png"><br><br>  <b>2. Como registrar um bot?</b> <br><br>  No come√ßo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este artigo</a> do blog de um certo Archakov me ajudou muito.  Ele mastiga desde o come√ßo.  Mas o principal √© que existe uma instru√ß√£o para registrar um bot.  N√£o vou escrever melhor e, como essa √© a parte mais f√°cil, vou escrever a ess√™ncia.  Voc√™ precisa criar um bot e obter sua API.  Isso √© feito atrav√©s de outro bot - @BotFather.  Encontre-o no telegrama, escreva-o, siga um caminho simples e obtenha (salve!) Uma chave de API (este √© um conjunto de n√∫meros e letras).  Foi √∫til mais tarde. <br><br><img src="https://habrastorage.org/webt/se/yv/pj/seyvpjcxg3cv4s_vcagqxyyhtwq.png"><br><br>  <b>3. Como √© o c√≥digo bot?</b> <br><cut><br>  Ap√≥s um longo estudo dos artigos, percebi que vale a pena usar algum tipo de biblioteca (c√≥digo de terceiros no formato de m√≥dulo) para n√£o incomodar o aprendizado da API do telegrama e criar grandes partes de c√≥digo do zero.  Eu encontrei a estrutura do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">telegraf</a> que precisava estar de alguma forma conectada a algo usando npm ou fios.  Foi assim que entendi no que consiste a implanta√ß√£o do bot.  Ria aqui.  Eu n√£o ficarei ofendido.  Os seguintes exemplos da parte inferior da p√°gina me ajudaram principalmente durante a cria√ß√£o subsequente do bot: <br><br><img src="https://habrastorage.org/webt/j_/n_/pr/j_n_praw6dpswa0q0veu5bj1osm.png"><br><br>  <b>3. Como criar seu pr√≥prio servidor em nuvem por 100 rublos</b> <br><br>  Ap√≥s uma longa pesquisa, percebi que o comando 'npm' da imagem acima se refere √† linha de comando.  A linha de comando est√° em toda parte, mas para execut√°-la, voc√™ precisa instalar o NodePackageManager.  O problema era que eu estava programando no PixelBook com o ChromeOS.  Vou pular um grande bloco aqui sobre como eu aprendi Linux - para a maioria, isso √© vazio e desnecess√°rio.  Se voc√™ possui um Windows ou MacBook, j√° possui um console. <br><br>  Em poucas palavras, instalei o Linux atrav√©s do Crostini. <br><br>  No entanto, no processo, percebi que, para o bot funcionar constantemente (e n√£o apenas quando o computador est√° ligado), preciso de um servidor em nuvem.  Eu escolhi o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vscale.io</a> , joguei 100 rublos, comprei o servidor Ubuntu mais barato ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">veja a figura</a> ). <br><br><img src="https://habrastorage.org/webt/rs/ad/jn/rsadjnqc7eok_5wps7dqbftw9yo.png"><br><br>  <b>4. Como preparar um servidor para iniciar um bot</b> <br><br>  Depois disso, percebi que precisava criar algum tipo de pasta no servidor em que colocarei o arquivo com o texto do c√≥digo.  Para fazer isso, no console (execute diretamente no site atrav√©s do bot√£o "Abrir console"), dirigi <br><br><pre><code class="plaintext hljs">mkdir bot</code> </pre> <br>  bot - este se tornou o nome da minha pasta.  Depois disso, instalei o npm e o Node.js, o que me permitir√° executar o c√≥digo dos arquivos com a permiss√£o * .js <br><br><pre> <code class="plaintext hljs">sudo apt update sudo apt install nodejs sudo apt install npm</code> </pre> <br>  Eu recomendo que, nesta fase, configure a conex√£o com o servidor atrav√©s do seu console.  Aqui est√° a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instru√ß√£o:</a> Isso permitir√° que voc√™ trabalhe com o servidor diretamente atrav√©s do console do seu computador. <br><br>  <b>5. Como escrever o c√≥digo do primeiro bot.</b> <br><br>  E agora √© apenas uma descoberta para mim.  Qualquer programa √© apenas linhas de texto.  Eles podem ser conduzidos em qualquer lugar, salvos com a extens√£o desejada e tudo.  Voc√™ √© linda  Eu usei o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Atom</a> , mas, na verdade, voc√™ pode simplesmente escrever no bloco de notas padr√£o.  O principal √© salvar o arquivo na extens√£o desejada posteriormente.  Isto √© como escrever texto no Word e salvar. <br><br>  Criei um novo arquivo, no qual inseri o c√≥digo do exemplo na p√°gina telegraf e salvei no arquivo index.js (n√£o √© necess√°rio nome√°-lo dessa maneira, mas √© aceito).  Importante - em vez de BOT_TOKEN, insira sua chave API do segundo par√°grafo. <br><br><pre> <code class="plaintext hljs">const Telegraf = require('telegraf') const bot = new Telegraf(process.env.BOT_TOKEN) bot.start((ctx) =&gt; ctx.reply('Welcome!')) bot.help((ctx) =&gt; ctx.reply('Send me a sticker')) bot.on('sticker', (ctx) =&gt; ctx.reply('')) bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there')) bot.launch()</code> </pre> <br>  <b>6. Como fazer upload de c√≥digo para o servidor via github</b> <br><br>  Agora eu precisava, de alguma forma, fazer upload desse c√≥digo no servidor e execut√°-lo.  Para mim, isso se tornou um desafio.  Como resultado, ap√≥s uma longa prova√ß√£o, percebi que seria mais f√°cil criar um arquivo no github, que chama para atualizar o c√≥digo usando o comando no console.  Registrei uma conta no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> e fiz um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">novo projeto</a> , onde carreguei o arquivo.  Depois disso, eu precisava entender como configurar o upload de arquivos da minha conta (aberto!) Para o servidor na pasta bot (se voc√™ o deixou de repente, basta escrever cd bot). <br><br>  <b>7. Como fazer upload de arquivos para o servidor atrav√©s do github parte 2</b> <br><br>  Eu precisava colocar no servidor um programa que baixe arquivos do git.  Coloquei o git no servidor, levando-o ao console <br><br><pre> <code class="plaintext hljs">apt-get install git</code> </pre> <br>  Depois disso, precisei configurar o upload do arquivo.  Para fazer isso, eu martelei na linha de comando <br><br><pre> <code class="plaintext hljs">git clone git://github.com/b0tank/bot.git bot</code> </pre><br>  Como resultado, tudo do projeto foi carregado no servidor.  O erro nesta fase foi que eu essencialmente criei uma segunda pasta dentro da pasta bot j√° existente.  O endere√ßo antes do arquivo parecia * / bot / bot / index.js <br><br>  Eu decidi negligenciar esse problema. <br><br>  E para carregar a biblioteca telegraf, solicitada na primeira linha de c√≥digo, direcione um comando para o console. <br><br><pre> <code class="plaintext hljs">npm install telegraf</code> </pre> <br>  <b>8. Como iniciar um bot</b> <br><br>  Para fazer isso, enquanto estiver na pasta com o arquivo (para alternar de pasta para pasta no console - execute o comando do formato <code>cd bot</code> para garantir que voc√™ esteja onde precisa de um comando que exiba no console todos os arquivos e pastas que est√£o l√° <code>ls -a</code> <br><br>  Para rodar, entrei no console <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre><br>  Se n√£o houver erro - est√° tudo bem, o bot funciona.  Procure por ele no telegrama.  Se houver um erro - aplique seu conhecimento a partir de 1 ponto. <br><br>  <b>9. Como iniciar um bot em segundo plano</b> <br><br>  Rapidamente, voc√™ perceber√° que o bot s√≥ funciona quando voc√™ est√° sentado no console.  Para resolver esse problema, usei o comando <br><br><pre> <code class="plaintext hljs">screen</code> </pre> <br>  Depois disso, uma tela com algum texto ser√° exibida.  Isso significa que tudo est√° bem.  Voc√™ est√° em um servidor virtual em um servidor em nuvem.  Para entender melhor como tudo isso funciona, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui est√° um artigo</a> .  Basta ir √† sua pasta e dirigir o comando para iniciar o bot <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre> <br>  <b>10. Como o bot funciona e como expandir sua funcionalidade</b> <br><br>  O que nosso bot do exemplo pode fazer?  Ele pode <br><br><pre> <code class="plaintext hljs">bot.start((ctx) =&gt; ctx.reply('Welcome!'))</code> </pre> <br>  diga "Bem-vindo!"  no momento do in√≠cio (tente alterar o texto) <br><br><pre> <code class="plaintext hljs">bot.help((ctx) =&gt; ctx.reply('Send me a sticker'))</code> </pre> <br>  em resposta ao comando / ajuda padr√£o, envie uma mensagem "Envie-me um adesivo" <br><br><pre> <code class="plaintext hljs">bot.on('sticker', (ctx) =&gt; ctx.reply(''))</code> </pre> <br>  em resposta ao adesivo envie aprova√ß√£o <br><br><pre> <code class="plaintext hljs">bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there'))</code> </pre> <br>  responda "Ol√°" se eles disserem 'oi' <br>  bot.launch () <br><br><img src="https://habrastorage.org/webt/af/dy/rw/afdyrw8ffn4et_wcaqhpqvblxcc.png"><br><br>  Se voc√™ olhar o c√≥digo no <a href="">github</a> , rapidamente perceber√° que n√£o fui muito longe dessa funcionalidade.  O que est√° sendo usado ativamente √© a fun√ß√£o <code>ctx.replyWithPhoto</code> permite enviar uma determinada foto ou gif em resposta a um texto espec√≠fico. <br><br>  Uma parte significativa do c√≥digo foi escrita por crian√ßas de 11 a 13 anos, √†s quais dei acesso ao bot.  Eles apresentaram seu caso de usu√°rio.  Eu acho que √© f√°cil determinar qual parte foi feita por eles. <br><br>  Por exemplo, a mensagem "jake" vem com um gif com um personagem famoso do desenho animado Adventure Time. <br><br><img src="https://habrastorage.org/webt/d_/uw/7l/d_uw7lowyis6kiupnbc_vb5_cfs.png"><br><br>  Para desenvolver ainda mais o bot, para conectar o teclado, voc√™ precisa ver exemplos, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">daqui</a> <br><br>  <b>11. Como atualizar o c√≥digo e reiniciar o bot</b> <br><br>  N√£o esque√ßa que voc√™ precisa atualizar o c√≥digo n√£o apenas no github, mas tamb√©m no servidor.  Para fazer isso √© simples - pare o bot (pressione ctrl + c), <br><br>  - entre no console, estando na pasta de destino, <code>git pull</code> <br>  - inicie o bot novamente com o <code>node index.js</code> <br><br>  <b>Fim</b> <br><br>  Muitas das coisas descritas neste arquivo ser√£o super √≥bvias para programadores avan√ßados.  No entanto, quando eu mesmo tentei de uma s√≥ vez pular o abismo para o mundo dos bots, realmente senti falta de um guia.  Um guia no qual coisas √≥bvias e simples para qualquer especialista em TI n√£o s√£o negligenciadas. <br><br>  No futuro, planejo um post sobre como fazer meu primeiro aplicativo ReactNative no mesmo estilo, inscreva-se! </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447006/">https://habr.com/ru/post/pt447006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446996/index.html">O m√©todo Pomodoro n√£o √© t√£o legal quanto poderia ser</a></li>
<li><a href="../pt446998/index.html">Iniciando o SAP GUI a partir de um navegador</a></li>
<li><a href="../pt447000/index.html">Guerra de formatos de √°udio: 10 materiais em m√≠dia digital e anal√≥gica</a></li>
<li><a href="../pt447002/index.html">Excurs√£o de coworking de fotos no Cabinet Lounge</a></li>
<li><a href="../pt447004/index.html">C√£o de guarda universal em ATtiny13</a></li>
<li><a href="../pt447008/index.html">Como assumir o controle de sua infraestrutura de rede. Sum√°rio</a></li>
<li><a href="../pt447010/index.html">N√£o por muito tempo a m√∫sica tocou ... ou como o OS Elbrus nunca se tornou livre</a></li>
<li><a href="../pt447014/index.html">Estruturas de ref descart√°veis ‚Äã‚Äãem C # 8.0</a></li>
<li><a href="../pt447016/index.html">25 anos depois: uma entrevista com Linus Torvalds</a></li>
<li><a href="../pt447018/index.html">Enriquecimento qu√¢ntico em uma interpreta√ß√£o multi-mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>