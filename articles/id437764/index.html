<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï§ üö¶ üìó OpenSceneGraph: Mengelola Windows dan Mode Tampilan üçû üë©üèæ‚Äçüöí üëú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendahuluan 
 Kami telah mengatakan bahwa kelas osg :: Camera mengelola konteks grafis OpenGL yang terkait. Konteks grafis merangkum informasi tentang...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenSceneGraph: Mengelola Windows dan Mode Tampilan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437764/"><img src="https://habrastorage.org/webt/py/ks/3w/pyks3wlvjf_zfef-sqocutbnimk.jpeg" alt="gambar"><br><h1>  Pendahuluan </h1><br>  Kami telah mengatakan bahwa kelas osg :: Camera mengelola konteks grafis OpenGL yang terkait.  Konteks grafis merangkum informasi tentang bagaimana dan di mana objek digambar dan atribut status apa yang diterapkan padanya.  Konteks dipahami sebagai jendela grafis, atau lebih tepatnya area kliennya, atau buffer piksel OpenGL yang menyimpan data piksel tanpa mentransfernya ke frame buffer. <br><br>  OSG menggunakan kelas osg :: GraphicsContext untuk mewakili konteks grafis abstrak, dan kelas osg :: GraphicsWindow untuk mewakili jendela grafis abstrak.  Yang terakhir memiliki metode getEventQueue () untuk mengelola acara dari elemen GUI.  Secara umum, konteks grafis adalah konsep platform-spesifik, sehingga OSG menangani sebagian besar pekerjaan membuat jendela dan mengaitkan konteksnya dengan konteks OpenGL.  Ketika Anda memanggil metode createGraphicsContext () dari kelas osg :: GraphicsContext (), kode yang diperlukan (dan ada banyak, percayalah!) Akan secara otomatis dihasilkan oleh preprocessor, tergantung pada platform.  Yang harus kita lakukan adalah memberikan argumen ke metode tipe osg :: GraphicsContex :: Traits ini, yang berisi deskripsi tentang jendela mana yang ingin kita dapatkan. <br><a name="habracut"></a><br><h1>  1. Kelas osg :: DisplaySettings </h1><br>  OSG memungkinkan pengembang untuk mengelola pengaturan tampilan global, atas dasar yang diberikan kamera, pemirsa dan elemen adegan.  Untuk ini, pola singleton digunakan, yaitu, objek unik yang berisi pengaturan ini, diimplementasikan dalam bentuk kelas osg :: DisplaySettings, yang dapat diakses dari mana saja dalam program ini.  Karena itu, dari aplikasi kita, kita dapat mengubah pengaturan ini kapan saja. <br><br><pre><code class="cpp hljs">osg::DisplaySettings *ds = osg::DisplaySettings::instance();</code> </pre> <br>  Singleton osg :: DisplaySettings berisi pengaturan yang berlaku untuk perangkat rendering yang baru dibuat, konteks OpenGL dari jendela grafis.  Anda dapat memvariasikan parameter berikut: <br><br><ol><li>  setDoubleBuffer () - aktifkan / nonaktifkan buffering ganda.  Diaktifkan secara default. <br></li><li>  setDepthBuffer () - mengaktifkan / menonaktifkan buffer kedalaman.  Diaktifkan secara default. <br></li><li>  Atur lebar buffer alpha, buffer stensil, buffer akumulasi dengan menggunakan metode seperti setMinimumNumAlphaBits ().  Secara default, semua parameter adalah 0. <br></li><li>  Izin untuk menggunakan anti-aliasing dan kedalamannya menggunakan metode setNumMultiSamples ().  Standarnya adalah 0. <br></li><li>  Aktifkan mode stereo.  Dinonaktifkan secara default. <br></li></ol><br>  Pertimbangkan penggunaan singleton ini pada contoh smoothing <br><br><div class="spoiler">  <b class="spoiler_title">Contoh tunggal :: DisplaySettings</b> <div class="spoiler_text">  <strong>main.h</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osgDB/ReadFile&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::DisplaySettings::instance()-&gt;setNumMultiSamples(6); osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::Node&gt; model = osgDB::readNodeFile("../data/cessna.osg"); osgViewer::Viewer viewer; viewer.setSceneData(model.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br>  Penting di sini hanya satu tantangan. <br><br><pre> <code class="cpp hljs">osg::DisplaySettings::instance()-&gt;setNumMultiSamples(<span class="hljs-number"><span class="hljs-number">6</span></span>);</code> </pre><br>  - mengatur parameter smoothing, yang dapat mengambil nilai 2, 4 dan 6, tergantung pada perangkat grafis yang digunakan.  Perhatikan bagaimana bilah sekrup cessna terlihat tanpa menerapkan perataan <br><br><img src="https://habrastorage.org/webt/4y/nr/1p/4ynr1p8ia9knpagauohb6_fe2-g.png"><br><br>  dan setelah penerapannya <br><br><img src="https://habrastorage.org/webt/yq/4b/og/yq4bog1qdmngwxpsij7ujponxzk.png"><br><br><h1>  2. Beralih ke mode jendela </h1><br>  Kelas osgViewer :: Viewer dapat dengan cepat dikonfigurasi ulang untuk ditampilkan dalam mode berjendela.  Seperti yang Anda perhatikan, semua contoh kami sebelumnya ditampilkan dalam layar penuh.  Untuk mengalihkan penampil ke mode berjendela, ada metode setUpViewInWindow (), yang berfungsi sebagai parameter koordinat sudut kiri atas jendela, lebar dan tinggi pikselnya. <br><br><pre> <code class="cpp hljs">viewer.setUpViewInWindow(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">800</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>);</code> </pre><br>  Secara opsional, metode ini menerima parameter kelima - jumlah layar tempat jendela ditampilkan, jika Anda memiliki lebih dari satu monitor.  Tentunya bekerja dengan beberapa monitor di Windows, Anda mengamati bahwa adegan menyebar ke semua monitor dalam mode layar penuh (ini tidak diamati di Linux). <br><br>  Selain itu, dalam pengaturan proyek, Anda dapat mengatur variabel lingkungan OSG_WINDOW dengan cara ini <br><br><img src="https://habrastorage.org/webt/-5/yg/ge/-5yggeqzivtjkymngxq3xk318qm.png"><br><br>  yang akan setara dengan memanggil setUpViewInWindow (), yang dalam hal ini mungkin tidak dieksekusi. <br><br><img src="https://habrastorage.org/webt/2z/z_/px/2zz_pxckvywsn1c3hpebbwwj77e.png"><br><br>  Untuk menentukan secara eksplisit layar tempat pemirsa harus ditampilkan dalam mode layar penuh, Anda dapat menggunakan metode setUpViewOnSingleScreen () dengan menentukan nomor layar sebagai parameter (0 secara default). <br><br>  OSG juga mendukung tampilan bulat demo.  Anda dapat menggunakan metode setUpViewFor3DSphericalDisplay () untuk menyesuaikan tampilan pada tampilan seperti itu. <br><br><h1>  3. Penampil komposit </h1><br>  Kelas osgViewer :: Viewer mengontrol tampilan tunggal yang menampilkan grafik adegan tunggal.  Selain itu ada kelas osgViewer :: CompositeViewer yang mendukung beberapa tampilan dan beberapa adegan.  Ini memiliki metode run (), frame () dan done () yang sama untuk mengendalikan proses rendering, tetapi ia memungkinkan Anda untuk menambah dan menghapus tampilan independen menggunakan metode addView () dan removeView (), serta mendapatkan pandangan berdasarkan indeks mereka menggunakan metode getView ().  Objek tampilan dijelaskan oleh kelas osgViewer :: View. <br><br>  Kelas osgViewer :: View adalah kelas dasar untuk kelas osgViewer :: Viewer.  Ini memungkinkan Anda untuk menambahkan simpul root dengan data pemandangan, manipulator kamera dan pengendali acara.  Perbedaan utama antara kelas ini (tampilan) dan kelas penampil adalah bahwa ia tidak memungkinkan rendering adegan dengan panggilan run () atau frame ().  Tampilan menambahkan skenario yang khas terlihat seperti ini <br><br><pre> <code class="cpp hljs">osgViewer::CompositeViewer multiviewer; multiviewer.addView( view );</code> </pre><br>  Penampil komposit memungkinkan Anda untuk menampilkan satu adegan di sudut yang berbeda, menampilkan sudut ini di jendela yang berbeda.  Ini juga memungkinkan Anda untuk menampilkan adegan independen di berbagai jendela.  Mari kita menulis contoh sederhana menggunakan penampil komposit <br><br><div class="spoiler">  <b class="spoiler_title">Contoh komposit</b> <div class="spoiler_text">  <strong>main.h</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osgDB/ReadFile&gt; #include &lt;osgViewer/CompositeViewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ osgViewer::View *createView(int x, int y, int w, int h, osg::Node *scene) { osg::ref_ptr&lt;osgViewer::View&gt; view = new osgViewer::View; view-&gt;setSceneData(scene); view-&gt;setUpViewInWindow(x, y, w, h); return view.release(); } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::ref_ptr&lt;osg::Node&gt; model1 = osgDB::readNodeFile("../data/cessna.osg"); osg::ref_ptr&lt;osg::Node&gt; model2 = osgDB::readNodeFile("../data/cow.osg"); osg::ref_ptr&lt;osg::Node&gt; model3 = osgDB::readNodeFile("../data/glider.osg"); osgViewer::View *view1 = createView(50, 50, 320, 240, model1); osgViewer::View *view2 = createView(380, 50, 320, 240, model2); osgViewer::View *view3 = createView(185, 330, 320, 240, model3); osgViewer::CompositeViewer viewer; viewer.addView(view1); viewer.addView(view2); viewer.addView(view3); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br>  Kami akan menempatkan pembuatan tampilan terpisah dalam fungsi yang mengambil parameter posisi dan ukuran jendela, serta adegan sebagai penunjuk ke simpul akar <br><br><pre> <code class="cpp hljs">osgViewer::<span class="hljs-function"><span class="hljs-function">View *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, osg::Node *scene)</span></span></span><span class="hljs-function"> </span></span>{ osg::ref_ptr&lt;osgViewer::View&gt; view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osgViewer::View; view-&gt;setSceneData(scene); view-&gt;setUpViewInWindow(x, y, w, h); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view.release(); }</code> </pre><br>  Di sini kita membuat tampilan yang dikendalikan oleh penunjuk pintar ke objek osgViewer :: View <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osgViewer::View&gt; view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osgViewer::View;</code> </pre><br>  atur data adegan yang ditampilkan dan mode tampilan jendela di jendela dengan posisi dan ukuran yang ditentukan <br><br><pre> <code class="cpp hljs">view-&gt;setSceneData(scene); view-&gt;setUpViewInWindow(x, y, w, h);</code> </pre><br>  Kami mengembalikan tampilan dari fungsi sesuai dengan aturan untuk mengembalikan smart pointer <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view.release();</code> </pre><br>  Sekarang di program utama kami memuat tiga model yang berbeda <br><br><pre> <code class="cpp hljs">osgViewer::View *view1 = createView(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">240</span></span>, model1); osgViewer::View *view2 = createView(<span class="hljs-number"><span class="hljs-number">380</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">240</span></span>, model2); osgViewer::View *view3 = createView(<span class="hljs-number"><span class="hljs-number">185</span></span>, <span class="hljs-number"><span class="hljs-number">330</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">240</span></span>, model3);</code> </pre><br>  buat tiga tipe berbeda <br><br><pre> <code class="cpp hljs">osgViewer::View *view1 = createView(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">240</span></span>, model1); osgViewer::View *view2 = createView(<span class="hljs-number"><span class="hljs-number">380</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">240</span></span>, model2); osgViewer::View *view3 = createView(<span class="hljs-number"><span class="hljs-number">185</span></span>, <span class="hljs-number"><span class="hljs-number">330</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">240</span></span>, model3);</code> </pre><br>  buat penampil komposit dan tambahkan tampilan yang dibuat sebelumnya untuk itu <br><br><pre> <code class="cpp hljs">osgViewer::CompositeViewer viewer; viewer.addView(view1); viewer.addView(view2); viewer.addView(view3);</code> </pre><br>  dan menjalankan rendering dengan cara yang persis sama seperti yang kami lakukan dalam kasus satu adegan <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> viewer.run();</code> </pre><br>  Itu saja!  Ketika program dimulai, kita mendapatkan tiga jendela berbeda.  Isi setiap jendela dapat dikontrol secara independen.  Setiap jendela dapat ditutup dengan cara standar, dan sepenuhnya keluar dari aplikasi dengan menekan Esc. <br><br><img src="https://habrastorage.org/webt/dh/na/kl/dhnaklox5z-apbaynehnea_okss.png"><br><br><h1>  3. Kelas osg :: GraphicsContext :: Traits </h1><br>  Kata "traits" dalam terjemahan dari bahasa Inggris berarti "fitur".  Jadi, kelas yang disebutkan di atas menggambarkan fitur-fitur jendela masa depan, dan berisi semua properti untuk menggambarkan konteks grafik.  Ini berbeda dari kelas osg :: DisplaySettings, yang mengontrol karakteristik semua konteks grafis untuk kamera yang baru dibuat.  Properti publik utama dari kelas ini tercantum dalam tabel di bawah ini. <br><br><table><thead><tr><th>  Atribut kelas </th><th>  Jenis </th><th>  Nilai standar </th><th>  Deskripsi </th></tr></thead><tbody><tr><td>  x </td><td>  int </td><td>  0 </td><td>  Posisi horizontal awal jendela </td></tr><tr><td>  y </td><td>  int </td><td>  0 </td><td>  Posisi vertikal awal jendela </td></tr><tr><td>  lebar </td><td>  int </td><td>  0 </td><td>  Lebar jendela </td></tr><tr><td>  tinggi </td><td>  int </td><td>  0 </td><td>  Tinggi jendela </td></tr><tr><td>  windowName </td><td>  std :: string </td><td>  "" </td><td>  Judul jendela </td></tr><tr><td>  windowDekorasi </td><td>  bool </td><td>  salah </td><td>  Jendela Tampilan Layar Bendera </td></tr><tr><td>  merah </td><td>  unsigned int </td><td>  8 </td><td>  Jumlah bit merah di buffer warna OpenGL </td></tr><tr><td>  hijau </td><td>  unsigned int </td><td>  8 </td><td>  Jumlah bit hijau dalam buffer warna OpenGL </td></tr><tr><td>  biru </td><td>  unsigned int </td><td>  8 </td><td>  Jumlah bit biru di buffer warna OpenGL </td></tr><tr><td>  alfa </td><td>  unsigned int </td><td>  8 </td><td>  Jumlah bit dalam buffer alpha OpenGL </td></tr><tr><td>  mendalam </td><td>  unsigned int </td><td>  24 </td><td>  Jumlah bit dalam buffer kedalaman OpenGL </td></tr><tr><td>  stensil </td><td>  unsigned int </td><td>  0 </td><td>  Jumlah bit dalam buffer stensil OpenGL </td></tr><tr><td>  doubleBuffer </td><td>  bool </td><td>  salah </td><td>  Gunakan buffer ganda </td></tr><tr><td>  sampel </td><td>  unsigned int </td><td>  0 </td><td>  Nomor smoothing primitif </td></tr><tr><td>  quadBufferStereo </td><td>  bool </td><td>  salah </td><td>  Gunakan buffer quad stereo (untuk peralatan NVidia) </td></tr><tr><td>  mewarisiWindowData </td><td>  osg :: ref_ptr </td><td>  Tidak </td><td>  Deskriptor data terkait jendela </td></tr></tbody></table><br>  Untuk menginisialisasi objek Traits, jalankan kode berikut <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::GraphicsContext::Traits&gt; traits = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::GraphicsContext::Traits; traits-&gt;x = <span class="hljs-number"><span class="hljs-number">50</span></span>; traits-&gt;y = <span class="hljs-number"><span class="hljs-number">100</span></span>; ...</code> </pre><br><h1>  4. Atur jendela aplikasi OSG </h1><br>  Untuk membuat jendela dengan karakteristik yang ditentukan, Anda harus melakukan langkah-langkah berikut: <br><br><ol><li>  Mengkonfigurasi objek bertipe osg :: GraphicsContext :: Traits <br></li><li>  Buat konteks jendela grafis <br></li><li>  Tautkan konteks grafik ini ke kamera <br></li><li>  Jadikan kamera penampil utama <br></li></ol><br><div class="spoiler">  <b class="spoiler_title">Contoh sifat</b> <div class="spoiler_text">  <strong>main.h</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/GraphicsContext&gt; #include &lt;osgDB/ReadFile&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::GraphicsContext::Traits&gt; traits = new osg::GraphicsContext::Traits; traits-&gt;x = 50; traits-&gt;y = 50; traits-&gt;width = 800; traits-&gt;height = 600; traits-&gt;windowName = "OSG application"; traits-&gt;windowDecoration = true; traits-&gt;doubleBuffer = true; traits-&gt;samples = 4; osg::ref_ptr&lt;osg::GraphicsContext&gt; gc = osg::GraphicsContext::createGraphicsContext(traits.get()); osg::ref_ptr&lt;osg::Camera&gt; camera = new osg::Camera; camera-&gt;setGraphicsContext(gc); camera-&gt;setViewport( new osg::Viewport(0, 0, traits-&gt;width, traits-&gt;height) ); camera-&gt;setClearMask(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT); camera-&gt;setClearColor( osg::Vec4(0.2f, 0.2f, 0.4f, 1.0f) ); double aspect = static_cast&lt;double&gt;(traits-&gt;width) / static_cast&lt;double&gt;(traits-&gt;height); camera-&gt;setProjectionMatrixAsPerspective(30.0, aspect, 1.0, 1000.0); camera-&gt;getOrCreateStateSet()-&gt;setMode(GL_DEPTH_TEST, osg::StateAttribute::ON); osg::ref_ptr&lt;osg::Node&gt; root = osgDB::readNodeFile("../data/cessna.osg"); osgViewer::Viewer viewer; viewer.setCamera(camera.get()); viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br>  Untuk mengatur preferensi jendela, buat turunan dari kelas osg :: GraphicsContext :: Traits dan inisialisasi dengan parameter yang kita butuhkan <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::GraphicsContext::Traits&gt; traits = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::GraphicsContext::Traits; traits-&gt;x = <span class="hljs-number"><span class="hljs-number">50</span></span>; traits-&gt;y = <span class="hljs-number"><span class="hljs-number">50</span></span>; traits-&gt;width = <span class="hljs-number"><span class="hljs-number">800</span></span>; traits-&gt;height = <span class="hljs-number"><span class="hljs-number">600</span></span>; traits-&gt;windowName = <span class="hljs-string"><span class="hljs-string">"OSG application"</span></span>; traits-&gt;windowDecoration = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; traits-&gt;doubleBuffer = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; traits-&gt;samples = <span class="hljs-number"><span class="hljs-number">4</span></span>;</code> </pre><br>  Setelah itu, kita membuat konteks grafis dengan melewatkan pointer ke traits sebagai pengaturan <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::GraphicsContext&gt; gc = osg::GraphicsContext::createGraphicsContext(traits.get());</code> </pre><br>  Buat kamera <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Camera&gt; camera = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Camera;</code> </pre><br>  Kami mengaitkan kamera dengan konteks grafik yang dibuat <br><br><pre> <code class="cpp hljs">camera-&gt;setGraphicsContext(gc);</code> </pre><br>  Atur viewport, atur masker pembersih penyangga, atur warna pembersihan <br><br><pre> <code class="cpp hljs">camera-&gt;setViewport( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Viewport(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, traits-&gt;width, traits-&gt;height) ); camera-&gt;setClearMask(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT); camera-&gt;setClearColor( osg::Vec4(<span class="hljs-number"><span class="hljs-number">0.2f</span></span>, <span class="hljs-number"><span class="hljs-number">0.2f</span></span>, <span class="hljs-number"><span class="hljs-number">0.4f</span></span>, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) );</code> </pre><br>  Siapkan matriks proyeksi perspektif <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> aspect = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;(traits-&gt;width) / <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;(traits-&gt;height); camera-&gt;setProjectionMatrixAsPerspective(<span class="hljs-number"><span class="hljs-number">30.0</span></span>, aspect, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1000.0</span></span>);</code> </pre><br>  Jangan lupa untuk mengaktifkan tes kedalaman, untuk tampilan wajah yang benar <br><br><pre> <code class="cpp hljs">camera-&gt;getOrCreateStateSet()-&gt;setMode(GL_DEPTH_TEST, osg::StateAttribute::ON);</code> </pre><br>  Memuat model pesawat <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Node&gt; root = osgDB::readNodeFile(<span class="hljs-string"><span class="hljs-string">"../data/cessna.osg"</span></span>);</code> </pre><br>  Kami mengonfigurasi dan meluncurkan penampil, yang menunjukkan kamera yang kami konfigurasikan dalam kualitas kamera utama <br><br><pre> <code class="cpp hljs">osgViewer::Viewer viewer; viewer.setCamera(camera.get()); viewer.setSceneData(root.get()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> viewer.run();</code> </pre><br>  Di pintu keluar kami memiliki jendela dengan parameter yang diperlukan <br><br><img src="https://habrastorage.org/webt/rs/av/d-/rsavd-z8aawrwpykioblv1kxsni.png"><br><br>  Judul jendela tidak ditampilkan karena fungsi ini dinonaktifkan pada pengaturan manajer jendela saya.  Jika Anda menjalankan contoh di Windows atau Linux dengan pengaturan yang berbeda, header akan berada di tempatnya. <br><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dilanjutkan ...</a></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id437764/">https://habr.com/ru/post/id437764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id437752/index.html">PHP Digest No. 148 (14 - 28 Januari 2019)</a></li>
<li><a href="../id437754/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 349 (21-27 Januari 2019)</a></li>
<li><a href="../id437756/index.html">Frontend Weekly Digest (21-27 Januari 2019)</a></li>
<li><a href="../id437758/index.html">Statistik menarik 100.000 profil dengan Stack Overflow untuk 2018 (dan habraopros)</a></li>
<li><a href="../id437760/index.html">Mengkonfigurasi VSCODE untuk pengembangan untuk ARM menggunakan papan debug stm32f429i-disco sebagai contoh</a></li>
<li><a href="../id437766/index.html">28 Januari: Hari Internasional untuk Perlindungan Data Pribadi</a></li>
<li><a href="../id437768/index.html">KnowledgeConf: Saatnya berbagi pengetahuan</a></li>
<li><a href="../id437772/index.html">Naga tinggal di sini: matriks kompetensi sebagai alat Timlid</a></li>
<li><a href="../id437774/index.html">Gitpab Senang bertemu denganmu</a></li>
<li><a href="../id437778/index.html">The Tale of the Rose Alloy dan the Fallen Krenka</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>