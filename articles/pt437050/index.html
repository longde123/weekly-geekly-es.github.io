<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíáüèø üõ∏ ‚è¨ O livro "Python. Curso expresso. 3rd ed. üë∏üèæ üíÖüèΩ üë©üèæ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi, habrozhiteli! Este livro √© destinado a pessoas que j√° possuem experi√™ncia em uma ou mais linguagens de programa√ß√£o e desejam aprender o b√°sico do ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro "Python. Curso expresso. 3rd ed.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/437050/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/sv/bp/53/svbp53i5ti4wyewcggfithv859w.jpeg" align="left" alt="imagem"></a>  Oi, habrozhiteli!  Este livro √© destinado a pessoas que j√° possuem experi√™ncia em uma ou mais linguagens de programa√ß√£o e desejam aprender o b√°sico do Python 3. o mais r√°pido e f√°cil poss√≠vel.Pode presumir que o leitor j√° esteja familiarizado com estruturas de controle, OOP, manipula√ß√£o de arquivos, manipula√ß√£o de exce√ß√µes, etc. O livro tamb√©m ser√° √∫til para usu√°rios de vers√µes anteriores do Python que precisam de uma refer√™ncia compacta do Python 3.1. <br><br>  Convidamos voc√™ a ler o trecho "Processando arquivos de dados" <br><a name="habracut"></a><br><h3>  Como usar um livro </h3><br>  Parte 1 fornece informa√ß√µes gerais sobre Python.  Voc√™ aprender√° como baixar e instalar o Python no seu sistema.  Ele tamb√©m fornece uma vis√£o geral da linguagem, que ser√° √∫til principalmente para programadores experientes que desejam uma compreens√£o de alto n√≠vel do Python. <br><br>  A parte 2 cont√©m o material principal do livro.  Ele discute os ingredientes necess√°rios para obter habilidades pr√°ticas no uso do Python como uma linguagem de programa√ß√£o de uso geral.  O material dos cap√≠tulos foi planejado para que os leitores que est√£o come√ßando a aprender Python possam avan√ßar sequencialmente, dominando os pontos principais da linguagem.  Esta parte tamb√©m cont√©m se√ß√µes mais complexas, para que voc√™ possa retornar e encontrar todas as informa√ß√µes necess√°rias sobre um determinado design ou t√≥pico em um √∫nico local. <br><br>  A Parte 3 apresenta os recursos avan√ßados dos elementos da linguagem Python que n√£o s√£o absolutamente necess√°rios, mas certamente ser√£o √∫teis para qualquer programador Python s√©rio. <br><br>  A parte 4 se concentra em t√≥picos especializados que v√£o al√©m da simples sintaxe do idioma.  Voc√™ pode ler esses cap√≠tulos ou ignor√°-los, dependendo de suas necessidades. <br><br>  Os programadores iniciantes em Python s√£o incentivados a come√ßar no cap√≠tulo 3 para obter uma impress√£o geral e, em seguida, passar para os cap√≠tulos de interesse na parte 2. Introduzir exemplos interativos para instanciar conceitos.  Voc√™ tamb√©m pode ir al√©m dos exemplos fornecidos no texto e procurar respostas para quaisquer perguntas que ainda n√£o estejam claras.  Essa abordagem aumentar√° a velocidade do aprendizado e aprofundar√° a compreens√£o.  Se voc√™ ainda n√£o conhece o OOP ou n√£o √© necess√°rio para o seu aplicativo, pode pular a maior parte do cap√≠tulo 15. <br><br>  Os leitores que j√° est√£o familiarizados com o Python tamb√©m devem come√ßar no cap√≠tulo 3. Ele fornece uma boa vis√£o geral introdut√≥ria e uma descri√ß√£o das diferen√ßas entre o Python 3 e as vers√µes mais familiares.  Tamb√©m pode ser usado para avaliar se voc√™ est√° pronto para avan√ßar para os cap√≠tulos mais complexos das partes 3 e 4 deste livro. <br><br>  Talvez alguns leitores que n√£o tenham experi√™ncia com o Python, mas que tenham experi√™ncia suficiente em outras linguagens de programa√ß√£o, possam obter a maioria das informa√ß√µes necess√°rias lendo o Cap√≠tulo 3 e observando os m√≥dulos da biblioteca padr√£o do Python (Cap√≠tulo 19) e o manual de refer√™ncia da biblioteca do Python na documenta√ß√£o do Python. . <br><br><h3>  Trecho.  Processamento de arquivo de dados </h3><br>  A maioria dos dados √© distribu√≠da em arquivos de texto.  Pode ser um texto n√£o estruturado (por exemplo, uma cole√ß√£o de mensagens ou uma cole√ß√£o de textos liter√°rios) ou dados mais estruturados, nos quais cada linha √© um registro, e os campos s√£o separados por um caractere separador especial - uma v√≠rgula, um caractere de tabula√ß√£o ou uma barra vertical (|).  Arquivos de texto podem ser enormes;  um conjunto de dados pode ocupar dezenas ou at√© centenas de arquivos e os dados nele contidos podem estar incompletos ou distorcidos.  Com essa variedade, voc√™ quase inevitavelmente encontrar√° a tarefa de ler e usar dados de arquivos de texto.  Este cap√≠tulo apresenta as estrat√©gias b√°sicas para resolver esse problema no Python. <br><br><h3>  21.1  Apresentando ETL </h3><br>  A necessidade de extrair dados dos arquivos, analis√°-los, convert√™-los em um formato conveniente e fazer algo apareceu quase simultaneamente com os arquivos de dados.  Al√©m disso, existe at√© um termo padr√£o para esse processo: ETL (Extract-Transform-Load, ou seja, ‚Äúextra√ß√£o - transforma√ß√£o - carregamento‚Äù).  Recupera√ß√£o refere-se ao processo de ler uma fonte de dados e analis√°-la, se necess√°rio.  A convers√£o pode envolver a limpeza e a normaliza√ß√£o dos dados, al√©m de combinar, dividir e reorganizar os registros que eles cont√™m.  Por fim, carregar significa salvar os dados convertidos em um novo local (em outro arquivo ou banco de dados).  Este cap√≠tulo discute o b√°sico da implementa√ß√£o de um ETL no Python, de arquivos de dados de texto a armazenamento de dados convertidos em outros arquivos.  Arquivos de dados mais estruturados s√£o discutidos no cap√≠tulo 22, e o armazenamento de informa√ß√µes em um banco de dados √© discutido no cap√≠tulo 23. <br><br><h3>  21.2  Lendo arquivos de texto </h3><br>  O primeiro componente do ETL - extra√ß√£o - envolve abrir um arquivo e ler seu conte√∫do.  √Ä primeira vista, parece simples, mas mesmo aqui podem surgir problemas - por exemplo, tamanho do arquivo.  Se o arquivo for muito grande para caber na mem√≥ria, o c√≥digo precisar√° ser estruturado para funcionar com segmentos menores do arquivo (possivelmente uma linha). <br><br><h3>  21.2.1  Codifica√ß√£o de texto: ASCII, Unicode e outros </h3><br>  Outro poss√≠vel problema √© a codifica√ß√£o.  Este cap√≠tulo √© dedicado ao trabalho com arquivos de texto e, de fato, uma grande propor√ß√£o dos dados transmitidos no mundo real √© armazenada em arquivos de texto.  No entanto, a natureza exata do texto pode variar dependendo do aplicativo, do usu√°rio e, √© claro, do pa√≠s. <br><br>  √Äs vezes, o texto carrega informa√ß√µes na codifica√ß√£o ASCII, incluindo 128 caracteres, dos quais apenas 95 s√£o classificados como imprim√≠veis.  Felizmente, a codifica√ß√£o ASCII √© o "m√∫ltiplo menos comum" da maioria das situa√ß√µes de transfer√™ncia de dados.  Por outro lado, n√£o pode lidar com as complexidades dos numerosos alfabetos e sistemas de escrita existentes no mundo.  A leitura de arquivos na codifica√ß√£o ASCII quase certamente levar√° ao fato de que, ao ler caracteres n√£o suportados, seja alem√£o √º, portugu√™s √ß ou quase qualquer caractere de um idioma que n√£o seja o ingl√™s, os problemas ser√£o iniciados e os erros aparecer√£o. <br><br>  Esses erros ocorrem porque o ASCII usa valores de 7 bits, enquanto os bytes em um arquivo t√≠pico consistem em 8 bits, o que permite que 256 valores poss√≠veis sejam representados em vez de 128 para valores de 7 bits.  Esses c√≥digos adicionais geralmente s√£o usados ‚Äã‚Äãpara armazenar valores adicionais - de sinais de pontua√ß√£o estendidos (como tra√ßos m√©dios e curtos) a v√°rios caracteres (marca registrada, s√≠mbolo de direitos autorais e sinal de grau) e vers√µes de caracteres alfab√©ticos com sinais diacr√≠ticos.  Sempre havia um problema: ao ler um arquivo de texto, era poss√≠vel encontrar um caractere que ultrapassava o intervalo ASCII de 128 caracteres e n√£o era poss√≠vel ter certeza de qual caractere estava codificado.  Suponha que voc√™ encontre um caractere com o c√≥digo 214. O que √© isso?  Uma marca de divis√£o, a letra √ñ ou qualquer outra coisa?  Sem o c√≥digo fonte que criou esse arquivo, √© imposs√≠vel descobrir. <br><br><h3>  Unicode e UTF-8 </h3><br>  Para eliminar essa ambiguidade, voc√™ pode usar Unicode.  A codifica√ß√£o Unicode, chamada UTF-8, suporta caracteres ASCII b√°sicos sem nenhuma altera√ß√£o, mas tamb√©m permite um conjunto quase ilimitado de outros caracteres e caracteres do padr√£o Unicode.  Devido √† sua flexibilidade, o UTF-8 √© usado em mais de 85% das p√°ginas da web que existiam no momento em que este artigo foi escrito.  Isso significa que, ao ler arquivos de texto, √© melhor focar em UTF-8.  Se os arquivos contiverem apenas caracteres ASCII, eles ser√£o lidos corretamente, mas voc√™ tamb√©m ter√° seguro caso outros caracteres sejam codificados em UTF-8.  Felizmente, o tipo de dados String do Python 3 foi projetado para suportar Unicode por padr√£o. <br><br>  Mesmo com Unicode, as situa√ß√µes s√£o poss√≠veis quando valores aparecem no texto que n√£o podem ser decodificados com √™xito.  A fun√ß√£o aberta no Python recebe um par√¢metro de erros adicional, que determina como lidar com erros de codifica√ß√£o ao ler ou gravar arquivos.  O valor padr√£o √© 'strict', com o qual um erro √© acionado toda vez que um erro de codifica√ß√£o √© detectado.  Outros valores √∫teis s√£o 'ignorar' (pule o caractere que causou o erro);  'substituir' (um personagem √© substitu√≠do por um marcador especial - geralmente?);  'backslashreplace' (o caractere √© substitu√≠do pela sequ√™ncia de escape por \) e 'surrogateescape' (o caractere invasor √© convertido em um ponto de c√≥digo Unicode privado ao ler e volta √† sequ√™ncia de bytes original ao escrever).  A escolha do m√©todo para processar ou resolver erros de codifica√ß√£o depende da situa√ß√£o espec√≠fica. <br><br>  Considere um pequeno exemplo de arquivo que cont√©m um caractere UTF-8 inv√°lido e veja como esse caractere √© processado em modos diferentes.  Primeiro escreva o arquivo usando bytes e modo bin√°rio: <br><br><pre><code class="plaintext hljs">&gt;&gt;&gt; open('test.txt', 'wb').write(bytes([65, 66, 67, 255, 192,193]))</code> </pre> <br>  Como resultado do comando, um arquivo √© criado a partir dos caracteres "ABC", seguidos por tr√™s caracteres que n√£o est√£o inclu√≠dos no ASCII, que podem ser exibidos de maneira diferente, dependendo do m√©todo de codifica√ß√£o usado.  Se voc√™ usar o vim para visualizar o arquivo, o resultado ser√° semelhante a este: <br><br><pre> <code class="plaintext hljs">ABC√ø√Ä√Å ~</code> </pre> <br><br>  Quando o arquivo √© criado, tente l√™-lo no modo padr√£o de tratamento de erros estritos: <br><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; x = open('test.txt').read() Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt; File "/usr/local/lib/python3.6/codecs.py", line 321, in decode (result, consumed) = self._buffer_decode(data, self.errors, final) UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 3: invalid start byte</code> </pre> <br><br>  O quarto byte com um valor de 255 n√£o √© um caractere UTF-8 v√°lido nessa posi√ß√£o; portanto, uma exce√ß√£o ocorre no modo 'estrito'.  Agora, vamos ver como outros modos de tratamento de erros lidam com o mesmo arquivo, sem esquecer que os tr√™s √∫ltimos caracteres acionam um erro: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/k8/kr/rgk8krlwwnpj47drpjqe8cp_pii.png" alt="imagem"></div><br>  Se voc√™ quiser que os caracteres problem√°ticos desapare√ßam, use o modo 'ignorar'.  O modo 'substituir' marca apenas as posi√ß√µes de caracteres inv√°lidos, enquanto outros modos tentam de maneira diferente salvar caracteres inv√°lidos sem interpreta√ß√£o. <br><br><h3>  21.2.2  Texto n√£o estruturado </h3><br>  Arquivos de texto n√£o estruturados s√£o lidos da maneira mais f√°cil, mas tamb√©m criam mais problemas com a extra√ß√£o de informa√ß√µes.  O processamento de texto n√£o estruturado pode variar muito, dependendo da natureza do texto e do que voc√™ far√° com ele, portanto, qualquer discuss√£o detalhada sobre o processamento de texto est√° al√©m do escopo do livro.  No entanto, um pequeno exemplo ajudar√° a demonstrar alguns problemas b√°sicos e estabelecer√° as bases para discutir arquivos com dados de texto estruturados. <br><br>  Um dos problemas mais simples √© escolher a unidade l√≥gica b√°sica no arquivo.  Se voc√™ usar uma cole√ß√£o de milhares de mensagens no Twitter, textos sobre Moby Dick ou uma cole√ß√£o de not√≠cias, precisar√° dividi-las de alguma forma.  No caso de tweets, cada bloco pode ser colocado em uma linha e a leitura e o processamento de cada linha do arquivo s√£o organizados de maneira bastante simples. <br><br>  No caso de Moby Dick e at√© de algumas not√≠cias, o problema est√° ficando mais complicado.  Obviamente, o texto do romance e at√© o texto das not√≠cias s√£o geralmente indesej√°veis ‚Äã‚Äãcomo uma √∫nica unidade.  Nesse caso, voc√™ precisa decidir de quais blocos precisa e depois desenvolver uma estrat√©gia para dividir o arquivo em blocos.  Voc√™ pode preferir processar o texto par√°grafo por par√°grafo.  Nesse caso, voc√™ deve determinar como a discrimina√ß√£o do texto em par√°grafos no arquivo √© organizada e escrever o c√≥digo adequadamente.  Se os par√°grafos corresponderem √†s linhas de um arquivo de texto, isso n√£o ser√° dif√≠cil.  No entanto, geralmente um par√°grafo de um arquivo de texto pode consistir em v√°rias linhas em um arquivo de texto, e voc√™ ter√° que trabalhar duro. <br><br>  Agora considere alguns exemplos. <br><br><blockquote>  Me chame de Ismael.  Alguns anos atr√°s - n√£o importa quanto tempo precisamente-- <br>  tendo pouco ou nenhum dinheiro na minha bolsa e nada em particular <br>  para me interessar na praia, pensei em navegar um pouco <br>  e ver a parte aquosa do mundo.  √â uma maneira que eu tenho <br>  de expulsar o ba√ßo e regular a circula√ß√£o. <br>  Sempre que me vejo cada vez mais sombrio na boca; <br>  sempre que h√° um novembro √∫mido e chuvoso em minha alma;  sempre que eu <br>  me vejo involuntariamente fazendo uma pausa diante de armaz√©ns de caix√µes, <br>  e trazendo os fundos de todos os funerais que encontro; <br>  e, especialmente, sempre que meus hipop√≥tamos me superam, <br>  que exige um forte princ√≠pio moral para me impedir de <br>  deliberadamente entrando na rua e batendo metodicamente <br>  tirar o chap√©u das pessoas - ent√£o, considero que √© hora de chegar ao mar <br>  assim que eu puder.  Este √© o meu substituto para pistola e bola. <br>  Com um floreio filos√≥fico, Cato se joga sobre a espada; <br>  Eu discretamente levo para o navio.  N√£o h√° nada de surpreendente nisso. <br>  Se eles soubessem disso, quase todos os homens em seu n√≠vel, algum tempo <br>  ou outro, aprecie quase os mesmos sentimentos em rela√ß√£o a <br>  o oceano comigo. <br><br>  Agora existe a sua cidade insular dos Manhattoes, cercada por cais <br>  como ilhas indianas por recifes de coral - o com√©rcio o rodeia com suas ondas. <br>  Direita e esquerda, as ruas levam voc√™ √† √°gua.  Seu centro extremo <br>  √© a bateria, onde essa nobre toupeira √© lavada por ondas e resfriada <br>  pela brisa, que poucas horas antes estavam fora da vista da terra. <br>  Olhe para a multid√£o de observadores de √°gua l√°. </blockquote><br>  Neste exemplo (com o in√≠cio do texto "Moby Dick"), as linhas s√£o quebradas mais ou menos da maneira como seriam paginadas e os par√°grafos s√£o indicados por uma √∫nica linha vazia.  Se voc√™ deseja tratar cada par√°grafo como um todo, √© necess√°rio dividir o texto em linhas em branco.  Felizmente, essa tarefa √© facilmente realizada pelo m√©todo split () de strings.  Cada nova linha no texto √© representada pela combina√ß√£o "\ n".  Naturalmente, a √∫ltima linha do texto de cada par√°grafo termina com uma nova linha e, se a pr√≥xima linha estiver vazia, a segunda nova linha imediatamente a seguir: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lu/a1/qi/lua1qir3kpemtstjg37nvrzwws8.png" alt="imagem"></div><br>  A an√°lise de texto em par√°grafos √© uma etapa muito simples no processamento de texto n√£o estruturado.  Voc√™ tamb√©m pode precisar executar uma normaliza√ß√£o adicional do texto antes de continuar o processamento.  Suponha que voc√™ queira calcular a frequ√™ncia de ocorr√™ncia de cada palavra em um arquivo de texto.  Se voc√™ simplesmente dividir o arquivo por omiss√µes, obter√° uma lista de palavras no arquivo; no entanto, n√£o ser√° t√£o f√°cil calcular com precis√£o as ocorr√™ncias, porque Isto, isto, isto.  e isso n√£o ser√° considerado a mesma palavra.  Para que esse c√≥digo funcione corretamente, √© necess√°rio normalizar o texto removendo sinais de pontua√ß√£o e convertendo todo o texto em um caso antes do processamento.  No exemplo de texto acima, o c√≥digo para construir uma lista normalizada de palavras pode ser assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kz/ld/4z/kzld4zqrc9gggdkevqpurtln9z4.png" alt="imagem"></div><br><h3>  21.2.3  Arquivos delimitados n√£o estruturados </h3><br>  Arquivos n√£o estruturados s√£o lidos com muita simplicidade, mas a falta de estrutura tamb√©m √© sua desvantagem.  Geralmente √© mais conveniente definir alguma estrutura para um arquivo, a fim de simplificar a sele√ß√£o de valores individuais.  Na vers√£o mais simples, o arquivo √© dividido em linhas e cada linha cont√©m um elemento de informa√ß√£o.  Por exemplo, pode ser uma lista de nomes de arquivos para processamento, uma lista de nomes de pessoas ou uma s√©rie de leituras de temperatura de um sensor remoto.  Nesses casos, a an√°lise dos dados √© organizada de maneira muito simples: voc√™ l√™ a linha e, se necess√°rio, converte-a no tipo desejado.  √â o suficiente para preparar o arquivo para uso. <br><br>  No entanto, a situa√ß√£o n√£o √© t√£o simples.  Com mais freq√º√™ncia, voc√™ precisa agrupar v√°rios elementos de dados interconectados e seu c√≥digo deve l√™-los juntos.  Normalmente, para isso, os dados relacionados s√£o colocados em uma linha e separados por um caractere especial.  Nesse caso, ao ler cada linha do arquivo, caracteres especiais s√£o usados ‚Äã‚Äãpara dividir os dados em campos e armazenar os valores dos campos em vari√°veis ‚Äã‚Äãpara processamento adicional. <br><br>  O seguinte arquivo cont√©m dados de temperatura em um formato delimitado: <br><br><pre> <code class="plaintext hljs">State|Month Day, Year Code|Avg Daily Max Air Temperature (F)|Record Count for Daily Max Air Temp (F) Illinois|1979/01/01|17.48|994 Illinois|1979/01/02|4.64|994 Illinois|1979/01/03|11.05|994 Illinois|1979/01/04|9.51|994 Illinois|1979/05/15|68.42|994 Illinois|1979/05/16|70.29|994 Illinois|1979/05/17|75.34|994 Illinois|1979/05/18|79.13|994 Illinois|1979/05/19|74.94|994</code> </pre> <br>  Os dados no arquivo s√£o separados por um canal (|).  Neste exemplo, eles consistem em quatro campos: estado, data de observa√ß√£o, temperatura m√°xima m√©dia e n√∫mero de esta√ß√µes que fornecem dados.  Outros delimitadores padr√£o s√£o um caractere de tabula√ß√£o e uma v√≠rgula.  Talvez a v√≠rgula seja usada com mais frequ√™ncia, mas o separador pode ser qualquer caractere que n√£o ocorra nos valores (mais sobre isso posteriormente).  Dados separados por v√≠rgula s√£o t√£o comuns que esse formato geralmente √© chamado de CSV (valores separados por v√≠rgula), ou seja, dados separados por v√≠rgula) e esse tipo de arquivo √© fornecido com a extens√£o .csv como um atributo de formato. <br><br>  Qualquer que seja o caractere usado como delimitador, se voc√™ souber qual √© o caractere, poder√° escrever seu pr√≥prio c√≥digo Python para dividir a string em campos e retorn√°-los como uma lista.  No caso anterior, voc√™ pode usar o m√©todo split () para converter a string em uma lista de valores: <br><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; line = "Illinois|1979/01/01|17.48|994" &gt;&gt;&gt; print(line.split("|")) ['Illinois', '1979/01/01', '17.48', '994']</code> </pre> <br>  Essa t√©cnica √© muito f√°cil de implementar, mas todos os valores s√£o armazenados na forma de sequ√™ncia e isso pode ser inconveniente para o processamento subsequente. <br><br><h3>  21.2.4  M√≥dulo csv </h3><br>  Se voc√™ costuma processar arquivos de dados delimitados, deve examinar mais de perto o m√≥dulo csv e seus recursos.  Quando me pediram para nomear meu m√≥dulo favorito da biblioteca padr√£o do Python, chamei o m√≥dulo csv mais de uma vez - n√£o porque parece espetacular (n√£o √©), mas porque provavelmente me salvou mais tempo e me salvou dos meus erros em potencial com mais frequ√™ncia do que qualquer outro m√≥dulo. <br>  O m√≥dulo csv √© o exemplo perfeito da filosofia de "bateria inclu√≠da" do Python.  Embora voc√™ possa escrever perfeitamente seu pr√≥prio c√≥digo para ler arquivos delimitados (al√©m disso, n√£o √© t√£o dif√≠cil), √© muito mais f√°cil e confi√°vel usar o m√≥dulo Python.  O m√≥dulo csv foi testado e otimizado e fornece v√°rios recursos que voc√™ dificilmente conseguiria implementar, mas que s√£o bastante convenientes e economizam tempo. <br><br>  D√™ uma olhada nos dados anteriores e decida como voc√™ os leria com o m√≥dulo csv.  O c√≥digo de an√°lise de dados deve ler cada linha e remover o caractere de nova linha √† direita e depois dividir a linha por caracteres |  e acrescente a lista de valores √† lista geral de cadeias.  A solu√ß√£o pode ser algo como isto: <br><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; results = [] &gt;&gt;&gt; for line in open("temp_data_pipes_00a.txt"): ... fields = line.strip().split("|") ... results.append(fields) ... &gt;&gt;&gt; results [['State', 'Month Day, Year Code', 'Avg Daily Max Air Temperature (F)', 'Record Count for Daily Max Air Temp (F)'], ['Illinois', '1979/01/01', '17.48', '994'], ['Illinois', '1979/01/02', '4.64', '994'], ['Illinois', '1979/01/03', '11.05', '994'], ['Illinois', '1979/01/04', '9.51', '994'], ['Illinois', '1979/05/15', '68.42', '994'], ['Illinois', '1979/ 05/16', '70.29', '994'], ['Illinois', '1979/05/17', '75.34', '994'], ['Illinois', '1979/05/18', '79.13', '994'], ['Illinois', '1979/05/19', '74.94', '994']]</code> </pre> <br>  Se voc√™ quiser fazer o mesmo com o m√≥dulo csv, o c√≥digo pode ser algo como isto: <br><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; import csv &gt;&gt;&gt; results = [fields for fields in csv.reader(open("temp_data_pipes_00a.txt", newline=''), delimiter="|")] &gt;&gt;&gt; results [['State', 'Month Day, Year Code', 'Avg Daily Max Air Temperature (F)', 'Record Count for Daily Max Air Temp (F)'], ['Illinois', '1979/01/01', '17.48', '994'], ['Illinois', '1979/01/02', '4.64', '994'], ['Illinois', '1979/01/03', '11.05', '994'], ['Illinois', '1979/01/04', '9.51', '994'], ['Illinois', '1979/05/15', '68.42', '994'], ['Illinois', '1979/ 05/16', '70.29', '994'], ['Illinois', '1979/05/17', '75.34', '994'], ['Illinois', '1979/05/18', '79.13', '994'], ['Illinois', '1979/05/19', '74.94', '994']]</code> </pre> <br>  Nesse caso simples, o ganho comparado √† implementa√ß√£o independente da solu√ß√£o n√£o √© t√£o grande.  No entanto, o c√≥digo acabou sendo duas linhas mais curtas e um pouco mais claras, e voc√™ n√£o precisa se preocupar em cortar caracteres de nova linha.  A verdadeira vantagem surge quando voc√™ enfrenta casos mais complexos. <br><br>  Os dados neste exemplo s√£o reais, mas na realidade foram simplificados e limpos.  Dados reais da fonte ser√£o mais complexos.  Os dados reais cont√™m mais campos, alguns campos ser√£o colocados entre aspas, outros n√£o, e o primeiro campo pode estar vazio.  O original √© separado por tabula√ß√µes, mas, para fins de demonstra√ß√£o, cito-os separados por v√≠rgulas: <br><br><pre> <code class="plaintext hljs">"Notes","State","State Code","Month Day, Year","Month Day, Year Code",Avg Daily Max Air Temperature (F),Record Count for Daily Max Air Temp (F),Min Temp for Daily Max Air Temp (F),Max Temp for Daily Max Air Temp (F),Avg Daily Max Heat Index (F),Record Count for Daily Max Heat Index (F),Min for Daily Max Heat Index (F),Max for Daily Max Heat Index (F),Daily Max Heat Index (F) % Coverage ,"Illinois","17","Jan 01, 1979","1979/01/ 01",17.48,994,6.00,30.50,Missing,0,Missing,Missing,0.00% ,"Illinois","17","Jan 02, 1979","1979/01/02",4.64,994,- 6.40,15.80,Missing,0,Missing,Missing,0.00% ,"Illinois","17","Jan 03, 1979","1979/01/03",11.05,994,- 0.70,24.70,Missing,0,Missing,Missing,0.00% ,"Illinois","17","Jan 04, 1979","1979/01/ 04",9.51,994,0.20,27.60,Missing,0,Missing,Missing,0.00% ,"Illinois","17","May 15, 1979","1979/05/ 15",68.42,994,61.00,75.10,Missing,0,Missing,Missing,0.00% ,"Illinois","17","May 16, 1979","1979/05/ 16",70.29,994,63.40,73.50,Missing,0,Missing,Missing,0.00% ,"Illinois","17","May 17, 1979","1979/05/ 17",75.34,994,64.00,80.50,82.60,2,82.40,82.80,0.20% ,"Illinois","17","May 18, 1979","1979/05/ 18",79.13,994,75.50,82.10,81.42,349,80.20,83.40,35.11% ,"Illinois","17","May 19, 1979","1979/05/ 19",74.94,994,66.90,83.10,82.87,78,81.60,85.20,7.85%</code> </pre> <br>  Observa√ß√£o: alguns campos incluem v√≠rgulas.  De acordo com as regras nesses casos, o campo √© colocado entre aspas para indicar que seu conte√∫do n√£o se destina a analisar e procurar delimitadores.  Na pr√°tica (como neste caso), apenas uma fra√ß√£o dos campos geralmente √© colocada entre aspas, especialmente aquelas cujos valores podem conter um separador.  No entanto (como novamente neste exemplo), alguns campos s√£o colocados entre aspas, mesmo quando √© improv√°vel que contenham um separador. <br><br>  Nesses casos, as solu√ß√µes dom√©sticas se tornam muito complicadas.  Agora, apenas quebrar uma linha por um caractere delimitador n√£o funciona mais;  voc√™ precisa se certificar de usar apenas os separadores que n√£o est√£o dentro das cadeias.  Al√©m disso, voc√™ deve remover as aspas, que podem estar em uma posi√ß√£o arbitr√°ria ou n√£o encontradas em nenhum lugar.  Com o m√≥dulo csv, voc√™ n√£o precisa alterar seu c√≥digo.  Al√©m disso, como a v√≠rgula √© considerada o separador padr√£o, ela nem precisa ser especificada: <br><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; results2 = [fields for fields in csv.reader(open("temp_data_01.csv", newline=''))] &gt;&gt;&gt; results2 [['Notes', 'State', 'State Code', 'Month Day, Year', 'Month Day, Year Code', 'Avg Daily Max Air Temperature (F)', 'Record Count for Daily Max Air Temp (F)', 'Min Temp for Daily Max Air Temp (F)', 'Max Temp for Daily Max Air Temp (F)', 'Avg Daily Min Air Temperature (F)', 'Record Count for Daily Min Air Temp (F)', 'Min Temp for Daily Min Air Temp (F)', 'Max Temp for Daily Min Air Temp (F)', 'Avg Daily Max Heat Index (F)', 'Record Count for Daily Max Heat Index (F)', 'Min for Daily Max Heat Index (F)', 'Max for Daily Max Heat Index (F)', 'Daily Max Heat Index (F) % Coverage'], ['', 'Illinois', '17', 'Jan 01, 1979', '1979/01/01', '17.48', '994', '6.00', '30.50', '2.89', '994', '-13.60', '15.80', 'Missing', '0', 'Missing', 'Missing', '0.00%'], ['', 'Illinois', '17', 'Jan 02, 1979', '1979/01/02', '4.64', '994', '-6.40', '15.80', '-9.03', '994', '-23.60', '6.60', 'Missing', '0', 'Missing', 'Missing', '0.00%'], ['', 'Illinois', '17', 'Jan 03, 1979', '1979/01/03', '11.05', '994', '- 0.70', '24.70', '-2.17', '994', '-18.30', '12.90', 'Missing', '0', 'Missing', 'Missing', '0.00%'], ['', 'Illinois', '17', 'Jan 04, 1979', '1979/01/04', '9.51', '994', '0.20', '27.60', '-0.43', '994', '-16.30', '16.30', 'Missing', '0', 'Missing', 'Missing', '0.00%'], ['', 'Illinois', '17', 'May 15, 1979', '1979/05/15', '68.42', '994', '61.00', '75.10', '51.30', '994', '43.30', '57.00', 'Missing', '0', 'Missing', 'Missing', '0.00%'], ['', 'Illinois', '17', 'May 16, 1979', '1979/05/ 16', '70.29', '994', '63.40', '73.50', '48.09', '994', '41.10', '53.00', 'Missing', '0', 'Missing', 'Missing', '0.00%'], ['', 'Illinois', '17', 'May 17, 1979', '1979/05/17', '75.34', '994', '64.00', '80.50', '50.84', '994', '44.30', '55.70', '82.60', '2', '82.40', '82.80', '0.20%'], ['', 'Illinois', '17', 'May 18, 1979', '1979/05/18', '79.13', '994', '75.50', '82.10', '55.68', '994', '50.00', '61.10', '81.42', '349', '80.20', '83.40', '35.11%'], ['', 'Illinois', '17', 'May 19, 1979', '1979/05/19', '74.94', '994', '66.90', '83.10', '58.59', '994', '50.90', '63.20', '82.87', '78', '81.60', '85.20', '7.85%']]</code> </pre> <br><br>  ¬ªMais informa√ß√µes sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br>  Cupom de 20% de desconto para vendedores ambulantes - <b>Python</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437050/">https://habr.com/ru/post/pt437050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437034/index.html">Assobios universais: Revis√£o do Dongle USB Snom A230 e A210</a></li>
<li><a href="../pt437036/index.html">SAPUI5 para manequins parte 2: Um exerc√≠cio completo passo a passo</a></li>
<li><a href="../pt437038/index.html">Tradu√ß√£o de Benjamin API Winterberg Stream API Guide</a></li>
<li><a href="../pt437040/index.html">Na R√∫ssia, come√ßou a testar a interface neural dom√©stica "Neurochat"</a></li>
<li><a href="../pt437044/index.html">Como derrotar o drag√£o: reescreva seu programa no Golang</a></li>
<li><a href="../pt437052/index.html">N√£o deixe de aprender: um especialista em TI da universidade precisa</a></li>
<li><a href="../pt437054/index.html">Novos processadores Intel de 9¬™ gera√ß√£o: Core menos GPU</a></li>
<li><a href="../pt437056/index.html">O Zimbra Collaboration Suite e o Zextras Suite s√£o totalmente compat√≠veis com o sistema operacional RED dom√©stico</a></li>
<li><a href="../pt437062/index.html">O efeito do atraso e o comprimento dos terminais do microcircuito e do software no c√°lculo do comprimento / atraso total dos condutores</a></li>
<li><a href="../pt437064/index.html">Estrat√©gia vencedora do Gomoku - 35 jogadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>