<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêò üóø üíµ Comment utiliser les outils Twilio, Python et Google pour automatiser votre mariage üë∑ üßñüèª üßñüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur de l'article raconte comment il a r√©ussi √† appliquer des comp√©tences en programmation pour automatiser les processus de routine de son propre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment utiliser les outils Twilio, Python et Google pour automatiser votre mariage</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirex/blog/402827/">  <i>L'auteur de l'article raconte comment il a r√©ussi √† appliquer des comp√©tences en programmation pour automatiser les processus de routine de son propre √©v√©nement de mariage.</i> <br><br>  Pour la plupart des gens, le 3 septembre 2016 √©tait le samedi le plus courant, mais dans ma m√©moire cette date restera pour toujours, car c'est ce jour-l√† que ma femme et moi avons c√©l√©br√© un mariage. <br><br><img src="https://habrastorage.org/files/38f/a56/92c/38fa5692cb0b44e5886d66d912a39b87.jpg" alt="image"><br><br>  Lors de la planification d'un mariage, vous devez prendre en compte de nombreux points: la nourriture, la d√©coration et la d√©coration, les lampes de table (oui, s√©par√©es de la d√©coration), les fleurs, l'h√©bergement, le transport, les divertissements et le choix du lieu.  En g√©n√©ral, lors de la planification d'un mariage, vous √™tes confront√© √† de nombreuses inconnues, mais j'√©tais s√ªr d'une chose: aucun mariage ne peut se passer de tout un tas de listes, de listes imbriqu√©es qui ne se terminent pas jusqu'au bout.  Plus les listes flottaient devant mes yeux, plus je commen√ßais √† r√©fl√©chir √† la fa√ßon d'am√©liorer le processus de pr√©paration.  C'√©tait douloureusement inefficace et tout le travail a √©t√© effectu√© manuellement.  J'√©tais s√ªr que la technologie pouvait certainement aider √† am√©liorer au moins certains points. <br><a name="habracut"></a><br>  Vous serez peut-√™tre surpris d'apprendre que l'invitation √† un mariage co√ªte cher (plus de 380 livres par personne).  Vous devez d'abord envoyer des invitations pr√©liminaires avec une date et une br√®ve notification, puis seulement - √† part enti√®re, avec une description plus d√©taill√©e de l'√©v√©nement.  Tout cela, d'ailleurs, est envoy√© par courrier, ce qui signifie que c'est lent.  Les tentatives pour ¬´attraper¬ª les invit√©s et obtenir une r√©ponse de leur part pour savoir s'ils veulent venir √† la f√™te avec de la nourriture et des boissons gratuites (m√™me si, semble-t-il, qui ne veut pas?!) Prennent beaucoup de temps.  Et enfin, envoyer des invitations n'est pas respectueux de l'environnement, car les cartes papier sont une chose unique, elles oublient rapidement et deviennent inutiles pour tout le monde. <br><br>  Mais revenons aux listes.  Nous divisons les invit√©s en plusieurs groupes: <br><br><ol><li>  Ceux que vous aimeriez voir au festival </li><li>  Ceux qui ont r√©pondu √† la deuxi√®me invitation en demandant une r√©ponse </li><li>  Ceux qui ont accept√© l'invitation </li><li>  Ceux qui ont accept√© l'invitation et choisi la nourriture </li></ol><br>  Mais j'aime les listes: elles ont des exigences pr√©d√©finies qui en font un excellent objet pour l'automatisation. <br><br><h3>  Message dans une bouteille </h3><br>  J'√©tais s√ªr que tous les invit√©s potentiels, quel que soit leur √¢ge, avaient un t√©l√©phone portable, ce qui signifiait que le moment √©tait venu pour Twilio.  Le code donn√© ici peut √™tre ignor√© en toute s√©curit√© si vous le souhaitez, car il est toujours disponible dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel GitHub</a> correspondant. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le SMS</a> comme canal de communication r√©pond parfaitement √† mes besoins.  Je pouvais mettre en place un envoi massif de messages, traiter rapidement et efficacement les r√©ponses.  En faisant les premi√®res esquisses de travail du produit et en consid√©rant les options de base de donn√©es, j'ai essay√© de faire quelque chose de simple qui pourrait √™tre facilement partag√© et je ne voulais pas consacrer beaucoup de temps √† l'apparence.  En fin de compte, je suis tomb√© sur la biblioth√®que gspread python, qui m'a permis de lire et d'√©crire sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tables google</a> .  Ce n'√©tait pas l'option la plus rapide, mais plut√¥t flexible, ce qui facilitait l'acc√®s aux tableaux et la lecture des r√©sultats. <br><br>  Pour la premi√®re invite, j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©√© un tableau</a> avec trois colonnes: <br><br><ul><li>  Nom </li><li>  Num√©ro de t√©l√©phone </li><li>  Confirmation_status (Statut de confirmation) </li><li>  Statut des d√©tails du contact </li><li>  Message_count (Le nombre de messages envoy√©s √† l'invit√© a √©t√© utile √† l'avenir) </li></ul><br>  Apr√®s avoir termin√© la saisie des donn√©es de base, j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parcouru la</a> liste via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gspread</a> , qui a envoy√© un SMS √† chaque invit√© poss√©dant un num√©ro de mobile: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gspread <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> oauth2client.client <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SignedJwtAssertionCredentials <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> twilio.rest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TwilioRestClient <span class="hljs-comment"><span class="hljs-comment">#      #     json,    json_key = json.load(open('.json')) scope = ['https://spreadsheets.google.com/feeds'] credentials = SignedJwtAssertionCredentials(json_key['client_email'], json_key['private_key'].encode(), scope) gc = gspread.authorize(credentials) wks = gc.open("wedding_guests") #     workbook- wks_attendees = wks.get_worksheet(0) #     ACCOUNT_SID = 'TWILIO_ACCOUNT_SID' AUTH_TOKEN = 'TWILIO_AUTH_TOKEN' client = TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN) #    ,   range    for num in range(2, 60): print "sleeping for 2 seconds" time.sleep(2) #         guest_number = wks_attendees.acell('B'+str(num)).value guest_name = wks_attendees.acell('A'+str(num)).value Message_body = &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2709&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; Save the date! &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2709&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Lauren Pang and Thomas Curtis are delighted to invite you to our wedding.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Saturday 3rd September 2016. &lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Colville Hall,&lt;span class="pl-cce"&gt;\n&lt;/span&gt;Chelmsford Road,&lt;span class="pl-cce"&gt;\n&lt;/span&gt;White Roding,&lt;span class="pl-cce"&gt;\n&lt;/span&gt;CM6 1RQ.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;The Ceremony begins at 2pm.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;More details will follow shortly!&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Please text YES if you are saving the date and can join us or text NO if sadly, you won't be able to be with us.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, if not guest_number: #      print guest_name + ' telephone number empty not messaging' wks_attendees.update_acell('E'+str(num), '0') else: print 'Sending message to ' + guest_name client.messages.create( to="+" + guest_number, #  +   e.164 from_="", #     Twillio body=message_body, ) wks_attendees.update_acell('E'+str(num), int(wks_attendees.acell('E'+str(num)).value) + 1) # increment the message count row else: # else-  print 'finished'</span></span></code> </pre> <br>  Et comme les SMS sont g√©n√©ralement un peu ennuyeux, j'ai ajout√© du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Unicode</a> pour le pimenter.  Voici √† quoi ressemblait le message pour les invit√©s chanceux: <br><br><img src="https://habrastorage.org/files/f19/36c/7bb/f1936c7bbccd4cb29115c1fa182321f3.png" alt="image" width="340"><br><br>  Ensuite, j'ai utilis√© Flask comme serveur Web, fait ma demande d'URL pour Twilio Messaging pointer vers / messages et ajout√© des v√©rifications if simples pour analyser les r√©ponses: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route("/messages", methods=['GET', 'POST']) def hello_guest():  if "yes" in body_strip:    #      confirmation_status    wks_attendees.update_acell("F"+str(guest_confirmation_cell.row), 'Accepted')  #    ¬´ ¬ª       resp.message(u"\u2665" + "Thanks for confirming, we'll be in touch!" + u"\u2665")  # r ,    elif "no" in from_body.lower():    #    ¬´ ¬ª       wks_attendees.update_acell("F"+str(guest_confirmation_cell.row), 'Declined')    #       resp.message("Sorry to hear that, we still love you though!")  else:  #  ,        resp.message("You sent a different keyword, we need a yes or a no, you sent: "+           from_body)  return str(resp)</span></span></code> </pre><br><img src="https://habrastorage.org/files/e4e/e69/8e9/e4ee698e94b448ef9c8d6c3ac112f51d.png" alt="image" align="left" width="340"><img src="https://habrastorage.org/files/85b/422/750/85b42275037c4d16af0e6e2de2cffadf.png" alt="image" width="340"><br><br>  Le premier message a √©t√© envoy√© √† 8 h 37 le 19 f√©vrier et la premi√®re confirmation a √©t√© re√ßue un peu plus tard √† 8 h 40.  √Ä 9 h 38, j'avais d√©j√† re√ßu 23 confirmations, soit 32% des r√©ponses √©taient dans ma poche!  2 jours apr√®s le d√©but du publipostage, 58% des invit√©s ont d√©j√† confirm√© leur participation.  Malgr√© le succ√®s √©vident, ma future √©pouse n'a pas encore √©t√© impressionn√©e √† 100% par mon service SMS pour les invitations de mariage, et j'ai d√©cid√© d'ajouter des fonctionnalit√©s suppl√©mentaires √† l'application. <br><br>  Statistiques!  Je pourrais cr√©er une liste d'invit√©s √† jour et la fournir sur demande, en donnant √† ma future mari√©e une r√©troaction instantan√©e.  Le code s'est av√©r√© assez simple, car j'avais d√©j√† configur√© certains des compteurs les plus simples du tableau auparavant, et donc tout se r√©sumait √† obtenir le contenu des cellules individuelles et √† les ajouter √† SMS: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    guest_confirmed = wks_attendees.acell('C70').value guest_unconfirmed = wks_attendees.acell('C71').value guest_no_response = wks_attendees.acell('C72').value guest_acceptance = wks_attendees.acell('C73').value elif "numbers" in from_body.lower():  #   ( - ,   )  resp.message("RSVP update:\n\nTotal Accepted: " + guest_confirmed         "\n\nTotal declined: " guest_unconfirmed "\n\nTotal no response: "+         guest_no_response + "\n\nTotal acceptance rate: " + guest_acceptance)</span></span></code> </pre><br>  Exemple de SMS envoy√© par ce code: <br><br><img src="https://habrastorage.org/files/910/1cc/089/9101cc08985742d58228a005a33271a8.png" alt="image" width="340"><br><br>  Cela peut ne pas √™tre tr√®s beau, mais c'est tr√®s instructif. <br><br>  Le fait que Lauren puisse d√©sormais suivre les mises √† jour automatiques de la liste des invit√©s nous a √©vit√© bien des maux de t√™te.  En cons√©quence, j'ai re√ßu son approbation pour l'int√©gration g√©n√©ralis√©e de SMS, et bient√¥t cet outil a √©t√© utilis√© dans presque tous les processus o√π cela √©tait possible.  Certaines applications √©taient √©videntes, par exemple, l'envoi de notifications par SMS sur le lancement d'un site de mariage (r√©alis√©, en passant, sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heroku</a> ), ou l'utilisation de listes de cadeaux de mariage et de nombreuses autres solutions dont je suis fier √† ce jour. <br><br><h3>  F√™te glorieuse </h3><br>  Apr√®s avoir compil√© la liste des invit√©s et recueilli les r√©ponses, il est venu √† la le√ßon, qui est g√©n√©ralement report√©e √† plus tard - d√©couvrir les pr√©f√©rences gustatives des invit√©s.  La premi√®re √©tape a √©t√© d'envoyer un autre SMS informant les clients de la n√©cessit√© de visiter le site Internet et de s√©lectionner les cat√©gories de plats servis √† l'aide du formulaire google.  Le formulaire avait l'air assez ordinaire, mais il remplissait le m√™me fichier dans lequel il y avait des donn√©es sur les visiteurs.  Ainsi, nous avions maintenant √† la fois un tableau des visiteurs qui acceptaient les invitations et un tableau qui remplissait le formulaire de s√©lection des aliments.  Si nous parlions d'un outil d'automatisation ordinaire, je devrais attendre que les invit√©s choisissent lentement leur vaisselle, cependant, mon mariage a eu lieu avec le soutien de Twillio, et cela signifie que je pouvais obtenir une r√©ponse des invit√©s avec un minimum d'effort. <br><br>  Il a fallu v√©rifier deux tables au nom des convives et mettre √† jour le statut des plats s√©lectionn√©s d√®s r√©ception de nouvelles informations.  Cela a n√©cessit√© quelques cloches et sifflets suppl√©mentaires dans le code, mais d√®s que j'en ai fini avec eux, j'ai pu ex√©cuter le script d√®s que n√©cessaire, en recevant un SMS avec les derni√®res informations: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gspread <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> oauth2client.client <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SignedJwtAssertionCredentials <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> twilio.rest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TwilioRestClient <span class="hljs-comment"><span class="hljs-comment">#     json,    json_key = json.load(open('')) scope = ['https://spreadsheets.google.com/feeds'] credentials = SignedJwtAssertionCredentials(json_key['client_email'],                      json_key['private_key'].encode(),                      scope) gc = gspread.authorize(credentials) wks = gc.open("")  #      wks_attendees = wks.get_worksheet(0)  #   wks_food = wks.get_worksheet(1)  #    ACCOUNT_SID = 'TWILIO_ACCOUNT_SID' AUTH_TOKEN = 'TWILIO_AUTH_TOKEN' client = TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN) #   . -       for num in range(2, 60):  food_guest_name = wks_food.acell('B'+str(num)).value  #        if food_guest_name:    attendees_name = wks_attendees.find(val_food_guest_name).value    attendees_name_row = wks_attendees.find(val_food_guest_name).row    menu_status = wks_attendees.acell("G"+str(attendees_name_row)).value    if food_guest_name == attendees_name:      print      if menu_status == 'Y':  #   ,          print('Skipping')      else:  #    ,           print ('Food sheet name ' + food_guest_name + 'Attendees sheet name ' + attendees_name)        #            wks_attendees.update_acell("G"+str(attendees_name_row), 'Y')    else:      print('nothing found, moving on')      wks_attendees.update_acell('E'+str(num), int(wks.acell('E'+str(num)).value) + 1)  #      else:    #           client.messages.create(from_="",  #  Twillio                to="",  #                  body="Finished processing current meal listnnGuest meals confirmed" + guest_meals_confirmed + "\n\nGuest meals unconfirmed: " + guest_meals_unconfirmed)</span></span></code> </pre><br>  Maintenant que j'avais une liste d'invit√©s pr√©cise et une liste de plats constamment mise √† jour, il √©tait logique de rendre ces statistiques accessibles au public √† l'aide de l'application principale.  Pour cela, il a seulement fallu ajouter le contenu des cellules correspondantes √† la r√©ponse SMS: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#           elif "food" in body_strip.strip():  resp.message("Guest meals decided:" + guest_meals_confirmed + "\nGuest meals undecided: " + guest_meals_unconfirmed + "\n\nMenu breakdown:\n\n" + starter_option_1 +": " + starter_option_1_amount + "\n" + starter_option_2 +": " + starter_option_2_amount + "\n" + starter_option_3 +": " + starter_option_3_amount + "\n" + main_option_1 +": " + main_option_1_amount + "\n" + main_option_2 +": " + main_option_2_amount + "\n" + main_option_3 +": " + main_option_3_amount + "\n" + dessert_option_1 + ": " + dessert_option_1_amount + "\n" + dessert_option_2 + ": " + dessert_option_2_amount)</span></span></code> </pre><br><img src="https://habrastorage.org/files/13c/a50/9dc/13ca509dc74a4dcd9401f68f736fa69c.png" alt="image" width="340"><br><br>  Cette mesure s'est av√©r√©e tr√®s utile, car elle a permis √† l'entreprise au service des vacances de prendre connaissance de nos progr√®s et a fourni des informations tr√®s pratiques √† ceux qui n'avaient pas encore fait leur choix.  Le concurrent suivant pour l'automatisation √©tait le processus de r√©ception des r√©ponses des invit√©s.  Pour ce faire, il suffit de parcourir la liste, d'y trouver des "contrevenants" qui n'ont pas choisi leurs plats, et de leur envoyer des messages! <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> num <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">72</span></span>):  <span class="hljs-comment"><span class="hljs-comment">#         print "sleeping for 3 seconds"  time.sleep(3)  #            wedding_guest_number = wks_attendees.acell('B'+str(num)).value  #     wedding_guest_name = wks_attendees.acell('A'+str(num)).value  #     menu_guest = wks_attendees.acell('G'+str(num)).value  if not wedding_guest_number:    print wedding_guest_name+' telephone number empty not messaging'  #   ,     .            wks_attendees.update_acell('H'+str(num), '1')  #         else:    if menu_guest == "N":  #    !      !      print 'Sending message to '+wedding_guest_name      client.messages.create(        to="+" + wedding_guest_number,        from_="",  #   Twillio        body="If you have received this message, you have not chosen your food options for Tom &amp; Lauren's Wedding!\n\nYou can pick your choices via the website, no paper or postage required!\n\nhttp://www.yourwebsitehere.com/food"      )      wks_attendees.update_acell('H'+str(num), int(wks_attendees.acell('H'+str(num)).value) + 1)  #        else:          # else-   print 'finished'</span></span></code> </pre><br><img src="https://habrastorage.org/files/40a/1dd/ed8/40a1dded8a0b4697b34f7698bbc2917b.png" alt="image" width="340"><br><br>  Le grand jour approchait plus vite que nous ne pouvions l'imaginer.  La seule chose que nous devions faire √©tait d'envoyer le dernier SMS, rappelant aux clients les d√©tails de base et la n√©cessit√© de s'armer d'un parapluie, ce qui aiderait √† se prot√©ger de l'√©t√© britannique typiquement pluvieux: <br><br><img src="https://habrastorage.org/files/752/007/52e/75200752e7b04a8a8c488b8b923567a7.png" alt="image" width="340"><br><br><h3>  En conclusion </h3><br>  Organiser un mariage n'est jamais facile.  √Ä tout moment, il peut vous sembler que de nombreux aspects de l'√©v√©nement sont hors de votre contr√¥le.  L'automatisation m'a vraiment facilit√© la vie en fournissant un canal de communication direct avec les clients et d'innombrables outils pour suivre leurs r√©ponses et leur rappeler tout besoin de d√©cider et de r√©pondre.  Elle nous a aid√©s √† prendre en main l'une des questions les plus fastidieuses accompagnant de tels √©v√©nements, et nous a permis de gagner beaucoup de temps et de nous concentrer sur d'autres √©l√©ments importants d'un √©v√©nement aussi important dans nos vies. <br><br>  Cr√©er des solutions √©volutives pour des t√¢ches complexes n'est jamais facile, et m√™me l'une des versions finales de mon application pourrait √† peine faire face aux t√¢ches par endroits.  Au d√©part, j'avais pr√©vu de d√©velopper une solution plus compl√®te, avec visualisation des progr√®s, int√©gration vocale, moins d√©pendante des scripts CLI, mais le temps a pr√©valu dans cette course.  En g√©n√©ral, je suis satisfait de la fa√ßon dont tout s'est pass√©.  Il n'y a pas de syst√®mes de communication parfaits.  Vous devez toujours utiliser la cha√Æne qui convient le mieux √† votre public, que ce soit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SMS</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voice</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chat</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Video</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©maphore</a> . <br><br>  Si vous voulez parler de l'automatisation du mariage, √©crivez-moi sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Twitter</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/329/5ba/c7b/3295bac7b7fb4687b452049ac5cec9bc.png" alt="image"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr402827/">https://habr.com/ru/post/fr402827/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr402813/index.html">Gadgets du march√© aux puces: cam√©scope Toshiba Camileo P10</a></li>
<li><a href="../fr402815/index.html">Com√®te Hale-Bopp</a></li>
<li><a href="../fr402817/index.html">L'intrication quantique sans confusion - qu'est-ce que c'est</a></li>
<li><a href="../fr402821/index.html">Tesla Amazing - des autocollants geek d'auteurs russes qui peuvent √™tre coll√©s n'importe o√π</a></li>
<li><a href="../fr402823/index.html">L'industrie des technologies d'assurance est l'un des secteurs verticaux des technologies financi√®res qui conna√Æt la croissance la plus rapide</a></li>
<li><a href="../fr402829/index.html">Un petit guide sur le monde des consortiums blockchain</a></li>
<li><a href="../fr402831/index.html">Pour comprendre l'avenir de l'industrie des services financiers, il faut arr√™ter de penser en termes de fintech</a></li>
<li><a href="../fr402833/index.html">Fonctionnement de l'infrastructure Internet</a></li>
<li><a href="../fr402835/index.html">10 tendances Insurtech 2017</a></li>
<li><a href="../fr402837/index.html">Pourquoi la r√©alit√© virtuelle est-elle une application de tueur pour la blockchain?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>