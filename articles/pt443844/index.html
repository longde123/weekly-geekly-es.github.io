<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùî üë®‚Äçüë©‚Äçüë¶ ü§Ωüèø Arquitetura estrat√©gica OpenSSL üëå üë®üèΩ‚Äçüöí ü§∂üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste documento, o Comit√™ de Gerenciamento do OpenSSL descreve os princ√≠pios b√°sicos da arquitetura estrat√©gica do OpenSSL. A partir do 3.0.0, v√°rias ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arquitetura estrat√©gica OpenSSL</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443844/">  <font color="gray">Neste documento, o Comit√™ de Gerenciamento do OpenSSL descreve os princ√≠pios b√°sicos da arquitetura estrat√©gica do OpenSSL.</font>  <font color="gray">A partir do 3.0.0, v√°rias vers√µes ser√£o necess√°rias para passar da arquitetura atual (vers√£o 1.1.1) para o futuro.</font> <br><br>  In√∫meras mudan√ßas s√£o esperadas na arquitetura.  Oferecemos um poss√≠vel caminho de migra√ß√£o.  O lan√ßamento do OpenSSL 3.0.0 afeta minimamente a grande maioria dos aplicativos existentes; quase todos os aplicativos alfabetizados precisam apenas ser recompilados. <br><br>  A funcionalidade atual fornecida pela interface do mecanismo ser√° substitu√≠da pela interface do software ao longo do tempo.  O OpenSSL 3.0.0 manter√° o suporte do mecanismo.  A arquitetura futura pode ser totalmente implementada n√£o antes do OpenSSL 4.0.0. <br><a name="habracut"></a><br><h1>  Arquitetura atual </h1><br>  O OpenSSL atualmente possui quatro componentes principais: <br><br><ol><li> libcrypto.  A biblioteca principal para fornecer implementa√ß√µes de v√°rias primitivas criptogr√°ficas.  Al√©m disso, fornece um conjunto de servi√ßos de suporte para libssl e libcrypto, al√©m de implementa√ß√µes de protocolo como CMS e OCSP. <br></li><li>  O motor  A funcionalidade do libcrypto pode ser estendida atrav√©s da API do mecanismo. <br><br>  Normalmente, os mecanismos s√£o m√≥dulos carregados dinamicamente registrados na libcrypto e usando ganchos dispon√≠veis para implementar algoritmos criptogr√°ficos, na maioria das vezes implementa√ß√µes alternativas de algoritmos j√° fornecidos pela libcrypto (por exemplo, com suporte √† acelera√ß√£o de hardware), mas tamb√©m podem incluir algoritmos n√£o implementados no OpenSSL por por padr√£o (por exemplo, o mecanismo GOST implementa a fam√≠lia russa de algoritmos GOST).  Alguns mecanismos v√™m com a distribui√ß√£o OpenSSL, enquanto outros v√™m com terceiros (novamente, GOST). <br></li><li>  libssl.  Uma biblioteca que depende da libcrypto e implementa os protocolos TLS e DTLS. <br></li><li>  Aplica√ß√µes  Um conjunto de ferramentas de linha de comando que usam os componentes b√°sicos da libssl e libcrypto para fornecer um conjunto de fun√ß√µes criptogr√°ficas e outras, como: <br><br><ul><li>  Gera√ß√£o e verifica√ß√£o de chaves e par√¢metros <br></li><li>  Gera√ß√£o e verifica√ß√£o de certificado <br></li><li>  Ferramentas de teste SSL / TLS <br></li><li>  Verifica√ß√£o ASN.1 <br></li><li>  e outros </li></ul><br>  O OpenSSL atualmente possui os seguintes recursos: <br><br><ol><li>  EVP  A API da camada EVP (envelope) fornece uma interface abstrata de alto n√≠vel para a funcionalidade criptogr√°fica, sem estar vinculada a uma implementa√ß√£o espec√≠fica.  O uso direto de implementa√ß√µes espec√≠ficas de algoritmos criptogr√°ficos ignorando as interfaces EVP n√£o √© recomendado.  Ele tamb√©m fornece opera√ß√µes compostas, como assinatura e verifica√ß√£o.  Algumas opera√ß√µes compostas tamb√©m s√£o fornecidas como uma opera√ß√£o no n√≠vel EVP (por exemplo, HMAC-SHA256).  O EVP tamb√©m permite o uso de algoritmos criptogr√°ficos de maneira algor√≠tmica-agn√≥stica (por exemplo, EVP_DigestSign funciona para os algoritmos RSA e ECDSA). <br></li><li>  O FIPS140 n√£o √© suportado, est√° dispon√≠vel apenas no OpenSSL-1.0.2, que √© anterior √† arquitetura atual e n√£o √© compat√≠vel com API ou ABI. </li></ol><br><h3>  Conceito de componente </h3><br>  A arquitetura existente √© uma estrutura simples de quatro n√≠veis com uma camada de criptografia na parte inferior.  A camada TLS depende da camada criptogr√°fica e os aplicativos dependem da camada TLS e da camada criptogr√°fica. <br><br>  Nota: a presen√ßa de um componente no diagrama n√£o significa que o componente √© uma API p√∫blica ou se destina ao acesso / uso direto pelo usu√°rio final. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/703/5fb/53a/7035fb53a38396c1e705b43c347228ce.png"><br><br><h3>  Diagrama de Pacotes </h3><br>  Os componentes descritos acima s√£o empacotados em bibliotecas (libcrypto e libssl) e nas interfaces correspondentes do kernel, bem como na linha de comando execut√°vel (openssl) para iniciar v√°rios aplicativos.  Isso √© mostrado no diagrama abaixo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5a/b6d/23f/c5ab6d23ff2fea22d2585570260060ab.png"><br><br><h1>  Arquitetura futura </h1><br>  Recursos da arquitetura futura: <br><br><ul><li>  Os servi√ßos do kernel formam os blocos de constru√ß√£o usados ‚Äã‚Äãpor aplicativos e provedores (por exemplo, BIO, X509, SECMEM, ASN1, etc.). <br></li><li>  Os fornecedores usam algoritmos criptogr√°ficos e servi√ßos de suporte.  Um provedor implementa uma ou mais das seguintes fun√ß√µes: <br><br><ul><li>  Primitivas criptogr√°ficas para o algoritmo: criptografia, descriptografia, assinatura, hash, etc. <br></li><li>  Serializa√ß√£o para o algoritmo, por exemplo, a fun√ß√£o de converter a chave privada em um arquivo PEM.  A serializa√ß√£o pode estar em formatos ou formatos n√£o suportados no momento. <br></li><li>  Armazene o back-end do carregador.  Atualmente, o OpenSSL √© fornecido com um gerenciador de inicializa√ß√£o para ler chaves, par√¢metros e outros elementos dos arquivos.  Os fornecedores podem implementar downloaders para ler dados de outros lugares (por exemplo, de um diret√≥rio LDAP). </li></ul><br>  O provedor pode ser totalmente aut√¥nomo ou usar servi√ßos fornecidos por diferentes provedores ou servi√ßos de kernel.  Por exemplo, um aplicativo pode usar primitivas criptogr√°ficas para um algoritmo implementado por um fornecedor de acelerador de hardware, mas usa os servi√ßos de serializa√ß√£o de outro fornecedor para exportar chaves para o formato PKCS # 12. <br><br>  O provedor padr√£o (que cont√©m o n√∫cleo das implementa√ß√µes atuais do algoritmo criptogr√°fico OpenSSL) ser√° "incorporado", mas outros provedores poder√£o carregar dinamicamente no tempo de execu√ß√£o. <br><br>  O (s) m√≥dulo (s) de provedores herdados fornecer√° implementa√ß√µes criptogr√°ficas para algoritmos mais antigos (por exemplo, DES, MDC2, MD2, Blowfish, CAST).  Publicaremos regras sobre como e quando os algoritmos passam de um provedor padr√£o para um provedor desatualizado. <br><br>  O provedor FIPS que implementa o m√≥dulo criptogr√°fico OpenSSL FIPS pode carregar dinamicamente no tempo de execu√ß√£o. <br></li><li>  O kernel fornece acesso aos servi√ßos oferecidos pelos provedores de aplicativos (e outros).  Os fornecedores d√£o ao kernel acesso aos m√©todos.  Um kernel √© um mecanismo pelo qual implementa√ß√µes espec√≠ficas de coisas como algoritmos s√£o descobertas. <br><br>  O kernel implementa uma fun√ß√£o de pesquisa baseada em propriedades para encontrar algoritmos.  Por exemplo, isso encontrar√° um algoritmo em que "fips = true" ou "tamanho da chave = 128, tempo_ constante = verdadeiro".  Os detalhes ser√£o publicados nos documentos subseq√ºentes do projeto. <br></li><li>  Implementa√ß√µes de protocolo como TLS, DTLS. </li></ul><br>  A arquitetura futura possui as seguintes caracter√≠sticas: <br><br><ul><li>  A camada EVP se torna um inv√≥lucro fino para servi√ßos implementados por meio de fornecedores.  A maioria das chamadas √© realizada com pr√©-processamento, p√≥s-processamento ou nenhum processamento. <br></li><li>  Novas APIs de EVP aparecer√£o para pesquisar no kernel a implementa√ß√£o do algoritmo que ser√° usado para qualquer chamada de EVP. <br></li><li>  As informa√ß√µes ser√£o transferidas entre a biblioteca principal e os fornecedores da mesma maneira, independentemente de sua implementa√ß√£o. <br></li><li>  APIs obsoletas (como APIs criptogr√°ficas de baixo n√≠vel que n√£o passam pela camada EVP) ser√£o exclu√≠das.  Observe que existem APIs desatualizadas para algoritmos que n√£o est√£o desatualizados (por exemplo, o AES n√£o √© um algoritmo desatualizado, mas AES_encrypt √© uma API desatualizada). <br></li><li>  O m√≥dulo criptogr√°fico OpenSSL FIPS ser√° implementado como um provedor carregado dinamicamente.  Ele ser√° aut√¥nomo (ou seja, pode depender apenas das bibliotecas e servi√ßos de tempo de execu√ß√£o do sistema fornecidos pelo kernel). <br></li><li>  Outras interfaces tamb√©m podem ser convertidas para o uso do kernel ao longo do tempo (por exemplo, OSSL_STORE). <br></li><li>  O uso do mecanismo vai para os fornecedores.  <i>"Adeus, engenheiros, ol√°, fornecedores</i> . <i>"</i> </li></ul><br><h3>  Conceito de componente </h3><br>  O diagrama abaixo fornece uma vis√£o geral dos componentes da futura arquitetura OpenSSL. <br><br>  Nota: a presen√ßa de um componente no diagrama n√£o significa que o componente √© uma API p√∫blica ou se destina ao acesso / uso direto pelo usu√°rio final. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/925/d49/49a/925d4949a0c733d235d94f1f058530c1.png"><br><br>  Os seguintes componentes s√£o mostrados aqui: <br><br><ul><li>  Aplica√ß√µes: utilit√°rios de linha de comando: ca, cifras, cms, dgst etc. <br></li><li>  Protocolos: o componente fornece a capacidade de se comunicar entre os pontos de extremidade usando protocolos padr√£o: <br><ul><li>  Protocolos TLS: implementa√ß√£o de todos os protocolos TLS / DTLS suportados e infraestrutura de atendimento: <br><ul><li>  BIO SSL: BIO para comunica√ß√£o TLS <br></li><li>  Statem: m√°quina de estado TLS <br></li><li>  Registro: camada de registro TLS </li></ul></li><li>  Outros protocolos <br><ul><li>  CMS: implementando o padr√£o de sintaxe de mensagem criptogr√°fica <br></li><li>  OCSP: Implementa√ß√£o do Protocolo de Status do Certificado Online <br></li><li>  TS: Implementa√ß√£o do Protocolo de Registro de Data e Hora </li></ul></li><li>  Servi√ßos de suporte: Componentes projetados especificamente para suportar a implementa√ß√£o de c√≥digo de protocolo <br><ul><li>  Pacote: componente interno para leitura de mensagens de protocolo <br></li><li>  Wpacket: um componente interno para gravar mensagens de protocolo </li></ul></li></ul></li><li>  Kernel: este √© o componente fundamental que conecta solicita√ß√µes de servi√ßo (por exemplo, criptografia) ao provedor de servi√ßos.  Permite que os fornecedores registrem seus servi√ßos junto com suas propriedades.  O kernel tamb√©m fornece a capacidade de encontrar um servi√ßo com um determinado conjunto de propriedades que o servi√ßo deve executar.  Por exemplo, as propriedades do servi√ßo de criptografia podem incluir "aead", "aes-gcm", "fips", "security-bits = 128" e assim por diante. <br></li><li>  Provedor padr√£o: implementa um conjunto de servi√ßos padr√£o registrados no kernel. <br><ul><li>  Servi√ßos de Suporte <br><ul><li>  Implementa√ß√µes de baixo n√≠vel: este √© um conjunto de componentes que realmente implementam primitivas criptogr√°ficas. </li></ul></li></ul></li><li>  Fornecedor de FIPS: implementa um conjunto de servi√ßos que s√£o verificados e dispon√≠veis para o n√∫cleo do FIPS.  Inclui os seguintes servi√ßos de suporte: <br><ul><li>  POST: Power On Self Test <br></li><li>  KAT: testes de resposta conhecida <br></li><li>  Verifica√ß√£o de integridade <br></li><li>  Implementa√ß√µes de baixo n√≠vel: este √© um conjunto de componentes que realmente implementam primitivas criptogr√°ficas (para satisfazer o requisito FIPS independente). </li></ul></li><li>  Provedor de algoritmos herdados: fornece implementa√ß√µes de algoritmos herdados que ser√£o fornecidos por meio da API EVP. <br></li><li>  Fornecedor de terceiros: n√£o faz parte da distribui√ß√£o OpenSSL.  Terceiros podem vender seus pr√≥prios fornecedores. <br></li><li>  Servi√ßos gerais: formam os blocos de constru√ß√£o usados ‚Äã‚Äãpor aplicativos e fornecedores (por exemplo, BIO, X509, SECMEM, ASN1, etc.). <br></li><li>  APIs obsoletas.  API "de baixo n√≠vel": aqui a palavra "obsoleto" refere-se especificamente √† API e n√£o ao pr√≥prio algoritmo.  Por exemplo, o AES n√£o √© um algoritmo desatualizado, mas existem APIs desatualizadas para ele (por exemplo, AES_encrypt). </li></ul><br><h3>  Diagrama de Pacotes </h3><br>  Os v√°rios componentes descritos acima no diagrama conceitual dos componentes est√£o fisicamente empacotados em: <br><br><ul><li>  Aplicativos execut√°veis ‚Äã‚Äãpara usu√°rios <br></li><li>  Biblioteca (s) para aplicativos <br></li><li>  M√≥dulos carreg√°veis ‚Äã‚Äãdinamicamente para o kernel. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/091/79f/c41/09179fc4151dc35dc37a7da607144f99.png"><br><br>  Os seguintes pacotes reais s√£o mostrados aqui: <br><br><ul><li>  O arquivo execut√°vel √© OpenSSL.  Aplicativo de linha de comando. <br></li><li>  Libssl.  Cont√©m tudo o que est√° diretamente relacionado ao TLS e DTLS.  Seu conte√∫do √© o mesmo que no libssl atual.  Observe que alguns servi√ßos de suporte ser√£o movidos para a libcrypto. <br></li><li>  Libcrypto  Esta biblioteca cont√©m os seguintes componentes: <br><ul><li>  Implementa√ß√µes dos principais servi√ßos: X509, ASN1, EVP, OSSL_STORE, etc. <br></li><li>  O n√∫cleo <br></li><li>  Protocolos n√£o TLS ou DTLS <br></li><li>  Servi√ßos de suporte a protocolos (por exemplo, pacotes e pacotes) <br></li><li>  Provedor padr√£o contendo implementa√ß√µes de todos os algoritmos padr√£o </li></ul></li><li>  Libcrypto-legado.  Fornece APIs de baixo n√≠vel herdadas.  A implementa√ß√£o dos algoritmos para essas APIs pode vir de qualquer provedor. <br></li><li>  M√≥dulo FIPS.  Cont√©m um provedor FIPS que implementa um conjunto de servi√ßos verificados pelo FIPS e registrados no kernel. <br></li><li>  M√≥dulo herdado.  Cont√©m um provedor desatualizado. </li></ul></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt443844/">https://habr.com/ru/post/pt443844/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt443834/index.html">Runet na virada do mil√™nio: do que voc√™ se lembra?</a></li>
<li><a href="../pt443836/index.html">Usando contas inteligentes e ativos inteligentes Waves em instrumentos financeiros</a></li>
<li><a href="../pt443838/index.html">Crie automaticamente contas do AD no Zimbra Collaboration Suite</a></li>
<li><a href="../pt443840/index.html">Univention Corporate Server (UCS) - instala√ß√£o de um servidor LDAP simples e conveniente com um painel da web e sua conex√£o com o Nextcloud</a></li>
<li><a href="../pt443842/index.html">Somos √°geis ou √°geis?</a></li>
<li><a href="../pt443846/index.html">Acesso ao servidor linux usando o Python Telegram bot</a></li>
<li><a href="../pt443854/index.html">Projeto de RPG de quatro eixos</a></li>
<li><a href="../pt443856/index.html">Trabalho em metal em m√°quinas CNC: como come√ßar a produzir produtos de classe mundial?</a></li>
<li><a href="../pt443860/index.html">Programador como um servi√ßo para pequenas empresas. Ser√° que vai voar ou n√£o?</a></li>
<li><a href="../pt443862/index.html">As fechaduras do promotor. O Bestchange est√° bloqueado novamente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>