<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌘 🕐 🎢 Pemrograman Visual untuk Sonoff Basic 🙇🏾 ☝🏾 👩🏾‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel tentang cara membuat pengontrol logika yang dapat diprogram dari perangkat Cina murah. Perangkat semacam itu akan menemukan penerapannya baik ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemrograman Visual untuk Sonoff Basic</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436272/"><img src="https://habrastorage.org/getpro/habr/post_images/df6/125/27b/df612527bc8ae8a2c188d370940dbf78.jpg" alt="gambar"><br><br>  Artikel tentang cara membuat pengontrol logika yang dapat diprogram dari perangkat Cina murah.  Perangkat semacam itu akan menemukan penerapannya baik dalam otomatisasi rumah dan sebagai pelajaran praktis dalam ilmu komputer sekolah. <br><a name="habracut"></a><br>  <em><font color="#424949">Sebagai referensi, secara default, program Sonoff Basic bekerja dengan aplikasi mobile melalui layanan cloud Cina, setelah perubahan yang diusulkan, semua interaksi lebih lanjut dengan perangkat ini akan menjadi mungkin di browser.</font></em> <br><br><h2>  <font color="#2874A6">Bagian I. Menghubungkan Sonoff ke MGT24</font> </h2><br><h3>  <font color="#424949">Langkah 1. Buat panel kontrol</font> </h3><br>  Daftarkan di situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mgt24</a> (jika Anda belum mendaftar) dan masuklah di bawah akun Anda. <br><br><div class="spoiler">  <b class="spoiler_title">Login</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/9c4/caa/9d0/9c4caa9d0e70ad4b30a23555a816c780.png" alt="gambar"><br></div></div><br>  Untuk membuat panel kontrol untuk perangkat baru, klik tombol "+". <br><br><div class="spoiler">  <b class="spoiler_title">Contoh Pembuatan Panel</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/afa/ccd/ed8/afaccded8dda9b70d5145da032a878fc.png" alt="gambar"><br></div></div><br>  Setelah panel dibuat, itu akan muncul di daftar panel Anda. <br><br>  Pada tab "Pengaturan" pada panel yang dibuat, cari bidang "Device ID" dan "Kunci Otorisasi", di masa mendatang, informasi ini akan diperlukan saat mengatur perangkat Sonoff. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh Tab</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/523/a96/d0a/523a96d0ae4d3682ad106a7adbc3e289.png" alt="gambar"><br></div></div><br><h3>  <font color="#424949">Langkah 2. Mem-flash perangkat</font> </h3><br>  Dengan menggunakan utilitas <a href="">XTCOM_UTIL,</a> unduh firmware <a href="">Sonoff Basic PLC</a> ke perangkat, untuk ini Anda memerlukan konverter USB-TTL.  Ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">instruksi</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">instruksi video</a> . <br><br><h3>  <font color="#424949">Langkah 3. Konfigurasikan perangkat</font> </h3><br>  Terapkan daya ke perangkat, setelah LED menyala, tekan tombol dan tahan hingga LED mulai berkedip secara berkala. <br><br>  Pada titik ini, jaringan wi-fi baru yang disebut "PLC Sonoff Basic" akan muncul, sambungkan komputer Anda ke jaringan ini. <br><br><div class="spoiler">  <b class="spoiler_title">Indikasi decoding LED</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><th>  Indikasi LED </th><th>  Status perangkat </th></tr><tr><td>  flashing ganda berkala </td><td>  tidak ada koneksi dengan router </td></tr><tr><td>  bersinar terus menerus </td><td>  koneksi dengan router </td></tr><tr><td>  flashing seragam berkala </td><td>  mode titik akses wifi </td></tr><tr><td>  padam </td><td>  tidak ada kekuatan </td></tr></tbody></table></div><br></div></div><br>  Buka browser Internet dan masukkan teks "192.168.4.1" di bilah alamat, buka halaman pengaturan jaringan perangkat. <br><br>  Isi kolom sebagai berikut: <br><br><ul><li>  "Nama Jaringan" dan "Kata Sandi" (untuk mengikat perangkat ke router wi-fi rumah Anda). </li><li>  "Device ID" dan "Kunci Otorisasi" (untuk mengotorisasi perangkat pada layanan MGT24). </li></ul><br><div class="spoiler">  <b class="spoiler_title">Contoh pengaturan parameter jaringan perangkat</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/c22/0b0/8d4/c220b08d4abca1789b20e3f08ea5577e.png" alt="gambar"><br></div></div><br>  Simpan pengaturan dan reboot perangkat. <br><br>  Ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tutorial video</a> . <br><br><h3>  <font color="#424949">Langkah 4. Menghubungkan sensor (opsional)</font> </h3><br>  Firmware saat ini mendukung hingga empat sensor suhu ds18b20.  Berikut ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video tutorial</a> tentang pemasangan sensor.  Rupanya, langkah ini akan menjadi yang paling sulit, karena akan membutuhkan tangan langsung dan besi solder. <br><br><h2>  <font color="#2874A6">Bagian II.</font>  <font color="#2874A6">Pemrograman visual</font> </h2><br><h3>  <font color="#424949">Langkah 1. Scripting</font> </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Blockly</a> digunakan sebagai lingkungan pemrograman, lingkungannya mudah dipelajari, sehingga Anda tidak perlu menjadi programmer untuk membuat skrip sederhana. <br><br>  Saya menambahkan blok khusus untuk menulis dan membaca parameter perangkat.  Akses ke parameter apa pun dilakukan dengan nama.  Nama majemuk digunakan untuk parameter perangkat jarak jauh: "parameter @ perangkat". <br><br><div class="spoiler">  <b class="spoiler_title">Daftar pilihan drop-down</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/3a8/b7c/db2/3a8b7cdb22abbe0c400c60830da7b996.png" alt="gambar"><br></div></div><br>  Contoh skenario pengaktifan siklus on dan off load (1Hz): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/701/6d4/965/7016d496538dd3cf3abae9b2587b6401.png" alt="gambar"><br><br>  Contoh skenario yang menyinkronkan pengoperasian dua perangkat terpisah.  Yaitu, relai perangkat target mengulangi operasi relai perangkat jarak jauh. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d7/45c/40c/9d745c40c3ddac6d21cd473f025b68d8.png" alt="gambar"><br><br>  Skenario untuk termostat (tanpa histeresis): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2a3/b2d/027/2a3b2d027fe0c8971b4b17aab2433ab7.png" alt="gambar"><br><br>  Untuk membuat skrip yang lebih kompleks, Anda dapat menggunakan variabel, loop, fungsi (dengan argumen) dan konstruksi lainnya.  Saya tidak akan menjelaskan semua ini secara rinci di sini, jaringan sudah memiliki cukup banyak <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">materi pelatihan tentang Blockly</a> . <br><br><h3>  <font color="#424949">Langkah 2. Urutan Scripting</font> </h3><br>  Script berjalan terus menerus, dan segera setelah mencapai akhirnya dimulai kembali.  Ada dua blok yang dapat menangguhkan sementara skrip, "tunda" dan "jeda". <br><br>  Blok penundaan digunakan untuk penundaan milidetik atau mikrodetik.  Unit ini secara ketat mempertahankan interval waktu, menghalangi operasi seluruh perangkat. <br><br>  Blok jeda digunakan untuk penundaan kedua (mungkin kurang), dan itu tidak memblokir eksekusi proses lain dalam perangkat. <br><br>  Jika naskah di dalam dirinya berisi loop tak terbatas, di dalam tubuh yang tidak ada "jeda", penerjemah secara independen memulai jeda kecil. <br><br>  Jika tumpukan memori yang dialokasikan habis, interpreter akan menghentikan eksekusi skrip yang rakus (hati-hati dengan fungsi rekursif). <br><br><h3>  <font color="#424949">Langkah 3. Skrip Debugging</font> </h3><br>  Untuk men-debug skrip yang sudah dimuat ke perangkat, Anda dapat menjalankan jejak program dalam langkah-langkah.  Ini bisa sangat berguna ketika perilaku skrip bukan yang dimaksudkan oleh penulis.  Dalam hal ini, pelacakan memungkinkan penulis untuk dengan cepat menemukan sumber masalah dan memperbaiki kesalahan dalam skrip. <br><br>  Skrip untuk menghitung faktorial dalam mode debug: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/98e/845/718/98e8457184a5c48ee027e2ac8af3ed77.png" alt="gambar"><br><br>  Alat debugging sangat sederhana dan terdiri dari tiga tombol utama: "mulai", "satu langkah maju" dan "berhenti" (kami juga tidak akan lupa tentang "masuk" dan "keluar" dari mode debugging).  Selain penelusuran langkah demi langkah, Anda dapat mengatur breakpoint pada blok apa pun (dengan mengklik blok). <br>  Untuk menampilkan nilai parameter saat ini (sensor, relay) di monitor, gunakan blok cetak. <br>  Berikut ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video ikhtisar</a> tentang menggunakan debugger. <br><br><h2>  <font color="#2874A6">Bagian untuk yang penasaran.</font>  <font color="#2874A6">Tapi apa yang ada di bawah tenda?</font> </h2><br>  Agar skrip dapat bekerja pada perangkat target, dikembangkan interpreter bytecode dan assembler untuk 38 instruksi.  Generator kode khusus dibangun ke dalam kode sumber blockly yang mengubah blok visual menjadi instruksi assembler.  Di masa depan, program assembler ini dikonversi menjadi bytecode dan ditransfer ke perangkat untuk dieksekusi. <br><br>  Arsitektur mesin virtual ini cukup sederhana dan tidak ada gunanya menggambarkannya, di internet Anda akan menemukan banyak artikel tentang desain mesin virtual sederhana. <br><br>  Untuk tumpukan mesin virtual saya, saya biasanya mengalokasikan 1000 byte, ini cukup dengan margin.  Tentu saja, rekursi yang dalam dapat menguras tumpukan apa pun, tetapi tidak mungkin menemukan aplikasi praktis. <br><br>  Bytecode yang dihasilkan cukup kompak.  Sebagai contoh, bytecode untuk menghitung faktorial yang sama hanya 49 byte.  Ini adalah presentasi visualnya: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a94/d9f/511/a94d9f51102478e3b5d0db578f95132e.png" alt="gambar"><br><br>  Dan ini adalah program assemblernya: <br><br><pre><code class="javascript hljs">shift <span class="hljs-number"><span class="hljs-number">-1</span></span> ldi <span class="hljs-number"><span class="hljs-number">10</span></span> call factorial, <span class="hljs-number"><span class="hljs-number">1</span></span> print exit :factorial ld_arg <span class="hljs-number"><span class="hljs-number">0</span></span> ldi <span class="hljs-number"><span class="hljs-number">1</span></span> gt je <span class="hljs-number"><span class="hljs-number">8</span></span> ld_arg <span class="hljs-number"><span class="hljs-number">0</span></span> ld_arg <span class="hljs-number"><span class="hljs-number">0</span></span> ldi <span class="hljs-number"><span class="hljs-number">1</span></span> sub call factorial, <span class="hljs-number"><span class="hljs-number">1</span></span> mul ret ldi <span class="hljs-number"><span class="hljs-number">1</span></span> ret</code> </pre> <br>  Jika bentuk representasi assembler tidak memiliki nilai praktis, maka tab javascrit, sebaliknya, memberikan tampilan yang lebih akrab daripada blok visual: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">num</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (num &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> num * factorial(num - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.alert(factorial(<span class="hljs-number"><span class="hljs-number">10</span></span>));</code> </pre><br>  Adapun kinerja.  Ketika saya memulai skenario flasher yang paling sederhana, pada layar osiloskop saya mendapatkan 47kHz berkelok-kelok (pada kecepatan jam prosesor 80MHz). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5be/199/e2c/5be199e2c8efd52bc0fb5d0b179c3f24.png" alt="gambar"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f66/2e9/7cf/f662e97cfda73f74647d23a03a5d4696.jpg" alt="gambar"><br><br>  Saya pikir ini adalah hasil yang baik, setidaknya kecepatan ini hampir sepuluh kali lebih cepat daripada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lua</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Espruino</a> . <br><br><h2>  <font color="#2874A6">Bagian terakhir</font> </h2><br>  Sebagai rangkuman, saya akan mengatakan bahwa penggunaan skrip memungkinkan kita tidak hanya memprogram logika perangkat individual, tetapi juga memungkinkan untuk menautkan beberapa perangkat ke dalam satu mekanisme tunggal, di mana beberapa perangkat memengaruhi perilaku orang lain. <br><br>  Saya juga mencatat bahwa metode yang dipilih untuk menyimpan skrip (langsung di perangkat itu sendiri, dan bukan di server), menyederhanakan beralih perangkat yang ada ke server lain, misalnya, ke rumah Raspberry, di sini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">instruksi</a> . <br><br>  <i>Itu saja, saya akan senang mendengar saran dan kritik yang membangun.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id436272/">https://habr.com/ru/post/id436272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id436262/index.html">* Pembaruan Ethereum "Constantinople" ditunda karena kerentanan potensial ditemukan pada saat terakhir</a></li>
<li><a href="../id436264/index.html">Mono-repositori: tolong jangan (bagian 2)</a></li>
<li><a href="../id436266/index.html">Penskalaan Ekstrim di Alibaba JDK</a></li>
<li><a href="../id436268/index.html">Kami mengumpulkan setumpuk lengkap</a></li>
<li><a href="../id436270/index.html">35% dari penonton Runet tidak menggunakan komputer untuk Internet sama sekali</a></li>
<li><a href="../id436274/index.html">Aplikasi seluler untuk pendaftaran kecelakaan sedang dibuat di Rusia</a></li>
<li><a href="../id436278/index.html">Memverifikasi proyek CDK dengan IntelliJ IDEA Static Analyzer</a></li>
<li><a href="../id436280/index.html">Terapkan honeypot pada router Cisco</a></li>
<li><a href="../id436282/index.html">Tantangan dari perusahaan asing atau bagaimana saya gagal dalam wawancara</a></li>
<li><a href="../id436288/index.html">Bagaimana monopoli dimulai, atau sedikit ribut dengan IBM PC 5150</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>