<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµ üï∫üèª üì£ ¬øHas ordenado la entrega? C√≥mo Crossroads entrega 6,000 pedidos por d√≠a üåØ üéë üôÜüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La gente ama la entrega. Por una peque√±a tarifa, compra la oportunidad de obtener los productos necesarios sin salir de su hogar: comida de su restaur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øHas ordenado la entrega? C√≥mo Crossroads entrega 6,000 pedidos por d√≠a</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/484220/">  La gente ama la entrega.  Por una peque√±a tarifa, compra la oportunidad de obtener los productos necesarios sin salir de su hogar: comida de su restaurante favorito, muebles de gran tama√±o, un libro que quer√≠a leer durante mucho tiempo, y de hecho cualquier cosa.  Y el aumento en el n√∫mero de servicios para la entrega r√°pida de todo en el mundo solo confirma esta tesis.  S√≠, y para las tiendas es una ventaja: se ha asociado con cualquier entrega de productos a la puerta y ha aumentado su cheque. <br><br>  Nosotros en "Crossroads" tenemos nuestra propia entrega.  Para una persona del exterior, el proceso de entrega de una tienda a una casa se ve as√≠: <br><br><ol><li>  Eleg√≠ algo en el sitio y lo puse en la cesta. </li><li>  Ingres√© la direcci√≥n y pagu√© el pedido. </li><li>  La tienda r√°pidamente le dio la orden al servicio de mensajer√≠a. </li><li>  El mensajero entreg√≥ el pedido. </li></ol><br>  De hecho, todo es un poco m√°s complicado.  Mi nombre es Vitaliy, soy el jefe del departamento de desarrollo y hoy les dir√© c√≥mo funciona todo para nosotros.  Y sobre que. <br><br><img src="https://habrastorage.org/webt/vo/rn/u7/vornu7hu0kjkmk1jwluuqb1usj4.jpeg"><br><a name="habracut"></a><br>  Dos aplicaciones son responsables de la estabilidad del proceso: un escaparate y una aplicaci√≥n m√≥vil de usuario.  Todo es cl√°sico con el escaparate: el comprador visita el sitio, pasa alg√∫n tiempo eligiendo productos y llenando la canasta, examinando las tarjetas de productos.  El paso final aqu√≠ es hacer un pedido.  Despu√©s de eso, la orden se transfiere para su posterior procesamiento a la oficina administrativa. <br><br>  En general, un back office para una tienda en l√≠nea es un sistema en el que se realizan muchas acciones sobre productos: prescribimos la participaci√≥n de productos en ciertas promociones, vinculamos pancartas a esto, resaltamos zonas de marca y m√°s.  Por supuesto, los pedidos se procesan aqu√≠.  Cuando el comprador completa el proceso de pedido y el pedido llega a la oficina administrativa, debe confirmarse.  Esto sucede autom√°ticamente si ya conocemos a este comprador, o por el operador en modo manual de acuerdo con el esquema habitual "Hola, ¬øha pedido algo aqu√≠, confirme, los datos son correctos?", Y as√≠ sucesivamente.  Y aqu√≠ la participaci√≥n del back office en el proceso de formaci√≥n de la entrega ya est√° terminando, se confirma el pedido, el estado cambia de "Procesado" a "En marcha".  Un pedido en WMS (donde se reserva, recolecta, ordena productos que no est√°n disponibles y que se hacen a pedido del proveedor) y, al mismo tiempo, los log√≠sticos pueden comenzar a enrutarlo.  En general, WMS y la log√≠stica son sistemas independientes que funcionan con pedidos en paralelo. <br><br><h3>  Mientras tanto, en stock </h3><br>  El sistema WMS es una combinaci√≥n de nuestro software, almacenes, empleados de estos almacenes y dispositivos, que simplifica significativamente la vida de estos empleados.  Una peque√±a terminal, que est√° montada en la mu√±eca de un empleado, le permite ensamblar r√°pidamente una orden en la secuencia deseada. <br><br><img src="https://habrastorage.org/webt/fb/bj/sj/fbbjsjtm6z0gt3l5zx4yi6zcjz4.jpeg"><br><br>  La consistencia es importante porque entregamos pedidos a nuestros clientes en cajas especiales de Crossroads.  Y con una caja, es rectangular.  Como la mayor√≠a de las cajas. <br><br>  Por lo tanto, es necesario observar dos condiciones al mismo tiempo, y llenar la caja lo m√°s posible para que el cliente no reciba dos cajas que est√©n medio llenas (no es econ√≥mico, respetuoso con el medio ambiente y, en general, extra√±o), y llene la caja de acuerdo con el principio "de pesado a ligero" ".  El sistema tiene en cuenta el tama√±o del producto y su embalaje.  Conociendo esto y los par√°metros del cuadro, es posible formar pedidos para que el cuadro se llene al m√°ximo.  Esto tambi√©n le permite deshacerse de situaciones en las que el auto del servicio de mensajer√≠a parece haberse ido para reemplazar todas las cajas cargadas al 100%, pero medio vac√≠as. <br><br>  Y el sistema escribe para el trabajador del almac√©n en qu√© orden recoger el pedido.  Pocas personas quieren obtener una caja en la que un buen empleado del almac√©n puso tres docenas de huevos en el fondo, colocando cuidadosamente encima de 10 paquetes de leche y un par de kilogramos de verduras, por ejemplo.  Con la leche, seguro, todo estar√° bien, lo que no se puede decir sobre los huevos.  Todo tipo de cookies fr√°giles tambi√©n est√°n siempre en la parte superior. <br><br><img src="https://habrastorage.org/webt/nq/hd/ml/nqhdmlyl2ybszay3eo2jocrd7sg.jpeg"><br><br>  Adem√°s, debe seguir las reglas del vecindario de bienes.  Digamos que ser√° bastante triste para usted si orden√≥ 2 variedades de manzanas, rollos y pescado, y todo esto apestaba no con pescado, sino con detergente en general, porque todo lleg√≥ en una caja.  Por lo tanto, los alimentos, por separado, los productos qu√≠micos dom√©sticos, por separado.  La vecindad de los bienes est√° determinada por los est√°ndares de SanPiN, por cierto.  Y los observamos.  Desde el punto de vista humano, este es un modelo l√≥gico y √∫nico verdadero.  Desde el punto de vista del almac√©n, estas son variables adicionales al construir la ruta del trabajador del almac√©n. <br><br>  El sistema tiene todo en cuenta y crea una ruta, gracias a la cual el empleado recoge el pedido en la secuencia deseada: el terminal lo lleva a la estanter√≠a correcta.  Si exagera, parece que el trabajo de la parte cliente de la aplicaci√≥n es as√≠: ‚ÄúChico, ve a B4, lleva 5 paquetes de harina con ellos, ponlos en el fondo de la caja.  Luego, desde A2, toma la leche.  No, este no, ah√≠ yace en esa celda. <br><br><img src="https://habrastorage.org/webt/r7/tr/ve/r7trvey_hhcwxgzqtcnq9p4fsag.jpeg"><br><br>  Una vez que hicieron una solicitud para los chicos del almac√©n, fue necesario hacer una solicitud para los correos.  Ayuda no solo a construir rutas, sino tambi√©n en el proceso de imprimir r√°pidamente cheques y observar nuevos estados de pedidos.  Bueno, m√©tricas, d√≥nde no hay m√©tricas: vemos d√≥nde se encuentra un servicio de mensajer√≠a en particular, normalmente se ajusta al horario o no, imprime un cheque al transferir el pedido al comprador o no, y as√≠ sucesivamente. <br><br><img src="https://habrastorage.org/webt/gc/ni/r9/gcnir9cqhhgmsyhsclvpqy-ylkw.png"><br><br>  Por cierto, ¬øpor qu√© no imprimimos cheques a la vez? Cuando llevamos nuestras cajas al cliente, √©l puede rechazar cualquier producto por cualquier motivo.  Por ejemplo, logr√≥ salir y comprar helado para s√≠ mismo, o de inmediato hirvi√≥ dos litros de leche y decidi√≥ que el pescado y los pepinos en vinagre para esta noche eran solo una idea.  En general, puede haber muchas razones para rechazar cualquier posici√≥n, incluido un "cambio de opini√≥n".  Por lo tanto, el servicio de mensajer√≠a elimina las posiciones que el cliente ha rechazado e imprime el cheque final. <br><br><h3>  Debajo del cap√≥ </h3><br>  Escribimos nuestras aplicaciones en Swift y Kotlin (iOS y Android, respectivamente).  En este caso, todo el back-end est√° girando en PHP, decidimos hacer la base de datos en Postgres, para el corredor tenemos Rabbit mq. <br><br>  S√≠, est√° claro que en 2019 todo el mundo hace todo bas√°ndose en el principio de los dispositivos m√≥viles primero, pero de alguna manera result√≥ que el sitio est√° m√°s cerca y es m√°s caro.  √âl trabaja en Lavarel.  En la direcci√≥n de los microservicios, tambi√©n estamos comenzando a movernos, por lo que en este momento, tanto el sitio como la aplicaci√≥n son un monolito tan fuerte que se asienta y espera a que los microservicios lo retiren. <br><br>  El mencionado Postgres, por cierto, se muestra como un cuello de botella de vez en cuando, por lo que cambiaremos algo.  Utilizamos activamente equilibradores, porque la carga en los sistemas puede tomar valores muy diferentes. <br><br>  Todo esto est√° convenientemente ubicado en los servidores de esta forma: <br>  16 servidores de aplicaciones con PHP-FPM y Postgres, Postgres tiene 1 maestro y 4 esclavos.  Como puede ver, no hay bicicletas.  Todo el back office est√° completamente integrado con los sistemas internos: WMS, almac√©n, log√≠stica, contabilidad y marketing. <br><br>  Lanzamos la aplicaci√≥n m√≥vil y el sitio web en 2017.  Hoy, la carga promedio en el sistema es de aproximadamente 6,000 pedidos por d√≠a.  Por un lado, no es mucho, por otro lado, todav√≠a vale la pena considerar que esto no se distribuye de manera uniforme durante 24 horas, las personas no piden comida durante todo el d√≠a, tambi√©n hay una liga para la actividad est√°ndar durante las horas de trabajo.  Las consultas PHP mismas (incluida la API) son aproximadamente 70,000 en 5 minutos. <br><br><h3>  Ruta de pedido </h3><br>  Tan pronto como el pedido se ensambla con √©xito en el almac√©n y est√° listo para un viaje, se enruta.  Ahora comenzamos a usar Yandex. Enrutamiento para esto: un buen producto que nos permite construir r√°pidamente la ruta √≥ptima para los conductores, teniendo en cuenta las situaciones de tr√°fico: embotellamientos, clima, pisos, barreras y otras alegr√≠as.  Esto nos ayuda a ahorrar combustible, para que los correos no corten c√≠rculos alrededor de la ciudad.  El conductor tiene una ruta clara, una lista del pedido en el que se deben transportar los pedidos, los pedidos se colocan en el autom√≥vil de tal manera que se entregan en el mismo pedido. <br><br><img src="https://habrastorage.org/webt/ad/lw/-n/adlw-nhq5gqszohajkwaymwqnsm.jpeg"><br><br>  Creamos la aplicaci√≥n de mensajer√≠a para Android, como ya escrib√≠, en Kotlin.  En √©l se cose la ruta, la capacidad de comunicarse con el cliente (ocultamos el n√∫mero del cliente, el conductor solo tiene el bot√≥n "Llamar"), la capacidad de editar el pedido y eliminar algo, imprimir el cheque y tambi√©n pagar el pedido. <br><br><img src="https://habrastorage.org/webt/xt/1f/aq/xt1faql6nzdxupzg_vz4pjmtvj8.png"><br><br>  Por separado, sobre telemetr√≠a: la aplicaci√≥n considera todo: el tiempo de viaje, la hora de llegada al cliente y la hora de salida, esto ayuda enormemente a generar muchos informes anal√≠ticos y rastrear la log√≠stica.  Por ejemplo, el servicio de mensajer√≠a no se mueve durante un tiempo, pero en general deber√≠a hacerlo: lo contactan y le especifican si todo est√° bien.  La conexi√≥n con la log√≠stica a este respecto es muy importante, porque hay situaciones en las que el servicio de mensajer√≠a, por ejemplo, a las 15.00 debe estar en una direcci√≥n, y a las 15.30 - en otra.  Pero en la primera direcci√≥n hubo un problema debido al control de acceso en el patio, una barrera o puerta, tuve que pasar 10 minutos adicionales para contactar al cliente, para que el cliente se pusiera en contacto con la seguridad y as√≠ sucesivamente, ya sabes c√≥mo sucede. <br><br><img src="https://habrastorage.org/webt/cb/jr/pv/cbjrpvltj1-mgahk1ww7dvvtevw.jpeg"><br><br>  Pero desde el punto de vista del cliente a las 15.30, este nunca es su problema, est√° esperando el pedido en el momento indicado.  Por lo tanto, el conductor se pone en contacto con los especialistas en log√≠stica, ellos supervisan de cerca espec√≠ficamente su telemetr√≠a y ellos mismos se comunican con el siguiente cliente, especificando el intervalo de tiempo para la entrega debido a un enganche en la barrera.  Por supuesto, en cualquier caso, es triste cuando el servicio de mensajer√≠a llega tarde.  Pero cuando llega tarde y no lo advierte, es a√∫n peor. <br><br>  En general, si es b√°sico, as√≠ es como trabajamos.  Es posible que est√© m√°s interesado en aprender sobre el funcionamiento del almac√©n y WMS, o sobre las aplicaciones para el conductor o los trabajadores del almac√©n, o sobre el enrutamiento, luego simplemente escriba sobre eso en los comentarios, y har√© una publicaci√≥n por separado. <br><br>  Gracias por leer </div></div><p>Source: <a href="https://habr.com/ru/post/484220/">https://habr.com/ru/post/484220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484208/index.html">Uso del aprendizaje autom√°tico en el an√°lisis est√°tico del c√≥digo fuente del programa</a></li>
<li><a href="../484212/index.html">Cosas gratis para el karma: la historia de una startup bielorrusa que cambia el principio de consumo</a></li>
<li><a href="../484214/index.html">Tensores en TensorFlow</a></li>
<li><a href="../484216/index.html">Segunda conferencia de Zabbix en Rusia: inscripci√≥n y fechas importantes</a></li>
<li><a href="../484218/index.html">Optimizamos la automatizaci√≥n: c√≥mo aceleramos las pruebas autom√°ticas de 3 a 4 veces, preservando los desarrollos antiguos</a></li>
<li><a href="../484222/index.html">Un intento de resolver el problema de elegir boletos antes de las vacaciones</a></li>
<li><a href="../484224/index.html">Bitwise LSD Sort (clasificaci√≥n de radix)</a></li>
<li><a href="../484236/index.html">Fantasmas en las nubes: detalles de hackear muchas compa√±√≠as</a></li>
<li><a href="../484238/index.html">El aprendizaje autom√°tico se enfrent√≥ a un problema matem√°tico no resuelto</a></li>
<li><a href="../484240/index.html">Convi√©rtete en un orador en Positive Hack Days 10. Comienza la convocatoria de ponencias</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>