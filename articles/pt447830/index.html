<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåÔ∏è üë©üèΩ üéÅ O c√≥digo est√° vivo e morto. Parte tr√™s. C√≥digo como texto ‚õ¥Ô∏è ‚ÜóÔ∏è üíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voc√™ precisa ler o c√≥digo para acompanhar o programa e, quanto mais f√°cil, mais ele parecer√° uma linguagem natural - ent√£o voc√™ entrar√° mais r√°pido e ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O c√≥digo est√° vivo e morto. Parte tr√™s. C√≥digo como texto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447830/"><p>  Voc√™ precisa ler o c√≥digo para acompanhar o programa e, quanto mais f√°cil, mais ele parecer√° uma linguagem natural - ent√£o voc√™ entrar√° mais r√°pido e se concentrar√° no principal. </p><br><p> Nos √∫ltimos dois artigos, mostrei que palavras cuidadosamente selecionadas ajudam a entender melhor a ess√™ncia do que est√° escrito, mas pensar <em>apenas</em> nelas n√£o √© suficiente, porque cada palavra existe em duas formas: como ela pr√≥pria e como parte de uma frase.  Repetir <code>CurrentThread</code> ainda n√£o est√° se repetindo at√© a <em>lermos</em> no contexto de <code>Thread.CurrentThread</code> . </p><br><p>  Assim, guiados por notas e melodias simples, agora veremos o que √© m√∫sica. </p><a name="habracut"></a><br><h2 id="oglavlenie-cikla">  Sum√°rio do ciclo </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Os objetos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A√ß√µes e propriedades</a> </li><li>  C√≥digo como texto </li></ol><br><h2 id="kod-kak-tekst">  C√≥digo como texto </h2><br><p>  A maioria das interfaces <em>fluentes</em> √© projetada com √™nfase em externa e n√£o interna, de modo que √© muito f√°cil de ler.  Obviamente, n√£o de gra√ßa: o conte√∫do est√° enfraquecendo.  Ent√£o, digamos, no pacote <code>FluentAssertions</code> , <code>FluentAssertions</code> pode escrever: <code>(2 + 2).Should().Be(4, because: "2 + 2 is 4!")</code> E, em rela√ß√£o √† leitura, <code>because</code> parece elegante, mas dentro do <code>Be()</code> , o par√¢metro <code>error</code> ou <code>errorMessage</code> √© <code>errorMessage</code> . </p><br><p>  Na minha opini√£o, essas isen√ß√µes n√£o s√£o significativas.  Quando concordamos que o c√≥digo √© um texto, seus componentes deixam de pertencer a si mesmos: agora fazem parte de algum tipo de <em>"√âter"</em> universal. </p><br><p>  Mostrarei por exemplos como essas considera√ß√µes se tornam experi√™ncia. </p><br><h3 id="interlocked"> <code>Interlocked</code> </h3> <br><p>  Deixe-me lembr√°-lo do caso <code>Interlocked</code> , que <code>Interlocked.CompareExchange(ref x, newX, oldX)</code> de <code>Interlocked.CompareExchange(ref x, newX, oldX)</code> para <code>Atomically.Change(ref x, from: oldX, to: newX)</code> , usando nomes claros de m√©todos e par√¢metros. </p><br><h3 id="exceptwith"> <code>ExceptWith</code> </h3> <br><p>  O tipo <code>ISet&lt;&gt;</code> possui um m√©todo chamado <code>ExceptWith</code> .  Se voc√™ olhar para uma chamada como <code>items.ExceptWith(other)</code> , voc√™ n√£o perceber√° imediatamente o que est√° acontecendo.  Mas voc√™ s√≥ precisa escrever: <code>items.Exclude(other)</code> , pois tudo se encaixa. </p><br><h3 id="getvalueordefault"> <code>GetValueOrDefault</code> </h3> <br><p>  Ao trabalhar com <code>Nullable&lt;T&gt;</code> chamar <code>x.Value</code> lan√ßar√° uma exce√ß√£o se <code>x</code> for <code>null</code> .  Se voc√™ ainda precisar obter <code>Value</code> , use <code>x.GetValueOrDefault</code> : √© <code>Value</code> ou o valor padr√£o.  Volumoso. </p><br><p>  A express√£o <em>"ou x, ou o valor padr√£o"</em> corresponde ao <code>x.OrDefault</code> curto e elegante. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? x = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = x.GetValueOrDefault(); <span class="hljs-comment"><span class="hljs-comment">// ,  .  . var b = x.OrDefault(); //  ‚Äî  ,   . var c = x.Or(10); //     .</span></span></code> </pre> <br><p>  Com <code>OrDefault</code> e <code>Or</code> h√° uma coisa que vale a pena lembrar: ao trabalhar com um operador <code>.?</code>  voc√™ n√£o pode escrever algo como <code>x?.IsEnabled.Or(false)</code> , somente <code>(x?.IsEnabled).Or(false)</code> (em outras palavras, o operador <code>.?</code> cancela <em>todo</em> o lado direito se <code>null</code> √† esquerda). </p><br><p>  O modelo pode ser aplicado ao trabalhar com <code>IEnumerable&lt;T&gt;</code> : </p><br><pre> <code class="cs hljs">IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; numbers = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">// . var x = numbers ?? Enumerable.Empty&lt;int&gt;(); //   . var x = numbers.OrEmpty();</span></span></code> </pre> <br><h3 id="mathmin-i-mathmax">  <code>Math.Min</code> e <code>Math.Max</code> </h3><br><p>  Uma ideia com <code>Or</code> pode ser desenvolvida em tipos num√©ricos.  Suponha que voc√™ queira pegar o n√∫mero m√°ximo de <code>a</code> e <code>b</code> .  Ent√£o escrevemos: <code>Math.Max(a, b)</code> ou <code>a &gt; b ? a : b</code>  <code>a &gt; b ? a : b</code> .  Ambas as op√ß√µes parecem bastante familiares, mas, no entanto, n√£o parecem uma linguagem natural. </p><br><p>  Voc√™ pode substitu√≠-lo por: <code>a.Or(b).IfLess()</code> - <code>a.Or(b).IfLess()</code> <code>a</code> <em>ou</em> <code>b</code> <em>se</em> <code>a</code> <em>menor</em> .  Adequado para tais situa√ß√µes: </p><br><pre> <code class="cs hljs">Creature creature = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> damage = ...; <span class="hljs-comment"><span class="hljs-comment">//   . creature.Health = Math.Max(creature.Health - damage, 0); // Fluent. creature.Health = (creature.Health - damage).Or(0).IfGreater(); //   : creature.Health = (creature.Health - damage).ButNotLess(than: 0);</span></span></code> </pre> <br><h3 id="stringjoin"> <code>string.Join</code> </h3> <br><p>  √Äs vezes, voc√™ precisa montar uma sequ√™ncia em uma sequ√™ncia, separando os elementos com um espa√ßo ou v√≠rgula.  Para fazer isso, use <code>string.Join</code> , por exemplo, assim: <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code> <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code>  . </p><br><p>  Um simples <em>"Dividir o n√∫mero da v√≠rgula"</em> pode repentinamente se tornar <em>"Anexar uma v√≠rgula a cada n√∫mero da lista"</em> - esse certamente n√£o √© um c√≥digo como texto. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numbers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> [] { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> }; <span class="hljs-comment"><span class="hljs-comment">// ""    ‚Äî  . var x = string.Join(", ", numbers); //    ‚Äî ! var x = numbers.Separated(with: ", ");</span></span></code> </pre> <br><h3 id="regex"> <code>Regex</code> </h3> <br><p>  No entanto, <code>string.Join</code> √© bastante inofensivo em compara√ß√£o com como o <code>Regex</code> √†s vezes <code>Regex</code> usado incorretamente e para outros fins.  Onde voc√™ pode se familiarizar com texto simples e leg√≠vel, por algum motivo, √© prefer√≠vel uma entrada complicada. </p><br><p>  Vamos come√ßar com um simples - determinando que uma string representa um conjunto de n√∫meros: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">// ,  . var x = Regex.IsMatch(id, "^[0-9]*$"); // . var x = id.All(x =&gt; x.IsDigit()); // ! var x = id.IsNumer();</span></span></code> </pre> <br><p>  Outro caso √© descobrir se h√° pelo menos um caractere na sequ√™ncia da sequ√™ncia: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = Regex.IsMatch(text, @"["&lt;&gt;[]'"); //   . ( .) var x = text.ContainsAnyOf('"', '&lt;', '&gt;', '[', ']', '\''); //  . var x = text.ContainsAny(charOf: @"["&lt;&gt;[]'");</span></span></code> </pre> <br><p>  Quanto mais complicada a tarefa, mais dif√≠cil √© o ‚Äúpadr√£o‚Äù da solu√ß√£o: dividir um registro do <code>"HelloWorld"</code> em poucas palavras <code>"Hello World"</code> , algu√©m em vez de um algoritmo simples queria um monstro: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text = ...; <span class="hljs-comment"><span class="hljs-comment">//   -   . var x = Regex.Replace(text, "([az](?=[AZ])|[AZ](?=[AZ][az]))", "$1 "); //  . var x = text.PascalCaseWords().Separated(with: " "); //   . var x = text.AsWords(eachStartsWith: x =&gt; x.IsUpper()).Separated(with: " ");</span></span></code> </pre> <br><p>  Sem d√∫vida, express√µes regulares s√£o eficazes e universais, mas quero entender o que est√° acontecendo √† primeira vista. </p><br><h3 id="substring-i-remove">  <code>Substring</code> e <code>Remove</code> </h3><br><p>  Acontece que voc√™ precisa remover alguma parte da linha do in√≠cio ou do fim, por exemplo, do <code>path</code> - a extens√£o <code>.txt</code> , se houver. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = ...; <span class="hljs-comment"><span class="hljs-comment">//    . var x = path.EndsWith(".txt") ? path.Remove(path.Length - "txt".Length) : path; //   . var x = path.Without(".exe").AtEnd;</span></span></code> </pre> <br><p>  Novamente, a <em>a√ß√£o</em> e o <em>algoritmo se</em> foram e uma <em>linha</em> simples <em>foi deixada sem a extens√£o .exe no final</em> . </p><br><p>  Como o m√©todo <code>Without</code> deve retornar um determinado <code>WithoutExpression</code> , eles pedem outro: <code>path.Without("_").AtStart</code> e <code>path.Without("Something").Anywhere</code> .  Tamb√©m √© interessante que outra express√£o possa ser constru√≠da com a mesma palavra: <code>name.Without(charAt: 1)</code> - exclui o caractere no √≠ndice 1 e retorna uma nova linha (√∫til no c√°lculo de permuta√ß√µes).  E tamb√©m leg√≠vel! </p><br><h3 id="typegetmethods"> <code>Type.GetMethods</code> </h3> <br><p>  Para obter m√©todos de um determinado tipo usando reflex√£o, use: </p><br><pre> <code class="cs hljs">Type type = ...; <span class="hljs-comment"><span class="hljs-comment">//   `Get` ,   `|`.     . var x = type.GetMethods(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance); // ,  . `Or`   , . var x = type.Methods(_ =&gt; _.Instance.Public.Or.NonPublic);</span></span></code> </pre> <br><p>  (O mesmo vale para <code>GetFields</code> e <code>GetProperties</code> .) </p><br><h3 id="directorycopy"> <code>Directory.Copy</code> </h3> <br><p>  Todas as opera√ß√µes com pastas e arquivos s√£o geralmente generalizadas para <code>DirectoryUtils</code> , <code>FileSystemHelper</code> .  Eles implementam desvio do sistema de arquivos, limpeza, c√≥pia, etc.  Mas aqui voc√™ pode criar algo melhor! </p><br><p>  Exibimos o texto <em>‚Äúcopie todos os arquivos de 'D: \ Source' para 'D: \ Target'‚Äù</em> para o c√≥digo <code>"D:\\Source".AsDirectory().Copy().Files.To("D:\\Target")</code>  <code>AsDirectory()</code> - retorna <code>DirectoryInfo</code> da <code>string</code> e <code>Copy()</code> - cria uma inst√¢ncia de <code>CopyExpression</code> que descreve uma API exclusiva para construir express√µes (voc√™ n√£o pode chamar <code>Copy().Files.Files</code> , por exemplo).  Em seguida, √© aberta a oportunidade de copiar n√£o todos os arquivos, mas alguns: <code>Copy().Files.Where(x =&gt; x.IsNotEmpty)</code> . </p><br><h3 id="getorderbyid"> <code>GetOrderById</code> </h3> <br><p>  No segundo artigo, escrevi que <code>IUsersRepository.GetUser(int id)</code> √© redundante e, melhor, <code>IUsersRepository.User(int id)</code> .  Assim, em um <code>IOrdersRepository</code> semelhante <code>IOrdersRepository</code> n√£o temos <code>GetOrderById(int id)</code> , mas <code>Order(int id)</code> .  No entanto, em outro exemplo, sugeriu-se que a vari√°vel desse reposit√≥rio fosse chamada n√£o <code>_ordersRepository</code> , mas simplesmente <code>_orders</code> . </p><br><p>  Ambas as altera√ß√µes s√£o boas por si s√≥, mas elas n√£o se somam no contexto de leitura: chamar <code>_orders.Order(id)</code> parece detalhado.  Seria poss√≠vel <code>_orders.Get(id)</code> , mas os pedidos falham, queremos apenas especificar <em>aquele que possui esse identificador</em> .  <em>Um que</em> √© <code>One</code> , portanto: </p><br><pre> <code class="cs hljs">IOrdersRepository orders = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = orders.GetOrderById(id); //      : var x = orders.Order(id); //     ,    . var x = orders.One(id); //    : var x = orders.One(with: id);</span></span></code> </pre> <br><h3 id="getorders"> <code>GetOrders</code> </h3> <br><p>  Em objetos como <code>IOrdersRepository</code> , outros m√©todos s√£o frequentemente encontrados: <code>AddOrder</code> , <code>RemoveOrder</code> , <code>GetOrders</code> .  As duas primeiras repeti√ß√µes desaparecem, e <code>Add</code> and <code>Remove</code> s√£o obtidos (com as entradas correspondentes <code>_orders.Add(order)</code> e <code>_orders.Remove(order)</code> ).  Com <code>GetOrders</code> mais dif√≠cil renomear <code>Orders</code> pouco os <code>Orders</code> .  Vamos ver: </p><br><pre> <code class="cs hljs">IOrdersRepository orders = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = orders.GetOrders(); //  `Get`,  . var x = orders.Orders(); // ! var x = orders.All();</span></span></code> </pre> <br><p>  Deve-se notar que, com o antigo <code>_ordersRepository</code> repeti√ß√µes nas chamadas <code>GetOrderById</code> ou <code>GetOrderById</code> n√£o s√£o t√£o percept√≠veis, porque estamos trabalhando com o reposit√≥rio! </p><br><p>  Nomes como <code>One</code> , <code>All</code> s√£o adequados para muitas interfaces que representam muitos.  Por exemplo, na conhecida implementa√ß√£o da API do GitHub - <code>octokit</code> - obter todos os reposit√≥rios de usu√°rios se parece com <code>gitHub.Repository.GetAllForUser("John")</code> , embora seja mais l√≥gico - <code>gitHub.Users.One("John").Repositories.All</code> .  Nesse caso, a obten√ß√£o de <em>um</em> reposit√≥rio ser√°, respectivamente, <code>gitHub.Repository.Get("John", "Repo")</code> vez do √≥bvio <code>gitHub.Users.One("John").Repositories.One("Repo")</code> .  O segundo caso parece mais longo, mas √© consistente internamente e reflete a plataforma.  Al√©m disso, usando m√©todos de extens√£o, ele pode ser reduzido para <code>gitHub.User("John").Repository("Repo")</code> . </p><br><h3 id="dictionarytrygetvalue"> <code>Dictionary.TryGetValue</code> </h3> <br><p>  A obten√ß√£o de valores do dicion√°rio √© dividida em v√°rios cen√°rios que diferem apenas no <em>que</em> precisa ser feito se a chave n√£o for encontrada: </p><br><ul><li>  lan√ßar um erro ( <code>dictionary[key]</code> ); </li><li>  retornar o valor padr√£o (n√£o implementado, mas muitas vezes escreva <code>GetValueOrDefault</code> ou <code>TryGetValue</code> ); </li><li>  retornar outra coisa (n√£o implementada, mas eu esperaria <code>GetValueOrOther</code> ); </li><li>  escreva o valor especificado no dicion√°rio e retorne-o (n√£o implementado, mas <code>GetOrAdd</code> foi <code>GetOrAdd</code> ). </li></ul><br><p>  As express√µes convergem no ponto " <em>pegue algum X ou Y se X n√£o estiver</em> ".  Al√©m disso, como no caso de <code>_ordersRepository</code> , chamaremos a vari√°vel de dicion√°rio de n√£o <code>itemsDictionary</code> , mas <code>items</code> . </p><br><p>  Em seguida, para a parte <em>"pegue um X"</em> , uma chamada dos <code>items.One(withKey: X)</code> do formul√°rio. <code>items.One(withKey: X)</code> ideal, retornando uma estrutura com quatro <em>finais</em> : </p><br><pre> <code class="cs hljs">Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Item&gt; items = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">//  ,   : var x = items.GetValueOrDefault(id); var x = items[id]; var x = items.GetOrAdd(id, () =&gt; new Item()); //    : var x = items.One(with: id).OrDefault(); var x = items.One(with: id).Or(Item.Empty); var x = items.One(with: id).OrThrow(withMessage: $"Couldn't find item with '{id}' id."); var x = items.One(with: id).OrNew(() =&gt; new Item());</span></span></code> </pre> <br><h3 id="assemblygettypes"> <code>Assembly.GetTypes</code> </h3> <br><p>  Vejamos a cria√ß√£o de todas as inst√¢ncias existentes do tipo <code>T</code> na montagem: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// . var x = Assembly .GetAssembly(typeof(T)) .GetTypes() .Where(...) .Select(Activator.CreateInstance); // "" . var x = TypesHelper.GetAllInstancesOf&lt;T&gt;(); // . var x = Instances.Of&lt;T&gt;();</span></span></code> </pre> <br><p>  Assim, √†s vezes, o nome de uma classe est√°tica √© o <em>come√ßo de uma</em> express√£o. </p><br><p>  Algo semelhante pode ser encontrado em NUnit: <code>Assert.That(2 + 2, Is.EqualTo(4))</code> - <code>Is</code> e n√£o foi concebido como um tipo auto-suficiente. </p><br><h3 id="argumentthrowifnull"> <code>Argument.ThrowIfNull</code> </h3> <br><p>  Agora vamos dar uma olhada na verifica√ß√£o de pr√©-condi√ß√£o: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  . Argument.ThrowIfNull(x); Guard.CheckAgainstNull(x); // . x.Should().BeNotNull(); // ,  ...  ? Ensure(that: x).NotNull();</span></span></code> </pre> <br><p>  <code>Ensure.NotNull(argument)</code> - bom, mas n√£o muito ingl√™s.  Outra coisa √© o <code>Ensure(that: x).NotNull()</code> escrito acima.  Se ao menos pudesse ... </p><br><p>  A prop√≥sito, voc√™ pode!  Escrevemos <code>Contract.Ensure(that: argument).IsNotNull()</code> e importamos o tipo de <code>Contract</code> <code>using static</code> .  Portanto, todos os tipos de <code>Ensure(that: type).Implements&lt;T&gt;()</code> , <code>Ensure(that: number).InRange(from: 5, to: 10)</code> etc. s√£o <code>Ensure(that: number).InRange(from: 5, to: 10)</code> . </p><br><p>  A id√©ia de importa√ß√£o est√°tica abre muitas portas.  Um belo exemplo para: em vez de <code>items.Remove(x)</code> write <code>Remove(x, from: items)</code> .  Mas curioso √© a redu√ß√£o de <code>enum</code> e propriedades que retornam fun√ß√µes. </p><br><pre> <code class="cs hljs">IItems items = ...; <span class="hljs-comment"><span class="hljs-comment">// . var x = items.All(where: x =&gt; x.IsWeapon); //  . // `ItemsThatAre.Weapons`  `Predicate&lt;bool&gt;`. var x = items.All(ItemsThatAre.Weapons); // `using static`  !  . var x = items.All(Weapons);</span></span></code> </pre> <br><h3 id="ekzoticheskiy-find">  <code>Find</code> ex√≥tico </h3><br><p>  No C # 7.1 e superior, voc√™ n√£o pode escrever <code>Find(1, @in: items)</code> , mas <code>Find(1, in items)</code> , onde <code>Find</code> √© definido como <code>Find&lt;T&gt;(T item, in IEnumerable&lt;T&gt; items)</code> .  Este exemplo √© impratic√°vel, mas mostra que todos os meios s√£o bons na luta pela legibilidade. </p><br><h2 id="itogo">  Total </h2><br><p>  Nesta parte, observei v√°rias maneiras de trabalhar com legibilidade de c√≥digo.  Todos eles podem ser generalizados para: </p><br><ul><li>  <strong>O par√¢metro nomeado como parte da express√£o</strong> √© <code>Should().Be(4, because: "")</code> , <code>Atomically.Change(ref x, from: oldX, to: newX)</code> . </li><li>  <strong>Um nome simples em vez de detalhes t√©cnicos</strong> √© <code>Separated(with: ", ")</code> , <code>Exclude</code> . </li><li>  <strong>O m√©todo como parte da vari√°vel</strong> √© <code>x.OrDefault()</code> , <code>x.Or(b).IfLess()</code> , <code>orders.One(with: id)</code> , <code>orders.All</code> . </li><li>  <strong>O m√©todo como parte da express√£o</strong> √© <code>path.Without(".exe").AtEnd</code> . </li><li>  <strong>O tipo como parte da express√£o</strong> √© <code>Instances.Of</code> , <code>Is.EqualTo</code> . </li><li>  <strong>O m√©todo como parte da express√£o ( <code>using static</code> )</strong> √© <code>Ensure(that: x)</code> , <code>items.All(Weapons)</code> . </li></ul><br><p>  Assim, o externo e o contemplado s√£o trazidos √† tona.  A princ√≠pio, pensa-se, e ent√£o suas encarna√ß√µes espec√≠ficas s√£o pensadas, n√£o t√£o significativas, desde que o c√≥digo seja lido como texto.  Daqui resulta que o juiz n√£o tem tanto gosto quanto a <em>linguagem</em> - ele determina a diferen√ßa entre <code>item.GetValueOrDefault</code> e <code>item.OrDefault</code> . </p><br><h2 id="epilog">  Ep√≠logo </h2><br><p>  Qual √© o m√©todo melhor, claro, mas n√£o est√° funcionando, ou est√° funcionando, mas √© incompreens√≠vel?  Um castelo branco como a neve, sem m√≥veis e quartos ou um barrac√£o com sof√°s no estilo de Lu√≠s XIV?  Um iate de luxo sem motor ou barca√ßa com um computador qu√¢ntico que ningu√©m pode usar? </p><br><p>  Respostas polares n√£o se encaixam, mas <em>"em algum lugar no meio"</em> tamb√©m. </p><br><p>  Na minha opini√£o, ambos os conceitos s√£o inextric√°veis: escolhendo cuidadosamente uma capa para um livro, examinamos duvidosamente os erros no texto e vice-versa.  Eu n√£o gostaria que os <em>Beatles</em> tocassem m√∫sicas de baixa qualidade, mas eles tamb√©m <em>deveriam</em> ser chamados de <em>MusicHelper</em> . </p><br><p>  Outra coisa √© que trabalhar em uma palavra como parte do processo de desenvolvimento √© algo subestimado e incomum e, portanto, ainda √© necess√°rio algum tipo de julgamento extremo.  Esse ciclo √© o extremo da forma e da imagem. </p><br><p>  Obrigado a todos pela aten√ß√£o! </p><br><h2 id="ssylki">  Refer√™ncias </h2><br><p>  Qualquer pessoa interessada em ver mais exemplos pode ser encontrada no meu GitHub, por exemplo, na biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>Pocket.Common</code></a> .  <em>(n√£o para uso mundial e universal)</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447830/">https://habr.com/ru/post/pt447830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447818/index.html">AgileDays 2019</a></li>
<li><a href="../pt447820/index.html">Importe modelos 3D para o Unity e armadilhas</a></li>
<li><a href="../pt447822/index.html">Quase demitido. Como criei o departamento de an√°lise Yandex</a></li>
<li><a href="../pt447826/index.html">O recrutador deve poder vender</a></li>
<li><a href="../pt447828/index.html">Como fazemos TI para as pessoas em Rostelecom</a></li>
<li><a href="../pt447832/index.html">N√£o faz muito tempo</a></li>
<li><a href="../pt447834/index.html">Destrua em 9 segundos. Como um algoritmo desconhecido destruiu os IPO BATS</a></li>
<li><a href="../pt447836/index.html">Teste o nanoCAD SPDS Metalwork 1.2. Parte 1</a></li>
<li><a href="../pt447838/index.html">Como a IoT Technologies mudar√° o mundo nos pr√≥ximos 10 anos</a></li>
<li><a href="../pt447842/index.html">Microbiota. O que √© esse √≥rg√£o e por que precisamos dele</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>