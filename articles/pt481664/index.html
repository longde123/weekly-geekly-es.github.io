<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚öïÔ∏è üë©üèº‚Äçü§ù‚Äçüë®üèΩ ü§öüèΩ Pre√ßos e custos sem servidor: AWS Lambda üß• üìΩÔ∏è üòé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Eu tento melhorar as tradu√ß√µes e ficarei feliz em suas cr√≠ticas. 
 (Nota: os pre√ßos s√£o precisos a partir de agosto de 2018) 

 O AWS Lambda...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pre√ßos e custos sem servidor: AWS Lambda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481664/">  Ol√° Habr!  Eu tento melhorar as tradu√ß√µes e ficarei feliz em suas cr√≠ticas. <br>  (Nota: os pre√ßos s√£o precisos a partir de agosto de 2018) <br><br>  O AWS Lambda possui 263 itens de linha com pre√ßos exclusivos.  Por exemplo, eles podem ser chamados de "Entrada inter-regional acelerada usando locais de borda fora dos EUA, Europa ou Jap√£o, da UE (Paris) para UE (Londres)" e existem em cada uma das 17 regi√µes.  No total, s√£o 4.471 posi√ß√µes individuais que podem ser faturadas quando voc√™ conclui o Lambda. <br><a name="habracut"></a><br>  Al√©m disso, existem 635.035 posi√ß√µes para o servi√ßo EC2, 12.261 para o Route53 e 15.283 para o API Gateway.  No total, o Amazon Web Services possui mais de um milh√£o de taxas individuais para v√°rios servi√ßos.  Sua pol√≠tica de pre√ßos √© t√£o complexa que existe uma API inteira apenas para verificar os pre√ßos.  Com ele, obtive esses n√∫meros (embora o Lambda n√£o esteja inclu√≠do na calculadora de pre√ßos). <br><br>  Os pre√ßos do Lambda s√£o muito discretos: primeiro, o n√≠vel gratuito para o primeiro milh√£o de solicita√ß√µes √© usado, seguido por um pre√ßo de US $ 0,20 para cada milh√£o de solicita√ß√µes subsequentes, mais US $ 0,00001667 por GB / segundo de ‚Äútempo de computa√ß√£o‚Äù usado durante o m√™s, al√©m de que custa a API do Gateway (US $ 3,50 por milh√£o de solicita√ß√µes) para enviar solicita√ß√µes HTTP ao Lambda.  Voc√™ tamb√©m ser√° cobrado por qualquer transfer√™ncia de dados do seu Lambda (US $ 0,09 por GB), bem como por quaisquer consultas ao Dynamo DB. <br><br><h2>  O que √© "tempo de computa√ß√£o"? </h2><br>  Descobrimos que US $ 0,00001667 s√£o pagos por GB-segundo de tempo de computa√ß√£o Lambda.  Gb-segundo √© uma unidade um pouco estranha, voc√™ n√£o acha?  Pode significar o n√∫mero de segundos em que voc√™ usa 1 GB de mem√≥ria, mas, na verdade, √© o n√∫mero de segundos em que os c√°lculos foram executados, multiplicado pelo n√∫mero de GB alocado para esses c√°lculos. <br><br>  Para aqueles que n√£o gostam de microcentros como unidade de medida, reuni os n√∫meros em um diagrama que mostra quanto tempo de mem√≥ria e CPU voc√™ obt√©m de 1 a 6 d√≥lares por milh√£o de solicita√ß√µes: <br><br><img src="https://habrastorage.org/webt/dm/sk/zp/dmskzpgtk5lwutu_s6abpsd4zku.png" alt="imagem"><br><br>  A Amazon publica pre√ßos que n√£o incluem uma taxa b√°sica de US $ 0,20, mas eu a inclu√≠ em meus c√°lculos. <br><br>  E qual √© um milissegundo de tempo do processador?  A computa√ß√£o em milissegundos no Apple II representou 3.000 ciclos de processador.  No meu laptop Intel i7, s√£o 4 milh√µes de ciclos.  No caso da Amazon, eles aumentam a velocidade do processador, dependendo da quantidade de mem√≥ria que voc√™ usa.  Em outras palavras, seu desempenho √© <i>mem√≥ria * tempo de ciclo da CPU</i> , em que <i>o tempo de ciclo da CPU</i> diminui, proporcionalmente √† mem√≥ria usada.  Essa acelera√ß√£o da CPU continua at√© que o recurso de um n√∫cleo do processador se esgote, ap√≥s o que voc√™ recebe recursos do segundo n√∫cleo, que podem ser √∫teis ou n√£o serem utilizados, dependendo da constru√ß√£o do seu aplicativo. <br><br>  Com esses detalhes em mente, ajustei o gr√°fico para mostrar quanto tempo de CPU voc√™ est√° recebendo.  Eu me concentrei nos processadores usuais de servidor que usamos em testes comparativos. <br><br><img src="https://habrastorage.org/webt/8z/x4/xl/8zx4xlbm__u8a8suvkjqproikvs.png" alt="imagem"><br><br>  Como voc√™ pode ver no diagrama, n√£o importa se voc√™ executa o Lambda de 1024 MB por 100 ms ou 128 MB por 800 ms, voc√™ obter√° a mesma quantidade de c√°lculos e pagar√° o mesmo.  Com mais de 1024 MB, voc√™ alcan√ßa o desempenho de um n√∫cleo de processador e come√ßa a receber a energia do segundo n√∫cleo (se seu aplicativo for multithread e pode us√°-lo). <br><br><h2>  Arredondamento </h2><br>  Al√©m disso, o tempo do processador √© arredondado para os 100 ms mais pr√≥ximos, o que significa que mesmo um lambda simples que retorna o tempo atual em nossos testes custa US $ 0,41 / milh√£o de chamadas.  Obviamente, seu Lambda raramente funcionar√° com o n√∫mero exato de milissegundos que √© m√∫ltiplo de 100. Mais frequentemente, voc√™ usar√° uma quantidade de ms que a Amazon arredondar√° para calcular quanto voc√™ pagar√°.  Dado que eles s√£o sempre arredondados, isso significa que voc√™ pagar√° em m√©dia 50 ms de CPU para cada chamada: <br><br><img src="https://habrastorage.org/webt/eg/eo/ep/egeoep3xbzz1hospnmcmkk36pdm.png" alt="imagem"><br><br><h2>  Gateway de API </h2><br>  O AWS Lambda pode executar uma variedade de tarefas dentro da Amazon.  Mas, antes de tudo, eles s√£o interessantes para a cria√ß√£o de aplicativos da Web sem um servidor.  E, para esse prop√≥sito, o lambda n√£o pode ser usado diretamente, pois precisa de algum tipo de servidor HTTP capaz de converter a solicita√ß√£o na API Lambda de chamada.  A maneira mais f√°cil de fazer isso √© usar a API do Amazon Gateway. <br><br>  O custo do API Gateway √© de US $ 3,50 por milh√£o de solicita√ß√µes, o que geralmente excede o custo do pr√≥prio Lambda.  Aqui est√° nosso gr√°fico acima, mas ajustado para o API Gateway: <br><img src="https://habrastorage.org/webt/pt/bi/bw/ptbibwpfn8suzmtna3kqioneyb8.png" alt="imagem"><br><br>  Voc√™ notar√° que as linhas de 1, 2 e 3 d√≥lares desapareceram do gr√°fico.  O m√≠nimo absoluto √© de US $ 3,91 / milh√£o de solicita√ß√µes, supondo que seu Lambda consuma muito pouca CPU. <br>  Voc√™ tamb√©m ter√° que pagar pelo tr√°fego e uma taxa hor√°ria adicional se desejar usar o cache. <br><br><h2>  Rota 53 </h2><br>  O Amazon Route53 DNS tamb√©m n√£o √© gratuito.  No primeiro bilh√£o de consultas, o custo √© de US $ 0,40 por milh√£o de consultas DNS.  Isso eleva nosso custo m√≠nimo total a US $ 4,31 / milh√£o. <br><br><h2>  Mais despesas </h2><br>  Calcular todos os custos pode ser entediante.  Os logs do CloudWatch custam US $ 0,50 por GB.  Ao mesmo tempo, US $ 0,09 por GB de tr√°fego afetar√° significativamente a conta. <br><br><h2>  Lambda @ Edge </h2><br>  A Amazon oferece uma maneira de executar c√≥digo atrav√©s do servi√ßo Cloudfront CDN.  Os custos constantes e vari√°veis ‚Äã‚Äãs√£o tr√™s vezes mais que o Lambda convencional. <br><br>  Para usar o Lambda @ Edge para solicita√ß√µes HTTPS, primeiro voc√™ precisa comprar o Cloudfront por US $ 1 / milh√£o.  Voc√™ tamb√©m paga pela largura de banda, que pode facilmente se tornar o principal item de despesa.  Se o seu site tiver 1 MB, voc√™ pagar√° at√© US $ 85 / milh√£o apenas pela largura de banda do Cloudfront ou US $ 250 para regi√µes como a Am√©rica do Sul.  Mais um adicional de US $ 20 / por milh√£o de solicita√ß√µes que devem retornar ao remetente. <br><br>  Veja quanto voc√™ paga apenas pelos c√°lculos do Lambda @ Edge: <br><br><img src="https://habrastorage.org/webt/vv/ko/wm/vvkowm4nanmc8apkarfksqkexzo.png" alt="imagem"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481664/">https://habr.com/ru/post/pt481664/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481648/index.html">Junos PyEZ no exemplo da tarefa de encontrar sub-redes ipv4 gratuitas</a></li>
<li><a href="../pt481652/index.html">Backdoor (?) Em smartphones BlackBerry Android</a></li>
<li><a href="../pt481654/index.html">A hist√≥ria de como o engenheiro de controle de qualidade tornou a vida mais f√°cil para voc√™ com a ajuda do Test IT, usando o Bot Framework</a></li>
<li><a href="../pt481656/index.html">PagerDuty, ou por que o departamento de opera√ß√µes pode n√£o dormir √† noite</a></li>
<li><a href="../pt481662/index.html">Tentando novas ferramentas para criar e automatizar a implanta√ß√£o no Kubernetes</a></li>
<li><a href="../pt481666/index.html">Regras personalizadas do SwiftLint</a></li>
<li><a href="../pt481668/index.html">O primeiro problema do visualizador ou as dificuldades de converter fluxos de v√≠deo WebRTC em HLS</a></li>
<li><a href="../pt481670/index.html">Crie um plano de a√ß√£o usando o AWS Cloud Adoption Framework</a></li>
<li><a href="../pt481672/index.html">Aut√¥matos celulares no navegador</a></li>
<li><a href="../pt481674/index.html">Funil de vendas de carros ou como n√£o mesclar clientes e at√© trabalhar com aqueles que recusaram seus servi√ßos?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>