<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèΩ‚Äçü§ù‚Äçüßëüèª üëáüèæ üíÉüèø Criando mapas a partir de recursos de ru√≠do üë∞ üßöüèº üë©üèø‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Um dos artigos mais populares do meu site √© dedicado √† gera√ß√£o de mapas poligonais ( tradu√ß√£o em Habr√©). Criar tais cart√µes requer muito esfor√ßo. Mas ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criando mapas a partir de recursos de ru√≠do</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430384/">  Um dos artigos mais populares do meu site √© dedicado √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gera√ß√£o de mapas poligonais</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o</a> em Habr√©).  Criar tais cart√µes requer muito esfor√ßo.  Mas n√£o comecei com isso, mas com uma tarefa <em>muito</em> mais simples, que descreverei aqui.  Essa t√©cnica simples permite criar esses cart√µes em menos de 50 linhas de c√≥digo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b16/95e/c42/b1695ec42f626197fddd201f7f40fa8a.png"></div><br>  N√£o vou explicar como <em>comprar</em> tais cart√µes: depende do idioma, biblioteca gr√°fica, plataforma etc.  Vou apenas explicar como <em>preencher a matriz</em> com dados do mapa. <br><br><h2>  O barulho </h2><br>  A maneira padr√£o de gerar mapas 2D √© usar o ru√≠do com uma banda de frequ√™ncia limitada como um componente b√°sico, como o ru√≠do Perlin ou o ru√≠do simplex.  Aqui est√° a apar√™ncia da fun√ß√£o de ru√≠do: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/855/159/49e/85515949e4c77ba82599050333ec79fa.png" alt="imagem"></div><br>  Atribu√≠mos um n√∫mero de 0,0 a 1,0 a cada ponto no mapa.  Nesta imagem, 0.0 √© preto e 1.0 √© branco. <a name="habracut"></a>  Veja como definir a cor de cada ponto da grade na sintaxe de um idioma semelhante ao C: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; height; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; width; x++) { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> nx = x/width - <span class="hljs-number"><span class="hljs-number">0.5</span></span>, ny = y/height - <span class="hljs-number"><span class="hljs-number">0.5</span></span>; value[y][x] = noise(nx, ny); } }</code> </pre> <br>  O loop funcionar√° da mesma maneira em Javascript, Python, Haxe, C ++, C #, Java e na maioria das outras linguagens populares, portanto, mostrarei isso em uma sintaxe do tipo C para que voc√™ possa convert√™-lo para o idioma necess√°rio.  No restante do tutorial, mostrarei como o corpo do ciclo muda ( <code>value[y][x]=‚Ä¶</code> linha <code>value[y][x]=‚Ä¶</code> ) ao adicionar novas fun√ß√µes.  A demonstra√ß√£o mostrar√° um exemplo completo. <br><br>  Em algumas bibliotecas, ser√° necess√°rio alterar ou multiplicar os valores resultantes para retorn√°-los no intervalo de 0,0 a 1,0. <br><br><h2>  Altura </h2><br>  O ru√≠do em si √© apenas uma cole√ß√£o de n√∫meros.  Precisamos dar <em>sentido a</em> isso.  A primeira coisa que voc√™ pode pensar √© vincular o valor do ru√≠do √† altura (isso √© chamado de "mapa de altura").  Vamos pegar o ru√≠do mostrado acima e desenh√°-lo como altura: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/047/4bf/8d9/0474bf8d9dd73ad63fefc84140385f50.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b14/cb9/c53/b14cb9c535820e30c6eab79dda6322ec.png"></div><br>  O c√≥digo permaneceu quase o mesmo, exceto pelo loop interno.  Agora fica assim: <br><br><pre> <code class="cpp hljs">elevation[y][x] = noise(nx, ny);</code> </pre> <br>  Sim, e √© isso.  Os dados do mapa permaneceram os mesmos, mas agora vou cham√°-los de <code>elevation</code> (altura), n√£o <code>value</code> . <br><br>  Temos muitas colinas, mas nada mais.  O que est√° errado? <br><br><h3>  Frequ√™ncia </h3><br>  O ru√≠do pode ser gerado em qualquer <em>frequ√™ncia</em> .  At√© agora, escolhi apenas uma frequ√™ncia.  Vamos ver como isso afeta. <br><br>  <strong>Tente alterar o valor com o controle deslizante</strong> (no artigo original) e veja o que acontece em diferentes frequ√™ncias: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pu/ox/dh/puoxdhmnucu5e3miflqogwqddwq.gif"></div><br>  Apenas muda a escala.  A princ√≠pio, isso n√£o parece muito √∫til, mas n√£o √©.  Eu tenho mais um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutorial</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o</a> em Habr√©), que explica a <em>teoria</em> : conceitos como frequ√™ncia, amplitude, oitavas, ru√≠do rosa e azul, e assim por diante. <br><br><pre> <code class="cpp hljs">elevation[y][x] = noise(freq * nx, freq * ny);</code> </pre> <br>  √Äs vezes, tamb√©m √© √∫til recordar o <em>comprimento de onda</em> , que √© o rec√≠proco da magnitude.  Quando a frequ√™ncia √© duplicada, o tamanho √© reduzido apenas pela metade.  Dobrar o comprimento de onda todos os dobra.  Comprimento de onda √© a dist√¢ncia medida em pixels / ladrilhos / metros ou em qualquer outra unidade que voc√™ selecionou para mapas.  Est√° relacionado √† frequ√™ncia: <code>wavelength = map_size / frequency</code> . <br><br><h3>  Oitavas </h3><br>  Para tornar o mapa de altura mais interessante, <em>adicionaremos ru√≠do com diferentes frequ√™ncias</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dr/wt/uj/drwtujuho39t3uluoanf5vthl6o.png"></div><br><br><pre> <code class="cpp hljs">elevation[y][x] = <span class="hljs-number"><span class="hljs-number">1</span></span> * noise(<span class="hljs-number"><span class="hljs-number">1</span></span> * nx, <span class="hljs-number"><span class="hljs-number">1</span></span> * ny); + <span class="hljs-number"><span class="hljs-number">0.5</span></span> * noise(<span class="hljs-number"><span class="hljs-number">2</span></span> * nx, <span class="hljs-number"><span class="hljs-number">2</span></span> * ny); + <span class="hljs-number"><span class="hljs-number">0.25</span></span> * noise(<span class="hljs-number"><span class="hljs-number">4</span></span> * nx, <span class="hljs-number"><span class="hljs-number">2</span></span> * ny);</code> </pre> <br>  Vamos misturar grandes colinas de baixa frequ√™ncia com pequenas colinas de alta frequ√™ncia em um mapa.  <strong>Mova o controle deslizante</strong> (no artigo original) para adicionar pequenas colinas √† mistura: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/km/wh/bb/kmwhbbf29gwpdqcwtrbrnsighhw.gif"></div><br>  Agora √© muito mais parecido com o relevo fractal que precisamos!  Podemos ter colinas e montanhas irregulares, mas ainda n√£o temos plan√≠cies.  Para fazer isso, voc√™ precisa de outra coisa. <br><br><h3>  Redistribui√ß√£o </h3><br>  A fun√ß√£o de ru√≠do fornece valores entre 0 e 1 (ou de -1 a +1, dependendo da biblioteca).  Para criar plan√≠cies planas, podemos <em>elevar a altura a uma pot√™ncia</em> .  <strong>Mova o controle deslizante</strong> (no artigo original) para obter diferentes graus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3d/px/wc/3dpxwcatvtjknukqlih0hs7fecs.gif"></div><br><pre> <code class="cpp hljs">e = <span class="hljs-number"><span class="hljs-number">1</span></span> * noise(<span class="hljs-number"><span class="hljs-number">1</span></span> * nx, <span class="hljs-number"><span class="hljs-number">1</span></span> * ny); + <span class="hljs-number"><span class="hljs-number">0.5</span></span> * noise(<span class="hljs-number"><span class="hljs-number">2</span></span> * nx, <span class="hljs-number"><span class="hljs-number">2</span></span> * ny); + <span class="hljs-number"><span class="hljs-number">0.25</span></span> * noise(<span class="hljs-number"><span class="hljs-number">4</span></span> * nx, <span class="hljs-number"><span class="hljs-number">4</span></span> * ny); elevation[y][x] = Math.<span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(e, exponent);</code> </pre> <br>  Valores altos <em>abaixam as alturas m√©dias das plan√≠cies</em> e valores baixos elevam as alturas m√©dias para os picos das montanhas.  Precisamos omiti-los.  Uso fun√ß√µes de poder porque s√£o mais simples, mas voc√™ pode usar qualquer curva;  Eu tenho uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">demonstra√ß√£o</a> mais complicada. <br><br>  Agora que temos um mapa de eleva√ß√£o realista, vamos adicionar biomas! <br><br><h2>  Biomas </h2><br>  O barulho d√° n√∫meros, mas precisamos de um mapa com florestas, desertos e oceanos.  A primeira coisa que voc√™ pode fazer √© transformar pequenas alturas em √°gua: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/et/hu/hv/ethuhvixmvjso_zt-_ev3gtu-tu.gif"></div><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">biome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; waterlevel) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WATER; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> LAND; }</code> </pre> <br>  Uau, isso j√° est√° se tornando um mundo processualmente gerado!  Temos √°gua, grama e neve.  Mas e se precisarmos de mais?  Vamos fazer uma sequ√™ncia de √°gua, areia, grama, floresta, savana, deserto e neve: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fd/aa0/237/5fdaa023713e487a95fed02484380d03.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/656/1d9/8b4/6561d98b4ceda31b7ff49ece890e4e83.png"></div><br>  <i>Al√≠vio baseado na altura</i> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">biome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WATER; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BEACH; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FOREST; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> JUNGLE; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SAVANNAH; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.9</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DESERT; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SNOW; }</code> </pre> <br>  Uau, isso parece √≥timo!  Para o seu jogo, voc√™ pode alterar os valores e os biomas.  Crysis ter√° muito mais selva;  Skyrim tem muito mais gelo e neve.  Mas n√£o importa como voc√™ altere os n√∫meros, essa abordagem √© bastante limitada.  Os tipos de relevo correspondem a alturas, portanto formam faixas.  Para torn√°-los mais interessantes, precisamos escolher biomas baseados em outra coisa.  Vamos criar um <em>segundo</em> mapa de ru√≠do para umidade. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f4/1e3/de8/4f41e3de81e756ee9097be620ff5e08e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c7c/b6a/317/c7cb6a31702505881dbbf3d2ddb1244b.png"></div><br>  <i>Acima est√° o barulho das alturas;</i>  <i>ru√≠do de umidade inferior</i> <br><br>  Agora vamos usar altura e umidade <em>juntos</em> .  Na primeira imagem mostrada abaixo, o eixo y √© a altura (tirada da imagem acima) e o eixo x √© a umidade (a segunda imagem √© mais alta).  Isso nos d√° um mapa atraente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e9/34c/6c1/0e934c6c1358e89adc1b8e4e11b4b21c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ca/d11/e8e/3cad11e8edae614c2600342c37d6d4eb.png"></div><br>  <i>Al√≠vio baseado em dois valores de ru√≠do</i> <br><br>  Pequenas alturas s√£o oceanos e costas.  Grandes alturas s√£o rochosas e com neve.  No meio, obtemos uma ampla gama de biomas.  O c√≥digo fica assim: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">biome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e, m)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> OCEAN; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &lt; <span class="hljs-number"><span class="hljs-number">0.12</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BEACH; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &gt; <span class="hljs-number"><span class="hljs-number">0.8</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SCORCHED; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BARE; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TUNDRA; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SNOW; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &gt; <span class="hljs-number"><span class="hljs-number">0.6</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.33</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TEMPERATE_DESERT; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.66</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SHRUBLAND; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TAIGA; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e &gt; <span class="hljs-number"><span class="hljs-number">0.3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TEMPERATE_DESERT; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.50</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GRASSLAND; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.83</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TEMPERATE_DECIDUOUS_FOREST; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TEMPERATE_RAIN_FOREST; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SUBTROPICAL_DESERT; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.33</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GRASSLAND; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">0.66</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TROPICAL_SEASONAL_FOREST; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TROPICAL_RAIN_FOREST; }</code> </pre> <br>  Se necess√°rio, voc√™ pode alterar todos esses valores de acordo com os requisitos do seu jogo. <br><br>  Se n√£o precisarmos de biomas, os gradientes suaves (consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este artigo</a> ) podem criar cores: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bd4/963/61d/bd496361d481367788a33ebece885cb6.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/799/58e/28e79958eb0b9990fa9e1978fa727def.png"></div><br>  Para biomas e gradientes, um √∫nico valor de ru√≠do n√£o fornece variabilidade suficiente, mas dois s√£o suficientes. <br><br><h2>  Clima </h2><br>  Na se√ß√£o anterior, usei a <em>altitude</em> como substituto da <em>temperatura</em> .  Quanto maior a altura, menor a temperatura.  No entanto, a latitude geogr√°fica tamb√©m afeta as temperaturas.  Vamos usar a altura e a latitude para controlar a temperatura: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/fz/qn/mrfzqnq2ouo7zupt4kscz5a2gv8.png"></div><br>  Perto dos p√≥los (grandes latitudes) o clima √© mais frio, e no topo das montanhas (grandes alturas) o clima tamb√©m √© mais frio.  At√© agora, resolvi isso n√£o muito dif√≠cil: para a abordagem correta desses par√¢metros, voc√™ precisa de muitas configura√ß√µes sutis. <br><br>  H√° tamb√©m mudan√ßas clim√°ticas <em>sazonais</em> .  No ver√£o e no inverno, os hemisf√©rios norte e sul ficam mais quentes e frios, mas no equador a situa√ß√£o n√£o muda muito.  Muito tamb√©m pode ser feito aqui, por exemplo, √© poss√≠vel simular os ventos e as correntes oce√¢nicas predominantes, o efeito dos biomas no clima e o efeito m√©dio dos oceanos nas temperaturas. <br><br><h2>  As ilhas </h2><br>  Em alguns projetos, eu precisava que as bordas do mapa fossem de √°gua.  Isso transforma o mundo em uma ou mais ilhas.  Existem v√°rias maneiras de fazer isso, mas usei uma solu√ß√£o bastante simples em meu gerador de mapas de pol√≠gonos: Alterei a altura como <code>e = e + a - b*d^c</code> , onde <code>d</code> √© a dist√¢ncia do centro (em uma escala de 0-1).  Outra op√ß√£o √© alterar <code>e = (e + a) * (1 - b*d^c)</code> .  A constante <code>a</code> eleva tudo, <code>b</code> abaixa as bordas e <code>c</code> controla a taxa de decl√≠nio. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uq/gb/s4/uqgbs4h2ifsrwd2hsfvrrhue3ju.png"></div><br>  <em>N√£o estou completamente satisfeito com isso</em> e ainda h√° muito a ser explorado.  Deveria ser Manhattan ou dist√¢ncia euclidiana?  Deveria depender da dist√¢ncia ao centro ou da dist√¢ncia at√© a borda?  A dist√¢ncia deve ser ao quadrado, ou linear, ou ter algum outro grau?  Deveria ser adi√ß√£o / subtra√ß√£o, multiplica√ß√£o / divis√£o ou qualquer outra coisa?  No artigo original, <b>tente</b> Adicionar, a = 0,1, b = 0,3, c = 2,0 ou <b>tente</b> Multiplicar, a = 0,05, b = 1,00, c = 1,5.  As op√ß√µes adequadas a voc√™ dependem do seu projeto. <br><br>  Por que manter as fun√ß√µes matem√°ticas padr√£o?  Como contei no meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo sobre danos no RPG</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o</a> em Habr√©), todos (inclusive eu) usam fun√ß√µes matem√°ticas, como polin√¥mios, distribui√ß√µes exponenciais, etc., mas no computador n√£o podemos nos limitar a eles.  Podemos pegar <em>qualquer</em> fun√ß√£o de forma√ß√£o e us√°-la aqui, usando a tabela de pesquisa <code>e = e + height_adjust[d]</code> .  At√© agora, n√£o estudei esse assunto. <br><br><h2>  Ru√≠do espetado </h2><br>  Em vez de elevar a altura a uma pot√™ncia, podemos usar o valor absoluto para criar picos agudos: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ridgenoise</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nx, ny)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> * (<span class="hljs-number"><span class="hljs-number">0.5</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(<span class="hljs-number"><span class="hljs-number">0.5</span></span> - noise(nx, ny))); }</code> </pre> <br>  Para adicionar oitavas, podemos variar as amplitudes das altas frequ√™ncias para que apenas as montanhas recebam o ru√≠do adicional: <br><br><pre> <code class="cpp hljs">e0 = <span class="hljs-number"><span class="hljs-number">1</span></span> * ridgenoise(<span class="hljs-number"><span class="hljs-number">1</span></span> * nx, <span class="hljs-number"><span class="hljs-number">1</span></span> * ny); e1 = <span class="hljs-number"><span class="hljs-number">0.5</span></span> * ridgenoise(<span class="hljs-number"><span class="hljs-number">2</span></span> * nx, <span class="hljs-number"><span class="hljs-number">2</span></span> * ny) * e0; e2 = <span class="hljs-number"><span class="hljs-number">0.25</span></span> * ridgenoise(<span class="hljs-number"><span class="hljs-number">4</span></span> * nx, <span class="hljs-number"><span class="hljs-number">4</span></span> * ny) * (e0+e1); e = e0 + e1 + e2; elevation[y][x] = Math.<span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(e, exponent);</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/co/ku/kg/cokukg_3lgom28_bnm3cu4u-4dc.gif"></div><br>  Como n√£o tenho muita experi√™ncia com essa t√©cnica, preciso experimentar para aprender como us√°-la bem.  Tamb√©m pode ser interessante misturar ru√≠dos pontiagudos de baixa frequ√™ncia com ru√≠dos n√£o pontiagudos de alta frequ√™ncia. <br><br><h2>  Terra√ßos </h2><br>  Se arredondarmos a altura para os pr√≥ximos n n√≠veis, obteremos terra√ßos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zv/bo/5k/zvbo5k_de80zv8utx6fxorpxfha.png"></div><br>  Este √© o resultado da aplica√ß√£o da fun√ß√£o de redistribui√ß√£o de altura no formato <code>e = f(e)</code> .  Acima, usamos <code>e = Math.pow(e, exponent)</code> para afiar os picos das montanhas;  aqui usamos <code>e = Math.round(e * n) / n</code> para criar terra√ßos.  Se voc√™ usar uma fun√ß√£o que n√£o seja degrau, os terra√ßos poder√£o ser arredondados ou ocorrer apenas em determinadas alturas. <br><br><h2>  Posicionamento em √°rvore </h2><br>  Geralmente usamos ru√≠do fractal para altura e umidade, mas tamb√©m pode ser usado para colocar objetos espa√ßados de maneira desigual, como √°rvores e pedras.  Para altura, usamos amplitudes altas com baixas frequ√™ncias ("ru√≠do vermelho").  Para colocar objetos, voc√™ precisa usar altas amplitudes com altas frequ√™ncias ("ru√≠do azul").  √Ä esquerda, h√° um padr√£o de ru√≠do azul;  √† direita, s√£o locais onde o ru√≠do √© maior que os valores adjacentes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xo/u4/ze/xou4zen4vzp46h3l7ecmcmdqsda.png"></div><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> yc = <span class="hljs-number"><span class="hljs-number">0</span></span>; yc &lt; height; yc++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xc = <span class="hljs-number"><span class="hljs-number">0</span></span>; xc &lt; width; xc++) { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     for (int yn = yc - R; yn &lt;= yc + R; yn++) { for (int xn = xc - R; xn &lt;= xc + R; xn++) { double e = value[yn][xn]; if (e &gt; max) { max = e; } } } if (value[yc][xc] == max) { //    xc,yc } } }</span></span></code> </pre> <br>  Escolhendo R diferente para cada bioma, podemos obter uma densidade vari√°vel de √°rvores: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/764/e0e/32a/764e0e32ac9171654161a94a29f66118.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa1/940/61f/aa194061fd97796c08238123b57199c7.png"></div><br>  √â √≥timo que esse ru√≠do possa ser usado para colocar √°rvores, mas outros algoritmos geralmente s√£o mais eficazes e criam uma distribui√ß√£o mais uniforme: pontos Poisson, ladrilhos Van ou pontilhamento gr√°fico. <br><br><h2>  Para o infinito e al√©m </h2><br>  Os c√°lculos do bioma na posi√ß√£o (x, y) s√£o independentes dos c√°lculos de todas as outras posi√ß√µes.  Essa <strong>computa√ß√£o local</strong> possui duas propriedades convenientes: pode ser calculada em paralelo e pode ser usada para terrenos sem fim.  <strong>Coloque o cursor do mouse no minimapa</strong> (no artigo original) √† esquerda para gerar o mapa √† direita.  Voc√™ pode gerar qualquer parte do cart√£o sem gerar (e mesmo sem armazenar) o cart√£o inteiro. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/98b/932/152/98b932152f6c24f496034283fa904499.png"><img src="https://habrastorage.org/getpro/habr/post_images/6a5/811/c84/6a5811c84c56c1706aedbc505fc32aa9.png"><br><br><h2>  Implementa√ß√£o </h2><br>  Usar o ru√≠do para gerar terreno √© uma solu√ß√£o popular e, na Internet, voc√™ encontra tutoriais para diversos idiomas e plataformas.  O c√≥digo para gerar cart√µes em diferentes idiomas √© aproximadamente o mesmo.  Aqui est√° o loop mais simples em tr√™s idiomas diferentes: <br><br><ul><li>  <b>Javascript:</b> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> gen = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimplexNoise(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noise</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">nx, ny</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Rescale from -1.0:+1.0 to 0.0:1.0 return gen.noise2D(nx, ny) / 2 + 0.5; } let value = []; for (let y = 0; y &lt; height; y++) { value[y] = []; for (let x = 0; x &lt; width; x++) { let nx = x/width - 0.5, ny = y/height - 0.5; value[y][x] = noise(nx, ny); } }</span></span></code> </pre> </li><li>  <b>C ++:</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">module</span></span>::Perlin gen; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noise</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ny)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Rescale from -1.0:+1.0 to 0.0:1.0 return gen.GetValue(nx, ny, 0) / 2.0 + 0.5; } double value[height][width]; for (int y = 0; y &lt; height; y++) { for (int x = 0; x &lt; width; x++) { double nx = x/width - 0.5, ny = y/height - 0.5; value[y][x] = noise(nx, ny); } }</span></span></code> </pre> </li><li>  <b>Python:</b> <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> opensimplex <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> OpenSimplex gen = OpenSimplex() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noise</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nx, ny)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Rescale from -1.0:+1.0 to 0.0:1.0 return gen.noise2d(nx, ny) / 2.0 + 0.5 value = [] for y in range(height): value.append([0] * width) for x in range(width): nx = x/width - 0.5 ny = y/height - 0.5 value[y][x] = noise(nx, ny)</span></span></code> </pre> </li></ul><br>  Todas as bibliotecas de ru√≠do s√£o muito parecidas.  Tente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">opensimplex para Python</a> , ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">libnoise para C ++</a> , ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">simplex-noise</a> para Javascript.  Para os idiomas mais populares, existem muitas bibliotecas de ru√≠do.  Ou voc√™ pode aprender como funciona o ru√≠do Perlin ou perceber o ru√≠do voc√™ mesmo.  <em>Eu n√£o fiz isso.</em> <br><br>  Em diferentes bibliotecas de ru√≠do para o seu idioma, os detalhes do aplicativo podem variar um pouco (alguns n√∫meros de retorno no intervalo de 0,0 a 1,0, outros no intervalo de -1,0 a +1,0), mas a id√©ia b√°sica √© a mesma.  Para um projeto real, pode ser necess√°rio agrupar a fun√ß√£o de <code>noise</code> e o objeto <code>gen</code> em uma classe, mas esses detalhes s√£o irrelevantes, ent√£o eu os tornei globais. <br><br>  Para um projeto t√£o simples, n√£o importa o ru√≠do usado: ru√≠do Perlin, ru√≠do simplex, ru√≠do OpenSimplex, ru√≠do de valor, deslocamento do ponto m√©dio, algoritmo de diamante ou a transformada inversa de Fourier.  Cada um deles tem seus pr√≥s e contras, mas para um gerador de cart√µes semelhante, todos criam mais ou menos os mesmos valores de sa√≠da. <br><br>  <em>A renderiza√ß√£o do</em> mapa depende da plataforma e do jogo, ent√£o eu n√£o o implementei;  esse c√≥digo √© necess√°rio apenas para gerar alturas e biomas, cuja renderiza√ß√£o depende do estilo usado no jogo.  Voc√™ pode copiar, portar e us√°-lo em seus projetos. <br><br><h2>  Os experimentos </h2><br>  Eu olhei para misturar oitavas, elevar graus a uma pot√™ncia e combinar alturas com umidade para criar um bioma.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> voc√™ pode estudar um gr√°fico interativo que permite experimentar todos esses par√¢metros, o que mostra em que consiste o c√≥digo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/yq/xn/lhyqxnbeaj0friycenleop7mcdw.png"></div><br>  Aqui est√° um c√≥digo de exemplo: <br><br><pre> <code class="cpp hljs">var rng1 = PM_PRNG.create(seed1); var rng2 = PM_PRNG.create(seed2); var gen1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimplexNoise(rng1.nextDouble.bind(rng1)); var gen2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimplexNoise(rng2.nextDouble.bind(rng2)); <span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noise1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nx, ny)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> gen1.noise2D(nx, ny)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>; } <span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noise2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nx, ny)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> gen2.noise2D(nx, ny)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; height; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; width; x++) { var nx = x/width - <span class="hljs-number"><span class="hljs-number">0.5</span></span>, ny = y/height - <span class="hljs-number"><span class="hljs-number">0.5</span></span>; var e = (<span class="hljs-number"><span class="hljs-number">1.00</span></span> * noise1( <span class="hljs-number"><span class="hljs-number">1</span></span> * nx, <span class="hljs-number"><span class="hljs-number">1</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.50</span></span> * noise1( <span class="hljs-number"><span class="hljs-number">2</span></span> * nx, <span class="hljs-number"><span class="hljs-number">2</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.25</span></span> * noise1( <span class="hljs-number"><span class="hljs-number">4</span></span> * nx, <span class="hljs-number"><span class="hljs-number">4</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.13</span></span> * noise1( <span class="hljs-number"><span class="hljs-number">8</span></span> * nx, <span class="hljs-number"><span class="hljs-number">8</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.06</span></span> * noise1(<span class="hljs-number"><span class="hljs-number">16</span></span> * nx, <span class="hljs-number"><span class="hljs-number">16</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.03</span></span> * noise1(<span class="hljs-number"><span class="hljs-number">32</span></span> * nx, <span class="hljs-number"><span class="hljs-number">32</span></span> * ny)); e /= (<span class="hljs-number"><span class="hljs-number">1.00</span></span>+<span class="hljs-number"><span class="hljs-number">0.50</span></span>+<span class="hljs-number"><span class="hljs-number">0.25</span></span>+<span class="hljs-number"><span class="hljs-number">0.13</span></span>+<span class="hljs-number"><span class="hljs-number">0.06</span></span>+<span class="hljs-number"><span class="hljs-number">0.03</span></span>); e = Math.<span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(e, <span class="hljs-number"><span class="hljs-number">5.00</span></span>); var m = (<span class="hljs-number"><span class="hljs-number">1.00</span></span> * noise2( <span class="hljs-number"><span class="hljs-number">1</span></span> * nx, <span class="hljs-number"><span class="hljs-number">1</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.75</span></span> * noise2( <span class="hljs-number"><span class="hljs-number">2</span></span> * nx, <span class="hljs-number"><span class="hljs-number">2</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.33</span></span> * noise2( <span class="hljs-number"><span class="hljs-number">4</span></span> * nx, <span class="hljs-number"><span class="hljs-number">4</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.33</span></span> * noise2( <span class="hljs-number"><span class="hljs-number">8</span></span> * nx, <span class="hljs-number"><span class="hljs-number">8</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.33</span></span> * noise2(<span class="hljs-number"><span class="hljs-number">16</span></span> * nx, <span class="hljs-number"><span class="hljs-number">16</span></span> * ny) + <span class="hljs-number"><span class="hljs-number">0.50</span></span> * noise2(<span class="hljs-number"><span class="hljs-number">32</span></span> * nx, <span class="hljs-number"><span class="hljs-number">32</span></span> * ny)); m /= (<span class="hljs-number"><span class="hljs-number">1.00</span></span>+<span class="hljs-number"><span class="hljs-number">0.75</span></span>+<span class="hljs-number"><span class="hljs-number">0.33</span></span>+<span class="hljs-number"><span class="hljs-number">0.33</span></span>+<span class="hljs-number"><span class="hljs-number">0.33</span></span>+<span class="hljs-number"><span class="hljs-number">0.50</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* draw biome(e, m) at x,y */</span></span> } }</code> </pre> <br>  Existe uma dificuldade: para ru√≠dos de altura e umidade, √© necess√°rio usar uma semente diferente; caso contr√°rio, elas ser√£o as mesmas e as cartas n√£o parecer√£o t√£o interessantes.  Em Javascript, eu uso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a biblioteca prng-parkmiller</a> ;  em C ++, voc√™ pode usar dois <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">objetos linear_congruential_engine</a> separados;  no Python, voc√™ pode criar duas inst√¢ncias separadas de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe random.Random</a> . <br><br><h2>  Pensamentos </h2><br>  Eu gosto dessa abordagem para mapear a gera√ß√£o por sua <b>simplicidade</b> .  √â r√°pido e requer muito pouco c√≥digo para produzir resultados decentes. <br><br>  N√£o gosto das limita√ß√µes dele nessa abordagem.  C√°lculos locais significam que cada ponto √© independente de todos os outros.  √Åreas diferentes do mapa <em>n√£o</em> est√£o <em>conectadas entre si</em> .  Cada lugar no mapa "parece" o mesmo.  N√£o h√° restri√ß√µes globais, por exemplo, ‚Äúdeve haver de 3 a 5 lagos no mapa‚Äù ou recursos globais, como um rio que flui do topo do pico mais alto para o oceano.  Al√©m disso, n√£o gosto do fato de que, para obter uma boa imagem, voc√™ precisa configurar os par√¢metros por um longo tempo. <br><br>  Por que eu recomendo?  Penso que este √© um bom ponto de partida, especialmente para jogos indie e compotas de jogos.  Dois dos meus amigos escreveram a vers√£o inicial de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Realm of the Mad God em</a> apenas 30 dias para um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">concurso de jogos</a> .  Eles me pediram para ajudar a criar mapas.  Eu usei essa t√©cnica (al√©m de mais alguns recursos que acabaram n√£o sendo muito √∫teis) e fiz um mapa para eles.  Alguns meses depois, depois de receber feedback dos jogadores e estudar cuidadosamente o design do jogo, criamos um gerador de mapas mais avan√ßado, baseado nos pol√≠gonos de Voronoi, descritos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o</a> em Habr√©).  Este gerador de cart√µes n√£o usa as t√©cnicas descritas neste artigo.  Ele usa ru√≠do para criar mapas de uma maneira completamente diferente. <br><br><h2>  Informa√ß√µes Adicionais </h2><br>  H√° <em>muitas</em> coisas legais que voc√™ pode fazer com as fun√ß√µes de ru√≠do.  Se voc√™ pesquisar na Internet, poder√° encontrar op√ß√µes como turbul√™ncia, ondula√ß√£o, multifractal sulcado, amortecimento de amplitude, terra√ßos, ru√≠do voronoi, derivados anal√≠ticos, distor√ß√£o de dom√≠nio e outros.  Voc√™ pode usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esta p√°gina</a> como fonte de inspira√ß√£o.  N√£o os considero aqui, meu artigo se concentra na simplicidade. <br><br>  Este projeto foi influenciado pelos meus projetos anteriores de gera√ß√£o de mapas: <br><br><ul><li>  Usei o ru√≠do geral de Perlin no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">meu primeiro gerador de cart√µes Reino do Deus Louco</a> .  N√≥s o usamos nos primeiros seis meses de teste alfa e, em seguida, o substitu√≠mos por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um gerador de mapas nos pol√≠gonos Voronoi</a> , criado especialmente para os requisitos de jogabilidade que determinamos durante o teste alfa.  Os biomas e suas cores para o artigo s√£o retirados desses projetos. </li><li>  Ao estudar o processamento de sinais de √°udio, escrevi um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutorial sobre ru√≠do</a> que explica conceitos como frequ√™ncia, amplitude, oitavas e a "cor" do ru√≠do.  Os mesmos conceitos que funcionam para o som tamb√©m se aplicam √† gera√ß√£o de cart√µes com base em ru√≠do.  Naquele momento, criei uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gera√ß√£o</a> bruta de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">al√≠vio de demonstra√ß√£o</a> , mas n√£o a terminei. </li><li>  √Äs vezes, experimento encontrar limites.  Eu queria saber quanto c√≥digo √© minimamente necess√°rio para criar mapas atraentes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Neste mini-projeto,</a> cheguei a <b>zero</b> linha de c√≥digo - tudo √© feito com filtros de imagem (turbul√™ncia, limites, gradientes de cores).  Isso me deixou feliz e triste.  At√© que ponto a gera√ß√£o de mapas pode ser realizada por filtros de imagem?  Em grande o suficiente.  Tudo o que foi descrito acima sobre o "esquema de gradientes de cores suaves" √© retirado desta experi√™ncia.  A camada de ru√≠do √© um filtro de imagem de turbul√™ncia;  oitavas s√£o imagens sobrepostas;  A ferramenta de gradua√ß√£o √© chamada de "corre√ß√£o de curva" no Photoshop. </li></ul><br>  O que me incomoda um pouco √© que a maior parte do c√≥digo que os desenvolvedores de jogos escrevem para a gera√ß√£o de terreno com base em ru√≠do (incluindo deslocamento do ponto m√©dio) acaba sendo a mesma que nos filtros de som e imagem.  Por outro lado, ele cria resultados bastante decentes em apenas algumas linhas de c√≥digo, e foi por isso que escrevi este artigo.  Este √© um <em>ponto de refer√™ncia r√°pido e f√°cil</em> .  Normalmente, n√£o uso essas cartas por muito tempo, mas as substituo por um gerador de mapas mais complexo assim que descobrir quais tipos de cartas s√£o mais adequados ao design do jogo.  Para mim, esse √© um padr√£o padr√£o: come√ßar com algo extremamente simples e substitu√≠-lo somente depois que eu entender melhor o sistema com o qual estou trabalhando. <br><br>  H√° <em>muito</em> mais coisas que podem ser feitas com ru√≠do, no artigo que mencionei apenas algumas.  Experimente o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Noise Studio</a> para testar interativamente v√°rios recursos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430384/">https://habr.com/ru/post/pt430384/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430374/index.html">Engenharia de dados e muito mais: grava√ß√µes de v√≠deo e slides da reuni√£o</a></li>
<li><a href="../pt430376/index.html">Guia do JavaScript Parte 6: Exce√ß√µes, ponto e v√≠rgula, literais de modelo</a></li>
<li><a href="../pt430378/index.html">J2CL - Antes tarde do que nunca</a></li>
<li><a href="../pt430380/index.html">Guia JavaScript Parte 5: matrizes e loops</a></li>
<li><a href="../pt430382/index.html">Guia de JavaScript Parte 4: Recursos</a></li>
<li><a href="../pt430386/index.html">Usina de armazenamento de estado s√≥lido a ser constru√≠da na √çndia</a></li>
<li><a href="../pt430388/index.html">Desconfian√ßa na Web Summit</a></li>
<li><a href="../pt430392/index.html">Como desenvolvo e teste APIs com minha ‚Äúbicicleta‚Äù PieceofScript</a></li>
<li><a href="../pt430394/index.html">Implementando pesquisa instant√¢nea no Android usando RxJava</a></li>
<li><a href="../pt430396/index.html">Replica√ß√£o em cadeia: construindo um reposit√≥rio KV eficaz (parte 1/2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>