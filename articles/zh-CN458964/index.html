<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏾 🤙🏿 💪🏿 TestMace。 快速上手 🍏 👈🏼 👕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大家好 我们正在逐步走出阴影，并继续撰写有关我们产品的一系列文章。 在上一篇评论文章之后，我们收到了很多评论（大部分是肯定的），建议和错误报告。 今天我们将展示TestMace的实际应用，您将能够欣赏到我们应用程序的某些功能。 要获得更完整的沉浸感，我建议您参考位于http://docs-ru.te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TestMace。 快速上手</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458964/"><p><img src="https://habrastorage.org/webt/yo/d3/vp/yod3vplmpqyuhmz0bskb7bnuzaa.png"></p><br><p> 大家好 我们正在逐步走出阴影，并继续撰写有关我们产品的一系列文章。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">上</a>一篇评论文章之后，我们收到了很多评论（大部分是肯定的），建议和错误报告。 今天我们将展示<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TestMace</a>的实际应用，您将能够欣赏到我们应用程序的某些功能。 要获得更完整的沉浸感，我建议您参考位于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://docs-ru.testmace.com</a>的文档。 所以走吧！ </p><a name="habracut"></a><br><h1 id="ustanovka"> 安装方式 </h1><br><p>让我们从平庸主义开始。 该应用程序是可访问的，并且已经在三个平台上进行了真正的测试-Linux，Windows和MacOS。 您可以从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们的网站</a>下载所需操作系统的安装程序。 对于Linuxoids，可以安装<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">snap软件包</a> 。 我们真的希望Microsoft Store和App Store能够很快达成目标（您需要吗？您怎么看？）。 </p><br><h1 id="podopytnyy-scenariy"> 实验场景 </h1><br><p> 作为测试对象，我们选择了以下标准方案： </p><br><ul><li> 登录：用户-管理员，密码-密码 </li><li> 添加一个新条目 </li><li> 检查是否添加了正确的条目 </li></ul><br><p> 我们将在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://testmace-quick-start.herokuapp.com/上进行</a>测试。 这是一个常规的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">json服务器</a> ，非常适合测试此类应用程序。 我们只是向所有json-server路由添加了令牌授权，并使用了登录方法来获取此令牌。 我们将继续前进，逐步改善我们的项目。 </p><br><h2 id="sozdanie-proekta-i-popytka-sozdat-suschnost-bez-avtorizacii"> 创建项目并尝试未经授权创建实体 </h2><br><p> 首先，创建一个新项目（ <strong>File-</strong> &gt; <strong>New project</strong> ）。 如果您是第一次启动该应用程序，则将自动打开一个新项目。 首先，让我们尝试发出创建新记录的请求（突然之间，未经授权就可以创建记录）。 从项目节点的上下文菜单中选择<strong>添加节点</strong> -&gt; <strong>RequestStep</strong> 。 将节点名称设置为<strong>create-post</strong> 。 结果，将在树中创建一个新节点，并且该节点的选项卡将打开。 我们设置以下查询参数： </p><br><ul><li> 请求类型：POST </li><li> 网址： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> ： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//testmace-quick-start.herokuapp.com/posts</a> </li><li>请求正文：值为<code>{"title": "New testmace quick start post"}</code> json <br> 如果您正确执行了所有操作，则界面将如下所示： </li></ul><br><p><img src="https://habrastorage.org/webt/lw/-x/yc/lw-xyc0el0cogukda4cqpfxcwts.png"></p><br><p> 但是，如果我们尝试满足该请求，则服务器将返回401代码，并且未经授权，此服务器上没有任何内容。 好吧，总的来说，正如预期的那样。 </p><br><h2 id="dobavlyaem-zapros-na-avtorizaciyu"> 添加授权请求 </h2><br><p> 如前所述，我们有一个POST端点<code>/login</code> ，它接受以下形式的json请求主体： <code>{"username": "&lt;username&gt;", "password": "&lt;password&gt;"}</code> ，其中<code>username</code>和<code>password</code> （再次从上面的介绍中获得）分别具有<code>admin</code>和<code>password</code>值。 作为响应，此端点返回形式为<code>{"token": "&lt;token&gt;"}</code> json。 我们将使用它进行授权。 创建一个名称为<strong>login</strong>的<strong>RequestStep</strong>节点， <strong>Project</strong>节点将充当祖先。 使用拖放操作将树中的给定节点移到高于<strong>创建后</strong>节点的位置。 让我们为新创建的查询设置以下参数： </p><br><ul><li> 请求类型：POST </li><li> 网址： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> ： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//testmace-quick-start.herokuapp.com/login</a> </li><li> 请求正文：值为<code>{"username": "admin", "password": "password"}</code> json </li></ul><br><p> 我们执行请求，并在响应中获得带有令牌的第二百代码。 像这样： </p><br><p><img src="https://habrastorage.org/webt/zd/_o/fs/zd_ofsbzdf-_unlqtpxe3rsaf_i.png"></p><br><h2 id="refaktoring-ubiraem-dublirovanie-domena"> 重构：删除域重复 </h2><br><p> 当请求未在单个脚本中连接时。 但这不是唯一的缺点。 如果仔细观察，您会发现至少两个查询中的域都是重复的。 不好 现在是时候重构未来场景的这一部分了，这些变量将对此有所帮助。 </p><br><p> 近似地，变量起着与其他类似工具和编程语言相同的作用-消除重复，提高可读性等。 您可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们的文档中</a>阅读有关变量的更多信息。 在这种情况下，我们需要自定义变量。 </p><br><p> 我们在节点的Project级别使用值<code>https://testmace-quick-start.herokuapp.com</code>定义<code>domain</code>变量。 为此，有必要 </p><br><ul><li> 使用此节点打开一个选项卡，然后单击右上角的计算器图标 </li><li> 点击<strong>+添加变量</strong> </li><li> 输入变量的名称和值 <br> 在我们的例子中，带有添加变量的对话框如下所示： </li></ul><br><p><img src="https://habrastorage.org/webt/0o/wl/zu/0owlzuvsic-o0zwyn5nomsfhz-m.png"></p><br><p> 好啦 现在，由于继承，我们可以在任何嵌套级别的后代中使用此变量。 在我们的例子中，这些是<strong>登录</strong>和<strong>创建后</strong>节点。 为了在文本字段中使用变量，有必要写<code>${&lt;variable_name&gt;}</code> 。 例如，登录的url分别转换为<code>${domain}/login</code> ，因为<strong>create-post</strong>节点的url看起来像<code>${domain}/posts</code> 。 </p><br><p> 因此，在DRY原理的指导下，我们对方案进行了一些改进。 </p><br><h2 id="sohranyaem-token-v-peremennuyu"> 我们将令牌保存到变量中 </h2><br><p> 由于有关变量的讨论已经开始，因此让我们稍微讨论一下这个主题。 目前，如果成功登录，我们会从服务器收到一个授权令牌，这在后续请求中将需要。 让我们将该令牌保存到变量中。 因为 变量的值将在脚本执行期间确定，为此<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">动态变量</a>使用一种特殊的机制。 </p><br><p> 首先，我们将执行登录请求。 在响应的“已分析”选项卡中，将鼠标悬停在令牌上，然后在上下文菜单中（通过鼠标右键或通过单击按钮...进行调用），选择“ <strong>分配给变量”</strong> 。 出现一个对话框，其中包含以下字段： </p><br><ul><li>  <strong>路径</strong> -采取响应的哪一部分（在我们的示例中，这是<code>body.token</code> ） </li><li>  <strong>当前值</strong> -路径路径上的值（在我们的示例中，这是令牌的值） </li><li>  <strong>变量名称</strong> -将在其中存储<strong>当前值</strong>的变量的名称。 在我们的情况下，这将是<code>token</code> </li><li>  <strong>节点</strong> -将在哪个祖先中创建“ <strong>变量名”</strong>变量。 选择项目 </li></ul><br><p> 完成的对话框如下： </p><br><p><img src="https://habrastorage.org/webt/mt/ze/9a/mtze9ag3g3coxxyuv9xc_xow-sm.png"></p><br><p> 现在，每次执行<strong>登录</strong>节点时，动态<code>token</code>将使用响应中的新值进行更新。 并且此变量将存储在<strong>Project</strong>节点中，并且由于继承，后代可以使用该变量。 </p><br><p> 要访问动态变量，您需要使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">内置变量</a> <code>$dynamicVar</code> 。 例如，要获取存储的令牌，您需要调用<code>${$dynamicVar.token}</code> 。 </p><br><h2 id="prokidyvaem-avtorizacionnyy-token-v-zaprosy"> 我们将授权令牌放入请求中 </h2><br><p> 在前面的步骤中，我们收到了一个授权令牌，所有要做的就是向所有需要授权的请求（包括<strong>create-post）</strong>添加带有值<code>Bearer &lt;tokenValue&gt;</code>的<code>Authorization</code>标头。 有几种方法可以做到这一点： </p><br><ol><li> 手动复制令牌并将授权标头添加到感兴趣的请求中。 该方法有效，但是其应用仅受“制成并抛出”形式的请求的限制。 不适合多个脚本 </li><li> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">授权</a>功能。 </li><li> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://docs-ru.testmace.com/other/default-">默认标题</a> </li></ol><br><p> 使用第二种方法似乎很明显，但是，在本文的上下文中，这种方法没有意思。 好吧，实际上：其他工具使您熟悉授权机制的正负（即使我们拥有诸如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">授权继承之</a>类的东西），也不太可能引发问题。 </p><br><p> 另一件事是默认标题！ 简而言之，默认头是从祖先继承的HTTP头，默认情况下会添加到请求中，除非明确禁用它们。 例如，使用此功能，您可以实现自定义授权，也可以消除脚本中的重复项。 我们将使用此功能将标头中的令牌扔掉。 </p><br><p> 之前，我们谨慎地将令牌保存到节点的Project级别的动态变量<code>$dynamicVar.token</code>中。 仍然需要执行以下操作： </p><br><ol><li> 在节点的项目级别定义默认的<code>Authorization</code>标头，其值为<code>Bearer ${$dynamicVar.token}</code> 。 为此，在节点的Project界面中，您需要打开一个带有默认标题的对话框（右上角的<strong>Headers</strong>按钮），并添加相应的标题。 具有填充值的对话框将如下所示： <br><img src="https://habrastorage.org/webt/a9/it/so/a9itsohct79f71scqkhn9j9_-p4.png"></li><li> 从登录请求中禁用此标头。 这是可以理解的：在登录时，我们仍然没有令牌，我们将随此请求安装它。 因此，在“ <strong>继承”</strong>区域的“ <strong>标题”</strong>选项卡中的请求登录界面中，取消选中“授权”标题。 </li></ol><br><p> 仅此而已。 现在，授权头将添加到Project节点的后代的所有请求中，登录节点除外。 事实证明，在此阶段，我们已经准备好脚本，我们只需要启动它即可。 您可以通过在“项目”节点的上下文菜单中选择<strong>“运行”</strong>来运行脚本。 </p><br><h2 id="proveryaem-korrektnost-sozdaniya-posta"> 检查帖子创建的正确性 </h2><br><p> 在此阶段，我们的脚本可以登录，并使用授权令牌创建帖子。 但是，我们需要确保新创建的帖子名称正确。 也就是说，从本质上讲，仍然需要执行以下操作： </p><br><ul><li> 通过ID发送帖子请求， </li><li> 检查来自服务器的名称是否与创建帖子时给定的名称匹配 </li></ul><br><p> 考虑第一步。 在脚本执行期间确定id值后，您需要在节点的Project级别的<strong>create-post</strong>节点中创建一个动态变量（我们称其为<code>postId</code> ）。 我们已经知道如何执行此操作，只需转到<strong>将令牌保存为变量一节</strong> 。 它仅是为该ID上的帖子创建请求。 为此，请创建一个带有以下参数的RequestStep <strong>帖子</strong> ： </p><br><ul><li> 请求类型：GET </li><li> 网址：$ {domain} / posts / $ {$ dynamicVar.postId} </li></ul><br><p> 要实现第二步，我们需要熟悉<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Assertion</a>节点。 断言节点是一个节点，可用于为特定请求编写检查。 每个断言节点可以包含多个语句（检查）。 您可以从我们的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档中</a>阅读有关所有类型断言的更多信息。 我们将把<code>Compare</code>断言与<code>equal</code>运算符一起使用。 有几种创建断言的方法： </p><br><ol><li> 好久 从RequestStep节点的上下文菜单中手动创建一个Assertion节点。 在由断言创建的节点中，添加感兴趣的断言并填写字段。 </li><li> 快点 使用上下文菜单从节点的RequestStep响应中创建一个断言节点和一个断言 </li></ol><br><p> 我们将使用第二种方法。 这就是我们的情况。 </p><br><p><img src="https://habrastorage.org/webt/4a/3c/na/4a3cnaugji8gije_wdf74vy1ecc.gif"></p><br><p> 对于那些不了解的人，会发生以下情况： </p><br><ol><li> 在<strong>get-post</strong>节点中进行请求 </li><li> 在响应的“已分析”选项卡中，调用上下文菜单，然后选择“ <strong>创建断言</strong> -&gt; <strong>比较</strong> -&gt; <strong>等于”</strong> </li></ol><br><p> 恭喜，我们创建了第一个测试！ 简单吧？ 现在，您可以完全运行脚本并享受结果。 仍然需要重构一点并将<code>title</code>放在一个单独的变量中。 但我们会将其留给您作为作业） </p><br><h1 id="zaklyuchenie"> 结论 </h1><br><p> 在本指南中，我们创建了完整的脚本，并同时回顾了产品的某些功能。 当然，我们并未使用所有功能，在以下文章中，我们将对TestMace的功能进行详细的回顾。 敬请期待！ </p><br><p>  PS对于那些懒于复制所有步骤的人，我们将文章中的项目与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">资源库</a>一起剪切。 您可以使用<strong>文件</strong> -&gt; <strong>打开项目</strong>打开它，然后选择项目文件夹。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458964/">https://habr.com/ru/post/zh-CN458964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458952/index.html">调整PostgreSQL设置以优化性能</a></li>
<li><a href="../zh-CN458954/index.html">哪些类型的检测在视频监视中很有用。 机制与功能</a></li>
<li><a href="../zh-CN458956/index.html">机器学习与 分析方法</a></li>
<li><a href="../zh-CN458960/index.html">企业追求</a></li>
<li><a href="../zh-CN458962/index.html">将图像转换为声音-您会听到什么？</a></li>
<li><a href="../zh-CN458966/index.html">科学家和技术公司负责人认为将工业企业发射到太空是现实</a></li>
<li><a href="../zh-CN458970/index.html">使用UIViewPropertyAnimator创建自定义动画</a></li>
<li><a href="../zh-CN458972/index.html">本周新闻：Yandex和西方情报机构，FAS打击在线赌场，交通部监管BlaBlaCar</a></li>
<li><a href="../zh-CN458974/index.html">斯维尔特（Svelte）一生</a></li>
<li><a href="../zh-CN458982/index.html">Nginx食谱：从HTML和URL转换为PDF和PS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>