<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤵🏻 🌜 👃🏻 Nous écrivons un bot de pêche dans le jeu Albion Online en Python 🏷️ 🎖️ 🌞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous, je suis un utilisateur heureux du système d'exploitation GNU / Linux. Et comme beaucoup de gens le savent, il y a beaucoup moins de jo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous écrivons un bot de pêche dans le jeu Albion Online en Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459110/"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/d19/0a2/dbbd190a2f9638019018783a7cd87d6e.jpg" alt="image"><br><br>  Bonjour à tous, je suis un utilisateur heureux du système d'exploitation GNU / Linux. Et comme beaucoup de gens le savent, il y a beaucoup moins de jouets qui vont à Linux sans danses supplémentaires avec un tambourin que sous Windows. <br><br>  Et encore moins de jeux dans le genre MMORPG. <br><br>  Cependant, il y a environ six mois ou un an, j'ai découvert qu'ils avaient porté le jeu Albion Online sur Linux. <br>  Le jeu est très amusant, mais prend beaucoup de temps.  Et pour ne pas gaspiller mes précieuses heures de vie en vain, j'ai décidé d'écrire un bot.  Qui m'exploitera des ressources pendant que j'exploiterai mon entreprise. <br><br>  Le jeu a de nombreux types d'artisanat, vous pouvez couper du bois, creuser des pierres, même cultiver des jardins, mais mon choix a été fait en faveur de la pêche. <br><a name="habracut"></a><br>  Ainsi, l'essence de la pêche en ligne à Albion est simple, prenez une canne à pêche, allez à l'étang, maintenez le bouton enfoncé pour lancer l'appât, attendez un certain temps de morsure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cef/bb4/9f2/cefbb49f2112b5f63ca0a793f6fa9799.png" alt="image"><br><br>  Lorsque vous picorez, vous devez à nouveau appuyer sur les boutons et jouer à un mini-jeu. <br><br>  Ici, vous devrez tirer alternativement, puis ne tirez pas sur la canne à pêche, en fonction des mouvements du flotteur.  Le flotteur se déplace toujours de façon aléatoire, avec différentes séquences et vitesses.  Et si vous faites tout correctement et que le flotteur ne dépasse pas la zone autorisée, vous attraperez du poisson. <br><br>  Nous allons donc automatiser toutes ces activités.  Au moyen du langage informatique python.  J'ai décidé de partir du plus difficile, à savoir à partir du moment où le jeu commence par un flotteur.  Là encore, ma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bibliothèque</a> de vision par ordinateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenCV</a> préférée est venue à mon secours.  En le lançant, nous pouvons détecter des objets, par exemple, dans des images.  Cependant, la bibliothèque elle-même ne sait pas exactement ce que nous devons découvrir.  Bien sûr, il existe de nombreux modèles où divers objets sont présentés pour les définir.  Cependant, il n'y a certainement aucun flotteur pour Albion Online. <br><br>  Mais dans cette bibliothèque, il existe une merveilleuse fonction de recherche pour un modèle donné.  Et comme modèle, je viens de prendre une capture d'écran de notre flotteur. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b0/47a/5d9/7b047a5d988af0b78f2a7ff897df05e9.png" alt="image"><br><br>  Et comme nous le voyons, tout était parfaitement trouvé sur la photo. <br><br>  Et la différence entre l'image et la vidéo en streaming n'est pas grande, car en fait ce n'est qu'un flux d'images avec une vitesse très rapide et quelques lignes de code.  Et maintenant, nous pouvons déjà trouver le flotteur sur la vidéo en streaming. <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> mss.linux <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MSS <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Image <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyautogui <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy template = cv2.imread(<span class="hljs-string"><span class="hljs-string">"2019-07-02_06-55_1.png"</span></span>, cv2.IMREAD_GRAYSCALE) w, h = template.shape[::<span class="hljs-number"><span class="hljs-number">-1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> mss.mss() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sct: monitor = {<span class="hljs-string"><span class="hljs-string">"top"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-string"><span class="hljs-string">"left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">800</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">"Screen capturing"</span></span>: last_time = time.time() img = numpy.array(sct.grab(monitor)) cv2.imshow(<span class="hljs-string"><span class="hljs-string">"OpenCV/Numpy normal"</span></span>, img) print(<span class="hljs-string"><span class="hljs-string">"fps: {}"</span></span>.format(<span class="hljs-number"><span class="hljs-number">1</span></span> / (time.time() - last_time))) gray_frame = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) res = cv2.matchTemplate(gray_frame, template, cv2.TM_CCOEFF_NORMED) loc = np.where(res &gt;= <span class="hljs-number"><span class="hljs-number">0.7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> pt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(*loc[::<span class="hljs-number"><span class="hljs-number">-1</span></span>]): cv2.rectangle(img, pt, (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>] + w, pt[<span class="hljs-number"><span class="hljs-number">1</span></span>] + h), (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">3</span></span>) cv2.imshow(<span class="hljs-string"><span class="hljs-string">"Frame"</span></span>, img) key = cv2.waitKey(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">"q"</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span></code> </pre> <br></div></div><br>  Nous allons plus loin.  Le flotteur lui-même se déplace d'avant en arrière et nous devons également le déplacer en appuyant sur le bouton de la souris. <br><br>  Et donc, nous avons besoin de ses coordonnées.  Et pour cela, ces lignes nous aident. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> img: pts = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>],pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) x = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>]) y = (pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (x) cv2.circle(template,pts,<span class="hljs-number"><span class="hljs-number">5</span></span>,(<span class="hljs-number"><span class="hljs-number">200</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>),<span class="hljs-number"><span class="hljs-number">2</span></span>) cv2.putText(img, <span class="hljs-string"><span class="hljs-string">"%d-%d"</span></span> % (x,y), (x+<span class="hljs-number"><span class="hljs-number">10</span></span>,y<span class="hljs-number"><span class="hljs-number">-10</span></span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number"><span class="hljs-number">1</span></span>, color_yellow, <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  Ensuite, nous utilisons simplement la bibliothèque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PyAutoGUI</a> , qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bloquera</a> le bouton de la souris et l'enfoncera avec une certaine fréquence. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> &lt; x &lt; <span class="hljs-number"><span class="hljs-number">500</span></span>: pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) x = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  Et le mini-jeu lui-même est remporté avec succès. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/012/b6b/a40/012b6ba4054f6db696a76bd196205a7d.png" alt="image"><br><br>  Nous mettons le tout dans une fonction et le laissons pour le moment. <br><br>  Ensuite, nous revenons à la partie d'origine, où nous devons surveiller le flotteur. <br><br>  C'est un peu différent, par exemple, nous pouvons déterminer où le flotteur sera lancé et essayer d'analyser cette partie de l'écran pour la présence du flotteur.  Cependant, le flotteur jeté dans l'eau apparaît sous différents angles et oscille constamment. <br><br>  Dans ce cas, nous prendrons cette méthode légèrement différente.  Son essence est que nous analysons, disons la différence de pixels à l'intérieur du fragment suivi.  Qui, s'il n'y a pas de flotteur, approche de zéro. <br><br>  En conséquence, la valeur optimale a été trouvée à laquelle, avec la disparition du flotteur, nous pouvons effectuer des actions. <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">screen_record</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> sct = mss.mss() last_time = time.time() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): img = sct.grab(mon) print(<span class="hljs-string"><span class="hljs-string">'loop took {} seconds'</span></span>.format(time.time() - last_time)) last_time = time.time() img = np.array(img) processed_image = process_image(img) mean = np.mean(processed_image) print(<span class="hljs-string"><span class="hljs-string">'mean = '</span></span>, mean) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mean &lt;= float(<span class="hljs-number"><span class="hljs-number">0.11</span></span>): print(<span class="hljs-string"><span class="hljs-string">'SSSSSSSS '</span></span>) pyautogui.click(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">'q'</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span></code> </pre><br></div></div><br>  Et nous les produisons, à savoir, cliquez sur le bouton de la souris.  Nous avons également mis cela dans la fonction. <br><br>  Et enfin, en conclusion, nous écrivons simplement un script où, dans une boucle infinie, nous jetons une canne à pêche et effectuons les première et deuxième fonctions en alternance. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">431</span></span>,<span class="hljs-number"><span class="hljs-number">175</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">450.200</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) screen_record() time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) ss()</code> </pre><br>  Voici une instruction vidéo complète et un exemple du travail de ce bot: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/92XnJ3s0vX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Il y a vraiment quelques nuances dans le fait que vous devez chamaniser avec des nombres, car ces nombres sont sélectionnés pour mon moniteur, mon emplacement, mon personnage et mon équipement.  Mais je pense que pour un pythoniste compétent, ce ne sera pas un problème. <br><br>  Le script entier: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> mss.linux <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MSS <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Image <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyautogui <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> imutils <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyautogui template = cv2.imread(<span class="hljs-string"><span class="hljs-string">"2019-07-02_06-55_1.png"</span></span>, cv2.IMREAD_GRAYSCALE) w, h = template.shape[::<span class="hljs-number"><span class="hljs-number">-1</span></span>] color_yellow = (<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>) mon = {<span class="hljs-string"><span class="hljs-string">'top'</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-string"><span class="hljs-string">'left'</span></span>: <span class="hljs-number"><span class="hljs-number">350</span></span>, <span class="hljs-string"><span class="hljs-string">'width'</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-string"><span class="hljs-string">'height'</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(original_image)</span></span></span><span class="hljs-function">:</span></span> processed_image = cv2.cvtColor(original_image, cv2.COLOR_BGR2GRAY) processed_image = cv2.Canny(processed_image, threshold1=<span class="hljs-number"><span class="hljs-number">200</span></span>, threshold2=<span class="hljs-number"><span class="hljs-number">300</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> processed_image <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> op = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> mss.mss() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sct: monitor = {<span class="hljs-string"><span class="hljs-string">"top"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-string"><span class="hljs-string">"left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">800</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">"Screen capturing"</span></span>: last_time = time.time() img = numpy.array(sct.grab(monitor)) gray_frame = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) res = cv2.matchTemplate(gray_frame, template, cv2.TM_CCOEFF_NORMED) loc = np.where(res &gt;= <span class="hljs-number"><span class="hljs-number">0.7</span></span>) op += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (op) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> pt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(*loc[::<span class="hljs-number"><span class="hljs-number">-1</span></span>]): cv2.rectangle(img, pt, (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>] + w, pt[<span class="hljs-number"><span class="hljs-number">1</span></span>] + h), (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> img: pts = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>],pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) x = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>]) y = (pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (x) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> &lt; x &lt; <span class="hljs-number"><span class="hljs-number">490</span></span>: pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) x = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> key = cv2.waitKey(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">"q"</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op &gt; <span class="hljs-number"><span class="hljs-number">35</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">screen_record</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> sct = mss.mss() last_time = time.time() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): img = sct.grab(mon) print(<span class="hljs-string"><span class="hljs-string">'loop took {} seconds'</span></span>.format(time.time() - last_time)) last_time = time.time() img = np.array(img) processed_image = process_image(img) mean = np.mean(processed_image) print(<span class="hljs-string"><span class="hljs-string">'mean = '</span></span>, mean) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mean &lt;= float(<span class="hljs-number"><span class="hljs-number">0.11</span></span>): print(<span class="hljs-string"><span class="hljs-string">'SSSSSSSS '</span></span>) pyautogui.click(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">'q'</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">431</span></span>,<span class="hljs-number"><span class="hljs-number">175</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">450.200</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) screen_record() time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) ss()</code> </pre><br></div></div><br>  Ceux qui aiment dire que c'est une perte de temps, je remarquerai que ce n'est qu'un outil, vous pouvez utiliser ces bibliothèques dans d'autres projets.  La vision par ordinateur elle-même est utilisée à la fois pour le survol de missiles balistiques et pour les programmes d'aide aux personnes handicapées.  Où vous décidez de les appliquer, uniquement votre désir. <br><br>  Merci à tous pour votre attention. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459110/">https://habr.com/ru/post/fr459110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459098/index.html">Le registre des packages GitHub prend en charge les packages Swift</a></li>
<li><a href="../fr459100/index.html">Le registre des packages GitHub prend en charge les packages Swift</a></li>
<li><a href="../fr459102/index.html">Assiette cadeau ou musique gratuite pour les amateurs de cola et petits déjeuners prêts</a></li>
<li><a href="../fr459104/index.html">C # ou Java? TypeScript ou JavaScript? La classification des langages de programmation basée sur l'apprentissage automatique</a></li>
<li><a href="../fr459108/index.html">Tesla va présenter plusieurs surprises à la fois au second semestre de cette année</a></li>
<li><a href="../fr459112/index.html">Comprendre Google Chrome Convertir les fonctionnalités HTML en PDF</a></li>
<li><a href="../fr459114/index.html">14 meilleurs plugins WordPress SEO en 2019</a></li>
<li><a href="../fr459116/index.html">Un pas de plus vers la réparation du thymus</a></li>
<li><a href="../fr459118/index.html">Comment nous avons conçu et mis en œuvre le nouveau réseau sur Huawei dans le bureau de Moscou, partie 2</a></li>
<li><a href="../fr459120/index.html">Ordinateurs intégrés modulaires série UNO-1000/2000</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>