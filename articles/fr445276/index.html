<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¿â€ğŸ”§ ğŸ§” â– Guide d'utilisation complet ğŸ¥¥ ğŸ’© ğŸ™‹ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous avez Ã©crit plusieurs composants Ã  l'aide de crochets . Peut-Ãªtre - ils ont mÃªme crÃ©Ã© une petite application. En gÃ©nÃ©ral, vous Ãªtes plutÃ´t satisfa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guide d'utilisation complet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/445276/"> Vous avez Ã©crit plusieurs composants Ã  l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">crochets</a> .  Peut-Ãªtre - ils ont mÃªme crÃ©Ã© une petite application.  En gÃ©nÃ©ral, vous Ãªtes plutÃ´t satisfait du rÃ©sultat.  Vous Ãªtes habituÃ© Ã  l'API et, au cours du processus, vous avez trouvÃ© des astuces utiles non Ã©videntes.  Vous avez mÃªme crÃ©Ã© certains de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vos propres crochets</a> et rÃ©duit votre code Ã  300 lignes, en y plaÃ§ant ce qui Ã©tait prÃ©cÃ©demment reprÃ©sentÃ© par la rÃ©pÃ©tition de fragments de programme.  Ce que vous avez fait, vous l'avez montrÃ© Ã  mes collÃ¨gues.  "Bien jouÃ©", ont-ils dit Ã  propos de votre projet. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/bd/vj/e1/bdvje1n-vjzezd47wnphch1wq8a.png"></a> <br>  Mais parfois, lorsque vous utilisez <code>useEffect</code> , les composants des mÃ©canismes logiciels ne s'assemblent pas trÃ¨s bien.  Il vous semble que vous manquez quelque chose.  Tout cela est similaire Ã  l'utilisation d'Ã©vÃ©nements de cycle de vie de composants basÃ©s sur une classe ... mais est-ce vraiment le cas? <a name="habracut"></a><br>  En essayant de comprendre ce qui ne vous convient pas exactement, vous remarquez que vous posez les questions suivantes: <br><br><ul><li>  Comment jouer Ã  <code>componentDidMount</code> utilisant <code>useEffect</code> ? </li><li>  Comment charger des donnÃ©es dans <code>useEffect</code> ?  Qu'est-ce que <code>[]</code> ? </li><li>  Les fonctions doivent-elles Ãªtre spÃ©cifiÃ©es en tant que dÃ©pendances d'effet? </li><li>  Pourquoi un programme se retrouve-t-il parfois dans une boucle sans fin de donnÃ©es de rechargement? </li><li>  Pourquoi l'ancien Ã©tat est-il parfois visible Ã  l'intÃ©rieur des effets ou de vieilles propriÃ©tÃ©s sont-elles trouvÃ©es? </li></ul><br>  Lorsque j'ai commencÃ© Ã  utiliser des crochets, ces questions m'ont Ã©galement tourmentÃ©.  MÃªme lorsque je prÃ©parais la documentation, je ne pouvais pas dire que je maÃ®trisais parfaitement certaines subtilitÃ©s.  Depuis, j'ai eu plusieurs moments oÃ¹, soudain, rÃ©alisant quelque chose d'important, j'ai vraiment voulu m'exclamer: "EurÃªka!"  Ã€ propos de ce que j'ai rÃ©alisÃ© Ã  ces moments, je veux vous le dire.  Ce que vous apprenez sur <code>useEffect</code> maintenant vous permettra de voir clairement les rÃ©ponses Ã©videntes aux questions ci-dessus. <br><br>  Mais pour voir les rÃ©ponses Ã  ces questions, nous devons d'abord prendre du recul.  Le but de cet article n'est pas de donner Ã  ses lecteurs des instructions pas Ã  pas pour travailler avec <code>useEffect</code> .  Il vise Ã  vous aider, pour ainsi <code>useEffect</code> " <code>useEffect</code> " <code>useEffect</code> .  Et franchement, il n'y a pas grand-chose Ã  apprendre.  En fait, la plupart du temps, nous passerons Ã  oublier ce que nous savions auparavant. <br><br>  Tout dans ma tÃªte ne s'est rÃ©uni qu'aprÃ¨s avoir arrÃªtÃ© de regarder le crochet <code>useEffect</code> travers le prisme des mÃ©thodes familiÃ¨res du cycle de vie des composants Ã  base de composants. <br><br><h3>  "Vous devez oublier ce que vous avez appris" </h3><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/ru/company/ruvds/blog/445276/Yoda</a></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c3/9be/fba/8c39befba869c3bae1a6b87c2d2589d1.jpg"></div><br>  Il est supposÃ© que le lecteur de ce document connaÃ®t quelque peu l'API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">useEffect</a> .  Il s'agit d'un article assez long, il peut Ãªtre comparÃ© Ã  un petit livre.  Le fait est que je prÃ©fÃ¨re exprimer mes pensÃ©es de cette faÃ§on.  Ci-dessous, trÃ¨s briÃ¨vement, des rÃ©ponses sont donnÃ©es aux questions qui ont Ã©tÃ© discutÃ©es ci-dessus.  Peut-Ãªtre sont-ils utiles Ã  ceux qui n'ont pas le temps ou le dÃ©sir de lire tout le matÃ©riel. <br><br>  Si le format dans lequel nous allons considÃ©rer <code>useEffect</code> , avec toutes ses explications et exemples, ne vous convient pas, vous pouvez attendre un peu - jusqu'au moment oÃ¹ ces explications apparaissent dans d'innombrables autres manuels.  Voici la mÃªme histoire qu'avec la bibliothÃ¨que React elle-mÃªme, qui en 2013 Ã©tait quelque chose de complÃ¨tement nouveau.  Il faut un certain temps Ã  la communautÃ© du dÃ©veloppement pour reconnaÃ®tre le nouveau modÃ¨le mental et pour que le matÃ©riel pÃ©dagogique basÃ© sur ce modÃ¨le apparaisse. <br><br><h2>  <font color="#3AC1EF">RÃ©ponses aux questions</font> </h2><br>  Voici de brÃ¨ves rÃ©ponses aux questions posÃ©es au dÃ©but de ce document, destinÃ©es Ã  ceux qui ne souhaitent pas lire l'intÃ©gralitÃ© de ce texte.  Si, en lisant ces rÃ©ponses, vous sentez que vous ne comprenez pas vraiment le sens de ce que vous lisez, parcourez le matÃ©riel.  Vous trouverez des explications dÃ©taillÃ©es dans le texte.  Si vous allez tout lire, vous pouvez ignorer cette section. <br><br><h3>  <font color="#3AC1EF">â–Comment lire le composantDidMount en utilisant useEffect?</font> </h3><br>  Bien que vous puissiez utiliser la construction <code>useEffect(fn, [])</code> pour lire la fonctionnalitÃ© <code>componentDidMount</code> , ce n'est pas l'Ã©quivalent exact de <code>componentDidMount</code> .  Ã€ savoir, contrairement Ã  <code>componentDidMount</code> , il capture les propriÃ©tÃ©s et l'Ã©tat.  Par consÃ©quent, mÃªme Ã  l'intÃ©rieur du rappel, vous verrez les propriÃ©tÃ©s et l'Ã©tat initiaux.  Si vous voulez voir la derniÃ¨re version de quelque chose, vous pouvez l'Ã©crire dans le lien <code>ref</code> .  Mais gÃ©nÃ©ralement, il existe un moyen plus simple de structurer le code, ce qui est facultatif.  N'oubliez pas que le modÃ¨le des effets mentaux est diffÃ©rent de celui applicable Ã  <code>componentDidMount</code> et aux autres mÃ©thodes de cycle de vie des composants.  Par consÃ©quent, essayer de trouver les Ã©quivalents exacts peut faire plus de mal que de bien.  Pour travailler de maniÃ¨re productive, vous avez besoin, pour ainsi dire, de Â«penser en effetsÂ».  La base de leur modÃ¨le mental est plus proche de la mise en Å“uvre de la synchronisation que de la rÃ©ponse aux Ã©vÃ©nements du cycle de vie des composants. <br><br><h3>  <font color="#3AC1EF">OwComment charger correctement les donnÃ©es dans useEffect?</font>  <font color="#3AC1EF">Qu'est-ce que []?</font> </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon guide sur le chargement des donnÃ©es Ã  l'aide de <code>useEffect</code> .  Essayez de le lire dans son intÃ©gralitÃ©!  Ce n'est pas aussi gros que Ã§a.  Les crochets, <code>[]</code> , reprÃ©sentant un tableau vide, signifient que l'effet n'utilise pas les valeurs participant au flux de donnÃ©es React, et pour cette raison son utilisation unique peut Ãªtre considÃ©rÃ©e comme sÃ»re.  De plus, l'utilisation d'un tableau vide de dÃ©pendances est une source d'erreur courante dans le cas oÃ¹ une certaine valeur est effectivement utilisÃ©e dans l'effet.  Vous devrez maÃ®triser plusieurs stratÃ©gies (principalement prÃ©sentÃ©es sous la forme <code>useReducer</code> et <code>useCallback</code> ) qui peuvent aider Ã  Ã©liminer le besoin d'une dÃ©pendance plutÃ´t que de rejeter cette dÃ©pendance de maniÃ¨re dÃ©raisonnable. <br><br><h3>  <font color="#3AC1EF">â– Les fonctions doivent-elles Ãªtre spÃ©cifiÃ©es en tant que dÃ©pendances d'effet?</font> </h3><br>  Il est recommandÃ© que les fonctions qui n'ont pas besoin de propriÃ©tÃ©s ou d'un Ã©tat soient prises en dehors des composants, et les fonctions qui sont utilisÃ©es uniquement par les effets sont recommandÃ©es pour Ãªtre placÃ©es Ã  l'intÃ©rieur des effets.  Si aprÃ¨s cela, votre effet utilise toujours des fonctions qui se trouvent dans la portÃ©e du rendu (y compris les fonctions des propriÃ©tÃ©s), enveloppez-les dans <code>useCallback</code> oÃ¹ elles sont dÃ©clarÃ©es et essayez de les rÃ©utiliser.  Pourquoi est-ce important?  Les fonctions peuvent Â«voirÂ» les valeurs des propriÃ©tÃ©s et de l'Ã©tat, elles participent donc au flux de donnÃ©es.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> des informations plus dÃ©taillÃ©es Ã  ce sujet dans notre FAQ. <br><br><h3>  <font color="#3AC1EF">â– Pourquoi un programme se retrouve-t-il parfois dans une boucle sans fin de donnÃ©es de rechargement?</font> </h3><br>  Cela peut se produire lorsque le chargement des donnÃ©es est effectuÃ© dans un effet qui n'a pas de second argument reprÃ©sentant les dÃ©pendances.  Sans cela, les effets sont effectuÃ©s aprÃ¨s chaque opÃ©ration de rendu - ce qui signifie que le rÃ©glage de l'Ã©tat entraÃ®nera le rappel de ces effets.  Une boucle infinie peut Ã©galement se produire si une valeur qui change toujours est indiquÃ©e dans le tableau de dÃ©pendances.  DÃ©couvrez le type de valeur possible en supprimant les dÃ©pendances une par une.  Cependant, la suppression des dÃ©pendances (ou l'utilisation imprudente de <code>[]</code> ) n'est gÃ©nÃ©ralement pas la bonne approche pour rÃ©soudre un problÃ¨me.  Au lieu de cela, vous devriez trouver la source du problÃ¨me et vraiment le rÃ©soudre.  Par exemple, les fonctions peuvent provoquer un problÃ¨me similaire.  Vous pouvez aider Ã  le rÃ©soudre en les mettant dans des effets, en les dÃ©plaÃ§ant hors des composants ou en les <code>useCallback</code> dans <code>useCallback</code> .  Pour Ã©viter de crÃ©er plusieurs objets, vous pouvez utiliser <code>useMemo</code> . <br><br><h3>  <font color="#3AC1EF">â– Pourquoi parfois l'ancien Ã©tat est visible Ã  l'intÃ©rieur des effets ou de vieilles propriÃ©tÃ©s sont-elles trouvÃ©es?</font> </h3><br>  Les effets Â«voientÂ» toujours les propriÃ©tÃ©s et l'Ã©tat Ã  partir du rendu dans lequel ils sont dÃ©clarÃ©s.  Cela permet d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã©viter les erreurs</a> , mais dans certains cas, cela peut interfÃ©rer avec le fonctionnement normal du composant.  Dans de tels cas, vous pouvez utiliser explicitement des liens <code>ref</code> mutables pour travailler avec de telles valeurs (vous pouvez en lire plus Ã  la fin de l'article susmentionnÃ©).  Si vous pensez que vous voyez des propriÃ©tÃ©s ou un Ã©tat de l'ancien rendu, mais ne vous y attendez pas, vous avez peut-Ãªtre manquÃ© certaines dÃ©pendances.  Pour apprendre Ã  les voir, utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> rÃ¨gle du linter.  Dans quelques jours, cela deviendra quelque chose comme votre seconde nature.  Jetez Ã©galement un Å“il Ã  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> rÃ©ponse dans notre FAQ. <br><br>  J'espÃ¨re que ces rÃ©ponses aux questions ont Ã©tÃ© utiles Ã  ceux qui les ont lues.  Parlons maintenant davantage de <code>useEffect</code> . <br><br><h2>  <font color="#3AC1EF">Chaque rendu a ses propres propriÃ©tÃ©s et Ã©tats.</font> </h2><br>  Avant de pouvoir discuter des effets, nous devons parler de rendu. <br><br>  Voici le compteur fonctionnel. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;   &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); }</span></span></span></span></span></span></code> </pre> <br>  Examinez de prÃ¨s la ligne <code>&lt;p&gt;You clicked {count} times&lt;/p&gt;</code> .  Que veut-elle dire?  La constante constante Â«observeÂ»-t-elle en quelque sorte les changements d'Ã©tat et est-elle mise Ã  jour automatiquement?  Cette conclusion peut Ãªtre considÃ©rÃ©e comme une sorte de premiÃ¨re idÃ©e valable de quelqu'un qui Ã©tudie React, mais ce n'est pas un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modÃ¨le mental prÃ©cis de</a> ce qui se passe. <br><br>  Dans notre exemple, le <code>count</code> n'est qu'un nombre.  Ce n'est pas une sorte de Â«liaison de donnÃ©esÂ» magique, pas une sorte d 'Â«objet observateurÂ» ou de Â«proxyÂ», ou quoi que ce soit d'autre.  Nous avons devant nous un bon vieux numÃ©ro, comme celui-ci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> count = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ...</span></span></code> </pre> <br>  Lors de la premiÃ¨re sortie du composant, la valeur de <code>count</code> obtenue Ã  partir de <code>useState()</code> est 0. Lorsque nous appelons <code>setCount(1)</code> , React appelle Ã  nouveau le composant.  Ce <code>count</code> temps sera 1. Et ainsi de suite: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { const count = 0; //  useState() // ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ... } //       function Counter() { const count = 1; //  useState() // ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ... } //        function Counter() { const count = 2; //  useState() // ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ... }</span></span></code> </pre> <br>  React appelle le composant chaque fois que nous mettons Ã  jour l'Ã©tat.  Par consÃ©quent, chaque opÃ©ration de rendu Â«voitÂ» sa propre valeur de l'Ã©tat de <code>counter</code> , qui, Ã  l'intÃ©rieur de la fonction, est une constante. <br><br>  Par consÃ©quent, cette ligne n'effectue aucune opÃ©ration de liaison de donnÃ©es spÃ©ciale: <br><br><pre> <code class="javascript hljs">&lt;p&gt;You clicked {count} times&lt;<span class="hljs-regexp"><span class="hljs-regexp">/p&gt;</span></span></code> </pre> <br>  Il n'incorpore qu'une valeur numÃ©rique dans le code gÃ©nÃ©rÃ© lors du rendu.  Ce numÃ©ro est fourni par React.  Lorsque nous appelons <code>setCount</code> , React appelle Ã  nouveau le composant avec une valeur de <code>count</code> diffÃ©rente.  React met ensuite Ã  jour le DOM afin que le modÃ¨le d'objet de document corresponde Ã  la derniÃ¨re sortie de donnÃ©es lors du rendu du composant. <br><br>  La conclusion la plus importante que l'on peut en tirer est que le <code>count</code> est une constante Ã  l'intÃ©rieur d'un rendu particulier et ne change pas au fil du temps.  Le composant qui est appelÃ© encore et encore change.  Chaque rendu "voit" sa propre valeur de <code>count</code> , qui est isolÃ©e pour chacune des opÃ©rations de rendu. <br><br>  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> document, vous pouvez trouver des dÃ©tails sur ce processus. <br><br><h2>  <font color="#3AC1EF">Chaque rendu a ses propres gestionnaires d'Ã©vÃ©nements.</font> </h2><br>  Tout est encore clair.  Qu'en est-il des gestionnaires d'Ã©vÃ©nements? <br>  Jetez un oeil Ã  cet exemple.  Ici, trois secondes aprÃ¨s avoir cliquÃ© sur le bouton, une boÃ®te de message s'affiche avec des informations sur la valeur stockÃ©e dans <code>count</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleAlertClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     alert(<span class="hljs-string"><span class="hljs-string">'You clicked on: '</span></span> + count);   }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;     &lt;button onClick={handleAlertClick}&gt;       Show alert     &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/button&gt;   &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; </span></span></span><span class="hljs-function">); }</span></span></code> </pre> <br>  Supposons que j'exÃ©cute la sÃ©quence d'actions suivante: <br><br><ul><li>  Je vais porter la valeur de <code>count</code> Ã  3 en cliquant sur le bouton <code>Click me</code> . </li><li>  Cliquez sur le bouton <code>Show alert</code> . </li><li>  Augmentez la valeur Ã  5 avant l'expiration du dÃ©lai. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46c/55d/5f1/46c55d5f1f749462b7a173f1e748e41e.gif"></div><br>  <i><font color="#999999">Augmentation de la valeur de comptage aprÃ¨s avoir cliquÃ© sur le bouton Afficher l'alerte</font></i> <br><br>  Que pensez-vous qui apparaÃ®t dans la boÃ®te de message?  5 sera-t-il affichÃ©, ce qui correspond Ã  la valeur de <code>count</code> au moment du dÃ©clenchement de la minuterie, ou 3 - c'est-Ã -dire la valeur de <code>count</code> au moment oÃ¹ le bouton est enfoncÃ©? <br><br>  Vous trouverez maintenant la rÃ©ponse Ã  cette question, mais si vous voulez tout savoir par vous-mÃªme - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici une</a> version de travail de cet exemple. <br><br>  Si ce que vous avez vu vous semble incomprÃ©hensible - voici un exemple plus proche de la rÃ©alitÃ©.  Imaginez une application de chat dans laquelle, dans l'Ã©tat, l' <code>ID</code> destinataire actuel du message est stockÃ©, et il y a un bouton <code>Send</code> .  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> document, ce qui se passe est considÃ©rÃ© en dÃ©tail.  En fait, la bonne rÃ©ponse Ã  la question de ce qui apparaÃ®t dans la boÃ®te de message est 3. <br><br>  Le mÃ©canisme d'affichage d'une boÃ®te de message Â«captureÂ» l'Ã©tat au moment du clic sur le bouton. <br><br>  Il existe des moyens d'implÃ©menter une autre version du comportement, mais pour l'instant nous allons traiter du comportement standard du systÃ¨me.  Lors de la construction de modÃ¨les mentaux de technologies, il est important de distinguer le Â«chemin de moindre rÃ©sistanceÂ» de toutes sortes de Â«sorties de secoursÂ». <br><br>  Comment Ã§a marche? <br><br>  Nous avons dÃ©jÃ  dit que la valeur de <code>count</code> est une constante pour chaque appel spÃ©cifique Ã  notre fonction.  Je pense que cela vaut la peine de sâ€™Ã©tendre plus en dÃ©tail.  Le fait est que notre fonction est appelÃ©e plusieurs fois (une fois pour chaque opÃ©ration de rendu), mais avec chacun de ces appels, <code>count</code> intÃ©rieur est une constante.  Cette constante est dÃ©finie sur une valeur spÃ©cifique (reprÃ©sentant l'Ã©tat d'une opÃ©ration de rendu particuliÃ¨re). <br><br>  Ce comportement des fonctions n'est pas quelque chose de spÃ©cial pour React - les fonctions ordinaires se comportent de la mÃªme maniÃ¨re: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayHi</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">person</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = person.name; setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name); }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someone = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Dan'</span></span>}; sayHi(someone); someone = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Yuzhi'</span></span>}; sayHi(someone); someone = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Dominic'</span></span>}; sayHi(someone);</code> </pre> <br>  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> exemple, la variable externe <code>someone</code> rÃ©affectÃ©e plusieurs fois.  La mÃªme chose peut se produire quelque part Ã  l'intÃ©rieur de React, l'Ã©tat actuel du composant peut changer.  Cependant, Ã  l'intÃ©rieur de la fonction <code>sayHi</code> , il existe un <code>name</code> constante locale associÃ© Ã  la <code>person</code> d'un appel particulier.  Cette constante est locale, donc ses valeurs dans diffÃ©rents appels de fonction sont isolÃ©es les unes des autres!  Par consÃ©quent, aprÃ¨s une temporisation, chaque fenÃªtre de message affichÃ©e Â«se souvientÂ» de sa propre valeur de <code>name</code> . <br><br>  Cela explique comment notre gestionnaire d'Ã©vÃ©nements capture la valeur de <code>count</code> lorsqu'un bouton est cliquÃ©.  Si nous, en travaillant avec des composants, appliquons le mÃªme principe, il s'avÃ¨re que chaque rendu Â«voitÂ» sa propre valeur de <code>count</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { const count = 0; //  useState() // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + count);   }, 3000); } // ... } //       function Counter() { const count = 1; //  useState() // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + count);   }, 3000); } // ... } //        function Counter() { const count = 2; //  useState() // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + count);   }, 3000); } // ... }</span></span></code> </pre> <br>  Par consÃ©quent, chaque rendu renvoie en fait son propre <code>handleAlertClick</code> "version".  Chacune de ces versions Â«se souvientÂ» de sa propre valeur de <code>count</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + 0);   }, 3000); } // ... &lt;button onClick={handleAlertClick} /&gt; // ,   0 // ... } //       function Counter() { // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + 1);   }, 3000); } // ... &lt;button onClick={handleAlertClick} /&gt; // ,   1 // ... } //        function Counter() { // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + 2);   }, 3000); } // ... &lt;button onClick={handleAlertClick} /&gt; // ,   2 // ... }</span></span></code> </pre> <br>  C'est pourquoi dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> exemple, les gestionnaires d'Ã©vÃ©nements Â«appartiennentÂ» Ã  des rendus spÃ©cifiques, et lorsque vous cliquez sur le bouton, le composant utilise l'Ã©tat de <code>count</code> de ces rendus. <br><br>  Dans chaque rendu particulier, les propriÃ©tÃ©s et l'Ã©tat restent toujours les mÃªmes.  Mais si diffÃ©rentes opÃ©rations de rendu utilisent leurs propres propriÃ©tÃ©s et Ã©tats, la mÃªme chose se produit avec tous les mÃ©canismes qui les utilisent (y compris les gestionnaires d'Ã©vÃ©nements).  Ils "appartiennent" Ã©galement Ã  des rendus spÃ©cifiques.  Par consÃ©quent, mÃªme les fonctions asynchrones dans les gestionnaires d'Ã©vÃ©nements Â«verrontÂ» les mÃªmes valeurs de <code>count</code> . <br><br>  Il convient de noter que dans l'exemple ci-dessus, j'ai intÃ©grÃ© les valeurs de <code>count</code> spÃ©cifiques directement dans la fonction <code>handleAlertClick</code> .  Ce remplacement "mental" ne nous fera pas de mal, car le <code>count</code> constant ne peut pas Ãªtre modifiÃ© dans un rendu particulier.  PremiÃ¨rement, c'est une constante, et deuxiÃ¨mement, c'est un nombre.  On peut dire avec confiance que l'on peut aussi penser Ã  d'autres significations, comme les objets, mais seulement si l'on accepte en rÃ¨gle gÃ©nÃ©rale de ne pas faire de changements (mutations) de l'Ã©tat.  Dans le mÃªme temps, nous sommes satisfaits de l'appel Ã  <code>setSomething(newObj)</code> avec un nouvel objet au lieu de changer celui existant, car avec cette approche, l'Ã©tat appartenant au rendu prÃ©cÃ©dent est intact. <br><br><h2>  <font color="#3AC1EF">Chaque rendu a ses propres effets.</font> </h2><br>  Ce matÃ©riel, comme vous le savez, est consacrÃ© aux effets, mais nous n'en avons mÃªme pas encore parlÃ©.  Maintenant, nous allons le rÃ©parer.  Il s'avÃ¨re que travailler avec des effets n'est pas particuliÃ¨rement diffÃ©rent de ce que nous avons dÃ©jÃ  compris. <br><br>  Prenons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un exemple</a> tirÃ© de la documentation, qui est trÃ¨s similaire Ã  celui que nous avons dÃ©jÃ  analysÃ©: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${count}</span></span></span><span class="hljs-string"> times`</span></span>; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;   &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); }</span></span></span></span></span></span></code> </pre> <br>  Maintenant, j'ai une question pour vous.  Comment un effet lit-il la valeur de <code>count</code> la plus rÃ©cente? <br><br>  Peut-Ãªtre qu'une Â«liaison de donnÃ©esÂ» est utilisÃ©e ici, ou un Â«objet observateurÂ» qui met Ã  jour la valeur de <code>count</code> Ã  l'intÃ©rieur de la fonction d'effet?  Peut-Ãªtre que <code>count</code> est une variable mutable dont la valeur dÃ©finie par React Ã  l'intÃ©rieur de notre composant, Ã  la suite de laquelle l'effet voit toujours sa derniÃ¨re version? <br><br>  Non. <br><br>  Nous savons dÃ©jÃ  que dans le rendu d'un composant particulier, le <code>count</code> est une constante.  MÃªme les gestionnaires d'Ã©vÃ©nements "voient" la valeur de <code>count</code> du rendu auquel ils "appartiennent" car le <code>count</code> est une constante situÃ©e dans une certaine Ã©tendue.  Il en va de mÃªme pour les effets! <br><br>  Et il convient de noter que ce n'est pas le <code>count</code> variables <code>count</code> qui change en quelque sorte Ã  l'intÃ©rieur de l'effet "inchangÃ©".  Devant nous se trouve la fonction de l'effet lui-mÃªme, qui est diffÃ©rent dans chaque opÃ©ration de rendu. <br><br>  Chaque version Â«voitÂ» la valeur de <code>count</code> du rendu auquel elle Â«appartientÂ»: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { // ... useEffect(   //        () =&gt; {     document.title = `You clicked ${0} times`;   } ); // ... } //       function Counter() { // ... useEffect(   //        () =&gt; {     document.title = `You clicked ${1} times`;   } ); // ... } //        function Counter() { // ... useEffect(   //        () =&gt; {     document.title = `You clicked ${2} times`;   } ); // .. }</span></span></code> </pre> <br> React     ,       DOM       . <br><br>  ,          (  ), ,   ,   ,     Â«Â»      ,   Â«Â». <br><br> , ,       . <br><br>  ,    ( ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>            ).    ,     ,        ,   . <br><br>      ,       ,        : <br><br> React: <br><br><ul><li>      ,      0. </li></ul><br> : <br><br><ul><li>   : <code>&lt;p&gt;You clicked 0 times&lt;/p&gt;</code> . </li><li>  ,       ,   : <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul><br> React: <br><br><ul><li> .  . , ,   -  DOM. </li></ul><br> : <br><br><ul><li> ,     . </li></ul><br> React: <br><br><ul><li> ,    ,    . </li><li>  <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul><br>     ,      .   ,     ,  -   : <br><br> : <br><br><ul><li> , React,     1. </li></ul><br> React: <br><br><ul><li>      ,      1. </li></ul><br> : <br><br><ul><li>   : <code>&lt;p&gt;You clicked 1 times&lt;/p&gt;</code> . </li><li>  ,       ,   : <code>() =&gt; { document.title = 'You clicked 1 times' }</code> . </li></ul><br> React: <br><br><ul><li> .  . , ,   -  DOM. </li></ul><br> : <br><br><ul><li> ,     . </li></ul><br> React: <br><br><ul><li> ,    ,    . </li><li>  <code>() =&gt; { document.title = 'You clicked 1 times' }</code> . </li></ul><br><h2> <font color="#3AC1EF">  â€¦ </font> </h2><br>     ,  ,     ,     ,  Â«Â»       . <br><br>    .   : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${count}</span></span></span><span class="hljs-string"> times`</span></span>);   }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;   &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); }</span></span></span></span></span></span></code> </pre> <br>        ,       ? <br><br>  ,       . ,    ,    ,       .    !    ,    ,      , ,  ,    <code>count</code> .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a57/27d/333/a5727d333c270e05942f508707265378.gif"></div><br> <i><font color="#999999">       </font></i> <br><br>    : Â«,     !         ?Â». <br><br> ,   , <code>this.setState</code>  ,   ,   .    ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ,    ,   ,  : <br><br><pre> <code class="javascript hljs">  componentDidUpdate() {   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.state.count}</span></span></span><span class="hljs-string"> times`</span></span>);   }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }</code> </pre> <br>   ,  <code>this.state.count</code>       <code>count</code> ,    ,   .  ,      , ,     5 ,  5  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/264/b32/9ed/264b329edc111a1973003bdf2bcacd65.gif"></div><br> <i><font color="#999999">       </font></i> <br><br>     ,       JavaScript-,  ,   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,    ,      <code>setTimeout</code> ,      .   ,          (React   <code>this.state</code>    ,          ),    . <br><br>  â€”      ,  ,  Â«Â»  ,   .        ,  ,  ,    . ,    ,         . , ,   ,    ,   ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br><h2> <font color="#3AC1EF">  </font> </h2><br>    ,        (  , , -   API  )      ,   . <br><br>      : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(props.counter);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); }); <span class="hljs-comment"><span class="hljs-comment">// ... } function Example(props) { const counter = props.counter; useEffect(() =&gt; {   setTimeout(() =&gt; {     console.log(counter);   }, 1000); }); // ... }</span></span></code> </pre> <br>   ,     Â«Â»     .   !           .  ,       . <br><br> , ,  - ,   ,     ,   ,   .    ,   <code>ref</code> ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br>  ,           ,     ,  ,  ,    .  ,    (    ),   Â«Â»         React-.       ,       ,         .       ,    . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      ,   ,      ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> latestCount = useRef(count); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-comment"><span class="hljs-comment">//        count   latestCount.current = count;   setTimeout(() =&gt; {     //            console.log(`You clicked ${latestCount.current} times`);   }, 3000); }); // ...</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78f/794/826/78f7948263dd13b023498b23cb99f4fc.gif"></div><br> <i><font color="#999999">       </font></i> <br><br>   -  React    .     React   <code>this.state</code>  .         ,      ,   <code>latestCount.current</code>         .  ,       .        ,   ,   ,    . <br><br><h2> <font color="#3AC1EF">  ?</font> </h2><br>    ,      .  ,      ,  Â«Â»         . <br><br>   : <br><br><pre> <code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   ChatAPI.subscribeToFriendStatus(props.id, handleStatusChange);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     ChatAPI.unsubscribeFromFriendStatus(props.id, handleStatusChange);   }; });</code> </pre> <br> , <code>props</code> â€”   <code>{id: 10}</code>    ,  <code>{id: 20}</code> â€”  .  ,     : <br><br><ul><li> React     <code>{id: 10}</code> . </li><li> React    <code>{id: 20}</code> . </li><li> React    <code>{id: 20}</code> . </li></ul><br> ( ,   ,   .) <br><br>      ,    Â«Â»   - ,      ,     Â«Â»   - ,      .  â€”  ,       ,   ,        .     . <br><br> React    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ,       .   ,         .    .            .        : <br><br><ul><li> React    <code>{id: 20}</code> . </li><li>     .     <code>{id: 20}</code> . </li><li> React     <code>{id: 10}</code> . </li><li> React    <code>{id: 20}</code> . </li></ul><br>       ,          Â«Â»  <code>props</code> ,  <code>{id: 10}</code> ,  ,   <code>props</code>  <code>{id: 20}</code> . <br><br>  ,     â€¦ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fe/238/cf0/5fe238cf03a21dfa32af624124fcdcff.gif"></div><br> <i><font color="#999999">   â€”    ?</font></i> <br><br>     : Â«      (  , , -   API  )      ,   Â». <br><br>   !         Â« Â» ,     .    ,   ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,  props  {id: 10} function Example() { // ... useEffect(   //       () =&gt; {     ChatAPI.subscribeToFriendStatus(10, handleStatusChange);     //           return () =&gt; {       ChatAPI.unsubscribeFromFriendStatus(10, handleStatusChange);     };   } ); // ... } //  ,  props  {id: 20} function Example() { // ... useEffect(   //       () =&gt; {     ChatAPI.subscribeToFriendStatus(20, handleStatusChange);     //           return () =&gt; {       ChatAPI.unsubscribeFromFriendStatus(20, handleStatusChange);     };   } ); // ... }</span></span></code> </pre> <br>       ,        ,   â€¦     ,  Â«Â»      ,   -,   <code>{id: 10}</code> . <br><br>    React         . ,      ,    .       <code>props</code> ,    . <br><br><h2> <font color="#3AC1EF">,    </font> </h2><br>      React  ,           .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br> ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Greeting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Greeting"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     Hello, {name}   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>     ,     <code>&lt;Greeting name="Dan" /&gt;</code> ,   â€” <code>&lt;Greeting name="Yuzhi" /&gt;</code> ,       <code>&lt;Greeting name="Yuzhi" /&gt;</code> .             <code>Hello, Yuzhi</code> . <br><br> ,   ,   .    React,     .   ,   ,     .         <code>$.addClass</code>  <code>$.removeClass</code>  jQuery- ( â€” ,    Â«Â»),   ,    CSS-  React (  â€” ,    Â«Â»). <br><br> React  DOM  ,       .      Â«Â»  Â«Â». <br><br>       .  <code>useEffect</code>   ,     React,    . <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Greeting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name }</span></span></span><span class="hljs-function">) </span></span>{ useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Greeting"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     Hello, {name}   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>       <code>useEffect</code>    ,     ,    .     ,    -    ,      !      ,      Â«Â»,    Â«Â». <br><br>      ,         <code>A</code> ,   <code>B</code> ,   â€”   <code>C</code> ,   ,         <code>C</code> .               (,    - ),         . <br><br>  , , ,             . (         ). <br><br>    ? <br><br><h2> <font color="#3AC1EF"> React  </font> </h2><br>    React     DOM.     DOM      , React     DOM,  - . <br><br> ,     : <br><br><pre> <code class="javascript hljs">&lt;h1 className=<span class="hljs-string"><span class="hljs-string">"Greeting"</span></span>&gt; Hello, Dan &lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt;</span></span></code> </pre> <br>       : <br><br><pre> <code class="javascript hljs">&lt;h1 className=<span class="hljs-string"><span class="hljs-string">"Greeting"</span></span>&gt; Hello, Yuzhi &lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt;</span></span></code> </pre> <br> React   : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldProps = {<span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'Greeting'</span></span>, <span class="hljs-attr"><span class="hljs-attr">children</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newProps = {<span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'Greeting'</span></span>, <span class="hljs-attr"><span class="hljs-attr">children</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello, Yuzhi'</span></span>};</code> </pre> <br> React      ,   <code>children</code> ,        DOM.   ,  <code>className</code>  .     : <br><br><pre> <code class="javascript hljs">domNode.innerText = <span class="hljs-string"><span class="hljs-string">'Hello, Yuzhi'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// domNode.className   </span></span></code> </pre> <br>     -     ?    ,           ,      . <br><br> , ,     -  : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Greeting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [counter, setCounter] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;h1 className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"Greeting"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;     Hello, {name}     &lt;button onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> setCounter(counter + <span class="hljs-number"><span class="hljs-number">1</span></span>)}&gt;       Increment     &lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;   &lt;/</span></span>h1&gt; ); }</code> </pre> <br>      <code>counter</code>  .   <code>document.title</code>   <code>name</code> ,   <code>name</code>   .  <code>document.title</code>    <code>counter</code>  ,   . <br><br>   React â€¦  ? <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> oldEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//   React  ,        ?</span></span></code> </pre> <br>    â€” . React     ,    ,   . (     .       <code>name</code> .) <br><br>  ,      ,      (    <code>deps</code> ),    <code>useEffect</code> : <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }, [name]); <span class="hljs-comment"><span class="hljs-comment">//  </span></span></code> </pre> <br>    ,      React: Â«,  ,        ,   ,      <code>name</code>       Â». <br><br>   ,        ,       React     : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldDeps = [<span class="hljs-string"><span class="hljs-string">'Dan'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newDeps = [<span class="hljs-string"><span class="hljs-string">'Dan'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// React     ,     . //      ,     .</span></span></code> </pre> <br>          ,    ,         !       -  -     . <br><br><h2> <font color="#3AC1EF">  React  </font> </h2><br>    React    â€”     .  ,   ,      ,    ,    <code>useEffect</code> ,        ,   ,   . (      !) <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-comment"><span class="hljs-comment">// ... } useEffect(() =&gt; {   fetchData(); }, []); //   ?  .      . // ... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FAQ  </a>     ,     .      . <br><br> Â«       !Â», â€”  .  :    ,          ,   .   , , ,   â€” ,       . <br><br> ,    ,   . ,  ,       ,   ,     .       ,    .    . <br><br> ,      ,      . <br><br><h2> <font color="#3AC1EF">    ,    React</font> </h2><br>      ,  ,  React   ,     . <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }, [name]);</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fae/247/cd0/fae247cd068eedbd4b62ba50592d2b3d.gif"></div><br> <i><font color="#999999">    â€”  </font></i> <br><br>       ,   ,  , <code>[]</code> , ,   ,   ,    : <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }, []); <span class="hljs-comment"><span class="hljs-comment">// :    name</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25f/75d/b3f/25f75db3f9f57ffe1426912093577445.gif"></div><br> <i><font color="#999999">   â€”    </font></i> <br><br>          .       ,    Â«Â» ,    ,   . <br><br> , ,   ,    .      ,      : Â«   <code>setInterval</code>        <code>clearInterval</code>   Â». <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    .  ,  ,   ,   <code>useEffect</code> ,  , ,     <code>[]</code> . -      , ? <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(count + <span class="hljs-number"><span class="hljs-number">1</span></span>);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, []); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{count}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; }</code> </pre> <br> ,  ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br>       ,     Â«     ,      Â»,         .   ,       ,      ,  <code>setInterval</code> ,  .      ,  ? <br><br>      ,   â€”     React   ,       ,        .  ,   <code>count</code> ,     React   , ,    ,  .        â€”   . <br><br>     <code>count</code>  0.   <code>setCount(count + 1)</code>      <code>setCount(0 + 1)</code> .         ,   â€”    <code>[]</code> ,     <code>setCount(0 + 1)</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,   0 function Counter() { // ... useEffect(   //       () =&gt; {     const id = setInterval(() =&gt; {       setCount(0 + 1); //  setCount(1)     }, 1000);     return () =&gt; clearInterval(id);   },   [] //    ); // ... } //       1 function Counter() { // ... useEffect(   //     - ,    //   React  ,   .   () =&gt; {     const id = setInterval(() =&gt; {       setCount(1 + 1);     }, 1000);     return () =&gt; clearInterval(id);   },   [] ); // ... }</span></span></code> </pre> <br>   React,   ,         ,     â€” . <br><br>    <code>count</code> â€” ,    (   ): <br><br><pre> <code class="javascript hljs">  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> count = <span class="hljs-comment"><span class="hljs-comment">// ... useEffect(() =&gt; {   const id = setInterval(() =&gt; {     setCount(count + 1);   }, 1000);   return () =&gt; clearInterval(id); }, []);</span></span></code> </pre> <br>            . React        . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29e/53b/d0c/29e53bd0c9b7d2ac70d3cd924886b030.gif"></div><br> <i><font color="#999999">  ,     </font></i> <br><br>        .       ,    ,  React       ,   ,     .           â€”   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">-</a>      . <br><br><h2> <font color="#3AC1EF">       </font> </h2><br>       React   ,      .     ,  ,    ,   . <br><br>       ,      ,   ,    .     <code>count</code> : <br><br><pre> <code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setCount(count + <span class="hljs-number"><span class="hljs-number">1</span></span>); }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [count]);</code> </pre> <br>    . ,    ,   â€”  ,    .   <code>count</code>    ,         <code>count</code>   ,   <code>setCount(count + 1)</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,   0 function Counter() { // ... useEffect(   //       () =&gt; {     const id = setInterval(() =&gt; {       setCount(0 + 1); // setCount(count + 1)     }, 1000);     return () =&gt; clearInterval(id);   },   [0] // [count] ); // ... } //  ,   1 function Counter() { // ... useEffect(   //       () =&gt; {     const id = setInterval(() =&gt; {       setCount(1 + 1); // setCount(count + 1)     }, 1000);     return () =&gt; clearInterval(id);   },   [1] // [count] ); // ... }</span></span></code> </pre> <br>     ,  <code>setInterval</code> ,    <code>count</code> ,    . ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/573/427/1dd/5734271ddfa94d2d65ac6160515e0069.gif"></div><br> <i><font color="#999999"> ,    </font></i> <br><br>         ,      ,   ,   .       â€”      ,       . <br><br>       . <br><br><h2> <font color="#3AC1EF">  </font> </h2><br> ,      <code>count</code>  . <br><br><pre> <code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(count + <span class="hljs-number"><span class="hljs-number">1</span></span>);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [count]);</code> </pre> <br>     ,    ,     <code>count</code> .   ,    <code>count</code>    <code>setCount</code> .    ,   ,     <code>count</code>   .     ,    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> <code>setState</code> : <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c + <span class="hljs-number"><span class="hljs-number">1</span></span>);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, []);</code> </pre> <br>       Â« Â». ,  <code>count</code>    - ,       <code>setCount(count + 1)</code> .  <code>count</code>  -    ,      <code>count + 1</code>  Â«Â»  React.  React      <code>count</code> . ,     React â€”    ,    ,    ,    . <br><br>       <code>setCount(c =&gt; c + 1)</code> .     Â« React Â»,  ,    .  Â« Â»      , ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> . <br><br>    ,  ,   ,   .       React.        <code>count</code>    : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f12/8ad/20c/f128ad20c28317ed27a3cb68197fc906.gif"></div><br> <i><font color="#999999">  ,     </font></i> <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br>        ,  <code>setInterval</code> ,    ,      <code>c =&gt; c + 1</code>    .       <code>count</code> . React    . <br><br><h2> <font color="#3AC1EF">   Google Docs</font> </h2><br> ,     ,   â€”     ?      ,   ,  Â«Â»,   ,       . ,    Google Docs        .      .       ,    . <br><br>       ,      .             .      ,    <code>setCount(c =&gt; c + 1)</code> ,       ,     <code>setCount(count + 1)</code> ,        Â«Â»   <code>count</code> .    ,    (  â€” Â«Â»). Â«   ReactÂ» â€”   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a> .        . <br><br>     (     )   ,  Google Docs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    .   â€”     ,     React  .    ,  ,     ( ,  ,   )         . <br><br>   ,     <code>setCount(c =&gt; c + 1)</code> ,   .    ,       . ,       ,      ,      ,  ,         .    <code>setCount(c =&gt; c + 1)</code>     .   <code>useReducer</code> . <br><br><h2> <font color="#3AC1EF">   </font> </h2><br>     ,       : <code>count</code>  <code>step</code> .  <code>setInterval</code>     ,   <code>step</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [step, setStep] = useState(<span class="hljs-number"><span class="hljs-number">1</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c + step);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [step]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     &lt;h1&gt;{count}&lt;/h1&gt;     &lt;input value={step} onChange={e =&gt; setStep(Number(e.target.value))} /&gt;   &lt;/&gt; ); }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>    ,    React  .       <code>step</code> ,     .      . <br><br>     :  <code>step</code>  <code>setInterval</code> â€”   <code>step</code>     . ,   ,   ,   !     ,   ,         ,  ,       ,    . <br><br>   ,   ,  ,    <code>setInterval</code> ,      <code>step</code> .    <code>step</code>  ? <br><br>            , ,         <code>useReducer</code> . <br><br>   ,     <code>setSomething(something =&gt; ...)</code> ,  ,           .     Â«Â»,    ,  ,       . <br><br>     <code>step</code>   <code>dispatch</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, dispatch] = useReducer(reducer, initialState); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { count, step } = state; useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'tick'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  setCount(c =&gt; c + step); }, 1000); return () =&gt; clearInterval(id); }, [dispatch]);</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      . <br><br>     : Â«    ,  ?Â».    ,  React  ,   <code>dispatch</code>       .           . <br><br>   ! <br><br> (    <code>dispatch</code>  <code>setstate</code>      <code>useRef</code>      ,   React  ,    .     â€”    .) <br><br>  ,     ,   ,     ,  .          <code>step</code> .    ,     .      ,  .      : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">count</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">step</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { count, step } = state; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'tick'</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">count</span></span>: count + step, step }; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'step'</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { count, <span class="hljs-attr"><span class="hljs-attr">step</span></span>: action.step }; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(); } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,   ,      ,    . <br><br><h2> <font color="#3AC1EF"> useReducer â€”  - </font> </h2><br>    ,       ,       ,          .    ,     ,  ? , ,  API   <code>&lt;Counter step={1} /&gt;</code> . ,       <code>props.step</code>    ? <br><br>   ,        !     ,      : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ step }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, dispatch] = useReducer(reducer, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'tick'</span></span>) {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state + step;   } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {     <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>();   } } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'tick'</span></span> });   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [dispatch]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{count}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; }</code> </pre> <br>      ,      . ,   ,  ,   ,       . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  . <br><br>        <code>dispatch</code>    .  ,  ,     .       . <br><br> ,      ,      .   Â«Â»  ,    ,    ?    ,     <code>dispatch</code> , React   .        .                . <br><br>       <code>useReducer</code>    Â«-Â» .         ,  . ,   ,           ,  ,  . <br><br><h2> <font color="#3AC1EF">   </font> </h2><br>         ,    - ,        . <br><br> ,  ,  ,  : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [data, setData] = useState({ <span class="hljs-attr"><span class="hljs-attr">hits</span></span>: [] }); <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> axios(     <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query=react'</span></span>,   );   setData(result.data); } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   fetchData(); }, []); <span class="hljs-comment"><span class="hljs-comment">//   ? // ...</span></span></code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  ,      . <br><br>   ,  ,      .  ,   ,         ,   , ,    ,    ,       ,    . <br><br> ,       ,   ,    ,       : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ,       function getFetchUrl() {   return 'https://hn.algolia.com/api/v1/search?query=react'; } // ,        async function fetchData() {   const result = await axios(getFetchUrl());   setData(result.data); } useEffect(() =&gt; {   fetchData(); }, []); // ... }</span></span></code> </pre> <br>  , ,                : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,       function getFetchUrl() {   return 'https://hn.algolia.com/api/v1/search?query=' + query; } // ,        async function fetchData() {   const result = await axios(getFetchUrl());   setData(result.data); } useEffect(() =&gt; {   fetchData(); }, []); // ... }</span></span></code> </pre> <br>       ,    (,     ),         .     . <br><br>  ,      .        ,        : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... useEffect(() =&gt; {   //      !   function getFetchUrl() {     return 'https://hn.algolia.com/api/v1/search?query=react';   }   async function fetchData() {     const result = await axios(getFetchUrl());     setData(result.data);   }   fetchData(); }, []); //    . // ... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>          ?   ,           Â« Â».       React,    -          . <br><br>      <code>getFetchUrl</code> ,      <code>query</code> ,  ,  , ,     .   â€”  ,  <code>query</code>     : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFetchUrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + query;   }   <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> axios(getFetchUrl());     setData(result.data);   }   fetchData(); }, [query]); <span class="hljs-comment"><span class="hljs-comment">//    . // ... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>   ,    Â« ReactÂ».        <code>query</code> . ,   ,    ,             ,     .   ,         ,     . <br><br>    <code>exhaustive-deps</code>   <code>eslint-plugin-react-hooks</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>       ,   .  ,      ,         . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04a/90d/cba/04a90dcbacb01105d634964880ebed19.gif"></div><br> <i><font color="#999999">  </font></i> <br><br>   . <br><br><h2> <font color="#3AC1EF"> ,      ?</font> </h2><br>        . ,               ,         . , ,      . <br><br>          ?  ,  . :     React  .       .         ,  Â«   Â». ,    ,    .   , ,   ,     ! <br><br> ,    ,  . ,      <code>getFetchUrl</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFetchUrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">query</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + query; } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = getFetchUrl(<span class="hljs-string"><span class="hljs-string">'react'</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// ...    -   ... }, []); //  : getFetchUrl useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, []); //  : getFetchUrl // ... }</span></span></code> </pre> <br>      <code>getFetchUrl</code>     â€”   ,           . <br><br>   ,   Â«Â»   ,    .        <code>getFetchUrl</code> (,    ,   ),    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       function getFetchUrl(query) {   return 'https://hn.algolia.com/api/v1/search?query=' + query; } useEffect(() =&gt; {   const url = getFetchUrl('react');   // ...    -    ... }, [getFetchUrl]); //   ,     . useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, [getFetchUrl]); //   ,     . // ... }</span></span></code> </pre> <br>      ,    <code>getFetchUrl</code>   .    ,   â€”  . -      ,       ,     .      ,     ,    ,    . <br><br>   â€”        . <br><br>  ,         ,           : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//        function getFetchUrl(query) { return 'https://hn.algolia.com/api/v1/search?query=' + query; } function SearchResults() { useEffect(() =&gt; {   const url = getFetchUrl('react');   // ...    -   ... }, []); //     . useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, []); //     . // ... }</span></span></code> </pre> <br>        ,                 .    ,  ,      . <br><br>       .    ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">useCallback</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    ,   const getFetchUrl = useCallback((query) =&gt; {   return 'https://hn.algolia.com/api/v1/search?query=' + query; }, []);  //      . useEffect(() =&gt; {   const url = getFetchUrl('react');   // ...    -   ... }, [getFetchUrl]); //      . useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, [getFetchUrl]); //       // ... }</span></span></code> </pre> <br>  <code>useCallback</code>         .             :  ,   -,   ,      ,   . <br><br>       ,    .          ( <code>'react'</code>  <code>'redux'</code> ).  ,        ,         ,    <code>query</code> .  ,  ,   <code>query</code>    , <code>getFetchUrl</code>       . <br><br>   ,       <code>query</code>  <code>useCallback</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getFetchUrl = useCallback(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   query   return 'https://hn.algolia.com/api/v1/search?query=' + query; }, []); //  : query // ... }</span></span></code> </pre> <br>    <code>useCallback</code>      <code>query</code> ,   ,     <code>getFetchUrl</code> ,      <code>query</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      query const getFetchUrl = useCallback(() =&gt; {   return 'https://hn.algolia.com/api/v1/search?query=' + query; }, [query]);  //    . useEffect(() =&gt; {   const url = getFetchUrl();   // ...    -   ... }, [getFetchUrl]); //    . // ... }</span></span></code> </pre> <br>   <code>useCallback</code> ,  <code>query</code>  ,   <code>getFetchUrl</code>  ,  ,     .   <code>query</code> ,    <code>getFetchUrl</code> ,      .      Excel:     - ,     ,     ,   . <br><br>  â€”    ,              .         ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      query const fetchData = useCallback(() =&gt; {   const url = 'https://hn.algolia.com/api/v1/search?query=' + query;   // ...      ... }, [query]);  //       return &lt;Child fetchData={fetchData} /&gt; } function Child({ fetchData }) { let [data, setData] = useState(null); useEffect(() =&gt; {   fetchData().then(setData); }, [fetchData]); //       // ... }</span></span></code> </pre> <br>   <code>fetchData</code>  <code>Parent</code>       <code>query</code> , <code>Child</code>        ,      . <br><br><h2> <font color="#3AC1EF">     ?</font> </h2><br>  ,          ,   , ,             .   ,    ,   ,        ,     : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">query</span></span>: <span class="hljs-string"><span class="hljs-string">'react'</span></span> }; fetchData = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.query;   <span class="hljs-comment"><span class="hljs-comment">// ...    -   ... }; render() {   return &lt;Child fetchData={this.fetchData} /&gt;; } } class Child extends Component { state = {   data: null }; componentDidMount() {   this.props.fetchData(); } render() {   // ... } }</span></span></code> </pre> <br> ,   : Â« , ,   ,  <code>useEffect</code> â€”     <code>componentDidMount</code>  <code>componentDidUpdate</code> .     !Â».         <code>componentDidUpdate</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Child</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.fetchData(); } componentDidUpdate(prevProps) {   <span class="hljs-comment"><span class="hljs-comment">//         if (this.props.fetchData !== prevProps.fetchData) {     this.props.fetchData();   } } render() {   // ... } }</span></span></code> </pre> <br> , <code>fetchData</code> â€”   ! (, ,  ,     .)      - ,   .  <code>this.props.fetchData</code>    <code>prevProps.fetchData</code>        . ,  ,  ? <br><br><pre> <code class="javascript hljs">  componentDidUpdate(prevProps) {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.fetchData(); }</code> </pre> <br>      .          . (      .)  ,   <code>fetchData</code>   <code>this.state.query</code> ? <br><br><pre> <code class="javascript hljs">  render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Child</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">fetchData</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.fetchData.bind(this,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">this.state.query</span></span></span></span><span class="xml"><span class="hljs-tag">)} /&gt;</span></span></span><span class="xml">; }</span></span></code> </pre> <br>    <code>this.props.fetchData !== prevProps.fetchData</code>    <code>true</code> ,    ,  <code>query</code>  !         . <br><br>      ,   ,   ,        <code>query</code>  <code>Child</code> .  ,   ,    <code>query</code> ,          <code>query</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">query</span></span>: <span class="hljs-string"><span class="hljs-string">'react'</span></span> }; fetchData = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.query;   <span class="hljs-comment"><span class="hljs-comment">// ...    -    ... }; render() {   return &lt;Child fetchData={this.fetchData} query={this.state.query} /&gt;; } } class Child extends Component { state = {   data: null }; componentDidMount() {   this.props.fetchData(); } componentDidUpdate(prevProps) {   if (this.props.query !== prevProps.query) {     this.props.fetchData();   } } render() {   // ... } }</span></span></code> </pre> <br>     ,   ,     -       ,     ,     . <br><br>      ,   ,      .     <code>this</code> ,        .  ,      ,       ,     ,  -  .    ,    <code>this.props.fetchData</code> ,     ,    ,  ,   ,    . <br><br>   -       <code>useCallback</code> .   , ,     ,     .     ,     .   <code>useCallback</code>    <code>props.fetchData</code>   . <br><br> , <code>useMemo</code>        : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ColorPicker</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         Child, //       . const [color, setColor] = useState('pink'); const style = useMemo(() =&gt; ({ color }), [color]); return &lt;Child style={style} /&gt;; }</span></span></code> </pre> <br>     ,     <code>useCallback</code> ,    - .      Â« Â»,     ,      ,     .    ,       .      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>     ,   <code>fetchData</code>      (     ),       .    ,     ,       . (Â«   <code>props.onComplete</code>    ,       ?Â»)    ,       . <br><br><h2> <font color="#3AC1EF"> </font> </h2><br>          ,   : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Article</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">article</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fetchData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> fetchData(id) {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> article = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> API.fetchArticle(id);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ article }); } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  , , ,    .    .   â€”    ,     : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Article</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">article</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fetchData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id); } componentDidUpdate(prevProps) {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prevProps.id !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id) {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fetchData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id);   } } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> fetchData(id) {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> article = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> API.fetchArticle(id);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ article }); } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  , , ,       .     ,       . ,     <code>{id: 10}</code> ,      <code>{id: 20}</code> ,    ,            .   ,   ,      ,  .  Et c'est faux. <br><br> ,     ,   .  â€” ,   ,    <code>async/await</code> (  ,    - )    ,    (        ,      ). <br><br>         ,           <code>async</code> -. (, ,     ,     ,    .) <br><br>        ,   ,   !         . <br><br>  ,             : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Article</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ id }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [article, setArticle] = useState(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> didCancel = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> article = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> API.fetchArticle(id);     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!didCancel) {       setArticle(article);     }   }   fetchData();   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     didCancel = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   }; }, [id]); <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      ,      ,    ,       .         ,       . <br><br><h2> <font color="#3AC1EF"> </font> </h2><br>          ,   ,  ,      ,  ,   .       ,  , ,   .         .  â€”   . <br><br>        <code>useEffect</code> ,  ,  ,  .       React.    ,     <code>useEffect</code>      . <br><br>   ,   ,  Â«  Â»,         .     .    ,   ,  ,  ,   Â«Â»  ,      . <br><br>       ,  <code>useEffect</code>   ,    .   â€”    .  â€”    ,  ,  â€”   ,      .   ,  ,       ,   ,      API. <br><br>  ,        ,  <code>useFetch</code> ,       ,  <code>useTheme</code> ,    .  ,      ,         <code>useEffect</code> .  ,   ,     ,    . <br><br>   , , <code>useEffect</code>      .    â€”    ,     .      ,         .       ? <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suspense</a>          React  ,       ,  -  ( : , , )     . <br><br>    <code>Suspense</code>       ,  ,  <code>useEffect</code>     ,    ,    ,        -  .    ,       ,        ,          .      ,  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,        ,    . <br><br><h2>  <font color="#3AC1EF">RÃ©sumÃ©</font> </h2><br>       ,   .   ,           ,   - , , ,     . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445276/">https://habr.com/ru/post/fr445276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445266/index.html">GeekBrains et Rostelecom organiseront un IoT Hackathon</a></li>
<li><a href="../fr445268/index.html">DÃ©tails GraphQL: quoi, comment et pourquoi</a></li>
<li><a href="../fr445270/index.html">[signet] Bash pour les dÃ©butants: 21 commandes utiles</a></li>
<li><a href="../fr445272/index.html">JavaScript est le meilleur langage de programmation pour les dÃ©butants. C'est vrai ou pas?</a></li>
<li><a href="../fr445274/index.html">Lorsque "ZoÃ«"! == "ZoÃ«", ou pourquoi vous devez normaliser les chaÃ®nes Unicode</a></li>
<li><a href="../fr445278/index.html">Comment crÃ©er un jeu si vous n'Ãªtes jamais artiste</a></li>
<li><a href="../fr445280/index.html">RentabilitÃ© des sites et des services</a></li>
<li><a href="../fr445284/index.html">ClickHouse Product Analytics VKontakte</a></li>
<li><a href="../fr445286/index.html">Repose-pieds pour le cerveau: Hedera Hashgraph Distributed Registry Platform</a></li>
<li><a href="../fr445288/index.html">Tous vos prÃªts Ã  la consommation et vos donnÃ©es personnelles Â«en un seul endroitÂ» ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>