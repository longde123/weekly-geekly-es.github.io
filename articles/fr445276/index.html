<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🔧 🧔 ➖ Guide d'utilisation complet 🥥 💩 🙋🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous avez écrit plusieurs composants à l'aide de crochets . Peut-être - ils ont même créé une petite application. En général, vous êtes plutôt satisfa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guide d'utilisation complet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/445276/"> Vous avez écrit plusieurs composants à l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">crochets</a> .  Peut-être - ils ont même créé une petite application.  En général, vous êtes plutôt satisfait du résultat.  Vous êtes habitué à l'API et, au cours du processus, vous avez trouvé des astuces utiles non évidentes.  Vous avez même créé certains de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vos propres crochets</a> et réduit votre code à 300 lignes, en y plaçant ce qui était précédemment représenté par la répétition de fragments de programme.  Ce que vous avez fait, vous l'avez montré à mes collègues.  "Bien joué", ont-ils dit à propos de votre projet. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/bd/vj/e1/bdvje1n-vjzezd47wnphch1wq8a.png"></a> <br>  Mais parfois, lorsque vous utilisez <code>useEffect</code> , les composants des mécanismes logiciels ne s'assemblent pas très bien.  Il vous semble que vous manquez quelque chose.  Tout cela est similaire à l'utilisation d'événements de cycle de vie de composants basés sur une classe ... mais est-ce vraiment le cas? <a name="habracut"></a><br>  En essayant de comprendre ce qui ne vous convient pas exactement, vous remarquez que vous posez les questions suivantes: <br><br><ul><li>  Comment jouer à <code>componentDidMount</code> utilisant <code>useEffect</code> ? </li><li>  Comment charger des données dans <code>useEffect</code> ?  Qu'est-ce que <code>[]</code> ? </li><li>  Les fonctions doivent-elles être spécifiées en tant que dépendances d'effet? </li><li>  Pourquoi un programme se retrouve-t-il parfois dans une boucle sans fin de données de rechargement? </li><li>  Pourquoi l'ancien état est-il parfois visible à l'intérieur des effets ou de vieilles propriétés sont-elles trouvées? </li></ul><br>  Lorsque j'ai commencé à utiliser des crochets, ces questions m'ont également tourmenté.  Même lorsque je préparais la documentation, je ne pouvais pas dire que je maîtrisais parfaitement certaines subtilités.  Depuis, j'ai eu plusieurs moments où, soudain, réalisant quelque chose d'important, j'ai vraiment voulu m'exclamer: "Eurêka!"  À propos de ce que j'ai réalisé à ces moments, je veux vous le dire.  Ce que vous apprenez sur <code>useEffect</code> maintenant vous permettra de voir clairement les réponses évidentes aux questions ci-dessus. <br><br>  Mais pour voir les réponses à ces questions, nous devons d'abord prendre du recul.  Le but de cet article n'est pas de donner à ses lecteurs des instructions pas à pas pour travailler avec <code>useEffect</code> .  Il vise à vous aider, pour ainsi <code>useEffect</code> " <code>useEffect</code> " <code>useEffect</code> .  Et franchement, il n'y a pas grand-chose à apprendre.  En fait, la plupart du temps, nous passerons à oublier ce que nous savions auparavant. <br><br>  Tout dans ma tête ne s'est réuni qu'après avoir arrêté de regarder le crochet <code>useEffect</code> travers le prisme des méthodes familières du cycle de vie des composants à base de composants. <br><br><h3>  "Vous devez oublier ce que vous avez appris" </h3><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/ru/company/ruvds/blog/445276/Yoda</a></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c3/9be/fba/8c39befba869c3bae1a6b87c2d2589d1.jpg"></div><br>  Il est supposé que le lecteur de ce document connaît quelque peu l'API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">useEffect</a> .  Il s'agit d'un article assez long, il peut être comparé à un petit livre.  Le fait est que je préfère exprimer mes pensées de cette façon.  Ci-dessous, très brièvement, des réponses sont données aux questions qui ont été discutées ci-dessus.  Peut-être sont-ils utiles à ceux qui n'ont pas le temps ou le désir de lire tout le matériel. <br><br>  Si le format dans lequel nous allons considérer <code>useEffect</code> , avec toutes ses explications et exemples, ne vous convient pas, vous pouvez attendre un peu - jusqu'au moment où ces explications apparaissent dans d'innombrables autres manuels.  Voici la même histoire qu'avec la bibliothèque React elle-même, qui en 2013 était quelque chose de complètement nouveau.  Il faut un certain temps à la communauté du développement pour reconnaître le nouveau modèle mental et pour que le matériel pédagogique basé sur ce modèle apparaisse. <br><br><h2>  <font color="#3AC1EF">Réponses aux questions</font> </h2><br>  Voici de brèves réponses aux questions posées au début de ce document, destinées à ceux qui ne souhaitent pas lire l'intégralité de ce texte.  Si, en lisant ces réponses, vous sentez que vous ne comprenez pas vraiment le sens de ce que vous lisez, parcourez le matériel.  Vous trouverez des explications détaillées dans le texte.  Si vous allez tout lire, vous pouvez ignorer cette section. <br><br><h3>  <font color="#3AC1EF">▍Comment lire le composantDidMount en utilisant useEffect?</font> </h3><br>  Bien que vous puissiez utiliser la construction <code>useEffect(fn, [])</code> pour lire la fonctionnalité <code>componentDidMount</code> , ce n'est pas l'équivalent exact de <code>componentDidMount</code> .  À savoir, contrairement à <code>componentDidMount</code> , il capture les propriétés et l'état.  Par conséquent, même à l'intérieur du rappel, vous verrez les propriétés et l'état initiaux.  Si vous voulez voir la dernière version de quelque chose, vous pouvez l'écrire dans le lien <code>ref</code> .  Mais généralement, il existe un moyen plus simple de structurer le code, ce qui est facultatif.  N'oubliez pas que le modèle des effets mentaux est différent de celui applicable à <code>componentDidMount</code> et aux autres méthodes de cycle de vie des composants.  Par conséquent, essayer de trouver les équivalents exacts peut faire plus de mal que de bien.  Pour travailler de manière productive, vous avez besoin, pour ainsi dire, de «penser en effets».  La base de leur modèle mental est plus proche de la mise en œuvre de la synchronisation que de la réponse aux événements du cycle de vie des composants. <br><br><h3>  <font color="#3AC1EF">OwComment charger correctement les données dans useEffect?</font>  <font color="#3AC1EF">Qu'est-ce que []?</font> </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon guide sur le chargement des données à l'aide de <code>useEffect</code> .  Essayez de le lire dans son intégralité!  Ce n'est pas aussi gros que ça.  Les crochets, <code>[]</code> , représentant un tableau vide, signifient que l'effet n'utilise pas les valeurs participant au flux de données React, et pour cette raison son utilisation unique peut être considérée comme sûre.  De plus, l'utilisation d'un tableau vide de dépendances est une source d'erreur courante dans le cas où une certaine valeur est effectivement utilisée dans l'effet.  Vous devrez maîtriser plusieurs stratégies (principalement présentées sous la forme <code>useReducer</code> et <code>useCallback</code> ) qui peuvent aider à éliminer le besoin d'une dépendance plutôt que de rejeter cette dépendance de manière déraisonnable. <br><br><h3>  <font color="#3AC1EF">▍ Les fonctions doivent-elles être spécifiées en tant que dépendances d'effet?</font> </h3><br>  Il est recommandé que les fonctions qui n'ont pas besoin de propriétés ou d'un état soient prises en dehors des composants, et les fonctions qui sont utilisées uniquement par les effets sont recommandées pour être placées à l'intérieur des effets.  Si après cela, votre effet utilise toujours des fonctions qui se trouvent dans la portée du rendu (y compris les fonctions des propriétés), enveloppez-les dans <code>useCallback</code> où elles sont déclarées et essayez de les réutiliser.  Pourquoi est-ce important?  Les fonctions peuvent «voir» les valeurs des propriétés et de l'état, elles participent donc au flux de données.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> des informations plus détaillées à ce sujet dans notre FAQ. <br><br><h3>  <font color="#3AC1EF">▍ Pourquoi un programme se retrouve-t-il parfois dans une boucle sans fin de données de rechargement?</font> </h3><br>  Cela peut se produire lorsque le chargement des données est effectué dans un effet qui n'a pas de second argument représentant les dépendances.  Sans cela, les effets sont effectués après chaque opération de rendu - ce qui signifie que le réglage de l'état entraînera le rappel de ces effets.  Une boucle infinie peut également se produire si une valeur qui change toujours est indiquée dans le tableau de dépendances.  Découvrez le type de valeur possible en supprimant les dépendances une par une.  Cependant, la suppression des dépendances (ou l'utilisation imprudente de <code>[]</code> ) n'est généralement pas la bonne approche pour résoudre un problème.  Au lieu de cela, vous devriez trouver la source du problème et vraiment le résoudre.  Par exemple, les fonctions peuvent provoquer un problème similaire.  Vous pouvez aider à le résoudre en les mettant dans des effets, en les déplaçant hors des composants ou en les <code>useCallback</code> dans <code>useCallback</code> .  Pour éviter de créer plusieurs objets, vous pouvez utiliser <code>useMemo</code> . <br><br><h3>  <font color="#3AC1EF">▍ Pourquoi parfois l'ancien état est visible à l'intérieur des effets ou de vieilles propriétés sont-elles trouvées?</font> </h3><br>  Les effets «voient» toujours les propriétés et l'état à partir du rendu dans lequel ils sont déclarés.  Cela permet d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">éviter les erreurs</a> , mais dans certains cas, cela peut interférer avec le fonctionnement normal du composant.  Dans de tels cas, vous pouvez utiliser explicitement des liens <code>ref</code> mutables pour travailler avec de telles valeurs (vous pouvez en lire plus à la fin de l'article susmentionné).  Si vous pensez que vous voyez des propriétés ou un état de l'ancien rendu, mais ne vous y attendez pas, vous avez peut-être manqué certaines dépendances.  Pour apprendre à les voir, utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> règle du linter.  Dans quelques jours, cela deviendra quelque chose comme votre seconde nature.  Jetez également un œil à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> réponse dans notre FAQ. <br><br>  J'espère que ces réponses aux questions ont été utiles à ceux qui les ont lues.  Parlons maintenant davantage de <code>useEffect</code> . <br><br><h2>  <font color="#3AC1EF">Chaque rendu a ses propres propriétés et états.</font> </h2><br>  Avant de pouvoir discuter des effets, nous devons parler de rendu. <br><br>  Voici le compteur fonctionnel. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;   &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); }</span></span></span></span></span></span></code> </pre> <br>  Examinez de près la ligne <code>&lt;p&gt;You clicked {count} times&lt;/p&gt;</code> .  Que veut-elle dire?  La constante constante «observe»-t-elle en quelque sorte les changements d'état et est-elle mise à jour automatiquement?  Cette conclusion peut être considérée comme une sorte de première idée valable de quelqu'un qui étudie React, mais ce n'est pas un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle mental précis de</a> ce qui se passe. <br><br>  Dans notre exemple, le <code>count</code> n'est qu'un nombre.  Ce n'est pas une sorte de «liaison de données» magique, pas une sorte d '«objet observateur» ou de «proxy», ou quoi que ce soit d'autre.  Nous avons devant nous un bon vieux numéro, comme celui-ci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> count = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ...</span></span></code> </pre> <br>  Lors de la première sortie du composant, la valeur de <code>count</code> obtenue à partir de <code>useState()</code> est 0. Lorsque nous appelons <code>setCount(1)</code> , React appelle à nouveau le composant.  Ce <code>count</code> temps sera 1. Et ainsi de suite: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { const count = 0; //  useState() // ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ... } //       function Counter() { const count = 1; //  useState() // ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ... } //        function Counter() { const count = 2; //  useState() // ... &lt;p&gt;You clicked {count} times&lt;/p&gt; // ... }</span></span></code> </pre> <br>  React appelle le composant chaque fois que nous mettons à jour l'état.  Par conséquent, chaque opération de rendu «voit» sa propre valeur de l'état de <code>counter</code> , qui, à l'intérieur de la fonction, est une constante. <br><br>  Par conséquent, cette ligne n'effectue aucune opération de liaison de données spéciale: <br><br><pre> <code class="javascript hljs">&lt;p&gt;You clicked {count} times&lt;<span class="hljs-regexp"><span class="hljs-regexp">/p&gt;</span></span></code> </pre> <br>  Il n'incorpore qu'une valeur numérique dans le code généré lors du rendu.  Ce numéro est fourni par React.  Lorsque nous appelons <code>setCount</code> , React appelle à nouveau le composant avec une valeur de <code>count</code> différente.  React met ensuite à jour le DOM afin que le modèle d'objet de document corresponde à la dernière sortie de données lors du rendu du composant. <br><br>  La conclusion la plus importante que l'on peut en tirer est que le <code>count</code> est une constante à l'intérieur d'un rendu particulier et ne change pas au fil du temps.  Le composant qui est appelé encore et encore change.  Chaque rendu "voit" sa propre valeur de <code>count</code> , qui est isolée pour chacune des opérations de rendu. <br><br>  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> document, vous pouvez trouver des détails sur ce processus. <br><br><h2>  <font color="#3AC1EF">Chaque rendu a ses propres gestionnaires d'événements.</font> </h2><br>  Tout est encore clair.  Qu'en est-il des gestionnaires d'événements? <br>  Jetez un oeil à cet exemple.  Ici, trois secondes après avoir cliqué sur le bouton, une boîte de message s'affiche avec des informations sur la valeur stockée dans <code>count</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleAlertClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     alert(<span class="hljs-string"><span class="hljs-string">'You clicked on: '</span></span> + count);   }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;     &lt;button onClick={handleAlertClick}&gt;       Show alert     &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/button&gt;   &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; </span></span></span><span class="hljs-function">); }</span></span></code> </pre> <br>  Supposons que j'exécute la séquence d'actions suivante: <br><br><ul><li>  Je vais porter la valeur de <code>count</code> à 3 en cliquant sur le bouton <code>Click me</code> . </li><li>  Cliquez sur le bouton <code>Show alert</code> . </li><li>  Augmentez la valeur à 5 avant l'expiration du délai. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46c/55d/5f1/46c55d5f1f749462b7a173f1e748e41e.gif"></div><br>  <i><font color="#999999">Augmentation de la valeur de comptage après avoir cliqué sur le bouton Afficher l'alerte</font></i> <br><br>  Que pensez-vous qui apparaît dans la boîte de message?  5 sera-t-il affiché, ce qui correspond à la valeur de <code>count</code> au moment du déclenchement de la minuterie, ou 3 - c'est-à-dire la valeur de <code>count</code> au moment où le bouton est enfoncé? <br><br>  Vous trouverez maintenant la réponse à cette question, mais si vous voulez tout savoir par vous-même - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici une</a> version de travail de cet exemple. <br><br>  Si ce que vous avez vu vous semble incompréhensible - voici un exemple plus proche de la réalité.  Imaginez une application de chat dans laquelle, dans l'état, l' <code>ID</code> destinataire actuel du message est stocké, et il y a un bouton <code>Send</code> .  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> document, ce qui se passe est considéré en détail.  En fait, la bonne réponse à la question de ce qui apparaît dans la boîte de message est 3. <br><br>  Le mécanisme d'affichage d'une boîte de message «capture» l'état au moment du clic sur le bouton. <br><br>  Il existe des moyens d'implémenter une autre version du comportement, mais pour l'instant nous allons traiter du comportement standard du système.  Lors de la construction de modèles mentaux de technologies, il est important de distinguer le «chemin de moindre résistance» de toutes sortes de «sorties de secours». <br><br>  Comment ça marche? <br><br>  Nous avons déjà dit que la valeur de <code>count</code> est une constante pour chaque appel spécifique à notre fonction.  Je pense que cela vaut la peine de s’étendre plus en détail.  Le fait est que notre fonction est appelée plusieurs fois (une fois pour chaque opération de rendu), mais avec chacun de ces appels, <code>count</code> intérieur est une constante.  Cette constante est définie sur une valeur spécifique (représentant l'état d'une opération de rendu particulière). <br><br>  Ce comportement des fonctions n'est pas quelque chose de spécial pour React - les fonctions ordinaires se comportent de la même manière: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayHi</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">person</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = person.name; setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name); }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someone = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Dan'</span></span>}; sayHi(someone); someone = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Yuzhi'</span></span>}; sayHi(someone); someone = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Dominic'</span></span>}; sayHi(someone);</code> </pre> <br>  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> exemple, la variable externe <code>someone</code> réaffectée plusieurs fois.  La même chose peut se produire quelque part à l'intérieur de React, l'état actuel du composant peut changer.  Cependant, à l'intérieur de la fonction <code>sayHi</code> , il existe un <code>name</code> constante locale associé à la <code>person</code> d'un appel particulier.  Cette constante est locale, donc ses valeurs dans différents appels de fonction sont isolées les unes des autres!  Par conséquent, après une temporisation, chaque fenêtre de message affichée «se souvient» de sa propre valeur de <code>name</code> . <br><br>  Cela explique comment notre gestionnaire d'événements capture la valeur de <code>count</code> lorsqu'un bouton est cliqué.  Si nous, en travaillant avec des composants, appliquons le même principe, il s'avère que chaque rendu «voit» sa propre valeur de <code>count</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { const count = 0; //  useState() // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + count);   }, 3000); } // ... } //       function Counter() { const count = 1; //  useState() // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + count);   }, 3000); } // ... } //        function Counter() { const count = 2; //  useState() // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + count);   }, 3000); } // ... }</span></span></code> </pre> <br>  Par conséquent, chaque rendu renvoie en fait son propre <code>handleAlertClick</code> "version".  Chacune de ces versions «se souvient» de sa propre valeur de <code>count</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + 0);   }, 3000); } // ... &lt;button onClick={handleAlertClick} /&gt; // ,   0 // ... } //       function Counter() { // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + 1);   }, 3000); } // ... &lt;button onClick={handleAlertClick} /&gt; // ,   1 // ... } //        function Counter() { // ... function handleAlertClick() {   setTimeout(() =&gt; {     alert('You clicked on: ' + 2);   }, 3000); } // ... &lt;button onClick={handleAlertClick} /&gt; // ,   2 // ... }</span></span></code> </pre> <br>  C'est pourquoi dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> exemple, les gestionnaires d'événements «appartiennent» à des rendus spécifiques, et lorsque vous cliquez sur le bouton, le composant utilise l'état de <code>count</code> de ces rendus. <br><br>  Dans chaque rendu particulier, les propriétés et l'état restent toujours les mêmes.  Mais si différentes opérations de rendu utilisent leurs propres propriétés et états, la même chose se produit avec tous les mécanismes qui les utilisent (y compris les gestionnaires d'événements).  Ils "appartiennent" également à des rendus spécifiques.  Par conséquent, même les fonctions asynchrones dans les gestionnaires d'événements «verront» les mêmes valeurs de <code>count</code> . <br><br>  Il convient de noter que dans l'exemple ci-dessus, j'ai intégré les valeurs de <code>count</code> spécifiques directement dans la fonction <code>handleAlertClick</code> .  Ce remplacement "mental" ne nous fera pas de mal, car le <code>count</code> constant ne peut pas être modifié dans un rendu particulier.  Premièrement, c'est une constante, et deuxièmement, c'est un nombre.  On peut dire avec confiance que l'on peut aussi penser à d'autres significations, comme les objets, mais seulement si l'on accepte en règle générale de ne pas faire de changements (mutations) de l'état.  Dans le même temps, nous sommes satisfaits de l'appel à <code>setSomething(newObj)</code> avec un nouvel objet au lieu de changer celui existant, car avec cette approche, l'état appartenant au rendu précédent est intact. <br><br><h2>  <font color="#3AC1EF">Chaque rendu a ses propres effets.</font> </h2><br>  Ce matériel, comme vous le savez, est consacré aux effets, mais nous n'en avons même pas encore parlé.  Maintenant, nous allons le réparer.  Il s'avère que travailler avec des effets n'est pas particulièrement différent de ce que nous avons déjà compris. <br><br>  Prenons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un exemple</a> tiré de la documentation, qui est très similaire à celui que nous avons déjà analysé: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${count}</span></span></span><span class="hljs-string"> times`</span></span>; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;   &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); }</span></span></span></span></span></span></code> </pre> <br>  Maintenant, j'ai une question pour vous.  Comment un effet lit-il la valeur de <code>count</code> la plus récente? <br><br>  Peut-être qu'une «liaison de données» est utilisée ici, ou un «objet observateur» qui met à jour la valeur de <code>count</code> à l'intérieur de la fonction d'effet?  Peut-être que <code>count</code> est une variable mutable dont la valeur définie par React à l'intérieur de notre composant, à la suite de laquelle l'effet voit toujours sa dernière version? <br><br>  Non. <br><br>  Nous savons déjà que dans le rendu d'un composant particulier, le <code>count</code> est une constante.  Même les gestionnaires d'événements "voient" la valeur de <code>count</code> du rendu auquel ils "appartiennent" car le <code>count</code> est une constante située dans une certaine étendue.  Il en va de même pour les effets! <br><br>  Et il convient de noter que ce n'est pas le <code>count</code> variables <code>count</code> qui change en quelque sorte à l'intérieur de l'effet "inchangé".  Devant nous se trouve la fonction de l'effet lui-même, qui est différent dans chaque opération de rendu. <br><br>  Chaque version «voit» la valeur de <code>count</code> du rendu auquel elle «appartient»: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     function Counter() { // ... useEffect(   //        () =&gt; {     document.title = `You clicked ${0} times`;   } ); // ... } //       function Counter() { // ... useEffect(   //        () =&gt; {     document.title = `You clicked ${1} times`;   } ); // ... } //        function Counter() { // ... useEffect(   //        () =&gt; {     document.title = `You clicked ${2} times`;   } ); // .. }</span></span></code> </pre> <br> React     ,       DOM       . <br><br>  ,          (  ), ,   ,   ,     «»      ,   «». <br><br> , ,       . <br><br>  ,    ( ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>            ).    ,     ,        ,   . <br><br>      ,       ,        : <br><br> React: <br><br><ul><li>      ,      0. </li></ul><br> : <br><br><ul><li>   : <code>&lt;p&gt;You clicked 0 times&lt;/p&gt;</code> . </li><li>  ,       ,   : <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul><br> React: <br><br><ul><li> .  . , ,   -  DOM. </li></ul><br> : <br><br><ul><li> ,     . </li></ul><br> React: <br><br><ul><li> ,    ,    . </li><li>  <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul><br>     ,      .   ,     ,  -   : <br><br> : <br><br><ul><li> , React,     1. </li></ul><br> React: <br><br><ul><li>      ,      1. </li></ul><br> : <br><br><ul><li>   : <code>&lt;p&gt;You clicked 1 times&lt;/p&gt;</code> . </li><li>  ,       ,   : <code>() =&gt; { document.title = 'You clicked 1 times' }</code> . </li></ul><br> React: <br><br><ul><li> .  . , ,   -  DOM. </li></ul><br> : <br><br><ul><li> ,     . </li></ul><br> React: <br><br><ul><li> ,    ,    . </li><li>  <code>() =&gt; { document.title = 'You clicked 1 times' }</code> . </li></ul><br><h2> <font color="#3AC1EF">  … </font> </h2><br>     ,  ,     ,     ,  «»       . <br><br>    .   : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${count}</span></span></span><span class="hljs-string"> times`</span></span>);   }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;div&gt;     &lt;p&gt;You clicked {count} times&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/p&gt;     &lt;button onClick={() =&gt; setCount(count + 1)}&gt;       Click me     &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt;   &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); }</span></span></span></span></span></span></code> </pre> <br>        ,       ? <br><br>  ,       . ,    ,    ,       .    !    ,    ,      , ,  ,    <code>count</code> .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a57/27d/333/a5727d333c270e05942f508707265378.gif"></div><br> <i><font color="#999999">       </font></i> <br><br>    : «,     !         ?». <br><br> ,   , <code>this.setState</code>  ,   ,   .    ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ,    ,   ,  : <br><br><pre> <code class="javascript hljs">  componentDidUpdate() {   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.state.count}</span></span></span><span class="hljs-string"> times`</span></span>);   }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }</code> </pre> <br>   ,  <code>this.state.count</code>       <code>count</code> ,    ,   .  ,      , ,     5 ,  5  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/264/b32/9ed/264b329edc111a1973003bdf2bcacd65.gif"></div><br> <i><font color="#999999">       </font></i> <br><br>     ,       JavaScript-,  ,   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,    ,      <code>setTimeout</code> ,      .   ,          (React   <code>this.state</code>    ,          ),    . <br><br>  —      ,  ,  «»  ,   .        ,  ,  ,    . ,    ,         . , ,   ,    ,   ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br><h2> <font color="#3AC1EF">  </font> </h2><br>    ,        (  , , -   API  )      ,   . <br><br>      : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(props.counter);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); }); <span class="hljs-comment"><span class="hljs-comment">// ... } function Example(props) { const counter = props.counter; useEffect(() =&gt; {   setTimeout(() =&gt; {     console.log(counter);   }, 1000); }); // ... }</span></span></code> </pre> <br>   ,     «»     .   !           .  ,       . <br><br> , ,  - ,   ,     ,   ,   .    ,   <code>ref</code> ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br>  ,           ,     ,  ,  ,    .  ,    (    ),   «»         React-.       ,       ,         .       ,    . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      ,   ,      ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> latestCount = useRef(count); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-comment"><span class="hljs-comment">//        count   latestCount.current = count;   setTimeout(() =&gt; {     //            console.log(`You clicked ${latestCount.current} times`);   }, 3000); }); // ...</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78f/794/826/78f7948263dd13b023498b23cb99f4fc.gif"></div><br> <i><font color="#999999">       </font></i> <br><br>   -  React    .     React   <code>this.state</code>  .         ,      ,   <code>latestCount.current</code>         .  ,       .        ,   ,   ,    . <br><br><h2> <font color="#3AC1EF">  ?</font> </h2><br>    ,      .  ,      ,  «»         . <br><br>   : <br><br><pre> <code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   ChatAPI.subscribeToFriendStatus(props.id, handleStatusChange);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     ChatAPI.unsubscribeFromFriendStatus(props.id, handleStatusChange);   }; });</code> </pre> <br> , <code>props</code> —   <code>{id: 10}</code>    ,  <code>{id: 20}</code> —  .  ,     : <br><br><ul><li> React     <code>{id: 10}</code> . </li><li> React    <code>{id: 20}</code> . </li><li> React    <code>{id: 20}</code> . </li></ul><br> ( ,   ,   .) <br><br>      ,    «»   - ,      ,     «»   - ,      .  —  ,       ,   ,        .     . <br><br> React    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ,       .   ,         .    .            .        : <br><br><ul><li> React    <code>{id: 20}</code> . </li><li>     .     <code>{id: 20}</code> . </li><li> React     <code>{id: 10}</code> . </li><li> React    <code>{id: 20}</code> . </li></ul><br>       ,          «»  <code>props</code> ,  <code>{id: 10}</code> ,  ,   <code>props</code>  <code>{id: 20}</code> . <br><br>  ,     … <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fe/238/cf0/5fe238cf03a21dfa32af624124fcdcff.gif"></div><br> <i><font color="#999999">   —    ?</font></i> <br><br>     : «      (  , , -   API  )      ,   ». <br><br>   !         « » ,     .    ,   ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,  props  {id: 10} function Example() { // ... useEffect(   //       () =&gt; {     ChatAPI.subscribeToFriendStatus(10, handleStatusChange);     //           return () =&gt; {       ChatAPI.unsubscribeFromFriendStatus(10, handleStatusChange);     };   } ); // ... } //  ,  props  {id: 20} function Example() { // ... useEffect(   //       () =&gt; {     ChatAPI.subscribeToFriendStatus(20, handleStatusChange);     //           return () =&gt; {       ChatAPI.unsubscribeFromFriendStatus(20, handleStatusChange);     };   } ); // ... }</span></span></code> </pre> <br>       ,        ,   …     ,  «»      ,   -,   <code>{id: 10}</code> . <br><br>    React         . ,      ,    .       <code>props</code> ,    . <br><br><h2> <font color="#3AC1EF">,    </font> </h2><br>      React  ,           .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br> ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Greeting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Greeting"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     Hello, {name}   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>     ,     <code>&lt;Greeting name="Dan" /&gt;</code> ,   — <code>&lt;Greeting name="Yuzhi" /&gt;</code> ,       <code>&lt;Greeting name="Yuzhi" /&gt;</code> .             <code>Hello, Yuzhi</code> . <br><br> ,   ,   .    React,     .   ,   ,     .         <code>$.addClass</code>  <code>$.removeClass</code>  jQuery- ( — ,    «»),   ,    CSS-  React (  — ,    «»). <br><br> React  DOM  ,       .      «»  «». <br><br>       .  <code>useEffect</code>   ,     React,    . <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Greeting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name }</span></span></span><span class="hljs-function">) </span></span>{ useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Greeting"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     Hello, {name}   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>       <code>useEffect</code>    ,     ,    .     ,    -    ,      !      ,      «»,    «». <br><br>      ,         <code>A</code> ,   <code>B</code> ,   —   <code>C</code> ,   ,         <code>C</code> .               (,    - ),         . <br><br>  , , ,             . (         ). <br><br>    ? <br><br><h2> <font color="#3AC1EF"> React  </font> </h2><br>    React     DOM.     DOM      , React     DOM,  - . <br><br> ,     : <br><br><pre> <code class="javascript hljs">&lt;h1 className=<span class="hljs-string"><span class="hljs-string">"Greeting"</span></span>&gt; Hello, Dan &lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt;</span></span></code> </pre> <br>       : <br><br><pre> <code class="javascript hljs">&lt;h1 className=<span class="hljs-string"><span class="hljs-string">"Greeting"</span></span>&gt; Hello, Yuzhi &lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt;</span></span></code> </pre> <br> React   : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldProps = {<span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'Greeting'</span></span>, <span class="hljs-attr"><span class="hljs-attr">children</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newProps = {<span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'Greeting'</span></span>, <span class="hljs-attr"><span class="hljs-attr">children</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello, Yuzhi'</span></span>};</code> </pre> <br> React      ,   <code>children</code> ,        DOM.   ,  <code>className</code>  .     : <br><br><pre> <code class="javascript hljs">domNode.innerText = <span class="hljs-string"><span class="hljs-string">'Hello, Yuzhi'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// domNode.className   </span></span></code> </pre> <br>     -     ?    ,           ,      . <br><br> , ,     -  : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Greeting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [counter, setCounter] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   &lt;h1 className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"Greeting"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;     Hello, {name}     &lt;button onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> setCounter(counter + <span class="hljs-number"><span class="hljs-number">1</span></span>)}&gt;       Increment     &lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;   &lt;/</span></span>h1&gt; ); }</code> </pre> <br>      <code>counter</code>  .   <code>document.title</code>   <code>name</code> ,   <code>name</code>   .  <code>document.title</code>    <code>counter</code>  ,   . <br><br>   React …  ? <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> oldEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//   React  ,        ?</span></span></code> </pre> <br>    — . React     ,    ,   . (     .       <code>name</code> .) <br><br>  ,      ,      (    <code>deps</code> ),    <code>useEffect</code> : <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }, [name]); <span class="hljs-comment"><span class="hljs-comment">//  </span></span></code> </pre> <br>    ,      React: «,  ,        ,   ,      <code>name</code>       ». <br><br>   ,        ,       React     : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldDeps = [<span class="hljs-string"><span class="hljs-string">'Dan'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newEffect = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, Dan'</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newDeps = [<span class="hljs-string"><span class="hljs-string">'Dan'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// React     ,     . //      ,     .</span></span></code> </pre> <br>          ,    ,         !       -  -     . <br><br><h2> <font color="#3AC1EF">  React  </font> </h2><br>    React    —     .  ,   ,      ,    ,    <code>useEffect</code> ,        ,   ,   . (      !) <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-comment"><span class="hljs-comment">// ... } useEffect(() =&gt; {   fetchData(); }, []); //   ?  .      . // ... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FAQ  </a>     ,     .      . <br><br> «       !», —  .  :    ,          ,   .   , , ,   — ,       . <br><br> ,    ,   . ,  ,       ,   ,     .       ,    .    . <br><br> ,      ,      . <br><br><h2> <font color="#3AC1EF">    ,    React</font> </h2><br>      ,  ,  React   ,     . <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }, [name]);</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fae/247/cd0/fae247cd068eedbd4b62ba50592d2b3d.gif"></div><br> <i><font color="#999999">    —  </font></i> <br><br>       ,   ,  , <code>[]</code> , ,   ,   ,    : <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">'Hello, '</span></span> + name; }, []); <span class="hljs-comment"><span class="hljs-comment">// :    name</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25f/75d/b3f/25f75db3f9f57ffe1426912093577445.gif"></div><br> <i><font color="#999999">   —    </font></i> <br><br>          .       ,    «» ,    ,   . <br><br> , ,   ,    .      ,      : «   <code>setInterval</code>        <code>clearInterval</code>   ». <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    .  ,  ,   ,   <code>useEffect</code> ,  , ,     <code>[]</code> . -      , ? <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(count + <span class="hljs-number"><span class="hljs-number">1</span></span>);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, []); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{count}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; }</code> </pre> <br> ,  ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br>       ,     «     ,      »,         .   ,       ,      ,  <code>setInterval</code> ,  .      ,  ? <br><br>      ,   —     React   ,       ,        .  ,   <code>count</code> ,     React   , ,    ,  .        —   . <br><br>     <code>count</code>  0.   <code>setCount(count + 1)</code>      <code>setCount(0 + 1)</code> .         ,   —    <code>[]</code> ,     <code>setCount(0 + 1)</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,   0 function Counter() { // ... useEffect(   //       () =&gt; {     const id = setInterval(() =&gt; {       setCount(0 + 1); //  setCount(1)     }, 1000);     return () =&gt; clearInterval(id);   },   [] //    ); // ... } //       1 function Counter() { // ... useEffect(   //     - ,    //   React  ,   .   () =&gt; {     const id = setInterval(() =&gt; {       setCount(1 + 1);     }, 1000);     return () =&gt; clearInterval(id);   },   [] ); // ... }</span></span></code> </pre> <br>   React,   ,         ,     — . <br><br>    <code>count</code> — ,    (   ): <br><br><pre> <code class="javascript hljs">  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> count = <span class="hljs-comment"><span class="hljs-comment">// ... useEffect(() =&gt; {   const id = setInterval(() =&gt; {     setCount(count + 1);   }, 1000);   return () =&gt; clearInterval(id); }, []);</span></span></code> </pre> <br>            . React        . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29e/53b/d0c/29e53bd0c9b7d2ac70d3cd924886b030.gif"></div><br> <i><font color="#999999">  ,     </font></i> <br><br>        .       ,    ,  React       ,   ,     .           —   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">-</a>      . <br><br><h2> <font color="#3AC1EF">       </font> </h2><br>       React   ,      .     ,  ,    ,   . <br><br>       ,      ,   ,    .     <code>count</code> : <br><br><pre> <code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setCount(count + <span class="hljs-number"><span class="hljs-number">1</span></span>); }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [count]);</code> </pre> <br>    . ,    ,   —  ,    .   <code>count</code>    ,         <code>count</code>   ,   <code>setCount(count + 1)</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,   0 function Counter() { // ... useEffect(   //       () =&gt; {     const id = setInterval(() =&gt; {       setCount(0 + 1); // setCount(count + 1)     }, 1000);     return () =&gt; clearInterval(id);   },   [0] // [count] ); // ... } //  ,   1 function Counter() { // ... useEffect(   //       () =&gt; {     const id = setInterval(() =&gt; {       setCount(1 + 1); // setCount(count + 1)     }, 1000);     return () =&gt; clearInterval(id);   },   [1] // [count] ); // ... }</span></span></code> </pre> <br>     ,  <code>setInterval</code> ,    <code>count</code> ,    . ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/573/427/1dd/5734271ddfa94d2d65ac6160515e0069.gif"></div><br> <i><font color="#999999"> ,    </font></i> <br><br>         ,      ,   ,   .       —      ,       . <br><br>       . <br><br><h2> <font color="#3AC1EF">  </font> </h2><br> ,      <code>count</code>  . <br><br><pre> <code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(count + <span class="hljs-number"><span class="hljs-number">1</span></span>);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [count]);</code> </pre> <br>     ,    ,     <code>count</code> .   ,    <code>count</code>    <code>setCount</code> .    ,   ,     <code>count</code>   .     ,    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> <code>setState</code> : <br><br><pre> <code class="javascript hljs">  useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c + <span class="hljs-number"><span class="hljs-number">1</span></span>);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, []);</code> </pre> <br>       « ». ,  <code>count</code>    - ,       <code>setCount(count + 1)</code> .  <code>count</code>  -    ,      <code>count + 1</code>  «»  React.  React      <code>count</code> . ,     React —    ,    ,    ,    . <br><br>       <code>setCount(c =&gt; c + 1)</code> .     « React »,  ,    .  « »      , ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> . <br><br>    ,  ,   ,   .       React.        <code>count</code>    : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f12/8ad/20c/f128ad20c28317ed27a3cb68197fc906.gif"></div><br> <i><font color="#999999">  ,     </font></i> <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br>        ,  <code>setInterval</code> ,    ,      <code>c =&gt; c + 1</code>    .       <code>count</code> . React    . <br><br><h2> <font color="#3AC1EF">   Google Docs</font> </h2><br> ,     ,   —     ?      ,   ,  «»,   ,       . ,    Google Docs        .      .       ,    . <br><br>       ,      .             .      ,    <code>setCount(c =&gt; c + 1)</code> ,       ,     <code>setCount(count + 1)</code> ,        «»   <code>count</code> .    ,    (  — «»). «   React» —   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a> .        . <br><br>     (     )   ,  Google Docs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    .   —     ,     React  .    ,  ,     ( ,  ,   )         . <br><br>   ,     <code>setCount(c =&gt; c + 1)</code> ,   .    ,       . ,       ,      ,      ,  ,         .    <code>setCount(c =&gt; c + 1)</code>     .   <code>useReducer</code> . <br><br><h2> <font color="#3AC1EF">   </font> </h2><br>     ,       : <code>count</code>  <code>step</code> .  <code>setInterval</code>     ,   <code>step</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [step, setStep] = useState(<span class="hljs-number"><span class="hljs-number">1</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     setCount(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c + step);   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [step]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     &lt;h1&gt;{count}&lt;/h1&gt;     &lt;input value={step} onChange={e =&gt; setStep(Number(e.target.value))} /&gt;   &lt;/&gt; ); }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>    ,    React  .       <code>step</code> ,     .      . <br><br>     :  <code>step</code>  <code>setInterval</code> —   <code>step</code>     . ,   ,   ,   !     ,   ,         ,  ,       ,    . <br><br>   ,   ,  ,    <code>setInterval</code> ,      <code>step</code> .    <code>step</code>  ? <br><br>            , ,         <code>useReducer</code> . <br><br>   ,     <code>setSomething(something =&gt; ...)</code> ,  ,           .     «»,    ,  ,       . <br><br>     <code>step</code>   <code>dispatch</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, dispatch] = useReducer(reducer, initialState); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { count, step } = state; useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'tick'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  setCount(c =&gt; c + step); }, 1000); return () =&gt; clearInterval(id); }, [dispatch]);</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      . <br><br>     : «    ,  ?».    ,  React  ,   <code>dispatch</code>       .           . <br><br>   ! <br><br> (    <code>dispatch</code>  <code>setstate</code>      <code>useRef</code>      ,   React  ,    .     —    .) <br><br>  ,     ,   ,     ,  .          <code>step</code> .    ,     .      ,  .      : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">count</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">step</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { count, step } = state; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'tick'</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">count</span></span>: count + step, step }; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'step'</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { count, <span class="hljs-attr"><span class="hljs-attr">step</span></span>: action.step }; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(); } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,   ,      ,    . <br><br><h2> <font color="#3AC1EF"> useReducer —  - </font> </h2><br>    ,       ,       ,          .    ,     ,  ? , ,  API   <code>&lt;Counter step={1} /&gt;</code> . ,       <code>props.step</code>    ? <br><br>   ,        !     ,      : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ step }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, dispatch] = useReducer(reducer, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'tick'</span></span>) {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state + step;   } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {     <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>();   } } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'tick'</span></span> });   }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> clearInterval(id); }, [dispatch]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{count}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; }</code> </pre> <br>      ,      . ,   ,  ,   ,       . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  . <br><br>        <code>dispatch</code>    .  ,  ,     .       . <br><br> ,      ,      .   «»  ,    ,    ?    ,     <code>dispatch</code> , React   .        .                . <br><br>       <code>useReducer</code>    «-» .         ,  . ,   ,           ,  ,  . <br><br><h2> <font color="#3AC1EF">   </font> </h2><br>         ,    - ,        . <br><br> ,  ,  ,  : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [data, setData] = useState({ <span class="hljs-attr"><span class="hljs-attr">hits</span></span>: [] }); <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> axios(     <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query=react'</span></span>,   );   setData(result.data); } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   fetchData(); }, []); <span class="hljs-comment"><span class="hljs-comment">//   ? // ...</span></span></code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  ,      . <br><br>   ,  ,      .  ,   ,         ,   , ,    ,    ,       ,    . <br><br> ,       ,   ,    ,       : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ,       function getFetchUrl() {   return 'https://hn.algolia.com/api/v1/search?query=react'; } // ,        async function fetchData() {   const result = await axios(getFetchUrl());   setData(result.data); } useEffect(() =&gt; {   fetchData(); }, []); // ... }</span></span></code> </pre> <br>  , ,                : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,       function getFetchUrl() {   return 'https://hn.algolia.com/api/v1/search?query=' + query; } // ,        async function fetchData() {   const result = await axios(getFetchUrl());   setData(result.data); } useEffect(() =&gt; {   fetchData(); }, []); // ... }</span></span></code> </pre> <br>       ,    (,     ),         .     . <br><br>  ,      .        ,        : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... useEffect(() =&gt; {   //      !   function getFetchUrl() {     return 'https://hn.algolia.com/api/v1/search?query=react';   }   async function fetchData() {     const result = await axios(getFetchUrl());     setData(result.data);   }   fetchData(); }, []); //    . // ... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>          ?   ,           « ».       React,    -          . <br><br>      <code>getFetchUrl</code> ,      <code>query</code> ,  ,  , ,     .   —  ,  <code>query</code>     : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFetchUrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + query;   }   <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> axios(getFetchUrl());     setData(result.data);   }   fetchData(); }, [query]); <span class="hljs-comment"><span class="hljs-comment">//    . // ... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>   ,    « React».        <code>query</code> . ,   ,    ,             ,     .   ,         ,     . <br><br>    <code>exhaustive-deps</code>   <code>eslint-plugin-react-hooks</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>       ,   .  ,      ,         . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04a/90d/cba/04a90dcbacb01105d634964880ebed19.gif"></div><br> <i><font color="#999999">  </font></i> <br><br>   . <br><br><h2> <font color="#3AC1EF"> ,      ?</font> </h2><br>        . ,               ,         . , ,      . <br><br>          ?  ,  . :     React  .       .         ,  «   ». ,    ,    .   , ,   ,     ! <br><br> ,    ,  . ,      <code>getFetchUrl</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFetchUrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">query</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + query; } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = getFetchUrl(<span class="hljs-string"><span class="hljs-string">'react'</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// ...    -   ... }, []); //  : getFetchUrl useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, []); //  : getFetchUrl // ... }</span></span></code> </pre> <br>      <code>getFetchUrl</code>     —   ,           . <br><br>   ,   «»   ,    .        <code>getFetchUrl</code> (,    ,   ),    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       function getFetchUrl(query) {   return 'https://hn.algolia.com/api/v1/search?query=' + query; } useEffect(() =&gt; {   const url = getFetchUrl('react');   // ...    -    ... }, [getFetchUrl]); //   ,     . useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, [getFetchUrl]); //   ,     . // ... }</span></span></code> </pre> <br>      ,    <code>getFetchUrl</code>   .    ,   —  . -      ,       ,     .      ,     ,    ,    . <br><br>   —        . <br><br>  ,         ,           : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//        function getFetchUrl(query) { return 'https://hn.algolia.com/api/v1/search?query=' + query; } function SearchResults() { useEffect(() =&gt; {   const url = getFetchUrl('react');   // ...    -   ... }, []); //     . useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, []); //     . // ... }</span></span></code> </pre> <br>        ,                 .    ,  ,      . <br><br>       .    ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">useCallback</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    ,   const getFetchUrl = useCallback((query) =&gt; {   return 'https://hn.algolia.com/api/v1/search?query=' + query; }, []);  //      . useEffect(() =&gt; {   const url = getFetchUrl('react');   // ...    -   ... }, [getFetchUrl]); //      . useEffect(() =&gt; {   const url = getFetchUrl('redux');   // ...    -   ... }, [getFetchUrl]); //       // ... }</span></span></code> </pre> <br>  <code>useCallback</code>         .             :  ,   -,   ,      ,   . <br><br>       ,    .          ( <code>'react'</code>  <code>'redux'</code> ).  ,        ,         ,    <code>query</code> .  ,  ,   <code>query</code>    , <code>getFetchUrl</code>       . <br><br>   ,       <code>query</code>  <code>useCallback</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getFetchUrl = useCallback(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   query   return 'https://hn.algolia.com/api/v1/search?query=' + query; }, []); //  : query // ... }</span></span></code> </pre> <br>    <code>useCallback</code>      <code>query</code> ,   ,     <code>getFetchUrl</code> ,      <code>query</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      query const getFetchUrl = useCallback(() =&gt; {   return 'https://hn.algolia.com/api/v1/search?query=' + query; }, [query]);  //    . useEffect(() =&gt; {   const url = getFetchUrl();   // ...    -   ... }, [getFetchUrl]); //    . // ... }</span></span></code> </pre> <br>   <code>useCallback</code> ,  <code>query</code>  ,   <code>getFetchUrl</code>  ,  ,     .   <code>query</code> ,    <code>getFetchUrl</code> ,      .      Excel:     - ,     ,     ,   . <br><br>  —    ,              .         ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [query, setQuery] = useState(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      query const fetchData = useCallback(() =&gt; {   const url = 'https://hn.algolia.com/api/v1/search?query=' + query;   // ...      ... }, [query]);  //       return &lt;Child fetchData={fetchData} /&gt; } function Child({ fetchData }) { let [data, setData] = useState(null); useEffect(() =&gt; {   fetchData().then(setData); }, [fetchData]); //       // ... }</span></span></code> </pre> <br>   <code>fetchData</code>  <code>Parent</code>       <code>query</code> , <code>Child</code>        ,      . <br><br><h2> <font color="#3AC1EF">     ?</font> </h2><br>  ,          ,   , ,             .   ,    ,   ,        ,     : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">query</span></span>: <span class="hljs-string"><span class="hljs-string">'react'</span></span> }; fetchData = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.query;   <span class="hljs-comment"><span class="hljs-comment">// ...    -   ... }; render() {   return &lt;Child fetchData={this.fetchData} /&gt;; } } class Child extends Component { state = {   data: null }; componentDidMount() {   this.props.fetchData(); } render() {   // ... } }</span></span></code> </pre> <br> ,   : « , ,   ,  <code>useEffect</code> —     <code>componentDidMount</code>  <code>componentDidUpdate</code> .     !».         <code>componentDidUpdate</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Child</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.fetchData(); } componentDidUpdate(prevProps) {   <span class="hljs-comment"><span class="hljs-comment">//         if (this.props.fetchData !== prevProps.fetchData) {     this.props.fetchData();   } } render() {   // ... } }</span></span></code> </pre> <br> , <code>fetchData</code> —   ! (, ,  ,     .)      - ,   .  <code>this.props.fetchData</code>    <code>prevProps.fetchData</code>        . ,  ,  ? <br><br><pre> <code class="javascript hljs">  componentDidUpdate(prevProps) {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.fetchData(); }</code> </pre> <br>      .          . (      .)  ,   <code>fetchData</code>   <code>this.state.query</code> ? <br><br><pre> <code class="javascript hljs">  render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Child</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">fetchData</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.fetchData.bind(this,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">this.state.query</span></span></span></span><span class="xml"><span class="hljs-tag">)} /&gt;</span></span></span><span class="xml">; }</span></span></code> </pre> <br>    <code>this.props.fetchData !== prevProps.fetchData</code>    <code>true</code> ,    ,  <code>query</code>  !         . <br><br>      ,   ,   ,        <code>query</code>  <code>Child</code> .  ,   ,    <code>query</code> ,          <code>query</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">query</span></span>: <span class="hljs-string"><span class="hljs-string">'react'</span></span> }; fetchData = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-string"><span class="hljs-string">'https://hn.algolia.com/api/v1/search?query='</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.query;   <span class="hljs-comment"><span class="hljs-comment">// ...    -    ... }; render() {   return &lt;Child fetchData={this.fetchData} query={this.state.query} /&gt;; } } class Child extends Component { state = {   data: null }; componentDidMount() {   this.props.fetchData(); } componentDidUpdate(prevProps) {   if (this.props.query !== prevProps.query) {     this.props.fetchData();   } } render() {   // ... } }</span></span></code> </pre> <br>     ,   ,     -       ,     ,     . <br><br>      ,   ,      .     <code>this</code> ,        .  ,      ,       ,     ,  -  .    ,    <code>this.props.fetchData</code> ,     ,    ,  ,   ,    . <br><br>   -       <code>useCallback</code> .   , ,     ,     .     ,     .   <code>useCallback</code>    <code>props.fetchData</code>   . <br><br> , <code>useMemo</code>        : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ColorPicker</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         Child, //       . const [color, setColor] = useState('pink'); const style = useMemo(() =&gt; ({ color }), [color]); return &lt;Child style={style} /&gt;; }</span></span></code> </pre> <br>     ,     <code>useCallback</code> ,    - .      « »,     ,      ,     .    ,       .      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>    . <br><br>     ,   <code>fetchData</code>      (     ),       .    ,     ,       . («   <code>props.onComplete</code>    ,       ?»)    ,       . <br><br><h2> <font color="#3AC1EF"> </font> </h2><br>          ,   : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Article</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">article</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fetchData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> fetchData(id) {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> article = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> API.fetchArticle(id);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ article }); } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  , , ,    .    .   —    ,     : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Article</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = {   <span class="hljs-attr"><span class="hljs-attr">article</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fetchData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id); } componentDidUpdate(prevProps) {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prevProps.id !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id) {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fetchData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id);   } } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> fetchData(id) {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> article = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> API.fetchArticle(id);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ article }); } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  , , ,       .     ,       . ,     <code>{id: 10}</code> ,      <code>{id: 20}</code> ,    ,            .   ,   ,      ,  .  Et c'est faux. <br><br> ,     ,   .  — ,   ,    <code>async/await</code> (  ,    - )    ,    (        ,      ). <br><br>         ,           <code>async</code> -. (, ,     ,     ,    .) <br><br>        ,   ,   !         . <br><br>  ,             : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Article</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ id }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [article, setArticle] = useState(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> didCancel = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetchData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> article = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> API.fetchArticle(id);     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!didCancel) {       setArticle(article);     }   }   fetchData();   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {     didCancel = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   }; }, [id]); <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      ,      ,    ,       .         ,       . <br><br><h2> <font color="#3AC1EF"> </font> </h2><br>          ,   ,  ,      ,  ,   .       ,  , ,   .         .  —   . <br><br>        <code>useEffect</code> ,  ,  ,  .       React.    ,     <code>useEffect</code>      . <br><br>   ,   ,  «  »,         .     .    ,   ,  ,  ,   «»  ,      . <br><br>       ,  <code>useEffect</code>   ,    .   —    .  —    ,  ,  —   ,      .   ,  ,       ,   ,      API. <br><br>  ,        ,  <code>useFetch</code> ,       ,  <code>useTheme</code> ,    .  ,      ,         <code>useEffect</code> .  ,   ,     ,    . <br><br>   , , <code>useEffect</code>      .    —    ,     .      ,         .       ? <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suspense</a>          React  ,       ,  -  ( : , , )     . <br><br>    <code>Suspense</code>       ,  ,  <code>useEffect</code>     ,    ,    ,        -  .    ,       ,        ,          .      ,  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,        ,    . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>       ,   .   ,           ,   - , , ,     . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445276/">https://habr.com/ru/post/fr445276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445266/index.html">GeekBrains et Rostelecom organiseront un IoT Hackathon</a></li>
<li><a href="../fr445268/index.html">Détails GraphQL: quoi, comment et pourquoi</a></li>
<li><a href="../fr445270/index.html">[signet] Bash pour les débutants: 21 commandes utiles</a></li>
<li><a href="../fr445272/index.html">JavaScript est le meilleur langage de programmation pour les débutants. C'est vrai ou pas?</a></li>
<li><a href="../fr445274/index.html">Lorsque "Zoë"! == "Zoë", ou pourquoi vous devez normaliser les chaînes Unicode</a></li>
<li><a href="../fr445278/index.html">Comment créer un jeu si vous n'êtes jamais artiste</a></li>
<li><a href="../fr445280/index.html">Rentabilité des sites et des services</a></li>
<li><a href="../fr445284/index.html">ClickHouse Product Analytics VKontakte</a></li>
<li><a href="../fr445286/index.html">Repose-pieds pour le cerveau: Hedera Hashgraph Distributed Registry Platform</a></li>
<li><a href="../fr445288/index.html">Tous vos prêts à la consommation et vos données personnelles «en un seul endroit» ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>