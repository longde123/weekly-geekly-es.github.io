<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òëÔ∏è üìé üë©üèª‚Äçüöí 6 le√ßons tir√©es de la recherche d'une solution √† un probl√®me majeur sur gitlab.com. 2e partie üë©üèæ‚Äçüíª üçµ üßíüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous pr√©sentons √† votre attention la deuxi√®me partie de la traduction du mat√©riel sur la lutte de l'√©quipe gitlab.com contre la tyrannie du temps. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>6 le√ßons tir√©es de la recherche d'une solution √† un probl√®me majeur sur gitlab.com. 2e partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/466553/">  Nous pr√©sentons √† votre attention la deuxi√®me partie de la traduction du mat√©riel sur la lutte de l'√©quipe gitlab.com contre la tyrannie du temps. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/nt/tn/-m/nttn-m8gmjyftqrghwzprgboj0g.jpeg"></a> <br><br>  ‚Üí Voici d'ailleurs la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">premi√®re partie</a> . <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Limite de vitesse de traitement des demandes</font> </h2><br>  √Ä ce stade, nous n'√©tions pas int√©ress√©s √† simplement augmenter les valeurs du param√®tre <code>MaxStartups</code> .  Bien qu'une augmentation de 50% de ce param√®tre se soit av√©r√©e bonne, sa nouvelle augmentation sans raison suffisante semblait √™tre une solution plut√¥t grossi√®re au probl√®me.  Il y avait s√ªrement autre chose que nous pouvions faire. <br><br>  Les recherches m'ont amen√© au niveau HAProxy, qui √©tait situ√© devant les serveurs SSH.  HAProxy a une belle option de <code>rate-limit sessions</code> qui affecte la partie du syst√®me qui accepte les demandes entrantes.  Si cette option est configur√©e, elle est utilis√©e pour limiter le nombre de nouvelles requ√™tes TCP par seconde que le frontend envoie aux backends, tout en laissant des connexions entrantes suppl√©mentaires au socket TCP.  Si la vitesse des demandes entrantes d√©passe la limite (modifiable toutes les millisecondes), les nouvelles connexions sont simplement retard√©es.  Le client TCP (dans ce cas, SSH) voit simplement le d√©lai avant d'√©tablir une connexion TCP.  √Ä mon avis, c'est une tr√®s belle d√©cision.  Jusqu'√† ce que la vitesse √† laquelle les demandes sont re√ßues, pendant trop longtemps, d√©passe trop la limite, le syst√®me fonctionnera bien. <br><br>  La question suivante √©tait la s√©lection de la valeur de l'option de <code>rate-limit sessions</code> , que nous devrions utiliser.  Trouver une r√©ponse √† cette question a √©t√© compliqu√© par le fait que nous avons 27 backends SSH et 18 frontaux HAProxy (16 principaux et 2 alt-ssh), ainsi que par le fait que les frontaux ne se coordonnent pas entre eux en ce qui concerne la vitesse de traitement des demandes. .  De plus, nous avons d√ª prendre en compte la dur√©e de l'√©tape d'authentification de la nouvelle session SSH.  Supposons que la premi√®re valeur de <code>MaxStartups</code> soit 150. Cela signifie que si la phase d'authentification prend deux secondes, nous ne pouvons transf√©rer √† chacun des backends que 75 nouvelles sessions par seconde.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici</a> vous pouvez trouver des d√©tails sur le calcul de la valeur des <code>rate-limit sessions</code> , je ne vais pas entrer dans les d√©tails ici.  Je note seulement que pour calculer cette valeur, quatre param√®tres doivent √™tre pris en compte.  Le premier et le second sont le nombre de serveurs des deux types.  Le troisi√®me est la valeur de <code>MaxStartups</code> .  Le quatri√®me est <code>T</code> - combien de temps faut-il pour authentifier une session SSH.  La valeur de <code>T</code> extr√™mement importante, mais elle ne peut √™tre d√©duite qu'approximativement.  C'est ce que nous avons fait, laissant le r√©sultat √† 2 secondes.  En cons√©quence, nous avons obtenu la valeur <code>rate-limit</code> pour les frontaux, qui s'√©levait √† 112,5.  Nous l'avons arrondi √† 110. <br><br>  Et maintenant, les nouveaux param√®tres sont entr√©s en vigueur.  Peut-√™tre pensez-vous qu'apr√®s cela, tout s'est bien termin√©?  Ce devait √™tre que le nombre d'erreurs s'est pr√©cipit√© √† z√©ro et que tout le monde √©tait immens√©ment heureux?  Eh bien, en fait, c'√©tait loin d'√™tre aussi bon.  Cette modification n'a entra√Æn√© aucune modification visible du taux d'erreur.  Franchement, j'√©tais assez contrari√©.  Nous avons rat√© quelque chose d'important ou avons mal compris l'essence du probl√®me. <br><br>  En cons√©quence, nous sommes retourn√©s aux journaux (et, enfin, aux informations HAProxy) et avons pu nous assurer que la limite de vitesse de traitement des requ√™tes fonctionne au moins en agissant sur les requ√™tes comme pr√©vu.  Auparavant, les indicateurs correspondants √©taient plus √©lev√©s, ce qui nous a permis de conclure que nous avons r√©ussi √† limiter la vitesse √† laquelle les demandes entrantes sont envoy√©es pour traitement.  Mais il √©tait clair que le rythme auquel les demandes arrivaient √©tait encore trop √©lev√©.  Bien qu'il soit √©galement clair qu'il ne s'est m√™me pas approch√© de ces niveaux alors qu'il pouvait avoir un effet notable sur le syst√®me.  Lorsque nous avons analys√© le processus de s√©lection des backends (selon les journaux HAProxy), nous avons remarqu√© une √©tranget√©.  Au d√©but de l'heure, les connexions backend √©taient r√©parties de mani√®re in√©gale sur les serveurs SSH.  Dans l'intervalle de temps choisi pour l'analyse, le nombre de connexions par seconde sur diff√©rents serveurs variait de 30 √† 121. Et cela signifiait que notre √©quilibrage de charge ne faisait pas bien son travail.  L'analyse de la configuration a montr√© que nous avons utilis√© l'option de <code>balance source</code> , de sorte qu'un client avec une adresse IP sp√©cifique est toujours connect√© au m√™me backend.  Cela peut √™tre consid√©r√© comme un ph√©nom√®ne positif dans les cas o√π une liaison de session est n√©cessaire.  Mais nous avons affaire √† SSH, nous n'en avons donc pas besoin.  Cette option a √©t√© configur√©e une fois par nous, mais nous n'avons trouv√© aucune indication sur la raison pour laquelle cela a √©t√© fait.  Nous n'avons pas pu trouver de raison valable de continuer √† l'utiliser.  En cons√©quence, nous avons d√©cid√© de passer √† <code>leastconn</code> .  Gr√¢ce √† cette option, les nouvelles connexions entrantes donnent des backends avec le nombre minimum de connexions actuelles.  Cela a affect√© l'utilisation des ressources processeur par nos serveurs SSH (Git).  Voici l'horaire correspondant. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d7e/eeb/535/d7eeeb535c31867c14d70759f48a4734.png"><br>  <i><font color="#999999">Consommation du processeur par les serveurs avant et apr√®s l'application de l'option lessconn</font></i> <br><br>  Apr√®s avoir vu cela, nous avons r√©alis√© que l'utilisation de <code>leastconn</code> est une bonne id√©e.  Les deux lignes qui sont en bas du graphique sont nos serveurs Canaries, vous pouvez les ignorer.  Mais auparavant, la r√©partition des valeurs de charge CPU pour les diff√©rents serveurs √©tait corr√©l√©e √† 2: 1 (de 30% √† 60%).  Cela indiquait clairement qu'auparavant certains de nos backends √©taient charg√©s plus que d'autres en raison de la connexion des clients avec eux.  Cela m'a surpris.  Il semblait raisonnable de s'attendre √† ce qu'un large √©ventail d'adresses IP de clients soit suffisant pour charger nos serveurs de mani√®re beaucoup plus uniforme.  Mais, apparemment, afin de fausser les indicateurs de charge du serveur, plusieurs gros clients suffisaient, dont le comportement diff√®re d'une option moyenne. <br><br>  <b>Le√ßon num√©ro 4.</b>  Lorsque vous s√©lectionnez des param√®tres sp√©cifiques qui diff√®rent des param√®tres par d√©faut, commentez-les ou laissez un lien vers les documents expliquant les modifications.  Quiconque devra faire face √† ces param√®tres √† l'avenir vous en sera reconnaissant. <br><br>  Cette transparence est l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une des valeurs fondamentales de GitLab</a> . <br><br>  L'activation de l'option <code>leastconn</code> √©galement contribu√© √† r√©duire les niveaux d'erreur.  Et c'est exactement ce que nous recherchions.  Par cons√©quent, nous avons d√©cid√© de laisser cette option.  Mais, en continuant d'exp√©rimenter, ils ont r√©duit le niveau des limites de vitesse de traitement des demandes √† 100, ce qui a contribu√© √† r√©duire davantage le niveau d'erreurs.  Cela indique que la s√©lection initiale de la valeur de <code>T</code> a probablement √©t√© mal effectu√©e.  Mais si c'est le cas, alors cet indicateur √©tait trop petit, ce qui a conduit √† une limite de vitesse trop forte, et m√™me 100 requ√™tes par seconde ont √©t√© per√ßues comme une valeur tr√®s faible, et nous n'√©tions pas pr√™ts √† le r√©duire davantage.  Malheureusement, pour une raison interne, ces deux changements n'√©taient qu'une exp√©rience.  Nous avons d√ª revenir √† l'utilisation de l'option de <code>balance source</code> et limiter la vitesse de traitement des demandes √† 100 demandes par seconde. <br><br>  √âtant donn√© que la vitesse de traitement des requ√™tes a √©t√© d√©finie √† un niveau bas qui nous convient et que nous ne pouvions pas utiliser le moins de <code>leastconn</code> , nous avons essay√© d'augmenter le param√®tre <code>MaxStartups</code> .  Au d√©but, nous l'avons augment√© √† 200, cela a donn√© un certain effet.  Puis - jusqu'√† 250. Les erreurs ont presque compl√®tement disparu et rien de mal ne s'est produit. <br><br>  <b>Le√ßon num√©ro 5.</b>  Bien que les MaxStartups √©lev√©s puissent sembler intimidants, ils ont tr√®s peu d'impact sur les performances m√™me lorsqu'ils sont bien sup√©rieurs aux valeurs par d√©faut. <br><br>  C'est peut-√™tre quelque chose comme un grand et puissant levier, que nous pouvons, si n√©cessaire, utiliser √† l'avenir.  Nous rencontrerons peut-√™tre des probl√®mes si nous parlons de chiffres de l'ordre de plusieurs milliers ou plusieurs dizaines de milliers, mais nous en sommes encore loin. <br><br>  Qu'est-ce que cela dit sur mes estimations du param√®tre <code>T</code> , le temps qu'il faut pour installer et authentifier une session SSH?  Si vous travaillez avec la formule de calcul de l'indicateur de limite de vitesse de traitement de connexion, sachant que 200 n'est pas tout √† fait suffisant pour l'indicateur <code>MaxStartups</code> et 250 est suffisant, vous pouvez d√©couvrir que <code>T</code> probablement une valeur de 2,7 √† 3,4 secondes.  En cons√©quence, une valeur estim√©e de 2 secondes n'√©tait pas loin de la v√©rit√©, mais la valeur r√©elle, bien s√ªr, √©tait plus √©lev√©e que pr√©vu.  Nous y reviendrons un peu plus tard. <br><br><h2>  <font color="#3AC1EF">√âtapes finales</font> </h2><br>  Nous avons de nouveau regard√© les journaux, en tenant compte de ce que nous savions d√©j√†, et, apr√®s r√©flexion, nous avons d√©couvert que le probl√®me avec lequel tout avait commenc√© pouvait √™tre identifi√© par les signes suivants.  Tout d'abord, il s'agit d'une valeur <code>t_state</code> √©gale √† <code>SD</code> .  Deuxi√®mement, il s'agit de la valeur de <code>b_read</code> (octets lus par le client), √©gale √† 0. Comme d√©j√† mentionn√©, nous traitons environ 26 √† 28 millions de connexions SSH par jour.  Il √©tait d√©sagr√©able d'apprendre qu'au milieu de la catastrophe, environ 1,5% de ces connexions √©taient gravement rompues.  De toute √©vidence, l'ampleur du probl√®me √©tait beaucoup plus grande que nous ne le pensions au tout d√©but.  De plus, il n'y avait rien que nous ne pouvions pas d√©tecter plus t√¥t (m√™me lorsque nous avons r√©alis√© que <code>t_state="SD"</code> indiquait le probl√®me dans les journaux), mais nous n'avons pas r√©fl√©chi √† la fa√ßon de proc√©der, bien que nous et vous devriez y penser.  Probablement √† cause de cela, nous avons consacr√© beaucoup plus de temps et d'efforts √† r√©soudre le probl√®me que nous n'aurions pu le faire. <br><br>  <b>Le√ßon num√©ro 6.</b>  Mesurez les niveaux d'erreur r√©els le plus t√¥t possible. <br><br>  Si nous √©tions au d√©part conscients de l‚Äôampleur du probl√®me, nous pourrions y accorder plus d‚Äôattention.  Bien que, comment le percevoir, d√©pend toujours de la connaissance des caract√©ristiques qui nous permettent de d√©crire les probl√®mes. <br><br>  Si nous parlons des avantages qui sont apparus apr√®s avoir augment√© les valeurs de <code>MaxStartups</code> et r√©gl√© la vitesse de traitement des demandes, nous pouvons dire que le niveau d'erreur est tomb√© √† 0,001%.  C'est - jusqu'√† plusieurs milliers par jour.  Cette situation paraissait bien meilleure, mais un niveau d'erreurs similaire √©tait encore plus √©lev√© que celui que nous souhaiterions atteindre.  Apr√®s avoir d√©couvert certaines choses, nous avons de nouveau pu utiliser l'option <code>leastconn</code> et les erreurs ont compl√®tement disparu.  Apr√®s cela, nous avons pu pousser un soupir de soulagement. <br><br><h2>  <font color="#3AC1EF">Travaux futurs</font> </h2><br>  De toute √©vidence, la phase d'authentification SSH prend encore beaucoup de temps.  Peut-√™tre jusqu'√† 3,4 secondes.  GitLab peut utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AuthorizedKeysCommand</a> pour rechercher directement une cl√© SSH dans une base de donn√©es.  Ceci est tr√®s important pour des op√©rations rapides lorsqu'il y a un grand nombre d'utilisateurs.  Sinon, SSHD doit lire s√©quentiellement un tr√®s gros fichier <code>authorized_keys</code> pour trouver la cl√© publique de l'utilisateur.  Cette t√¢che n'est pas tr√®s √©volutive.  Nous avons impl√©ment√© une recherche en utilisant une certaine quantit√© de code Ruby qui effectue des appels vers une API HTTP externe.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stan Hugh</a> , le chef de notre d√©partement d'ing√©nierie et une source in√©puisable de connaissances sur GitLab, a d√©couvert que les instances Unicorn des serveurs Git / SSH sont sous la charge constante des demandes qui leur sont adress√©es.  Cela pourrait apporter une contribution significative aux trois secondes n√©cessaires pour authentifier les demandes.  En cons√©quence, nous avons r√©alis√© qu'√† l'avenir, nous devrions enqu√™ter sur cette question.  Peut-√™tre que nous augmenterons le nombre d'instances Unicorn (ou Puma) sur ces n≈ìuds afin que les serveurs SSH n'aient pas √† attendre pour y acc√©der.  Cependant, il y a un certain risque ici, nous devons donc √™tre prudents et pr√™ter attention √† la collecte et √† l'analyse des indicateurs du syst√®me.  Le travail sur la productivit√© se poursuit, mais maintenant, une fois le principal probl√®me r√©solu, les choses vont plus lentement.  Nous pouvons peut-√™tre r√©duire la valeur de <code>MaxStartups</code> , mais comme son niveau √©lev√© ne cr√©e pas l'impact n√©gatif sur le syst√®me qu'il semble cr√©er, ce n'est pas particuli√®rement n√©cessaire.  Il sera beaucoup plus facile pour tout le monde de vivre si OpenSSH peut √† tout moment nous dire √† quel point nous sommes proches des limites de <code>MaxStartups</code> .  Ce sera mieux si nous pouvons toujours √™tre au courant.  C'est bien plus agr√©able que d'apprendre que les limites sont d√©pass√©es face √† des connexions rompues. <br><br>  De plus, nous avons besoin d'une sorte de syst√®me de notification lorsque des entr√©es de journal HAProxy apparaissent, indiquant un probl√®me avec les connexions d√©connect√©es.  Le fait est que cela ne devrait pas du tout se produire dans la pratique.  Si cela se produit √† nouveau, nous devrons augmenter davantage les valeurs de <code>MaxStartups</code> , ou si nous manquons de ressources, nous devrons ajouter plus de n≈ìuds Git / SSH au syst√®me. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Des parties de syst√®mes complexes interagissent selon des sch√©mas complexes.  Et en eux, pour r√©soudre divers probl√®mes, on peut souvent trouver loin d'un "levier".  Lorsqu'il s'agit de tels syst√®mes, il est utile de conna√Ætre les outils qui y sont pr√©sents.  Le fait est qu'ils ont tous leurs avantages et leurs inconv√©nients.  En outre, il convient de noter qu'il peut √™tre risqu√© d'effectuer certains r√©glages sur la base d'hypoth√®ses et de valeurs estim√©es.  Maintenant, en regardant le chemin que nous avons parcouru, j'essaierais de mesurer aussi pr√©cis√©ment que possible le temps n√©cessaire pour terminer l'authentification de la demande, ce qui conduirait √† la valeur approximative de <code>T</code> que j'ai d√©duite serait plus proche de la v√©rit√©. <br><br>  Mais la principale le√ßon que nous avons apprise de tout cela est que lorsque beaucoup de gens planifient des t√¢ches sur la base de tr√®s bons indicateurs de temps, cela, avec des fournisseurs de services centralis√©s comme GitLab, conduit √† des probl√®mes de mise √† l'√©chelle vraiment inhabituels. <br><br>  Si vous faites partie de ceux qui utilisent les outils de lancement de t√¢ches planifi√©es, vous devrez peut-√™tre envisager de d√©finir l'heure de lancement de vos t√¢ches d'une nouvelle mani√®re.  Par exemple, vous pouvez rendre les t√¢ches ¬´endormies¬ª pendant un certain temps, en commen√ßant √† fonctionner r√©ellement seulement 30 secondes apr√®s le lancement.  Vous pouvez, par exemple, indiquer des heures al√©atoires dans l'heure dans le calendrier de lancement de la t√¢che (ici, vous pouvez ajouter un temps d'attente al√©atoire avant l'ex√©cution r√©elle de la t√¢che).  Cela nous aidera tous dans la lutte contre la tyrannie des montres. <br><br>  <b>Chers lecteurs!</b>  Avez-vous rencontr√© des probl√®mes similaires √† celui dont l'histoire est consacr√©e √† ce mat√©riel? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466553/">https://habr.com/ru/post/fr466553/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466541/index.html">Utilisation de DbTool pour amorcer des bases de donn√©es dans des applications .NET (Core)</a></li>
<li><a href="../fr466543/index.html">Les pr√™ts Habr Weekly # 17 / Sberbank seront approuv√©s par AI - effrayant, publicit√© dans les produits open source - douteux</a></li>
<li><a href="../fr466547/index.html">Bonne f√™te du programmeur</a></li>
<li><a href="../fr466549/index.html">Principes g√©n√©raux de fonctionnement de QEMU-KVM</a></li>
<li><a href="../fr466551/index.html">Marionnettiste avec ES6 dans un n≈ìud et un navigateur, ou pourquoi Zora est le meilleur framework de test dans sa niche</a></li>
<li><a href="../fr466555/index.html">6 le√ßons tir√©es de la recherche d'une solution √† un probl√®me majeur sur gitlab.com. Partie 1</a></li>
<li><a href="../fr466557/index.html">Comment cr√©er une mise en page pour le site et ne pas rester extr√™me</a></li>
<li><a href="../fr466559/index.html">Soit le nouveau Var</a></li>
<li><a href="../fr466561/index.html">Besoin de choix absolument transparents? - Je les ai</a></li>
<li><a href="../fr466563/index.html">KOST: ce qui est inclus dans la nouvelle pile technologique pour le d√©veloppement d'applications cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>