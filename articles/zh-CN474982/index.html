<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😢 🎒 🍳 JavaFX教程：FXML和SceneBuilder 🖐️ 👨🏾‍🌾 🌠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JavaFX教程的翻译： Vojtech Ruzicka 撰写的FXML和SceneBuilder文章 。 

 如何使用FXML标记和SceneBuilder使用JavaFX创建GUI。 

 JavaFX系列中的所有文章： 



1. JavaFX教程：入门 
2. JavaFX教程：世界您好...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JavaFX教程：FXML和SceneBuilder</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474982/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX教程的</a>翻译<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">：</a> Vojtech Ruzicka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">撰写的FXML和SceneBuilder文章</a> 。 <br><br> 如何使用FXML标记和SceneBuilder使用JavaFX创建GUI。 <br><br>  JavaFX系列中的所有文章： <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX教程：入门</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX教程：世界您好！</a> </li><li>  JavaFX教程：FXML和SceneBuilder </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX教程：基本布局</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX教程：高级布局</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX教程：CSS样式</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaFX Weaver：集成JavaFX和Spring Boot应用程序</a> </li></ol><a name="habracut"></a><br><h3> 传统方式 </h3><br> 在上一篇文章中， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们创建了一个简单的Hello World应用程序</a> 。 <br><br> 提醒一下，代码如下所示： <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Stage primaryStage)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ primaryStage.setTitle(<span class="hljs-string"><span class="hljs-string">"Hello world Application"</span></span>); primaryStage.setWidth(<span class="hljs-number"><span class="hljs-number">300</span></span>); primaryStage.setHeight(<span class="hljs-number"><span class="hljs-number">200</span></span>); InputStream iconStream = getClass().getResourceAsStream(<span class="hljs-string"><span class="hljs-string">"/icon.png"</span></span>); Image image = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image(iconStream); primaryStage.getIcons().add(image); Label helloWorldLabel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Label(<span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>); helloWorldLabel.setAlignment(Pos.CENTER); Scene primaryScene = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scene(helloWorldLabel); primaryStage.setScene(primaryScene); primaryStage.show(); }</code> </pre> <br> 如您所见，整个用户界面都是用Java代码创建的。 <br><br> 这是一个非常简单的示例，但是随着您的应用程序变得越来越复杂，当您必须输入多层嵌套布局和许多组件时，生成的代码将变得非常难以理解。 但是，这还不是全部-在同一个类中，有代码同时负责结构，视觉效果和行为。 <br><br> 班级显然没有单一责任。 例如，将其与Web界面进行比较，其中每个页面都有明确分开的任务： <br><br><ul><li>  HTML是一种结构 </li><li>  CSS是视觉效果 </li><li>  JavaScript是行为 </li></ul><br><h3>  FXML简介 </h3><br> 显然，将所有代码都放在一个地方并不是一个好主意。 您需要以某种方式对其进行结构化，以便更易于理解并使其更易于管理。 <br><br> 实际上，为此有许多设计模式。 通常，您最终会得到一个“ Model-View-Whatever”选项-类似于“ Model View Controller”，“ Model View Presenter”或“ Model View ViewModel”。 <br><br> 您可以花几个小时来讨论不同选择的优缺点-在这里不要做。 更重要的是，通过JavaFx，您可以使用它们中的任何一个。 <br><br> 这是可能的，因为除了用户界面的过程设计之外，您还可以使用声明性XML标记。 <br><br> 事实证明，XML的层次结构是描述用户界面中组件层次的一种好方法。  HTML效果很好，对吧？ <br><br> 特定于JavaFX的XML格式称为FXML。 在其中，您可以定义所有应用程序组件及其属性，并将它们与负责管理交互的控制器关联。 <br><br><h3> 下载FXML文件 </h3><br> 那么，如何更改启动方法以与FXML一起使用？ <br><br><pre> <code class="java hljs">FXMLLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FXMLLoader(); URL xmlUrl = getClass().getResource(<span class="hljs-string"><span class="hljs-string">"/mainScene.fxml"</span></span>); loader.setLocation(xmlUrl); Parent root = loader.load(); primaryStage.setScene(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scene(root)); primaryStage.show();</code> </pre> <br>  <i>root</i>代表用户界面的根组件，其他组件嵌套在其中。 <br><br>  <i>load</i>方法具有通用的返回值，因此您可以指定特定类型，而不是<i>Parent</i> 。 接下来，您可以访问面向组件的方法。 但是，这会使您的代码更加脆弱。 如果您在FXML中更改根组件的类型，则该应用程序可能会在运行时停止运行，但是在编译过程中不会出现任何错误。 这是因为现在在FXML和Java FXML加载器中声明的类型不匹配。 <br><br><h3> 创建FXML文件 </h3><br> 现在我们知道了如何加载FXML文件，但是我们仍然需要创建它。 该文件必须具有扩展名.fxml。 在Maven项目中，您可以将该文件放在资源文件夹中，或者FXMLLoader可以从外部URL下载它。 <br><br> 创建文件后，在其第一行中输入XML声明： <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span></code> </pre> <br><h3> 汇入 </h3><br> 在将单个组件添加到文件之前，必须确保正确识别了它们。 为此，请添加导入语句。 这与在Java类中导入非常相似。 您可以照常导入单个类或使用通配符。 让我们看一个导入部分的例子： <br><pre> <code class="xml hljs"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import java.lang.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import java.util.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.layout.*</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br> 好消息是，与其手动添加所有导入语句，您的IDE应该像添加它们到Java类一样帮助您添加导入。 <br><br><h3> 添加组件 </h3><br> 现在是时候添加一些组件了。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">上一篇文章中，</a>我们了解到每个场景只能有一个子组件。 首先，让我们添加一个简单的标签： <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.Label</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag">&gt;</span></span>Hello World!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 当然，标记为根组件并不是一个很现实的例子。 通常最好使用某种布局（layout），它是多个组件的容器并组织它们的排列。 我们将在本系列的后面部分介绍布局，但是现在，我们只使用一个简单的VBox，将其子级垂直放置。 <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.Label</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.layout.VBox</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">import javafx.scene.control.Button</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello world!"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"This is a simple demo application."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3>  FX命名空间 </h3><br> 默认情况下，有几个FXML元素和属性不可用。 您需要添加一个命名空间FXML使其可用。 必须将其添加到根组件中： <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/javafx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:fx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/fxml"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 现在，您可以使用fx命名空间中的新元素。 让我们尝试向组件添加唯一标识符： <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainTitle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello world!"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  <i>fx：id</i>属性是组件的唯一标识符，可用于从FXML的其他部分甚至从控制器引用组件。 <br><br><h3> 剧本 </h3><br> 我们的应用程序仍然是静态的。 有几个标签和一个按钮，但是应用程序不会动态执行任何操作。 <br><br> 让我们响应按钮的单击，并将标题从“单击我！”更改为“再次单击我！”。 <br><br> 首先要做的是为我们的按钮添加一个onAction事件处理程序。 <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"buttonClicked()"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br> 注意fx：id，这是以后将用来引用按钮的标识符。 <br><br> 现在，您需要提供一个将被调用以处理事件的函数。 可以在fx：脚本标记内定义它。 重要的是您可以使用不同的语言编写脚本，JavaScript，Groovy或Clojure。 让我们看一下JavaScript中的示例： <br><br><img src="https://habrastorage.org/webt/al/jy/a7/aljya7vcinsitfft9asobkkvfta.png"><br><br> 请注意，我们使用mainButton标识符引用了Button组件，该标识符的声明如下： <br><br><pre> <code class="xml hljs">fx:id = "mainButton"</code> </pre> <br> 您还必须指出在FXML文件中使用哪种脚本语言： <br><br><pre> <code class="xml hljs"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">language javascript</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br> 让我们看一下示例的全文： <br><br><img src="https://habrastorage.org/webt/kz/ta/nl/kztanlf-j7bz07gxtp5eagcmemk.png"><br><br><h3> 我应该用这个吗？ </h3><br> 上面的示例显示了如何使用<i>fx：id</i>引用组件，以及如何使用JavaScript脚本添加简单行为。 那真的是你应该做的吗？ <br><br> 在大多数情况下，答案是否定的。 这种方法存在几个问题。 引入FXML的原因是利益分离-分离用户界面的结构和行为。 在此脚本中，与用户界面结构合并的行为再次返回。 而且，由于我们不再使用Java代码，而是使用XML，因此所有在编译时的代码检查和类型安全性都丢失了。 现在，将在运行时而不是编译时检测到应用程序中的所有问题。 该应用程序变得非常脆弱且容易出错。 <br><br><h3> 添加控制器 </h3><br> 那么，如何做才能使利益分清呢？ 您可以将控制器链接到我们的FXML文件。 控制器是Java类，负责处理应用程序中的行为和用户交互。 这样，您可以返回类型安全性和编译时检查。 <br><br> 控制器是POJO，不应扩展或实现任何东西，也不应具有任何特殊的注释。 <br><br> 如何将控制器类与FXML关联？ 本质上有两种选择。 <br><br><h3> 在Java中 </h3><br> 您可以自己创建控制器的实例，也可以使用其他任何创建实例的方法，例如依赖项注入。 然后只需下载<i>FXMLLoader即可</i> 。 <br><br><pre> <code class="java hljs">FXMLLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FXMLLoader(); loader.setController(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainSceneController());</code> </pre> <br><h3> 在FXML中 </h3><br> 您可以将控制器的类指定为属性<i>fx：controller</i> ，该属性应位于根组件中。 <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/javafx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:fx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/fxml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.vojtechruzicka.MainSceneController"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 如果在FXML中声明Controller类，则会自动为您创建。 这种方法有一个局限性-在控制器中，您需要创建一个不带参数的构造函数，以便轻松创建Controller类的新实例。 <br><br> 要访问自动创建的控制器的实例，可以使用FXML加载器： <br><br><pre> <code class="java hljs">FXMLLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FXMLLoader(); loader.setLocation(getClass().getResource(<span class="hljs-string"><span class="hljs-string">"/mainScene.fxml"</span></span>)); MainSceneController controller = loader.getController();</code> </pre> <br><h3> 调用控制器方法 </h3><br> 现在有了控制器，您可以删除脚本并实现直接在控制器中按下按钮的逻辑： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSceneController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Button clicked!"</span></span>); } }</code> </pre> <br> 下一步是将该方法的调用注册为<i>按钮的onAction</i>事件<i>处理程序</i> 。 要从我们的控制器引用方法，我们需要在方法名称前使用<i>＃</i>号： <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/javafx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:fx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://javafx.com/fxml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.vojtechruzicka.MainSceneController"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainTitle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello world!"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subTitle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"This is a simple demo application."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#buttonClicked"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VBox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 单击一个按钮时，它将调用<i>MainSceneController.buttonClicked（）</i>方法。 请记住，这仅在方法声明为public时才有效。 如果访问修饰符更加严格，则必须使用<i>@FXML</i>注释对方法进行注释。 <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@FXML</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Button clicked!"</span></span>); }</code> </pre><br><h3> 将组件嵌入控制器 </h3><br> 到目前为止，我们只是打印到控制台。 如果我们想再次将按钮的文本更改为“ <i>再次单击我</i> ”怎么办？ 我们如何获得控制器中组件的链接？ <br><br> 幸运的是，这很容易。 还记得这些<i>fx：id</i>属性吗？ <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fx:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click me!"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onAction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#buttonClicked"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  JavaFX尝试自动将具有<i>fx：id的</i>组件与控制器中定义的具有相同名称的字段进行匹配。 <br><br> 假设我们有一个上述按钮 <br><br><pre> <code class="xml hljs">fx:id="mainButton"</code> </pre> <br>  JavaFX尝试将按钮对象注入到名为<i>mainButton</i>的字段中的控制器中： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSceneController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    fx:id = "mainButton" @FXML private Button mainButton; }</span></span></code> </pre> <br> 与以前的方法一样，您的字段必须是<i>公共的</i>或带注释的<i>@FXML</i> 。 <br><br> 现在我们有了按钮的链接，我们可以轻松更改其文本： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSceneController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FXML</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button mainButton; <span class="hljs-meta"><span class="hljs-meta">@FXML</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ mainButton.setText(<span class="hljs-string"><span class="hljs-string">"Click me again!"</span></span>); } }</code> </pre> <br><h3> 场景构建器 </h3><br> 用XML编写GUI结构可能比用Java编写更为自然（特别是如果您熟悉HTML）。 但是，它仍然不是很方便。 好消息是，有一个名为Scene Builder的官方工具可以帮助您创建用户界面。 简而言之，这是GUI的图形编辑器。 <br><br><img src="https://habrastorage.org/webt/vu/qy/0p/vuqy0pzwgyblbskqijeygkfxixu.png"><br><br> 编辑器具有三个主要区域： <br><br><ol><li> 左侧部分显示可以拖动到中间部分的可用组件。 它还包含用户界面中所有组件的层次结构，因此您可以轻松地对其进行导航。 </li><li> 中间部分是基于FXML文件显示的应用程序。 </li><li> 右边是当前的组件检查器。 在这里，您可以编辑所选当前组件的各种属性。 在层次结构中间选择的任何组件都将显示在检查器中。 </li></ol><br><h3> 单机版 </h3><br> 可以将Scene Builder作为独立的应用程序<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">下载</a> ，可用于编辑FXML文件。 <br><br><h3> 与IntelliJ IDEA集成 </h3><br> 另外，Scene Builder提供与IDE的集成。 <br><br> 在IntelliJ IDEA中，您可以右键单击任何FXML文件，然后在SceneBuilder中选择“打开”菜单选项。 <br><br> 另外，IntelliJ IDEA可将SceneBuilder直接集成到IDE中。 如果您在IDEA中打开FXML文件，则屏幕底部将显示两个选项卡 <br><br><ul><li> 文字内容 </li><li> 场景构建者 </li></ul><br> 对于每个FXML文件，您可以在直接编辑FXML文件或通过SceneBuilder编辑之间轻松切换。 <br><br><img src="https://habrastorage.org/webt/z0/cz/va/z0czvaalmf393mck_k0nnmjx4ji.png"><br><br> 在IntelliJ IDEA中，您可以配置SceneBuilder可执行文件的位置： <br><br> <code>Settings → Languages &amp; Frameworks → JavaFX → Path to SceneBuilder</code> <br> <br><h3> 接下来是什么 </h3><br> 在本系列的下一篇文章中，我们将讨论一些基本布局，这些布局可用于组织JavaFX中的GUI应用程序的组件。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN474982/">https://habr.com/ru/post/zh-CN474982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN474966/index.html">如何在本体网络上编写智能Python合同。 第1部分：区块链和区块API</a></li>
<li><a href="../zh-CN474968/index.html">RxDart适用于最小的项目</a></li>
<li><a href="../zh-CN474970/index.html">如何使用Python on Ontology编写智能合约？ 第5部分：本机API</a></li>
<li><a href="../zh-CN474976/index.html">划船城市：威尼斯如何没有汽车而存在</a></li>
<li><a href="../zh-CN474978/index.html">IBM Watson视觉识别：IBM Cloud中现已提供对象识别</a></li>
<li><a href="../zh-CN474984/index.html">RabbitMQ与Kafka：故障转移和高可用性</a></li>
<li><a href="../zh-CN474988/index.html">欢迎来到Mitap：面向初学者的数据科学职业</a></li>
<li><a href="../zh-CN474990/index.html">艰苦实践：如何在城市公园中建立Wi-Fi网络</a></li>
<li><a href="../zh-CN474992/index.html">分析笔记本电脑电池故障。 电动摩托笔记</a></li>
<li><a href="../zh-CN474994/index.html">如何在不损失一致性的情况下将整体切入服务并保持内存中缓存的性能</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>