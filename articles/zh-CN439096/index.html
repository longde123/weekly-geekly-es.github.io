<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤£ ğŸ‘©â€ğŸ‘§ ğŸ¶ Buildbotï¼šä¸€ä¸ªæ•…äº‹ï¼Œå…¶ä¸­åŒ…å«å¦ä¸€ä¸ªæŒç»­é›†æˆç³»ç»Ÿçš„ç¤ºä¾‹ âœ–ï¸ âœ‹ğŸ¾ ğŸ¦”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ï¼ˆå›¾ç‰‡æ¥è‡ªå®˜æ–¹ç½‘ç«™ ï¼‰ 

 é¡¾åæ€ä¹‰ï¼ŒBuildbotæ˜¯ä¸€ä¸ªæŒç»­é›†æˆç³»ç»Ÿï¼ˆciï¼‰ã€‚ åœ¨å“ˆå¸ƒé›·ä¸Šå·²ç»æœ‰å…³äºä»–çš„å‡ ç¯‡ æ–‡ç«  ï¼Œä½†æ˜¯ï¼Œä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œä»ä»–ä»¬é‚£é‡Œå¹¶ä¸æ¸…æ¥šè¯¥å·¥å…·çš„ä¼˜åŠ¿ã€‚ å¦å¤–ï¼Œå®ƒä»¬å‡ ä¹æ²¡æœ‰ç¤ºä¾‹ï¼Œè¿™ä½¿å¾—å¾ˆéš¾çœ‹åˆ°ç¨‹åºçš„å…¨éƒ¨åŠŸèƒ½ã€‚ åœ¨æˆ‘çš„æ–‡ç« ä¸­ï¼Œæˆ‘å°†å°è¯•å¼¥è¡¥è¿™äº›ç¼ºç‚¹ï¼Œè®¨è®ºå†…éƒ¨è®¾å¤‡Buildbot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Buildbotï¼šä¸€ä¸ªæ•…äº‹ï¼Œå…¶ä¸­åŒ…å«å¦ä¸€ä¸ªæŒç»­é›†æˆç³»ç»Ÿçš„ç¤ºä¾‹</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439096/"><img src="https://habrastorage.org/webt/so/qs/u1/soqsu1skae_0xuktzdemfv-n3yq.png"><br>  <i><font color="#aaaaaa">ï¼ˆå›¾ç‰‡æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹ç½‘ç«™</a> ï¼‰</font></i> <br><br> é¡¾åæ€ä¹‰ï¼ŒBuildbotæ˜¯ä¸€ä¸ªæŒç»­é›†æˆç³»ç»Ÿï¼ˆciï¼‰ã€‚ åœ¨å“ˆå¸ƒé›·ä¸Šå·²ç»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰</a>å…³äºä»–çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‡ ç¯‡</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a> ï¼Œä½†æ˜¯ï¼Œä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œä»ä»–ä»¬é‚£é‡Œå¹¶ä¸æ¸…æ¥šè¯¥å·¥å…·çš„ä¼˜åŠ¿ã€‚ å¦å¤–ï¼Œå®ƒä»¬å‡ ä¹æ²¡æœ‰ç¤ºä¾‹ï¼Œè¿™ä½¿å¾—å¾ˆéš¾çœ‹åˆ°ç¨‹åºçš„å…¨éƒ¨åŠŸèƒ½ã€‚ åœ¨æˆ‘çš„æ–‡ç« ä¸­ï¼Œæˆ‘å°†å°è¯•å¼¥è¡¥è¿™äº›ç¼ºç‚¹ï¼Œè®¨è®ºå†…éƒ¨è®¾å¤‡Buildbot'aå¹¶æä¾›ä¸€äº›éæ ‡å‡†è„šæœ¬çš„ç¤ºä¾‹ã€‚ <br><a name="habracut"></a><br><h3> å¸¸ç”¨è¯ </h3><br> å½“å‰ï¼Œæœ‰å¤§é‡çš„è¿ç»­é›†æˆç³»ç»Ÿï¼Œå…¶ä¸­ä¹‹ä¸€æ¶‰åŠåˆ°ä¸€ä¸ªç›¸å½“åˆä¹é€»è¾‘çš„é—®é¢˜ï¼Œå…¶ç²¾ç¥æ˜¯â€œå¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ª&lt;program_name&gt;å¹¶ä¸”æ¯ä¸ªäººéƒ½ä½¿ç”¨å®ƒï¼Œä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿâ€ æˆ‘å°†å°è¯•å›ç­”æœ‰å…³Buildbotçš„é—®é¢˜ã€‚ ä¸€äº›ä¿¡æ¯å°†ä¸ç°æœ‰æ–‡ç« é‡å¤ï¼Œä¸€äº›ä¿¡æ¯åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¿›è¡Œäº†æè¿°ï¼Œä½†è¿™å¯¹äºå™è¿°çš„ä¸€è‡´æ€§æ˜¯å¿…éœ€çš„ã€‚ <br><br> ä¸å…¶ä»–æŒç»­é›†æˆç³»ç»Ÿçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼ŒBuildbotæ˜¯ç”¨äºç¼–å†™ciçš„Pythonæ¡†æ¶ï¼Œè€Œä¸æ˜¯å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ è¿™æ„å‘³ç€ï¼Œä¸ºäº†å°†é¡¹ç›®è¿æ¥åˆ°Buildbotï¼Œå¿…é¡»é¦–å…ˆä½¿ç”¨Buildbotæ¡†æ¶ç¼–å†™ä¸€ä¸ªå•ç‹¬çš„pythonç¨‹åºï¼Œè¯¥ç¨‹åºå¯å®ç°é¡¹ç›®æ‰€éœ€çš„æŒç»­é›†æˆåŠŸèƒ½ã€‚ è¿™ç§æ–¹æ³•æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æ‚¨å®æ–½æ£˜æ‰‹çš„æµ‹è¯•æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆç”±äºæ¶æ„ä¸Šçš„é™åˆ¶è€Œå¯¹äºå¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸å¯èƒ½çš„ã€‚ <br><br> æ­¤å¤–ï¼ŒBuildbotä¸æ˜¯æœåŠ¡ï¼Œå› æ­¤æ‚¨å¿…é¡»è¯šå®åœ°å°†å…¶éƒ¨ç½²åœ¨åŸºç¡€æ¶æ„ä¸Šã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘æ³¨æ„åˆ°è¯¥æ¡†æ¶éå¸¸å¿ å®äºç³»ç»Ÿçš„èµ„æºã€‚ å½“ç„¶ä¸æ˜¯Cæˆ–C ++ï¼Œä½†æ˜¯pythonèƒœè¿‡äº†Javaç«äº‰å¯¹æ‰‹ã€‚ ä¾‹å¦‚ï¼Œåœ¨è¿™é‡Œï¼Œå°†å†…å­˜æ¶ˆè€—ä¸GoCDè¿›è¡Œæ¯”è¾ƒï¼ˆæ˜¯çš„ï¼Œå°½ç®¡åç§°å¦‚æ­¤ï¼Œè¿™æ˜¯ä¸€ä¸ªJavaç³»ç»Ÿï¼‰ï¼š <br><br>  Buildbotï¼š <br><br><img src="https://habrastorage.org/webt/q1/tg/wu/q1tgwuy-ef8bl6au-s7lc07da-c.png"><br><br>  GoCDï¼š <br><br><img src="https://habrastorage.org/webt/lg/ci/bk/lgcibk9si78bjzf_gfqrgktcgug.png"><br><br> æ‚¨è‡ªå·±éƒ¨ç½²å’Œç¼–å†™å•ç‹¬çš„æµ‹è¯•ç¨‹åºä¼šä½¿æ‚¨å¯¹åˆå§‹è®¾ç½®æ„Ÿåˆ°éš¾è¿‡ã€‚ ä½†æ˜¯ï¼Œå¤§é‡çš„å†…ç½®ç±»å¤§å¤§ç®€åŒ–äº†è„šæœ¬ç¼–å†™ã€‚ è¿™äº›ç±»æ¶µç›–äº†è®¸å¤šæ ‡å‡†æ“ä½œï¼Œæ— è®ºæ˜¯ä»githubå­˜å‚¨åº“è·å–æ›´æ”¹è¿˜æ˜¯ä½¿ç”¨CMakeæ„å»ºé¡¹ç›®ã€‚ ç»“æœï¼Œå¯¹äºæŸäº›travis-ciï¼Œç”¨äºå°å‹é¡¹ç›®çš„æ ‡å‡†è„šæœ¬ä¸ä¼šæ¯”YMLæ–‡ä»¶å¤æ‚ã€‚ æˆ‘ä¸ä¼šå†™æœ‰å…³éƒ¨ç½²çš„å†…å®¹ï¼Œç°æœ‰æ–‡ç« ä¸­å¯¹æ­¤è¿›è¡Œäº†è¯¦ç»†ä»‹ç»ï¼Œå¹¶ä¸”é‚£é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¤æ‚çš„å†…å®¹ã€‚ <br><br> æˆ‘æ³¨æ„åˆ°Buildbotçš„ä¸‹ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæµ‹è¯•é€»è¾‘æ˜¯åœ¨ciæœåŠ¡å™¨ä¸€ä¾§å®ç°çš„ã€‚ è¿™ä¸ç°åœ¨æµè¡Œçš„â€œæµæ°´çº¿ä½œä¸ºä»£ç â€æ–¹æ³•èƒŒé“è€Œé©°ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œæµ‹è¯•é€»è¾‘ä¸é¡¹ç›®æºä»£ç ä¸€èµ·åœ¨å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶ï¼ˆå¦‚.travis.ymlï¼‰ä¸­æè¿°ï¼Œè€ŒciæœåŠ¡å™¨ä»…è¯»å–è¯¥æ–‡ä»¶å¹¶æ‰§è¡Œå®ƒè¯´ä»€ä¹ˆã€‚ åŒæ ·ï¼Œè¿™åªæ˜¯é»˜è®¤è¡Œä¸ºã€‚  Buildbotæ¡†æ¶çš„åŠŸèƒ½å…è®¸æ‚¨é€šè¿‡å°†æµ‹è¯•è„šæœ¬å­˜å‚¨åœ¨èµ„æºåº“ä¸­æ¥å®ç°æ‰€æè¿°çš„æ–¹æ³•ã€‚ ç”šè‡³è¿˜æœ‰ä¸€ä¸ªç°æˆçš„è§£å†³æ–¹æ¡ˆ-bb <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-travis</a> ï¼Œå®ƒè¯•å›¾ä»Buildbotå’Œtravis-ciä¸­è·å–æœ€å¤§æ”¶ç›Šã€‚ å¦å¤–ï¼Œåœ¨æœ¬æ–‡åé¢ï¼Œæˆ‘å°†æè¿°å¦‚ä½•è‡ªå·±å®ç°ç±»ä¼¼äºæ­¤è¡Œä¸ºçš„æ“ä½œã€‚ <br><br> é»˜è®¤æƒ…å†µä¸‹ï¼ŒBuildbotä¼šåœ¨æ¨é€æ—¶æ”¶é›†æ‰€æœ‰æäº¤ã€‚ è¿™ä¼¼ä¹æ˜¯ä¸€äº›å°çš„ä¸å¿…è¦åŠŸèƒ½ï¼Œä½†å¯¹æˆ‘è€Œè¨€ï¼Œå®ƒå·²æˆä¸ºä¸»è¦ä¼˜ç‚¹ä¹‹ä¸€ã€‚ è®¸å¤šæµè¡Œçš„å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆï¼ˆtravis-ciï¼Œgitlab-ciï¼‰æ ¹æœ¬æ²¡æœ‰æä¾›è¿™æ ·çš„æœºä¼šï¼Œä»…ä¸åˆ†æ”¯ä¸Šçš„æœ€åä¸€æ¬¡æäº¤ä¸€èµ·ä½¿ç”¨ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ‚¨å¸¸å¸¸ä¸å¾—ä¸é€‰æ‹©æäº¤ã€‚ è¿›è¡Œä¸èµ·ä½œç”¨çš„æäº¤å°†æ˜¯ä»¤äººä¸å¿«çš„ï¼Œç”±äºå®ƒæ˜¯ä¸ä¸Šé¢çš„ä¸€å †æäº¤ä¸€èµ·å¯åŠ¨çš„ï¼Œå› æ­¤æ„å»ºç³»ç»Ÿæœªå¯¹å…¶è¿›è¡Œæ£€æŸ¥ã€‚ å½“ç„¶ï¼Œåœ¨Buildbotä¸­ï¼Œæ‚¨åªèƒ½æ„å»ºæœ€åä¸€ä¸ªæäº¤ï¼Œè¿™æ˜¯é€šè¿‡ä»…è®¾ç½®ä¸€ä¸ªå‚æ•°æ¥å®Œæˆçš„ã€‚ <br><br> è¯¥æ¡†æ¶æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ–‡æ¡£ï¼Œè¯¦ç»†æè¿°äº†ä»é€šç”¨ä½“ç³»ç»“æ„åˆ°æ‰©å±•å†…ç½®ç±»çš„å‡†åˆ™çš„æ‰€æœ‰å†…å®¹ã€‚ ä½†æ˜¯ï¼Œå³ä½¿æœ‰äº†è¿™æ ·çš„æ–‡æ¡£ï¼Œæ‚¨ä¹Ÿå¯èƒ½å¿…é¡»æŸ¥çœ‹æºä»£ç ä¸­çš„æŸäº›å†…å®¹ã€‚ å®ƒå·²æ ¹æ®GPL v2è®¸å¯è¯å®Œå…¨å¼€æ”¾ï¼Œå¹¶ä¸”æ˜“äºé˜…è¯»ã€‚ ç¼ºç‚¹-è¯¥æ–‡æ¡£ä»…ä»¥è‹±è¯­æä¾›ï¼Œè€Œä¿„è¯­ä»…æä¾›å¾ˆå°‘çš„ç½‘ç»œä¿¡æ¯ã€‚ è¯¥å·¥å…·æ˜¨å¤©æ²¡æœ‰å‡ºç°ï¼Œå®ƒå€ŸåŠ©<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">python</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wireshark</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">LLVM</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®¸å¤šå…¶ä»–</a>çŸ¥åé¡¹ç›®è¿›è¡Œäº†ç»„è£…ã€‚ æ›´æ–°å³å°†å‘å¸ƒï¼Œè¯¥é¡¹ç›®å¾—åˆ°äº†è®¸å¤šå¼€å‘äººå‘˜çš„æ”¯æŒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è°ˆè®ºå¯é æ€§å’Œç¨³å®šæ€§ã€‚ <br><br><img src="https://habrastorage.org/webt/22/we/zg/22wezgyvqnccjmk2sl_ehs954bg.png"><br>  <i><font color="#aaaaaa">ï¼ˆPython Buildbotä¸»é¡µï¼‰</font></i> <br><br><h3> å®šç† </h3><br> è¿™éƒ¨åˆ†å®è´¨ä¸Šæ˜¯æœ‰å…³æ¡†æ¶ä½“ç³»ç»“æ„çš„å®˜æ–¹æ–‡æ¡£è¿™ä¸€ç« çš„å…è´¹ç¿»è¯‘ã€‚ å®ƒæ˜¾ç¤ºäº†ä»ciç³»ç»Ÿæ¥æ”¶æ›´æ”¹åˆ°å°†ç»“æœé€šçŸ¥å‘é€ç»™ç”¨æˆ·çš„å®Œæ•´æ“ä½œé“¾ã€‚ å› æ­¤ï¼Œæ‚¨å¯¹é¡¹ç›®çš„æºä»£ç è¿›è¡Œäº†æ›´æ”¹ï¼Œå¹¶å°†å…¶å‘é€åˆ°è¿œç¨‹å­˜å‚¨åº“ã€‚ å›¾ç‰‡ä¸­ç¤ºæ„æ€§åœ°æ˜¾ç¤ºäº†æ¥ä¸‹æ¥å‘ç”Ÿçš„æƒ…å†µï¼š <br><br><img src="https://habrastorage.org/webt/hq/ue/na/hquenaedpe7hdlulfnmctiew2b8.png"><br>  <i><font color="#aaaaaa">ï¼ˆå›¾ç‰‡æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹æ–‡æ¡£</a> ï¼‰</font></i> <br><br> é¦–å…ˆï¼ŒBuildbotåº”è¯¥ä»¥æŸç§æ–¹å¼å‘ç°å­˜å‚¨åº“ä¸­å‘ç”Ÿäº†æ›´æ”¹ã€‚ æœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•-ç½‘ç»œé’©å­å’Œè½®è¯¢ï¼Œå°½ç®¡æ²¡æœ‰äººç¦æ­¢æå‡ºæ›´å¤æ‚çš„æ–¹æ³•ã€‚ åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œåœ¨Buildbotä¸­ï¼ŒBaseHookHandleråä»£ç±»å¯¹æ­¤è´Ÿè´£ã€‚ æœ‰è®¸å¤šç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚<i>GitHubHandler</i>æˆ–<i>GitoriusHandler</i> ã€‚ è¿™äº›ç±»ä¸­çš„å…³é”®æ–¹æ³•æ˜¯<b>getChangesï¼ˆï¼‰</b> ã€‚ å®ƒçš„é€»è¾‘éå¸¸ç®€å•ï¼šå®ƒå¿…é¡»å°†HTTPè¯·æ±‚è½¬æ¢ä¸ºæ›´æ”¹å¯¹è±¡åˆ—è¡¨ã€‚ <br><br> å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œæ‚¨éœ€è¦<i>PollingChangeSource</i>åä»£<i>ç±»</i> ã€‚ åŒæ ·ï¼Œè¿˜æœ‰ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚<i>GitPoller</i>æˆ–<i>HgPoller</i> ã€‚ å…³é”®æ–¹æ³•æ˜¯<b>pollï¼ˆï¼‰</b> ã€‚ å®ƒä»¥ä¸€å®šçš„é¢‘ç‡è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å¿…é¡»ä»¥æŸç§æ–¹å¼åœ¨å­˜å‚¨åº“ä¸­åˆ›å»ºæ›´æ”¹åˆ—è¡¨ã€‚ åœ¨gitçš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯å¯¹git fetchçš„è°ƒç”¨ä»¥åŠä¸å…ˆå‰ä¿å­˜çŠ¶æ€çš„æ¯”è¾ƒã€‚ å¦‚æœå†…ç½®åŠŸèƒ½ä¸å¤Ÿç”¨ï¼Œé‚£ä¹ˆåªéœ€åˆ›å»ºè‡ªå·±çš„ç»§æ‰¿è€…ç±»å¹¶é‡è½½è¯¥æ–¹æ³•å³å¯ã€‚ ä½¿ç”¨è½®è¯¢çš„ç¤ºä¾‹ï¼š <br><br><pre><code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = [changes.GitPoller( repourl = <span class="hljs-string"><span class="hljs-string">'git@git.example.com:project'</span></span>, project = <span class="hljs-string"><span class="hljs-string">'My Project'</span></span>, branches = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-comment"><span class="hljs-comment">#      pollInterval = 60 )]</span></span></code> </pre> <br>  Webhookæ›´åŠ æ˜“äºä½¿ç”¨ï¼Œä¸»è¦æ˜¯ä¸è¦å¿˜è®°åœ¨gitæœåŠ¡å™¨ç«¯å¯¹å…¶è¿›è¡Œé…ç½®ã€‚ è¿™åªæ˜¯é…ç½®æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼š <br><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'www'</span></span>][<span class="hljs-string"><span class="hljs-string">'change_hook_dialects'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'github'</span></span>: {} }</code> </pre> <br> ä¸‹ä¸€æ­¥ï¼Œå°†æ›´æ”¹å¯¹è±¡è¾“å…¥åˆ°è°ƒåº¦ç¨‹åºå¯¹è±¡ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">scheduler</a> ï¼‰ã€‚ å†…ç½®è°ƒåº¦ç¨‹åºçš„ç¤ºä¾‹ï¼š <i>AnyBranchScheduler</i> ï¼Œ <i>NightlyScheduler</i> ï¼Œ <i>ForceScheduler</i>ç­‰ã€‚ æ¯ä¸ªè°ƒåº¦ç¨‹åºéƒ½å°†æ‰€æœ‰æ›´æ”¹å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œä½†æ˜¯ä»…é€‰æ‹©é‚£äº›é€šè¿‡è¿‡æ»¤å™¨çš„æ›´æ”¹å¯¹è±¡ã€‚ è¿‡æ»¤å™¨é€šè¿‡<i>change_filter</i>å‚æ•°ä¼ é€’åˆ°æ„é€ å‡½æ•°ä¸­çš„è°ƒåº¦ç¨‹åºã€‚ åœ¨è¾“å‡ºä¸­ï¼Œè®¡åˆ’è€…åˆ›å»ºæ„å»ºè¯·æ±‚ã€‚ è°ƒåº¦ç¨‹åºæ ¹æ®builderså‚æ•°é€‰æ‹©æ„å»ºå™¨ã€‚ <br><br> ä¸€äº›è®¡åˆ’è€…æœ‰ä¸€ä¸ªæ£˜æ‰‹çš„å‚æ•°ï¼Œç§°ä¸º<i>treeStableTimer</i> ã€‚ å®ƒçš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼šæ”¶åˆ°æ›´æ”¹åï¼Œè°ƒåº¦ç¨‹åºä¸ä¼šç«‹å³åˆ›å»ºæ–°çš„æ„å»ºè¯·æ±‚ï¼Œè€Œæ˜¯ä¼šå¯åŠ¨è®¡æ—¶å™¨ã€‚ å¦‚æœæ–°çš„æ›´æ”¹åˆ°è¾¾å¹¶ä¸”è®¡æ—¶å™¨å°šæœªåˆ°æœŸï¼Œåˆ™å°†æ—§çš„æ›´æ”¹æ›¿æ¢ä¸ºæ–°çš„æ›´æ”¹ï¼Œå¹¶æ›´æ–°è®¡æ—¶å™¨ã€‚ è®¡æ—¶å™¨ç»“æŸæ—¶ï¼Œè°ƒåº¦ç¨‹åºä»…æ ¹æ®ä¸Šä¸€æ¬¡ä¿å­˜çš„æ›´æ”¹åˆ›å»ºä¸€ä¸ªæ„å»ºè¯·æ±‚ã€‚ <br><br> å› æ­¤ï¼Œå®ç°äº†åœ¨æ¨é€æ—¶ä»…ç»„è£…æœ€åæäº¤çš„é€»è¾‘ã€‚ è°ƒåº¦ç¨‹åºé…ç½®ç¤ºä¾‹ï¼š <br><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [schedulers.AnyBranchScheduler( name = <span class="hljs-string"><span class="hljs-string">'My Scheduler'</span></span>, treeStableTimer = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, change_filter = util.ChangeFilter(project = <span class="hljs-string"><span class="hljs-string">'My Project'</span></span>), builderNames = [<span class="hljs-string"><span class="hljs-string">'My Builder'</span></span>] )]</code> </pre> <br> æ„å»ºè¯·æ±‚ï¼ˆæ— è®ºå¬èµ·æ¥æœ‰å¤šå¥‡æ€ªï¼‰éƒ½è¿›å…¥æ„å»ºå™¨çš„è¾“å…¥ã€‚ æ”¶é›†å™¨çš„ä»»åŠ¡æ˜¯åœ¨å¯è®¿é—®çš„â€œå·¥äººâ€ä¸Šè¿è¡Œè£…é…ã€‚  Workeræ˜¯ä¸€ä¸ªæ„å»ºç¯å¢ƒï¼Œä¾‹å¦‚Stretch64æˆ–ubuntu1804x64ã€‚ å·¥äººåˆ—è¡¨é€šè¿‡<i>worker</i>å‚æ•°ä¼ é€’ã€‚ åˆ—è¡¨ä¸­çš„æ‰€æœ‰å·¥ä½œç¨‹åºéƒ½åº”è¯¥ç›¸åŒï¼ˆå³åç§°è‡ªç„¶ä¸åŒï¼Œä½†å†…éƒ¨ç¯å¢ƒç›¸åŒï¼‰ï¼Œå› ä¸ºæ”¶é›†å™¨å¯ä»¥è‡ªç”±é€‰æ‹©ä»»ä½•å¯ç”¨çš„å·¥ä½œç¨‹åºã€‚ åœ¨æ­¤å¤„è®¾ç½®å¤šä¸ªå€¼å¯ä»¥å¹³è¡¡è´Ÿè½½ï¼Œè€Œä¸æ˜¯åœ¨ä¸åŒçš„ç¯å¢ƒä¸­æ„å»ºã€‚ ä½¿ç”¨<i>factor</i> yå‚æ•°ï¼Œæ”¶é›†å™¨å°†æ¥æ”¶åˆ°ä¸€ç³»åˆ—æ­¥éª¤ä»¥æ„å»ºé¡¹ç›®ã€‚ æˆ‘å°†åœ¨ä¸‹é¢è¯¦ç»†ä»‹ç»ã€‚ <br><br> é…ç½®æ”¶é›†å™¨çš„ç¤ºä¾‹ï¼š <br><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [util.BuilderConfig( name = <span class="hljs-string"><span class="hljs-string">'My Builder'</span></span>, workernames = [<span class="hljs-string"><span class="hljs-string">'stretch32'</span></span>], factory = factory )]</code> </pre> <br> è‡³æ­¤ï¼Œé¡¹ç›®å‡†å¤‡å°±ç»ªã€‚  Buildbotçš„æœ€åä¸€æ­¥æ˜¯é€šçŸ¥æ„å»ºã€‚ è®°è€…ç­å¯¹æ­¤è´Ÿè´£ã€‚ ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ˜¯<i>MailNotifier</i>ç±»ï¼Œè¯¥ç±»å‘é€å¸¦æœ‰æ„å»ºç»“æœçš„ç”µå­é‚®ä»¶ã€‚  <i>MailNotifier</i>è¿æ¥<i>ç¤ºä¾‹</i> ï¼š <br><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [reporters.MailNotifier( fromaddr = <span class="hljs-string"><span class="hljs-string">'buildbot@example.com'</span></span>, relayhost = <span class="hljs-string"><span class="hljs-string">'mail.example.com'</span></span>, smtpPort = <span class="hljs-number"><span class="hljs-number">25</span></span>, extraRecipients = [<span class="hljs-string"><span class="hljs-string">'devel@example.com'</span></span>], sendToInterestedUsers = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> )]</code> </pre> <br> å¥½äº†ï¼Œæ˜¯æ—¶å€™ç»§ç»­ä»‹ç»å®Œæ•´çš„ç¤ºä¾‹äº†ã€‚ æˆ‘æ³¨æ„åˆ°Buildbotæœ¬èº«æ˜¯ä½¿ç”¨Twistedæ¡†æ¶ç¼–å†™çš„ï¼Œå› æ­¤å¯¹å®ƒçš„ç†Ÿæ‚‰å°†å¤§å¤§æœ‰åŠ©äºBuildbotè„šæœ¬çš„ç¼–å†™å’Œç†è§£ã€‚ æˆ‘ä»¬å°†ä¸ºä¸€ä¸ªåä¸ºPet Projectçš„é¡¹ç›®æ‰“ä¸ªé­å­ã€‚ è®©å®ƒç”¨C ++ç¼–å†™ï¼Œä½¿ç”¨CMakeç»„è£…ï¼Œæºä»£ç ä½äºgitå­˜å‚¨åº“ä¸­ã€‚ æˆ‘ä»¬ä¸å¤ªæ‡’æƒ°ï¼Œä¸ºä»–ç¼–å†™äº†ç”±ctestå›¢é˜Ÿè¿è¡Œçš„æµ‹è¯•ã€‚ æœ€è¿‘ï¼Œæˆ‘ä»¬é˜…è¯»äº†è¿™ç¯‡æ–‡ç« ï¼Œå¹¶æ„è¯†åˆ°æˆ‘ä»¬å¸Œæœ›å°†æ–°è·å¾—çš„çŸ¥è¯†åº”ç”¨äºæˆ‘ä»¬çš„é¡¹ç›®ã€‚ <br><br><h3> ç¤ºä¾‹ä¸€ï¼šä½¿å…¶æ­£å¸¸å·¥ä½œ </h3><br> å®é™…ä¸Šï¼Œé…ç½®æ–‡ä»¶ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">100è¡Œpythonä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-comment"><span class="hljs-comment"># shortcut c = BuildmasterConfig = {} # create workers c['workers'] = [worker.Worker('stretch32', 'example_password')] # general settings c['title'] = 'Buildbot: test' c['titleURL'] = 'https://buildbot.example.com/' c['buildbotURL'] = 'https://buildbot.example.com/' # setup database c['db'] = { 'db_url': 'sqlite:///state.sqlite' } # port to communicate with workers c['protocols'] = { 'pb': { 'port': 9989 } } # make buildbot developers a little bit happier c['buildbotNetUsageData'] = 'basic' # webserver setup c['www'] = dict(plugins = dict(waterfall_view={}, console_view={}, grid_view={})) c['www']['authz'] = util.Authz( allowRules = [util.AnyEndpointMatcher(role = 'admins')], roleMatchers = [util.RolesFromUsername(roles = ['admins'], usernames = ['root'])] ) c['www']['auth'] = util.UserPasswordAuth([('root', 'root_password')]) # mail notification c['services'] = [reporters.MailNotifier( fromaddr = 'buildbot@example.com', relayhost = 'mail.example.com', smtpPort = 25, extraRecipients = ['devel@example.com'], sendToInterestedUsers = False )] c['change_source'] = [changes.GitPoller( repourl = 'git@git.example.com:pet-project', project = 'Pet Project', branches = True, pollInterval = 60 )] c['schedulers'] = [schedulers.AnyBranchScheduler( name = 'Pet Project Scheduler', treeStableTimer = None, change_filter = util.ChangeFilter(project = 'Pet Project'), builderNames = ['Pet Project Builder'] )] factory = util.BuildFactory() factory.addStep(steps.Git( repourl = util.Property('repository'), workdir = 'sources', haltOnFailure = True, submodules = True, progress = True) ) factory.addStep(steps.ShellSequence( name = 'create builddir', haltOnFailure = True, hideStepIf = lambda results, s: results == util.SUCCESS, commands = [ util.ShellArg(command = ['rm', '-rf', 'build']), util.ShellArg(command = ['mkdir', 'build']) ]) ) factory.addStep(steps.CMake( workdir = 'build', path = '../sources', haltOnFailure = True) ) factory.addStep(steps.Compile( name = 'build project', workdir = 'build', haltOnFailure = True, warnOnWarnings = True, command = ['make']) ) factory.addStep(steps.ShellCommand( name = 'run tests', workdir = 'build', haltOnFailure = True, command = ['ctest']) ) c['builders'] = [util.BuilderConfig( name = 'Pet Project Builder', workernames = ['stretch32'], factory = factory )]</span></span></code> </pre> <br></div></div><br> é€šè¿‡ç¼–å†™è¿™äº›è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨é€åˆ°å­˜å‚¨åº“æ—¶è‡ªåŠ¨ç»„è£…ï¼Œæ¼‚äº®çš„ç½‘ç»œå¤–è§‚ï¼Œç”µå­é‚®ä»¶é€šçŸ¥ä»¥åŠä»»ä½•è‡ªé‡ciçš„å…¶ä»–å±æ€§ã€‚ å…¶ä¸­çš„å¤§éƒ¨åˆ†åº”è¯¥å¾ˆæ¸…æ¥šï¼šè°ƒåº¦ç¨‹åºï¼Œæ”¶é›†å™¨å’Œå…¶ä»–å¯¹è±¡çš„è®¾ç½®ä¸å‰é¢ç»™å‡ºçš„ç¤ºä¾‹ç›¸ä¼¼ï¼Œå¤§å¤šæ•°å‚æ•°çš„å€¼éƒ½å¾ˆç›´è§‚ã€‚ è¯¦ç»†åœ°è¯´ï¼Œæˆ‘å°†åªä¸“æ³¨äºåˆ›å»ºå·¥å‚ï¼Œè¿™æ˜¯æˆ‘ä¹‹å‰æ‰¿è¯ºè¦åšçš„ã€‚ <br><br> å·¥å‚ç”±Buildbotå¿…é¡»ä¸ºé¡¹ç›®å®Œæˆçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ„å»ºæ­¥éª¤</a>ç»„æˆã€‚ ä¸å…¶ä»–ç±»ä¸€æ ·ï¼Œæœ‰è®¸å¤šç°æˆçš„è§£å†³æ–¹æ¡ˆã€‚ æˆ‘ä»¬çš„å·¥å‚åŒ…æ‹¬äº”ä¸ªæ­¥éª¤ã€‚ é€šå¸¸ï¼Œç¬¬ä¸€æ­¥æ˜¯è·å–å­˜å‚¨åº“çš„å½“å‰çŠ¶æ€ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸ä¼šä¾‹å¤–ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ‡å‡†çš„<i>Git</i>ç±»ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç¬¬ä¸€æ­¥</b> <div class="spoiler_text"><pre> <code class="python hljs">factory = util.BuildFactory() factory.addStep(steps.Git( repourl = util.Property(<span class="hljs-string"><span class="hljs-string">'repository'</span></span>), workdir = <span class="hljs-string"><span class="hljs-string">'sources'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, submodules = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, progress = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) )</code> </pre> <br></div></div><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå°†åœ¨å…¶ä¸­ç»„è£…é¡¹ç›®-æˆ‘ä»¬å°†å®Œå…¨åˆ©ç”¨æºä»£ç è¿›è¡Œæ„å»ºã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œæ‚¨å¿…é¡»è®°ä½åˆ é™¤è¯¥ç›®å½•ï¼ˆå¦‚æœå·²ç»å­˜åœ¨ï¼‰ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ã€‚  <i>ShellSequence</i>ç±»å°†å¸®åŠ©æˆ‘ä»¬ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç¬¬äºŒæ­¥</b> <div class="spoiler_text"><pre> <code class="python hljs">factory.addStep(steps.ShellSequence( name = <span class="hljs-string"><span class="hljs-string">'create builddir'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, hideStepIf = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> results, s: results == util.SUCCESS, commands = [ util.ShellArg(command = [<span class="hljs-string"><span class="hljs-string">'rm'</span></span>, <span class="hljs-string"><span class="hljs-string">'-rf'</span></span>, <span class="hljs-string"><span class="hljs-string">'build'</span></span>]), util.ShellArg(command = [<span class="hljs-string"><span class="hljs-string">'mkdir'</span></span>, <span class="hljs-string"><span class="hljs-string">'build'</span></span>]) ]) )</code> </pre> <br></div></div><br> ç°åœ¨æ‚¨éœ€è¦å¯åŠ¨CMakeã€‚ ä¸ºæ­¤ï¼Œä½¿ç”¨ä¸¤ä¸ªç±»ä¹‹ä¸€ï¼ˆ <i>ShellCommand</i>æˆ–<i>CMakeï¼‰</i>æ˜¯åˆä¹é€»è¾‘çš„ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨åè€…ï¼Œä½†åŒºåˆ«å¾ˆå°ï¼šå®ƒæ˜¯ç¬¬ä¸€ä¸ªç±»çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç®€å•åŒ…è£…</a> ï¼Œä½¿ä¼ é€’ç‰¹å®šäºCMakeçš„å‚æ•°æ›´åŠ æ–¹ä¾¿ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ç¬¬ä¸‰æ­¥</b> <div class="spoiler_text"><pre> <code class="python hljs">factory.addStep(steps.CMake( workdir = <span class="hljs-string"><span class="hljs-string">'build'</span></span>, path = <span class="hljs-string"><span class="hljs-string">'../sources'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) )</code> </pre> <br></div></div><br> æ˜¯æ—¶å€™ç¼–è¯‘é¡¹ç›®äº†ã€‚ ä¸å‰é¢çš„æƒ…å†µä¸€æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<i>ShellCommand</i> ã€‚ åŒæ ·ï¼Œè¿˜æœ‰<i>Compile</i>ç±»ï¼Œå®ƒæ˜¯<i>ShellCommand</i>çš„åŒ…è£…å™¨ã€‚ ä½†æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„åŒ…è£…å™¨ï¼š <i>Compile</i>ç±»åœ¨ç¼–è¯‘æœŸé—´ç›‘è§†è­¦å‘Šï¼Œå¹¶å°†è­¦å‘Šå‡†ç¡®åœ°æ˜¾ç¤ºåœ¨å•ç‹¬çš„æ—¥å¿—ä¸­ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å°†ä½¿ç”¨<i>Compile</i>ç±»çš„åŸå› ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç¬¬å››æ­¥</b> <div class="spoiler_text"><pre> <code class="python hljs">factory.addStep(steps.Compile( name = <span class="hljs-string"><span class="hljs-string">'build project'</span></span>, workdir = <span class="hljs-string"><span class="hljs-string">'build'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, warnOnWarnings = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, command = [<span class="hljs-string"><span class="hljs-string">'make'</span></span>]) )</code> </pre> <br></div></div><br> æœ€åï¼Œè¿è¡Œæˆ‘ä»¬çš„æµ‹è¯•ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‰é¢æåˆ°çš„<i>ShellCommand</i>ç±»ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç¬¬äº”æ­¥</b> <div class="spoiler_text"><pre> <code class="python hljs">factory.addStep(steps.ShellCommand( name = <span class="hljs-string"><span class="hljs-string">'run tests'</span></span>, workdir = <span class="hljs-string"><span class="hljs-string">'build'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, command = [<span class="hljs-string"><span class="hljs-string">'ctest'</span></span>]) )</code> </pre> <br></div></div><br><h3> ä¾‹å­äºŒï¼šç®¡é“ä½œä¸ºä»£ç  </h3><br> åœ¨è¿™é‡Œï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•å®ç°é¢„ç®—é€‰é¡¹ä»¥å°†æµ‹è¯•é€»è¾‘ä¸é¡¹ç›®æºä»£ç ä¸€èµ·å­˜å‚¨ï¼Œè€Œä¸æ˜¯åœ¨ci-serveré…ç½®æ–‡ä»¶ä¸­ã€‚ ä¸ºæ­¤ï¼Œè¯·å°†<i>.buildbot</i>æ–‡ä»¶ä¸ä»£ç ä¸€èµ·æ”¾å…¥å­˜å‚¨åº“ä¸­ï¼Œå…¶ä¸­æ¯è¡ŒåŒ…å«å•è¯ï¼Œç¬¬ä¸€è¡Œè§£é‡Šä¸ºè¦æ‰§è¡Œçš„å‘½ä»¤çš„ç›®å½•ï¼Œå…¶ä½™è§£é‡Šä¸ºå¸¦æœ‰å‚æ•°çš„å‘½ä»¤ã€‚ å¯¹äºæˆ‘ä»¬çš„å® ç‰©é¡¹ç›®ï¼Œ <i>.buildbot</i>æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><div class="spoiler">  <b class="spoiler_title">.buildbotæ–‡ä»¶ä¸å‘½ä»¤</b> <div class="spoiler_text"> <code>. rm -rf build <br> . mkdir build <br> build cmake ../sources <br> build make <br> build ctest</code> <br> </div></div><br> ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹Buildboté…ç½®æ–‡ä»¶ã€‚ è¦åˆ†æ<i>.buildbot</i>æ–‡ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¼–å†™è‡ªå·±çš„æ­¥éª¤çš„ç±»ã€‚ æ­¤æ­¥éª¤å°†è¯»å–<i>.buildbot</i>æ–‡ä»¶ï¼Œç„¶åä¸ºæ¯ä¸€è¡Œæ·»åŠ å¸¦æœ‰å¿…è¦å‚æ•°çš„<i>ShellCommand</i>æ­¥éª¤ã€‚ ä¸ºäº†åŠ¨æ€æ·»åŠ æ­¥éª¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<b>build.addStepsAfterCurrentStepï¼ˆï¼‰</b>æ–¹æ³•ã€‚ çœ‹èµ·æ¥ä¸€ç‚¹ä¹Ÿä¸å¯æ€•ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç±»åˆ†ææ­¥éª¤</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnalyseStep</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(ShellMixin, BuildStep)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, workdir, **kwargs)</span></span></span><span class="hljs-function">:</span></span> kwargs = self.setupShellMixin(kwargs, prohibitArgs = [<span class="hljs-string"><span class="hljs-string">'command'</span></span>, <span class="hljs-string"><span class="hljs-string">'workdir'</span></span>, <span class="hljs-string"><span class="hljs-string">'want_stdout'</span></span>]) BuildStep.__init__(self, **kwargs) self.workdir = workdir @defer.inlineCallbacks <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.stdio_log = <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> self.addLog(<span class="hljs-string"><span class="hljs-string">'stdio'</span></span>) cmd = RemoteShellCommand( command = [<span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'.buildbot'</span></span>], workdir = self.workdir, want_stdout = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, want_stderr = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, collectStdout = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ) cmd.useLog(self.stdio_log) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> self.runCommand(cmd) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cmd.didFail(): defer.returnValue(util.FAILURE) results = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cmd.stdout.splitlines(): lst = row.split() dirname = lst.pop(<span class="hljs-number"><span class="hljs-number">0</span></span>) results.append(steps.ShellCommand( name = lst[<span class="hljs-number"><span class="hljs-number">0</span></span>], command = lst, workdir = dirname ) ) self.build.addStepsAfterCurrentStep(results) defer.returnValue(util.SUCCESS)</code> </pre> <br></div></div><br> é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæ”¶é›†å™¨çš„å·¥å‚å˜å¾—æ›´åŠ ç®€å•å’Œé€šç”¨ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">å·¥å‚åˆ†æ.buildbotæ–‡ä»¶</b> <div class="spoiler_text"><pre> <code class="python hljs">factory = util.BuildFactory() factory.addStep(steps.Git( repourl = util.Property(<span class="hljs-string"><span class="hljs-string">'repository'</span></span>), workdir = <span class="hljs-string"><span class="hljs-string">'sources'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, submodules = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, progress = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, mode = <span class="hljs-string"><span class="hljs-string">'incremental'</span></span>) ) factory.addStep(AnalyseStep( name = <span class="hljs-string"><span class="hljs-string">'Analyse .buildbot file'</span></span>, workdir = <span class="hljs-string"><span class="hljs-string">'sources'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, hideStepIf = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> results, s: results == util.SUCCESS) )</code> </pre> <br></div></div><br><h3> ç¤ºä¾‹ä¸‰ï¼šä»¥å·¥äººä¸ºä»£ç  </h3><br> ç°åœ¨æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨é¡¹ç›®ä»£ç æ—è¾¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¡®å®šå‘½ä»¤é¡ºåºï¼Œè€Œæ˜¯ç¡®å®šç¨‹åºé›†çš„ç¯å¢ƒã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰å·¥äººã€‚  <i>.buildbot</i>æ–‡ä»¶å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">.buildbotç¯å¢ƒæ–‡ä»¶</b> <div class="spoiler_text"> <code>{ <br> "workers": ["stretch32", "wheezy32"] <br> }</code> <br> </div></div><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒBuildboté…ç½®æ–‡ä»¶å°†å˜å¾—æ›´åŠ å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å°†ä¸åŒç¯å¢ƒä¸Šçš„ç¨‹åºé›†äº’è¿ï¼ˆå¦‚æœè‡³å°‘ä¸€ä¸ªç¯å¢ƒå¤±è´¥ï¼Œåˆ™æ•´ä¸ªæäº¤éƒ½å°†è§†ä¸ºæ— æ•ˆï¼‰ã€‚ äºŒçº§å¸®åŠ©æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚ æˆ‘ä»¬å°†æœ‰ä¸€ä¸ªæœ¬åœ°å·¥ä½œç¨‹åºï¼Œè¯¥<i>ç¨‹åº</i>åˆ†æ<i>.buildbot</i>æ–‡ä»¶å¹¶åœ¨æ‰€éœ€å·¥ä½œç¨‹åºä¸Šè¿è¡Œæ„å»ºã€‚ é¦–å…ˆï¼Œå¦‚å‰é¢çš„ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬å°†ç¼–å†™åˆ†æ<i>.buildbot</i>æ–‡ä»¶çš„æ­¥éª¤ã€‚ è¦åœ¨ç‰¹å®šå·¥ä½œç¨‹åºä¸Šå¯åŠ¨ç¨‹åºé›†ï¼Œå°†ä½¿ç”¨â€œ <i>è§¦å‘â€</i>æ­¥éª¤ä¸­çš„æ†ç»‘åŒ…å’Œç‰¹æ®Šç±»å‹çš„<i>TriggerableScheduler</i>è°ƒåº¦ç¨‹åºã€‚ æˆ‘ä»¬çš„æ­¥éª¤å˜å¾—æœ‰äº›å¤æ‚ï¼Œä½†å¾ˆå®¹æ˜“ç†è§£ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç±»åˆ†ææ­¥éª¤</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnalyseStep</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(ShellMixin, BuildStep)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, workdir, **kwargs)</span></span></span><span class="hljs-function">:</span></span> kwargs = self.setupShellMixin(kwargs, prohibitArgs = [<span class="hljs-string"><span class="hljs-string">'command'</span></span>, <span class="hljs-string"><span class="hljs-string">'workdir'</span></span>, <span class="hljs-string"><span class="hljs-string">'want_stdout'</span></span>]) BuildStep.__init__(self, **kwargs) self.workdir = workdir @defer.inlineCallbacks <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_getWorkerList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> cmd = RemoteShellCommand( command = [<span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'.buildbot'</span></span>], workdir = self.workdir, want_stdout = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, want_stderr = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, collectStdout = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ) cmd.useLog(self.stdio_log) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> self.runCommand(cmd) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cmd.didFail(): defer.returnValue([]) <span class="hljs-comment"><span class="hljs-comment"># parse JSON try: payload = json.loads(cmd.stdout) workers = payload.get('workers', []) except json.decoder.JSONDecodeError as e: raise ValueError('Error loading JSON from .buildbot file: {}' .format(str(e))) defer.returnValue(workers) @defer.inlineCallbacks def run(self): self.stdio_log = yield self.addLog('stdio') try: workers = yield self._getWorkerList() except ValueError as e: yield self.stdio_log.addStdout(str(e)) defer.returnValue(util.FAILURE) results = [] for worker in workers: results.append(steps.Trigger( name = 'check on worker "{}"'.format(worker), schedulerNames = ['Pet Project ({}) Scheduler'.format(worker)], waitForFinish = True, haltOnFailure = True, warnOnWarnings = True, updateSourceStamp = False, alwaysUseLatest = False ) ) self.build.addStepsAfterCurrentStep(results) defer.returnValue(util.SUCCESS)</span></span></code> </pre> <br></div></div><br> æˆ‘ä»¬å°†å¯¹æœ¬åœ°å·¥äººä½¿ç”¨æ­¤æ­¥éª¤ã€‚ è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å·²å°†æ ‡ç­¾è®¾ç½®ä¸ºæˆ‘ä»¬çš„æ”¶é›†å™¨â€œ Pet Project Builderâ€ã€‚ æœ‰äº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥è¿‡æ»¤<i>MailNotifier</i> ï¼Œå‘Šè¯‰å®ƒåªåº”å°†ä¿¡ä»¶å‘é€ç»™æŸäº›æ”¶é›†è€…ã€‚ å¦‚æœæœªæ‰§è¡Œæ­¤è¿‡æ»¤ï¼Œåˆ™åœ¨ä¸¤ä¸ªç¯å¢ƒä¸­æ„å»ºæäº¤æ—¶ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°ä¸‰ä¸ªå­—æ¯ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ™®é€šæ”¶è—å®¶</b> <div class="spoiler_text"><pre> <code class="python hljs">factory = util.BuildFactory() factory.addStep(steps.Git( repourl = util.Property(<span class="hljs-string"><span class="hljs-string">'repository'</span></span>), workdir = <span class="hljs-string"><span class="hljs-string">'sources'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, submodules = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, progress = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, mode = <span class="hljs-string"><span class="hljs-string">'incremental'</span></span>) ) factory.addStep(AnalyseStep( name = <span class="hljs-string"><span class="hljs-string">'Analyse .buildbot file'</span></span>, workdir = <span class="hljs-string"><span class="hljs-string">'sources'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, hideStepIf = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> results, s: results == util.SUCCESS) ) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [util.BuilderConfig( name = <span class="hljs-string"><span class="hljs-string">'Pet Project Builder'</span></span>, tags = [<span class="hljs-string"><span class="hljs-string">'generic_builder'</span></span>], workernames = [<span class="hljs-string"><span class="hljs-string">'local'</span></span>], factory = factory )]</code> </pre> <br></div></div><br> æˆ‘ä»¬ä»ç„¶éœ€è¦ä¸ºæ‰€æœ‰å®é™…å·¥ä½œäººå‘˜æ·»åŠ æ”¶é›†å™¨å’Œç›¸åŒçš„Triggerable Schedulerï¼š <br><br><div class="spoiler">  <b class="spoiler_title">åˆé€‚ç¯å¢ƒä¸­çš„æ”¶è—å®¶</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> worker <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> allWorkers: c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.Triggerable( name = <span class="hljs-string"><span class="hljs-string">'Pet Project ({}) Scheduler'</span></span>.format(worker), builderNames = [<span class="hljs-string"><span class="hljs-string">'Pet Project ({}) Builder'</span></span>.format(worker)]) ) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append(util.BuilderConfig( name = <span class="hljs-string"><span class="hljs-string">'Pet Project ({}) Builder'</span></span>.format(worker), workernames = [worker], factory = specific_factory) )</code> </pre> <br></div></div><br><img src="https://habrastorage.org/webt/iq/_n/n4/iq_nn4nhvj07vcina32c2244o6a.png"><br>  <i><font color="#aaaaaa">ï¼ˆæˆ‘ä»¬çš„é¡¹ç›®åœ¨ä¸¤ç§ç¯å¢ƒä¸­çš„æ„å»ºé¡µé¢ï¼‰</font></i> <br><br><h3> ç¤ºä¾‹å››ï¼šæ¯å‡ æ¬¡æäº¤ä¸€ä¸ªå­—æ¯ </h3><br> å¦‚æœä½¿ç”¨ä¸Šè¿°ä»»ä½•ç¤ºä¾‹ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°ä¸€ä¸ªä¸æ„‰å¿«çš„åŠŸèƒ½ã€‚ ç”±äºæ¯æ¬¡æäº¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå­—æ¯ï¼Œå› æ­¤å½“æˆ‘ä»¬å‘åˆ†æ”¯æ¨é€20ä¸ªæ–°çš„æäº¤æ—¶ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°20ä¸ªå­—æ¯ã€‚ é¿å…å‡ºç°è¿™ç§æƒ…å†µï¼Œå°±åƒå‰é¢çš„ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬å°†æä¾›ä¸¤çº§å¸®åŠ©ã€‚ æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ç±»ä»¥è·å–æ›´æ”¹ã€‚ æˆ‘ä»¬å°†åªåˆ›å»ºä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºè®¸å¤šæ›´æ”¹å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡çš„å±æ€§å°†ä¼ è¾“æ‰€æœ‰æäº¤çš„åˆ—è¡¨ã€‚ æ€¥ç€å¯ä»¥è¿™æ ·åšï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç±»MultiGitHubHandler</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MultiGitHubHandler</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(GitHubHandler)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, request)</span></span></span><span class="hljs-function">:</span></span> new_changes = GitHubHandler.getChanges(self, request) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> new_changes: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ([], <span class="hljs-string"><span class="hljs-string">'git'</span></span>) change = new_changes[<span class="hljs-number"><span class="hljs-number">-1</span></span>] change[<span class="hljs-string"><span class="hljs-string">'revision'</span></span>] = <span class="hljs-string"><span class="hljs-string">'{}..{}'</span></span>.format( new_changes[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'revision'</span></span>], new_changes[<span class="hljs-number"><span class="hljs-number">-1</span></span>][<span class="hljs-string"><span class="hljs-string">'revision'</span></span>]) commits = [c[<span class="hljs-string"><span class="hljs-string">'revision'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> new_changes] change[<span class="hljs-string"><span class="hljs-string">'properties'</span></span>][<span class="hljs-string"><span class="hljs-string">'commits'</span></span>] = commits <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ([change], <span class="hljs-string"><span class="hljs-string">'git'</span></span>) c[<span class="hljs-string"><span class="hljs-string">'www'</span></span>][<span class="hljs-string"><span class="hljs-string">'change_hook_dialects'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'base'</span></span>: { <span class="hljs-string"><span class="hljs-string">'custom_class'</span></span>: MultiGitHubHandler } }</code> </pre> <br></div></div><br> è¦ä½¿ç”¨è¿™ç§å¼‚å¸¸çš„æ›´æ”¹å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±çš„ç‰¹æ®Šæ­¥éª¤ï¼Œè¯¥æ­¥éª¤åŠ¨æ€åˆ›å»ºæ”¶é›†ç‰¹å®šæäº¤çš„æ­¥éª¤ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç±»GenerateCommitSteps</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GenerateCommitSteps</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BuildStep)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> commits = self.getProperty(<span class="hljs-string"><span class="hljs-string">'commits'</span></span>) results = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> commit <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> commits: results.append(steps.Trigger( name = <span class="hljs-string"><span class="hljs-string">'Checking commit {}'</span></span>.format(commit), schedulerNames = [<span class="hljs-string"><span class="hljs-string">'Pet Project Commits Scheduler'</span></span>], waitForFinish = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, warnOnWarnings = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, sourceStamp = { <span class="hljs-string"><span class="hljs-string">'branch'</span></span>: util.Property(<span class="hljs-string"><span class="hljs-string">'branch'</span></span>), <span class="hljs-string"><span class="hljs-string">'revision'</span></span>: commit, <span class="hljs-string"><span class="hljs-string">'codebase'</span></span>: util.Property(<span class="hljs-string"><span class="hljs-string">'codebase'</span></span>), <span class="hljs-string"><span class="hljs-string">'repository'</span></span>: util.Property(<span class="hljs-string"><span class="hljs-string">'repository'</span></span>), <span class="hljs-string"><span class="hljs-string">'project'</span></span>: util.Property(<span class="hljs-string"><span class="hljs-string">'project'</span></span>) } ) ) self.build.addStepsAfterCurrentStep(results) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> util.SUCCESS</code> </pre> <br></div></div><br> æ·»åŠ æˆ‘ä»¬çš„å…¬å…±æ”¶é›†å™¨ï¼Œè¯¥æ”¶é›†å™¨ä»…æ¶‰åŠè¿è¡Œå•ä¸ªæäº¤çš„ç¨‹åºé›†ã€‚ åº”è¯¥å¯¹å®ƒè¿›è¡Œæ ‡è®°ï¼Œä»¥ä¾¿é€šè¿‡æ­¤æ ‡è®°æœ¬èº«è¿‡æ»¤å‘é€ä¿¡ä»¶çš„è¿‡ç¨‹ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">é€šç”¨é‚®ä»¶æå–ç¨‹åº</b> <div class="spoiler_text"><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [schedulers.AnyBranchScheduler( name = <span class="hljs-string"><span class="hljs-string">'Pet Project Branches Scheduler'</span></span>, treeStableTimer = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, change_filter = util.ChangeFilter(project = <span class="hljs-string"><span class="hljs-string">'Pet Project'</span></span>), builderNames = [<span class="hljs-string"><span class="hljs-string">'Pet Project Branches Builder'</span></span>] )] branches_factory = util.BuildFactory() branches_factory.addStep(GenerateCommitSteps( name = <span class="hljs-string"><span class="hljs-string">'Generate commit steps'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, hideStepIf = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> results, s: results == util.SUCCESS) ) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [util.BuilderConfig( name = <span class="hljs-string"><span class="hljs-string">'Pet Project Branches Builder'</span></span>, tags = [<span class="hljs-string"><span class="hljs-string">'branch_builder'</span></span>], workernames = [<span class="hljs-string"><span class="hljs-string">'local'</span></span>], factory = branches_factory )]</code> </pre> <br></div></div><br> ä»ç„¶ä»…æ·»åŠ å•ä¸ªæäº¤çš„æ”¶é›†å™¨ã€‚ æˆ‘ä»¬åªæ˜¯ä¸ä½¿ç”¨æ ‡ç­¾æ¥æ ‡è®°è¯¥æ”¶é›†å™¨ï¼Œå› æ­¤ä¸ä¼šä¸ºå…¶åˆ›å»ºå­—æ¯ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">é€šç”¨é‚®ä»¶æå–ç¨‹åº</b> <div class="spoiler_text"><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.Triggerable( name = <span class="hljs-string"><span class="hljs-string">'Pet Project Commits Scheduler'</span></span>, builderNames = [<span class="hljs-string"><span class="hljs-string">'Pet Project Commits Builder'</span></span>]) ) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append(util.BuilderConfig( name = <span class="hljs-string"><span class="hljs-string">'Pet Project Commits Builder'</span></span>, workernames = [<span class="hljs-string"><span class="hljs-string">'stretch32'</span></span>], factory = specific_factory) )</code> </pre> <br></div></div><br><h3> æœ€åçš„è¯ </h3><br> æœ¬æ–‡ç»ä¸ä¼šå–ä»£é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨å¯¹Buildbotæ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯é˜…è¯»å®ƒã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github</a>ä¸Šæä¾›äº†æ‰€æœ‰ç¤ºä¾‹çš„é…ç½®æ–‡ä»¶çš„å®Œæ•´ç‰ˆæœ¬ã€‚ ç›¸å…³é“¾æ¥ï¼Œæ‘˜è‡ªè¯¥æ–‡ç« çš„å¤§éƒ¨åˆ†ææ–™ï¼š <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹æ–‡ä»¶</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡¹ç›®æºä»£ç </a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439096/">https://habr.com/ru/post/zh-CN439096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439080/index.html">Yii2ä¸­éæ˜¾è€Œæ˜“è§çš„RabbitMQæˆ–ä¸ºä»€ä¹ˆRabbitMQä¸€æ¬¡å†™å…¥æ‰€æœ‰é˜Ÿåˆ—</a></li>
<li><a href="../zh-CN439082/index.html">å¸Œæœ›å·¥å‚æ¼«æ­¥</a></li>
<li><a href="../zh-CN439086/index.html">ANRçš„åŸå› ä»¥åŠå¦‚ä½•é¿å…</a></li>
<li><a href="../zh-CN439090/index.html">IBM5150ã€‚å„æ–­å¼€å§‹çš„åœ°æ–¹</a></li>
<li><a href="../zh-CN439094/index.html">ç§‘å­¦å®¶å‘ç°äº†åœ°çƒä¸Šæœ€å¤è€çš„è„Šæ¤åŠ¨ç‰©</a></li>
<li><a href="../zh-CN439098/index.html">Shat Memusï¼ŒChatfuelï¼šå’¨è¯¢åå¦‚ä½•å»ºç«‹äº§å“èŒä¸šï¼Œå†¥æƒ³æ˜¯å¦æœ‰å±é™©ä»¥åŠå¦‚ä½•æ”¹å˜è¡Œä¸º</a></li>
<li><a href="../zh-CN439100/index.html">å¦‚ä½•åœ¨æƒé™ä¸‹é€‚åº”UX / UI</a></li>
<li><a href="../zh-CN439102/index.html">ä¿„ç½—æ–¯äººé­å—äº’è”ç½‘ä¾®è¾±çš„å¯èƒ½æ€§å¢åŠ 20ï¼…</a></li>
<li><a href="../zh-CN439104/index.html">Redux ç®€å•å¦‚è€™</a></li>
<li><a href="../zh-CN439108/index.html">ä¸šä½™æ— çº¿ç”µæµ‹é‡ï¼šæ²¡æœ‰é¢‘ç‡è®¡æ—¶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>