<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ ๐จ๐ฝโ๐คโ๐จ๐ผ ๐ค ูุถุน ุงูููุฑุฏ ุงููุงุฆูุงุช ูู ROM ูุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ (C ++ ุจุงุณุชุฎุฏุงู ูุชุญูู Cortex M4 ููุซุงู) ๐จ ๐ฉ๐ฟโ๐ฌ ๐ช</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ููุงู ุณุงุจู ุ ุญูุซ ูุชู ุชุฎุฒูู ุงูุซูุงุจุช ุงูุฎุงุตุฉ ุจู ุนูู ูุชุญูู CortexM (ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู C ++ IAR ููุซุงู) ุ ุชูุช ููุงูุดุฉ ูุณุฃูุฉ ููููุฉ ูุถุน ูุงุฆูุงุช ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุถุน ุงูููุฑุฏ ุงููุงุฆูุงุช ูู ROM ูุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ (C ++ ุจุงุณุชุฎุฏุงู ูุชุญูู Cortex M4 ููุซุงู)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455477/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4e/6g/sw/4e6gswsjjz0liihmy5ptbivomuu.jpeg" alt="ุตูุฑุฉ"><br><br>  ูู ููุงู ุณุงุจู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญูุซ ูุชู ุชุฎุฒูู ุงูุซูุงุจุช ุงูุฎุงุตุฉ ุจู ุนูู ูุชุญูู CortexM (ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู C ++ IAR ููุซุงู)</a> ุ ุชูุช ููุงูุดุฉ ูุณุฃูุฉ ููููุฉ ูุถุน ูุงุฆูุงุช ุซุงุจุชุฉ ูู ROM.  ุงูุขู ุ ุฃุฑูุฏ ุฃู ุฃุฎุจุฑู ููู ููููู ุงุณุชุฎุฏุงู ููุท ุงููููุฏ ุงููุญูุฏ ูุฅูุดุงุก ูุงุฆูุงุช ูู ROM. <br><a name="habracut"></a><br><br><h3 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h3><br>  ููุฏ ูุชุจ ุงููุซูุฑ ุจุงููุนู ุนู ุณููุบูุชูู (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจุงุณู ุณููุบูุชูู) ุฌูุงูุจูุง ุงูุฅูุฌุงุจูุฉ ูุงูุณูุจูุฉ.  ูููู ุนูู ุงูุฑุบู ูู ุฃูุฌู ุงููุตูุฑ ููู ุ ูุฅูู ูุญุชูู ุนูู ุงููุซูุฑ ูู ุงูุฎุตุงุฆุต ุงููููุฏุฉ ุ ูุง ุณููุง ูู ุณูุงู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุฃุฌูุฒุฉ ูููุฑูููุชุฑููุฑ. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุจุฑูุงูุฌ ูุชุญูู ููุซูู ุ ูุง ููุตุญ ุจุฅูุดุงุก ุงููุงุฆูุงุช ุฏููุงูููููุง ุ ูุจุงูุชุงูู ููุณุช ููุงู ุญุงุฌุฉ ูุญุฐููุง.  ุบุงูุจูุง ูุง ูุชู ุฅูุดุงุก ุงููุงุฆูุงุช ูุฑุฉ ูุงุญุฏุฉ ูุชุนูุด ูู ูุญุธุฉ ุจุฏุก ุชุดุบูู ุงูุฌูุงุฒ ุ ุญุชู ูุชู ุฅููุงู ุชุดุบููู.  ูุฏ ูููู ูุซู ูุฐุง ุงููุงุฆู ุจูุซุงุจุฉ ูููุฐ ุ ุญูุซ ูุชู ุชูุตูู ูุคุดุฑ LED ุ ูุชู ุฅูุดุงุคู ูุฑุฉ ูุงุญุฏุฉ ุ ูุจุงูุชุฃููุฏ ูู ูุฐูุจ ุฅูู ุฃู ููุงู ุฃุซูุงุก ุชุดุบูู ุงูุชุทุจูู ุ ููู ุงููุงุถุญ ุฃูู ูููู ุฃู ูููู Singleton.  ุดุฎุต ูุง ูุฌุจ ุฃู ูุฎูู ูุซู ูุฐู ุงูุฃุดูุงุก ููููู ุฃู ูููู ุณููุฌูุชูู. <br><br>  ุณูู ูููุฑ ูู Singleton ุฃูุถูุง ุถูุงู ุนุฏู ุฅูุดุงุก ุงููุงุฆู ููุณู ุงูุฐู ูุตู ุฃุฑุฌู ุงููููุฐ ูุฑุชูู ุฅุฐุง ุชู ุงุณุชุฎุฏุงูู ูุฌุฃุฉ ูู ุนุฏุฉ ุฃูุงูู. <br><br>  ุขุฎุฑ ุ ูู ุฑุฃูู ุ ุฎุงุตูุฉ ุฑุงุฆุนุฉ ูุดุฑูุฉ Singleton ูู ุณูููุฉ ุงุณุชุฎุฏุงููุง.  ุนูู ุณุจูู ุงููุซุงู ุ ููุง ูู ุญุงูุฉ ูุนุงูุฌ ุงูููุงุทุนุฉ ุ ููุฌุฏ ูุซุงู ูู ููุงูุฉ ุงูููุงูุฉ.  ููู ุงูุขู ุ ุณูุชุนุงูู ูุน ุณููุฌูุชูู ููุณู. <br><br><h3 style=";text-align:right;direction:rtl">  ุณููุฌูุชูู ุฎูู ุงููุงุฆูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู </h3><br>  ุจุดูู ุนุงู ุ ููุฏ ุชู ุจุงููุนู ูุชุงุจุฉ ุงููุซูุฑ ูู ุงูููุงูุงุช ุนููุง ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Singleton (Loner) ุฃู ูุตู ุซุงุจุชุ</a>  ุ ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุซูุงุซุฉ ูู ุงูุนูุฑ ูู ููุท Singleton</a> .  ูุฐูู ุ ูู ุฃุฑูุฒ ุนูู ูุงููุฉ Singleton ูุฃุตู ูู ุงูุฎูุงุฑุงุช ุงูุนุฏูุฏุฉ ูุชูููุฐู.  ุจุฏูุงู ูู ุฐูู ุ ุณุฃุฑูุฒ ุนูู ุฎูุงุฑูู ูููู ุงุณุชุฎุฏุงูููุง ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ. <br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณุฃูุถุญ ุงููุฑู ุจูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุฌูุงุฒ ุงูุชุญูู ุงูุฏููู ุนู ุงููุนุชุงุฏ ูููุงุฐุง ุชุนุฏ ุจุนุถ ุงูุชุทุจููุงุช ุงููููุฑุฏุฉ ููุฐุง ุงูุจุฑูุงูุฌ "ุฃูุถู" ูู ุบูุฑูุง.  ุชุฃุชู ุจุนุถ ุงููุนุงููุฑ ูู ูุชุทูุจุงุช ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุ ูุจุนุถูุง ูุฃุชู ููุท ูู ุชุฌุฑุจุชู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุ ูุง ููุตุญ ุจุฅูุดุงุก ูุงุฆูุงุช ุจุดูู ุญููู </li><li style=";text-align:right;direction:rtl">  ุบุงูุจูุง ูุง ูุชู ุฅูุดุงุก ูุงุฆู ุซุงุจุช ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ููุง ูุชู ุฅุชูุงูู ูุทูููุง. </li><li style=";text-align:right;direction:rtl">  ุญุณููุง ุ ุฅุฐุง ูุงู ูููุน ุงููุงุฆู ูุนุฑูููุง ูู ูุฑุญูุฉ ุงูุชุฑุฌูุฉ </li></ul><br>  ุจูุงุกู ุนูู ูุฐู ุงูุงูุชุฑุงุถุงุช ุ ูุฅููุง ูุนุชุจุฑ ููุนูู ูู Singleton ูุน ูุงุฆูุงุช ุชู ุฅูุดุงุคูุง ุจุดูู ุซุงุจุช ุ ูุฑุจูุง ุงูุฃูุซุฑ ุดูุฑุฉ ูุดุงุฆุนุฉ ูู Meyers Singleton ุ ุจุงูููุงุณุจุฉ ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุฌุจ ุฃู ูููู ูุคุดุฑ ุงูุชุฑุงุจุท ุขูููุง ููููุง ููุนูุงุฑ C ++ ุ ูุฅู ุจุฑุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ููุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุชุฌุนูู ูุซู ูุฐุง (ุนูู ุณุจูู ุงููุซุงู ุ IAR) ุ ููุท ุนูุฏ ุชูููู ุงูุฎูุงุฑ ุงูุฎุงุต: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> T &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T instance ; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance ; } Singleton() = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; Singleton(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; } ;</code> </pre> <br>  ูุณุชุฎุฏู ุงูุชููุฆุฉ ุงููุชุฃุฎุฑุฉ ุ ุฃู  ูุง ุชุชู ุชููุฆุฉ ุงููุงุฆู ุฅูุง ูู ุงููุฑุฉ ุงูุฃููู ุงูุชู <code>GetInstance()</code> ุงุณุชุฏุนุงุก <code>GetInstance()</code> ุ ุงุนุชุจุฑ ุฐูู ุชููุฆุฉ ุฏููุงููููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   Timer1      auto&amp; objRef = Singleton&lt;Timer1&gt;::GetInstance(); //  ,      auto&amp; objRef1 = Singleton&lt;Timer1&gt;::GetInstance(); return 0; }</span></span></code> </pre> <br>  ู Singleton ุฏูู ุชุฃุฎูุฑ ุงูุชููุฆุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> T &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance ; } Singleton() = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; Singleton(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T instance ; <span class="hljs-comment"><span class="hljs-comment">//      } ;</span></span></code> </pre> <br>  ููุงููุง ููุดุฆ ูุงุฆูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ูุงููุฑู ูู ุฃูู ุจุงููุณุจุฉ ููุซุงูู ุ ูุญุฏุซ ุงูุชููุฆุฉ ููุฑ ุจุฏุก ุงูุจุฑูุงูุฌ ุ ููุชู ุชููุฆุฉ ุงูุฃูู ุนูู ุงูููุงููุฉ ุงูุฃููู. <br><br>  ููู ูููู ุงุณุชุฎุฏุงููุง ูู ุงูุญูุงุฉ ุงูุญููููุฉ.  ููููุง ููุชูุงููุฏ ุงููุฏููุฉ ุ ุณุฃุญุงูู ุฅุธูุงุฑ ุฐูู ุจุงุณุชุฎุฏุงู ูุซุงู LED.  ูุฐูู ุ ูููุชุฑุถ ุฃููุง ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ูุงุฆู ูู ุงููุฆุฉ <code>Led1</code> ุ ูุงูุฐู ูู ูู ุงููุงูุน ูุฌุฑุฏ ุงุณู ูุณุชุนุงุฑ ูููุฆุฉ <code>Pin&lt;PortA, 5&gt;</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> PortA = Port&lt;GpioaBaseAddr&gt; ; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Led1 = Pin&lt;PortA, <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; ; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> GreenLed = Pin&lt;PortA, <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; ; Led1 myLed ; <span class="hljs-comment"><span class="hljs-comment">//        RAM constexpr GreenLed greenLed ; //        ROM int main() { static GreenLed myGreenLed ; //     RAM Led1 led1; //     myGreenLed.Toggle(); led1.Toggle() ; }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุท ูู ุญุงูุฉ ุ ูุตูู Port ู Pin ุชุจุฏู ูุซู ูุฐุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> OdrAddrShift = <span class="hljs-number"><span class="hljs-number">20U</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> addr&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Port</span></span></span><span class="hljs-class"> {</span></span> __<span class="hljs-function"><span class="hljs-function">forceinline </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Toggle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bit)</span></span></span><span class="hljs-function"> </span></span>{ *<span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>*&gt;(addr ) ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; bit) ; } }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> pinNum&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pin</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// Singleton   ,     friend class Singleton&lt;Pin&gt; ; public: __forceinline inline void Toggle() const { T::Toggle(pinNum) ; } //  = const Pin &amp; operator=(const Pin &amp;) = delete ; private: // ,      constexpr Pin() {} ; //  ,      //   ,      constexpr Pin(const Pin &amp;) = default ; } ;</span></span></code> </pre> <br></div></div><br>  ูู ุงููุซุงู ุ ููุช ุจุฅูุดุงุก ูุง ูุตู ุฅูู 4 ูุงุฆูุงุช ูุฎุชููุฉ ูู ููุณ ุงูููุน ูู RAM ู ROM ุ ูุงูุชู ุชุนูู ูู ุงููุงูุน ูุน ููุณ ุฅุฎุฑุงุฌ ุงููููุฐ A. ููู ุฃูุฑ ุบูุฑ ุฌูุฏ ุฌุฏูุง ููุง: <br>  ุญุณููุง ุ ุฃูู ุดูุก ูู ุฃููู ูุณูุช ุฃู <code>GreenLed</code> ู <code>Led1</code> ููุง ููุณ ุงูููุน ูุฃูุดุฃุช ุงูุนุฏูุฏ ูู ุงููุงุฆูุงุช ุงููุชุทุงุจูุฉ ุงูุชู <code>GreenLed</code> ูุณุงุญุฉ ูู ุนูุงููู ูุฎุชููุฉ.  ูู ุงูุญูููุฉ ุ ููุฏ ูุณูุช ุฃููู ูุฏ ููุช ุจุงููุนู ุจุฅูุดุงุก ูุงุฆูุงุช ุนุงูููุฉ <code>Led1</code> ู <code>GreenLed</code> ุ ููุฐูู <code>GreenLed</code> ุจุฅูุดุงุฆูุง ูุญูููุง. <br><br>  ุซุงููุงู ุ ุงูุฅุนูุงู ุนู ุงููุงุฆูุงุช ุงูุนุงูููุฉ ุนููููุง ุบูุฑ ูุฑุญุจ ุจู ุ <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฑุดุงุฏุงุช ุงูุจุฑูุฌุฉ ูุชุญุณูู ุงููุชุฑุฌู ุฃูุถู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <i>ููุถู ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงููุญุฏุฉ ุงูููุทูุฉ ุงููุญููุฉ - ุงููุชุบูุฑุงุช ุงูุชู ุชู ุงูุฅุนูุงู ุนููุง ุซุงุจุชุฉ</i> <i><br></i>  <i>ุงููุชุบูุฑุงุช ุงูุนุงูููุฉ (ุบูุฑ ุณุงููุฉ).</i>  <i>ุชุฌูุจ ุฃูุถูุง ุชูุงูู ุนููุงู ุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ ุงูุชู ูุชู ุงููุตูู ุฅูููุง ุจุดูู ูุชูุฑุฑ.</i> <i><br></i> </div></div><br>  ูุงููุงุฆูุงุช ุงููุญููุฉ ูุชููุฑุฉ ููุท ูู ูุทุงู ุงูุฏุงูุฉ main (). <br><br>  ูุฐูู ุ ูุนูุฏ ูุชุงุจุฉ ูุฐุง ุงููุซุงู ุจุงุณุชุฎุฏุงู Singleton: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> PortA = Port&lt;GpioaBaseAddr&gt; ; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Led1 = Pin&lt;PortA, <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; ; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> GreenLed = Pin&lt;PortA, <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; ; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        GreenLed //   GreenLed&amp; myGreenLed = Singleton&lt;GreenLed&gt;::GetInstance(); //            Led1&amp; led1 = Singleton&lt;Led1&gt;::GetInstance(); myGreenLed.Toggle() ; led1.Toggle() ; //  , Singleton&lt;Led1&gt;::GetInstance().Toggle() }</span></span></code> </pre> <br>  ูู ูุฐู ุงูุญุงูุฉ ุ ุจุบุถ ุงููุธุฑ ุนู ูุง ุฃูุณู ุ ูุฅู ุฑูุงุจุทู ุณุชุดูุฑ ุฏุงุฆููุง ุฅูู ููุณ ุงููุงุฆู.  ูุฃุณุชุทูุน ุงูุญุตูู ุนูู ูุฐุง ุงูุฑุงุจุท ูู ุฃู ููุงู ูู ุงูุจุฑูุงูุฌ ุ ุจุฃู ุทุฑููุฉ ุ ุจูุง ูู ุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุฃุณููุจ ุงูุซุงุจุช ููุนุงูุฌ ุงูููุงุทุนุฉ ุ ูููู ุจุดูู ุฃูุจุฑ ุนูู ุฐูู ูุงุญููุง.  ูู ุงูุฅูุตุงู ุ ูุฌุจ ุฃู ุฃููู ุฃู ุงูููุฏ ูุง ููุนู ุดูุฆูุง ุ ููู ูุฎุชูู ุงูุฎุทุฃ ูู ููุทู ุงูุจุฑูุงูุฌ.  ุญุณููุง ุ ุญุณููุง ุ ุฏุนูุง ูุชุนุฑู ุนูู ุฃูู ูููู ุชู ุชุญุฏูุฏ ูููุน ูุฐุง ุงููุงุฆู ุงูุซุงุจุช ุงูุฐู ุฃูุดุฃู ุณููุฌูุชูู ุจุดูู ุนุงู ูููู ุชูุช ุชููุฆุชูุ <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุฆู ุซุงุจุช </h3><br>  ูุจู ูุนุฑูุฉ ุฐูู ุ ุณูููู ูู ุงูุฌูุฏ ุฃู ูููู ูุงููุฉ ุงููุงุฆู ุงูุซุงุจุช. <br><br>  ุฅุฐุง ููุช ุจุชุตุฑูุญ ุฃุนุถุงุก ุงููุตู ุจุงุณุชุฎุฏุงู ุงููููุฉ ุงูุฃุณุงุณูุฉ ุงูุซุงุจุชุฉ ุ ููุฐุง ูุนูู ุฃู ุฃุนุถุงุก ุงููุตู ููุณูุง ุจุจุณุงุทุฉ ูุฑุชุจุทูู ุจูุซููุงุช ุงููุตู ุ ููู ูุชุบูุฑุงุช ูุณุชููุฉ ูููููู ุงููุตูู ุฅูู ูุฐู ุงูุญููู ุฏูู ุฅูุดุงุก ูุงุฆู ูุฆุฉ.  ูุง ุดูุก ููุฏุฏ ุญูุงุชูู ูู ูุญุธุฉ ููุงุฏุชูู ุญุชู ูุชู ุฅุทูุงู ุงูุจุฑูุงูุฌ. <br><br>  ุนูุฏ ุงุณุชุฎุฏุงููุง ูู ุชุนุฑูู ูุงุฆู ุ ูุญุฏุฏ ุงููุญุฏุฏ ุงูุซุงุจุช ููุท ุนูุฑ ุงููุงุฆู.  ุจูุนูู ุชูุฑูุจู ุ ูุชู ุชุฎุตูุต ุฐุงูุฑุฉ ูุซู ูุฐุง ุงููุงุฆู ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุจุฑูุงูุฌ ูุชุญุฑูุฑู ุนูุฏ ุงูุชูุงุก ุงูุจุฑูุงูุฌ ุ ูุนูุฏูุง ูุจุฏุฃ ุ ุชุชู ุงูุชููุฆุฉ ุฃูุถูุง.  ุงูุงุณุชุซูุงุกุงุช ูู ููุท ูุงุฆูุงุช ุซุงุจุชุฉ ูุญููุฉ ุ ูุงูุชู ุ ุนูู ุงูุฑุบู ูู ุฃููุง "ุชููุช" ููุท ูู ููุงูุฉ ุงูุจุฑูุงูุฌ ุ "ุชูููุฏ" ุจุดูู ุฃุณุงุณู ุ ุฃู ุจุงูุฃุญุฑู ุ ุชุชู ุชููุฆุชูุง ูู ุฃูู ูุฑุฉ ุชูุฑ ูููุง ูู ุฎูุงู ุฅุนูุงููุง. <br><br><blockquote style=";text-align:right;direction:rtl">  ูุชู ุฅุฌุฑุงุก ุงูุชููุฆุฉ ุงูุฏููุงููููุฉ ูููุชุบูุฑ ุงููุญูู ูุน ุงูุชุฎุฒูู ุงูุซุงุจุช ูุฃูู ูุฑุฉ ูู ููุช ุงููุฑูุฑ ุงูุฃูู ูู ุฎูุงู ุฅุนูุงูู ุ  ูุชู ุงุนุชุจุงุฑ ุชููุฆุฉ ูุฐุง ุงููุชุบูุฑ ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุชููุฆุฉ.  ุฅุฐุง ูุฑุฑ ูุคุดุฑ ุชุฑุงุจุท ุฎูุงู ุฅุนูุงู ูุชุบูุฑ ูู ูุญุธุฉ ุงูุชููุฆุฉ ุงูุฎุงุตุฉ ุจู ุจูุงุณุทุฉ ูุคุดุฑ ุชุฑุงุจุท ุขุฎุฑ ุ ููุฌุจ ุนููู ุงูุงูุชุธุงุฑ ุญุชู ููุชูู ุงูุชููุฆุฉ. </blockquote><br>  ูู ุงูููุงููุงุช ุงูุชุงููุฉ ุ ูุง ูุญุฏุซ ุงูุชููุฆุฉ.  ูู ูุง ุณุจู ูููู ุงุฎุชุฒุงูู ุฅูู ุนุจุงุฑุฉ ุ <u>ูููู ุฃู ููุฌุฏ ูุซูู ูุงุญุฏ ููุท ููุงุฆู ุซุงุจุช.</u> <br><br>  ุชุคุฏู ูุฐู ุงูุตุนูุจุงุช ุฅูู ุญูููุฉ ุฃู ุงุณุชุฎุฏุงู ุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ ุงููุญููุฉ ูุงููุงุฆูุงุช ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุณูุคุฏู ุฅูู ุญูู ุฅุถุงูู.  ููููู ุงูุชุญูู ูู ุฐูู ุจูุซุงู ุจุณูุท: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test1</span></span></span><span class="hljs-class">{</span></span> Test1(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> value): j(value) {} <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j; } ; <span class="hljs-function"><span class="hljs-function">Test1 &amp;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Test1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> test; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++i) { foo().j ++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  ููุง ุ ูู ุงููุฑุฉ ุงูุฃููู ุงูุชู ูุชู ูููุง ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ <code>foo()</code> ุ ูุฌุจ ุนูู ุงููุญูู ุงูุจุฑูุฌู ุงูุชุญูู ูู ุฃูู ูู ูุชู ุจุนุฏ ุชููุฆุฉ ุงููุงุฆู ุงูุซุงุจุช ุงููุญูู <code>test1</code> ูุงุณุชุฏุนุงุก ูููุดุฆ ูุงุฆู <code>Test1(10)</code> ุ ููู ุงูุชูุฑูุฑุงุช ุงูุซุงููุฉ ูุงููุงุญูุฉ ุ ูุฌุจ ุงูุชุฃูุฏ ูู ุชููุฆุฉ ุงููุงุฆู ุจุงููุนู ูุชุฎุทู ูุฐู ุงูุฎุทูุฉ. ุงูุฐูุงุจ ูุจุงุดุฑุฉ <code>return test</code> . <br><br>  ููููุงู ุจุฐูู ุ ูููู ุงููุญูู ุงูุจุฑูุฌู ุจุจุณุงุทุฉ ุจุฅุถุงูุฉ ุนูุงูุฉ ุญูุงูุฉ ุฅุถุงููุฉ <code>foo()::static guard for test 0x00100004 0x1 Data Lc main.o</code> ูุฅุฏุฑุงุฌ ุฑูุฒ ุงูุชุญูู.  ูู ุฃูู ุฅุนูุงู ููุชุบูุฑ ุซุงุจุช ุ ูู ูุชู ุชุนููู ูุฐู ุงูุนูุงูุฉ ุงููุงููุฉ ุ ูุจุงูุชุงูู ูุฌุจ ุชููุฆุฉ ุงููุงุฆู ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุงูููุดุฆ ุ ุฎูุงู ุงูุชูุฑูุฑ ุงูุชุงูู ุ ุชู ุชุนููู ูุฐู ุงูุนูุงูุฉ ุจุงููุนู ุ ูุฐูู ูู ุชุนุฏ ููุงู ุญุงุฌุฉ ููุชููุฆุฉ ููู ูุชู ุชุฎุทู ุงุณุชุฏุนุงุก ุงูููุดุฆ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุณูุชู ุฅุฌุฑุงุก ูุฐุง ุงููุญุต ุจุดูู ูุณุชูุฑ ูู ุงูุญููุฉ. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/gb/aq/r1/gbaqr1fpbmihpghun28epsnvoou.png"></a> <br><br>  ูุฅุฐุง ููุช ุจุชูููู ุงูุฎูุงุฑ ุงูุฐู ูุถูู ูู ุงูุชููุฆุฉ ูู ุงูุชุทุจููุงุช ูุชุนุฏุฏุฉ ุงูุฎููุท ุ ูุณูููู ููุงู ุงููุฒูุฏ ูู ุงูููุฏ ... (ุงูุธุฑ ูุชู ุงุณุชุฏุนุงุก ุงูุฏุนูุฉ ุฅูู ุงูุชูุงุท ููุฑุฏ ูุชุญุฑูุฑู ุฃุซูุงุก ุงูุชููุฆุฉ ุจุงูููู ุงูุจุฑุชูุงูู) <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/rq/5y/ko/rq5ykodk6pngj1esrz8bgx5-79u.png" alt="ุตูุฑุฉ"></a> <br><br>  ูุจุงูุชุงูู ุ ูุฅู ุณุนุฑ ุงุณุชุฎุฏุงู ูุชุบูุฑ ุซุงุจุช ุฃู ูุงุฆู ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุฒูุฏ ูู ูู ูู ุญุฌู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ูุญุฌู ุงูุฑูุฒ.  ููุฐู ุงูุญูููุฉ ุณูููู ูู ุงูุฌููู ุฃู ุชุถุนูุง ูู ุงูุงุนุชุจุงุฑ ูุชููุฑ ุนูุฏ ุชุทููุฑูุง. <br><br>  ุนูุจ ุขุฎุฑ ูู ุญูููุฉ ุฃู ุงูุนูู ุงููุงูู ูููุฏ ูุน ุงููุชุบูุฑ ุงูุณุงูู ุ ูุนูุฑู ูุณุงูู ุนูุฑ ุงููุงุฆู ุงูุซุงุจุช ุ ููุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุงููุชุฑุฌู ููุณู ููุง ููููู ุงููุตูู ุฅููู ุฃุซูุงุก ุงูุชุทููุฑ.  ุฃู  ุฅุฐุง ูุฌุฃุฉ ูุณุจุจ ูุง <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑุคูุฉ ุชุญุทู ุนุดูุงุฆู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฃุณุจุงุจ ุงูุฃุฎุทุงุก ุงูุนุดูุงุฆูุฉ ูู: (1) ุฌุณููุงุช ุฃููุง ุงููุงุชุฌุฉ ุนู ุนูููุฉ ุงูุชุญูู ุ (2) ุงููููุชุฑููุงุช ุ (3) ูุตุฏุฑ ุฎุงุฑุฌู ููุฅุดุนุงุน ุงูููุฑููุบูุงุทูุณู ุ (4) ุงูุญุฏูุซ ุงููุชุจุงุฏู ุงูุฏุงุฎูู. <br></div></div><br>  ุฅุฐุง ุงูุชููุช ุงูุนูุงูุฉ ูู 1 ุฅูู 0 ุ ูุณูุชู ุงุณุชุฏุนุงุก ุงูุชููุฆุฉ ุจุงููููุฉ ุงูุฃูููุฉ ูุฑุฉ ุฃุฎุฑู.  ูุฐุง ููุณ ุฌูุฏูุง ุ ููุฌุจ ุนูู ุงููุฑุก ุฃูุถูุง ูุถุนู ูู ุงูุงุนุชุจุงุฑ.  ูุชูุฎูุต ุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ: <br><blockquote style=";text-align:right;direction:rtl">  ูุฃู ูุงุฆู ุซุงุจุช (ุณูุงุก ูุงู ูุชุบูุฑ ูุญูู ุฃู ุณูุฉ ูุฆุฉ) ุ ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุฑุฉ ูุงุญุฏุฉ ููู ุชุชุบูุฑ ุฎูุงู ุงูุชุทุจูู. <br><br>  ุชุชู ุชููุฆุฉ ุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ ุงููุญููุฉ ุฃุซูุงุก ุงูุชูุฑูุฑ ุงูุฃูู ูู ุฎูุงู ุฅุนูุงู ูุชุบูุฑ. <br><br>  ุชุชู ุชููุฆุฉ ุณูุงุช ุงููุฆุฉ ุงูุซุงุจุชุฉ ุ ููุฐูู ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ุงูุซุงุจุชุฉ ุ ูุจุงุดุฑุฉ ุจุนุฏ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ูุชู ุชุนุฑูู ูุฐุง ุงูุชุฑุชูุจ </blockquote>  ุนุงุฏ ุงูุขู ุฅูู ุณููุฌูุชูู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุถุน ุงูููุฑุฏ ุงููุงุฆู ูู ROM </h3><br>  ูู ูู ูุง ุณุจู ุ ูููููุง ุฃู ูุณุชูุชุฌ ุฃูู ุจุงููุณุจุฉ ููุง ุ ูุฏ ูููู ูุฏู Singleton Mayers ุงูุนููุจ ุงูุชุงููุฉ: ุชูุงููู RAM ู ROM ุฅุถุงููุฉ ุ ุนูุงูุฉ ุฃูุงู ุบูุฑ ูุชุญูู ูููุง ูุนุฏู ุงููุฏุฑุฉ ุนูู ูุถุน ูุงุฆู ูู ROM ุจุณุจุจ ุงูุชููุฆุฉ ุงูุฏููุงููููุฉ. <br><br>  ูููู ูุฏูู ูุงุญุฏ ุฒุงุฆุฏ ุฑุงุฆุน: ููููู ุงูุชุญูู ูู ููุช ุงูุชููุฆุฉ ูููุงุฆู.  ุงููุทูุฑ ููุท ูุณุชุฏุนู <code>GetInstance()</code> ูุฃูู ูุฑุฉ ูู ุงูููุช ุงูุฐู ูุญุชุงุฌ ููู. <br><br>  ููุชุฎูุต ูู ุงูุนููุจ ุงูุซูุงุซุฉ ุงูุฃููู ุ ูููู ุงุณุชุฎุฏุงููุง <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุณููุฌูุชูู ุฏูู ุชุฃุฎูุฑ ุงูุชููุฆุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enable</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Singleton(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; Singleton&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; Singleton() = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T instance ; } ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enable</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class">&lt;T,Enable&gt;:</span></span>:instance ;</code> </pre><br></div></div><br>  ููุง ุ ุจุงูุทุจุน ุ ููุงู ูุดููุฉ ุฃุฎุฑู ุ ูุง ูููููุง ุงูุชุญูู ูู ููุช ุงูุชููุฆุฉ ููุงุฆู <code>instance</code> ุ ููุฌุจ ุนูููุง ุจุทุฑููุฉ ูุง ุชูููุฑ ุชููุฆุฉ ุดูุงูุฉ ููุบุงูุฉ.  ููู ูุฐู ูุดููุฉ ูููุตูุฉ ุ ูู ูุชูุงูููุง ุงูุขู. <br><br>  ูููู ุฅุนุงุฏุฉ ุฅูุดุงุก Singleton ูุฐุง ุจุญูุซ ูููู ุชููุฆุฉ ุงููุงุฆู ุซุงุจุชูุง ุชูุงููุง ูู ููุช ุงูุชุญููู ุงูุจุฑูุฌู ููุชู ุฅูุดุงุก ูุซูู ูููุงุฆู <code>T</code> ูู ROM ุจุงุณุชุฎุฏุงู <code>static constexpr T instance</code> <code>static T instance</code> ุจุฏูุงู ูู <code>static T instance</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> T &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance ; } Singleton() = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; Singleton(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Singleton&lt;T&gt; &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-comment"><span class="hljs-comment">// constexpr  constexpr   //           T static constexpr T instance{T()}; } ; template&lt;typename T&gt; constexpr T Singleton&lt;T&gt;::instance ;</span></span></code> </pre><br>  ููุง ุ ุณูุชู ุชูููุฐ ุฅูุดุงุก ูุชููุฆุฉ ุงููุงุฆู ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ูู ูุฑุญูุฉ ุงูุชุญููู ุงูุจุฑูุฌู ูุณูู ููุน ุงููุงุฆู ูู ููุทุน. ูููุฑุงุกุฉ ููุท.  ุตุญูุญ ุ ูุฌุจ ุฃู ููู ุงููุตู ููุณู ุจุงูููุงุนุฏ ุงูุชุงููุฉ: <br><blockquote style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููู ุชููุฆุฉ ูุงุฆู ูู ูุฐู ุงููุฆุฉ ุซุงุจุชุฉ.  (ูุฌุจ ุฃู ูููู ุงูููุดุฆ ูู constexpr) </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููู ูุฏู ุงููุตู ูููุดุฆ ูุณุฎ ูู ูุงุฏุฉ constexpr </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃูุง ุชุบูุฑ ุฃุณุงููุจ ุงููุตู ููุงุฆู ุงููุฆุฉ ุจูุงูุงุช ูุงุฆู ุงููุตู (ุฌููุน ุฃุณุงููุจ ุงูุงุดุชุฑุงู) </li></ul></blockquote><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูุฐุง ุงูุฎูุงุฑ ูููู ุชูุงููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">friend</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class">&lt;A&gt;;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> A &amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> A &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> test2.Get(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ test.SetB(v); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: B&amp; test; <span class="hljs-comment"><span class="hljs-comment">//    RAM const C&amp; test2; //    ROM //      constexpr A(const A &amp;) = default ; //     RAM  ROM,  Singleton constexpr A() : test(Singleton&lt;B&gt;::GetInstance()), test2(Singleton&lt;C&gt;::GetInstance()) { } }; int main() { //      ROM auto&amp; myObject = Singleton&lt;A&gt;::GetInstance() ; //           myObject.Set(myObject.Get()) ; cout&lt;&lt;"Singleton&lt;A&gt; - address: "&lt;&lt; &amp;myObject &lt;&lt;std::endl; }</span></span></code> </pre><br>  ุฑุงุฆุน ุ ููููู ุงุณุชุฎุฏุงู Singleton ูุฅูุดุงุก ูุงุฆูุงุช ูู ROM ุ ููู ูุงุฐุง ูู ูุงูุช ุจุนุถ ุงููุงุฆูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆูุ  ูู ุงููุงุถุญ ุฃูู ุชุญุชุงุฌ ุฅูู ุงูุงุญุชูุงุธ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุจุชุฎุตุตูู ูู Singleton ุ ุฃุญุฏููุง ููุงุฆูุงุช RAM ุ ูุงูุขุฎุฑ ูููุงุฆูุงุช ูู ROM.  ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุฏุฎุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฌููุน ุงููุงุฆูุงุช ุงูุชู ููุจุบู ูุถุนูุง ูู ูุฆุฉ ROM ุงูุฃุณุงุณูุฉ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุชุฎุตุต ู Singleton ุฎูู ุงููุงุฆูุงุช ูู ROM ู RAM</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,     ROM class RomObject{}; //  ROM  template&lt;typename T&gt; class Singleton&lt;T, typename std::enable_if_t&lt;std::is_base_of&lt;RomObject, T&gt;::value&gt;&gt; { public: Singleton(const Singleton&amp;) = delete; Singleton&amp; operator = (const Singleton&amp;) = delete; Singleton() = delete; static constexpr const T&amp; GetInstance() { return instance; } private: static constexpr T instance{T()}; }; template&lt;typename T&gt; constexpr T Singleton&lt;T, typename std::enable_if_t&lt;std::is_base_of&lt;RomObject, T&gt;::value&gt;&gt;::instance ; //  RAM  template&lt;typename T, class Enable = void&gt; class Singleton { public: Singleton(const Singleton&amp;) = delete; Singleton&amp; operator = (const Singleton&amp;) = delete; Singleton() = delete; constexpr static T&amp; GetInstance() { return instance; } private: static T instance ; }; template&lt;typename T, class Enable&gt; T Singleton&lt;T,Enable&gt;::instance ;</span></span></code> </pre><br></div></div><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุงุณุชุฎุฏุงููุง ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//      RAM,   SetB()    (j) class B { friend class Singleton&lt;B&gt;; public: const B &amp; operator=(const B &amp;) = delete ; void SetB(int value) { j = value ; } private: // ,        B(const B &amp;) = default ; B() = default; int j = 0; } //      ROM class A: public RomObject{ friend class Singleton&lt;A&gt;; public: const A &amp; operator=(const A &amp;) = delete ; int Get() const { return test2.Get(); } //     B,    void Set(int v) const { test.SetB(v); } private: B&amp; test; //    RAM const C&amp; test2; //    ROM //        A(const A &amp;) = default ; //     RAM  ROM,  Singleton constexpr A() : test(Singleton&lt;B&gt;::GetInstance()), test2(Singleton&lt;C&gt;::GetInstance()) { } }; int main() { //      ROM auto&amp; romObject = Singleton&lt;A&gt;::GetInstance() ; //    B  RAM auto&amp; ramObject = Singleton&lt;B&gt;::GetInstance() ; //           ramObject.SetB(romObject.Get()) ; cout&lt;&lt;"Singleton&lt;A&gt; - address: "&lt;&lt; &amp;romObject &lt;&lt;std::endl; cout&lt;&lt;"Singleton&lt;B&gt; - address: "&lt;&lt; &amp;ramObject &lt;&lt;std::endl; }</span></span></code> </pre> <br>  ููู ููููู ุงุณุชุฎุฏุงู ูุซู ูุฐุง Singleton ูู ุงูุญูุงุฉ ุงูุญููููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุซุงู ุณููุบูุชูู </h3><br>  ุณุฃุญุงูู ุฅุธูุงุฑ ุฐูู ุนูู ูุซุงู ุชุดุบูู ุฌูุงุฒ ุถุจุท ุงูููุช ููุคุดุฑ LED.  ุงููููุฉ ุจุณูุทุฉ ุ ูููุถ ุงูุตูุงู ูู ุงููููุช.  ูููู ุถุจุท ุงููููุช. <br><br>  ุณูููู ูุจุฏุฃ ุงูุชุดุบูู ููุง ููู ุ ุนูุฏ ุงุณุชุฏุนุงุก ุงูููุงุทุนุฉ ุ ุณูุชู <code>OnInterrupt()</code> ุทุฑููุฉ <code>OnInterrupt()</code> ุ ูุงูุชู ุจุฏูุฑูุง <code>OnInterrupt()</code> ุทุฑููุฉ ุชุจุฏูู LED ุนุจุฑ ูุงุฌูุฉ ุงููุดุชุฑู. <br><br>  ูู ุงููุงุถุญ ุฃู ูุงุฆู LED ูุฌุจ ุฃู ูููู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (ROM) ุ ูุธุฑูุง ูุนุฏู ูุฌูุฏ ูุงุฆุฏุฉ ูู ุฅูุดุงุฆู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (RAM) ุ ุญุชู ุฃูู ูุง ุชูุฌุฏ ุจูุงูุงุช ููู.  ูู ุญูุซ ุงููุจุฏุฃ ุ ููุฏ ุณุจู ุฃู ูุตูุชูุง ุฃุนูุงู ุ ูุฐูู ููุท ุฃุถู ุงูููุฑุงุซ ูู <code>RomObject</code> ุ ููู ุจุฅูุดุงุก ูููุดุฆ constexpr ูุฃูุถูุง ูุงุฑุซ ุงููุงุฌูุฉ ููุนุงูุฌุฉ ุงูุฃุญุฏุงุซ ูู ุงููุคูุช. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฆู ุงูุตูุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//      class ITimerSubscriber { public: virtual void OnTimeOut() const = 0; } ; template &lt;typename T, std::uint8_t pinNum&gt; class Pin: public RomOject, public ITimerSubscriber { // Singleton   ,     friend class Singleton&lt;Pin&gt; ; public: __forceinline inline void Toggle() const { T::Toggle(pinNum) ; } //       __forceinline inline void OnTimeOut() const override { Toggle() ; } //  = const Pin &amp; operator=(const Pin &amp;) = delete ; private: // ,      constexpr Pin() = default ; Pin(const Pin &amp;) = default ; } ;</span></span></code> </pre> </div></div><br>  ููููู ุณุฃุฌุนู Timer ุนูู ูุฌู ุงูุชุญุฏูุฏ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ูุน ุงููููู ูู ุจูููุตุฉ ุงูุดุญู ุ ูุณุฃููู ุจุชุฎุฒูู ุฑุงุจุท ููููู <code>TIM_TypeDef</code> ููุชุฑุฉ ูุฑุงุจุท ูุดุชุฑู ุ ููู ุงููููุดุฆ ุณุฃููู ุจุชููุฆุฉ ุงููุคูุช (ุนูู ุงูุฑุบู ูู ุฃูู ุณูููู ูู ุงููููู ุฌุนู Timer ูุฐูุจ ุฃูุถูุง ุฅูู ROM): <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูููุช ุงูุตู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Timer</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Timer &amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Timer &amp;) = <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> ; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetPeriod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ period = value ; timer.PSC = TimerClockSpeed / <span class="hljs-number"><span class="hljs-number">1000U</span></span> - <span class="hljs-number"><span class="hljs-number">1U</span></span> ; timer.ARR = value ; } <span class="hljs-comment"><span class="hljs-comment">//      __forceinline inline void OnInterrupt() { if ((timer.SR &amp; TIM_SR_UIF) &amp;&amp; (timer.DIER &amp; TIM_DIER_UIE)) { //   ,     OnTimeOut //       Toggle() subscriber-&gt;OnTimeOut() ; timer.SR &amp;=~ TIM_SR_UIF ; } } //    TimeOut  ,   ITimerSubscriber,   __forceinline inline void Subscribe(const ITimerSubscriber&amp; obj) { subscriber = &amp;obj ; } inline void Start() { timer.CR1 |= TIM_CR1_URS ; timer.DIER |= TIM_DIER_UIE ; SetPeriod(period) ; timer.CR1 &amp;=~TIM_CR1_OPM ; timer.EGR |= TIM_EGR_UG ; timer.CR1 |= TIM_CR1_CEN ; } protected: // ,         explicit Timer(TIM_TypeDef&amp; tim): timer{tim} {}; const ITimerSubscriber * subscriber = nullptr ; TIM_TypeDef&amp; timer ; std::uint16_t period = 1000; } ;</span></span></code> </pre> <br></div></div><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//       class BlinkTimer: public Timer { friend class Singleton&lt;BlinkTimer&gt; ; public: const BlinkTimer &amp; operator=(const BlinkTimer &amp;) = delete ; private: BlinkTimer(const BlinkTimer &amp;) = default ; inline BlinkTimer(): Timer{*TIM2} { } } ; int main() { BlinkTimer &amp; blinker = Singleton&lt;BlinkTimer&gt;::GetInstance() ; using Led1 = Pin&lt;PortA, 5&gt; ; // Led1,   ROM,      blinker.Subscribe(Singleton&lt;Led1&gt;::GetInstance()) ; blinker.Start() ; }</span></span></code> </pre><br>  ูู ูุฐุง ุงููุซุงู ุ ูุงู ูุงุฆู ุงููุฆุฉ <code>BlinkTimer</code> ููุฌูุฏูุง ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ููุงู ูุงุฆู ุงููุฆุฉ <code>Led1</code> ููุฌูุฏูุง ูู ROM.  ูุง ูุงุฆูุงุช ุนููููุฉ ุฅุถุงููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูู ุงูููุงู ุงูุฐู ูุญุชุงุฌ ุฅูู ูุซูู ุงููุฆุฉ ุ ูุญู ุจุจุณุงุทุฉ ุงุณุชุฏุนุงุก <code>GetInstance()</code> ููุฐู ุงููุฆุฉ <br><br>  ูุจูู ูุฅุถุงูุฉ ูุนุงูุฌ ููุงุทุนุฉ ุฅูู ุฌุฏูู ูุชุฌู ุงูููุงุทุนุฉ.  ูููุง ุ ูู ุงููุฑูุญ ุฌุฏูุง ุงุณุชุฎุฏุงู Singleton.  ูู ุงูุฃุณููุจ ุงูุซุงุจุช ูููุฆุฉ ุงููุณุคููุฉ ุนู ูุนุงูุฌุฉ ุงูููุงุทุนุงุช ุ ููููู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงููุงุฆู ุงููููู ูู Singleton. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> __iar_program_start(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) ; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InterruptHandler</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DummyHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;;) {} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Timer2Handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   BlinkTimer Singleton&lt;BlinkTimer&gt;::GetInstance().OnInterrupt(); } }; using tIntFunct = void(*)(); using tIntVectItem = union {tIntFunct __fun; void * __ptr;}; #pragma segment = "CSTACK" #pragma location = ".intvec" const tIntVectItem __vector_table[] = { { .__ptr = __sfe( "CSTACK" ) }, //    __iar_program_start, //      InterruptHandler::DummyHandler, InterruptHandler::DummyHandler, InterruptHandler::DummyHandler, InterruptHandler::DummyHandler, InterruptHandler::DummyHandler, 0, 0, 0, 0, InterruptHandler::DummyHandler, InterruptHandler::DummyHandler, 0, InterruptHandler::DummyHandler, InterruptHandler::DummyHandler, //External Interrupts InterruptHandler::DummyHandler, //Window Watchdog InterruptHandler::DummyHandler, //PVD through EXTI Line detect/EXTI16 .... InterruptHandler::Timer2Handler, //      BlinkTimer InterruptHandler::DummyHandler, //TIM3 ... InterruptHandler::DummyHandler, //SPI 5 global interrupt }; extern "C" void __cmain(void) ; extern "C" __weak void __iar_init_core(void) ; extern "C" __weak void __iar_init_vfp(void) ; #pragma required = __vector_table void __iar_program_start(void) { __iar_init_core() ; __iar_init_vfp() ; __cmain() ; }</span></span></code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููููุง ุนู ุงูุฌุฏูู ููุณู ุ ูููู ูุนูู ูู ุดูุก:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุจุงุดุฑุฉ ุจุนุฏ ุจุฏุก ุงูุชุดุบูู ุฃู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุนููู ุ ุชุชู ููุงุทุนุฉ ุฅุนุงุฏุฉ <i>ุงูุชุนููู ุจุงูุฑูู -8</i> ุ ูู ุงูุฌุฏูู ูููู ุนูุตุฑ ุตูุฑู ุ ููููุง ูุฅุดุงุฑุฉ ุฅุนุงุฏุฉ ุงูุชุนููู ุ ููุชูู ุงูุจุฑูุงูุฌ ุฅูู ูุชุฌู ุนูุตุฑ ุงูุตูุฑ ุ ุญูุซ ูุชู ุชููุฆุฉ ุงููุคุดุฑ ุฅูู ุฃุนูู ุงูููุฏุณ ุฃููุงู.  ูุคุฎุฐ ูุฐุง ุงูุนููุงู ูู ูููุน ุดุฑูุญุฉ STACK ุงูุชู ููุช ุจุชูููููุง ูู ุฅุนุฏุงุฏุงุช ุฑุงุจุท.  ูุจุงุดุฑุฉ ุจุนุฏ ุชููุฆุฉ ุงููุคุดุฑ ุ ุงูุชูู ุฅูู ููุทุฉ ุฅุฏุฎุงู ุงูุจุฑูุงูุฌ ุ ูู ูุฐู ุงูุญุงูุฉ ุ ุนูู ุนููุงู ุงูุฏุงูุฉ <code>__iar_program_start</code> .  ุจุนุฏ ุฐูู ุ ุชุชู ุชููุฆุฉ ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ูุชููุฆุฉ ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ูุงูุซุงุจุชุฉ ุ ูุชููุฆุฉ ุงููุนุงูุฌ ุงูุซุงููู ุจููุทุฉ ุนุงุฆูุฉ ุ ุฅุฐุง ุชู ุชุถูููู ูู ุงูุฅุนุฏุงุฏุงุช ุ ููุง ุฅูู ุฐูู.  ูู ุญุงูุฉ ุญุฏูุซ ููุงุทุนุฉ ุ ููุชูู ุฌูุงุฒ ุงูุชุญูู ูู ุงูููุงุทุนุฉ ุจุฑูู ุงูููุงุทุนุฉ ูู ุงูุฌุฏูู ุฅูู ุนููุงู ูุนุงูุฌ ุงูููุงุทุนุฉ.  ูู ุญุงูุชูุง ุ ูุฐุง ูู <code>InterruptHandler::Timer2Handler</code> ุ ูุงูุฐู ุ ูู ุฎูุงู Singleton ุ ูุณุชุฏุนู ุทุฑููุฉ <code>OnInterrupt()</code> ุงูููุช ูููุถ ูุฏููุง ุ ูุงูุฐู ุจุฏูุฑู <code>OnTimeOut()</code> ุฃุณููุจ <code>OnTimeOut()</code> ูููุฐ ุงููููุฐ. <br></div></div><br>  ูู ุงููุงูุน ูุฐุง ูู ุดูุก ุ ููููู ุชุดุบูู ุงูุจุฑูุงูุฌ.  ูุซุงู ุนููู ูู IAR 8.40 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br>  ูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนุซูุฑ ููุง</a> ุนูู ูุซุงู ุฃูุซุฑ ุชูุตููุงู ุญูู ุงุณุชุฎุฏุงู Singleton ูููุงุฆูุงุช ูู ROM ู RAM. <br><br>  ุฑูุงุจุท ุงููุซุงุฆู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GOST R mek61508-7โ2012</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">C / C ++ ุฏููู ุงูุชูููุฉ ู EWARM</a> </li></ul><br>  PS ูู ุงูุตูุฑุฉ ูู ุจุฏุงูุฉ ุงูููุงู ุ ูู ููุณ ุ Singleton ููุณ ROM ุ ูููู WHISKEY. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar455477/">https://habr.com/ru/post/ar455477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar455467/index.html">ุฅุฐุง ููุช ูุง ุชูุชุจ ุจุฑูุงูุฌูุง ุ ููุง ุชุณุชุฎุฏู ูุบุฉ ุงูุจุฑูุฌุฉ</a></li>
<li><a href="../ar455469/index.html">ุฃู ูููู ููุฏุณ ูุงูู ูููุณ ููููู</a></li>
<li><a href="../ar455471/index.html">ุชุฑุฌูุฉ ุงุณุชุฎุฏุงู Google Analytics ูุน R (Michal Brys)</a></li>
<li><a href="../ar455473/index.html">ุงููุฑุงุซุฉ ูู TypeScript: ุงูุญุตูู ุนูู ูุนุง</a></li>
<li><a href="../ar455475/index.html">ููุฎุต ุชุตููู ุงูุฃุบุฐูุฉ ุ ูุงูู 2019</a></li>
<li><a href="../ar455479/index.html">ููู ูููุง ุจุชูููุฐ ุงูุชููู ูู Jetpack ุฅูู ุชุทุจูู ูุชุงูู. ุชูุฑูุฑ ูุงูุฏูุณ</a></li>
<li><a href="../ar455481/index.html">ุซูุงุซ ูุตุต ุนู ุงูุตูุฏ ุงูุจุฑู</a></li>
<li><a href="../ar455483/index.html">Ai-Da ููุงู: ุฑูุจูุช ุจุดุฑู ูุณุชุนุฏ ูุฃูู ูุนุฑุถ ูููุฑุฏ ูู</a></li>
<li><a href="../ar455485/index.html">Check Point Scripts - ุชูููุฐ ุงูุจุฑุงูุฌ ุงููุตูุฉ ูุจุงุดุฑุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุงูุฐููุฉ</a></li>
<li><a href="../ar455487/index.html">ุชุฏุฑูุจ Cisco 200-125 CCNA v3.0. ููู 10. ุงูุชุจุฏูู ุฃูุถุงุน ุชุดุบูู ุงููููุฐ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>