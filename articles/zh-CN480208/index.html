<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏼 🛄 🐧 使用C ++创建网站 👨‍⚕️ 🖕🏾 🦍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="这可能吗？ 
 是的 

 我知道这听起来很奇怪，看起来更像是在毫无价值的练习中，但事实并非如此。 
 在本文中，我将告诉您如何在网站开发中使用C ++，并为此提供一些充分的理由。 

 这不仅会很有趣，而且会很有用而且非常实用。 

 代管 
 您可能会认为：这种异常的配置只能在专门的环境中实现。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用C ++创建网站</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480208/"><h2> 这可能吗？ </h2><br> 是的 <br><br> 我知道这听起来很奇怪，看起来更像是在毫无价值的练习中，但事实并非如此。 <br> 在本文中，我将告诉您如何在网站开发中使用C ++，并为此提供一些充分的理由。 <br><br> 这不仅会很有趣，而且会很有用而且非常实用。 <br><a name="habracut"></a><br><h2> 代管 </h2><br> 您可能会认为：这种异常的配置只能在专门的环境中实现。 但是，通常不是这种情况。 尽管对于许多站点（不仅仅是C ++站点）而言，常规或虚拟专用服务器都是理想的解决方案，但是在大多数情况下，您可以在共享主机服务上使用C ++。 <br> 任何支持CGI的Web托管（原则上就是所有内容）都将能够支持C ++网站。 根据提供者的不同，您可以在本地编译站点，也可以不在本地编译站点，并且您的帐户中需要包含编译器。 如果您计划直接在Web服务器上通过SSH编辑和编译，请检查一下。 <br><br><h2> 简单的例子 </h2><br> 在以上示例中，我使用了cPanel托管帐户。 它们价格适中，便宜且稳定。 但是，您可以通过一些简单的Apache配置修改轻松地将这些方法调整为虚拟或专用服务器或Amazon EC2实例。 <br><br>  cPanel为我们提供了cgi-bin文件夹，但我们不需要它。 在大多数情况下，具有扩展名.cgi的文件如果具有正确的权限（通常为0755），将被自动处理。 这是必要的文件（请确保在Makefile中使用TAB） <br><br> 生成文件： <br><br><pre><code class="cpp hljs">all: g++ -O3 -s hello.cpp -o hello.cgi clean: rm -f hello.cgi</code> </pre> <br>  hello.cpp： <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include &lt;stdlib.h&gt; using namespace std; void set_content_type(string content_type) { cout &lt;&lt; "Content-type: " &lt;&lt; content_type &lt;&lt; "\r\n\r\n"; } void set_page_title(string title) { cout &lt;&lt; "&lt;title&gt;" &lt;&lt; title &lt;&lt; "&lt;/title&gt;\n"; } void h1_text(string text) { cout &lt;&lt; text &lt;&lt; "\n"; } int main() { set_content_type("text/html"); // Output HTML boilerplate cout &lt;&lt; "&lt;!doctype html&gt;\n"; cout &lt;&lt; "&lt;html lang=\"en\"&gt;\n"; cout &lt;&lt; "&lt;head&gt;\n"; set_page_title("Hello, World!"); cout &lt;&lt; "&lt;/head&gt;\n"; cout &lt;&lt; "&lt;body&gt;\n"; h1_text("Hello, World!"); cout &lt;&lt; "&lt;/body&gt;\n"; cout &lt;&lt; "&lt;/html&gt;"; return 0; }</span></span></span></span></code> </pre> <br> 如果您的帐户中包含编译器（可能需要向网络托管服务支持小组咨询），只需在您的帐户中使用SSH，然后将这些文件放在public_html文件夹中，然后执行以下操作： <br><br><pre> <code class="cpp hljs">make</code> </pre> <br>  hello.cgi文件将被执行。 例如，如果在浏览器中输入文件地址，则如下所示： <br><br><pre> <code class="cpp hljs">http:<span class="hljs-comment"><span class="hljs-comment">//your-test-site.com/hello.cgi</span></span></code> </pre> <br> 然后，用您的域名或托管URL替换your-test-site.com。 屏幕上应出现“ Hello World”。 <br><br> 在深入研究代码本身之前，让我们看一下它在Web服务器上的工作方式。 当Apache接受请求时，它首先查看的是内部处理程序或覆盖规则，然后在磁盘上查找与请求匹配的文件。 在我们的例子中，它找到hello.cgi并检索它。 我们的程序不接受输入，而仅显示消息“ Hello world”。 然后，Apache接收此数据并将其返回给用户。 <br><br> 说到代码，应该提到它可能会更容易。 不必包含单独的函数set_content_type，set_page_title和h1_text。 有简单的助手可以保持主要功能的整洁。 所有这些都可以简单地带到主函数中，并且将以完全相同的方式工作。 <br><br> 但我希望您能看到突出这些功能的优势。 如果需要为每个HTML元素创建一个函数，则可以使用以下代码在程序中创建干净的响应： <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">p</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;p&gt;"</span></span> &lt;&lt; text &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;/p&gt;\n"</span></span>; }</code> </pre> <br> 然后使用类似： <br><br><pre> <code class="cpp hljs">p(<span class="hljs-string"><span class="hljs-string">"This would be paragraph text."</span></span>);</code> </pre> <br> 显示一个段落。 <br><br> 您甚至可以提出这个想法，以便帮助函数（如p，h1_text等）返回文本，而不是通过cout直接输出到标准输出。 同时，您可以创建模板系统或嵌套答案，以使用非常精简且高效的C ++代码创建复杂的页面。 <br><br> 该示例尽可能简单，仅指示要点。 您具有对每个响应头的完全访问权限，从而可以完全控制响应循环。 <br><br><h2> 有关输入的更多信息 </h2><br> 我们的示例不接受任何输入，仅返回“ Hello World”。 但是Apache通过环境变量为每个请求提供了大量信息。 您可以使用C标准库中的getenv（）函数获取它们的值（不要忘了在代码开头添加#include &lt;stdlib.h&gt;）。例如，如果您需要找出完整的请求URI，则可以使用： <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span> request_uri = getenv(<span class="hljs-string"><span class="hljs-string">"REQUEST_URI"</span></span>);</code> </pre> <br> 获得此值。 其他有用的变量： <br><br><ul><li>  REMOTE_ADDR-获取访客的IP地址 </li><li>  REQUEST_METHOD-返回方法（即GET，POST等） </li><li>  DOCUMENT_ROOT-站点的路由（在共享系统上通常为〜/ public_html，在虚拟/专用服务器上通常为/ var / www / html）。 </li><li>  QUERY_STRING-查询字符串以获取GET变量。 </li></ul><br><h2> 更清晰的例子 </h2><br> 当然，可以手动解析GET变量，并且可以通过检查标准输入来完成POST变量的处理。 您甚至可以通过更改请求和响应标头来接收和设置Cookie。 但是，这两种方法都过于繁琐。 <br><br> 您可以编写自己的shell或使用现成的GNU cgicc库。 它包含用于修改HTML和处理表单的辅助函数。 在处理大型项目时，使用这样的库可以节省大量时间。 <br><br> 在Debian和Ubuntu上，可以使用以下命令安装库和头文件： <br><br><pre> <code class="cpp hljs">apt install libcgicc5 libcgicc5-dev</code> </pre> <br> 但是CentOS / RHEL没有自己的软件包。 要在它们上安装，请运行： <br><br><pre> <code class="cpp hljs">cd /usr/local/src wget ftp:<span class="hljs-comment"><span class="hljs-comment">//ftp.gnu.org/gnu/cgicc/cgicc-3.2.19.tar.gz tar xfz cgicc*.tar.gz cd cgicc* ./configure — prefix=/usr make make install</span></span></code> </pre> <br> 注意：在撰写本文时，3.2.19是最新版本，但是您可以在<a href="" rel="nofollow">ftp.gnu.org/gnu/cgicc中</a>检查更新的副本。 我还使用/ usr作为前缀，以避免链接库出现问题。 如果有的话，请冷静地更改它们。 <br><br> 安装cgicc之后，您可以对其进行编译。 尝试以下示例，该示例从表单获取输入并将其显示在浏览器中： <br><br> 生成文件： <br><br><pre> <code class="cpp hljs">all: g++ -O3 -s hello.cpp -o hello.cgi g++ -O3 -s cgicc.cpp -o cgicc.cgi /usr/lib/libcgicc.a clean: rm -f hello.cgi cgicc.cgi</code> </pre> <br>  cgicc.html： <br><br><pre> <code class="cpp hljs">&lt;!doctype html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; &lt;head&gt; &lt;title&gt;cgicc Test&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form method=<span class="hljs-string"><span class="hljs-string">"POST"</span></span> action=<span class="hljs-string"><span class="hljs-string">"cgicc.cgi"</span></span>&gt; &lt;label <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"name"</span></span>&gt;Name&lt;/label&gt; &lt;input name=<span class="hljs-string"><span class="hljs-string">"name"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text"</span></span> value=<span class="hljs-string"><span class="hljs-string">""</span></span>&gt; &lt;input name=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Submit"</span></span>&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  cgicc.cpp： <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;cgicc/CgiDefs.h&gt; #include &lt;cgicc/Cgicc.h&gt; #include &lt;cgicc/HTTPHTMLHeader.h&gt; #include &lt;cgicc/HTMLClasses.h&gt; using namespace std; using namespace cgicc; void set_content_type(string content_type) { cout &lt;&lt; "Content-type: " &lt;&lt; content_type &lt;&lt; "\r\n\r\n"; } void set_page_title(string title) { cout &lt;&lt; "&lt;title&gt;" &lt;&lt; title &lt;&lt; "&lt;/title&gt;\n"; } void h1_text(string text) { cout &lt;&lt; text &lt;&lt; "\n"; } int main() { Cgicc cgi; string name; set_content_type("text/html"); cout &lt;&lt; "&lt;!doctype html&gt;\n"; cout &lt;&lt; "&lt;html lang=\"en\"&gt;\n"; cout &lt;&lt; "&lt;head&gt;\n"; set_page_title("cgicc Test"); cout &lt;&lt; "&lt;/head&gt;\n"; cout &lt;&lt; "&lt;body&gt;\n"; cout &lt;&lt; "&lt;p&gt;"; // Grab the "name" variable from the form name = cgi("name"); // Check to make sure it isn't empty. if (!name.empty()) { cout &lt;&lt; "Name is " &lt;&lt; name &lt;&lt; "\n"; } else { cout &lt;&lt; "Name was not provided."; } cout &lt;&lt; "&lt;/p&gt;\n"; cout &lt;&lt; "&lt;/body&gt;\n"; cout &lt;&lt; "&lt;/html&gt;"; return 0; }</span></span></span></span></code> </pre> <br> 您可能已经注意到，我在Makefile中静态链接了cgicc库。 尽管这不是必需的（您可以用-Icgicc替换它），但我更喜欢静态链接发送到服务器的二进制代码，以便将要发送的程序所必需的所有内容都作为一个集合发送。 <br><br> 在此示例中，cgicc库完成了POST变量的艰苦工作，并为我们返回了“名称”。 <br><br> 我没有转义POST输入变量，但建议使用它，尤其是在生产场所，尤其是在与数据库交互时。 <br><br> 这只是cgicc可能性的一小部分。 您可以<a href="https://www.gnu.org/software/cgicc/doc/index.html" rel="nofollow">在此处阅读</a>完整的文档。 <br><br><h2> 表现/表现 </h2><br>  C ++处理良好代码的速度非常快。  CGI接口会使事情放慢一点，但是即使这样，您也将比PHP之类的解释语言获得更好的执行。 <br> 正如他们所说，总有一些需要努力的地方。 在专业或虚拟环境中，可以使用Nginx或Apache的FastCGI支持来减少程序加载时的小延迟（如果服务器负载不大，则不明显）。 我的测试没有任何延迟，但是对于使用载流量的网站来说，研究这些解决方案以更快地执行/快速工作将非常有用。 <br><br><h2> 选配 </h2><br> 将C ++程序包装在一个薄的Docker容器中将很容易。 这将在您放置网站时为您提供极大的灵活性。 您还可以通过在程序中包含C / C ++ MySQL开发标头来访问MySQL数据库。 如果您熟悉将MySQL与PHP结合使用，您会注意到变量名非常相似。 <br><br> 您可以包括ImageMagick C ++标头来直接在程序中处理这些图像，而不是创建其他用于图像处理的命令行过程。 <br><br><h2> 多么漫长而奇怪的旅程 </h2><br> 用C ++创建站点是可行的，特别是在性能很重要的情况下。 我不建议在博客或个人站点上使用它-可以在WordPress上轻松完成。 但是，如果您迫切需要速度，并且希望在人迹罕至的地方写得很好，请考虑将C ++用于您在网络上的下一个细分项目。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN480208/">https://habr.com/ru/post/zh-CN480208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN480194/index.html">云解决方案架构。 OTUS的新课程</a></li>
<li><a href="../zh-CN480196/index.html">如何应对无法无天？ 基于Nginx的事件</a></li>
<li><a href="../zh-CN480200/index.html">如何开发个人网站的设计和代码</a></li>
<li><a href="../zh-CN480204/index.html">支持Nginx作者的30分钟停电-Igor Sysoev</a></li>
<li><a href="../zh-CN480206/index.html">OpenStreetMap第489号世界新闻（11/26/2019-02/12/2019）</a></li>
<li><a href="../zh-CN480210/index.html">《哈勃周刊》第31期/漫步者vs Nginx，廷科夫付出了一切并“掉价”，购置税超过20欧元，重新设计了哈伯</a></li>
<li><a href="../zh-CN480212/index.html">Igor Sysoev的公司比Rambler Group控股的公司要贵</a></li>
<li><a href="../zh-CN480214/index.html">将PNG转换为DXT5格式的DDS并使用python快速查看结果</a></li>
<li><a href="../zh-CN480216/index.html">Rubicon完成：nginx</a></li>
<li><a href="../zh-CN480218/index.html">第二年Q＃</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>