<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è¨ üàπ ü•© Code r√©seau Age of Empires: 1 500 archers par modem √† 28,8 kbps ü§µüèø üßòüèΩ üë®üèª‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Note du traducteur: cet article a d√©j√† 17 ans, et il n'est int√©ressant que d'un point de vue historique. Il est int√©ressant d'apprendre comment les d√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Code r√©seau Age of Empires: 1 500 archers par modem √† 28,8 kbps</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417703/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eaa/c7f/fd7/eaac7ffd7c6a997f72a9cdd4cf67e982.png" alt="image"></div><br>  <i>Note du traducteur: cet article a d√©j√† 17 ans, et il n'est int√©ressant que d'un point de vue historique.</i>  <i>Il est int√©ressant d'apprendre comment les d√©veloppeurs ont r√©ussi √† r√©aliser un jeu en ligne fluide √† l'√®re des modems 28,8k et des premiers Pentiums.</i> <br><br>  Cet article d√©crit l'architecture et l'impl√©mentation, ainsi que quelques le√ßons tir√©es de la cr√©ation du code multi-utilisateurs (r√©seau) pour les jeux <em>Age of Empires 1 et 2</em> .  Il d√©crit √©galement les approches d'architecture de r√©seau actuelles et futures utilis√©es par Ensemble Studios dans leurs moteurs de jeu. <br><br><h2>  Age of Empires multijoueur: exigences de structure </h2><br>  Au d√©but des travaux sur le code multijoueur <em>Age of Empires</em> en 1996, nous nous sommes fix√©s des objectifs tr√®s sp√©cifiques n√©cessaires √† la mise en place du gameplay requis. <br><a name="habracut"></a><br><ul><li>  Des batailles historiques √† grande √©chelle et √©piques avec de nombreuses unit√©s militaires diff√©rentes </li><li>  Prise en charge de jusqu'√† 8 joueurs en mode multijoueur </li><li>  Simulation de jeu fluide sur LAN, via une connexion directe par modem et sur Internet </li><li>  Prise en charge de la plate-forme cible: Pentium 90 avec 16 Mo de RAM et un modem √† 28,8 kbps </li><li>  Le syst√®me de communication doit fonctionner avec le moteur existant (G√©nie) </li><li>  Stable 15 images par seconde sur les machines avec une configuration minimale </li></ul><br>  Le moteur Genie √©tait d√©j√† pr√™t et le gameplay en mode mono-utilisateur a commenc√© √† prendre ses formes.  Le moteur Genie est un moteur de boucle de jeu √† un seul filetage en deux dimensions.  Les sprites sont rendus en 256 couleurs dans un monde compos√© de tuiles.  Les cartes g√©n√©r√©es al√©atoirement sont remplies de milliers d'objets: des arbres pouvant √™tre coup√©s aux gazelles au galop.  R√©partition approximative (apr√®s optimisation) du temps d'ex√©cution des t√¢ches du moteur: 30% pour le rendu des graphiques, 30% pour l'IA et la recherche de chemins, 30% pour l'ex√©cution des simulations et des t√¢ches officielles. <br><br>  D√©j√† √† un stade assez pr√©coce, le moteur √©tait relativement stable et les communications multi-utilisateurs devaient fonctionner avec du code pr√™t √† l'emploi sans qu'il soit n√©cessaire de modifier consid√©rablement l'architecture (de travail) existante. <br><br>  Pour compliquer la t√¢che, le temps n√©cessaire pour terminer chaque √©tape de simulation pouvait varier consid√©rablement: le temps de rendu d√©pendait du fait que l'utilisateur regardait les unit√©s, faisait d√©filer ou regardait la zone inexplor√©e, et les longs trajets ou la planification strat√©gique de l'IA affectaient consid√©rablement le temps d'ex√©cution du mouvement de jeu. : les oscillations √©taient jusqu'√† 200 ms. <br><br>  De brefs calculs ont montr√© que le transfert d'un petit ensemble de donn√©es sur les unit√©s et les tentatives de les mettre √† jour en temps r√©el limitent consid√©rablement le nombre d'unit√©s et d'objets avec lesquels le joueur peut interagir.  Si vous transf√©rez simplement les coordonn√©es X et Y, l'√©tat, l'action, la direction de la vue et les d√©g√¢ts, alors dans le jeu, il ne peut y avoir plus de 250 unit√©s mobiles. <br><br>  Nous voulions que les joueurs puissent d√©truire les villes grecques avec des catapultes, des archers et des guerriers, tout en menant des si√®ges avec des trir√®mes de la mer.  De toute √©vidence, nous avions besoin d'une autre approche. <br><br><h2>  Simulations simultan√©es </h2><br>  Au lieu de transmettre l'√©tat de chaque unit√© du jeu, nous avons voulu effectuer des simulations absolument identiques sur chaque machine, en passant chacune le m√™me jeu de commandes donn√© par les joueurs en m√™me temps.  Les ordinateurs des joueurs, en substance, devaient synchroniser le gameplay dans les meilleures traditions des films de guerre, permettant aux joueurs d'√©mettre des commandes, puis de les ex√©cuter de la m√™me mani√®re et en m√™me temps, garantissant l'identit√© des jeux. <br><br>  Initialement, une synchronisation aussi d√©licate √©tait difficile √† mettre en ≈ìuvre, mais en cons√©quence, elle apportait des avantages inattendus dans d'autres domaines. <br><br>  <strong>Am√©lioration de base du mod√®le</strong> <br><br>  Au niveau conceptuel le plus simple, la mise en ≈ìuvre de simulations simultan√©es semble tr√®s facile.  Dans certains jeux qui utilisent des simulations avec une √©tape fixe (√©tape de verrouillage) et des timings constants, cela peut m√™me √™tre tout √† fait possible. <br><br>  √âtant donn√© qu'avec cette approche, il devrait prendre la responsabilit√© de d√©placer simultan√©ment des centaines ou des milliers d'objets, le syst√®me doit rester viable m√™me avec des fluctuations de retard de 20 √† 1000 millisecondes et g√©rer les changements lors du traitement de la trame. <br><br>  L'envoi des commandes des joueurs, la confirmation de tous les messages, puis leur traitement avant de passer au mouvement suivant serait un cauchemar du point de vue du processus de jeu, avec une attente constante et un √©change lent des √©quipes.  Nous avions besoin d'un sch√©ma qui pourrait continuer √† traiter le jeu en parall√®le avec l'arri√®re-plan en attendant la fin du processus d'√©change de donn√©es. <br><br>  Mark [Terrano] a utilis√© un syst√®me pour marquer les commandes qui devraient √™tre ex√©cut√©es √† travers deux ¬´mouvements d'√©change de donn√©es¬ª √† l'avenir (les mouvements d'√©change de donn√©es dans <em>AoE</em> √©taient s√©par√©s des cadres de rendu eux-m√™mes). <br><br>  C'est-√†-dire que les commandes donn√©es pendant le cours 1000 sont affect√©es pour √™tre ex√©cut√©es pendant le cours 1002 (voir figure 1).  Au cours de 1001, les commandes donn√©es au cours de 0 999 sont ex√©cut√©es, ce qui nous a permis de recevoir, de confirmer et de pr√©parer des messages √† traiter, tandis que le jeu a continu√© √† dessiner des animations et √† effectuer des simulations. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/01d/163/10f/01d16310f6b5958701fbde3e8480790a.jpg"></div><br>  <i>Figure 1. Balisage des commandes √† ex√©cuter via deux ¬´mouvements d'√©change de donn√©es¬ª.</i> <br><br>  Habituellement, les mouvements prenaient 200 ms, et les √©quipes √©taient envoy√©es pendant ce tour.  Apr√®s 200 ms, le mouvement s'est arr√™t√© et un nouveau mouvement a commenc√©.  √Ä chaque instant de la partie, les √©quipes ont √©t√© trait√©es en un coup, re√ßues et enregistr√©es pour le coup suivant, puis envoy√©es pour ex√©cution deux coups plus tard. <br><br><h2>  "Contr√¥le de vitesse" </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc5/133/4b0/fc51334b03798cffa22b0a18938e9ce3.jpg"></div><br>  <i>Figure 2. Contr√¥le de vitesse.</i> <br><br>  √âtant donn√© que les simulations doivent toujours avoir exactement la m√™me entr√©e, un jeu ne peut pas fonctionner plus vite que la machine la plus lente ne parvient √† traiter l'√©change de donn√©es, √† effectuer un d√©placement et √† envoyer de nouvelles commandes.  Nous avons appel√© le syst√®me qui modifie la dur√©e du coup pour maintenir des animations et un gameplay fluides dans des conditions de d√©lai d'√©change de donn√©es et de vitesse de traitement variables ¬´Speed ‚Äã‚ÄãControl¬ª. <br><br>  Le gameplay peut √™tre ressenti comme un "freinage" pour deux raisons: si la fr√©quence d'images d'une machine chute (ou si elle est inf√©rieure aux autres), les autres machines traitent leurs commandes, rendent tout au temps imparti et, par cons√©quent, elles doivent attendre le prochain mouvement.  Dans ce cas, toute pause devient imm√©diatement perceptible.  De plus, le jeu est ralenti par un retard dans l'√©change de donn√©es - les joueurs doivent attendre que la machine re√ßoive suffisamment de donn√©es pour terminer le mouvement. <br><br>  Chaque client a calcul√© la fr√©quence d'images consid√©r√©e comme constamment r√©alisable, qui a √©t√© calcul√©e en faisant la moyenne du temps de traitement de plusieurs images.  √âtant donn√© que cette valeur change pendant le jeu en fonction de la port√©e, du nombre d'unit√©s, de la taille de la carte et d'autres facteurs, elle a √©t√© transmise dans chaque message concernant la fin du mouvement. <br><br>  De plus, chaque client a √©galement mesur√© le ¬´temps de ping¬ª entre lui et les autres clients et vice versa.  Il a √©galement envoy√© le ping moyen au client le plus long dans un message sur la fin du d√©placement (au total, 2 octets ont √©t√© utilis√©s pour contr√¥ler la vitesse). <br><br>  √Ä chaque d√©placement, la machine d√©sign√©e par l'h√¥te a analys√© les messages d'ach√®vement, calcul√© la fr√©quence d'images n√©cessaire et la correction du retard dans la transmission des donn√©es sur Internet.  L'h√¥te a ensuite envoy√© une nouvelle fr√©quence d'images et la dur√©e de l'√©change de donn√©es.  Les figures 3 √† 5 montrent comment le flux d'√©change de donn√©es a √©t√© divis√© dans diff√©rentes conditions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34d/ce4/48d/34dce448d5683dd1e449b7d2cf25d505.jpg"></div><br>  <i>Figure 3. Flux d'√©change de donn√©es typique.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b9/6b4/1a8/3b96b41a83ee28f6d94164f87f8a8df6.jpg"></div><br>  <i>Figure 4. Transmission de donn√©es √† latence √©lev√©e sur Internet √† vitesse normale de la machine.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/645/4d5/bd1/6454d5bd11e1ca0b16971e8a3e27cf9f.jpg"></div><br>  <i>Figure 5. Faible vitesse de la machine avec un d√©lai de transfert de donn√©es normal.</i> <br><br>  La "progression de l'√©change de donn√©es", qui √©tait approximativement √©gale au temps de ping pour l'aller-retour pour le message, √©tait divis√©e par le nombre de trames de simulation que la machine la plus lente pouvait effectuer en moyenne pendant cette p√©riode. <br><br>  La dur√©e de l'√©change de donn√©es a √©t√© pond√©r√©e, de sorte qu'elle pourrait rapidement augmenter en fonction des changements dans la latence de la transmission de donn√©es sur Internet et diminuer lentement jusqu'√† la meilleure vitesse moyenne qui peut √™tre constamment maintenue.  Habituellement, le jeu a ralenti et ralenti uniquement aux moments des pires pics - le d√©lai de transmission des commandes a augment√©, mais est rest√© fluide (et n'a augment√© que de quelques millisecondes par tour), car le jeu a progressivement r√©duit les retards √† la meilleure vitesse possible.  Cela a cr√©√© la plus grande fluidit√© possible du gameplay, tout en offrant un ajustement aux conditions changeantes. <br><br><h2>  Livraison garantie </h2><br>  UDP a √©t√© utilis√© dans la couche r√©seau et chaque client a √©t√© impliqu√© dans la commande des commandes, la reconnaissance des pertes et la retransmission.  Chaque message utilisait une paire d'octets, indiquant le cours pour lequel l'ex√©cution des commandes √©tait pr√©vue et le num√©ro de s√©rie du message.  Si un message a √©t√© re√ßu apr√®s le d√©placement, il a √©t√© rejet√© et les messages entrants ont √©t√© enregistr√©s pour ex√©cution.  En raison de la nature de l'UDP, Mark a utilis√© le principe suivant lors de la r√©ception de messages: ¬´En cas de doute, vous devriez consid√©rer le message perdu.  Si des messages sont re√ßus dans le d√©sordre, le destinataire envoie imm√©diatement une demande de retransmission des messages perdus.  Si l'accus√© de r√©ception est re√ßu plus tard que l'heure pr√©vue, l'exp√©diteur envoie simplement √† nouveau le message, sans attendre un signal de sa perte. " <br><br><h2>  Avantages cach√©s </h2><br>  √âtant donn√© que les r√©sultats calcul√©s par le jeu d√©pendaient de tous les utilisateurs effectuant des simulations identiques, il √©tait incroyablement difficile pour un client (ou un flux de donn√©es client) de pirater et de tricher.  Toute simulation effectu√©e diff√©remment a √©t√© marqu√©e comme ¬´d√©synchronis√©e¬ª et le jeu s'est arr√™t√©.  Il √©tait toujours possible de tricher localement pour la divulgation d'informations, mais ces fuites √©taient relativement facilement corrig√©es dans les correctifs et r√©visions ult√©rieurs.  La s√©curit√© est devenue notre plus grande victoire. <br><br><h2>  Probl√®mes cach√©s </h2><br>  Au d√©but, il peut sembler que la m√™me ex√©cution de deux instances du m√™me code est facile √† impl√©menter, mais ce n'est pas le cas.  Aux toutes premi√®res √©tapes du projet, Tim Znamenachek, chef de produit Microsoft, a d√©clar√© √† Mark: ¬´Chaque projet a un bogue persistant qui n'abandonne pas jusqu'√† la fin.  Je pense que dans notre cas, ce sera d√©synchronis√©. ¬ª  Et il avait raison.  Les difficult√©s de d√©tection des erreurs de synchronisation se sont multipli√©es √† chaque petit changement.  Le cerf, dont la position est l√©g√®rement diff√©rente lors de la cr√©ation d'une carte al√©atoire, se d√©placera un peu diff√©remment, et quelques minutes plus tard, le chasseur se d√©placera l√©g√®rement ou manquera une lance, √† la suite du retour √† la maison sans viande.  Par cons√©quent, ce qui semblait parfois n'√™tre qu'une diff√©rence dans les sommes de contr√¥le de la quantit√© de nourriture avait des raisons tr√®s difficiles √† suivre. <br><br>  Bien que nous ayons v√©rifi√© le monde, les objets, recherch√© des chemins, vis√© et tous les autres syst√®mes avec des sommes de contr√¥le, il y avait toujours quelque chose que nous ne pouvions pas prendre en compte.  D'√©normes volumes (50 Mo chacun) de suivi des messages et de vidages d'objets du monde ont rendu le probl√®me encore plus compliqu√©.  Une partie des difficult√©s √©tait d'ordre conceptuel - les programmeurs n'√©taient pas habitu√©s √† √©crire du code utilisant le m√™me nombre d'appels de g√©n√©rateur de nombres al√©atoires dans une simulation (oui, des nombres al√©atoires √©taient √©galement g√©n√©r√©s et synchronis√©s). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d29/1c3/690/d291c3690fef6c18cc65aec724dafe31.png" alt="image"></div><br><h2>  Le√ßons apprises </h2><br>  Lors du d√©veloppement de la partie r√©seau d' <em>Age of Empires,</em> nous avons re√ßu plusieurs le√ßons qui peuvent √™tre appliqu√©es au d√©veloppement de tout syst√®me multi-utilisateur de jeu. <br><br>  <strong><em>Apprenez √† votre utilisateur.</em></strong>  L'√©tude de l'utilisateur est l'√©tape la plus importante pour comprendre ses attentes concernant la vitesse du multijoueur, les freins per√ßus et les retards dans la transmission des commandes.  Chaque genre est individuel et vous devez comprendre ce qui convient √† votre style de jeu et √† votre gestion. <br><br>  Dans les premi√®res √©tapes du processus de d√©veloppement, Mark et le concepteur principal ont retard√© l'√©change de donn√©es (ce prototype a √©t√© r√©vis√© plusieurs fois au cours du processus de d√©veloppement).  Puisqu'ils jouaient √† un jeu en solo, il √©tait tr√®s facile de simuler diff√©rents niveaux de retards de transfert d'√©quipe et d'obtenir des commentaires des joueurs (¬´le contr√¥le semble bon / lent / tremblant / tout simplement horrible¬ª). <br><br>  Pour les jeux du genre RTS, les retards de transmission des commandes de 250 millisecondes ne sont m√™me pas perceptibles, √† 250-500 ms le gameplay est assez jouable, et les freins deviennent perceptibles √† 500 ms et plus.  Il est √©galement int√©ressant de noter que les joueurs sont habitu√©s au "rythme du jeu" et √† l'attente mentale d'un d√©lai entre les clics de souris et les r√©actions des unit√©s.  Une r√©ponse diff√©r√©e constante √©tait meilleure que des sauts dans les d√©lais de transmission des commandes (par exemple, de 80 √† 500 ms) - dans ce cas, des retards constants de 500 ms √©taient per√ßus comme jouables, et les changements modifiables semblaient "nerveux" et compliquaient le jeu. <br><br>  Cela a oblig√© les programmeurs √† concentrer leurs efforts sur la fluidit√© - il vaut mieux choisir une dur√©e de course plus longue et √™tre s√ªr que tout sera fluide et constant que d'effectuer les op√©rations le plus rapidement possible, face √† des ralentissements r√©guliers.  Tous les changements de vitesse doivent √™tre progressifs et le taux de croissance doit √™tre aussi faible que possible. <br><br>  Nous avons √©galement mesur√© les besoins de l'utilisateur pour le syst√®me - g√©n√©ralement, ils donnaient des commandes (d√©placer, attaquer, couper des arbres) environ toutes les secondes et demie √† deux secondes, parfois avec des pics de 3-4 √©quipes par seconde lors de batailles acharn√©es.  Comme les actions actives dans notre jeu sont en constante augmentation, les exigences les plus √©lev√©es pour l'√©change de donn√©es surviennent au milieu et vers la fin du jeu. <br><br>  Si vous prenez le temps d'√©tudier le comportement des utilisateurs, vous remarquerez d'autres fonctionnalit√©s de leur jeu, ce qui vous aidera √† configurer le jeu en r√©seau.  Dans <em>AoE</em> pendant les attaques, les utilisateurs ont rapidement cliqu√© sur la souris (cliquer-cliquer-cliquer-cliquer - avancer-avancer-avancer-avancer!), Ce qui a entra√Æn√© d'√©normes pics dans le nombre de commandes √©mises.  En outre, ils ont envoy√© de grands groupes d'unit√©s qui doivent ouvrir la voie - ainsi que d'√©normes pics dans les exigences de transmission de donn√©es sur le r√©seau.  Un simple filtre, coupant les commandes r√©p√©t√©es √† un moment donn√©, a consid√©rablement r√©duit l'impact n√©gatif de ce comportement. <br><br>  En g√©n√©ral, la surveillance des utilisateurs vous permettra de: <br><br><ul><li>  D√©couvrez les attentes des utilisateurs concernant les retards de jeu </li><li>  Aspects multijoueurs prototypes aux premiers stades de d√©veloppement </li><li>  D√©couvrez les comportements pr√©judiciables √† la vitesse du mode multi-utilisateur. </li></ul><br>  <strong><em>La mesure est la chose la plus importante.</em></strong>  Si vous introduisez des mesures dans les premi√®res √©tapes du travail, vous apprendrez des choses incroyables sur votre syst√®me d'√©change de donn√©es.  Rendez les m√©triques lisibles pour les testeurs et utilisez-les pour comprendre ce qui se passe √† l'int√©rieur du moteur r√©seau. <br><br>  Le√ßon: Une partie du probl√®me avec l'√©change de donn√©es dans AoE est survenue lorsque Mark a d√©duit les mesures trop t√¥t et n'a pas v√©rifi√© les niveaux de message (longueur et fr√©quence) apr√®s avoir pr√©par√© le code final.  Des choses inattendues comme des courses al√©atoires entre les IA, des chemins difficiles √† calculer et des packages de commandes mal structur√©s peuvent causer d'√©normes probl√®mes de performances, m√™me lorsque le syst√®me fonctionne bien. <br><br>  Faire en sorte que le syst√®me informe les testeurs et les d√©veloppeurs de ce qui semble √™tre un exc√®s de conditions aux limites - les programmeurs et les testeurs verront dans le processus de d√©veloppement quelles t√¢ches chargent le syst√®me;  cela r√©soudra les probl√®mes aux premiers stades de leur apparition. <br><br>  Prenez le temps d'expliquer aux testeurs comment fonctionne le syst√®me d'√©change de donn√©es, montrez-leur et expliquez-leur les mesures - vous serez peut-√™tre surpris qu'ils remarqueront quand d'√©tranges d√©faillances se produisent in√©vitablement dans le code r√©seau. <br><br>  En g√©n√©ral, les m√©triques doivent avoir les propri√©t√©s suivantes: <br><br><ul><li>  Soyez lisible et compr√©hensible par les testeurs </li><li>  Indiquez les goulots d'√©tranglement, les freins et les probl√®mes </li><li>  Peu d'impact sur l'ex√©cution et constamment lanc√©. </li></ul><br>  <strong><em>Formation des d√©veloppeurs.</em></strong>  Il est tr√®s difficile d'apprendre aux programmeurs habitu√©s √† cr√©er des applications mono-utilisateur √† r√©fl√©chir √† la s√©paration entre donner, recevoir et traiter une commande.  Il est facile d'oublier que vous pouvez demander quelque chose qui ne s'est pas produit ou ce qui pourrait arriver quelques secondes apr√®s l'√©mission de la commande.  L'exactitude des commandes doit √™tre v√©rifi√©e √† l'envoi et √† la r√©ception. <br><br>  Dans un mod√®le synchrone, les programmeurs doivent √©galement tenir compte du fait qu'√† l'int√©rieur de la simulation, le code ne devrait d√©pendre d'aucun facteur local (comme la disponibilit√© de temps libre, des √©quipements sp√©ciaux ou des param√®tres diff√©rents).  L'ex√©cution du code sur toutes les machines doit correspondre.  Par exemple, la pr√©sence de sons al√©atoires du terrain dans une simulation peut entra√Æner des comportements de jeu diff√©rents. <br><br>  <strong><em>Autres le√ßons.</em></strong>  Cela devrait √™tre le bon sens habituel - mais si vous d√©pendez d'un r√©seau tiers (dans notre cas, c'est DirectPlay), alors √©crivez une application de test ind√©pendante confirmant que lorsque les propri√©taires r√©clament une ¬´livraison garantie¬ª, les messages obtiennent vraiment cet ¬´ordre de paquet garanti¬ª en fait il y en a, et que le produit n'a pas de goulots d'√©tranglement cach√©s ou de comportement √©trange lors du traitement des donn√©es transmises dans votre jeu. <br><br>  Pr√©parez-vous √† cr√©er des applications de simulation et des simulateurs de tests de r√©sistance.  Au final, nous avons cr√©√© trois applications de test minimales diff√©rentes utilis√©es pour √©tudier les probl√®mes individuels et importants: les inondations de connexion, les probl√®mes de connexions simultan√©es lors de la s√©lection des opposants et les packages garantis perdus. <br><br>  Testez avec des modems (et, avec un peu de chance, avec des simulateurs de modem) le plus t√¥t possible;  Poursuivez les tests de modem (aussi douloureux que cela puisse √™tre) tout au long du processus de d√©veloppement.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s tout, les probl√®mes sont difficiles √† isoler (quelle est la raison de la forte diminution de la vitesse - le fournisseur, le jeu, le logiciel de communication, le modem, le service de recherche rival pour une correspondance ou autre chose?), Et les utilisateurs ne veulent pas s'emb√™ter avec des connexions √† distance lentes, s'habituer √† des vitesses LAN instantan√©es . </font><font style="vertical-align: inherit;">Il est essentiel de tester les connexions par modem avec la m√™me persistance que pour les jeux LAN multi-joueurs.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4b/f84/6f8/f4bf846f89de72b3374179b174094cc8.jpg" alt="image"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Am√©liorations pour </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Empires 2</font></font></em> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Empires 2: The Age of Kings,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons ajout√© des fonctionnalit√©s multi-utilisateurs telles que l'enregistrement de jeux, le transfert de fichiers et le suivi constant des statistiques sur le site Web de The Zone. Nous avons √©galement am√©lior√© les syst√®mes multijoueurs tels que l'int√©gration DirectPlay et le contr√¥le de vitesse pour faire face aux bugs et probl√®mes de vitesse identifi√©s apr√®s la sortie d' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Empires</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La fonction d'enregistrement de jeux √©tait l'une de ces choses qui ont √©t√© √† l'origine invent√©es pour le d√©bogage, et en cons√©quence est devenue une ¬´fonctionnalit√©¬ª √† part enti√®re du jeu. Les jeux enregistr√©s sont incroyablement populaires sur les sites de fans. Ils permettent aux joueurs de partager des strat√©gies et de les analyser, de voir des batailles c√©l√®bres et d'apprendre les jeux auxquels ils ont particip√©. L'enregistrement de jeux est devenu un outil de d√©bogage inestimable. √âtant donn√© que notre simulation est d√©terministe et que les jeux enregistr√©s sont synchrones dans le m√™me sens que le multijoueur, l'enregistrement de jeux nous a fourni un excellent moyen de jouer aux bugs, car √† chaque fois, il √©tait garanti de jouer de la m√™me mani√®re. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre int√©gration avec le service de recherche de rival (matchmaking) de The Zone a √©t√© limit√©e dans </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Empires pour</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simplement lancer le jeu. Dans </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Kings</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous l'avons √©largi, ce qui nous a permis de contr√¥ler les param√®tres de lancement et de fournir des rapports constants sur les statistiques. </font><font style="vertical-align: inherit;">Cela a permis aux joueurs de mieux trouver les jeux qui les int√©ressaient, car ils pouvaient voir les param√®tres du niveau de matchmaking, et ne pas attendre que les param√®tres du jeu s'affichent sur l'√©cran des param√®tres du jeu. </font><font style="vertical-align: inherit;">Dans le backend, nous avons mis en place des statistiques de reporting et de suivi constantes. </font><font style="vertical-align: inherit;">Nous avons fourni √† The Zone une structure commune qui a √©t√© remplie et transf√©r√©e au serveur √† la fin du jeu. </font><font style="vertical-align: inherit;">Les donn√©es de cette structure ont √©t√© utilis√©es pour cr√©er des √©valuations d'utilisateurs et les afficher sur le site Web de The Zone.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b89/ec7/ef8/b89ec7ef8b25272c8d6e35e6b1593f7d.jpg" alt="image"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Multijoueur RTS3: t√¢ches </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTS3 est le nom de code du jeu de strat√©gie de nouvelle g√©n√©ration Ensemble </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(environ Per: le jeu est sorti sous le nom Age of Mythology)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La structure RTS3 est cr√©√©e sur la base de la formule r√©ussie utilis√©e dans la s√©rie de jeux Age of Empires, avec l'ajout de nombreuses nouvelles fonctionnalit√©s et exigences pour le mode multi-utilisateurs.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bas√© sur l'ensemble des fonctionnalit√©s d' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Empires 1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Exigences obligatoires telles que jouer sur Internet, des cartes grandes et vari√©es, des milliers d'unit√©s g√©r√©es.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3D: RTS3 est un jeu enti√®rement en trois dimensions avec des animations interpol√©es et des positions et des rotations d'unit√©s non discr√®tes. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plus de joueurs - prise en charge de plus de huit joueurs. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Prise en charge TCP / IP: Notre objectif principal est une connexion Internet TCP / IP √† 56 / kbps. </font></font></li><li>    ‚Äî     ,      NAT. </li></ul><br>      RTS3         ,    <em>Age of Empires 1</em>  <em>2</em> ‚Äî   ‚Äî    RTS3       .  <em>AOE/AOK</em>         DirectPlay,   RTS3     ,        . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La transition vers un monde enti√®rement en trois dimensions signifie que nous devons √™tre plus attentifs aux probl√®mes de fr√©quence d'images et de fluidit√© globale de la simulation en mode multi-utilisateur. Cependant, cela signifie √©galement que le temps de mise √† jour de la situation de simulation et la fr√©quence d'images seront encore plus sujets √† la variabilit√©, et que nous devrons consacrer plus de temps au rendu. Dans le moteur Genie, les rotations des unit√©s √©taient discr√®tes et les animations √©taient li√©es √† la fr√©quence d'images dans BANG! une rotation d'unit√© arbitraire et une animation fluide sont possibles, c'est-√†-dire que visuellement le jeu sera beaucoup plus sensible √† l'influence des retards et des sauts dans la fr√©quence de mise √† jour. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finaliser </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Age of Kings</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous voulions nous attaquer √† ces domaines critiques o√π une conception r√©fl√©chie et l'utilisation d'outils r√©duiraient consid√©rablement le temps de d√©bogage. </font><font style="vertical-align: inherit;">Nous avons √©galement r√©alis√© √† quel point le processus de test it√©ratif est important dans la conception de nos jeux, une priorit√© √©lev√©e a donc √©t√© accord√©e √† la conclusion la plus rapide possible du jeu en ligne.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Architecture de communication RTS3 </font></font></h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66a/92d/4a9/66a92d4a984730fcf03a9a392945afb7.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 6. Architecture r√©seau orient√©e objet stricte de RTS3. </font></font></i> <br><br> <strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Approche orient√©e objet. </font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'architecture r√©seau de RTS3 est fortement orient√©e objet (voir figure 6). </font><font style="vertical-align: inherit;">Les exigences de prise en charge pour diverses configurations de r√©seau vous permettent de tirer parti de l'approche OO, abstraite des sp√©cificit√©s de la plate-forme, du protocole et de la topologie qui sous-tendent un ensemble d'objets et de syst√®mes g√©n√©ralis√©s.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les versions sp√©cifiques au protocole et √† la topologie des objets r√©seau contiennent le moins de code possible. La fonctionnalit√© principale de ces objets est abondante dans les objets parents de haut niveau. Pour impl√©menter le nouveau protocole, nous avons d√©velopp√© uniquement les objets r√©seau qui avaient besoin d'un code sp√©cifique au protocole (par exemple, pour le client et la session, qui devraient agir l√©g√®rement diff√©remment selon le protocole). Aucun autre objet syst√®me (tel que Channels, TimeSync, etc.) n'a n√©cessit√© de modifications, car ils n'avaient une interface avec le client et la session que via leurs interfaces abstraites de haut niveau. </font></font><br><br> <strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Topologie d'√©gal √† √©gal.</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le moteur Genie prend en charge une topologie de r√©seau d'√©gal √† √©gal dans laquelle tous les clients d'une session se connectent les uns aux autres dans une configuration en √©toile. </font><font style="vertical-align: inherit;">Dans RTS3, nous avons continu√© √† utiliser cette topologie, car lorsqu'elle est impl√©ment√©e avec un mod√®le de simulation synchrone, elle pr√©sente des avantages inh√©rents. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La topologie d'√©gal √† √©gal implique l'utilisation d'une configuration en √©toile pour les clients connect√©s dans une session (figure 7). </font><font style="vertical-align: inherit;">Autrement dit, chaque client est connect√© √† tous les autres clients. </font><font style="vertical-align: inherit;">Le m√™me sch√©ma a √©t√© utilis√© aux </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√¢ges 1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f35/d91/d21/f35d91d21ae3a744d54db202a3710ed4.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 7. Configuration en √©toile des clients homologues dans une session. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de pair √† pair:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Diminution de la latence due au sch√©ma de messagerie client √† client au lieu de client-serveur-client. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Il n'y a pas de lien faible central - si le client (m√™me l'h√¥te) se d√©connecte de la session, le jeu peut continuer. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inconv√©nients de pair √† pair: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Compos√©s plus actifs dans le syst√®me (somme de n = 0 √† k-1 (n)), c'est-√†-dire plus de maillons faibles potentiels et des retards probables plus √©lev√©s. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L'incapacit√© √† prendre en charge certaines configurations NAT dans un tel sch√©ma. </font></font></li></ul><br> <strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Net.lib.</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lors du d√©veloppement de l'architecture d'√©change de donn√©es RTS3, notre objectif √©tait de cr√©er un syst√®me sp√©cialement con√ßu pour les jeux strat√©giques, mais en m√™me temps, nous voulions cr√©er un syst√®me pouvant √™tre utilis√© pour nos outils internes, ainsi que de l'√©tendre pour prendre en charge les futurs jeux. Pour atteindre cet objectif, nous avons cr√©√© une architecture multicouche qui prend en charge les objets de niveau jeu tels que le client et la session, mais prend √©galement en charge les objets de transport de bas niveau tels que les liens et les adresses r√©seau.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abf/0cc/057/abf0cc057404cbf9c580d39155c9aff9.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 8. Quatre couches de services dans notre mod√®le de r√©seau.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RTS3 est bas√© sur notre moteur BANG! une nouvelle g√©n√©ration qui utilise une architecture modulaire avec des biblioth√®ques de composants telles que le son, le rendu et la mise en r√©seau. Le sous-syst√®me r√©seau est int√©gr√© ici en tant que composant, mais est connect√© au moteur BANG! (ainsi qu'avec divers outils internes). Notre mod√®le de r√©seau est divis√© en quatre couches de service, qui ne sont pas, mais pas compl√®tement, similaires au mod√®le de r√©seau OSI utilis√© dans le jeu (voir la figure 8). </font></font><br><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaussettes niveau 1</font></font></u> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier niveau, Socks, fournit une API fondamentale de niveau socket en C. Elle est abstraite pour cr√©er un ensemble g√©n√©rique de proc√©dures r√©seau de bas niveau pour de nombreux syst√®mes d'exploitation. L'interface ressemble √† l'interface de socket Berkeley. La couche Socks est principalement utilis√©e par les couches sup√©rieures de la biblioth√®que r√©seau et n'est pas vraiment destin√©e √† √™tre utilis√©e par le code d'application. </font></font><br><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link, Level 2</font></font></u> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Level 2, Link, fournit des services de couche transport. Les objets √† ce niveau, tels que Link, Listener, NetworkAddress et Packet, sont des √©l√©ments utiles n√©cessaires pour √©tablir une connexion et envoyer des messages par-dessus (voir la figure 9).</font></font><br><br><ul><li> <strong>Packet ():</strong>      ‚Äî  ,    / (    )     . </li><li> <strong>Link ():</strong>      .       ,           .  send  receive  ,    ,      void*. </li><li> <strong>Listener ():</strong>  .           . </li><li> <strong>Data stream ( ):</strong>        , , ,   . </li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Net Address:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entit√© d'adressage r√©seau ind√©pendante du protocole.</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ping: Une</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classe de ping simple. </font><font style="vertical-align: inherit;">Signale un retard de r√©seau pr√©sent lors de la communication avec la liaison.</font></font></li><li><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a4/8a3/f76/0a48a3f7672c524404eab911ebd7d062.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 9. Niveau de liaison.</font></font></i> </li></ul><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveau multijoueur 3</font></font></u> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le niveau multijoueur est le niveau le plus √©lev√© d'objets et de proc√©dures pr√©sents dans l'API net.lib. </font><font style="vertical-align: inherit;">Il s'agit de la couche avec laquelle RTS3 interagit lors de la collecte d'objets de niveau inf√©rieur, tels que des liens et de leur conversion en concepts / objets plus utiles - clients, sessions, etc. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les objets les plus int√©ressants de la biblioth√®que du r√©seau BANG! </font><font style="vertical-align: inherit;">sont ceux qui sont au niveau multijoueur. </font><font style="vertical-align: inherit;">Ici, l'API fournit un ensemble d'objets avec lesquels le niveau de jeu peut interagir, mais fournit une impl√©mentation ind√©pendante de l'approche du jeu.</font></font><br><br><ul><li> <strong>Client ():</strong>      .       ()     (  ).    ,    . </li><li> <strong>Session ():</strong>  ,   ,  ,    .       .        host()  join(),    ,   ,     .       / ,           . </li><li> <strong>Channel  Ordered Channel:</strong>        .              .      TimeSync,            . </li><li> <strong>Shared Data:</strong>        .        ,     ,                . </li><li> <strong>Time Sync:</strong>           . </li></ul><br> <u>Game Communications,  4</u> <br><br>      RTS3.    ,       ,     .               ,       ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ac/d8a/f3b/0acd8af3b2f9d73984b7afda314f0e6e.jpg" alt="image"></div><br><h2>      </h2><br>  <strong><em>Syst√®me de synchronisation am√©lior√©.</em></strong>  Aucune des √©quipes de d√©veloppement d' <em>Age of Empires</em> n'a pu dire que nous n'avons pas besoin de meilleurs outils de synchronisation.  Comme dans tout projet, lors de l'analyse du processus de d√©veloppement dans l'autopsie, il s'av√®re que la plupart du temps a √©t√© consacr√© √† certains domaines, mais cela pourrait √™tre beaucoup moins si nous les abordions √† l'avance.  Au d√©but du d√©veloppement de RTS3, le d√©bogage de la synchronisation √©tait en t√™te de liste de ces domaines. <br><br>  Le syst√®me de suivi de synchronisation RTS3 vise principalement √† reconna√Ætre rapidement les bogues de synchronisation.  Les autres priorit√©s √©taient la simplification de l'utilisation, la capacit√© de traiter arbitrairement de grandes quantit√©s de donn√©es synchronis√©es transmises par le syst√®me, la possibilit√© de compiler compl√®tement le code de synchronisation dans la version finale, et enfin, la possibilit√© de changer compl√®tement la configuration de test en changeant les variables au lieu de recompiler compl√®tement. <br><br>  La v√©rification de la synchronisation dans RTS3 est effectu√©e √† l'aide de deux ensembles de macros: <br><br> <code>#define syncRandCode(userinfo) <br> gSync-&gt;addCodeSync(cRandSync, userinfo, __FILE__, __LINE__) <br></code> <br><br> <code>#define syncRandData(userinfo, <br> v) gSync-&gt;addDataSync(cRandSync, v, userinfo, __FILE__, __LINE__)</code> <br> <br>  Ces deux macros re√ßoivent le param√®tre de cha√Æne userinfo, qui est le nom ou l'indication d'un √©l√©ment synchronis√© sp√©cifique.  Par exemple, un appel de synchronisation pourrait ressembler √† ceci: <br><br> <code>syncRandCode("syncing the random seed", seed);</code> <br> <br>  <em><strong>Commandes de console synchrones et variables de configuration.</strong></em>  Comme tout d√©veloppeur de mod <em>Quake</em> peut le confirmer, les commandes de la console et les variables de configuration sont tr√®s importantes pour le processus de d√©veloppement.  Les commandes de la console sont de simples appels de fonction effectu√©s √† l'aide du fichier de configuration de lancement, de la console en jeu ou de l'interface utilisateur, qui invoquent des fonctionnalit√©s de jeu arbitraires.  Les variables de configuration sont des types de donn√©es nomm√©s fournis via les fonctions simples get, set, define et toggle, que nous utilisons pour toutes sortes de tests et de d√©finition des param√®tres de configuration. <br><br>  Paul a cr√©√© des versions compatibles multijoueurs de nos syst√®mes de commande de console et des configurations variables.  Avec leur aide, nous pouvons facilement transformer une variable de configuration r√©guli√®re (par exemple, enableCheating) en une variable de configuration multijoueur en ajoutant un indicateur √† la d√©finition de la variable de configuration.  Si ce drapeau est activ√©, la variable de configuration est transf√©r√©e dans le jeu multijoueur et les d√©cisions synchronis√©es dans le jeu (par exemple, sur la possibilit√© de transfert gratuit de ressources) peuvent √™tre bas√©es sur sa valeur.  Les commandes de console du multijoueur ont un principe similaire - les appels aux commandes de console du multijoueur sont transmis sur le r√©seau et sont ex√©cut√©s de mani√®re synchrone sur toutes les machines clientes. <br><br>  En utilisant ces deux outils, les d√©veloppeurs peuvent utiliser le syst√®me multijoueur sans √©crire de code.  Ils peuvent rapidement ajouter de nouveaux outils de test et de configuration et les int√©grer facilement dans un environnement en r√©seau. <br><br><h2>  Pour r√©sumer </h2><br>  La simulation synchronis√©e et le mod√®le pair √† pair ont √©t√© utilis√©s avec succ√®s dans la s√©rie de jeux Age of Empires.  Malgr√© l'importance cruciale d'investir du temps dans la cr√©ation d'outils et de technologies pour r√©soudre les principaux probl√®mes de cette approche (tels que la synchronisation et les m√©triques de r√©seau), la viabilit√© de cette architecture dans le genre de strat√©gies en temps r√©el a √©t√© prouv√©e par l'exp√©rience.  Les am√©liorations ult√©rieures que nous avons apport√©es √† RTS3 ont conduit au fait que le gameplay multijoueur est presque impossible √† distinguer du mode solo, m√™me dans les conditions les plus terribles de connexions r√©seau. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr417703/">https://habr.com/ru/post/fr417703/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr417689/index.html">Mobio s'entretient avec le PDG d'Appnext sur le march√© du CPI et les tendances des applications mobiles</a></li>
<li><a href="../fr417691/index.html">Notre √©tag√®re est un programmeur C #. Et vous?</a></li>
<li><a href="../fr417697/index.html">√âditeur d'images simple sur VueJS</a></li>
<li><a href="../fr417699/index.html">Western Digital ferme une autre usine de disques durs en raison de la baisse de la demande</a></li>
<li><a href="../fr417701/index.html">Des scripts simples √† l'application client-serveur √† faire soi-m√™me sur WCF: pourquoi j'aime travailler en CM</a></li>
<li><a href="../fr417705/index.html">Comment un fabricant de cartes graphiques affecte la rentabilit√© de l'exploitation de GPU</a></li>
<li><a href="../fr417707/index.html">CSS-in-JS - mythes et r√©alit√© (composants de style comme exemple)</a></li>
<li><a href="../fr417709/index.html">O√π et comment les d√©veloppeurs √©valuent-ils leurs employeurs? Services d'√©valuation d'entreprises dans le secteur informatique</a></li>
<li><a href="../fr417711/index.html">Que lire sur Swift en russe?</a></li>
<li><a href="../fr417715/index.html">Au revoir Google Maps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>