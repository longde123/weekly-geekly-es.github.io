<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§úüèΩ üëßüèø üë®üèø‚ÄçüöÄ Chorda. Essayer de le faire de fa√ßon d√©clarative üë©üèº ü§∏üèæ üç∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chaque fois que je dois m'asseoir pour cr√©er une nouvelle application, je tombe dans une stupeur facile. Ma t√™te tourne de la n√©cessit√© de choisir la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chorda. Essayer de le faire de fa√ßon d√©clarative</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480856/"><p>  Chaque fois que je dois m'asseoir pour cr√©er une nouvelle application, je tombe dans une stupeur facile.  Ma t√™te tourne de la n√©cessit√© de choisir la biblioth√®que ou le framework √† prendre ce temps.  La derni√®re fois que j'ai √©crit sur la biblioth√®que X, mais maintenant le framework Y a grandi et a √©t√© transf√©r√©, et il y a toujours un Kit UI cool Z, et beaucoup de travail a √©t√© laiss√© par les projets pr√©c√©dents. </p><br><p>  √Ä partir d'un certain point, j'ai r√©alis√© que le cadre n'a pas vraiment d'importance - ce dont j'ai besoin, je peux le faire sur n'importe lequel d'entre eux.  Ici, il semble que vous devriez √™tre heureux, prendre quelque chose avec le maximum d'√©toiles sur le github et se calmer.  Mais tout de m√™me, un d√©sir irr√©sistible na√Æt constamment de faire quelque chose de lui-m√™me, son propre v√©lo.  Eh bien.  Quelques r√©flexions g√©n√©rales sur ce sujet et un cadre appel√© Chorda vous attendent sous la coupe. </p><a name="habracut"></a><br><p>  En fait, le probl√®me n'est pas que la d√©cision de quelqu'un d'autre soit mauvaise ou inefficace.  Non.  Le probl√®me est que la d√©cision de quelqu'un d'autre nous fait penser d'une mani√®re qui peut ne pas nous convenir.  Mais attendez.  Que signifie ¬´pratique-incommode¬ª et comment cela peut-il m√™me affecter le d√©veloppement?  Rappelons qu'il existe une chose telle que DX, en fait - un ensemble de pratiques personnelles √©tablies et g√©n√©ralement accept√©es.  De l√†, nous pouvons dire que cela nous convient lorsque notre propre DX co√Øncide avec le DX de l'auteur de la biblioth√®que ou du framework.  Et dans le cas o√π ils divergent, l'inconfort m√™me, l'irritation et la recherche de quelque chose de nouveau surviennent. </p><br><h3 id="nemnozhko-istorii">  Un peu d'histoire </h3><br><p>  Lorsque vous d√©veloppez une interface utilisateur pour une application d'entreprise, vous √™tes confront√© √† un grand nombre de formulaires utilisateur.  Et un jour, une pens√©e brillante me vient √† l'esprit: pourquoi est-ce que je cr√©e un formulaire Web √† chaque fois que je peux simplement lister les champs dans JSON et alimenter la structure r√©sultante au g√©n√©rateur?  Et, bien que dans le monde de l'entreprise sanglante, une telle approche ne fonctionne pas trop bien (pourquoi donc, c'est une conversation s√©par√©e), mais l'id√©e de passer d'un style imp√©ratif √† un style d√©claratif n'est g√©n√©ralement pas mauvaise.  La preuve en est le grand nombre de g√©n√©rateurs de formulaires Web, de pages et m√™me de sites entiers qui peuvent √™tre facilement trouv√©s sur le Web. </p><br><p>  Donc, √† un moment donn√©, je n'√©tais pas √©tranger au d√©sir d'am√©liorer mon code en raison de la transition vers la d√©clarativit√©.  Mais d√®s que nous avions besoin non seulement d'√©l√©ments html standard, mais de composants de widget complexes et interactifs, nous ne pouvions pas nous en sortir avec un simple g√©n√©rateur.  Les exigences de r√©utilisation, d'int√©grabilit√©, d'extensibilit√©, etc. du code s'y sont rapidement ajout√©es.  D√©velopper votre propre biblioth√®que de composants avec une API d√©clarative ne s'est pas fait attendre. </p><br><p>  Mais ici, le bonheur n'est pas arriv√©.  La meilleure situation refl√©tera probablement l'opinion de mon coll√®gue, qui devait utiliser la biblioth√®que cr√©√©e.  Il a regard√© les exemples, la documentation et a dit: "La biblioth√®que est cool. Belle, dynamique. Mais comment puis-je faire une application √† partir de tout cela?"  Et il avait raison.  Il s'est av√©r√© que fabriquer un composant n'est pas la m√™me chose que combiner plusieurs composants ensemble et les faire fonctionner de mani√®re transparente. </p><br><p>  Beaucoup de temps s'est √©coul√© depuis lors.  Et quand une fois de plus j'ai √©t√© visit√© par le d√©sir de rassembler les pens√©es et les d√©veloppements, j'ai d√©cid√© d'agir un peu diff√©remment et de ne pas aller de bas en haut, mais de haut en bas. </p><br><h3 id="upravlenie-prilozheniem--upravlenie-sostoyaniyami">  Gestion des applications == Gestion des √©tats </h3><br><p>  Je suis plus habitu√© √† consid√©rer l'application comme une machine √† √©tats finis avec un ensemble d'√©tats clones.  Et le travail de l'application comme un ensemble de transitions d'un √©tat √† un autre, dans lequel le changement de mod√®le conduit √† la cr√©ation d'une nouvelle version de la vue.  √Ä l'avenir <strong>,</strong> j'appellerai certaines <strong>donn√©es</strong> fixes (un objet, un tableau, un type primitif, etc.) li√©es √† leur seule repr√©sentation - un <strong>document</strong> . </p><br><p>  Il y a un probl√®me √©vident - pour de nombreuses valeurs du mod√®le, il est n√©cessaire de d√©crire de nombreuses options pour le document.  Deux approches sont g√©n√©ralement utilis√©es ici: </p><br><ol><li>  Mod√®les.  Nous utilisons notre langage de balisage pr√©f√©r√© et le compl√©tons avec des directives de branchement et de bouclage. </li><li>  Les fonctions  Nous d√©crivons dans nos fonctions nos branches et boucles dans notre langage de programmation pr√©f√©r√©. </li></ol><br><p>  En r√®gle g√©n√©rale, ces deux approches sont d√©clar√©es d√©claratives.  Le premier est consid√©r√© comme d√©claratif, car il est bas√© sur, quoique l√©g√®rement d√©velopp√©, mais sur les r√®gles du langage de balisage.  Le second - parce qu'il se concentre sur la composition des fonctions, dont un certain nombre agissent comme des r√®gles.  Ce qui est remarquable, il n'y a pas de fronti√®re claire entre les mod√®les et les fonctions maintenant. </p><br><p>  D'une part, j'aime les mod√®les, mais d'autre part, je voulais en quelque sorte utiliser les fonctionnalit√©s de javascript.  Par exemple, quelque chose comme ceci: </p><br><pre><code class="javascript hljs">createFromConfig({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Alice'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">tag</span></span>: <span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'clickable box'</span></span>, <span class="hljs-attr"><span class="hljs-attr">onClick</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Click'</span></span>) } })</code> </pre> <br><p>  Le r√©sultat est une configuration JS qui d√©crit un <strong>√©tat</strong> sp√©cifique entier.  Pour d√©crire les nombreux √©tats, il sera n√©cessaire de r√©aliser l'extensibilit√© de cette configuration.  Et quel est le moyen le plus pratique de rendre un ensemble d'options extensible?  Nous n'inventerons rien ici - les options de surcharge existent depuis longtemps.  Comment cela fonctionne peut √™tre vu dans l'exemple de Vue avec son API Options.  Mais, contrairement √† la m√™me Vue, je me demandais si l'√©tat complet, y compris les donn√©es et le document, pouvait √™tre d√©crit de la m√™me mani√®re. </p><br><h3 id="struktura-prilozheniya-i-deklarativnost">  Structure d'application et caract√®re d√©claratif </h3><br><blockquote>  Le terme ¬´composant¬ª est devenu trop vague, surtout apr√®s l‚Äôapparition de ce que l‚Äôon appelle  composants fonctionnels.  Alors que nous passons √† la structure de l'application, j'appellerai le composant un <strong>√©l√©ment structurel</strong> . </blockquote><p>  Tr√®s rapidement, je suis arriv√© √† la conclusion que l'√©l√©ment structurel (composant) n'est pas un √©l√©ment de document, mais une entit√©, qui: </p><br><ol><li>  combine des donn√©es et des documents (liaison et √©v√©nements) </li><li>  connect√© √† d'autres entit√©s similaires (structure arborescente) </li></ol><br><p>  Comme je l'ai soulign√© pr√©c√©demment, si vous percevez l'application comme un ensemble d'√©tats, alors pour ces √©tats, vous devez avoir une m√©thode de description.  De plus, il est n√©cessaire de trouver une telle m√©thode pour qu'elle ne contienne pas d'op√©rateurs imp√©ratifs "faux".  Nous parlons de ces √©l√©ments tr√®s auxiliaires qui sont introduits dans les mod√®les - <em>#if</em> , <em>#elsif</em> , <em>v-for</em> , etc.  Je pense que beaucoup de gens connaissent d√©j√† la solution - il est n√©cessaire de transf√©rer la logique au mod√®le, en laissant au niveau de la pr√©sentation une API qui vous permet de contr√¥ler les √©l√©ments structurels √† travers des types de donn√©es simples. </p><br><p>  Par gestion, je comprends la pr√©sence de variabilit√© et de cyclicit√©. </p><br><h4 id="variativnost-if-else">  Variabilit√© (if-else) </h4><br><p>  Voyons comment vous pouvez contr√¥ler les options d'affichage en utilisant l'exemple d'un composant de carte dans Chorda: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isHeaderOnly = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> card = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">$header</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-attr"><span class="hljs-attr">$footer</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-attr"><span class="hljs-attr">components</span></span>: {<span class="hljs-attr"><span class="hljs-attr">header</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">footer</span></span>: !isHeaderOnly} <span class="hljs-comment"><span class="hljs-comment">//    })</span></span></code> </pre> <br><p>  En d√©finissant la valeur de l'option des <em>composants</em> , vous pouvez contr√¥ler les composants affich√©s.  Et lors de la liaison des <em>composants</em> avec le stockage r√©actif, nous obtenons que notre structure passera sous la gestion des donn√©es.  Il y a une mise en garde: l'objet est utilis√© comme valeur et les cl√©s ne sont pas ordonn√©es, ce qui impose certaines restrictions sur les <em>composants</em> . </p><br><h4 id="ciklichnost-for">  Cycle (pour) </h4><br><p>  L'utilisation de donn√©es dont la quantit√© n'est connue qu'au moment de l'ex√©cution n√©cessitera une it√©ration sur les listes. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> drinks = [<span class="hljs-string"><span class="hljs-string">'Coffee'</span></span>, <span class="hljs-string"><span class="hljs-string">'Tea'</span></span>, <span class="hljs-string"><span class="hljs-string">'Milk'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">html</span></span>: <span class="hljs-string"><span class="hljs-string">'ul'</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>: <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">defaultItem</span></span>: { <span class="hljs-attr"><span class="hljs-attr">html</span></span>: <span class="hljs-string"><span class="hljs-string">'li'</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>: <span class="hljs-string"><span class="hljs-string">'list-item'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">items</span></span>: drinks })</code> </pre> <br><p>  La valeur de l'option <em>items</em> est Array, respectivement, nous obtenons un ensemble ordonn√© de composants.  La liaison d' <em>√©l√©ments</em> au stockage, comme dans le cas des <em>composants,</em> transf√©rera le contr√¥le aux donn√©es. </p><br><p>  Les √©l√©ments structurels sont connect√©s les uns aux autres dans une hi√©rarchie arborescente.  Si nous combinons les exemples pr√©c√©dents, alors pour afficher la liste dans le corps de la carte, nous obtenons ce qui suit: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   const state = { struct: { header: true, footer: false, }, drinks: ['Coffee', 'Tea', 'Milk'] } //  const card = new Html({ $header: { /*  */ }, $content: { html: 'ul', css: 'list', defaultItem: { html: 'li', css: 'list-item' }, items: state.drinks }, $footer: { /*  */ }, components: state.struct })</span></span></code> </pre> <br><p>  De cette fa√ßon, la structure de donn√©es de l'application est cr√©√©e.  Il suffit d'avoir deux types de g√©n√©rateurs - bas√©s sur Object et bas√©s sur Array.  Il ne reste plus qu'√† comprendre comment se produit la transformation des √©l√©ments structurels en document. </p><br><h3 id="kogda-vse-uzhe-pridumano-za-nas">  Quand tout est d√©j√† invent√© pour nous </h3><br><p>  En g√©n√©ral, je suis en faveur du fait que le syst√®me de rendu des documents devrait √™tre impl√©ment√© au niveau du navigateur (bien qu'au moins le m√™me VDOM).  Et notre t√¢che ne sera que de le connecter soigneusement √† l'arborescence des composants.  Apr√®s tout, quelle que soit la vitesse de la biblioth√®que, le navigateur l'a de toute fa√ßon. </p><br><p>  Honn√™tement, j'ai essay√© de faire ma fonction de rendu un jour, mais apr√®s un certain temps, j'ai abandonn√©, car je ne peux pas dessiner plus vite que VanillaJS (malheureusement!).  Il est maintenant √† la mode d'utiliser VDOM pour le rendu, et ses impl√©mentations sont peut-√™tre m√™me abondantes.  Donc, plus une impl√©mentation de plus de l'arborescence virtuelle, j'ai d√©cid√© de ne pas l'ajouter √† la tirelire du github - le prochain framework suffit. </p><br><p>  Initialement, un adaptateur pour la biblioth√®que Maquette a √©t√© cr√©√© √† Chorda pour le rendu, mais d√®s que des t√¢ches ¬´du monde r√©el¬ª ont commenc√© √† appara√Ætre, il s'est av√©r√© qu'il √©tait plus pratique d'avoir un tiroir sur React.  Dans ce cas, par exemple, vous pouvez simplement utiliser les React DevTools existants et ne pas √©crire les v√¥tres. </p><br><p>  Pour connecter VDOM avec des √©l√©ments structurels, vous avez besoin d'une telle <strong>disposition</strong> .  Elle peut √™tre appel√©e fonction documentaire d'un √©l√©ment structurel.  Ce qui est important, c'est une fonction pure. </p><br><p>  Prenons un exemple avec une carte qui a un en-t√™te, un corps et un sous-sol.  Il a d√©j√† √©t√© mentionn√© que les composants ne sont pas command√©s, c'est-√†-dire  si nous commen√ßons √† allumer / √©teindre les composants pendant le fonctionnement, ils appara√Ætront √† chaque fois dans une nouvelle commande.  Voyons comment cela est r√©solu par la mise en page: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orderedByKeyLayout</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, type, props, components</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(type, props, components.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a.key - b.key).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.render())) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">$header</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">$content</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">$footer</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">layout</span></span>: orderedByKeyLayout <span class="hljs-comment"><span class="hljs-comment">//     })</span></span></code> </pre> <br><p>  La disposition vous permet de configurer le soi-disant  L'√©l√©ment h√¥te auquel le composant est associ√© et ses enfants ( <em>√©l√©ments</em> et <em>composants</em> ).  Habituellement, une mise en page standard suffit √©galement, mais dans certains cas, la mise en page n√©cessite la pr√©sence d'√©l√©ments wrapper (par exemple, pour les grilles) ou l'affectation de classes sp√©ciales, que nous ne voulons pas prendre au niveau des composants. </p><br><h3 id="schepotka-reaktivnosti">  Une pinc√©e de r√©activit√© </h3><br><p>  Apr√®s avoir d√©clar√© et dessin√© la structure des composants, nous obtenons un √©tat correspondant √† un ensemble de donn√©es sp√©cifique.  Ensuite, nous devons d√©crire les nombreux ensembles de donn√©es et la r√©action √† leur changement. </p><br><p>  Lorsque je travaillais avec des donn√©es, je n'aimais pas deux choses: </p><br><ul><li>  Immunit√©.  Une bonne chose pour suivre les changements est le versioning pour les pauvres, ce qui fonctionne tr√®s bien sur les objets primitifs et plats.  Mais d√®s que la structure devient plus complexe et que le nombre d'investissements augmente, il devient difficile de maintenir l'immunit√© d'un objet complexe. </li><li>  Remplacement.  Si je mets un objet dans l'entrep√¥t de donn√©es, lorsque je le demande, je peux en renvoyer une copie ou un autre objet ou proxy en g√©n√©ral qui a une similitude structurelle avec lui. </li></ul><br><p>  Je voulais avoir un r√©f√©rentiel qui se comporte comme immuable, mais √† l'int√©rieur il contient des donn√©es mutables, qui maintiennent √©galement la persistance des liens.  Dans le cas id√©al, cela ressemblerait √† ceci: je cr√©e un r√©f√©rentiel, j'y √©cris un objet vide, je commence √† saisir des donn√©es √† partir du formulaire de demande, et apr√®s avoir cliqu√© sur le bouton soumettre, j'obtiens le m√™me objet (le m√™me lien!) Avec les propri√©t√©s remplies.  J'appelle ce cas id√©al, car il n'arrive pas souvent que le mod√®le de stockage corresponde au mod√®le de pr√©sentation. </p><br><p>  Une autre t√¢che qui doit √™tre r√©solue consiste √† fournir des donn√©es du stockage aux √©l√©ments structurels.  Encore une fois, nous n'inventerons rien et utiliserons l'approche de la connexion √† un <strong>contexte</strong> commun.  Dans le cas de Chorda, nous n'avons pas acc√®s au contexte lui-m√™me, mais seulement √† son affichage, appel√© <strong>le scope</strong> .  De plus, la port√©e du composant est le contexte de ses composants enfants.  Cette approche vous permet d'affiner, d'√©tendre ou de remplacer les donn√©es connexes √† n'importe quel niveau de notre application, et ces modifications seront isol√©es. </p><br><p>  Un exemple de la fa√ßon dont les donn√©es contextuelles sont r√©parties sur une arborescence de composants: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-comment"><span class="hljs-comment">//     scope: { drink: 'Coffee' }, $component1: { scope: { cups: 2 }, $content: { $myDrink: { //      ,    drinkChanged: function (v) { //    drink   text this.opt('text', v) } }, $numCups: { cupsChanged: function (v) { this.opt('text', v + ' cups') } } } }, $component2: { scope: { drink: 'Tea' //      drink }, drinkChanged: function (v) { //    drink   text this.opt('text', v) } } }) //    // &lt;div&gt; // &lt;div&gt; // &lt;div&gt; // &lt;div&gt;Coffee&lt;/div&gt; // &lt;div&gt;2 cups&lt;/div&gt; // &lt;/div&gt; // &lt;/div&gt; // &lt;div&gt;Tea&lt;/div&gt; // &lt;/div&gt;</span></span></code> </pre><br><p>  Le moment le plus difficile √† comprendre est que chaque composant a son propre contexte, et non celui d√©clar√© tout en haut de la structure, comme nous le faisons habituellement lorsque nous travaillons avec des mod√®les. </p><br><h3 id="chto-tam-bylo-naschet-peregruzki-opciy">  Qu'en est-il de la surcharge d'options? </h3><br><p>  Vous √™tes s√ªrement confront√© √† une situation o√π il y a un grand composant et il est n√©cessaire de changer un petit composant imbriqu√© quelque part profond√©ment √† l'int√©rieur.  Ils disent que la granulation et la composition devraient aider ici.  Et aussi, que les composants et l'architecture doivent √™tre con√ßus tout de suite.  La situation devient tr√®s triste si la grande composante n'est pas la v√¥tre, mais fait partie d'une biblioth√®que d√©velopp√©e par une autre √©quipe ou m√™me une communaut√© ind√©pendante.  Et s'ils pouvaient facilement apporter des modifications au composant de base, m√™me s'ils n'√©taient pas initialement pr√©vus? </p><br><p>  Habituellement, les composants des biblioth√®ques sont con√ßus comme des classes, puis ils peuvent √™tre utilis√©s comme base pour cr√©er de nouveaux composants.  Mais voici une petite fonctionnalit√© cach√©e que je n'ai jamais aim√©: parfois nous cr√©ons une classe juste pour l'appliquer en un seul endroit.  C'est bizarre.  Par exemple, j'ai l'habitude d'utiliser des classes pour taper, de cr√©er des relations entre des groupes d'objets et de ne pas les utiliser pour r√©soudre le probl√®me de d√©composition. </p><br><p>  Voyons comment les classes fonctionnent avec la configuration dans Chorda. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      class Card extends Html { config () { return { css: 'box', $header: {}, $content: {}, $footer: {} } } } const html = new Html({ css: 'panel', $card: { as: Card, $header: { //       title $title: { css: 'title', text: 'Card title' } } } })</span></span></code> </pre> <br><p>  J'aime plus cette option que la cr√©ation d'une classe TitledCard sp√©ciale qui ne sera utilis√©e qu'une seule fois.  Et si vous devez faire partie des options, vous pouvez utiliser le m√©canisme d'impuret√©.  Eh bien, personne n'a annul√© Object.assign. </p><br><p>  √Ä Chorda, une classe est essentiellement un conteneur pour la configuration et joue le r√¥le d'une sorte sp√©ciale d'impuret√©. </p><br><h3 id="pochemu-esche-odin-freymvork">  Pourquoi un autre cadre? </h3><br><p>  Je r√©p√®te qu'√† mon avis, le cadre porte davantage sur la fa√ßon de penser et l'exp√©rience que sur la technologie.  Mes habitudes et DX ont demand√© une d√©clarativit√© dans JS, que je n'ai pas pu trouver dans d'autres solutions.  Mais l'impl√©mentation d'une fonctionnalit√© en a tir√© de nouvelles, et apr√®s un certain temps, elles ont tout simplement cess√© de s'int√©grer dans le cadre d'une biblioth√®que sp√©cialis√©e. </p><br><p>  √Ä l'heure actuelle, Chorda est en d√©veloppement actif.  Les directions principales sont d√©j√† visibles, mais les d√©tails changent constamment. </p><br><p>  Merci d'avoir lu jusqu'au bout.  Je serais ravi de revoir. </p><br><h3 id="gde-mozhno-posmotret">  O√π puis-je voir? </h3><br><p>  <a href="https://eliace.github.io/chorda-docs/">La documentation</a> </p><br><p>  <a href="https://github.com/eliace/chorda/tree/master/packages/chorda-core">Sources GitHub</a> </p><br><p>  <a href="https://codepen.io/collection/DkGzvo">Exemples CodePen</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480856/">https://habr.com/ru/post/fr480856/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480838/index.html">Les requ√™tes SQL sont rapides. Partie 1</a></li>
<li><a href="../fr480840/index.html">Cyberattaques contre les syst√®mes hydroacoustiques: mythes et r√©alit√©</a></li>
<li><a href="../fr480844/index.html">Habr Quest {concept}</a></li>
<li><a href="../fr480848/index.html">Kits et constructeurs pour les ing√©nieurs √©lectroniques d√©butants √¢g√©s de 6 √† 10 ans. Ce qui est disponible en magasin</a></li>
<li><a href="../fr480852/index.html">D√©veloppement rapide d'applications Web sur Vaadin et Spring Boot</a></li>
<li><a href="../fr480858/index.html">Lancez Linux dans un navigateur - l'√©mulateur jor1k vous aidera (avec Monkey Island, Doom et Frontier Elite II int√©gr√©s)</a></li>
<li><a href="../fr480860/index.html">Th√©orie de l'antirouille</a></li>
<li><a href="../fr480866/index.html">Une nouvelle √®re de d√©veloppement web ou ¬´tout est d√©j√† l√†¬ª</a></li>
<li><a href="../fr480870/index.html">R√©sultats de la d√©cennie</a></li>
<li><a href="../fr480872/index.html">Intel a ferm√© une faille de s√©curit√© signal√©e il y a six mois</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>