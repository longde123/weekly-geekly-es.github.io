<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèª üîÄ üèÇüèø Generador de mazmorras de nodo gr√°fico üé∑ üñåÔ∏è ü§úüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En esta publicaci√≥n describir√© el algoritmo para la generaci√≥n procesal de niveles de una mazmorra bidimensional con una estructura predeterminada. En...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Generador de mazmorras de nodo gr√°fico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436198/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pt/uh/r0/ptuhr0jo9giaq3dkb15uiqlfp30.png" alt="imagen"></div><br>  En esta publicaci√≥n describir√© el algoritmo para la generaci√≥n procesal de niveles de una mazmorra bidimensional con una estructura predeterminada.  En la primera parte, se presentar√° una descripci√≥n general y, en la segunda, la implementaci√≥n del algoritmo. <br><br><h2>  Introduccion </h2><br>  El algoritmo fue escrito como parte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de un trabajo de licenciatura</a> y est√° basado en un art√≠culo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ma et al (2014)</a> .  El objetivo del trabajo era acelerar el algoritmo y complementarlo con nuevas funciones.  Estoy bastante contento con el resultado, porque creamos el algoritmo lo suficientemente r√°pido como para usarlo durante la ejecuci√≥n del juego.  Despu√©s de completar el trabajo de licenciatura, decidimos convertirlo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo</a> y enviarlo a la conferencia Game-ON 2018. <br><br><h2>  Algoritmo </h2><br>  Para crear un nivel de juego, el algoritmo recibe como entrada un conjunto de bloques de construcci√≥n poligonales y un gr√°fico de conectividad de nivel (topolog√≠a de nivel).  Los nodos del gr√°fico indican las habitaciones, y los bordes determinan las conexiones entre ellos.  El prop√≥sito del algoritmo es asignar a cada nodo del gr√°fico la forma y la ubicaci√≥n de la habitaci√≥n para que no se crucen dos formas de habitaci√≥n, y cada par de habitaciones vecinas se pueden conectar por puertas. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/41f/ed9/68f/41fed968fc3150ffb6285e660ff2ec5c.png"></div><br>  (a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/96a/68a/302/96a68a302c5af7bc046644a659f0cc81.png"></div><br>  (b) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc1/79e/c88/fc179ec88afc1fa1889937a2df25c029.png"></div><br>  (c) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9f/898/224/d9f8982240071dcb3d9205207912a46f.png"></div><br>  (d) <br><br>  Las figuras (c) y (d) muestran los diagramas generados a partir del gr√°fico de entrada (a) y los bloques de construcci√≥n (b). <br><br>  Usando el gr√°fico de conectividad, un dise√±ador de juegos puede controlar f√°cilmente el flujo del juego.  ¬øNecesita una ruta com√∫n a la sala del jefe con varias rutas laterales opcionales?  Simplemente comience con el gr√°fico de ruta y luego especifique algunos nodos en los que el jugador puede elegir: seguir la ruta principal o explorar la ruta lateral, con posibles tesoros y / o monstruos que lo esperan.  ¬øNecesitas cortar el camino?  Simplemente seleccione los dos nodos en el gr√°fico y agregue un camino corto que los conecte.  Las posibilidades de este esquema son infinitas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/619/044/41a/61904441a82fd281642664a0e784513d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9fe/b4e/65e/9feb4e65e116328e42b3e9638911fae5.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83c/fd9/d63/83cfd9d6388c784f88c818e7bc6c9513.png"></div><br>  <i>Ejemplos de gr√°ficos de entrada.</i>  <i>La ruta principal se muestra en rojo, las rutas auxiliares son azules, la ruta corta es naranja.</i> <br><br>  El algoritmo no solo permite a los dise√±adores de juegos administrar la estructura de alto nivel de los mapas generados, sino que tambi√©n proporciona la capacidad de controlar la apariencia de las habitaciones individuales y c√≥mo conectarlas entre s√≠. <br><br><h3>  Diferentes formas para diferentes habitaciones. </h3><br>  Mencion√© la habitaci√≥n del jefe al final del nivel.  No queremos que la sala del jefe se vea como cualquier otra sala com√∫n, ¬øverdad?  El algoritmo le permite establecer formularios para cada habitaci√≥n.  Por ejemplo, podemos crear una sala al comienzo del nivel y una sala de jefe, que debe tener sus propios conjuntos de formas de sala y un conjunto com√∫n para todas las dem√°s salas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e1f/988/e05/e1f988e05bf84eea4209c128ac0b9e60.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f97/b39/b15/f97b39b15661d51ad7cf3a30a4e9b80a.png"></div><br>  Dos circuitos generados a partir del gr√°fico de entrada, en el que una forma especial de habitaciones est√° asociada con la habitaci√≥n n√∫mero 8. <br><br><h3>  Posiciones de puerta indicadas expl√≠citamente </h3><br>  Imagine que tiene un gui√≥n de reuni√≥n de jefe de alta calidad y que necesitamos que el jugador ingrese a la sala del jefe desde un mosaico espec√≠fico.  O podemos tener una plantilla de habitaci√≥n en la que algunos mosaicos est√°n reservados para paredes y otros obst√°culos.  El algoritmo permite a los dise√±adores establecer expl√≠citamente posibles posiciones de puerta para formas de habitaci√≥n individuales. <br><br>  Pero a veces el objetivo puede ser lo contrario.  Podemos crear plantillas de sala de tal manera que las puertas puedan estar en casi cualquier lugar.  Debido a esto, imponemos menos restricciones al algoritmo; por lo tanto, a menudo se ejecuta m√°s r√°pido y los circuitos generados pueden parecer menos mon√≥tonos y m√°s org√°nicos.  Para tales situaciones, es posible simplemente indicar la longitud de las puertas y qu√© tan lejos deben estar de las esquinas.  La distancia desde las esquinas es una especie de compromiso entre la disposici√≥n manual de todas las puertas y la presencia de puertas en cualquier lugar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/13d/cf8/05f/13dcf805f54ce10ad637ce1c6e298b28.png"></div><br>  (a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7be/e9f/51e/7bee9f51e10cda43d07163e27f7ff1dd.png"></div><br>  (b) <br><br>  La figura (a) ilustra los diferentes tipos de colocaci√≥n de puertas: una habitaci√≥n cuadrada tiene 8 posiciones de puerta claramente definidas, y una habitaci√≥n rectangular utiliza la longitud y la distancia desde las esquinas.  La Figura (b) muestra un diagrama simple generado con las formas de las habitaciones en la Figura (a). <br><br><h3>  Pasillos entre habitaciones </h3><br>  Cuando hablamos de niveles de mazmorras, a menudo imaginamos habitaciones conectadas por pasillos estrechos.  Me gustar√≠a suponer que las conexiones en el gr√°fico de entrada indican los corredores, pero no lo son.  Simplemente garantizan que todos los nodos vecinos se conectar√°n directamente por puertas.  Si queremos que las habitaciones est√©n conectadas por corredores, entonces debemos insertar un nuevo nodo entre todos los pares de habitaciones vecinas y pretender que se trata de habitaciones de pasillo (con ciertas formas de habitaciones y posiciones de puertas dadas). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b59/56a/2b3/b5956a2b30f27882272fa44fe540f0bb.png"></div><br>  (a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbc/91d/b4e/fbc91db4e3beec215ad06cc7799cc56a.png"></div><br>  (b) <br><br>  Una ilustraci√≥n de c√≥mo podemos modificar el gr√°fico de entrada para agregar corredores entre habitaciones.  La figura (a) muestra el gr√°fico de entrada antes de agregar las habitaciones del corredor.  La Figura (b) muestra el gr√°fico de entrada creado a partir de (a) al agregar nuevas habitaciones entre todas las habitaciones adyacentes del gr√°fico original. <br><br>  Desafortunadamente, esto complica enormemente la tarea del algoritmo, porque a menudo el n√∫mero de nodos se duplica.  Por lo tanto, implement√© una versi√≥n del algoritmo que tiene en cuenta los corredores, lo que permite reducir la disminuci√≥n en el rendimiento al organizar las salas de los corredores.  Por el momento, el algoritmo admite corredores entre todas las habitaciones o la ausencia total de corredores, pero en el futuro planeo hacerlo m√°s flexible. <br><br><h2>  Ejemplos </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b01/c4c/b17/b01c4cb173e0b315ce81c842a617e32c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2b/5a0/5aa/a2b5a05aa014d12b0fc70d23a540997d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/305/5b7/de6/3055b7de654c62dc96c1e83ad510e199.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/80e/d9e/b26/80ed9eb26994f6b395e9fa2af34b6dce.png"></div><br>  <i>Varios esquemas generados a partir de diferentes conjuntos de bloques de construcci√≥n y con corredores activados.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/738/8a4/a44/7388a4a4466fe32fc9b9975e71473936.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c1e/1ed/95b/c1e1ed95b4a9236c02fc11ed1bb33ed9.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/628/f19/025/628f19025acf78eed8aa199347804f9e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa7/7e5/03d/aa77e503dbb791e78189777bc875e2cd.png"></div><br>  <i>Varios esquemas generados a partir de diferentes conjuntos de bloques de construcci√≥n con corredores activados y desactivados.</i> <br><br>  En la segunda parte de la publicaci√≥n hablar√© sobre el funcionamiento interno del algoritmo. <br><br>  Tambi√©n estoy trabajando en un complemento de Unity para la generaci√≥n de mazmorras de procedimiento, que incluir√° este algoritmo.  Hago esto porque a pesar de la posibilidad de usar este algoritmo directamente en Unity (est√° escrito en C #), la conveniencia de trabajar con √©l est√° lejos de ser ideal.  Se necesita mucho tiempo para crear plantillas de sala sin una GUI, y se necesita mucho c√≥digo para convertir la salida del algoritmo a la representaci√≥n utilizada dentro del juego. <br><br>  Como yo mismo no soy un desarrollador de juegos, mi objetivo es hacer que el complemento sea lo suficientemente bueno para que otras personas lo usen.  Si todo va bien, intentar√© publicar actualizaciones cuando tenga algo interesante que decir.  Ya tengo algunas ideas sobre el generador en s√≠ y sobre c√≥mo probar sus capacidades. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d12/43f/2c0/d1243f2c05e18826eb3d97a30b6f743c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ed/34f/05c/7ed34f05ca19aa127aae0938e26d63ec.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/d48/39f/ad4d4839f9ca1c333c2fbb3e0333989e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0e/805/121/c0e805121b2cda153980875d780d5f9b.png"></div><br>  <i>Capturas de pantalla del complemento Unity (el proyecto est√° en desarrollo)</i> <br><br><h2>  Parte 2. Implementaci√≥n del algoritmo. </h2><br>  En esta parte, hablar√© sobre las ideas b√°sicas establecidas en la base del algoritmo descrito en la primera parte de la publicaci√≥n.  Inicialmente, quer√≠a describir los conceptos b√°sicos junto con las principales mejoras necesarias para que el algoritmo sea lo suficientemente r√°pido.  Sin embargo, result√≥ que incluso los conceptos b√°sicos son m√°s que suficientes para esta publicaci√≥n.  Por lo tanto, decid√≠ revelar mejoras de rendimiento en un art√≠culo futuro. <br><br><h2>  Motivaci√≥n </h2><br>  Antes de pasar a la implementaci√≥n, quiero mostrar el resultado de lo que haremos.  El siguiente video muestra 30 circuitos diferentes generados a partir de un gr√°fico de entrada y un conjunto de bloques de construcci√≥n.  El algoritmo siempre se detiene durante 500 ms despu√©s de generar el circuito, y luego intenta generar el siguiente. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Su navegador no admite video HTML5. <source src="https://ondra.nepozitek.cz/blog/wp-content/uploads/2019/01/GeneratorWindow-12_01_2019-23_48_40.mp4" type="video/mp4"></video></div></div></div><br><h2>  Como funciona </h2><br>  El prop√≥sito del algoritmo es asignar la forma y la posici√≥n de la habitaci√≥n a cada nodo en el gr√°fico para que no se crucen dos habitaciones y las habitaciones vecinas est√©n conectadas por puertas. <br><br>  Una forma de lograr esto es probar todas las combinaciones posibles de formas de habitaci√≥n y sus posiciones.  Sin embargo, como puede suponer, esto ser√° muy ineficiente y probablemente no podremos generar circuitos, incluso basados ‚Äã‚Äãen gr√°ficos de entrada muy simples. <br><br>  En lugar de buscar todas las combinaciones posibles, el algoritmo calcula c√≥mo conectar correctamente todas las habitaciones individuales (los llamados espacios de configuraci√≥n) y utiliza esta informaci√≥n para dirigir la b√∫squeda.  Desafortunadamente, incluso con esta informaci√≥n, todav√≠a es bastante dif√≠cil encontrar el esquema correcto.  Por lo tanto, para un estudio efectivo del espacio de b√∫squeda, utilizamos una t√©cnica de optimizaci√≥n probabil√≠stica (en este caso, simulaci√≥n de recocido).  Y para una mayor aceleraci√≥n de la optimizaci√≥n, dividimos la tarea de entrada en subtareas m√°s peque√±as y f√°ciles de resolver.  Esto se hace dividiendo el gr√°fico en partes m√°s peque√±as (llamadas cadenas) con la creaci√≥n posterior de esquemas para cada uno de ellos en orden. <br><br><h2>  Espacios de configuraci√≥n </h2><br>  Para un par de pol√≠gonos en los que uno est√° fijo en su lugar y el otro puede moverse libremente, el espacio de configuraci√≥n es el conjunto de posiciones de un pol√≠gono libre en el que dos pol√≠gonos no se cruzan y pueden conectarse por puertas.  Cuando se trabaja con pol√≠gonos, cada espacio de configuraci√≥n puede representarse como un conjunto de l√≠neas posiblemente vac√≠o y calcularse mediante herramientas geom√©tricas simples. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/134/823/45e/13482345ed98c982677a10e53ddaec2d.png"></div><br>  (a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8c/1eb/62c/b8c1eb62c2f6d8f166670781dfe35336.png"></div><br>  (b) <br><br>  Configuraciones espaciales.  La figura (a) muestra el espacio de configuraci√≥n (l√≠neas rojas) de un rect√°ngulo libre en relaci√≥n con un pol√≠gono fijo en forma de L.  Determina todas las ubicaciones del centro del cuadrado en el que los dos bloques no se cruzan y se tocan.  La figura (b) muestra la intersecci√≥n (puntos amarillos) de los espacios de configuraci√≥n de un cuadrado en movimiento con respecto a dos rect√°ngulos fijos. <br><br>  El siguiente algoritmo se utiliza para calcular el espacio de configuraci√≥n de un bloque fijo y uno libre.  Seleccionamos un punto de referencia en el bloque m√≥vil y consideramos todas las ubicaciones en <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi>b</mi><mi>b</mi><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>R</mi></mrow><mn>2</mn></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.843ex" height="2.539ex" viewBox="0 -987.6 4668.4 1093.4" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-61" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-74" x="1658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-68" x="2019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-62" x="2596" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-62" x="3025" y="0"></use><g transform="translate(3455,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMAIN-32" x="1074" y="581"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>m</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi>b</mi><mi>b</mi><msup><mrow class="MJX-TeXAtom-ORD"><mi>R</mi></mrow><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> \ mathbb {R} ^ 2 </script>  , de modo que al mover el pol√≠gono de modo que su punto de referencia est√© ubicado en esta ubicaci√≥n, tanto los bloques m√≥viles como los fijos se tocan, pero no se cruzan.  El conjunto de todos estos puntos forma el espacio de configuraci√≥n de dos bloques (Figura (a) arriba).  Para obtener el espacio de configuraciones del bloque m√≥vil con respecto a dos o m√°s bloques fijos, se calcula la intersecci√≥n de los espacios de configuraci√≥n individuales (Figura (b) anterior). <br><br>  El algoritmo usa espacios de configuraci√≥n de dos maneras.  Primero, en lugar de probar las posiciones aleatorias de habitaciones individuales, usamos espacios de configuraci√≥n para buscar posiciones que conduzcan al mayor n√∫mero posible de habitaciones adyacentes conectadas por las puertas.  Para hacer esto, necesitamos obtener la intersecci√≥n m√°xima no vac√≠a de los espacios de configuraci√≥n de los vecinos.  En segundo lugar, usamos espacios de configuraci√≥n para verificar si todos los pares de habitaciones vecinas pueden conectarse con puertas.  Esto se hace comprobando si la posici√≥n de la habitaci√≥n est√° dentro del espacio de configuraci√≥n de todos sus vecinos. <br><br>  Dado que las formas de las salas no cambian durante la ejecuci√≥n del juego, podemos calcular previamente los espacios de configuraci√≥n de todos los pares de formas de salas antes de que comience el algoritmo.  Gracias a esto, todo el algoritmo se acelera significativamente. <br><br><h2>  Esquema incremental </h2><br>  Al resolver un problema complejo, uno de los enfoques posibles es dividirlo en subtareas m√°s peque√±as y m√°s simples, y resolverlas ya.  Esto es exactamente lo que haremos con la tarea de colocar habitaciones individuales.  En lugar de organizar todas las habitaciones a la vez, dividimos el gr√°fico de entrada en subgr√°ficos m√°s peque√±os e intentamos crear diagramas a partir de ellos uno por uno.  Los autores del algoritmo original llaman a estos subgrafos "cadenas" debido al principio mismo de estos gr√°ficos, en el que cada nodo no tiene m√°s de dos vecinos, y por lo tanto, es bastante simple crear su esquema. <br><br>  El circuito de salida final siempre es un componente conectado, por lo que no tiene sentido conectar los componentes individuales al circuito y luego intentar combinarlos, porque el proceso de combinaci√≥n puede ser bastante complicado.  Por lo tanto, despu√©s de colocar la cadena, la siguiente cadena conectada siempre ser√° la que est√© conectada a los v√©rtices ya alineados en el circuito. <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-function">Layout </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateLayout</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">inputGraph</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emptyLayout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Layout(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stack&lt;Layout&gt;(); stack.Push(emptyLayout); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(!stack.Empty()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layout = stack.Pop(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextChain = GetNextChain(layout, inputGraph); Layout[] partialLayouts = AddChain(layout, nextChain); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!partialLayouts.Empty()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsFullLayout(partialLayouts[<span class="hljs-number"><span class="hljs-number">0</span></span>])) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> partialLayouts[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { stack.Push(partialLayouts); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  <i>Pseudoc√≥digo que muestra un enfoque incremental para encontrar el esquema correcto.</i> <br><br>  El pseudoc√≥digo que se muestra arriba demuestra la implementaci√≥n de un esquema incremental.  En cada iteraci√≥n del algoritmo (l√≠neas 6-18), primero tomamos el √∫ltimo circuito de la pila (l√≠nea 7) y calculamos qu√© cadena agregar a continuaci√≥n (l√≠nea 8).  Esto se puede hacer simplemente almacenando el n√∫mero del √∫ltimo circuito agregado a cada circuito parcial.  En el siguiente paso, agregamos la siguiente cadena al circuito (l√≠nea 9), generando varios circuitos detallados y los guardamos.  Si la fase de expansi√≥n falla, pero no se agregan nuevos esquemas parciales a la pila, y el algoritmo debe continuar con el √∫ltimo esquema parcial guardado.  Llamamos a esta situaci√≥n una b√∫squeda de retorno porque el algoritmo no puede extender el esquema parcial actual y debe regresar y continuar con otro esquema guardado.  Esto generalmente es necesario cuando no hay suficiente espacio para conectar circuitos adicionales a los v√©rtices ya compuestos en el circuito.  Adem√°s, una b√∫squeda de retorno es la raz√≥n por la que siempre intentamos generar varios esquemas avanzados (l√≠nea 9).  De lo contrario, no tendr√≠amos nada a lo que volver.  El proceso finaliza cuando generamos un circuito completo o la pila est√° vac√≠a. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90e/909/ca4/90e909ca4640401cf869e4ad2e558d32.png"></div><br>  (a) Gr√°fico de entrada <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ca/736/f69/8ca736f69ce1ba31910d12c49f0546a4.png"></div><br>  (b) Diagrama parcial <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0e/74f/284/d0e74f2846ea5cdd8351bd1a20561704.png"></div><br>  (c) Diagrama parcial <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c4/708/d35/2c4708d351e2b4a13a98cffa9a090a58.png"></div><br>  (d) Esquema completo <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b3b/13b/796/b3b13b796d79dd8587d23d82cee6da52.png"></div><br>  (e) Esquema completo <br><br>  Esquema incremental.  Las figuras (b) y (c) muestran dos diagramas parciales despu√©s de planificar el primer circuito.  La figura (d) muestra el circuito completo despu√©s de la expansi√≥n (b) por un segundo circuito.  La figura (e) muestra el circuito completo despu√©s de la expansi√≥n (c) por un segundo circuito. <br><br>  Para dividir el gr√°fico en partes, debe encontrar una incrustaci√≥n plana del gr√°fico de entrada, es decir, un dibujo en el plano en el que los bordes se cruzan solo en los puntos finales.  Este archivo adjunto se utiliza para obtener todas las caras del gr√°fico.  La idea principal de la descomposici√≥n es que es m√°s dif√≠cil crear un circuito a partir de ciclos, porque sus nodos tienen m√°s restricciones.  Por lo tanto, estamos tratando de organizar los ciclos al comienzo de la descomposici√≥n, de modo que se procesen lo antes posible y se reduzca la probabilidad de que sea necesario volver a las etapas posteriores.  La primera cadena de descomposici√≥n est√° formada por la cara m√°s peque√±a del archivo adjunto, y las caras posteriores se agregan en el orden de b√∫squeda de amplitud.  Si hay otras caras que se pueden seleccionar, se usa la m√°s peque√±a.  Cuando no quedan caras, se agregan los componentes no c√≠clicos restantes.  La Figura 4 muestra un ejemplo de descomposici√≥n en una cadena, que se obtuvo de acuerdo con estos pasos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e0f/c57/c57/e0fc57c571633c5f70b818c412e8d80c.png"></div><br>  (a) <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4bb/02c/950/4bb02c950ef9309be5df082e0c630ec3.png"></div><br>  (b) <br><br>  Descomposici√≥n en cadenas.  La figura (b) muestra un ejemplo de c√≥mo dise√±ar la figura (a) en un circuito.  Cada color representa una cadena separada.  Los n√∫meros indican el orden en que se crean las cadenas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f0c/ad3/554/f0cad3554aa63d7cc46e5d9dae334209.png"></div><br>  (c) Buen dise√±o parcial <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d00/839/114/d0083911404026fa33a26f529d1db1a0.png"></div>  (d) Esquema completo <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b27/f99/ed2/b27f99ed239d73e25a14e3f785ba5bd2.png"></div><br>  (a) Gr√°fico de entrada <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85c/60c/13b/85c60c13b6479b643855f71f5138f738.png"></div><br>  (b) Gr√°fico parcial incorrecto <br><br>  B√∫squeda con retorno.  La figura (b) muestra un ejemplo de un circuito parcial deficiente, porque no hay suficiente espacio en √©l para conectar los nodos 0 y 9. Para generar el circuito completo (d), es necesario un retorno a otro circuito parcial (c). <br><br><h2>  Recocido simulado </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El algoritmo de simulaci√≥n de recocido</a> es una t√©cnica de optimizaci√≥n probabil√≠stica cuyo prop√≥sito es estudiar el espacio de posibles circuitos.  Fue elegido por los autores del art√≠culo original porque result√≥ ser √∫til en situaciones similares en el pasado.  Al implementar el algoritmo, decid√≠ usar el mismo m√©todo, porque quer√≠a comenzar con lo que ya ha demostrado su efectividad para resolver este problema.  Sin embargo, creo que puede ser reemplazado por otro m√©todo y mi biblioteca est√° escrita de tal manera que el proceso de reemplazo del m√©todo es bastante simple. <br><br>  El algoritmo de simulaci√≥n de recocido eval√∫a iterativamente peque√±os cambios en la configuraci√≥n o circuito actual.  Esto significa que creamos una nueva configuraci√≥n seleccionando aleatoriamente un nodo y cambiando su posici√≥n o forma.  Si la nueva configuraci√≥n mejora la funci√≥n de energ√≠a, siempre se acepta.  De lo contrario, hay pocas posibilidades de aceptar la configuraci√≥n de todos modos.  La probabilidad de tomar peores decisiones disminuye con el tiempo.  La funci√≥n de energ√≠a est√° dise√±ada de tal manera que impone grandes multas en los nodos que se cruzan y los nodos adyacentes que no se tocan entre s√≠. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>E</mi><mo>=</mo><msup><mi>e</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>A</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><msup><mi>e</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.209ex" height="2.66ex" viewBox="0 -987.6 13867.5 1145.2" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMAIN-3D" x="1042" y="0"></use><g transform="translate(2098,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-66" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-72" x="904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-61" x="1355" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-63" x="1885" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-41" x="2318" y="0"></use><g transform="translate(2170,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6D" x="839" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-65" x="1717" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-67" x="2184" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-61" x="2664" y="0"></use></g></g></g><g transform="translate(7093,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-66" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-72" x="904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-61" x="1355" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-63" x="1885" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-44" x="2318" y="0"></use><g transform="translate(2225,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6D" x="839" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-65" x="1717" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-67" x="2184" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-61" x="2664" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMAIN-2212" x="12366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMAIN-31" x="13367" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>E</mi><mo>=</mo><msup><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>A</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><msup><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><mo>‚àí</mo><mn>1</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> E = e ^ {\ frac {A} {\ omega}} e ^ {\ frac {D} {\ omega}} - 1 </script></p><br>  A es el √°rea de intersecci√≥n total entre todos los pares de bloques en el diagrama.  D es la suma de los cuadrados de las distancias entre los centros de los pares de bloques en el gr√°fico de entrada que son vecinos pero no se tocan entre s√≠.  Valor <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhgETQJdU-LYAjySWgM1wVZ_Z74ilQ#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ omega </script>  afecta la probabilidad de que el recocido simulado se permita ir a la peor configuraci√≥n;  Este par√°metro se calcula a partir del √°rea promedio de bloques de construcci√≥n. <br><br>  Despu√©s de seleccionar un nodo para cambiar, cambiamos su forma o posici√≥n.  ¬øC√≥mo elegimos un nuevo puesto?  Puede elegirlo al azar, pero esto a menudo degradar√° la funci√≥n de energ√≠a y el algoritmo converger√° muy lentamente.  ¬øPodemos elegir una posici√≥n que sea m√°s probable que aumente la funci√≥n energ√©tica?  ¬øVes a lo que me dirijo?  Utilizamos espacios de configuraci√≥n para seleccionar una posici√≥n que satisfaga los l√≠mites del mayor n√∫mero de habitaciones vecinas. <br><br>  Luego, para cambiar la forma, simplemente seleccione una de las formas de habitaci√≥n disponibles.  Si bien el algoritmo no intenta decidir qu√© forma es m√°s probable que nos lleve al esquema correcto.  Sin embargo, ser√≠a interesante probar esta funci√≥n y ver si acelera el algoritmo. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">List&lt;Layout&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddChain</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">chain, layout</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentLayout = GetInitialLayout(layout, chain); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> generatedLayouts = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Layout&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= n, i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*       */</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">1</span></span>; j &lt;= m, j++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newLayout = PerturbLayout(currentLayout, chain); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsValid(newLayout)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DifferentEnough(newLayout, generatedLayouts)) { generatedLayouts.Add(newLayout); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/* newLayout ,  currentLayout */</span></span>) { currentLayout = newLayout; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/* ,   ,    newLayout */</span></span>) { currentLayout = newLayout; } } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> generatedLayouts; }</code> </pre> <br>  Este es el pseudoc√≥digo del m√©todo responsable de crear un circuito de circuito separado simulando el recocido. <br><br>  Para acelerar todo el proceso, intentaremos encontrar la configuraci√≥n inicial de baja energ√≠a.  Para hacer esto, organizaremos los nodos en la cadena actual para una b√∫squeda de amplitud, comenzando por aquellos que son adyacentes a los nodos ya incluidos en el esquema.  Luego, los nodos ordenados se colocan uno a la vez y para ellos se selecciona la posici√≥n con la energ√≠a m√°s baja del espacio de configuraci√≥n.  Aqu√≠ no estamos retrocediendo: este es un proceso simple y codicioso. <br><br><h2>  Video de bonificaci√≥n </h2><br>  El siguiente video muestra los diagramas generados a partir del mismo gr√°fico de entrada que en el primer video.  Sin embargo, esta vez se muestra un enfoque incremental.  Puede notar que el algoritmo agrega cadenas de nodos uno a la vez.  Tambi√©n se ve que a veces hay dos circuitos parciales consecutivos con el mismo n√∫mero de nodos.  Esto sucede cuando el algoritmo regresa.  Si los primeros intentos de agregar otro circuito al primer circuito parcial fallan, entonces el algoritmo intenta otro circuito parcial. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Su navegador no admite video HTML5. <source src="https://ondra.nepozitek.cz/blog/wp-content/uploads/2019/01/GeneratorWindow-13_01_2019-23_23_30.mp4" type="video/mp4"></video></div></div></div><br><h2>  Materiales descargables </h2><br>  La implementaci√≥n del algoritmo en .NET se puede encontrar en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mi github</a> .  El repositorio contiene la DLL de .NET y la aplicaci√≥n GUI WinForms, controlada por los archivos de configuraci√≥n de YAML. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436198/">https://habr.com/ru/post/es436198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436186/index.html">Qu√© pensar durante la entrevista NALSD</a></li>
<li><a href="../es436188/index.html">Libertad para volar a tu alcance con el DJI Smart Controller</a></li>
<li><a href="../es436192/index.html">Simulaci√≥n del navegador de f√≠sica</a></li>
<li><a href="../es436194/index.html">C√≥mo funciona el sistema de videovigilancia Ivideon: descripci√≥n general de la aplicaci√≥n m√≥vil</a></li>
<li><a href="../es436196/index.html">Voyeurismo probador: c√≥mo espiar a las personas correctamente y por qu√© es necesario</a></li>
<li><a href="../es436200/index.html">Fallo judicial de los Estados Unidos: las autoridades no tienen derecho a obligar a una persona a desbloquear el tel√©fono con un dedo o la cara</a></li>
<li><a href="../es436202/index.html">Perd√≠ la fe en el desarrollo, me quem√©, pero el culto a la herramienta me salv√≥</a></li>
<li><a href="../es436206/index.html">C√≥mo unir sin dolor el arte con Java, JavaScript y gr√°ficos o La historia detr√°s de la creaci√≥n de un producto de teatro interactivo</a></li>
<li><a href="../es436208/index.html">Ya no aparecen nuevos torrentes en The Pirate Bay</a></li>
<li><a href="../es436210/index.html">Biquaternions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>