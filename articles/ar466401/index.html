<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏼 🐠 🧝🏽 قليلا من الرياضيات المالية: حساب التضخم والفائدة 🚇 👭 🍀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في الآونة الأخيرة ، اضطررت إلى التحقق من الحسابات التي أجرتها المرافق العامة لمدينتي. كانت هناك مشكلة مثيرة للجدل ، والتي لا يمكن حلها إلا عن طريق إجر...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>قليلا من الرياضيات المالية: حساب التضخم والفائدة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466401/" style=";text-align:right;direction:rtl"> في الآونة الأخيرة ، اضطررت إلى التحقق من الحسابات التي أجرتها المرافق العامة لمدينتي.  كانت هناك مشكلة مثيرة للجدل ، والتي لا يمكن حلها إلا عن طريق إجراء الحسابات الصحيحة.  بالنظر إلى المستقبل ، سأقول أن المرافق العامة تعتقد خطأ.  لذلك ، سننظر هنا في كيفية حساب تكاليف التضخم بشكل صحيح و 3 ٪ سنويًا على الديون مقابل الالتزامات ، وفقًا للقانون المدني لأوكرانيا. <br><br>  يصف الجزء الأول حساب تكاليف التضخم ، وهذا هو خاص لأوكرانيا. <br>  سيتم تخصيص الجزء الثاني (الأكبر) لمسألة حساب 3٪ سنويًا.  ينطبق هذا أيضًا على الاتحاد الروسي وبيلاروسيا وكازاخستان ، ولكن في هذه البلدان لا يكون السعر ثابتًا ، ولكنه يعتمد على معدل إعادة تمويل البنك المركزي.  لم بقية البلاد لا تبدو. <br><br>  الجزء الثاني قريب جدًا من حساب الفائدة على معاملات الائتمان العادية (القروض ، القروض ، القروض ، إلخ). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/di/2q/9l/di2q9lbdqyzqzcywadgdnny0bgo.png" alt="بديل الصورة"></div><br>  أولا نظرية ، في نهاية المطاف رمز قليلا. <br><br>  كل هذا تحت الخفض. <br><a name="habracut"></a><br>  لذلك ، حصلت على وثيقة من المرافق العامة "بيان استحقاق تكاليف التضخم و 3 ٪ سنويا."  تم التحقق من ذلك من قِبل لي ، ووجدت أنه تم حسابه باستخدام الخوارزمية الخاطئة وأنه ذو أهمية ، لأنه يجب أن ينفذ متطلبات المادة من القانون المدني لأوكرانيا. <br><br>  ما ينبغي النظر هو مكتوب في القانون المدني لأوكرانيا: <br><blockquote style=";text-align:right;direction:rtl">  المادة 625 من القانون المدني لأوكرانيا.  "المسؤولية عن انتهاك الالتزام النقدي" <br>  2. يلتزم المدين الذي أخر تأخير الوفاء بالتزام نقدي ، بناء على طلب الدائن ، بدفع مبلغ الدين مع مراعاة مؤشر التضخم الثابت لكامل فترة التأخير ، وكذلك 3٪ سنويًا من المبلغ المستحق ... </blockquote>  بناءً على أرقام الديون ، فإن المرافق العامة تحسب تكاليف التضخم و 3٪ سنويًا. <br><br><h2 style=";text-align:right;direction:rtl">  تكاليف التضخم </h2><br>  كذلك سأتحدث عن خوارزمية الحساب ، وليس عن أرقام محددة. <br><br>  التضخم هو عملية تتميز بانخفاض قيمة العملة ، أي انخفاض في قوتها الشرائية وزيادة عامة في الأسعار.  باستثناء التضخم ، فإن النتائج النهائية لحسابات التدفق النقدي هي أرقام تعسفية للغاية. <br><br>  مؤشر التضخم (II) ، أو مؤشر أسعار المستهلك (CPI) ، أو مؤشر أسعار المستهلك (CPI) - أحد أنواع مؤشرات الأسعار التي تم إنشاؤها لقياس متوسط ​​مستوى سعر السلع والخدمات (سلة المستهلك) لفترة معينة في الاقتصاد. <br><br>  الذكاء الاصطناعى هو مؤشر يصف ديناميات المستوى العام لأسعار السلع والخدمات التي يكتسبها السكان للاستهلاك غير المنتج.  هذا هو مؤشر النمو ، والذي يوضح عدد المئة من متوسط ​​الزيادة في الأسعار للفترة قيد الاستعراض. <br><br>  في أوكرانيا ، AI و CPI مترادفتان <br><br>  نظرًا لأن مؤشر الأسعار هو مؤشر سلسلة ، للفترات التالية واحدة تلو الأخرى ، يتم حسابه بضرب المؤشرات ، على سبيل المثال ، 101٪ * 102٪ = (1.01 * 1.02) * 100٪ = 103.02٪. <br><br>  يتم احتساب منظمة العفو الدولية من قبل لجنة الدولة للاحصاءات في أوكرانيا ونشرها في الدوريات الرسمية.  يمكن استخدام هذه الأرقام الأساسية لإعادة حساب المبالغ النقدية. <br>  ماذا يفكر العمال المجتمعيون؟ <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ge/5p/hv/ge5phvi9cjhbbz7kkx0jndzuyli.png" alt="جزء من مستند إعداد فواتير الخدمات"></div><br>  آخر موعد للتسوية هو 7 ديسمبر 2016. <br><br>  دعنا نرى كيف أن العمال المحليين حصلوا على نسب تكلفة التضخم؟ <br><br>  يمكن أن يُرى بالعين المجردة أنه في العمود الثالث (والعام الخامس) ، بدلاً من الجزء الصحيح 1 ، يجب أن يكون الجزء الصحيح هو 0. كيف حصلوا على الجزء الكسري؟ <br><br>  <strong>سبتمبر 2016.</strong> الجزء الكسري 0.028.  مدة الدفع لشهر سبتمبر هي 20 أكتوبر 2016. الجزء الكسري يتوافق مع مؤشر التضخم الذي نشرته لجنة الدولة للاحصاءات ، لشهر أكتوبر 2016 - 102.8 ٪ <br><br>  <strong>أغسطس 2016.</strong> جزء كسري 0.0465.  مدة السداد لشهر أغسطس هي 20 سبتمبر 2016. يتوافق الجزء الكسري مع مؤشر التضخم لشهر سبتمبر مضروبًا في الثاني لشهر أكتوبر: 101.8٪ * 102.8٪ = 104.65٪ ، أو في الأسهم ، 1.018 * 1.028 = 1.046504.  يتم تقريب المرافق العامة إلى 1.0465 وطباعة هذا الرقم ، على الرغم من أنه ينبغي سحب الوحدة ، لأنها في العمود التالي تقوم فقط بطباعة مقدار تكاليف التضخم ، وليس المبلغ المتراكم. <br><br>  <strong>يوليو 2016 وما قبله.</strong>  لقد أجريت هذه الحسابات واستعدت الخوارزمية.  تضاعف المرافق العامة مؤشرات التضخم ، ابتداءً من الشهر التالي لشهر تقديم الخدمات (شهر تاريخ الاستحقاق) ، وتنتهي في أكتوبر 2016. <br><br>  <strong>نقطة البداية</strong> صحيحة جزئياً فقط.  كما سأظهر لاحقًا ، في الحالة العامة ، يجب أن يبدأ الحساب حقًا من هذا الشهر ، ولكن في حالتنا الخاصة ، يجب تخطي الشهر الأول (معادل الذكاء الاصطناعي إلى 100٪). <br><br>  <strong>نقطة نهاية</strong> الضرب.  نظرًا لأن آخر يوم للحساب في ديسمبر ، وتحتاج إلى إنهاء ديسمبر ، فهذا هو الحال عمومًا.  كما سأظهر لاحقًا ، في هذه الحالة بالذات ، يجب أيضًا تخطي ديسمبر (يساوي أيضًا الذكاء الاصطناعي بنسبة 100٪).  وفي 7 كانون الأول (ديسمبر) ، لم يكن لدى منظمة العفو الدولية الوقت الكافي للنشر. <br><br>  لماذا لا تؤخذ نوفمبر في الاعتبار في أي مكان؟  أعتقد أنهم نسوا فقط إدخاله في النظام. <br><br>  الآن دعونا نرى كيفية حساب مؤشر التضخم.  حسب <strong>الاقتضاء</strong> - الموصوفة في خطاب المعلومات الصادر عن المحكمة الاقتصادية العليا في أوكرانيا رقم 01-06 / 928/2012 بتاريخ 17.07.2012 [6]. <br><br>  سأقدم جزءًا من الفقرة: <br><blockquote style=";text-align:right;direction:rtl">  تتم فهرسة مبلغ الدين الذي يجب دفعه من اليوم الأول إلى اليوم الخامس عشر من الشهر مع مراعاة هذا الشهر ، وإذا تم دفع الدين من اليوم السادس عشر إلى اليوم الحادي والثلاثين من الشهر ، فسيبدأ الحساب من الشهر التالي. <br><br>  وبالمثل ، إذا تم سداد الدين من 1 إلى 15 يومًا من الشهر ، يتم حساب تكاليف التضخم دون أخذ هذا الشهر في الاعتبار ، وإذا تم احتساب تكاليف التضخم من 16 إلى 31 يومًا في الشهر ، مع مراعاة هذا الشهر. </blockquote>  في حالتنا ، فإن مصطلح الدفع هو اليوم العشرين من الشهر التالي لشهر تقديم الخدمات ، أي  لتوفير الخدمات في سبتمبر ، يكون تاريخ بدء المستوطنات هو 21 أكتوبر 2016 ، والموعد النهائي هو 7 ديسمبر 2016. <br><br>  أي  من الصواب مراعاة ذلك: لتوفير الخدمات في سبتمبر 2016 ، ضع في اعتبارك التضخم لمدة ثلاثة أشهر (اجتياز المؤشر أو الدورة) ، من أكتوبر إلى ديسمبر ، ولكن في الشهر الأول والأخير ، خذ الذكاء الاصطناعي يساوي 1 (100٪) ، وأخذ في الاعتبار نوفمبر فقط. <br><br>  في نوفمبر 2016 ، بلغت نسبة الذكاء الاصطناعى 101.8 ٪ ، أي  يجب أن يكون المعامل 0.0180 ، وليس 0.0280.  كتبت عن وحدة الرصاص من قبل. <br><br><h2 style=";text-align:right;direction:rtl">  3 ٪ سنويا </h2><br>  دعونا نرى كيف تلقت الخدمات المجتمعية معاملات ومبالغ تراكمية قدرها 3 ٪ سنويا؟  هذا هو العمود الخامس في الجدول أعلاه. <br><br>  كما كتبت في وقت سابق ، يجب ألا يكون هناك وحدة رائدة ، يجب أن يكون هناك 0. نحن ننظر إلى الجزء الكسري ، ولاحظ أنه مستدير بشكل مثير للريبة - كل شهر سابق هو 0.0025 أكثر من الشهر الحالي. <br><br>  باستخدام حسابات بسيطة ، يمكن تحديد أن المرافق العامة ، دون مزيد من اللغط ، مقسمة 3٪ إلى 12 شهرًا ، وتلقى 0.0025 ، أو 0.25٪ شهريًا ، وتتراكم هذه النسبة المئوية لكل شهر تأخير كامل وغير كامل.  نعم ، إذا نظرت إلى أكتوبر 2016 ، وهو الموعد النهائي للدفع الذي جاء في 21 نوفمبر ، وتم إجراء الحسابات في 7 ديسمبر ، ثم لشهر غير مكتمل ، تم احتساب نفس النسبة 0.25٪. <br><br>  يعجب هذا النهج بالقسوة الوحشية ، لكن ، كما سأظهر لاحقًا ، فإن الرياضيات المالية لا تعرف مثل هذه الخوارزمية. <br><br>  التشريعات في أوكرانيا والرياضيات المالية لا تعطي إجابة واضحة على سؤال حول كيفية شحن 3 ٪ سنويا؟  لقد بحثت عن العديد من الكتب حول هذا الموضوع ، ولكن الكتب قديمة ، ويعود تاريخها إلى عام 2002.  لذلك ، سيتم استكمال خوارزميات الكتب بحقيقة أنه كان من الممكن google من المقالات الأكثر حداثة والغربية.  [1] أعيد طبعه في عام 2007 ، ولم يكن من الممكن العثور على كتب باللغة الروسية.  ربما لأن الرياضيات المالية ، كعلم ، نشأت منذ وقت طويل ، قبل وقت طويل من ظهور أجهزة الكمبيوتر ، ظهرت مفاهيم مثل "الائتمان" و "الفائدة على الائتمان" منذ عدة مئات من السنين.  والخوارزميات لم تتغير كثيرا منذ عام 2002. <br><br>  لكن النظرة الغربية للمشكلة تختلف عن تلك الموضحة في كتب اللغة الروسية.  سأستشهد بالمعلومات أولاً من الكتب باللغة الروسية ، ومن المقالات الغربية ، مع الإشارة إلى المكان الذي تتزامن فيه. <br><br>  يشير ما هو مكتوب أدناه إلى الحالة المحددة المتمثلة في تراكم 3٪ سنويًا على المتأخرات ، ولكن يمكن تعميمها على حساب الفائدة على العلاقات الائتمانية الأخرى إذا تراكمت الفائدة وفقًا لمخطط الفائدة البسيط بدلاً من مخطط الفائدة المركبة. <br><br>  وفقا للفن.  625 يجب أن يتراكم القانون المدني لأوكرانيا بنسبة 3٪ سنويًا وفقًا لمخطط الفائدة البسيط.  لحساب مقدار الفائدة ، يجب ضرب مبلغ الدين (أو نص القرض ، في الحالة العامة) بمعدل الفائدة السنوي العادي البالغ 3٪ وضربه في جزء السنة (المدة بالسنوات) الذي بلغ التأخير.  قد تكون هذه المشاركة أكثر من 1 إذا كان التأخير أكثر من عام. <br><br>  يتم التعبير عن مدة التأخير بالأيام.  في حالة أكثر عمومية ، <strong>يمكن</strong> التعبير عن مدة القرض بالأيام (الحالة التي يتم فيها التعبير عن مدة القرض بالأشهر والسنوات هنا).  والمعدل السنوي البالغ 3٪ هو المعدل الطبيعي للفائدة البسيطة لهذا العام.  <strong>لذلك ، يجب أن تكون قادرًا على إحضار فترة التأخير (الائتمان) بالأيام إلى المدة بالسنوات.</strong>  <strong>هذه ليست مهمة تافهة ، لأن طول السنة يعتمد على عددها.</strong> <br><br>  المدة بالأيام هي مقياس محدد بشكل فريد لفترة الفجوات في التقويم ، بدلاً من المدة بالسنوات.  يتطلب تعريف الأخير توضيحًا في شكل قاعدة لتحويل المدة بالأيام إلى المدة بالسنوات.  يعتمد عدد من الطرق القياسية لتحويل المدة بالأيام إلى المدة بالسنوات على قسمة عدد الأيام على ما يسمى <strong>"المقسوم السنوي"</strong> .  القيم الأكثر شيوعًا للقسمة السنوية هي 360 و 365 يومًا.  في أبسط الحالات ، يكون المقسوم على رقم ثابت ومستقل عن الفترة.  عدد الأيام في فترة ما يعمل دائمًا على شكل توزيعات (البسط الكسر). <br>  وتحتاج إلى اتخاذ قرار بشأن الإجراء لحساب المصطلحات في أيام.  دعنا نفكر في مثالين بعيد المنال: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يتلقى العميل قرضًا قصير الأجل من البنك من 6 ديسمبر 2018 إلى 7 ديسمبر 2018.  ما هي مدة العقد وعدد الأيام التي أحتاجها لتجميع الفوائد؟  من الواضح - 1 يوم. </li><li style=";text-align:right;direction:rtl">  يقوم المشترك بطلب الطلبات المسبقة من مشغل الاتصالات ، مع فترة صلاحية في المستقبل من 6 ديسمبر 2018 إلى 7 ديسمبر 2018.  ما هي خطوط تقديم الخدمة وما هو عدد الأيام التي يجب أن أتحمل فيها رسوم الاشتراك في الخدمة؟  من الواضح 2 أيام. </li></ol><br>  ما هو الفرق؟ <br><br>  والحقيقة هي أن اليوم ليس نقطة في الجدول الزمني ، ولكن فاصل زمني يمكن كتابته بطريقتين (أذكر أن القوس المربّع على حدود الفاصل الزمني يعني أن النقطة هي في الفاصل الزمني ، وأن القوس ليس النقطة في الفاصل الزمني): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  [06.12.2018 00.00.00 ، 12/07/2018 00.00.00) - هنا لا يتم تضمين الحد الأيمن من الفاصل الزمني في الفاصل الزمني ، </li><li style=";text-align:right;direction:rtl">  [06/12/2018 00.00.00 ، 12/06/2018 23.59.59] - هنا يتم تضمين الحد الأيمن من الفاصل الزمني في الفاصل الزمني. </li></ul><br>  في الحالة الأولى (1) ، عندما لا يتم إعطاء الفاصل الزمني بشكل صريح ، ولكن في شكل فاصل زمني بين التواريخ ، عادةً ما يتم حساب العدد الدقيق للأيام ، بما في ذلك اليوم الأول أو الأخير ، ولكن ليس الاثنين معا.  [4] يقول نفس الشيء بمعنى آخر: "يوم إصدار القرض ويوم السداد يوم واحد." <br><br>  تحدد هذه الطريقة ما يسمى بالوقت المحدد.  يمكن أيضًا تحديده بسهولة إذا كان كلا التاريخين يشيران إلى نفس السنة ويتوفر تقويم يوضح الرقم التسلسلي لكل يوم من أيام السنة.  بعد ذلك يكفي لطرح الرقم التسلسلي للتاريخ المبكر من الرقم التسلسلي للتاريخ المتأخر وسوف تعطي النتيجة مدة الفترة.  في Oracle Database ، يمكنك ببساطة طرح التواريخ (نوع DATE) المقطوعة إلى يوم واحد (مع تجاهل الوقت) ، أحدهما من الآخر ، والفرق هو عدد صحيح من الأيام. <br><br>  في الحالة الثانية (2) نتحدث عن أيام ، لذلك نحسب يومين. <br><br>  علاوة على ذلك ، أستخلص من حقيقة أن عدد الأيام التي تم تحديدها لديك بالفعل ، على سبيل المثال ، في حالة الخدمات المجتمعية ، عندما يكون الموعد النهائي للدفع هو 20 سبتمبر (أي هذا هو آخر يوم مقبول للدفع) ، وتم دفعه في 21 سبتمبر ، أي من الواضح أن التأخير يجب أن يساوي يوم واحد.  في حالة مواجهة مؤشر على الفاصل الزمني لا يشمل الحد الأيسر - فقط انقل الحد الأيسر في يوم من الأيام إلى اليمين. <br><br>  كيف نحسب عدد الأيام وبسط الكسر؟  هناك حساب دقيق وحساب تقريبي. <br><br><h3 style=";text-align:right;direction:rtl">  العد الدقيق للأيام </h3><br><h4 style=";text-align:right;direction:rtl">  ممارسة الناطقة باللغة الروسية </h4><br>  يستند النص إلى [1]. <br><br>  اختيار العدد المحدد للأيام في فترة ما مقسوم عليها ، والقاعدتان الأكثر شيوعًا تعطيهما قاسم المقسوم السنوي 360 أو 365: <br><br>  <strong>القاعدة (R1) ACT / 365.</strong>  بالنسبة لهذه القاعدة ، يتم تقسيم المدة بالأيام على الرقم 365. وألاحظ أن طول سنة كبيسة سيكون 366/365 = 1.00274 ، وهو أكثر من واحد.  سيكون خطأ القاعدة ACT / 365 أكبر ، وكلما زادت سنوات الكبسولة في فترة ما.  وبالتالي ، فإن قيمة 3 ٪ سنويا المستحقة بموجب هذه القاعدة ستكون أكثر من 3 ٪. <br><br>  <strong>القاعدة (R2) ACT / 360.</strong>  هذا هو ما يسمى "القاعدة المصرفية" ، والتي بموجبها ، يتم تقسيم المدة بالأيام على 360. هذه القاعدة تزيد من الطول السنوي للفجوات.  لمدة سنة غير قفزة ، سيكون طوله 365/360 = 1.01389 ، ولعام قفزة 366/360 = 1.01667.  وبطبيعة الحال ، كلما طالت المدة ، زادت درجة "الاستطالة" في سنوات.  غالبًا ما تستخدم هذه القاعدة في الحسابات المتعلقة بسوق المال ، أي  تسويق الديون قصيرة الأجل ، مثل الودائع لدى البنوك ، والسندات ، والأوراق التجارية ، وشهادات الإيداع ، وما إلى ذلك. وستكون قيمة 3 ٪ في السنة للعام أكبر مما كانت عليه عند استخدام القاعدة السابقة. <br><br>  في حالة قبول المقسوم السنوي على 360 يومًا ، فإن الفائدة المكتسبة باستخدام هذا المقسوم تسمى <strong>عادية</strong> أو <strong>تجارية</strong> .  إذا أخذ المقسوم بالتساوي على 365 أو ، كما سأظهر لاحقًا ، 366 يومًا ، فإن الفائدة تسمى بالضبط. <br><br>  من الواضح ، النسب المئوية العادية هي أكثر من دقيقة. <br><br>  على الرغم من أن القاعدة الأولى أكثر دقة من الثانية ، فإن كلاهما غير دقيق بدرجة كافية. <br><br>  للقضاء على تأثير سنوات القفز على النتائج ، هناك قاعدتان أخريان. <br><br>  <strong>القاعدة (R3) ACT / 365 ، اليابان.</strong>  يتم إجراء الحساب بنفس الطريقة المتبعة في قاعدة ACT / 365 ، ولكن عند حساب مدة الفاصل (البسط الكسر) ، يتم استبعاد تواريخ الكسب.  المقسوم السنوي لا يزال دون تغيير. <br><br>  بحسب ويكي: <br><blockquote style=";text-align:right;direction:rtl">  في العديد من الدول الأوروبية ، وحتى القرن الثامن عشر ، كان يوم 29 فبراير يومًا غير موجود ، وهو تاريخ ليس له وضع قانوني.  في كثير من الأحيان ، لم تتم المعاملات في ذلك اليوم ، ولم يتم سداد المدفوعات ، ولم يتم سدادها في الدين ، وما إلى ذلك ، نظرًا لوجود صعوبات في الجانب الرسمي للقضية وتسوية القضايا في المحكمة. </blockquote><br><br>  طريقة أخرى تتعلق بالتغيير الفعلي للقاسم. <br><br>  <strong>القاعدة (R4) ACT / ACT الأساسية.</strong>  نقسم الفترة المطلوبة إلى ثلاثة أجزاء: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  الجزء الأول ، من تاريخ البدء إلى نهاية العام الذي يقع فيه تاريخ البدء ، </li><li style=";text-align:right;direction:rtl">  الجزء الثالث - من بداية السنة التي يقع فيها تاريخ الانتهاء ، إلى تاريخ الانتهاء ، </li><li style=";text-align:right;direction:rtl">  الجزء الثاني - 0 أو عدة سنوات تقويمية كاملة بين الجزأين الأول والثالث. </li></ul><br>  يتم الحصول على فترات الجزءين الأول والثالث عن طريق قسمة عدد الأيام على المقسوم السنوي 365 أو 366 ، وهذا يتوقف على ما إذا كانت سنة كبيسة؟  تتكون مدة الفترة الثانية من عدد صحيح من سنوات التقويم الكاملة ، بحكم التعريف ، بغض النظر عما إذا كانت قفزة أم لا.  يتم الحصول على المدة في سنوات الفترة بأكملها من خلال جمع فترات ثلاثة أجزاء ، ممثلة بثلاثة أرقام ، والثاني كلي ، والثاني والثالث كسري. <br><br>  <strong>القاعدة (R5) ACT / ACT "قصيرة" التعديل ، لفترات أقل من سنة.</strong>  في هذه الحالة ، يتم تقسيم المدة بالأيام على المقسوم السنوي 365 أو 366 ، اعتمادًا على ما إذا كان هناك تاريخ في 29 فبراير في فترة البحث؟  تتمثل ميزة قاعدة ACT / ACT القصيرة في أنه إذا لم يكن الفاصل الزمني مناسبًا للسنة التقويمية (تنتمي نهايته إلى السنوات المجاورة) ، فسيؤدي تطبيق القواعد الأساسية والقصيرة إلى نتائج مختلفة. <br><br><h4 style=";text-align:right;direction:rtl">  الممارسة الغربية </h4><br>  في الممارسة الغربية ، يتم وصف القواعد بشكل مختلف.  غالبًا ما يتم إعطاء نفس قواعد اللغة الروسية بأسماء مختلفة ، علاوة على ذلك ، لا يتم منحها أسماء واحدة في كل مرة. <br><br>  تعتمد المعلومات على [2].  هذا هو Vicki ، لقد راجعت جميع المصادر واستخدمت معلومات google الأخرى: في القواعد التي تحتوي على عدد محدد من الأيام ، كل شيء على ما يرام ، ولكن في القواعد التي تحتوي على عدد تقريبي من الأيام ، توجد تفسيرات أخرى للقواعد ، وغالبًا ما تتغير مع مرور الوقت ، لوضع القواعد موضع التنفيذ ، العدد التقريبي للأيام هذه المقالة ليست كافية. <br><br>  <strong>القاعدة (W1) ISDA الفعلي / الفعلي.</strong>  تعطي هذه القاعدة نفس النتيجة (R4) "ACT / ACT main" ، ولكن صيغت بشكل مختلف: يتم تقسيم الفاصل إلى سنوات كبيسة وغير قفزة ، بغض النظر عما إذا كانت ممتلئة أو غير كاملة ، علاوة على ذلك ، مجموع الأيام التي تقع فيها السنوات الكبيسة ، مقسومة على 365 ، ومجموع الأيام في السنوات غير الكبيسة مقسوم على 366 ، يتم جمع الرقمين. <br><br>  أسماء أخرى للقاعدة في الممارسة الغربية: Actual / Actual ، Act / Act ، Actual / 365 ، Act / 365.  نعم ، الاسم الأخير هو نفس القاعدة (R1) ، على الرغم من أن جوهر القاعدة مختلف. <br><br>  <strong>القاعدة (W2) الفعلي / 365 ثابت.</strong>  تكرر هذه القاعدة تمامًا القاعدة (R1) ACT / 365 - عدد الأيام مقسوم على 365. <br><br>  أسماء أخرى للقاعدة في الممارسة الغربية: Act / 365 ثابت ، A / 365 ثابت ، A / 365F ، الإنجليزية. <br><br>  <strong>القاعدة (W3) الفعلي / 360.</strong>  تكرر هذه القاعدة (R2) ACT / 360 - العدد الدقيق للأيام مقسوم على 360. <br><br>  <strong>القاعدة (م 4) الفعلي / 364.</strong>  عدد الأيام مقسوم على 364. ليس له مثيل في الممارسة الناطقة باللغة الروسية. <br><br>  <strong>القاعدة (W5) الفعلي / 365L.</strong>  يتكون من قرصين: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  للمدفوعات السنوية.  إذا كان التاريخ هو 29 فبراير خلال الفترة ، فسيتم تقسيم عدد الأيام في الفترة على المقسوم السنوي 366 ، إن لم يكن ، على 365. وبهذا المعنى ، يتزامن مع القاعدة (R5) ACT / ACT "تعديل قصير". </li><li style=";text-align:right;direction:rtl">  إذا كان تواتر المدفوعات يختلف عن السنوي.  إذا كان تاريخ الانتهاء في سنة كبيسة (ولا يساوي بالضرورة 29 فبراير) ، فإن المقسوم السنوي هو 366 ، وإلا - 365. في الممارسة الناطقة باللغة الروسية ، لا يوجد لديه تناظرية. </li></ol><br>  اسم آخر هو السنة ISMA. <br><br>  <strong>القاعدة (م 6) القوات المسلحة البوروندية الفعلية / الفعلية.</strong>  يتكون من قرصين: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  الرئيسية للفترات التي تقل عن سنة: إذا كان التاريخ هو 29 فبراير خلال الفترة ، فسيتم تقسيم عدد الأيام في هذه الفترة على المقسوم السنوي 366 ، إن لم يكن ، على 365. وبهذا المعنى ، يتزامن أيضًا مع قاعدة "التعديل القصير" R / ACT ACT / ACT . </li><li style=";text-align:right;direction:rtl">  ممتدة ، لفترات تزيد عن سنة: يتم احتساب سنة عدد صحيح كاملة من تاريخ الانتهاء إلى تاريخ البدء.  بالنسبة إلى رصيد أقل من عام ، يتم تطبيق القاعدة الرئيسية.  يتم تلخيص عدد السنوات الكاملة وحصة السنة بموجب القاعدة الأساسية. <br></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هناك فروق دقيقة مرتبطة بالعد التنازلي منذ سنوات ، إذا تم إجراء العد التنازلي في 28 فبراير ، وبعد عدد كامل من سنوات كاملة ، كانت السنة سنة كبيسة. </font><font style="vertical-align: inherit;">في هذه الحالة ، يجب اعتماد التاريخ قبل سنوات في 29 فبراير. </font><font style="vertical-align: inherit;">وأضيف أن السؤال الذي يطرح نفسه هو ما إذا كان قد تم إجراء العد التنازلي من 29 فبراير ، وعدد سنوات كاملة ليست مضاعفة من أربعة ، وبالتالي لم يكن العام السابق سنة كبيسة. </font><font style="vertical-align: inherit;">لم أخض في التفاصيل هنا. </font><font style="vertical-align: inherit;">لكن يمكنك الرجوع إلى الروابط من [2]. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">و "الكرز على الكعكة" ، </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (W7) 1/1. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عدد الأيام مقسوم على المقسوم السنوي 365.25. </font><font style="vertical-align: inherit;">يستخدم للحسابات المتعلقة بالتضخم.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> عدد الأيام المقدرة </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تستند القواعد المذكورة أعلاه إلى المدة المحددة في أيام فترات التقويم. ومع ذلك ، في بعض الأحيان هناك مخططات تعتمد على ما يسمى العد المبسط ، أو التقريبي ، للأيام. فكرة هذه المخططات هي "معادلة" مدة كل الأشهر إلى 30 يومًا. وبالتالي ، ستتألف السنة من 12 شهرًا من 30 يومًا ، أي من 360 يوما. لذلك ، سيكون المقسوم السنوي (مقام الكسر) لهذه القواعد دائمًا 360 ، ويتم حساب البسط بطريقة خاصة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نظرًا لأن العدد المحدد لأيام القرض في معظم الحالات ، ولكن بالطبع ، ليس دائمًا ، يكون أكثر من تقريبي (كما يمكن رؤيته بسهولة من خلال تحديد متوسط ​​عدد الأيام في شهر ما لمدة 30.44) ، فإن طريقة حساب الفائدة مع العدد الدقيق لأيام القرض عادةً ما تعطي نمو أكبر من التقريبي. [4]</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يتم وصف أبسط نسخة من هذه القاعدة ، ما يسمى </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بالقاعدة الأساسية 30/360</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، على النحو التالي (فيما يلي المعلومات الواردة في الكتاب [1] - ممارسة اللغة الروسية): </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة الأساسية 30/360. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">العدد التقريبي للأيام بين التواريخ هو</font></font><pre style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 360 * (y2 - y1) + 30 * (m2 - m1) + (d2 - d1) ، </font></font></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حيث y، m، d - السنة والشهر واليوم في التاريخين الثاني والأول. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ظهرت هذه القاعدة قبل إنشاء أجهزة الحوسبة الأولى وحفظت بشكل كبير تكلفة عمليات الحوسبة في الممارسة المالية. </font><font style="vertical-align: inherit;">على الرغم من أن الحاجة إلى طرق مبسطة قد اختفت الآن ، ومع ذلك ، فقد اكتسبت موطئ قدم في الممارسة ، إلا أنها تستخدم أحيانًا في الوقت الحاضر. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تنطبق القاعدة مع إشارة إلزامية لتعديل يشير إلى كيفية التعامل مع الأيام الأخيرة من الأشهر:</font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ممارسة الناطقة باللغة الروسية </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يعطى بواسطة [1]. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (R6) 30/360 ISDA. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا كانت d1 = 31 ، ثم d1 '= 30 ، وإلا d1' = d1. </font><font style="vertical-align: inherit;">إذا كانت d2 = 31 و d1 '= 30 ، ثم d2' = 30 ، وإلا d2 '= d2. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (R7) 30E / 360. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا كانت d1 = 31 ، ثم d1 '= 30 ، وإلا d1' = d1. </font><font style="vertical-align: inherit;">إذا كانت d2 = 31 ، ثم d2 '= 30 ، وإلا d2' = d2. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذه القاعدة هي البديل لقاعدة ISDA 30/360 ، والتي تستخدم بشكل أساسي في أوروبا ، ومن هنا جاءت التسمية "E" باسم القاعدة. </font><font style="vertical-align: inherit;">يختلف عن قاعدة ISDA 30/360 فقط عندما يكون التاريخ الثاني هو الحادي والثلاثين. </font><font style="vertical-align: inherit;">تقوم النسخة الأوروبية دائمًا بتحويلها إلى الرقم الثلاثين ، بغض النظر عن التاريخ الأول. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (R8) 30/360 PSA. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا كان d1 = 31 أو d1 هو آخر يوم في شهر فبراير ، فعندئذ يكون d1 '= 30 ، وإلا d1' = d1. </font><font style="vertical-align: inherit;">إذا كانت d2 = 31 و d1 '= 30 ، ثم d2' = 30 ، وإلا d2 '= d2.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> من المحتمل أن يكون وصف القاعدة 30/360 SIA الواردة في [1] خطأ ، لذلك لن أقدمها هنا. </font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الممارسة الغربية </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نظرا وفقا ل [2]. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (W8) 30/360 أساس السندات.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> نفس (R6) 30/360 ISDA. اسم آخر: 30A / 360. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (W9) 30E / 360.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مثل (R7) 30E / 360. أسماء أخرى: 30/360 ICMA ، 30S / 360 ، أساس سندات اليورو (ISDA 2006) ، الألمانية الخاصة. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (W10) 30E / 360 ISDA.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> إذا كانت d1 هي آخر يوم في الشهر ، فعندئذ d1 '= 30. إذا كانت d2 هي آخر أيام NOT February ، فعندئذ d2 '= 30. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أسماء أخرى: 30E / 360 ISDA ، Eurobond أساس (ISDA 2000) ، الألمانية. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (W11) 30/360 SIA.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> إذا كانت d1 هي آخر أيام شهر فبراير وكانت d2 هي آخر أيام شهر فبراير ، فعندئذٍ سيكون d2 '= 30. إذا كانت d1 = 31 أو اليوم الأخير من فبراير ، فعندئذ d1 '= 30 ، وإلا d1' = d1. إذا كانت d1 '= 30 و d2 = 31 ، ثم d2' = 30 ، وإلا d2 '= d1.</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القواعد (R4) ACT / ACT ، (W1) ISDA الفعلي / الفعلي ، (W2) Actual / 365 ثابت تسمى أيضًا "ممارسة اللغة الإنجليزية". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القواعد (R2) ACT / 360 و (W3) Actual / 360 تسمى أيضًا "ممارسة فرنسية". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القاعدة (R7) 30E / 360 ، (W9) 30E / 360 و (W10) 30E / 360 تسمى أيضًا "الممارسة الألمانية" أو "الممارسة الألمانية". </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لذلك ، مع الأخذ بعين الاعتبار الفائدة الدقيقة والعادية ، وكذلك العدد الدقيق والتقريبي للأيام لحساب الفائدة ، نحصل على أربع طرق لحساب الفائدة البسيطة (تتم الإشارة إلى أسماء القواعد في الممارسة الناطقة باللغة الروسية):</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مصلحة عادية مع العدد الدقيق للأيام (ACT / 360 - القاعدة المصرفية) ، </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> النسب المئوية بالضبط مع العدد الدقيق للأيام (ACT / 365 ، ACT / ACT) ، </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مصلحة عادية مع عدد تقريبي من الأيام (30/360) ، </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> النسب المئوية بالضبط مع عدد تقريبي من الأيام. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الطريقة الأولى الأكثر شيوعًا تُسمى القاعدة المصرفية ، وعادةً ما تكون الثانية والثالثة ، وتقريباً الرابعة [1]. وتقول [4]: ​​"... خيار الحساب مع الفائدة الدقيقة وعدد تقريبي من أيام القرض لا معنى له ولا ينطبق". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">توضح الحسابات أعلاه للمدة التقريبية للفترات بالكسور في السنة عدم تافه وتنوع القواعد المطبقة. يعتمد تطبيقها (وكذلك الأصل) على البلد والعملة ونوع الأداة المالية والجمعيات المهنية والاتفاقيات. [1] </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الخلاصة:</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> كيف أحسب 3 ٪ في حالتي مع المرافق العامة في أوكرانيا؟</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحليل الممارسة القضائية لتطبيق الفن. يقول 625 من القانون المدني لأوكرانيا أن الطريقة (R1) ACT / 365 [3] تُستخدم عادة ، لكن هذا لم يصاغ بوضوح. أعتقد أنك ما زلت بحاجة إلى تطبيق (R4) ACT / ACT ، وإليك السبب: إذا كنت تتراكم 3٪ لمدة سنة كاملة باستخدام طريقة ACT / 365 ، فسيكون مبلغ الفائدة مساوياً 3.008219٪ ، وهو للدين (أو حجم هيئة القرض) من 1 مليون وحدة نقدية سوف تعطي ما يزيد على 82.19 CU أكثر من 3 ٪ ، والتي يشترطها سعر الفائدة السنوي الموحد بموجب القانون. سيصبح هذا مهمًا بشكل خاص مع الاستحقاق التدريجي للفائدة. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سأكون ممتناً للتعليقات ، خاصة من موظفي البنك. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المصادر المستخدمة</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1) Bocharov ، P.P. ، Kasimov ، Yu.F. الرياضيات المالية. موسكو: غارداريكي ، 2002 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2)</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Day_count_convention</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3) تحليل تطبيق الفن. 625 من القانون المدني لأوكرانيا في الدعاوى المدنية ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zib.com.ua/ua/74602-analiz_praktiki_zastosuvannya_st_625_civilnogo_kodeksu_ukrai.html</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4) Chetyrkin E.M. الرياضيات المالية. موسكو: القضية ، 2005 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) اتفاقيات عدد الأيام وعوامل الاستحقاق ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.fincad.com/support/developerfunc/mathref/Daycount.htm</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6) خطاب معلومات من المحكمة الاقتصادية العليا في أوكرانيا رقم 01-06 / 928/2012 بتاريخ 17/07/2012 ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zakon.rada.gov.ua/laws/show/v_928600-12</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> والآن رمز صغير في قاعدة بيانات أوراكل: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إليك حزمة قمت </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">بإعدادها لحالتي</font></a><font style="vertical-align: inherit;"> الخاصة - فهي تحسب تكاليف التضخم و 3 ٪ سنويًا لأوكرانيا.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لا توجد وظيفة مجمعة في Oracle Database تضاعف قيم التضخم. </font><font style="vertical-align: inherit;">لذلك ، أنا استخدم جمع اللوغاريتمات.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">النص المخفي</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_OVERHEAD_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, OVERHEAD_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_AMOUNT_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, DEBT_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PAYMENT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_MONTH <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_RATE <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, SKIP_INFLATION <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>), INF_RATE_ACCUMULATED <span class="hljs-built_in"><span class="hljs-built_in">number</span></span> , INF_COEF_ACCUMULATED <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, INF_AMOUNT_ACCUMULATED <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, INF_AMOUNT_MONTH <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, DEBT_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PAYMENT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_MONTH <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, INF_RATE <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, SKIP_INFLATION <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_PCT_AMOUNT_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, DEBT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, DEBT_AMOUNT <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PAYMENT_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, PCT_YEAR <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_DAYS <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_PCT_PER_DAY <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_BEGIN_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> , PCT_YEAR_END_DATE <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, PCT_YEAR_DAYS_CALC <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_YEAR_PCT_PER_YEAR <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>, PCT_AMOUNT_PER_YEAR <span class="hljs-built_in"><span class="hljs-built_in">number</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_OVERHEAD_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_OVERHEAD_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_AMOUNT_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_WITH_INF_AMOUNT_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_INF_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_WITH_INF_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> DEBT_WITH_PCT_AMOUNT_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DEBT_WITH_PCT_AMOUNT_T; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PACKAGE</span></span> CALC_OVERHEADS_P <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> GET_DEBT_WITH_INF (p_debt_date_begin <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_debt_date_end <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_last_collection_date <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DEBT_WITH_INF_LIST_T; function GET_DEBT_WITH_INF_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_INF_AMOUNT_LIST_T; function GET_DEBT_WITH_INF_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T; function GET_DEBT_WITH_PCT_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_PCT_AMOUNT_LIST_T; function GET_DEBT_WITH_PCT_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; / <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PACKAGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span> CALC_OVERHEADS_P <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> GET_DEBT_WITH_INF (p_debt_date_begin <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_debt_date_end <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, p_last_collection_date <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DEBT_WITH_INF_LIST_T <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> ret_value DEBT_WITH_INF_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> a.ID, a.DEBT_DATE, a.DEBT_AMOUNT, a.PAYMENT_DATE, b.INF_MONTH, c.AVAL <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_RATE <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> DEBTS a <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">apply</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> add_months (trunc (a.PAYMENT_DATE, <span class="hljs-string"><span class="hljs-string">'month'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">rownum</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> &lt;= months_between (trunc (p_last_collection_date, <span class="hljs-string"><span class="hljs-string">'month'</span></span>), trunc (a.PAYMENT_DATE, <span class="hljs-string"><span class="hljs-string">'month'</span></span>)) + <span class="hljs-number"><span class="hljs-number">1</span></span>) b <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> INFLATION c <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> c.ADATE = b.INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> c.TYP = <span class="hljs-string"><span class="hljs-string">'M'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a.DEBT_DATE <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> p_debt_date_begin <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> p_debt_date_end ) , T2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE , <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> trunc (PAYMENT_DATE, <span class="hljs-string"><span class="hljs-string">'month'</span></span>) = INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">day</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PAYMENT_DATE) <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> trunc (p_last_collection_date, <span class="hljs-string"><span class="hljs-string">'month'</span></span>) = INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">day</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p_last_collection_date) <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> SKIP_INFLATION <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_WITH_INF_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T2; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_INF_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_INF_AMOUNT_LIST_T is ret_value DEBT_WITH_INF_AMOUNT_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION , <span class="hljs-keyword"><span class="hljs-keyword">exp</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ln</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> SKIP_INFLATION = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> INF_RATE <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> INF_RATE / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">over</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">partition</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> INF_MONTH <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span> <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unbounded</span></span> <span class="hljs-keyword"><span class="hljs-keyword">preceding</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">current</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>)) * <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_RATE_ACCUMULATED <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> (CALC_OVERHEADS_P.GET_DEBT_WITH_INF (p_debt_date_begin, p_debt_date_end, p_last_collection_date))) , T2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION, INF_RATE_ACCUMULATED , (INF_RATE_ACCUMULATED - <span class="hljs-number"><span class="hljs-number">100</span></span>) / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_COEF_ACCUMULATED , <span class="hljs-keyword"><span class="hljs-keyword">round</span></span> (((INF_RATE_ACCUMULATED - <span class="hljs-number"><span class="hljs-number">100</span></span>) / <span class="hljs-number"><span class="hljs-number">100</span></span>) * DEBT_AMOUNT, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_AMOUNT_ACCUMULATED <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_WITH_INF_AMOUNT_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, INF_MONTH, INF_RATE, SKIP_INFLATION, INF_RATE_ACCUMULATED, INF_COEF_ACCUMULATED, INF_AMOUNT_ACCUMULATED , INF_AMOUNT_ACCUMULATED - lag (INF_AMOUNT_ACCUMULATED, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">over</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">partition</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> INF_MONTH)) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T2; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_INF_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T is ret_value DEBT_OVERHEAD_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> , DEBT_DATE , <span class="hljs-keyword"><span class="hljs-keyword">round</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">exp</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ln</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> SKIP_INFLATION = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> INF_RATE / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>))) - <span class="hljs-number"><span class="hljs-number">1</span></span>) * DEBT_AMOUNT, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> INF_AMOUNT <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> (CALC_OVERHEADS_P.GET_DEBT_WITH_INF (p_debt_date_begin, p_debt_date_end, p_last_collection_date)) <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_OVERHEAD_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, INF_AMOUNT) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_PCT_AMOUNT (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_WITH_PCT_AMOUNT_LIST_T is ret_value DEBT_WITH_PCT_AMOUNT_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> DEBTS a <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">apply</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PAYMENT_DATE) + <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> &lt;= <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p_last_collection_date) - <span class="hljs-keyword"><span class="hljs-keyword">extract</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PAYMENT_DATE) + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> DEBT_DATE <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> p_debt_date_begin <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> p_debt_date_end ) , T2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'31.12.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD.MM.YYYY'</span></span>) - <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'01.01.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD.MM.YYYY'</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_DAYS <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1) , T3 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS , <span class="hljs-number"><span class="hljs-number">0.03</span></span> / PCT_YEAR_DAYS <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_PCT_PER_DAY <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T2) , T4 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS, PCT_YEAR_PCT_PER_DAY , <span class="hljs-keyword"><span class="hljs-keyword">greatest</span></span> (PAYMENT_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'01.01.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD-MM-YYYY'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_BEGIN_DATE , <span class="hljs-keyword"><span class="hljs-keyword">least</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span> (<span class="hljs-string"><span class="hljs-string">'31.12.'</span></span>||PCT_YEAR, <span class="hljs-string"><span class="hljs-string">'DD-MM-YYYY'</span></span>), p_last_collection_date) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_END_DATE <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T3) , T5 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS, PCT_YEAR_PCT_PER_DAY, PCT_YEAR_BEGIN_DATE, PCT_YEAR_END_DATE , PCT_YEAR_END_DATE - PCT_YEAR_BEGIN_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_DAYS_CALC , (PCT_YEAR_END_DATE - PCT_YEAR_BEGIN_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span>) * PCT_YEAR_PCT_PER_DAY <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_YEAR_PCT_PER_YEAR , <span class="hljs-keyword"><span class="hljs-keyword">round</span></span> ((PCT_YEAR_END_DATE - PCT_YEAR_BEGIN_DATE + <span class="hljs-number"><span class="hljs-number">1</span></span>) * PCT_YEAR_PCT_PER_DAY * DEBT_AMOUNT, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PCT_AMOUNT_PER_YEAR <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T4) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_WITH_PCT_AMOUNT_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, DEBT_AMOUNT, PAYMENT_DATE, PCT_YEAR, PCT_YEAR_DAYS, PCT_YEAR_PCT_PER_DAY, PCT_YEAR_BEGIN_DATE, PCT_YEAR_END_DATE, PCT_YEAR_DAYS_CALC, PCT_YEAR_PCT_PER_YEAR, PCT_AMOUNT_PER_YEAR) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T5; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; function GET_DEBT_WITH_PCT_AMOUNT_TOTAL (p_debt_date_begin date, p_debt_date_end date, p_last_collection_date date) return DEBT_OVERHEAD_LIST_T is ret_value DEBT_OVERHEAD_LIST_T; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> DEBT_OVERHEAD_T (<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> (PCT_AMOUNT_PER_YEAR)) <span class="hljs-keyword"><span class="hljs-keyword">bulk</span></span> <span class="hljs-keyword"><span class="hljs-keyword">collect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ret_value <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> (CALC_OVERHEADS_P.GET_DEBT_WITH_PCT_AMOUNT (p_debt_date_begin, p_debt_date_end, p_last_collection_date)) <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>, DEBT_DATE; return ret_value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar466401/">https://habr.com/ru/post/ar466401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar466379/index.html">قم بتشغيل برنامج "سطح المكتب" على المتحكم الدقيق</a></li>
<li><a href="../ar466381/index.html">كيف تغيرت مصابيح عصر LED في عام 2019</a></li>
<li><a href="../ar466383/index.html">Cryptocurrency Ocean: مراجعة لأفضل 50 مشروعًا مع CoinMarketCap</a></li>
<li><a href="../ar466385/index.html">فهم وسطاء الرسائل. تعلم آليات المراسلة من خلال ActiveMQ و Kafka. الفصل 1</a></li>
<li><a href="../ar466397/index.html">نحن إعادة برمجة أمين الصندوق وطباعته على كيانو ريفز. الجزء 2. برامج الكمبيوتر</a></li>
<li><a href="../ar466403/index.html">تدريب Cisco 200-125 CCNA v3.0. يوم 35. بروتوكول نقل DTP الحيوي</a></li>
<li><a href="../ar466405/index.html">تدريب Cisco 200-125 CCNA v3.0. يوم 36. قناة بروتوكول STP</a></li>
<li><a href="../ar466407/index.html">ثقافة التوظيف في شركات الإحصاء الكبيرة</a></li>
<li><a href="../ar466409/index.html">تدريب Cisco 200-125 CCNA v3.0. اليوم 37. STP: اختيار Root Bridge وميزات الحرس PortFast و BPDU. الجزء 1</a></li>
<li><a href="../ar466413/index.html">موقع تبادل ل Bitrix و 1 C: حل المشاكل الرئيسية</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>