<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏾 🌱 🚶🏾 存储中的存储类内存-如果您需要更快的话 👂🏾 👐🏽 📳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您可能还记得，NRE长期以来一直在新型数据仓库（当然是The Machine ）和优化对存储的访问（我们在Gen-Z联盟中的成员资格）这一主题上进行投资。 

 这项运动的目的是加快客户应用程序的工作。 此外，这一运动是多层次的：尽管正在打造The Machine计算系统的全新体系结构（所谓的以内存...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>存储中的存储类内存-如果您需要更快的话</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hpe/blog/432306/"><img src="https://habrastorage.org/webt/tc/ks/yy/tcksyyfppgu3sraou3ixk2bqlmi.png" alt="图片不代表公司的立场，而是作者的个人见解，不一定与本文的主题有关，阿们" align="left"> 您可能还记得，NRE长期以来一直在新型数据仓库（当然是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">The Machine</a> ）和优化对存储的访问（我们在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Gen-Z联盟</a>中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>成员资格）这一主题上进行投资。 <br><br> 这项运动的目的是加快客户应用程序的工作。 此外，这一运动是多层次的：尽管正在打造The Machine计算系统的全新体系结构（所谓的以内存为中心的体系结构），但我们知道我们现在需要加快速度。 让我们看看今天可以做什么，明天将在HPE上看到什么。 提示-我们将以Intel Optane的形式在存储类内存（SCM）上使用智能且成本相对较低的缓存来讨论3PAR和Nimble存储的强劲增长。 <br><a name="habracut"></a><br> 首先，我们确定了所研究问题的边界。 在本文中，我们对具有自己特性的高性能计算不感兴趣，对仅需要服务器内快速存储的任务也没有兴趣。 一般而言，后者无疑也是Intel Optane和SCM的主题，但此类任务通常是特定的，很难屈服于虚拟化以及相应的整合。 我们将讨论与外部3PAR，Nimble或MSA类存储系统相适应的任务和应用程序（尽管我们也不会涉及MSA）。 <br><br> 因此，如何提高与外部存储系统上的数据一起使用的虚拟化应用程序的性能： <br><ul><li> 看看是什么阻碍了应用程序的发展。 也许根本不在于存储，而在于处理器的预期，处理数据的内部逻辑，次优的书面请求。 </li><li> 如果在等待数据（IO）方面延迟较大，则应首先检查是否满足配置应用程序OS驱动程序捆绑包（SCSI，HBA等）的所有建议。 </li><li> 在SAN（以太网，FC）中可能就是这种情况； </li><li> 也许它仍然在存储系统中。 存放在哪里？ 在控制器硬件（与缓存有什么关系，什么是处理器负载），控制器操作系统和驱动程序，数据总线，磁盘... </li></ul><br> 可能的思路：哦，可以肯定-车轮！ 其他一切都很复杂，我不想碰，但我们会尝试使用磁盘。 我们拥有的是混合动力-那么，那么我们需要全闪存。 我们已经有了全闪存吗？ 还有什么更好的呢？ 我们会观看知名品牌的广告： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dc/ig/q7/dcigq7iuujylprrygydh_0xbhla.png" alt="图片"></div><br> 一切都清楚了，我们使用“ NVMe磁盘”进行存储。 等等， <b>多少钱</b> ？ 而且您需要购买<b>新的</b>存储系统，我现在不能升级吗？ 好吧，你必须... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0fc/a1a/91d/0fca1a91df15114fad6d015ff1a3aa56.gif" alt="图片"></div><br> 但是还有其他可能吗？  NRE相信，这不仅是可能的，而且是必要的。 这就是为什么： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fx/np/rv/fxnprvk019rj4pwqquoqc2yhrca.png" alt="图片"></div><br> 事实上，目前市场上大多数NVMe SSD都是相同类型的介质NAND闪存，它们不是通过串行连接SCSI（SAS）协议而是通过新的NVMe协议连接到控制器的。 新协议无疑是很漂亮的，下面是一些事实： <br><br><ul><li>  64,000个队列可用，每个队列有64,000个线程-屋顶上方的IOPS </li><li> 控制器直接连接到CPU-降低CPU负载 </li><li> 每个处理器内核直接看到每个SSD-低延迟 </li></ul><br><br> 通过完全替换从应用程序到磁盘的SCSI协议，可以显着减少访问延迟。 但是营销人员今天能为我们提供什么？  “ NVMe磁盘。” 即 到存储控制器本身的整个链保持不变-SCSI。 然后，控制器只需在NVMe中重新包装SCSI，即可与连接的NAND SSD进行通信。 <br><br> 上图的结果是延迟中的最小增益。 尽管峰值IOPS的增加确实非常明显。 传统比喻：您需要一辆可以在5秒内快速加速超车的汽车，还是在理想条件下可以在10分钟内加速至300 km / h的汽车？ 两种选择都不错，但更多情况下它们选择第一个。 <br><br> 现实情况是，对于实际应用而言，NVMe NAND带来的收益今天几乎不那么明显，而且我们认为，与SAS SSD相比，价格和可用容量的损失根本不值得。 <br><br>  HPE所提供的不仅仅是将SAS的“最后一英里”替换为NVMe，而是使用了通过NVMe连接的全新Intel Optane驱动器作为3PAR和Nimble存储控制器中的读取缓存。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xu/li/vk/xulivkci2dqatabrok2n7vnwzio.png" alt="图片"></div><br>  <i>（照片中的测速计和管理员都称为Felix，但区别很大！）</i> <br><br> 为什么我们决定采用这种方式： <br><br><ul><li> 因此我们可以为客户提供已购买的存储系统的更新（特别是3PAR 9450、20450、20850和Nimble AF60和AF80-所有顶级全闪存） <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/u5/wz/dl/u5wzdlhs2_wb2lyalb1phbaprpi.jpeg" alt="图片"></div></li><li> 通过这种非常简单的方式（通过向每个控制器添加板上装有Optane的扩展卡），我们可以将最大延迟降低约15倍，将平均延迟降低30-40％（IOPS也在增长，很好）。 最重要的是，延迟不会从营销“ <b>从</b> 0.2毫秒开始”跳变！ 广告是无限的（营销不是我们的营销，我只是引用），但是它变得更加稳定： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/4t/u_/ee4tu_cfntaw66z8sb6pupdnx_o.png" alt="图片"></div><br>  <i>（基于内部HPE测试的延迟值）</i> </li><li> 更具体地说，可以从您最喜欢的Oracle减少阵列延迟中得到什么，例如：根据我们的内部测试，IO等待平均减少了37％，SQL选择加快了27％。 </li><li> 为什么缓存读而不写？ 因为在3PAR和Nimble中，多年以来，DRAM一直被用作写缓存（Nimble中的非易失性NVRAM）。 反过来，它比NVMe设备快几倍，直到Gen-Z或类似的新协议问世为止。 即 记录对于通过NVMe加速不是必需的。 </li><li> 为什么选择英特尔傲腾？ 因为这是最新的介质类型，所以尽管在密度方面它仍落后于NAND，但响应速度却快了一个数量级。 此外，Optane具有几乎无限的重写资源。 通常，对于已加载的系统，Optane上的交易成本比NAND NVMe上的交易成本低得多。 缓存是一个从各个方面都非常负载的层。 较热的数据会从较慢的一层复制到它（因此需要资源），如果在控制器的NVRAM缓存中找不到数据（因此需要快速响应，则从中读取数据），因此超出NVRAM缓存看起来并不像去大型超市那样并参观房屋附近的商店）。 </li><li> 为什么不将NVMe磁盘放在最后？ 一定要放！ 例如，Nimble机箱允许您现在安装此类磁盘（背板已准备就绪），只有我们不为Nimble出售此类磁盘，因为它还早。 现在，SCM高速缓存使相对几分钱的性能有了多种提高。 因此，让我们在NVMe NAND仍然更便宜，NVMe协议本身仍在发展（多路径仅在2018年3月才在标准中出现，并且仍远远落后于SCSI稳定性）的情况下使用它，并且通常来说，从应用程序到磁盘的NVMe生态系统仍然存在未开发的产品（NVMe上的面料去了幼儿园，制造商争论它的外观，驱动程序具有最小的功能，以至于当一切稳定下来时它们不会覆盖太多）。 </li><li> 也因为我们真的很喜欢缓存所有内容。 这是有关Nimble的示例： </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ra/xh/v3/raxhv31dou-uchvgyubrwwu3usm.png" alt="图片"></div><br> 是的，顺便说一下，您是否熟悉<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">HPE InfoSight</a> ？ 使用此工具，您总是知道在哪里寻找延迟。 例如，像这样： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xt/bz/ni/xtbzniulhurmg44yndks4qpr3kw.png" alt="图片"></div><br>  <i>（如果发现延迟，请联系我们的信仰。）</i> <br><br> 现在可以总结一下：如果您是3PAR 9000或20,000的骄傲拥有者，那么您现在就可以订购基于Intel Optane的3PAR 3D Cache。 如果您仔细观察Nimble All-flash阵列，请采取以下措施，因为 它是将来保护投资的可靠基础。 现在就开始使用SAS NAND SSD，稍后再插入基于SCM的全闪存Turbo缓存，然后将驱动器更改为NVMe。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xq/uo/cg/xquocgeacjpnl2zqfmkttpkhjhc.png" alt="3PAR和Nimble SCM缓存"></div><br> 供参考： <br><ul><li> 这是最近的Nimble网络研讨会： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">HPE Nimble Evolution：偏执+数据保护等等</a> </li><li> 这是关于HPE产品组合中的Intel Optane的网络研讨会： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Optane数-使用Intel技术提高数据中心的容量</a> 。 </li><li> 敏捷战斗翼队领导人博客文章： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">recoverymonkey.org/2018/11/30/hpe-memory-driven-architectures-extend-to-3par-and-nimble-storage</a> 。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN432306/">https://habr.com/ru/post/zh-CN432306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN432296/index.html">即使您退出帐户，Google也会使您陷入个人“搜索泡沫”</a></li>
<li><a href="../zh-CN432298/index.html">Timeweb在.RU区域进入了TOP-10域注册商。</a></li>
<li><a href="../zh-CN432300/index.html">支持，服务，头痛和所有一切</a></li>
<li><a href="../zh-CN432302/index.html">序列到序列第2部分模型</a></li>
<li><a href="../zh-CN432304/index.html">一位杰出的神经科学家，可能对创造真正的人工智能有关键作用</a></li>
<li><a href="../zh-CN432308/index.html">UE4模块化科幻级别：受Nostromo和Serenity启发</a></li>
<li><a href="../zh-CN432310/index.html">Ktor作为Android的HTTP客户端</a></li>
<li><a href="../zh-CN432312/index.html">在Power BI中创建RF映射的形状映射</a></li>
<li><a href="../zh-CN432314/index.html">Roskachestvo发布了2018年最佳智能手机列表</a></li>
<li><a href="../zh-CN432316/index.html">2018年俄罗斯AI杯：CodeBall。 壮观的3D竞赛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>