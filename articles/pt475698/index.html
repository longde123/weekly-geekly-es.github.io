<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶ üò§ üë©üèª‚Äçü§ù‚Äçüë®üèæ Abaixo da toca do coelho: uma hist√≥ria de um verniz - erro 1 - parte 1 ‚õ≥Ô∏è ü§∞üèø üñêüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depois de pressionar os bot√µes do teclado nos √∫ltimos 20 minutos, como se ele estivesse digitando sua vida, ghostinushanka se vira para mim com um olh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Abaixo da toca do coelho: uma hist√≥ria de um verniz - erro 1 - parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475698/"><p>  Depois de pressionar os bot√µes do teclado nos √∫ltimos 20 minutos, como se ele estivesse digitando sua vida, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">ghostinushanka se</a> vira para mim com um olhar meio louco nos olhos e um sorriso malicioso: ‚ÄúCara, acho que entendi. </p><br><p> Veja isso ‚Äù- enquanto ele aponta para um dos personagens na tela -‚Äú Aposto meu chap√©u vermelho que se adicionarmos o que acabei de enviar para voc√™ aqui ‚Äù- como ele aponta para outro lugar no c√≥digo -‚Äú haver√° n√£o h√° mais erro. ‚Äù <br>  Ligeiramente confuso e cansado, modifico a express√£o sed que estamos descobrindo h√° algum tempo, salve o arquivo e execute o <code>systemctl varnish reload</code> .  Mensagem de erro desaparecida ... </p><br><p>  ‚ÄúOs e-mails que eu troquei com o candidato‚Äù, continua meu colega, enquanto seu sorriso muda para um sorriso amplo e genu√≠no, ‚ÄúDe repente me ocorreu que esse √© exatamente o mesmo problema!‚Äù </p><a name="habracut"></a><br><h3 id="how-it-all-began">  Como tudo come√ßou </h3><br><p>  <em>Este artigo pressup√µe alguma familiaridade com bash, awk e systemd.</em>  <em>Algum conhecimento de verniz √© ben√©fico, mas n√£o obrigat√≥rio.</em> <em><br></em>  <em>Os carimbos de data e hora nos exemplos de snippets foram editados.</em> <em><br></em>  <em>Co-autoria com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">ghostinushanka</a> .</em> </p><br><p>  O sol brilha atrav√©s das janelas do tamanho da parede em mais uma manh√£ quente de outono, uma x√≠cara de l√≠quido com cafe√≠na rec√©m-preparado fica ao lado do teclado, fones de ouvido vocalizam a amada sinfonia de sons cobrindo o farfalhar dos teclados mec√¢nicos e a primeira entrada na lista de pend√™ncias no quadro Kanban exibe divertidamente o t√≠tulo do bilhete fat√≠dico ‚ÄúInvestigar vernizreload <code>sh: echo: I/O error</code> na prepara√ß√£o‚Äù.  Quando se trata de verniz, n√£o h√° espa√ßo para erros, mesmo que esse em particular n√£o pare√ßa estar causando problemas reais. </p><br><p>  Para aqueles que n√£o est√£o familiarizados com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">varnishreload</a> , √© simplesmente um script de shell usado para recarregar a configura√ß√£o - tamb√©m chamada de VCL - do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">servidor de cache</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Varnish</a> . </p><br><p>  Como o t√≠tulo do t√≠quete sugere, o erro foi encontrado em uma das m√°quinas de preparo e eu tinha certeza de que o roteamento Varnish funciona no ambiente de preparo, ent√£o minha suposi√ß√£o foi que esse deve ser um problema menor.  Apenas uma mensagem de sa√≠da amig√°vel ao usu√°rio gravada em um fluxo fechado.  Pego o ingresso, acreditando firmemente que vou conseguir resolv√™-lo em menos de 30 minutos, dou um tapinha nas costas por limpar outra tarefa mundana e voltar a coisas mais importantes. </p><br><h3 id="hitting-the-wall-at-200kph">  Bater na parede a 200 km / h </h3><br><p>  Abrindo o arquivo <code>varnishreload</code> em um dos servidores afetados em execu√ß√£o no Debian Stretch, encontro um script de shell com menos de 200 linhas.  Lendo brevemente, n√£o vejo nada perigoso que me impe√ßa de executar o script do terminal repetidamente.  Afinal, isso √© encena√ß√£o, mesmo que quebre, ningu√©m vai reclamar, bem ... n√£o √© demais.  Eu corro o script e observo, apenas para descobrir que n√£o h√° erros a serem vistos.  Mais algumas execu√ß√µes repetidas para garantir razoavelmente que n√£o posso reproduzir o erro sem nenhum esfor√ßo extra e come√ßo a planejar planos de ajustar e distorcer o ambiente do script.  Fechar STDOUT para o script completamente (com <code>&gt; &amp;-</code> ) ajuda alguma coisa?  Ou stderr?  Nem fez. </p><br><p>  Obviamente, systemd manipula o ambiente de alguma forma, mas como e ... por qu√™?  Eu <code>varnishreload</code> o vim e edito a <code>varnishreload</code> de <code>varnishreload</code> do sistema, adicionando <code>set -x</code> logo abaixo do shebang, esperando que a sa√≠da detalhada da execu√ß√£o do script <code>varnishreload</code> alguma luz. </p><br><p>  O arquivo est√° corrigido, ent√£o recarrego o verniz, apenas para ver que a altera√ß√£o quebrou completamente o script ... A sa√≠da √© uma bagun√ßa completa exibindo toneladas de c√≥digo no estilo C e o buffer de rolagem padr√£o n√£o √© suficiente para descobrir de onde vem.  Eu me sinto confusa.  A configura√ß√£o da op√ß√£o de depura√ß√£o para o shell script poderia interromper o programa que chama?  N√£o, n√£o pode ser.  Um bug no shell?  V√°rios cen√°rios poss√≠veis rodando descontroladamente em diferentes dire√ß√µes em minha mente.  Um copo de bebida com cafe√≠na √© instantaneamente finalizado, viagem r√°pida √† cozinha para reabastecimento e aqui vamos n√≥s novamente.  Abro o arquivo e olho atentamente para o shebang: <code>#!/bin/sh</code> . </p><br><p>  Mas <code>/bin/sh</code> √© certamente apenas um link simb√≥lico para bash, de modo que o script seja interpretado no modo compat√≠vel com POSIX, certo?  Errado!  O shell n√£o interativo padr√£o no Debian √© o dash, e √© exatamente para isso que o <code>/bin/sh</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aponta</a> . </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ls -l /bin/sh lrwxrwxrwx 1 root root 4 Jan 24 2017 /bin/sh -&gt; dash</span></span></code> </pre> <br><p>  Se apenas para depura√ß√£o, alterei o shebang para <code>#!/bin/bash</code> , removi o <code>set -x</code> e tentei novamente.  Finalmente, uma sa√≠da de erro razo√°vel do pr√≥ximo recarregamento de verniz: </p><br><pre> <code class="bash hljs">Jan 01 12:00:00 hostname varnishreload[32604]: /usr/sbin/varnishreload: line 124: <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>: write error: Broken pipe Jan 01 12:00:00 hostname varnishreload[32604]: VCL <span class="hljs-string"><span class="hljs-string">'reload_20190101_120000_32604'</span></span> compiled</code> </pre> <br><p>  Linha 124, agora estamos conversando! </p><br><pre> <code class="bash hljs">114 <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_vcl_file</span></span></span></span>() { 115 VCL_SHOW=$(varnishadm vcl.show -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_NAME</span></span></span><span class="hljs-string">"</span></span> 2&gt;&amp;1) || : 116 VCL_FILE=$( 117 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_SHOW</span></span></span><span class="hljs-string">"</span></span> | 118 awk <span class="hljs-string"><span class="hljs-string">'$1 == "//" &amp;&amp; $2 == "VCL.SHOW" {print; exit}'</span></span> | { 119 <span class="hljs-comment"><span class="hljs-comment"># all this ceremony to handle blanks in FILE 120 read -r DELIM VCL_SHOW INDEX SIZE FILE 121 echo "$FILE" 122 } 123 ) || : 124 125 if [ -z "$VCL_FILE" ] 126 then 127 echo "$VCL_SHOW" &gt;&amp;2 128 fail "failed to get the VCL file name" 129 fi 130 131 echo "$VCL_FILE" 132 }</span></span></code> </pre> <br><p>  Mas, como se v√™, a linha 124 √© bem mon√≥tona.  S√≥ pude supor que o erro foi produzido como parte do comando multilinha em execu√ß√£o na linha 116. </p><br><p>  Ent√£o, o que o subshell acima produz at√© para armazenar na vari√°vel <code>VCL_FILE</code> ?  Na primeira parte, envia o conte√∫do da vari√°vel <code>VCL_SHOW</code> criada na linha 115 para o tubo.  O que acontece ent√£o? </p><br><p>  Primeiro, ele usa <code>varnishadm</code> , que √© uma parte padr√£o de uma instala√ß√£o do Varnish usada para configurar o Varnish sem ter que reinici√°-lo.  O subcomando <code>vcl.show -v</code> √© usado para imprimir toda a configura√ß√£o da VCL especificada por <code>${VCL_NAME}</code> para STDOUT. </p><br><p>  Para exibir a configura√ß√£o atual da VCL ativa, bem como v√°rias vers√µes anteriores do roteamento de verniz que ainda est√£o na mem√≥ria, voc√™ pode usar outro comando <code>varnishadm vcl.list</code> , cuja sa√≠da seria semelhante √† abaixo: </p><br><pre> <code class="plaintext hljs">discarded cold/busy 1 reload_20190101_120000_11903 discarded cold/busy 2 reload_20190101_120000_12068 discarded cold/busy 16 reload_20190101_120000_12259 discarded cold/busy 16 reload_20190101_120000_12299 discarded cold/busy 28 reload_20190101_120000_12357 active auto/warm 32 reload_20190101_120000_12397 available auto/warm 0 reload_20190101_120000_12587</code> </pre> <br><p>  A vari√°vel <code>${VCL_NAME}</code> √© configurada em outro lugar no script <code>varnishreload</code> para o nome da VCL atualmente ativa, se houver.  Nesse caso, isso seria "reload_20190101_120000_12397". </p><br><p>  √ìtimo, ent√£o <code>${VCL_SHOW}</code> agora cont√©m uma configura√ß√£o completa para o Varnish, f√°cil o suficiente at√© o momento.  Agora finalmente entendi por que a sa√≠da do tra√ßo com o <code>set -x</code> parecia estar t√£o quebrada - inclu√≠a o conte√∫do da configura√ß√£o resultante do verniz. </p><br><p>  O importante aqui √© que a configura√ß√£o completa da VCL geralmente pode ser unida a partir de v√°rios arquivos.  Coment√°rios no estilo C s√£o usados ‚Äã‚Äãpara delinear onde os arquivos de configura√ß√£o foram inclu√≠dos em outros arquivos de configura√ß√£o, que √© exatamente o que √© a pr√≥xima linha do trecho de c√≥digo. </p><br><p>  A sintaxe dos coment√°rios que denotam arquivos tem o seguinte formato </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// VCL.SHOW &lt;NUM&gt; &lt;NUM&gt; &lt;FILENAME&gt;</span></span></code> </pre> <br><p>  Os n√∫meros n√£o s√£o importantes aqui, o que nos interessa √© o nome do arquivo. </p><br><p>  Ent√£o, o que est√° acontecendo no mundo dos comandos que come√ßam na linha 116? <br>  Vamos separ√°-lo. <br>  Existem quatro partes no comando: </p><br><ol><li>  Um <code>echo</code> simples que imprime o valor de <code>${VCL_SHOW}</code> <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_SHOW</span></span></span><span class="hljs-string">"</span></span></code> </pre> </li><li>  <code>awk</code> que procura uma linha (registro) em que o primeiro campo √© '//' e o segundo √© "VCL.SHOW". <br>  O Awk √© instru√≠do a imprimir a primeira linha correspondente a esses padr√µes e parar imediatamente o processamento. <br><pre> <code class="bash hljs">awk <span class="hljs-string"><span class="hljs-string">'$1 == "//" &amp;&amp; $2 == "VCL.SHOW" {print; exit}'</span></span></code> </pre> </li><li>  Um bloco de c√≥digo que l√™ nos campos delimitados por espa√ßo em branco em cinco vari√°veis.  A quinta vari√°vel FILE obt√©m o restante da linha.  Finalmente, um √∫ltimo eco imprime o conte√∫do da vari√°vel <code>${FILE}</code> . <br><pre> <code class="bash hljs">{ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> -r DELIM VCL_SHOW INDEX SIZE FILE; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$FILE</span></span></span><span class="hljs-string">"</span></span> }.</code> </pre> </li><li>  Como as etapas de 1 a 3 s√£o encerradas em um subshell, a sa√≠da de <code>$FILE</code> terminar√° na vari√°vel <code>VCL_FILE</code> . </li></ol><br><p>  Como o coment√°rio na linha 119 sugere, essa maneira de fazer as coisas serve a um √∫nico prop√≥sito: tratar de maneira confi√°vel o caso em que a VCL faria refer√™ncia a nomes de arquivos com espa√ßos. </p><br><p>  Comentei a l√≥gica de processamento original do <code>${VCL_FILE}</code> e tentei ajustar a cadeia de comandos, mas sem um objetivo razo√°vel.  Tudo funcionou no meu shell, mas nunca quando executado como um servi√ßo. </p><br><p>  Parece que o erro n√£o √© de todo replic√°vel quando executado por mim - enquanto isso, os estimados 30 minutos passaram seis vezes e uma nova tarefa de alta prioridade deixou tudo de lado.  O resto da semana foi bastante cheio de tarefas diferentes, as duas exce√ß√µes sendo uma conversa interna que nossa equipe teve sobre o uso de <code>sed</code> e uma entrevista com um candidato promissor.  O problema com o desaparecimento do erro de <code>varnishreload</code> foi completamente perdido nas areias do tempo. </p><br><h3 id="your-so-called-sed-fu-is-really-quite-pathetic">  Seu chamado sed-fu ... √© realmente ... bastante pat√©tico </h3><br><p>  Um dos dias da semana que se seguiu foi bastante gratuito, ent√£o peguei a tarefa novamente.  Eu esperava que talvez algum processo em segundo plano em meu c√©rebro ainda estivesse destruindo o problema e eu finalmente fosse capaz de resolv√™-lo. </p><br><p>  Como dobrar o c√≥digo da √∫ltima vez n√£o ajudou, optei por reescrever a linha 116. De qualquer maneira, o c√≥digo existente era insano.  N√£o h√° absolutamente nenhuma necessidade de usar a <code>read</code> aqui. </p><br><p>  Olhando para o erro novamente: <br>  <code>sh: echo: broken pipe</code> - echo est√° em dois lugares nesse comando, mas suspeito que o primeiro seja um culpado mais prov√°vel (ou c√∫mplice).  Awk tamb√©m n√£o inspira confian√ßa.  Bem, caso seja realmente o <code>awk | {read; echo}</code> <code>awk | {read; echo}</code>  <code>awk | {read; echo}</code> causando todo esse problema, por que n√£o usar outra coisa?  O Awk n√£o est√° realmente acostumado a todas as suas capacidades nessa linha e existe esse excedente de <code>read</code> . </p><br><p>  Como tivemos uma conversa interna sobre <code>sed</code> na outra semana, eu queria experimentar minhas habilidades rec√©m-adquiridas e otimizar o <code>echo | awk | { read; echo }</code> <code>echo | awk | { read; echo }</code>  <code>echo | awk | { read; echo }</code> em um <code>echo | sed</code> mais simples <code>echo | sed</code>  <code>echo | sed</code> .  Embora essa n√£o seja definitivamente a maneira correta de abordar a depura√ß√£o, pensei em pelo menos experimentar meu sed-fu e talvez aprender algo novo sobre o problema no processo.  No processo, pedi ao meu colega - o autor da conversa sed - que me ajudasse a criar um comando sed mais eficiente. </p><br><p>  <code>varnishadm vcl.show -v "$VCL_NAME"</code> o <code>varnishadm vcl.show -v "$VCL_NAME"</code> em um arquivo, para que eu pudesse me concentrar em escrever sed sem todas as dificuldades em recarregar os servi√ßos. </p><br><p>  Um pequeno resumo sobre como exatamente a entrada dos processos sed pode ser encontrada em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seu manual GNU</a> .  Nas fontes sed, o caractere <code>\n</code> √© explicitamente especificado como o separador de linhas. </p><br><p>  Ap√≥s v√°rias itera√ß√µes e contribui√ß√µes do meu colega, criamos uma express√£o sed que produziu exatamente o mesmo resultado que a linha original 116. </p><br><p>  Vamos criar um arquivo de entrada de amostra aqui, </p><br><pre> <code class="bash hljs">&gt; cat vcl-example.vcl Text // VCL.SHOW 0 1578 file with 3 spaces.vcl More text // VCL.SHOW 0 1578 file.vcl Even more text // VCL.SHOW 0 1578 file with TWOspaces.vcl Final text</code> </pre> <br><p>  Pode n√£o ser aparente na descri√ß√£o acima, mas estamos interessados ‚Äã‚Äãapenas no primeiro coment√°rio <code>// VCL.SHOW</code> , e pode haver v√°rios na entrada.  √â exatamente por isso que o awk sai ap√≥s a primeira partida. </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># step 1, capture just the comment lines # using sed capability to specify delimiter character with '\#' instead of the commonly used '/' so there is no need to escape slashes themselves # and the ‚Äúaddress‚Äù capability defined as regex ‚Äú// VCL.SHOW‚Äù to search for lines with specific pattern # -n flag makes sure that the sed does not print all as it does by default (see above link) # -E switches to the extended regex &gt; cat vcl-processor-1.sed \#// VCL.SHOW#p &gt; sed -En -f vcl-processor-1.sed vcl-example.vcl // VCL.SHOW 0 1578 file with 3 spaces.vcl // VCL.SHOW 0 1578 file.vcl // VCL.SHOW 0 1578 file with TWOspaces.vcl # step 2, only print out the file name # using the ‚Äúsubstitute‚Äù command with regex capture groups to print just that group # and this is done only for the matches of the previous search &gt; cat vcl-processor-2.sed \#// VCL.SHOW# { s#.* [0-9]+ [0-9]+ (.*)$#\1# p } &gt; sed -En -f vcl-processor-2.sed vcl-example.vcl file with 3 spaces.vcl file.vcl file with TWOspaces.vcl # step 3, make sure to only get the first result # same as with the awk before, add an immediate exit after the first processed match is printed &gt; cat vcl-processor-3.sed \#// VCL.SHOW# { s#.* [0-9]+ [0-9]+ (.*)$#\1# p q } &gt; sed -En -f vcl-processor-3.sed vcl-example.vcl file with 3 spaces.vcl # step 4, wrap it up into a one-liner using the colon to separate commands &gt; sed -En -e '\#// VCL.SHOW#{s#.* [0-9]+ [0-9]+ (.*)$#\1#p;q;}' vcl-example.vcl file with 3 spaces.vcl</span></span></code> </pre> <br><p>  Portanto, o conte√∫do do script varnishreload ficaria assim: </p><br><pre> <code class="bash hljs">VCL_FILE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo "$VCL_SHOW" | sed -En '\#// VCL.SHOW#{s#.*[0-9]+ [0-9]+ (.*)</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$#</span></span></span><span class="hljs-string">\1#p;q;};')"</span></span></code> </pre> <br><p>  A l√≥gica acima pode ser expressa de forma sucinta por: <br>  se uma linha corresponder ao regex <code>// VCL.SHOW</code> , corresponda avidamente ao texto, incluindo os dois n√∫meros nessa linha, e capture o que vier depois.  Emita a captura e saia. </p><br><p>  Simples, n√£o √©? </p><br><p>  Ficamos felizes com o script sed e com o fato de que o c√≥digo original ele substitui, todas as execu√ß√µes de teste que eu produzi produziram os resultados desejados, por isso modifiquei o <code>varnishreload</code> no servidor e disparei o <code>systemctl reload varnish</code> novamente.  O <code>echo: write error: Broken pipe</code> temido <code>echo: write error: Broken pipe</code> estava sorrindo em nossos rostos.  O cursor piscando aguardava uma nova entrada de comando no vazio escuro do terminal ... </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475698/">https://habr.com/ru/post/pt475698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475678/index.html">Ao ensinarmos fornecedores de conhecimentos inform√°ticos de leite</a></li>
<li><a href="../pt475684/index.html">@Pythonetc compila√ß√£o, outubro 2019</a></li>
<li><a href="../pt475686/index.html">Dicas e truques do meu canal de telegrama @pythonetc, outubro de 2019</a></li>
<li><a href="../pt475688/index.html">Quem √© quem em TI?</a></li>
<li><a href="../pt475694/index.html">Erros de livros e curiosidades do estudo</a></li>
<li><a href="../pt475702/index.html">Registros de relat√≥rios aproximadamente Tech: Data Explica√ß√£o # 3</a></li>
<li><a href="../pt475708/index.html">Intelig√™ncia Artificial - Int√©rprete de Linguagem</a></li>
<li><a href="../pt475720/index.html">8 melhores tend√™ncias da Confer√™ncia Internacional sobre Representa√ß√µes de Aprendizagem (ICLR) 2019</a></li>
<li><a href="../pt475728/index.html">Qual √© o pr√≥ximo membro ...? - Estamos procurando uma f√≥rmula para o en√©simo termo da sequ√™ncia, gerando fun√ß√µes e transforma√ß√£o Z</a></li>
<li><a href="../pt475730/index.html">Como criar planilhas da Web grandes e complexas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>