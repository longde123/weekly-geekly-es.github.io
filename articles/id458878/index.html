<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>❔ 🥋 💇🏿 Apa itu GitOps? 🐀 👩🏿‍🎓 ◼️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Catatan perev. : Setelah publikasi materi tentang metode pull and push baru-baru ini di GitOps, kami melihat minat pada model ini secara keseluruhan, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apa itu GitOps?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/458878/"> <i><b>Catatan</b></i>  <i><b>perev.</b></i>  <i>: Setelah publikasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">materi</a> tentang metode pull and push baru-baru ini di GitOps, kami melihat minat pada model ini secara keseluruhan, namun, ada sangat sedikit publikasi berbahasa Rusia tentang topik ini (mereka tidak ada di hub).</i>  <i>Oleh karena itu, kami dengan senang hati memberikan terjemahan dari artikel lain - meskipun hampir setahun yang lalu!</i>  <i>- dari Weaveworks perusahaan, kepala yang menciptakan istilah "GitOps".</i>  <i>Teks menjelaskan esensi dari pendekatan dan perbedaan utama dari yang ada.</i> <br><br><img src="https://habrastorage.org/webt/i0/8b/fc/i08bfcph3kkhapzkitpwhylzdhc.png"><br><br>  Setahun yang lalu, kami menerbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengantar untuk GitOps</a> .  Kemudian kami berbicara tentang bagaimana tim Weaveworks meluncurkan SaaS yang berbasis di Kubernetes, dan mengembangkan serangkaian praktik terbaik preskriptif untuk penggelaran, pengelolaan, dan pemantauan di lingkungan asli cloud. <a name="habracut"></a><br><br>  Artikel itu ternyata populer.  Orang lain mulai berbicara tentang GitOps, mulai menerbitkan alat baru untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">git push</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengembangan</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rahasia</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fungsi</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">integrasi berkelanjutan</a> , dll.  Sejumlah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">besar</a> publikasi dan kasus penggunaan GitOps telah muncul di situs kami.  Tetapi beberapa orang masih memiliki pertanyaan.  Bagaimana model berbeda dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">infrastruktur</a> tradisional <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebagai kode</a> dan pengiriman berkelanjutan?  Apakah wajib menggunakan Kubernetes? <br><br>  Segera, kami menyadari bahwa diperlukan deskripsi baru, menawarkan: <br><br><ol><li>  Sejumlah besar contoh dan cerita; </li><li>  Definisi spesifik GitOps; </li><li>  Perbandingan dengan pengiriman berkelanjutan tradisional. </li></ol><br>  Pada artikel ini, kami mencoba membahas semua topik ini.  Di dalamnya Anda akan menemukan pengantar yang diperbarui untuk GitOps dan melihatnya dari sisi pengembang dan CI / CD.  Kami terutama berfokus pada Kubernetes, meskipun modelnya dapat digeneralisasi. <br><br><h2>  Temui GitOps </h2><br>  Bayangkan Alice.  Dia menjalankan Asuransi Keluarga, sebuah perusahaan yang menawarkan polis asuransi kesehatan, mobil, real estat, dan perjalanan untuk orang-orang yang terlalu sibuk untuk memahami nuansa kontrak mereka sendiri.  Bisnisnya dimulai sebagai proyek sampingan ketika Alice bekerja di bank sebagai ilmuwan data.  Setelah dia menyadari bahwa dia dapat menggunakan algoritma komputer canggih untuk menganalisis data dan membentuk paket asuransi dengan lebih efisien.  Investor mendanai proyek tersebut, dan sekarang perusahaannya mendatangkan lebih dari $ 20 juta per tahun dan berkembang pesat.  Saat ini, 180 orang bekerja di berbagai posisi di dalamnya.  Di antara mereka, tim teknologi yang mengembangkan, memelihara situs, database, dan menganalisis basis klien.  Sebuah tim yang terdiri dari 60 orang dipimpin oleh Bob, direktur teknis perusahaan. <br><br>  Tim Bob sedang menyebarkan sistem produksi di cloud.  Aplikasi utama mereka berjalan pada GKE, memanfaatkan Kubernetes di Google Cloud.  Selain itu, mereka menggunakan berbagai alat untuk bekerja dengan data dan analitik dalam pekerjaan mereka. <br><br>  Asuransi Keluarga tidak akan menggunakan wadah, tetapi terinfeksi dengan antusiasme untuk Docker.  Segera, para ahli perusahaan menemukan bahwa GKE memudahkan dan mudah untuk menggunakan cluster untuk menguji fitur-fitur baru.  Jenkins untuk CI dan Quay ditambahkan untuk mengatur registrasi kontainer, skrip untuk Jenkins ditulis yang mendorong atau kontainer baru dan konfigurasi di GKE. <br><br>  Beberapa waktu telah berlalu.  Alice dan Bob kecewa dengan kinerja pendekatan yang dipilih dan dampaknya pada bisnis.  Pengenalan kontainer tidak meningkatkan produktivitas sebanyak yang diharapkan tim.  Kadang-kadang penyebaran rusak, dan tidak jelas apakah perubahan kode harus disalahkan.  Ternyata sulit melacak perubahan pada konfigurasi.  Seringkali itu perlu untuk membuat cluster baru dan memindahkan aplikasi ke dalamnya, karena itu adalah cara termudah untuk menghilangkan kekacauan ke mana sistem berubah.  Alice takut situasinya akan memburuk ketika aplikasi dikembangkan (selain itu, sebuah proyek baru berdasarkan pembelajaran mesin sedang dibuat).  Bob mengotomatiskan sebagian besar pekerjaan dan tidak mengerti mengapa pipa masih tidak stabil, tidak skala dengan baik dan memerlukan intervensi manual dari waktu ke waktu? <br><br>  <b>Kemudian mereka belajar tentang GitOps.</b>  <b>Keputusan ini ternyata persis seperti yang mereka butuhkan untuk maju dengan percaya diri.</b> <br><br>  Alice dan Bob telah mendengar tentang alur kerja berdasarkan Git, DevOps, dan infrastruktur sebagai kode selama bertahun-tahun.  Keunikan GitOps adalah bahwa ia membawa sejumlah praktik terbaik - kategoris dan normatif - untuk mengimplementasikan ide-ide ini dalam konteks Kubernetes.  Topik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini telah diangkat berulang kali</a> , termasuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di blog Weaveworks</a> . <br><br>  Asuransi Keluarga memutuskan untuk menerapkan GitOps.  Perusahaan sekarang memiliki model operasi otomatis yang kompatibel dengan Kubernetes yang menggabungkan <i>kecepatan</i> dengan <i>stabilitas</i> , karena mereka: <br><br><ul><li>  menemukan bahwa tim tersebut menggandakan produktivitas dan tidak ada yang menjadi gila; </li><li>  menghentikan skrip servis.  Sebaliknya, mereka sekarang dapat berkonsentrasi pada fitur-fitur baru dan meningkatkan metode teknik - misalnya, memperkenalkan peluncuran kenari dan meningkatkan pengujian; </li><li>  proses penyebaran yang lebih baik - sekarang jarang putus; </li><li>  mendapat kesempatan untuk memulihkan penyebaran setelah kegagalan parsial tanpa intervensi manual; </li><li>  memperoleh kepercayaan yang lebih besar dalam sistem pasokan.  Alice dan Bob menemukan bahwa tim dapat dibagi menjadi kelompok-kelompok yang bekerja dalam layanan mikro dan bekerja secara paralel; </li><li>  dapat membuat 30-50 perubahan pada proyek setiap hari dengan upaya masing-masing kelompok dan mencoba teknik baru; </li><li>  mereka mudah tertarik pada proyek oleh pengembang baru yang memiliki kemampuan untuk meluncurkan pembaruan pada produksi menggunakan permintaan tarik dalam beberapa jam; </li><li>  mudah diaudit dalam SOC2 <i>(untuk kepatuhan penyedia layanan dengan persyaratan untuk manajemen data yang aman; baca lebih lanjut, misalnya, di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> - sekitar terjemahan)</i> . </li></ul><br><h3>  Apa yang terjadi </h3><br>  GitOps adalah dua hal: <br><br><ol><li>  Model operasi untuk Kubernet dan cloud asli.  Ini memberikan seperangkat praktik terbaik untuk mengerahkan, mengelola, dan memantau kelompok dan aplikasi kemas.  Definisi elegan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">satu slide</a> dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Luis Faceira</a> : <br><br><img src="https://habrastorage.org/webt/or/fl/uu/orfluutk_hcqu6dnclf6pu1ewes.jpeg"></li><li>  Jalur untuk menciptakan lingkungan yang berorientasi pengembang untuk mengelola aplikasi.  Kami menerapkan alur kerja Git untuk eksploitasi dan pengembangan.  Harap dicatat bahwa ini bukan hanya tentang Git push, tetapi tentang mengatur seluruh rangkaian alat CI / CD dan UI / UX. </li></ol><br><h3>  Beberapa kata tentang Git </h3><br>  Jika Anda tidak terbiasa dengan sistem kontrol versi dan alur kerja berbasis Git, kami sangat menyarankan agar Anda mempelajarinya.  Pada awalnya, bekerja dengan cabang dan menarik permintaan mungkin tampak seperti ilmu hitam, tetapi para profesional sepadan dengan usaha tersebut.  Berikut ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel yang bagus</a> untuk membantu Anda memulai. <br><br><h2>  Cara Kerja Kubernetes </h2><br>  Dalam cerita kami, Alice dan Bob menoleh ke GitOps setelah bekerja dengan Kubernetes untuk sementara waktu.  Memang, GitOps terkait erat dengan Kubernetes - ini adalah model operasional untuk infrastruktur dan aplikasi berdasarkan Kubernetes. <br><br><h3>  Apa yang diberikan Kubernet kepada pengguna? </h3><br>  Berikut adalah beberapa fitur utama: <br><br><ol><li>  Dalam model Kubernetes, semuanya dapat dijelaskan dalam bentuk deklaratif. </li><li>  Server API Kubernetes menerima deklarasi seperti itu sebagai input, dan kemudian terus-menerus mencoba untuk membawa cluster ke negara yang dijelaskan dalam deklarasi. </li><li>  Deklarasi cukup untuk menggambarkan dan mengelola berbagai macam beban kerja - "aplikasi." </li><li>  Akibatnya, perubahan pada aplikasi dan cluster disebabkan oleh: <br><ul><li>  perubahan pada gambar kontainer; </li><li>  perubahan spesifikasi deklaratif; </li><li>  kesalahan di lingkungan - misalnya, wadah macet. </li></ul></li></ol><br><h3>  Kemampuan konvergensi Kubernet yang hebat </h3><br>  Ketika seorang administrator membuat perubahan konfigurasi, orkestra Kubernetes akan menerapkannya ke kluster sampai keadaannya <i>mendekati konfigurasi baru</i> .  Model ini berfungsi untuk setiap sumber daya Kubernetes dan diperluas dengan Custom Resource Definition (CRDs).  Karenanya, penyebaran Kubernetes memiliki sifat-sifat luar biasa berikut: <br><br><ul><li>  <b>Otomatisasi</b> : Pembaruan Kubernetes menyediakan mekanisme untuk mengotomatiskan proses penerapan perubahan dengan benar dan tepat waktu. </li><li>  <b>Konvergensi</b> : Kubernetes akan terus mencoba pembaruan hingga berhasil. </li><li>  <b>Idempotensi</b> : aplikasi konvergensi yang diulang menghasilkan hasil yang sama. </li><li>  <b>Determinisme</b> : dengan sumber daya yang memadai, keadaan gugus yang diperbarui hanya bergantung pada keadaan yang diinginkan. </li></ul><br><h2>  Cara Kerja GitOps </h2><br>  Kami telah cukup belajar tentang Kubernetes untuk menjelaskan cara kerja GitOps. <br><br>  Mari kita kembali ke tim Asuransi Keluarga yang terkait dengan layanan mikro.  Apa yang biasanya mereka lakukan?  Lihatlah daftar di bawah ini (jika ada poin di dalamnya yang tampak aneh atau asing - silakan tunda kritik dan tetap bersama kami).  Ini hanya contoh alur kerja berbasis Jenkins.  Ada banyak proses lain saat bekerja dengan alat lain. <br><br>  Yang utama adalah kita melihat bahwa setiap pembaruan berakhir dengan perubahan pada file konfigurasi dan repositori Git.  Perubahan pada Git ini menyebabkan "pernyataan GitOps" memperbarui cluster: <br><br>  1. Alur Kerja: " <i>Jenkins Build - master branch</i> ". <br>  Daftar tugas: <br><br><ul><li>  Jenkins mendorong gambar yang ditandai di Quay; </li><li>  Jenkins push'it config dan grafik Helm ke ember penyimpanan utama; </li><li>  Fungsi cloud menyalin konfigurasi dan bagan dari bucket penyimpanan master ke repositori master git; </li><li>  Pernyataan GitOps memperbarui cluster. </li></ul><br>  2. <i>Jenkins build - release atau cabang perbaikan terbaru</i> : <br><br><ul><li>  Jenkins mendorong 'gambar tanpa tanda di Quay; </li><li>  Jenkins mendorong grafik konfigurasi dan Helm ke ember penyimpanan staging; </li><li>  Fungsi cloud menyalin konfigurasi dan grafik dari ember penyimpanan staging ke staging repositori Git; </li><li>  Pernyataan GitOps memperbarui cluster. </li></ul><br>  3. <i>Jenkins build - mengembangkan atau fitur cabang</i> : <br><br><ul><li>  Jenkins mendorong 'gambar tanpa tanda di Quay; </li><li>  Jenkins mendorong grafik konfigurasi dan Helm ke ember penyimpanan yang dikembangkan; </li><li>  Fungsi cloud menyalin konfigurasi dan bagan dari ember penyimpanan yang dikembangkan ke gudang git yang dikembangkan; </li><li>  Pernyataan GitOps memperbarui cluster. </li></ul><br>  4. <i>Menambahkan klien baru</i> : <br><br><ul><li>  Manajer atau administrator (LCM / ops) memanggil Gradle untuk awalnya menyebarkan dan mengkonfigurasi penyeimbang beban jaringan (NLB); </li><li>  LCM / ops melakukan konfigurasi baru untuk menyiapkan penyebaran pembaruan; </li><li>  Pernyataan GitOps memperbarui cluster. </li></ul><br><h3>  Deskripsi Singkat GitOps </h3><br><ol><li>  Jelaskan keadaan yang diinginkan dari seluruh sistem menggunakan spesifikasi deklaratif untuk setiap lingkungan (dalam sejarah kami, tim Bob mendefinisikan seluruh konfigurasi sistem di Git). <br><br><ul><li>  Repositori git adalah satu-satunya sumber kebenaran mengenai keadaan yang diinginkan dari seluruh sistem. </li><li>  Semua perubahan pada status yang diinginkan dilakukan melalui commit di Git. </li><li>  Semua parameter cluster yang diinginkan juga dapat diamati dalam cluster itu sendiri.  Dengan demikian, kita dapat menentukan apakah keadaan yang diinginkan dan diamati bertepatan (konvergen, <i>konvergen</i> ) atau berbeda ( <i>diverge</i> , <i>diverge</i> ). </li></ul></li><li>  Jika keadaan yang diinginkan dan diamati berbeda, maka: <br><br><ul><li>  Ada mekanisme konvergensi yang cepat atau lambat menyinkronkan target dan status yang diamati.  Di dalam cluster, Kubernetes melakukan ini. </li><li>  Proses dimulai segera dengan pemberitahuan "ubah komitmen". </li><li>  Setelah beberapa periode waktu yang dapat dikonfigurasi, peringatan diff dapat dikirim jika statusnya berbeda. </li></ul></li><li>  Dengan demikian, semua komitmen di Git memicu pembaruan yang dapat diverifikasi dan idempoten di kluster. <br><br><ul><li>  Kembalikan adalah konvergensi ke kondisi yang diinginkan sebelumnya. </li></ul></li><li>  Konvergensi adalah final.  Tentang permulaannya bersaksi: <br><br><ul><li>  Kurangnya peringatan "berbeda" untuk jangka waktu tertentu. </li><li>  Peringatan terkonvergensi (misalnya, webhook, acara Git writeback). </li></ul></li></ol><br><h3>  Apa itu divergensi? </h3><br>  Kami ulangi lagi: <i>semua properti yang diinginkan dari cluster harus dapat diamati di dalam cluster itu sendiri</i> . <br><br>  Beberapa contoh perbedaan: <br><br><ul><li>  Ubah file konfigurasi karena menggabungkan cabang di Git. </li><li>  Perubahan pada file konfigurasi karena komit di Git yang dibuat oleh klien GUI. </li><li>  Beberapa perubahan dalam kondisi yang diinginkan karena PR di Git dengan perakitan gambar wadah berikutnya dan perubahan ke konfigurasi. </li><li>  Perubahan status kelompok karena kesalahan, konflik sumber daya yang mengarah ke "perilaku buruk", atau hanya penyimpangan tidak sengaja dari kondisi awal. </li></ul><br><h3>  Apa itu mekanisme konvergensi? </h3><br>  Beberapa contoh: <br><br><ul><li>  Untuk kontainer dan cluster, mekanisme konvergensi menyediakan Kubernetes. </li><li>  Mekanisme yang sama dapat digunakan untuk mengelola aplikasi dan desain berbasis Kubernetes (mis., Istio dan Kubeflow). </li><li>  Mekanisme untuk mengelola interaksi kerja antara Kubernetes, repositori gambar dan Git disediakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">oleh operator Weave Flux GitOps</a> , yang merupakan bagian dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Weave Cloud</a> . </li><li>  Untuk mesin dasar, mekanisme konvergensi harus bersifat deklaratif dan otonom.  Dari pengalaman kami sendiri, kami dapat mengatakan bahwa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Terraform</a> paling dekat dengan definisi ini, tetapi masih membutuhkan kontrol manusia.  Dalam hal ini, GitOps memperluas tradisi Infrastruktur sebagai Kode. </li></ul><br>  GitOps menggabungkan Git dengan mesin konvergensi Kubernet yang sangat baik, menawarkan model untuk operasi. <br><br>  GitOps memungkinkan kita untuk menyatakan bahwa <i>hanya sistem yang dapat dijelaskan dan diamati yang dapat diotomatisasi dan dikendalikan</i> . <br><br><h3>  GitOps adalah untuk seluruh tumpukan cloud asli (mis. Terraform, dll.) </h3><br>  GitOps bukan hanya Kubernetes.  Kami ingin seluruh sistem dikelola secara deklaratif dan menggunakan konvergensi.  Yang kami maksud dengan seluruh sistem adalah seperangkat lingkungan yang bekerja dengan Kubernetes - misalnya, "dev cluster 1", "produksi", dll. Setiap lingkungan mencakup mesin, kluster, aplikasi, serta antarmuka untuk layanan eksternal yang menyediakan data, pemantauan, dan dll. <br><br>  Perhatikan bagaimana Terraform penting dalam kasus ini untuk masalah bootstrap.  Kubernet perlu dikerahkan di suatu tempat, dan menggunakan Terraform berarti kita dapat menggunakan alur kerja GitOps yang sama untuk membuat lapisan kontrol yang mendasari Kubernet dan aplikasi.  Ini adalah praktik terbaik yang baik. <br><br>  Banyak perhatian diberikan untuk menerapkan konsep GitOps ke lapisan di atas Kubernetes.  Saat ini ada solusi tipe GitOps untuk Istio, Helm, Ksonnet, OpenFaaS dan Kubeflow, serta, misalnya, Pulumi, yang membuat lapisan untuk mengembangkan aplikasi untuk cloud asli. <br><br><h2>  Kubernetes CI / CD: membandingkan GitOps dengan pendekatan lain </h2><br>  Seperti yang dinyatakan, GitOps adalah dua hal: <br><br><ol><li>  Model operasional untuk Kubernet dan cloud asli yang dijelaskan di atas. </li><li>  Jalur untuk mengatur lingkungan manajemen aplikasi yang berpusat pada pengembang. </li></ol><br>  Bagi banyak orang, GitOps terutama alur kerja berbasis push Git.  Kami juga menyukainya.  Tapi ini belum semuanya: sekarang mari kita lihat jalur pipa CI / CD. <br><br><h3>  GitOps Menyediakan Penyebaran Berkelanjutan (CD) untuk Kubernetes </h3><br>  GitOps menawarkan mekanisme penyebaran berkelanjutan yang menghilangkan kebutuhan akan "sistem manajemen penempatan" yang terpisah.  Kubernetes melakukan semua pekerjaan untuk Anda. <br><br><ul><li>  Memperbarui aplikasi memerlukan pembaruan di Git.  Ini adalah peningkatan transaksional ke kondisi yang diinginkan.  "Penyebaran" kemudian dilakukan di dalam cluster oleh Kubernetes sendiri berdasarkan deskripsi yang diperbarui. </li><li>  Karena kekhasan Kubernetes, pembaruan ini bersifat konvergen.  Ini memberikan mekanisme untuk penerapan berkelanjutan di mana semua pembaruan bersifat atomik. </li><li>  Catatan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Weave Cloud</a> menawarkan operator GitOps yang mengintegrasikan Git dan Kubernetes dan memungkinkan Anda untuk menjalankan CD dengan mencocokkan kondisi cluster yang diinginkan dan saat ini. </li></ul><br><h3>  Tanpa kubectl dan skrip </h3><br>  Hindari menggunakan Kubectl untuk meningkatkan cluster, dan terutama skrip untuk mengelompokkan perintah kubectl.  Sebagai gantinya, dengan pipa GitOps, pengguna dapat memutakhirkan kluster Kubernetes mereka melalui Git. <br><br>  Manfaat meliputi: <br><br><ol><li>  <b>Kebenaran</b> .  Sekelompok pembaruan dapat diterapkan, konvergen dan akhirnya divalidasi, yang membawa kita lebih dekat ke tujuan penyebaran atom.  Sebaliknya, penggunaan skrip tidak memberikan jaminan konvergensi (lebih lanjut tentang ini di bawah). </li><li>  <b>Keamanan</b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mengutip</a> Kelsey Hightower: "Batasi akses ke kluster Kubernetes ke alat otomatisasi dan administrator yang bertanggung jawab atas debugging atau pemeliharaannya."  Lihat juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">publikasi saya</a> tentang keamanan dan kepatuhan, serta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel tentang meretas Homebrew</a> dengan mencuri kredensial dari skrip Jenkins yang ditulis dengan ceroboh. </li><li>  <b>Pengalaman pengguna</b> .  Kubectl memaparkan mekanisme model objek Kubernetes, yang cukup kompleks.  Idealnya, pengguna harus berinteraksi dengan sistem pada tingkat abstraksi yang lebih tinggi.  Di sini saya akan kembali merujuk ke Kelsey dan merekomendasikan melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">resume seperti itu</a> . </li></ol><br><h3>  Perbedaan antara CI dan CD </h3><br>  GitOps meningkat pada model CI / CD yang ada. <br><br>  Server CI modern adalah instrumen untuk orkestrasi.  Secara khusus, ini adalah instrumen untuk mengatur jaringan pipa CI.  Mereka termasuk membangun, menguji, menggabungkan ke trunk, dll. Server CI mengotomatiskan pengelolaan jaringan pipa multi-langkah yang kompleks.  Godaan yang umum adalah membuat skrip untuk kumpulan pembaruan Kubernetes dan menjalankannya sebagai elemen pipa untuk mendorong perubahan pada cluster.  Memang, inilah yang dilakukan banyak ahli.  Namun, ini tidak optimal, dan inilah alasannya. <br><br>  CI harus digunakan untuk membuat pembaruan ke trunk, dan kluster Kubernetes harus berubah sendiri berdasarkan pembaruan ini untuk mengelola CD “secara internal”.  Kami menyebutnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">model tarik untuk CD</a> , tidak seperti model push CI.  CD adalah bagian dari <i>orkestrasi runtime</i> . <br><br><h3>  Mengapa Server CI Tidak Harus Membuat CD Melalui Pembaruan Langsung di Kubernetes </h3><br>  <i>Jangan gunakan server CI untuk mengatur pembaruan langsung di Kubernetes sebagai serangkaian tugas CI.</i>  <i>Ini adalah anti-pola yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sudah</a> kita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bicarakan</a> di blog kita.</i> <br><br>  Mari kita kembali ke Alice dan Bob. <br><br>  Masalah apa yang mereka hadapi?  Server CI Bob menerapkan perubahan pada cluster, tetapi jika crash selama proses, Bob tidak akan tahu status cluster mana (atau seharusnya) dan bagaimana cara memperbaikinya.  Hal yang sama berlaku jika berhasil. <br><br>  Mari kita asumsikan bahwa tim Bob mengumpulkan gambar baru dan kemudian menambal penyebaran mereka untuk menyebarkan gambar (semua dari pipa CI). <br><br>  Jika gambar dibangun secara normal, tetapi pipa jatuh, tim harus mencari tahu: <br><br><ul><li>  Apakah pembaruan telah digunakan? </li><li>  Apakah kita memulai bangunan baru?        —           ? </li><li>      ,    ? </li><li>     ?     (     )? </li></ul><br> <i>   Git'    ,        .  -    push' ,    -  ;          --.</i> <br><br> ,   CI-    CD: <br><br><ul><li>     ;     . </li><li> CI-      . </li><li>   .       . </li><li>      . </li></ul><br> <i>  Helm'e:     Helm,      GitOps-,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Flux-Helm</a> .    .    Helm    ,  .</i> <br><br><h2> GitOps     Continuous Delivery  Kubernetes </h2><br>      GitOps  ,        ,     .     , ,     . ,         ,  GitOps      . <br><br><h3>    Kubernetes </h3><br>    .   Git            : <br><br><ul><li>   ,       Git      . </li><li>  Runtime GitOps,      .       Git     . </li></ul><br><img src="https://habrastorage.org/webt/0h/mo/vs/0hmovs2jg182thgg_hxll6jabwk.png"><br><br><h3>   ? </h3><br><ol><li> <b> </b> :  ,      ,   Git   .  ,     CI  runtime-.    « » <i>(immutability firewall)</i> ,       .          72-87 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> . </li><li> <b>   CI-  Git-</b> : GitOps    .       CI-  Git-,     .      Continuous Delivery     CI-/Git-   .        cloud native.   GitOps     . </li><li> <b>   </b> :     Git , Weave Flux (  Weave Cloud)    runtime.  ,  Kubernetes   , Git .           GitOps,   . </li></ol><br><img src="https://habrastorage.org/webt/xh/wn/83/xhwn83itzgegzohc4vyp2sprpe8.png"><br><br><h2>  Kesimpulan </h2><br> GitOps    ,     CI/CD: <br><br><ul><li> ; </li><li> ; </li><li> ; </li><li> . </li></ul><br>  ,          cloud native. <br><br><ul><li>           ,    runbook' <i>(     — . .)</i> ,    deployment'. </li><li>   cloud native-         ,        . </li></ul><br>   ,              . GitOps  -      . <br><br><h2>  PS dari penerjemah </h2><br>  Baca juga di blog kami: <br><br><ul><li> « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> werf 1.0 stable:    GitOps,   </a> »; </li><li> « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitOps:   Pull  Push</a> »; </li><li> « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  kubedog     Kubernetes</a> »; </li><li> « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   Kubernetes (   )</a> ». </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458878/">https://habr.com/ru/post/id458878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458866/index.html">Cara kerja tim penyeimbang di World of Tanks Blitz</a></li>
<li><a href="../id458868/index.html">Kebisingan dalam data besar. Analisis Entropi</a></li>
<li><a href="../id458870/index.html">Masalah Komputer Paling Populer Yang Kita Hadapi Setiap Hari</a></li>
<li><a href="../id458874/index.html">Daftar Periksa ASO: Optimasi Teks</a></li>
<li><a href="../id458876/index.html">Mini CTF hari Jumat</a></li>
<li><a href="../id458880/index.html">Pengembangan Linux pada Windows dengan WSL dan Visual Studio Code Remote</a></li>
<li><a href="../id458882/index.html">Berbicara di depan umum. Secara singkat tentang hal utama</a></li>
<li><a href="../id458884/index.html">Sedikit tentang standar komunikasi ruang</a></li>
<li><a href="../id458886/index.html">Desain Mail.ru Yang Paling Berguna, Conf × Dribbble Meetup 2019 Papers oleh True Engineering</a></li>
<li><a href="../id458888/index.html">Pertemuan Droid Musim Panas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>