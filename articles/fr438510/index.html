<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ üßùüèº üòß Composition versus h√©ritage, mod√®le d'√©quipe et d√©veloppement de jeux en g√©n√©ral üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® üëáüèΩ üë©üèª‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avertissement: √Ä mon avis, un article sur l'architecture logicielle ne devrait pas et ne peut pas √™tre id√©al. Toute solution d√©crite peut ne pas couvr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Composition versus h√©ritage, mod√®le d'√©quipe et d√©veloppement de jeux en g√©n√©ral</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438510/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/na/sz/bh/naszbh_usuh0jpozxmoiuqpdl1q.png"></div><br>  Avertissement: <i>√Ä mon avis, un article sur l'architecture logicielle ne devrait pas et ne peut pas √™tre id√©al.</i>  <i>Toute solution d√©crite peut ne pas couvrir le niveau n√©cessaire pour un programmeur, et pour un autre programmeur, cela compliquera trop inutilement l'architecture.</i>  <i>Mais il doit apporter une solution aux t√¢ches qu'il s'est fix√©es.</i>  <i>Et cette exp√©rience, ainsi que tout le bagage de connaissances d'un programmeur qui apprend, organise des informations, affine les nouveaux arrivants et se critique ainsi que les autres - cette exp√©rience se transforme en d'excellents produits logiciels.</i>  <i>L'article bascule entre l'art et la partie technique.</i>  <i>Il s'agit d'une petite exp√©rience et j'esp√®re qu'elle sera int√©ressante.</i> <br><blockquote>  - √âcoutez, j'ai trouv√© une excellente id√©e de jeu!  - le concepteur de jeu Vasya √©tait √©chevel√© et ses yeux √©taient rouges.  J'ai encore bu du caf√© et de l'holivar sur Habr√© pour tuer le temps avant le stand-up.  Il me regarda dans l'expectative jusqu'√† ce que j'aie fini d'√©crire dans les commentaires √† l'homme ce qu'il avait tort.  Vasya savait que tant que la justice ne pr√©vaudrait pas et que la v√©rit√© ne serait pas prot√©g√©e, il √©tait inutile de poursuivre la conversation avec moi.  J'ai ajout√© la derni√®re phrase et je l'ai regard√©. <br><br>  - En un mot - les magiciens avec du mana peuvent lancer des sorts, et les guerriers peuvent se battre au corps √† corps et d√©penser de l'endurance.  Les magiciens et les guerriers peuvent se d√©placer.  Oui, il sera toujours possible de voler les vaches, mais nous le ferons d√©j√† dans la prochaine version, en bref.  Allez-vous montrer le prototype apr√®s le stand-up, d'accord? <br><br>  Il s'est enfui dans son entreprise de conception de jeux et j'ai ouvert l'IDE. </blockquote><a name="habracut"></a><br>  En fait, le sujet ¬´composition versus h√©ritage¬ª, ¬´probl√®me banane-singe¬ª, ¬´probl√®me losange (h√©ritage multiple)¬ª sont des questions courantes lors des entretiens sous diff√©rents formats et pour une bonne raison.  Une mauvaise utilisation de l'h√©ritage peut compliquer l'architecture et les programmeurs inexp√©riment√©s ne savent pas comment y faire face et, par cons√©quent, commencent √† critiquer la POO dans son ensemble et commencent √† √©crire du code proc√©dural.  Par cons√©quent, les programmeurs exp√©riment√©s (ou ceux qui ont lu des choses intelligentes sur Internet) consid√®rent qu'il est de leur devoir de poser des questions √† ce sujet lors d'une interview sous diverses formes.  La r√©ponse universelle est ¬´la composition est meilleure que l'h√©ritage et aucune nuance de gris ne doit √™tre appliqu√©e¬ª.  Ceux qui viennent de lire chacune de ces r√©ponses seront 100% satisfaits. <br><br>  Mais, comme je l'ai dit au d√©but de l'article, chaque architecture conviendra √† votre projet et si l'h√©ritage est suffisant pour votre projet et tout ce qui est n√©cessaire pour r√©soudre le probl√®me est de cr√©er Monkey avec Banana - cr√©ez-le.  Notre programmeur √©tait dans une situation similaire.  Cela n'a aucun sens de refuser l'h√©ritage simplement parce que le FPS se moquera de vous. <br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ x = <span class="hljs-number"><span class="hljs-number">0</span></span>; y = <span class="hljs-number"><span class="hljs-number">0</span></span>; moveTo (x, y) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ mana = <span class="hljs-number"><span class="hljs-number">100</span></span>; castSpell () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mana--; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Warrior</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ stamina = <span class="hljs-number"><span class="hljs-number">100</span></span>; meleeHit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.stamina--; } }</code> </pre> <br><blockquote>  Le stand-up, comme toujours, a tra√Æn√©.  J'ai bascul√© sur une chaise et accroch√© au t√©l√©phone pendant que June Petya tentait de convaincre le testeur que l'impossibilit√© d'un contr√¥le rapide via le bouton droit de la souris n'est pas un bug, car il n'y avait aucune possibilit√© de ce type nulle part, ce qui signifie que vous devez abandonner la t√¢che au d√©partement de pr√©-production.  Le testeur a fait valoir que, puisque pour les utilisateurs, le contr√¥le via le bouton droit semble √™tre obligatoire, alors c'est un bug, pas une fonctionnalit√©.  En fait, en tant que seul joueur de notre √©quipe √† jouer √† notre jeu sur des serveurs de combat, il voulait ajouter cette fonctionnalit√© d√®s que possible, mais il savait que si vous la d√©posiez dans le d√©partement de pr√©-production, la machine bureaucratique la laisserait sortir au plus t√¥t en 4. mois, et apr√®s l'avoir publi√© en tant que bogue - vous pouvez l'obtenir d√©j√† dans la prochaine version.  Le chef de projet, comme toujours, √©tait en retard, et les gars maudissaient si f√©rocement qu'ils √©taient d√©j√† pass√©s √† des tapis et, probablement, les choses seraient bient√¥t arriv√©es √† une bagarre si le directeur du studio n'avait pas rencontr√© la mal√©diction et n'avait pas emmen√© les deux dans son bureau.  Probablement √† nouveau pour 300 dollars d'amende. <br><br>  Quand j'ai quitt√© la salle de rallye, un concepteur de jeu s'est pr√©cipit√© vers moi et a dit avec bonheur que tout le monde aimait le prototype, ils l'ont mis au travail et maintenant c'est notre nouveau projet pour les six prochains mois.  Alors que nous nous dirigions vers ma table, il a dit avec enthousiasme quelles nouvelles fonctionnalit√©s seraient dans notre jeu.  Combien de sorts diff√©rents il a invent√©s et, bien s√ªr, qu'il y aura un paladin qui pourra √† la fois combattre et lancer de la magie.  Et tout le d√©partement des artistes travaille d√©j√† sur de nouvelles animations, et la Chine a d√©j√† sign√© un accord en vertu duquel notre jeu sortira sur leur march√©.  J'ai regard√© en silence le code de mon prototype, r√©fl√©chi profond√©ment, tout mis en √©vidence et supprim√©. </blockquote>  Je crois qu'au fil du temps, chaque programmeur, sur la base de son exp√©rience, commence √† voir des probl√®mes √©vidents qu'il peut rencontrer.  Surtout si vous travaillez longtemps en √©quipe avec un seul game designer.  Nous avons un tas de nouvelles exigences et fonctionnalit√©s.  Et notre ancienne "architecture" ne peut √©videmment pas y faire face. <br><br>  Lorsqu'on vous demande une t√¢che similaire lors d'une entrevue, ils essaieront certainement de vous attraper.  Ils peuvent prendre de nombreuses formes diff√©rentes - les crocodiles, qui peuvent √† la fois nager et courir.  Des chars qui peuvent tirer un canon ou une mitrailleuse et ainsi de suite.  La propri√©t√© la plus importante de ces t√¢ches est que vous avez un objet qui peut faire plusieurs choses diff√©rentes.  Et votre h√©ritage ne peut en aucun cas faire face, car il est impossible d'h√©riter √† la fois de FlyingObject et de SwimmingObject. Et diff√©rents objets peuvent effectuer diff√©rentes actions.  √Ä ce stade, nous abandonnons l'h√©ritage et passons √† la composition: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ abilities = []; addAbility (...abilities) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> abilities) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities.push(a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } getAbility (AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/////////////////////////////////////// // //    ,      //       // /////////////////////////////////////// class Ability {} class HealthAbility extends Ability { health = 100; maxHealth = 100; } class MovementAbility extends Ability { x = 0; y = 0; moveTo(x, y) { this.x = x; this.y = y; } } class SpellCastAbility extends Ability { mana = 100; maxMana = 100; cast () { this.mana--; } } class MeleeFightAbility extends Ability { stamina = 100; maxStamina = 100; constructor (power) { this.power = power; } hit () { this.stamina--; } } /////////////////////////////////////// // //        // /////////////////////////////////////// class CharactersFactory { createMage () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility() ); } createWarrior () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new MeleeFightAbility(3) ); } createPaladin () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility(), new MeleeFightAbility(2) ); } }</span></span></code> </pre><br>  Chaque action possible est maintenant une classe distincte avec son propre √©tat, et si n√©cessaire, nous pouvons cr√©er des personnages uniques en leur jetant le nombre de capacit√©s requis.  Par exemple, il est tr√®s facile de cr√©er un arbre magique immortel: <br><br><pre> <code class="javascript hljs">createMagicTree () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Character().addAbility( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpellCastAbility() ); }</code> </pre> <br>  Nous avons perdu l'h√©ritage et une composition est apparue √† la place.  Maintenant, nous cr√©ons un personnage et listons ses capacit√©s possibles.  Mais cela ne signifie pas que l'h√©ritage est toujours mauvais, mais dans ce cas, il ne convient pas.  La meilleure fa√ßon de comprendre si l'h√©ritage est juste est de r√©pondre vous-m√™me √† la question de savoir quelle relation cela repr√©sente.  Si cette connexion est "is-a", c'est-√†-dire que vous indiquez que MeleeFightAbility est une capacit√©, alors elle est parfaite.  Si la connexion est cr√©√©e uniquement parce que vous souhaitez ajouter une action et affiche "has-a", vous devez penser √† la composition. <br><blockquote>  J'ai aim√© regarder un excellent r√©sultat.  Il fonctionne intelligemment et sans bugs, architecture de r√™ve!  Je suis s√ªr qu'il passera plus d'une √©preuve du temps et pendant longtemps nous n'aurons pas √† le r√©√©crire.  J'√©tais tellement enthousiaste √† propos de mon code que je n'ai m√™me pas remarqu√© comment June Petya m'a approch√©. <br><br>  La rue √©tait d√©j√† sombre, ce qui rendait encore plus visible comment il brillait de bonheur.  Apparemment, il a r√©ussi √† repousser la t√¢che et √† se d√©barrasser de la p√©nalit√© pour les tapis en direction de ses coll√®gues, qui a √©t√© annonc√©e la semaine derni√®re. <br><br>  "Les artistes ont peint des animations simplement divines", a-t-il rapidement bavard√©, "J'ai h√¢te de les faire baiser."  Des avantages volants particuli√®rement magnifiques lorsqu'un sort de soin est appliqu√©.  Ils sont tellement verts et quels avantages! <br><br>  Je me suis maudit, parce que j'avais compl√®tement oubli√© qu'il nous restait √† visser la vue.  Merde, il semble qu'il faille r√©√©crire l'architecture. </blockquote>  Dans de tels articles, seul le mod√®le est g√©n√©ralement d√©crit, car il est abstrait et adulte, et vous pouvez √©galement donner des ¬´images √† montrer¬ª √† June, quelle que soit l'architecture.  N√©anmoins, notre mod√®le devrait fournir un maximum d'informations pour la vue afin qu'elle puisse faire son travail.  Dans GameDev, le motif ¬´Team¬ª est g√©n√©ralement utilis√© pour cela.  En un mot - nous avons un √©tat sans logique, et tout changement devrait se produire dans les √©quipes correspondantes.  Cela peut sembler compliqu√©, mais il offre de nombreux avantages: <br>  - Ils se combinent tr√®s bien quand une √©quipe en appelle une autre <br>  - Chaque commande, une fois ex√©cut√©e, est en fait un √©v√©nement auquel vous pouvez vous abonner <br>  - Nous pouvons facilement les s√©rialiser. <br><br>  Par exemple, une commande damage peut ressembler √† ceci.  C'est alors que le guerrier l'utilisera lorsqu'il sera frapp√© avec une √©p√©e et le magicien lorsqu'il sera frapp√© par un sort de feu.  Maintenant, pour plus de simplicit√©, j'ai impl√©ment√© la validation des commandes via des exceptions, mais elles peuvent ensuite √™tre r√©√©crites sous forme de codes retour. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DealDamageCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> healthAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target.getAbility(HealthAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (healthAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoHealthAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resultHealth = healthAbility.health - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage; healthAbility.health = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max( <span class="hljs-number"><span class="hljs-number">0</span></span>, resultHealth ); } }</code> </pre> <br>  J'aime faire des commandes hi√©rarchiques - lorsqu'une est ex√©cut√©e, elle <s>donne naissance √† de</s> nombreux enfants, que le moteur ex√©cute ensuite.  Alors maintenant que nous avons la possibilit√© d'infliger des d√©g√¢ts, nous pouvons essayer de mettre en ≈ìuvre une frappe de m√™l√©e <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeleeHitCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fightAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(MeleeFightAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fightAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoFightAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren([ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target, fightAbility.power); ]); } }</code> </pre> <br>  Ces deux √©quipes ont tout ce dont vous avez besoin pour nos animations.  Un moteur de rendu peut simplement s'abonner √† des √©v√©nements et afficher tout ce que les artistes d√©sirent avec le code suivant: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onMeleeHit (meleeHitCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.drawMeleeHit( meleeHitCommand.source, meleeHitCommand.target ); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onDealDamage (dealDamageCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.showDamageNumbers( dealDamageCommand.target, dealDamageCommand.damage ); }</code> </pre> <br><blockquote>  J'ai perdu le compte, qui une fois de suite je reste au travail jusqu'√† la tomb√©e de la nuit.  Depuis l'enfance, le d√©veloppement des jeux m'attire, il me semble quelque chose de magique, et m√™me maintenant, alors que je fais √ßa depuis de nombreuses ann√©es, j'en suis inquiet.  Malgr√© le fait que j'ai appris un secret sur la fa√ßon dont ils sont cr√©√©s - je n'ai pas perdu confiance en la magie.  Et cette magie me fait m'asseoir avec une telle inspiration la nuit et √©crire mon code.  Vasya est venu vers moi.  Il ne sait absolument pas comment programmer, mais partage mon attitude envers les jeux. <br><br>  - Ici - le game designer a mis devant moi un Talmud de 200 pages imprim√© sur des feuilles A4.  Bien que le document de conception ait √©t√© r√©alis√© en confluence, nous avons aim√© l'imprimer √† des √©tapes importantes afin de ressentir ce travail dans l'incarnation physique.  Je l'ai ouvert sur une page al√©atoire et j'ai obtenu une liste √©norme d'une vari√©t√© de sorts qu'un mage et un paladin peuvent faire, une description de leurs effets, des besoins en intelligence, du prix du mana et une description approximative pour les artistes comment les afficher.  Travailler pendant plusieurs mois, car aujourd'hui je vais de nouveau rester au travail. </blockquote>  Notre architecture facilite la cr√©ation de combinaisons complexes de sorts.  C'est juste que chaque sort peut renvoyer une liste de commandes qui doivent √™tre ex√©cut√©es pendant le lancement <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CastSpellCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, spell) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell = spell; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> spellAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(SpellCastAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spellAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoSpellCastAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PayManaCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.manaCost)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.getCommands(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target)); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">0</span></span>; getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DamageSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (damageValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue = damageValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HealSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (healValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue = healValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VampireSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value) ]; } }</code> </pre><br><blockquote>  <i>Un an et demi plus tard</i> <br><br>  Le stand-up, comme toujours, a tra√Æn√©.  Je me suis balanc√© sur la chaise et j'ai accroch√© l'ordinateur portable pendant que Middle Petya se disputait avec le testeur au sujet du bug qui avait √©t√© d√©clench√©.  En toute sinc√©rit√©, il a essay√© de convaincre le testeur que le manque de contr√¥le via le bouton droit de la souris dans notre nouveau jeu ne devrait pas √™tre marqu√© comme un bug, car une telle t√¢che n'a jamais √©t√© maintenue et n'a pas √©t√© √©labor√©e par des concepteurs de jeux ou des bouffons.  J'avais un sentiment de d√©j√†-vu, mais un nouveau message dans la discorde m'a distrait: <br><br>  - √âcoutez - le concepteur du jeu a √©crit - J'ai une excellente id√©e ... </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438510/">https://habr.com/ru/post/fr438510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438496/index.html">Python + Raspberry Pi + Pixhawk et quadricopt√®re. Ou comment ne pas faire de robots</a></li>
<li><a href="../fr438498/index.html">Comment se pr√©parer rapidement √† un entretien, qui posera des questions sur les algorithmes et les technologies de traitement de l'information?</a></li>
<li><a href="../fr438500/index.html">Du bon c√¥t√©: comment Optimus Prime a amen√© Kingston et HyperX au CES 2019</a></li>
<li><a href="../fr438506/index.html">Mon deuxi√®me hiver sans neige ni magistrature en Belgique</a></li>
<li><a href="../fr438508/index.html">L'activit√© du cerveau humain a d'abord √©t√© traduite en un discours clair</a></li>
<li><a href="../fr438512/index.html">Compression de donn√©es Huffman</a></li>
<li><a href="../fr438514/index.html">Comment je n'ai pas travaill√© depuis un an chez Sberbank</a></li>
<li><a href="../fr438516/index.html">Quand enregistrer la longueur d'un tableau dans une variable locale en C #</a></li>
<li><a href="../fr438518/index.html">Cr√©ation de votre jsfiddle, partie 2</a></li>
<li><a href="../fr438522/index.html">√âgaliseur strat√©gique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>