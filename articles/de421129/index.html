<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥓 🐱 👨🏻‍🌾 So reduzieren Sie die Codeüberprüfung von zwei Wochen auf mehrere Stunden. Die Erfahrung des Yandex.Market-Teams 🙏🏻 👩‍🎤 🚳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Mensch ist der Hauptwert eines Unternehmens. Der Erfolg des Ganzen hängt davon ab, wie Menschen miteinander kommunizieren, wie sie ihre Ziele geme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So reduzieren Sie die Codeüberprüfung von zwei Wochen auf mehrere Stunden. Die Erfahrung des Yandex.Market-Teams</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/421129/"><p>  Der Mensch ist der Hauptwert eines Unternehmens.  Der Erfolg des Ganzen hängt davon ab, wie Menschen miteinander kommunizieren, wie sie ihre Ziele gemeinsam erreichen und wie sie zusammenarbeiten.  Durch die ständige Verbesserung von Fähigkeiten, Prozessen und Werkzeugen können Sie effizienter arbeiten. </p><br><p>  Wir auf dem Markt arbeiten daran, unseren Benutzern so schnell wie möglich neue Funktionen bereitzustellen.  Dazu untersuchen wir ständig unsere Prozesse und optimieren alle Phasen der Aufgabe.  Heute werden wir Habrs Lesern von der Optimierung eines von ihnen erzählen, nämlich dem Codeüberprüfungsprozess. </p><br><p>  Zuerst müssen Sie sich vorstellen, welche Art von Entwicklungsfluss wir angenommen haben: </p><br><img width="500" src="https://habrastorage.org/webt/rf/6j/9g/rf6j9gzwp6tqlwhuh33ha8kd3ww.png"><a name="habracut"></a><br><p>  Das Gleiche, nur Punkt für Punkt und in Worten: </p><br><ol><li>  Der Entwickler übernimmt die Aufgabe. </li><li>  Macht sie. </li><li>  Füllt Github aus und öffnet PR. </li><li>  Besteht eine Codeüberprüfung. </li><li>  Sammelt einen Demo-Stand und gibt ihn einem Tester. </li><li>  Der Tester überprüft den Demo-Stand. </li><li>  Verifizierte Aufgabe wird in Release gesammelt. </li><li>  Testen in der Version. </li><li>  Layout auf Art.-Nr. </li><li>  Letzte Prüfung im Kampf. </li></ol><br><p>  Nach Verantwortungsbereichen ist die Aufgabe in folgende Schritte unterteilt: </p><br><p>  1-5 - Verantwortung des Entwicklers; <br>  6-7 - Verantwortung beim Tester; <br>  8-10 - Verantwortung beim Release Master. </p><br><p>  Also begannen sie zu analysieren, was uns am meisten Zeit kostet.  Glücklicherweise gibt es interne Analysewerkzeuge.  Jeder hat sich darauf verlassen, was am längsten dauern wird, natürlich der Entwicklungsprozess selbst (der Status ist "In Arbeit") ... und es hat sich so herausgestellt.  Aber ein Moment hat uns am meisten überrascht.  Die durchschnittliche Dauer einer Überprüfung beträgt zwei Wochen! </p><br><h3 id="deystvie-1-razbor-pr">  Schritt 1. PR analysieren </h3><br><p>  Als sie anfingen, Pull-Anfragen zu studieren, sahen sie sich sofort einer sehr interessanten Tatsache gegenüber.  Es stellte sich heraus, dass wir einen riesigen Friedhof mit nicht geschlossenen Pull-Anfragen haben.  Die meisten Autoren dieser PRs arbeiteten nicht mehr für das Unternehmen, aber ihr Erbe war immer noch bei uns.  Wer noch nie Dinosaurier gesehen hat, hier sind sie: </p><br><p><img src="https://habrastorage.org/webt/bf/tb/sn/bftbsnrsjrgehwgcyw4rp4-hxw8.png"></p><br><p>  Diese Pull-Anforderungen fügten Rauschen hinzu und störten die korrekte Analyse der Codeüberprüfungszeit.  Mit einem ruhigen Geist schlossen wir sie.  Es blieb nur die Zeit zu erzählen.  Aber es war immer noch im Bereich von 2-3 Tagen.  Nicht gut. </p><br><h3 id="deystvie-2-razborka-s-revyushnicey">  Schritt 2: Demontage mit einem Browner </h3><br><p> Reviewer ist ein in Yandex entwickeltes System, das zwei zufällige Personen mit Fachkenntnissen in einem veränderlichen Code und unter Berücksichtigung von Urlaub und Abwesenheit in die PR einbezieht.  Die Analyse der wöchentlichen PRs ergab eine Gruppe von Personen, die die Codeüberprüfung ständig herausziehen.  Nachdem wir Kollegen interviewt hatten, fanden wir ein weiteres Problem in unserem Prozess.  Die Kollegen beschwerten sich, dass sie von den Eifersüchtigen zu viele Pull-Anfragen pro Tag erhalten hätten und einfach nicht genug Zeit für ihre Hauptarbeit hätten. </p><br><p>  Dies stimmte nicht mit unseren Indikatoren überein: ein oder zwei PR pro Tag und Person.  Die Studie führte zu Github, wo wir ein separates Team von Gutachtern haben.  Dieses Team wurde seit mehreren Jahren nicht mehr aktualisiert.  Seitdem hat sich die Anzahl der Mitarbeiter verdoppelt, aber keiner der Neuankömmlinge wurde in das Reviewerteam aufgenommen.  Mit anderen Worten, die Hälfte des Teams hat überhaupt nicht an der Codeüberprüfung teilgenommen!  Dieses nervige Missverständnis wurde korrigiert. </p><br><h3 id="deystvie-3-rasshirenie-instrumentov">  Schritt 3. Tools erweitern </h3><br><p>  Zu diesem Zeitpunkt haben wir versucht, das ohnehin schon einfache Leben der Rezensenten zu vereinfachen.  Die folgenden Tools befanden sich im Arsenal des Frontends: </p><br><ul><li>  Code Style Checker; </li><li>  Testlauf; </li><li>  verschiedene nerdige Checks in PR selbst; </li><li>  Revisionist; </li><li>  Warnungen auf Mail und Task-Tracker. </li></ul><br><p>  Es scheint, dass alles da ist.  Nehmen Sie und überprüfen Sie! </p><br><p>  Das erste, was sich als falsch herausstellte: ein anderer Codeüberprüfungsprozess in verschiedenen Repositorys.  Wir haben das Anbringen von Etiketten für die bequeme Suche nach PRs über die Github-Oberfläche vereinheitlicht und gleichzeitig bewiesen. </p><br><p>  Das zweite, was ihnen aufgefallen ist: Mail ist nicht das beste Tool, um schnell über den Status von Codeüberprüfungen zu berichten.  Viele, um nicht von der Arbeit abgelenkt zu werden, analysieren seine Post mehrmals am Tag.  Boten sind eine ganz andere Sache.  Die Reaktion auf Nachrichten in Messenger ist viel höher.  Und es wurde beschlossen, den Bot mit unserem Messenger zu verbinden.  Der Bot sendet Warnungen über den Status einer Codeüberprüfung sowohl für den Autor der Pull-Anforderung als auch für die Überprüfung.  Sehr bequem. </p><br><h3 id="deystvie-4-pervyy-sla">  Schritt 4. Erste SLA </h3><br><p>  Parallel zu den Aktionen 2 und 3 haben wir begonnen, eng mit den Mitarbeitern zusammenzuarbeiten und zu erklären, dass die Codeüberprüfung untrennbar mit der eigentlichen Aufgabe verbunden ist.  Sie erklärten, dass es in der Verantwortung des Entwicklers liege, "Verifiziert" zu bringen.  Darüber hinaus liegt die Verantwortung nicht nur gegenüber Kollegen, sondern auch gegenüber Benutzern!  Schnelle Lieferung von Funktionen an den Vertrieb - das wollte ich erreichen.  Und das Team war mit dem Verbesserungsprozess einverstanden. </p><br><p>  Zu diesem Zeitpunkt wurde die erste Idee der idealen Codeüberprüfung geboren.  Natürlich möchte jeder, dass es in 5 Minuten stattfindet, aber das ist nicht immer möglich.  Unter Berücksichtigung der Tatsache, dass wir ein multiregionales Team haben (mit einem Zeitunterschied von vier Stunden), haben wir vereinbart, dass unsere SLA einen Tag beträgt, d. H.  24 Stunden  Diese SLA wurde allen Mitarbeitern angekündigt und begann, sich die Hände zu reiben, auf die Ergebnisse zu warten. </p><br><p>  Die Situation hat sich jedoch nicht geändert.  In den besten Wochen passt die Hälfte der Pull-Anfragen in einen Tag.  Der Rest stieg für ihn aus. </p><br><p><img src="https://habrastorage.org/webt/q_/x4/uf/q_x4ufuooovrwiesgfm1ckkz4jy.jpeg"></p><br><p>  Wir hatten ein kleines Skript, das die Überprüfung des Zeitcodes auf PR auswertete.  Wir begannen, sie täglich für alle PRs verantwortlich zu machen, die auf der Suche nach "Rückstand" waren.  Fast jeden Tag gab es eine Packung davon. </p><br><img src="https://habrastorage.org/webt/nz/de/ar/nzdearlygv--kzedy4kv4ytzhzc.png"><br><p>  Es dauerte lange, sie zu analysieren.  Meistens berechnete das Skript selbst den Zeitpunkt der Überprüfung unredlich.  Er hat nicht berücksichtigt, dass einige PRs außerhalb der Arbeitszeit erstellt wurden (ja, einige mutige Fachkräfte arbeiten gerne ein oder zwei Stunden nachts, kommen zu uns, um zu arbeiten!).  All dies hat uns gezeigt, dass unsere Tools zur Überwachung von Pull-Anforderungen nicht die effektivsten sind, da sie unehrlich sind.  Ich muss neue Werkzeuge finden. </p><br><h3 id="deystvie-5-treker-sla">  Schritt 5. SLA Tracker </h3><br><p>  Hilfe kam von dort, wo sie nicht gewartet hatten.  Unsere Kollegen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tracker</a> haben eine erstaunliche Sache angekündigt: Jetzt können Sie SLA im Tracker selbst installieren.  Darüber hinaus können Sie es ganz anders konfigurieren.  Ein bestimmter Timer wird durch ein Ereignis in der Aufgabe aktiviert.  Für einige Ereignisse kann es pausieren.  Und bei einer Veranstaltung anhalten.  Ja, das brauchen wir! </p><br><p>  Sie haben sich sofort mit der Dokumentation befasst (übrigens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ) und unsere Warteschlangen eingerichtet (es gibt mehrere davon, da es mehrere Repositories gibt).  Wir stellen den Timer so ein, dass er sich einschaltet, wenn er in den Status "Codeüberprüfung erforderlich" wechselt, und endet, wenn er in einen anderen Status wechselt, mit Ausnahme von "Es gibt Kommentare" - wenn er läuft, pausiert der Timer, d. H.  hat seine Zeit nicht verloren. </p><br><p><img src="https://habrastorage.org/webt/vz/wc/d4/vzwcd4k70ztjkev4awa_brvlcrs.png"></p><br><p>  Es war auch cool, dass der Timer Arbeitszeiten und einen Kalender berücksichtigte!  Wir setzen, dass 9h der Codeüberprüfung zugewiesen ist, d. H.  ein Werktag.  In diesem Fall wird 2 Stunden nach dem Start oder wenn eine Frist von neun Stunden unterbrochen wird, eine Warnung ausgelöst.  Das Ergebnis war eine Art ehrliche Überwachung.  Zuerst haben wir den Timer für das Experiment eingeschaltet, eine Packung Fehler gesammelt und in den Tracker exportiert. </p><br><p>  Es ist anzumerken, dass der Timer nur für Aufgaben aktiviert wurde, die nach der Implementierung des Timers selbst erstellt wurden.  Daher konnte der sofortige Effekt nicht gesehen werden.  Aber schon zu diesem Zeitpunkt begann eine positive Dynamik.  Wir hatten den Effekt einen Monat später, als der Fluss neuer Tickets mit einem Timer begann, die alten zu verdrängen.  Es war bemerkenswert, dass sich die ungefähre Zeit der Codeüberprüfung auf den Bereich der Erinnerungsnachrichten konzentrierte, d.h.  markiert 2h und 9h. </p><br><p>  Zum Zeitpunkt dieses Schreibens haben wir 415 Aufgaben, bei denen der Timer gestartet wurde.  Davon gingen 29 über die Neun-Stunden-Grenze hinaus.  Wenn Sie genauer hinschauen, werden Sie jedoch auch auf solche Aufgaben stoßen, deren Codeüberprüfung innerhalb der nächsten Stunde abgeschlossen wurde.  Wenn wir sie auch verwerfen, bleiben 17 Aufgaben übrig.  Und das sind ungefähr 4,1%! </p><br><p><img src="https://habrastorage.org/webt/qd/yc/5x/qdyc5xl1wddalhhxh0okmu6793e.png"></p><br><h3 id="itog-samuray-postoyanno-tochit-svoy-mech">  Das Ergebnis.  Samurai schärft ständig sein Schwert </h3><br><p>  Wenn wir zurückblicken und uns an alle unsere Handlungen erinnern, kann eine Schlussfolgerung gezogen werden - alle Mittel sind gut.  Alle unsere Schritte führten zum gewünschten Ergebnis: Mehr als <strong>92% der Pull-Anfragen erfüllten unsere SLA</strong> !  Immer weniger zerrissene Aufgaben, die Codeüberprüfung ist schneller.  Langsam, nach und <strong>nach, passten 75% der Codeüberprüfung in 5 Stunden</strong> !  Und die Dynamik für Verbesserungen ist immer noch positiv.  Zusätzlich zu den numerischen Indikatoren erhielten wir zunehmend positive Rückmeldungen von Subunternehmern.  Noch zufriedener mit der Tatsache, dass das Team auf diesen gesamten Prozess reagiert hat.  Sogar ein Prozess wie die Beschleunigung der Codeüberprüfung brachte das Team noch mehr auf Trab.  Jeder Teilnehmer begann zu verstehen, welche Verantwortung er vor anderen trägt, da ein schneller Überprüfungscode es uns ermöglicht, unseren Benutzern noch schneller Vorteile zu bieten. </p><br><p>  Natürlich ist 9h nicht der ultimative Traum, aber immer noch Erfolg.  Aber wir wollen nicht damit aufhören.  Wir überwachen weiterhin den Codeüberprüfungsprozess und lösen alle technischen und sogar psychologischen Probleme, mit denen Mitarbeiter konfrontiert sind, damit unser Prozess so produktiv wie möglich und gleichzeitig für das Team angenehm ist. </p><br><h3 id="qa-a-chto-esli">  Fragen und Antworten.  Was ist, wenn ...? </h3><br><p>  <strong>F</strong> : <em>Was ist, wenn ich denke, dass sie mich beobachten?</em>  <em>Wofür ist dieser Timer?</em> <br>  <strong>A</strong> : Wir überwachen nicht speziell für jemanden, sondern für den Prozess.  Die Pull-Anfrage hat zwei Seiten: den Autor und die Rezensenten.  Wenn die Prüfer den Scheck herausziehen, leidet der Autor.  Andererseits ist es auch unmenschlich, Inspektoren sofort von der Arbeit zu reißen.  Es ist notwendig, ein Gleichgewicht zu finden, damit beide Seiten bequem sind.  Der Timer wird nicht benötigt, um jemanden zu bestrafen, sondern um alle Abweichungen aufzuzeichnen.  Die meisten dieser Abweichungen sind nicht auf das Verschulden der Prüfer zurückzuführen, sondern auf das Verschulden technischer Probleme.  Die Herausforderung besteht darin, diese Probleme zu beheben.  Damit andere ihnen nicht begegnen.  Kontinuierliche Selbstverbesserung </p><br><p>  <strong>F</strong> : <em>Und was ist, wenn es komplexe PR, mehr als 100500 Codezeilen und "Change the Letter" gibt?</em>  <em>Wo ist die Gerechtigkeit?</em> <br>  <strong>A</strong> : Ja, das ist wahr.  Als wir an der Standard-Codeüberprüfung arbeiteten, haben wir sie nur entlang der oberen Grenze genommen, d. H.  Die Codeüberprüfung komplexer PR sollte in das SLA passen.  Gleichzeitig haben wir aber nicht das Ziel, alle an diese Grenzen zu bringen.  Wir sind immer sympathisch, Anfragen zu stellen, in denen es trotz der gebrochenen Messlatte an einem Tag eine lebhafte, nützliche Diskussion gibt. </p><br><p>  Wir haben Pläne für SLA-Noten für Storypoints.  Zum Beispiel 1SP - 1h, 3SP - 5h, 5SP - 2d.  Glücklicherweise ist der Tracker dazu bereits in der Lage.  Wir sind einfach noch nicht bereit dafür - wir haben noch einen langen Weg vor uns. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de421129/">https://habr.com/ru/post/de421129/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de421119/index.html">SmartTV-Entwicklung für Unterwasserschwader</a></li>
<li><a href="../de421121/index.html">Video-Streaming über einen Browser mit extrem geringer Latenz (und WebRTC!)</a></li>
<li><a href="../de421123/index.html">Zusammenfassung der IT-Veranstaltungen für September</a></li>
<li><a href="../de421125/index.html">Wir segmentieren täglich 600 Millionen Benutzer in Echtzeit</a></li>
<li><a href="../de421127/index.html">Skillbox Friday Webinare: Design & Entwickler</a></li>
<li><a href="../de421131/index.html">Kritische Sicherheitsanfälligkeit von 1Cloud-Servern</a></li>
<li><a href="../de421133/index.html">LINKa. Papiertastatur. Extra große Knöpfe</a></li>
<li><a href="../de421135/index.html">Au / Ni / MgO: Wärmeübertragung im Nanomaßstab</a></li>
<li><a href="../de421137/index.html">So funktioniert Headless Chrome</a></li>
<li><a href="../de421139/index.html">Frontend Conf - kümmert sich um den Benutzer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>