<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ì üê± üë®üèª‚Äçüåæ So reduzieren Sie die Code√ºberpr√ºfung von zwei Wochen auf mehrere Stunden. Die Erfahrung des Yandex.Market-Teams üôèüèª üë©‚Äçüé§ üö≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Mensch ist der Hauptwert eines Unternehmens. Der Erfolg des Ganzen h√§ngt davon ab, wie Menschen miteinander kommunizieren, wie sie ihre Ziele geme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So reduzieren Sie die Code√ºberpr√ºfung von zwei Wochen auf mehrere Stunden. Die Erfahrung des Yandex.Market-Teams</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/421129/"><p>  Der Mensch ist der Hauptwert eines Unternehmens.  Der Erfolg des Ganzen h√§ngt davon ab, wie Menschen miteinander kommunizieren, wie sie ihre Ziele gemeinsam erreichen und wie sie zusammenarbeiten.  Durch die st√§ndige Verbesserung von F√§higkeiten, Prozessen und Werkzeugen k√∂nnen Sie effizienter arbeiten. </p><br><p>  Wir auf dem Markt arbeiten daran, unseren Benutzern so schnell wie m√∂glich neue Funktionen bereitzustellen.  Dazu untersuchen wir st√§ndig unsere Prozesse und optimieren alle Phasen der Aufgabe.  Heute werden wir Habrs Lesern von der Optimierung eines von ihnen erz√§hlen, n√§mlich dem Code√ºberpr√ºfungsprozess. </p><br><p>  Zuerst m√ºssen Sie sich vorstellen, welche Art von Entwicklungsfluss wir angenommen haben: </p><br><img width="500" src="https://habrastorage.org/webt/rf/6j/9g/rf6j9gzwp6tqlwhuh33ha8kd3ww.png"><a name="habracut"></a><br><p>  Das Gleiche, nur Punkt f√ºr Punkt und in Worten: </p><br><ol><li>  Der Entwickler √ºbernimmt die Aufgabe. </li><li>  Macht sie. </li><li>  F√ºllt Github aus und √∂ffnet PR. </li><li>  Besteht eine Code√ºberpr√ºfung. </li><li>  Sammelt einen Demo-Stand und gibt ihn einem Tester. </li><li>  Der Tester √ºberpr√ºft den Demo-Stand. </li><li>  Verifizierte Aufgabe wird in Release gesammelt. </li><li>  Testen in der Version. </li><li>  Layout auf Art.-Nr. </li><li>  Letzte Pr√ºfung im Kampf. </li></ol><br><p>  Nach Verantwortungsbereichen ist die Aufgabe in folgende Schritte unterteilt: </p><br><p>  1-5 - Verantwortung des Entwicklers; <br>  6-7 - Verantwortung beim Tester; <br>  8-10 - Verantwortung beim Release Master. </p><br><p>  Also begannen sie zu analysieren, was uns am meisten Zeit kostet.  Gl√ºcklicherweise gibt es interne Analysewerkzeuge.  Jeder hat sich darauf verlassen, was am l√§ngsten dauern wird, nat√ºrlich der Entwicklungsprozess selbst (der Status ist "In Arbeit") ... und es hat sich so herausgestellt.  Aber ein Moment hat uns am meisten √ºberrascht.  Die durchschnittliche Dauer einer √úberpr√ºfung betr√§gt zwei Wochen! </p><br><h3 id="deystvie-1-razbor-pr">  Schritt 1. PR analysieren </h3><br><p>  Als sie anfingen, Pull-Anfragen zu studieren, sahen sie sich sofort einer sehr interessanten Tatsache gegen√ºber.  Es stellte sich heraus, dass wir einen riesigen Friedhof mit nicht geschlossenen Pull-Anfragen haben.  Die meisten Autoren dieser PRs arbeiteten nicht mehr f√ºr das Unternehmen, aber ihr Erbe war immer noch bei uns.  Wer noch nie Dinosaurier gesehen hat, hier sind sie: </p><br><p><img src="https://habrastorage.org/webt/bf/tb/sn/bftbsnrsjrgehwgcyw4rp4-hxw8.png"></p><br><p>  Diese Pull-Anforderungen f√ºgten Rauschen hinzu und st√∂rten die korrekte Analyse der Code√ºberpr√ºfungszeit.  Mit einem ruhigen Geist schlossen wir sie.  Es blieb nur die Zeit zu erz√§hlen.  Aber es war immer noch im Bereich von 2-3 Tagen.  Nicht gut. </p><br><h3 id="deystvie-2-razborka-s-revyushnicey">  Schritt 2: Demontage mit einem Browner </h3><br><p> Reviewer ist ein in Yandex entwickeltes System, das zwei zuf√§llige Personen mit Fachkenntnissen in einem ver√§nderlichen Code und unter Ber√ºcksichtigung von Urlaub und Abwesenheit in die PR einbezieht.  Die Analyse der w√∂chentlichen PRs ergab eine Gruppe von Personen, die die Code√ºberpr√ºfung st√§ndig herausziehen.  Nachdem wir Kollegen interviewt hatten, fanden wir ein weiteres Problem in unserem Prozess.  Die Kollegen beschwerten sich, dass sie von den Eifers√ºchtigen zu viele Pull-Anfragen pro Tag erhalten h√§tten und einfach nicht genug Zeit f√ºr ihre Hauptarbeit h√§tten. </p><br><p>  Dies stimmte nicht mit unseren Indikatoren √ºberein: ein oder zwei PR pro Tag und Person.  Die Studie f√ºhrte zu Github, wo wir ein separates Team von Gutachtern haben.  Dieses Team wurde seit mehreren Jahren nicht mehr aktualisiert.  Seitdem hat sich die Anzahl der Mitarbeiter verdoppelt, aber keiner der Neuank√∂mmlinge wurde in das Reviewerteam aufgenommen.  Mit anderen Worten, die H√§lfte des Teams hat √ºberhaupt nicht an der Code√ºberpr√ºfung teilgenommen!  Dieses nervige Missverst√§ndnis wurde korrigiert. </p><br><h3 id="deystvie-3-rasshirenie-instrumentov">  Schritt 3. Tools erweitern </h3><br><p>  Zu diesem Zeitpunkt haben wir versucht, das ohnehin schon einfache Leben der Rezensenten zu vereinfachen.  Die folgenden Tools befanden sich im Arsenal des Frontends: </p><br><ul><li>  Code Style Checker; </li><li>  Testlauf; </li><li>  verschiedene nerdige Checks in PR selbst; </li><li>  Revisionist; </li><li>  Warnungen auf Mail und Task-Tracker. </li></ul><br><p>  Es scheint, dass alles da ist.  Nehmen Sie und √ºberpr√ºfen Sie! </p><br><p>  Das erste, was sich als falsch herausstellte: ein anderer Code√ºberpr√ºfungsprozess in verschiedenen Repositorys.  Wir haben das Anbringen von Etiketten f√ºr die bequeme Suche nach PRs √ºber die Github-Oberfl√§che vereinheitlicht und gleichzeitig bewiesen. </p><br><p>  Das zweite, was ihnen aufgefallen ist: Mail ist nicht das beste Tool, um schnell √ºber den Status von Code√ºberpr√ºfungen zu berichten.  Viele, um nicht von der Arbeit abgelenkt zu werden, analysieren seine Post mehrmals am Tag.  Boten sind eine ganz andere Sache.  Die Reaktion auf Nachrichten in Messenger ist viel h√∂her.  Und es wurde beschlossen, den Bot mit unserem Messenger zu verbinden.  Der Bot sendet Warnungen √ºber den Status einer Code√ºberpr√ºfung sowohl f√ºr den Autor der Pull-Anforderung als auch f√ºr die √úberpr√ºfung.  Sehr bequem. </p><br><h3 id="deystvie-4-pervyy-sla">  Schritt 4. Erste SLA </h3><br><p>  Parallel zu den Aktionen 2 und 3 haben wir begonnen, eng mit den Mitarbeitern zusammenzuarbeiten und zu erkl√§ren, dass die Code√ºberpr√ºfung untrennbar mit der eigentlichen Aufgabe verbunden ist.  Sie erkl√§rten, dass es in der Verantwortung des Entwicklers liege, "Verifiziert" zu bringen.  Dar√ºber hinaus liegt die Verantwortung nicht nur gegen√ºber Kollegen, sondern auch gegen√ºber Benutzern!  Schnelle Lieferung von Funktionen an den Vertrieb - das wollte ich erreichen.  Und das Team war mit dem Verbesserungsprozess einverstanden. </p><br><p>  Zu diesem Zeitpunkt wurde die erste Idee der idealen Code√ºberpr√ºfung geboren.  Nat√ºrlich m√∂chte jeder, dass es in 5 Minuten stattfindet, aber das ist nicht immer m√∂glich.  Unter Ber√ºcksichtigung der Tatsache, dass wir ein multiregionales Team haben (mit einem Zeitunterschied von vier Stunden), haben wir vereinbart, dass unsere SLA einen Tag betr√§gt, d. H.  24 Stunden  Diese SLA wurde allen Mitarbeitern angek√ºndigt und begann, sich die H√§nde zu reiben, auf die Ergebnisse zu warten. </p><br><p>  Die Situation hat sich jedoch nicht ge√§ndert.  In den besten Wochen passt die H√§lfte der Pull-Anfragen in einen Tag.  Der Rest stieg f√ºr ihn aus. </p><br><p><img src="https://habrastorage.org/webt/q_/x4/uf/q_x4ufuooovrwiesgfm1ckkz4jy.jpeg"></p><br><p>  Wir hatten ein kleines Skript, das die √úberpr√ºfung des Zeitcodes auf PR auswertete.  Wir begannen, sie t√§glich f√ºr alle PRs verantwortlich zu machen, die auf der Suche nach "R√ºckstand" waren.  Fast jeden Tag gab es eine Packung davon. </p><br><img src="https://habrastorage.org/webt/nz/de/ar/nzdearlygv--kzedy4kv4ytzhzc.png"><br><p>  Es dauerte lange, sie zu analysieren.  Meistens berechnete das Skript selbst den Zeitpunkt der √úberpr√ºfung unredlich.  Er hat nicht ber√ºcksichtigt, dass einige PRs au√üerhalb der Arbeitszeit erstellt wurden (ja, einige mutige Fachkr√§fte arbeiten gerne ein oder zwei Stunden nachts, kommen zu uns, um zu arbeiten!).  All dies hat uns gezeigt, dass unsere Tools zur √úberwachung von Pull-Anforderungen nicht die effektivsten sind, da sie unehrlich sind.  Ich muss neue Werkzeuge finden. </p><br><h3 id="deystvie-5-treker-sla">  Schritt 5. SLA Tracker </h3><br><p>  Hilfe kam von dort, wo sie nicht gewartet hatten.  Unsere Kollegen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tracker</a> haben eine erstaunliche Sache angek√ºndigt: Jetzt k√∂nnen Sie SLA im Tracker selbst installieren.  Dar√ºber hinaus k√∂nnen Sie es ganz anders konfigurieren.  Ein bestimmter Timer wird durch ein Ereignis in der Aufgabe aktiviert.  F√ºr einige Ereignisse kann es pausieren.  Und bei einer Veranstaltung anhalten.  Ja, das brauchen wir! </p><br><p>  Sie haben sich sofort mit der Dokumentation befasst (√ºbrigens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ) und unsere Warteschlangen eingerichtet (es gibt mehrere davon, da es mehrere Repositories gibt).  Wir stellen den Timer so ein, dass er sich einschaltet, wenn er in den Status "Code√ºberpr√ºfung erforderlich" wechselt, und endet, wenn er in einen anderen Status wechselt, mit Ausnahme von "Es gibt Kommentare" - wenn er l√§uft, pausiert der Timer, d. H.  hat seine Zeit nicht verloren. </p><br><p><img src="https://habrastorage.org/webt/vz/wc/d4/vzwcd4k70ztjkev4awa_brvlcrs.png"></p><br><p>  Es war auch cool, dass der Timer Arbeitszeiten und einen Kalender ber√ºcksichtigte!  Wir setzen, dass 9h der Code√ºberpr√ºfung zugewiesen ist, d. H.  ein Werktag.  In diesem Fall wird 2 Stunden nach dem Start oder wenn eine Frist von neun Stunden unterbrochen wird, eine Warnung ausgel√∂st.  Das Ergebnis war eine Art ehrliche √úberwachung.  Zuerst haben wir den Timer f√ºr das Experiment eingeschaltet, eine Packung Fehler gesammelt und in den Tracker exportiert. </p><br><p>  Es ist anzumerken, dass der Timer nur f√ºr Aufgaben aktiviert wurde, die nach der Implementierung des Timers selbst erstellt wurden.  Daher konnte der sofortige Effekt nicht gesehen werden.  Aber schon zu diesem Zeitpunkt begann eine positive Dynamik.  Wir hatten den Effekt einen Monat sp√§ter, als der Fluss neuer Tickets mit einem Timer begann, die alten zu verdr√§ngen.  Es war bemerkenswert, dass sich die ungef√§hre Zeit der Code√ºberpr√ºfung auf den Bereich der Erinnerungsnachrichten konzentrierte, d.h.  markiert 2h und 9h. </p><br><p>  Zum Zeitpunkt dieses Schreibens haben wir 415 Aufgaben, bei denen der Timer gestartet wurde.  Davon gingen 29 √ºber die Neun-Stunden-Grenze hinaus.  Wenn Sie genauer hinschauen, werden Sie jedoch auch auf solche Aufgaben sto√üen, deren Code√ºberpr√ºfung innerhalb der n√§chsten Stunde abgeschlossen wurde.  Wenn wir sie auch verwerfen, bleiben 17 Aufgaben √ºbrig.  Und das sind ungef√§hr 4,1%! </p><br><p><img src="https://habrastorage.org/webt/qd/yc/5x/qdyc5xl1wddalhhxh0okmu6793e.png"></p><br><h3 id="itog-samuray-postoyanno-tochit-svoy-mech">  Das Ergebnis.  Samurai sch√§rft st√§ndig sein Schwert </h3><br><p>  Wenn wir zur√ºckblicken und uns an alle unsere Handlungen erinnern, kann eine Schlussfolgerung gezogen werden - alle Mittel sind gut.  Alle unsere Schritte f√ºhrten zum gew√ºnschten Ergebnis: Mehr als <strong>92% der Pull-Anfragen erf√ºllten unsere SLA</strong> !  Immer weniger zerrissene Aufgaben, die Code√ºberpr√ºfung ist schneller.  Langsam, nach und <strong>nach, passten 75% der Code√ºberpr√ºfung in 5 Stunden</strong> !  Und die Dynamik f√ºr Verbesserungen ist immer noch positiv.  Zus√§tzlich zu den numerischen Indikatoren erhielten wir zunehmend positive R√ºckmeldungen von Subunternehmern.  Noch zufriedener mit der Tatsache, dass das Team auf diesen gesamten Prozess reagiert hat.  Sogar ein Prozess wie die Beschleunigung der Code√ºberpr√ºfung brachte das Team noch mehr auf Trab.  Jeder Teilnehmer begann zu verstehen, welche Verantwortung er vor anderen tr√§gt, da ein schneller √úberpr√ºfungscode es uns erm√∂glicht, unseren Benutzern noch schneller Vorteile zu bieten. </p><br><p>  Nat√ºrlich ist 9h nicht der ultimative Traum, aber immer noch Erfolg.  Aber wir wollen nicht damit aufh√∂ren.  Wir √ºberwachen weiterhin den Code√ºberpr√ºfungsprozess und l√∂sen alle technischen und sogar psychologischen Probleme, mit denen Mitarbeiter konfrontiert sind, damit unser Prozess so produktiv wie m√∂glich und gleichzeitig f√ºr das Team angenehm ist. </p><br><h3 id="qa-a-chto-esli">  Fragen und Antworten.  Was ist, wenn ...? </h3><br><p>  <strong>F</strong> : <em>Was ist, wenn ich denke, dass sie mich beobachten?</em>  <em>Wof√ºr ist dieser Timer?</em> <br>  <strong>A</strong> : Wir √ºberwachen nicht speziell f√ºr jemanden, sondern f√ºr den Prozess.  Die Pull-Anfrage hat zwei Seiten: den Autor und die Rezensenten.  Wenn die Pr√ºfer den Scheck herausziehen, leidet der Autor.  Andererseits ist es auch unmenschlich, Inspektoren sofort von der Arbeit zu rei√üen.  Es ist notwendig, ein Gleichgewicht zu finden, damit beide Seiten bequem sind.  Der Timer wird nicht ben√∂tigt, um jemanden zu bestrafen, sondern um alle Abweichungen aufzuzeichnen.  Die meisten dieser Abweichungen sind nicht auf das Verschulden der Pr√ºfer zur√ºckzuf√ºhren, sondern auf das Verschulden technischer Probleme.  Die Herausforderung besteht darin, diese Probleme zu beheben.  Damit andere ihnen nicht begegnen.  Kontinuierliche Selbstverbesserung </p><br><p>  <strong>F</strong> : <em>Und was ist, wenn es komplexe PR, mehr als 100500 Codezeilen und "Change the Letter" gibt?</em>  <em>Wo ist die Gerechtigkeit?</em> <br>  <strong>A</strong> : Ja, das ist wahr.  Als wir an der Standard-Code√ºberpr√ºfung arbeiteten, haben wir sie nur entlang der oberen Grenze genommen, d. H.  Die Code√ºberpr√ºfung komplexer PR sollte in das SLA passen.  Gleichzeitig haben wir aber nicht das Ziel, alle an diese Grenzen zu bringen.  Wir sind immer sympathisch, Anfragen zu stellen, in denen es trotz der gebrochenen Messlatte an einem Tag eine lebhafte, n√ºtzliche Diskussion gibt. </p><br><p>  Wir haben Pl√§ne f√ºr SLA-Noten f√ºr Storypoints.  Zum Beispiel 1SP - 1h, 3SP - 5h, 5SP - 2d.  Gl√ºcklicherweise ist der Tracker dazu bereits in der Lage.  Wir sind einfach noch nicht bereit daf√ºr - wir haben noch einen langen Weg vor uns. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de421129/">https://habr.com/ru/post/de421129/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de421119/index.html">SmartTV-Entwicklung f√ºr Unterwasserschwader</a></li>
<li><a href="../de421121/index.html">Video-Streaming √ºber einen Browser mit extrem geringer Latenz (und WebRTC!)</a></li>
<li><a href="../de421123/index.html">Zusammenfassung der IT-Veranstaltungen f√ºr September</a></li>
<li><a href="../de421125/index.html">Wir segmentieren t√§glich 600 Millionen Benutzer in Echtzeit</a></li>
<li><a href="../de421127/index.html">Skillbox Friday Webinare: Design & Entwickler</a></li>
<li><a href="../de421131/index.html">Kritische Sicherheitsanf√§lligkeit von 1Cloud-Servern</a></li>
<li><a href="../de421133/index.html">LINKa. Papiertastatur. Extra gro√üe Kn√∂pfe</a></li>
<li><a href="../de421135/index.html">Au / Ni / MgO: W√§rme√ºbertragung im Nanoma√üstab</a></li>
<li><a href="../de421137/index.html">So funktioniert Headless Chrome</a></li>
<li><a href="../de421139/index.html">Frontend Conf - k√ºmmert sich um den Benutzer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>