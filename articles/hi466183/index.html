<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЖйя╕П ЁЯСиЁЯП╗тАНЁЯЪА ЁЯС╕ЁЯП╝ ClickHouse рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо ЁЯд┤ЁЯП╝ ЁЯЫм тЫ▓я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ClickHouse рд▓рдЧрд╛рддрд╛рд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЦреЛрдЬ, UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рдЧреБрдгреЛрдВ рдХреА рдЧрдгрдирд╛ рдХрд░рдирд╛, рдпрд╛ рдХреБрдЫ рдЕрдзрд┐рдХ рд╡рд┐рджреЗрд╢реА, рдЪрд╛рд╣реЗ рд╡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ClickHouse рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/466183/"><p>  ClickHouse рд▓рдЧрд╛рддрд╛рд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЦреЛрдЬ, UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рдЧреБрдгреЛрдВ рдХреА рдЧрдгрдирд╛ рдХрд░рдирд╛, рдпрд╛ рдХреБрдЫ рдЕрдзрд┐рдХ рд╡рд┐рджреЗрд╢реА, рдЪрд╛рд╣реЗ рд╡рд╣ рдХреЗрд╕-рд╕рдВрд╡реЗрджреА рдЦреЛрдЬ рд╣реЛ рдпрд╛ рд╕рдВрдкреАрдбрд╝рд┐рдд рдбреЗрдЯрд╛ рдЦреЛрдЬред </p><br><p> рдпрд╣ рд╕рдм рдЗрд╕ рддрдереНрдп рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реБрдЖ рдХрд┐ ClickHouse рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдмрдВрдзрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рд▓реЗрд╕рд╣рд╛ рдорд┐рд▓реЛрд╡рд┐рдбреЛрд╡ o6CuFl2Q</a> рдиреЗ рд╣рд╛рдпрд░ рд╕реНрдХреВрд▓ рдСрдл рдЗрдХреЛрдиреЙрдорд┐рдХреНрд╕ рдореЗрдВ рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬреНрдЮрд╛рди рд╕рдВрдХрд╛рдп рдореЗрдВ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЖрдП рдФрд░ рдЯрд░реНрдо рдкреЗрдкрд░ рдФрд░ рдбрд┐рдкреНрд▓реЛрдорд╛ рдХреЗ рд▓рд┐рдП рднрд╛рд░реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд┐рд╖рдпреЛрдВ рдХреА рдкреЗрд╢рдХрд╢ рдХреАред  рдЬрдм рдореИрдВрдиреЗ рдХреНрд▓рд┐рдХрд╣рд╛рдЙрд╕ рдореЗрдВ "рд╕реНрдорд╛рд░реНрдЯ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рджреЗрдЦрд╛" (рдореИрдВ, рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддрд╛ рд╣реИ, рдкреНрд░рд╛рдпреЛрдЧрд┐рдХ рд╡рд╛рд▓реЗ рд╕рд╣рд┐рдд), рдореИрдВрдиреЗ рддреБрд░рдВрдд рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреЗ рдбрд┐рдкреНрд▓реЛрдорд╛ рдмрдирд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рдИред  рдореЗрд░реА рдЦреБрд╢реА рдФрд░ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/av/4d/2g/av4d2gj_pplevfljaomiqsnccda.jpeg"></p><br><a name="habracut"></a><br><h2 id="clickhouse">  ClickHouse </h2><br><p>  рдХреНрд▓рд┐рдХрд╣рд╛рдЙрд╕ рдиреЗ рдзреНрдпрд╛рди рд╕реЗ рдореЗрдореЛрд░реА рдореЗрдВ рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рд╕рдВрдЧрдарди рдХреЛ рд╕реЛрдЪрд╛ рд╣реИ - рдХреЙрд▓рдо рдореЗрдВред  рдкреНрд░рддреНрдпреЗрдХ рдХреЙрд▓рдо рдХреЗ рдЕрдВрдд рдореЗрдВ 16-рдмрд╛рдЗрдЯ рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП 15 рдмрд╛рдЗрдЯреНрд╕ рдХрд╛ рдПрдХ рдкреИрдбрд┐рдВрдЧ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, ColumnString рд╕реНрдЯреЛрд░ рдСрдлрд╝рд╕реЗрдЯ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрддрд╛ рд╣реИред  рдРрд╕реЗ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/w4/go/yp/w4goypgrxiigdp5tpdy3eyao2bu.png"><br></p><br><p>  ColumnFixedString, ColumnConst рдФрд░ LowCardinality рднреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдЖрдЬ рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЗрддрдиреЗ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдмрд╛рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рдореБрдЦреНрдп рдмрд┐рдВрджреБ рдпрд╣ рд╣реИ рдХрд┐ рдкреВрдВрдЫ рдХреЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХреЗрд╡рд▓ рд╕реБрдВрджрд░ рд╣реИ, рдФрд░ рдбреЗрдЯрд╛ рдХреА рд╕реНрдерд╛рдиреАрдпрддрд╛ рднреА рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рддреА рд╣реИред </p><br><h2 id="poisk-po-podstrokam">  рдкрджрд╛рд░реНрде рдЦреЛрдЬ </h2><br><p>  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, рдЖрдк рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдПрдХ рд╡рд┐рдХрд▓реНрдк рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЛ рдЬрд╛рдирддреЗ рд╣реИрдВред  рд╣рдо рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ ClickHouse рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкрд╣рд▓реЗ рд╣рдо рдХреБрдЫ рдкрд░рд┐рднрд╛рд╖рд╛рдПрдБ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддреЗ рд╣реИрдВ: </p><br><ol><li>  haystack - рд╡рд╣ рд░реЗрдЦрд╛ рдЬрд┐рд╕рдореЗрдВ рд╣рдо рджреЗрдЦ рд░рд╣реЗ рд╣реИрдВ;  рдЖрдорддреМрд░ рдкрд░ рд▓рдВрдмрд╛рдИ <em>n</em> рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реВрдкрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред </li><li>  рд╕реБрдИ - рд╕реНрдЯреНрд░рд┐рдВрдЧ рдпрд╛ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдЬрд┐рд╕реЗ рд╣рдо рдвреВрдВрдв рд░рд╣реЗ рд╣реИрдВ;  рд▓рдВрдмрд╛рдИ <em>m</em> рджреНрд╡рд╛рд░рд╛ рдЪрд┐рд╣реНрдирд┐рдд рдХреА рдЬрд╛рдПрдЧреАред </li></ol><br><p>  рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдХрд╣ рд╕рдХрддрд╛ рд╣реВрдВ рдХрд┐ рдЦреЛрдЬ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХреЗ 2 (рдЕрдзрд┐рдХрддрдо 3) рдкреНрд░рдХрд╛рд░ рд╣реИрдВред  рдкрд╣рд▓рд╛ рдПрдХ рд░реВрдк рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдкреНрд░рддреНрдпрдп рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рд╣реИред  рджреВрд╕рд░рд╛ рдкреНрд░рдХрд╛рд░ рдореЗрдореЛрд░реА рддреБрд▓рдирд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рд╣реИред  рд░рд╛рдмрд┐рди-рдХрд╛рд░реНрдк рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рднреА рд╣реИ, рдЬреЛ рд╣реИрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдкрдиреА рддрд░рд╣ рдХрд╛ рдХрд╛рдлреА рдЕрдиреВрдард╛ рд╣реИред  рд╕рдмрд╕реЗ рддреЗрдЬрд╝ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рдпрд╣ рд╕рдм рд╡рд░реНрдгрдорд╛рд▓рд╛ рдХреЗ рдЖрдХрд╛рд░, рд╕реБрдИ рдХреА рд▓рдВрдмрд╛рдИ, рдШрдЯрд╛рд╡ рдФрд░ рдШрдЯрдирд╛ рдХреА рдЖрд╡реГрддреНрддрд┐ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рд╡рд┐рднрд┐рдиреНрди рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдкрдврд╝реЗрдВред  рдФрд░ рдпрд╣рд╛рдБ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдПрд▓реНрдЧреЛрд░рд┐рджрдо рд╣реИрдВ: </p><br><ol><li>  рдирдЯ - рдореЙрд░рд┐рд╕ - рдкреНрд░реИрдЯ, </li><li>  рдмреЛрдпрд░ - рдореВрд░, </li><li>  рдмреЛрдпрд░ - рдореВрд░ - рд╣реЙрд░реНрд╕рдкреВрд▓, </li><li>  рд░рд╛рдмрд┐рди - рдХрд╛рд░реНрдк, </li><li>  рдбрдмрд▓-рдкрдХреНрд╖реАрдп (рдЧреНрд▓рд┐рдореНрдХ рдореЗрдВ "рдореЗрдореЗрдо" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ), </li><li>  BNDMред </li></ol><br><p>  рд╕реВрдЪреА рдЬрд╛рд░реА рд╣реЛрддреА рд╣реИред  рд╣рдо ClickHouse рдореЗрдВ рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ рд╕рдм рдХреБрдЫ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рд▓реЗрдХрд┐рди рдЕрдВрдд рдореЗрдВ рд╣рдо рдПрдХ рдФрд░ рдЕрдзрд┐рдХ рдЕрд╕рд╛рдзрд╛рд░рдг рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдмрд╕ рдЧрдПред </p><br><h4 id="algoritm-volnickogo">  рд╡реЛрд▓реНрдирд┐рдЯреНрд╕реНрдХреА рдПрд▓реНрдЧреЛрд░рд┐рджрдо </h4><br><p>  рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо 2010 рдХреЗ рдЕрдВрдд рдореЗрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд▓рд┐рдпреЛрдирд┐рдж рд╡реЛрд▓реНрдирд┐рдЯреНрд╕реНрдХреА рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмреНрд▓реЙрдЧ</a> рдкрд░ рдкреНрд░рдХрд╛рд╢рд┐рдд рд╣реБрдЖ рдерд╛ред  рдпрд╣ рдмреЛрдпрд░-рдореВрд░-рд╣реЙрд░реНрд╕рдкреВрд▓ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреА рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реИ, рдХреЗрд╡рд▓ рдПрдХ рдмреЗрд╣рддрд░ рд╕рдВрд╕реНрдХрд░рдг рд╣реИред </p><br><p>  рдпрджрд┐ <em>m &lt;4</em> , рддреЛ рдорд╛рдирдХ рдЦреЛрдЬ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдХрд╛рд░ рдХреЗ рдЦреБрд▓реЗ рдкрддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЕрдВрдд рд╕реЗ рд╕рднреА рдмрдбрд╝реЗрдЧреНрд░рд╛рдо (рд▓рдЧрд╛рддрд╛рд░ 2 рдмрд╛рдЗрдЯреНрд╕) рд╕реБрдИ рдХреЛ рдмрдЪрд╛рдПрдВ <em>ред рд╕рд┐рдЧреНрдорд╛ |</em>  <em><sup>2</sup></em> рддрддреНрд╡ (рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рдпреЗ 2 <sup>16</sup> рддрддреНрд╡ рд╣реИрдВ), рдЬрд╣рд╛рдВ рдЗрд╕ рдЖрд╢реНрд░рдо рдХреЗ рд╡рдВрд╢рдЬ рдореВрд▓реНрдп рд╣реЛрдВрдЧреЗ, рдФрд░ рд╕реНрд╡рдпрдВ рдЖрд╢реНрд░рдо рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рд╣реИрд╢ рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рд╣реЛрдВрдЧреЗред  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдерд┐рддрд┐ рд╣реИрд╕реНрдЯреИрдХ рдХреА рд╢реБрд░реБрдЖрдд рд╕реЗ рд╕реНрдерд┐рддрд┐ <em>m - 2</em> рдкрд░ рд╣реЛрдЧреАред  рд╣рдо рдЪрд░рдг <em>1 - 1 рдХреЗ</em> рд╕рд╛рде рд╣реИрд╕реНрдЯреИрдХ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕ рд╕реНрдерд┐рддрд┐ рд╕реЗ рдЕрдЧрд▓реЗ рдЖрд╢реНрд░рдо рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ рдФрд░ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЖрд╢реНрд░рдо рд╕реЗ рд╕рднреА рдореВрд▓реНрдпреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рдлрд┐рд░ рд╣рдо рд╕реНрдореГрддрд┐ рдХреЗ рджреЛ рдЯреБрдХрдбрд╝реЛрдВ рдХреА рддреБрд▓рдирд╛ рд╕рд╛рдорд╛рдиреНрдп рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╕реЗ рдХрд░реЗрдВрдЧреЗред  рдЬреЛ рдкреВрдВрдЫ рдмрдиреА рд╣реБрдИ рд╣реИ, рдЙрд╕реЗ рдЙрд╕реА рдПрд▓реНрдЧреЛрд░рд┐рджрдо рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдЪрд░рдг <em>рдПрдо - 1</em> рдХреЛ рдЗрд╕ рддрд░рд╣ <em>рд╕реЗ</em> рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдпрджрд┐ рдХрд┐рд╕реА рд╣рд╕реНрдЯреИрдХ рдореЗрдВ рд╕реБрдИ рдХреА рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рд╣рдо рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдЗрд╕ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЗ рдЖрд╢реНрд░рдо рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ - рдЬрд┐рд╕рд╕реЗ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрдЧрд╛ рдХрд┐ рд╣рдо рдкреНрд░рд╡реЗрд╢ рдореЗрдВ рд╕реНрдерд┐рддрд┐ рдХреА рд╡рд╛рдкрд╕реА рдХрд░рддреЗ рд╣реИрдВред  рдкрд╣рд▓реА рдШрдЯрдирд╛ рдЗрд╕ рддрдереНрдп рд╕реЗ рдЧрд╛рд░рдВрдЯреАрдХреГрдд рд╣реИ рдХрд┐ рд╣рдо рд╕реВрдЪрдХрд╛рдВрдХ рдХреЛ рд╣реИрд╢ рдЯреЗрдмрд▓ рдХреЗ рдЕрдВрдд рд╕реЗ рдмрд┐рдЧреНрд░рд╛рдо рджреНрд╡рд╛рд░рд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рд╣рдо рдмрд╛рдПрдВ рд╕реЗ рджрд╛рдПрдВ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд░реЗрдЦрд╛ рдХреЗ рдЕрдВрдд рд╕реЗ (рд╢рд╛рдпрдж рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЖрд╢реНрд░рдореЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВ) рдмреАрдЧреНрд░рд╛рдореЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рдлрд┐рд░ рд╢реБрд░реБрдЖрдд рдХреЗ рдХрд░реАрдмред </p><br><p> рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рдмрддрд╛ рджреЗрдВ рдХрд┐ <code>abacabaac</code> рдФрд░ рд╕реБрдИ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИред  рд╣реИрд╢ рдЯреЗрдмрд▓ <code>{aa : 0, ac : 1, ca : 2}</code> ред </p><br><pre> <code class="plaintext hljs">0 1 2 3 4 5 6 7 8 9 abacabaaca ^ -   </code> </pre> <br><p>  рд╣рдо рд▓реЛрдЧ рдЖрд╢реНрд░рдо рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВред  рд╕реБрдИ рдореЗрдВ, рд╣рдо рд╕рдорд╛рдирддрд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдкрдиреНрди рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">0 1 2 3 4 5 6 7 8 9 abacabaaca aaca</code> </pre> <br><p>  рдореЗрд▓ рдирд╣реАрдВ рд╣реБрдЖред  <code>ac</code> рдмрд╛рдж рд╣реИрд╢ рдЯреЗрдмрд▓ рдореЗрдВ рдХреЛрдИ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реИрдВ, рд╣рдо рдЪрд░рдг 3 рдХреЗ рд╕рд╛рде рдХрджрдо рд░рдЦрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">0 1 2 3 4 5 6 7 8 9 abacabaaca ^ -   </code> </pre> <br><p>  рд╣реИрд╢ рдЯреЗрдмрд▓ рдореЗрдВ рдХреЛрдИ рднреА рдмрдбрд╝рд╛ <code>ba</code> рдирд╣реАрдВ рд╣реИ, рдЖрдЧреЗ рдмрдврд╝реЛ: </p><br><pre> <code class="plaintext hljs">0 1 2 3 4 5 6 7 8 9 abacabaaca ^ -   </code> </pre> <br><p>  рд╕реБрдИ рдореЗрдВ рдПрдХ рдмрд┐рдЧреНрд░рд╛рдо <code>ca</code> рд╣реИ, рд╣рдо рдСрдлрд╕реЗрдЯ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдкрд╛рддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">0 1 2 3 4 5 6 7 8 9 abacabaaca aaca</code> </pre> <br><p>  рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рдХрдИ рдлрд╛рдпрджреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдвреЗрд░ рдкрд░ рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рд╕реНрдЯреИрдХ рдкрд░ 64 рдХреЗрдмреА рдЕрдм рдХреБрдЫ рдкрд╛рд░рд▓реМрдХрд┐рдХ рдирд╣реАрдВ рд╣реИрдВред  рджреВрд╕рд░реЗ, рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд▓рд┐рдП рдореЛрдбреБрд▓реЛ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП 2 <sup>16</sup> рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рд╕рдВрдЦреНрдпрд╛ рд╣реИ;  рдпреЗ рд╕рд┐рд░реНрдл Movzwl рдирд┐рд░реНрджреЗрд╢ рд╣реИрдВ (рдпрд╛, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдордЬрд╛рдХ рдХрд░рддреЗ рд╣реИрдВ, "movsvl") рдФрд░ рдкрд░рд┐рд╡рд╛рд░ред </p><br><p>  рдФрд╕рддрди, рдпрд╣ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╕рд╛рдмрд┐рдд рд╣реБрдЖред  рд╣рдордиреЗ Yandex.Metrica рд╕реЗ рдбреЗрдЯрд╛ рд▓рд┐рдпрд╛, рдЕрдиреБрд░реЛрдз рд▓рдЧрднрдЧ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╣реИрдВред  рдПрдХ рд╕реНрдЯреНрд░реАрдо рдЧрддрд┐, рдЕрдзрд┐рдХ рдмреЗрд╣рддрд░ рд╣реИ, рдХреЗрдПрдордкреА: рдиреЙрдЯ - рдореЙрд░рд┐рд╕ - рдкреНрд░реИрдЯ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо, рдмреАрдПрдо: рдмреЛрдпрд░ - рдореВрд░, рдмреАрдПрдордПрдЪ: рдмреЛрдпрд░ - рдореВрд░ - рд╣реЙрд░реНрд╕рдкреВрд▓ред </p><br><p><img src="https://habrastorage.org/webt/wp/vn/v2/wpvnv2eqrbhhvqvryaqmdjc9igy.png"><br></p><br><p>  рдирд┐рд░рд╛рдзрд╛рд░ рдирд╣реАрдВ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рджреНрд╡рд┐рдШрд╛рдд рд╕рдордп рдХрд╛ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/oi/3x/dh/oi3xdhxe7awdlsqxxui2lyqvxjc.png"><br></p><br><p>  рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ <code>position(Column, ConstNeedle)</code> рдлрдВрдХреНрд╢рди <code>position(Column, ConstNeedle)</code> , рдФрд░ рдпрд╣ рд░реЗрдЧреНрдпреБрд▓рд░ рдПрдХреНрд╕рдкреНрд░реЗрд╢рди <code>position(Column, ConstNeedle)</code> рд▓рд┐рдП рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди рдХрд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><h2 id="poisk-po-regulyarnym-vyrazheniyam">  рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдЦреЛрдЬ </h2><br><p>  рд╣рдо рдЖрдкрдХреЛ рдмрддрд╛рдПрдВрдЧреЗ рдХрд┐ рдХреИрд╕реЗ ClickHouse рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдЦреЛрдЬреЛрдВ рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдХрд░рддрд╛ рд╣реИред  рдХрдИ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рдЕрдВрджрд░ рдПрдХ рд╡рд┐рдХрд▓реНрдк рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рд╣рд┐рд╕реНрдЯреИрдХ рдХреЗ рдЕрдВрджрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдХ рдкрд░рд┐рдорд┐рдд рд░рд╛рдЬреНрдп рдорд╢реАрди рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдирд╣реАрдВ рдХрд░рдиреЗ рдФрд░ рдЗрд╕рдХреЗ рдЦрд┐рд▓рд╛рдл рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдРрд╕реЗ рдкрджрд╛рд░реНрдереЛрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░ рджреЗрдВрдЧреЗред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ: рдХрд┐рд╕реА рднреА рдЙрджреНрдШрд╛рдЯрди рдХреЛрд╖реНрдардХ рдиреЗрд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд╕реНрддрд░ рдХреЛ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ, рдХрд┐рд╕реА рднреА рд╕рдорд╛рдкрди рдХреЛрд╖реНрдардХ рдореЗрдВ рдХрдореА рдЖрддреА рд╣реИ;  рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд░реНрдг рднреА рд╣реИрдВ (рдЙрджрд╛ред ',' * ','? ',' \ w ', рдЖрджрд┐)ред  рд╣рдореЗрдВ рд╕реНрддрд░ рдкрд░ рд╕рднреА рд╕рдмрд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: <br><img src="https://habrastorage.org/webt/2x/uk/uo/2xukuompabpmnrjpk-muwg1yydi.png"><br></p><br><p>  рд╣рдо рдЗрд╕реЗ рдЙрди рд╕рдмрд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдореЗрдВ рддреЛрдбрд╝рддреЗ рд╣реИрдВ рдЬреЛ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╣рдо рдЕрдзрд┐рдХрддрдо рд▓рдВрдмрд╛рдИ рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕ рдкрд░ рдЙрдореНрдореАрджрд╡рд╛рд░реЛрдВ рдХреА рддрд▓рд╛рд╢ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рд╕рд╛рдорд╛рдиреНрдп RE2 рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдЗрдВрдЬрди рдХреЗ рд╕рд╛рде рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред  рдКрдкрд░ рдХреА рддрд╕реНрд╡реАрд░ рдореЗрдВ рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд╣реИ, рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп RE2 рдЗрдВрдЬрди рджреНрд╡рд╛рд░рд╛ 736 рдПрдордмреА / рдПрд╕ рдкрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рд╛рдЗрдкрд░рд╕реНрдХреИрди (рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж) 1.6 рдЬреАрдмреА / рдПрд╕ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╣рдо рд╡рд┐рд╕реНрдордп рдХреЗ рд╕рд╛рде 1.69 рдЬреАрдмреА / рдПрд╕ рдкреНрд░рддрд┐ рдХреЛрд░ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВ LZ4ред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЕрдиреБрдХреВрд▓рди рд╕рддрд╣ рдкрд░ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдореЗрдВ рдмрд╣реБрдд рддреЗрдЬреА рд▓рд╛рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдХреНрд╕рд░ рдпрд╣ рдЙрдкрдХрд░рдг рдореЗрдВ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдореБрдЭреЗ рдмрд╣реБрдд рдЖрд╢реНрдЪрд░реНрдпрдЪрдХрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ LIKE рдХреАрд╡рд░реНрдб рдХреЛ рднреА рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, LIKE рдХреЗ рдмрд╛рдж рд╣реА рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рд░реЗрдЧреБрд▓рд░ рдПрдХреНрд╕рдкреНрд░реЗрд╢рди %%%%%%% (рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди) рдФрд░ <code>_</code> (рдордирдорд╛рдирд╛ рдЪрд░рд┐рддреНрд░) рдореЗрдВ рдЖ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рд╕рднреА рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпрд╛рдБ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЕрдиреБрдХреВрд▓рди рдХреЗ рдЕрдзреАрди рдирд╣реАрдВ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>yandex|google</code> рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЙрди рдкрджрд╛рд░реНрдереЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЕрд▓рдЧ рдХрд░рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИ рдЬреЛ рдХрд┐ рд╣реИрд╕реНрдЯреИрдХ рдореЗрдВ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд▓рдЧ рд╕рдорд╛рдзрд╛рди рдХреЗ рд╕рд╛рде рдЖрдПред </p><br><h2 id="poisk-po-mnogim-podstrokam">  рдХрдИ рд╕рдмрд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ </h2><br><p>  рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдмрд╣реБрдд рд╕реА рд╕реБрдИ рд╣реИ, рдФрд░ рдореИрдВ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдХреНрдпрд╛ рдЙрдирдореЗрдВ рд╕реЗ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╣рд┐рд╕реНрдЯреИрдХ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИред  рдРрд╕реА рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рд╢рд╛рд╕реНрддреНрд░реАрдп рддрд░реАрдХреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрд╣реЛ-рдХреЛрд░рд╕рд┐рдХ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдоред  рд▓реЗрдХрд┐рди рд╡рд╣ рд╣рдорд╛рд░реЗ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рддреЗрдЬ рдирд╣реАрдВ рдерд╛ред  рд╣рдо рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рдмрд╛рдд рдХрд░реЗрдВрдЧреЗред </p><br><p><del>  Lesch </del>  ClickHouse рдЧреИрд░-рдорд╛рдирдХ рд╕рдорд╛рдзрд╛рдиреЛрдВ рд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдХреБрдЫ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдФрд░, рд╢рд╛рдпрдж, рдЦреБрдж рдПрдХ рдирдпрд╛ рдЦреЛрдЬ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдмрдирд╛ред  рдФрд░ рдЙрдиреНрд╣реЛрдВрдиреЗ рдХрд┐рдпрд╛ред </p><br><p>  рд╣рдордиреЗ рд╡реЛрд▓реНрдиреНрддреНрд╕реНрдХреА рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЛ рджреЗрдЦрд╛ рдФрд░ рдЗрд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рддрд╛рдХрд┐ рдпрд╣ рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рдХрдИ рд╕рдмрд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рдЦреЛрдЬ рдХрд░рдиреЗ рд▓рдЧреЗред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдмрд╕ рд╕рднреА рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЗ рдмрд┐рдЧреНрд░реЗрдб рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдФрд░ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдкрдВрдХреНрддрд┐ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЪрд░рдг рдХреЛ рдХрдо рд╕реЗ рдХрдо рд╕рднреА рд╕реБрдИ рд▓рдВрдмрд╛рдИ рдорд╛рдЗрдирд╕ 1 рд╕реЗ рдлрд┐рд░ рд╕реЗ рд╕рдВрдкрддреНрддрд┐ рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЪреБрдирд╛ рдЬрд╛рдПрдЧрд╛ рдХрд┐ рдЕрдЧрд░ рдХреЛрдИ рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИ рддреЛ рд╣рдо рдЕрдкрдиреЗ рдЖрд╢реНрд░рдо рдХреЛ рджреЗрдЦреЗрдВрдЧреЗред  рд╣реИрд╢ рдЯреЗрдмрд▓ 128 рдХреЗрдмреА рддрдХ рдмрдврд╝ рдЬрд╛рдПрдЧреА (255 рд╕реЗ рдЕрдзрд┐рдХ рд▓рдВрдмреА рд▓рд╛рдЗрдиреЗрдВ рдорд╛рдирдХ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рд╣реЛрддреА рд╣реИрдВ, рд╣рдо 256 рд╕реБрдЗрдпреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рдорд╛рдиреЗрдВрдЧреЗ)ред  рдореИрдВ рдмрд╣реБрдд рдЖрд▓рд╕реА рд╣реВрдВ, рдЗрд╕рд▓рд┐рдП рдпрд╣рд╛рдВ рдкреНрд░рд╕реНрддреБрддрд┐ рд╕реЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ (рдКрдкрд░ рд╕реЗ рдиреАрдЪреЗ рддрдХ рдмрд╛рдПрдВ рд╕реЗ рджрд╛рдПрдВ рдкрдврд╝реЗрдВ): </p><br><p><img src="https://habrastorage.org/webt/ak/no/hq/aknohqtvebtx-c_ijmza8af0emm.png"><br></p><br><p><img src="https://habrastorage.org/webt/x6/cm/z4/x6cmz4d3i5qy5i3tfj1ngbssewc.png"><br></p><br><p>  рд╣рдордиреЗ рдпрд╣ рджреЗрдЦрдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХрд╛ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рджреВрд╕рд░реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддрд╛ рд╣реИ (рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдбреЗрдЯрд╛ рд╕реЗ рдкрдВрдХреНрддрд┐рдпрд╛рдБ рд▓реА рдЧрдИ рд╣реИрдВ)ред  рдФрд░ рдЫреЛрдЯреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рд▓рд┐рдП, рд╡рд╣ рд╕рдм рдХреБрдЫ рдХрд░рддрд╛ рд╣реИ (рдЙрддрд░рд╛рдИ рдХреЗ рд╕рд╛рде рдЧрддрд┐ рдХрд╛ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рд▓рдЧрднрдЧ 2.5 рдЬреАрдмреА / рдПрд╕)ред </p><br><p><img src="https://habrastorage.org/webt/nl/t_/pt/nlt_pt077xl7n-cya0qb6eh67re.png"><br></p><br><p>  рдлрд┐рд░ рдпрд╣ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рдЧрдпрд╛ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рдорд╛рди рдмреАрдЧрд░ рдХреЗ рд╕рд╛рде, рд╣рдо рдХреБрдЫ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рдпреЛрдВ рд╕реЗ рд╣рд╛рд░ рдЬрд╛рддреЗ рд╣реИрдВред  рдпрд╣ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ - рд╣рдо рд╕реНрдореГрддрд┐ рдХреЗ рдХрдИ рдЯреБрдХрдбрд╝реЛрдВ рдФрд░ рдиреАрдЪрд╛ рджрд┐рдЦрд╛рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/n8/wm/uz/n8wmuzm_vcepo4olqcse1e7gwqy.png"><br></p><br><p>  рдпрджрд┐ рд╕реБрдИ рдХреА рдиреНрдпреВрдирддрдо рд▓рдВрдмрд╛рдИ рдХрд╛рдлреА рдмрдбрд╝реА рд╣реИ рддреЛ рдЖрдк рдЬреНрдпрд╛рджрд╛ рддреЗрдЬреА рдирд╣реАрдВ рд▓рд╛ рд╕рдХрддреЗред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреБрдЫ рднреА рднреБрдЧрддрд╛рди рдХрд┐рдП рдмрд┐рдирд╛ рд╣рд┐рд╕реНрдЯреИрдХ рдХреЗ рдкреВрд░реЗ рдЯреБрдХрдбрд╝реЛрдВ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХреЗ рдЕрдзрд┐рдХ рдЕрд╡рд╕рд░ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/zg/z1/ej/zgz1ejecxev4-j-oz3m6egxydt0.png"><br></p><br><p>  рдЯрд┐рдкрд┐рдВрдЧ рдмрд┐рдВрджреБ рдХрд╣реАрдВ 13-15 рд▓рд╛рдЗрдиреЛрдВ рдкрд░ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рдореИрдВрдиреЗ рдЬреЛ рдЕрдиреБрд░реЛрдз рджреЗрдЦреЗ рдЙрдирдореЗрдВ рд╕реЗ рд▓рдЧрднрдЧ 97% 15 рдкрдВрдХреНрддрд┐рдпреЛрдВ рд╕реЗ рдХрдо рдереЗ: </p><br><p><img src="https://habrastorage.org/webt/x-/6j/od/x-6jodqalhriam_byxewdzoxzhs.png"><br></p><br><p>  рдЦреИрд░, рдПрдХ рдмрд╣реБрдд рд╣реА рдбрд░рд╛рд╡рдиреА рддрд╕реНрд╡реАрд░ - 41 рдкрдВрдХреНрддрд┐рдпрд╛рдБ, рдХрдИ рджреЛрд╣рд░рд╛рддреЗ рд╣реБрдП рдмрдбрд╝реЗ рд╢рдмреНрдж: </p><br><p><img src="https://habrastorage.org/webt/yx/ez/da/yxezdam_2poycdgttd9nnsyjjqy.png"><br></p><br><p>  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, ClickHouse (19.5) рдореЗрдВ рд╣рдордиреЗ рдЗрд╕ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдП: </p><br><p>  - <code>multiSearchAny(h, [n_1, ..., n_k])</code> - 1, рдпрджрд┐ рдХрдо рд╕реЗ рдХрдо рд╕реБрдЗрдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ <code>multiSearchAny(h, [n_1, ..., n_k])</code> рдореЗрдВ рд╣реИред <br>  - <code>multiSearchFirstPosition(h, [n_1, ..., n_k])</code> - рдпрджрд┐ рдирд╣реАрдВ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдПрдХ рдмрд╛рд░ (рдПрдХ рд╕реЗ) рдпрд╛ 0 рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХреА рд╕рдмрд╕реЗ рдмрд╛рдИрдВ рд╕реНрдерд┐рддрд┐ред <br>  - <code>multiSearchFirstIndex(h, [n_1, ..., n_k])</code> - рд╕рдмрд╕реЗ рдмрд╛рдИрдВ рд╕реБрдИ рд╕реВрдЪрдХрд╛рдВрдХ, рдЬреЛ рдХрд┐ <code>multiSearchFirstIndex(h, [n_1, ..., n_k])</code> рдореЗрдВ рдкрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛;  0 рдЕрдЧрд░ рдирд╣реАрдВ рдорд┐рд▓рд╛ред <br>  - <code>multiSearchAllPositions(h, [n_1, ..., n_k])</code> - рд╕рднреА рд╕реБрдЗрдпреЛрдВ рдХреЗ рд╕рднреА рдкрд╣рд▓реЗ рд╕реНрдерд╛рди, рдПрдХ рд╕рд░рдгреА рджреЗрддрд╛ рд╣реИред </p><br><p>  рдкреНрд░рддреНрдпрдп рд╣реИрдВ -UTF8 (рд╣рдо рд╕рд╛рдорд╛рдиреНрдп рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ) -CaseInsensitive (рд╣рдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреЗрд╕ рдХреЗ рд╕рд╛рде 4 рдмреАрдЧреНрд░рд╛рдо рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ), -CaseInsensitiveUTF8 (рд╡рд╣рд╛рдБ рдПрдХ рд╢рд░реНрдд рд╣реИ рдХрд┐ рдЕрдкрд░рдХреЗрд╕ рдФрд░ рд▓реЛрдЕрд░рдХреЗрд╕ рдЕрдХреНрд╖рд░ рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╕рдорд╛рди рд╕рдВрдЦреНрдпрд╛ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП)ред  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди <a href="">рдпрд╣рд╛рдБ</a> рджреЗрдЦреЗрдВред </p><br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдордиреЗ рд╕реЛрдЪрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣рдо рдХрдИ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХреБрдЫ рдРрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕рдорд╛рдзрд╛рди рдорд┐рд▓рд╛ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдореЗрдВ рдЦрд░рд╛рдм рд╣реЛ рдЧрдпрд╛ рдерд╛ред </p><br><h2 id="poisk-po-mnogim-regulyarnym-vyrazheniyam">  рдХрдИ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЦреЛрдЬреЗрдВ </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣рд╛рдЗрдкрд░рд╕реНрдХреИрди</a> рдЗрдВрдЯреЗрд▓ рд╕реЗ рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╣реИ рдЬреЛ рдХрдИ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рддреБрд░рдВрдд рдЦреЛрдЬ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдЙрди рдЙрдкрд╢рдмреНрджреЛрдВ рдХреЛ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рд╕реЗ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрддрд░рд╛рдзрд┐рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣рдордиреЗ рд▓рд┐рдЦрд╛ рдерд╛, рдФрд░ Glushkov automaton рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕реЗ SIMDs (рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЛ рдЯреЗрдбреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ)ред </p><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╕рдм рдХреБрдЫ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рд╕реЗ рдЕрдзрд┐рдХрддрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рд╕рд░реНрд╡реЛрддреНрддрдо рдкрд░рдВрдкрд░рд╛рдУрдВ рдореЗрдВ рд╣реИред  рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╡рд╣реА рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрд╕рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/of/xl/dd/ofxlddsnj92zghvsducv9e9jktu.png"><br></p><br><p>  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, ClickHouse рдореЗрдВ рдореЗрд░реЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рдорд╣реАрдиреЗ рдореЗрдВ, рдореИрдВ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдПрдХ рд╕рднреНрдп рд╡рд░реНрдЧ рдкрд░ 12 рд╕рд╛рд▓ рдХреЗ рд╡рд┐рдХрд╛рд╕ рд╕реЗ рдЖрдЧреЗ рдирд┐рдХрд▓рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдерд╛ рдФрд░ рдореИрдВ рдЗрд╕рд╕реЗ рдмрд╣реБрдд рдкреНрд░рд╕рдиреНрди рд╣реВрдВред </p><br><p>  рдпрд╛рдВрдбреЗрдХреНрд╕ рдореЗрдВ, рд╣рд╛рдЗрдкрд░рд╕реНрдХреИрди рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдВрдЯреАрд╕реНрдкреИрдо рдореЗрдВ рднреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕рдореАрдХреНрд╖рд╛рдУрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рд╡рд╣ рд╢рд╛рдВрддрд┐ рд╕реЗ рд╣рдЬрд╛рд░реЛрдВ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреА рд╣реИ рдФрд░ рдЬрд▓реНрджреА рд╕реЗ рдЙрдирдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░рддреА рд╣реИред </p><br><p>  рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдХрдИ рдиреБрдХрд╕рд╛рди рд╣реИрдВред  рдкрд╣рд▓реА рдмрд╛рд░ рд╕реЗрд╡рди рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реНрдореГрддрд┐ рдХреА рдЕрдШреЛрд╖рд┐рдд рдорд╛рддреНрд░рд╛ рд╣реИ рдФрд░ рдПрдХ рдЕрдЬреАрдм рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ рдХрд┐ рд╣рд┐рд╕реНрдЯреИрдХ 2 <sup>32</sup> рдмрд╛рдЗрдЯреНрд╕ рд╕реЗ рдХрдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рджреВрд╕рд░рд╛ - рдЖрдк рдореБрдлреНрдд рдореЗрдВ рдкрд╣рд▓рд╛ рд╕реНрдерд╛рди рдирд╣реАрдВ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рдмрд╕реЗ рдмрд╛рдИрдВ рдУрд░ рд╕реНрдерд┐рдд рд╕реБрдИ рд╕реВрдЪрдХрд╛рдВрдХ рдЖрджрд┐ рдФрд░ рддреАрд╕рд░рд╛ рдорд╛рдЗрдирд╕ - рдиреАрд▓реЗ рд░рдВрдЧ рд╕реЗ рдмрд╛рд╣рд░ рдХреБрдЫ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреАрдбрд╝реЗ</a> рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, ClickHouse рдореЗрдВ, рд╣рдордиреЗ рд╣рд╛рдЗрдкрд░рд╕реНрдХреИрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛: </p><br><p>  - <code>multiMatchAny(h, [n_1, ..., n_k])</code> - 1, рдпрджрд┐ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╕реБрдЗрдпрд╛рдВ <code>multiMatchAny(h, [n_1, ..., n_k])</code> рдЖрдИрдВред <br>  - <code>multiMatchAnyIndex(h, [n_1, ..., n_k])</code> - рд╕реБрдИ рд╕реЗ рдХреЛрдИ рднреА рд╕реВрдЪрдХрд╛рдВрдХ рдЬреЛ <code>multiMatchAnyIndex(h, [n_1, ..., n_k])</code> рд╕реЗ <code>multiMatchAnyIndex(h, [n_1, ..., n_k])</code> ред </p><br><p>  рд╣рдо рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рд▓рдЧрднрдЧ рдХреИрд╕реЗ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ?  рдФрд░ рдХрдИ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХреЗ рд╕рд╛рде рдЖрдпрд╛ред </p><br><h2 id="priblizhyonnyy-poisk">  рдЕрдиреБрдорд╛рдирд┐рдд рдЦреЛрдЬ </h2><br><p>  рдЕрдиреБрдорд╛рдирд┐рдд рдЦреЛрдЬ рдореЗрдВ рдорд╛рдирдХ рд▓реЗрд╡реЗрдВрд╕рд╛рдЗрдЯрд┐рди рджреВрд░реА рд╣реИ - рдиреНрдпреВрдирддрдо рд╕рдВрдЦреНрдпрд╛ рдЬреЛ рд╡рд░реНрдгреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдмреА рд╕реЗ рд▓рдВрдмрд╛рдИ n рдХреА рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдмреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рд╣рдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рднреЛрд▓реЗ рдЧрддрд┐рд╢реАрд▓ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо <em>O (mn) рдХреЗ</em> рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ;  рд╢рд╛рдж рдХреЗ рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда рджрд┐рдорд╛рдЧ рдЗрд╕реЗ <em>рдУ (рдПрдордПрди / рд▓реЙрдЧ рдореИрдХреНрд╕ (рдПрди, рдПрдо)) рдореЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</em> ;  <em>O ((n + m)</em> , <em>рдЕрд▓реНрдлрд╝рд╛) рдХреЗ</em> рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдЬрд╣рд╛рдБ <em>рдЕрд▓реНрдлрд╝рд╛</em> рдЬрд╡рд╛рдм рд╣реИ;  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдЬреНрдЮрд╛рди</a> рдЗрд╕реЗ <em>O рдХреЗ</em> рд▓рд┐рдП рдХрд░ рд╕рдХрддрд╛ рд╣реИ <em>((рдЕрд▓реНрдлрд╛ - | n - m |) рдорд┐рдирдЯ (m, n, рдЕрд▓реНрдлрд╛) + m + n)</em> (рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╕рд░рд▓ рд╣реИ, рдХрдо рд╕реЗ рдХрдо ShAD рдореЗрдВ рдкрдврд╝реЗрдВ) рдпрд╛, рдпрджрд┐ рдереЛрдбрд╝рд╛ рд╕реНрдкрд╖реНрдЯ рд╣реИ, рддреЛ <em>O (рдЕрд▓реНрдлрд╛): 2 + рдореАрдЯрд░ рдХреЗ рд▓рд┐рдП + рдПрди)</em> ред  рдЕрднреА рднреА рдПрдХ рдорд╛рдЗрдирд╕ рд╣реИ: рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд╕реНрдерд┐рддрд┐ рдмрд╣реБрдкрдж рдореЗрдВ рджреНрд╡рд┐рдШрд╛рдд рд╕рдордп рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдирд╛ рд╕рдмрд╕реЗ рдЕрд╕рдВрднрд╡ рд╣реИ - рдкреАрдЯрд░ рдЗрдВрдбрд┐рдХ рдиреЗ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣реБрдд рд╢рдХреНрддрд┐рд╢рд╛рд▓реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦ</a> рд▓рд┐рдЦрд╛ред </p><br><p>  рдПрдХ рд╡реНрдпрд╛рдпрд╛рдо рд╣реИ: рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдХрд┐ рд▓реЗрд╡реЗрдВрд╕рд╣рд╛рдЗрдЯ рджреВрд░реА рдореЗрдВ рдПрдХ рдЪрд░рд┐рддреНрд░ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдПрдХ рджреЛ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рджреЛ рдХрд╛ рдЬреБрд░реНрдорд╛рдирд╛ рджреЗрддреЗ рд╣реИрдВ;  рдлрд┐рд░ <em>O ((n + m) рд▓реЙрдЧ (n + m)) рдХреЗ</em> рд▓рд┐рдП рдПрдХ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рд╕рд╛рде рдЖрддреЗ рд╣реИрдВред </p><br><p>  рдпрд╣ рдЕрднреА рднреА рдмрд╣реБрдд рд▓рдВрдмрд╛ рдФрд░ рдорд╣рдВрдЧрд╛ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЗрд╕ рддрд░рд╣ рдХреА рджреВрд░реА рдХреА рдорджрдж рд╕реЗ рд╣рдордиреЗ рдкреНрд░рд╢реНрдиреЛрдВ рдореЗрдВ рдЯрд╛рдЗрдкреЛрд╕ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ред </p><br><p><img src="https://habrastorage.org/webt/ok/b8/gg/okb8ggb8vwkzft3ggzdipy29pja.png"><br></p><br><p>  рд▓реЗрд╡реЗрдВрд╕рд╣рд╛рдЗрдЯ рджреВрд░реА рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рд╣реЗрдорд┐рдВрдЧрд┐рдВрдЧ рджреВрд░реА рд╣реИред  рдЙрд╕рдХреЗ рд╕рд╛рде, рднреА, рд╕рдм рдХреБрдЫ рдмрд╣реБрдд рдмреБрд░рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд▓реЗрд╡реЗрдВрд╕рд╣рд╛рдЗрдЯ рджреВрд░реА рдХреЗ рд╕рд╛рде рдереЛрдбрд╝рд╛ рдмреЗрд╣рддрд░ рд╣реИред  рдпрд╣ рд╡рд░реНрдгреЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд▓рдВрдмрд╛рдИ рдХреА рджреЛ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрди рд╡рд░реНрдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдирдореЗрдВ рд╡реЗ рднрд┐рдиреНрди рд╣реЛрддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рд╣рдо рд▓рдВрдмрд╛рдИ m &lt;n рдХреЗ рддрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рджреВрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреЗрд╡рд▓ рдирд┐рдХрдЯрддрдо рд╕рдмреНрд╕рдЯреНрд░реЗрдЯ рдХреА рдЦреЛрдЬ рдореЗрдВред </p><br><p>  рдРрд╕реА рд╡рд┐рд╕рдВрдЧрддрд┐рдпреЛрдВ рдХреА рдЧрдгрдирд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ (n - m + 1 рддрддреНрд╡реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА d, рдЬрд╣рд╛рдВ d [i] рдУрд╡рд░рд▓реЗ рдХреА рд╢реБрд░реБрдЖрдд рд╕реЗ i-th рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╡рд░реНрдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ) <em>O (! | рд╕рд┐рдЧреНрдорд╛ | (n m) рд▓реЙрдЧ (n + m) рдХреЗ рд▓рд┐рдП) )</em> ?  рдкрд╣рд▓реЗ, рдХрд░реЛ <em>| рд╕рд┐рдЧреНрдорд╛ |</em>  рдмрд┐рдЯ рдорд╛рд╕реНрдХ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдкреНрд░рддреАрдХ рдорд╛рдирд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╕рдорд╛рди рд╣реИред  рдЕрдЧрд▓рд╛, рд╣рдо рд╕рд┐рдЧреНрдорд╛ рдорд╛рд╕реНрдХ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рдЙрддреНрддрд░ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ - рд╣рдореЗрдВ рдореВрд▓ рдЙрддреНрддрд░ рдорд┐рд▓рддрд╛ рд╣реИред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  <code>abba</code> , рд╕реНрдерд╛рдирд╛рдкрдиреНрди <code>ba</code> , рджреНрд╡рд┐рдЖрдзрд╛рд░реА рд╡рд░реНрдгрдорд╛рд▓рд╛ред  рд╣рдореЗрдВ 2 рдорд╛рд╕реНрдХ <code>1001, 01</code> рдФрд░ <code>0110, 10</code> рдорд┐рд▓рддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">   a 1001 01 - 0  01 - 0  01 - 1 </code> </pre> <br><pre> <code class="plaintext hljs">   b 0110 10 - 0  10 - 1  10 - 1 </code> </pre> <br><p>  рд╣рдореЗрдВ рд╕рд░рдгреА [0, 1, 2] рдорд┐рд▓рддреА рд╣реИ - рдпрд╣ рд▓рдЧрднрдЧ рд╕рд╣реА рдЙрддреНрддрд░ рд╣реИред  рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЕрдХреНрд╖рд░ рдХреЗ рд▓рд┐рдП, рдореИрдЪреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗрд╡рд▓ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдмрд╛рдЗрдирд░реА рд╕реБрдИ рдФрд░ рд╕рднреА рд╣реИрд╕реНрдЯреИрдХ рд╕рдмреНрд╕рдЯреНрд░рд┐рдВрдЧреНрд╕ рдХрд╛ рд╕реНрдХреЗрд▓рд░ рдЙрддреНрдкрд╛рдж рд╣реИред  рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдПрдХ рддреЗрдЬреА рд╕реЗ рдлреВрд░рд┐рдпрд░ рд░реВрдкрд╛рдВрддрд░рдг рд╣реИ! </p><br><p>  рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ: рдПрдлрдПрдлрдЯреА рдПрдХ рд╕рдордп <em>рдУ (рдПрди рд▓реЙрдЧ рдПрди) рдореЗрдВ</em> рджреЛ <em>рдореАрдЯрд░</em> рдХреА рдмрд╣реБрдкрдж рдХреА рдбрд┐рдЧреНрд░реА рджреЗ рд╕рдХрддрд╛ рд╣реИ, рдмрд╢рд░реНрддреЗ рдХрд┐ рдЧреБрдгрд╛рдВрдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдкреНрд░рддрд┐ рдпреВрдирд┐рдЯ рд╕рдордп рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕рдВрдХрд▓реНрдк рд╕реНрдХреЗрд▓рд░ рдЙрддреНрдкрд╛рджреЛрдВ рдХреЗ рд╕рдорд╛рди рд╣реИрдВред  рдпрд╣ рдкрд╣рд▓реЗ рдмрд╣реБрдкрдж рдХреЗ рдЧреБрдгрд╛рдВрдХ рдХреЛ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдФрд░ рд╢реВрдиреНрдп рдХреА рдЖрд╡рд╢реНрдпрдХ рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рджреВрд╕рд░реЗ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдФрд░ рдкреВрд░рдХ рдХрд░рддрд╛ рд╣реИ, рдлрд┐рд░ рд╣рдо рдПрдХ рдмрд╛рдЗрдирд░реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд╕рднреА рд╕реНрдХреЗрд▓рд░ рдЙрддреНрдкрд╛рдж рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рджреВрд╕рд░реЗ рдХреЗ рд╕рднреА рд╕рдмрд╕реНрдЯреНрд░рд┐рдВрдЧ <em>рдУ (рдПрди рд▓реЙрдЧ рдПрди) рдореЗрдВ</em> - рдХрд┐рд╕реА рддрд░рд╣ рдХрд╛ рдЬрд╛рджреВ!  рд▓реЗрдХрд┐рди рдореЗрд░рд╛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░реЛ, рдпрд╣ рдмрд┐рд▓реНрдХреБрд▓ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╣реИ, рдФрд░ рдХрднреА-рдХрднреА рд▓реЛрдЧ рдРрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рд▓реЗрдХрд┐рди ClickHouse рдореЗрдВ рдирд╣реАрдВред  рд╣рдорд╛рд░реЗ рд▓рд┐рдП, рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ | рд╕рд┐рдЧреНрдорд╛ |  = 30 рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрдбрд╝рд╛ рд╣реИ, рдФрд░ рдПрдлрдПрдлрдЯреА рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕реБрдЦрдж рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдирд╣реАрдВ рд╣реИ рдпрд╛, рдЬреИрд╕рд╛ рдХрд┐ рд╡реЗ рдЖрдо рд▓реЛрдЧреЛрдВ рдореЗрдВ рдХрд╣рддреЗ рд╣реИрдВ, "рдирд┐рд░рдВрддрд░ рдмрдбрд╝рд╛ рд╣реИред" </p><br><p>  рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдЕрдиреНрдп рдореИрдЯреНрд░рд┐рдХреНрд╕ рдХреЛ рджреЗрдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рд╣рдо рдЬреИрд╡ рд╕реВрдЪрдирд╛ рд╡рд┐рдЬреНрдЮрд╛рди рдХреЗ рд▓рд┐рдП рдЧрдП, рдЬрд╣рд╛рдВ рд▓реЛрдЧ рдПрди-рдЧреНрд░рд╛рдо рджреВрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдо рд╕рднреА рдПрди-рдЧреНрд░рд╛рдо рдШрд╛рд╕ рдФрд░ рд╕реБрдИ рд▓реЗрддреЗ рд╣реИрдВ, рдЗрди рдПрди-рдЧреНрд░рд╛рдо рдХреЗ рд╕рд╛рде 2 рдорд▓реНрдЯреАрд╕реЗрдЯреНрд╕ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рдлрд┐рд░ рд╣рдо рд╕рдордорд┐рдд рдЕрдВрддрд░ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдПрди-рдЧреНрд░рд╛рдо рдХреЗ рд╕рд╛рде рджреЛ рдорд▓реНрдЯреАрд╕рд┐рд╕ рдХреЗ рдХрд╛рд░реНрдбрд┐рдирд┐рдЯреА рдХреЗ рдпреЛрдЧ рд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд╣рдореЗрдВ 0 рд╕реЗ 1 рддрдХ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдорд┐рд▓рддреА рд╣реИ - 0 рдХреЗ рдХрд░реАрдм, рд░реЗрдЦрд╛рдПрдВ рд╕рдорд╛рди рд╣реИрдВред  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ <em>n = 4</em> : </p><br><pre> <code class="plaintext hljs">abcda тЖТ {abcd, bcda}; Size = 2 bcdab тЖТ {bcda, cdab}; Size = 2         . |{abcd, cdab}| / (2 + 2) = 0.5</code> </pre> <br><p>  рдирддреАрдЬрддрди, рд╣рдордиреЗ 4-рдЧреНрд░рд╛рдо рдХреА рджреВрд░реА рдмрдирд╛рдИ рдФрд░ рд╡рд╣рд╛рдВ рдПрд╕рдПрд╕рдИ рд╕реЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдЪрд┐рдкрдХрд╛ рджрд┐рдпрд╛, рдФрд░ рд╣рдордиреЗ рдбрдмрд▓-рдмрд╛рдЗрдЯ crc32 рд╣реИрд╢ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдереЛрдбрд╝рд╛ рдХрдордЬреЛрд░ рдХрд░ рджрд┐рдпрд╛ред </p><br><p><img src="https://habrastorage.org/webt/ad/36/uk/ad36ukzmrspftbjxxwbc3djljv4.png"><br></p><br><p>  <a href="">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА</a> рдЬрд╛рдБрдЪ рдХрд░реЗрдВред  рд╕рд╛рд╡рдзрд╛рдиреА: рд╕рдВрдХрд▓рдХ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рдореНрдореЛрд╣рдХ рдФрд░ рдЕрдиреБрдХреВрд▓рд┐рдд рдХреЛрдбред </p><br><p>  рдореИрдВ рдЖрдкрдХреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ ASCII рдФрд░ рд░реВрд╕реА рдХреЛрдб рдмрд┐рдВрджреБрдУрдВ рдХреЗ рд▓рд┐рдП рдирд┐рдЪрд▓реЗ рдорд╛рдорд▓реЗ рдХреЛ рдХрд╛рд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП <a href="">рдЧрдВрджреЗ рд╣реИрдХ рдкрд░</a> рдзреНрдпрд╛рди рджреЗрдВред </p><br><p>  - <code>ngramDistance(haystack, needle)</code> - 0 рд╕реЗ 1 рддрдХ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рджреЗрддрд╛ рд╣реИ;  рдХрд░реАрдм 0, рдЕрдзрд┐рдХ рд▓рд╛рдЗрдиреЗрдВ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рдорд╛рди рд╣реИрдВред <br>  -UTF8, -CaseInsensitive, -CaseInsensitiveUTF8 (рд░реВрд╕рд┐рдпреЛрдВ рдФрд░ ASCII рдХреЗ рд▓рд┐рдП рдЧрдВрджрд╛ рд╣реИрдХ)ред </p><br><p>  рд╣рд╛рдЗрдкрд░рд╕реНрдХреИрди рдЕрднреА рднреА рдЦрдбрд╝рд╛ рдирд╣реАрдВ рд╣реИ - рдЗрд╕рдХреА рдЕрдиреБрдорд╛рдирд┐рдд рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИ: рдЖрдк рдЙрди рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд▓реЗрд╡реЗрдВрд╕рд╣рд╛рдЗрдЯ рдХреА рдирд┐рд░рдВрддрд░ рджреВрд░реА рд╕реЗ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреА рддрд░рд╣ рджрд┐рдЦрддреА рд╣реИрдВред  рдПрдХ <em>рджреВрд░реА + 1</em> рдСрдЯреЛрдореЗрдЯрди рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдЪрд░рд┐рддреНрд░ рдХреЛ рд╣рдЯрд╛рдиреЗ, рдмрджрд▓рдиреЗ рдпрд╛ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рджреНрд╡рд╛рд░рд╛ рдкрд░рд╕реНрдкрд░ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ "рдареАрдХ", рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд┐ рдХреНрдпрд╛ рдПрдХ рдСрдЯреЛрдореЗрдЯрди рдПрдХ рд╡рд┐рд╢реЗрд╖ рд▓рд╛рдЗрди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред  ClickHouse рдореЗрдВ, рд╣рдордиреЗ рдЙрдиреНрд╣реЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд╛рдореЛрдВ рдХреЗ рддрд╣рдд рд▓рд╛рдЧреВ рдХрд┐рдпрд╛: </p><br><p>  - <code>multiFuzzyMatchAny(haystack, distance, [n_1, ..., n_k])</code> - рдорд▓реНрдЯреАрдорд╛рдЪреИрдиреА рдХреЗ рд╕рдорд╛рди, рдХреЗрд╡рд▓ рджреВрд░реА рдХреЗ рд╕рд╛рдеред <br>  - <code>multiFuzzyMatchAnyIndex(haystack, distance, [n_1, ..., n_k])</code> - рдХреЗрд╡рд▓ рджреВрд░реА рдХреЗ рд╕рд╛рде multiMatchAnyIndex рдХреЗ рд╕рдорд╛рдиред </p><br><p>  рдмрдврд╝рддреА <em>рджреВрд░реА рдХреЗ</em> рд╕рд╛рде <em>,</em> рдЧрддрд┐ рдмрд╣реБрдд рдХрдо рд╣реЛрдиреЗ рд▓рдЧрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рднреА рдХрд╛рдлреА рд╕рднреНрдп рд╕реНрддрд░ рдкрд░ рдмрдиреА рд╣реБрдИ рд╣реИред </p><br><p>  рдЦреЛрдЬ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ рдФрд░ UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░реЗрдВред  рдХрд╛рдлреА рджрд┐рд▓рдЪрд╕реНрдк рдмрд╛рддреЗрдВ рднреА рд╣реБрдИрдВред </p><br><h2 id="obrabotka-utf-8-strok">  UTF-8 рд▓рд╛рдЗрди рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг </h2><br><p>  рдореИрдВ рдорд╛рдирддрд╛ рд╣реВрдВ рдХрд┐ UTF-8 рдПрдирдХреЛрдбреЗрдб рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдореЗрдВ рднреЛрд▓реЗ-рднрд╛рд▓реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рдЫрдд рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рддреЛрдбрд╝рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдерд╛ред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ SIMD рдХреЛ рдкреЗрдВрдЪ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдерд╛ред  рдореИрдВ рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИ рдкрд░ рдХреБрдЫ рд╡рд┐рдЪрд╛рд░ рд╕рд╛рдЭрд╛ рдХрд░реВрдВрдЧрд╛ред </p><br><p>  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рд╡реИрдз UTF-8 рдЕрдиреБрдХреНрд░рдо рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/iu/xn/zu/iuxnzucrcetohvgsxb7ozohxwws.png"><br></p><br><p>  рдЖрдЗрдП рдкрд╣рд▓реЗ рдмрд╛рдЗрдЯ рджреНрд╡рд╛рд░рд╛ рдХреЛрдб рдмрд┐рдВрджреБ рдХреА рд▓рдВрдмрд╛рдИ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдпрд╣ рд╡рд╣ рдЬрдЧрд╣ рд╣реИ рдЬрд╣рд╛рдБ рдмрд┐рдЯ рдЬрд╛рджреВ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдлрд┐рд░ рд╕реЗ рд╣рдо рдХреБрдЫ рдЧреБрдг рд▓рд┐рдЦрддреЗ рд╣реИрдВ: </p><br><p>  - 0xC рдкрд░ рд╢реБрд░реВ <em>рдФрд░ 0xD</em> рдкрд░ 2 рдмрд╛рдЗрдЯреНрд╕ рд╣реИрдВ <br>  - 0xC2 = 11 <u>0</u> 00010 <br>  - 0xDF = 11 <u>0</u> 11111 <br>  - 0xE0 = 111 <u>0</u> 0000 <br>  - 0xF4 = 1111 <u>0</u> 100, 0xF4 рд╕реЗ рдЖрдЧреЗ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ 0xF8 рдерд╛, рддреЛ рдПрдХ рдЕрд▓рдЧ рдХрд╣рд╛рдиреА рд╣реЛрдЧреА <br>  - рдЙрддреНрддрд░ 7 рдкрд╣рд▓реЗ рд╢реВрдиреНрдп рд╕реЗ рдЕрдВрдд рдХреА рд╕реНрдерд┐рддрд┐, рдпрджрд┐ рдпрд╣ ASCII рд╡рд░реНрдг рдирд╣реАрдВ рд╣реИ </p><br><p>  рд╣рдо рд▓рдВрдмрд╛рдИ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seqLength</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> UInt8 first_octet)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (first_octet &lt; <span class="hljs-number"><span class="hljs-number">0x80</span></span>u) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> first_zero = bitScanReverse(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;UInt8&gt;(~first_octet)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> - first_zero; }</code> </pre> <br><p>  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реНрдЯреЙрдХ рдирд┐рд░реНрджреЗрд╢ рд╣реИрдВ рдЬреЛ рд╢реВрдиреНрдп рдмрд┐рдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреА рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="cpp hljs">f = __builtin_clz(val) <span class="hljs-comment"><span class="hljs-comment">// (bsrl,     ) f(2) = 30, f(8) = 28, f(7) = 29</span></span></code> </pre> <br><p>  рдЧрдгрдирд╛ рдХрд░реЗрдВ </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bitScanReverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> - __builtin_clz(x); }</code> </pre> <br><p>  рдЖрдЗрдП SIMD рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЛрдб рдмрд┐рдВрджреБрдУрдВ рджреНрд╡рд╛рд░рд╛ UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рд▓рдВрдмрд╛рдИ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдЯ рдХреЛ рдПрдХ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦреЗрдВ рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЧреБрдгреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ: </p><br><p>  - 0xBF = -65 <br>  - 0x80 = -128 <br>  - 0xC2 = -62 <br>  - 0x7F = 127 <br>  - рд╕рднреА рдкреНрд░рдердо рдмрд╛рдЗрдЯреНрд╕ [0xC2, 0x7F] рдореЗрдВ рд╣реИрдВ <br>  - рд╕рднреА рдЧреИрд░-рдкреНрд░рдердо рдмрд╛рдЗрдЯреНрд╕ [0x80, 0xBF] рдореЗрдВ рд╣реИрдВ </p><br><p>  рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдЯ рдХреА рддреБрд▓рдирд╛ -65 рд╕реЗ рдХрд░реЗрдВ рдФрд░, рдпрджрд┐ рдпрд╣ рдЗрд╕ рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рдПрдХ рдЬреЛрдбрд╝реЗрдВред  рдпрджрд┐ рд╣рдо SIMD рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░реАрдо рд╕реЗ 16 рдмрд╛рдЗрдЯреНрд╕ рдХрд╛ рд╕рд╛рдорд╛рдиреНрдп рднрд╛рд░ рд╣реИред  рдлрд┐рд░ рдПрдХ рдмрд╛рдЗрдЯ рддреБрд▓рдирд╛ рд╣реИ, рдЬреЛ рдПрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкрд░рд┐рдгрд╛рдо рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдмрд╛рдЗрдЯ 0xFF рджреЗрдЧрд╛, рдФрд░ рдПрдХ рдирдХрд╛рд░рд╛рддреНрдордХ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ - 0x00ред  рдлрд┐рд░ <code>pmovmskb</code> рдирд┐рд░реНрджреЗрд╢, рдЬреЛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдЯ рдХреЗ рдЙрдЪреНрдЪ рдмрд┐рдЯреНрд╕ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдЧрд╛ред  рдлрд┐рд░ рдЕрдВрдбрд░рд╕реНрдХреЛрд░ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝ рдЬрд╛рддреА рд╣реИ, рд╣рдо <code>popcnt</code> SSE4 рдирд┐рд░реНрджреЗрд╢ рдХреЗ рд▓рд┐рдП рдЖрдВрддрд░рд┐рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреА рдпреЛрдЬрдирд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреНрд╡рд╛рд░рд╛ рд╕реНрдкрд╖реНрдЯ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/gn/mh/q5/gnmhq5lwynwpkdmqe2k3xsowxfs.png"><br></p><br><p>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЕрдкрдШрдЯрди рдХреЗ рд╕рд╛рде, рдкреНрд░рддрд┐ рдХреЛрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг 1.5 рдЬреАрдмреА / рдПрд╕ рд╣реЛрдЧрд╛ред </p><br><p>  рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><p>  - <code>lengthUTF8(string)</code> - рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдПрдиреНрдХреЛрдбреЗрдб UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рд▓рдВрдмрд╛рдИ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдХреБрдЫ рдХреЛ рдЕрдорд╛рдиреНрдп рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рдлреЗрдВрдХрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рд╣рдо рдФрд░ рдЖрдЧреЗ рдмрдврд╝ рдЧрдП рдХреНрдпреЛрдВрдХрд┐ рд╣рдо UTF-8 рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдФрд░ рднреА рдЕрдзрд┐рдХ рдХрд╛рд░реНрдп рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡реИрдз рдпреВрдЯреАрдПрдл -8 рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреА рд╡реИрдзрддрд╛ рдФрд░ рдХрд╛рд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪред </p><br><p>  рд╡реИрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ ClickHouse рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/cyb70289/utf8/</a> рд▓рд┐рдпрд╛, (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмрд╕ рдкреВрдВрдЫ рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛) рдФрд░ рднреЛрд▓реА рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рд▓рд┐рдП 900 рдПрдордмреА / рдПрд╕ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ 1.22 рдЬреАрдмреА / рдПрд╕ рдХреА рдЧрддрд┐ рдкреНрд░рд╛рдкреНрдд рдХреАред ред  рдореИрдВ рд╕реНрд╡рдпрдВ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рдпрд╣ рдзрд╛рд░рдгрд╛ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рдЬрдЯрд┐рд▓ рд╣реИред </p><br><p>  <code>isValidUTF8(string)</code> - 1 рд░рд┐рдЯрд░реНрди рджреЗрддрд╛ рд╣реИ рдпрджрд┐ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕рд╣реА рдврдВрдЧ рд╕реЗ UTF-8 рдХреЗ рд╕рд╛рде рдПрдирдХреЛрдбреЗрдб рд╣реИ, рдЕрдиреНрдпрдерд╛ 0ред <br>  - <code>toValidUTF8(string)</code> - рдЕрдорд╛рдиреНрдп UTF-8 рд╡рд░реНрдгреЛрдВ рдХреЛ D (U + FFFD) рд╡рд░реНрдг рд╕реЗ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред  рд╕рднреА рд▓рдЧрд╛рддрд╛рд░ рдЕрдорд╛рдиреНрдп рд╡рд░реНрдг рдПрдХ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЪрд░рд┐рддреНрд░ рдореЗрдВ рдврд╣ рдЬрд╛рддреЗ рд╣реИрдВред  рдХреЛрдИ рд░реЙрдХреЗрдЯ рд╕рд╛рдЗрдВрд╕ рдирд╣реАрдВред </p><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, UTF-8 рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ, рд╕реБрдЦрдж-рд╕реНрдерд┐рд░ рд╕реНрдерд┐рд░ рдпреЛрдЬрдирд╛ рдХреЗ рдХрд╛рд░рдг, рдРрд╕реА рдЪреАрдЬрд╝ рдХреЗ рд╕рд╛рде рдЖрдирд╛ рд╣рдореЗрд╢рд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><h2 id="chto-dalshe">  рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ? </h2><br><p>  рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛ рджреВрдВ рдХрд┐ рдпрд╣ рдореЗрд░реА рдереАрд╕рд┐рд╕ рдереАред  рдмреЗрд╢рдХ, рдореИрдВрдиреЗ рдЙрд╕реЗ 10/10 рдХреЗ рд▓рд┐рдП рдмрдЪрд╛рд╡ рдХрд┐рдпрд╛ред  рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрд╕рдХреЗ рд╕рд╛рде рд╣рд╛рдИрд▓реЛрдб + рд╕рд╛рдЗрдмреЗрд░рд┐рдпрд╛ рдЧрдП рдереЗ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореБрдЭреЗ рдРрд╕рд╛ рд▓рдЧ рд░рд╣рд╛ рдерд╛ рдХрд┐ рд╡рд╣ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рдХрдо рджрд┐рд▓рдЪрд╕реНрдкреА рдереА)ред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд╕реНрддреБрддрд┐ рджреЗрдЦреЗрдВ</a> ред  рдореБрдЭреЗ рдпрд╣ рдкрд╕рдВрдж рдЖрдпрд╛ рдХрд┐ рдереАрд╕рд┐рд╕ рдХрд╛ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╣рд┐рд╕реНрд╕рд╛ рдХрд╛рдлреА рджрд┐рд▓рдЪрд╕реНрдк рд╢реЛрдз рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд╣реБрдЖред  рдФрд░ рдпрд╣рд╛рдБ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд┐рдкреНрд▓реЛрдорд╛</a> рд╣реА рд╣реИред  рдЗрд╕рдХреЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдЯрд╛рдЗрдкреЛрд╕ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рднреА рдЗрд╕реЗ рдирд╣реАрдВ рдкрдврд╝рддрд╛ рд╣реИред  :) </p><br><p>  рдбрд┐рдкреНрд▓реЛрдорд╛ рдХреА рддреИрдпрд╛рд░реА рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВрдиреЗ рдЗрд╕реА рддрд░рд╣ рдХреЗ рдЕрдиреНрдп рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдПрдХ рд╕рдореВрд╣ рдХрд┐рдпрд╛ (рд▓рд┐рдВрдХ рдкреВрд▓ рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдиреЗрддреГрддреНрд╡ рдХрд░рддрд╛ рд╣реИ): </p><br><p>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">2 рдмрд╛рд░ рдЕрдиреБрдХреВрд▓рд┐рдд рдХреЙрдХрдЯреИрдЯ рдлрд╝рдВрдХреНрд╢рди</a> ; <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЕрдЬрдЧрд░ рдкреНрд░рд╛рд░реВрдк рдмрдирд╛рдпрд╛</a> ; <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддреНрд╡рд░рд┐рдд LZ4 4% рд╕реЗ</a> ; <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореИрдВрдиреЗ ARMD рдФрд░ PPC64LE рдХреЗ рд▓рд┐рдП SIMD рдкрд░ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдХрд╛рдо рдХрд┐рдпрд╛</a> ; <br>  - рдФрд░ рдЙрдиреНрд╣реЛрдВрдиреЗ рдПрдлрд╕реАрдПрд╕ рдХреЗ рдХреБрдЫ рдЫрд╛рддреНрд░реЛрдВ рдХреЛ рдХреНрд▓рд┐рдХрд╣рд╛рдЙрд╕ рдореЗрдВ рдбрд┐рдкреНрд▓реЛрдорд╛ рдХреЗ рд╕рд╛рде рд╕рд▓рд╛рд╣ рджреАред </p><br><p>  рдЕрдВрдд рдореЗрдВ, рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐, рдореЗрд░реЗ рдЕрдиреБрднрд╡ рдореЗрдВ, <del>  рд╣рд░ рдорд╣реАрдиреЗ рд▓реЗрд╕рд╛ рдиреЗ рдореБрдЭреЗ рдЬрдк рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА </del>  рд╣рд╛рдИ-рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП ClickHouse рд╕рдмрд╕реЗ рд╕реБрдЦрдж рдкреНрд░рдгрд╛рд▓реА рд╣реИ, рдЬрд╣рд╛рдВ рдкреНрд░рд▓реЗрдЦрди, рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ, рдЙрддреНрдХреГрд╖реНрдЯ рдбреЗрд╡рд▓рдкрд░ рдФрд░ рдбреЗрдкреНрд╕ рд╕рдорд░реНрдерди рд╣реИрдВред  ClickHouse рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХрдорд╛рд▓ рд╣реИред  JSON рд╕реНрд╡рд░реВрдкреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рд╕реЗ рдердХ рдЧрдП?  рд▓реЗрд╕рд╛ рдореЗрдВ рдЖрдУ рдФрд░ рдХрд┐рд╕реА рднреА рд╕реНрддрд░ рдХреЗ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдкреВрдЫреЗрдВ - рд╡рд╣ рдЗрд╕реЗ рдЖрдкрдХреЗ рд▓рд┐рдП рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛, рдФрд░ рд╕рдкреНрддрд╛рд╣рд╛рдВрдд рдореЗрдВ рдЖрдкрдХреЛ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рд╕реЗ рдмрд╣реБрдд рдЦреБрд╢реА рдорд┐рд▓реЗрдЧреАред </p><br><p>  рд▓реЗрдХрд┐рди ClickHouse рдФрд░ рдЗрд╕рдХреЗ рдбрд┐рдЬрд╛рдЗрди рдХреА рд╕рднреА рдЙрдкрд▓рдмреНрдзрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде, рдпрд╣ рд╢рд╛рдпрдж рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╣реИред  рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЙрдирдореЗрдВ рдирд╣реАрдВред </p><br><p>  рдореИрдВ рдПрдлрд╕реАрдПрд╕ рдореЗрдВ 4 рд╕рд╛рд▓ рдХреЗ рд╕реНрдирд╛рддрдХ рдЕрдзреНрдпрдпрди рд╕реЗ рдЧреБрдЬрд░рд╛, рдЬреВрди рдореЗрдВ рдореИрдВрдиреЗ рдПрдЪрдПрд╕рдИ рд╕реЗ рд╕рдореНрдорд╛рди рдХреЗ рд╕рд╛рде рд╕реНрдирд╛рддрдХ рдХреА рдЙрдкрд╛рдзрд┐ рдкреНрд░рд╛рдкреНрдд рдХреА, рдбреЗрдврд╝ рд╕рд╛рд▓ рдпрд╛рдВрдбреЗрдХреНрд╕ рдореЗрдВ рдПрдХ рднрдпрд╛рдирдХ рдЯреАрдо рдореЗрдВ рдХрд╛рдо рдХрд┐рдпрд╛, рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдкрдВрдк рдХрд┐рдпрд╛ред  рдЗрд╕ рд╕рдордп рдХреБрд▓ рдЕрдиреБрднрд╡ рдХреЗ рдмрд┐рдирд╛ <del>  рдФрд░ рд▓реЛрд╣рд╛ </del>  рдкреЛрд╕реНрдЯ рдореЗрдВ рд▓рд┐рдЦрд╛ рдХреБрдЫ рднреА рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реЛрдЧрд╛ред  рдпрджрд┐ рдЖрдк рдЗрд╕рд╕реЗ рдЕрдзрд┐рдХрддрдо рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рдПрдлрд╕реАрдПрди рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИред  рдПрдлрд╕реАрдПрди рдкрд░ рдореЗрд░реЗ рдордЬрд╛рдХрд┐рдпрд╛ рд╕рд╛рд╣рд╕рд┐рдХ рдХрд╛рд░реНрдп рдореЗрдВ рдмреИрдардХ рдХреЗ рд▓рд┐рдП рд╡рд╛рдирд╛ рдкреБрдЬреЗрд░реЗрд╡рд╕реНрдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдЖрдЗрд╡рди_рдкреВрдЬреНрдпрд░реЗрд╡рд╕реНрдХреА</a> , рдЗрдЧреНрдирд╛рдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдХреЛрд▓реЗрд╕реНрдирд┐рдХреЗрдВрдХреЛ</a> , рдЧреНрд▓реАрдм <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдЗрд╡рд╕реНрдЯреНрд░реЛрдкреЛрд╡</a> , рдореИрдХреНрд╕ рдмрдмреЗрдВрдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдореИрдХреНрд╕рд┐рдо_рдмреЗрдВрдХреЛ</a> рдХреЛ рдзрдиреНрдпрд╡рд╛рджред  рдФрд░ рдЙрди рд╕рднреА рд╢рд┐рдХреНрд╖рдХреЛрдВ рдХрд╛ рднреА рдзрдиреНрдпрд╡рд╛рдж рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рдореБрдЭреЗ рдХреБрдЫ рд╕рд┐рдЦрд╛рдпрд╛ред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi466183/">https://habr.com/ru/post/hi466183/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi466165/index.html">рдЖрд░реНрдЯрд┐рдлрд┐рд╢рд┐рдпрд▓ рдЗрдВрдЯреЗрд▓рд┐рдЬреЗрдВрд╕ рдХреИрд╕реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдореИрдиреЗрдЬ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi466169/index.html">JetBrains рд╕реЗ рдХрд╛рдордХрд╛рдЬреА рдЫрд╛рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдкреЗрд╢рдХрд╢</a></li>
<li><a href="../hi466171/index.html">JUG.EKB рдХреЗ рд▓рд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдкрд╛рдВрдЪ рдХрд╛рд░рдг</a></li>
<li><a href="../hi466179/index.html">рд╕реБрдзрд╛рд░: рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдФрд░ JSONSchema - рдЕрдзрд┐рдХрддрдо рд▓рдЪреАрд▓рд╛рдкрди</a></li>
<li><a href="../hi466181/index.html">рд╕реА (рд╕реА рдПрдкреАрдЖрдИ) рд╕реЗ рдЕрдЬрдЧрд░</a></li>
<li><a href="../hi466187/index.html">рдпреВрдирд┐рдЯреА 3 рдбреА рдХреЗ рд▓рд┐рдП рд╡рд┐рдЬреБрдЕрд▓ рд▓реЙрдЬрд┐рдХ рдПрдбрд┐рдЯрд░ред рднрд╛рдЧ реи</a></li>
<li><a href="../hi466191/index.html">рд╕рдВрдпреБрдХреНрдд рд░рд╛рдЬреНрдп рдЕрдореЗрд░рд┐рдХрд╛ рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рддрдЯрд╕реНрдерддрд╛ рдХреА рд▓рдбрд╝рд╛рдИ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореБрдЦреНрдп рдмрд╛рдд рдШрдЯрдирд╛рдУрдВ рдХреА рдХрд╛рд▓рдХреНрд░рдо рдФрд░ рдорд╛рдорд▓реЛрдВ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рд╣реИ</a></li>
<li><a href="../hi466193/index.html">рдЖрд░рдПрд╕рдПрд╕ рдлрд╝реАрдб рд╕реЗ рдХрд╕реНрдЯрдо MailChimp рдСрдЯреЛ-рдлреАрдб</a></li>
<li><a href="../hi466195/index.html">рдкреАрд╡реАрдПрд╕-рд╕реНрдЯреВрдбрд┐рдпреЛ 7.04</a></li>
<li><a href="../hi466197/index.html">рдкреАрд╡реАрдПрд╕-рд╕реНрдЯреВрдбрд┐рдпреЛ 7.04</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>