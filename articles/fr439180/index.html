<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¸ğŸ¼ ğŸ‘©ğŸ½â€ğŸ­ ğŸŒ´ DÃ©fi Rekko ğŸ™ğŸ» ğŸ™ğŸ¿ ğŸ¤™ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous lanÃ§ons le Rekko Challenge 2019 , un concours d'apprentissage automatique de la salle de cinÃ©ma en ligne Okko . 


 Nous vous suggÃ©r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DÃ©fi Rekko</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/okko/blog/439180/"><p><img src="https://habrastorage.org/webt/nn/ry/a8/nnrya8zeeuwrczokyqm6dq44mcw.jpeg" alt="DÃ©fi Rekko"></p><br><p>  Aujourd'hui, nous lanÃ§ons le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rekko Challenge 2019</a> , un concours d'apprentissage automatique de la salle de cinÃ©ma en ligne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Okko</a> . </p><br><p>  Nous vous suggÃ©rons de construire un systÃ¨me de recommandations sur les donnÃ©es rÃ©elles de l'un des plus grands cinÃ©mas en ligne russes.  Nous sommes sÃ»rs que cette tÃ¢che sera intÃ©ressante pour les dÃ©butants et les spÃ©cialistes expÃ©rimentÃ©s.  Nous avons essayÃ© de garder le maximum de crÃ©ativitÃ©, sans vous surcharger avec des jeux de donnÃ©es gigaoctets avec des centaines de fonctionnalitÃ©s prÃ©-calculÃ©es. </p><br><p>  En savoir plus sur Okko, la tÃ¢che, les donnÃ©es, les prix et les rÃ¨gles - ci-dessous. </p><a name="habracut"></a><br><h2 id="zadacha">  DÃ©fi </h2><br><p>  Vous avez accÃ¨s aux donnÃ©es de toutes les vues, classements et ajouts aux films et sÃ©ries Â«mÃ©morisÃ©sÂ» par l'utilisateur pendant une pÃ©riode de N jours (N&gt; 60), ainsi qu'Ã  toutes les mÃ©ta-informations sur le contenu.  Il est nÃ©cessaire de prÃ©voir quels films et sÃ©ries l'utilisateur achÃ¨tera ou regardera par abonnement au cours des 60 prochains jours. </p><br><p>  Dans la section suivante, nous avons essayÃ© de dÃ©crire le minimum de ce que vous devez savoir sur les cinÃ©mas en ligne afin de comprendre rapidement les donnÃ©es et de commencer Ã  les analyser.  Si ces informations ne vous concernent pas, vous pouvez immÃ©diatement procÃ©der Ã  la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description des donnÃ©es</a> . </p><br><h2 id="o-nashem-servise">  Ã€ propos de notre service </h2><br><p>  Si un utilisateur veut regarder lÃ©galement un film sur Internet, il a trois moyens principaux. </p><br><p> La premiÃ¨re consiste Ã  regarder gratuitement et Ã  interrompre constamment les publicitÃ©s ( <strong>AVOD</strong> , Advertising Video On Demand).  La seconde consiste Ã  acheter un film pour votre collection ou Ã  le louer ( <strong>TVOD</strong> , Transactional Video On Demand).  La troisiÃ¨me consiste Ã  s'abonner pour une certaine pÃ©riode ( <strong>SVOD</strong> , Subscription Video On Demand). </p><br><p>  Okko ne fonctionne que sur les modÃ¨les TVOD et SVOD.  Il n'y a aucune publicitÃ© dans notre service. </p><br><p>  Au total, le service compte un peu plus de 10 000 films et sÃ©ries, environ 6 000 d'entre eux sont disponibles par abonnement, le reste est uniquement Ã  l'achat ou Ã  la location.  Dans le mÃªme temps, presque tous les contenus d'abonnement peuvent Ãªtre achetÃ©s.  Une exception est, par exemple, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã©missions de tÃ©lÃ©vision Amediateka</a> , elles ne peuvent Ãªtre regardÃ©es que par abonnement. </p><br><p><img src="https://habrastorage.org/webt/-b/le/7l/-ble7lmcuyxxnigbiussw59adng.png" alt="RÃ©partition du contenu par modÃ¨le de consommation"></p><br><p>  Selon le modÃ¨le sur lequel le film sera disponible, cela dÃ©pend en grande partie du studio qui dÃ©tient les droits.  Ils concluent un contrat avec les cinÃ©mas en ligne, qui stipule quand et pour quels droits le film sera disponible.  En rÃ¨gle gÃ©nÃ©rale, les conditions sont les mÃªmes pour tous les acteurs du marchÃ©, mais parfois les studios font des concessions Ã  certains cinÃ©mas ou offrent des conditions plus favorables pour plus d'argent.  Il y a donc des exclusivitÃ©s. </p><br><p>  Par exemple, les principales innovations mondiales n'entrent pas dans l'abonnement immÃ©diatement, mais seulement 2 Ã  3 mois aprÃ¨s leur apparition dans le service.  De plus, dans les premiÃ¨res semaines, ils ne peuvent mÃªme pas Ãªtre louÃ©s, seule la possibilitÃ© d'acheter pour toujours est disponible.  Mais les films russes peuvent Ãªtre disponibles par abonnement immÃ©diatement aprÃ¨s la sortie et parfois mÃªme simultanÃ©ment avec le dÃ©but de la location dans les cinÃ©mas hors ligne. </p><br><p>  Ã€ l'expiration du contrat, le film devient indisponible - jusqu'Ã  la prolongation du contrat expirÃ© ou la conclusion d'un nouveau. </p><br><p><img src="https://habrastorage.org/webt/n3/vk/ua/n3vkual7jetrhk1l54zceb-c8ys.jpeg" alt="Exemple de carte de film inaccessible"></p><br><p>  Les pÃ©riodes d'absence de droits sur le contenu sont clairement visibles sur les graphiques du nombre de vues.  Ci-dessous, par exemple, un tableau du film "John Wick 2".  Tout d'abord, il peut sembler que le problÃ¨me s'est arrÃªtÃ© pendant quelques mois, mais non: les droits Ã©taient terminÃ©s. </p><br><p><img src="https://habrastorage.org/webt/h8/mc/0q/h8mc0qauuyz_a-qtu2shswrjyg0.png" alt="Graphique des vues du film &quot;John Wick 2&quot;"></p><br><p>  Le pic le plus Ã©levÃ© du graphique ci-dessus (marquÃ© d'une ligne verticale) coÃ¯ncide avec la date Ã  laquelle le film a Ã©tÃ© ajoutÃ© Ã  l'abonnement: il s'agit d'un comportement trÃ¨s caractÃ©ristique des nouveautÃ©s de haut niveau.  Notre service compte 12 abonnements: </p><br><ul><li>  Huit thÃ©matiques </li><li>  SÃ©rie tÃ©lÃ©visÃ©e Amediateka, </li><li>  SÃ©rie tÃ©lÃ©visÃ©e ABC, </li><li>  Films et sÃ©ries russes du service START, </li><li>  Films 4K. </li></ul><br><p>  Et deux forfaits d'abonnement: Optimal, qui comprend tous les abonnements thÃ©matiques, et Optimal + Amediateka. </p><br><p><img src="https://habrastorage.org/webt/iq/kn/6r/iqkn6rw39kfvmbza416dhpzllby.jpeg" alt="Interface d'abonnement"></p><br><p>  Les plus populaires, bien sÃ»r, sont les mÃ©ta-packages.  Parmi les abonnements thÃ©matiques, les utilisateurs prÃ©fÃ¨rent World Cinema et Our Cinema. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/7ce/c03/2b9/7cec032b96c763d3d8f03b11f9b4079e.jpg"></p><br><p>  Peu d'utilisateurs ne regardent des films que par abonnement, la plupart achÃ¨tent simplement des films ou achÃ¨tent en plus de l'abonnement. </p><br><p>  Le plus souvent, les utilisateurs choisissent d'acheter de nouveaux articles pour la location actuelle et les grandes premiÃ¨res de l'annÃ©e derniÃ¨re. </p><br><p>  La source d'achat la plus populaire dans l'application est la section Â«RecommandationsÂ», suivie de Â«RechercheÂ», Â«ActualitÃ©sÂ» et Â«CatalogueÂ».  Les utilisateurs achÃ¨tent une partie des films de Â«similairesÂ» et Â«mÃ©morisÃ©sÂ». </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/5c2/2f3/c37/5c22f3c37bebd0f74d64a4d87c21ecf7.jpg"></p><br><p>  L'un des principaux problÃ¨mes que nous combattons activement chez Okko est le problÃ¨me des utilisateurs qui choisissent le contenu.  Si vous regardez le graphique de la probabilitÃ© de faire un achat par rapport au temps que vous avez passÃ© dans le service (donnÃ©es de l'annÃ©e derniÃ¨re), il deviendra clair que les utilisateurs sont prÃªts Ã  choisir et Ã  acheter un film dans les 10 premiÃ¨res minutes, puis la probabilitÃ© d'achat diminue rapidement.  Dans le mÃªme temps, il reste une part assez importante d'utilisateurs qui passent dans le service d'une demi-heure Ã  une heure et ne peuvent pas choisir un contenu qui leur convient. </p><br><p>  10 minutes - pas tant que Ã§a.  Pendant ce temps, l'utilisateur, purement physiquement incapable d'Ã©tudier le catalogue en dÃ©tail et de sÃ©lectionner le contenu qu'il aime. </p><br><p>  C'est lÃ  qu'intervient Rekko, le systÃ¨me de recommandation interne pour le cinÃ©ma en ligne Okko.  Rekko opÃ¨re actuellement dans deux sections du service - Â«RecommandationsÂ» et Â«SimilaireÂ». </p><br><p><img src="https://habrastorage.org/webt/y8/yo/vw/y8yovw9ikla8v28e31bijkry4uw.jpeg" alt="Section de recommandation TV"></p><br><p><img src="https://habrastorage.org/webt/ai/dl/qh/aidlqhz32tslrxilfq_i0_-rebk.jpeg" alt="Similaire Ã  la tÃ©lÃ©vision"></p><br><p>  Pour Ã©valuer la satisfaction des utilisateurs avec le contenu, nous analysons le fait de l'achat, les vues par abonnement, le temps de visualisation, en ajoutant aux notes mÃ©morisÃ©es et aux notes des utilisateurs. </p><br><p>  L'Ã©chelle de notation Ã  Okko est reprÃ©sentÃ©e par cinq astÃ©risques avec des demi-divisions: elle prend des valeurs entiÃ¨res de 0 Ã  10. </p><br><p><img src="https://habrastorage.org/webt/s4/jh/kd/s4jhkdrp_7gqdtqek8b8ih3xfru.jpeg" alt="Interface d'Ã©valuation"></p><br><p>  L'utilisateur peut noter le film Ã  tout moment, indÃ©pendamment du fait de l'achat ou de la visualisation.  Le score peut Ãªtre modifiÃ© un nombre illimitÃ© de fois, mais ne peut pas Ãªtre annulÃ©. </p><br><p>  Vous pouvez "vous souvenir" d'un film Ã  tout moment, puis il apparaÃ®tra dans le "souvenir" du profil de l'utilisateur.  De la mÃªme maniÃ¨re, il peut Ãªtre retirÃ© de lÃ . </p><br><p><img src="https://habrastorage.org/webt/l-/_e/m9/l-_em9ml6klqs_8deogrbv7jzeo.jpeg" alt="Interface de stockage"></p><br><p><img src="https://habrastorage.org/webt/yo/a4/_h/yoa4_hap-jrswbxriwb608hc1wc.jpeg" alt="Films enregistrÃ©s dans le profil"></p><br><p>  Les travaux sur Rekko ont commencÃ© il y a exactement un an et Ã  l'heure actuelle, selon les tests A / B, cela nous a permis d'augmenter le nombre moyen d'achats de 4%, les revenus de transaction de 3%, la conversion en abonnement de 5% et les utilisateurs ont commencÃ© Ã  choisir des films 18% plus rapidement. . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/61f/339/900/61f3399001f3e4a0e9ee6312c419bef0.jpg"></p><br><h2 id="dannye">  Les donnÃ©es </h2><br><p>  Toutes les donnÃ©es, Ã  l'exception du temps de visualisation et des Ã©valuations, sont anonymisÃ©es ou dÃ©formÃ©es.  Le temps est exprimÃ© en unitÃ©s abstraites pour lesquelles la relation d'ordre et de distance est prÃ©servÃ©e. </p><br><h3 id="transactionscsv">  transactions.csv </h3><br><p>  Enregistrements de toutes les transactions et vues de contenu sur eux pendant la pÃ©riode de formation  La transaction consiste ici Ã  acheter un film pour toujours, soit en location, soit pour lancer la visualisation par abonnement. </p><br><div class="scrollable-table"><table><thead><tr><th>  element_uid </th><th>  user_uid </th><th>  mode_consommation </th><th>  ts </th><th>  regardÃ©_heure </th><th>  type_appareil </th><th>  fabricant_appareil </th></tr></thead><tbody><tr><td>  3336 </td><td>  5177 </td><td>  S </td><td>  44305181.2180206 </td><td>  4282 </td><td>  0 </td><td>  50 </td></tr><tr><td>  481 </td><td>  593316 </td><td>  S </td><td>  44305180.606027626 </td><td>  2989 </td><td>  0 </td><td>  11 </td></tr><tr><td>  4128 </td><td>  262355 </td><td>  S </td><td>  44305180.41444582 </td><td>  833 </td><td>  0 </td><td>  50 </td></tr></tbody></table></div><br><ul><li> <code>element_uid</code> - identifiant d'Ã©lÃ©ment </li><li>  <code>user_uid</code> - id utilisateur </li><li>  <code>consumption_mode</code> - type de consommation ( <code>P</code> - achat, <code>R</code> - location, <code>S</code> - vue par abonnement) </li><li>  <code>ts</code> - temps de transaction </li><li>  <code>watched_time</code> - le nombre de secondes regardÃ©es par l'utilisateur pendant cette transaction secondes </li><li>  <code>device_type</code> - type anonyme d'appareil Ã  partir duquel la transaction a Ã©tÃ© effectuÃ©e </li><li>  <code>device_manufacturer</code> - fabricant anonyme de l'appareil Ã  partir duquel la transaction a Ã©tÃ© effectuÃ©e </li></ul><br><p><img src="https://habrastorage.org/webt/tf/yj/zy/tfyjzy6svqhfspgca9kzlzmtwg8.png" alt="Distribution watched_time"></p><br><h3 id="ratingscsv">  ratings.csv </h3><br><p>  Informations sur les Ã©valuations des utilisateurs pour la pÃ©riode de formation.  Les informations sont agrÃ©gÃ©es, c'est-Ã -dire  si l'utilisateur a changÃ© sa note, seule la derniÃ¨re valeur sera prÃ©sentÃ©e dans le tableau. </p><br><div class="scrollable-table"><table><thead><tr><th>  user_uid </th><th>  element_uid </th><th>  note </th><th>  ts </th></tr></thead><tbody><tr><td>  571252 </td><td>  1364 </td><td>  10 </td><td>  44305174.26309871 </td></tr><tr><td>  63140 </td><td>  3037 </td><td>  10 </td><td>  44305139.28281821 </td></tr><tr><td>  443817 </td><td>  4363 </td><td>  8 </td><td>  44305136.20584908 </td></tr></tbody></table></div><br><ul><li>  <code>element_uid</code> - identifiant d'Ã©lÃ©ment </li><li>  <code>user_uid</code> - id utilisateur </li><li>  <code>rating</code> - <code>rating</code> dÃ©finie par l'utilisateur (de <code>0</code> Ã  <code>10</code> ) </li><li>  <code>ts</code> - temps de classement </li></ul><br><p><img src="https://habrastorage.org/webt/qc/eh/zm/qcehzmvinvz57efywfnga3eo67m.png" alt="RÃ©partition des notations"></p><br><h3 id="bookmarkscsv">  bookmarks.csv </h3><br><p>  Les faits que les utilisateurs ajoutent un film au "souvenir".  Les informations sont agrÃ©gÃ©es, c'est-Ã -dire  si l'utilisateur a supprimÃ© le film du "EnregistrÃ©", il n'y aura aucun enregistrement de l'ajouter lÃ  dans le tableau. </p><br><div class="scrollable-table"><table><thead><tr><th>  user_uid </th><th>  element_uid </th><th>  ts </th></tr></thead><tbody><tr><td>  301135 </td><td>  7185 </td><td>  44305161.30743926 </td></tr><tr><td>  301135 </td><td>  4083 </td><td>  44305160.01187332 </td></tr><tr><td>  301135 </td><td>  10158 </td><td>  44305157.74463292 </td></tr></tbody></table></div><br><ul><li>  <code>element_uid</code> - identifiant d'Ã©lÃ©ment </li><li>  <code>user_uid</code> - id utilisateur </li><li>  <code>ts</code> - il est temps d'ajouter le film au Â«souvenirÂ» </li></ul><br><h3 id="cataloguejson">  catalogue.json </h3><br><p>  MÃ©ta-informations sur tous les Ã©lÃ©ments recommandÃ©s: films, sÃ©ries et films en sÃ©rie. </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"1983"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"movie"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"availability"</span></span>: [<span class="hljs-string"><span class="hljs-string">"purchase"</span></span>, <span class="hljs-string"><span class="hljs-string">"rent"</span></span>, <span class="hljs-string"><span class="hljs-string">"subscription"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: <span class="hljs-number"><span class="hljs-number">140</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_1"</span></span>: <span class="hljs-number"><span class="hljs-number">1657223.396513469</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_2"</span></span>: <span class="hljs-number"><span class="hljs-number">0.7536096584</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_3"</span></span>: <span class="hljs-number"><span class="hljs-number">39</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_4"</span></span>: <span class="hljs-number"><span class="hljs-number">1.1194091265</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_5"</span></span>: <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"attributes"</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, ...] }, <span class="hljs-attr"><span class="hljs-attr">"2166"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"movie"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"availability"</span></span>: [<span class="hljs-string"><span class="hljs-string">"purchase"</span></span>, <span class="hljs-string"><span class="hljs-string">"rent"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: <span class="hljs-number"><span class="hljs-number">110</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_1"</span></span>: <span class="hljs-number"><span class="hljs-number">36764165.87817783</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_2"</span></span>: <span class="hljs-number"><span class="hljs-number">0.7360206399</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_3"</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_4"</span></span>: <span class="hljs-number"><span class="hljs-number">1.1386044027</span></span>, <span class="hljs-attr"><span class="hljs-attr">"feature_5"</span></span>: <span class="hljs-number"><span class="hljs-number">0.6547073468</span></span>, <span class="hljs-attr"><span class="hljs-attr">"attributes"</span></span>: [<span class="hljs-number"><span class="hljs-number">16738</span></span>, <span class="hljs-number"><span class="hljs-number">13697</span></span>, <span class="hljs-number"><span class="hljs-number">1066</span></span>, <span class="hljs-number"><span class="hljs-number">1089</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">5318</span></span>, <span class="hljs-number"><span class="hljs-number">308</span></span>, <span class="hljs-number"><span class="hljs-number">54</span></span>, <span class="hljs-number"><span class="hljs-number">170</span></span>, <span class="hljs-number"><span class="hljs-number">33</span></span>, ...] }, ... }</code> </pre> <br><ul><li>  <code>type</code> - prend les valeurs de <code>movie</code> , <code>multipart_movie</code> ou <code>series</code> </li><li>  <code>duration</code> - la durÃ©e en minutes, arrondie Ã  des dizaines (la durÃ©e de la sÃ©rie pour les sÃ©ries et les films en sÃ©rie) </li><li>  <code>availability</code> - droits disponibles sur le contenu (peut contenir les valeurs d' <code>purchase</code> , de <code>rent</code> et d' <code>subscription</code> ) </li><li>  <code>attributes</code> - un sac de quelques attributs anonymisÃ©s </li><li>  <code>feature_1..5</code> - cinq fonctionnalitÃ©s anonymes et matÃ©rielles anonymes </li></ul><br><p>  Les droits disponibles sont indiquÃ©s Ã  la fin de la formation et au dÃ©but du test. </p><br><p>  <strong>Important:</strong> dans json, les clÃ©s de dictionnaire ne peuvent Ãªtre que des chaÃ®nes, assurez-vous donc de les convertir en nombre si vous lisez les identificateurs dans les tableaux sous forme de nombres (faites-le pour Ã©conomiser de la mÃ©moire). </p><br><p><img src="https://habrastorage.org/webt/zc/2o/zj/zc2ozj5hiw-focmppfjvsb-pebi.png" alt="RÃ©partition des caractÃ©ristiques dans le catalogue"></p><br><h2 id="metrika">  MÃ©trique </h2><br><p>  En tant que mÃ©trique, nous utilisons la prÃ©cision moyenne moyenne (MAP) pour 20 Ã©lÃ©ments, mais lÃ©gÃ¨rement modifiÃ©e.  Pendant la pÃ©riode de test, l'utilisateur pourrait consommer moins de 20 films.  Si dans ce cas, nous considÃ©rons une MAP honnÃªte, la limite supÃ©rieure de la mÃ©trique sera infÃ©rieure Ã  un et les valeurs seront petites.  Par consÃ©quent, si l'utilisateur a consommÃ© moins de 20 Ã©lÃ©ments, nous normalisons par leur nombre, et non par 20. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>b</mi><mi>o</mi><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>M</mi><mi>N</mi><mi>A</mi><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>@</mo></mrow><mn>20</mn></mrow><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>t</mi><mi>U</mi><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>U</mi></mrow></msub><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>n</mi><mi>u</mi></msub><mo>,</mo><mn>20</mn><mo stretchy=&quot;false&quot;>)</mo></mrow><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>20</mn></mrow></msubsup><msub><mi>r</mi><mi>u</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo><msub><mi>p</mi><mi>u</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>@</mo></mrow><mi>i</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="86.689ex" height="3.142ex" viewBox="0 -935.7 37324.3 1352.7" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-62" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6F" x="1558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-78" x="2043" y="0"></use><g transform="translate(2616,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-4E" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-41" x="1940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-50" x="2690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-40" x="3442" y="0"></use><g transform="translate(4220,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-30" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-3D" x="8115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-66" x="9421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="9972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-61" x="10423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-63" x="10953" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-31" x="11386" y="0"></use><g transform="translate(11887,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-76" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-65" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="1500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-74" x="1952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-55" x="2313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="3331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-76" x="3782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-65" x="4268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="4734" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-74" x="5186" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-73" x="17684" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="18154" y="0"></use><g transform="translate(18726,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="926" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6E" x="1271" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-55" x="1872" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-66" x="21821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="22372" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-61" x="22823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-63" x="23353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-31" x="23786" y="0"></use><g transform="translate(24287,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6E" x="1474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-28" x="2074" y="0"></use><g transform="translate(2464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="849" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-2C" x="3569" y="0"></use><g transform="translate(4014,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-29" x="5015" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-73" x="29941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="30411" y="0"></use><g transform="translate(30983,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,360)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-32"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-30" x="500" y="0"></use></g><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-31" x="1124" y="0"></use></g></g><g transform="translate(33111,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-28" x="34067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="34457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-29" x="34802" y="0"></use><g transform="translate(35192,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-40" x="36200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="36978" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>m</mi><mi>b</mi><mi>o</mi><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>M</mi><mi>N</mi><mi>A</mi><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mn>20</mn></mrow><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>l</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>t</mi><mi>U</mi><mtext>&nbsp;</mtext><mi>r</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>U</mi></mrow></msub><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>n</mi><mi>u</mi></msub><mo>,</mo><mn>20</mn><mo stretchy="false">)</mo></mrow><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>20</mn></mrow></msubsup><msub><mi>r</mi><mi>u</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><msub><mi>p</mi><mi>u</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>i</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ mbox {MNAP @ 20} = \ frac {1} {\ lvert U \ rvert} \ sum_ {u \ in U} \ frac {1} {\ min (n_u, 20)} \ sum_ {i = 1} ^ {20} r_u (i) p_u @ i </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>p</mi><mi>u</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>@</mo></mrow><mi>k</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow></msubsup><msub><mi>r</mi><mi>u</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.842ex" height="3.142ex" viewBox="-38.5 -935.7 12417.9 1352.7" role="img" focusable="false" style="vertical-align: -0.969ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="712" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-40" x="1008" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6B" x="1786" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-3D" x="2586" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-66" x="3892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="4442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-61" x="4894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-63" x="5423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-31" x="5857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6B" x="6357" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-73" x="7129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="7598" y="0"></use><g transform="translate(8171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6B" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-31" x="1124" y="0"></use></g></g><g transform="translate(10298,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-28" x="11254" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="11644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-29" x="11989" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>p</mi><mi>u</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>k</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow></msubsup><msub><mi>r</mi><mi>u</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> p_u @ k = \ frac {1} {k} \ sum_ {i = 1} ^ {k} r_u (i) </script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>r</mi><mi>u</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.833ex" height="2.66ex" viewBox="0 -832 2080.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="638" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-28" x="956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="1345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMAIN-29" x="1691" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mi>u</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3"> r_u (i) </script>  - est situÃ© <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-69" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> i </script>  e Ã©lÃ©ment prÃ©dit dans l'ensemble des Ã©lÃ©ments consommÃ©s pendant la pÃ©riode de test par l'utilisateur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> u </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>n</mi><mi>u</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.567ex" height="1.817ex" viewBox="0 -520.7 1105.3 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/okko/blog/439180/&amp;usg=ALkJrhgbEGuLVXOCh5GEWlhHDyjJFghe7w#MJMATHI-75" x="849" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mi>u</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> n_u </script>  Est la taille de cet ensemble.  Si soudainement les mesures de qualitÃ© de classement sont oubliÃ©es, il y a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un excellent article</a> Ã  leur sujet sur le hub </p><br><div class="spoiler">  <b class="spoiler_title">Code mÃ©trique en Cython</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">average_precision</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( dict data_true, dict data_predicted, const unsigned long int k )</span></span></span><span class="hljs-function"> -&gt; float:</span></span> cdef: unsigned long int n_items_predicted unsigned long int n_items_true unsigned long int n_correct_items unsigned long int item_idx double average_precision_sum double precision set items_true list items_predicted <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> data_true: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">'data_true is empty'</span></span>) average_precision_sum = <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key, items_true <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data_true.items(): items_predicted = data_predicted.get(key, []) n_items_true = len(items_true) n_items_predicted = min(len(items_predicted), k) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n_items_true == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> n_items_predicted == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> n_correct_items = <span class="hljs-number"><span class="hljs-number">0</span></span> precision = <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item_idx <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n_items_predicted): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> items_predicted[item_idx] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> items_true: n_correct_items += <span class="hljs-number"><span class="hljs-number">1</span></span> precision += &lt;double&gt;n_correct_items / &lt;double&gt;(item_idx + <span class="hljs-number"><span class="hljs-number">1</span></span>) average_precision_sum += &lt;double&gt;precision / &lt;double&gt;min(n_items_true, k) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> average_precision_sum / &lt;double&gt;len(data_true) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">metric</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(true_data, predicted_data, k=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> true_data_set = {k: set(v) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k, v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> true_data.items()} <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> average_precision(true_data_set, predicted_data, k=k)</code> </pre> </div></div><br><h2 id="prizy-i-pravila">  Prix â€‹â€‹et rÃ¨glement </h2><br><p>  Le fonds de prix est de 600 mille roubles: </p><br><ul><li>  <strong>300</strong> mille recevront le gagnant, </li><li>  <strong>200</strong> mille - le participant en deuxiÃ¨me place </li><li>  <strong>100</strong> mille - un participant Ã  la troisiÃ¨me place. </li></ul><br><p>  Les rÃ¨gles sont standard: ne perturbez pas la plateforme, utilisez un seul compte, Ã©vitez l'Ã©change de code privÃ© avec les autres participants et ne soyez pas un employÃ© d'Okko et de Rambler. </p><br><h2 id="kak-nachat">  Comment commencer </h2><br><p>  Il peut Ãªtre difficile, mÃªme pour des professionnels expÃ©rimentÃ©s, de commencer Ã  participer au concours: vous devez rapidement trouver un nouveau domaine, comprendre et analyser les donnÃ©es et trier de nouvelles bibliothÃ¨ques. </p><br><p>  Nous espÃ©rons que dans cet article, nous avons pu vous plonger dans le sujet du cinÃ©ma en ligne et dÃ©crire les donnÃ©es de maniÃ¨re suffisamment dÃ©taillÃ©e.  Dans l'archive avec la tÃ¢che, vous trouverez le fichier <code>baseline.ipynb</code> , qui contient le code de chargement des donnÃ©es et un exemple de solution simple utilisant l'algorithme de K voisins les plus proches. </p><br><p>  Si des points de la description des donnÃ©es et du domaine restent flous, nous serons heureux de rÃ©pondre Ã  vos questions dans les commentaires.  Vous pouvez Ã©galement poser des questions sur la chaÃ®ne de tÃ©lÃ©gramme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@boosterspro</a> - la discussion principale du concours s'y tiendra. </p><br><p>  <strong>Alors, comment commencer:</strong> </p><br><ol><li>  Inscrivez-vous Ã  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">boosters.pro</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rejoignez @boosterspro</a> ; </li><li>  TÃ©lÃ©chargez les donnÃ©es sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la page du concours</a> ou <a href="">ici</a> ; </li><li>  Ouvrez <code>baseline.ipynb</code> , installez les packages nÃ©cessaires, exÃ©cutez tout le code et tÃ©lÃ©chargez votre premiÃ¨re solution; </li><li>  Essayez de modifier la ligne de base pour amÃ©liorer les performances; </li><li>  ExpÃ©rimentez! </li></ol><br><p>  Le dÃ©fi Rekko dÃ©marre aujourd'hui, le 18 fÃ©vrier.  Les dÃ©cisions sont prises jusqu'au 18 avril Ã  23 h 59 min 59 s, heure de Moscou. </p><br><p>  Nous attendons tout le monde et bonne chance! </p><br><p>  Soit dit en passant, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nous recherchons des employÃ©s</a> .  Y compris le dÃ©veloppeur de systÃ¨mes de recommandation. </p><br><p>  <strong>UPD 26/02/2019:</strong> TrouvÃ© un bug dans la formation des donnÃ©es de test, les a remplacÃ©es et le fichier <em>test_users.json</em> .  Tous les participants ont des tentatives supplÃ©mentaires. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr439180/">https://habr.com/ru/post/fr439180/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr439168/index.html">SystÃ¨mes d'analyse client</a></li>
<li><a href="../fr439170/index.html">Les opÃ©rateurs cellulaires aideront les banques Ã  vÃ©rifier l'exactitude des donnÃ©es clients</a></li>
<li><a href="../fr439172/index.html">Extension de macro Assert () pour implÃ©menter une gestion minimale des erreurs</a></li>
<li><a href="../fr439174/index.html">Safe Internet Day: quelles menaces rechercher en 2019</a></li>
<li><a href="../fr439176/index.html">Envoyer un e-mail avec des piÃ¨ces jointes par JavaMailSender de SpringFramework</a></li>
<li><a href="../fr439182/index.html">Comment nous distribuons les commandes entre les chauffeurs dans Yandex.Taxi</a></li>
<li><a href="../fr439184/index.html">Modifier votre mot de passe: tester les stratÃ©gies de mot de passe du service Web</a></li>
<li><a href="../fr439186/index.html">Editeur UX: histoire vraie, vie rial</a></li>
<li><a href="../fr439190/index.html">Comment crÃ©er une application de rÃ©alitÃ© augmentÃ©e Ã  l'aide d'ARCore</a></li>
<li><a href="../fr439192/index.html">Haut-parleur PC Ã  onze</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>