<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👳 🐡 👕 Membuat API REST dengan Node.js dan Oracle Database. Bagian 4 🦕 🌲 👏🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bagian 4. Membuat API REST: Menangani Permintaan POST, PUT, dan DELETE 

 Di artikel sebelumnya, Anda menambahkan logika ke API untuk MENDAPATKAN perm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat API REST dengan Node.js dan Oracle Database. Bagian 4</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473560/">  <b>Bagian 4. Membuat API REST: Menangani Permintaan POST, PUT, dan DELETE</b> <br><br>  Di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> Anda menambahkan logika ke API untuk MENDAPATKAN permintaan yang mengambil data dari database.  Dalam posting ini, Anda akan menyelesaikan fungsionalitas dasar dari CRUD API dengan menambahkan logika untuk menangani permintaan POST, PUT, dan DELETE. <br><a name="habracut"></a><br>  <b>Menambahkan Logika Perutean</b> <br><br>  Untuk menyederhanakan logika perutean, Anda akan mengarahkan semua metode HTTP melalui rute yang ada (dengan parameter id opsional).  Buka file <b>services / router.js</b> dan ganti logika routing saat ini (baris 5-6) dengan kode berikut: <br><br><pre><code class="javascript hljs">router.route(<span class="hljs-string"><span class="hljs-string">'/employees/:id?'</span></span>) .get(employees.get) .post(employees.post) .put(employees.put) .delete(employees.delete);</code> </pre> <br>  Logika perutean yang diperbarui memetakan empat metode HTTP paling umum yang digunakan untuk operasi CRUD dasar ke logika pengontrol yang benar. <br><br>  <b>Pemrosesan permintaan POST</b> <br><br>  Permintaan HTTP POST digunakan untuk membuat sumber daya baru (dalam hal ini, catatan karyawan).  Gagasan utamanya adalah untuk mengekstrak data dari badan permintaan HTTP dan menggunakannya untuk membuat baris baru dalam database.  Untuk menambahkan logika pengontrol untuk permintaan POST, buka file <b>controllers / employee.js</b> dan tambahkan kode berikut: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEmployeeFromRec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> employee = { <span class="hljs-attr"><span class="hljs-attr">first_name</span></span>: req.body.first_name, <span class="hljs-attr"><span class="hljs-attr">last_name</span></span>: req.body.last_name, <span class="hljs-attr"><span class="hljs-attr">email</span></span>: req.body.email, <span class="hljs-attr"><span class="hljs-attr">phone_number</span></span>: req.body.phone_number, <span class="hljs-attr"><span class="hljs-attr">hire_date</span></span>: req.body.hire_date, <span class="hljs-attr"><span class="hljs-attr">job_id</span></span>: req.body.job_id, <span class="hljs-attr"><span class="hljs-attr">salary</span></span>: req.body.salary, <span class="hljs-attr"><span class="hljs-attr">commission_pct</span></span>: req.body.commission_pct, <span class="hljs-attr"><span class="hljs-attr">manager_id</span></span>: req.body.manager_id, <span class="hljs-attr"><span class="hljs-attr">department_id</span></span>: req.body.department_id }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> employee; } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">post</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> employee = getEmployeeFromRec(req); employee = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> employees.create(employee); res.status(<span class="hljs-number"><span class="hljs-number">201</span></span>).json(employee); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { next(err); } } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.post = post;</code> </pre> <br>  Fungsi getEmployeeFromRec mengambil objek permintaan dan mengembalikan objek dengan properti yang diperlukan untuk membuat catatan karyawan.  Fungsi tersebut dideklarasikan di luar fungsi pos sehingga dapat digunakan nanti untuk permintaan PUT. <br><br>  Fungsi posting menggunakan getEmployeeFromRec untuk menginisialisasi variabel, yang kemudian diteruskan ke metode create API database karyawan.  Setelah operasi pembuatan, kode status "201 Created" dikirim ke klien bersama dengan JSON karyawan (termasuk nilai baru dari pengidentifikasi karyawan). <br><br>  Sekarang Anda dapat memperhatikan logika di API basis data.  Buka file <b>db_apis / employee.js</b> dan tambahkan kode berikut di bawah ini. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createSql = <span class="hljs-string"><span class="hljs-string">`insert into employees ( first_name, last_name, email, phone_number, hire_date, job_id, salary, commission_pct, manager_id, department_id ) values ( :first_name, :last_name, :email, :phone_number, :hire_date, :job_id, :salary, :commission_pct, :manager_id, :department_id ) returning employee_id into :employee_id`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">emp</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> employee = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({}, emp); employee.employee_id = { <span class="hljs-attr"><span class="hljs-attr">dir</span></span>: oracledb.BIND_OUT, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: oracledb.NUMBER } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> database.simpleExecute(createSql, employee); employee.employee_id = result.outBinds.employee_id[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> employee; } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.create = create;</code> </pre> <br>  Logika di atas dimulai dengan mendeklarasikan konstanta createSql untuk menyimpan pernyataan insert.  Perhatikan bahwa ia menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">variabel bind</a> , bukan rangkaian string, untuk merujuk ke nilai yang akan disisipkan.  Perlu diulangi betapa pentingnya variabel pengikat untuk alasan keamanan dan kinerja.  Cobalah untuk menghindari penggabungan string bila memungkinkan. <br><br>  Di dalam fungsi create, konstanta karyawan didefinisikan dan diinisialisasi untuk salinan parameter emp menggunakan Object.assign.  Ini mencegah modifikasi langsung dari objek yang ditransfer dari controller. <br><br>  Kemudian, properti employee_id ditambahkan ke objek karyawan (dikonfigurasi sebagai "out bind") sehingga berisi semua variabel mengikat yang diperlukan untuk menjalankan pernyataan SQL.  Kemudian, fungsi simpleExecute digunakan untuk menjalankan pernyataan penyisipan, dan properti outBinds digunakan untuk menimpa properti employee.employee_id sebelum mengembalikan objek. <br><br>  Karena ada tautan ke modul oracledb, Anda perlu menambahkan baris berikut ke bagian atas file. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oracledb = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'oracledb'</span></span>);</code> </pre> <br><br>  <b>PUT Memproses Permintaan</b> <br><br>  Permintaan PUT akan digunakan untuk memperbarui sumber daya yang ada.  Penting untuk dicatat bahwa PUT digunakan untuk mengganti seluruh sumber daya - PUT tidak melakukan pembaruan parsial (saya akan menunjukkan kepada Anda bagaimana melakukan ini dengan PATCH di masa mendatang).  Kembali ke file <b>controllers / employee.js</b> dan tambahkan kode berikut di bawah ini. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> employee = getEmployeeFromRec(req); employee.employee_id = <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(req.params.id, <span class="hljs-number"><span class="hljs-number">10</span></span>); employee = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> employees.update(employee); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (employee !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { res.status(<span class="hljs-number"><span class="hljs-number">200</span></span>).json(employee); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { res.status(<span class="hljs-number"><span class="hljs-number">404</span></span>).end(); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { next(err); } } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.put = put;</code> </pre> <br>  Fungsi put menggunakan getEmployeeFromRec untuk menginisialisasi objek bernama karyawan, dan kemudian menambahkan properti employee_id dari parameter id ke URL.  Kemudian objek karyawan diteruskan ke fungsi pembaruan API basis data, dan respons yang sesuai dikirim ke klien berdasarkan hasilnya. <br><br>  Untuk menambahkan logika pembaruan ke API basis data, tambahkan kode berikut ke file <b>db_apis / employee.js</b> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updateSql = <span class="hljs-string"><span class="hljs-string">`update employees set first_name = :first_name, last_name = :last_name, email = :email, phone_number = :phone_number, hire_date = :hire_date, job_id = :job_id, salary = :salary, commission_pct = :commission_pct, manager_id = :manager_id, department_id = :department_id where employee_id = :employee_id`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">emp</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> employee = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({}, emp); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> database.simpleExecute(updateSql, employee); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.rowsAffected &amp;&amp; result.rowsAffected === <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> employee; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.update = update;</code> </pre> <br>  Logika pembaruan sangat mirip dengan logika pembuatan.  Variabel dideklarasikan untuk menyimpan pernyataan SQL, dan kemudian simpleExecute digunakan untuk mengeksekusi pernyataan dengan nilai dinamis yang ditransfer (setelah menyalinnya ke objek lain).  result.rowsAffected digunakan untuk menentukan apakah pembaruan berhasil dan mengembalikan nilai yang benar. <br><br>  <b>HAPUS Pemrosesan Permintaan</b> <br><br>  Metode terakhir yang perlu Anda terapkan adalah DELETE, yang, tidak mengejutkan, akan menghapus sumber daya dari database.  Tambahkan kode berikut di akhir file <b>controllers / employee.js.</b> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">del</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(req.params.id, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> success = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> employees.delete(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (success) { res.status(<span class="hljs-number"><span class="hljs-number">204</span></span>).end(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { res.status(<span class="hljs-number"><span class="hljs-number">404</span></span>).end(); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { next(err); } } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.delete = del;</code> </pre> <br>  Mesin JavaScript akan mengeluarkan pengecualian jika Anda mencoba mendeklarasikan fungsi yang disebut "hapus" menggunakan operator fungsi.  Untuk menyiasatinya, fungsi bernama "del" dideklarasikan, dan kemudian diekspor sebagai "hapus". <br><br>  Pada titik ini Anda harus dapat membaca dan memahami logika.  Berbeda dengan contoh sebelumnya, permintaan HTTP ini tidak memiliki isi, hanya parameter id yang digunakan di jalur rute.  Kode status "204 Tidak Ada Konten" sering digunakan dengan permintaan DELETE ketika badan respons tidak dikirim. <br><br>  Untuk menyelesaikan logika basis data, kembali ke file <b>db_apis / employee.js</b> dan tambahkan kode berikut sampai akhir. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> deleteSql = <span class="hljs-string"><span class="hljs-string">`begin delete from job_history where employee_id = :employee_id; delete from employees where employee_id = :employee_id; :rowcount := sql%rowcount; end;`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">del</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> binds = { <span class="hljs-attr"><span class="hljs-attr">employee_id</span></span>: id, <span class="hljs-attr"><span class="hljs-attr">rowcount</span></span>: { <span class="hljs-attr"><span class="hljs-attr">dir</span></span>: oracledb.BIND_OUT, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: oracledb.NUMBER } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> database.simpleExecute(deleteSql, binds); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.outBinds.rowcount === <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.delete = del;</code> </pre> <br>  Karena tabel JOB_HISTORY memiliki batasan kunci asing yang merujuk ke tabel EMPLOYEES, blok PL / SQL sederhana digunakan untuk menghapus baris yang diperlukan dari kedua tabel dalam satu siklus. <br><br>  <b>Parsing permintaan JSON</b> <br><br>  Jika Anda melihat fungsi getEmployeeFromRec di controllers / employee.js, Anda akan melihat bahwa properti body permintaan adalah objek JavaScript.  Ini memberikan cara mudah untuk mendapatkan nilai dari badan permintaan, tetapi ini tidak terjadi secara otomatis. <br><br>  API yang Anda buat mengharapkan klien untuk mengirim data dalam format JSON di badan permintaan POST dan PUT.  Selain itu, klien harus mengatur header Tipe Konten dari permintaan ke aplikasi / json sehingga server web tahu jenis permintaan yang dikirim.  Anda dapat menggunakan middleware bawaan express.json sehingga Express dapat menguraikan permintaan tersebut. <br><br>  Buka file <b>layanan / web-server.js</b> dan tambahkan baris berikut tepat di bawah panggilan app.use, yang menambahkan morgan ke pipa permintaan. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Parse incoming JSON requests and revive JSON. app.use(express.json({ reviver: reviveJson }));</span></span></code> </pre> <br>  Ketika data JSON diurai menjadi objek JavaScript asli, maka hanya tipe data yang didukung di JSON yang akan dipetakan dengan benar ke tipe JavaScript.  Tanggal tidak didukung dalam JSON dan biasanya direpresentasikan sebagai string ISO 8601. Menggunakan fungsi reviver yang dilewatkan ke express.json middleware, Anda dapat melakukan konversi secara manual.  Tambahkan kode berikut ke akhir file <b>services / web-server.js</b> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> iso8601RegExp = <span class="hljs-regexp"><span class="hljs-regexp">/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reviveJson</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// revive ISO 8601 date strings to instances of Date if (typeof value === 'string' &amp;&amp; iso8601RegExp.test(value)) { return new Date(value); } else { return value; } }</span></span></code> </pre> <br>  <b>Pengujian API</b> <br><br>  Sudah waktunya untuk menguji fungsionalitas CRUD baru!  Sejauh ini, Anda telah menggunakan browser untuk menguji API, tetapi ini tidak akan berfungsi untuk permintaan POST, PUT, dan DELETE.  Saya akan menunjukkan kepada Anda cara menguji API menggunakan perintah curl karena mudah diakses di mesin virtual.  Tetapi Anda dapat menggunakan alat grafis seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Postman</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Insomina</a> (gratis). <br><br>  Buka aplikasi, lalu buka jendela terminal lain dan jalankan perintah berikut untuk membuat karyawan baru. <br><br><pre> <code class="javascript hljs">curl -X <span class="hljs-string"><span class="hljs-string">"POST"</span></span> <span class="hljs-string"><span class="hljs-string">"http://localhost:3000/api/employees"</span></span> \ -i \ -H <span class="hljs-string"><span class="hljs-string">'Content-Type: application/json'</span></span> \ -d $<span class="hljs-string"><span class="hljs-string">'{ "first_name": "Dan", "last_name": "McGhan", "email": "dan@fakemail.com", "job_id": "IT_PROG", "hire_date": "2014-12-14T00:00:00.000Z", "phone_number": "123-321-1234" }'</span></span></code> </pre> <br>  Jika permintaan berhasil, respons harus berisi objek karyawan dengan atribut employee_id.  Berikut ini sebuah contoh: <br><br><img src="https://habrastorage.org/webt/7w/au/vk/7wauvk6m-ypdscfrwsciifabg9m.png" alt="gambar"><br><br>  Dalam kasus saya, nilai employee_id adalah 227 - Anda harus mengubah perintah berikut berdasarkan nilai employee_id yang diterima. <br><br>  Misalnya, untuk memperbarui entri baru, masukkan PUT untuk URL dengan nilai pengenal ini. <br><br><pre> <code class="javascript hljs">curl -X <span class="hljs-string"><span class="hljs-string">"PUT"</span></span> <span class="hljs-string"><span class="hljs-string">"http://localhost:3000/api/employees/227"</span></span> \ -i \ -H <span class="hljs-string"><span class="hljs-string">'Content-Type: application/json'</span></span> \ -d $<span class="hljs-string"><span class="hljs-string">'{ "first_name": "Dan", "last_name": "McGhan", "email": "dan@fakemail.com", "job_id": "AD_PRES", "hire_date": "2014-12-14T00:00:00.000Z", "phone_number": "123-321-1234" }'</span></span></code> </pre> <br>  Pemicu UPDATE_JOB_HISTORY dalam skema SDM akan mendeteksi perubahan pekerjaan dan menambahkan baris ke tabel JOB_HISTORY.  Jika Anda melihat tabel ini, Anda akan melihat catatan untuk karyawan baru.  Jalankan perintah berikut untuk menghapus riwayat pekerjaan dan catatan karyawan. <br><br><pre> <code class="javascript hljs">curl -i -X <span class="hljs-string"><span class="hljs-string">"DELETE"</span></span> <span class="hljs-string"><span class="hljs-string">"http://localhost:3000/api/employees/227"</span></span></code> </pre> <br><br>  Dan sekarang, Anda memiliki segalanya, fungsionalitas CRUD penuh! <br><br>  API berjalan dengan baik, tetapi ada pekerjaan yang harus dilakukan.  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">posting terakhir,</a> saya akan menunjukkan kepada Anda bagaimana cara menambahkan kemampuan pagination, sorting, dan filtering dalam GET request. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473560/">https://habr.com/ru/post/id473560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473544/index.html">JPEG studi isi ulang berganda</a></li>
<li><a href="../id473546/index.html">Aplikasi pada TSD dan komunikasi dengan 1C: Enterprise 8.3 melalui HTTP-Service. Bagian 2 (Implementasi API di sisi 1C)</a></li>
<li><a href="../id473548/index.html">Desentralisasi PKI: Usulan Pendekatan untuk Peningkatan Keamanan</a></li>
<li><a href="../id473550/index.html">Joker 2019: Kemenangan Tahun Ini</a></li>
<li><a href="../id473552/index.html">Deanonimisasi melalui Clickjacking pada tahun 2019</a></li>
<li><a href="../id473562/index.html">Preferensi terenkripsi di Android</a></li>
<li><a href="../id473564/index.html">Ada kemampuan, tetapi tidak ada alasan: tugas yang AI tidak bisa atasi</a></li>
<li><a href="../id473568/index.html">Layanan lapangan, aplikasi pada peta, geolokasi. Pilihan layanan kartografi. Tampilan sisi produk</a></li>
<li><a href="../id473570/index.html">Cari 314 km² dalam 10 jam - pertempuran terakhir para insinyur pencarian melawan hutan</a></li>
<li><a href="../id473572/index.html">"Zakroma Rodina" akan diceritakan: Jerman akan menentukan cadangan strategis dengan metode baru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>