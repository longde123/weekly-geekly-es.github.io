<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìü üßñüèº ‚ú® Mientras escrib√≠amos otro algoritmo de an√°lisis RFM üïò üíû ü§ôüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente hablamos sobre por qu√© se nos ocurri√≥ nuestro propio segmentador RFM, que ayuda a hacer an√°lisis RFM en 20 segundos , y mostramos c√≥mo u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mientras escrib√≠amos otro algoritmo de an√°lisis RFM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mindbox/blog/423463/"><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img align="left" alt="KDPV" width="400" src="https://habrastorage.org/webt/jz/8z/ry/jz8zryizwksvh074dadvanrqwye.png"></a>  Recientemente hablamos sobre por qu√© se nos ocurri√≥ nuestro propio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">segmentador RFM, que ayuda a hacer an√°lisis RFM en 20 segundos</a> , y mostramos c√≥mo usar sus resultados en marketing. </p><br><p>  Ahora contamos c√≥mo est√° organizado. <br><br><br clear="left"></p><a name="habracut"></a><br><h1 id="zadacha-napisat-novyy-algoritm-rfm-analiza">  Tarea: escribir un nuevo algoritmo de an√°lisis RFM </h1><br><p>  No est√°bamos satisfechos con los enfoques disponibles para el an√°lisis RFM.  Por lo tanto, decidimos hacer nuestro propio segmentador, que: </p><br><ul><li>  Funciona de forma completamente autom√°tica. </li><li>  Construye de 3 a 15 segmentos. </li><li>  Se adapta a cualquier campo de actividad del cliente (no importa de qu√© se trate: una tienda de flores o herramientas el√©ctricas). </li><li>  Determina el n√∫mero y la ubicaci√≥n de los segmentos en funci√≥n de los datos disponibles y no de par√°metros predefinidos que no pueden ser universales. </li><li>  Selecciona segmentos para que siempre tengan consumidores (a diferencia de algunos enfoques cuando algunos segmentos est√°n vac√≠os). </li></ul><br><h1 id="kak-reshali-zadachu">  ¬øC√≥mo resolver el problema? </h1><br><p> Cuando nos dimos cuenta de la tarea, nos dimos cuenta de que estaba m√°s all√° del poder del hombre y pedimos ayuda a la inteligencia artificial.  Para ense√±arle al autom√≥vil a dividir a los consumidores en segmentos, decidimos usar m√©todos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">agrupamiento</a> . </p><br><p>  Los m√©todos de agrupamiento se utilizan para buscar una estructura en los datos y seleccionar grupos de objetos similares en ellos, justo lo que necesita para el an√°lisis RFM. </p><br><p>  La agrupaci√≥n se refiere a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los</a> m√©todos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aprendizaje autom√°tico</a> de la clase " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aprender sin un maestro</a> ".  Una clase se llama as√≠ porque hay datos, pero nadie sabe qu√© hacer con ellos, por lo tanto, no puede ense√±ar una m√°quina. </p><br><p>  No pudimos encontrar empresas que utilizan este enfoque en el mercado.  Aunque encontraron un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> en el que el autor realiza investigaciones cient√≠ficas sobre este tema.  Pero, como entendimos por nuestra propia experiencia, de la ciencia a la empresa no es en absoluto un paso. </p><br><h2 id="etap-1-predobrabotka-dannyh">  Etapa 1. Procesamiento de datos </h2><br><p>  Los datos deben estar preparados para la agrupaci√≥n. </p><br><p>  Primero, los verificamos en busca de valores incorrectos: valores negativos, etc. </p><br><p>  Luego eliminamos las emisiones: consumidores con caracter√≠sticas inusuales.  Hay pocos de ellos, pero pueden afectar en gran medida el resultado, y no para mejor.  Para separarlos, utilizamos un m√©todo especial de aprendizaje autom√°tico: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Factor de valor at√≠pico local</a> . </p><br><p><img src="https://habrastorage.org/webt/bw/ff/sm/bwffsmjiyzunwf00brnvxp7-jjw.png" alt="Imagen de separaci√≥n de emisiones"></p><br><p>  Aqu√≠ en las im√°genes utilizo solo dos de las tres dimensiones (R y M) de tres para facilitar la percepci√≥n. </p><br><p>  Las emisiones no participan en la construcci√≥n de segmentos, pero se les asignan despu√©s de que se forman los segmentos. </p><br><h2 id="etap-2-klasterizaciya-potrebiteley">  Etapa 2. Agrupaci√≥n de consumidores </h2><br><p>  Aclarar√© la terminolog√≠a: por conglomerados me refiero a grupos de objetos que se obtienen como resultado del uso de algoritmos de conglomeraci√≥n y segmentos como el resultado final, es decir, el resultado del an√°lisis RFM. </p><br><p>  Hay varias docenas de algoritmos de agrupamiento.  Se pueden encontrar ejemplos de algunos de ellos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en la documentaci√≥n del paquete scikit-learn</a> . </p><br><p>  Probamos ocho algoritmos con varias modificaciones.  La mayor√≠a no ten√≠a suficiente memoria.  O el tiempo de su trabajo tendi√≥ al infinito.  Casi todos los algoritmos que t√©cnicamente lograron hacer frente a la tarea dieron resultados terribles: por ejemplo, el popular <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DBSCAN</a> consider√≥ el 55% de los objetos como ruido y dividi√≥ el resto en grupos de 4302. </p><br><p><img src="https://habrastorage.org/webt/ur/9l/3g/ur9l3gmnohsqkffhjsthn5bocwc.png" alt="Ejemplo de operaci√≥n de DBSCAN"></p><br><p>  <em>Los objetos violetas se definen como "ruido"</em> </p><br><p>  Como resultado, elegimos el algoritmo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">K-medias</a> (K-medias) porque no busca grupos de puntos, sino que simplemente agrupa los puntos alrededor de los centros.  Al final result√≥ que, esta fue la decisi√≥n correcta. </p><br><p>  Pero primero, resolvimos algunos problemas: </p><br><ol><li><p>  <strong>Inestabilidad</strong>  Este es un problema conocido con la mayor√≠a de los algoritmos de agrupaci√≥n, incluidos los K-Means.  La inestabilidad radica en el hecho de que con lanzamientos repetidos, los resultados pueden ser diferentes, ya que se utiliza un elemento de aleatoriedad. <br>  Por lo tanto, agrupamos muchas veces, y luego agrupamos de nuevo, pero ya los centros de los grupos.  Como centros finales de los grupos, tomamos los centros de los grupos resultantes (es decir, grupos formados por los centros de los primeros grupos). </p><br></li><li><p>  <strong>El n√∫mero de grupos.</strong>  Los datos pueden ser diferentes y la cantidad de cl√∫steres tambi√©n debe ser diferente. <br>  Para encontrar el n√∫mero √≥ptimo de cl√∫steres para cada base de clientes, realizamos cl√∫steres con un n√∫mero diferente de cl√∫steres y luego <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seleccionamos el mejor resultado</a> . </p><br></li><li><p>  <strong>Velocidad.</strong>  El algoritmo K-means no es muy r√°pido, pero s√≠ aceptable (unos minutos para una base promedio de varios cientos de miles de consumidores).  Sin embargo, lo ejecutamos muchas veces: en primer lugar, para aumentar la estabilidad y, en segundo lugar, para seleccionar el n√∫mero de cl√∫steres.  Y el tiempo de funcionamiento est√° aumentando mucho. <br>  Para la aceleraci√≥n, utilizamos una modificaci√≥n del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mini Batch K-Means</a> .  Recalcula los centros de cl√∫ster en cada iteraci√≥n no para todos los objetos, sino solo para una peque√±a submuestra.  La calidad cae bastante, pero el tiempo se reduce significativamente. </p><br></li></ol><br><p>  Tan pronto como resolvimos estos problemas, la agrupaci√≥n comenz√≥ a proceder con √©xito. </p><br><p><img src="https://habrastorage.org/webt/sm/gd/w1/smgdw1bf8lxc71abccsn9yqfb_m.png" alt="KMeans Result"></p><br><h2 id="etap-3-postobrabotka-klasterov">  Etapa 3. Post-procesamiento de clusters </h2><br><p>  Los grupos obtenidos usando el algoritmo deben llevarse a una forma que sea conveniente para la percepci√≥n. </p><br><p>  Primero, convertimos estos grupos de curvas en rectangulares.  En realidad, esto los convierte en segmentos.  La rectangularidad de los segmentos es un requisito de nuestro sistema y, adem√°s, agrega comprensibilidad a los segmentos mismos.  Para convertir, utilizamos otro algoritmo de aprendizaje autom√°tico: el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√°rbol de decisi√≥n</a> . </p><br><p><img src="https://habrastorage.org/webt/bf/uq/gi/bfuqgiaft8d6cmb-pucpzxb8_ho.png" alt="Resultado del √°rbol de decisiones"></p><br><p>  <em>El √°rbol de decisi√≥n se basa en datos libres de valores at√≠picos, y los valores at√≠picos se asignan a los segmentos terminados.</em> </p><br><p>  En segundo lugar, hicimos otra cosa interesante: la descripci√≥n de los segmentos.  Un algoritmo especial, que usa un diccionario, describe cada segmento en ruso en vivo, para que las personas no sientan anhelo al mirar n√∫meros sin alma. </p><br><p><img src="https://habrastorage.org/webt/as/-y/g3/as-yg31sxa3rjjarnmaxz8h9uuw.png" alt="Segmento Descripci√≥n Ejemplos"></p><br><h1 id="testirovanie-rezultatov">  Resultados de prueba </h1><br><p>  El producto esta listo.  Pero antes de comenzar a vender, debe probarse.  Es decir, verifique si el an√°lisis de RFM se realiza seg√∫n lo previsto. </p><br><p>  Sabemos que la mejor manera de entender si hemos hecho algo que vale la pena es descubrir qu√© tan √∫til es el an√°lisis para nuestros clientes.  Y lo haremos.  Pero esto es mucho tiempo, y los resultados ser√°n m√°s tarde, y queremos saber qu√© tan exitosamente enfrentamos la tarea, ahora. </p><br><p>  Por lo tanto, como una m√©trica m√°s simple y r√°pida, utilizamos el m√©todo del "grupo de control hist√≥rico". </p><br><p>  Para hacer esto, tomamos varias bases de datos y las segmentamos usando an√°lisis RFM en diferentes puntos en el pasado: una base de datos para el estado hace seis meses, la otra hace un a√±o, etc. </p><br><p>  Con base en cada segmentaci√≥n para cada base, creamos nuestro pron√≥stico de las acciones del cliente desde el momento seleccionado hasta el presente.  Luego compararon estos pron√≥sticos con el comportamiento real de los clientes. </p><br><p><img src="https://habrastorage.org/webt/sf/g8/x0/sfg8x0petj3fj1hoot8ytxzhfkw.png" alt="KG hist√≥rico"></p><br><p>  <em>Ejemplo de prueba en un grupo de control hist√≥rico con un per√≠odo de control de seis meses.</em> </p><br><p>  En la imagen: </p><br><ul><li>  Las columnas R, F y M indican convencionalmente los l√≠mites de los segmentos a lo largo de cada eje.  Este es el resultado de la segmentaci√≥n de bases en la forma en que era hace medio a√±o. </li><li>  La columna "Tama√±o" muestra el tama√±o del segmento hace seis meses en relaci√≥n con el tama√±o total de la base de datos. </li><li>  Las columnas "Probabilidad de compra" y "Cantidad" son datos sobre el comportamiento real del consumidor durante los pr√≥ximos seis meses. <br><ul><li>  La probabilidad de compra se define como la relaci√≥n entre el n√∫mero de consumidores del segmento que realiz√≥ una compra y el n√∫mero total de consumidores en el segmento. </li><li>  Cantidad: la cantidad total gastada por los consumidores del segmento en relaci√≥n con la cantidad gastada por los consumidores de todos los segmentos. </li></ul></li></ul><br><p>  Los resultados son consistentes.  Por ejemplo, los clientes de segmentos para los que predijimos una alta frecuencia de compras realmente compraron con m√°s frecuencia. </p><br><p>  Aunque no podemos garantizar el funcionamiento correcto del algoritmo en un 100 por ciento basado en tales pruebas, decidimos que fue exitoso. </p><br><h1 id="chto-my-ponyali">  Que entendemos </h1><br><p>  El aprendizaje autom√°tico es realmente capaz de ayudar a una empresa a resolver problemas irresolubles o muy poco resueltos. </p><br><p>  Pero el verdadero desaf√≠o no es la competencia de Kaggle.  Aqu√≠, adem√°s de lograr una mejor calidad en una m√©trica dada, debe pensar en cu√°nto funcionar√° el algoritmo, si ser√° conveniente para las personas y, en general, si es necesario resolver el problema usando ML o puede encontrar una forma m√°s simple. </p><br><p>  Y finalmente, la falta de una m√©trica formal de calidad complica la tarea varias veces, porque es dif√≠cil evaluar correctamente el resultado. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423463/">https://habr.com/ru/post/es423463/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423453/index.html">ZFS y velocidad de acceso al disco en hipervisores</a></li>
<li><a href="../es423455/index.html">Tableta correcta</a></li>
<li><a href="../es423457/index.html">Trabajo t√≠mido en 2018</a></li>
<li><a href="../es423459/index.html">Diferencias entre Phoenix y Rails a trav√©s de los ojos de un converso</a></li>
<li><a href="../es423461/index.html">Oto√±o suborbital</a></li>
<li><a href="../es423465/index.html">Qu√© leer sobre ITSM: libros, blogs y art√≠culos m√°s recientes.</a></li>
<li><a href="../es423467/index.html">Los desarrolladores rusos lanzar√°n un cat√°logo de compatibilidad de productos</a></li>
<li><a href="../es423469/index.html">N√∫meros de punto flotante m√°s salvajes del oeste</a></li>
<li><a href="../es423475/index.html">Hackear el c√≥digo del envejecimiento: una nueva ciencia sobre el envejecimiento y lo que significa mantenerse joven</a></li>
<li><a href="../es423477/index.html">S√© un ninja de seguridad: comienza tu camino hacia las alturas de IB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>