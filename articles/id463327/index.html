<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üó®Ô∏è ü§∏üèº üìê Vue.js: 3 anti-pola üïí üöµüèª üë®‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vue.js mungkin merupakan salah satu kerangka kerja JavaScript terbaik. Ini memiliki API yang intuitif, cepat, fleksibel, dan mudah digunakan. Namun, f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vue.js: 3 anti-pola</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/463327/">  Vue.js mungkin merupakan salah satu kerangka kerja JavaScript terbaik.  Ini memiliki API yang intuitif, cepat, fleksibel, dan mudah digunakan.  Namun, fleksibilitas Vue.js hadir dengan bahaya tertentu.  Beberapa pengembang yang bekerja dengan kerangka kerja ini rentan terhadap pengawasan kecil.  Ini dapat mempengaruhi kinerja aplikasi, atau, dalam jangka panjang, kemampuan untuk mendukung mereka. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/mt/rp/bs/mtrpbsevaksphoeiwzgs4efaqkg.jpeg"></a> <br><br>  Penulis materi, terjemahan yang kami terbitkan hari ini, menawarkan untuk mengurai beberapa kesalahan umum yang dilakukan oleh mereka yang mengembangkan aplikasi di Vue.js. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Efek samping di dalam properti yang dihitung</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Properti yang dikomputasi</a> adalah mekanisme Vue.js yang sangat nyaman yang memungkinkan Anda untuk mengatur pekerjaan dengan fragmen negara yang bergantung pada fragmen negara lainnya.  Properti yang dikomputasi hanya boleh digunakan untuk menampilkan data yang disimpan dalam keadaan yang tergantung pada data lain dari negara.  Jika ternyata Anda memanggil beberapa metode di dalam properti yang dihitung atau menulis beberapa nilai ke variabel status lainnya, ini mungkin berarti Anda melakukan sesuatu yang salah.  Pertimbangkan sebuah contoh. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {   data() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {       <span class="hljs-attr"><span class="hljs-attr">array</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]     };   },   <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: {     reversedArray() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.array.reverse(); <span class="hljs-comment"><span class="hljs-comment">//   -         }   } };</span></span></code> </pre> <br>  Jika kami mencoba mencetak <code>array</code> dan <code>reversedArray</code> <code>array</code> , kami akan melihat bahwa kedua array berisi nilai yang sama. <br><br><pre> <code class="javascript hljs"> : [ <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> ]  : [ <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> ]</code> </pre> <br>  Ini karena properti <code>reversedArray</code> dihitung memodifikasi properti <code>array</code> asli dengan memanggil metode <code>.reverse()</code> .  Ini adalah contoh yang cukup sederhana yang menunjukkan perilaku sistem yang tidak terduga.  Lihatlah contoh lain. <br><br>  Misalkan kita memiliki komponen yang menampilkan informasi terperinci tentang harga barang atau jasa yang termasuk dalam urutan tertentu. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {  <span class="hljs-attr"><span class="hljs-attr">props</span></span>: {    <span class="hljs-attr"><span class="hljs-attr">order</span></span>: {      <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>,      <span class="hljs-attr"><span class="hljs-attr">default</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({})    }  },  <span class="hljs-attr"><span class="hljs-attr">computed</span></span>:{    grandTotal() {      <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> total = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.order.total + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.order.tax) * (<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.order.discount);      <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$emit(<span class="hljs-string"><span class="hljs-string">'total-change'</span></span>, total)      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> total.toFixed(<span class="hljs-number"><span class="hljs-number">2</span></span>);    }  } }</code> </pre> <br>  Di sini kami telah membuat properti yang dihitung yang menampilkan total biaya pesanan, termasuk pajak dan diskon.  Karena kami tahu bahwa nilai total pesanan berubah di sini, kami dapat mencoba meningkatkan peristiwa yang memberi tahu komponen induk tentang perubahan <code>grandTotal</code> . <br><br><pre> <code class="javascript hljs">&lt;price-details :order=<span class="hljs-string"><span class="hljs-string">"order"</span></span>               @total-change=<span class="hljs-string"><span class="hljs-string">"totalChange"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">price-details</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> export default {  //        methods: {    totalChange(grandTotal) {      if (this.isSpecialCustomer) {        this.order = {          ...this.order,          discount: this.order.discount + 0.1        };      }    }  } };</span></span></code> </pre> <br>  Sekarang bayangkan bahwa kadang-kadang, meskipun sangat jarang, muncul situasi di mana kami bekerja dengan pelanggan khusus.  Kami memberi pelanggan ini diskon 10% tambahan.  Kami dapat mencoba mengubah objek <code>order</code> dan meningkatkan ukuran diskon dengan menambahkan <code>0.1</code> ke properti diskonnya. <br><br>  Namun, ini akan mengarah pada kesalahan buruk. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/067/865/193/0678651933e04231a483eeb7497c8dac.png"></div><br>  <i><font color="#999999">Pesan kesalahan</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e31/2ac/db6/e312acdb688bafe5b4af85077c5f6c02.png"></div><br>  <i><font color="#999999">Perhitungan nilai pesanan salah untuk pelanggan khusus</font></i> <br><br>  Dalam situasi yang serupa, yang berikut ini terjadi: properti yang dihitung terus-menerus, dalam loop tak terbatas, "diceritakan kembali".  Kami mengubah diskon, properti yang dihitung bereaksi terhadap ini, menghitung ulang total biaya pesanan dan menghasilkan suatu peristiwa.  Saat memproses peristiwa ini, diskon meningkat lagi, ini menyebabkan perhitungan ulang properti yang dihitung, dan seterusnya - hingga tak terbatas. <br><br>  Tampaknya bagi Anda bahwa kesalahan seperti itu tidak dapat dibuat dalam aplikasi nyata.  Tapi benarkah begitu?  Skrip kami (jika hal seperti ini terjadi dalam aplikasi ini) akan sangat sulit untuk di-debug.  Kesalahan seperti itu akan sangat sulit dilacak.  Faktanya adalah bahwa untuk kesalahan ini terjadi, perlu bahwa pesanan dibuat oleh pembeli khusus, dan satu pesanan tersebut dapat memiliki 1000 pesanan reguler. <br><br><h2>  <font color="#3AC1EF">Mengubah Properti Bertumpuk</font> </h2><br>  Terkadang pengembang mungkin tergoda untuk mengedit sesuatu di properti dari properti, yang merupakan objek atau array.  Keinginan seperti itu dapat didikte oleh kenyataan bahwa sangat ‚Äúsederhana‚Äù untuk melakukannya.  Tetapi apakah itu sepadan?  Pertimbangkan sebuah contoh. <br><br><pre> <code class="javascript hljs">&lt;template&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"hello"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Name: {{product.name}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Price: {{product.price}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Stock: {{product.stock}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"addToCart"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"product.stock &lt;= 0"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Add to card</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/template&gt; export default {  name: "HelloWorld",  props: {    product: {      type: Object,      default: () =&gt; ({})    }  },  methods: {    addToCart() {      if (this.product.stock &gt; 0) {        this.$emit("add-to-cart");        this.product.stock--;      }    }  } };</span></span></code> </pre> <br>  Di sini kita memiliki komponen <code>Product.vue</code> , yang menampilkan nama produk, nilainya, dan jumlah barang yang kita miliki.  Komponen juga menampilkan tombol yang memungkinkan pembeli untuk memasukkan barang ke keranjang.  Tampaknya akan sangat mudah dan nyaman untuk mengurangi nilai properti <code>product.stock</code> setelah mengklik tombol.  Untuk melakukan ini sangat sederhana.  Tetapi jika Anda melakukan hal itu, Anda mungkin mengalami beberapa masalah: <br><br><ul><li>  Kami melakukan perubahan (mutasi) dari properti dan tidak melaporkan apa pun kepada entitas induk. </li><li>  Hal ini dapat menyebabkan perilaku sistem yang tidak terduga, atau, lebih buruk lagi, munculnya kesalahan aneh. </li><li>  Kami memperkenalkan beberapa logika ke dalam komponen <code>product</code> , yang mungkin seharusnya tidak ada di dalamnya. </li></ul><br>  Bayangkan situasi hipotetis di mana pengembang lain pertama kali menemukan kode kita dan melihat komponen induk. <br><br><pre> <code class="javascript hljs">&lt;template&gt;   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Product</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:product</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"product"</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">add-to-cart</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"addProductToCart(product)"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Product</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/template&gt; import Product from "./</span></span>components/Product<span class="hljs-string"><span class="hljs-string">"; export default {  name: "</span></span>App<span class="hljs-string"><span class="hljs-string">",  components: {    Product  },  data() {    return {      product: {        name: "</span></span>Laptop<span class="hljs-string"><span class="hljs-string">",        price: 1250,        stock: 2      }    };  },  methods: {    addProductToCart(product) {      if (product.stock &gt; 0) {        product.stock--;      }    }  } };</span></span></code> </pre> <br>  Pemikiran pengembang ini mungkin sebagai berikut: "Rupanya, saya perlu mengurangi <code>product.stock</code> dalam metode <code>addProductToCart</code> "  Tetapi jika ini dilakukan, kita akan menemukan kesalahan kecil.  Jika sekarang tekan tombol, jumlah barang akan dikurangi bukan oleh 1, tetapi oleh 2. <br><br>  Bayangkan ini adalah kasus khusus ketika cek semacam itu dibuat hanya untuk barang langka atau sehubungan dengan ketersediaan diskon khusus.  Jika kode ini masuk ke produksi, maka semuanya dapat berakhir dengan fakta bahwa pelanggan kami akan, bukannya 1 salinan produk, membeli 2 salinan. <br><br>  Jika contoh ini terasa tidak meyakinkan bagi Anda, bayangkan skenario lain.  Biarkan itu bentuk yang diisi pengguna.  Kami meneruskan esensi <code>user</code> ke formulir sebagai properti dan akan mengedit nama dan alamat email pengguna.  Kode yang ditunjukkan di bawah ini mungkin tampak "benar." <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   &lt;template&gt;  &lt;div&gt;    &lt;span&gt; Email {{user.email}}&lt;/span&gt;    &lt;span&gt; Name {{user.name}}&lt;/span&gt;    &lt;user-form :user="user" @submit="updateUser"/&gt;  &lt;/div&gt; &lt;/template&gt; import UserForm from "./UserForm" export default {  components: {UserForm},  data() {   return {     user: {      email: 'loreipsum@email.com',      name: 'Lorem Ipsum'     }   }  },  methods: {    updateUser() {     //            }  } } //   UserForm.vue &lt;template&gt;  &lt;div&gt;   &lt;input placeholder="Email" type="email" v-model="user.email"/&gt;   &lt;input placeholder="Name" v-model="user.name"/&gt;   &lt;button @click="$emit('submit')"&gt;Save&lt;/button&gt;  &lt;/div&gt; &lt;/template&gt; export default {  props: {    user: {     type: Object,     default: () =&gt; ({})    }  } }</span></span></code> </pre> <br>  Sangat mudah untuk memulai dengan <code>user</code> menggunakan arahan <code>v-model</code> .  Vue.js memungkinkan ini.  Kenapa tidak lakukan itu saja?  Pikirkan tentang itu: <br><br><ul><li>  Bagaimana jika ada persyaratan bahwa Anda perlu menambahkan tombol Batal ke formulir, mengklik yang membatalkan perubahan yang dilakukan? </li><li>  Bagaimana jika panggilan server gagal?  Bagaimana cara membatalkan perubahan objek <code>user</code> ? </li><li>  Apakah kami benar-benar ingin menampilkan nama dan alamat email yang diubah di komponen induk sebelum menyimpan perubahan yang sesuai? </li></ul><br>  Cara sederhana untuk "memperbaiki" masalah mungkin dengan mengkloning objek <code>user</code> sebelum mengirimnya sebagai properti: <br><br><pre> <code class="javascript hljs">&lt;user-form :user=<span class="hljs-string"><span class="hljs-string">"{...user}"</span></span>&gt;</code> </pre> <br>  Meskipun ini mungkin berhasil, kami hanya menghindari masalah, tetapi tidak menyelesaikannya.  Komponen <code>UserForm</code> kami harus memiliki status lokal sendiri.  Inilah yang bisa kita lakukan. <br><br><pre> <code class="javascript hljs">&lt;template&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Email"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"email"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"form.email"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Name"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"form.name"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"onSave"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Save</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"onCancel"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Save</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> export default {  props: {    user: {     type: Object,     default: () =&gt; ({})    }  },  data() {   return {    form: {}   }  },  methods: {   onSave() {    this.$emit('submit', this.form)   },   onCancel() {    this.form = {...this.user}    this.$emit('cancel')   }  }  watch: {    user: {     immediate: true,     handler: function(userFromProps){      if(userFromProps){        this.form = {          ...this.form,          ...userFromProps        }      }     }    }  } }</span></span></code> </pre> <br>  Meskipun kode ini jelas terlihat agak rumit, ini lebih baik daripada versi sebelumnya.  Ini memungkinkan Anda untuk menyingkirkan masalah di atas.  Kami mengharapkan ( <code>watch</code> ) perubahan pada properti <code>user</code> dan menyalinnya ke dalam data <code>form</code> internal.  Hasilnya, formulir sekarang memiliki statusnya sendiri, dan kami mendapatkan fitur berikut: <br><br><ul><li>  Anda dapat membatalkan perubahan dengan menetapkan kembali formulir: <code>this.form = {...this.user}</code> . </li><li>  Kami memiliki kondisi terisolasi untuk formulir. </li><li>  Tindakan kami tidak memengaruhi komponen induk jika kami tidak membutuhkannya. </li><li>  Kami mengendalikan apa yang terjadi ketika kami mencoba menyimpan perubahan. </li></ul><br><h2>  <font color="#3AC1EF">Akses langsung ke komponen induk</font> </h2><br>  Jika komponen merujuk ke komponen lain dan melakukan beberapa tindakan di atasnya, ini dapat menyebabkan kontradiksi dan kesalahan, ini dapat mengakibatkan perilaku aplikasi yang aneh dan dalam penampilan komponen terkait di dalamnya. <br><br>  Pertimbangkan contoh yang sangat sederhana - komponen yang mengimplementasikan menu drop-down.  Bayangkan bahwa kita memiliki komponen <code>dropdown</code> (induk) dan komponen <code>dropdown-menu</code> (anak).  Ketika pengguna mengklik pada item menu tertentu, kita perlu menutup menu <code>dropdown-menu</code> .  Menyembunyikan dan menunjukkan komponen ini dilakukan oleh komponen induk dari <code>dropdown</code> .  Lihatlah sebuah contoh. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Dropdown.vue ( ) &lt;template&gt;  &lt;div&gt;    &lt;button @click="showMenu = !showMenu"&gt;Click me&lt;/button&gt;    &lt;dropdown-menu v-if="showMenu" :items="items"&gt;&lt;/dropdown-menu&gt;  &lt;/div&gt; &lt;template&gt; export default {  props: {   items: Array  },  data() {   return {     selectedOption: null,     showMenu: false   }  } } // DropdownMenu.vue ( ) &lt;template&gt;  &lt;ul&gt;    &lt;li v-for="item in items" @click="selectOption(item)"&gt;{{item.name}}&lt;/li&gt;  &lt;/ul&gt; &lt;template&gt; export default {  props: {   items: Array  },  methods: {    selectOption(item) {     this.$parent.selectedOption = item     this.$parent.showMenu = false    }  } }</span></span></code> </pre> <br>  Perhatikan metode <code>selectOption</code> .  Meskipun ini jarang terjadi, seseorang mungkin ingin langsung menghubungi <code>$parent</code> .  Keinginan ini dapat dijelaskan oleh fakta bahwa itu sangat sederhana untuk dilakukan. <br><br>  Pada pandangan pertama, sepertinya kode seperti itu berfungsi dengan benar.  Tetapi di sini Anda dapat melihat beberapa masalah: <br><br><ul><li>  Bagaimana jika kita mengubah properti <code>showMenu</code> atau <code>selectedOption</code> ?  Menu dropdown tidak akan bisa ditutup dan tidak ada item yang akan dipilih. </li><li>  Bagaimana jika Anda perlu menghidupkan menu <code>dropdown-menu</code> menggunakan semacam transisi? </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Dropdown.vue ( ) &lt;template&gt;  &lt;div&gt;    &lt;button @click="showMenu = !showMenu"&gt;Click me&lt;/button&gt;    &lt;transition name="fade"&gt;      &lt;dropdown-menu v-if="showMenu" :items="items"&gt;&lt;/dropdown-menu&gt;    &lt;/dropdown-menu&gt;  &lt;/div&gt; &lt;template&gt;</span></span></code> </pre> <br>  Kode ini, sekali lagi, karena perubahan <code>$parent</code> , tidak akan berfungsi.  Komponen <code>dropdown</code> tidak lagi menjadi induk dari menu <code>dropdown-menu</code> .  Sekarang induk <code>dropdown-menu</code> adalah komponen <code>transition</code> . <br><br>  Properti diturunkan hierarki komponen, acara dilewatkan.  Kata-kata ini mengandung arti pendekatan yang tepat untuk menyelesaikan masalah kita.  Berikut adalah contoh yang dimodifikasi untuk acara. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Dropdown.vue ( ) &lt;template&gt;  &lt;div&gt;    &lt;button @click="showMenu = !showMenu"&gt;Click me&lt;/button&gt;    &lt;dropdown-menu v-if="showMenu" :items="items" @select-option="onOptionSelected"&gt;&lt;/dropdown-menu&gt;  &lt;/div&gt; &lt;template&gt; export default {  props: {   items: Array  },  data() {   return {     selectedOption: null,     showMenu: false   }  },  methods: {    onOptionSelected(option) {      this.selectedOption = option      this.showMenu = true    }  } } // DropdownMenu.vue ( ) &lt;template&gt;  &lt;ul&gt;    &lt;li v-for="item in items" @click="selectOption(item)"&gt;{{item.name}}&lt;/li&gt;  &lt;/ul&gt; &lt;/template&gt; export default {  props: {   items: Array  },  methods: {    selectOption(item) {     this.$emit('select-option', item)    }  } }</span></span></code> </pre> <br>  Sekarang, berkat penggunaan acara, komponen anak tidak lagi terikat pada komponen induk.  Kita dapat dengan bebas mengubah properti dengan data di komponen induk dan menggunakan transisi animasi.  Namun, kami mungkin tidak memikirkan bagaimana kode kami dapat memengaruhi komponen induk.  Kami hanya memberi tahu komponen ini tentang apa yang terjadi.  Dalam hal ini, komponen <code>dropdown</code> itu sendiri membuat keputusan tentang bagaimana menangani pilihan item menu oleh pengguna dan operasi penutupan menu. <br><br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Kode terpendek tidak selalu paling berhasil.  Teknik pengembangan yang melibatkan hasil "sederhana dan cepat" sering cacat.  Untuk menggunakan bahasa pemrograman, pustaka atau kerangka kerja dengan benar, Anda perlu kesabaran dan waktu.  Ini berlaku untuk Vue.js. <br><br>  <b>Pembaca yang budiman!</b>  Sudahkah Anda mengalami masalah dalam praktik, seperti yang dibahas dalam artikel ini? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id463327/">https://habr.com/ru/post/id463327/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id463311/index.html">CTT dalam solusi server. Versi kedua + pengumuman yang ketiga, dengan kemampuan untuk menyentuh</a></li>
<li><a href="../id463313/index.html">Pendekatan alternatif untuk berlangganan acara, atau apakah EventObject benar-benar diperlukan?</a></li>
<li><a href="../id463317/index.html">Rincian teknis peretasan bank Capital One di AWS</a></li>
<li><a href="../id463321/index.html">Keranjang kegunaan dan checkout: analisis dari 20 toko online teratas Rusia</a></li>
<li><a href="../id463325/index.html">Game Designer Reflection: Karakter untuk Game yang Belum Keluar</a></li>
<li><a href="../id463329/index.html">Pengembangan diagram pohon dinamis menggunakan SVG dan Vue.js</a></li>
<li><a href="../id463331/index.html">Klien Apollo. Sekarang dengan React hooks</a></li>
<li><a href="../id463333/index.html">Memilih sistem manajemen pengujian pada 2019</a></li>
<li><a href="../id463335/index.html">Menggunakan analisa statis PVS-Studio dalam pengembangan untuk sistem tertanam dalam C dan C ++</a></li>
<li><a href="../id463337/index.html">Menggunakan Immer untuk Mengelola Status Aplikasi Bereaksi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>