<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äç‚öïÔ∏è üöî üçè Personalizando Jira a tus necesidades. Flujo perfecto y boleto perfecto üë©üèæ‚Äçü§ù‚Äçüë®üèº üë©üèΩ‚Äçüåæ üçä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si trabaja en una empresa de TI, lo m√°s probable es que sus procesos se basen en el conocido producto Atlassian: Jira. Hay muchos rastreadores de tare...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Personalizando Jira a tus necesidades. Flujo perfecto y boleto perfecto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/424655/"><img src="https://habrastorage.org/webt/wm/nq/on/wmnqonj46aq2yavvhzsepa06qjo.jpeg"><br><br>  Si trabaja en una empresa de TI, lo m√°s probable es que sus procesos se basen en el conocido producto Atlassian: Jira.  Hay muchos rastreadores de tareas en el mercado para resolver los mismos problemas, incluidas las soluciones de c√≥digo abierto (Trac, Redmine, Bugzilla), pero quiz√°s Jira es la m√°s utilizada en la actualidad. <br><br>  Mi nombre es Dmitry Semenikhin, soy un l√≠der de equipo en Badoo.  En una breve serie de art√≠culos, le dir√© exactamente c√≥mo usamos Jira, c√≥mo lo personalizamos para nuestros procesos, qu√© cosas buenas se "atornillaron" en la parte superior y c√≥mo convertimos el rastreador de problemas en un √∫nico centro de comunicaci√≥n para la tarea y simplificamos nuestra vida.  En este art√≠culo, ver√° nuestro flujo interno, aprender√° c√≥mo puede "torcer" su Jira y leer√° sobre caracter√≠sticas adicionales de la herramienta que quiz√°s no conozca. <br><br>  El art√≠culo est√° dirigido principalmente a aquellos que ya usan Jira, pero pueden tener dificultades para integrar sus caracter√≠sticas est√°ndar en los procesos existentes en la empresa.  Adem√°s, el art√≠culo puede ser √∫til para las empresas que usan otros rastreadores de tareas, pero han encontrado algunas restricciones y est√°n considerando un cambio de decisi√≥n.  El art√≠culo no se basa en el principio de "soluci√≥n de problemas", en √©l describo las herramientas y caracter√≠sticas existentes que creamos en torno a Jira, as√≠ como las tecnolog√≠as que utilizamos para implementarlas. <br><a name="habracut"></a><br><h1>  Caracter√≠sticas adicionales de Jira </h1><br>  Para que el siguiente texto sea m√°s comprensible, descubramos qu√© herramientas nos proporciona Jira para la implementaci√≥n de la Lista de deseos no est√°ndar, aquellas que van m√°s all√° de la funcionalidad est√°ndar de Jira. <br><br><h3>  API REST </h3><br>  En general, una llamada de comando de API es una solicitud HTTP a una URL de API que indica el m√©todo (GET, PUT, POST y DELETE), el comando y el cuerpo de la solicitud.  El cuerpo de la solicitud, as√≠ como la respuesta de la API, est√° en formato JSON.  Un ejemplo de una solicitud que devuelve una representaci√≥n JSON de un ticket: <br><br><pre><code class="json hljs">GET /rest/api/latest/issue/{ticket_number}</code> </pre> <br>  Usando la API, puede, usando scripts en cualquier lenguaje de programaci√≥n: <br><br><ul><li>  crear boletos; <br></li><li>  modificar las propiedades de los tickets (integrados y personalizados); <br></li><li>  escribir comentarios; <br></li><li>  usando JQL (lenguaje de consulta incorporado) para recibir cualquier lista de tickets; <br></li><li>  y mucho mas <br></li></ul><br>  La documentaci√≥n detallada de la API est√° disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Escribimos nuestro propio cliente Jira API de alto nivel en PHP, que implementa todos los comandos que necesitamos.  Aqu√≠ hay un ejemplo de comandos para trabajar con comentarios: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_post(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $comment]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id, $new_text)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_put(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $new_text]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_delete(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>); }</code> </pre><br><h3>  Webhooks </h3><br>  Con webhook, puede configurar la llamada de una funci√≥n de devoluci√≥n de llamada externa en su host para varios eventos en Jira.  Al mismo tiempo, puede configurar tantas reglas como desee para que diferentes URL "se contraigan" para diferentes eventos y para tickets que coincidan con el filtro especificado en el webhook.  La interfaz de configuraci√≥n de webhooks est√° disponible para el administrador de Jira. <br><br>  Como resultado, puede crear reglas como esta: <br><br>  <b>Nombre</b> : "SRV - Nueva caracter√≠stica creada / actualizada" <br>  <b>URL</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.myremoteapp.com/webhookreceiver</a> <br>  <b>Alcance</b> : Proyecto = SRV Y escriba ('Nueva funci√≥n') <br>  <b>Eventos</b> : Problema actualizado, Problema creado <br><br>  En este ejemplo, se llamar√° a la URL especificada para la creaci√≥n del ticket y los eventos de cambio correspondientes al filtro <i>Scope</i> .  Al mismo tiempo, el cuerpo de la solicitud contendr√° toda la informaci√≥n necesaria sobre qu√© ha cambiado exactamente y qu√© evento ha ocurrido. <br><br>  Es importante comprender que Jira no garantiza que su evento ser√° entregado.  Si la URL externa no respondi√≥ o respondi√≥ con un error, esto no ser√° visible en ninguna parte (excepto los registros, tal vez).  Por lo tanto, el controlador de eventos webhook debe ser lo m√°s confiable posible.  Por ejemplo, puede poner en cola eventos e intentar procesarlos hasta que tenga √©xito.  Esto ayudar√° a resolver problemas con servicios temporalmente no disponibles, por ejemplo, cualquier base de datos externa necesaria para el correcto procesamiento del evento. <br><br>  La documentaci√≥n detallada sobre webhooks est√° disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h3>  Scriptrunner </h3><br>  Este es un complemento para Jira, una herramienta muy poderosa que le permite personalizar una gran cantidad de Jira (incluida la capacidad de reemplazar webhooks).  El uso de este complemento requiere conocimiento de Groovy.  La principal ventaja de la herramienta para nosotros es que puede incorporar l√≥gica personalizada en el flujo en l√≠nea.  Su c√≥digo de script se ejecutar√° inmediatamente en el entorno Jira en respuesta a una acci√≥n espec√≠fica.  Por ejemplo, puede crear su propio bot√≥n en la interfaz del ticket; al hacer clic en √©l, se crear√°n tickets asociados con la tarea actual o se ejecutar√°n pruebas unitarias para esta tarea.  Y si de repente algo sale mal, usted como usuario lo sabr√° de inmediato. <br><br>  Los interesados ‚Äã‚Äãpueden leer la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> . <br><br><h1>  Flow: lo que se esconde debajo del cap√≥ </h1><br>  Y ahora sobre c√≥mo aplicamos caracter√≠sticas adicionales de Jira en nuestros proyectos.  Considere esto en el contexto de pasar por nuestro ticket de flujo t√≠pico desde la creaci√≥n hasta el cierre.  Al mismo tiempo, le contar√© sobre el flujo en s√≠. <br><br><h3>  Abrir / acumular </h3><br>  Entonces, primero el boleto entra en la cartera de nuevos boletos con el estado <b>Abierto</b> .  Adem√°s, el l√≠der del componente, despu√©s de haber visto un nuevo ticket en su tablero, toma una decisi√≥n: asignar un ticket ahora al desarrollador o enviarlo al backlog de tickets conocidos (estado de <b>Backlog</b> ) para que pueda asignarlo m√°s tarde cuando aparezca un desarrollador gratuito y se cerrar√°n los tickets de mayor prioridad.  Esto puede parecer extra√±o, ya que parece l√≥gico hacer lo contrario: crear tickets en estado <i>Backlog</i> y luego traducirlos al estado Open.  Pero hemos echado ra√≠ces precisamente en este esquema.  Le permite configurar f√°cilmente filtros para reducir el tiempo de decisi√≥n para nuevos tickets.  Un ejemplo de un filtro JQL que muestra nuevas tareas para un cliente potencial: <br><br> <code>Project = SRV AND assignee is EMPTY AND status in (Open)</code> <br> <br><h3>  En progreso </h3><br><div class="spoiler">  <b class="spoiler_title">Matices t√©cnicos de trabajar con Git</b> <div class="spoiler_text">  Cabe se√±alar que trabajamos en cada tarea en una rama Git separada.  En cuanto a esto, tenemos un acuerdo de que el nombre de la sucursal al principio debe contener el n√∫mero de ticket.  Por ejemplo, <i>SRV-123_new_super_feature</i> .  Adem√°s, los comentarios para cada confirmaci√≥n en la rama deben contener el n√∫mero de ticket en el formato [SRV-123]: {comentario}.  Necesitamos dicho formato, por ejemplo, para la eliminaci√≥n correcta de una tarea "mala" de una compilaci√≥n.  C√≥mo se hace esto se describe en detalle en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> . <br><br>  Estos requisitos est√°n controlados por ganchos Git.  Por ejemplo, aqu√≠ est√° el contenido de prepare-commit-msg, que prepara un comentario para el commit, obteniendo el n√∫mero del ticket del nombre de la sucursal actual: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash b=`git symbolic-ref HEAD| sed -e 's|^refs/heads/||' | sed -e 's|_.*||'` c=`cat $1` if [ -n "$b" ] &amp;&amp; [[ "$c" != "[$b]:"* ]] then echo "[$b]: $c" &gt; $1 fi</span></span></code> </pre><br>  Si intenta impulsar una confirmaci√≥n con un comentario "incorrecto", dicha inserci√≥n ser√° rechazada.  Tambi√©n se rechazar√° un intento de iniciar una sucursal sin un n√∫mero de ticket al principio. <br></div></div><br>  Cuando un boleto golpea al desarrollador, lo primero que descompone.  El resultado de la descomposici√≥n es la idea del desarrollador de c√≥mo resolver el problema y cu√°nto tiempo llevar√° la soluci√≥n.  Una vez que se han aclarado todos los detalles principales, el ticket se transfiere al estado <b>En progreso</b> y el desarrollador comienza a escribir el c√≥digo. <br><br>  Es habitual que establezcamos la fecha de vencimiento de la tarea en el momento en que se transfiere al estado En progreso.  Si el desarrollador no hizo esto, recibir√° un recordatorio en el mensajero corporativo de HipChat.  Un gui√≥n especial cada dos horas: <br><br><ul><li>  el uso de Jira REST API selecciona tickets en estado de progreso con un campo de fecha de vencimiento vac√≠o ( <i>proyecto = SRV Y estado = 'En curso' Y la fecha de vencimiento es VAC√çA</i> ); <br></li><li>  selecciona tickets incompletos con fecha de vencimiento anterior a la fecha actual ( <i>proyecto = SRV Y estado = 'En progreso'</i> <i>Y la fecha de vencimiento no est√° VAC√çA Y fecha de vencimiento &lt;ahora ()</i> ); <br></li><li>  reconoce al desarrollador para cada ticket leyendo el campo correspondiente en el ticket, as√≠ como el lead del desarrollador; <br></li><li>  agrupa los tickets de desarrolladores y clientes potenciales y env√≠a recordatorios a HipChat usando su API. <br></li></ul><br>  Despu√©s de realizar todas las confirmaciones necesarias, el desarrollador empuja la rama a un nabo com√∫n.  En este caso, el gancho Git posterior a la recepci√≥n se dispara, lo que hace muchas cosas interesantes: <br><br><ul><li>  El nombre de la rama de Git, as√≠ como los comentarios sobre los commits, se verifican para cumplir con nuestras reglas; <br></li><li>  se verifica que el ticket con el que est√° asociada la sucursal no est√° cerrado (no puede insertar un nuevo c√≥digo en tickets cerrados); <br></li><li>  Se verifica la sintaxis de los archivos PHP modificados (PHP -l <i>nombre_archivo.php</i> ); <br></li><li>  se verifica el formato; <br></li><li>  si el ticket en el que se empuja la sucursal est√° en estado <i>Abierto</i> , se transferir√° autom√°ticamente al estado <i>En progreso</i> ; <br></li><li>  el ticket se adjunta a la sucursal, la entrada correspondiente se realiza en el campo personalizado del ticket <i>Commits</i> utilizando la API de Jira.  Se ve as√≠: <br></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/yt/-u/snyt-ud30nzzbgr4seaehcccnme.png"></div><br>  ( <i>branchdiff</i> es un enlace a diff de la rama con el encabezado desde el cual se origin√≥ la rama actual en nuestra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">herramienta de</a> revisi√≥n de c√≥digo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Codeisok</a> ); <br><br><ul><li>  Se crea un comentario en el ticket con todos los commits en este push. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5p/np/28/5pnp284b9eobeeyafn3hfjgcimu.png"></div><br>  <i>(Aida es el nombre condicional de nuestro complejo de automatizaci√≥n para trabajar con Jira, Git y no solo. Es a partir de este nombre que aparecen comentarios autom√°ticos en el ticket. Escribimos m√°s sobre Aida en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> ).</i> <br>  Un clic en el hash de la confirmaci√≥n abre diff con la revisi√≥n previa de la rama (mostrar√© a continuaci√≥n c√≥mo se ve); <br></li><li>  comprueba si hay archivos en la rama que pueden requerir traducci√≥n a los idiomas admitidos (por ejemplo, plantillas de p√°gina web), y si hay alguno, entonces el nuevo valor \ Modificado se establece en el campo personalizado del ticket Lexems.  Esto asegura que el boleto no ir√° a producci√≥n sin una traducci√≥n completa; <br></li><li>  el nombre del empleado que empuja la sucursal se agrega a la lista de desarrolladores (un campo personalizado del ticket <i>Desarrolladores</i> ) <br></li></ul><br><h3>  En revisi√≥n </h3><br>  Despu√©s de escribir el c√≥digo y asegurarse de que se cumplan todos los requisitos para la tarea y que las pruebas no se rompan, el desarrollador asigna un ticket al revisor (estado <b>En revisi√≥n</b> ).  Por lo general, el desarrollador decide qui√©n revisar√° su boleto.  Lo m√°s probable es que sea otro desarrollador que est√© bien versado en la parte correcta del c√≥digo.  La revisi√≥n se lleva a cabo utilizando la herramienta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Codeisok</a> , que se abre inmediatamente con la diferencia deseada haciendo clic en el enlace <i>branchdiff</i> en el <i>campo</i> Ticket de <i>commits</i> o en el comentario como hash de commit en los comentarios. <br><br>  El revisor ve algo como esto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ty/eg/ti/tyegti15pqhzbdgiebcw1evm8pi.png"></div><br>  Una vez finalizada la revisi√≥n, el revisor presiona el bot√≥n <i>Finalizar</i> y, entre otras cosas, en este momento sucede lo siguiente: <br><br><ul><li>  usando la API JIra, se crea un comentario en el ticket con comentarios del revisor en el contexto del c√≥digo.  Se parece a esto: <br></li></ul><br><img src="https://habrastorage.org/webt/0k/n6/ka/0kn6kaydki4umhdxzmjebixy6eu.png"><br><ul><li>  si hubo alg√∫n comentario sobre el c√≥digo y el revisor decidi√≥ volver a abrir el ticket, el desarrollador recibir√° una notificaci√≥n al respecto en HipChat (esto se hace utilizando la regla de webhook, que funciona en la reapertura); <br></li><li>  El campo del ticket de <i>revisores</i> se rellena. <br></li></ul><br><h3>  Resuelto </h3><br>  Adem√°s, si la revisi√≥n fue exitosa, el ticket se env√≠a al trabajo pendiente de los ingenieros de control de calidad en el estado <b>Resuelto</b> .  Pero al mismo tiempo, usando webhook para el evento resuelto, las pruebas autom√°ticas del c√≥digo de sucursal se inician en segundo plano.  Despu√©s de unos minutos, aparecer√° un nuevo comentario en el ticket, que le informar√° de los resultados de la prueba. <br><br><img src="https://habrastorage.org/webt/um/ff/cc/umffccnuyujwg3ypdz3scdcrrou.png"><br><br>  Adem√°s, en cualquier momento, puede iniciar manualmente una ejecuci√≥n de prueba repetida haciendo clic en el bot√≥n especial Ejecutar pruebas de unidad en el men√∫ del ticket.  Despu√©s de una ejecuci√≥n exitosa, aparecer√° un nuevo comentario en el ticket, similar al anterior. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/sk/65/ttsk65fr3egs9fbjpa7v6pbdzta.png"></div><br>  De hecho, este bot√≥n es uno de los estados de tareas adicionales en el flujo de trabajo de Jira, una traducci√≥n en la que se activa un script Groovy para el complemento ScriptRunner.  El script llama a una URL externa, que inicia la ejecuci√≥n de la prueba, y si la URL respondi√≥ con √©xito, el ticket vuelve a su estado anterior (en nuestro caso, <i>Resuelto</i> ). <br><br><h3>  En tiro / En tiro - OK </h3><br>  La tarea se prueba primero en un entorno de desarrollo.  Si todo est√° bien, se crea un disparo (por ejemplo, haciendo clic en el enlace <i>Crear disparo</i> en el campo <i>Confirmar</i> ), el directorio en el servidor dedicado al que se copian los cambios del ticket adyacentes al maestro actual.  El servidor funciona con datos de producci√≥n: las bases de datos y los servicios son los mismos que sirven a los usuarios reales.  Por lo tanto, el probador puede abrir un sitio web o conectarse a la toma utilizando un cliente m√≥vil y "aislar" la funci√≥n en el entorno de producci√≥n.  "Aislado" significa que no se ejecuta ning√∫n otro c√≥digo / funcionalidad, excepto el nuevo de la rama y el maestro actual.  Por lo tanto, esta etapa de prueba es quiz√°s la principal, ya que le permite al ingeniero de control de calidad encontrar el problema de manera m√°s confiable directamente en el problema de prueba. <br><br>  Se accede a los recursos de disparo utilizando URL especiales que se generan en el script de creaci√≥n de disparo y se colocan en el encabezado del ticket utilizando la API de Jira.  Como resultado, vemos enlaces al sitio, panel de administraci√≥n, registros y otras herramientas que se ejecutan en un entorno de disparo: <br><br><img src="https://habrastorage.org/webt/kf/yk/e_/kfyke_qa3yjtezpyqx0-edwghfw.png"><br><br>  Adem√°s, en el momento de la generaci√≥n del disparo, se inicia un script que analiza el contenido de los archivos modificados y crea solicitudes para la traducci√≥n de los nuevos tokens encontrados.  Una vez completada la traducci√≥n, el valor del campo <i>Lexems se</i> cambia a Listo y el ticket se puede agregar a la compilaci√≥n. <br><br>  Si la prueba en el disparo fue exitosa, el boleto se transfiere al estado <b>In Shot - OK.</b> <br><br><h3>  En Build / In Build - OK </h3><br>  Subimos el c√≥digo dos veces al d√≠a, por la ma√±ana y por la noche.  Para hacer esto, se crea una rama de construcci√≥n especial, que eventualmente se fusionar√° con master y se presentar√° "en batalla". <br><br>  En el momento de compilar la rama de compilaci√≥n, un script especial que utiliza una consulta JQL recibe una lista de tickets en el estado <i>In Shot - OK</i> e intenta congelarlos en la rama de compilaci√≥n cuando se cumplen todas las condiciones siguientes: <br><br><ul><li>  la traducci√≥n del boleto se ha completado o no es necesario traducir <i>nada</i> ( <i>Lexems en ('No', 'Done')</i> ); <br></li><li>  el desarrollador est√° presente en el lugar de trabajo (el sistema de fusi√≥n autom√°tica verifica en la base interna si el desarrollador est√° de vacaciones o en licencia por enfermedad, y si es as√≠, el boleto solo puede ser congelado manualmente por los ingenieros de liberaci√≥n u otro desarrollador responsable, que se indica en el campo especial <i>Vice Developer</i> ; el l√≠der del desarrollador ausente en este caso recibe una notificaci√≥n de que el ticket no se puede agregar autom√°ticamente a la compilaci√≥n); <br></li><li>  el ticket no tiene el indicador <i>Up in Build</i> establecido <i>por Developer</i> (este es un campo personalizado especial del ticket que le permite al desarrollador determinar cu√°ndo ir√° el ticket a la compilaci√≥n); <br></li><li>  la rama del ticket no depende de otra rama que a√∫n no haya alcanzado el maestro o la compilaci√≥n actual.  Hacemos nuestro mejor esfuerzo para evitar tal situaci√≥n, pero a veces esto sucede cuando el desarrollador crea su propia sucursal no desde el maestro, sino desde una sucursal de otro ticket, o cuando congela otra rama para s√≠ mismo.  Esto tambi√©n se puede hacer por casualidad, por lo que decidimos que la protecci√≥n adicional no har√≠a da√±o. <br></li></ul><br>  Vale la pena se√±alar que la fusi√≥n autom√°tica puede no ocurrir debido a un conflicto de fusi√≥n.  En este caso, el ticket se transfiere autom√°ticamente al estado <b>Reabrir</b> y se asigna al desarrollador, sobre el cual recibe inmediatamente una notificaci√≥n en HipChat, y se agrega un mensaje correspondiente al comentario del ticket.  Despu√©s de resolver el conflicto, el ticket vuelve a la compilaci√≥n. <br><br>  Si todo est√° bien y la rama del ticket se congela en la compilaci√≥n, el ticket se transfiere autom√°ticamente al estado <b>In Build</b> , y el nombre de la compilaci√≥n se escribe en el campo personalizado del ticket <i>Build_Name</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/bl/cq/teblcqsgvc0tgn82svazpssgmii.png"></div><br>  Adem√°s, con este valor, es f√°cil obtener una lista de tickets que se publicaron con cada compilaci√≥n.  Por ejemplo, buscar a alguien a quien culpar si algo sali√≥ mal. <br><br>  En la siguiente etapa, los ingenieros de control de calidad tambi√©n verifican si el c√≥digo de la tarea funciona correctamente junto con otras tareas en la compilaci√≥n.  Si todo est√° bien, el ticket se configura manualmente en <b>In Build - OK.</b> <br><br><h3>  En producci√≥n / En producci√≥n - OK / Cerrado </h3><br>  Adem√°s, en la compilaci√≥n, se ejecuta todo nuestro conjunto de pruebas (Unidad, integraci√≥n, Selenio, etc.).  Si todo est√° bien, la compilaci√≥n se congela en master y el c√≥digo se presenta para la producci√≥n.  El ticket se transfiere al estado <b>En producci√≥n.</b> <br><br>  Adem√°s, el desarrollador (o el cliente) se asegura de que la funci√≥n funcione correctamente en la producci√≥n y establece el estado del ticket <b>en producci√≥n: OK.</b> <br><br>  Despu√©s de dos semanas, los tickets en el estado <i>En producci√≥n - OK</i> se transfieren autom√°ticamente al estado <b>Cerrado</b> , si alguien no ha hecho esto manualmente antes. <br><br>  Tambi√©n vale la pena mencionar estados adicionales en los que se puede ubicar el boleto: <br><br><ul><li>  <b>Requisitos</b> : cuando no es posible obtener r√°pidamente del cliente las aclaraciones necesarias sobre la tarea, y sin ellos es imposible seguir trabajando en el ticket, el ticket se transfiere a este estado y se asigna al que necesita dar explicaciones; <br></li><li>  <b>Suspendido</b> : si el trabajo del ticket se suspende, por ejemplo, si el desarrollador est√° bloqueado por tareas de un equipo adyacente o se vio obligado a cambiar a una tarea m√°s urgente; <br></li><li>  <b>Reabierto</b> : se puede redescubrir una tarea para el desarrollador despu√©s de una revisi√≥n, despu√©s de la prueba, despu√©s de un intento fallido de fusionar una rama con el maestro. <br></li></ul><br>  Como resultado, un diagrama simplificado de nuestro flujo de trabajo se ve as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/cd/ue/-mcduen0-daw39ykqjhvp4rvdka.png"></div><br><h1>  Ticket - centro de comunicaci√≥n para la tarea </h1><br>  Como resultado de pasar el ticket por el flujo, su encabezado adquiere aproximadamente la siguiente forma: <br><br><img src="https://habrastorage.org/webt/c7/4t/qp/c74tqp2l7smg9unpuxpgzw3fhxo.png"><br><br>  ¬øQu√© m√°s es interesante aqu√≠ que hayamos personalizado para nosotros y que a√∫n no he mencionado? <br><br><ul><li>  <i>Componente</i> : se utiliza para agrupar un ticket dentro de un departamento grande.  Los diferentes subgrupos son responsables de los diferentes componentes y, en consecuencia, en sus paneles solo ven tareas para sus componentes.  Por ejemplo, puedo enumerar todos los errores abiertos para los componentes de mi equipo con esta consulta: <br><br><pre> <code class="php hljs">Project = SRV <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> type = Bug <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> status = Open <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> component in componentsLeadByUser(d.semenihin)</code> </pre> <br></li><li>  <i>Revisi√≥n</i> : si se necesita una revisi√≥n del c√≥digo.  Por defecto es necesario.  Si el valor del campo se establece en <i>No, el</i> ticket obtendr√° inmediatamente el estado <i>Resuelto.</i> <i><br></i> <br>  QA: ¬øel verificador necesita verificaci√≥n?  Por defecto es necesario.  Si el valor del campo se establece en <i>No, el</i> ticket pasar√° inmediatamente al estado <i>In Shot - OK.</i> <i><br></i> <br>  Sprint: en nuestro caso, es relevante solo para tareas con el tipo de Nueva Funci√≥n, un plan para el cual elaboramos con anticipaci√≥n durante una semana. <br></li><li>  <i>Fecha de vencimiento</i> : el desarrollador determina la fecha en que el boleto estar√° en producci√≥n.  Expuesto antes de comenzar a trabajar en la tarea. <br></li><li>  <i>Situaci√≥n</i> : de hecho, un registro breve con una breve descripci√≥n del estado actual de la tarea.  Por ejemplo, <i>‚Äú20/08 estoy esperando traducciones‚Äù</i> , <i>‚Äú21/08 se requiere una aclaraci√≥n del cliente sobre el problema X‚Äù</i> .  Esto ayuda a ver un breve resumen de la tarea en la lista de otras tareas. <br></li><li>  <i>Msg4QA</i> : informaci√≥n para ingenieros de control de calidad, que el desarrollador comparte para simplificar el proceso de prueba <br></li></ul><br>  Tratamos de llevar a cabo una discusi√≥n de temas controvertidos con el director de tareas en los comentarios del ticket, y no "difuminar" aclaraciones importantes por correo y mensajer√≠a instant√°nea.  Sin embargo, si la discusi√≥n tuvo lugar "de forma paralela", es muy conveniente copiar lo que ha acordado en el boleto. <br><br>  Adem√°s de los textos "humanos", como mencion√© anteriormente, muchas cosas se escriben autom√°ticamente en un comentario utilizando la API: <br><br><ul><li>  comete <br></li><li>  revisar los resultados; <br></li><li>  resultados de la prueba de funcionamiento. <br></li></ul><br>  A veces, los comentarios autom√°ticos pueden interferir, por ejemplo, con los gerentes de producto.  Por lo tanto, creamos un script JS simple que agrega un bot√≥n a la interfaz de Jira y le permite minimizar todos los comentarios autom√°ticos, dejando solo los humanos.  Como resultado, los comentarios autom√°ticos minimizados se ven compactos. <br><br><img src="https://habrastorage.org/webt/nx/_-/jh/nx_-jh1r3hxzby1j1ue7itohe0e.png"><br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo JS del script que incorporamos en la plantilla del ticket</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'load'</span></span>, () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.jQuery;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> botsAttrMatch = [       <span class="hljs-string"><span class="hljs-string">'aida'</span></span>,       <span class="hljs-string"><span class="hljs-string">'itops.api'</span></span>   ].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bot</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">`[rel="</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bot}</span></span></span><span class="hljs-string">"]`</span></span>).join(<span class="hljs-string"><span class="hljs-string">','</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$) {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;   }   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AIDA_COLLAPSE_KEY = <span class="hljs-string"><span class="hljs-string">'aida-collapsed'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> COMMENT_SELECTOR = <span class="hljs-string"><span class="hljs-string">'.issue-data-block.activity-comment.twixi-block'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> JiraImprovements = {       init() {           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addButtons();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleAidaCollapsing();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleCommentExpansion();           <span class="hljs-comment"><span class="hljs-comment">// Handle toggle button and aida collapsing and put it on a loop           // to handle unexpected JIRA behaviour           const self = this;           setInterval(function () {               self.addButtons();               self.handleAidaCollapsing();           }, 2000);           addCss(`               #badoo-toggle-bots {                   background: #fff2c9;                   color: #594300;                   border-radius: 0 3px 0 0;                   margin-top: 3px;                   display: inline-block;               }           `);       },       addButtons() {           // Do we already have the button?           if ($('#badoo-toggle-bots').length &gt; 0) {               return;           }           // const headerOps = $('ul#opsbar-opsbar-operations');           const jiraHeader = $('#issue-tabs');           // Only add it in ticket state           if (jiraHeader.length &gt; 0) {               const li = $('&lt;a id="badoo-toggle-bots" class="aui-button aui-button-primary aui-style" href="/"&gt;Collapse Bots&lt;/a&gt;');               li.on('click', this.toggleAidaCollapsing.bind(this));               jiraHeader.append(li);           }       },       toggleAidaCollapsing(e) {           e.preventDefault();           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           localStorage.setItem(AIDA_COLLAPSE_KEY, !isCollapsed);           this.handleAidaCollapsing();       },       handleAidaCollapsing() {           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           const aidaComments = $(COMMENT_SELECTOR).has(botsAttrMatch).not('.manual-toggle');           if (isCollapsed) {               aidaComments.removeClass('expanded').addClass('collapsed');               $('#badoo-toggle-bots').text('Show Bots');           }           else {               aidaComments.removeClass('collapsed').addClass('expanded');               $('#badoo-toggle-bots').text('Collapse Bots');           }       },       handleCommentExpansion() {           $(document.body).delegate('a.collapsed-comments', 'click', function () {               const self = this; // eslint-disable-line no-invalid-this               let triesLeft = 100;               const interval = setInterval(() =&gt; {                   if (--triesLeft &lt; 0 || self.offsetHeight === 0) {                       clearInterval(interval);                   }                   // Element has been removed from DOM. ie new jira comments have been added                   if (self.offsetHeight === 0) {                       JiraImprovements.handleAidaCollapsing();                   }               }, 100);           });           $(document.body).delegate(COMMENT_SELECTOR, 'click', function () {               $(this).addClass('manual-toggle');// eslint-disable-line no-invalid-this           });       }   };   JiraImprovements.init();   function addCss(cssText) {       const style = document.createElement('style');       style.type = 'text/css';       if (style.styleSheet) {           style.styleSheet.cssText = cssText;       }       else {           style.appendChild(document.createTextNode(cssText));       }       document.head.appendChild(style);   } });</span></span></code> </pre><br></div></div><br><h1>  Que mas </h1><br>    API  webhooks Jira    : <br><br><ul><li>    HipChat,      -   (    ); <br></li><li>    HipChat            (    ,    ); <br></li><li>              (  )    (          ;        ); <br></li><li>       ;        ,       ; <br></li><li>         In progress  ; <br></li><li>   ,   ¬´¬ª    (, On Review),      ; <br></li><li>                 ,      Jira     (, ¬´d.semenihin (Day off)¬ª).   . <br></li></ul><br><h1>  Resumen </h1><br> Jira ‚Äî  ,        ,     . ,  ,      .    Jira         ,          . <br><br>            ‚Äî   .       Jira     ,          Jira. , -      . <br><br>  Gracias por su atencion! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424655/">https://habr.com/ru/post/es424655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424645/index.html">Como hicimos la encuesta interna m√°s masiva en el banco</a></li>
<li><a href="../es424647/index.html">El peor gr√°fico del mundo.</a></li>
<li><a href="../es424649/index.html">Java vs GO. Pruebas realizadas por un gran n√∫mero de usuarios.</a></li>
<li><a href="../es424651/index.html">¬øQu√© es el ZFS? ¬øY por qu√© la gente est√° loca por ella?</a></li>
<li><a href="../es424653/index.html">Bienvenido a Voronezh Game Dev Meetup</a></li>
<li><a href="../es424657/index.html">[Traducci√≥n] ¬øArreglar o eliminar JavaScript instalado autom√°ticamente?</a></li>
<li><a href="../es424659/index.html">Beneficio de la oficina en casa - Luz del d√≠a</a></li>
<li><a href="../es424661/index.html">Los peque√±os sat√©lites terrestres contienen potencial para incre√≠bles oportunidades cient√≠ficas y comerciales</a></li>
<li><a href="../es424669/index.html">Perfiles de usuario alternativos: los anunciantes de Facebook incluso lo encontrar√°n utilizando un n√∫mero de tel√©fono no p√∫blico</a></li>
<li><a href="../es424671/index.html">Los 10 mejores informes de Mobius 2018 Piter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>