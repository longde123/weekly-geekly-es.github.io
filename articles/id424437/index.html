<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤ ğŸ§‘ğŸ» ğŸ‘¨ğŸ¿â€ğŸ« Elm Nyaman dan canggung. Json.Encoder dan Json.Decoder ğŸ‘¨ğŸ¿â€ğŸ“ ğŸ™…ğŸ¼ ğŸ‘©â€ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami terus berbicara tentang Elm 0,18 . 


 Elm Nyaman dan canggung 
 Elm Nyaman dan canggung. Komposisi 
 Elm Nyaman dan canggung. Http, Tugas 


 Ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Elm Nyaman dan canggung. Json.Encoder dan Json.Decoder</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424437/"><p>  Kami terus berbicara tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm 0,18</a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nyaman dan canggung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nyaman dan canggung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komposisi</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nyaman dan canggung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Http, Tugas</a> </p><br><p>  Artikel ini akan membahas masalah encoders / decoder. </p><br><p>  Decoder / encoders digunakan untuk: </p><br><ol><li>  konversi respons dari sumber daya pihak ketiga (Http, WebSocket, dll.); </li><li>  interaksi melalui port.  Saya akan memberi tahu Anda lebih banyak tentang port dan kode asli di artikel berikut. </li></ol><a name="habracut"></a><br><p>  Seperti yang dijelaskan sebelumnya, Elm mengharuskan kita untuk mengubah data eksternal menjadi tipe aplikasi internal.  Modul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Json.Decode</a> bertanggung jawab untuk proses ini.  Proses sebaliknya adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Json.Encode</a> . </p><br><p>  Tipe yang mendefinisikan aturan decoding adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Json.Decode.Decoder a</a> .  Tipe ini diparameterisasi oleh tipe pengguna dan menentukan cara mendapatkan tipe pengguna dari objek JSON. </p><br><p>  Untuk pembuat enkode, hanya tipe hasil yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ditentukan</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Json.Encode.Value</a> . </p><br><p>  Pertimbangkan contoh untuk tipe UserData. </p><br><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> alias </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">User</span></span></span><span class="hljs-class"> = { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">email</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class"> }</span></span></code> </pre> <br><p>  Dekoder untuk menerima data dari pengguna: </p><br><pre> <code class="hljs pgsql">decodeUserData : <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.Decoder UserData decodeUserData = <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.map3 UserData (<span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.field â€œidâ€ <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.int) (<span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.field â€œ<span class="hljs-type"><span class="hljs-type">name</span></span>â€ <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.string) (<span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.field â€œemailâ€ <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.string) encodeUserData : UserData -&gt; <span class="hljs-type"><span class="hljs-type">Json</span></span>.Encode.<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> encodeUserData userData = <span class="hljs-type"><span class="hljs-type">Json</span></span>.Encode.<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> [ ( â€œidâ€, <span class="hljs-type"><span class="hljs-type">Json</span></span>.Encode.int userData.id) , ( â€œ<span class="hljs-type"><span class="hljs-type">name</span></span>â€, <span class="hljs-type"><span class="hljs-type">Json</span></span>.Encode.string userData.name) , ( â€œemailâ€, <span class="hljs-type"><span class="hljs-type">Json</span></span>.Encode.string userData.email) ]</code> </pre> <br><p>  Fungsi Json.Decode.map3 menerima konstruktor tipe UserData.  Selanjutnya, tiga decoder tipe ditransmisikan sesuai dengan urutan deklarasi mereka di tipe pengguna UserData. </p><br><p>  Fungsi decodeUserData dapat digunakan bersama dengan fungsi Json.Decode.decodeString atau Json.Decode.decodeValue.  <a href="">Contoh penggunaan</a> dari artikel sebelumnya. </p><br><p>  Fungsi encodeUserData menghasilkan jenis pengkodean kustom tipe Json.Encode.Value, yang dapat dikirim.  Secara sederhana, Json.Encode.Value sesuai dengan objek JSON. </p><br><p>  Pilihan sederhana dijelaskan dalam dokumentasi, mereka dapat dipelajari tanpa banyak kesulitan.  Mari kita lihat kasus kehidupan yang membutuhkan sentuhan tangan. </p><br><h2 id="dekodery-union-tipov-ili-diskriminatory-tipov">  Decoder tipe serikat atau tipe diskriminator </h2><br><p>  Misalkan kita memiliki katalog barang.  Dan setiap produk dapat memiliki sejumlah atribut yang berubah-ubah, yang masing-masing memiliki jenis satu dari banyak: </p><br><ol><li>  bilangan bulat </li><li>  tali </li><li>  disebutkan.  Mengasumsikan pilihan salah satu nilai yang valid. </li></ol><br><p>  Objek JSON valid sebagai berikut: </p><br><pre> <code class="hljs powershell">{ â€œidâ€: <span class="hljs-number"><span class="hljs-number">1</span></span>, â€œnameâ€: â€œProduct nameâ€, â€œpriceâ€: <span class="hljs-number"><span class="hljs-number">1000</span></span>, â€œattributesâ€: [ { â€œ<span class="hljs-type"><span class="hljs-type">id</span></span>â€: <span class="hljs-number"><span class="hljs-number">1</span></span>, â€œ<span class="hljs-type"><span class="hljs-type">name</span></span>â€: â€œ<span class="hljs-type"><span class="hljs-type">Length</span></span>â€, â€œ<span class="hljs-type"><span class="hljs-type">unit</span></span>â€: â€œ<span class="hljs-type"><span class="hljs-type">meters</span></span>â€, â€œ<span class="hljs-type"><span class="hljs-type">value</span></span>â€: <span class="hljs-number"><span class="hljs-number">100</span></span> }, { â€œ<span class="hljs-type"><span class="hljs-type">id</span></span>â€: <span class="hljs-number"><span class="hljs-number">1</span></span>, â€œ<span class="hljs-type"><span class="hljs-type">name</span></span>â€: â€œ<span class="hljs-type"><span class="hljs-type">Color</span></span>â€, â€œ<span class="hljs-type"><span class="hljs-type">unit</span></span>â€: â€œâ€, â€œ<span class="hljs-type"><span class="hljs-type">value</span></span>â€: { â€œ<span class="hljs-type"><span class="hljs-type">id</span></span>â€: <span class="hljs-number"><span class="hljs-number">1</span></span>, â€œ<span class="hljs-type"><span class="hljs-type">label</span></span>â€: â€œ<span class="hljs-type"><span class="hljs-type">red</span></span>â€ } },<span class="hljs-type"><span class="hljs-type">...</span></span> ] }</code> </pre> <br><p>  Jenis yang tersisa mungkin tidak akan dipertimbangkan, bekerja dengan mereka serupa.  Maka jenis produk khusus akan memiliki uraian berikut: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Product = { id: <span class="hljs-type"><span class="hljs-type">Int</span></span> , <span class="hljs-type"><span class="hljs-type">name</span></span>: String , price: <span class="hljs-type"><span class="hljs-type">Int</span></span> , attributes: Attributes } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Attributes = List <span class="hljs-keyword"><span class="hljs-keyword">Attribute</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Attribute</span></span> = { id: <span class="hljs-type"><span class="hljs-type">Int</span></span> , <span class="hljs-type"><span class="hljs-type">name</span></span>: String , unit: String , <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: AttributeValue } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> AttributeValue = IntValue <span class="hljs-type"><span class="hljs-type">Int</span></span> | StringValue String | EnumValue Enum <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Enum = { id: <span class="hljs-type"><span class="hljs-type">Int</span></span> , label: String }</code> </pre> <br><p>  Kami akan sedikit membahas jenis yang dijelaskan.  Ada produk (Produk), yang berisi daftar atribut / karakteristik (Atribut).  Setiap atribut (Atribut) berisi pengidentifikasi, nama, dimensi, dan nilai.  Nilai atribut digambarkan sebagai tipe gabungan, satu elemen untuk setiap jenis nilai karakteristik.  Tipe Enum menggambarkan satu nilai dari set yang dapat diterima dan berisi: pengidentifikasi dan nilai yang dapat dibaca manusia. </p><br><p>  Deskripsi dekoder, abaikan awalan Json.Decode untuk singkatnya: </p><br><pre> <code class="hljs cpp">decodeProduct : Decoder Product decodeProduct = map4 Product (field â€œidâ€ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (field â€œnameâ€ <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) (field â€œpriceâ€ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (field â€œattributesâ€ decodeAttributes) decodeAttributes : Decoder Attributes decodeAttributes = <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> decodeAttribute decodeAttribute : Decoder Attribute decodeAttribute = map4 Attribute (field â€œidâ€ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (field â€œnameâ€ <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) (field â€œunitâ€ <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) (field â€œvalueâ€ decodeAttributeValue) decodeAttributeValue : Decoder AttributeValue decodeAttributeValue = oneOf [ <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> IntValue <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> , <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> StringValue <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> , <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> EnumValue decodeEnumValue ] decodeEnumValue : Decoder Enum decodeEnumValue = map2 Enum (field â€œidâ€ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (field â€œlabelâ€ <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>)</code> </pre> <br><p>  Seluruh trik terkandung dalam fungsi decodeAttributeValue.  Menggunakan fungsi Json.Decode.oneOf iterates atas semua decoder yang valid untuk nilai atribut.  Dalam kasus yang berhasil dibongkar oleh salah satu decoder, nilainya ditandai dengan tag yang sesuai dari jenis AttributeValue. </p><br><p>  Pengkodean jenis produk dapat dilakukan menggunakan fungsi Json.Encode.object, di mana atribut tipe yang dikodekan akan diteruskan.  Perlu memperhatikan pengkodean tipe AttributeValue.  Sesuai dengan objek JSON yang dijelaskan sebelumnya, encoder dapat digambarkan sebagai awalan Json.Encode dihilangkan karena singkatnya: </p><br><pre> <code class="hljs cs">encodeAttributeValue : AttributeValue -&gt; Value encodeAttributeValue attributeValue = <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> attributeValue of IntValue <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> StringValue <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> EnumValue <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> [ (â€œidâ€, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.id) , (â€œidâ€, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.label) ]</code> </pre> <br><p>  Seperti yang Anda lihat, kami membandingkan opsi jenis dan menggunakan pembuat enkode yang sesuai. </p><br><p>  Ubah deskripsi atribut dan tentukan dengan menggunakan pembeda tipe.  Objek atribut JSON, dalam hal ini, akan terlihat seperti ini: </p><br><pre> <code class="hljs pgsql">{ â€œidâ€: <span class="hljs-number"><span class="hljs-number">1</span></span>, â€œ<span class="hljs-type"><span class="hljs-type">name</span></span>â€: â€œ<span class="hljs-keyword"><span class="hljs-keyword">Attribute</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>â€, â€œ<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>â€: â€œ<span class="hljs-type"><span class="hljs-type">int</span></span>â€, â€œvalue_intâ€: <span class="hljs-number"><span class="hljs-number">1</span></span>, â€œvalue_stringâ€: <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, â€œvalue_enum_idâ€: <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, â€œvalue_enum_labelâ€: <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> }</code> </pre> <br><p>  Dalam kasus ini, pembeda tipe disimpan di bidang tipe dan menentukan di bidang mana nilai disimpan.  Struktur deskripsi seperti itu mungkin bukan yang paling nyaman, tetapi sering ditemukan.  Mungkin tidak layak untuk mengubah deskripsi jenis untuk objek JSON ini, lebih baik menyimpan jenisnya dalam bentuk yang nyaman untuk penggunaan internal.  Dalam hal ini, deskripsi dekoder mungkin sebagai berikut: </p><br><pre> <code class="hljs vhdl">decodeAttribute2 : Decoder <span class="hljs-keyword"><span class="hljs-keyword">Attribute</span></span> decodeAttribute2 = field <span class="hljs-string"><span class="hljs-string">"type"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> |&gt; andThen decodeAttributeValueType |&gt; andThen (\attributeValue -&gt; map4 <span class="hljs-keyword"><span class="hljs-keyword">Attribute</span></span> (field <span class="hljs-string"><span class="hljs-string">"id"</span></span> int) (field <span class="hljs-string"><span class="hljs-string">"name"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) (field <span class="hljs-string"><span class="hljs-string">"unit"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) (succeed attributeValue) ) decodeAttributeValueType : <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> -&gt; Decoder AttributeValue decodeAttributeValueType valueType = <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> valueType <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">"int"</span></span> -&gt; field <span class="hljs-string"><span class="hljs-string">"value_int"</span></span> int |&gt; Json.Decode.<span class="hljs-keyword"><span class="hljs-keyword">map</span></span> IntValue <span class="hljs-string"><span class="hljs-string">"string"</span></span> -&gt; field <span class="hljs-string"><span class="hljs-string">"value_string"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> |&gt; Json.Decode.<span class="hljs-keyword"><span class="hljs-keyword">map</span></span> StringValue <span class="hljs-string"><span class="hljs-string">"enum"</span></span> -&gt; map2 Enum (field <span class="hljs-string"><span class="hljs-string">"value_enum_id"</span></span> int) (field <span class="hljs-string"><span class="hljs-string">"value_enum_label"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) |&gt; Json.Decode.<span class="hljs-keyword"><span class="hljs-keyword">map</span></span> EnumValue _ -&gt; Json.Decode.fail <span class="hljs-string"><span class="hljs-string">"Unknown attribute type"</span></span></code> </pre> <br><p>  Dalam fungsi decodeAttribute2, pertama-tama kita mendekode pembeda, jika berhasil, kita mendekode nilai atribut.  Selanjutnya, kami mendekode bidang yang tersisa dari jenis atribut, dan menentukan nilai yang diperoleh sebelumnya sebagai nilai bidang nilai. </p><br><p>  <a href="">Kode sumber decoder</a> . </p><br><h2 id="chastichnoe-obnovlenie-tipa">  Pembaruan Jenis Parsial </h2><br><p>  Ada beberapa kasus ketika API tidak mengembalikan seluruh objek, tetapi hanya sebagian saja.  Misalnya, ketika mendaftar untuk melihat atau mengubah status suatu objek.  Dalam hal ini, akan lebih mudah untuk segera menerima objek yang diperbarui dalam pesan, dan menyembunyikan semua manipulasi di belakang dekoder. </p><br><p>  Misalnya, kami mengambil produk yang sama, tetapi menambahkan bidang status ke sana dan akan memproses permintaan untuk menutup produk. </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> alias </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Product</span></span></span><span class="hljs-class"> = { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">price</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attributes</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Attributes</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">status</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class"> } decodeUpdateStatus : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Product</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Decoder</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Product</span></span></span><span class="hljs-class"> decodeUpdateStatus product = field â€œstatusâ€ int |&gt; andThen (\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">newStatus</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">succeed</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class"> | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">status</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">newStatus</span></span></span><span class="hljs-class">} )</span></span></code> </pre> <br><p>  Atau Anda dapat menggunakan fungsi Json.Decode.map. </p><br><pre> <code class="hljs erlang-repl">decodeUpdateStatus : Product -&gt; Decoder Product decodeUpdateStatus product = field â€œstatusâ€ int |&gt; map (\newStatus -&gt; { product | status = newStatus} )</code> </pre> <br><h2 id="data-i-vremya">  Tanggal dan waktu </h2><br><p>  Kami akan menggunakan fungsi Date.fromString, yang diimplementasikan menggunakan konstruktor dari tipe Date. </p><br><pre> <code class="hljs pgsql">decodeDateFromString : Decoder <span class="hljs-type"><span class="hljs-type">Date</span></span>.Date decodeDateFromString = string |&gt; andThen (\stringDate -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>.fromString stringDate <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Ok <span class="hljs-type"><span class="hljs-type">date</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.succeed <span class="hljs-type"><span class="hljs-type">date</span></span> Err reason -&gt; <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.fail reason )</code> </pre> <br><p>  Jika Timestamp digunakan sebagai representasi tanggal / waktu, maka dekoder secara umum dapat digambarkan sebagai: </p><br><pre> <code class="hljs pgsql">decodeDateFromTimestamp : Decoder <span class="hljs-type"><span class="hljs-type">Date</span></span>.Date decodeDateFromTimestamp = oneOf [ <span class="hljs-type"><span class="hljs-type">int</span></span> |&gt; <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.map toFloat , <span class="hljs-type"><span class="hljs-type">float</span></span> ] |&gt; <span class="hljs-type"><span class="hljs-type">Json</span></span>.Decode.map <span class="hljs-type"><span class="hljs-type">Date</span></span>.fromTime</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424437/">https://habr.com/ru/post/id424437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424427/index.html">Roskomnadzor dan Telegram melakukan bot melalui proxy</a></li>
<li><a href="../id424429/index.html">Sains Seni dan Suara: 4 proyek mengesankan</a></li>
<li><a href="../id424431/index.html">Valve Meluncurkan Peringkat Game Controller Steam</a></li>
<li><a href="../id424433/index.html">Mengapa hacker Mikrotik dan bagaimana saya menyembunyikan 100 ribu. RouterOS dari botnet</a></li>
<li><a href="../id424435/index.html">Kebun binatang pengeboran minyak: menertibkan</a></li>
<li><a href="../id424441/index.html">Apa yang Baru di CTP Pertama SQL Server 2019</a></li>
<li><a href="../id424443/index.html">Vivaldi 2.0 mendukung kami</a></li>
<li><a href="../id424445/index.html">Neil Ford menerjemahkan Microservices sebagai Arsitektur Evolusi</a></li>
<li><a href="../id424447/index.html">Lisp dibumbui dengan Pascal atau bahasa pemrograman 8501</a></li>
<li><a href="../id424453/index.html">Pelajari OpenGL. Pelajaran 6.2 - Rendering Berbasis Fisik. Sumber Cahaya Analitik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>