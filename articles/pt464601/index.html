<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ≥Ô∏è üë©‚Äçüöí üïâÔ∏è Protocolos de fluxo como ferramenta para monitorar a seguran√ßa da rede interna ‚ö†Ô∏è üë©üèø‚Äçü§ù‚Äçüë©üèæ üßìüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando se trata de monitorar a seguran√ßa de uma rede corporativa ou departamental interna, muitos t√™m uma associa√ß√£o com o controle de vazamentos de i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Protocolos de fluxo como ferramenta para monitorar a seguran√ßa da rede interna</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cisco/blog/464601/">  Quando se trata de monitorar a seguran√ßa de uma rede corporativa ou departamental interna, muitos t√™m uma associa√ß√£o com o controle de vazamentos de informa√ß√µes e a implementa√ß√£o de solu√ß√µes DLP.  E se voc√™ tentar esclarecer a pergunta e perguntar como detecta ataques na rede interna, a resposta geralmente ser√° a men√ß√£o de sistemas de detec√ß√£o de intrus√£o (IDS).  E qual era a √∫nica op√ß√£o h√° 10 a 20 anos, hoje est√° se tornando um anacronismo.  Existe uma maneira mais eficaz e, em alguns lugares, a √∫nica op√ß√£o poss√≠vel para monitorar a rede interna - usar protocolos de fluxo, originalmente projetados para procurar problemas de rede (solu√ß√£o de problemas), mas eventualmente transformados em uma ferramenta de seguran√ßa muito interessante.  Falaremos sobre o que s√£o protocolos de fluxo e quais ajudam a detectar ataques de rede, onde √© melhor implementar o monitoramento de fluxo, o que procurar ao implantar esse esquema e at√© mesmo como "busc√°-lo" em equipamentos dom√©sticos. como parte deste artigo. <a name="habracut"></a><br><br>  N√£o vou me debru√ßar sobre a pergunta "Por que precisamos monitorar a seguran√ßa da infraestrutura interna?"  A resposta parece ser clara.  Mas se, no entanto, voc√™ gostaria de garantir mais uma vez que n√£o existe nenhum lugar, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">assista a um</a> pequeno v√≠deo com uma hist√≥ria sobre como voc√™ pode acessar a rede corporativa protegida por um firewall de 17 maneiras.  Portanto, assumiremos que entendemos que o monitoramento interno √© uma coisa necess√°ria e resta apenas entender como ele pode ser organizado. <br><br>  Eu destacaria tr√™s fontes de dados principais para monitorar a infraestrutura no n√≠vel da rede: <br><ul><li>  Tr√°fego "bruto", que capturamos e enviamos para an√°lise em determinados sistemas de an√°lise, </li><li>  eventos de dispositivos de rede atrav√©s dos quais o tr√°fego passa, </li><li>  informa√ß√µes de tr√°fego recebidas usando um dos protocolos de fluxo. </li></ul><br><br><img src="https://habrastorage.org/webt/ic/ti/gg/ictiggm4ghkef5hgwryuxyh2qoo.png" alt="Tr√™s fontes de dados para monitoramento de rede"><br><br>  Capturar o tr√°fego bruto √© a op√ß√£o mais popular entre os guardas de seguran√ßa, porque historicamente apareceu o primeiro.  Os sistemas convencionais de detec√ß√£o de ataques baseados em rede (o primeiro sistema comercial de detec√ß√£o de ataques foi o NetRanger da WheelR, adquirido em 1998 pela Cisco) estavam apenas no neg√≥cio de capturar pacotes (e sess√µes posteriores) que procuravam assinaturas espec√≠ficas (‚Äúregras decisivas‚Äù na terminologia FSTEC), sinalizando ataques.  Obviamente, voc√™ pode analisar o tr√°fego bruto n√£o apenas usando o IDS, mas tamb√©m outras ferramentas (por exemplo, a funcionalidade Wireshark, tcpdum ou NBAR2 no Cisco IOS), mas elas geralmente n√£o possuem uma base de conhecimento que distingue uma ferramenta de seguran√ßa da informa√ß√£o de uma ferramenta de TI comum. <br><br>  Ent√£o, sistemas de detec√ß√£o de ataques.  O m√©todo mais antigo e popular de detectar ataques de rede, que lida bem com sua tarefa no per√≠metro (n√£o importa o que seja - corporativo, data center, segmento etc.), mas passa nas modernas redes comutadas e definidas por software.  No caso de uma rede constru√≠da com base em comutadores convencionais, a infraestrutura dos sensores de detec√ß√£o de ataques se torna muito grande - voc√™ precisar√° colocar um sensor em cada conex√£o com o host cujos ataques voc√™ deseja monitorar.  Qualquer fabricante, √© claro, ficar√° feliz em vender centenas e milhares de sensores, mas acho que seu or√ßamento n√£o pode suportar esses custos.  Posso dizer que mesmo na Cisco (e somos os desenvolvedores do NGIPS) n√£o fomos capazes de fazer isso, embora pare√ßa que a quest√£o do pre√ßo esteja diante de n√≥s.  n√£o deve permanecer - esta √© a nossa pr√≥pria decis√£o.  Al√©m disso, surge a quest√£o, mas como conectar o sensor nesta modalidade?  Para a lacuna?  E se o pr√≥prio sensor estiver desativado?  Requer um m√≥dulo de desvio no sensor?  Use divisores de torneira?  Tudo isso torna a solu√ß√£o mais cara e insuport√°vel para uma empresa de qualquer escala. <br><br><img src="https://habrastorage.org/webt/qf/mq/zi/qfmqziyzqnl8axo76o4apia7qiu.png" alt="imagem"><br><br>  Voc√™ pode tentar "travar" o sensor na porta SPAN / RSPAN / ERSPAN e direcionar o tr√°fego para ele a partir das portas necess√°rias no switch.  Essa op√ß√£o remove parcialmente o problema descrito no par√°grafo anterior, mas apresenta um problema diferente - a porta SPAN n√£o pode aceitar absolutamente todo o tr√°fego que ser√° enviado a ela - n√£o ter√° largura de banda suficiente.  Aconchegue algo para sacrificar.  Deixe parte dos n√≥s sem monitoramento (ent√£o ser√° necess√°rio prioriz√°-los primeiro) ou roteie n√£o todo o tr√°fego do n√≥, mas apenas um determinado tipo.  De qualquer forma, podemos pular alguns ataques.  Al√©m disso, a porta SPAN pode ser ocupada para outras necessidades.  Como resultado, teremos que revisar a topologia de rede existente e, possivelmente, fazer ajustes para cobrir sua rede ao m√°ximo com o n√∫mero de sensores que voc√™ possui (e coordenar isso com a TI). <br><br>  E se sua rede usa rotas assim√©tricas?  E se voc√™ implementou ou planeja introduzir SDN?  E se voc√™ precisar monitorar m√°quinas ou cont√™ineres virtualizados cujo tr√°fego n√£o atinja o comutador f√≠sico?  Os fabricantes de IDS tradicional n√£o gostam dessas perguntas porque n√£o sabem como respond√™-las.  Talvez eles o levem ao fato de que todas essas tecnologias da moda s√£o exageradas e voc√™ n√£o precisa disso.  Talvez eles falem sobre a necessidade de come√ßar pequeno.  Ou talvez eles digam que voc√™ precisa colocar uma debulhadora poderosa no centro da rede e direcionar todo o tr√°fego para ela usando balanceadores.  Qualquer que seja a op√ß√£o oferecida, voc√™ precisa entender claramente por si mesmo o quanto ela combina com voc√™.  E somente depois disso tome uma decis√£o sobre a escolha de uma abordagem para monitorar a seguran√ßa das informa√ß√µes da infraestrutura de rede.  Voltando √† captura de pacotes, quero dizer que esse m√©todo continua sendo muito popular e importante, mas seu principal objetivo √© o controle de borda;  os limites entre sua organiza√ß√£o e a Internet, os limites entre o datacenter e o restante da rede, os limites entre o ICS e o segmento corporativo.  Nesses locais, o IDS / IPS cl√°ssico ainda tem o direito de existir e fazer um bom trabalho de suas tarefas. <br><br><img src="https://habrastorage.org/webt/s0/lz/qi/s0lzqikgs1pknxj2ak8n1t0mkd0.png" alt="imagem"><br><br>  Vamos para a segunda op√ß√£o.  Uma an√°lise de eventos de dispositivos de rede tamb√©m pode ser usada para detectar ataques, mas n√£o como o principal mecanismo, pois permite detectar apenas uma pequena classe de intrus√µes.  Al√©m disso, alguma reatividade √© inerente a ele - um ataque deve ocorrer primeiro, depois deve ser corrigido por um dispositivo de rede, que de uma maneira ou de outra sinalizar√° um problema com a seguran√ßa da informa√ß√£o.  Existem v√°rias maneiras.  Pode ser syslog, RMON ou SNMP.  Os dois √∫ltimos protocolos para monitoramento de rede no contexto de seguran√ßa da informa√ß√£o s√£o usados ‚Äã‚Äãapenas se precisarmos detectar um ataque de DoS no pr√≥prio equipamento de rede, pois, usando o RMON e o SNMP, por exemplo, podemos monitorar a carga do processador central do dispositivo ou de suas interfaces.  Esse √© um dos "mais baratos" (todos t√™m syslog ou SNMP), mas tamb√©m o mais ineficaz de todas as maneiras de monitorar a seguran√ßa das informa√ß√µes da infraestrutura interna - muitos ataques est√£o simplesmente ocultos.  Obviamente, eles n√£o devem ser negligenciados e a mesma an√°lise de syslog ajuda a identificar altera√ß√µes na configura√ß√£o do dispositivo em tempo h√°bil, √© um compromisso, mas n√£o √© muito adequado para detectar ataques em toda a rede. <br><br>  A terceira op√ß√£o √© analisar informa√ß√µes sobre o tr√°fego que passa por um dispositivo que suporta um dos v√°rios protocolos de fluxo.  Nesse caso, independentemente do protocolo, a infraestrutura de fluxo consiste necessariamente em tr√™s componentes: <br><ul><li>  Gere ou exporte fluxo.  Essa fun√ß√£o geralmente √© atribu√≠da a um roteador, comutador ou outro dispositivo de rede que, passando o tr√°fego de rede por si pr√≥prio, permite extrair par√¢metros-chave dele, que s√£o transferidos para o m√≥dulo de coleta.  Por exemplo, o protocolo Cisco Netflow √© suportado n√£o apenas em roteadores e switches, incluindo virtuais e industriais, mas tamb√©m em controladores sem fio, firewalls e at√© servidores. </li><li>  Fluxo de coleta.  Dado que em uma rede moderna geralmente h√° mais de um dispositivo de rede, surge o problema de coletar e consolidar fluxos, que √© resolvido usando os chamados coletores, que processam os fluxos recebidos e os transmitem para an√°lise. </li><li>  An√°lise de fluxo.  O analisador assume a principal tarefa intelectual e, aplicando v√°rios algoritmos aos fluxos, tira certas conclus√µes.  Por exemplo, como parte da fun√ß√£o de TI, esse analisador pode identificar gargalos na rede ou analisar o perfil de carga de tr√°fego para otimizar ainda mais a rede.  E, para seguran√ßa das informa√ß√µes, esse analisador pode detectar vazamentos de dados, a dissemina√ß√£o de c√≥digos maliciosos ou ataques de DoS. </li></ul><br><br>  Voc√™ n√£o deve pensar que essa arquitetura de tr√™s camadas √© muito complicada - todas as outras op√ß√µes (exceto, talvez, os sistemas de monitoramento de rede que funcionam com SNMP e RMON) tamb√©m funcionam de acordo com ela.  Temos um gerador de dados para an√°lise, que √© um dispositivo de rede ou um sensor independente.  Temos um sistema de coleta de alarmes e um sistema de gerenciamento para toda a infraestrutura de monitoramento.  Os dois √∫ltimos componentes podem ser combinados em um √∫nico n√≥, mas em redes mais ou menos grandes eles geralmente s√£o separados por pelo menos dois dispositivos para garantir escalabilidade e confiabilidade. <br><br><img src="https://habrastorage.org/webt/oq/pc/nm/oqpcnmnhfriy9oomnogdquh1shy.png" alt="imagem"><br><br>  Ao contr√°rio da an√°lise de pacotes, com base no estudo do cabe√ßalho e do corpo de dados de cada pacote e nas sess√µes que os comp√µem, a an√°lise de fluxo depende da coleta de metadados sobre o tr√°fego de rede.  Quando, quanto, onde e onde, como ... essas s√£o as perguntas respondidas pela an√°lise da telemetria de rede usando v√°rios protocolos de fluxo.  Inicialmente, eles eram usados ‚Äã‚Äãpara analisar estat√≠sticas e procurar problemas de TI na rede, mas, com o desenvolvimento de mecanismos anal√≠ticos, tornou-se poss√≠vel aplic√°-los √† mesma telemetria e para fins de seguran√ßa.  Vale ressaltar aqui novamente que a an√°lise de fluxo n√£o substitui nem cancela a captura de pacotes.  Cada um desses m√©todos possui seu pr√≥prio campo de aplica√ß√£o.  Por√©m, no contexto deste artigo, √© a an√°lise de fluxo mais adequada para monitorar a infraestrutura interna.  Voc√™ tem dispositivos de rede (e n√£o importa se eles funcionam em um paradigma definido por software ou de acordo com regras est√°ticas) que o ataque n√£o pode passar.  Ele pode ignorar o sensor IDS cl√°ssico, mas n√£o h√° dispositivo de rede que suporte o protocolo de fluxo.  Essa √© a vantagem desse m√©todo. <br><br>  Por outro lado, se voc√™ precisa de evid√™ncias para a aplica√ß√£o da lei ou sua pr√≥pria equipe de investiga√ß√£o de incidentes, n√£o pode prescindir da captura de pacotes - a telemetria de rede n√£o √© uma c√≥pia do tr√°fego que pode ser usado para coletar evid√™ncias;  √© necess√°rio para detec√ß√£o operacional e tomada de decis√µes no campo da seguran√ßa da informa√ß√£o.  Por outro lado, usando a an√°lise de telemetria, voc√™ pode "escrever" n√£o todo o tr√°fego da rede (se houver alguma coisa, a Cisco est√° envolvida nos datacenters :-), mas apenas aquela envolvida no ataque.  As ferramentas de an√°lise de telemetria nesse sentido complementar√£o bem os mecanismos tradicionais de captura de pacotes, fornecendo o comando para captura e armazenamento seletivos.  Caso contr√°rio, voc√™ precisar√° ter uma infraestrutura de armazenamento colossal. <br><br>  Imagine uma rede operando a uma velocidade de 250 Mbps.  Se voc√™ deseja salvar todo esse volume, precisar√° de 31 MB de armazenamento por um segundo de transfer√™ncia de tr√°fego, 1,8 GB por um minuto, 108 GB por uma hora e 2,6 TB por um dia.  Para armazenar dados di√°rios de uma rede com uma largura de banda de 10 Gbit / s, voc√™ precisa de 108 TB de armazenamento.  Mas alguns reguladores exigem que voc√™ armazene dados de seguran√ßa por anos ... O registro "sob demanda", que ajuda a implementar a an√°lise de fluxo, ajuda a reduzir esses valores em ordens de magnitude.  A prop√≥sito, se falarmos sobre a propor√ß√£o do volume gravado de dados de telemetria de rede e a captura total de dados, √© de cerca de 1 a 500. Para os mesmos valores acima, o armazenamento de uma descriptografia completa de todo o tr√°fego di√°rio ser√° de 5 e 216 GB, respectivamente (voc√™ pode at√© gravar em uma unidade flash USB comum ) <br><br>  Se as ferramentas de an√°lise de dados brutos da rede tiverem um m√©todo de captura quase igual ao do fornecedor, a situa√ß√£o ser√° diferente com a an√°lise dos fluxos.  Existem v√°rias op√ß√µes para protocolos de fluxo, as diferen√ßas que voc√™ precisa saber no contexto de seguran√ßa.  O mais popular √© o protocolo Netflow desenvolvido pela Cisco.  Existem v√°rias vers√µes deste protocolo que diferem em seus recursos e na quantidade de informa√ß√µes registradas sobre o tr√°fego.  A vers√£o atual √© a nona (Netflow v9), com base na qual o padr√£o da ind√∫stria Netflow v10, tamb√©m conhecido como IPFIX, foi desenvolvido.  Hoje, a maioria dos fornecedores de rede suporta exatamente Netflow ou IPFIX em seus equipamentos.  Mas existem v√°rias outras op√ß√µes para protocolos de fluxo - sFlow, jFlow, cFlow, rFlow, NetStream, etc., dos quais o sFlow √© mais popular.  √â ele quem √© mais frequentemente apoiado pelos fabricantes nacionais de equipamentos de rede devido √† facilidade de implementa√ß√£o.  Quais s√£o as principais diferen√ßas entre o Netflow, como padr√£o de fato, e o sFlow?  Eu destacaria alguns dos principais.  Primeiro, o Netflow possui campos definidos pelo usu√°rio em oposi√ß√£o aos campos fixos no sFlow.  Em segundo lugar, e isso √© a coisa mais importante em nosso caso, o sFlow coleta a chamada telemetria amostrada;  diferente da n√£o amostrada no Netflow e no IPFIX.  Qual √© a diferen√ßa entre eles? <br><br><img src="https://habrastorage.org/webt/s2/rr/ub/s2rrub0w0nkkd5bmdlvxyb07afa.png" alt="imagem"><br><br>  Imagine que voc√™ decidiu ler o livro ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Centro de Opera√ß√µes de Seguran√ßa: Construindo, Operando e Mantendo seu SOC</a> ‚Äù de meus colegas - Gary McIntyre, Joseph Muniz e Nadef Alfardan (voc√™ pode baixar parte do livro no link).  Voc√™ tem tr√™s op√ß√µes para atingir seu objetivo - ler o livro inteiro, percorrer os olhos, parar a cada 10 ou 20 p√°ginas ou tentar encontrar uma recontagem dos principais conceitos em um blog ou servi√ßo como o SmartReading.  A telemetria n√£o amostrada est√° lendo todas as "p√°ginas" do tr√°fego de rede, ou seja, analisando metadados para cada pacote.  A telemetria de amostragem √© um estudo seletivo do tr√°fego, na esperan√ßa de que as amostras selecionadas tenham o que voc√™ precisa.  Dependendo da velocidade do canal, a telemetria amostrada enviar√° para an√°lise a cada 64, 200, 500, 1000, 2000 ou mesmo 10000 pacotes. <br><br><img src="https://habrastorage.org/webt/24/il/eg/24ileg_9ddptq5votue4qamrlfu.png" alt="imagem"><br><br>  No contexto do monitoramento de seguran√ßa da informa√ß√£o, isso significa que a telemetria amostrada √© adequada para detectar ataques DDoS, varredura e dissemina√ß√£o de c√≥digo malicioso, mas pode ignorar ataques at√¥micos ou de v√°rios pacotes que n√£o ca√≠ram na amostra enviada para an√°lise.  A telemetria sem amostragem n√£o possui essas defici√™ncias.  Usar a variedade de ataques detect√°veis ‚Äã‚Äã√© muito mais amplo.  Aqui est√° uma pequena lista de eventos que podem ser detectados usando as ferramentas de an√°lise de telemetria de rede. <br><br><img src="https://habrastorage.org/webt/3c/-b/sq/3c-bsqdag-fplnfue732ckxrlkg.png" alt="Alguns tipos de incidentes detectados pelo Stealthwatch Enterprise"><br><br>  Certamente, algum analisador de fluxo aberto do Netflow n√£o permitir√° que voc√™ fa√ßa isso, pois sua principal tarefa √© coletar telemetria e realizar an√°lises b√°sicas sobre ele do ponto de vista de TI.  Para identificar amea√ßas √† seguran√ßa da informa√ß√£o com base no fluxo, √© necess√°rio equipar o analisador com v√°rios mecanismos e algoritmos, que identificar√£o problemas de seguran√ßa cibern√©tica com base em campos padr√£o ou personalizados do Netflow, enriquecer√£o os dados padr√£o com dados externos de v√°rias fontes de Threat Intelligence, etc. <br><br><img src="https://habrastorage.org/webt/hu/t1/oo/hut1ooqfkx6m11pfsmp8wawm0bu.png" alt="Detec√ß√£o maliciosa no tr√°fego criptografado"><br><br>  Portanto, se voc√™ tiver uma op√ß√£o, pare-a no Netflow ou IPFIX.  Por√©m, mesmo que seu equipamento funcione apenas com o sFlow, como fabricantes nacionais, mesmo nesse caso, voc√™ poder√° se beneficiar dele no contexto de seguran√ßa. <br><br><img src="https://habrastorage.org/webt/za/b4/vh/zab4vhx9lc8ldaztdzajzi2xnh4.png" alt="Diferen√ßa entre Telemetria Amostrada e N√£o Amostrada"><br><br>  No ver√£o de 2019, analisei as oportunidades que os fabricantes russos de hardware de rede t√™m, e todos eles, excluindo NSG, Polygon e Craftway, declararam suporte ao sFlow (pelo menos Zelax, Natex, Eltex, QTech, Rusteletech). <br><br><img src="https://habrastorage.org/webt/pu/ey/ww/pueywwqxumc9i1lkf4abocxnpfk.png" alt="A capacidade dos fornecedores de rede russos de monitoramento da infraestrutura de rede"><br><br>  A pr√≥xima pergunta que voc√™ enfrentar√° √© onde implementar o suporte ao fluxo por motivos de seguran√ßa?  De fato, a quest√£o n√£o est√° totalmente correta.  Em equipamentos modernos, o suporte a protocolos de fluxo est√° quase sempre l√°.  Portanto, reformularia a quest√£o de maneira diferente - onde √© a maneira mais eficiente de coletar telemetria do ponto de vista da seguran√ßa?  A resposta ser√° bastante √≥bvia - no n√≠vel de acesso, onde voc√™ ver√° 100% de todo o tr√°fego, onde voc√™ ter√° informa√ß√µes detalhadas sobre hosts (MAC, VLAN, ID da interface), onde voc√™ pode at√© rastrear o tr√°fego P2P entre hosts, o que √© essencial para detectar varreduras ee a dissemina√ß√£o de c√≥digo malicioso.  No n√≠vel do kernel, talvez voc√™ n√£o veja parte do tr√°fego, mas no n√≠vel do per√≠metro ver√° bem um quarto de todo o tr√°fego da rede.  Mas se, por algum motivo, dispositivos estranhos forem instalados na sua rede, permitindo que os invasores "entrem e saiam", ignorando o per√≠metro, a an√°lise da telemetria a partir dele n√£o fornecer√° nada.  Portanto, para obter cobertura m√°xima, √© recomend√°vel incluir a cole√ß√£o de telemetria no n√≠vel de acesso.  Ao mesmo tempo, vale a pena notar que, mesmo se estivermos falando sobre virtualiza√ß√£o ou cont√™ineres, o suporte ao fluxo tamb√©m √© frequentemente encontrado em comutadores virtuais modernos, o que permite controlar o tr√°fego tamb√©m. <br><br>  Mas desde que eu levantei o t√≥pico, preciso responder √† pergunta, mas e se, afinal, o equipamento, f√≠sico ou virtual, n√£o suportar protocolos de fluxo?  Ou √© proibida a sua inclus√£o (por exemplo, em segmentos industriais para garantir a confiabilidade)?  Ou sua inclus√£o leva √† alta utiliza√ß√£o da CPU (isso acontece em equipamentos desatualizados)?  Para resolver esse problema, existem sensores virtuais especializados (sensor de fluxo), que s√£o essencialmente divisores comuns que transmitem o tr√°fego por si mesmos e o transmitem na forma de fluxo para o m√≥dulo de coleta.  √â verdade que, neste caso, temos muitos problemas sobre os quais falamos acima em rela√ß√£o √†s ferramentas de captura de pacotes.  Ou seja, voc√™ precisa entender n√£o apenas as vantagens da tecnologia de an√°lise de fluxo, mas tamb√©m suas limita√ß√µes. <br><br>  Outro ponto que √© importante lembrar quando se fala em ferramentas de an√°lise de fluxo.  Se aplicarmos a m√©trica EPS (evento por segundo, eventos por segundo) a meios convencionais de gera√ß√£o de eventos de seguran√ßa, esse indicador n√£o se aplicar√° √† an√°lise de telemetria;  √© substitu√≠do pelo FPS (fluxo por segundo).  Como no caso do EPS, ele n√£o pode ser calculado antecipadamente, mas voc√™ pode estimar o n√∫mero aproximado de fluxos que um dispositivo espec√≠fico gera, dependendo de sua tarefa.  Na Internet, voc√™ pode encontrar tabelas com valores aproximados para diferentes tipos de dispositivos e condi√ß√µes corporativas, o que permitir√° descobrir quais licen√ßas s√£o necess√°rias para as ferramentas de an√°lise e qual ser√° a arquitetura delas.  O fato √© que o sensor IDS √© limitado por uma certa largura de banda, que ser√° "puxada", e o coletor de fluxo tem suas pr√≥prias limita√ß√µes, que devem ser entendidas.  Portanto, em grandes redes geograficamente distribu√≠das, geralmente existem v√°rios reservat√≥rios.  Quando descrevi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">como a rede dentro da Cisco √© monitorada</a> , j√° citei o n√∫mero de nossos coletores - existem 21. E isso ocorre em uma rede espalhada pelos cinco continentes e com cerca de meio milh√£o de dispositivos ativos). <br><br><img src="https://habrastorage.org/webt/fp/6h/bu/fp6hbuehyafsw_ovcxyh9achww8.png" alt="Arquitetura corporativa do stealthwatch"><br><br>  Como sistema de monitoramento Netflow, usamos nossa pr√≥pria <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solu√ß√£o Cisco Stealthwatch</a> , focada especificamente na solu√ß√£o de problemas de seguran√ßa.  Possui muitos mecanismos internos para detectar atividades anormais, suspeitas e obviamente maliciosas, o que permite detectar uma ampla variedade de amea√ßas - desde minera√ß√£o de criptografia a vazamentos de informa√ß√µes, desde a dissemina√ß√£o de c√≥digos maliciosos at√© fraudes.  Como a maioria dos analisadores de fluxo, o Stealthwatch √© constru√≠do de acordo com um esquema de tr√™s n√≠veis (gerador - coletor - analisador), mas √© complementado por v√°rios recursos interessantes que s√£o importantes no contexto do material em considera√ß√£o.  Primeiro, ele se integra √†s solu√ß√µes de captura de pacotes (como o Cisco Security Packet Analyzer), que permitem gravar sess√µes de rede selecionadas para uma investiga√ß√£o e an√°lise mais aprofundada.  Em segundo lugar, especialmente para expandir tarefas de seguran√ßa, desenvolvemos um protocolo especial nvzFlow, que permite "traduzir" a atividade de aplicativos em n√≥s finais (servidores, esta√ß√µes de trabalho etc.) em telemetria e transmiti-la ao coletor para an√°lises adicionais.  Se em sua vers√£o original o Stealthwatch funcionar com qualquer protocolo de fluxo (sFlow, rFlow, Netflow, IPFIX, cFlow, jFlow, NetStream) no n√≠vel da rede, o suporte ao nvzFlow tamb√©m permitir√° a correla√ß√£o de dados no n√≠vel do host.  aumentando a efici√™ncia de todo o sistema e vendo mais ataques do que os analisadores de fluxo de rede convencionais. <br><br>  √â claro que, falando em sistemas de an√°lise de seguran√ßa Netflow, o mercado n√£o se limita a uma √∫nica solu√ß√£o da Cisco.  Voc√™ pode usar solu√ß√µes comerciais e freeware ou shareware.  Curiosamente, se eu usar o blog da Cisco como um exemplo de solu√ß√µes concorrentes, direi algumas palavras sobre como a telemetria de rede pode ser analisada usando duas ferramentas populares, de nome semelhante, mas ainda diferentes - SiLK e ELK. <br><br>  O SiLK √© um conjunto de ferramentas (o Sistema para Conhecimento em N√≠vel de Internet) para an√°lise de tr√°fego, desenvolvido pelo American CERT / CC e que suporta, no contexto do artigo de hoje, o Netflow (5 e 9, as vers√µes mais populares), IPFIX e sFlow e usando v√°rios utilit√°rios (rwfilter, rwcount, rwflowpack, etc.) para executar v√°rias opera√ß√µes na telemetria de rede, a fim de detectar sinais de a√ß√µes n√£o autorizadas.  Mas h√° alguns pontos importantes a serem observados.  O SiLK √© uma ferramenta de linha de comando e conduz an√°lises operacionais, sempre que voc√™ insere um comando do formul√°rio (detec√ß√£o de pacotes ICMP maiores que 200 bytes): <br><br> <code>rwfilter --flowtypes=all/all --proto=1 --bytes-per-packet=200- --pass=stdout | rwrwcut --fields=sIP,dIP,iType,iCode --num-recs=15</code> <br> <br>  n√£o √© muito conveniente.  Voc√™ pode usar a GUI do iSiLK, mas isso n√£o facilitar√° muito sua vida, resolvendo apenas a fun√ß√£o de visualiza√ß√£o, n√£o a substitui√ß√£o do analista.  E este √© o segundo ponto.  Diferentemente das solu√ß√µes comerciais, que j√° possuem uma base anal√≠tica s√≥lida, algoritmos de detec√ß√£o de anomalias, algoritmos relacionados ao fluxo de trabalho, etc., no caso do SiLK, voc√™ ter√° que fazer tudo isso sozinho, o que exigir√° o uso de compet√™ncias ligeiramente diferentes das j√° utilizadas. ferramentas prontas para uso.  Isso √© ruim e n√£o √© ruim - esse √© um recurso de quase qualquer ferramenta gratuita que vem do fato de voc√™ saber o que fazer, e isso s√≥ ajudar√° nisso (as ferramentas comerciais s√£o menos dependentes das compet√™ncias de seus usu√°rios, embora tamb√©m assuma que os analistas entendem pelo menos no√ß√µes b√°sicas de investiga√ß√µes e monitoramento de rede).  Mas voltando ao SiLK.  O ciclo de trabalho do analista com ele √© o seguinte: <br><ul><li>  Formula√ß√£o de uma hip√≥tese.  Precisamos entender o que procuraremos dentro da telemetria de rede, para conhecer os atributos √∫nicos pelos quais identificaremos certas anomalias ou amea√ßas. </li><li>  Construindo um modelo.  Ap√≥s formular uma hip√≥tese, a programamos usando o mesmo Python, shell ou outras ferramentas n√£o inclu√≠das no SiLK. </li><li>  Teste.  √â a vez de verificar a validade de nossa hip√≥tese, que √© confirmada ou refutada usando os utilit√°rios SiLK, come√ßando com 'rw', 'set', 'bag'. </li><li>  An√°lise de dados reais.  Na opera√ß√£o industrial, o SiLK nos ajuda a identificar algo e o analista deve responder √†s perguntas ‚ÄúEncontramos o que esper√°vamos?‚Äù, ‚ÄúIsso corresponde √† nossa hip√≥tese?‚Äù, ‚ÄúComo reduzir o n√∫mero de falsos positivos?‚Äù, ‚ÄúComo melhorar o n√≠vel de reconhecimento? "  etc. </li><li>  Melhoria.  Na fase final, aprimoramos o que foi feito anteriormente - criamos modelos, melhoramos e otimizamos o c√≥digo, reformulamos e refinamos as hip√≥teses etc. </li></ul><br><br>  Esse ciclo ser√° aplic√°vel ao mesmo Cisco Stealthwatch, apenas as √∫ltimas cinco etapas ser√£o automatizadas ao m√°ximo, reduzindo o n√∫mero de erros de analistas e aumentando a velocidade da detec√ß√£o de incidentes.  Por exemplo, no SiLK, voc√™ pode enriquecer as estat√≠sticas da rede com dados externos em IP malicioso usando seus pr√≥prios scripts e, no Cisco Stealthwatch, essa √© uma fun√ß√£o interna que exibe imediatamente um alarme se houver intera√ß√£o com os endere√ßos IP da lista negra no tr√°fego de rede. <br><br>  Se formos mais altos na pir√¢mide "paga" para o software de an√°lise de fluxo, o SiLK absolutamente gratuito ser√° seguido pelo shareware ELK, composto por tr√™s componentes principais - Elasticsearch (indexa√ß√£o, busca e an√°lise de dados), Logstash (entrada / sa√≠da de dados) e Kibana ( visualiza√ß√£o).  Ao contr√°rio do SiLK, onde voc√™ deve escrever tudo sozinho, o ELK j√° possui muitas bibliotecas / m√≥dulos prontos (alguns s√£o pagos, outros n√£o) que automatizam a an√°lise da telemetria de rede.  Por exemplo, o filtro GeoIP no Logstash permite vincular os endere√ßos IP observados √† sua localiza√ß√£o geogr√°fica (para o Stealthwatch, essa √© uma fun√ß√£o interna). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d4/2df/ace/5d42dfacef7789002c30d66fc5dd92ce.png" alt="Geolocaliza√ß√£o na ELK"><br><br>  O ELK tamb√©m possui uma comunidade bastante grande que est√° concluindo os componentes ausentes para esta solu√ß√£o de monitoramento.  Por exemplo, para trabalhar com o Netflow, IPFIX e sFlow, voc√™ pode usar o m√≥dulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">elastiflow</a> se n√£o estiver familiarizado com o Logstash Netflow Module, que suporta apenas o Netflow. <br><br>  Dando mais efici√™ncia na coleta e na pesquisa de fluxo, o ELK atualmente n√£o possui an√°lises integradas para detectar anomalias e amea√ßas na telemetria de rede.  Ou seja, seguindo o ciclo de vida descrito acima, voc√™ ter√° que descrever independentemente o modelo de viola√ß√µes e depois us√°-lo no sistema de combate (n√£o h√° modelos internos l√°). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f80/d92/728/f80d92728e14e0515e9d4f6f44259236.png" alt="M√≥dulo de fluxo de rede Logstash"><br><br>  Obviamente, existem extens√µes mais sofisticadas para ELK que j√° cont√™m alguns modelos para detectar anomalias na telemetria de rede, mas essas extens√µes custam dinheiro e a quest√£o √© se o jogo vale a pena - escreva o mesmo modelo, compre voc√™ mesmo a implementa√ß√£o da sua ferramenta de monitoramento ou compre solu√ß√£o chave na m√£o para a classe An√°lise de tr√°fego de rede. <br><br><img src="https://habrastorage.org/webt/jw/7o/sp/jw7ospi0e50saqzkqi20g7tuduo.png" alt="M√≥dulo de an√°lise de fluxo pago para ELK (solu√ß√£o de terceiros)"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em geral, n√£o quero entrar no debate de que √© melhor gastar dinheiro e comprar uma solu√ß√£o pronta para monitorar anomalias e amea√ßas na telemetria de rede (por exemplo, Cisco Stealthwatch) ou descobrir por conta pr√≥pria e girar as mesmas ferramentas de fluxo SiLK, ELK ou nfdump ou OSU (para cada nova amea√ßa) ( Eu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre os dois √∫ltimos na </font><font style="vertical-align: inherit;">√∫ltima vez)? Todo mundo escolhe por si mesmo e todo mundo tem seus pr√≥prios motivos para escolher uma das duas op√ß√µes. Eu s√≥ queria mostrar que a telemetria de rede √© uma ferramenta muito importante para garantir a seguran√ßa da rede de sua infraestrutura interna e voc√™ n√£o deve negligenci√°-la para n√£o reabastecer a lista da empresa cujo nome √© mencionado na m√≠dia, juntamente com os ep√≠tetos "hackeados", "que n√£o estavam em conformidade com os requisitos de seguran√ßa da informa√ß√£o "," Sem pensar na seguran√ßa dos dados e dos dados do cliente. "</font></font><br><br><img src="https://habrastorage.org/webt/l2/ya/p-/l2yap-hpfiulg4jwjeonrv_ppza.png" alt="Stealthwatch enterprise"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resumindo, gostaria de listar as principais dicas que voc√™ deve seguir ao criar o monitoramento de seguran√ßa da informa√ß√£o de sua infraestrutura interna: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o se limite apenas ao per√≠metro! </font><font style="vertical-align: inherit;">Use (e escolha) a infraestrutura de rede n√£o apenas para transferir tr√°fego do ponto A para o ponto B, mas tamb√©m para resolver problemas de seguran√ßa cibern√©tica.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Explore os mecanismos de monitoramento de seguran√ßa existentes no seu equipamento de rede e implante-os. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para monitoramento interno, d√™ prefer√™ncia √† an√°lise de telemetria - ela permite detectar at√© 80-90% de todos os incidentes de seguran√ßa da informa√ß√£o, enquanto faz o que √© imposs√≠vel ao capturar pacotes de rede e economizar espa√ßo para armazenar todos os eventos de seguran√ßa da informa√ß√£o. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para monitorar fluxos, use o Netflow v9 ou IPFIX - eles fornecem mais informa√ß√µes no contexto de seguran√ßa e permitem monitorar n√£o apenas o IPv4, mas tamb√©m o IPv6, o MPLS, etc. </font></font></li><li>   flow- ‚Äì       . , Netflow  IPFIX. </li><li>      ‚Äì         flow-.       Netflow Generation Appliance. </li><li>         ‚Äì      100%  . </li><li>            ,   ,   flow-   SPAN/RSPAN-. </li><li>   /  /          (     ). </li></ol><br><br><img src="https://habrastorage.org/webt/-j/9x/e3/-j9xe39tyiu-zhx6yimb-yyb-3m.png" alt="imagem"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quanto √† √∫ltima dica, gostaria de dar uma ilustra√ß√£o, que j√° citei anteriormente. Voc√™ percebe que, se antes o servi√ßo Cisco IB constru√≠a quase completamente seu sistema de monitoramento de IS com base em sistemas de detec√ß√£o de intrus√£o e m√©todos de assinatura, agora eles representam apenas 20% dos incidentes. Outros 20% s√£o respons√°veis ‚Äã‚Äãpor sistemas de an√°lise de fluxo, o que sugere que essas solu√ß√µes n√£o s√£o um capricho, mas uma ferramenta real nas atividades de servi√ßos de seguran√ßa da informa√ß√£o de uma empresa moderna. Al√©m disso, voc√™ tem a coisa mais importante para sua implementa√ß√£o - infraestrutura de rede, investimentos nos quais tamb√©m podem ser protegidos atribuindo fun√ß√µes de monitoramento de IS √† rede.</font></font><br><br><img src="https://habrastorage.org/webt/2d/yq/gy/2dyqgy3iwbotbl_lkm1m37eftvi.png" alt="imagem"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu deliberadamente n√£o toquei no t√≥pico de responder a anomalias ou amea√ßas identificadas nos fluxos de rede, mas acho que j√° est√° claro que o monitoramento n√£o deve ser conclu√≠do apenas pela detec√ß√£o de uma amea√ßa. </font><font style="vertical-align: inherit;">Deve ser seguido por uma resposta e de prefer√™ncia em modo autom√°tico ou automatizado. </font><font style="vertical-align: inherit;">Mas este √© o t√≥pico de um material separado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informa√ß√µes adicionais:</font></font><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descri√ß√£o do Cisco IOS Netflow</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Matriz de suporte Netflow em v√°rias solu√ß√µes da Cisco</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia de configura√ß√£o do Netflow para v√°rias plataformas Cisco</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comunidade SFlow</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laborat√≥rio usando Stealtjwatch, SiLK e ELK para an√°lise de seguran√ßa do Netflow</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Site SiLK</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um tutorial SiLK de 300 p√°ginas com v√°rios exemplos</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo de fluxo de rede Logstash</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passo a passo da an√°lise do Cisco ELK Netflow no ELK</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lise do NetFlow v.9 Cisco ASA usando Logstash (ELK)</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solu√ß√£o Cisco Stealthwatch</font></font></a> </li></ul><br><br>  Amea√ßa.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Se for mais f√°cil ouvir tudo o que foi escrito acima, voc√™ poder√° assistir √† apresenta√ß√£o de uma hora que formou a base desta nota. </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ncDRZsueETo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464601/">https://habr.com/ru/post/pt464601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464591/index.html">Qu√≠mica de frango frito. An√°lise detalhada</a></li>
<li><a href="../pt464593/index.html">Nuvem de pontos. Como desenvolvemos a tecnologia digital na constru√ß√£o</a></li>
<li><a href="../pt464595/index.html">√Ålcool e matem√°tico (a)</a></li>
<li><a href="../pt464597/index.html">Por onde come√ßar a aprender Python: livros para iniciantes</a></li>
<li><a href="../pt464599/index.html">Quando a hist√≥ria √© falsa: vin√≠cola Koktebel, vinhos falsos e aulas de marketing</a></li>
<li><a href="../pt464603/index.html">Alcoolismo do √∫ltimo est√°gio</a></li>
<li><a href="../pt464607/index.html">Desenvolvimento equilibrado em equipes muito grandes. Relat√≥rio Yandex</a></li>
<li><a href="../pt464609/index.html">O complexo falso-industrial da intelig√™ncia artificial falsa</a></li>
<li><a href="../pt464611/index.html">TechTrain 2019: transmiss√£o ao vivo gr√°tis</a></li>
<li><a href="../pt464613/index.html">Receitas Python: Convertendo de HTML e URLs para PDF e PS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>