<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèΩ üë∏üèæ üëêüèæ Wie Methodius zu Anna wurde: die Erfahrung, Sprachnachrichten-Klassifikatoren zu entwickeln und zu starten. Teil 1 üëçüèæ „ÄΩÔ∏è üë©üèæ‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ziel und Ziel 


 In einer Reihe von Artikeln betrachten wir die Klassifikatoren von Sprachanrufen, warum sie ben√∂tigt werden und wie sie schnell prod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie Methodius zu Anna wurde: die Erfahrung, Sprachnachrichten-Klassifikatoren zu entwickeln und zu starten. Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472350/"><h2 id="cel-i-zadacha">  Ziel und Ziel </h2><br><p>  In einer Reihe von Artikeln betrachten wir die Klassifikatoren von Sprachanrufen, warum sie ben√∂tigt werden und wie sie schnell produktiv gemacht werden k√∂nnen.  Ich erz√§hle Ihnen von Ans√§tzen, die die Zeit vom Festlegen einer Aufgabe bis zum Starten eines Modells und dem Erhalten eines Gesch√§ftsergebnisses verk√ºrzen. <br>  F√ºr diesen Artikel k√∂nnen Sie den Bericht unter dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link sehen</a> </p><br><h2 id="kak-mefodiy-stal-annoy-seriya-1">  Wie Methodius Anna wurde.  Serie Nr. 1 </h2><br><p>  Fangen wir an! </p><a name="habracut"></a><br><p>  Mein Name ist Julia, ich bin Ingenieurin in der Abteilung f√ºr maschinelles Lernen eines gro√üen Anbieters.  Pro Tag kommen rund 3.000 Anrufe von Kunden in unserem Callcenter an.  Jeder Betreiber erh√§lt durchschnittlich 100 Anrufe pro Tag.  Na und?  Es scheint, dass dies 100 Anrufe akzeptiert.  Es gibt jedoch viele Themen, bei denen das Unternehmen angerufen wird. Der Betreiber muss alle Produkte, Dienstleistungen und Prozesse des Unternehmens verstehen.  Wenn wir die typischsten Kundenanfragen annehmen, k√∂nnen sie in 40 (!) Themen gruppiert werden, und es gibt immer noch atypische Anwendungen, die ebenfalls verarbeitet werden m√ºssen. <br><img src="https://habrastorage.org/webt/am/_q/zw/am_qzwief7p9jpxjyebcxr3hfrs.png" alt="Bild"></p><br><p>  Aufgrund der Themenvielfalt dauerte die Bedienerschulung drei Monate.  Zuerst m√ºssen Sie alle Anweisungen studieren und erst dann d√ºrfen Anrufe entgegengenommen werden.  Es wird eine enorme Menge an Ressourcen aufgewendet, um einen neuen kompetenten Betreiber zu schaffen.  So entstand die Idee, den Bediener schrittweise in eine Linie zu bringen.  Das hei√üt, er erh√§lt Anrufe nur zu den Themen, die er beherrscht, und verbessert im Laufe der Zeit seine F√§higkeiten, um andere Themen zu studieren. </p><br><p>  Gute Idee, warum nicht ... eine einfache IVR machen?  (Ein System von aufgezeichneten Sprachnachrichten, das Anrufe innerhalb des Callcenters mithilfe von Informationen weiterleitet, die der Client √ºber die Tonwahl √ºber die Tonwahl eingegeben hat. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wiki</a> ) </p><br><p><img src="https://habrastorage.org/webt/40/bi/ht/40bihtr4r_2jnzh0_knc4ksavpw.png" alt="Bild"></p><br><p>  Aber nur wenige Menschen h√∂ren gerne lange Zeit eine aufgenommene Stimme, um zu warten, welche Zahl gedr√ºckt werden muss, aber am Ende erhalten sie immer noch nicht die erforderlichen Informationen. </p><br><p>  Wir wollten unsere Kunden nicht mit IVR qu√§len und haben uns die Aufgabe gestellt, die Anfrage des Abonnenten nach dem ersten Satz zu klassifizieren.  Entsprechend der stimmhaften Anforderung erfolgt somit ein Routing zwischen Betreibern. </p><br><h3 id="dannye">  Daten </h3><br><p>  Die Betreiber des technischen Supports √ºber das Ergebnis jedes Anrufs legen das Thema des Anrufs seit etwa 10 Jahren offen.  Wir haben die zahlreichsten 16 Gruppen identifiziert, und aus diesen Themen sind Markups hervorgegangen.  Anschlie√üend haben wir Aufzeichnungen von 120.000 Konversationen zu verschiedenen Themen hochgeladen, die Konversationsaufzeichnung des Kunden mit Yandex.SpeechKit erkannt und diese durch Schweigen in Phrasen unterteilt.  Also haben wir Audio-St√ºcke mit separaten Phrasen. </p><br><p>  Ich m√∂chte Sie daran erinnern, dass mein Ziel darin bestand, die urspr√ºngliche Anfrage des Kunden zu klassifizieren, sodass bei jedem Anruf nur die erste Phrase ausgew√§hlt wurde.  Insgesamt waren die Daten 120.000 Kundenphrasen im Textformat mit Markup von Betreibern.  Standard-Textvorverarbeitung: Stoppw√∂rter entfernen, Text normalisieren (Tricks: Anh√§ngen eines ‚ÄûNicht‚Äú -Partikels an das n√§chste Wort) und die Daten sind fertig.  In einem anderen Artikel werde ich Ihnen mehr √ºber unsere Vorverarbeitungspipeline erz√§hlen. </p><br><h3 id="klassifikaciya">  Klassifizierung </h3><br><p>  Nachdem wir den verarbeiteten Text erhalten hatten, f√ºhrten wir viele Experimente durch, sortiert nach verschiedenen Konfigurationen von Modellen und Einbettungen. </p><br><div class="spoiler">  <b class="spoiler_title">Tabelle mit Vergleich der experimentellen Ergebnisse</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><th></th><th>  Naive Bayes </th><th>  SVM </th><th>  Logistische Regression </th><th>  Zuf√§lliger Wald </th><th>  Lightgbm </th><th>  XGBoost </th><th>  Neuronales Netz </th></tr><tr><th>  TF-IDF-Unigramm </th><td>  66.9 </td><td>  69.6 </td><td>  69.7 </td><td>  64.3 </td><td>  68.2 </td><td>  68.2 </td><td>  70.3 </td></tr><tr><th>  TF-IDF Bigram </th><td>  68.4 </td><td>  70.4 </td><td>  70,5 </td><td>  64.3 </td><td>  68.4 </td><td>  68.3 </td><td>  70,5 </td></tr><tr><th>  TF-IDF-Trigramm </th><td>  68.4 </td><td>  70.3 </td><td>  70,5 </td><td>  64.2 </td><td>  68.3 </td><td>  68.1 </td><td>  70,5 </td></tr><tr><th>  Word2vec </th><td>  67.9 </td><td>  69.3 </td><td>  69.6 </td><td>  68.7 </td><td>  70.2 </td><td>  69.3 </td><td>  70.7 </td></tr><tr><th>  Word2Vec + TF-IDF </th><td>  66.4 </td><td>  69,8 </td><td>  69.4 </td><td>  68.3 </td><td>  70.2 </td><td>  69.9 </td><td>  70.3 </td></tr><tr><th>  TF-IDF + Kontext </th><td>  70.6 </td><td>  71.7 </td><th>  72.4 </th><td>  67.3 </td><td>  71.3 </td><td>  70.3 </td><td>  71.2 </td></tr><tr><th>  Word2Vec + Kontext </th><td>  69.2 </td><td>  71.8 </td><td>  71.1 </td><td>  69.2 </td><td>  71.4 </td><td>  70.9 </td><td>  72.1 </td></tr><tr><th>  Word2Vec + TF-IDF + Kontext </th><td>  69.7 </td><td>  70.4 </td><td>  71,0 </td><td>  70.3 </td><td>  71.2 </td><td>  71.3 </td><td>  71.8 </td></tr></tbody></table></div></div></div><br><p>  Das beste Ergebnis wurde mit dem Standardsatz von TF-IDF und logistischer Regression erzielt.  Die Tabelle zeigt die f-Score-Metrik.  In einigen Experimenten wurden zus√§tzlich zum Text zum Zeitpunkt des Anrufs weitere 11 Zeichen zum Client (Kontext) hinzugef√ºgt.  In der Hoffnung, dass dies irgendwie die Qualit√§t erh√∂ht.  Kontext - Dies sind Boolesche Zeichen, ob der Client jetzt einen negativen Saldo hat, ob die Reparatur der Adresse zugewiesen ist und andere, die den Client im Moment charakterisieren.  Aber selbst im Kontext ist die Qualit√§t schlecht, nur 72% wurden erreicht. </p><br><h3 id="analiz-oshibok">  Fehleranalyse </h3><br><p>  Ohne Fehleranalyse k√∂nnte die Qualit√§t der Klassifizierung nicht verbessert werden.  Nachdem wir die F√§lle untersucht haben, in denen die Modelle falsch sind, haben wir die folgenden typischen Probleme identifiziert: </p><br><ul><li>  schlechtes Markup </li><li>  Klassenungleichgewicht </li><li>  Es f√§llt den Menschen schwer, einen Gedanken zu formulieren </li><li>  Spracherkennung </li></ul><br><h4 id="razmetka">  Markup </h4><br><p>  Das Markup war oft falsch, da das Gespr√§ch mit einem Thema beginnen und mit einem anderen enden konnte und der Bediener das Thema des Anrufs festlegte, das ganz am Ende des Dialogs gesagt wurde.  Manuelle Verteilung solcher F√§lle und das Problem verschwand. </p><br><h4 id="balans-klassov">  Klassenbilanz </h4><br><p>  Es gibt verschiedene Ans√§tze, um Klassen auszugleichen. </p><br><div class="spoiler">  <b class="spoiler_title">Weitere Details</b> <div class="spoiler_text"><ol><li>  Unterabtastung.  Zuf√§lliges Entfernen von Beispielen aus gro√üen Klassen. </li><li>  √úberabtastung.  Zuf√§llige Hinzuf√ºgung von Beispielen aus Nebenklassen. </li><li>  √úberabtastung synthetischer Minderheiten.  Zuf√§llige Hinzuf√ºgung von Beispielen aus den kleinsten Klassen, aber geringf√ºgige √Ñnderung. </li></ol></div></div><br><p>  Welcher Ansatz gew√§hlt werden soll, h√§ngt von der Aufgabe und der Datenmenge ab.  Im Rahmen dieser Aufgabe war es m√∂glich, den Datensatz auszugleichen, indem Beispiele aus den meisten Frequenzklassen auf den Medianwert der Anzahl der Beispiele entfernt wurden. Die Nebenklassen blieben jedoch unver√§ndert. </p><br><h4 id="lyudyam-slozhno-formulirovat-mysli">  Es f√§llt den Menschen schwer, Gedanken zu formulieren </h4><br><p>  Nachdem wir die ersten paar S√§tze gelesen hatten, stellten wir fest, dass 36% der Anfragen nicht informativen Text enthielten, zum Beispiel: "Hallo, hallo" oder "Hallo, ich habe eine Frage".  Erst nachdem der Bediener gefragt hatte: ‚ÄûWas ist Ihre Frage?‚Äú, Formulierte der Kunde das Problem. </p><br><p>  Daher war es falsch, nur den ersten Satz des Kunden aus dem Gespr√§ch zu nehmen, da jemand einfach nicht in der Lage war, eine Anfrage sofort zu formulieren.  Daher wurde f√ºr jeden ersten Satz die ‚ÄûInformativit√§t‚Äú berechnet.  Wenn das Modell die Anforderung keiner der Klassen mit hoher Sicherheit zugeordnet hat, dh alle Klassen einen gleichen Wahrscheinlichkeitswert erhalten haben, ist die Nachricht nicht informativ und Sie m√ºssen die zweite Phrase verwenden.  Und wenn die Klasse bereits mit hoher Wahrscheinlichkeit bestimmt ist, reicht der erste Satz aus. </p><br><p>  Hier mag die richtige Frage auftauchen, aber was ist mit dem Produkt zu tun, da es die gleichen nicht informativen Abfragen geben wird.  Ich werde sp√§ter im n√§chsten Artikel dar√ºber sprechen. </p><br><h4 id="raspoznavanie-rechi">  Spracherkennung </h4><br><p>  Bei der Analyse von Fehlern haben wir Ungenauigkeiten bei der Texterkennung festgestellt, aufgrund derer die Klasse falsch definiert wurde.  Zum Beispiel wurde das Wort "Gleichgewicht" manchmal durch "Banane" ersetzt.  Wir haben uns entschlossen, die Anerkennung von Yandex und Google zu vergleichen.  Google hat sich bei unseren Daten besser gezeigt, aber nicht zu viel, um daf√ºr zu viel zu bezahlen. Der Preis ist fast doppelt so hoch. </p><br><div class="spoiler">  <b class="spoiler_title">Vergleich der Spracherkennung zwischen zwei Systemen.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/uf/t4/pu/uft4pul6klzmqzioyzdlwjoayqu.png" alt="Bild"></p></div></div><br><h3 id="itogi-analiza-oshibok">  Zusammenfassung der Fehleranalyse </h3><br><p>  Nach der Analyse und Korrektur von Fehlern konnten wir die Qualit√§t auf einen durchschnittlichen f-Score von 84% verbessern. Die beste Qualit√§t war immer noch das Ergebnis einer logistischen Regression. </p><br><div class="spoiler">  <b class="spoiler_title">Qualit√§tsgewinn f√ºr jede Klasse</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><th>  Klasse </th><th>  War </th><th>  Ist geworden </th></tr><tr><th>  Probleme mit dem Internet </th><td>  59,97 </td><td>  86,5 </td></tr><tr><th>  Probleme mit KTV </th><td>  86,71 </td><td>  89.02 </td></tr><tr><th>  Gegensprechanlagen </th><td>  51.5 </td><td>  85,74 </td></tr><tr><th>  Vertrag </th><td>  57,81 </td><td>  69,13 </td></tr><tr><th>  Zahlung </th><td>  46,81 </td><td>  74,26 </td></tr><tr><th>  ... </th><td>  ... </td><td>  ... </td></tr><tr><th>  Durchschn </th><td>  72,44 </td><td>  84,39 </td></tr></tbody></table></div></div></div><br><h2 id="vyvody">  Schlussfolgerungen </h2><br><p>  Zusammenfassend k√∂nnen wir die folgende Entwicklungsstufe zusammenfassen. </p><br><p>  <strong>Zun√§chst m√ºssen Sie sich mit Daten und Markups befassen.</strong>  Sie sollten neuronale Netze nicht sofort trainieren, da bei falschen Daten nicht viel davon profitiert.  Um Zeit- und Energieverschwendung zu vermeiden, reicht es aus, Fehler an ‚Äûeinfachen‚Äú Modellen zu analysieren. </p><br><p>  Wir sehen uns in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zweiten Serie</a> , in der wir dar√ºber sprechen, wie ein trainiertes Modell in einem produktiven Modell ausgef√ºhrt wird.  Wir werden uns Beispiele anh√∂ren, wie Methodius, der Roboter, Anrufe erh√§lt, und wir werden verstehen, warum er Anna wurde. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472350/">https://habr.com/ru/post/de472350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472334/index.html">Leben durch Gutscheine oder wie wir die Arbeit der sozialen Dienste optimieren</a></li>
<li><a href="../de472336/index.html">Beschleunigung instagram.com. Teil 3</a></li>
<li><a href="../de472338/index.html">Wer ist der JavaScript-Killer?</a></li>
<li><a href="../de472340/index.html">Hat GraphQL in der HTTP / 2-√Ñra an Relevanz verloren?</a></li>
<li><a href="../de472344/index.html">Zwei "Gef√§hrten" oder B√ºrgerkrieg Phlogiston</a></li>
<li><a href="../de472352/index.html">TechnoText, Folge II. Wir erz√§hlen, wie die Autoren von Habr an Artikeln leben und arbeiten</a></li>
<li><a href="../de472354/index.html">Zwischen dem Stuhl und dem Monitor befindet sich die Hauptschwachstelle im System: VAP-Person</a></li>
<li><a href="../de472356/index.html">Microsoft vs IBM: Wichtige √Ñnderungen in der Java-Unterst√ºtzung</a></li>
<li><a href="../de472358/index.html">30. Oktober um 17:00 Uhr Webinar ‚ÄûBereitstellen des Kubernetes-Clusters in einer Stunde in der CROC-Cloud‚Äú</a></li>
<li><a href="../de472360/index.html">Scannen des Codes von Orchard CMS auf Fehler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>