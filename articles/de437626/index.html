<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèí ‚ò∏Ô∏è üîª Handelsplattformleistung anhand eines einfachen Beispiels üë©üèº‚Äç‚öïÔ∏è üßìüèæ üë¥üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel m√∂chte ich in popul√§rwissenschaftlicher Form √ºber die Optimierung der Reaktionszeit auf Handelsplattformen von B√∂rsen und Banken (HF...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Handelsplattformleistung anhand eines einfachen Beispiels</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437626/"><img src="https://habrastorage.org/webt/ek/hb/e1/ekhbe1j_jv2gufmgexvlsgre-si.png"><br><p>  In diesem Artikel m√∂chte ich in popul√§rwissenschaftlicher Form √ºber die Optimierung der Reaktionszeit auf Handelsplattformen von B√∂rsen und Banken (HFT) sprechen.  Als Referenz sprechen wir von Zeiten von Hunderten von Nanosekunden bis Hunderten von Mikrosekunden.  F√ºr die meisten anderen Anwendungen sind viele der folgenden Optimierungsmethoden irrelevant, nur weil es keine derart strengen Anforderungen gibt. </p><br><p>  Normalerweise betrachten wir die Leistung in Bandbreiteneinheiten.  Zum Beispiel in Gigaflops.  In solchen F√§llen reduziert sich die Optimierungsaufgabe darauf, die maximale Anzahl von Berechnungen pro Zeiteinheit durchzuf√ºhren oder das Problem in der minimalen Zeit zu l√∂sen.  Das Design des Prozessors ist in erster Linie darauf ausgelegt, die maximale Anzahl von Berechnungen pro Zeiteinheit und Standardoptimierungstechniken f√ºr diese zu erreichen. </p><br><p>  Es gibt jedoch Anwendungen, bei denen die Reaktionszeit wichtiger ist, z. B. Handelsplattformen im Computerhandel (HFT), Suchmaschinen, Robotik und Telekommunikation.  Die Antwortzeit ist die Ausf√ºhrungszeit einer "einzelnen" Operation dieses Typs, beispielsweise vom Empfang eines Pakets mit aktuellen Angeboten von der Vermittlungsstelle bis zum Senden der Bestellung f√ºr die Vermittlungsoperation.  Tats√§chlich h√§ngen die Reaktionszeit und der Durchsatz (die Anzahl der Operationen dieses Typs pro Zeiteinheit) eng zusammen, aber der Unterschied ist grundlegend.  Es ist oft m√∂glich, den Durchsatz einfach durch Hinzuf√ºgen von Hardware (mehr Server) zu erh√∂hen, aber die Verbesserung der Antwortzeit auf diese Weise ist problematisch (au√üer bei Spitzenlasten). </p><a name="habracut"></a><br><p>  Zur Optimierung der Reaktionszeit werden mehrere hervorragende Techniken verwendet.  Einige verbessern gleichzeitig sowohl die Reaktionszeit als auch den Durchsatz, andere verbessern eine auf Kosten der anderen.  Um beispielsweise den Durchsatz zu verbessern, ist das Puffern typisch, um ein Array von Paketen gleichzeitig zu verarbeiten.  Offensichtlich ist dieser Ansatz f√ºr die Antwortzeit auf ein einzelnes Paket sch√§dlich. </p><br><p>  Auf Handelsplattformen ist auch die Stabilit√§t der Reaktionszeit sehr wichtig.  Die meisten Gewinne und Verluste treten bei starken Marktbewegungen auf, die von ungew√∂hnlich hohen Aktivit√§ten begleitet werden.  Die Plattform muss solchen Belastungen standhalten.  Jeder Stecker kann sp√ºrbare Verluste verursachen. </p><br><p>  Im Allgemeinen ist eine solche Optimierung der Antwortzeit auf niedriger Ebene ein komplexes Thema, das ein gutes Verst√§ndnis des Netzwerkstapels, des Kerns des Betriebssystems, der Prozessor- und Plattformleistung sowie eine effiziente Thread-Synchronisation erfordert.  Meine Aufgabe ist es, all diese komplexen Dinge mit einem einfachen und verst√§ndlichen Beispiel zu erkl√§ren. </p><cut><br><h4>  B√ºroarbeit </h4><br><p>  Verwenden wir die folgende Analogie.  Stellen Sie sich eine Gruppe von Menschen vor, die in einem B√ºro arbeiten.  Die Kommunikation erfolgt durch den Austausch von Nachrichten auf Papier (Briefe).  Jeder Brief enth√§lt den Adressaten, den Absender und die Aufgabe.  Briefe werden auf bestimmte Tische im B√ºro gelegt.  Es gibt Mitarbeiter, deren Aufgabe es ist, Briefe von au√üen zu erhalten und auf Tische zu legen.  Andere nehmen Briefe von Tischen auf und geben sie an Entscheidungstr√§ger weiter.  Jeder Entscheider arbeitet nur mit einer bestimmten Art von Buchstaben (oder Aufgaben). </p><br><p>  Der Entscheider liest die f√ºr ihn bestimmten Briefe und entscheidet, ob diese Aufgabe erledigt, verschoben oder ignoriert wird.  Aufgaben zur Ausf√ºhrung werden in einer separaten Tabelle gestapelt.  Spezialarbeiter nehmen Briefe von diesem Tisch auf und verteilen sie an die Darsteller.  Einige Briefe m√ºssen au√üerhalb des B√ºros beantwortet werden, z. B. eine Best√§tigung an den externen Absender senden. </p><br><p>  Um n√§her an der Realit√§t zu sein, wollen wir die Bedingungen etwas komplizierter machen.  Ein B√ºro ist beispielsweise ein komplexes Netzwerk von R√§umen und Korridoren, und verschiedene Arten von Arbeitnehmern k√∂nnen nur zu bestimmten Orten gehen, zu denen sie Zugang haben.  Nehmen wir, wie Mathematiker sagen, ohne Verlust der Allgemeinheit an, dass unser B√ºro unter normalen Bedingungen 200 Nachrichten pro Tag mit einer durchschnittlichen Nachrichtenverarbeitungszeit von 5 Minuten verarbeitet. </p><br><p>  Unsere Aufgabe ist es daher, die Verarbeitungszeit f√ºr Nachrichten zu minimieren.  In diesem Fall ist es w√ºnschenswert, dass die maximale Verarbeitungszeit den Durchschnitt nicht mehr als beispielsweise zweimal √ºberschreitet.  Das hei√üt, Aktivit√§tssch√ºbe sollten effektiv behandelt werden. </p><br><p>  Wo fangen wir an?  Der einfachste Weg, mehr Mitarbeiter einzustellen, besteht darin, mehr Nachrichten zu verarbeiten.  Es ist sch√∂n, nach schnellen Mitarbeitern zu suchen, dann wird die Bearbeitungszeit verk√ºrzt.  Nehmen wir an, wir haben Usain Bolt und die anderen olympischen Finalisten engagiert.  M√∂glicherweise hat sich die Verarbeitungszeit auf 2 Minuten verringert.  Es ist jedoch offensichtlich, dass es keinen weiteren Weg in diese Richtung gibt.  Niemand l√§uft schneller.  Das Limit ist erreicht.  Wenn man diese Ans√§tze mit einem Computer vergleicht, kauft die Einstellung von Mitarbeitern zus√§tzliche Hardware (Server, Prozessoren, Kerne), um die Anzahl der Ausf√ºhrungsthreads zu erh√∂hen.  Die Einstellung von Athleten √§hnelt dem Kauf des schnellsten Eisens (maximale H√§ufigkeit an erster Stelle). </p><br><p>  Vielleicht ist das Layout unseres B√ºros nicht optimal.  Es muss ausreichend Platz vorhanden sein, damit die Arbeitnehmer effizient arbeiten k√∂nnen.  Vielleicht die Korridore erweitern, sonst m√ºssen sich die Leute gegenseitig weichen und wertvolle Zeit verlieren?  Lassen Sie uns erweitern.  Lassen Sie uns auch die R√§ume leicht vergr√∂√üern, damit sich die Leute nicht n√§hern, wenn sie sich den Tischen n√§hern.  Es ist wie beim Kauf eines Servers mit mehr Kernen und mehr Speicher und E / A-Bandbreite. </p><br><p>  Dar√ºber hinaus k√∂nnen wir zum Expressdienst anstatt zur regul√§ren Post wechseln, um Nachrichten mit der Au√üenwelt auszutauschen.  In Bezug auf den Computer √§hnelt dies der Auswahl und Optimierung von Netzwerkger√§ten und dem Netzwerkstapel des Betriebssystems.  All dies sind zus√§tzliche Kosten, aber wir gehen davon aus, dass sie sich definitiv auszahlen werden. </p><br><p>  Nach den Innovationen sank unsere Nachrichtenverarbeitungszeit beispielsweise auf eine Minute.  Die Mitarbeiter k√∂nnen auch geschult werden, um den Kommunikations- und Ausf√ºhrungsprozess zu verbessern.  Vielleicht gibt dies 15 Prozent mit der richtigen Motivation.  Er wei√ü, dass wir 51 Sekunden erreicht haben.  Dies √§hnelt der Softwareoptimierung. </p><br><p>  Der n√§chste Schritt besteht darin, Kollisionen zwischen unseren schnelllebigen Mitarbeitern zu vermeiden.  Der wahrscheinliche Engpass ist die Herangehensweise an die Tabellen.  Es ist ratsam, dass die Mitarbeiter sofort und gleichzeitig auf die ben√∂tigten Schreibtische zugreifen k√∂nnen.  Sie k√∂nnen Nachrichten in Tabellen sortieren, wenn Sie sie anordnen (in separaten Ordnern ablegen), um den Zugriff zu beschleunigen.  Nachrichten k√∂nnen auch unterschiedliche Priorit√§ten haben.  Im Programm ist dies ein Analogon zur Thread-Synchronisation.  Streams sollten unbegrenzten parallelen und maximalen Zugriff auf Daten haben.  Das Beheben von Thread-Synchronisationsproblemen f√ºhrt h√§ufig zu einer enormen Erh√∂hung des Systemdurchsatzes und zur Verbesserung der Antwortzeiten.  Im Sinne der Verarbeitung von Aktivit√§tsbursts ist der Einfluss eines optimalen Synchronisationsalgorithmus im Allgemeinen schwer zu √ºbersch√§tzen. </p><br><p>  Au√üerdem befinden sich Arbeiter manchmal vor einer geschlossenen T√ºr.  Andere kleinere Probleme dieser Art k√∂nnen zu Unannehmlichkeiten und Verz√∂gerungen f√ºhren.  Es ist ratsam, die folgenden Bedingungen zu erf√ºllen: Die Anzahl der Personen in einem bestimmten Geb√§ude √ºberschreitet niemals seine Kapazit√§t, die Geschwindigkeit der Mitarbeiter ist unbegrenzt, es werden keine Ma√ünahmen ergriffen, die nicht mit der Hauptarbeit zusammenh√§ngen, und niemand tritt in den Arbeitsprozess ein.  In Bezug auf den Computer bedeutet dies, dass die Anzahl der Threads niemals die Anzahl der verf√ºgbaren Kerne √ºberschreitet, die Plattform f√ºr maximale Frequenz / Leistung konfiguriert ist, die Sparmodi deaktiviert sind, der Turbomodus aktiviert ist und der Kernel des Betriebssystems und anderer Anwendungen isoliert ist und (fast) keine Auswirkungen auf die Handelsplattform hat. </p><br><p>  Jetzt ist es an der Zeit, die Bedingungen im B√ºro noch genauer zu betrachten.  √ñffnen sich T√ºren leicht?  Rutscht der Boden?  Dies entspricht in etwa der Analyse von Interaktionen mit dem Betriebssystem.  Wenn es nichts zu verbessern gibt, k√∂nnen Sie versuchen, die Verwendung bestimmter Teile zu vermeiden.  Zum Beispiel, anstatt Briefe durch das B√ºro zu liefern, warum nicht versuchen, sie von Fenster zu Fenster zu werfen?  Sie sagen unangenehm?  Es kann unangenehm sein, aber schnell.  Dies √§hnelt der Verwendung des Kernel-Bypass-Ansatzes im Netzwerkstapel. </p><br><p>  Anstatt den Netzwerkstapel des Betriebssystems zu verwenden, f√ºhrt die Kernelumgehung den Netzwerkstapel im Benutzerbereich aus.  Dies hilft, unn√∂tiges Kopieren von Daten zwischen System und Benutzerstapel und die Verz√∂gerung bei der Ausf√ºhrung des Nachrichtenempfangsstroms zu vermeiden.  Bei der Kernel-Umgehung wartet der Empfangsstrom normalerweise aktiv.  Er sitzt nicht auf der Sperre des Betriebssystems, sondern √ºberpr√ºft die Sperrvariable kontinuierlich, bis er die Berechtigung zur Ausf√ºhrung erh√§lt. </p><br><p>  Wenn wir anfingen, Nachrichten durch die Fenster zu werfen, lassen Sie es uns effizient tun.  Am zuverl√§ssigsten ist es, von Hand zu Hand durch das Fenster zu gehen.  Dieses Prinzip wird im TCP-Protokoll verwendet.  Dies ist nicht die schnellste Option.  Mit UDP k√∂nnen Sie einfach eine Nachricht ohne Best√§tigung l√∂schen.  Es ist schneller.  Niemand muss warten.  Denken Sie, das ist die Grenze?  Nein, Sie k√∂nnen immer noch lernen, durch das Fenster zu werfen, sodass der Buchstabe direkt auf die gew√ºnschte Tabelle und in den gew√ºnschten Ordner f√§llt.  Dieser Ansatz wird als Remote Direct Memory Access (RDMA) bezeichnet.  Ich denke, wir haben die Verarbeitungszeit von Sekunden auf 35 reduziert. </p><br><p>  Oder vielleicht ein B√ºro von Grund auf neu bauen, anstatt das bestehende an unsere Bed√ºrfnisse anzupassen?  Dies bietet ideale Arbeitsbedingungen.  M√∂glicherweise verbessert dies die Reaktionszeit von Sekunden auf 20 oder sogar weniger.  Eigenes B√ºrodesign ist die Verwendung eines feldprogrammierbaren Gate-Arrays (FPGA).  FPGA ist so etwas wie ein Prozessor, dessen Hardware so programmiert ist, dass sie ein bestimmtes Problem l√∂st.  Ein regul√§rer Prozessor ist codiert, um einen bestimmten Befehlssatz f√ºr bestimmte Datentypen auszuf√ºhren, und der Ausf√ºhrungsthread (nicht zu verwechseln mit dem Anwendungsthread) ist ebenfalls festgelegt.  Im Gegensatz zum Prozessor sind FPGAs nicht f√ºr eine Reihe von Anweisungen, Datentypen und Ausf√ºhrungsabl√§ufen vorprogrammiert.  Sie sind f√ºr eine bestimmte Aufgabe programmiert und k√∂nnen in diesem Zustand nur diese ausf√ºhren (bis zur anschlie√üenden Neuprogrammierung).  Effektive FPGA-Programmierung ist keine leichte Aufgabe.  √Ñnderungen am Programm k√∂nnen ebenfalls viel Aufwand erfordern.  Und obwohl FPGA nicht bedeutet, Usain Bolt einzustellen (die Frequenzen sind viel niedriger als die des Prozessors), erm√∂glicht die unbegrenzte Parallelit√§t der Befehlsausf√ºhrung niedrigere Nachrichtenverarbeitungszeiten als auf dem Prozessor. </p><br><p>  Abschlie√üend werde ich Tools zur Leistungsanalyse f√ºr Software empfehlen.  Mit dem Intel VTuneTM-Verst√§rker und der Intel Processor Trace-Technologie k√∂nnen Sie detailliert erkennen, wo und warum CPU-Zeit verschwendet wird. </p><br><p>  Wenn Sie sich f√ºr das Thema interessieren, k√∂nnen Sie meine Artikel zur Intel Developer Zone (auf Englisch) lesen, die auch praktische technische Tipps zur Optimierung der Reaktionszeit enthalten. </p><br><ul><li>  https://software.intel.com/en-us/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware </li><li>  https://software.intel.com/en-us/articles/optimizing-computer-applications-for-latency-part-2-tuning-applications </li></ul></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437626/">https://habr.com/ru/post/de437626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437616/index.html">Sechs Monate ohne Umsatzr√ºckgang von CEO und iPhone: Warum Intel-Aktien fallen</a></li>
<li><a href="../de437618/index.html">42 Google Advanced Search Operators (vollst√§ndige Liste)</a></li>
<li><a href="../de437620/index.html">Wie die Cloud-Technologie unsere Behandlung ver√§ndert</a></li>
<li><a href="../de437622/index.html">Erste Schritte mit dem Azure Machine Learning-Dienst</a></li>
<li><a href="../de437624/index.html">OpenSceneGraph: Texturgrundlagen</a></li>
<li><a href="../de437630/index.html">Die wichtigsten Ank√ºndigungen von Microsoft von der BETT-Konferenz</a></li>
<li><a href="../de437632/index.html">Mash, die Grundlagen der Sprache</a></li>
<li><a href="../de437634/index.html">DIY Wireless Router</a></li>
<li><a href="../de437636/index.html">Ver√∂ffentlichung der App im Microsoft Store: einige √Ñnderungen f√ºr das Jahr</a></li>
<li><a href="../de437638/index.html">"Was ist der Antwortpunkt?" √úBERARBEITUNG DES NEONIZERS. Atmotube und L√∂ten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>