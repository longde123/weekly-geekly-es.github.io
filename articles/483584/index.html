<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüíª üç° üåã Transferir un backend PHP al bus de flujos de Redis y elegir una biblioteca independiente de los marcos üé≤ üåâ üèúÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pr√≥logo 
 Mi sitio, que hago como hobby, est√° dise√±ado para almacenar p√°ginas de inicio interesantes y sitios personales. Este tema comenz√≥ a interesa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transferir un backend PHP al bus de flujos de Redis y elegir una biblioteca independiente de los marcos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483584/"><img src="https://habrastorage.org/webt/wk/hw/mm/wkhwmmingyzwy7-r1esz_9vna54.png"><br><br><h2>  Pr√≥logo </h2><br>  Mi sitio, que hago como hobby, est√° dise√±ado para almacenar p√°ginas de inicio interesantes y sitios personales.  Este tema comenz√≥ a interesarme desde el comienzo de mi camino en la programaci√≥n, en ese momento estaba encantado de encontrar excelentes profesionales que escriben sobre s√≠ mismos, sus pasatiempos y proyectos.  El h√°bito de descubrirlos ha permanecido por ahora: en casi todos los sitios web comerciales y no muy, sigo buscando en el pie de p√°gina en busca de enlaces a autores. <br><a name="habracut"></a><br><h2>  Implementaci√≥n de la idea. </h2><br>  La primera versi√≥n era solo una p√°gina html en mi sitio personal, donde pon√≠a enlaces con firmas en una lista ul.  Despu√©s de haber escrito 20 p√°ginas durante alg√∫n tiempo, comenc√© a pensar que no era muy efectivo y decid√≠ intentar automatizar el proceso.  En stackoverflow, not√© que muchos indican sitios en sus perfiles, as√≠ que escrib√≠ un analizador de php que solo recorri√≥ los perfiles, comenzando desde el primero (direcci√≥n en SO y hasta el d√≠a de hoy como este: `/ users / 1`), extrajo enlaces desde la etiqueta deseada y apilada en SQLite. <br><br>  Esto se puede llamar la segunda versi√≥n: una colecci√≥n de decenas de miles de URL en una placa SQLite que reemplaz√≥ la lista est√°tica en html.  Hice una b√∫squeda simple en esta lista.  Porque  solo hab√≠a urls, luego la b√∫squeda era solo para ellos. <br><br>  En esta etapa, abandon√© el proyecto y volv√≠ a √©l, despu√©s de mucho tiempo.  En esta etapa, mi experiencia laboral ya era de m√°s de tres a√±os y sent√≠ que pod√≠a hacer algo m√°s serio.  Adem√°s, hab√≠a un gran deseo de dominar tecnolog√≠as relativamente nuevas para ellos mismos. <br><br><h2>  Versi√≥n moderna </h2><br>  <a href="https://hpdb.ru/">El proyecto se</a> implement√≥ en la ventana acoplable, la base de datos se transfiri√≥ a mongoDb y, relativamente recientemente, se agregaron r√°banos, que al principio solo eran para el almacenamiento en cach√©.  Como base, se utiliza uno de los microframes PHP. <br><br><h4>  El problema </h4><br>  Los sitios nuevos se agregan mediante un comando de consola que hace lo siguiente sincr√≥nicamente: <br><br><ul><li>  Descargar contenido por URL <br></li><li>  Indica si HTTPS estaba disponible <br></li><li>  Conserva la esencia del sitio web. <br></li><li>  El c√≥digo fuente HTML y los encabezados se guardan en el historial de indexaci√≥n <br></li><li>  Analiza contenido, recupera T√≠tulo y Descripci√≥n <br></li><li>  Guarda datos en una colecci√≥n separada. <br></li></ul><br>  Esto fue suficiente para almacenar sitios y mostrarlos en una lista: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a4/914/0f8/5a49140f8a7a27eac0e22c21b24ada69.png"><br><br>  Pero la idea de indexar, clasificar y clasificar autom√°ticamente todo, mantener todo actualizado, encaja mal en este paradigma.  Incluso agregar un m√©todo web para agregar p√°ginas requer√≠a duplicaci√≥n y bloqueo de c√≥digo para evitar posibles DDoS. <br><br>  En general, por supuesto, todo se puede hacer sincr√≥nicamente, y en el m√©todo web, simplemente guarde la URL para asegurarse de que el monstruoso demonio realice todas las tareas para las URL de la lista.  Pero de todos modos, incluso aqu√≠ la palabra "girar" suplica.  Y si se implementa la cola, todas las tareas se pueden dividir y realizar al menos de forma asincr√≥nica. <br><br><h4>  Soluci√≥n </h4><br>  Introduzca colas y cree un sistema de procesamiento basado en eventos para todas las tareas.  Y solo por mucho tiempo quise probar Redis Streams. <br><br><h2>  Usando flujos de Redis en PHP </h2><br>  Porque  No tengo un marco de los tres gigantes Symfony, Laravel, Yii, y me gustar√≠a encontrar una biblioteca independiente.  Pero, como result√≥ (despu√©s del primer examen), es imposible encontrar bibliotecas individuales serias.  Todo lo que est√° asociado con las colas es una proyecci√≥n de 3 confirmaciones de hace cinco a√±os o est√° vinculado a un marco. <br><br>  He o√≠do hablar de Symfony como proveedor de algunos componentes √∫tiles, y ya uso algunos.  Y tambi√©n de Laravel, tambi√©n se puede usar algo, por ejemplo, su ORM, sin la presencia del marco en s√≠. <br><br><h4>  Symfony / Messenger </h4><br>  El primer candidato parec√≠a inmediatamente ideal, y sin ninguna duda lo instal√©.  Pero fue m√°s dif√≠cil encontrar ejemplos de uso en Google fuera de Symfony.  ¬øC√≥mo recolectar de un mont√≥n de clases con nombres universales, sin decir nada, un autob√∫s para enviar mensajes, e incluso en Redis? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2b/1bf/ac0/f2b1bfac07a1e307d7b5826a1b191e3d.png"><br><br>  La documentaci√≥n en el sitio oficial era bastante detallada, pero la inicializaci√≥n se describi√≥ solo para Symfony usando su YML favorito y otros m√©todos m√°gicos para un no sinfonista.  No ten√≠a inter√©s en el proceso de instalaci√≥n, especialmente durante las vacaciones de A√±o Nuevo.  Pero tuve que hacer esto durante un tiempo inesperadamente largo. <br><br>  Intentar descubrir c√≥mo crear una instancia de un sistema utilizando fuentes de Symfony tampoco es la tarea m√°s trivial para plazos ajustados: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc7/de8/991/bc7de89919463a8e7e4bfc5adec9df27.png"><br><br>  Hurgando en esto e intentando hacer algo con mis manos, llegu√© a la conclusi√≥n de que estaba haciendo alg√∫n tipo de muletas y decid√≠ probar otra cosa. <br><br><h4>  iluminar / hacer cola </h4><br>  Result√≥ que esta biblioteca estaba estrechamente vinculada a la infraestructura de Laravel y a un mont√≥n de otras dependencias, por lo que no pas√© mucho tiempo en ella: instal√©, mir√©, vi dependencias y la elimin√©. <br><br><h4>  yiisoft / yii2-queue </h4><br>  Bueno, aqu√≠ se asumi√≥ de inmediato por el nombre, una vez m√°s un v√≠nculo estrecho con Yii2.  Tuve que usar esta biblioteca y no estaba mal, pero no pens√© que dependiera completamente de Yii2. <br><br><h4>  El resto </h4><br>  Todo lo dem√°s que encontr√© en el github era proyecciones anticuadas y abandonadas poco confiables sin estrellas, tenedores y una gran cantidad de confirmaciones. <br><br><h2>  Regresar a Symfony / Messenger, detalles t√©cnicos </h2><br>  Tuve que lidiar con esta biblioteca y despu√©s de pasar m√°s tiempo pude.  Result√≥ que todo es bastante conciso y simple.  Para la instanciaci√≥n del autob√∫s, hice una peque√±a f√°brica, porque  Ten√≠a varios neum√°ticos con diferentes manipuladores. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/970/723/ab2/970723ab2c86a6b4adfb35f32208fa76.png"><br><br>  Solo unos pocos pasos: <br><br><ul><li>  Cree manejadores de mensajes que deber√≠an ser invocables <br></li><li>  Envu√©lvalos en HandlerDescriptor (clase de la biblioteca) <br></li><li>  Envolvemos estos "Descriptores" en la instancia de HandlersLocator. <br></li><li>  Agregar HandlersLocator a la instancia de MessageBus <br></li><li>  Pasamos al SendersLocator un conjunto de `SenderInterface`, en mi caso, instancias de las clases` RedisTransport`, que est√°n configuradas de manera obvia <br></li><li>  Agregar SendersLocator a la instancia de MessageBus <br></li></ul><br>  MessageBus tiene un m√©todo `-&gt; dispatch ()`, que busca los manejadores apropiados en el HandlersLocator y les pasa el mensaje, utilizando el `SenderInterface` correspondiente para enviar a trav√©s del bus (transmisiones de Redis). <br><br>  En la configuraci√≥n del contenedor (en este caso php-di), todo este grupo se puede configurar de la siguiente manera: <br><br><pre><code class="php hljs">CONTAINER_REDIS_TRANSPORT_SECRET =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisTransport( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_SECRET), $c-&gt;get(CONTAINER_SERIALIZER)) ; }, CONTAINER_REDIS_TRANSPORT_LOG =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisTransport( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_LOG), $c-&gt;get(CONTAINER_SERIALIZER)) ; }, CONTAINER_REDIS_STREAM_RECEIVER_SECRET =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisReceiver( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_SECRET), $c-&gt;get(CONTAINER_SERIALIZER) ); }, CONTAINER_REDIS_STREAM_RECEIVER_LOG =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisReceiver( $c-&gt;get(CONTAINER_REDIS_STREAM_CONNECTION_LOG), $c-&gt;get(CONTAINER_SERIALIZER) ); }, CONTAINER_REDIS_STREAM_BUS =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ $sendersLocator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendersLocator([ \App\Messages\SecretJsonMessages::class =&gt; [CONTAINER_REDIS_TRANSPORT_SECRET], \App\Messages\DaemonLogMessage::class =&gt; [CONTAINER_REDIS_TRANSPORT_LOG], ], $c); $middleware[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendMessageMiddleware($sendersLocator); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageBus($middleware); }, CONTAINER_REDIS_STREAM_CONNECTION_SECRET =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ $host = <span class="hljs-string"><span class="hljs-string">'bu-02-redis'</span></span>; $port = <span class="hljs-number"><span class="hljs-number">6379</span></span>; $dsn = <span class="hljs-string"><span class="hljs-string">"redis://$host:$port"</span></span>; $options = [ <span class="hljs-string"><span class="hljs-string">'stream'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'secret'</span></span>, <span class="hljs-string"><span class="hljs-string">'group'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, <span class="hljs-string"><span class="hljs-string">'consumer'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Connection::fromDsn($dsn, $options); }, CONTAINER_REDIS_STREAM_CONNECTION_LOG =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContainerInterface $c)</span></span></span><span class="hljs-function"> </span></span>{ $host = <span class="hljs-string"><span class="hljs-string">'bu-02-redis'</span></span>; $port = <span class="hljs-number"><span class="hljs-number">6379</span></span>; $dsn = <span class="hljs-string"><span class="hljs-string">"redis://$host:$port"</span></span>; $options = [ <span class="hljs-string"><span class="hljs-string">'stream'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'group'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, <span class="hljs-string"><span class="hljs-string">'consumer'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Connection::fromDsn($dsn, $options); },</code> </pre> <br>  Se puede ver que en SendersLocator asignamos un "transporte" diferente para dos mensajes diferentes, cada uno de los cuales tiene su propia conexi√≥n con las secuencias correspondientes. <br><br>  Hice un proyecto de demostraci√≥n por separado que demuestra una aplicaci√≥n de tres demonios que se comunican entre s√≠ mediante un bus de este tipo: <a href="https://github.com/backend-university/products/tree/master/products/02-redis-streams-bus">https://github.com/backend-university/products/tree/master/products/02-redis-streams-bus</a> . <br><br>  Pero le mostrar√© c√≥mo se puede organizar un consumidor: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Messages</span></span>\<span class="hljs-title"><span class="hljs-title">DaemonLogMessage</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">HandlerDescriptor</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">HandlersLocator</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">MessageBus</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Middleware</span></span>\<span class="hljs-title"><span class="hljs-title">HandleMessageMiddleware</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Middleware</span></span>\<span class="hljs-title"><span class="hljs-title">SendMessageMiddleware</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Messenger</span></span>\<span class="hljs-title"><span class="hljs-title">Transport</span></span>\<span class="hljs-title"><span class="hljs-title">Sender</span></span>\<span class="hljs-title"><span class="hljs-title">SendersLocator</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../vendor/autoload.php'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Psr\Container\ContainerInterface $container */</span></span> $container = <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(<span class="hljs-string"><span class="hljs-string">'config/container.php'</span></span>); $handlers = [ DaemonLogMessage::class =&gt; [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HandlerDescriptor( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DaemonLogMessage $m)</span></span></span><span class="hljs-function"> </span></span>{ \error_log(<span class="hljs-string"><span class="hljs-string">'DaemonLogHandler: message handled: / '</span></span> . $m-&gt;getMessage()); }, [<span class="hljs-string"><span class="hljs-string">'from_transport'</span></span> =&gt; CONTAINER_REDIS_TRANSPORT_LOG] ) ], ]; $middleware = []; $middleware[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HandleMessageMiddleware(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HandlersLocator($handlers)); $sendersLocator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendersLocator([<span class="hljs-string"><span class="hljs-string">'*'</span></span> =&gt; [CONTAINER_REDIS_TRANSPORT_LOG]], $container); $middleware[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendMessageMiddleware($sendersLocator); $bus = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageBus($middleware); $receivers = [ CONTAINER_REDIS_TRANSPORT_LOG =&gt; $container-&gt;get(CONTAINER_REDIS_STREAM_RECEIVER_LOG), ]; $w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Symfony\Component\Messenger\Worker($receivers, $bus, $container-&gt;get(CONTAINER_EVENT_DISPATCHER)); $w-&gt;run();</code> </pre><br><h2>  Usar esta infraestructura en una aplicaci√≥n </h2><br>  Despu√©s de implementar el bus en mi backend, seleccion√© pasos individuales del antiguo equipo s√≠ncrono e hice controladores separados, cada uno de los cuales se dedica a su propio negocio. <br><br>  La tuber√≠a para agregar un nuevo sitio a la base de datos es la siguiente: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1a/ccf/202/f1accf2020c51b0ae5e5c39033d7d375.png"><br><br>  Y justo despu√©s de eso, me result√≥ mucho m√°s f√°cil agregar nueva funcionalidad, por ejemplo, extraer y analizar Rss.  Porque  Dado que este proceso tambi√©n requiere contenido fuente, el controlador-extractor del enlace rss, as√≠ como WebsiteIndexHistoryPersistor, se suscribe al mensaje "Contenido / Contenido HTML", lo procesa y pasa el mensaje deseado a su canalizaci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8cc/641/d52/8cc641d52b4a394c5381967360187ab0.png"><br><br>  Al final, result√≥ que varios demonios, cada uno de los cuales mantiene conexiones solo con los recursos necesarios.  Por ejemplo, el demonio de <i>rastreadores</i> contiene todos los controladores que requieren ir a Internet para obtener contenido, y el demonio <i>persistente</i> mantiene una conexi√≥n a la base de datos. <br><br>  Ahora, en lugar de seleccionar de la base de datos, la identificaci√≥n requerida despu√©s de ser insertada por la persistencia simplemente se pasa a trav√©s del bus a todos los manejadores interesados. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/483584/">https://habr.com/ru/post/483584/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483568/index.html">Crear una computadora primitiva desde cero</a></li>
<li><a href="../483570/index.html">Pero, ¬øy si la tierra es plana?</a></li>
<li><a href="../483574/index.html">An√°lisis de confiabilidad de equipos electr√≥nicos de choque y vibraci√≥n: descripci√≥n general</a></li>
<li><a href="../483578/index.html">Noticias del mundo de OpenStreetMap No. 493 (24/12/2019 - 30/12/2019)</a></li>
<li><a href="../483580/index.html">VIM: este no es solo un editor, es una integraci√≥n con todo su entorno de trabajo</a></li>
<li><a href="../483586/index.html">Los fundamentos de trabajar con zmq en python, creando un almac√©n simple de clave / valor</a></li>
<li><a href="../483588/index.html">C√≥mo intentar bloquear cualquier sitio usando ILV</a></li>
<li><a href="../483590/index.html">Busque un error de FDCAN que no sea</a></li>
<li><a href="../483594/index.html">Econom√≠a del futuro para f√≠sicos.</a></li>
<li><a href="../483598/index.html">A√∫n m√°s huevos de Pascua musicales: seguimos hablando de regalos para oyentes atentos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>