<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”’ ğŸ¥Ÿ âœŒï¸ Radio: UKW-Radio basierend auf Atmega328-P und RDA5807M ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ ğŸ‘©ğŸ¾â€ğŸ’¼ âœ’ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag, lieber Harazhiteli! 

 Mein Name ist Mikhail Matveev und ich mÃ¶chte Sie auf ein Projekt eines modernen â€Radio-Designersâ€œ aufmerksam machen,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Radio: UKW-Radio basierend auf Atmega328-P und RDA5807M</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415291/"> Guten Tag, lieber Harazhiteli! <br><br>  Mein Name ist Mikhail Matveev und ich mÃ¶chte Sie auf ein Projekt eines modernen â€Radio-Designersâ€œ aufmerksam machen, der auf Atmega328 MK und RDA5807M-Chip basiert. <br><br><h2>  Hintergrund </h2><br>  Ich denke, viele von Ihnen haben nicht nur gehÃ¶rt, sondern sind auch direkt auf eine Plattform wie Arduino gestoÃŸen.  Und wie meine persÃ¶nlichen Statistiken zeigen, gehen nur sehr wenige weiter als blinkende LEDs.  Als ich Arduino zum ersten Mal traf, wurde ich von der Tatsache gestoppt, dass es keine Ideen gab, wie genau ich alle Funktionen derselben UNO in â€vollem Umfangâ€œ nutzen kÃ¶nnte.  Genug, um nur einen einfachen Roboter auf zwei RÃ¤dern und einen Alarm zu montieren.  Ich wollte jedoch etwas grÃ¼ndlicheres tun. <a name="habracut"></a><br><br>  Dann erinnerte ich mich an meine Kindheit, in der es sogenannte "Radiodesigner" gab.  Ein hartes sowjetisches DIY-Kit, das bei ordnungsgemÃ¤ÃŸer Montage und ordnungsgemÃ¤ÃŸem LÃ¶ten sogar zu funktionieren begann und Radiosender in verschiedenen Bereichen abfing: Jugend, Electron-M und andere. <br><br><img src="https://habrastorage.org/webt/g2/is/hc/g2ishchig43dyihdouakzc4kspq.jpeg"><br><br>  Keiner dieser Kit'ov habe ich nicht bekommen, aber ECON-1 bekommen: <br><br><img src="https://habrastorage.org/webt/3r/nu/k3/3rnuk3lqxypldc7utz_exr3mlas.jpeg"><br><br>  Der wichtigste â€Trickâ€œ dieses Designers war, dass es mit seiner Hilfe mÃ¶glich war, schnell und einfach eine groÃŸe Anzahl verschiedener GerÃ¤te zusammenzubauen, von einfachen â€HochtÃ¶nernâ€œ bis zu einem vollwertigen FunkempfÃ¤nger. <br>  ECON-1 ist einer der vielen GrÃ¼nde, warum ich im IT-Bereich gelandet bin.  Und mir kam der Gedanke, dass es schÃ¶n wÃ¤re, eine moderne Version eines solchen Designers zu erstellen, damit jeder das GerÃ¤t genieÃŸen kann, das gerade mit seinen eigenen HÃ¤nden zusammengebaut wurde. <br><br><h2>  Prototyp auf Leiterplatte </h2><br>  Mein Freund, ein talentierter Ingenieur, Konstantin Tomarevsky, unterstÃ¼tzte die Idee, und wir begannen darÃ¼ber nachzudenken, wie der erste Prototyp hergestellt werden sollte. <br><br>  Die Idee war, einen FM-EmpfÃ¤nger zu schaffen, der Ã¼ber MK gesteuert werden kann. <br>  Der erste Prototyp wurde am Installationsort zusammengebaut und es wurde klar, dass es funktioniert :) <br><br><img src="https://habrastorage.org/webt/mx/37/d_/mx37d_ip32bxh5iskl8we4fvsd8.jpeg"><br><br>  FÃ¼r die allererste Version wurden folgende Komponenten ausgewÃ¤hlt: <br><br>  1. MK Atmega328P-PU <br>  2. RDA5807M <br>  3. Nokia 5110 Display <br><br>  Ein solcher Mikrocontroller wird in Arduino UNO verwendet, unser GerÃ¤t ist auf Hardwareebene mit UNO kompatibel. <br><br>  RDA5807M ist das â€Herzâ€œ unseres Designers.  Dieser Tuner verfÃ¼gt Ã¼ber folgende Funktionen: <br><br>  - CMOS-Technologie <br>  - Monolithisches GehÃ¤use, erfordert keine externen Komponenten (fast) <br>  - Frequenzband: 50-115 MHz <br>  - Schritt zwischen den KanÃ¤len - von 200 bis 25 kHz <br>  - RDS / RBDS <br>  - ADC und eingebauter Frequenzsynthesizer <br>  - Adaptive RauschunterdrÃ¼ckung <br>  - Digitale Schnittstelle (I2C) <br>  - SignalstÃ¤rke (RSSI) <br>  - VerstÃ¤rker <br>  - LautstÃ¤rkeregelung <br><br>  Das Display von Nokia ist schwarzweiÃŸ (84 x 48 Pixel).  Es ist sehr einfach zu verbinden und zu verwalten. <br><br>  Nach dem LÃ¶ten auf der Leiterplatte stellte sich Folgendes heraus: <br><br><img src="https://habrastorage.org/webt/xh/2z/iq/xh2ziqa5kbwdzrczgj0d_buxc3q.jpeg"><br><br>  Es wurde beschlossen, den Bootloader von Arduino zu verwenden. Dadurch konnten wir die KompatibilitÃ¤t mit allen zahlreichen Bibliotheken aufrechterhalten und die Eintrittsschwelle fÃ¼r diejenigen, die bereits Erfahrung mit der Plattform hatten, erheblich senken. <br>  Die Benutzerinteraktionsschnittstelle ist wie folgt implementiert.  Drei Tasten, die Ã¼ber WiderstÃ¤nde mit dem Analogeingang des MK verbunden sind, dienen zum Umschalten des Modus und zur Steuerung des EmpfÃ¤ngers.  Eine weitere Taste dient zum Neustart des MK.  Der Bildschirm zeigt dementsprechend Informationen zu LautstÃ¤rke, Sender usw. an. <br><br><h2>  LUT, Fotolack und Debugging </h2><br>  Nach erfolgreichen Tests auf der Leiterplatte haben wir beschlossen, mehrere weitere Prototypen mit der LUT-Methode (und in Zukunft mit Fotolack) zu erstellen.  Wir haben uns auch entschlossen, den Receiver zu verbessern, indem wir dort einen weiteren KlangverstÃ¤rker hinzufÃ¼gen, um nicht nur KopfhÃ¶rer, sondern auch einen externen Lautsprecher anzuschlieÃŸen.  Die Wahl fiel auf den PAM8403, einen einfachen und kostengÃ¼nstigen VerstÃ¤rker, der 5 V benÃ¶tigt. <br><br>  Der erste nach der LUT-Methode hergestellte Prototyp sah wie folgt aus: <br><br><img src="https://habrastorage.org/webt/fn/ji/jo/fnjijodeszqegs5iffb6egidcmo.jpeg"><br><br>  LUT ist eine gute Sache fÃ¼r relativ schnelles Prototyping zu Hause, aber wenn es um doppelseitige Boards geht, beginnen die Schwierigkeiten.  Die Anzahl der Komponenten auf der Platine hat zugenommen. Beispielsweise haben wir beschlossen, einen Anschluss fÃ¼r den Programmierer auf der Platine zu platzieren, damit der MK nicht jedes Mal zum Blinken entfernt werden muss.  So wurde der nachfolgende Prototyp zweiseitig, wurde nach der Fotolackmethode hergestellt und sah viel schÃ¶ner aus: <br><br><img src="https://habrastorage.org/webt/5f/wf/dk/5fwfdkhw4vfrv85qfcldmzgtx8i.jpeg"><br><br>  In der Montage: <br><br><img src="https://habrastorage.org/webt/li/zw/yt/lizwytnutcsp25hppt4ekhlvik0.jpeg"><br><br>  Der nÃ¤chste Schritt war die Ablehnung der â€schwenkbarenâ€œ Komponenten, die wir mit einreihigen PINs auf der Platine platziert haben.  Daher wurde beschlossen, den VerstÃ¤rker durch einen LM386N zu ersetzen und einen CD4050BE-Pegelwandler zu installieren.  All dies komplizierte das Design, aber das GerÃ¤t sah viel besser aus. <br><br>  Der endgÃ¼ltige Prototyp, den wir zu Hause hergestellt haben, sah folgendermaÃŸen aus: <br><br><img src="https://habrastorage.org/webt/ba/0k/bv/ba0kbvebxojxd2jhnatgbhetrhs.jpeg"><br><br><h2>  Leiterplattenbestellung </h2><br>  In China kÃ¶nnen Sie Leiterplatten bestellen, die auf industrielle Weise hergestellt wurden.  Die Kosten sind selbst bei kleinen Auflagen relativ gering und die Wartezeit (einschlieÃŸlich Lieferung) betrÃ¤gt in der Regel nicht mehr als 2-3 Wochen. <br><br>  Die erste "Charge" von Karten, die auf PCBWay bestellt wurden.  Also sah sie: <br><br><img src="https://habrastorage.org/webt/kd/uk/bw/kdukbwgr9upfot-ygn61o0r860c.jpeg"><br><br>  Eines der Probleme, die wir durch Unerfahrenheit hatten: Die Metallisierung â€frisstâ€œ einen erheblichen Teil der GrÃ¶ÃŸe des Lochs selbst, sodass einige Komponenten kaum in die gewÃ¼nschten LÃ¶cher â€passenâ€œ.  Beim Entwurf einer Schaltung muss dieser Punkt berÃ¼cksichtigt werden. <br><br>  Basierend auf den Testergebnissen haben wir das Design weiter verfeinert, indem wir mehrere Kondensatoren fÃ¼r einen stabileren Betrieb des GerÃ¤ts hinzugefÃ¼gt haben.  Wir haben einen weiteren Prototyp gesammelt: <br><br><img src="https://habrastorage.org/webt/8s/-h/3y/8s-h3y55bje7nttvkmj_z_zyvjk.jpeg"><br><br>  Ãœber den USB-Anschluss wird der EmpfÃ¤nger mit Strom versorgt.  Die Stromversorgung erfolgt auch, wenn der Programmierer angeschlossen ist. <br><br>  Alles arbeitet! <br><br><h2>  Firmware </h2><br>  Wir sollten uns auch mit der Firmware befassen.  Es ist in C ++ geschrieben und wir vertreiben es unter der GPLv3-Lizenz: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/xtremespb/fm_receiver.</a> Ich habe praktisch nicht in C / C ++ entwickelt, daher ist der Code (wahrscheinlich) alles andere als ideal und kann Fehler enthalten, aber die GPL und die GPL, damit sie von der Community weiterentwickelt werden kann :) <br><br>  Zu den aktuellen Firmware-Funktionen gehÃ¶ren: <br><br>  - Manuelle und automatische Abstimmung von Sendern <br>  - RDS <br>  - LautstÃ¤rkeregler <br>  - Aktivieren des erweiterten Bassmodus <br>  - Schalten Sie die Hintergrundbeleuchtung des Displays ein oder aus <br>  - Anzeige und dynamische Visualisierung des Signalpegels <br><br>  In der nÃ¤chsten, vierten Revision werden wir einige nÃ¼tzlichere â€Chipsâ€œ herstellen: Wir werden den linken und den rechten Kanal mit den analogen EingÃ¤ngen des MK verbinden, um das eingehende Audiosignal zu â€visualisierenâ€œ. <br><br>  Die Funktionen des GerÃ¤ts sind Ã¼brigens nicht auf das Radio beschrÃ¤nkt!  Niemand stÃ¶rt sich zum Beispiel daran, ein Spiel (aus GrÃ¼nden des Interesses habe ich das gute alte Arkanoid gemacht) oder ein anderes Programm zu schreiben, das die FÃ¤higkeiten des Bretts nutzt. <br><br><h2>  Produktion </h2><br>  Die Entwicklung des GerÃ¤ts von der Idee bis zur Implementierung dauerte ungefÃ¤hr 6 Monate, was bei fast vollstÃ¤ndigem Mangel an Erfahrung auf diesem Gebiet nicht so schlimm ist. <br><br>  Im Moment haben wir ungefÃ¤hr 10 fertig montierte Kits, die alles enthalten, was Sie zum Bau Ihres eigenen GerÃ¤ts benÃ¶tigen: <br><br>  - MK Atmega328P-PU <br>  - Pegelwandler CD4050BE <br>  - Zeigen Sie das Nokia 5110 an <br>  - EmpfÃ¤nger RDA5807M <br>  - USBasp-Programmierer <br>  - OperationsverstÃ¤rker LM386N <br>  - AnschlÃ¼sse fÃ¼r MK und Programmierer <br>  - USB B, Audio-Buchse 3.5, drei Tasten, Kabel, einreihige AnschlÃ¼sse <br>  - 11 WiderstÃ¤nde und 12 Kondensatoren, 4 InduktivitÃ¤ten, Quarz, eine Zenerdiode und eine LED <br>  - Lautsprecher <br>  - Leiterplatte <br><br>  FÃ¼r die Montage benÃ¶tigen Sie LÃ¶tmittel, Flussmittel und einen LÃ¶tkolben, sonst wird nichts benÃ¶tigt. <br>  Alle Komponenten sind in einer kleinen Schachtel â€Bastelkartonâ€œ verpackt: <br><br><img src="https://habrastorage.org/webt/mr/b3/5c/mrb35cyc1fyt3lgxmrh1zdykqxs.jpeg"><br><br>  Firmware-Quellen wurden bereits auf Github verÃ¶ffentlicht.  Die Gerber-Datei, das schematische Diagramm und die Montageanleitung werden ebenfalls spÃ¤ter verÃ¶ffentlicht. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415291/">https://habr.com/ru/post/de415291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415279/index.html">Warum mit einem Mikroskop NÃ¤gel einschlagen, wenn Sie Alpine Linux haben?</a></li>
<li><a href="../de415283/index.html">OWASP TOP 10 Projekt: EinfÃ¼hrung</a></li>
<li><a href="../de415285/index.html">MBLT DEV 2018: Erstredner und neueste FrÃ¼hbuchertickets</a></li>
<li><a href="../de415287/index.html">Klassifikation der Eigenschaften von Raum-Zeit-Volumina (Luftverteidigung)</a></li>
<li><a href="../de415289/index.html">Crowd-Tests oder Wo Sie Erfahrungen fÃ¼r die erste Testarbeit sammeln kÃ¶nnen</a></li>
<li><a href="../de415293/index.html">Dunkle Solitonen, FrequenzkÃ¤mme, MikrokavitÃ¤ten und 80 km Glasfaserkabel</a></li>
<li><a href="../de415297/index.html">Xbox Underground. Jung und nachlÃ¤ssig</a></li>
<li><a href="../de415299/index.html">Zabbix Moscow Meetup 2018 bei Badoo: RÃ¼ckblick und Materialien</a></li>
<li><a href="../de415301/index.html">Code-Grundlagen: Kostenlose Tutorials fÃ¼r AnfÃ¤nger</a></li>
<li><a href="../de415303/index.html">Die Sprache der Rolling Stones: Wie zeichnet man ein Logo fÃ¼r alle Zeiten? Interview mit dem SchÃ¶pfer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>