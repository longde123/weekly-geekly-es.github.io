<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÄ üßïüèª ü¶â Engenharia reversa de formato bin√°rio usando arquivos SNG Korg como exemplo. Parte 2 üë©üèø‚Äçüéì üõ∑ üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em um artigo anterior, descrevi a linha de racioc√≠nio ao analisar um formato de dados bin√°rios desconhecido. Usando o editor hexadecimal Synalaze It!,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Engenharia reversa de formato bin√°rio usando arquivos SNG Korg como exemplo. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442740/"><img src="https://habrastorage.org/webt/ja/rn/d3/jarnd3grsgftxg_bdcm3uztkgqa.jpeg"><br><br>  Em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior,</a> descrevi a linha de racioc√≠nio ao analisar um formato de dados bin√°rios desconhecido.  Usando o editor hexadecimal Synalaze It!, Mostrei como voc√™ pode analisar o cabe√ßalho de um arquivo bin√°rio e destacar os principais blocos de dados.  Como no caso do formato SNG, esses blocos formam uma estrutura hier√°rquica, consegui usar a recurs√£o na gram√°tica para criar automaticamente sua visualiza√ß√£o em √°rvore de forma leg√≠vel por humanos. <br><br>  Neste artigo, descreverei uma abordagem semelhante usada para analisar diretamente os dados da m√∫sica.  Usando os recursos internos do editor Hex, criarei um prot√≥tipo de um conversor de dados no formato Midi comum e simples.  Teremos que enfrentar v√°rias armadilhas e resolver a tarefa aparentemente simples de converter amostras de tempo.  Por fim, explicarei como voc√™ pode usar os resultados obtidos e a gram√°tica do arquivo bin√°rio para gerar parte do c√≥digo para o futuro conversor. <br><a name="habracut"></a><br><h3>  Analisando dados de m√∫sica </h3><br>  Ent√£o, √© hora de descobrir como os dados da m√∫sica s√£o armazenados em arquivos .SNG.  Em parte, mencionei isso em um artigo anterior.  A documenta√ß√£o do sintetizador afirma que o arquivo SNG pode conter at√© 128 "m√∫sicas", cada uma composta por 16 faixas e uma faixa principal (para gravar eventos globais e alterar os efeitos principais).  Diferentemente do formato Midi, onde os eventos de m√∫sica simplesmente se seguem com um delta de tempo espec√≠fico, o formato SNG cont√©m medidas de m√∫sica. <br><br>  Uma medida √© um tipo de cont√™iner para uma sequ√™ncia de notas.  A dimens√£o da medida √© indicada em nota√ß√£o musical.  Por exemplo, 4/4 - significa que a medida cont√©m 4 batidas, cada uma com dura√ß√£o igual a uma sem√≠nima.  Simplificando, essa medida conter√° quatro sem√≠nimas, ou duas semitons ou oito colcheias. <br><br><div class="spoiler">  <b class="spoiler_title">Veja como fica na nota√ß√£o musical</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/n4/wj/_p/n4wj_p6rc6oisguqdvevylxkvwq.jpeg"><br></div></div><br>  As medidas no arquivo SNG s√£o usadas para editar faixas no seq√ºenciador de sintetizador incorporado.  Usando o menu, voc√™ pode excluir, adicionar e duplicar medidas em qualquer lugar da faixa.  Voc√™ tamb√©m pode repetir ciclos ou alterar suas dimens√µes.  Finalmente, voc√™ pode simplesmente come√ßar a gravar uma faixa a partir de qualquer medida. <br><br>  Vamos tentar ver como tudo isso √© armazenado em um arquivo bin√°rio.  O cont√™iner comum para "m√∫sicas" √© o bloco SGS1.  Os dados para cada m√∫sica s√£o armazenados nos blocos SDT1: <br><br><img src="https://habrastorage.org/webt/ea/ho/ry/eahory6upy5olir7c73xeovijzw.jpeg"><br><br>  Os blocos SPR1 e BMT1 armazenam configura√ß√µes gerais da m√∫sica (andamento, configura√ß√µes do metr√¥nomo) e configura√ß√µes individuais da faixa (patches, efeitos, configura√ß√µes do arpejador, etc.).  Estamos interessados ‚Äã‚Äãno bloco TRK1 - ele cont√©m eventos de m√∫sica.  Mas voc√™ precisa descer mais alguns n√≠veis da hierarquia - para bloquear o MTK1 <br><br><img src="https://habrastorage.org/webt/ct/5a/aw/ct5aawrhbvnj-kn0zhjfd-kx3mw.jpeg"><br><br>  Finalmente, encontramos nossas faixas - esses s√£o os blocos MTE1.  Vamos tentar gravar uma faixa vazia de curta dura√ß√£o no sintetizador e mais um pouco - para entender como as informa√ß√µes sobre medidas em forma bin√°ria s√£o armazenadas. <br><br><img src="https://habrastorage.org/webt/8d/hu/5o/8dhu5o0ckd5wurxpmo8ytxhdbrw.jpeg"><br><br>  Parece que as medidas s√£o armazenadas como estruturas de oito bytes.  Adicione algumas notas: <br><br><img src="https://habrastorage.org/webt/74/5k/pt/745kptmagdau8lsfocc_3ont0eo.jpeg"><br><br>  Portanto, podemos assumir que todos os eventos s√£o armazenados da mesma forma.  O in√≠cio do bloco MTE cont√©m informa√ß√µes ainda desconhecidas e, em seguida, a sequ√™ncia de estruturas de oito bytes chega ao fim.  Abra o editor de gram√°tica e crie uma estrutura de <b>eventos</b> com um tamanho de 8 bytes. <br><br>  Adicione a estrutura <b>mte1Chunk</b> que herda <b>childChunk</b> e coloque um link para o <b>evento</b> na estrutura de <b>dados</b> .  Indicamos que o <b>evento</b> pode ser repetido um n√∫mero ilimitado de vezes.  Em seguida, atrav√©s de experimentos, descobrimos o tamanho e o objetivo de v√°rios bytes antes do in√≠cio do fluxo de eventos da trilha.  Eu tenho o seguinte: <br><br><img src="https://habrastorage.org/webt/io/0w/r2/io0wr2spxxs72fiugspwggiwhxm.jpeg"><br><br>  No in√≠cio do bloco MTE1, o n√∫mero de eventos da faixa, seu n√∫mero e, presumivelmente, a dimens√£o do evento s√£o armazenados.  Depois de aplicar a gram√°tica, o bloco come√ßou a ficar assim: <br><br><img src="https://habrastorage.org/webt/54/oy/no/54oynoxzskhkbpeiah2t8q24-xc.jpeg"><br><br>  Vamos seguir para o fluxo de eventos.  Depois de analisar v√°rios arquivos com diferentes seq√º√™ncias de notas, a seguinte imagem aparece: <br><table><tbody><tr><th>  # </th><th>  Tipo </th><th>  Representa√ß√£o bin√°ria </th></tr><tr><td>  1 </td><td>  Beat 1 </td><td>  01 00 00 ... </td></tr><tr><td>  2 </td><td>  Nota </td><td>  09 00 3C ... </td></tr><tr><td>  3 </td><td>  Nota </td><td>  09 00 3C ... </td></tr><tr><td>  4 </td><td>  Nota </td><td>  09 00 3C ... </td></tr><tr><td>  5 </td><td>  Beat2 </td><td>  01 C3 90 ... </td></tr><tr><td>  6 </td><td>  Nota </td><td>  09 00 3C ... </td></tr><tr><td>  7 </td><td>  Fim da trilha </td><td>  03 88 70 ... </td></tr></tbody></table><br>  Parece que o primeiro byte codifica o tipo de evento.  Adicione um campo de <b>tipo</b> √† estrutura do <b>evento</b> .  Vamos criar mais duas estruturas que herdam o <b>evento</b> : <b>medir</b> e <b>anotar</b> .  Indicamos os valores fixos correspondentes para cada um deles.  E, finalmente, adicione links para essas estruturas nos <b>dados</b> do bloco <b>mte1Chunk</b> . <br><br><img src="https://habrastorage.org/webt/cf/5v/fs/cf5vfsm3dvikxrx2jh_4ecndqgo.jpeg"><br><br>  Aplique as altera√ß√µes: <br><br><img src="https://habrastorage.org/webt/7a/7c/dj/7a7cdjzfvfykdxjmluljiesnvug.jpeg"><br><br>  Bem, fizemos um bom progresso.  Resta entender como a altura e a for√ßa da nota s√£o codificadas, bem como a mudan√ßa de hor√°rio de cada evento em rela√ß√£o aos outros.  Vamos tentar novamente comparar nossos arquivos com o resultado da exporta√ß√£o para o midi, feito atrav√©s do menu do sintetizador.  Desta vez, estamos especificamente interessados ‚Äã‚Äãnos eventos de clicar em notas. <br><br><img src="https://habrastorage.org/webt/fy/er/vm/fyervmjneufot7ulybx6arkhbck.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Os mesmos eventos no arquivo SNG</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/nh/iu/9w/nhiu9wa4j6ouumqt1nwlvaaovzc.jpeg"><br></div></div><br>  √ìtimo!  Parece que o tom e a press√£o das notas s√£o codificados exatamente da mesma maneira que no formato midi, com apenas alguns bytes.  Adicione os campos apropriados √† gram√°tica. <br><br>  Infelizmente, as coisas n√£o s√£o t√£o simples com uma mudan√ßa tempor√°ria. <br><br><h3>  Lidamos com a dura√ß√£o e delta </h3><br>  No formato midi, os eventos NoteOn e NoteOff s√£o separados.  A dura√ß√£o de uma nota √© determinada pelo tempo delta entre esses eventos.  No caso do formato SNG, onde n√£o h√° an√°logo do evento NoteOff, os valores delta de dura√ß√£o e tempo devem ser armazenados em uma estrutura. <br><br>  Para entender como eles s√£o armazenados, gravei v√°rias seq√º√™ncias de notas de diferentes dura√ß√µes no sintetizador. <br><br><img src="https://habrastorage.org/webt/uc/yr/wd/ucyrwd2fwiioyq94azfo6hfe06k.jpeg"><br><br>  Obviamente, os dados que precisamos est√£o nos √∫ltimos 4 bytes da estrutura de eventos.  A regularidade n√£o √© vis√≠vel a olho nu, portanto, selecionamos os bytes de interesse para n√≥s no editor e usamos a ferramenta Painel de Dados. <br><br><div class="spoiler">  <b class="spoiler_title">Texto oculto</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/8c/yw/oo/8cywoo-f4el0lejlf3u3frfb_lg.jpeg"><br></div></div><br>  Aparentemente, a dura√ß√£o da nota e o deslocamento no tempo s√£o codificados por um par de bytes (UInt16).  Nesse caso, a ordem dos bytes √© inversa - Little Endian.  Tendo comparado uma quantidade suficiente de dados, descobri que o delta de tempo aqui n√£o √© contado a partir do evento anterior, como no midi, mas desde o in√≠cio do rel√≥gio.  Se a nota terminar no pr√≥ximo compasso, no compasso atual seu comprimento ser√° 0x7fff e no pr√≥ximo ser√° repetido com o mesmo delta 0x7fff e a dura√ß√£o contada em rela√ß√£o ao in√≠cio de um novo compasso.  Da mesma forma, se uma nota emitir v√°rias medidas, em cada uma delas a dura√ß√£o e o delta ser√£o iguais a 0x7fff. <br><br><div class="spoiler">  <b class="spoiler_title">Circuito pequeno</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/0c/el/-z/0cel-zqshc6m7xjqqmfjfvcmptq.jpeg"><br>  <i>As unidades de tempo delta / dura√ß√£o s√£o contadas em c√©lulas.</i>  <i>A nota 1 soa normal e a nota 2 continua a soar nos segundo e terceiro compassos.</i> <br></div></div><br>  Na minha opini√£o, tudo isso parece um pouco intrometido.  Por outro lado, na nota√ß√£o musical, as notas que tocam continuamente v√°rias medidas s√£o indicadas de maneira semelhante pelo legato. <br><br>  Em quais "papagaios" temos uma dura√ß√£o?  Como midi, os tiques s√£o usados ‚Äã‚Äãaqui.  A partir da documenta√ß√£o, sabe-se que a dura√ß√£o de um compartilhamento √© de 480 ticks.  Com um andamento de 100 batidas por minuto e uma dimens√£o 4/4, a dura√ß√£o da sem√≠nima √© (60/100) = 0,6 segundos.  Consequentemente, a dura√ß√£o de um tick √© de 0,6 / 480 = 0,00125 segundos.  Uma batida 4/4 padr√£o dura 4 * 480 = 1920 ticks ou 2,4 segundos a uma taxa de 100 bpm. <br><br>  Tudo isso ser√° √∫til para n√≥s no futuro.  Enquanto isso, adicione a dura√ß√£o e o delta √† nossa estrutura de <b>notas</b> .  Al√©m disso, observe que h√° um campo na estrutura do tato que armazena o n√∫mero de eventos.  Outro campo cont√©m o n√∫mero de s√©rie da medida - adicione-os √† estrutura da <b>medida</b> . <br><br><img src="https://habrastorage.org/webt/4r/9_/zp/4r9_zpnbd3rtnnxmsqbppjl-e2g.jpeg"><br><br><h3>  Prot√≥tipo do conversor </h3><br>  Agora temos informa√ß√µes suficientes para tentar converter os dados.  O editor Hex Synalaze It na vers√£o pro permite que voc√™ escreva scripts em python ou lua.  Ao criar um script, voc√™ precisa decidir com o que queremos trabalhar: com a pr√≥pria gram√°tica, com arquivos individuais no disco ou de alguma forma processar os dados analisados.  Infelizmente, cada um dos modelos tem algumas limita√ß√µes.  O programa fornece v√°rias classes e m√©todos para trabalhar, mas nem todos s√£o acess√≠veis a partir de todos os modelos.  Talvez seja uma falha na documenta√ß√£o, mas n√£o encontrei como voc√™ pode carregar a gram√°tica de uma lista de arquivos, analis√°-los e usar as estruturas resultantes para exportar dados. <br><br>  Portanto, criaremos um script para trabalhar com o resultado da an√°lise do arquivo atual.  Este modelo implementa tr√™s m√©todos: init, terminate e processResult.  O √∫ltimo √© chamado automaticamente e recursivamente passa por todas as estruturas e dados recebidos durante a an√°lise. <br><br>  Para gravar os dados convertidos no midi, usamos o Python MIDI toolkit (https://github.com/vishnubob/python-midi).  Como estamos implementando a Prova de Conceito, n√£o realizaremos a convers√£o de dura√ß√µes de notas e delta.  Em vez disso, definimos valores fixos.  Notas com dura√ß√£o de 0x7fff ou delta semelhante s√£o simplesmente descartadas por enquanto. <br><br>  Os recursos do editor de script interno s√£o muito limitados, portanto todo o c√≥digo dever√° ser colocado em um arquivo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gist.github.com/bkotov/71d7dfafebfe775616c4bd17d6ddfe7b</a> <br><br>  Ent√£o, vamos tentar converter o arquivo e ouvir o que temos <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Hmm ... E ficou bem interessante.  A primeira coisa que me ocorreu quando tentei formular como era a m√∫sica sem estrutura.  Vou tentar dar uma defini√ß√£o: <br><br>  <i>M√∫sica n√£o estruturada - uma m√∫sica com uma estrutura reduzida, constru√≠da em harmonia.</i>  <i>As dura√ß√µes e os intervalos das notas s√£o cancelados ou reduzidos para os mesmos valores.</i> <br><br>  Uma esp√©cie de barulho harmonioso.  Seja perolado (por analogia com branco, azul, vermelho, rosa etc.), parece que ningu√©m adotou essa combina√ß√£o. <br><br>  Talvez dev√™ssemos tentar treinar uma rede neural nos meus dados, talvez o resultado seja interessante. <br><br><h3>  A tarefa de aquecer a mente </h3><br>  Tudo isso √© maravilhoso, mas o principal problema ainda n√£o est√° resolvido.  Precisamos converter as dura√ß√µes das notas em eventos NoteOff e o deslocamento de tempo do evento relativo ao in√≠cio da medida em um delta de tempo entre eventos adjacentes.  Vou tentar formular as condi√ß√µes do problema de maneira mais formal. <br><br><div class="spoiler">  <b class="spoiler_title">Desafio</b> <div class="spoiler_text"><code>     : <br> 1 <br> 1 <br> 2 <br> 3 <br> ... <br> N <br> 2 <br> ... <br> N <br> 1 <br> ... <br>  <br> <br>      <br> : 1 <br> : 1920 <br> : Int <br> : Int <br> <br>     <br> : 9 <br> : 0-127 <br> : 0-127 <br> : 0-1920  0xFF <br> : 0-1920  0xFF <br> <br>      ,    ,         0xFF,       =0xFF        .        ,       .           =  = 0xFF. <br> <br>     . <br> <br>           midi.    : <br> <br> : <br> : 9 <br> : 0-127 <br> : 0-127 <br> : Int <br> <br> : <br> : 8 <br> : 0-127 <br> : 0-127 <br> : Int</code> <br> </div></div><br>  A tarefa √© um pouco simplificada.  Em um arquivo SNG real, cada medida pode ter uma dimens√£o diferente.  Al√©m dos eventos Note On / Off, outros eventos tamb√©m ocorrer√£o no fluxo, por exemplo, pressionando o pedal de sustenta√ß√£o ou alterando o tom usando pitchBend. <br><br>  Vou dar a minha solu√ß√£o para esse problema no pr√≥ximo artigo (se houver). <br><br><h3>  Resultados atuais </h3><br>  Como a solu√ß√£o com o script n√£o se ajusta a um n√∫mero arbitr√°rio de arquivos, decidi escrever um conversor de console no Swift.  Se eu escrevesse um conversor bidirecional, as estruturas gramaticais criadas seriam √∫teis para mim no c√≥digo.  Voc√™ pode export√°-los para estruturas C ou qualquer outro idioma usando a mesma funcionalidade de script criada no Synalize It!  Um arquivo com um exemplo dessa exporta√ß√£o √© criado automaticamente quando voc√™ seleciona um modelo de gram√°tica. <br><br><img src="https://habrastorage.org/webt/-a/31/jc/-a31jcds25l8lgblqad9bm3hu1q.jpeg"><br><br>  No momento, o conversor est√° 99% completo (no formato que me conv√©m em termos de funcionalidade).  Eu pretendo colocar o c√≥digo e a gram√°tica no github. <br><br>  Um exemplo, para o qual tudo foi iniciado, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">voc√™ pode ouvir aqui</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como esta pe√ßa soa pronta.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt442740/">https://habr.com/ru/post/pt442740/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt442730/index.html">Microsoft: R√∫ssia est√° √† frente dos EUA e da Europa na implementa√ß√£o de intelig√™ncia artificial</a></li>
<li><a href="../pt442732/index.html">My Little Relays: Triple Brainfuck, ou o que √© loucura</a></li>
<li><a href="../pt442734/index.html">Como fazer uma muleta para a Tinkoff Investments com suas pr√≥prias m√£os ou notifica√ß√µes de a√ß√µes necess√°rias para obter lucros / perdas</a></li>
<li><a href="../pt442736/index.html">6 jogos de tabuleiro para nivelar o ingl√™s</a></li>
<li><a href="../pt442738/index.html">Cria√ß√£o de perfil e rastreio com perf</a></li>
<li><a href="../pt442742/index.html">Notebook Compaq LTE 5000, parte dois e meio - b√¥nus</a></li>
<li><a href="../pt442744/index.html">Solu√ß√£o RIPE e suas consequ√™ncias para a exclus√£o de dois LIRs russos (Netup, gcxc.net)</a></li>
<li><a href="../pt442746/index.html">Aplicativo tolo para a Windows Store</a></li>
<li><a href="../pt442748/index.html">A coisa do chap√©u: os 10 principais relat√≥rios do Heisenbug 2018 em Moscou</a></li>
<li><a href="../pt442750/index.html">Djinn virtual em 8 de mar√ßo - ou como surpreender seus funcion√°rios em um dia de primavera</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>