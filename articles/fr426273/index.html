<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜô üëçüèæ üå®Ô∏è Installer et configurer Oracle Internet Directory pour r√©soudre les noms de base de donn√©es ü•ä üè≥Ô∏è‚Äçüåà üîû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tous ceux qui ont travaill√© avec ce type de SGBD connaissent l'acc√®s au SGBD Oracle, qui est stock√© dans le fichier tnsnames.ora. 

 Les donn√©es sont ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Installer et configurer Oracle Internet Directory pour r√©soudre les noms de base de donn√©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426273/">  Tous ceux qui ont travaill√© avec ce type de SGBD connaissent l'acc√®s au SGBD Oracle, qui est stock√© dans le fichier tnsnames.ora. <br><br>  Les donn√©es sont stock√©es dans le fichier <i>tnsnames.ora</i> en texte brut et peuvent facilement √™tre modifi√©es √† l'aide de n'importe quel √©diteur de texte.  C'est bien s'il n'y a pas beaucoup d'entr√©es, mais que faire si l'organisation a des centaines de bases de donn√©es, dont l'acc√®s doit √™tre fourni par des h√¥tes d'utilisateurs de diff√©rents niveaux ou par des serveurs de terminaux.  Et si √† un moment pr√©cis la base de donn√©es se d√©place vers un autre h√¥te, ou si d'autres modifications se produisent qui modifient les param√®tres d'acc√®s √† la base de donn√©es, vous devez modifier les param√®tres d'acc√®s partout. <br><br>  Il existe de nombreuses solutions √† proposer, notamment des redirections, des alias, etc. <br><br>  Ici, je vais d√©crire comment installer et configurer un r√©f√©rentiel unique pour r√©soudre les noms de base de donn√©es √† l'aide de l'OID Oracle Internet Directory et comment demander la r√©solution de noms √† l'aide du protocole LDAP.  C'est beaucoup plus pratique que de garder √† jour le fichier tnsnames.ora jusqu'√† des centaines de lieux. <br><a name="habracut"></a><br>  L'installation et la configuration du SGBD pour la base de donn√©es du r√©f√©rentiel OID ne sont pas d√©crites ici, les points cl√©s importants pour cette configuration sont indiqu√©s.  Vous pouvez vous familiariser avec la politique de licence d'Oracle concernant la base de donn√©es RDBMS, Oracle Fusion Middleware et les produits Oracle Internet Directory sur le site Web de l'entreprise. <br><br><h2>  Installation du logiciel </h2><br>  Le logiciel a √©t√© install√© sur le syst√®me d'exploitation Linux (SUSE Linux Enterprise Server 11), pour votre syst√®me d'exploitation, vous devez v√©rifier la matrice de compatibilit√© sur oracle.com. <br><br>  Pour installer le serveur autonome (ex√©cutant NodeManager), les distributions suivantes ont √©t√© prises qui √©taient en cours au moment de l'installation: <br><br>  JAVA: jdk-8u171-linux-x64.tar.gz <br>  OID: fmw_12.2.1.3.0_oid_linux64_Disk1_1of1.zip <br>  RDBMS: 12.1.0.2 + PSU + Opatch des versions actuelles <br><br>  <b>Installez le logiciel du r√©f√©rentiel</b> dans lequel les sch√©mas OID seront stock√©s <br><br>  DBMS version 12.1.0.2 + PSU <br>  DB  Cr√©ez une base de donn√©es ¬´vide¬ª: <br>  Doit pr√©ciser <br>  Encodage AL32UTF8, inclure ORACLE TEXT dans l'installation du logiciel <br>  Param√®tres DB: <br>  <i>open_cursors = 800</i> <i><br></i>  <i>processus = 500</i> <br>  De plus, il √©tait n√©cessaire d'ex√©cuter le script xaview.sql, qui a √©t√© d√©couvert au stade de la v√©rification de l'installation de l'OID. <br>  configurer et augmenter LISTENER pour la base de donn√©es. <br><br>  Ainsi, la base de donn√©es vide a √©t√© cr√©√©e par uhost-oid1: 1521 / oid1 (dans ce cas, oid1-SID de la base de donn√©es) et est pr√™te √† y cr√©er un r√©f√©rentiel. <br><br><h2>  D√©finition de l'OID </h2><br>  Ci-apr√®s, le r√©pertoire de base de l'utilisateur oracle est / u / app / oracle <br>  D√©compressez java et d√©finissez la variable JAVA_HOME <br><br><pre><code class="hljs powershell">unzip jdk<span class="hljs-literal"><span class="hljs-literal">-8u171</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-x64</span></span>.tar.gz export JAVA_HOME=/u/app/oracle/jdk1.<span class="hljs-number"><span class="hljs-number">8.0</span></span>_171</code> </pre> <br>  D√©baller l'OID <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">unzip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">fmw_12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0_oid_linux64_Disk1_1of1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.zip</span></span></code> </pre> <br><br>  Il s'av√®re que le fichier ./fmw_12.2.1.3.0_oid_linux64.bin <br><br>  Nous v√©rifions qu'il est ex√©cutable, si nous ne le faisons pas <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span></code> </pre> <br>  Nous lan√ßons: <br><br><pre> <code class="hljs">./fmw_12.2.1.3.0_oid_linux64.bin</code> </pre> <br>  (Le transfert X-server doit d'abord √™tre configur√©), le programme d'installation bas√© sur java d√©marre. <br><br>  Ce qui suit a √©t√© sp√©cifi√© comme ORACLE_HOME: <br><br>  / u / app / oracle / product / middleware / Oracle_IDM1 <br><br>  Sur ce chemin, le logiciel pour le middleware de fusion Oracle (FMW) et Oracle Internet Directory seront install√©s. <br><br>  √Ä l'√©tape ¬´type d'installation¬ª, sp√©cifiez AUTONOME. <br><br><img src="https://habrastorage.org/webt/rt/dz/ed/rtdzedgsko18zmsercfms4xmq20.jpeg"><br><br><h3>  Cr√©er un r√©f√©rentiel (sch√©mas n√©cessaires dans la base de donn√©es) </h3><br><br>  Nous cr√©ons des sch√©mas pour le r√©f√©rentiel dans la base de donn√©es, pour cela nous ex√©cutons rcu <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/bin/ ./rcu.sh</code> </pre><br>  √Ä ce stade, les sch√©mas ODSSM, ODS et DEV_STB sont cr√©√©s (n'oubliez pas le mot de passe, il sera requis lors de la configuration des composants de domaine) <br><br><h3>  Nous cr√©ons un domaine dans lequel OID fonctionnera pour nous (un domaine en termes de FMW) </h3><br><pre> <code class="hljs axapta">cd /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/<span class="hljs-keyword"><span class="hljs-keyword">common</span></span>/bin ./config.sh</code> </pre><br><br>  Nous cr√©ons le domaine dans un dossier s√©par√© du logiciel.  Par exemple, sp√©cifiez ceci: <br><br>  / u / app / oracle / config / domaines / oid_domain <br><br><img src="https://habrastorage.org/webt/p_/vg/op/p_vgopfkgcosbmmpo0e4r6cbz7q.jpeg"><br><br><img src="https://habrastorage.org/webt/4j/wm/nx/4jwmnxjeti-eo8ddm3n0tb0royo.jpeg"><br><br>  Pour une connexion √† la base de donn√©es, sp√©cifiez les param√®tres des sch√©mas (et mots de passe) cr√©√©s pr√©c√©demment <br>  Lors de l'installation, nous d√©finissons le nom d'utilisateur et le mot de passe pour NodeManager (il sera utilis√© √† l'avenir pour se connecter √† NodeManager et d√©marrer / arr√™ter l'OID lui-m√™me via celui-ci) <br><br><h3>  Lancer NodeManager </h3><br>  Pour d√©marrer NodeManager, vous devez g√©n√©rer un fichier avec les cl√©s: DemoIdentity.jks.  (Si, en plus d'installer OID, vous installez des mises √† jour, cette √©tape peut ne pas √™tre n√©cessaire) <br>  Nous g√©n√©rerons "par d√©faut" afin de ne pas √™tre tourment√© par les param√®tres de chargement du magasin de cl√©s dans la configuration du domaine.  Il fonctionne avec de tels param√®tres - c'est le mot de passe par d√©faut pour le r√©f√©rentiel: <br><br><pre> <code class="hljs axapta">cd /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/<span class="hljs-keyword"><span class="hljs-keyword">common</span></span>/bin</code> </pre><br>  effectuer <br><br><pre> <code class="hljs css">. <span class="hljs-selector-tag"><span class="hljs-selector-tag">setWlstEnv</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.sh</span></span></code> </pre><br>  (n√©cessairement avec un point, ne fonctionne pas d'une autre mani√®re) <br>  Acc√©dez au r√©pertoire o√π le fichier doit √™tre stock√©: <br><br><pre> <code class="hljs powershell">cd /u/app/oracle/config/domains/oid_domain/security java utils.CertGen <span class="hljs-literal"><span class="hljs-literal">-keyfilepass</span></span> DemoIdentityPassPhrase <span class="hljs-literal"><span class="hljs-literal">-certfile</span></span> democert <span class="hljs-literal"><span class="hljs-literal">-keyfile</span></span> demokey <span class="hljs-literal"><span class="hljs-literal">-strength</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-literal"><span class="hljs-literal">-noskid</span></span> java utils.ImportPrivateKey <span class="hljs-literal"><span class="hljs-literal">-keystore</span></span> DemoIdentity.jks <span class="hljs-literal"><span class="hljs-literal">-storepass</span></span> DemoIdentityKeyStorePassPhrase <span class="hljs-literal"><span class="hljs-literal">-keyfile</span></span> demokey <span class="hljs-literal"><span class="hljs-literal">-keyfilepass</span></span> DemoIdentityPassPhrase <span class="hljs-literal"><span class="hljs-literal">-certfile</span></span> democert.pem <span class="hljs-literal"><span class="hljs-literal">-keyfile</span></span> demokey.pem <span class="hljs-literal"><span class="hljs-literal">-alias</span></span> demoidentity</code> </pre><br>  La phrase cl√© DemoIdentityPassPhrase est juste cela, sinon vous devrez √©diter la configuration du domaine. <br>  Il est n√©cessaire de faire face √† cela, mais vous devez d'abord commencer √† travailler. <br><br><pre> <code class="hljs lua">export TNS_ADMIN=/u/app/oracle/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/domains/oid_domain/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/fmwconfig/components/OID/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br>  Il est n√©cessaire de configurer l'OID lui-m√™me, sinon le domaine ne pourra pas se connecter √† la base de donn√©es du r√©f√©rentiel (voir <i>Probl√®me1</i> ) <br><br><pre> <code class="hljs ruby">export LD_LIBRARY_PATH=<span class="hljs-regexp"><span class="hljs-regexp">/u/app</span></span><span class="hljs-regexp"><span class="hljs-regexp">/oracle/product</span></span><span class="hljs-regexp"><span class="hljs-regexp">/middleware/</span></span>Oracle_IDM1/<span class="hljs-symbol"><span class="hljs-symbol">lib:</span></span>$LD_LIBRARY_PATH</code> </pre><br>  n√©cessaire pour trouver les bonnes biblioth√®ques et se retirer du bon ORACLE_HOME <br><br>  Si quelque chose, v√©rifiez avec ldd o√π chercher: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ldd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/bin/oiddispd</code> </pre> <br>  Doit √™tre sur ORACLE_HOME avec le logiciel FMW: <br><br><pre> <code class="hljs ruby">libclntsh.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span> =&gt; <span class="hljs-regexp"><span class="hljs-regexp">/u/app</span></span><span class="hljs-regexp"><span class="hljs-regexp">/oracle/product</span></span><span class="hljs-regexp"><span class="hljs-regexp">/middleware/</span></span>Oracle_IDM1/lib/libclntsh.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span></code> </pre> <br>  Erreurs si ce n'est pas le cas, voir <i>Probl√®me2</i> <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/config/domains/oid_domain/bin/ ./setStartupEnv.sh ‚Äì  .   ./startNodeManager.sh &amp;</code> </pre><br>  Assurez-vous que NodeManager est en cours d'ex√©cution. <br>  Journaux et configuration: / u / app / oracle / config / domaines / oid_domain / nodemanager <br><br>  <i><b>Probl√®me 1:</b></i> <br><br><pre> <code class="hljs pgsql">Jun <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">58</span></span> AM MSK Fatal error <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> NodeManager <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> weblogic.nodemanager.common.ConfigException: <span class="hljs-keyword"><span class="hljs-keyword">Identity</span></span> key store file <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-built_in"><span class="hljs-built_in">found</span></span>: /u/app/oracle/config/domains/oid_domain/<span class="hljs-keyword"><span class="hljs-keyword">security</span></span>/DemoIdentity.jks</code> </pre><br>  <i><b>Solution 1</b></i> : allez g√©n√©rer DemoIdentity.jks comme d√©crit ci-dessus <br><br>  <i><b>Probl√®me 2</b></i> : <br><br><pre> <code class="hljs vbscript">Jun <span class="hljs-number"><span class="hljs-number">28</span></span>, <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> PM MSK INFO /u/app/oracle/config/domains/oid_domain&gt;&gt;&lt;&lt; password: confirm password: Unable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Connect <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Database: Incorrect location <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tnsnames.ora (<span class="hljs-built_in"><span class="hljs-built_in">derived</span></span> from DOMAIN_HOME) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Incorrect TNS Connect <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Invalid Password &gt; &lt;createDbWallet domain: /u/app/oracle/config/domains/oid_domain, oidpasswd output: password: confirm password:</code> </pre><br>  <i><b>Solution2</b></i> : d√©finissez la variable TNS_ADMIN et v√©rifiez que le nom d'utilisateur / mot de passe est correct <br><br><h3>  Configuration OID principale </h3><br>  √Ä ce stade, les variables doivent √™tre d√©finies. <br>  TNS_ADMIN <br>  LD_LIBRARY_PATH <br>  Il est suppos√© que NodeManager est d√©j√† en cours d'ex√©cution. <br>  Lancez l'utilitaire WLST: <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/common/bin <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MW_HOME=<span class="hljs-variable"><span class="hljs-variable">$ORACLE_HOME</span></span></code> </pre> <br>  Nous extrayons les variables n√©cessaires au fonctionnement de l'utilitaire WLST <br><br><pre> <code class="hljs">./setHomeDirs.sh ./setWlstEnv.sh ./wlst.sh</code> </pre><br>  De plus, en utilisant l'utilitaire WLST, nous nous connectons √† NodeManager.  Nous avons besoin d'un nom d'utilisateur et d'un mot de passe sp√©cifi√©s lors de l'installation (sp√©cifi√© pour NodeManager, nous avons ce blog) <br><br><pre> <code class="hljs pgsql">nmConnect(username=<span class="hljs-string"><span class="hljs-string">'weblogic'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-string"><span class="hljs-string">'  NodeManager '</span></span>,domainName=<span class="hljs-string"><span class="hljs-string">'oid_domain'</span></span>)</code> </pre><br>  <i>Exemple de sortie</i> : <br><br><pre> <code class="hljs ruby">[<span class="hljs-number"><span class="hljs-number">13</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">45</span></span>][uhost-oid1.oracle.<span class="hljs-symbol"><span class="hljs-symbol">:/u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/common/bin</span></span>]$ ./wlst.sh Initializing WebLogic Scripting Tool (WLST) ... Welcome to WebLogic Server Administration Scripting Shell Type help() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help on available commands <span class="hljs-symbol"><span class="hljs-symbol">wls:</span></span>/offline&gt; nmConnect(username=<span class="hljs-string"><span class="hljs-string">'weblogic'</span></span>,password=<span class="hljs-string"><span class="hljs-string">'*****'</span></span>,domainName=<span class="hljs-string"><span class="hljs-string">'oid_domain'</span></span>) Connecting to Node Manager ... Successfully Connected to Node Manager.</code> </pre><br>  Nous commen√ßons l'initialisation, au cours de laquelle une instance avec le nom oid1 est cr√©√©e. <br>  Dans la ligne ci-dessous: <br><br>  odsPassword - mot de passe pour le sch√©ma ODS bas√© sur le r√©f√©rentiel qui a √©t√© d√©fini pendant ./rcu <br>  orcladminPassword - mot de passe qui sera utilis√© comme cn = orcladmin pour acc√©der √† LDAP <br>  realmDN - LDAP - sch√©ma √† configurer <br><br><pre> <code class="hljs lisp">oid_setup(<span class="hljs-name"><span class="hljs-name">orcladminPassword=</span></span>'****',odsPassword='***',realmDN='dc=mycompany,dc=ru')</code> </pre> <br>  Apr√®s ex√©cution, un composant (instance en termes de FMW) avec le nom oid1 sera cr√©√© <br><br>  <b><i>Probl√®me 3</i></b> : <br>  Journal /u/app/oracle/config/domains/oid_domain/servers/OID/logs/oid1/oidmon*.log <br>  contient <br><br><pre> <code class="hljs vhdl">/u/app/oracle/product/middleware/Oracle_IDM1/wlserver/../bin/oiddispd: &lt;b&gt;<span class="hljs-literal"><span class="hljs-literal">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> loading <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> libraries&lt;/b&gt;: libclntshcore.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span>: cannot <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> object <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>: No such <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> directory</code> </pre> <br>  <b><i>Solution 3</i></b> : <br>  D√©finissez la variable d'environnement <br>  LD_LIBRARY_PATH = / u / app / oracle / product / middleware / Oracle_IDM1 / lib: $ LD_LIBRARY_PATH <br>  red√©marrez NodeManager, <br>  ex√©cutez le composant: <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/config/domains/oid_domain/bin/ nohup ./startNodeManager.sh &amp; ./startComponent.sh oid1</code> </pre><br>  Si le composant a √©t√© cr√©√© pour cette raison mais ne fonctionne pas, nous supprimons le processus oidmon, modifions les param√®tres d'√©tat du processus dans le SGBD: <br><br><pre> <code class="hljs perl">ps ‚Äìef|<span class="hljs-keyword"><span class="hljs-keyword">grep</span></span> oidmon <span class="hljs-keyword"><span class="hljs-keyword">kill</span></span> oidmon</code> </pre><br><pre> <code class="sql hljs">sqlplus / as sysdba <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ods.ods_process_status <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> pid=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> compname=<span class="hljs-string"><span class="hljs-string">'oid1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ods.ods_process_status <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> state=<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> compname=<span class="hljs-string"><span class="hljs-string">'oid1'</span></span>;</code> </pre><br>  V√©rification de la connexion: <br><br><pre> <code class="hljs powershell">./ldapbind <span class="hljs-literal"><span class="hljs-literal">-h</span></span> localhost <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3060</span></span> ./ldapbind <span class="hljs-literal"><span class="hljs-literal">-h</span></span> localhost <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3131</span></span> <span class="hljs-literal"><span class="hljs-literal">-U</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-literal"><span class="hljs-literal">-D</span></span> <span class="hljs-string"><span class="hljs-string">'cn=orcladmin'</span></span> <span class="hljs-literal"><span class="hljs-literal">-w</span></span> ****</code> </pre><br>  Vous devrez peut-√™tre r√©initialiser oid_setup <br>  <b><i>Probl√®me 4</i></b> .  Lorsque vous essayez d'enregistrer dans NetManager: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dataStore</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DataStoreException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">error</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">writing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ServiceAlias</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">LDAPDataStore</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[svr: uhost-oid1.mycompany.ru:3060:3131, type: OID, ctxt: cn=OracleContext,dc=mycompany,dc=ru, home: C:\oracle\product\12.1.0\client_1]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">original</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">exception</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">message</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04409</span></span>:    <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">original</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">stack</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">trace</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ServiceAliasException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04409</span></span>:    <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span></code> </pre><br><img src="https://habrastorage.org/webt/p8/pm/1b/p8pm1bts4oilkqr56yfupfyhfpq.jpeg"><br><br>  <b>Solution4:</b> <br>  Ex√©cutez √† nouveau oid_setup <br>  V√©rifiez les param√®tres ldap.ora sur le client √† partir duquel Net Manager d√©marre <br>  DEFAULT_ADMIN_CONTEXT = "dc = mycompany, dc = ru" <br><br>  <b>Modifiez le param√®tre OID (pour autoriser les demandes d'utilisateurs anonymes)</b> <br>  Lorsqu'un nom TNS est cr√©√© √† l'aide de Net Manager, mais tnsping ne fonctionne pas. <br>  Cr√©ez un fichier: <br>  cat anonymousbind.ldif <br><br><pre> <code class="hljs sql">dn: cn=oid1,cn=osdldapd,cn=subconfigsubentry changetype: modify <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span>: orclAnonymousBindsFlag orclAnonymousBindsFlag: <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br>  et modifiez les param√®tres √† l'aide de ce fichier: <br><br><pre> <code class="hljs powershell">ldapmodify <span class="hljs-literal"><span class="hljs-literal">-D</span></span> cn=orcladmin <span class="hljs-literal"><span class="hljs-literal">-W</span></span> <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3131</span></span> <span class="hljs-literal"><span class="hljs-literal">-h</span></span> localhost <span class="hljs-operator"><span class="hljs-operator">-f</span></span> anonymousbind.ldif</code> </pre> <br>  <i><b>Diagnostics:</b></i> <br>  tnsping mytest ne fonctionne pas, un ldapsearch fonctionne <br>  V√©rification de la disponibilit√© des ports 3060 et 3131 (pour SSL) <br><br>  voici comment √ßa marche (avec un mot de passe) <br><br><pre> <code class="hljs powershell">ldapsearch <span class="hljs-literal"><span class="hljs-literal">-h</span></span> uhost<span class="hljs-literal"><span class="hljs-literal">-oid1</span></span>.mycompany.ru <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3060</span></span> <span class="hljs-literal"><span class="hljs-literal">-D</span></span> <span class="hljs-string"><span class="hljs-string">"cn=orcladmin"</span></span> <span class="hljs-literal"><span class="hljs-literal">-w</span></span> password_hear <span class="hljs-literal"><span class="hljs-literal">-b</span></span> <span class="hljs-string"><span class="hljs-string">"cn=mytest,cn=OracleContext,dc=mycompany,dc=ru"</span></span> <span class="hljs-literal"><span class="hljs-literal">-s</span></span> base <span class="hljs-string"><span class="hljs-string">"objectclass=*"</span></span></code> </pre> <br>  mytest est un alias cr√©√© pr√©c√©demment. <br><br><h2>  Param√®tres client </h2><br>  C√¥t√© client, $ ORACLE_HOME / network / admin contient les fichiers: <br>  ldap.ora <br>  sqlnet.ora <br>  tnsnames.ora <br><br>  Le fichier tnsnames.ora contient, comme d'habitude, des alias "locaux" et est utilis√© si aucun nom n'est trouv√© dans LDAP. <br>  Le fichier sqlnet.ora contient une description de l'ordre du r√©solveur: <br><br>  <u>sqlnet.ora</u> <br><cut></cut><br> <code>SQLNET.AUTHENTICATION_SERVICES= (NTS) <br> NAMES.DIRECTORY_PATH= (TNSNAMES,LDAP) <br></code> <br><br>  Les param√®tres d'acc√®s au fichier LDAP sont d√©finis dans ldap.ora <br><br>  <u>ldap.ora</u> <br><cut></cut><br><pre> <code class="hljs lisp">DIRECTORY_SERVERS = (<span class="hljs-name"><span class="hljs-name">uhost-oid1</span></span>.mycompany.ru:<span class="hljs-number"><span class="hljs-number">3060</span></span>:<span class="hljs-number"><span class="hljs-number">3131</span></span>,rephost-oid1.mycompany.ru:<span class="hljs-number"><span class="hljs-number">3060</span></span>:<span class="hljs-number"><span class="hljs-number">3131</span></span>) DIRECTORY_SERVER_TYPE = OID DEFAULT_ADMIN_CONTEXT = <span class="hljs-string"><span class="hljs-string">"dc=mycompany,dc=ru"</span></span></code> </pre><br>  Dans la configuration d√©crite, l'ordre suivant est utilis√©. <br><br>  Tout d'abord, le fichier tnsnames.ora est affich√©, si l'enregistrement n'y est pas trouv√©, nous demandons ensuite √† LDAP (si vous devez modifier l'ordre, changez l'ordre dans le param√®tre NAMES.DIRECTORY_PATH <br><br>  Vient ensuite une demande au serveur LDAP principal, si elle n'est pas disponible pour une raison quelconque, acc√©dez au deuxi√®me serveur dans la liste DIRECTORY_SERVERS <br><br>  L'ordre d'interrogation dans ce cas n'est pas important, le premier est pr√©f√©rable d'indiquer le serveur g√©ographiquement le plus proche. <br><br>  Le contexte d'administration par d√©faut (LDAP) est utilis√© pour le contexte par d√©faut, afin de ne pas indiquer mycompany.ru √† chaque fois <br><br>  Pour la m√™me raison, il n'est pas recommand√© d'utiliser un point dans un enregistrement d'alias, il le per√ßoit comme un domaine. <br><br>  De plus, je dirai comment configurer la r√©plication entre les serveurs </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426273/">https://habr.com/ru/post/fr426273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426263/index.html">Wi-Fi 6 annonc√©: ce que vous devez savoir sur la nouvelle norme</a></li>
<li><a href="../fr426265/index.html">Cadre d'automatisation de l'exp√©dition (SAF)</a></li>
<li><a href="../fr426267/index.html">Une chanson sur la fa√ßon dont la cr√©ation de projets s'est transform√©e en enfer</a></li>
<li><a href="../fr426269/index.html">Une application python kivy pour une alimentation vari√©e. Du code √† la r√©ception du fichier .apk pour Android</a></li>
<li><a href="../fr426271/index.html">S√©curit√© de la Tesla Model 3</a></li>
<li><a href="../fr426275/index.html">Comment nous avons recherch√© les signes d'erreur m√©dicale</a></li>
<li><a href="../fr426277/index.html">Choses √† retenir pour un programmeur passant √† Python</a></li>
<li><a href="../fr426279/index.html">Comment les formats audio et les technologies audio ont ¬´combattu¬ª et √©volu√©: un grand condens√© historique</a></li>
<li><a href="../fr426281/index.html">Les fondateurs d'Amazon, Google, Microsoft et Facebook ont ‚Äã‚Äãperdu plus de 30 milliards de dollars lors d'un krach boursier</a></li>
<li><a href="../fr426283/index.html">WeChat en Inde: d'un lancement puissant √† une perte totale d'int√©r√™t</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>