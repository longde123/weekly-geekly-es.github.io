<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔗 ⬜️ 🚴🏽 Version Rust 1.38.0: compilation en pipeline, # [obsolète] pour les macros et std :: any :: type_name 🤰🏿 👧🏿 ⏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'équipe de développement de Rust est heureuse d'annoncer la sortie d'une nouvelle version, 1.38.0. Rust est un langage de programmation qui permet à ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Version Rust 1.38.0: compilation en pipeline, # [obsolète] pour les macros et std :: any :: type_name</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469061/"><p>  L'équipe de développement de Rust est heureuse d'annoncer la sortie d'une nouvelle version, 1.38.0.  Rust est un langage de programmation qui permet à chacun de créer des logiciels fiables et efficaces. </p><br><p>  Si vous avez installé la version précédente de Rust à l'aide de rustup, pour mettre à niveau vers la version 1.38.0, il vous suffit d'exécuter la commande suivante: </p><br><pre><code class="plaintext hljs">rustup update stable</code> </pre> <br><p>  Si vous n'avez pas encore installé rustup, vous pouvez l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">installer à</a> partir de la page correspondante de notre site Web. </p><br><h2 id="chto-voshlo-v-stabilnuyu-versiyu">  Qu'est-ce qui est inclus dans la version stable? </h2><br><p>  Le point culminant de cette version est la compilation en pipeline. </p><a name="habracut"></a><br><h3 id="konveyernaya-kompilyaciya">  Compilation de pipelines </h3><br><p>  Le compilateur n'a pas besoin de dépendances entièrement assemblées pour construire le paquet, mais seulement leurs "métadonnées" (liste de types, dépendances, exportations, etc.) générées à un stade précoce de la compilation.  À partir de Rust 1.38.0, Cargo commencera immédiatement à construire des packages dépendants dès que leurs métadonnées seront disponibles. </p><br><p>  Le temps de construction d'un package n'a pas diminué, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mais nos tests ont montré</a> que la vitesse de compilation augmente de 10% à 20% dans le cas de builds optimisés (où certaines dépendances sont déjà compilées).  Pour les autres packages, une forte augmentation de la vitesse de compilation ne s'est pas produite.  Le temps nécessaire pour créer le package dépend de l'ordinateur, les performances peuvent donc varier.  La compilation du pipeline est activée automatiquement à partir de la version 1.38.0. </p><br><h3 id="proverka-nekotoryh-nepravilnyh-ispolzovaniy-memuninitialized-zeroed">  Vérification d'une mauvaise utilisation de <code>mem::{uninitialized, zeroed}</code> </h3><br><p>  Comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">annoncé précédemment</a> , <code>std::mem::uninitialized</code> pas recommandé.  À la place, <code>MaybeUninit&lt;T&gt;</code> doit être utilisé. </p><br><p>  La fonction <code>mem::uninitialized</code> n'est pas encore obsolète, mais cela sera fait dans les prochaines versions.  Mais malgré cela, à partir de la version 1.38.0, <code>rustc</code> recherche une classe étroite d'initialisations incorrectes en utilisant <code>mem::uninitialized</code> ou <code>mem::zeroed</code> . </p><br><p>  Pour certains types, tels que <code>&amp;T</code> et <code>Box&lt;T&gt;</code> , une valeur nulle est considérée comme un comportement non défini, car ce sont des objets de type pointeur qui ne doivent pas être <code>null</code> .  Ce sera une erreur d'utiliser <code>mem::uninitialized</code> ou <code>mem::zeroed</code> pour initialiser ces types, donc le compilateur essaiera de vous avertir si l'une de ces fonctions est utilisée pour initialiser les objets ci-dessus, et peu importe si elles sont initialisées directement ou comme domaines de grande structure.  Cette vérification est récursive, donc le code suivant implique un avertissement: </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrap</span></span></span></span>&lt;T&gt;(T); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Outer</span></span></span></span>(Wrap&lt;Wrap&lt;Wrap&lt;<span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>&gt;&gt;&gt;&gt;); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CannotBeZero</span></span></span></span> { outer: Outer, foo: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, bar: <span class="hljs-built_in"><span class="hljs-built_in">f32</span></span> } ... <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bad_value: CannotBeZero = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::uninitialized() };</code> </pre> <br><p>  Les lecteurs attentifs peuvent remarquer que la bibliothèque standard contient plus de types qui ne doivent pas être remplis de zéros, en particulier <code>NonNull&lt;T&gt;</code> et <code>NonZero&lt;T&gt;</code> .  Jusqu'à présent, l'initialisation de ces structures avec <code>mem::uninitialized</code> ou <code>mem::zeroed</code> <em>pas été</em> vérifiée. </p><br><p>  Ces vérifications ne couvrent pas tous les cas d'utilisation incorrecte de <code>mem::uninitialized</code> ou <code>mem::zeroed</code> , mais vous permettent de détecter un code incorrect garanti qui devrait basculer vers <code>MaybeUninit</code> . </p><br><h3 id="deprecated-dlya-makrosov">  <code>#[deprecated]</code> pour les macros </h3><br><p>  L'attribut <code>#[deprecated]</code> , introduit pour la première fois dans Rust 1.9.0, permet aux auteurs de packages d'informer les utilisateurs des fonctionnalités obsolètes qu'ils prévoient de supprimer dans les futures versions.  Rust 1.38.0 vous permet d'appliquer cet attribut aux macros. </p><br><h3 id="stdanytype_name"> <code>std::any::type_name</code> </h3> <br><p>  Une représentation sous forme de chaîne du type utilisé peut être nécessaire lors du débogage du code.  Par exemple, dans le corps d'une fonction générique, vous souhaiterez peut-être afficher le type de l'argument passé.  Maintenant, c'est <code>std::any::type_name</code> avec <code>std::any::type_name</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gen_value</span></span></span></span>&lt;T: <span class="hljs-built_in"><span class="hljs-built_in">Default</span></span>&gt;() -&gt; T { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"Initializing an instance of {}"</span></span>, std::any::type_name::&lt;T&gt;()); <span class="hljs-built_in"><span class="hljs-built_in">Default</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> _: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> = gen_value(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> _: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> = gen_value(); }</code> </pre> <br><p>  Résultat: </p><br><pre> <code class="plaintext hljs">Initializing an instance of i32 Initializing an instance of alloc::string::String</code> </pre> <br><p>  Comme toutes les fonctions de la bibliothèque standard, destinées uniquement au débogage, cette fonction ne garantit pas le contenu et le format exact de la chaîne.  La valeur de retour est la meilleure description du type;  plusieurs types peuvent être représentés par le même <code>type_name</code> , mais il peut changer dans les futures versions du compilateur. </p><br><h3 id="izmeneniya-v-standartnoy-biblioteke">  Modifications de la bibliothèque standard </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>slice::{concat, connect, join}</code> en plus de <code>&amp;T</code> accepte maintenant <code>&amp;[T]</code> .</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>*const T</code> et <code>*mut T</code> implémentent désormais <code>marker::Unpin</code> .</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Arc&lt;[T]&gt;</code> et <code>Rc&lt;[T]&gt;</code> implémentent désormais <code>FromIterator&lt;T&gt;</code> .</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>iter::{StepBy, Peekable, Take}</code> implémente désormais <code>DoubleEndedIterator</code> .</a> </li></ul><br><p>  De plus, certaines fonctions ont été stabilisées: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>&lt;*const T&gt;::cast</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>&lt;*mut T&gt;::cast</code></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::as_secs_f32</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::as_secs_f64</code></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::div_f32</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::div_f64</code></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::from_secs_f32</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::from_secs_f64</code></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::mul_f32</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Duration::mul_f64</code></a> </li><li>  Opérations euclidiennes de division et obtention du reste ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>div_euclid</code></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>rem_euclid</code></a> ) pour toutes les primitives entières.  Des versions <code>checked</code> , <code>overflowing</code> et <code>wrapping</code> également disponibles. </li></ul><br><h3 id="drugie-izmeneniya">  Autres changements </h3><br><p>  <a href="">La syntaxe</a> , le <a href="">gestionnaire de paquets de fret</a> et l' <a href="">analyseur Clippy ont</a> également subi quelques modifications. </p><br><h2 id="uchastniki-1380">  Membres 1.38.0 </h2><br><p>  Beaucoup de gens se sont réunis pour créer Rust 1.38.0.  Nous n'aurions pas pu faire cela sans vous tous, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">merci</a> ! </p><br><h2 id="ot-perevodchikov">  Des traducteurs </h2><br><p>  Pour toute question sur la langue rouille, ils pourront vous aider dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chat Telegram en russe</a> ou dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chat</a> similaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour les nouveaux arrivants</a> . </p><br><p>  Cet article a été traduit conjointement par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">andreevlex</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">nlinker</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">funkill</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Gymmasssorla</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr469061/">https://habr.com/ru/post/fr469061/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr469049/index.html">Pourquoi écrivons-nous la logique métier dans Lua</a></li>
<li><a href="../fr469051/index.html">Le connecteur Azure Cloud Shell dans Windows Terminal</a></li>
<li><a href="../fr469053/index.html">Une nouvelle série de vidéos pour les débutants pour apprendre la programmation Python</a></li>
<li><a href="../fr469055/index.html">Pratique zen en espace ouvert</a></li>
<li><a href="../fr469059/index.html">Nouveautés de ML.NET et Model Builder</a></li>
<li><a href="../fr469071/index.html">Intelligence artificielle Microsoft maîtrise le mahjong</a></li>
<li><a href="../fr469073/index.html">Dérivé discret ou résumé de la somme des séries</a></li>
<li><a href="../fr469075/index.html">Grokay DLR</a></li>
<li><a href="../fr469077/index.html">Nouveau cours Python de Microsoft [en anglais]</a></li>
<li><a href="../fr469079/index.html">Python dans Visual Studio Code: mise à jour de l'extension de septembre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>