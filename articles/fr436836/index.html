<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Ö ‚õ≥Ô∏è ‚öúÔ∏è Avantages de l'analyse des applications de niveau 7 dans les pare-feu. Partie 2. S√©curit√© üëÄ üèÖ üë®üèª‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La nouvelle g√©n√©ration de pare-feu est plus pratique et plus s√ªre gr√¢ce √† la nouvelle architecture du moteur et √† la nouvelle id√©ologie de gestion des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Avantages de l'analyse des applications de niveau 7 dans les pare-feu. Partie 2. S√©curit√©</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436836/"><img src="https://habrastorage.org/getpro/habr/post_images/786/9e4/d4e/7869e4d4eac6b07b8bfa763cb3985347.png"><br><br>  La nouvelle g√©n√©ration de pare-feu est plus pratique et plus s√ªre gr√¢ce √† la nouvelle architecture du moteur et √† la nouvelle id√©ologie de gestion des flux r√©seau. <br><br><h3>  Pourquoi cet article est-il apparu? </h3><br><blockquote>  Ils sont venus √† plusieurs reprises √† des coll√®gues de la s√©curit√© qui utilisent une nouvelle g√©n√©ration de pare-feu et ont vu qu'ils continuaient √† √©crire des r√®gles sur les num√©ros de port.  Sur ma suggestion de continuer √† √©crire par le nom des applications, j'ai entendu "Et si √ßa ne marche pas comme √ßa?"  Si vous avez √©galement "peur" ou si vous ne savez pas pourquoi √©crire les r√®gles pour les applications, cet article est pour vous. </blockquote><a name="habracut"></a>  D√©but de l'article par r√©f√©rence <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1. Bases du pare-feu</a> <br><br><a name="Start"></a><h1>  Partie 2. Impact sur la s√©curit√© du PARE-FEU L7 </h1><br><h3>  Table des mati√®res </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le pare-feu L7 v√©rifie le contenu du champ de donn√©es, le pare-feu L4 non</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les applications ont chang√© - votre pare-feu a-t-il chang√©</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de la d√©tection du trafic</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le pare-feu L7 est plus pratique</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le pare-feu L7 est plus s√ªr</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quels nouveaux probl√®mes cr√©ent une nouvelle approche pour √©crire des r√®gles pour L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Limites de la technologie d'analyse de niveau 7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conclusion</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vote</a> <br><br><a name="Data"></a><h2>  Le pare-feu L7 v√©rifie le contenu du champ de donn√©es, le pare-feu L4 non </h2><br><blockquote>  <b>Le principal probl√®me avec lequel nous nous d√©battons est que les programmes sont maintenant √©crits imm√©diatement afin de contourner la protection par pare-feu L4.</b> </blockquote>  Si une personne met Skype, elle ne veut pas appeler l'administrateur syst√®me et mendier pour ouvrir le port dont il a besoin sur le pare-feu - il veut que Skype s'allume imm√©diatement "vert".  Les programmeurs savent qu'il y a souvent un proxy HTTP sur le r√©seau ou le port 80 est ouvert pour HTTP, le port 53 est pour DNS, le port 123 est pour NTP, et parfois pour les employ√©s de l'int√©rieur vers Internet, tout est ouvert et vous pouvez utiliser ces connexions autoris√©es en cons√©quence. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6de/735/726/6de735726e071aab7f3a122cb9e7fd34.png"><br><br>  Les d√©veloppeurs ont le terme d'exp√©rience utilisateur - apr√®s l'installation, le client a pris feu en vert Skype = le client est satisfait.  Et le fait que Skype ait travers√© ill√©galement le p√©rim√®tre de la soci√©t√© via une connexion qui n'√©tait ouverte que pour le fonctionnement du navigateur sur les ports TCP / 80 et 443 - le pare-feu L4 l'ignore, car ce n'est pas sa t√¢che de regarder le contenu des paquets - seuls les en-t√™tes sont importants pour lui. <br><br><h3>  Probl√®me de pare-feu L4: saut de port (tunneling) </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/e3e/aa8/502/e3eaa85023c8a83afe2fd9410e866965.png" align="left">  Le tunneling d'applications non autoris√©es dans les connexions autoris√©es est une image standard dans les r√©seaux modernes.  Naturellement, les pirates utilisent la m√™me astuce: ils cr√©ent des tunnels dans les connexions autoris√©es.  Et les gardes de s√©curit√© ne savent m√™me pas. <br><br><h3>  Exemple de tunnel TCP-sur-DNS </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/30d/c7e/f30/30dc7ef30cfc1ca8c880c9d54ac9f3b7.png"><br><br>  D'apr√®s les paquets de trafic collect√©s dans l'image, il est clair qu'il existe des connexions sur le 53e port TCP, qui est g√©n√©ralement consid√©r√© comme le fonctionnement du protocole DNS.  Cependant, si vous regardez attentivement, vous pouvez voir que dans le champ Texte du protocole DNS, il existe une sorte de texte crypt√©.  Il s'agit d'une impl√©mentation du tunnel TCP-Over-DNS, que je vois souvent dans les r√©seaux d'entreprise.  √Ä gauche se trouve une liste d'autres tunnels que vos utilisateurs ou pirates peuvent utiliser.  Le pare-feu L4 fournit-il de telles informations?  Non.  Par cons√©quent, si vous devez prot√©ger l'entreprise contre les tunnels non autoris√©s, vous devez analyser le contenu des donn√©es transmises et l'utiliser pour analyser quelle application utilise actuellement cette connexion TCP. <br><br><a name="App"></a><h2>  Les applications ont chang√© - votre pare-feu a-t-il chang√© </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/f4d/ee2/573/f4dee257312a6c98e9607812d9976731.png"><br><br>  Le monde a chang√© et il ne suffit plus aujourd'hui de d√©terminer l'application par num√©ro de port.  Oui, il y a 20 ans, nous avons convenu que si 80 est √©crit dans le champ Port, alors c'est HTTP, si 53, alors c'est DNS, mais maintenant ce n'est plus le cas! <br><br>  Il est n√©cessaire d'analyser le contenu des donn√©es transmises et c'est √† eux d'analyser quelle application utilise actuellement cette connexion TCP. <br><br>  Acc√©dez √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">base de donn√©es d'</a> application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">applipedia.paloaltonetworks.com</a> .  Voir combien d'applications utilisent les ports 80 et 443. <br><blockquote>  <b>Un exemple.</b> <br><br>  Applications utilisant le port 80 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/522/b2d/510/522b2d51051df42c0ead70785e0c7e71.png"><br></blockquote><blockquote><h3>  Le probl√®me avec de nombreuses fonctionnalit√©s de s√©curit√© est d'ignorer les applications sur des ports non standard. </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/8a9/ece/07d/8a9ece07d27298757b7a0819107f88c8.png" align="left"><br>  Le d√©placement d'une application standard vers un port non standard permet √©galement √† un attaquant de devenir hors de contr√¥le.  Ce contr√¥le restaure uniquement le p√©riph√©rique qui analyse le contenu de tout le trafic, et pas seulement les en-t√™tes. </blockquote><br><a name="Visual"></a><h2>  Fonctionnement de la d√©tection du trafic </h2><br>  L'une des t√¢ches de l'analyse des applications est de d√©tecter le trafic des applications sp√©cialement cr√©√©es afin que leurs connexions ne soient pas visibles.  Prenons par exemple Skype.  Les gens qui ont appris √† distinguer les paquets UDP chiffr√©s Skype des autres paquets UDP chiffr√©s sont de tr√®s bons camarades. <br><br>  Il existe √©galement une classe d'appareils qui peuvent le faire: l'inspection approfondie des paquets (ci-apr√®s DPI).  Ces appareils sont d√©sormais avec de grands fournisseurs et vous permettent de manipuler le trafic des applications: appliquez la QoS ou redirigez dans la bonne direction.  Parfois, NGFW et DPI sont compar√©s.  Diff√©rence: DPI est con√ßu pour contr√¥ler la qualit√© du trafic et la s√©curit√© NGFW, bien que NGFW dispose √©galement de fonctionnalit√©s QoS. <br><br>  Les m√©thodes de d√©tection des applications dans le trafic sont diff√©rentes. <br><br><ul><li>  Si vous avez besoin de trouver une <b>application</b> qui <b>ne se cache pas</b> dans le trafic, comme HTTP, alors il suffit d'utiliser les recherches habituelles pour les mod√®les ou signatures correspondants.  Et cela est activement utilis√© par les fabricants.  C'est le plus simple. <br></li><li>  Si vous avez besoin de trouver une <b>application</b> qui <b>se cache d√©lib√©r√©ment</b> , par exemple, TOR, vous avez besoin d'un ensemble de m√©thodes pour analyser les statistiques et le comportement des packages.  C'est difficile, cela n√©cessite un laboratoire de recherche, qui doit √©galement suivre les changements dans le protocole dans le temps et mettre en ≈ìuvre de nouveaux algorithmes de recherche.  Mes tentatives pour obtenir au moins un d√©veloppeur pour dire comment ces algorithmes fonctionnent, tombent sur la r√©ponse que tout cela est de la propri√©t√© intellectuelle. <br></li></ul><br>  Il arrive que l'application ait d√©j√† modifi√© l'algorithme de fonctionnement et que le moteur DPI ou NGFW ne soit pas encore parvenu √† changer.  Par exemple, Telegram change parfois parce qu'il est chass√©.  Des faux positifs se produisent.  Ceci est important √† v√©rifier.  En cons√©quence, les appareils et NGFW et DPI diff√®rent principalement par le nombre et la qualit√© de la d√©tection des applications.  Voici la seule m√©thode: mettez NGFW sur votre trafic et voyez.  Si nous parlons du p√©rim√®tre, alors le trafic le plus complexe que j'ai vu contenait 715 applications diff√©rentes par mois.  En moyenne, 200 √† 300 applications de diff√©rents types traversent le p√©rim√®tre.  Dans cette visualisation du trafic d'application, vous pouvez voir ceci: passez la souris sur chaque cercle: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://researchcenter.paloaltonetworks.com/app-usage-risk-report-visualization/</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br><img src="https://habrastorage.org/getpro/habr/post_images/945/099/048/94509904864c2cfeba02858aabf7127e.png"></a> <br><br>  Il y a des milliers d'applications dans la base de donn√©es des applications, donc l'analyse des formats et des algorithmes de chaque application est un travail long et laborieux des analystes.  Une fois que nous comprenons comment fonctionne l'application, les programmeurs commencent √† travailler, qui impl√©mentent la d√©couverte d'application par le trafic.  Et ces quelques milliers d'applications sont en constante √©volution.  Par cons√©quent, le produit doit √™tre constamment pris en charge, apprendre de nouvelles applications et surveiller les modifications des anciennes et ajouter des d√©tecteurs modifi√©s √† la base de donn√©es.  La base de donn√©es de toutes les applications possibles g√©n√©rant du trafic est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">disponible ici</a> . <br><br>  Parfois, les fournisseurs de pare-feu L7 essaient de mesurer le nombre d'applications qu'ils ont dans la base de donn√©es, mais cela ressemble plus √† du blasph√®me.  En activant la pens√©e critique, vous comprenez qu'en r√©alit√©, vous n'avez besoin de d√©tecter que les applications sur le p√©rim√®tre (en moyenne, dans la r√©gion de 300 applications diff√©rentes), dans le centre de donn√©es (10-15 pi√®ces), dans les r√©seaux ICS / SCADA (2-3 applications), entre les internes segments (c'est peut-√™tre seulement quelques dizaines).  Et si l'on vous propose de d√©tecter des milliers d'applications - ce n'est que du marketing et la d√©tection de certaines applications inconnues que personne n'utilise. <br><br>  <b>Exemples d'applications sur le r√©seau d'une entreprise:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/240/186/ad2/240186ad2ca0654136be608ba2238460.png" alt="image"><br><br>  La segmentation interne au sein de l'entreprise est une exigence constante des normes de s√©curit√© de l'information que presque personne ne remplit.  Entre les segments o√π se trouvent les programmeurs, les financiers, les RH et la comptabilit√©, les applications s'ex√©cutent √©galement.  Au minimum, vous devez contr√¥ler le r√©seau Windows (protocole SMB), cela est devenu particuli√®rement clair apr√®s l'√©pid√©mie de cryptoclocker WannaCry, qui a √©t√© distribu√©e via SMB.  Autrement dit, les r√©seaux internes ont √©galement besoin d'analyser les applications de niveau 7 et les m√©thodes connexes pour rechercher du code malveillant dans le bac √† sable et IPS, et au moins contr√¥ler les types de fichiers transf√©r√©s. <br><blockquote>  Le probl√®me le plus courant qui se remarque dans les r√©seaux: le pare-feu est cens√© √™tre de niveau 7, mais en r√©alit√© il d√©tecte les applications par port.  Comment le v√©rifier? <br><br><ol><li>  Pour le test, accrochez le serveur FTP sur le port 25.  Si l'appareil se trompe et dit qu'il s'agit du protocole SMTP, ce n'est certainement pas le pare-feu L7. </li><li>  Ou essayez simplement d'√©crire des r√®gles pour deux applications diff√©rentes qui utilisent le m√™me port.  Faites-leur des r√®gles diff√©rentes: dans un bloc, les fichiers exe, dans l'autre, autorisez-les.  Si cela se fait, cela signifie que la v√©rit√© est d'abord l'analyse de l'application (pas le num√©ro de port), puis de travailler avec son contenu: bloquer les fichiers, v√©rifier les signatures de virus, v√©rifier les signatures IPS, etc. </li><li>  Un autre test int√©ressant pour NGFW est lorsque vous devez cr√©er deux applications L7 personnalis√©es avec des propri√©t√©s diff√©rentes sur la m√™me adresse IP.  Cela ne peut pas le pare-feu L4, mais le pare-feu L7.  Description compl√®te et testez-vous ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://basic.ngfw-test.com/</a> </li></ol></blockquote>  En Russie, il est toujours important que les pare-feu connaissent le trafic des applications russes: 1C, Odnoklassniki, Yandex.Disk, mail.ru, √† quoi ressemblent les mises √† jour de Kaspersky Anti-Virus, etc.  Il s'agit √©galement d'un important composant de d√©couverte d'applications dont vous avez besoin pour autoriser en toute s√©curit√© ces applications √† vos employ√©s. <br><br><a name="Comfort"></a><h2>  Le pare-feu L7 est plus pratique </h2><br>  Si vous regardez le processus de formation des ing√©nieurs r√©seau, alors le plus souvent, les gens suivent des cours aupr√®s d'un fabricant bien connu d'√©quipements r√©seau, ce qui donne une bonne connaissance des technologies de mise en r√©seau. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e73/5bc/284/e735bc2844f2258e4d11fe3e702d2fd2.jpg"><br><br>  L'auteur de ces lignes a termin√© un bon nombre de cours Cisco en 2003 et pr√©sente donc quelles sont les caract√©ristiques de la formation des ing√©nieurs r√©seau: en r√®gle g√©n√©rale, apr√®s avoir √©tudi√© le mod√®le ISO OSI √† sept niveaux, seuls les 4 premiers niveaux sont √©tudi√©s en d√©tail.  Autrement dit, toutes les subtilit√©s des ing√©nieurs de r√©seau de s√©curit√© de l'information ne connaissent que jusqu'au niveau de TCP / UDP / ICMP.  Seuls quelques-uns de base sont pris en compte au niveau de l'application: HTTP, DNS, SSH, Telnet, NTP, FTP.  Quel est le r√©sultat?  Et l'administrateur r√©seau estime que la gestion de la couche application est facile √† partir de la couche transport! <br><br>  Il peut sembler √† un sp√©cialiste du r√©seau fra√Æchement pr√©par√© que tout peut √™tre fait avec des r√®gles au niveau du transport, o√π il vous suffit d'autoriser le protocole et le port n√©cessaires.  Besoin d'autoriser un navigateur sur Internet?  Nous ouvrons TCP / 80.  Besoin d'ouvrir DNS?  Ouvrez TCP / 53 ou UDP / 53.  Besoin d'ouvrir RDP?  Ouvrez TCP / 3389.  Et l'√©criture de r√®gles sur le pare-feu L4 devient la norme dans l'entreprise. <br><br>  Je dois dire que de nombreux informaticiens connaissent le concept d'inspection compl√®te.  Mais en m√™me temps, pour beaucoup, c'est une r√©v√©lation que diff√©rents pare-feu prennent en charge l'inspection compl√®te pour un ensemble d'applications diff√©rent.  J'ai certaines statistiques car j'ai travaill√© comme professeur de cours Firewall au centre de formation de la soci√©t√© Informzashita.  Que vois-je?  Quelqu'un pense qu'une inspection compl√®te est √† peu pr√®s la permission d'accepter les r√©ponses au protocole TCP / UDP / ICMP.  Mais qu'en est-il des applications plus complexes?  Par exemple, comment suivre deux connexions TCP que le protocole FTP √©tablit sur les ports 21 et 20 - d√©pendent-elles l'une de l'autre?  L√†, vous devez non seulement accepter la r√©ponse, mais √©galement autoriser la deuxi√®me connexion, en fonction de la commande PORT, √† l'int√©rieur de la connexion de contr√¥le sur le port 21.  Et combien d'applications suppl√©mentaires pour ouvrir de nouvelles connexions en elles-m√™mes donnent des applications?  En r√©sum√©, les r√©seaux utilisent maintenant la liste d'acc√®s habituelle, qui ne comprend pas la commande PORT √† l'int√©rieur du protocole FTP, et il y a le pare-feu L4, qui d√©monte la commande PORT et ouvre automatiquement le port souhait√©, il y a quelqu'un qui est all√© plus loin et regarde les commandes de protocole MS RPC ou ICS plus complexes / Protocoles SCADA.  Mais toutes les applications possibles du pare-feu L4 ne semblent pas, et ces pare-feu diff√®rent √©galement g√©n√©ralement par le nombre d'applications impl√©ment√©es √† l'int√©rieur de la passerelle de couche application (ALG). <br><br>  √Ä quoi je veux en venir?  La conviction que le simple fait de se souvenir des principaux ports TCP / UDP ne fonctionne pas. <br>  Il existe d√©j√† plusieurs milliers d'applications dans le monde et toutes utilisent des r√©seaux informatiques.  Et aucun ing√©nieur r√©seau ne peut se souvenir de tous ces ports. <br><br>  La r√©v√©lation pour les ing√©nieurs r√©seau est la t√¢che d'ouvrir les ports pour une application plus complexe, par exemple, VNC.  Personne ne se souvient des ports et doit utiliser Google. <br><blockquote>  Lors de la publication de la premi√®re partie, j'ai men√© une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">enqu√™te</a> et je vois que les gens sont toujours pr√™ts √† se souvenir des num√©ros de port - les opinions √©taient divis√©es par 50 √† 50: quelqu'un a r√©pondu qu'il √©tait pr√™t √† se souvenir des 4 ports de l'application VNC. <br><br>  Le champion du nombre de ports est peut-√™tre Lync (alias Skype Entreprise).  Environ 40 ports.  Est-il r√©aliste de s'en souvenir? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/795/133/dad/795133dad8b8ad8e24d78cfba7d8056c.png"></blockquote>  Si vous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">regardez</a> Microsoft TechNet, qui d√©crit les ports que vous devez ouvrir, je veux √©crire un permis any dans n'importe quelle r√®gle, car il y a environ 40 ports et certains d'entre eux doivent s'ouvrir dynamiquement.  Et il est d√©sastreusement g√™nant de s'inscrire dans le pare-feu L4. <br><br>  Il s'av√®re qu'il est plus pratique pour un ing√©nieur r√©seau d'√©crire dans les r√®gles de l'application L7 et il est n√©cessaire que le pare-feu ouvre automatiquement les ports n√©cessaires. <br><br>  Besoin d'ouvrir VNC?  Vous √©crivez le mot VNC dans la r√®gle et le pare-feu comprend d√©j√† les protocoles sous-jacents que vous devez ouvrir.  C'est pratique. <br><br>  <b>Un exemple.</b>  <b>Rapport NGFW sur les cat√©gories de trafic s√©lectionn√©es.</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d38/cf1/44f/d38cf144fe1b72801cb6665551f246f7.png"><br><br>  En moyenne, 200 √† 300 applications utilisent l'acc√®s Internet √† partir d'un r√©seau d'entreprise.  Le pare-feu au niveau de l'application indique de quelles applications il s'agit et peut filtrer ces applications pour tous ou pour des utilisateurs sp√©cifiques et filtrer les fichiers par types ou contenu qui vont aux applications autoris√©es pour tous les utilisateurs du r√©seau d'entreprise.  N'oubliez pas non plus que dans NGFW, les fonctions de s√©curit√© fonctionnent en parall√®le: IPS, antivirus, anti-spyware, filtre URL, filtre DNS, Threat Intelligence, etc.  Autrement dit, nous n'autorisons pas seulement les candidatures, mais le faisons en toute s√©curit√©. <br><br><a name="Security"></a><h2>  Le pare-feu L7 est plus s√ªr </h2><br>  J'ai le Palo Alto Networks NGFW sous la main.  J'ai √©crit trois r√®gles diff√©rentes √† ce sujet.  Voyons comment ils diff√®rent. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/934/f87/9d9/934f879d9fc26ca130016ebcf12d3986.png"><br><br>  Si vous avez d√©j√† configur√© un pare-feu, vous voyez que pour diff√©rents groupes d'utilisateurs: vip, marketing et programmeurs, j'ai activ√© SSL de trois mani√®res diff√©rentes. <br><br><ol><li>  <b>Les</b> utilisateurs <b>vip</b> pourront aller <b>sur le port 443 et pourront utiliser SSL √† l'int√©rieur</b> , car c'est le port par d√©faut pour SSL.  S'ils essaient d'acc√©der au port 443, par exemple, telnet normal, ils ne r√©ussiront pas - le pare-feu v√©rifiera qu'il n'est pas SSL et le bloquera.  Et c'est ce dont vous avez besoin! </li><li>  <b>le marketing</b> peut aller <b>vers n'importe quel port utilisant SSL</b> , car dans le champ Service, o√π les ports sont indiqu√©s, tout port est autoris√©.  La question est, est-ce que je veux que le marketing utilise SSL sur des ports non standard?  Non.  Il s'agit d'une erreur de configuration courante.  La sp√©cification d'un port comme √©tant logique est logique si la r√®gle est prohibitive, c'est-√†-dire si nous voulons interdire SSL sur n'importe quel port. </li><li>  <b>les programmeurs</b> peuvent marcher <b>sur le port 443 avec n'importe quelle application</b> , ce qui est en fait un trou, car √† l'origine, je voulais ouvrir uniquement SSL.  Et c‚Äôest exactement ainsi que fonctionne le pare-feu L4 - il ouvre le port et peu importe pour lui ce qui se trouve l√† et quelles applications utilisent ce port.  N'importe quel programmeur du groupe des programmeurs peut utiliser n'importe quel tunnel. </li></ol><br>  La d√©finition de l' <b>application par d√©faut est</b> tr√®s importante et vous permet de r√©duire le nombre de r√®gles: vous pouvez sp√©cifier les applications n√©cessaires dans la colonne Application dans une r√®gle et le pare-feu lui-m√™me ouvrira les ports n√©cessaires pour les applications n√©cessaires et seules les applications qui devraient y aller passeront par ces ports.  Par cons√©quent, vous avez besoin d'une r√®gle pour ouvrir plusieurs applications. <br><br>  Par exemple, pour la r√®gle ci-dessous, o√π tous les employ√©s ne sont autoris√©s √† acc√©der √† Internet que par d√©faut, NGFW v√©rifiera constamment qu'ils ne veulent que le client DNS sur le 53e port et non TCP-over-DNS.  Et bien s√ªr, cela augmente la s√©curit√©, car vous autorisez non seulement les applications, mais contr√¥lez que seules les applications que vous autorisez passent par des canaux ouverts. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/a16/3c8/268a163c8dc1bb195b9c34e02e18da65.png"><br><br><a name="Issues"></a><h2>  Quels nouveaux probl√®mes cr√©ent une nouvelle approche pour √©crire des r√®gles pour L7 </h2><br>  Vous devez comprendre que la d√©termination de l'application par le contenu du package est tr√®s stressante pour le processeur de pare-feu L7.  Si le pare-feu L4 habituel ne v√©rifiait que quelques octets de l'en-t√™te du paquet TCP, puis passait les m√©gaoctets restants du clip flash sans v√©rification, le pare-feu L7 devrait lire tout ce qui est stock√© dans le champ de donn√©es TCP / IP et v√©rifier constamment le contenu de la connexion TCP / IP, soudainement. chang√© ou repr√©sente une menace pour l'entreprise.  Par cons√©quent, lorsqu'une fonctionnalit√© telle que l'analyse de contenu est apparue, tous les appareils ont commenc√© √† ralentir.  Par cons√©quent, l'analyse de contenu n√©cessite des appareils plus puissants. <br><br><a name="Limitations"></a><h2>  Limites de la technologie d'analyse de niveau 7 </h2><br>  Le pare-feu L7 n√©cessite plus de m√©moire pour stocker l'√©tat d'une connexion, par cons√©quent le param√®tre ¬´nombre de connexions simultan√©es¬ª du pare-feu L7 est toujours inf√©rieur √† celui du pare-feu L4 avec la m√™me quantit√© de RAM dans les deux appareils, et de mani√®re significative, toutes les 10 fois. Cela a d√©j√† √©t√© expliqu√© ci-dessus dans la section √âtat Inspection  Et c'est le prix pour la s√©curit√© de vos applications.  Par cons√©quent, si vous comparez l'inspection L4 et L7, demandez au fabricant comment il a mesur√© le param√®tre ¬´nombre de sessions simultan√©es¬ª: avec la s√©curit√© activ√©e au niveau 7 ou d√©sactiv√©e. <br><br>  La m√™me chose avec les performances: le processeur de pare-feu L4 ne v√©rifie que quelques octets de l'en-t√™te de paquet, puis transf√®re les donn√©es lui-m√™me √† des vitesses de routage sans v√©rification, et le pare-feu L7 v√©rifie √† la fois l'en-t√™te et tous les m√©gaoctets de donn√©es contenus dans les paquets de connexion suivants.  Et c'est un travail compl√®tement diff√©rent.  Par cons√©quent, ce travail doit √™tre effectu√© sur des plates-formes mat√©rielles sp√©cialis√©es, o√π l'analyse des applications est acc√©l√©r√©e, l'antivirus en streaming est acc√©l√©r√©, IPS et d'autres fonctions de s√©curit√© sont acc√©l√©r√©es.  Mieux encore, Cavium a r√©ussi √† cr√©er des puces pour acc√©l√©rer la s√©curit√©, dont les puces, par exemple, sont utilis√©es par Palo Alto Networks.      FPGA()      IPS            FPGA.             ,        ‚Äî   . <br><br><a name="end"></a><h2>  Conclusion </h2><br> <b>-</b> ,    L7 firewall .          ,   .  :      NGFW             . <br><br> <b>-</b> ,      ,  L7 firewall         -       ,      . <br><br> <b>-</b> ,                  ,    . ,  -   80 . <br><br>  3.  SSL  NGFW. ( ) <br><br>  ! <br><br>   <br> denis@batrankov.ru <a name="vote"></a></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436836/">https://habr.com/ru/post/fr436836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436798/index.html">D√©formation administrative professionnelle</a></li>
<li><a href="../fr436802/index.html">Widget de communication 3CX pour votre site Wordpress</a></li>
<li><a href="../fr436826/index.html">Android Robotics jusqu'en 2019: la vraie histoire; en 5 parties; partie 4</a></li>
<li><a href="../fr436828/index.html">La transition vers Boost-1.65.1 et les bogues qui ont fait surface</a></li>
<li><a href="../fr436830/index.html">Android Robotics jusqu'en 2019: la vraie histoire; en 5 parties; partie 5</a></li>
<li><a href="../fr436838/index.html">Comprendre les r√©seaux de neurones convolutifs gr√¢ce √† des visualisations dans PyTorch</a></li>
<li><a href="../fr436840/index.html">Le chemin du gloss aux neurosciences: un podcast th√©matique sur les carri√®res dans les m√©dias et le marketing de contenu</a></li>
<li><a href="../fr436842/index.html">Solution Veeam pour la sauvegarde et la restauration de machines virtuelles sur la plateforme Nutanix AHV. 2e partie</a></li>
<li><a href="../fr436846/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 348 (14-20 janvier 2019)</a></li>
<li><a href="../fr436848/index.html">La NSA annonce la sortie d'un outil interne de r√©tro-ing√©nierie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>