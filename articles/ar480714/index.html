<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐พโ๐พ ๐ฅ๏ธ ๐ ููููุฉ ุฅุถุงูุฉ ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุฅูู FFmpeg ๐ฉ๐ฝโ๐ณ ๐ง ๐ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="FFmpeg ูู ูุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ูุจูุฑ ุ ููู ููุน ูู ููุณูุนุฉ ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ. ูุน FFmpeg ุ ููููู ุญู ุนุฏุฏ ูุจูุฑ ูู ููุงู ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ ููููุจููุชุฑ. ูููู ูุง ูุฒุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุฅุถุงูุฉ ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุฅูู FFmpeg</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480714/" style=";text-align:right;direction:rtl"><hr><p style=";text-align:right;direction:rtl">  FFmpeg ูู ูุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ูุจูุฑ ุ ููู ููุน ูู ููุณูุนุฉ ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ.  ูุน FFmpeg ุ ููููู ุญู ุนุฏุฏ ูุจูุฑ ูู ููุงู ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ ููููุจููุชุฑ.  ูููู ูุง ูุฒุงู ุ ูู ุจุนุถ ุงูุฃุญูุงู ููุงู ุญุงุฌุฉ ูุชูุณูุน FFmpeg.  ุงูุทุฑููุฉ ุงูููุงุณูุฉ ูู ุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุฑูุฒ ุงููุดุฑูุน ููู ุซู ุชุฑุฌูุฉ ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ.  ุชูุงุตูู ุงูููุงูุฉ ููููุฉ ุฅุถุงูุฉ ุจุฑูุงูุฌ ุชุฑููุฒ ุฌุฏูุฏ.  ุจุนุถ ุงูููุฒุงุช ูุฑุจุท ุงููุธุงุฆู ุงูุฎุงุฑุฌูุฉ ูุน FFmpeg ุชุนุชุจุฑ ุฃูุถุง.  ุฅุฐุง ูู ุชูู ููุงู ุญุงุฌุฉ ูุฅุถุงูุฉ ุจุฑูุงูุฌ ุชุฑููุฒ ุ ููุฏ ุชููู ุงูููุงูุฉ ูููุฏุฉ ูููู ุฃูุถู ูุจููุฉ ุจุฑุงูุฌ ุชุฑููุฒ FFmpeg ูุฅุนุฏุงุฏุงุชูุง.  ูู ุงูููุชุฑุถ ุฃู ูููู ุงููุงุฑุฆ ูุนุชุงุฏูุง ุนูู ุจููุฉ FFmpeg ุ ูุนูููุฉ ุชุฌููุน FFmpeg ุ ููุฏูู ุฃูุถูุง ุฎุจุฑุฉ ุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู API FFmpeg.  ุงููุตู ุตุงูุญ ูู FFmpeg 4.2 "Ada" ุ ุฃุบุณุทุณ 2019. <br></p><hr><a name="habracut"></a><br><h1 style=";text-align:right;direction:rtl">  ุฌุฏูู ุงููุญุชููุงุช </h1><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฌุฏูู ุงููุญุชููุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <a href="https://habr.com/ru/post/480714/">ููุฏูุฉ</a> <br>  <a href="https://habr.com/ru/post/480714/">1. ุชุญุฏูุฏ ุงูุชุฑููุฒ</a> <br>  <a href="https://habr.com/ru/post/480714/">1.1.</a>  <a href="https://habr.com/ru/post/480714/">ููุฏ ุงูุชุฑููุฒ</a> <br>  <a href="https://habr.com/ru/post/480714/">1.2.</a>  <a href="https://habr.com/ru/post/480714/">ุงูุชุฑููุฒ</a> <br>  <a href="https://habr.com/ru/post/480714/">2. ุฅุถุงูุฉ ุจุฑูุงูุฌ ุชุฑููุฒ ุฌุฏูุฏ ุฅูู FFmpeg</a> <br>  <a href="https://habr.com/ru/post/480714/">3. ูุตู ููุตู ููุณูุงู ูุงููุธุงุฆู ุงููุทููุจุฉ</a> <br>  <a href="https://habr.com/ru/post/480714/">3.1.</a>  <a href="https://habr.com/ru/post/480714/">ุณูุงู ุงูุชุฑููุฒ</a> <br>  <a href="https://habr.com/ru/post/480714/">3.2.</a>  <a href="https://habr.com/ru/post/480714/">ูุธุงุฆู</a> <br>  <a href="https://habr.com/ru/post/480714/">3.3.</a>  <a href="https://habr.com/ru/post/480714/">ุงูุทูุงุจุน ุงูุฒูููุฉ</a> <br>  <a href="https://habr.com/ru/post/480714/">3.4.</a>  <a href="https://habr.com/ru/post/480714/">ูุธุงุฆู ุฃุฎุฑู ูุณุชุฎุฏููุง ุงูุชุฑููุฒ</a> <br>  <a href="https://habr.com/ru/post/480714/">4. ุงูุชูููุฐ ุงูุฎุงุฑุฌู ูุจุฑูุงูุฌ ุงูุชุฑููุฒ</a> <br>  <a href="https://habr.com/ru/post/480714/">4.1.</a>  <a href="https://habr.com/ru/post/480714/">ูุธููุฉ ุงุชุตุงู ุฎุงุฑุฌู</a> <br>  <a href="https://habr.com/ru/post/480714/">4.2.</a>  <a href="https://habr.com/ru/post/480714/">ูู ุฎุงุฑุฌู</a> <br>  <a href="https://habr.com/ru/post/480714/">ุงุณุชูุชุงุฌ</a> <br>  <a href="https://habr.com/ru/post/480714/">ููุงุฑุฏ</a> <br></p><br></div></div><br><a name="id-introdaction"></a><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ุจุฑูุงูุฌ ุงูุชุฑููุฒ (ุจุฑูุงูุฌ ุงูุชุฑููุฒ) ุงูุฐู ูุฃุชู ูู ูุฌููุนุฉ ุงููุตุทูุญูู COder ู DECoder) ูุตุทูุญูุง ุดุงุฆุนูุง ููุบุงูุฉ ุ ูููุง ูุญุฏุซ ุบุงูุจูุง ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูุฎุชูู ูุนูุงู ุจุนุถ ุงูุดูุก ุญุณุจ ุงูุณูุงู.  ุงููุนูู ุงูุฃุณุงุณู ูู ุงูุจุฑูุงูุฌ ุฃู ุงูุฃุฌูุฒุฉ ูุถุบุท / ุฅูุบุงุก ุถุบุท ุจูุงูุงุช ุงููุณุงุฆุท.  ุจุฏูุงู ูู ุงููุตุทูุญุงุช compression / decompression ุ ุบุงูุจูุง ูุง ุชุณุชุฎุฏู ุงููุตุทูุญุงุช encoding / decoding.  ูููู ูู ุจุนุถ ุงูุญุงูุงุช ุ ููููู ุนุงุฏุฉู ุฃู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุนูู ูุฌุฑุฏ ุชูุณูู ุถุบุท (ููุง ูููู ุชูุณูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ) ุ ุจุบุถ ุงููุธุฑ ุนู ุงููุณุงุฆู ุงููุณุชุฎุฏูุฉ ููุถุบุท / ุฅูุบุงุก ุงูุถุบุท.  ุฏุนููุง ูุฑู ููู ูุชู ุงุณุชุฎุฏุงู ูุตุทูุญ ุงูุชุฑููุฒ ูู FFmpeg. <br></p><br><a name="id-1"></a><br><h1 style=";text-align:right;direction:rtl">  1. ุชุญุฏูุฏ ุงูุชุฑููุฒ </h1><br><p style=";text-align:right;direction:rtl">  ูุชู ุชุตููู ุจุฑุงูุฌ ุงูุชุฑููุฒ FFmpeg ูู ููุชุจุฉ <b>libavcodec</b> . <br></p><br><a name="id-1-1"></a><br><h2 style=";text-align:right;direction:rtl">  1.1.  ููุฏ ุงูุชุฑููุฒ </h2><br><p style=";text-align:right;direction:rtl"> <code>enum AVCodecID</code> ุชุนุฑูู <code>enum AVCodecID</code> ูู <code>enum AVCodecID</code> <code>libavcodec/avcodec.h</code> .  ูุญุฏุฏ ูู ุนูุตุฑ ูู ุนูุงุตุฑ ูุฐุง ุงูุชุนุฏุงุฏ ุชูุณูู ุงูุถุบุท.  ูุฌุจ ุฃู ุชููู ุนูุงุตุฑ ูุฐุง ุงูุชุนุฏุงุฏ ูู ุงูููุน <code>AV_CODEC_ID_XXX</code> ุ ุญูุซ <code>XXX</code> ุงุณู ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุงููุฑูุฏ ูู ุงูุญุงูุฉ ุงูุนููุง.  ูููุง ููู ุฃูุซูุฉ <code>AV_CODEC_ID_H264</code> ุจุฑูุงูุฌ ุงูุชุฑููุฒ: <code>AV_CODEC_ID_H264</code> ุ <code>AV_CODEC_ID_AAC</code> .  ููุญุตูู ุนูู ูุตู ุฃูุซุฑ ุชูุตูููุง ููุนุฑูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ุงุณุชุฎุฏู ุจููุฉ <code>AVCodecDescriptor</code> (ุชู ุงูุฅุนูุงู ุนููุง ูู <code>libavcodec/avcodec.h</code> ุ <code>libavcodec/avcodec.h</code> ูู ุดูู ูุฎุชุตุฑ): <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AVCodecDescriptor</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> AVCodecID id; <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> AVMediaType type; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *name; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *long_name; <span class="hljs-comment"><span class="hljs-comment">// ... } AVCodecDescriptor;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุนุถู ุงูุฑุฆูุณู ูู ูุฐู ุงูุจููุฉ ูู <code>id</code> ุ ุฃูุง ุจุงูู ุงูุฃุนุถุงุก ูููุฏููู ูุนูููุงุช ุฅุถุงููุฉ ุญูู ูุนุฑูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ.  ูุฑุชุจุท ูู ูุนุฑู ูุจุฑูุงูุฌ ุงูุชุฑููุฒ ุจุดูู ูุฑูุฏ ุจููุน ุงููุณุงุฆุท (ุนุถู ูู <code>type</code> ) ููู ุงุณู ูุฑูุฏ (ุนุถู ูู <code>name</code> ) ุ ููู ููุชูุจ ูู ุงูุญุงูุฉ ุงูุตุบูุฑุฉ.  ูุชู ุชุนุฑูู ุตููู ูู ุงูููุน <code>AVCodecDescriptor</code> ูู ุงูููู <code>libavcodec/codec_desc.c</code> <code>AVCodecDescriptor</code> .  ููู ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ููุงู ุนูุตุฑ ุตููู ุงูููุงุจูุฉ.  ูุฌุจ ุฃู ูุชู ุชุฑุชูุจ ุนูุงุตุฑ ูุฐู ุงููุฌููุนุฉ ุญุณุจ ููู <code>id</code> ุ ุญูุซ ูุชู ุงุณุชุฎุฏุงู ุงูุจุญุซ ุงูุซูุงุฆู ููุจุญุซ ุนู ุงูุนูุงุตุฑ.  ููุญุตูู ุนูู ูุนูููุงุช ุญูู ูุนุฑูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ููููู ุงุณุชุฎุฏุงู ุงููุธุงุฆู: <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> AVCodecDescriptor* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_descriptor_get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">enum</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodecID id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> AVCodecDescriptor* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_descriptor_get_by_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">enum</span></span></span><span class="hljs-function"> AVMediaType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_get_type</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">enum</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodecID codec_id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_get_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">enum</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodecID id)</span></span></span></span>;</code> </pre> <br><a name="id-1-2"></a><br><h2 style=";text-align:right;direction:rtl">  1.2.  ุงูุชุฑููุฒ </h2><br><p style=";text-align:right;direction:rtl">  ุจุฑูุงูุฌ ุงูุชุฑููุฒ ููุณู - ูุฌููุนุฉ ูู ุงูุฃุฏูุงุช ุงููุงุฒูุฉ ูุชูููุฐ ุชุดููุฑ / ูู ุชุดููุฑ ุจูุงูุงุช ุงููุณุงุฆุท ุ ูุฌูุน ุจูู ุจููุฉ <code>AVCodec</code> (ุชู ุงูุฅุนูุงู ุนููุง ูู <code>libavcodec/avcodec.h</code> ).  ูููุง ููู ูุณุฎุชู ุงููุฎุชุตุฑุฉ ุ ุณุชุชู ููุงูุดุฉ ุงูุฃูุซุฑ ุงูุชูุงูุง ุฃุฏูุงู. <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AVCodec</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *name; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *long_name; <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> AVMediaType type; <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> AVCodecID id; <span class="hljs-comment"><span class="hljs-comment">// ... } AVCodec;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃูู ุนุถู ูู ูุฐู ุงูุจููุฉ ูู <code>id</code> ุ <code>id</code> ุงูููุฏู ุ ูููุงู ุฃูุถูุง ุนุถู ูุญุฏุฏ ููุน ุงููุณุงุฆุท ( <code>type</code> ) ุ ูููู ูุฌุจ ุฃู ุชุชุทุงุจู ูููุชู ูุน ูููุฉ ููุณ ุงูุนุถู ูู <code>AVCodecDescriptor</code> .  ูุชููุณู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุฅูู ูุฆุชูู: ุงูุชุดููุฑ ุ ุงูุฐู ูุถุบุท ุฃู ูุดูุฑ ุงููุณุงุฆุท ุ ูุฃุฌูุฒุฉ ูู ุงูุชุดููุฑ ุ ุงูุชู ุชุคุฏู ุงูุนูููุฉ ุงููุนุงูุณุฉ - ูู ุงูุถุบุท ุฃู ูู ุงูุชุดููุฑ.  (ูู ุจุนุถ ุงูุฃุญูุงู ุ ูู ุงููุตูุต ุงูุฑูุณูุฉ ุ ูุณุชุฎุฏู ุงููุดูุฑ ูุฑูุฉ ุงูุชุชุจุน ูู ุงูุฅูุฌููุฒูุฉ - ุงููุดูุฑ.) ูุง ููุฌุฏ ุนุถู ุฎุงุต ูู <code>AVCodec</code> ูุญุฏุฏ ูุฆุฉ ุจุฑูุงูุฌ ุงูุชุฑููุฒ (ุนูู ุงูุฑุบู ูู ุฃูู ูููู ุชุญุฏูุฏ ุงููุฆุฉ ุจุดูู ุบูุฑ ูุจุงุดุฑ ุจุงุณุชุฎุฏุงู ุงูุฏุงูุชูู <code>av_codec_is_encoder()</code> ู <code>av_codec_is_decoder()</code> ููุชู ุชุญุฏูุฏููุง ุฃุซูุงุก ุงูุชุณุฌูู. ุณูุชู ุนุฑุถ ููููุฉ ุงูููุงู ุจุฐูู: ูููู ุฃู ูููู ููุนุฏูุฏ ูู ุจุฑุงูุฌ ุงูุชุฑููุฒ ููุณ ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ูุฅุฐุง ูุงู ูุฏููู ููุณ ุงููุฆุฉ ุ ููุฌุจ ุฃู ูุฎุชูููุง ุญุณุจ ุงูุงุณู ( <code>name</code> ุงูุนุถู) ุ ููููู ูุฌูุงุฒ ุงูุชุดููุฑ ููู ุงูุดูุฑุฉ ุงูุฐู ูุญูู ููุณ ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุฃู ูููู ูุงุญุฏ  ููุณ ุงูุงุณู ุ ูุงูุฐู ูุฏ ูุชุฒุงูู ุฃูุถูุง ูุน ุงุณู ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ (ูููู ูุฐู ุงูุชุทุงุจูุงุช ุงุฎุชูุงุฑูุฉ) ุ ูุฏ ูุคุฏู ูุฐุง ุงููููู ุฅูู ุจุนุถ ุงูุงูุชุจุงุณ ุ ูููู ูุง ููุฌุฏ ุดูุก ูุฌุจ ุงูููุงู ุจู ุ ูุฌุจ ุฃู ุชููู ุจูุถูุญ ุงูููุงู ุงูุฐู ููุชูู ุฅููู ุงูุงุณู. ุถูู ูุฆุฉ ูุงุญุฏุฉ ุ ุงูุงุณู ูุฌุจ ุฃู ูููู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุฑูุฏุงู ุ ูููุจุญุซ ุนู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงููุณุฌูุฉ ุ ููุงู ูุธุงุฆู: <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">AVCodec* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_find_encoder_by_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">AVCodec* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_find_decoder_by_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">AVCodec* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_find_encoder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">enum</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodecID id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">AVCodec* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_find_decoder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">enum</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodecID id)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงูุนุฏูุฏ ูู ุจุฑุงูุฌ ุงูุชุฑููุฒ ูููู ุฃู ูููู ููุง ููุณ ุงููุนุฑู ุ ูุฅู ุงูุฏุงูุชูู ุงูุฃุฎูุฑุชูู ุชูููุงู ุจุฅุฑุฌุงุน ูุงุญุฏุฉ ูููุง ุ ูุงูุชู ูููู ุงุนุชุจุงุฑูุง ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุงูุงูุชุฑุงุถู ููุนุฑูู ุจุฑูุงูุฌ ุชุฑููุฒ ูุนูู. <br></p><br><p style=";text-align:right;direction:rtl">  ูููู ุทูุจ ูุงุฆูุฉ ุจุฌููุน ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงููุณุฌูุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <br></p><br><p style=";text-align:right;direction:rtl"> <code>ffmpeg -codecs &gt;codecs.txt</code> <br> </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชูููุฐ ุงูุฃูุฑ ุ <code>codecs.txt</code> ููู <code>codecs.txt</code> ุนูู ูุฐู ุงููุงุฆูุฉ.  ุณูุชู ุชูุซูู ูู ูุนุฑูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุจุณุฌู ูููุตู (ุณุทุฑ).  ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฏุฎุงู ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ <code>AV_CODEC_ID_H264</code> : <br></p><br><p style=";text-align:right;direction:rtl"> <code>DEV.LS <br> h264 <br> H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 <br> (decoders: h264 h264_qsv h264_cuvid) <br> (encoders: libx264 libx264rgb h264_amf h264_nvenc h264_qsv nvenc nvenc_h264) <br></code> <br></p><br><p style=";text-align:right;direction:rtl">  ูู ุจุฏุงูุฉ ุงูุชุณุฌูู ุ ููุงู ุฃุญุฑู ุฎุงุตุฉ ุชุญุฏุฏ ุงูููุฒุงุช ุงูุดุงุฆุนุฉ ุงููุชููุฑุฉ ููุนุฑูู ุงูุชุฑููุฒ: ูุชู ุชุณุฌูู ูุญุฏุงุช ูู ุงูุชุฑููุฒ ุ ููุชู ุชุณุฌูู ุฃุฌูุฒุฉ ุงูุชุดููุฑ <code>E</code> ุ ูุชู ุงุณุชุฎุฏุงู <code>V</code> - ููููุฏูู ุ <code>L</code> - ููุงู ุฅููุงููุฉ ุถุบุท ูุน ุฎุณุงุฆุฑ ุ <code>S</code> - ููุงู ุฅููุงููุฉ ุถุบุท ุฏูู ุฎุณุงุฆุฑ.  ุจุนุฏ ุฐูู ูุฃุชู ุงุณู ูุนุฑู ุงูููุฏู ( <code>h264</code> ) ุ ูุชุจูุนูุง ุจุงุณู ูุนุฑู ุงูููุฏู ุงูุทููู ( <code>H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10</code> ) ุ ุซู ูุงุฆูุฉ ุจุฃุณูุงุก ูุญุฏุงุช ูู ุงูุชุดููุฑ ูุฃุฌูุฒุฉ ุงูุชุดููุฑ ุงููุณุฌูุฉ. <br></p><br><a name="id-2"></a><br><h1 style=";text-align:right;direction:rtl">  2. ุฅุถุงูุฉ ุจุฑูุงูุฌ ุชุฑููุฒ ุฌุฏูุฏ ุฅูู FFmpeg </h1><br><p style=";text-align:right;direction:rtl">  ุณููุธุฑ ูู ุงูุฅุฌุฑุงุก ุงูุฎุงุต ุจุฅุถุงูุฉ ุจุฑูุงูุฌ ุชุฑููุฒ ุฌุฏูุฏ ุฅูู FFmpeg ุจุงุณุชุฎุฏุงู ูุซุงู ูุจุฑูุงูุฌ ุชุฑููุฒ ุตูุชู ุ ูุงูุฐู <code>FROX</code> ุนููู <code>FROX</code> . <br></p><br><p style=";text-align:right;direction:rtl">  <b>ุงูุฎุทูุฉ 1. ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ ุฅูู <code>enum AVCodecID</code> .</b> <br></p><br><p style=";text-align:right;direction:rtl">  ูุฐู ุงููุงุฆูุฉ ููุฌูุฏุฉ ูู <code>libavcodec/avcodec.h</code> .  ุนูุฏ ุงูุฅุถุงูุฉ ุ ูุฌุจ ุนููู ุงุชุจุงุน ุงูููุงุนุฏ: <br></p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃูุง ุชุชุฒุงูู ูููุฉ ุงูุนูุตุฑ ูุน ููู ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุงูุญุงููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุง ุชูู ุจุชุบููุฑ ููู ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุงูุญุงููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุดุฑ ูููุฉ ุฌุฏูุฏุฉ ูู ูุฌููุนุฉ ูู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงููุดุงุจูุฉ. </li></ol><br><p style=";text-align:right;direction:rtl">  ููููุง ูููุงูุจ ุ ูุฌุจ ุฃู ูููู ูุนุฑู ูุฐุง ุงูุนูุตุฑ ูู <code>AV_CODEC_ID_FROX</code> .  <code>AV_CODEC_ID_PCM_S64LE</code> ูุจู <code>AV_CODEC_ID_PCM_S64LE</code> ูุงุนุท ุงููููุฉ <code>0x10700</code> . <br></p><br><p style=";text-align:right;direction:rtl">  <b>ุงูุฎุทูุฉ 2. ุฅุถุงูุฉ ุงูุนูุตุฑ ุฅูู ุตููู <code>codec_descriptors</code> (ููู <code>libavcodec/codec_desc.c</code> ).</b> <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AVCodecDescriptor codec_descriptors[] = { <span class="hljs-comment"><span class="hljs-comment">// ... { .id = AV_CODEC_ID_FROX, .type = AVMEDIA_TYPE_AUDIO, .name = "frox", .long_name = NULL_IF_CONFIG_SMALL("FROX audio"), .props = AV_CODEC_PROP_LOSSLESS, }, // ... };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุงูุนูุตุฑ ุฅูู ุงูููุงู "ุงูุตุญูุญ" ุ ููุฌุจ ุนุฏู ุงูุชูุงู ุฑุชุงุจุฉ ุนูุงุตุฑ ุงูุตููู ุจูุงุณุทุฉ ูููุฉ <code>id</code> . <br></p><br><p style=";text-align:right;direction:rtl">  <b>ุงูุฎุทูุฉ 3. ุชุญุฏูุฏ ูุซููุงุช <code>AVCodec</code> ุจุดูู ูููุตู ูุฌูุงุฒ ุงูุชุดููุฑ ููู ุงูุชุดููุฑ.</b> <br></p><br><p style=";text-align:right;direction:rtl">  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฃููุงู ุฅูู ุชุญุฏูุฏ ุจููุฉ ุณูุงู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงูุชู ุณุชุคุฏู ุงูุชุฑููุฒ / ูู ุงูุชุฑููุฒ ุงููุนูู ูุจุนุถ ุงูุนูููุงุช ุงูุถุฑูุฑูุฉ ุงูุฃุฎุฑู.  ูู ูุฐุง ุงููุณู ุ ุณูุชู ุฅุฌุฑุงุก ูุฐู ุงูุชุนุฑููุงุช ุจุดูู ุชุฎุทูุทู ููุบุงูุฉ ุ ูุณูุชู ุชูุฏูู ูุตู ุฃูุซุฑ ุชูุตูููุง ูุงุญููุง.  <code>libavcodec/frox.c</code> ุงูููุฏ ูู ููู <code>libavcodec/frox.c</code> <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"avcodec.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// context typedef struct FroxContext { // ... } FroxContext; // decoder static int frox_decode_init(AVCodecContext *codec_ctx) { return -1; } static int frox_decode_close(AVCodecContext *codec_ctx) { return -1; } static int frox_decode(AVCodecContext *codec_ctx, void* outdata, int *outdata_size, AVPacket *pkt) { return -1; } AVCodec ff_frox_decoder = { .name = "frox_dec", .long_name = NULL_IF_CONFIG_SMALL("FROX audio decoder"), .type = AVMEDIA_TYPE_AUDIO, .id = AV_CODEC_ID_FROX, .priv_data_size = sizeof(FroxContext), .init = frox_decode_init, .close = frox_decode_close, .decode = frox_decode, .capabilities = AV_CODEC_CAP_LOSSLESS, .sample_fmts = (const enum AVSampleFormat[]) {AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_NONE}, .channel_layouts = (const int64_t[]) {AV_CH_LAYOUT_MONO, 0 }, }; // encoder static int frox_encode_init(AVCodecContext *codec_ctx) { return -1; } static int frox_encode_close(AVCodecContext *codec_ctx) { return -1; } static int frox_encode(AVCodecContext *codec_ctx, AVPacket *pkt, const AVFrame *frame, int *got_pkt_ptr) { return -1; } AVCodec ff_frox_encoder = { .name = "frox_enc", .long_name = NULL_IF_CONFIG_SMALL("FROX audio encoder"), .type = AVMEDIA_TYPE_AUDIO, .id = AV_CODEC_ID_FROX, .priv_data_size = sizeof(FroxContext), .init = frox_encode_init, .close = frox_encode_close, .encode2 = frox_encode, .sample_fmts = (const enum AVSampleFormat[]) {AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_NONE}, .channel_layouts = (const int64_t[]) {AV_CH_LAYOUT_MONO, 0 }, };</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ููุจุณุงุทุฉ ุ ูู ูุฐุง ุงููุซุงู ุ ูููู ููู ูู ุจุฑูุงูุฌ ุงูุชุดููุฑ ููู ุงูุดูุฑุฉ ููุณ ุงูุณูุงู - <code>FroxContext</code> ุ ูููู ูู ูุนุธู ุงูุฃุญูุงู ูููู ููู ูู ุจุฑูุงูุฌ ุงูุชุดููุฑ ููู ุงูุดูุฑุฉ ุณูุงูุงุช ูุฎุชููุฉ.  ูุงุญุธ ุฃูุถูุง ุฃู <code>AVCodec</code> ูุซูู <code>AVCodec</code> ูุฌุจ ุฃู ุชุชุจุน ููุทูุง ุฎุงุตูุง. <br></p><br><p style=";text-align:right;direction:rtl">  <b>ุงูุฎุทูุฉ 4. ุฅุถุงูุฉ ูุซููุงุช <code>AVCodec</code> ุฅูู ูุงุฆูุฉ ุงูุชุณุฌูู.</b> <br></p><br><p style=";text-align:right;direction:rtl">  ุงูุชูู ุฅูู ููู <code>libavcodec/allcodecs.c</code> .  ูู ุจุฏุงูุฉ ูุฐุง ุงูููู ุชูุฌุฏ ูุงุฆูุฉ ุจุงูุฅุนูุงูุงุช ูุฌููุน ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงููุณุฌูุฉ.  ุฃุถู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงูุฎุงุตุฉ ุจูุง ุฅูู ูุฐู ุงููุงุฆูุฉ: <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> AVCodec ff_frox_decoder; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> AVCodec ff_frox_encoder;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุซูุงุก ุงูุชูููุฐ ุ ูููู ุงูุจุฑูุงูุฌ ุงููุตู <code>configure</code> ุจุงูุจุญุซ ุนู ูู ูุฐู ุงูุชุนุฑููุงุช ููููู ุจุฅูุดุงุก <code>libavcodec/codec_list.c</code> ุ ูุงูุฐู ูุญุชูู ุนูู ูุฌููุนุฉ ูู ุงููุคุดุฑุงุช ุฅูู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงููุนููุฉ ูู <code>libavcodec/allcodecs.c</code> .  ุจุนุฏ ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู ูู ููู <code>libavcodec/codec_list.c</code> ุณูุฑู: <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AVCodec * <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> codec_list[] = { <span class="hljs-comment"><span class="hljs-comment">// ... &amp;ff_frox_encoder, // ... &amp;ff_frox_decoder, // ... NULL };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃูุถูุง ุ ุฃุซูุงุก ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู <code>configure</code> ุ ูุชู <code>config.h</code> ููู <code>config.h</code> ุ ุญูุซ ูุฌุฏ ุงูุฅุนูุงูุงุช <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> CONFIG_FROX_DECODER 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> CONFIG_FROX_ENCODER 1</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <b>ุงูุฎุทูุฉ 5. ุชุญุฑูุฑ <code>libavcodec/Makefile</code></b> <br></p><br><p style=";text-align:right;direction:rtl">  ูุชุญ <code>libavcodec/Makefile</code> .  ูุฌุฏ ุงููุณู <code># decoders/encoders</code> ุ ููุถูู ููุงู <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">OBJS-$(CONFIG_FROX_DECODER) += frox.o OBJS-$(CONFIG_FROX_ENCODER) += frox.o</code> </pre> <br><p style=";text-align:right;direction:rtl">  <b>ุงูุฎุทูุฉ 6. ุชุญุฑูุฑ ุฑูุฒ ุงููุถุงุนู ู demultiplexer.</b> <br></p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุนุฑู "ููุถุงุนูู ุงูุฅุฑุณุงู" (muxer) ู demultiplexer (demuxer) ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุงูุฌุฏูุฏ.  ุนูุฏ ุงูุชุณุฌูู ุ ูู ุงูุถุฑูุฑู ุชุณุฌูู ูุนูููุงุช ุงูุชุนุฑูู ุงูุฎุงุตุฉ ุจุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุฐุง ุ ุฃุซูุงุก ุงููุฑุงุกุฉ ุ ุชุญุฏูุฏ ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูู ูุนูููุงุช ุงูุชุนุฑูู.  ุฅููู ูุง ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจู ูุชูุณูู <code>matroska</code> ( <code>*.mkv</code> <code>matroska</code> <code>*.mkv</code> ). <br></p><br><p style=";text-align:right;direction:rtl">  1. ูู ููู <code>libavformat/matroska.c</code> ุ ุฃุถู ุนูุตุฑูุง ูุจุฑูุงูุฌ ุงูุชุฑููุฒ ุงูุฌุฏูุฏ ุฅูู ุตููู <code>libavformat/matroska.c</code> : <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CodecTags ff_mkv_codec_tags[] = { <span class="hljs-comment"><span class="hljs-comment">// ... {"A_FROX", AV_CODEC_ID_FROX}, // ... };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุณูุฉ <code>"A_FROX"</code> ูุณูุชู ูุชุงุจุชูุง ุจูุงุณุทุฉ ุงููุถุงุนู ุฅูู ุงูููู <code>"A_FROX"</code> ุชุนุฑูู.  ูู ูุฐู ุงููุตูููุฉ ุ ูุชู ุฑุจุทูุง ุจูุนุฑูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ูุจุงูุชุงูู ุ ุนูุฏ ุงููุฑุงุกุฉ ุ ูููู ููุฒูู ุชุนุฏุฏ ุงูุฅุฑุณุงู ุชุญุฏูุฏู ุจุณูููุฉ.  ููุชุจ demultiplexer ูุนุฑู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุนุถู <code>codec_id</code> ุจููุฉ <code>codec_id</code> .  ูุคุดุฑ ูุฐุง ุงููููู ูู ุนุถู ูู ุจููุฉ <code>AVStream</code> . <br></p><br><p style=";text-align:right;direction:rtl">  2. ูู ุงูููู <code>libavformat/matroskaenc.c</code> ุ ุฃุถู ุงูุนูุตุฑ ุฅูู ุตููู <code>libavformat/matroskaenc.c</code> : <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AVCodecTag additional_audio_tags[] = { <span class="hljs-comment"><span class="hljs-comment">// ... { AV_CODEC_ID_FROX, 0XFFFFFFFF }, // ... };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐูู ูู ุดูุก ุฌุงูุฒ.  ุฃููุงู ุ ูู ุจุชุดุบูู <code>configure</code> ุงูุจุฑูุงูุฌ ุงููุตู.  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฅุฌุฑุงุก ุงูุชุบููุฑุงุช ุงูููุถุญุฉ ุฃุนูุงู ูู ุงููููุงุช <code>libavcodec/codec_list.c</code> ู <code>config.h</code> .  ุซู ููููู ุชุดุบูู ุงูุชุฑุฌูุฉ: <br></p><br><p style=";text-align:right;direction:rtl"> <code>make clean <br> make <br></code> <br></p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชูุช ุนูููุฉ <code>ffmpeg.exe</code> ุ <code>ffmpeg.exe</code> <code>ffmpeg</code> ุงููุงุจู ููุชูููุฐ (ุฃู <code>ffmpeg.exe</code> ุ ุฅุฐุง ูุงู ูุธุงู ุงูุชุดุบูู ุงููุฏู ูู Windows).  ุชูููุฐ ุงูุฃูุฑ <br></p><br><p style=";text-align:right;direction:rtl"> <code>./ffmpeg -codecs &gt;codecs.txt <br></code> <br></p><br><p style=";text-align:right;direction:rtl">  ูุชุฃูุฏ ูู ุฃู FFmpeg "ูุฑู" ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงูุฌุฏูุฏุฉ ุงูุฎุงุตุฉ ุจูุง ุ ูุฌุฏ ุงูุฅุฏุฎุงู ูู ููู <code>codecs.txt</code> <br></p><br><p style=";text-align:right;direction:rtl"> <code>DEA..S frox FROX audio (decoders: frox_dec) (encoders: frox_enc) <br></code> <br></p><br><a name="id-3"></a><br><h1 style=";text-align:right;direction:rtl">  3. ูุตู ููุตู ููุณูุงู ูุงููุธุงุฆู ุงููุทููุจุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุณู ุ ูุตููุง ุจูุฒูุฏ ูู ุงูุชูุตูู ุดูู ุจููุฉ ุณูุงู ุงูุชุฑููุฒ ูุงููุธุงุฆู ุงููุงุฒูุฉ. <br></p><br><a name="id-3-1"></a><br><h2 style=";text-align:right;direction:rtl">  3.1.  ุณูุงู ุงูุชุฑููุฒ </h2><br><p style=";text-align:right;direction:rtl">  ูุฏ ูุฏุนู ุณูุงู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุชุซุจูุช ุงูุฎูุงุฑุงุช.  ุจุงููุณุจุฉ ูุฃุฌูุฒุฉ ุงูุชุดููุฑ ุ ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฏุนู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุจูุง ููู ุงูููุงูุฉ ุ ูุฃุฌูุฒุฉ ูู ุงูุชุดููุฑ ุฃูู ูุซูุฑูุง.  ูุฌุจ ุฃู ูููู ูููููู ุงูุฐู ูุฏุนู ุชุซุจูุช ุงูุฎูุงุฑุงุช ูุคุดุฑูุง ุฅูู ุจููุฉ <code>AVClass</code> ูุฃูู ุนุถู ุซู ููุฎูุงุฑุงุช ููุณูุง. <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"libavutil/opt.h"</span></span></span><span class="hljs-meta"> typedef struct FroxContext { const AVClass *av_class; int frox_int; char *frox_str; uint8_t *frox_bin; int bin_size; } FroxContext;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุฌููุนุฉ ูู ุงูููุน <code>AVOption</code> ุ <code>AVOption</code> ูู ุนูุตุฑ ูููุง ุฎูุงุฑูุง ูุญุฏุฏูุง. <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AVOption frox_options[] = { { <span class="hljs-string"><span class="hljs-string">"frox_int"</span></span>, <span class="hljs-string"><span class="hljs-string">"This is a demo option of int type."</span></span>, offsetof(FroxContext, frox_int), AV_OPT_TYPE_INT, { .i64 = <span class="hljs-number"><span class="hljs-number">-1</span></span> }, <span class="hljs-number"><span class="hljs-number">1</span></span>, SHRT_MAX }, { <span class="hljs-string"><span class="hljs-string">"frox_str"</span></span>, <span class="hljs-string"><span class="hljs-string">"This is a demo option of string type."</span></span>, offsetof(FroxContext, frox_str), AV_OPT_TYPE_STRING }, { <span class="hljs-string"><span class="hljs-string">"frox_bin"</span></span>, <span class="hljs-string"><span class="hljs-string">"This is a demo option of binary type."</span></span>, offsetof(FroxContext, frox_bin), AV_OPT_TYPE_BINARY }, { <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> }, };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุฎูุงุฑ ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ุงูุงุณู ูุงููุตู ูุงูุฅุฒุงุญุฉ ูู ุงููููู ูุงูููุน.  ููููู ุฃูุถูุง ุชุญุฏูุฏ ูููุฉ ุงูุชุฑุงุถูุฉ ููุฎูุงุฑุงุช ุนุฏุฏ ุตุญูุญ ูุฌููุนุฉ ูู ุงูููู ุงูุตุงูุญุฉ. <br></p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุนุฑูู ูุซูู ูู ููุน <code>AVClass</code> . <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AVClass frox_class = { .class_name = <span class="hljs-string"><span class="hljs-string">"FroxContext"</span></span>, .item_name = av_default_item_name, .option = frox_options, .version = LIBAVUTIL_VERSION_INT, };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุงุณุชุฎุฏุงู ูุคุดุฑ ููุฐุง ุงููุซูู ูุชููุฆุฉ ุนุถู <code>AVCodec</code> ุงูููุงุจู. <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">AVCodec ff_frox_decoder = { <span class="hljs-comment"><span class="hljs-comment">// ... .priv_data_size = sizeof(FroxContext), .priv_class = &amp;frox_class, // ... }; AVCodec ff_frox_encoder = { // ... .priv_data_size = sizeof(FroxContext), .priv_class = &amp;frox_class, // ... };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุนูุฏูุง ุชููู ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">AVCodecContext *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_alloc_context3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodec *codec)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุฅูุดุงุก ูุซูู ุจููุฉ <code>AVCodecContext</code> ุนุถู <code>codec</code> .  ุจุนุฏ ุฐูู ุ ุงุณุชูุงุฏูุง ุฅูู <code>codec-&gt;priv_data_size</code> ุ ุณูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงููุงุฒูุฉ <code>FroxContext</code> ุ ูุจุงุณุชุฎุฏุงู <code>codec-&gt;priv_class</code> ุณูุชู ุชููุฆุฉ ุงูุนุถู ุงูุฃูู ูู ูุฐุง ุงููุซูู ุ ุซู ูุชู ุงุณุชุฏุนุงุก ูุธููุฉ <code>av_opt_set_defaults()</code> ุ ูุงูุชู ุณุชููู ุจุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ ููุฎูุงุฑุงุช.  ุณูููู ูุคุดุฑ ููุซูู <code>FroxContext</code> ูุชุงุญูุง ูู ุฎูุงู ุนุถู <code>priv_data</code> ุจููุฉ <code>priv_data</code> . <br></p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงูุนูู ูุน FFmpeg API ุ ูููู ุชุนููู ููู ุงูุฎูุงุฑุงุช ูุจุงุดุฑุฉู. <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AVCodec *codec; <span class="hljs-comment"><span class="hljs-comment">// ... AVCodecContext *codec_ctx = avcodec_alloc_context3(codec); // ... av_opt_set(codec_ctx-&gt;priv_data, "frox_str", "meow", 0); av_opt_set_int(codec_ctx-&gt;priv_data, "frox_int", 42, 0);</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ุฃุฎุฑู ุชุชูุซู ูู ุงุณุชุฎุฏุงู ูุงููุณ ุงูุฎูุงุฑุงุช ุ ูุงูุฐู ุณูุชู ุชูุฑูุฑู ููุณูุทุฉ ุซุงูุซุฉ ุนูุฏ ุงุณุชุฏุนุงุก <code>avcodec_open2()</code> (ุงูุธุฑ ุฃุฏูุงู). <br></p><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ูุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> AVOption* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">av_opt_next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* ctx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVOption* prev)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุฎูุงุฑุงุช ุงูุชู ูุฏุนููุง ุณูุงู ุจุฑูุงูุฌ ุงูุชุฑููุฒ.  ูุฐุง ูููุฏ ุนูุฏ ูุญุต ุจุฑูุงูุฌ ุงูุชุฑููุฒ.  ูููู ูุจู ุฐูู ุ ูุฌุจ ุงูุชุฃูุฏ ูู ุฃู <code>codec_ctx-&gt;codec-&gt;priv_class</code> ุชุนูููู ุนูู ูููุฉ ุบูุฑ ุตูุฑูุฉ ุ ูุฅูุง ูุฅู ุงูุณูุงู ูุง ูุฏุนู ุงูุฎูุงุฑุงุช ูุฃู ุฃู ุนูููุฉ ูุน ุฎูุงุฑุงุช ุณุชุนุทู ุงูุจุฑูุงูุฌ. <br></p><br><a name="id-3-2"></a><br><h2 style=";text-align:right;direction:rtl">  3.2.  ูุธุงุฆู </h2><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ุงูุขู ููุญุต ุจูุฒูุฏ ูู ุงูุชูุตูู ููููุฉ ุชุฑุชูุจ ุงููุธุงุฆู ุงููุณุชุฎุฏูุฉ ูู ุชููุฆุฉ ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุงูุชุฑููุฒ / ูู ุงูุชุดููุฑ ุงููุนูู.  ุนุงุฏุฉ ูุง ูุญุชุงุฌูู ุฏุงุฆููุง ุฅูู ุงูุญุตูู ุนูู ูุคุดุฑ ุฅูู <code>FroxContext</code> . <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">AVCodecContext *codec_ctx; <span class="hljs-comment"><span class="hljs-comment">// ... FroxContext* frox_ctx = codec_ctx-&gt;priv_data;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู <code>frox_decode_init()</code> ู <code>frox_encode_init()</code> ุนูุฏ ุชูููุฐ ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_open2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( AVCodecContext *codec_ctx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVCodec *codec, AVDictionary **options)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅููู ุจุญุงุฌุฉ ุฅูู ุชุฎุตูุต ุงูููุงุฑุฏ ุงููุงุฒูุฉ ูุชุดุบูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ูุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูู ุจุชููุฆุฉ ุจุนุถ ุฃุนุถุงุก ุจููุฉ <code>AVCodecContext</code> ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>frame_size</code> ุตูุชู. <br></p><br><p style=";text-align:right;direction:rtl">  ุณูุชู <code>frox_decode_close()</code> ู <code>frox_encode_close()</code> ุนูุฏ ุชูููุฐููุง <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVCodecContext *codec_ctx)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููู ุจุญุงุฌุฉ ุงูู ุชุญุฑูุฑ ุงูููุงุฑุฏ ุงููุฎุตุตุฉ. <br></p><br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ูุธููุฉ ูุชูููุฐ ูู ุงูุชุดููุฑ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frox_decode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( AVCodecContext *codec_ctx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *outdata, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *outdata_size, AVPacket *pkt)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููุฐ ุงูุนูููุงุช ุงูุชุงููุฉ: <br></p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุงูุชุดููุฑ ุงููุนูู </li><li style=";text-align:right;direction:rtl">  ุชุฎุตูุต ุงููุฎุฒู ุงููุคูุช ุงููุงุฒู ูุฅุทุงุฑ ุงูุฅุฎุฑุงุฌ ุ </li><li style=";text-align:right;direction:rtl">  ูุณุฎ ุงูุจูุงูุงุช ูู ุงูุดูุฑุฉ ุฅูู ุงูุฅุทุงุฑ ุงูุนุงุฒูุฉ. </li></ol><br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ููููุฉ ุชุฎุตูุต ุงููุฎุฒู ุงููุคูุช ุงููุงุฒู ูุฅุทุงุฑ ุงูุฅุฎุฑุงุฌ.  <code>outdata</code> ุงููุนููุฉ <code>outdata</code> ูุนูููุง ุฅูู <code>AVFrame</code> ุ ูุฐูู ูุฌุจ ุนููู ุฃููุงู ุฅุฌุฑุงุก ุชุญููู ููุน: <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">AVFrame* frm = outdata;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุญุฏุฏ ูุฎุฒู ูุคูุช ูุชุฎุฒูู ุจูุงูุงุช ุงูุฅุทุงุฑ.  ููููุงู ุจุฐูู ุ ูู ุจุชููุฆุฉ ุฃุนุถุงุก <code>AVFrame</code> ุงูุชู ุชุญุฏุฏ ุญุฌู ุงููุฎุฒู ุงููุคูุช ููุฅุทุงุฑ.  ุจุงููุณุจุฉ ุฅูู ุงูุตูุช ุ ูุฐุง ูู <code>nb_samples</code> ุ <code>channel_layout</code> ุ <code>format</code> (ูุนุฑุถ ุงูููุฏูู ุ <code>height</code> ุ <code>format</code> ). <br></p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก ูุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">av_frame_get_buffer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVFrame* frm, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> alignment)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฎุฏุงู ุงููุคุดุฑ ุฅูู ุงูุฅุทุงุฑ ุ ููู ูุนููุฉ ุงูุจูุงูุงุช <code>outdata</code> ุงููุญููุฉ ุ ููุณูุทุฉ ุฃููู ุ ููุตู ุจุชูุฑูุฑ ุงูุตูุฑ ููุณูุทุฉ ุซุงููุฉ.  ุจุนุฏ ุงุณุชุฎุฏุงู ุงูุฅุทุงุฑ (ูุญุฏุซ ูุฐุง ุจุงููุนู ุฎุงุฑุฌ ุจุฑูุงูุฌ ุงูุชุฑููุฒ) ุ ูุชู ุชุญุฑูุฑ ุงููุฎุฒู ุงููุคูุช ุงููุฎุตุต ุจูุงุณุทุฉ ูุฐู ุงููุธููุฉ ุจูุงุณุทุฉ ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">av_frame_unref</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVFrame* frm)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชุฑุฌุน ุงูุฏุงูุฉ <code>frox_decode()</code> ุนุฏุฏ ุงูุจุงูุชุงุช ุงููุณุชุฎุฏูุฉ ูู ูู ุชุดููุฑ ุงูุญุฒูุฉ ูู ุงูุฅุดุงุฑุฉ ุฅูู <code>pkt</code> .  ูู ุญุงูุฉ ุงูุชูุงู ุชูููู ุงูุฅุทุงุฑ ุ <code>outdata_size</code> ุชุนููู ูููุฉ ุบูุฑ ุตูุฑูุฉ ูููุชุบูุฑ ุงูุฐู ูุดูุฑ ุฅููู <code>outdata_size</code> ุ ูุฅูุง ูุฅู ูุฐุง ุงููุชุบูุฑ ูุญุตู ุนูู ุงููููุฉ <code>0</code> . <br></p><br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ูุธููุฉ ูุชูููุฐ ุงูุชุฑููุฒ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frox_encode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( AVCodecContext *codec_ctx, AVPacket *pkt, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVFrame *frame, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *got_pkt_ptr)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููุฐ ุงูุนูููุงุช ุงูุชุงููุฉ: <br></p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุฑููุฒ ุงููุนูู </li><li style=";text-align:right;direction:rtl">  ุชุฎุตูุต ุงููุฎุฒู ุงููุคูุช ุงููุงุฒู ูุญุฒูุฉ ุงูุฅุฎุฑุงุฌ ุ </li><li style=";text-align:right;direction:rtl">  ูุณุฎ ุงูุจูุงูุงุช ุงููุดูุฑุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช ุงูุญุฒูุฉ. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุชุญุฏูุฏ ุงููุฎุฒู ุงููุคูุช ุงููุทููุจ ุ ุงุณุชุฎุฏู ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">av_new_packet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVPacket *pkt, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pack_size)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>pkt</code> ุงุณุชุฎุฏุงู ุงููุนููุฉ <code>pkt</code> ููุณูุทุฉ ุงูุฃููู ุ ูุญุฌู ุงูุจูุงูุงุช ุงููุดูุฑุฉ ูู ุงูุซุงูู.  ุจุนุฏ ุงุณุชุฎุฏุงู ุงูุญุฒูุฉ (ูุญุฏุซ ูุฐุง ุจุงููุนู ุฎุงุฑุฌ ุจุฑูุงูุฌ ุงูุชุฑููุฒ) ุ ูุชู ุชุญุฑูุฑ ุงููุฎุงุฒู ุงููุคูุชุฉ ุงููุฎุตุตุฉ ุจูุงุณุทุฉ ูุฐู ุงููุธููุฉ ุจูุงุณุทุฉ ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">av_packet_unref</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVPacket *pkt)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุฅููุงู ุงูุญุฒูุฉ ุ ูุณูุชู ุชุนููู ุงููุชุบูุฑ ุงูุฐู ูุดูุฑ ุฅููู <code>got_pkt_ptr</code> ุนูู ูููุฉ ุบูุฑ ุตูุฑูุฉ ุ ูุฅูุง ูุฅู ูุฐุง ุงููุชุบูุฑ ูุญุตู ุนูู ุงููููุฉ <code>0</code> .  ุฅุฐุง ูู ููู ููุงู ุฎุทุฃ ุ ูุณูู ุชูุฑุฌุน ุงูุฏุงูุฉ ุงูุตูุฑ ุ ูุฅูุง ุฑูุฒ ุงูุฎุทุฃ. <br></p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชูููุฐ ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ูุชู ุนุงุฏุฉู ุงุณุชุฎุฏุงู ุงูุชุณุฌูู (ููุฃุฎุทุงุก ูููู ุงุนุชุจุงุฑ ุฐูู ูุชุทูุจูุง ุฅูุฒุงูููุง).  ููุง ูุซุงู: <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frox_decode_close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVCodecContext *codec_ctx)</span></span></span><span class="hljs-function"> </span></span>{ av_log(codec_ctx, AV_LOG_INFO, <span class="hljs-string"><span class="hljs-string">"FROX decode close\n"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ุนูุฏ ุงูุฅุฎุฑุงุฌ ุฅูู ุงูุณุฌู ุ ุณูุชู ุงุณุชุฎุฏุงู ุงุณู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูุงุณู ุณูุงู. <br></p><br><a name="id-3-3"></a><br><h2 style=";text-align:right;direction:rtl">  3.3.  ุงูุทูุงุจุน ุงูุฒูููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุถุจุท ุงูููุช ูู FFmpeg ุ ูุชู ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุฒูููุฉ ูุญุฏุฏุฉ ุจุงูุซูุงูู ุจุงุณุชุฎุฏุงู ุงูุฑูู ุงูุฑุดูุฏ ุงูุฐู ููุซูู ููุน <code>AVRational</code> .  (ูุชู ุงุณุชุฎุฏุงู <code>int64_t</code> C ++ 11. ุนูู ุณุจูู ุงููุซุงู ุ ูุนูู 1/1000 ูููู ุซุงููุฉ). ุชุญุชูู ุงูุฅุทุงุฑุงุช ูุงูุญุฒู ุนูู ุทูุงุจุน ุฒูููุฉ ูู ุงูููุน <code>int64_t</code> ุ ูุชุญุชูู ููููุง ุนูู ููุช ูู ูุญุฏุงุช ุงูููุช ุงูููุงุจูุฉ.  ูุญุชูู ุงูุฅุทุงุฑ ุ ุฃู ุจููุฉ <code>AVFrame</code> ุ ุนูู <code>pts</code> ุฃุนุถุงุก (ุงูุทุงุจุน ุงูุฒููู ููุนุฑุถ ุงูุชูุฏููู) ุ ุชุญุฏุฏ ูููุชู ุงูููุช ุงููุณุจู ูููุดูุฏ ุงูุฐู ุชู ุงูุชูุงุทู ูู ุงูุฅุทุงุฑ.  ุชุญุชูู ุงูุญุฒูุฉ ุ ููู ุจููุฉ <code>AVPacket</code> ุ ุนูู ุฃุนุถุงุก <code>pts</code> (ุงูุทุงุจุน ุงูุฒููู ููุนุฑุถ) ู <code>dts</code> (ุงูุทุงุจุน ุงูุฒููู <code>dts</code> ุงูุถุบุท).  ุชุญุฏุฏ ุงููููุฉ <code>dts</code> ุงูููุช ุงููุณุจู ูุฅุฑุณุงู ุงูุญุฒูุฉ ููู ุงูุชุดููุฑ.  ุจุงููุณุจุฉ ุฅูู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงูุจุณูุทุฉ ุ ููู <code>pts</code> ุ ููู ุจุงููุณุจุฉ ุฅูู ุจุฑุงูุฌ ุงูุชุฑููุฒ ุงููุนูุฏุฉ ูููู ุฃู ุชููู ูุฎุชููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุจุงููุณุจุฉ ูู <code>h264</code> ุนูุฏ ุงุณุชุฎุฏุงู B-frames) ุ ุฃู ุฃูู ูููู ูู ุชุดููุฑ ุงูุญุฒู ุจุงูุชุฑุชูุจ ุงูุฎุงุทุฆ ุงูุฐู ูุฌุจ ุฃู ุชุณุชุฎุฏู ุจู ุงูุฅุทุงุฑุงุช. <br></p><br><p style=";text-align:right;direction:rtl">  ูุชู ุชุนุฑูู ูุญุฏุฉ ุงูููุช ููุฏูู ูุงูุชุฑููุฒ ุ ุจููุฉ <code>AVStream</code> ูุฏููุง ุนุถู ุงููุทุงุจู - <code>time_base</code> ุ ููุณ ุงูุนุถู ูุฏูู ุจููุฉ <code>AVCodecContext</code> . <br></p><br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชุญุฏูุฏ ุงูุทูุงุจุน ุงูุฒูููุฉ ููุญุฒูุฉ ุงููุณุชุฎุฑุฌุฉ ูู ุงูุฏูู ุจุงุณุชุฎุฏุงู <code>av_read_frame()</code> ุจูุญุฏุงุช ููุช ูุฐุง ุงูุฏูู.  ุนูุฏ ูู ุงูุชุดููุฑ ุ ูุง ูุชู ุงุณุชุฎุฏุงู ุงููุญุฏุฉ ุงูุฒูููุฉ ูุจุฑูุงูุฌ ุงูุชุฑููุฒ.  ุจุงููุณุจุฉ ููุญุฏุฉ ูู ุชุฑููุฒ ุงูููุฏูู ุ ุนุงุฏุฉู ูุง ูุง ูุชู ุถุจุทูุง ุจุจุณุงุทุฉ ุ ุจุงููุณุจุฉ ููุญุฏุฉ ูู ุชุฑููุฒ ุงูุตูุช ุ ุชููู ููุง ูููุฉ ููุงุณูุฉ - ุนูุณ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช.  ูุฌุจ ุนูู ูุญุฏุฉ ูู ุงูุชุฑููุฒ ุฃู ุชุญุฏุฏ ุทุงุจุนูุง ุฒููููุง ูุฅุทุงุฑ ุงูุฎุฑุฌ ุงุณุชูุงุฏูุง ุฅูู ุงูุทุงุจุน ุงูุฒููู ููุฑุฒูุฉ.  ูุนุฑูู FFmpeg ูุฐู ุงูุชุณููุฉ ุจุดูู ูุณุชูู <code>best_effort_timestamp</code> ุงูุนุถู <code>best_effort_timestamp</code> ุจููุฉ <code>best_effort_timestamp</code> .  ุณุชุณุชุฎุฏู ูู ูุฐู ุงูุทูุงุจุน ุงูุฒูููุฉ ูุญุฏุฉ ููุช ุงูุฏูู ุงูุชู ูุชู ุงุณุชุฎุฑุงุฌ ุงูุญุฒูุฉ ูููุง. <br></p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูุฌูุงุฒ ุงูุชุดููุฑ ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ูุญุฏุฉ ุงูููุช.  ูู ุฑูุฒ ุงูุนููู ุงูุฐู ููุธู ุนูููุฉ ูู ุงูุชุดููุฑ ุ ูุฌุจ ุนููู ุชุนููู ุงููููุฉ ูุนุถู <code>time_base</code> ุจููุฉ <code>time_base</code> ูุจู ุงุณุชุฏุนุงุก <code>avcodec_open2()</code> .  ุนุงุฏุฉู ูุง ุชุฃุฎุฐ ูุญุฏุฉ ุงูููุช ุงููุณุชุฎุฏูุฉ ููุทูุงุจุน ุงูุฒูููุฉ ููุฅุทุงุฑ ุงููุดูุฑ.  ุฅุฐุง ูู ูุชู ุฐูู ุ ูุนุงุฏุฉู ูุง ุชุชุณุจุจ ุจุฑุงูุฌ ุชุดููุฑ ุงูููุฏูู ูู ุญุฏูุซ ุฎุทุฃ ุ ุชููู ุฃุฌูุฒุฉ ุชุดููุฑ ุงูุตูุช ุจุชุนููู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ - ููู ุนูุณ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช.  ูุง ุฅุฐุง ูุงู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ููููู ุชุบููุฑ ูุญุฏุฉ ุฒูููุฉ ูุนููุฉ ููุณ ูุงุถุญูุง ุชูุงููุง.  ููุท ูู ุญุงูุฉ ุ ูู ุงูุฃูุถู ุฏุงุฆููุง ุงูุชุญูู ูู ูููุฉ <code>time_base</code> ุจุนุฏ ุงุณุชุฏุนุงุก <code>avcodec_open2()</code> ูุฅุฐุง ูุงู ูุฏ ุชุบูุฑ ุ ูู ุจุฅุนุงุฏุฉ ุญุณุงุจ ุงูุทูุงุจุน ุงูุฒูููุฉ ูุฅุทุงุฑุงุช ุงูุฅุฏุฎุงู ููู ูุญุฏุฉ ุฒูููุฉ ูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ.  ูู ุนูููุฉ ุงูุชุฑููุฒ ุ ูุฌุจ ุนููู ุชุซุจูุช <code>pts</code> ู <code>dts</code> ุงูุญุฒูุฉ.  ุจุนุฏ ุงูุชุฑููุฒ ุ ูุจู ูุชุงุจุฉ ุญุฒูุฉ ุฅูู ุฏูู ุงูุฅุฎุฑุงุฌ ุ ูู ุงูุถุฑูุฑู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุทูุงุจุน ุงูุฒูููุฉ ููุฑุฒูุฉ ูู ูุญุฏุฉ ููุช ุงูุชุฑููุฒ ุฅูู ูุญุฏุฉ ููุช ุงูุฏูู.  ููููุงู ุจุฐูู ุ ุงุณุชุฎุฏู ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">av_packet_rescale_ts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( AVPacket *pkt, AVRational tb_src, AVRational tb_dst)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุชุงุจุฉ ุญุฒู ุฅูู ุงูุฏูู ุ ูู ุงูุถุฑูุฑู ุงูุชุฃูุฏ ูู ุฃู ููู <code>dts</code> ุชุฒุฏุงุฏ ุจุดูู ุตุงุฑู ุ ูุฅูุง ูุฅู ููุถุงุนูู ุงูุฅุฑุณุงู ุณูู ูููู ุฎุทุฃู.  (ููุฒูุฏ ูู ุงููุนูููุงุช ุ ุฑุงุฌุน ุงููุซุงุฆู ุงูุฎุงุตุฉ <code>av_interleaved_write_frame()</code> .) <br></p><br><a name="id-3-4"></a><br><h2 style=";text-align:right;direction:rtl">  3.4.  ูุธุงุฆู ุฃุฎุฑู ูุณุชุฎุฏููุง ุงูุชุฑููุฒ </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชููุฆุฉ ูุซูู <code>AVCodec</code> ุ ูููู ุชุณุฌูู ูุธููุชูู ุฃุฎุฑููู.  ููุง ุงูุฃุนุถุงุก ุงููุนูููู ูู <code>AVCodec</code> : <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AVCodec</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// ... void (*init_static_data)(AVCodec *codec); void (*flush)(AVCodecContext *codec_ctx); // ... } AVCodec;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฏุนุงุก ุฃูููู ูุฑุฉ ูุงุญุฏุฉ ุนูุฏ ุชุณุฌูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ. <br></p><br><p style=";text-align:right;direction:rtl">  ูุงูุซุงูู ูุนูุฏ ุถุจุท ุงูุญุงูุฉ ุงูุฏุงุฎููุฉ ูุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ูุณูุชู ุงุณุชุฏุนุงุคู ุฃุซูุงุก ุชูููุฐ ุงููุธููุฉ <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">avcodec_flush_buffers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVCodecContext *codec_ctx)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐู ุงูุฏุนูุฉ ุถุฑูุฑูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุชุบููุฑ ูุถุน ุงูุชุดุบูู ุงูุญุงูู ุจุงูููุฉ. <br></p><br><a name="id-4"></a><br><h1 style=";text-align:right;direction:rtl">  4. ุงูุชูููุฐ ุงูุฎุงุฑุฌู ูุจุฑูุงูุฌ ุงูุชุฑููุฒ </h1><br><a name="id-4-1"></a><br><h2 style=";text-align:right;direction:rtl">  4.1.  ูุธููุฉ ุงุชุตุงู ุฎุงุฑุฌู </h2><br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ููุธูุฉ ุงูุชุฑููุฒ ุงูุชุงููุฉ: ููุนุจ ุงูุชุฑููุฒ ุงููุณุฌู ูู FFmpeg ุฏูุฑ ุฅุทุงุฑ ุนูู ุ ููููุถ ุฅุฌุฑุงุก ุงูุชุฑููุฒ / ูู ุงูุชุดููุฑ ุงููุนูู ุฅูู ุงููุธุงุฆู ุงูุฎุงุฑุฌูุฉ (ููุน ูู ุงูููููุงุช ุงูุฅุถุงููุฉ) ุงููููุฐุฉ ุฎุงุฑุฌ FFmpeg. <br></p><br><p style=";text-align:right;direction:rtl">        .  ูุคูุงุก ุจุนุถ ูููู: <br></p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">       ,   FFmpeg    ; </li><li style=";text-align:right;direction:rtl">     C,    ,   C++; </li><li style=";text-align:right;direction:rtl">     framework,     FFmpeg. </li></ol><br><p style=";text-align:right;direction:rtl">    ,   FFmpeg       ยซยป,         FFmpeg API.             ยซยป FFmpeg       (  ,     ),     .    โ     .         . <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">typedef</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(*</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">dec_extern_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">*, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">*)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frox_decode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( AVCodecContext* codec_ctx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* outdata, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *outdata_size, AVPacket* pkt)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ret = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* out_buff; <span class="hljs-comment"><span class="hljs-comment">//      out_buff FroxContext *fc = codec_ctx-&gt;priv_data; if (fc-&gt;bin_size &gt; 0) { if (fc-&gt;bin_size == sizeof(dec_extern_t)) { dec_extern_t edec; memcpy(&amp;edec, fc-&gt;frox_bin, fc-&gt;bin_size); ret = (*edec)(pkt-&gt;data, pkt-&gt;size, out_buff); if (ret &gt;= 0) { //     out_buff   } } else { /*  */ } } else { /*    */ } // ... return ret; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">    FFmpeg API (     C++)    . <br></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DecodeFroxData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* buff, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* outBuff)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">typedef</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(*</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">dec_extern_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">*, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">*)</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;libavcodec/avcodec.h&gt; #include &lt;libavutil/opt.h&gt; } // ... AVCodecContext* ctx; // ... dec_extern_t dec = DecodeFroxData; void* pv = &amp;dec; auto pb = static_cast&lt;const uint8_t*&gt;(pv); auto sz = sizeof(dec); av_opt_set_bin(ctx-&gt;priv_data, "frox_bin", pb, sz, 0);</span></span></span></span></code> </pre> <br><a name="id-4-2"></a><br><h2 style=";text-align:right;direction:rtl"> 4.2.   </h2><br><p style=";text-align:right;direction:rtl">       โ     .        ,   . ,      .  ,   ,  FFmpeg     ,   ยซยป ,        .         .     ,   .   FFmpeg API  -       ,   ,      .     .        ,        .     PC (Windows)      DirectShow  AVI .  PC             -   DirectShow.     32- FourCC. (   <code>biCompression</code>  <code>BITMAPINFOHEADER</code> .)  ,      DirectShow   ,   PC    -.        FFmpeg  , ,   ,   <code>codec_tag</code>  <code>AVCodecParameters</code>   FourCC,     .       FFmpeg API    ,    .             FFmpeg   FFmpeg API. <br></p><br><p style=";text-align:right;direction:rtl">          ,   <code>*.mkv</code>  FFmpeg     ( <code>ENCODER</code> ). <br></p><br><a name="id-concl"></a><br><h1 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><p style=";text-align:right;direction:rtl">        ,   ,       FFmpeg: , changelog,     ..     ยซยป  FFmpeg,     ,     . <br></p><br><a name="id-refs"></a><br><h1 style=";text-align:right;direction:rtl">  </h1><br><p style=";text-align:right;direction:rtl"> <b>   FFmpeg</b> </p><br><p style=";text-align:right;direction:rtl"> [1] <a href="https://ffmpeg.org/" rel="nofollow">FFmpeg โ  </a> <br> [2] <a href="https://ffmpeg.org/documentation.html" rel="nofollow">FFmpeg โ </a> <br> [3] <a href="https://ru.wikipedia.org/wiki/FFmpeg" rel="nofollow">FFmpeg โ </a> <br> [4] <a href="https://help.ubuntu.ru/wiki/ffmpeg" rel="nofollow">FFmpeg โ    Ubuntu</a> <br></p><br><p style=";text-align:right;direction:rtl"> <b></b> </p><br><p style=";text-align:right;direction:rtl"> [5] <a href="https://trac.ffmpeg.org/wiki/CompilationGuide" rel="nofollow">FFmpeg Compilation Guide</a> <br> [6] Compilation of FFmpeg 4.0 in Windows 10 <br></p><br><p style=";text-align:right;direction:rtl"> <b>   FFmpeg API</b> </p><br><p style=";text-align:right;direction:rtl"> [7] <a href="https://habr.com/ru/post/137793/">   ffmpeg</a> <br></p><br><p style=";text-align:right;direction:rtl"> <b> </b> </p><br><p style=";text-align:right;direction:rtl"> [8] <a href="https://wiki.multimedia.cx/index.php/FFmpeg_codec_HOWTO" rel="nofollow">FFmpeg codec HOWTO</a> <br> [9] <a href="http://ogorkis.net/ffmpeg" rel="nofollow">FFmpeg video codec tutorial</a> <br></p><br><br><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480714/">https://habr.com/ru/post/ar480714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480702/index.html">ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุงูููุงูุจ ูุงูุฎุจุฑุงุก ูุงูุฅุจุฏุงุน: ููู ูุงูุช ุงูุญููุฉ ุงูุฏุฑุงุณูุฉ ุงูุซุงููุฉ</a></li>
<li><a href="../ar480704/index.html">ุฌุนู ุชุญููู ูุญุชูู ุงุณุชุฌุงุจุฉ ุนูู ุงููููุน</a></li>
<li><a href="../ar480708/index.html">ุงูุนููุฏ ุชูุชุฑุจ ูู ููุงูุชูุง. ูุง ุงูุชุทุจููุงุช ุนูู Google Play ุงูุชู ูุงูุช ุงูุฃูุซุฑ ุชูุฒูููุง ูู ุงูุณููุงุช ุงูุนุดุฑ ุงููุงุถูุฉุ</a></li>
<li><a href="../ar480710/index.html">ุฅุนุงุฏุฉ ุจูุน ุฃูุนุงุจ SFML</a></li>
<li><a href="../ar480712/index.html">ุงูุฑุญูุฉ ูุน ูููุงุณ ุงูุฌุฑุนุงุช ูู ุงูุฌูุจ</a></li>
<li><a href="../ar480716/index.html">ูุงุชูุงุจ ุถุฏ. ุฌูููุง ุถุฏ ุงูุซุนุจุงู</a></li>
<li><a href="../ar480718/index.html">6 ูุตุงุฆุญ ููุฑุงุฌุนุฉ ุงูุฑูุฒ ุงููุงุฌุญ</a></li>
<li><a href="../ar480724/index.html">ุงููุบุงุช ุงููุชุฑุฌูุฉ: ูุดุงุฑูุน ุชุญููู ุงูููุฏ ุฅูู ุงูููุฏ</a></li>
<li><a href="../ar480734/index.html">ูู TestMace ุฃูุถู ูู ุณุงุนู ุงูุจุฑูุฏ</a></li>
<li><a href="../ar480736/index.html">ููุงุฐุง ูุง ุชุญุชุงุฌ ุฅูู ุชุตุญูุญ ุฌููุน ุงูุฃุฎุทุงุก ูุฌุนู ููุชุฌ ุชูููููุฌูุง ุงููุนูููุงุช ุฃูุถู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>