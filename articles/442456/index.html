<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíü ü¶å üìÜ C√≥mo ahorrar recursos en el navegador y no romper la web. Informe Yandex ü§µüèº ‚õπüèº üöæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A pesar del crecimiento del rendimiento del dispositivo, la web se est√° volviendo cada vez m√°s exigente en cuanto a memoria y procesador. La represent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo ahorrar recursos en el navegador y no romper la web. Informe Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/442456/"> A pesar del crecimiento del rendimiento del dispositivo, la web se est√° volviendo cada vez m√°s exigente en cuanto a memoria y procesador.  La representaci√≥n adecuada y la asignaci√≥n inteligente de recursos en las pesta√±as es una parte importante para resolver este problema.  Konstantin Kramlih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">PurplePowder</a> dedic√≥ su discurso en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conferencia</a> "I Frontend" a algoritmos que mejoran la productividad y ahorran recursos tanto en el proyecto Chromium como en Yandex.Browser. <br><br>  Algunos de ellos, por ejemplo, la tecnolog√≠a Hibernate, ya los hemos clasificado en una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci√≥n separada</a> .  El informe Bones cubre el problema de manera m√°s amplia: no solo desde el punto de vista del cambio de pesta√±as, sino tambi√©n teniendo en cuenta los m√©todos de representaci√≥n de contenido, mosaicos y capas de p√°gina. <br><br>  Al final, los desarrolladores de interfaces web pueden aprender a identificar y resolver problemas de rendimiento del sitio web. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6OLVN_gprow" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Mi nombre es Kostya, soy el jefe del grupo de desarrollo de componentes internos en el equipo Yandex.Browser.  En el navegador, he estado haciendo cosas diferentes durante un poco m√°s de cinco a√±os: desde la decodificaci√≥n en el navegador, desde todos los videos HTML5, hasta el renderizado, renderizado y otros procesos similares. <br><br><a name="habracut"></a>  Durante el √∫ltimo a√±o y medio o dos, he estado involucrado en proyectos relacionados con el ahorro de recursos en el navegador: CPU, memoria, bater√≠a. <br><br>  Usted dice: Kostya, en el patio en 2019, ¬ød√≥nde est√°n los problemas con los recursos?  Puede comprar cualquier dispositivo que desee con cualquier recurso.  Pero si pasamos a las estad√≠sticas abiertas de Mozilla, veremos que la mitad de los usuarios tienen 4 GB de memoria o menos.  Y muchos usuarios que tienen uno o dos n√∫cleos f√≠sicos, constituyen una proporci√≥n considerable de su audiencia.  En este mundo vivimos. <br><br><img src="https://habrastorage.org/webt/vr/cx/q0/vrcxq0duik8iaocs9q0v7xbkcqs.jpeg"><br><br>  ¬øCu√°ntos de ustedes ven a menudo esta pesta√±a?  Esto es exactamente lo que sucede en el caso de usuarios comunes que tienen poca RAM y computadoras viejas. <br><br><img src="https://habrastorage.org/webt/kd/kq/db/kdkqdbilt2lzsmz5q5p5xgizgci.jpeg"><br><br>  Que hacer  El problema no es secreto para nadie, comenzaron a luchar activamente con √©l hace unos tres a√±os.  Desde entonces, las tuercas se han apretado gradualmente de varias maneras.  Perm√≠teme mostrarte un ejemplo que fue sobre Stack Overflow alrededor de 2016.  Aqu√≠ hay un fragmento bastante simple.  Esto simplemente actualiza el t√≠tulo y establece el tiempo transcurrido desde el √∫ltimo lanzamiento de esta funci√≥n.  ¬øQu√© se debe obtener idealmente?  Cada 100 ms en el t√≠tulo debe escribirse + -100.  Que suerte <br><br><img src="https://habrastorage.org/webt/eh/fs/3h/ehfs3hfvws_8dd1t_fxe29qgdui.jpeg"><br><br>  Pero, ¬øy si abrimos y hacemos esto?  ¬øAlguien se ha topado con esto?  La pregunta fue para Stack Overflow: ¬øqu√© demonios deja de hacer clic Cookie Cookie en mis pesta√±as de fondo?  Esta fue una de las primeras iniciativas de Chromium destinadas a reducir el uso de CPU en el navegador.  La idea era que si el usuario no usa la pesta√±a ahora, entonces no la necesita ahora, pongamos JS en ella. <br><br>  El navegador intenta mantener la carga de la CPU en esta pesta√±a en aproximadamente el 1%; comienza a pausar todo tipo de temporizadores, ejecuci√≥n de JS, etc. Este es uno de los primeros pasos en el futuro brillante. <br><br><img src="https://habrastorage.org/webt/qf/vu/_c/qfvu_cyufv3gab9rsell45yv-6g.jpeg"><br><br>  Despu√©s de un tiempo en el navegador, ver√° que las pesta√±as de fondo dejan de funcionar.  Este es el brillante futuro del que estoy hablando.  De acuerdo con los planes de Chromium, que expresaron en el √∫ltimo BlinkOn, en 2020 planean hacerlo: dejar que se cargue la pesta√±a y, si est√° en segundo plano, no har√° nada.  Siempre debes estar preparado para esto. <br><br><img src="https://habrastorage.org/webt/u2/_i/gx/u2_igx67m7vxehtknn_-juntdjs.jpeg"><br><br>  En Yandex.Browser, tambi√©n nos ocupamos de ese problema, pero lo resolvimos de manera menos categ√≥rica y no rompimos toda la web.  Creamos un modo de ahorro de energ√≠a que desactiva la decodificaci√≥n en el procesador y deja solo la decodificaci√≥n en la tarjeta de video, y tambi√©n reduce el FPS y desactiva algunas animaciones que no se necesitan en este momento y en lugar de las cuales el usuario deber√≠a ahorrar bater√≠a.  Esto nos dio aproximadamente una hora de duraci√≥n adicional de la bater√≠a.  Cualquiera puede verificar, ixbt, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">verificado</a> . <br><br><img src="https://habrastorage.org/webt/vi/jx/kb/vijxkbmraau6ziqjhlswbz_u-t4.jpeg"><br><br>  Creo que algunos dir√°n: Kostya, "rompiste" la web, ayudaste a algunos usuarios, pero no se te ocurri√≥ nada m√°s inteligente.  A√±adir hardcore!  ¬øC√≥mo dibujan las p√°ginas los navegadores? <br><br><img src="https://habrastorage.org/webt/u4/2j/hy/u42jhyxml4ljdmmd6iu69azgl4g.jpeg"><br><br>  El concepto de capas, en pocas palabras, es cuando el navegador intenta dividir la p√°gina en capas y dibujarlas por separado.  Esto se hace para que se realicen algunas animaciones y no se obligue a volver a dibujar lo que es est√°tico.  El navegador hace esto en diferentes heur√≠sticas.  Por ejemplo, tratar de seleccionar un elemento de video en una capa separada, que, obviamente, se vuelve a dibujar r√°pidamente y con frecuencia.  Y si se muestra en alg√∫n lugar, entonces no es necesario volver a dibujar todo debajo. <br><br>  Adem√°s, cada capa se divide en dichos mosaicos: 256 por 256 rect√°ngulos. En el inspector puede ver algo como esto.  Hay un marco que se divide en un mont√≥n de fichas. <br><br><img src="https://habrastorage.org/webt/li/g7/ft/lig7ftmhfrgn3r_rlppouwefs8w.jpeg"><br><br><img src="https://habrastorage.org/webt/ip/1e/ud/ip1eudzb0uatttxq7-ydfb-aqe0.jpeg"><br><br>  ¬øQu√© es y por qu√© se necesita?  En primer lugar, priorizar el renderizado.  Si tenemos una salchicha enorme, en la que todos dibujamos, ¬øpor qu√© necesitamos dibujar todo esto si ahora el usuario solo ve lo que tiene ahora en ViewPort? <br><br><img src="https://habrastorage.org/webt/4q/nf/5o/4qnf5oxbb4j3ta9jfxca9urof3c.jpeg"><br><br>  Con este enfoque, primero dibujamos solo lo que el usuario ve en este momento en ViewPort, luego un mosaico alrededor, luego en la direcci√≥n del desplazamiento.  Si el usuario se desplaza hacia abajo, dibuje hacia abajo, si est√° hacia arriba.  Todo lo dem√°s se dibujar√° solo si tenemos una cuota para estos mosaicos y podemos dibujarlos, despu√©s de lo cual el usuario los ver√° alguna vez.  O tal vez nunca. <br><br><img src="https://habrastorage.org/webt/vt/vd/uw/vtvduwiv5swz_ogt7vkpwr8_rjc.jpeg"><br><br>  Tambi√©n ayuda mucho con discapacidades.  Supongamos que un usuario abre una p√°gina, selecciona una pieza y no necesitamos volver a dibujar todo.  Podemos dejar la mayor parte del renderizado anterior.  Redibujaremos seis mosaicos aqu√≠, y todo estar√° bien. <br><br><img src="https://habrastorage.org/webt/5z/4p/uw/5z4puwbbmkpqcdqbip5yh1lstew.jpeg"><br><br>  Justo en este nivel, se realizaron varias optimizaciones muy exitosas.  Por ejemplo, Chromium realiz√≥ tal optimizaci√≥n alrededor de 2017. <br><br><img src="https://habrastorage.org/webt/vc/lk/gy/vclkgyedfjzyc5wreb-q4t52pv0.jpeg"><br><br>  Si solo tenemos una peque√±a representaci√≥n, solo lo hacemos.  Luego, el cursor parpadea y redibujamos solo el √°rea del cursor, pero no toda el √°rea de este mosaico.  Ahorramos mucho CPU para no volver a dibujar todo. <br><br><img src="https://habrastorage.org/webt/ax/-a/cv/ax-acv5ypcljlc7jkheipeut6ek.jpeg"><br><br>  Tambi√©n ayuda a ahorrar memoria.  ¬øCu√°l es el problema aqu√≠?  Rect√°ngulos blancos enteros.  Imagine que ser√≠a una textura de 256 por 256, cuatro bytes por p√≠xel.  Aunque parece que esta √°rea se puede codificar con solo cinco n√∫meros: coordenadas, ancho, alto y color. <br><br><img src="https://habrastorage.org/webt/ho/kx/kt/hokxktfgpxja01guodvgtxdhv6q.jpeg"><br><br>  En Chromium, se ha optimizado las √°reas monocromas.  Si el navegador entiende que no hay renderizado en este rect√°ngulo, que es completamente monocrom√°tico, no transparente y cumple con otras condiciones, entonces simplemente le decimos a la tarjeta de video: dibuje un rect√°ngulo blanco, no seleccione toda la textura. <br><br>  ¬øQu√© m√°s se puede optimizar aqu√≠?  Si nos fijamos en los mosaicos restantes, tienen poco contenido y una gran √°rea de color blanco.  En Yandex.Browser, pensamos en esto e hicimos un mecanismo que llamamos mosaico adaptativo. <br><br><img src="https://habrastorage.org/webt/xr/vc/9j/xrvc9j8bqm5fpslcp1jbkvjzqpy.jpeg"><br><br>  Hay un peque√±o rect√°ngulo, un azulejo.  Hay poco contenido en el medio del mosaico.  Lo seleccionamos y, solo debajo, la textura.  Todo lo dem√°s tambi√©n se divide en varias √°reas, de las que estamos hablando de la tarjeta de video: solo dibuje en blanco aqu√≠ este tama√±o. <br><br><img src="https://habrastorage.org/webt/jh/ow/c7/jhowc7oh1nxm6-ofebqgzznnaya.jpeg"><br><br>  La p√°gina tambi√©n comienza a guardar todo lo que est√° resaltado en rojo.  En p√°ginas m√°s complejas, se ve m√°s o menos as√≠. <br><br><img src="https://habrastorage.org/webt/of/pu/lz/ofpulzw2yanibpfx7vrweogcsr8.jpeg"><br><br>  Es importante entender que todav√≠a hay un mont√≥n de capas y cada capa se dibuja as√≠.  En cada capa, puede guardar cierta cantidad de memoria.  Este enfoque nos permiti√≥ ahorrar aproximadamente el 40% de la memoria de video en promedio para todos los usuarios. <br><br>  M√°s hardcore!  Ahorraron un poco de memoria aqu√≠, "rompieron" la web. ¬øPor qu√© no "rompen" la web a√∫n m√°s? <br><br>  En Chromium hay algo as√≠ como una pol√≠tica: si el usuario no usa pesta√±as de fondo, si las dej√≥, entonces no las necesita.  Si ahora no tenemos memoria y el navegador ahora se acostar√°, tomemos la pesta√±a m√°s antigua que el usuario no haya usado durante mucho tiempo y elim√≠nela.  Ella permanecer√° en la interfaz, pero el proceso ya no estar√° all√≠, todos los JS morir√°n.  ¬øEst√° bien o no est√° bien?  Es extra√±o hacer una pregunta as√≠ en la fiesta de front-end y esperar cualquier respuesta que no sea "¬øQu√© est√°s haciendo?" <br><br><img src="https://habrastorage.org/webt/ui/5j/nq/ui5jnqtbegu672hy2tzbfiglhrk.jpeg"><br><br>  Entonces no fue mucho.  Aqu√≠ est√°n los comentarios reales del blog de Chromium: rompiste todas mis aplicaciones para m√≠, hab√≠a alg√∫n tipo de juego, y salta, no tiene estado.  Es importante entender que all√≠ el controlador de descarga no funcion√≥, como si simplemente hubi√©ramos publicado esta pesta√±a.  Luego, el usuario vuelve a √©l y lo volvemos a cargar desde la red, como si nada hubiera pasado. <br><br>  Luego, este enfoque se abandon√≥ temporalmente y se le ocurri√≥ una idea seria m√°s reflexiva.  La llamaron descarte. <br><br><img src="https://habrastorage.org/webt/x2/7w/zq/x27wzq5kw55gtlcsduajusa3yoi.jpeg"><br><br>  Cual es el punto?  Esta es la misma eliminaci√≥n de pesta√±as, solo controlada.  Se llama la palabra inteligente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Page Lifecycle API</a> .  Si tiene una pesta√±a y el usuario no la ha visto durante mucho tiempo, puede pasar al estado congelado.  El navegador dice durante el evento: voy a congelarte ahora.  Despu√©s de procesar el evento, no se realizar√° nada en absoluto.  Haz lo que necesites, prep√°rate. <br><br>  Luego puede salir del estado congelado a trav√©s del evento de reanudaci√≥n, supuestamente no sucedi√≥ nada.  O, si el navegador realmente necesita liberar memoria en este momento, simplemente lo toma y lo mata.  Pero si el usuario vuelve a esta pesta√±a, la volveremos a cargar y configuraremos el campo descartado para el documento. <br><br><img src="https://habrastorage.org/webt/8c/-i/wu/8c-iwuqbmjxvsrdksgcjwvenew4.jpeg"><br><br>  En este momento ya puedes suscribirte a estos eventos y atraparlos, de alguna manera procesarlos.  Si la pesta√±a se elimina realmente, puede verificar que el campo se descart√≥.  Esto significa que ha sido restaurado despu√©s de un descarte.  Puede restaurar el estado anterior. <br><br><img src="https://habrastorage.org/webt/as/ny/b1/asnyb16w13ubi3k1dfi_04nicik.jpeg"><br><br>  Nosotros en Yandex.Browser pensamos hace unos a√±os: ¬øpor qu√© no usar un enfoque cardinal complejo?  Lo llamaron Hibernate. <br><br><img src="https://habrastorage.org/webt/ce/7-/gn/ce7-gngt24kb9ikzc4nzdxbjspu.jpeg"><br><br>  Cual es el punto?  Hay varias pesta√±as, se est√° ejecutando alg√∫n tipo de JS, alg√∫n tipo de estado.  Se crea un proceso separado para cada pesta√±a: aqu√≠ se puede reproducir un video, aqu√≠ se deja algo en el formulario.  Hibernate llega, y no hay procesos.  Todos los tenemos.  Pero si ahora volvemos a estas pesta√±as, el proceso volver√° y todo el estado estar√° en su lugar, el video continuar√° reproduci√©ndose en el momento correcto, todo el texto en los campos permanecer√° en su lugar. <br><br><img src="https://habrastorage.org/webt/oy/ks/ug/oyksug04glkeh-amu4dyqfrryyc.jpeg"><br><br>  Que hemos hecho  Las tres cosas m√°s importantes viven dentro de cada renderizador: V8, que ejecuta todo el JS, Blink, que almacena todo el DOM, y alg√∫n tipo de enlace de navegador que ayuda a conectar todo, con pesta√±as y todo lo dem√°s. <br><br><img src="https://habrastorage.org/webt/pz/hj/h4/pzhjh4pmyn-yz5afmas6omozx6g.jpeg"><br><br>  Por ejemplo, considere una muestra.  Aqu√≠ esperamos que ocurra la carga y agregamos un nuevo elemento div al √°rbol DOM.  Para el navegador, se ve m√°s o menos as√≠. <br><br><img src="https://habrastorage.org/webt/ic/cu/vy/iccuvyjbkmkyjhbgfb5de8uqxpc.jpeg"><br><br>  Naturalmente, hay un √°rbol DOM, tiene algunos campos, objetos asociados y existe dicha entidad. <br><br><img src="https://habrastorage.org/webt/ng/tj/ki/ngtjkiwdv6raldvffqgnoils7ge.jpeg"><br><br>  En V8, el estado de cada nodo se almacena, y estos nodos est√°n asociados con objetos parpadeantes a trav√©s de una capa de carpetas.  Que hemos hecho  Tomamos el serializador de V8, serializamos todo el estado de V8, encontramos todos los objetos relacionados en Blink, escribimos m√°s serializadores que guardan todo el √°rbol DOM, serializan, luego escriben en el disco, comprimen y encriptan.  Y le ense√±amos al navegador a recuperarse de esa instant√°nea.  Es decir, cuando el usuario accede a dicha pesta√±a, la expandimos, la desciframos y se la mostramos al usuario, la restauramos por completo.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Una publicaci√≥n separada sobre Hibernate</a> - aprox. Ed.) <br><br>  En este momento, Hibernate se publica para todos en estable y permite a cada usuario guardar un promedio de una o dos pesta√±as.  Es decir, tiene en promedio una pesta√±a siempre guardada, o tal vez dos.  Esto ahorra memoria para los usuarios que tienen m√°s de 10 pesta√±as, como hacemos con usted, pero no somos representativos. <br><br>  Le dije c√≥mo el navegador est√° tratando de ayudar, pero ahora cada uno de ustedes puede hacer algo para acelerar el sitio, mejorar su rendimiento.  Puedes venir y hacer lo correcto hoy. <br><br>  Primero debe comprender si hay problemas de memoria. <br><br><img src="https://habrastorage.org/webt/xu/l4/nv/xul4nvtip2nc_mr93zrevltkmye.jpeg"><br><br>  Hay ciertos s√≠ntomas: el sitio comienza a degradarse o aparece desvanecimiento.  Por lo general, esto significa que se activa el recolector de basura, todo el mundo est√° congelado y no se est√° dibujando nada.  O que el sitio simplemente se ralentiza constantemente, como tambi√©n sucede. <br><br>  Necesita comprender si hay un problema.  Observamos lo que sucede con la memoria JS. <br><br><img src="https://habrastorage.org/webt/ui/g4/kz/uig4kzofjrymuq0egjmk-cdt36o.jpeg"><br><br>  Si salta hacia adelante y hacia atr√°s o crece continuamente, este no es un buen s√≠ntoma.  O creciendo continuamente. <br><br><img src="https://habrastorage.org/webt/dt/to/ek/dttoekpmiceh7_6693-n6vrtsjk.jpeg"><br><br>  En este caso, siempre puede tomar una instant√°nea a trav√©s de DevTools.  ¬øAlguien se ha molestado con fugas en JS?  Si alguien no sabe, en JS es muy posible hacer una fuga. <br><br><img src="https://habrastorage.org/webt/da/n_/yh/dan_yhjbdvvilgwgovgzzf6tpgu.jpeg"><br><br>  Por ejemplo, tiene una variable global donde agrega nodos que no se insertan en el √°rbol.  Te olvidas de ellos, y luego resulta que est√°n comiendo cientos de kilobytes, o incluso megabytes. <br><br><img src="https://habrastorage.org/webt/vq/au/ia/vqauia5ylxx_u0xu8arw5ycuvta.jpeg"><br><br>  Estrictamente hablando, no est√° claro qu√© hacer con estos nodos separados.  Puede sacarlos del √°rbol y luego volver a insertarlos.  Porque generalmente el estado de la imagen o algo m√°s permanece con ellos.  Por lo tanto, puede encontrarlos y tratar el problema. <br><br><img src="https://habrastorage.org/webt/w7/a6/cy/w7a6cyfk_5iroc0ybpdk21gym5k.jpeg"><br><br>  Tambi√©n puede ver la asignaci√≥n de memoria en la l√≠nea de tiempo.  Si tiene una descarga sistem√°tica y nunca se limpia, esto tambi√©n es una mala se√±al, creo que todos lo entienden. <br><br><img src="https://habrastorage.org/webt/0m/ol/4w/0mol4w_xotmiebkvvheldcrnokq.jpeg"><br><br>  Y puedes jugar con las capas en tu pesta√±a.  El navegador generalmente trabaja con heur√≠stica en este sentido: trata de separar los objetos que considera que cambian con frecuencia en capas separadas.  Pero a veces no funciona muy bien, y resulta que tiene muchas capas que consumen mucha memoria.  Siempre puede ver si tiene una situaci√≥n as√≠, eliminar algunas capas y descubrir cu√°nta memoria ocupa esta capa. <br><br><img src="https://habrastorage.org/webt/rc/w6/il/rcw6ilo68vshxkgqzq82esab_1y.jpeg"><br><br>  Otra capa de problemas es el rendimiento.  setTimeout es una mala idea para la animaci√≥n.  No funciona de la forma en que el navegador quiere representar la p√°gina.  Es posible que no funcione en fase: el navegador solicit√≥ un marco, pero a√∫n no hay animaci√≥n, porque setTimeout no funcion√≥.  O puede funcionar incluso cuando no necesite dibujar nada.  El usuario se fue, todav√≠a queda algo de trabajo de fondo, pero trabajaremos con √©l a trav√©s de setTimeout. <br><br>  Este es el enfoque correcto que su devoluci√≥n de llamada llamar√° solo cuando el navegador necesite dibujar esta p√°gina. <br><br><img src="https://habrastorage.org/webt/st/nr/dv/stnrdvev7a9sricvyvwivcufg4k.jpeg"><br><br>  Tambi√©n quiero recordarle que si el navegador quiere dibujar 60 cuadros por segundo, significa que para cada cuadro necesita unos 16 ms. <br><br><img src="https://habrastorage.org/webt/zo/fy/es/zofyesewo-ck8wl-z_jlsb6u7ak.jpeg"><br><br>  Y si ocupa la transmisi√≥n principal durante m√°s de 16 ms, entonces tiene un salto de trama garantizado, lo cual es bastante desagradable para el usuario: el sitio comienza a sacudirse.  Por lo tanto, todo el trabajo duro se coloca correctamente en los hilos de fondo, que simplemente devuelve el resultado. <br><br><img src="https://habrastorage.org/webt/mp/rk/ry/mprkryexbai19rd-vhbj_tlbeb4.jpeg"><br><br>  O otro enfoque es utilizar microtasking.  Cree una cola de tareas, procese despu√©s de un tiempo, hasta que termine la cuota, y deje que el navegador dibuje la p√°gina con calma. <br><br><img src="https://habrastorage.org/webt/-0/jr/bn/-0jrbntves41mkelcd56bmgu6uc.jpeg"><br><br>  Naturalmente, puede agregar nuevas capas.  El navegador funciona con heur√≠stica e intenta seleccionar la capa donde lo considera necesario.  Pero si sabe que en este momento este elemento estar√° animado, es mejor decirle al navegador expl√≠citamente que necesita seleccionar este elemento en una capa separada.  Entonces se dibujar√° de manera m√°s eficiente. <br><br><img src="https://habrastorage.org/webt/t9/pf/mr/t9pfmrqa0mhyszxphlkmvxafsag.jpeg"><br><br>  El √∫ltimo enfoque interesante: quejarse.  Si tienes problemas, siempre es √∫til venir y hablar.  Quiz√°s este problema pueda tratarse f√°cilmente y nos ayudaremos mutuamente. <br><br>  Un poco de historia.  Esta caracter√≠stica se est√° trabajando actualmente.  Tenemos un equipo de p√°gina de desarrollo de motores de b√∫squeda.  Tienen una m√©trica como el momento de renderizar el primer fragmento.  Si el usuario ve previamente el primer enlace en el que debe hacer clic y que probablemente le d√© la respuesta correcta, entonces es mucho mejor dibujarlo lo m√°s r√°pido posible.  Vinieron y preguntaron si era posible acelerar de alguna manera esta vez, porque todos se hab√≠an exprimido. <br><br>  Investigamos, realizamos pruebas de rendimiento, hicimos un prototipo y result√≥ que podemos hacerlo si el sitio nos dice qu√© dibujar primero.  Probamos y vemos que mejora nuestro rendimiento.  Ahora estamos probando esto en producci√≥n para un p√∫blico reducido.  Miramos lo que saldr√° de eso.  Est√©n atentos. <br><br>  El mundo no se detiene.  El usuario comienza a querer m√°s y m√°s, los navegadores est√°n cambiando, la web est√° cambiando.  Esto es normal  Intentamos no solo crear funciones de supermercado, sino tambi√©n ayudar al usuario de todas las formas posibles a obtener la mejor experiencia en t√©rminos de consumo de contenido.  Y siempre debe estar preparado para los cambios en cualquier navegador popular.  Naturalmente, si hay problemas, venga, estamos listos para discutir y ayudarnos mutuamente. <br><br>  Aqu√≠ reun√≠ varios enlaces √∫tiles: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hibernate en el navegador Yandex</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pesta√±a descartando en cromo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API del ciclo de vida de la p√°gina</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mida el rendimiento con el modelo RAIL</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ahorro de energ√≠a en Yandex.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Estad√≠sticas de hardware de Steam</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El informe de datos p√∫blicos de Firefox</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/442456/">https://habr.com/ru/post/442456/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442446/index.html">Transformaci√≥n digital en el ejemplo del Call center de cualquier negocio.</a></li>
<li><a href="../442448/index.html">Concurrencia y patrones de error ocultos en el c√≥digo: punto muerto</a></li>
<li><a href="../442450/index.html">Blockchain y datos m√©dicos: c√≥mo funciona</a></li>
<li><a href="../442452/index.html">C√≥mo iniciar sesi√≥n en NodeJS para que los ni√±os del patio respeten</a></li>
<li><a href="../442454/index.html">Magic Leap planea complementar el mundo real con capas digitales</a></li>
<li><a href="../442458/index.html">Abismo o camino artificial desde un piloto RPA hasta la implementaci√≥n en toda la empresa</a></li>
<li><a href="../442460/index.html">Ayudando al proveedor queryable a ordenar cadenas interpoladas</a></li>
<li><a href="../442462/index.html">Errores t√≠picos al trabajar con PostgreSQL. Parte 1</a></li>
<li><a href="../442464/index.html">¬øC√≥mo creci√≥ el "Drag√≥n" tripulado</a></li>
<li><a href="../442466/index.html">¬øC√≥mo promover un juego incremental? Gratis, r√°pido y eficiente *</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>