<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèæ üëå üëàüèº Sistema operacional Haiku: portando aplicativos e criando pacotes üîà üö∂üèº ü•å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No outono deste ano, ap√≥s 6 anos de desenvolvimento, foi lan√ßada a primeira vers√£o beta do "R1 / beta1" do sistema operacional Haiku . Eu acompanho es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistema operacional Haiku: portando aplicativos e criando pacotes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434690/">  No outono deste ano, ap√≥s 6 anos de desenvolvimento, foi lan√ßada a primeira vers√£o beta do "R1 / beta1" do sistema operacional <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Haiku, Sistema operacional, p√°gina Wikipedia.">Haiku</a> .  Eu acompanho este projeto interessante h√° muito tempo, que visa recriar e desenvolver ainda mais o sistema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="BeOS, p√°gina da Wikipedia.">BeOS</a> que existia em 1994-2000.  Portanto, assim que vi not√≠cias sobre o lan√ßamento da vers√£o beta do Haiku nos sites de not√≠cias de TI, decidi imediatamente ver o que seria adicionado a esse t√£o esperado lan√ßamento.  Depois de instalar o sistema na m√°quina virtual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="VirtualBox, site oficial.">VirtualBox</a> e conhecer um pouco da funcionalidade principal, achei que seria bom ajudar a comunidade OpenSource, que est√° desenvolvendo esse sistema operacional, um pouco hoje.  Decidi come√ßar com o que ganhei um pouco de experi√™ncia: portando alguns projetos de jogos. <br><br><div style="text-align:center;"><img title="A √°rea de trabalho do sistema operacional Haiku." src="https://habrastorage.org/webt/aw/eo/qy/aweoqyqziwcmq_qcwirvpf6drno.png"></div><br>  <i>A √°rea de trabalho do sistema operacional Haiku.</i> <br><br>  Mais tarde, tentei refinar alguns aplicativos e bibliotecas existentes.  Esta √© minha pequena atividade em v√°rios reposit√≥rios de c√≥digo aberto aos quais este artigo ser√° dedicado.  Nele, descreverei consistentemente os problemas que encontrei e falarei sobre m√©todos para resolv√™-los.  Tentei enviar a maioria dos patches que foram feitos durante esse trabalho para os projetos existentes, a fim de fornecer suporte ao Haiku e interessar seus desenvolvedores √† exist√™ncia de sistemas operacionais alternativos. <br><a name="habracut"></a><br>  O sistema operacional Haiku usa um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Kernel h√≠brido, p√°gina da Wikipedia.">n√∫cleo h√≠brido</a> , que √© uma implementa√ß√£o da arquitetura de microkernel com a capacidade de carregar dinamicamente os m√≥dulos necess√°rios.  Ele √© baseado no fork do kernel do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="NewOS, site oficial.">NewOS</a> , desenvolvido por um ex-engenheiro da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Be Inc., p√°gina da Wikipedia.">Be Inc.</a>  , Por Travis Geiselbrecht.  Hoje, esse desenvolvedor est√° trabalhando no Google em um kernel chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Zircon, espelho de fontes somente leitura, reposit√≥rio GitHub.">Zircon</a> para o novo sistema operacional <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Google Fuchsia, p√°gina da Wikipedia.">Google Fuchsia</a> , mas isso √© outra hist√≥ria.  Portanto, como os desenvolvedores do Haiku declaram compatibilidade bin√°ria com o BeOS, eles s√£o for√ßados a suportar n√£o dois ramos arquitet√¥nicos familiares, mas tr√™s: x86_64, x86 e x86_gcc2.  A √∫ltima arquitetura √© uma carga de compatibilidade com o compilador da vers√£o antiga do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Cole√ß√£o GNU Compiler, p√°gina Wikipedia.">GCC</a> 2.95.  √â gra√ßas a ela que √© poss√≠vel executar aplicativos escritos para o sistema operacional BeOS original.  Infelizmente, devido a essa carga de compatibilidade, os desenvolvedores do Haiku n√£o podem usar os recursos modernos da linguagem de programa√ß√£o C ++ nas APIs do sistema.  No entanto, eles preparam imagens de instala√ß√£o para apenas duas arquiteturas: x86_64 e x86.  O fato √© que a distribui√ß√£o do Haiku para x86 √© h√≠brida: apesar de todos os componentes do sistema serem constru√≠dos sob x86_gcc2 para compatibilidade bin√°ria, o usu√°rio tem a oportunidade de instalar ou criar aplicativos modernos projetados com compiladores modernos e arquitetura x86 .  A distribui√ß√£o do Haiku para a arquitetura x86_64 √© totalmente de 64 bits e n√£o tem a capacidade de executar aplicativos BeOS e Haiku de 32 bits.  No entanto, h√° compatibilidade no n√≠vel da API, portanto, se voc√™ tiver o c√≥digo-fonte do aplicativo para BeOS ou Haiku x86 em m√£os, poder√° compil√°-lo facilmente no Haiku x86_64 e tudo dever√° funcionar.  Uma imagem do sistema operacional para a arquitetura x86_64 √© recomendada para instala√ß√£o em hardware real, se voc√™ n√£o precisar de suporte para aplicativos BeOS espec√≠ficos ou aplicativos Haiku de 32 bits. <br><br>  Vale dizer que neste sistema operacional h√° suporte parcial para o padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="POSIX, p√°gina da Wikipedia.">POSIX</a> .  Essa base o torna semelhante a sistemas do tipo UNIX e facilita a portabilidade de seu software.  A principal linguagem de programa√ß√£o √© C ++, √© usada ativamente, uma vez que as APIs p√∫blicas do Haiku buscam principalmente um paradigma de programa√ß√£o orientada a objetos.  No entanto, ningu√©m pro√≠be o uso da linguagem de programa√ß√£o C, apenas na maioria dos casos √© necess√°rio escrever as camadas de compatibilidade correspondentes.  A interface do software do sistema operacional √© agrupada em estruturas de sistema separadas, respons√°veis ‚Äã‚Äãpor uma oportunidade espec√≠fica, por exemplo, por uma interface ou suporte de rede.  √â um pouco como o que est√° dispon√≠vel no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Documenta√ß√£o do desenvolvedor da Apple.">macOS</a> ou na estrutura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Todos os m√≥dulos Qt, documenta√ß√£o oficial.">Qt</a> .  Observe que este sistema operacional √© de usu√°rio √∫nico, embora haja algum progresso no sentido de fornecer um modo de trabalho multiusu√°rio para os desenvolvedores do Haiku. <br><br>  N√£o posso deixar de compartilhar com os leitores deste artigo a experi√™ncia positiva do uso do sistema avan√ßado de gerenciamento de janelas de aplicativos que est√° dispon√≠vel no Haiku.  Na minha opini√£o, √© um dos mais convenientes e, a seu modo, √© a marca registrada deste sistema operacional. <br><br><div style="text-align:center;"><img title="Gerenciamento avan√ßado de janelas no sistema operacional Haiku: suporte para ladrilhos e guias." src="https://habrastorage.org/webt/tw/cm/qe/twcmqedw1ofbempjx2ktaxjesmi.png"></div><br>  <i>Gerenciamento avan√ßado de janelas no sistema operacional Haiku: suporte para ladrilhos e guias.</i> <br><br>  O Windows pode ser fixado em guias, como √© feito nos navegadores modernos, anexados um ao outro e redimensionados de maneira conveniente.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Gerenciador de janelas lado a lado, p√°gina da Wikipedia.">Lado a lado simples</a> , transferindo os contextos de alguns aplicativos de uma janela para outra, e os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Replicant, BeOS, site da Wikipedia.">replicantes s√£o</a> suportados.  Voc√™ pode ler mais sobre todos os recursos do sistema de janelas local na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="GUI do Haiku, documenta√ß√£o oficial do Haiku.">documenta√ß√£o oficial</a> , onde todas as teclas de atalho necess√°rias est√£o descritas l√°. <br><br>  N√£o escreverei neste artigo uma vis√£o geral completa de todos os recursos e capacidades do Haiku, pois quem estiver interessado poder√° encontrar facilmente as informa√ß√µes necess√°rias na Internet. <br><br><a name="article-content"></a><h2>  Conte√∫do: </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1. Pacotes e reposit√≥rios no Haiku</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2. Primeiros Passos: Portando Adamant Armor Affection Adventure</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">3. Modifica√ß√£o da porta NXEngine existente (Cave Story)</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">4. Portando o jogo Gish</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">5. O projeto BeGameLauncher, que permite criar rapidamente lan√ßadores para jogos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">6. Portando o Xash3D: Jogo Lend√°rio da Meia-Vida e Complementos Oficiais</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">7. Portando as duas partes do jogo Serious Sam: The First Encounter e The Second Encounter</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">8. Portando o jogo Vangers</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">9. Implementa√ß√£o de di√°logos na biblioteca SDL2 para Haiku</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">10. Portando meu garfo do Cool Reader</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">11. Finaliza√ß√£o do programa KeymapSwitcher</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">12. Conclus√£o</a> <br><br><a name="packages"></a><h2>  1. Pacotes e reposit√≥rios no Haiku </h2><br>  Comparado ao BeOS original, uma inova√ß√£o significativa apareceu no Haiku: um sistema de gerenciamento de pacotes que inclui v√°rias ferramentas para obter e instalar software de v√°rias fontes.  Essas fontes podem ser os reposit√≥rios oficiais do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Reposit√≥rios, documenta√ß√£o oficial do Haiku.">Haiku</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="HaikuPorts, reposit√≥rio GitHub.">HaikuPorts</a> , reposit√≥rios n√£o oficiais e simplesmente pacotes HPKG separados e especialmente preparados.  Tais recursos para instala√ß√£o e atualiza√ß√£o de software s√£o conhecidos no mundo dos sistemas operacionais semelhantes ao Unix, mas agora todo o seu poder e conveni√™ncia chegaram com sucesso ao Haiku, que n√£o pode deixar de agradar aos usu√°rios comuns desse sistema operacional.  Gra√ßas √† infraestrutura criada em torno do gerenciador de pacotes, agora qualquer desenvolvedor pode portar facilmente um novo ou modificar um aplicativo de c√≥digo aberto existente e adicionar os resultados de seu trabalho ao reposit√≥rio de portas do software HaikuPorts, ap√≥s o qual estar√£o dispon√≠veis para todos os usu√°rios do Haiku.  Como resultado, o ecossistema resultante se assemelha ao dos sistemas operacionais macOS com seu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Homebrew, o gerenciador de pacotes ausente para o macOS.">Homebrew</a> , FreeBSD com suas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Sobre o FreeBSD Ports, site oficial do FreeBSD.">portas</a> , Windows com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="MSYS2 √© uma distribui√ß√£o de software e plataforma de constru√ß√£o para Windows.">MSYS2</a> ou Arch Linux com seu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Reposit√≥rio do usu√°rio do Arch Linux.">AUR</a> . <br><br>  Uma ferramenta para criar pacotes e software de portabilidade, chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="HaikuPorter, reposit√≥rio GitHub.">HaikuPorter</a> , √© fornecida separadamente do sistema operacional e √© instalada usando um pequeno <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Documenta√ß√£o do HaikuPorts, p√°gina wiki do GitHub.">manual</a> localizado no reposit√≥rio no GitHub.  Depois de instalar esse utilit√°rio no mesmo GitHub, a √°rvore inteira da receita √© baixada, na qual o desenvolvedor est√° trabalhando.  A receita √© um script comum do Shell com instru√ß√µes nas quais o HaikuPorter coletar√° o pacote HPKG necess√°rio.  Vale ressaltar que a ferramenta em si √© escrita na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Python, Linguagem de programa√ß√£o, P√°gina Wikipedia.">linguagem</a> de programa√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Python, Linguagem de programa√ß√£o, P√°gina Wikipedia.">Python</a> 2, interage estreitamente com o sistema de gerenciamento de pacotes existente e usa a ferramenta padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Git, p√°gina da Wikipedia.">Git</a> internamente para corrigir altera√ß√µes no c√≥digo fonte do software e gerar um conjunto de patches.  Gra√ßas a essa pilha de tecnologias, fazer receitas para criar pacotes HPKG e patches de software na forma de arquivos de conjunto de patches √© muito conveniente e simples.  Na maioria dos casos, tive que usar apenas tr√™s comandos ao trabalhar com o HaikuPorter: <br><br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> hp=<span class="hljs-string"><span class="hljs-string">"haikuporter -S -j4 --get-dependencies --no-source-packages"</span></span> hp libsdl2 hp libsdl2 -c hp libsdl2 -e</code> </pre> <br>  O primeiro comando simplesmente coleta o pacote selecionado, o segundo comando limpa o diret√≥rio de constru√ß√£o e o terceiro cria ou atualiza um conjunto de corre√ß√µes de acordo com suas altera√ß√µes que foram registradas no reposit√≥rio Git do diret√≥rio de trabalho por meio de confirma√ß√µes. <br><br>  Portanto, para publicar um pacote no reposit√≥rio do HaikuPorts e disponibiliz√°-lo a todos os usu√°rios do Haiku, o desenvolvedor deve instalar o HaikuPorter, expandir a √°rvore de receitas, coletar o pacote HPKG localmente e test√°-lo, e depois se comprometer com o garfo da √°rvore de receitas. fa√ßa uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Controle de vers√£o distribu√≠do, solicita√ß√µes Pull, p√°gina da Wikipedia.">solicita√ß√£o Pull</a> no GitHub.  Os desenvolvedores do Haiku devem considerar o trabalho publicado, ap√≥s o qual decidem mesclar suas altera√ß√µes no reposit√≥rio ou envi√°-las para revis√£o.  Se as altera√ß√µes forem aceitas, o mesmo HaikuPorter instalado no servidor de compila√ß√£o coletar√° remotamente o pacote e o publicar√° automaticamente no reposit√≥rio. <br><br>  Um programa especial do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="HaikuDepot, documenta√ß√£o oficial do Haiku.">HaikuDepot</a> foi adicionado √† vers√£o beta do "R1 / beta1" do sistema operacional Haiku, que permite trabalhar com pacotes e reposit√≥rios por meio de uma interface gr√°fica do usu√°rio, em vez dos comandos do console no terminal. <br><br><div style="text-align:center;"><img title="O programa HaikuDepot em execu√ß√£o no sistema operacional Haiku." src="https://habrastorage.org/webt/bv/7d/bt/bv7dbtkhvrdz4nunutpahn4kate.png"></div><br>  <i>O programa HaikuDepot em execu√ß√£o no sistema operacional Haiku.</i> <br><br>  Gra√ßas a essa ferramenta, usu√°rios inexperientes e iniciantes do Haiku podem gerenciar convenientemente sua base de pacotes.  Vale ressaltar que esse aplicativo n√£o √© apenas um shell da GUI sobre o gerenciador de pacotes existente, mas tamb√©m implementa funcionalidades adicionais.  Por exemplo, usu√°rios autorizados podem avaliar e escrever resenhas em pacotes dispon√≠veis para instala√ß√£o.  Al√©m disso, o HaikuDepot possui um site especial do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Site do Haiku Depot.">Haiku Depot</a> que permite exibir altera√ß√µes de pacotes na Internet ou fazer download de pacotes individuais de HPKG. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>&lt;&lt; Pular para o conte√∫do</em></a> <br><br><a name="aaaa"></a><h2>  2. Primeiros Passos: Portando Adamant Armor Affection Adventure </h2><br>  Depois de me familiarizar com a funcionalidade do sistema operacional na m√°quina virtual VirtualBox, decidi avaliar a biblioteca SDL2 nela e portar o jogo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Portando Adamant Armor Affection Adventure no sistema operacional Android.">Adamant Armour Affection Adventure</a> para o Haiku, que escrevi sobre a transfer√™ncia para a plataforma Android anteriormente.  A cria√ß√£o do programa n√£o exigiu nenhuma altera√ß√£o no c√≥digo-fonte, apenas instalei todas as ferramentas, bibliotecas e arquivos de cabe√ßalho necess√°rios no reposit√≥rio e executei o seguinte: <br><br><pre> <code class="bash hljs">cmake -DCMAKE_BUILD_TYPE=Release -DGLES=off -DANDROID=off -DCMAKE_C_FLAGS=<span class="hljs-string"><span class="hljs-string">"-D__linux__"</span></span> -DSDL2_INCLUDE_DIR=`finddir B_SYSTEM_HEADERS_DIRECTORY` -DSDL2_MIXER_INCLUDE_DIR=`finddir B_SYSTEM_HEADERS_DIRECTORY` ../aaaa/src/main/cpp cmake --build .</code> = off -DCMAKE_C_FLAGS = "- D__linux__" -DSDL2_INCLUDE_DIR = `finddir B_SYSTEM_HEADERS_DIRECTORY` -DSDL2_MIXER_INCLUDE_DIR =` finddir B_SYSTEM_HEADERS_DIRECTORY` ../aaaa/src/main/cpp <code class="bash hljs">cmake -DCMAKE_BUILD_TYPE=Release -DGLES=off -DANDROID=off -DCMAKE_C_FLAGS=<span class="hljs-string"><span class="hljs-string">"-D__linux__"</span></span> -DSDL2_INCLUDE_DIR=`finddir B_SYSTEM_HEADERS_DIRECTORY` -DSDL2_MIXER_INCLUDE_DIR=`finddir B_SYSTEM_HEADERS_DIRECTORY` ../aaaa/src/main/cpp cmake --build .</code> </pre><br>  Como o Haiku possui POSIX, o -D__linux__ ou <strong>-D__unix__ define</strong> muitos dos problemas associados √† defini√ß√£o de uma plataforma.  No entanto, vale ressaltar que √© melhor abandonar seu uso e implementar o suporte do Haiku no c√≥digo-fonte do projeto, se houver problemas de constru√ß√£o semelhantes.  Chamar o utilit√°rio de sistema <strong>finddir</strong> com um argumento espec√≠fico permite obter o caminho correto para os arquivos de cabe√ßalho de v√°rias arquiteturas. <br><br>  Ent√£o, executando os comandos acima, compilei um arquivo execut√°vel que funcionava perfeitamente e o jogo funcionava perfeitamente.  Eu pensei que seria legal preparar um pacote auto-suficiente de HPKG com o jogo e, para isso, entrei na Internet em busca das informa√ß√µes necess√°rias.  Ent√£o, eu n√£o conhecia nenhuma ferramenta conveniente para portar software, como o HaikuPorter, sobre o qual escrevi na se√ß√£o acima; portanto, para alcan√ßar meu objetivo, decidi trapacear e desmontar alguns pacotes do sistema para ver como eles est√£o organizados por dentro e por fora. fa√ßa por analogia. <br><br>  Na Internet, encontrei as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Cria√ß√£o de um pacote HPKG, HaikuOS - Wiki em russo.">informa√ß√µes</a> desejadas, ap√≥s as quais descompactei um pacote aleat√≥rio do sistema usando o arquivador <strong>Expander</strong> incorporado ao gerenciador de arquivos local, encontrei o arquivo <strong>.PackageInfo</strong> , editei-o e, de acordo com a estrutura do meu aplicativo, substitui os arquivos.  Depois, executei os comandos para criar o pacote HPKG e instal√°-lo no sistema: <br><br><pre> <code class="bash hljs">package create -C AAAA/ aaaa.pkg pkgman install aaaa.pkg</code> </pre><br>  Infelizmente, o lan√ßamento do jogo no menu "Aplicativos" n√£o teve √™xito.  Ao executar o execut√°vel no terminal, recebi um erro dizendo que era imposs√≠vel encontrar os arquivos de dados necess√°rios para executar e executar o aplicativo.  Nesse caso, se no terminal, v√° para o diret√≥rio do pacote de aplicativos, tudo come√ßou bem.  Isso me levou √† ideia de que, ao iniciar o jogo no menu, √© necess√°rio fazer uma altera√ß√£o for√ßada no diret√≥rio do aplicativo.  Isso pode ser feito com um script do Shell ou alterando a fonte do jogo.  Eu escolhi a segunda op√ß√£o e adicionei algo semelhante a este c√≥digo: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __HAIKU__ </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// To make it able to start from Deskbar chdir(dirname(argv[0])); #endif</span></span></span></span></code> </pre><br>  No in√≠cio da fun√ß√£o start <strong>main ()</strong> , que resolveu completamente esse problema e o pacote acabou sendo vi√°vel.  Nos coment√°rios das not√≠cias sobre o lan√ßamento da vers√£o beta do Haiku no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Lan√ßamento do Haiku R1 / beta1 - C√≥digo aberto - Not√≠cias.">Linux.org.ru,</a> deixei o link para o meu pacote montado e pedi a algu√©m que me enviasse para algumas comunidades de usu√°rios ativas desse sistema operacional e depois fui para a cama. <br><br><div style="text-align:center;"><img title="Porta de jogo Adamant Armor Affection Adventure rodando no Haiku." src="https://habrastorage.org/webt/fw/v-/lg/fwv-lgs1iqaf-bm-gdsoft2dwww.png"></div><br>  <i>Porta de jogo Adamant Armor Affection Adventure rodando no Haiku.</i> <br><br>  De manh√£, uma pessoa usando o apelido <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">3dEyes</a></strong> me escreveu um e-mail.  Como se viu depois, <strong>Gerasim Troeglazov</strong> , um dos desenvolvedores ativos do Haiku e autor da porta do framework Qt para esse sistema operacional, estava escondido atr√°s desse nome.  Ele me mostrou o reposit√≥rio HaikuPorts e me disse como usar o utilit√°rio HaikuPorter.  Al√©m disso, ele escreveu uma receita para a constru√ß√£o do pacote HPKG para a Adamant Armour Affection Adventure e o adicionou ao HaikuDepot. <br><br>  Ap√≥s analisar todas as altera√ß√µes feitas por esse desenvolvedor, notei que havia algumas desvantagens no meu pacote montado manualmente, por exemplo, as configura√ß√µes n√£o foram salvas, pois os diret√≥rios montados dos pacotes instalados n√£o tinham recursos de grava√ß√£o.  Esse problema com a grava√ß√£o de configura√ß√µes ou salvamentos em seu pacote foi resolvido de forma elegante com a ajuda de links simb√≥licos em um diret√≥rio especial acess√≠vel para grava√ß√£o e destinado a salvar dados do usu√°rio.  Meu pacote tamb√©m n√£o tinha seu pr√≥prio √≠cone original. <br><br>  Al√©m disso, aprendi que o Haiku n√£o possui acelera√ß√£o de hardware de gr√°ficos 3D e o mesmo OpenGL √© renderizado programaticamente usando a energia da CPU.  Para aplica√ß√µes gr√°ficas pesadas, isso obviamente n√£o √© bom, mas para jogos mais antigos isso √© mais do que suficiente.  At√© decidi verificar especificamente o pacote do jogo e instalei o Haiku no meu laptop antigo, ou seja, em hardware real.  Para minha surpresa, a imagem Adamant Armor Affection Adventure foi renderizada com tanta rapidez que, se eu n√£o soubesse da falta de acelera√ß√£o de hardware, n√£o teria notado que a renderiza√ß√£o foi feita pelo meu processador. <br><br>  <strong>Fonte do projeto: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Adamant Armor Affection Adventure, reposit√≥rio GitHub.">https://github.com/EXL/AdamantArmorAffectionAdventure</a></strong> <br><br>  Adiei a cria√ß√£o manual de pacotes HPKG at√© tempos melhores e mudei completamente para usar a ferramenta HaikuPorter e escrever receitas.  Mas √†s vezes h√° situa√ß√µes em que √© necess√°ria a reconstru√ß√£o manual do pacote.  Por exemplo, se o HaikuPorter definir a vers√£o noturna do Haiku no arquivo <strong>.PackageInfo</strong> muito alta e o pacote precisar ser testado na vers√£o de lan√ßamento do sistema operacional.  Vale a pena notar que foi gra√ßas √† capacidade de resposta e √† experi√™ncia do Gerasim que eu pude entender as muitas sutilezas da cria√ß√£o de pacotes para o sistema operacional Haiku e continuei meu trabalho ainda mais. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>&lt;&lt; Pular para o conte√∫do</em></a> <br><br><a name="nxengine"></a><h2>  3. Modifica√ß√£o da porta NXEngine existente (Cave Story) </h2><br>  Fiquei incrivelmente surpreso ao encontrar uma receita no reposit√≥rio HaikuPorts que referenciava meu fork do mecanismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Cave Story (Doukutsu Monogatari) via NXEngine para v√°rias plataformas.">NXEngine para o jogo Cave Story</a> , que eu estava <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Cave Story (Doukutsu Monogatari) via NXEngine para v√°rias plataformas.">analisando</a> no meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Cave Story (Doukutsu Monogatari) via NXEngine para v√°rias plataformas.">blog h√°</a> muito tempo.  A receita e os patches foram preparados por um desenvolvedor chamado <strong>Zolt√°n Mizsei</strong> , que usa o apelido <strong>extrowerk</strong> e √© um mantenedor ativo de muitos pacotes para o Haiku. <br><br>  Uma an√°lise superficial, instalando o pacote e iniciando o aplicativo, revelou os mesmos problemas que descrevi na se√ß√£o anterior deste artigo: o salvamento do jogo n√£o funcionou, as configura√ß√µes tamb√©m n√£o foram salvas e o pacote n√£o tinha o √≠cone original.  Decidi corrigir essas defici√™ncias e comecei a trabalhar no patch, integrando primeiro todas as id√©ias da extrowerk.  Eu escrevi o <strong>Makefile</strong> original para o sistema operacional Haiku e corrigi a grava√ß√£o e salvou v√°rios dados do usu√°rio. <br><br><div style="text-align:center;"><img title="Jogo Port of the Cave Story baseado no mecanismo NXEngine, lan√ßado no sistema operacional Haiku." src="https://habrastorage.org/webt/cu/fy/xs/cufyxskkttfmgcra7wcq9blp88g.png"></div><br>  <i>Jogo Port of the Cave Story baseado no mecanismo NXEngine, lan√ßado no sistema operacional Haiku.</i> <br><br>  Como o jogo assumiu as vers√µes em russo e ingl√™s com um conjunto diferente de arquivos execut√°veis ‚Äã‚Äãe arquivos de dados, decidi criar um pacote comum que combina duas vers√µes ao mesmo tempo e seleciona automaticamente a correta com base no idioma do sistema escolhido pelo usu√°rio.  Isso foi implementado pelo script Shell mais simples: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash if [[ `locale -l` == ru* ]] ; then EXE="`finddir B_SYSTEM_APPS_DIRECTORY`/NXEngine/RUS/Cave Story" else EXE="`finddir B_SYSTEM_APPS_DIRECTORY`/NXEngine/ENG/Cave Story" fi "$EXE" $@</span></span></code> </pre><br>  Este script √© iniciado quando um item de jogo √© selecionado no menu "Aplicativos" e determina a localidade atual do sistema.  Caso o usu√°rio escolha o russo como idioma do sistema, a vers√£o em russo do jogo iniciar√° e, em todos os outros casos, a vers√£o em ingl√™s. <br><br>  Mas com a cria√ß√£o do √≠cone original para o aplicativo eu tive que mexer bastante.  O fato √© que no sistema operacional Haiku s√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Imagens de 500 bytes: O formato do √≠cone do vetor Haiku.">permitidos</a> apenas √≠cones vetoriais do formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Imagens de 500 bytes: O formato do √≠cone do vetor Haiku.">HVIF</a> especial, que s√£o configurados como atributos do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Seja Sistema de Arquivos, p√°gina da Wikipedia.">sistema de</a> arquivos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Seja Sistema de Arquivos, p√°gina da Wikipedia.">Be File System</a> .  Na documenta√ß√£o oficial, existem dois manuais grandes sobre como criar seus pr√≥prios √≠cones para aplicativos: o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Diretrizes para √≠cones, Desenvolvimento, site oficial do Haiku.">primeiro manual</a> descreve o estilo de desenho e design e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Icon-O-Matic, documenta√ß√£o oficial do Haiku.">segundo manual</a> detalha como usar o programa de sistema <strong>Icon-O-Matic</strong> projetado para criar √≠cones. <br><br>  O Icon-O-Matic permite importar os arquivos SVG mais simples e exportar o √≠cone resultante para o formato necess√°rio para o HaikuPorter, chamado HVIF RDef e representando o mesmo HVIF, mas convertido em uma exibi√ß√£o de texto.  Os arquivos RDef podem conter n√£o apenas imagens, mas tamb√©m informa√ß√µes adicionais, por exemplo, a vers√£o do aplicativo e sua descri√ß√£o.  De certa forma, esses arquivos se assemelham aos arquivos RES usados ‚Äã‚Äãno Windows.  Os seguintes comandos na receita compilam os arquivos RDef e configuram o resultado para atributos especiais: <br><br><pre> <code class="bash hljs">rc nxengine-launcher.rdef resattr -o <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$appsDir</span></span></span><span class="hljs-string">/NXEngine/Cave Story"</span></span> nxengine-launcher.rsrc addResourcesToBinaries <span class="hljs-variable"><span class="hljs-variable">$sourceDir</span></span>/build/nxengine-rus.rdef <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$appsDir</span></span></span><span class="hljs-string">/NXEngine/RUS/Cave Story"</span></span></code> </pre><br>  Al√©m disso, a fun√ß√£o <strong>addResourcesToBinaries √©</strong> definida nas receitas, o que permite automatizar este trabalho.  H√° um problema, mas muito s√©rio, com o Icon-O-Matic: os arquivos SVG salvos pelo popular editor de vetores do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Inkscape, site oficial.">Inkscape</a> n√£o abrem ou s√£o importados sem o suporte de alguns recursos necess√°rios, por exemplo, gradientes.  Portanto, em uma miss√£o de aventura com a convers√£o de imagens raster em vetor, usando v√°rios conversores online e offline pagos e gratuitos e abrindo os arquivos SVG resultantes no Icon-O-Matic, falhei miseravelmente.  Mais tarde, resolvi o problema de abrir arquivos SVG e encontrei uma solu√ß√£o alternativa, mas escreverei sobre isso abaixo.  Enquanto isso, decidi aproveitar os recursos padr√£o do Icon-O-Matic e desenhar o √≠cone sozinho.  Ap√≥s meia hora de c√≥pia impressa de pixels, obtive a seguinte arte: <br><br><div style="text-align:center;"><img title="O programa Icon-O-Matic padr√£o no sistema operacional Haiku." src="https://habrastorage.org/webt/3d/zw/pk/3dzwpkyex_ccbhffzoqovf9ioue.png"></div><br>  <i>O programa Icon-O-Matic padr√£o no sistema operacional Haiku.</i> <br><br>  Sim, usei um editor de vetores para criar uma imagem no g√™nero Pixel Art.  Na minha vis√£o amadora de um homem pouco versado em arte, ficou muito bem.  Salvei este √≠cone no formato necess√°rio, preparei todas as altera√ß√µes, atualizei a receita e enviei tudo para o reposit√≥rio HaikuPorts. <br><br>  <strong>C√≥digo fonte do projeto: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="NXEngine, reposit√≥rio GitHub.">https://github.com/EXL/NXEngine</a></strong> <br><br>  Enviei os pacotes resultantes apenas por precau√ß√£o e para o site de f√£s do jogo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Download Hist√≥ria da Caverna, Hist√≥ria da Caverna (Doukutsu Monogatari), Um Site de Tributo.">Cave Story (Doukutsu Monogatari)</a> , cuja administra√ß√£o adicionou o sistema operacional Haiku √† se√ß√£o de downloads. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>&lt;&lt; Pular para o conte√∫do</em></a> <br><br><a name="gish"></a><h2>  4. Portando o jogo Gish </h2><br>  O pr√≥ximo projeto que decidi transferir para o Haiku foi o jogo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Portando o Gish para o sistema operacional Android: usando as bibliotecas OpenAL e GL4ES.">Gish</a> , que eu j√° havia portado para o Android.  O reposit√≥rio HaikuPorts tinha uma receita para uma implementa√ß√£o gratuita inacabada de um jogo chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Freegish, p√°gina da Wikipedia.">Freegish</a> , ent√£o decidi adicionar o jogo original tamb√©m, mas sem arquivos de dados, pois eles, ao contr√°rio do mecanismo, s√£o entregues separadamente e n√£o s√£o de todo gratuitos. <br><br><div style="text-align:center;"><img title="Porta de jogo Gish em execu√ß√£o no sistema operacional Haiku." src="https://habrastorage.org/webt/yu/dm/r9/yudmr9o3bxzmrc5a6shyyxjvj_w.jpeg"></div><br>  <i>Porta de jogo Gish em execu√ß√£o no sistema operacional Haiku.</i> <br><br>  N√£o tive problemas especiais com a portabilidade deste jogo.  O arquivo execut√°vel foi compilado imediatamente ap√≥s a execu√ß√£o dos seguintes comandos de compila√ß√£o: <br><br><pre> <code class="bash hljs">cmake gish/src/main/cpp/ \ -DGLES=0 \ -DANDROID=0 \ -DSDL2_INCLUDE_DIR=`finddir B_SYSTEM_HEADERS_DIRECTORY` \ -DCMAKE_C_FLAGS=<span class="hljs-string"><span class="hljs-string">"`sdl2-config --cflags` -D__linux__"</span></span> \ -DCMAKE_BUILD_TYPE=Release cmake --build .</code> </pre><br>  Em seguida, implementei a capacidade de iniciar o jogo no menu "Aplicativos" e forneci suporte para salvar dados do usu√°rio em um diret√≥rio acess√≠vel para grava√ß√£o e destinado a isso: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHaikuSettingsPath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> path[PATH_MAX]; find_directory(B_USER_SETTINGS_DIRECTORY, <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, path, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(path)); <span class="hljs-built_in"><span class="hljs-built_in">strcat</span></span>(path, <span class="hljs-string"><span class="hljs-string">"/Gish/"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strdup(path); }</code> </pre><br>  A fun√ß√£o <strong>getHaikuSettingsPath ()</strong> usando a fun√ß√£o <strong>find_directory ()</strong> da API do Haiku forma o caminho completo para o diret√≥rio que eu preciso. <br><br>  <strong>C√≥digo fonte do projeto: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Gish, reposit√≥rio GitHub.">https://github.com/EXL/Gish</a></strong> <br><br>  Faltava resolver a seguinte pergunta: como o usu√°rio deveria escolher o diret√≥rio com os arquivos originais do jogo Gish?  Voc√™ poderia tentar resolver o problema usando scripts do Shell e o utilit√°rio do sistema de <strong>alerta</strong> , mas decidi abordar esse problema mais detalhadamente e implementar um conveniente iniciador de GUI usando a API Haiku e a estrutura do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Kit de interface, documenta√ß√£o oficial do Haiku.">Kit de interface</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>&lt;&lt; Pular para o conte√∫do</em></a> <br><br><a name="launcher"></a><h2>  5. O projeto BeGameLauncher, que permite criar rapidamente lan√ßadores para jogos </h2><br>  Foi decidido escrever meu projeto BeGameLauncher em C ++ do antigo padr√£o de 1998, usando as ferramentas nativas do sistema operacional para criar aplicativos com uma interface gr√°fica do usu√°rio.  Como os nomes de muitos programas do Haiku e BeOS come√ßam com o prefixo "Be", tamb√©m decidi escolher esse nome para o projeto.  Decidi come√ßar familiarizando-me com a estrutura do Kit de Interface, que faz parte da API do Haiku.  Al√©m da documenta√ß√£o bastante detalhada no site oficial do Haiku, encontrei dois <strong>cursos de</strong> aula simplesmente excelentes do <strong>DarkWyrm</strong> que permitem que um desenvolvedor iniciante entenda rapidamente como determinadas classes do sistema funcionam.  O primeiro curso √© chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Aprendendo a programar com o Haiku, site oficial do Haiku.">Aprendendo a Programar com o Haiku</a> e, no in√≠cio, aborda os conceitos b√°sicos da linguagem de programa√ß√£o C ++, que ser√° muito √∫til para iniciantes.  O segundo curso √© chamado de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Programa√ß√£o com o Haiku, site oficial do Haiku.">Programa√ß√£o com o Haiku</a> e √© direcionado para aqueles que j√° conhecem o C ++ e possuem conhecimentos b√°sicos dessa linguagem.  Ambos os cursos falam sobre os mais diversos aspectos da API do Haiku e, portanto, ser√£o muito √∫teis para quem deseja come√ßar a criar aplicativos para esse sistema operacional. <br><br>  Depois de ler este excelente material na diagonal, fiz uma impress√£o geral da API do Haiku e comecei a pensar nos meus pr√≥ximos passos.  Eu j√° tinha alguma experi√™ncia no desenvolvimento de aplicativos usando a estrutura Qt, que tamb√©m √© escrita na linguagem de programa√ß√£o C ++ e usa o paradigma de programa√ß√£o orientada a objetos.  Portanto, a API do Haiku √© muito semelhante a ela, exceto pela falta de um sistema de sinal e slots, ent√£o muitas vezes tra√ßarei alguns paralelos e compara√ß√µes com o Qt.  Al√©m disso, vale ressaltar o uso do princ√≠pio de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Programa√ß√£o orientada a eventos, p√°gina da Wikipedia.">programa√ß√£o orientada</a> a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Programa√ß√£o orientada a eventos, p√°gina da Wikipedia.">eventos</a> , comum na API do Haiku, que permite que v√°rias entidades interajam atrav√©s da transmiss√£o de eventos ou mensagens.  Um an√°logo da classe <strong>QEvent</strong> aqui √© a classe <strong>BMessage</strong> , em torno da qual o sistema de intera√ß√£o de objetos √© constru√≠do.  Uma inst√¢ncia da classe <strong>BMessage</strong> geralmente obt√©m um n√∫mero exclusivo que permite identificar o remetente e sua a√ß√£o em um filtro de evento comum. <br><br>  Para o meu projeto, tive que escolher as classes apropriadas da API do Haiku que me permitiriam implementar a funcionalidade pretendida.  Primeiramente, para iniciar um aplicativo externo, era necess√°rio encontrar um an√°logo da classe <strong>QProcess</strong> ou da fun√ß√£o <strong>execve ()</strong> POSIX, que, ali√°s, tamb√©m funciona bem no sistema operacional Haiku, no entanto, decidi que seria prefer√≠vel usar ferramentas nativas, mas apenas no caso o caso deixou a possibilidade de iniciar aplicativos por meio da fun√ß√£o POSIX.  A classe de comunica√ß√£o entre processos <strong>BRoster foi</strong> √≥tima para esse fim.  Ele encontrou um m√©todo <strong>Launch ()</strong> adequado que permite especificar o caminho para o arquivo execut√°vel e passar argumentos para ele.  Como o iniciador deve salvar alguns par√¢metros, por exemplo, um diret√≥rio selecionado pelo usu√°rio com arquivos de dados do jogo, eu precisava de uma classe que fa√ßa tudo isso.  No Qt, essa classe √© chamada <strong>QSettings</strong> e, na API do Haiku, como o Gerasim me solicitou, existe uma classe <strong>BMessage que</strong> eu j√° <strong>conhe√ßo</strong> , que possui um recurso muito √∫til.  O fato √© que as informa√ß√µes dessa classe podem ser facilmente serializadas e, por exemplo, salvas no disco.  Isso √© muito conveniente e costuma ser usado para registrar quaisquer dados do usu√°rio em programas, e foi por isso que escolhi essa classe para salvar as configura√ß√µes do meu projeto para implementar os lan√ßadores.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infelizmente, a API Haiku n√£o encontrou um an√°logo da classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QDebug</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ent√£o acabei de enviar a sa√≠da de depura√ß√£o para mim durante o processo de desenvolvimento para </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stderr</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usando a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun√ß√£o fprintf ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da linguagem de programa√ß√£o C padr√£o:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// .h #if __cplusplus &gt;= 201103L #define BeDebug(...) fprintf(stderr, __VA_ARGS__) #else extern void BeDebug(const char *format, ...); #endif // __cplusplus == 201103L // .cpp #if __cplusplus &lt; 201103L #include &lt;cstdarg&gt; void BeDebug(const char *format, ...) { va_list args; va_start(args, format); vfprintf(stderr, format, args); va_end(args); } #endif</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agrupei</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> essa fun√ß√£o em uma entidade </font><strong><font style="vertical-align: inherit;">BeDebug () que √©</font></strong><font style="vertical-align: inherit;"> conveniente para mim </font><font style="vertical-align: inherit;">, que, dependendo do padr√£o de idioma selecionado, √© uma macro ou tamb√©m uma fun√ß√£o. Isso foi feito devido ao fato de o C ++ 98 n√£o suportar macros com um n√∫mero vari√°vel de argumentos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A estrutura Qt tamb√©m possui uma classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QMessageBox</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √∫til, </font><font style="vertical-align: inherit;">atrav√©s da qual voc√™ pode criar uma caixa de di√°logo modal com qualquer informa√ß√£o que o usu√°rio deva prestar aten√ß√£o, por exemplo, um erro ou aviso. A API do Haiku possui uma classe </font><strong><font style="vertical-align: inherit;">BAlert</font></strong><font style="vertical-align: inherit;"> para esse fim </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuja implementa√ß√£o √© um pouco diferente do que est√° dispon√≠vel no Qt. Por exemplo, um objeto dessa classe deve ser criado no heap, e n√£o na pilha, porque ap√≥s alguma a√ß√£o do usu√°rio, ele deve se excluir. Quanto √†s outras classes da interface gr√°fica, aqui n√£o tive absolutamente nenhuma dificuldade e encontrei tudo o que precisava sem problemas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora eu deveria ter pensado sobre a arquitetura simples do projeto. Decidi me concentrar na cria√ß√£o de uma biblioteca est√°tica, na qual haveria duas classes projetadas para herdar suas pr√≥prias classes derivadas. A primeira e mais importante classe, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeLauncherBase</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, √© respons√°vel pela cria√ß√£o da janela principal do iniciador, pela transfer√™ncia de todos os par√¢metros do usu√°rio e pela capacidade de adicionar seus pr√≥prios elementos da GUI. </font><font style="vertical-align: inherit;">A segunda classe, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeAboutWindow</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √© simplesmente respons√°vel por abrir a caixa de di√°logo "Sobre o programa ..." com informa√ß√µes exibidas em uma janela separada. </font><font style="vertical-align: inherit;">Assim, um programador precisa executar duas etapas simples para criar seu iniciador, por exemplo, para jogar Gish:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GishAboutWindow</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BeAboutWindow { ... }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GishLauncher</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BeLauncherBase { ... }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ BeApp *beApp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BeApp(SIGNATURE); GishLauncher *gishLauncher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GishLauncher(BeUtils::GetPathToHomeDir()); beApp-&gt;SetMainWindow(gishLauncher); beApp-&gt;Run(); <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> beApp; beApp = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro, crie uma fun√ß√£o inicial apropriada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, em segundo lugar, simplesmente herde das duas classes acima e implemente os m√©todos necess√°rios nelas. </font><font style="vertical-align: inherit;">Depois disso, compilamos o arquivo C ++ resultante com um link para minha biblioteca est√°tica e nosso iniciador para o jogo Gish est√° pronto.</font></font><br><br><div style="text-align:center;"><img title=" ' ...'     Gish." src="https://habrastorage.org/webt/k1/hy/iw/k1hyiwbvnz6gnxaar4p7k2tnsso.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di√°logo "Sobre o programa ..." no iniciador do porto do jogo Gish.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Em seguida, pensei em como transferir par√¢metros do meu iniciador para o pr√≥prio mecanismo ou para o arquivo execut√°vel do jogo. Vi apenas duas maneiras de resolver esse problema. A primeira maneira foi alterar as vari√°veis ‚Äã‚Äãde ambiente. Na pr√°tica, depois de clicar no bot√£o "Executar", o iniciador simplesmente coloca todos os par√¢metros nas vari√°veis ‚Äã‚Äãde ambiente, chamando a fun√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setenv ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e o mecanismo do jogo l√™ esses par√¢metros usando a fun√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getenv ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que parece bastante simples. O √∫nico problema que poderia surgir aqui era na classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BRoster</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e seu m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: N√£o sabia se o aplicativo iniciado com a ajuda dessa classe herdaria todas as vari√°veis ‚Äã‚Äãde ambiente definidas no iniciador. Ap√≥s um pequeno experimento, a heran√ßa das vari√°veis ‚Äã‚Äãde ambiente foi confirmada e eu implementei completamente esse m√©todo no meu projeto. A segunda maneira de resolver o problema era definir par√¢metros especiais da linha de comando. Na pr√°tica, o iniciador simplesmente coloca todas as configura√ß√µes nos argumentos apropriados e chama o aplicativo execut√°vel com elas. Mas o mecanismo de jogo j√° tinha que process√°-los de forma independente, o que criou algumas dificuldades. Por exemplo, se o jogo n√£o assumisse a possibilidade de especificar o caminho para os arquivos do jogo por meio de par√¢metros da linha de comando, seria necess√°rio modificar o analisador de argumentos no pr√≥prio mecanismo. Apesar desses problemas,Eu implementei esse modo de intera√ß√£o e, como resultado, tive uma grande oportunidade de combinar tudo. Isso me permitiu criar uma string para especificar argumentos do usu√°rio em alguns lan√ßadores.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando tudo foi projetado, decidi escolher um sistema de montagem para o meu projeto. Apenas duas op√ß√µes foram consideradas: Makefile "on steroids" e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="CMake, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No primeiro caso, os desenvolvedores do sistema operacional Haiku prepararam um pacote conveniente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de mecanismo de makefile</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no qual coletaram todos os recursos necess√°rios que um desenvolvedor enfrentaria ao come√ßar a escrever um aplicativo na API do Haiku, por exemplo, gera√ß√£o autom√°tica de tradu√ß√£o e compila√ß√£o de recursos de aplicativos. Mas eu n√£o sou um dos que procuram maneiras f√°ceis, ent√£o escolhi o CMake e transferi parte do trabalho do pacote makefile-engine para ele. Como resultado, voc√™ pode ver o script de montagem monstruoso resultante no reposit√≥rio do projeto, um link para o qual deixarei abaixo.</font></font><br><br><div style="text-align:center;"><img title="    Gish  Haiku." src="https://habrastorage.org/webt/jy/fw/wh/jyfwwhdhgxzofr_3cczuxxvmsig.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Captura de tela do iniciador de portas de jogos Gish para o Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gostaria de escrever algumas palavras sobre a localiza√ß√£o de aplicativos. Na estrutura Qt, existe uma conveniente fun√ß√£o de empacotador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para isso </font><font style="vertical-align: inherit;">, dois utilit√°rios auxiliares </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lrelease</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lupdate</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , envolvidos na gera√ß√£o de arquivos de tradu√ß√£o. Incluso na estrutura, existe ainda um programa </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qt Linguist</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especial, </font><font style="vertical-align: inherit;">com uma conveniente interface gr√°fica de usu√°rio projetada para tradutores. Na API do Haiku, as ferramentas de localiza√ß√£o de aplicativos s√£o menos convenientes e mais arcaicas. Prop√µe-se quebrar as linhas que precisam ser traduzidas em uma macro especial </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B_TRANSLATE ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e adicionar a defini√ß√£o </font><strong><font style="vertical-align: inherit;">B_TRANSLATION_CONTEXT</font></strong><font style="vertical-align: inherit;"> ao arquivo de origem</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que separa um grupo de cadeias de caracteres traduz√≠veis de outro. Depois disso, algo muito estranho precisa ser feito: defina o pr√©-processador do compilador com o sinalizador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-DB_COLLECTING_CATKEYS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em absolutamente todos os arquivos de origem do projeto, fa√ßa alguma m√°gica com o utilit√°rio </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, finalmente, obtenha um enorme arquivo PRE. √â com esse arquivo que o utilit√°rio </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectcatkeys</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funcionar√° </font><font style="vertical-align: inherit;">, o que j√° criar√° arquivos CATKEYS tradutores leg√≠veis por humanos e f√°ceis de editar. Ap√≥s localizar as seq√º√™ncias, voc√™ precisa usar o utilit√°rio </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linkcatkeys</font></font></strong> ,       .  ,         . ,    Haiku API       . ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Localizing an application, Official Haiku site.">Localizing an application</a> ,            .   ,   BeOS    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Locale Kit, Official Haiku documentation.">Locale Kit</a>        Haiku. <br><br>             C++.  ,   Haiku    Qt,   HaikuPorts   IDE,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Qt Creator, Wikipedia page.">Qt Creator</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="KDevelop, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KDevelop</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al√©m disso, existe uma porta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Java virtual machine, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que permite usar IDEs gravados na linguagem de programa√ß√£o Java, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="NetBeans, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBeans</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="IntelliJ IDEA, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IntelliJ IDEA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Optei pelo ambiente de desenvolvimento do Qt Creator, especialmente porque em suas vers√µes mais recentes h√° uma an√°lise de alta qualidade do c√≥digo usando o analisador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LibClang</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que funciona com </font><strong><font style="vertical-align: inherit;">muito</font></strong><font style="vertical-align: inherit;"> mais precis√£o e rapidez do que o analisador padr√£o.</font></font><br><br><div style="text-align:center;"><img title="   Qt Creator,     Haiku." src="https://habrastorage.org/webt/sk/jg/he/skjgheksjieuiyylk7uhe1_dk6e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O ambiente de desenvolvimento integrado Qt Creator em execu√ß√£o no sistema operacional Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Em termos de IDEs conhecidos e de plataforma cruzada no Haiku, est√° tudo bem. Mas e as solu√ß√µes exclusivas? N√£o posso deixar de mencionar um projeto muito interessante, patrocinado pela </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DarkWyrm</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e que atualmente ap√≥ia </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adam Fowler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , chamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Paladin, Official GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paladin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este programa torna o editor de texto </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pe</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dispon√≠vel na distribui√ß√£o do sistema operacional </font><font style="vertical-align: inherit;">quase um IDE real.</font></font><br><br><div style="text-align:center;"><img title="   Paladin  Haiku,    HaikuPorts." src="https://habrastorage.org/webt/xp/ad/jp/xpadjpfvl4sfridhlc4wob9s3a0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paladin IDE para Haiku instalado a partir do reposit√≥rio HaikuPorts.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Usando o mosaico integrado no sistema de janelas Haiku, voc√™ pode anexar a janela do Paladin na lateral do editor Pe e adicionar um terminal. Tamb√©m no reposit√≥rio HaikuPorts, existe um conveniente editor de texto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Koder, Official GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que se assemelha ao popular programa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Notepad++, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notepad ++</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para Windows e tamb√©m se baseia na experi√™ncia do projeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Scintilla, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scintilla</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para o meu aplicativo, criei um arquivo PLD do projeto e agora qualquer desenvolvedor que use o Paladin IDE pode facilmente abrir meu projeto neste programa.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando o ambiente de desenvolvimento do Qt Creator foi configurado e pronto para come√ßar, comecei a perceber todos os recursos planejados. O primeiro problema que encontrei foi relacionado a controles de dimensionamento ao alterar o tamanho da fonte do sistema. Inicialmente, no BeOS, todo o c√≥digo de posicionamento de elemento da GUI era definido explicitamente em coordenadas. Foi muito inconveniente, detalhado e criou uma enorme pilha de problemas, por exemplo, com a mesma altera√ß√£o no tamanho da fonte, toda a forma do aplicativo foi dispersa e tornou-se inutiliz√°vel. Felizmente, o Haiku tentou resolver esse problema e adicionou a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Layout API, Official Haiku documentation."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de layout</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que faz parte da estrutura do Kit de interface.</font></font><br><br><div style="text-align:center;"><img title="  Layout API          Haiku." src="https://habrastorage.org/webt/qt/m1/te/qtm1tehjp2cilj-wfflmps8hi8m.png"></div><br> <i>  Layout API          Haiku.</i> <br><br>                Layout API,        .    Haiku      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Laying It All Out, Official Haiku site.">Laying It All Out</a> ,       ,           . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro problema foi identificado por Gerasim quando ele tentou usar minha biblioteca para criar um iniciador para o jogo que ele portava. O fato √© que muitas vezes recorri ao c√≥digo fonte do pr√≥prio sistema operacional Haiku para implementar v√°rias funcionalidades. Em particular, </font><font style="vertical-align: inherit;">encontrei </font><font style="vertical-align: inherit;">um exemplo de como usar o m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em um objeto da classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BRoster</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O problema se manifestou no fato de que este exemplo estava incorreto e o mecanismo de jogo portado pela Gerasim n√£o p√¥de analisar corretamente os argumentos definidos pelo iniciador. Tendo estudado o c√≥digo-fonte do Haiku mais profundamente, consegui descobrir que o primeiro argumento, que deve conter o caminho completo para o arquivo execut√°vel, </font><font style="vertical-align: inherit;">n√£o precisa ser definido explicitamente </font><font style="vertical-align: inherit;">no caso do m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pois ele ser√° definido automaticamente.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Error const char* args[] = { "/bin/open", fURL.String(), NULL }; be_roster-&gt;Launch(&amp;ref, 2, args); // Good const char* args[] = { fURL.String(), NULL }; be_roster-&gt;Launch(&amp;ref, 1, args); // See "src/kits/app/Roster.cpp", BRoster::ArgVector::Init() method: if (error == B_OK) { fArgs[0] = fAppPath.Path(); // &lt;= Here if (argc &gt; 0 &amp;&amp; args != NULL) { for (int i = 0; i &lt; argc; i++) fArgs[i + 1] = args[i]; if (hasDocArg) fArgs[fArgc - 1] = fDocPath.Path(); } // NULL terminate (eg required by load_image()) fArgs[fArgc] = NULL; }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A documenta√ß√£o para o m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o diz que o primeiro argumento n√£o √© necess√°rio, e provavelmente √© por isso que o desenvolvedor escreveu esse c√≥digo incorretamente. Corrigi esse erro no meu projeto e o problema do Gerasim resolveu sozinho. Mas e esse pequeno erro no pr√≥prio sistema operacional Haiku? Eu decidi consert√°-la tamb√©m. Felizmente, acabou sendo muito f√°cil de fazer! Voc√™ precisa fazer login usando o GitHub no recurso Gerrit do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Haiku Code Review, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haiku Code Review</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , adicionar sua chave p√∫blica SSH, bifurcar o c√≥digo-fonte do Haiku, criar um commit commit e enviar o patch resultante √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Code review, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revis√£o do c√≥digo para</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desenvolvedores privilegiados:</font></font><br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ssh://EXL@git.haiku-os.org/haiku --depth=1 -b master &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> haiku git commit git push origin master:refs/<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>/master</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ precisar atualizar os patches que j√° foram enviados, antes de enviar confirma√ß√µes alteradas ou novas, adicione o ID que o servi√ßo Haiku Code Review nos forneceu no final da mensagem de confirma√ß√£o. Ap√≥s o envio do patch, os desenvolvedores do Haiku devem aprov√°-lo, rejeit√°-lo ou envi√°-lo para revis√£o. No meu caso, a corre√ß√£o foi aceita imediatamente e esse pequeno defeito agora est√° corrigido em todos os lugares. Se voc√™ precisar testar seus patches antes de envi√°-los para o reposit√≥rio, tente </font><font style="vertical-align: inherit;">compilar um aplicativo separado </font><font style="vertical-align: inherit;">usando o utilit√°rio </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jam</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© uma bifurca√ß√£o do sistema de </font><font style="vertical-align: inherit;">compila√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Perforce Jam and Haiku Jam, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perforce Jam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e √© usado para criar toda a base de c√≥digos do sistema operacional Haiku. O reposit√≥rio de c√≥digo-fonte possui o arquivo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadMe.Compiling.md</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o que ajudar√° voc√™ a lidar com todos os truques de compila√ß√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao finalizar meu projeto, descobri o motivo pelo qual o programa Icon-O-Matic n√£o abre arquivos SVG criados usando o editor de vetores Inkscape. O problema √© que o Icon-O-Matic n√£o pode processar o atributo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewBox</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no entanto, se voc√™ encontrar um arquivo SVG simples sem esse atributo, edite-o com o Inkscape e salve-o como um </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquivo SVG comum</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ele ser√° aberto no Icon-O -Matic. Portanto, coloquei no meu reposit√≥rio um arquivo SVG especialmente preparado que pode ser editado e que ser√° aberto no Icon-O-Matic sem problemas. Al√©m disso, adicionei uma pequena instru√ß√£o ao arquivo Leia-me do projeto sobre como criar √≠cones para meus lan√ßadores usando o Inkscape.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decidi verificar o c√≥digo do meu projeto com uma variedade de analisadores est√°ticos, mas eles n√£o encontraram nenhum problema s√©rio. Mais tarde, por√©m, encontrei um problema que eles n√£o conseguiram detectar. O fato de que o m√©todo est√°tico </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetBitmap ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BTranslationUtils</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> poderia retornar NULL:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Somewhere fBitmap = BTranslationUtils::GetBitmap(B_PNG_FORMAT, fIndex); void BeImageView::Draw(BRect rect) { // Fail const BRect bitmapRect = fBitmap-&gt;Bounds(); ... }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E no m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draw ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">esqueci-me inadvertidamente de verificar a </font><font style="vertical-align: inherit;">validade </font><font style="vertical-align: inherit;">do campo da classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fBitmap</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Portanto, o aplicativo provavelmente falharia se n√£o encontrasse uma determinada imagem, mas de acordo com o plano, era para desenhar um quadrado vermelho. Contei essa hist√≥ria ao fato de que os analisadores est√°ticos est√£o longe de ser uma panac√©ia e aten√ß√£o quando o trabalho com c√≥digo na linguagem de programa√ß√£o C ++ √© necess√°rio em qualquer caso. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O c√≥digo-fonte do projeto BeGameLauncher e todas as minhas melhores pr√°ticas s√£o carregadas no reposit√≥rio no GitHub. Espero que este programa seja √∫til para algu√©m e possa ser algum tipo de tutorial como um aplicativo simples para o Haiku: </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo-fonte do projeto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="BeGameLauncher, GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/EXL/BeGameLauncher</font></font></a></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pequeno conselho para quem usar√° o meu iniciador em suas receitas para o reposit√≥rio HaikuPorts. </font><font style="vertical-align: inherit;">Se voc√™ deseja ocultar o jogo execut√°vel da lista de aplicativos Haiku que alguns programas leem e deixar apenas o iniciador l√°, voc√™ pode usar o seguinte truque:</font></font><br><br><pre> <code class="bash hljs">settype -t application/x-vnd.Be-elfexecutable <span class="hljs-variable"><span class="hljs-variable">$appsDir</span></span>/Gish/engine/Gish rc <span class="hljs-variable"><span class="hljs-variable">$portDir</span></span>/additional-files/gish.rdef -o gish.rsrc resattr -o <span class="hljs-variable"><span class="hljs-variable">$appsDir</span></span>/Gish/engine/Gish gish.rsrc</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso excluir√° a capacidade de executar arquivos execut√°veis ‚Äã‚Äãsem par√¢metros passados ‚Äã‚Äãpelo iniciador de v√°rios programas, como o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuickLaunch</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que est√£o envolvidos no in√≠cio r√°pido de aplicativos. </font><font style="vertical-align: inherit;">Nesse caso, seu √≠cone original no arquivo execut√°vel ser√° salvo. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; Pular para o conte√∫do</font></font></em></a> <br><br><a name="xash3d"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6. Portando o Xash3D: Jogo Lend√°rio da Meia-Vida e Complementos Oficiais </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O projeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Xash3D Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xash3D</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma implementa√ß√£o gratuita do mecanismo GoldSrc, usado no jogo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Half-Life, Video Game, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Half-Life</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e em seus complementos oficiais. Por tr√°s do desenvolvimento do Xash3D est√° o programador dom√©stico </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tio Misha</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que ainda coordena seu desenvolvimento e aprimoramento. Um pouco mais tarde, outros desenvolvedores ingressaram no projeto que criaram o fork do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="FWGS Xash3D, Official GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FWGS Xash3D</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , com suporte para um grande n√∫mero de sistemas operacionais n√£o Windows. Hoje, os principais programadores do projeto FWGS Xash3D s√£o </font></font><strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mittorn</font></font></a></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a1batross</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libpony</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), a √∫ltima pessoa que participou </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="MotoFan.Ru -   ."><font style="vertical-align: inherit;">ativamente do</font></a><font style="vertical-align: inherit;"> f√≥rum popular de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="MotoFan.Ru -   ."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotoFan.Ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que ainda administro no meu tempo livre. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu me perguntava: por que n√£o portar esse mecanismo para o Haiku, adicionando suporte para um sistema operacional t√£o interessante ao projeto Xash3D e dando aos usu√°rios do Haiku a oportunidade de jogar o lend√°rio Half-Life, um jogo de todos os tempos? O assunto permaneceu pequeno - era necess√°rio iniciar imediatamente o trabalho de portabilidade e, se for bem-sucedido, publicar os resultados desse trabalho. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depois de passar v√°rias horas estudando a estrutura do projeto e as partes do c√≥digo respons√°veis ‚Äã‚Äãpelo suporte a v√°rias plataformas, comecei a fazer altera√ß√µes no mecanismo Xash3D para fornecer suporte ao sistema operacional Haiku. √Ä moda antiga, defini o compilador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-D__linux__</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e tentou criar um execut√°vel e um monte de bibliotecas. Surpreendentemente, as coisas foram bem r√°pidas e, √† noite, depois de encaminhar os arquivos de dados para o jogo, consegui lan√ßar o Half-Life e pegar o trem para a esta√ß√£o principal em Black Mesa.</font></font><br><br><div style="text-align:center;"><img title="   Xash3D  Haiku     Qt Creator." src="https://habrastorage.org/webt/8t/rd/59/8trd59d_6xk6-5nvpyjjvnvl0q0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O processo de portar o mecanismo Xash3D para o Haiku no Qt Creator IDE.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Devido ao fato de o projeto usar a biblioteca SDL2 de plataforma cruzada, a portabilidade do mecanismo √© bastante simplificada, pois voc√™ n√£o precisa escrever nenhum c√≥digo que dependa da plataforma, por exemplo: emitir som, criar uma janela com um contexto OpenGL ou manipular eventos de entrada. Tudo isso j√° foi implementado na biblioteca SDL2 e est√° pronto para uso. Um pequeno problema surgiu com o suporte de rede, porque o Haiku possui uma biblioteca separada que implementa a pilha de rede, portanto, ele precisava estar vinculado ao mecanismo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O projeto para criar lan√ßadores, sobre o qual escrevi um pouco mais, foi muito √∫til para mim. Usando a heran√ßa das classes C ++, ampliei seriamente sua funcionalidade e implementei a capacidade de selecionar v√°rias adi√ß√µes ao jogo:</font></font><br><br><div style="text-align:center;"><img title="    Xash3D  Haiku." src="https://habrastorage.org/webt/fc/-5/ta/fc-5tazmkwvtk5e553ztbwipdoy.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Captura de tela do iniciador de portas do mecanismo Xash3D para o Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A id√©ia era a seguinte: defina tr√™s vari√°veis ‚Äã‚Äãde ambiente que permitiriam que voc√™ configurasse com flexibilidade o mecanismo de jogo para iniciar um complemento espec√≠fico. Nesse caso, seria √∫til deixar o usu√°rio jogar com os v√°rios argumentos do arquivo execut√°vel e deixar a possibilidade de inicializa√ß√£o port√°til do mecanismo quando ele estiver apenas no diret√≥rio com os arquivos de dados necess√°rios. Portanto, a primeira vari√°vel de ambiente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XASH3D_BASEDIR</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© respons√°vel pelo diret√≥rio com os arquivos do jogo que o usu√°rio seleciona no iniciador. A segunda vari√°vel </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XASH3D_GAME</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© respons√°vel por qual adi√ß√£o o usu√°rio selecionou para iniciar no iniciador. E aqui est√° a terceira vari√°vel </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XASH3D_MIRRORDIR</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, √∫til apenas para usu√°rios avan√ßados. Ele permite que voc√™ espelhe o diret√≥rio do sistema Xash3D em qualquer espa√ßo em disco grav√°vel para o usu√°rio. Portanto, uma pessoa que deseja lan√ßar seu jogo complementar no mecanismo Xash3D no Haiku s√≥ precisa coletar v√°rias bibliotecas din√¢micas para arquiteturas diferentes a partir do c√≥digo-fonte do seu projeto: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Ä¢ ./cl_dlls/libclient-haiku.so </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Ä¢ ./dlls/libserver-haiku .so </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Ä¢ ./cl_dlls/libclient-haiku64.so </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Ä¢ ./dlls/libserver-haiku64.so </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E, em seguida, coloque-os nos diret√≥rios apropriados do seu complemento. Para minha porta Xash3D, decidi pr√©-compilar bibliotecas de complementos populares para o jogo Half-Life, a saber: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Half-Life: Blue Shift, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blue Shift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Half-Life: Opposing Force, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oposing Force</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que permite aos usu√°rios simplesmente baixar seus arquivos de dados, selecionar um diret√≥rio e iniciar o jogo sem nenhuma compila√ß√£o de biblioteca. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No processo de portar o mecanismo Xash3D, tive alguns problemas engra√ßados. Acontece que, para determinar o tamanho da mensagem de ajuda para os argumentos do arquivo execut√°vel gerado quando o par√¢metro </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--help</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© passado </font><font style="vertical-align: inherit;">, o mecanismo usou o tamanho predefinido da constante </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_SYSPATH</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© um alias de outra constante </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_PATH</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cujo valor j√° √© retirado da API do Haiku. Por muito tempo, n√£o entendi por que esse certificado √© emitido incompleto e cortado no local mais interessante. No come√ßo, pequei que, de alguma maneira estranha, no fluxo de sa√≠da de erro padr√£o</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O stderr</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conectou o buffer e at√© tentou desativ√°-lo √† for√ßa. Depois de algum tempo, lembrei-me de que fiquei surpreso com o tamanho muito pequeno da constante </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_PATH</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no sistema operacional Haiku. Essa constante assume um tamanho de caminho de apenas 1024 bytes. Meu palpite valeu a pena, assim que aumentei o tamanho da mensagem para 4096 bytes padr√£o, o problema foi resolvido. A seguinte conclus√£o deve ser tirada dessa hist√≥ria engra√ßada: voc√™ n√£o deve usar a constante </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_PATH</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em matrizes de caracteres que n√£o estejam de forma alguma associadas aos caminhos do arquivo.</font></font><br><br><div style="text-align:center;"><img title="    Half-Life,      Blue Shift  Opposing Force,     Xash3D    Haiku (,   )." src="https://habrastorage.org/webt/j-/9m/58/j-9m58kzb6pha8dsg5-_rlbbfvw.jpeg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma colagem de capturas de tela do jogo Half-Life, bem como suas adi√ß√µes oficiais Blue Shift e Oposing Force, lan√ßadas usando o mecanismo Xash3D no sistema operacional Haiku (pr√©-visualiza√ß√£o, aumento por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">refer√™ncia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Outro problema foi a falha ao usar a funcionalidade do pr√≥prio mecanismo para selecionar o complemento para o jogo. Aconteceu que, quando a defini√ß√£o XASH_INTERNAL_GAMELIBS foi </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definida, a</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> biblioteca </font><strong><font style="vertical-align: inherit;">do</font></strong><font style="vertical-align: inherit;"> cliente foi carregada n√£o uma vez, mas duas vezes. O que implicava um problema semelhante. Como o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a1batross me</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> explicou </font><font style="vertical-align: inherit;">, isso foi feito para que fosse poss√≠vel vincular estaticamente a biblioteca </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVGUI</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† biblioteca cliente. Na minha porta Xash3D no Haiku, essa biblioteca n√£o √© usada de forma alguma, ent√£o evitei usar o padr√£o</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XASH_INTERNAL_GAMELIBS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e relatou esse bug aos desenvolvedores do mecanismo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o me deparei com a impossibilidade de abrir o navegador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPositive</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> embutido no Haiku </font><font style="vertical-align: inherit;">ao clicar em links dentro de um jogo rodando no Xash3D. O problema era realmente estranho, porque quando o mecanismo foi iniciado a partir do terminal, o navegador foi aberto, mas quando foi iniciado o uso do iniciador, ele se recusou a faz√™-lo. Depois de estudar um pouco o c√≥digo, encontrei a chamada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">execve () l√°</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que tentei substituir por </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ap√≥s o qual o navegador come√ßou a abrir sem problemas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando ocorre um erro, o mecanismo Xash3D usa ativamente as chamadas de fun√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_ShowSimpleMessageBox ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_ShowMessageBox ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, apenas a porta atual da biblioteca SDL2 para o Haiku n√£o suporta a cria√ß√£o desses di√°logos. </font><font style="vertical-align: inherit;">Nossa vers√£o da biblioteca simplesmente n√£o possui essa funcionalidade. </font><font style="vertical-align: inherit;">Mas vou falar sobre como corrigir esse problema abaixo.</font></font><br><br><div style="text-align:center;"><img title="  Xash3D,    Haiku Depot." src="https://habrastorage.org/webt/jo/fn/8q/jofn8q1crxkrfms-cr5c4mivrf8.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A porta do mecanismo Xash3D, publicada no reposit√≥rio Haiku Depot.</font></font></i> <br><br>   ,      Xash3D  Haiku,     SDL2   ;     3D-   .       ,        ,     . ,    ,              . ,            .      SDL2  Haiku      Half-Life      . ,  3D-       .           ,       FPS.                GPU,      Intel. <br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo fonte do projeto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Xash3D, GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/FWGS/xash3d</font></font></a></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Enviei todas as altera√ß√µes no c√≥digo fonte aos desenvolvedores do projeto FWGS Xash3D que os aceitaram no reposit√≥rio, e os pacotes com esse mecanismo j√° est√£o dispon√≠veis h√° muito tempo no HaikuPorts e no programa HaikuDepot para qualquer usu√°rio do Haiku . </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; Pular para o conte√∫do</font></font></em></a> <br><br><a name="serious"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. Portando as duas partes do jogo Serious Sam: The First Encounter e The Second Encounter </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recentemente, os desenvolvedores da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Croteam, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Croteam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> publicaram o c√≥digo-fonte do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Serious Engine, Official GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serious Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , usado em jogos da s√©rie Serious Sam: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Serious Sam: The First Encounter, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The First Encounter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Serious Sam: The Second Encounter, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Second Encounter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Decidi port√°-lo para o sistema operacional Haiku, baixei o c√≥digo fonte e comecei a trabalhar.</font></font><br><br><div style="text-align:center;"><img title="    Serious Engine  Haiku." src="https://habrastorage.org/webt/lk/3b/ep/lk3bep2lrqjisyvfokrzp3tnovi.png"></div><br> <i>    Serious Engine  Haiku.</i> <br><br>         - ,         - ,      SDL2,         Haiku.            <strong>stderr</strong>     ,          . <br><br><div style="text-align:center;"><img title="  Serious Sam: The Second Encounter,      Serious Engine    Haiku." src="https://habrastorage.org/webt/dt/us/dy/dtusdy2gusdfijgdvipexqfcb0o.jpeg"></div><br> <i>  Serious Sam: The Second Encounter,      Serious Engine    Haiku.</i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tendo decomposto os arquivos baixados nos diret√≥rios necess√°rios, eu pude executar a segunda parte deste jogo maravilhoso sem problemas e at√© corri um pouco pela bela floresta. Apesar da falta de acelera√ß√£o 3D, o processador desenha os encantos gr√°ficos do jogo se voc√™ o rodar em uma janela e n√£o no modo de tela cheia. Esse mecanismo funciona, √© claro, com um FPS muito menor do que o mecanismo Xash3D, sobre o qual escrevi acima, mas os gr√°ficos aqui s√£o mais modernos e melhores. Ap√≥s pequenas manipula√ß√µes, conseguimos iniciar a primeira parte do jogo, que requer um arquivo execut√°vel diferente e um conjunto diferente de bibliotecas din√¢micas. Surpreendentemente, ela ganhou um pouco mais r√°pido, aparentemente os gr√°ficos n√£o s√£o t√£o exigentes. Ao escalar as configura√ß√µes do mecanismo, encontrei um grande n√∫mero de par√¢metros gr√°ficos que podem reduzir significativamente a carga no processador,o que no caso do Haiku acabou sendo muito √∫til.</font></font><br><br><div style="text-align:center;"><img title="  Serious Sam: The First Encounter,      Serious Engine    Haiku." src="https://habrastorage.org/webt/lb/bw/uq/lbbwuq6ei6thjz8evtumifyuqso.jpeg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Captura de tela do jogo Serious Sam: The First Encounter lan√ßado usando a porta do Serious Engine para o sistema operacional Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Decidi fazer um pacote para duas partes do jogo ao mesmo tempo, a altern√¢ncia entre elas ser√° realizada simplesmente selecionando um diret√≥rio com o conjunto apropriado de arquivos de dados. Por exemplo, se um usu√°rio no iniciador selecionar o diret√≥rio com os arquivos do jogo Sam S√©rio: O Primeiro Encontro, o arquivo execut√°vel correspondente ser√° iniciado e o conjunto correspondente de bibliotecas din√¢micas ser√° carregado. E se ele selecionar o diret√≥rio com os arquivos do jogo Serious Sam: The Second Encounter, o lan√ßador lan√ßar√° outro arquivo execut√°vel que carregar√° seu pr√≥prio conjunto de bibliotecas compartilhadas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infelizmente, n√£o foi sem problemas. Uma mudan√ßa repetida na resolu√ß√£o do modo de v√≠deo no jogo levou √† queda de todo o mecanismo. Nesse caso, na minha distribui√ß√£o Linux, essa falha n√£o foi. Passei muito tempo localizando o problema e corrigindo-o. Descobriu-se que o ponto principal era que, a cada altera√ß√£o na resolu√ß√£o, a janela </font><strong><font style="vertical-align: inherit;">SDL_Window</font></strong><font style="vertical-align: inherit;"> era destru√≠da e criada novamente</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao mesmo tempo, o renderizador OpenGL n√£o p√¥de alternar a tempo e tentou desenhar algo l√° na janela em ru√≠nas. Tais truques que a porta da biblioteca SDL2 no Haiku n√£o permitia p√¥r em marcha. Todas as tentativas simples de resolver esse problema n√£o ajudaram, e eu tive que entrar seriamente na l√≥gica e mudar o comportamento para que a janela n√£o se quebrasse quando a resolu√ß√£o foi alterada, mas seus par√¢metros simplesmente mudaram. Isso ajudou a remover a falha, mas adicionou uma restri√ß√£o adicional: agora, para ativar o modo de tela cheia, √© necess√°rio reiniciar o mecanismo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro problema foi a falta de m√∫sica no jogo. No entanto, no Linux, novamente, esse problema n√£o ocorreu. Examinando o c√≥digo fonte do mecanismo, descobri que a reprodu√ß√£o de m√∫sica depende da biblioteca </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libvorbisfile</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas o mecanismo em si n√£o est√° vinculado a ele, mas usa a fun√ß√£o de sistema </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dlopen ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para alimentar o fluxo de arquivos de √°udio OGG a esta biblioteca. O problema era que o mecanismo n√£o p√¥de encontrar esta biblioteca no Haiku, pois n√£o havia um link simb√≥lico para o arquivo da biblioteca sem uma vers√£o.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CUnixDynamicLoader::DoOpen(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *lib) { <span class="hljs-comment"><span class="hljs-comment">// Small HACK for Haiku OS (: #ifdef __HAIKU__ static int vorbis_cnt = 3; char path[PATH_MAX]; char libpath[PATH_MAX]; find_directory(B_SYSTEM_LIB_DIRECTORY, -1, false, libpath, PATH_MAX); if (strstr(lib, "vorbis")) { snprintf(path, sizeof(path), "%s/libvorbisfile.so.%c", libpath, char(vorbis_cnt + '0')); vorbis_cnt++; lib = path; } #endif // fprintf(stderr, "dlopen =&gt; %s\n", lib); module = ::dlopen(lib, RTLD_LAZY | RTLD_GLOBAL); SetError(); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pequeno truque que substituiu o caminho completo da biblioteca necess√°ria para a fun√ß√£o acabou sendo uma solu√ß√£o completamente funcional. E como a biblioteca, na sua aus√™ncia, √© pesquisada v√°rias vezes pelo mecanismo, deixei para o futuro a possibilidade de carregar a pr√≥xima vers√£o principal. Espero que eles n√£o quebrem a API nele. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O pr√≥ximo problema que encontrei foi a incapacidade de determinar a frequ√™ncia do processador na arquitetura x86, embora tudo funcionasse bem no x86_64. Ao executar no x86, o mecanismo pediu para definir uma vari√°vel de ambiente com o nome </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SERIOUS_MHZ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e definir a frequ√™ncia apropriada, o que me surpreendeu muito. Tentei faz√™-lo e o jogo realmente come√ßou, mas por algum motivo funcionou muito devagar. Escalando o c√≥digo fonte do jogo, por um longo tempo, n√£o consegui encontrar a fonte do problema e at√© escrevi um peda√ßo de c√≥digo que usa a API Haiku para obter a frequ√™ncia correta do processador e substitu√≠-la no mecanismo do jogo, assim:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;kernel/OS.h&gt; #include &lt;stdio.h&gt; ... uint64 cpuFreq = 0; uint32 count = 0; get_cpu_topology_info(NULL, &amp;count); if (count != 0) { cpu_topology_node_info *topology = new cpu_topology_node_info[count]; get_cpu_topology_info(topology, &amp;count); for (uint32 i = 0; i &lt; count; ++i) { if(topology[i].type == B_TOPOLOGY_CORE) { cpuFreq = topology[i].data.core.default_frequency; } } delete[] topology; } fprintf(stderr, "%llu\n", cpuFreq);</span></span></span></span></code> </pre><br>    .       x86_64  ,    CPU     1 MHz,    .    ,      <strong>__GNU_INLINE_X86_32__</strong> ,    ,      x86,    x86_64.         ,     SDL2,          inline-   <strong>rdtsc</strong>    <strong>/proc/cpuinfo</strong> ,    ,        x86,    . <br><br>       .      <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMakeLists.txt</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> definindo o sinalizador </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-march = native</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que literalmente informa ao compilador: ao gerar blocos de c√≥digo de m√°quina, use todas as instru√ß√µes sofisticadas e modernas dispon√≠veis no processador do seu computador.</font></font><br><br><pre> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> PANDORA <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> HAIKU) <span class="hljs-keyword"><span class="hljs-keyword">message</span></span>(<span class="hljs-string"><span class="hljs-string">"Warning: arch-native will be used!"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">add_compile_options</span></span>(-march=native) <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(HAIKU) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(CMAKE_SIZEOF_VOID_P <span class="hljs-keyword"><span class="hljs-keyword">EQUAL</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-comment"><span class="hljs-comment"># 32-bit message("Warning: Will building 32-bit executable with MMX, SSE, SSE2 support.") add_compile_options(-mmmx -msse -msse2) else() # 64-bit message("Warning: Will building 64-bit executable.") endif() endif()</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por esse motivo, os pacotes no reposit√≥rio se reuniram exclusivamente no servidor de compila√ß√£o mais poderoso e se recusaram a rodar nos computadores das pessoas comuns, jurando as instru√ß√µes e c√≥digos de opera√ß√£o incorretos. Desabilitar esse sinalizador e adicionar manualmente o suporte √†s instru√ß√µes MMX, SSE e SSE2 n√£o apenas resolveu esse problema, como tamb√©m nos permitiu compilar um monte de montadores inline neste projeto, que ca√≠ram ap√≥s a remo√ß√£o do sinalizador. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para meu grande pesar, os desenvolvedores do Croteam n√£o aceitam nenhuma corre√ß√£o no reposit√≥rio do mecanismo, por isso garimpei e coloquei todo o meu trabalho l√°: </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo-fonte do projeto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Serious Engine fork, GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/EXLMOTODEV/Serious-Engine</font></font></a></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pacotes prontos para instala√ß√£o para o lan√ßamento de jogos de Serious Sam j√° est√£o dispon√≠veis no reposit√≥rio HaikuPorts. </font><font style="vertical-align: inherit;">Lembre-se de baixar os arquivos de dados do jogo. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; Pular para o conte√∫do</font></font></em></a> <br><br><a name="vangers"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8. Portando o jogo Vangers </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Francamente, at√© recentemente, eu n√£o conhecia completamente esse jogo, que nos anos 90 distantes era feito pelo est√∫dio de desenvolvimento dom√©stico KD Lab. </font><font style="vertical-align: inherit;">Mas os participantes da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="OS Haiku - ,   Telegram."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confer√™ncia no Telegram IM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se dedica a discutir o sistema operacional Haiku, pediram para eu portar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Vangers, Wikipedia page."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vangerov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e me deram um link para o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Vangers, Official GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reposit√≥rio GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no qual as fontes desse jogo estavam localizadas.</font></font><br><br><div style="text-align:center;"><img title="      Haiku." src="https://habrastorage.org/webt/sd/k8/db/sdk8dbv4o-8hgoaohnzuk4xoo0w.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Captura de tela do iniciador de portas de jogos Vanger para o Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tendo puxado o c√≥digo fonte para o Haiku, tentei compil√°-lo e consegui sem problemas especiais. Eu tive que mexer um pouco com a falta de alguns arquivos de cabe√ßalho e com os caminhos para as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="FFmpeg, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bibliotecas FFmpeg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que s√£o usadas pelo mecanismo deste jogo. Comecei imediatamente a preparar o c√≥digo-fonte para o empacotamento, ent√£o adicionei a vari√°vel de ambiente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VANGERS_DATA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e movi o log do mecanismo para o diret√≥rio do usu√°rio que √© grav√°vel.</font></font><br><br><div style="text-align:center;"><img title="     Haiku     Qt Creator." src="https://habrastorage.org/webt/_i/_o/mi/_i_omiac7lqewaq6ml8p4ow4dwg.png"></div><br> <i>     Haiku     Qt Creator.</i> <br><br>              ,      KD Lab.        ¬´¬ª  ¬´¬ª  ¬´¬ª  ¬´¬ª,       ¬´¬ª .  ,           ,     . <br><br><div style="text-align:center;"><img title="  ,     Haiku." src="https://habrastorage.org/webt/cf/l6/yv/cfl6yvi5euj0sn29wrvgzdpzo2k.jpeg"></div><br> <i>  ,     Haiku.</i> <br><br>  ,    ,   ,    ,           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Vangers on GOG.com">GOG.com</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Vangers on Steam.">Steam</a> ,     .     ,    <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">stalkerg</a></strong>       Linux.        ,      .       ,   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como no caso da porta NXEngine (Cave Story), sobre a qual escrevi acima, as vers√µes em russo e ingl√™s diferem em diferentes arquivos execut√°veis, mas o diret√≥rio com arquivos de dados √© comum, as diferen√ßas est√£o apenas nos scripts. Na ponta do </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stalkerg,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentei compilar o mecanismo de jogo com a op√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-DBINARY_SCRIPT = Off</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que ativava a compila√ß√£o din√¢mica desses scripts em tempo de execu√ß√£o, se eles estavam no diret√≥rio do arquivo de dados do jogo. Tudo isso me permitiu criar um lan√ßador, no qual h√° a capacidade de mudar o idioma. A id√©ia √© a seguinte: o diret√≥rio do jogo √© pr√©-verificado e, se n√£o tiver os scripts necess√°rios, eles s√£o copiados das tripas do pacote, ap√≥s o qual o arquivo execut√°vel da vers√£o em russo ou ingl√™s j√° est√° em execu√ß√£o.</font></font><br><br><div style="text-align:center;"><img title="  ,    Haiku Depot." src="https://habrastorage.org/webt/zx/c3/ys/zxc3yseedkzeexk3yxb-3x08azs.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A porta do jogo de Vanger, publicada no reposit√≥rio Haiku Depot.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ao portar o Wanger, usei um recurso interessante relacionado √†s bibliotecas compartilhadas que eu gosto no Haiku. O mecanismo do jogo depende da biblioteca din√¢mica </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libclunk.so</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , respons√°vel por gerar sons binaurais em tempo real. E se no Linux, eu tenho que quebrar meus dedos, substituindo o </font><font style="vertical-align: inherit;">caminho para esta biblioteca </font><font style="vertical-align: inherit;">na vari√°vel de ambiente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LD_LIBRARY_PATH</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para que o que estava nessa vari√°vel antes tamb√©m seja salvo, no Haiku √© feito de maneira conveniente, como no Windows. Basta colocar a biblioteca compartilhada ao lado do arquivo execut√°vel e ela ser√° selecionada, com a √∫nica diferen√ßa que, no caso do Haiku, a biblioteca deve ser colocada no diret√≥rio </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">./lib/</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o que, na minha opini√£o, pode economizar muito tempo e nervos. </font><font style="vertical-align: inherit;">Portanto, decidi n√£o considerar a compila√ß√£o est√°tica desta biblioteca. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo-fonte do projeto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Vangers, GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/KranX/Vangers Os</font></font></a></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desenvolvedores do Wanger aceitaram minhas altera√ß√µes no mecanismo de jogo e pacotes prontos para instala√ß√£o est√£o dispon√≠veis para download no reposit√≥rio HaikuPorts ou no programa HaikuDepot, apesar do recente fakap na infraestrutura de reposit√≥rio que ocorreu depois Atualizando a distribui√ß√£o do Fedora Linux para a nova vers√£o. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; Pular para o conte√∫do</font></font></em></a> <br><br><a name="sdl2"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9. Implementa√ß√£o de di√°logos na biblioteca SDL2 para Haiku </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao portar os mecanismos Xash3D e Serious Engine, sobre os quais escrevi acima, deparei-me com uma porta local na biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="SDL2 (Simple DirectMedia Layer) library, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL2 de que</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> havia uma completa falta de implementa√ß√£o de di√°logos. Os di√°logos s√£o chamados pelas duas fun√ß√µes </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_ShowSimpleMessageBox ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_ShowMessageBox ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que permitem informar o usu√°rio sobre qualquer informa√ß√£o importante, por exemplo, sobre um erro. A implementa√ß√£o dessas caixas de di√°logo est√° dispon√≠vel em muitas plataformas e sistemas operacionais: Windows, macOS, iOS, X11 e Android, mas, por algum motivo, est√° ausente no Haiku. Decidi corrigir essa omiss√£o e adicionar essa funcionalidade √† porta da biblioteca SDL2. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na API do Haiku, ou melhor, na estrutura do Kit de interface, existe uma maravilhosa classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BAlert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o que √© √≥timo para implementar essas caixas de di√°logo. Eu decidi escolher como base. A √∫nica coisa que me incomodou foi que eu n√£o tinha certeza de que </font><font style="vertical-align: inherit;">mais de tr√™s bot√µes pudessem ser colocados </font><font style="vertical-align: inherit;">na caixa de di√°logo que o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BAlert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constr√≥i </font><font style="vertical-align: inherit;">. Tamb√©m me lembrei dos recursos de gerenciamento de mem√≥ria nesta classe sobre os quais escrevi acima: seus objetos s√≥ podem ser criados na pilha e n√£o podem ser criados na pilha, porque depois de chamar o m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e a a√ß√£o subsequente do usu√°rio, ele se exclui. Depois de realizar alguns experimentos, tirei todas as minhas d√∫vidas, herdei dessa classe e comecei a escrever uma implementa√ß√£o.</font></font><br><br><div style="text-align:center;"><img title="    SDL2    Haiku." src="https://habrastorage.org/webt/wj/lu/an/wjluanrt_t4sy9sq7tjzzwtsfje.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementa√ß√£o de di√°logos na biblioteca SDL2 para o sistema operacional Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A primeira dificuldade que encontrei foi que, ao usar qualquer objeto da classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BAlert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou seus descendentes, era necess√°rio criar uma inst√¢ncia da classe do sistema </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BApplication</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aparentemente para registrar o aplicativo no </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app_server</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para poder interagir com ele. Criei uma inst√¢ncia dessa classe, mas ao chamar a caixa </font><font style="vertical-align: inherit;">de </font><font style="vertical-align: inherit;">di√°logo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BAlert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de outro processo ou da janela criada, recebi outro erro relacionado ao fato de o aplicativo n√£o poder ter dois objetos da classe </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BApplication</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , felizmente encontrei uma solu√ß√£o para esse problema. A API do Haiku possui um ponteiro global para a inst√¢ncia atual da classe</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BApplication</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , chamado </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">be_app</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sua contrapartida na estrutura Qt √© uma macro </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qApp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especial </font><font style="vertical-align: inherit;">, que tamb√©m define um ponteiro para o objeto de aplicativo atual. Portanto, basta verificar </font><font style="vertical-align: inherit;">NULL no </font><font style="vertical-align: inherit;">ponteiro </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">be_app</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, se a verifica√ß√£o for bem-sucedida, crie o objeto necess√°rio. Assim, todos esses problemas foram resolvidos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vale ressaltar que a biblioteca SDL2 √© escrita na linguagem de programa√ß√£o C, e a API Haiku, como voc√™ sabe, usa a linguagem de programa√ß√£o C ++. Por esse motivo, algumas partes do c√≥digo devem ser revestidas com conven√ß√µes de liga√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">externas "C"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que n√£o haja problemas com a resolu√ß√£o de caracteres durante a vincula√ß√£o. Al√©m disso, em vez de</font></font><strong>new</strong>    <strong>new(std::nothrow)</strong> ,        NULL,   ,   SDL2,  ,  . <br><br>      .   ,      SDL2  ,      Haiku API     .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="SDL2_messagebox_test.c, GitHubGist repository."> </a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que periodicamente executava em diferentes sistemas operacionais, analisava os resultados e avaliava meu trabalho. No final, fiquei t√£o empolgado que at√© apoiei a personaliza√ß√£o, como definir cores diferentes para os bot√µes e o plano de fundo da caixa de di√°logo. Isso √© suportado na API da biblioteca SDL2, mas inicialmente n√£o planejei implementar essas coisas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o programador decidir cuspir uma linha muito, muito longa nessa caixa de di√°logo, o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto da</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classe </font><strong><font style="vertical-align: inherit;">BTextView</font></strong><font style="vertical-align: inherit;"> , usado dentro do </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto da</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classe </font><strong><font style="vertical-align: inherit;">BAlert</font></strong><font style="vertical-align: inherit;"> , precisar√° chamar o m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetWordWrap ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com o argumento </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acertar um programador nos bra√ßos e ajustar o di√°logo na tela. Parece que n√£o h√° nada mais f√°cil: verificamos o comprimento da string usando a fun√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strlen ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e fazemos a coisa certa. O √∫nico problema √© que o SDL2 tamb√©m funciona com UTF-8, o que significa que a fun√ß√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strlen ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> retornar√° o n√∫mero de bytes, n√£o o n√∫mero de caracteres. A API do Haiku e a classe de string </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BString v√™m ao resgate</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que possui o m√©todo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CountChars ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que permite descobrir o comprimento de uma string em caracteres, n√£o em bytes:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckLongLines</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *aMessage)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> final = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// This UTF-8 friendly. PS G_MAX_STRING_LENGTH = 120 BString message = aMessage; int32 length = message.CountChars(); for (int i = 0, c = 0; i &lt; length; ++i) { c++; if (*(message.CharAt(i)) == '\n') { c = 0; } if (c &gt; final) { final = c; } } return (final &gt; G_MAX_STRING_LENGTH); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essa fun√ß√£o verifica o texto da mensagem em busca de linhas com mais de 120 caracteres e, se houver, retorna true. Quanto ao UTF-8, ainda havia um momento em que, em algumas fontes do sistema Haiku, n√£o havia suporte para caracteres chineses. Portanto, por exemplo, voc√™ n√£o pode definir nenhuma inscri√ß√£o em chin√™s no t√≠tulo da janela. Mas o texto em russo √© instalado sem problemas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao preparar o pacote, encontrei um erro de constru√ß√£o para a arquitetura x86_gcc2, que √© ativada na receita da biblioteca SDL2. Aconteceu que o compilador mais antigo do GCC 2.95 n√£o conseguiu adivinhar que o c√≥digo comentado √© equivalente ao c√≥digo abaixo:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">rgb_color </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertColorType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SDL_MessageBoxColor *aColor)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// return { aColor-&gt;r, aColor-&gt;g, aColor-&gt;b, 255 }; rgb_color color = { aColor-&gt;r, aColor-&gt;g, aColor-&gt;b, color.alpha = 255 }; return color; }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, tive que reescrever esse fragmento no estilo antigo e ainda remover a inicializa√ß√£o de algumas constantes da classe diretamente em suas declara√ß√µes; o compilador antigo tamb√©m n√£o gostou disso. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enviei patches para a implementa√ß√£o de di√°logos SDL2 no reposit√≥rio HaikuPorts, para que agora os mecanismos Xash3D e Serious Engine possam emitir corretamente qualquer informa√ß√£o ao usu√°rio, por exemplo, sobre erros. Mas ainda n√£o entrei em contato com os desenvolvedores do SDL2, mas seria bom transferir todos os patches do reposit√≥rio HaikuPorts para a biblioteca SDL2 upstream. Embora o trabalho de portar nossos patches tenha se tornado um pouco mais complicado devido √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Rename internal functions from BE_* to HAIKU_*, SDL2 mercurial repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recente renomea√ß√£o de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prefixos </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Rename internal functions from BE_* to HAIKU_*, SDL2 mercurial repository."><font style="vertical-align: inherit;">de</font></a><font style="vertical-align: inherit;"> fun√ß√£o de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BE_ *</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAIKU_ *</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , esse n√£o √© um problema t√£o s√©rio. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; Pular para o conte√∫do</font></font></em></a> <br><br><a name="coolreader"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10. Portando meu garfo do Cool Reader </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvo um fork do programa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="   Cool Reader."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cool Reader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> h√° muito tempo </font><font style="vertical-align: inherit;">, escrito por </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vadim Lopatin</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buggins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), o artigo correspondente sobre isso est√° dispon√≠vel no meu site. </font><font style="vertical-align: inherit;">Nos coment√°rios desse artigo, os leitores do meu blog est√£o constantemente cancelando a inscri√ß√£o que desejam ver algum novo recurso em seu aplicativo favorito para leitura de livros eletr√¥nicos, ou desejam corrigir erros e defici√™ncias nas fun√ß√µes do programa j√° implementadas.</font></font><br><br><div style="text-align:center;"><img title="   Cool Reader,     Haiku." src="https://habrastorage.org/webt/ug/ib/ys/ugibysukgq3yqipkk3w_ar8sn1y.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meu garfo do Cool Reader rodando no Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No reposit√≥rio HaikuPorts, encontrei uma receita para a cria√ß√£o do programa Cool Reader original; no entanto, devido a algumas mudan√ßas constantes no recurso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="SourceForge, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SourceForge</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , essa receita ficou inoperante, porque o c√≥digo-fonte do aplicativo ficou indispon√≠vel para download. Decidi transferir meu fork para o reposit√≥rio HaikuPorts, como uma nova vers√£o do Cool Reader. Coloquei todos os patches do Gerasim no c√≥digo, corrigi algumas falhas na receita e, com base nele, criei um novo pacote que j√° est√° dispon√≠vel para todos os usu√°rios do Haiku. Voc√™ pode encontrar o c√≥digo fonte do meu fork do Cool Reader neste reposit√≥rio GitHub: </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo fonte do projeto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Cool Reader fork, GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/EXLMOTODEV/coolreader</font></font></a></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O √∫nico problema que encontrei foram as imprecis√µes na transfer√™ncia dos patches da Gerasim. </font><font style="vertical-align: inherit;">Al√©m da </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defini√ß√£o de</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> __HAIKU__ </font><font style="vertical-align: inherit;">, em outro lugar do sistema de constru√ß√£o o _LINUX </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tamb√©m </font><strong><font style="vertical-align: inherit;">foi definido</font></strong><font style="vertical-align: inherit;"> e, na maioria dos casos, o √∫ltimo na lista de c√≥digos-fonte foi a primeira compila√ß√£o condicional que me decepcionou. </font><font style="vertical-align: inherit;">De acordo com as regras de prioridade do pr√©-processador, para o Haiku foram compilados exatamente esses trechos de c√≥digo que foram enquadrados pela </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defini√ß√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do _LINUX </font><font style="vertical-align: inherit;">, embora eu precisasse de algo completamente diferente. </font><font style="vertical-align: inherit;">Mas, apesar disso, o programa foi iniciado e funcionou, mas apenas salvou suas configura√ß√µes onde era necess√°rio. </font><font style="vertical-align: inherit;">Priorizei corretamente, reconstru√≠ o pacote e o problema foi completamente resolvido. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; Pular para o conte√∫do</font></font></em></a> <br><br><a name="keymap"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 11. Finaliza√ß√£o do programa KeymapSwitcher </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recentemente, muitos sistemas operacionais populares mudaram para um novo atalho de teclado </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta / Opt / Cmd / Win + Space</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para alternar os layouts de teclado. Pareceu-me muito conveniente, pois agora n√£o preciso alterar nada e configur√°-lo. Voc√™ se senta em qualquer computador executando o macOS, Windows ou Linux com o shell GNOME 3 e essa combina√ß√£o conveniente de alterar o idioma de entrada funciona em qualquer lugar. At√© o sistema operacional m√≥vel Android tem seu an√°logo. Em geral, mudei para este atalho de teclado h√° muito tempo e me acostumei. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para meu grande pesar, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="KeymapSwitcher, GitHub repository."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KeymapSwitcher</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que acompanha o Haiku, n√£o me permitiu definir uma combina√ß√£o de teclas t√£o conveniente para alternar layouts, e √© por isso que constantemente me sinto desconfort√°vel ao trabalhar com texto neste sistema operacional. Por isso, decidi modificar um pouco esse aplicativo e comecei a procurar seu c√≥digo-fonte. Aconteceu que este programa, embora inclu√≠do na distribui√ß√£o do Haiku, √© fornecido separadamente do c√≥digo-fonte do pr√≥prio sistema operacional. Al√©m disso, o aplicativo est√° dispon√≠vel no reposit√≥rio HaikuPorts e tamb√©m √© atualizado por meio dele. Como fui informado, o KeymapSwitcher n√£o foi inclu√≠do no Haiku, pois est√° planejado implementar uma API especial para alterar os layouts de teclado e, algum dia, a necessidade desse programa desaparecer√° completamente.</font></font><br><br><div style="text-align:center;"><img title=" KeymapSwitcher    Haiku        ." src="https://habrastorage.org/webt/o1/cq/xn/o1cqxnduzeop30tx6zpzbq7c62i.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KeymapSwitcher no Haiku com um atalho de teclado popular para alternar layouts de teclado.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Apesar de estar assustado com a complexidade do c√≥digo KeymapSwitcher, rapidamente encontrei o lugar certo gra√ßas aos coment√°rios e introduzi um pequeno patch no c√≥digo do programa, o que me facilitou bastante a digita√ß√£o de qualquer texto no Haiku. A √∫nica falha menor que n√£o pude superar √© que a tecla </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opt</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> precisa ser liberada para mudar o idioma. Ou seja, segure </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opt</font></font></strong>        .            ,             HaikuPorts,     KeymapSwitcher       Haiku. <br><br> <strong>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="KeymapSwitcher, GitHub repository.">https://github.com/HaikuArchives/KeymapSwitcher</a></strong> <br><br> ,           . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>&lt;&lt;   </em></a> <br><br><a name="theend"></a><h2> 12.  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estudar a API do Haiku, bem como resolver v√°rios problemas ex√≥ticos que surgiram como resultado da portabilidade de aplicativos novos e atualizados para este sistema operacional, trouxeram muita experi√™ncia e prazer valiosos. Consegui promover os patches de suporte do Haiku no reposit√≥rio de c√≥digo-fonte de alguns grandes projetos e conheci novas pessoas interessantes que estavam de alguma forma relacionadas a esse belo sistema operacional.</font></font><br><br><div style="text-align:center;"><img title=" ,     Haiku." src="https://habrastorage.org/webt/ew/rw/oy/ewrwoyfj--hee2fsb4xz0qrl5ck.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√°rios aplicativos em execu√ß√£o no sistema operacional Haiku.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Espero sinceramente que, no futuro, todos os problemas atuais, como a falta de acelera√ß√£o de hardware 3D e navegadores populares, bem como o baixo suporte para hardware moderno, sejam resolvidos com sucesso e o Haiku receba um influxo de sangue novo de desenvolvedores e usu√°rios que apreciar√£o suas capacidades exclusivas e design original . Felizmente, o desenvolvimento est√° longe de ser parado e hoje no f√≥rum local deste sistema operacional s√£o abordados os principais t√≥picos sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="What about bounty? 3D acceleration bounty?, Official Haiku forums."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acelera√ß√£o 3D</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e portabilidade da biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Ported GTK3 [Live], Official Haiku forums."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GTK + 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e a possibilidade de portar o componente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Add recipe for QtWebEngine, Issues on HaikuPorts GitHub repository."><font style="vertical-align: inherit;">QtWebEngine</font></a><font style="vertical-align: inherit;"> √© discutida nos reposit√≥rios HaikuPorts</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Add recipe for QtWebEngine, Issues on HaikuPorts GitHub repository."><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. A porta GTK + 3 pode implicar a possibilidade de iniciar e trabalhar os populares navegadores Firefox e Chromium, e o QtWebEngine permitir√° o uso do mecanismo Blink em navegadores modernos baseados na estrutura Qt, como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Otter Browser, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otter Browser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Falkon, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falkon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J√° posso recomendar esse sistema operacional para aqueles que possuem laptops ou netbooks antigos e fracos, por exemplo, em vez da distribui√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Lubuntu, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lubuntu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou Windows XP. Voc√™ ficar√° surpreso com o qu√£o r√°pido e responsivo funciona. Sim, voc√™ deve limitar-se um pouco √† visualiza√ß√£o de alguns sites devido a navegadores antigos e muitas falhas associadas a eles, mas, na maioria dos casos, em hardware antigo, essa limita√ß√£o n√£o tem significado.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas as minhas portas e melhorias j√° foram publicadas e est√£o dispon√≠veis para instala√ß√£o em todos os usu√°rios do Haiku. Todas as altera√ß√µes no c√≥digo fonte est√£o dispon√≠veis nos respectivos reposit√≥rios sob suas licen√ßas originais. Neste trabalho, usei uma enorme quantidade de materiais, os principais dos quais destacarei nos links √∫teis abaixo. Muito obrigado a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Stack Overflow, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stackoverflow.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Google, Official site."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">google.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por estarem l√°. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. O site oficial do sistema operacional Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. O f√≥rum oficial do sistema operacional Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Documenta√ß√£o oficial para usu√°rios do Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Documenta√ß√£o oficial para desenvolvedores do Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="     Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Descri√ß√£o dos recursos da interface gr√°fica do usu√°rio do Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="      Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Recomenda√ß√µes para criar √≠cones para aplicativos Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="  Icon-O-Matic     ."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Descri√ß√£o do programa Icon-O-Matic e dicas para seu uso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    HVIF."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Descri√ß√£o do formato dos √≠cones HVIF do vetor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    Interface Kit."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9. A documenta√ß√£o oficial para a estrutura do Kit de Interface</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    Locale Kit."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10. A documenta√ß√£o oficial para a estrutura do Locale Kit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title=",      Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11. Artigo sobre aspectos de localiza√ß√£o de aplicativos para o Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="     Layout API."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. A documenta√ß√£o oficial da API de layout</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title=" ,     Haiku   Layout API."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13. Uma s√©rie de artigos que descrevem a implementa√ß√£o da API de layout no Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="GitHub-     Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14. Reposit√≥rio do GitHub do c√≥digo fonte do sistema operacional Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="GitHub-   HaikuPorts."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15. Reposit√≥rio do GitHub da √°rvore de receitas HaikuPorts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="    HPKG- Haiku Depot Web."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16. A vers√£o da Internet do reposit√≥rio de pacotes HPKG prontos para uso Haiku Depot Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="  'Haiku:  -'    INSTEAD,  ."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17. Um artigo interessante "Haiku: lamp geek-OS" no blog do desenvolvedor do INSTEAD, Peter Kosykh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title=" 'Haiku: '    INSTEAD,  ."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18. O artigo Haiku: Imers√£o no blog de desenvolvedores do INSTEAD, Pyotr Kosykh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="   'Learning to Program' with Haiku  DarkWyrm."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19. O curso das li√ß√µes de programa√ß√£o "Aprendendo a programar com o Haiku" da DarkWyrm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="   'Programming With Haiku'  DarkWyrm."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20. O curso das li√ß√µes de programa√ß√£o "Programming With Haiku" da DarkWyrm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title=" '    Haiku?'   Linux.org.ru,  ."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21. Publica√ß√£o ‚ÄúExiste vida no Haiku?‚Äù no recurso Linux.org.ru, de mim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="  Telegram IM,     Haiku."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22. Confer√™ncia no Telegram IM, dedicada √† discuss√£o do sistema operacional Haiku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parab√©ns a todos os usu√°rios do recurso</font></font><strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="habr, Official site.">habr</a></strong>          !  , ,   2019 ! <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>&lt;&lt;   </em></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434690/">https://habr.com/ru/post/pt434690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434680/index.html">Evolu√ß√£o do Agendador de Tarefas</a></li>
<li><a href="../pt434682/index.html">Teleportador pessoal da cidade</a></li>
<li><a href="../pt434684/index.html">Rust 2019 e al√©m: restri√ß√µes de crescimento</a></li>
<li><a href="../pt434686/index.html">Curso de Palestra sobre JavaScript e Node.js no KPI</a></li>
<li><a href="../pt434688/index.html">O FreeBSD planeja mudar para o ZFSonLinux</a></li>
<li><a href="../pt434692/index.html">As 25 startups mais caras dos EUA a morrer em 2018</a></li>
<li><a href="../pt434694/index.html">Vis√£o geral do NeurIPS-2018 (ex. NIPS)</a></li>
<li><a href="../pt434696/index.html">Funcion√°rios de gigantes de TI descobriram como influenciar as pol√≠ticas de suas empresas</a></li>
<li><a href="../pt434698/index.html">Pessimismo sobre multithreading</a></li>
<li><a href="../pt434700/index.html">Vantagens de seguir as guias de estilo ao desenvolver aplicativos Angular</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>