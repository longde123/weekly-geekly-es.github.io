<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦍 🖖🏼 👩‍👦‍👦 飞利浦VideoWRITER的工作原理。 首先是铁的照片，然后有点乏味 🤽🏾 🚣🏽 💖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="VideoWRITER文本编辑和打印设备由Philips于1985年推出。 它在与Z80兼容的处理器上执行，并包含16 kB ROM和相同数量的RAM（稍后证明，还有更多ROM）。 要保存文档，它具有3.5英寸驱动器。 可以以799美元的价格成为这款“ combine”（也有内置打印机）的满意所有人...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>飞利浦VideoWRITER的工作原理。 首先是铁的照片，然后有点乏味</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450310/"><img src="https://habrastorage.org/webt/23/ak/-w/23ak-weziuwj2tul3zohv_zjyyu.jpeg"><br><br>  VideoWRITER文本编辑和打印设备由Philips于1985年推出。 它在与Z80兼容的处理器上执行，并包含16 kB ROM和相同数量的RAM（稍后证明，还有更多ROM）。 要保存文档，它具有3.5英寸驱动器。 可以以799美元的价格成为这款“ combine”（也有内置打印机）的满意所有人。 <br><br> 橙色CRT显示器的屏幕明显比平常宽。 不仅在其上放置了具有可编辑文档的窗口，而且还放置了位于其右侧的菜单。 提示也显示在此处，包括功能键的分配。 文档始终以深色背景上的浅色符号显示，菜单反之亦然。 屏幕衬里的左下角标记有：DDS-双显示屏... <a name="habracut"></a><br><br> 该编辑器非常简单，不要指望它甚至是Comic Sans。 仅有一种字体，标准属性可用：粗体，斜体，下划线，上下索引。 和对齐文本的标准方法。 还有一个标尺和换行符。 <br><br> 打印机通过热转印在普通A4纸上打印。 如果没有特殊墨盒，根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wikipedia的文章</a> ，您可以在热敏纸上打印。 作者对在高温阁楼中呆了这么多年后仍然可以打印该设备感到非常惊讶。 <br><br><img src="https://habrastorage.org/webt/ma/n8/32/man832tcprf_uz3jwlf0wjqaerm.jpeg"><br><br> 键盘很小，但是在键盘上打字很方便。 它上的特殊键允许您切换字体属性，取消操作并检查拼写是否存在带有字典的软盘。 键盘通过RJ14连接器连接-本质与RJ11和RJ45相同。 <br><br> 文档存储在3.5英寸软盘上。 开机后，机器立即搜索软盘，如果无法“理解”那里的内容，则建议对其进行格式化。 该格式很可能与PC上使用的格式不兼容。  360或720可以容纳几千字节？ <br><br> 现在是时候抬起顶盖，看看下面是什么。 首先，我们只看一下主板，直到它们深入到设备中为止。 首先将显像管放电。 我们借助“鳄鱼”将螺丝刀预先连接到普通电线上，并用绝缘手柄将其握住，然后将手掌从吸盘下面移开。 尽管它写在显像管上：不要通过电弧放电放电，在阳极和底盘之间连接一个高阻电压表。 而且，一切都会逐渐消失。  TDKS也许是“温柔的”。 <br><br><img src="https://habrastorage.org/webt/q3/_d/qu/q3_dquewjyizmthijcqas_4u838.jpeg"><br><br> 要卸下电源，只需要拧开两个螺丝即可。 现在，作者第二次删除此BP。 首先是当电容器破裂时，冒出了很多烟，但作者发现了同样的东西，将其焊接了，然后才起作用。 它不是电解电容器，而是中间上方一个矩形的电容器。 现在是红色的。 <br><br><img src="https://habrastorage.org/webt/7v/tx/2m/7vtx2mrvppn7x52dbs5kqxnpczo.jpeg"><br><br> 与那些年的其他类似板相比，该监视板非常小。 即使没有显像管板，也只有一个插座（在单色显示器中并不罕见）。 主板上有几种设置，还有一个10针连接器用于连接到主板。 我想知道那里是哪种鞋底？ 为何还要使用556芯片-在一个案例中有两个555计时器？ 发电机立即“锯”人员和线扫？ <br><br><img src="https://habrastorage.org/webt/my/up/lt/myupltxbmvuwk53kak4fq62h_xq.jpeg"><br><br> 打印机板位于打印机本身正下方。 从那里有一个到主板的回路，以及到引擎的电缆，进纸按钮，用于打印的对比度控件，打印头，端部和纸张传感器。 <br><br><img src="https://habrastorage.org/webt/fl/iv/zd/flivzd3hwhgego1dssoictoigzm.jpeg"><br><br> 主板从各个侧面都经过屏蔽。 对于仅两个ROM芯片，在屏幕上制作了一个方孔： <br><br><img src="https://habrastorage.org/webt/cd/4w/lq/cd4wlq6hzkzymm94ahkumb41ess.jpeg"><br><br> 我们将离开屏幕，看看主板上有什么有趣的东西。 <br><br><img src="https://habrastorage.org/webt/wq/ky/kv/wqkykv4xqujsnmrp5o1qhvv49ew.jpeg"><br><br>  D8156HC-2-输入输出控制器。 大概是它控制着打印机，因为它位于左上角的打印机连接器附近。 该芯片包含三个端口：两个8位和一个6位，14位定时器以及256字节的静态RAM。 稍后我们将了解为什么需要每个端口，以及芯片是否真正控制了打印机。 她也很可能与键盘“通信”。 该芯片使用组合的地址和数据总线。 事实证明，微处理器也是如此。 <br><br>  HN27C256-20-ROM 32 KB，数据总线宽度为8位。 有两个这样的微电路，结果是64 KB。 这意味着Wikipedia错误地指出ROM只有16 KB。 那么，ROM是否会占用Z80的整个64 KB地址空间？ 并且还有16 KB的RAM。 因此，存在某种页面切换。 让我们一起来看看... <br><br>  NSC800N-3I-微处理器。 它仅与Z80兼容，并且引脚排列完全不同。 左边是一个惊人的组合地址和数据总线。 地址总线的低8位也用作数据总线。 为了区分地址和数据，有ALE输出。  1表示低八位是地址的一部分。 在右边-一些信号。 相同的ALE，以及读取启用，写入启用，内存和端口之间的选择，等等。 当然，使用这样的微处理器比使用常规的Z80或其克隆要困难得多。 根据数据表，它的工作频率最高为2.5 MHz，这意味着5 MHz石英的频率被分成两部分。 比较此非标准处理器和常规Z80的引脚排列： <br><br><img src="https://habrastorage.org/webt/fy/al/f7/fyalf7_bcfv8qjlasjkyir5dsxc.png"><br><br>  HM48416AP-15-16 KB动态RAM 这些芯片中的两个构成了16 KB的RAM。 <br><br>  WD1770-PH是Western Digital驱动器控制器。 最少的外部组件，与用于在磁盘上存储数据的各种格式兼容。 一般来说，不需要广告。 <br><br>  NCR 7250 PY-视频控制器？ 看来他是因为在董事会上没有其他要求该功能的人。 <br><br>  HM6116-4-2 KB静态RAM。 通常，视频内存。 视频模式只是文本，因此没有更多内容了。 尽管这里不是80x25，但该行的宽度超过80个字符以及属性。 好吧，那就合适了。 <br><br> 因此，我们发现该机器具有16 KB的RAM和64 KB的ROM，并且应该在某个地方进行页面切换。 用万用表在电路板上走一圈，画出我们所看到的一切。 <br><br> 首先，寻找片选信号。 让我们从ROM芯片的输出/ CE开始，在贴纸上印有字母A，结果证明它与元素I的输出相连。 到74139芯片的两个输出，包含两个带两个输入和四个输出的解码器。 其中，只有我们一个人感兴趣： <br><br><img src="https://habrastorage.org/webt/o4/pa/0s/o4pa0syzk6ksdko1ov788sljbj0.jpeg"><br><br> 信号A14和A15从微处理器传到其输入，这意味着内存被分为四个16 KB的块。 来自微处理器的输入/ E（启用）接收信号/ M（存储器选择），因此当微处理器需要访问存储器时，芯片74139处于活动状态。 原来，地址空间的分配就是这样。 当74139在输出/ Q0或输出/ Q1上有一个单位时，选择ROM“ A”，在/ Q2上有一个单位的ROM“ B”，在Q3上有一个单位的RAM。 但是使用RAM也不是那么简单，那么我们会解决的。 因此，在A14和A15上使用不同信号组合选择的内容： <br><br><img src="https://habrastorage.org/webt/8e/xb/mq/8exbmqvdc5qd4wnf4sgadxlgmkw.jpeg"><br><br> 转到地址总线。 我们已经发现，那里的一切都比带有常规Z80的系统更为复杂。 事实证明，要从数据中分离地址，这里使用了一个8位锁存器74373，其数据输入连接到AD0-AD7线，而锁存输入连接到ALE线。 当单位出现在ALE上时，地址的下半部分将写入74373。 输入/ OE始终连接到公共线。 <br><br> 此外，“地址总线”将被视为输出线74373与地址总线本身的上线（其中数据从不存在）组合。 好了，该图显示了所有内容： <br><br><img src="https://habrastorage.org/webt/fv/8v/lt/fv8vlt9uas1eei5ljykqchcmco0.jpeg"><br><br> 现在让我们看看ROM芯片是如何连接的。 通过ROM“ A”的连接，没有发现异常。 只是先前考虑的纯地址总线的A0-A14行（在74373之后）。 仅A0-A13线连接到ROM“ B”。  A14呢？ 也许这条线连接到普通电线或加电源，而没有使用一半的容量？ 不行 它到达A8156 I / O控制器的引脚39（PC2）。 仅此而已，切换页面变得很清楚。  ROM半部“ B”可以通过编程方式进行切换。 <br><br> 我们发现，RAM是在两个每个16 KB的动态RAM芯片上制造的。  RAM的每个字节一次存储在两个芯片中，一个字节存储在第一块中，另一个字节存储在第二个中。 <br><br> 要选择地址，您必须先选择一行，然后再选择一列。 为此，使用了两个74157微电路-四个带有两个输入和一个输出的数据选择器。 现在回到第一个方案。 除了输出/ WR之外，还有另一个输出进入第一个微电路74157的选择输入。当/ Q3为零时，选择行的地址，而当/ Q3为零时，列的地址为： <br><br><img src="https://habrastorage.org/webt/e7/uv/d0/e7uvd0tqatktdqsvzx3ynvtu7l8.jpeg"><br><br> 作者在走过印刷导体时发现，两个74157微电路的八个输出中只有六个用作RAM微电路的MA1-MA6地址。 线MA0和MA7直接连接到地址总线A6和A7。  48416芯片具有八行六列，因此仅需切换六条线，其他两条可以直接连接到地址总线，因为它们不会影响列的选择。 <br><br><img src="https://habrastorage.org/webt/fr/dl/mv/frdlmv_-zpb6aoamhnp1rq81flo.jpeg"><br><br> 将线连接到地址总线的顺序不遵循任何逻辑。 但是一切正常。 也许更方便地设计电路板更方便？ <br><br>  74157芯片如何级联也很有趣：第一个4Y输出进入第二个输入，第二个4Y输出进入/ CAS线： <br><br><img src="https://habrastorage.org/webt/ov/ys/dy/ovysdy69k_ss__1_pdbdud1-qvw.jpeg"><br><br> 与ROM不同，动态RAM没有单独的/ CE行。 如作者所理解的，当/ CAS为零时，这些芯片可提供读或写功能。 好吧，是这样的：Q3上的零表示CAS上的零。 当ALE线为零且未复位微处理器时，形成RAM线地址。 <br><br> 我们找出了地址空间，让我们继续进行外围。 作者还用万用表在电路板上行走，并得到了以下方案： <br><br><img src="https://habrastorage.org/webt/8x/ek/kf/8xekkf5-kojyhecysfxqh-xbdwk.jpeg"><br><br> 左上角显示视频控制器（VDP）的信号/ RD和/ WR的来源。 请注意，对于VDP，芯片选择不可见。 因此，视频控制器唯一类似于/ CS的信号是微处理器的ALE信号。 事实证明，视频控制器通常接收有关所有I / O操作的数据。 我们不会专注于此，我们将看到其余的输入输出设备正在发生什么。 <br><br> 其余的I / O地址由74139芯片的后半部分解密-该芯片的前半部分切换了地址空间的页面。 当执行输入-输入操作时，选择该解码器，并且在A7上为零。 看来A7线负责在视频控制器和其余外围设备之间进行选择。  A6和A5确定解码器将选择哪个设备： <br><br><img src="https://habrastorage.org/webt/ko/ta/4u/kota4uqclmnzqkbs1vtrbthxrq4.jpeg"><br><br>  A7可以用作视频控制器的芯片选择线吗？ 如果没有NCR 7250上的数据表，是无法确定的，但是，如果未以完全不同寻常的方式实现ALE线对视频控制器的影响，这是很合理的。 <br><br> 此外，作者进行了连接微处理器信号线的逆向工程： <br><br><img src="https://habrastorage.org/webt/kk/5s/kp/kk5skpbzc-ybyrm_ffy0zx15ktm.jpeg"><br><br> 该图示出了用于产生复位信号的方法。 开启时，电容器会延迟充电；关闭时，电容器会快速放电。 复位信号/ RESET IN是反相信号，它被馈送到微处理器，并产生直接的RESET OUT信号来复位各种外设。 <br><br> 不可屏蔽中断/ NMI行的工作方式与常规Z80相同。 启用中断后，此行上的null将调用地址0x66的中断例程。 在这种情况下，/ NMI信号来自IC25定时器的输出。 每次定时器溢出，都会产生一个中断。 <br><br>  NSC800N微处理器还具有一个/ INTR输入，该输入为0x38，但VideoWRITER中未使用此输入。 <br><br> 还有三个重启信号/ RSTA，/ RSTB和/ RSTC，分别引起到地址0x3C，0x34或0x2C的转换。 其中，仅涉及前两个，它们由驱动器控制器控制。 驱动器控制器通过信号/ RSTA通知微处理器其数据寄存器的状态，并通过信号/ RSTB指示命令完成。 <br><br> 现在大约还有一行-S1。 与线S0一起确定总线的状态。 因此，驱动器控制器选择读取或写入模式。 但是，为什么仅驱动器控制器使用S1线路代替/ RD和/ WR？ 不清楚。  S0，S1和IO / M线可以很好地用于内存和外设的读写模式之间的选择，但是使用其他线也可以达到相同的效果。 也许开发人员尝试了几种选择，并决定继续研究通常在Z80中使用的解密读写模式的方法？ 无论如何，根据NSC800N上的数据表和下表，信号S1可以是来自外围设备的读取信号，但前提是还有选择信号直接进入设备： <br><br><img src="https://habrastorage.org/webt/u5/wf/fs/u5wffss0o_vaauju7ykq9upbojo.jpeg"><br><br> 设备正在运行，视频是由另一位作者Grr_I'm_Here拍摄的： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BeMbmleApAI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450310/">https://habr.com/ru/post/zh-CN450310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN450298/index.html">量子未来（续）</a></li>
<li><a href="../zh-CN450300/index.html">不再争论函数式编程和OOP</a></li>
<li><a href="../zh-CN450302/index.html">业余无线电技术：在中国工厂制造原型电路板</a></li>
<li><a href="../zh-CN450304/index.html">Carapuzik坐着一只蚂蚁：1亿年的嗜酸粒细胞增多症</a></li>
<li><a href="../zh-CN450308/index.html">Unity中的GPU光线跟踪-第3部分</a></li>
<li><a href="../zh-CN450312/index.html">Docker Compose入门指南</a></li>
<li><a href="../zh-CN450314/index.html">TensorFlow适用于初学者。 第1部分：一般信息，安装库</a></li>
<li><a href="../zh-CN450316/index.html">TDD：一种改变了我生活的开发方法</a></li>
<li><a href="../zh-CN450318/index.html">现代JavaScript开发中的设计模式</a></li>
<li><a href="../zh-CN450320/index.html">简单的量子游戏揭示了宇宙的终极复杂性</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>