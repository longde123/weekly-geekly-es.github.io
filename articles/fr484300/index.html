<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï§ üòç ü§∏üèº Powershell fonctionnel avec des classes - pas un oxymore, je le garantis üôÇ ü§ôüèΩ üêæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous pr√©sente la traduction de l'article "PowerShell fonctionnel avec classes. 
 Je promets que ce n'est pas un oxymore " de Christo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Powershell fonctionnel avec des classes - pas un oxymore, je le garantis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484300/"><p>  Bonjour, Habr!  Je vous pr√©sente la traduction de l'article <a href="https://medium.com/faun/functional-powershell-with-classes-820c8e9acd8f">"PowerShell fonctionnel avec classes.</a> <a href="https://medium.com/faun/functional-powershell-with-classes-820c8e9acd8f"><br></a>  <a href="https://medium.com/faun/functional-powershell-with-classes-820c8e9acd8f">Je promets que ce n'est pas un oxymore "</a> de Christopher Kuech. </p><br><p>  Les paradigmes de programmation orient√©e objet et fonctionnelle peuvent sembler en contradiction, mais les deux sont √©galement pris en charge dans Powershell.  Presque tous les langages de programmation, fonctionnels et non, ont des moyens de liaison √©tendue des noms et des valeurs;  Les classes, comme les structures et les enregistrements, ne sont qu'une approche.  Si nous limitons l'utilisation des classes √† la liaison de noms et de valeurs et √©vitons des concepts de programmation orient√©s objet ¬´lourds¬ª tels que l'h√©ritage, le polymorphisme ou la mutabilit√©, nous pouvons en tirer parti sans compliquer notre code.  De plus, en ajoutant des m√©thodes immuables de conversion de type, nous pouvons enrichir notre code fonctionnel avec des classes. </p><br><h2 id="magiya-kastov">  Magie de caste </h2><br><p>  Castes est l'une des fonctionnalit√©s les plus puissantes de Powershell.  Lorsque vous convertissez une valeur, vous comptez sur la capacit√© de l'environnement √† ajouter une initialisation et une validation implicites √† votre application.  Par exemple, une simple conversion d'une cha√Æne en [xml] l'ex√©cutera via le code de l'analyseur et g√©n√©rera une arborescence xml compl√®te.  Nous pouvons utiliser des classes dans notre code dans le m√™me but. </p><a name="habracut"></a><br><h3 id="kast-heshtablic">  Hashtables personnalis√©s </h3><br><p>  Si vous n'avez pas de constructeur, vous pouvez continuer sans lui en utilisant une table de hachage en fonction du type de votre classe.  N'oubliez pas d'utiliser des attributs de validation pour tirer pleinement parti de ce mod√®le.  Dans le m√™me temps, nous pouvons utiliser les propri√©t√©s typ√©es de la classe pour d√©clencher une logique d'initialisation et de validation encore plus approfondie. </p><br><pre><code class="powershell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cluster</span></span></span></span> { [<span class="hljs-type"><span class="hljs-type">ValidatePattern</span></span>(<span class="hljs-string"><span class="hljs-string">"^[Az]+</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Service</span></span> [<span class="hljs-type"><span class="hljs-type">ValidateSet</span></span>(<span class="hljs-string"><span class="hljs-string">"TEST"</span></span>, <span class="hljs-string"><span class="hljs-string">"STAGE"</span></span>, <span class="hljs-string"><span class="hljs-string">"CANARY"</span></span>, <span class="hljs-string"><span class="hljs-string">"PROD"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$FlightingRing</span></span> [<span class="hljs-type"><span class="hljs-type">ValidateSet</span></span>(<span class="hljs-string"><span class="hljs-string">"EastUS"</span></span>, <span class="hljs-string"><span class="hljs-string">"WestUS"</span></span>, <span class="hljs-string"><span class="hljs-string">"NorthEurope"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Region</span></span> [<span class="hljs-type"><span class="hljs-type">ValidateRange</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Index</span></span> } [<span class="hljs-type"><span class="hljs-type">Cluster</span></span>]<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>{ Service = <span class="hljs-string"><span class="hljs-string">"MyService"</span></span> FlightingRing = <span class="hljs-string"><span class="hljs-string">"PROD"</span></span> Region = <span class="hljs-string"><span class="hljs-string">"EastUS"</span></span> Index = <span class="hljs-number"><span class="hljs-number">2</span></span> }</code> </pre> <br><p>  De plus, le casting aide √† obtenir une conclusion claire.  Comparez la sortie du tableau de table de hachage de cluster pass√©e √† Format-Table avec ce qui se passe si vous convertissez d'abord ces tables de hachage dans une classe.  Les propri√©t√©s de classe sont toujours r√©pertori√©es dans l'ordre dans lequel elles y sont d√©finies.  N'oubliez pas d'ajouter le mot-cl√© cach√© devant toutes ces propri√©t√©s qui ne devraient pas √™tre visibles dans la sortie. </p><br><img src="https://habrastorage.org/webt/r9/td/62/r9td62pfnpoxg4dnud-1e2r41is.png" alt="image"><br><br><h3 id="kast-znacheniy">  Valeurs personnalis√©es </h3><br><p>  Si vous avez un constructeur avec un argument, le transtypage des valeurs dans votre type de classe transmettra la valeur √† ce constructeur, dans lequel vous pouvez initialiser l'instance de votre classe </p><br><pre> <code class="powershell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cluster</span></span></span></span> { [<span class="hljs-type"><span class="hljs-type">ValidatePattern</span></span>(<span class="hljs-string"><span class="hljs-string">"^[Az]+</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Service</span></span> [<span class="hljs-type"><span class="hljs-type">ValidateSet</span></span>(<span class="hljs-string"><span class="hljs-string">"TEST"</span></span>, <span class="hljs-string"><span class="hljs-string">"STAGE"</span></span>, <span class="hljs-string"><span class="hljs-string">"CANARY"</span></span>, <span class="hljs-string"><span class="hljs-string">"PROD"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$FlightingRing</span></span> [<span class="hljs-type"><span class="hljs-type">ValidateSet</span></span>(<span class="hljs-string"><span class="hljs-string">"EastUS"</span></span>, <span class="hljs-string"><span class="hljs-string">"WestUS"</span></span>, <span class="hljs-string"><span class="hljs-string">"NorthEurope"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Region</span></span> [<span class="hljs-type"><span class="hljs-type">ValidateRange</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Index</span></span> Cluster([<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$id</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.Service, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.FlightingRing, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.Region, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.Index = <span class="hljs-variable"><span class="hljs-variable">$id</span></span> <span class="hljs-operator"><span class="hljs-operator">-split</span></span> <span class="hljs-string"><span class="hljs-string">"-"</span></span> } } [<span class="hljs-type"><span class="hljs-type">Cluster</span></span>]<span class="hljs-string"><span class="hljs-string">"MyService-PROD-EastUS-2"</span></span></code> </pre> <br><h3 id="kast-k-stroke">  Ligne personnalis√©e </h3><br><p>  Vous pouvez √©galement remplacer la m√©thode de classe [cha√Æne] ToString () pour d√©terminer la logique de la repr√©sentation sous forme de cha√Æne de l'objet, par exemple, √† l'aide d'une interpolation de cha√Æne. </p><br><pre> <code class="powershell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cluster</span></span></span></span> { <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidatePattern</span></span></span><span class="hljs-function">(</span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"^[Az]+</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-string"><span class="hljs-variable">$</span></span></span></span><span class="hljs-function"><span class="hljs-string">"</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Service</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidateSet</span></span></span><span class="hljs-function">(</span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"TEST"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"STAGE"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"CANARY"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"PROD"</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FlightingRing</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidateSet</span></span></span><span class="hljs-function">(</span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"EastUS"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"WestUS"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"NorthEurope"</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Region</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidateRange</span></span></span><span class="hljs-function">(</span><span class="hljs-number"><span class="hljs-function"><span class="hljs-number">0</span></span></span><span class="hljs-function">, </span><span class="hljs-number"><span class="hljs-function"><span class="hljs-number">255</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">int</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.Service, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.FlightingRing, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.Region, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>.Index <span class="hljs-operator"><span class="hljs-operator">-join</span></span> <span class="hljs-string"><span class="hljs-string">"-"</span></span> } } <span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> = [<span class="hljs-type"><span class="hljs-type">Cluster</span></span>]<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>{ Service = <span class="hljs-string"><span class="hljs-string">"MyService"</span></span> FlightingRing = <span class="hljs-string"><span class="hljs-string">"PROD"</span></span> Region = <span class="hljs-string"><span class="hljs-string">"EastUS"</span></span> Index = <span class="hljs-number"><span class="hljs-number">2</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">Write-Host</span></span> <span class="hljs-string"><span class="hljs-string">"We just created a model for '</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$cluster</span></span></span><span class="hljs-string">'"</span></span></code> </pre> <br><h3 id="kast-serializovannyh-instansov">  Instances s√©rialis√©es personnalis√©es </h3><br><p>  Cast permet une d√©s√©rialisation en toute s√©curit√©.  Les exemples ci-dessous √©choueront si les donn√©es ne r√©pondent pas √† nos sp√©cifications dans le cluster </p><br><pre> <code class="powershell hljs"><span class="hljs-comment"><span class="hljs-comment">#    [Cluster]$cluster = Get-Content "./my-cluster.json" | ConvertFrom-Json [Cluster[]]$clusters = Import-Csv "./my-clusters.csv"</span></span></code> </pre> <br><br><h2 id="kasty-v-vashem-funkcionalnom-kode">  Castes dans votre code de fonction </h2><br><p>  Les programmes fonctionnels d√©finissent d'abord les structures de donn√©es, puis mettent en ≈ìuvre le programme comme une s√©quence de transformations sur des structures de donn√©es immuables.  Malgr√© l'impression conflictuelle, les classes aident vraiment √† √©crire du code fonctionnel gr√¢ce aux m√©thodes de conversion de type. </p><br><h3 id="funkcionalnyy-li-powershell-ya-pishu">  Powershell est-il fonctionnel? </h3><br><p>  Beaucoup de gens qui viennent de C # ou avec un pass√© similaire √©crivent Powershell, qui est similaire √† C #.  En faisant cela, vous √™tes r√©ticent √† utiliser les concepts de programmation fonctionnelle et vous aurez probablement l'avantage d'√™tre fortement immerg√© dans la programmation orient√©e objet dans Powershell ou une meilleure compr√©hension de la programmation fonctionnelle. </p><br><p>  Si vous comptez beaucoup sur la transformation de donn√©es immuables √† l'aide de pipelines (|), Where-Object, ForEach-Object, Select-Object, Group-Object, Sort-Object, etc., vous avez un style plus fonctionnel et utilisez Classes Powershell dans un style fonctionnel. </p><br><h3 id="funkcionalnoe-ispolzovanie-klassov">  Utilisation fonctionnelle des classes </h3><br><p>  Les castes, bien qu'utilisant une syntaxe alternative, ne font que mapper entre deux domaines.  Dans le pipeline, vous pouvez mapper un tableau de valeurs √† l'aide de ForEach-Object. </p><br><p>  Dans l'exemple ci-dessous, le constructeur Node est ex√©cut√© chaque fois qu'une conversion en Datum se produit, ce qui nous permet de ne pas √©crire une bonne quantit√© de code.  En cons√©quence, notre pipeline se concentre sur l'interrogation et l'agr√©gation de donn√©es d√©claratives, tandis que nos classes se chargent de l'analyse et de la validation des donn√©es. </p><br><pre> <code class="powershell hljs"><span class="hljs-comment"><span class="hljs-comment">#       separation of concerns   class Node { [ValidateLength(3, 7)] [string] $Name [ValidateSet("INT", "PPE", "PROD")] [string] $FlightingRing [ValidateSet("EastUS", "WestUS", "NorthEurope", "WestEurope")] [string] $Region Node([string] $Name) { $Name -match "([az]+)(INT|PPE|PROD)([az]+)" $_, $this.Service, $this.FlightingRing, $this.Region = $Matches $this.Name = $Name } } class Datum { [string] $Name [int] $Value [Node] $Computer [int] Severity() { $this.Name -match "[0-9]+$" return $Matches[0] } } Write-Host "Urgent Security Audit Issues:" Import-Csv "./audit-results.csv" ` | ForEach-Object {[Datum]$_} ` | Where-Object Value -gt 0 ` | Group-Object {$_.Severity()} ` | Where-Object Name -lt 2 ` | ForEach-Object Group ` | ForEach-Object Computer ` | Where-Object FlightingRing -eq "PROD" ` | Sort-Object Name, Region -Unique</span></span></code> </pre> <br><br><h2 id="upakovka-klassa-dlya-pereispolzovaniya">  R√©utiliser l'emballage de classe </h2><br><h3 id="nichto-ne-stol-uzh-horosho-kak-kazhetsya">  Rien n'est aussi bon qu'il y para√Æt </h3><br><p>  Malheureusement, les classes ne peuvent pas √™tre export√©es par les modules de la m√™me mani√®re que les fonctions ou les variables;  mais il y a quelques astuces.  Disons que vos classes sont d√©finies dans le fichier ./my-classes.ps1 </p><br><ul><li><p>  Vous pouvez doser un fichier avec des classes:.  ./my-classes.ps1.  Cela ex√©cutera my-classes.ps1 dans votre port√©e actuelle et y d√©finira toutes les classes du fichier. </p><br></li><li><p>  Vous pouvez cr√©er un module Powershell qui exporte toutes vos API utilisateur (applets de commande) et d√©finir la variable ScriptsToProcess = "./my-classes.ps1" dans le manifeste de votre module, avec le m√™me r√©sultat: ./my-classes.ps1 s'ex√©cutera dans votre environnement . </p><br></li></ul><br><p>  Quelle que soit l'option que vous choisissez, n'oubliez pas que le syst√®me de types Powershell ne peut pas r√©soudre les types du m√™me nom charg√©s √† partir de diff√©rents endroits. <br>  M√™me si vous t√©l√©chargez deux classes identiques avec les m√™mes propri√©t√©s √† partir d'endroits diff√©rents, vous courez le risque de rencontrer des probl√®mes. </p><br><h3 id="put-vpered">  La voie √† suivre </h3><br><p>  La meilleure fa√ßon d'√©viter les probl√®mes de r√©solution de type est de ne jamais exposer vos classes aux utilisateurs.  Au lieu d'attendre que l'utilisateur importe un type d√©fini dans la classe, exportez de votre module une fonction qui √©limine le besoin d'acc√©der directement √† la classe.  Pour Cluster, nous pouvons exporter la fonction New-Cluster, qui prendra en charge des ensembles de param√®tres conviviaux et renverra Cluster. </p><br><pre> <code class="powershell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cluster</span></span></span></span> { <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidatePattern</span></span></span><span class="hljs-function">(</span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"^[Az]+</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-string"><span class="hljs-variable">$</span></span></span></span><span class="hljs-function"><span class="hljs-string">"</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Service</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidateSet</span></span></span><span class="hljs-function">(</span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"TEST"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"STAGE"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"CANARY"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"PROD"</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FlightingRing</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidateSet</span></span></span><span class="hljs-function">(</span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"EastUS"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"WestUS"</span></span></span><span class="hljs-function">, </span><span class="hljs-string"><span class="hljs-function"><span class="hljs-string">"NorthEurope"</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Region</span></span></span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">ValidateRange</span></span></span><span class="hljs-function">(</span><span class="hljs-number"><span class="hljs-function"><span class="hljs-number">0</span></span></span><span class="hljs-function">, </span><span class="hljs-number"><span class="hljs-function"><span class="hljs-number">255</span></span></span><span class="hljs-function">)] [</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">int</span></span></span><span class="hljs-function">] $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">New-Cluster</span></span></span></span> { <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">OutputType</span></span></span><span class="hljs-function">([</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">Cluster</span></span></span><span class="hljs-function">])] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">Param</span></span></span></span>( [<span class="hljs-type"><span class="hljs-type">Parameter</span></span>(<span class="hljs-type"><span class="hljs-type">Mandatory</span></span>, <span class="hljs-type"><span class="hljs-type">ParameterSetName</span></span> = <span class="hljs-string"><span class="hljs-string">"Id"</span></span>, <span class="hljs-type"><span class="hljs-type">Position</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>)] [<span class="hljs-type"><span class="hljs-type">ValidateNotNullOrEmpty</span></span>()] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Id</span></span>, [<span class="hljs-type"><span class="hljs-type">Parameter</span></span>(<span class="hljs-type"><span class="hljs-type">Mandatory</span></span>, <span class="hljs-type"><span class="hljs-type">ParameterSetName</span></span> = <span class="hljs-string"><span class="hljs-string">"Components"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Service</span></span>, [<span class="hljs-type"><span class="hljs-type">Parameter</span></span>(<span class="hljs-type"><span class="hljs-type">Mandatory</span></span>, <span class="hljs-type"><span class="hljs-type">ParameterSetName</span></span> = <span class="hljs-string"><span class="hljs-string">"Components"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$FlightingRing</span></span>, [<span class="hljs-type"><span class="hljs-type">Parameter</span></span>(<span class="hljs-type"><span class="hljs-type">Mandatory</span></span>, <span class="hljs-type"><span class="hljs-type">ParameterSetName</span></span> = <span class="hljs-string"><span class="hljs-string">"Components"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Region</span></span>, [<span class="hljs-type"><span class="hljs-type">Parameter</span></span>(<span class="hljs-type"><span class="hljs-type">Mandatory</span></span>, <span class="hljs-type"><span class="hljs-type">ParameterSetName</span></span> = <span class="hljs-string"><span class="hljs-string">"Components"</span></span>)] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-variable"><span class="hljs-variable">$Index</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$Id</span></span>) { <span class="hljs-variable"><span class="hljs-variable">$Service</span></span>, <span class="hljs-variable"><span class="hljs-variable">$FlightingRing</span></span>, <span class="hljs-variable"><span class="hljs-variable">$Region</span></span>, <span class="hljs-variable"><span class="hljs-variable">$Index</span></span> = <span class="hljs-variable"><span class="hljs-variable">$Id</span></span> <span class="hljs-operator"><span class="hljs-operator">-split</span></span> <span class="hljs-string"><span class="hljs-string">"-"</span></span> } [<span class="hljs-type"><span class="hljs-type">Cluster</span></span>]<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>{ Service = <span class="hljs-variable"><span class="hljs-variable">$Service</span></span> FlightingRing = <span class="hljs-variable"><span class="hljs-variable">$FlightingRing</span></span> Region = <span class="hljs-variable"><span class="hljs-variable">$Region</span></span> Index = <span class="hljs-variable"><span class="hljs-variable">$Index</span></span> } } <span class="hljs-built_in"><span class="hljs-built_in">Export-ModuleMember</span></span> <span class="hljs-built_in"><span class="hljs-built_in">New-Cluster</span></span></code> </pre> <br><h4 id="chto-eschyo-pochitat">  Quoi d'autre √† lire </h4><br><p>  <a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_classes">√Ä propos des cours</a> <br>  <a href="https://medium.com/%40cjkuech/defensive-powershell-with-validation-attributes-8e7303e179fd">Defensive PowerShell</a> <br>  <a href="https://medium.com/%40cjkuech/functional-programming-in-powershell-876edde1aadb">Programmation fonctionnelle dans PowerShell</a> <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484300/">https://habr.com/ru/post/fr484300/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484288/index.html">Comment la confrontation de la guerre froide aide les Chinois √† d√©marrer la production informatique</a></li>
<li><a href="../fr484290/index.html">La feuille de triche qui est n√©cessaire sur le yacht</a></li>
<li><a href="../fr484292/index.html">Le plus grand physicien</a></li>
<li><a href="../fr484294/index.html">H√©bergement partag√© ou serveur virtuel - que choisir?</a></li>
<li><a href="../fr484296/index.html">Lytko s'unit</a></li>
<li><a href="../fr484302/index.html">Slurm DevOps - une meilleure m√©sange fonctionnelle en 3 jours qu'une belle grue dans un avenir lointain</a></li>
<li><a href="../fr484304/index.html">La Chine a adopt√© son "paquet de printemps"</a></li>
<li><a href="../fr484306/index.html">La capacit√© d'apprentissage peut √™tre ind√©cidable</a></li>
<li><a href="../fr484310/index.html">Biblioth√®que JavaScript Webix vue par un d√©butant. Partie 2. Travailler avec des formulaires</a></li>
<li><a href="../fr484312/index.html">Stockage efficace de centaines de millions de petits fichiers. Solution auto-h√©berg√©e</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>