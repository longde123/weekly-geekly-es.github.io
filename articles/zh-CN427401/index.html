<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§™ğŸ½ ğŸ“¼ ğŸ¤ŸğŸ¼ æº¶è§£ç€è‰²å™¨å’Œä¸–ç•Œæ¢ç´¢ ğŸš£ğŸ¾ ğŸ¤’ ğŸ¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¬¬1éƒ¨åˆ†ï¼šæº¶å‡ºåº¦ç€è‰²å™¨ 
 æº¶è§£ç€è‰²å™¨è¿”å›æ¼‚äº®çš„æ•ˆæœï¼Œè€Œä¸”æ˜“äºåˆ›å»ºå’Œç†è§£ï¼› ä»Šå¤©ï¼Œæˆ‘ä»¬å°†åœ¨Unity Shader Graphä¸­è¿›è¡Œåˆ¶ä½œ ï¼Œå¹¶åœ¨HLSLä¸Šè¿›è¡Œç¼–å†™ã€‚ 

 è¿™æ˜¯æˆ‘ä»¬å°†åˆ›å»ºçš„ç¤ºä¾‹ï¼š 



 å¦‚ä½•è¿ä½œ 
 è¦åˆ›å»ºæº¶è§£ç€è‰²å™¨ï¼Œæˆ‘ä»¬å°†å¿…é¡»ä½¿ç”¨â€œ Shader Graphâ€ç€è‰²å™¨ä¸­çš„Alph...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æº¶è§£ç€è‰²å™¨å’Œä¸–ç•Œæ¢ç´¢</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427401/"><h1> ç¬¬1éƒ¨åˆ†ï¼šæº¶å‡ºåº¦ç€è‰²å™¨ </h1><br>  <strong>æº¶è§£ç€è‰²å™¨</strong>è¿”å›æ¼‚äº®çš„æ•ˆæœï¼Œè€Œä¸”æ˜“äºåˆ›å»ºå’Œç†è§£ï¼› ä»Šå¤©ï¼Œæˆ‘ä»¬å°†åœ¨<strong>Unity Shader Graphä¸­è¿›è¡Œåˆ¶ä½œ</strong> ï¼Œå¹¶åœ¨<strong>HLSLä¸Šè¿›è¡Œ</strong>ç¼–å†™ã€‚ <br><br> è¿™æ˜¯æˆ‘ä»¬å°†åˆ›å»ºçš„ç¤ºä¾‹ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce4/46c/b99/ce446cb9949fdee3ed4b29d121aa1c89.gif"></div><br><br><h1> å¦‚ä½•è¿ä½œ </h1><br> è¦åˆ›å»º<strong>æº¶è§£</strong>ç€è‰²å™¨ï¼Œæˆ‘ä»¬å°†å¿…é¡»ä½¿ç”¨â€œ Shader Graphâ€ç€è‰²å™¨ä¸­çš„<strong>AlphaClipThreshold</strong>å€¼ï¼Œæˆ–ä½¿ç”¨ç§°ä¸º<strong>clip</strong>çš„HLSLå‡½æ•°ã€‚ <br><br> æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬å‘Šè¯‰ç€è‰²å™¨<strong>ä¸è¦</strong>åŸºäºä¼ é€’çš„<strong>çº¹ç†</strong>å’Œ<strong>å€¼</strong> <strong>æ¥æ¸²æŸ“åƒç´ </strong> ã€‚ æˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹å†…å®¹ï¼š <strong>ç™½è‰²éƒ¨åˆ†æº¶è§£å¾—æ›´å¿«</strong> ã€‚ <br><a name="habracut"></a><br> æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹çº¹ç†ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1cc/f52/1cd/1ccf521cdd1ba16cdaa45b33ae50fec4.png"></div><br> æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„-ç›´çº¿ï¼Œä¸‰è§’å½¢ï¼Œä½†æ˜¯ä»»ä½•ä¸œè¥¿ï¼ è¯·è®°ä½ï¼Œ <strong>ç™½è‰²éƒ¨åˆ†æº¶è§£å¾—æ›´å¿«</strong> ã€‚ <br><br> æˆ‘ä½¿ç”¨â€œäº‘â€æ»¤é•œåœ¨Photoshopä¸­åˆ›å»ºäº†æ­¤çº¹ç†ã€‚ <br><br> å³ä½¿æ‚¨åªå¯¹Shader Graphæ„Ÿå…´è¶£ï¼Œè€Œå¯¹HLSLä¹Ÿä¸äº†è§£ï¼Œæˆ‘ä»ç„¶å»ºè®®æ‚¨é˜…è¯»æœ¬éƒ¨åˆ†ï¼Œå› ä¸ºè¿™å¯¹äºäº†è§£Unity Shader Graphå¦‚ä½•åœ¨å†…éƒ¨å·¥ä½œéå¸¸æœ‰ç”¨ã€‚ <br><br><hr><br><h1>  ls </h1><br> åœ¨HLSLä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>clipï¼ˆxï¼‰</strong>å‡½æ•°ã€‚  <strong>clipï¼ˆxï¼‰</strong>å‡½æ•°ä¸¢å¼ƒæ‰€æœ‰å€¼å°äº<strong>é›¶çš„</strong>åƒç´ ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨<strong>clipï¼ˆ-1ï¼‰</strong> ï¼Œæˆ‘ä»¬å°†ç¡®ä¿ç€è‰²å™¨æ°¸è¿œä¸ä¼šæ¸²æŸ“æ­¤åƒç´ ã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microsoft Docsä¸­</a>äº†è§£æœ‰å…³<strong>å‰ªè¾‘çš„</strong>æ›´å¤šä¿¡æ¯ã€‚ <br><br><h4> å±æ€§ </h4><br> ç€è‰²å™¨éœ€è¦ä¸¤ä¸ªå±æ€§ï¼Œ <strong>Dissolve Texture</strong>å’Œ<strong>Amount</strong> ï¼ˆå°†æŒ‡ç¤ºæ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼‰ã€‚ ä¸å…¶ä»–å±æ€§å’Œå˜é‡ä¸€æ ·ï¼Œæ‚¨å¯ä»¥éšæ„è°ƒç”¨å®ƒä»¬ã€‚ <br><br><pre><code class="hljs powershell">Properties { //Your other properties //[<span class="hljs-type"><span class="hljs-type">...</span></span>] //Dissolve shader properties _DissolveTexture(<span class="hljs-string"><span class="hljs-string">"Dissolve Texture"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} _Amount(<span class="hljs-string"><span class="hljs-string">"Amount"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br> ç¡®ä¿åœ¨CGPROGRAM SubShaderä¹‹åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ¢å¥è¯è¯´ï¼Œå£°æ˜å˜é‡ï¼‰ï¼š <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sampler2D</span></span> _DissolveTexture; <span class="hljs-attribute"><span class="hljs-attribute">half</span></span> _Amount;</code> </pre> <br> å¦å¤–ï¼Œä¸è¦å¿˜è®°ã€‚ å®ƒä»¬çš„åç§°å¿…é¡»ä¸â€œå±æ€§â€éƒ¨åˆ†ä¸­çš„åç§°åŒ¹é…ã€‚ <br><br><h4> åŠŸèƒ½ä»‹ç» </h4><br> æˆ‘ä»¬é€šè¿‡é‡‡æ ·<strong>æº¶è§£</strong>çš„<strong>çº¹ç†</strong>å¹¶è·å–<strong>çº¢è‰²</strong>çš„<strong>å€¼æ¥</strong>å¼€å§‹â€œ <strong>è¡¨é¢â€</strong>æˆ–â€œ <strong>ç‰‡æ®µâ€</strong>åŠŸèƒ½ã€‚  PSæˆ‘ä»¬çš„çº¹ç†ä»¥<strong>ç°åº¦</strong>å­˜å‚¨ï¼Œå³<strong>R</strong> ï¼Œ <strong>G</strong>å’Œ<strong>B</strong>çš„å€¼ç›¸ç­‰ï¼Œæ‚¨å¯ä»¥<strong>é€‰æ‹©ä»»æ„ä¸€ä¸ª</strong> ã€‚ ä¾‹å¦‚ï¼Œ <strong>ç™½è‰²</strong>ä¸º<strong>ï¼ˆ1,1,1ï¼‰</strong> ï¼Œ <strong>é»‘è‰²</strong>ä¸º<strong>ï¼ˆ0,0,0ï¼‰</strong> ã€‚ <br><br> åœ¨æˆ‘çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†è¡¨é¢ç€è‰²å™¨ï¼š <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> surf (Input IN, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { half dissolve_value = tex2D(_DissolveTexture, IN.uv_MainTex).r; <span class="hljs-comment"><span class="hljs-comment">//Get how much we have to dissolve based on our dissolve texture clip(dissolve_value - _Amount); //Dissolve! //Your shader body, you can set the Albedo etc. //[...] }</span></span></code> </pre> <br>  <strong>å°±æ˜¯è¿™æ ·ï¼</strong> æˆ‘ä»¬å¯ä»¥å°†æ­¤è¿‡ç¨‹åº”ç”¨äºä»»ä½•ç°æœ‰çš„ç€è‰²å™¨ï¼Œå¹¶å°†å…¶è½¬å˜ä¸º<strong>æº¶è§£ç€è‰²å™¨</strong> ï¼ <br><br> è¿™æ˜¯Unityå¼•æ“çš„æ ‡å‡†Surface Shaderï¼Œå·²å˜æˆ<strong>åŒé¢</strong> <strong>æº¶è§£ç€è‰²å™¨ï¼š</strong> <br><br><pre> <code class="hljs pgsql">Shader "Custom/DissolveSurface" { Properties { _Color ("Color", Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) _MainTex ("Albedo (RGB)", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Glossiness ("Smoothness", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.5</span></span> _Metallic ("Metallic", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.0</span></span> //Dissolve properties _DissolveTexture("Dissolve Texutre", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Amount("Amount", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span> } SubShader { Tags { "RenderType"="Opaque" } LOD <span class="hljs-number"><span class="hljs-number">200</span></span> Cull <span class="hljs-keyword"><span class="hljs-keyword">Off</span></span> //Fast way <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> turn your material <span class="hljs-type"><span class="hljs-type">double</span></span>-sided CGPROGRAM #pragma surface surf Standard fullforwardshadows #pragma target <span class="hljs-number"><span class="hljs-number">3.0</span></span> sampler2D _MainTex; struct <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> { float2 uv_MainTex; }; half _Glossiness; half _Metallic; fixed4 _Color; //Dissolve properties sampler2D _DissolveTexture; half _Amount; <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { //Dissolve <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> half dissolve_value = tex2D(_DissolveTexture, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex).r; clip(dissolve_value - _Amount); //Basic shader <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> fixed4 c = tex2D (_MainTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex) * _Color; o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; } ENDCG } FallBack "Diffuse" }</code> </pre> <br><hr><br><h1> ç€è‰²å™¨å›¾ </h1><br> å¦‚æœéœ€è¦ä½¿ç”¨Unity <strong>Shader Graph</strong>åˆ›å»ºæ­¤æ•ˆæœï¼Œåˆ™å¿…é¡»ä½¿ç”¨<strong>AlphaClipThreshold</strong>å€¼ï¼ˆå…¶å·¥ä½œåŸç†ä¸HLSLä¸­çš„<strong>clipï¼ˆxï¼‰</strong>ä¸åŒï¼‰ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªPBRç€è‰²å™¨ã€‚ <br><br>  <strong>AlphaClipThreshold</strong>å‡½æ•°æŒ‡ç¤ºç€è‰²å™¨ä¸¢å¼ƒå…¶å€¼å°äºå…¶<strong>Alpha</strong>å€¼çš„æ‰€æœ‰åƒç´ ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå€¼ä¸º<strong>0.3f</strong> ï¼Œè€Œæˆ‘ä»¬çš„alphaå€¼ä¸º<strong>0.2f</strong> ï¼Œåˆ™ç€è‰²å™¨<strong>å°†ä¸ä¼šæ¸²æŸ“</strong>æ­¤åƒç´ ã€‚ å¯ä»¥åœ¨<strong>Unityæ–‡æ¡£ä¸­</strong>æ‰¾åˆ°<strong>AlphaClipThreshold</strong>å‡½æ•°ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PBRä¸»èŠ‚ç‚¹</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœªç‚¹äº®çš„ä¸»èŠ‚ç‚¹</a> ã€‚ <br><br> è¿™æ˜¯æˆ‘ä»¬å®Œæˆçš„ç€è‰²å™¨ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b9/368/ede/1b9368ede92dad1544f3ca702a2924ad.png"></div><br> æˆ‘ä»¬å¯¹<strong>æº¶è§£çº¹ç†è¿›è¡Œ</strong>é‡‡æ ·å¹¶è·å¾—<strong>çº¢è‰²</strong>çš„<strong>å€¼</strong> ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°<strong>Amount</strong>å€¼ï¼ˆè¿™æ˜¯æˆ‘æ·»åŠ ä»¥æŒ‡ç¤ºæ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹çš„å±æ€§ï¼Œè¯¥å€¼1è¡¨ç¤ºå®Œå…¨æº¶è§£ï¼‰å¹¶å°†å…¶è¿æ¥åˆ°<strong>AlphaClipThreshold</strong> ã€‚  <strong>åšå®Œäº†ï¼</strong> <br><br> å¦‚æœè¦å°†å…¶åº”ç”¨äºä»»ä½•ç°æœ‰çš„ç€è‰²å™¨ï¼Œåˆ™åªéœ€<strong>å°†</strong> <strong>èŠ‚ç‚¹è¿æ¥</strong> <strong>å¤åˆ¶</strong>åˆ°<strong>AlphaClipThreshold</strong> ï¼ˆä¸è¦é”™è¿‡å¿…è¦çš„å±æ€§ï¼ï¼‰ã€‚ æ‚¨ä¹Ÿå¯ä»¥ä½¿å…¶<strong>åŒè¾¹ï¼Œ</strong>å¹¶è·å¾—æ›´æ¼‚äº®çš„æ•ˆæœï¼ <br><br><hr><br><h1> è½®å»“æº¶è§£ç€è‰²å™¨ </h1><br> å¦‚æœæ‚¨å°è¯•ä¸ºå…¶æ·»åŠ <strong>è½®å»“</strong> ï¼Ÿ å¼€å§‹å§ï¼ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c59/0db/e64/c590dbe64e954bdc6c7ce1154726e80b.gif"></div><br> æˆ‘ä»¬æ— æ³•å¤„ç†å·²ç»æº¶è§£çš„åƒç´ ï¼Œå› ä¸ºæ”¾ä¸‹åƒç´ å<em>å®ƒä»¬ä¼šæ°¸è¿œæ¶ˆå¤±</em> ã€‚ ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œå‡ ä¹å·²åˆ†è§£â€çš„å€¼ï¼ <br><br> åœ¨<strong>HLSLä¸­ï¼Œ</strong>è¿™éå¸¸ç®€å•ï¼Œåªéœ€åœ¨è®¡ç®—<strong>å‰ªè¾‘</strong>åæ·»åŠ å‡ è¡Œä»£ç å³å¯ï¼š <br><br><pre> <code class="hljs powershell">void surf (Input <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, inout SurfaceOutputStandard o) { //[<span class="hljs-type"><span class="hljs-type">...</span></span>] //After our clip calculations <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dissolve_value - _Amount &lt; .<span class="hljs-number"><span class="hljs-number">05</span></span>f) //outline width = .<span class="hljs-number"><span class="hljs-number">05</span></span>f o.Emission = fixed3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); //emits white color //Your shader body, you can set the Albedo etc. //[<span class="hljs-type"><span class="hljs-type">...</span></span>] }</code> </pre> <br>  <strong>åšå®Œäº†ï¼</strong> <br><br> ä½¿ç”¨<strong>Shader Graphæ—¶ï¼Œ</strong>é€»è¾‘ç•¥æœ‰ä¸åŒã€‚ è¿™æ˜¯å®Œæˆçš„ç€è‰²å™¨ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e26/288/1ef/e262881ef6ad042856b345ba2d9f2765.png"></div><br><hr><br> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç®€å•çš„<strong>æº¶è§£ç€è‰²å™¨</strong>åˆ›å»ºéå¸¸<strong>é…·çš„æ•ˆæœ</strong> ï¼› æ‚¨å¯ä»¥å°è¯•<strong>ä¸åŒçš„çº¹ç†</strong>å’Œ<strong>å€¼</strong> ï¼Œä»¥åŠå…¶ä»–ä¸€äº›ä¸œè¥¿ï¼ <br><br><h1> ç¬¬2éƒ¨åˆ†ï¼šä¸–ç•Œæ¢ç´¢ç€è‰²å™¨ </h1><br>  <strong>ä¸–ç•Œæ¢ç´¢</strong>ç€è‰²å™¨ï¼ˆæˆ–â€œ <strong>ä¸–ç•Œæº¶å‡ºåº¦ç€è‰²å™¨</strong> ï¼Œæˆ–<strong>å…¨å±€æº¶å‡ºåº¦</strong> â€ï¼‰ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®å¯¹è±¡åˆ°ä½ç½®çš„è·ç¦»ç›¸ç­‰åœ°éšè—åœºæ™¯ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼›ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨<strong>Unity Shader Graphä¸­</strong>åˆ›å»ºè¿™æ ·çš„ç€è‰²<strong>å™¨</strong>å¹¶å°†å…¶å†™å…¥<strong>HLSL</strong> ã€‚ <br><br> è¿™æ˜¯æˆ‘ä»¬å°†åˆ›å»ºçš„ç¤ºä¾‹ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/228/7bb/169/2287bb1692d36eae92224f36359648a3.gif"></div><br><hr><br><h2> è·ç¦»ä½œä¸ºå‚æ•° </h2><br> å‡è®¾å¦‚æœåœºæ™¯ä¸­<strong>çš„ç‰©ä½“</strong> <strong>ç¦»æ’­æ”¾å™¨å¤ªè¿œï¼Œ</strong>æˆ‘ä»¬éœ€è¦å°†å…¶<strong>æº¶è§£</strong> ã€‚ æˆ‘ä»¬å·²ç»å®£å¸ƒäº†<strong>_Amount</strong>å‚æ•°ï¼Œè¯¥å‚æ•°æ§åˆ¶å¯¹è±¡çš„æ¶ˆå¤±/æ¶ˆå¤±ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç”¨å¯¹è±¡ä¸æ’­æ”¾å™¨ä¹‹é—´çš„è·ç¦»æ›¿æ¢å®ƒã€‚ <br><br> ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©<strong>Player</strong>å’Œ<strong>Object</strong>çš„ä½ç½®ã€‚ <br><br><h3> çƒå‘˜ä½ç½® </h3><br>  <strong>Unity Shader Graph</strong>å’Œ<strong>HLSL</strong> <strong>çš„è¿‡ç¨‹</strong>éƒ½ç›¸ä¼¼ï¼šæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­è½¬ç§»ç©å®¶çš„ä½ç½®ã€‚ <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//Updates the _PlayerPos variable in all the shaders //Be aware that the parameter name has to match the one in your shaders or it wont' work Shader.SetGlobalVector("_PlayerPos", transform.position); //"transform" is the transform of the Player }</span></span></code> </pre> <br><hr><br><h2> ç€è‰²å™¨å›¾ </h2><br><h4> ç‰©ä½“çš„ä½ç½®å’Œè·ç¦» </h4><br> ä½¿ç”¨æ˜æš—å™¨å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä½ç½®å’Œè·ç¦»èŠ‚ç‚¹ã€‚ <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PositionèŠ‚ç‚¹çš„æ–‡æ¡£</a> ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è·ç¦»èŠ‚ç‚¹çš„æ–‡æ¡£</a> ã€‚ </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b1/cdb/078/7b1cdb078a844a10451317e40a14df7c.png"></div><br>  PSè‹¥è¦ä½¿è¯¥ç³»ç»Ÿä¸Sprite Renderersä¸€èµ·ä½¿ç”¨ï¼Œæ‚¨éœ€è¦æ·»åŠ _MainTexå±æ€§ï¼Œå¯¹å…¶è¿›è¡Œé‡‡æ ·å¹¶å°†å…¶è¿æ¥åˆ°åç…§ç‡ã€‚ æ‚¨å¯ä»¥é˜…è¯»æˆ‘ä»¥å‰çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Spritesæ¼«åå°„ç€è‰²å™¨</a>æ•™ç¨‹ï¼ˆä½¿ç”¨ç€è‰²å™¨å›¾ï¼‰ã€‚ <br><br><hr><br><h2>  HLSLï¼ˆè¡¨é¢ï¼‰ </h2><br><h4> å¯¹è±¡ä½ç½® </h4><br> åœ¨HLSLä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†<strong>worldPos</strong>å˜é‡æ·»åŠ åˆ°<strong>Input</strong>ç»“æ„ä¸­ä»¥è·å–å¯¹è±¡é¡¶ç‚¹çš„ä½ç½®ã€‚ <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span></span>{ float2 uv_MainTex; float3 worldPos; <span class="hljs-comment"><span class="hljs-comment">//add this and Unity will set it automatically };</span></span></code> </pre> <br> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Unityæ–‡æ¡£é¡µé¢ä¸Šï¼Œ</a>æ‚¨å¯ä»¥æ‰¾åˆ°å…è®¸æ·»åŠ åˆ°Inputç»“æ„ä¸­çš„å…¶ä»–å†…ç½®å‚æ•°ã€‚ <br><br><h4> åº”ç”¨è·ç¦» </h4><br> æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç‰©ä½“ä¸ç©å®¶ä¹‹é—´çš„è·ç¦»ä½œä¸ºæº¶è§£é‡ã€‚ ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å†…ç½®çš„<strong>è·ç¦»</strong>åŠŸèƒ½ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microsoftæ–‡æ¡£</a> ï¼‰ã€‚ <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> surf (Input IN, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { half dissolve_value = tex2D(_DissolveTexture, IN.uv_MainTex).x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = distance(_PlayerPos, IN.worldPos); clip(dissolve_value - dist/ <span class="hljs-number"><span class="hljs-number">6</span></span>f); <span class="hljs-comment"><span class="hljs-comment">//"6" is the maximum distance where your object will start showing //Set albedo, alpha, smoothness etc[...] }</span></span></code> </pre> <br><h3> ç»“æœï¼ˆ3Dï¼‰ </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/868/f5c/2e8/868f5c2e803708138c71f84c95e3390c.gif"></div><br><h3> ç»“æœï¼ˆ2Dï¼‰ </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/289/380/e2b/289380e2ba53cbe569621821affc7009.gif"></div><br> å¦‚æ‚¨æ‰€è§ï¼Œå¯¹è±¡â€œå±€éƒ¨æº¶è§£â€ï¼Œæˆ‘ä»¬æ²¡æœ‰å¾—åˆ°å‡è´¨æ•ˆæœï¼Œå› ä¸ºæˆ‘ä»¬ä»ä½¿ç”¨æ¯ä¸ªå¯¹è±¡çš„UVé‡‡æ ·çš„çº¹ç†ä¸­è·å¾—â€œæº¶è§£å€¼â€ã€‚  ï¼ˆåœ¨2Dä¸­ï¼Œè¿™ä¸å¤ªæ˜æ˜¾ï¼‰ã€‚ <br><br><hr><br><h3>  HLSLä¸Šçš„3D LocalUV Dissolve Shader </h3><br><pre> <code class="hljs pgsql">Shader "Custom/GlobalDissolveSurface" { Properties { _Color ("Color", Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) _MainTex ("Albedo (RGB)", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Glossiness("Smoothness", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.5</span></span> _Metallic("Metallic", Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.0</span></span> _DissolveTexture("Dissolve texture", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Radius("Distance", <span class="hljs-type"><span class="hljs-type">Float</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span> //distance <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> we <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> reveal the objects } SubShader{ Tags { "RenderType" = "Opaque" } LOD <span class="hljs-number"><span class="hljs-number">200</span></span> Cull <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> //material <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> two sided CGPROGRAM #pragma surface surf Standard fullforwardshadows #pragma target <span class="hljs-number"><span class="hljs-number">3.0</span></span> sampler2D _MainTex; sampler2D _DissolveTexture; //texture <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> we <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> the dissolve <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> struct <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> { float2 uv_MainTex; float3 worldPos; //Built-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> world position }; half _Glossiness; half _Metallic; fixed4 _Color; float3 _PlayerPos; //"Global Shader Variable", contains the Player Position <span class="hljs-type"><span class="hljs-type">float</span></span> _Radius; <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { half dissolve_value = tex2D(_DissolveTexture, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex).x; <span class="hljs-type"><span class="hljs-type">float</span></span> dist = distance(_PlayerPos, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos); clip(dissolve_value - dist/ _Radius); fixed4 c = tex2D (_MainTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex) * _Color; o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; } ENDCG } FallBack "Diffuse" }</code> </pre> <br><h3>  Spritesæ¼«åå°„-HLSLä¸Šçš„LocalUV Dissolve Shader </h3><br><pre> <code class="hljs pgsql">Shader "Custom/GlobalDissolveSprites" { Properties { [PerRendererData] _MainTex("Sprite Texture", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Color("Tint", Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) [MaterialToggle] PixelSnap("Pixel snap", <span class="hljs-type"><span class="hljs-type">Float</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span> [HideInInspector] _RendererColor("RendererColor", Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) [HideInInspector] _Flip("Flip", Vector) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) [PerRendererData] _AlphaTex("External Alpha", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} [PerRendererData] _EnableExternalAlpha("Enable External Alpha", <span class="hljs-type"><span class="hljs-type">Float</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span> _DissolveTexture("Dissolve texture", <span class="hljs-number"><span class="hljs-number">2</span></span>D) = "white" {} _Radius("Distance", <span class="hljs-type"><span class="hljs-type">Float</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span> //distance <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> we <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> reveal the objects } SubShader { Tags { "Queue" = "Transparent" "IgnoreProjector" = "True" "RenderType" = "Transparent" "PreviewType" = "Plane" "CanUseSpriteAtlas" = "True" } Cull <span class="hljs-keyword"><span class="hljs-keyword">Off</span></span> Lighting <span class="hljs-keyword"><span class="hljs-keyword">Off</span></span> ZWrite <span class="hljs-keyword"><span class="hljs-keyword">Off</span></span> Blend One OneMinusSrcAlpha CGPROGRAM #pragma surface surf Lambert vertex:vert nofog nolightmap nodynlightmap keepalpha noinstancing #pragma multi_compile _ PIXELSNAP_ON #pragma multi_compile _ ETC1_EXTERNAL_ALPHA #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "UnitySprites.cginc" struct <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> { float2 uv_MainTex; fixed4 color; float3 worldPos; //Built-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> world position }; sampler2D _DissolveTexture; //texture <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> we <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> the dissolve <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> float3 _PlayerPos; //"Global Shader Variable", contains the Player Position <span class="hljs-type"><span class="hljs-type">float</span></span> _Radius; <span class="hljs-type"><span class="hljs-type">void</span></span> vert(<span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> appdata_full v, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> o) { v.vertex = UnityFlipSprite(v.vertex, _Flip); #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> defined(PIXELSNAP_ON) v.vertex = UnityPixelSnap(v.vertex); #endif UNITY_INITIALIZE_OUTPUT(<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span>, o); o.color = v.color * _Color * _RendererColor; } <span class="hljs-type"><span class="hljs-type">void</span></span> surf(<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutput o) { half dissolve_value = tex2D(_DissolveTexture, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex).x; <span class="hljs-type"><span class="hljs-type">float</span></span> dist = distance(_PlayerPos, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos); clip(dissolve_value - dist / _Radius); fixed4 c = SampleSpriteTexture(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.uv_MainTex) * <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.color; o.Albedo = c.rgb * ca; o.Alpha = ca; } ENDCG } Fallback "Transparent/VertexLit" }</code> </pre> <br>  PSä¸ºäº†åˆ›å»ºæœ€åä¸€ä¸ªç€è‰²å™¨ï¼Œæˆ‘å¤åˆ¶äº†æ ‡å‡†çš„Unity Sprites-Diffuseç€è‰²å™¨ï¼Œå¹¶æ·»åŠ äº†æœ¬æ–‡æ­¤éƒ¨åˆ†å‰é¢æ‰€è¿°çš„â€œæº¶è§£â€éƒ¨åˆ†ã€‚ æ‰€æœ‰æ ‡å‡†ç€è‰²å™¨éƒ½å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚ <br><br><hr><br><h2> ä½¿æ•ˆæœå‡åŒ€ </h2><br> ä¸ºäº†ä½¿æ•ˆæœå‡åŒ€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¨å±€åæ ‡ï¼ˆåœ¨ä¸–ç•Œä¸Šçš„ä½ç½®ï¼‰ä½œä¸ºæº¶è§£çº¹ç†çš„UVåæ ‡ã€‚ åœ¨æº¶å‡ºåº¦çº¹ç†å‚æ•°ä¸­è®¾ç½®<strong>Wrap = Repeat</strong>ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸æ³¨æ„åˆ°çº¹ç†çš„æƒ…å†µä¸‹é‡å¤çº¹ç†ï¼ˆç¡®ä¿çº¹ç†æ˜¯æ— ç¼çš„å¹¶ä¸”å¯ä»¥é‡å¤ï¼ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7db/b9f/e0e/7dbb9fe0e582bf7a63b2dccfb43a9b9b.png"></div><br><h4>  HLSLï¼ˆè¡¨é¢ï¼‰ </h4><br><pre> <code class="hljs delphi">half dissolve_value = tex2D(_DissolveTexture, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos / <span class="hljs-number"><span class="hljs-number">4</span></span>).x; <span class="hljs-comment"><span class="hljs-comment">//I modified the worldPos to reduce the texture size</span></span></code> </pre> <br><h4> ç€è‰²å™¨å›¾ </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/787/167/9c6/7871679c66cab1c842fe02c5ce523884.png"></div><br><h3> ç»“æœï¼ˆ2Dï¼‰ </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/428/b34/425/428b344254f3e80ef68b63ba8754dfa2.gif"></div><br> ç»“æœå°±æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œæ•´ä¸ªä¸–ç•Œçš„æº¶è§£è´¨åœ°ç°åœ¨æ˜¯ä¸€è‡´çš„ã€‚ <br><br> è¯¥ç€è‰²å™¨å·²ç»<strong>éå¸¸é€‚åˆ2Dæ¸¸æˆ</strong> ï¼Œä½†å¯¹äº<strong>3Då¯¹è±¡</strong>åˆ™éœ€è¦<strong>æ”¹è¿›</strong> ã€‚ <br><br><h3>  3Då¯¹è±¡çš„é—®é¢˜ </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/231/1f4/09b/2311f409be1ca990c276895eb8e49695.png"></div><br> å¦‚æ‚¨æ‰€è§ï¼Œç€è‰²å™¨ä¸é€‚ç”¨äºâ€œéå‚ç›´â€é¢ï¼Œå¹¶æå¤§åœ°æ‰­æ›²äº†çº¹ç†ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ  UVåæ ‡éœ€è¦å€¼float2ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡worldPosï¼Œåˆ™å®ƒä»…æ¥æ”¶Xå’ŒYã€‚ <br><br> å¦‚æœé€šè¿‡åº”ç”¨è®¡ç®—ä»¥åœ¨æ‰€æœ‰é¢ä¸Šæ˜¾ç¤ºçº¹ç†æ¥æ¶ˆé™¤æ­¤é—®é¢˜ï¼Œåˆ™ä¼šé‡åˆ°ä¸€ä¸ªæ–°é—®é¢˜ï¼šå˜æš—æ—¶ï¼Œå¯¹è±¡å°†å½¼æ­¤ç›¸äº¤ï¼Œå¹¶ä¸”å°†ä¸ä¼šä¿æŒå‡åŒ€ã€‚ <br><br> å¯¹äºåˆå­¦è€…è€Œè¨€ï¼Œè§£å†³æ–¹æ¡ˆå°†å¾ˆéš¾ç†è§£ï¼šå¿…é¡»æ¶ˆé™¤çº¹ç†ï¼Œåœ¨ä¸–ç•Œä¸Šäº§ç”Ÿä¸‰ç»´å™ªå£°ï¼Œå¹¶ä»ä¸­è·å¾—â€œæº¶å‡ºå€¼â€ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ä¼šè§£é‡Š3Då™ªå£°çš„äº§ç”Ÿï¼Œä½†æ˜¯æ‚¨å¯ä»¥æ‰¾åˆ°ä¸€å †å¯ä»¥ä½¿ç”¨çš„åŠŸèƒ½ï¼ <br><br> è¿™æ˜¯ä¸€ä¸ªå™ªå£°ç€è‰²å™¨ç¤ºä¾‹ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//github.com/keijiro/NoiseShader</a> ã€‚ æ‚¨è¿˜å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®äº†è§£å¦‚ä½•äº§ç”Ÿå™ªéŸ³ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//thebookofshaders.com/11/</a>å’Œæ­¤å¤„ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//catlikecoding.com/unity/tutorials/noise/</a> <br><br> æˆ‘å°†ä»¥è¿™ç§æ–¹å¼è®¾ç½®è¡¨é¢åŠŸèƒ½ï¼ˆå‡è®¾æ‚¨å·²ç»ç¼–å†™äº†å™ªæ³¢éƒ¨åˆ†ï¼‰ï¼š <br><br><pre> <code class="hljs powershell">void surf (Input <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, inout SurfaceOutputStandard o) { float dist = distance(_PlayerPos, IN.worldPos); //<span class="hljs-string"><span class="hljs-string">"abs"</span></span> because you have to make sure that the noise is between the range [<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>] //you can remove <span class="hljs-string"><span class="hljs-string">"abs"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> your noise <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returns</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">between</span></span></span><span class="hljs-function"> [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function">] //</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">also</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">replace</span></span></span><span class="hljs-function"> "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NOISE_FUNCTION_HERE</span></span></span><span class="hljs-function">" </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">with</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">your</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">3D</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noise</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">half</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dissolve_value</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(NOISE_FUNCTION_HERE(IN.worldPos)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dist &gt; _Radius)</span></span></span></span> { float clip_value = dissolve_value - ((dist - _Radius) / _Radius); clip(clip_value); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (clip_value &lt; <span class="hljs-number"><span class="hljs-number">0.05</span></span>f) o.Emission = float3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); } fixed4 c = tex2D (_MainTex, IN.uv_MainTex) * _Color; o.Albedo = c.rgb; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</code> </pre> <br>  HLSLçš„ç®€è¦æé†’ï¼šåœ¨ä½¿ç”¨/è°ƒç”¨å‡½æ•°ä¹‹å‰ï¼Œå¿…é¡»å…ˆç¼–å†™/å£°æ˜å‡½æ•°ã€‚ <br><br>  PSå¦‚æœè¦ä½¿ç”¨Unity Shader Graphåˆ›å»ºç€è‰²å™¨ï¼Œåˆ™éœ€è¦ä½¿ç”¨â€œè‡ªå®šä¹‰èŠ‚ç‚¹â€ï¼ˆå¹¶é€šè¿‡åœ¨å…¶ä¸­å†™å…¥HLSLä»£ç æ¥äº§ç”Ÿå™ªå£°ï¼‰ã€‚ æˆ‘å°†åœ¨ä»¥åçš„æ•™ç¨‹ä¸­è®¨è®ºè‡ªå®šä¹‰èŠ‚ç‚¹ã€‚ <br><br><h3> ç»“æœï¼ˆ3Dï¼‰ </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce6/a89/ad3/ce6a89ad324ff4a03d4bfabf1a694024.gif"></div><br><hr><br><h2> æ·»åŠ è½®å»“ </h2><br> è¦æ·»åŠ è½®å»“ï¼Œæ‚¨éœ€è¦ä»æ•™ç¨‹çš„ä¸Šä¸€éƒ¨åˆ†å¼€å§‹é‡å¤è¯¥è¿‡ç¨‹ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/228/7bb/169/2287bb1692d36eae92224f36359648a3.gif"></div><br><hr><br><h2> åä½œç”¨ </h2><br> å¦‚æœæˆ‘ä»¬æƒ³æ‰­è½¬è¿™ç§å½±å“ï¼Ÿ  ï¼ˆå¦‚æœç©å®¶åœ¨é™„è¿‘ï¼Œåˆ™ç‰©ä½“åº”æ¶ˆå¤±ï¼‰ <br><br> å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œæ›´æ”¹ä¸€è¡Œå°±è¶³å¤Ÿäº†ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">float</span></span> dist = _Radius - distance(_PlayerPos, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos);</code> </pre> <br>  ï¼ˆç›¸åŒçš„è¿‡ç¨‹é€‚ç”¨äºShader Graphï¼‰ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/579/86c/1f9/57986c1f96a56f1ec478b64c89be3eba.gif"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN427401/">https://habr.com/ru/post/zh-CN427401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN427391/index.html">é¢å‘é’å°‘å¹´çš„æç¤ºï¼šå»ºç«‹è‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯</a></li>
<li><a href="../zh-CN427393/index.html">ä¼ä¸šæ— çº¿å®‰å…¨åˆ†æ</a></li>
<li><a href="../zh-CN427395/index.html">â€œè®©æˆ‘ä»¬è§£é‡Šä¸€ä¸‹ï¼šè¿˜æ˜¯æ•°å­¦å®¶ç¨‹åºå‘˜ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšã€‚â€ å…³äºå¦‚ä½•ä¸é”™è¿‡æ•°å­¦è®²åº§çš„ä¹¦</a></li>
<li><a href="../zh-CN427397/index.html">å¼€å‘ç”¨äºè®­ç»ƒç¥ç»ç½‘ç»œçš„å£°å­¦æ•°æ®é›†</a></li>
<li><a href="../zh-CN427399/index.html">åœ¨åŸºäºGraphQLæ„å»ºAPIæ—¶ä½¿ç”¨æ•°æ®</a></li>
<li><a href="../zh-CN427403/index.html">ReportingObserver APIï¼šä»¥æ–°çš„è§’åº¦çœ‹å¾…ç½‘é¡µä»£ç </a></li>
<li><a href="../zh-CN427405/index.html">ES2018-æœ€ç»ˆæ‰¿è¯ºæ–¹æ³•</a></li>
<li><a href="../zh-CN427407/index.html">è¯¯å·®æœ€å°åŒ–çš„å…ƒé›†ç¾¤ï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘è®¤ä¸ºå¤§è„‘ä»¥è¿™ç§æ–¹å¼å·¥ä½œ</a></li>
<li><a href="../zh-CN427409/index.html">è¯¥ä¹¦â€œè¾‰ç…Œçš„æ•æ·ã€‚ ä½¿ç”¨æ•æ·ï¼ŒScrumå’Œçœ‹æ¿çš„çµæ´»é¡¹ç›®ç®¡ç†Â»</a></li>
<li><a href="../zh-CN427413/index.html">äº‰å¤ºèµ„æºï¼Œç¬¬4éƒ¨åˆ†ï¼šå¤ªå¥½äº†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>