<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôìÔ∏è üòü üë° Gerenciar o estado do aplicativo no Flutter ü§§ üöç üÜñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Apresentando uma tradu√ß√£o do artigo, deixe-me ajud√°-lo a entender e escolher uma solu√ß√£o de gerenciamento de estado para seu aplicativo , qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gerenciar o estado do aplicativo no Flutter</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435780/">  Ol√° Habr!  Apresentando uma tradu√ß√£o do artigo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">deixe-me ajud√°-lo a entender e escolher uma solu√ß√£o de gerenciamento de estado para seu aplicativo</a> , que chamou minha aten√ß√£o e se interessou no processo de aprender os conceitos b√°sicos de gerenciamento de estado em Flutter.  Ficarei feliz em ouvir cr√≠ticas sobre esta tradu√ß√£o.  Nas aspas (``) ser√£o escritos meus pensamentos e explica√ß√µes pessoais. <br><img src="https://habrastorage.org/webt/an/bb/mz/anbbmzniucp0j9vgce-jkazayam.png"><br><a name="habracut"></a><br>  Gerenciamento de estado de vibra√ß√£o √© um t√≥pico importante.  Existem muitas solu√ß√µes poss√≠veis para o problema e, confundindo-se com elas, a escolha da mais adequada √†s suas necessidades √© extremamente simples.  Eu mesmo estava confuso, mas encontrei uma solu√ß√£o adequada.  Deixe-me compartilhar com voc√™. <br><br>  Para encontrar uma solu√ß√£o que atenda √†s suas necessidades, voc√™ precisa determinar as pr√≥prias necessidades.  No meu caso, √© o seguinte: <br><br><ul><li>  Ter a oportunidade de desenvolver o projeto sem comprometer a qualidade do c√≥digo </li><li>  Separe a l√≥gica de exibi√ß√£o da l√≥gica de neg√≥cios </li><li>  Tenha um c√≥digo claro e dif√≠cil de quebrar </li><li>  Previsibilidade e compreensibilidade do c√≥digo </li></ul><br>  Atendendo a esses requisitos, permanecem op√ß√µes adequadas: <br><br><ul><li> Usando o m√©todo <code>setState()</code> e Widgets com Estado </li><li>  ScopedModel `Library` </li><li>  Usando o padr√£o BLoC (Business Logic Components) </li><li>  Redux </li></ul><br><h4>  A diferen√ßa entre estado local e global </h4><br>  Antes de mergulhar na an√°lise das solu√ß√µes selecionadas, voc√™ precisa entender a diferen√ßa entre o estado local e o global.  Um exemplo pr√°tico √© adequado para isso: <br>  Imagine um formul√°rio de autoriza√ß√£o, em que o usu√°rio √© solicitado a inserir um nome de usu√°rio e senha e obter o objeto "identidade do usu√°rio" ap√≥s o envio do formul√°rio.  Neste exemplo, qualquer verifica√ß√£o dos dados inseridos nos campos do formul√°rio far√° parte do estado local do `widget de formul√°rio de autoriza√ß√£o ', e o restante do aplicativo n√£o deve estar ciente disso.  E o objeto "identidade" retornado pelo "servidor de autoriza√ß√£o" faz parte do estado global.  Portanto, outros componentes dependem desse objeto, alterando o comportamento, dependendo se o usu√°rio est√° autorizado. <br><br><div class="spoiler">  <b class="spoiler_title">Breves conclus√µes para quem est√° cansado de esperar</b> <div class="spoiler_text">  Se voc√™ n√£o quiser esperar ou n√£o estiver interessado em minha pesquisa, aqui est√° uma breve vis√£o geral dos resultados: <br><br><img src="https://habrastorage.org/webt/j2/gw/py/j2gwpy580ri_d_fqt0ky0cpmlvs.png"><br><blockquote>  Minha recomenda√ß√£o √© usar o BLoC para gerenciamento de estado local e o Redux para o estado global, especialmente se voc√™ estiver criando um aplicativo complexo que crescer√° com o tempo. </blockquote><br></div></div><br><h4>  Por que voc√™ n√£o deve usar setState () </h4><br>  O uso de <code>setState()</code> dentro de seus widgets √© √≥timo para prototipar rapidamente e obter feedback sobre essas altera√ß√µes, mas dessa maneira n√£o nos ajuda a alcan√ßar nossos objetivos, porque a l√≥gica de exibi√ß√£o √© misturada √† l√≥gica de neg√≥cios, o que viola o princ√≠pio de limpeza e qualidade do c√≥digo.  A manuten√ß√£o desse c√≥digo ser√° dif√≠cil no futuro; portanto, exceto para a cria√ß√£o de prot√≥tipos, essa abordagem n√£o √© recomendada. <br><br><h4>  ScopedModel - um passo na dire√ß√£o certa </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ScopedModel</a> √© uma biblioteca de terceiros de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Brian Egan</a> .  Isso possibilita a cria√ß√£o de objetos <code>Models</code> especiais, al√©m de usar o m√©todo <code>notifyListeners()</code> quando necess√°rio.  Por exemplo, para rastrear qualquer altera√ß√£o nas propriedades de um objeto de modelo: <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CounterModel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> get counter = _counter; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ _counter++; notifyListeners(); } }</code> </pre><br>  Em nossos widgets, poderemos responder a altera√ß√µes no modelo usando o widget <code>ScopedModelDescendant</code> `fornecido por esta biblioteca <code>ScopedModelDescendant</code> : <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CounterApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScopedModel&lt;CounterModel&gt;( model: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CounterModel(), child: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column(children: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScopedModelDescendant&lt;CounterModel&gt;( builder: (context, child, model) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Text(<span class="hljs-string"><span class="hljs-string">'${model.counter}'</span></span>), ), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Text(<span class="hljs-string"><span class="hljs-string">" ,     CounterModel"</span></span>) ]) ); } }</code> </pre><br>  Ao contr√°rio do uso da abordagem <code>setState()</code> , esta solu√ß√£o permite separar a l√≥gica de exibi√ß√£o da l√≥gica de neg√≥cios.  No entanto, imp√µe certas restri√ß√µes: <br><br><ul><li>  Se o <code>Model</code> se tornar complexo, fica dif√≠cil determinar quando usar o m√©todo <code>notifyListeners()</code> e, quando n√£o, evitar atualiza√ß√µes desnecess√°rias da interface. </li><li>  A API fornecida pelo <code>Model</code> , em geral, n√£o descreve com precis√£o a natureza ass√≠ncrona da interface do aplicativo </li></ul><br>  Dado tudo isso, se o estado do seu aplicativo n√£o for f√°cil de gerenciar, n√£o recomendo usar essa abordagem de dados.  S√≥ n√£o acredito que ele seja capaz de fornecer produtivamente o crescimento e a complexidade dos aplicativos. <br><br><h4>  Solu√ß√£o poderosa - BLoC </h4><br>  Esse padr√£o foi inventado pelo Google e tamb√©m √© usado l√°.  Ele nos ajudar√° a alcan√ßar os seguintes objetivos: <br><br><ul><li>  Separa√ß√£o da l√≥gica de exibi√ß√£o da l√≥gica de neg√≥cios </li><li>  Usando natureza ass√≠ncrona para exibir uma interface </li><li>  A capacidade de reutilizar em diferentes aplicativos Dart, como Flutter ou AngularDart </li></ul><br>  A ideia por tr√°s dessa abordagem √© muito simples: <br><br><ul><li>  Utiliza BLoC <pre> <code class="java hljs">Sink&lt;T&gt;</code> </pre>  API para descrever a entrada ass√≠ncrona de nossos componentes de dados </li><li>  Utiliza BLoC <pre> <code class="java hljs">Stream&lt;T&gt;</code> </pre>  API para descrever dados retornados de forma ass√≠ncrona por nossos componentes </li><li>  Por fim, podemos usar o widget <code>StreamBuilder</code> para controlar fluxos de dados, sem <code>StreamBuilder</code> nenhum esfor√ßo de nossa parte para assinar atualiza√ß√µes de dados e redesenhar widgets </li></ul><br>  O Google tem bons exemplos de uso desse padr√£o de gerenciamento de estado, pois √© amplamente usado e altamente recomendado pela empresa. <br><br>  Eu pr√≥prio recomendo usar esta abordagem para gerenciar o estado local, mas √© at√© adequada para gerenciar o estado global.  No entanto, no √∫ltimo caso, voc√™ encontrar√° um problema - onde e como implementar corretamente o BLoC para que diferentes componentes tenham acesso a ele e, em seguida, o Redux entra em cena. <br><br><h4>  Redux e BLoC - a mistura perfeita para mim </h4><br>  Um dos objetivos que descrevi no in√≠cio do artigo era encontrar algo amplamente usado e previs√≠vel, e esse √© o Redux - um padr√£o e um conjunto de ferramentas que juntos nos ajudam a gerenciar o estado global.  Ele tem tr√™s princ√≠pios b√°sicos no n√∫cleo: <br><br>  <b>A √∫nica fonte de verdade</b> √© que todo o estado do <code>state</code> seu aplicativo √© armazenado em um objeto de √°rvore em um √∫nico <code>store</code> <br><br><ul><li>  O estado √© somente leitura - a √∫nica maneira de alterar o estado √© chamar um objeto de a√ß√£o especial que descreva o que deve acontecer com o estado </li><li>  As altera√ß√µes s√£o feitas usando fun√ß√µes puras - para determinar quais altera√ß√µes de estado, voc√™ escreve a fun√ß√£o pura ' <code>reducer</code> , que n√£o deve causar efeitos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">colaterais` Link para o c√≥digo de exemplo`</a> </li></ul><br><img src="https://habrastorage.org/webt/0h/43/fp/0h43fp5oddvqxfhez1pdbfjau90.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link para a postagem original, de onde a imagem vem</a> <br><br>  Essa abordagem para gerenciar o estado √© amplamente aceita pelos desenvolvedores da Web, e sua apar√™ncia em dispositivos m√≥veis ajudar√° a beneficiar os desenvolvedores da Web e de aplicativos m√≥veis. <br><br>  Brian Egan est√° desenvolvendo o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redux</a> original e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">flutter_redux</a> , e tamb√©m criou um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo Todo</a> incr√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">,</a> no qual aplicou muitos padr√µes arquiteturais, incluindo o Redux. <br>  Dadas todas as qualidades do Redux, recomendo fortemente us√°-lo para gerenciar o estado global, mas voc√™ deve ter certeza de que n√£o o usa para gerenciar o estado local, se desejar dimensionar seu aplicativo. <br><br><h4>  √öltimas palavras </h4><br>  N√£o h√° solu√ß√£o completamente correta ou incorreta neste artigo.  Para decidir qual abordagem aplicar em seu projeto, voc√™ precisa decidir sobre suas necessidades.  Para mim e meus objetivos, a combina√ß√£o de Redux e BLoC permite que meus projetos cres√ßam com rapidez e seguran√ßa, al√©m de facilitar a entrada de desenvolvedores de terceiros nesses projetos, gra√ßas a ferramentas acess√≠veis e claras.  No entanto, nem todos t√™m as mesmas necessidades e, com o tempo, voc√™ pode encontrar problemas 'nas ferramentas atuais' e solu√ß√µes ainda melhores.  √â muito importante permanecer sempre curioso, aprender e pensar se essa ou aquela ferramenta √© adequada para voc√™. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435780/">https://habr.com/ru/post/pt435780/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435766/index.html">Ol√° mundo! Ou Habr de l√≠ngua inglesa, v1.0</a></li>
<li><a href="../pt435770/index.html">Hackers secretos VS C√≥digo</a></li>
<li><a href="../pt435774/index.html">Ilha do Pico: como fazer Tussent aconchegante do inferno bas√°ltico</a></li>
<li><a href="../pt435776/index.html">V√≠deo a bordo dos processos de prepara√ß√£o e pouso, bem como um panorama do lado oposto da lua de Chang'e-4</a></li>
<li><a href="../pt435778/index.html">Como aprimorei minhas habilidades no trabalho com algoritmos, estruturas de dados e aprendi a usar tudo isso na pr√°tica</a></li>
<li><a href="../pt435782/index.html">Elementary Canvas</a></li>
<li><a href="../pt435784/index.html">Unidades flash "de marca". Um gato em uma bolsa de marca</a></li>
<li><a href="../pt435786/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 23: Economia da Seguran√ßa, Parte 1</a></li>
<li><a href="../pt435788/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 23: Economia da Seguran√ßa, Parte 2</a></li>
<li><a href="../pt435792/index.html">Esses caras t√≥xicos: envenenam projetos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>