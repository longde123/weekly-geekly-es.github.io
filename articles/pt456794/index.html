<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìä üëì üñäÔ∏è Arquitetura da interface do usu√°rio da Web: um passado de madeira, um presente estranho e um futuro brilhante üë®‚Äçüé® üë©üèΩ‚ÄçüöÄ ü•†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A comunidade moderna de desenvolvedores agora est√° mais do que nunca sujeita a moda e tend√™ncias, e isso √© especialmente verdadeiro para o mundo do de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arquitetura da interface do usu√°rio da Web: um passado de madeira, um presente estranho e um futuro brilhante</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456794/"><img src="https://habrastorage.org/webt/g1/rr/97/g1rr97vliagp-2dndxhmubahvrg.png" alt="imagem"><br><br>  A comunidade moderna de desenvolvedores agora est√° mais do que nunca sujeita a moda e tend√™ncias, e isso √© especialmente verdadeiro para o mundo do desenvolvimento front-end.  Nossas estruturas e novas pr√°ticas s√£o o principal valor, e a maioria dos curr√≠culos, vagas e programas de confer√™ncias consiste em list√°-las.  E embora o desenvolvimento de id√©ias e ferramentas n√£o seja negativo por si s√≥, mas devido ao desejo constante dos desenvolvedores de seguir tend√™ncias ilus√≥rias, come√ßamos a esquecer a import√¢ncia do conhecimento te√≥rico geral sobre arquitetura de aplicativos. <br><br>  A preval√™ncia do valor de ajuste sobre o conhecimento da teoria e das melhores pr√°ticas levou ao fato de que a maioria dos novos projetos hoje tem um n√≠vel extremamente baixo de manuten√ß√£o, criando assim um inconveniente significativo para os desenvolvedores (a complexidade consistentemente alta do estudo e modifica√ß√£o do c√≥digo) e para os clientes (taxas baixas e alto custo de desenvolvimento). <br><br>  Para influenciar de alguma forma a situa√ß√£o atual, hoje eu gostaria de falar sobre o que √© uma boa arquitetura, como √© aplic√°vel √†s interfaces da Web e, o mais importante, como ela evolui ao longo do tempo. <br><br>  <i><b>NB</b> : Como exemplos no artigo, apenas as estruturas com as quais o autor lidou diretamente ser√£o usadas, e aten√ß√£o significativa ser√° dada a React e Redux aqui.</i>  <i>Mas, apesar disso, muitas das id√©ias e princ√≠pios descritos aqui s√£o de natureza geral e podem ser projetados com mais ou menos sucesso em outras tecnologias de desenvolvimento de interface.</i> <br><br><a name="habracut"></a><h2>  Arquitetura para manequins </h2><br>  Para come√ßar, vamos lidar com o pr√≥prio termo.  Em palavras simples, a arquitetura de qualquer sistema √© a defini√ß√£o de seus componentes e o esquema de intera√ß√£o entre eles.  Esse √© um tipo de base conceitual sobre a qual a implementa√ß√£o ser√° posteriormente constru√≠da. <br><br>  A tarefa da arquitetura √© satisfazer os requisitos externos para o sistema projetado.  Esses requisitos variam de projeto para projeto e podem ser bastante espec√≠ficos, mas, no caso geral, s√£o para facilitar os processos de modifica√ß√£o e expans√£o das solu√ß√µes desenvolvidas. <br><br>  Quanto √† qualidade da arquitetura, ela geralmente √© expressa nas seguintes propriedades: <br><br>  - <b>Capacidade de acompanhamento</b> : a predisposi√ß√£o do sistema j√° mencionada para estudo e modifica√ß√£o (dificuldade em detectar e corrigir erros, expandir a funcionalidade, adaptar a solu√ß√£o a outro ambiente ou condi√ß√µes) <br>  - <b>Substituibilidade</b> : a capacidade de alterar a implementa√ß√£o de qualquer elemento do sistema sem afetar outros elementos <br>  - <b>Testabilidade</b> : a capacidade de verificar a opera√ß√£o correta do elemento (a capacidade de controlar o elemento e observar seu estado) <br>  - <b>Portabilidade</b> : a capacidade de reutilizar um elemento em outros sistemas <br>  - <b>Usabilidade</b> : o grau geral de conveni√™ncia do sistema quando operado pelo usu√°rio final <br><br>  Tamb√©m √© feita men√ß√£o separada a um dos princ√≠pios fundamentais da constru√ß√£o de uma arquitetura de qualidade: o princ√≠pio da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">separa√ß√£o de preocupa√ß√µes</a> .  Consiste no fato de que qualquer elemento do sistema deve ser respons√°vel exclusivamente por uma √∫nica tarefa (aplicada, ali√°s, ao c√≥digo do aplicativo: consulte o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">princ√≠pio da responsabilidade √∫nica</a> ). <br><br>  Agora que temos uma id√©ia do conceito de arquitetura, vamos ver o que os padr√µes de design de arquitetura podem nos oferecer no contexto de interfaces. <br><br><h2>  As tr√™s palavras mais importantes </h2><br>  Um dos padr√µes mais famosos do desenvolvimento de interfaces √© o MVC (Model-View-Controller), cujo conceito principal √© dividir a l√≥gica da interface em tr√™s partes separadas: <br><br>  1. <b>Modelo</b> - √© respons√°vel por receber, armazenar e processar dados <br>  2. <b>View</b> - respons√°vel pela visualiza√ß√£o de dados <br>  3. <b>Controlador</b> - controla Modelo e Vis√£o <br><br>  Esse padr√£o tamb√©m inclui uma descri√ß√£o do esquema de intera√ß√£o entre eles, mas aqui essas informa√ß√µes ser√£o omitidas devido ao fato de que, ap√≥s certo tempo, o p√∫blico em geral tenha recebido uma modifica√ß√£o aprimorada desse padr√£o chamada MVP (Model-View-Presenter), que esse esquema original intera√ß√£o bastante simplificada: <br><br><img src="https://habrastorage.org/webt/sv/j_/r2/svj_r22lb39syciykkximzlk-vy.png" alt="imagem"><br><br>  Como falamos especificamente sobre interfaces da web, usamos outro elemento bastante importante que geralmente acompanha a implementa√ß√£o desses padr√µes - um roteador.  Sua tarefa √© ler o URL e chamar os apresentadores associados a ele. <br><br>  O esquema acima funciona da seguinte maneira: <br><br>  1. O roteador l√™ o URL e chama o Presenter associado <br>  2-5.  O apresentador se volta para o modelo e obt√©m os dados necess√°rios. <br>  6. O Presenter transfere dados do Model para o View, o que implementa sua visualiza√ß√£o. <br>  7. Durante a intera√ß√£o do usu√°rio com a interface, o View notifica o Presenter sobre isso, o que nos leva ao segundo ponto <br><br>  Como a pr√°tica demonstrou, o MVC e o MVP n√£o s√£o uma arquitetura ideal e universal, mas ainda fazem uma coisa muito importante - indicam tr√™s √°reas principais de responsabilidade, sem as quais nenhuma interface pode ser implementada de uma forma ou de outra. <br><br>  <i>NB: Em geral, os conceitos de Controller e Presenter significam a mesma coisa, e a diferen√ßa em seu nome √© necess√°ria apenas para diferenciar os padr√µes mencionados, que diferem apenas na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">implementa√ß√£o das comunica√ß√µes</a> .</i> <br><br><h2>  MVC e renderiza√ß√£o do servidor </h2><br>  Apesar do MVC ser um padr√£o para implementar um cliente, ele tamb√©m encontra seu aplicativo no servidor.  Al√©m disso, √© no contexto do servidor que √© mais f√°cil demonstrar os princ√≠pios de sua opera√ß√£o. <br><br>  Nos casos em que lidamos com sites de informa√ß√µes cl√°ssicas, em que a tarefa do servidor da web √© gerar p√°ginas HTML para o usu√°rio, o MVC tamb√©m nos permite organizar uma arquitetura de aplicativos bastante concisa: <br><br>  - O roteador l√™ os dados da solicita√ß√£o HTTP recebida <i>(GET / user-profile / 1)</i> e chama o Controller associado <i>(UsersController.getProfilePage (1))</i> <br>  - O controlador chama o Model para obter as informa√ß√µes necess√°rias do banco de dados <i>(UsersModel.get (1))</i> <br>  - O controlador passa os dados recebidos para View <i>(View.render ('users / profile', user))</i> e recebe a marca√ß√£o HTML a partir dele, que os transmite de volta ao cliente <br><br>  Nesse caso, o View geralmente √© implementado da seguinte maneira: <br><br><img src="https://habrastorage.org/webt/1j/q6/_f/1jq6_frux0usp6akgw91lj3bq5o.png" alt="imagem"><br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templates = { <span class="hljs-string"><span class="hljs-string">'users/profile'</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;div class="user-profile"&gt; &lt;h2&gt;{{ name}}&lt;/h2&gt; &lt;p&gt;E-mail: {{ email }}&lt;/p&gt; &lt;p&gt; Projects: {{#each projects}} &lt;a href="/projects/{{id}}"&gt;{{name}}&lt;/a&gt; {{/each}} &lt;/p&gt; &lt;a href=/user-profile/1/edit&gt;Edit&lt;/a&gt; &lt;/div&gt; `</span></span> }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ render(templateName, data) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> htmlMarkup = TemplateEngine.render(templates[templateName], data); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> htmlMarkup; } }</code> </pre> <br>  <i>Nota: o c√≥digo acima √© intencionalmente simplificado para uso como exemplo.</i>  <i>Em projetos reais, os modelos s√£o exportados para separar arquivos e passar pelo est√°gio de compila√ß√£o antes do uso (consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Handlebars.compile ()</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">_.template ()</a> ).</i> <br><br>  Aqui s√£o utilizados os chamados mecanismos de modelo, que nos fornecem ferramentas para uma descri√ß√£o conveniente de modelos de texto e mecanismos para substituir dados reais neles. <br><br>  Essa abordagem para a implementa√ß√£o do View n√£o apenas demonstra uma separa√ß√£o ideal de responsabilidades, mas tamb√©m fornece um alto grau de testabilidade: para verificar a corre√ß√£o da exibi√ß√£o, basta comparar a linha de refer√™ncia com a linha que obtivemos do mecanismo de modelo. <br><br>  Assim, usando o MVC, obtemos uma arquitetura quase perfeita, onde cada um de seus elementos tem um objetivo muito espec√≠fico, conectividade m√≠nima e tamb√©m possui um alto n√≠vel de testabilidade e portabilidade. <br><br>  Quanto √† abordagem com a gera√ß√£o de marca√ß√£o HTML usando ferramentas de servidor, devido ao baixo UX, essa abordagem come√ßou a ser substitu√≠da gradualmente pelo SPA. <br><br><h2>  Backbone e MVP </h2><br>  Uma das primeiras estruturas a trazer totalmente a l√≥gica de exibi√ß√£o para o cliente foi o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Backbone.js</a> .  A implementa√ß√£o do roteador, apresentador e modelo √© bastante padr√£o, mas a nova implementa√ß√£o do View merece nossa aten√ß√£o: <br><br><img src="https://habrastorage.org/webt/e6/iv/ye/e6ivye6jq6mo0gq_r1re8fua5uq.png" alt="imagem"><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> UserProfile = Backbone.View.extend({ <span class="hljs-attr"><span class="hljs-attr">tagName</span></span>: <span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'user-profile'</span></span>, <span class="hljs-attr"><span class="hljs-attr">events</span></span>: { <span class="hljs-string"><span class="hljs-string">'click .button.edit'</span></span>: <span class="hljs-string"><span class="hljs-string">'openEditDialog'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">openEditDialog</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }, initialize: function() { this.listenTo(this.model, 'change', this.render); }, template: _.template(` &lt;h2&gt;&lt;%= name %&gt;&lt;/h2&gt; &lt;p&gt;E-mail: &lt;%= email %&gt;&lt;/p&gt; &lt;p&gt; Projects: &lt;% _.each(projects, project =&gt; { %&gt; &lt;a href="/projects/&lt;%= project.id %&gt;"&gt;&lt;%= project.name %&gt;&lt;/a&gt; &lt;% }) %&gt; &lt;/p&gt; &lt;button class="edit"&gt;Edit&lt;/button&gt; `), render: function() { this.$el.html(this.template(this.model.attributes)); } });</span></span></code> </pre><br>  Obviamente, a implementa√ß√£o do mapeamento se tornou muito mais complicada - a escuta de eventos do modelo e do DOM, bem como a l√≥gica de seu processamento, foi adicionada √† padroniza√ß√£o elementar.  Al√©m disso, para exibir altera√ß√µes na interface, √© altamente desej√°vel n√£o renderizar novamente o View completamente, mas fazer um trabalho mais refinado com elementos DOM espec√≠ficos (geralmente usando jQuery), o que exigiu a cria√ß√£o de muito c√≥digo adicional. <br><br>  Devido √† complica√ß√£o geral da implementa√ß√£o do View, seus testes ficaram mais complicados - j√° que agora estamos trabalhando diretamente com a √°rvore DOM, para testar, precisamos usar ferramentas adicionais que forne√ßam ou emulem o ambiente do navegador. <br><br>  E os problemas com a nova implementa√ß√£o do View n√£o terminaram a√≠: <br><br>  Al√©m do acima, √© bastante dif√≠cil usar aninhados um no outro.  Com o tempo, esse problema foi resolvido com a ajuda de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Regi√µes</a> no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Marionette.js</a> , mas, antes disso, os desenvolvedores tinham que inventar seus pr√≥prios truques para resolver esse problema bastante simples e frequentemente surgido. <br><br>  E o √∫ltimo.  As interfaces desenvolvidas dessa maneira eram predispostas a dados fora de sincronia - uma vez que todos os modelos existiam isolados no n√≠vel de diferentes apresentadores, ent√£o, quando os dados eram alterados em uma parte da interface, eles geralmente n√£o eram atualizados em outra. <br><br>  Mas, apesar desses problemas, essa abordagem era mais do que vi√°vel, e o desenvolvimento do Backbone mencionado anteriormente na forma de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Marionette</a> ainda pode ser aplicado com sucesso no desenvolvimento do SPA. <br><br><h2>  Reagir e anular </h2><br>  √â dif√≠cil de acreditar, mas no momento do seu lan√ßamento inicial, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">React.js</a> causou muito ceticismo na comunidade de desenvolvedores.  Esse ceticismo foi t√£o grande que, por muito tempo, o seguinte texto foi publicado no site oficial: <br><br><blockquote>  D√™ cinco minutos <br>  A rea√ß√£o desafia muita sabedoria convencional e, √† primeira vista, algumas das id√©ias podem parecer loucas. </blockquote><br>  E isso apesar do fato de que, diferentemente da maioria de seus concorrentes e antecessores, o React n√£o era uma estrutura completa e era apenas uma pequena biblioteca para facilitar a exibi√ß√£o de dados no DOM: <br><br><blockquote>  React √© uma biblioteca JavaScript para criar interfaces de usu√°rio pelo Facebook e Instagram.  Muitas pessoas optam por pensar em React como o V no MVC. <br></blockquote><br>  O principal conceito que o React nos oferece √© o conceito de um componente que, de fato, nos fornece uma nova maneira de implementar o View: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ handleEdit() { <span class="hljs-comment"><span class="hljs-comment">// .. } render() { const { name, email, projects } = this.props; return ( &lt;div className="user-profile"&gt; &lt;h2&gt;{name}&lt;/h2&gt; &lt;p&gt;E-mail: {email}&lt;/p&gt; &lt;p&gt; Projects: { projects.map(project =&gt; &lt;a href="/projects/{project.id}"&gt;{project.name}&lt;/a&gt;) } &lt;/p&gt; &lt;button onClick={this.handleEdit}&gt;Edit&lt;/button&gt; &lt;/div&gt; ); } }</span></span></code> </pre> <br>  Reagir foi incrivelmente agrad√°vel de usar.  Entre suas vantagens ineg√°veis ‚Äã‚Äãestavam at√© hoje: <br><br>  1) <b>Declara√ß√£o e reatividade</b> .  N√£o √© mais necess√°rio atualizar manualmente o DOM ao alterar os dados exibidos. <br><br>  2) <b>A composi√ß√£o dos componentes</b> .  Construir e explorar a √°rvore View tornou-se uma a√ß√£o completamente elementar. <br><br>  Infelizmente, por√©m, o React tem v√°rios problemas.  Um dos mais importantes √© o fato de o React n√£o ser uma estrutura completa e, portanto, n√£o nos oferecer qualquer tipo de arquitetura de aplicativo ou ferramentas completas para sua implementa√ß√£o. <br><br>  Por que isso est√° escrito em falhas?  Sim, porque agora o React √© a solu√ß√£o mais popular para o desenvolvimento de aplicativos da Web ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">prova</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">outra prova</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">e outra prova</a> ), √© um ponto de entrada para novos desenvolvedores de front-end, mas, ao mesmo tempo, n√£o oferece nem promove nenhum arquitetura, nem abordagens e pr√°ticas recomendadas para criar aplicativos completos.  Al√©m disso, ele inventa e promove suas pr√≥prias abordagens personalizadas, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HOC</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hooks</a> , que n√£o s√£o usadas fora do ecossistema React.  Como resultado, cada aplicativo React resolve problemas t√≠picos da sua maneira e geralmente n√£o faz isso da maneira mais correta. <br><br>  Esse problema pode ser demonstrado com a ajuda de um dos erros mais comuns dos desenvolvedores do React, que consiste no abuso de componentes: <br><br><blockquote>  Se a √∫nica ferramenta que voc√™ tem √© um martelo, tudo come√ßa a parecer um prego. </blockquote><br>  Com sua ajuda, os desenvolvedores resolvem uma gama completamente impens√°vel de tarefas que v√£o muito al√©m do escopo da visualiza√ß√£o de dados.  Na verdade, com a ajuda dos componentes, eles implementam absolutamente tudo - desde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">consultas de m√≠dia</a> desde CSS at√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">roteamento</a> . <br><br><h2>  Reagir e Redux </h2><br>  A restaura√ß√£o da ordem na estrutura dos aplicativos React foi muito facilitada pela apar√™ncia e populariza√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redux</a> .  Se React √© uma View do MVP, o Redux nos ofereceu uma varia√ß√£o bastante conveniente do Model. <br><br>  A principal id√©ia do Redux √© a transfer√™ncia de dados e a l√≥gica de trabalhar com eles em um √∫nico data warehouse centralizado - a chamada Store.  Essa abordagem resolve completamente o problema de duplica√ß√£o e dessincroniza√ß√£o de dados, sobre o qual falamos um pouco antes, e tamb√©m oferece muitas outras comodidades, que, entre outras coisas, incluem a facilidade de estudar o estado atual dos dados no aplicativo. <br><br>  Outro recurso igualmente importante √© o meio de comunica√ß√£o entre a loja e outras partes do aplicativo.  Em vez de acessar diretamente a loja ou seus dados, somos oferecidos a usar as chamadas a√ß√µes (objetos simples que descrevem o evento ou comando), que fornecem um n√≠vel fraco de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">acoplamento fraco</a> entre a loja e a fonte do evento, aumentando significativamente o grau de manuten√ß√£o do projeto.  Portanto, o Redux n√£o apenas for√ßa os desenvolvedores a usar abordagens arquitet√¥nicas mais corretas, mas tamb√©m permite que voc√™ aproveite v√°rias vantagens da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eventos</a> - agora, no processo de depura√ß√£o, podemos visualizar facilmente o hist√≥rico de a√ß√µes no aplicativo, seu impacto nos dados e, se necess√°rio, todas essas informa√ß√µes podem ser exportadas , o que tamb√©m √© extremamente √∫til ao analisar erros de produ√ß√£o. <br><br>  O esquema geral do aplicativo usando React / Redux pode ser representado da seguinte maneira: <br><br><img src="https://habrastorage.org/webt/rw/x6/8f/rwx68f3sxe_rrnh609ul6rmgrsw.png" alt="imagem"><br><br>  Os componentes de rea√ß√£o ainda s√£o respons√°veis ‚Äã‚Äãpela exibi√ß√£o de dados.  Idealmente, esses componentes devem ser limpos e funcionais, mas, se necess√°rio, podem ter um estado local e l√≥gica associada (por exemplo, para implementar ocultar / exibir um elemento espec√≠fico ou pr√©-processamento b√°sico de uma a√ß√£o do usu√°rio). <br><br>  Quando um usu√°rio executa uma a√ß√£o na interface, o componente simplesmente chama a fun√ß√£o manipuladora correspondente, que recebe de fora junto com os dados para exibi√ß√£o. <br><br>  Os chamados componentes de cont√™iner atuam como apresentador para n√≥s - eles exercem controle sobre os componentes de exibi√ß√£o e sua intera√ß√£o com os dados.  Eles s√£o criados usando a fun√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">connect</a> , que estende a funcionalidade do componente passado a ele, adicionando uma assinatura para alterar dados no Store e permitindo determinar quais manipuladores de dados e eventos devem ser passados ‚Äã‚Äãpara ele. <br><br>  E se tudo estiver claro com os dados aqui (simplesmente mapeamos os dados do armazenamento para os "adere√ßos" esperados)), gostaria de me concentrar nos manipuladores de eventos com mais detalhes - eles n√£o apenas enviam A√ß√µes para a Loja, mas tamb√©m podem conter l√≥gica adicional para processar o evento - por exemplo, inclua ramifica√ß√£o, execute redirecionamentos autom√°ticos e execute qualquer outro trabalho espec√≠fico para o apresentador. <br><br>  Outro ponto importante em rela√ß√£o aos componentes do cont√™iner: devido ao fato de serem criados por meio do HOC, os desenvolvedores frequentemente descrevem os componentes de exibi√ß√£o e os componentes do cont√™iner em um √∫nico m√≥dulo e exportam apenas o cont√™iner.  Essa n√£o √© a abordagem correta, pois para a possibilidade de testar e reutilizar o componente de exibi√ß√£o, ele deve ser completamente separado do cont√™iner e, de prefer√™ncia, retirado em um arquivo separado. <br><br>  Bem, a √∫ltima coisa que ainda n√£o consideramos √© a loja.  Ele nos serve como uma implementa√ß√£o bastante espec√≠fica do Modelo e consiste em v√°rios componentes: Estado (um objeto que cont√©m todos os nossos dados), Middleware (um conjunto de fun√ß√µes que pr√©-processa todas as A√ß√µes recebidas), Redutor (uma fun√ß√£o que modifica os dados no Estado) e alguns ou um manipulador de efeitos colaterais respons√°vel pela execu√ß√£o de opera√ß√µes ass√≠ncronas (acesso a sistemas externos etc.). <br><br>  A quest√£o mais comum aqui √© a forma do nosso Estado.  Formalmente, o Redux n√£o nos imp√µe nenhuma restri√ß√£o e n√£o fornece recomenda√ß√µes sobre o que esse objeto deve ser.  Os desenvolvedores podem armazenar absolutamente quaisquer dados nele (incluindo o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estado dos formul√°rios</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">informa√ß√µes do roteador</a> ), esses dados podem ser de qualquer tipo (n√£o √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">proibido</a> armazenar fun√ß√µes nem inst√¢ncias de objetos) e ter qualquer n√≠vel de aninhamento.  De fato, isso novamente leva ao fato de que, de projeto para projeto, temos uma abordagem completamente diferente do uso do Estado, que mais uma vez causa confus√£o. <br><br>  Para come√ßar, concordamos que n√£o precisamos manter absolutamente todos os dados do aplicativo no Estado - isso √© claramente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">indicado pela documenta√ß√£o</a> .  Embora armazenar parte dos dados dentro do estado dos componentes crie certos inconvenientes ao navegar pelo hist√≥rico de a√ß√µes durante o processo de depura√ß√£o (o estado interno dos componentes sempre permanece inalterado), a transfer√™ncia desses dados para o Estado cria ainda mais dificuldades - isso aumenta significativamente seu tamanho e requer a cria√ß√£o de ainda mais A√ß√µes e redutores. <br><br>  Quanto ao armazenamento de quaisquer outros dados locais no Estado, geralmente lidamos com algumas configura√ß√µes gerais da interface, que s√£o um conjunto de pares de valores-chave.  Nesse caso, podemos fazer facilmente com um objeto simples e um redutor para ele. <br><br>  E se estamos falando sobre o armazenamento de dados de fontes externas, com base no fato de que, no desenvolvimento de interfaces, na grande maioria dos casos, estamos lidando com o CRUD cl√°ssico, para armazenar dados do servidor, faz sentido tratar o Estado como um RDBMS: chaves s√£o o nome e atr√°s deles est√£o matrizes armazenadas de objetos carregados ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sem aninhamento</a> ) e informa√ß√µes opcionais para eles (por exemplo, o n√∫mero total de registros no servidor para criar pagina√ß√£o).  A forma geral desses dados deve ser o mais uniforme poss√≠vel - isso permitir√° simplificar a cria√ß√£o de redutores para cada tipo de recurso: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getModelReducer = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modelName</span></span></span><span class="hljs-function"> =&gt;</span></span> (models = [], action) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isModelAction = modelActionTypes.includes(action.type); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModelAction &amp;&amp; action.modelName === modelName) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'ADD_MODELS'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.add(action.models, models); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'CHANGE_MODEL'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.change(action.model, models); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'REMOVE_MODEL'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.remove(action.model, models); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'RESET_STATE'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> models; };</code> </pre> <br>  Bem, outro ponto que eu gostaria de discutir no contexto do uso do Redux √© a implementa√ß√£o de efeitos colaterais. <br><br>  Antes de tudo, esque√ßa completamente o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redux Thunk</a> - a transforma√ß√£o das A√ß√µes propostas por ele em fun√ß√µes com efeitos colaterais, embora seja uma solu√ß√£o funcional, mas que mistura os conceitos b√°sicos de nossa arquitetura e reduz suas vantagens a nada.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Redux Saga</a> oferece uma abordagem muito mais correta para a implementa√ß√£o de efeitos colaterais, embora existam algumas perguntas sobre sua implementa√ß√£o t√©cnica. <br><br>  Em seguida - tente unificar, tanto quanto poss√≠vel, os efeitos colaterais que acessam o servidor.  Assim como o formul√°rio State e redutores, quase sempre podemos implementar a l√≥gica de criar solicita√ß√µes para o servidor usando um √∫nico manipulador.  Por exemplo, no caso da API RESTful, isso pode ser alcan√ßado ouvindo a√ß√µes generalizadas como: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'CREATE_MODEL'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: { <span class="hljs-attr"><span class="hljs-attr">model</span></span>: <span class="hljs-string"><span class="hljs-string">'reviews'</span></span>, <span class="hljs-attr"><span class="hljs-attr">attributes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span> } } }</code> </pre><br>  ... e criando as mesmas solicita√ß√µes HTTP generalizadas nelas: <br><br><pre> <code class="plaintext hljs">POST /api/reviews { title: '...', text: '...' }</code> </pre> <br>  Ao seguir conscientemente todas as dicas acima, voc√™ pode obter, se n√£o uma arquitetura ideal, pelo menos pr√≥ximo a ela. <br><br><h2>  Futuro brilhante </h2><br>  O desenvolvimento moderno de interfaces da Web realmente deu um passo significativo, e agora estamos vivendo uma √©poca em que uma parte significativa dos principais problemas j√° foi resolvida de uma maneira ou de outra.  Mas isso n√£o significa que, no futuro, n√£o haver√° novas revolu√ß√µes. <br><br>  Se voc√™ tentar olhar para o futuro, provavelmente veremos o seguinte: <br><br>  <b>1. Abordagem de componentes sem JSX</b> <br><br>  O conceito de componentes provou ser extremamente bem-sucedido e, provavelmente, veremos sua populariza√ß√£o ainda maior.  Mas o pr√≥prio JSX pode e deve morrer.  Sim, √© realmente muito conveniente de usar, mas, no entanto, n√£o √© um padr√£o geralmente aceito nem um c√≥digo JS v√°lido.  As bibliotecas para implementar interfaces, por melhores que sejam, n√£o devem inventar novos padr√µes, que devem ser implementados repetidamente em todos os kits de ferramentas de desenvolvimento poss√≠veis. <br><br>  <b>2. Cont√™ineres de Estado sem Redux</b> <br><br>  O uso de um data warehouse centralizado, proposto pela Redux, tamb√©m foi uma solu√ß√£o extremamente bem-sucedida e, no futuro, deve se tornar um tipo de padr√£o no desenvolvimento de interfaces, mas sua arquitetura e implementa√ß√£o internas podem sofrer certas altera√ß√µes e simplifica√ß√µes. <br><br>  <b>3. Aprimorando a permutabilidade da biblioteca</b> <br><br>  Acredito que, com o tempo, a comunidade de desenvolvedores front-end perceber√° os benef√≠cios de maximizar a intercambiabilidade de bibliotecas e n√£o mais se trancar√° em seus pequenos ecossistemas.  Todos os componentes dos aplicativos - roteadores, cont√™ineres de estado etc. - devem ser extremamente universais e sua substitui√ß√£o n√£o deve exigir uma refatora√ß√£o ou reescrita maci√ßa do aplicativo a partir do zero. <br><br><h2>  Por que tudo isso? </h2><br>  Se tentarmos generalizar as informa√ß√µes apresentadas acima e reduzi-las para uma forma mais simples e mais curta, obteremos alguns pontos bastante gerais: <br><br>  - Para o desenvolvimento bem-sucedido de aplicativos, o conhecimento da linguagem e da estrutura n√£o √© suficiente, deve-se prestar aten√ß√£o a aspectos te√≥ricos gerais: arquitetura de aplicativos, melhores pr√°ticas e padr√µes de design. <br><br>  "A √∫nica constante √© a mudan√ßa."  As abordagens de lavoura e desenvolvimento continuar√£o a mudar; portanto, projetos grandes e de longa dura√ß√£o devem prestar aten√ß√£o adequada √† arquitetura - sem ela, a introdu√ß√£o de novas ferramentas e pr√°ticas ser√° extremamente dif√≠cil. <br><br>  E isso √© provavelmente tudo para mim.  Muito obrigado a todos que encontraram for√ßas para ler o artigo at√© o fim.  Se voc√™ tiver alguma d√∫vida ou coment√°rio, convido voc√™ a comentar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456794/">https://habr.com/ru/post/pt456794/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456774/index.html">O que sinto falta em Java depois de trabalhar com Kotlin / Scala</a></li>
<li><a href="../pt456780/index.html">9 maneiras de aumentar a efici√™ncia do desenvolvedor de aplicativos m√≥veis</a></li>
<li><a href="../pt456782/index.html">Projeto orientado a modelo - como n√£o repetir Chernobyl</a></li>
<li><a href="../pt456790/index.html">Resumo de not√≠cias do PostgreSQL. Edi√ß√£o No.16</a></li>
<li><a href="../pt456792/index.html">Implantar o Kubernetes Cluster no OpenStack com o Kubespray</a></li>
<li><a href="../pt456796/index.html">Svalbard - novo nome para o projeto Fui Pwned antes da venda</a></li>
<li><a href="../pt456798/index.html">Tutoriais SDL 2: Li√ß√£o 5 - Texturas</a></li>
<li><a href="../pt456804/index.html">Siga o dinheiro: como o grupo RTM come√ßou a ocultar os endere√ßos dos servidores C&C em uma carteira criptogr√°fica</a></li>
<li><a href="../pt456806/index.html">Um bot de todas as preocupa√ß√µes</a></li>
<li><a href="../pt456808/index.html">Como melhorar o desempenho de aplicativos Web front-end: cinco dicas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>