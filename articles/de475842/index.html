<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📷 🔏 💆🏼 Aktions-URL & URI in SIP-Telefonen ersetzen oder über Websockets verwalten? 🏄 🤰🏿 🚴🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SIP-Telefone. Computer mit einem Mobilteil. Theoretisch kann viel mit ihnen gemacht werden, aber sie werden nur für Anrufe verwendet :-) 

 Vor kurzem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aktions-URL & URI in SIP-Telefonen ersetzen oder über Websockets verwalten?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475842/"> SIP-Telefone.  Computer mit einem Mobilteil.  Theoretisch kann viel mit ihnen gemacht werden, aber sie werden nur für Anrufe verwendet :-) <br><br>  Vor kurzem war AsterConf auf der Konferenz, und dort sprachen die Verkäufer über ihre Telefone. Wir werden niemanden herausgreifen. Sie sind alle gut, irgendwo besser, irgendwo billiger. Tatsächlich tun sie dasselbe. <br><br>  Einige der Anbieter verbessern die Klangqualität, jemand befestigt ein Tablet mit einem Android, jemand versucht, eine Anwendung hinzuzufügen.  Und das alles, damit wir diese Telefone auf Desktops installieren können. <br><br>  Und vielleicht sind die Telefone gute Kandidaten für die Rolle der Fernbedienung in der IoT-Welt: Ich habe auf die Schaltfläche geklickt und das Ergebnis erhalten.  Und meiner bescheidenen Meinung nach gibt es nicht genug einfache Möglichkeiten, um Telefone mit Ihrem „Manager“ zu verbinden.  Als Teil dieses Artikels möchte ich zeigen, wie es in einem Diagramm und einer Videodemonstration einfach aussehen könnte. <br><br>  Und Sie teilen in den Kommentaren bitte mit, dass vielleicht schon irgendwo etwas Ähnliches implementiert wurde oder ergänzen Ihre Vorschläge und Gedanken. <br><a name="habracut"></a><br>  Telefone verfügen über Aktions-URLs und Aktions-URIs. <br><br>  <b>Mit der Aktions-URL</b> können wir verschiedene Ereignisse an eine beliebige URL senden.  In der URL können wir vordefinierte Variablen angeben, die während eines Aufrufs mit realen Daten gefüllt werden. <br><br>  So sieht zum Beispiel die Einstellung meines Telefons aus. <br><br><img src="https://habrastorage.org/webt/yn/tn/h3/yntnh3ybt83hmdpc0-p5bh_lz-k.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Action URL Designer Online für Yealink</a> <br><br>  <b>Mit dem Aktions-URI</b> können wir Befehle über die IP-Adresse des Telefons empfangen. Das Telefon kann Anrufe tätigen, Anrufe auf Befehl entgegennehmen, Lautstärke hinzufügen, einen Neustart durchführen usw.  Im Video unten können Sie sehen, wie dies alles passiert.  Wir müssen die Adresse angeben, von der die Teams kommen werden. <br><br><img src="https://habrastorage.org/webt/ij/ne/hg/ijnehgcwy1cwjizhrcmxfwbm4ic.png"><br><br>  Alles ist konfigurierbar, was ist das Problem, Bruder? <br><br>  Dies sind ziemlich funktionale Schnittstellen, aber ... sie sind ziemlich schwer zu integrieren.  Das heißt  Wir müssen 100.500 Maßnahmen ergreifen, damit es funktioniert.  Oder füllen Sie 100 Felder in den Einstellungen des Geräts aus (die Sie selbst auf dem Bildschirm sehen), oder verwechseln Sie die Bestimmungen und schreiben Sie einige Konfigurationsvorlagen vor. <br><br>  Infolgedessen gibt es viele Aktionen, bei denen es einfach ist, einen Fehler zu machen und nicht das zu bekommen, was Sie wollen, und dann viel Zeit zu investieren, um die Gründe für das unangemessene Verhalten des Geräts herauszufinden.  Und nun, wenn Sie mit einem fertig werden und fünf bis zehn, einhundert und ein paar Verkäufer und sogar Modelle verschiedener Generationen haben.  Puff Puff Puff ... <br><br>  Ist das ein Problem?  Muss jemand das Telefon eines Teilnehmers verwalten?  Zum Abonnenten?  Von Ihrem Desktop, Laptop oder Smartphone?  Technischer Support?  Sowohl intern als auch extern, zum Beispiel ein virtueller Telefonvermittlungsanbieter?  Muss ich anders als nur SIP auf das Telefon zugreifen können?  Integrieren Sie das Telefon in Anwendungen und umgehen Sie die IP-PBX? <br><br>  Ich kann nicht eindeutig antworten, es gibt Vor- und Nachteile.  Und um die Vorteile zu realisieren, möchte ich in der Lage sein, die Aktions-URL und die Aktions-URI schnell mit meinem "Manager" zu verbinden.  Ich bezeichne einen Manager als einen Server, auf dem ich eine Liste der Telefone und deren Status zentral einsehen und von jedem der Telefone aus eine verfügbare Aktion ausführen kann. <br><br>  Schauen wir uns das Diagramm an. <br><br><img src="https://habrastorage.org/webt/qu/o8/0t/quo80td8bgjlllgt8zm-qaflr-u.png"><br><br>  Stellen Sie sich vor, wir haben einen Websocket-Client in unserem Telefon. <br><br>  Dann müssen wir im Telefon nur die Netzwerkadresse des „Managers“ angeben und unser Telefon stellt eine Verbindung dazu her.  Wenn die Verbindung hergestellt ist, sendet das Telefon seine ID, seinen Namen und seinen Mac.  So können wir es beispielsweise mit unserer Liste der PBX-Teilnehmer vergleichen. <br><br>  Dann abonnieren wir Ereignisse, die am Telefon auftreten.  Es gibt viele von ihnen, das sind Ummeldungen, Antworten auf Anrufe, Drücken von Tasten usw.  Dann können wir die Nummer von unserem Manager durch Senden eines Befehls wählen.  Entweder DND einstellen oder DND entfernen.  Dann sende ich eine Benachrichtigung oder Erinnerung an das Telefon, setze ein neues Logo. <br><br>  Was ist mit Sicherheit?  Im Allgemeinen können SIP-Telefone für NAT verwendet werden, sie benötigen keine externe Adresse.  Wenn Sie jedoch den Webserver-Port des Telefons auf das Action-URI-Netzwerk einstellen (in dem übrigens der Administratorbereich funktioniert), erwarten Sie unangenehme Überraschungen. <br><br>  Wenn das Telefon jedoch über Websockets eine Verbindung zum „Manager“ herstellt, ist dies seine Initiative und sein Recht. Möglicherweise trennt er die Verbindung. Wenn Sie aufgrund von NAT eine Verbindung zum Remote-Server herstellen, sieht dies wie eine Browserverbindung aus. <br><br>  Genug der Worte, näher am Punkt.  Ich habe einen kleinen Telefon-Client geschrieben (der meiner Meinung nach im Telefon sein sollte), der sich über den Web-Socket mit dem Server verbindet.  Außerdem ist ein Browser mit diesem Server verbunden, der Nachrichten vom Telefon empfangen und dort Befehle senden kann. <br><br>  Der Client ist nur ein Wrapper für die Aktions-URL und die Aktions-URI, die über die vertrauten Schnittstellen mit dem Telefon zusammenarbeiten und alle Daten in einem Web-Socket zusammenfassen.  In Web-Sockets gibt es regelmäßige JSON-Nachrichten, mit denen jeder Webentwickler arbeiten kann. <br><br>  Sehen Sie sich das Video an, alles ist ganz einfach.  Der gesamte Code ist minimal genug, um das Konzept zu veranschaulichen. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Kx1Bwl70KEs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Was ist im Video los? <br><br><ol><li>  Wir starten den Server, der Verbindungen über Websockets akzeptiert. </li><li>  Wir starten den Client (der per Action URL &amp; URI mit dem Telefon funktioniert) </li><li>  Der Client stellt eine Verbindung zum Server her </li><li>  Wir starten den Webserver (mit der Seite, auf der sich der Code für die Verbindung vom Browser über Websockets befindet) </li><li>  Öffnen Sie die Seite im Browser. Die Seite stellt eine Verbindung zum Server her </li><li>  Wir senden eine Informationsanfrage von der Seite </li><li>  Die Anfrage geht bis zum Telefon und gibt Informationen über die Telefonleitungen zurück </li><li>  Wir können auch verschiedene Teams schicken </li><li>  einschließlich des Befehls zum Tätigen eines Anrufs </li><li>  und dann den Befehl zum Auflegen </li><li>  Alle Daten werden im Protokoll auf der Seite sowie in der Konsole des funktionierenden Servers und des Client-Telefons angezeigt </li><li>  Dann können Sie auf der Telefonseite sehen, wie es auf Befehle reagiert </li></ol><br>  Daher ist das Verbinden des Telefons mit dem Manager nur eine Adresse.  Und Nachrichten von Web-Sockets an eine andere Präsentation und umgekehrt können jeder Entwickler sein.  In meinem Fall ist eine Seite mit dem Manager verbunden.  Im Allgemeinen kann es sich um ein komplexeres System handeln, das Befehle verarbeitet und Nachrichten an das Telefon sendet. <br><br>  Eine einfache Verbindungsmethode zu haben kann praktisch und daher einfacher zu erlernen sein.  Über diese Schnittstelle können theoretisch sowohl neue Konfigurationen als auch zusätzliche Nachrichten gesendet werden, sodass sich das Telefon problemlos in jede Infrastruktur integrieren lässt. <br><br>  Im Allgemeinen sind dies nur meine Gedanken zu den Ergebnissen der Besichtigung neuer Produkte bei Asterkonf.  Ich werde mich freuen, in den Kommentaren die Vor- und Nachteile zu sehen.  Und vielleicht sieht einer der Hersteller das Rationale darin und stellt den Chip vor :-) <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Github-Projekt</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475842/">https://habr.com/ru/post/de475842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475830/index.html">Tragbare Retro-Konsole zum Selbermachen</a></li>
<li><a href="../de475834/index.html">Scrum wird dir nicht helfen. Wir verstehen warum</a></li>
<li><a href="../de475836/index.html">Interview mit Arthur Khachuyan: Wie berechnet man einen Milliardär in sozialen Netzwerken?</a></li>
<li><a href="../de475838/index.html">Menschen verändern. Oder ... Menschen verändern. Informationen zum „Abheben“ des Transformationsprojekts</a></li>
<li><a href="../de475840/index.html">Badoo Jira API Client: Magie in Jira in PHP</a></li>
<li><a href="../de475848/index.html">Wie die Yandex.Market-Suche funktioniert und was passiert, wenn einer der Server abstürzt</a></li>
<li><a href="../de475850/index.html">So starten Sie eine Karriere in der IT, wenn Sie noch keine Erfahrung haben</a></li>
<li><a href="../de475854/index.html">JDBC-Pools und effizientes File-Handling: Java mitap 3. Dezember in St. Petersburg</a></li>
<li><a href="../de475856/index.html">Google App Script, Mikrotik, Telegram und VPNBook haben begonnen, ein Quartett zu spielen</a></li>
<li><a href="../de475858/index.html">Unterhaltsame Krypto-Energie: Die Hitze des Bergbaus für den Menschen und die Hitze des Menschen für den Bergbau</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>