<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆 🌞 🚣🏿 LLTR Partie 0: Détection automatique de la topologie du réseau et commutateurs non gérés. Mission impossible? 👏🏿 🍱 😑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comment créer une topologie de réseau au niveau de la couche liaison de données si seuls des commutateurs non gérés sont utilisés dans le sous-réseau ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LLTR Partie 0: Détection automatique de la topologie du réseau et commutateurs non gérés. Mission impossible?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414799/"><a name="LLTR_a0_habr-pic"></a><div style="text-align:center;"><img alt="KDPV: LLTR Part 0 - Transport pneumatique de Futurama" height="360" src="https://habrastorage.org/webt/sg/ps/xg/sgpsxgveddr8r_mn1e7ppnkstmy.jpeg#futurama2.jpg"></div><p><br>  Comment créer une topologie de réseau au niveau de la couche liaison de données si seuls des commutateurs non gérés sont utilisés dans le sous-réseau souhaité?  Dans l'article, je vais essayer de répondre à cette question. </p><p><br>  Je vais commencer par la cause de <strong>LLTR</strong> ( <em>Link Layer Topology Reveal</em> ). </p><p><br>  J'ai eu un «vélo» - un synchroniseur de fichiers volumineux «à pleine vitesse réseau», capable de télécharger complètement un fichier de <nobr>120 Gio</nobr> sur Fast Ethernet ( <nobr>100 Mbps</nobr> ; 100BASE - TX; duplex) à 1, 10, 30 ou <nobr>3 heures</nobr> <nobr>&gt; 200 pièces</nobr>  C'était un «vélo» très utile car  la vitesse de synchronisation des fichiers était presque indépendante du nombre d'ordinateurs sur lesquels télécharger le fichier.  Tout irait bien, mais cela nécessite une <strong>connaissance de la topologie du réseau</strong> pour son travail. </p><br><div class="spoiler">  <b class="spoiler_title">Plus dans l'article sur lui:</b> <div class="spoiler_text"><hr><p>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RingSync: synchronisation à pleine vitesse du réseau</a> ." <br>  (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PPPS</a> ) </p><hr></div></div><br><div class="spoiler">  <b class="spoiler_title">D'accord, pourquoi avez-vous eu besoin de «conduire» un fichier de 120 Gio sur le réseau vers une telle quantité de PC?</b> <div class="spoiler_text"><hr><p>  Ce fichier était <abbr title="Disque dur virtuel">VHD</abbr> avec le système d'exploitation, les programmes, etc.  Le fichier a été créé sur le système maître, puis distribué à tous les autres PC.  <abbr title="Disque dur virtuel">Le disque dur virtuel</abbr> n'était pas seulement un moyen de fournir le système aux PC cibles, mais il permettait également de restaurer l'état initial du système lors du redémarrage du PC.  Plus de détails dans l'article: « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">System Freezing: The History of the Transition from <abbr title="Filtre d'écriture amélioré">EWF</abbr> to <abbr title="Disque dur virtuel différentiel">dVHD</abbr></a> ». </p><hr></div></div><p><br>  Vous pouvez continuer la chaîne plus loin, mais je vais rompre. </p><p><br>  Les protocoles existants de découverte de la topologie de la couche liaison de données ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Protocole de découverte de couche liaison">LLDP</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Découverte de la topologie de la couche liaison">LLTD</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Protocole de découverte Cisco">CDP</a> , ...) nécessitent une prise en charge appropriée de tous les nœuds de réseau intermédiaires pour leur fonctionnement.  Autrement dit, ils nécessitent au moins des commutateurs gérés qui prennent en charge le protocole approprié.  Il y avait déjà un article sur Habré comment utiliser ces protocoles pour « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">déterminer la topologie du réseau aux 2/3 niveaux du <abbr title="Interconnexion de systèmes ouverts">modèle OSI</abbr></a> ». </p><p><br>  Mais que faire si les nœuds intermédiaires sont de simples commutateurs non gérés? </p><p><br>  Si vous êtes intéressé par la façon dont cela peut être fait, alors bienvenue au chat.  Je promets la disponibilité de nombreuses illustrations et exemples. </p><p><br>  {taille de l'image: 924 Ko;  Texte: 69 Ko;  Émoticônes: 9 pièces.  } </p><a name="habracut"></a><br><a name="user-css"></a><div class="spoiler">  <b class="spoiler_title">Un peu d'UserCSS avant de lire</b> <div class="spoiler_text"><hr><p>  <b>Remarque</b> : ce spoiler était à l'origine placé avant le kat. </p><p><br>  Certes, tous ceux qui voulaient personnaliser les styles pour eux-mêmes l'avaient déjà fait.  Cependant, voici une <strong>partie de</strong> mon UserCSS.  Changements majeurs: </p><br><ul><li>  la fin du spoiler ouvert est visible (utile lorsque le spoiler est grand et que vous ne remarquez pas immédiatement la différence de retrait entre le texte principal et le texte dans le spoiler), plus précisément, a renvoyé le cadre et l'arrière-plan précédents du spoiler; </li><li>  le bloc de citations est revenu à sa forme précédente (j'ai montré à plusieurs personnes qui ne comprenaient pas la langue russe et n'ont pas lu les nouvelles "citations jaunes" Habré, et ils ont dit qu'il s'agissait d'inserts publicitaires contextuels ...); </li><li>  la police principale, sa taille et son interligne sont également revenus (à mon humble avis, le texte long est plus facile à lire); </li><li>  Suppression de la note de publication et du nombre de vues, mais ajout du nombre de signets. </li></ul><p><br>  En général, j'ai rendu (avec des modifications mineures) l'aspect familier des principaux éléments de l'article.  Avec cette conception, un grand nombre de bons articles ont déjà été lus (des souvenirs agréables apparaissent). </p><br><pre><code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">charset</span></span> <span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Verdana,sans-serif <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.nav-links__item-link</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Helvetica,Arial,sans-serif <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.comment__message</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.comment-form__preview</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>:Arial <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">13px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:<span class="hljs-number"><span class="hljs-number">1.60</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__title-text</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__title_link</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Tahoma,sans-serif <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:<span class="hljs-number"><span class="hljs-number">118%</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__title-text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">30px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__title_link</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">26px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* .post__text-html p &gt; br:first-child, .post__text p+br { display:none !important; } .post__text p { margin-bottom: 0.9em; margin-top: 0.9em; } /* for test: https://habr.com/post/315186 :（ */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">br</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:normal <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* or 1 ; https://habr.com/company/pt/blog/337450 */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-o-object-fit</span></span>:contain; <span class="hljs-attribute"><span class="hljs-attribute">object-fit</span></span>:scale-down; } <span class="hljs-comment"><span class="hljs-comment">/* https://stackoverflow.com/questions/787839/resize-image-proportionally-with-css and don't use "height:auto; width:auto;" (example: &lt;img src="img32x32_2x.png" width="16" height="16"&gt;)*/</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h2</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h3</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Helvetica,Arial,sans-serif <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h2</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">1.5em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h3</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">1.375em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h4</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h5</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h6</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Verdana,sans-serif <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">1.125em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>:bold <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h5</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#3D3D3D</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h6</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#5C5C5C</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:inherit <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-left</span></span>:<span class="hljs-number"><span class="hljs-number">35px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ol</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom</span></span>:<span class="hljs-number"><span class="hljs-number">9px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler_title</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#6DA3BD</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:inherit <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>:<span class="hljs-number"><span class="hljs-number">400</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::before</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>:<span class="hljs-number"><span class="hljs-number">2px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler_text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#666</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-number"><span class="hljs-number">#F9F9F9</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>:<span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#EEE</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler_text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hr</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:first-child</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.spoiler_text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hr</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:last-child</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:none <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">code</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">13px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*background-color:#F8F8F8 !important;*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>:<span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#F2F2F2</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>:<span class="hljs-number"><span class="hljs-number">3px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0.25em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">white-space</span></span>:pre-wrap <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">strong</span></span> &gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">code</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: normal <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#F8F8F8</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">pre</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">code</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:<span class="hljs-number"><span class="hljs-number">1.5</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>:<span class="hljs-number"><span class="hljs-number">#F8F8F8</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-color</span></span>:<span class="hljs-number"><span class="hljs-number">#DDD</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0.5em</span></span> <span class="hljs-number"><span class="hljs-number">1em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">white-space</span></span>:pre <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">overflow-x</span></span>:auto <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-comment</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-quote</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#808080</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-style</span></span>:inherit <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-doctag</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-keyword</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-formula</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-section</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-name</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-selector-tag</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-deletion</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-subst</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#4d7386</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-literal</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#7296a3</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-string</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-regexp</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-addition</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-meta-string</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#390</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-built_in</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-class</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-title</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#968e5b</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-attr</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-attribute</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-variable</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-template-variable</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-type</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-selector-class</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-selector-attr</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-selector-pseudo</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-number</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#2f98ff</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-symbol</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-bullet</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-link</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-meta</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-selector-id</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.hljs-title</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#968e5b</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">kbd</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:inline-block <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0.2em</span></span> <span class="hljs-number"><span class="hljs-number">0.5em</span></span> <span class="hljs-number"><span class="hljs-number">0.3em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>:middle <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>:<span class="hljs-number"><span class="hljs-number">#FCFCFB</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>:<span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#D9D9D9</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>:<span class="hljs-number"><span class="hljs-number">3px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-bottom-color</span></span>:<span class="hljs-number"><span class="hljs-number">#C6CBD1</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">box-shadow</span></span>:inset <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">1px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> <span class="hljs-number"><span class="hljs-number">#C6CBD1</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font</span></span>:<span class="hljs-number"><span class="hljs-number">11px</span></span>/<span class="hljs-number"><span class="hljs-number">10px</span></span> Tahoma, sans-serif <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#575757</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-shadow</span></span>:<span class="hljs-number"><span class="hljs-number">0px</span></span> <span class="hljs-number"><span class="hljs-number">1px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> <span class="hljs-number"><span class="hljs-number">#FFF</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">blockquote</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.comment__message</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">blockquote</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.comment-form__preview</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">blockquote</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:inherit <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-left</span></span>:<span class="hljs-number"><span class="hljs-number">0.25em</span></span> solid <span class="hljs-number"><span class="hljs-number">#DFE2E5</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#70767D</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1em</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.user_link</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:inline-block <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding-left</span></span>:<span class="hljs-number"><span class="hljs-number">14px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#666</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font</span></span>:<span class="hljs-number"><span class="hljs-number">92.4%</span></span>/<span class="hljs-number"><span class="hljs-number">1.5em</span></span> Arial <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"https://hsto.org/storage/habrastock/i/bg-user2.gif"</span></span>) <span class="hljs-number"><span class="hljs-number">0px</span></span> <span class="hljs-number"><span class="hljs-number">60%</span></span> no-repeat <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.post__text</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.user_link</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::before</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">content</span></span>:<span class="hljs-string"><span class="hljs-string">'@'</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:transparent <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>:absolute <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; }<span class="hljs-comment"><span class="hljs-comment">/*for copy-paste (for Opera Presto)*/</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.voting-wjt_post</span></span>&gt;<span class="hljs-selector-class"><span class="hljs-selector-class">.voting-wjt__counter</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.post-stats__item_views</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:none <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; }</code> </pre> <p><br>  <b>MISE À JOUR</b> : UserJS - Anti-quotes-hell et <code>&lt;code&gt;</code> (voir les détails dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce commentaire</a> ): </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ==UserScript== // @version    1.0.0 // @namespace  https://habr.com/users/ZiroKyl/ // @homepageURL https://habr.com/post/414799/ // @name       Anti-quotes-hell for Habr // @include    https://habr.com/post/* // @include    https://habr.com/company/*/blog/* // ==/UserScript== // Enable opera:config#UserPrefs|UserJavaScriptonHTTPS if(self == top){   window.opera.addEventListener("BeforeEvent.DOMContentLoaded", function(){ "use strict";       var code = document.querySelectorAll(".post__text :not(pre) &gt; code");       var unQuote = function(el){           var aN = null, a = "",              bN = null, b = "";           if((aN = el.previousSibling) &amp;&amp; (bN = el.nextSibling) &amp;&amp;              aN.nodeType == 3        &amp;&amp; bN.nodeType == 3    ){               a = aN.data; a = a.charCodeAt(a.length-1);               b = bN.data; b = b.charCodeAt(0);               // a != " " &amp;&amp; ( a+1 == b &amp;&amp; (a == "“" || a == "'" ) || (a == "«" &amp;&amp; b == "»") || a == b &amp;&amp; (a == "'" || a == "`" || a == '"') )               if(a != 32 &amp;&amp; ( a+1 == b &amp;&amp; (a == 8220 || a == 8216) || (a == 171 &amp;&amp; b == 187) || a == b &amp;&amp; (a == 39 || a == 96 || a == 34 ) )){                   aN.data = aN.data.slice(0,-1);                   bN.data = bN.data.slice(1);                   return true;               }           }           return false;       };       var aN = null, bN = null, pElTagName = "";       for(var i=code.length;i--;){           // “&lt;code&gt;...&lt;/code&gt;” -&gt; &lt;code&gt;...&lt;/code&gt;           if(!unQuote(code[i])                                                                 &amp;&amp;               ( code[i].previousElementSibling == null &amp;&amp; code[i].nextElementSibling == null &amp;&amp;                (pElTagName = code[i].parentElement.tagName)                                &amp;&amp;                (pElTagName == "A" || pElTagName == "STRONG")                                ) &amp;&amp;               ( (!(aN = code[i].previousSibling) || aN.data.trim().length == 0) &amp;&amp;                (!(bN = code[i].nextSibling)    || bN.data.trim().length == 0) )             ){               // “&lt;a&gt;&lt;code&gt;...&lt;/code&gt;&lt;/a&gt;”    -&gt; &lt;a&gt;&lt;code&gt;...&lt;/code&gt;&lt;/a&gt;               // “&lt;a&gt; &lt;code&gt;...&lt;/code&gt; &lt;/a&gt;”  -&gt; &lt;a&gt; &lt;code&gt;...&lt;/code&gt; &lt;/a&gt;               // “&lt;a&gt;&lt;code&gt;...&lt;/code&gt;...&lt;/a&gt;” -X               unQuote(code[i].parentElement);           }       }   }, false); }</span></span></code> </pre> <p><br>  Les principaux styles ont été empruntés aux versions précédentes de <s>la matrice</s> Habr: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20120620035327/">2012-06</a> (UserCSS) - la police principale Verdana 13px, interligne 160% </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20120601043112/">2012-06</a> - première apparition d'un spoiler + bloc avec un code </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20120414063626/">2012-04</a> - tableau + en-têtes </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20120519223242/">2012-05</a> - plus de titres </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20120511021704/">2012-05</a> - juste un bon article </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20110506203616/">2011-05</a> - interligne 1,54em (dans une colonne étroite, avec un espace vide à gauche et à droite, le texte est lu moins bien qu'avec un intervalle de 160%), les blocs avec le code ont changé la couleur d'arrière-plan et ont perdu le trait [un article peut être dans de nombreux hubs] est devenu un blog [un article peut être dans un seul blog]) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20110111174044/">2011-01</a> - le contenu est étiré sur toute la largeur de l'écran (dans ce format, le texte avec un espacement des lignes réduit semble optimal, à mon humble avis), à mon humble avis: la large colonne de droite (avec une largeur d'écran de 1600 pixels) crée une sensation de confort, et est également meilleure ici que dans les autres versions apparence des commentaires (bonnes tailles de retrait sélectionnées) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20100818045720/">2010-08</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20091213082512/">2009-12</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20090521015826/">2009-05</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20090321120639/">2009-03</a> - changements sur l'exemple du même article </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20100213211711/">2010-02</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20090616083230/">2009-06</a> - articles avec un texte plus dense (paragraphes plus longs) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20100213195954/">2010-03</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20100213195954/">2010-02</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20090618091029/">2009-06</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20081218173804/">2008-12</a> - souvenirs positifs sur Opera </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20071229110456/">2007-12</a> - Effacement ：） et le nuage de tags dans la colonne de droite </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20070422130629/">2007-04</a> - L'espacement des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20070422130629/">lignes</a> est encore plus petit </li></ul><hr></div></div><p><br>  À propos de LLTR, je vais écrire une série d'articles sur le thème général "comment créer un protocole".  Cet article est nul. </p><br><h2><a name="analogiya-iz-fizicheskogo-mira--pnevmotransport"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> Une analogie du monde physique - le transport pneumatique </h2><hr><p>  Imaginez que nous ayons 2 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tuyaux d'air</a> ... </p><br><a name="fig_tube1-3"></a><div style="text-align:center;"><img alt="Photo d'une pièce avec un terminal de pipeline pneumatique et des conteneurs vides" height="410" src="https://habrastorage.org/webt/q2/75/x-/q275x-u0zvrp_v5nli70z2pscem.jpeg#tube1-3.jpg"></div><p><br>  Un tuyau pour les colis entrants (conteneurs rouges) et un pour les colis sortants (conteneurs bleus). </p><p><br>  Nous avons plusieurs amis connectés au même système de transport pneumatique.  Nous pouvons leur envoyer des conteneurs et ils peuvent nous envoyer des conteneurs.  L'adresse de livraison du conteneur est marquée sur le conteneur lui-même (par exemple, en <abbr title="Identification par radiofréquence">RFID</abbr> ou code-barres). </p><p><br>  À un moment donné, tout le monde a voulu savoir l'itinéraire emprunté par leurs colis chaque jour et savoir à quels commutateurs (centres de commutation) leurs tuyaux pneumatiques sont connectés, c'est-à-dire  Découvrez la topologie du réseau pneumatique. </p><br><a name="fig_tube1-M4"></a><div style="text-align:center;"> <a href=""><img alt="Le chemin du terminal au centre de communication" height="224" src="https://habrastorage.org/webt/ax/jx/eh/axjxehi6r_p7wmpbb6sa7iutvnk.jpeg#tube1-M4.jpg"></a> </div><p><br>  Tout ce que nous et nos amis pouvons faire, c'est envoyer et recevoir des conteneurs avec un certain contenu. </p><p><br>  Je propose de réfléchir à la façon dont, dans ce cas, vous pouvez construire la topologie de ce réseau.  Plusieurs options sont sous le spoiler: </p><br><div class="spoiler">  <b class="spoiler_title">spoiler</b> <div class="spoiler_text"><hr><p>  1. Si les tuyaux sont transparents, comme dans le transport pneumatique à Futurama ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Attention photo">KDPV</a> ), vous pouvez simplement envoyer une caméra vidéo qui capturera tout le chemin de déplacement du conteneur. </p><p><br>  2. Vous pouvez placer les capteurs (gyroscope, boussole, accéléromètre, ...) dans le conteneur, et construire une carte de déplacement basée sur les données qu'ils ont collectées. </p><p><br>  3. Vous pouvez vous passer de capteurs, en envoyant des conteneurs remplis d'air d'une manière spéciale.  Cette option est examinée ci-dessous, car  Elle s'applique aux réseaux Ethernet câblés ordinaires. </p><hr></div></div><br><h2><a name="lltr-basic"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> LLTR Basic </h2><hr><p>  Pour en revenir aux réseaux Ethernet câblés, permettez-moi de vous rappeler le problème dû à la création du LLTR.  Le problème est décrit en détail dans la section <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«PC connectés à différents commutateurs» de l'article RingSync</a> - il s'agit d'un problème de réduction de vitesse si la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chaîne de pairs</a> n'est pas correctement construite dans un réseau avec plusieurs commutateurs.  Pour créer correctement une chaîne d'homologues, vous avez besoin d'informations sur la topologie du réseau. </p><p><br>  Un petit exemple (pas de problème): </p><br><a name="fig_RingSync_no_problem"></a><div style="text-align:center;"><img alt="Graphique: RingSync aucun problème. Remarque: il est assez difficile de décrire de manière compacte ce qui est dessiné sur le diagramme, donc dans la variante des images, je vais indiquer le type d'image et la traduction du nom du fichier image." height="94" src="https://habrastorage.org/webt/vh/v8/_i/vhv8_ixspw6409nbuiiuc3ilt5w.png#RingSync_no_problem.svg.png"></div><p><br>  Nous avons <nobr>2 commutateurs</nobr> (connectés par un «fil»), <nobr>4 hôtes (homologues)</nobr> , toutes les connexions sont en duplex et la vitesse de toutes les connexions est la même.  Les flèches indiquent le chemin des données.  Dans ce cas, il n'y a pas de problème - les données sont transmises à la vitesse maximale du réseau. </p><p><br>  Un autre exemple (il y a un problème): </p><br><a name="fig_RingSync_problem_exist"></a><div style="text-align:center;"><img alt="Graphique: le problème de RingSync est" height="113" src="https://habrastorage.org/webt/bv/hw/zy/bvhwzylksm_5bykq8ocep3s7atm.png#RingSync_problem_exist.svg.png"></div><p><br>  Dans cet exemple, la chaîne de pairs a été construite avec moins de succès (car nous ne connaissons pas la topologie du réseau), ce qui a conduit à la formation d'un «goulot d'étranglement» (deux flux de données unidirectionnels dans une connexion) et à une diminution du taux de transfert de données global. </p><p><br>  Dans ce cas, la solution au problème (déterminer la topologie du réseau) réside dans la raison de la nécessité de le résoudre - dans la formation d'un «goulot d'étranglement».  Toute la chaîne de problèmes est la suivante: vous devez vous débarrasser des «goulots d'étranglement» → vous devez créer la «bonne» chaîne → vous devez déterminer la topologie du réseau.  Soit dit en passant, nous ne passerons pas par toutes les combinaisons possibles de la chaîne, à la recherche d'une chaîne sans «goulots d'étranglement» - c'est trop long, nous ferons plutôt plus intelligemment / plus délicat: </p><br><a name="fig_LLTR_Basic_broadcast"></a><div style="text-align:center;"><img alt="Graphique: LLTR Basic broadcast" height="179" src="https://habrastorage.org/webt/cw/ak/ek/cwakekd05nrx_cuyvsda-taeeiu.png#LLTR_Basic_broadcast.svg.png"></div><p><br>  Remplissez le réseau de trafic - sélectionnez l'un des hôtes comme source du trafic de diffusion.  Sur tous les autres hôtes, nous commencerons à collecter des statistiques sur le trafic de diffusion reçu.  Ensuite, sélectionnez 2 hôtes non diffusés et commencez à envoyer du trafic unicast du premier hôte au deuxième hôte.  Selon les statistiques du trafic de diffusion collectées sur les hôtes en ce moment, on verra que sur certains hôtes la vitesse de réception du trafic de diffusion a chuté - ces hôtes, dans ce cas, étaient connectés au bon commutateur.  Et sur tous les hôtes connectés au commutateur gauche, la vitesse de réception du trafic de diffusion n'a pas changé. </p><p><br>  La connexion entre les deux commutateurs est devenue un «goulot d'étranglement» et a permis de sélectionner tous les hôtes connectés au commutateur de droite dans un cluster séparé. </p><p><br>  <b>Remarque</b> : Dans les cas ordinaires, il est courant de lutter contre la diffusion de toutes nos forces, en particulier celle qui «utilise toute la bande passante», mais nous avons affaire à un réseau de commutation non géré qui peut avoir souffert plus d'une fois d'une tempête / inondation de diffusion, et au moins une fois la vie veut qu'une telle émission en profite.  Soit dit en passant, il est tout à fait possible de remplacer la diffusion par la monodiffusion, seule une telle analyse prendra plus de temps.  <em>Pour le transport pneumatique, vous devrez également utiliser la monodiffusion jusqu'à ce que vous libériez l'installation qui clone le problème et l'installiez dans chaque centre de commutation</em> : won. </p><p><br>  Pour construire la topologie de réseau correcte, il reste à répéter la même chose pour toutes les combinaisons possibles de paires orientées d'hôtes non diffusés.  Que signifie «paires orientées»? Vous devez d'abord envoyer du trafic unicast du premier hôte vers le second, collecter des statistiques, puis changer de direction (trafic du second vers le premier), puis collecter des statistiques distinctes pour cette option. </p><p><br>  Le nombre de combinaisons à vérifier peut être calculé à l'aide de la formule <nobr>n × (n - 1)</nobr> {chaque (n) doit "dire bonjour" à tous les autres <nobr>(n - 1)</nobr> , même s'ils l'ont déjà salué plus tôt}, où n est le nombre tous les hôtes moins un (hôte de diffusion). </p><p><br>  En conséquence, toutes les statistiques collectées sont alimentées à l'entrée d'un algorithme spécial (plus à ce sujet dans l'un des articles suivants), qui construit la topologie du réseau (plus précisément, il en fait plus - il construit immédiatement la chaîne de pairs correcte pour RingSync). </p><p><br>  Soit dit en passant, la configuration réseau minimale à analyser consiste en deux commutateurs, chacun ayant deux hôtes connectés.  Quant à la vitesse de diffusion et de monodiffusion, le trafic de diffusion peut être maintenu dans la plage de <nobr>75% à 100%</nobr> du « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">débit de données net</a> » (débit binaire net; recherche sur «Ethernet 100Base-TX»), et de la monodiffusion dans la plage de <nobr>80% à 100%</nobr> . </p><br><div class="spoiler">  <b class="spoiler_title">Et que se passe-t-il si vous supprimez l'un des hôtes?</b> <div class="spoiler_text"><hr><p>  Cela se traduira par un réseau dans lequel un commutateur auquel <nobr>3 hôtes sont</nobr> connectés et un autre commutateur est connecté dans le contexte entre l'un des hôtes et le commutateur.  Autrement dit, il n'y a qu'un seul commutateur dans le réseau (inséré dans la section s'est transformé en un "cavalier" - nous ne le comptons pas), et c'est un cas idéal pour RingSync "le goulot d'étranglement" ne vient d'où.  <em>Puisqu'il n'y a pas de problème, il n'y a rien à corriger</em> ： Cong </p><hr></div></div><br><h2><a name="lltr-advanced"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> LLTR Advanced </h2><hr><a name="fig_sticker"></a><div style="text-align:center;"> <a href=""><img alt="   IQ" title="Image de test de QI" height="428" src="https://habrastorage.org/webt/wu/rd/tr/wurdtrgr9lpx_apdnzvb_xusiya.png#sticker.png"></a> </div><p>  <font color="#FFF"><sup>Un OVNI est</sup> <sub>entré</sub> et a <sup>laissé</sup> <sub>cet</sub> <sup>espace</sup> <sub>ici</sub> ?</font>  <em>Rappelle l'une des photos du test de QI</em> </p><p><br>  Comme il a été écrit ci-dessus, lors de l'utilisation de LLTR Basic, nous devons scanner le réseau <nobr>n × (n - 1)</nobr> fois, ce qui nous conduit à <nobr>O (n</nobr> <sup>2</sup> ).  Pour un petit nombre d'hôtes, ce n'est pas un problème: </p><br><ul><li>  4 hôtes, n = 3 ⇒ 6 balayages; </li><li>  30 hôtes, n = 29 ⇒ 812 scans. </li></ul><p><br>  Mais si nous avons 200 hôtes, n = 199 ⇒ <nobr>39 402</nobr> analyses.  Pire encore ... </p><p><br>  Voyons comment nous pouvons améliorer la situation.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Groknom</a> deux options simples pour la topologie de l'arbre: </p><br><ul><li>  une étoile de commutateurs; </li><li>  connexion série de commutateurs. </li></ul><br><h3><a name="topologiya-zvezda-iz-svitchey"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> Topologie: «étoile des commutateurs» </h3><br><a name="fig_LLTR_Advanced_star_0"></a><div style="text-align:center;"><img alt="Graphique: LLTR Advanced Star 0" height="285" src="https://habrastorage.org/webt/kq/du/pw/kqdupwwbdcakifkimzzaayhhnbq.png#LLTR_Advanced_star_0.svg.png"></div><p><br>  Ci-dessous, l'action décrite dans cette image est expliquée étape par étape. </p><p><br>  Nous avons 5 commutateurs et 12 hôtes.  Les hôtes sont indiqués par des cercles [●] à l'intérieur du commutateur auquel ils sont connectés.  Un commutateur complètement noir est le commutateur «racine». </p><p><br>  Nous sélectionnons l'un des hôtes pour le rôle de la source du trafic de diffusion (représenté dans le diagramme par un cercle [○]). </p><p><br>  Si vous utilisez LLTR Basic, alors pour 12 hôtes, n = 11 ⇒ vous avez besoin de 110 analyses (itérations). </p><p><br>  <strong>Itération 1</strong> .  Choisissez l'un des hôtes (indiqué en bleu <img alt="cercle flèche vers le haut" width="10" height="18" src="https://habrastorage.org/webt/zs/df/e5/zsdfe5fldtzhoqalclmcvp8tjhu.png#LLTR_Advanced_unicast_src.png">  ) comme source (src) du trafic unicast et un hôte (indiqué en bleu <font color="#4285F4">●</font> ) comme destinataire du trafic (dst) unicast.  Commençons, à une certaine période, à analyser et à collecter des statistiques. </p><p><br>  Les statistiques recueillies ont montré une diminution de la vitesse du trafic de diffusion sur 9 hôtes.  Pour plus de clarté, la baisse de vitesse sur tous les hôtes connectés au commutateur est désignée par <img alt="rectangle flèche vers le bas" width="20" height="15" src="https://habrastorage.org/webt/q8/qa/6j/q8qa6juznz0hripzx6lh5k08-2e.png#LLTR_Advanced_broadcast_speed_down_on_all_hosts.png">  . </p><p><br>  En fonction de la baisse de vitesse détectée, vous pouvez répartir les hôtes dans deux clusters: </p><br><ul><li>  <strong><font color="#FDD569">jaune</font></strong> (initial) - hôtes sur lesquels la vitesse de diffusion est restée proche du maximum; </li><li>  <strong><font color="#4CD46B">vert</font></strong> - hôtes sur lesquels une baisse significative de la vitesse de diffusion a été enregistrée. </li></ul><p><br>  <strong>Itération 2</strong> .  Nous sélectionnerons d'autres hôtes src et dst unicast, et recommencerons l'analyse et la collecte de statistiques. </p><p><br>  La baisse de vitesse est fixée sur 3 hôtes.  Maintenant, ils sont dans le cluster <strong><font color="#4CD46B">vert</font></strong> , car  lors de l'itération précédente, une baisse de vitesse a également été enregistrée sur ces hôtes.  Déplacez ces 3 hôtes du cluster <strong><font color="#4CD46B">vert</font></strong> vers le nouveau cluster <strong><font color="#ED5547">rouge</font></strong> . </p><p><br>  <strong>Itération 3</strong> .  Encore une fois, sélectionnez les autres hôtes src et dst unicast, puis recommencez l'analyse et la collecte de statistiques. </p><p><br>  La baisse de vitesse est enregistrée sur les 3 autres hôtes.  Maintenant, ils sont dans le cluster <strong><font color="#4CD46B">vert</font></strong> .  Déplacez ces 3 hôtes du cluster <strong><font color="#4CD46B">vert</font></strong> vers le nouveau cluster <strong><font color="#9C8FD7">violet</font></strong> . </p><p><br> <strong><a name="LLTR_Advanced_star_0-conclusion"></a></strong>  <strong>Conclusion</strong> : après <strong>trois</strong> itérations sur 110, tous les hôtes ont été divisés en grappes correspondant à leurs commutateurs.  Dans les 107 itérations restantes, aucun nouveau cluster ne sera formé. </p><p><br>  C'était un cas idéal - soit nous connaissions la topologie du réseau, soit nous avons eu beaucoup de chance. </p><br><h4><a name="interesno-kakie-mogut-byt-varianty-pervoy-iteracii"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> Je me demande quelles pourraient être les options pour la première itération? </h4><p><br>  <strong>Option 1: «unicast on broadcast sw»</strong> .  Unicast src est situé sur le même commutateur que broadcast src (ainsi que dans l'exemple ci-dessus dans la figure de l'itération 1).  Unicast dst est situé sur tout autre commutateur (pas de diffusion src). </p><br><a name="fig_LLTR_unicast_on_broadcast_sw"></a><div style="text-align:center;"><img alt="Animation: monodiffusion LLTR située sur le commutateur de diffusion" height="159" src="https://habrastorage.org/webt/g5/30/la/g530la--nnuiayvlemfbdhz6ona.gif#LLTR_unicast_on_broadcast_sw.gif"></div><p><br>  Dans tous les cas, la réponse du réseau à l'analyse est la même - une baisse de la vitesse sur tous les commutateurs src non diffusés.  Ceci est compréhensible - unicast src fusionne au même début du canal que broadcast src - d'où la baisse de vitesse sur tous les autres commutateurs, et peu importe celui sur lequel le dic unicast est activé. </p><p><br>  <strong>Option 2: «monodiffusion générale»</strong> .  Unicast src est situé sur n'importe quel commutateur «non broadcast src».  Unicast dst est situé sur tout autre commutateur («not broadcast src» et «not unicast src»). </p><br><a name="fig_LLTR_unicast_general"></a><div style="text-align:center;"><img alt="Animation: cas général de monodiffusion LLTR" height="159" src="https://habrastorage.org/webt/pp/rz/z2/pprzz20e3jcilksjz-x977hvmd0.gif#LLTR_unicast_general.gif"></div><p><br>  Dans tous les cas, une baisse de vitesse se produit sur celle des commutateurs sur lesquels se trouvait dst unicast.  Le même comportement de réseau était à l'itération 2 et 3 (voir la figure) de l'exemple au début de la section. </p><p><br>  <strong>Option 3: «unicast pour diffuser sw»</strong> .  Unicast src est situé sur n'importe quel commutateur «non broadcast src» (ainsi que dans l'option 2).  Unicast dst est situé sur le même commutateur que broadcast src. </p><br><a name="fig_LLTR_unicast_to_broadcast_sw"></a><div style="text-align:center;"><img alt="Animation: monodiffusion LLTR dans le commutateur de diffusion" height="141" src="https://habrastorage.org/webt/g0/xd/so/g0xdsoosr-xhrmb2sl3dy-g51eo.gif#LLTR_unicast_to_broadcast_sw.gif"></div><p><br>  Dans ces cas, il n'y a pas de réponse du réseau à l'analyse.  Si dans les versions précédentes (1 et 2) un nouveau cluster a été créé, alors dans cette variante de nouveaux clusters ne sont pas créés.  C'est en partie mauvais - nous n'obtenons pas de nouvelles informations sur la topologie du réseau (en fait, dans certains cas, et si cette itération n'est pas la première, vous pouvez obtenir des informations sur l'emplacement de dst de monodiffusion). </p><p><br>  <strong>Option 4: «unicast in sw»</strong> .  Unicast src et dst sont situés sur le même commutateur. </p><br><a name="fig_LLTR_unicast_in_sw"></a><div style="text-align:center;"><img alt="Animation: monodiffusion à l'intérieur du commutateur" height="141" src="https://habrastorage.org/webt/1o/-k/7d/1o-k7dsd2tjkk2kquvu4kiev8ru.gif#LLTR_unicast_in_sw.gif"></div><p><br>  Ici aussi, le réseau ne répond pas du tout à l'analyse et il n'y a donc pas de nouveaux clusters. </p><p><br>  <strong>Le résultat</strong> .  Les options 1 et 2 sont bonnes, le réseau y répond et nous donne de nouvelles informations sur sa topologie.  Et sur la base de ces informations, de nouveaux clusters sont créés. </p><p><br>  Les options 3 et 4 ne peuvent que dire que dst unicast est soit sur le même commutateur avec src de diffusion, soit sur le même commutateur avec src unicast.  De plus, ils ne peuvent pas donner des informations complètes en une seule itération sur l'emplacement exact de dst de monodiffusion - ils seront toujours à côté de src de diffusion ou de src de monodiffusion.  L'emplacement exact ne peut être obtenu qu'en combinant les informations reçues avec des informations provenant d'autres itérations. </p><br><h4><a name="a-byl-li-vybor-unicast-src-i-dst-v-primere-sluchaynym"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> Le choix de src et dst unicast dans l'exemple était-il aléatoire? </h4><p><br>  <em><font color="gray">Peut-être que le choix n'était pas aléatoire et qu'il y a un motif caché dedans?</font></em> </p><p><br>  Ok, nous venons de voir comment le réseau répond aux différentes options de numérisation.  Rappelez-vous l'exemple du début de la section, il est peut-être temps de le regarder sous un «nouvel angle» et de répondre à la question: ai-je accidentellement choisi unicast src et dst, ou triché? </p><br><a name="fig_LLTR_Advanced_star_0-probability"></a><div style="text-align:center;"><img alt="Graphique: LLTR Advanced Star 0 - Probabilités" height="501" src="https://habrastorage.org/webt/hd/jb/qf/hdjbqfsi4opivk0qbbznjsafnou.png#LLTR_Advanced_star_0.probability.svg.png"></div><p><br>  Cette image est similaire à l'image du début de la section, la différence est que des choix alternatifs de src unicast ont été ajoutés à chaque itération, et quelque chose à droite ... </p><p><br>  Ce «quelque chose» est le calcul de la probabilité de formation d'un nouveau cluster (le nombre d'options dans lesquelles un nouveau cluster sera créé divisé par le nombre d'options dans lesquelles un nouveau cluster sera créé + le nombre d'options qui ne conduisent pas à la création d'un nouveau cluster).  Les options ont été calculées par rapport au src unicast fixe et au dst unicast libre.  Unicast dst "free" - cela signifie que toutes les options possibles pour son emplacement ont été considérées. </p><p><br>  Autrement dit, dans l'exemple, j'ai choisi spécifiquement les options qui avaient la plus grande probabilité de former un nouveau cluster.  Malheureusement, en réalité, nous ne pouvons pas utiliser une telle estimation (des probabilités).  Pas étonnant à la fin j'ai écrit: </p><blockquote>  C'était un cas idéal - soit nous connaissions la topologie du réseau, soit nous avons eu beaucoup de chance. </blockquote><p>  Cependant, la capacité d'évaluer la probabilité de formation d'un nouveau cluster nous est utile ci-dessous. </p><br><h4><a name="skanirovat-vnutri-klastera-ili-ispolzovat-mezhklasternoe-skanirovanie--vot-v-chem-vopros"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> Scannez à l'intérieur du cluster, ou utilisez le scan inter-cluster - c'est la question ... </h4><p><br>  Dans l'exemple ci-dessus, lors de la dernière (3e) itération, l'analyse entre les clusters a été utilisée.  Est-ce si bon, car au début, ils utilisaient la numérisation à l'intérieur du cluster? </p><p><br>  <b>Remarque</b> : Si unicast src et dst se trouvent dans le même cluster, il s'agit d'une <strong>analyse à l'intérieur du cluster</strong> .  Si unicast src se trouve dans un cluster et unicast dst dans un autre, il s'agit de l' <strong>analyse intercluster</strong> . </p><p><br>  Si vous regardez les probabilités dans la 3ème itération, l'analyse intercluster aura 0,60 contre 0,30 pour l'analyse à l'intérieur du cluster.  La probabilité semble nous dire «utilisez le balayage intercluster, bro.», Mais cela vaut-il la peine de suivre aveuglément ses conseils? </p><p><br>  <b>Remarque</b> : L'utilisation d'un seul type d'analyse (au sein d'un cluster ou d'un intercluster) réduira considérablement le nombre d'itérations. </p><p><br>  Si dans l'exemple ci-dessus, à partir de la 4ème itération, nous commençons à scanner uniquement <strong>à l'intérieur du cluster</strong> , cela prendra 20 itérations <nobr>(3 × 2 +</nobr> <nobr>3 × 2 +</nobr> <nobr>2 × 1 +</nobr> <nobr>3 × 2)</nobr> , au total <strong>23 itérations</strong> seront obtenues au lieu de 110 (comme cela a été calculé au début de la section).  Si, à partir de la même 4ème itération, seul le <strong>scan intercluster est démarré</strong> , alors il faudra 87 itérations <nobr>(3 × (3 + 2 + 3) +</nobr> <nobr>3 × (3 + 2 + 3) +</nobr> <nobr>2 × (3 + 3 + 3) +</nobr> <nobr>3 × (3 + 3 + 2) -</nobr> <nobr>3)</nobr> , au total <strong>90 itérations</strong> se révéleront. </p><p><br>  Le balayage intercluster perd sensiblement, de plus, il ne peut pas être utilisé à la 1ère itération (pour le moment il n'y a qu'un seul cluster).  Si nous prêtons attention à la 2e itération de l'exemple ci-dessus, nous pouvons voir que la dernière option de scan alternative a une probabilité de former un nouveau cluster de 0,00.  Je crois que la réponse à la question: «Quel type de numérisation cette alternative avait-elle?» Est déjà claire. </p><br><h4><a name="prelesti-parallelnogo-skanirovaniya"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray"># Les</font></a> plaisirs du balayage parallèle </h4><p><br>  Si, en utilisant l' <strong>analyse à l'intérieur d'un cluster</strong> , il est possible d'exécuter simultanément une analyse dans tous les clusters, les 20 itérations supplémentaires <nobr>(3 × 2 +</nobr> <nobr>3 × 2 +</nobr> <nobr>2 × 1 +</nobr> <nobr>3 × 2)</nobr> seront réduites à 6 itérations (3 × 2).  <strong>Le scan intercluster</strong> peut également bénéficier d'un scan parallèle. </p><p><br>  La question est de savoir si une analyse affectera les résultats d'une autre analyse, exécutée en parallèle. </p><p><br> <b>Note</b> :         (   ),      –        ,       ? </p><br><a name="fig_LLTR_Advanced_star_parallel_0"></a><div style="text-align:center;"><img alt=": LLTR Advanced    0" height="285" src="https://habrastorage.org/webt/ci/bw/8-/cibw8-l6h6mgpvppidpaxe9dnqi.png#LLTR_Advanced_star_parallel_0.svg.png"></div><p><br>  :  –    <strong> </strong> ; ,   2‑  —  <strong></strong>  . </p><p><br>   <strong> </strong>    –  6‑       .      ,     unicast src  dst  ,       2 .      ,      2‑ : “     0.00”. </p><p><br> <strong> </strong>  “  ”,          <strong> </strong> . ,    ‑ … </p><br><a name="fig_LLTR_Advanced_star_parallel_1"></a><div style="text-align:center;"><img alt=": LLTR Advanced    1" height="223" src="https://habrastorage.org/webt/ya/v3/pp/yav3pp37lxearuhyv0z18cc0p7q.png#LLTR_Advanced_star_parallel_1.svg.png"></div><p><br>  ,        , .  2‑    (“ <strong>unicast on broadcast sw</strong> ”: unicast src     ,   broadcast src)      (“unicast in sw”: unicast src  dst       ). </p><p><br>  “ <strong>unicast on broadcast sw</strong> ”      <strong><font color="#4CD46B"></font></strong> ,      “unicast in sw”,         .     ,    “unicast in sw” ,  unicast src    <strong><font color="#4CD46B"></font></strong>  (   –  ),  2   <strong><font color="#4CD46B"></font></strong>     <strong><font color="#9C8FD7"></font></strong> . </p><p><br>        .         ,    (   ,       ),        .   “”  ,    broadcast src.  ,    ,  broadcast src    <strong><font color="#FDD569"></font></strong> ,   <strong><font color="#4CD46B"></font></strong> !     . </p><p><br> <b>Note</b> :  ,        unicast src   ,    ,     (    ),    . </p><p><br> <strong></strong> :       . </p><p><br>    IQ … </p><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><hr><p>    ,        (     …) </p><hr></div></div><br><h3><a name="topologiya-posledovatelnoe-soedinenie-svitchey"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="  "><font color="gray">#</font></a> : “  ” </h3><br><a name="fig_LLTR_Advanced_serial_0"></a><div style="text-align:center;"><img alt="Graphique: Connexion série avancée LLTR 0" height="381" src="https://habrastorage.org/webt/3f/lk/31/3flk31x3t32zjfnlfpwarpgdh8g.png#LLTR_Advanced_serial_0.svg.png"></div><p><br>      . </p><p><br>      unicast ( )  broadcast ( ) ,     broadcast  (   ).  5‑   ,     “”     ,    – .     ,  ,   ,       (↼),  (  ) –      (⇁), .. (⇋). </p><p><br>         . </p><p><br>    5   <strong>15</strong> .   LLTR Basic,   15 , n=14 ⇒  182 . </p><p><br>      .  1‑   ,  ,  unicast <strong>src</strong>     ,   broadcast src,  unicast <strong>dst</strong>      broadcast src . Unicast     ( <em></em> )   broadcast   broadcast src .         (   ).  2‑     ,  ,  unicast <strong>dst</strong>   broadcast src . </p><p><br>        .     ( ). </p><p><br>  <strong>3</strong> .  broadcast  unicast  <strong> </strong> –   <strong></strong> . </p><p><br>  <strong>4</strong> .  broadcast  unicast  <strong></strong> –  <strong></strong> . </p><p><br>  <strong>5</strong> . Unicast src  dst  <strong>  </strong>  broadcast src  –   <strong></strong> ,   <strong>unicast dst</strong>  <em></em> ( <strong> </strong> ). ,   2‑ ,     ,  “     ”. </p><p><br> ,   ,    <strong> </strong> (2   ): </p><br><a name="fig_LLTR_Advanced_serial_1"></a><div style="text-align:center;"><img alt="Graphique: Connexion série avancée LLTR 1" height="286" src="https://habrastorage.org/webt/6w/b2/is/6wb2isfs-tuwfjgvlucksrx1p9o.png#LLTR_Advanced_serial_1.svg.png"></div><p><br>    ,   .     4‑     (  ,    ,     ),   1‑    . </p><p><br>        30  <nobr>((4) +</nobr> <nobr>(3×2 +</nobr> <nobr>3×2 +</nobr> <nobr>3×2 +</nobr> <nobr>2×1 +</nobr> <nobr>3×2))</nobr> ,  182    LLTR Basic. </p><p><br>       ? </p><br><a name="fig_LLTR_Advanced_serial_parallel_0"></a><div style="text-align:center;"><img alt="Graphique: balayage parallèle de connexion série avancée LLTR 0" height="224" src="https://habrastorage.org/webt/cz/by/fk/czbyfkdaszzqkpf76za8nvhay8g.png#LLTR_Advanced_serial_parallel_0.svg.png"></div><p><br>     ,      ‑   .  3‑ , unicast   <strong><font color="#FDD569"></font></strong>        (↼),    broadcast ,    <em></em>    unicast src  <strong><font color="#FDD569"></font></strong> .   ,   unicast src  <strong><font color="#FDD569"></font></strong>      ( <strong><font color="#ED5547"></font></strong> ),   <em></em> ,     .   unicast src <strong><font color="#ED5547"></font></strong>    <strong><font color="#ED5547"></font></strong> ,     <strong><font color="#ED5547"></font></strong>    <strong><font color="#ED8F48"></font></strong> .  ,     ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   “  ”</a> . </p><p><br> ,   ,         ,         ?    “  ”    … </p><p><br>        ( ),     : </p><br><a name="fig_LLTR_Advanced_serial_parallel_0_0"></a><div style="text-align:center;"><img alt="Graphique: Balayage parallèle de connexion série avancée LLTR 0 0" height="79" src="https://habrastorage.org/webt/mh/zy/r3/mhzyr37_5vq3rzgyavqfbitutmm.png#LLTR_Advanced_serial_parallel_0_0.svg.png"></div><p><br>      (2 ),    (   ). </p><p><br>   ,        – <strong><font color="#9C8FD7"></font></strong>      ,     1 .        –          /   <strong><font color="#ED8F48"></font></strong> . </p><p><br>      ,      1 ,   (  ,   ),    ,       1 ,    ?      ? </p><p><br>  :       (  ),        ()      . ,          ,   4  (1 <strong></strong> + 3   ): </p><br><a name="fig_LLTR_Advanced_serial_parallel_0_1"></a><div style="text-align:center;"><img alt="Graphique: Balayage parallèle de connexion série avancée LLTR 0 1" height="47" src="https://habrastorage.org/webt/rj/5h/qm/rj5hqm91_yafnjau4-d2ocg3co8.png#LLTR_Advanced_serial_parallel_0_1.svg.png"></div><p><br>      : </p><br><a name="fig_LLTR_Advanced_serial_parallel_0_2"></a><div style="text-align:center;"><img alt="Graphique: Balayage parallèle de connexion série avancée LLTR 0 2" height="109" src="https://habrastorage.org/webt/mf/xb/9b/mfxb9bmmbir0ykn9_ndw7phvjns.png#LLTR_Advanced_serial_parallel_0_2.svg.png"></div><p><br>       : “       ,      <strong></strong>    ?” – ,    . </p><br><a name="fig_sticker2"></a><div style="text-align:center;"> <a href=""><img alt="Il y a clairement quelque chose au dos de l'autocollant" height="428" src="https://habrastorage.org/webt/-a/2v/rb/-a2vrbwsempbjeg8kzgtwzqbmrc.png#sticker2.png"></a> </div><p> <font color="#FFF"><sup></sup> <sub></sub>  <sup></sup> <sub></sub> <sup></sup> <sub></sub> ?</font> <em>  .     …</em> ；） </p><br><h2><a name="tldr"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a> TL;DR </h2><hr><p>       ,   … </p><p><br> ,  ,    : </p><br><ul><li>       2  / ,        –      ; </li><li>   / ,     ,       ( ‑    ). </li></ul><p><br>            xkcd,       ,      （： </p><br><a name="fig_Real_Programmers"></a><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img alt="Sonde papillon" title="Les vrais programmeurs utilisent Rowhammer pour écrire dans la mémoire et Meltdown pour en lire." height="467" src="https://habrastorage.org/webt/l1/ov/mb/l1ovmbzmahaxxz8i23jo4takztm.png#Real_Programmers.png"></a> </div><br><h2><a name="to-be-continued"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Lien vers la section"><font color="gray">#</font></a>    / To be continued… </h2><hr><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Tutoriel OMNeT ++ en russe">   <abbr title="Banc d'essai objectif de réseau modulaire en C ++">OMNeT++</abbr>  INET</a> [ <strong>tutorial</strong> ] </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">      </a> </li><li> <abbr title="Banc d'essai objectif de réseau modulaire en C ++">OMNeT++</abbr>  </li><li>  </li><li> <abbr title="Banc d'essai objectif de réseau modulaire en C ++">OMNeT++</abbr>  2 </li><li>  </li><li>  <font color="gray">(‑: “ <a title="le film" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font color="gray">   </font></a> ”)</font> </li></ol><p><br>  :  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub Pages</a> ; <br><a name="doi"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="ID d'article"><img alt="DOI: 10.5281 / zenodo.1406970" width="186" height="20" src="https://habrastorage.org/getpro/habr/post_images/833/72e/efe/83372eefe11b7360b92d710e278ac481.svg"></a> </p><hr><div class="spoiler"> <b class="spoiler_title">    …</b> <div class="spoiler_text"><hr><p>     ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="   ">/</a> . </p><p><br>         ,           ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="   ">/</a> . </p><p><br>            ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="   ">/</a> . </p><p><br> PS      : </p><p><br> ( “ ”    “” (~~),     ‑    (   ),             ( : “   ”)) </p><hr></div></div><a name="ps-section"></a><p><br> <b>PS</b>    <img alt="un 7-Zip me" width="52" height="16" src="https://habrastorage.org/webt/jb/dr/dp/jbdrdpf0zozugszofy1owgrpweu.png#un7zipMe.png">   <font color="gray">（； <em>     <abbr title="Identificateur de ressource uniforme">URI</abbr>  )</em></font> </p><p><br> <b>PPS</b>      ,     ；） </p><p><br> <b>PPPS</b>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>     ,       ,      –       .    ( ) ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Comment envoyer un message privé">/</a> ,     –    ：） </p><p><br> <b>PPPPS</b>   <strong></strong>       ,     . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414799/">https://habr.com/ru/post/fr414799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414785/index.html">Visualisation des données avec Angular et D3</a></li>
<li><a href="../fr414787/index.html">Le nouveau RAT Android utilise le protocole Telegram</a></li>
<li><a href="../fr414789/index.html">Tesla Model S est de nouveau sous tension et un sabotage intentionnel [selon Elon Mask] est révélé dans l'atelier de montage de Model 3</a></li>
<li><a href="../fr414793/index.html">Comment fonctionnent les canaux de paiement et le réseau Lightning dans Bitcoin?</a></li>
<li><a href="../fr414797/index.html">Comment nous avons créé Open Lines chez Bitrix24</a></li>
<li><a href="../fr414801/index.html">Moscou Vue.js Meetup # 2 chez Mail.Ru Group</a></li>
<li><a href="../fr414803/index.html">Comment nous avons vu les paiements IoT lors d'un hackathon à Hong Kong</a></li>
<li><a href="../fr414805/index.html">Webinaire ouvert "Méthodes alternatives de recrutement"</a></li>
<li><a href="../fr414809/index.html">Swift 4.1: pourquoi Apple a renommé flatMap en compactMap</a></li>
<li><a href="../fr414811/index.html">Intégrez Telegram et Avaya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>