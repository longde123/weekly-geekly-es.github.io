<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï£ ü§¶üèø üêî Analyses bidirectionnelles pour les widgets iframe affili√©s √† l'aide de Google Tag Manager üó∫Ô∏è üõ∞Ô∏è üê´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les widgets font aujourd'hui partie int√©grante de nombreux grands portails, car ils vous permettent d'utiliser des conceptions de partenariat complexe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analyses bidirectionnelles pour les widgets iframe affili√©s √† l'aide de Google Tag Manager</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424799/"> Les widgets font aujourd'hui partie int√©grante de nombreux grands portails, car ils vous permettent d'utiliser des conceptions de partenariat complexes tout en √©vitant les longues proc√©dures de mise en ≈ìuvre.  Dans le m√™me temps, l'analyse Web des widgets est int√©ressante pour toutes les parties, mais dans le cas d'iFrame, des difficult√©s surviennent en termes de transfert de 100% des donn√©es aux participants du partenariat.  Quelles sont ces difficult√©s et comment nous avons r√©ussi √† les contourner, je voudrais dire dans cet article.  Tout d'abord, il sera int√©ressant pour toutes les personnes impliqu√©es dans le d√©veloppement et la mise en ≈ìuvre de widgets sur iFrame, ainsi que pour les analystes attir√©s. <br><a name="habracut"></a><br>  Tout d'abord, un peu d'histoire.  Nous d√©veloppons nos propres solutions d'automatisation dans le domaine du transport de passagers, ainsi que des produits √† utiliser sur les sites partenaires.  L'un d'eux √©tait le projet de r√©servation automatis√©e de salons VIP et d'affaires dans les a√©roports du monde et en Russie, visant √† r√©pondre aux besoins des clients commerciaux et premium de diverses compagnies a√©riennes.  Une base de donn√©es unique de services th√©matiques dans divers a√©roports int√©resse principalement les entreprises associ√©es au transport a√©rien de passagers, les agences de voyages en ligne, ainsi que les agences de voyages disposant de sites Web sur Internet.  Un widget ¬´VIP-hall¬ª a √©t√© cr√©√© pour ces entreprises, qui permet aux utilisateurs de tout site partenaire d'acc√©der √† cette base de donn√©es. <br><br>  Le widget est install√© de mani√®re standard via iFrame, le partenaire n'a qu'√† placer le code sur son site internet et configurer les param√®tres d'apparence selon le concept g√©n√©ral de conception.  En cons√©quence, un module de s√©lection et de r√©servation de salons VIP √† l'a√©roport d'int√©r√™t appara√Æt sur le site avec acc√®s √† des services a√©roportuaires premium, tels qu'une navette (transfert individuel du salon √† l'avion), une r√©union dans le salon avec une pancarte, l'escorte d'un employ√© et un acc√®s au parking pour les VIP les clients.  Le processus de r√©servation s'effectue en quelques √©tapes simples, √† l'int√©rieur desquelles l'utilisateur peut faire varier le contenu de la commande (Fig.1). <br><br><img src="https://i.imgur.com/hGuf48V.gif" alt="image"><br>  <i>Figure 1 - L'apparition du widget sur le site</i> <br><br>  √âtant donn√© la variabilit√© du remplissage des donn√©es, la question se pose bien s√ªr de suivre ce processus du point de vue analytique.  De plus, l'analyse Web est int√©ressante √† la fois pour le <b>propri√©taire du</b> widget et pour le <b>partenaire</b> qui le d√©finit, de sorte qu'au cours du processus de d√©veloppement, la t√¢che de suivre les √©v√©nements √† l'int√©rieur du widget et de les envoyer simultan√©ment dans deux directions est apparue: <br><br>  A. De tous les sites sur lesquels le widget est install√©, √† l'analyse Web du propri√©taire (d√©veloppeur). <br>  B. Du site sur lequel un widget particulier est install√©, aux analyses Web du partenaire. <br><br>  <b>Quelle est la difficult√© ici?</b>  Fondamentalement, le partenaire prend un code de widget unique, qui n'est pas personnalisable pour un site partenaire sp√©cifique, mais souhaite en m√™me temps voir les informations dans l'analyse uniquement sur son widget.  La deuxi√®me difficult√© est que le d√©veloppeur (propri√©taire) du widget doit recevoir les donn√©es de tous les sites partenaires en une seule fois dans un m√™me compteur, ce qui va √† l'encontre de la volont√© du partenaire de ne voir que ses propres informations.  En fin de compte, il vous suffit de faire la diff√©rence entre les donn√©es que le partenaire doit voir et celles que le propri√©taire verra.  Le probl√®me a √©t√© r√©solu √† l'aide de <b>Google Tag Manager</b> (ci-apr√®s - GTM). <br><br>  Cet outil est largement utilis√© pour l'analyse Web et la gestion des balises sur les sites, il n'a pas de sens de d√©crire en d√©tail le principe de son fonctionnement, pour comprendre qu'il suffit de se familiariser avec le concept de GTM √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'autres articles</a> .  Dans ce cas, il est important de comprendre que Google Tag Manager (Fig.2) vous permet de consolider les donn√©es du site √† l'int√©rieur de vos propres conteneurs et de les distribuer √† divers compteurs d'analyse Web en utilisant les r√®gles sp√©cifi√©es. <br><br><img src="https://i.imgur.com/SnMpud3.gif" alt="image"><br>  <i>Figure 2 - La fen√™tre "Tags" de Google Tag Manager avec des tags d√©j√† configur√©s pour le widget</i> <br><br>  Dans un premier temps, nous d√©crirons l'algorithme de r√©solution de ce probl√®me, afin de comprendre imm√©diatement la voie √† suivre pour arriver au r√©sultat.  Donc: <br><br><ol><li>  Le partenaire, comme le propri√©taire, souhaite suivre le widget de deux mani√®res ou deux √† la fois - en utilisant Yandex.Metrica ou Google Analytics. </li><li>  Une solution satisfaisante doit transmettre les donn√©es √† 4 compteurs: compteur des statistiques du propri√©taire, compteur Google Analytics du propri√©taire, compteur des statistiques du partenaire et compteur Google Analytics du partenaire. </li><li>  Un seul conteneur Google Tag Manager est install√© √† l'int√©rieur du widget, qui collectera toutes les donn√©es et les distribuera afin que chaque participant ne re√ßoive que les informations dont il a besoin. </li><li>  Les identifiants des compteurs du propri√©taire sont d√©finis par d√©faut, les identifiants du partenaire doivent leur √™tre indiqu√©s lors de la g√©n√©ration du code widget dans le bureau du partenaire pour une installation ult√©rieure sur le site. </li><li>  √âtant donn√© que le bureau du partenaire est d√©j√† configur√© pour le partenaire, des identificateurs peuvent y √™tre d√©finis et jet√©s dans le widget afin que Tag Manager les utilise. </li><li>  A l'int√©rieur de GTM, les identifiants sont substitu√©s dans les codes de d√©clenchement des √©v√©nements cibles, ainsi que la distribution de transmission des donn√©es par les compteurs propri√©taires et partenaires. </li><li>  Dans ce cas, GTM envoie toutes les donn√©es collect√©es aux compteurs du propri√©taire et les donn√©es sur le site du partenaire - uniquement aux compteurs du partenaire, car  lors de la substitution d'identifiants, seul le site sp√©cifi√© par le partenaire est suivi. </li></ol><br>  Pour faciliter la compr√©hension, nous donnons un organigramme du processus (Fig.3): <br><br><img src="https://i.imgur.com/chOfcFZ.jpg" alt="image"><br>  <i>Figure 3 - Diagramme du processus de transfert de donn√©es</i> <br><br>  Pour commencer, nous d√©terminerons qu'en plus du code Google Tag Manager, le site contient √©galement des codes de compteur Yandex.Metrica et Google Analytics g√©n√©r√©s automatiquement.  Dans ceux-ci, lors de la g√©n√©ration du code pour le site, les identifiants de compteur d√©finis par le partenaire sont transmis. <br><br>  Ces codes ne peuvent pas √™tre d√©finis dans le widget, car les capacit√©s GTM vous permettent de les g√©n√©rer automatiquement sur le site en tant que balises appropri√©es (type - HTML personnalis√© - Fig.4), mais dans ce cas, une √©criture dure dans le code du widget √©tait n√©cessaire - certains √©v√©nements sur le site n√©cessitent afin que le compteur soit imm√©diatement install√© √† l'int√©rieur du widget.  Fondamentalement, ce sont des √©v√©nements de chargement, l'apparition de pr√©roll.  Si vous n'avez pas ce type d'√©v√©nement, vous pouvez g√©n√©rer le code de compteur via GTM: <br><br><img src="https://i.imgur.com/OlldDXp.gif" alt="image"><br>  <i>Figure 4 - Un exemple de transfert du code m√©trique vers le site via GTM</i> <br><br>  Pour transf√©rer des donn√©es vers deux compteurs √† la fois (partenaire et propri√©taire), vous devez d√©finir non pas deux codes m√©triques ou analytiques diff√©rents, mais cr√©er un <b>code double sp√©cial</b> .  Au moment de la r√©daction, les codes corrects ressemblent √† ceci (Fig. 5): <br><br><img src="https://i.imgur.com/yf9ROGE.gif" alt="image"><br>  <i>Figure 5 - L'utilisation correcte des codes doubles m√©triques et GA</i> <br><br>  Ensuite, vous devez passer l'identifiant sp√©cifi√© par le partenaire dans le code compteur.  La difficult√© ici est que le code du widget est g√©n√©r√© automatiquement pour tous les sites, alors que les identifiants sont d√©j√† d√©finis dans un bureau d'affiliation distinct.  Pour le transfert correct, le programmeur a impl√©ment√© la solution suivante: <br><br>  Lorsque le widget est initialis√©, un iFrame est cr√©√©, dans les param√®tres desquels les identificateurs des compteurs du partenaire sont pass√©s (les compteurs sont pass√©s au src iFrame, apr√®s quoi ils sont analys√©s dans le widget depuis l'emplacement).  iFrame ouvre l'application de widget et le hook de cycle de vie (SPA) cr√©√© par le widget traite les param√®tres d'entr√©e des num√©ros de compteur avant le montage, et les num√©ros (identificateurs) sont stock√©s dans le localStorage. <br><br>  La construction suivante est utilis√©e pour placer le code Google Analytics dans index.html: <br><br><pre><code class="javascript hljs">&lt;script&gt; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer || []; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gtag</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ dataLayer.push(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); } gtag(<span class="hljs-string"><span class="hljs-string">'js'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()); gtag(<span class="hljs-string"><span class="hljs-string">'config'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-15930803-13'</span></span>); gtag(<span class="hljs-string"><span class="hljs-string">'config'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'partnerGA'</span></span>)] || <span class="hljs-string"><span class="hljs-string">'UA-15930803-14'</span></span>); <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Les scripts avec la variable src sont ins√©r√©s dynamiquement lorsque les compteurs sont initialis√©s: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>) script.setAttribute(<span class="hljs-string"><span class="hljs-string">'src'</span></span>, <span class="hljs-string"><span class="hljs-string">`https://www.googletagmanager.com/gtag/js?id=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ga || </span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'UA-15930803-14'</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">`</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.insertBefore(script, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.firstChild)</code> </pre> <br>  Ici, UA-15930803-14 est le compteur ¬´compteur¬ª du propri√©taire, qui est utilis√© si le compteur n'est pas d√©fini par le partenaire.  Cette situation peut se produire si le partenaire n'a pas sp√©cifi√© les identifiants des compteurs en g√©n√©ral, ou si un seul identifiant a √©t√© sp√©cifi√© - il devrait toujours y avoir un code de remplacement afin que le site ne rencontre pas d'erreurs JavaScript li√©es √† l'absence d'un identifiant pour le bon fonctionnement du code de transmission de tout √©v√©nement.  UA-15930803-13 dans ce cas est l'identifiant principal du Propri√©taire, auquel les donn√©es proviennent dans tous les cas et de n'importe quel site. <br><br>  De la m√™me mani√®re que pour GA, le code Yandex.Metrica est g√©n√©r√©, qui utilise l'identifiant sp√©cifi√© de la m√©trique du propri√©taire, l'identifiant de remplacement du compteur du propri√©taire par d√©faut et la conception de transmission de l'identifiant du partenaire.  Le code est g√©n√©r√© selon le sch√©ma montr√© sur la figure 5 en utilisant les structures de l'exemple ci-dessus. <br><br>  Apr√®s les codes de compteur, vous devez transmettre les identifiants d√©finis par le partenaire aux identifiants Google Tag Manager.  √Ä l'int√©rieur du conteneur, elles seront d√©j√† utilis√©es comme variables internes, dont les valeurs peuvent √™tre fournies aux √©v√©nements g√©n√©r√©s. <br><br>  Pour GTM, la technique la plus couramment utilis√©e est les variables au niveau des donn√©es (dataLayer).  La couche de donn√©es est une variable JavaScript dont l'initialisation est automatiquement d√©crite dans le conteneur Google Tag Manager.  En l'utilisant, vous pouvez transf√©rer des √©v√©nements survenant sur le site Web comme un √©v√©nement, ou d√©finir vos propres variables pour GTM.  Cela se fait en utilisant la construction <br><br><pre> <code class="javascript hljs">dataLayer.push(<span class="hljs-string"><span class="hljs-string">'_'</span></span>: <span class="hljs-string"><span class="hljs-string">'_'</span></span>);</code> </pre> <br>  D√©clench√© apr√®s l'annonce du code GTM sur le site.  Cependant, dans notre cas, la variable au niveau des donn√©es n'a pas fonctionn√©, le probl√®me est peut-√™tre la difficult√© de travailler sp√©cifiquement avec l'iframe.  Si vous d√©finissez la construction push () automatiquement, le conteneur ne re√ßoit pas de variables, et dans ce cas, nous voulions une telle impl√©mentation de la t√¢che.  Si vous essayez de d√©finir manuellement la variable de niveau de donn√©es (par exemple, en cliquant sur le site), le transfert de variable se d√©roule normalement. <br><br>  Afin de ne pas perdre de temps √† analyser le processus, nous avons utilis√© une solution alternative - la cr√©ation de variables JavaScript globales via <b>localStorage</b> . <br><br>  La propri√©t√© localStorage vous permet de stocker des variables avec les valeurs donn√©es sans √™tre li√© √† la page ouverte du site, et les donn√©es √† l'int√©rieur de ce r√©f√©rentiel ne peuvent pas √™tre simplement supprim√©es.  En cons√©quence, les identifiants de compteur de partenaires ont √©t√© transmis en utilisant les conceptions suivantes: <br><br><pre> <code class="javascript hljs">localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'partnerMetrika1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'partnerMetrika2'</span></span>, <span class="hljs-string"><span class="hljs-string">'yaCounter'</span></span>); localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'partnerGA'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA--'</span></span>);</code> </pre> <br>  Ici, la premi√®re construction transmet le num√©ro de m√©trique du partenaire lui-m√™me, la deuxi√®me construction transmet la valeur collective yaCounter pour la commodit√© de cr√©er la balise "Event" dans Google Tag Manager (plus √† ce sujet plus tard), et la troisi√®me - l'identifiant Google Analytics. <br><br>  Ceci termine le transfert de donn√©es et configure le GTM lui-m√™me. <br><br>  Tout d'abord, d√©cidons du fonctionnement de Google Tag Manager.  Il pr√©sente 3 niveaux d'interaction: <br><br>  <b>Tag</b> .  Cela fait partie du code qui peut √™tre h√©berg√© sur un site sur lequel GTM est install√© et peut √™tre ex√©cut√© comme tout autre code, modifiant le contenu du site ou transf√©rant des donn√©es vers des compteurs d'analyse Web. <br><br>  Le tag est d√©clench√© si une condition est remplie sur le site. <br><br>  <b>D√©clencheur</b>  Il s'agit en fait d'une condition dont la r√©alisation entra√Æne le d√©clenchement du tag.  Cela peut √™tre un √©v√©nement sur un site, une modification de la valeur des variables ou une action standard, comme un clic ou une page vue. <br><br>  <b>Variable</b> .  Il contient certaines valeurs qui peuvent √™tre transmises de diff√©rentes mani√®res et est utilis√© comme fournisseur de donn√©es pour les balises ou un marqueur de condition. <br><br>  Le contenu des variables d√©clenche le d√©clencheur, et le d√©clencheur d√©clenche √† son tour la balise correspondante.  Les identifiants des compteurs affili√©s sont d√©finis exactement comme des variables, √† partir de l√†, il vaut la peine de commencer la formation de donn√©es dans le conteneur GTM. <br><br>  Nous avons cr√©√© trois variables principales de type ¬´code JavaScript natif¬ª (Fig. 6): <br><br><img src="https://i.imgur.com/qWZwXhw.gif" alt="image"><br>  <i>Figure 6 - Exemple de variable prenant l'identifiant de m√©trique d'affili√©</i> <br><br>  Ici, la valeur de la variable = la valeur que nous avons prise de localStorage. <br><br>  Maintenant, si GTM acc√®de √† la variable, il recevra sa valeur - l'identifiant de la m√©trique partenaire.  De la m√™me mani√®re, nous avons cr√©√© des variables pour le num√©ro de m√©trique de l'affili√© et l'identifiant Google Analytics du partenaire. <br><br>  √Ä quoi servent ces variables?  Ils r√©solvent le probl√®me de l'envoi de donn√©es sur le d√©clenchement d'√©v√©nements sur le site aux compteurs affili√©s.  Google Tag Manager a une proc√©dure standard pour transf√©rer des objectifs vers Google Analytics, o√π vous pouvez utiliser la valeur d'une variable comme identifiant de compteur.  Et pour la m√©trique, une balise est utilis√©e sous forme de code HTML personnalis√© contenant la m√©trique JavaScript standard: <br><br><pre> <code class="javascript hljs">yaCounterXXXXXX.reachGoal(<span class="hljs-string"><span class="hljs-string">'TARGET_NAME'</span></span>);</code> </pre> <br>  Ici, TARGET_NAME est le nom interne de l'√©v√©nement cible pour la m√©trique (ces objectifs sont cr√©√©s dans les param√®tres du compteur via le type "√âv√©nement JavaScript"), et  est le num√©ro du compteur. <br><br>  Ainsi, nous cr√©ons des balises correspondantes pour diff√©rents types de compteurs. <br><br>  <b>Pour Google Analytics:</b> <br><br>  Le type de tag est ¬´Universal Analytics¬ª, l'identifiant de suivi provient de notre variable. <br><br><img src="https://i.imgur.com/WssMHHk.gif" alt="image"><br>  <i>Figure 7 - Exemple de d√©finition d'une balise qui transmet des donn√©es √† Google Analytics.</i> <br><br>  Ici, Cat√©gorie et Action sont les valeurs que Google Analytics doit capturer comme param√®tres pour d√©clencher la cible.  L'ID de suivi est une variable pr√©c√©demment d√©finie qui prend l'identifiant de partenaire de localStorage. <br><br>  <b>Pour Yandex.Metrica:</b> <br><br>  Le type de balise est ¬´HTML personnalis√©¬ª utilisant des constructions JavaScript. <br><br><img src="https://i.imgur.com/vhg9L0m.gif" alt="image"><br>  <i>Figure 8 - Exemple de d√©finition d'une balise qui transf√®re des donn√©es vers Yandex.Metrica</i> <br><br>  Ici {{PartnerMetrikaCounter}} est la d√©claration interne de la variable prenant l'identifiant de m√©trique partenaire de localStorage.  En utilisant l'objet window, nous substituons la valeur de la variable dans le code ex√©cutable, et sur la sortie nous obtenons yaCounterXXXXXXXX.reachGoal ('widget_loading'); o√π widget_loading est la valeur que Metric attrape comme param√®tre de r√©ponse de la cible. <br><br>  Il ne reste plus qu'√† d√©finir les d√©clencheurs pour d√©clencher les balises correspondantes.  Les d√©clencheurs dans notre cas sont, par exemple: <br><br><ul><li>  √âv√©nements pour le chargement r√©ussi du widget; </li><li>  √âv√©nements de r√©ussite ou d'√©chec d'une √©tape sur un widget; </li><li>  Remplissage dans certains domaines; </li><li>  S√©lection des conditions A ou B √† l'int√©rieur du widget; </li><li>  Interaction avec les formulaires, boutons et liens. </li></ul><br>  De plus, dans les param√®tres des compteurs Metrics et Google Analytics, il ne reste plus qu'√† cr√©er les objectifs correspondants: <br><br><img src="https://i.imgur.com/Tj70YS0.gif" alt="image"><br>  <i>Figure 9 - Un exemple de d√©finition d'un objectif dans Yandex.Metrica</i> <br><br><img src="https://i.imgur.com/HstDw1o.gif" alt="image"><br>  <i>Figure 10 - Un exemple de d√©finition d'un objectif dans Google Analytics</i> <br><br>  Le probl√®me est r√©solu.  Les codes de compteur double substituent les valeurs d√©finies par eux aux identifiants m√©triques et analytiques du partenaire, et les valeurs des identifiants de propri√©taire restent inchang√©es.  Dans le m√™me temps, Google Tag Manager ne transmet la r√©ponse des objectifs correspondants aux compteurs du partenaire que s'il re√ßoit des variables exactement les identifiants que le partenaire sp√©cifique a sp√©cifi√©s sur son site.  En parall√®le, GTM envoie au propri√©taire tous les √©v√©nements cibles de tous les sites. <br><br>  Si le partenaire n'a pas sp√©cifi√© un ou les deux identifiants, les valeurs par d√©faut sont utilis√©es - identifiants des compteurs de test, d√©finis √† l'avance par le propri√©taire. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424799/">https://habr.com/ru/post/fr424799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424787/index.html">Entretien avec Aaron Patterson, pr√©sident de la conf√©rence RubyRussia 2018</a></li>
<li><a href="../fr424789/index.html">Comment d√©ployer une application Ruby on Rails avec HAProxy Ingress, unicorn / puma et des sockets Web</a></li>
<li><a href="../fr424791/index.html">Extension des capacit√©s r√©seau d'un relais programmable √† l'aide du WI-FI</a></li>
<li><a href="../fr424793/index.html">Comment imprimer un moteur √©lectrique</a></li>
<li><a href="../fr424795/index.html">Quelle taille peut avoir un drone solaire?</a></li>
<li><a href="../fr424801/index.html">Zeppelin OS - une autre √©tape vers des contrats intelligents s√©curis√©s</a></li>
<li><a href="../fr424803/index.html">Un pirate ta√Øwanais √©tait sur le point de pirater la page Facebook de Mark Zuckerberg en ligne, mais a ensuite abandonn√© ses menaces</a></li>
<li><a href="../fr424805/index.html">Comment j'ai √©crit un dipl√¥me en LaTeX avec GitHub, Docker et TravisCI</a></li>
<li><a href="../fr424807/index.html">EOIP entre DD-WRT et Keenetic Giga 2 pour combiner deux appartements en un seul r√©seau ou un disque dur en deux appartements</a></li>
<li><a href="../fr424809/index.html">ADN M√©canismes de stockage et de traitement des informations. Partie I</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>