<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßü üõÉ üë©üèø‚Äçü§ù‚Äçüë©üèæ Quintett-Datenmodell und Hunderte von Gigabyte Daten ‚§¥Ô∏è ‚ûø ü•Ä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="K√ºrzlich haben wir den Ansatz getestet, den wir QDM nennen, wenn wir mit gro√üen Datenmengen arbeiten - Hunderten von Gigabyte. Im Rahmen dieser Aufgab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Quintett-Datenmodell und Hunderte von Gigabyte Daten</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465161/"><p>  K√ºrzlich haben wir den Ansatz getestet, den wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">QDM nennen,</a> wenn wir mit gro√üen Datenmengen arbeiten - Hunderten von Gigabyte.  Im Rahmen dieser Aufgabe haben wir 12 bis 24 Millionen Datens√§tze verarbeitet und die Leistung der Quintettl√∂sung mit √§hnlichen Funktionen in normalen Tabellen verglichen. </p><br><p>  Wir haben keine neuen Entdeckungen gemacht, aber die Hypothesen best√§tigt, die wir zuvor ge√§u√üert haben: Wie viel verliert der universelle Designer in den H√§nden der bedingten ‚ÄûTeekanne‚Äú an eine professionell konfigurierte Datenbank. </p><br><p>  Wir wissen jetzt auch, was in einer solchen Situation zu tun ist - die L√∂sung ist recht einfach und zuverl√§ssig, und wir haben Erfahrung in der Organisation einer Kompromissl√∂sung f√ºr beliebig gro√üe Datenmengen. </p><br><img src="https://habrastorage.org/webt/cv/c7/db/cvc7db2bi5ew6z0cmki6u2ow_yk.png"><br><a name="habracut"></a><br><p>  W√§hrend der Entwicklung des Systems zur Abstimmung von Berichten mussten wir die Daten eines der Berichtsformulare herunterladen, das zu jedem Berichtsdatum bis zu 24 Millionen Datens√§tze enth√§lt.  Es sollten Daten f√ºr 7 Jahre t√§glicher Berechnungen vorliegen.  B√§nde, ehrlich gesagt, nicht f√ºr einen universellen Designer, sondern f√ºr ein hochspezialisiertes System, aber wir haben uns bereits an diesem Vorhaben beteiligt und mussten nach einer L√∂sung suchen. </p><br><p>  Benutzer arbeiten mit diesem gro√üen Datensatz nur innerhalb eines Berichtsdatums. Daher wird dies im Referenzsystem in einer nach diesem Datum partitionierten Tabelle gespeichert.  Indizes f√ºr die verbleibenden 26 Datenfelder werden f√ºr dieses Formular nicht verwendet. </p><br><p>  Als erstes haben wir nat√ºrlich die gew√ºnschte Datenstruktur im Konstruktor erstellt und dort mehrere Daten geladen.  Das Herunterladen eines der kleinsten Daten dauert ungef√§hr 14 Stunden, was unannehmbar lang ist: 12,5 Millionen Datens√§tze mit 27 Attributen, eine halbe Milliarde Datens√§tze mit 5 Feldern mit der Konstruktion von drei Indizes, von denen zwei zusammengesetzt sind. </p><br><p>  Die Gesamtmenge dieser Daten auf der Festplatte betr√§gt etwas mehr als 18 GB. </p><br><blockquote><p>  Es ist erw√§hnenswert, zwei Merkmale dieses Formulars: </p><br><ol><li>  Es eignet sich fast nicht f√ºr eine Normalisierung, im Gegensatz beispielsweise zu Form 110, die in einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fr√ºheren Ver√∂ffentlichung</a> er√∂rtert wurde </li><li>  Es werden keine Indizes f√ºr die Attribute von Datens√§tzen verwendet - es ist f√ºr den Benutzer rentabler, eine Minute zu warten, als Geld f√ºr Indizes auszugeben </li></ol><br><p>  Dies kann als der radikalste Fall bezeichnet werden, den Sie zum Vergleich ausw√§hlen k√∂nnen.  In den meisten F√§llen ist der Unterschied im Volumen der QDM-Daten und der √ºblichen Datenbank nicht so dramatisch oder sogar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">recht gering</a> . </p><br></blockquote><br><p>  Zum Vergleich: Dieselben Daten, die in eine regul√§re Tabelle in einer relationalen Datenbank geladen werden, ben√∂tigen 2,3 GB (8-mal weniger) zusammen mit dem Index nach Datum, und ihr Download dauert weniger als eine halbe Stunde (28-mal schneller).  In beiden F√§llen wurden die Daten in Teilen von 100.000 Datens√§tzen direkt aus der Datei eingef√ºgt, ohne die Indizes zu deaktivieren. </p><br><p>  Da es f√ºr solche Datenmengen nicht praktikabel ist, einen Konstruktor zu verwenden, haben wir dennoch Leistungstests durchgef√ºhrt: In verschiedenen F√§llen haben wir die Massenverarbeitung von Datens√§tzen mit dem Konstruktor und unserer nicht indizierten Tabelle verglichen.  Wir mussten die Grenze der Datenmenge bestimmen, f√ºr die wir fortan eine regul√§re Tabelle verwenden werden, und nicht unseren Konstruktor. </p><br><p>  Wie wir erwartet haben, sieht die Arbeit mit kleinen Datenmengen, beispielsweise auf einem separaten Konto oder Client, im Designer im Gegensatz zu einer Tabelle ohne Indizes, in der Sie Minuten warten m√ºssen, um zu antworten, recht komfortabel aus (Antwortzeit innerhalb einer Sekunde).  Gleichzeitig kann die Hauptaufgabe der Anwendung - Massenabtastung und Aggregation von Daten in verschiedenen Abschnitten - im Designer um ein Vielfaches l√§nger dauern. </p><br><p>  Nachfolgend finden Sie die zusammenfassenden Ergebnisse der Stichproben, die wir f√ºr ein schrittweise zunehmendes Volumen aggregierter Daten erstellt haben: </p><br><div class="scrollable-table"><table><tbody><tr><th rowspan="2">  Anzahl der Datens√§tze </th><th colspan="2">  Abtastzeit, s </th></tr><tr><th>  Konstruktor </th><th>  Tabelle ohne Indizes </th></tr><tr><td align="right">  1 </td><td align="right">  <abbr title="0,33, 0,07, 0,08">0,16</abbr> </td><td align="right">  <abbr title="58, 57, 53">56</abbr> </td></tr><tr><td align="right">  5 </td><td align="right">  <abbr title="0,20, 0,24, 0,25">0,23</abbr> </td><td align="right">  <abbr title="54, 53, 58">55</abbr> </td></tr><tr><td align="right">  50 </td><td align="right">  <abbr title="2,43, 1,73, 1,42">1,86</abbr> </td><td align="right">  <abbr title="55, 52">53</abbr> </td></tr><tr><td align="right">  600 </td><td align="right">  <abbr title="1,97, 3,26, 1,82">2.35</abbr> </td><td align="right">  <abbr title="58, 54, 55">56</abbr> </td></tr><tr><td align="right">  5000 </td><td align="right">  <abbr title="14.7">14.7</abbr> </td><td align="right">  <abbr title="56">56</abbr> </td></tr><tr><td align="right">  12000 </td><td align="right">  <abbr title="153, 119, 102">125</abbr> </td><td align="right">  <abbr title="55, 55, 57">56</abbr> </td></tr><tr><td align="right">  100.000 </td><td align="right">  <abbr title="271, 245, 247">254</abbr> </td><td align="right">  <abbr title="54, 57, 59">57</abbr> </td></tr><tr><td align="right">  650.000 </td><td align="right">  <abbr title="2736, 2590">2663</abbr> </td><td align="right">  <abbr title="57">57</abbr> </td></tr><tr><td align="right">  1.000.000 </td><td align="right">  <abbr title="2313, 2313, 2316">2314</abbr> </td><td align="right">  <abbr title="59, 56, 56">57</abbr> </td></tr><tr><td align="right">  5.000.000 </td><td align="right">  <abbr title="9675">9675</abbr> </td><td align="right">  <abbr title="69, 68">69</abbr> </td></tr><tr><td align="right">  12.500.000 </td><td align="right">  <abbr title="765, 763, 763">764</abbr> </td><td align="right">  <abbr title="85, 90, 91">89</abbr> </td></tr></tbody></table></div><br><p>  Wo es m√∂glich war, haben wir mehrere Messungen durchgef√ºhrt, nachdem wir Statistiken ausgew√§hlt und die Anzahl der Datens√§tze anhand der Kontonummernmaske ausgew√§hlt hatten. </p><br><blockquote><p>  Die folgende Tabelle und Grafik zeigen, dass die Aggregation eines vollst√§ndigen Datensatzes innerhalb eines Tages erheblich weniger Zeit in Anspruch nimmt als die Stichprobe von mehr als 5% der Daten mithilfe des Index.  Aus diesem Grund ignorieren RDBMS-Abfrageoptimierer den Index in einer solchen Situation, w√§hrend der Engine unseres Dienstes <i>derzeit</i> eine solche M√∂glichkeit genommen wird. </p></blockquote><br><p>  Grafische Darstellung derselben Ergebnisse unter Verwendung einer logarithmischen Skala zum Vergleichen von Zahlen verschiedener Ordnungen: </p><br><img src="https://habrastorage.org/webt/ts/pf/ye/tspfyede8jvir1cegofu_v-clss.png"><br><br><p>  Die Geschwindigkeit des Designers bei der Verarbeitung eines vollst√§ndigen Datensatzes ist fast eine Gr√∂√üenordnung niedriger als die einer regul√§ren Tabelle, was f√ºr den Designer ganz normal ist. Es ist wichtig, eine Lawinen-√§hnliche Verschlechterung der Leistung zu vermeiden, und dieses Ziel wurde erreicht. </p><br><h4>  Die Studie zeigte, dass die Anzahl der Datens√§tze in der Datenbank praktisch keinen Einfluss auf die Geschwindigkeit beim Erstellen von Seiten, der Navigation und kleinen Stichproben in einem Quintettdatenmodell hat.  Mit der Menge der verarbeiteten Daten von bis zu 10.000 Datens√§tzen (und dies ist die maximale Auswahl verwandter Daten f√ºr eine Instanz einer Gesch√§ftseinheit im Informationssystem) k√∂nnen Sie bequem mit einer Datenbank von Hunderten von Gigabyte oder mehr arbeiten. </h4><br><p>  Als n√§chstes haben wir unserem Tabellen-Plugin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> beschrieben) beigebracht, einen Connector f√ºr eine beliebige Datenbank aufzurufen, damit er sowohl mit dem Quintett-Datenmodell als auch mit herk√∂mmlichen Tabellen transparent funktioniert. </p><br><p>  Aus Sicht des Benutzers ist es ihm egal, mit welcher Datenquelle er arbeitet, w√§hrend er die wichtige Arbeit f√ºr ihn in der vertrauten Oberfl√§che erledigen und seine Berichte erhalten kann: </p><br><img src="https://habrastorage.org/webt/eh/v5/x1/ehv5x1yy8nx98oedlouxda0i-kk.png"><br><br><br><p>  Jetzt werden wir die verbleibenden √§hnlich gro√üen Tabellen, die in unserer Datenbank nur zwei Dutzend von Hunderten sind, in einem separaten Speicher herausnehmen, um bequem mit ihnen arbeiten zu k√∂nnen. </p><br><h4>  Daher k√∂nnen wir den Konstruktor f√ºr kleine und mittlere Tabellen verwenden, die eine intensive Suche und Aggregation nach beliebigen Attributen erfordern, und gro√üe nicht indizierte Objekte in flachen traditionellen Tabellen speichern und sie aus Speicher von Drittanbietern oder spezialisierten Datenbanken (Hadoop und andere NoSQL) aufrufen. </h4><br><p>  Der Designer eignet sich am besten f√ºr CRM-Systeme und √§hnliche Produkte, bei denen der Benutzer mit einem einzelnen Client, Konto oder einer anderen Entit√§t arbeitet und die Analysefunktionen in einen separaten Spezialspeicher verschoben werden. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de465161/">https://habr.com/ru/post/de465161/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465145/index.html">Gesichtserkennung auf Knieebene</a></li>
<li><a href="../de465149/index.html">'Hallo Welt' f√ºr dich in der Cloud</a></li>
<li><a href="../de465151/index.html">Installieren Sie Apache Cassandra unter Windows</a></li>
<li><a href="../de465153/index.html">Computer Vision sieht Emotionen, Puls, Atmung und L√ºgen - aber wie kann man darauf ein Startup aufbauen? Gespr√§ch mit Neurodata Lab</a></li>
<li><a href="../de465155/index.html">Zwei Einheiten der neurolinguistischen Programmierung</a></li>
<li><a href="../de465163/index.html">3D-Druck: erstaunliche F√§lle und etwas interessanter</a></li>
<li><a href="../de465167/index.html">Ressourcenplanung. Warum funktioniert es nicht? Teil 1</a></li>
<li><a href="../de465169/index.html">DIY von PVS-Studio: Gamification of Achievements</a></li>
<li><a href="../de465173/index.html">So √§ndern Sie die Kosten des erstellten Abonnements in Ihrer Anwendung. App Store Connect und Google Play Console</a></li>
<li><a href="../de465177/index.html">Not New Relic's One: Ein Blick auf Datadog und Atatus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>