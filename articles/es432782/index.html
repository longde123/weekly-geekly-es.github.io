<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Instalaci贸n multiservidor de Zimbra Collaboration Suite う  </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existe una regla no escrita, seg煤n la cual no se recomienda crear m谩s de 5-6 mil buzones en un servidor con Zimbra Collaboration Suite. Exceder este r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Instalaci贸n multiservidor de Zimbra Collaboration Suite</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/432782/">  Existe una regla no escrita, seg煤n la cual no se recomienda crear m谩s de 5-6 mil buzones en un servidor con Zimbra Collaboration Suite.  Exceder este rango est谩 plagado de un deterioro significativo en la calidad del servidor y reduce su disponibilidad para los usuarios.  Pero, 驴qu茅 sucede si tiene una gran empresa o un proveedor de SaaS a cargo de acceder a Zimbra Collaboration Suite como un servicio y necesita enviar un correo electr贸nico a 10, 20, 30 o m谩s miles de personas?  Especialmente para tales casos, en Zimbra hay soporte para una instalaci贸n multiservidor, en la que los buzones est谩n en diferentes servidores y le permiten mantener una alta disponibilidad de correo electr贸nico incluso bajo cargas pesadas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="imagen"><br><a name="habracut"></a><br>  Por supuesto, la instalaci贸n multiservidor de Zimbra Collaboration Suite es significativamente diferente de la instalaci贸n habitual en un solo servidor, cuyo proceso se describe en detalle en un art铆culo anterior.  En primer lugar, se recomienda determinar la arquitectura de la infraestructura del servidor en la que se instalar谩 Zimbra Collaboration Suite.  Tal configuraci贸n de la infraestructura del servidor ser谩 la m谩s 贸ptima en operaci贸n.  Tenga en cuenta que el n煤mero de servidores para almacenar buzones puede ser cualquiera y el n煤mero de ellos, como ya se se帽al贸, se calcula en base a 5-6 mil buzones activos por servidor, si el acceso a ellos se realizar谩 exclusivamente a trav茅s de un cliente web, y 3-4 mil buzones al servidor, si los usuarios trabajar谩n con clientes de escritorio y sincronizar谩n el correo con dispositivos m贸viles. <br><br><img src="https://habrastorage.org/webt/tu/sf/yx/tusfyxl007udcolq_tlpcz7kvhw.jpeg"><br>  <i>Un ejemplo de construcci贸n de una infraestructura de servidores m煤ltiples para Zimbra Collaboration Suite</i> <br><br><h3>  Zimbra LDAP </h3><br>  Antes de comenzar una instalaci贸n directa, aseg煤rese de que todos los servidores tengan la misma hora del sistema.  En primer lugar, para una instalaci贸n multiservidor de Zimbra, necesitamos instalar y configurar un servidor con Zimbra LDAP.  Si lo desea, se puede instalar Zimbra LDAP en varios servidores, uno de los cuales actuar谩 como el servidor LDAP principal, y el resto ser谩n servidores LDAP auxiliares que forman parte de la carga y, por lo tanto, aumentan la velocidad del servidor principal.  La disponibilidad de servidores LDAP secundarios tambi茅n mejora la seguridad y la resistencia de la infraestructura con Zimbra. <br><br>  Durante la instalaci贸n de Zimbra en el servidor LDAP principal, el instalador le pedir谩 que seleccione los componentes para instalar.  En este caso, solo necesitamos <b>zimbra-ldap</b> : <br><br><pre><code class="plaintext hljs">Select the packages to install Install zimbra-ldap [Y] Y Install zimbra-logger [Y] N Install zimbra-mta [Y] N Install zimbra-dnscache [Y] N Install zimbra-snmp [Y] N Install zimbra-store [Y] N Install zimbra-apache [Y] N Install zimbra-spell [Y] N Install zimbra-convertd [Y] N Install zimbra-memcached [Y] N Install zimbra-proxy [Y] N Install zimbra-archiving [N] N Install zimbra-chat [Y] N Install zimbra-drive [Y] N Install zimbra-imapd [Y] N Checking required space for zimbra-core Installing: zimbra-core zimbra-ldap The system will be modified. Continue? [N]</code> </pre> <br>  Presione Y y despu茅s de completar la modificaci贸n del sistema, se abre un men煤 de texto en el que estamos interesados en el elemento <b>Configuraci贸n com煤n</b> .  Al hacerlo, vemos una lista de configuraciones b谩sicas: <br><br><pre> <code class="plaintext hljs">Common Configuration: 1) Hostname: ldap-1.zimbra.com 2) Ldap master host: zimbra.com 3) Ldap port: 389 4) Ldap Admin password: set 5) Secure interprocess communications: Yes 6) TimeZone: (GMT-08.00) Pacific Time (US &amp; Canada) 7) IP Mode: ipv4 8) Default SSL digest: sha256</code> </pre> <br>  Al seleccionar el elemento 4, puede ver la contrase帽a para acceder a Zimbra LDAP generado aleatoriamente durante la instalaci贸n y si desea cambiarlo.  Tambi茅n debe cambiar la zona horaria a la que se encuentra actualmente.  Le recomendamos que recuerde o escriba la contrase帽a del administrador LDAP en alg煤n lugar, as铆 como el puerto de acceso y el nombre de dominio del servidor LDAP.  Necesitar谩 esta informaci贸n cuando configure servidores con buzones y MTA. <br><br>  Despu茅s de eso, volvemos al men煤 principal y seleccionamos el segundo elemento llamado <b>zimbra-ldap</b> .  Aqu铆 nos interesan las contrase帽as generadas aleatoriamente para acceder a la ra铆z LDAP, la replicaci贸n LDAP, LDAP Postfix, LDAP Amavis y LDAP Nginx, que pueden cambiarse para inventarse de forma independiente.  Recomendamos que recuerde o anote las contrase帽as de la replicaci贸n LDAP, LDAP Postfix, LDAP Amavis y LDAP Nginx, ya que son 煤tiles para una mayor configuraci贸n de servidores desde MTA y servidores LDAP auxiliares.  Despu茅s de eso, solo queda aplicar los cambios y aceptar escribir todas las configuraciones en un archivo.  La configuraci贸n del servidor LDAP ha finalizado. <br><br><h3>  R茅plica LDAP </h3><br>  En caso de que desee configurar servidores LDAP auxiliares, debe activar su soporte en el servidor LDAP principal utilizando el comando <b>/ opt / zimbra / libexec / zmldapenablereplica</b> .  M谩s tarde, al configurar servidores LDAP auxiliares, el servidor primario debe estar encendido. <br><br>  La instalaci贸n y configuraci贸n del servidor LDAP secundario repite la instalaci贸n y configuraci贸n del servidor primario.  Las principales diferencias est谩n en el proceso de configuraci贸n despu茅s de la instalaci贸n.  Entonces, necesitar谩s: <br><br><ol><li>  Especifique la direcci贸n del servidor LDAP principal como el nombre de host maestro LDAP, </li><li>  En el campo para ingresar el puerto, especifique el n煤mero de puerto que est谩 abierto en el servidor LDAP principal. </li><li>  Reemplace la contrase帽a de administrador LDAP generada aleatoriamente con la que est谩 instalada en el servidor LDAP principal </li><li>  En el submen煤 de configuraci贸n de LDAP, configure el par谩metro No en el campo Crear dominio </li><li>  Ingrese la contrase帽a de replicaci贸n LDAP que se configur贸 al configurar el servidor primario. </li></ol><br>  Despu茅s de eso, aplique todos los cambios y guarde la configuraci贸n en un archivo. <br><br><h3>  Zimbra mta </h3><br>  Adem谩s del almacenamiento LDAP y de correo, el Agente de transferencia de correo a menudo se lleva a un servidor separado.  Al instalar Zimbra en 茅l, debe seleccionar solo los <b>paquetes zimbra-mta</b> y <b>zimbra-dnscache</b> .  Despu茅s de eso, nuevamente aceptamos cambiar el sistema y pasar a configurar el servidor. <br><br><pre> <code class="plaintext hljs">Select the packages to install Install zimbra-ldap [Y] n Install zimbra-logger [Y] n Install zimbra-mta [Y] y Install zimbra-dnscache [Y] y Install zimbra-snmp [Y] n Install zimbra-store [Y] n Install zimbra-apache [Y] n Install zimbra-spell [Y] n Install zimbra-memcached [Y] n Install zimbra-proxy [Y] n Checking required space for zimbra-core Installing: zimbra-core zimbra-mta zimbra-dnscache The system will be modified. Continue? [N] y Installing packages</code> </pre> <br>  En primer lugar, debemos especificar la direcci贸n del servidor LDAP en <b>Configuraci贸n com煤n,</b> ingresar la contrase帽a de acceso LDAP y establecer la zona horaria correcta.  Despu茅s de eso, vaya a la configuraci贸n de MTA, donde debe ingresar la direcci贸n del servidor de autenticaci贸n, que generalmente coincide con la direcci贸n del almac茅n de correo.  Despu茅s de eso, solo queda ingresar las contrase帽as para postfix y amavis, que creamos al configurar el servidor LDAP principal.  Despu茅s de eso, puede aplicar los cambios y guardar la configuraci贸n en un archivo separado. <br><br><h3>  Proxy de Zimbra </h3><br>  Necesitar谩 este nodo para el equilibrio de carga entre diferentes almacenamientos de correo y MTA.  Es all铆 donde el usuario se autenticar谩 para que Zimbra pueda enviarlo m谩s tarde al almacenamiento de correo donde est谩 almacenado el buz贸n del usuario. <b>Al</b> instalar el Proxy Zimbra, debe seleccionar solo los <b>paquetes zimbra-memcached</b> y <b>zimbra-proxy</b> .  Despu茅s de eso, nuevamente aceptamos cambiar el sistema y pasar a configurar el servidor. <br><br><pre> <code class="plaintext hljs">Select the packages to install Install zimbra-ldap [Y] N Install zimbra-logger [Y] N Install zimbra-mta [Y] N Install zimbra-dnscache [N] N Install zimbra-snmp [Y] N Install zimbra-store [Y] N Install zimbra-apache [Y] N Install zimbra-spell [Y] N Install zimbra-convertd [N] N Install zimbra-memcached [N] Y Install zimbra-proxy [N] Y Install zimbra-archiving [N] N Installing: zimbra-memcached zimbra-proxy Configuration section The system will be modified. Continue [N] Y</code> </pre> <br>  En primer lugar, debemos especificar la direcci贸n del servidor LDAP en <b>Configuraci贸n com煤n,</b> ingresar la contrase帽a de acceso LDAP y establecer la zona horaria correcta.  Despu茅s de eso, vaya a la configuraci贸n de MTA, donde debe ingresar la direcci贸n del servidor de autenticaci贸n, que generalmente coincide con la direcci贸n del almac茅n de correo.  Despu茅s de eso, solo queda ingresar las contrase帽as para postfix y amavis, que creamos al configurar el servidor LDAP principal.  Despu茅s de eso, puede aplicar los cambios y guardar la configuraci贸n en un archivo separado. <br><br><h3>  Buz贸n Zimbra </h3><br>  El proceso de instalaci贸n de Zimbra en el servidor donde se encuentran los buzones, repite el proceso de instalaci贸n en el servidor LDAP.  La principal diferencia es el conjunto de indicadores al elegir qu茅 componentes instalar.  Necesitamos el siguiente conjunto: <br><br><pre> <code class="plaintext hljs">Install zimbra-ldap [Y] N Install zimbra-logger [Y] Y Install zimbra-mta [Y] N Install zimbra-dnscache [Y] N Install zimbra-snmp [Y] Y Install zimbra-store [Y] Y Install zimbra-apache [Y] Y Install zimbra-spell [Y] Y Install zimbra-convertd [Y] Y Install zimbra-memcached [Y] N Install zimbra-proxy [Y] N Install zimbra-archiving [N] Y Install zimbra-chat [Y] Y Install zimbra-drive [Y] Y Install zimbra-imapd [Y] N Installing: zimbra-core zimbra-logger zimbra-snmp zimbra-store zimbra-apache zimbra-spell zimbra-convertd zimbra-archiving zimbra-chat zimbra-drive The system will be modified. Continue? [N]</code> </pre> <br>  Despu茅s de expresar su consentimiento para la instalaci贸n, permitimos la modificaci贸n del sistema, esperamos que se complete el proceso de instalaci贸n y comenzamos el proceso de configuraci贸n del servidor.  En primer lugar, debemos ir al elemento <b>Configuraci贸n com煤n</b> y especificar la direcci贸n del servidor LDAP y la contrase帽a de acceso LDAP, adem谩s, se recomienda verificar si la zona horaria correcta est谩 configurada en el servidor.  Adem谩s, si olvid贸 su contrase帽a de acceso LDAP, puede obtenerla ingresando el comando <b>zmlocalconfig -s zimbra_ldap_password</b> en el servidor LDAP. <br><br>  Despu茅s de eso, puede continuar con la <b>configuraci贸n de la tienda de</b> elementos.  Aqu铆 necesitamos establecer la contrase帽a para el administrador del servidor, as铆 como establecer el nombre de dominio del repositorio con el n煤mero correspondiente, para que no haya m谩s confusi贸n.  Adem谩s, debe seleccionar el tipo de conexi贸n.  Por ejemplo, siempre puede usar HTTP o HTTPS, habilitar el uso forzado de HTTPS o usar HTTPS solo para la autenticaci贸n.  Adem谩s, durante la configuraci贸n del buz贸n Zimbra, deber谩 indicar la direcci贸n del servidor MTA correspondiente en la l铆nea de <b>host SMTP</b> .  Despu茅s de eso, puede realizar una serie de configuraciones a su discreci贸n.  Una vez completada la configuraci贸n, debe aplicar los cambios y guardar todas las configuraciones en un archivo. <br><br>  Es una buena idea establecer contrase帽as para el acceso SSH despu茅s de que se complete la instalaci贸n para que pueda administrar de forma remota los servidores y las colas de Postfix.  Adem谩s, si utiliza servidores LDAP auxiliares, una vez completada la configuraci贸n, deber谩 cambiar el valor <b>ldap_url</b> en los servidores MTA y Mailbox para que funcionen correctamente con ellos.  Para hacer esto, debe detener Zimbra utilizando el <b>comando de parada zmcontrol</b> y luego ingresar un comando de la forma z <b>mlocalconfig -e ldap_url = "ldap: //ldap-2.zimbra.com ldap: //ldap-1.zimbra.com"</b> , donde Primero, especifique las direcciones de todos los servidores auxiliares y al final del servidor LDAP principal.  En el servidor MTA, una vez completada la configuraci贸n, deber谩 reiniciar Zimbra y ejecutar <b>/ opt / zimbra / libexe / zmmtainit</b> para sobrescribir la configuraci贸n de Postfix. <br><br>  Para todas las preguntas relacionadas con la Suite Zextras, puede contactar al representante de la compa帽铆a "Zextras" Katerina Triandafilidi por correo electr贸nico katerina@zextras.com </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es432782/">https://habr.com/ru/post/es432782/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es432772/index.html">C贸mo creamos un servicio de campa帽a publicitaria que cumpla con el RGPD</a></li>
<li><a href="../es432774/index.html">Frontend DevDay. Grabaci贸n de informes</a></li>
<li><a href="../es432776/index.html">El libro "Reaccionar en acci贸n"</a></li>
<li><a href="../es432778/index.html">Desarrollo de un convertidor de dinero en STM32F334: principio de operaci贸n, c谩lculos, creaci贸n de prototipos</a></li>
<li><a href="../es432780/index.html">驴Por qu茅 se necesita empat铆a en el mundo tecnol贸gico?</a></li>
<li><a href="../es432784/index.html">Castlevania Bot</a></li>
<li><a href="../es432786/index.html">.NET: localizaci贸n sin dolor. (N) gettext + poedit</a></li>
<li><a href="../es432788/index.html">Prototipos: c贸mo crear un producto exitoso y ahorrar</a></li>
<li><a href="../es432790/index.html">Superconductor + ferromagnet: el estudio de los pares de tripletas Cooper</a></li>
<li><a href="../es432794/index.html">Bret Victor: algunas palabras sobre Douglas Engelbart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>