<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™ üéÖüèø üîú SwayWM - UnixPorn Yourself üë®‚Äçüë©‚Äçüë¶‚Äçüë¶ ü§≥üèª üåÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits. In diesem Artikel beschreibe ich meine Erfahrungen beim Einrichten und Verwenden von sway, einem Kachelfenster-Manager f√ºr Linux. 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SwayWM - UnixPorn Yourself</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484378/"><p>  Hallo allerseits.  In diesem Artikel beschreibe ich meine Erfahrungen beim Einrichten und Verwenden von sway, einem Kachelfenster-Manager f√ºr Linux. <a name="habracut"></a></p><br><h1 id="chto-eto-takoe-i-zachem-ono-nuzhno">  Was ist das und warum wird es ben√∂tigt? </h1><br><p>  Offiziell ist sway ein Kachelfenster-Manager, ein transparenter i3wm-Ersatz, der auf Wayland l√§uft. </p><br><blockquote>  Weiland, auch bekannt als W√∂lund, etc.  - Eine Figur aus der altdeutschen und altnordischen Mythologie, √ºber die einst die englische Folkloristin Jessie Weston schrieb.  Jetzt wei√üt du es. </blockquote><p>  Meiner Meinung nach besteht das Hauptmerkmal von sway jedoch darin, dass es sich um einen Konstrukteur handelt, der alle Vor- und Nachteile dieses Ansatzes aufweist.  Wenn Sie Vim (die √Ñhnlichkeit mit Vim wird durch die Orientierung an der Verwendung der Tastatur noch verst√§rkt), Archlinux und √§hnliche Projekte m√∂gen, dann rate ich Ihnen, sich Sway genauer anzuschauen.  Meine pers√∂nliche Meinung ist, dass Sie, sobald Sie ein wenig mehr Zeit f√ºr die Einrichtung aufgewendet haben, eine sehr stabile und komfortable Umgebung f√ºr Sie pers√∂nlich erhalten, in der nichts Unerwartetes passieren wird. </p><br><p>  Wenn die Nachteile von Sway und Wayland (wie die mangelnde Unterst√ºtzung der privaten Treiber von NVidia und die Notwendigkeit, nach Analoga f√ºr viele vertraute Programme zu suchen) f√ºr Sie fatal erscheinen, empfehle ich Ihnen, auf den x3 i3wm zu achten.  Die Konstruktorteile dort werden v√∂llig unterschiedlich sein, Sie m√ºssen xinit installieren, verschiedene .Xauthority konfigurieren, es ist m√∂glich, mit dem Zerrei√üen umzugehen, aber die allgemeine Logik des Systems ist genau gleich. </p><br><h1 id="ustanovka">  Installation </h1><br><p> Sway befindet sich wahrscheinlich in den Repositorys Ihrer Distribution.  Wenn Sie jedoch eine neuere Version installieren m√∂chten, ist dies sehr einfach.  Die <a href="https://github.com/swaywm/sway">Github-</a> Projektseite hat eine knappe Liste ihrer Abh√§ngigkeiten.  Installieren Sie sie, klonen Sie das Repository, klonen Sie <code>wlroots</code> in den Ordner <code>wlroots</code> : </p><br><pre> <code class="plaintext hljs">hub clone swaywm/sway hub clone swaywm/wlroots sway/subprojects/wlroots</code> </pre><br><p>  (Hier verwende ich einen <a href="https://github.com/github/hub">Hub</a> . Ein nicht standardm√§√üiges, aber sehr praktisches Werkzeug).  Danach k√∂nnen Sie Folgendes konfigurieren und erstellen: </p><br><pre> <code class="plaintext hljs">meson setup ./sway-build ./sway --buildtype=minsize ninja -C ./sway-build doas ninja -C ./sway-build install</code> </pre> <br><blockquote>  doas ist ein leichter Sudo-Ersatz von OpenBSD-Entwicklern.  Linux benutzt normalerweise seine Gabel von <a href="https://github.com/Duncaen/OpenDoas">OpenDoas.</a> </blockquote><br><h1 id="zapusk">  Starten Sie </h1><br><p>  Wenn Sie √ºber die Befehlszeile schwanken m√∂chten, ohne Manager wie SDDM zu verwenden, ist dies der einzig richtige Weg </p><br><pre> <code class="plaintext hljs">$ exec sway</code> </pre> <br><p>  Wenn Sie Sway ohne <code>exec</code> ausf√ºhren, den Bildschirm mit Swaylock sperren und Sway abst√ºrzt, werden Sie zur√ºck in die Befehlszeile geworfen.  Das Schloss wird unbrauchbar sein. </p><br><blockquote>  Hinweis f√ºr System-Fans: F√ºr sway ist weder systemd-logind noch elogind erforderlich.  Richtig, in diesem Fall m√ºssen Sie das suid-Bit setzen oder Funktionen konfigurieren.  Siehe das <a href="https://github.com/swaywm/sway/wiki/Running-Sway-without-systemd">Wiki</a> . </blockquote><br><h2 id="peremennye-okruzheniya">  Umgebungsvariablen </h2><br><p>  Es gibt mehrere Stellen, an denen ich sie verschreibe. </p><br><p>  Shell-Skript unter <code>~/.local/bin/sway</code> - f√ºr schwankungsspezifische Variablen.  Ich m√∂chte zum Beispiel, dass Qt-Anwendungen die Szenerie nicht <code>qt5ct</code> und das Thema aus <code>qt5ct</code> : </p><br><pre> <code class="plaintext hljs">#!/bin/bash QT_QPA_PLATFORMTHEME=qt5ct \ QT_WAYLAND_DISABLE_WINDOWDECORATION=1 \ /usr/bin/sway</code> </pre> <br><p>  <code>~/.pam_environment</code> - f√ºr Variablen, die ich sofort in der systemd-Benutzersitzung verf√ºgbar machen m√∂chte.  Ein Beispiel: </p><br><pre> <code class="plaintext hljs">SSH_AUTH_SOCK DEFAULT="${XDG_RUNTIME_DIR}/gnupg/S.gpg-agent.ssh"</code> </pre> <br><p>  √Ñndern Sie diese Datei jedoch mit Vorsicht, insbesondere wenn Sie andere Umgebungen verwenden.  Beispielsweise wird es KDE Plasma nicht sehr gefallen, wenn es dort <code>$WAYLAND_DISPLAY</code> erkennt (ironischerweise wurde das Modul <code>pam_env</code> , das diese Datei verwaltet, vor N Jahren haupts√§chlich zum Setzen der Variablen <code>$DISPLAY</code> ). </p><br><p>  <code>~/.bashrc</code> - f√ºr alle anderen F√§lle. </p><br><h1 id="nastroyka-sway">  Sway-Setup </h1><br><h2 id="vvod">  Eintreten </h2><br><p>  In meinem System ist alles ganz einfach: Wir installieren russische und englische Layouts und schalten mit <code>Alt+Shift</code> zwischen ihnen um.  In der Sway-Konfiguration sieht das so aus: </p><br><pre> <code class="plaintext hljs">input * { xkb_layout us,ru xkb_options grp:alt_shift_toggle }</code> </pre> <br><p>  Sway verwendet die <code>libinput</code> Bibliothek f√ºr die Eingabe, genau wie KDE und Gnome.  Wir haben also viele seiner Optionen zur Verf√ºgung.  Touchpad-Einstellungen, nat√ºrliches Scrollen, Mauszeiger-Beschleunigung usw.  usw.  Die Liste der Optionen kann bei der <code>man sway-input</code> und die Liste der Eingabeger√§te bei der Ausgabe des Befehls √ºberpr√ºft werden </p><br><pre> <code class="plaintext hljs">swaymsg -t get_inputs</code> </pre> <br><p>  Ich m√∂chte jedoch auf eine interessante Gelegenheit aufmerksam machen.  Wenn Sie aus einer X-Umgebung wechseln, k√∂nnen Sie Ihre Tastatureinstellungen einfach von dort √ºbertragen.  F√ºhren Sie den Befehl in dieser Umgebung aus </p><br><pre> <code class="plaintext hljs">$ xkbcomp $DISPLAY /path/to/keymap.xkb</code> </pre> <br><p>  und im sway config register </p><br><pre> <code class="plaintext hljs">input * { xkb_file /path/to/keymap.xkb }</code> </pre> <br><h2 id="hotkei">  Hotkeys </h2><br><p>  Hotkeys werden wie alles andere in der Konfiguration gesetzt.  Es gibt 3 Befehle, um sie zu definieren: </p><br><ol><li>  <code>bindswitch</code> .  Dies erfolgt beim √ñffnen / Schlie√üen des Deckels des Laptops, beim Umschalten in den Tablet-Modus usw. </li><li>  <code>bindcode</code> .  Es wird ausgef√ºhrt, wenn eine Taste mit dem angegebenen Code gedr√ºckt wird.  Dies h√§ngt nicht vom aktuellen Layout ab, insbesondere bei Multimedia-Tasten. </li><li>  <code>bindsym</code> .  Das aktuell eingegebene Zeichen ist vom Layout abh√§ngig.  Wenn Sie jedoch den Parameter <code>--to-code</code> hinzuf√ºgen, wird dieses Zeichen implizit in den entsprechenden Code f√ºr das erste Layout von <code>xkb_layout</code> (siehe Eingabeeinstellungen). </li></ol><br><p>  Ein solcher Hotkey schl√§gt beispielsweise das aktuelle Fenster unabh√§ngig vom Layout: </p><br><pre> <code class="plaintext hljs">bindsym --to-code $mod+Shift+q kill</code> </pre> <br><p>  Sie k√∂nnen mehr √ºber diese Parameter im Mana lesen: <code>man 5 sway</code> . </p><br><p>  Der Autor von sway hat einen speziellen <a href="https://git.sr.ht/~sircmpwn/wshowkeys">Keylogger geschrieben, um</a> festzustellen, was gedr√ºckt wurde (er ben√∂tigt Root-Rechte, um arbeiten zu k√∂nnen, also keine Sicherheitsbedenken). </p><br><h2 id="vyvod">  Fazit </h2><br><p>  Eine Liste der verf√ºgbaren Ausgabeger√§te erhalten Sie mit dem Befehl </p><br><pre> <code class="plaintext hljs">swaymsg -t get_outputs</code> </pre> <br><p>  In der Konfiguration f√ºr jeden von ihnen k√∂nnen Sie den Videomodus, die Skalierung (einschlie√ülich Bruch), das Bild, die Drehung usw. einstellen.  Die einfachste Konfiguration sieht so aus: </p><br><pre> <code class="plaintext hljs">output HDMI-A-1 mode 1920x1080@60Hz output * bg /path/to/wallpaper.jpg fill</code> </pre> <br><p>  Eine vollst√§ndige Liste der Optionen finden Sie im <code>man sway-output</code> Mana. <br>  Es gibt auch ein <a href="https://github.com/emersion/wlr-randr">wlr-randr-</a> Programm, in dem all dies √ºber die Befehlszeile eingestellt werden kann (das hei√üt, es ist ein Analogon von XRandr f√ºr Wayland). </p><br><h2 id="swaybar">  Swaybar </h2><br><p>  Swaybar - Ein Bereich, in dem Statusinformationen angezeigt werden.  Datum, Uhrzeit, Taskleiste usw.  usw.  Normalerweise verbringen i3- und Sway-Fans die meiste Zeit mit der Einrichtung dieses Panels (oder mehrerer Panels).  Pers√∂nlich habe ich genug davon, in der N√§he der minimalen Konfiguration: </p><br><pre> <code class="plaintext hljs">bar { position top colors { statusline #ffffff background #282828E6 inactive_workspace #282936BF #282936BF #5c5c5c } font Hack 11 status_command i3blocks }</code> </pre> <br><p>  Es gibt viele Optionen zum Anpassen von Position, Farben, Schriftarten, Ablage usw.  Sie k√∂nnen dar√ºber in Mana - <code>man 5 sway-bar</code> . </p><br><p>  Swaybar ist verpflichtet, json im i3bar-Format zu lesen und zu analysieren, das von <code>status_command</code> ausgegeben wird.  Es gibt viele Programme, die hier verwendet werden k√∂nnen.  <a href="https://i3wm.org/i3status/">i3status</a> , <a href="https://github.com/Alexays/Waybar">waybar</a> , <a href="https://github.com/greshake/i3status-rust">i3status-rs</a> und viele andere Projekte.  Pers√∂nlich bevorzuge ich <a href="https://github.com/vivien/i3blocks">i3blocks</a> wegen der Einfachheit der Konfiguration und der Leichtigkeit, benutzerdefinierte Bl√∂cke hinzuzuf√ºgen. </p><br><h1 id="nastroyka-prikladnyh-programm">  Anwendungssetup </h1><br><h2 id="uvedomleniya">  Benachrichtigungen </h2><br><p>  Dies kann <a href="https://github.com/emersion/mako">vom Mako-</a> Daemon <a href="https://github.com/emersion/mako">erledigt werden</a> (h√∂chstwahrscheinlich in Ihrer Distribution).  Dort k√∂nnen Sie auch Farben usw. einstellen, dies ist jedoch alles optional.  F√ºhren Sie es einfach aus und es wird funktionieren. </p><br><p>  Mako implementiert die dbus-basierte XDG Desktop Notifications-Spezifikation.  Es wird von vielen Programmen unterst√ºtzt, darunter Chromium, Firefox und Telegram. </p><br><h2 id="emulyator-terminala">  Terminal-Emulator </h2><br><p>  In Umgebungen wie KDE verwendet Plasma normalerweise integrierte Emulatoren, die Men√ºs, Registerkarten und viele andere Gestaltungselemente anzeigen.  Aber warum schwankt das alles?  Ich bevorzuge <a href="https://github.com/alacritty/alacritty">Alacritty</a> - sehr schnell dank der Verwendung des GPU-Emulators, √ºbrigens in Rust geschrieben.  Ich habe dem Abschnitt key_bindings in seiner Konfiguration ( <code>~/.config/alacritty/alacritty.yml</code> ) solche Hotkeys hinzugef√ºgt: </p><br><pre> <code class="plaintext hljs">- { key: T, mods: Control|Shift, action: SpawnNewInstance }</code> </pre> <br><p>  √∂ffne ein neues Fenster mit dem aktuellen Verzeichnis.  Ein gro√üartiger Ersatz f√ºr Tabs und Sway k√ºmmert sich um das Layout. </p><br><pre> <code class="plaintext hljs">- { key: Up, mods: Control|Shift, action: ScrollLineUp, mode: ~Alt } - { key: Down, mods: Control|Shift, action: ScrollLineDown, mode: ~Alt }</code> </pre> <br><p>  Eine Zeile nach oben / unten scrollen. </p><br><p>  Wir schreiben in der Sway-Konfiguration </p><br><pre> <code class="plaintext hljs">set $term alacritty bindsym $mod+Return exec $term</code> </pre> <br><p>  Alacritty unterst√ºtzt keine Ligaturen, da diese die Rendergeschwindigkeit beeinflussen.  Wenn Sie sie noch brauchen, achten Sie auf <a href="https://sw.kovidgoyal.net/kitty/">Kitty</a> - dieser Emulator ist auch sehr schnell und es gibt nur eine erschreckende Menge an Funktionen und Einstellungen unter der Haube. </p><br><h2 id="zapusk-prilozheniy">  Anwendungen starten </h2><br><p>  Anwendungen in Sway werden normalerweise √ºber das Hotkey-Men√º gestartet.  In der Konfig schreiben sie sowas </p><br><pre> <code class="plaintext hljs">set $menu ... bindsym --to-code $mod+d exec $menu</code> </pre> <br><p>  Es gibt viele Programme, um das Men√º anzuzeigen.  Einige, wie <a href="https://tools.suckless.org/dmenu/">Dmenu</a> oder <a href="https://github.com/davatorium/rofi">Rofi</a> , ben√∂tigen XWayland.  Unter denen, die unter Wayland arbeiten, k√∂nnen wir <a href="https://github.com/Cloudef/bemenu">bemenu</a> und sogar krunner unterscheiden (was in KDE mit <code>Alt+F2</code> . Ja, dies ist ein unabh√§ngiges Programm). </p><br><p>  Ich bevorzuge jedoch eine universellere L√∂sung, n√§mlich den <a href="https://github.com/Biont/sway-launcher-desktop">Sway-Launcher-Desktop</a> .  Trotz des Namens kommt es nicht auf Sway an und im Allgemeinen handelt es sich nicht um ein GUI-Programm, sondern um ein kleines Shell-Skript, das in der Konsole funktioniert.  Dieses Skript bildet ein Men√º aus Programmen in <code>$PATH</code> , installierten Desktop-Dateien (gem√§√ü der XDG Desktop Entry-Spezifikation) und m√∂glicherweise zus√§tzlichen Quellen (in der Konfiguration konfiguriert).  Mit dem wunderbaren Dienstprogramm <code>fzf</code> das Men√º anzeigen und durchsuchen - achten Sie darauf. </p><br><p>  Um das Men√º anzuzeigen, m√ºssen wir mit diesem Programm ein Terminalfenster √∂ffnen.  Mit alacritty geht das so: </p><br><pre> <code class="plaintext hljs">set $menu exec alacritty -e sway-launcher-desktop bindsym --to-code $mod+d exec $menu</code> </pre> <br><p>  M√∂glicherweise m√∂chten Sie dieses Fenster standardm√§√üig schweben lassen.  In i3 und sway werden solche Regeln in der config mit der <code>for_window</code> Direktive konfiguriert.  Um die Regel dem <code>sway-launcher-desktop</code> Fenster zuzuordnen, muss ihr eine eindeutige Klasse zugewiesen werden. F√ºr mich ist es nur <code>Launcher</code> .  Beachten Sie, dass aufgrund der Verwendung von Wayland die im <a href="https://i3wm.org/docs/userguide.html">i3-Handbuch</a> aufgef√ºhrten Kriterien nicht f√ºr die Schwingung geeignet sind.  Die richtigen sind im Abschnitt <code>CRITERIA</code> .  In diesem Fall ist <code>app_id</code> gut geeignet und die endg√ºltige Konfiguration sieht folgenderma√üen aus: </p><br><pre> <code class="plaintext hljs">set $menu exec alacritty --class Launcher -e sway-launcher-desktop for_window [app_id="Launcher"] floating enable, border pixel 10, sticky enable bindsym --to-code $mod+d exec $menu</code> </pre> <br><h2 id="avtozapusk-prilozheniy">  Autostart-Anwendungen </h2><br><p>  Um ein Programm automatisch zu starten, k√∂nnen Sie im Prinzip einfach schreiben </p><br><pre> <code class="plaintext hljs">exec /path/to/program</code> </pre> <br><p>  in der Sway-Konfiguration oder erstellen Sie sogar eine benutzerdefinierte Systemeinheit.  In diesem Artikel verwende ich jedoch die von KDE und Gnome √ºbernommene XDG-Autostart-Spezifikation. </p><br><p>  Die Spezifikation besteht darin, Desktop-Dateien auszuf√ºhren, die sich in den <code>/etc/xdg/autostart</code> und <code>~/.config/autostart</code> .  Diese Dateien werden in der Regel in Paketen mit Programmen geliefert, sind jedoch leicht selbst zu erstellen. </p><br><p>  Hier manifestiert sich das modulare Wesen des Schwankens.  Sway selbst kennt weder den XDG Autostart noch den XDG Desktop Entry.  Dar√ºber hinaus lehnen die Entwickler diese und alle √§hnlichen Spezifikationen aktiv ab.  Das Dienstprogramm <a href="https://github.com/jceb/dex">dex</a> console kann sie jedoch verwalten (h√∂chstwahrscheinlich befindet es sich im Repository Ihrer Distribution). </p><br><p>  Geben Sie den Befehl ein, um zu √ºberpr√ºfen, was in Autorun sein wird </p><br><pre> <code class="plaintext hljs">$ dex -ade Sway</code> </pre> <br><p>  <code>a</code> bedeutet Autostart, <code>d</code> - "Trockenlauf", <code>-e Sway</code> legt den Namen der Umgebung fest (es kann eine beliebige sein) und wird zum Filtern verwendet. </p><br><p>  H√∂chstwahrscheinlich wird die resultierende Liste nicht zu Ihnen passen.  Zum Beispiel habe ich dort <code>kgpg</code> .  Wir gehen wie folgt vor: Kopieren Sie die entsprechende Desktop-Datei von <code>/etc/xdg/autostart</code> nach <code>~/.config/autostart</code> , f√ºgen Sie dort die Zeile ein </p><br><pre> <code class="plaintext hljs">NotShowIn=Sway</code> </pre> <br><p>  und erneut Autorun pr√ºfen.  Viele Programme (insbesondere solche, die in Electron geschrieben wurden) m√∂chten m√∂glicherweise nicht unter Wayland ausgef√ºhrt werden.  Wir machen dasselbe mit ihnen.  Wir kopieren die Desktop-Datei und √§ndern dort die Startzeile.  Es war: </p><br><pre> <code class="plaintext hljs">Exec=/usr/bin/skypeforlinux</code> </pre> <br><p>  wurde: </p><br><pre> <code class="plaintext hljs">Exec=env GDK_BACKEND=x11 /usr/bin/skypeforlinux</code> </pre> <br><p>  Die gleiche Technik kann auf den Sway-Launcher-Desktop aus dem vorherigen Absatz angewendet werden.  Wenn alle Probleme behoben sind, f√ºgen Sie die Zeile zur Sway-Konfiguration hinzu </p><br><pre> <code class="plaintext hljs">exec dex -ae Sway</code> </pre> <br><p>  Oder Sie k√∂nnen das Gegenteil tun: Kopieren Sie die gew√ºnschten Desktop-Dateien in ein nicht standardm√§√üiges Verzeichnis und setzen Sie den Dex mit dem Befehl darauf </p><br><pre> <code class="plaintext hljs">exec dex -as /path/to/your/dir</code> </pre> <br><h2 id="skrinshoty">  Screenshots </h2><br><p>  Zwei der Schatullen werden uns dabei helfen.  <a href="https://github.com/emersion/slurp">Mit slurp</a> k√∂nnen Sie einen beliebigen rechteckigen Bereich auf dem Bildschirm ausw√§hlen und <a href="https://github.com/emersion/grim">grim</a> macht einen Screenshot davon.  In meiner Konfiguration sieht es so aus: </p><br><pre> <code class="plaintext hljs">bindsym Print exec grim ~/Pictures/screen-"$(date +%s)".png bindsym $mod+Print exec grim -g "$(slurp)" ~/Pictures/screen-"$(date +%s)".png</code> </pre> <br><p>  <code>$mod+PrintScreen</code> - Screenshot eines beliebigen Bereichs, <code>PrintScreen</code> - Screenshot des gesamten Bildschirms. </p><br><h2 id="skrinkasty">  Screencasts </h2><br><p>  Wenn Sie einen Screencast in eine Datei schreiben oder in einen RTMP-Stream streamen m√ºssen (z. B. auf Twitch), <a href="https://github.com/ammen99/wf-recorder">hilft</a> Ihnen der <a href="https://github.com/ammen99/wf-recorder">wf-recorder</a> dabei (unterst√ºtzt auch slurp). </p><br><p>  Wenn Sie OBS Studio verwenden m√∂chten, gibt es das <a href="https://hg.sr.ht/~scoopta/wlrobs">wlrobs-</a> Plugin daf√ºr. </p><br><p>  Die universellste L√∂sung, die einerseits in KDE und Gnome und andererseits insbesondere in Chrome- und Firefox-Browsern unterst√ºtzt wird, ist die Verwendung von Pipewire und der XDG Desktop Portal-Spezifikation.  F√ºr <a href="https://github.com/emersion/xdg-desktop-portal-wlr">sway</a> gibt es die notwendige Ebene <a href="https://github.com/emersion/xdg-desktop-portal-wlr">xdg-desktop-portal-wlr</a> , obwohl ich die Leistung nicht √ºberpr√ºft habe. </p><br><h2 id="nochnoy-rezhim">  Nachtmodus </h2><br><p>  Der Nachtmodus besteht darin, die Monitorfarben im Dunkeln durch w√§rmere zu ersetzen.  Wissenschaftler bezweifeln, wie n√ºtzlich dies wirklich ist, und Wayland-Entwickler kamen zu dem Schluss, dass die Standardisierung des Gammakorrekturprotokolls aus technischen Gr√ºnden unbrauchbar ist. </p><br><p>  Trotzdem gef√§llt mir dieses Feature, und in gewisser Weise ist es auch da.  F√ºr den Nachtmodus ben√∂tigen wir diese <a href="https://github.com/minus7/redshift">Rotverschiebungsgabel</a> mit Unterst√ºtzung des schwankungsspezifischen Protokolls. </p><br><p>  Wir installieren es auf irgendeine Weise in der <code>~/.config/redshift/redshift.conf</code> Konfiguration, w√§hlen das gew√ºnschte Protokoll aus und geben den L√§ngen- und Breitengrad an. </p><br><pre> <code class="plaintext hljs">[redshift] location-provider=manual adjustment-method=wayland [manual] lat=xx.xx lon=yy.yy</code> </pre> <br><h2 id="blokirovka-i-otklyuchenie-ekrana">  Sperren und Bildschirm ausschalten </h2><br><p>  Zwei aus einem anderen Sarg kommen hier zur Rettung.  <code>swayidle</code> f√ºhrt die angegebenen Befehle im Timeout aus, wenn keine Aktivit√§t <code>swaylock</code> (oder umgekehrt, das Erscheinungsbild), und <code>swaylock</code> sperrt den Bildschirm und erfordert ein Kennwort.  Sie k√∂nnen den Bildschirm ausschalten (oder alle Bildschirme, wenn es mehrere gibt) </p><br><pre> <code class="plaintext hljs">swaymsg "output * dpms off"</code> </pre> <br><p>  So sieht der Daemon aus, der den Bildschirm nach 300 Sekunden Inaktivit√§t blockiert und nach 600 Sekunden ausschaltet: </p><br><pre> <code class="plaintext hljs">swayidle -w \ timeout 300 'swaylock -f -c 000000' \ timeout 600 'swaymsg "output * dpms off"' \ resume 'swaymsg "output * dpms on"' \ before-sleep 'swaylock -f -c 000000'</code> </pre> <br><p>  F√ºhren Sie es in irgendeiner Weise aus. </p><br><h2 id="i3blocks">  i3blocks </h2><br><p>  Fertige Bl√∂cke mit Kalender, Netzwerk, Festplattenstatus usw.  usw.  kann aus dem <a href="https://github.com/vivien/i3blocks-contrib">i3blocks-contrib-</a> Repository ausgeliehen werden.  In i3blocks werden sie in der Konfiguration unter <code>~/.config/i3blocks/config</code> .  Beispiel: Ein Block mit Aktualisierungen alle 5 Sekunden nach Wochentag, Datum und Uhrzeit: </p><br><pre> <code class="plaintext hljs">[time] command=date +"%a %d/%m %H:%M" interval=5</code> </pre> <br><p>  Dies war jedoch ein zu einfaches Beispiel.  Tats√§chlich haben i3- und Sway-Enthusiasten einen heiligen Gral: Die Titelleiste des aktuellen Fensters wird in der oberen Leiste angezeigt.  Lassen Sie uns herausfinden, wie dies erreicht werden kann. </p><br><p>  Zun√§chst lesen wir <code>man sway-ipc</code> und stellen fest, dass Sie dort Veranstaltungen abonnieren k√∂nnen.  Das Erforderliche hat den Code <code>0x80000003. WINDOW</code>  <code>0x80000003. WINDOW</code> und gibt <code>0x80000003. WINDOW</code> Objekte dieser Struktur zur√ºck: </p><br><pre> <code class="plaintext hljs">{ "change" : "focus | title | ...", "container": { focused: true | false, name: "...", ... } }</code> </pre> <br><p>  In der Tat kann entweder das Fenster selbst seinen Titel <code>change == title</code> ( <code>change == title</code> ) oder wir k√∂nnen den Fokus auf ein anderes Fenster verschieben ( <code>change == focus</code> ).  Das Fenster kann jedoch den Titel √§ndern und unscharf sein.  Um solche Ereignisse herauszufiltern, m√ºssen wir die Eigenschaft <code>container.focused</code> √ºberpr√ºfen. </p><br><p>  Sie k√∂nnen all diese Logik in Python oder Go beschreiben, aber es gibt einen besseren Weg.  <code>swaymsg</code> Sie die gew√ºnschten Ereignisse ganz einfach abonnieren und an stdout ausgeben: </p><br><pre> <code class="plaintext hljs">$ swaymsg -m -t SUBSCRIBE "['window']"</code> </pre> <br><p>  und wir werden den resultierenden json in <code>jq</code> .  Hier ist das Ergebnis, ohne auf die Feinheiten der Abfragesyntax dieses wunderbaren Dienstprogramms einzugehen: </p><br><pre> <code class="bash hljs">$ query=<span class="hljs-string"><span class="hljs-string">'select(.change == "focus" or (.change == "title" and .container.focused)) | .container.name'</span></span> $ swaymsg -m -t SUBSCRIBE <span class="hljs-string"><span class="hljs-string">"['window']"</span></span> | jq --unbuffered -r <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$query</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><p>  Ein zweizeiliges Skript f√ºr die Bash und kein Code mehr!  Das Flag <code>--unbuffered</code> ben√∂tigt, andernfalls erh√§lt i3blocks keine neuen Zeilen sofort, sondern nur, wenn der Puffer gel√∂scht wird. </p><br><p>  F√ºgen Sie schlie√ülich den folgenden Block zur i3blocks-Konfiguration hinzu: </p><br><pre> <code class="plaintext hljs">[active_window] command=/path/to/our/script.sh interval=persist</code> </pre> <br><p>  Hausaufgaben: Lehren Sie grimmig, einen Screenshot des aktuellen Fensters zu machen.  Sie sagen, dass solche Dinge in Wayland unm√∂glich sind, aber die M√§nner bezweifeln es. </p><br><p>  Hausaufgabe 2: Lehren Sie i3blocks, das aktuelle Tastaturlayout als Flagge anzuzeigen.  Es gibt einige Bl√∂cke in i3blocks-contrib, die jedoch anstelle einer Flagge Text anzeigen und in Wayland nicht funktionieren. </p><br><h2 id="prochie-programmy">  Andere Programme </h2><br><p>  <a href="https://github.com/bugaevc/wl-clipboard">Mit der wl-Zwischenablage</a> k√∂nnen Sie √ºber das Terminal mit der Zwischenablage arbeiten, dh sie ersetzt xclip und xsel.  Dies ist besonders n√ºtzlich f√ºr VIM-Benutzer, bei denen das Kopieren / Einf√ºgen mit <code>"+y</code> / <code>"+p</code> beginnt (installieren Sie einfach dieses Paket, es ist keine zus√§tzliche Konfiguration erforderlich). </p><br><p>  <a href="https://github.com/ReimuNotMoe/ydotool">ydotool</a> - Ersetzung von xdotool. </p><br><p>  <a href="https://gitlab.freedesktop.org/mstoeckl/waypipe/">waypipe</a> - Proxy f√ºr Netzwerktransparenz.  Um ehrlich zu sein, ich kann mich nicht erinnern, wann jemand in Fachforen das letzte Mal eine Frage zu dieser Funktion gestellt hat.  Vielleicht benutzen sie es gar nicht?  Ich - definitiv nicht. </p><br><p>  KDE Connect  F√ºgen <code>org.kde.kdeconnect.nonplasma.desktop</code> Datei <code>org.kde.kdeconnect.nonplasma.desktop</code> zur <code>org.kde.kdeconnect.nonplasma.desktop</code> (siehe vorherige Abschnitte), installieren Sie KDE Connect auf Ihrem Smartphone und konfigurieren Sie deren Verbindung - und Sie k√∂nnen die Musik- und Videowiedergabe von Ihrem Smartphone in einem Browser mit dem <a href="https://addons.mozilla.org/ru/firefox/addon/plasma-integration/">Plasma-Integrations-</a> Plugin in vlc steuern , in <a href="https://github.com/hoyon/mpv-mpris">der kantate</a> , im mpv mit <a href="https://github.com/hoyon/mpv-mpris">dem mpv-mpris plugin</a> , und auch in mako <a href="https://github.com/hoyon/mpv-mpris">mitteilungen</a> erhalten.  Mein Respekt vor dem KDE-Projekt f√ºr die Entwicklung von Programmen, die nicht an ihr √ñkosystem gebunden sind. </p><br><h1 id="zaklyuchenie">  Fazit </h1><br><p>  Sie k√∂nnen endlos dar√ºber schreiben, wie Sie all dies einrichten (insbesondere das i3blocks-Bedienfeld), aber es ist besser, hier anzuhalten.  Folgendes habe ich bekommen: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/s9/qy/q0/s9qyq0rrpk9rzv4bamj1qsooceq.png"></a> </p><br><p>  Gehe auch zum Subreddit <a href="https://www.reddit.com/r/unixporn/">/ r / unixporn</a> und staune, was die Leute machen.  (95% von allem, was dort ausgelegt ist, sieht wundersch√∂n aus, ist aber grunds√§tzlich nicht f√ºr die t√§gliche Arbeit geeignet :)). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484378/">https://habr.com/ru/post/de484378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484364/index.html">Mit 26 Jahren leitet Yana Harlan die Entwicklung einer Raumfahrtmaschine. N√§chstes Jahr planen sie den Start.</a></li>
<li><a href="../de484370/index.html">Slurm SRE - lernen, die Zufriedenheit der Benutzer zu gew√§hrleisten</a></li>
<li><a href="../de484372/index.html">Smart House mit Xiaomi am Beispiel einer Sauna</a></li>
<li><a href="../de484374/index.html">Reise in die Mitte ... Hafenarbeiter Bild. Oder wie man ein Bild aus der Registrierung ohne Andockfenster herunterl√§dt</a></li>
<li><a href="../de484376/index.html">Samsung Moskauer Zentrum f√ºr K√ºnstliche Intelligenz in Mitarbeitergeschichten</a></li>
<li><a href="../de484380/index.html">Umzug - das letzte Jahrhundert! Alternativen zu std :: move in ‚ÄûC ++ der Zukunft‚Äú</a></li>
<li><a href="../de484382/index.html">Bellman-Ford-Algorithmus</a></li>
<li><a href="../de484386/index.html">AWS_Ru Meetup bei der Raiffeisenbank</a></li>
<li><a href="../de484388/index.html">VVVVVV ??? VVVVVV !!! :)</a></li>
<li><a href="../de484390/index.html">Einblicke in die 18 besten Java-Frameworks f√ºr 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>