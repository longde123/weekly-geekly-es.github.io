<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåù üì¢ ü§æüèª Mengapa implementasi standar antarmuka bermanfaat? üßóüèæ ‚ûï üëáüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam posting terakhir saya , saya berjanji untuk berbicara tentang beberapa kasus di mana, saya pikir, masuk akal untuk mempertimbangkan penggunaan i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mengapa implementasi standar antarmuka bermanfaat?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467949/">  Dalam posting <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terakhir saya</a> , saya berjanji untuk berbicara tentang beberapa kasus di mana, saya pikir, masuk akal untuk mempertimbangkan penggunaan implementasi default di antarmuka.  Fitur ini, tentu saja, tidak membatalkan banyak konvensi yang ada untuk menulis kode, tetapi saya menemukan bahwa dalam beberapa situasi menggunakan implementasi standar mengarah ke kode yang lebih bersih dan lebih mudah dibaca (setidaknya menurut saya). <br><a name="habracut"></a><br><h2>  Memperluas Antarmuka dengan Kompatibilitas Mundur </h2><br>  Dokumentasi mengatakan: <br><blockquote>  Skenario yang paling umum adalah menambahkan metode ke antarmuka dengan aman yang sudah diterbitkan dan digunakan oleh banyak klien. </blockquote>  Masalah yang harus dipecahkan adalah bahwa setiap kelas yang diwarisi dari antarmuka harus menyediakan implementasi untuk metode baru.  Ini tidak terlalu sulit ketika antarmuka hanya digunakan oleh kode Anda sendiri, tetapi jika itu ada di perpustakaan umum atau digunakan oleh perintah lain, maka menambahkan elemen antarmuka baru dapat menyebabkan sakit kepala besar. <br><br>  Pertimbangkan sebuah contoh: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Avalon</span></span> : <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make =&gt; <span class="hljs-string"><span class="hljs-string">"Toyota"</span></span>; }</code> </pre> <br>  Jika saya ingin menambahkan metode <i>GetTopSpeed ‚Äã‚Äã() baru</i> ke antarmuka ini, saya perlu menambahkan implementasinya di <i>Avalon</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTopSpeed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Avalon</span></span> : <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make =&gt; <span class="hljs-string"><span class="hljs-string">"Toyota"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTopSpeed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">130</span></span>; }</code> </pre> <br>  Namun, jika saya membuat implementasi default metode <i>GetTopSpeed ‚Äã‚Äã()</i> di <i>ICar</i> , maka saya tidak perlu menambahkannya ke setiap kelas yang diwarisi. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTopSpeed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">150</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Avalon</span></span> : <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make =&gt; <span class="hljs-string"><span class="hljs-string">"Toyota"</span></span>; }</code> </pre> <br>  Jika perlu, saya masih bisa kelebihan implementasi di kelas yang defaultnya tidak cocok: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTopSpeed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">150</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Avalon</span></span> : <span class="hljs-title"><span class="hljs-title">ICar</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Make =&gt; <span class="hljs-string"><span class="hljs-string">"Toyota"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTopSpeed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">130</span></span>; }</code> </pre> <br>  Penting untuk mempertimbangkan bahwa metode default <i>GetTopSpeed ‚Äã‚Äã()</i> akan tersedia hanya untuk variabel yang dilemparkan ke <i>ICar</i> dan tidak akan tersedia untuk <i>Avalon</i> jika tidak memiliki kelebihan beban.  Ini berarti bahwa teknik ini paling berguna jika Anda bekerja dengan antarmuka (jika tidak, kode Anda akan dibanjiri banyak pemain ke antarmuka untuk mendapatkan akses ke implementasi standar metode ini). <br><br><h2>  Campuran dan sifat (atau sesuatu seperti itu) </h2><br>  Konsep bahasa yang sama dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mixin</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sifat</a> menggambarkan cara untuk memperluas perilaku objek melalui komposisi tanpa perlu pewarisan berganda. <br><br>  Wikipedia melaporkan hal berikut tentang mixin: <br><blockquote>  Mixin juga dapat dianggap sebagai antarmuka dengan metode default </blockquote>  Apakah itu terdengar seperti itu? <br><br>  Namun, meskipun demikian, bahkan dengan implementasi standar, antarmuka dalam <i>C #</i> bukanlah mixin.  Perbedaannya adalah bahwa mereka juga dapat berisi metode tanpa implementasi, mendukung warisan dari antarmuka lain, dapat dikhususkan <i>(tampaknya, ini mengacu pada pembatasan template. - approx. Terjemahan.)</i> Dan seterusnya.  Namun, jika kita membuat antarmuka yang hanya berisi metode dengan implementasi default, itu sebenarnya akan menjadi mixin tradisional. <br><br>  Pertimbangkan kode berikut, yang menambahkan fungsionalitas ke objek "gerakan" dan melacak lokasinya (misalnya, dalam pengembang game): <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IMovable</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) Location { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Angle { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Speed { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// ,         public void Move() =&gt; Location = ...; } public class Car : IMovable { public string Make =&gt; "Toyota"; }</span></span></code> </pre> <br>  Aduh!  Ada masalah dalam kode ini yang tidak saya perhatikan sampai saya mulai menulis posting ini dan mencoba untuk mengkompilasi contoh.  Antarmuka (bahkan yang memiliki implementasi default) tidak dapat menyimpan status.  Oleh karena itu, antarmuka tidak mendukung properti otomatis.  Dari <a href="">dokumentasi</a> : <br><blockquote>  Antarmuka tidak dapat menyimpan keadaan instance.  Meskipun bidang statis sekarang diizinkan di antarmuka, bidang contoh masih tidak dapat digunakan.  Oleh karena itu, Anda tidak dapat menggunakan properti otomatis, karena mereka secara implisit menggunakan bidang tersembunyi. </blockquote>  Dalam antarmuka <i>C #</i> ini bertentangan dengan konsep mixin (sejauh yang saya mengerti, mixin secara konseptual dapat menyimpan keadaan), tetapi kita masih dapat mencapai tujuan awal: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IMovable</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) Location { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Angle { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Speed { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// A method that changes location // using angle and speed public void Move() =&gt; Location = ...; } public class Car : IMovable { public string Make =&gt; "Toyota"; // ,         public (int, int) Location { get; set; } public int Angle { get; set; } public int Speed { get; set; } }</span></span></code> </pre> <br>  Dengan demikian, kami mencapai apa yang kami inginkan dengan membuat metode <i>Move ()</i> dan implementasinya tersedia untuk semua kelas yang mengimplementasikan antarmuka <i>IMovable</i> .  Tentu saja, kelas masih perlu menyediakan implementasi untuk properti, tetapi setidaknya mereka dideklarasikan di antarmuka <i>IMovable</i> , yang memungkinkan implementasi default <i>Move ()</i> untuk bekerja dengannya dan memastikan bahwa setiap kelas yang mengimplementasikan antarmuka memiliki keadaan yang benar. <br><br>  Sebagai contoh yang lebih lengkap dan praktis, pertimbangkan mixin untuk logging: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ILogger</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; LoggerFactory .GetLogger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetType().Name) .LogInfo(message); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">LoggerFactory</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ILogger </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetLogger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLogger(name); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConsoleLogger</span></span> : <span class="hljs-title"><span class="hljs-title">ILogger</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConsoleLogger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { _name = name ?? <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(name)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"[INFO] </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{_name}</span></span></span><span class="hljs-string">: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{message}</span></span></span><span class="hljs-string">"</span></span>); }</code> </pre> <br>  Sekarang di kelas mana pun saya dapat mewarisi dari antarmuka <i>ILogger</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Foo</span></span> : <span class="hljs-title"><span class="hljs-title">ILogger</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ((ILogger)<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).LogInfo(<span class="hljs-string"><span class="hljs-string">"Woot!"</span></span>); } }</code> </pre><br>  Dan kode seperti itu: <br><br><pre> <code class="cs hljs">Foo foo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Foo(); foo.DoSomething();</code> </pre> <br>  Output: <br><br><pre> <code class="bash hljs">[INFO] Foo: Woot!</code> </pre> <br><h2>  Mengganti Metode Ekstensi </h2><br>  Aplikasi paling berguna yang saya temukan adalah mengganti sejumlah besar metode ekstensi.  Mari kita kembali ke contoh pencatatan sederhana: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ILogger</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> level, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre> <br>  Sebelum implementasi standar muncul di antarmuka, sebagai aturan, saya akan menulis banyak metode ekstensi untuk antarmuka ini, sehingga di kelas yang diwariskan Anda hanya perlu menerapkan satu metode, karena itu pengguna akan memiliki akses ke banyak ekstensi: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ILoggerExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ILogger logger, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; logger.Log(<span class="hljs-string"><span class="hljs-string">"INFO"</span></span>, message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ILogger logger, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; logger.Log(<span class="hljs-string"><span class="hljs-string">"INFO"</span></span>, <span class="hljs-string"><span class="hljs-string">$"[</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string">] message"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ILogger logger, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; logger.Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ILogger logger, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; logger.Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, <span class="hljs-string"><span class="hljs-string">$"[</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string">] </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{message}</span></span></span><span class="hljs-string">"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ILogger logger, Exception ex</span></span></span><span class="hljs-function">)</span></span> =&gt; logger.Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, ex.Message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ILogger logger, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, Exception ex</span></span></span><span class="hljs-function">)</span></span> =&gt; logger.Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, <span class="hljs-string"><span class="hljs-string">$"[</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string">] </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{ex.Message}</span></span></span><span class="hljs-string">"</span></span>); }</code> </pre> <br>  Pendekatan ini bekerja dengan baik, tetapi bukan tanpa cacat.  Misalnya, ruang nama kelas dengan ekstensi dan antarmuka tidak selalu cocok.  Ditambah suara visual yang mengganggu dalam bentuk parameter dan tautan ke instance logger: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span> ILogger logger logger.Log</code> </pre> <br>  Sekarang saya dapat mengganti ekstensi dengan implementasi default: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ILogger</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> level, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; Log(<span class="hljs-string"><span class="hljs-string">"INFO"</span></span>, message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; Log(<span class="hljs-string"><span class="hljs-string">"INFO"</span></span>, <span class="hljs-string"><span class="hljs-string">$"[</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string">] message"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, <span class="hljs-string"><span class="hljs-string">$"[</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string">] </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{message}</span></span></span><span class="hljs-string">"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Exception ex</span></span></span><span class="hljs-function">)</span></span> =&gt; Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, ex.Message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, Exception ex</span></span></span><span class="hljs-function">)</span></span> =&gt; Log(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>, <span class="hljs-string"><span class="hljs-string">$"[</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string">] </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{ex.Message}</span></span></span><span class="hljs-string">"</span></span>); }</code> </pre> <br>  Saya menemukan implementasi ini lebih bersih dan lebih mudah dibaca (dan mendukung). <br><br>  Menggunakan implementasi default juga memiliki beberapa keunggulan dibandingkan metode ekstensi: <br><br><ul><li>  Dapat menggunakan <i>ini</i> </li><li>  Anda dapat memberikan tidak hanya metode, tetapi juga elemen lain: misalnya, pengindeks </li><li>  Implementasi default mungkin kelebihan beban untuk memperjelas perilaku. </li></ul><br>  Yang membingungkan saya dalam kode di atas adalah tidak begitu jelas anggota antarmuka mana yang memiliki implementasi default dan yang merupakan bagian dari kontrak yang harus diimplementasikan oleh kelas yang diwarisi.  Sebuah komentar yang memisahkan dua blok mungkin membantu, tapi saya suka kejelasan yang ketat tentang metode ekstensi dalam hal ini. <br><br>  Untuk mengatasi masalah ini, saya mulai mendeklarasikan antarmuka yang memiliki anggota dengan implementasi default sebagai <i>parsial</i> (kecuali mungkin yang sangat sederhana).  Kemudian saya meletakkan implementasi default dalam file terpisah dengan konvensi penamaan bentuk <i>"ILogger.LogInfoDefaults.cs"</i> , <i>"ILogger.LogErrorDefaults.cs"</i> dan seterusnya.  Jika ada beberapa implementasi standar dan tidak perlu untuk pengelompokan tambahan, maka saya <i>beri</i> nama file <i>"ILogger.Defaults.cs"</i> . <br><br>  Ini memisahkan anggota dengan implementasi standar dari kontrak yang tidak dapat diimplementasikan, yang diwajibkan untuk diterapkan oleh kelas yang diwariskan.  Selain itu, ini memungkinkan Anda untuk memotong file yang sangat panjang.  Ada juga trik rumit dengan rendering <i>ASP.NET-</i> gaya file terlampir dalam proyek format apa pun.  Untuk melakukan ini, tambahkan ke file proyek atau di <i>Directory.Build.props</i> : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectCapability</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DynamicDependentFile"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectCapability</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DynamicFileNesting"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Sekarang Anda dapat memilih <i>"File Nesting"</i> di <i>Solution Explorer</i> dan semua file <i>.Defaults.cs</i> Anda akan muncul sebagai turunan dari file antarmuka "utama". <br><br>  Kesimpulannya, masih ada beberapa situasi di mana metode penyuluhan lebih disukai: <br><br><ul><li>  Jika Anda biasanya bekerja dengan kelas, bukan antarmuka (karena Anda harus membuang objek ke antarmuka untuk mengakses implementasi standar) </li><li>  Jika Anda sering menggunakan ekstensi dengan templat: <i>public static T SomeExt &lt;</i> <i>T</i> &gt; (T foo ini) (mis. Dalam <i>API Lancar</i> ) </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467949/">https://habr.com/ru/post/id467949/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467933/index.html">Namun, mengapa Posit adalah alternatif yang layak untuk IEEE 754</a></li>
<li><a href="../id467935/index.html">Ulasan perekam Edic Weeny A110 dengan fungsi "kotak hitam"</a></li>
<li><a href="../id467937/index.html">Plugin toko online WordPress segar</a></li>
<li><a href="../id467941/index.html">Jumlah Masalah</a></li>
<li><a href="../id467943/index.html">Fundamental risiko dan keamanan informasi yang berorientasi bisnis: konsep dan paradigma dasar</a></li>
<li><a href="../id467951/index.html">Habrastatistics: menganalisis komentar pembaca. Bagian 2, jawaban atas pertanyaan</a></li>
<li><a href="../id467953/index.html">Menguji server virtual murah</a></li>
<li><a href="../id467957/index.html">Apa yang ada di balik konstanta Feigenbaum</a></li>
<li><a href="../id467959/index.html">Fluktuasi kosmologi dan kuantum di browser</a></li>
<li><a href="../id467961/index.html">Masalah dan nuansa saat mengembangkan untuk SmartTV menggunakan React.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>