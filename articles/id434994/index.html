<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßî üöÇ üôÉ Android: Membuat Citarasa Produk Dinamis dan Menandatangani Konfigurasi üññüèø üêá ‚èèÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika bekerja pada proyek Android, yang merupakan platform untuk membuat aplikasi untuk melihat konten video, menjadi perlu untuk secara dinamis meng...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android: Membuat Citarasa Produk Dinamis dan Menandatangani Konfigurasi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434994/"><p>  Ketika bekerja pada proyek Android, yang merupakan platform untuk membuat aplikasi untuk melihat konten video, menjadi perlu untuk secara dinamis mengkonfigurasi rasa produk dengan transfer informasi tentang menandatangani konfigurasi ke file eksternal.  Detail di bawah potongan. </p><a name="habracut"></a><br><h2 id="ishodnye-dannye">  Sumber data </h2><br><p>  Ada proyek Android, yang merupakan platform untuk membuat aplikasi untuk melihat konten video.  Basis kode umum untuk semua aplikasi, perbedaannya ada pada pengaturan parameter REST API dan pengaturan untuk penampilan aplikasi (spanduk, warna, font, dll.).  Tiga dimensi rasa digunakan dalam proyek: </p><br><ol><li>  <u>pasar</u> : google atau amazon.  Karena  aplikasi didistribusikan baik di Google Play dan di Amazon Marketplace, ada kebutuhan untuk berbagi beberapa fungsi tergantung pada tempat distribusi.  Misalnya: Amazon melarang penggunaan mekanisme Pembelian Dalam Aplikasi dari Google dan mensyaratkan penerapan mekanismenya. </li><li>  <u>endpoint</u> : "pro" atau "staging".  Konfigurasi khusus untuk versi produksi dan pementasan. </li><li>  <u>situs</u> : dimensi aktual untuk aplikasi tertentu.  Tetapkan applicationId dan penandatanganan Konfigurasi. </li></ol><br><h2 id="problemy-s-kotorymi-my-stolknulis">  Masalah yang kami temui </h2><br><p>  Saat membuat aplikasi baru, perlu menambahkan Flavour Produk: </p><br><pre><code class="ruby hljs">application1 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">'com.damsols.application1'</span></span> signingConfig signingConfigs.application1 }</code> </pre> <br><p>  Selain itu, perlu untuk menambahkan Konfigurasi Penandatanganan yang sesuai: </p><br><pre> <code class="ruby hljs">application1 { storeFile file(<span class="hljs-string"><span class="hljs-string">"path_to_keystore1.jks"</span></span>) storePassword <span class="hljs-string"><span class="hljs-string">"password1"</span></span> keyAlias <span class="hljs-string"><span class="hljs-string">"application1"</span></span> keyPassword <span class="hljs-string"><span class="hljs-string">"password1"</span></span> }</code> </pre> <br><h4 id="problemy">  Masalahnya: </h4><br><ol><li>  lima baris untuk menambahkan satu aplikasi, hanya berbeda di applicationId dan penandatanganan Konfigurasi.  Ketika jumlah aplikasi menjadi lebih dari 50, file build.gradle mulai berisi lebih dari 500 baris informasi aplikasi. </li><li>  penyimpanan dalam informasi teks biasa tentang keystore untuk menandatangani aplikasi. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Contoh build.gradle</b> <div class="spoiler_text"><pre> <code class="ruby hljs">apply <span class="hljs-symbol"><span class="hljs-symbol">plugin:</span></span> <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { minSdkVersion <span class="hljs-number"><span class="hljs-number">23</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> } buildTypes { release { minifyEnabled <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } flavorDimensions <span class="hljs-string"><span class="hljs-string">"site"</span></span>, <span class="hljs-string"><span class="hljs-string">"endpoint"</span></span>, <span class="hljs-string"><span class="hljs-string">"market"</span></span> signingConfigs { application1 { storeFile file(<span class="hljs-string"><span class="hljs-string">"application1.jks"</span></span>) storePassword <span class="hljs-string"><span class="hljs-string">"password1"</span></span> keyAlias <span class="hljs-string"><span class="hljs-string">"application1"</span></span> keyPassword <span class="hljs-string"><span class="hljs-string">"password1"</span></span> } application2 { storeFile file(<span class="hljs-string"><span class="hljs-string">"application2.jks"</span></span>) storePassword <span class="hljs-string"><span class="hljs-string">"password2"</span></span> keyAlias <span class="hljs-string"><span class="hljs-string">"application2"</span></span> keyPassword <span class="hljs-string"><span class="hljs-string">"password2"</span></span> } application3 { storeFile file(<span class="hljs-string"><span class="hljs-string">"application3.jks"</span></span>) storePassword <span class="hljs-string"><span class="hljs-string">"password3"</span></span> keyAlias <span class="hljs-string"><span class="hljs-string">"application3"</span></span> keyPassword <span class="hljs-string"><span class="hljs-string">"password3"</span></span> } } productFlavors { pro { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } staging { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } google { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } amazon { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } application1 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">"com.damsols.application1"</span></span> signingConfig signingConfigs.application1 } application2 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">"com.damsols.application2"</span></span> signingConfig signingConfigs.application2 } application3 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">"com.damsols.application3"</span></span> signingConfig signingConfigs.application3 } } } dependencies { implementation fileTree(<span class="hljs-symbol"><span class="hljs-symbol">dir:</span></span> <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">include:</span></span> [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation <span class="hljs-string"><span class="hljs-string">'com.android.support:appcompat-v7:28.0.0'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.3'</span></span> }</code> </pre> </div></div><br><h2 id="vynos-informacii-o-sertifikatah">  Menghapus Informasi Sertifikat </h2><br><p>  Langkah pertama adalah mentransfer informasi sertifikat ke file json yang terpisah.  Misalnya, informasi juga disimpan dalam teks biasa, tetapi tidak ada yang mencegah Anda menyimpan file dalam bentuk terenkripsi (kami menggunakan GPG) dan mendekripsi langsung saat membangun aplikasi.  File JSON memiliki struktur berikut: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"signingConfigs"</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">"configName"</span></span>:<span class="hljs-string"><span class="hljs-string">"application1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storeFile"</span></span>:<span class="hljs-string"><span class="hljs-string">"application1.jks"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storePassword"</span></span>:<span class="hljs-string"><span class="hljs-string">"password1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keyAlias"</span></span>:<span class="hljs-string"><span class="hljs-string">"application1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keyPassword"</span></span>:<span class="hljs-string"><span class="hljs-string">"password1"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"configName"</span></span>:<span class="hljs-string"><span class="hljs-string">"application2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storeFile"</span></span>:<span class="hljs-string"><span class="hljs-string">"application2.jks"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storePassword"</span></span>:<span class="hljs-string"><span class="hljs-string">"password2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keyAlias"</span></span>:<span class="hljs-string"><span class="hljs-string">"application2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keyPassword"</span></span>:<span class="hljs-string"><span class="hljs-string">"password2"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"configName"</span></span>:<span class="hljs-string"><span class="hljs-string">"application3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storeFile"</span></span>:<span class="hljs-string"><span class="hljs-string">"application3.jks"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storePassword"</span></span>:<span class="hljs-string"><span class="hljs-string">"password3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keyAlias"</span></span>:<span class="hljs-string"><span class="hljs-string">"application3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keyPassword"</span></span>:<span class="hljs-string"><span class="hljs-string">"password3"</span></span> }, ] }</code> </pre> <br><p>  Bagian penandatanganan Konfigurasi di file build.gradle dihapus. </p><br><h2 id="uproschenie-product-flavors-sekcii">  Sederhanakan Bagian Rasa Produk </h2><br><p>  Untuk mengurangi jumlah baris yang diperlukan untuk menggambarkan Flavour Produk dengan dimensi = "situs", sebuah array dibuat dengan informasi yang diperlukan untuk menggambarkan aplikasi tertentu, dan semua Flavour Produk dengan dimensi = "situs" dihapus. <br>  Itu: </p><br><pre> <code class="ruby hljs">... productFlavors { pro { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } staging { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } google { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } amazon { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } application1 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">"com.damsols.application1"</span></span> signingConfig signingConfigs.application1 } application2 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">"com.damsols.application2"</span></span> signingConfig signingConfigs.application2 } application3 { dimension <span class="hljs-string"><span class="hljs-string">'site'</span></span> applicationId <span class="hljs-string"><span class="hljs-string">"com.damsols.application3"</span></span> signingConfig signingConfigs.application3 } } } ...</code> </pre> <br><p>  Itu menjadi: </p><br><pre> <code class="ruby hljs">... productFlavors { pro { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } staging { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } google { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } amazon { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinitions</span></span></span><span class="hljs-function"> = [ ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application1</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application1</span></span></span><span class="hljs-function">'], ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application2</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application2</span></span></span><span class="hljs-function">'], ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application3</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application3</span></span></span><span class="hljs-function">'] ] } ...</span></span></code> </pre> <br><h2 id="dinamicheskoe-sozdanie-product-flavors">  Penciptaan Rasa Produk Dinamis </h2><br><p>  Langkah terakhir adalah secara dinamis membuat rasa produk dan menandatangani konfigurasi menggunakan file JSON eksternal dengan informasi sertifikat dari array applicationDefinitions. </p><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinitions</span></span></span><span class="hljs-function"> = [ ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application1</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application1</span></span></span><span class="hljs-function">'], ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application2</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application2</span></span></span><span class="hljs-function">'], ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application3</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application3</span></span></span><span class="hljs-function">'] ] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeysFile</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'signkeys/signkeys.json'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeys</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JsonSlurper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>.parseText(signKeysFile.text) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configs</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeys</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigsMap</span></span></span><span class="hljs-function"> = [:] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configs</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">each</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigsMap</span></span></span><span class="hljs-function">[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configName</span></span></span><span class="hljs-function">] = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function"> } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinitions</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">each</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinition</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfig</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigsMap</span></span></span><span class="hljs-function">[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinition</span></span></span><span class="hljs-function">['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">']] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">android</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productFlavors</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(applicationDefinition[</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">], { flavor -&gt; flavor.dimension = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'site'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flavor.applicationId = applicationDefinition[</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'applicationId'</span></span></span></span><span class="hljs-function"><span class="hljs-params">] flavor.signingConfig = android.signingConfigs.create(applicationDefinition[</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span></span> flavor.signingConfig.storeFile = file(signingConfig.storeFile) flavor.signingConfig.storePassword = signingConfig.storePassword flavor.signingConfig.keyAlias = signingConfig.keyAlias flavor.signingConfig.keyPassword = signingConfig.keyPassword }) }</code> </pre> <br><p>  Untuk menambahkan bacaan dari penyimpanan terenkripsi, Anda perlu mengganti bagian </p><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeysFile</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'signkeys/signkeys.json'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeys</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JsonSlurper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>.parseText(signKeysFile.text) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configs</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeys</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigs</span></span></span></span></code> </pre> <br><p>  untuk membaca dari file yang dienkripsi. </p><br><div class="spoiler">  <b class="spoiler_title">build.gradle keseluruhan</b> <div class="spoiler_text"><pre> <code class="ruby hljs">import groovy.json.JsonSlurper apply <span class="hljs-symbol"><span class="hljs-symbol">plugin:</span></span> <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { minSdkVersion <span class="hljs-number"><span class="hljs-number">23</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> } buildTypes { release { minifyEnabled <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } flavorDimensions <span class="hljs-string"><span class="hljs-string">"site"</span></span>, <span class="hljs-string"><span class="hljs-string">"endpoint"</span></span>, <span class="hljs-string"><span class="hljs-string">"market"</span></span> signingConfigs {} productFlavors { pro { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } staging { dimension <span class="hljs-string"><span class="hljs-string">'endpoint'</span></span> } google { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } amazon { dimension <span class="hljs-string"><span class="hljs-string">'market'</span></span> } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinitions</span></span></span><span class="hljs-function"> = [ ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application1</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application1</span></span></span><span class="hljs-function">'], ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application2</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application2</span></span></span><span class="hljs-function">'], ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application3</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationId</span></span></span><span class="hljs-function">': '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">com</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">damsols</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application3</span></span></span><span class="hljs-function">'] ] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeysFile</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'signkeys/signkeys.json'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeys</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JsonSlurper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>.parseText(signKeysFile.text) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configs</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signKeys</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigsMap</span></span></span><span class="hljs-function"> = [:] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configs</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">each</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigsMap</span></span></span><span class="hljs-function">[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configName</span></span></span><span class="hljs-function">] = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config</span></span></span><span class="hljs-function"> } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinitions</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">each</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinition</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfig</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signingConfigsMap</span></span></span><span class="hljs-function">[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDefinition</span></span></span><span class="hljs-function">['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">']] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">android</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productFlavors</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(applicationDefinition[</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">], { flavor -&gt; flavor.dimension = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'site'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flavor.applicationId = applicationDefinition[</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'applicationId'</span></span></span></span><span class="hljs-function"><span class="hljs-params">] flavor.signingConfig = android.signingConfigs.create(applicationDefinition[</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span></span> flavor.signingConfig.storeFile = file(signingConfig.storeFile) flavor.signingConfig.storePassword = signingConfig.storePassword flavor.signingConfig.keyAlias = signingConfig.keyAlias flavor.signingConfig.keyPassword = signingConfig.keyPassword }) } dependencies { implementation fileTree(<span class="hljs-symbol"><span class="hljs-symbol">dir:</span></span> <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">include:</span></span> [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation <span class="hljs-string"><span class="hljs-string">'com.android.support:appcompat-v7:28.0.0'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.3'</span></span> }</code> </pre></div></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan GitHub</a> </p><br><p>  Terima kasih </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434994/">https://habr.com/ru/post/id434994/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434978/index.html">Memperkenalkan HealthKit</a></li>
<li><a href="../id434982/index.html">Perspektif: MultiClet S1</a></li>
<li><a href="../id434984/index.html">Mengapa saya membenci ORM yang fasih</a></li>
<li><a href="../id434986/index.html">Konsep dasar dari pustaka C ++ standar</a></li>
<li><a href="../id434992/index.html">Meningkatkan IDA Pro. Debugger untuk Sega Mega Drive (bagian 1)</a></li>
<li><a href="../id434996/index.html">Bagaimana saya berbagi lokasi melalui VK API</a></li>
<li><a href="../id434998/index.html">Artikel lain tentang cara memilih smartphone</a></li>
<li><a href="../id435000/index.html">Konsep interaksi saluran iklan dan aplikasi praktisnya</a></li>
<li><a href="../id435006/index.html">Di mana dan bagaimana reaktor nuklir</a></li>
<li><a href="../id435008/index.html">Data awal tentang produksi dan penjualan kendaraan listrik Tesla untuk kuartal ke-4 dan untuk 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>