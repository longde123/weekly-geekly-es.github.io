<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”· ğŸ˜¥ ğŸ‘¨ğŸ»â€ğŸ“ Comment regarder SDDL et ne pas casser les yeux sur les points-virgules ğŸ–ğŸ¾ ğŸ¤˜ğŸ½ â›µï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mon chemin vers la sÃ©curitÃ© de l'information a commencÃ© par une dÃ©couverte surprenante: Â«cryptÃ©e en toute sÃ©curitÃ©Â». Cette dÃ©claration semble maintena...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment regarder SDDL et ne pas casser les yeux sur les points-virgules</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pm/blog/442662/"><img src="https://habrastorage.org/webt/an/hd/to/anhdtognmb0n09yu9hgh1cyducg.png"><br><br>  Mon chemin vers la sÃ©curitÃ© de l'information a commencÃ© par une dÃ©couverte surprenante: Â«cryptÃ©e en toute sÃ©curitÃ©Â».  Cette dÃ©claration semble maintenant simple et Ã©vidente, et au cours de la premiÃ¨re annÃ©e, la prise de conscience de ce fait a produit un effet comparable Ã  la bombe atomique mentale.  La sÃ©curitÃ© de l'information a Ã©tÃ© attaquÃ©e en Ã©tendant les limites du domaine: il s'est avÃ©rÃ© que la cryptographie n'est qu'une ligne de dÃ©fense, et il y a aussi au final juridique, organisationnelle et simplement physique.  L'un des aspects thÃ©oriques Ã©tait "Tous les problÃ¨mes de sÃ©curitÃ© de l'information sont dÃ©crits par l'accÃ¨s des sujets aux objets."  Il a mÃ©morisÃ©, dessinÃ© les modÃ¨les d'identification et d'accÃ¨s discrÃ©tionnaire, racontÃ©, rÃ©ussi et oubliÃ©. <br><br>  Je me spÃ©cialise dans l'analyse de sÃ©curitÃ© des applications Windows.  Assez souvent, l'Ã©tude de droits d'accÃ¨s prÃ©cisÃ©ment diffÃ©rents occupe une part importante de l'Ã©tude.  Pour automatiser le processus de recherche de droits d'accÃ¨s Ã©tranges ou incorrects, j'ai dÃ» comprendre le SDDL (Security Descriptor Definition Language).  Qui souhaite apprendre Ã  lire les droits sous forme de SDDL (par exemple, quelque chose comme <b>O: SYG: SYD: (A ;; CCLCSWLOCRRC ;;; IU) (A ;; CCLCSWLOCRRC ;;; SU) (A ;; CCLCSWRPWPDTLOCRRC ;;; SY) (A ;; CCDCLCSWRPWPDTLOCRSDRCWDWO ;;; BA)</b> ) et familiarisez-vous avec mon utilitaire pour travailler avec des descripteurs dans ce format, bienvenue Ã  cat. <br><a name="habracut"></a><br><h2>  <font color="orange">Format SDDL</font> </h2><br>  SDDL est une chaÃ®ne avec des descriptions des droits d'accÃ¨s sous forme de texte.  Le plus souvent, il se compose de 3 parties: propriÃ©taire, groupe et droits d'accÃ¨s DACL.  Parfois, la partie SACL est ajoutÃ©e - la partie audit (si les actions avec l'objet correspondent aux rÃ¨gles SACL, un Ã©vÃ©nement systÃ¨me sera crÃ©Ã© qui sera facile Ã  suivre par divers systÃ¨mes).  Le descripteur ressemble Ã  ceci: <br><br>  O: &lt;propriÃ©taire&gt; G: &lt;groupe&gt; D: &lt;rÃ¨gles d'accÃ¨s DACL&gt; S: &lt;rÃ¨gles d'audit SACL&gt; <br><br><img src="https://habrastorage.org/webt/wn/vg/oj/wnvgojdxtm7uz3qpq_tqwebbxuu.png"><br><br>  Ainsi, l'exemple ci-dessus peut Ãªtre dÃ©composÃ© comme suit: <br><ul><li>  O: SY </li><li>  G: SY </li><li>  D: (A ;; CCLCSWLOCRRC ;;; IU) (A ;; CCLCSWLOCRRC ;;; SU) (A ;; CCLCSWRPWPDTLOCRRC ;;; SY) (A ;; CCDCLCSWRPWPDTLOCRSDRCWDWO ;;; BA) </li></ul><br>  Le propriÃ©taire et le groupe peuvent Ãªtre indiquÃ©s comme le SID de l'utilisateur ou du groupe de l'OS, ou comme abrÃ©viations spÃ©ciales.  Par exemple, dans ce cas, le propriÃ©taire et le groupe SY sont le compte systÃ¨me local (NT AUTHORITY \ SYSTEM).  La liste des abrÃ©viations (malheureusement non exhaustive) se trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Les rÃ¨gles d'accÃ¨s consistent en une Ã©numÃ©ration des drapeaux DACL et des chaÃ®nes ACE (Access Control Entries).  Une analyse dÃ©taillÃ©e de l'ACE est prÃ©sentÃ©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , nous considÃ©rerons les plus importantes.  Chaque ligne ACE est placÃ©e entre parenthÃ¨ses dans lesquelles les donnÃ©es sont sÃ©parÃ©es par un point-virgule. <br>  Les premier, troisiÃ¨me et dernier groupes sont les plus intÃ©ressants.  Il s'agit du type d'accÃ¨s (autorisÃ© Â«AÂ», interdit Â«DÂ»), d'une liste d'actions et du nom du sujet d'accÃ¨s.  La premiÃ¨re rÃ¨gle DACL de l'exemple ci-dessus: (A ;; CCLCSWLOCRRC ;;; IU), nous allons l'examiner en dÃ©tail. <br><br><img src="https://habrastorage.org/webt/7d/__/o6/7d__o6fgbxas7azzzqmu24ou27k.png"><br><br><ul><li>  Â«AÂ» - la rÃ¨gle autorise des actions au sujet; </li><li>  Â«CCÂ», Â«LCÂ», Â«SWÂ», Â«LOÂ», Â«CRÂ», Â«RCÂ» - une liste d'actions autorisÃ©es; </li><li>  Â«IUÂ» - cette abrÃ©viation signifie le groupe d'utilisateurs connectÃ©s interactifs. </li></ul><br>  Reste Ã  comprendre ce qui est exactement autorisÃ©.  Que signifient ces mystÃ©rieux Â«CCÂ», Â«LCÂ», Â«SWÂ», Â«LOÂ», Â«CRÂ», Â«RCÂ»? <br><br>  Ici, nous attendons un autre Ã©cueil - il n'est pas toujours possible d'indiquer prÃ©cisÃ©ment l'action par rÃ©duction.  Ils sont, pour ainsi dire, spÃ©cifiques au contexte.  Par exemple, si nous parlons des droits de travailler avec des services, alors WP signifie Â«arrÃªter le serviceÂ», s'il s'agit de fichiers, puis Â«exÃ©cutionÂ», et s'il s'agit de dossiers, puis Â«traverserÂ» (accÃ¨s aux fichiers dans un dossier par nom, si ce n'est pas possible liste des contenus).  Certaines descriptions sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , d'autres <a href="">ici</a> , avec le monde sur un fil. <br><br><div class="spoiler">  <b class="spoiler_title">HÃ©, vous avez tellement manquÃ© sur les drapeaux DACL, les drapeaux ACE, l'hÃ©ritage</b> <div class="spoiler_text">  Oui, c'est vrai, tout cela est trÃ¨s important et intÃ©ressant, mais ce n'est pas si courant.  Je me concentre sur la masse.  Dans le cas de manifestations uniques de drapeaux inhabituels, il sera plus facile Ã  comprendre en mode manuel. <br></div></div><br><h2>  <font color="orange">Automatisation</font> </h2><br>  Les utilitaires Sysinternals m'aident vraiment, Ã  savoir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Process Monitor</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Access Check</a> (Ã©galement connu sous le nom de procmon et accesschk).  Le premier vous permet de consulter les accÃ¨s aux fichiers et au registre en temps rÃ©el, et le second vous permet de collecter des informations du systÃ¨me d'exploitation sur les descripteurs de sÃ©curitÃ©. <br><br>  Soit dit en passant, dans le systÃ¨me d'exploitation lui-mÃªme, la fenÃªtre avec les droits ressemble Ã  ceci si quelqu'un n'a pas vu: <br><br><img src="https://habrastorage.org/webt/ft/9t/vz/ft9tvzevuox0vy0yia5vta812k8.png"><br><br>  Malheureusement, la sortie dâ€™accesschk ne peut pas Ãªtre filtrÃ©e en restreignant la demande de droits sur des actions spÃ©cifiques.  Process Monitor affiche uniquement les appels rÃ©els Ã  un moment donnÃ© et vous obtenez une demande trop prÃ©cise qui n'est pas directement affectÃ©e.  De plus, j'aimerais avoir un mÃ©mo sur quel type de groupe d'utilisateurs est <abbr title="OpÃ©rateurs de rÃ©seau">NO</abbr> ou <abbr title="Compte de service rÃ©seau">NS</abbr> , et quels types d'actions sont cachÃ©s derriÃ¨re CC et RC. <br><br>  Un utilitaire simple est donc nÃ© pour visualiser et filtrer les enregistrements SDDL. <br><br><h2>  <font color="orange">Comment utiliser</font> </h2><br>  Travailler avec l'utilitaire est simple, en seulement trois Ã©tapes: <br><br><ol><li>  Obtenez des enregistrements SDDL. </li><li>  DÃ©finissez des filtres de rÃ¨gles. </li><li>  Afficher le rapport. </li></ol><br><img src="https://habrastorage.org/webt/ly/ul/kd/lyulkdqjevgwn8iqpejwekonkia.png"><br><br>  En savoir plus sur chaque Ã©tape. <br><br>  Obtenir SDDL.  Pour obtenir des enregistrements SDDL, vous pouvez utiliser les fonctions intÃ©grÃ©es Ã  l'utilitaire (boutons 1, 2, 3 ou 4), ou tÃ©lÃ©charger la liste que vous avez reÃ§ue prÃ©cÃ©demment (bouton 5).  Veuillez noter que la demande de droits d'accÃ¨s est faite au nom de l'utilisateur qui a lancÃ© SDDL Viewer, donc dans certaines situations, il vaut la peine d'exÃ©cuter le programme non seulement en tant qu'utilisateur normal, mais Ã©galement en tant qu'administrateur.  Eh bien, en gÃ©nÃ©ral, le champ lui-mÃªme avec des lignes SDDL est modifiable - vous pouvez au moins le rÃ©Ã©crire manuellement. <br><br>  Le filtrage s'effectue selon deux paramÃ¨tres: les groupes d'utilisateurs et les droits d'accÃ¨s.  La liste des groupes et des utilisateurs est basÃ©e sur tous les utilisateurs mentionnÃ©s dans le SDDL.  Faites attention Ã  la case Ã  cocher Traduire les SID (6) - si elle est installÃ©e, les SID des utilisateurs et des groupes seront, si possible, traduits en noms relatifs Ã  l'ordinateur actuel.  La liste des droits est un peu plus dÃ©licate - vous devez sÃ©lectionner la catÃ©gorie de droits (si le SDDL est rempli avec l'utilitaire lui-mÃªme, alors la catÃ©gorie nÃ©cessaire est automatiquement sÃ©lectionnÃ©e) De plus, les droits prÃ©sents dans le SDDL sont plus clairement mis en Ã©vidence dans la liste des droits. <br><br>  Le rapport est simplement le rÃ©sultat du dÃ©cryptage de SDDL et de l'application de filtres.  Vous pouvez trouver des informations plus dÃ©taillÃ©es sur chaque ligne si vous la sÃ©lectionnez dans la liste (oui, c'est avec cette fonction que j'ai eu un gag, ce qui a donnÃ© lieu Ã  une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">petite recherche sur les internes .NET</a> ). <br><br><h2>  <font color="orange">RÃ©sumÃ©</font> </h2><br>  Le code source est disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> .  Les fichiers binaires sont Ã©galement dans la section <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Release</a> . <br><br>  Mes plans d'utilitÃ©: <br><br><ol><li>  Ajoutez une recherche aux champs de saisie de SDDL - le filtrage ne suffit toujours pas. </li><li>  Ajoutez des paramÃ¨tres de lancement qui permettraient de crÃ©er des rapports sans partie visuelle. </li><li>  Peut-Ãªtre devriez-vous ajouter un remplissage SDDL Ã  partir des processus, des dossiers partagÃ©s et des imprimantes? </li></ol><br>  Je serai heureux d'entendre des suggestions dans les commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442662/">https://habr.com/ru/post/fr442662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442650/index.html">Analyse et optimisation des applications React</a></li>
<li><a href="../fr442652/index.html">Utilisation de Fastify et de Preact pour prototyper rapidement des applications Web</a></li>
<li><a href="../fr442654/index.html">Passer Ã  Next.js et accÃ©lÃ©rer 7,5 fois le chargement de la page d'accueil de manifold.co</a></li>
<li><a href="../fr442658/index.html">8 astuces pour travailler avec CSS: parallaxe, pied de page collant et autres</a></li>
<li><a href="../fr442660/index.html">MathÃ©matiques rÃ©conciliant Newton avec le monde quantique</a></li>
<li><a href="../fr442664/index.html">QIWI Kitchen 6 fÃ©vrier - comment c'Ã©tait + prÃ©sentations des confÃ©renciers</a></li>
<li><a href="../fr442666/index.html">Post-post, mÃ©ta-mÃ©ta. Nous apprenons Ã  Ã©crire sur Habr</a></li>
<li><a href="../fr442668/index.html">Carte Intel SGX. Chaque serveur mÃ©rite son SGX</a></li>
<li><a href="../fr442670/index.html">Carsten Zero se produira aux PHDays 9</a></li>
<li><a href="../fr442672/index.html">Comment donner votre avis: 9 rÃ¨gles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>