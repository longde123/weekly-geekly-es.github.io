<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅ ๐ ๐ด๐ฟ DMA: ุงูุฎุฑุงูุงุช ูุงููุงูุน ๐ ๐ โ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ูู ููุงู ุณุงุจู ( "ุงูุฌุฒุก 2: ุงุณุชุฎุฏุงู ูุชู Cypress PSoC UDB ูุชูููู ุนุฏุฏ ุงูููุงุทุนุงุช ูู ุทุงุจุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ" ) ุ ูุงุญุธุช ุฅุญุฏู ุงูุญูุงุฆู ุงููููุฉ ุฌุฏูุง: ุฅุฐุง ุฃุฒ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DMA: ุงูุฎุฑุงูุงุช ูุงููุงูุน</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437112/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/m4/12/q3/m412q3b8zbug620xzvv0the7ix0.jpeg"><br><br><h2 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h2><br>  ูู ููุงู ุณุงุจู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุฌุฒุก 2: ุงุณุชุฎุฏุงู ูุชู Cypress PSoC UDB ูุชูููู ุนุฏุฏ ุงูููุงุทุนุงุช ูู ุทุงุจุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ"</a> ) ุ ูุงุญุธุช ุฅุญุฏู ุงูุญูุงุฆู ุงููููุฉ ุฌุฏูุง: ุฅุฐุง ุฃุฒุงู ุฌูุงุฒ ูู UDB ุงูุจูุงูุงุช ูู FIFO ุจุณุฑุนุฉ ูุจูุฑุฉ ุ ููุฏ ุชูููุช ูู ููุงุญุธุฉ ุงูุญุงูุฉ ุงูุชู ุชุดูุฑ ุฅูู ูุฌูุฏ ุฌุฏูุฏ ูุง ุชูุฌุฏ ุจูุงูุงุช ูู FIFO ุ ูุจุนุฏ ุฐูู ูุฐูุจ ุฅูู ุญุงูุฉ <b>ุงูุฎููู</b> ุงูุฎุงุทุฆ.  ุจุงูุทุจุน ุ ููุช ููุชููุง ุจูุฐู ุงูุญูููุฉ.  ููุฏ ุฃุธูุฑุช ุงููุชุงุฆุฌ ุงูููุชูุญุฉ ููุฌููุนุฉ ูู ูุนุงุฑูู.  ุฃุฌุงุจ ุดุฎุต ูุงุญุฏ ุฃู ูู ูุฐุง ูุงู ูุงุถุญูุง ุชูุงููุง ุ ุจู ูุณูู ุงูุฃุณุจุงุจ.  ูู ููู ุงูุจุงูู ุฃูู ุฏูุดุฉ ููุง ููุช ุนููู ูู ุจุฏุงูุฉ ุงูุจุญุซ.  ูู ูุฌุฏ ุจุนุถ ุงูุฎุจุฑุงุก ุดูุฆูุง ุฌุฏูุฏูุง ููุง ุ ููู ุณูููู ูู ุงูุฌูุฏ ุชูุฏูู ูุฐู ุงููุนูููุงุช ูุนุงูุฉ ุงููุงุณ ุญุชู ูุฑุงุนููุง ุฌููุน ุงููุจุฑูุฌูู ูู ูููุฑูููุชุฑููุฑ. <br><a name="habracut"></a><br>  ููุณ ูุฐุง ูุงู ุงูููุงุฑ ููุน ูู ุงูุชุบุทูุฉ.  ุงุชุถุญ ุฃู ูู ูุฐุง ุชู ุชูุซููู ุฌูุฏูุง ุ ูููู ุงููุดููุฉ ูู ุฃูู ููุณ ุจุดูู ุฑุฆูุณู ุ ูููู ูู ูุณุชูุฏุงุช ุฅุถุงููุฉ.  ูุดุฎุตู ุ ููุช ูู ุฌูู ุณุนูุฏ ุ ูุนุชูุฏูุง ุฃู DMA ูู ูุธุงู ูุฑุนู ุฐูู ููุบุงูุฉ ููููู ุฒูุงุฏุฉ ููุงุกุฉ ุงูุจุฑุงูุฌ ุจุดูู ูุจูุฑ ุ ุญูุซ ููุฌุฏ ููู ูููุฌู ููุจูุงูุงุช ุฏูู ุชุดุชูุช ุฒูุงุฏุฉ ุงูุชุณุฌูู ูุชูุธูู ุงูุฏูุฑุฉ ุฅูู ููุณ ุงูุฃูุงูุฑ.  ุจุงููุณุจุฉ ูุชุญุณูู ุงูููุงุกุฉ - ูู ุดูุก ุญูููู ุ ูููู ุจุณุจุจ ุฃุดูุงุก ูุฎุชููุฉ ููููุงู. <br><br>  ููู ุฃูู ุงูุฃุดูุงุก ุฃููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุฌุงุฑุจ ูุน ุงูุณุฑู PSoC </h2><br>  ููุตูุน ุขูุฉ ุจุณูุทุฉ.  ุณูููู ููุง ุญุงูุชุงู ูุดุฑูุทุชุงู: ุญุงูุฉ ุงูุฎููู ูุงูุญุงูุฉ ุงูุชู ุณุชูุน ูููุง ุนูุฏูุง ูููู ููุงู ุจุงูุช ูุงุญุฏ ุนูู ุงูุฃูู ูู ุงูุจูุงูุงุช ูู FIFO.  ุนูุฏ ุงูุฏุฎูู ุฅูู ูุฐู ุงูุญุงูุฉ ุ ุณูุฃุฎุฐ ูุฐู ุงูุจูุงูุงุช ุจุจุณุงุทุฉ ุ ุซู ููุดู ูุฑุฉ ุฃุฎุฑู ูู ุญุงูุฉ ุฑุงุญุฉ.  ูููุฉ "ูุดุฑูุทุฉ" ูู ุฃุฐูุฑูุง ุจุทุฑูู ุงูุฎุทุฃ.  ูุฏููุง FIFOs ุ ูุฐูู ุณุฃููู ุจุฅูุดุงุก ุญุงูุชูู ุ ูุงุญุฏุฉ ููู FIFO ุ ููุชุฃูุฏ ูู ุฃููุง ูุชุทุงุจูุฉ ุชูุงููุง ูู ุงูุณููู.  ุชุญูู ุฑุณู ุจูุงูู ุงูุงูุชูุงู ููุฌูุงุฒ ูุซู ูุฐุง: <br><br><img src="https://habrastorage.org/webt/pv/cu/1q/pvcu1qmbxk9zkbgxk8u51unthpe.png"><br><br>  ูุชู ุชุนุฑูู ุฅุดุงุฑุงุช ุงูุฎุฑูุฌ ูู ุญุงูุฉ ุงูุฎููู ููุง ููู: <br><br><img src="https://habrastorage.org/webt/h8/re/rp/h8rerphupbsfvawmjiwgwqr_thw.png"><br><br>  ูุง ุชูุณู ุฅุฑุณุงู ุจุชุงุช ุฑูู ุงูุญุงูุฉ ุฅูู ูุฏุฎูุงุช Datapath: <br><br><img src="https://habrastorage.org/webt/ze/dz/ab/zedzab8iuaoxnu0esg32xwwga3g.png"><br><br>  ุฅูู ุงูุฎุงุฑุฌ ุ ูููู ุจุฅุฎุฑุงุฌ ูุฌููุนุชูู ูู ุงูุฅุดุงุฑุงุช: ุฒูุฌ ูู ุงูุฅุดุงุฑุงุช ุงูุชู ุชุชูุชุน FIFO ุจูุณุงุญุฉ ุญุฑุฉ (ุญุชู ูุชููู DMA ูู ุจุฏุก ุชุญููู ุงูุจูุงูุงุช ุฅูููุง) ุ ูุงุซููู ูู ุงูุฅุดุงุฑุงุช ุงูุชู ุชููู FIFO ูุงุฑุบุฉ (ูุนุฑุถ ูุฐู ุงูุญูููุฉ ุนูู ูุฑุณูุฉ ุงูุฐุจุฐุจุงุช). <br><br><img src="https://habrastorage.org/webt/ts/bm/dn/tsbmdn-puyugsmixnsipf81pboa.png"><br><br>  ุณูู ALU ุจุจุณุงุทุฉ ุชุฃุฎุฐ ููููุฉ ูู ุงูุจูุงูุงุช FIFO: <br><br><img src="https://habrastorage.org/webt/px/5s/_w/px5s_wj1zqwjedrk0h7ty7tbu_4.png"><br><br>  ุงุณูุญ ูู ุจุนุฑุถ ุชูุงุตูู ุงูุญุงูุฉ "0001": <br><br><img src="https://habrastorage.org/webt/mb/-s/j0/mb-sj05-chkdijmqn3mue8hmjnk.png"><br><br>  ููุช ุฃูุถูุง ุจุชุนููู ุนุฑุถ ุงููุงูู ุ ุงูุฐู ูุงู ูู ุงููุดุฑูุน ุงูุฐู ูุงุญุธุช ููู ูุฐุง ุงูุชุฃุซูุฑ ุ 16 ุจุช: <br><br><img src="https://habrastorage.org/webt/sa/hc/br/sahcbrgearj6wnw5-4lykaew1qy.png"><br><br>  ููุชูู ุฅูู ูุฎุทุท ุงููุดุฑูุน ููุณู.  ุธุงูุฑููุง ุ ูุง ุฃุนุทู ุฅุดุงุฑุงุช ุชุดูุฑ ุฅูู ุฃู FIFO ูุงุฑุบุฉ ูุญุณุจ ุ ูููู ุฃูุถูุง ูุจุถุงุช ุงูุณุงุนุฉ.  ูุฐุง ุณูุณูุญ ูู ุฃู ุฃูุนู ุฏูู ููุงุณุงุช ุงููุคุดุฑ ุนูู ุงูุฐุจุฐุจุงุช.  ูููููู ููุท ุงุชุฎุงุฐ ุชุฏุงุจูุฑ ุจุฅุตุจุนู. <br><br><img src="https://habrastorage.org/webt/b-/8v/iq/b-8viqzbm1isamdkiljvmwevwme.png"><br><br>  ุนูู ูุง ูุจุฏู ุ ููุฏ ุชูุฏูุช ุณุฑุนุฉ 24 ููุฌุง ูุฑุชุฒ.  ุชุฑุฏุฏ ุงููุนุงูุฌ ุงูุฃุณุงุณู ูู ููุณู ุชูุงููุง.  ูููุง ูุงู ุงูุชุฑุฏุฏ ุฃูู ุ ูุงู ุงูุชุฏุงุฎู ุฃูู ูู ุงูุฐุจุฐุจุงุช ุงูุตูููุฉ (ุฑุณูููุง ูุฏูู ูุทุงู 250 ููุฌุงูุฑุชุฒ ุ ูููู ุจุนุฏ ุฐูู ููุบุงููุฑุชุฒ ุตููู) ุ ูุณูุชู ุฅุฌุฑุงุก ุฌููุน ุงูููุงุณุงุช ูููุง ูุชุนูู ุจูุจุถุงุช ุงูุณุงุนุฉ.  ูููุง ูุงู ุงูุชุฑุฏุฏ ุ ูุฅู ุงููุธุงู ูุง ูุฒุงู ูุนูู ูููุง ูุชุนูู ุจูุง.  ููุช ุณุฃุญุฏุฏ ููุฌุงูุฑุชุฒ ูุงุญุฏ ุ ููู ุจูุฆุฉ ุงูุชุทููุฑ ููุนุชูู ูู ุฅุฏุฎุงู ูููุฉ ุชุฑุฏุฏ ุฃุณุงุณูุฉ ูููุนุงูุฌ ุฃูู ูู 24 ููุฌุงูุฑุชุฒ. <br><br>  ุงูุขู ุงุฎุชุจุงุฑ ุงูุงุดูุงุก.  ูููุชุงุจุฉ ุฅูู FIFO0 ุ ููุช ุจูุฐู ุงููุธููุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">void WriteTo0FromROM() { static const uint16 steps[] = { 0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001, 0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001 }; //  DMA  ,      uint8 channel = DMA_0_DmaInitialize (sizeof(steps[0]),1,HI16(steps),HI16(JustReadFromFIFO_1_Datapath_1_F0_PTR)); CyDmaChRoundRobin (channel,1); //       ,       uint8 td = CyDmaTdAllocate(); //       .  ,    . CyDmaTdSetConfiguration(td, sizeof(steps), CY_DMA_DISABLE_TD, TD_INC_SRC_ADR / TD_AUTO_EXEC_NEXT); //       CyDmaTdSetAddress(td, LO16((uint32)steps), LO16((uint32)JustReadFromFIFO_1_Datapath_1_F0_PTR)); //      CyDmaChSetInitialTd(channel, td); //         CyDmaChEnable(channel, 1); }</code> </pre> <br>  ุชุฑุฌุน ูููุฉ ROM ูู ุงุณู ุงููุธููุฉ ุฅูู ุญูููุฉ ุฃู ุงูุตููู ุงูุฐู ุณูุชู ุฅุฑุณุงูู ูุชู ุชุฎุฒููู ูู ููุทูุฉ ROM ุ ูุฃู Cortex M3 ุจููุฏุณุฉ ูุงุฑูุงุฑุฏ.  ูุฏ ุชุฎุชูู ุณุฑุนุฉ ุงููุตูู ุฅูู ูุงูู RAM ูุญุงููุฉ ROM ุ ุฃุฑุฏุช ุงูุชุญูู ูู ุฐูู ุ ูุฐูู ูุฏู ูุธููุฉ ููุงุซูุฉ ูุฅุฑุณุงู ุตููู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (ูุง ุชุญุชูู ูุตูููุฉ <b>ุงูุฎุทูุงุช</b> ุนูู ูุนุฏู <b>ุซุงุจุช ุซุงุจุช ูู ูุตูุง</b> ).  ุญุณููุง ุ ููุงู ููุณ ูุธุงุฆู ุงูุฅุฑุณุงู ููุฅุฑุณุงู ุฅูู FIFO1 ุ ูุฎุชูู ุณุฌู ุงููุชููู ููุงู: ููุณ F0 ุ ููู F1.  ุฎูุงู ุฐูู ุ ุฌููุน ูุธุงุฆู ูุชุทุงุจูุฉ.  ุจูุง ุฃููู ูู ุฃูุงุญุธ ุงุฎุชูุงููุง ูุจูุฑูุง ูู ุงููุชุงุฆุฌ ุ ูุณุฃูุธุฑ ูู ูุชุงุฆุฌ ุงุณุชุฏุนุงุก ุงููุธููุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ุชูุงููุง.  ุดุนุงุน ุฃุตูุฑ ููุจุถ ุจุงูุณุงุนุฉ ุ ุฎุฑุฌ ุฃุฒุฑู <b>FIFO0empty</b> . <br><br><img src="https://habrastorage.org/webt/ko/65/0j/ko650jp1nj58h1nm5dzal4bzdhw.png"><br><br>  ุฃููุงู ุ ุชุญูู ูู ูุนููููุฉ ุณุจุจ ุชุนุจุฆุฉ FIFO ุนูู ูุฏุงุฑ ุฏูุฑุชูู ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ.  ุฏุนููุง ูุฑู ูุฐุง ุงููููุน ุจูุฒูุฏ ูู ุงูุชูุงุตูู: <br><br><img src="https://habrastorage.org/webt/ox/fi/x_/oxfix_l8jpspyxgbiumrlagm9ma.png"><br><br>  ุนูู ุงูุญุงูุฉ 1 ุ ุชูุน ุงูุจูุงูุงุช ูู FIFO ุ ูุณูุท ุงูุนูู <b>FIFO0enmpty</b> .  ุนูู ุงูุญุงูุฉ 2 ุ ูุฏุฎู <b>ุงูุฅููุงู</b> ุงูุชููุงุฆู ูู ุญุงูุฉ <b>GetDataFromFifo1</b> .  ุนูู ุงูุญุงูุฉ 3 ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ูุณุฎ ุจูุงูุงุช FIFO ุฅูู ุณุฌู ALU ุ ูุชู ุฅูุฑุงุบ FIFO ุ ููุชู <b>ุฑูุน</b> ุนูุงูุฉ <b>FIFO0 ูุงุฑุบุฉ</b> .  ุจูุนูู ุฃู ุงูุดูู ุงูููุฌู ูุชุตุฑู ุจุดูู ูุนููู ุ ููููู ุงูุงุนุชูุงุฏ ุนููู ูู ุฏูุฑุฉ ุงูุณุงุนุฉ.  ูุญุตู ุนูู 9 ูุทุน. <br><br><img src="https://habrastorage.org/webt/fc/mq/bj/fcmqbjhfee7mf7u7_xnkgyspq18.png"><br><br>  <b>ูู ุงููุฌููุน ุ ูู ุงูููุทูุฉ ุงูุชู ุชู ูุญุตูุง ุ ูุณุชุบุฑู 9 ุฏูุฑุงุช ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ ููุณุฎ ูููุฉ ูุงุญุฏุฉ ูู ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุฅูู UDB ุจุงุณุชุฎุฏุงู DMA.</b> <br><br>  ูุงูุขู ููุณ ุงูุดูุก ุ ูููู ุจูุณุงุนุฏุฉ ุฌููุฑ ุงููุนุงูุฌ.  ุฃููุงู ุ ุฑูุฒ ูุซุงูู ูุตุนุจ ุชุญูููู ูู ุงูุญูุงุฉ ุงููุงูุนูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> volatile uint16_t* ptr = (uint16_t*)JustReadFromFIFO_1_Datapath_1_F0_PTR; ptr[0] = 0; ptr[0] = 0;</code> </pre><br>  ูุง ุณูู ูุชุญูู ุฅูู ุฑูุฒ ุงูุชุฌููุน: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ldr r3, [pc, #8] ; (90 &lt;main+0xc&gt;) movs r2, #0 strh r2, [r3, #0] strh r2, [r3, #0] bn 8e &lt;main+0xa&gt; .word 0x40006898</code> </pre><br>  ูุง ููุงุตู ุ ูุง ุฏูุฑุงุช ุฅุถุงููุฉ.  ุงุซููู ูู ุฃุฒูุงุฌ ูู ุงูุชุฏุงุจูุฑ ูู ุตู ูุงุญุฏ ... <br><br><img src="https://habrastorage.org/webt/ms/po/gq/mspogqifm21mt0o34s0ltbh1fyu.png"><br><br>  ููุฌุนู ุงูููุฏ ุฃูุซุฑ ูุงูุนูุฉ (ูุน ุงูุญูู ุงูุนุงู ูุชูุธูู ุงูุฏูุฑุฉ ูุฌูุจ ุงูุจูุงูุงุช ูุฒูุงุฏุฉ ุงููุคุดุฑุงุช): <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">void SoftWriteTo0FromROM() { //         . //         static const uint16 steps[] = { 0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001, 0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001,0x0001 }; uint16_t* src = steps; volatile uint16_t* dest = (uint16_t*)JustReadFromFIFO_1_Datapath_1_F0_PTR; for (int i=sizeof(steps)/sizeof(steps[0]);i&gt;0;i--) { *dest = *src++; } }</code> </pre><br>  ุฑูุฒ ุงููุฌููุน ุงููุณุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ldr r3, [pc, #14] ; (9c &lt;CYDEV_CACHE_SIZE&gt;) ldr r0, [pc, #14] ; (a0 &lt;CYDEV_CACHE_SIZE+0x4&gt;) add.w r1, r3, #28 ; 0x28 ldrh.w r2, [r3], #2 cmp r3, r1 strh r2, [r0, #0] bne.n 8e &lt;main+0xa&gt;</code> </pre><br>  ุนูู ุฑุณู ุงูุฐุจุฐุจุงุช ูุฑู 7 ุฏูุฑุงุช ููุท ููู ุฏูุฑุฉ ููุงุจู ุชุณุน ูู ุญุงูุฉ DMA: <br><br><img src="https://habrastorage.org/webt/h5/5k/y0/h55ky0f4pfsfaco90dvfgahwwki.png"><br><br><h2 style=";text-align:right;direction:rtl">  ููููุง ุนู ุงูุฃุณุทูุฑุฉ </h2><br>  ุฃู ูููู ุตุงุฏููู ุ ุจุงููุณุจุฉ ูู ูุงู ูู ุงูุฃุตู ุตุฏูุฉ.  ุงุนุชุฏุช ุจุทุฑููุฉ ูุง ุนูู ุงูุงุนุชูุงุฏ ุจุฃู ุขููุฉ DMA ุชุณูุญ ูู ุจููู ุงูุจูุงูุงุช ุจุณุฑุนุฉ ูููุงุกุฉ.  1/9 ูู ุชุฑุฏุฏ ุงูุญุงููุฉ ููุณุช ุจูุฐู ุงูุณุฑุนุฉ.  ููู ุงุชุถุญ ุฃู ูุง ุฃุญุฏ ูุงู ูุฎูููุง.  ุชุญุชูู ูุซููุฉ TRM ุงูุฎุงุตุฉ ุจู PSoC 5LP ุนูู ุนุฏุฏ ูู ุงูุงุนุชุจุงุฑุงุช ุงููุธุฑูุฉ ุ ูุชุตู ุงููุซููุฉ "AN84810 - PSoC 3 ู PSoC 5LP Advanced DMA Topics" ุจุงูุชูุตูู ุนูููุฉ ุงููุตูู ุฅูู DMA.  ุงููููู ูู ุงูุณุจุจ.  ุชุฃุฎุฐ ุฏูุฑุฉ ุงูุชุจุงุฏู ูุน ุงููุงูู ุนุฏุฏูุง ูุนูููุง ูู ุนูุงูุงุช ุงูุชุฌุฒุฆุฉ.  ูู ุงููุงูุน ุ ูุฐู ุงูุชุฏุงุจูุฑ ูู ุงูุชู ุชูุนุจ ุฏูุฑุง ุญุงุณูุง ูู ุญุฏูุซ ุชุฃุฎูุฑ.  ุจุดูู ุนุงู ุ ูุง ุฃุญุฏ ูุฎูู ุฃู ุดูุก ุ ูููู ุนููู ุฃู ุชุนุฑู ูุฐุง. <br><br>  <b>ุฅุฐุง ูุงู GPIF ุงูุดููุฑ ุงููุณุชุฎุฏู ูู FX2LP (ุจููุฉ ุฃุฎุฑู ุชู ุชุตููุนูุง ุจูุงุณุทุฉ Cypress) ูุง ูุญุฏ ูู ุฃู ุดูุก ุ ูุฅู ุงูุญุฏ ุงูุฃูุตู ููุณุฑุนุฉ ููุง ูุฑุฌุน ุฅูู ุงููููู ุงูุฐู ูุญุฏุซ ุนูุฏ ุงููุตูู ุฅูู ุงูุญุงููุฉ.</b> <br><br><h2 style=";text-align:right;direction:rtl">  DMA ุชุญูู ุนูู STM32 </h2><br>  ููุฏ ุชุฃุซุฑุช ูุฏุฑุฌุฉ ุฃููู ูุฑุฑุช ุฅุฌุฑุงุก ุชุฌุฑุจุฉ ุนูู STM32.  ุชู ุฃุฎุฐ STM32F103 ูู ููุณ ุงููุนุงูุฌ ููุฑุชููุณ M3 ูุฃุฑูุจ ุชุฌุฑูุจู.  ูุง ูุญุชูู ุนูู UDB ุงูุชู ูููู ุงุดุชูุงู ุฅุดุงุฑุงุช ุงูุฎุฏูุฉ ูููุง ุ ููู ูู ุงููููู ุงูุชุญูู ูู DMA.  ูุง ูู GPIOุ  ูุฐู ูุฌููุนุฉ ูู ุงูุณุฌูุงุช ูู ูุณุงุญุฉ ุงูุนููุงู ุงูุนุงูุฉ.  ูุฐุง ุฌูุฏ  ูููู ุจุชูููู DMA ูู ูุถุน ูุณุฎ "ุงูุฐุงูุฑุฉ - ุงูุฐุงูุฑุฉ" ุ ูุน ุชุญุฏูุฏ ุงูุฐุงูุฑุฉ ุงูุญููููุฉ (ROM ุฃู RAM) ููุตุฏุฑ ุ ูุชุณุฌูู ุจูุงูุงุช GPIO ุฏูู ุฒูุงุฏุฉ ุงูุนููุงู ููุณุชูุจู.  ุณูู ูุฑุณู ููุงู ุจุงูุชูุงูุจ ุฅูุง 0 ุฃู 1 ุ ููุตูุญ ุงููุชูุฌุฉ ูุน ุงูุฐุจุฐุจุงุช.  ููุจุฏุก ุ ุงุฎุชุฑุช ุงููููุฐ B ุ ููุงู ูู ุงูุฃุณูู ุงูุงุชุตุงู ุจู ุนูู ุงูููุญ. <br><br><img src="https://habrastorage.org/webt/od/u2/es/odu2esatrpusmpi8od4ecfaftk8.png"><br><br>  ููุฏ ุงุณุชูุชุนุช ุญููุง ุจุฅุญุตุงุก ุงูุฅุฌุฑุงุกุงุช ุจุฅุตุจุน ูููุณ ูุคุดุฑุงุช.  ูู ูู ุงููููู ุฃู ุชูุนู ุงูุดูุก ููุณู ุนูู ูุญุฏุฉ ุงูุชุญูู ูุฐูุ  ุชูุงูุง!  ุฎุฐ ุชุฑุฏุฏ ุงูุณุงุนุฉ ุงููุฑุฌุนู ูุฐุฑุงุน ุงูุฐุจุฐุจุฉ ูู ุงูุถูุน MCO ุ ุงููุชุตู ุจูููุฐ PA8 ุนูู STM32F10C8T6.  ุงุฎุชูุงุฑ ูุตุงุฏุฑ ูุฐู ุงูุจููุฑุฉ ุงูุฑุฎูุตุฉ ููุณ ุฑุงุฆุนูุง (ููุณ STM32F103 ุ ููููู ุฃูุซุฑ ุฅุซุงุฑุฉ ููุฅุนุฌุงุจ ุ ููู ูููุฑ ุฎูุงุฑุงุช ุฃูุซุฑ ุจูุซูุฑ) ุ ุณูุฑุณู ุฅุดุงุฑุฉ SYSCLK ุฅูู ูุฐุง ุงูุฅุฎุฑุงุฌ.  ูุธุฑูุง ูุฃูู ูุง ูููู ุฃู ูููู ุงูุชุฑุฏุฏ ุนูู MCO ุฃุนูู ูู 50 MHz ุ ูุณูุฎูุถ ุณุฑุนุฉ ุณุงุนุฉ ุงููุธุงู ุงูุฅุฌูุงููุฉ ุฅูู 48 MHz.  ุณูููู ุจุถุฑุจ ุชุฑุฏุฏ ููุงุฑุชุฒ MHz 8 ููุณ ุจ 9 ุ ูููู ุจ 6 (ููุฐ 6 * 8 = 48): <br><br><img src="https://habrastorage.org/webt/0x/de/1a/0xde1acpu3rpgslyseaw2kcysc4.png"><br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุณ ุงููุต:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">void SystemClock_Config(void) { RCC_OscInitTypeDef RCC_OscInitStruct; RCC_ClkInitTypeDef RCC_ClkInitStruct; RCC_PeriphCLKInitTypeDef PeriphClkInit; /**Initializes the CPU, AHB and APB busses clocks */ RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE; RCC_OscInitStruct.HSEState = RCC_HSE_ON; RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1; RCC_OscInitStruct.HSIState = RCC_HSI_ON; RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON; RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE; // RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9; RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL6; if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK) { _Error_Handler(__FILE__, __LINE__); }</code> </pre><br></div></div><br>  ุณูููู <b>ุจุจุฑูุฌุฉ</b> MCO ุจุงุณุชุฎุฏุงู ููุชุจุฉ <b>mcucpp</b> ูู Konstantin <b>Chizhov</b> (ูู ุงูุขู ูุตุงุนุฏูุง <b>ุณุฃุฌุฑู</b> ุฌููุน ุงูููุงููุงุช ุฅูู ุงููุนุฏุงุช ูู ุฎูุงู ูุฐู ุงูููุชุจุฉ ุงูุฑุงุฆุนุฉ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> //  MCO Mcucpp::Clock::McoBitField::Set (0x4); //   MCO    Mcucpp::IO::Pa8::SetConfiguration (Mcucpp::IO::Pa8::Port::AltFunc); //     Mcucpp::IO::Pa8::SetSpeed (Mcucpp::IO::Pa8::Port::Fastest);</code> </pre><br>  ุญุณููุง ุ ููุฏ ูููุง ุงูุขู ุจุชุนููู ุฅุฎุฑุงุฌ ุตููู ุงูุจูุงูุงุช ูู GPIOB: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">typedef Mcucpp::IO::Pb0 dmaTest0; typedef Mcucpp::IO::Pb1 dmaTest1; ... //  GPIOB      dmaTest0::ConfigPort::Enable(); dmaTest0::SetDirWrite(); dmaTest1::ConfigPort::Enable(); dmaTest1::SetDirWrite(); uint16_t dataForDma[]={0x0000,0x8001,0x0000,0x8001,0x0000, 0x8001,0x0000,0x8001,0x0000,0x8001,0x0000,0x8001,0x0000,0x8001}; typedef Mcucpp::Dma1Channel1 channel; //    dmaTest1::Set(); dmaTest1::Clear(); dmaTest1::Set(); // ,    DMA channel::Init (channel::Mem2Mem|channel::MSize16Bits|channel::PSize16Bits|channel::PeriphIncriment,(void*)&amp;GPIOB-&gt;ODR,dataForDma,sizeof(dataForDma)/2); while (1) { } }</code> </pre><br>  ุฅู ุงูุดูู ุงูููุฌู ุงููุงุชุฌ ูุดุงุจู ุฌุฏูุง ูุชูู ุงูููุฌูุฏุฉ ูู PSoC. <br><br><img src="https://habrastorage.org/webt/ee/nl/2i/eenl2ix0_9zgzgaaxxeffbjzwjk.png"><br><br>  ูู ุงููุณุท ุณูุงู ุฃุฒุฑู ูุจูุฑ.  ูุฐู ูู ุนูููุฉ ุชููุฆุฉ DMA.  ูุฑุฏุช ุงููุจุถุงุช ุงูุฒุฑูุงุก ุนูู ุงููุณุงุฑ ุจุญุชุฉ ุจูุงุณุทุฉ ุงูุจุฑูุงูุฌ ุนูู PB1.  ุชูุฏุฏูู ุนูู ูุทุงู ุฃูุณุน: <br><br><img src="https://habrastorage.org/webt/9l/y8/tp/9ly8tp_8hj1vohrh6jcnyktfa_a.png"><br><br>  2 ุชุฏุงุจูุฑ ููู ูุจุถุฉ.  ุชุดุบูู ุงููุธุงู ููุง ูู ูุชููุน.  ูููู ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุงููุณุงุญุฉ ุงูุฃูุจุฑ ุงููุญุฏุฏุฉ ูู ุงูุดูู ุงูููุฌู ุงูุฑุฆูุณู ุจุฎูููุฉ ุฒุฑูุงุก ุฏุงููุฉ.  ูู ูุฐู ุงููุฑุญูุฉ ุ ุชุนูู ูุชูุฉ DMA ุจุงููุนู. <br><br><img src="https://habrastorage.org/webt/jw/fu/ds/jwfudsdqtgwfunc3htoczgrw5eg.png"><br><br>  10 ุฏูุฑุงุช ููู ุชุบููุฑ ุฎุท GPIO.  ูู ุงููุงูุน ุ ูุฐูุจ ุงูุนูู ูุน ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ููุชู ุชูููุฐ ุงูุจุฑูุงูุฌ ูู ุฏูุฑุฉ ุซุงุจุชุฉ.  ูุง ุชูุฌุฏ ููุงููุงุช ุฅูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ูู ุฌููุฑ ุงููุนุงูุฌ.  ุงูุญุงููุฉ ูู ุชูุงูุง ุชุญุช ุชุตุฑู ูุญุฏุฉ DMA ุ ูููู 10 ุฏูุฑุงุช.  ููู ูู ุงููุงูุน ุ ูุง ุชุฎุชูู ุงููุชุงุฆุฌ ุงุฎุชูุงููุง ูุจูุฑูุง ุนู ุชูู ุงูุชู ุชุธูุฑ ุนูู PSoC ุ ูุฐูู ููุท ุงุจุฏุฃ ูู ุงูุจุญุซ ุนู ููุงุญุธุงุช ุงูุชุทุจูู ุงููุชุนููุฉ ุจู DMA ุนูู STM32.  ูุงู ููุงู ุงูุนุฏูุฏ ูููู.  ููุฌุฏ AN2548 ุนูู F0 / F1 ุ ูููุงู AN3117 ุนูู L0 / L1 / L3 ุ ูููุงู AN4031 ุนูู F2 / F4 / F77.  ุฑุจูุง ููุงู ุจุนุถ ุฃูุซุฑ ... <br><br>  ูููู ุ ูุน ุฐูู ุ ูุฑู ูููู ููุง ุ ุฃูุถูุง ุ ุงููููู ูู ุงูุณุจุจ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ูุตูู ูุฌููุนุฉ F103 ุฅูู ุงูุญุงููุฉ ุจุงุณุชุฎุฏุงู DMA ุฃูุฑ ูุณุชุญูู.  ุฅููุง ููููุฉ ูู F4 ุ ููู ููุณ ุฃูุซุฑ ูู ุฃุฑุจุน ูููุงุช.  ุซู ูุฑุฉ ุฃุฎุฑู ุณูู ุชูุดุฃ ูุดููุฉ ุงููููู. <br><br>  ุฏุนููุง ูุญุงูู ุชูููุฐ ููุณ ุงูุฅุฌุฑุงุกุงุช ุ ูููู ุจูุณุงุนุฏุฉ ุณุฌู ุงูุจุฑูุงูุฌ.  ุฃุนูุงู ุ ุฑุฃููุง ุฃู ุงูุชุณุฌูู ุงููุจุงุดุฑ ุฅูู ุงูููุงูุฐ ูุฐูุจ ุนูู ุงูููุฑ.  ููู ูุงู ููุงู ุณุฌู ูุซุงูู.  ุงูุตููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//    dmaTest1::Set(); dmaTest1::Clear(); dmaTest1::Set();</code> </pre><br>  ูุน ูุฑุงุนุงุฉ ุฅุนุฏุงุฏุงุช ุงูุชุญุณูู ูุฐู (ูุฌุจ ุนููู ุชุญุฏูุฏ ุงูุชุญุณูู ููููุช): <br><br><img src="https://habrastorage.org/webt/zz/cs/vt/zzcsvtte2m06u7tzhkfefvfa8wg.png"><br><br>  ุชุญููุช ุฅูู ุฑูุฒ ุงููุฌูุน ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> STR r6,[r2,#0x00] MOV r0,#0x20000 STR r0,[r2,#0x00] STR r6,[r2,#0x00]</code> </pre><br>  ูู ุงููุณุฎ ุงูุญููููุฉ ุ ุณุชููู ููุงู ุฏุนูุฉ ูููุตุฏุฑ ุ ุฅูู ุงููุชููู ุ ุชุบููุฑ ูู ูุชุบูุฑ ุงูุญููุฉ ุ ุงููุชูุฑุนุฉ ... ุจุดูู ุนุงู ุ ุงููุซูุฑ ูู ุงูุญูู (ุงูุฐู ุ ููุง ูุนุชูุฏ ุ ููุบู DMA ููุท).  ูุงุฐุง ุณุชููู ุณุฑุนุฉ ุงูุชุบููุฑุงุช ูู ุงููููุงุกุ  ูุฐูู ุ ููุชุจ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">uint16_t* src = dataForDma; uint16_t* dest = (uint16_t*)&amp;GPIOB-&gt;ODR; for (int i=sizeof(dataForDma)/sizeof(dataForDma[0]);i&gt;0;i--) { *dest = *src++; }</code> </pre><br>  ูุชุญูู ุฑูุฒ C ++ ุฅูู ุฑูุฒ ุงูุชุฌููุน ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> MOVS r1,#0x0E LDRH r3,[r0],#0x02 STRH r3,[r2,#0x00] LDRH r3,[r0],#0x02 SUBS r1,r1,#2 STRH r3,[r2,#0x00] CMP r1,#0x00 BGT 0x080032A8</code> </pre><br>  ููุญู ูุญุตู ุนูู: <br><br><img src="https://habrastorage.org/webt/oj/m5/1d/ojm51d2qjhkz_rii2zfb4zvzdos.png"><br><br>  8 ุชุฏุงุจูุฑ ูู ุงููุตู ุงูุนููู ูู ุงูุฏูุฑุฉ ู 6 ูู ุงููุตู ุงูุณููู (ุฑุงุฌุนุช ุ ุชุชูุฑุฑ ุงููุชูุฌุฉ ูุฌููุน ูุชุฑุงุช ุงููุตู).  ูุดุฃ ุงููุฑู ูุฃู ุงููุญุณู ูุงู ุจุนูู ูุณุฎุชูู ููู ุชูุฑุงุฑ.  ูุฐูู ุ ูุชู ุฅุถุงูุฉ ุชุฏุจูุฑูู ูู ุฅุญุฏู ุงููุชุฑุงุช ุฅูู ุงูุนูููุฉ ุงููุฑุนูุฉ. <br><br>  <b>ุจูุนูู ุชูุฑูุจู ุ ูุน ูุณุฎ ุงูุจุฑุงูุฌ ุ ูุชู ุฅููุงู 14 ุฅุฌุฑุงุก ุนูู ูุณุฎ ูููุชูู ููุงุจู 20 ุชุฏุจูุฑุง ุนูู ููุณ ุงูุดูุก ุ ูููู ุจูุงุณุทุฉ DMA.</b>  <b>ุงููุชูุฌุฉ ููุซูุฉ ุชูุงููุง ุ ููููุง ุบูุฑ ูุชููุนุฉ ููุบุงูุฉ ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูู ููุฑุฃูุง ุจุนุฏ ุงูุฃุฏุจูุงุช ุงูููุชุฏุฉ.</b> <br><br>  ุฌูุฏ  ูููู ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุจุฏุฃุช ูู ูุชุงุจุฉ ุงูุจูุงูุงุช ูู ุฏูููู DMA ูู ููุช ูุงุญุฏุ  ูู ุณุฑุนุฉ ุณุชุณูุทุ  ูู ุจุชูุตูู ุงูุฃุดุนุฉ ุงูุฒุฑูุงุก ุจู PA0 ูุฃุนุฏ ูุชุงุจุฉ ุงูุจุฑูุงูุฌ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">typedef Mcucpp::Dma1Channel1 channel1; typedef Mcucpp::Dma1Channel2 channel2; // ,    DMA channel1::Init (channel1::Mem2Mem|channel1::MSize16Bits|channel1::PSize16Bits|channel1::PeriphIncriment,(void*)&amp;GPIOB-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel2::Init (channel2::Mem2Mem|channel2::MSize16Bits|channel2::PSize16Bits|channel2::PeriphIncriment,(void*)&amp;GPIOA-&gt;ODR,dataForDma,sizeof(dataForDma)/2);</code> </pre><br>  ุฃููุงู ุ ูููุญุต ุทุจูุนุฉ ุงููุจุถุงุช: <br><br><img src="https://habrastorage.org/webt/vu/ki/pg/vukipghxkaqqtxdnvz4a2qjp1wu.png"><br><br>  ุฃุซูุงุก ุถุจุท ุงูููุงุฉ ุงูุซุงููุฉ ุ ุชููู ุณุฑุนุฉ ุงููุณุฎ ููุฃูู ุฃุนูู.  ุซู ุ ุนูุฏ ุงููุณุฎ ูู ุฃุฒูุงุฌ ุ ุชูุฎูุถ ุงูุณุฑุนุฉ.  ุนูุฏ ุงูุงูุชูุงุก ูู ุงูููุงุฉ ุงูุฃููู ุ ุชุจุฏุฃ ุงูุซุงููุฉ ูู ุงูุนูู ุจุดูู ุฃุณุฑุน.  ูู ุดูุก ููุทูู ุ ูุจูู ููุท ููุนุฑูุฉ ููุฏุงุฑ ุงูุฎูุงุถ ุงูุณุฑุนุฉ ุจุงูุถุจุท. <br><br>  ุจูููุง ูุง ููุฌุฏ ุณูู ููุงุฉ ูุงุญุฏุฉ ุ ูุณุชุบุฑู ุงูุชุณุฌูู ูู 10 ุฅูู 12 ููุงุณูุง (ุงูุฃุฑูุงู ุชุทูู). <br><br><img src="https://habrastorage.org/webt/iw/1l/lk/iw1llkwh0nki1yczmva7gzxgrgk.png"><br><br>  ุฃุซูุงุก ุงูุชุนุงูู ุ ูุญุตู ุนูู 16 ุฏูุฑุฉ ููู ุณุฌู ูู ูู ูููุฐ: <br><br><img src="https://habrastorage.org/webt/f6/vf/o3/f6vfo3mgv4mpos2kdrrwmo9dzsm.png"><br><br>  ููุฐุง ูู ุ ููุณุช ุณุฑุนุฉ ุงููุตู.  ูููู ูุงุฐุง ูู ุจุฏุฃุช ุงููุชุงุจุฉ ูู ุซูุงุซุฉ ุฎููุท ูู ููุช ูุงุญุฏุ  ูุถูู ุงูุนูู ูุน PC15 ุ ูุธุฑูุง ูุฃู PC0 ูุง ูุชู ุฅุฎุฑุงุฌู (ููุฐุง ูู ุงูุณุจุจ ูู ุนุฏู ุฅุตุฏุงุฑ 0 ุ 1 ุ 0 ุ 1 ... ุ ูููู 0x0000ุ0x8001 ุ 0x0000 ุ 0x8001 ... ูู ุงูุตููู). <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">typedef Mcucpp::Dma1Channel1 channel1; typedef Mcucpp::Dma1Channel2 channel2; typedef Mcucpp::Dma1Channel3 channel3; // ,    DMA channel1::Init (channel1::Mem2Mem|channel1::MSize16Bits|channel1::PSize16Bits|channel1::PeriphIncriment,(void*)&amp;GPIOB-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel2::Init (channel2::Mem2Mem|channel2::MSize16Bits|channel2::PSize16Bits|channel2::PeriphIncriment,(void*)&amp;GPIOA-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel3::Init (channel3::Mem2Mem|channel3::MSize16Bits|channel3::PSize16Bits|channel3::PeriphIncriment,(void*)&amp;GPIOC-&gt;ODR,dataForDma,sizeof(dataForDma)/2);</code> </pre><br>  ุงููุชูุฌุฉ ููุง ุบูุฑ ูุชููุนุฉ ูุฏุฑุฌุฉ ุฃููู ุฃุทูุฆ ุงูุญุฒูุฉ ุงูุชู ุชุนุฑุถ ุชุฑุฏุฏ ุงูุณุงุนุฉ.  ููุณ ูุฏููุง ููุช ููููุงุณุงุช.  ูุญู ููุธุฑ ุฅูู ููุทู ุงูุนูู. <br><br><img src="https://habrastorage.org/webt/zo/u3/5s/zou35sqtetrlryln8lxe04tdkwy.png"><br><br>  ุญุชู ุชูุชูู ุงูููุงุฉ ุงูุฃููู ูู ุงูุนูู ุ ูู ุชุจุฏุฃ ุงูููุงุฉ ุงูุซุงูุซุฉ ูู ุงูุนูู.  ุซูุงุซ ูููุงุช ูู ููุณ ุงูููุช ูุง ุชุนูู!  ูููู ุงุณุชูุชุงุฌ ุดูุก ูุง ุญูู ูุฐุง ุงูููุถูุน ูู AppNote ุฅูู DMA ุ ุญูุซ ูุดูุฑ ุฅูู ุฃู F103 ูุฏูู ูุญุฑูุงู ููุท ูู ูุชูุฉ ูุงุญุฏุฉ (ููุญู ูููู ุจูุณุฎ ุจุงุณุชุฎุฏุงู ูุชูุฉ ูุงุญุฏุฉ ูู DMA ุ ูุงูุซุงูู ูู ุงูุฎููู ุงูุขู ุ ูุญุฌู ุงูููุงูุฉ ุจุงููุนู ุจุญูุซ ูููููู ุงุณุชุฎุฏุงููุง ุจุงููุนู ุฃูุง ูุณุช ูุฐูู.  ูุนูุฏ ูุชุงุจุฉ ูููุฐุฌ ุงูุจุฑูุงูุฌ ุญุชู ุชุจุฏุฃ ุงูููุงุฉ ุงูุซุงูุซุฉ ูุจู ุฃู ุดุฎุต ุขุฎุฑ: <br><br><img src="https://habrastorage.org/webt/bs/ld/kc/bsldkce9ztqrbk15x7e1omcharg.png"><br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุณ ุงููุต:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// ,    DMA channel3::Init (channel3::Mem2Mem|channel3::MSize16Bits|channel3::PSize16Bits|channel3::PeriphIncriment,(void*)&amp;GPIOC-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel1::Init (channel1::Mem2Mem|channel1::MSize16Bits|channel1::PSize16Bits|channel1::PeriphIncriment,(void*)&amp;GPIOB-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel2::Init (channel2::Mem2Mem|channel2::MSize16Bits|channel2::PSize16Bits|channel2::PeriphIncriment,(void*)&amp;GPIOA-&gt;ODR,dataForDma,sizeof(dataForDma)/2);</code> </pre><br></div></div><br>  ุณูู ุชุชุบูุฑ ุงูุตูุฑุฉ ุนูู ุงููุญู ุงูุชุงูู: <br><br><img src="https://habrastorage.org/webt/jg/wr/_2/jgwr_2kidbaoxg_-17muiyvo3n4.png"><br><br>  ุชู ุฅุทูุงู ุงูููุงุฉ ุงูุซุงูุซุฉ ุ ุญุชู ุฃููุง ุนููุช ูุน ุงูููุงุฉ ุงูุฃููู ุ ูููู ูุน ุฏุฎูู ุงูููุงุฉ ุงูุซุงููุฉ ุงูุนูู ุ ุชู ุงุณุชุจุฏุงู ุงูููุงุฉ ุงูุซุงูุซุฉ ุญุชู ุงูุชูุงู ุงูููุงุฉ ุงูุฃููู. <br><br><h2 style=";text-align:right;direction:rtl">  ููููุง ุนู ุงูุฃููููุงุช </h2><br>  ูู ุงููุงูุน ุ ุชุฑุชุจุท ุงูุตูุฑุฉ ุงูุณุงุจูุฉ ูุฃููููุงุช DMA ุ ููุงู ุจุนุถ.  ุฅุฐุง ูุงูุช ุฌููุน ูููุงุช ุงูุนูู ููุง ููุณ ุงูุฃููููุฉ ุ ูุณูุชู ุชุดุบูู ุฃุฑูุงููุง.  ุถูู ุฃููููุฉ ูุงุญุฏุฉ ูุนููุฉ ุ ูู ูุฏูู ุนุฏุฏ ุฃุตุบุฑ ูู ุงูุฐู ูู ุงูุฃููููุฉ.  ุฏุนูุง ูุฌุฑุจ ุงูููุงุฉ ุงูุซุงูุซุฉ ููุฅุดุงุฑุฉ ุฅูู ุฃููููุฉ ุนุงูููุฉ ูุฎุชููุฉ ุ ูุฑูุนูุง ููู ูู ุงููููุงุช ุงูุฃุฎุฑู (ุนูู ุทูู ุงูุทุฑูู ุ ุณูุฒูุฏ ุฃููููุฉ ุงูููุงุฉ ุงูุซุงููุฉ ุฃูุถูุง): <br><br><img src="https://habrastorage.org/webt/40/qo/c5/40qoc5ngwnq2tenzpmcc2ornd4w.png"><br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุณ ุงููุต:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">channel3::Init (channel3::PriorityVeryHigh|channel3::Mem2Mem|channel3::MSize16Bits|channel3::PSize16Bits|channel3::PeriphIncriment,(void*)&amp;GPIOC-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel1::Init (channel1::Mem2Mem|channel1::MSize16Bits|channel1::PSize16Bits|channel1::PeriphIncriment,(void*)&amp;GPIOB-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel2::Init (channel1::PriorityVeryHigh|channel2::Mem2Mem|channel2::MSize16Bits|channel2::PSize16Bits|channel2::PeriphIncriment,(void*)&amp;GPIOA-&gt;ODR,dataForDma,sizeof(dataForDma)/2);</code> </pre><br></div></div><br>  ุงูุขู ุฃูู ูู ุงุนุชุงุฏ ุฃู ูููู ุฃุฑูุน ุณูููู ูุญุฑููุง. <br><br><img src="https://habrastorage.org/webt/te/mq/_7/temq_7wguw109a0t-oi_rsi3jju.png"><br><br>  ุจุดูู ุฅุฌูุงูู ุ ูุฑู ุฃูู ุญุชู ูู ุงููุนุจ ูู ุงูุฃููููุงุช ุ ูุง ูููู ูู STM32F103 ุชุดุบูู ุฃูุซุฑ ูู ูุคุดุฑ ุชุฑุงุจุท ุนูู ูุชูุฉ DMA ูุงุญุฏุฉ.  ูู ุญูุซ ุงููุจุฏุฃ ุ ูููู ุชุดุบูู ุงูุฎูุท ุงูุซุงูุซ ุนูู ุฌููุฑ ุงููุนุงูุฌ.  ูุฐุง ุณูู ูุณูุญ ููุง ุจููุงุฑูุฉ ุงูุฃุฏุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// ,    DMA channel3::Init (channel3::Mem2Mem|channel3::MSize16Bits|channel3::PSize16Bits|channel3::PeriphIncriment,(void*)&amp;GPIOC-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel2::Init (channel2::Mem2Mem|channel2::MSize16Bits|channel2::PSize16Bits|channel2::PeriphIncriment,(void*)&amp;GPIOA-&gt;ODR,dataForDma,sizeof(dataForDma)/2); uint16_t* src = dataForDma; uint16_t* dest = (uint16_t*)&amp;GPIOB-&gt;ODR; for (int i=sizeof(dataForDma)/sizeof(dataForDma[0]);i&gt;0;i--) { *dest = *src++; }</code> </pre><br>  ุฃููุงู ุ ุงูุตูุฑุฉ ุงูุนุงูุฉ ุ ุงูุชู ุชูุถุญ ุฃู ูู ุดูุก ูุนูู ุจุดูู ูุชูุงุฒ ูุฃู ููุงุฉ ุงููุนุงูุฌ ุชุชูุชุน ุจุฃุนูู ุณุฑุนุฉ ูุณุฎ: <br><br><img src="https://habrastorage.org/webt/yq/bc/ah/yqbcahagnawdxrr70dh7zvbetmo.png"><br><br>  ูุงูุขู ุ ุณุฃููุญ ุงูุฌููุน ุงููุฑุตุฉ ูุญุณุงุจ ุงูุฅุฌุฑุงุกุงุช ูู ููุช ุชููู ููู ุฌููุน ุชุฏููุงุช ุงููุณุฎ ูุดุทุฉ: <br><br> <a href=""><img src="https://habrastorage.org/webt/_m/m9/2b/_mm92b5yfgjltz6cizilmdtg4d4.png"></a> <br><br><h2 style=";text-align:right;direction:rtl">  ุฌููุฑ ุงููุนุงูุฌ ูุนุทู ุงูุฃููููุฉ ูุฌููุน </h2><br>  ุงูุขู ุฏุนูุง ูุนูุฏ ุฅูู ุญูููุฉ ุฃูู ุฎูุงู ุนูููุฉ ุฐุงุช ุฎูุทูู ุ ุจูููุง ุชู ุถุจุท ุงูููุงุฉ ุงูุซุงููุฉ ุ ุฃุนุทุช ุงูุฃููู ุจูุงูุงุช ูุนุฏุฏ ูุฎุชูู ูู ุฏูุฑุงุช ุงูุณุงุนุฉ.  ุชู ุชูุซูู ูุฐู ุงูุญูููุฉ ุฃูุถูุง ุจุดูู ุฌูุฏ ูู AppNote ุนูู DMA.  ุงูุญูููุฉ ูู ุฃูู ุฃุซูุงุก ุฅุนุฏุงุฏ ุงูููุงุฉ ุงูุซุงููุฉ ุ ูุชู ุฅุฑุณุงู ุทูุจุงุช ุงููุตูู ุฅูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (RAM) ุจุดูู ุฏูุฑู ุ ููููู ูุจ ุงููุนุงูุฌ ุฃููููุฉ ุฃุนูู ุนูุฏ ุงููุตูู ุฅูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (RAM) ูู ูุฑูุฒ DMA.  ุนูุฏูุง ุทูุจ ุงููุนุงูุฌ ุจุนุถ ุงูุจูุงูุงุช ุ ุงุณุชุบุฑู DMA ุจุนูุฏุง ุฏูุฑุงุช ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ ุ ูุชููู ุงูุจูุงูุงุช ูุน ุชุฃุฎูุฑ ุ ูุจุงูุชุงูู ุ ูุชู ูุณุฎูุง ุจุจุทุก ุฃูุซุฑ.  ุฏุนููุง ููุนู ุงูุชุฌุฑุจุฉ ุงูุฃุฎูุฑุฉ ููุฐุง ุงูููู.  ุฏุนูุง ูุฌูุจ ุงูุนูู ุฅูู ูุงูุน ุฃูุซุฑ ูุงูุนูุฉ.  ุจุนุฏ ุจุฏุก DMA ุ ูู ูุฏุฎู ูู ุฏูุฑุฉ ูุงุฑุบุฉ (ุนูุฏูุง ูุง ูููู ููุงู ุญููุง ุงููุตูู ุฅูู RAM) ุ ูููููุง ุณูุฌุฑู ุนูููุฉ ูุณุฎ ูู RAM ุฅูู RAM ุ ููู ูุฐู ุงูุนูููุฉ ูู ุชุชุนูู ุจุชุดุบูู ูุฑุงูุฒ DMA: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">channel1::Init (channel1::Mem2Mem|channel1::MSize16Bits|channel1::PSize16Bits|channel1::PeriphIncriment,(void*)&amp;GPIOB-&gt;ODR,dataForDma,sizeof(dataForDma)/2); channel2::Init (channel2::Mem2Mem|channel2::MSize16Bits|channel2::PSize16Bits|channel2::PeriphIncriment,(void*)&amp;GPIOA-&gt;ODR,dataForDma,sizeof(dataForDma)/2); uint32_t src1[0x200]; uint32_t dest1 [0x200]; while (1) { uint32_t* src = src1; uint32_t* dest = dest1; for (int i=sizeof(src1)/sizeof(src1[0]);i&gt;0;i--) { *dest++ = *src++; } }</code> </pre><br> <a href=""><img src="https://habrastorage.org/webt/ks/k-/c6/ksk-c6feobygy2krzseq0nlka78.png"></a> <br><br>  ูู ุจุนุถ ุงูุฃูุงูู ุ ุงูุชุฏุช ุงูุฏูุฑุฉ ูู 16 ุฅูู 17 ููุงุณูุง.  ููุช ุฎุงุฆูุฉ ุฃูู ุณูููู ุฃุณูุฃ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุจุฏุก ูู ุงุณุชุฎูุงุต ุงููุชุงุฆุฌ </h2><br>  ูู ุงููุงูุน ุ ููุชูู ุฅูู ูุง ุฃุฑุฏุช ุฃู ุฃูููู. <br><br>  ุณุฃุจุฏุฃ ูู ุจุนูุฏ.  ูุจู ุจุถุน ุณููุงุช ุ ุจุฏุฃุช ุฏุฑุงุณุฉ STM32 ุ ุฏุฑุณุช ุฅุตุฏุงุฑุงุช MiddleWare for USB ุงูุชู ูุงูุช ููุฌูุฏุฉ ูู ุฐูู ุงูููุช ูุชุณุงุกูุช ุนู ุณุจุจ ููุงู ุงููุทูุฑูู ุจุฅุฒุงูุฉ ููู ุงูุจูุงูุงุช ูู ุฎูุงู DMA.  ูุงู ูู ุงููุงุถุญ ุฃู ูุซู ูุฐุง ุงูุฎูุงุฑ ูู ุงูุจุฏุงูุฉ ูุงู ูู ุงูุฃูู ุ ุซู ุชู ุฅุฒุงูุชู ุฅูู ุงูููุงุกุงุช ุงูุฎูููุฉ ุ ููู ุงูููุงูุฉ ูุงูุช ููุงู ุฃุณุงุณูุงุช ููู.  ุงูุขู ุจุฏุฃุช ุฃุดู ูู ุฃููู ุฃููู ุงููุทูุฑูู. <br><br>  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฃููู ุญูู UDB ุ</a> ููุช ุฅูู ุนูู ุงูุฑุบู ูู ุฃู UDB ููููู ุงูุนูู ูุน ุงูุจูุงูุงุช ุงููุชูุงุฒูุฉ ุ ููู ุบูุฑ ุงููุญุชูู ุฃู ูุญู ูุญู GPIF ูุน ููุณู ุ ูุธุฑูุง ูุฃู ุญุงููุฉ USB PSoC ุชุนูู ุจุณุฑุนุฉ ูุงููุฉ ููุงุจู ุงูุณุฑุนุฉ ุงูุนุงููุฉ ูู FX2LP.  ุงุชุถุญ ุฃู ููุงู ุนุงูู ุฃูุซุฑ ุฎุทูุฑุฉ ุงูุญุฏ.  DMA ุจุจุณุงุทุฉ ููุณ ูุฏููุง ุงูููุช ูุชุณููู ุงูุจูุงูุงุช ุจููุณ ุงูุณุฑุนุฉ ุงูุชู ูููุฑูุง GPIF ุ ุญุชู ุฏุงุฎู ูุญุฏุฉ ุงูุชุญูู ุ ุฏูู ูุฑุงุนุงุฉ ูุงูู USB. <br><br>  ููุง ุชุฑูู ุ ูุง ููุฌุฏ ููุงู ูุงุญุฏ DMA.  ุฃููุงู ุ ูู ูุตูุน ูุฌุนูู ุจุทุฑููุชู ุงูุฎุงุตุฉ.  ููุณ ุฐูู ูุญุณุจ ุ ุจู ุฅู ููุชุฌูุง ูุงุญุฏูุง ููุนุงุฆูุงุช ุงููุฎุชููุฉ ููููู ุชุบููุฑ ุทุฑููุฉ ุจูุงุก DMA.  ุฅุฐุง ููุช ุชุฎุทุท ูุชุญููู ูุฐู ุงููุญุฏุฉ ุนูู ูุญูู ุงูุฌุฏ ุ ููุฌุจ ุฃู ุชููุฑ ุจุนูุงูุฉ ูููุง ุฅุฐุง ูุงู ุณูุชู ุชูุจูุฉ ุงูุงุญุชูุงุฌุงุช. <br><br>  ุฑุจูุง ุ ูู ุงูุถุฑูุฑู ุชุฎููู ุงูุชุฏูู ุงููุชุดุงุฆู ุจููุงุญุธุฉ ูุชูุงุฆูุฉ ูุงุญุฏุฉ.  ุณูู ุชุณููุท ุงูุถูุก ุนูููุง ุญุชู. <br><br>  <b>ุชุณูุญ ูู DMA ููุญุฏุงุช ุชุญูู Cortex M ุจุฒูุงุฏุฉ ุฃุฏุงุก ุงููุธุงู ููููุง ููุจุฏุฃ Javelins ุงูุดููุฑ: "ุงูุชุดุบูู ูุงููุณูุงู".</b>  <b>ูุนู ุ ุจูุงูุงุช ูุณุฎ ุงูุจุฑูุงูุฌ ุฃุณุฑุน ููููุงู.</b>  <b>ูููู ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุณุฎ ูุคุดุฑุงุช ุชุฑุงุจุท ูุชุนุฏุฏุฉ ุ ููู ูุชููู ุฃู ููุญุณููู ูู ุชุดุบูู ุงููุนุงูุฌ ุฌููุนูุง ุฏูู ุชุญููู ุญููุงุช ุงูุชุณุฌูู ูุฅุนุงุฏุฉ ุงูุฏูุฑุงู.</b>  <b>ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุจุงููุณุจุฉ ููููุงูุฐ ุงูุจุทูุฆุฉ ุ ูุง ูุฒุงู ูุชุนูู ุนูู ุงููุนุงูุฌ ุงูุชุธุงุฑ ุงูุชูุงูุฑ ุ ููููู DMA ุจุฐูู ุนูู ูุณุชูู ุงูุฌูุงุฒ.</b> <br><br>  ูููู ุญุชู ููุง ุงููุฑูู ุงูุฏูููุฉ ุงููุฎุชููุฉ ููููุฉ.  ุฅุฐุง ูุงู ุงููููุฐ ุจุทูุฆูุง ูุณุจููุง ... ุญุณููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนูู SPI ุจุฃุนูู ุชุฑุฏุฏ ูููู ุ ูููุงู ุญุงูุงุช ููููุฉ ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุนูุฏูุง ูุง ูููู ูุฏู DMA ููุช ูุฌูุน ุงูุจูุงูุงุช ูู ุงููุฎุฒู ุงููุคูุช ููุญุฏุซ ุชุฌุงูุฒ ุงูุณุนุฉ.  ุฃู ุงูุนูุณ - ุถุน ุงูุจูุงูุงุช ูู ุณุฌู ุงููุฎุฒู ุงููุคูุช.  ุนูุฏูุง ูููู ุฏูู ุงูุจูุงูุงุช ูุงุญุฏูุง ุ ููู ุบูุฑ ุงููุญุชูู ุฃู ูุญุฏุซ ูุฐุง ุ ูููู ุนูุฏูุง ูููู ููุงู ุงููุซูุฑ ูููู ุ ููุฏ ุฑุฃููุง ูุง ูููู ุฃู ูุญุฏุซ ูู ุงูุชุฑุงูุจุงุช ุงููุฏูุดุฉ.  ููุชุนุงูู ูุน ูุฐุง ุ ูุฌุจ ุนููู ุชุทููุฑ ุงูููุงู ููุณ ุจุดูู ูููุตู ุ ูููู ูุฌุชูุนุฉ.  ููุญุงูู ุงููุฎุชุจุฑูู ุฅุซุงุฑุฉ ูุซู ูุฐู ุงููุดููุงุช (ูุซู ูุฐุง ุงูุนูู ุงููุฏูุฑ ูููุฎุชุจุฑูู). <br><br>  ูุฑุฉ ุฃุฎุฑู ุ ูุง ุฃุญุฏ ูุฎูู ูุฐู ุงูุจูุงูุงุช.  ูููู ูุณุจุจ ูุง ุ ูุง ูุชู ุชุถููู ูู ูุฐุง ุนุงุฏุฉ ูู ุงููุณุชูุฏ ุงูุฑุฆูุณู ุ ูููู ูู ููุงุญุธุงุช ุงูุชุทุจูู.  ูุฐูู ูุงูุช ูููุชู ูู ููุช ุงูุชุจุงู ุงููุจุฑูุฌูู ุฅูู ุญูููุฉ ุฃู DMA ููุณ ุญูุง ุณุญุฑูุง ุ ูููู ูุฌุฑุฏ ุฃุฏุงุฉ ููุงุณุจุฉ. <br><br>  ูููู ุ ุจุงูุทุจุน ุ ููุณ ููุท ุงููุจุฑูุฌูู ุ ูููู ุฃูุถูุง ูุทูุฑู ุงูุฃุฌูุฒุฉ.  ูููุชุฑุถ ุฃูู ูู ูุคุณุณุชูุง ุ ูุชู ุชุทููุฑ ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูุจุฑุงูุฌ ูุงูุฃุฌูุฒุฉ ูู ุฃุฌู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุนู ุจูุนุฏ ููุฃูุธูุฉ ุงููุฏูุฌุฉ.  ุงูููุฑุฉ ูู ุฃู ุดุฎุตูุง ูุง ูููู ุจุชุทููุฑ ุฌูุงุฒ ุ ูููู ูุฑูุฏ ุทูุจ "ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ" ุนูู ุงูุฌุงูุจ.  ููุณุจุจ ูุง ุ ูุง ูููู ุชูููุฑ ุงููุนุฏุงุช ุฅูู ุงูุฌุงูุจ.  ูููู ุฃู ุชููู ุถุฎูุฉ ุ ูููู ุฃู ุชููู ุจุงูุธุฉ ุงูุซูู ุ ูููู ุฃู ุชููู ูุฑูุฏุฉ ูู ููุนูุง ู "ุชุญุชุงุฌ ุฅูููุง ุจููุณู" ุ ูููู ุฃู ุชุนูู ูุฌููุนุงุช ูุฎุชููุฉ ูุนูุง ูู ููุงุทู ุฒูููุฉ ูุฎุชููุฉ ุ ููุง ูููุฑ ููุนูุง ูู ุงูุนูู ูุชุนุฏุฏ ุงูููุงูุจุงุช ุ ููููู ุฃู ูุฎุทุฑ ุนูู ุจุงูู ุจุงุณุชูุฑุงุฑ ... ุจุดูู ุนุงู ุ ููููู ุงูุชูุตู ุฅูู ุฃุณุจุงุจ ุงููุซูุฑ ุ ูุฌููุนุชูุง ููุท ุชุฑู ูุฐู ุงููููุฉ ูุฃุณูู ุฃูุฑุง ููุฑูุบุง ููู. <br><br>  ููููุง ูุฐูู ุ ูุฌุจ ุฃู ูููู ูุฌูุน ุชุตุญูุญ ุงูุฃุฎุทุงุก ูุงุฏุฑูุง ุนูู ูุญุงูุงุฉ ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูุฃุฌูุฒุฉ ุงูุฎุงุฑุฌูุฉ ุ ุจุฏุกูุง ูู ุงููุญุงูุงุฉ ุงูุชุงููุฉ ููุทุงุจุน ุงูุฃุฒุฑุงุฑ ุฅูู ุจุฑูุชููููุงุช SPI ู I2C ู CAN ู 4-20 ูููู ุฃูุจูุฑ ูุบูุฑูุง ูู ุงูุฃุดูุงุก ุงูุฃุฎุฑู ุ ุญุชู ูุชููู ุงููุญุงูููู ูู ุฎูุงููู ูู ุฅุนุงุฏุฉ ุฅูุดุงุก ุณููููุงุช ุฎุงุฑุฌูุฉ ูุฎุชููุฉ ุงููุชู ุงููุชุตูุฉ ุจุงููุนุฏุงุช ุงูุชู ูุชู ุชุทููุฑูุง (ููุช ุดุฎุตูุง ูู ููุช ูุงุญุฏ ุจุงููุซูุฑ ูู ุฃุฌูุฒุฉ ุงููุญุงูุงุฉ ูุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุฃุฑุถูุฉ ููุฑููุงุช ุทุงุฆุฑุงุช ุงููููููุจุชุฑ ุ ุนูู ูููุนูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชู ุงูุจุญุซ ุนู ุงูุญุงูุงุช ุฐุงุช ุงูุตูุฉ ูู ุฎูุงู ูููุฉ Cassel Aero</a> ). <br><br>  ูููุฐุง ุ ูู ุงููุชุทูุจุงุช ุงููููุฉ ูุชุทููุฑ ุจุนุถ ุงููุชุทูุจุงุช.  ุงููุซูุฑ ูู SPI ุ I2C ุ ุงููุซูุฑ ูู GPIO.  ูุฌุจ ุฃู ุชุนูู ูู ูุซู ูุฐู ุงูุชุฑุฏุฏุงุช ุงููุตูู ููุซู ูุฐู.  ูุจุฏู ุฃู ูู ุดูุก ูุงุถุญ.  ูุถุน STM32F4 ู ULPI ููุนูู ูุน USB ูู ูุถุน HS.  ุซุจุช ุงูุชูููููุฌูุง.  ูููู ููุง ูุฃุชู ุนุทูุฉ ููุงูุฉ ุฃุณุจูุน ุทูููุฉ ูุน ุนุทูุงุช ููููุจุฑ ุ ูุงูุชู ุงูุชุดูุช ูุน UDB.  ุฑุคูุฉ ุดูุก ูุง ูุงู ุฎุทุฃ ุ ุญุตูุช ูู ุงูุฃูุณูุงุช ุนูู ุงููุชุงุฆุฌ ุงูุนูููุฉ ุงูุชู ูุฏูุช ูู ุจุฏุงูุฉ ูุฐุง ุงูููุงู.  ูุฃุฏุฑูุช ุฃู ูู ุดูุก ุ ุจุงูุทุจุน ุ ุดูุก ุฑุงุฆุน ุ ููู ููุณ ููุฐุง ุงููุดุฑูุน.  ููุง ุฃุดุฑุช ุจุงููุนู ุ ุนูุฏูุง ููุชุฑุจ ุฃูุตู ุฃุฏุงุก ูููู ูููุธุงู ูู ุงูุญุฏ ุงูุฃุนูู ุ ููุจุบู ุชุตููู ูู ุดูุก ุจุดูู ูููุตู ุ ูููู ุจุดูู ูุฌูุน. <br><br>  ูููู ููุง ูุง ูููู ุฃู ูููู ุงูุชุตููู ุงููุชูุงูู ููููุงู ูู ุญูุซ ุงููุจุฏุฃ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุนูู ุงูููู ูุน ุฌูุงุฒ ูุงุญุฏ ุชุงุจุน ูุฌูุฉ ุฎุงุฑุฌูุฉ ุ ุบุฏูุง - ูุฎุชูู ุชูุงููุง. ุณูุชู ุงุณุชุฎุฏุงู ุงูุญุงููุงุช ูู ูุจู ุงููุจุฑูุฌูู ููู ุญุงูุฉ ูุถุงูุงุฉ ุญุณุจ ุชูุฏูุฑูู. ูุฐูู ุ ุชู ุฑูุถ ุงูุฎูุงุฑ ุ ุชู ุฅุถุงูุฉ ุนุฏุฏ ูู ุฌุณูุฑ FTDI ุงููุฎุชููุฉ ุฅูู ุงูุฏุงุฆุฑุฉ. ุฏุงุฎู ุงูุฌุณุฑ ุ ุณูุชู ุญู ูุธููุฉ ุฃู ูุธููุชูู ุฃู ุฃุฑุจุน ููููุง ููุธุงู ุตุงุฑู ุ ูุจูู ุงูุฌุณูุฑ ุณูุญู ูุถูู USB ูู ุดูุก.</font></font> ููุฃุณู        DMA. , , ,    ,      โ  ,   . <br><br>   .        DMA   (,    10:    1    , ,    1 ,  10  )     . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar437112/">https://habr.com/ru/post/ar437112/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar437102/index.html">ุจุทู Lego ุฌุฏูุฏ Meet: Lego Boost</a></li>
<li><a href="../ar437104/index.html">ุงูููุธุงุฑ: ุญุณูุง ุ ุงุฎุชุจุงุฑ ูุญุฏุฉ ูุณูู ุฌุฏุง</a></li>
<li><a href="../ar437106/index.html">ุชูููููุฌูุง ุงููุนูููุงุช ูู ุงูููุทูุฉ</a></li>
<li><a href="../ar437108/index.html">ุชุชู ูุชุงุจุฉ ูุนุธู ุงููุตูุต ุนูู ุงูุฅูุชุฑูุช ูู ูุจู ุงููุฌุงููู.</a></li>
<li><a href="../ar437110/index.html">ุงูููุงุฏ ุงููุงูููุฉ ุชุบูุฑ ุนุงูููุง ุ ููุง ุฒููุง ูุง ูููู ุฅุฌุฑุงุกุงุช ููุญุต ุณูุงูุชูู</a></li>
<li><a href="../ar437114/index.html">ูุชุญ ุงูููุจููุงุฑ: "SSH / NC / Socat: ูุตุงุฆุญ ูุญูู"</a></li>
<li><a href="../ar437116/index.html">AWS ุ MongoDB ุ ูุงููุงูุน ุงูุงูุชุตุงุฏู ูููุตุฏุฑ ุงูููุชูุญ</a></li>
<li><a href="../ar437118/index.html">ุงูุฐูุงุก ุงูุงุตุทูุงุนู ู 2048. ุงูุฌุฒุก ุงูุฃูู: ุทุฑููุฉ ูููุช ูุงุฑูู</a></li>
<li><a href="../ar437120/index.html">ูุฑุณู ููุชุจ ููุฑู: Harachair ูุนุฌุฒุฉ ุงูุฃุญุงุณูุณ</a></li>
<li><a href="../ar437122/index.html">ุชุณููุฉ ุงูุฃุดูุงุก</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>