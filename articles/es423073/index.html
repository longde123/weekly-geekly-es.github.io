<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî´ üë©üèΩ‚Äçüåæ üêô Sistema de archivos interplanetarios: hash trivial (identidad), bloque DAG y buffers de protocolo üöõ üèº üî±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, IPFS agreg√≥ soporte para un hash trivial (identidad) . En mi art√≠culo hablar√© sobre ello y mostrar√© c√≥mo se puede usar. 
 Perm√≠tame rec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistema de archivos interplanetarios: hash trivial (identidad), bloque DAG y buffers de protocolo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423073/"><p>  Recientemente, IPFS agreg√≥ soporte para un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hash trivial (identidad)</a> .  En mi art√≠culo hablar√© sobre ello y mostrar√© c√≥mo se puede usar. </p><br><blockquote>  Perm√≠tame recordarle: InterPlanetary File System es una nueva red descentralizada para compartir archivos (servidor HTTP, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Content Delivery Network</a> ).  Comenc√© la historia al respecto en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Sistema de archivos interplanetarios IPFS"</a> . </blockquote><p>  Por lo general, cuando se realiza el hash, pasando por una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funci√≥n hash, los</a> datos se comprimen irreversiblemente y, como resultado, se obtiene un identificador corto.  Este identificador le permite encontrar datos en la red y verificar su integridad. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Un hash trivial</a> son los datos en s√≠.  Los datos no cambian de ninguna manera y, en consecuencia, el tama√±o del "hash" es igual al tama√±o de los datos. </p><br><p> Un hash trivial realiza la misma funci√≥n que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Datos: URL</a> .  El identificador de contenido en este caso contiene los datos en s√≠ en lugar de un hash.  Esto le permite anidar bloques secundarios en el padre, haci√©ndolos disponibles inmediatamente despu√©s de recibir el padre.  Tambi√©n puede incluir datos del sitio directamente en el registro DNS. </p><br><p>  Por ejemplo, codifique la cadena de texto "Hello World" en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">identificador del contenido</a> (CID) con un hash trivial. <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/fd3/316/1e3/fd33161e38ad164adb32a3e384cd2f5d.svg" alt="imagen"></a> </p><a name="habracut"></a><br><p>  <u>Estructura de identificaci√≥n:</u> </p><br><pre><code class="hljs markdown">[<span class="hljs-string"><span class="hljs-string"> </span></span>][<span class="hljs-symbol"><span class="hljs-symbol">varint  CID</span></span>][<span class="hljs-string"><span class="hljs-string">varint  </span></span>][<span class="hljs-symbol"><span class="hljs-symbol">varint ID </span></span>][<span class="hljs-string"><span class="hljs-string">varint  </span></span>][<span class="hljs-symbol"><span class="hljs-symbol"></span></span>]</code> </pre> <br><p>  Comencemos desde el final. </p><br><h3 id="hesh">  [hash] </h3><br><p>  El hash trivial en nuestro caso es la cadena en s√≠.  Vamos a traducirlo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HEX</a> . </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">" "</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><p>  Este es el HEX de esta cadena codificada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">utf-8</a> .  Pero para que el navegador sepa con certeza que se trata de una l√≠nea utf-8, agr√©guela al principio: <code>0xEFBBBF</code> .  Este es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un marcador de secuencia de bytes</a> (BOM). </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><h3 id="varint-dlinna-hesha">  [longitud de hash varint] </h3><br><p>  Ahora podemos calcular la longitud del "hash".  Cada dos caracteres HEX son un byte.  En consecuencia, la cadena resultante tiene 22 bytes de longitud.  En HEX, ser√° <code>0x16</code> . </p><br><p>  Agregue <code>0x16</code> al comienzo de la l√≠nea. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><h3 id="varint-id-hesha">  [identificaci√≥n de hash varint] </h3><br><p>  Ahora necesitamos la identificaci√≥n hash.  El hash trivial o identidad en <a href="">la tabla hash</a> tiene el identificador <code>0x00</code> . </p><br><p>  Agregue <code>0x00</code> al comienzo de la l√≠nea. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><p>  Esto ya es una parte del identificador de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hash m√∫ltiple</a> , puede transcodificar HEX a Base58 y el hash m√∫ltiple est√° listo.  Pero ipfs no lo reconoce fuera del identificador de contenido (CID). </p><br><p>  Sigamos adelante. </p><br><h3 id="varint-tip-kontenta">  [tipo de contenido varint] </h3><br><p>  Ahora mire la tabla <a href="">multicodec</a> para obtener el tipo de contenido.  En nuestro caso, se trata de datos sin procesar y el identificador es <code>0x55</code> respectivamente. </p><br><p>  Agregue <code>0x55</code> al comienzo de la l√≠nea. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"55 00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><h3 id="varint-versiya-cid">  [versi√≥n varint del CID] </h3><br><p>  Codificamos el formato de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primera versi√≥n del identificador de contenido</a> .  Por lo tanto, agregue 0x01. </p><br><p>  Agregue <code>0x01</code> al comienzo de la l√≠nea. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"01 55 00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><p>  Y ya estamos en la l√≠nea de meta. </p><br><h3 id="prefiks-osnovaniya">  [prefijo base] </h3><br><p>  Indica qu√© opci√≥n de codificaci√≥n de datos binarios a texto se utiliza. </p><br><h4 id="hex-f">  HEX (F) </h4><br><p>  Podemos usar el t√©rmino HEX directamente agregando el s√≠mbolo "F" al comienzo del prefijo base HEX </p><br><pre> <code class="hljs">F01550016EFBBBFD09FD180D0B8D0B2D0B5D18220D0BCD0B8D180</code> </pre> <br><p>  Tenemos un identificador HEX para el contenido que contiene la l√≠nea utf-8: "Hola mundo" </p><br><p>  Prueba: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ ipfs / F01550016EFBBBFD09FD180D0B8D0B2D0B5D18220D0BCD0B8D180</a> </p><br><h4 id="base58btc-z">  Base58btc (z) </h4><br><p>  Base58btc ser√° m√°s corto por lo tanto </p><br><p>  Traducimos nuestra cadena HEX a base58btc.  Puedes usar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">convertidor en l√≠nea</a> . </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"01 55 00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span> = <span class="hljs-string"><span class="hljs-string">"3NDGAEgXCxbPucFFCQc9s5ScqZjqVFNr56P"</span></span> (<span class="hljs-name"><span class="hljs-name">base58btc</span></span>)</code> </pre> <br><p>  Agregue el car√°cter de prefijo base base58btc "z" al comienzo de la l√≠nea </p><br><pre> <code class="hljs">z3NDGAEgXCxbPucFFCQc9s5ScqZjqVFNr56P</code> </pre> <br><p>  Tenemos base58btc, un identificador de contenido que contiene una l√≠nea utf-8: "Hola mundo" </p><br><p>  Prueba: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ ipfs / z3NDGAEgXCxbPucFFCQc9s5ScqZjqVFNr56P</a> </p><br><h3 id="dag-blok">  Bloque DAG </h3><br><p>  El texto es bueno, pero para codificar una p√°gina HTML necesitamos incrustar sus datos en el bloque de directorio DAG. </p><br><p>  Aqu√≠ est√° nuestro HTML: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">u</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">u</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  De manera similar, de acuerdo con las instrucciones anteriores, obtenemos el identificador de contenido en base58btc para este texto: </p><br><pre> <code class="hljs">zeExnPvBXdTRwCBhfkJ1fHFDaXpdW4ghvQjfaCRHYxtQnd3H4w1MPbLczSqyCqVo</code> </pre> <br><p>  Ahora escriba el archivo JSON: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"links"</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">"Cid"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"/"</span></span>: <span class="hljs-string"><span class="hljs-string">"zeExnPvBXdTRwCBhfkJ1fHFDaXpdW4ghvQjfaCRHYxtQnd3H4w1MPbLczSqyCqVo"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"Name"</span></span>: <span class="hljs-string"><span class="hljs-string">"index.html"</span></span> }], <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: <span class="hljs-string"><span class="hljs-string">"CAE="</span></span> }</code> </pre> <br><ol><li>  Los "datos" indican el tipo de bloque DAG: el directorio. </li><li>  "enlaces" es una matriz de enlaces de archivos. </li><li>  "Nombre" es el nombre del archivo, respectivamente. </li><li>  "Cid" contiene el identificador de contenido </li></ol><br><p>  <code>ipfs dag put -f"protobuf"</code> convierta JSON en bloque DAG a trav√©s de IPFS. </p><br><p>  Tengo un multihash: <code>QmXXixn4rCzGguhxQPjXQ8Mr5rdqwZfJTKkeB6DfZLt8EZ</code> </p><br><p>  En esta etapa, recibimos un bloque en el que un directorio con un archivo inscrito en el bloque. </p><br><p>  Luego, usando esta multicash, descargue el bloque terminado </p><br><pre> <code class="hljs vhdl">ipfs <span class="hljs-keyword"><span class="hljs-keyword">block</span></span> get QmXXixn4rCzGguhxQPjXQ8Mr5rdqwZfJTKkeB6DfZLt8EZ &gt; <span class="hljs-keyword"><span class="hljs-keyword">block</span></span>.dag</code> </pre> <br><p>  Traducimos el contenido de block.dag a HEX: </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"123F0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E120A696E6465782E68746D6C18000A020801"</span></span></code> </pre> <br><p>  A√±adir: </p><br><ol><li>  Versi√≥n CID (0x01) </li><li>  Tipo de contenido DAG (0x70) </li><li>  hash trivial (0x00) </li><li>  tama√±o de datos 69 bytes (0x45) </li></ol><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"01 70 00 45 123F0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E120A696E6465782E68746D6C18000A020801"</span></span></code> </pre> <br><p>  Convierte a Base58btc y agrega el prefijo "z" </p><br><pre> <code class="hljs">z6S3Z3W1zuRxio8AJC41jRTdyU9pZWnU6sNbvyGyypEdD8JVNdW42ZmGYWKWGbVDELLvJNWcMspaZMUPZKt7JQmhdyXCqq7j37GL</code> </pre> <br><p>  Por lo tanto, obtuvimos un identificador de contenido con un directorio en el que la p√°gina html index.html con el texto "Hola Mundo". </p><br><p>  Prueba: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ ipfs / z6S3Z3W1zuRxio8AJC41jRTdyU9pZWnU6sNbvyGyypEdD8JVNdW42ZmGYWKWGbVDELLvJNWcMspaZMUPZKt7JQmhdyXCqqjj37gL</a> </p><br><p>  Adem√°s, este hash tambi√©n se puede incrustar en otro bloque o grabar en el registro DNS dnslink.  Entonces, en un bloque, puede caber en un sitio peque√±o y simple. </p><br><h3 id="dag-blok-i-protocol-buffers">  B√∫fer de bloque y protocolo DAG </h3><br><p>  El bloque DAG tambi√©n se puede ensamblar manualmente.  Un bloque DAG son datos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Protocol Buffers</a> .  La capa superior es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">merkledag.proto</a> que tiene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">unixfs.proto</a> en Datos. </p><br><h4 id="protocol-buffers">  Tampones de protocolo </h4><br><p>  Cualquier protobuffer comienza con el identificador de campo varint.  A menudo, un identificador ocupa un byte ya que su valor total es menor que 0x80.  En nuestro caso, el primer byte es 0x12.  Los 3 bits inferiores de este campo son de tipo.  El resto es la ID especificada en el archivo proto. </p><br><h5 id="length-delimited">  Delimitado por longitud </h5><br><p>  Desciframos el identificador: </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">0</span></span>x12 &amp; <span class="hljs-number"><span class="hljs-number">0</span></span>x07 = <span class="hljs-number"><span class="hljs-number">2</span></span> (: Length-delimited) <span class="hljs-number"><span class="hljs-number">0</span></span>x12 &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">ID</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><p>  Delimitado por longitud significa que a varint le sigue el tama√±o del campo en bytes y su contenido directamente.  Este tipo se usa tanto para varias estructuras anidadas como para datos sin procesar (cadena, bytes, mensajes incrustados, campos repetidos empaquetados).  Lo que el archivo proto ya define en √©l. </p><br><h5 id="varint">  Varint </h5><br><p>  Descifrar el identificador de otro tipo: </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">0</span></span>x18 &amp; <span class="hljs-number"><span class="hljs-number">0</span></span>x07 = <span class="hljs-number"><span class="hljs-number">0</span></span> (: Varint) <span class="hljs-number"><span class="hljs-number">0</span></span>x12 &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">ID</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p>  Varint significa que sigue inmediatamente el valor en varint.  Este contenedor se usa para escribir muchos tipos de valores (int32, int64, uint32, uint64, sint32, sint64, bool, enum).  Lo que tambi√©n define el archivo proto. </p><br><h4 id="razberyom-blockdag-kotoryy-my-pereveli-v-hex-vyshe">  Analizaremos block.dag que tradujimos a HEX arriba </h4><br><p>  Para analizar un bloque, puede usar un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio que analizar√° autom√°ticamente cualquier buffer de protocolo</a> sin usar archivos proto. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"123F0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E120A696E6465782E68746D6C18000A020801"</span></span></code> </pre> <br><p>  Desmontamos el bloque y mapeamos los identificadores de los archivos proto. </p><br><div class="spoiler">  <b class="spoiler_title">merkledag.proto</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">// An IPFS MerkleDAG Link message PBLink { // multihash <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the target <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> optional bytes Hash = <span class="hljs-number"><span class="hljs-number">1</span></span>; // utf string <span class="hljs-type"><span class="hljs-type">name</span></span>. should be <span class="hljs-keyword"><span class="hljs-keyword">unique</span></span> per <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> optional string <span class="hljs-type"><span class="hljs-type">Name</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>; // cumulative size <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> target <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> optional uint64 Tsize = <span class="hljs-number"><span class="hljs-number">3</span></span>; } // An IPFS MerkleDAG Node message PBNode { // refs <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> other objects repeated PBLink Links = <span class="hljs-number"><span class="hljs-number">2</span></span>; // <span class="hljs-type"><span class="hljs-type">opaque</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> data optional bytes Data = <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">unixfs.proto</b> <div class="spoiler_text"><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">message</span></span> Data { <span class="hljs-attribute"><span class="hljs-attribute">enum</span></span> DataType { <span class="hljs-attribute"><span class="hljs-attribute">Raw</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">Directory</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">File</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">Metadata</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">Symlink</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">HAMTShard</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">required</span></span> DataType Type = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> bytes Data = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> uint64 filesize = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">repeated</span></span> uint64 blocksizes = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> uint64 hashType = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> uint64 fanout = <span class="hljs-number"><span class="hljs-number">6</span></span>; }</code> </pre> </div></div><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span> PBNode.Links (<span class="hljs-name"><span class="hljs-name">merkledag</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">3</span></span>F (: <span class="hljs-number"><span class="hljs-number">63</span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Hash)) <span class="hljs-number"><span class="hljs-number">2</span></span>F (: <span class="hljs-number"><span class="hljs-number">47</span></span> ) <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>B (<span class="hljs-name"><span class="hljs-name">CIDv1</span></span> Raw Identity <span class="hljs-number"><span class="hljs-number">43</span></span> ) EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E = <span class="hljs-string"><span class="hljs-string">"Ôªø&lt;b&gt;&lt;i&gt;&lt;u&gt; &lt;/u&gt;&lt;/i&gt;&lt;/b&gt;"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Name)) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">10</span></span> ) <span class="hljs-number"><span class="hljs-number">696E6465782</span></span>E68746D6C = <span class="hljs-string"><span class="hljs-string">"index.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Size)) <span class="hljs-number"><span class="hljs-number">00</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBNode</span></span>.Data = Data (<span class="hljs-name"><span class="hljs-name">unixfs</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">02</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> ) <span class="hljs-number"><span class="hljs-number">08</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">Data</span></span>.Type)) <span class="hljs-number"><span class="hljs-number">01</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> == Data.DataType.Directory)</code> </pre> <br><p>  En consecuencia, un bloque con dos archivos se ver√° as√≠: </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span> PBNode.Links (<span class="hljs-name"><span class="hljs-name">merkledag</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">3</span></span>B (: <span class="hljs-number"><span class="hljs-number">59</span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Hash)) <span class="hljs-number"><span class="hljs-number">2</span></span>F (: <span class="hljs-number"><span class="hljs-number">47</span></span> ) <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>B (<span class="hljs-name"><span class="hljs-name">CIDv1</span></span> Raw Identity <span class="hljs-number"><span class="hljs-number">43</span></span> ) EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E = <span class="hljs-string"><span class="hljs-string">"Ôªø&lt;b&gt;&lt;i&gt;&lt;u&gt; &lt;/u&gt;&lt;/i&gt;&lt;/b&gt;"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Name)) <span class="hljs-number"><span class="hljs-number">06</span></span> (: <span class="hljs-number"><span class="hljs-number">6</span></span> ) <span class="hljs-number"><span class="hljs-number">312E68746</span></span>D6C = <span class="hljs-string"><span class="hljs-string">"1.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Size)) <span class="hljs-number"><span class="hljs-number">00</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span> PBNode.Links)) <span class="hljs-number"><span class="hljs-number">3</span></span>B (: <span class="hljs-number"><span class="hljs-number">59</span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Hash)) <span class="hljs-number"><span class="hljs-number">2</span></span>F (: <span class="hljs-number"><span class="hljs-number">47</span></span> ) <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>B (<span class="hljs-name"><span class="hljs-name">CIDv1</span></span> Raw Identity <span class="hljs-number"><span class="hljs-number">43</span></span> ) EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E = <span class="hljs-string"><span class="hljs-string">"Ôªø&lt;b&gt;&lt;i&gt;&lt;u&gt; &lt;/u&gt;&lt;/i&gt;&lt;/b&gt;"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Name)) <span class="hljs-number"><span class="hljs-number">06</span></span> (: <span class="hljs-number"><span class="hljs-number">6</span></span> ) <span class="hljs-number"><span class="hljs-number">322E68746</span></span>D6C = <span class="hljs-string"><span class="hljs-string">"2.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Size)) <span class="hljs-number"><span class="hljs-number">00</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBNode</span></span>.Data = Data(<span class="hljs-name"><span class="hljs-name">unixfs</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">02</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> ) <span class="hljs-number"><span class="hljs-number">08</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">Data</span></span>.Type)) <span class="hljs-number"><span class="hljs-number">01</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> == Data.DataType.Directory)</code> </pre> <br><p>  Es decir, el campo PBNode.Links (0x12) se repite tantas veces como el n√∫mero de archivos que se colocar√°n en el bloque. </p><br><p>  Para verificar, agregue al principio de "F 01 70 00" (Identidad HAG CIDv1 DAG) y el tama√±o del bloque DAG "7E" (126 bytes) </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">F</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">70</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 7E <span class="hljs-number"><span class="hljs-number">12</span></span> 3B 0A 2F <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 2B EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">06</span></span> 312E68746D6C <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> 3B 0A 2F <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 2B EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">06</span></span> 322E68746D6C <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 0A <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span></code> </pre> <br><p>  Compruebe: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ ipfs / F0170007E123B0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E1206312E68746D6C1800123B0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E1206322E68746D6C18000A020801</a> </p><br><h3 id="zaklyuchenie">  Conclusi√≥n </h3><br><p>  Espero haber proporcionado suficiente informaci√≥n para que sea posible implementar la creaci√≥n de bloques e identificadores. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423073/">https://habr.com/ru/post/es423073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423063/index.html">Epson WorkForce Pro: Cr√≥nicas de c√≥mo una impresi√≥n de oficina de inyecci√≥n de tinta "sac√≥ una manta" de un l√°ser y lo que sucedi√≥ hoy</a></li>
<li><a href="../es423065/index.html">El experto de Positive Technologies descubri√≥ la posibilidad de revelar claves de cifrado en Intel ME</a></li>
<li><a href="../es423067/index.html">Python Developer Tools de Microsoft. Empezando</a></li>
<li><a href="../es423069/index.html">Evento especial de Apple, septiembre de 2018 [archivo de traducci√≥n de texto]</a></li>
<li><a href="../es423071/index.html">No tengo miedo de tu NDA</a></li>
<li><a href="../es423075/index.html">¬øPor qu√© los directores financieros est√°n tan ansiosos por traducir el gasto de capital en TI en funcionamiento?</a></li>
<li><a href="../es423077/index.html">Gu√≠a de ensamblador X86 para principiantes</a></li>
<li><a href="../es423079/index.html">Puntos clave de una entrevista con Elon Musk en Joe Rogan</a></li>
<li><a href="../es423083/index.html">C√≥mo me convert√≠ en desarrollador en ABBYY</a></li>
<li><a href="../es423085/index.html">Ajuste fino del equilibrio de carga</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>