<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💇🏾 💃🏽 🧑🏽 Git subrepo 🏂🏾 ☹️ 🦈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El proyecto git-subrepo ha existido durante mucho tiempo, sin embargo, hay pocas referencias a él. El autor de git-subrepo es Ingy döt Net . 



 Si o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Git subrepo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428493/"><p>  El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><b>proyecto git-subrepo ha</b></a> existido durante mucho tiempo, sin embargo, hay pocas referencias a él.  El autor de <b>git-subrepo</b> es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><b>Ingy döt Net</b></a> . <br></p><br><p>  Si observa la historia de los compromisos de la rama maestra del proyecto, puede parecer que el proyecto se detuvo en el desarrollo hace 2 años.  Sin embargo, el trabajo en el proyecto está en marcha y espero que la versión <a href="" rel="nofollow"><b>0.4.0</b></a> se <a href="" rel="nofollow"><b>lance</b></a> pronto. <br></p><br><p>  Una propiedad importante de esta herramienta es que no es necesario que el usuario instale <b>git-subrepo</b> hasta que el usuario decida realizar confirmaciones en el repositorio ascendente de subproyectos.  Además, el usuario recibe un árbol de origen totalmente preparado y configurado al momento de copiar el repositorio principal utilizando el comando estándar <em><b>git-clone (1)</b></em> . <br></p><a name="habracut"></a><br><p> Al elegir los medios para admitir submódulos / subárboles / subproyectos del repositorio principal del contenedor, el desarrollador primero determina el rango de posibilidades que proporciona este o aquel mecanismo y da respuestas a las siguientes preguntas: <br></p><br><ul><li>  si es necesario mantener el historial completo del subproyecto en el repositorio principal o suficientes confirmaciones aplastadas; </li><li>  si se necesita la capacidad de entregar cambios desde el subproyecto al repositorio ascendente del subárbol; </li><li>  ¿Es necesario conectar etiquetas fijas del repositorio ascendente del subproyecto o es posible conectar ramas? </li><li>  si será necesario eliminar aún más los subproyectos en sí mismos y, lo que se ha vuelto innecesario, parte de la historia de estos subproyectos; </li><li>  si el usuario tendrá que tomar alguna medida para configurar manualmente los subproyectos después de clonar el repositorio del proyecto principal; </li><li>  cuán laborioso será la cuestión de analizar la historia de la conexión de subproyectos y revisiones específicas de las cuales se origina el subproyecto; </li><li>  cómo esta o aquella herramienta afectará la política de Gestión de la configuración de origen y cuánto complicará esta herramienta el trabajo diario de los ingenieros. </li></ul><br><p>  Por supuesto, esta lista de preguntas no puede reflejar la totalidad de los parámetros de entrada necesarios para la elección correcta, pero para una revisión preliminar de las herramientas existentes, es bastante suficiente y, hablando del <b>proyecto git-subrepo</b> , instamos al lector a considerar este proyecto desde estas posiciones. <br></p><br><h2>  Instalación de Git-subrepo </h2><br><p>  El <b>paquete git-subrepo</b> , en el lado del desarrollador, se puede instalar localmente, en su directorio de inicio y en el nivel del sistema. <br></p><br><p>  En el primer caso, es suficiente clonar el <b>repositorio git-subrepo</b> en el directorio deseado, por ejemplo, <b>~ / bin</b> : <br></p><br><pre><code class="bash hljs">bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/bin bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ingydotnet/git-subrepo.git</code> </pre> <br><p>  y configurar variables de entorno <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim subrepo-env.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh export GIT_SUBREPO_ROOT="/home/username/bin/git-subrepo" export PATH="/home/username/bin/git-subrepo/lib:$PATH" export MANPATH="/home/username/bin/git-subrepo/man:$MANPATH" :wq bash-4.4$ source ./subrepo-env.sh</span></span></code> </pre><br><p>  Si observa las variables definidas en el <b>Makefile git-subrepo</b> : <br></p><br><pre> <code class="plaintext hljs"># Install variables: PREFIX ?= /usr/local INSTALL_LIB ?= $(DESTDIR)$(shell git --exec-path) INSTALL_EXT ?= $(INSTALL_LIB)/$(NAME).d INSTALL_MAN1 ?= $(DESTDIR)$(PREFIX)/share/man/man1</code> </pre><br><p>  es fácil descubrir que, a nivel del sistema, <b>git-subrepo está</b> instalado en el directorio donde se encuentra <b>Git</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git --<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span>-path /usr/libexec/git-core bash-4.4$</code> </pre><br><p>  Por lo tanto, el comando para instalar <b>git-subrepo</b> puede verse, por ejemplo, de la siguiente manera: <br></p><br><pre> <code class="bash hljs">bash-4.4$ make PREFIX=/usr install</code> </pre><br><p>  La presencia de la variable <b>DESTDIR nos</b> permite hacer un paquete para cualquier distribución de Linux sin esfuerzos adicionales (por supuesto, si no estamos en un entorno cruzado), lo que puede ser útil para los ingenieros de DevOps. <br></p><br><p>  Instale <b>git-subrepo</b> como root: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> git-subrepo/ bash-4.4$ make PREFIX=/usr install install -C -d -m 0755 /usr/libexec/git-core/ install -C -m 0755 lib/git-subrepo /usr/libexec/git-core/ install -C -d -m 0755 /usr/libexec/git-core/git-subrepo.d/ install -C -m 0755 lib/git-subrepo.d/<span class="hljs-built_in"><span class="hljs-built_in">help</span></span>-functions.bash lib/git-subrepo.d/bash+.bash /usr/libexec/git-core/git-subrepo.d/ install -C -d -m 0755 /usr/share/man/man1/ install -C -m 0644 man/man1/git-subrepo.1 /usr/share/man/man1/ bash-4.4$</code> </pre><br><p>  Para analizar las capacidades de <b>git-subrepo,</b> necesitamos un entorno de prueba simple donde podamos reproducir escenarios operativos estándar. <br></p><br><h3>  Entorno de prueba </h3><br><p>  Creamos tres directorios <b>propietario</b> , <b>remoto</b> , <b>usuario</b> , en el que colocamos modelos de repositorios locales y ascendentes del desarrollador y usuario. <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim _init.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh CWD=`pwd` mkdir remote owner user cd remote git init --bare build-system.git git init --bare platform.git cd ../owner git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd build-system echo -e "\n[master] build-system 1.0.0\n" &gt;README git add README git commit -m "init build-system master 1.0.0" git push cd ../platform echo -e "\n[master] platform 1.0.0\n" &gt;README git add README git commit -m "init platform master 1.0.0" git push cd ../../user git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd $CWD :wq bash-4.4$ bash-4.4$ ./_init.sh bash-4.4$</span></span></code> </pre><br><br><p>  Aqui <br></p><br><div class="scrollable-table"><table><tbody><tr><td>  <b><nobr>dueño</nobr></b> </td><td>  - </td><td>  directorio de trabajo del autor del proyecto; </td></tr><tr><td>  <b><nobr>remoto</nobr></b> </td><td>  - </td><td>  Un directorio que representa el servidor del autor de los proyectos, en el que se encuentran los repositorios aguas arriba de la <b>plataforma de</b> proyecto principal.git y el subproyecto <b>build-system.git</b> ; </td></tr><tr><td>  <b><nobr>usuario</nobr></b> </td><td>  - </td><td>  El directorio de trabajo del usuario o miembro del equipo de desarrollo. </td></tr></tbody></table></div><br><p>  El autor del proyecto y los usuarios tienen sus propias copias de repositorios ascendentes en sus máquinas, presentados en nuestro ejemplo en los directorios de <b>propietarios</b> y <b>usuarios</b> , respectivamente. <br></p><br><p>  La tarea del autor es incluir las siguientes características en el árbol principal de la <b>plataforma al</b> incluir el <b>subproyecto del sistema builld</b> en el árbol principal: <br></p><br><ul><li>  clone el repositorio principal con el subproyecto del <b>sistema de compilación</b> incluido en su estructura y no se preocupe por configurar versiones o revisiones.  Es decir, cada rama del repositorio de la <b>plataforma</b> debe corresponder a una revisión específica de una rama particular del repositorio del <b>sistema de compilación</b> y el usuario debe recibir un árbol fuente personalizado en una operación <em><b>git-clone (1)</b></em> , sin ninguna acción adicional. </li><li>  entregar sus cambios al repositorio de proyectos aguas arriba, tanto en el principal como en el auxiliar. </li><li>  recibir los cambios realizados por otros participantes o usuarios del proyecto, por supuesto, si tienen los derechos correspondientes. </li></ul><br><p>  Considere las acciones del autor que debe implementar para implementar estos requisitos. <br></p><br><h3>  Conexión de subproyecto </h3><br><p>  Para conectar un nuevo subárbol, use el comando <b>git subrepo clone</b> , que en su propósito es similar al comando <em><b>git-clone (1)</b></em> .  El parámetro requerido para el comando es la <b>URL del</b> repositorio remoto.  También puede especificar el directorio en el que se ubicarán el subproyecto y la rama del repositorio remoto.  Trabajaremos con ramas maestras, por lo tanto, en nuestro ejemplo, omitimos parámetros de comando innecesarios. <br></p><br><p>  Entonces, el autor del proyecto, en su máquina de trabajo, puede conectar el subproyecto del <b>sistema de compilación</b> utilizando el <b>clon git subrepo ../../remote/build-system.git/comando del sistema de compilación</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git/ build-system Subrepo <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master) cloned into <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>. bash-4.4$</code> </pre><br><p>  Considere qué cambios se han producido en el repositorio de la <b>plataforma</b> local: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ bash-4.4$ git subrepo status 1 subrepo: Git subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>: Remote URL: ../../remote/build-system.git Upstream Ref: b2f5079 Tracking Branch: master Pulled Commit: b2f5079 Pull Parent: b5e76a7 bash-4.4$</code> </pre><br><p>  El historial del subproyecto del <b>sistema de compilación</b> no se entrega al árbol principal; solo tenemos una confirmación aplastada, que se acompaña de información de fondo.  Esta información se encuentra bajo control de versión en el archivo <b>./build-system/.gitrepo/config</b> : <br></p><br><pre> <code class="plaintext hljs">[subrepo] remote = ../../remote/build-system.git branch = master commit = b2f507918f2821cb7dd90c33223ed5cc3c9922a2 parent = b5e76a713f895565b06ee3ccfa29f19131ba06dd method = merge cmdver = 0.4.1</code> </pre><br><p>  Se puede obtener información sobre los subproyectos usando el <b>comando git subrepo config</b> , por ejemplo, para averiguar la revisión del proyecto ascendente <b>remote / build-system.git</b> , que acaba de llegar al repositorio principal, usando el comando: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><blockquote>  <em>Cabe mencionar que el paquete <b>git-subrepo</b> original no guarda información sobre subproyectos en el archivo <b>.gitrepo / config</b> , sino en el archivo <b>.gitrepo</b> .</em> <br></blockquote><br><p>  Entonces, obtuvimos la última versión de la rama maestra del repositorio ascendente <b>remote / build-system.git</b> y la colocamos en el subdirectorio del <b>sistema de compilación</b> del proyecto de <b>plataforma</b> principal. <br></p><br><p>  Para entregar estos cambios en el repositorio ascendente <b>remote / platform.git</b> , el autor debe ejecutar el comando <b>git push</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git push Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 849 bytes | 849.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; master -&gt; master bash-4.4$</code> </pre><br><p>  Se puede obtener más información sobre los <b>comandos de git subrepo</b> desde el archivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ReadMe.pod</a> o en la línea de comandos <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>&gt;</code> </pre><br><p>  por ejemplo: <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span></code> </pre><br><p>  Considere ahora todo lo que sucede por parte del usuario. <br></p><br><br><h3>  Obteniendo código por los usuarios </h3><br><p>  En este momento, cuando el usuario aún no ha recibido una actualización de la <b>plataforma de</b> repositorio <b>up.git</b> , su copia contiene un <b>archivo README</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> user/platform/ bash-4.4$ ls README bash-4.4$</code> </pre><br><p>  que contiene una línea: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ cat README [master] platform 1.0.0 bash-4.4$</code> </pre><br><p>  Después de romper los cambios del repositorio aguas arriba <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 6 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (6/6), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/platform b5e76a7..6b831e4 master -&gt; origin/master Updating &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; Fast-forward build-system/.gitrepo/config | 12 ++++++++++++ build-system/README | 3 +++ 2 files changed, 15 insertions(+) create mode 100644 build-system/.gitrepo/config create mode 100644 build-system/README bash-4.4$</code> </pre><br><p>  el usuario tendrá a su disposición el código del subproyecto del <b>sistema de construcción</b> de exactamente la revisión que determinó el autor del proyecto.  El usuario puede actualizar la revisión actual en cualquier momento usando el comando <b>config</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system/ commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><p>  Es de destacar que el usuario no necesita realizar ajustes adicionales y puede confiar en el hecho de que el autor del proyecto le dio exactamente la revisión del <b>sistema de compilación</b> que es necesaria para que funcione la versión actual de la <b>plataforma</b> . <br></p><br><p>  Esto es exactamente lo que buscaba el autor del proyecto. <br></p><br><h3>  Entregar cambios a un proyecto aguas arriba </h3><br><p>  Supongamos ahora que nuestro usuario es miembro del proyecto y puede realizar cambios no solo en el repositorio ascendente <b>remote / platform.git</b> , sino también en el repositorio ascendente del <b>subproyecto remote / build-system.git</b> . <br></p><br><p>  Entonces, si el usuario realiza los cambios: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build-system/ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.1 bash-4.4$ bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update BS version to 1.0.1"</span></span> [master d30b001] update BS version to 1.0.1 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d30b001286b08708f5c30c1f5346a90e4339f969 (HEAD -&gt; master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 . . . bash-4.4$</code> </pre><br><p>  podrá colocarlos en repositorios aguas arriba de la siguiente manera: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo push build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pushed to <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Es importante señalar aquí que ...</b> <div class="spoiler_text"><p>  Dado que los archivos de configuración de los subproyectos <b>.gitrepo / config</b> se almacenan bajo control de versiones, el usuario debe enviar los cambios de estado del subproyecto al repositorio ascendente del proyecto principal <b>remote / platform.git</b> . <br></p><br><p>  Es decir, el usuario no debe olvidarse de verificar el estado del repositorio local y ejecutar el comando <em><b>git-push (1)</b></em> a tiempo. <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 2 commits. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ git push Enumerating objects: 14, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (14/14), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (9/9), 992 bytes | 992.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 9 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git d00be9f..deccb66 master -&gt; master bash-4.4$</code> </pre><br><p>  De lo contrario, la próxima vez que realice cambios en el repositorio ascendente, recibirá un conflicto de fusión. <br></p><br><p>  Por supuesto, no hay nada inusual aquí, sin embargo, después de ejecutar el <b>comando git subrepo push ...</b> , es fácil olvidarse del estado de la copia local del repositorio principal. <br></p><br></div></div><br><br><h3>  Trabajo directo con repositorio ascendente </h3><br><p>  Ahora considere lo que sucedió en el repositorio ascendente <b>remote / build-system.git</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 3 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (3/3), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/build-system b2f5079..d229920 master -&gt; origin/master Updating b2f5079..d229920 Fast-forward README | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d229920c7de34405bc7b8d47f36d420987687908 (HEAD -&gt; master, origin/master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 commit b2f507918f2821cb7dd90c33223ed5cc3c9922a2 Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:05:30 2018 +0300 init build-system master 1.0.0 bash-4.4$</code> </pre><br><p>  Es decir, el autor del proyecto recibió los cambios realizados por el participante del proyecto. <br></p><br><p>  Por supuesto, el autor puede realizar cambios directamente en el repositorio ascendente del proyecto del <b>sistema de compilación</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.2 bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update build-system version to 1.0.2"</span></span> [master 8255f59] update build-system version to 1.0.2 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ git push Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (3/3), 281 bytes | 281.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 3 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/build-system.git d229920..8255f59 master -&gt; master bash-4.4$</code> </pre><br><p>  Y todos los participantes, así como los usuarios del proyecto principal, podrán recibir estos cambios utilizando el <b>comando pull de git subrepo</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ bash-4.4$ git subrepo pull build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pulled from <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ git push Enumerating objects: 11, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (11/11), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 670 bytes | 670.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git 6b831e4..b6f4a7b master -&gt; master bash-4.4$</code> </pre><br><h2>  Conclusiones </h2><br><p>  Si el desarrollador no necesita almacenar el historial de subproyectos en el repositorio principal y, al entregar el código, opera con ramas en lugar de etiquetas fijas, entonces <b>git-subrepo</b> es bastante adecuado para organizar el trabajo diario. <br></p><br><p>  Condicionalmente, una de las desventajas de <b>git-subrepo</b> es el hecho de que la operación de <b>clonación de git subrepo</b> solo es posible en relación con las ramas de subproyectos.  En otras palabras, el usuario no puede conectar el subproyecto haciendo referencia a su etiqueta fija o una revisión específica, es decir, comandos como <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system -t 1.0.1 bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system 7f5d1113eb0bc6</code> </pre><br><p>  no valido <br></p><br><h3>  LITERATURA </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Git: fusión de subárbol</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Dominar git subtrees</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Dominar los submódulos git</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Git subrepo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El modelo de gestión de módulos de ramificación y git para un proyecto grande</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428493/">https://habr.com/ru/post/es428493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428481/index.html">Contratos digitales: una guía rápida para NO abogados</a></li>
<li><a href="../es428485/index.html">La mayoría de las personas molestas son publicidad irrelevante y el uso de gadgets en público.</a></li>
<li><a href="../es428487/index.html">Por qué Ruby on Rails es bueno y cómo acelera el desarrollo</a></li>
<li><a href="../es428489/index.html">Delgadez y grosor de los iconos. Sketch Pro, funciones de renderizado y un juego con grosor de línea</a></li>
<li><a href="../es428491/index.html">Optimización proactiva del rendimiento de la base de datos Oracle</a></li>
<li><a href="../es428495/index.html">Como hice un simulador de fútbol durante 13 años</a></li>
<li><a href="../es428497/index.html">Atenuador inalámbrico personalizado Noolite SUF-1-300</a></li>
<li><a href="../es428499/index.html">Espeluznantes gigantes azules pueden revelar los secretos de la evolución de las estrellas</a></li>
<li><a href="../es428501/index.html">DartUP: la primera conferencia en ruso sobre Dart y Flutter el 1 de diciembre en San Petersburgo</a></li>
<li><a href="../es428503/index.html">Descripción general del método de vector de referencia de algoritmo de aprendizaje automático (SVM)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>