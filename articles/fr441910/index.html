<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôçüèº üêä üë¥üèΩ Le livre ¬´Ma√Ætriser Kubernetes. Orchestration des architectures de conteneurs " üö∂üèæ ‚úçüèæ üõÄüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut, habrozhiteli! Nous avons r√©cemment publi√© un livre sur Kubernetes version 1.10. La publication a pass√© en revue le passage "Networking Solution...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le livre ¬´Ma√Ætriser Kubernetes. Orchestration des architectures de conteneurs "</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/441910/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/xd/js/pf/xdjspfcifagty4lu_leiajlxp1i.jpeg" align="left" alt="image"></a>  Salut, habrozhiteli!  Nous avons r√©cemment publi√© un livre sur Kubernetes version 1.10.  La publication a pass√© en revue le passage "Networking Solutions for Kubernetes" <br><br>  Le r√©seautage est un sujet vaste.  Il existe de nombreuses fa√ßons de configurer un r√©seau avec des appareils, des foyers et des conteneurs.  Kubernetes ne vous limite pas √† cela.  Tout ce que cette plateforme prescrit est un mod√®le de r√©seau de haut niveau avec un espace d'adressage plat pour les foyers.  Dans cet espace, vous pouvez impl√©menter de nombreuses bonnes solutions avec diff√©rentes capacit√©s et pour diff√©rents environnements.  Dans cette section, nous allons examiner certains d'entre eux et essayer de comprendre comment ils s'int√®grent dans le mod√®le de r√©seau Kubernetes. <br><a name="habracut"></a><br><h3>  Cr√©ation de ponts dans des clusters mat√©riels </h3><br>  L'environnement le plus simple est un cluster de m√©tal nu, qui est un r√©seau physique r√©gulier de niveau L2.  Pour connecter des conteneurs √† un tel r√©seau, vous pouvez utiliser le pont Linux standard.  Il s'agit d'une proc√©dure plut√¥t minutieuse qui n√©cessite de l'exp√©rience avec les commandes r√©seau Linux de bas niveau, telles que brctl, ip addr, ip route, ip link, nsenter, etc. Vous pouvez commencer √† impl√©menter une telle solution en lisant le guide suivant: blog.oddbit.com/ <br>  11/08/2014 / quatre-fa√ßons-de-connecter-un-docker / (recherchez la section Avec les p√©riph√©riques Linux Bridge). <br><br><h3>  Contiv </h3><br>  Contiv est un module compl√©mentaire r√©seau √† usage g√©n√©ral.  Il est con√ßu pour connecter des conteneurs via CNI et peut √™tre utilis√© avec Docker (directement), Mesos, Docker Swarm et, naturellement, Kubernetes.  Contiv traite des strat√©gies r√©seau et duplique partiellement un objet similaire dans Kubernetes.  Voici quelques-unes des fonctionnalit√©s de ce module compl√©mentaire r√©seau: <br><br><ul><li>  prise en charge de CNM dans libnetwork et de la sp√©cification CNI; </li><li>  Un moteur de strat√©gie riche en fonctionnalit√©s qui offre une s√©curit√© et un d√©ploiement d'application pr√©visible. </li><li>  les meilleures performances de conteneurs de leur cat√©gorie; </li><li>  sous-r√©seaux √† occupation multiple, isolement et chevauchement; </li><li>  Int√©gration IPAM et d√©couverte de services; </li><li>  large choix de topologies physiques: <br><br>  a) protocoles de couche 2 (VLAN); <br>  b) protocoles de couche 3 (BGP); <br>  c) r√©seaux superpos√©s; <br>  d) Cisco SDN (ACI); </li><li>  Prise en charge IPv6; </li><li>  politique √©volutive et allocation des itin√©raires; </li><li>  Int√©gration avec des mod√®les d'application, notamment: <br><br>  a) Docker-compose; <br>  b) gestionnaire de d√©ploiement Kubernetes; <br>  c) r√©partition de charge sur les services, int√©gr√©e √† l'√©quilibreur de microservices de type "est-ouest" (est-ouest); <br>  d) l'isolement du trafic pendant le stockage, le contr√¥le d'acc√®s (par exemple, etcd / consul), la transmission et la gestion du r√©seau. </li></ul><br>  Contiv a de nombreuses fonctionnalit√©s.  Cet outil met en ≈ìuvre un large √©ventail de t√¢ches et prend en charge diverses plates-formes, donc je ne sais pas si ce sera le meilleur choix pour Kubernetes. <br><br><h3>  Ouvrez vswitch </h3><br>  Open vSwitch est une solution de commutateur (logiciel) de commutateur virtuel mature prise en charge par de nombreux acteurs majeurs du march√©.  Le syst√®me Open Virtualization Network (OVN) vous permet de cr√©er diverses topologies de r√©seau virtuel.  Elle dispose d'un module compl√©mentaire sp√©cial pour Kubernetes, mais il est tr√®s difficile √† configurer (voir le manuel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/openvswitch/ovn-kubernetes</a> ).  Le module compl√©mentaire Linen CNI a moins de fonctionnalit√©s, mais sa configuration est beaucoup plus simple: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/John-Lin/linen-cni</a> .  La structure Linen CNI est illustr√©e √† la Fig.  10.6. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/da/ub/a2/dauba2alxiaawikcjradox2yrcu.png" alt="image"></div><br>  Open vSwitch peut int√©grer des serveurs physiques, des machines virtuelles et des pods / conteneurs dans un seul r√©seau logique.  Ce syst√®me prend en charge les modes superposition et physique. <br><br>  Voici quelques-unes de ses principales caract√©ristiques: <br><br><ul><li>  VLAN 802.1Q standard avec jonction et ports publics </li><li>  Liaison NIC avec ou sans LACP pour un commutateur de niveau sup√©rieur </li><li>  NetFlow, sFlow¬Æ et la mise en miroir pour une meilleure visibilit√©; </li><li>  Configuration QoS (Qualit√© de service) plus politiques; </li><li>  tunneling via Geneve, GRE, VXLAN, STT et LISP; </li><li>  contr√¥le des ruptures dans 802.1ag; </li><li>  OpenFlow 1.0 et de nombreux modules compl√©mentaires; </li><li>  base de donn√©es transactionnelle pour stocker la configuration avec des liaisons pour C et Python; </li><li>  redirection haute performance √† l'aide de modules du noyau Linux. </li></ul><br><h3>  Nuage Networks VCS </h3><br>  Virtualized Cloud Services (VCS) est un produit de Nuage, qui est une plate-forme bien √©volutive bas√©e sur des politiques pour la cr√©ation de r√©seaux d√©finis par logiciel (Software-Defined Networking, SDN).  Il s'agit d'une solution de niveau entreprise bas√©e sur le syst√®me Open Open vSwitch (pour la redirection des donn√©es) et un contr√¥leur SDN multifonctionnel bas√© sur des normes ouvertes. <br><br>  La plateforme Nuage combine des pods Kubernetes et des environnements tiers (virtuels et mat√©riels) en r√©seaux de superposition transparents et vous permet de d√©crire des politiques d√©taill√©es pour diff√©rentes applications.  Son moteur d'analyse en temps r√©el vous permet de surveiller la visibilit√© et la s√©curit√© des applications Kubernetes. <br><br>  De plus, tous les composants VCS peuvent √™tre install√©s en tant que conteneurs.  Il n'y a pas de configuration mat√©rielle sp√©cifique. <br><br><h3>  Canal </h3><br>  Canal est un m√©lange de deux projets open source: Calico et Flannel.  D'o√π le nom.  Le projet Flannel, d√©velopp√© par l'√©quipe CoreOS, traite des capacit√©s de mise en r√©seau des conteneurs, tandis que Calico est responsable des politiques de r√©seau.  Initialement, ils ont √©t√© d√©velopp√©s s√©par√©ment les uns des autres, mais les utilisateurs voulaient les utiliser ensemble.  Le projet open source Canal est maintenant un mod√®le de d√©ploiement pour installer Calico et Flannel en tant que modules compl√©mentaires CNI distincts.  Cr√©√©e par les fondateurs de Calico, Tigera a soutenu les deux projets et a m√™me pr√©vu une int√©gration plus √©troite, mais depuis la sortie de sa propre solution de mise en r√©seau s√©curis√©e entre les applications dans Kubernetes, la priorit√© s'est d√©plac√©e vers la simplification de la configuration et de l'int√©gration de Flannel et Calico au lieu de d√©velopper une solution unifi√©e.  Dans la fig.  10.7 montre l'√©tat actuel du syst√®me Canal et sa relation avec les plateformes d'orchestration telles que Kubernetes et Mesos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ch/qr/vu/chqrvuopqwdteccwbfaxsc40qp8.png" alt="image"></div><br>  Notez que lors de l'int√©gration avec Kubernetes, Canal n'acc√®de pas directement √† etcd, mais au serveur API Kubernetes. <br><br><h3>  Flanelle </h3><br>  Flannel est un r√©seau virtuel qui fournit √† chaque n≈ìud un r√©seau virtuel pour travailler avec les temps d'ex√©cution des conteneurs.  Sur chaque n≈ìud, l'agent flaneld est lanc√©, augmentant le sous-r√©seau en fonction de l'espace d'adressage r√©serv√© stock√© dans le cluster etcd.  L'√©change de paquets entre les conteneurs et, dans l'ensemble, le n≈ìud est effectu√© par l'un des nombreux serveurs.  Le plus souvent, le serveur utilise UDP sur le p√©riph√©rique TUN qui, par d√©faut, tunnelise le trafic via le port 8285 (n'oubliez pas de l'ouvrir dans votre pare-feu). <br><br>  Dans la fig.  10.8 d√©crit en d√©tail les diff√©rents composants du r√©seau Flannel, les p√©riph√©riques de r√©seau virtuel qu'il cr√©e et comment ils communiquent avec l'h√¥te et le foyer via le pont docker0.  Ici, vous pouvez √©galement voir le processus d'encapsulation des paquets UDP et leur mouvement entre les n≈ìuds. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/go/ns/-h/gons-hy67hf_tg_9t_yqerodtjm.png" alt="image"></div><br>  D'autres technologies r√©seau sont prises en charge: <br><br><ul><li>  vxlan - encapsule les paquets en utilisant VXLAN √† l'int√©rieur du noyau; </li><li>  host-gw - cr√©e des routes IP vers des sous-r√©seaux via les adresses IP du serveur distant.  Il convient de noter que cela n√©cessite une connexion directe au niveau de la deuxi√®me couche r√©seau entre les serveurs ex√©cutant Flannel; </li><li>  aws-vpc - Cr√©er des routes IP dans la table de routage Amazon VPC </li><li>  gce - cr√©e des routes IP dans le r√©seau Google Compute Engine </li><li>  alloc - effectue uniquement la s√©lection du sous-r√©seau, mais pas la redirection des paquets; </li><li>  ali-vpc - Cr√©e des routes IP dans la table de routage Alicloud VPC. </li></ul><br><h3>  Projet Calico </h3><br>  Calico est une solution compl√®te de mise en r√©seau entre conteneurs et s√©curit√© r√©seau.  Il peut √™tre int√©gr√© √† toutes les principales plates-formes d'orchestration et runtimes: <br><br><ul><li>  Kubernetes (module compl√©mentaire pour CNI); </li><li>  Mesos (module compl√©mentaire pour CNI); </li><li>  Docker (module compl√©mentaire pour libnework); </li><li>  OpenStack (module compl√©mentaire pour Neutron). </li></ul><br>  Calico peut √©galement √™tre d√©ploy√© localement ou dans un cloud public tout en pr√©servant toutes les fonctionnalit√©s.  L'application des politiques de r√©seau peut d√©pendre de la charge, ce qui permet un contr√¥le clair du trafic et garantit que les paquets atteignent toujours les destinations souhait√©es.  Calico peut automatiquement importer des strat√©gies r√©seau √† partir de plates-formes d'orchestration.  En fait, il est responsable de la mise en ≈ìuvre des politiques de r√©seau chez Kubernetes. <br><br><h3>  Romana </h3><br>  Romana est une solution moderne de mise en r√©seau entre conteneurs.  Il a √©t√© initialement con√ßu pour √™tre utilis√© dans le cloud et fonctionne sur la troisi√®me couche r√©seau, en s'appuyant sur des m√©thodes standard de gestion des adresses IP.  Romana vous permet d'isoler des r√©seaux entiers en leur cr√©ant des passerelles et des itin√©raires √† l'aide de serveurs Linux.  Le travail sur la troisi√®me couche r√©seau ne n√©cessite pas d'encapsulation.  La strat√©gie r√©seau est appliqu√©e √† tous les points de terminaison et services en tant que pare-feu distribu√©.  Romana facilite les d√©ploiements locaux et hybrides entre diff√©rentes plates-formes cloud, car vous n'avez plus besoin de configurer de r√©seaux de superposition virtuels. <br><br>  R√©cemment apparus dans Romana, les adresses IP virtuelles permettent aux utilisateurs locaux d'ouvrir l'acc√®s √† leurs services dans les r√©seaux locaux du deuxi√®me niveau, en utilisant des adresses externes et des sp√©cifications de service. <br><br>  Les d√©veloppeurs de Romana affirment que leur approche am√©liore consid√©rablement les performances.  Dans la fig.  La figure 10.9 montre comment, en √©vitant l'encapsulation VXLAN, vous pouvez vous d√©barrasser de beaucoup de surcharge. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kj/oz/fu/kjozfu8izlqy6thamshes1d5evi.png" alt="image"></div><br><h3>  Filet tiss√© </h3><br>  Les principales caract√©ristiques du projet Weave Net sont la facilit√© d'utilisation et le manque de configuration.  Il utilise l'encapsulation VXLAN et installe des micro-DNS sur chaque n≈ìud.  En tant que d√©veloppeur, vous aurez affaire √† un niveau d'abstraction √©lev√©.  Apr√®s avoir nomm√© vos conteneurs, Weave Net vous permettra de vous connecter aux ports standard et d'activer les services appropri√©s.  Cela facilite la migration des applications existantes vers les plateformes de microservices et de conteneurisation.  Weave Net fournit un module compl√©mentaire CNI pour travailler avec Kubernetes et Mesos.  √Ä partir de Kubernetes 1.4, l'int√©gration avec Weave Net peut √™tre r√©alis√©e avec une seule commande qui d√©ploie DaemonSet: <br><br><pre><code class="plaintext hljs">kubectl apply -f https://git.io/weave-kube</code> </pre> <br>  Les pods Weave Net h√©berg√©s sur chaque n≈ìud sont responsables de la connexion de toute autre instance de pod au r√©seau Weave.  Weave Net prend en charge les API avec des politiques de r√©seau, fournissant une solution compl√®te et facile √† configurer. <br><br><h3>  Utilisation efficace des politiques de r√©seau </h3><br>  La strat√©gie r√©seau de Kubernetes est con√ßue pour contr√¥ler le trafic dirig√© vers des pods et des espaces de noms sp√©cifiques.  Lors de la gestion de centaines de microservices d√©ploy√©s (comme c'est souvent le cas avec Kubernetes), la mise en r√©seau entre les foyers prend le dessus.  Il est important de comprendre que ce m√©canisme n'est qu'indirectement li√© √† la s√©curit√©.  Si un attaquant est capable de p√©n√©trer le r√©seau interne, il sera tr√®s probablement en mesure de cr√©er sa propre instance du foyer qui sera conforme √† la politique du r√©seau et permettra une communication gratuite avec d'autres foyers.  Dans la section pr√©c√©dente, nous avons examin√© diverses solutions de mise en r√©seau dans Kubernetes, en nous concentrant sur les interfaces r√©seau.  Ici, nous nous concentrerons sur la politique de r√©seau mise en ≈ìuvre au-dessus de ces solutions, bien que les deux composants soient √©troitement interconnect√©s. <br><br><h3>  Architecture de strat√©gie r√©seau dans Kubernetes </h3><br>  La strat√©gie de r√©seau d√©termine la mani√®re dont les sous-ensembles de foyers peuvent interagir entre eux et avec les autres points de terminaison du r√©seau.  La ressource NetworkPolicy utilise des √©tiquettes pour s√©lectionner les foyers et d√©finit une liste de r√®gles d'autorisation qui permettent au trafic d'√™tre dirig√© vers les instances de foyers s√©lectionn√©es (en plus de ce qui est d√©j√† autoris√© par la strat√©gie d'isolement dans l'espace de noms donn√©). <br><br>  ¬ªPlus d'informations sur le livre sont disponibles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web de l'√©diteur</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Contenu</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Extrait</a> <br><br>  20% de r√©duction sur le <b>Khabrozhitel</b> - <b>Kubernetes</b> <br><br>  Lors du paiement de la version papier du livre, une version √©lectronique du livre est envoy√©e par e-mail. <br><br>  PS: 7% du co√ªt du livre ira √† la traduction de nouveaux livres informatiques, la liste des livres remis √† l'imprimerie est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441910/">https://habr.com/ru/post/fr441910/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441900/index.html">Satya Nadella a parl√© de coop√©ration avec le Pentagone</a></li>
<li><a href="../fr441902/index.html">Comment la technologie cr√©e de nouvelles r√©alit√©s</a></li>
<li><a href="../fr441904/index.html">Installation d'un √©cran IPS sur le Thinkpad T430S</a></li>
<li><a href="../fr441906/index.html">D√©ployons sur Openshift</a></li>
<li><a href="../fr441908/index.html">La m√©decine num√©rique peut-elle r√©sister aux pirates</a></li>
<li><a href="../fr441914/index.html">L'√®re de l'√©conomie des impressions est d√©j√† proche. Technologies du futur √† la maison</a></li>
<li><a href="../fr441916/index.html">Une r√©alit√© qui travaille dur - Xichang Satellite Launch Center - XSLC</a></li>
<li><a href="../fr441918/index.html">Nous sommes dans UltraHD Morty! Comment regarder n'importe quel film en 4K</a></li>
<li><a href="../fr441920/index.html">Strat√©gie de s√©curit√© de l'information: avez-vous d√©cid√© de la marche √† suivre?</a></li>
<li><a href="../fr441928/index.html">Lancez l'application dans Openshift et comparez les outils existants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>