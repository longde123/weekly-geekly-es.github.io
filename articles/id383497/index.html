<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦎 👨‍🏭 🔒 Porting Lode Runner dari BC ke UKNC #⃣ 👊🏿 📤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada bulan Maret-Mei tahun ini, saya menghabiskan beberapa minggu (di malam hari dan akhir pekan) untuk memindahkan mainan Lode Runner dari BK-0010 ke...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Porting Lode Runner dari BC ke UKNC</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383497/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada bulan Maret-Mei tahun ini, saya menghabiskan beberapa minggu (di malam hari dan akhir pekan) untuk memindahkan mainan Lode Runner dari BK-0010 ke UKSC. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuplikan layar menu porting:</font></font><br>
<img src="https://habrastorage.org/files/1d3/d35/f41/1d3d35f4111c4f4c9e4324d8e285ea26.png"><br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layar permainan versi porting: </font></font><br>
<img src="https://habrastorage.org/files/4f0/798/b1f/4f0798b1ff524bcab9d1a8039ccd8473.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BK-0010 adalah komputer rumah tangga pada akhir 1980-an dan awal 1990-an, dan sebagian lagi komputer sekolah (kelas KUVT-86). </font><font style="vertical-align: inherit;">UKSC adalah komputer sekolah tahun 1990-an. </font><font style="vertical-align: inherit;">BC dan UKSC sebagian kompatibel dalam arsitektur dan sistem perintah - kedua komputer berasal dari keluarga PDP-11.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilihan permainan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sampai tahun ini, saya tidak menulis sesuatu yang serius di bawah UKSC, tetapi saya harus memahami kode mesin. </font><font style="vertical-align: inherit;">Ada keinginan untuk menulis sesuatu, tetapi biasanya saya memiliki masalah besar dengan waktu luang, sehingga tidak akan berhasil dari awal. </font><font style="vertical-align: inherit;">Dan sebagai permulaan, lebih baik mengambil tugas lebih mudah. </font><font style="vertical-align: inherit;">Saat porting, jumlah pekerjaan biasanya jauh lebih sedikit daripada saat menulis dari awal - Anda terutama menghadapi masalah ketidakcocokan antara kedua sistem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di forum zx.pk.ru (salah satu tempat di mana penggemar retrocomputing pada umumnya dan mesin yang kompatibel dengan PDP-11 pada khususnya nongkrong), peserta hobot </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memuji implementasi Lode Runner di BC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ini sebenarnya alasannya, untuk awalnya saya mencoba untuk “melihat” pada kode mainan , yah, terlibat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menu versi asli:</font></font><br>
<img src="https://habrastorage.org/files/8ba/13b/271/8ba13b271f1c441e9f561d6dd4998e0b.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layar game dari versi asli (pada monitor warna):</font></font><br>
<img src="https://habrastorage.org/files/e7a/798/d50/e7a798d5016f47129bc81b51ddfa59bb.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rekayasa terbalik</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa minggu di malam hari dan akhir pekan saya menghabiskan waktu menganalisis dan membongkar. </font><font style="vertical-align: inherit;">Dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emulator, BKBTL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menambahkan kemampuan untuk mengumpulkan </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">jejak</font></a><font style="vertical-align: inherit;"> - yaitu, setiap instruksi dibongkar dan disimpan ke file teks. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menjalankan bagian yang menarik minat saya dengan merekam jejak, kemudian saya mematikan jejak (sort &amp; uniq) - Saya mendapatkan potongan-potongan logika. </font><font style="vertical-align: inherit;">Saya menambahkan komentar untuk ini, saya secara bertahap mendapatkan file umum.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedengarannya sederhana, tetapi sebenarnya itu adalah pekerjaan yang agak rumit berdasarkan dugaan dan konfirmasi atau sanggahan mereka. Sebagai contoh, kita melihat bahwa alamat 001756 sebelum dimulainya permainan mendapat nilai 10, kemudian dikurangi, ketika mencapai 0, permainan berakhir - tampaknya, ini adalah jumlah nyawa. Kami menemukan konfirmasi ini, kami menempatkan komentar pada teks di mana alamat ini muncul. Ini adalah contoh yang cukup sederhana, dalam kasus yang lebih kompleks saya menghabiskan banyak waktu untuk mencari tahu apa yang terjadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika volume yang diterima menjadi cukup besar (40+ KB teks, lebih dari 1.500 baris) dan saya menemukan setidaknya secara umum apa yang terjadi, bagaimana itu disimpan dan ditampilkan - saya mulai berpikir bagaimana menerjemahkannya ke UKSC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda dapat melihat daftar akhir yang dihasilkan dari pembongkaran:</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/nzeemin/uknc-loderunner/blob/master/original/loderunner.lst</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Labirin</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap labirin adalah 20 garis 30 blok, total 600 blok. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis blok dikodekan oleh angka dari 0 hingga 7 - tiga bit, triplet. </font><font style="vertical-align: inherit;">Untuk satu kata 16-bit, 5 triplet lengkap diperoleh. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika bekerja dengan mesin seperti PDP-11, sistem 8-desimal banyak digunakan, oleh karena itu cukup nyaman untuk menggunakan kembar tiga. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, setiap labirin cocok menjadi 240 byte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis Blok:</font></font><br>
<pre><code class="hljs haskell">;	<span class="hljs-number">0</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">1</span> <span class="hljs-comment">--  </span>
;	<span class="hljs-number">2</span> <span class="hljs-comment">--  </span>
;	<span class="hljs-number">3</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">4</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">5</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">6</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">7</span> <span class="hljs-comment">-- </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sprite dari objek-objek ini disusun dalam urutan penomoran tipe blok. </font><font style="vertical-align: inherit;">Ketika labirin didekodekan, pada saat yang sama "gambar labirin" dibuat dalam memori (dengan byte per blok), dan keadaan awal labirin digambar di layar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisasi layar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada BC, layar dialamatkan langsung oleh akses memori, garis-garis berjalan satu demi satu, sebenarnya itu adalah "framebuffer", dan saya akan mengatakan bahwa ini hebat - sangat nyaman untuk pemrograman grafis. Line BC - 256 piksel warna, 64 byte per baris. Tetapi berapa banyak piksel dalam satu baris tergantung pada bagaimana Anda menghubungkan monitor: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
jika dalam warna hitam dan putih, maka itu adalah 512 b / w piksel dalam satu baris (1 bit per piksel, 8 piksel per byte), </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan jika itu untuk output warna , maka ini adalah 256 piksel warna per baris (2 bit per piksel, 4 piksel per byte).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di UKSC, organisasi layar benar-benar berbeda, dan jauh lebih rumit. </font><font style="vertical-align: inherit;">Layar terletak di tiga blok memori, tiga "paket". </font><font style="vertical-align: inherit;">Dan setiap piksel adalah tiga bit, sedikit di setiap bidang - kami mendapatkan 8 warna. </font><font style="vertical-align: inherit;">Di UKSC kami memiliki beberapa mode video - 640 × 288, 320 × 288, 160 × 288, lebih tepatnya, kami selalu memiliki tepat 288 garis dan Anda dapat menerapkan pembagi Anda sendiri untuk setiap baris individu, mendapatkan resolusi horizontal yang berbeda. </font><font style="vertical-align: inherit;">Untuk central processing unit (CPU), paket layar tidak dapat diakses secara langsung, hanya melalui akses ke port. </font><font style="vertical-align: inherit;">Selain itu, hanya dua dari tiga paket yang tersedia untuk CPU. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, mode 320 × 288 cocok untuk saya - garis diperoleh dalam 320 piksel warna sepanjang 80 byte di masing-masing dari tiga paket. </font><font style="vertical-align: inherit;">Jika Anda menggunakan dua paket, maka pikselnya juga empat warna - hampir seperti pada BC.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perpaduan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia mulai menulis contoh dalam assembler dari UKSC dan sedikit tertekan - karena siklus "dikompilasi - terhubung - diluncurkan" agak lambat. Masalahnya ada di alat. Ada MACRO11 lintas-assembler, meskipun agak buggy. Tetapi tidak ada cross-linker. Tapi untungnya, belum lama berselang Patron memposting konsol RT-11: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zx-pk.ru/showthread.php?t=24755</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - sebenarnya itu adalah emulator dari mesin yang kompatibel dengan PDP11 yang berinteraksi dengan baris perintah OS seperti halnya dengan terminal. Dengan demikian, menjadi mungkin untuk menyusun dan menghubungkan sarana asli RT-11. Ini saya anggap sebagai terobosan nyata, secara dramatis mempercepat pekerjaan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, semuanya berjalan dengan baik, saya membuat gambar dari frame lapangan bermain, merender sprite, menemukan cara mencampur bit dalam sprite (saya menulis sebuah program dalam C # untuk mencampurnya), kemudian dalam blok saya mulai mentransfer kode dari file bersama dengan disasma ke sumber baru. Saya mengambil dump memori dari BC, mengalokasikan blok di mana levelnya, utilitas RT11 DUMP membuat buku teks untuk level-level tersebut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, saya mentransfer satu blok kode yang menampilkan level, dalam hal ini saya mengurangi output sprite. Kemudian dia mulai mentransfer logika permainan. Itu secara umum, transfer hampir satu-ke-satu, dengan pengecualian tempat di mana layar berjalan. Oleh karena itu, ada beberapa tempat dalam logika yang saya tidak mengerti bagaimana mereka bekerja (AI AI yang sama), tetapi itu tidak masalah - yang utama adalah mereka bekerja. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, pada awal Mei (ketika pekerjaan utama menyerap saya lagi), sebuah opsi kerja diperoleh, meskipun tanpa suara.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foto permainan yang sedang bekerja di mesin nyata (terima kasih hobot):</font></font><br>
<img src="https://habrastorage.org/files/08e/a17/867/08ea17867ee7451794d3f5c7d099c698.jpg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referensi</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zx-pk.ru/showthread.php?t=24886</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - utas tentang topik ini di zx.pk.ru</font></font></li>
</ul></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id383497/">https://habr.com/ru/post/id383497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id383485/index.html">The Void: taman hiburan dalam realitas virtual</a></li>
<li><a href="../id383489/index.html">Platform musik SoundCloud diserang oleh pemegang hak cipta</a></li>
<li><a href="../id383491/index.html">Облачный сервер в Нидерландах и США до 2-х месяцев бесплатно для зарегистрированных пользователей geektimes</a></li>
<li><a href="../id383493/index.html">Petisi tentang pemberian warga negara hak untuk secara mandiri mendistribusikan pajak mereka sendiri</a></li>
<li><a href="../id383495/index.html">Bertahan hidup di Rusia. “Husky, repost, tweet: bagaimana tidak melanggar undang-undang anti-ekstremis”</a></li>
<li><a href="../id383499/index.html">Notch mengalami masa-masa sulit</a></li>
<li><a href="../id383501/index.html">Di Amerika Serikat meluncurkan percobaan untuk mensimulasikan penerbangan ke Mars yang berlangsung selama 365 hari</a></li>
<li><a href="../id383503/index.html">Photocell Perovskite: lima gram per meter persegi</a></li>
<li><a href="../id383505/index.html">EJTAG: atraksi untuk peretas-2</a></li>
<li><a href="../id383507/index.html">Proyek Pangkalan Bulan: Sejarah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>