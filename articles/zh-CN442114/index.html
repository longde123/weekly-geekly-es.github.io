<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘â€ğŸ¤â€ğŸ§‘ ğŸ—œï¸ ğŸœ æ™ºèƒ½åˆçº¦è‡ªåŠ¨å®¡æ ¸æŒ‡å—ã€‚ ç¬¬3éƒ¨åˆ†ï¼šç§˜é“¶ ğŸ¦• ğŸ‘¨â€ğŸ“ ğŸŒŸ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è­¦å‘Š 


 æœ¬æ–‡æœªå¯¹è‡ªåŠ¨åˆ†æä»ªçš„æœ‰æ•ˆæ€§è¿›è¡Œè¯„çº§ã€‚ æˆ‘å°†å®ƒä»¬åº”ç”¨äºæˆ‘è‡ªå·±çš„åˆåŒï¼Œæœ‰æ„åœ°ç»¼åˆé”™è¯¯å¹¶ç ”ç©¶ååº”ã€‚ æ­¤ç±»ç ”ç©¶ä¸èƒ½æˆä¸ºç¡®å®šâ€œä¼˜åŠ£â€çš„åŸºç¡€ï¼›å› æ­¤ï¼Œå¯¹å¤§é‡åˆåŒæ ·æœ¬è¿›è¡Œç›²ç›®ç ”ç©¶æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè€ƒè™‘åˆ°æ­¤ç±»è½¯ä»¶çš„åå¤æ— å¸¸ï¼Œè¿™éå¸¸å›°éš¾ã€‚ åˆåŒä¸­çš„å°é”™è¯¯å¾ˆå¯èƒ½ä¼šç¦ç”¨å¤§é‡çš„åˆ†æå™¨é€»è¾‘ï¼Œè€Œç®€å•çš„å¯å‘å¼ç¬¦å·å¯èƒ½ä¼šé€šè¿‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ™ºèƒ½åˆçº¦è‡ªåŠ¨å®¡æ ¸æŒ‡å—ã€‚ ç¬¬3éƒ¨åˆ†ï¼šç§˜é“¶</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442114/"><h2 id="warning">  <strong>è­¦å‘Š</strong> </h2><br><p> æœ¬æ–‡æœªå¯¹è‡ªåŠ¨åˆ†æä»ªçš„æœ‰æ•ˆæ€§è¿›è¡Œè¯„çº§ã€‚ æˆ‘å°†å®ƒä»¬åº”ç”¨äºæˆ‘è‡ªå·±çš„åˆåŒï¼Œæœ‰æ„åœ°ç»¼åˆé”™è¯¯å¹¶ç ”ç©¶ååº”ã€‚ æ­¤ç±»ç ”ç©¶ä¸èƒ½æˆä¸ºç¡®å®šâ€œä¼˜åŠ£â€çš„åŸºç¡€ï¼›å› æ­¤ï¼Œå¯¹å¤§é‡åˆåŒæ ·æœ¬è¿›è¡Œç›²ç›®ç ”ç©¶æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè€ƒè™‘åˆ°æ­¤ç±»è½¯ä»¶çš„åå¤æ— å¸¸ï¼Œè¿™éå¸¸å›°éš¾ã€‚ åˆåŒä¸­çš„å°é”™è¯¯å¾ˆå¯èƒ½ä¼šç¦ç”¨å¤§é‡çš„åˆ†æå™¨é€»è¾‘ï¼Œè€Œç®€å•çš„å¯å‘å¼ç¬¦å·å¯èƒ½ä¼šé€šè¿‡å‘ç°ç«äº‰å¯¹æ‰‹æ ¹æœ¬æ— æ³•æ·»åŠ çš„æ™®éé”™è¯¯è€Œä¸ºåˆ†æå™¨å¢åŠ å¤§é‡ç‚¹ã€‚ åˆåŒç¼–åˆ¶å’Œç¼–åˆ¶ä¸­çš„é”™è¯¯ä¹Ÿå¯èƒ½èµ·ä½œç”¨ã€‚ æ‰€æ¶‰åŠçš„æ‰€æœ‰è½¯ä»¶éƒ½è¿˜å¾ˆå¹´è½»ï¼Œå¹¶ä¸”æ­£åœ¨ä¸æ–­å¼€å‘ä¸­ï¼Œå› æ­¤ä¸è¦å°†æ‰¹è¯„æ„è§è§†ä¸ºä¸å¯å¼¥è¡¥çš„é—®é¢˜ã€‚ </p><br><p>æœ¬æ–‡çš„ç›®çš„æ˜¯ä½¿è¯»è€…äº†è§£ä¸åŒåˆ†æå™¨ä¸­çš„ä»£ç åˆ†ææ–¹æ³•å¦‚ä½•å·¥ä½œä»¥åŠæ­£ç¡®ä½¿ç”¨å®ƒä»¬çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯â€œåšå‡ºé€‰æ‹©â€ã€‚ åˆç†çš„é€‰æ‹©æ˜¯ä¸€æ¬¡ä½¿ç”¨å¤šä¸ªå·¥å…·ï¼Œé‡ç‚¹æ”¾åœ¨æœ€é€‚åˆæ‰€åˆ†æåˆåŒçš„å·¥å…·ä¸Šã€‚ </p><a name="habracut"></a><br><h2 id="nastroyka-i-podgotovka-k-zapusku">  <strong>è®¾ç½®å’Œå¯åŠ¨å‡†å¤‡</strong> </h2><br><p>  Mythrilä¸€æ¬¡ä½¿ç”¨å‡ ç§ç±»å‹çš„åˆ†æï¼Œä»¥ä¸‹æ˜¯æœ‰å…³å®ƒçš„å‡ ç¯‡å¥½æ–‡ç« ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ€é‡è¦çš„</a>æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">this</a>æˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">this</a> ã€‚ åœ¨ç»§ç»­ä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆé˜…è¯»å®ƒä»¬ã€‚ </p><br><p> é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ„å»ºè‡ªå·±çš„Mythril Dockeré•œåƒï¼ˆæˆ‘ä»¬æƒ³è¦æ›´æ”¹å…¶ä¸­çš„å†…å®¹æ˜¯å¦é‡è¦ï¼Ÿï¼‰ï¼š </p><br><pre><code class="plaintext hljs">git clone https://github.com/ConsenSys/mythril-classic.git cd mythril-classic docker build -t myth .</code> </pre> <br><p> ç°åœ¨ï¼Œå°è¯•åœ¨æˆ‘ä»¬çš„<code>contracts/flattened.sol</code> ï¼ˆæˆ‘ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼•è¨€</a>ä¸­è®¨è®ºçš„åŒä¸€åˆåŒï¼‰ä¸Šè¿è¡Œå®ƒï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªä¸»è¦åˆåŒï¼Œ <code>Ownable</code>æ˜¯Zeppelinæ‹¥æœ‰çš„å’Œ<code>Booking</code> ã€‚ æˆ‘ä»¬ä»ç„¶å¯¹ç¼–è¯‘å™¨ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œæˆ‘ä»¥ä¸ä¸Šä¸€ç¯‡æ–‡ç« ç›¸åŒçš„æ–¹å¼ä¿®å¤äº†å®ƒï¼Œåœ¨Dockerfileä¸­æ·»åŠ äº†å°†æ›¿æ¢ç¼–è¯‘å™¨ç‰ˆæœ¬çš„è¡Œï¼š </p><br><pre> <code class="plaintext hljs">COPY --from=ethereum/solc:0.4.20 /usr/bin/solc /usr/bin</code> </pre> <br><p> é‡å»ºå›¾åƒåï¼Œæ‚¨å¯ä»¥å°è¯•è¿è¡ŒåˆåŒåˆ†æã€‚ ç«‹å³è®©æˆ‘ä»¬ä½¿ç”¨<code>-v4</code>å’Œ<code>--verbose-report</code>æ ‡å¿—æŸ¥çœ‹æ‰€æœ‰è­¦å‘Šã€‚ å‡ºå‘ï¼š </p><br><pre> <code class="plaintext hljs">docker run -v $(pwd):/tmp \ -w /tmp myth:latest \ -v4 \ --verbose-report \ -x contracts/flattened.sol</code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨æ²¡æœ‰ä¾èµ–æ€§çš„æ‰å¹³åˆçº¦ã€‚ è¦åˆ†æå•ç‹¬çš„<code>Booking.sol</code>åˆåŒå¹¶è®©Mythrilæå–æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š </p><br><pre> <code class="plaintext hljs">docker run -v $(pwd):/tmp \ -w /tmp myth:latest \ --solc-args="--allow-paths /tmp/node_modules/zeppelin-solidity/ zeppelin-solidity=/tmp/node_modules/zeppelin-solidity" \ -v4 \ --verbose-report \ -x contracts/Booking.sol</code> </pre> <br><p> æˆ‘æ›´å–œæ¬¢ä½¿ç”¨å±•å¹³é€‰é¡¹ï¼Œå› ä¸º æˆ‘ä»¬å°†åœ¨ä»£ç ä¸­è¿›è¡Œå¾ˆå¤šä¿®æ”¹ã€‚ ä½†æ˜¯Mythrilä¹Ÿæœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„æ¨¡å¼<code>--truffle</code> ï¼Œè¯¥æ¨¡å¼ä»…<code>--truffle</code> <code>truffle</code>æ‰€æœ‰å†…å®¹ï¼Œå¹¶æ£€æŸ¥æ•´ä¸ªé¡¹ç›®æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚ å¦ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯èƒ½å¤Ÿé€šè¿‡å†’å·æŒ‡å®šè¦åˆ†æçš„åˆåŒåç§°çš„åŠŸèƒ½ï¼Œå¦åˆ™Mythrilå°†åˆ†æå®ƒé‡åˆ°çš„æ‰€æœ‰åˆåŒã€‚ æˆ‘ä»¬è®¤ä¸º<code>Ownable</code>çš„Ownableæ˜¯ä¸€ä¸ªå®‰å…¨çš„åˆåŒï¼Œæˆ‘ä»¬åªæ‰“ç®—åˆ†æ<code>Booking</code> ï¼Œæ‰€ä»¥è¿è¡Œçš„æœ€åä¸€è¡Œæ˜¯ï¼š </p><br><pre> <code class="plaintext hljs">docker run -v $(pwd):/tmp -w /tmp myth:latest -x contracts/flattened.sol:Booking -v4 --verbose-report</code> </pre> <br><h2 id="zapusk-i-deploy-kontrakta">  <strong>å¯åŠ¨å’Œéƒ¨ç½²åˆåŒ</strong> </h2><br><p> æˆ‘ä»¬ä»ä¸Šä¸€è¡Œå¼€å§‹åˆ†æå™¨ï¼ŒæŸ¥çœ‹è¾“å‡ºï¼Œé™¤å…¶ä»–å¤–ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹è¡Œï¼š </p><br><pre> <code class="plaintext hljs">mythril.laser.ethereum.svm [WARNING]: No contract was created during the execution of contract creation Increase the resources for creation execution (--max-depth or --create-timeout) The analysis was completed successfully. No issues were detected.</code> </pre> <br><p> äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬çš„åˆåŒå¹¶æœªåœ¨ä»¿çœŸå™¨ä¸­åˆ›å»ºå’Œâ€œä¿®å¤â€ã€‚ å› æ­¤ï¼Œæˆ‘å»ºè®®å¯¹æ‰€æœ‰ç±»å‹çš„åˆ†æä½¿ç”¨<code>-v4</code>æ ‡å¿—ï¼Œä»¥æŸ¥çœ‹æ‰€æœ‰æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸è¦é—æ¼ä»»ä½•é‡è¦çš„æ¶ˆæ¯ã€‚ è®©æˆ‘ä»¬æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚ è§£å†³è¿™ä¸€å®é™…é—®é¢˜å¯¹äºç†è§£å¦‚ä½•æ­£ç¡®ä½¿ç”¨ç§˜é“¶å¾ˆé‡è¦ã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘ä»¬æ­£åœ¨é˜…è¯»æœ‰å…³Mythrilçš„æ–‡ç« ï¼š <code>It uses concolic analysis, taint analysis and control flow checking to detect a variety of security vulnerabilities</code> ã€‚ å¦‚æœæ‚¨ä¸å¤ªç†Ÿæ‚‰è¿™äº›æœ¯è¯­ï¼Œæˆ‘å»ºè®®æ‚¨åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„æä¾›</a>æœ‰å…³condicalæµ‹è¯•çš„Wikiï¼Œä½†è¿™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ˜¯</a>æœ‰å…³x86æ±¡æŸ“æ£€æŸ¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a>å¾ˆå¥½çš„ä»‹ç»ã€‚ ç®€è€Œè¨€ä¹‹ï¼šMythrilæ¨¡æ‹ŸåˆåŒçš„æ‰§è¡Œæƒ…å†µï¼Œä¿®å¤å¯ä»¥æ‰§è¡Œçš„åˆ†æ”¯ï¼Œå¹¶å°è¯•å®ç°åˆåŒçš„â€œä¸­æ–­â€çŠ¶æ€ï¼Œå¯¹å„ç§å‚æ•°ç»„åˆè¿›è¡Œæ’åºï¼Œå¹¶è®¾æ³•é¿å¼€æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ã€‚ è¿™æ˜¯ä¸Šé¢æ–‡ç« çš„ç¤ºä¾‹æ“ä½œå›¾ï¼š </p><br><pre> <code class="plaintext hljs">1.      .   symbolic-,        . 2.      ,     ,   trace .    ,      ,    . 3.     . 4.       trace-. 5.  symbolic execution   trace,   symbolic ,    ,     ,     . 6.     ,          .    , . 7.   :   ,   ,   input-,     ,      .   input-   ,   .6    . 8.   .4</code> </pre> <br><p> å¦‚æœæ‚¨å¯¹å…¶è¿›è¡Œäº†æå¤§åœ°ç®€åŒ–ï¼Œé‚£ä¹ˆMythrilåœ¨ä»£ç ä¸­é‡åˆ°äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œä¾¿å¯ä»¥äº†è§£å¯ä»¥è¿›å…¥å“ªä¸ªå˜é‡é›†å’Œå¦ä¸€ä¸ªåˆ†æ”¯ã€‚ åœ¨æ¯ä¸ªåˆ†æ”¯ä¸­ï¼ŒMythriléƒ½çŸ¥é“å®ƒæ˜¯å¦å¯¼è‡´<code>assert</code> ï¼Œ <code>transfer</code> ï¼Œselfdestructå’Œå…¶ä»–ä¸å®‰å…¨ç›¸å…³çš„æ“ä½œç ã€‚ å› æ­¤ï¼ŒMythrilåˆ†æå“ªäº›å‚æ•°å’Œäº‹åŠ¡é›†å¯èƒ½å¯¼è‡´å®‰å…¨æ¼æ´ã€‚  Mythrilåˆ‡æ–­ä»æœªè·å¾—æ§åˆ¶æƒçš„åˆ†æ”¯å¹¶åˆ†ææ§åˆ¶æµçš„æ–¹æ³•æ˜¯å…¶ä¸»è¦æŠ€å·§ã€‚ æœ‰å…³Mythrilè‚ å’Œåˆ†æ”¯è¡Œèµ°çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>ç¼–å†™ã€‚ </p><br><p> ç”±äºæ™ºèƒ½åˆçº¦æ‰§è¡Œçš„ç¡®å®šæ€§ï¼Œæ— è®ºå¹³å°ï¼Œä½“ç³»ç»“æ„æˆ–ç¯å¢ƒå¦‚ä½•ï¼Œç›¸åŒçš„æŒ‡ä»¤åºåˆ—å§‹ç»ˆä¸¥æ ¼å¯¼è‡´ä¸€ç»„çŠ¶æ€å˜åŒ–ã€‚ æ­¤å¤–ï¼Œæ™ºèƒ½åˆçº¦ä¸­çš„åŠŸèƒ½ç›¸å½“çŸ­ï¼Œå¹¶ä¸”èµ„æºéå¸¸æœ‰é™ï¼Œå› æ­¤åƒMythrilè¿™æ ·çš„åˆ†æå™¨å°†ç¬¦å·æ‰§è¡Œå’Œæœ¬æœºæ‰§è¡Œç›¸ç»“åˆï¼Œå¯ä»¥éå¸¸æœ‰æ•ˆåœ°ç”¨äºæ™ºèƒ½åˆçº¦ã€‚ </p><br><p> åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒMythrilä½¿ç”¨â€œçŠ¶æ€â€çš„æ¦‚å¿µ-è¿™æ˜¯åˆåŒçš„ä»£ç ï¼Œå…¶ç¯å¢ƒï¼ŒæŒ‡å‘å½“å‰å‘½ä»¤çš„æŒ‡é’ˆï¼ŒåˆåŒçš„å­˜å‚¨ä»¥åŠå †æ ˆçš„çŠ¶æ€ã€‚ è¿™é‡Œæ˜¯æ–‡æ¡£ï¼š </p><br><pre> <code class="plaintext hljs">The machine state Î¼ is defined as the tuple (g, pc, m, i, s) which are the gas available, the program counter pc âˆˆ P256, the memory contents, the active number of words in memory (counting continuously from position 0), and the stack contents. The memory contents Î¼m are a series of zeroes of size 256.</code> </pre> <br><p> çŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡å›¾æ˜¯ç ”ç©¶çš„ä¸»è¦å¯¹è±¡ã€‚ å¦‚æœæˆåŠŸå¯åŠ¨åˆ†æï¼Œåˆ™æœ‰å…³è¯¥å›¾çš„ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨åˆ†ææ—¥å¿—ä¸­ã€‚ å¦å¤–ï¼ŒMythrilå¯ä»¥ä½¿ç”¨<code>--graph</code>é€‰é¡¹ä»¥<code>--graph</code>å½¢å¼æ„å»ºæ­¤å›¾å½¢ã€‚ </p><br><p> ç°åœ¨æˆ–å¤šæˆ–å°‘åœ°äº†è§£äº†Mythrilä¼šåšä»€ä¹ˆï¼Œæˆ‘ä»¬å°†ç»§ç»­äº†è§£ä¸ºä»€ä¹ˆæœªè§£æåˆåŒä»¥åŠåˆåŒçš„æ¥æº<code>[WARNING]: No contract was created during the execution of contract creation</code> ã€‚ é¦–å…ˆï¼Œæˆ‘æ‰­æ›²äº†<code>--create-timeout</code>å’Œ<code>--max-depth</code> ï¼ˆæŒ‰ç…§å»ºè®®ï¼‰ï¼Œä½†æ²¡æœ‰å¾—åˆ°ç»“æœï¼Œæˆ‘ä»¥ä¸ºæ˜¯æ„é€ å‡½æ•°çš„è´£ä»»â€“å®ƒä¸­çš„æŸäº›åŠŸèƒ½ä¸èµ·ä½œç”¨ã€‚ è¿™æ˜¯ä»–çš„ä»£ç ï¼š </p><br><pre> <code class="plaintext hljs">function Booking( string _description, string _fileUrl, bytes32 _fileHash, uint256 _price, uint256 _cancellationFee, uint256 _rentDateStart, uint256 _rentDateEnd, uint256 _noCancelPeriod, uint256 _acceptObjectPeriod ) public payable { require(_price &gt; 0); require(_price &gt; _cancellationFee); require(_rentDateStart &gt; getCurrentTime()); require(_rentDateEnd &gt; _rentDateStart); require(_rentDateStart+_acceptObjectPeriod &lt; _rentDateEnd); require(_rentDateStart &gt; _noCancelPeriod); m_description = _description; m_fileUrl = _fileUrl; m_fileHash = _fileHash; m_price = _price; m_cancellationFee = _cancellationFee; m_rentDateStart = _rentDateStart; m_rentDateEnd = _rentDateEnd; m_noCancelPeriod = _noCancelPeriod; m_acceptObjectPeriod = _acceptObjectPeriod; }</code> </pre> <br><p> å›æƒ³ä¸€ä¸‹ç§˜é“¶çš„åŠ¨ä½œç®—æ³•ã€‚ è¦è¿è¡Œè·Ÿè¸ªï¼Œæ‚¨éœ€è¦è°ƒç”¨åˆåŒæ„é€ å‡½æ•°ï¼Œå› ä¸ºæ‰€æœ‰åç»­æ‰§è¡Œå°†å–å†³äºè°ƒç”¨æ„é€ å‡½æ•°çš„å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨<code>_price == 0</code>è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ™æ„é€ å‡½æ•°å°†åœ¨<code>require(_price &gt; 0)</code>ä¸Šå¼•å‘å¼‚å¸¸ã€‚ å³ä½¿Mythrilè¿­ä»£è®¸å¤š<code>_price</code>å€¼ï¼Œä¾‹å¦‚<code>_price &lt;= _cancellationFee</code> ï¼Œæ„é€ å‡½æ•°ä»ä¼šä¸­æ–­ã€‚ åœ¨æ­¤åˆåŒä¸­ï¼Œæœ‰åäºŒä¸ªä¸ä¸¥æ ¼é™åˆ¶ç›¸å…³è”çš„å‚æ•°ï¼Œè€ŒMythrilå½“ç„¶æ— æ³•çŒœæµ‹å‚æ•°çš„æœ‰æ•ˆç»„åˆã€‚ ä»–å°è¯•è½¬åˆ°æ‰§è¡Œçš„ä¸‹ä¸€ä¸ªåˆ†æ”¯ï¼Œå¯¹æ„é€ å‡½æ•°çš„å‚æ•°è¿›è¡Œæ’åºï¼Œä½†æ˜¯ä»–å‡ ä¹æ²¡æœ‰æœºä¼šçŒœæµ‹-å‚æ•°å¤ªå¤šã€‚ å› æ­¤ï¼ŒåˆåŒçš„è®¡ç®—æ— æ³•è§£å†³-æ‰€æœ‰æ–¹å¼éƒ½åŸºäºæŸç§<code>require(...)</code> ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸Šè¿°é—®é¢˜ã€‚ </p><br><p> ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•ï¼šç¬¬ä¸€ç§æ˜¯é€šè¿‡å°†å®ƒä»¬æ³¨é‡Šæ‰æ¥ç¦ç”¨æ„é€ å‡½æ•°ä¸­çš„æ‰€æœ‰<code>require</code> ã€‚ ç„¶åMythrilå°†èƒ½å¤Ÿä½¿ç”¨ä»»ä½•å‚æ•°é›†è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”ä¸€åˆ‡æ­£å¸¸ã€‚ ä½†è¿™æ„å‘³ç€ï¼Œé€šè¿‡æ£€æŸ¥å¸¦æœ‰æ­¤ç±»å‚æ•°çš„åˆåŒï¼ŒMythrilå°†å‘ç°é”™è¯¯ï¼Œè€Œé”™è¯¯çš„å€¼å¯èƒ½ä¼šä¼ é€’ç»™æ„é€ å‡½æ•°ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœMythrilå‘ç°å¦‚æœåˆåŒåˆ›å»ºè€…å°†<code>_cancellationFee</code>æŒ‡å®šä¸º<code>_cancellationFee</code>çš„åäº¿å€çš„ä»·æ ¼æ—¶å‡ºç°çš„<code>_mprice</code> ï¼Œé‚£ä¹ˆåœ¨è¿™ç§bugä¸­å°±æ²¡æœ‰ç”¨-è¿™æ ·çš„åˆåŒå°†æ°¸è¿œä¸ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸”å°†èŠ±è´¹å¤§é‡èµ„æºæ¥æŸ¥æ‰¾é”™è¯¯ã€‚ æˆ‘ä»¬æš—ç¤ºè¯¥åˆåŒä»ç„¶åœç•™åœ¨æˆ–å¤šæˆ–å°‘ä¸€è‡´çš„å‚æ•°ä¸Šï¼Œå› æ­¤ä¸ºäº†è¿›è¡Œè¿›ä¸€æ­¥åˆ†æï¼Œæœ‰å¿…è¦æŒ‡å®šæ›´åˆ‡åˆå®é™…çš„æ„é€ å‡½æ•°å‚æ•°ï¼Œä»¥ä¾¿Mythrilä¸ä¼šæŸ¥æ‰¾å¦‚æœæ­£ç¡®å…³é—­è¯¥åˆåŒæ°¸è¿œä¸ä¼šå‘ç”Ÿçš„é”™è¯¯ã€‚ </p><br><p> æˆ‘èŠ±äº†å¾ˆå¤šæ—¶é—´è¯•å›¾ç¡®åˆ‡äº†è§£éƒ¨ç½²çš„ä¸­æ–­ä½ç½®ï¼ŒåŒ…æ‹¬å¹¶ç¦ç”¨æ„é€ å‡½æ•°çš„å„ä¸ªéƒ¨åˆ†ã€‚ é™¤äº†éº»çƒ¦ä¹‹å¤–ï¼Œæ„é€ å‡½æ•°è¿˜ä½¿ç”¨<code>getCurrentTime()</code>è¿”å›å½“å‰æ—¶é—´ï¼Œç›®å‰å°šä¸æ¸…æ¥šæ­¤è°ƒç”¨å¦‚ä½•å¤„ç†Mythrilã€‚ åœ¨è¿™é‡Œæˆ‘ä¸ä¼šæè¿°è¿™äº›å†’é™©ï¼Œå› ä¸º è¿™äº›ç»†å¾®ä¹‹å¤„å¾ˆå¯èƒ½æ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œå› æ­¤å®¡è®¡äººå‘˜çŸ¥é“äº†ã€‚ å› æ­¤ï¼Œæˆ‘é€‰æ‹©äº†ç¬¬äºŒç§æ–¹æ³•ï¼šé™åˆ¶è¾“å…¥æ•°æ®ï¼Œå¹¶ç®€å•åœ°ä»æ„é€ å‡½æ•°ä¸­åˆ é™¤æ‰€æœ‰å‚æ•°ï¼Œç”šè‡³æ˜¯<code>getCurrentTime()</code> ï¼Œä¹Ÿç›´æ¥åœ¨æ„é€ å‡½æ•°ä¸­ç›´æ¥ç¡¬ç¼–ç å¿…è¦çš„å‚æ•°ï¼ˆç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™äº›å‚æ•°åº”ä»å®¢æˆ·é‚£é‡Œè·å¾—ï¼‰ï¼š </p><br><pre> <code class="plaintext hljs"> function Booking( ) public payable { m_description = "My very long booking text about hotel and beautiful sea view!"; m_fileUrl = "https://ether-airbnb.bam/some-url/"; m_fileHash = 0x1628f3170cc16d40aad2e8fa1ab084f542fcb12e75ce1add62891dd75ba1ffd7; m_price = 1000000000000000000; // 1 ETH m_cancellationFee = 100000000000000000; // 0.1 ETH m_rentDateStart = 1550664800 + 3600 * 24; // current time + 1 day m_rentDateEnd = 1550664800 + 3600 * 24 * 4; // current time + 4 days m_acceptObjectPeriod = 3600 * 8; // 8 hours m_noCancelPeriod = 3600 * 24; // 1 day require(m_price &gt; 0); require(m_price &gt; m_cancellationFee); require(m_rentDateStart &gt; 1550664800); require(m_rentDateEnd &gt; m_rentDateStart); require((m_rentDateStart + m_acceptObjectPeriod) &lt; m_rentDateEnd); require(m_rentDateStart &gt; m_noCancelPeriod); }</code> </pre> <br><p> å¦å¤–ï¼Œè¦å¼€å§‹ä¸€åˆ‡ï¼Œè¿˜å¿…é¡»è®¾ç½®<code>max-depth</code>å‚æ•°ã€‚ å®ƒåœ¨AWS t2.mediumå®ä¾‹ä¸Šä½¿ç”¨<code>--max-depth=34</code>æ­¤æ„é€ å‡½æ•°ä¸ºæˆ‘å·¥ä½œã€‚ åŒæ—¶ï¼Œåœ¨åŠŸèƒ½æ›´å¼ºå¤§çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šï¼Œä¸€åˆ‡å¼€å§‹æ—¶éƒ½æ²¡æœ‰<code>max-depth</code> ã€‚ é€šè¿‡ä½¿ç”¨æ­¤<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‚æ•°</a>åˆ¤æ–­ï¼Œæœ‰å¿…è¦æ„é€ ç”¨äºåˆ†æçš„åˆ†æ”¯ï¼Œå¹¶ä¸”å…¶é»˜è®¤å€¼ä¸ºinfinityï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»£ç </a> ï¼‰ã€‚ å› æ­¤ï¼Œè¯·æ—‹è½¬æ—‹è½¬æ­¤å‚æ•°ï¼Œä½†è¦ç¡®ä¿åˆ†æäº†æ‰€éœ€çš„åˆåŒã€‚ æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ¶ˆæ¯äº†è§£æ­¤ä¿¡æ¯ï¼š </p><br><pre> <code class="plaintext hljs">mythril.laser.ethereum.svm [INFO]: 248 nodes, 247 edges, 2510 total states mythril.laser.ethereum.svm [INFO]: Achieved 59.86% coverage for code: .............</code> </pre> <br><p> ç¬¬ä¸€è¡Œä»…æè¿°äº†å°†è¦åˆ†æçš„å›¾å½¢ï¼Œè¯·è‡ªå·±é˜…è¯»å…¶ä½™å‡ è¡Œã€‚ éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºæ¥åˆ†æå¯ä»¥æ‰§è¡Œçš„å„ç§åˆ†æ”¯ï¼Œå› æ­¤åœ¨åˆ†æå¤§å‹åˆåŒæ—¶ï¼Œå³ä½¿åœ¨å¿«é€Ÿçš„è®¡ç®—æœºä¸Šä¹Ÿå¿…é¡»ç­‰å¾…ã€‚ </p><br><h2 id="poisk-oshibok">  <strong>æœç´¢é”™è¯¯</strong> </h2><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å°†æŸ¥æ‰¾é”™è¯¯å¹¶æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯ã€‚ ç§˜é“¶å¯»æ‰¾åˆ†æ”¯ï¼Œåœ¨åˆ†æ”¯ä¸­è¿›è¡Œå¹¿æ’­ï¼Œè‡ªæ¯ï¼Œå£°æ˜å’Œå…¶ä»–ä»å®‰å…¨è§’åº¦æ¥çœ‹å¾ˆé‡è¦çš„åŠ¨ä½œã€‚ å¦‚æœä»¥ä¸Šè¯´æ˜ä¹‹ä¸€å‡ºç°åœ¨åˆåŒä»£ç ä¸­æŸå¤„ï¼ŒMythrilå°†æ£€æŸ¥å¯èƒ½è¿›å…¥æ­¤åˆ†æ”¯çš„æ–¹å¼ï¼Œæ­¤å¤–ï¼Œè¿˜ä¼šæ˜¾ç¤ºé€šå¾€è¯¥åˆ†æ”¯çš„äº¤æ˜“é¡ºåºï¼ </p><br><p> é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹Mythrilä¸ºé•¿æœŸå—è‹¦çš„<code>Booking</code>åˆåŒå‘è¡Œäº†ä»€ä¹ˆã€‚ ç¬¬ä¸€ä¸ªè­¦å‘Šï¼š </p><br><pre> <code class="plaintext hljs">==== Dependence on predictable environment variable ==== SWC ID: 116 Severity: Low Contract: Booking Function name: fallback PC address: 566 Estimated Gas Usage: 17908 - 61696 Sending of Ether depends on a predictable variable. The contract sends Ether depending on the values of the following variables: - block.timestamp Note that the values of variables like coinbase, gaslimit, block number and timestamp are predictable and/or can be manipulated by a malicious miner. Don't use them for random number generation or to make critical decisions. -------------------- In file: contracts/flattened.sol:142 msg.sender.transfer(msg.value-m_price)</code> </pre> <br><p> å®ƒçš„å‡ºç°æ˜¯å› ä¸º </p><br><pre> <code class="plaintext hljs">require(m_rentDateStart &gt; getCurrentTime());</code> </pre> <br><p> åœ¨åå¤‡åŠŸèƒ½ä¸­ã€‚ </p><br><p> è¯·æ³¨æ„ï¼ŒMythrilæ„è¯†åˆ°<code>getCurrentTime()</code>éšè—åœ¨<code>getCurrentTime()</code> ã€‚ å°½ç®¡åˆåŒçš„å«ä¹‰ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œä½†Mythrilå°†<code>block.timestamp</code>ä¸å¹¿æ’­ç›¸å…³è”çš„äº‹å®éå¸¸å‡ºè‰²ï¼ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºå‘˜å¿…é¡»ç†è§£ï¼Œå†³ç­–æ˜¯åŸºäºçŸ¿å·¥å¯ä»¥æ§åˆ¶çš„å€¼åšå‡ºçš„ã€‚ è€Œä¸”ï¼Œå¦‚æœå°†æ¥åœ¨åˆåŒçš„è¯¥åœ°ç‚¹è¿›è¡Œæ‹å–æˆ–å…¶ä»–æœåŠ¡æ‹å–ï¼Œåˆ™å¿…é¡»è€ƒè™‘åˆ°å‰æœŸæ”»å‡»çš„å¯èƒ½æ€§ã€‚ </p><br><p> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚æœæˆ‘ä»¬åœ¨è¿™æ ·çš„åµŒå¥—è°ƒç”¨ä¸­éšè—å˜é‡ï¼Œ <code>block.timestamp</code>æ˜¯å¦çœ‹åˆ°å¯¹<code>block.timestamp</code>çš„ä¾èµ–ï¼š </p><br><pre> <code class="plaintext hljs">function getCurrentTime() public view returns (uint256) { - return now; + return getCurrentTimeInner(); } + function getCurrentTimeInner() internal returns (uint256) { + return now; + }</code> </pre> <br><p> æ˜¯çš„ï¼  Mythrilç»§ç»­çœ‹åˆ°block.timestampå’Œå¹¿æ’­ä¼ è¾“ä¹‹é—´çš„è”ç³»ï¼Œè¿™å¯¹äºå®¡æ ¸å‘˜è€Œè¨€éå¸¸é‡è¦ã€‚ æ”»å‡»è€…æ§åˆ¶çš„å˜é‡ä¸åˆåŒçŠ¶æ€å‡ æ¬¡æ›´æ”¹ååšå‡ºçš„å†³å®šä¹‹é—´çš„è”ç³»å¯ä»¥è¢«é€»è¾‘æ©ç›–ï¼Œè€ŒMythrilå…è®¸æ‚¨è·Ÿè¸ªå®ƒã€‚ å°½ç®¡ä¸å€¼å¾—ä¾èµ–ä¸ºæ‰€æœ‰å¯èƒ½çš„å˜é‡ä¹‹é—´çš„æ‰€æœ‰å¯èƒ½çš„è¿æ¥è¿›è¡Œ<code>getCurrentTime()</code>çš„äº‹å®ï¼šå¦‚æœç»§ç»­æ¨¡æ‹Ÿ<code>getCurrentTime()</code>å‡½æ•°å¹¶è¿›è¡Œä¸‰å±‚åµŒå¥—ï¼Œåˆ™è­¦å‘Šä¼šæ¶ˆå¤±ã€‚ å¯¹Mythrilçš„æ¯ä¸ªå‡½æ•°è°ƒç”¨éƒ½éœ€è¦åˆ›å»ºæ–°çš„çŠ¶æ€åˆ†æ”¯ï¼Œå› æ­¤åˆ†æéå¸¸æ·±å±‚çš„åµŒå¥—å°†éœ€è¦å¤§é‡èµ„æºã€‚ </p><br><p> å½“ç„¶ï¼Œæˆ‘å¾ˆå¯èƒ½é”™è¯¯åœ°ä½¿ç”¨äº†åˆ†æå‚æ•°ï¼Œæˆ–è€…åœ¨åˆ†æä»ªæ·±åº¦çš„æŸå¤„å‘ç”Ÿäº†æˆªæ–­ã€‚ å°±åƒæˆ‘è¯´çš„é‚£æ ·ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¯¥äº§å“æ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼Œæˆ‘çœ‹åˆ°åœ¨ä»“åº“ä¸­æåˆ°äº†<code>max-depth</code>çš„æäº¤ï¼Œå› æ­¤ä¸è¦è®¤çœŸå¯¹å¾…å½“å‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†è¶³å¤Ÿçš„è¯æ®è¯æ˜Mythrilå¯ä»¥éå¸¸æœ‰æ•ˆåœ°å¯»æ‰¾å˜é‡ã€‚ </p><br><p> é¦–å…ˆï¼Œåœ¨åˆåŒä¸­æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å¯å°†å¹¿æ’­æä¾›ç»™ä»»ä½•äººï¼Œä½†ä»…åœ¨å®¢æˆ·ç«¯å°†å¹¿æ’­å‘é€ç»™åˆåŒä¹‹åã€‚ æˆ‘ä»¬å…è®¸ä»»ä½•äººæå–1/5çš„ä»¥å¤ª<code>State.PAID</code> ï¼Œä½†<code>State.PAID</code>æ˜¯åˆåŒå¤„äº<code>State.PAID</code>çŠ¶æ€ï¼ˆå³ä»…åœ¨å®¢æˆ·ç”¨ä»¥å¤ª<code>State.PAID</code>æ”¯ä»˜äº†ç§Ÿç”¨çš„å·ç ä¹‹åï¼‰ã€‚ è¿™æ˜¯å‡½æ•°ï¼š </p><br><pre> <code class="plaintext hljs">function collectTaxes() external onlyState(State.PAID) { msg.sender.transfer(address(this).balance / 5); }</code> </pre> <br><p> ç§˜é“¶å‘ç°äº†é—®é¢˜ï¼š </p><br><pre> <code class="plaintext hljs">==== Unprotected Ether Withdrawal ==== SWC ID: 105 Severity: High Contract: Booking Function name: collectTaxes() PC address: 2492 Estimated Gas Usage: 2135 - 2746 Anyone can withdraw ETH from the contract account. Arbitrary senders other than the contract creator can withdraw ETH from the contract account without previously having sent a equivalent amount of ETH to it. This is likely to be a vulnerability. -------------------- In file: contracts/flattened.sol:149 msg.sender.transfer(address(this).balance / 5) -------------------- -------------------- Transaction Sequence: { "2": { "calldata": "0x", "call_value": "0xde0b6b3a7640000", "caller": "0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef" }, "3": { "calldata": "0x01b613a5", "call_value": "0x0", "caller": "0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef" } }</code> </pre> <br><p> å¤ªå¥½äº† ç§˜é“¶ç”šè‡³å¸¦æ¥äº†ä¸¤ç¬”äº¤æ˜“ï¼Œå¯¼è‡´æ‚¨å¯ä»¥ä»åˆçº¦ä¸­æå–ä»¥å¤ªå¸ã€‚ ç°åœ¨å°†<code>State.PAID</code>éœ€æ±‚æ›´æ”¹ä¸º<code>State.RENT</code> ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">- function collectTaxes() external onlyState(State.PAID){ + function collectTaxes() external onlyState(State.RENT) {</code> </pre> <br><p> ç°åœ¨ä»…åœ¨åˆåŒå¤„äº<code>State.RENT</code>çŠ¶æ€æ—¶æ‰å¯ä»¥è°ƒç”¨<code>collectTaxes()</code> ï¼Œå¹¶ä¸”æ­¤æ—¶æ­¤åˆ»æ²¡æœ‰ä»»ä½•ä½™é¢ï¼Œå› ä¸º åˆåŒå·²ç»å°†æ•´ä¸ªå¹¿æ’­å‘é€ç»™äº†æ‰€æœ‰è€…ã€‚ é‡è¦çš„æ˜¯ï¼ŒMythrilè¿™æ¬¡<strong>ä¸ä¼š</strong>è¾“å‡ºé”™è¯¯<code>==== Unprotected Ether Withdrawal ====</code>å¸å–å›<code>==== Unprotected Ether Withdrawal ====</code> ï¼ åœ¨<code>onlyState(State.RENT)</code>çš„æ¡ä»¶ä¸‹ï¼Œåˆ†æå™¨æ²¡æœ‰åˆ°è¾¾ä»£ç åˆ†æ”¯ï¼Œè¯¥ä»£ç åˆ†æ”¯ä»å…·æœ‰éé›¶ä½™é¢çš„åˆåŒå‘é€ä»¥å¤ª<code>onlyState(State.RENT)</code> ã€‚  Mythrilä¸ºå‚æ•°ä½¿ç”¨äº†ä¸åŒçš„é€‰é¡¹ï¼Œä½†æ˜¯åªæœ‰å°†æ‰€æœ‰å¹¿æ’­å‘é€ç»™å‡ºç§Ÿäººåï¼Œæ‚¨æ‰èƒ½è¿›å…¥<code>State.RENT</code> ã€‚ å› æ­¤ï¼Œä¸å¯èƒ½ä»¥éé›¶çš„ä½™é¢åˆ°è¾¾ä»£ç çš„è¿™ä¸€åˆ†æ”¯ï¼Œå¹¶ä¸”Mythrilç»å¯¹ä¸ä¼šæ‰“æ‰°å®¡è®¡äººå‘˜ï¼ </p><br><p> åŒæ ·ï¼ŒMythrilä¼šå‘ç°<code>selfdestruct</code>å¹¶<code>assert</code> ï¼Œå‘å®¡è®¡å¸ˆå±•ç¤ºäº†å“ªäº›è¡Œä¸ºå¯èƒ½å¯¼è‡´åˆåŒæ¯ç­æˆ–ç ´åé‡è¦èŒèƒ½ã€‚ æˆ‘å°†ä¸ç»™å‡ºè¿™äº›ç¤ºä¾‹ï¼Œä»…å°è¯•ä½¿å‡½æ•°ç±»ä¼¼äºä¸Šé¢çš„å‡½æ•°ï¼Œä»…è°ƒç”¨<code>selfdestruct</code>å¹¶æ‰­æ›²å…¶é€»è¾‘ã€‚ </p><br><p> å¦å¤–ï¼Œè¯·ä¸è¦å¿˜è®°Mythrilçš„ä¸€éƒ¨åˆ†æ˜¯ç¬¦å·æ‰§è¡Œï¼Œè€Œè¿™ç§æ–¹æ³•æœ¬èº«å¯ä»¥åœ¨ä¸æ¨¡æ‹Ÿæ‰§è¡Œçš„æƒ…å†µä¸‹ç¡®å®šè®¸å¤šæ¼æ´ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ”»å‡»è€…ä»¥æŸç§æ–¹å¼æ§åˆ¶æ“ä½œæ•°ä¹‹ä¸€ï¼Œåˆ™å¯¹â€œ +â€ï¼Œâ€œ-â€å’Œå…¶ä»–ç®—æœ¯è¿ç®—ç¬¦çš„ä»»ä½•ä½¿ç”¨éƒ½å¯ä»¥è§†ä¸ºâ€œæ•´æ•°æº¢å‡ºâ€çš„æ¼æ´ã€‚ ä½†æ˜¯æˆ‘å†è¯´ä¸€éï¼ŒMythrilæœ€å¼ºå¤§çš„åŠŸèƒ½æ˜¯å°†ç¬¦å·å’Œæœ¬æœºæ‰§è¡Œä»¥åŠç¡®å®šå¯¼è‡´é€»è¾‘åˆ†æ”¯çš„å‚æ•°å€¼ç»„åˆåœ¨ä¸€èµ·ã€‚ </p><br><h2 id="zaklyuchenie">  <strong>ç»“è®º</strong> </h2><br><p> å½“ç„¶ï¼Œè¦æ˜¾ç¤ºMythrilèƒ½å¤Ÿæ£€æµ‹åˆ°çš„æ‰€æœ‰æ½œåœ¨é—®é¢˜ï¼Œå°†ä¸ä»…éœ€è¦æ’°å†™ä¸€ç¯‡æ–‡ç« ï¼Œè¿˜éœ€è¦å¤šç¯‡æ–‡ç« ã€‚ å¯¹äºå…¶ä»–æ‰€æœ‰äº‹ç‰©ï¼Œä»–éƒ½çŸ¥é“å¦‚ä½•åœ¨çœŸå®çš„åŒºå—é“¾ä¸­å®Œæˆæ‰€æœ‰å·¥ä½œï¼Œé€šè¿‡ç­¾åæ‰¾åˆ°å¿…è¦çš„åˆåŒå’Œæ¼æ´ï¼Œæ„å»ºæ¼‚äº®çš„è°ƒç”¨å›¾ï¼Œæ ¼å¼åŒ–æŠ¥å‘Šã€‚  Mythrilè¿˜å…è®¸æ‚¨ç¼–å†™è‡ªå·±çš„æµ‹è¯•è„šæœ¬ï¼Œä¸ºåˆåŒæä¾›åŸºäºpythonçš„ç•Œé¢ï¼Œå¹¶å…è®¸æ‚¨æµ‹è¯•å•ä¸ªåŠŸèƒ½ï¼Œä¿®å¤å‚æ•°å€¼ï¼Œç”šè‡³å®æ–½è‡ªå·±çš„ç­–ç•¥ä»¥ä»»æ„ç¨‹åº¦çš„çµæ´»æ€§å¤„ç†åæ±‡ç¼–ä»£ç ã€‚ </p><br><p>  Mythrilä»ç„¶æ˜¯ä¸€ä¸ªç›¸å½“å¹´è½»çš„è½¯ä»¶ï¼Œå®ƒä¸æ˜¯IDA Proï¼Œé™¤å°‘æ•°æ–‡ç« å¤–ï¼Œå¾ˆå°‘æœ‰æ–‡æ¡£ã€‚ è®¸å¤šå‚æ•°çš„å€¼åªèƒ½ä»cli.pyå¼€å¤´çš„Mythrilä»£ç ä¸­è¯»å–ã€‚ æˆ‘å¸Œæœ›åœ¨æ–‡æ¡£ä¸­å¯¹æ¯ä¸ªå‚æ•°çš„æ“ä½œè¿›è¡Œå®Œæ•´è€Œæ·±å…¥çš„æè¿°ã€‚ </p><br><p> å¦å¤–ï¼Œå½“åˆåŒæˆ–å¤šæˆ–å°‘å¾ˆå¤§æ—¶ï¼Œä¸€å †é”™è¯¯çš„è¾“å‡ºä¼šå ç”¨å¾ˆå¤šç©ºé—´ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›èƒ½å¤Ÿæ¥æ”¶æœ‰å…³å‘ç°çš„é”™è¯¯çš„å‹ç¼©ä¿¡æ¯ï¼Œå› ä¸º ä½¿ç”¨Mythrilæ—¶ï¼Œæ‚¨å¿…é¡»ç»å¯¹æŸ¥çœ‹åˆ†æè·¯å¾„ï¼ŒæŸ¥çœ‹å·²å°½åŠ›è€Œä¸ºåœ°æµ‹è¯•äº†å“ªäº›åˆåŒï¼Œå¹¶èƒ½å¤Ÿå¼ºè¡Œç¦ç”¨å®¡è®¡å¸ˆè®¤ä¸ºé”™è¯¯è‚¯å®šçš„ç‰¹å®šé”™è¯¯ã€‚ </p><br><p> ä½†æ˜¯æ€»çš„æ¥è¯´ï¼ŒMythrilæ˜¯ä¸€ç§ç”¨äºåˆ†ææ™ºèƒ½åˆçº¦çš„å‡ºè‰²ä¸”åŠŸèƒ½éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œç›®å‰åº”ç”±ä»»ä½•å®¡æ ¸å‘˜æŒæ¡ã€‚ å®ƒä½¿æ‚¨è‡³å°‘å¯ä»¥å…³æ³¨ä»£ç çš„å…³é”®éƒ¨åˆ†ï¼Œå¹¶æ£€æµ‹å˜é‡ä¹‹é—´çš„éšè—å…³ç³»ã€‚ </p><br><p> æ€»ç»“ä¸€ä¸‹ï¼Œä½¿ç”¨Mythrilçš„å»ºè®®æ˜¯ï¼š </p><br><ol><li> å°½å¯èƒ½ç¼©å°ç ”ç©¶åˆåŒçš„èµ·å§‹æ¡ä»¶ã€‚ å¦‚æœåœ¨åˆ†ææœŸé—´Mythrilå°†å¤§é‡èµ„æºèŠ±åœ¨åˆ†æ”¯ä¸Šï¼Œè€Œè¿™äº›èµ„æºåœ¨å®è·µä¸­æ°¸è¿œä¸ä¼šå®ç°ï¼Œé‚£ä¹ˆå®ƒå°†å¤±å»å‘ç°çœŸæ­£é‡è¦çš„bugçš„èƒ½åŠ›ï¼Œå› æ­¤æ‚¨åº”å§‹ç»ˆå°è¯•ç¼©å°æ½œåœ¨åˆ†æ”¯çš„èŒƒå›´ã€‚ </li><li> ç¡®ä¿åˆåŒåˆ†æå·²ç»å¼€å§‹ï¼Œä¸è¦é”™è¿‡<code>mythril.laser.ethereum.svm [WARNING]: No contract was created during the execution of contract creation Increase the resources for creation execution (--max-depth or --create-timeout)</code>ç±»çš„<code>mythril.laser.ethereum.svm [WARNING]: No contract was created during the execution of contract creation Increase the resources for creation execution (--max-depth or --create-timeout)</code> ï¼Œå¦åˆ™æ‚¨å¯èƒ½ä¼šè¯¯è®¤ä¸ºæ²¡æœ‰é”™è¯¯ã€‚ </li><li> æ‚¨å¯ä»¥åœ¨åˆåŒä»£ç ä¸­ä»»æ„ç¦ç”¨åˆ†æ”¯ï¼Œä»è€Œä½¿Mythrilåœ¨é€‰æ‹©åˆ†æ”¯å’ŒèŠ‚çœèµ„æºæ–¹é¢çš„å˜åŒ–æ›´å°‘ã€‚ å°è¯•å¯¹<code>max-depth</code>è¿›è¡Œæ— é™åˆ¶çš„æ“ä½œï¼Œä»¥å…â€œç æ‰â€åˆ†æï¼Œä½†è¯·æ³¨æ„ä¸è¦æ©ç›–é”™è¯¯ã€‚ </li><li> æ³¨æ„æ¯ä¸ªè­¦å‘Šï¼Œå³ä½¿æ˜¯ç®€çŸ­çš„æ³¨é‡Šæœ‰æ—¶ä¹Ÿå€¼å¾—è‡³å°‘åœ¨åˆåŒä»£ç ä¸­æ·»åŠ æ³¨é‡Šï¼Œè¿™å¯¹äºå…¶ä»–å¼€å‘äººå‘˜æ¥è¯´æ›´å®¹æ˜“ã€‚ </li></ol><br><p> åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å¤„ç†Manticoreåˆ†æå™¨ï¼Œä½†è¿™æ˜¯å‡†å¤‡æˆ–è®¡åˆ’ç¼–å†™çš„æ–‡ç« çš„ç›®å½•ï¼š </p><br><p> ç¬¬1éƒ¨åˆ†ã€‚ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç®€ä»‹ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¼–è¯‘ï¼Œå±•å¹³ï¼ŒSolidityç‰ˆæœ¬</a> <br> ç¬¬2éƒ¨åˆ†ã€‚ <br>  3. Mythril ( ) <br>  4. Manticore (  ) <br>  5. Echidna (  ) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442114/">https://habr.com/ru/post/zh-CN442114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442102/index.html">å…³äºç”µæ± çš„é—®é¢˜</a></li>
<li><a href="../zh-CN442104/index.html">Kibanaç”¨æˆ·æŒ‡å—ã€‚ å¯è§†åŒ–ã€‚ ç¬¬5éƒ¨åˆ†</a></li>
<li><a href="../zh-CN442108/index.html">å¼€å‘äººå‘˜åˆ›å»ºAIåº”ç”¨ç¨‹åºæŒ‡å—</a></li>
<li><a href="../zh-CN442110/index.html">åæ¨¡å¼Vim</a></li>
<li><a href="../zh-CN442112/index.html">æ–°çš„ç¼–ç¨‹è¯­è¨€æ‚„æ‚„åœ°æ€æ­»äº†æˆ‘ä»¬ä¸ç°å®çš„è”ç³»</a></li>
<li><a href="../zh-CN442116/index.html">ä½¿ç”¨React.memoï¼ˆï¼‰æ”¹å–„Reactç»„ä»¶çš„åŠŸèƒ½</a></li>
<li><a href="../zh-CN442118/index.html">CoinhiveçŸ¿æ± åœæ­¢å·¥ä½œ</a></li>
<li><a href="../zh-CN442120/index.html">ä½¿ç”¨Azureæœºå™¨å­¦ä¹ æœåŠ¡è®­ç»ƒTensorFlowæ¨¡å‹</a></li>
<li><a href="../zh-CN442122/index.html">ä¸€ä¸ªç®€å•çš„è«æ–¯ç§‘Levelordï¼šé‡‡è®¿Nukemå…¬çˆµçš„åˆ›é€ è€…</a></li>
<li><a href="../zh-CN442124/index.html">Facebookå°†ä¸ºç”¨æˆ·æä¾›æ¸…ç†æ•…äº‹çš„æœºä¼š</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>