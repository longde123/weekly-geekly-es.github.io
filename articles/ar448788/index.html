<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉโ๐พ ๐ค ๐ฉโ๐ฉโ๐งโ๐ง ุจูุซูู ุงุฎุชุจุงุฑ ูุน pytest. ุงููุตู 2 ุ ูุธุงุฆู ุงุฎุชุจุงุฑ ุงููุชุงุจุฉ ๐ ๐ฟ โ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฑุฌูุน ุงูุชุงูู 


 ุณูู ุชุชุนูู ููููุฉ ุชูุธูู ุงูุงุฎุชุจุงุฑุงุช ูู ุงููุตูู ุงูุฏุฑุงุณูุฉ ูุงููุญุฏุงุช ุงูููุทูุฉ ูุงูุฏูุงุฆู. ุณุฃุนุฑุถ ูู ุจุนุฏ ุฐูู ููููุฉ ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช ูุชุญุฏูุฏ ุงูุงุฎุชุจุงุฑ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุจูุซูู ุงุฎุชุจุงุฑ ูุน pytest. ุงููุตู 2 ุ ูุธุงุฆู ุงุฎุชุจุงุฑ ุงููุชุงุจุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448788/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jl/jn/bb/jljnbbjr-ejh473xy_eccsmknpk.png">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุฌูุน</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุงูู</a> <img src="https://habrastorage.org/webt/rw/dy/-g/rwdy-grsvbpcetjttrmecdkxtlk.png"></p><br><p style=";text-align:right;direction:rtl">  <em>ุณูู ุชุชุนูู ููููุฉ ุชูุธูู ุงูุงุฎุชุจุงุฑุงุช ูู ุงููุตูู ุงูุฏุฑุงุณูุฉ ูุงููุญุฏุงุช ุงูููุทูุฉ ูุงูุฏูุงุฆู.</em>  <em>ุณุฃุนุฑุถ ูู ุจุนุฏ ุฐูู ููููุฉ ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช ูุชุญุฏูุฏ ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ุชุฑูุฏ ุชุดุบูููุง ุ ูููุงูุดุฉ ููู ูููู ุฃู ุชุณุงุนุฏู ุงูุนูุงูุงุช ุงููุถููุฉ ูู ุชุฎุทู ุงูุงุฎุชุจุงุฑุงุช ููุถุน ุนูุงูุงุช ุนูููุง ุ ูุชููุนุฉ ุงููุดู.</em>  <em>ุฃุฎูุฑูุง ุ ุณุฃุชุญุฏุซ ุนู ุชุญุฏูุฏ ูุนุงููุฑ ุงูุงุฎุชุจุงุฑุงุช ุ ูุงูุฐู ูุณูุญ ุจุงุณุชุฏุนุงุก ุงูุงุฎุชุจุงุฑุงุช ุจุจูุงูุงุช ูุฎุชููุฉ.</em> </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hd/--/9w/hd--9w134j0rxhmxftrflbbdopy.png"></p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุงูุฃูุซูุฉ ูู ูุฐุง ุงููุชุงุจ ููุชูุจุฉ ุจุงุณุชุฎุฏุงู Python 3.6 ู pytest 3.2.  ูุฏุนู pytest 3.2 Python 2.6 ู 2.7 ู Python 3.3+. </p><br><blockquote style=";text-align:right;direction:rtl">  ุชุชููุฑ ุดูุฑุฉ ุงููุตุฏุฑ ููุดุฑูุน ุงูููุงู ุ ููุฐูู ูุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูููุถุญุฉ ูู ูุฐุง ุงููุชุงุจ ุ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="https://pragprog.com/titles/bopytest/source_code">ุงูุฑุงุจุท</a> ูู ุตูุญุฉ ุงูููุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="https://pragprog.com/titles/bopytest">ูููุชุงุจ</a> ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="https://pragprog.com/titles/bopytest">pragprog.com</a> .  ูุง ุชุญุชุงุฌ ุฅูู ุชูุฒูู ุงูููุฏ ุงููุตุฏุฑู ูููู ููุฏ ุงูุงุฎุชุจุงุฑ ุ  ูุชู ุชูุฏูู ุฑูุฒ ุงูุงุฎุชุจุงุฑ ูู ุดูู ููุงุณุจ ูู ุงูุฃูุซูุฉ.  ูููู ูู ุฃุฌู ูุชุงุจุนุฉ ููุงู ุงููุดุฑูุน ุ ุฃู ุชูููู ุฃูุซูุฉ ุงูุงุฎุชุจุงุฑ ูุงุฎุชุจุงุฑ ุงููุดุฑูุน ุงูุฎุงุต ุจู (ูุฏูู ุบูุฑ ูููุฏุฉ!) ุ ูุฌุจ ุนููู ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงูููุจ ุงูุฎุงุตุฉ ุจุงููุชุงุจ ูุชูุฒูู ุงูุนูู.  ููุงู ุ ุนูู ุตูุญุฉ ุงููุชุงุจ ุนูู ุดุจูุฉ ุงูุฅูุชุฑูุช ุ ููุงู ุฑุงุจุท ูุฑุณุงุฆู ุฎุทุฃ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="https://forums.pragprog.com/forums/438">ูููุชุฏู ููุงูุดุฉ</a> . </blockquote><p style=";text-align:right;direction:rtl">  ุชุญุช ุงูููุณุฏ ูู ูุงุฆูุฉ ูู ุงูููุงูุงุช ูู ูุฐู ุงูุณูุณูุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฌุฏูู ุงููุญุชููุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ููุฏูุฉ</strong></a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 1: ุงูุจุฏุก ูุน pytest</strong></a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 2: โโูุชุงุจุฉ ูุธุงุฆู ุงูุงุฎุชุจุงุฑ</strong></a> (ูุฐู ุงูููุงูุฉ) </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 3: ุชุฑููุจุงุช Pytest</strong></a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 4: ุชุฑููุจุงุช ูุฏูุฌุฉ</strong></a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 5: ุงูุฅุถุงูุงุช</strong></a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 6: ุงูุชูููู</strong></a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงููุตู 7: ุงุณุชุฎุฏุงู pytest ูุน ุฃุฏูุงุช ุฃุฎุฑู</strong></a> </li></ul></div></div><br><p style=";text-align:right;direction:rtl">  ูู ุงููุตู ุงูุณุงุจู ุ ุฑูุถุช pytest.  ููุฏ ุฑุฃูุช ููููุฉ ุชุดุบููู ูุน ุงููููุงุช ูุงูุฏูุงุฆู ูุนุฏุฏ ุงูุฎูุงุฑุงุช ุงูุชู ูุฌุญุช.  ูู ูุฐุง ุงููุตู ุ ุณูู ุชุชุนูู ููููุฉ ูุชุงุจุฉ ูุธุงุฆู ุงูุงุฎุชุจุงุฑ ูู ุณูุงู ุงุฎุชุจุงุฑ ุญุฒูุฉ Python.  ุฅุฐุง ููุช ุชุณุชุฎุฏู pytest ูุงุฎุชุจุงุฑ ุฃู ุดูุก ุขุฎุฑ ุบูุฑ ุญุฒูุฉ Python ุ ูุณูููู ูุนุธู ูุฐุง ุงููุตู ูููุฏูุง. </p><br><p style=";text-align:right;direction:rtl">  ุณููุชุจ ุงุฎุชุจุงุฑุงุช ุญุฒูุฉ ุงูููุงู.  ูุจู ุงูููุงู ุจุฐูู ุ ุณุฃุชุญุฏุซ ุนู ุจููุฉ ุญุฒูุฉ ุชูุฒูุน Python ูุงูุงุฎุชุจุงุฑุงุช ุงูุฎุงุตุฉ ุจูุง ุ ููุฐูู ููููุฉ ุฌุนู ุงูุงุฎุชุจุงุฑุงุช ุชุฑู ุญุฒูุฉ ุงูุงุฎุชุจุงุฑ.  ุซู ุณุฃุฑูู ููููุฉ ุงุณุชุฎุฏุงู ุงูุชุฃููุฏ ูู ุงูุงุฎุชุจุงุฑุงุช ุ ูููู ุชุชุนุงูู ุงูุงุฎุชุจุงุฑุงุช ูุน ุงูุงุณุชุซูุงุกุงุช ุบูุฑ ุงููุชููุนุฉ ูุงุฎุชุจุงุฑ ุงูุงุณุชุซูุงุกุงุช ุงููุชููุนุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงูุฉ ุ ุณูููู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุงุฎุชุจุงุฑุงุช.  ุจูุฐู ุงูุทุฑููุฉ ุณูู ุชุชุนูู ููููุฉ ุชูุธูู ุงูุงุฎุชุจุงุฑุงุช ูู ุงููุตูู ุงูุฏุฑุงุณูุฉ ูุงููุญุฏุงุช ุงูููุทูุฉ ูุงูุฏูุงุฆู.  ุณุฃุนุฑุถ ูู ุจุนุฏ ุฐูู ููููุฉ ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช ูุชุญุฏูุฏ ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ุชุฑูุฏ ุชุดุบูููุง ุ ูููุงูุดุฉ ููู ูููู ุฃู ุชุณุงุนุฏู ุงูุนูุงูุงุช ุงููุถููุฉ ูู ุชุฎุทู ุงูุงุฎุชุจุงุฑุงุช ููุถุน ุนูุงูุงุช ุนูููุง ุ ูุชููุนุฉ ุงููุดู.  ุฃุฎูุฑูุง ุ ุณุฃุชุญุฏุซ ุนู ุชุญุฏูุฏ ูุนุงููุฑ ุงูุงุฎุชุจุงุฑุงุช ุ ูุงูุฐู ูุณูุญ ุจุงุณุชุฏุนุงุก ุงูุงุฎุชุจุงุฑุงุช ุจุจูุงูุงุช ูุฎุชููุฉ. </p><br><blockquote style=";text-align:right;direction:rtl"> <strong><em>ููุงุญุธุฉ ุงููุชุฑุฌู:</em></strong> <strong><em>ุฅุฐุง ููุช ุชุณุชุฎุฏู Python 3.5 ุฃู 3.6 ุ</em></strong> ูุนูุฏูุง ุชููู ุจุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ูู ุงููุตู 2 ุ ูุฏ ุชุชููู ุฑุณุงุฆู ูุซู ูุฐุง <br><img src="https://habrastorage.org/webt/57/eq/4x/57eq4xsrdjfiyxn9g9ihresujc8.jpeg"><br>  ูุชู ุงูุชุนุงูู ูุน ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุฅุตูุงุญ <code>...\code\tasks_proj\src\tasks\tasksdb_tinydb.py</code> ูุฅุนุงุฏุฉ ุชุซุจูุช ุญุฒูุฉ ุงูููุงู <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd /path/to/code $ pip install ./tasks_proj/`</code> </pre> <br><br>  <code>eids</code> ุฅูู <code>doc_ids</code> <code>eids</code> ุงููุนููุงุช ุงููุณูุงุฉ ุนูู <code>doc_ids</code> ู <code>eid</code> ุนูู <code>doc_id</code> ูู ุงููุญุฏุฉ ุงูููุทูุฉ <code>...\code\tasks_proj\src\tasks\tasksdb_tinydb.py</code> <br><br>  ุดุฑุญ <code>#83783</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง.</a> </blockquote><br><h2 id="testirovanie-paketa" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุญุฒูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููุนุฑูุฉ ููููุฉ ูุชุงุจุฉ ูุธุงุฆู ุงูุงุฎุชุจุงุฑ ูุญุฒูุฉ Python ุ ุณูู ูุณุชุฎุฏู ูุดุฑูุน Tasks ุนููุฉ ููุง ูู ููุถุญ ูู ูุดุฑูุน Tasks ูู ุงูุตูุญุฉ xii.  ุงูููุงู ูู ุญุฒูุฉ Python ุชุชุถูู ุฃุฏุงุฉ ุณุทุฑ ุฃูุงูุฑ ุจููุณ ุงุณู ุงููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุฏู ุงูููุญู 4 ุ ุชุบููู ูุชูุฒูุน ูุดุงุฑูุน Python ูู ุงูุตูุญุฉ 175 ุ ุดุฑุญูุง ูููููุฉ ุชูุฒูุน ูุดุงุฑูุนู ูุญูููุง ุฏุงุฎู ูุฑูู ุตุบูุฑ ุฃู ุนุงููููุง ูู ุฎูุงู PyPI ุ ูุฐูู ูู ุฃุฎูุถ ูู ุชูุงุตูู ุญูู ููููุฉ ุงูููุงู ุจุฐูู ุ  ููุน ุฐูู ุ ุฏุนููุง ูููู ูุธุฑุฉ ุณุฑูุนุฉ ุนูู ูุง ูู ููุฌูุฏ ูู ูุดุฑูุน "ุงูููุงู" ูููู ุชุชูุงุณุจ ุงููููุงุช ุงููุฎุชููุฉ ูุน ุณุฌู ุงูุงุฎุชุจุงุฑ ููุฐุง ุงููุดุฑูุน. </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุจููุฉ ููู ูุดุฑูุน ุงูููุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tasks_proj/ โโโ CHANGELOG.rst โโโ LICENSE โโโ MANIFEST.in โโโ README.rst โโโ setup.py โโโ src โ โโโ tasks โ โโโ __init__.py โ โโโ api.py โ โโโ cli.py โ โโโ config.py โ โโโ tasksdb_pymongo.py โ โโโ tasksdb_tinydb.py โโโ tests โโโ conftest.py โโโ pytest.ini โโโ func โ โโโ __init__.py โ โโโ test_add.py โ โโโ ... โโโ unit โโโ __init__.py โโโ test_task.py โโโ ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฏ ููุช ุจุชุถููู ูุงุฆูุฉ ูุงููุฉ ุจุงููุดุฑูุน (ุจุงุณุชุซูุงุก ุงููุงุฆูุฉ ุงููุงููุฉ ููููุงุช ุงูุงุฎุชุจุงุฑ) ููุฅุดุงุฑุฉ ุฅูู ูุฏู ููุงุกูุฉ ุงูุงุฎุชุจุงุฑุงุช ูุจููุฉ ุงููุดุฑูุน ูุงูุฅุดุงุฑุฉ ุฅูู ุนุฏุฉ ูููุงุช ุฃุณุงุณูุฉ ููุงุฎุชุจุงุฑ ุ ููู <em>conftest.py ุ pytest.ini</em> ุ ููุฎุชูู <em><code>__init__.py</code></em> ูููุงุช <em><code>__init__.py</code></em> ู <em>setup.py</em> . </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุชุฎุฒูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูู <em>ุงุฎุชุจุงุฑุงุช</em> ูููุตูุฉ ุนู ูููุงุช ูุตุฏุฑ ุงูุญุฒูุฉ ูู <em>src</em> .  ูุฐุง ููุณ ุดุฑุทุง ุ ูููู ุฃูุถู ููุงุฑุณุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฌููุน ุงููููุงุช ุฐุงุช ุงููุณุชูู ุงูุฃุนูู ุ <em>CHANGELOG.rst ุ LICENSE ุ README.rst ุ MANIFEST.in</em> ุ ู <em>setup.py</em> ุ ุชูุช ููุงูุดุชูุง ุจูุฒูุฏ ูู ุงูุชูุงุตูู ูู ุงูููุญู 4 ุ ุชุบููู ูุชูุฒูุน ูุดุฑูุนุงุช Python ุ ุนูู ุงูุตูุญุฉ 175. ุนูู ุงูุฑุบู ูู ุฃู <em>setup.py</em> ููู ูุจูุงุก ุชูุฒูุน ูู ุงูุญุฒูุฉ ุ ููุฐูู ุงููุฏุฑุฉ ุนูู ุชุซุจูุช ุงูุญุฒูุฉ ูุญููุง ุจุญูุซ ุชููู ุงูุญุฒูุฉ ูุชุงุญุฉ ููุงุณุชูุฑุงุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุชููุณู ุงูุงุฎุชุจุงุฑุงุช ุงููุธูููุฉ ูุงููุญุฏุฉ ุฅูู ูุชุงููุฌุงุช ุฎุงุตุฉ ุจูุง.  ูุฐุง ูุฑุงุฑ ุชุนุณูู ูุบูุฑ ุถุฑูุฑู.  ููุน ุฐูู ุ ูุฅู ุชูุธูู ูููุงุช ุงูุงุฎุชุจุงุฑ ูู ุงูุนุฏูุฏ ูู ุงูุฏูุงุฆู ูุฌุนู ูู ุงูุณูู ุชุดุบูู ูุฌููุนุฉ ูุฑุนูุฉ ูู ุงูุงุฎุชุจุงุฑุงุช.  ุฃุฑุบุจ ูู ุงููุตู ุจูู ุงูุงุฎุชุจุงุฑุงุช ุงููุธูููุฉ ูุงููุญุฏุฉ ูุฃู ุงูุงุฎุชุจุงุฑุงุช ุงููุธูููุฉ ูุฌุจ ุฃูุง ุชููุทุน ุฅูุง ุฅุฐุง ูููุง ุจุชุบููุฑ ูุธุงุฆู ุงููุธุงู ุนู ูุตุฏ ุ ุจูููุง ูุฏ ุชููุทุน ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุจูุงุก ุฃู ุชุบููุฑุงุช ุงูุชูููุฐ. </p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงููุดุฑูุน ุนูู ููุนูู ูู ูููุงุช <code>__init__.py</code> : ุชูู ุงูููุฌูุฏุฉ ูู <code>src/</code> directory ูุชูู ุงูููุฌูุฏุฉ ูู <code>tests/</code> .  ูุฎุจุฑ <code>src/tasks/__init__.py</code> Python ุฃู ุงูุฏููู ุนุจุงุฑุฉ ุนู ุญุฒูุฉ.  ูุนูู ุฃูุถูุง ููุงุฌูุฉ ุฑุฆูุณูุฉ ููุญุฒูุฉ ุนูุฏูุง ูุณุชุฎุฏู ุดุฎุต ูุง <code>import tasks</code> .  ุฃูู ูุญุชูู ุนูู ุฑูุฒ ูุงุณุชูุฑุงุฏ ูุธุงุฆู ูุนููุฉ ูู <code>api.py</code> ุ ุจุญูุซ ูููู ูู <code>cli.py</code> ููููุงุช ุงูุงุฎุชุจุงุฑ ุงูุฎุงุตุฉ ุจูุง ุงููุตูู ุฅูู ูุธุงุฆู ุงูุญุฒูุฉ ุ ุนูู ุณุจูู ุงููุซุงู <code>tasks.add()</code> ุ ุจุฏูุงู ูู ุชูููุฐ <code>task.api.add ()</code> .  <code>tests/func/__init__.py</code> ุงููููุงุช <code>tests/func/__init__.py</code> <code>tests/unit/__init__.py</code> ูุงุฑุบุฉ.  ูุฎุจุฑูู pytest ุจุงูุงุฑุชูุงุก ุจุฏููู ูุงุญุฏ ููุนุซูุฑ ุนูู ุฌุฐุฑ ุฏููู ุงูุงุฎุชุจุงุฑ ูููู <code>pytest.ini</code> . </p><br><p style=";text-align:right;direction:rtl">  ููู <code>pytest.ini</code> ุงุฎุชูุงุฑู.  ุฃูู ูุญุชูู ุนูู ุงูุชูููู ุงูุนุงู pytest ูููุดุฑูุน ุจุฃูููู.  ูุฌุจ ุฃูุง ูุญุชูู ูุดุฑูุนู ุนูู ุฃูุซุฑ ูู ูุงุญุฏ.  ูุฏ ูุญุชูู ุนูู ุชูุฌููุงุช ุชุบูุฑ ุณููู pytest ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุนุฏุงุฏ ูุงุฆูุฉ ูู ุงููุนููุงุช ุงูุชู ุณูุชู ุงุณุชุฎุฏุงููุง ุฏุงุฆููุง.  ุณูู ุชุชุนูู ูู ุดูุก ุนู <code>pytest.ini</code> ูู ุงููุตู 6 ุ "ุงูุชูููู" ุ ูู ุงูุตูุญุฉ 113. </p><br><p style=";text-align:right;direction:rtl">  ููู conftest.py ุงุฎุชูุงุฑู ุฃูุถูุง.  ููุนุชุจุฑ pytest ุจูุซุงุจุฉ "ูููู ุฅุถุงูู ูุญูู" ููุฏ ูุญุชูู ุนูู ูุธุงุฆู ุฑุจุท ูุชุซุจูุชุงุช.  <em>ูุธุงุฆู ุฑุจุท</em> ูู ูุณููุฉ ูุชุถููู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุฌุฒุก ูู ููุช ุชุดุบูู pytest ูุชุบููุฑ ููููุฉ ุนูู pytest.  ูู ุชุฑููุจุงุช ุงูุฅุนุฏุงุฏ ู teardown ุงูุชู ุชุนูู ูุจู ูุจุนุฏ ูุธุงุฆู ุงูุงุฎุชุจุงุฑ ููููู ุงุณุชุฎุฏุงููุง ูุชูุซูู ุงูููุงุฑุฏ ูุงูุจูุงูุงุช ุงููุณุชุฎุฏูุฉ ูู ุงูุงุฎุชุจุงุฑุงุช.  (ุชูุช ููุงูุดุฉ ุงูุชุฑููุจุงุช ูู ุงููุตู 3 ุ ุชุฑููุจุงุช pytest ุ ูู ุงูุตูุญุฉ 49 ูุงููุตู 4 ุ ุงูุชุฑููุจุงุช ุงููุฏูุฌุฉ ุ ูู ุงูุตูุญุฉ 71 ุ ููุธุงุฆู ุงูุฎุทุงู ุชูุช ููุงูุดุชูุง ูู ุงููุตู 5 "ุงูุฅุถุงูุงุช" ูู ุงูุตูุญุฉ 95.) ูุธุงุฆู ุงูุฎุทุงู ูุงูุชุฑููุจุงุช ุงููุณุชุฎุฏูุฉ ูู ูุฌุจ ุชุถููู ุงูุงุฎุชุจุงุฑุงุช ูู ุงูุนุฏูุฏ ูู ุงูุฏูุงุฆู ุงููุฑุนูุฉ ูู ุงูุงุฎุชุจุงุฑุงุช / conftest.py.  ูููู ุฃู ูููู ูุฏูู ุงูุนุฏูุฏ ูู ูููุงุช conftest.py ุ  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงูุญุตูู ุนูู ูุงุญุฏ ูู ุงูุงุฎุชุจุงุฑุงุช ููุงุญุฏ ููู ุฏููู ูุฑุนู ููุงุฎุชุจุงุฑุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ุชูู ูุฏ ููุช ุจุฐูู ุจุงููุนู ุ ูููููู ุชูุฒูู ูุณุฎุฉ ูู ุงูููุฏ ุงููุตุฏุฑู ููุฐุง ุงููุดุฑูุน ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุน</a> ุงููุชุงุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฅููุชุฑููู</a> .  ุจุฏูุงู ูู ุฐูู ุ ููููู ุงูุนูู ูู ูุดุฑูุนู ุจูููู ููุงุซู. </p><br><p style=";text-align:right;direction:rtl">  ููุง test_task.py: </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / unit / test_task.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">"""Test the Task data type.""" # -*- coding: utf-8 -*- from tasks import Task def test_asdict(): """_asdict()   .""" t_task = Task('do something', 'okken', True, 21) t_dict = t_task._asdict() expected = {'summary': 'do something', 'owner': 'okken', 'done': True, 'id': 21} assert t_dict == expected def test_replace(): """replace ()      .""" t_before = Task('finish book', 'brian', False) t_after = t_before._replace(id=10, done=True) t_expected = Task('finish book', 'brian', True, 10) assert t_after == t_expected def test_defaults(): """        .""" t1 = Task() t2 = Task(None, None, False, None) assert t1 == t2 def test_member_access(): """ .field  namedtuple.""" t = Task('buy milk', 'brian') assert t.summary == 'buy milk' assert t.owner == 'brian' assert (t.done, t.id) == (False, None)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชูู ููู <em>test_task.py</em> ุนูู ุนุจุงุฑุฉ ุงูุงุณุชูุฑุงุฏ ูุฐู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">from tasks import Task</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃูุถู ุทุฑููุฉ ููุณูุงุญ ุจุงุฎุชุจุงุฑุงุช ุงุณุชูุฑุงุฏ ุงูููุงู ุฃู ุงุณุชูุฑุงุฏ ุดูุก ูู ุงูููุงู ูู ุชุซุจูุช ุงูููุงู ูุญูููุง ุจุงุณุชุฎุฏุงู ููุทุฉ.  ูุฐุง ูููู ูุฃู ููุงู ููู setup.py ููุงุชุตุงู ุจุงูููุงุท ูุจุงุดุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุซุจูุช ุงูููุงู ุนู ุทุฑูู ุชุดุบูู <code>pip install .</code>  ุฃู <code>pip install -e .</code>  ูู ุงูุฏููู task_proj.  ุฃู ุฎูุงุฑ ุขุฎุฑ ูุชุดุบูู <code>pip install -e tasks_proj</code> ูู ุงูุฏููู ุจูุณุชูู ุฃุนูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd /path/to/code $ pip install ./tasks_proj/ $ pip install --no-cache-dir ./tasks_proj/ Processing ./tasks_proj Collecting click (from tasks==0.1.0) Downloading click-6.7-py2.py3-none-any.whl (71kB) ... Collecting tinydb (from tasks==0.1.0) Downloading tinydb-3.4.0.tar.gz Collecting six (from tasks==0.1.0) Downloading six-1.10.0-py2.py3-none-any.whl Installing collected packages: click, tinydb, six, tasks Running setup.py install for tinydb ... done Running setup.py install for tasks ... done Successfully installed click-6.7 six-1.10.0 tasks-0.1.0 tinydb-3.4.0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑุบุจ ููุท ูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ููููุงู ุ ูุณูุชู ูุฐุง ุงูุฃูุฑ.  ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุชุบููุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ุฃุซูุงุก ุชุซุจูุช ุงูููุงู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ุงูุชุซุจูุช ูุน ุงูุฎูุงุฑ -e (ููุชุญุฑูุฑ "ูุงุจู ููุชุญุฑูุฑ"): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ pip install -e ./tasks_proj/ Obtaining file:///path/to/code/tasks_proj Requirement already satisfied: click in /path/to/venv/lib/python3.6/site-packages (from tasks==0.1.0) Requirement already satisfied: tinydb in /path/to/venv/lib/python3.6/site-packages (from tasks==0.1.0) Requirement already satisfied: six in /path/to/venv/lib/python3.6/site-packages (from tasks==0.1.0) Installing collected packages: tasks Found existing installation: tasks 0.1.0 Uninstalling tasks-0.1.0: Successfully uninstalled tasks-0.1.0 Running setup.py develop for tasks Successfully installed tasks</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุญุงูู ุงูุขู ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd /path/to/code/ch2/tasks_proj/tests/unit $ pytest test_task.py ===================== test session starts ====================== collected 4 items test_task.py .... =================== 4 passed in 0.01 seconds ===================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฏ ุนููุช ุงูุงุณุชูุฑุงุฏ!  ูููู ููุงุฎุชุจุงุฑุงุช ุงูุฃุฎุฑู ุงูุขู ุงุณุชุฎุฏุงู ููุงู ุงูุงุณุชูุฑุงุฏ ุจุฃูุงู.  ุงูุขู ุฏุนูุง ููุชุจ ุจุนุถ ุงูุงุฎุชุจุงุฑุงุช. </p><br><h2 id="ispolzovanie-operatorov-assert" style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุชุฃููุฏ ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชูุชุจ ูุธุงุฆู ุงูุงุฎุชุจุงุฑ ุ ูุฅู ุจูุงู Python ุงูุนุงุฏู ูู ุงูุฃุฏุงุฉ ุงูุฃุณุงุณูุฉ ููุฅุจูุงุบ ุนู ุญุงูุงุช ูุดู ุงูุงุฎุชุจุงุฑ.  ุจุณุงุทุฉ ูุฐุง ูู pytest ุฑุงุฆุนุฉ.  ูุฐุง ูู ูุง ูุฌุนู ุงูุนุฏูุฏ ูู ุงููุทูุฑูู ูุณุชุฎุฏููู pytest ุนูู ููุฉ ุงูุฃุทุฑ ุงูุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุงุณุชุฎุฏูุช ุฃู ููุตุฉ ุงุฎุชุจุงุฑ ุฃุฎุฑู ุ ููู ุงููุญุชูู ุฃู ุชููู ูุฏ ุฑุฃูุช ุงูุนุฏูุฏ ูู ูุธุงุฆู ูุณุงุนุฏ ุงูุชุฃููุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููุง ููู ูุงุฆูุฉ ุจุจุนุถ ุฃุดูุงู ูุธุงุฆู ุงูุชุฃููุฏ ูุงูุชุฃููุฏ ุงููุณุงุนุฏุฉ: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  <strong>pytest</strong> </th><th>  <strong>unittest</strong> </th></tr></thead><tbody><tr><td>  ุชุฃููุฏ ุดูุก ูุง </td><td>  assertTrue (ุดูุก ูุง) </td></tr><tr><td>  ุชุฃููุฏ = ุจ </td><td>  ุชุฃููุฏ ุงููุณุงูุงุฉ (ุฃ ุ ุจ) </td></tr><tr><td>  ุชุฃููุฏ &lt;= ุจ </td><td>  assertLessEqual (aุ b) </td></tr><tr><td>  ... </td><td>  ... </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูุน pytest ููููู ุงุณุชุฎุฏุงู ุงูุชุฃููุฏ &lt;expression&gt; ูุน ุฃู ุชุนุจูุฑ.  ุฅุฐุง ุชู ุชูููู ุงูุชุนุจูุฑ ุฅูู False ุนูุฏูุง ูุชู ุชุญูููู ุฅูู ููุทูู ุ ูุณููุดู ุงูุงุฎุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุชุชุถูู pytest ูุธููุฉ ุชุณูู ุฅุนุงุฏุฉ ูุชุงุจุฉ assert ุงูุชู ุชุนุชุฑุถ ุชุฃููุฏ ุงูููุงููุงุช ูุงุณุชุจุฏุงููุง ุจูุงุญุฏุฉ ูููููุง ุฅุฎุจุงุฑู ุฃูุซุฑ ุนู ุณุจุจ ูุดู ุนุจุงุฑุงุชู.  ุฏุนููุง ูุฑู ูุฏู ูุงุฆุฏุฉ ุฅุนุงุฏุฉ ุงูุตูุงุบุฉ ูุฐู ุฅุฐุง ูุธุฑูุง ุฅูู ุจุนุถ ุฃุฎุทุงุก ุงูุนุจุงุฑุฉ: </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / unit / test_task_fail.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">""" the Task type    .""" from tasks import Task def test_task_equality(): """     .""" t1 = Task('sit there', 'brian') t2 = Task('do something', 'okken') assert t1 == t2 def test_dict_equality(): """ ,   dicts,    .""" t1_dict = Task('make sandwich', 'okken')._asdict() t2_dict = Task('make sandwich', 'okkem')._asdict() assert t1_dict == t2_dict</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุชูุดู ุ ูููู ุงููุนูููุงุช ุงูููุฌูุฏุฉ ูู ุงูุชุชุจุน ูุซูุฑุฉ ููุงูุชูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\unit&gt;pytest test_task_fail.py ============================= test session starts ============================= collected 2 items test_task_fail.py FF ================================== FAILURES =================================== _____________________________ test_task_equality ______________________________ def test_task_equality(): """Different tasks should not be equal.""" t1 = Task('sit there', 'brian') t2 = Task('do something', 'okken') &gt; assert t1 == t2 E AssertionError: assert Task(summary=...alse, id=None) == Task(summary='...alse, id=None) E At index 0 diff: 'sit there' != 'do something' E Use -v to get the full diff test_task_fail.py:9: AssertionError _____________________________ test_dict_equality ______________________________ def test_dict_equality(): """Different tasks compared as dicts should not be equal.""" t1_dict = Task('make sandwich', 'okken')._asdict() t2_dict = Task('make sandwich', 'okkem')._asdict() &gt; assert t1_dict == t2_dict E AssertionError: assert OrderedDict([...('id', None)]) == OrderedDict([(...('id', None)]) E Omitting 3 identical items, use -vv to show E Differing items: E {'owner': 'okken'} != {'owner': 'okkem'} E Use -v to get the full diff test_task_fail.py:16: AssertionError ========================== 2 failed in 0.30 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุงุญ ุจุงูุฑ!  ูุฐุง ูุซูุฑ ูู ุงููุนูููุงุช.  ููู ุงุฎุชุจุงุฑ ุบูุฑ ูุงุฌุญ ุ ูุชู ุนุฑุถ ุณูุณูุฉ ุงูุฎุทุฃ ุจุงูุถุจุท ูุน&gt; ูุคุดุฑ ุงููุดู.  ุชุนุฑุถ ุงูุฎุทูุท E ูุนูููุงุช ุฅุถุงููุฉ ุญูู ูุดู ุงูุชุฃููุฏ ููุณุงุนุฏุชู ูู ููู ุงูุฃุฎุทุงุก ุงูุชู ุญุฏุซุช. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุง ูุถุนุช ุนูุฏุง ุนุฏู ุงูุชุทุงุจู ูู <code>test_task_equality()</code> ุ ูููู ุชู ุนุฑุถ ุงูุฃูู ููุท ูู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุณุงุจูุฉ.  ุฏุนููุง ูุญุงูู ูุฑุฉ ุฃุฎุฑู ุจุงุณุชุฎุฏุงู ุนูุงูุฉ <code>-v</code> ุ ููุง ูู ููุชุฑุญ ูู ุฑุณุงูุฉ ุงูุฎุทุฃ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\unit&gt;pytest -v test_task_fail.py ============================= test session starts ============================= collected 2 items test_task_fail.py::test_task_equality FAILED test_task_fail.py::test_dict_equality FAILED ================================== FAILURES =================================== _____________________________ test_task_equality ______________________________ def test_task_equality(): """Different tasks should not be equal.""" t1 = Task('sit there', 'brian') t2 = Task('do something', 'okken') &gt; assert t1 == t2 E AssertionError: assert Task(summary=...alse, id=None) == Task(summary='...alse, id=None) E At index 0 diff: 'sit there' != 'do something' E Full diff: E - Task(summary='sit there', owner='brian', done=False, id=None) E ? ^^^ ^^^ ^^^^ E + Task(summary='do something', owner='okken', done=False, id=None) E ? +++ ^^^ ^^^ ^^^^ test_task_fail.py:9: AssertionError _____________________________ test_dict_equality ______________________________ def test_dict_equality(): """Different tasks compared as dicts should not be equal.""" t1_dict = Task('make sandwich', 'okken')._asdict() t2_dict = Task('make sandwich', 'okkem')._asdict() &gt; assert t1_dict == t2_dict E AssertionError: assert OrderedDict([...('id', None)]) == OrderedDict([(...('id', None)]) E Omitting 3 identical items, use -vv to show E Differing items: E {'owner': 'okken'} != {'owner': 'okkem'} E Full diff: E {'summary': 'make sandwich', E - 'owner': 'okken', E ? ^... E E ...Full output truncated (5 lines hidden), use '-vv' to show test_task_fail.py:16: AssertionError ========================== 2 failed in 0.28 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ุฃุนุชูุฏ ุฃูู ุฑุงุฆุน!  pytest ูู ููู ููุท ูุงุฏุฑุง ุนูู ุงูุนุซูุฑ ุนูู ูู ุงูุงุฎุชูุงูุงุช ุ ูููู ุฃูุถุง ุฃุธูุฑ ููุง ุจุงูุถุจุท ุฃูู ูุฐู ุงูุงุฎุชูุงูุงุช.  ูุณุชุฎุฏู ูุฐุง ุงููุซุงู ุชุฃููุฏ ุงููุณุงูุงุฉ ููุท ุ  ููููู ุงูุนุซูุฑ ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุดูุงู ุงููุฎุชููุฉ ูุจูุงู ุงูุชุฃููุฏ ุนูู pytest.org ูุน ูุนูููุงุช ุชุตุญูุญ ุงูุชุชุจุน ุงููุฐููุฉ. </p><br><h2 id="ozhidanie-isklyucheniy-expected-exception" style=";text-align:right;direction:rtl">  ุงุณุชุซูุงุก ูุชููุน </h2><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ุชุญุฏุซ ุงุณุชุซูุงุกุงุช ูู ุนุฏุฉ ุฃูุงูู ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงูููุงู.  ุฏุนููุง ูููู ูุธุฑุฉ ุณุฑูุนุฉ ุนูู ุงููุธุงุฆู ุงูููุฌูุฏุฉ ูู <em>ุงูููุงู / api.py</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">def add(task): # type: (Task) -\&gt; int def get(task_id): # type: (int) -\&gt; Task def list_tasks(owner=None): # type: (str|None) -\&gt; list of Task def count(): # type: (None) -\&gt; int def update(task_id, task): # type: (int, Task) -\&gt; None def delete(task_id): # type: (int) -\&gt; None def delete_all(): # type: () -\&gt; None def unique_id(): # type: () -\&gt; int def start_tasks_db(db_path, db_type): # type: (str, str) -\&gt; None def stop_tasks_db(): # type: () -\&gt; None</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุงุชูุงู ุจูู ุฑูุฒ CLI ูู <em>cli.py</em> ูุฑูุฒ API ูู <em>api.py</em> ุจุดุฃู ุงูุฃููุงุน ุงูุชู ุณูุชู ุชูุฑูุฑูุง ุฅูู ูุธุงุฆู API.  ููุงููุงุช API ูู ุญูุซ ุฃุชููุน ุฑูุน ุงูุงุณุชุซูุงุกุงุช ุฅุฐุง ูุงู ุงูููุน ุบูุฑ ุตุญูุญ.  ููุชุฃูุฏ ูู ุฃู ูุฐู ุงููุธุงุฆู ุชููู ุงุณุชุซูุงุกุงุช ุฅุฐุง ูู ูุชู ุงุณุชุฏุนุงุคูุง ุจุดูู ุตุญูุญ ุ ุงุณุชุฎุฏู ุงูููุน ุงูุฎุทุฃ ูู ูุธููุฉ ุงูุงุฎุชุจุงุฑ ูุฑูู ุงุณุชุซูุงุกุงุช TypeError ุนูุฏุงู ูุงุณุชุฎุฏุงููุง ูุน pytest.raises (ุงุณุชุซูุงุก ูุชููุน) ุ ุนูู ุณุจูู ุงููุซุงู: </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / func / test_api_exceptions.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">"""    -   API.""" import pytest import tasks def test_add_raises(): """add()       param.""" with pytest.raises(TypeError): tasks.add(task='not a Task object')</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู <code>test_add_raises()</code> ุ ูุน <code>pytest.raises(TypeError)</code> : <code>pytest.raises(TypeError)</code> ุงูุจูุงู ุฃู ูู ุดูุก ูู ุงููุชูุฉ ุงูุชุงููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุฌุจ ุฃู ูุฑูู ุงุณุชุซูุงุก TypeError.  ุฅุฐุง ูู ูุชู ุฑูุน ุงุณุชุซูุงุก ุ ููุดู ุงูุงุฎุชุจุงุฑ.  ุฅุฐุง ุฃุซุงุฑ ุงูุงุฎุชุจุงุฑ ุงุณุชุซูุงุกูุง ุขุฎุฑ ุ ูุฅูู ููุดู. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ูุญุตูุง ููุท ููุน ุงูุงุณุชุซูุงุก ูู <code>test_add_raises()</code> .  ููููู ุฃูุถูุง ุงูุชุญูู ูู ุฎูุงุฑุงุช ุงูุงุณุชุจุนุงุฏ.  ุจุงููุณุจุฉ ุฅูู <code>start_tasks_db(db_path, db_type)</code> ุ ูุฌุจ ุฃูุง ูููู <em>db_type</em> ููุท <em>ุนุจุงุฑุฉ</em> ุนู ุณูุณูุฉ ุ ุจู ูุฌุจ ุฃู ูููู ุฅูุง "ุตุบูุฑ" ุฃู "mongo".  ููููู ุงูุชุญูู ููุชุฃูุฏ ูู ุตุญุฉ ุฑุณุงูุฉ ุงูุงุณุชุซูุงุก ุนู ุทุฑูู ุฅุถุงูุฉ ููู excinfo: </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / func / test_api_exceptions.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">def test_start_tasks_db_raises(): """,     .""" with pytest.raises(ValueError) as excinfo: tasks.start_tasks_db('some/great/path', 'mysql') exception_msg = excinfo.value.args[0] assert exception_msg == "db_type must be a 'tiny' or 'mongo'"</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุชูุญ ููุง ุฃู ููุธุฑ ุนู ูุซุจ ูู ูุฐุง ุงูุงุณุชุซูุงุก.  ูุชู ุฅุฏุฎุงู ุงุณู ุงููุชุบูุฑ ุจุนุฏ ูู (ูู ูุฐู ุงูุญุงูุฉ ุ excinfo) ูุน ูุนูููุงุช ุงูุงุณุชุซูุงุก ููู ูู ุงูููุน ExceptionInfo. </p><br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุชูุง ุ ูุฑูุฏ ุงูุชุฃูุฏ ูู ุฃู ุงููุนููุฉ ุงูุงุณุชุซูุงุก ุงูุฃูู (ูุงููุญูุฏ) ุชุชุทุงุจู ูุน ุงูุณูุณูุฉ. </p><br><h2 id="marking-test-functions" style=";text-align:right;direction:rtl">  ุจููุงุณุจุฉ ูุธุงุฆู ุงูุงุฎุชุจุงุฑ </h2><br><p style=";text-align:right;direction:rtl">  ูููุฑ pytest ุขููุฉ ุจุงุฑุฏุฉ ููุถุน ุนูุงูุงุช ูู ูุธุงุฆู ุงูุงุฎุชุจุงุฑ.  ูููู ุฃู ูููู ููุงุฎุชุจุงุฑ ุฃูุซุฑ ูู ุนูุงูุฉ ูุงุญุฏุฉ ุ ููููู ุฃู ุชููู ุงูุนูุงูุฉ ูู ุงูุนุฏูุฏ ูู ุงูุงุฎุชุจุงุฑุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุณุชููู ุงูุนูุงูุงุช ููุทููุฉ ุจุงููุณุจุฉ ูู ุจุนุฏ ุฑุคูุชูุง ูู ุงูุนูู.  ูููุชุฑุถ ุฃููุง ูุฑูุฏ ุชุดุบูู ูุฌููุนุฉ ูุฑุนูุฉ ูู ุงุฎุชุจุงุฑุงุชูุง ุนูู ุฃููุง "ุงุฎุชุจุงุฑ ุฏุฎุงู" ุณุฑูุน ููุญุตูู ุนูู ููุฑุฉ ุนูุง ุฅุฐุง ูุงู ููุงู ุฃู ูุฌูุฉ ุฎุทูุฑุฉ ูู ุงููุธุงู.  ููููุง ููุงุชูุงููุงุช ุ ูุง ุชุนุชุจุฑ ุงุฎุชุจุงุฑุงุช ุงูุฏุฎุงู ุฃุฌูุญุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ ูุดุงููุฉ ุ ูููููุง ูุฌููุนุฉ ูุฑุนูุฉ ูุญุฏุฏุฉ ููููู ุชุดุบูููุง ุจุณุฑุนุฉ ูุฅุนุทุงุก ุงููุทูุฑ ุตูุฑุฉ ูุงุฆูุฉ ุนู ุตุญุฉ ุฌููุน ุฃุฌุฒุงุก ุงููุธุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุฅุถุงูุฉ ูุฌููุนุฉ ุงุฎุชุจุงุฑ ุฏุฎุงู ุฅูู ูุดุฑูุน ุงูููุงู ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ <code>@mark.pytest.smoke</code> ูุจุนุถ ุงูุงุฎุชุจุงุฑุงุช.  ุฏุนูุง ูุถูููุง ุฅูู ุงูุนุฏูุฏ ูู ุงุฎุชุจุงุฑุงุช <code>test_api_exceptions.py</code> (ูุงุญุธ ุฃู <em>ุงูุฏุฎุงู</em> <em>ูุงูุญุตูู ุนูู</em> ุนูุงูุงุช ููุณุช ูุฏูุฌุฉ ูู pytest ุ ููุฏ ุชูุตูุช ุฅูููุง ููุชู): </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / func / test_api_exceptions.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.smoke def test_list_raises(): """list()       param.""" with pytest.raises(TypeError): tasks.list_tasks(owner=123) @pytest.mark.get @pytest.mark.smoke def test_get_raises(): """get()       param.""" with pytest.raises(TypeError): tasks.get(task_id='123')</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููู ุจุชุดุบูู ุชูู ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ุชุญูู ุนูุงูุฉ <code>-m marker_name</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests&gt;cd func (venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v -m "smoke" test_api_exceptions.py ============================= test session starts ============================= collected 7 items test_api_exceptions.py::test_list_raises PASSED test_api_exceptions.py::test_get_raises PASSED ============================= 5 tests deselected ============================== =================== 2 passed, 5 deselected in 0.18 seconds ==================== (venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt; (venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v -m "get" test_api_exceptions.py ============================= test session starts ============================= collected 7 items test_api_exceptions.py::test_get_raises PASSED ============================= 6 tests deselected ============================== =================== 1 passed, 6 deselected in 0.13 seconds ====================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฐูุฑ ุฃู <code>-v</code> ุงุฎุชุตุงุฑ ูู - <code>--verbose</code> ููุชูุญ ููุง ุฑุคูุฉ ุฃุณูุงุก ุงูุงุฎุชุจุงุฑุงุช ููุฏ ุงูุชุดุบูู.  ูุคุฏู ุงุณุชุฎุฏุงู -m "ุฏุฎุงู" ุฅูู ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑูู ุงููุณูู @ pytest.mark.smoke. </p><br><p style=";text-align:right;direction:rtl">  ุณูุคุฏู ุงุณุชุฎุฏุงู <code>-m</code> "get" ุฅูู ุชุดุบูู ุงุฎุชุจุงุฑ ูุงุญุฏ ูุถุน ุนูุงูุฉ <code>@pytest.mark.get</code> .  ุจุณูุท ุฌุฏุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุดูุก ูุตุจุญ ุงููุนุฌุฒุงุช ูุงููุนุฌุฒุงุช!  ูููู ููุชุนุจูุฑ ุจุนุฏ <code>-m</code> ุงุณุชุฎุฏุงู <code>and</code> / <code>or</code> <code>not</code> ุงูุฌูุน ุจูู ุนูุงูุงุช ูุชุนุฏุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v -m "smoke and get" test_api_exceptions.py ============================= test session starts ============================= collected 7 items test_api_exceptions.py::test_get_raises PASSED ============================= 6 tests deselected ============================== =================== 1 passed, 6 deselected in 0.13 seconds ====================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฏ ูููุง ุจูุฐุง ุงูุงุฎุชุจุงุฑ ููุท <code>smoke</code> <code>get</code> ุนูุงูุงุช.  ูุง ูููููุง ุงุณุชุฎุฏุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v -m "smoke and not get" test_api_exceptions.py ============================= test session starts ============================= collected 7 items test_api_exceptions.py::test_list_raises PASSED ============================= 6 tests deselected ============================== =================== 1 passed, 6 deselected in 0.13 seconds ====================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ุชุญุฏูุฏ ุฅุถุงูุฉ <code>-m 'smoke and not get'</code> ุนูู ุงุฎุชุจุงุฑ ุชู ูุถุน ุนูุงูุฉ ุนููู ุนูู <code>@pytest.mark.smoke</code> ูููู ููุณ <code>@pytest.mark.get</code> . </p><br><h3 id="zapolnenie-smoke-test" style=";text-align:right;direction:rtl">  ููุก ุงุฎุชุจุงุฑ ุงูุฏุฎุงู </h3><br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑุงุช ุงูุณุงุจูุฉ ูุง ุชุจุฏู ุจุนุฏ ูุฌููุนุฉ ูุนูููุฉ ูู <code>smoke test</code> .  ูู ุงููุงูุน ูู ูููุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ููู ุจุฅุถุงูุฉ ุฃู ููุงู.  ุจุงูุทุจุน ุณูุชุนูู ุนูู <code>smoke test</code> ุงูููุงู ุจุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุถูู ุจุนุถ ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ุชููุฑ ูู ุฅุถุงูุฉ ูููุฉ ุ ูุงุณุชุฎุฏุงู ูุงุญุฏ ูููุง ูุฌุฒุก ูู ูุฌููุนุฉ ุงุฎุชุจุงุฑ <em>ุงูุฏุฎุงู</em> ูุฏููุง: </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / func / test_add.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">"""  API tasks.add ().""" import pytest import tasks from tasks import Task def test_add_returns_valid_id(): """tasks.add(valid task)    .""" # GIVEN an initialized tasks db # WHEN a new task is added # THEN returned task_id is of type int new_task = Task('do something') task_id = tasks.add(new_task) assert isinstance(task_id, int) @pytest.mark.smoke def test_added_task_has_id_set(): """,   task_id  tasks.add().""" # GIVEN an initialized tasks db # AND a new task is added new_task = Task('sit in chair', owner='me', done=True) task_id = tasks.add(new_task) # WHEN task is retrieved task_from_db = tasks.get(task_id) # THEN task_id matches id field assert task_from_db.id == task_id</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชูู ููุง ุงูุงุฎุชุจุงุฑูู ุนูู ุชุนููู GIVEN ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูููุงู ุงูุชู ุชูุช ุชููุฆุชูุง ุ ูููู ูุง ุชูุฌุฏ ูุงุนุฏุฉ ุจูุงูุงุช ูููุฃุฉ ูู ุงูุงุฎุชุจุงุฑ.  ูููููุง ุชุญุฏูุฏ ูุงุนุจุง ุงุณุงุณูุง ูุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุงุฎุชุจุงุฑ ูุชูุธูู ุจุนุฏ ุงูุงุฎุชุจุงุฑ: </p><br><blockquote style=";text-align:right;direction:rtl">  <strong>ch2 / task_proj / tests / func / test_add.py</strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.fixture(autouse=True) def initialized_tasks_db(tmpdir): """Connect to db before testing, disconnect after.""" # Setup : start db tasks.start_tasks_db(str(tmpdir), 'tiny') yield #    # Teardown : stop db tasks.stop_tasks_db()</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุชุซุจูุช ูุงุนุจุง ุงุณุงุณูุง ุ tmpdir ุงููุณุชุฎุฏูุฉ ูู ูุฐุง ุงููุซุงู ุ ูุงุนุจุง ุงุณุงุณูุง.  ุณูู ุชุชุนูู ูู ุดูุก ุนู ุงูุชุฑููุจุงุช ุงููุฏูุฌุฉ ูู ุงููุตู 4 ุ ุงูุชุฑููุจุงุช ุงููุถููุฉ ุ ูู ุงูุตูุญุฉ 71 ุ ูุณุชุชุนูู ููููุฉ ูุชุงุจุฉ ุงูุชุฑููุจุงุช ุงูุฎุงุตุฉ ุจู ูููู ุชุนูู ูู ุงููุตู 3 ุ ุชุฑููุจุงุช pytest ุ ูู ุงูุตูุญุฉ 49 ุ ุจูุง ูู ุฐูู ูุนููุฉ autouse ุงููุณุชุฎุฏูุฉ ููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุถุญ autouse ุงููุณุชุฎุฏู ูู ุงุฎุชุจุงุฑูุง ุฃู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูู ูุฐุง ุงูููู ุณูู ุชุณุชุฎุฏู ุฃุฏุงุฉ ุงูุชุซุจูุช.  ูุชู ุชูููุฐ ุงูููุฏ ูุจู <code>yield</code> ูุจู ูู ุงุฎุชุจุงุฑ ุ  ูุชู ุชูููุฐ ุงูููุฏ ุจุนุฏ <code>yield</code> ุจุนุฏ ุงูุงุฎุชุจุงุฑ.  ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ูููู ุฃู ุชุฑุฌุน ุงูุจูุงูุงุช ุฅูู ุงูุงุฎุชุจุงุฑ.  ุณุชุฃุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ูู ูุฐุง ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ ูู ุงููุตูู ุงูุชุงููุฉ ุ ููููุง ููุง ุจุญุงุฌุฉ ุฅูู ุชูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ููุงุฎุชุจุงุฑ ุ ูุฐูู ูู ูุนุฏ ุจุฅููุงูู ุงูุงูุชุธุงุฑ ุญุชู ุฃุถุทุฑ ุฅูู ุฅุธูุงุฑ ูุฐุง ุงูุฌูุงุฒ (ุงูุชุซุจูุช ุจุงูุทุจุน!).  (ูุฏุนู pytest ุฃูุถูุง ูุธุงุฆู ุงูุฅุนุฏุงุฏ ูุงูุชูููุต ุงููุฏููุฉ ุ ูุซู ุชูู ุงููุณุชุฎุฏูุฉ ูู <strong>unittest</strong> <strong>ูุงูุฃูู</strong> ุ ููููุง ููุณุช ูุซูุฑุฉ ููุงูุชูุงู ููุบุงูุฉ. ููุน ุฐูู ุ ุฅุฐุง ููุช ููุชููุง ุ ููู ููุตููุฉ ูู ุงูููุญู 5 ุ ุชุฑููุจุงุช xUnit ุ ูู ุงูุตูุญุฉ 183.) </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุคุฌู ููุงูุดุฉ ุงูุชุฑููุจุงุช ุงูุขู ููุฐูุจ ุฅูู ุจุฏุงูุฉ ุงููุดุฑูุน <em>ููุฏูุฑ ูุฌููุนุฉ ุงุฎุชุจุงุฑ ุงูุฏุฎุงู</em> ูุฏููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;cd .. (venv33) ...\bopytest-code\code\ch2\tasks_proj\tests&gt;cd .. (venv33) ...\bopytest-code\code\ch2\tasks_proj&gt;pytest -v -m "smoke" ============================= test session starts ============================= collected 56 items tests/func/test_add.py::test_added_task_has_id_set PASSED tests/func/test_api_exceptions.py::test_list_raises PASSED tests/func/test_api_exceptions.py::test_get_raises PASSED ============================= 53 tests deselected ============================= =================== 3 passed, 53 deselected in 0.49 seconds ===================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุถุญ ุฃู ุงูุงุฎุชุจุงุฑุงุช ุงูููุณููุฉ ูู ูููุงุช ูุฎุชููุฉ ูููู ุฃู ุชุนูู ูุนูุง. </p><br><h2 id="propusk-testov-skipping-tests" style=";text-align:right;direction:rtl">  ุชุฎุทู ุงูุงุฎุชุจุงุฑุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุฃู ุงูุนูุงูุงุช ุงูุชู ุชูุช ููุงูุดุชูุง ูู ุชุญุฏูุฏ ุทุฑู ุงูุชุญูู ูู ุงูุตูุญุฉ 31 ูุงูุช ูู ุงูุฃุณูุงุก ุงูุชู ุชุฎุชุงุฑูุง ุ ุฅูุง ุฃู pytest ุชุชุถูู ุจุนุถ ุงูุนูุงูุงุช ุงููุถููุฉ ุงููููุฏุฉ: <code>skip</code> ู <code>skipif</code> ู <code>xfail</code> .  ูู ูุฐุง ุงููุณู ุ ุณุฃุชุญุฏุซ ุนู <code>skip</code> ู <code>skipif</code> ุ ููู ููู <code>-xfail</code> ุงูุชุงูู. </p><br><p style=";text-align:right;direction:rtl">  ุชุชูุญ ูู <code>skipif</code> <code>skip</code> ู <code>skipif</code> ุชุฎุทู ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ูุง ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก.  ุนูู ุณุจูู ุงููุซุงู ุ ุฏุนูุง ูููู ุฃููุง ูู ูุนุฑู ููู ูุฌุจ ุฃู ุชูุฌุญ <code>tasks.unique_id()</code> .  ูุฌุจ ุนูู ูู ููุงููุฉ ุฅุฑุฌุงุน ุฑูู ูุฎุชููุ    ,       ? </p><br><p style=";text-align:right;direction:rtl"> -,    (,        <code>initialized_tasks_db</code> ;     ): </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_unique_id_1.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">"""Test tasks.unique_id().""" import pytest import tasks def test_unique_id(): """ unique_id ()     .""" id_1 = tasks.unique_id() id_2 = tasks.unique_id() assert id_1 != id_2</code> </pre> <br><p style=";text-align:right;direction:rtl">    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest test_unique_id_1.py ============================= test session starts ============================= collected 1 item test_unique_id_1.py F ================================== FAILURES =================================== _______________________________ test_unique_id ________________________________ def test_unique_id(): """Calling unique_id() twice should return different numbers.""" id_1 = tasks.unique_id() id_2 = tasks.unique_id() &gt; assert id_1 != id_2 E assert 1 != 1 test_unique_id_1.py:11: AssertionError ========================== 1 failed in 0.30 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู.  ,  .   API  ,  ,  docstring  """Return an integer that does not exist in the db.""",   <em>  ,     DB</em> .      .       ,   : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_unique_id_2.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.skip(reason='misunderstood the API') def test_unique_id_1(): """ unique_id ()     .""" id_1 = tasks.unique_id() id_2 = tasks.unique_id() assert id_1 != id_2 def test_unique_id_2(): """unique_id()    id.""" ids = [] ids.append(tasks.add(Task('one'))) ids.append(tasks.add(Task('two'))) ids.append(tasks.add(Task('three'))) #   id uid = tasks.unique_id() # ,        assert uid not in ids</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,   ,   ,   <code>@pytest..skip()</code>    . </p><br><p style=";text-align:right;direction:rtl">  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_unique_id_2.py ============================= test session starts ============================= collected 2 items test_unique_id_2.py::test_unique_id_1 SKIPPED test_unique_id_2.py::test_unique_id_2 PASSED ===================== 1 passed, 1 skipped in 0.19 seconds =====================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,   -   ,       ,         0.2.0 .           skipif: </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_unique_id_3.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.skipif(tasks.__version__ &lt; '0.2.0', reason='not supported until version 0.2.0') def test_unique_id_1(): """ unique_id ()     .""" id_1 = tasks.unique_id() id_2 = tasks.unique_id() assert id_1 != id_2</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,     <code>skipif()</code> ,      Python.   ,  ,    .      <em>skip</em> ,    <em>skipif</em> .     <em>skip</em> ,     <em>skipif</em> .      ( <em>reason</em> )   <em>skip</em> , <em>skipif</em>  <em>xfail</em> .    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest test_unique_id_3.py ============================= test session starts ============================= collected 2 items test_unique_id_3.py s. ===================== 1 passed, 1 skipped in 0.20 seconds =====================</code> </pre> <br><p style=";text-align:right;direction:rtl"> <code>s.</code> ,     (skipped),    (passed).   ,    -  <code>-v</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_unique_id_3.py ============================= test session starts ============================= collected 2 items test_unique_id_3.py::test_unique_id_1 SKIPPED test_unique_id_3.py::test_unique_id_2 PASSED ===================== 1 passed, 1 skipped in 0.19 seconds =====================</code> </pre> <br><p style=";text-align:right;direction:rtl">       .        <code>-rs</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -rs test_unique_id_3.py ============================= test session starts ============================= collected 2 items test_unique_id_3.py s. =========================== short test summary info =========================== SKIP [1] func\test_unique_id_3.py:8: not supported until version 0.2.0 ===================== 1 passed, 1 skipped in 0.22 seconds =====================</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>-r chars</code>    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ pytest --help ... -r chars show extra test summary info as specified by chars (     ,  ) (f)ailed, (E)error, (s)skipped, (x)failed, (X)passed, (p)passed, (P)passed with output, (a)all except pP. ...</code> </pre> <br><p style=";text-align:right;direction:rtl">        ,           . </p><br><h2 id="markirovka-testov-ozhidayuschih-sboya" style=";text-align:right;direction:rtl">     </h2><br><p style=";text-align:right;direction:rtl">    <code>skip</code>  <code>skipif</code>    ,   .    <code>xfail</code>   pytest   ,  ,    .     <code>unique_id ()</code> ,   <code>xfail</code> : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_unique_id_4.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.xfail(tasks.__version__ &lt; '0.2.0', reason='not supported until version 0.2.0') def test_unique_id_1(): """ unique_id()     .""" id_1 = tasks.unique_id() id_2 = tasks.unique_id() assert id_1 != id_2 @pytest.mark.xfail() def test_unique_id_is_a_duck(): """ xfail.""" uid = tasks.unique_id() assert uid == 'a duck' @pytest.mark.xfail() def test_unique_id_not_a_duck(): """ xpass.""" uid = tasks.unique_id() assert uid != 'a duck'</code> </pre> <br><p style=";text-align:right;direction:rtl"> Running this shows: </p><br><p style=";text-align:right;direction:rtl">    ,   ,   <code>xfail</code> .         == vs.! =.      . </p><br><p style=";text-align:right;direction:rtl">   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest test_unique_id_4.py ============================= test session starts ============================= collected 4 items test_unique_id_4.py xxX. =============== 1 passed, 2 xfailed, 1 xpassed in 0.36 seconds ================</code> </pre> <br><p style=";text-align:right;direction:rtl"> X  XFAIL,   ยซ  ( <em>expected to fail</em> )ยป.  X   XPASS  ยซ,    ,   ( <em>expected to fail but passed.</em> )ยป. </p><br><p style=";text-align:right;direction:rtl"> <code>--verbose</code>    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_unique_id_4.py ============================= test session starts ============================= collected 4 items test_unique_id_4.py::test_unique_id_1 xfail test_unique_id_4.py::test_unique_id_is_a_duck xfail test_unique_id_4.py::test_unique_id_not_a_duck XPASS test_unique_id_4.py::test_unique_id_2 PASSED =============== 1 passed, 2 xfailed, 1 xpassed in 0.36 seconds ================</code> </pre> <br><p style=";text-align:right;direction:rtl">    <em>pytest</em> ,  ,  ,    <code>xfail</code> ,   FAIL.    <em>pytest.ini</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[pytest] xfail_strict=true</code> </pre> <br><p style=";text-align:right;direction:rtl">    <em>pytest.ini</em>    6, ,  . 113. </p><br><h2 id="vypolnenie-podmnozhestva-testov" style=";text-align:right;direction:rtl">    </h2><br><p style=";text-align:right;direction:rtl">    ,         โโ    .       .        , ,          .      ,       .        .    . </p><br><h3 id="a-single-directory" style=";text-align:right;direction:rtl"> A Single Directory </h3><br><p style=";text-align:right;direction:rtl">       ,      <em>pytest</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj&gt;pytest tests\func --tb=no ============================= test session starts ============================= collected 50 items tests\func\test_add.py .. tests\func\test_add_variety.py ................................ tests\func\test_api_exceptions.py ....... tests\func\test_unique_id_1.py F tests\func\test_unique_id_2.py s. tests\func\test_unique_id_3.py s. tests\func\test_unique_id_4.py xxX. ==== 1 failed, 44 passed, 2 skipped, 2 xfailed, 1 xpassed in 1.75 seconds =====</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,   <code>-v</code>      ,   . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj&gt;pytest -v tests\func --tb=no ============================= test session starts =============================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ... </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">collected 50 items tests\func\test_add.py::test_add_returns_valid_id PASSED tests\func\test_add.py::test_added_task_has_id_set PASSED tests\func\test_add_variety.py::test_add_1 PASSED tests\func\test_add_variety.py::test_add_2[task0] PASSED tests\func\test_add_variety.py::test_add_2[task1] PASSED tests\func\test_add_variety.py::test_add_2[task2] PASSED tests\func\test_add_variety.py::test_add_2[task3] PASSED tests\func\test_add_variety.py::test_add_3[sleep-None-False] PASSED ... tests\func\test_unique_id_2.py::test_unique_id_1 SKIPPED tests\func\test_unique_id_2.py::test_unique_id_2 PASSED ... tests\func\test_unique_id_4.py::test_unique_id_1 xfail tests\func\test_unique_id_4.py::test_unique_id_is_a_duck xfail tests\func\test_unique_id_4.py::test_unique_id_not_a_duck XPASS tests\func\test_unique_id_4.py::test_unique_id_2 PASSED ==== 1 failed, 44 passed, 2 skipped, 2 xfailed, 1 xpassed in 2.05 seconds =====</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,      . </p><br><h3 id="odinochnyy-test-filemodule" style=";text-align:right;direction:rtl">   File/Module </h3><br><p style=";text-align:right;direction:rtl">   ,  ,          pytest: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd /path/to/code/ch2/tasks_proj $ pytest tests/func/test_add.py =========================== test session starts =========================== collected 2 items tests/func/test_add.py .. ======================== 2 passed in 0.05 seconds =========================</code> </pre> <br><p style=";text-align:right;direction:rtl">        . </p><br><h3 id="odinochnaya-testovaya-funkciya" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">     ,  <code>::</code>    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd /path/to/code/ch2/tasks_proj $ pytest -v tests/func/test_add.py::test_add_returns_valid_id =========================== test session starts =========================== collected 3 items tests/func/test_add.py::test_add_returns_valid_id PASSED ======================== 1 passed in 0.02 seconds =========================</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>-v</code> ,  ,    . </p><br><h3 id="odinochnyy-test-class" style=";text-align:right;direction:rtl">  Test Class </h3><br><p style=";text-align:right;direction:rtl"> Here's an example: </p><br><p style=";text-align:right;direction:rtl">   โ    ,     . <br>  ููุง ูุซุงู: </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/</strong> <code>test_api_exceptions.py</code> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class TestUpdate(): """    tasks.update().""" def test_bad_id(self): """non-int id   excption.""" with pytest.raises(TypeError): tasks.update(task_id={'dict instead': 1}, task=tasks.Task()) def test_bad_task(self): """A non-Task task   excption.""" with pytest.raises(TypeError): tasks.update(task_id=1, task='not a task')</code> </pre> <br><p style=";text-align:right;direction:rtl">      ,     <code>update()</code> ,     .     ,   ,        <code>::</code> ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj&gt;pytest -v tests/func/test_api_exceptions.py::TestUpdate ============================= test session starts ============================= collected 2 items tests\func\test_api_exceptions.py::TestUpdate::test_bad_id PASSED tests\func\test_api_exceptions.py::TestUpdate::test_bad_task PASSED ========================== 2 passed in 0.12 seconds ===========================</code> </pre> <br><h3 id="a-single-test-method-of-a-test-class" style=";text-align:right;direction:rtl"> A Single Test Method of a Test Class </h3><br><p style=";text-align:right;direction:rtl">        ,     โ     <code>::</code>   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd /path/to/code/ch2/tasks_proj $ pytest -v tests/func/test_api_exceptions.py::TestUpdate::test_bad_id ===================== test session starts ====================== collected 1 item tests/func/test_api_exceptions.py::TestUpdate::test_bad_id PASSED =================== 1 passed in 0.03 seconds ===================</code> </pre> <br><blockquote style=";text-align:right;direction:rtl"> <strong> ,   </strong> <br><br> ,        , , ,      .   ,        <code>pytest -v</code> . </blockquote><br><h3 id="nabor-testov-na-osnove-bazovogo-imeni-testa" style=";text-align:right;direction:rtl">        </h3><br><p style=";text-align:right;direction:rtl">  <code>-k</code>      ,         .       <code>and</code> , <code>or</code>  <code>not</code>  . ,        <code>_raises</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj&gt;pytest -v -k _raises ============================= test session starts ============================= collected 56 items tests/func/test_api_exceptions.py::test_add_raises PASSED tests/func/test_api_exceptions.py::test_list_raises PASSED tests/func/test_api_exceptions.py::test_get_raises PASSED tests/func/test_api_exceptions.py::test_delete_raises PASSED tests/func/test_api_exceptions.py::test_start_tasks_db_raises PASSED ============================= 51 tests deselected ============================= =================== 5 passed, 51 deselected in 0.54 seconds ===================</code> </pre> <br><p style=";text-align:right;direction:rtl">    <code>and</code>  <code>not</code>    <code>test_delete_raises()</code>  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj&gt;pytest -v -k "_raises and not delete" ============================= test session starts ============================= collected 56 items tests/func/test_api_exceptions.py::test_add_raises PASSED tests/func/test_api_exceptions.py::test_list_raises PASSED tests/func/test_api_exceptions.py::test_get_raises PASSED tests/func/test_api_exceptions.py::test_start_tasks_db_raises PASSED ============================= 52 tests deselected ============================= =================== 4 passed, 52 deselected in 0.44 seconds ===================</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,     , ,         <code>-k</code>     .     ,          ,         . </p><br><h2 id="parametrized-testing-parametrizovannoe-testirovanie" style=";text-align:right;direction:rtl"> [Parametrized Testing]:   </h2><br><p style=";text-align:right;direction:rtl">         ,     ,       .                  .  -               pytest,  -    . </p><br><p style=";text-align:right;direction:rtl">    ,     ,      <code>add()</code> : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_add_variety.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">"""  API tasks.add().""" import pytest import tasks from tasks import Task def test_add_1(): """tasks.get ()  id,   add() works.""" task = Task('breathe', 'BRIAN', True) task_id = tasks.add(task) t_from_db = tasks.get(task_id) # ,  ,    assert equivalent(t_from_db, task) def equivalent(t1, t2): """   .""" #  ,   id return ((t1.summary == t2.summary) and (t1.owner == t2.owner) and (t1.done == t2.done)) @pytest.fixture(autouse=True) def initialized_tasks_db(tmpdir): """    ,  .""" tasks.start_tasks_db(str(tmpdir), 'tiny') yield tasks.stop_tasks_db()</code> </pre> <br><p style=";text-align:right;direction:rtl">    tasks   <code>id</code>   <code>None</code> .           <code>id</code> .       <code>==</code> ,  ,        .   <code>equivalent()</code>  ,   <code>id</code> .  <code>autouse</code> ,  ,    .  ,   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::test_add_1 ============================= test session starts ============================= collected 1 item test_add_variety.py::test_add_1 PASSED ========================== 1 passed in 0.69 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">   .   ,      .  ,       ?  .    <code>@pytest.mark.parametrize(argnames, argvalues)</code>          , : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_add_variety.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.parametrize('task', [Task('sleep', done=True), Task('wake', 'brian'), Task('breathe', 'BRIAN', True), Task('exercise', 'BrIaN', False)]) def test_add_2(task): """    .""" task_id = tasks.add(task) t_from_db = tasks.get(task_id) assert equivalent(t_from_db, task)</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>parametrize()</code> โ        โ 'task',   .   โ   ,         Task. pytest               : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::test_add_2 ============================= test session starts ============================= collected 4 items test_add_variety.py::test_add_2[task0] PASSED test_add_variety.py::test_add_2[task1] PASSED test_add_variety.py::test_add_2[task2] PASSED test_add_variety.py::test_add_2[task3] PASSED ========================== 4 passed in 0.69 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>parametrize()</code>    .      ,  ,      : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_add_variety.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.parametrize('summary, owner, done', [('sleep', None, False), ('wake', 'brian', False), ('breathe', 'BRIAN', True), ('eat eggs', 'BrIaN', False), ]) def test_add_3(summary, owner, done): """    .""" task = Task(summary, owner, done) task_id = tasks.add(task) t_from_db = tasks.get(task_id) assert equivalent(t_from_db, task)</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,        pytest,       ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv35) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::test_add_3 ============================= test session starts ============================= platform win32 -- Python 3.5.2, pytest-3.5.1, py-1.5.3, pluggy-0.6.0 -- cachedir: ..\.pytest_cache rootdir: ...\bopytest-code\code\ch2\tasks_proj\tests, inifile: pytest.ini collected 4 items test_add_variety.py::test_add_3[sleep-None-False] PASSED [ 25%] test_add_variety.py::test_add_3[wake-brian-False] PASSED [ 50%] test_add_variety.py::test_add_3[breathe-BRIAN-True] PASSED [ 75%] test_add_variety.py::test_add_3[eat eggs-BrIaN-False] PASSED [100%] ========================== 4 passed in 0.37 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,      ,     pytest,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv35) c:\BOOK\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::test_add_3[sleep-None-False] ============================= test session starts ============================= test_add_variety.py::test_add_3[sleep-None-False] PASSED [100%] ========================== 1 passed in 0.22 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv35) c:\BOOK\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v "test_add_variety.py::test_add_3[eat eggs-BrIaN-False]" ============================= test session starts ============================= collected 1 item test_add_variety.py::test_add_3[eat eggs-BrIaN-False] PASSED [100%] ========================== 1 passed in 0.56 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">      ,        : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_add_variety.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tasks_to_try = (Task('sleep', done=True), Task('wake', 'brian'), Task('wake', 'brian'), Task('breathe', 'BRIAN', True), Task('exercise', 'BrIaN', False)) @pytest.mark.parametrize('task', tasks_to_try) def test_add_4(task): """ .""" task_id = tasks.add(task) t_from_db = tasks.get(task_id) assert equivalent(t_from_db, task)</code> </pre> <br><p style=";text-align:right;direction:rtl">      .     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv35) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::test_add_4 ============================= test session starts ============================= collected 5 items test_add_variety.py::test_add_4[task0] PASSED [ 20%] test_add_variety.py::test_add_4[task1] PASSED [ 40%] test_add_variety.py::test_add_4[task2] PASSED [ 60%] test_add_variety.py::test_add_4[task3] PASSED [ 80%] test_add_variety.py::test_add_4[task4] PASSED [100%] ========================== 5 passed in 0.34 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">      ,     .    ,      ids  <code>parametrize()</code> ,          .  <code>ids</code>       ,     . ,         <code>tasks_to_try</code> ,       : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_add_variety.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">task_ids = ['Task({},{},{})'.format(t.summary, t.owner, t.done) for t in tasks_to_try] @pytest.mark.parametrize('task', tasks_to_try, ids=task_ids) def test_add_5(task): """Demonstrate ids.""" task_id = tasks.add(task) t_from_db = tasks.get(task_id) assert equivalent(t_from_db, task)</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::test_add_5 ============================= test session starts ============================= collected 5 items test_add_variety.py::test_add_5[Task(sleep,None,True)] PASSED test_add_variety.py::test_add_5[Task(wake,brian,False)0] PASSED test_add_variety.py::test_add_5[Task(wake,brian,False)1] PASSED test_add_variety.py::test_add_5[Task(breathe,BRIAN,True)] PASSED test_add_variety.py::test_add_5[Task(exercise,BrIaN,False)] PASSED ========================== 5 passed in 0.45 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">        : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v "test_add_variety.py::test_add_5[Task(exercise,BrIaN,False)]" ============================= test session starts ============================= collected 1 item test_add_variety.py::test_add_5[Task(exercise,BrIaN,False)] PASSED ========================== 1 passed in 0.21 seconds ===========================</code> </pre> <br><p style=";text-align:right;direction:rtl">       ;          shell.     <code>parametrize()</code>  .               : </p><br><blockquote style=";text-align:right;direction:rtl"> <strong>ch2/tasks_proj/tests/func/ <code>test_add_variety.py</code></strong> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@pytest.mark.parametrize('task', tasks_to_try, ids=task_ids) class TestAdd(): """   .""" def test_equivalent(self, task): """ ,   .""" task_id = tasks.add(task) t_from_db = tasks.get(task_id) assert equivalent(t_from_db, task) def test_valid_id(self, task): """          .""" task_id = tasks.add(task) t_from_db = tasks.get(task_id) assert t_from_db.id == task_id</code> </pre> <br><p style=";text-align:right;direction:rtl">    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv33) ...\bopytest-code\code\ch2\tasks_proj\tests\func&gt;pytest -v test_add_variety.py::TestAdd ============================= test session starts ============================= collected 10 items test_add_variety.py::TestAdd::test_equivalent[Task(sleep,None,True)] PASSED test_add_variety.py::TestAdd::test_equivalent[Task(wake,brian,False)0] PASSED test_add_variety.py::TestAdd::test_equivalent[Task(wake,brian,False)1] PASSED test_add_variety.py::TestAdd::test_equivalent[Task(breathe,BRIAN,True)] PASSED test_add_variety.py::TestAdd::test_equivalent[Task(exercise,BrIaN,False)] PASSED test_add_variety.py::TestAdd::test_valid_id[Task(sleep,None,True)] PASSED test_add_variety.py::TestAdd::test_valid_id[Task(wake,brian,False)0] PASSED test_add_variety.py::TestAdd::test_valid_id[Task(wake,brian,False)1] PASSED test_add_variety.py::TestAdd::test_valid_id[Task(breathe,BRIAN,True)] PASSED test_add_variety.py::TestAdd::test_valid_id[Task(exercise,BrIaN,False)] PASSED ========================== 10 passed in 1.16 seconds ==========================</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,            <code>@pytest.mark.parametrize()</code> .       <code>pytest.param(&lt;value\&gt;, id="something")</code> : </p><br><p style=";text-align:right;direction:rtl">  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">(venv35) ...\bopytest-code\code\ch2\tasks_proj\tests\func $ pytest -v test_add_variety.py::test_add_6 ======================================== test session starts ========================================= collected 3 items test_add_variety.py::test_add_6[just summary] PASSED [ 33%] test_add_variety.py::test_add_6[summary\owner] PASSED [ 66%] test_add_variety.py::test_add_6[summary\owner\done] PASSED [100%] ================================ 3 passed, 6 warnings in 0.35 seconds ================================</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,  <code>id</code>       . </p><br><h2 id="uprazhneniya" style=";text-align:right;direction:rtl">  ุชูุงุฑูู </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">     , <code>task_proj</code> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">-  </a>  ,         <code>pip install /path/to/tasks_proj</code> . </li><li style=";text-align:right;direction:rtl">   . </li><li style=";text-align:right;direction:rtl">  <em>pytest</em>   . </li><li style=";text-align:right;direction:rtl">  <em>pytest</em>   ,  <code>tasks_proj/tests/func</code> .  pytest     ,     .     .  ,    ? </li><li style=";text-align:right;direction:rtl">  xfail      ,     pytest   tests    . </li><li style=";text-align:right;direction:rtl">      <code>tasks.count()</code> ,   .    API  ,     ,  ,    . </li><li style=";text-align:right;direction:rtl">          ?       <code>test_api_exceptions.py</code> . ,      . (   <code>api.py</code>   .) </li></ol><br><h2 id="chto-dalshe" style=";text-align:right;direction:rtl">  ูุง ุงูุชุงูู </h2><br><p style=";text-align:right;direction:rtl">         <em>pytest</em> . ,   ,   ,       .         <code>initialized_tasks_db</code> .     /        . </p><br><p style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููู ุฃูุถูุง ูุตู ุงูููุฏ ุงูููุญุฏ ุจุญูุซ ูููู ููุธุงุฆู ุงูุงุฎุชุจุงุฑ ุงููุชุนุฏุฏุฉ ุงุณุชุฎุฏุงู ููุณ ุงูุฅุนุฏุงุฏ. </font><font style="vertical-align: inherit;">ูู ุงููุตู ุงูุชุงูู ุ ุณูู ุชุบูุต ูู ุฃุนูุงู ุนุงูู ุงููุจุงุฑูุงุช ุงูุฑุงุฆุนุฉ.</font></font></p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jl/jn/bb/jljnbbjr-ejh473xy_eccsmknpk.png">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุฌูุน</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุงูู</a> <img src="https://habrastorage.org/webt/rw/dy/-g/rwdy-grsvbpcetjttrmecdkxtlk.png"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar448788/">https://habr.com/ru/post/ar448788/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar448768/index.html">ุงูุชุญูู ูู ุงูุฅุถุงุกุฉ ูุชุนุฏุฏ ุงููุณุชููุงุช: ูุฑููุฉ ุงูุญููู ูุงูููุชุฌุงุช</a></li>
<li><a href="../ar448770/index.html">ุชู ุชุญุฏูุซ ุฏุนู ุงูุดูุฑุฉ ูู Visual Studio Code. ุงูุขู ูุน ุงูุณุชุฑุฉ</a></li>
<li><a href="../ar448774/index.html">ูุฒูุฏ ุฅูู CSV ุจุงุณุชุฎุฏุงู DBMS_SQL</a></li>
<li><a href="../ar448776/index.html">RxVMS - ุจููุฉ ุนูููุฉ ูุชุทุจููุงุช ุงูุฑูุฑูุฉ</a></li>
<li><a href="../ar448780/index.html">ูุง ูุนุทู ุจุฑูุงูุฌ ููุชุฌููุฏ ูู ุงููุงู</a></li>
<li><a href="../ar448790/index.html">SpaceVIL ูู ุฅุทุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุนุจุฑ ููุตุฉ ูุชุทููุฑ .Net Core ู .Net Standard ู JVM</a></li>
<li><a href="../ar448794/index.html">ุจูุซูู ุงุฎุชุจุงุฑ ูุน pytest. ุงูุฅุถุงูุงุช ุงููุตู 5</a></li>
<li><a href="../ar448800/index.html">ูู ุจุชูููู Visual Studio ุนุจุฑ ูุคุณุณุชู ุจุงุณุชุฎุฏุงู .vsconfig</a></li>
<li><a href="../ar448802/index.html">ุงูุชูููุฑ ูุน ุงูุจูุงุจุงุช: ุฅูุดุงุก ุจูุงุจุงุช ูู Unreal Engine 4</a></li>
<li><a href="../ar448804/index.html">ุงูุญุตูู ุนูู ุงุณุชุนุฏุงุฏ ูููุช ุชุดุบูู ูุงู ุชุตูุจ ููุงุชุจ ุงูุนุฏู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>