<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐦 🈷️ 📻 Kami memperumit model Sci-fi secara prosedural: apa itu Greeble dan bagaimana menggunakannya 🖥️ 🐶 👩🏻‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebagai permulaan, izinkan saya mengeluh bahwa "greeble" adalah kata yang mengerikan untuk dibuang dari kamus. 

 Nah, menghilangkan batu dari jiwa, k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami memperumit model Sci-fi secara prosedural: apa itu Greeble dan bagaimana menggunakannya</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482316/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad5/b32/235/ad5b322354c84b28b72a7f0a04a5dde9.png" alt="gambar"></div><br>  Sebagai permulaan, izinkan saya mengeluh bahwa "greeble" adalah kata yang mengerikan untuk dibuang dari kamus. <br><br>  Nah, menghilangkan batu dari jiwa, kita beralih ke penjelasannya.  Greeble adalah detail kecil berulang yang ditambahkan ke model untuk memberikan rasa skala dan estetika tertentu.  Jamur telah menjadi populer berkat film-film fiksi ilmiah klasik, di mana patung fisik sering menjadi "model": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb1/c56/a07/eb1c56a07e8d7f03875c2cbf2e80a224.jpg"></div><br>  Jika Anda sudah tahu dari <a href="https://lindenreid.wordpress.com/2017/11/05/procedural-mesh-extrusion-tutorial/">tutorial ekstrusi</a> saya cara mengusir jerat prosedural, maka Anda mengerti cara menambahkan jamur.  Menambahkan <strong>jamur</strong> sederhana ke jala dapat dilakukan dengan <strong>mengekstrusi</strong> semua poligon jala ke <strong>panjang acak</strong> . <br><br>  Namun, Anda mungkin telah memperhatikan bahwa tutorial di atas hanya melihat mengekstrusi segitiga, sedangkan gambar di awal artikel adalah jamur persegi.  Saya harus menyesuaikan mesh sehingga dibagi menjadi empat persegi, dan banyak jerat sering terdiri dari poligon dengan lebih dari tiga indeks.  Oleh karena itu, dalam tutorial ini kita akan belajar cara <strong>mengekstraksi poligon dengan indeks n</strong> dan menerapkan algoritma ini ke seluruh jala untuk membuat jamur.  Kami juga belajar beberapa cara untuk membuat variasi dalam algoritma menjamur untuk mendapatkan hasil yang kurang seragam. <br><a name="habracut"></a><br><h2>  Permukaan normal </h2><br>  Pertama, mari kita cari tahu bagaimana normal suatu poligon dengan indeks n sembarang dihitung.  Jika kita dapat berasumsi bahwa poligon ini adalah <strong>planar</strong> , yaitu, semua simpulnya berada pada bidang yang sama, maka prosesnya tidak berbeda dengan menghitung normal poligon dengan tiga indeks. <br><br>  <strong>Permukaan normal</strong> adalah tegak lurus terhadap permukaan poligon, yang dapat dihitung dengan mengambil <strong>produk vektor dari dua vektor yang menunjuk di sepanjang tepi poligon</strong> . <br><br>  Kemudian kita <strong>menormalkan</strong> vektor ini sehingga panjangnya adalah 1, karena dari normal ke permukaan kita hanya perlu arah, bukan panjang. <br><br><blockquote><pre>  function getFaceNormal (mesh, poly)
   Vec3 v1 = mesh: getVertex (poli [1])
   Vec3 v2 = jala: getVertex (poli [2])
   Vec3 v3 = jala: getVertex (poli [3])
   Vec3 e1 = v2 - v1
   Vec3 e2 = v3 - v2
   Vec3 normal = e1: cross (e2)
   kembali normal: menormalkan ()
 akhir </pre></blockquote><br>  Jika kita tidak dapat dengan yakin berasumsi bahwa poligon adalah planar, maka algoritma yang disajikan di atas lebih memilih bidang di mana dua indeks pertama berada.  Untuk representasi yang lebih akurat dari arah titik poligon, kita dapat mengambil <strong>rata</strong> - <strong>rata semua produk vektor tepian</strong> : <br><br><blockquote><pre>  function getFaceNormal (mesh, poly)
   Vec3 n = Vec3 (0, 0, 0)
   untuk i = 1, #poly -2 do
     Vec3 v1 = mesh: getVertex (poli [1])
     Vec3 v2 = jala: getVertex (poli [1+ i])
     Vec3 v3 = jala: getVertex (poli [2+ i])
     n: add ((v2 - v1): cross (v3 - v1))
   akhir
   return n: normalize ()
 akhir </pre></blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9cb/acd/7af/9cbacd7afe5483a32337e2c1fc734572.jpg"></div><br>  <i>Contoh yang menunjukkan ekstrusi quadrangle planar.</i> <br><br><h2>  Mengekstrusi </h2><br>  Sekarang kami memiliki informasi tentang permukaan normal, kami siap untuk mengusir poligon ke arah normal.  Sederhananya, untuk mengekstraksi poligon, kami membuat simpul baru dengan menggerakkan simpul lama ke arah permukaan normal. <br><br>  Lebih detail: <br><br><ol><li>  Buat <strong>puncak baru "di atas" yang lama</strong> ke arah normal. <br><br>  Simpul baru dapat dihitung sebagai berikut: <br><br><blockquote><pre>  (posisi puncak lama) + (arah normal) </pre></blockquote><br>  Ini "menggeser" posisi lama ke arah permukaan normal. <br><br>  Sebagai contoh, lihat gambar di atas, di atasnya <strong>v1 bergerak ke arah normal ke v5.</strong> </li><li>  Buat <strong>quadrangles</strong> untuk menghubungkan simpul baru dan lama. <br><br>  Perlu dicatat bahwa untuk setiap indeks dalam poligon baru, satu segiempat baru dibuat. <br><br>  Sebagai contoh, lihat <strong>quad yang dibuat dari v8, v7, v3 dan v4</strong> . </li><li>  Ganti poligon lama dengan <strong>poligon baru yang dibuat oleh simpul baru.</strong>  Sebagai contoh, lihat quad yang dibuat dari v5, v6, v7 dan v8. </li></ol><br><br><blockquote><pre>  fungsi extrudePoly (mesh, polyIndex, panjang)
   int [] poly = mesh.polys [polyIndex]
   int [] newPoly = []
   Vec3 n = getFaceNormal (mesh, poly)

   - (1) Buat verdi diekstrusi
   untuk j = 1, #poly do
     p = mesh lokal: getVertex (poli [j])
     newPoly [#newPoly + 1] = # mesh.verts
     - panjang menentukan panjang ekstrusi
     mesh: addVertex (p + (n * panjang))
   akhir

   - (2) Jahit sisi ekstrusi dengan paha depan
   untuk j0 = 1, #poly do
     j1 lokal = j0% #poly + 1
     jala: addQuad (
       poli [j0],
       poli [j1],
       newPoly [j1],
       baruPoly [j0]
     )
   akhir

   - (3) Pindahkan wajah yang ada ke vertikal yang diekstrusi
   untuk j = 1, #poly do
     mesh.polys [pi] [j] = newPoly [j]
   akhir
 akhir </pre></blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7c2/52d/ddb/7c252dddbae852b66b3221dd5abe335f.png"></div><br>  <i>Jamur seragam.</i> <br><br><h2>  Semua jamur menjamur </h2><br>  Sekarang kita memiliki fungsi getSurfaceNormal () dan fungsi mengusir (), menjamur sangat mudah!  Kami cukup <strong>menerapkan fungsi extrude () untuk setiap poligon mesh</strong> .  Kami menggunakan ekstrusi dengan <strong>panjang acak</strong> sehingga setiap poligon yang diekstrusi memiliki ukuran yang sedikit berbeda, yang menciptakan perasaan tekstur.  Algoritma yang ditunjukkan di bawah ini diterapkan pada kubus yang disajikan di atas, yang seluruhnya terdiri dari segi empat. <br><br><blockquote><pre>  fungsi greeble (jala)
   untuk i = 1, # mesh.poli lakukan
     - nilai acak ini arbitrer: p
     panjang float = acak: getUniformRange (0.1, 1.0)
     extrudePoly (jala, i, panjang)
   akhir
   kembali jala
 akhir </pre></blockquote><br>  Selamat, menjamur kami.  Tapi kita bisa berbuat lebih banyak!  Sekarang jamur cukup seragam.  Berikut adalah dua contoh modifikasi agar lebih menarik. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a23/afe/251/a23afe2519b4268a2155ec14d4160089.png"></div><br><h4>  Modifikasi 1: keberadaan fungling tergantung pada kesempatan </h4><br>  Ini cukup sederhana: hanya menggulung dadu untuk menentukan apakah jamur harus diterapkan pada setiap poligon.  Berkat ini, menjamur menjadi kurang seragam.  Algoritma yang ditunjukkan di bawah ini diterapkan pada kubus di atas. <br><br><blockquote><pre>  untuk i = 1, # mesh.poli lakukan
    &lt;strong&gt; jika acak: kebetulan (0,33) maka &lt;/strong&gt;
      panjang float = acak (0,1, 1,0)
      extrudePoly (jala, i, panjang)
    akhir
  akhir
  kembali jala
 akhir </pre></blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d16/294/d0c/d16294d0c7f4be9a878ceec459bb25fa.png"></div><br><h4>  Modifikasi 2: Tambahkan Skala Ekstrusi </h4><br>  Ini membutuhkan perubahan algoritma ekstrusi.  Ketika kita membuat simpul dari poligon yang diekstrusi, kita dapat <strong>menguranginya ke pusat poligon</strong> dengan jumlah acak untuk membuat objek terlihat lebih menarik. <br><br>  Untuk memulainya, fungsi extrude () kami harus menerima parameter tambahan yang menentukan jumlah penyempitan poligon baru.  Kami akan mendefinisikannya sebagai <code>scale</code> disebut Vec3.  Untuk memindahkan titik menuju pusat, kami <strong>menginterpolasi posisi titik</strong> antara <strong>posisi aslinya</strong> dan <strong>pusat poligon</strong> dengan nilai <code>scale</code> . <br><br>  (Jika Anda perlu mengetahui algoritma untuk menemukan pusat poligon, saya sarankan untuk segera beralih ke <a href="https://lindenreid.wordpress.com/2017/12/03/simple-mesh-tessellation-triangulation-tutorial/">tutorial tentang triangulasi</a> dan membaca tentang triangulasi centroid.) <br><br><blockquote><pre>  - temukan pusat poli
 Vec3 c = mesh: getFaceCentroid (poli)
 untuk j = 1, #poly do
   p = mesh lokal: getVertex (poli [j])
   newPoly [#newPoly + 1] = # mesh.verts
   diri: addVertex (
     math.lerp (cx, px, scale.x) + panjang nx *,
     math.lerp (cy, py, scale.y) + ny * panjang,
     math.lerp (cz, pz, scale.z) + nz * panjangnya
   )
   mesh: addVertex (p + (n * panjang))
 akhir </pre></blockquote><br>  Sekarang Anda dapat menggunakannya dalam algoritma menjamur dengan penskalaan dengan nilai acak untuk setiap poligon.  Jadi kita mendapatkan gambar yang ditunjukkan di atas. <br><br><blockquote><pre>  fungsi greeble (jala)
   untuk i = 1, # mesh.poli lakukan
     panjang float = acak: getUniformRange (0.1, 1.0)
     Skala Vec3 = (acak: getUniformRange (0.1, 1.0),
                   acak: getUniformRange (0,1, 1,0),
                   acak: getUniformRange (0.1, 1.0))
     extrudePoly (mesh, i, panjang, skala)
   akhir
   kembali jala
 akhir </pre></blockquote><br><h2>  Akhirnya </h2><br>  Bagus, kita sampai akhir!  Saya harap tutorial ini bermanfaat bagi Anda. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id482316/">https://habr.com/ru/post/id482316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id482302/index.html">Kabut psikologis tentang Tahun Baru</a></li>
<li><a href="../id482304/index.html">Made for China: cara membuat spanduk yang sempurna untuk konsumen Cina</a></li>
<li><a href="../id482306/index.html">Sejarah porno internet. Bagian 1</a></li>
<li><a href="../id482308/index.html">Kami membuat satu proyek plugin dengan kompilasi untuk berbagai versi Revit / AutoCAD</a></li>
<li><a href="../id482314/index.html">Membangun cluster PostgreSQL ketersediaan tinggi menggunakan Patroni, etcd, HAProxy</a></li>
<li><a href="../id482318/index.html">Mengapa Rust Harus Menjadi Bahasa Pemrograman Fungsional</a></li>
<li><a href="../id482328/index.html">V&V bukan untuk balas dendam</a></li>
<li><a href="../id482330/index.html">Daftar permata dasar untuk profil aplikasi Ruby on Rails</a></li>
<li><a href="../id482332/index.html">Bagaimana seorang penggila mengangkat jaringan Wi-Fi di bawah DOS</a></li>
<li><a href="../id482336/index.html">Pedagang memiliki akses ke konferensi pers Bank Sentral Inggris sebelum siaran publik mereka</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>