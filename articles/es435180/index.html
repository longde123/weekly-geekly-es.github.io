<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèª üë©üèº‚Äçüöí ‚Ü™Ô∏è API REST sin servidor "en la rodilla en 5 minutos" ‚úçüèΩ üê® üëàüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Hoy continuamos la discusi√≥n sobre las oportunidades que nos brinda Amazon Web Services y c√≥mo usar estas oportunidades para resolver probl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>API REST sin servidor "en la rodilla en 5 minutos"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435180/">  Hola Habr!  Hoy continuamos la discusi√≥n sobre las oportunidades que nos brinda Amazon Web Services y c√≥mo usar estas oportunidades para resolver problemas de aplicaciones. <br><br>  En un ejemplo simple, consideraremos crear en solo unos minutos nuestra propia API REST autoescalable sin servidor con an√°lisis de casos, obteniendo una lista para un recurso. <br><br>  Interesante?  ¬°Entonces ve debajo del corte! <br><br><img src="https://habrastorage.org/webt/o1/lo/od/o1loodoauwe328yyywvsjwxbhpu.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(Fuente)</a> <br><a name="habracut"></a><br><h2>  En lugar de unirse </h2><br>  No utilizaremos ninguna base de datos para analizar el ejemplo; en cambio, nuestra fuente de informaci√≥n ser√° un archivo de texto sin formato en AWS S3. <br><br><ul><li>  Entonces, suponga que en AWS S3 tenemos un archivo de texto con encabezados y alg√∫n proceso escribe informaci√≥n en √©l. </li><li>  Crearemos una API en la nube que devolver√° una respuesta JSON como una solicitud GET con el par√°metro pasado. </li><li>  Al mismo tiempo, dependiendo de la complejidad de las tareas y, como consecuencia, de los mayores requisitos para el poder de procesamiento de los recursos, no tiene que preocuparse por ello, porque  El servicio es totalmente autoescalable.  Y esto significa que no necesita ninguna administraci√≥n, asignaci√≥n y administraci√≥n del servidor, solo cargue su c√≥digo y ejec√∫telo. </li></ul><br><h2>  Arquitectura del sistema en desarrollo. </h2><br><img src="https://habrastorage.org/webt/jm/7r/yb/jm7ryb1z30xucimouckrlyitm6a.png"><br><br>  Componentes de Amazon Web Services utilizados: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Amazon S3</b></a> : almacenamiento de objetos, que le permite almacenar cantidades casi ilimitadas de informaci√≥n; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>AWS Identity and Access Management (IAM)</b></a> : un servicio que proporciona la capacidad de controlar de forma segura el acceso a los servicios y recursos de AWS.  Con IAM, puede crear, administrar, administrar usuarios y grupos de AWS, y usar permisos para otorgar o denegar el acceso a los recursos de AWS; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>AWS Lambda</b></a> es un servicio que le permite ejecutar c√≥digo sin realizar copias de seguridad y configurar servidores.  Toda la potencia inform√°tica se escala autom√°ticamente para cada llamada.  La tarifa se cobra en funci√≥n de la cantidad de solicitudes de funciones y su duraci√≥n, es decir,  tiempo durante el cual se ejecuta el c√≥digo. <br><blockquote>  El nivel de acceso gratuito (nivel gratuito) implica 1 mill√≥n de solicitudes por mes gratis y 400K Gb-s.  Lenguajes admitidos: Node.js, Java, C #, Go, Python, Ruby, PowerShell </blockquote>  .  Utilizaremos Python: <br><br><ul><li>  La biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>boto3</b></a> es un AWS SDK para Python que le permite interactuar con varios servicios de Amazon; </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Amazon API Gateway</b></a> es un servicio de desarrollador totalmente administrado dise√±ado para crear, publicar, mantener, monitorear y proteger API a cualquier escala.  Adem√°s de la capacidad de usar m√∫ltiples versiones de la misma API (etapas) para la depuraci√≥n, el refinamiento y las pruebas, el servicio le permite crear API REST sin servidor utilizando AWS Lambda.  Lambda ejecuta c√≥digo en una infraestructura inform√°tica altamente accesible, eliminando la necesidad de distribuci√≥n, escalado y administraci√≥n del servidor. <br><blockquote>  El nivel gratuito para HTTP / REST API incluye un mill√≥n de llamadas API por mes durante 12 meses </blockquote></li></ul><br><h2>  Preparaci√≥n de datos </h2><br>  Se usar√° un archivo de texto con una pesta√±a como delimitador de campo como fuente de informaci√≥n para generar respuestas a una solicitud GET REST.  La informaci√≥n ahora realmente no importa para este ejemplo, pero para un mayor uso de la API, descargu√© del terminal de operaciones de Quik una tabla de operaciones actuales en bonos denominados en rublos rusos, la guard√© en bond.txt y coloqu√© este archivo en un bucket AWS S3 especialmente creado. <br><br>  Un ejemplo de la informaci√≥n recibida es como se muestra en la siguiente figura: <br><br> <a href=""><img src="https://habrastorage.org/webt/ua/yl/na/uaylnacmex2xuts2gnqstudoxii.jpeg"></a> <br><br>  A continuaci√≥n, debe escribir una funci√≥n que lea la informaci√≥n del archivo bond.txt, analizarla y emitirla a pedido.  AWS Lambda funcionar√° bien con esto.  Pero primero, deber√° crear una nueva funci√≥n que permita que la funci√≥n Lambda creada lea la informaci√≥n del bucket ubicado en AWS S3. <br><br><h2>  Crear roles para AWS Lambda </h2><br><ol><li>  En la consola de administraci√≥n de AWS, vaya al servicio AWS IAM y luego a la pesta√±a "Roles", haga clic en el bot√≥n "Crear rol"; <br><br><div class="spoiler">  <b class="spoiler_title">Agregar un nuevo rol</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bz/wl/n9/bzwln9pjpdlusmo8cgwv7csvey8.jpeg"><br></div></div></li><li>  AWS Lambda utilizar√° el rol que estamos creando ahora para leer informaci√≥n de AWS S3.  Por lo tanto, en el siguiente paso, seleccione "Seleccionar tipo de confianza" -&gt; "Servicio Aws" y "Elija el servicio que utilizar√° esta funci√≥n" -&gt; "Lambda" y haga clic en el bot√≥n "Siguiente: Permisos" <br><br><div class="spoiler">  <b class="spoiler_title">Rol de servicio Lambda</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mq/bh/ik/mqbhikgn46p9m4ul1ulytb1etpk.jpeg"><br></div></div></li><li>  Ahora debe establecer las pol√≠ticas de acceso para los recursos de AWS que se utilizar√°n en el rol reci√©n creado.  Porque  la lista de pol√≠ticas es bastante impresionante, al usar el filtro para pol√≠ticas, le indicamos "S3".  Como resultado, obtenemos una lista filtrada para el servicio S3.  Tenga en cuenta la casilla de verificaci√≥n frente a la pol√≠tica "AmazonS3ReadOnlyAccess" y haga clic en el bot√≥n "Siguiente: Etiquetas". <br><br><div class="spoiler">  <b class="spoiler_title">Pol√≠ticas de roles</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ix/nz/jk/ixnzjk8y4wkt3xo6sntt_ss_q04.jpeg"><br></div></div></li><li>  El paso (Agregar etiquetas (opcional)) es opcional, pero puede especificar etiquetas para Roles si lo desea.  No haremos esto y pasaremos al siguiente paso: Vista previa.  Aqu√≠ debe establecer el nombre del rol: "ForLambdaS3-ReadOnly", agregar una descripci√≥n y hacer clic en el bot√≥n "Crear rol". <br><br><div class="spoiler">  <b class="spoiler_title">Roles de t√≠tulo</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/pf/lc/cj/pflccjxy1lmfker-x-_jmb00m7e.jpeg"><br></div></div></li></ol><br>  Todo, el rol ha sido creado y podemos usarlo en futuros trabajos. <br><br><h2>  Cree una nueva funci√≥n en AWS Lambda </h2><br><ol><li>  Vaya al servicio AWS Lambda y haga clic en el bot√≥n "Crear funci√≥n": <br><br><div class="spoiler">  <b class="spoiler_title">Creaci√≥n de funciones</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/lb/9g/mq/lb9gmqf_f2wkakv3y3ta-xgpr_u.jpeg"><br></div></div><br>  Complete todos los campos como se muestra en la captura de pantalla a continuaci√≥n: <br><br><ul><li>  Nombre: "getAllBondsList"; </li><li>  Tiempo de ejecuci√≥n - "Python 3.6" </li><li>  Rol: "Elegir un rol existente" </li><li>  Rol existente: aqu√≠ seleccionamos el rol que creamos anteriormente: ForLambdaS3-ReadOnly </li></ul><br><div class="spoiler">  <b class="spoiler_title">Nombre y elecci√≥n del rol.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/g7/7y/od/g77yodilqokdh3rmtmwk1arsh80.jpeg"><br></div></div></li><li>  Solo queda escribir el c√≥digo de funci√≥n y verificar su rendimiento en varias ejecuciones de prueba.  Cabe se√±alar que el componente principal de cualquier funci√≥n Lambda (si usa Python) es la biblioteca boto3: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boto3 s3 = boto3.resource(<span class="hljs-string"><span class="hljs-string">'s3'</span></span>) bucket = s3.Bucket(<span class="hljs-string"><span class="hljs-string">'your-s3-bucket'</span></span>) obj = bucket.Object(key = <span class="hljs-string"><span class="hljs-string">'bonds.txt'</span></span>) response = obj.get()</code> </pre> <br>  La idea b√°sica de nuestra funci√≥n Python es la siguiente: <br><br><ul><li>  Abra el archivo bond.txt; </li><li>  Leer encabezados de columna; </li><li>  Romper registros por p√°gina (10 colecciones en nuestro caso); </li><li>  Seleccione la p√°gina deseada; </li><li>  Mapear el nombre de las columnas y registros; </li><li>  Dar el resultado en forma de colecciones. </li></ul><br>  No dedicaremos mucho tiempo al c√≥digo de funci√≥n en s√≠ mismo y a la implementaci√≥n t√©cnica, todo es bastante simple aqu√≠ y el c√≥digo completo est√° disponible en mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>, len(lines_proc)): d = dict((<span class="hljs-string"><span class="hljs-string">u''</span></span>.join(key), <span class="hljs-string"><span class="hljs-string">u''</span></span>.join(value)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (key, value) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(headers, lines_proc[i].split(<span class="hljs-string"><span class="hljs-string">"\t"</span></span>))) response_body.append(d) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">'statusCode'</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">'page'</span></span> : num_page, <span class="hljs-string"><span class="hljs-string">'body'</span></span>: response_body }</code> </pre><br>  Inserte el c√≥digo (o escriba el suyo :)) en el bloque "C√≥digo de funci√≥n" y haga clic en el bot√≥n "Guardar" en la esquina superior derecha de la pantalla. <br><br><div class="spoiler">  <b class="spoiler_title">Inserci√≥n de c√≥digo</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/py/v7/bz/pyv7bzmaokoa7dxmgc-auhuji7q.jpeg"><br></div></div></li><li>  Crea eventos de prueba.  Despu√©s de insertar el c√≥digo, la funci√≥n est√° disponible para iniciar y probar.  Haga clic en el bot√≥n "Prueba" y cree algunos eventos de prueba: iniciar la funci√≥n lambda_handler con diferentes par√°metros.  A saber: <br><br><ul><li>  Inicio de una funci√≥n con el par√°metro 'p√°gina': '100'; </li><li>  Lanzar una funci√≥n con el par√°metro 'p√°gina': '1000000'; </li><li>  Inicio de una funci√≥n con el par√°metro 'p√°gina': 'bla-bla-bla'; </li><li>  Ejecutar una funci√≥n sin el par√°metro 'p√°gina'. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Evento de prueba P√°gina100</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/f4/lc/s8/f4lcs8v_qj_nmzetyijk0ybngp4.jpeg"><br></div></div><br>  Comenzando la funci√≥n creada con el env√≠o de la p√°gina del evento de prueba == 100. Como se puede ver en la captura de pantalla a continuaci√≥n, la funci√≥n funcion√≥ correctamente, devolvi√≥ el estado 200 (OK), as√≠ como una colecci√≥n de colecciones que corresponden a la cent√©sima p√°gina de datos divididos usando paginaci√≥n. <br><br><div class="spoiler">  <b class="spoiler_title">Evento de prueba de activaci√≥n P√°gina100</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/of/7e/1b/of7e1bgnqpk63gugwnletylpxzk.jpeg"><br></div></div><br>  Para la pureza del experimento, lanzaremos otro evento de prueba: "PageBlaBlaBla".  En este caso, la funci√≥n devuelve el resultado con el c√≥digo 415 y un comentario de que es necesario verificar la correcci√≥n de los par√°metros pasados: <br><br><div class="spoiler">  <b class="spoiler_title">Evento de prueba PageBlaBlaBla</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/sp/qt/op/spqtopae3qqqroxxpwmhcdmdmu8.jpeg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Desencadenante de evento PageBlaBlaBla</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/v3/ms/3x/v3ms3x0jd9pyucqqmnb4qqnful4.jpeg"><br></div></div><br></li></ol><br><h2>  Creaci√≥n de API </h2><br>  Despu√©s de que todos los otros casos se prueban y se comprende que la funci√≥n Lambda funciona como esperamos, procedemos a crear la API.  Creemos un punto de acceso a la funci√≥n Lambda creada anteriormente y, adem√°s, configuremos la protecci√≥n contra inicios no deseados utilizando la clave API. <br><br><ul><li>  Vaya al servicio AWS API Gateway.  Haga clic en el bot√≥n Crear API, establezca el nombre de la API - getAllBondsList <br><br><div class="spoiler">  <b class="spoiler_title">Crea una nueva API</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/yc/1q/7z/yc1q7zqud7q7m_fu7gibtsql9-w.jpeg"><br></div></div></li><li>  Agregue el m√©todo GET a la API reci√©n creada.  Para hacer esto, seleccione Acciones -&gt; Crear m√©todo, seleccione el m√©todo GET en la lista desplegable y haga clic en la marca de verificaci√≥n <br><br><div class="spoiler">  <b class="spoiler_title">Nuevo m√©todo GET</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/7j/6j/df/7j6jdfyvpyvhzhfv3yjxewkc0lk.jpeg"><br></div></div><br>  A continuaci√≥n, indicamos que el m√©todo GET utilizar√° nuestra funci√≥n lambda getAllBondsList.  Selecci√≥nelo y haga clic en el bot√≥n Guardar. <br><br><div class="spoiler">  <b class="spoiler_title">Enlace de funci√≥n Lambda</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zi/8e/5l/zi8e5ly5xby143omz8p_-oxk4x0.jpeg"><br></div></div></li><li>  Implementemos nuestra API, obteniendo as√≠ la URL para llamar a la API. <br>  Haga clic en Acciones -&gt; Implementar API, y luego, Etapa de implementaci√≥n -&gt; Nueva etapa <br><blockquote>  Es posible implementar la API en diferentes etapas y puede llamar a estas etapas a su gusto (por ejemplo, DEV / QA / PROD).  Implementaremos de inmediato a PROD. </blockquote><div class="spoiler">  <b class="spoiler_title">Implementar API</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ok/vb/gm/okvbgmwxrrzzcilnvzwisbeoqw4.jpeg"><br></div></div><br>  Despu√©s de la implementaci√≥n, estar√° disponible un enlace para iniciar la API reci√©n creada.  Iremos a esta URL en la barra de direcciones del navegador (o ejecutaremos el comando curl en la terminal). Recibiremos una llamada a la API y, como resultado, iniciaremos la funci√≥n Lambda: <br><br><div class="spoiler">  <b class="spoiler_title">URL de API</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/y3/ok/1e/y3ok1esjw61-xjp7uzql21cxdxa.jpeg"><br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Usar√© la</a> aplicaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Postman</a> para demostrar la AWS API Gateway.  En √©l, puede depurar y probar con bastante comodidad el funcionamiento de la API. <br><br><div class="spoiler">  <b class="spoiler_title">Primeras pruebas de API</b> <div class="spoiler_text">  Copie la URL de la etapa PROD a Postman y env√≠e una solicitud GET a nuestra API: <br><br> <a href=""><img src="https://habrastorage.org/webt/bo/ku/3x/boku3xlj9kkoknm0wfnax1ninqg.jpeg"></a> <br><br>  Algo parece haber salido mal ... la solicitud GET devolvi√≥ una respuesta JSON con el c√≥digo 400 y una pista de que el par√°metro Page no estaba configurado en la solicitud de llamada API.  Agregue soporte para los par√°metros de solicitud a la API. <br></div></div></li><li>  Soporte para par√°metros pasados ‚Äã‚Äãen la solicitud. <br>  Volvemos a la configuraci√≥n de la solicitud GET y vamos al paso Solicitud de m√©todo. <br><br><div class="spoiler">  <b class="spoiler_title">Solicitud de m√©todo</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/di/yi/oo/diyioox34z86tv41lrp0oqw8tu4.jpeg"><br></div></div><br>  En la configuraci√≥n detallada de la Solicitud de m√©todo, es necesario expandir el bloque Par√°metros de cadena de consulta de URL y agregar un nuevo par√°metro de "p√°gina" y hacer que sea obligatorio: <br><br><div class="spoiler">  <b class="spoiler_title">Agregar un par√°metro</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j2/rj/gc/j2rjgcaffqvrmq6a6rrh7znhimy.jpeg"><br></div></div><br>  Regresamos a la p√°gina de Ejecuci√≥n del M√©todo y vamos a la Solicitud de Integraci√≥n.  Bajamos al final de la p√°gina y abrimos el bloque "Plantillas de mapeo".  Seleccione "Cuando no hay plantillas definidas (recomendado)", en el campo Tipo de contenido, especifique <b>application / json</b> y haga clic en la marca de verificaci√≥n.  Desplazamos hacia abajo la p√°gina a continuaci√≥n e ingresamos el c√≥digo en el cuadro de texto, como se indica en la imagen a continuaci√≥n.  Despu√©s de eso, haga clic en el bot√≥n Guardar. <br><br><div class="spoiler">  <b class="spoiler_title">Solicitud de m√©todo</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ue/s3/y5/ues3y5vyonxozczm7onfg2-351s.jpeg"><br></div></div><br>  Habiendo realizado previamente la implementaci√≥n de la API, verificamos nuevamente, pero con el par√°metro "page" pasado: <br><br> <a href=""><img src="https://habrastorage.org/webt/s5/-3/v_/s5-3v_kqnx5k3drotwwhw4mltf4.jpeg"></a> <br><br>  Es un exito!  ¬°Ahora la solicitud funcion√≥ con √©xito y nos devolvi√≥ las colecciones contenidas en la d√©cima p√°gina!  ¬°Hurra! </li><li>  Solo queda para proteger nuestra API de ataques no deseados desde el exterior. <br><br>  Para hacer esto, debe configurar la API de tal manera que al acceder requiera una clave secreta, que se pasa al encabezado. <br><br>  Vaya a las claves API y cree un nuevo grupo de claves API: KeyForBondsList. <br><br><div class="spoiler">  <b class="spoiler_title">Claves API</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/su/na/ba/sunaba6acca0mmout5n1yu4xyd8.jpeg"><br></div></div><br>  Despu√©s de que la clave API se haya creado correctamente, debe especificar que la API getAllBondsList debe requerir que la clave API se pase en el encabezado de la solicitud.  Y vincule un KeyForBondsList espec√≠fico a la API getAllBondsList. <br><br>  Volvamos a la configuraci√≥n de la solicitud GET en Solicitud de m√©todo y cambie el par√°metro API Key Required de falso a verdadero.  Ahora la API requerir√° la transferencia de la clave API. <br><br><div class="spoiler">  <b class="spoiler_title">Clave API requerida</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dn/gu/sy/dngusygxk5h50j4qnbcxt3umkbs.jpeg"><br></div></div><br>  Vaya a Plan de uso y cree un nuevo plan para usar la API. <br><br>  En primer lugar, le damos un nombre y una descripci√≥n, y en segundo lugar, aqu√≠ puede establecer l√≠mites para iniciar la API, por ejemplo, no m√°s de un lanzamiento por segundo, etc. <br><br><div class="spoiler">  <b class="spoiler_title">Crear plan de uso</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zl/-3/y9/zl-3y9ruwexssvl3jzpzlocfqpe.jpeg"><br></div></div><br>  Haga clic en Siguiente y vaya a la p√°gina siguiente donde necesita conectar las etapas de la API con el plan de uso: <br><br><div class="spoiler">  <b class="spoiler_title">Vinculando una etapa a un plan de uso</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/lh/q8/m0/lhq8m0te7ejfwkjz1sftxwznz24.jpeg"><br></div></div><br>  En la p√°gina siguiente, vinculamos las claves de API al plan para usar la API.  Haga clic en el bot√≥n Agregar claves API al plan de uso y busque las claves API creadas en los pasos anteriores por nombre: <br><br><div class="spoiler">  <b class="spoiler_title">Enlace de claves API al plan de uso</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/y2/p0/8c/y2p08c59ly3trqt6kjhlbud2tmg.jpeg"><br></div></div><br>  Despu√©s de realizar la implementaci√≥n y ejecutar la llamada GET de nuestra API nuevamente, obtenemos la respuesta: "Prohibido", porque  al encabezado de la solicitud le falta la clave API: <br><br> <a href=""><img src="https://habrastorage.org/webt/oy/z9/39/oyz939fbfo9e6g-xpbujygkhj3o.jpeg"></a> <br><br>  Intentemos agregarlo copiando desde las claves API -&gt; KeyForBondsList -&gt; clave API -&gt; Mostrar y pegarlo en la secci√≥n correspondiente de la solicitud con la clave "x-api-key": <br><br> <a href=""><img src="https://habrastorage.org/webt/vc/ml/l5/vcmll5c2bbyazujggy7orazylbm.jpeg"></a> <br><br>  ¬°Todo sali√≥ bien!  Esta vez, la solicitud devuelve datos sin ning√∫n problema, la llamada API est√° segura y protegida de intrusos por la clave secreta API. </li></ul><br><h2>  Conclusiones y resumen </h2><br>  En este art√≠culo, analizamos la creaci√≥n de una API REST autoescalable sin servidor utilizando los servicios en la nube de Amazon.  El art√≠culo no era el m√°s peque√±o en volumen, pero trat√© de explicar lo m√°s posible todo el proceso de creaci√≥n de la API y componer toda la secuencia de acciones. <br><br>  Estoy seguro de que despu√©s de una o dos repeticiones de los pasos descritos en el art√≠culo, puede aumentar sus API en la nube en 5 minutos o incluso m√°s r√°pido. <br><br>  Debido a su relativa simplicidad, bajo costo y potencia, el servicio AWS API Gateway abre amplias oportunidades para que los desarrolladores lo utilicen en el trabajo y en proyectos comerciales.  Para consolidar el material te√≥rico en este art√≠culo, intente suscribirse a una suscripci√≥n anual gratuita de Amazon Web Services y siga los pasos anteriores para crear una API REST. <br><br>  Para cualquier pregunta y sugerencia, estoy listo para hablar con gusto.  ¬°Espero sus comentarios sobre el art√≠culo y les deseo √©xito! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es435180/">https://habr.com/ru/post/es435180/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es435170/index.html">Una mirada al ECG de Apple Watch para alguien a quien le importe</a></li>
<li><a href="../es435172/index.html">Oculus GoBlack: c√≥mo mejorar Oculus Go</a></li>
<li><a href="../es435174/index.html">Unreal Engine 4 - sombreador ardiente</a></li>
<li><a href="../es435176/index.html">DEFCON 21. Las contrase√±as por s√≠ solas no son suficientes, o por qu√© se "rompe" el cifrado del disco y c√≥mo se puede solucionar. Parte 1</a></li>
<li><a href="../es435178/index.html">DEFCON 21. Las contrase√±as por s√≠ solas no son suficientes, o por qu√© se "rompe" el cifrado del disco y c√≥mo se puede solucionar. Parte 2</a></li>
<li><a href="../es435182/index.html">Estudio: el mercado de HDD se reducir√° en un tercio para 2021</a></li>
<li><a href="../es435184/index.html">La inteligencia artificial aprendi√≥ a encontrar la enfermedad de Alzheimer en el cerebro 6 a√±os antes del diagn√≥stico</a></li>
<li><a href="../es435186/index.html">Rolls-Royce desarrolla el avi√≥n el√©ctrico m√°s r√°pido del mundo</a></li>
<li><a href="../es435190/index.html">Google ha logrado retirarse de los impuestos de $ 22.7 mil millones a trav√©s de Irlanda y Bermudas</a></li>
<li><a href="../es435194/index.html">Simplifique la redacci√≥n del curr√≠culum de un desarrollador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>