<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕎 🖍️ 💤 Pemantauan Berkelanjutan - otomatisasi pemeriksaan kualitas perangkat lunak dalam CI / CD Pipeline 👩🏽‍💼 🃏 🛋️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekarang di hype tema DevOps. Konveyor integrasi berkelanjutan dan pengiriman CI / CD dilaksanakan oleh semua orang yang merasa menyukainya. Tetapi se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemantauan Berkelanjutan - otomatisasi pemeriksaan kualitas perangkat lunak dalam CI / CD Pipeline</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/451630/">  Sekarang di hype tema DevOps.  Konveyor integrasi berkelanjutan dan pengiriman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CI / CD</a> dilaksanakan oleh semua orang yang merasa menyukainya.  Tetapi sebagian besar tidak selalu memperhatikan untuk memastikan keandalan sistem informasi pada berbagai tahap CI / CD Pipeline.  Dalam artikel ini, saya ingin berbicara tentang pengalaman saya dalam mengotomatisasi pemeriksaan kualitas perangkat lunak dan menerapkan skenario yang mungkin untuk "penyembuhan sendiri" nya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/279/b1b/d43/279b1bd4301b7755a590307a9378243c.jpg"></div>  <a href=""><i>Sumber</i></a> <br><a name="habracut"></a><br>  Saya bekerja sebagai seorang insinyur di departemen manajemen layanan TI di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">LANIT-Integration</a> .  Area inti saya adalah implementasi berbagai sistem untuk memantau kinerja dan ketersediaan aplikasi.  Saya sering berkomunikasi dengan pelanggan TI dari segmen pasar yang berbeda tentang masalah topikal memantau kualitas layanan TI mereka.  Tugas utama adalah untuk meminimalkan waktu siklus rilis dan meningkatkan frekuensi rilis mereka.  Ini, tentu saja, semuanya baik: lebih banyak rilis - lebih banyak fitur baru - lebih banyak pengguna puas - lebih banyak keuntungan.  Namun dalam kenyataannya, tidak selalu semuanya berjalan baik.  Pada tingkat penyebaran yang sangat tinggi, pertanyaan segera muncul tentang kualitas rilis kami.  Bahkan dengan pipa yang sepenuhnya otomatis, salah satu masalah terbesar adalah transfer layanan dari pengujian ke produksi, yang tidak memengaruhi waktu kerja dan interaksi pengguna dengan aplikasi. <br><br>  Berdasarkan hasil dari berbagai percakapan dengan pelanggan, saya dapat mengatakan bahwa kontrol kualitas rilis, masalah keandalan aplikasi dan kemungkinan "penyembuhan sendiri" (misalnya, rollback ke versi stabil) pada berbagai tahapan pipa CI / CD adalah di antara topik yang paling menarik dan relevan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/373/e6e/f90/373e6ef9080b3a7f8c6c4e65568254eb.png"></div><br>  Baru-baru ini, saya sendiri bekerja di sisi pelanggan - dalam layanan dukungan aplikasi perbankan online.  Arsitektur aplikasi kami menggunakan sejumlah besar layanan microser yang ditulis sendiri.  Yang paling menyedihkan adalah bahwa tidak semua pengembang mengatasi laju perkembangan yang tinggi, kualitas beberapa layanan mikro yang diderita, yang memunculkan julukan konyol bagi mereka dan pembuatnya.  Ada cerita tentang bahan apa yang terbuat dari produk ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/210/472/129/21047212917809f642f154cfa2b8e6c6.png"></div><br><h1>  "Pernyataan masalah" </h1><br>  Frekuensi rilis yang tinggi dan sejumlah besar layanan-mikro membuatnya sulit untuk memahami aplikasi secara keseluruhan, baik pada tahap pengujian maupun pada tahap operasional.  Perubahan terjadi secara konstan dan sangat sulit untuk mengendalikannya tanpa alat pemantauan yang baik.  Seringkali setelah rilis malam di pagi hari, pengembang duduk di atas tong bubuk dan menunggu apa pun untuk istirahat, meskipun pada tahap pengujian semua cek berhasil. <br><br>  Ada satu hal lagi.  Pada tahap pengujian, operabilitas perangkat lunak diperiksa: implementasi fungsi utama aplikasi dan tidak adanya kesalahan.  Estimasi kinerja kualitatif tidak ada atau tidak memperhitungkan semua aspek aplikasi dan lapisan integrasi.  Beberapa metrik mungkin tidak diperiksa sama sekali.  Akibatnya, ketika gangguan terjadi di lingkungan yang produktif, departemen dukungan teknis hanya mengetahui kapan pengguna nyata mulai mengeluh.  Saya ingin meminimalkan dampak perangkat lunak berkualitas rendah pada pengguna akhir. <br><br>  Salah satu solusinya adalah dengan menerapkan proses kontrol kualitas perangkat lunak pada berbagai tahapan CI / CD Pipeline, menambahkan berbagai skrip untuk memulihkan sistem jika terjadi kecelakaan.  Juga ingat bahwa kita memiliki DevOps.  Bisnis berharap untuk menerima produk baru secepat mungkin.  Karenanya, semua cek dan skrip kami harus otomatis. <br><br>  Tugas ini dibagi menjadi dua komponen: <br><br><ul><li>  kontrol kualitas majelis pada tahap pengujian (untuk mengotomatisasi proses penangkapan majelis di bawah standar); </li><li>  kontrol kualitas perangkat lunak di lingkungan produksi (mekanisme deteksi masalah otomatis dan skenario yang memungkinkan untuk penyembuhan diri). </li></ul><br><h1>  Alat untuk memantau dan mengumpulkan metrik </h1><br>  Untuk merealisasikan tugas-tugas yang ditetapkan, diperlukan suatu sistem pemantauan yang dapat mendeteksi masalah dan memindahkannya ke sistem otomasi pada berbagai tahap pipa CI / CD.  Juga, poin positif adalah jika sistem ini memberikan metrik yang berguna untuk berbagai tim: pengembangan, pengujian, operasi.  Dan cukup luar biasa, jika untuk bisnis. <br><br>  Untuk mengumpulkan metrik, Anda dapat menggunakan kombinasi berbagai sistem (Prometheus, ELK Stack, Zabbix, dll.), Tetapi, menurut pendapat saya, solusi APM ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pemantauan Kinerja Aplikasi</a> ) paling cocok untuk tugas-tugas ini, yang dapat sangat menyederhanakan hidup Anda. <br><br>  Sebagai bagian dari pekerjaan saya di layanan pendamping, saya mulai melakukan proyek serupa menggunakan solusi kelas Dynatrace APM.  Sekarang, bekerja sebagai integrator, saya tahu pasar sistem pemantauan dengan cukup baik.  Pendapat subjektif saya: Dynatrace paling cocok untuk tugas-tugas seperti itu. <br>  Solusi Dynatrace memberikan tampilan horizontal setiap operasi pengguna dengan tingkat detail yang mendalam hingga ke tingkat eksekusi kode.  Anda dapat melacak seluruh rantai interaksi antara berbagai layanan informasi: mulai dari aplikasi web dan mobile front-end, server aplikasi back-end, bus integrasi hingga panggilan khusus ke database. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/223/706/776/223706776e2f818b7c9e58451f3b5874.png"></div>  <i><a href="">Sumber</a></i>  <i>Konstruksi otomatis semua ketergantungan antara komponen sistem</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/73f/796/e80/73f796e80d722c47cc6044f1c60bf2c8.png"></div>  <i><a href="">Sumber</a></i>  <i>Deteksi otomatis dan pembangunan jalur untuk operasi layanan</i> <br><br>  Ingat juga bahwa kita perlu berintegrasi dengan berbagai alat otomasi.  Di sini solusinya memiliki API praktis yang memungkinkan Anda mengirim dan menerima berbagai metrik dan acara. <br><br>  Selanjutnya, kami akan beralih ke diskusi yang lebih terperinci tentang cara menyelesaikan tugas menggunakan sistem Dynatrace. <br><br><h1>  Tugas 1. Otomatisasi kontrol kualitas majelis pada tahap pengujian </h1><br>  Tugas pertama adalah menemukan masalah sedini mungkin pada tahap-tahap pipa pengiriman aplikasi.  Hanya kode "baik" yang dapat mencapai lingkungan prod.  Untuk melakukan ini, monitor tambahan harus disertakan dalam pipa Anda pada tahap pengujian untuk memverifikasi kualitas layanan Anda. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/034/bd9/498/034bd9498761bf4addffd97f68e70699.png"></div><br><br>  Mari kita lihat langkah-langkah cara mengimplementasikan ini dan mengotomatiskan proses ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b6/2eb/b7f/1b62ebb7fa1fd652fc7ca5110926676e.png"></div>  <i><a href="">Sumber</a></i> <br><br>  Gambar tersebut menunjukkan aliran langkah kontrol kualitas perangkat lunak otomatis: <br><br><ol><li>  penyebaran sistem pemantauan (pemasangan agen); </li><li>  definisi peristiwa penilaian kualitas perangkat lunak Anda (metrik dan nilai ambang batas) dan transfernya ke sistem pemantauan; </li><li>  pembangkitan beban dan uji kinerja; </li><li>  mengumpulkan data kinerja dan ketersediaan dalam sistem pemantauan; </li><li>  mentransfer data uji berdasarkan peristiwa penilaian kualitas perangkat lunak dari sistem pemantauan ke sistem CI / CD.  Analisis perakitan otomatis. </li></ol><br>  <b>Langkah 1. Menyebarkan sistem pemantauan</b> <br><br>  Anda harus menginstal agen terlebih dahulu di lingkungan pengujian Anda.  Pada saat yang sama, solusi Dynatrace memiliki fitur yang bagus - menggunakan agen universal OneAgent, yang diinstal pada instance OS (Windows, Linux, AIX), secara otomatis mendeteksi layanan Anda dan mulai mengumpulkan data pemantauan pada mereka.  Anda tidak perlu mengonfigurasi agen secara terpisah untuk setiap proses.  Situasi serupa akan terjadi pada platform cloud dan container.  Pada saat yang sama, Anda juga dapat mengotomatiskan pemasangan agen.  Dynatrace sangat cocok dengan konsep "infrastruktur sebagai kode" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Infrastruktur sebagai kode atau IaC</a> ): ada skrip dan instruksi siap pakai untuk semua platform populer.  Sematkan agen dalam konfigurasi layanan Anda, dan ketika Anda menyebarkannya, Anda segera mendapatkan layanan baru dengan agen yang sudah berjalan. <br><br>  <b>Langkah 2. Identifikasi peristiwa penilaian kualitas perangkat lunak Anda</b> <br><br>  Sekarang Anda perlu menentukan daftar layanan dan operasi bisnis.  Penting untuk mempertimbangkan dengan tepat operasi-operasi pengguna yang penting bagi bisnis untuk layanan Anda.  Di sini saya merekomendasikan konsultasi dengan analis bisnis dan sistem. <br><br>  Selanjutnya, Anda perlu menentukan metrik mana yang ingin Anda sertakan dalam verifikasi untuk setiap level.  Misalnya, bisa runtime (dengan pemisahan menurut rata-rata, median, persentil, dll.), Kesalahan (logis, layanan, infrastruktur, dll.) Dan berbagai metrik infrastruktur (tumpukan memori, pengumpul sampah, jumlah utas, dll.). <br><br>  Untuk otomatisasi dan kemudahan penggunaan, tim DevOps memperkenalkan konsep "Pemantauan sebagai kode".  Yang saya maksudkan adalah bahwa pengembang / tester dapat menulis file JSON sederhana yang mendefinisikan indikator kontrol kualitas perangkat lunak. <br><br>  Mari kita lihat contoh file JSON tersebut.  Objek dari Dynatrace API digunakan sebagai pasangan kunci / nilai (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dynatrace API untuk deskripsi API</a> ). <br><br><pre><code class="json hljs">{    <span class="hljs-attr"><span class="hljs-attr">"timeseries"</span></span>: [    {      <span class="hljs-attr"><span class="hljs-attr">"timeseriesId"</span></span>: <span class="hljs-string"><span class="hljs-string">"service.ResponseTime"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"aggregation"</span></span>: <span class="hljs-string"><span class="hljs-string">"avg"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"tags"</span></span>: <span class="hljs-string"><span class="hljs-string">"Frontend"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"severe"</span></span>: <span class="hljs-number"><span class="hljs-number">250000</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"warning"</span></span>: <span class="hljs-number"><span class="hljs-number">1000000</span></span>    },    {      <span class="hljs-attr"><span class="hljs-attr">"timeseriesId"</span></span>: <span class="hljs-string"><span class="hljs-string">"service.ResponseTime "</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"aggregation"</span></span>: <span class="hljs-string"><span class="hljs-string">"avg"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"tags"</span></span>: <span class="hljs-string"><span class="hljs-string">"Backend"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"severe"</span></span>: <span class="hljs-number"><span class="hljs-number">4000000</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"warning"</span></span>: <span class="hljs-number"><span class="hljs-number">8000000</span></span>    },    {      <span class="hljs-attr"><span class="hljs-attr">"timeseriesId"</span></span>: <span class="hljs-string"><span class="hljs-string">"docker.Container.Cpu"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"aggregation"</span></span>: <span class="hljs-string"><span class="hljs-string">"avg"</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"severe"</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span>,      <span class="hljs-attr"><span class="hljs-attr">"warning"</span></span>: <span class="hljs-number"><span class="hljs-number">70</span></span>    }  ] }</code> </pre> <br>  File adalah array definisi deret waktu: <br><br><ul><li>  timeseriesId - metrik diperiksa, misalnya, Waktu Respons, jumlah Kesalahan, Memori yang digunakan, dll.; </li><li>  agregasi - tingkat agregasi metrik, dalam kasus kami rata-rata, tetapi Anda dapat menggunakan apa pun yang Anda butuhkan (rata-rata, minimum, maks, jumlah, jumlah, persentil); </li><li>  tag - tag objek dalam sistem pemantauan, atau Anda dapat menentukan pengenal objek tertentu; </li><li>  parah dan peringatan - indikator ini menyesuaikan nilai ambang metrik kami, jika nilai pengujian melebihi ambang parah, maka perakitan kami ditandai sebagai tidak berhasil. </li></ul><br>  Gambar berikut ini menunjukkan contoh penggunaan trasholds tersebut. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/087/be4/db9/087be4db9e8c7a51de722110e526f39a.png"></div>  <i><a href="">Sumber</a></i> <br><br>  <b>Langkah 3. Muat Generasi</b> <br><br>  Setelah kami menentukan tingkat kualitas layanan kami, perlu untuk menghasilkan beban uji.  Anda dapat menggunakan salah satu alat pengujian yang nyaman bagi Anda, misalnya, Jmeter, Selenium, Neotys, Gatling, dll. <br><br>  Sistem pemantauan Dynatrace memungkinkan Anda untuk menangkap berbagai metadata dari pengujian Anda dan mengenali pengujian mana yang terkait dengan siklus rilis dan layanan mana.  Anda disarankan untuk menambahkan header tambahan ke permintaan HTTP pengujian. <br><br>  Gambar berikut menunjukkan contoh di mana, menggunakan header X-Dynatrace-Test opsional, kami menandai bahwa tes ini mengacu pada pengujian operasi penambahan item ke troli. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/96a/3b8/277/96a3b8277f52b4643cc05acc38b7258b.png"></div>  <i><a href="https://dt-cdn.net/images/dynatrace-loadtesting-">Sumber</a></i> <br><br>  Ketika Anda menjalankan setiap tes beban, Anda mengirim informasi kontekstual tambahan ke Dynatrace menggunakan API acara dari server CI / CD.  Dengan demikian, sistem dapat membedakan antara tes yang berbeda di antara mereka sendiri. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/574/f50/948/574f509484f4a0fcc4dea39f9a39870e.png"></div>  <i><a href="">Sumber</a></i>  <i>Acara di sistem pemantauan tentang peluncuran pengujian beban</i> <br><br>  <b>Langkah 4-5.</b>  <b>Kumpulkan data kinerja dan transfer data ke sistem CI / CD</b> <br><br>  Bersama dengan tes yang dihasilkan, sebuah peristiwa ditransmisikan ke sistem pemantauan tentang perlunya mengumpulkan data tentang pengecekan indikator kualitas layanan.  File JSON kami juga ditunjukkan, di mana metrik kunci didefinisikan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/584/427/af6/584427af69b059959ece68661cefbf9e.png"></div>  <i>Peristiwa tentang perlunya memverifikasi kualitas perangkat lunak yang dihasilkan pada server CI / CD untuk dikirim ke sistem pemantauan</i> <br><br>  Dalam contoh kami, acara kontrol kualitas disebut <i>perfSigDynatraceReport</i> (Performance_Signature <i>)</i> - ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">plug</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">in yang</a> siap pakai untuk integrasi dengan Jenkins, yang dikembangkan oleh orang-orang dari T-Systems Multimedia Solutions.  Setiap acara tentang peluncuran tes berisi informasi tentang layanan, nomor build, dan waktu tes.  Plugin mengumpulkan nilai kinerja selama perakitan, mengevaluasi mereka dan membandingkan hasilnya dengan rakitan sebelumnya dan persyaratan non-fungsional. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e58/f13/7d8/e58f137d890618ddb2c59be5eb292b3d.png"></div>  <i>Acara di sistem pemantauan tentang dimulainya kontrol kualitas perakitan.</i>  <i><a href="">Sumber</a></i> <br><br>  Setelah tes selesai, semua metrik penilaian kualitas perangkat lunak ditransfer kembali ke sistem integrasi berkelanjutan, misalnya, Jenkins, yang menghasilkan laporan tentang hasilnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0y/nl/rc/0ynlrc9qxeffy9v4ei_s4ihn5v0.png"></div>  <i>Hasil statistik perakitan di server CI / CD.</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  Untuk setiap unit, kami melihat statistik untuk setiap metrik yang kami atur selama seluruh tes.  Kami juga melihat apakah ada pelanggaran pada nilai ambang tertentu (peringatan dan thrashold parah).  Berdasarkan metrik agregat, seluruh unit ditandai sebagai stabil, tidak stabil, atau gagal.  Selain itu, untuk kenyamanan, Anda dapat menambahkan indikator untuk membandingkan unit saat ini dengan yang sebelumnya dalam laporan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09a/a3d/106/09aa3d106d50eb6be368d1be57e5ee39.png"></div>  <i>Lihat statistik perakitan terperinci di server CI / CD.</i>  <i><a href="">Sumber</a></i> <br><br>  <b>Perbandingan rinci dari dua majelis</b> <br><br>  Jika perlu, Anda dapat pergi ke antarmuka Dynatrace dan di sana melihat lebih detail statistik untuk masing-masing majelis Anda dan membandingkannya satu sama lain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/586/d52/12d/586d5212dcf21aeb30d8f7a6bbd4f158.png"></div>  <i>Perbandingan statistik perakitan di Dynatrace.</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  <b>Kesimpulan</b> <br><br>  Sebagai hasilnya, kami mendapatkan layanan “monitoring as a service”, terotomatisasi dalam pipa integrasi berkelanjutan.  Pengembang atau penguji hanya perlu menentukan daftar metrik dalam file JSON, dan segala sesuatu lainnya terjadi secara otomatis.  Kami mendapatkan kontrol kualitas rilis yang transparan: semua pemberitahuan tentang kinerja, konsumsi sumber daya, atau regresi arsitektur. <br><br><h1>  Tugas 2. Otomatisasi kontrol kualitas perangkat lunak dalam lingkungan produksi </h1><br>  Jadi, kami memecahkan masalah bagaimana mengotomatiskan proses pemantauan pada tahap pengujian di Pipeline.  Dengan demikian, kami meminimalkan persentase rakitan berkualitas rendah yang mencapai lingkungan makanan. <br><br>  Tetapi apa yang harus dilakukan jika perangkat lunak yang buruk masih sampai pada titik penjualan, baik, atau hanya sesuatu yang rusak.  Untuk utopia, kami ingin memiliki mekanisme untuk mendeteksi masalah secara otomatis dan, jika mungkin, sistem itu sendiri akan mengembalikan kapasitas kerjanya, setidaknya di malam hari. <br><br>  Untuk melakukan ini, kami, dengan analogi dengan bagian sebelumnya, memberikan pemeriksaan kualitas perangkat lunak otomatis di lingkungan produksi dan membuat skrip untuk penyembuhan sendiri dari sistem di bawahnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/94d/63e/6c0/94d63e6c0575a310f5982386d731649a.png"></div><br>  <b>Perbaiki otomatis sebagai kode</b> <br><br>  Sebagian besar perusahaan telah memiliki basis pengetahuan yang terakumulasi pada berbagai jenis masalah umum dan daftar tindakan untuk memperbaikinya, misalnya, memulai kembali proses, membersihkan sumber daya, mengembalikan versi konfigurasi, mengembalikan perubahan konfigurasi yang salah, menambah atau mengurangi jumlah komponen dalam sebuah cluster, mengganti garis biru atau hijau dan lainnya <br><br>  Terlepas dari kenyataan bahwa kasus penggunaan ini telah dikenal selama bertahun-tahun oleh banyak tim yang berkomunikasi dengan saya, hanya beberapa yang berpikir dan berinvestasi dalam otomasi mereka. <br><br>  Jika Anda memikirkannya, maka dalam penerapan proses penyembuhan sendiri kesehatan aplikasi tidak ada yang super rumit, Anda perlu menyajikan skenario kerja admin Anda yang terkenal dalam bentuk skrip kode (konsep "koreksi otomatis sebagai kode") yang Anda tulis sebelumnya untuk setiap kasus spesifik.  Skenario perbaikan otomatis harus mengatasi akar penyebab masalah.  Anda mengatur sendiri tindakan respons insiden yang tepat. <br><br>  Setiap metrik dari sistem pemantauan Anda dapat bertindak sebagai pemicu untuk menjalankan skrip, yang terpenting adalah bahwa metrik ini secara akurat menentukan bahwa semuanya buruk, karena saya tidak ingin mendapatkan hasil positif palsu di lingkungan yang produktif. <br><br>  Anda dapat menggunakan sistem atau set sistem apa pun: Prometheus, ELK Stack, Zabbix, dll.  Tetapi saya akan memberikan beberapa contoh berdasarkan solusi APM (Dynatrace akan kembali menjadi contoh), yang juga akan membantu membuat hidup Anda lebih mudah. <br><br>  Pertama, ada segala sesuatu yang berkaitan dengan operabilitas dalam hal aplikasi.  Solusi ini menyediakan ratusan metrik pada berbagai tingkatan yang dapat Anda gunakan sebagai pemicu: <br><br><ul><li>  tingkat pengguna (browser, aplikasi seluler, perangkat IoT, perilaku pengguna, konversi, dll.); </li><li>  tingkat layanan dan operasi (kinerja, ketersediaan, kesalahan, dll.); </li><li>  tingkat infrastruktur aplikasi (metrik OS host, JMX, MQ, server web, dll.); </li><li>  tingkat platform (virtualisasi, cloud, wadah, dll.). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac2/5f9/480/ac25f94800d26b672cace37d7495d008.png"></div>  <i>Tingkat pemantauan di Dynatrace.</i>  <i><a href="">Sumber</a></i> <br><br>  Kedua, seperti yang saya katakan sebelumnya, Dynatrace memiliki API terbuka, yang membuatnya sangat mudah untuk mengintegrasikannya dengan berbagai sistem pihak ketiga.  Misalnya, mengirim pemberitahuan ke sistem otomasi ketika parameter kontrol terlampaui. <br><br>  Di bawah ini adalah contoh untuk berinteraksi dengan Ansible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b90/a7a/d74/b90a7ad74b93428578dafb42235e19b4.png"></div>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber</a></i> <br><br>  Di bawah ini saya akan memberikan beberapa contoh otomatisasi mana yang dapat dilakukan.  Ini hanya sebagian dari kasus-kasus ini, mendaftarkannya di lingkungan Anda hanya dapat dibatasi oleh imajinasi Anda dan kemampuan alat pemantauan Anda. <br><br>  <b>1. Penyebaran yang buruk - versi rollback</b> <br><br>  Bahkan jika kita semua menguji dengan sangat baik di lingkungan pengujian, masih ada kemungkinan bahwa rilis baru dapat membunuh aplikasi Anda di lingkungan prod.  Faktor manusia yang sama belum dibatalkan. <br><br>  Pada gambar berikut, kita melihat bahwa ada lonjakan tajam dalam waktu pelaksanaan operasi pada layanan.  Awal lompatan ini bertepatan dengan waktu penerapan ke aplikasi.  Kami mentransfer semua informasi ini sebagai peristiwa ke sistem otomasi.  Jika kemampuan layanan tidak menormalkan setelah waktu yang ditentukan oleh kami berakhir, sebuah skrip secara otomatis dipanggil yang memutar kembali versi ke versi yang lama. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lk/f9/ps/lkf9psxvdi6kivm-oa29pvypblw.png"></div>  <i>Degradasi kinerja setelah penerapan.</i>  <i><a href="">Sumber</a></i> <br><br>  <b>2. Memuat sumber daya di 100% - menambahkan node ke routing</b> <br><br>  Dalam contoh berikut, sistem pemantauan menentukan bahwa salah satu komponen memiliki utilisasi CPU 100%. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a6c/f16/d1a/a6cf16d1aebeb435e1a24c3760563f54.png"></div>  <i>Pemanfaatan CPU 100%</i> <br><br>  Beberapa skenario berbeda dimungkinkan untuk acara ini.  Sebagai contoh, sistem pemantauan juga memeriksa apakah kurangnya sumber daya dikaitkan dengan peningkatan beban pada layanan.  Jika, ya, maka skrip dijalankan yang secara otomatis menambahkan node ke perutean, sehingga memulihkan sistem secara keseluruhan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/kc/1z/dukc1zzqhiae9ymfilbxpoem2qo.jpeg"></div>  <i>Penskalaan node setelah insiden</i> <br><br>  <b>3. Kurangnya ruang hard drive - Pembersihan Disk</b> <br><br>  Saya pikir banyak dari proses ini sudah otomatis.  Menggunakan APM, Anda juga dapat memantau ruang kosong pada subsistem disk.  Dengan tidak adanya ruang atau operasi disk yang lambat, kami memanggil skrip untuk membersihkan atau menambah ruang. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea8/0cc/b7f/ea80ccb7f269eb465f30e7c94ba18c6d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d8/f22/64d/3d8f2264dd7f312dac430eaa4446d845.png"></div>  <i>Disk memuat 100%</i> <br><br>  <b>4. Aktivitas pengguna rendah atau konversi rendah - beralih antara cabang biru dan hijau</b> <br><br>  Saya sering bertemu pelanggan menggunakan dua sirkuit (penyebaran biru-hijau) untuk aplikasi di lingkungan produksi.  Ini memungkinkan Anda untuk dengan cepat berpindah antar cabang saat mengirimkan rilis baru.  Seringkali setelah penyebaran, perubahan kardinal dapat terjadi yang tidak segera terlihat.  Namun, penurunan kinerja dan ketersediaan mungkin tidak diamati.  Untuk merespons dengan cepat perubahan tersebut, sebaiknya gunakan berbagai metrik yang mencerminkan perilaku pengguna (jumlah sesi dan tindakan pengguna, konversi, rasio pentalan).  Gambar berikut ini menunjukkan contoh di mana ketika konversi turun, beralih di antara cabang perangkat lunak terjadi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9c/db2/776/f9cdb27767029d743a6f7b51a31fc87b.png"></div>  <i>Penurunan konversi setelah beralih di antara cabang perangkat lunak.</i>  <i><a href="">Sumber</a></i> <br><br>  <b>Mekanisme penentuan masalah otomatis</b> <br><br>  Pada akhirnya saya akan memberikan satu contoh lagi, yang paling saya sukai Dynatrace. <br><br>  Dalam bagian dari cerita saya tentang otomatisasi kontrol kualitas rakitan dalam lingkungan pengujian, kami menentukan semua nilai ambang batas dalam mode manual.  Ini normal untuk lingkungan pengujian, tester itu sendiri menentukan indikator sebelum setiap tes, tergantung pada beban.  Dalam lingkungan produksi, diinginkan bahwa masalah dideteksi secara otomatis, dengan mempertimbangkan berbagai mekanisme dasar. <br><br>  Dynatrace memiliki alat kecerdasan buatan bawaan yang menarik, yang didasarkan pada mekanisme untuk menentukan metrik anomali (baselining) dan membuat peta interaksi antara semua komponen, membandingkan dan menghubungkan peristiwa di antara mereka, menentukan anomali dalam pekerjaan layanan Anda dan memberikan informasi terperinci tentang setiap masalah dan akar penyebab. <br><br>  Dengan secara otomatis menganalisis dependensi antar komponen, Dynatrace menentukan tidak hanya apakah layanan bermasalah adalah penyebab utama, tetapi juga ketergantungannya pada layanan lain.  Dalam contoh di bawah ini, Dynatrace secara otomatis memantau dan mengevaluasi kesehatan setiap layanan sebagai bagian dari transaksi, mengidentifikasi layanan Golang sebagai alasan utama. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/afa/623/f52/afa623f525f3c5e2565fcc6382c173e3.png"></div>  <i>Contoh menentukan akar penyebab kegagalan.</i>  <i><a href="">Sumber</a></i> <br><br>  Gambar berikut menunjukkan proses pemantauan masalah dengan aplikasi Anda sejak awal insiden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fu/z_/rt/fuz_rt4omgppab3zkuxs4b-xfmm.gif"></div>  <i>Visualisasi masalah yang muncul dengan tampilan semua komponen dan peristiwa pada mereka</i> <br><br>  Sistem pemantauan telah menyusun kronologi lengkap peristiwa tentang masalah tersebut.  Di jendela di bawah timeline, kita melihat semua peristiwa utama pada masing-masing komponen.  Berdasarkan peristiwa ini, Anda dapat menentukan prosedur untuk koreksi otomatis dalam bentuk skrip kode. <br><br>  Selain itu, saya menyarankan Anda untuk mengintegrasikan sistem pemantauan dengan Service Desk atau pelacak bug.  Jika masalah terjadi, pengembang dengan cepat menerima informasi lengkap untuk analisisnya di tingkat kode di lingkungan produksi. <br><br><h1>  Kesimpulan </h1><br>  Akibatnya, kami berakhir dengan pipa CI / CD dengan pemeriksaan kualitas perangkat lunak otomatis terintegrasi di Pipa.  Kami meminimalkan jumlah rakitan berkualitas rendah, meningkatkan keandalan sistem secara keseluruhan, dan jika kami masih mengganggu kinerja sistem, kami meluncurkan mekanisme untuk memulihkannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e3/1c3/ae2/9e31c3ae24cc9f07a4771167ad2043d3.png"></div><br>  Pasti sepadan dengan upaya untuk mengotomatiskan pemantauan kualitas perangkat lunak, ini tidak selalu merupakan proses yang cepat, tetapi seiring waktu akan membuahkan hasil.  Saya merekomendasikan bahwa setelah menyelesaikan insiden baru di lingkungan prod, segera pikirkan monitor mana yang akan ditambahkan untuk memeriksa di lingkungan pengujian untuk menghindari mendapatkan build yang buruk di dalam prod, dan juga membuat skrip untuk secara otomatis memperbaiki masalah ini. <br><br>  Saya harap teladan saya akan membantu Anda dalam usaha Anda.  Juga menarik bagi saya untuk melihat contoh metrik yang digunakan untuk implementasi sistem penyembuhan diri. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bea/ccc/1c5/beaccc1c5f2fb65ac9cf91e6dda3bbd5.jpg"></div>  <i><a href="">Sumber</a></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id451630/">https://habr.com/ru/post/id451630/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id451620/index.html">Otorisasi otomatis pada kartu Strava Heatmap</a></li>
<li><a href="../id451622/index.html">Tentang penghitungan bit, tipe yang tidak ditandatangani di Kotlin dan tentang situasi di mana penghematan pada pertandingan dibenarkan</a></li>
<li><a href="../id451624/index.html">Tentang bagaimana Harry Potter membentuk pendidikan Rusia, tentu saja, bukan di tempat Anda membutuhkannya</a></li>
<li><a href="../id451626/index.html">Belajar tanpa guru: murid yang penasaran</a></li>
<li><a href="../id451628/index.html">Ulasan 3D Expo teratas pada bulan April 2019</a></li>
<li><a href="../id451634/index.html">Bagaimana kami dianalisis di toko-toko dan restoran</a></li>
<li><a href="../id451636/index.html">Lima tahun perbudakan</a></li>
<li><a href="../id451638/index.html">Animasi dalam Aplikasi Seluler: Menguji Lottie</a></li>
<li><a href="../id451640/index.html">Game of Thrones: Membangun Infografis tentang Pembunuhan, Seks, Bepergian ke Westeros dan Banyak Lagi</a></li>
<li><a href="../id451642/index.html">Menemukan Jalan Di Antara Hambatan Bulat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>