<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ผ๏ธ ๐ฉ๐พโ๐คโ๐ฉ๐ผ ๐ OpenVPN ูุน ุงููุตุงุฏูุฉ ุงููุชูุฏูุฉ ูุงูุชุฑุฎูุต ๐ ๐ฉ๐พโ๐คโ๐จ๐ฟ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุงูุด ุงูููุงู ุชูููู OpenVPN ูุน ููุฒุงุช ุฅุถุงููุฉ: 



- ุดูุงุฏุงุช ุงูุฑูุฒ ูููุตุงุฏูุฉ ุงูุฃุณุงุณูุฉ (Rutoken ููุซุงู) 
- ุงููุงุฌูุฉ ุงูุฎูููุฉ ูู LDAP ูููุตุงุฏูุฉ ุงูุซุงูููุฉ (ุจุงุณุชุฎุฏุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenVPN ูุน ุงููุตุงุฏูุฉ ุงููุชูุฏูุฉ ูุงูุชุฑุฎูุต</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433250/" style=";text-align:right;direction:rtl">  ููุงูุด ุงูููุงู ุชูููู OpenVPN ูุน ููุฒุงุช ุฅุถุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุดูุงุฏุงุช ุงูุฑูุฒ ูููุตุงุฏูุฉ ุงูุฃุณุงุณูุฉ (Rutoken ููุซุงู) </li><li style=";text-align:right;direction:rtl">  ุงููุงุฌูุฉ ุงูุฎูููุฉ ูู LDAP ูููุตุงุฏูุฉ ุงูุซุงูููุฉ (ุจุงุณุชุฎุฏุงู ActiveDirectory ููุซุงู) </li><li style=";text-align:right;direction:rtl">  ุชุตููุฉ ุงูููุงุฑุฏ ุงูุฏุงุฎููุฉ ุงููุชุงุญุฉ ูููุณุชุฎุฏููู (ุนุจุฑ iptables) </li></ul><br>  ูุตู ุฃูุถูุง ููููุฉ ุชูููู ุนููุงุก ููุธุงูู ุงูุชุดุบูู Linux ู Windows ู MacOS. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุฎุงุฏู </h3><br><h4 style=";text-align:right;direction:rtl">  ุชุซุจูุช OpenVPN </h4><br>  ุฎุฐ ุงูุจุฑูุงูุฌ ุงููุตู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Nyr / openvpn-install</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู</a> ุจุชุดุบููู ูู ุงูุฌุฐุฑ. <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">git clone https://github.com/Nyr/openvpn-install.git cd openvpn-install</code> </pre> <br>  ุณุชููู ุนูููุฉ ุจุฏุก ุงูุชุดุบูู ุจุทุฑุญ ุจุนุถ ุงูุฃุณุฆูุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุฑูุชูููู UDP </li><li style=";text-align:right;direction:rtl">  ุงููููุฐ 1194 </li><li style=";text-align:right;direction:rtl">  ุฎูุงุฏู DNS - ุงููุญููุฉ </li><li style=";text-align:right;direction:rtl">  ุนููุงู IP ุงูุฎุงุฑุฌู ููุจูุงุจุฉ ุนูู ุงูุฅูุชุฑูุช ูุงูุฐู ูู ุฎูุงูู ุณูููู ุฎุงุฏู vpn ูุชุงุญูุง </li></ul><br>  ููุงู ุฃูุถูุง ูุณุฎุฉ ูุญุณูุฉ ูู ุงูุฃูุงู ูููุต ุงูุฃุตูู - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/Angristan/OpenVPN- install</a> .  ูุฏููุง ุงููุฒูุฏ ูู ุฅุนุฏุงุฏุงุช ุงูุชุดููุฑ ูุน ุดุฑุญ ููุงุฐุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏู </h4><br>  <b>ูุถููุง</b> <br>  ุฅุฐุง ูู ูุชู ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงููููุฒุฉ ุ ุชุชู ุฅุถุงูุฉ ุงููุณุชุฎุฏู ูู ุฎูุงู ุงูุจุฑูุงูุฌ ุงููุตู ููุณู.  ูููู ุงูุจุฑูุงูุฌ ุงููุตู ุจุดูู ุฃุณุงุณู ุจุฅูุดุงุก ุชูููู ovpn ูุฎุตุต ูุฅุฏุฑุงุฌ ุดูุงุฏุฉ ูููุนุฉ ูู ุดูุงุฏุฉ ุงูุฌุฐุฑ ููุงู. <br><br>  ุฅุฐุง ุชู ุงุณุชุฎุฏุงู ุงูุฑููุฒ ุงููููุฒุฉ (ุงูุธุฑ ุงููุณู ุงูููุฌูุฏ ุนูู ุงูุฑููุฒ ุฃุฏูุงู) ุ ูุณูุชู ูุชุงุจุฉ ุงูุดูุงุฏุฉ ูุฏูููุง ุจูุงุกู ุนูู ุทูุจ ุงูุดูุงุฏุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุนูู ุงูุฑูุฒ ุงููููุฒ.  ูุฌุจ ุฃู ูุชู ุชูููู ุงููุณุชุฎุฏู ูุฏูููุง ูู ุงููุงูุจ ุงูููุฌูุฏ (ูู ููุณ ุงููุงูุจ ุงูุฐู ุชู ุฅูุดุงุก ุงูุจุฑูุงูุฌ ุงููุตู ููุชูููู ููู).  ุงููุงูุจ ููุง <code>/etc/openvpn/client-common.txt</code> .  ูุง ูุชู ุชุถูููู ูู ุญุฒูุฉ openvpn ููุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุงูุจุฑูุงูุฌ ุงููุตู ุฃุซูุงุก ุนูููุฉ ุงูุชูููู. <br><br>  <b>ุญุฐู</b> <br>  ุชุชู ุฅุฒุงูุฉ ุงููุณุชุฎุฏููู ูู ุฎูุงู ููุณ ุงูุจุฑูุงูุฌ ุงููุตู ููุชุซุจูุช.  ุชุชู ุฅุถุงูุฉ ุงูุดูุงุฏุฉ ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CRL</a> ุ ููุชู ุฏูุน CRL ุงูุฌุฏูุฏ ุฅูู ุฎุงุฏู vpn.  ูุนุชุจุฑ ุงูุฎุงุฏู ุฌููุน ุงูุดูุงุฏุงุช ุงูููุฌูุฏุฉ ูู CRL ุบูุฑ ุตุงูุญุฉ ููุฑูุถ ูุจูููุง. <br><br>  ููููุฉ ุฅุจุทุงู ุงูุดูุงุฏุฉ ูุฏูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cd /etc/openvpn/easyrsa #   ./easyrsa revoke $CLIENT #   crl ./easyrsa gen-crl #   crl rm -rf /etc/openvpn/crl.pem #    cp /etc/openvpn/easy-rsa/pki/crl.pem /etc/openvpn/crl.pem # openvpn    crl,       nobody chown nobody:nobody /etc/openvpn/crl.pem</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุชุตููุฉ ุงููุถูููู ุงููุชุงุญุฉ ููุนููุงุก </h4><br>  ูุฌุจ ุฃู ููุชุตุฑ ุงูุนููุงุก ุนูู ุงููุถูููู ุญุชู ูุชููููุง ูู ุงููุตูู ุฅูู ุงูุดุจูุฉ ุนูุฏ ุงุชุตุงููู ุจู openvpn. <br><br>  <b>ูุฏููุง</b> <br><br>  ุชุชูุซู ุงูููุฑุฉ ูู ุงูุชูุงุท ุงูุญุฒู ุญุชู ุนูู ูุงุฌูุฉ <code>tun0</code> ุ ูุงูุชู ูุฃุชูู ุฅูููุง ูู ุงูุนููุงุก ูุชุตููุชูุง ูุจู ุงูุฏุฎูู ุฅูู NAT.  ุจุนุฏ NAT ุ ูู ูููู ููุงู ุณุจุจ ูุชุตููุชูุง - ุณูููู ูุฏููู ุฌููุนูุง ุนููุงู IP ูุฎุงุฏู openvpn ุนูู ุงูุดุจูุฉ ุงูุฏุงุฎููุฉ.  ูุจู ุงูุฏุฎูู ุฅูู NAT ุ ูููู ููุญุฒู ููู ูุณุชุฎุฏู ุนููุงู IP ูุฑูุฏ ุฎุงุต ุจู (ููุฑุงุณูุงุช ุนูุงููู IP ูุงููุณุชุฎุฏููู ุ ุฑุงุฌุน ุงูููู <code>/etc/openvpn/ipp.txt</code> ). <br><br>  ุชุชู ูุนุงูุฌุฉ ุงูุญุฒู ุงูุชู ุชูุฑ ุนุจุฑ ุงููุธุงู (ูุง ุชุฃุชู ููู ูุจุงุดุฑุฉ ูููุณุช ูุงุฑุฏุฉ ุ ุฃู ูู ุงููุงูุน ุ ูุชู ุชูุฌูููุง ุจูุงุณุทุฉ ุงููุธุงู) ุจูุงุณุทุฉ ุฌุฏูู FORWARD.  ุชุชู ูุนุงูุฌุฉ ุงูุฌุฏุงูู ูู iptables ูู ุฃุนูู ุฅูู ุฃุณูู ุ ุฅุฐุง ูู ุชุคุฏู ุฃู ูู ุงูููุงุนุฏ ูู ุงูุฌุฏูู ุฅูู ูุฑุงุฑ ุจุดุฃู ูุตูุฑ ุงูุญุฒูุฉ ุ ูุณูุชู ุชุดุบูู ุงููุงุนุฏุฉ ุงูุงูุชุฑุงุถูุฉ. <br><br>  ุชุญุถูุฑ ุฌุฏูู FORWARD: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#   iptables -F FORWARD #     FORWARD -    iptables -P FORWARD DROP #     iptables -I FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT</code> </pre><br>  ููุงุนุฏ ุงููุซุงู ูุนููู ูุนูู.  ูุธุฑูุง ูุฃู ุงููุงุนุฏุฉ ุงูุงูุชุฑุงุถูุฉ ููุฌุฏูู ูู DROP ุ ูุจูู ููุท ุงูุณูุงุญ ูุฃุฒูุงุฌ ููุงูุฐ ุงููุถูู + ุญูุซ ููููู ุฐูู.  ุงูุณูุงุญ ุจุงููุตูู ุฅูู ุงููููุฐ ุนูู ุงููุถูู + ุชูููุฐ ุงูุฃูุฑ ping ูููุถูู ููุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">iptables -I FORWARD -s 10.8.0.3 -i tun0 -d 10.0.2.3 -p tcp --dport 443 -j ACCEPT iptables -I FORWARD -s 10.8.0.3 -i tun0 -d 10.0.2.3 -p icmp --icmp-type echo-request -j ACCEPT</code> </pre><br>  ูู ุงููุซุงู ุฃุนูุงู ุ ููุณูุญ ูููุถูู 10.8.0.3 ุจุงููุตูู ุฅูู ุงููููุฐ 443 ุงูุฎุงุต ุจุงููุถูู 10.0.2.3. <br><br>  ููููุฉ ุฅุบูุงู ุงููุตูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#         iptables -L FORWARD --line-numbers #     iptables -D FORWARD { }</code> </pre><br>  ุซู ุชุญุชุงุฌ ุฅูู ุงูุนุซูุฑ ุนูู ุฌููุน ุงูููุงุนุฏ ูุนููู ูุนูู ูุญุฐููุง. <br><br>  ุฃุซูุงุก ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ูู ุงููุฑูุญ ุงููุธุฑ ุฅูู ุงูููุงุนุฏ ุงููุงุฌุญุฉ.  ูู ูุงุนุฏุฉ ูุฏููุง ุนุฏุงุฏ ูู ุงูุญุฒู ูุนุงูุฌุชูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#  ,      watch iptables -nvL FORWARD #     iptables -Z FORWARD</code> </pre><br>  <b>ุชููุงุฆูุง</b> <br><br>  ุฎุงุฏู openvpn ูุฏูู ุงููุฏุฑุฉ ุนูู ุชูููุฐ ุงูุจุฑุงูุฌ ุงููุตูุฉ ูุฅุฌุฑุงุกุงุช ูุนููุฉ.  ุนูู ูุฌู ุงูุฎุตูุต ุ ุนูุฏ ุงูุงุชุตุงู ููุตู ุงูุนููุงุก.  ูููู ูุชุงุจุฉ ุงูุจุฑุงูุฌ ุงููุตูุฉ ุนูู ุฃู ุดูุก ุฅุฐุง ูุงูุช ูุงุจูุฉ ููุชูููุฐ ููุท.  ุฏุงุฎู ุงูุจุฑูุงูุฌ ุงููุตู ุ ุชููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุจุชูุฑูุฑ ุฌููุน ุฃููุงุน ุงููุนููุงุช ุฅูู ุงูุงุชุตุงู ุงูุญุงูู.  ูุญู ููุชููู ุจุงููุชุบูุฑุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>common_name</code> (ุงุณู ูุงูู ุงูุดูุงุฏุฉ ุ ูุง ุงูุฐู ูุฏูุน ุฅูู ุญูู ุงูุงุณู ุงูุดุงุฆุน ุนูุฏ ุฅูุดุงุก ุงูุดูุงุฏุฉ) </li><li style=";text-align:right;direction:rtl">  <code>ifconfig_pool_remote_ip</code> (ุนููุงู IP ููุนููู ุนูู tun0) </li><li style=";text-align:right;direction:rtl">  <code>script_type</code> (ุญุฏุซ ูุง ุญุฏุซ - ุงูุงุชุตุงู ุฃู ูุทุน ุงูุงุชุตุงู). </li></ul><br>  ุชุญุชุงุฌ ุงูุชูุงุฒุงุช ุงูุฌุฐุฑ ูุฅุฏุงุฑุฉ iptables.  ุงููุณูุฌุฑ ุจุนุฏ ุฑุจุท ุญููู ุฅุนุงุฏุฉ ุชุนููู ูุฃุญุฏ ููุง ูุนูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ููู.  ูู ุงูุฎุทุฃ ุนุฏู ุงูุณูุงุญ ูุฃู ุดุฎุต ุจุนูู ุดูุก ูู ุชุญุช sudo ุ ููู ุงูุฃูุถู ุนุฏู ุงุณุชุฎุฏุงู ุนูุงูุฉ ุงููุฌูุฉ ูู ุงูููุงุนุฏ ุ ูููู ุจุทุฑููุฉ ูุง ุชุญุชุงุฌ ุฅูู ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุงูุชุญูู ูู iptables. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># /etc/sudoers.d/50_openvpn # #    nobody ALL = NOPASSWD: /sbin/iptables -A FORWARD* #     nobody ALL = NOPASSWD: /sbin/iptables -L FORWARD* #    nobody ALL = NOPASSWD: /sbin/iptables -D FORWARD*</span></span></code> </pre><br>  ูู ุชููุฆุฉ ุงูุฎุงุฏู ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฅุฐู ูุชูููุฐ ูููุงุช ุงูุฌูุงุช ุงูุฎุงุฑุฌูุฉ ูุชูููู ุฑุจุทุชูู ูุณุคููุชูู ุนู ุชูุตูู ุงููุณุชุฎุฏู ููุทุน ุงูุงุชุตุงู ุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">script-security 2 client-connect /etc/openvpn/bin/hosts.rb client-disconnect /etc/openvpn/bin/hosts.rb</code> </pre><br>  ุงูุจุฑูุงูุฌ ุงููุตู ููุณู ุ ุงูุฐู ููุฑุฃ ุงูุชููููุงุช ููุทุจู ููุงุนุฏ iptables.  ุงูุจุฑูุงูุฌ ุงููุตู ูุนูู ุนูู ููุณ ุงููุจุงุฏุฆ ููุง ูู ููุถุญ ูู ุงููุณู ุงูุณุงุจู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">/openvpn/bin/hosts.rb</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/ruby # -*- coding: utf-8 -*- require 'pp' def log(string) puts 'hosts.rb: ' + string end def parse_config_file(name) config_path = "hosts/#{name}" unless File.exist?(config_path) puts "There is no specific configuration for #{name}." p name exit 0 end config_source = IO.read(config_path).split("\n") config = config_source.inject([]) do |result,line| ip, port, protocol = line.split(/\s+/) result &lt;&lt; { ip: ip, port: port, protocol: protocol || 'tcp' } end end def get_config(name) user_config = parse_config_file(name) if user_config everybody_config = parse_config_file('everybody') end everybody_config + user_config end def apply_rule(rule) command = "sudo iptables #{rule}" log(command) system(command) end def remove_rule(number) command = "sudo iptables -D FORWARD #{number}" log(command) system(command) end def allow_target(source_ip, options) #         . apply_rule("-A FORWARD -s #{source_ip} -i tun0 -d #{options[:ip]} -p #{options[:protocol]} --dport #{options[:port]} -j ACCEPT") #       apply_rule("-A FORWARD -s #{source_ip} -i tun0 -d #{options[:ip]} -p icmp --icmp-type echo-request -j ACCEPT") end def clear_targets(source_ip) #      FORWARD,  source_ip. rules_exist = true while rules_exist table = `sudo iptables -L FORWARD --line-number`.split("\n") the_line = table.find do |line| fields = line.split(/\s+/) ip = fields[4] ip == source_ip end if the_line number = the_line.split(/\s+/)[0] remove_rule(number) else rules_exist = false end end end ################################################################################ script_type = ENV['script_type'] log(script_type) name = ENV['common_name'] source_ip = ENV['ifconfig_pool_remote_ip'] case script_type when 'client-connect' config = get_config(name) config.each{|target| allow_target(source_ip, target)} when 'client-disconnect' clear_targets(source_ip) else puts "Unknown script type #{script_type}." end</span></span></code> </pre></div></div><br>  ูุชู ุชุฎุฒูู ุงูููุงุนุฏ ูู ูููุงุช ูุชูุงููุฉ ูุน ุงูุงุณู ุงูุดุงุฆุน ููุดูุงุฏุงุช ูู ุงููุฌูุฏ <code>/etc/openvpn/hosts</code> .  ููู ุชุญุฏุฏ ุจุงูุถุจุท ุนูุงููู IP ุงููุชุงุญุฉ ูุนููู ูุนูู.  ูุงุตู - ุนุฏุฏ ุชุนุณูู ูู ุงููุณุงุญุงุช.  ุชุชู ูุชุงุจุฉ ุนููุงู IP ูุงููููุฐ ูุงูุจุฑูุชูููู (tcp ุฃู udp) ูู ุฎูุงู ุงููุงุตู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">10.0.0.24 53 udp 10.0.0.25 53 udp 10.0.2.3 443 tcp</code> </pre><br>  ูุชูุฌุฉ ูุฐูู ุ ูุฌุจ ุฃู <code>/etc/openvpn</code> ุงููููู ุงูุชุงูู ูู ุงููุฌูุฏ <code>/etc/openvpn</code> <br><br>  โโโ ุจู <br>  s. โโโ hosts.rb <br>  โโโ ุงููุถูููู <br>  1 โโโ user1 <br>  2 โโโ user2 <br>  โโโ โโโ ุงูุฌููุน <br>  โโโ server.conf <br>  โโโ ... <br><br>  <code>User1</code> ู <code>user2</code> ูู ูููุงุช ุจุงูุชูุณูู ุฃุนูุงู.  ูุตููู ุฃู ุงููุถูููู ุงูุฐู ูุญูู ุงูุงุณู ุงูุดุงุฆุน ุงูููุงุจู ูู ุญู ุงููุตูู ุฅูู. <br><br>  ููุฌุฏ ููู ุฅุถุงูู ุขุฎุฑ <code>everybody</code> ุ ูุญุชูู ุนูู ููุงุนุฏ ุชูุทุจู ุนูู ุฌููุน ุงูุนููุงุก ุ ุจุดุฑุท ุฃู ูููู ููุงู ููู ุชูููู ูููุตู ููุคูุงุก ุงูุนููุงุก.  ุฃู ุฅุฐุง ูุงู ูุฏู ุงููุณุชุฎุฏู ูุงุฆูุฉ ุจุงููุถููุงุช ุญูุซ ููููู ุงูุงูุชูุงู ุ ูุณูุชู ุชุทุจูู ูุฐู ุงููุงุฆูุฉ ูุงููุถูููู ุงููุฏุฑุฌูู ูู <code>everybody</code> .  ุฅุฐุง ูู ููู ูุฐูู ุ <code>everybody</code> ูุงุจู ููุชุทุจูู.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูููุงุฆู ูุถุน ุฎุงุฏู DNS ูู ูุฐุง ุงูููู. <br><br>  <b>ุชุณุฌูู</b> <br><br>  ูุชุถูู ุงูุจุฑูุงูุฌ ุงููุตู ููุชุซุจูุช ููุท ุชุณุฌูู ุงูุงุชุตุงูุงุช ุงูุญุงููุฉ (ูุนููุฉ <code>status)</code> .  ุญุชู ูุธูุฑ ุณุฌู ููุชุธู ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุณุทุฑ ุฅูู ุชููุฆุฉ ุงูุฎุงุฏู ( <code>/etc/openvpn/server.conf</code> ): <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">log</span></span>-append /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/openvpn.log</code> </pre> <br><br>  <b>LDAP</b> <br><br>  ููุงู ูููู ุฅุถุงูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">openvpn-auth-ldap</a> ูุณูุญ ูู ุจูุตุงุฏูุฉ ูุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู ุนุจุฑ LDAP. <br><br>  ุชุณููู ุงูุญุฒูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sudo yum install openvpn-auth-ldap</code> </pre> <br>  ุฅุถุงูุฉ ุฅูู server.conf: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">plugin /usr/lib64/openvpn/plugin/lib/openvpn-auth-ldap.so "/etc/openvpn/ldap.conf"</code> </pre> <br>  ูู ุจุฅูุดุงุก ุชููุฆุฉ ูู ldap ูู <code>/etc/openvpn/ldap.conf</code> : <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&lt;LDAP&gt; URL ldaps://{LDAP_DOMAIN_HERE} Timeout 15 TLSEnable no FollowReferrals yes BindDN "BIND_DN_HERE" Password "BIND_PASSWORD_HERE" &lt;/LDAP&gt; &lt;Authorization&gt; BaseDN "{BASE_DN_HERE}" SearchFilter "(&amp;(sAMAccountName=%u)(objectClass=organizationalPerson)(objectCategory=person)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))" RequireGroup false &lt;/Authorization&gt;</code> </pre><br>  ุฃุถู ุงูุณุทุฑ ุฅูู ุชููุฆุฉ ovpn ุงููุฎุตุตุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">auth-user-pass</code> </pre> <br>  ูุจุงูุชุงูู ุ ุณููุทูุจ ูู ุงููุณุชุฎุฏู ุฃููุงู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ูู ุงููุฌุงู ุ ุซู ุฑูู ุงูุชุนุฑูู ุงูุดุฎุตู ูู ุงูุฑูุฒ ุงููููุฒ.  ุฅุฐุง ูุดูุช ุฅุญุฏู ูุฐู ุงูุฎุทูุงุช ุ ููู ูุชู ุชุฃุณูุณ ุงูุงุชุตุงู. <br><br>  ูุตู ุฎูุงุฑุงุช ldap.conf <a href="">ูู ูุณุชูุฏุน ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ</a> .  ูุฏุนู ุงููุตุงุฏูุฉ ุญุณุจ ุนุถููุฉ ุงููุฌููุนุฉ ุ ููููู ูู ุฃุฎุชุจุฑูุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุณุฑุนุฉ </h4><br>  ุฃูุจุฑ ุฒูุงุฏุฉ ูู ุงูุณุฑุนุฉ ูุนุทู ุฅุฏุฑุงุฌ ูุถุน udp.  ููุตุญ ูุฐุง ูู ุฌููุน ุงูุฃุฏูุฉ.  ุงูููุทุฉ ุงููููุฉ ูู ุฃูู ูุง ูุนูู ูุจุฏุก ุงุชุตุงู ุนููู tcp ูู ููุงุฉ tcp.  ูุงุญุฏ tcp ูู ุงูุนููู ูููู ูุฌุนู ุงูุชุณููู ุงูุตุญูุญ ููุญุฒู.  ุฅุฐุง ููุฏุช ุงูุญุฒู ูู ููุงุฉ UDP ุ ูุฅู ุงุชุตุงู tcp ููุนููู ุณูู ูุชุญูู ูู ุถุจุท ุงูุชุณููู. <br><br>  ุณุชุฒุฏุงุฏ ุงูุณุฑุนุฉ ุนูู ุงูุฃูู ูุฃูู ูุง ุชูุฌุฏ ุญุงุฌุฉ ูุงูุชุธุงุฑ ุชุฃููุฏ ุชุณููู ูู ุญุฒูุฉ ูู ุงูููุงุฉ.  ููุงู ูุดููุฉ ุซุงููุฉ ูุน tcp - ุญุฒูุฉ tcp ููุนููู ุนูู ุงูุฃุฑุฌุญ ูุง ุชูุณุฌู ูุน ุญุฒูุฉ ูุงุญุฏุฉ ูู ููุงุฉ vpn.  MTU ูู ููุณูุง ุ ููู ูุฌุจ ุฅุถุงูุฉ ุงูุฑุคูุณ ุฅูู ุญุฒูุฉ ุงูุนููู.  ูุชูุฌุฉ ูุฐูู ุ ูุฌุจ ุนููู ุฅุฑุณุงู ุฑุฒูุชูู ุฏุงุฎู ููุงุฉ vpn ููู ุฑุฒูุฉ ูุณุชุฎุฏู. <br><br>  ูู ุงูููุทูู ุงุณุชุฎุฏุงู TCP ุนูุฏูุง ูููู ุฐูู ูุณุชุญูููุง ุจุทุฑููุฉ ุฃุฎุฑู.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูุนูู VPN ุนุจุฑ ููุงุฉ ssh. <br><br><h4 style=";text-align:right;direction:rtl">  ูุซุงู ุนูู ุชูููู ุงูุฎุงุฏู ุงููุงูู </h4><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุณุจูู ุงููุซุงู server.conf</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">port 1194 proto tcp dev tun sndbuf 0 rcvbuf 0 ca ca.crt cert server.crt key server.key dh dh.pem tls-auth ta.key 0 topology subnet server 10.8.0.0 255.255.255.0 ifconfig-pool-persist ipp.txt push "redirect-gateway def1 bypass-dhcp" push "dhcp-option DNS 10.0.0.25" push "dhcp-option DNS 10.0.0.24" keepalive 10 120 cipher AES-256-CBC comp-lzo user nobody group nobody persist-key persist-tun status openvpn-status.log verb 3 crl-verify crl.pem log-append /var/log/openvpn.log script-security 2 client-connect /etc/openvpn/bin/hosts.rb client-disconnect /etc/openvpn/bin/hosts.rb</code> </pre><br></div></div><br><h3 style=";text-align:right;direction:rtl">  ุฑูุฒ ุงูุฅุนุฏุงุฏ </h3><br><h4 style=";text-align:right;direction:rtl">  PKCS # 11 ููุชุจุฉ </h4><br>  ููุนูู ูุน ุงูุฑููุฒ ุ ุชุญุชุงุฌ ุฅูู ููุชุจุฉ ุฎุงุตุฉ.  ููุงู ุญุงุฌุฉ ุฅูู ุงูููุชุจุฉ ูุฅูุดุงุก ุฃุฒูุงุฌ ุงูููุงุชูุญ ูุงูุงุชุตุงู ุงููุนูู.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุญููู ูุฌููุน ุงูููุตุงุช ูู ุฎูุงู ุงูุฑุงุจุท</a> . <br><br>  ุฃูููุง ุชู ุงูุนุซูุฑ ุนูู librtpkcs11ecp.so ูุงุญููุง - ููุฐู ูู ุงูููุชุจุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูุชูุฒูู ููุถุนูุง ูู ููุงู ููุงุณุจ. <br><br><h4 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุดูุงุฏุฉ ุนูู ุฑูุฒ ูููุฒ </h4><br>  ุฅูุดุงุก ุฒูุฌ ุงูููุงุชูุญ ุนูู ุงูุฑูุฒ ุงููููุฒ.  ุงููุนููุฉ id ููุง ูู ุงูุฑูู ุงูุชุณูุณูู ูููุชุญุฉ ุงูููุฌูุฏุฉ ุนูู ุงูุฑูุฒ ุงููููุฒ ุญูุซ ููุงุณุจ ุฒูุฌ ุงูููุงุชูุญ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">pkcs11-tool --module /usr/lib64/librtpkcs11ecp.so --keypairgen --key-type rsa:2048 -l --id 01</code> </pre><br>  ุชูุฏูู ุทูุจ ุดูุงุฏุฉ ููููุชุงุญ ุงูุนูููู.  ูู ุนูููุฉ ุฅูุดุงุก ุทูุจ ุดูุงุฏุฉ ุ ูุชู ุชุนููู ุนูุฑ ุงูุดูุงุฏุฉ ูุงูุงุณู ุงูุดุงุฆุน ุ ูุงูุฐู ูุณุชุฎุฏู ูุชุตููุฉ ุนูุงููู IP ุงููุชููุฑุฉ ุฏุงุฎู ุงูุดุจูุฉ.  ูุฌุจ ุฃู ูุทุงุจู ุงูุงุณู ุงูุดุงุฆุน ุชุณุฌูู ุงูุฏุฎูู ูู ActiveDirectory ุจุญูุซ ูุง ูููู ููุงู ุฃู ุชุดููุด. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">openssl openssl&gt; engine -t dynamic -pre SO_PATH:/usr/lib64/openssl/engines/pkcs11.so -pre ID:pkcs11 -pre LIST_ADD:1 -pre LOAD -pre MODULE_PATH:/usr/lib64/librtpkcs11ecp.so openssl&gt; req -engine pkcs11 -new -key slot_0-id_01 -keyform engine -out /home/john/good.req</code> </pre><br>  ูุฌุจ ููู ุงูุทูุจ ุงููุณุชูู ุฅูู ุงููุฌูุฏ <code>/etc/openvpn/easy-rsa/pki/reqs/</code> .  ูุฌุจ ุฃู ูููู ุงูุชุฏุงุฏ ุงูููู <code>req</code> . <br>  ุชุญููู ุงูุทูุจ ุฅูู ุดูุงุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cd /etc/openvpn/easy-rsa/ ./easyrsa sign-req client good</code> </pre><br>  ุจุนุฏ ุฐูู ุ ุณุชุธูุฑ ุดูุงุฏุฉ ุชุญูู ุงูุงุณู ููุณู ูููู ุจุงูุงูุชุฏุงุฏ <code>crt</code> ูู ุงููุฌูุฏ <code>/etc/openvpn/easy-rsa/pki/issued/</code> . <br><br>  ูุจู ุงูุชุณุฌูู ุ ูุฌุจ ุชุญููู ุงูุดูุงุฏุฉ ุฅูู DER: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">openssl x509 -in /home/user/user-cert.pem -out /home/user/user-cert.crt -outform DER</code> </pre><br>  ูุชุงุจุฉ ุดูุงุฏุฉ ุงูุฑูุฒ ุงููููุฒ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">pkcs11-tool --module /usr/lib/librtpkcs11ecp.so -l -y cert -w /home/user/user-cert.crt --id 45 --label TEST</code> </pre> <br>  ุฅูู ููุชูุจ ุนูู ุฃุณุงุณ ุงูููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงุณุชุฎุฏุงู Rutoken EDS ูุน OpenSSL (RSA)"</a> . <br><br><h4 style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุงูุฑูุฒ ูููุตุงุฏูุฉ </h4><br>  ุงุจุญุซ ุนู ูุนุฑู ุงูุดูุงุฏุฉ ููุชู ุชูุฏููู ุฅูู ุงูุฎุงุฏู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ openvpn --show-pkcs11-ids /usr/lib64/librtpkcs11ecp.so The following objects are available for use. Each object shown below may be used as parameter to --pkcs11-id option please remember to use single quote mark. Certificate DN: /CN=User1 Serial: 490B82C4000000000075 Serialized id: aaaa/bbb/41545F5349474E415455524581D2A1A1B23C4AA4CB17FAF7A4600</code> </pre><br>  ูุญู ููุชููู ูู ุงูุฑูู ุงูุชุณูุณูู ููุง. <br><br>  ุงูุฎูุงุฑุงุช ุงูุชู ูุฌุจ ุฅุฏุฎุงููุง ูู ุชูููู ovpn ุจุญูุซ ุชูุชูุท ุงูุฑููุฒ ุงููููุฒุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">pkcs11-providers /usr/lib64/librtpkcs11ecp.so pkcs11-id 'aaaa/bbb/41545F5349474E415455524581D2A1A1B23C4AA4CB17FAF7A4600'</code> </pre> <br>  ูุฌุจ <code>pkcs11-id</code> ุฎูุงุฑ <code>pkcs11-id</code> <b>ูู ุนูุงูุงุช ุงูุชุจุงุณ ููุฑุฏุฉ.</b> <br><br>  ูุฐุง ุงูุฏููู ููุทูู ุนูู ุฌููุน ุงูููุตุงุช.  ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงููุณุงุฑ ุฅูู ุงูููุชุจุฉ ููุนุฑู ุงูุดูุงุฏุฉ ุนูู ุงูุฑูุฒ ุงููููุฒ.  ูุฏ ูุชู ุงุณุชุฏุนุงุก ุงูููุชุจุฉ ุจุดูู ูุฎุชูู ููููุงู ุ ุชููู <code>.dll</code> ุ ูููุณ <code>.so</code> ุ ููู ุงููุนูู ูู ููุณู. <br><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅุฒุงูุฉ ููุงุทุน ุงูุดูุงุฏุงุช ูุงูููุงุชูุญ ูู ููู ovpn ุ ูุฃูู ุณูุชู ุฃุฎุฐ ุงูุดูุงุฏุฉ ูุงูููุชุงุญ ุงูุฎุงุต ูู ุงูุฑูุฒ ุงููููุฒ. <br><br>  ูุจุฏู ุงูุชูููู ุงููุงูู ููุนููู (ููููุงูุฐ) ููุง ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">client.ovpn</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <code>client <br> dev tun <br> proto tcp <br> sndbuf 0 <br> rcvbuf 0 <br> remote 78.47.37.247 22222 <br> resolv-retry infinite <br> nobind <br> persist-key <br> persist-tun <br> remote-cert-tls server <br> cipher AES-256-CBC <br> comp-lzo <br> setenv opt block-outside-dns <br> key-direction 1 <br> verb 3 <br> <br> pkcs11-providers "c://Windows//System32//rtPKCS11ECP.dll" <br> pkcs11-id 'Aktiv\x20Co\x2E/Rutoken\x20ECP/342b871d/Rutoken/01' <br> <br> -----BEGIN CERTIFICATE----- <br> {CERT_HERE} <br> -----END CERTIFICATE----- <br> <br> <br> &lt;tls-auth&gt; <br> # <br> # 2048 bit OpenVPN static key <br> # <br> -----BEGIN OpenVPN Static key V1----- <br> {KEY_HERE} <br> -----END OpenVPN Static key V1----- <br> &lt;/tls-auth&gt;</code> <br> </div></div><br>  ููุชูุจ ุนูู ุฃุณุงุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ููููุฉ ุฅุถุงูุฉ ูุตุงุฏูุฉ ุซูุงุฆูุฉ ุงูุนูุงูู ุฅูู ุชูููู OpenVPN ุจุงุณุชุฎุฏุงู ุงูุจุทุงูุงุช ุงูุฐููุฉ ูู ุฌุงูุจ ุงูุนููู</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"</a> <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุนููุงุก </h3><br><h4 style=";text-align:right;direction:rtl">  ููููุณ </h4><br>  ูุญุชูู Openvpn ุนูู ุฎุทุฃ ูููุน ุงููุณุชุฎุฏู ูู ุฅุฏุฎุงู ุฑูุฒ PIN ูู ุงูุฑูุฒ ุงููููุฒ ุฅุฐุง ุชู ุฅูุดุงุก ุงูุญุฒูุฉ ูุน ุฏุนู systemd.  ูุธุฑูุง ูุฃู systemd ูุงู ููุฌูุฏูุง ูู ูู ููุงู ูุคุฎุฑูุง ุ ูุชู ุชุฌููุน ุฌููุน ุงูุญุฒู ุงููุชููุฑุฉ ุจุงููุนู ูู ุงููุณุชูุฏุนุงุช ุจุฏุนููุง.  ูุญุชุงุฌ ุงูุนููุงุก ุนูู ูุธุงู Linux ุฅูู ุชุฌููุน ุงูุญุฒูุฉ ุจููุฑุฏูู.  ูููุง ููู ูุซุงู ููุชูููู ุงูุฐู ุนูู ูู ูู Arch Linux: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">./configure \ --prefix=/usr \ --sbindir=/usr/bin \ --enable-iproute2 \ --enable-pkcs11 \ --enable-plugins \ --enable-x509-alt-username</code> </pre><br>  ููููู ุงูุชุญูู ูู ุฃู openvpn ูุจูู ุนูู ุฃู ุจุฏูู systemd ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">openvpn --version | grep --color enable_systemd</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ูุงุณ ุงูุณุฑุงุฌ </h4><br>  ุชุญุช Mac OS ุ ููุฌุฏ ุนููู ูุงุญุฏ ูุฌุงูู - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Tunnelblink</a> . <br><br>  ูุง ูุนุฑู ููููุฉ ุฅุฏุฎุงู ุฑูุฒ ุงูุชุนุฑูู ุงูุดุฎุตู ูู ุฑูุฒ ูููุฒ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ.  ุชู ูุตู ุงูุฎุทุฃ ุนูู ุณุจูู ุงููุซุงู ููุง - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://groups.google.com/forum/#!topic/tunnelblick-discuss/f_Rp_2nV-x8</a> ุชุฌุงูุฒ ูู ุฎูุงู ุฅุทูุงู openvpn ูู ูุญุฏุฉ ุงูุชุญูู.  ูุฐุง ููุณ ููุงุฌุฆูุง ุ ูุธุฑูุง ูุฃู ุงูุนููู ุงูุฑุณูู ููุธุงู ุงูุชุดุบูู windows ูุง ูุนุฑู ูุฐุง ุฃูุถูุง. <br><br>  ุฃูุถูุง ุถูู ูุธุงู ุงูุชุดุบูู Mac OS (ุนูู ุนูุณ ุงูููุงูุฐ) ููุงู ุญุงุฌุฉ ุฅูู ุจุฑุงูุฌ ูุตูุฉ ุฅุถุงููุฉ ูุชูููู ุงูุดุจูุฉ.  ุฅุฐุง ููุช ุจุจุณุงุทุฉ ุจุชุดุบูู openvpn ูู ูุญุฏุฉ ุงูุชุญูู ุ ููู ูุนูู DNS (ุฑุจูุง ุดูุก ุขุฎุฑ ุ ุณูู ูุธูุฑ DNS ููุท). <br><br>  ูุญุชูู ุจุฑูุงูุฌ TunnelBlick ุนูู ุจุฑุงูุฌ ูุตูุฉ ูุชูููู ุงูุดุจูุฉ ุ ููุง ูุญุชุงุฌ ุฅูุง ุฅูู ุงูุงุชุตุงู ุจู ุนูุฏ ุฅูุดุงุก ุงูุงุชุตุงู ููุตูู.  ูุง ุชุญุชุงุฌ ุฅูู ุฅุถุงูุชู ุฅูู ุงูุชูููู ovpn: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">script-security 2 up <span class="hljs-string"><span class="hljs-string">"/Applications/Tunnelblick.app/Contents/Resources/client.up.tunnelblick.sh -9 -d -f -m -w -ptADGNWradsgnw"</span></span> down <span class="hljs-string"><span class="hljs-string">"/Applications/Tunnelblick.app/Contents/Resources/client.down.tunnelblick.sh -9 -d -f -m -w -ptADGNWradsgnw"</span></span></code> </pre> <br>  ูุซุงู ูุตู ูุจุฏุก ุชุดุบูู ุงุชุตุงู openvpn ุ ูุงูุฐู ูููู ูุถุนู ุนูู ุณุทุญ ุงูููุชุจ ูุฅุฏุฎุงูู ุจุงููุงูุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#!/bin/bash tunnelblick=/Applications/Tunnelblick.app/Contents/Resources/openvpn/openvpn-2.4.2-openssl-1.0.2k sudo $tunnelblick/openvpn --config $tunnelblick/user.ovpn</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ููุงูุฐ </h4><br>  ุชุญุช ุงูููุงูุฐ ุ ูุจุฏู ุฃู ูู ุดูุก ูุนูู.  ูุง ูุนุฑู ุงูุนููู ุงูุฑุณูู ููููุฉ ุฅุฏุฎุงู ุฑูุฒ ุงูุชุนุฑูู ุงูุดุฎุตู ูู ุงูุฑูุฒ ุงููููุฒ ุ ูุฅูู ูุฏูุฑ openvpn ุจุงููุฏ ูู ูุญุฏุฉ ุงูุชุญูู. <br><br>  ุงูุดูุก ุงูุฃูุซุฑ ุฃูููุฉ ูู ุฃู ุชูุนู ูู ุดูุก ูู ุชุญุช ุงููุณุคูู.  ูู ุจุชุดุบูู ุจุฑูุงูุฌ ุชุซุจูุช ุงูุนููู ููุณุคูู.  ูู ุจุชุดุบูู ูุญุทุฉ ูุจุฏุฃ ูููุง openvpn ุฃูุถูุง ุจุญููู ุงููุณุคูู ุ ูุฅูุง ููู ูููู ูุงุฏุฑูุง ุนูู ุงูุชุญูู ูู ูุงุฌูุฉ ุงูุดุจูุฉ. <br><br>  ุชุญุช Windows ุ ูุฌุจ ุชุณุฌูู ุงููุณุงุฑ ุฅูู ุงูููุชุจุฉ ููุนูู ูุน ุงูุฑููุฒ ุนุจุฑ ุฎุทูุท ูุงุฆูุฉ ูุฒุฏูุฌุฉ.  ููุทุจู ูุฐุง ุนูู ูู ูู ovpn config <code>--show-pkcs11-ids</code> ูู ุณุทุฑ ุงูุฃูุงูุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">pkcs11-providers <span class="hljs-string"><span class="hljs-string">"c://Windows//System32//rtPKCS11ECP.dll"</span></span> pkcs11-id <span class="hljs-string"><span class="hljs-string">'Aktiv\x20Co\x2E/Rutoken\x20ECP/342b871d/Rutoken/01'</span></span></code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433250/">https://habr.com/ru/post/ar433250/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433232/index.html">ุชูุดู Lyft ุนู ุฑุคูุชูุง ููุธุงู ุชูุงุนู ูููุดุงุฉ</a></li>
<li><a href="../ar433234/index.html">ูุทููุจ ูุฑุจูุฉ ูุซุงููุฉ. ุชุฃูุฏ ูู ุฅุฌุฑุงุก ูุญุต AI ูุชูููู ุงูุงุญุชุฑุงู ูุงูุฃุฎูุงู ุงูุญููุฏุฉ</a></li>
<li><a href="../ar433236/index.html">ูุนุชูุฏ ุฑุฆูุณ Google ุฃู ุงูุฎูู ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู "ูุจุฑุฑ ุชูุงููุง"</a></li>
<li><a href="../ar433242/index.html">ููุงุน ุณุงูุฉ</a></li>
<li><a href="../ar433248/index.html">ุชุญููู ุงูุทุจ ุงูุดุฑุนู ูู ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู OtterCTF ูุชูุฏูู ุฅุทุงุฑ ุงูุชููุจ</a></li>
<li><a href="../ar433252/index.html">ุนุงุฑุถุฉ ุฃุฒูุงุก ุนูู ุงููุฑูุญูุฉ ุงูุชูุฑุจูููุฉ ุงููุฌููุฉ ุงูููุฑุจุงุฆูุฉ</a></li>
<li><a href="../ar433254/index.html">ูุญู ููุท ูุญุงุฑุจ ุงูููุช ุ ูุฃูุชุ ุฃู ุงูุดุฑูุงุช ุงูุชู ุชุทูุฑ ุงูุฏูุงุก ุงูุฑุงุฆุน</a></li>
<li><a href="../ar433256/index.html">ุชุทููุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุน ุฑูุฑูุฉ</a></li>
<li><a href="../ar433258/index.html">ููููู ุดุฑุงุก ุงูููููุงุช ุงูุฅููุชุฑูููุฉ ูู ุฃูุฑูุจุง ุญุชู ูู ุนุทูุฉ. ุชุฌุฑุจุฉ ุงูุชุณูู ูู Mouser ูู ุจูุบุงุฑูุง</a></li>
<li><a href="../ar433260/index.html">ูุฑุงุกุฉ ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน: ููุงุฏ ุญูู ุงูุนูู ูุน PD ุ ููุฑุงุฌุนุงุช ูู ุงูุญุฏูุฏ ูู ูุฑูุฒ ุงูุจูุงูุงุช ู "ุงููุทุจุฎ" ูู ูุฒูุฏ IaaS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>