<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔅 🖥️ 🤘🏻 禁欲网：Go和JS跳蚤市场原型 ⬇️ 🕶️ 👩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大家好，我想分享我对现代Web应用程序的想法。 例如，考虑为漫画设计一个公告栏。 从某种意义上说，所讨论的产品是为极客和同情者设计的，可让您在界面中展现自由。 相反，在技术组件中，必须注意细节。 


 实际上，我对漫画一无所知，但我喜欢跳蚤市场，尤其是论坛形式的跳蚤市场，零时流行。 因此，以下结论...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>禁欲网：Go和JS跳蚤市场原型</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435908/"><p> <a href=""><img src="https://habrastorage.org/webt/jl/lq/qo/jllqqo3xn1mthylxxodb2-digfw.png" alt="屏幕截图"></a> </p><br><p> 大家好，我想分享我对现代Web应用程序的想法。 例如，考虑为漫画设计一个公告栏。 从某种意义上说，所讨论的产品是为极客和同情者设计的，可让您在界面中展现自由。 相反，在技术组件中，必须注意细节。 </p><br><p> 实际上，我对漫画一无所知，但我喜欢跳蚤市场，尤其是论坛形式的跳蚤市场，零时流行。 因此，以下结论所依据的假设（可能是错误的）仅是一种-与应用程序交互的主要类型是查看，其次是发布公告和讨论。 </p><br><p>我们的目标是创建一个简单的应用程序，而无需 <del> 技术知识 </del> 然而，多余的哨声与现代现实相符。 我要达到的主要要求是： </p><a name="habracut"></a><br><ol><li><p> 服务器端： </p><br><p>  a）执行存储，验证，发送用户数据到客户端的功能 <br>  b）以上操作消耗了可接受的资源量（时间，包括） <br>  c）保护应用程序和数据不受流行的攻击媒介的侵害 <br>  d）它具有用于第三方客户端和服务器间交互的简单API <br>  e）跨平台，易于部署 </p><br></li><li><p> 客户端： </p><br><p>  a）提供创建和使用内容的必要功能 <br>  b）该界面便于常规使用，任何操作的最小路径，每个屏幕的最大数据量 <br>  c）由于无法与服务器通信，因此在这种情况下所有可用功能均可用 <br>  d）界面显示状态和内容的当前版本，而无需重启和等待 <br>  d）重新启动应用程序不会影响其状态 <br>  f）如果可能，请重用DOM元素和JS代码 <br>  g）我们不会在运行时使用第三方库和框架 <br>  h）布局是可访问性，解析器等的语义。 <br>  i）使用URL和键盘可访问主要内容 </p><br></li></ol><br><p> 在我看来，合乎逻辑的要求以及大多数现代应用程序都在某种程度上满足了这些条件。 让我们看看发生了什么（在文章末尾链接到源和演示）。 </p><br><div class="spoiler">  <b class="spoiler_title">警告：</b> <div class="spoiler_text"><ul><li> 我想向演示中未经授权的图片的未知作者以及GösseG.，Prozorovskaya B. D.和出版社“佛罗伦萨Pavlenkov图书馆”道歉，以使用摘自“悉达多”作品的节选。 </li><li> 作者不是真正的程序员，如果您不知道自己在做什么，我不建议您使用此项目中使用的代码或技术。 </li><li> 我为代码的样式表示歉意；它本来可以更可读，更明显地编写，但这并不有趣。 正如他们所说，这是为灵魂和朋友设计的项目。 </li><li> 我也对识字率表示歉意，尤其是英文本。 年从哈特说话 </li><li> 提出的原型的性能在[铬70;  linux x86_64;  1366x768]，我将非常感谢其他平台和设备的用户收到错误消息。 </li><li> 这是一个原型，是一个可供讨论的主题-方法和原则，我要求对实施和美学方面的所有批评都应附有论据。 </li></ul></div></div><br><h2 id="server"> 伺服器 </h2><br><p> 服务器的语言是golang。 一种简单，快速的语言，带有出色的标准库和文档...有点烦人。 最初的选择落在elixir / erlang上，但是由于我已经（相对）知道go了，因此决定不使其复杂化（并且必需的软件包仅适用于go）。 </p><br><p> 不鼓励在go-community中使用Web框架（理所当然，这是值得承认的），我们选择了一个折衷方案，并使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">labstack / echo微框架</a> ，从而减少了例程的数量，在我看来，这并没有损失太多性能。 </p><br><p> 我们使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">tidwall / buntdb</a>作为数据库。 首先，内置解决方案更加方便并降低了管理费用，其次，内存+键/值- <del> 时尚的 </del> 快速且不需要缓存。 我们以JSON存储并提供数据，仅在更改时进行验证。 </p><br><p> 在第二代i3上，内置记录器会显示不同请求的执行时间，范围从0.5到10ms。 在同一台计算机上运行wrk也会显示出满足我们目的的足够结果： </p><br><pre><code class="plaintext hljs">➜ comico git:(master) wrk -t2 -c500 -d60s http://localhost:9001/pub/mtimes Running 1m test @ http://localhost:9001/pub/mtimes 2 threads and 500 connections Thread Stats Avg Stdev Max +/- Stdev Latency 20.74ms 16.68ms 236.16ms 72.69% Req/Sec 13.19k 627.43 15.62k 73.58% 1575522 requests in 1.00m, 449.26MB read Requests/sec: 26231.85 Transfer/sec: 7.48MB</code> </pre> <br><pre> <code class="plaintext hljs">➜ comico git:(master) wrk -t2 -c500 -d60s http://localhost:9001/pub/goods Running 1m test @ http://localhost:9001/pub/goods 2 threads and 500 connections Thread Stats Avg Stdev Max +/- Stdev Latency 61.79ms 65.96ms 643.73ms 86.48% Req/Sec 5.26k 705.24 7.88k 70.31% 628215 requests in 1.00m, 8.44GB read Requests/sec: 10454.44 Transfer/sec: 143.89MB</code> </pre> <br><h3 id="struktura-proekta"> 项目结构 </h3><br><p>  <u>comico /模型</u>包分为三个文件： <br>  model.go-包含数据类型和一般功能的描述：创建/更新（buntdb不区分这些操作，我们手动检查记录的存在），验证，删除，获取一条记录和获取列表； <br>  rules.go-包含针对特定类型和日志记录功能的验证规则； <br>  files.go-处理图像。 <br>  Mtimes类型将有关剩余类型的最后更改的数据存储在数据库中，从而通知客户端哪些数据已更改。 </p><br><p>  <u>comico / bd</u>软件包包含用于与数据库交互的通用功能：创建，删除，选择等。Buntdb将所有更改以文本格式保存到文件中（在本例中为每秒一次），这在某些情况下很方便。  db文件未编辑，如果事务成功，更改将添加到末尾。 我所有破坏数据完整性的尝试均未成功，在最坏的情况下，最后一秒钟的更改都丢失了。 <br> 在我们的实现中，每种类型都对应于一个单独文件中的单独数据库（日志仅存储在内存中，并且在重新启动后重置为零）。 这主要是由于备份和管理的便利，还有一个小优点-用于编辑的开放式事务仅阻止对一种类型数据的访问。 <br> 可以使用另一个数据库（例如SQL）轻松地用类似的软件包替换此软件包。 为此，只需实现以下功能： </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Exist</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Insert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key, val </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, pattern </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(str </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadOne</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(str </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Renew</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(err error, newId </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span></code> </pre> <br><p>  <u>comico / cnst软件包</u>包含所有软件包中必不可少的常量（数据类型，操作类型，用户类型）。 此外，此软件包还包含所有人类可读的消息，我们的服务器将使用这些消息来响应外界。 </p><br><p>  <u>漫画/服务器</u>软件包包含路由信息。 而且，仅配置了几行（感谢Echo开发人员），使用JWT，CORS，CSP标头，记录器，静态分发，gzip，ACME自动证书等的授权。 </p><br><h3 id="tochki-vhoda-api">  API入口点 </h3><br><table><thead><tr><th> 网址 </th><th> 资料 </th><th> 内容描述 </th></tr></thead><tbody><tr><td> 获取/发布/（商品|帖子|用户| cmnts |文件） </td><td>  -- </td><td> 获取一系列相关的公告，帖子，用户，评论，文件 </td></tr><tr><td> 获取/发布/ mtimes </td><td>  -- </td><td> 获取每种数据类型的最后更改时间 </td></tr><tr><td> 发布/发布/登录 </td><td>  {id *：登录名，通过*：密码} </td><td> 返回JWT令牌及其持续时间 </td></tr><tr><td> 发布/发布/通过 </td><td>  {id *，通过*} </td><td> 如果数据正确，则创建一个新用户 </td></tr><tr><td> 放/ api /通过 </td><td>  {id *，通过*} </td><td> 密码更新 </td></tr><tr><td> 张贴|放/ api /商品 </td><td>  {id *，auth *，title *，类型*，price *，text *，图片：[]，表格：{key：value}} </td><td> 制作/更新广告 </td></tr><tr><td> 发布| put / api / posts </td><td>  {id *，auth *，title *，type *，text *} </td><td> 创建/更新论坛帖子 </td></tr><tr><td> 发布|放置/ api /用户 </td><td>  {id *，标题，类型，状态，抄写员：[]，忽略：[]，表格：{键：值}} </td><td> 创建/更新用户 </td></tr><tr><td> 发布/ api / cmnts </td><td>  {id *，auth *，所有者*，键入*，收件人，文本*} </td><td> 评论创建 </td></tr><tr><td> 删除/ api /（商品|帖子|用户| cmnts）/ [id] </td><td>  -- </td><td> 删除ID为的条目 </td></tr><tr><td> 获取/ API /活动 </td><td>  -- </td><td> 更新当前用户传入注释的上次阅读时间 </td></tr><tr><td> 获取/ api /（订阅|忽略）/ [标签] </td><td>  -- </td><td> 向订阅列表中的用户添加或删除（如果有）标签/忽略 </td></tr><tr><td> 帖子/ api /上传/（商品|用户） </td><td> 多部分（名称，文件） </td><td> 上传照片广告/用户头像 </td></tr></tbody></table><br><p>  *-必填项 <br>  api-需要授权，pub-否 </p><br><p> 对于与上述请求不匹配的get请求，服务器将在目录中查找静态文件（例如/ img / *-图像，/ index.html-客户端）。 <br> 如果成功，任何api点都将返回200响应代码，对于错误将返回400或404，并在必要时返回一条短消息。 <br> 访问权限很简单：创建条目可用于授权用户，编辑作者和主持人，管理员可以编辑和任命主持人。 <br> 该API配备了最简单的防破坏功能：将操作以及用户ID和IP一起记录下来，并且在频繁访问的情况下，返回错误，要求您稍等（对密码猜测很有用）。 </p><br><h2 id="klient"> 顾客 </h2><br><p> 我喜欢反应式Web'a的概念，我认为大多数现代网站/应用程序应在该概念的框架内完成，或者完全静态地完成。 另一方面，一个拥有数百万字节JS代码的简单站点只能令人沮丧。 我认为，这个问题（不仅是问题）可以由斯维尔特解决。 该框架（或用于构造反应式接口的语言）在必要的功能上并不逊于Vue，但具有不可否认的优势-组件被编译为Vanilla JS，既减小了包的大小，又减小了虚拟机上的负载（bundle.min.js.gz按照今天的标准，我们的跳蚤市场很小，只有24KB）。 详细信息可以在官方<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档中</a>找到。 </p><br><p> 我们为跳蚤市场的客户选择了SvelteJS跳蚤市场，我们希望Rich Harris一切顺利，并希望项目进一步发展！ </p><br><p>  PS我不想得罪任何人。 我确信每个专家和每个项目都有自己的工具。 </p><br><h3 id="klient--dannye"> 客户/数据 </h3><br><h4 id="url"> 网址 </h4><br><p> 我们用于导航。 我们将不会模拟多页文档；相反，我们使用具有查询参数的哈希页。 对于过渡，可以使用不带js的常规&lt;a&gt;。 </p><br><p> 这些部分对应于以下数据类型： <u>/＃goods</u> ， <u>/＃posts</u> ， <u>/＃users</u> 。 <br> 参数<u>：？Id =</u> <em>record_id</em> <u>，？Page =</u> <em>page_number</em> <u>，？Search =</u> <em>search_query</em> 。 </p><br><p> 一些例子： </p><br><ul><li>  <u>/＃posts？id = 1542309643＆页面= 999＆搜索= {auth：anon}</u> -部分<em>帖子</em> ，post id- <em>1542309643</em> ，评论页面<em>-999</em> ，搜索查询- <em>{auth：anon}</em> </li><li>  <u>/＃goods？页面= 2＆搜索= siddhartha-</u>节<em>商品</em> ，节页面<em>-2</em> ，搜索查询<em>-siddhartha</em> </li><li>  <u>/＃goods？search = wer {key：value} t</u>截面<em>商品</em> ，搜索查询-包括搜索广告标题或文本中的<em>wert</em>子字符串以及广告表格部分的<em>key</em>属性中的子字符串<em>值</em> </li><li>  <u>/＃goods？搜索= {型号：100，显示：256}</u> -我认为类推在这里很清楚 </li></ul><br><p> 我们的实现中的解析和URL生成功能如下所示： </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'hashchange'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hash = location.hash.slice(<span class="hljs-number"><span class="hljs-number">1</span></span>).split(<span class="hljs-string"><span class="hljs-string">'?'</span></span>), result = {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!hash[<span class="hljs-number"><span class="hljs-number">1</span></span>]) hash[<span class="hljs-number"><span class="hljs-number">1</span></span>].split(<span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>).forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> { str = str.split(<span class="hljs-string"><span class="hljs-string">'='</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!str[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp;&amp; !!str[<span class="hljs-number"><span class="hljs-number">1</span></span>]) result[<span class="hljs-built_in"><span class="hljs-built_in">decodeURI</span></span>(str[<span class="hljs-number"><span class="hljs-number">0</span></span>]).toLowerCase()] = <span class="hljs-built_in"><span class="hljs-built_in">decodeURI</span></span>(str[<span class="hljs-number"><span class="hljs-number">1</span></span>]).toLowerCase() }) result.type = hash[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-string"><span class="hljs-string">'goods'</span></span> store.set({ <span class="hljs-attr"><span class="hljs-attr">hash</span></span>: result }) }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goto</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ type, id, page, search }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { hash } = store.get(), args = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>], query = [] <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'page'</span></span>, <span class="hljs-string"><span class="hljs-string">'search'</span></span>).forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = args[key] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? args[key] : hash[key] || <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) query.push(key + <span class="hljs-string"><span class="hljs-string">'='</span></span> + value) }) location.hash = (type || hash.type || <span class="hljs-string"><span class="hljs-string">'goods'</span></span>) + (!!query.length ? <span class="hljs-string"><span class="hljs-string">'?'</span></span> + query.join(<span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>) : <span class="hljs-string"><span class="hljs-string">''</span></span>) }</code> </pre> <br><h4 id="api">  API </h4><br><p> 要与服务器交换数据，我们将使用访存API。 要以较短的间隔下载更新的记录，我们向<em>/ pub / mtimes</em>发出请求，如果任何类型的上次更改时间与本地时间不同，我们将加载此类型的列表。 是的，可以通过SSE或WebSockets和增量加载来实现更新通知，但是在这种情况下，我们可以不用它。 我们得到了什么： </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GET</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(location.origin + <span class="hljs-string"><span class="hljs-string">'/pub/'</span></span> + type) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">ok</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type === <span class="hljs-string"><span class="hljs-string">'mtimes'</span></span>) store.set({ <span class="hljs-attr"><span class="hljs-attr">online</span></span>: response.ok }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.ok ? <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() : [] } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type, mtimes, updates = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> local = store.get()._mtimes, net = mtimes || <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GET(<span class="hljs-string"><span class="hljs-string">'mtimes'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!net[type] || local[type] === net[type]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = updates[<span class="hljs-string"><span class="hljs-string">'_'</span></span> + type] = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GET(type) local[type] = net[type]; updates._mtimes = local <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!value &amp;&amp; !!value.sort) store.set(updates) } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkUpdates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> checkUpdates(), <span class="hljs-number"><span class="hljs-number">30000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mtimes = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> store.GET(<span class="hljs-string"><span class="hljs-string">'mtimes'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-string"><span class="hljs-string">'users'</span></span>, <span class="hljs-string"><span class="hljs-string">'goods'</span></span>, <span class="hljs-string"><span class="hljs-string">'posts'</span></span>, <span class="hljs-string"><span class="hljs-string">'cmnts'</span></span>, <span class="hljs-string"><span class="hljs-string">'files'</span></span>) .forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function"> =&gt;</span></span> checkUpdate(type, mtimes)) }</code> </pre> <br><p> 对于过滤和分页，我们基于导航数据使用Svelte的计算属性。 计算值的方向为： <strong>项目</strong> （来自服务器的记录数组）=&gt; <strong>ignoreItems</strong> （基于当前用户的忽略列表过滤的记录）=&gt; <strong>scribedItems</strong> （如果已激活，则根据订阅列表过滤记录）=&gt; <strong>curItem</strong>和<strong>curItems</strong> （计算当前记录） =&gt; <strong>filteredItems</strong> （根据搜索查询过滤记录，如果只有一条记录，则过滤评论）=&gt; <strong>maxPage</strong> （基于每页12条记录/评论计算页面数）=&gt; <strong>pagedItem</strong> （返回带有 根据当前页码发布/评论）。 </p><br><p> 注释和图像（ <strong>comment</strong>和<strong>_images</strong> ）是分别计算的，并按类型和所有者记录分组。 </p><br><p> 计算会自动进行，并且只有在关联数据发生更改时，中间数据才会一直存储在内存中。 在这方面，我们得出不愉快的结论-对于大量信息和/或其频繁更新，可能会花费大量资源。 </p><br><h4 id="cache"> 快取 </h4><br><p> 根据制作脱机应用程序的决定，我们在localStorage中实现记录的存储以及状态的某些方面，在CacheStorage中实现图像文件的存储。 使用localStorage非常简单，我们同意前缀为“ _”的属性会在更改后重新引导时自动保存和恢复。 然后我们的解决方案可能看起来像这样： </p><br><pre> <code class="javascript hljs">store.on(<span class="hljs-string"><span class="hljs-string">'state'</span></span>, ({ changed, current }) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(changed).forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prop</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!prop.indexOf(<span class="hljs-string"><span class="hljs-string">'_'</span></span>)) localStorage.setItem(prop, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(current[prop])) }) }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; localStorage.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> prop = localStorage.key(i) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(localStorage.getItem(prop) || <span class="hljs-string"><span class="hljs-string">'null'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!value &amp;&amp; !prop.indexOf(<span class="hljs-string"><span class="hljs-string">'_'</span></span>)) state[prop] = value } store.set(state) }</code> </pre> <br><p> 文件要复杂一些。 首先，我们将使用来自服务器的所有相关文件（带有创建时间）的列表。 更新此列表时，我们将其与旧值进行比较，将新文件放入CacheStorage，然后从其中删除过时的文件： </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cacheImages</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newFiles</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldFiles = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'_files'</span></span>) || <span class="hljs-string"><span class="hljs-string">'[]'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cache = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> caches.open(<span class="hljs-string"><span class="hljs-string">'comico'</span></span>) oldFiles.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!~newFiles.indexOf(file)) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [ id, type ] = file.split(<span class="hljs-string"><span class="hljs-string">':'</span></span>) cache.delete(<span class="hljs-string"><span class="hljs-string">`/img/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${type}</span></span></span><span class="hljs-string">_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">_sm.jpg`</span></span>) }}) newFiles.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!~oldFiles.indexOf(file)) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [ id, type ] = file.split(<span class="hljs-string"><span class="hljs-string">':'</span></span>), src = <span class="hljs-string"><span class="hljs-string">`/img/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${type}</span></span></span><span class="hljs-string">_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">_sm.jpg`</span></span> cache.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request(src, { <span class="hljs-attr"><span class="hljs-attr">cache</span></span>: <span class="hljs-string"><span class="hljs-string">'no-cache'</span></span> })) }}) }</code> </pre> <br><p> 然后，您需要重新定义获取行为，以便无需连接服务器即可从CacheStorage中获取文件。 为此，您必须使用ServiceWorker。 同时，我们将配置其他要缓存的文件，以便在服务器外部进行操作： </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CACHE = <span class="hljs-string"><span class="hljs-string">'comico'</span></span>, FILES = [ <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-string"><span class="hljs-string">'/bundle.css'</span></span>, <span class="hljs-string"><span class="hljs-string">'/bundle.js'</span></span> ] self.addEventListener(<span class="hljs-string"><span class="hljs-string">'install'</span></span>, (e) =&gt; { e.waitUntil(caches.open(CACHE).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cache</span></span></span><span class="hljs-function"> =&gt;</span></span> cache.addAll(FILES)) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> self.skipWaiting())) }) self.addEventListener(<span class="hljs-string"><span class="hljs-string">'fetch'</span></span>, (e) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> r = e.request <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.method !== <span class="hljs-string"><span class="hljs-string">'GET'</span></span> || !!~r.url.indexOf(<span class="hljs-string"><span class="hljs-string">'/pub/'</span></span>) || !!~r.url.indexOf(<span class="hljs-string"><span class="hljs-string">'/api/'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!~r.url.lastIndexOf(<span class="hljs-string"><span class="hljs-string">'_sm.jpg'</span></span>) &amp;&amp; e.request.cache !== <span class="hljs-string"><span class="hljs-string">'no-cache'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e.respondWith(fromCache(r)) e.respondWith(toCache(r)) }) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> caches.open(CACHE)).match(request) || <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, { <span class="hljs-attr"><span class="hljs-attr">status</span></span>: <span class="hljs-number"><span class="hljs-number">404</span></span> }) } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(request).catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> fromCache(request)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!!response &amp;&amp; response.ok) (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> caches.open(CACHE)).put(request, response.clone()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response }</code> </pre> <br><p> 它看起来有些笨拙，但是可以执行其功能。 </p><br><h3 id="klient--interfeys"> 客户端/界面 </h3><br><p> 组件结构： <br>  index.html |  main.js <br>  == <u>header.html-</u>包含徽标，状态栏，主菜单，下部导航菜单，评论<u>提交</u>表单 <br>  == <u>aside.html-</u>是所有模式组件的容器 <br>  ==== <u>goodForm.html-</u>用于添加和修改广告的表单 <br>  ==== <u>userForm.html-</u>编辑当前用户的表单 <br>  ====== <u>tableForm.html-</u>用于输入表格数据的表单的一部分 <br>  ==== <u>postForm.html-</u>论坛帖子的表单 <br>  ==== <u>login.html-</u>登录/注册表格 <br>  ==== <u>activity.html-</u>显示发给当前用户的评论 <br>  ==== <u>goodImage.html-</u>查看主要和其他照片广告 <br>  == <u>main.html-</u>主要内容的容器 <br>  ==== <u>goods.html-</u>列表或单张公告卡 <br>  ==== <u>users.html-</u>用户相同 <br>  ==== <u>posts.html-</u>我认为这很清楚 <br>  ==== <u>cmnts.html-</u>当前<u>帖子</u>的评论列表 <br>  ====== <u>cmntsPager.html-</u>注释分页 </p><br><ul><li> 在每个组件中，我们都尽量减少html标签的数量。 </li><li> 我们仅将类用作状态指示符。 </li><li> 我们采用了与商店相似的功能（可以通过在组件上添加前缀“ $”来直接从组件中使用精简的商店属性和方法）。 </li><li> 大多数功能都希望发生用户事件或某些属性发生变化，操纵状态数据，并将其工作结果保存回状态并结束。 因此，实现了代码的小的一致性和可扩展性。 </li><li> 对于过渡和其他UI事件的明显速度，我们尽可能地将对在后台发生的数据的操作和与接口相关联的操作分开，这些操作又使用当前的计算结果，并在必要时进行重建，其余的将由框架执行。 </li><li> 为了防止输入丢失，将填写的表单数据存储在localStorage中。 </li><li> 在所有组件中，我们使用不可变模式，在这种模式下，仅当接收到新链接时才考虑更改属性对象，而不管字段中的更改如何，因此尽管代码量略有增加，但仍可以稍微加快我们的应用程序的速度。 </li></ul><br><h3 id="klient--upravlenie"> 客户/管理 </h3><br><p> 要使用键盘进行控制，我们使用以下组合： <br>  <strong>Alt + s</strong> / <strong>Alt +</strong> a-向前/向后切换记录页面，对于一个记录，则切换注释页面。 <br>  <strong>Alt + w</strong> / <strong>Alt + q-</strong>移至下一个/上一个记录（如果有），在列表模式下工作，单个记录和图像视图 <br>  <strong>Alt + x</strong> / <strong>Alt + z-</strong>向下/向上滚动页面。 在图像视图中，向前/向后切换图像 <br>  <strong>退出</strong> -关闭模式窗口，如果已打开，则返回列表，如果单个条目已打开，则以列表模式取消搜索查询 <br>  <strong>Alt + c-</strong>取决于当前模式，专注于搜索或注释字段 <br>  <strong>Alt + v-</strong>启用/禁用单个广告的照片查看模式 <br>  <strong>Alt + r-</strong>打开/关闭授权用户的传入评论列表 <br>  <strong>Alt + t-</strong>切换浅色/深色主题 <br>  <strong>Alt + g-</strong>广告列表 <br>  <strong>Alt + u-</strong>用户 <br>  <strong>Alt + P-</strong>论坛 <br> 我知道在许多浏览器中，这些组合都是由浏览器本身使用的，但是对于我的Chrome浏览器，我无法提供更方便的方法。 我会很高兴您的建议。 </p><br><p> 除了键盘之外，您当然可以使用浏览器控制台。 例如， <em>store.goBack（）</em> ， <em>store.nextPage（）</em> ， <em>store.prevPage（）</em> ， <em>store.nextItem（）</em> ， <em>store.prevItem（）</em> ， <em>store.search（stringValue）</em> ， <em>store.checkUpdate（'goods'||' users'||'posts'||'files'||'cmnts'）</em> -顾名思义；  <em>store.get（）。注释</em>和<em>store.get（）._图像</em> -返回分组的文件和注释；  <em>store.get（）。ignoreItems</em>和<em>store.get（）。scribedItems</em>是您忽略和跟踪的记录列表。 所有中间数据和计算数据的完整列表可从<em>store.get（）获得</em> 。 我认为没有人会很需要这样做，但是例如，从控制台筛选用户并删除记录对我来说似乎很方便。 </p><br><h2 id="zaklyuchenie"> 结论 </h2><br><p> 您可以在这里结束对项目的了解；您可以在源代码中找到更多详细信息。 结果，我们得到了一个相当快速而紧凑的应用程序，在大多数验证器，安全性，速度，可用性等检查器中，它都显示出良好的结果，而无需进行有针对性的优化。 <br> 我想知道社区的意见，组织原型中使用的应用程序的方法是多么合理，可能会有什么陷阱，您将以根本不同的方式实现什么？ <br> 源代码，示例安装说明和演示<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> （请 <del> 破坏 </del> 在《刑法》的框架内进行测试）。 </p><br><p> 后记。 结论是一点点商机。 告诉我，达到这样的水平，真的有可能开始赚钱编程吗？ 如果不是，首先要寻找的是，如果是，请告诉我他们现在在哪里寻找相似堆栈上的有趣作品。 谢谢啦 </p><br><p> 后记。 有关金钱和工作的更多信息。 您如何看待这个想法：假设一个人愿意为他准备一个有趣的项目以赚取任何薪水，但是，如果支付的价格大大低于市场，雇主的竞争对手将公开提供有关任务及其支付的数据（可访问性和评估绩效质量的代码是可取的）可以为执行任务提供很多资金（如果更高）-许多执行者将能够以较低的价格提供服务。 这样的方案在某些情况下会更好地公平地平衡市场（IT）吗？ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435908/">https://habr.com/ru/post/zh-CN435908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435898/index.html">在NALSD面试中应该考虑的问题</a></li>
<li><a href="../zh-CN435900/index.html">封装它</a></li>
<li><a href="../zh-CN435902/index.html">如果供应商不允许，您不能只接受并编写SELECT ...，但是我们会写</a></li>
<li><a href="../zh-CN435904/index.html">AI将大脑活动转化为语音</a></li>
<li><a href="../zh-CN435906/index.html">Pacemaker群集存储+ DRBD（双主）+ ctdb</a></li>
<li><a href="../zh-CN435910/index.html">为什么BSD输掉了与GNU / Linux的战斗？</a></li>
<li><a href="../zh-CN435912/index.html">开发现代界面的主要问题</a></li>
<li><a href="../zh-CN435914/index.html">使用Docker打包ASP.NET Core应用程序</a></li>
<li><a href="../zh-CN435916/index.html">入侵VK，两因素身份验证将无法保存</a></li>
<li><a href="../zh-CN435920/index.html">开发人员手册：DDD食谱（第4部分，结构）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>