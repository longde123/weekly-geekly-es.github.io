<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìõ ‚úíÔ∏è üë©üèæ‚Äçü§ù‚Äçüë©üèΩ Por qu√© los "gr√°ficos de tr√°fico" mienten üëßüèΩ üåø ‚óºÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Estar involucrado en la protecci√≥n contra ataques DDoS  Se lleva al sitio del cliente para llevar a cabo pruebas de carga, pruebas de defensa y ayuda ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Por qu√© los "gr√°ficos de tr√°fico" mienten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441694/"> Estar involucrado en la protecci√≥n contra ataques DDoS <img src="https://habrastorage.org/webt/gk/gq/zh/gkgqzhzw83sguowwwuo2dx9sdfk.png" alt="Gr√°ficos diferentes basados ‚Äã‚Äãen los mismos datos." width="350" align="right">  Se lleva al sitio del cliente para llevar a cabo pruebas de carga, pruebas de defensa y ayuda para repeler ataques.  A menudo observa una situaci√≥n en la que los gr√°ficos en diferentes sistemas difieren en el mismo tr√°fico.  Una breve explicaci√≥n de "pensar diferente" no inspira confianza.  Por lo tanto, describi√≥ las razones de un art√≠culo separado.  Este art√≠culo ser√° √∫til para los ingenieros principiantes del funcionamiento de la red y para aquellos que tienen que lidiar con los horarios. <br><br>  Los motivos de la discrepancia de los testimonios se dividieron en tres grupos: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">1. Contando</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2. Recogida y almacenamiento.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3. Pantalla</a> <br><a name="habracut"></a><br><a name="1"></a><h2>  <font color="#38a5d3">1. Contando</font> </h2><br>  Comenzar√© con la raz√≥n principal de la discrepancia y que a menudo se pasa por alto. <br><br>  1. Los ingenieros a menudo creen que el tama√±o m√≠nimo de "paquete" es de 64 Bytes. <br>  2. El equipo de red considera de manera diferente la cantidad de informaci√≥n transmitida. <br><br><img src="https://habrastorage.org/webt/fz/td/yt/fztdyt2phekpdkjlhpxcjnic84i.png">  Las fuentes de error y las respuestas est√°n en esta imagen. <br><br><a name="2"></a><h3>  <font color="#38a5d3">1.1 RTFM</font> </h3><br>  Recuperar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estructura de encabezado de Ethernet</a> <br><br><img src="https://habrastorage.org/webt/yy/s0/qi/yys0qi7tlv5y9mhtdsgwvdtjnh8.png"><br><br>  Por ejemplo, haremos c√°lculos para 10 GbE.  A trav√©s de una interfaz de 10 GbE, pasan un m√°ximo de <b>1,000,000,000 de</b> bits (10 ^ 10). <br><br>  Convierta el tama√±o de los encabezados de octetos a bits <br><table><tbody><tr><th></th><th>  bytes </th><th>  pedacitos </th></tr><tr><td>  Tama√±o de encabezado L1 </td><td>  20 </td><td>  160 </td></tr><tr><td>  Tama√±o del encabezado MAC L2 </td><td>  14 </td><td>  112 </td></tr><tr><td>  Tama√±o L2 FCS </td><td>  4 4 </td><td>  32 </td></tr><tr><td>  Tama√±o de VLAN L2 </td><td>  4 4 </td><td>  32 </td></tr><tr><td>  Carga √∫til min </td><td>  46 </td><td>  368 </td></tr><tr><td>  Carga √∫til m√°xima </td><td>  1500 </td><td>  12000 </td></tr><tr><td>  <b>Total</b> </td></tr><tr><td>  Carga √∫til m√≠nima sin VLAN </td><td>  <b>84</b> </td><td>  <b>672</b> </td></tr><tr><td>  Carga √∫til m√≠nima con VLAN </td><td>  88 </td><td>  704 </td></tr><tr><td>  Carga √∫til m√°xima sin VLAN </td><td>  <b>1538</b> </td><td>  <b>12304</b> </td></tr><tr><td>  Carga √∫til m√°xima con VLAN </td><td>  1542 </td><td>  12336 </td></tr></tbody></table><br>  * El uso de tecnolog√≠as de superposici√≥n en la red de transporte afecta el tama√±o inicial de la <abbr title="Unidad de datos de protocolo">PDU</abbr> , lo que reduce el pps m√°ximo. <br>  ** Por ejemplo tom√≥ VLAN.  El procesamiento de tramas con ID de vlan en las interfaces de red puede variar.  Algunos aumentan la MTU, otros disminuyen el tama√±o m√°ximo de carga √∫til permitido. <br><br>  Calculamos la velocidad m√°xima y m√≠nima en la <abbr title="Unidad de datos de protocolo">PDU</abbr> por segundo con la utilizaci√≥n completa de la interfaz (velocidad de cable) <br><br><table><tbody><tr><td>  Max pps </td><td>  <b>14880952</b> .38 </td></tr><tr><td>  Max pps con VLAN </td><td>  14204545.45 </td></tr><tr><td>  Min pps </td><td>  <b>812743</b> .8231 </td></tr><tr><td>  Min pps con VLAN </td><td>  810635.5383 </td></tr></tbody></table><br><br>  Es decir  a trav√©s de la interfaz de 10 GbE, el pase m√°ximo es de ~ 14.88 Mpps.  Para facilidad de recordar, lo llamamos zigapack. <br><br>  Tambi√©n llamo la atenci√≥n sobre el hecho de que los pps m√°ximos y los pps m√≠nimos difieren en m√°s de <b>18 veces</b> .  Por esta raz√≥n, al considerar las soluciones antiDDoS, debe prestar atenci√≥n al rendimiento en Mpps.  A menudo, los proveedores afirman el rendimiento en Gbps, silencioso en los paquetes.  La descripci√≥n de los m√©todos para evaluar el rendimiento de los sistemas de protecci√≥n es un tema para un art√≠culo grande separado. <br><br><a name="3"></a><h3>  <font color="#38a5d3">1.2 Caracter√≠sticas del recuento de tama√±o de PDU</font> </h3><br><img src="https://habrastorage.org/webt/fz/td/yt/fztdyt2phekpdkjlhpxcjnic84i.png"><br>  El equipo de red puede leer el tama√±o de la <abbr title="Unidad de datos de protocolo">PDU</abbr> en diferentes niveles y excluir el conteo de campos.  Conjuntos de campos frecuentes para contar: <br><br><ul><li>  Datos L2 o paquete de IP len </li><li>  Datos L2 + Encabezado MAC </li><li>  Datos L2 + Encabezado MAC + <abbr title="Secuencia de verificaci√≥n de cuadros">FCS</abbr> (suma de verificaci√≥n CRC) </li></ul><br>  Ahora calculamos las lecturas en el gr√°fico cuando atacamos TCP SYN Flood en velocidad de cable sin usar vlan. <br><br><table><tbody><tr><th rowspan="2"></th><th rowspan="2">  Tama√±o de la PDU <br>  (bytes) </th><th colspan="2">  Multiplicador de Gbps </th></tr><tr><th>  10 <sup>9</sup> </th><th>  2 <sup>30</sup> </th></tr><tr><td>  Pps sin vlan = 14880952.38 </td><td></td><td></td><td></td></tr><tr><td>  L1 </td><td>  84 </td><td>  10 </td><td>  9.313225746 </td></tr><tr><td>  L2 </td><td>  64 </td><td>  <b>7.6190</b> 47619 </td><td>  7.095791045 </td></tr><tr><td>  L2 sin FCS </td><td>  60 60 </td><td>  <b>7.1428</b> 57143 </td><td>  6.652304104 </td></tr><tr><td>  Datos L2 (IP + TCP) </td><td>  40 </td><td>  4.761904762 </td><td>  4.434869403 </td></tr><tr><td>  Pps w vlan = 14204545.45 </td><td></td><td></td><td></td></tr><tr><td>  L1 </td><td>  88 </td><td>  10 </td><td>  9.313225746 </td></tr><tr><td>  L2 </td><td>  68 </td><td>  7.727272727 </td><td>  7.196583531 </td></tr><tr><td>  L2 sin FCS </td><td>  64 </td><td>  7.272727273 </td><td>  6.773255088 </td></tr><tr><td>  Datos L2 (IP + TCP) </td><td>  40 </td><td>  4.545454545 </td><td>  4.23328443 </td></tr></tbody></table><br>  Entonces, con la utilizaci√≥n completa de la interfaz de 10 GbE en el gr√°fico, puede observar una velocidad de 4.43 Gbps. <br><br>  Por lo tanto, al comparar valores de velocidad en diferentes sistemas, debe comprender c√≥mo se considera el tama√±o de la PDU.  Para simplificar la comparaci√≥n, hicimos una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">calculadora</a> para nosotros mismos, que muestra la velocidad al contar diferentes encabezados. <br><br>  Los siguientes otros dos grupos de causas afectan el suavizado de picos y son aplicables a todos los gr√°ficos de velocidad. <br><br><a name="4"></a><h2>  <font color="#38a5d3">2. Recogida y almacenamiento.</font> </h2><br><a name="5"></a><h3>  <font color="#38a5d3">2.1 Contador de frecuencia de sondeo</font> </h3><br>  Por lo general, los contadores sondeados muestran el valor absoluto de los bytes y paquetes procesados.  Para mostrar la velocidad, necesita calcular la derivada. <br><br>  La precisi√≥n del gr√°fico depende en gran medida de la frecuencia de sondeo del contador.  Cuanto menos frecuente, mayor es el promedio.  Por ejemplo, es habitual que los operadores tomen valores cada cinco minutos.  Por lo tanto, con los ataques Pulse Wave DDoS, los perfiles de gr√°ficos en el sistema de monitoreo y el sistema de filtrado ser√°n muy diferentes. <br><br><a name="6"></a><h3>  <font color="#38a5d3">2.2 Consolidaci√≥n de datos (pol√≠tica de retenci√≥n)</font> </h3><br>  A menudo, el enfoque de base de datos c√≠clica (rrd) se usa para almacenar valores de contador.  Para ahorrar recursos, los datos de diferentes per√≠odos se almacenan con diferente precisi√≥n.  Cuanto m√°s avanzado sea el pasado, cuanto m√°s escasos sean los valores, mayor ser√° el promedio. <br><br>  Los diferentes sistemas pueden tener diferentes pol√≠ticas de retenci√≥n, por lo tanto, observando retrospectivamente los gr√°ficos, puede observar diferentes valores. <br><br><a name="7"></a><h2>  <font color="#38a5d3">3. Pantalla</font> </h2><br><a name="8"></a><h3>  <font color="#38a5d3">3.1 N√∫mero de puntos en el gr√°fico</font> </h3><br>  Por lo general, en el gr√°fico hay un l√≠mite en el n√∫mero de puntos mostrados.  Si hay m√°s puntos durante el per√≠odo solicitado, cuando se muestran los puntos se consolidan.  Muy a menudo, los puntos vecinos se consolidan en uno con un valor promedio.  Este promedio suaviza los picos. <br><br>  Ejemplo ilustrativo: <br><br><img src="https://habrastorage.org/webt/lm/ku/-v/lmku-vsnnsqaayqo8fa-y-pobj0.gif"><br><br><a name="9"></a><h3>  <font color="#38a5d3">3.2 consolas binarias</font> </h3><br>  Las herramientas de dibujo de gr√°ficos agregan una discrepancia adicional en las lecturas.  Para gr√°ficos en bits, pueden usar varios grados para mostrar el mismo prefijo.  Puede leer m√°s en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en.wikipedia.org/wiki/</a> <br><br><a name="10"></a><h3>  <font color="#38a5d3">3.3 unidades</font> </h3><br>  B√°sicamente, los contadores en el equipo de red muestran la cantidad de informaci√≥n procesada en bytes.  Si no se convierte, el gr√°fico mostrar√° la velocidad en Bps (bytes por segundo) y no en bps (bits por segundo). <br><br><a name="11"></a><h2>  <font color="#38a5d3">Conclusi√≥n</font> </h2><br>  Los gr√°ficos son una herramienta √∫til e informativa.  Al mirar el conjunto correcto de gr√°ficos, puede encontrar r√°pidamente respuestas a muchas preguntas.  Pero cuando se trabaja con gr√°ficos, debe comprender los matices, especialmente cuando se correlacionan gr√°ficos de diferentes sistemas.  Por lo tanto, la primera vez que mire la tabla, descubra: <br><br><ul><li>  qu√© va y c√≥mo </li><li>  ¬øC√≥mo se almacena? </li><li>  como se muestra </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/441694/">https://habr.com/ru/post/441694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441684/index.html">Predicciones: las nubes cambiar√°n 2019</a></li>
<li><a href="../441686/index.html">C√≥mo implementamos el cach√© en la base de datos Tarantool</a></li>
<li><a href="../441688/index.html">Los juegos cambian el mundo: c√≥mo Hellblade llama la atenci√≥n sobre los problemas de las personas con enfermedades mentales</a></li>
<li><a href="../441690/index.html">No necesita Blockchain: ocho casos de uso bien conocidos y por qu√© no funcionan</a></li>
<li><a href="../441692/index.html">¬øC√≥mo cubrir las pistas en la cadena de bloques? Nuestro concepto de mezclador de transacciones</a></li>
<li><a href="../441696/index.html">La historia de Cyrillic LiveJournal: c√≥mo la administraci√≥n rusa aplast√≥ el auge de los blogs en ruso</a></li>
<li><a href="../441698/index.html">Desconectar: ‚Äã‚Äã¬øqu√© sucede cuando cancelas la suscripci√≥n a Facebook?</a></li>
<li><a href="../441700/index.html">C√≥mo un rompecabezas para ni√±os ayuda a revelar los secretos del magnetismo</a></li>
<li><a href="../441702/index.html">Sobre el almacenamiento de datos personales, Roskomnadzor y sitios de citas</a></li>
<li><a href="../441704/index.html">¬øPor qu√© no deber√≠as esperar las manifestaciones morales de los robomobiles?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>