<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ปโ๐คโ๐จ๐ฝ ๐ง๐พ ๐ ุงูุงุณุชุซูุงุกุงุช ุงูุญุชููุฉ ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู "C ++ ูููุณุชูุจู" ๐ ๐จ๐ผโ๐จ ๐ถ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูุบุฑูุจ ุฃูู ูู ูุชู ุฐูุฑ ุญุจุฑู ุญุชู ุงูุขู ุญูู ุงูุงูุชุฑุงุญ ุงูุตุงุฎุจ ููุนูุงุฑ C ++ ุงููุณูู "ุงูุงุณุชุซูุงุกุงุช ุงูุญุชููุฉ ุงูุตูุฑูุฉ". ุชุตุญูุญ ูุฐุง ุงูุฅุบูุงู ุงููุฒุนุฌ. 


 ุฅุฐุง ููุช ููู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุงุณุชุซูุงุกุงุช ุงูุญุชููุฉ ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู "C ++ ูููุณุชูุจู"</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430690/" style=";text-align:right;direction:rtl"><iframe width="560" height="315" src="https://www.youtube.com/embed/cbUTAoHy6Ls" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p style=";text-align:right;direction:rtl">  ูู ุงูุบุฑูุจ ุฃูู ูู ูุชู ุฐูุฑ ุญุจุฑู ุญุชู ุงูุขู ุญูู ุงูุงูุชุฑุงุญ ุงูุตุงุฎุจ ููุนูุงุฑ C ++ ุงููุณูู "ุงูุงุณุชุซูุงุกุงุช ุงูุญุชููุฉ ุงูุตูุฑูุฉ".  ุชุตุญูุญ ูุฐุง ุงูุฅุบูุงู ุงููุฒุนุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ููููุง ุจุดุฃู ุงููููุงุช ุงูุนุงูุฉ ููุงุณุชุซูุงุกุงุช ุ ุฃู ูุงู ุนููู ุชุฌููุน ุงูุดูุฑุฉ ุฏูู ุฏุนู ุงูุงุณุชุซูุงุก ุ ุฃู ูุฌุฑุฏ ุงูุชุณุงุคู ุนูุง ุณูุญุฏุซ ูู ูุนุงูุฌุฉ ุงูุฎุทุฃ ูู C ++ 2b (ูุฑุฌุน ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุดูุฑ ุญุฏูุซ</a> ) ุ ุฃุทูุจ ุงููุท.  ุฃูุช ุชูุชุธุฑ ุถุบุทูุง ูู ูู ุดูุก ูููู ุงูุนุซูุฑ ุนููู ุงูุขู ุญูู ุงูููุถูุน ุ ูุงุซููู ูู ุงุณุชุทูุงุนุงุช ุงูุฑุฃู. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ูู ูุชู ุฅุฌุฑุงุก ุงูููุงูุดุฉ ุฃุฏูุงู ููุณ ููุท ุญูู ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ ุ ูููู ุฃูุถูุง ุญูู ุงูุงูุชุฑุงุญุงุช ุฐุงุช ุงูุตูุฉ ุจุงููุนูุงุฑ ุ ูุฌููุน ุฃููุงุน ุงูุทุฑู ุงูุฃุฎุฑู ููุชุนุงูู ูุน ุงูุฃุฎุทุงุก.  ุฅุฐุง ุฐูุจุช ููุง ูุฅููุงุก ูุธุฑุฉ ุนูู ุจูุงุก ุงูุฌููุฉ ุ ููู ููุง: </p><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safe_divide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throws</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(arithmetic_error)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> arithmetic_error::divide_by_zero; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> as_double(x) / y; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">caller</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">noexcept</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; safe_divide(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (arithmetic_error e) { <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; e; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุน ุงูุฎุทุฃ ุงููุญุฏุฏ ุบูุฑ ููู / ุบูุฑ ูุนุฑูู ุ ูููููู ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงู <code>throws</code> <code>catch (std::error e)</code> . </p><br><h2 id="polezno-znat" style=";text-align:right;direction:rtl">  ุฌูุฏ ุฃู ุชุนุฑู </h2><br><h3 id="stdoptional-i-stdexpected" style=";text-align:right;direction:rtl">  <code>std::optional</code> ู <code>std::expected</code> </h3><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ููุฑุฑ ุฃู ุงูุฎุทุฃ ุงูุฐู ูููู ุฃู ููุดุฃ ูู ุงููุธููุฉ ููุณ "ูุงุชูุงู" ุจูุง ูููู ูุฅููุงุก ุงุณุชุซูุงุก ููุง.  ุชูููุฏูุง ุ ูุชู ุฅุฑุฌุงุน ูุนูููุงุช ุงูุฎุทุฃ ุจุงุณุชุฎุฏุงู ูุนููุฉ ุฎุงุฑุฌ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Filesystem TS</a> ุนุฏุฏูุง ูู ุงูููุฒุงุช ุงููุชุดุงุจูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uintmax_t</span></span> file_size(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path&amp; p, error_code&amp; ec);</code> </pre> <br><p style=";text-align:right;direction:rtl">  (ูุง ุชุฑูู ุงุณุชุซูุงุกู ูุฃูู ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููููุ) ููุน ุฐูู ุ ูุฅู ูุนุงูุฌุฉ ุฑูุฒ ุงูุฎุทุฃ ูุฑููุฉ ูุนุฑุถุฉ ููุฃุฎุทุงุก.  ูู ุงูุณูู ูุณูุงู ุฑูุฒ ุงูุฎุทุฃ ููุชุญูู.  <a href="">ุชููุน</a> ุฃููุงุท ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุญุฏูุซุฉ ุงุณุชุฎุฏุงู ูุนููุงุช ุงูุฅุฎุฑุงุฌ ุ ุจุฏูุงู ูู ุฐูู ุ ููุตู ุจุฅุฑุฌุงุน ุจููุฉ ุชุญุชูู ุนูู ุงููุชูุฌุฉ ุจุฃููููุง. </p><br><p style=";text-align:right;direction:rtl">  ูุจุนุถ ุงูููุช ุงูุขู ุ ุชูุฏู Boost ุญูุงู ุฃููููุง ููุชุนุงูู ูุน ูุซู ูุฐู ุงูุฃุฎุทุงุก "ุบูุฑ ุงููููุชุฉ" ุ ูุงูุชู ูููู ุฃู ุชุญุฏุซ ูู ุณููุงุฑูููุงุช ูุนููุฉ ูู ุงูุจุฑูุงูุฌ ุงูุตุญูุญ ุจุงููุฆุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">uintmax_t</span></span>, error_code&gt; file_size(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path&amp; p);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุน <code>expected</code> ูุดุงุจู <code>variant</code> ุ ูููู ูููุฑ ูุงุฌูุฉ ููุงุฆูุฉ ููุนูู ูุน "ุงููุชูุฌุฉ" ู "ุงูุฎุทุฃ".  ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุชุฎุฒูู ุงููุชูุฌุฉ <code>expected</code> ูู <code>expected</code> .  ูุฏ ูุจุฏู ุชูููุฐ <code>file_size</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">file_info* info = read_file_info(p); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info != null) { <span class="hljs-keyword"><span class="hljs-keyword">uintmax_t</span></span> size = info-&gt;size; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> size; <span class="hljs-comment"><span class="hljs-comment">// &lt;== } else { error_code error = get_error(); return std::unexpected(error); // &lt;== }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุณุจุจ ุงูุฎุทุฃ ุบูุฑ ูุซูุฑ ููุงูุชูุงู ุจุงููุณุจุฉ ููุง ุ ุฃู ูููู ุฃู ูุชููู ุงูุฎุทุฃ ููุท ูู "ุบูุงุจ" ุงููุชูุฌุฉ ุ ููููู ุงุณุชุฎุฏุงู <code>optional</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">optional&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; parse_int(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; s); optional&lt;U&gt; get_or_null(<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;T, U&gt; m, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> T&amp; key);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู C ++ 17 ูู Boost ุ ุฌุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฎุชูุงุฑู</a> ุฅูู std (ุจุฏูู ุฏุนู <code>optional&lt;T&amp;&gt;</code> ) ุ  ูู C ++ 20 ุ ูุฏ ูุถูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุชููุน</a> (ูุฐุง ุงูุชุฑุงุญ ููุท ุ ุดูุฑูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">RamzesXI</a> ููุชุตุญูุญ). </p><br><h3 id="contracts" style=";text-align:right;direction:rtl">  ุงูุนููุฏ </h3><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนููุฏ</a> (ูุฌุจ ุนุฏู ุงูุฎูุท ุจูููุง ูุจูู ุงูููุงููู) ูู ุทุฑููุฉ ุฌุฏูุฏุฉ ููุฑุถ ูููุฏ ุนูู ูุนููุงุช ุงููุธุงุฆู ุ ุชูุช ุฅุถุงูุชูุง ูู C ++ 20.  ุชูุช ุฅุถุงูุฉ 3 ุชุนูููุงุช ุชูุถูุญูุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ูุชููุน</strong> ุงูุดููุงุช ูุนููุงุช ุงูุฏุงูุฉ </li><li style=";text-align:right;direction:rtl">  <strong>ูุถูู</strong> ุงูุชุญูู ูู ุงููููุฉ ุงููุฑุฌุนุฉ ููุฏุงูุฉ (ูุฃุฎุฐูุง ููุณูุทุฉ) </li><li style=";text-align:right;direction:rtl">  <strong>ุชุฃููุฏ</strong> - ุจุฏูู ุญุถุงุฑู ููุชุฃููุฏ ุงูููู </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unsafe_at</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;T&gt; v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> [[expects: i &lt; v.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">]]</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sqrt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x)</span></span></span><span class="hljs-function"> [[expects: x &gt;</span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>]] [[ensures ret: ret &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>]]; <span class="hljs-function"><span class="hljs-function">value </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_single</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;value&gt; result = fetch(<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;key&gt;{e}); [[assert result.size() == <span class="hljs-number"><span class="hljs-number">1</span></span>]]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v[<span class="hljs-number"><span class="hljs-number">0</span></span>]; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุชูููู ุฎุฑู ุงูุนูุฏ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุณูู ุงูุณููู ุบูุฑ ุงููุญุฏุฏ </li><li style=";text-align:right;direction:rtl">  ูุญุต ูุงุณุชุฏุนู ุฎุฑูุฌ ุงููุณุชุฎุฏู ุ ูุจุนุฏ ุฐูู <code>std::terminate</code> </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงููุณุชุญูู ุงูุงุณุชูุฑุงุฑ ูู ุชุดุบูู ุงูุจุฑูุงูุฌ ุจุนุฏ ุฎุฑู ุงูุนูุฏ ุ ูุฃู ุงููุชุฑุฌููู ูุณุชุฎุฏููู ุถูุงูุงุช ูู ุงูุนููุฏ ูุชุญุณูู ููุฏ ุงููุธููุฉ.  ุฅุฐุง ูุงู ููุงู ุฃุฏูู ุดู ูู ุฃู ุงูุนูุฏ ุณูุชู ุงูููุงุก ุจู ุ ููู ุงูุฌุฏูุฑ ุฅุถุงูุฉ ุดูู ุฅุถุงูู. </p><br><h3 id="stderror_code" style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: error_code </h3><br><p style=";text-align:right;direction:rtl">  ุชุณูุญ ูู ููุชุจุฉ <code>&lt;system_error&gt;</code> ุ ุงูููุถุงูุฉ ูู C ++ 11 ุ ุจุชูุญูุฏ ูุนุงูุฌุฉ ุฑููุฒ ุงูุฎุทุฃ ูู ุจุฑูุงูุฌู.  ูุชููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">std :: error_code</a> ูู ุฑูุฒ ุฎุทุฃ ูู ุงูููุน <code>int</code> ููุคุดุฑ ูููุงุฆู ูู ุจุนุถ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฆุฉ</a> ุงูุณูุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">std :: error_category</a> .  ูุฐุง ุงููุงุฆู ุ ูู ุงููุงูุน ุ ููุนุจ ุฏูุฑ ุฌุฏูู ุงููุธุงุฆู ุงูุงูุชุฑุงุถูุฉ ููุญุฏุฏ ุณููู ุฑูุฒ <code>std::error_code</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฅูุดุงุก <code>std::error_code</code> ุงูุฎุงุต ุจู ุ ูุฌุจ ุนููู ุชุญุฏูุฏ <code>std::error_category</code> ุณูุงูุฉ <code>std::error_category</code> ูุชูููุฐ ุงูุฃุณุงููุจ ุงูุงูุชุฑุงุถูุฉ ุ ูุฃูููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุนููู ุฃูุถูุง ุฅูุดุงุก ูุชุบูุฑ ุนุงู ููุฆุฉ <code>std::error_category</code> ุงูุฎุงุตุฉ ุจู.  ูุจุฏู ุฃู ูุนุงูุฌุฉ ุงูุฎุทุฃ ุจุงุณุชุฎุฏุงู error_code + ุงููุชููุน ุดูุก ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> result = expected&lt;T, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::error_code&gt;; my::<span class="hljs-function"><span class="hljs-function">file_handle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">open_internal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; error)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">open_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; name)</span></span></span><span class="hljs-function"> -&gt; result&lt;my::file&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> raw_error = <span class="hljs-number"><span class="hljs-number">0</span></span>; my::file_handle maybe_result = open_internal(name, &amp;raw_error); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::error_code error{raw_error, my::filesystem_error}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> unexpected{error}; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> my::file{maybe_result}; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูููู ุฃูู ูู <code>std::error_code</code> ุงููููุฉ 0 ุชุนูู ุนุฏู ูุฌูุฏ ุฎุทุฃ.  ุฅุฐุง ูู ููู ูุฐุง ูู ุงูุญุงู ุจุงููุณุจุฉ ูุฑููุฒ ุงูุฎุทุฃ ุงูุฎุงุตุฉ ุจู ุ ููุจู ุชุญููู ุฑูุฒ ุฎุทุฃ ุงููุธุงู ุฅูู <code>std::error_code</code> ุ ูุฌุจ ุนููู ุงุณุชุจุฏุงู ุงูุฑูุฒ 0 ุจู SUCCESS ูุงูุนูุณ ุตุญูุญ. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ูุตู ุฌููุน ุฑููุฒ ุฃุฎุทุงุก ุงููุธุงู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">errc</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">system_category</a> .  ุฅุฐุง ุฃุตุจุญุช ุฅุนุงุฏุฉ ุงูุชูุฌูู ุงููุฏูู ูุฑููุฒ ุงูุฎุทุฃ ูู ูุฑุญูุฉ ูุนููุฉ ูุฆูุจุฉ ููุบุงูุฉ ุ ูููููู ุฏุงุฆููุง ุงูุชูุงู ุฑูุฒ ุงูุฎุทุฃ ูู <code>std::system_error</code> ูุงูุชุฎูุต ููู. </p><br><h3 id="destructive-move--trivially-relocatable" style=";text-align:right;direction:rtl">  ุชุญุฑู ุชุฏููุฑู / ุณูู ุงูุงูุชูุงู </h3><br><p style=";text-align:right;direction:rtl">  ุชุชูุญ ูู ุฅูุดุงุก ูุฆุฉ ุฃุฎุฑู ูู ุงููุงุฆูุงุช ุงูุชู ุชูุชูู ุจุนุถ ุงูููุงุฑุฏ.  ุนูู ุงูุฃุฑุฌุญ ุ ุณุชุญุชุงุฌ ุฅูู ุฌุนููุง ุบูุฑ ูุงุจูุฉ ูููุณุฎ ุ ูููููุง ูุงุจูุฉ ููููู ุ ูุฃูู ูู ุบูุฑ ุงูููุงุณุจ ุงูุนูู ูุน ุงูุฃุดูุงุก ุบูุฑ ุงููููููุฉ (ูุจู C ++ 17 ูุง ูููู ุฅุฑุฌุงุนูุง ูู ูุธููุฉ). </p><br><p style=";text-align:right;direction:rtl">  ูููู ููุง ุชููู ุงููุดููุฉ: ุนูู ุฃู ุญุงู ุ ูุฌุจ ุญุฐู ุงููุงุฆู ุงูููููู.  ูุฐูู ุ ูู ุงูุถุฑูุฑู ูุฌูุฏ ุญุงูุฉ ุฎุงุตุฉ "ููู ูู" ุ ุฃู ูุงุฆู "ูุงุฑุบ" ูุง ูุญุฐู ุฃู ุดูุก.  ุงุชุถุญ ุฃู ูู ูุฆุฉ C ++ ูุฌุจ ุฃู ูููู ููุง ุญุงูุฉ ูุงุฑุบุฉ ุ ุฃู ุฃูู ูู ุงููุณุชุญูู ุฅูุดุงุก ูุฆุฉ ูุน (ุถูุงู) ุซุงุจุช ูู ุงูุตูุงุจ ุ ูู ุงูููุดุฆ ุฅูู ุงููุฏูุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูููู ุฅูุดุงุก ูุฆุฉ <code>open_file</code> ุงูุตุญูุญุฉ ูููู ููุชูุญ ุทูุงู ุญูุงุชู.  ูู ุงูุบุฑูุจ ููุงุญุธุฉ ุฐูู ุจุฅุญุฏู ุงููุบุงุช ุงูููููุฉ ุงูุชู ุชุณุชุฎุฏู RAII ุจูุดุงุท. </p><br><p style=";text-align:right;direction:rtl">  ูุดููุฉ ุฃุฎุฑู ูู ุงูุชุตููุฑ ูููุงุฆูุงุช ุงููุฏููุฉ ุนูุฏ ุงูููู ูุถูู <code>std::vector&lt;std::unique_ptr&lt;T&gt;&gt;</code> : ููุก <code>std::vector&lt;std::unique_ptr&lt;T&gt;&gt;</code> ูููู ุฃู ูููู ุฃุจุทุฃ ูุฑุชูู ูู <code>std::vector&lt;T*&gt;</code> ุจุณุจุจ ูููุฉ ุงูุชุตููุฑ ูููุคุดุฑุงุช ุงููุฏููุฉ ุนูุฏ ุงูุชุญุฑู ุชูููุง ุฅุฒุงูุฉ ุงูุฏูู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูุทูุฑู C ++ ููุฐ ูุชุฑุฉ ุทูููุฉ ุฅูู Rust ุ ุญูุซ ูุง ูุชู ุงุณุชุฏุนุงุก ุงููุฏูุฑุงุช ุนูู ุงููุงุฆูุงุช ุงููููููุฉ.  ุชุณูู ูุฐู ุงูููุฒุฉ ุงูุญุฑูุฉ ุงูุชุฏููุฑูุฉ.  ูุณูุก ุงูุญุธ ุ ูุง ูุนุฑุถ Proposal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Trivially Relocatable</a> ุฅุถุงูุชู ุฅูู C ++.  ูููู ุณูุชู ุญู ูุดููุฉ ุงููููุงุช ุงูุนุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุนุชุจุฑ ุงููุฆุฉ ูุงุจูุฉ ููููู ุจุดูู ุชุงูู ุฅุฐุง ูุงูุช ุนูููุชุงู: ููู ูุญุฐู ุงููุงุฆู ุงููุฏูู ููุงูุฆ ูู memcpy ูู ุงููุงุฆู ุงููุฏูู ุฅูู ุงููุงุฆู ุงูุฌุฏูุฏ.  ูู ูุชู ุญุฐู ุงููุงุฆู ุงููุฏูู ุ ูุณููู ุงููุคูููู "ุฅุณูุงุทู ุนูู ุงูุฃุฑุถ". </p><br><p style=";text-align:right;direction:rtl">  ุงูููุน ูุงุจู ููููู ุจุดูู ุชุงูู ูู ูุฌูุฉ ูุธุฑ ุงููุชุฑุฌู ุฅุฐุง ุชุญูู ุฃุญุฏ ุงูุดุฑูุท (ุงูุนูุฏูุฉ) ุงูุชุงููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูู ูุงุจู ููุญุฑูุฉ ุจุดูู ุชุงูู + ูุงุจู ููุชูู ุจุดูู ุชุงูู (ูุซู ุจููุฉ <code>int</code> ุฃู POD) </li><li style=";text-align:right;direction:rtl">  ูุฐู ูู ุงููุฆุฉ ุงููููุฒุฉ <code>[[trivially_relocatable]]</code> </li><li style=";text-align:right;direction:rtl">  ูุฐู ูุฆุฉ ุฌููุน ุฃุนุถุงุฆูุง ูููู ููููู ุจุณูููุฉ. </li></ol><br><p style=";text-align:right;direction:rtl">  ููููู ุงุณุชุฎุฏุงู ูุฐู ุงููุนูููุงุช ูุน <code>std::uninitialized_relocate</code> ุ ุงูุฐู ูููุฐ ููู init + ุญุฐู ุจุงูุทุฑููุฉ ุงููุนุชุงุฏุฉ ุ ุฃู ูุชู ุชุณุฑูุนู ุฅู ุฃููู.  ูููุชุฑุญ ูุถุน ุนูุงูุฉ ุนูู <code>[[trivially_relocatable]]</code> ูุนุธู ุฃููุงุน ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ุจูุง ูู ุฐูู <code>std::string</code> ู <code>std::vector</code> ู <code>std::unique_ptr</code> .  ุงููููุงุช ุงูุนุงูุฉ <code>std::vector&lt;std::unique_ptr&lt;T&gt;&gt;</code> ูุน ูุถุน ูุฐุง ูู ุงูุงุนุชุจุงุฑ ุ ุณูุฎุชูู ุงูุงูุชุฑุงุญ. </p><br><h2 id="chto-ne-tak-s-isklyucheniyami-seychas" style=";text-align:right;direction:rtl">  ูุง ูู ุงูุฎุทุฃ ูู ุงูุงุณุชุซูุงุกุงุช ุงูุขูุ </h2><br><p style=";text-align:right;direction:rtl">  ุชู ุชุทููุฑ ุขููุฉ ุงุณุชุซูุงุก C ++ ูู ุนุงู 1992.  ุชู ุงูุชุฑุงุญ ุฎูุงุฑุงุช ุชูููุฐ ูุฎุชููุฉ.  ูู ุจูู ูุฐู ุ ุชู ุงุฎุชูุงุฑ ุขููุฉ ุฌุฏูู ุงูุงุณุชุซูุงุกุงุช ุงูุชู ุชุถูู ุนุฏู ูุฌูุฏ ุนุจุก ุฅุถุงูู ูููุณุงุฑ ุงูุฑุฆูุณู ูุชูููุฐ ุงูุจุฑูุงูุฌ.  ูุฃูู ููุฐ ูุญุธุฉ ุฅูุดุงุฆูุง ุ ูุงู ูู ุงูููุชุฑุถ ุฃู <em>ูุชู ุทุฑุญ ุงูุงุณุชุซูุงุกุงุช ูู ุญุงูุงุช ูุงุฏุฑุฉ ุฌุฏูุง</em> . </p><br><p style=";text-align:right;direction:rtl">  ูุณุงูุฆ ุงูุงุณุชุซูุงุกุงุช ุงูุฏููุงููููุฉ (ุฃู ุงูุนุงุฏูุฉ): </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุงูุงุณุชุซูุงุก ุงูุฐู ุชู ุทุฑุญู ุ ูุจูุบ ุงูุญูู ูู ุงููุชูุณุท โโุญูุงูู 10000-100.000 ุฏูุฑุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ููู ุฃุณูุฃ ุงูุญุงูุงุช ุ ูููู ุฃู ุชุตู ุฅูู ุชุฑุชูุจ ุงููููู ุซุงููุฉ </li><li style=";text-align:right;direction:rtl">  ุฒูุงุฏุฉ ุญุฌู ุงูููู ุงูุซูุงุฆู ุจูุณุจุฉ 15-38ูช </li><li style=";text-align:right;direction:rtl">  ุนุฏู ุงูุชูุงูู ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ C </li><li style=";text-align:right;direction:rtl">  ุงุณุชุซูุงุก ุถููู ูุฑูู ุงูุฏุนู ูู ุฌููุน ุงููุธุงุฆู ุจุงุณุชุซูุงุก <code>noexcept</code> .  ูููู ุทุฑุญ ุงุณุชุซูุงุก ูู ุฃู ููุงู ุชูุฑูุจูุง ูู ุงูุจุฑูุงูุฌ ุ ุญุชู ุนูุฏูุง ูุง ูุชููุน ูุคูู ุงููุธููุฉ ุฐูู </li></ol><br><p style=";text-align:right;direction:rtl">  ุจุณุจุจ ูุฐู ุงูุนููุจ ุ ูุฅู ูุทุงู ุงูุงุณุชุซูุงุกุงุช ูุญุฏูุฏ ุจุดูู ูุจูุฑ.  ุนูุฏูุง ูุง ูููู ุชุทุจูู ุงูุงุณุชุซูุงุกุงุช: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชููู ุงูุญุชููุฉ ูููุฉ ุ ุฃู ุญูุซ ูููู ูู ุบูุฑ ุงูููุจูู ุฃู ูุนูู ุงูุฑูุฒ "ุฃุญูุงููุง" 10 ุ 100 ุ 1000 ูุฑุฉ ุฃุจุทุฃ ูู ุงููุนุชุงุฏ </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุง ุชููู ูุฏุนููุฉ ูู ABI ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุชุญููุงุช ุงูุฏูููุฉ </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชุชู ูุชุงุจุฉ ุฌุฒุก ูุจูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู C </li><li style=";text-align:right;direction:rtl">  ูู ุงูุดุฑูุงุช ุงูุชู ูุฏููุง ุนุฏุฏ ูุจูุฑ ูู ุงูุฑููุฒ ุงููุฏููุฉ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Google Style Guide</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Qt</a> ).  ุฅุฐุง ูุงูุช ููุงู ูุธููุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ุบูุฑ ุขููุฉ ููุงุณุชุซูุงุก ูู ุงูุดูุฑุฉ ุ ูุนูุฏุฆุฐู ููููุง ููุงููู ุงููุบุท ุ ุณูุชู ุทุฑุญ ุงุณุชุซูุงุก ูู ุฎูุงูู ุนุงุฌูุงู ุฃู ุขุฌูุงู ูุฅูุดุงุก ุฎุทุฃ </li><li style=";text-align:right;direction:rtl">  ูู ุงูุดุฑูุงุช ุงูุชู ุชูุธู ุงููุจุฑูุฌูู ุงูุฐูู ููุณ ูุฏููู ููุฑุฉ ุนู ุณูุงูุฉ ุงูุงุณุชุซูุงุก </li></ol><br><p style=";text-align:right;direction:rtl">  ููููุง ููุงุณุชุทูุงุนุงุช ุ ูู ุฃูุงูู ุงูุนูู ุงูุฎุงุตุฉ ุจูุทูุฑู 52ูช (!) ุ ุชุญุธุฑ ููุงุนุฏ ุงูุดุฑูุงุช ุงูุงุณุชุซูุงุกุงุช. </p><br><p style=";text-align:right;direction:rtl">  ููู ุงูุงุณุชุซูุงุกุงุช ุฌุฒุก ูุง ูุชุฌุฒุฃ ูู C ++!  ูู ุฎูุงู ุชุถููู ุนูุงูุฉ <code>-fno-exceptions</code> ุ ูููุฏ ุงููุทูุฑูู ุงููุฏุฑุฉ ุนูู ุงุณุชุฎุฏุงู ุฌุฒุก ูุจูุฑ ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ.  ููุฐุง ูุญุฑุถ ุงูุดุฑูุงุช ุนูู ุฅูุดุงุก "ููุชุจุงุช ููุงุณูุฉ" ุฎุงุตุฉ ุจูู ุ ููุนู ุ ูุงุจุชูุงุฑ ูุฆุฉ ุงูุฃูุชุงุฑ ุงูุฎุงุตุฉ ุจูู. </p><br><p style=";text-align:right;direction:rtl">  ููู ูุฐู ููุณุช ุงูููุงูุฉ.  ุงูุงุณุชุซูุงุกุงุช ูู ุงูุทุฑููุฉ ุงูููุงุณูุฉ ุงููุญูุฏุฉ ูุฅูุบุงุก ุฅูุดุงุก ูุงุฆู ูู ุงูููุดุฆ ูุฅููุงุก ุฎุทุฃ.  ุนูุฏูุง ูุชู ุฅููุงู ุชุดุบูููุง ุ ุชุธูุฑ ุฑุฌุณุฉ ูุซู ุงูุชููุฆุฉ ุนูู ูุฑุญูุชูู.  ูุง ูููู ูููุดุบููู ุฃูุถูุง ุงุณุชุฎุฏุงู ุฑููุฒ ุงูุฎุทุฃ ุ ูุฐูู ูุชู ุงุณุชุจุฏุงููู ุจูุธุงุฆู ูุซู <code>assign</code> . </p><br><h2 id="proposal-isklyucheniya-buduschego" style=";text-align:right;direction:rtl">  ุงูุชุฑุงุญ: ุงุณุชุซูุงุกุงุช ุงููุณุชูุจู </h2><br><h3 id="novyy-mehanizm-peredachi-isklyucheniy" style=";text-align:right;direction:rtl">  ุขููุฉ ููู ุงุณุชุซูุงุก ุฌุฏูุฏุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุตู Herb Sutter ูู P709 ุขููุฉ ููู ุงุณุชุซูุงุก ุฌุฏูุฏุฉ.  ูู ุญูุซ ุงููุจุฏุฃ ุ ุชููู ุงูุฏุงูุฉ ุจุฅุฑุฌุงุน <code>std::expected</code> ุ ููุน ุฐูู ุ ุจุฏูุงู ูู ุชูููุฒ ูููุตู ูู ููุน <code>bool</code> ุ ูุงูุฐู ุณูุดุบู ูุน ุงููุญุงุฐุงุฉ ูุง ูุตู ุฅูู 8 ุจุงูุช ุนูู ุงูููุฏุณ ุ ูุชู ููู ูุฐุง ุงูุฌุฒุก ูู ุงููุนูููุงุช ุจุทุฑููุฉ ุฃุณุฑุน ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู Carry Flag. </p><br><p style=";text-align:right;direction:rtl">  ุณุชุญุตู ุงููุธุงุฆู ุงูุชู ูุง ุชููุณ CF (ูุนุธููุง) ุนูู ูุฑุตุฉ ูุงุณุชุฎุฏุงู ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ ูุฌุงููุง - ุณูุงุก ูู ุญุงูุฉ ุงูุฅุฑุฌุงุน ุงูุนุงุฏู ุ ุฃู ูู ุญุงูุฉ ุงูุงุณุชุซูุงุก!  ุณูู ุชุชููู ุงููุธุงุฆู ุงูุชู ูุชู ุญูุธูุง ูุงุณุชุนุงุฏุชูุง ุงูุญุฏ ุงูุฃุฏูู ูู ุงููููุงุช ุงูุนุงูุฉ ุ ูุณุชุธู ุฃุณุฑุน ูู <code>std::expected</code> ูุฃู ุฑููุฒ ุฎุทุฃ ุนุงุฏูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุจุฏู ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safe_divide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> j)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throws</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(arithmetic_errc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (j == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> arithmetic_errc::divide_by_zero; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == INT_MIN &amp;&amp; j == <span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> arithmetic_errc::integer_divide_overflows; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i / j; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> j, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> k)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throws</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(arithmetic_errc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i + safe_divide(j, k); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> j, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> k)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; foo(i, j, k); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (erithmetic_errc e) { <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; e; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุณุฎุฉ ุงูุจุฏููุฉ ุ ูููุชุฑุญ ุฅูุฒุงู ุงููููุฉ ุงูุฃุณุงุณูุฉ <code>try</code> ูู ููุณ ุงูุชุนุจูุฑ ูุซู ุงุณุชุฏุนุงุก ุฏุงูุฉ <code>throws</code> : <code>try i + safe_divide(j, k)</code> .  ุณูุคุฏู ุฐูู ุฅูู ุชูููู ุนุฏุฏ ุญุงูุงุช ุงุณุชุฎุฏุงู ูุธุงุฆู <code>throws</code> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงูุขููุฉ ููุงุณุชุซูุงุกุงุช ุฅูู ุงูุตูุฑ ุชูุฑูุจูุง.  ุนูู ุฃู ุญุงู ุ ุนูู ุนูุณ ุงูุงุณุชุซูุงุกุงุช ุงูุฏููุงููููุฉ ุ ุณุชููู IDE ูุงุฏุฑุฉ ุนูู ุฅุจุฑุงุฒ ุงูุชุนุจูุฑุงุช ุงูุชู ุชุฑูู ุงูุงุณุชุซูุงุกุงุช ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ุญูููุฉ ุฃู ุงูุงุณุชุซูุงุก ุงูุฐู ุชู ุทุฑุญู ูุง ูุชู ุชุฎุฒููู ุจุดูู ูููุตู ุ ูููู ูุชู ูุถุนู ูุจุงุดุฑุฉ ูู ููุงู ุงููููุฉ ุงููุฑุชุฌุนุฉ ุ ููุฑุถ ูููุฏูุง ุนูู ููุน ุงูุงุณุชุซูุงุก.  ุฃููุงู ุ ูุฌุจ ุฃู ูุชู ููููุง ุจุดูู ุชุงูู.  ุซุงูููุง ุ ูุฌุจ ุฃูุง ูููู ุญุฌูู ูุจูุฑูุง ุฌุฏูุง (ูููู ูููู ุฃู ูููู ุดูุฆูุง ูุซู <code>std::unique_ptr</code> ) ุ ูุฅูุง ุณุชุญุชูุธ ุฌููุน ุงููุธุงุฆู ุจูุณุงุญุฉ ุฃูุจุฑ ุนูู ุงูููุฏุณ. </p><br><h3 id="status_code" style=";text-align:right;direction:rtl">  ุฑูุฒ ุงูุญุงูุฉ </h3><br><p style=";text-align:right;direction:rtl">  <code>&lt;system_error2&gt;</code> ููุชุจุฉ <code>&lt;system_error2&gt;</code> ุ ุงูุชู ุทูุฑูุง Niall Douglas ุ ุนูู <code>status_code&lt;T&gt;</code> - <code>error_code</code> "ุงูุฌุฏูุฏ ุ ุงูุฃูุถู".  ุงูุงุฎุชูุงูุงุช ุงูุฑุฆูุณูุฉ ุนู <code>error_code</code> : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>status_code</code> - ููุน ูููุฐุฌ ูููู ุงุณุชุฎุฏุงูู ูุชุฎุฒูู ุฃู ุฑููุฒ ุฎุทุฃ ูููู ุชุตูุฑูุง ุชูุฑูุจูุง (ุฌูุจูุง ุฅูู ุฌูุจ ูุน ูุคุดุฑ ุฅูู <code>status_code_category</code> ) ุ ุฏูู ุงุณุชุฎุฏุงู ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููู <code>T</code> ูุงุจูุงู ููุงูุชูุงู ูุงููุณุฎ ุจุดูู ุชุงูู (ุงูุฃุฎูุฑ ุ IMHO ุ ูุง ูุฌุจ ุฃู ูููู ุฅูุฒุงููุงู).  ุนูุฏ ุงููุณุฎ ูุงูุญุฐู ุ ูุชู ุงุณุชุฏุนุงุก ุงููุธุงุฆู ุงูุงูุชุฑุงุถูุฉ ูู <code>status_code_category</code> </li><li style=";text-align:right;direction:rtl">  ูุง ูููู ุชุฎุฒูู <code>status_code</code> ููุท ุจูุงูุงุช ุงูุฎุทุฃ ุ ูููู ุฃูุถูุง ูุนูููุงุช ุฅุถุงููุฉ ุญูู ุนูููุฉ ููุชููุฉ ุจูุฌุงุญ </li><li style=";text-align:right;direction:rtl">  ูุง ุชููู ุงูุฏุงูุฉ <code>code.message()</code> " <code>code.message()</code> ุงูุงูุชุฑุงุถูุฉ ุจุฅุฑุฌุงุน <code>std::string</code> ุ ููู <code>string_ref</code> ูู ููุน ุณูุณูุฉ ุซูููุฉ ููุนูุง ูุง ุ ููู <code>std::string_view</code> .  ููุงู ููููู <code>string_view</code> ุฃู <code>string</code> ุฃู <code>std::shared_ptr&lt;string&gt;</code> ุ ุฃู ุทุฑููุฉ ูุฌูููุฉ ุฃุฎุฑู ูุงูุชูุงู ุณูุณูุฉ.  ูุฏุนู ููุงู ุฃู <code>#include &lt;string&gt;</code> ุณูุฌุนู ุงูุฑุฃุณ <code>&lt;system_error2&gt;</code> ุบูุฑ ููุจูู "ุซููู" </li></ol><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชู <code>errored_status_code&lt;T&gt;</code> - ูุฌููุน ููู <code>errored_status_code&lt;T&gt;</code> ูุน ุงููููุดุฆ ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">errored_status_code(status_code&lt;T&gt;&amp;&amp; code) [[expects: code.failure() == <span class="hljs-literal"><span class="hljs-literal">true</span></span>]] : code_(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(code)) {}</code> </pre> <br><h3 id="error" style=";text-align:right;direction:rtl">  ุฎุทุฃ </h3><br><p style=";text-align:right;direction:rtl">  ููุน ุงูุงุณุชุซูุงุก ุงูุงูุชุฑุงุถู ( <code>throws</code> ุจุฏูู ููุน) ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูููุน ุงูุฃุณุงุณู ูู ุงูุงุณุชุซูุงุกุงุช ุงูุชู ูููู ุจูุง ุฌููุน ุงูุขุฎุฑูู (ูุซู <code>std::exception</code> ) ุ ูู <code>error</code> .  ูุชู ุชุนุฑูู ุดูุก ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> error = errored_status_code&lt;<span class="hljs-keyword"><span class="hljs-keyword">intptr_t</span></span>&gt;;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูุนูู ุฃู <code>error</code> ูู ุฑูุฒ ุงูุญุงูุฉ "ุฎุทุฃ" ุ ุญูุซ ูุชู ูุถุน ุงููููุฉ ( <code>value</code> ) ูู ูุคุดุฑ ูุงุญุฏ.  ูุธุฑูุง ูุฃู ุขููุฉ <code>status_code_category</code> ุชุถูู ุงูุญุฐู ูุงูุญุฑูุฉ ูุงููุณุฎ ุจุดูู ุตุญูุญ ุ ูุธุฑููุง ุ ูููู ุญูุธ ุฃู ุจููุฉ ุจูุงูุงุช ุนู ุทุฑูู <code>error</code> .  ุนููููุง ุ ุณูููู ูุฐุง ุฃุญุฏ ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ (int) </li><li style=";text-align:right;direction:rtl">  <code>std::exception_handle</code> ุ ุฃู ูุคุดุฑ ุฅูู ุงุณุชุซูุงุก ุฏููุงูููู ุชู ุทุฑุญู </li><li style=";text-align:right;direction:rtl">  <code>status_code_ptr</code> ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>unique_ptr</code> ุฅูู <code>unique_ptr</code> ุงูุชุนุณูู <code>status_code&lt;T&gt;</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ุชููู ุงููุดููุฉ ูู ุฃู ุงูุญุงูุฉ 3 ูุง ูุชู ุงูุชุฎุทูุท ูุฅุนุทุงุก ุงููุฑุตุฉ ูุฅุนุงุฏุฉ <code>error</code> ุฅูู <code>status_code&lt;T&gt;</code> .  ุงูุดูุก ุงููุญูุฏ ุงูุฐู ููููู ูุนูู ูู ุงูุญุตูู ุนูู <code>message()</code> <code>status_code&lt;T&gt;</code> .  ุญุชู ุชุชููู ูู ุงุณุชุนุงุฏุฉ ุงููููุฉ ูุฑุฉ ุฃุฎุฑู ูู <code>error</code> ูุฑุฉ ุฃุฎุฑู ุ ูู ุจุฑูููุง ูุงุณุชุซูุงุก ุฏููุงูููู (!) ุ ุซู ุงูุชูุทูุง ููููุง <code>error</code> .  ุจุดูู ุนุงู ุ ูุนุชูุฏ ููุงู ุฃูู ูุฌุจ ุชุฎุฒูู ุฑููุฒ ุงูุฎุทุฃ ูุฑุณุงุฆู ุงูุณูุณูุฉ ููุท ุนู ุทุฑูู <code>error</code> ุ ููู ูุง ูููู ูุฃู ุจุฑูุงูุฌ. </p><br><p style=";text-align:right;direction:rtl">  ููุชูููุฒ ุจูู ุฃููุงุน ุงูุฃุฎุทุงุก ุงููุฎุชููุฉ ุ ูููุชุฑุญ ุงุณุชุฎุฏุงู ุนุงูู ุงูููุงุฑูุฉ "ุงูุธุงูุฑู": </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { open_file(name); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::error e) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e == filesystem_error::already_exists) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> my_exception(<span class="hljs-string"><span class="hljs-string">"Unknown filesystem error, unable to continue"</span></span>); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณููุดู ุงุณุชุฎุฏุงู ูุชู ุงูุชูุงุท ูุชุนุฏุฏุฉ ุฃู <code>dynamic_cast</code> ูุชุญุฏูุฏ ููุน ุงูุงุณุชุซูุงุก! </p><br><h3 id="vzaimodeystvie-s-dinamicheskimi-isklyucheniyami" style=";text-align:right;direction:rtl">  ุงูุชูุงุนู ูุน ุงูุงุณุชุซูุงุกุงุช ุงูุฏููุงููููุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุฏ ุชุญุชูู ุงููุธููุฉ ุนูู ุฃุญุฏ ุงูููุงุตูุงุช ุงูุชุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>noexcept</code> : ูุง ููุฌุฏ ุงุณุชุซูุงุกุงุช </li><li style=";text-align:right;direction:rtl">  <code>throws(E)</code> : ูููู ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ ููุท </li><li style=";text-align:right;direction:rtl">  (ูุง ุดูุก): ูููู ุงุณุชุซูุงุกุงุช ุฏููุงููููุฉ ููุท </li></ul><br><p style=";text-align:right;direction:rtl">  <code>throws</code> ูุนูู <code>noexcept</code> .  ุฅุฐุง ุชู ุทุฑุญ ุงุณุชุซูุงุก ุฏููุงูููู ูู ุฏุงูุฉ "ุซุงุจุชุฉ" ุ ูุชู ููู ูู <code>error</code> .  ุฅุฐุง ุชู ุทุฑุญ ุงุณุชุซูุงุก ุซุงุจุช ูู ุฏุงูุฉ "ุฏููุงููููุฉ" ุ ูุชู ููู ูู ุงุณุชุซูุงุก <code>status_error</code> .  ูุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throws</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(arithmetic_errc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> erithmetic_errc::divide_by_zero; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> throws </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  arithmetic_errc   intptr_t //     error foo(); } void baz() { // error    status_error bar(); } void qux() throws { // error    status_error baz(); }</span></span></code> </pre> <br><h3 id="isklyucheniya-v-c" style=";text-align:right;direction:rtl">  ุงูุงุณุชุซูุงุกุงุช ูู Cุ! </h3><br><p style=";text-align:right;direction:rtl">  ููุต ุงูุงูุชุฑุงุญ ุนูู ุฅุถุงูุฉ ุงุณุชุซูุงุกุงุช ุฅูู ุฃุญุฏ ูุนุงููุฑ C ุงููุณุชูุจููุฉ ุ ูุณุชููู ูุฐู ุงูุงุณุชุซูุงุกุงุช ูุชูุงููุฉ ูุน ABI ูุน ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ C ++.  ุจููุฉ ูุดุงุจูุฉ ูู <code>std::expected&lt;T, U&gt;</code> ุ ุณูุชุนูู ุนูู ุงููุณุชุฎุฏู ุงูุฅุนูุงู ุจุดูู ูุณุชูู ุ ุนูู ุงูุฑุบู ูู ุฃูู ูููู ุฅุฒุงูุฉ ุงูุชูุฑุงุฑ ุจุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู.  ูุชููู ุจูุงุก ุงูุฌููุฉ ูู (ูู ุฃุฌู ุงูุจุณุงุทุฉ ุ ุณููุชุฑุถ ุฐูู) ูุดู ุงููููุงุช ุงูุฑุฆูุณูุฉ ุ ุงููุดู ุ ุงูุตูุฏ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fails</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x != <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> / x; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> failure(<span class="hljs-number"><span class="hljs-number">2.0f</span></span>); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">expected_int_float</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> value; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> error; }; <span class="hljs-keyword"><span class="hljs-keyword">_Bool</span></span> failed; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">caller</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ expected_int_float result = <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(invert(<span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.failed) { print_error(result.error); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } print_success(result.value); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ููุณู ุ ูู C ++ ุณูููู ูู ุงููููู ุฃูุถูุง ุงุณุชุฏุนุงุก ูุธุงุฆู <code>fails</code> ูู C ุ ูุงูุฅุนูุงู ุนููุง ูู ูุชู <code>extern C</code> .  ูุจุงูุชุงูู ุ ูู C ++ ุณูููู ููุงู ูุฌููุนุฉ ูุงููุฉ ูู ุงููููุงุช ุงูุฑุฆูุณูุฉ ููุนูู ูุน ุงูุงุณุชุซูุงุกุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>throw()</code> - ุชูุช ุฅุฒุงูุชู ูู C ++ 20 </li><li style=";text-align:right;direction:rtl">  <code>noexcept</code> - ูุญุฏุฏ ุงููุธููุฉ ุ ุงููุธููุฉ ูุง ุชุฑูู ุงุณุชุซูุงุกุงุช ุฏููุงููููุฉ </li><li style=";text-align:right;direction:rtl">  <code>noexcept(expression)</code> - ูุญุฏุฏ ุงููุธููุฉ ุ ูุง ุชููู ุงูุฏุงูุฉ <code>noexcept(expression)</code> ุงุณุชุซูุงุกุงุช ุฏููุงููููุฉ </li><li style=";text-align:right;direction:rtl">  <code>noexcept(expression)</code> - ูู ูุฑูู ุงูุชุนุจูุฑ ุงุณุชุซูุงุกุงุช ุฏููุงููููุฉุ </li><li style=";text-align:right;direction:rtl">  <code>throws(E)</code> - ูุญุฏุฏ ุงููุธููุฉ ุ ุชููู ุงูุฏุงูุฉ ุจุทุฑุญ ุงุณุชุซูุงุกุงุช ุซุงุจุชุฉ </li><li style=";text-align:right;direction:rtl">  <code>throws</code> = <code>throws(std::error)</code> </li><li style=";text-align:right;direction:rtl">  <code>fails(E)</code> - ุชููู ุฏุงูุฉ ูุณุชูุฑุฏุฉ ูู C ุจุทุฑุญ ุงุณุชุซูุงุกุงุช ุซุงุจุชุฉ </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูู C ++ ุ ุฃุญุถุฑูุง (ุฃู ุจุงูุฃุญุฑู ุ ุณูููุง) ุนุฑุจุฉ ูู ุงูุฃุฏูุงุช ุงูุฌุฏูุฏุฉ ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก.  ุจุนุฏ ุฐูู ุ ูุทุฑุญ ุณุคุงู ููุทูู: </p><br><h2 id="kogda-chto-ispolzovat" style=";text-align:right;direction:rtl">  ูุชู ุชุณุชุฎุฏู ูุงุฐุงุ </h2><br><h3 id="napravlenie-v-celom" style=";text-align:right;direction:rtl">  ุงูุงุชุฌุงู ุงูุนุงู </h3><br><p style=";text-align:right;direction:rtl">  ุชููุณู ุงูุฃุฎุทุงุก ุฅูู ุนุฏุฉ ูุณุชููุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุฎุทุงุก ูุจุฑูุฌ.  ูุนุงูุฌุชูุง ุจุงุณุชุฎุฏุงู ุงูุนููุฏ.  ุฃููุง ุชุคุฏู ุฅูู ุฌูุน ุงูุณุฌูุงุช ูุฅููุงุก ุงูุจุฑูุงูุฌ ูููุง ูููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุดู ุงูุณุฑูุน</a> .  ุฃูุซูุฉ: ูุคุดุฑ ูุงุฑุบ (ุนูุฏูุง ูููู ูุฐุง ุบูุฑ ุตุงูุญ) ุ  ุงููุณูุฉ ุนูู ุตูุฑ ุ  ุฃุฎุทุงุก ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูุชู ูู ูุชููุนูุง ุงููุจุฑูุฌ. </li><li style=";text-align:right;direction:rtl">  ุงูุฃุฎุทุงุก ุงููุงุฏุญุฉ ุงูุชู ูุฏููุง ุงููุจุฑูุฌ.  ูุชู ุทุฑุญูุง ููููู ูุฑุฉ ุฃูู ูู ุงูุนุงุฆุฏ ุงูุนุงุฏู ูู ุฏุงูุฉ ุ ููุง ูุฌุนู ุงุณุชุฎุฏุงู ุงูุงุณุชุซูุงุกุงุช ุงูุฏููุงููููุฉ ูู ูุง ูุจุฑุฑู.  ุนุงุฏุฉ ุ ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู ุงููุฑุนู ุจุฃูููู ููุจุฑูุงูุฌ ุฃู ุฅุนุทุงุก ุฎุทุฃ ุนูุฏ ุชูููุฐ ุงูุนูููุฉ.  ุฃูุซูุฉ: ููุฏ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฌุฃุฉ ุ  ุฃุฎุทุงุก ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูููุฏูุฉ ูู ุงููุจุฑูุฌ. </li><li style=";text-align:right;direction:rtl">  ุฃุฎุทุงุก ูุงุจูุฉ ููุงุณุชุฑุฏุงุฏ ุนูุฏูุง ูููุน <em>ุดูุก ูุง</em> ุงููุธููุฉ ูู ุฅููุงู ูููุชูุง ุ ูููู ูุฏ ุชุนุฑู ูุธููุฉ ุงูุงุณุชุฏุนุงุก ูุง ูุฌุจ ูุนูู ุจูุง.  ุชูุช ูุนุงูุฌุชูุง ุจูุงุณุทุฉ ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ.  ุฃูุซูุฉ: ุงูุนูู ูุน ูุธุงู ุงููููุงุช ุ  ุฃุฎุทุงุก ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงูุฃุฎุฑู ุ  ุจูุงูุงุช ุงููุณุชุฎุฏู ุบูุฑ ุตุญูุญุฉ  <code>vector::at()</code> . </li><li style=";text-align:right;direction:rtl">  ุฃูููุช ุงููุธููุฉ ูููุชูุง ุจูุฌุงุญ ุ ูุฅู ูุงู ุฐูู ุจูุชูุฌุฉ ุบูุฑ ูุชููุนุฉ.  <code>std::variant</code> <code>std::optional</code> ุ <code>std::expected</code> ุ <code>std::variant</code> .  ุฃูุซูุฉ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>stoi()</code></a> ุ  <code>vector::find()</code> ุ  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>map::insert</code></a> . </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ูู ุงูุฃูุซุฑ ููุซูููุฉ ุงูุชุฎูู ุชูุงููุง ุนู ุงุณุชุฎุฏุงู ุงูุงุณุชุซูุงุกุงุช ุงูุฏููุงููููุฉ ูู ุฃุฌู ุฌุนู ุงูุชุฌููุน "ุจุฏูู ุงุณุชุซูุงุกุงุช" ูุงูููููุง. </p><br><h3 id="errno" style=";text-align:right;direction:rtl">  ุชุฎุทุฆ </h3><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุงุณุชุจุฏุงู ุงููุธุงุฆู ุงูุชู ุชุณุชุฎุฏู <code>errno</code> ููุนูู ุจุณุฑุนุฉ ูุณูููุฉ ูุน ุฑููุฒ ุงูุฎุทุฃ C ู C ++ <code>fails(int)</code> <code>throws(std::errc)</code> ุ ุนูู ุงูุชูุงูู.  ูุจุนุถ ุงูููุช ุ ุณุชุชุนุงูุด ุงูุฅุตุฏุงุฑุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ ูู ูุธุงุฆู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ุซู ุณูุชู ุงูุฅุนูุงู ุนู ุงููุฏูู ุงููุฏูู. </p><br><h3 id="out-of-memory" style=";text-align:right;direction:rtl">  ููุงุฏ ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุชู ุงูุชุนุงูู ูุน ุฃุฎุทุงุก ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุนู ุทุฑูู ุงูุฎุทุงู ุงูุนุงู <code>new_handler</code> ุ ูุงูุฐู ููููู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุถุงุก ุนูู ููุต ุงูุฐุงูุฑุฉ ูููุงุตูุฉ ุงูุชูููุฐ </li><li style=";text-align:right;direction:rtl">  ุฑูู ุงุณุชุซูุงุก </li><li style=";text-align:right;direction:rtl">  ุจุฑูุงูุฌ ุงูุชุตุงุฏู </li></ol><br><p style=";text-align:right;direction:rtl">  ุงูุขู <code>std::bad_alloc</code> ุทุฑุญ <code>std::bad_alloc</code> ุงูุชุฑุงุถููุง.  ููุชุฑุญ ุงุณุชุฏุนุงุก <code>std::terminate()</code> ุจุดูู ุงูุชุฑุงุถู.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงูุณููู ุงููุฏูู ุ ูุงุณุชุจุฏู ุงููุนุงูุฌ ุจุงูุขุฎุฑ ุงูุฐู ุชุญุชุงุฌู ูู ุจุฏุงูุฉ <code>main()</code> . </p><br><p style=";text-align:right;direction:rtl">  ุณุชุตุจุญ ุฌููุน ุงููุธุงุฆู ุงูุญุงููุฉ ููููุชุจุฉ ุงูููุงุณูุฉ ุบูุฑ <code>noexcept</code> ุงูุจุฑูุงูุฌ ุนูุฏ <code>std::bad_alloc</code> .  ูู ุงูููุช ููุณู ุ ุณูุชู ุฅุถุงูุฉ ูุงุฌูุงุช ุจุฑูุฌุฉ ุชุทุจููุงุช ุฌุฏูุฏุฉ ูุซู <code>vector::try_push_back</code> ุ ููุง ูุณูุญ ุจุฃุฎุทุงุก ุชุฎุตูุต ุงูุฐุงูุฑุฉ. </p><br><h3 id="logic_error" style=";text-align:right;direction:rtl"> <code>logic_error</code> </h3> <br><p style=";text-align:right;direction:rtl">  ุงูุงุณุชุซูุงุกุงุช <code>std::logic_error</code> ุ <code>std::logic_error</code> ุ <code>std::domain_error</code> ุ <code>std::invalid_argument</code> <code>std::length_error</code> ุ <code>std::out_of_range</code> ุ <code>std::future_error</code> ุชูุฑูุฑ ุนู ุงูุชูุงู ุดุฑุท ูุณุจู ููุฏุงูุฉ.  ูุฌุจ ุฃู ูุณุชุฎุฏู ูููุฐุฌ ุงูุฎุทุฃ ุงูุฌุฏูุฏ ุงูุนููุฏ ุจุฏูุงู ูู ุฐูู.  ูู ูุชู ุชุฌุงูู ุฃููุงุน ุงูุงุณุชุซูุงุกุงุช ุงููุฏุฑุฌุฉ ุ ูููู ุณูุชู ุงุณุชุจุฏุงู ุฌููุน ุญุงูุงุช ุงุณุชุฎุฏุงููุง ุชูุฑูุจูุง ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุจู <code>[[expects: โฆ]]</code> . </p><br><h2 id="tekuschee-sostoyanie-proposal" style=";text-align:right;direction:rtl">  ุญุงูุฉ ุงูุงูุชุฑุงุญ ุงูุญุงูู </h2><br><p style=";text-align:right;direction:rtl">  ุงูุงูุชุฑุงุญ ุงูุขู ูู ุญุงูุฉ ูุณูุฏุฉ.  ููุฏ ุชุบูุฑ ุงููุซูุฑ ุจุงููุนู ุ ููุง ูุฒุงู ุจุฅููุงูู ุชุบููุฑ ุงููุซูุฑ.  ูู ุชูุฌุญ ุจุนุถ ุงูุชุทูุฑุงุช ูู ุงููุดุฑ ุ ูุฐุง ูุฅู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูููุชุฑุญุฉ <code>&lt;system_error2&gt;</code> ููุณุช ุฐุงุช ุตูุฉ ุชูุงููุง. </p><br><p style=";text-align:right;direction:rtl">  ุชู ูุตู ุงูุงูุชุฑุงุญ ูู 3 ูุซุงุฆู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">P709</a> - ุงููุณุชูุฏ ุงูุฃุตูู ูู ุดุนุงุฑ ุณูุชุฑ </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">P1095</a> - ุงุณุชุซูุงุกุงุช ูุญุฏุฏุฉ ูู ุฑุคูุฉ ููุงู ุฏูุบูุงุณ ุ ุชุบูุฑุช ุจุนุถ ุงููุญุธุงุช ุ ุฅุถุงูุฉ ุชูุงูู ูุบุฉ ุณู </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">P1028</a> - API ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุทุจูู ุงูุงุฎุชุจุงุฑ</a> <code>std::error</code> </li></ol><br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุญุงููุง ูุชุฑุฌู ูุฏุนู ุงูุงุณุชุซูุงุกุงุช ุงูุซุงุจุชุฉ.  ูุจูุงุก ุนูู ุฐูู ุ ููุณ ูู ุงููููู ุจุนุฏ ูุถุน ูุนุงููุฑูู. </p><br><p style=";text-align:right;direction:rtl">           C++23.   , , ,   C++26,    ,  ,  . </p><br><h2 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br><p style=";text-align:right;direction:rtl">            ,     ,     .    ,            .   . </p><br><p style=";text-align:right;direction:rtl">  ,   ^^ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar430690/">https://habr.com/ru/post/ar430690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar430680/index.html">ูุชุงุจุฉ ูุนุงูุฌ ูุจูุฆุฉ ุจุณูุทุฉ ูุฐูู</a></li>
<li><a href="../ar430682/index.html">ุซูุงุซ ุณููุงุช ูู ูุดุฑูุน ุงูุณุงุชู ุงููููุฑูู ุงูููุฑู: ูุฑุงุญู ุงูููู</a></li>
<li><a href="../ar430684/index.html">ูุณุญ ุนููุฏ Ethereum ุงูุญูุฉ ุจุญุซูุง ุนู ุฎุทุฃ ุฅุฑุณุงู ูู ูุชู ุงูุชุญูู ููู. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar430686/index.html">ูุธุฑุฉ ุนุงูุฉ: ุฃูู ุขูุฉ ูุทุน ุจุงููุงุก ุงูููุงุซ ูู WAZER</a></li>
<li><a href="../ar430688/index.html">ููู ุงูุจูุงูุงุช ุนุจุฑ QR ุงููุชุญุฑูุฉ ุฅูู Gomobile ู GopherJS</a></li>
<li><a href="../ar430692/index.html">ุงูููุฏุณุฉ ุงูุงุฌุชูุงุนูุฉ ูุน ุจุฑูุงูุฌ ุงููุธุงู ุงูุฃุณุงุณู ุงูุนุงููู ูู Windows (APPX)</a></li>
<li><a href="../ar430694/index.html">ุฏููู ูุตูุฑ ูุชุนูู C ++: ูุงุฐุง ููุชู ููุง ูุฌุจ ุฅูุดุงุคู</a></li>
<li><a href="../ar430700/index.html">ุณูุจุฏุฃ ุงูุนูู ุจูุธุงู ููุญุฏ ูุชุณุฌูู ูุดุงูุฏุงุช ุงูุฃููุงู ุนุจุฑ ุงูุฅูุชุฑูุช ูู ุฑูุณูุง</a></li>
<li><a href="../ar430702/index.html">ุชุฏุฑูุจ ุบุฑูุจ ุฌุฏุง</a></li>
<li><a href="../ar430704/index.html">ููู ุชุณุงุนุฏ ุชูููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ููู Aviasales: ุณุจุนุฉ ุฃูุซูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>