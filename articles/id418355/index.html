<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👨‍👧‍👧 🤽🏾 🧚🏼 Menyortir ... berdasarkan tabel hash (juga berdasarkan jumlah pohon dan HashMap) 🤠 👍🏽 🈸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tiga hari yang lalu, saya berpikir tentang menggabungkan penghitungan dan penyortiran pohon. Setelah mendiskusikannya dengan seorang kolega, kami samp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menyortir ... berdasarkan tabel hash (juga berdasarkan jumlah pohon dan HashMap)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418355/">  Tiga hari yang lalu, saya berpikir tentang menggabungkan penghitungan dan penyortiran pohon.  Setelah mendiskusikannya dengan seorang kolega, kami sampai pada keputusan berikut: gunakan HashMap alih-alih TreeSet (apa yang harus dilakukan TreeSet dengannya, Anda bisa lihat di bawah).  Tetapi bahkan ini tampak sedikit bagi saya, jadi saya memutuskan untuk mengimplementasikan tabel hash saya sendiri dan melihat apa yang terjadi.  Hasilnya tampak cukup menarik bagi saya. <br><a name="habracut"></a><br>  Ketiga jenis penyortiran ini bagus untuk kasus-kasus ketika kekuatan banyak elemen unik dalam array relatif kecil (apa yang dimaksud dengan ini akan menjadi jelas setelah kita melihat hasil tes). <br><br><h4>  Sortir Penghitungan Pohon </h4><br>  Kami membangun pohon Steam (Kunci, Kuantitas), di mana Kunci bertanggung jawab atas elemen array, dan Kuantitas adalah jumlah pengulangan elemen array ini.  Pohon itu seimbang secara alami, hitam dan merah, misalnya. <br><br>  Selanjutnya, semuanya logis.  Kami menambahkan semua elemen array ke Pair, dan mencari Pair di pohon (untuk menghindari penciptaan kembali objek, kami menggunakan Pair yang dibuat sebelumnya, dari mana kami mengubah Key. Di sini kami tidak tertarik pada Number, karena kami mencari kecocokan hanya dengan Key).  Jika Kunci tersebut sudah ada, tambah Kuantitas, jika tidak tambahkan Pasangan baru (Kunci, 1). <br><br>  Kami menulis ulang array, menghapus titik setiap kali dan menuliskan Kunci sebanyak Nomornya. <br><br>  Agar tidak mengimplementasikan pohon itu sendiri, untuk algoritma yang dijelaskan saya menggunakan TreeSet, yang bekerja pada pohon hitam-merah. <br><br><h4>  Menggunakan HashMap </h4><br>  Kami akan menyimpan elemen array sebagai kunci, dan jumlah pengulangan sebagai nilai kunci. <br><br><h4>  Menggunakan tabel hash saya sendiri </h4><br>  Saya memutuskan untuk menggunakan metode pengalamatan terbuka.  Dalam tabel hash, kami menyimpan objek dari kelas Pair, di mana pertama adalah kuncinya, kedua adalah jumlah pengulangan.  Secara alami, sebuah konstruktor ditambahkan yang mengambil ukuran awal tabel dan load factor.  Fungsi hash adalah yang paling sederhana: kita mengambil modulo kunci, dalam kasus akses berulang, tambahkan satu (unit bekerja dengan baik di mana array kunci adalah yang paling teratur, dan pada akhirnya kita harus mengurutkan semua kunci dengan pengurutan cepat standar, karena dalam tabel mereka dapat berubah menjadi tidak berurutan. )  Jadi kita dapat mengatakan bahwa ini adalah kombinasi hashing dan jenis lainnya. <br><br><h4>  Tabrakan </h4><br>  Jelas, tabrakan dapat terjadi dan ini akan berdampak buruk pada waktu menentukan hash dan kecepatan menyortir array hash yang dihasilkan (data yang dipesan atau hampir dipesan diurutkan lebih cepat).  Tapi ada satu hal: hash kita berubah saat tabel mengembang.  Jadi untuk memilih data seperti itu secara khusus menjadi jauh lebih sulit.  Selain itu, dimungkinkan untuk membuat load factor dan koefisien ekspansi secara acak (dalam kisaran tertentu, tentu saja), yang akan membuat tidak mungkin untuk memilih nilai yang mengarah pada awal tabrakan.  Nah, jika dalam satu tabel beberapa data menyebabkan collision, maka setelah hash, jumlah collision dapat dikurangi secara signifikan (beberapa kali).  Titik lemah akan menjadi faktorial angka, tetapi mereka sangat kecil (hingga 2 ^ 31, misalnya, hanya ada 11 dari mereka (tidak termasuk 0)). <br><br>  Hash kriptografi tidak cocok untuk kami, dan karena dengan itu Anda dapat melupakan susunan hash yang hampir dipesan (dalam arti memesan dengan kunci). <br><br><h4>  Waktu kerja </h4><br>  Jenis penghitungan pohon: dalam kasus terburuk, untuk O (n log n), paling-paling, untuk waktu linier. <br>  Penyortiran tabel hash: waktu hashing + kompleksitas pengurutan array hash (dapat bervariasi tergantung pada algoritma dan implementasi yang dipilih, jadi saya tidak akan menunjukkan apa pun di sini).  Memperkirakan kerumitan sulit karena penggunaan fungsi hash dan berbagai kemungkinan pendekatan untuk menyortir hash.  Pertanyaan ini membutuhkan penelitian tambahan, tetapi jelas bahwa dalam kasus terburuk (ketika data input akan secara sengaja dicocokkan dengan fungsi hash tertentu pada tahap eksekusi tertentu), waktu operasi akan menjadi O (n ^ 2). <br><br><h4>  Bagaimana dengan ingatan? </h4><br>  Penyortiran hitungan pohon akan membutuhkan memori tambahan O (berbeda (n)) <br>  Untuk tabel hash, kita membutuhkan memori O (berbeda (n)) + memori untuk mengurutkan hash (tergantung pada algoritma yang dipilih). <br><br>  Berikut adalah hasil dalam milidetik yang saya dapatkan pada angka acak ketika mengurutkan array objek menjadi 10 juta elts, dengan kisaran nilai [0;  x]: <br><br>  Pada tes, load factor dalam tabel hash saya = 0,75, kapasitas awal = 20, tabel dua kali lipat setiap kali <br><br>  Untuk x = 10: <br>  2044 - terintegrasi <br>  285 - penghitungan pohon (sort Usatov) <br>  276 - HashMap (Uringan Usatov-Prokurat) <br>  140 - dengan tabel hash saya (Urutkan Usatov-Prokurat menggunakan MyHashTable) <br><br>  x = 100: <br>  2406 - built-in <br>  455 - menghitung pohon <br>  283 - HashMap <br>  134 - tabel hash <br><br>  x = 1_000: <br>  2171 - terintegrasi <br>  930 - menghitung pohon <br>  380 - HashMap <br>  209 - tabel hash <br><br>  x = 10_000 <br>  2879 - terintegrasi <br>  1666 - menghitung pohon <br>  634 - HashMap <br>  326 - tabel hash <br><br>  x = 100_000 <br>  4045 - terintegrasi <br>  2899 - menghitung pohon <br>  866 - HashMap <br>  762 - tabel hash <br><br>  x = 1_000_000 <br>  4997 - terintegrasi <br>  5762 - menghitung pohon <br>  2505 - HashMap <br>  1294 - tabel hash <br><br>  x = 10_299_000 <br>  5083 - terintegrasi <br>  11480 - menghitung pohon <br>  5099 - HashMap <br>  3240 - tabel hash <br><br>  Seperti yang saya katakan di awal, sortasi ini paling cocok untuk kasus-kasus ketika kekuatan banyak elemen array cukup kecil relatif terhadap ukuran array. <br><br>  Perlu juga dicatat bahwa pemilahan bawaan berfungsi lebih cepat pada data yang dipesan (hampir dipesan) (atau array dalam urutan terbalik), tetapi metode saya melakukannya lebih cepat pada angka acak. <br><br>  Sortir Jumlah Pohon: <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usatovSort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[] arr)</span></span></span><span class="hljs-function"> </span></span>{ TreeSet&lt;MyPair&gt; tree = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TreeSet&lt;&gt;(); MyPair temp; MyPair mp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i : arr) { temp = mp; temp.first = i; temp = tree.ceiling(temp); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; temp.first == i) <span class="hljs-comment"><span class="hljs-comment">//   , .    ,      temp.second++; else tree.add(new MyPair(i, 1)); } int ptr = 0; while (!tree.isEmpty()) { temp = tree.pollFirst(); for (int i = 0; i &lt; temp.second; i++) arr[ptr++] = temp.first; } }</span></span></code> </pre> <br>  Sortir melalui HashMap: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usatovProkuratSortUsingHashMap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[] arr)</span></span></span><span class="hljs-function"> </span></span>{ HashMap&lt;Integer, Integer&gt; hm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); Integer temp; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer i : arr) { temp = hm.get(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) hm.put(i, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> hm.put(i, temp + <span class="hljs-number"><span class="hljs-number">1</span></span>); } ArrayList&lt;Integer&gt; keys = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(hm.keySet().size()); keys.addAll(hm.keySet()); keys.sort(Comparator.naturalOrder()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptr = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer i : keys) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; hm.get(i); j++) arr[ptr++] = i; }</code> </pre><br>  Sortir tabel hash saya: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usatovProkuratSortUsingMyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[] arr)</span></span></span><span class="hljs-function"> </span></span>{ MyHashTable mht = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyHashTable(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer i : arr) mht.add(i); MyPair[] res = mht.getPairs(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptr = <span class="hljs-number"><span class="hljs-number">0</span></span>; Arrays.sort(res, Comparator.comparingInt(o -&gt; o.first)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyPair mp : res) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; mp.second; i++) arr[ptr++] = mp.first; }</code> </pre><br>  Implementasi tabel hash: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MyPair[] hashArr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> loadFactor = <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> expansivity = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> DEFAULT_CAPACITY = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[DEFAULT_CAPACITY]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> loadFactor)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[DEFAULT_CAPACITY]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadFactor = loadFactor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[capacity]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> loadFactor)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[capacity]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadFactor = loadFactor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> loadFactor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expansivity)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[capacity]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadFactor = loadFactor; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expansivity = expansivity; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MyPair[] getPairs() { MyPair[] pairs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) count]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptr = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyPair i : hashArr) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) pairs[ptr++] = i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pairs; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MyPair </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(key + add) % hashArr.length].first == key) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hashArr[(key + add) % hashArr.length]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (add++ == hashArr.length) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count / hashArr.length &gt;= loadFactor) grow(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(key + add) % hashArr.length] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { hashArr[(key + add) % hashArr.length] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair(key, <span class="hljs-number"><span class="hljs-number">1</span></span>); count++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(key + add) % hashArr.length].first == key) { hashArr[(key + add) % hashArr.length].second++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } add++; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyPair newMP)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count / hashArr.length &gt;= loadFactor) grow(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(newMP.first + add) % hashArr.length] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { hashArr[(newMP.first + add) % hashArr.length] = newMP; count++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(newMP.first + add) % hashArr.length].first == newMP.first) { hashArr[(newMP.first + add) % hashArr.length].second += newMP.second; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } add++; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">grow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ MyPair[] oldHash = hashArr; hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (expansivity * hashArr.length)]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyPair i : oldHash) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) innerAdd(i); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">innerAdd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyPair mp)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(mp.first + add) % hashArr.length] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { hashArr[(mp.first + add) % hashArr.length] = mp; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(mp.first + add) % hashArr.length].first == mp.first) { hashArr[(mp.first + add) % hashArr.length].second += mp.second; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } add++; } } }</code> </pre><br>  Kelas uap: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPair</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Comparable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPair</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> first; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> second; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> first, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> second)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.first = first; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.second = second; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compareTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyPair o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first - o.first; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getClass() != o.getClass()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; MyPair myPair = (MyPair) o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first == myPair.first; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first; } }</code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id418355/">https://habr.com/ru/post/id418355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id418341/index.html">Selamat Hari Administrator Sistem! Kartu ucapan dengan makna</a></li>
<li><a href="../id418345/index.html">Dokumentasi format pertukaran informasi - mudah dan sederhana</a></li>
<li><a href="../id418347/index.html">Bagaimana saya menulis library C ++ 11 standar atau mengapa boost sangat menakutkan. Bab 4.3</a></li>
<li><a href="../id418349/index.html">Layanan Azure Kubernetes (AKS) dan PowerShell</a></li>
<li><a href="../id418353/index.html">Pikirkan peta alih-alih kasus uji, atau Bagaimana visualisasi memungkinkan Anda menguji aplikasi lebih cepat</a></li>
<li><a href="../id418357/index.html">DEFCON 23. "Pengakuan cyberstalker profesional." Ken Westin</a></li>
<li><a href="../id418359/index.html">Fintech digest: identifikasi warga supermarket keuangan, mantan karyawan QIWI yang ditambang 2,4% dari bitcoin, BRICS dan blockchain</a></li>
<li><a href="../id418361/index.html">Mengapa E dalam singkatan EHD adalah tentang proses bisnis</a></li>
<li><a href="../id418363/index.html">Tiga tanda pasti bahwa sudah waktunya untuk memotong kerangka Anda</a></li>
<li><a href="../id418365/index.html">Lambat tapi Benar: Lautan dan Lautan Mengancam Infrastruktur Internet Global</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>