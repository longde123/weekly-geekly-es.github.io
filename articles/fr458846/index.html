<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüè´ üëÇüèø ü¶ç Comment d√©velopper un autre jeu de plateforme en utilisant Unity. Un autre tutoriel ü§æüèæ ü§≥ üöó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 


 Un autre article vous attend sous la coupe, qui racontera comment je me suis fix√© l'objectif de programmer le jeu, bas√© sur la trad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment d√©velopper un autre jeu de plateforme en utilisant Unity. Un autre tutoriel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458846/"><p>  Bonjour, Habr! </p><br><p>  Un autre article vous attend sous la coupe, qui racontera comment je me suis fix√© l'objectif de programmer le jeu, bas√© sur la traduction de l'article sur le Habr appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Patterns de conception de niveau pour les jeux 2D</a> . </p><br><p>  L'article contient beaucoup de texte (r√©gulier et source) et de nombreuses images. </p><a name="habracut"></a><br><p>  Avant de commencer mon premier article, apprenons √† vous conna√Ætre.  Je m'appelle Denis.  Je travaille en tant qu'administrateur syst√®me avec une exp√©rience totale de 7 ans.  Ce n‚Äôest pas √† moi de vous dire qu‚Äôun administrateur syst√®me est un type de personnel informatique qui se d√©ploie soigneusement une fois, puis envisage le scintillement de divers caract√®res sur un moniteur.  Au fil du temps, je suis arriv√© √† la conclusion qu'il √©tait temps d'√©largir les fronti√®res de la connaissance et de passer √† la programmation.  Sans entrer dans les d√©tails, j'ai essay√© de faire des projets en C ++ et Python.  Mais apr√®s une ann√©e d'√©tude, je suis arriv√© √† la conclusion que la programmation de mon logiciel d'application et de syst√®me n'est pas la mienne.  Pour diverses raisons. </p><br><p>  Apr√®s r√©flexion, je me suis pos√© la question: qu'est-ce que j'aime vraiment faire avec les diff√©rents types d'√©quipements informatiques?  Ma question √† moi-m√™me m'a jet√© loin dans l'enfance, √† savoir dans les happy hours pass√©s pour PS1, PS2, Railroad Tycoon 3 pour PC ... Eh bien, vous comprenez.  Jeu vid√©o! </p><br><p>  Par le nombre de supports de formation divers, le choix s'est port√© sur Unity (ne pas r√©inventer la roue?).  Apr√®s un mois de lecture et de visualisation de divers mat√©riaux, j'ai d√©cid√© de lancer le premier jeu pour enfants tr√®s simple sur le march√© du jeu.  Pour surmonter la peur pour ainsi dire.  Apr√®s tout, publier des applications sur le march√© du jeu n'est pas effrayant, non? </p><br><p>  Apr√®s quelques mois, j'ai sorti le jeu de plateforme d√©j√† plus complexe.  Puis il y a eu une pause (apr√®s tout, le travail doit √™tre travaill√©, apr√®s tout). </p><br><p>  Il y a environ deux semaines, j'ai vu une traduction d'un article sur un hub appel√© Level Design Patterns for 2D games ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://habr.com/en/post/456152/</a> ) et je me suis dit - pourquoi pas?  L'article a un tableau simple et clair avec une liste de ce qui devrait √™tre dans le jeu pour qu'il soit int√©ressant.  J'ai gentiment copi√© le tableau pour moi dans OneNote et marqu√© chaque motif avec la balise Cases (qui peut √™tre marqu√©e comme termin√©e). </p><br><p>  Qu'est-ce que je veux obtenir en cons√©quence?  Votre critique.  Comme j'aime me dire - si vous voulez apprendre √† nager, plongez t√™te baiss√©e.  Si vous pensez que j'ai bien fait quelque chose - √©crivez-moi √† ce sujet dans un commentaire.  Si vous pensez que j'ai mal fait quelque chose, √©crivez-y doublement. </p><br><p>  Je vais commencer mon long programme pour programmer un autre jeu de plateforme. </p><br><h3>  Avatar </h3><br><p>  <em>Une entit√© contr√¥l√©e par les joueurs dans un jeu.</em>  <em>Par exemple, Mario et Luigi dans Super Mario Bros (Nintendo, 1985).</em> </p><br><p>  Il existe plusieurs sous-t√¢ches qui doivent √™tre mises en ≈ìuvre pour donner vie au h√©ros.  √Ä savoir: </p><br><pre><code class="plaintext hljs">‚Ä¢   ( ) ‚Ä¢      ‚Ä¢      ‚Ä¢       ‚Ä¢       </code> </pre> <br><p>  Pour impl√©menter l'animation, nous devons convertir un sprite unique en un sprite multiple.  Cela se fait incroyablement simplement.  Ajoutez l'image-objet au dossier du projet et recherchez-le dans l'Explorateur Explorateur Unity Explorer.  Ensuite, en cliquant sur l'image-objet dans la fen√™tre d'inspection, change la valeur de la propri√©t√© <strong>SptiteMode</strong> de <strong>Unique</strong> √† <strong>Multiple</strong> . </p><br><p><img src="https://habrastorage.org/webt/xx/ot/ny/xxotnyobz6-0kunbcizdwwk-4zu.png" alt="image"></p><br><p>  Cliquez sur <strong>Appliquer</strong> , puis sur <strong>SpriteEditor</strong> . </p><br><p>  Dans la fen√™tre de l' <strong>√©diteur de sprites</strong> , vous devez s√©lectionner chaque image de la future animation avec la souris, comme indiqu√© dans la figure ci-dessous. </p><br><p>  De plus, Unity offre la possibilit√© de surligner automatiquement les limites des objets dans l'image-objet.  Pour ce faire, dans la fen√™tre de l' <strong>√©diteur de sprites</strong> , vous devez cliquer sur le bouton <strong>Trancher</strong> .  Dans le menu d√©roulant, vous devriez avoir <strong>Type =&gt; Automatique, Pivot =&gt; Centre</strong> .  Il vous suffit de cliquer sur le bouton <strong>Slice</strong> .  Apr√®s cela, tous les objets √† l'int√©rieur du sprite seront s√©lectionn√©s automatiquement. </p><br><img src="https://habrastorage.org/webt/bf/tb/kv/bftbkvncerh-ybaf6_nlgaxprdg.png"><br><p>  Faisons cette op√©ration pour toutes les autres animations.  Ensuite, vous devrez configurer les √©tats d'animation et leur commutation.  Cela se fait en deux √©tapes.  La premi√®re action, le code de programme. <br>  Cr√©ez un objet de jeu vide.  Pour ce faire, cliquez avec le bouton droit sur l'onglet <strong>Hi√©rarchie</strong> et s√©lectionnez <strong>Cr√©er vide</strong> dans le menu d√©roulant. </p><br><img src="https://habrastorage.org/webt/l1/zb/ap/l1zbap5u09_kzb1mllj1tqwizgw.png"><br><p>  Un objet de jeu vide, qui est cr√©√© sur la sc√®ne, n'a par d√©faut qu'un seul composant - <strong>Transformer</strong> .  Ce composant d√©termine la position de l'objet sur la sc√®ne, l'angle d'inclinaison et son √©chelle. </p><br><p>  Vous pouvez rencontrer le mot <strong>transformer</strong> dans deux sens diff√©rents: </p><br><blockquote><ul><li>  <strong>Transformer</strong> est une classe.  Comme il s'agit d'une classe, Transform d√©crit une <strong>impl√©mentation logicielle</strong> des coordonn√©es de cet objet et de ses dimensions. </li><li>  <strong>transform</strong> est une instance d'une classe.  Autrement dit, <strong>vous pouvez vous r√©f√©rer √† un objet sp√©cifique</strong> et modifier sa position ou son √©chelle sur la sc√®ne.  Par exemple, plus loin dans le code se trouve la ligne: <br><pre> <code class="cs hljs">transform.position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2 (transform.position.x + dirX, transform.position.y + dirY);.</code> </pre> <br><br>  Cette ligne sera responsable du mouvement de Lucas sur sc√®ne. </li></ul><br></blockquote><p>  Pour cr√©er votre propre composant, cliquez sur le bouton <strong>Ajouter un composant</strong> dans l'onglet de l'inspecteur d'objets.  Ensuite, une bo√Æte de recherche appara√Æt parmi les composants standard.  Il suffit de commencer √† taper le nom du futur script (ou composant d√©j√† impl√©ment√©), s'il n'y a pas de noms appropri√©s, Unity vous proposera de cr√©er un nouveau composant.  J'ai appel√© ce composant <strong>HeroScript.cs</strong> . </p><br><img src="https://habrastorage.org/webt/fi/hf/gn/fihfgnpyl-ndmnx23l8mbotdh4a.png"><br><p>  Tout d'abord, nous d√©crivons les champs qui stockeront des informations sur la composante visuelle et physique de Lucas: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Animator animator; <span class="hljs-comment"><span class="hljs-comment">//      . private Rigidbody2D rb2d; //rb    </span></span></code> </pre> </div></div><br><p>  Ensuite, les champs qui r√©pondront au mouvement du personnage: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> Vector3 localScale; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> facingRight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dirX, dirY; <span class="hljs-comment"><span class="hljs-comment">//    [Range(1f, 20f)] [SerializeField] private float moveSpeed; //    private SpriteRenderer sprite; //   SpriteRenderer /*   ,     */</span></span></code> </pre> </div></div><br><p>  Un d√©but a √©t√© fait, excellent.  Ensuite, une √©num√©ration sera d√©crite et une propri√©t√© sera √©crite qui sera charg√©e de changer l'√©tat de l'animation.  Cette √©num√©ration doit √™tre √©crite en dehors de la classe: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/* *      . *         *    . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CharState { idle, <span class="hljs-comment"><span class="hljs-comment">//   0 Run, //   1 Walk, //   2 Die //   3 }</span></span></code> </pre> </div></div><br><p>  Nous impl√©mentons une propri√©t√© qui recevra et d√©finira un nouvel √©tat d'animation: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CharState State { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> {<span class="hljs-comment"><span class="hljs-comment">//    CharState    animator       int return (CharState)animator.GetInteger("State"); } set { //    animator     int    State       ,      int. animator.SetInteger("State", (int)value); } }</span></span></code> </pre> </div></div><br><p>  La partie logicielle est termin√©e.  Nous avons maintenant une √©num√©ration et une propri√©t√© qui seront associ√©es au changement d'animation.  Ensuite, la deuxi√®me √©tape.  Dans l'√©diteur Unity, vous devez lier l'√©tat de l'animation et indiquer √† quelles valeurs int elles doivent √™tre modifi√©es. </p><br><p>  Pour ce faire, vous devez associer les sprites multiples cr√©√©s pr√©c√©demment √† un objet de jeu vide.  Tout ce que vous avez √† faire est de s√©lectionner les cadres dans l'Explorateur Unity et de les faire glisser sur un objet de jeu vide, auquel nous avons pr√©c√©demment fix√© le script. </p><br><p><img src="https://habrastorage.org/webt/zx/md/y8/zxmdy88fwc5gglpbjz3bkj0rjfq.png" alt="image"></p><br><p>  Faites-le avec chaque animation suivante.  De plus, dans l'explorateur avec des animations, vous trouverez l'apparence d'un objet avec un diagramme et un bouton <strong>Lecture</strong> .  Double-cliquez dessus pour ouvrir l'onglet <strong>Animateur</strong> .  A l'int√©rieur, vous verrez plusieurs blocs avec animations et initialement, seuls les √©tats d' <strong>Entr√©e</strong> et le premier jeu d'animation qui √©taient connect√©s sont connect√©s.  <strong>AnyState</strong> et les autres animations seront affich√©s sous forme de carr√©s gris normaux.  Pour tout lier, vous devez cliquer sur le statut d' <strong>AnyState</strong> et s√©lectionner le seul menu d√©roulant <strong>Effectuer une transaction</strong> et le lier au bloc gris.  Cette op√©ration doit √™tre effectu√©e pour chaque condition.  √Ä la fin, vous devriez obtenir quelque chose comme ce que vous voyez dans la capture d'√©cran ci-dessous. </p><br><p><img src="https://habrastorage.org/webt/-d/0d/7j/-d0d7j-y1okjqhr6wgywx2ht768.png" alt="image"></p><br><p>  Ensuite, vous devez indiquer explicitement quel <strong>√©tat</strong> doit √™tre exactement afin de d√©marrer l'animation n√©cessaire.  Faites attention √† la capture d'√©cran, √† savoir sa partie gauche.  Onglet <strong>Param√®tres</strong> .  Une variable de type <strong>int State y est</strong> cr√©√©e.  Ensuite, faites attention au c√¥t√© droit.  Tout d'abord, √† partir de la transition de l'animation, vous devez d√©cocher la case <strong>Can Transaction To Self</strong> .  Cette op√©ration vous √©vitera des transitions d'animation √©tranges et parfois compl√®tement incompr√©hensibles √† elle-m√™me et √† la section <strong>Conditions</strong> , o√π nous avons indiqu√© que cette transition d'animation avait la valeur 3 de la variable <strong>State</strong> .  Apr√®s cela, Unity saura quelle animation ex√©cuter. <br>  Tout est fait pour le mouvement des personnages anim√©s.  Continuons. </p><br><p>  La prochaine √©tape consiste √† apprendre √† Lucas √† se d√©placer sur la sc√®ne.  C'est enti√®rement de la programmation.  Pour d√©placer le personnage autour de la sc√®ne, vous aurez besoin de boutons, en cliquant sur lequel Lucas va aller et venir.  Pour ce faire, dans l'onglet <strong>Assets Store</strong> , nous devons importer des actifs standard, mais pas tous, uniquement quelques composants suppl√©mentaires, √† savoir: </p><br><p>  <strong>‚Ä¢ CrossPlatformInput</strong> <strong><br></strong>  <strong>‚Ä¢ R√©dacteur</strong> <strong><br></strong>  <strong>‚Ä¢ Environnement</strong> </p><br><p>  Apr√®s l'importation de l'actif, la fen√™tre principale d'Unity doit √™tre modifi√©e et un onglet suppl√©mentaire <strong>Mobile Input</strong> appara√Æt.  Nous l'activons. </p><br><p>  Cr√©ons de nouveaux √©l√©ments d' <strong>interface utilisateur</strong> sur la sc√®ne - boutons de contr√¥le.  Cr√©ez 4 boutons dans chaque direction.  Haut, bas, avant et arri√®re.  Dans le composant Image, nous attribuons aux boutons une image qui correspondra √† l'image, ce qui signifie la capacit√© de se d√©placer.  Cela devrait ressembler √† la capture d'√©cran ci-dessous: </p><br><img src="https://habrastorage.org/webt/c6/jv/kk/c6jvkketndj8sqq4vodxamn-oni.png"><br><p>  √Ä chaque bouton, ajoutez un composant <strong>AxisTouchButton</strong> .  Ce script n'a que 4 champs.  Le champ <strong>axisName</strong> signifie √† quel nom r√©pondre lorsqu'il est appel√©.  Le champ <strong>axisValue est</strong> responsable de la direction dans laquelle Lucas se d√©placera.  Le champ <strong>responseSpeed</strong> est responsable de la vitesse √† laquelle Lucas d√©veloppera sa vitesse.  Le champ <strong>returnToCentreSpeed ‚Äã‚Äãest</strong> responsable de la vitesse √† laquelle le bouton revient au centre.  Pour le bouton Suivant, laissez-le tel quel.  Pour le bouton de retour, modifiez la valeur de <strong>axisValue</strong> √† -1 pour que Lucas recule.  Pour les boutons Haut et Bas, changez <strong>axisName</strong> en <strong>Vertical</strong> .  Pour le bouton <strong>AxeValeur du</strong> bouton <strong>Haut,</strong> d√©finissez la valeur sur 1, pour Bas -1. </p><br><p>  Ensuite, modifiez <strong>HeroScript.cs</strong> .  Ajouter un espace de noms √† la directive <strong>using</strong> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityStandardAssets.CrossPlatformInput; <span class="hljs-comment"><span class="hljs-comment">//    .</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs">       : <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> Vector3 localScale; <span class="hljs-comment"><span class="hljs-comment">//   bool facingRight = true; [SerializeField] private float dirX, dirY; //    [Range(1f, 20f)] [SerializeField] private float moveSpeed; //    private SpriteRenderer sprite; //   SpriteRenderer /*   ,     */</span></span></code> </pre> </div></div><br><p>  Dans la m√©thode Start standard, ajoutez le code suivant: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { localScale = transform.localScale; animator = GetComponent&lt;Animator&gt;(); <span class="hljs-comment"><span class="hljs-comment">//     . sprite = GetComponent&lt;SpriteRenderer&gt;(); //  SpriteRenderer rb = GetComponent&lt;Rigidbody2D&gt;(); State = CharState.idle; }</span></span></code> </pre> </div></div><br><p>  Nous cr√©ons une m√©thode qui sera charg√©e de d√©placer le h√©ros: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveHero</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { dirX = CrossPlatformInputManager.GetAxis (<span class="hljs-string"><span class="hljs-string">"Horizontal"</span></span>) * moveSpeed * Time.deltaTime; dirY = CrossPlatformInputManager.GetAxis (<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>) * moveSpeed * Time.deltaTime; transform.position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2 (transform.position.x + dirX, transform.position.y + dirY); }</code> </pre> </div></div><br><p>  Comme vous pouvez le voir, tout est simple.  Les <strong>champs</strong> <strong>dirX</strong> et <strong>DirY</strong> enregistrent des informations sur la direction de l'axe ( <strong>horizontal</strong> et <strong>vertical</strong> ) multipli√©es par la vitesse (qui devra √™tre sp√©cifi√©e dans l'√©diteur) et multipli√©es par le temps de trajet depuis la derni√®re image. <br>  <strong>transform.position</strong> √©crit la nouvelle position dans le composant <strong>Transform</strong> de notre objet de jeu. </p><br><p>  Sur le plan pratique du probl√®me, vous pouvez ex√©cuter la sc√®ne et voir comment Lucas tombe dans l'ab√Æme, car aucun objet en dessous ne peut emp√™cher cela.  Lucas est toujours dans l'animation <strong>Idle</strong> et ne se retourne pas lorsque nous le renvoyons.  Pour cela, le script doit √™tre modifi√©.  Cr√©ez une m√©thode qui d√©termine dans quelle direction Lucas regarde: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckWhereToFace</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirX &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { facingRight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirX &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { facingRight = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirX == <span class="hljs-number"><span class="hljs-number">0</span></span>) { State = CharState.idle; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirY &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirY &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((facingRight) &amp;&amp; (localScale.x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)) || ((!facingRight) &amp;&amp; (localScale.x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>))) localScale.x *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; transform.localScale = localScale;</code> </pre> </div></div><br><p>  Cette partie du code n'est pas non plus difficile.  La m√©thode d√©crit que si <strong>dirX</strong> &gt; 0 (si nous allons √† droite), alors nous faisons tourner le sprite dans cette direction et d√©marrons l'animation de marche.  Si moins de 0, faites pivoter Lucas de 180 degr√©s et d√©marrez l'animation.  Si <strong>dirX</strong> est nul, Lucas est debout et vous devez d√©marrer l'animation d'attente. </p><br><p>  Pourquoi est-il pr√©f√©rable d'utiliser une op√©ration avec <strong>Scale</strong> dans ce cas que d'utiliser <strong>flipX = true</strong> ?  √Ä l'avenir, je d√©crirai la capacit√© de prendre n'importe quel objet en main et, naturellement, Lucas peut se retourner en tenant quelque chose dans ses mains.  Si j'utilisais le reflet habituel, l'objet que je tiendrais dans mes mains resterait sur le c√¥t√© droit (par exemple) lorsque Lucas regarde vers la gauche et vice versa.  Un zoom avant d√©placera l'objet qui tient Lucas dans la m√™me direction o√π Lucas lui-m√™me s'est tourn√©. </p><br><p>  Nous <strong>pla√ßons la</strong> fonction <strong>CheckWhereToFace ()</strong> dans la fonction <strong>Update ()</strong> , pour sa surveillance image par image. </p><br><p>  Super.  Les 2 premiers points de 5 sont compl√©t√©s.  Passons aux besoins de Lucas.  Disons que Lucas aura 3 types de besoins qui doivent √™tre satisfaits pour rester en vie.  C'est le niveau de vie, le niveau de faim et le niveau de soif.  Vous devez cr√©er pour cela un panneau simple et compr√©hensible avec un indicateur de chaque √©l√©ment.  Pour cr√©er un tel panneau, cliquez avec le bouton droit et s√©lectionnez <strong>UI =&gt; Panel</strong> . </p><br><p>  Marquons-le approximativement comme indiqu√© ci-dessous </p><br><p><img src="https://habrastorage.org/webt/yp/oz/fs/ypozfsb3q_vygo6usfn1t_btnyc.png" alt="image"></p><br><p>  Le panneau se compose de trois images (Image) de chaque besoin (√† gauche).  √Ä droite, le panneau lui-m√™me.  Sur le premier calque (nous le dirons ainsi), il y a un indicateur de couleur (Image) qui n'a pas de transparence, un objet Image est copi√© en dessous, qui est transparent.  Cette image est √† moiti√© transparente √† l'original.  En outre, Image, qui n'a pas de transparence, a la propri√©t√© Image <strong>Type = Filled</strong> .  Cette fonctionnalit√© nous permettra de simuler une diminution de l'ampleur de l'√©chelle des besoins. </p><br><p><img src="https://habrastorage.org/webt/ld/vo/qy/ldvoqyj2ioak7ufaycjjmjvbeta.png" alt="image"></p><br><p><img src="https://habrastorage.org/webt/l7/wu/ok/l7wuokjirtsp-p66wixm2zybfbu.png" alt="image"></p><br><p>  D√©finissez de nouvelles variables statiques: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Health = <span class="hljs-number"><span class="hljs-number">100</span></span>, Eat = <span class="hljs-number"><span class="hljs-number">100</span></span>, Water = <span class="hljs-number"><span class="hljs-number">100</span></span>, _Eat = <span class="hljs-number"><span class="hljs-number">0.05f</span></span>, _Water = <span class="hljs-number"><span class="hljs-number">0.1f</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        .    _  . /*   ,     */ /*  ,      */ [SerializeField] Image iHealt, iEat, iWater; //      /*   ,      */</span></span></code> </pre> </div></div><br><p>  Dans ce cas, j'utilise des champs statiques.  Cela est fait pour que ces champs soient uniques √† toute la classe.  De plus, cela nous permettra d'acc√©der directement √† ces champs par nom de classe.  Nous √©crivons quelques fonctions simples: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fEat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { Eat = Eat - x * Time.deltaTime; iEat.fillAmount = Eat / <span class="hljs-number"><span class="hljs-number">100f</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ,        return Eat; } private float fWater(float x) { Water = Water - x * Time.deltaTime; iWater.fillAmount = Water / 100; return Water; }</span></span></code> </pre> </div></div><br><p>  Ensuite, nous √©crivons une m√©thode qui recueille des informations sur le d√©sir de manger et de boire: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Needs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fEat(_Eat) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.Log(Eat); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fEat(<span class="hljs-number"><span class="hljs-number">0</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { StartCoroutine(ifDie()); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fWater(_Water) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.Log(Water); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fWater(<span class="hljs-number"><span class="hljs-number">0</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { StartCoroutine(ifDie()); }</code> </pre> </div></div><br><p>  La fonction <strong>Needs ()</strong> est plac√©e dans la fonction <strong>Update ()</strong> et chaque trame est appel√©e.  En cons√©quence, dans les lignes </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fEat(_Eat) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p>  une fonction est appel√©e qui passe en param√®tre la quantit√© √† retirer des variables <strong>Eat</strong> et <strong>Water</strong> .  Si le r√©sultat de la fonction n'est pas 0, alors Lucas n'est pas encore mort de soif ou de faim.  Si Lucas meurt de faim ou de blessures mortelles, alors nous faisons de la coroutine </p><br><pre> <code class="cs hljs">StartCoroutine(ifDie());</code> </pre> <br><p>  qui d√©marre l'animation de la mort et red√©marre le niveau: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ifDie</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { State = CharState.Die; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">)</span></span>; SceneManager.LoadScene(<span class="hljs-string"><span class="hljs-string">"WoodDay"</span></span>, LoadSceneMode.Single); }</code> </pre> </div></div><br><h3>  Carrelage dur </h3><br><p>  <em>Un objet de jeu qui ne permet pas au joueur de le traverser.</em>  <em>Exemple: le genre dans Super Mario Bros (Nintendo, 1985).</em> </p><br><p>  Pour r√©aliser la terre et emp√™cher Lucas de la traverser, vous devez connecter les composants <strong>BoxCollider2D</strong> et <strong>Rigidbody2D</strong> √† Lucas.  En outre, vous avez besoin d'un sprite de la terre sur lequel le composant <strong>BoxCollider2D</strong> sera <strong>situ√©</strong> .  Le composant <strong>BoxCollider2D</strong> impl√©mente les collisionneurs et leur comportement de collision.  A ce stade, nous n'avons besoin de rien d'autre que d'emp√™cher l'√©chec de Lucas underground.  Tout ce que nous pouvons √©ventuellement modifier est les bordures du collisionneur.  Dans mon cas, le sprite au sol a une surface en herbe et pour qu'il ne semble pas que l'herbe soit capable de supporter le poids de Lucas, je vais √©diter les bordures du composant. </p><br><img src="https://habrastorage.org/webt/ey/0n/hv/ey0nhvwblv9xamkiyesto7exsve.png"><br><p>  Maintenant, un processus de marquage de niveau passionnant.  Pour plus de commodit√©, vous pouvez exporter ce cube de terrain dans un pr√©fabriqu√©.  Un pr√©fabriqu√© est un conteneur d'un objet de jeu, lors de la modification duquel vous pouvez appliquer automatiquement des modifications √† tous les objets de jeu cr√©√©s √† partir de ce pr√©fabriqu√©.  Ensuite, clonez ce pr√©fabriqu√© avec CTRL + D (apr√®s l'avoir s√©lectionn√© dans l'onglet de hi√©rarchie) et placez-le sur la sc√®ne. </p><br><p><img src="https://habrastorage.org/webt/b6/dm/6t/b6dm6tbsz6mezi1upkenyd9sloa.png" alt="image"></p><br><h3>  √âcran </h3><br><p>  <em>La partie du niveau / monde du jeu qui est actuellement visible par le joueur.</em> </p><br><p>  Installez une cam√©ra qui suivra le joueur sur le point d'afficher une partie de la sc√®ne.  Ensuite, il y aura un script tr√®s simple √† impl√©menter: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject objectToFollow; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed = <span class="hljs-number"><span class="hljs-number">2.0f</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CamFoll(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CamFoll</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> interpolation = speed * Time.deltaTime; Vector3 position = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position; position.y = Mathf.Lerp(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position.y, objectToFollow.transform.position.y, interpolation); position.x = Mathf.Lerp(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position.x, objectToFollow.transform.position.x, interpolation); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position = position; }</code> </pre> </div></div><br><p>  Dans le champ <strong>objectToFollow du</strong> type <strong>GameObject</strong> , un objet sera affect√© √† surveiller, et dans le champ speed, la vitesse √† laquelle il est n√©cessaire de se d√©placer en douceur derri√®re le GameObject affect√©. </p><br><p>  Les informations sur la vitesse de d√©placement depuis la derni√®re image sont enregistr√©es dans le champ d'interpolation.  Ensuite, la m√©thode Lerp sera utilis√©e, ce qui assurera un mouvement fluide de la cam√©ra derri√®re Lucas lorsqu'elle se d√©place le long des axes X et U. Malheureusement, je ne peux pas expliquer le fonctionnement de la ligne </p><br><pre> <code class="cs hljs">position.y = Mathf.Lerp(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position.y, objectToFollow.transform.position.y, interpolation);</code> </pre> <br><p>  en termes de math√©matiques.  Par cons√©quent, je dirai plus simple - cette m√©thode allongera le temps d'ex√©cution de toute action.  Dans notre cas, il s'agit du mouvement de la cam√©ra derri√®re l'objet. </p><br><h3>  Danger </h3><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><p>  Entit√©s qui emp√™chent le joueur de terminer sa t√¢che.  Exemple: pointes de 1001 pointes (Nicalis et 8bits Fanatics, 2014). </p></div></div><br><p>  Commen√ßons par ajouter quelque chose qui non seulement emp√™chera Lukas de traverser la sc√®ne jusqu'√† la fin, mais affectera le nombre de ses vies et la possibilit√© de mourir (pour un, nous mettrons en ≈ìuvre le cinqui√®me sous-probl√®me pour mettre en ≈ìuvre l'histoire de la vie de Lucas - le h√©ros peut √™tre tu√© ou peut mourir). <br>  Dans ce cas, nous r√©partissons les pointes sur la sc√®ne qui seront cach√©es derri√®re la v√©g√©tation et seule l'attention du joueur aidera √† passer. </p><br><p>  Cr√©ez un <strong>GameObject</strong> vide et connectez-y les composants <strong>SpriteRenderer</strong> et <strong>PolygonCollider2D</strong> .  Dans le composant <strong>SpriteRenderer</strong> , <strong>nous</strong> connectons l'image-objet du bouton barbel√© ou tout autre objet comme souhait√©.  Attribuez √©galement <strong>tag = Thorn √† la</strong> pointe. </p><br><p>  Ensuite, sur le Lucas <strong>GameObject, nous</strong> cr√©ons un script qui sera responsable de ce qui lui arrivera si Lucas entre en collision avec d'autres collisionneurs.  Dans mon cas, je l'ai appel√© <strong>ColliderReaction.cs</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rigidbody2D rb2d; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { rb2d = GetComponent&lt;Rigidbody2D&gt;(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerEnter2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Thorn"</span></span>: { rb2d.AddForce(transform.up * <span class="hljs-number"><span class="hljs-number">4</span></span>, ForceMode2D.Impulse); HeroScript.Health = HeroScript.Health - <span class="hljs-number"><span class="hljs-number">5</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p>  L'essence du script est aussi simple que 2x2.  Lorsqu'une balise <strong>Thorn entre</strong> en <strong>collision</strong> avec un objet de jeu, l'instruction <strong>Switch se</strong> compare aux candidats que nous avons sp√©cifi√©s.  Dans notre cas, pour l'instant, c'est <strong>Thorn</strong> .  Tout d'abord, Lucas vomit, puis nous nous tournons vers une variable statique et prenons 5 unit√©s de vie √† Lucas.  Pour l'avenir, je peux dire qu'il est logique de d√©crire la m√™me chose pour un conflit avec des ennemis: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Enemy"</span></span>: { rb2d.AddForce(transform.up * <span class="hljs-number"><span class="hljs-number">2</span></span>, ForceMode2D.Impulse); HeroScript.Health = HeroScript.Health - <span class="hljs-number"><span class="hljs-number">10</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;</code> </pre> </div></div><br><p>  Ensuite, je propose de tuer deux oiseaux avec une pierre. </p><br><h3>  √âl√©ment collect√© et r√®gle. </h3><br><p>  Un objet de jeu que les joueurs peuvent ramasser. </p><br><p>  Nous proposons la r√®gle que si Lucas veut aller entre les √Æles et grimper, alors vous devez collecter un arbre afin de construire des ponts et des escaliers. <br>  Selon des m√©thodes d√©j√† adopt√©es, nous allons cr√©er un arbre et des escaliers. </p><br><p>  Nous allons connecter un script √† l'arborescence qui sera responsable du nombre de journaux que vous pourrez supprimer si vous commencez √† le couper.  √âtant donn√© que seule l'animation de l'attaque a √©t√© propos√©e dans l'ensemble de sprites, nous l'utiliserons lorsque nous couperons l'arbre (co√ªts de production). <br>  Le script qui se trouve sur l'arborescence: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Transform inst; <span class="hljs-comment"><span class="hljs-comment">//     [SerializeField] private GameObject FireWoodPref; //   [SerializeField] private int fireWood; //       </span></span></code> </pre> </div></div><br><p>  Lorsque le niveau commence, nous √©crivons une valeur al√©atoire dans <strong>fireWood</strong> : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { fireWood = Random.Range(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>); }</code> </pre> </div></div><br><p>  D√©crit une m√©thode avec un param√®tre qui sera responsable du nombre de journaux qui tomberont en une seule fois: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fireWoodCounter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; fireWood; i++) { fireWood = fireWood - x; InstantiateFireWood(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fireWood; }</code> </pre> </div></div><br><p>  Une m√©thode qui cr√©era des clones de journaux sur sc√®ne. <br>  void priv√© InstantiateFireWood (): </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"> { Instantiate(FireWoodPref, inst.position, inst.rotation); }</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/g6/sb/di/g6sbdisre8fpoe58lkkr3bvyeha.png"><br><p>  Cr√©ons un journal et connectons-y un script avec le code suivant: </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerEnter2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Player"</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (InventoryOnHero.woodCount &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"   !"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { InventoryOnHero.woodCount = InventoryOnHero.woodCount + <span class="hljs-number"><span class="hljs-number">1</span></span>; Destroy(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p>  Ensuite, nous cr√©erons √©galement une classe qui sera responsable de l'inventaire. </p><br><p>  V√©rifiez d'abord s'il y a de la place dans le sac.  Sinon, alors l'erreur et le journal restent √† mentir, s'il y a de l'espace, alors nous r√©approvisionnons l'inventaire d'une unit√© et d√©truisons le journal. <br>  Ensuite, vous devez faire quelque chose avec ces ressources.  Comme mentionn√© ci-dessus, nous offrons au joueur la possibilit√© de construire des ponts et des escaliers. </p><br><p>  Pour cr√©er un pont, nous avons besoin de 2 pr√©fabriqu√©s avec la moiti√© gauche et droite du pont.       <strong>BoxCollider2D</strong> .  ,    ,      - ,  . </p><br><p>        : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Transform inst1, inst2; <span class="hljs-comment"><span class="hljs-comment">//        [SerializeField] private GameObject bridgePref1, bridgePref2; //   [SerializeField] private int BridgeCount; //   ,   .   </span></span></code> </pre> </div></div><br><p> : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuildBridge</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (InventoryOnHero.woodCount == <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.LogWarning (<span class="hljs-string"><span class="hljs-string">" !"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (InventoryOnHero.woodCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { BridgeCount = BridgeCount - <span class="hljs-number"><span class="hljs-number">1</span></span>; InventoryOnHero.woodCount = InventoryOnHero.woodCount - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (BridgeCount) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: Inst1(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: Inst2(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"-      "</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p>  ,    ,       . ,   10 ,  12  8. </p><br><p> , ,      ,  ,    .  ,   1  ,      1   .    ,      5,   ,        .  0,   .  ,   . </p><br><p>      . </p><br><p>    ,   <strong>ColliderReaction.cs</strong> : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerStay2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Ladder"</span></span>: { rb2d.gravityScale = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerExit2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Ladder"</span></span>: { rb2d.gravityScale = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p>  <strong>OnTriggerStay2D</strong> ,          .  ,     0. ,        .  <strong>OnTriggerExit2D</strong>  ,              . </p><br><h3>  </h3><br><p> <em>,   .</em> </p><br><p>    19    ,           . ,       ,    ,  ,      ,   . </p><br><p>   GO,      <strong>SpriteRenderer</strong> , <strong>BoxCollider2D</strong> , <strong>Rigidbody2D</strong> . ,      ‚Äî ,        .       ,          ru.stackoverflow.com. </p><br><p><img src="https://habrastorage.org/webt/fu/uw/ri/fuuwriruf0zli9r6pwvprae_qba.png" alt="image"></p><br><p>         <strong>Trees</strong> . </p><br><p> ,        . ,    -,      ,          Raycast     2     (4   ).  ,  ,   ,      (   ).        (    ),      .      ,      .     ,      ,       .  ,      . ,     ,                 (     ,      ). </p><br><p>   ,     .   ,       - . </p><br><p>     : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameObject area; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> m1 = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, m2; <span class="hljs-comment"><span class="hljs-comment">// m  move private void fGreenMonster() { float dist = Vector3.Distance(greenMonster.transform.position, area.transform.position); Debug.Log(dist); if (m1) { if (dist &lt; 3f) { transform.position += new Vector3(speed,0,0) * Time.deltaTime; SR.flipX = true; } else { m1 = false; m2 = true; } } if (m2) { if(dist &gt;= 1f) { transform.position += new Vector3(-speed,0,0) * Time.deltaTime; SR.flipX = false; } else { m2 = false; m1 = true; } } }</span></span></code> </pre> </div></div><br><p>      <strong>Update()</strong>    ,        .   ,  3 ,   .   3,        ,     . </p><br><p><img src="https://habrastorage.org/webt/nf/4y/6e/nf4y6edxsifi9_m3eq56d0xlbtw.png" alt="image"></p><br><p>  ,         . </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fSunFlower</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { canBullet = canBullet - minus * Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canBullet &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; SR.flipX == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { GameObject newArrow = Instantiate(sunFlowerBullet) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> GameObject; newArrow.transform.position = transform.position; Rigidbody2D rb = newArrow.GetComponent&lt;Rigidbody2D&gt;(); rb.velocity = sunFlowerTrans.transform.forward * -sunFlowerBulletSpeed; canBullet = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canBullet &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; SR.flipX == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { GameObject newArrow = Instantiate(sunFlowerBullet) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> GameObject; newArrow.transform.position = transform.position; Rigidbody2D rb = newArrow.GetComponent&lt;Rigidbody2D&gt;(); rb.velocity = sunFlowerTrans.transform.forward * sunFlowerBulletSpeed; canBullet = <span class="hljs-number"><span class="hljs-number">2</span></span>; }</code> </pre> </div></div><br><pre> <code class="cs hljs">canBullet = canBullet - minus * Time.deltaTime;</code> </pre> <br><p>   ,      . </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canBullet &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; SR.flipX == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { GameObject newArrow = Instantiate(sunFlowerBullet) }</code> </pre> </div></div><br><p>  ,  ,     ,   ,    : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Damage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { Health = Health - x; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Health; }</code> </pre> </div></div><br><p> , ,     : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ifDie</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Damage(<span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { Destroy(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject); } }</code> </pre> </div></div><br><p>   0,   . </p><br><p>  ,         : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bGreenMonster) { fGreenMonster(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bSunFlower) { fSunFlower(); }</code> </pre> </div></div><br><p>   ,         . </p><br><p><img src="https://habrastorage.org/webt/-1/1s/ki/-11skihlzc3vevw5zqiuxstlmre.png" alt="image"></p><br><p>   . </p><br><p>  ,      ? </p><br><p> ,       . </p><br><p>      : </p><br><img src="https://habrastorage.org/webt/7i/oe/3l/7ioe3lshbpcu-hkwa09wydzefbs.png"><br><p>  : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Transform Hero; <span class="hljs-comment"><span class="hljs-comment">//         [SerializeField] private float distWhatHeroSee; //   [SerializeField] private LayerMask Tree, BridgeBuild, LadderBuild ,drinkingWater, lEnemy; //  </span></span></code> </pre> </div></div><br><p>      ,         : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AttackBtn</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CrossPlatformInputManager.GetButtonDown(<span class="hljs-string"><span class="hljs-string">"Attack"</span></span>)) { GameObject.Find(<span class="hljs-string"><span class="hljs-string">"Hero"</span></span>).GetComponent&lt;HeroScript&gt;().State = CharState.AttackA; Collider2D[] Trees = Physics2D.OverlapCircleAll(Hero.position, distWhatHeroSee, Tree); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Trees.Length; i++) { Trees[i].GetComponent&lt;TreeControl&gt;().fireWoodCounter(<span class="hljs-number"><span class="hljs-number">1</span></span>); Debug.Log(<span class="hljs-string"><span class="hljs-string">"Trees Collider"</span></span>); HeroScript.Water = HeroScript.Water - <span class="hljs-number"><span class="hljs-number">0.7f</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// BB  BridgeBuild Collider2D[] BB = Physics2D.OverlapCircleAll(Hero.position, distWhatHeroSee, BridgeBuild); for (int i = 0; i &lt; BB.Length; i++) { BB[i].GetComponent&lt;BridgeBuilding&gt;().BuildBridge(); HeroScript.Water = HeroScript.Water - 0.17f; }</span></span></code> </pre> </div></div><br><pre> <code class="cs hljs">GameObject.Find(<span class="hljs-string"><span class="hljs-string">"Hero"</span></span>).GetComponent&lt;HeroScript&gt;().State = CharState.AttackA;</code> </pre> <br><p>      ,          . <br> ,   : </p><br><div class="spoiler">  <b class="spoiler_title">Cap de spoiler</b> <div class="spoiler_text"><pre> <code class="cs hljs">Collider2D[] Trees = Physics2D.OverlapCircleAll(Hero.position, distWhatHeroSee, Tree); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Trees.Length; i++) { Trees[i].GetComponent&lt;TreeControl&gt;().fireWoodCounter(<span class="hljs-number"><span class="hljs-number">1</span></span>); Debug.Log(<span class="hljs-string"><span class="hljs-string">"Trees Collider"</span></span>); HeroScript.Water = HeroScript.Water - <span class="hljs-number"><span class="hljs-number">0.7f</span></span>; }</code> </pre> </div></div><br><p>   <strong>Trees</strong> ,      .      ,        ,       ,    .         . <br>  ,            . Simple as that! </p><br><p>   , -    : </p><br><p><img src="https://habrastorage.org/webt/x6/cg/du/x6cgduvtlqneym3ulljopmfy2yo.png" alt="image"></p><br><p>      ,       ‚Äî  . <br>   ,      .  ,         ,    ,     . </p><br><p>   2        ,                     . </p><br><p>  Bonne chance </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </p><br><p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://opengameart.org/</a> ,  : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> </li><li>   Unity  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ru.stackoverflow.com</a> </li><li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Play</a> </li><li>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Play</a> </li><li>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sourceforge.net.</a> <br>             worldofonehero@gmail.com. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458846/">https://habr.com/ru/post/fr458846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458834/index.html">C√¥t√© de la personnalit√© de Paul Allen, que peu de gens connaissaient comme je le souhaiterais</a></li>
<li><a href="../fr458836/index.html">Indice de Borsch. Une approche syst√©matique pour √©valuer, comparer, d√©terminer le rapport qualit√© / prix</a></li>
<li><a href="../fr458840/index.html">Comment nous avons perc√© le grand pare-feu chinois (partie 2)</a></li>
<li><a href="../fr458842/index.html">La patience et le travail vont extraire tout le texte</a></li>
<li><a href="../fr458844/index.html">Destruction des silos gr√¢ce √† l'approche d'adaptation VeriSM ‚Ñ¢</a></li>
<li><a href="../fr458848/index.html">Version Rust 1.36.0: futur trait, stabilisation de l'allocation et MaybeUninit <T></a></li>
<li><a href="../fr458850/index.html">Apprenez l'anglais √† moindre co√ªt et efficacement. 2e partie</a></li>
<li><a href="../fr458854/index.html">MotionLayout: les animations sont meilleures, moins de code</a></li>
<li><a href="../fr458856/index.html">Piles AAA bon march√© et ch√®res</a></li>
<li><a href="../fr458860/index.html">R√©glage des param√®tres du noyau Linux pour optimiser PostgreSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>