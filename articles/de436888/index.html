<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂üèª ‚úäüèΩ ‚ôëÔ∏è Geschichte zum Entwerfen einer API üòü ‚óªÔ∏è ü•ù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einmal half ich einem Freund, der Daten √ºber freie und bewohnte Wohnungen aus dem Hausverwaltungssystem in den Standort seines Kunden integrieren muss...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geschichte zum Entwerfen einer API</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/436888/">  Einmal half ich einem Freund, der Daten √ºber freie und bewohnte Wohnungen aus dem Hausverwaltungssystem in den Standort seines Kunden integrieren musste.  Zu meiner Freude hatte dieses System eine API.  Aber leider war es sehr schlecht arrangiert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfc/80d/a9e/dfc80da9e77fe55d40b833fe3f5ff9b6.jpg" alt="Bild"></div><br>  Ich habe beschlossen, diesen Artikel nicht zu schreiben, um das zu diskutierende System zu kritisieren, sondern um dar√ºber zu sprechen, welche Fehler bei der Entwicklung der API auftreten, und um M√∂glichkeiten zur Korrektur dieser Fehler vorzuschlagen. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Situations√ºbersicht</font> </h2><br>  Die betreffende Organisation verwendete das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beds24-</a> System zur Verwaltung des Wohnraums.  Informationen dar√ºber, was kostenlos ist und was besch√§ftigt ist, wurden mit verschiedenen Reservierungssystemen f√ºr Unterk√ºnfte (wie Buchung, AirBnB und andere) synchronisiert.  Die Organisation war an der Entwicklung des Standorts beteiligt und wollte, dass bei der Suche nur Informationen zu den f√ºr einen bestimmten Zeitraum verf√ºgbaren und in der Kapazit√§t geeigneten R√§umen angezeigt werden.  Diese Aufgabe schien sehr einfach zu sein, da Beds24 eine API f√ºr die Integration mit anderen Systemen bereitstellt.  Tats√§chlich stellte sich heraus, dass die Entwickler dieser API viele Fehler im Design gemacht haben.  Ich schlage vor, diese Fehler zu analysieren, spezifische Probleme zu identifizieren und dar√ºber zu sprechen, wie die Entwicklung der API in den betrachteten Situationen angegangen werden kann. <br><br><h2>  <font color="#3AC1EF">Problem Nr. 1: Textformat anfordern</font> </h2><br>  Da der Kunde nur an Informationen interessiert ist, ob beispielsweise ein Hotelzimmer frei oder besetzt ist, <code>/getAvailabilities</code> wir nur auf den API <code>/getAvailabilities</code> .  Obwohl ein Aufruf einer solchen API zu Daten √ºber die Verf√ºgbarkeit von R√§umen f√ºhren sollte, sieht dieser Aufruf tats√§chlich wie eine POST-Anforderung aus, da der Autor der API beschlossen hat, Filter als JSON-Hauptteil der Anforderung zu akzeptieren.  Hier ist eine Liste m√∂glicher Abfrageparameter und Beispiele f√ºr die Werte, die sie akzeptieren: <br><br><pre> <code class="plaintext hljs">{   "checkIn": "20151001",   "lastNight": "20151002",   "checkOut": "20151003",   "roomId": "12345",   "propId": "1234",   "ownerId": "123",   "numAdult": "2",   "numChild": "0",   "offerId": "1",   "voucherCode": "",   "referer": "",   "agent": "",   "ignoreAvail": false,   "propIds": [       1235,       1236   ],   "roomIds": [       12347,       12348,       12349   ] }</code> </pre> <br>  Lassen Sie uns durch dieses JSON-Objekt gehen und dar√ºber sprechen, was hier falsch ist. <br><br><ol><li>  Daten ( <code>checkIn</code> , <code>lastNight</code> und <code>checkOut</code> ) liegen im Format <code>checkOut</code> .  Es gibt absolut keinen Grund, das Standardformat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ISO 8601</a> ( <code>YYYY-MM-DD</code> ) bei der Konvertierung von Datumsangaben in Zeichenfolgen nicht zu verwenden, da dies ein weit verbreiteter Standard f√ºr die Darstellung von Datumsangaben ist.  Vielen Entwicklern ist dies bekannt. Viele JSON-Parser erwarten dies bei der Eingabe.  Dar√ºber hinaus besteht das Gef√ºhl, dass das Feld <code>lastNight</code> redundant ist, da es ein <code>checkOut</code> Feld gibt, das immer durch ein Datum einen Tag vor dem in <code>lastNight</code> angegebenen Datum <code>lastNight</code> .  Im Zusammenhang mit den oben genannten M√§ngeln schlage ich vor, beim Entwerfen solcher APIs zu versuchen, immer Standardmethoden f√ºr die Darstellung von Daten zu verwenden und API-Benutzer nicht mit der Notwendigkeit zu belasten, mit redundanten Daten zu arbeiten. </li><li>  Alle Bezeichnerfelder sowie die <code>numChild</code> <code>numAdult</code> und <code>numChild</code> sind numerisch, werden jedoch als Zeichenfolgen dargestellt.  In diesem Fall gibt es keinen offensichtlichen Grund, sie als Zeichenfolgen darzustellen. </li><li>  Hier sehen Sie die folgenden <code>roomId</code> : <code>roomId</code> und <code>roomIds</code> sowie <code>propId</code> und <code>propIds</code> .  Das Vorhandensein von <code>roomId</code> und <code>propId</code> ist redundant, da beide zur √úbertragung von Kennungen verwendet werden k√∂nnen.  Au√üerdem gibt es ein Problem mit Typen.  Bitte beachten Sie, dass das Feld <code>roomId</code> ein Zeichenfolgenfeld ist und die numerischen Werte der Bezeichner im Array <code>roomIds</code> verwendet werden m√ºssen.  Dies kann zu Verwirrung und Problemen beim Parsen f√ºhren und legt au√üerdem nahe, dass auf dem Server einige Vorg√§nge mit Zeichenfolgen und einige mit Zahlen ausgef√ºhrt werden, obwohl diese Zeichenfolgen und Zahlen zur Darstellung derselben verwendet werden Daten. </li></ol><br>  Ich m√∂chte API-Entwickler einladen, zu versuchen, das Leben derjenigen, die diese APIs verwenden, nicht zu verkomplizieren, w√§hrend sie Fehler beim Entwerfen von APIs machen, die den oben beschriebenen √§hnlich sind.  Man sollte n√§mlich nach einer Standarddatenformatierung streben, um sicherzustellen, dass sie nicht redundant sind, um sicherzustellen, dass verschiedene Datentypen nicht zur Darstellung homogener Entit√§ten verwendet werden.  Und es ist nicht alles wert, wahllos in Form von Linien zu pr√§sentieren. <br><br><h2>  <font color="#3AC1EF">Problem Nr. 2: Antwortk√∂rperformat</font> </h2><br>  Wie bereits erw√§hnt, interessieren wir uns nur f√ºr den API <code>/getAvailabilities</code> .  Schauen wir uns an, wie die Antwort auf diesen Endpunkt aussieht, und sprechen wir dar√ºber, welche M√§ngel w√§hrend seiner Entstehung entstanden sind.  Denken Sie daran, dass wir beim Zugriff auf die API an einer Liste von Objektkennungen interessiert sind, die f√ºr einen bestimmten Zeitraum kostenlos sind und eine bestimmte Anzahl von Personen aufnehmen k√∂nnen.  Unten finden Sie ein Beispiel f√ºr den Hauptteil der Anforderung an die API und ein Beispiel daf√ºr, was als Antwort auf diese Anforderung zur√ºckgegeben wird. <br><br>  Hier ist die Anfrage: <br><br><pre> <code class="plaintext hljs">{   "checkIn": "20190501",   "checkOut": "20190503",   "ownerId": "25748",   "numAdult": "2",   "numChild": "0" }</code> </pre> <br>  Hier ist die Antwort: <br><br><pre> <code class="plaintext hljs">{   "10328": {       "roomId": "10328",       "propId": "4478",       "roomsavail": "0"   },   "13219": {       "roomId": "13219",       "propId": "5729",       "roomsavail": "0"   },   "14900": {       "roomId": "14900",       "propId": "6779",       "roomsavail": 1   },   "checkIn": "20190501",   "lastNight": "20190502",   "checkOut": "20190503",   "ownerId": 25748,   "numAdult": 2 }</code> </pre> <br>  Sprechen Sie √ºber Antwortprobleme. <br><br><ol><li>  Im Antworttext wurden die <code>numAdult</code> <code>ownerId</code> und <code>numAdult</code> pl√∂tzlich zu Zahlen.  Und in der Anfrage war es notwendig, sie als Zeichenfolgen anzugeben. </li><li>  Die Liste der Immobilienobjekte wird in Form von Objekteigenschaften dargestellt, deren Schl√ºssel <code>roomId</code> ( <code>roomId</code> ) sind.  Es w√§re logisch zu erwarten, dass solche Daten als Array ausgegeben werden.  F√ºr uns bedeutet dies, dass wir, um eine Liste der verf√ºgbaren R√§ume zu erhalten, das gesamte Objekt <code>roomsavail</code> m√ºssen, w√§hrend wir pr√ºfen m√ºssen, ob bestimmte Eigenschaften der darin enthaltenen Objekte vorhanden sind, z. B. <code>roomsavail</code> , und nicht auf etwas wie <code>checkIn</code> und <code>lastNight</code> .  Dann w√§re es notwendig, den Wert der <code>roomsavail</code> zu √ºberpr√ºfen, und wenn er gr√∂√üer als 0 ist, k√∂nnten wir daraus schlie√üen, dass die entsprechende <code>roomsavail</code> zur Buchung verf√ºgbar ist.  Schauen wir uns nun die Eigenschaft <code>roomsavail</code> .  Hier sind die Optionen f√ºr die Darstellung im Antworttext: <code>"roomsavail": "0"</code> und <code>"roomsavail": 1</code> .  Sehen Sie das Muster?  Wenn die R√§ume belegt sind, wird der Eigenschaftswert durch eine Zeichenfolge dargestellt.  Wenn frei - wird daraus eine Zahl.  Dies kann in Sprachen, die eng mit Datentypen zusammenh√§ngen, zu vielen Problemen f√ºhren, da in denselben Sprachen keine Werte unterschiedlicher Typen verwendet werden sollten.  In Verbindung mit dem Vorstehenden m√∂chte ich Entwicklern vorschlagen, Arrays von JSON-Objekten zu verwenden, um bestimmte Datens√§tze darzustellen, und keine unbequemen Konstruktionen in Form von Schl√ºssel-Wert-Paaren zu verwenden, die der hier betrachteten √§hnlich sind.  Dar√ºber hinaus muss sichergestellt werden, dass die Felder homogener Objekte keine Daten unterschiedlichen Typs enthalten.  Eine ordnungsgem√§√ü formatierte Serverantwort sieht m√∂glicherweise wie folgt aus.  Bitte beachten Sie, dass bei der Darstellung von Daten in diesem Formular die Rauminformationen keine doppelten Daten enthalten. </li></ol><br><pre> <code class="plaintext hljs">{   "properties": [       {           "id": 4478,           "rooms": [               {                   "id": 12328,                   "available": false               }           ]       },       {           "id": 5729,           "rooms": [               {                   "id": 13219,                   "available": false               }           ]       },       {           "id": 6779,           "rooms": [               {                   "id": 14900,                   "available": true               }           ]       }   ],   "checkIn": "2019-05-01",   "lastNight": "2019-05-02",   "checkOut": "2019-05-03",   "ownerId": 25748,   "numAdult": 2 }</code> </pre> <br><h2>  <font color="#3AC1EF">Problem 3: Fehlerbehandlung</font> </h2><br>  So ist die Fehlerbehandlung in der hier betrachteten API organisiert: Das System sendet Antworten mit einem Code von <code>200</code> an alle Anforderungen, auch wenn ein Fehler auftritt.  Dies bedeutet, dass die einzige M√∂glichkeit, eine normale Antwort von einer Antwort mit einer Fehlermeldung zu unterscheiden, darin besteht, den Hauptteil der Antwort zu analysieren und zu √ºberpr√ºfen, <code>errorCode</code> <code>error</code> oder <code>errorCode</code> sind.  In der API werden nur die folgenden 6 Fehlercodes bereitgestellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03c/627/623/03c627623d8d26449cd6788e747643aa.png"></div><br>  <i><font color="#999999">Beds24 API-Fehlercodes</font></i> <br><br>  Ich schlage vor, dass jeder, der dies liest, versucht, keine Antwort mit Code 200 (erfolgreiche Verarbeitung der Anfrage) zur√ºckzugeben, wenn w√§hrend der Verarbeitung der Anfrage ein Fehler aufgetreten ist.  Sie k√∂nnen diesen Schritt nur ausf√ºhren, wenn er vom Framework bereitgestellt wird, auf dessen Grundlage Sie die API entwickeln.  Durch die R√ºckgabe geeigneter Antwortcodes k√∂nnen API-Clients im Voraus wissen, ob sie den Antworttext analysieren m√ºssen oder nicht und wie dies zu tun ist (dh ob eine normale Serverantwort oder ein Fehlerobjekt analysiert werden soll). <br><br>  In unserem Fall gibt es zwei M√∂glichkeiten, die API in diese Richtung zu verbessern: Sie k√∂nnen entweder f√ºr jeden der 6 m√∂glichen Fehler einen speziellen HTTP-Code im Bereich von 400 bis 499 angeben (am besten), oder im Fehlerfall den Code 500 zur√ºckgeben, der dies zul√§sst Zumindest sollte der Client vor der Analyse des Antwortk√∂rpers wissen, dass er Informationen √ºber den Fehler enth√§lt. <br><br><h2>  <font color="#3AC1EF">Problem Nummer 4: "Anweisungen"</font> </h2><br>  Nachfolgend finden Sie die ‚ÄûAnweisungen‚Äú zur Verwendung der API aus der Projektdokumentation: <br><br>  Bitte lesen Sie die folgenden Anweisungen, wenn Sie die API verwenden. <br><br><ol><li>  API-Aufrufe sollten so konzipiert sein, dass w√§hrend ihrer Ausf√ºhrung eine minimale Datenmenge gesendet und empfangen werden muss. </li><li>  API-Aufrufe werden einzeln ausgef√ºhrt.  Sie m√ºssen bis zum n√§chsten Aufruf der API warten, bevor Sie den n√§chsten Aufruf t√§tigen. </li><li>  Wenn Sie mehrere Aufrufe an die API ausf√ºhren m√ºssen, sollte zwischen diesen eine Pause von einigen Sekunden vorgesehen werden. </li><li>  API-Aufrufe m√ºssen nicht zu oft ausgef√ºhrt werden, um die Anzahl der Aufrufe auf dem Mindestniveau zu halten, das zur L√∂sung von Clientaufgaben erforderlich ist. </li><li>  Eine √ºberm√§√üige Nutzung der API innerhalb von 5 Minuten f√ºhrt zur Sperrung Ihres Kontos ohne zus√§tzliche Benachrichtigungen. </li><li>  Wir behalten uns das Recht vor, Kunden, die unserer Meinung nach die API √ºberm√§√üig nutzen, den Zugriff auf das System zu sperren.  Dies erfolgt nach unserem Ermessen und ohne weitere Ank√ºndigung. </li></ol><br>  Obwohl die Punkte 1 und 4 durchaus gerechtfertigt erscheinen, kann ich den anderen Punkten dieser Anweisung nicht zustimmen.  Betrachten Sie sie. <br><br><ol><li>  Artikelnummer 2.  Wenn Sie eine REST-API entwickeln, wird davon ausgegangen, dass es sich um eine zustandsunabh√§ngige API handelt.  Die Unabh√§ngigkeit von API-Aufrufen von fr√ºheren Aufrufen ist einer der Gr√ºnde, warum die REST-Technologie in Cloud-Anwendungen breite Anwendung gefunden hat.  Wenn ein bestimmtes Modul des Systems den Status nicht unterst√ºtzt, kann es im Fehlerfall problemlos erneut bereitgestellt werden.  Systeme, die auf solchen Modulen basieren, lassen sich leicht skalieren, wenn sich die Belastung √§ndert.  Wenn Sie eine RESTful-API entwerfen, sollten Sie sicherstellen, dass es sich um eine zustandsunabh√§ngige API handelt und dass sich diejenigen, die sie verwenden, nicht darum k√ºmmern m√ºssen, jeweils nur eine Anforderung auszuf√ºhren. </li><li>  Artikelnummer 3.  Dieser Artikel sieht ziemlich seltsam und mehrdeutig aus.  Ich kann den Grund nicht verstehen, warum dieser Absatz der Anweisung geschrieben wurde, aber ich habe das Gef√ºhl, dass er uns sagt, dass das System bei der Verarbeitung der Anforderung bestimmte Aktionen ausf√ºhrt und wenn es durch eine andere Anforderung ‚Äûabgelenkt‚Äú wird, nicht rechtzeitig gesendet, kann dies ihre Arbeit beeintr√§chtigen.  Die Tatsache, dass der Autor des Handbuchs ‚Äûeinige Sekunden‚Äú sagt, erm√∂glicht es uns au√üerdem nicht, die genaue Dauer der Pause herauszufinden, die zwischen aufeinanderfolgenden Anforderungen aufrechterhalten werden muss. </li><li>  Artikel Nr. 5 und Nr. 6.  Es bezieht sich auf "√ºberm√§√üige Nutzung der API", es werden jedoch keine Kriterien f√ºr "√ºberm√§√üige Nutzung" angegeben.  Vielleicht sind es 10 Anfragen pro Sekunde?  Oder vielleicht 1?  Dar√ºber hinaus k√∂nnen einige Webprojekte sehr viel Verkehr haben.  Wenn sie ohne angemessene Gr√ºnde und ohne Benachrichtigung den Zugriff auf die ben√∂tigte API schlie√üen, werden ihre Administratoren die Verwendung solcher APIs h√∂chstwahrscheinlich ablehnen.  Wenn Sie solche Anweisungen schreiben, verwenden Sie eine klare Sprache und setzen Sie sich an die Stelle der Benutzer, die mit Ihrem System arbeiten m√ºssen, und richten Sie sich dabei nach Ihren Anweisungen. </li></ol><br><h2>  <font color="#3AC1EF">Problem Nummer 5: Dokumentation</font> </h2><br>  So sieht die API-Dokumentation aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b6/8bf/ae6/5b68bfae633a5c394a5f11d3b8c228ce.png"></div><br>  <i><font color="#999999">Beds24 API-Dokumentation</font></i> <br><br>  Das einzige Problem mit dieser Dokumentation ist das Erscheinungsbild.  Es w√ºrde viel besser aussehen, wenn es gut formatiert w√§re.  Insbesondere um das m√∂gliche Erscheinungsbild einer solchen Dokumentation zu zeigen, habe ich mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dillinger</a> und weniger als zwei Minuten Zeit die folgende Version davon erstellt.  Meiner Meinung nach sieht es viel besser aus als oben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac4/e71/7fe/ac4e717fe2757b3f4af62733a857ff2b.png"></div><br>  <i><font color="#999999">Verbesserte Dokumentation</font></i> <br><br>  Um solche Materialien zu erstellen, wird empfohlen, Spezialwerkzeuge zu verwenden.  Wenn es sich um einfache Dokumente handelt, die den oben beschriebenen √§hnlich sind, reicht eine regul√§re Markdown-Datei f√ºr ihr Design v√∂llig aus.  Wenn die Dokumentation komplizierter ist, verwenden Sie f√ºr das Design am besten Tools wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Swagger</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apiary</a> . <br><br>  √úbrigens, wenn Sie sich die Dokumentation f√ºr die Beds24-API ansehen m√∂chten, schauen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h2>  <font color="#3AC1EF">Problem 6: Sicherheit</font> </h2><br>  Die Dokumentation f√ºr alle API-Endpunkte lautet wie folgt: <br><br>  <i><font color="#999999">Um diese Funktionen nutzen zu k√∂nnen, muss der Zugriff auf die API zul√§ssig sein.</font></i>  <i><font color="#999999">Dies erfolgt im Men√º EINSTELLUNGEN ‚Üí KONTO ‚Üí KONTOZUGRIFF.</font></i> <br><br>  In der Realit√§t kann jedoch jeder auf diese API zugreifen und mithilfe einiger Aufrufe Informationen von ihr abrufen, ohne Anmeldeinformationen anzugeben.  Dies gilt beispielsweise auch f√ºr Fragen zur Verf√ºgbarkeit bestimmter Wohnungen.  Dies wird in einem anderen Teil der Dokumentation erl√§utert. <br><br>  <i><font color="#999999">Die meisten JSON-Methoden erfordern einen API-Schl√ºssel f√ºr den Zugriff auf ein Konto.</font></i>  <i><font color="#999999">Der API-Zugriffsschl√ºssel kann √ºber das Men√º EINSTELLUNGEN ‚Üí KONTO ‚Üí KONTOZUGRIFF festgelegt werden.</font></i> <br><br>  Neben der unverst√§ndlichen Erkl√§rung von Authentifizierungsproblemen stellt sich heraus, dass der Benutzer den Schl√ºssel f√ºr den Zugriff auf die API selbst erstellen muss (dies erfolgt √ºbrigens durch manuelles Ausf√ºllen des entsprechenden Felds, einige Mittel zum automatischen Erstellen von Schl√ºsseln werden nicht bereitgestellt).  Die Schl√ºssell√§nge muss zwischen 16 und 64 Zeichen liegen.  Wenn Sie Benutzern erlauben, ihre eigenen Schl√ºssel f√ºr den Zugriff auf die API zu erstellen, kann dies dazu f√ºhren, dass sehr unsichere Schl√ºssel angezeigt werden, die leicht abgerufen werden k√∂nnen.  In einer √§hnlichen Situation sind Probleme mit dem Inhalt der Schl√ºssel m√∂glich, da Sie alles in das Schl√ºsselfeld eingeben k√∂nnen.  Im schlimmsten Fall kann dies zu einem Angriff auf den Dienst mit SQL Injection oder √§hnlichem f√ºhren.  Lassen Sie Benutzer beim Entwerfen einer API keine Schl√ºssel f√ºr den Zugriff auf die API selbst erstellen.  Generieren Sie stattdessen automatisch Schl√ºssel f√ºr sie.  Der Benutzer sollte nicht in der Lage sein, den Inhalt eines solchen Schl√ºssels zu √§ndern, aber er sollte gegebenenfalls in der Lage sein, einen neuen Schl√ºssel zu generieren und den alten als ung√ºltig zu erkennen. <br><br>  Bei Anforderungen, die eine Authentifizierung erfordern, tritt ein weiteres Problem auf.  Es besteht darin, dass ein Authentifizierungstoken als Teil des Anforderungshauptteils gesendet werden muss.  So wird es in der Dokumentation beschrieben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b45/548/cb9/b45548cb94e4cd4dd64ae53ec5c6dbb8.png"></div><br>  <i><font color="#999999">Beds24 API-Authentifizierungsbeispiel</font></i> <br><br>  Wenn das Authentifizierungstoken im Anforderungshauptteil √ºbertragen wird, bedeutet dies, dass der Server den Anforderungshauptteil analysieren muss, bevor er den Schl√ºssel erreicht.  Danach extrahiert er den Schl√ºssel, f√ºhrt die Authentifizierung durch und entscheidet dann - was soll er mit der Anfrage tun - ob er sie erf√ºllt oder nicht.  Wenn die Authentifizierung erfolgreich ist, wird der Server nicht zus√§tzlich belastet, da in diesem Fall der Anforderungshauptteil noch analysiert werden m√ºsste.  Wenn sich die Anforderung jedoch nicht authentifizieren konnte, wird wertvolle Prozessorzeit f√ºr das Parsen des Anforderungshauptteils umsonst aufgewendet.  Es ist besser, ein Authentifizierungstoken im Anforderungsheader zu senden, das so etwas wie ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bearer-</a> Authentifizierungsschema verwendet.  Bei diesem Ansatz muss der Server den Anforderungshauptteil nur analysieren, wenn die Authentifizierung erfolgreich ist.  Ein weiterer Grund, warum wir die Verwendung eines Standardschemas wie Bearer zur Authentifizierung empfehlen, ist die Tatsache, dass die meisten Entwickler mit solchen Schemata vertraut sind. <br><br><h2>  <font color="#3AC1EF">Problem Nummer 7: Leistung</font> </h2><br>  Dies ist das letzte Problem auf meiner Liste, aber es beeintr√§chtigt nicht seine Bedeutung.  Tatsache ist, dass es etwas mehr als eine Sekunde dauert, bis die Anforderung an die betreffende API abgeschlossen ist.  In modernen Anwendungen k√∂nnen solche Verz√∂gerungen nicht akzeptabel sein.  In der Tat k√∂nnen Sie hier allen an der Entwicklung der API Beteiligten raten, die Leistung nicht zu vergessen. <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Trotz aller Probleme, √ºber die wir hier gesprochen haben, konnten wir mit der fraglichen API die Probleme l√∂sen, mit denen das Projekt konfrontiert ist.  Die Entwickler haben sich jedoch viel Zeit genommen, um die API zu verstehen und alles zu implementieren, was sie ben√∂tigen.  Um einfache Probleme zu l√∂sen, mussten sie au√üerdem ziemlich komplizierten Code schreiben.  Wenn diese API so entworfen w√ºrde, wie sie sollte, w√ºrde die Arbeit schneller erledigt und die schl√ºsselfertige L√∂sung w√§re einfacher. <br><br>  Daher m√∂chte ich alle, die die API entwerfen, bitten, dar√ºber nachzudenken, wie Benutzer ihrer Dienste damit arbeiten werden.  Stellen Sie sicher, dass die Dokumentation f√ºr die API ihre Funktionen vollst√§ndig beschreibt, damit sie verst√§ndlich und gut gestaltet ist.  Kontrollieren Sie die Benennung von Entit√§ten und stellen Sie sicher, dass die Daten, die Ihre API sendet oder empf√§ngt, klar strukturiert sind, damit Sie einfach und bequem mit ihnen arbeiten k√∂nnen.  Vergessen Sie au√üerdem nicht die Sicherheit und den korrekten Umgang mit Fehlern.  Wenn Sie beim Entwerfen der API alles ber√ºcksichtigen, wor√ºber wir gesprochen haben, m√ºssen Sie nicht so etwas wie die seltsamen "Anweisungen" schreiben, die wir oben besprochen haben, um damit zu arbeiten. <br><br>  Wie bereits erw√§hnt, soll dieses Material die Leser nicht davon abhalten, Beds24 oder ein anderes System mit einer schlecht gestalteten API zu verwenden.  Mein Ziel war es, Beispiele f√ºr Fehler und L√∂sungsans√§tze aufzuzeigen und Empfehlungen abzugeben, nach denen jeder die Qualit√§t seiner Entwicklungen verbessern kann.  Ich hoffe, dass dieses Material die Aufmerksamkeit von Programmierern auf sich zieht, die es auf die Qualit√§t der von ihnen entwickelten L√∂sungen lesen.  Dies bedeutet, dass es weltweit mehr gute APIs geben wird. <br><br>  <b>Liebe Leser!</b>  Sind Sie auf schlecht gestaltete APIs gesto√üen? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436888/">https://habr.com/ru/post/de436888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436876/index.html">[SAP] SAPUI5 f√ºr Dummies Teil 1: Eine vollst√§ndige Schritt-f√ºr-Schritt-√úbung</a></li>
<li><a href="../de436878/index.html">BERT ist ein hochmodernes Sprachmodell f√ºr 104 Sprachen. Tutorial zum lokalen Starten von BERT und in Google Colab</a></li>
<li><a href="../de436880/index.html">Grundlagen der C ++ - Vorlage: Funktionsvorlagen</a></li>
<li><a href="../de436884/index.html">Wir beherrschen Async / Warten auf ein echtes Beispiel</a></li>
<li><a href="../de436886/index.html">Verwenden von Babel und Webpack zum Einrichten eines React-Projekts von Grund auf neu</a></li>
<li><a href="../de436890/index.html">React Tutorial Teil 10: Workshop zum Arbeiten mit Komponenteneigenschaften und zum Styling</a></li>
<li><a href="../de436892/index.html">React Tutorial Teil 11: Dynamische Markup-Bildung und die Map-Array-Methode</a></li>
<li><a href="../de436894/index.html">Kriechende IT-Apokalypse. Neue Cloud-Dienste werden einige Ingenieure arbeitslos machen</a></li>
<li><a href="../de436896/index.html">Docker-Pretty-Ps - endlich ein lesbarer Docker-PS</a></li>
<li><a href="../de436900/index.html">FunTech ML-Treffen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>