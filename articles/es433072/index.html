<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴🏼 ♌️ 🚚 Cómo hackear la protección de copia de la consola Sega Dreamcast 💇🏿 💚 🔩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Después del lanzamiento del DOOM Black Book, me fui de vacaciones a Japón, donde logré jugar a Ikaruga en una máquina arcade real en la sala de juegos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cómo hackear la protección de copia de la consola Sega Dreamcast</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433072/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/75/nh/l3/75nhl327vyzpklsanxeb3yb9tsw.png"></div><br>  Después del lanzamiento del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DOOM Black Book,</a> me fui de vacaciones a Japón, donde logré jugar a Ikaruga en una máquina arcade real en la sala de juegos Taito HEY en el barrio Akihabara de Tokio.  Esta experiencia nuevamente revivió mi interés en la última consola de videojuegos de SEGA: Dreamcast. <br><br>  En la red puede encontrar muchos documentos que facilitan enormemente el proceso de estudiar el problema.  Hay dos recursos excelentes que pueden actualizar rápidamente a cualquiera: el maravilloso sitio web de Marcus Comstedt, que describe todo hasta los registros de la GPU, y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el</a> recurso de Jockel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"</a> Creemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un juego para Sega Dreamcast desde cero"</a> . <br><br>  Mientras estudiaba el auto, descubrí una historia increíble sobre cómo los hackers rompieron rápidamente la protección de copias de juegos y arruinaron las últimas esperanzas de hardware de SEGA. <br><a name="habracut"></a><br><h2>  Primer nivel de protección: GD-ROM </h2><br>  En el papel, la protección de copia para SEGA Dreamcast se veía muy fuerte.  Los juegos se entregaron en un medio especial llamado GD-ROM, que solo SEGA podía producir.  GD significa "Gigabyte Disc" ("disco gigabyte"), es decir, su mayor densidad de grabación proporcionó un volumen máximo de 1 GB, que era mucho más que las capacidades de un CD-ROM convencional (700 MB). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c59/3dc/d90/c593dcd90243f19b05b025685883c7de.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/797/044/2e8/7970442e84c49259e3a534c34a2909e0.svg" alt="imagen"></div><br>  GD-ROM tenía las mismas dimensiones físicas que el CD-ROM, pero a nivel macro, consistía en dos áreas distinguibles a simple vista. <br><br>  La primera zona (oscura) es una región de baja densidad compatible con CD-ROM que contiene hasta 35 MB.  Contenía una pista de audio de voz que le recordaba al usuario que los contenidos del disco estaban destinados a SEGA Dreamcast, y no a un reproductor de CD <sup>[1]</sup> .  Además, el desarrollador agregó una pista allí con archivos de texto, por ejemplo, información de derechos de autor y, a veces, materiales promocionales, por ejemplo, arte del juego. <br><br>  El área de alta densidad (luz) se almacenó hasta 984 MB <sup>[2]</sup> y todo el contenido del juego se encuentra en él. <br><br>  A los piratas informáticos les parecía imposible expulsar el juego del disco y volver a grabarlo para su distribución. <br><br><h2>  Arranque desde GD-ROM: IP.BIN y 1ST_READ.BIN </h2><br>  Antes de hablar sobre cómo los piratas lograron copiar juegos, necesitamos entender la secuencia de carga.  Dreamcast no tenía un sistema operativo.  Existe una idea errónea popular de que usaba Windows CE, pero de hecho, el sistema operativo de Microsoft era solo una biblioteca estática adicional que los desarrolladores de Dreamcast podían conectar para usar DirectX, DirectInput y DirectSound <sup>[3]</sup> .  En algunos juegos, se utilizó WinCE <sup>[4]</sup> , pero en la mayoría (por ejemplo, Ikaruga) no se usó.  Independientemente de lo que usara el desarrollador, un juego con un sistema operativo totalmente conectado y Dreamcast siempre comenzó de la misma manera. <br><br>  Durante el uso normal y el lanzamiento del juego oficial en el Dreamcast recientemente activado, se lanzó BOOTROM, cargando el programa de arranque desde el GD-ROM a la RAM.  Este pequeño programa, ubicado en la última pista de GD-ROM y conocido por la comunidad como "IP.BIN", mostró una pantalla con licencia SEGA y realizó dos niveles de arranque para configurar registros de hardware, crear una pila de CPU e inicializar VBR <sup>[5]</sup> . <br><br>  Más importante aún, IP.BIN contenía el nombre del ejecutable del juego.  Este nombre se buscó en el sistema de archivos GD-ROM y se cargó en la RAM a 0x8C010000, después de lo cual el programa se transfirió allí.  Típicamente, el ejecutable se llamaba "1ST_READ.BIN". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14f/fac/4a7/14ffac4a70c0af94444f819b03acf2af.svg"></div><br>  Después de que la CPU fue a la dirección 0x8C010000, el juego comenzó como debería. <br><br><h2>  Segundo nivel de protección: codificador ransomware </h2><br>  La posibilidad teórica de hackear surgió debido a la capacidad aparentemente insignificante de Dreamcast para arrancar no desde GD-ROM, sino desde CD-ROM.  Inicialmente, esta funcionalidad llamada "MIL-CD" fue concebida para agregar funciones multimedia a los CD de música, pero prácticamente no se usó, con la excepción de siete aplicaciones de karaoke. <br><br>  Los ingenieros de SEGA entendieron que cargar un MIL-CD podría usarse como un vector de ataque, por lo que agregaron protección.  Cuando la consola reconoció el CD-ROM, BOOTROM descargó IP.BIN de la manera habitual, pero cifró 1ST_READ.BIN, a primera vista al azar.  El ejecutable de trabajo se convirtió en un hash caótico que hizo que la consola se congelara. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/377/512/b26/377512b26e5672bd9f78bc904dc9715d.svg"></div><br>  Desde este punto de vista, la consola parecía estar protegida de manera confiable.  Dreamcast podría reconocer una copia pirateada del juego, corromper el archivo ejecutable durante el proceso de descarga y derrotar a los piratas. <br><br><h2>  ¡Sirve mi espada larga! </h2><br>  El problema con el archivo dañado se resolvió cuando a finales de 1999 el equipo de piratas informáticos Utopia robó el Katana SDK (Sega SDK oficial para Dreamcast) <sup>[6]</sup> .  Resultó que el codificador no era más que una implementación del principio de "seguridad a través de la oscuridad".  El SDK contenía un codificador inverso, que convirtió el ejecutable correcto en un "hash hacia atrás", que nuevamente se convirtió en un ejecutable después de cargar y codificar con la consola Dreamcast al arrancar desde un CD-ROM. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/102/4e1/0b5/1024e10b5ec8dfd9b9604248728e9e83.svg"></div><br><h2>  Recuperando un juego con su GD-ROM </h2><br>  El SDK robado era todo lo que los piratas necesitaban.  Gracias a la capacidad de ejecutar código en una máquina, Dreamcast ahora podría usarse no como una consola de juegos, sino como una unidad GD-ROM.  El "cable codificador" del SDK <sup>[7]</sup> hizo posible conectar la consola a una PC y establecer una conexión física.  Para que la consola descargue el contenido de las pistas de GD, se escribió un archivo ejecutable especial.  Luego se volvió a codificar y se grabó en un CD-ROM para generar todos los 1 GB de datos a través del puerto serie de la consola.  Fue un proceso propenso a errores que tomó hasta 18 horas <sup>[8]</sup> <sup>[9]</sup> .  El resultado se guardó en un formato ".gdi" creado especialmente. <br><br><pre>  ikaruga.gdi 153 bytes
 track01.bin 13982 640 bytes
 track02.raw 2,088,576 bytes
 track03.bin 1 185 760 800 bytes </pre><br>  <b>Un hecho interesante</b> : puede ver que la cantidad total de datos no es 1 GB, como se mencionó anteriormente, sino 1.2 GB.  Esto se debe a que los sectores de GD-ROM de 2352 bytes siguen el formato del Libro Rojo, que utiliza 12 bytes para la sincronización, 4 bytes para el encabezado, 2048 bytes para la carga útil y 288 bytes para el Código de detección de errores / Código de corrección de errores <sup>[10 ]</sup> <br><br><pre>  $ cat ikaruga.gdi 
 3
 1 0 4 2352 track01.bin 0
 2 5945 0 2352 track02.raw 0
 3 45000 4 2352 track03.bin 0 </pre><br><h2>  Cómo adaptar un GD-ROM de 1000 megabytes a un CD-ROM de 700 megabytes </h2><br>  Para ajustar el juego en un CD-ROM de 700 megabytes, se rediseñaron los recursos del juego.  El sistema de archivos ISO-9660 utilizado en GD-ROM facilitó cambiar la discretización de videos y música, así como eliminarlos por completo.  Sin embargo, para la mayoría de los juegos, no se requería un proceso tan complejo porque no ocupaban el total de 1 GB.  Por ejemplo, el Ikaruga de Treasure ocupaba solo 150 MB, y la mayor parte de su contenido estaba lleno de ceros.  En tales casos, basta con editar los datos de relleno. <br><br>  De hecho, ISO-9660 es un formato tan conocido que incluso los scripts de Python (por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gditools.py</a> ) se escribieron para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudiar el</a> contenido de los archivos .gdi. <br><br><h2>  Empaque y distribución </h2><br>  Las últimas dos etapas del proceso fueron la codificación inversa 1ST_READ.BIN y el empaquetado de toda la información en un archivo .cdi para que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DiscJuggler</a> pudiera grabar la imagen en CD-R.  El resultado obtenido funcionó sin problemas en cualquier Dreamcast de vainilla sin la necesidad de un chip de modificación. <br><br><h2>  Reacción y consecuencias de SEGA </h2><br>  SEGA lanzó rápidamente la segunda versión de la consola DC con el CD de MIL deshabilitado por completo, pero el daño ya está hecho.  Después de una caída catastrófica en los ingresos y el lanzamiento de la competencia PS2, los desarrolladores abandonaron Dreamcast y SEGA abandonó el desarrollo de equipos, centrándose completamente en la creación de software. <br><br><h2>  Referencias </h2><br>  [1] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Taller SEGA GD</a> <br>  [2] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">segaretro.org: GD-ROM</a> <br>  [3] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microsoft anuncia el kit de herramientas de Windows CE para Dreamcast</a> <br>  [4] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">juegos de Dreamcast que utilizan Windows CE</a> <br>  [5] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IP.BIN y 1ST_READ.BIN</a> <br>  [6] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Construyamos un juego Sega Dreamcast desde cero</a> <br>  [7] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Adaptador serial de PC</a> <br>  [8] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Una mirada más precisa y profunda sobre la seguridad de Dreamcast</a> <br>  [9] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las formas más rápidas se diseñaron en último lugar, utilizando el conector de banda ancha de DC</a> <br>  [10] Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dreamcast Mito: Capacidad de almacenamiento GD-ROM</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es433072/">https://habr.com/ru/post/es433072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es433060/index.html">Por qué no creo microbenchmarks</a></li>
<li><a href="../es433062/index.html">AXIS P1367 versus IDIS DC-B3303X: Comparar cámaras CCTV</a></li>
<li><a href="../es433064/index.html">Gestión de incidentes: "no puede darse por vencido" o el arte de colocar comas</a></li>
<li><a href="../es433066/index.html">HighLoad Cup # 2. Campeonato para desarrolladores de back-end de nuevo en servicio</a></li>
<li><a href="../es433070/index.html">Cómo distinguir champú de champiñones y brochetas de champán ... Elasticsearch: busque productos en las bases de datos de la tienda</a></li>
<li><a href="../es433074/index.html">Cambiar a Kotlin en un proyecto de Android: consejos y trucos</a></li>
<li><a href="../es433076/index.html">Cómo creamos nuestra biblioteca de la Galería de Android para ver contenido multimedia</a></li>
<li><a href="../es433078/index.html">Escribimos robots comerciales utilizando el marco gráfico StockSharp. Parte 2</a></li>
<li><a href="../es433082/index.html">Bombear las cuentas de otras personas se ha convertido en un delito penal en Corea del Sur</a></li>
<li><a href="../es433084/index.html">Lección abierta "Ingeniería de características en el ejemplo del clásico conjunto de datos Titanic"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>