<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßôüèø üåÆ ‚Ü™Ô∏è Git subrepo üë©üèø‚Äçüè≠ üëèüèΩ üéõÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O projeto git-subrepo existe h√° muito tempo, no entanto, existem poucas refer√™ncias a ele. O autor de git-subrepo √© Ingy d√∂t Net . 



 Se voc√™ examin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Git subrepo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428493/"><p>  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><b>projeto git-subrepo</b></a> existe h√° muito tempo, no entanto, existem poucas refer√™ncias a ele.  O autor de <b>git-subrepo</b> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><b>Ingy d√∂t Net</b></a> . <br></p><br><p>  Se voc√™ examinar o hist√≥rico dos commits da ramifica√ß√£o principal do projeto, pode parecer que o projeto foi interrompido h√° 2 anos.  No entanto, o trabalho no projeto est√° em andamento e espero que a vers√£o <a href="" rel="nofollow"><b>0.4.0</b></a> seja lan√ßada em breve. <br></p><br><p>  Uma propriedade importante dessa ferramenta √© que n√£o √© necess√°rio que o usu√°rio instale o <b>git-subrepo</b> at√© que o usu√°rio decida fazer confirma√ß√µes no reposit√≥rio upstream de subprojetos.  Al√©m disso, o usu√°rio recebe uma √°rvore de origem totalmente preparada e configurada no momento da c√≥pia do reposit√≥rio principal, usando o comando <em><b>git-clone (1)</b></em> padr√£o. <br></p><a name="habracut"></a><br><p> Ao escolher meios de oferecer suporte a sub-m√≥dulos / sub√°rvores / subprojetos do reposit√≥rio principal de cont√™iner, o desenvolvedor primeiro determina o intervalo de recursos que esse ou aquele mecanismo fornece e responde √†s seguintes perguntas: <br></p><br><ul><li>  se √© necess√°rio manter o hist√≥rico completo do subprojeto no reposit√≥rio principal ou confirma√ß√µes compactadas o suficiente; </li><li>  se a capacidade de fornecer altera√ß√µes do subprojeto para o reposit√≥rio upstream da sub√°rvore √© necess√°ria; </li><li>  Existe a necessidade de conectar tags fixas do reposit√≥rio upstream do subprojeto ou √© poss√≠vel conectar ramifica√ß√µes; </li><li>  se ser√° necess√°rio remover ainda mais os pr√≥prios subprojetos e, o que se tornou desnecess√°rio, parte da hist√≥ria desses subprojetos; </li><li>  se o usu√°rio precisar√° executar alguma a√ß√£o para configurar manualmente os subprojetos ap√≥s a clonagem do reposit√≥rio do projeto principal; </li><li>  qu√£o trabalhosa ser√° a quest√£o de analisar o hist√≥rico de conex√£o de subprojetos e revis√µes espec√≠ficas das quais o subprojeto se origina; </li><li>  como essa ou aquela ferramenta afetar√° a pol√≠tica de gerenciamento de configura√ß√£o de origem e quanto essa ferramenta complicar√° o trabalho di√°rio dos engenheiros. </li></ul><br><p>  Obviamente, esta lista de perguntas n√£o pode refletir a plenitude dos par√¢metros de entrada necess√°rios para a escolha certa, mas para uma revis√£o preliminar das ferramentas existentes, √© suficiente e, falando do <b>projeto git-subrepo</b> , instamos o leitor a considerar esse projeto a partir dessas posi√ß√µes. <br></p><br><h2>  Instala√ß√£o Git-subrepo </h2><br><p>  O <b>pacote git-subrepo</b> , no lado do desenvolvedor, pode ser instalado localmente, em seu diret√≥rio inicial e no n√≠vel do sistema. <br></p><br><p>  No primeiro caso, basta clonar o <b>reposit√≥rio git-subrepo</b> no diret√≥rio desejado, por exemplo, <b>~ / bin</b> : <br></p><br><pre><code class="bash hljs">bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/bin bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ingydotnet/git-subrepo.git</code> </pre> <br><p>  e configure vari√°veis ‚Äã‚Äãde ambiente <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim subrepo-env.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh export GIT_SUBREPO_ROOT="/home/username/bin/git-subrepo" export PATH="/home/username/bin/git-subrepo/lib:$PATH" export MANPATH="/home/username/bin/git-subrepo/man:$MANPATH" :wq bash-4.4$ source ./subrepo-env.sh</span></span></code> </pre><br><p>  Se voc√™ observar as vari√°veis ‚Äã‚Äãdefinidas no <b>Makefile git-subrepo</b> : <br></p><br><pre> <code class="plaintext hljs"># Install variables: PREFIX ?= /usr/local INSTALL_LIB ?= $(DESTDIR)$(shell git --exec-path) INSTALL_EXT ?= $(INSTALL_LIB)/$(NAME).d INSTALL_MAN1 ?= $(DESTDIR)$(PREFIX)/share/man/man1</code> </pre><br><p>  √© f√°cil descobrir que, no n√≠vel do sistema, o <b>git-subrepo est√°</b> instalado no diret√≥rio em que o <b>Git</b> est√° localizado: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git --<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span>-path /usr/libexec/git-core bash-4.4$</code> </pre><br><p>  Portanto, o comando para instalar o <b>git-subrepo</b> pode parecer, por exemplo, o seguinte: <br></p><br><pre> <code class="bash hljs">bash-4.4$ make PREFIX=/usr install</code> </pre><br><p>  A presen√ßa da vari√°vel <b>DESTDIR nos</b> permite criar um pacote para qualquer distribui√ß√£o Linux sem esfor√ßos adicionais (√© claro, se n√£o estivermos em um ambiente cruzado), o que pode ser √∫til para os engenheiros do DevOps. <br></p><br><p>  Instale o <b>git-subrepo</b> como root: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> git-subrepo/ bash-4.4$ make PREFIX=/usr install install -C -d -m 0755 /usr/libexec/git-core/ install -C -m 0755 lib/git-subrepo /usr/libexec/git-core/ install -C -d -m 0755 /usr/libexec/git-core/git-subrepo.d/ install -C -m 0755 lib/git-subrepo.d/<span class="hljs-built_in"><span class="hljs-built_in">help</span></span>-functions.bash lib/git-subrepo.d/bash+.bash /usr/libexec/git-core/git-subrepo.d/ install -C -d -m 0755 /usr/share/man/man1/ install -C -m 0644 man/man1/git-subrepo.1 /usr/share/man/man1/ bash-4.4$</code> </pre><br><p>  Para analisar os recursos do <b>git-subrepo,</b> precisamos de um ambiente de teste simples, onde possamos reproduzir cen√°rios operacionais padr√£o. <br></p><br><h3>  Ambiente de teste </h3><br><p>  Criamos tr√™s diret√≥rios <b>propriet√°rio</b> , <b>remoto</b> , <b>usu√°rio</b> , nos quais colocamos modelos de reposit√≥rios upstream e locais do desenvolvedor e do usu√°rio. <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim _init.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh CWD=`pwd` mkdir remote owner user cd remote git init --bare build-system.git git init --bare platform.git cd ../owner git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd build-system echo -e "\n[master] build-system 1.0.0\n" &gt;README git add README git commit -m "init build-system master 1.0.0" git push cd ../platform echo -e "\n[master] platform 1.0.0\n" &gt;README git add README git commit -m "init platform master 1.0.0" git push cd ../../user git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd $CWD :wq bash-4.4$ bash-4.4$ ./_init.sh bash-4.4$</span></span></code> </pre><br><br><p>  Aqui <br></p><br><div class="scrollable-table"><table><tbody><tr><td>  <b><nobr>propriet√°rio</nobr></b> </td><td>  - </td><td>  diret√≥rio de trabalho do autor do projeto; </td></tr><tr><td>  <b><nobr>remoto</nobr></b> </td><td>  - </td><td>  Um diret√≥rio que representa o servidor do autor dos projetos, no qual <b>est√£o localizados</b> os reposit√≥rios upstream do projeto principal <b>platform.git</b> e o subprojeto <b>build-system.git</b> ; </td></tr><tr><td>  <b><nobr>usu√°rio</nobr></b> </td><td>  - </td><td>  O diret√≥rio de trabalho do usu√°rio ou membro da equipe de desenvolvimento. </td></tr></tbody></table></div><br><p>  O autor do projeto e os usu√°rios t√™m suas pr√≥prias c√≥pias dos reposit√≥rios upstream em suas m√°quinas, apresentadas em nosso exemplo nos diret√≥rios <b>propriet√°rio</b> e <b>usu√°rio</b> , respectivamente. <br></p><br><p>  A tarefa do autor √© incluir os seguintes recursos na √°rvore principal da <b>plataforma,</b> incluindo o subprojeto do <b>sistema builld</b> na √°rvore principal: <br></p><br><ul><li>  clone o reposit√≥rio principal com o subprojeto do <b>sistema de compila√ß√£o</b> inclu√≠do em sua estrutura e n√£o se preocupe em configurar vers√µes ou revis√µes.  Ou seja, cada ramifica√ß√£o do reposit√≥rio da <b>plataforma</b> deve corresponder a uma revis√£o espec√≠fica de uma ramifica√ß√£o espec√≠fica do reposit√≥rio do <b>sistema de constru√ß√£o</b> e o usu√°rio deve receber uma √°rvore de origem customizada em uma opera√ß√£o <em><b>git-clone (1)</b></em> , sem nenhuma a√ß√£o adicional. </li><li>  entregar suas altera√ß√µes no reposit√≥rio de projetos upstream, tanto no principal quanto no auxiliar. </li><li>  receber altera√ß√µes feitas por outros participantes ou usu√°rios do projeto, √© claro, se eles tiverem os direitos apropriados. </li></ul><br><p>  Considere as a√ß√µes do autor que ele deve implementar para implementar esses requisitos. <br></p><br><h3>  Conex√£o de subprojeto </h3><br><p>  Para conectar uma nova sub√°rvore, use o comando <b>git subrepo clone</b> , que, em sua finalidade, √© semelhante ao comando <em><b>git-clone (1)</b></em> .  O par√¢metro necess√°rio para o comando √© a <b>URL do</b> reposit√≥rio remoto.  Voc√™ tamb√©m pode especificar o diret√≥rio em que o subprojeto e a ramifica√ß√£o do reposit√≥rio remoto estar√£o localizados.  Trabalharemos com ramifica√ß√µes principais, portanto, em nosso exemplo, omitimos par√¢metros de comando desnecess√°rios. <br></p><br><p>  Portanto, o autor do projeto, em sua m√°quina de trabalho, pode conectar o subprojeto do <b>sistema de compila√ß√£o</b> usando o <b>clone git subrepo clone ../../remote/build-system.git/ comando build-system</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git/ build-system Subrepo <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master) cloned into <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>. bash-4.4$</code> </pre><br><p>  Considere quais mudan√ßas ocorreram no reposit√≥rio da <b>plataforma</b> local: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ bash-4.4$ git subrepo status 1 subrepo: Git subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>: Remote URL: ../../remote/build-system.git Upstream Ref: b2f5079 Tracking Branch: master Pulled Commit: b2f5079 Pull Parent: b5e76a7 bash-4.4$</code> </pre><br><p>  O hist√≥rico do subprojeto do <b>sistema de constru√ß√£o</b> n√£o √© entregue na √°rvore principal; temos apenas um commit compactado, que √© acompanhado por informa√ß√µes de segundo plano.  Esta informa√ß√£o est√° sob controle de vers√£o no arquivo <b>./build-system/.gitrepo/config</b> : <br></p><br><pre> <code class="plaintext hljs">[subrepo] remote = ../../remote/build-system.git branch = master commit = b2f507918f2821cb7dd90c33223ed5cc3c9922a2 parent = b5e76a713f895565b06ee3ccfa29f19131ba06dd method = merge cmdver = 0.4.1</code> </pre><br><p>  Informa√ß√µes sobre subprojetos podem ser obtidas usando o <b>comando git subrepo config</b> , por exemplo, para descobrir a revis√£o do projeto upstream <b>remote / build-system.git</b> , que acabou de chegar ao reposit√≥rio principal, usando o comando: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><blockquote>  <em>Deve-se mencionar que o pacote <b>git-subrepo</b> original n√£o salva informa√ß√µes sobre subprojetos no arquivo <b>.gitrepo / config</b> , mas no arquivo <b>.gitrepo</b> .</em> <br></blockquote><br><p>  Portanto, obtivemos a vers√£o mais recente da ramifica√ß√£o principal do reposit√≥rio upstream <b>remote / build-system.git</b> e a colocamos no subdiret√≥rio <b>build-system</b> do projeto da <b>plataforma</b> principal. <br></p><br><p>  Para entregar essas altera√ß√µes no reposit√≥rio upstream <b>remote / platform.git</b> , o autor precisa executar o comando <b>git push</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git push Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 849 bytes | 849.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; master -&gt; master bash-4.4$</code> </pre><br><p>  Mais informa√ß√µes sobre os <b>comandos git subrepo</b> podem ser obtidas no arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ReadMe.pod</a> ou na linha de comando <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>&gt;</code> </pre><br><p>  por exemplo: <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span></code> </pre><br><p>  Considere agora tudo o que acontece com o usu√°rio. <br></p><br><br><h3>  Obtendo c√≥digo pelos usu√°rios </h3><br><p>  No momento, quando o usu√°rio ainda n√£o recebeu uma atualiza√ß√£o para o reposit√≥rio upstream <b>platform.git</b> , sua c√≥pia cont√©m um <b>arquivo README</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> user/platform/ bash-4.4$ ls README bash-4.4$</code> </pre><br><p>  contendo uma linha: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ cat README [master] platform 1.0.0 bash-4.4$</code> </pre><br><p>  Depois de quebrar as altera√ß√µes do reposit√≥rio upstream <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 6 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (6/6), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/platform b5e76a7..6b831e4 master -&gt; origin/master Updating &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; Fast-forward build-system/.gitrepo/config | 12 ++++++++++++ build-system/README | 3 +++ 2 files changed, 15 insertions(+) create mode 100644 build-system/.gitrepo/config create mode 100644 build-system/README bash-4.4$</code> </pre><br><p>  o usu√°rio ter√° √† sua disposi√ß√£o o c√≥digo do subprojeto do <b>sistema de compila√ß√£o</b> exatamente dessa revis√£o, que foi determinada pelo autor do projeto.  O usu√°rio pode atualizar a revis√£o atual a qualquer momento usando o comando <b>config</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system/ commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><p>  Vale ressaltar que o usu√°rio n√£o precisa fazer configura√ß√µes adicionais e pode confiar no fato de que o autor do projeto deu a ele exatamente a revis√£o do <b>sistema de compila√ß√£o</b> necess√°ria para que a vers√£o atual da <b>plataforma</b> funcione. <br></p><br><p>  √â exatamente isso que o autor do projeto buscou. <br></p><br><h3>  Entregar altera√ß√µes em um projeto upstream </h3><br><p>  Suponha agora que nosso usu√°rio seja membro do projeto e tenha permiss√£o para entregar altera√ß√µes n√£o apenas no reposit√≥rio upstream <b>remote / platform.git</b> , mas tamb√©m no reposit√≥rio upstream do <b>subprojeto remote / build-system.git</b> . <br></p><br><p>  Ent√£o, se o usu√°rio fizer as altera√ß√µes: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build-system/ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.1 bash-4.4$ bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update BS version to 1.0.1"</span></span> [master d30b001] update BS version to 1.0.1 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d30b001286b08708f5c30c1f5346a90e4339f969 (HEAD -&gt; master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 . . . bash-4.4$</code> </pre><br><p>  ele poder√° coloc√°-los em reposit√≥rios upstream da seguinte maneira: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo push build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pushed to <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$</code> </pre><br><div class="spoiler">  <b class="spoiler_title">√â importante notar aqui que ...</b> <div class="spoiler_text"><p>  Como os arquivos de configura√ß√£o dos subprojetos <b>.gitrepo / config</b> s√£o armazenados sob controle de vers√£o, o usu√°rio precisa enviar as altera√ß√µes de status do subprojeto para o reposit√≥rio upstream do projeto principal <b>remote / platform.git</b> . <br></p><br><p>  Ou seja, o usu√°rio n√£o deve esquecer a verifica√ß√£o do status do reposit√≥rio local e executar o comando <em><b>git-push (1) a</b></em> tempo. <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 2 commits. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ git push Enumerating objects: 14, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (14/14), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (9/9), 992 bytes | 992.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 9 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git d00be9f..deccb66 master -&gt; master bash-4.4$</code> </pre><br><p>  Caso contr√°rio, na pr√≥xima vez que voc√™ fizer altera√ß√µes no reposit√≥rio upstream, ele receber√° um conflito de mesclagem. <br></p><br><p>  Obviamente, n√£o h√° nada incomum aqui, no entanto, ap√≥s executar o comando <b>git subrepo push ...</b> , √© f√°cil esquecer o estado da c√≥pia local do reposit√≥rio principal. <br></p><br></div></div><br><br><h3>  Trabalho direto com reposit√≥rio upstream </h3><br><p>  Agora considere o que aconteceu no reposit√≥rio upstream <b>remote / build-system.git</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 3 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (3/3), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/build-system b2f5079..d229920 master -&gt; origin/master Updating b2f5079..d229920 Fast-forward README | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d229920c7de34405bc7b8d47f36d420987687908 (HEAD -&gt; master, origin/master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 commit b2f507918f2821cb7dd90c33223ed5cc3c9922a2 Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:05:30 2018 +0300 init build-system master 1.0.0 bash-4.4$</code> </pre><br><p>  Ou seja, o autor do projeto recebeu as altera√ß√µes feitas pelo participante do projeto. <br></p><br><p>  Obviamente, o autor pode fazer altera√ß√µes diretamente no reposit√≥rio upstream do projeto do <b>sistema de compila√ß√£o</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.2 bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update build-system version to 1.0.2"</span></span> [master 8255f59] update build-system version to 1.0.2 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ git push Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (3/3), 281 bytes | 281.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 3 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/build-system.git d229920..8255f59 master -&gt; master bash-4.4$</code> </pre><br><p>  E todos os participantes, assim como os usu√°rios do projeto principal, poder√£o receber essas altera√ß√µes usando o <b>comando git subrepo pull</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ bash-4.4$ git subrepo pull build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pulled from <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ git push Enumerating objects: 11, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (11/11), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 670 bytes | 670.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git 6b831e4..b6f4a7b master -&gt; master bash-4.4$</code> </pre><br><h2>  Conclus√µes </h2><br><p>  Se o desenvolvedor n√£o precisar armazenar o hist√≥rico de subprojetos no reposit√≥rio principal e, ao fornecer o c√≥digo, ele operar com ramifica√ß√µes em vez de com tags fixas, o <b>git-subrepo</b> ser√° adequado para organizar o trabalho di√°rio. <br></p><br><p>  Condicionalmente, uma das desvantagens do <b>git-subrepo</b> √© o fato de que a opera√ß√£o do <b>clit</b> do <b>git subrepo</b> √© poss√≠vel apenas em rela√ß√£o √†s ramifica√ß√µes do subprojeto.  Em outras palavras, o usu√°rio n√£o pode conectar o subprojeto referente √† sua marca fixa ou a uma revis√£o espec√≠fica, ou seja, comandos como <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system -t 1.0.1 bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system 7f5d1113eb0bc6</code> </pre><br><p>  inv√°lido. <br></p><br><h3>  LITERATURA: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Git - fus√£o de sub√°rvore</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Dominando sub√°rvores git</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Dominando subm√≥dulos git</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Git subrepo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O modelo de gerenciamento de ramifica√ß√£o e m√≥dulo git para um projeto grande</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt428493/">https://habr.com/ru/post/pt428493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt428481/index.html">Contratos digitais: um guia r√°pido para os advogados da NOT</a></li>
<li><a href="../pt428485/index.html">A maioria das pessoas irritantes √© publicidade irrelevante e o uso de gadgets em p√∫blico</a></li>
<li><a href="../pt428487/index.html">Por que o Ruby on Rails √© bom e como acelera o desenvolvimento</a></li>
<li><a href="../pt428489/index.html">Magreza e espessura dos √≠cones. Sketch Pro, recursos de renderiza√ß√£o e um jogo com espessura de linha</a></li>
<li><a href="../pt428491/index.html">Otimiza√ß√£o proativa do desempenho do banco de dados Oracle</a></li>
<li><a href="../pt428495/index.html">Como fiz um simulador de futebol por 13 anos</a></li>
<li><a href="../pt428497/index.html">Redutor sem fio personalizado Noolite SUF-1-300</a></li>
<li><a href="../pt428499/index.html">Gigantes azuis assustadores podem revelar os segredos da evolu√ß√£o estelar</a></li>
<li><a href="../pt428501/index.html">DartUP: a primeira confer√™ncia em russo sobre Dart and Flutter em 1¬∫ de dezembro em S√£o Petersburgo</a></li>
<li><a href="../pt428503/index.html">Vis√£o geral do SVM (algoritmo de aprendizado de m√°quina)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>