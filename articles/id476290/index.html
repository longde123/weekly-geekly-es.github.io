<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📪 🧖 ⛎ Kesalahan dalam Menangani Express 🔸 👑 👭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika saya pertama kali mulai bekerja dengan Express dan mencoba mencari cara untuk menangani kesalahan, saya mengalami kesulitan. Ada perasaan bahwa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kesalahan dalam Menangani Express</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/476290/">  Ketika saya pertama kali mulai bekerja dengan Express dan mencoba mencari cara untuk menangani kesalahan, saya mengalami kesulitan.  Ada perasaan bahwa tidak ada yang menulis tentang apa yang saya butuhkan.  Akibatnya, saya harus mencari jawaban atas pertanyaan saya sendiri.  Hari ini saya ingin memberi tahu semua yang saya tahu tentang penanganan kesalahan dalam aplikasi Express.  Mari kita mulai dengan kesalahan sinkron. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/pt/dq/0q/ptdq0qx0qz7ob2gd1qf0xptr_me.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Penanganan Kesalahan Sinkron</font> </h2><br>  Jika Anda perlu menangani kesalahan sinkron, maka Anda bisa, pertama-tama, menggunakan pernyataan <code>throw</code> , <code>throw</code> kesalahan seperti itu di penangan permintaan Express.  Harap dicatat bahwa penangan permintaan juga disebut "pengendali", tapi saya lebih suka menggunakan istilah "penangan permintaan" karena menurut saya lebih jelas. <br><br>  Begini tampilannya: <br><br><pre> <code class="javascript hljs">app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, (req, res) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Something broke! '</span></span>) })</code> </pre> <br>  Kesalahan semacam itu dapat ditangkap menggunakan penangan kesalahan Express.  Jika Anda belum menulis penangan kesalahan Anda sendiri (kami akan berbicara lebih banyak tentang ini di bawah), maka Express akan menangani kesalahan menggunakan penangan default. <br><br>  Inilah yang dilakukan penangan kesalahan Express standar: <br><br><ol><li>  Atur kode status respons HTTP ke 500. </li><li>  Mengirim respons teks ke entitas yang mengeksekusi permintaan. </li><li>  Mencatat respons teks ke konsol. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc0/177/d75/fc0177d75573acf04474fe8488806e74.png"></div><br>  <i><font color="#999999">Pesan kesalahan ditampilkan di konsol</font></i> <br><br><h2>  <font color="#3AC1EF">Penanganan Kesalahan Asinkron</font> </h2><br>  Untuk menangani kesalahan asinkron, Anda perlu mengirim kesalahan ke penangan kesalahan Express melalui argumen <code>next</code> : <br><br><pre> <code class="javascript hljs">app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Something broke again! '</span></span>)) })</code> </pre> <br>  Inilah yang sampai ke konsol saat mencatat kesalahan ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b9b/abd/8d8/b9babd8d81180f790746e847e1d3796e.png"></div><br>  <i><font color="#999999">Pesan kesalahan ditampilkan di konsol</font></i> <br><br>  Jika Anda menggunakan konstruk async / wait dalam aplikasi Express, maka Anda perlu menggunakan fungsi wrapper seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">express-async-handler</a> .  Ini memungkinkan Anda untuk menulis kode asinkron tanpa blok <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">coba / tangkap</a> .  Baca lebih lanjut tentang async / tunggu di Express di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> asyncHandler = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express-async-handler'</span></span>) app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-comment"><span class="hljs-comment">//  - }))</span></span></code> </pre> <br>  Setelah penangan permintaan dibungkus <code>express-async-handler</code> , Anda bisa, seperti dijelaskan di atas, melempar kesalahan menggunakan pernyataan <code>throw</code> .  Kesalahan ini akan pergi ke penangan kesalahan Express. <br><br><pre> <code class="javascript hljs">app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Something broke yet again! '</span></span>) }))</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89b/505/6c0/89b5056c0c376e95a6e03cbde3fe7dd9.png"></div><br>  <i><font color="#999999">Pesan kesalahan ditampilkan di konsol</font></i> <br><br><h2>  <font color="#3AC1EF">Menulis Handler Kesalahan Anda Sendiri</font> </h2><br>  Penangan kesalahan ekspres mengambil 4 argumen: <br><br><ol><li>  kesalahan </li><li>  req </li><li>  res </li><li>  selanjutnya </li></ol><br>  Anda perlu menempatkan mereka setelah penangan dan rute menengah. <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.get(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.post(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.put(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.delete(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) <span class="hljs-comment"><span class="hljs-comment">//           app.use((error, req, res, next) =&gt; { /* ... */ })</span></span></code> </pre> <br>  Jika Anda membuat penangan kesalahan sendiri, Express akan berhenti menggunakan penangan kesalahan standar.  Untuk menangani kesalahan, Anda perlu membuat respons untuk aplikasi front-end yang membahas titik akhir di mana kesalahan terjadi.  Ini berarti bahwa Anda perlu melakukan hal berikut: <br><br><ol><li>  Buat dan kirim kode status respons yang sesuai. </li><li>  Bentuk dan kirim jawaban yang sesuai. </li></ol><br>  Kode status mana yang sesuai dalam setiap kasus tergantung pada apa yang sebenarnya terjadi.  Berikut adalah daftar kesalahan umum yang harus Anda siap tangani: <br><br><ol><li>  Kesalahan <code>400 Bad Request</code> .  Digunakan dalam dua situasi.  Pertama, ketika pengguna tidak memasukkan bidang yang diperlukan dalam permintaan (misalnya, bidang dengan informasi kartu kredit tidak diisi dalam formulir pembayaran yang dikirim).  Kedua, ketika permintaan berisi data yang salah (misalnya, memasukkan kata sandi yang berbeda di bidang kata sandi dan di bidang konfirmasi kata sandi). </li><li>  Kesalahan <code>401 Unauthorized</code> .  Kode status respons ini diterapkan jika pengguna memasukkan kredensial yang salah (seperti nama pengguna, alamat email, atau kata sandi). </li><li>  Kesalahan <code>403 Forbidden</code> .  Digunakan saat pengguna tidak diizinkan mengakses titik akhir. </li><li>  Kesalahan <code>404 Not Found</code> .  Ini digunakan dalam kasus-kasus di mana titik akhir tidak dapat dideteksi. </li><li>  Kesalahan <code>500 Internal Server Error</code> Galat <code>500 Internal Server Error</code> .  Itu diterapkan ketika permintaan yang dikirim oleh front-end dibentuk dengan benar, tetapi beberapa kesalahan terjadi di back-end. </li></ol><br>  Setelah kode status respons yang sesuai ditentukan, kode itu harus ditetapkan menggunakan <code>res.status</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">// ,         res.status(400)  res.json(/* ... */) })</span></span></code> </pre> <br>  Kode status respons harus sesuai dengan pesan kesalahan.  Untuk melakukan ini, kirim kode status beserta kesalahannya. <br><br>  Cara termudah untuk melakukan ini adalah dengan paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.npmjs.com/package/">http-error</a> .  Ini memungkinkan pengiriman tiga informasi yang salah: <br><br><ol><li>  Kode status respons. </li><li>  Pesan terkait dengan kesalahan. </li><li>  Setiap data yang perlu dikirim (ini opsional). </li></ol><br>  Berikut ini cara menginstal paket <code>http-errors</code> : <br><br><pre> <code class="javascript hljs">npm install http-errors --save</code> </pre> <br>  Berikut cara menggunakan paket ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createError = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http-errors'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   throw createError(status, message, properties)</span></span></code> </pre> <br>  Pertimbangkan contoh yang akan memungkinkan Anda untuk memahami semua ini dengan benar. <br><br>  Bayangkan kami sedang mencari pengguna di alamat emailnya.  Tetapi pengguna ini tidak dapat ditemukan.  Akibatnya, kami memutuskan untuk mengirim <code>User not found</code> kesalahan dalam menanggapi permintaan yang sesuai, memberi tahu penelepon bahwa pengguna tidak ditemukan. <br><br>  Inilah yang perlu kita lakukan saat membuat kesalahan: <br><br><ol><li>  Setel kode status respons ke <code>400 Bad Request</code> (setelah semua, pengguna memasukkan data yang salah).  Ini akan menjadi parameter pertama kami. </li><li>  Kirim pesan ke pemanggil seperti <code>User not found</code> .  Ini akan menjadi parameter kedua. </li></ol><br><pre> <code class="javascript hljs">app.put(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { email } = req.body  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> User.findOne({ email })  <span class="hljs-comment"><span class="hljs-comment">//     -    if (!user) throw createError(400, `User '${email}' not found`) }))</span></span></code> </pre> <br>  Anda bisa mendapatkan kode status menggunakan konstruk <code>error.status</code> , dan pesan kesalahan menggunakan <code>error.message</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   app.use((error, req, res, next) =&gt; {  console.log('Error status: ', error.status)  console.log('Message: ', error.message) })</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb6/200/6e5/fb62006e5a36863e7bf82ce460867f05.png"></div><br>  <i><font color="#999999">Hasil kesalahan logging di konsol</font></i> <br><br>  Kemudian negara respons diatur menggunakan <code>res.status</code> , dan pesan ditulis ke <code>res.json</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      res.status(error.status)  //    res.json({ message: error.message }) })</span></span></code> </pre> <br>  Secara pribadi, saya lebih suka mengirim kode status, pesan, dan hasil jejak stack dalam tanggapan seperti itu.  Ini membuat proses debug lebih mudah. <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      res.status(error.status)  //    res.json({    status: error.status,    message: error.message,    stack: error.stack  }) })</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍ Kode status respons default</font> </h3><br>  Jika sumber kesalahan bukan <code>createError</code> , maka tidak akan memiliki properti <code>status</code> .  Berikut adalah contoh di mana upaya dilakukan untuk membaca file yang tidak ada menggunakan <code>fs.readFile</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> util = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'util'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  readFile  ,  ,  async/await-. //     : https://zellwk.com/blog/callbacks-to-promises const readFilePromise = util.promisify(fs.readFile) app.get('/testing', asyncHandler(async (req, res, next) =&gt; {  const data = await readFilePromise('some-file') })</span></span></code> </pre> <br>  Objek kesalahan seperti itu tidak akan memiliki properti <code>status</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Error status: '</span></span>, error.status)  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Message: '</span></span>, error.message) })</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b78/187/6a3/b781876a373eba2a5ad6effe597c2e3e.png"></div><br>  <i><font color="#999999">Hasil kesalahan logging di konsol</font></i> <br><br>  Dalam kasus seperti itu, Anda dapat mengatur kode kesalahan default.  Yaitu, kita berbicara tentang <code>500 Internal Server Error</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  res.status(error.status || <span class="hljs-number"><span class="hljs-number">500</span></span>)  res.json({    <span class="hljs-attr"><span class="hljs-attr">status</span></span>: error.status,    <span class="hljs-attr"><span class="hljs-attr">message</span></span>: error.message,    <span class="hljs-attr"><span class="hljs-attr">stack</span></span>: error.stack  }) })</code> </pre> <br><h3>  <font color="#3AC1EF">▍Mengganti kode status kesalahan</font> </h3><br>  Misalkan kita akan membaca file tertentu menggunakan data yang disediakan oleh pengguna.  Jika file seperti itu tidak ada, itu berarti bahwa kita perlu memberikan kesalahan <code>400 Bad Request</code> .  Bagaimanapun, server tidak dapat ditemukan karena file tidak dapat ditemukan. <br><br>  Dalam hal ini, Anda perlu menggunakan konstruksi coba / tangkap untuk menangkap kesalahan asli.  Maka Anda perlu membuat ulang objek kesalahan menggunakan <code>createError</code> : <br><br><pre> <code class="javascript hljs">app.get(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { file } = req.body    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> contents = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> readFilePromise(path.join(__dirname, file))  } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) {    <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> createError(<span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-string"><span class="hljs-string">`File </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${file}</span></span></span><span class="hljs-string"> does not exist`</span></span>)  } })</code> </pre> <br><h3>  <font color="#3AC1EF">▍ 404 penanganan kesalahan</font> </h3><br>  Jika permintaan melewati semua penangan menengah dan rute, tetapi tidak diproses, ini berarti bahwa titik akhir yang sesuai dengan permintaan tersebut tidak ditemukan. <br><br>  Untuk menangani <code>404 Not Found</code> kesalahan, Anda perlu menambahkan, antara rute dan penangan kesalahan, penangan tambahan.  Beginilah bentuk penciptaan objek galat 404: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ... // ... app.use((req, res, next) =&gt; {  next(createError(404)) }) //  ...</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c2/462/bc6/5c2462bc6a3767ca349c3c49f12ac033.png"></div><br>  <i><font color="#999999">Detail Kesalahan</font></i> <br><br><h3>  <font color="#3AC1EF">▍ catatan kesalahan ERR_HTTP_HEADERS_SENT</font> </h3><br>  Jangan panik jika Anda melihat pesan kesalahan <code>ERR_HTTP_HEADERS_SENT: Cannot set headers after they are sent to the client</code> .  Itu muncul karena dalam penangan yang sama metode yang mengatur header respons berulang kali disebut.  Berikut adalah metode yang memanggil untuk mengatur tajuk respons secara otomatis: <br><br><ol><li>  kirim ulang </li><li>  res.json </li><li>  kirim ulang </li><li>  res.sendFile </li><li>  res.sendStatus </li><li>  kirim ulang </li><li>  res.redirect </li></ol><br>  Jadi, misalnya, jika Anda memanggil metode <code>res.render</code> dan <code>res.json</code> di penangan respons yang sama, Anda akan mendapatkan kesalahan <code>ERR_HTTP_HEADERS_SENT</code> : <br><br><pre> <code class="javascript hljs">app.get(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, (req, res) =&gt; {  res.render(<span class="hljs-string"><span class="hljs-string">'new-page'</span></span>)  res.json({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'¯\_(ツ)_/¯'</span></span> }) })</code> </pre> <br>  Akibatnya, jika Anda menemukan kesalahan ini, hati-hati periksa kode penangan respons dan pastikan bahwa tidak ada situasi di mana beberapa metode yang dijelaskan di atas dipanggil. <br><br><h3>  <font color="#3AC1EF">▍ Penanganan Kesalahan dan Streaming Data</font> </h3><br>  Jika terjadi kesalahan saat mengalirkan respons ke frontend, maka Anda mungkin mengalami kesalahan yang sama <code>ERR_HTTP_HEADERS_SENT</code> . <br><br>  Dalam hal ini, penanganan kesalahan harus diteruskan ke penangan standar.  Pawang seperti itu akan mengirim kesalahan dan secara otomatis menutup koneksi. <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//       ,        if (res.headersSent) {    return next(error)  }  //     })</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Hari ini saya memberi tahu Anda semua yang saya ketahui tentang penanganan kesalahan di Express.  Saya harap ini membantu Anda menulis aplikasi Express yang lebih andal. <br><br>  <b>Pembaca yang budiman!</b>  Bagaimana Anda menangani kesalahan dalam proyek Node.js Anda? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id476290/">https://habr.com/ru/post/id476290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id476278/index.html">Konferensi BLACK HAT USA. Kaya atau mati: hasilkan uang di Internet menggunakan Black Hat. Bagian 3</a></li>
<li><a href="../id476280/index.html">Melalui duri ke DOS: empat floppy disk yang mengubah dunia</a></li>
<li><a href="../id476284/index.html">Kami merumuskan strategi untuk bekerja dengan kesalahan dalam Bereaksi</a></li>
<li><a href="../id476286/index.html">5 kerangka JS Top untuk pengembangan front-end pada tahun 2020. Bagian 1</a></li>
<li><a href="../id476288/index.html">5 kerangka JS Top untuk pengembangan front-end pada tahun 2020. Bagian 2</a></li>
<li><a href="../id476292/index.html">SVG atau kanvas?</a></li>
<li><a href="../id476294/index.html">Jaringan game yang didistribusikan sebagai alternatif untuk GFN: bagaimana dan mengapa itu bisa lepas landas, di mana ia sudah bekerja di Federasi Rusia</a></li>
<li><a href="../id476296/index.html">21 November, Rapat Rekayasa Produk: Siapa Insinyur Produk?</a></li>
<li><a href="../id476298/index.html">Pergi melalui duri untuk sepeda, bagian satu: mempelajari dasar-dasar menyesuaikan debugger Visual Studio menggunakan plugin</a></li>
<li><a href="../id476300/index.html">Majalah Tram adalah bintang yang terang dan cepat pudar dari avant-garde anak-anak Rusia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>