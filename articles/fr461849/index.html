<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍💻 🛀🏼 🖼️ PVS-Studio a jeté un coup d'œil au moteur de Red Dead Redemption - Bullet 👨🏼‍🌾 🕔 👩🏿‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De nos jours, pour, par exemple, développer des jeux, il n'est plus nécessaire d'implémenter indépendamment la physique des objets à partir de zéro, c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio a jeté un coup d'œil au moteur de Red Dead Redemption - Bullet</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/461849/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d4/8af/4e2/0d48af4e201510deac9e3634151d647e.png" alt="Image 4"></div><br>  De nos jours, pour, par exemple, développer des jeux, il n'est plus nécessaire d'implémenter indépendamment la physique des objets à partir de zéro, car il existe un grand nombre de bibliothèques pour cela.  Bullet était autrefois activement utilisé dans de nombreux jeux AAA, projets de réalité virtuelle, diverses simulations et apprentissage automatique.  Oui, et il est toujours utilisé aujourd'hui, étant, par exemple, l'un des moteurs Red Dead Redemption et Red Dead Redemption 2. Alors pourquoi ne pas vérifier Bullet avec PVS-Studio pour voir quelles erreurs l'analyse statique peut détecter dans un projet à si grande échelle, liés à la simulation physique. <br><a name="habracut"></a><br>  Cette bibliothèque est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">librement distribuée</a> , afin que chacun puisse éventuellement l'utiliser dans ses projets.  En plus de Red Dead Redemption, ce moteur physique est également utilisé dans l'industrie cinématographique pour créer des effets spéciaux.  Par exemple, il a participé au tournage de Sherlock Holmes de Guy Ritchie pour calculer les collisions. <br><br>  Si c'est votre première rencontre avec un article où PVS-Studio vérifie les projets, alors je vais faire une petite digression.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio</a> est un analyseur de code statique qui aide à trouver les erreurs, les lacunes et les vulnérabilités potentielles dans le code source des programmes C, C ++, C #, Java.  L'analyse statique est une sorte de processus automatisé de révision de code. <br><br><h2>  Pour se réchauffer </h2><br>  <b>Exemple 1:</b> <br><br>  Commençons par une erreur amusante: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V624</a> Il y a probablement une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">faute d'</a> impression dans la constante '3.141592538'.  Pensez à utiliser la constante M_PI de &lt;math.h&gt;.  PhysicsClientC_API.cpp 4109 <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">B3_SHARED_API </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b3ComputeProjectionMatrixFOV</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fov, ....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> yScale = <span class="hljs-number"><span class="hljs-number">1.0</span></span> / <span class="hljs-built_in"><span class="hljs-built_in">tan</span></span>((<span class="hljs-number"><span class="hljs-number">3.141592538</span></span> / <span class="hljs-number"><span class="hljs-number">180.0</span></span>) * fov / <span class="hljs-number"><span class="hljs-number">2</span></span>); .... }</code> </pre> <br>  Une petite faute de frappe dans le nombre Pi (3.141592653 ...), manquant le nombre "6" à la 7ème position dans la partie fractionnaire. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f83/42b/62f/f8342b62f2250ce927675fbbc1f40af7.png" alt="Image 1"></div>  Peut-être que l'erreur à la dix millionième décimale n'entraînera pas de conséquences tangibles, mais vous devriez toujours utiliser les constantes de bibliothèque existantes sans fautes de frappe.  Pour Pi, il existe une constante <i>M_PI</i> de l'en-tête <i>math.h.</i> <br><br><h2>  Copier coller </h2><br>  <b>Exemple 2:</b> <br><br>  Parfois, l'analyseur vous permet de trouver l'erreur indirectement.  Ainsi, par exemple, ici trois arguments liés <i>halfExtentsX, halfExtentsY, halfExtentsZ</i> sont passés à la fonction, mais ce dernier n'est utilisé nulle part dans la fonction.  Vous pouvez remarquer que lors de l'appel de la méthode <i>addVertex</i> , la variable <i>halfExtentsY est</i> utilisée deux fois.  C'est peut-être une erreur de copier-coller et ici un argument oublié devrait être utilisé. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V751 Le</a> paramètre 'halfExtentsZ' n'est pas utilisé dans le corps de la fonction.  TinyRenderer.cpp 375 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> TinyRenderObjectData::createCube(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> halfExtentsX, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> halfExtentsY, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> halfExtentsZ, ....) { .... m_model-&gt;addVertex(halfExtentsX * cube_vertices_textured[i * <span class="hljs-number"><span class="hljs-number">9</span></span>], halfExtentsY * cube_vertices_textured[i * <span class="hljs-number"><span class="hljs-number">9</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>], halfExtentsY * cube_vertices_textured[i * <span class="hljs-number"><span class="hljs-number">9</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>], cube_vertices_textured[i * <span class="hljs-number"><span class="hljs-number">9</span></span> + <span class="hljs-number"><span class="hljs-number">4</span></span>], ....); .... }</code> </pre> <br>  <b>Exemple 3:</b> <br><br>  L'analyseur a également trouvé le fragment intéressant suivant, je vais l'apporter d'abord dans sa forme originale. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f03/4d3/6a0/f034d36a087d3705a4aaf5c1ca4ff54c.png" alt="Image 11"></div><br>  Vous voyez cette dernière ligne? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97f/976/5f6/97f9765f6af6eef034ea0c541f6e95c1.png" alt="Image 12"></div><br>  Il est très étrange que le programmeur ait décidé d'écrire une condition aussi longue sur une seule ligne.  Mais le fait qu'une erreur s'y soit probablement glissée n'est pas du tout surprenant. <br><br>  L'analyseur a émis les avertissements suivants sur cette ligne. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V501</a> Il existe des sous-expressions identiques 'rotmat.Column1 (). Norm () &lt;1.0001' à gauche et à droite de l'opérateur '&amp;&amp;'.  LinearR4.cpp 351 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V501</a> Il existe des sous-expressions identiques '0.9999 &lt;rotmat.Column1 (). Norm ()' à gauche et à droite de l'opérateur '&amp;&amp;'.  LinearR4.cpp 351 <br><br>  Si nous écrivons tout sous une forme «tabulaire» visuelle, il deviendra clair que les mêmes vérifications s'appliquent à <i>Colonne1</i> .  Les deux dernières comparaisons montrent qu'il y a <i>Colonne1</i> et <i>Colonne2</i> .  Très probablement, les troisième et quatrième comparaisons auraient dû vérifier la valeur de <i>Colonne2</i> . <br><br><pre> <code class="cpp hljs"> Column1().Norm() &lt; <span class="hljs-number"><span class="hljs-number">1.0001</span></span> &amp;&amp; <span class="hljs-number"><span class="hljs-number">0.9999</span></span> &lt; Column1().Norm() &amp;&amp; Column1().Norm() &lt; <span class="hljs-number"><span class="hljs-number">1.0001</span></span> &amp;&amp; <span class="hljs-number"><span class="hljs-number">0.9999</span></span> &lt; Column1().Norm() &amp;&amp;(Column1() ^ Column2()) &lt; <span class="hljs-number"><span class="hljs-number">0.001</span></span> &amp;&amp; (Column1() ^ Column2()) &gt; <span class="hljs-number"><span class="hljs-number">-0.001</span></span></code> </pre><br>  Sous cette forme, la même comparaison devient beaucoup plus perceptible. <br><br>  <b>Exemple 4:</b> <br><br>  Erreur de type similaire: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V501</a> Il existe des sous-expressions identiques «cs.m_fJacCoeffInv [0] == 0» à gauche et à droite de l'opérateur «&amp;&amp;».  b3CpuRigidBodyPipeline.cpp 169 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> m_fJacCoeffInv[<span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b3SolveFriction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b3ContactConstraint4&amp; cs, ....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cs.m_fJacCoeffInv[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; cs.m_fJacCoeffInv[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } .... }</code> </pre> <br>  Dans ce cas, le même élément de tableau est revérifié.  Très probablement, la condition aurait dû ressembler à ceci: <i>cs.m_fJacCoeffInv [0] == 0 &amp;&amp; cs.m_fJacCoeffInv [1] == 0</i> .  Il s'agit d'un exemple classique d'erreur de copier-coller. <br><br>  <b>Exemple 5:</b> <br><br>  Une autre lacune a été découverte: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V517</a> L'utilisation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle</a> 'if (A) {...} else if (A) {...}' a été détectée.  Il y a une probabilité de présence d'erreur logique.  Vérifiez les lignes: 79, 112. main.cpp 79 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv[])</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (serviceResult &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { serviceResult = enet_host_service(client, &amp;event, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">puts</span></span>(<span class="hljs-string"><span class="hljs-string">"Error with servicing the client"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>(EXIT_FAILURE); } .... } .... }</code> </pre> <br>  La fonction <i>enet_host_service</i> , dont le résultat est affecté à <i>serviceResult</i> , renvoie un en cas de <i>succès</i> et -1 en cas d'échec.  Très probablement, la branche <i>else if</i> aurait dû répondre à la valeur négative de <i>serviceResult</i> , mais la condition de vérification a été dupliquée.  Il s'agit très probablement aussi d'une erreur de copier-coller. <br><br>  Un avertissement similaire à l'analyseur, qui n'a pas de sens à décrire dans l'article: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V517</a> L'utilisation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle</a> 'if (A) {...} else if (A) {...}' a été détectée.  Il y a une probabilité de présence d'erreur logique.  Vérifiez les lignes: 151, 190. PhysicsClientUDP.cpp 151 <br><br><h2>  Au-delà des limites: dépasser les limites du tableau </h2><br>  <b>Exemple 6:</b> <br><br>  L'une des choses désagréables à rechercher des erreurs est de sortir du tableau.  Cette erreur se produit souvent en raison d'une indexation complexe dans la boucle. <br><br>  Ici, dans la condition de boucle, la variable <i>dofIndex est</i> limitée à 128 par le haut et <i>dof</i> à 4 inclus.  Mais <i>m_desiredState</i> ne contient également que 128 éléments.  Par conséquent, l'index <i>[dofIndex + dof]</i> peut conduire à la <i>sortie du</i> tableau. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V557 Le</a> dépassement de matrice est possible.  La valeur de l'indice «dofIndex + dof» pourrait atteindre 130. PhysicsClientC_API.cpp 968 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX_DEGREE_OF_FREEDOM 128 double m_desiredState[MAX_DEGREE_OF_FREEDOM]; B3_SHARED_API int b3JointControl(int dofIndex, double* forces, int dofCount, ....) { .... </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ( (dofIndex &gt;= 0) &amp;&amp; (dofIndex </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; MAX_DEGREE_OF_FREEDOM ) &amp;&amp; dofCount &gt;= 0 &amp;&amp; dofCount &lt;= 4) { for (int dof = 0; dof &lt; dofCount; dof++) { command-&gt;m_sendState.m_desiredState[dofIndex+dof] = forces[dof]; .... } } .... }</span></span></span></span></code> </pre> <br>  <b>Exemple 7:</b> <br><br>  Une erreur similaire, mais maintenant la sommation y conduit non pas lors de l'indexation d'un tableau, mais dans une condition.  Si le nom de fichier est aussi long que possible, le terminal zéro sera écrit en dehors du tableau ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">erreur Off-by-one</a> ).  Naturellement, la variable <i>len</i> sera égale à <i>MAX_FILENAME_LENGTH</i> uniquement dans des cas exceptionnels, mais cela n'élimine pas l'erreur, mais rend simplement son occurrence rare. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V557 Le</a> dépassement de matrice est possible.  La valeur de l'index 'len' pourrait atteindre 1024. PhysicsClientC_API.cpp 5223 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX_FILENAME_LENGTH MAX_URDF_FILENAME_LENGTH 1024 struct b3Profile { char m_name[MAX_FILENAME_LENGTH]; int m_durationInMicroSeconds; }; int len = strlen(name); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (len &gt;= 0 &amp;&amp; len </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; (MAX_FILENAME_LENGTH + 1)) { command-&gt;m_type = CMD_PROFILE_TIMING; strcpy(command-&gt;m_profile.m_name, name); command-&gt;m_profile.m_name[len] = 0; }</span></span></span></span></code> </pre> <br><h2>  Mesurer une fois - couper sept fois </h2><br>  <b>Exemple 8:</b> <br><br>  Dans les cas où vous devez utiliser le résultat d'une certaine fonction plusieurs fois ou utiliser à plusieurs reprises une variable à laquelle vous devez accéder via une série d'appels, vous devez utiliser des variables temporaires pour optimiser et mieux lire le code.  L'analyseur a trouvé plus de 100 emplacements dans le code où une telle correction peut être effectuée. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V807</a> Performances <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">réduites</a> .  Envisagez de créer un pointeur pour éviter d'utiliser à plusieurs reprises l'expression 'm_app-&gt; m_renderer-&gt; getActiveCamera ()'.  InverseKinematicsExample.cpp 315 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resetCamera</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { m_app-&gt;m_renderer-&gt;getActiveCamera()-&gt;setCameraDistance(dist); m_app-&gt;m_renderer-&gt;getActiveCamera()-&gt;setCameraPitch(pitch); m_app-&gt;m_renderer-&gt;getActiveCamera()-&gt;setCameraYaw(yaw); m_app-&gt;m_renderer-&gt;getActiveCamera()-&gt;setCameraPosition(....); } }</code> </pre> <br>  Ici, la même chaîne d'appel est réutilisée, qui peut être remplacée par un seul pointeur. <br><br>  <b>Exemple 9:</b> <br><br>  Performances <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">réduites du V810</a> .  La fonction 'btCos (euler_out.pitch)' a été appelée plusieurs fois avec des arguments identiques.  Le résultat devrait éventuellement être enregistré dans une variable temporaire, qui pourrait ensuite être utilisée lors de l'appel de la fonction 'btAtan2'.  btMatrix3x3.h 576 <br><br>  Performances <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">réduites du V810</a> .  La fonction 'btCos (euler_out2.pitch)' a été appelée plusieurs fois avec des arguments identiques.  Le résultat devrait éventuellement être enregistré dans une variable temporaire, qui pourrait ensuite être utilisée lors de l'appel de la fonction 'btAtan2'.  btMatrix3x3.h 578 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEulerZYX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... euler_out.roll = btAtan2(m_el[<span class="hljs-number"><span class="hljs-number">2</span></span>].y() / btCos(euler_out.pitch), m_el[<span class="hljs-number"><span class="hljs-number">2</span></span>].z() / btCos(euler_out.pitch)); euler_out2.roll = btAtan2(m_el[<span class="hljs-number"><span class="hljs-number">2</span></span>].y() / btCos(euler_out2.pitch), m_el[<span class="hljs-number"><span class="hljs-number">2</span></span>].z() / btCos(euler_out2.pitch)); euler_out.yaw = btAtan2(m_el[<span class="hljs-number"><span class="hljs-number">1</span></span>].x() / btCos(euler_out.pitch), m_el[<span class="hljs-number"><span class="hljs-number">0</span></span>].x() / btCos(euler_out.pitch)); euler_out2.yaw = btAtan2(m_el[<span class="hljs-number"><span class="hljs-number">1</span></span>].x() / btCos(euler_out2.pitch), m_el[<span class="hljs-number"><span class="hljs-number">0</span></span>].x() / btCos(euler_out2.pitch)); } .... }</code> </pre><br>  Dans ce cas, vous pouvez créer deux variables et stocker les valeurs renvoyées par la fonction <i>btCos</i> pour <i>euler_out.pitch</i> et <i>euler_out2.pitch</i> , au lieu d'appeler la fonction quatre fois pour chaque argument. <br><br><h2>  Fuite </h2><br>  <b>Exemple 10:</b> <br><br>  De nombreuses erreurs du type suivant ont été trouvées dans le projet: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V773</a> La portée de visibilité du pointeur «importateur» a été fermée sans libérer la mémoire.  Une fuite de mémoire est possible.  SerializeSetup.cpp 94 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SerializeSetup::initPhysics() { .... btBulletWorldImporter* importer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> btBulletWorldImporter(m_dynamicsWorld); .... fclose(file); m_guiHelper-&gt;autogenerateGraphicsObjects(m_dynamicsWorld); }</code> </pre> <br>  Ici, aucune mémoire n'a été libérée du pointeur d' <i>importation</i> .  Cela peut provoquer une fuite de mémoire.  Et pour le moteur physique, cela peut être une mauvaise tendance.  Pour éviter les fuites, il suffit que la variable ne soit plus nécessaire pour ajouter un <i>importateur de suppression</i> .  Mais bien sûr, il vaut mieux utiliser des pointeurs intelligents. <br><br><h2>  Voici vos lois </h2><br>  <b>Exemple 11:</b> <br><br>  L'erreur suivante apparaît dans le code car les règles C ++ ne coïncident pas toujours avec les règles mathématiques ou le «bon sens».  Remarquez par vous-même où l'erreur se trouve dans un petit extrait de code? <br><br><pre> <code class="cpp hljs">btAlignedObjectArray&lt;btFractureBody*&gt; m_fractureBodies; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> btFractureDynamicsWorld::fractureCallback() { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; numManifolds; i++) { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> f0 = m_fractureBodies.findLinearSearch(....); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> f1 = m_fractureBodies.findLinearSearch(....); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (f0 == f1 == m_fractureBodies.size()) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; .... } .... }</code> </pre> <br>  L'analyseur génère l'avertissement suivant: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V709</a> Comparaison suspecte trouvée: 'f0 == f1 == m_fractureBodies.size ()'.  N'oubliez pas que «a == b == c» n'est pas égal à «a == b &amp;&amp; b == c».  btFractureDynamicsWorld.cpp 483 <br><br>  Il semblerait que la condition vérifie que <i>f0</i> est égal à <i>f1</i> et égal au nombre d'éléments dans <i>m_fractureBodies</i> .  Il semble que cette comparaison aurait dû vérifier si <i>f0</i> et <i>f1 sont</i> à la fin du tableau <i>m_fractureBodies</i> , car ils contiennent la position de l'objet trouvé par la méthode <i>findLinearSearch ()</i> .  Cependant, en réalité, cette expression se transforme en une vérification pour voir si <i>f0</i> et <i>f1</i> sont égales, puis en une vérification si <i>m_fractureBodies.size ()</i> est égal au résultat de <i>f0 == f1</i> .  Par conséquent, le troisième opérande est comparé à 0 ou 1 ici. <br><br>  Belle erreur!  Et, heureusement, assez rare.  Jusqu'à présent, nous ne l'avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rencontrée</a> que dans deux projets ouverts et, fait intéressant, tous n'étaient que des moteurs de jeu. <br><br>  <b>Exemple 12:</b> <br><br>  Lorsque vous travaillez avec des chaînes, il est souvent préférable d'utiliser les fonctionnalités fournies par la classe de <i>chaînes</i> .  Ainsi, pour les deux cas suivants, il est préférable de remplacer respectivement <i>strlen (MyStr.c_str ())</i> et <i>val = ""</i> par <i>MyStr.length ()</i> et <i>val.clear ()</i> . <br><br>  Performances <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">réduites du V806</a> .  L'expression du type strlen (MyStr.c_str ()) peut être réécrite en MyStr.length ().  RobotLoggingUtil.cpp 213 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">FILE* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createMinitaurLogFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* fileName, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; structTypes, ....)</span></span></span><span class="hljs-function"> </span></span>{ FILE* f = fopen(fileName, <span class="hljs-string"><span class="hljs-string">"wb"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (f) { .... fwrite(structTypes.c_str(), <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(structTypes.c_str()), <span class="hljs-number"><span class="hljs-number">1</span></span>, f); .... } .... }</code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V815</a> Performances <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">réduites</a> .  Pensez à remplacer l'expression 'val = ""' par 'val.clear ()'.  b3CommandLineArgs.h 40 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addArgs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **argv)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> val; .... val = <span class="hljs-string"><span class="hljs-string">""</span></span>; .... }</code> </pre> <br>  Il y a eu d'autres avertissements, mais je pense que vous pouvez arrêter.  Comme vous pouvez le voir, l'analyse de code statique peut révéler un large éventail d'erreurs diverses. <br><br>  La lecture des vérifications de projet ponctuelles est intéressante, mais ce n'est pas la bonne façon d'utiliser des analyseurs de code statiques.  Et à ce sujet, nous parlerons ci-dessous. <br><br><h2>  Erreurs trouvées devant nous </h2><br>  Il était intéressant dans l'esprit du récent article « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Erreurs que l'analyse de code statique ne trouve pas parce qu'il n'est pas utilisé</a> » d'essayer de trouver des bogues ou des défauts qui ont déjà été corrigés, mais que l'analyseur statique pourrait détecter. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e5/4ab/39d/0e54ab39d2d7d7dbd4d595d1032fe994.png" alt="Image 2"></div><br>  Il n'y avait pas autant de demandes d'extraction dans le référentiel, et beaucoup d'entre elles sont liées à la logique interne du moteur.  Mais il y avait aussi des erreurs que l'analyseur pouvait détecter. <br><br>  <b>Exemple 13:</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> m_deviceExtensions[B3_MAX_STRING_LENGTH]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b3OpenCLUtils_printDeviceInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cl_device_id device)</span></span></span><span class="hljs-function"> </span></span>{ b3OpenCLDeviceInfo info; b3OpenCLUtils::getDeviceInfo(device, &amp;info); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info.m_deviceExtensions != <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... } }</code> </pre> <br>  Le commentaire d'édition indique qu'il était nécessaire de vérifier le tableau pour le fait qu'il n'est pas vide, mais à la place une vérification de pointeur inutile a été effectuée, qui renvoyait toujours true.  Ceci est indiqué par l'avertissement PVS-Studio sur le type de contrôle initial: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V600</a> Envisagez d'inspecter l'état.  Le pointeur 'info.m_deviceExtensions' n'est toujours pas égal à NULL.  b3OpenCLUtils.cpp 551 <br><br>  <b>Exemple 14:</b> <br><br>  Pouvez-vous découvrir immédiatement quel est le problème dans la fonction suivante? <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Matrix4x4::SetIdentity() { m12 = m13 = m14 = m21 = m23 = m24 = m13 = m23 = m41 = m42 = m43 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; m11 = m22 = m33 = m44 = <span class="hljs-number"><span class="hljs-number">1.0</span></span>; }</code> </pre> <br>  L'analyseur génère les avertissements suivants: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V570</a> La même valeur est affectée deux fois à la variable 'm23'.  LinearR4.h 627 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V570</a> La même valeur est affectée deux fois à la variable 'm13'.  LinearR4.h 627 <br><br>  Les affectations répétées avec cette forme d'enregistrement sont difficiles à suivre à l'œil nu et, par conséquent, certains éléments de la matrice n'ont pas reçu la valeur initiale.  Cette erreur a été corrigée dans la forme tabulaire de l'enregistrement d'affectation: <br><br><pre> <code class="cpp hljs">m12 = m13 = m14 = m21 = m23 = m24 = m31 = m32 = m34 = m41 = m42 = m43 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>;</code> </pre><br>  <b>Exemple 15:</b> <br><br>  L'erreur suivante dans l'une des conditions de la fonction <i>btSoftBody :: addAeroForceToNode () a</i> conduit à un bogue explicite.  Selon le commentaire de la demande de traction, des forces ont été appliquées aux objets du mauvais côté. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eAeroModel</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> _ { V_Point, V_TwoSided, .... END }; }; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> btSoftBody::addAeroForceToNode(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (btSoftBody::eAeroModel::V_TwoSided) { .... } .... } .... }</code> </pre> <br>  PVS-Studio peut également trouver cette erreur et afficher l'avertissement suivant: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V768</a> La constante d'énumération 'V_TwoSided' est utilisée comme variable de type booléen.  btSoftBody.cpp 542 <br><br>  Le contrôle corrigé est le suivant: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_cfg.aeromodel == btSoftBody::eAeroModel::V_TwoSided) { .... }</code> </pre> <br>  Au lieu de l'équivalence de la propriété d'objet à l'un des énumérateurs, l'énumérateur <i>V_TwoSided</i> lui-même a été vérifié. <br><br>  Il est clair que je n'ai pas vu toutes les demandes de tirage, car je ne me suis pas fixé une telle tâche.  Je voulais juste montrer que l'utilisation régulière d'un analyseur de code statique peut détecter des erreurs à un stade très précoce.  C'est la bonne façon d'utiliser l'analyse de code statique.  L'analyse statique doit être intégrée au processus DevOps et être le filtre principal des bogues.  Tout cela est bien décrit dans l'article " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Intégrez l'analyse statique dans le processus, et ne cherchez pas de bugs avec</a> ." <br><br><h2>  Conclusion </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4a/dc3/388/a4adc33880ad2c22a88902ae54a7fa44.png" alt="Image 6"></div><br>  À en juger par certaines demandes de tirage, un projet est parfois vérifié à l'aide de divers outils d'analyse de code, mais les modifications sont effectuées non pas progressivement, mais en groupes et à de grands intervalles de temps.  Dans certaines demandes, un commentaire indique que des modifications ont été apportées uniquement pour supprimer les avertissements.  Cette approche de l'utilisation de l'analyse réduit considérablement son utilité, car c'est une vérification constante du projet qui vous permet de corriger les erreurs immédiatement et de ne pas attendre l'apparition de bogues évidents. <br><br>  Si vous souhaitez être toujours au courant des actualités et événements de notre équipe, abonnez-vous à nos services sociaux.  Réseaux: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instagram</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Twitter</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vkontakte</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Telegram</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> <br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien de traduction: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio a examiné le moteur de puces de Red Dead Redemption</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461849/">https://habr.com/ru/post/fr461849/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461831/index.html">StealthWatch: déploiement et personnalisation. 2e partie</a></li>
<li><a href="../fr461833/index.html">Ne vous perdez pas dans trois pins: une représentation égocentrique de l'environnement</a></li>
<li><a href="../fr461835/index.html">Comment les diagrammes de Gantt simplifient et renforcent la gestion de projet</a></li>
<li><a href="../fr461841/index.html">PVS-Studio a examiné le moteur de puces de Red Dead Redemption</a></li>
<li><a href="../fr461845/index.html">Les investissements en bourse comme moyen de préserver les finances: 3 méthodes de travail</a></li>
<li><a href="../fr461851/index.html">Blockchain et électricité</a></li>
<li><a href="../fr461855/index.html">Salaires en informatique au premier semestre 2019: selon le calculateur de salaire My Circle</a></li>
<li><a href="../fr461859/index.html">Vous ne savez rien de la technologie alimentaire</a></li>
<li><a href="../fr461861/index.html">Office 365 Cloud Security: Check Point CloudGuard SaaS Testing</a></li>
<li><a href="../fr461865/index.html">Cours vidéo «Introduction à l'inversion à partir de zéro avec IDA PRO. Chapitre 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>