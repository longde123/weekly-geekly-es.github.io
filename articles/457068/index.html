<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游뎽 游꾼游 游꼱 Colas: 쯤u칠 es, por qu칠 y c칩mo usarlo? Eche un vistazo a las caracter칤sticas de AWS SQS 游녢 游녽游낖 游븿游낖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Primero, definamos el concepto de "cola". 
 Tome en consideraci칩n el tipo de cola "FIFO" (primero en entrar , primero en salir). Si toma el valor de W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Colas: 쯤u칠 es, por qu칠 y c칩mo usarlo? Eche un vistazo a las caracter칤sticas de AWS SQS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457068/"><img src="https://habrastorage.org/webt/zw/yz/pq/zwyzpqk1p65bfsq6xzvqab7rt60.png"><br><h3>  <b>Primero, definamos el concepto de "cola".</b> </h3><br>  Tome en consideraci칩n el tipo de cola <b>"FIFO"</b> (primero en <b>entrar</b> , primero en salir).  Si toma el valor de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> , "este es un tipo de datos abstractos con la disciplina del acceso a los elementos".  En resumen, esto significa que no podemos obtener datos de 칠l en un orden aleatorio, sino solo recoger lo que vino primero. <br><br><h3>  A continuaci칩n, 쯗ebe decidir por qu칠 son necesarios? </h3><br>  <b>1. Para operaciones diferidas.</b>  Un ejemplo cl치sico es el procesamiento de im치genes.  Por ejemplo, un usuario carg칩 una imagen en el sitio que necesitamos procesar, esta operaci칩n lleva mucho tiempo, el usuario no quiere esperar tanto.  Por lo tanto, cargamos la imagen y luego la transferimos a la cola.  Y se procesar치 cuando cualquier "trabajador" lo obtenga. <br><br>  <b>2. Para el manejo de cargas m치ximas.</b>  Por ejemplo, hay una parte del sistema que a veces causa mucho tr치fico y no requiere una respuesta instant치nea.  Como opci칩n, generar cualquier informe.  Lanzando esta tarea en la cola, le damos la oportunidad de manejarla con una carga uniforme en el sistema. <br><br>  <b>3. Escalabilidad.</b>  Y probablemente la raz칩n m치s importante, la cola lo hace posible <br>  escalar  Esto significa que puede mostrar varios servicios para el procesamiento en paralelo, lo que aumentar치 considerablemente la productividad. <br><a name="habracut"></a><br><h3>  Ahora veamos los problemas que enfrentaremos si creamos la cola nosotros mismos: </h3><br>  <b>1. Acceso en paralelo.</b>  Solo un controlador puede tomar un mensaje de una cola.  Es decir, si al mismo tiempo dos servicios solicitan mensajes, cada uno de ellos debe devolver un conjunto 칰nico de mensajes.  De lo contrario, resulta que un mensaje se procesa dos veces.  Lo que podr칤a estar cargado. <br><br>  <b>2. El mecanismo de deduplicaci칩n.</b>  El servicio debe tener un sistema que proteja la cola de los duplicados.  Puede haber una situaci칩n en la que uno y el mismo conjunto de datos se enviar치n a la cola por casualidad dos veces.  Como resultado, procesaremos lo mismo dos veces.  Lo que de nuevo est치 cargado. <br><br>  <b>3. Mecanismo de manejo de errores.</b>  Digamos que nuestro servicio tom칩 tres mensajes de la cola.  Dos de los cuales proces칩 con 칠xito enviando solicitudes de eliminaci칩n de la cola.  Y el tercero no pudo procesarlo y muri칩.  Un mensaje que est치 en estado de procesamiento no est치 disponible para otros servicios.  Y no debe permanecer para siempre en estado de procesamiento.  Tal mensaje debe pasar a otro controlador por alguna l칩gica.  Pronto se considerar치 un ejemplo de la implementaci칩n de esta l칩gica utilizando AWS SQS (Simple Queue Service) como ejemplo. <br><br><h3>  Servicios web de Amazon: servicio de cola simple </h3><br><h4>  Ahora veamos c칩mo SQS resuelve estos problemas y qu칠 puede hacer. </h4><br>  <b>1. Acceso en paralelo.</b>  En la cola, puede establecer el par치metro <b>Visibilidad de tiempo de espera</b> .  Determina cu치nto tiempo puede tomar el procesamiento de un mensaje el mayor tiempo posible.  Por defecto, son <b>30 segundos.</b>  Cuando un servicio recoge un mensaje, se transfiere al estado <b>"En vuelo"</b> durante 30 segundos.  Si durante este tiempo no hubo un comando para eliminar este mensaje de la cola, vuelve al principio y el siguiente servicio puede recibirlo nuevamente para su procesamiento. <br><br>  <b>Peque침o trabajo shemka.</b> <br><br><img src="https://habrastorage.org/webt/zx/wj/pd/zxwjpdw6hdsdw8qoinabmifuyzo.png"><br><blockquote>  <b>Aviso:</b> ten cuidado.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SQS en algunos casos puede enviar un mensaje duplicado (Elemento "Entrega al menos una vez").</a>  Por lo tanto, su servicio debe ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">idempotente</a> para el procesamiento. </blockquote><br>  <b>2. Mecanismo de manejo de errores.</b>  En SQS, puede configurar el segundo turno para mensajes "muertos" (Dead Letter Queue).  Es decir, aquellos que no pudieron procesar nuestro servicio se enviar치n a una cola separada, que puede eliminar a su discreci칩n.  Tambi칠n puede establecer despu칠s de qu칠 n칰mero de intentos fallidos el mensaje ir치 a la cola "inactiva".  Un intento fallido es la expiraci칩n del "Tiempo de espera de visibilidad".  Es decir, si no se ha enviado una solicitud de eliminaci칩n durante este tiempo, dicho mensaje se considerar치 no procesado y volver치 a la cola principal o ir치 a "inactivo". <br><br>  <b>3. Deduplicaci칩n de mensajes.</b>  SQS tambi칠n tiene un sistema de protecci칩n duplicado.  Cada mensaje tiene un <b>"Id de deduplicaci칩n"</b> , SQS no pondr치 en cola un mensaje con <br>  repiti칩 el "Id de deduplicaci칩n" durante 5 minutos.  Debe especificar un "Id. De deduplicaci칩n" en cada mensaje o habilitar la generaci칩n de id basada en contenido.  Esto significa que un hash generado en funci칩n de su contenido entrar치 en el "Id. De deduplicaci칩n".  El par치metro <b>"Deduplicaci칩n basada en contenido".</b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M치s acerca de la deduplicaci칩n</a> <br><blockquote>  <b>Aviso:</b> Tenga cuidado si env칤a dos mensajes id칠nticos en 5 minutos y tiene activada la <b>"Desduplicaci칩n basada en contenido".</b> SQS no agregar치 un segundo mensaje a la cola. <br></blockquote><blockquote>  <b>Aviso:</b> Tenga cuidado, por ejemplo, si no hay conexi칩n en el dispositivo y no recibe una respuesta y luego env칤a una segunda solicitud despu칠s de 5 minutos, se crear치 un duplicado. <br></blockquote>  <b>4. Encuesta larga.</b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Encuesta larga</a>  SQS admite este tipo de conexi칩n con un tiempo de espera m치ximo de 20 segundos.  Lo que nos permite ahorrar en tr치fico y "sacudidas" del servicio. <br><br>  <b>5. M칠tricas.</b>  Amazon tambi칠n proporciona m칠tricas de cola detalladas.  Como la cantidad de mensajes recibidos / enviados / eliminados, el tama침o en KB de estos mensajes, etc.  Tambi칠n puede conectar SQS al servicio de registro de CloudWatch.  All칤 puedes ver a칰n m치s.  Tambi칠n all칤 puede configurar las llamadas <b>"alarmas"</b> y puede configurar acciones para cualquier evento.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Obtenga m치s informaci칩n sobre c칩mo conectarse a SQS.</a>  Y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci칩n de CloudWatch</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><br></a> <br><h3>  Ahora veamos la configuraci칩n de la cola: </h3><br><h4>  Los principales: </h4><br>  <b>Tiempo de espera de visibilidad predeterminado: la</b> cantidad de segundos / minutos / horas durante los cuales el mensaje despu칠s de recibir no estar치 visible para recibir.  El tiempo m치ximo de procesamiento es de 12 horas. <br><br>  <b>Per칤odo de retenci칩n de mensajes: la</b> cantidad de segundos / minutos / horas / d칤as, lo que significa cu치nto tiempo se guardar치n los mensajes sin procesar en la cola.  M치ximo - 14 d칤as. <br><br>  <b>Tama침o</b> m치ximo del mensaje: tama침o m치ximo del mensaje en KB.  El valor es de 1 KB a 256 KB. <br><br>  <b>Demora de entrega:</b> puede establecer el tiempo de demora para entregar un mensaje a la cola.  De 0 segundos a 15 minutos (de hecho, los mensajes estar치n en la cola, pero no ser치n visibles para recibir). <br><br>  <b>Tiempo de espera del mensaje de recepci칩n:</b> tiempo, cu치nto tiempo durar치 la conexi칩n en caso de que usemos "Encuesta larga" para recibir nuevos mensajes. <br><br>  <b>Deduplicaci칩n basada en contenido: el</b> indicador, si se establece en verdadero, se agregar치 un "Id. De deduplicaci칩n" a cada mensaje en forma de hash SHA-256 generado a partir del contenido. <br><br><h4>  Configuraci칩n de cola muerta </h4><br>  <b>Use la pol칤tica Redrive: una</b> bandera, si est치 configurada, los mensajes ser치n redirigidos despu칠s de varios intentos. <br><br>  <b>Cola de letra muerta: el</b> nombre de la cola "muerta" a la que se enviar치n los mensajes sin formato. <br><br>  <b>N칰mero m치ximo de recibos: el</b> n칰mero de intentos de procesamiento fallidos, despu칠s del cual el mensaje se enviar치 a la cola "inactiva" <br><blockquote>  <b>Aviso:</b> tambi칠n tenga en cuenta que podemos enviar todos los par치metros principales junto con cada mensaje por separado.  Por ejemplo, cada mensaje individual puede tener su propio tiempo de <b>espera de visibilidad</b> o <b>retraso de entrega.</b> </blockquote><h3>  Ahora un poco sobre los mensajes en s칤 y sus propiedades: </h3><br>  Un mensaje tiene varios par치metros: <br><br>  <b>1. Cuerpo del mensaje:</b> cualquier texto <br>  <b>2. Id. De grupo de mensajes es</b> algo as칤 como una etiqueta, un canal, requerido para todos los mensajes.  Se garantiza que cada uno de estos grupos se procesar치 en modo FIFO. <br>  <b>3. Id. De deduplicaci칩n del mensaje:</b> cadena para identificar duplicados.  Si se establece el modo "Deduplicaci칩n basada en contenido", el par치metro es opcional. <br><br><h4>  Tambi칠n hay atributos de mensaje </h4><br>  Los atributos consisten en un nombre, tipo y valor. <br><br>  <b>1. Nombre -</b> cadena <br>  <b>2. Tipo:</b> hay varios tipos: cadena, n칰mero, binario.  El tipo viene simplemente como una cadena, y es posible agregar un postfix al tipo.  En este caso, el tipo vendr치 con este postfix a trav칠s del punto, por ejemplo string.example_postfix <br>  <b>3. Valor -</b> cadena <br><blockquote>  <b>Aviso:</b> tenga en cuenta que el n칰mero m치ximo de atributos es <b>10</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Detalles</a> </blockquote>  PD: Este art칤culo proporciona una breve descripci칩n de la cola, as칤 como un poco sobre las capacidades y la mec치nica de SQS.  El siguiente art칤culo estar치 dedicado a <b>AWS Lambda</b> y, a continuaci칩n, a su intercambio pr치ctico. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/457068/">https://habr.com/ru/post/457068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457058/index.html">Convertir resultados de impresiones en clics para Google y Yandex en 2019</a></li>
<li><a href="../457060/index.html">Tres videos para escritores de iOS</a></li>
<li><a href="../457062/index.html">Centro de Entrenamiento de Cosmonautas en Star City</a></li>
<li><a href="../457064/index.html">A la pregunta de m칩dulos</a></li>
<li><a href="../457066/index.html">C칩mo modificar el robot FEDOR y la silla de vuelo ISS</a></li>
<li><a href="../457070/index.html">Textolita en lugar de cart칩n. Algunas palabras sobre la insignia interactiva OFFZONE 2019</a></li>
<li><a href="../457072/index.html">C칩mo resolver un viejo problema usando ML en Python y .Net</a></li>
<li><a href="../457074/index.html">La evoluci칩n de los desarrolladores: qu칠 juegos debemos esperar en el futuro</a></li>
<li><a href="../457078/index.html">C칩mo convertir tu avatar de Telegram en un reloj</a></li>
<li><a href="../457082/index.html">Concesi칩n imperceptible de derechos de administrador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>