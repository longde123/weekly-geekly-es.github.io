<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛸 ⛓️ 🧝🏻 Dart中的代码生成。 第2部分。批注，source_gen和build_runner 🤱🏻 👦🏾 🤸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在第一部分中，我们了解了为什么需要代码生成，并列出了Dart中代码生成的必要工具。 在第二部分中，我们将学习如何在Dart中创建和使用注释，以及如何使用source_gen和build_runner开始代码生成。 



 飞镖注解 


注释是可以添加到代码中的语法元数据。 换句话说，这是将附加信...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dart中的代码生成。 第2部分。批注，source_gen和build_runner</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446264/"><p> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第一部分中，</a>我们了解了为什么需要代码生成，并列出了Dart中代码生成的必要工具。 在第二部分中，我们将学习如何在Dart中创建和使用注释，以及如何使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">source_gen</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">build_runner</a>开始代码生成。 </p><br><p><img src="https://habrastorage.org/webt/ol/eq/iu/oleqiu6qqryyv2otgwkcpwadrms.png"></p><a name="habracut"></a><br><h1 id="annotacii-v-dart"> 飞镖注解 </h1><br><p>注释是可以添加到代码中的语法元数据。 换句话说，这是将附加信息添加到代码的任何组件（例如添加到类或方法）的机会。 注解在Dart代码中被广泛使用：我们使用<code>@required</code>来表示需要一个命名参数，如果未指定注解参数，我们的代码将不会编译。 我们还使用<code>@override</code>指示在父类中定义的给定API是在子类中实现的。 注释始终以<code>@</code>符号开头。 </p><br><h3 id="kak-sozdat-svoyu-annotaciyu"> 如何创建自己的注释？ </h3><br><p> 尽管将元数据添加到代码中的想法听起来有些奇怪和复杂，但是注释是Dart语言中最简单的事情之一。 以前曾说过， <em>注释只是携带其他信息</em> 。 它们类似于<strong>PODO</strong> （普通的旧式Dart对象）。  <em>如果在其中定义了<code>const</code>构造函数，则任何类都可以用作注释</em> ： </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String name; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String todoUrl; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Todo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.name, {</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.todoUrl})</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(name != </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">null</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Todo</span></span>(<span class="hljs-string"><span class="hljs-string">'hello first annotation'</span></span>, todoUrl: <span class="hljs-string"><span class="hljs-string">'https://www.google.com'</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloAnnotations</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p> 如您所见，注释非常简单。 重要的是我们将如何使用这些注释。 这将帮助我们<code>source_gen</code>和<code>build_runner</code> 。 </p><br><h3 id="kak-ispolzovat-build_runner"> 如何使用build_runner？ </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>build_runner</code></a>是Dart软件包，它将帮助我们使用Dart代码生成文件。 我们将使用<code>build.yaml</code>配置<code>Builder</code>文件。 配置完成后，将在每个<code>build</code>命令或更改文件时调用<code>Builder</code> 。 我们也有机会解析已修改或符合某些条件的代码。 </p><br><h3 id="source_gen-dlya-ponimaniya-dart-koda">  source_gen用于理解Dart代码 </h3><br><p> 从某种意义上说， <code>build_runner</code>是一种回答“ <strong>何时</strong>需要生成代码？”问题的机制。 同时， <code>source_gen</code>回答问题“应生成<strong>什么</strong>代码？”。  <code>source_gen</code>提供了一个框架，用于创建供<code>build_runner</code>使用的<em>Builders</em> 。 此外， <code>source_gen</code>还提供了一个方便的API，用于解析和生成代码。 </p><br><h1 id="sobiraem-vse-vmeste-todo-report"> 放在一起：TODO报告 </h1><br><p> 在本文的其余部分，我们将<strong>分解todo_reporter.dart</strong>项目，该项目可以在<a href="">此处</a>找到。 </p><br><p> 有一个不成文的规则，所有使用代码生成的项目都必须遵循：您需要创建一个<strong>包含批注</strong>的<strong>包</strong> ，并<strong>为</strong>使用这些批注<strong>的生成器</strong>创建一个<strong>单独的包</strong> 。 有关如何在Dart / Flutter中创建软件包库的信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> 。 </p><br><p> 首先，您需要创建<code>todo_reporter.dart</code>目录。 在此目录中，您需要创建<code>todo_reporter</code>目录，该目录将包含注释， <code>todo_reporter_generator</code>目录以处理注释，最后是<code>example</code>目录，其中包含正在创建的库功能的演示。 </p><br><p> 为了清楚起见， <code>.dart</code>后缀<code>.dart</code>添加到根目录名称。 当然，这不是必须的，但是我喜欢遵循此规则以准确表明该程序包可以在任何Dart项目中使用的事实。 相反，如果我想指出此软件包仅适用于Flutter（如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ozzie.flutter</a> ），我将使用其他后缀。 这不是必须的，这只是我尝试遵守的命名约定。 </p><br><h3 id="sozdanie-todo_reporter-nashego-prostogo-paketa-s-annotaciey"> 创建我们的简单注释包todo_reporter </h3><br><p> 我们将在<code>todo_reporter.dart</code>创建<code>todo_reporter.dart</code> 。 为此，请创建<code>pubspec.yaml</code>文件和<code>lib</code>目录。 </p><br><p>  <code>pubspec.yaml</code>非常简单： </p><br><pre> <code class="plaintext hljs">name: todo_reporter description: Keep track of all your TODOs. version: 1.0.0 author: Jorge Coca &lt;jcocaramos@gmail.com&gt; homepage: https://github.com/jorgecoca/todo_reporter.dart environment: sdk: "&gt;=2.0.0 &lt;3.0.0" dependencies: dev_dependencies: test: 1.3.4</code> </pre> <br><p> 除了在开发过程中使用的<code>test</code>包之外，没有其他依赖项。 </p><br><p> 在<code>lib</code>目录中，执行以下操作： </p><br><ul><li> 您需要创建<code>todo_reporter.dart</code>文件，在其中使用<code>export</code> ，将指定所有具有公共API的类。 这是一个好习惯，因为可以使用<code>import 'package:todo_reporter/todo_reporter.dart';</code>任何类<code>import 'package:todo_reporter/todo_reporter.dart';</code>  。 您可以<a href="">在这里</a>看到这堂课。 </li><li> 在<code>lib</code>目录中，我们将创建<code>src</code>目录，其中包含所有代码-public和non-public。 </li></ul><br><p> 在我们的例子中，我们需要添加的只是注释。 让我们用注释创建一个<code>todo.dart</code>文件： </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Todo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String name; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String todoUrl; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Todo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.name, {</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.todoUrl})</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(name != </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">null</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; }</code> </pre> <br><p> 这样便足以进行注释。 我说过这很简单。 但这还不是全部。 让我们将单元测试添加到<code>test</code>目录： </p><br><div class="spoiler">  <b class="spoiler_title">todo_test.dart</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:test/test.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:todo_reporter/todo_reporter.dart'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ group(<span class="hljs-string"><span class="hljs-string">'Todo annotation'</span></span>, () { test(<span class="hljs-string"><span class="hljs-string">'must have a non-null name'</span></span>, () { expect(() =&gt; Todo(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>), throwsA(TypeMatcher&lt;AssertionError&gt;())); }); test(<span class="hljs-string"><span class="hljs-string">'does not need to have a todoUrl'</span></span>, () { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> todo = Todo(<span class="hljs-string"><span class="hljs-string">'name'</span></span>); expect(todo.todoUrl, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); }); test(<span class="hljs-string"><span class="hljs-string">'if it is a given a todoUrl, it will be part of the model'</span></span>, () { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> givenUrl = <span class="hljs-string"><span class="hljs-string">'http://url.com'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> todo = Todo(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, todoUrl: givenUrl); expect(todo.todoUrl, givenUrl); }); }); }</code> </pre> </div></div><br><p> 这就是我们创建注释所需的全部。 您可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>找到代码。 现在我们可以去发电机了。 </p><br><h3 id="delaem-klassnuyu-rabotu-todo_reporter_generator"> 做一个很酷的工作：todo_reporter_generator </h3><br><p> 现在我们知道了如何创建包，让我们创建<code>todo_reporter_generator</code>包。 该软件包中应该包含<code>pubspec.yaml</code>和<code>build.yaml</code>以及一个<code>lib</code>目录。  <code>lib</code>目录必须具有<code>src</code>目录和<code>builder.dart</code>文件。 我们的<code>todo_reporter_generator</code>被视为一个单独的程序包，将作为<code>dev_dependency</code>添加到其他项目中。 这是因为仅在开发阶段才需要代码生成，并且不需要将其添加到完成的应用程序中。 </p><br><p>  <code>pubspec.yaml</code>如下： </p><br><pre> <code class="plaintext hljs">name: todo_reporter_generator description: An annotation processor for @Todo annotations. version: 1.0.0 author: Jorge Coca &lt;jcocaramos@gmail.com&gt; homepage: https://github.com/jorgecoca/todo_reporter.dart environment: sdk: "&gt;=2.0.0 &lt;3.0.0" dependencies: build: '&gt;=0.12.0 &lt;2.0.0' source_gen: ^0.9.0 todo_reporter: path: ../todo_reporter/ dev_dependencies: build_test: ^0.10.0 build_runner: '&gt;=0.9.0 &lt;0.11.0' test: ^1.0.0</code> </pre> <br><p> 现在让我们创建<code>build.yaml</code> 。 该文件包含<em>构建器</em>所需的配置。 可以在<a href="">这里</a>找到更多详细信息。  <code>build.yaml</code>如下： </p><br><pre> <code class="plaintext hljs">targets: $default: builders: todo_reporter_generator|todo_reporter: enabled: true builders: todo_reporter: target: ":todo_reporter_generator" import: "package:todo_reporter_generator/builder.dart" builder_factories: ["todoReporter"] build_extensions: {".dart": [".todo_reporter.g.part"]} auto_apply: dependents build_to: cache applies_builders: ["source_gen|combining_builder"]</code> </pre> <br><p>  <code>import</code>属性指向包含<code>Builder</code>的文件， <code>builder_factories</code>属性指向将生成代码的方法。 </p><br><p> 现在，我们可以在<code>lib</code>目录中创建<code>builder.dart</code>文件： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:build/build.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:source_gen/source_gen.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:todo_reporter_generator/src/todo_reporter_generator.dart'</span></span>; <span class="hljs-function"><span class="hljs-function">Builder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">todoReporter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuilderOptions options)</span></span></span><span class="hljs-function"> </span></span>=&gt; SharedPartBuilder([TodoReporterGenerator()], <span class="hljs-string"><span class="hljs-string">'todo_reporter'</span></span>);</code> </pre> <br><p> 以及<code>src</code>目录中的<code>todo_reporter_generator.dart</code>文件： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'dart:async'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:analyzer/dart/element/element.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:build/src/builder/build_step.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:source_gen/source_gen.dart'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:todo_reporter/todo_reporter.dart'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoReporterGenerator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GeneratorForAnnotation</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Todo</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">FutureOr&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateForAnnotatedElement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Element element, ConstantReader annotation, BuildStep buildStep)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"// Hey! Annotation found!"</span></span>; } }</code> </pre> <br><p> 如您所见，在<code>builder.dart</code>文件中，我们定义了<code>Builder</code>创建的<code>todoReporter</code>方法。 使用<code>SharedPartBuilder</code>创建<code>Builder</code> ，该<code>SharedPartBuilder</code> <code>Builder</code>使用我们的<code>TodoReporterGenerator</code> 。 因此<code>build_runner</code>和<code>source_gen</code>可以一起工作。 </p><br><p> 我们的<code>TodoReporterGenerator</code>是<code>GeneratorForAnnotation</code>的子类，因此只有在代码中找到此注释（在本例中为<code>@Todo</code> ）时，才会执行<code>generateForAnnotatedElement</code>方法。 </p><br><p>  <code>generateForAnnotatedElement</code>方法返回一个包含我们生成的代码的字符串。  <strong>如果生成的代码未编译，则整个构建阶段将失败</strong> 。 这非常有用，因为它可以避免将来出现错误。 </p><br><p> 因此，对于每一代代码，我们的<code>todo_repoter_generator</code>将创建一个带有注释的<code>part</code>文件<code>// Hey! Annotation found!</code> <code>// Hey! Annotation found!</code> 在下一篇文章中，我们将学习如何处理注释。 </p><br><h1 id="sobiraem-vse-vmeste-ispolzovanie-todo_reporter"> 放在一起：使用todo_reporter </h1><br><p> 现在，您可以演示<code>todo_reporter.dart</code> 。 在使用软件包时，最好添加一个<code>example</code>项目。 因此，其他开发人员将能够看到如何在实际项目中使用该API。 </p><br><p> 让我们创建一个项目，并将所需的依赖项添加到<code>pubspec.yaml</code> 。 在我们的例子中，我们将在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>example</code></a>目录中创建一个Flutter项目并添加依赖项： </p><br><pre> <code class="plaintext hljs">dependencies: flutter: sdk: flutter todo_reporter: path: ../todo_reporter/ dev_dependencies: build_runner: 1.0.0 flutter_test: sdk: flutter todo_reporter_generator: path: ../todo_reporter_generator/</code> </pre> <br><p> 收到软件包（ <code>flutter packages get</code> ）后，我们可以使用我们的注释： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:todo_reporter/todo_reporter.dart'</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Todo</span></span>(<span class="hljs-string"><span class="hljs-string">'Complete implementation of TestClass'</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestClass</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p> 现在一切就绪，运行我们的生成器： </p><br><pre> <code class="bash hljs">$ flutter packages pub run build_runner build</code> </pre> <br><p> 命令完成后，您将在我们的项目中注意到一个新文件： <code>todo.g.dart</code> 。 它将包含以下内容： </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// GENERATED CODE - DO NOT MODIFY BY HAND part of 'todo.dart'; // ***************************************************************** // TodoReporterGenerator // ******************************************************************** // Hey! Annotation found!</span></span></code> </pre> <br><p> 我们实现了我们想要的！ 现在，我们可以为代码中的每个<code>@Todo</code>注释生成正确的Dart文件。 尝试创建所需数量的对象。 </p><br><h1 id="v-sleduyuschey-state"> 在下一篇文章中 </h1><br><p> 现在我们有了用于生成文件的正确设置。 在下一篇文章中，我们将学习如何使用批注，以便所生成的代码可以做一些非常酷的事情。 毕竟，现在生成的代码没有多大意义。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN446264/">https://habr.com/ru/post/zh-CN446264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN446242/index.html">拖延作为时间旅行的工具</a></li>
<li><a href="../zh-CN446244/index.html">Chrome扩展程序用于Web开发并与GitHub一起使用</a></li>
<li><a href="../zh-CN446248/index.html">FunTech QA自动化聚会通知</a></li>
<li><a href="../zh-CN446252/index.html">发生问题时在Debian中保存分区</a></li>
<li><a href="../zh-CN446254/index.html">如何快速提升您的无线网络</a></li>
<li><a href="../zh-CN446266/index.html">生化灯泡</a></li>
<li><a href="../zh-CN446272/index.html">OpenSource的费用是多少</a></li>
<li><a href="../zh-CN446276/index.html">'娥四号飞行任务是着陆器和Yutu-2漫游车的农历初四。 关于设备上的相机和控制器</a></li>
<li><a href="../zh-CN446278/index.html">IGF-1系统在长寿调节中的作用：矛盾和百岁老人的新认识</a></li>
<li><a href="../zh-CN446280/index.html">DUMP科学部：开阔视野</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>