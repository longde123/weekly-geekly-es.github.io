<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêç ü•û ‚öõÔ∏è So speichern Sie Speicher auf Browser-Registerkarten, ohne deren Inhalt zu verlieren. Die Erfahrung des Yandex.Browser-Teams üßëüèª‚Äçü§ù‚Äçüßëüèª ‚è∏Ô∏è üåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn den Browsern der Speicherplatz ausgeht, werden die √§ltesten Registerkarten daraus entladen. Dies ist √§rgerlich, da durch Klicken auf eine solche ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So speichern Sie Speicher auf Browser-Registerkarten, ohne deren Inhalt zu verlieren. Die Erfahrung des Yandex.Browser-Teams</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/423507/"> Wenn den Browsern der Speicherplatz ausgeht, werden die √§ltesten Registerkarten daraus entladen.  Dies ist √§rgerlich, da durch Klicken auf eine solche Registerkarte ein erneutes Laden der Seite erzwungen wird.  Heute werden wir den Lesern von Habr erz√§hlen, wie das Yandex.Browser-Team dieses Problem mithilfe der Hibernate-Technologie l√∂st. <br><br>  Chromium-basierte Browser erstellen f√ºr jede Registerkarte einen Prozess.  Dieser Ansatz hat viele Vorteile.  Dies ist Sicherheit (Isolierung von Sites voneinander), Stabilit√§t (Absturz eines Prozesses zieht nicht den gesamten Browser in Mitleidenschaft ziehen) und Beschleunigung der Arbeit auf modernen Prozessoren mit einer gro√üen Anzahl von Kernen.  Es gibt aber auch ein Minus - einen h√∂heren Speicherverbrauch als bei Verwendung eines Prozesses f√ºr alles.  Wenn Browser nichts damit anfangen w√ºrden, w√ºrden ihre Benutzer st√§ndig so etwas sehen: <br><br><img src="https://habrastorage.org/webt/s6/b-/yc/s6b-yc753-ksq2bjrj2n4_xm_z8.png"><br><br>  Im Chromium-Projekt haben sie Probleme mit dem Speicherverbrauch von Hintergrundregistern, indem sie verschiedene Caches l√∂schen.  Hier geht es nicht um den Cache, in dem die Bilder der geladenen Seiten gespeichert sind.  Es gibt kein Problem mit ihm - er lebt auf der Festplatte.  In einem modernen Browser gibt es viele andere zwischengespeicherte Informationen, die im RAM gespeichert sind. <br><br>  Au√üerdem arbeitet Chromium seit einiger Zeit daran, JS-Timer in Hintergrundregistern zu stoppen.  Andernfalls macht das L√∂schen der Caches keinen Sinn, weil  Aktivit√§ten in den Hintergrundregistern stellen sie wieder her.  Es wird davon ausgegangen, dass Sie, wenn Websites im Hintergrund arbeiten m√∂chten, einen Servicemitarbeiter und keine Timer verwenden m√ºssen. <br><br><a name="habracut"></a>  Wenn diese Ma√ünahmen nicht helfen, bleibt nur noch eines √ºbrig: das Entladen des gesamten Tab-Rendering-Prozesses aus dem Speicher.  Eine offene Site h√∂rt einfach auf zu existieren.  Wenn Sie zur Registerkarte wechseln, wird der Download aus dem Netzwerk gestartet.  Wenn sich auf der Registerkarte ein Pausenvideo befand, wird es von Anfang an abgespielt.  Wenn das Formular auf der Seite ausgef√ºllt wurde, k√∂nnen die eingegebenen Informationen verloren gehen.  Wenn eine schwere JS-Anwendung auf der Registerkarte funktioniert hat, m√ºssen Sie sie erneut starten. <br><br>  Das Problem des Entladens von Registerkarten ist besonders unangenehm, wenn kein Zugriff auf das Netzwerk besteht.  Haben Sie einen Tab mit Habr verschoben, um an Bord eines Flugzeugs zu lesen?  Seien Sie darauf vorbereitet, dass aus einem n√ºtzlichen Artikel ein K√ºrbis wird. <br><br>  Browser-Entwickler wissen, dass diese extreme Ma√ünahme f√ºr Benutzer √§rgerlich ist ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wenden Sie sich</a> einfach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">an die Suche</a> , um das Ausma√ü abzusch√§tzen), und wenden sie daher im letzten Moment an.  In diesem Moment verlangsamt sich der Computer bereits aufgrund von Speichermangel. Benutzer bemerken dies und suchen nach alternativen M√∂glichkeiten, um das Problem zu l√∂sen. Daher hat beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> Erweiterung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">The Great Suspender</a> mehr als 1,4 Millionen Benutzer. <br><br>  Die Benutzer m√∂chten, dass Browser und Speicher gespeichert werden, und sie werden nicht langsamer.  Zu diesem Zweck sollten die Registerkarten nicht im letzten Moment, sondern etwas fr√ºher entladen werden.  Und daf√ºr m√ºssen Sie aufh√∂ren, den Inhalt der Registerkarten zu verlieren, d. H.  Machen Sie den Speichervorgang unsichtbar.  Aber was soll man dann sparen?  Der Kreis ist geschlossen.  Es wurde jedoch eine L√∂sung gefunden. <br><br><h2>  Ruhezustand bei Yandex Browser </h2><br>  Viele Leser von Habr konnten bereits erraten, was der Speicher l√∂schen soll, aber das Speichern des Status der Registerkarte ist durchaus m√∂glich, wenn Sie den Status zuerst auf der Festplatte entladen.  Wenn Sie auf eine Registerkarte klicken, um die Registerkarte von der Festplatte wiederherzustellen, bemerkt der Benutzer nichts. <br><br>  Unser Team ist an der Entwicklung des Chromium-Projekts beteiligt, bei dem wichtige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Optimierungs√§nderungen</a> und neue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Funktionen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gesendet werden</a> .  Bereits im Jahr 2015 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diskutierten</a> wir mit Kollegen aus dem Projekt √ºber die Idee, den Status der Registerkarten auf der Festplatte beizubehalten, und konnten sogar eine Reihe von Verbesserungen vornehmen. Sie beschlossen jedoch, diese Richtung in Chromium einzufrieren.  Wir haben uns anders entschieden und uns in Yandex.Browser weiterentwickelt.  Es dauerte l√§nger als geplant, aber es hat sich gelohnt.  Im Folgenden werden wir √ºber die technische F√ºllung der Hibernate-Technologie sprechen, aber beginnen wir zun√§chst mit der allgemeinen Logik. <br><br>  Mehrmals pro Minute √ºberpr√ºft Yandex.Browser die Menge des verf√ºgbaren Speichers. Wenn dieser unter dem Schwellenwert von 600 Megabyte liegt, kommt der Ruhezustand ins Spiel.  Alles beginnt damit, dass der Browser die √§lteste (zur Verwendung) Hintergrundregisterkarte findet.  √úbrigens hat der durchschnittliche Benutzer 7 ge√∂ffnete Registerkarten, aber 5% haben mehr als 30. <br><br>  Sie k√∂nnen keine alten Registerkarten aus dem Speicher entladen - Sie k√∂nnen etwas wirklich Wichtiges besch√§digen.  Zum Beispiel Musik abspielen oder in einem Web Messenger chatten.  Derzeit gibt es 28 solcher Ausnahmen. Wenn die Registerkarte nicht in mindestens eine davon passt, √ºberpr√ºft der Browser die n√§chste. <br><br>  Wenn eine Registerkarte gefunden wird, die den Anforderungen entspricht, beginnt der Speichervorgang. <br><br><h2>  Speichern und Wiederherstellen von Registerkarten im Ruhezustand </h2><br>  Jede Seite kann in zwei gro√üe Teile unterteilt werden, die den Engines V8 (JS) und Blink (HTML / DOM) zugeordnet sind.  Betrachten Sie ein kleines Beispiel: <br><br><pre><code class="javascript hljs">&lt;html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> </span></span></span><span class="hljs-title"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-title">onLoad</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> div = </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">.createElement(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"div"</span></span></span></span><span class="xml"><span class="javascript">); div.textContent = </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"Look ma, I can set div text"</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">.body.appendChild(div); } </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;body onload=<span class="hljs-string"><span class="hljs-string">"onLoad()"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/html&gt;</span></span></code> </pre> <br><br>  Wir haben einen DOM-Baum und ein kleines Skript, das dem K√∂rper einfach ein Div hinzuf√ºgt.  Aus der Sicht von Blink sieht diese Seite ungef√§hr so ‚Äã‚Äãaus: <br><br><img src="https://habrastorage.org/webt/rt/tk/am/rttkamwsawvme_06mcommdyiqky.png"><br><br>  Schauen wir uns die Beziehung zwischen Blink und V8 am Beispiel von HTMLBodyElement an: <br><br><img src="https://habrastorage.org/webt/yb/rr/-b/ybrr-bppoiru848txkj63eplpne.png"><br><br>  M√∂glicherweise stellen Sie fest, dass Blink und V8 unterschiedliche Darstellungen derselben Entit√§ten haben und eng miteinander verbunden sind.  Wir kamen also zu der urspr√ºnglichen Idee, den vollst√§ndigen Status von V8 zu speichern und Blink nur HTML-Attribute in Form von Text zu speichern.  Dies war jedoch ein Fehler, da wir die Zust√§nde von DOM-Objekten verloren haben, die nicht in Attributen gespeichert waren.  Wir haben auch Zust√§nde verloren, die nicht im DOM gespeichert waren.  Die L√∂sung f√ºr dieses Problem bestand darin, Blink vollst√§ndig zu speichern.  Aber nicht so einfach. <br><br>  Zuerst m√ºssen Sie Informationen √ºber Blink-Objekte sammeln.  Daher stoppen wir zum Zeitpunkt des Speicherns von V8 nicht nur JS und wandeln es um, sondern sammeln auch Verweise auf DOM-Objekte und andere Hilfsobjekte, die f√ºr JS im Speicher verf√ºgbar sind.  Wir gehen auch alle Objekte durch, die √ºber die Dokumentobjekte erreichbar sind - die Stammelemente jedes Seitenrahmens.  So sammeln wir Informationen √ºber alles, was wichtig ist, um es zu bewahren.  Das Schwierigste ist, das Sparen zu lernen. <br><br>  Wenn wir alle Blink-Klassen z√§hlen, die den DOM-Baum darstellen, sowie verschiedene HTML5-APIs (z. B. Canvas, Medien, Geolocation), erhalten wir Tausende von Klassen.  Es ist fast unm√∂glich, die Logik des Speicherns aller Klassen mit Ihren H√§nden zu schreiben.  Das Schlimmste ist jedoch, dass selbst wenn Sie dies tun, die Wartung unm√∂glich ist, da wir regelm√§√üig neue Versionen von Chromium aktualisieren, die unerwartete √Ñnderungen an einer Klasse vornehmen. <br><br>  Unser Browser f√ºr alle Plattformen wurde mit clang erstellt.  Um das Problem der Beibehaltung von Blink-Klassen zu l√∂sen, haben wir ein Plugin f√ºr clang erstellt, das einen AST (Abstract Syntax Tree) f√ºr Klassen erstellt.  Zum Beispiel dieser Code: <br><br><div class="spoiler">  <b class="spoiler_title">Klassencode</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> foo_namespace::Foo { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BarInternal</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> int_field_; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> float_field_; } bar_internal_field_; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> string_field_; };</code> </pre> <br></div></div><br>  Es wird zu einem solchen XML: <br><br><div class="spoiler">  <b class="spoiler_title">Das Ergebnis des Plugins in XML</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_namespace::Bar::BarInternal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span>src/bar.h<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fields</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>int_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>int<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>float_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>float<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_namespace::Bar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span>src/bar.h<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class_name</span></span></span><span class="hljs-tag">&gt;</span></span>foo_namespace::Foo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class_name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fields</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_internal_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_namespace::Bar::BarInternal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>string_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>std::string<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fields</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Dar√ºber hinaus generieren andere von uns geschriebene Skripte aus diesen Informationen C ++ - Code zum Speichern und Wiederherstellen von Klassen, der in die Yandex.Browser-Assembly f√§llt. <br><br><div class="spoiler">  <b class="spoiler_title">C ++ - Sicherungscode, der per Skript aus XML abgerufen wird</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serialize_bar_namespace_Bar_BarInternal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( WriteVisitor* writer, Bar::BarInternal* instance)</span></span></span><span class="hljs-function"> </span></span>{ writer-&gt;WriteBuiltin&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;(instance-&gt;int_vector_field_.size()); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; item : instance-&gt;int_vector_field_) { writer-&gt;WriteBuiltin&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(item); } writer-&gt;WriteBuiltin&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt;(instance-&gt;float_field_); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serialize_bar_namespace_Bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WriteVisitor* writer, Bar* instance)</span></span></span><span class="hljs-function"> </span></span>{ serialize_foo_namespace_Foo(writer, instance); serialize_bar_namespace_Bar_BarInternal( writer, &amp;instance-&gt;bar_internal_field_); writer-&gt;WriteString(instance-&gt;string_field_); }</code> </pre> <br></div></div><br>  Insgesamt generieren wir Code f√ºr ca. 1000 Blink-Klassen.  Zum Beispiel haben wir gelernt, eine so komplexe Klasse wie Canvas zu speichern.  Sie k√∂nnen daraus in JS-Code zeichnen, viele Eigenschaften festlegen, Pinselparameter f√ºr das Zeichnen festlegen usw.  Wir speichern alle diese Eigenschaften, Parameter und das Bild selbst. <br><br>  Nach dem erfolgreichen Verschl√ºsseln und Speichern aller Daten auf der Festplatte wird der Registerkartenprozess aus dem Speicher entladen, bis der Benutzer zu dieser Registerkarte zur√ºckkehrt.  In der Schnittstelle f√§llt es nach wie vor nicht auf. <br><br>  Die Wiederherstellung von Registerkarten erfolgt nicht sofort, jedoch erheblich schneller als beim Herunterladen aus dem Netzwerk.  Trotzdem haben wir einen kniffligen Schritt unternommen, um die Benutzer nicht durch Blitze eines wei√üen Bildschirms zu √§rgern.  Wir zeigen einen Screenshot der Seite, die w√§hrend der Speicherphase erstellt wurde.  Dies hilft, den √úbergang zu gl√§tten.  Andernfalls √§hnelt der Wiederherstellungsprozess der normalen Navigation, mit dem einzigen Unterschied, dass der Browser keine Netzwerkanforderung stellt.  Es erstellt die Rahmenstruktur und die darin enthaltenen DOM-B√§ume neu und ersetzt dann den Status von V8. <br><br>  Wir haben ein Video mit einer klaren Demonstration aufgenommen, wie der Ruhezustand Klick-Registerkarten entl√§dt und wiederherstellt, w√§hrend der Fortschritt im JS-Spiel beibehalten wird, der an der Text- und Videoposition eingegeben wurde: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/T6Gtc1TVAdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Zusammenfassung </h2><br>  In naher Zukunft wird die Hibernate-Technologie allen Benutzern von Yandex.Browser f√ºr Windows zur Verf√ºgung stehen.  Wir planen auch, damit in der Alpha-Version f√ºr Android zu experimentieren.  Damit spart der Browser effizienter als bisher Speicher.  F√ºr Benutzer mit einer gro√üen Anzahl ge√∂ffneter Registerkarten spart Hibernate beispielsweise durchschnittlich mehr als 330 Megabyte Speicher und verliert keine Informationen auf den Registerkarten, auf die unter allen Netzwerkbedingungen mit einem Klick zugegriffen werden kann.  Wir verstehen, dass es f√ºr Webmaster n√ºtzlich w√§re, das Entladen von Hintergrundregistern in Betracht zu ziehen. Daher planen wir, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Page Lifecycle-API zu unterst√ºtzen</a> . <br><br>  Der Ruhezustand ist nicht unsere einzige L√∂sung, um Ressourcen zu sparen.  Dies ist nicht das erste Jahr, in dem wir daran arbeiten, dass sich der Browser an die im System verf√ºgbaren Ressourcen anpasst.  Bei schwachen Ger√§ten wechselt der Browser beispielsweise in den vereinfachten Modus. Wenn der Laptop von der Stromquelle getrennt wird, verringert sich der Stromverbrauch.  Ressourcen sparen ist eine gro√üe und komplizierte Geschichte, zu der wir auf jeden Fall nach Habr√© zur√ºckkehren werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423507/">https://habr.com/ru/post/de423507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423495/index.html">Was ist in XGBoost enthalten und was hat Go damit zu tun?</a></li>
<li><a href="../de423497/index.html">Lassen Sie uns versuchen, √ºber hierarchische Zustandsmaschinen im Allgemeinen und deren Unterst√ºtzung in SObjectizer-5 im Besonderen zu sprechen</a></li>
<li><a href="../de423499/index.html">DevBoy - wie ich ein Open Source-Ger√§teprojekt erstellt und ein Projekt auf Kickstarter gestartet habe</a></li>
<li><a href="../de423503/index.html">Meine Erfahrung in Deutschland zu bewegen, zu leben und zu studieren</a></li>
<li><a href="../de423505/index.html">Zuckerberg verkauft Facebook-Aktien f√ºr 13 Milliarden US-Dollar, damit ‚Äûunsere Kinder nie krank werden m√ºssen‚Äú</a></li>
<li><a href="../de423511/index.html">Abfangen der Installation von Firefox und Chrome unter Windows 10</a></li>
<li><a href="../de423513/index.html">Wir sparen auf einem RAID-Controller oder wie man Varia mit Iops f√ºttert</a></li>
<li><a href="../de423515/index.html">Ist DRY gut oder kann es O von SOLID brechen</a></li>
<li><a href="../de423519/index.html">Wandering Monster: Wie man Probleme auf der Karte beseitigt</a></li>
<li><a href="../de423521/index.html">Sieben Faustregeln zum Experimentieren mit Websites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>