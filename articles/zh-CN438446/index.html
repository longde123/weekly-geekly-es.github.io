<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ³ ğŸ“² ğŸ¨ åŸºå‡†ä½œä¸ºå†³å®šä»£ç æ›´æ”¹çš„åŸºç¡€ âœ‹ğŸ¼ ğŸ–ï¸ ğŸ§”ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bill Kennedyåœ¨ä»–ç²¾å½©çš„Ultimate Goç¼–ç¨‹è¯¾ç¨‹çš„æ¼”è®²ä¸­è¯´ï¼š 
 è®¸å¤šå¼€å‘äººå‘˜å¯»æ±‚ä¼˜åŒ–ä»–ä»¬çš„ä»£ç ã€‚ ä»–ä»¬æ’æˆä¸€è¡Œå¹¶é‡å†™ï¼Œè¯´è¿™æ ·ä¼šå˜å¾—æ›´å¿«ã€‚ éœ€è¦åœæ­¢ã€‚ ä»…åœ¨æ¦‚è¦åˆ†æå¹¶åˆ›å»ºåŸºå‡†ä¹‹åï¼Œæ‰å¯ä»¥è¯´æ­¤ä»£ç æˆ–è¯¥ä»£ç æ›´å¿«ã€‚ ç®—å‘½ä¸æ˜¯ç¼–å†™ä»£ç çš„æ­£ç¡®æ–¹æ³•ã€‚  æˆ‘ä¸€ç›´æƒ³é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥æ¼”ç¤ºè¿™æ˜¯å¦‚ä½•å·¥...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åŸºå‡†ä½œä¸ºå†³å®šä»£ç æ›´æ”¹çš„åŸºç¡€</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438446/">  Bill Kennedyåœ¨ä»–ç²¾å½©çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Ultimate Goç¼–ç¨‹</a>è¯¾ç¨‹çš„æ¼”è®²ä¸­è¯´ï¼š <br><blockquote> è®¸å¤šå¼€å‘äººå‘˜å¯»æ±‚ä¼˜åŒ–ä»–ä»¬çš„ä»£ç ã€‚ ä»–ä»¬æ’æˆä¸€è¡Œå¹¶é‡å†™ï¼Œè¯´è¿™æ ·ä¼šå˜å¾—æ›´å¿«ã€‚ éœ€è¦åœæ­¢ã€‚ ä»…åœ¨æ¦‚è¦åˆ†æå¹¶åˆ›å»ºåŸºå‡†ä¹‹åï¼Œæ‰å¯ä»¥è¯´æ­¤ä»£ç æˆ–è¯¥ä»£ç æ›´å¿«ã€‚ ç®—å‘½ä¸æ˜¯ç¼–å†™ä»£ç çš„æ­£ç¡®æ–¹æ³•ã€‚ </blockquote> æˆ‘ä¸€ç›´æƒ³é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥æ¼”ç¤ºè¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ å‰å‡ å¤©ï¼Œæˆ‘çš„æ³¨æ„åŠ›è½¬ç§»åˆ°ä»¥ä¸‹ä»£ç ï¼Œå¯ä»¥å°†å…¶ç”¨ä½œç¤ºä¾‹ï¼š <br><a name="habracut"></a><br><pre><code class="go hljs">builds := store.Instance.GetBuildsFromNumberToNumber(stageBuild.BuildNumber, lastBuild.BuildNumber) tempList := model.BuildsList{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(builds) - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; i-- { b := builds[i] b.PatchURLs = b.ReversePatchURLs b.ExtractedSize = b.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(tempList, b) }</code> </pre> <br> åœ¨æ­¤ï¼Œåœ¨ä»æ•°æ®åº“è¿”å›çš„<i>æ„å»º</i>åˆ‡ç‰‡çš„æ‰€æœ‰å…ƒç´ ä¸­ï¼Œ <i>PatchURLs</i>è¢«<i>ReversePatchURLs</i>æ›¿æ¢ï¼Œ <i>ExtractedSize</i>è¢«<i>RPatchExtractedSize</i>æ›¿æ¢ï¼Œç„¶åæ‰§è¡Œåå‘æ“ä½œ-æ›´æ”¹å…ƒç´ çš„é¡ºåºï¼Œä»¥ä½¿æœ€åä¸€ä¸ªå…ƒç´ æˆä¸ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªã€‚ <br><br> æˆ‘è®¤ä¸ºï¼Œæºä»£ç é˜…è¯»èµ·æ¥æœ‰äº›å¤æ‚ï¼Œå¯ä»¥è¿›è¡Œä¼˜åŒ–ã€‚ è¿™æ®µä»£ç æ‰§è¡Œäº†ä¸€ä¸ªç®€å•çš„ç®—æ³•ï¼Œè¯¥ç®—æ³•ç”±ä¸¤ä¸ªé€»è¾‘éƒ¨åˆ†ç»„æˆï¼šæ›´æ”¹åˆ‡ç‰‡å…ƒç´ å’Œæ’åºã€‚ ä½†æ˜¯å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œéš”ç¦»è¿™ä¸¤ä¸ªç»„ä»¶å°†éœ€è¦æ—¶é—´ã€‚ <br><br> å°½ç®¡ä¸¤ä¸ªéƒ¨åˆ†éƒ½å¾ˆé‡è¦ï¼Œä½†æ˜¯åå‘ä»£ç å¹¶æœªåƒæˆ‘ä»¬å¸Œæœ›çš„é‚£æ ·è¢«å¼ºè°ƒã€‚ å®ƒåˆ†æ•£åœ¨ä¸‰è¡Œæ’•è£‚çš„çº¿ä¸Šï¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ï¼Œä»¥ç›¸åçš„é¡ºåºè¿­ä»£ä¸€ä¸ªç°æœ‰çš„åˆ‡ç‰‡ï¼Œåœ¨æ–°çš„åˆ‡ç‰‡çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚ ä½†æ˜¯ï¼Œäººä»¬ä¸èƒ½å¿½è§†è¯¥ä»£ç çš„æ— ç–‘ä¼˜åŠ¿ï¼šè¯¥ä»£ç æ­£åœ¨è¿è¡Œå¹¶ç»è¿‡æµ‹è¯•ï¼Œå¦‚æœå®¢è§‚åœ°è¯´ï¼Œå®ƒå°±è¶³å¤Ÿäº†ã€‚ å•ä¸ªå¼€å‘äººå‘˜å¯¹ä»£ç çš„ä¸»è§‚ç†è§£ä¸èƒ½æˆä¸ºæ”¹å†™ä»£ç çš„å€Ÿå£ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸ä¼šä»…ä»…å› ä¸ºä¸å–œæ¬¢å®ƒè€Œé‡å†™ä»£ç ï¼ˆæˆ–è€…ï¼Œç»å¸¸å‘ç”Ÿï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒä¸æ˜¯æˆ‘ä»¬çš„ä»£ç ï¼Œè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡´å‘½ç¼ºé™·</a> ï¼‰ã€‚ <br><br> ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä»…è®¾æ³•æ”¹å–„å¯¹ä»£ç çš„ç†è§£ï¼Œè¿˜å¤§å¤§åŠ å¿«äº†ä»£ç çš„å¤„ç†é€Ÿåº¦ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ è¿™æ˜¯å®Œå…¨ä¸åŒçš„äº‹æƒ…ã€‚ æ‚¨å¯ä»¥æä¾›å‡ ç§æ›¿ä»£ç®—æ³•æ¥æ‰§è¡Œä»£ç ä¸­åµŒå…¥çš„åŠŸèƒ½ã€‚ <br><br> ç¬¬ä¸€ç§é€‰æ‹©ï¼šéå†<i>èŒƒå›´</i>å¾ªç¯ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼› è¦åœ¨æ¯æ¬¡è¿­ä»£ä¸­åè½¬åŸå§‹åˆ‡ç‰‡ï¼Œè¯·åœ¨æœ€ç»ˆæ•°ç»„çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ‘†è„±ä½¿ç”¨å˜é‡<i>len</i>çš„éº»çƒ¦ï¼Œä½¿ç”¨<i>len</i>å‡½æ•°ï¼Œå¾ˆéš¾ä»å¤´å¼€å§‹éå†å…ƒç´ ï¼Œå¹¶ä¸”è¿˜å‡å°‘äº†ä¸¤è¡Œä»£ç ï¼ˆä»ä¸ƒè¡Œå‡å°‘åˆ°äº”è¡Œï¼‰ï¼Œå¹¶ä¸”ä»£ç è¶Šå°ï¼Œå…è®¸å®ƒçš„å¯èƒ½æ€§å°±è¶Šå°ä¸€ä¸ªé”™è¯¯ã€‚ <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList []*store.Build <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>([]*store.Build{build}, tempList...) }</code> </pre><br> ä»æœ«å°¾åˆ é™¤äº†åˆ‡ç‰‡æšä¸¾åï¼Œæˆ‘ä»¬æ¸…æ¥šåœ°åŒºåˆ†äº†æ›´æ”¹å…ƒç´ çš„æ“ä½œï¼ˆç¬¬ä¸‰è¡Œï¼‰å’ŒåŸå§‹æ•°ç»„çš„åå‘æ“ä½œï¼ˆç¬¬å››è¡Œï¼‰ã€‚ <br><br> ç¬¬äºŒç§é€‰æ‹©çš„ä¸»è¦æ€æƒ³æ˜¯è¿›ä¸€æ­¥æ‰©å±•å…ƒç´ çš„å˜åŒ–å’Œæ’åºã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ’åºå¹¶è¿›è¡Œæ›´æ”¹ï¼Œç„¶åé€šè¿‡å•ç‹¬çš„æ“ä½œå¯¹åˆ‡ç‰‡è¿›è¡Œæ’åºã€‚ æ­¤æ–¹æ³•å°†éœ€è¦åˆ‡ç‰‡çš„åˆ†ç±»æ¥å£çš„å…¶ä»–å®ç°ï¼Œä½†å®ƒå°†æé«˜å¯è¯»æ€§ï¼Œå¹¶å°†åå‘å…ƒç´ ä¸æ›´æ”¹å…ƒç´ å®Œå…¨åˆ†ç¦»å¹¶éš”ç¦»ï¼Œå¹¶ä¸”<i>åå‘</i>æ–¹æ³•å¿…å®šä¼šå‘è¯»è€…æŒ‡ç¤ºæ‰€éœ€çš„ç»“æœã€‚ <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList []*store.Build <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Sort(sort.Reverse(sort.IntSlice(keys)))</code> </pre><br> ç¬¬ä¸‰ä¸ªé€‰é¡¹å‡ ä¹æ˜¯ç¬¬äºŒä¸ªé€‰é¡¹çš„é‡å¤ï¼Œä½†æ˜¯ä½¿ç”¨<i>sort.Slice</i>è¿›è¡Œæ’åºï¼Œè¿™ä½¿ä»£ç é‡å¢åŠ äº†ä¸€è¡Œï¼Œä½†é¿å…äº†å¯¹æ’åºæ¥å£çš„å…¶ä»–å®ç°ã€‚ <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Slice(builds, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builds[i].Id &gt; builds[j].Id })</code> </pre><br> ä¹ä¸€çœ‹ï¼Œåœ¨å†…éƒ¨å¤æ‚æ€§ï¼Œè¿­ä»£æ¬¡æ•°ï¼Œåº”ç”¨å‡½æ•°ï¼Œåˆå§‹ä»£ç å’Œç¬¬ä¸€ä¸ªç®—æ³•æ–¹é¢éƒ½éå¸¸æ¥è¿‘ã€‚ ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé€‰é¡¹ä¼¼ä¹æ¯”è¾ƒå›°éš¾ï¼Œä½†æ˜¯ä¸å¯èƒ½æ¯«ä¸å«ç³Šåœ°è¯´å‡ºå››ä¸ªé€‰é¡¹ä¸­çš„å“ªä¸€ä¸ªæ˜¯æœ€ä½³çš„ã€‚ <br><br> å› æ­¤ï¼Œæˆ‘ä»¬ç¦æ­¢æˆ‘ä»¬æ ¹æ®æ²¡æœ‰è¯æ®æ”¯æŒçš„å‡è®¾è¿›è¡Œå†³ç­–ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œæœ€æœ‰è¶£çš„æ˜¯ï¼Œåœ¨åˆ‡ç‰‡çš„æœ«å°¾æ·»åŠ å…ƒç´ æ—¶ï¼Œappendå‡½æ•°çš„è¡Œä¸ºæ–¹å¼ã€‚ æ¯•ç«Ÿï¼Œå®é™…ä¸Šï¼Œæ­¤åŠŸèƒ½å¹¶ä¸åƒçœ‹èµ·æ¥é‚£æ ·ç®€å•ã€‚ <br><br>  <i>Appendçš„</i>å·¥ä½œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–¹å¼å¦‚ä¸‹</a> ï¼šå¦‚æœå…¶å®¹é‡å¤§äºæ€»é•¿åº¦ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°ç°æœ‰åˆ‡ç‰‡ä¸­ï¼Œæˆ–è€…åœ¨å†…å­˜ä¸­ä¸ºæ–°åˆ‡ç‰‡ä¿ç•™ä¸€ä¸ªä½ç½®ï¼Œå°†ç¬¬ä¸€ä¸ªåˆ‡ç‰‡ä¸­çš„æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­ï¼Œæ·»åŠ ç¬¬äºŒä¸ªåˆ‡ç‰‡çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»“æœç‰‡ã€‚ <br><br> è¯¥å‡½æ•°å·¥ä½œä¸­æœ€æœ‰è¶£çš„ç»†å¾®å·®åˆ«æ˜¯ç”¨äºä¸ºæ–°é˜µåˆ—ä¿ç•™å†…å­˜çš„ç®—æ³•ã€‚ ç”±äºæœ€æ˜‚è´µçš„æ“ä½œæ˜¯åˆ†é…æ–°çš„å†…å­˜ï¼Œå› æ­¤Goå¼€å‘äººå‘˜åšäº†ä¸€äº›å°æŠ€å·§ï¼Œä»¥ä½¿<i>append</i>æ“ä½œæ›´ä¾¿å®œã€‚ é¦–å…ˆï¼Œä¸ºäº†é¿å…æ¯æ¬¡æ·»åŠ å…ƒç´ æ—¶éƒ½é‡æ–°ä¿ç•™å†…å­˜ï¼Œä»¥ä¸€å®šçš„ä½™é‡åˆ†é…å†…å­˜é‡-æ˜¯åŸå§‹å†…å­˜çš„ä¸¤å€ï¼Œä½†æ˜¯åœ¨ä¸€å®šæ•°é‡çš„å…ƒç´ ä¹‹åï¼Œæ–°ä¿ç•™çš„å†…å­˜éƒ¨åˆ†çš„å¤§å°ä¸è¶…è¿‡ä¸¤å€ï¼Œè€Œæ˜¯å¢åŠ 25ï¼…ã€‚ <br><br> åœ¨å¯¹<i>append</i>å‡½æ•°æœ‰äº†æ–°çš„ç†è§£ä¹‹å<i>ï¼Œé—®é¢˜çš„</i>ç­”æ¡ˆæ˜¯ï¼šâ€œä»€ä¹ˆä¼šæ›´å¿«ï¼šå°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°ç°æœ‰åˆ‡ç‰‡çš„æœ«å°¾ï¼Œæˆ–è€…å°†ç°æœ‰åˆ‡ç‰‡æ·»åŠ åˆ°ä¸€ä¸ªå…ƒç´ ä¸­çš„åˆ‡ç‰‡ï¼Ÿâ€  -å·²ç»æ›´åŠ é€æ˜ã€‚ å¯ä»¥å‡è®¾åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œä¸ç¬¬ä¸€ç§æƒ…å†µç›¸æ¯”ï¼Œä¼šæœ‰æ›´å¤šçš„å†…å­˜åˆ†é…ï¼Œè¿™å°†ç›´æ¥å½±å“å·¥ä½œé€Ÿåº¦ã€‚ <br><br> å› æ­¤ï¼Œæˆ‘ä»¬é¡ºåˆ©è¾¾åˆ°äº†åŸºå‡†ã€‚ å€ŸåŠ©åŸºå‡†æµ‹è¯•ï¼Œæ‚¨å¯ä»¥è¯„ä¼°ç®—æ³•åœ¨æœ€å…³é”®çš„èµ„æºï¼ˆä¾‹å¦‚è¿è¡Œæ—¶å’ŒRAMï¼‰ä¸Šçš„è´Ÿè½½ã€‚ <br><br> è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŸºå‡†æ¥è¯„ä¼°æˆ‘ä»¬æ‰€æœ‰å››ç§ç®—æ³•ï¼ŒåŒæ—¶æˆ‘ä»¬å°†è¯„ä¼°å“ªäº›å¢é•¿å¯ä»¥ä½¿æˆ‘ä»¬æ‹’ç»æ’åºï¼ˆä»¥ä¾¿äº†è§£åœ¨æ’åºä¸ŠèŠ±è´¹äº†æ€»æ—¶é—´ï¼‰ã€‚ åŸºå‡†ä»£ç ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> services <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"testing"</span></span> <span class="hljs-string"><span class="hljs-string">"sort"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Build <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ExtractedSize <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> PatchUrls <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ReversePatchUrls <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> RPatchExtractedSize <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Builds []*Build <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Builds)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Len</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(a) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Builds)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Swap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { a[i], a[j] = a[j], a[i] } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Builds)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Less</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a[i].Id &lt; a[j].Id } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Builds</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builds Builds <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">100000</span></span>; i++ { builds = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(builds, &amp;Build{Id: i}) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builds } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList Builds <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(builds) - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; i-- { b := builds[i] b.PatchUrls, b.ExtractedSize = b.ReversePatchUrls, b.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(tempList, b) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList Builds <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>([]*Build{build}, tempList...) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Sort(sort.Reverse(builds)) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF4</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Slice(builds, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builds[i].Id &gt; builds[j].Id }) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF5</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } } }</code> </pre><br> ä½¿ç”¨å‘½ä»¤<i>go test -bench =</i>å¯åŠ¨åŸºå‡†<i>ã€‚</i>  <i>-benchmem</i> ã€‚ <br><br> ä¸‹å›¾æ˜¾ç¤ºäº†åˆ‡ç‰‡10ã€100ã€1000ã€10000å’Œ100000å…ƒç´ çš„è®¡ç®—ç»“æœï¼Œå…¶ä¸­F1æ˜¯åˆå§‹ç®—æ³•ï¼ŒF2æ˜¯å°†å…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„å¼€å¤´ï¼ŒF3æ˜¯ä½¿ç”¨<i>sort.Reverse</i> to sortï¼ŒF4æ˜¯ä½¿ç”¨<i>sort.Slice</i> ï¼ŒF5-æ‹’ç»æ’åºã€‚ <br><br>  <i>è¿ä½œæ—¶é—´</i> <br><br><img src="https://habrastorage.org/webt/f_/i2/qp/f_i2qp8xvo7iqoj0k1noa9x1fii.png" alt="è¿ä½œæ—¶é—´"><br><br>  <i>å†…å­˜åˆ†é…æ•°</i> <br><br><img src="https://habrastorage.org/webt/vh/fk/lu/vhfkluqv8_spb0-hnd482kgxigm.png"><br><br> ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥å¢åŠ æ•°ç»„ï¼Œä½†æ˜¯æœ€ç»ˆç»“æœåœ¨åŸåˆ™ä¸Šå·²ç»å¯ä»¥åœ¨10ä¸ªå…ƒç´ çš„åˆ‡ç‰‡ä¸ŠåŒºåˆ†ã€‚  <b>æ‰€æå‡ºçš„æ›¿ä»£ç®—æ³•ï¼ˆF2ï¼ŒF3ï¼ŒF4ï¼‰åœ¨é€Ÿåº¦ä¸Šå‡ä¸èƒ½è¶…è¿‡åŸå§‹ç®—æ³•ï¼ˆF1ï¼‰ã€‚</b> å³ä½¿äº‹å®æ˜¯é™¤F2ä¹‹å¤–çš„æ‰€æœ‰å†…å­˜éƒ½æ¯”åŸå§‹å†…å­˜å°‘ã€‚ æœ€åˆåœ¨åˆ‡ç‰‡çš„å¼€å¤´æ·»åŠ å…ƒç´ çš„ç®—æ³•ï¼ˆF2ï¼‰æ•ˆæœæœ€å·®ï¼šå¦‚é¢„æœŸçš„é‚£æ ·ï¼Œå®ƒæ‹¥æœ‰å¤ªå¤šçš„å†…å­˜åˆ†é…ï¼Œä»¥è‡³äºç»å¯¹ä¸å¯èƒ½åœ¨äº§å“å¼€å‘ä¸­ä½¿ç”¨å®ƒã€‚ ä½¿ç”¨å†…ç½®åå‘æ’åºåŠŸèƒ½ï¼ˆF3ï¼‰çš„ç®—æ³•æ¯”åŸå§‹ç®—æ³•æ…¢å¾—å¤šã€‚ è€Œä¸”åªæœ‰<i>sort.Slice</i>æ’åº<i>ç®—æ³•</i>åœ¨é€Ÿåº¦ä¸Šä¸åŸå§‹ç®—æ³•ç›¸å½“ï¼Œä½†ç•¥é€ŠäºåŸå§‹ç®—æ³•ã€‚ <br><br> æ‚¨è¿˜å¯ä»¥æ³¨æ„åˆ°ï¼Œæ‹’ç»æ’åºï¼ˆF5ï¼‰ä¼šæ˜¾ç€åŠ é€Ÿã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨ç¡®å®è¦é‡å†™ä»£ç ï¼Œåˆ™å¯ä»¥æœè¿™ä¸ªæ–¹å‘å‘å±•ï¼Œä¾‹å¦‚ï¼Œä»æ•°æ®åº“ä¸­æé«˜åˆå§‹<i>æ„å»º</i>åˆ‡ç‰‡ï¼Œåœ¨è¯·æ±‚ä¸­ä½¿ç”¨æŒ‰ID DESCè€Œä¸æ˜¯ASCè¿›è¡Œæ’åºã€‚ ä½†æ˜¯åŒæ—¶ï¼Œæˆ‘ä»¬è¢«è¿«è¶…è¶Šäº†æ‰€è€ƒè™‘çš„ä»£ç éƒ¨åˆ†çš„è¾¹ç•Œï¼Œè¿™å¸¦æ¥äº†å¼•å…¥å¤šä¸ªæ›´æ”¹çš„é£é™©ã€‚ <br><br><h3> ç»“è®º </h3><br> ç¼–å†™åŸºå‡†ã€‚ <br><br> èŠ±æ—¶é—´å»æ€è€ƒæŸä¸ªç‰¹å®šçš„ä»£ç æ˜¯å¦ä¼šæ›´å¿«æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ äº’è”ç½‘ä¸Šçš„ä¿¡æ¯ï¼ŒåŒäº‹å’Œå…¶ä»–äººçš„åˆ¤æ–­ï¼Œæ— è®ºä»–ä»¬çš„æƒå¨æ€§å¦‚ä½•ï¼Œéƒ½å¯ä»¥ä½œä¸ºè¾…åŠ©æ€§è®ºæ®ï¼Œä½†é¦–å¸­æ³•å®˜åœ¨å†³å®šæ˜¯å¦è¦ä½¿ç”¨æ–°ç®—æ³•æ–¹é¢çš„ä½œç”¨åº”ç”±åŸºå‡†ä¿æŒã€‚ <br><br> ä¹çœ‹ä¹‹ä¸‹ï¼ŒGoåªæ˜¯ä¸€ç§ç›¸å½“ç®€å•çš„è¯­è¨€ã€‚ ç»¼åˆçš„80â„20è§„åˆ™åœ¨æ­¤å¤„é€‚ç”¨ã€‚ è¿™20ï¼…ä»£è¡¨äº†è¯­è¨€å†…éƒ¨ç»“æ„çš„ç²¾å¦™ä¹‹å¤„ï¼Œå…¶çŸ¥è¯†å°†æ–°æ‰‹ä¸æœ‰ç»éªŒçš„å¼€å‘äººå‘˜åŒºåˆ†å¼€ã€‚ ç¼–å†™åŸºå‡†è§£å†³é—®é¢˜çš„å®è·µæ˜¯è·å¾—ç­”æ¡ˆå¹¶æ›´æ·±å…¥äº†è§£Goè¯­è¨€å†…éƒ¨ç»“æ„å’ŒåŸç†çš„æœ€ä¾¿å®œï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438446/">https://habr.com/ru/post/zh-CN438446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438430/index.html">æˆ‘è¢«å¡ä½äº†ï¼ æˆ–è€…å¦‚ä½•å…‹æœè‹±è¯­å­¦ä¹ çš„é«˜åŸæ•ˆåº”</a></li>
<li><a href="../zh-CN438434/index.html">é»‘å®¢å®éªŒå®¤ï¼šP1ã€‚ Libsshèº«ä»½éªŒè¯ç»•è¿‡</a></li>
<li><a href="../zh-CN438436/index.html">å¦‚ä½•ä¸ºå‘˜å·¥æä¾›ä¸´æ—¶è®¿é—®å®¢æˆ·èµ„æºè€Œåˆæ— éœ€å†æ¬¡å‘å‡ºå¯†ç çš„æƒ³æ³•</a></li>
<li><a href="../zh-CN438438/index.html">Bitrixé¹¦é¹‰çš„é£Ÿç‰©ã€‚ æˆ‘ä»¬æµ‹è¯•æ€§èƒ½ï¼Œé€‰æ‹©é“</a></li>
<li><a href="../zh-CN438442/index.html">ä»Apacheè½¬å‘è¯·æ±‚åˆ°Ubuntuä¸­çš„Payara Server 5</a></li>
<li><a href="../zh-CN438448/index.html">PC Speakerå…·å¤‡çš„åŠŸèƒ½</a></li>
<li><a href="../zh-CN438450/index.html">ä¸ºä»€ä¹ˆéšç§ç­–ç•¥æ¨¡æ¿ä¸é€‚åˆæ‚¨ï¼Ÿ</a></li>
<li><a href="../zh-CN438454/index.html">OpenSceneGraphï¼šå¯¹è±¡çš„è¯¦ç»†ç¨‹åº¦ï¼ˆLODï¼‰å’ŒèƒŒæ™¯åŠ è½½</a></li>
<li><a href="../zh-CN438456/index.html">åœ¨Zimbra Collaboration Suiteä¸­è®¾ç½®å•ä¸€ç™»å½•</a></li>
<li><a href="../zh-CN438458/index.html">DUMP 2019å¤§ä¼šå°†äº4æœˆ19æ—¥ä¸¾è¡Œã€‚ æˆ‘ä»¬é‚€è¯·æ‚¨åœ¨â€œå‰ç«¯â€ï¼Œâ€œåç«¯â€å’Œâ€œç§‘å­¦â€éƒ¨åˆ†å‘è¡¨æ¼”è®²ã€‚</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>