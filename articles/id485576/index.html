<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍩 👩🏿‍✈️ 👩🏻‍🎨 Fitur membangun koneksi antara peserta dalam permainan jaringan peer-to-peer 🏤 🌀 👟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ini adalah kumpulan informasi yang saya butuhkan untuk mengimplementasikan tahap membangun koneksi antara peserta dalam permainan jaringan peer-to-pee...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fitur membangun koneksi antara peserta dalam permainan jaringan peer-to-peer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485576/">  Ini adalah kumpulan informasi yang saya butuhkan untuk mengimplementasikan tahap membangun koneksi antara peserta dalam permainan jaringan peer-to-peer menggunakan protokol UDP. <br><br>  Artikel ini dirancang untuk pengembang game pemula.  Saya mencoba menulis artikel yang saya sendiri ingin baca pada saat saya baru mulai memahami topik ini: sehingga semua nuansa yang diperlukan dikumpulkan di satu tempat, tetapi pada saat yang sama tidak ada yang berlebihan, dalam bahasa yang sederhana, dan dengan gambar visual.  Mungkin seseorang akan berguna. <br><br>  Pengembang game berpengalaman tidak mungkin menemukan sesuatu yang baru untuk mereka sendiri di sini.  Tapi saya akan berterima kasih atas komentar dan komentarnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pg/wy/7h/pgwy7h2hgc0rws8_5-btx0brno8.png"></div><br><a name="habracut"></a><br><h2>  Game jaringan dengan arsitektur peer-to-peer </h2><br><ul><li>  Setiap pemain menyimpan seluruh keadaan dunia game dan memprosesnya secara serempak dengan pemain lain.  Setiap pemain memberikan aksi pengguna ke semua pemain lain.  Pemain utama yang mengumpulkan pemain lain disebut server dan sisanya adalah klien.  Server adalah yang utama hanya pada tahap pengumpulan pemain.  Dan selama pertandingan tidak ada komputer utama. <br></li><li>  Pendekatan ini memiliki beberapa fitur berikut: <br><ul><li>  Lalu lintas tidak tergantung pada kompleksitas dunia game, tetapi hanya pada jumlah pemain.  Dalam mode ini, <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D1%2580%25D0%25B0%25D1%2582%25D0%25B5%25D0%25B3%25D0%25B8%25D1%258F_%25D0%25B2_%25D1%2580%25D0%25B5%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25BC_%25D0%25B2%25D1%2580%25D0%25B5%25D0%25BC%25D0%25B5%25D0%25BD%25D0%25B8" rel="nofollow">strategi real-time</a> biasanya berfungsi, di mana Anda perlu memproses ribuan unit. <br></li><li>  Volume lalu lintas adalah urutan N², di mana N adalah jumlah pemain.  Karenanya, pendekatan ini hanya berlaku untuk game dengan jumlah pemain yang sedikit. <br></li><li>  Karena data ditransmisikan secara langsung antara pemain tanpa server perantara, penundaan transmisi (kelambatan) minimal.  Tetapi jika setidaknya salah satu pemain memiliki masalah komunikasi, maka ini akan mempengaruhi semua pemain. <br></li><li>  Penting untuk membuat saluran komunikasi antara semua pemain.  Tetapi jika para pemain berada di jaringan lokal yang berbeda, maka ini tidak selalu memungkinkan. <br></li></ul></li><li>  Anda bisa menggunakan TCP atau UDP untuk mentransfer data dalam game. <br><ul><li>  <a href="https://ru.wikipedia.org/wiki/Transmission_Control_Protocol" rel="nofollow">TCP (Transmission Control Protocol)</a> menyediakan pengiriman byte stream yang andal.  Ini menyederhanakan implementasi game, tetapi tidak ada kontrol atas keterlambatan pengiriman data. <br></li><li>  <a href="https://ru.wikipedia.org/wiki/UDP" rel="nofollow">UDP (User Datagram Protocol)</a> adalah protokol transfer paket sederhana tanpa jaminan pengirimannya.  Tetapi karena kesederhanaannya, UDP digunakan dalam sistem waktu nyata ketika tidak dapat diterima untuk menunggu paket yang tertunda atau hilang.  Menggunakan UDP dapat mengurangi penundaan dalam game, tetapi mempersulit implementasi game. <br></li></ul>  Artikel ini menjelaskan penggunaan UDP. <br></li></ul><br><h2>  Membuat koneksi di jaringan lokal </h2><br><ul><li>  Untuk membuat koneksi antara pemain, klien perlu mengetahui alamat IP server dan port yang didengarkan oleh program game. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n3/di/2u/n3di2usgoz4bj4cyqcmbk3txocy.png"></div><br><ul><li>  Misalnya, komputer pemain A memiliki alamat IP 192.168.1.2 di jaringan lokal.  Player A meluncurkan program game di komputernya dalam mode server, dan program mendengarkan port 50120. Player A entah bagaimana mengkomunikasikan informasi ini ke pemain B. <br></li><li>  Komputer Player B memiliki alamat IP 192.168.1.5 di jaringan lokal.  Player B meluncurkan program game di komputernya dalam mode klien, dan program tersebut menempati port 50150. Player B memasuki alamat server 192.168.1.2►0120 dalam program game, dan program mengirimkan permintaan ke server di alamat yang ditentukan. <br></li><li>  Server dalam mode siaga, dan setelah menerima permintaan dari pemain B, ia akan mengetahui alamatnya 192.168.1.5►0150.  Dengan demikian, klien dan server membuat koneksi dan dapat memulai permainan. <br></li></ul></li><li>  Jika beberapa klien terhubung ke server, maka server harus mengirim masing-masing alamat klien lain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f9/zu/zg/f9zuzgexmd5bqe8fxgypsynspyu.png"></div><br>  Dalam contoh di gambar, server A mengirim klien B alamat klien C (192.168.1.6►0160), dan klien C mengirim alamat klien B (192.168.1.5►0150).  Dengan demikian, semua pemain akan dapat membangun koneksi "masing-masing dengan masing-masing." <br></li><li>  Setiap kali gim dimulai, server dapat meminta port gratis dari sistem operasi.  Tetapi lebih nyaman menggunakan port yang sama setiap kali sehingga klien tidak harus memasukkan port baru setiap waktu. <br><br>  Semua port dibagi menjadi tiga rentang: <br><ul><li>  [0, 1023] - terkenal (sistemik). <br></li><li>  [1024, 49151] - terdaftar (pengguna).  Port untuk server harus dipilih dalam kisaran ini. <br></li><li>  [49152, 65535] - dinamis (pribadi).  Di sini, OS mengalokasikan port sementara untuk program. <br></li></ul><br>  Di Wikipedia, Anda dapat melihat daftar <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BF%25D0%25B8%25D1%2581%25D0%25BE%25D0%25BA_%25D0%25BF%25D0%25BE%25D1%2580%25D1%2582%25D0%25BE%25D0%25B2_TCP_%25D0%25B8_UDP" rel="nofollow">port yang dipesan</a> .  Selanjutnya, misalnya, port 49094 untuk server permainan dipilih. <br></li><li>  Komputer dapat memiliki beberapa antarmuka jaringan, baik nyata (Ethernet, WiFi), dan virtual (VPN).  Setiap antarmuka jaringan memiliki alamat IP sendiri.  Program ini dapat memberi pengguna server peluang untuk memilih antarmuka jaringan yang dengannya ia akan menunggu permintaan klien.  Tetapi nyaman untuk menggunakan alamat IP wildcard khusus <a href="https://en.wikipedia.org/wiki/0.0.0.0" rel="nofollow">0.0.0.0</a> .  Jika program membuka soket dengan alamat IP ini, maka ia akan mendengarkan port yang ditentukan untuk semua antarmuka jaringan komputer ini.  Dengan demikian, pemain tidak harus memikirkan antarmuka jaringan mana yang harus dipilih. <br></li><li>  Anda juga dapat membantu klien dan secara otomatis menentukan alamat IP server.  Jika klien mengirim permintaan ke <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B8%25D1%2580%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25B2%25D0%25B5%25D1%2589%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581" rel="nofollow">alamat IP broadcast</a> khusus <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B8%25D1%2580%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25B2%25D0%25B5%25D1%2589%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581" rel="nofollow">(broadcast)</a> , maka semua komputer di jaringan lokal akan menerimanya. <br><br>  Misalnya, jika alamat jaringan 192.168.1.0, subnet mask adalah 255.255.255.0, maka alamat IP broadcast akan menjadi 192.168.1.255. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4y/yj/ot/4yyjotxuzbtirqk2pewwm_npmd8.png"></div><br>  Jika semua server game mendengarkan pada port 49094, maka paket yang dikirim ke alamat 192.168.1.255-00-009094 akan diterima oleh semua server game di jaringan ini.  Setiap server akan mengirimkan konfirmasi kepada pengirim.  Dan klien akan menerima daftar semua server game di jaringannya, dan akan dapat memilih server yang dia butuhkan. <br></li><li>  Jika semua pemain berada di jaringan lokal yang sama, maka membangun koneksi "masing-masing dengan masing-masing" cukup sederhana.  Mungkin ada masalah dengan akses klien ke port server karena Firewall.  Tapi itu tergantung pada pengaturan OS dan keamanan. <br></li></ul><br><h2>  Membuat koneksi dari jaringan lokal ke server di Internet </h2><br><ul><li>  Sebagai aturan, komputer tidak terhubung ke Internet secara langsung, tetapi melalui router.  Dan, sebagai aturannya, router melakukan <a href="https://ru.wikipedia.org/wiki/NAT" rel="nofollow">terjemahan alamat jaringan (NAT, Terjemahan Alamat Jaringan)</a> . <br><br>  Sebagai contoh, klien C berada di jaringan lokal dan memiliki akses ke Internet melalui router B, sementara server A memiliki alamat IP publik di Internet.  Biarkan mereka memiliki alamat berikut: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gq/cf/qt/gqcfqtu-vneghva8qq7v2do7lxo.png"></div><br><ul><li>  Alamat Internet Server A adalah 203.0.113.2.  Program server mendengarkan pada port 49094. <br></li><li>  Alamat router B di Internet adalah 203.0.113.5.  Alamat router B di jaringan lokal adalah 192.168.1.1. <br></li><li>  Alamat C klien di jaringan lokal adalah 192.168.1.5.  Program klien menempati port 50150, dan mengirim paket ke server di 203.0.113.2-00-009094. <br></li><li>  Router B adalah <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25BB%25D1%258E%25D0%25B7_%25D0%25BF%25D0%25BE_%25D1%2583%25D0%25BC%25D0%25BE%25D0%25BB%25D1%2587%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258E" rel="nofollow">gateway default</a> di jaringan lokalnya.  Yaitu, semua paket dengan alamat yang bukan dari jaringan lokal saat ini dikirim ke sana. <br></li><li>  Router memiliki tabel terjemahan alamat: (alamat internal: port internal) - (alamat eksternal: port eksternal).  Setelah menerima paket dari klien ke server 203.0.113.2-00-009094, router memilih port eksternal gratis, misalnya 52050, dan membuat entri dalam tabel terjemahan alamat: 192.168.1.5►0150 - 203.0.113.5►2050. <br></li><li>  Router mengganti alamat internal pengirim 192.168.1.5/100150 dalam paket dengan alamat eksternal 203.0.113.5/102050, dan mentransfer paket yang diubah ke server. <br></li><li>  Server menerima paket dengan alamat pengirim 203.0.113.5► 2020, dan mengirim respons ke alamat ini, yaitu ke router. <br></li><li>  Setelah menerima paket dari server, router mencari alamat penerima di tabel terjemahan alamatnya, melakukan penggantian terbalik alamat eksternal penerima 203.0.113.5►2050 dengan alamat internal 192.168.1.5►0150, dan mengirimkan paket ke alamat ini, yaitu klien. <br></li><li>  Jika klien mengirim paket berikutnya ke server, router melihat alamat pengirim untuk melihat apakah entri seperti itu sudah ada dalam tabel, dan jika demikian, ia menggunakan port eksternal yang sebelumnya dialokasikan, dalam hal ini 52050. <br></li><li>  Dengan demikian, klien dan server membuat koneksi melalui NAT, dan dapat memulai permainan.  Tetapi server tidak mengetahui alamat internal klien di jaringan lokalnya, dan menganggap bahwa klien adalah router. <br></li><li>  Entri dalam tabel terjemahan alamat berlaku untuk jangka waktu tertentu, biasanya 1-3 menit.  Oleh karena itu, klien dan server perlu bertukar paket secara berkala sehingga catatan yang menghubungkannya tidak dihapus.  Jika klien mengirim paket baru ke server setelah menghapus catatan, maka port eksternal yang berbeda dapat dialokasikan untuk catatan baru di router, dan untuk server itu akan menjadi klien lain dengan alamat yang berbeda. <br></li></ul></li><li>  Sebagai aturan, router pengguna tidak terhubung langsung ke Internet, tetapi terletak di jaringan internal penyedia Internet.  Artinya, klien berada di belakang dua NAT. <br><br>  Misalnya, seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7u/ht/cw/7uhtcwvuy-lojgg6_sxifcd_ucc.png"></div><br>  Yaitu, terjemahan ganda dari alamat jaringan dilakukan. <br></li><li>  Ada berbagai jenis NAT: <br><ul><li>  NAT kerucut penuh <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gn/ar/8u/gnar8u7m0xlyigrhgihadyqe0d0.png"></div><br><ul><li>  Setelah entri dibuat dalam tabel terjemahan alamat (alamat internal: port internal) - (alamat eksternal: port eksternal), semua paket dari pengirim (alamat internal: port internal) ditransmisikan melalui (alamat eksternal: port eksternal) ke alamat penerima. <br></li><li>  Setiap server eksternal dapat mengirim paket ke (alamat internal: port internal), mengirim paket ke (alamat eksternal: port eksternal). <br></li></ul>  Sebagai contoh, klien C mengirimkan paket ke server A dan D menggunakan alamat eksternal yang sama 203.0.113.5► 202050.  Jika server E mengirim paket ke alamat ini 203.0.113.5► 202050, router akan meneruskannya ke klien C. <br></li><li>  Alamat-cone NAT. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i6/on/ao/i6onaojluqotmemktgufswzg-ia.png"></div><br><ul><li>  Setelah entri dibuat dalam tabel terjemahan alamat (alamat internal: port internal) - (alamat eksternal: port eksternal), semua paket dari pengirim (alamat internal: port internal) ditransmisikan melalui (alamat eksternal: port eksternal) ke alamat penerima. <br></li><li>  Server eksternal (alamat server: port server) dapat mengirim paket ke (alamat internal: port internal), mengirim paket ke (alamat eksternal: port eksternal) hanya jika (alamat internal: port internal) yang sebelumnya mengirim paket ke (alamat server: apa saja porta). <br></li></ul>  Sebagai contoh, klien C mengirimkan paket ke server A dan D menggunakan alamat eksternal yang sama 203.0.113.5► 202050.  Server D dapat mengirim paket ke klien C melalui alamat router 203.0.113.5► 202050 dari salah satu port-nya.  Tetapi router tidak akan melewatkan paket dari server E. <br></li><li>  NAT kerucut yang dibatasi port. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kr/6v/di/kr6vdi2regppcywwajtz-1basdy.png"></div><br><ul><li>  Setelah entri dibuat dalam tabel terjemahan alamat (alamat internal: port internal) - (alamat eksternal: port eksternal), semua paket dari pengirim (alamat internal: port internal) ditransmisikan melalui (alamat eksternal: port eksternal) ke alamat penerima. <br></li><li>  Server eksternal (alamat server: port server) dapat mengirim paket ke (alamat internal: port internal), mengirim paket ke (alamat eksternal: port eksternal) hanya jika (alamat internal: port internal) yang sebelumnya mengirim paket ke (alamat server: port server). <br></li></ul>  Sebagai contoh, klien C mengirimkan paket ke server A dan D menggunakan alamat eksternal yang sama 203.0.113.5► 202050.  Router tidak akan melewatkan paket dari server E atau port server D. <br></li><li>  Symmetric NAT (Symmetric NAT). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/98/ha/lr/98halr7veiq_ibj_irj2lxixcec.png"></div><br><ul><li>  Jika pengirim internal yang sama (alamat internal: port internal) mengirimkan paket ke penerima yang berbeda (alamat server: port server), maka port eksternal yang terpisah akan dialokasikan untuk setiap alamat penerima dan entri yang terpisah akan digunakan dalam tabel terjemahan alamat. <br></li><li>  Hanya server eksternal (alamat server: port server) yang menerima paket dari pengirim internal (alamat internal: port internal) yang dapat mengirim paket kembali. <br></li></ul>  Sebagai contoh, klien C mengirim paket ke server A menggunakan alamat eksternal 203.0.113.5► 202050, dan ke server D menggunakan alamat eksternal lain 203.0.113.5. 20201.  Router tidak akan melewatkan paket dari server E atau port server D. <br></li></ul></li><li>  Jika beberapa klien terhubung ke server game, maka untuk game peer-to-peer Anda perlu membuat koneksi langsung antara setiap pasangan klien yang melewati server. <br><br>  Misalnya, dua klien C dan E yang terhubung ke server A: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ai/if/ym/aiifymcc-epffu0da8rkksj_4es.png"></div><br><ul><li>  Klien C memiliki alamat internal 192.168.1.5/100150 dan alamat eksternal 203.0.113.5/102050. <br></li><li>  Klien E memiliki alamat internal 192.168.2.5:50250 dan alamat eksternal 203.0.113.6-062060. <br></li><li>  Server harus memberi tahu setiap klien alamat eksternal dari klien lain. <br></li><li>  Biasanya, router menggunakan NAT jenis NAT kerucut yang dibatasi Port.  Router meneruskan paket ke klien hanya dari pengirim (alamat IP dan port) ke mana klien mengirim paket sebelumnya.  Dan jika klien C mengirim paket ke klien E, maka router D tidak akan melewatkan paket ini. <br></li><li>  Dalam hal ini, metode <a href="https://en.wikipedia.org/wiki/UDP_hole_punching" rel="nofollow">meninju lubang UDP</a> digunakan.  Kedua klien harus saling mengirim paket UDP.  Segera setelah klien C mengirim paket ke klien E, maka router B akan siap menerima paket dari klien E. Demikian pula, begitu klien E mengirim paket ke klien C, maka router D akan siap menerima paket dari klien C. Paket pertama dari klien yang memulai mengirimkan pertama akan hilang.  Tetapi begitu klien kedua juga mulai mengirim paket ke arah, kedua klien akan dapat bertukar paket. <br></li><li>  Tetapi jika router menggunakan Symmetric NAT, port eksternal baru akan dialokasikan untuk setiap penerima.  Dan, sebagai aturan, tidak ada cara untuk mengetahui port mana yang telah dialokasikan oleh router.  Oleh karena itu, jika setidaknya salah satu router menggunakan Symmetric NAT, tidak mungkin untuk membuat koneksi antara klien. <br></li></ul></li><li>  Jika dua klien berada di jaringan lokal yang sama, maka mereka hanya akan tahu alamat eksternal masing-masing. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/si/a4/jjsia4y7k50gk3esxa_5hvzx3ks.png"></div><br>  Sebagai contoh, klien C mengirim paket ke klien D di alamat eksternal 203.0.113.5Point2051.  Router B harus memproses paket ini seolah-olah diterima dari jaringan eksternal, ganti alamat penerima 203.0.113.5► 20201 dengan alamat internal klien D 192.168.1.6►006060, dan kirim paket ke klien D kembali ke jaringan lokal.  Fungsi router ini disebut <a href="https://ru.wikipedia.org/wiki/NAT" rel="nofollow">NAT loopback</a> ( <a href="https://en.wikipedia.org/wiki/Hairpinning" rel="nofollow">NAT hairpinning</a> ).  Jika NAT loopback dinonaktifkan pada router, maka tidak mungkin untuk membuat koneksi antara klien. <br></li><li>  Klien dapat berlokasi di jaringan lokal yang berbeda, tetapi memiliki akses ke Internet melalui penyedia Internet umum. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q8/dj/yo/q8djyoaqbhaq6z3_wxc7_afbphk.png"></div><br>  Jika NAT loopback dimatikan pada peralatan penyedia layanan Internet, maka tidak mungkin untuk membuat koneksi antara klien. <br></li><li>  Apa yang harus saya lakukan jika Symmetric NAT digunakan pada router, atau NAT loopback dimatikan? <br><br>  Seperti yang saya pahami, satu-satunya cara yang dapat diandalkan untuk memecahkan masalah ini adalah dengan mentransfer paket tidak langsung antara klien, tetapi melalui server.  Penting untuk mengimplementasikan fungsi ini dalam program game dalam kerangka arsitektur peer-to-peer, atau untuk mengimplementasikan arsitektur client-server. <br><br>  Atau Anda dapat menggunakan program pihak ketiga untuk membuat VPN, misalnya <a href="https://ru.wikipedia.org/wiki/LogMeIn_Hamachi" rel="nofollow">LogMeIn Hamachi</a> . <br></li></ul><br><h2>  Membuat koneksi antar LAN di Internet </h2><br><ul><li>  Sebagai aturan, tidak ada pemain yang memiliki alamat IP publik, dan para pemainnya berada di jaringan lokal yang berbeda di belakang NAT. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/56/cr/up/56crup-geun05fnbtaokha2vqia.png"></div><br>  Misalnya, dalam skema ini, klien C akan mengirim paket ke server A di alamat eksternal 203.0.113.2-022020, di mana port dipilih oleh router B. Oleh karena itu, memilih port internal server A tidak masalah, dan Anda dapat memilih port apa saja.  Dalam hal ini, alih-alih port 49094, server A dapat meminta port gratis dari OS, misalnya 50120. <br></li><li>  Agar server A dan klien C membuat koneksi, pertama-tama, masing-masing dari mereka perlu mencari tahu alamat eksternalnya. <br><br>  Anda dapat menggunakan protokol <a href="https://ru.wikipedia.org/wiki/STUN" rel="nofollow">STUN (Session Traversal Utilities for NAT) untuk ini</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sk/lj/cm/skljcmi1c5ztbt6law8nf_ylsy0.png"></div><br>  Protokol STUN memungkinkan klien yang berada di belakang NAT untuk menentukan alamat dan port IP eksternal. <br><br>  Pesan STUN dikirim dalam paket UDP. <br><br>  Klien dapat mengakses server STUN publik mana saja.  Daftar server STUN publik dapat ditemukan di <a href="https://ru.wikipedia.org/wiki/STUN" rel="nofollow">Wikipedia</a> .  Atau cari <a href="https://www.google.com/search%3Fq%3Dpublic%2BSTUN%2Bservers%2Blist" rel="nofollow">"daftar server STUN publik"</a> . <br><br>  Metode ini tidak berlaku jika setidaknya salah satu pemain di router menggunakan "Symmetric NAT". <br></li><li>  Setelah masing-masing pemain mempelajari alamat eksternalnya, ia harus entah bagaimana memberikan alamatnya kepada semua pemain lain. <br><br>  Agar pemain dapat bertukar alamat, Anda dapat menggunakan server publik Anda.  Dalam diagram, ini disebut server alamat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ev/e_/fi/eve_fiqezp76wwmjfexsb0vlzka.png"></div><br>  Ini tidak selalu memerlukan server khusus.  Anda dapat menggunakan hosting apa pun dengan <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25B1-%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580" rel="nofollow">server web</a> dan dengan dukungan bahasa scripting apa pun, seperti PHP.  Menggunakan <a href="https://ru.wikipedia.org/wiki/HTTP" rel="nofollow">protokol HTTP,</a> setiap pemain harus mengirim alamat eksternal mereka ke server alamat.  Dan kemudian minta alamat semua pemain lain. <br></li><li>  Misalnya, setiap server game dapat mendaftarkan pengidentifikasi uniknya (game-id) di server alamat.  Anda dapat menggunakan string apa pun sebagai id permainan, misalnya, nama panggilan (alias) dari pengguna server.  Pengguna server entah bagaimana memberitahu id permainan kepada para pemain yang ingin ia undang ke gimnya.  Dan para pemain ini akan dapat bergabung dengan game dengan meminta id-game dari server alamat alamat eksternal semua peserta dalam game ini. <br></li><li>  Setelah masing-masing pemain menerima alamat eksternal semua pemain lain, mereka dapat membangun koneksi satu-ke-masing-masing menggunakan <a href="https://en.wikipedia.org/wiki/UDP_hole_punching" rel="nofollow">metode meninju lubang UDP</a> . <br></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485576/">https://habr.com/ru/post/id485576/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485556/index.html">Butuh 12 tahun untuk membuat bagian dari peta otak Drosophila, upaya 250 orang dan $ 40 juta</a></li>
<li><a href="../id485558/index.html">Tidak ada nyamuk! Sekilas tentang nyamuk "amunisi phyto"</a></li>
<li><a href="../id485562/index.html">Berselancar di Internet dengan Gamepad (Javascript)</a></li>
<li><a href="../id485564/index.html">Protokol reverse engineering Ngrok v2</a></li>
<li><a href="../id485570/index.html">Agregasi rute untuk daftar ILV dan bagaimana hal itu mengancam layanan yang terhormat</a></li>
<li><a href="../id485578/index.html">Mahjong dengan anak-anak: untuk apa, kapan dan bagaimana</a></li>
<li><a href="../id485582/index.html">Paul Graham: “Seorang Investor sebagai Kawanan Hewan” (2013)</a></li>
<li><a href="../id485584/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 399 (20 - 26 Januari 2020)</a></li>
<li><a href="../id485586/index.html">Paul Graham: Gagasan untuk Startups (Gagasan untuk Startups, 2005)</a></li>
<li><a href="../id485592/index.html">PHP Digest No. 172 (14-27 Januari 2020)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>