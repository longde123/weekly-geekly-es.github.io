<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📳 ✊🏾 🤧 Membuat perahu aero RC sederhana 👸🏿 ❗️ ☝🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kadang-kadang di Internet saya melihat pertanyaan dari pemula yang ingin membangun quadrocopter dari awal dan menulis firmware untuk itu. Saya sendiri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat perahu aero RC sederhana</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390429/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kadang-kadang di Internet saya melihat pertanyaan dari pemula yang ingin membangun quadrocopter dari awal dan menulis firmware untuk itu. </font><font style="vertical-align: inherit;">Saya sendiri begitu dan untuk berlatih membuat model RC saya memutuskan untuk memulai dengan sesuatu yang lebih sederhana. </font></font><br>
<br>
<img src="https://habrastorage.org/files/7dd/6f2/46e/7dd6f246e98e47b8b5f3eda1ccdd14b0.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikelnya secara terperinci untuk yang terkecil ia menggambarkan algoritma perahu, panel kontrol dan pilihan komponen.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa kapal udara?</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sederhana;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Murah;</font></font></li>
<li>     ;</li>
<li>     ,  -.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kendaraan terbang itu bagus, tetapi sulit. </font><font style="vertical-align: inherit;">Anda tidak bisa mematikan sekrup di udara jika terjadi kesalahan. </font><font style="vertical-align: inherit;">Ya, dan daya dorong spesifik diperlukan sangat baik, bahkan untuk pesawat terbang, belum lagi multicopter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Platform seperti ini </font></font><br>
<br>
<img src="https://habrastorage.org/files/2ea/857/305/2ea8573051be4afcbe6aaf40c94a753d.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uraian lebih rinci di sini). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mereka hanya bisa bergerak bersama, dalam banyak kasus, permukaan halus buatan, dan kontrol mereka sangat berbeda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi di atas air kita dapat berlayar di mana saja, yang di masa depan dapat memberi kita kesempatan untuk membuat autopilot menggunakan GPS. </font><font style="vertical-align: inherit;">Desain klasik dengan baling-baling rumit bagi saya oleh unit keluar poros dari perumahan - Saya tidak bisa membayangkan bagaimana cara menyegelnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih banyak keuntungan dari sistem propulsi udara:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu dapat diletakkan di platform yang berbeda: perahu, kereta luncur, sepotong busa ...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu tidak menangkap di bagian bawah atau ganggang.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perangkat harus dapat diputar. </font><font style="vertical-align: inherit;">Ada 3 opsi:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satu sekrup + setir untuk belokan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satu sekrup + sistem beloknya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dua sekrup tetap. </font><font style="vertical-align: inherit;">Berbalik dengan mengubah keinginan mereka adalah cara termudah. </font><font style="vertical-align: inherit;">Dia menggunakannya.</font></font></li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote control</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prinsip operasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 joystick + beberapa sakelar. </font><font style="vertical-align: inherit;">Tugas kendali jarak jauh adalah mengirim data pada posisi pegangan joystick dan berganti beberapa kali per detik.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang harus dilakukan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, Anda membutuhkan pemancar radio. Opsi termurah adalah NRF24L01 +, biaya </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,85</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua, Anda membutuhkan joystick. Lebih </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa switch - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, semua ini diperbaiki pada selembar PCB seharga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,13</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sudah dihitung $ 2,1, tetapi masih membutuhkan MK dan makanan. Semuanya tidak begitu jelas di sini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ke depan, saya akan mengatakan bahwa ATmega8 atau STM8S103F3P6 sudah cukup, tetapi karena saya memulai proyek ini untuk waktu yang lama dan ada sedikit pengalaman, saya membantingnya ke panel kontrol Mini Arduino Pro, dan ke perahu Arduino Nano (ATmega32P di mana-mana). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di remote masih diperlukan:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konverter daya 0,9 - 5 V -&gt; 5 V untuk memberi daya Arduino seharga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,35</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (konektor USB, bersama dengan sepotong papan, dapat diputus karena kekompakannya);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stabilizer 3.3V AMS1117-3.3 untuk memberi daya pada modul radio, harganya </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,03 per unit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompartemen baterai untuk baterai satu jari seharga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,15</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total ditambah $ 0,53. </font><font style="vertical-align: inherit;">Terlepas dari pengontrol, sepasang kapasitor dan kabel, biaya komponen konsol adalah $ 2,63.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengisi model RC</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya berasal dari mesin. </font><font style="vertical-align: inherit;">Apa pun mesin yang Anda beli, elektronik harus dipasang dengan daya seperti itu, dan pangkalan (kapal seluncur) akan diperlukan untuk daya dukung yang sesuai. </font><font style="vertical-align: inherit;">Dan secara ideologis, segala sesuatu yang lain hanya diperlukan untuk memutar sekrup dengan kecepatan yang tepat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya membeli mesin ini dengan baling </font></font><br>
<br>
<img src="https://habrastorage.org/files/02a/811/047/02a8110476e840e68848408e6fcc4872.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font><font style="vertical-align: inherit;">baling </font><font style="vertical-align: inherit;">seharga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 2,88 per pasang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia mengambil L293D sebagai pengemudi motor - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,35</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu ada masalah</font></font></b><div class="spoiler_text"> L293D         .                             ,   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Makanan </font><font style="vertical-align: inherit;">Kami akan membutuhkan sebanyak tiga tegangan suplai:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 V untuk semua elektronik kecuali modul radio;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3 V untuk modul radio;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk motor sebanyak yang mereka butuhkan (tambang 4.2 V).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 dan 2 kita mendapatkan yang sama seperti pada panel kontrol, dan untuk motor kita menaruh MT3608 untuk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0,86</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang untuk bagian yang menyenangkan: giroskop. </font><font style="vertical-align: inherit;">Modul MPU-6050 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berharga $ 1,53</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ada keinginan untuk juga menggunakan accelerometer, sehingga ketika tongkat joystick bergerak ke samping, kapal terbuka di tempatnya. </font><font style="vertical-align: inherit;">Tetapi pada akhirnya, ia meninggalkan ide ini: kemiringan nada sedikit, dan sistem mulai berpikir bahwa itu mempercepat maju atau mundur. </font><font style="vertical-align: inherit;">Ternyata menjadi lebih mudah untuk mengubah kapal di tempatnya hanya dengan mengkompensasi gerakan maju / mundur dengan joystick. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan $ 0,4 ini untuk kompartemen baterai untuk 2 sel AA dan dapatkan $ 6,4 komponen tanpa pengontrol dan kabel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programnya</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan lagi, mari kita pergi dari mesin. </font><font style="vertical-align: inherit;">Masing-masing dari dua mesin yang digerakkan oleh L293D mungkin </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau mungkin tidak menggali</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Putar ke depan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Putar kembali;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan dipelintir.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membuat kode lebih mudah dibaca, tulis </font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 fungsi</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftStop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS);<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{    <font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS;<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftBackward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS);<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightStop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS);<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS;<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightBackward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS);<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kami ingin mengontrol kecepatan rotasi sekrup. </font><font style="vertical-align: inherit;">Tentu saja, kami akan melakukan ini menggunakan PWM. </font><font style="vertical-align: inherit;">Saya tidak tahu apakah PWM seperti itu dapat dilakukan dalam perangkat keras ... Saya melakukannya secara terputus secara terprogram. </font><font style="vertical-align: inherit;">Deklarasikan sepasang variabel global</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int8_t</span></span> motLeft = <span class="hljs-number"><span class="hljs-number">0</span></span>, motRight = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Biarkan nilai-nilai dari variabel-variabel ini &lt;0 berarti bahwa Anda perlu untuk mundur, nilai-nilai&gt; 0 - maju, dan jika mereka 0, maka Anda tidak perlu memutar.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami akan menulis penangan interupsi timer</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">ISR(TIMER2_OVF_vect)<font></font>
{<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motLeft &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motLeftForward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motLeft &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motLeftBackward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motRight &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motRightForward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motRight &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motRightBackward();<font></font>
}<font></font>
<font></font>
ISR(TIMER2_COMPA_vect)<font></font>
{<font></font>
  motLeftStop();<font></font>
}<font></font>
<font></font>
ISR(TIMER2_COMPB_vect)<font></font>
{<font></font>
  motRightStop();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, untuk mengubah kecepatan rotasi baling-baling, kita perlu melakukan 2 tindakan:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tulis nilai positif, negatif atau nol pada motLeft / motRight (modul tidak penting);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rekam "kecepatan rotasi" dalam OCR2A / OCR2B.</font></font></li>
</ol><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita menulis beberapa fungsi lagi untuk ini</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotLeft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motLeft = v;  <font></font>
  OCR2A = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) * <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotRight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motRight = v;<font></font>
  OCR2B = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) * <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
}<font></font>
</code></pre><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;
</code></pre><br>
            OCR2x   5 (      ).<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang tinggal mengkonfigurasi pin MK dan timer</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  DDRD |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (1 &lt;&lt; CS22)|(1 &lt;&lt; CS21)|(1 &lt;&lt; CS20); // set up timer with prescaler = 1024.   16 </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (1 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(0 &lt;&lt; CS20); // set up timer with prescaler = 64.   1 </span></span>
  TCCR2B |= (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; CS22)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; CS21)|(<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; CS20); <span class="hljs-comment"><span class="hljs-comment">// set up timer with prescaler = 8.  128 </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (0 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(1 &lt;&lt; CS20); // set up timer with prescaler = 1.  16 </span></span>
  TIMSK2 |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; TOIE2)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; OCIE2A)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; OCIE2B); <span class="hljs-comment"><span class="hljs-comment">// enable overflow interrupt</span></span>
  TCCR2A &amp;= ~(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// set WGM20 = 0, WGM21 = 0</span></span>
  TCCR2B &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// set WGM22 = 0</span></span>
  setMotLeft(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  setMotRight(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  sei();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan Anda dapat mengontrol motor hanya dengan memanggil fungsi setMotLeft (int8_t v) dan setMotRight (int8_t v). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kami ingin mengendalikan kapal dengan salah! </font><font style="vertical-align: inherit;">Kami ingin memberikan perintah seperti "maju / mundur" dan "kanan / kiri"! </font><font style="vertical-align: inherit;">Dan biarkan dia mencari tahu baling-baling apa yang harus dia putar untuk ini. </font><font style="vertical-align: inherit;">Selain itu, saya ingin kapal itu sendiri untuk mengimbangi efek balik angin, arus, dan ... baling-baling bengkok! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayo pergi sekarang dari sisi lain. </font><font style="vertical-align: inherit;">Dari kendali jarak jauh. </font><font style="vertical-align: inherit;">Dalam kasus paling sederhana, algoritma operasinya adalah sebagai berikut:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat menyalakan daya, ingat posisi awal joystick;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam siklus, baca posisi joystick, kurangi posisi nol darinya dan kirim data ke kapal.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul radio kami mendukung paket hingga 32 byte. </font><font style="vertical-align: inherit;">Agar tidak mengingat perpindahan, kami akan menggunakan catatan</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControlStatus</span></span></span><span class="hljs-class">{</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> x,y;<font></font>
}  controlStatus;<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai berikut</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">    <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> packet[MAX_BUFF]; 
    <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(packet, <span class="hljs-number"><span class="hljs-number">0</span></span>, MAX_BUFF);    <font></font>
    controlStatus.x = (<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span>)analogRead(<span class="hljs-number"><span class="hljs-number">1</span></span>) - x0;<font></font>
    controlStatus.y = (<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span>)analogRead(<span class="hljs-number"><span class="hljs-number">0</span></span>) - y0;
    <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(packet, &amp;controlStatus, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(controlStatus));<font></font>
    Mirf.send(packet);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(Mirf.isSending()){;};
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sisi penerima, kami akan mendeklarasikan catatan yang sama persis dan </font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami akan mengisinya</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Mirf.dataReady()) { 
    <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> data[MAX_BUFF];<font></font>
    Mirf.getData(data);<font></font>
    <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(&amp;controlStatus, data, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(controlStatus));<font></font>
    setMotRot(-controlStatus.x);<font></font>
    setMotForward(controlStatus.y); <font></font>
  }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam fungsi setMotRot dan setMotForward</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tulis nilai ke variabel global motRot dan motForward</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotRot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v)&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motRot = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)v;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v)&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motForward = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)v;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan mari kita beralih ke yang paling menarik. </font><font style="vertical-align: inherit;">Untuk cara konversi "belok kiri dengan kecepatan 5 derajat per detik dan bergerak maju sedikit!" </font><font style="vertical-align: inherit;">untuk "mesin kiri 10% kembali, kanan 20% ke depan!". </font><font style="vertical-align: inherit;">Banyak yang telah ditulis </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tentang apa itu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengendali PID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Saya hanya menggunakan dua komponen untuk rotasi:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proporsional;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integral.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan untuk bergerak bolak-balik, regulator tidak menggunakannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita ambil contoh:</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> iDeltaRot = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motTick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> rot = getRotAvg(); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> deltaRot = rot - motRot * rotMaxSpeed / <span class="hljs-number"><span class="hljs-number">512</span></span>;<font></font>
  iDeltaRot += deltaRot;<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> motRight = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motForward * forwardMult - deltaRot * rotMult - iDeltaRot * iDeltaRotMult, <font></font>
          motLeft  = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motForward * forwardMult + deltaRot * rotMult + iDeltaRot * iDeltaRotMult;  <font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> motMax = max(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(motRight), <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(motLeft));
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motMax &gt; <span class="hljs-number"><span class="hljs-number">127</span></span>){<font></font>
    motRight = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motRight * <span class="hljs-number"><span class="hljs-number">127</span></span> / motMax;<font></font>
    motLeft  = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motLeft  * <span class="hljs-number"><span class="hljs-number">127</span></span> / motMax;<font></font>
  }<font></font>
  <font></font>
  setMotRight(motRight);<font></font>
  setMotLeft(motLeft);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode telah disederhanakan untuk fokus pada bagian-bagian penting, arsip akan memiliki versi lengkap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang kita lakukan disini</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menghitung perbedaan antara kecepatan nyata rotasi kapal (busuk) dan yang diinginkan (motRot * rotMaxSpeed);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menghitung kecepatan rotasi yang diinginkan dari sekrup motRight dan motLeft;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kecepatan rotasi yang diinginkan melebihi batas maksimum yang dimungkinkan, kami menguranginya sambil mempertahankan rasio di antara mereka;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memanggil setMotRight / setMotLeft yang sudah tidak asing lagi bagi kami.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah algoritma kontrol seluruh kapal! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah ini sulit? </font><font style="vertical-align: inherit;">Saya kira tidak. </font><font style="vertical-align: inherit;">Tetapi, bagaimanapun, dalam proses pengujian dan penyetelan sejumlah masalah muncul yang akan menyebabkan banyak kecelakaan jika itu adalah pesawat terbang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada 4 koefisien dalam fungsi yang dijelaskan:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forwardMult - kepekaan terhadap pergerakan joystick maju / mundur;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotMaxSpeed ​​- kecepatan rotasi yang diinginkan saat memiringkan joystick ke kanan / kiri;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotMult - koefisien komponen proporsional (seberapa besar penyimpangan kecepatan rotasi saat ini dari yang diinginkan mempengaruhi rotasi);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iDeltaRotMult - koefisien komponen integral (berapa banyak penyimpangan dari sudut balik arus dari yang diinginkan mempengaruhi rotasi).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Koefisien ini disetel secara eksperimental, dan reaksi kapal terhadap joystick dan pengaruh eksternal yang terbuka akan bergantung padanya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indikasi status</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat debugging / tuning, akan ada kebingungan dari seri "mengapa kapal bereaksi terhadap joystick bukan seperti yang saya inginkan?". </font><font style="vertical-align: inherit;">Beberapa poin dapat di-debug dengan menampilkan informasi debug pada PC, tetapi akan lebih mudah untuk memahami apa yang terjadi saat itu juga. </font><font style="vertical-align: inherit;">Pada awalnya, saya mempertimbangkan 2 opsi:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laptop;</font></font></li>
<li><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCD Nokia 5110</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/a23/fc5/65d/a23fc565d564418bad9c2ad6a1144f0c.jpg"><br>
</div></div></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kerugian keduanya dapat dipahami: laptop besar dan tidak nyaman untuk dibawa bersama Anda, dan layar Nokia 5110 tidak akan memungkinkan Anda untuk secara bersamaan menampilkan sejumlah besar parameter status perahu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mengambil silang di antara mereka: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nextion Enhanced NX4827K043 - Generic 4.3 '' HMI Touch Display</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Berkat layar sentuh, Anda dapat dengan cepat dan nyaman menyesuaikan parameter perahu saat dalam perjalanan. </font><font style="vertical-align: inherit;">Ini adalah jenis komputer yang terdiri dari:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrokontroler GD32F103R8T6;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDRAM Winbond W9864G6KH-6 (8 MB);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memori flash Winbond W25Q256FVFG (32 MB, 100.000 siklus penulisan ulang, yang sangat baik);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGA Altera MAX II EPM570T144C5N.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segala sesuatu dalam rakitan terlihat seperti ini (dapat diklik): </font><font style="vertical-align: inherit;">
Komputer / display ini adalah kotak hitam dan diarahkan untuk berinteraksi dengan seseorang. Bahkan GPIO yang ada dipertajam untuk menghubungkan tombol dan indikator. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">Dewan Ekspansi</font></a><font style="vertical-align: inherit;"> mereka </font><font style="vertical-align: inherit;">mengkonfirmasi hal ini. Jadi menggunakan pengontrol bawaan sebagai kendali jarak jauh perahu (membaca joystick, bertukar data dengan modul radio NRF24L01 +) akan gagal. Untuk berinteraksi dengan mikrokontroler, ada UART dan ... itu saja. </font><font style="vertical-align: inherit;">
Tentang bagaimana dan apa yang dapat Anda lakukan dengan tampilan ini yang dapat Anda lakukan, ada banyak + video yang ditulis di Youtube. Lihat, misalnya, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">ini</font></a></font><br>
<br>
<a href=""><img src="https://habrastorage.org/files/b78/b67/ad2/b78b67ad2ffd4f00a0e82daae979dad8.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- semuanya terlihat jelas di sana. </font><font style="vertical-align: inherit;">Tetapi karena tampilan ini lebih mahal daripada semua komponen kapal dan konsol digabungkan, saya akan menjelaskan secara lebih rinci kesan saya bekerja dengannya. </font><font style="vertical-align: inherit;">Mungkin ini akan membantu seseorang untuk memahami apakah opsi ini cocok untuknya atau apakah laptop / display Nokia 5110 akan lebih disukai. </font><font style="vertical-align: inherit;">Keuntungan dari Nextion Enhanced NX4827K043:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sangat mudah digunakan. </font><font style="vertical-align: inherit;">Ada dokumentasi sederhana, contoh, video di Youtube, ... Dalam beberapa jam Anda dapat menemukannya dari awal. </font><font style="vertical-align: inherit;">Hampir semua yang perlu Anda ketahui tentang dia ada di dua halaman: halaman </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wiki</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set Instruksi</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perkembangannya sangat cepat. </font><font style="vertical-align: inherit;">Editor visual seperti Visual Studio (hanya lebih mudah). </font><font style="vertical-align: inherit;">Saya melemparkan komponen dan semuanya berfungsi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponen berkualitas tinggi. </font><font style="vertical-align: inherit;">Memori flash yang sama untuk siklus penulisan ulang 100k.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seorang debugger yang dapat mensimulasikan tampilan menggunakan PC dan berkomunikasi dengan MK Anda melalui port COM. </font><font style="vertical-align: inherit;">Memungkinkan Anda mengembangkan perangkat sepenuhnya, men-debug dan membeli tampilan, hanya jika semuanya berhasil.</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meskipun ada masalah dengannya</font></font></b><div class="spoiler_text">            .    . ,         ,         .<br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor resistif </font><font style="vertical-align: inherit;">Anda dapat membuat kontrol yang cukup kecil dan menusuknya dengan kuku Anda atau stylus apa pun.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kekurangan:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Harga </font><font style="vertical-align: inherit;">$ 50 masih banyak untuk tampilan 4.3 ''.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada beberapa komponen yang ada, beberapa pengaturan komponen, cara membuat Anda sendiri tidak jelas. </font><font style="vertical-align: inherit;">Ini sebagian diimbangi oleh fungsi menggambar primitif (garis, persegi panjang, lingkaran, ...).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponen Gauge standar berkedip ketika ditingkatkan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada (setidaknya saya tidak menemukan) transparansi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persyaratan daya: 4,75-7 V dan rata-rata arus 250 mA. </font><font style="vertical-align: inherit;">Ketika voltase turun, layar mulai berkedip.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hanya UART. </font><font style="vertical-align: inherit;">Bisa melakukan komunikasi dengannya di SPI dan I²C.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Output GPIO hanya untuk kabel (tanpa sisir 2,54 mm), tanpa ADC.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, tampilan memberikan kesan produk yang sangat berkualitas tinggi, yang mudah dan menyenangkan untuk dikerjakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layar dapat melakukan dua tugas sekaligus:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indikasi status. </font><font style="vertical-align: inherit;">Saya terutama tertarik pada:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kecepatan rotasi" sekrup;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai variabel iDeltaRot adalah seberapa besar sudut belok yang diinginkan berbeda dari yang diinginkan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kecepatan putaran perahu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sudut rotasi kapal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frekuensi menerima paket dari remote control;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frekuensi panggilan ke fungsi motTick.</font></font></li>
</ul><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter pengaturan, yaitu yang dijelaskan di atas forwardMult, rotMaxSpeed, rotMult, iDeltaRotMult.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibuat 2 halaman (dapat diklik untuk penilaian kualitas):</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indikasi:</font></font><br>
 <br>
<a href=""><img src="https://habrastorage.org/files/6f7/aaa/571/6f7aaa57152e48a5b92e6555d230d863.JPG"></a><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan parameter: </font><font style="vertical-align: inherit;">
4 kolom pertama dari kiri ke kanan: forwardMult, rotMult, iDeltaRotMult, rotMaxSpeed.</font></font><br>
 <br>
<a href=""><img src="https://habrastorage.org/files/256/9f6/22d/2569f622dc234426b0dc8d4352a8488e.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
</li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Video test boat di lantai:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kwHMI4QUjIs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reaksi kapal terhadap efek unfolding eksternal di berbagai iDeltaRotMult (koefisien integral):</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3numZhKZnic" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demonstrasi pengaruh parameter pada air:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QuOtIunGEME" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Video di perairan terbuka tidak dapat ditangkap. </font><font style="vertical-align: inherit;">Anda bisa meyakini bahwa penanganannya baik, dan kecepatan maksimumnya tidak terlalu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karakteristik</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Batang 9 g;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berat 115 g, yang baterainya berat 52 g;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Akselerasi maksimum adalah 0,77 m / s ^ 2. </font><font style="vertical-align: inherit;">Untuk manusia 5 km / jam, jika tidak ada hambatan air, kapal akan berakselerasi dalam 1,8 detik;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Biaya komponen adalah sekitar $ 15 jika Anda menggunakan Arduino Nano di kendali jarak jauh dan kapal (tanpa layar dan baterai).</font></font></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagi mereka yang memiliki keinginan untuk mengumpulkan sesuatu yang dikendalikan radio, saya sarankan mulai dengan kapal dengan dua baling-baling tetap. </font><font style="vertical-align: inherit;">Menurut pendapat saya, ini adalah hal paling sederhana yang dapat dilakukan di bidang ini. </font></font><br>
<br>
<a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengarsipkan dengan proyek</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dan akhirnya, sehingga ada sesuatu untuk diperjuangkan, berikut adalah video dari perangkat yang luar biasa:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_iqqHAWJq_0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id390429/">https://habr.com/ru/post/id390429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id390419/index.html">Hubungkan matriks LED ke pi Raspberry</a></li>
<li><a href="../id390421/index.html">DVB stick radio $ 8 - menjelajahi SDR dengan GNURadio</a></li>
<li><a href="../id390423/index.html">Klausa kiamat zombie Amazon telah ditambahkan ke kebijakan layanan web Amazon</a></li>
<li><a href="../id390425/index.html">Robot belajar cara memasak ramen, mengubah warna dan ukurannya</a></li>
<li><a href="../id390427/index.html">Debugging kode Arduino (AVR). Bagian 1. Virtual debugging</a></li>
<li><a href="../id390431/index.html">Proyektor rumah Epson EH-TW5210, EH-TW5300 dan EH-TW5350 - lebih baik, lebih cepat, lebih cerah</a></li>
<li><a href="../id390435/index.html">Matematikawan telah membangun peta koneksi di alam semesta Star Wars</a></li>
<li><a href="../id390437/index.html">Variometer altimeter elektronik buatan rumah dengan sinyal peringatan suara dan cahaya</a></li>
<li><a href="../id390439/index.html">Cermin interband Andreev refleksi pada kontak van der Waals antara graphene dan niobium selenide</a></li>
<li><a href="../id390441/index.html">Eclipse #include <Arduino.h></a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>