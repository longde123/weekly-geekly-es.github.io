<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧙🏿 👩🏿 🐹 Erstellen eines universellen RFID-Schlüssels für Sprechanlagen ✍🏾 😋 🉑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Grüße an alle, die sich für das Thema elektronische Schlüssel-Geländefahrzeuge interessieren. In Wahrheit verfolge ich selbst die Neuigkeiten in diese...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen eines universellen RFID-Schlüssels für Sprechanlagen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485104/">  Grüße an alle, die sich für das Thema elektronische Schlüssel-Geländefahrzeuge interessieren.  In Wahrheit verfolge ich selbst die Neuigkeiten in diesem Bereich schon lange nicht mehr.  Aber ich möchte meine Entwicklung vor drei Jahren veröffentlichen, da sie leicht zu wiederholen ist und für jemanden von Interesse sein kann.  Fazit: Statt eines Dutzend Tasten mit All-Terrain-Codes und nur Codes können alle Tasten in einem kleinen Gerät aufbewahrt werden. <br><br><img src="https://habrastorage.org/webt/fb/8l/s4/fb8ls4ydh-hfj8zheobot3rzac4.jpeg"><br><a name="habracut"></a><br><blockquote> Haftungsausschluss: Wiederholung - Ich fordere nicht zur Montage und Verwendung auf - Sie sind dafür verantwortlich, ich teile Informationen nur zu Informationszwecken.  Zum Beispiel, um Unternehmen, die Freisprecheinrichtungen an der Tür warten, dabei zu unterstützen, „Lücken“ rechtzeitig zu schließen, wenn sie mithilfe des Geräts erkannt werden. </blockquote><h3>  1. Was ist das?  Was kann </h3><br>  Das Gerät, das ich 2017 gesammelt habe, ist nichts anderes als ein Spoofer für einen Intercom-RFID-Schlüssel, der mit einer Frequenz von 125 kHz arbeitet.  Das Wort "Spoofer" bedeutet in diesem Fall, dass das Gerät, das eigentlich kein Schlüssel ist, sich als solches ausgibt und die Sprechanlagen entsprechend reagieren. <br><br>  Das Gerät kann alle in seinem Speicher abgelegten Tastencodes übertragen.  Einige Codes für "All-Terrain-Keys" sind im Web zu finden. Ich habe sie zuerst in die Firmware eingefügt.  Mit etwas Geschick und Lust können Sie jedoch die Codes aller von Ihnen verwendeten RFID-Schlüssel in die Firmware einfügen (wenn sie mit einer Frequenz von 125 kHz arbeiten) und so eine Reihe von Schlüsselanhänger durch ein Gerät ersetzen. <br><br>  Ich weiß, dass es in der Weite des Webs eine große Anzahl von Schaltkreisen für solche Geräte gibt.  Mein Ziel war es, die einfachste Version aller verfügbaren zu erstellen.  Ob es gelungen ist oder nicht - urteilen Sie selbst. <br><br><h3>  2. Welche Fähigkeiten benötigen Sie, um dieses Projekt zu wiederholen? </h3><br>  Zuallererst die Fähigkeiten, mit Arduino zu arbeiten: eine installierte Entwicklungsumgebung zu haben, Firmware auf das Board hochladen zu können, Bibliotheken und Treiber zu installieren, das ist alles.  Weiter.  Es gibt einen Ort im Projekt, an dem ohne Löten nichts passiert.  Denn - Sie brauchen gerade Arme und einen Lötkolben mit Verbrauchsmaterial.  Um elektrische Schaltpläne (oder deren Ähnlichkeiten) lesen zu können.  Nun, Programmierkenntnisse in C ++, um das Gerät anpassen zu können.  Dies ist aber schon optional. <br><br><h3>  3. Welche Teile werden benötigt und wie werden sie montiert? </h3><br><div class="spoiler">  <b class="spoiler_title">Hier ist ohne Verzögerung ein Diagramm des Geräts:</b> <div class="spoiler_text">  Entschuldigung für die Tatsache, dass "nicht nach GOST" - ich zeichne in Drawio, weil die einzige kostenlose und bequeme Alternative Visio ist und ich nur lizenzierte Software verwende.  Aber ich nehme an, alles ist schon sehr klar. <br></div></div><img src="https://habrastorage.org/webt/kc/yi/aj/kcyiaj5fxxrfkup1gvkcpuydeo4.jpeg"><br><br>  Wie Sie sehen, sieht die Stückliste für die Basisversion ungefähr so ​​aus: <br><br><ol><li>  Arduino Nano (oder jede andere Dunya, die zur Hand ist); </li><li>  EM4100 RFID-Schlüssel (anstelle des Induktors); </li><li>  npn Transistor (jeder der gefunden wird, die Frequenzen sind hier nicht sehr hoch); </li><li>  10K Widerstand; </li><li>  560 pF Kondensator (besser SMD, man kann direkt vom Schlüssel in das Gehäuse einlöten); </li><li>  Lithium-Ionen-Akku - nach Geschmack; </li><li>  drei Berührungstasten; </li><li>  OLED-Display mit I2C-Schnittstelle; </li><li>  Lademodul für LiIon; </li><li>  Step-up DC-DC Wandler mit 5V Ausgang. </li></ol><br>  Das Energieschema kann ein beliebiges sein, nur um genug Arduino zum Starten zu haben.  E / A-Geräte - ähnlich: Die Firmware kann einfach an die verfügbaren Tasten / Displays angepasst werden (Link zu Github - gleich unten).  Die aktuelle Firmware-Version ist für das OLED-Display und die Touch-Tasten geschrieben (unter Berücksichtigung von "No Bounce"). <br><br>  Sie können auch ein Testmuster auf einem lötfreien Steckbrett sammeln.  Hier sind keine besonderen Anweisungen erforderlich, außer was mit „Induktivität“ zu tun ist.  Darüber - ausführlicher. <br><br><img src="https://habrastorage.org/webt/sy/ro/ex/syroexqy--g9u-ahq7pkixsbnbm.jpeg"><br><br>  Der Schlüssel, ähnlich dem auf dem Foto, kann von jedem örtlichen Meister bezogen oder bei Ali bestellt werden.  Auf dem Schlüsselkörper befindet sich eine Abdeckung, die beim Erreichen der Füllung vorsichtig geöffnet werden sollte: <br><br><img src="https://habrastorage.org/webt/qw/nb/nh/qwnbnhclovyh7kqngg-cndj9tb4.jpeg"><br><br>  Es ist eine Spule und ein Speicherchip mit zwei Pads an den Seiten.  Die Befunde der Spule werden nur an diese Pads angelötet.  All dies wird mit einer dünnen Schicht aus elastischem Thermopolymer (in Aussehen und Eigenschaften ähnlich dem gefrorenen Klebstoff B7000) geflutet.  Um eine Spule zu bekommen, habe ich folgendes gemacht.  Ich nahm ein Büromesser und drückte vorsichtig einen Textolithen mit einer Klinge zwischen die Pads und den Mikrokreislauf.  Er trennte den Mikrokreis von der Spule und warf ihn weg.  Dann habe ich mit einem Lötkolben vorsichtig (um die dünnen Drähte der Spule nicht zu verlöten) das Thermopolymer über den Kontaktstellen gebrannt, um eine weitere Wahl zu ermöglichen. <br><br><img src="https://habrastorage.org/webt/oj/1o/mb/oj1ombm7birbshlzihfzk2qrfw4.jpeg"><br><br>  Vor dem Löten sollten Sie den Widerstand der Spule messen und sicherstellen, dass sie nicht offen ist.  Wenn alles in Ordnung ist, ist es besser, es so zusammenzubauen: Löten Sie zuerst den SMD-Kondensator auf die Pads (er sollte sauber dazwischen passen), dann die Beine des Transistors und am Ende den Widerstand auf die Basis.  All dies kann ordentlich im Schlüsselgehäuse montiert werden.  Die Drähte der "Erde" und der Basis des Transistors werden zuletzt verlötet. <br><br><img src="https://habrastorage.org/webt/bn/uv/5p/bnuv5pbwssqmaoddge7uvgueekk.jpeg"><br><br>  Machen Sie dann ein Loch in die Tastenabdeckung für diese Drähte und schließen Sie den Schlüsselbund, um ihm ein fast originelles Aussehen zu verleihen.  Um auf einem lötfreien Steckbrett zu montieren, sollten Sie die Stiftverbinder an die Drähte anlöten (oder sie einfach gut abreißen, damit Sie sie leicht in das Steckbrett einführen können). <br><br><h3>  4. Firmware, Test und Setup </h3><br>  Wie versprochen ein <a href="https://github.com/VladimirMozg/RFID_125kHz_spoofer" rel="nofollow">Link zum</a> Projektarchiv.  Die Firmware-Dateien befinden sich im Ordner My_125_kHz_spoofer_v.03. <br><br>  Nach dem Zusammenstellen und Hochladen der Firmware ist das Gerät einsatzbereit.  Um sicherzustellen, dass es funktioniert, muss überhaupt keine Gegensprechanlage gesucht werden - Sie können mit einem chinesischen Modul zum Lesen von RFID-Schlüsseln, dem RDM6300, und einem anderen Arduino-Board arbeiten (obwohl es für jeden einfacher ist).  Ich habe auch die Firmware für das RDM6300-Modul, das den übersetzten Schlüsselcode in demselben Format anzeigt, wie er in der Firmware des Spoofers enthalten war, in das Projekt-Repository gestellt.  Anschlussplan des Lesegeräts - an derselben Stelle. <br><br>  Testverfahren mit dem Leser RDM6300: <br><br><ol><li>  Vergewissern Sie sich, dass das Lesegerät funktioniert, indem Sie eine der verfügbaren Tasten bei 125 kHz an die Antenne halten (Daten werden an den COM-Anschluss ausgegeben). </li><li>  Wählen Sie den gewünschten Schlüsselcode im Spoofer-Menü aus. </li><li>  Bringen Sie die Antenne zum Lesegerät.  Wenn der Leser den gleichen Schlüssel liest, der in der Firmware angegeben ist - hat alles geklappt!  Andernfalls überprüfen Sie das Schema, suchen Sie, wo der Fehler liegt, beseitigen Sie ihn und beginnen Sie bei Punkt 1. </li></ol><br><h3>  5. Was kann in der Firmware geändert werden und was ist besser, nicht zu berühren </h3><br>  Da die Firmware auf der Basis <a href="https://toschprod.wordpress.com/2013/08/05/rfid-spoofer/" rel="nofollow">dieses Codes</a> geformt wurde <a href="https://toschprod.wordpress.com/2013/08/05/rfid-spoofer/" rel="nofollow">, was mir nicht ganz klar ist, sind</a> die lebenswichtigen Funktionen <a href="https://toschprod.wordpress.com/2013/08/05/rfid-spoofer/" rel="nofollow">,</a> die momentan nicht geändert werden können, komplett, ich habe sie in eine separate Registerkarte functions.ino gestellt.  Der Rest des Programms dient lediglich dazu, dem Benutzer eine bequeme Möglichkeit zu bieten, die EmulateCard-Funktion aufzurufen (naja, und ein paar Codezeilen davor). <br><br>  Sie können Ihre Schlüssel zum Array uint64_t universalID [] hinzufügen, das sich in Zeile 75 des Codes befindet.  Da ich die Gesamtzahl der Schlüssel im Gerätespeicher nicht „definiert“ habe und einige Funktionen mit dieser Konstante verknüpft sind, sollten Sie beim Hinzufügen meines eigenen Schlüssels auch die Grenzen ändern, innerhalb derer die Variable keyNumber für die Auswahl des Schlüssels verantwortlich ist.  Vergessen Sie nicht, Ihren Schlüssel im Menü hinzuzufügen.  Im Allgemeinen ist alles feucht, aber wenn Sie möchten, wiederhole ich, ist es nicht schwierig, es herauszufinden. <br><br><h3>  6. Was könnte am Gerät verbessert werden? </h3><br><ol><li>  Unterstützung für iButton-Schlüssel hinzufügen (zumindest die in Dallas am häufigsten verwendeten). </li><li>  Hinzufügen der Emulation von Schlüsseln, die mit einer Frequenz von 13,5 MHz arbeiten (wie ich es verstehe, entweder durch Tragen eines wiederbeschreibbaren Rohlings und des RC522-Moduls oder technisch schwierig durch echte Emulation). </li><li>  Fügen Sie dem Gerät Lesegeräte für iButton, RDM6300 und RC522 hinzu, um das Gerät noch universeller zu gestalten. </li></ol><br>  Wer wird es schaffen - schreiben Sie über die Ergebnisse.  Ich selbst werde in naher Zukunft nicht mehr auf die Entwicklung dieses Spielzeugs zurückkommen.) <br><br><h3>  7. Schöpfungsgeschichte </h3><br>  Ich war im Herbst 2017 auf dem Hof.  Als Student im zweiten Jahr war ich in ungelösten Fragen der Selbstbestimmung eingeschlafen.  Einfach gesagt, über Müßiggang geworfen und auf der Suche nach etwas zu tun.  Infolgedessen beschloss er, seine alten Ingenieurprojekte zu Lasten des Besuchs der Universität zu beenden. <br><br>  Das Wetter auf dem Hof ​​war einfach luxuriös.  Und was gibt es Schöneres, als in einer kühlen Herbstnacht auf dem Dach eines Hochhauses zu sitzen, Tee aus einer Thermoskanne zu trinken und das Treiben der nächtlichen Stadt unter Ihren Füßen zu betrachten? <br><br>  Am Nachmittag ist es nicht schwierig, zum Eingang eines Hochhauses zu gelangen - Social Engineering aus der Reihe „Hallo, eine soziale Umfrage zur Qualität der Arbeit der Verwaltungsgesellschaft nach dem <i>Namen der</i> lokalen Zeitung“ funktioniert einwandfrei, und die Bewohner haben im Grunde nichts dagegen, wenn jemand mit ihnen den Eingang betritt.  Nachts noch etwas.  Und ich kletterte entweder bei Sonnenuntergang oder nachts auf die Dächer ... Ein Problem ist gereift, das ich auf die oben beschriebene Weise gelöst habe. <br><br>  Soweit ich mich erinnere, wurden Informationen über solche Geräte nicht sofort gefunden.  Die Suche nach den Stichwörtern „Intercom Cracker“ brachte so gut wie nichts.  Angemessen begann, als ich ein wenig mit der RFID-Technologie vertraut war, und begann, aussagekräftigere Fragen zu stellen, wie zum Beispiel "RFID-Emulator", "RFID-Multikey", "RFID-Spoofer". <br><br>  Infolgedessen stellte sich heraus, dass es zwei anständige englischsprachige Artikel zu diesem Thema gab.  In einem beschrieb der Autor, wie basierend auf dem Arduino ein Schlüssel hergestellt wurde, der aus der Sicht der Hardware ziemlich verwirrt war, und in dem zweiten war alles gleich, aber ohne die Quelle, aber mit einer sehr einfachen Hardware.  Da beide Schaltkreise mit einem Arduino-Pin an die Antenne angeschlossen sind, habe ich mich zu Recht für eine einfache Hardwarelösung und Open Source entschieden.  Es war möglich, wenn auch nicht das erste Mal). <br><br>  Das Foto am Anfang dieses Artikels ist weit von der ersten Version des Geräts entfernt.  Der erste befand sich auf dem Steckbrett und arbeitete über den COM-Port.  Ich erinnere mich, wie Passanten mich in jeder Hinsicht verständigten, dass <i>ich misstrauisch aussah,</i> als ich mit einem offenen Laptop an der Tür eines mehrstöckigen Gebäudes stand und etwas in der Gegensprechanlage sah. <br><br>  Dann gab es einige weitere kompakte Versionen, die ich aus Gründen des Interesses sammelte und zerlegte.  Der vorletzte hat eine der Hauptfiguren <a href="https://habr.com/ru/post/483614/">meines vorherigen Artikels</a> gestohlen <a href="https://habr.com/ru/post/483614/">.</a>  Die aktuelle Version wurde am 29. Januar dieses Jahres zusammengestellt, zwischen den Lektionen, die ich in meinem Kreis unterrichte.  Es wurde nur mit dem Ziel zusammengestellt, sicherzustellen, dass ich niemanden falsch informierte, und die Firmware mit der Schaltung funktionierte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de485104/">https://habr.com/ru/post/de485104/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de485092/index.html">Validierung von Daten in iOS-Anwendungen</a></li>
<li><a href="../de485094/index.html">Microservices mit Spring Boot. Teil 3. Erstellen eines Mikrodienstes zur Währungsumrechnung</a></li>
<li><a href="../de485096/index.html">Fünf Methoden zur Datenbankverschleierung</a></li>
<li><a href="../de485100/index.html">Wohin: Die nächsten kostenlosen Veranstaltungen für Entwickler in Moskau (30. Januar - 15. Februar)</a></li>
<li><a href="../de485102/index.html">Topleaked: Ein Tool zum Auffinden von Speicherlecks</a></li>
<li><a href="../de485108/index.html">Statistik der zertifizierten PMI-Spezialisten in Russland am 10.01.2020</a></li>
<li><a href="../de485110/index.html">Meine Erfahrung mit effektiver Fernarbeit</a></li>
<li><a href="../de485118/index.html">Clean Code von Robert Martin. Auszug. Wie schreibe ich klaren und schönen Code?</a></li>
<li><a href="../de485120/index.html">Fügen Sie unserer Anwendung eine sehr schnelle JSON-API hinzu.</a></li>
<li><a href="../de485122/index.html">Die Überschrift "Artikel für Sie lesen." Oktober - Dezember 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>