<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§• üëçüèø üò¶ Google Tag Manager: param√®tres de d√©clenchement non √©vidents et utiles ü§ôüèº üìπ ‚õëÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Stanislav Romanov, responsable marketing d'Otzyvmarketing, a expliqu√© comment utiliser Google Tag Manager (GTM) pour configurer des analyses et suivre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Google Tag Manager: param√®tres de d√©clenchement non √©vidents et utiles</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/netologyru/blog/475608/">  Stanislav Romanov, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">responsable marketing d'Otzyvmarketing, a</a> expliqu√© comment utiliser Google Tag Manager (GTM) pour configurer des analyses et suivre les t√©l√©chargements de fichiers √† partir du site.  Cet article est destin√© √† ceux qui connaissent les bases du langage JavaScript et qui ont d√©j√† travaill√© avec GTM. <br><a name="habracut"></a><br><h2>  Qu'est-ce que DataLayer </h2><br>  DataLayer est une variable JavaScript standard.  Vous pouvez y √©crire des donn√©es, puis les transf√©rer vers les services Google: <br><br><img src="https://habrastorage.org/webt/4e/4z/mw/4e4zmwwqanq-tn-xt0x3dfxa-wc.png"><br><br>  Le nom de la variable peut √™tre modifi√© - au lieu de la variable <code>dataLayer</code> , le nom <code>dataOlga</code> : <br><br><img src="https://habrastorage.org/webt/0a/qm/vq/0aqmvqoscu2b58-gtlbp_fpumga.png"><br><br><h2>  Diff√©rence entre dataLayer = [] et dataLayer.push () </h2><br>  Si vous d√©clarez <code>dataLayer=[]</code> , alors dans la m√©moire de l'ordinateur, ce nom fera r√©f√©rence √† l'ensemble du tableau.  Ainsi, affecter une variable √† de nouvelles donn√©es signifie simplement √©craser les valeurs.  L'acc√®s aux variables du premier tableau est perdu. <br><br>  Cela ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/-s/0_/qo/-s0_qo3ikvlvpkwc_9gg7ccpqks.png"><br><br>  En m√™me temps, <code>dataLayer.push()</code> n'est ni une variable ni un tableau.  Il s'agit d'une m√©thode qui peut √™tre appliqu√©e √† n'importe quel tableau et obtenir quelque chose √† la sortie ou modifier le tableau lui-m√™me.  En d'autres termes, nous prenons le tableau dataLayer et lui appliquons la m√©thode <code>push()</code> - nous obtenons <code>dataLayer.push()</code> .  <code>Push</code> n'√©crase pas les donn√©es, comme dans le cas d'un remplacement du tableau, mais ajoute de nouvelles valeurs au tableau. <br><br>  Lorsque vous travaillez avec GTM, il est pr√©f√©rable d'utiliser la m√©thode <code>push</code> comme ceci: <br><br><img src="https://habrastorage.org/webt/dy/jp/c-/dyjpc-cpvlfwur8ck_smhl5cli4.png"><br><br>  Dans ce formulaire, <code>push</code> doit √™tre utilis√© pour v√©rifier en outre si la variable <code>dataLayer</code> a g√©n√©ralement √©t√© d√©finie comme un tableau.  La v√©rification permet d'√©viter des erreurs inutiles lorsque le site est en cours d'ex√©cution. <br><br><h2>  Comment configurer l'analyse sur une seule page </h2><br>  GTM vous permet de synchroniser facilement le travail d'une seule page avec Google Analytics.  Par page unique, je veux dire un site o√π toutes les pages ont un seul shell, et de nouvelles donn√©es apparaissent dynamiquement sur le site via AJAX.  Il interf√®re avec le fonctionnement normal de GA, vous ne pouvez donc pas vous passer d'un d√©clencheur GTM: <br><br><img src="https://habrastorage.org/webt/p1/o3/3a/p1o33ay4wdo-u39-mnel361u8um.png"><br><br>  Apr√®s avoir cr√©√© le d√©clencheur, appliquez-le √† Universal Analytics: <br><br><img src="https://habrastorage.org/webt/cy/9h/ah/cy9hah_src0krc-x75syyhaukmo.png"><br><br>  Maintenant, GA pourra recevoir des donn√©es non seulement lorsque l'utilisateur entre ou quitte la page, mais dans tous les autres cas de surcharge de donn√©es dynamiques. <br><br>  Certes, la m√©thode d√©crite ci-dessus ne convient pas aux sites qui utilisent diverses variables get-request et ¬´g√¢chent¬ª l'URL.  Pour ces adresses compliqu√©es, vous devrez configurer GTM de mani√®re plus d√©licate. <br><br><h3>  1. Configurer des variables </h3><br>  Nous allons dans les param√®tres de la section "Variables" et s√©lectionnons le nouveau fragment d'historique et la source d'historique - ils sont n√©cessaires pour enregistrer l'URL ainsi que les requ√™tes et les v√©rifier. <br>  Apr√®s cela, vous devrez travailler avec JavaScript et cr√©er votre propre variable <code>getPathWithFragment</code> , dans laquelle nous √©crivons l'URL.  L'adresse ira √† GA et aidera ainsi Google Analytics √† d√©terminer quand l'URL change r√©ellement: <br><br><img src="https://habrastorage.org/webt/z3/i9/gb/z3i9gbsboa4r15bdjq-zhtjzvsc.png"><br><br>  Le code renvoie le chemin, la cha√Æne et le hachage de l'URL. <br><br><h3>  2. Cr√©ez un d√©clencheur </h3><br>  Apr√®s avoir configur√© le d√©clencheur de modification du fragment d'historique, s√©lectionnez son type.  Ici, vous devez prendre le changement d'historique et s√©lectionner l'activation popstate.  Toutes ces manipulations vous permettront d'enregistrer le changement dans l'enregistrement historique actif: <br><br><img src="https://habrastorage.org/webt/3q/hx/9r/3qhx9rcljd2mvaodkthgqj828qo.png"><br><br><h3>  3. Personnalisez la balise </h3><br>  Ensuite, configurez Universal Analytics.  Dans les param√®tres, s√©lectionnez Page et la variable <code>getPathWithFragment</code> cr√©√©e pr√©c√©demment: <br><br><img src="https://habrastorage.org/webt/3q/hx/9r/3qhx9rcljd2mvaodkthgqj828qo.png"><br><br>  C'est tout, il ne reste plus qu'√† ajouter le d√©clencheur de changement de fragment d'historique et v√©rifier le fonctionnement du tag. <br><br><h3>  4. Pourquoi ai-je besoin d'une √©tiquette </h3><br>  Si l'utilisateur qui visite le site clique sur le lien n√©cessaire pour charger les nouvelles donn√©es de la page dynamique, le d√©clencheur cr√©√© est d√©clench√© et, par cons√©quent, la balise GA.  Gr√¢ce √† cela, les donn√©es sont transmises sans probl√®me √† Google Analytics. <br><br><h2>  Comment suivre les liens sortants et les t√©l√©chargements de fichiers </h2><br>  Le suivi des liens est tr√®s utile.  Vous pouvez ainsi savoir o√π va l'utilisateur sur le site et √† quelle fr√©quence il le fait.  La configuration GTM dans ce cas est l√©g√®rement diff√©rente de ce qui a √©t√© d√©crit ci-dessus.  Pour le suivi, vous devez cr√©er une variable dans laquelle le syst√®me enregistrera toutes les donn√©es n√©cessaires √† l'analyse.  L'enregistrement se produit lorsque le d√©clencheur se d√©clenche. <br><br><h3>  1. Cr√©ez une variable </h3><br>  Nous devons d√©clarer une nouvelle variable qui enregistrera l'√©v√©nement.  Vous pouvez l'appeler Click_URL_Hostname.  Puisque la variable contiendra l'adresse, son type sera l'URL.  Dans ce cas, il est pr√©f√©rable de supprimer www pour √©viter de doubler les informations: <br><br><img src="https://habrastorage.org/webt/vw/4q/-z/vw4q-zqdmtwjbohbhgae7uaty-w.png"><br><br><h3>  2. Cr√©ez un d√©clencheur </h3><br>  S√©lectionnez le type de "Liens uniquement".  Comme condition, s√©lectionnez la variable Click_URL_Hostname cr√©√©e pr√©c√©demment: <br><br><img src="https://habrastorage.org/webt/ay/2n/vx/ay2nvxdihdjaduiysqpd0boynfa.png"><br><br><h3>  3. Cr√©ez une balise </h3><br>  Nous cr√©ons une balise qui suivra les actions des utilisateurs et r√©p√©tons l'algorithme d√©crit ci-dessus: <br><br><img src="https://habrastorage.org/webt/ah/ym/w7/ahymw7nhrcpu8mtvyhitgdc5aik.png"><br><br>  Si tout est fait correctement, la balise devrait fonctionner.  Bien s√ªr, il doit √™tre v√©rifi√© √† l'aide du d√©bogueur.  Notez que UA est une constante dans laquelle l'ID d'analyse est √©crit.  C'est une astuce courante pour les programmeurs: utilisez des constantes plut√¥t que des nombres pour faciliter les remplacements de masse. <br><br><h2>  Comment suivre les t√©l√©chargements de fichiers √† l'aide de Google Tag Manager </h2><br>  Si vous avez besoin de savoir comment, quand et avec quelle fr√©quence les utilisateurs t√©l√©chargent des fichiers, utilisez l'un des syst√®mes d'analyse ou configurez GTM. <br><br>  Cr√©ez un d√©clencheur, s√©lectionnez ¬´Liens uniquement¬ª comme type.  Ensuite, configurez l'activation de l'URL de clic: <br><br><img src="https://habrastorage.org/webt/g9/g4/cl/g9g4cln-kknm3fjlwo5tqzyvexy.png"><br><br>  Une telle configuration GTM vous permettra de corriger le t√©l√©chargement de fichiers avec l'extension xlsx, pdf, docx, zip et csv. <br><br>  Apr√®s cela, vous pouvez cr√©er une balise en s√©lectionnant le type "√âv√©nement" et en d√©finissant les param√®tres.  Nous avons d√©j√† fait quelque chose de similaire ci-dessus lorsque nous avons suivi les liens sortants. <br><br><h2>  Avis d'experts: Pourquoi choisir Google Tag Manager </h2><br><img src="https://habrastorage.org/webt/we/hy/bv/wehybvisghcpbtftpk_ljswbhzg.png" align="left">  <b>Dmitry Nichiporov, sp√©cialiste du trafic payant chez Elama.</b> <br>  ¬´Les sp√©cialistes du marketing sont importants pour surveiller les campagnes publicitaires.  Pour mesurer les divers r√©sultats de la publicit√©, vous avez besoin d'analyses compl√®tes.  Avec des param√®tres appropri√©s, les statistiques publicitaires peuvent optimiser le budget, rendre la campagne plus efficace, augmenter le CTR et m√™me baisser le prix pour attirer un client. <br><br>  √Ä mon avis, GTM est un syst√®me indispensable et tr√®s pratique qui permet une gestion flexible des tags.  Il suffit de configurer correctement le code une fois, puis sans aucune difficult√© d'obtenir les donn√©es n√©cessaires sur le site et les clients. <br><br>  J'utilise g√©n√©ralement GTM lorsque j'ai besoin d'installer des analyses sur le site, de v√©rifier l'efficacit√© du suivi des appels et des chats et de corriger certaines conversions.  J'utilise souvent GTM lors de campagnes publicitaires pour les boutiques en ligne. <br><br>  Il est clair que pour les entreprises qui n'ont pas de programmeur √† temps plein, GTM sera un gestionnaire de balises indispensable.  Apr√®s tout, aucune connaissance particuli√®re n'est requise pour l'utiliser.  Une compr√©hension assez basique du fonctionnement de html et js. <br><br>  Dans le m√™me temps, GTM sera utile √† la fois aux sp√©cialistes ordinaires, aux sp√©cialistes du marketing et aux annonceurs, ainsi qu'aux grandes entreprises et agences engag√©es dans la publicit√© en ligne. ¬ª <br><br><img src="https://habrastorage.org/webt/yu/az/x6/yuazx6udymvpht1zvselhujp89s.png" align="left">  <b>Denis Lisogorya, analyste num√©rique chez OWOX BI.</b> <br>  ¬´GTM est un excellent moyen de simplifier votre travail avec des analyses sur le site.  C'est une chose indispensable pour suivre et analyser le comportement des utilisateurs.  Avec lui, vous pouvez facilement contr√¥ler le processus de collecte de donn√©es sur le site en modifiant et en d√©finissant des balises. <br><br>  Surtout, j'aime le fait que la participation du d√©veloppeur n'est g√©n√©ralement requise qu'une seule fois - pour installer le code sur le site, et toutes les autres manipulations peuvent √™tre effectu√©es dans l'interface GTM.  Cela minimise votre d√©pendance vis-√†-vis des d√©veloppeurs.  GTM vous permet √©galement d'utiliser un grand nombre d'int√©grations pr√™tes √† l'emploi avec d'autres services, il dispose d'un mode de test et de d√©bogage, qui permet de tester le travail des balises avant de les ajouter au site, ainsi que de nombreux autres goodies. <br><br>  Je pense que pour les sp√©cialistes qui sont engag√©s dans la collecte de donn√©es, ils veulent influencer rapidement le changement des exigences de donn√©es ou des changements sur le site, ils veulent √©conomiser le budget - cela vaut la peine de regarder de plus pr√®s cet outil.  Il est important de noter qu'il existe de nombreuses informations diff√©rentes sur le travail avec GTM, il existe un forum officiel et une aide o√π vous pouvez toujours trouver la r√©ponse √† votre question. <br><br>  √Ä l'heure actuelle, il existe une galerie de mod√®les de communaut√© o√π vous trouverez des mod√®les de balises qui aident √† r√©soudre presque toutes les t√¢ches, par exemple, configurer la collecte de donn√©es pour le commerce √©lectronique avanc√©.  Bref, GTM est un oc√©an d'opportunit√©s! ¬ª <br><br><h2>  Des √©diteurs </h2><br><ul><li>  Cours pour d√©butants " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©but en programmation</a> " </li><li>  Profession de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©veloppeur Python</a> </li><li>  Cours en ligne pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©veloppeurs Kotlin</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475608/">https://habr.com/ru/post/fr475608/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475594/index.html">JavaScript divertissant: une √©quation presque lin√©aire</a></li>
<li><a href="../fr475596/index.html">Des hypoth√®ses de grand nombre premier prouv√©es pour des syst√®mes de petit nombre</a></li>
<li><a href="../fr475598/index.html">Organisation d'une architecture simple dans une application Android avec un tas de ViewModel + LiveData, Retrofit + Coroutines</a></li>
<li><a href="../fr475600/index.html">Comment nous avons connect√© Prometheus</a></li>
<li><a href="../fr475604/index.html">Configuration du mod√®le officiel PostgreSQL sur Zabbix 4.4</a></li>
<li><a href="../fr475610/index.html">Lampes de table LED s√ªres qui conservent la vision</a></li>
<li><a href="../fr475612/index.html">√âtant donn√©, quand, les affirmations et la confiance dans la mise en ≈ìuvre</a></li>
<li><a href="../fr475614/index.html">Automatisation pour les plus petits. Deuxi√®me partie. Conception du r√©seau</a></li>
<li><a href="../fr475618/index.html">Comment √©crire un contrat Python intelligent sur le r√©seau Ontology. Partie 2: API de stockage</a></li>
<li><a href="../fr475622/index.html">Extension d'UObject dans Unreal Engine 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>