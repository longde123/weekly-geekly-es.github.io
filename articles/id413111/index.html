<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏻 👨🏼‍🎓 🔮 STM32 + NetBeans =? 💓 🐮 🍉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seperti yang Anda ketahui, kompatibilitas dengan alat GNU dan dukungan untuk GDB membuat hampir semua lingkungan pengembangan populer cocok untuk debu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>STM32 + NetBeans =?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413111/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ip/g9/vp/ipg9vp8f1dw4qq31hrwfvxyuvza.png" alt="Logo membosankan"></div><br>  Seperti yang Anda ketahui, kompatibilitas dengan alat GNU dan dukungan untuk GDB membuat hampir semua lingkungan pengembangan populer cocok untuk debugging berbagai platform tertanam, paling sering gratis dan legal.  Secara teori. <br><br>  Apa yang terjadi dalam praktik ketika mencoba berteman dengan STM32 dan NetBeans, dan apakah mungkin, pada prinsipnya, untuk mendapatkan sistem yang bisa diterapkan dengan dukungan untuk batu-batu terbaru - di bawah potongan. <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text">  Ya  Tapi tidak. </div></div><a name="habracut"></a><br><h2>  Beberapa lirik </h2><br>  Saya benar-benar tidak ingin meninggalkan microchip.  Namun, setelah pembelian oleh Atmela, mereka pertama kali menutupi, mungkin, salah satu keluarga paling menjanjikan dalam portofolio perusahaan - PIC32MM, dan kemudian seluruh lini MIPS.  Menjadi jelas bahwa di masa mendatang, transisi ke ARM tidak dapat dihindari, karena microchip selama dua tahun belum mengintegrasikan dukungan pengontrol Atmelovsk dalam ekosistemnya, itu tidak memberikan keuntungan apa pun untuk "Tetap bersama kami".  Sebaliknya, kebijakan harga ke atas dan kesulitan organisasi tradisional dari merger membuat AWP Atmelovskiye kurang menarik.  Pada saat yang sama, sebuah proyek muncul bahwa PIC32MZ hanya tersandung.  Massa kritis telah diperoleh. <br><br>  Mengapa STM: cakupan pasar yang luas, debugging anggaran, lingkungan open source berfitur lengkap SW4STM32 berbasis pada teknologi open source, dan aspek politik - ST Mikroelektronika didukung oleh pemerintah Prancis sebagai sumber daya strategis, sehingga keluar tiba-tiba dari pasar atau pengambilalihan, tampaknya, tidak terancam. <br><br><h2>  Debugging - Kesan Pertama </h2><br>  SW4STM32 dipasang dengan cara tradisional - dengan berulang kali menekan tombol Next&gt; (* selanjutnya, semua percobaan berlangsung pada Win7 x64).  Sebuah proyek demo yang cocok untuk menguji fungsi yang diinginkan telah dihapus dari paket STM32Cube Firmware, semuanya bekerja kurang lebih langsung dari kotak.  Awal pertama dari emulator JTAG meninggalkan kesan: seluruh siklus memasuki mode debug, mulai dari koneksi dan berakhir dengan berhenti di awal main () dengan memperbarui konteks, ternyata, bisa muat dalam 1-2 detik.  Dibandingkan dengan debuggers microchip (bahkan ICE NYATA untuk setengah setengah), perbedaan dalam kecepatan adalah beberapa! <br>  Namun, sesuatu yang mengejutkan tidak menyenangkan. <br><br><h2>  Apa yang salah dengan Eclipse / SW4STM32 </h2><br>  Segudang pengaturan dan organisasi tidak logis, item menu tersembunyi, perspektif, bug antarmuka dan artefak visual, tombol dan fungsi panas yang jarang digunakan pada bilah alat, piktogram dan spidol kecil yang kikuk dan tidak dapat dibaca, tidak adanya "Temukan Penggunaan" sebagian subjektif, dan Anda dapat beradaptasi jika Anda mau .  Tetapi: secara teratur lupa untuk menyimpan file yang dimodifikasi sebelum perakitan, meskipun semua tanda centang diperlukan;  dengan penghematan manual paksa, itu tidak melihat perubahan, dan perakitan tambahan ternyata tidak relevan;  tidak ada pembangunan kembali lengkap (Bersihkan dan Bangun) sebagai satu tim, dan setelah pembersihan paksa melalui Proyek Bersih, perakitan gagal (akses file?) dan berhasil menyelesaikan hanya setelah upaya ke-4 - ini tidak lagi dapat dijelaskan secara wajar.  Bahkan rilis MPLAB X Beta awal berdasarkan NetBeans 6.xx kuno tidak memiliki masalah yang sama 10 tahun yang lalu sebagaimana lingkungan pengembangan yang didukung secara resmi untuk STM32 miliki saat ini. <br><br>  Selain itu, dengan SW4STM32, 3 salinan IDE khas sudah dipanggil dalam sistem, karena selain itu masih ada MPLAB X yang dipaku kuat ke NetBeans 8.0.1 dan agak dipagari (mis. Tidak mungkin menggunakannya untuk bahasa / platform lain), dan NetBeans 8.2 untuk Java dan C / C ++. <br><br>  Ternyata pengaturan NetBeans 8.2 untuk bekerja dengan STM32 akan menghilangkan masalah praktis yang dijelaskan Eclipse, mengurangi jumlah salinan IDE, dan menguranginya menjadi satu platform, meskipun versi yang sedikit berbeda. <br><br><h2>  NetBeans 8.2 dan GNU ARM Tools </h2><br>  NetBeans lebih baik menggunakan 32-bit, karena selain menggandakan konsumsi memori, perbedaan versi 64-bit tidak dapat ditemukan. <br><br>  Google dengan cepat menemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">panduan pengaturan</a> .  Perbedaan utama hanya pada OS (mereka memiliki Linux melawan Win7 x64 untuk saya), jadi menginstal MSYS * nix-environment, yang termasuk dalam paket MinGW, menjadi permainan hadiah.  Pengaturan Toolchain akan terlihat seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pa/at/55/paat55hytkpcafquqmaeouhiork.png" alt="nb-toolchain"></div><br>  Poin penting - saat menambahkan GNU ARM toolchain, pilih keluarga "GNU MinGW", dalam hal ini NetBeans akan memanggil MSYS dengan benar.  Jika Cygwin sudah diinstal pada mesin, akan logis untuk menggunakannya, oleh karena itu, keluarga ARM GNU harus memilih "GNU Cygwin". <br><br>  Mencapai kompilasi yang sukses itu tidak mudah, tetapi sangat sederhana.  Karena SW4STM32 menggunakan kompiler yang sama, melihat baris perintah panggilan kompiler di SW4STM32 dan menyalin kunci yang hilang di Properti Proyek → C Compiler → Opsi Tambahan <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ch/l1/9d/chl19dfpmn67u7v2qcpyqrieoeu.png" alt="nb-compiler"></div><br>  kami mendapatkan hasil keluaran yang persis sama, tetapi dengan perbedaan praktis yang penting - semuanya dikumpulkan pertama kali, ada Clean and Build dan berfungsi dengan baik: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xy/p8/aa/xyp8aacaqx7cik38y4mqzhlbxlc.png" alt="nb-build1"></div><br>  Tetapi hasil ini juga dapat ditingkatkan dengan menambahkan pemrosesan Post-Build opsional.  Buka Makefile, dan di bagian .build-post: .build-impl tambahkan: <br><br><pre><code class="hljs powershell">.build<span class="hljs-literal"><span class="hljs-literal">-post</span></span>: .build<span class="hljs-literal"><span class="hljs-literal">-impl</span></span> cp <span class="hljs-variable"><span class="hljs-variable">$</span></span>{CND_DISTDIR}/<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CONF}/<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CND_ARTIFACT_NAME_<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CONF}} <span class="hljs-variable"><span class="hljs-variable">$</span></span>{CND_ARTIFACT_NAME_<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CONF}} arm<span class="hljs-literal"><span class="hljs-literal">-none</span></span><span class="hljs-literal"><span class="hljs-literal">-eabi</span></span><span class="hljs-literal"><span class="hljs-literal">-objcopy</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> ihex <span class="hljs-variable"><span class="hljs-variable">$</span></span>{CND_ARTIFACT_NAME_<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CONF}} <span class="hljs-variable"><span class="hljs-variable">$</span></span>{CND_ARTIFACT_NAME_<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CONF}}.hex arm<span class="hljs-literal"><span class="hljs-literal">-none</span></span><span class="hljs-literal"><span class="hljs-literal">-eabi</span></span><span class="hljs-literal"><span class="hljs-literal">-size</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{CND_ARTIFACT_NAME_<span class="hljs-variable"><span class="hljs-variable">$</span></span>{CONF}}</code> </pre> <br>  (penting - indentasi harus karakter tab tunggal, bukan spasi) <br>  Baris demi baris: 1 - menyalin file objek (diri sendiri) dari folder output ke root proyek, untuk akses yang lebih mudah;  2 - menghasilkan HEX dari elf (dapat dikomentari jika HEX tidak diperlukan);  3 - menampilkan jumlah memori yang ditempati berdasarkan segmen. <br><br>  Hasil akhirnya: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6e/eb/u3/6eebu3andr0dd6zfgqh869chw7s.png" alt="nb-build2"></div><br>  Sejauh ini bagus. <br><br><h2>  OpenOCD - kesulitan pertama </h2><br>  Dalam manual online yang disebutkan di atas, pemrograman chip melalui OpenOCD sederhana dan rutin.  Versi terbaru (0.10.0) diinstal, file konfigurasi diambil (dari kit OpenOCD atau dari folder proyek SW4STM32), perintah formulir ditulis dalam Project Properties → Run: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x-/6a/5b/x-6a5bkmgaxhecmza5flej2x-iy.png" alt="nb-lari"></div><br>  dan semuanya langsung bekerja.  Memang, ini adalah kasus untuk keluarga muda seperti STM32F103 dan F407, tapi saya tertarik pada F7 dan H7.  Dengan yang pertama, versi resmi OpenOCD 0.10.0 lumpuh dengan kesalahan "auto_probe gagal" dan "alasan debug 7 tidak ditentukan";  yang terakhir tidak didukung sama sekali.  Kami mencoba semua majelis resmi yang tersedia 0,10.0 dari Jan 2017 dan Jan 2018 - hasilnya identik.  Pencarian kata kunci mengonfirmasi keberadaan masalah, meskipun Anda tidak dapat menyebutkannya secara masif;  tidak ada analisis dan solusi. <br><br>  Tetapi ada versi yang dijamin berfungsi - dari kit SW4STM32.  Secara alami, itu ternyata ditingkatkan dan ditambah, dengan skrip baru dan dukungan untuk keluarga H7.  Selain itu, struktur file telah diubah di dalamnya, dan di plug-in sumber daya disimpan dalam modul terpisah, oleh karena itu, agar utilitas dikonsolidasikan dalam satu folder untuk melihat skripnya, saklar -s diperlukan. <br><br>  Board.cfg untuk NUCLEO-F767ZI, setelah komentar, dan terkondensasi: <br><br><pre> <code class="hljs powershell">set CHIPNAME STM32F767ZITx source [<span class="hljs-type"><span class="hljs-type">find</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">erface</span></span>/<span class="hljs-type"><span class="hljs-type">stlink</span></span>-<span class="hljs-type"><span class="hljs-type">v2</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-type"><span class="hljs-type">.cfg</span></span>] transport select hla_swd source [<span class="hljs-type"><span class="hljs-type">find</span></span> <span class="hljs-type"><span class="hljs-type">target</span></span>/<span class="hljs-type"><span class="hljs-type">stm32f7x.cfg</span></span>] set WORKAREASIZE <span class="hljs-number"><span class="hljs-number">0</span></span>x10000 set ENABLE_LOW_POWER <span class="hljs-number"><span class="hljs-number">1</span></span> set STOP_WATCHDOG <span class="hljs-number"><span class="hljs-number">1</span></span> reset_config srst_only srst_nogate connect_assert_srst set CONNECT_UNDER_RESET <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Akhirnya diluncurkan melalui Run Main Project: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oh/y-/j8/ohy-j8mnmadnqvq4zbcszplzchq.png" alt="nb-prog"></div><br>  Firmware berhasil, kode sedang dijalankan. <br><br><h2>  Debugging </h2><br>  Skema ini diasumsikan sebagai yang paling tradisional: server GDB lokal pada OpenOCD, NetBeans terhubung melalui localhost: 3333 via TCP.  Dengan demikian, NetBeans akan membutuhkan plugin Gdbserver. <br><br>  Dimungkinkan untuk menyederhanakan peluncuran OpenOCD melalui skrip kelelawar, dan karena setelah sesi selesai, buka konsol, masuk akal untuk mengulang restart tanpa henti: <br><br><pre> <code class="hljs pgsql">:<span class="hljs-keyword"><span class="hljs-keyword">start</span></span> openocd -f <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>.cfg -sd:/Prog/openocd/scripts goto <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre> <br>  Luncurkan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/k-/dl/bzk-dlt4v3upg6tijzo16oiaodc.png" alt="oocd-debug"></div><br>  Versi dari SW4STM32 tidak ditulis secara eksplisit, tetapi server sedang menunggu koneksi TCP ke port 3333. Di NetBeans, pilih Debug → Lampirkan Debugger ..., dan instal: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qk/-k/t8/qk-kt8brsnjmi4m8os7gumqbdu4.png" alt="nb-pasang"></div><br>  Sesi ini aktif.  Terminal OpenOCD: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3-/uh/b6/3-uhb6p4mqszlfw9jqk6klyljtc.png" alt="oocd-debug"></div><br>  Dalam penampilan, semuanya terlihat baik - sesi debug aktif, kode dieksekusi.  Namun, masalahnya masih ada. <br><br><h2>  Masalah </h2><br>  Dalam mode jalankan bebas, eksekusi tidak dapat dihentikan. <br><br>  Jika Anda menetapkan breakpoint sebelum memulai sesi, ketika Anda memasukkan debugging, itu akan berhenti dengan memperbarui konteks, eksekusi langkah-demi-langkah dan melihat / mengubah variabel akan bekerja, yaitu, pada prinsipnya, semua fungsi dasar yang diperlukan untuk debugging penuh: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sq/s_/71/sqs_71pvec8ufdq6cln9cvbtfkm.png" alt="nb-debug"></div><br>  Tetapi hanya sampai awal bebas berikutnya, setelah itu tetap hanya menutup dan memulai kembali sesi. <br><br>  Agak tidak menyenangkan lain dikaitkan dengan breakpoints perangkat lunak: fungsi SYSTEM_Halt () didefinisikan sebagai __asm__ ("bkpt"), dan operasinya mengarah ke tampilan dialog yang tidak perlu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9h/fu/gb/9hfugbj1z9u2pyj1peffrzpfozq.png" alt="nb-sigtrap"></div><br>  Ketika Anda mengklik Buang dan Jeda itu berfungsi seperti yang diperlukan (yaitu, itu menghentikan eksekusi), namun, tidak mungkin untuk mengatur opsi ini secara default dan mematikan tampilan jendela dengan cara standar. <br><br>  Sebelum heap, saya ingin mengotomatiskan peluncuran OpenOCD dan menghubungkan debugger secara langsung melalui NetBeans. <br><br>  Namun, secara objektif, satu-satunya fungsi yang tidak cukup untuk debugging kurang lebih lengkap adalah untuk menghentikan eksekusi (itu juga diperlukan untuk mengatur breakpoint on the fly). <br><br><h2>  Debug Debugging </h2><br>  Pencarian google mengungkapkan bahwa masalah yang sama dengan NetBeans menghentikan GDB berhenti, tetapi diperbaiki beberapa tahun yang lalu.  Karena kurangnya ide yang lebih baik, sumber-sumber NetBeans diunduh dengan harapan dapat berjalan melalui debugger secara langsung.  Anehnya, kami dapat dengan cepat melokalisasi masalah sebelum memanggil utilitas eksternal GdbKillProc.exe, yang pada dasarnya adalah pembungkus untuk DebugBreakProcess (pid) dari WinAPI.  Prinsip utilitas dikurangi menjadi gangguan proses yang tidak mengganggu (analog dengan “kill -SIGINT [pid]” di bawah * nix, atau Ctrl + C di konsol). <br><br>  Tapi dia tidak bekerja. <br><br><h2>  Apa yang diuji </h2><br>  Dalam mode konsol, klien GDB (arm-none-eabi-gdb.exe) bereaksi dengan benar terhadap Ctrl + C, artinya, menghentikan eksekusi kode tanpa menutup sesi, dan menunggu instruksi lebih lanjut. <br><br>  ps -W dan Windows Process Explorer menampilkan proses dengan benar, dan PID cocok dengan variabel internal di NetBeans. <br><br>  Panggilan manual "kill -SIGINT [pid]" dari paket MSYS melempar kesalahan "No such process". <br><br>  Memeriksa melalui "taskkill / pid [pid]" menghasilkan "Proses ... tidak dapat dihentikan ... Proses ini hanya dapat dihentikan dengan paksa ...", yang tampaknya menunjukkan kunci sistem.  Dengan sakelar / f, proses menutup sepenuhnya, yang juga tidak bagus. <br><br>  Dalam prosesnya, ternyata di Windows, situasi dengan generasi sinyal interupsi tidak masalah, atau lebih tepatnya, sama sekali tidak: hanya analog SIGTERM yang didukung secara default, yang berhubungan dengan pemotongan kasar dari proses tersebut, dan tidak ada solusi yang diterima secara umum. <br><br>  Di Internet, utilitas windows-kill ditemukan, dirancang untuk meniru Ctrl + C dan Ctrl + Brk.  Proses menemukan interupsi mengirim tanpa kesalahan, tetapi klien GDB masih tidak merespons. <br><br>  Eksperimen dilakukan menggunakan semua versi 32-bit (NetBeans, ARM Tools, MSYS 1.0), kecuali untuk windows-kill, yang menolak untuk memulai 32-bit ("... tidak dapat memulai dengan benar ...").  Mungkin masalahnya persis seperti ini, karena, menurut data yang terpisah dari forum dan bugtracker, kedalaman bit dari utilitas dan prosesnya harus bersamaan.  Kesulitan di sini adalah bahwa ARM tidak menawarkan versi x64 dari toolchain untuk Windows, termasuk satu-satunya cara untuk menghilangkan heterogenitas adalah dengan membuat versi x32 dari windows-kill bekerja, yang juga tidak jelas apakah mungkin berdasarkan Win x64 pada prinsipnya. <br><br>  Di tengah proses, OS diinstal ulang dari awal, dan tidak ada perubahan dalam perilaku subjek eksperimental yang diperhatikan, termasuk dengan keyakinan besar fitur-fitur sistem tertentu dapat dihilangkan. <br><br><h2>  Diperlukan bantuan aula </h2><br>  Sebenarnya, semua hal di atas dapat dianggap sebagai pengantar paragraf ini. <br>  Langkah terakhir yang tersisa adalah membuat debugging STM32 di bawah NetBeans nyata: <br><br>  <i>membutuhkan mekanisme perangkat lunak yang berfungsi untuk mengirim sinyal interupsi SIGINT (Ctrl + C) ke proses klien Windows GDB</i> <br><br>  Berikut ini adalah rekomendasi untuk mengatur konfigurasi minimum yang cukup untuk memverifikasi / men-debug masalah di atas.  Jika / ketika itu dapat diatasi, artikel akan diulang kembali dalam panduan langkah demi langkah sederhana tentang cara mengkonfigurasi NetBeans + OpenOCD untuk beberapa keluarga dan papan debug yang berbeda.  Fungsi lebih lanjut dapat diselesaikan sesuka hati, sudah memiliki solusi dasar yang bisa diterapkan. <br><br><h2>  Pengaturan tes </h2><br>  Diusulkan untuk menggunakan papan Blue Pill berdasarkan STM32F103C8T6 dan klon ST-Link V2 sebagai platform perangkat keras. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8g/m5/5r/8gm55r80dnmbhba7vr90piemhc0.png" alt="pil biru"></div><br>  Itu perlu: <br><br>  1. Instal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GNU Arm Embedded Toolchain</a> <br><br>  2. Instal OpenOCD 0.10.0 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">build di bawah Win</a> ) <br><br>  3. Daftarkan folder nampan dari kedua paket di PATH (Panel Kontrol → Sistem → Pengaturan Sistem Lanjut → Variabel Lingkungan ... → Jalur). <br><br>  4. Di tempat yang nyaman untuk membuat file board.cfg, salin isinya: <br><br><pre> <code class="hljs powershell">source [<span class="hljs-type"><span class="hljs-type">find</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">erface</span></span>/<span class="hljs-type"><span class="hljs-type">stlink</span></span>-<span class="hljs-type"><span class="hljs-type">v2.cfg</span></span>] source [<span class="hljs-type"><span class="hljs-type">find</span></span> <span class="hljs-type"><span class="hljs-type">target</span></span>/<span class="hljs-type"><span class="hljs-type">stm32f1x.cfg</span></span>] transport select <span class="hljs-string"><span class="hljs-string">"hla_swd"</span></span> reset_config none separate set WORKAREASIZE <span class="hljs-number"><span class="hljs-number">0</span></span>x5000 set CHIPNAME STM32F103C8T6 set ENABLE_LOW_POWER <span class="hljs-number"><span class="hljs-number">1</span></span> set STOP_WATCHDOG <span class="hljs-number"><span class="hljs-number">1</span></span> set CLOCK_FREQ <span class="hljs-number"><span class="hljs-number">4000</span></span> set CONNECT_UNDER_RESET <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  5. Pilih firmware uji yang sesuai (test.elf), kriteria utamanya adalah eksekusi dan berhenti dapat dibedakan dengan jelas.  Salin ke tempat yang nyaman. <br><br>  6. Dari tempat yang nyaman untuk mem-flash papan: <br><br> <code>openocd -f board.cfg -c "program test.elf verify reset exit"</code> <br> <br>  Firmware harus dimulai.  Contoh keluaran OpenOCD ke konsol: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ye/4s/iv/ye4sivaywyegu12-xjodmnhntdw.png" alt="oocd-prog"></div><br>  7. Dari tempat yang nyaman untuk memulai server OpenOCD GDB: <br><br> <code>openocd -f board.cfg</code> <br> <br>  Kode masih dieksekusi;  contoh output (konsol tetap terkunci oleh OpenOCD): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eo/ku/hd/eokuhd9oajy5kea8tz_dzcfwhq8.png" alt="oocd-debug"></div><br>  8. Di konsol lain atau langsung jalankan arm-none-eabi-gdb.exe dari paket GNU ARM Embedded Toolchain dan jalankan perintah: <br><br>  <code>target extended-remote localhost:3333</code> (kode masih mengeksekusi) <br>  <code>continue</code> (kode sedang berjalan, konsol terkunci) <br>  <code>Ctrl+C</code> (kode berhenti, konsol aktif) <br>  <code>continue</code> (berjalan lagi, konsol terkunci) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ye/4s/iv/ye4sivaywyegu12-xjodmnhntdw.png" alt="oocd-debug"></div><br>  Tugasnya adalah menghapus klien GDB dari status eksekusi (mis. Pada dasarnya meniru Ctrl + C) secara terprogram. <br><br>  Untuk mengetahui ID Proses, gunakan "ps -W" dari lingkungan * nix, atau Windows Process Explorer (diinstal secara opsional). <br><br>  Mungkin seseorang akan melakukan debug dengan benar tepat setelah penyetelan awal NetBeans - informasi semacam itu juga akan berguna, terutama dengan deskripsi terperinci tentang sistem dan kemungkinan fitur. <br><br>  Silakan bagikan gagasan dalam komentar, dan saya berharap bahwa dengan bekerja bersama kita dapat mengubah eksperimen yang berani menjadi panduan yang berguna untuk menyiapkan alat yang bahkan lebih berguna. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413111/">https://habr.com/ru/post/id413111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413101/index.html">STM32F4 Papan Debug dalam Faktor Bentuk Raspberry Pi</a></li>
<li><a href="../id413103/index.html">3CX v15.5 Pembaruan 5 Beta dan integrasi REST dengan AmoCRM dirilis</a></li>
<li><a href="../id413105/index.html">Catatan dari penyedia IoT. Aktivasi dan keamanan di LoraWAN</a></li>
<li><a href="../id413107/index.html">Terjemahan dari wiki proyek Svelto.ECS. Kerangka kerja ECS untuk Unity3D</a></li>
<li><a href="../id413109/index.html">Cara Membangun Platform Integrasi Produk SaaS: Pengalaman Cloud Checkout Poster</a></li>
<li><a href="../id413113/index.html">Dukungan serialisasi JavaScript JavaScript</a></li>
<li><a href="../id413117/index.html">Cara memprogram dengan aman di bash</a></li>
<li><a href="../id413119/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 317 (28 Mei - 3 Juni 2018)</a></li>
<li><a href="../id413121/index.html">Tur foto rekan kerja Moskow #tceh</a></li>
<li><a href="../id413123/index.html">BERGABUNG di Basis Data NoSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>