<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’« ğŸ’ ğŸ¨ æˆ‘ä»¬ä»¥å®ç”¨çš„æ–¹å¼è§£å†³Yandex.Interviewä»»åŠ¡ ğŸ‘ˆğŸ» â˜˜ï¸ ğŸ’ƒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‡ ä¸ªæœˆå‰ï¼ŒYandexåšå®¢ä¸Šå‘è¡¨äº†ä¸€ç¯‡æ–‡ç«  ï¼Œè®¨è®ºäº†é‡‡è®¿ç®—æ³•éƒ¨åˆ†çš„é€šè¿‡ã€‚ é™¤å…¶ä»–å¤–ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œé“¾æ¥æŒ‡å‘äº†ä¸€ä¸ªç‰¹æ®Šç«èµ›ï¼Œå…¶ä¸­åŒ…å«ç±»ä¼¼äºYandexå‘å…¶å€™é€‰äººæä¾›çš„ä»»åŠ¡çš„ä»»åŠ¡ã€‚ 


 åœ¨ç³»ç»Ÿä¸­æ³¨å†Œåï¼Œè§£å†³Haskellé—®é¢˜çš„èƒ½åŠ›ç«‹å³å¸å¼•äº†æˆ‘çš„æ³¨æ„åŠ›ã€‚ äº‹å®æ˜¯ï¼Œå°½ç®¡æˆ‘å–œæ¬¢ç”¨è¿™ç§è¯­è¨€è¿›è¡Œç¼–ç¨‹ï¼Œä½†é™¤äº†åœ¨å„ç§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬ä»¥å®ç”¨çš„æ–¹å¼è§£å†³Yandex.Interviewä»»åŠ¡</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470790/"><p> å‡ ä¸ªæœˆå‰ï¼ŒYandexåšå®¢ä¸Šå‘è¡¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†ä¸€ç¯‡æ–‡ç« </a> ï¼Œè®¨è®ºäº†é‡‡è®¿ç®—æ³•éƒ¨åˆ†çš„é€šè¿‡ã€‚ é™¤å…¶ä»–å¤–ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œé“¾æ¥æŒ‡å‘äº†ä¸€ä¸ªç‰¹æ®Šç«èµ›ï¼Œå…¶ä¸­åŒ…å«ç±»ä¼¼äºYandexå‘å…¶å€™é€‰äººæä¾›çš„ä»»åŠ¡çš„ä»»åŠ¡ã€‚ </p><br><p> åœ¨ç³»ç»Ÿä¸­æ³¨å†Œåï¼Œè§£å†³Haskellé—®é¢˜çš„èƒ½åŠ›ç«‹å³å¸å¼•äº†æˆ‘çš„æ³¨æ„åŠ›ã€‚ äº‹å®æ˜¯ï¼Œå°½ç®¡æˆ‘å–œæ¬¢ç”¨è¿™ç§è¯­è¨€è¿›è¡Œç¼–ç¨‹ï¼Œä½†é™¤äº†åœ¨å„ç§åœ¨çº¿æ•™è‚²å¹³å°è¯¾ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ä¹‹å¤–ï¼Œæˆ‘æ²¡æœ‰å–å¾—ä»€ä¹ˆè¿›æ­¥ã€‚ è®¤ä¸ºä»–ä»¬çš„è§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æŒ‘æˆ˜ï¼Œå¹¶å°†æé«˜æˆ‘ä½œä¸ºå¼€å‘äººå‘˜çš„æ°´å¹³ä¹‹åï¼Œæˆ‘ç€æ‰‹è§£å†³äº†å®ƒä»¬ã€‚ </p><br><p> è°åœ¨ä¹å®ƒçš„æœ€ç»ˆç»“æœï¼Œæ¬¢è¿æ¥å…³æ³¨ã€‚ </p><a name="habracut"></a><br><h2 id="a-kamni-i-ukrasheniya">  A.çŸ³å¤´å’Œç å® </h2><br><blockquote>ç»™å‡ºäº†ä¸¤è¡Œå°å†™æ‹‰ä¸å­—ç¬¦ï¼šå­—ç¬¦ä¸²Jå’Œå­—ç¬¦ä¸²Sã€‚å­—ç¬¦ä¸²Jä¸­åŒ…å«çš„å­—ç¬¦æ˜¯â€œç å®â€ï¼Œå­—ç¬¦ä¸²Sä¸­åŒ…å«çš„å­—ç¬¦æ˜¯â€œçŸ³å¤´â€ã€‚ æœ‰å¿…è¦ç¡®å®šSä¸­æœ‰å¤šå°‘ä¸ªå­—ç¬¦åŒæ—¶æ˜¯â€œç å®â€ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œæ‚¨éœ€è¦æ£€æŸ¥Jä¸­æœ‰å¤šå°‘ä¸ªSå­—ç¬¦ã€‚ </blockquote><p> ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯çƒ­èº«ï¼Œæˆ‘ä»¬å°†â€œåœ¨é¢å¤´ä¸Šâ€è§£å†³ã€‚ æˆ‘ä»¬å®šä¹‰å‡½æ•°<em>jewelleryCount :: String-&gt; String-&gt; Int</em> ï¼Œè¯¥å‡½æ•°ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„åˆ—è¡¨çš„å·ç§¯ï¼Œå¯¹ç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸­æ­£åœ¨å¤„ç†çš„é¡¹ç›®çš„æ‰€æœ‰æƒ…å†µè¿›è¡Œæ±‡æ€»ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬åŸºäº<em>elem</em>å‡½æ•°å®šä¹‰<em>elemInt</em>å‡½æ•°ï¼Œä¸æœ€åä¸€ä¸ªå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œ <em>elemInt</em>å‡½æ•°å°†ä¸è¿”å›Trueæˆ–Falseï¼Œè€Œæ˜¯è¿”å›æ•°å­—0æˆ–1ã€‚åœ¨mainå‡½æ•°ä¸­ï¼Œæ‚¨åªéœ€è¦è¯»å–ä¸¤è¡Œï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™ç›¸åº”çš„å‡½æ•°å¹¶æ‰“å°ç»“æœå³å¯ã€‚ æµ‹è¯•ç³»ç»Ÿçš„åˆ¤å®šæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬è½¬åˆ°ç¬¬äºŒé¡¹ä»»åŠ¡ã€‚ </p><br><pre><code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">jeweleryCount</span></span> :: <span class="hljs-type"><span class="hljs-type">String</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> jeweleryCount j = foldr ((+).(elemInt j)) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> elemInt sx = fromEnum $ elem xs main :: <span class="hljs-type"><span class="hljs-type">IO</span></span> () main = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> j &lt;- getLine s &lt;- getLine print $ jeweleryCount js</code> </pre> <br><p>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">githubå­˜å‚¨åº“ä¸­</a>ä¹Ÿæä¾›äº†ç”¨äºè§£å†³æ­¤ä»»åŠ¡å’Œå…¶ä»–ä»»åŠ¡çš„æºä»£ç <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ã€‚</a></em> </p><br><h2 id="b-posledovatelno-iduschie-edinicy">  B.è¿ç»­å•ä½ </h2><br><blockquote> éœ€è¦æ‰¾åˆ°äºŒè¿›åˆ¶å‘é‡ä¸­æœ€é•¿çš„å•ä½åºåˆ—å¹¶æ‰“å°å…¶é•¿åº¦ã€‚ </blockquote><p> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†éå†ä¼ è¾“çš„åˆ—è¡¨å¹¶è®¡ç®—æ‰€éœ€åºåˆ—çš„é•¿åº¦ã€‚ ä½¿ç”¨å‡½æ•°çš„å‚æ•°ï¼Œé™¤äº†åˆ—è¡¨æœ¬èº«ï¼Œæˆ‘ä»¬è¿˜å°†ä¼ é€’å½“å‰çš„æœ€å¤§é•¿åº¦å’Œå½“å‰è°ƒç”¨ä¸­çš„è¿ç»­å•ä½æ•°ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åŸºäºç©ºåˆ—è¡¨å®šä¹‰é€’å½’ï¼Œç„¶åé€’å½’æ­¥éª¤æœ¬èº«ã€‚ </p><br><p> è¦è¯»å–è¾“å…¥ï¼Œæˆ‘ä»¬å®šä¹‰å‡½æ•°<em>getUserInputs :: IO [Char]</em> ï¼Œåœ¨è¯¥å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè¯»å–æ•°å­—n-åˆ—è¡¨çš„å¤§å°ï¼Œç„¶åä½¿ç”¨ç»„åˆå™¨<em>plicateM</em>è·å¾—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†è°ƒç”¨å‡½æ•°<em>&lt;&lt; get&gt; getLine</em> næ¬¡ï¼Œå¹¶å°†ç»“æœåˆå¹¶åˆ°åˆ—è¡¨ä¸­ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad (<span class="hljs-title"><span class="hljs-title">replicateM</span></span>) onesCount :: [Char] -&gt; Int onesCount xs = onesCount' xs 0 0 where onesCount' "" max curr | max &gt; curr = max | otherwise = curr onesCount' (<span class="hljs-title"><span class="hljs-title">x</span></span>:<span class="hljs-title"><span class="hljs-title">xs</span></span>) max curr | x == '1' = onesCount' xs max $ curr + 1 | curr &gt; max = onesCount' xs curr 0 | otherwise = onesCount' xs max 0 getUserInputs :: IO [Char] getUserInputs = do n &lt;- read &lt;$&gt; getLine :: IO Int replicateM n $ head &lt;$&gt; getLine main :: IO () main = do xs &lt;- getUserInputs print $ onesCount xs</code> </pre><br><p> æˆ‘ä»¬å‘é€å†³å®šï¼Œåˆ¤å†³æ˜¯å¯ä»¥çš„ã€‚ æˆ‘ä»¬ç»§ç»­å‰è¿›ã€‚ </p><br><h2 id="c-udalenie-dublikatov">  C.é‡å¤åˆ é™¤ </h2><br><blockquote>  32ä½æ•´æ•°æ•°ç»„ä»¥éé™åºæ’åˆ—ã€‚ æ‚¨è¦ä»ä¸­åˆ é™¤æ‰€æœ‰é‡å¤é¡¹ã€‚ </blockquote><p> è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„å®ç°å¼€å§‹ã€‚ æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåˆå§‹å‡½æ•°ï¼Œè¯¥å‡½æ•°è¯»å–ä¸€ä¸ªæ•°å­—ï¼Œæ‰“å°è¯¥æ•°å­—ï¼Œç„¶åå°†å…¶åŒ…è£…åœ¨IO monadä¸­è¿”å›ã€‚ æˆ‘ä»¬è¿˜å®šä¹‰äº†<em>deleteDoubles :: Int-&gt; Int-&gt; IOï¼ˆï¼‰</em>å‡½æ•°ï¼Œè¯¥å‡½æ•°è¯»å–ä¸€ä¸ªæ•°å­—å¹¶ä»…åœ¨å®ƒä¸ç­‰äºç¬¬äºŒä¸ªå‚æ•°æ—¶æ‰æ‰“å°è¯¥æ•°å­—ï¼ˆæˆ‘ä»¬å°†åœ¨é‚£é‡Œä¼ é€’ä¸Šä¸€æ­¥ä¸­è¯»å–çš„æ•°å­—ï¼‰ã€‚ ä¹‹åï¼Œè¯¥å‡½æ•°é€’å½’åœ°è°ƒç”¨è‡ªèº«ï¼Œä»è€Œå‰è¿›åˆ°è¾“å…¥æµä¸­çš„ä¸‹ä¸€ä¸ªæ•°å­—ã€‚ é€’å½’åŸºæ•°æ˜¯è¦è¯»å–çš„æ•°å­—æ•°ï¼Œæˆ‘ä»¬å°†å…¶ä¼ é€’ç»™ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad initial :: IO Int initial = do a &lt;- read &lt;$&gt; getLine print a return a deleteDoubles :: Int -&gt; Int -&gt; IO() deleteDoubles 0 _ = return () deleteDoubles ta = do b &lt;- read &lt;$&gt; getLine unless (<span class="hljs-title"><span class="hljs-title">a</span></span> == <span class="hljs-title"><span class="hljs-title">b</span></span>) $ print b deleteDoubles (<span class="hljs-title"><span class="hljs-title">t</span></span>-1) b main :: IO () main = do t &lt;- read &lt;$&gt; getLine unless (<span class="hljs-title"><span class="hljs-title">t</span></span> &lt; 1) $ initial &gt;&gt;= deleteDoubles (<span class="hljs-title"><span class="hljs-title">t</span></span>-1)</code> </pre> <br><p> æˆ‘ä»¬å‘é€äº†è§£å†³æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡äº†æ‰€æœ‰æµ‹è¯•ï¼Œä¼¼ä¹å¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯åœ¨æˆ‘çœ‹æ¥ï¼Œåœ¨IO monadä¸­è¿è¡Œçš„å‡½æ•°çš„é€’å½’è°ƒç”¨æ¯”ç®€æ´æ›´ä¸ºä»¤äººå›°æƒ‘ã€‚ è®©æˆ‘ä»¬å°è¯•æ”¹å–„å®ƒã€‚ </p><br><p> è¯·æ³¨æ„ï¼Œé€šå¸¸æ¥è®²ï¼Œæ‚¨å¯ä»¥é¦–å…ˆè¯»å–æ•´ä¸ªæ•°å­—åˆ—è¡¨ï¼ˆæˆ‘ä»¬å°†ä½¿ç”¨å·²ç»ç†Ÿæ‚‰ç¬¬äºŒä¸ªä»»åŠ¡çš„copyMç»„åˆå™¨ï¼‰ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™ä¸€ä¸ªçº¯å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿‡æ»¤æ‰æ‰€æœ‰é‡å¤é¡¹ï¼Œæœ€åæ‰“å°ç»“æœã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad deleteDoubles' _ [] = [] deleteDoubles' prev (<span class="hljs-title"><span class="hljs-title">x</span></span>:<span class="hljs-title"><span class="hljs-title">xs</span></span>) | prev /= x = x:(<span class="hljs-title"><span class="hljs-title">deleteDoubles'</span></span> <span class="hljs-title"><span class="hljs-title">x</span></span> <span class="hljs-title"><span class="hljs-title">xs</span></span>) | otherwise = deleteDoubles' x xs deleteDoubles (<span class="hljs-title"><span class="hljs-title">x</span></span>:<span class="hljs-title"><span class="hljs-title">xs</span></span>) = x:deleteDoubles' x xs getUserInputs :: Int -&gt; IO [Int] getUserInputs t = replicateM t $ read &lt;$&gt; getLine main :: IO () main = do t &lt;- read &lt;$&gt; getLine unless (<span class="hljs-title"><span class="hljs-title">t</span></span> &lt; 1) $ (<span class="hljs-title"><span class="hljs-title">deleteDoubles</span></span> &lt;$&gt; <span class="hljs-title"><span class="hljs-title">getUserInputs</span></span> <span class="hljs-title"><span class="hljs-title">t</span></span>) &gt;&gt;= mapM_ print</code> </pre> <br><p> æˆ‘æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä½†è®©æˆ‘å¤±æœ›çš„æ˜¯è¯¥ç¨‹åºç”±äºè¶…å‡ºäº†å·²ç”¨å†…å­˜çš„é™åˆ¶è€Œæ²¡æœ‰é€šè¿‡193æµ‹è¯•ã€‚ ä¸»è¦é”™è¯¯æ˜¯å°†æ•´ä¸ªåˆ—è¡¨è¯»å…¥æ•´ä¸ªå†…å­˜ã€‚ æˆ‘ä»¬å°†å°è¯•é¿å…è¿™ç§æƒ…å†µï¼Œå¹¶å°†å®ç°ç¬¬ä¸€ç‰ˆå’Œç¬¬äºŒç‰ˆçš„æŸç§æ··åˆå½¢å¼ã€‚ </p><br><p> è¯·æ³¨æ„ï¼Œåˆ é™¤é‡å¤é¡¹çš„ä»»åŠ¡åœ¨æŸç§ç¨‹åº¦ä¸Šè®©äººè”æƒ³åˆ°å·¦è”æƒ³å·ç§¯ï¼šåœ¨æ¯ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ ¹æ®è¯»å–çš„å½“å‰é¡¹åŠå…¶æŸäº›ç»“æœï¼Œåœ¨ä¸Šä¸€æ­¥å†³å®šæ‰“å°ï¼Œç„¶åç»§ç»­è¿›è¡Œä¸‹ä¸€å¯¹å€¼ã€‚ </p><br><p> ä¸€ä¸ªå‡½æ•°æ ¹æ®å…¶å‚æ•°æ‰“å°æˆ–ä¸æ‰“å°ç»“æœï¼Œç„¶åè¿”å›åŒ…è£…åœ¨IO monadä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‡½æ•°éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºæ­¥éª¤ï¼š </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">step</span></span> :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">IO</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> step fst snd = unless (fst == snd) (print snd) &gt;&gt; return snd</code> </pre> <br><p> æˆ‘ä»¬æ ¹æ®ä¼ é€’çš„å€¼ç¡®å®šäº†æ˜¯å¦è¦æ‰“å°ï¼Œä½†æ˜¯å¦‚ä½•ç»„ç»‡è¯»æ•°ï¼Ÿ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨å•å­å·ç§¯å‡½æ•°<em>foldM ::ï¼ˆå¯æŠ˜å tï¼Œå•å­mï¼‰=&gt;ï¼ˆb-&gt; a-&gt; mbï¼‰-&gt; b-&gt; ta-&gt; mb</em> ï¼Œå®ƒé€‚ç”¨äºè¯»å–å‡½æ•°åˆ—è¡¨ã€‚ <br> é€šè¿‡å‡½æ•°foldMçš„ç±»å‹ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°åœ¨æ¯ä¸ªæ­¥éª¤ä¸­ï¼Œå‡½æ•°çš„å…ˆå‰åº”ç”¨çš„ç»“æœçš„â€œæ‹†åŒ…â€éƒ½å‘ç”Ÿåœ¨foldMæœ¬èº«çš„å†…éƒ¨ã€‚ å› æ­¤ï¼Œåœ¨æ¯ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨<em>bind</em>è¿ç®—ç¬¦ï¼ˆ <em>&gt;&gt; =</em> ï¼‰å¯¹å½“å‰åˆ—è¡¨é¡¹è¿›è¡Œå•å­è®¡ç®—ï¼ˆå®é™…ä¸Šï¼Œè¯»å–ä¸‹ä¸€ä¸ªæ•°å­—ï¼‰ï¼Œå¹¶å°†å…¶ä¸å‰ä¸€ä¸ªæ•°å­—ä¸€èµ·ä¼ é€’ç»™æ­¥éª¤ã€‚ ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ç¨‹åº </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">step</span></span> :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">IO</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> step fst snd = unless (fst == snd) (print snd) &gt;&gt; return snd initial :: <span class="hljs-type"><span class="hljs-type">IO</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> initial = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> a &lt;- read &lt;$&gt; getLine print a return a getUserInputs t = replicate t $ read &lt;$&gt; getLine main :: <span class="hljs-type"><span class="hljs-type">IO</span></span> () main = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> t &lt;- read &lt;$&gt; getLine unless (t &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) $ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> init &lt;- initial foldM_ ((=&lt;&lt;) . step) init $ getUserInputs (t<span class="hljs-number"><span class="hljs-number">-1</span></span>)</code> </pre> <br><h2 id="d-generaciya-skobochnyh-posledovatelnostey">  D.æ‹¬å·åºåˆ—çš„ç”Ÿæˆ </h2><br><blockquote> ç»™å®šæ•´æ•°nã€‚ éœ€è¦å¯¼å‡ºæ‰€æœ‰æ­£ç¡®çš„é•¿åº¦ä¸º2â‹…nçš„æ‹¬å·åºåˆ—ï¼ŒæŒ‰å­—å…¸é¡ºåºæ’åºï¼ˆè¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://ru.wikipedia.org/wiki/Lexographic_order</a> ï¼‰ã€‚ <br> ä»»åŠ¡ä¸­ä»…ä½¿ç”¨æ‹¬å·ã€‚ <br> å»ºè®®è·å¾—ä¸€ä¸ªåœ¨ä¸å“åº”ä¸­æ­£ç¡®çš„æ‹¬å·åºåˆ—çš„æ€»æ•°æˆæ¯”ä¾‹çš„æ—¶é—´å†…å·¥ä½œçš„è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶ä½¿ç”¨ä¸næˆæ¯”ä¾‹çš„å­˜å‚¨å®¹é‡ã€‚ </blockquote><p> ä¸è®¸å¤šå…¶ä»–ä»»åŠ¡ä¸€æ ·ï¼Œå¿…é¡»å¯¼å‡ºæ»¡è¶³æŸäº›æ¡ä»¶çš„åºåˆ—ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">æ­¤å¤„</a>æ›´è¯¦ç»†åœ°é˜…è¯»äº¤æ¢ç¡¬å¸ï¼Œå®‰æ’å…«ä¸ªçš‡åå’Œå…¶ä»–å¥³ç‹çš„ä»»åŠ¡ï¼‰ï¼Œè¯¥ä»»åŠ¡å¯ä»¥ä½¿ç”¨åˆ—è¡¨monadç®€æ´åœ°è§£å†³ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œæ­¤æ–¹æ³•åŸºäºåˆ—è¡¨çš„å•å­ç»‘å®šï¼Œå…¶å«ä¹‰æ˜¯å°†å¯¹åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„ä¸€ç»„æ“ä½œç»“åˆåœ¨ä¸€èµ·ã€‚ </p><br><p> å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•°<em>generate':: Int-&gt; Int-&gt; [[Char]]</em> ï¼Œè¯¥å‡½æ•°å°†è¦æ”¾å…¥æ‹¬å·çš„æ•°ç›®ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶å°†å·²ç»è®¾ç½®ä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å¼€æ”¾æ‹¬å·çš„æ•°ç›®ã€‚ å¯¹äºé€’å½’æ­¥éª¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªè¾…åŠ©åŠŸèƒ½ï¼š <em>å¯èƒ½</em> -è¿”å›å¯ä»¥åœ¨ä¸‹ä¸€æ­¥ä¸­æ”¾ç½®çš„æ‹¬å·åˆ—è¡¨ï¼Œä»¥åŠ<em>æ­¥éª¤</em> -ä½¿ç”¨å¿…è¦çš„å‚æ•°å¯¹generate'å‡½æ•°è¿›è¡Œé€’å½’è°ƒç”¨ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad(<span class="hljs-title"><span class="hljs-title">mapM_</span></span>) generate :: Int -&gt; [String] generate = generate' 0 where generate' _ 0 = [[]] generate' an = [x:xs | x &lt;- possible, xs &lt;- step x] where step '(' = <span class="hljs-title"><span class="hljs-title">generate'</span></span> (<span class="hljs-title"><span class="hljs-title">a</span></span> + 1) (<span class="hljs-title"><span class="hljs-title">n</span></span> - 1) step ')' = generate' (<span class="hljs-title"><span class="hljs-title">a</span></span> - 1) (<span class="hljs-title"><span class="hljs-title">n</span></span> - 1) possible | n == a = ")" | a == 0 = "(" | <span class="hljs-title"><span class="hljs-title">otherwise</span></span> = "()" main :: IO () main = do n &lt;- read &lt;$&gt; getLine let result = generate $ n * 2 mapM_ putStrLn result</code> </pre><br><p> æˆ‘ä»¬å‘é€äº†è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”æˆ‘ä»¬äº†è§£åˆ°æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘å¯¹ç¨‹åºä½¿ç”¨çš„å†…å­˜é‡æ–½åŠ çš„é™åˆ¶-ç”±äºè¶…å‡ºäº†å·²ç”¨å†…å­˜çš„é™åˆ¶ï¼Œè¯¥è§£å†³æ–¹æ¡ˆæœªé€šè¿‡ç¬¬14æ¬¡æµ‹è¯•ã€‚ </p><br><p> æˆ‘ä»¬ä¿®æ”¹äº†generate'å‡½æ•°ï¼Œä»¥ä¾¿ä¸å…¶æ„å»ºæ­£ç¡®çš„æ‹¬å·åºåˆ—çš„æ•´ä¸ªåˆ—è¡¨ï¼Œä¸å¦‚å°†å®ƒä»¬ç«‹å³æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å¿…é¡»åœ¨å‡½æ•°ä¸­æ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°-ä¸ºå½“å‰æ­¥éª¤æ„å»ºçš„åºåˆ—çš„ä¸€éƒ¨åˆ†ã€‚ æˆ‘æ³¨æ„åˆ°åœ¨æ­¤å®ç°ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥ç›¸åçš„é¡ºåºæ„é€ åºåˆ—-è¿™å°†å…è®¸æˆ‘ä»¬ä½¿ç”¨åˆ—è¡¨æ„é€ å‡½æ•°ï¼ˆ <em>:)</em>è€Œä¸æ˜¯æ›´æ˜‚è´µçš„ä¸²è”è¿ç®—ç¬¦ï¼ˆ <em>++</em> ï¼‰ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad(<span class="hljs-title"><span class="hljs-title">mapM_</span></span>) generate :: Int -&gt; IO() generate = generate' "" 0 where generate' xs _ 0 = putStrLn $ reverse xs generate' xs an | n == a = step ')' | a == 0 = step '(' | <span class="hljs-title"><span class="hljs-title">otherwise</span></span> = <span class="hljs-title"><span class="hljs-title">step</span></span> '(' &gt;&gt; <span class="hljs-title"><span class="hljs-title">step</span></span> ')' where step '(' = <span class="hljs-title"><span class="hljs-title">generate'</span></span> ('(':<span class="hljs-title"><span class="hljs-title">xs</span></span>) (<span class="hljs-title"><span class="hljs-title">a</span></span> + 1) (<span class="hljs-title"><span class="hljs-title">n</span></span> - 1) step ')' = generate' (')':xs) (<span class="hljs-title"><span class="hljs-title">a</span></span> - 1) (<span class="hljs-title"><span class="hljs-title">n</span></span> - 1) main :: IO () main = do n &lt;- read &lt;$&gt; getLine generate $ n * 2</code> </pre><br><h2 id="e-anagrammy">  E.å­—è°œ </h2><br><blockquote> ç»™å‡ºäº†ä¸¤è¡Œï¼Œç”±å°å†™æ‹‰ä¸å­—æ¯ç»„æˆã€‚ éœ€è¦ç¡®å®šè¿™äº›è¡Œæ˜¯å¦ä¸ºå­—è°œï¼Œå³å®ƒä»¬æ˜¯å¦ä»…åœ¨å­—ç¬¦é¡ºåºä¸Šæœ‰æ‰€ä¸åŒã€‚ </blockquote><p> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†è®¡ç®—æ¯è¡Œä¸­å‡ºç°ä¸€ä¸ªå­—æ¯çš„æ¬¡æ•°å¹¶æ¯”è¾ƒç»“æœã€‚ æˆ‘ä»¬ç«‹å³äº†è§£åˆ°æ ‡å‡†åˆ—è¡¨ä¸é€‚åˆæˆ‘ä»¬ï¼Œå› æ­¤æœ‰å¿…è¦ä½¿ç”¨ä¸€ç§æ•°æ®ç»“æ„ï¼Œè¯¥ç»“æ„å°†å…è®¸æˆ‘ä»¬é€šè¿‡å…¶ç´¢å¼•æœ‰æ•ˆåœ°è®¿é—®è¯¥å…ƒç´ ã€‚ æœ‰å‡ ç§ç±»å‹çš„æ•°æ®å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„æ¡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä½¿ç”¨æ ‡å‡†çš„ä¸å¯<em>å˜æ•°</em>ç»„<em>Data.Array</em> ï¼ˆä»ç„¶è‡³å°‘å­˜åœ¨å„ç§å¯å˜æ•°ç»„ä»¥åŠ<em>Data.Vector</em> ï¼‰ã€‚ </p><br><p> ä¸ºäº†æ„é€ å¿…è¦çš„æ•°ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°<em>hist ::ï¼ˆIx aï¼ŒNum bï¼‰=&gt;ï¼ˆaï¼Œaï¼‰-&gt; [a]-&gt; Array ab</em> ï¼Œæ ¹æ®ä¼ é€’çš„å…ƒç´ åˆ—è¡¨å’Œè¿™äº›å…ƒç´ åº”å±äºçš„èŒƒå›´ï¼Œè¯¥æ•°ç»„å½¢æˆä¸€ä¸ªæ•°ç»„ï¼Œå®ƒå­˜å‚¨åˆ—è¡¨ä¸­å…ƒç´ çš„é‡å¤æ¬¡æ•°ã€‚ å°½ç®¡æœªåŒ…å«åœ¨Data.Arrayæ¨¡å—ä¸­ï¼Œä½†æ­¤å‡½æ•°é€šå¸¸ä½œä¸ºä½¿ç”¨å¦ä¸€ä¸ªå·²ç»å­˜åœ¨çš„åº“å‡½æ•°accumArrayçš„ç¤ºä¾‹ç»™å‡ºã€‚ æˆ‘ä»¬åªèƒ½å¤åˆ¶å…¶å®ç°å¹¶ç¼–å†™<em>main-æ•°ç»„Char Int</em>ç›¸ç­‰æ€§æ¯”è¾ƒçš„å¥½å¤„å·²ç»å®šä¹‰ã€‚ æˆ‘å°†æ‚¨çš„æ³¨æ„åŠ›å¸å¼•åˆ°ä¸€ä¸ªä¸é”™çš„åŠŸèƒ½-ä½œä¸ºç´¢å¼•ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥ä½¿ç”¨æ•´æ•°ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨<em>Ix</em>ç±»çš„ä»»ä½•ä»£è¡¨ã€‚ å°±æˆ‘ä»¬è€Œè¨€ï¼ŒCharåœ¨æ­¤è§’è‰²ä¸­æ‰®æ¼”ç€è‡ªç„¶çš„è§’è‰²ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Data.Array hist :: (<span class="hljs-type"><span class="hljs-type">Ix</span></span> <span class="hljs-title"><span class="hljs-title">a</span></span>, <span class="hljs-type"><span class="hljs-type">Num</span></span> <span class="hljs-title"><span class="hljs-title">b</span></span>) =&gt; (<span class="hljs-title"><span class="hljs-title">a</span></span>,<span class="hljs-title"><span class="hljs-title">a</span></span>) -&gt; [a] -&gt; Array ab hist bnds is = accumArray (+) 0 bnds [(<span class="hljs-title"><span class="hljs-title">i</span></span>, 1) | i&lt;-is, inRange bnds i] main = do arr1 &lt;- hist ('<span class="hljs-title"><span class="hljs-title">a'</span></span>,'<span class="hljs-title"><span class="hljs-title">z'</span></span>) &lt;$&gt; getLine arr2 &lt;- hist ('<span class="hljs-title"><span class="hljs-title">a'</span></span>,'<span class="hljs-title"><span class="hljs-title">z'</span></span>) &lt;$&gt; getLine if (<span class="hljs-title"><span class="hljs-title">arr1</span></span> == <span class="hljs-title"><span class="hljs-title">arr2</span></span>) then print 1 else print 0</code> </pre><br><h2 id="f-sliyanie-k-sortirovannyh-spiskov">  F.åˆå¹¶kä¸ªæ’åºåˆ—è¡¨ </h2><br><blockquote> ç»™å®škä¸ªä»¥éé™åºæ’åºçš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„ä¸è¶…è¿‡100ã€‚æ„é€ å®ƒä»¬åˆå¹¶çš„ç»“æœæ˜¯å¿…éœ€çš„ï¼šä¸€ä¸ªä»¥éé™åºæ’åºçš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«åŸå§‹kæ•°ç»„çš„æ‰€æœ‰å…ƒç´ ã€‚ <br> æ¯ä¸ªæ•°ç»„çš„é•¿åº¦ä¸è¶…è¿‡10â‹…kã€‚ <br> å¦‚æœæˆ‘ä»¬å‡è®¾è¾“å…¥æ•°ç»„çš„é•¿åº¦ä¸ºnï¼Œåˆ™å°è¯•ä½¿è§£å†³æ–¹æ¡ˆåœ¨æ—¶é—´kâ‹…logï¼ˆkï¼‰â‹…nä¸Šèµ·ä½œç”¨ã€‚ </blockquote><p> åˆå¹¶ä¸¤ä¸ªæ’åºçš„åˆ—è¡¨æ˜¯ä¸€é¡¹ç»å…¸çš„åˆ—è¡¨ä»»åŠ¡ï¼Œåœ¨Haskellç¼–ç¨‹çš„è®¸å¤šè¯¾ç¨‹ä¸­éƒ½æœ‰ä»‹ç»ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å¦‚ä¸‹è§£å†³ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">merge</span></span> :: [<span class="hljs-type"><span class="hljs-type">Int</span></span>] -&gt; [<span class="hljs-type"><span class="hljs-type">Int</span></span>] -&gt; [<span class="hljs-type"><span class="hljs-type">Int</span></span>] merge [] ys = ys merge xs [] = xs merge (x:xs) (y:ys) | x &lt; y = x:merge xs (y:ys) | otherwise = y:merge (x:xs) ys</code> </pre><br><p> å¥½å§ï¼Œæˆ‘ä»¬å¯ä»¥åˆå¹¶ä¸¤ä¸ªåˆ—è¡¨ã€‚ åˆ—è¡¨åº”è¯¥æ€ä¹ˆåšï¼Ÿ ä½¿ç”¨æ­¤åŠŸèƒ½è¿›è¡Œå·ç§¯ï¼ å› æ­¤ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰åˆ—è¡¨åˆå¹¶ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œåªéœ€è¦æ‰“å°å³å¯ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">è§£å†³æ–¹æ¡ˆ</b> <div class="spoiler_text"><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad merge :: [Int] -&gt; [Int] -&gt; [Int] merge [] ys = ys merge xs [] = xs merge (<span class="hljs-title"><span class="hljs-title">x</span></span>:<span class="hljs-title"><span class="hljs-title">xs</span></span>) (<span class="hljs-title"><span class="hljs-title">y</span></span>:<span class="hljs-title"><span class="hljs-title">ys</span></span>) | x &lt; y = x:merge xs (<span class="hljs-title"><span class="hljs-title">y</span></span>:<span class="hljs-title"><span class="hljs-title">ys</span></span>) | otherwise = y:merge (<span class="hljs-title"><span class="hljs-title">x</span></span>:<span class="hljs-title"><span class="hljs-title">xs</span></span>) ys mergeLists :: [[Int]] -&gt; [Int] mergeLists = foldl merge [] getUserInputs :: Int -&gt; IO [[Int]] getUserInputs t = replicateM t $ do n &lt;- getLine return $ tail $ read &lt;$&gt; words n main :: IO () main = do k &lt;- read &lt;$&gt; getLine lists &lt;- getUserInputs k let res = mergeLists lists mapM_ (<span class="hljs-title"><span class="hljs-title">putStrLn</span></span> . <span class="hljs-title"><span class="hljs-title">show</span></span>) res</code> </pre> </div></div><br><p> ä½†æ˜¯ï¼Œæ­¤è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜-è®¡ç®—å¤æ‚åº¦é«˜äºæ‰€éœ€çš„<em>-Oï¼ˆk ^ 2â‹…nï¼‰</em>è€Œä¸æ˜¯<em>Oï¼ˆkâ‹…logï¼ˆkï¼‰â‹…nï¼‰</em> ï¼Œå¹¶ä¸”å®ƒä½¿ç”¨äº†å¤§é‡çš„é¢å¤–å†…å­˜ã€‚ ç»“æœï¼Œæ­¤è§£å†³æ–¹æ¡ˆç”±äºè¶…å‡ºäº†å·²ä½¿ç”¨çš„å†…å­˜é™åˆ¶-17.27Mbï¼ˆè€Œä¸æ˜¯å…è®¸çš„10Mbï¼‰è€Œæ— æ³•é€šè¿‡æµ‹è¯•ç¼–å·17ã€‚ </p><br><p> å°½ç®¡æˆ‘ä»¬ä¸ä¼šå…³æ³¨æä¾›ç»™è¾“å…¥çš„æ•°å­—å±äºæœ‰é™èŒƒå›´çš„å€¼çš„äº‹å®ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ç»§ç»­å¯»æ‰¾æ›´é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ </p><br><p> ä¸‹ä¸€æ­¥æ˜¯å°è¯•é€šè¿‡åˆ†æè¿™äº›ä»»åŠ¡æ¥å®ç°åŸå§‹æ–‡ç« ä¸­æå‡ºçš„æ–¹æ³•ã€‚ è®©æˆ‘æé†’æ‚¨ï¼Œå®ƒåŸºäºæ•°æ®ç»“æ„çš„ä½¿ç”¨ï¼Œè¯¥æ•°æ®ç»“æ„æä¾›äº†æå–æœ€å°å…ƒç´ çš„æœ‰æ•ˆæ–¹æ³•ã€‚ ä½œä¸ºè¿™ç§ç»“æ„ï¼Œè¯·é€‰æ‹©<em>Data.Set</em> ã€‚ æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨åˆå§‹åŒ–Setï¼Œç„¶ååœ¨æ¯ä¸ªæ­¥éª¤ä¸­æå–å¹¶æ‰“å°æœ€å°å…ƒç´ ï¼Œç„¶åä»ç›¸åº”çš„åˆ—è¡¨ä¸­æ·»åŠ ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ª<em>Data.Sequence</em>ç»“æ„æ¥å­˜å‚¨åˆ—è¡¨æœ¬èº«ã€‚ é€‰æ‹©å®ƒçš„åŸå› æ˜¯ï¼Œåœ¨æ¯ä¸ªæ­¥éª¤ä¸­éƒ½éœ€è¦é€šè¿‡å…¶ç´¢å¼•å¿«é€Ÿè®¿é—®åˆ—è¡¨ï¼ˆåˆ—è¡¨æ— æ³•æä¾›ï¼‰ï¼Œå¹¶ä¸”æ— éœ€å¤åˆ¶æ•´ä¸ªç»“æ„å³å¯æ›´æ”¹è¯¥å…ƒç´ çš„å…ƒç´ ï¼ˆé€šå¸¸ä¸èƒ½æä¾›ä¸å˜çš„<em>æ•°æ®ï¼‰ã€‚æ•°ç»„</em> ï¼‰ã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ç¨‹åºï¼š </p><br><div class="spoiler">  <b class="spoiler_title">è§£å†³æ–¹æ¡ˆ</b> <div class="spoiler_text"><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">qualified</span></span> Data.Sequence <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Seq <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">qualified</span></span> Data.Set <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Set <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Data.Foldable mergeLists :: Set.Set (<span class="hljs-type"><span class="hljs-type">Int</span></span>, <span class="hljs-type"><span class="hljs-type">Int</span></span>) -&gt; Seq.Seq [Int] -&gt; IO () mergeLists set seq | Set.null set = return () | otherwise = do let ((<span class="hljs-title"><span class="hljs-title">val</span></span>, <span class="hljs-title"><span class="hljs-title">idx</span></span>), set') = Set.deleteFindMin set print val if null (<span class="hljs-type"><span class="hljs-type">Seq</span></span>.<span class="hljs-title"><span class="hljs-title">index</span></span> <span class="hljs-title"><span class="hljs-title">seq</span></span> <span class="hljs-title"><span class="hljs-title">idx</span></span>) then mergeLists set' seq else mergeLists (<span class="hljs-type"><span class="hljs-type">Set</span></span>.<span class="hljs-title"><span class="hljs-title">insert</span></span> (<span class="hljs-title"><span class="hljs-title">head</span></span> (<span class="hljs-type"><span class="hljs-type">Seq</span></span>.<span class="hljs-title"><span class="hljs-title">index</span></span> <span class="hljs-title"><span class="hljs-title">seq</span></span> <span class="hljs-title"><span class="hljs-title">idx</span></span>), idx) set') (<span class="hljs-type"><span class="hljs-type">Seq</span></span>.<span class="hljs-title"><span class="hljs-title">adjust</span></span> <span class="hljs-title"><span class="hljs-title">tail</span></span> <span class="hljs-title"><span class="hljs-title">idx</span></span> <span class="hljs-title"><span class="hljs-title">seq</span></span>) getUserInputs :: Int -&gt; IO [[Int]] getUserInputs t = replicateM t $ do n &lt;- getLine return $ tail $ read &lt;$&gt; words n main :: IO () main = do t &lt;- read &lt;$&gt; getLine lists &lt;- getUserInputs t let init_seq = Seq.fromList (<span class="hljs-title"><span class="hljs-title">filter</span></span> (<span class="hljs-title"><span class="hljs-title">not</span></span> . <span class="hljs-title"><span class="hljs-title">null</span></span>) lists) let init_heap = Set.fromList (<span class="hljs-title"><span class="hljs-title">zipWith</span></span> (,) (<span class="hljs-title"><span class="hljs-title">toList</span></span> (<span class="hljs-title"><span class="hljs-title">fmap</span></span> <span class="hljs-title"><span class="hljs-title">head</span></span> <span class="hljs-title"><span class="hljs-title">init_seq</span></span>)) [0..]) mergeLists init_heap $ tail &lt;$&gt; init_seq</code> </pre></div></div><br><p> æˆ‘ä»¬å‘é€äº†è§£å†³æ–¹æ¡ˆï¼Œå‘ç°å³ä½¿ç¨‹åºå¼€å§‹æ¶ˆè€—æ›´å°‘çš„å†…å­˜ï¼ˆ10.26Mbä»£æ›¿äº†ç¬¬17ä¸ªæµ‹è¯•ä¸­çš„17.27Mbï¼‰ï¼Œå®ƒä»ç„¶æ²¡æœ‰è¾¾åˆ°é™åˆ¶ã€‚ è¿™æ ·åšçš„åŸå› åœ¨äºï¼Œé€šè¿‡è¿™ç§å†³å®šï¼Œæˆ‘ä»¬å¿…é¡»ä»¥ä¸€ç§æˆ–å¦ä¸€ç§æ–¹å¼å°†æ•´ä¸ªè¾“å…¥æ•°æ®è¯»å…¥å­˜å‚¨å™¨ã€‚ è®©æˆ‘ä»¬å°è¯•åœ¨æ­¤é—®é¢˜çš„ç¬¬ä¸‰ä¸ªè§£å†³æ–¹æ¡ˆçš„å¸®åŠ©ä¸‹é¿å…è¿™ç§æƒ…å†µ-é€šè¿‡è®¡æ•°æ’åºã€‚ </p><br><p> è§£å†³ä¸Šä¸€ä¸ªå­—è°œé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å·²ç»è®¡ç®—äº†ä¼ å…¥å­—ç¬¦çš„æ•°é‡ã€‚ åŒæ ·ï¼Œåœ¨è§£å†³é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<em>Data.Array</em> ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å®ç°<em>addToArray :: Array Int Int-&gt; [Int]-&gt; Array Int Int</em>å‡½æ•°ï¼Œè¯¥å‡½æ•°é€šè¿‡å¢åŠ ä¸åˆ—è¡¨ä¸­çš„å€¼ç›¸å¯¹åº”çš„ç´¢å¼•å¤„çš„å€¼ï¼ŒåŸºäºç°æœ‰æ•°ç»„å½¢æˆæ•°ç»„ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">addToArray</span></span> :: <span class="hljs-type"><span class="hljs-type">Array</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Int</span></span>] -&gt; <span class="hljs-type"><span class="hljs-type">Array</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> addToArray acc elems = accum (+) acc [(i, <span class="hljs-number"><span class="hljs-number">1</span></span>) | i&lt;-elems]</code> </pre><br><p> ç„¶åï¼Œåœ¨æ¶ˆé™¤é‡å¤çš„ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å·²çŸ¥çš„æ–¹æ³•-ä½¿ç”¨å•<em>å³°</em>å·ç§¯ï¼Œå°†<em>addToArray</em>å‡½æ•°ä¾æ¬¡åº”ç”¨äº<em>kä¸ª</em>æºæ•°ç»„ã€‚ åœ¨ç¬¬17æ¬¡æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†10.26Mbçš„ç›¸åŒç»“æœã€‚ ç„¶åæ˜¯æ—¶å€™è®°ä½ï¼Œ <em>foldl</em> ï¼ˆå…¶ç±»ä¼¼ç‰©ä¸º<em>foldM</em> ï¼‰æ ¹æ®å…¬è®¤çš„å½’çº¦é¡ºåºå°†é¦–å…ˆæ‰©å±•åµŒå¥—è¡¨è¾¾å¼çš„æ•´ä¸ªé“¾ï¼Œç„¶åæ‰è¿›è¡Œå®ƒä»¬çš„ä¸»åŠ¨è®¡ç®—ã€‚ å¦‚æ‚¨æ‰€çŸ¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ <em>Data.List</em>æ¨¡å—å®ç°äº†<em>foldl'</em>å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½¿ç”¨å‡½æ•°<em>seq ::</em> <em>a-</em> <em>&gt; b-&gt; b</em> ï¼Œè¯¥å‡½æ•°é¦–å…ˆå°†ç¬¬ä¸€ä¸ªå‚æ•°è½¬æ¢ä¸ºå¼±å¤´èŒƒå¼ï¼Œå³å°†å…¶<em>ç®€åŒ–</em>ä¸ºå¤–éƒ¨-å‡½æ•°æˆ–æ„é€ å‡½æ•°çš„å€¼ï¼Œç„¶åè¿”å›ç¬¬äºŒä¸ªï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://www.ibm.com/developerworks/ru/library/l-haskell4/index.html</a> ï¼‰ã€‚ æˆ‘ä»¬åˆ«æ— é€‰æ‹©ï¼Œ <em>åªèƒ½ç‹¬ç«‹</em>å®ç°<em>foldM'</em>åŠŸèƒ½ã€‚ </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">foldM'</span></span> :: (<span class="hljs-type"><span class="hljs-type">Monad</span></span> m) =&gt; (a -&gt; b -&gt; ma) -&gt; a -&gt; [b] -&gt; ma foldM' _ z [] = return z foldM' fz (x:xs) = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> z' &lt;- fzx z' `seq` foldM' fz' xs</code> </pre> <br><p> ç»“æœï¼Œç¬¬17æ¬¡æµ‹è¯•çš„å·²ç”¨å†…å­˜é‡å‡ ä¹å‡å°‘äº†ä¸€åŠï¼Œè¾¾åˆ°5.64Mbï¼ å°½ç®¡æˆåŠŸåœ°é€šè¿‡äº†ç¬¬17å’Œç¬¬18ä¸ªæµ‹è¯•ï¼Œä½†æ˜¯ç”±äºè¶…å‡ºäº†å†…å­˜é™åˆ¶-10.25Mbçš„ç›¸åŒåŸå› ï¼Œæ­¤å®ç°æœªé€šè¿‡ç¬¬19ä¸ªæµ‹è¯•ã€‚ </p><br><p> å¥½çš„ï¼Œç»§ç»­-æˆ‘ä»¬è¿˜æ²¡æœ‰å°è¯•è¿‡Data.Array.Unboxedã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§ç±»å‹çš„æ•°ç»„ä¸æ ‡å‡†ä¸åŒï¼Œå®ƒå¯ä»¥è‡ªå·±å­˜å‚¨å€¼ï¼Œè€Œä¸æ˜¯æŒ‡å‘å®ƒä»¬çš„æŒ‡é’ˆï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://wiki.haskell.org/Arrays#Unboxed_arrays</a> ï¼‰ã€‚ å› æ­¤ï¼Œæ­¤ç±»é˜µåˆ—å ç”¨çš„å­˜å‚¨ç©ºé—´æ›´å°‘ï¼Œæ•ˆç‡æ›´é«˜ã€‚ ä¸ºäº†ä½¿ç”¨å®ƒä»¬ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ”¹å¯¼å…¥å’Œå‡½æ•°ç±»å‹ï¼Œå› ä¸º<em>Data.Array</em>å’Œ<em>Data.Array.Unboxed</em>å®ç°äº†ä¸å¯å˜<em>IArray</em>æ•°ç»„çš„ä¸€ä¸ªæ¥å£ã€‚ </p><br><p> æˆ‘ä»¬æ­£åœ¨å‘é€ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ-å†…å­˜æ¶ˆè€—å‡å°‘äº†4.5å€ï¼Œè¾¾åˆ°2.26 MBï¼Œä½†å°šæœªè¶…è¿‡æ—¶é—´é™åˆ¶-æ‰§è¡Œæ—¶é—´ä¸º1.09ç§’ã€‚ è¿™å¯èƒ½ä¸ä»€ä¹ˆæœ‰å…³ï¼Ÿ ä»å…¶ä½™æµ‹è¯•çš„æ‰§è¡Œæ—¶é—´ä¿æŒä¸å˜çš„äº‹å®æ¥åˆ¤æ–­ï¼Œæˆ‘è®¤ä¸ºåŸå› å¹¶ä¸æ˜¯æœªè£…ç®±çš„é˜µåˆ—æ¯”è£…ç®±çš„é˜µåˆ—æ…¢ï¼Œè€Œæ˜¯ç‰¹åˆ«æ˜¯æµ‹è¯•ç³»ç»Ÿã€‚ ä¼¼ä¹ä¸€æ—¦è¿åå…¶ä¸­ä¸€é¡¹é™åˆ¶ï¼Œä»»åŠ¡å°±ä¼šä¸­æ–­ã€‚ ä½†æ˜¯ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ­¤å®ç°ä»ä»¥0.98ç§’çš„ç»“æœé€šè¿‡ç¬¬19æ¬¡æµ‹è¯•ï¼Œä½†ç”±äºè¶…è¿‡äº†æ—¶é—´é™åˆ¶ï¼Œå› æ­¤æœªé€šè¿‡20å·æµ‹è¯•ã€‚ </p><br><p> ä¹‹åï¼Œæˆ‘å°è¯•ä½¿ç”¨Accumå‡½æ•°çš„ä¸å®‰å…¨æ¨¡æ‹Ÿï¼Œä»ç†è®ºä¸Šè®²å®ƒåº”è¯¥æ›´å¿«ï¼Œå„ç§ç¼“å†²æ–¹æ³•ï¼ˆ <em>hSetBuffering :: Handle-&gt; BufferMode-&gt; IOï¼ˆï¼‰</em>å‡½æ•°ï¼‰ï¼Œå¯å˜çš„<em>IOArray</em>æ•°ç»„ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•å‡æœª<em>äº§ç”Ÿ</em>ä»»ä½•ç»“æœã€‚ </p><br><p> æˆ‘ä¸å€¾å‘äºè®¤ä¸ºHaskellçš„é™åˆ¶è®¾ç½®å¾—å¤ªç´§ï¼Œæˆ‘å¸Œæœ›ä»ç„¶æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿé€šè¿‡æ‰€æœ‰æµ‹è¯•ã€‚ åœ¨é¡¹ç›®å­˜å‚¨åº“ä¸­ï¼Œæˆ‘å‘å¸ƒäº†ç”¨äºè§£å†³æ­¤é—®é¢˜çš„å‡ ç§ä¸åŒç‰ˆæœ¬çš„ä»£ç ï¼ˆä½¿ç”¨Arrayå’ŒIOArrayï¼‰ï¼Œä¹Ÿè®¸è¿™å°†æ˜¯é€šè¿‡æ‰€æœ‰æµ‹è¯•çš„è§£å†³æ–¹æ¡ˆçš„èµ·ç‚¹ã€‚ </p><br><h2 id="zaklyuchenie"> ç»“è®º </h2><br><p> å°½ç®¡äº‹å®ä¸Šåªæœ‰å…­åˆ†ä¹‹äº”çš„ä»»åŠ¡è¦æˆ‘å®Œæˆï¼Œä½†æˆ‘è¿˜æ˜¯å®Œæˆäº†æˆ‘çš„ä¸»è¦ä»»åŠ¡-ç»ƒä¹ å‡½æ•°å¼ç¼–ç¨‹ã€‚ ç¨‹åºæ¶ˆè€—çš„èµ„æºå—åˆ°ä¸¥æ ¼é™åˆ¶ï¼Œè¿™è‡³å°‘å‘æŒ¥äº†ä½œç”¨ï¼Œè¿™è¿«ä½¿æˆ‘ä»¬å¯»æ‰¾è¶Šæ¥è¶Šå¤šçš„æ–°æ–¹æ³•æ¥è§£å†³é—®é¢˜ã€‚ æˆ‘å¸Œæœ›ä»–ä»¬çš„æè¿°å¯¹åˆšå¼€å§‹å‡½æ•°å¼ç¼–ç¨‹ä¹‹æ—…çš„äººæœ‰ç”¨ã€‚ </p><br><p> åŠŸèƒ½æ–¹æ³•æ˜¯å¦æ–¹ä¾¿è§£å†³æ­¤ç±»é—®é¢˜ï¼Ÿ è€å®è¯´ï¼Œæˆ‘æœ‰åŒé‡å°è±¡ã€‚ ä¸€æ–¹é¢ï¼Œè§£å†³å¤§å¤šæ•°é—®é¢˜çš„æ–¹æ³•éå¸¸ç®€æ´ï¼ŒHaskellæœ¬äººçš„è¡¨è¾¾å·¥å…·ä»¥åŠä¸°å¯Œçš„æ ‡å‡†åº“åœ¨å…¶ä¸­å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚ å¦ä¸€æ–¹é¢ï¼Œäººä»¬ä¸å¾—ä¸æ‰¿è®¤ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¶ˆè€—èµ„æºçš„ç®¡ç†å¯èƒ½æ˜¯ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ï¼Œè¿™å°†æ— æ³•åœ¨ç»™å®šçš„é™åˆ¶ä¸‹è§£å†³è¯¥é—®é¢˜ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN470790/">https://habr.com/ru/post/zh-CN470790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN470778/index.html">å¸Œæ·ST2000DM008é©±åŠ¨å™¨è¯„æµ‹ï¼šå¿«é€Ÿçš„â€œä¸¤ä¸ªâ€è€Œä¸ä¼šè¿‡é«˜çš„ä»·æ ¼</a></li>
<li><a href="../zh-CN470780/index.html">é…’å§å·²è¢«ä½¿ç”¨-å¸Œæ·ï¼ˆSeagateï¼‰çš„æ–°äº§å“ç”¨äºå­˜å‚¨</a></li>
<li><a href="../zh-CN470782/index.html">è¾¹ç•Œæ•°æ®ï¼šå¦‚ä½•æ„å»ºæ–°çš„ITæ¶æ„</a></li>
<li><a href="../zh-CN470784/index.html">æ­»ç»†èƒç¥ç§˜ä¸–ç•Œçš„è‰²å½©è®¾è®¡</a></li>
<li><a href="../zh-CN470786/index.html">å‡†å¤‡æ˜¥å­£ä¸“ä¸šè®¤è¯ã€‚ æ˜¥å­£å®‰å…¨</a></li>
<li><a href="../zh-CN470792/index.html">é‡‡è®¿æ— é¢˜é¹…æ¸¸æˆçš„åˆ›é€ è€…ä¹‹ä¸€</a></li>
<li><a href="../zh-CN470794/index.html">Laravelï¼šè§£é‡ŠåŸºæœ¬æ¦‚å¿µã€‚ ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è®º</a></li>
<li><a href="../zh-CN470800/index.html">P-é¢„æœŸä»¥åŠDUMPå–€å±±åˆæ­¥è®¡åˆ’ã€‚ æŸ¥çœ‹é€šè¿‡ç»è‚‰æœºé€‰æ‹©çš„æŠ¥å‘Š</a></li>
<li><a href="../zh-CN470802/index.html">å¤‡ä»½ï¼Œç¬¬6éƒ¨åˆ†ï¼šæ¯”è¾ƒå¤‡ä»½å·¥å…·</a></li>
<li><a href="../zh-CN470804/index.html">çˆ±ä¸½ä¸å¥–ï¼šè·èƒœè€…çš„5ä¸ªè§è§£</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>