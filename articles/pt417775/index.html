<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ûüèº ‚ö°Ô∏è üë¶ Mecanismo de comiss√£o do Bitcoin e por que ser amigo de mineiros üëª üç¶ ü§•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, tentaremos descrever em detalhes a principal tarefa das comiss√µes no Bitcoin, como elas funcionam e o que afetam. Explicaremos as raz√µes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mecanismo de comiss√£o do Bitcoin e por que ser amigo de mineiros</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/distributedlab/blog/417775/"> Neste artigo, tentaremos descrever em detalhes a principal tarefa das comiss√µes no Bitcoin, como elas funcionam e o que afetam.  Explicaremos as raz√µes da volatilidade das comiss√µes, atrasos na confirma√ß√£o de transa√ß√µes e descreveremos as abordagens para solucionar esses problemas.  Al√©m disso, esclareceremos como exatamente a atualiza√ß√£o Segregated Witness ajuda a reduzir os custos de transa√ß√£o.  E, como b√¥nus, compartilharemos nossos pensamentos sobre como a amizade com os mineiros reduz as comiss√µes a zero e o que essa tend√™ncia pode levar no futuro.  Ent√£o, vamos come√ßar. <br><a name="habracut"></a><br><h2>  <b>Hora de confirma√ß√£o da transa√ß√£o</b> </h2><br>  √â importante distinguir o processo de processamento de transa√ß√µes (verifica√ß√£o) do processo de confirma√ß√£o (confirma√ß√£o).  Na rede Bitcoin, as transa√ß√µes s√£o processadas quase instantaneamente e confirmadas - por uma hora inteira.  Em outras moedas digitais, tudo pode ser feito em alguns segundos.  O que determina o tempo para confirmar totalmente uma transa√ß√£o em um ambiente descentralizado?  Principalmente do mecanismo de constru√ß√£o de consenso. <br><br>  Em sua forma mais pura, o <abbr title="prova de trabalho">PoW</abbr> n√£o pode obter consenso em menos de uma hora.  Por sua vez, os protocolos de consenso baseados em <abbr title="Toler√¢ncia pr√°tica a falhas bizantinas">PBFT</abbr> e os <abbr title="prova de participa√ß√£o delegada">protocolos</abbr> baseados em <abbr title="prova de participa√ß√£o delegada">DPoS</abbr> podem obter consenso em quest√£o de segundos.  No entanto, o n√≠vel de descentraliza√ß√£o e independ√™ncia de tais sistemas √© muito menor do que no Bitcoin. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d4b/44e/08a/d4b44e08a1cb2c448d523c2bdadb4275.png" alt="imagem"><br><br>  De acordo com as regras do protocolo Bitcoin, os propriet√°rios da maior parte do poder de computa√ß√£o devem confirmar a transa√ß√£o (o bloco que cont√©m essa transa√ß√£o) para serem considerados totalmente confirmados.  Ou seja, com base no bloco em que a transa√ß√£o recebeu a primeira confirma√ß√£o, v√°rios outros blocos devem ser constru√≠dos.  Al√©m disso, essa cadeia deve ser a mais longa e n√£o deve haver cadeias competitivas.  O n√∫mero desses blocos (confirma√ß√µes de transa√ß√£o) √© determinado pelo pr√≥prio benefici√°rio, a seu crit√©rio.  Ele √© guiado pela regra que afirma que, quanto mais confirma√ß√µes uma transa√ß√£o tiver, menor a probabilidade de ela ser posteriormente cancelada. <br><br><h2>  <b>Limita√ß√µes de largura de banda</b> </h2><br>  Com a popularidade do Bitcoin, o fluxo de novas transa√ß√µes na rede aumentou significativamente.  Sabe-se que o tamanho do bloco √© determinado pelas regras do protocolo e √© estritamente limitado.  No Bitcoin, o tamanho m√°ximo do bloco √© de 1 MB, portanto, a largura de banda √© limitada (1,7 KB / s).  Se o fluxo de novas transa√ß√µes exceder a taxa de transfer√™ncia, nem todas elas ser√£o processadas.  E tais situa√ß√µes geralmente acontecem.  Quais transa√ß√µes receber√£o a confirma√ß√£o primeiro e quais esperar√£o - essa √© uma pergunta que requer uma resposta clara.  Sua ess√™ncia √© que as transa√ß√µes devem competir umas com as outras. <br><br><h2>  <b>O papel das comiss√µes</b> </h2><br>  O mecanismo de comiss√£o no Bitcoin √© necess√°rio para pagar pelos servi√ßos de rede distribu√≠dos, onde o servi√ßo de rede √© de fato um armazenamento de dados confi√°vel.  Os usu√°rios da rede Bitcoin realmente pagam por cada byte de dados adicionados ao banco de dados comum.  Devido ao fato de a largura de banda desse banco de dados ser limitada, os usu√°rios competem entre si pela prioridade de grava√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/47c/3f1/83e47c3f112d688ce635f7b10831e19b.png" alt="imagem"><br><br>  Formando transa√ß√µes, os usu√°rios definem uma comiss√£o na forma de uma certa quantidade de satoshi para um byte de dados.  Al√©m disso, cada n√≥ validador enfileira todas as transa√ß√µes n√£o confirmadas de forma que primeiro confirme transa√ß√µes que pagam uma comiss√£o grande por uma unidade de seu peso.  Obviamente, as transa√ß√µes que caem no final da fila podem permanecer n√£o reconhecidas por um longo tempo. <br><br>  Outra tarefa importante que o mecanismo da comiss√£o resolve √© a "trag√©dia das comunidades".  No contexto do Bitcoin, a prote√ß√£o contra spam est√° impl√≠cita nas transa√ß√µes.  A presen√ßa de comiss√µes obrigat√≥rias significa que ser√° caro para um invasor obstruir a rede com transa√ß√µes falsas por um longo tempo, se ele tiver tais inten√ß√µes. <br><br><h2>  <b>Escreva volatilidade de pre√ßos</b> </h2><br>  De tempos em tempos, os usu√°rios da rede Bitcoin encontram uma volatilidade de comiss√£o extraordinariamente alta.  Por exemplo, em 2017, o pre√ßo m√©dio da grava√ß√£o de um byte de dados na blockchain Bitcoin variou de 1 a 500 satoshi.  E a fila de transa√ß√µes n√£o confirmadas variou de alguns KiB a dezenas e at√© centenas de MiB. <br><br>  Devido ao fato de o pre√ßo da grava√ß√£o de dados poder mudar drasticamente, os usu√°rios s√£o for√ßados a competir entre si quase cegamente.  Isso se deve ao fato de que, de fato, a transa√ß√£o ser√° confirmada em m√©dia em 8 minutos, enquanto a taxa de processamento deve ser definida antes de ser assinada.  Portanto, a quest√£o de uma comiss√£o adequadamente estabelecida ainda permanece relevante, porque todos desejam confirma√ß√£o r√°pida de suas transa√ß√µes com custo m√≠nimo.  Naturalmente, pagar mais de 50 USD por uma transa√ß√£o t√≠pica n√£o √© a melhor op√ß√£o, especialmente quando voc√™ pode economizar at√© 90% desse valor se calcular corretamente a comiss√£o. <br><br>  As consequ√™ncias de um aumento acentuado no fluxo de novas transa√ß√µes s√£o o surgimento de uma grande fila de transa√ß√µes pendentes no blockchain de transa√ß√µes.  Entre elas est√£o as transa√ß√µes cujos remetentes n√£o prestaram aten√ß√£o √† mudan√ßa no pre√ßo do registro ou formaram uma transa√ß√£o no momento anterior ao aumento acentuado.  Muitas vezes, o problema n√£o est√° no usu√°rio, mas no software da carteira ou nos servi√ßos de gerenciamento de bitcoin.  Um usu√°rio ativo geralmente encontra produtos de software para trabalhar com Bitcoin, nos quais o gerenciamento de comiss√£o geralmente est√° oculto. <br><br><h2>  <b>Resolvendo o problema com a volatilidade das comiss√µes</b> </h2><br>  Independentemente de ser poss√≠vel controlar manualmente a prioridade da grava√ß√£o de transa√ß√µes geradas, as carteiras do Bitcoin podem usar mecanismos para estimar o pre√ßo atual da grava√ß√£o de dados, em vez de usar valores constantes ou atualizados manualmente.  Isso d√° √† carteira uma grande vantagem em termos de gerenciamento da prioridade de registrar a transa√ß√£o em um banco de dados comum e economizar dinheiro na comiss√£o. <br><br>  Deve-se observar que a previs√£o do pre√ßo de um registro tamb√©m √© poss√≠vel, mas muitas vezes essas previs√µes funcionam apenas por per√≠odos muito curtos (em m√©dia, v√°rios minutos).  Se a previs√£o estiver desatualizada e a transa√ß√£o n√£o for confirmada, √© prov√°vel que voc√™ possa esperar por sua confirma√ß√£o por um longo per√≠odo de tempo - geralmente v√°rias horas e √†s vezes at√© dias. <br><br>  <b><i>taxa de transa√ß√£o = tamanho da transa√ß√£o * pre√ßo em bytes</i></b> <br><br>  C√°lculo din√¢mico ou adapt√°vel de uma taxa de transa√ß√£o significa uma avalia√ß√£o autom√°tica do tamanho total da transa√ß√£o em bytes e uma estimativa do pre√ßo de escrever um byte no blockchain do Bitcoin pelas pr√≥ximas horas.  Para ambas as classifica√ß√µes, existem algoritmos espec√≠ficos para analisar transa√ß√µes e atividades na rede.  Ap√≥s obter uma estimativa do tamanho da transa√ß√£o em bytes e o pre√ßo de grava√ß√£o de um byte, esses valores s√£o multiplicados e a quantidade real em bitcoins √© obtida, que deve ser adicionada √† transa√ß√£o como uma comiss√£o. <br><br>  A vantagem da abordagem de avalia√ß√£o adaptativa √© a inclus√£o de uma comiss√£o mais precisa na transa√ß√£o, que estar√° acima do limite m√≠nimo, mas n√£o muito alto, o que economiza o dinheiro do usu√°rio.  Al√©m disso, a probabilidade de que a transa√ß√£o seja profunda na fila de n√£o confirmados √© m√≠nima.  No entanto, existem exce√ß√µes.  Portanto, consideramos com mais detalhes o que √© importante fazer em uma emerg√™ncia. <br><br><h2>  <b>Aumento da comiss√£o ap√≥s o envio da transa√ß√£o</b> </h2><br>  Observe que o protocolo Bitcoin √© muito flex√≠vel em rela√ß√£o √†s comiss√µes.  Por exemplo, existem dois aprimoramentos de protocolo: substituir por taxa e pagar por filho ou pai, que permitem aumentar a comiss√£o de uma transa√ß√£o j√° gerada e enviada.  Infelizmente, muito poucas carteiras implementam essa funcionalidade para a conveni√™ncia de seus usu√°rios, embora com o tempo elas se tornem mais. <br><br>  Al√©m disso, esse recurso possui v√°rias nuances t√©cnicas e requisitos organizacionais para seu uso correto.  Um desses requisitos √© que o usu√°rio (ou o software no modo autom√°tico) reavalie a taxa da transa√ß√£o, forme e assine uma nova transa√ß√£o (alternativa), distribua-a √† rede e continue monitorando seu status. <br><br><h2>  <b>Como a testemunha segregada ajuda</b> </h2><br>  Uma das altera√ß√µes de protocolo introduzidas pela atualiza√ß√£o Segregated Witness √© a introdu√ß√£o de um novo formato de transa√ß√£o e seu peso de transa√ß√£o.  Antes do advento da Segregated Witness, apenas o tamanho da transa√ß√£o era geralmente considerado no c√°lculo da comiss√£o.  Agora importantes s√£o o tamanho, as transa√ß√µes e o seu peso.  A nova transa√ß√£o armazena evid√™ncias de propriedade de moedas em uma estrutura separada (dados da testemunha).  Para converter o tamanho total de uma transa√ß√£o em seu peso, o tamanho dos dados da testemunha √© multiplicado por um coeficiente menor que o restante dos dados da transa√ß√£o.  O peso da transa√ß√£o √© calculado usando uma f√≥rmula especial: <br><br>  <b><i>peso = tamanho base * 3 + tamanho total</i></b> . <br><br>  Nesse caso, o tamanho da base √© o tamanho da transa√ß√£o, excluindo o tamanho dos dados da testemunha.  Como voc√™ pode imaginar, qualquer dado inclu√≠do nos dados da testemunha requer 4 vezes menos comiss√£o do que outros dados da transa√ß√£o.  Essa abordagem permite que os mineradores determinem uma transa√ß√£o mais lucrativa em rela√ß√£o ao local ocupado no bloco e √† recompensa recebida. <br><br>  Sabe-se que cerca de 60% de todos os dados de transa√ß√µes s√£o precisamente a evid√™ncia de propriedade de moedas (ou seja, aquelas que podem ser registradas em dados de testemunhas).  Consequentemente, o peso das transa√ß√µes do novo formato diminuir√° significativamente.  Assim, o usu√°rio pode pagar menos pela confirma√ß√£o de uma nova transa√ß√£o, enquanto ter√° a mesma prioridade entre os mineradores quando inclu√≠do no bloco que a transa√ß√£o antiga com uma comiss√£o mais alta. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f1/81e/61f/1f181e61f40ecc9707c1c32b822bd50c.png" alt="imagem"><br><br>  O diagrama mostra a depend√™ncia do pre√ßo de grava√ß√£o de um byte de dados no blockchain Bitcoin na carga (fluxo de transa√ß√µes n√£o confirmadas), expresso em bytes por segundo.  A conclus√£o pode ser muito simples: se o fluxo de novas transa√ß√µes for menor ou igual ao rendimento do sistema cont√°bil, o pre√ßo de registro ser√° quase zero.  E se o fluxo de novas transa√ß√µes exceder a taxa de transfer√™ncia, o pre√ßo aumentar√° bastante. <br><br><h2>  <b>Op√ß√£o com um amigo mineiro</b> </h2><br>  Imagine que voc√™ tem um amigo que est√° minerando e controla 10% de todo o poder de processamento envolvido na rede Bitcoin.  Em m√©dia, gera um bloco a cada 100 minutos.  Nesse caso, voc√™ pode criar sua pr√≥pria transa√ß√£o, na qual voc√™ define uma comiss√£o zero e, em seguida, envia essa transa√ß√£o ao seu amigo para confirma√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/748/9cb/1c6/7489cb1c681fe038f18ed76404af86a9.png" alt="imagem"><br><br>  Sua transa√ß√£o com uma probabilidade de 50% receber√° a primeira confirma√ß√£o em 50 minutos e a confirma√ß√£o completa - em m√©dia 50 minutos ap√≥s a primeira.  Como resultado, suas transa√ß√µes receber√£o confirma√ß√£o completa em aproximadamente 100 minutos.  Se voc√™ n√£o tivesse um amigo, a transa√ß√£o receber√° uma confirma√ß√£o completa em cerca de 60 minutos, mas com o pagamento de uma comiss√£o completa. <br><br>  Como voc√™ pode ver, se se trata de economizar dinheiro, voc√™ tem sorte se tiver um amigo mineiro.  Mas se n√£o houver esse amigo, pode haver op√ß√µes alternativas para pagar por um lugar no quarteir√£o. <br><br><h2>  <b>Colocar op√ß√£o de tokeniza√ß√£o</b> </h2><br>  Normalmente, o minerador opera de acordo com o esquema padr√£o e classifica as transa√ß√µes pelo pre√ßo de gravar 1 byte de dados no blockchain.  Todo mundo parece estar fazendo isso agora.  No entanto, √© poss√≠vel que o mineiro tenha uma melhor motiva√ß√£o.  Ele pode formular independentemente uma pol√≠tica de monetiza√ß√£o de sua atividade.  Em outras palavras, ele pode agir de maneira n√£o padronizada com rela√ß√£o √†s transa√ß√µes que gravar√° em seu bloco.  Se houver condi√ß√µes mais favor√°veis ‚Äã‚Äãdo que apenas receber uma comiss√£o por sua transa√ß√£o, provavelmente ele mudar√° sua pol√≠tica. <br><br>  Essa abordagem pressup√µe que os usu√°rios paguem ao minerador pela confirma√ß√£o de suas transa√ß√µes, n√£o por meio de uma comiss√£o predeterminada, mas diretamente (de acordo com seu pr√≥prio esquema). <br><br>  Na pr√°tica, qualquer pool de minera√ß√£o suficientemente grande pode conduzir sua campanha para aumentar a lucratividade e usar mecanismos simples para isso, por exemplo: <br><br><ul><li>  Defina suas prioridades de classifica√ß√£o de transa√ß√£o </li><li>  firmar parceria com um determinado servi√ßo (troca, loja, navegador); </li><li>  vender garantias para um determinado lugar do bloco no futuro. </li></ul><br>  Al√©m disso, o pool pode at√© tokenizar espa√ßo livre em seus blocos (sim, para vender tokens). <br><br><h2>  <b>Conclus√£o</b> </h2><br>  Provavelmente, no futuro, veremos muitas maneiras diferentes de pagar por uma entrada no "banco de dados mais confi√°vel da Terra".  Dado o interesse de muitos servi√ßos e aplicativos nas propriedades desse banco de dados, h√° muito tempo solu√ß√µes de terceiros para adicionar dados arbitr√°rios ao blockchain do Bitcoin com a finalidade de seu "registro de data e hora" confi√°vel.  Mas essas solu√ß√µes n√£o se encaixam bem no ecossistema de aplicativos e √© dif√≠cil para os desenvolvedores monetiz√°-las. <br><br>  No momento, a op√ß√£o de empurrar as transa√ß√µes "pela amizade" e a op√ß√£o de tokenizar o espa√ßo livre em blocos pode parecer c√¥mica, mas, no ritmo atual de desenvolvimento da ind√∫stria, esses cen√°rios podem se tornar vi√°veis.  Al√©m disso, eles podem se tornar fundamentais no relacionamento entre usu√°rios e validadores, mas isso n√£o √© exato. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417775/">https://habr.com/ru/post/pt417775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417763/index.html">MVIDroid: uma revis√£o da nova biblioteca MVI (Model-View-Intent)</a></li>
<li><a href="../pt417767/index.html">An√°lise de sentimentos de texto usando redes neurais convolucionais</a></li>
<li><a href="../pt417769/index.html">Design da mem√≥ria do usu√°rio: Como projetar para idades</a></li>
<li><a href="../pt417771/index.html">Plano da ICANN: Corpora√ß√£o oferece novo modelo de gerenciamento de servidor raiz DNS</a></li>
<li><a href="../pt417773/index.html">Instalador de componentes OpenPnP caseiro</a></li>
<li><a href="../pt417777/index.html">Leitura de fim de semana: 25 materiais para entusiastas de vinil iniciantes</a></li>
<li><a href="../pt417779/index.html">Usando o Unity3D no aplicativo iOS / Android nativo para modelar a ilumina√ß√£o de espa√ßos abertos</a></li>
<li><a href="../pt417781/index.html">Sonda da NASA "toca" o Sol - e n√£o derrete</a></li>
<li><a href="../pt417783/index.html">Otimiza√ß√µes usadas no Python: lista e tupla</a></li>
<li><a href="../pt417785/index.html">Qual administrador de sistema n√£o sonha com sua empresa de terceiriza√ß√£o?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>