<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ”§ ğŸ‘©ğŸ¿â€ğŸ¤ ğŸ•— å›åˆ°Istioçš„å¾®æœåŠ¡ã€‚ ç¬¬ä¸‰éƒ¨åˆ† âœŒğŸ½ ğŸ¤ğŸ¼ ğŸ¤°ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨æ„äº‹é¡¹ ä½©é›·å¤« ï¼šæœ¬ç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†è‡´åŠ›äºä»‹ç»Istioçš„åŠŸèƒ½å¹¶åœ¨å®é™…ä¸­è¿›è¡Œæ¼”ç¤ºï¼Œ ç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯å¯¹è·¯ç”±å’Œç½‘ç»œæµé‡ç®¡ç†çš„ç²¾ç»†è°ƒæ•´ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†è®¨è®ºå®‰å…¨æ€§ï¼šä¸ºäº†æ¼”ç¤ºä¸å®‰å…¨æ€§ç›¸å…³çš„åŸºæœ¬åŠŸèƒ½ï¼Œä½œè€…ä½¿ç”¨Auth0èº«ä»½æœåŠ¡ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç±»æ¯”æ¥é…ç½®å…¶ä»–æä¾›ç¨‹åºã€‚ 

 æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªKubernetesé›†ç¾¤ï¼Œå…¶...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å›åˆ°Istioçš„å¾®æœåŠ¡ã€‚ ç¬¬ä¸‰éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/443668/"><img src="https://habrastorage.org/webt/bj/j4/oy/bjj4oyjxqshrbjf5eks9sgsvbeg.png"><br><br>  <i><b>æ³¨æ„äº‹é¡¹</b></i>  <i><b>ä½©é›·å¤«</b></i>  <i>ï¼šæœ¬ç³»åˆ—<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„ç¬¬ä¸€éƒ¨åˆ†</a>è‡´åŠ›äºä»‹ç»Istioçš„åŠŸèƒ½å¹¶åœ¨å®é™…ä¸­è¿›è¡Œæ¼”ç¤ºï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯</a>å¯¹è·¯ç”±å’Œç½‘ç»œæµé‡ç®¡ç†çš„ç²¾ç»†è°ƒæ•´ã€‚</i>  <i>ç°åœ¨ï¼Œæˆ‘ä»¬å°†è®¨è®ºå®‰å…¨æ€§ï¼šä¸ºäº†æ¼”ç¤ºä¸å®‰å…¨æ€§ç›¸å…³çš„åŸºæœ¬åŠŸèƒ½ï¼Œä½œè€…ä½¿ç”¨Auth0èº«ä»½æœåŠ¡ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç±»æ¯”æ¥é…ç½®å…¶ä»–æä¾›ç¨‹åºã€‚</i> <br><br> æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªKubernetesé›†ç¾¤ï¼Œå…¶ä¸­éƒ¨ç½²äº†Istioå’ŒSentiment Analysiså¾®æœåŠ¡åº”ç”¨ç¨‹åºï¼Œè¿™å°±æ˜¯Istioçš„æ¼”ç¤ºæ–¹å¼ã€‚ <br><br> ä½¿ç”¨Istioï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†æœåŠ¡ä¿æŒåœ¨è¾ƒå°çš„è§„æ¨¡ï¼Œå› ä¸ºå®ƒä»¬ä¸éœ€è¦å®ç°è¯¸å¦‚é‡è¯•ï¼Œé€€å‡ºï¼Œè¶…æ—¶ï¼Œæ–­è·¯å™¨ï¼Œè·Ÿè¸ªï¼Œç›‘è§†ä¹‹ç±»çš„â€œå±‚â€ ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å…ˆè¿›çš„æµ‹è¯•å’Œéƒ¨ç½²æŠ€æœ¯ï¼šA / Bæµ‹è¯•ï¼Œé•œåƒå’ŒCanaryæ¨å‡ºã€‚ <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/bs/x7/sc/bsx7sci6cfghlpg8_crfjyutiuk.png"><br><br> åœ¨æ–°ææ–™ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å®ç°å•†ä¸šä»·å€¼çš„æœ€åå‡ å±‚ï¼šèº«ä»½éªŒè¯å’Œæˆæƒ-åœ¨Istioä¸­ï¼Œè¿™æ˜¯ä¸€ç§çœŸæ­£çš„ä¹è¶£ï¼ <br><br><h2>  Istioä¸­çš„èº«ä»½éªŒè¯å’Œæˆæƒ </h2><br> æˆ‘æ°¸è¿œéƒ½ä¸ä¼šç›¸ä¿¡èº«ä»½éªŒè¯å’Œæˆæƒä¼šå¯å‘æˆ‘ã€‚  Istioèƒ½æä¾›ä»€ä¹ˆæŠ€æœ¯æ¥ä½¿è¿™äº›è¯é¢˜å˜å¾—æœ‰è¶£ï¼Œç”šè‡³å¯ä»¥æ¿€å‘æ‚¨çš„çµæ„Ÿï¼Ÿ <br><br> ç­”æ¡ˆå¾ˆç®€å•ï¼šIstioå°†è¿™äº›åŠŸèƒ½çš„è´£ä»»ä»æ‚¨çš„æœåŠ¡è½¬ç§»åˆ°Envoyä»£ç†ã€‚ åœ¨è¯·æ±‚åˆ°è¾¾æœåŠ¡æ—¶ï¼Œå®ƒä»¬å·²ç»é€šè¿‡èº«ä»½éªŒè¯å’Œæˆæƒï¼Œå› æ­¤æ‚¨åªéœ€è¦ç¼–å†™å¯¹ä¸šåŠ¡æœ‰ç”¨çš„ä»£ç ã€‚ <br><br> å¬èµ·æ¥ä¸é”™å—ï¼Ÿ è®©æˆ‘ä»¬çœ‹çœ‹é‡Œé¢ï¼ <br><br><h2> ä½¿ç”¨Auth0è¿›è¡Œèº«ä»½éªŒè¯ </h2><br> æˆ‘ä»¬å°†ä½¿ç”¨Auth0ä½œä¸ºèº«ä»½å’Œè®¿é—®ç®¡ç†æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å…·æœ‰ä¸€ä¸ªè¯•ç”¨ç‰ˆï¼Œä½¿ç”¨ç›´è§‚ï¼Œæˆ‘å¾ˆå–œæ¬¢ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥å°†ç›¸åŒçš„åŸç†åº”ç”¨äºä»»ä½•å…¶ä»–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenID Connectå®ç°</a> ï¼šKeyCloakï¼ŒIdentityServerç­‰ã€‚ <br><br> é¦–å…ˆï¼Œä½¿ç”¨æ‚¨çš„å¸æˆ·è½¬åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Auth0é—¨æˆ·</a> ï¼Œåˆ›å»ºä¸€ä¸ªç§Ÿæˆ·<i>ï¼ˆç§Ÿæˆ·-â€œç§Ÿæˆ·â€ï¼Œé€»è¾‘éš”ç¦»å•å…ƒï¼Œæœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a> -Translã€‚ï¼‰</i>ç„¶åè½¬åˆ°<i>Applications&gt; Default App</i> ï¼Œé€‰æ‹©<i>Domain</i> ï¼Œå¦‚ä¸‹é¢çš„å±å¹•å¿«ç…§æ‰€ç¤ºã€‚ ï¼š <br><br><img src="https://habrastorage.org/webt/1z/x1/ir/1zx1irb-9tqksk6gd8eb0feubdm.png"><br><br> åœ¨<code>resource-manifests/istio/security/auth-policy.yaml</code> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æº</a> ï¼‰ä¸­æŒ‡å®šæ­¤åŸŸï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: authentication.istio.io/v1alpha1 kind: Policy metadata: name: auth-policy spec: targets: - name: sa-web-app - name: sa-feedback origins: - jwt: issuer: "https://{YOUR_DOMAIN}/" jwksUri: "https://{YOUR_DOMAIN}/.well-known/jwks.json" principalBinding: USE_ORIGIN</code> </pre> <br> æœ‰äº†è¿™æ ·çš„èµ„æºï¼ŒPilot <i>ï¼ˆIstioä¸­Control Planeçš„ä¸‰ä¸ªåŸºæœ¬ç»„ä»¶ä¹‹ä¸€-å¤§çº¦ç¿»è¯‘ï¼‰å°†Envoy</i>é…ç½®ä¸ºåœ¨å°†è¯·æ±‚é‡å®šå‘åˆ°æœåŠ¡ä¹‹å‰å¯¹è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯ï¼š <b><code>sa-web-app</code></b>å’Œ<b><code>sa-feedback</code></b> ã€‚ åŒæ—¶ï¼Œè¯¥é…ç½®ä¸é€‚ç”¨äº<b><code>sa-frontend</code></b> ï¼Œä½¿æˆ‘ä»¬å¯ä»¥ä½¿å‰ç«¯æœªç»èº«ä»½éªŒè¯ã€‚ è¦åº”ç”¨ç­–ç•¥ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">$ kubectl apply -f resource-manifests/istio/security/auth-policy.yaml policy.authentication.istio.io â€œauth-policyâ€ created</code> </pre> <br> è¿”å›é¡µé¢å¹¶è¿›è¡Œè¯·æ±‚-æ‚¨å°†çœ‹åˆ°å®ƒä»¥<i>401æœªç»æˆæƒ</i>çŠ¶æ€ç»“æŸã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†å‰ç«¯ç”¨æˆ·é‡å®šå‘åˆ°ä½¿ç”¨Auth0è¿›è¡Œèº«ä»½éªŒè¯ã€‚ <br><br><h2> ä½¿ç”¨Auth0è¿›è¡Œèº«ä»½éªŒè¯ </h2><br> è¦éªŒè¯æœ€ç»ˆç”¨æˆ·çš„è¯·æ±‚ï¼Œæ‚¨éœ€è¦åœ¨Auth0ä¸­åˆ›å»ºä¸€ä¸ªAPIï¼Œè¯¥APIä»£è¡¨å·²éªŒè¯çš„æœåŠ¡ï¼ˆè¯„è®ºï¼Œè¯¦ç»†ä¿¡æ¯å’Œç­‰çº§ï¼‰ã€‚ è¦åˆ›å»ºAPIï¼Œè¯·è½¬åˆ°<i>Auth0é—¨æˆ·&gt; API&gt;åˆ›å»ºAPI</i>å¹¶å¡«å†™ä»¥ä¸‹è¡¨æ ¼ï¼š <br><br><img src="https://habrastorage.org/webt/96/_g/b5/96_gb5wcteuxtvt-yakzlsu4a4g.png"><br><br> è¿™é‡Œçš„é‡è¦ä¿¡æ¯æ˜¯<i>æ ‡è¯†ç¬¦</i> ï¼Œæˆ‘ä»¬å°†åœ¨è„šæœ¬çš„åé¢éƒ¨åˆ†ä½¿ç”¨å®ƒã€‚ è®©æˆ‘ä»¬è¿™æ ·å†™å‡ºæ¥ï¼š <br><br><ul><li>  <b>å—ä¼—ç¾¤ä½“</b> ï¼š{YOUR_AUDIENCE} </li></ul><br> æˆ‘ä»¬éœ€è¦çš„å…¶ä½™è¯¦ç»†ä¿¡æ¯ä½äºâ€œ <i>åº”ç”¨ç¨‹åºâ€</i>éƒ¨åˆ†çš„Auth0é—¨æˆ·ä¸Š-é€‰æ‹©â€œ <i>æµ‹è¯•åº”ç”¨ç¨‹åºâ€</i> ï¼ˆä½¿ç”¨APIâ€‹â€‹è‡ªåŠ¨åˆ›å»ºï¼‰ã€‚ <br><br> åœ¨è¿™é‡Œæˆ‘ä»¬å†™ï¼š <br><br><ul><li>  <b>åŸŸ</b> ï¼š{YOUR_DOMAIN} </li><li>  <b>å®¢æˆ·ç¼–å·</b> ï¼š{YOUR_CLIENT_ID} </li></ul><br> åœ¨â€œ <i>æµ‹è¯•åº”ç”¨ç¨‹åºâ€ä¸­</i> ï¼Œæ»šåŠ¨åˆ°â€œ <i>å…è®¸çš„å›è°ƒURLâ€</i>æ–‡æœ¬æ¡†ï¼ˆå›è°ƒçš„å…è®¸çš„URLï¼‰ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬æŒ‡ç¤ºèº«ä»½éªŒè¯å®Œæˆååº”å°†å‘¼å«å‘é€åˆ°çš„URLã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ï¼š <br><br><pre> <code class="plaintext hljs">http://{EXTERNAL_IP}/callback</code> </pre> <br> å¯¹äº<i>å…è®¸çš„æ³¨é”€URL</i> ï¼ˆå…è®¸<i>æ³¨é”€çš„URL</i> ï¼‰ï¼Œæ·»åŠ ï¼š <br><br><pre> <code class="plaintext hljs">http://{EXTERNAL_IP}/logout</code> </pre> <br> è®©æˆ‘ä»¬ç»§ç»­å‰è¿›åˆ°å‰ç«¯ã€‚ <br><br><h2> å‰ç«¯æ›´æ–° </h2><br> åˆ‡æ¢åˆ°<code>[istio-mastery]</code>å­˜å‚¨åº“çš„<code>auth0</code>åˆ†æ”¯ã€‚ åœ¨æ­¤çº¿ç¨‹ä¸­ï¼Œæ›´æ”¹äº†å‰ç«¯ä»£ç ï¼Œä»¥å°†ç”¨æˆ·é‡å®šå‘åˆ°Auth0è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶åœ¨å¯¹å…¶ä»–æœåŠ¡çš„è¯·æ±‚ä¸­ä½¿ç”¨JWTä»¤ç‰Œã€‚ åè€…çš„å®ç°å¦‚ä¸‹ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">App.js</a> ï¼‰ï¼š <br><br><pre> <code class="javascript hljs">analyzeSentence() { fetch(<span class="hljs-string"><span class="hljs-string">'/sentiment'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-attr"><span class="hljs-attr">headers</span></span>: { <span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'Authorization'</span></span>: <span class="hljs-string"><span class="hljs-string">`Bearer </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${auth.getAccessToken()}</span></span></span><span class="hljs-string">`</span></span> <span class="hljs-comment"><span class="hljs-comment">// Access Token }, body: JSON.stringify({ sentence: this.textField.getValue() }) }) .then(response =&gt; response.json()) .then(data =&gt; this.setState(data)); }</span></span></code> </pre> <br> è¦å°†å‰ç«¯è½¬æ¢ä¸ºä½¿ç”¨Auth0ä¸­çš„ç§Ÿæˆ·æ•°æ®ï¼Œè¯·æ‰“å¼€<code>sa-frontend/src/services/Auth.js</code>å¹¶æ›¿æ¢ä¸Šé¢æˆ‘ä»¬åœ¨å…¶ä¸­å†™å…¥çš„å€¼ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Auth.js</a> ï¼‰ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Config = { <span class="hljs-attr"><span class="hljs-attr">clientID</span></span>: <span class="hljs-string"><span class="hljs-string">'{YOUR_CLIENT_ID}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">domain</span></span>:<span class="hljs-string"><span class="hljs-string">'{YOUR_DOMAIN}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">audience</span></span>: <span class="hljs-string"><span class="hljs-string">'{YOUR_AUDIENCE}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">ingressIP</span></span>: <span class="hljs-string"><span class="hljs-string">'{EXTERNAL_IP}'</span></span> <span class="hljs-comment"><span class="hljs-comment">//      }</span></span></code> </pre> <br> è¯¥åº”ç”¨ç¨‹åºå·²å‡†å¤‡å°±ç»ªã€‚ åœ¨æ„å»ºå’Œéƒ¨ç½²æ‰€åšæ›´æ”¹æ—¶ï¼Œåœ¨ä»¥ä¸‹å‘½ä»¤ä¸­æŒ‡ç¤ºæ‚¨çš„Docker IDï¼š <br><br><pre> <code class="bash hljs">$ docker build -f sa-frontend/Dockerfile \ -t <span class="hljs-variable"><span class="hljs-variable">$DOCKER_USER_ID</span></span>/sentiment-analysis-frontend:istio-auth0 \ sa-frontend $ docker push <span class="hljs-variable"><span class="hljs-variable">$DOCKER_USER_ID</span></span>/sentiment-analysis-frontend:istio-auth0 $ kubectl <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> image deployment/sa-frontend \ sa-frontend=<span class="hljs-variable"><span class="hljs-variable">$DOCKER_USER_ID</span></span>/sentiment-analysis-frontend:istio-auth0</code> </pre> <br> è¯•è¯•è¿™ä¸ªåº”ç”¨ç¨‹åºï¼ æ‚¨å°†è¢«é‡å®šå‘åˆ°Auth0ï¼Œæ‚¨éœ€è¦åœ¨è¯¥å¤„ç™»å½•ï¼ˆæˆ–æ³¨å†Œï¼‰ï¼Œä¹‹åæ‚¨å°†è¢«å‘é€å›å·²è¿›è¡Œèº«ä»½éªŒè¯è¯·æ±‚çš„é¡µé¢ã€‚ å¦‚æœå°è¯•æœ¬æ–‡ç¬¬ä¸€éƒ¨åˆ†ä¸­æåˆ°çš„curlå‘½ä»¤ï¼Œæ‚¨å°†æ”¶åˆ°<i>401çŠ¶æ€ç </i> ï¼Œè¡¨æ˜è¯¥è¯·æ±‚æœªè¢«æˆæƒã€‚ <br><br> è®©æˆ‘ä»¬è¿ˆå‡ºä¸‹ä¸€æ­¥-æˆæƒè¯·æ±‚ã€‚ <br><br><h2> ä½¿ç”¨Auth0æˆæƒ </h2><br> èº«ä»½éªŒè¯ä½¿æˆ‘ä»¬èƒ½å¤Ÿäº†è§£ç”¨æˆ·æ˜¯è°ï¼Œä½†æ˜¯ä¸ºäº†æ‰¾å‡ºç”¨æˆ·å¯ä»¥è®¿é—®çš„å†…å®¹ï¼Œéœ€è¦æˆæƒã€‚  Istioä¹Ÿä¸ºæ­¤æä¾›å·¥å…·ã€‚ <br><br> ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªç”¨æˆ·ç»„ï¼ˆè¯·å‚è§ä¸‹å›¾ï¼‰ï¼š <br><br><ul><li>  <b>ç”¨æˆ·</b> <i>ï¼ˆç”¨æˆ·ï¼‰</i> -åªèƒ½è®¿é—®SA-WebAppå’ŒSA-FrontendæœåŠ¡ï¼› </li><li>  <b>ä¸»æŒäºº</b> -å¯ä»¥è®¿é—®æ‰€æœ‰ä¸‰é¡¹æœåŠ¡ã€‚ </li></ul><br><img src="https://habrastorage.org/webt/01/i-/dc/01i-dccinr9i1aq81atcf_qze90.png"><br>  <i>æˆæƒæ¦‚å¿µ</i> <br><br> è¦åˆ›å»ºè¿™äº›ç»„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Auth0æˆæƒæ‰©å±•ï¼Œå¹¶ä½¿ç”¨Istioä¸ºå®ƒä»¬æä¾›ä¸åŒçš„è®¿é—®çº§åˆ«ã€‚ <br><br><h2>  Auth0æˆæƒçš„å®‰è£…å’Œé…ç½® </h2><br> åœ¨Auth0é—¨æˆ·ä¸Šï¼Œè½¬åˆ°â€œ <i>æ‰©å±•â€</i>å¹¶å®‰è£…<i>Auth0 Authorization</i> ã€‚ å®‰è£…å®Œæˆåï¼Œè¯·è½¬åˆ°â€œ <i>æˆæƒæ‰©å±•â€</i> ï¼Œç„¶åé€šè¿‡å•å‡»å³ä¸Šè§’å¹¶é€‰æ‹©é€‚å½“çš„èœå•é€‰é¡¹<i>ï¼ˆâ€œé…ç½®â€ï¼‰</i>è¿›å…¥ç§Ÿæˆ·çš„é…ç½®ã€‚ æ¿€æ´»<i>ç»„</i> ï¼Œç„¶åå•å‡»<i>å‘å¸ƒè§„åˆ™</i>æŒ‰é’®ã€‚ <br><br><img src="https://habrastorage.org/webt/qo/tz/5n/qotz5nt8hpt0jcoyjav3rhkrn9g.png"><br><br><h2> ç»„åˆ›å»º </h2><br> åœ¨æˆæƒæ‰©å±•ä¸­ï¼Œè½¬åˆ°â€œ <i>ç»„â€</i>å¹¶åˆ›å»ºä¸€ä¸ªâ€œ <i>ä¸»æŒäººâ€</i>ç»„ã€‚ ç”±äºæˆ‘ä»¬å°†æ‰€æœ‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·è§†ä¸ºæ™®é€šç”¨æˆ·ï¼Œå› æ­¤æ— éœ€ä¸ºä»–ä»¬åˆ›å»ºå…¶ä»–ç»„ã€‚ <br><br> é€‰æ‹©<i>ä¸»æŒäºº</i>ç»„ï¼Œå•å‡»<i>æ·»åŠ æˆå‘˜</i> ï¼Œæ·»åŠ æ‚¨çš„ä¸»å¸æˆ·ã€‚ ä½¿æŸäº›ç”¨æˆ·æ²¡æœ‰ä»»ä½•ç»„ï¼Œä»¥ç¡®ä¿æ‹’ç»ä»–ä»¬çš„è®¿é—®ã€‚  ï¼ˆå¯ä»¥é€šè¿‡<i>Auth0 Portal&gt;ç”¨æˆ·&gt;åˆ›å»ºç”¨æˆ·</i>æ‰‹åŠ¨åˆ›å»ºæ–°ç”¨æˆ·ã€‚ï¼‰ <br><br><h2> å°†ç»„å£°æ˜æ·»åŠ åˆ°è®¿é—®ä»¤ç‰Œ </h2><br> å°†ç”¨æˆ·æ·»åŠ åˆ°ç»„ä¸­ï¼Œä½†æ˜¯æ­¤ä¿¡æ¯åº”åæ˜ åœ¨è®¿é—®ä»¤ç‰Œä¸­ã€‚ ä¸ºäº†éµå®ˆOpenID Connectå¹¶åŒæ—¶è¿”å›æˆ‘ä»¬éœ€è¦çš„ç»„ï¼Œä»¤ç‰Œå°†éœ€è¦æ·»åŠ å…¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªå®šä¹‰Claim</a> ã€‚ å®ƒé€šè¿‡Auth0çš„è§„åˆ™å®ç°ã€‚ <br><br> è¦åˆ›å»ºè§„åˆ™ï¼Œè¯·è½¬åˆ°Auth0é—¨æˆ·ç½‘ç«™<i>è§„åˆ™</i> ï¼Œå•å‡»<i>åˆ›å»º</i> <i>è§„åˆ™</i> ï¼Œç„¶åä»æ¨¡æ¿ä¸­é€‰æ‹©ä¸€ä¸ªç©ºè§„åˆ™ã€‚ <br><br><img src="https://habrastorage.org/webt/k0/v6/di/k0v6diyfaeiftxaknnbfbnvfxq0.png"><br><br> å¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºæ–°çš„â€œ <i>æ·»åŠ ç»„å£°æ˜â€</i>è§„åˆ™ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">namespacedGroup.js</a> ï¼‰ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user, context, callback</span></span></span><span class="hljs-function">) </span></span>{ context.accessToken[<span class="hljs-string"><span class="hljs-string">'https://sa.io/group'</span></span>] = user.groups[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user, context); }</code> </pre> <br>  <b>æ³¨æ„</b> ï¼šæ­¤ä»£ç é‡‡ç”¨æˆæƒæ‰©å±•ä¸­å®šä¹‰çš„ç¬¬ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œå¹¶å°†å…¶ä½œä¸ºè‡ªå®šä¹‰å£°æ˜ï¼ˆæ ¹æ®Auth0çš„è¦æ±‚ï¼Œåœ¨å…¶å‘½åç©ºé—´ä¸‹ï¼‰æ·»åŠ åˆ°è®¿é—®ä»¤ç‰Œä¸­ã€‚ <br><br> è¿”å›â€œ <i>è§„åˆ™â€</i>é¡µé¢ï¼Œå¹¶éªŒè¯æ‚¨æ˜¯å¦æŒ‰ç…§ä»¥ä¸‹é¡ºåºç¼–å†™äº†ä¸¤ä¸ªè§„åˆ™ï¼š <br><br><ul><li>  auth0-æˆæƒæ‰©å±• </li><li> æ·»åŠ ç¾¤ç»„å£°æ˜ </li></ul><br> è¯¥é¡ºåºå¾ˆé‡è¦ï¼Œå› ä¸ºç»„å­—æ®µå¼‚æ­¥æ¥æ”¶<i>auth0-authorization-extension</i>è§„åˆ™ï¼Œç„¶åç”±ç¬¬äºŒä¸ªè§„åˆ™ä½œä¸ºå£°æ˜æ·»åŠ ã€‚ ç»“æœæ˜¯è¿™æ ·çš„è®¿é—®ä»¤ç‰Œï¼š <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"https://sa.io/group"</span></span>: <span class="hljs-string"><span class="hljs-string">"Moderators"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iss"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://sentiment-analysis.eu.auth0.com/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sub"</span></span>: <span class="hljs-string"><span class="hljs-string">"google-oauth2|196405271625531691872"</span></span> // [  ] }</code> </pre> <br> ç°åœ¨ï¼Œæ‚¨éœ€è¦é…ç½®Envoyä»£ç†æ¥æ£€æŸ¥ç”¨æˆ·è®¿é—®æƒé™ï¼Œä¸ºæ­¤ç”¨æˆ·å°†ä»è¯·æ±‚çš„è®¿é—®ä»¤ç‰Œï¼ˆ <code>https://sa.io/group</code> ï¼‰ä¸­æ‹‰å‡ºè¯¥ç»„ã€‚ è¿™æ˜¯æœ¬æ–‡ä¸‹ä¸€éƒ¨åˆ†çš„ä¸»é¢˜ã€‚ <br><br><h2>  Istioæˆæƒé…ç½® </h2><br> ä¸ºä½¿æˆæƒç”Ÿæ•ˆï¼Œæ‚¨å¿…é¡»ä¸ºIstioå¯ç”¨RBACã€‚ ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: "rbac.istio.io/v1alpha1" kind: RbacConfig metadata: name: default spec: mode: 'ON_WITH_INCLUSION' # 1 inclusion: services: # 2 - "sa-frontend.default.svc.cluster.local" - "sa-web-app.default.svc.cluster.local" - "sa-feedback.default.svc.cluster.local"</code> </pre> <br> è¯´æ˜ï¼š <br><ul><li>  1-ä»…å¯¹â€œ <code>Inclusion</code>å­—æ®µä¸­åˆ—å‡ºçš„æœåŠ¡å’Œåç§°ç©ºé—´å¯ç”¨RBACï¼› </li><li>  2-åˆ—å‡ºæˆ‘ä»¬çš„æœåŠ¡åˆ—è¡¨ã€‚ </li></ul><br><br> æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤åº”ç”¨é…ç½®ï¼š <br><br><pre> <code class="bash hljs">$ kubectl apply -f resource-manifests/istio/security/<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-rbac.yaml rbacconfig.rbac.istio.io/default created</code> </pre> <br> ç°åœ¨ï¼Œæ‰€æœ‰æœåŠ¡éƒ½éœ€è¦åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚ æ¢å¥è¯è¯´ï¼Œå¯¹æ‰€æœ‰æœåŠ¡çš„è®¿é—®éƒ½è¢«æ‹’ç»ï¼Œè¿™å°†å¯¼è‡´<code>RBAC: access denied</code>å“åº”<code>RBAC: access denied</code> ã€‚ ç°åœ¨å…è®¸è®¿é—®æˆæƒç”¨æˆ·ã€‚ <br><br><h2> æ™®é€šç”¨æˆ·çš„è®¿é—®é…ç½® </h2><br> æ‰€æœ‰ç”¨æˆ·éƒ½å¿…é¡»æœ‰æƒè®¿é—®SA-Frontendå’ŒSA-WebAppæœåŠ¡ã€‚ ä½¿ç”¨ä»¥ä¸‹Istioèµ„æºå®ç°ï¼š <br><br><ul><li>  <b>ServiceRole-</b>å®šä¹‰ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ï¼› </li><li>  <b>ServiceRoleBinding-</b>ç¡®å®šæ­¤ServiceRoleå±äºè°ã€‚ </li></ul><br> å¯¹äºæ™®é€šç”¨æˆ·ï¼Œå…è®¸è®¿é—®æŸäº›æœåŠ¡ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">servicerole.yaml</a> ï¼‰ï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: "rbac.istio.io/v1alpha1" kind: ServiceRole metadata: name: regular-user namespace: default spec: rules: - services: - "sa-frontend.default.svc.cluster.local" - "sa-web-app.default.svc.cluster.local" paths: ["*"] methods: ["*"]</code> </pre> <br> é€šè¿‡<code>regular-user-binding</code>å°†ServiceRoleåº”ç”¨äºé¡µé¢çš„æ‰€æœ‰è®¿é—®è€…ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">regular-user-service-role-binding.yaml</a> ï¼‰ï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: "rbac.istio.io/v1alpha1" kind: ServiceRoleBinding metadata: name: regular-user-binding namespace: default spec: subjects: - user: "*" roleRef: kind: ServiceRole name: "regular-user"</code> </pre> <br>  â€œæ‰€æœ‰ç”¨æˆ·â€æ˜¯å¦æ„å‘³ç€æœªç»èº«ä»½éªŒè¯çš„ç”¨æˆ·å°†æœ‰æƒè®¿é—®SA WebAppï¼Ÿ ä¸ä¼šï¼Œè¯¥ç­–ç•¥å°†éªŒè¯JWTä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚ <br><br> åº”ç”¨é…ç½®ï¼š <br><br><pre> <code class="bash hljs">$ kubectl apply -f resource-manifests/istio/security/user-role.yaml servicerole.rbac.istio.io/regular-user created servicerolebinding.rbac.istio.io/regular-user-binding created</code> </pre> <br><h2> ä¸»æŒäººçš„è®¿é—®æƒé™é…ç½® </h2><br> å¯¹äºä¸»æŒäººï¼Œæˆ‘ä»¬å¸Œæœ›å¯ç”¨å¯¹æ‰€æœ‰æœåŠ¡çš„è®¿é—®ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">mod-service-role.yaml</a> ï¼‰ï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: "rbac.istio.io/v1alpha1" kind: ServiceRole metadata: name: mod-user namespace: default spec: rules: - services: ["*"] paths: ["*"] methods: ["*"]</code> </pre> <br> ä½†æ˜¯ï¼Œæˆ‘ä»¬åªå¸Œæœ›å¯¹è®¿é—®ä»¤ç‰Œçš„å£°æ˜ä¸º<code>https://sa.io/group</code>ä¸”å…¶å€¼ä¸º<code>Moderators</code> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">mod-service-role-binding.yaml</a> ï¼‰çš„é‚£äº›ç”¨æˆ·ä½¿ç”¨è¿™äº›æƒé™ï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: "rbac.istio.io/v1alpha1" kind: ServiceRoleBinding metadata: name: mod-user-binding namespace: default spec: subjects: - properties: request.auth.claims[https://sa.io/group]: "Moderators" roleRef: kind: ServiceRole name: "mod-user"</code> </pre> <br> åº”ç”¨é…ç½®ï¼š <br><br><pre> <code class="bash hljs">$ kubectl apply -f resource-manifests/istio/security/mod-role.yaml servicerole.rbac.istio.io/mod-user created servicerolebinding.rbac.istio.io/mod-user-binding created</code> </pre> <br> ç”±äºç‰¹ä½¿ç¼“å­˜ï¼Œæˆæƒè§„åˆ™å¯èƒ½è¦èŠ±å‡ åˆ†é’Ÿçš„æ—¶é—´æ‰èƒ½ç”Ÿæ•ˆã€‚ æ­¤åï¼Œæ‚¨å¯ä»¥ç¡®ä¿ç”¨æˆ·å’Œä¸»æŒäººå…·æœ‰ä¸åŒçš„è®¿é—®çº§åˆ«ã€‚ <br><br><h2> ç»“è®ºéƒ¨åˆ† </h2><br> å¥½å§ï¼Œè®¤çœŸï¼šæ‚¨æ˜¯å¦è§è¿‡ä¸€ç§æ›´ç®€å•ï¼Œè½»æ¾ï¼Œå¯æ‰©å±•ä¸”å®‰å…¨çš„èº«ä»½éªŒè¯å’Œæˆæƒæ–¹æ³•ï¼Ÿ <br><br> ä¸ºäº†å®ç°å¯¹æœ€ç»ˆç”¨æˆ·è®¿é—®æœåŠ¡çš„èº«ä»½éªŒè¯å’Œæˆæƒçš„ç²¾ç»†æ§åˆ¶ï¼Œä»…éœ€è¦ä¸‰ä¸ªIstioèµ„æºï¼ˆRbacConfigï¼ŒServiceRoleå’ŒServiceRoleBindingï¼‰ã€‚ <br><br> æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨ç‰¹ä½¿çš„æœåŠ¡èŒƒå›´å†…ç…§é¡¾äº†è¿™äº›é—®é¢˜ï¼Œä»è€Œå®ç°äº†ï¼š <br><br><ul><li> å‡å°‘å¯èƒ½åŒ…å«å®‰å…¨æ€§é—®é¢˜å’Œé”™è¯¯çš„ç¤ºä¾‹ä»£ç æ•°é‡ï¼› </li><li> å‡å°‘æ„šè ¢çš„æƒ…å†µï¼Œå…¶ä¸­ä¸€ä¸ªç«¯ç‚¹åŸæ¥å¯ä»¥ä»å¤–éƒ¨è®¿é—®å¹¶ä¸”å¿˜è®°äº†æŠ¥å‘Šï¼› </li><li> æ— éœ€åœ¨æ¯æ¬¡æ·»åŠ æ–°è§’è‰²æˆ–æƒåˆ©æ—¶éƒ½æ›´æ–°æ‰€æœ‰æœåŠ¡ï¼› </li><li> æ–°æœåŠ¡ä¿æŒç®€å•ï¼Œå®‰å…¨å’Œå¿«é€Ÿã€‚ </li></ul><br><h2> ç»“è®º </h2><br>  Istioå…è®¸å›¢é˜Ÿå°†èµ„æºé›†ä¸­åœ¨ä¸šåŠ¡å…³é”®å‹ä»»åŠ¡ä¸Šï¼Œè€Œä¸ä¼šå¢åŠ æœåŠ¡çš„å¼€é”€ï¼Œè€Œä½¿æœåŠ¡è¿”å›å¾®çŠ¶æ€ã€‚ <br><br> æœ¬æ–‡ï¼ˆåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼‰æä¾›äº†åœ¨å®é™…é¡¹ç›®ä¸­å¼€å§‹ä½¿ç”¨Istioçš„åŸºç¡€çŸ¥è¯†å’Œç°æˆçš„å®è·µæŒ‡å¯¼ã€‚ <br><br><h2> è¯‘è€…çš„PS </h2><br> å¦è¯·å‚é˜…æˆ‘ä»¬çš„åšå®¢ï¼š <br><br><ul><li>  â€œä½¿ç”¨Istioè¿”å›å¾®æœåŠ¡â€ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1éƒ¨åˆ†ï¼ˆç†Ÿæ‚‰ä¸»è¦åŠŸèƒ½ï¼‰</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2éƒ¨åˆ†ï¼ˆè·¯ç”±ï¼Œæµé‡ç®¡ç†ï¼‰</a> ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¼ç®¡-Kubernetesçš„è½»é‡çº§æœåŠ¡ç½‘æ ¼</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿä¸ºä»€ä¹ˆï¼ˆå¯¹äºå…·æœ‰å¾®æœåŠ¡çš„äº‘åº”ç”¨ç¨‹åºï¼‰éœ€è¦å®ƒï¼Ÿ</a>  â€ã€‚ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN443668/">https://habr.com/ru/post/zh-CN443668/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN443658/index.html">åœ¨è£¸æœºä¸Šé…ç½®Kubernetes HAé›†ç¾¤ï¼Œç›‘æ§ï¼Œæ—¥å¿—å’Œä½¿ç”¨ç¤ºä¾‹ã€‚ ç¬¬3/3éƒ¨åˆ†</a></li>
<li><a href="../zh-CN443660/index.html">ä¸“å®¶ï¼šâ€œ 3Dæ‰«æä»ªçš„ä»·æ ¼å°†æ¯”ä¼ ç»Ÿè´¨é‡æ§åˆ¶çš„é”™è¯¯ä¾¿å®œ10å€â€</a></li>
<li><a href="../zh-CN443662/index.html">äº†è§£Androidä¸Šçš„å¹²å‡€ä»£ç </a></li>
<li><a href="../zh-CN443664/index.html">æ°”è±¡ç«™Arduino</a></li>
<li><a href="../zh-CN443666/index.html">æˆ‘ä»¬ä¸ºçº¿ç€è‰²çš„æ–¹æ³•</a></li>
<li><a href="../zh-CN443670/index.html">æ–°ç‰ˆæœ¬çš„Google Chromeæµè§ˆå™¨ä¸­å‡ºç°é”™è¯¯ï¼ˆ73.0.3683.75ï¼‰</a></li>
<li><a href="../zh-CN443672/index.html">åŸºäºé£é™©çš„æµ‹è¯•</a></li>
<li><a href="../zh-CN443676/index.html">ä¹™çƒ¯åŸºä»£æ›¿é‚®ç¥¨ï¼šç½•è§çš„ç¨€æœ‰</a></li>
<li><a href="../zh-CN443678/index.html">ä»£ç å¯è¯»æ€§</a></li>
<li><a href="../zh-CN443680/index.html">æ¯å‘¨å››å¤©å·¥ä½œã€‚ ä¿„ç½—æ–¯ç»éªŒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>