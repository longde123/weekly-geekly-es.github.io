<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåô üèéÔ∏è üò≤ Le myst√©rieux programme LyX. Partie 4 üèá ü¶ê ‚òπÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Copi√© de mon blog afin de cr√©er une autre source d'information en russe sur ce sujet. 

 Cet article est la continuation des articles suivants en un s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le myst√©rieux programme LyX. Partie 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485298/">  Copi√© de <a href="https://matematikaandinformatika.blogspot.com/p/blog-page_83.html" rel="nofollow">mon blog</a> afin de cr√©er une autre source d'information en russe sur ce sujet. <br><br>  Cet article est la continuation des articles suivants en un seul cycle: <br><br>  <a href="https://habr.com/ru/post/466423/">article 1</a> <br>  <a href="https://habr.com/ru/post/482550/">article 2</a> <br>  <a href="https://habr.com/ru/post/484282/">article 3</a> <br><br><h3>  LyX: \\. \ Pipe \ lyxpipe </h3><br>  En g√©n√©ral, cette fonction est n√©cessaire pour organiser l'interaction de LyX avec d'autres programmes.  En particulier, il s'av√®re que vous pouvez entrer des commandes via la ligne de commande dans une fen√™tre de programme LyX ouverte!  Tout d'abord, pour que cela fonctionne, dans <b>Outils&gt; Param√®tres&gt; Chemins,</b> dans <i>la zone de</i> texte du <i>canal du serveur LyX</i> , entrez ce qui suit: <br><br><pre><code class="plaintext hljs">\\.\pipe\lyxpipe</code> </pre> <br>  , et ni <code>.in</code> ni <code>.out</code> sont attribu√©s au lyxpipe √† la fin.  Naturellement, cliquez sur <code></code> .  De plus, la fen√™tre du programme LyX, dans laquelle il √©tait n√©cessaire d'entrer des commandes √† partir de la fen√™tre d'invite de commandes, doit √™tre lanc√©e plus t√¥t que cette ligne de commande, √† partir de laquelle les commandes seront entr√©es dans cette fen√™tre du programme LyX, sinon rien ne fonctionnera.  Voici des exemples d'√©criture de commandes sur la ligne de commande pour y parvenir: <br><br><pre> <code class="plaintext hljs">echo LYXCMD:sohranenie:buffer-write&gt; \\.\pipe\lyxpipe.in echo LYXCMD:formula:math-mode:\alpha&gt; \\.\pipe\lyxpipe.in echo LYXCMD:vstgrafiki:inset-apply:graphics filename zdes kujut hip-hop.png&gt; \\.\pipe\lyxpipe.in</code> </pre> <br>  √Ä mon avis, la derni√®re √©quipe m√©rite de l'int√©r√™t.  Cette commande ins√®re une photo <i>zdes kujut hip-hop.png</i> )), situ√©e dans le dossier sp√©cifi√© dans <b>Outils&gt; Param√®tres ...&gt; Chemins</b> d' <i>acc√®s</i> dans la zone de texte <i>R√©pertoire utilisateur</i> de la fen√™tre du programme LyX ouverte (avant d'ouvrir la ligne de commande). <a name="habracut"></a><br><br><h3>  LyX: recherche avant et arri√®re </h3><br>  La fa√ßon dont cela est configur√© est d√©crite <a href="https://tex.stackexchange.com/questions/473572/lyx-2-3-how-can-i-successfully-set-up-the-forward-and-inverse-search" rel="nofollow">ici</a> .  Je vais juste vous dire comment je l'ai fait en russe.  Alors.  Nous utilisons une version non triable de SumatraPDF.  Nous l'avons donc t√©l√©charg√©, install√©.  Ensuite, dans ¬´D√©marrer&gt; Programmes par d√©faut&gt; Mappage de types de fichiers ou de protocoles √† des programmes individuels¬ª, assurez-vous que les fichiers <code>.pdf</code> sont ouverts √† l'aide de SumatraPDF.  Ensuite, nous allons dans le dossier <code>C:\Users\\AppData\Roaming\SumatraPDF</code> .  De l√†, en suivant les conseils sur le lien fourni, copiez le fichier <i>SumatraPDF-settings.txt</i> √† un endroit. <br><br>  Ensuite, il √©tait n√©cessaire d'ajouter en quelque sorte le chemin d'acc√®s au dossier contenant le fichier SumatraPDF qui ouvre le programme (j'ai ce dossier <code>C:\Program Files\SumatraPDF</code> ) dans PATH.  Pour une raison quelconque, j'ai ajout√© cela aux <i>variables d'environnement utilisateur pour IVAN</i> .  De plus, le chemin d'acc√®s au dossier contenant le fichier qui lance le programme LyX (pour moi, c'est <code>C:\Program Files\LyX 2.0\bin</code> ) doit √©galement √™tre contenu dans PATH.  Ensuite, allez dans le dossier <code>C:\Program Files\SumatraPDF</code> , ouvrez le fichier <i>SumatraPDF.exe</i> .  Dans la fen√™tre apparue du programme SumatraPDF, cliquez avec le bouton gauche sur les 3 barres horizontales dans le coin sup√©rieur gauche (ou, peut-√™tre, le coin))), puis, <b>Param√®tres&gt; Param√®tres avanc√©s</b> .  Dans le m√™me temps, le m√™me fichier <i>SumatraPDF-settings.txt</i> s'ouvrira dans le bloc-notes, dont nous avons pr√©c√©demment plac√© une copie dans un endroit isol√©, alors maintenant nous pouvons faire ce que nous voulons avec ce fichier.  Et nous ferons ce qui suit avec lui.  Voici une liste de quelques variables avec leurs valeurs: <br><br><pre> <code class="plaintext hljs">ReuseInstance = true ReloadModifiedDocuments = true InverseSearchCmdLine = lyxeditor.cmd "%f" %l EnableTeXEnhancements = true UseTabs = true</code> </pre><br>  Alors voil√†.  Dans le fichier <i>SumatraPDF-settings.txt</i> , nous v√©rifions la pr√©sence de ces variables (mots √† gauche du signe √©gal), si elles sont l√†, nous v√©rifions la co√Øncidence de la valeur (mots √† droite du signe √©gal) des variables trouv√©es dans ce fichier de la liste ci-dessus avec les valeurs de telles m√™mes variables de cette liste.  Si dans la liste ci-dessus la valeur d'une variable √©tait diff√©rente de la valeur de la variable correspondante dans le fichier, il serait n√©cessaire de refaire la valeur de cette variable de la m√™me mani√®re que dans la liste ci-dessus.  Si une variable de la liste avec sa valeur n'√©tait pas dans le fichier, nous aurions juste besoin de copier la variable avec sa valeur dans le fichier.  Eh bien, personnellement, je n'ai rien chang√© dans ce fichier: toutes les variables r√©pertori√©es dans la liste existaient d√©j√† dans le fichier et toutes ces variables dans le fichier ont re√ßu les valeurs correspondantes r√©pertori√©es dans la liste directement lors de l'installation de SumatraPDF.  Fermez, enregistrez les modifications.  √áa y est, SumatraPDF sera ensuite configur√©.  Nous proc√©dons √† la configuration de LyX.  Donc, ouvrez le programme LyX s'il n'a pas √©t√© ouvert jusqu'√† pr√©sent ou pour une raison quelconque a √©t√© ferm√©.  Acc√©dez √† <b>Outils&gt; Param√®tres ...&gt; Chemins</b> .  Dans <i>le</i> champ de texte du <i>canal du serveur LyX,</i> entrez <br><br><pre> <code class="plaintext hljs">\\.\pipe\lyxpipe</code> </pre> <br>  Ensuite, allez dans <b>Outils&gt; Param√®tres ...&gt; Traitement de fichiers&gt; Convertisseurs</b> .  L√†, dans la zone sous la phrase <i>D√©finitions des convertisseurs,</i> s√©lectionnez <i>LaTeX (pdflatex) -&gt; PDF (pdflatex)</i> avec le bouton gauche de la souris.  Ensuite, nous supprimons son contenu du champ de texte du <i>convertisseur</i> et ins√©rons (enfin, ou entrez √† la main) ce qui suit: <br><br><pre> <code class="plaintext hljs">pdflatex -interaction=nonstopmode -synctex=1 $$i</code> </pre> <br>  Et de la zone de texte en <i>plus,</i> supprimez son contenu.  Cliquez sur le bouton <i>Changer</i> .  <i>Enregistrez</i> ensuite.  Revenez √† <b>Outils&gt; Param√®tres ...&gt; Traitement de fichiers&gt; Convertisseurs</b> .  V√©rifiez si les param√®tres sont enregistr√©s.  Pour moi, lorsque j'y vais en ce moment, lors d'une recherche dans les deux sens, j'entre, apr√®s avoir cliqu√© avec le bouton gauche sur <i>LaTeX (pdflatex) -&gt; PDF (pdflatex)</i> , alors l'emplacement des param√®tres ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/z-/kp/cj/z-kpcjome5wv5rlqqxawtywxizm.jpeg"><br><br>  Ensuite, acc√©dez √† <b>Outils&gt; Param√®tres ..&gt; Sortie&gt; G√©n√©ral</b> .  L√†, dans la zone de texte <i>Commande PDF</i> , entrez la commande suivante: <br><br><pre> <code class="plaintext hljs">SumatraPDF -forward-search "$$t" $$n "$$o"</code> </pre> <br>  , cliquez sur <i>Appliquer</i> .  Ainsi, cet endroit ressemblera √† ceci: <br><br><img src="https://habrastorage.org/webt/ie/_o/fa/ie_ofa-dota4jjaf13n49wzftye.jpeg"><br><br>  Acc√©dez √† <b>Outils&gt; Param√®tres ..&gt; Gestion des fichiers&gt; Formats de fichiers</b> .  L√†, nous allons d√©finir la liste d√©roulante <i>Format</i> en s√©lectionnant la valeur <i>PDF (pdflatex)</i> avec le bouton gauche de la souris, la valeur <i>d√©finie par</i> l' <i>utilisateur</i> dans la liste d√©roulante <i>Visionneuse</i> , et entrez dans la zone de texte √† droite de cette liste <br><br><pre> <code class="plaintext hljs">SumatraPDF</code> </pre> <br>  Il existe actuellement: <br><br><img src="https://habrastorage.org/webt/km/lu/ci/kmlucijdrj323mb-hazjfv02cnm.jpeg"><br><br>  Et enfin, dans le <code>C:\Program Files\LyX 2.0\bin</code> cr√©ez un fichier avec le nom <i>lyxeditor</i> et l'extension <code>.cmd</code> (en fait, il s'agit du m√™me fichier batch) avec le contenu suivant: <br><br><pre> <code class="plaintext hljs"> @echo off SETLOCAL enabledelayedexpansion set file=%1 set row=%2 REM remove quotes from variables set file=!file:"=! set row=!row:"=! %comspec% /q /c (@echo LYXCMD:revdvi:server-goto-file-row:%file% %row%)&gt; \\.\pipe\lyxpipe.in&amp;&amp;type \\.\pipe\lyxpipe.out endlocal</code> </pre><br>  J'ai pris le code de ce fichier batch <a href="https://wiki.lyx.org/LyX/SyncTeX" rel="nofollow">d'ici</a> lorsque j'ai cliqu√© sur le lien de la page en anglais, dont je raconte le contenu ici (le lien vers cette page a √©t√© donn√© par moi ici, uniquement ci-dessus).  Honn√™tement, √† propos de la cr√©ation d'un fichier batch sur une page en anglais, cela a √©t√© dit beaucoup plus t√¥t que cela n'a √©t√© fait pour moi, mais quelle est la diff√©rence?  Soit dit en passant, le code de ce fichier de commandes m'a incit√© √† r√©fl√©chir √† la mani√®re de saisir des commandes sur la ligne de commande afin qu'elles soient saisies √† partir de cette ligne dans la fen√™tre ouverte du programme LyX, qui a servi de base √† la r√©daction du paragraphe <i>LyX: \\. \ Pipe \ lyxpipe de</i> cet article.  Avant cela, j'ai essay√© d'ins√©rer des commandes de la ligne de commande dans la fen√™tre du programme LyX, en prenant ces commandes du manuel, par exemple, j'ai essay√© d'ex√©cuter la commande suivante √† partir de la ligne de commande: <br><br><pre> <code class="plaintext hljs">echo "LYXCMD:test:get-xy:" &gt;~/.lyxpipe.in</code> </pre> <br>  mais rien n'a fonctionn√© pour moi.  Eh bien, et maintenant, revenons √† la recherche li√©e √† LyX.  Comment l'utiliser?  Mais tr√®s simple.  Maintenant, si nous avons fait un aper√ßu du fichier <code>.lyx</code> ouvert, puis lorsque vous cliquez sur <b>Navigation&gt; Recherche avanc√©e</b> pendant une courte p√©riode dans la fen√™tre SumatraPDF correspondante, plusieurs lignes contenant le m√™me mot sont mises en √©vidence en violet (au moins pour moi), √† c√¥t√© du mot correspondant dans la fen√™tre LyX dans curseur clignotant actuellement.  Lorsque vous double-cliquez dans la fen√™tre SumatraPDF, le focus est transf√©r√© dans la fen√™tre LyX et le curseur commence √† clignoter √† cet endroit, tandis que lorsque vous cliquez √† diff√©rents endroits de la fen√™tre SumatraPDF, le curseur commence √† clignoter √† diff√©rents endroits de la fen√™tre LyX.  Je ne peux rien dire de plus pr√©cis sur la relation entre la position du curseur dans LyX et les lignes mises en surbrillance dans SumatraPDF, ainsi que la relation entre la position du double-clic dans SumatraPDF et la place dans la fen√™tre LyX o√π le curseur commence √† clignoter.  Donc, la t√¢che est assez compliqu√©e, alors laissez-moi vous donner une traduction de cette page, dont je raconte le contenu ici, faite par le navigateur Google: soudain, j'ai rat√© quelque chose.  Alors. <br><br><hr><br>  De MyNotes <br>  Mis √† jour pour la derni√®re version 2.3.32019 <br>  Les utilisateurs de MiKTeX sont invit√©s √† mettre √† niveau vers la derni√®re version avant d'installer LyX 2.3.3+ pour Windows.  Si vous avez une installation permanente de <i>SumatraPDF</i> , il vous suffit d‚Äôinstaller <i>-inverse-search ONCE</i> , tout comme l‚Äôutilisation d‚Äôonglets, nous n‚Äôavons pas √† perdre de temps √† d√©cider √† quelle session s‚Äôadresser.  Notez que SumatraPDF peut avoir plusieurs fen√™tres et sessions, mais cela d√©passe le cadre de cette r√©ponse.  InverseSearchCmdLine = stock√© en permanence dans SumatraPDF-settings.txt.  Il ne doit pas √™tre personnalis√© par l'√©diteur, sauf si vous devez r√©installer ou remplacer SumatraPDF-settings.txt (faites une sauvegarde!) <br><br><h4>  Param√®tres dans SumatraPDF </h4><br>  La diff√©rence notable est que nous revenons au fichier cmd Okdale plus stable ( <i>Okular</i> utilise exactement le m√™me syst√®me d'appel que <i>SumatraPDF</i> ), ce qui √©vite les appels inutiles.  <i>SumatraPDF</i> doit √™tre install√© de telle sorte qu'il fonctionne √† partir de n'importe quel appel syst√®me, comme <i>SumatraPDF</i> , ce qui signifie qu'il doit √™tre "en route" (si la version portable est utilis√©e, <i>SumatraPDF.exe</i> doit √™tre temporairement ajout√© au chemin de l'utilisateur jusqu'au premier appel Lyx) Lancez <i>SumatraPDF</i> et acc√©dez √† <b>Param√®tres&gt; Options avanc√©es</b> .  Cela ouvrira le fichier <i>SumatraPDF-settings.txt</i> dans le <i>bloc</i> - <i>notes</i> , maintenant apr√®s avoir v√©rifi√© les entr√©es, v√©rifiez ou modifiez les √©l√©ments suivants. <br><br><pre> <code class="plaintext hljs">ReuseInstance = true ReloadModifiedDocuments = true InverseSearchCmdLine = lyxeditor.cmd "%f" %l EnableTeXEnhancements = true UseTabs = true</code> </pre> <br>  N'oubliez pas que <code>%l</code> est une lettre minuscule L et assurez-vous d'appuyer sur <i>CTRL</i> + <i>S</i> (Enregistrer le fichier).  Si vous devez ajouter <code>c: ... LyX \ bin \</code> √† cette <i>InverseSearchCmdLine</i> , vous avez mal install√© LyX.  Le fichier <code>.cmd</code> se trouve dans le dossier bin, qui DOIT √™tre dans le chemin syst√®me. <br><br><h4>  Param√®tres dans LyX </h4><br>  Suivez les instructions de <a href="https://wiki.lyx.org/LyX/SyncTeX" rel="nofollow">SyncTex</a> sur <a href="https://wiki.lyx.org/LyX/SyncTeX" rel="nofollow">wiki.lyx.org/LyX/SyncTex</a> . <br><br>  "(Remarque: la recherche invers√©e de fichiers .lyx avec des espaces ou d'autres caract√®res sp√©ciaux dans le nom de fichier ne fonctionne pas toujours avec cette approche sur certains syst√®mes Windows)" <br><br>  Mes notes en raison de cette m√©thode unique d'appeler le canal [1] utilis√© par LyX sur Windows, il est parfois n√©cessaire que le fichier de travail et son chemin NE DOIVENT PAS AVOIR D'ESPACE, donc si cela ne fonctionne pas, vous devrez soulever des probl√®mes avec le support LyX .  S'ils fournissent un moyen plus simple d'appeler une session <i>LyXserver</i> active avec le chemin d'acc√®s distant entre guillemets, laissez un commentaire ci-dessous.  Le probl√®me est que <i>LyXserver</i> attend deux valeurs cons√©cutives: <br><br>  1) <i>SyncTeX a</i> fourni le nom de fichier <code>.tex</code> 2) suivi d'un num√©ro de ligne, donc lorsque le nom de fichier contient des espaces, la premi√®re partie peut √™tre invalide en tant que nom de fichier et la deuxi√®me partie n'est clairement pas un nombre, cela peut fonctionner si les noms de fichier sont analys√©s comme l'ancien format 8.3, mais la plupart des fichiers Windows modernes utilisent le format LFN.  Le fichier <i>lyxeditor.cmd</i> essaie de contourner ces probl√®mes.  Diff√©rences notables par rapport √† toute autre approche <i>N'ajoutez pas d'</i> options / directives inutiles et obsol√®tes <i>-reuse-instance</i> ou <i>-inverse-search</i> (elles ne sont pas n√©cessaires et ralentissent la <i>demande</i> correcte <i>-forward-search</i> .) <br><br>  Outils ‚Üí Param√®tres ‚Üí Chemin <br><br><ul><li>  Ajoutez le r√©pertoire o√π se trouve SumatraPDF.exe √† la ligne de pr√©fixe PATH.  (Ce n'est pas n√©cessaire pour une installation permanente, mais peut aider pour une utilisation portable). </li><li>  D√©finissez la ligne LyXServer pipe \\. \ Pipe \ lyxpipe (N'utilisez PAS le bouton Parcourir). </li></ul><br>  Outils ‚Üí Param√®tres ‚Üí Traitement de fichiers ‚Üí Convertisseurs <br><br><ul><li>  Choisissez le format LaTeX (pdflatex) -&gt; PDF (pdflatex) </li><li>  D√©finissez le convertisseur d'entr√©e sur pdflatex -interaction = nonstopmode -synctex = 1 $$ i </li></ul><br><img src="https://habrastorage.org/webt/4r/ls/gj/4rlsgjeapgfczwfhld9ymsji824.png"><br><br><ul><li>  Cliquez sur ¬´Modifier¬ª (sinon, la modification sera annul√©e). </li><li>  Cette modification n√©cessite MikTeX ou TeX Live pour cr√©er le fichier FILE.synctex.gz. </li></ul><br>  Sortez et revenez pour v√©rifier qu'il a bien √©t√© modifi√©, il m'a fallu quelques modifications pour le r√©initialiser et l'√©pingler d'une session √† l'autre. <br><br>  Outils ‚Üí Param√®tres ‚Üí Sortie ‚Üí G√©n√©ral. <br>  Dans la section Recherche directe, d√©finissez la commande d'entr√©e PDF sur SumatraPDF -forward-search "$$ t" $$ n "$$ o" <br><br>  Outils ‚Üí Param√®tres ‚Üí Traitement de fichiers ‚Üí Formats de fichiers <br><br><ul><li>  Choisissez le format PDF (pdflatex) </li><li>  D√©finissez le champ Affichage sur Personnalis√© √† l'aide de la commande SumatraPDF </li><li>  Vous devrez peut-√™tre fermer toutes les fen√™tres SumatraPDF et utiliser Document ‚Üí Afficher. </li><li>  Vous pouvez d√©finir la commande de recherche invers√©e directement dans SumatraPDF en allant dans ¬´Param√®tres ‚Üí Options avanc√©es¬ª comme d√©crit ci-dessus et d√©finir la recherche invers√©e.  Dans ce cas, vous r√©duisez la commande Afficher √† </li></ul><br><pre> <code class="plaintext hljs">SumatraPDF</code> </pre> <br><img src="https://habrastorage.org/webt/uj/5d/hq/uj5dhqgkebeuvnherusk3mypiwk.png"><br><br>  TOUT probl√®me avec cet appel de recherche inverse devrait venir avec le support Lyx, car c'est leur m√©thode recommand√©e, pas la mienne! <br><br>  [1] En principe, l'utilisation de canaux nomm√©s en m√©moire acc√©l√®re et r√©duit la n√©cessit√© d'appeler une application via des options de shell, cependant, comme les m√©thodes DDE ou D-bus, elle n'est pas famili√®re √† la plupart des utilisateurs et peut √™tre probl√©matique pour r√©soudre les probl√®mes. <br><br>  Remarque  Assurez-vous que lyx a le fichier ouvert, le bouton Enable Forward / Reverse est activ√© puis compilez et affichez enfin un clic droit et s√©lectionnez environ 6 options vers le bas <br><br>  Les lieux ne sont pas 1 sur 1 (les pages peuvent sembler ¬´√©teintes¬ª).  Cela peut aider √† voir une recherche directe en d√©finissant SumatraPDF-settings.txt <br><br>  HighlightPermanent = true <br><br>  Pour revenir √† la page correspondante, double-cliquez simplement n'importe o√π dans SumatraPDF pour appeler lyxeditor.cmd. <br><hr><br>  Comme vous pouvez le voir, il y a encore quelques nuances qui ne sont pas mentionn√©es par moi.  Cependant, quand j'ai tout mis en place, je n'avais tout simplement pas besoin de ces nuances. <br><br><h3>  LyX;  utilisation des fichiers .bat </h3><br>  Malgr√© le manque √† premi√®re vue apparemment de la capacit√© d'ajouter de nouveaux formats d'exportation √† LyX (pour autant que je sache, par exemple, dans TeXworks, un analogue d'une telle possibilit√© d'ajout est la possibilit√© de cr√©er un nouvel outil de mise en page), ce programme a une telle opportunit√©.  Pour commencer, essayons de cr√©er le format d'exportation suivant, qui √† premi√®re vue semble indulgent.  Les variables PATH suivantes sont d√©finies dans le programme LyX: <br><br><pre> <code class="plaintext hljs">$$s The LyX system directory (eg /usr/share/lyx). $$i The input file $$o The output file $$b The base name (without filename extension) in the LyX temporary directory $$p The full directory path of the LyX temporary directory $$r The full pathname to the original LyX file being processed $$f The filename (without any directory path) of the LyX file. $$l The `LaTeX name'</code> </pre><br>  il s'agit d'un extrait d'une partie du manuel du programme LyX.  Nous n'allons pas traduire les explications des significations, les significations de ces variables, mais plut√¥t essayer de cr√©er un nouveau format d'exportation (avec l'apparition d'un nouveau bouton dans <b>Fichier&gt; Exporter vers</b> , y compris en cliquant sur lequel nous pouvons exporter ce fichier <code>.lyx</code> vers ce format , √† partir de la fen√™tre dont ce clic a √©t√© effectu√©), lors de l'exportation vers laquelle dans le r√©pertoire temporaire (dans lequel, par exemple, lors de l'exportation au <i>format PDF {pdflatex}</i> , des fichiers sont g√©n√©r√©s, en plus du <code>.pdf</code> cr√©√©), le fichier <i>puti.txt</i> sera cr√©√© dans lequel ( tous) les valeurs de ces variables  .  Pour ce faire, dans le dossier qui a √©t√© ajout√© √† PATH, cr√©ez un fichier <i>puti.bat avec le</i> contenu suivant: <br><br><pre> <code class="plaintext hljs">chcp 1251 cd /d %0\.. echo %1 &gt;puti.txt echo %2 &gt;&gt;puti.txt echo %3 &gt;&gt;puti.txt echo %4 &gt;&gt;puti.txt echo %5 &gt;&gt;puti.txt echo %6 &gt;&gt;puti.txt echo %7 &gt;&gt;puti.txt echo %8 &gt;&gt;puti.txt echo %1/%~2 &gt;&gt;puti.txt</code> </pre><br>  Ensuite, dans le fichier <code>C:\Users\\AppData\Roaming\LyX2.0\lyxrc.defaults</code> nous sommes l√† o√π les lignes <br><br><pre> <code class="plaintext hljs">.................................... \Format pdf4 pdf "PDF (XeTeX)" X "pdfview" "" "document,vector,menu=export" \Format pdf5 pdf "PDF (LuaTeX)" u "pdfview" "" "document,vector,menu=export"</code> </pre><br>  ajouter une telle ligne <br><br><pre> <code class="plaintext hljs">\Format pdf6 txt "puti" F "pdfview" "" "document,vector,menu=export"</code> </pre><br>  Ici, le mot <i>puti</i> ne <i>sp√©cifie</i> pas <i>le</i> fichier avec le code, qui est le moteur du format d'exportation cr√©√©, mais sous quel nom le bouton pour appeler ce format d'exportation vers <b>Fichier&gt; Exporter vers</b> sera affich√©, et o√π <br><br><pre> <code class="plaintext hljs">.................................... \converter pdflatex pdf2 "pdflatex $$i" "latex=pdflatex" \converter xetex pdf4 "xelatex $$i" "latex=xelatex" \converter luatex pdf5 "lualatex" "latex=lualatex"</code> </pre><br>  apr√®s la ligne d√©finissant le format pdf5, nous ajoutons la ligne suivante: <br><br><pre> <code class="plaintext hljs">\converter pdflatex pdf6 "puti.bat $$b $$f $$i $$l $$o $$p $$r $$s" ""</code> </pre> <br>  Et ici, le mot <i>puti</i> d√©finit un fichier avec du code, qui est le moteur du format d'exportation cr√©√©.  Et √† cet endroit du fichier <i>lyxrc.defaults</i> , vous devez d√©j√† sp√©cifier l'extension de ce fichier avec le code (dans ce cas <code>.bat</code> ), sinon √ßa ne marchera pas! .. Et puis, comme vous pouvez le deviner, les param√®tres sont indiqu√©s, d'une part, avec lesquels ce fichier avec le code est lanc√© lors du d√©marrage de l'exportation vers le format cr√©√©, et, d'autre part, ces param√®tres sont appel√©s sous la forme connue du programme LyX, et donc lorsque vous appelez ce fichier avec le code du fichier ouvert dans LyX, LyX avant l'ouverture fichier avec le code du programme correspondant avec les param√®tres, certains et  √† partir de laquelle ils sont form√©s √† partir de parties du chemin d'acc√®s complet au fichier export√©, et d'autres √† partir de chemins d'acc√®s complets √† certains dossiers importants du syst√®me, il remplace ces param√®tres, nomm√©s sous cette forme par des valeurs presque r√©elles, pour ainsi dire, qui sont presque adapt√©es √† une utilisation dans la commande ligne.  Pourquoi "presque" deviendra clair plus tard.  C'est tout, <i>vous</i> n'avez rien d'autre √† faire dans le fichier <i>lyxrc.defaults</i> : ni ajouter, ni l√†, de nouveaux <i>\ editor_alternatives</i> ou <i>\ viewer_alternatives</i> , ou quoi que ce soit d'autre ... Ensuite, apr√®s avoir enregistr√© le fichier <i>lyxrc.defaults</i> modifi√© de cette mani√®re et red√©marr√© Programmes LyX dans <b>Fichier&gt; Exporter vers</b> , un nouveau bouton appara√Æt: <br><br><img src="https://habrastorage.org/webt/ha/g1/mv/hag1mvk10k_q8ql6nvpeb4zbpms.jpeg"><br><br>  Avant de cliquer dessus, cliquez sur <b>Afficher&gt; Afficher les messages</b> (lorsque j'utilisais LyX install√© √† partir d'un fichier ex√©cutable t√©l√©charg√© √† partir d'une autre source, ce bouton s'appelait <i>Afficher les messages</i> , car cette copie du programme utilisait un fichier de localisation diff√©rent <code>.mo</code> ), tandis que g√©n√©ralement au bas de la fen√™tre du programme LyX appara√Æt une zone appel√©e <i>Progress / Debug Messages</i> .  Vous pouvez maintenant cliquer sur le bouton que nous avons cr√©√©.  Dans le m√™me temps, dans la zone <i>Messages de progression / d√©bogage</i> , les informations sur le processus d'exportation commencent √† clignoter, d√©filant vers le bas.  Apr√®s la fin d'un tel scintillement, nous recherchons le chemin d'acc√®s au dossier temporaire dans lequel sont plac√©s les fichiers qui apparaissent en cours de route, en plus du fichier du type que vous souhaitez recevoir dans le m√™me dossier avec le fichier <code>.lyx</code> export√©.  Tous ces chemins sont plus ou moins similaires les uns aux autres, il ne peut donc y avoir d'erreur.  Par exemple, voici l'une de ces fa√ßons: <br><br><pre> <code class="plaintext hljs">D:\1-kat-LyX\lyx_tmpdir.gq2748\lyx_tmpbuf2</code> </pre><br>  Acc√©dez √† ce dossier.  Il y aura, entre autres, le fichier <i>puti.txt</i> , que nous avons d√©fini comme sortie pour ce format d'exportation.  En l'ouvrant, nous verrons quelque chose comme ceci: <br><br><pre> <code class="plaintext hljs">D:/1-kat-LyX/lyx_tmpdir.gq2748/lyx_tmpbuf2/newfile2 newfile2.lyx newfile2.tex $$l newfile2.txt D:/1-kat-LyX/lyx_tmpdir.gq2748/lyx_tmpbuf2/ C:/DocLyX/ $$s D:/1-kat-LyX/lyx_tmpdir.gq2748/lyx_tmpbuf2/newfile2/newfile2.lyx</code> </pre><br>  Un fichier d'un tel contenu a √©t√© form√© lors de l'exportation vers le format d'exportation de fichier que j'ai cr√©√© <code>C:\DocLyX\newfile2.lyx</code> .  Comme vous pouvez le voir, m√™me tous les param√®tres n'ont pas √©t√© d√©velopp√©s dans leurs valeurs, ce qui, cependant, n'interf√®re pas avec la cr√©ation de certains autres formats d'exportation que j'ai con√ßus.  Cependant, un tel probl√®me est d√©couvert ici, consistant en une compatibilit√© "presque" avec la ligne de commande, que j'ai mentionn√©e ci-dessus.  A savoir: le s√©parateur dans les chemins ainsi obtenus dans le fichier de sortie <code>.txt</code> est le signe <code>/</code> au lieu du traditionnel, au moins pour Windows, <code>\</code> , donc afin de pouvoir utiliser le chemin obtenu de cette mani√®re, vous avez tr√®s probablement besoin de d√©poser avec le code qui est cens√© √™tre utilis√© comme moteur pour le format d'exportation cr√©√©, incluez la section pour remplacer <code>/</code> par <code>\</code> .  Nous garderons cela √† l'esprit √† l'avenir.  En comparant l'ordre dans lequel les param√®tres sont r√©pertori√©s dans le fichier <i>lyxrc.defaults</i> avec lequel je le force √† d√©marrer (et il peut √™tre lanc√©))) le fichier <i>puti.bat, le</i> fichier <i>puti.bat lui-m√™me</i> avec le contenu du fichier <i>puti.txt</i> , je conclus que pour cr√©er d'autres  ,  ,  ,  ,       ,  LyX.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il s'agit de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$$ i</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - une variable qui, apr√®s substitution, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">affiche dans le</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fichier </font><i><font style="vertical-align: inherit;">puti.txt</font></i><font style="vertical-align: inherit;"> le </font><font style="vertical-align: inherit;">nom du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.tex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que j'ai besoin d'obtenir du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.lyx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en cours d' </font><i><font style="vertical-align: inherit;">√©dition</font></i><font style="vertical-align: inherit;"> , de sorte qu'imm√©diatement apr√®s cette r√©ception, il y a quelque chose que le traitement le fichier de l'arsenal du programme MiKTeX install√© et configur√©, que j'ai d√©crit pour le format d'exportation que je cr√©e - en totale conformit√© avec le processus d'exportation vers les formats initialement disponibles aupr√®s des auteurs du programme. En tant que tel fichier de traitement, vous pouvez utiliser le fichier que j'ai cr√©√© avec le code d'une extension. Et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$$ r</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est le chemin d'acc√®s au dossier avec ce fichier </font><i><font style="vertical-align: inherit;">.lyx</font></i><font style="vertical-align: inherit;"> l√©g√®rement modifi√© dans sa sp√©cificit√© du programme LyX</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en exportant vers mon format, au d√©but de cette exportation j'obtiendrai le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.tex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dont je viens de parler. Comme vous pouvez le voir sur la photo du menu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Export</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que j'ai </font><font style="vertical-align: inherit;">modifi√© </font><font style="vertical-align: inherit;">, je ne me suis pas limit√© √† cr√©er un nouveau format d'exportation </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puti</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur mon ordinateur </font><font style="vertical-align: inherit;">. Arr√™tons-nous plus en d√©tail sur ces formats d'exportation que j'ai cr√©√©s. Habituellement, lors de l'exportation vers un format ¬´natif¬ª du programme LyX, tous les fichiers avec celui-ci sont plac√©s par le programme LyX dans le r√©pertoire temporaire correspondant. Essayons de cr√©er un format d'exportation dans lequel ces fichiers seront plac√©s dans le m√™me dossier que le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.lyx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> export√© </font><font style="vertical-align: inherit;">. Eh bien, les actions avec le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lyxrc.defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sera essentiellement identique aux actions avec ce fichier lors de la cr√©ation du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format d'</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exportation </font><i><font style="vertical-align: inherit;">puti</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">J'ajoute √©galement les lignes aux endroits appropri√©s dans ce fichier:</font></font><br><br><pre> <code class="plaintext hljs">\Format pdf7 pdf "pdflatex v papke" F "pdfview" "" "document,vector,menu=export"</code> </pre><br>  et <br><br><pre> <code class="plaintext hljs">\converter pdflatex pdf7 "pdflatex-v-papke.bat $$r $$i" ""</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tout est clair ici. </font><font style="vertical-align: inherit;">La vraie diff√©rence entre le format d'exportation </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puti</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que j'ai cr√©√© pr√©c√©demment </font><font style="vertical-align: inherit;">et le format d'exportation en cours de cr√©ation est due √† la diff√©rence entre les moteurs (dans ce cas, entre les fichiers </font></font><code>.bat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), que j'ai mis sur le format d'exportation et que j'ai mis sur ce format. </font><font style="vertical-align: inherit;">√Ä savoir, en tant que moteur de ce format, j'utilise le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier pdflatex-v-papke.bat avec le</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contenu suivant:</font></font><br><br><pre> <code class="plaintext hljs">cd /d %0\.. chcp 1251 echo LYXCMD:sohranenie:buffer-write&gt; \\.\pipe\lyxpipe.in if exist perehod.bat (goto :vyhod3) else (goto :vhod) :vhod echo %1 &gt; put0.txt echo cd /d %%0\..&gt;&gt; pereim.bat echo SetLocal EnableExtensions EnableDelayedExpansion&gt;&gt; pereim.bat echo Set infile=put0.txt&gt;&gt; pereim.bat echo Set outFile=put.txt&gt;&gt; pereim.bat echo Set find=/&gt;&gt;pereim.bat echo Set replace=\&gt;&gt;pereim.bat echo for /F "UseBackQ delims=" %%%%n in ("%%infile%%") do (&gt;&gt; pereim.bat echo set "LINE=%%%%n"&gt;&gt; pereim.bat echo set "LINE=!LINE:%%find%%=%%replace%%!"&gt;&gt; pereim.bat echo echo.!LINE!^&gt;^&gt;%%outFile%%&gt;&gt; pereim.bat echo )&gt;&gt; pereim.bat echo exit&gt;&gt; pereim.bat start /b pereim.bat :vhod1 if exist put.txt (goto :vyhod1) else (goto :vhod1) :vyhod1 echo chcp 1251 &gt; perehod.bat echo cd /D^^&gt;&gt;perehod.bat more &lt; put.txt &gt;&gt; perehod.bat echo del %~n2.tex&gt;&gt; perehod.bat echo :vhod2 &gt;&gt; perehod.bat echo lyx -e latex %~n2.lyx&gt;&gt; perehod.bat echo if exist %~n2.tex (goto :vyhod2) else (goto :vhod2) &gt;&gt; perehod.bat echo :vyhod2 &gt;&gt; perehod.bat echo pdflatex %2 &gt;&gt; perehod.bat echo taskkill /f /im pdflatex.exe &gt;&gt; perehod.bat echo exit &gt;&gt; perehod.bat echo :vhod3 if exist perehod.bat (goto :vyhod3) else (goto :vhod3) :vyhod3 start perehod.bat pdflatex %1 rem            exit.bat exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment fonctionne ce fichier batch? Tout d'abord, en regardant les param√®tres avec lesquels j'ai fait de ce fichier batch le programme appelant LyX, en l'√©crivant dans le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lyxrc.defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous voyons que cela se produit avec les param√®tres "chemin du dossier contenant le fichier export√© sous forme sp√©cifique √† LyX" et " le nom du fichier export√©, mais avec l'extension .tex ", et l'ordre des param√®tres est important. Ainsi, ce fichier de commandes effectue d'abord une transition vers un dossier temporaire dans lequel les fichiers d'accompagnement sont form√©s lors de l'exportation vers un ¬´format natif¬ª. Ensuite, en raison de la possibilit√© des </font><font style="vertical-align: inherit;">lettres cyrilliques </font><font style="vertical-align: inherit;">dans les param√®tres de d√©marrage du fichier de commandes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous modifions l'encodage sur </font><i><font style="vertical-align: inherit;">Windows 1251</font></i><font style="vertical-align: inherit;"> dans la fen√™tre d'invite de commandes dans laquelle ce fichier de commandes sera ex√©cut√©</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Puis, profitant de la capacit√© du programme LyX √† r√©pondre aux commandes de la ligne de commande, dont (possibilit√©) dont j'ai parl√© ici, nous, √©tant donn√© la possibilit√© de changements dans le fichier export√©, avant les actions principales avec ce fichier, enregistrons d'abord le fichier export√© avec la </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commande</font></font><br><br><pre> <code class="plaintext hljs">echo LYXCMD:sohranenie:buffer-write&gt; \\.\pipe\lyxpipe.in</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">afin que vous ne le fassiez pas manuellement √† chaque fois. </font><font style="vertical-align: inherit;">L'√©quipe</font></font><br><br><pre> <code class="plaintext hljs">if exist perehod.bat (goto :vyhod3) else (goto :vhod)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec les √©tiquettes utilis√©es </font></font><code>:vyhod3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>:vhod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debout avant et apr√®s cette commande, il ne cr√©e rien par lui-m√™me, mais il le fait. Les fichiers suivants qui apparaissent dans le dossier temporaire correspondant √† la suite du fichier de commandes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont (dans l'ordre d'apparition) les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichiers put0.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pereim.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √† cr√©er avec chaque aper√ßu, exportation, en tout cas, avec d'√©ventuelles modifications du fichier </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui </font><font style="vertical-align: inherit;">est actuellement ouvert </font><font style="vertical-align: inherit;">, ce n'est pas n√©cessaire, c'est seulement n√©cessaire pour la premi√®re fois. Dans ce cas, pour la premi√®re fois, le dernier fichier </font><i><font style="vertical-align: inherit;">perehod.bat</font></i><font style="vertical-align: inherit;"> sera cr√©√© dans le r√©pertoire temporaire</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, 3 autres de ces fichiers dans le dossier temporaire n'existeront pas si ce fichier n'existe pas dans ce dossier. Par cons√©quent, dans la condition, </font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous √©crivons l'existence de ce fichier. Si, lorsque le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier de commandes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pdflatex </font><i><font style="vertical-align: inherit;">-v-papke.bat</font></i><font style="vertical-align: inherit;"> commence √† fonctionner, ce fichier n'existe pas dans le dossier temporaire correspondant, le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier de commandes pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> longe la branche en cr√©ant 4 fichiers dans le dossier temporaire correspondant - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put0.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pereim.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et passe √† ses √©quipes suivantes. Si ces 4 fichiers dans le r√©pertoire temporaire existent d√©j√†, il y a une transition directe vers les commandes suivantes, dont j'ai parl√© dans la phrase pr√©c√©dente. Arr√™tons-nous sur ces quatre dossiers. √âtant donn√© que le premier param√®tre avec lequel le programme LyX lance le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est ¬´le chemin d'acc√®s au dossier contenant le fichier export√© sous une forme sp√©cifique √† LyX¬ª, </font><font style="vertical-align: inherit;">ce chemin sera affich√© </font><font style="vertical-align: inherit;">dans le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put0.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pr√©sent√© dans ce formulaire. Cependant, le chemin sous cette forme ne convient pas pour une utilisation sur la ligne de commande (l√†, le s√©parateur, pour ainsi dire, des diff√©rents niveaux d'imbrication des dossiers est le caract√®re </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">au lieu du </font><font style="vertical-align: inherit;">caract√®re </font><font style="vertical-align: inherit;">attendu par la ligne de commande </font></font><code>\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Pour cette raison, l'√©tape suivante du fonctionnement du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier pdflatex-v-papke.bat</font></font></i>         <i>pereim.bat</i> ,     ,     <i>put0.txt</i> ,     <code>/</code>  <code>\</code>      <i>put1.txt</i> .   <i>pdflatex-v-papke.bat</i>    <i>pereim.bat</i> .            ,   ,   ,   <code>/b</code> .   ( , )  <i>pereim.bat</i>      . - ,     <i>put1.txt</i> ,    <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> passe aux √©tapes suivantes, dans lesquelles le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put1.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est d√©j√† suppos√© exister dans le r√©pertoire temporaire correspondant </font><font style="vertical-align: inherit;">. Pour cette raison, une </font><font style="vertical-align: inherit;">erreur peut se produire </font><font style="vertical-align: inherit;">lors du fonctionnement du fichier principal </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pour √©viter cela, l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©tape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suivante apr√®s le d√©marrage du fichier de commandes </font><i><font style="vertical-align: inherit;">pereim.bat</font></i><font style="vertical-align: inherit;"> consiste √† boucler le fichier de commandes principal avec une telle section de son code:</font></font><br><br><pre> <code class="plaintext hljs">:vhod1 if exist put.txt (goto :vyhod1) else (goto :vhod1) :vyhod1</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette section du code v√©rifie la pr√©sence du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le r√©pertoire temporaire correspondant au fichier export√©. Si ce fichier n'est pas dans ce dossier, le fichier de commandes retourne √† l'√©tiquette </font></font><code>:vhod1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et v√©rifie √† nouveau le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le r√©pertoire temporaire correspondant au fichier export√© et ainsi de suite jusqu'√† ce que ce fichier apparaisse dans ce dossier. D√®s que l'analyse trouve ce fichier, elle quitte la boucle et ex√©cute les commandes suivantes du fichier de commandes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Et les √©tapes suivantes du travail de ce fichier de commandes consistent √† cr√©er un fichier de commandes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le r√©pertoire temporaire appropri√© </font><font style="vertical-align: inherit;">, en attendant l'apparition de ce fichier de commandes (la section de code est responsable de cela</font></font><br><br><pre> <code class="plaintext hljs">:vhod3 if exist perehod.bat (goto :vyhod3) else (goto :vhod3) :vyhod3</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier batch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et lancement du fichier batch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Je cr√©e le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> perehod.bat </font><font style="vertical-align: inherit;">dans un fichier s√©par√© car au cours de son travail, il doit suivre le chemin contenu dans le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put.txt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cr√©√© </font><i><font style="vertical-align: inherit;">pr√©c√©demment</font></i><font style="vertical-align: inherit;"> et ce chemin doit encore √™tre extrait de ce fichier, ce qui est fait par la commande</font></font><br><br><pre> <code class="plaintext hljs">more &lt; put.txt</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En g√©n√©ral, par exemple, le contenu du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><i><font style="vertical-align: inherit;">le</font></i><font style="vertical-align: inherit;"> suivant (avec le fichier export√© </font></font><code>C:\DocLyX\newfile2.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="plaintext hljs">chcp 1251 cd /D^ C:\DocLyX\ del newfile2.tex :vhod2 lyx -e latex newfile2.lyx if exist newfile2.tex (goto :vyhod2) else (goto :vhod2) :vyhod2 pdflatex newfile2.tex taskkill /f /im pdflatex.exe exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que fait ce fichier batch? Dans un premier temps, en raison de la possibilit√© d'avoir les lettres cyrilliques dans le chemin d'acc√®s complet au fichier export√©, le codage de la fen√™tre de commande, dans laquelle le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier batch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> perehod.bat commence √† </font><i><font style="vertical-align: inherit;">s'ex√©cuter</font></i><font style="vertical-align: inherit;"> , passe √† </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 1251</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ensuite, les 2 lignes suivantes sont ex√©cut√©es, qui sont en fait une commande. La concat√©nation de ces lignes en une seule commande est effectu√©e par le signe </font></font><code>^</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† la fin de la premi√®re ligne. La signification de cette commande composite est que le travail du fichier de commandes perehod.bat est transf√©r√© dans le dossier contenant le fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. La cl√© a √©t√© </font></font><code>/D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajout√©e car j'ai LyX dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outils&gt; Param√®tres ...&gt; Chemins d'acc√®s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans la zone de texte </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©pertoire temporaire</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il est d√©fini de sorte que lorsque vous ouvrez LyX, ce r√©pertoire temporaire est cr√©√© sur un disque autre que celui dans lequel une ligne de commande est g√©n√©ralement lanc√©e dans un certain dossier. Ensuite, le fichier du m√™me nom avec le fichier export√© est supprim√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais avec l'extension </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui, peut-√™tre, a √©t√© obtenue dans le m√™me dossier avec le fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lors de l'exportation du fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produit pr√©c√©demment. De plus, en th√©orie, le fichier </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que nous traitons actuellement </font><font style="vertical-align: inherit;">devrait √™tre export√© </font><font style="vertical-align: inherit;">dans un format </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suivi d'une boucle du fichier batch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jusqu'√† ce qu'un fichier du m√™me nom avec le fichier export√© apparaisse dans le r√©pertoire temporaire correspondant </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais avec l'extension</font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cependant, dans cet ordre de commandes, le fichier batch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><i><font style="vertical-align: inherit;">parfois mis en</font></i><font style="vertical-align: inherit;"> boucle (sans fin) </font><font style="vertical-align: inherit;">, car le fichier portant le m√™me nom avec le fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais avec l'extension, </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'apparaissait pas. Par cons√©quent, </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il est pr√©f√©rable de placer la </font><font style="vertical-align: inherit;">commande d'exportation </font><font style="vertical-align: inherit;">apr√®s l'√©tiquette √† laquelle le fichier de commandes renvoie s'il n'y a pas de </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier du m√™me nom avec ce fichier </font><font style="vertical-align: inherit;">dans le dossier avec le fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais avec l'extension </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Eh bien, alors tout est simple. Le fichier pdflatex est trait√© avec le fichier du m√™me nom avec le fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais avec l'extension </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puis la commande est donn√©e pour tuer les processus </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui peuvent √™tre rest√©s ferm√©s apr√®s ce traitement (cela se produit) et fermer le fichier de commandes</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Retour au </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Avec ce fichier batch, apr√®s avoir d√©marr√© le fichier batch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perehod.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , une commande est ex√©cut√©e, dont la signification est indiqu√©e dans le commentaire de cette commande. Et voici le lancement d'un fichier batch compl√®tement </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inutile exit.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (situ√© dans un dossier ajout√© au PATH) avec un contenu encore plus √©trange</font></font><br><br><pre> <code class="plaintext hljs">date /t exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi ce fichier batch? Le fait est que lorsque je faisais encore des essais avec le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> batch puti.bat </font><font style="vertical-align: inherit;">, entre autres comme √ßa, je n'ai pas essay√© le moteur de l'un de mes formats de fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puti1.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donc quand je suis dans ce fichier et dans d'autres fichiers utilis√©s pour objectifs, n‚Äôindiquait pas le lancement de ce fichier de commandes, lorsque j‚Äôexportais vers LyX dans le format appropri√© que j‚Äôai cr√©√©, l‚Äôerreur suivante a obstin√©ment explor√©: </font></font><br><br><img src="https://habrastorage.org/webt/js/vj/2a/jsvj2agjdh1wf-i9npjku8posbc.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et je n‚Äô√©tais pas en mesure de m'en d√©barrasser. Ensuite, purement par accident, j'ai puti1.bat dans mon </font><i><font style="vertical-align: inherit;">fichier</font></i><font style="vertical-align: inherit;"> batch</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'avant-derni√®re √©quipe √©tait celle qui lan√ßait un fichier de commandes. Cette erreur a cess√© d'appara√Ætre. Pour autant que je me souvienne, ce fichier batch al√©atoire a g√©n√©r√© des fichiers avec son travail. Je n'en avais pas besoin. J'ai alors d√©cid√© d'essayer de mettre une commande qui ne produit aucun fichier dans ce fichier batch. J'ai essay√© la date. Il s'est av√©r√©: l'erreur montr√©e sur la photo a cess√© de flotter. Et je l'ai laiss√©. Bien que, au moins, tuez-moi, je ne comprends pas pourquoi cela aide, mais il serait int√©ressant de savoir pourquoi cela fonctionne. Eh bien, vient ensuite la sortie du fichier de commandes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex-v-papke.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> C‚Äôest tout.  Et ainsi de suite.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TeXworks dispose de l'outil de mise en page suivant: </font></font><br><br><img src="https://habrastorage.org/webt/xp/pt/ry/xpptry-ieqblgtxi2-ihwataxc0.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez un format d'exportation dans LyX, qui exporte d'abord le fichier export√© </font></font><code>.lyx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vers </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puis </font><i><font style="vertical-align: inherit;">xelatex.exe</font></i><font style="vertical-align: inherit;"> avec l'option </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est d√©fini par </font><font style="vertical-align: inherit;">rapport au fichier r√©sultant </font><font style="vertical-align: inherit;">. En m√™me temps, tous les fichiers cr√©√©s accidentellement lors de l'exportation d'un fichier vers ce format </font><font style="vertical-align: inherit;">seront plac√©s dans le m√™me dossier que le fichier export√©. Actions compl√®tement similaires √† celles d√©crites ci-dessus. Nous faisons appara√Ætre ce format dans </font><b><font style="vertical-align: inherit;">Fichier&gt; Exporter vers ...</font></b><font style="vertical-align: inherit;"> sous le nom </font><i><font style="vertical-align: inherit;">xelatex v papke</font></i><font style="vertical-align: inherit;"> , placez le </font><i><font style="vertical-align: inherit;">moteur xelatex-v-papke.bat</font></i><font style="vertical-align: inherit;"> sur ce format d'exportation </font><i><font style="vertical-align: inherit;">comme</font></i><font style="vertical-align: inherit;"> suit:</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>-undump=xelatex</code><font style="vertical-align: inherit;"></font><code>.lyx</code><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="plaintext hljs">cd /d %0\.. chcp 1251 echo LYXCMD:sohranenie:buffer-write&gt; \\.\pipe\lyxpipe.in if exist perehod.bat (goto :vyhod3) else (goto :vhod) :vhod echo %1 &gt; put0.txt echo cd /d %%0\..&gt;&gt; pereim.bat echo SetLocal EnableExtensions EnableDelayedExpansion&gt;&gt; pereim.bat echo Set infile=put0.txt&gt;&gt; pereim.bat echo Set outFile=put.txt&gt;&gt; pereim.bat echo Set find=/&gt;&gt;pereim.bat echo Set replace=\&gt;&gt;pereim.bat echo for /F "UseBackQ delims=" %%%%n in ("%%infile%%") do (&gt;&gt; pereim.bat echo set "LINE=%%%%n"&gt;&gt; pereim.bat echo set "LINE=!LINE:%%find%%=%%replace%%!"&gt;&gt; pereim.bat echo echo.!LINE!^&gt;^&gt;%%outFile%%&gt;&gt; pereim.bat echo )&gt;&gt; pereim.bat echo exit&gt;&gt; pereim.bat start /b pereim.bat :vhod1 if exist put.tex (goto :vyhod1) else (goto :vhod1) :vyhod1 echo chcp 1251 &gt; perehod.bat echo cd /D^^&gt;&gt;perehod.bat more &lt; put.txt &gt;&gt; perehod.bat echo del %~n2.tex&gt;&gt; perehod.bat echo :vhod2 &gt;&gt; perehod.bat echo lyx -e latex %~n2.lyx&gt;&gt; perehod.bat echo if exist %~n2.tex (goto :vyhod2) else (goto :vhod2) &gt;&gt; perehod.bat echo :vyhod2 &gt;&gt; perehod.bat echo miktex-xetex.exe -undump=xelatex %2 &gt;&gt; perehod.bat echo taskkill /f /im pdflatex.exe &gt;&gt; perehod.bat echo exit &gt;&gt; perehod.bat :vhod3 if exist perehod.bat (goto :vyhod3) else (goto :vhod3) :vyhod3 start perehod.bat pdflatex %1 rem            exit.bat exit</code> </pre><br>  ,       ,    <i>pdflatex-v-papke.bat</i> .    -  <code>miktex-xetex.exe -undump=xelatex %2</code> ,             <code>.tex</code> ,         .       <i>lyxrc.defaults</i>  ,   <code>xelatex-v-papke.bat</code>    <code>$$r $$i</code> ,    <i>lyxrc.defaults</i>    . , ,        <code>.lyx</code> ,     ,       <code>.tex</code>     <code>utf8</code>  <code>\usepackage[utf8]{inputenc}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou la derni√®re commande est totalement absente. Ce dernier (au fait, une chose tr√®s utile: de cette fa√ßon, dans la partie inaccessible du pr√©ambule, vous pouvez le supprimer </font></font><code>inputenc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et via </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Document&gt; Pr√©f√©rences&gt; Pr√©ambule LaTeX l'</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©crire selon vos besoins) en d√©finissant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Document&gt; Param√®tres&gt; Langue pour</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basculer la </font><font style="vertical-align: inherit;">valeur d' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encodage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la liste d√©roulante </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (nom de cette la liste d√©pend du fichier de localisation utilis√© </font></font><code>.mo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dans</font></font><code> (XeTeX) (utf8)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Comme dernier exemple, envisagez de cr√©er un format d'exportation, lors de l'exportation vers celui-ci, en fonction de la pr√©sence / absence de code graphique Asymptote dans le fichier export√©, une ou une autre s√©quence de commandes est ex√©cut√©e (pdflatex + asymptote + pdflatex ou simplement pdflatex). </font><font style="vertical-align: inherit;">Dans le m√™me temps, qu'il y ait ou non du code graphique Asymptote dans ce fichier, tous les fichiers se produisent accidentellement pendant le fonctionnement</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi><mspace width=&quot;-.14em&quot; /><mpadded height=&quot;-.5ex&quot; depth=&quot;+.5ex&quot; voffset=&quot;-.5ex&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow></mpadded><mspace width=&quot;-.115em&quot; /><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.8ex" height="2.539ex" viewBox="0 -780.1 2066.5 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485298/&amp;xid=17259,15700022,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhiU17nwvX6VST4z-Lx3-jMY7MGrdQ#MJMATHI-54" x="0" y="0"></use><g transform="translate(564,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485298/&amp;xid=17259,15700022,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhiU17nwvX6VST4z-Lx3-jMY7MGrdQ#MJMATHI-45" x="0" y="-216"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485298/&amp;xid=17259,15700022,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhiU17nwvX6VST4z-Lx3-jMY7MGrdQ#MJMATHI-58" x="1214" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi><mspace width="-.14em"></mspace><mpadded height="-.5ex" depth="+.5ex" voffset="-.5ex"><mrow class="MJX-TeXAtom-ORD"><mi>E</mi></mrow></mpadded><mspace width="-.115em"></mspace><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">\TeX</script><code>.lyx</code><code>.lyx</code><code>.pdf</code><code>.lyx</code><i></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Ctrl + L), dans ce bloc de code, nous ins√©rons un mot abracadabra qui ne se trouvera nulle part ailleurs dans ce fichier .lyx - nous accepterons d'utiliser un mot russe pour cela, √©crit pour plus de confusion dans l'ordre inverse . Que ce mot abracadabra soit des ovols. Nous √©crivons ce mot abracadabra dans le bloc de code TeX ins√©r√©, puis dans ce bloc TeX nous ins√©rons une ligne vide, une nouvelle ligne et dans cette nouvelle ligne nous </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tapons √†</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nouveau le mot </font><i><font style="vertical-align: inherit;">ovols</font></i><font style="vertical-align: inherit;"> . Nous mettons une ligne vide entre ces ovols </font></font><code>\begin{asy}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, 2 nouvelles lignes et dans la deuxi√®me nouvelle ligne nous entrons </font></font><code>\end{asy}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si vous le souhaitez, la s√©quence de toutes ces actions peut √™tre automatis√©e √† l'aide d'un fichier</font></font><code>.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contenu pertinent. J'√©crirai peut-√™tre √† ce sujet plus en d√©tail. Et enfin, entre ces balises asy, nous √©crivons le code du motif souhait√©. Pour ressembler √† ceci, par exemple, cela pourrait ressembler √† ceci: </font></font><br><br><img src="https://habrastorage.org/webt/o4/d4/cx/o4d4cxbhi-d4tezhveichzcevg0.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le mot abracadabra est n√©cessaire parce que lorsque je n'ai pas utilis√© cette technique, lors de la visualisation du fichier cr√©√© lors de l'exportation au format pdflatex </font></font><code>.tex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans le r√©pertoire temporaire correspondant, les lignes vides ins√©r√©es avant et apr√®s la disparition de l'environnement asy, ce qui a conduit √† l'apparition du fini </font></font><code>.pdf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, diff√©rent de celui qui a √©t√© con√ßu. De plus, bien s√ªr, n'oubliez pas de connecter le package asymptote √† </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Document&gt; Param√®tres ...&gt; Pr√©ambule LaTeX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lyxrc.defaults,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sp√©cifiez le moteur de ce format avec tous les m√™mes param√®tres</font></font><code>$$r $$i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il est temps de donner le code du moteur de ce format. </font><font style="vertical-align: inherit;">Ce sera, comme toujours, un fichier </font></font><code>.bat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Appelons-le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pdflatex + asymptote + pdflatex-v-lyx.bat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Comme toujours, ce fichier doit se trouver dans le dossier ajout√© √† PATH. </font><font style="vertical-align: inherit;">Voici le code de ce fichier batch:</font></font><br><br><pre> <code class="plaintext hljs">cd /d %0\.. if exist perehod.bat (goto :vyhod6) else (goto :vhod) :vhod echo %1 &gt; put0.txt echo cd /d %%0\..&gt; pereim.bat echo SetLocal EnableExtensions EnableDelayedExpansion&gt;&gt; pereim.bat echo Set infile=put0.txt&gt;&gt; pereim.bat echo Set outFile=put.txt&gt;&gt; pereim.bat echo Set find=/&gt;&gt;pereim.bat echo Set replace=\&gt;&gt;pereim.bat echo for /F "UseBackQ delims=" %%%%n in ("%%infile%%") do (&gt;&gt; pereim.bat echo set "LINE=%%%%n"&gt;&gt; pereim.bat echo set "LINE=!LINE:%%find%%=%%replace%%!"&gt;&gt; pereim.bat echo echo.!LINE!^&gt;^&gt;%%outFile%%&gt;&gt; pereim.bat echo )&gt;&gt; pereim.bat echo exit&gt;&gt; pereim.bat start /b pereim.bat :vhod1 if exist put.txt (goto :vyhod1) else (goto :vhod1) :vyhod1 echo echo LYXCMD:sohranenie:buffer-write^&gt; \\.\pipe\lyxpipe.in &gt;perehod.bat echo cd /D ^^&gt;&gt;perehod.bat more &lt; put.txt &gt;&gt; perehod.bat echo :vhod1&gt;&gt;perehod.bat echo lyx -e latex %~n2.lyx&gt;&gt; perehod.bat echo if exist %~n2.tex (goto :vyhod1) else (goto :vhod1)&gt;&gt;perehod.bat echo :vyhod1&gt;&gt;perehod.bat echo echo cd /d %%%%0\..^&gt; zamena.bat&gt;&gt;perehod.bat echo echo chcp 65001^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo SetLocal EnableExtensions EnableDelayedExpansion^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo Set infile=%~n2.tex^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo Set outFile=zameneno.tex^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo Set find=ovols^&gt;^&gt;zamena.bat&gt;&gt;perehod.bat echo echo Set replace=^&gt;^&gt;zamena.bat&gt;&gt;perehod.bat echo echo for /F "UseBackQ delims=" %%%%%%%%n in ("%%%%infile%%%%") do (^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo set "LINE=%%%%%%%%n"^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo set "LINE=!LINE:%%%%find%%%%=%%%%replace%%%%!"^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo echo.!LINE!^^^&gt;^^^&gt;%%%%outFile%%%%^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo )^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo echo exit^&gt;^&gt; zamena.bat&gt;&gt;perehod.bat echo :vhod2&gt;&gt;perehod.bat echo if exist zamena.bat (goto :vyhod2) else (goto :vhod2)&gt;&gt;perehod.bat echo :vyhod2&gt;&gt;perehod.bat echo start zamena.bat&gt;&gt;perehod.bat echo :vhod3&gt;&gt;perehod.bat echo if exist zameneno.tex (goto :vyhod3) else (goto :vhod3)&gt;&gt;perehod.bat echo :vyhod3&gt;&gt;perehod.bat echo del %~n2.tex&gt;&gt;perehod.bat echo rename zameneno.tex %~n2.tex&gt;&gt;perehod.bat echo del %~n2.aux&gt;&gt;perehod.bat echo if exist %~n2-*.asy (goto :vhod4) else (goto :vhod5)&gt;&gt;perehod.bat echo :vhod4&gt;&gt;perehod.bat echo del %~n2-*.*&gt;&gt;perehod.bat echo :vhod5&gt;&gt;perehod.bat echo pdflatex %2 &gt;&gt; perehod.bat echo for %%%%f in (%~n2-*.asy) do asy %%%%f &gt;&gt; perehod.bat echo pdflatex %2 &gt;&gt; perehod.bat echo exit &gt;&gt; perehod.bat :vhod6 if exist perehod.bat (goto :vyhod6) else (goto :vhod6) :vyhod6 start perehod.bat</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En principe, tout est pareil ici. </font><font style="vertical-align: inherit;">Seul le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zamena.bat est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√©cessaire pour remplacer les ovols par rien, c'est-√†-dire pour supprimer ce mot abracadabra. </font><font style="vertical-align: inherit;">Comme d'habitude, des sections du code d'affichage</font></font><br><br><pre> <code class="plaintext hljs">:vhod ¬´ - ¬ª If exist ¬´- ¬ª... :vyhod ¬´   - ¬ª</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> servir, pour ainsi dire, √† suspendre d'autres actions du fichier de commandes correspondant jusqu'√† l'apparition de "tel ou tel fichier" dans le dossier de travail de ce fichier de commandes, bien qu'en fait le fichier de commandes continue de fonctionner. </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485298/">https://habr.com/ru/post/fr485298/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485284/index.html">Caract√©ristiques de SPIKE ‚Ñ¢ Prime LEGO¬Æ Education</a></li>
<li><a href="../fr485286/index.html">Comment nous avons pes√© des marchandises ou une petite ode d'automatisation</a></li>
<li><a href="../fr485288/index.html">L'amour pour d√©tester indie gamedev'a</a></li>
<li><a href="../fr485290/index.html">Guide de distillation BERT simple</a></li>
<li><a href="../fr485294/index.html">Cours moderne sur Node.js en 2020</a></li>
<li><a href="../fr485300/index.html">D√©couverte d'une nouvelle √©pid√©mie de vers H2Miner exploitant Redis RCE</a></li>
<li><a href="../fr485304/index.html">Quelques astuces sur les √©l√©ments iframe</a></li>
<li><a href="../fr485312/index.html">DevOps pour applications mobiles</a></li>
<li><a href="../fr485316/index.html">Tous les SERP Google ressemblent d√©sormais √† des publicit√©s</a></li>
<li><a href="../fr485318/index.html">Ajout de beaut√© et d'interactivit√© aux ordinateurs portables Jupyter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>