<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§±üèæ üõ°Ô∏è üíáüèº Paquetes y gestores de paquetes para k8s üî∫ ü¶Å üï∫üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos usamos alg√∫n tipo de gestores de paquetes, incluida la se√±ora de la limpieza T√≠a Galya, que ahora tiene un iPhone en su bolsillo actualizado. Pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Paquetes y gestores de paquetes para k8s</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/431540/">  Todos usamos alg√∫n tipo de gestores de paquetes, incluida la se√±ora de la limpieza T√≠a Galya, que ahora tiene un iPhone en su bolsillo actualizado.  Pero no hay un acuerdo general sobre las funciones de los gestores de paquetes, y los sistemas operativos y sistemas de rpm y dpkg est√°ndar se denominan gestores de paquetes.  Ofrecemos reflexionar sobre el tema de sus funciones: qu√© es y por qu√© se necesitan en el mundo moderno.  Y luego exploraremos hacia Kubernetes y consideraremos cuidadosamente a Helm en t√©rminos de estas funciones. <br><img src="https://habrastorage.org/webt/xs/mf/h5/xsmfh5898yrlawroqge2dn6v_iw.png"><br><br>  Entenderemos por qu√© en este diagrama solo la funci√≥n de plantilla se resalta en verde, y cu√°les son los problemas con el ensamblaje y el embalaje, la automatizaci√≥n del entorno y m√°s.  Pero no te preocupes, el art√≠culo no termina con el hecho de que todo est√° mal.  La comunidad no pudo llegar a un acuerdo con esto y ofrece herramientas y soluciones alternativas; nos ocuparemos de ellas. <br><br>  <b>Ivan Glushkov</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">gli</a> ) nos ayud√≥ con esto con su informe sobre RIT ++, una versi√≥n en video y texto de esta presentaci√≥n detallada y detallada a continuaci√≥n. <br><br><blockquote>  Los videos de este y otros discursos de DevOps en RIT ++ se publican y abren para su visualizaci√≥n gratuita en nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal de YouTube</a> ; busque respuestas a sus preguntas de trabajo. <br></blockquote><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/V_DGgD7ihsQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Sobre el orador:</strong> Ivan Glushkov ha estado desarrollando software durante 15 a√±os.  Logr√© trabajar en MZ, en Echo en una plataforma para comentarios, participar en el desarrollo de compiladores para el procesador Elbrus en MCST.  Actualmente est√° involucrado en proyectos de infraestructura en Postmates.  Ivan es uno de los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">podcasts</a> l√≠deres de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DevZen</a> en el que hablan sobre nuestras conferencias: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> se trata de RIT ++, y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> sobre HighLoad ++. <br><br><h2>  Gerentes de paquete <br></h2><br>  Aunque todos usan alg√∫n tipo de gestores de paquetes, no existe un acuerdo √∫nico sobre lo que es.  Hay un entendimiento com√∫n, y cada uno tiene el suyo. <br><br>  Recordemos qu√© tipos de gestores de paquetes vienen a la mente primero: <br><br><ul><li>  Gestores de paquetes est√°ndar de todos los sistemas operativos: <strong>rpm, dpkg, portage</strong> , ... </li><li>  Gestores de paquetes para diferentes lenguajes de programaci√≥n: <strong>carga, cabal, rebar3, mix</strong> , ... </li></ul><br>  Su funci√≥n principal es ejecutar comandos para instalar un paquete, actualizar un paquete, desinstalar un paquete y administrar dependencias.  En los gestores de paquetes dentro de los lenguajes de programaci√≥n, las cosas son un poco m√°s complicadas.  Por ejemplo, hay comandos como "lanzar un paquete" o "crear una versi√≥n" (compilar / ejecutar / liberar).  Resulta que este ya es un sistema de compilaci√≥n, aunque tambi√©n lo llamamos administrador de paquetes. <br><img src="https://habrastorage.org/webt/ct/di/ni/ctdinidgmq8e-zcuksmz-cfym2y.png"><br><br>  Todo esto solo se debe al hecho de que no puedes tomarlo y ... dejar que los amantes de Haskell perdonen esta comparaci√≥n.  Puede ejecutar el archivo binario, pero no puede ejecutar el programa en Haskell o C, primero debe prepararlo de alguna manera.  Y esta preparaci√≥n es bastante complicada, y los usuarios quieren que todo se haga autom√°ticamente. <br><br><h3>  Desarrollo <br></h3><br>  El que trabaj√≥ con GNU libtool, que fue hecho para un gran proyecto que consta de una gran cantidad de componentes, no se r√≠e del circo.  Esto es realmente muy dif√≠cil, y algunos casos no pueden resolverse en principio, sino que solo pueden evitarse. <br><br>  En comparaci√≥n, los gestores de idiomas de paquetes modernos como Cargo for Rust son mucho m√°s convenientes: presionas el bot√≥n y todo funciona.  Aunque, de hecho, bajo el cap√≥, se resuelven una gran cantidad de problemas.  Adem√°s, todas estas nuevas funciones requieren algo adicional, en particular, una base de datos.  Aunque en el administrador de paquetes en s√≠ se puede llamar como se quiera, lo llamo una base de datos, porque  all√≠ se almacenan datos: sobre paquetes instalados, sobre sus versiones, repositorios conectados, versiones en estos repositorios.  Todo esto debe almacenarse en alg√∫n lugar, por lo que hay una base de datos interna. <br><br>  Desarrollo en este lenguaje de programaci√≥n, pruebas para este lenguaje de programaci√≥n, lanzamientos: todo esto est√° incorporado y ubicado dentro, el <strong>trabajo se vuelve muy conveniente</strong> .  La mayor√≠a de los idiomas modernos han apoyado este enfoque.  Incluso aquellos que no apoyaron comienzan a apoyar, porque la comunidad presiona y dice que en el mundo moderno es imposible sin ella. <br><br>  <strong>Pero cualquier soluci√≥n siempre tiene no solo ventajas, sino tambi√©n desventajas</strong> .  La desventaja aqu√≠ es que necesita envoltorios, utilidades adicionales y una "base de datos" incorporada. <br><br><h2>  Docker <br></h2><br><blockquote>  ¬øCrees que Docker es un administrador de paquetes o no? <br></blockquote><br>  No importa c√≥mo, pero esencialmente s√≠.  No conozco una utilidad m√°s correcta para unir completamente la aplicaci√≥n con todas las dependencias y hacer que funcione con solo hacer clic en un bot√≥n.  ¬øQu√© es esto si no es un administrador de paquetes?  ¬°Este es un excelente administrador de paquetes! <br><br>  Maxim Lapshin ya ha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dicho</a> que con Docker se ha vuelto mucho m√°s f√°cil, y esto es as√≠.  Docker tiene un sistema de compilaci√≥n incorporado, todas estas bases de datos, enlaces y utilidades. <br><br>  ¬øCu√°l es el precio de todos los beneficios?  Quienes trabajan con Docker piensan poco en las aplicaciones industriales.  Tengo tal experiencia, y el precio es realmente muy alto: <br><br><ul><li>  <strong>La cantidad de informaci√≥n</strong> (tama√±o de imagen) que debe almacenarse en la imagen de Docker.  Necesita todas las dependencias, partes de utilidades, bibliotecas para empaquetar, la imagen es grande y necesita poder trabajar con ella. </li><li>  Es mucho m√°s complicado que se <strong>est√©</strong> produciendo <strong>un cambio de paradigma</strong> . </li></ul><br>  Por ejemplo, tuve la tarea de transferir un programa para usar Docker.  El programa fue desarrollado a lo largo de los a√±os por un equipo.  Vengo, hacemos todo lo que est√° escrito en los libros: pintamos historias de usuarios, roles, vemos qu√© y c√≥mo lo hacen, sus rutinas est√°ndar. <br><br>  Yo digo: <br><br>  - Docker puede resolver todos tus problemas.  Mira c√≥mo se hace esto. <br><br>  - Todo estar√° en el bot√≥n - ¬°genial!  Pero queremos que SSH lo haga dentro de los contenedores de Kubernetes. <br><br>  - Espera, no hay SSH en ning√∫n lado. <br><br>  - S√≠, s√≠, todo est√° bien ... ¬øPero es posible SSH? <br><br>  Para convertir la percepci√≥n de los usuarios en una nueva direcci√≥n, lleva mucho tiempo, requiere trabajo educativo y mucho esfuerzo. <br><br>  Otro factor de precio es que el <strong>registro Docker</strong> es un repositorio externo para im√°genes, necesita ser instalado y controlado de alguna manera.  Tiene sus propios problemas, un recolector de basura, etc., y a menudo puede caerse si no lo sigue, pero todo est√° resuelto. <br><br><h2>  Kubernetes <br></h2><br>  Finalmente llegamos a Kubernetes.  Este es un excelente sistema de administraci√≥n de aplicaciones OpenSource que es activamente apoyado por la comunidad.  Aunque originalmente dej√≥ una compa√±√≠a, Kubernetes ahora tiene una gran comunidad, y es imposible mantenerse al d√≠a, pr√°cticamente no hay alternativas. <br><br>  Curiosamente, todos los nodos de Kubernetes funcionan en Kubernetes a trav√©s de contenedores, y todas las aplicaciones externas funcionan a trav√©s de contenedores, ¬° <strong>todo funciona a trav√©s de contenedores</strong> !  Esto es tanto un plus como un menos. <br><br>  Kubernetes tiene una gran cantidad de funcionalidades y propiedades √∫tiles: distribuci√≥n, tolerancia a fallas, la capacidad de trabajar con diferentes servicios en la nube y orientaci√≥n hacia la arquitectura de microservicios.  Todo esto es interesante y genial, pero ¬øc√≥mo instalar la aplicaci√≥n en Kubernetes? <br><br><h3>  ¬øC√≥mo instalar la aplicaci√≥n? <br></h3><br><blockquote>  Instale la imagen Docker en el registro Docker. </blockquote><br>  Detr√°s de esta frase yace un abismo.  Imag√≠nese: tiene una aplicaci√≥n escrita, por ejemplo, en Ruby, y debe colocar la imagen de Docker en el registro de Docker.  Esto significa que debes: <br><br><ul><li>  Prepare una imagen de Docker </li><li>  entender c√≥mo va, en qu√© versiones se basa; </li><li>  ser capaz de probarlo; </li><li>  recopilar, complete el registro de Docker, que, por cierto, instal√≥ antes. </li></ul><br>  De hecho, este es un gran dolor en una l√≠nea. <br><br>  Adem√°s, a√∫n necesita describir el manifiesto de la aplicaci√≥n en t√©rminos (recursos) de k8s.  La opci√≥n m√°s f√°cil: <br><br><ul><li>  describe despliegue + pod, servicio + ingreso (posiblemente); </li><li>  ejecute el comando kubectl apply -f resources.yaml y transfiera todos los recursos a este comando. </li></ul><br><img src="https://habrastorage.org/webt/o9/pj/8w/o9pj8wgukswoi3laskibnzkemg0.png"><br><br>  Gandhi frota sus manos en la diapositiva, parece que encontr√© el administrador de paquetes en Kubernetes.  Pero kubectl no es un administrador de paquetes.  Simplemente dice que quiero ver un estado tan final del sistema.  Esto no es instalar un paquete, no funciona con dependencias, no se construye, es solo "Quiero ver este estado final". <br><br><h2>  Tim√≥n <br></h2><br>  Finalmente llegamos a Helm.  Helm es una utilidad multiprop√≥sito.  Ahora consideraremos qu√© √°reas de desarrollo de Helm y trabajaremos con √©l. <br><br><h3>  Motor de plantillas <br></h3><br>  En primer lugar, Helm es un motor de plantillas.  Discutimos qu√© recursos deben prepararse, y el problema es escribir en t√©rminos de Kubernetes (y no solo en yaml).  Lo m√°s interesante es que estos son archivos est√°ticos para su aplicaci√≥n espec√≠fica en este entorno en particular. <br><br>  Sin embargo, si trabaja con varios entornos y no solo tiene producci√≥n, sino tambi√©n etapas, pruebas, desarrollo y diferentes entornos para diferentes equipos, debe tener varios manifiestos similares.  Por ejemplo, porque en uno de ellos hay varios servidores, y necesita tener una gran cantidad de r√©plicas, y en el otro, solo una r√©plica.  No hay base de datos, acceso a RDS, y necesita instalar PostgreSQL dentro.  Y aqu√≠ tenemos la versi√≥n anterior, y necesitamos reescribir todo un poco. <br><br>  Toda esta diversidad lleva al hecho de que tienes que tomar tu manifiesto para Kubernetes, copiarlo en todas partes y arreglarlo en todas partes: aqu√≠ reemplaza un d√≠gito, aqu√≠ hay algo m√°s.  Esto se est√° volviendo muy inc√≥modo. <br><br>  La soluci√≥n es simple: debe <strong>ingresar plantillas</strong> .  Es decir, forma un manifiesto, define variables en √©l y luego env√≠a las variables definidas externamente como un archivo.  La plantilla crea el manifiesto final.  Resulta reutilizar el mismo manifiesto para todos los entornos, lo cual es mucho m√°s conveniente. <br><br>  Por ejemplo, el manifiesto para Helm. <br><img src="https://habrastorage.org/webt/ls/ys/ms/lsysmsc7kcnrm1vl8epif7ooowu.png"><br><br><ul><li>  La parte m√°s importante de Helm es <strong>Chart.yaml</strong> , que describe qu√© tipo de manifiesto es, qu√© versiones y c√≥mo funciona. </li><li>  <strong>Las plantillas</strong> son solo plantillas de recursos de Kubernetes que contienen alg√∫n tipo de variables dentro de s√≠ mismas.  Estas variables deben definirse en un archivo externo o en la l√≠nea de comando, pero siempre externamente. </li><li>  <strong>values.yaml</strong> es el nombre est√°ndar del archivo con variables para estas plantillas. </li></ul><br>  El comando de inicio m√°s simple para instalar el gr√°fico es helm install ./wordpress (carpeta).  Para redefinir algunos par√°metros, decimos: "Quiero redefinir precisamente estos par√°metros y establecer tales o cuales valores". <br><br>  Helm hace frente a esta tarea, por lo que en el diagrama lo marcamos en verde. <br><img src="https://habrastorage.org/webt/it/nk/7s/itnk7so3wdowimy9riigh74amhy.png"><br><br>  Es cierto, los contras aparecen: <br><br><ul><li>  <strong>Verbosidad</strong>  Los recursos se definen completamente en t√©rminos de Kubernetes, no se introducen conceptos de niveles adicionales de abstracci√≥n: simplemente escribimos todo lo que nos gustar√≠a escribir para Kubernetes y reemplazamos las variables all√≠. </li><li>  <strong>No te repitas, no aplica.</strong>  A menudo es necesario repetir lo mismo.  Si tiene dos servicios similares con nombres diferentes, debe copiar completamente la carpeta completa (la mayor√≠a de las veces lo hacen) y cambiar los archivos necesarios. </li></ul><br>  Antes de sumergirnos en la direcci√≥n de Helm, un administrador de paquetes, para lo cual te cuento todo esto, veamos c√≥mo funciona Helm con las dependencias. <br><br><h3>  Trabajar con dependencias <br></h3><br>  Helm es dif√≠cil de trabajar con dependencias.  En primer lugar, hay un archivo require.yaml que se ajusta a lo que dependemos.  Mientras trabaja con los requisitos, realizaquisits.lock: este es el estado actual (pepita) de todas las dependencias.  Despu√©s de eso, los descarga en una carpeta llamada / gr√°ficos. <br><br>  Hay herramientas para administrar: a qui√©n, c√≥mo, d√≥nde conectarse: <strong>etiquetas y condiciones</strong> , con las cuales se determina en qu√© entorno, seg√∫n qu√© par√°metros externos, conectar o no conectar algunas dependencias. <br><br>  Supongamos que tiene PostgreSQL para el entorno de ensayo (o RDS para producci√≥n o NoSQL para pruebas).  Al instalar este paquete en Producci√≥n, no instalar√° PostgreSQL, porque no es necesario all√≠, solo usando etiquetas y condiciones. <br><br>  ¬øQu√© es interesante aqu√≠? <br><br><ul><li>  Helm mezcla todos los recursos de todas las dependencias y aplicaciones; </li><li>  ordenar -&gt; instalar / actualizar </li></ul><br>  Despu√©s de que hayamos descargado todas las dependencias en / charts (estas dependencias pueden ser, por ejemplo, 100), Helm toma y copia todos los recursos que contiene.  Despu√©s de procesar las plantillas, recopila todos los recursos en un solo lugar y los ordena en alg√∫n tipo de orden.  No puedes influir en este orden.  Debe determinar por s√≠ mismo de qu√© depende su paquete, y si el paquete tiene dependencias transitivas, entonces debe incluirlos todos en la descripci√≥n en require.yaml.  Esto debe tenerse en cuenta. <br><br><h3>  Administrador de paquetes <br></h3><br>  Helm instala aplicaciones y dependencias, y puede decirle a Helm install, e instalar√° el paquete.  Entonces este es un administrador de paquetes. <br><br>  Al mismo tiempo, si tiene un repositorio externo donde carga el paquete, puede acceder a √©l no como una carpeta local, sino simplemente decir: "Desde este repositorio, tome este paquete, inst√°lelo con tal o cual par√°metro". <br><br>  Hay repositorios abiertos con muchos paquetes.  Por ejemplo, puede ejecutar: helm install -f prod / values.yaml stable / wordpress <br><br>  Desde el repositorio estable, tomar√° WordPress y lo instalar√° usted mismo.  Puedes hacer todo: buscar / actualizar / eliminar.  Resulta que, en realidad, Helm es un administrador de paquetes. <br><br>  Pero hay inconvenientes: todas <strong>las dependencias transitivas</strong> deben incluirse dentro.  Este es un gran problema cuando las dependencias transitivas son aplicaciones independientes y desea trabajar con ellas por separado para pruebas y desarrollo. <br><br>  Otra desventaja es la <strong>configuraci√≥n de extremo a extremo</strong> .  Cuando tiene una base de datos y su nombre debe transferirse a todos los paquetes, esto puede ser, pero es dif√≠cil de hacer. <br><br><img src="https://habrastorage.org/webt/ws/8m/ox/ws8moxa7dp9ekfc_fcb4mcrytae.png"><br><br>  La mayor√≠a de las veces, ha instalado un paquete peque√±o y funciona.  El mundo es complejo: la aplicaci√≥n depende de la aplicaci√≥n, que a su vez tambi√©n depende de la aplicaci√≥n; debe configurarlos de alguna manera inteligente.  Helm no sabe c√≥mo apoyar esto, o lo soporta con grandes problemas, y a veces tienes que bailar mucho con una pandereta para que funcione.  Esto es malo, por lo que el "administrador de paquetes" en el diagrama est√° resaltado en rojo. <br><br><img src="https://habrastorage.org/webt/c5/rj/sz/c5rjszxy-hf_-pulkkcz_tsaie0.png"><br><br><h3>  Ensamblaje y embalaje <br></h3><br>  "No se puede obtener y ejecutar" la aplicaci√≥n en Kubernetes.  Debe ensamblarlo, es decir, hacer una imagen de Docker, escribirla en el registro de Docker, etc.  Aunque toda la definici√≥n del paquete en Helm es.  Determinamos qu√© es el paquete, qu√© funciones y campos deber√≠an estar all√≠, firmas y autenticaci√≥n (el sistema de seguridad de su empresa estar√° muy contento).  Por lo tanto, por un lado, el ensamblaje y el empaque parecen ser compatibles, y por otro lado, el trabajo con im√°genes Docker no est√° configurado. <br><br><blockquote>  Helm no le permite ejecutar la aplicaci√≥n sin una imagen de Docker.  Al mismo tiempo, Helm no est√° configurado para ensamblar y empaquetar, es decir, no sabe c√≥mo trabajar con im√°genes de Docker. <br></blockquote><br>  Esto es lo mismo que si, para realizar una instalaci√≥n de actualizaci√≥n para una biblioteca peque√±a, se le enviara a una carpeta distante para ejecutar el compilador. <br><br>  Por lo tanto, decimos que Helm no sabe c√≥mo trabajar con im√°genes. <br><img src="https://habrastorage.org/webt/am/li/ia/amliiax7srabjlml74xvn2xtyb8.png"><br><br><h3>  Desarrollo <br></h3><br>  El pr√≥ximo dolor de cabeza es el desarrollo.  En desarrollo, queremos cambiar r√°pida y convenientemente nuestro c√≥digo.  Ha pasado el tiempo cuando perforaste las tarjetas perforadas, y el resultado se obtuvo despu√©s de 5 d√≠as.  Todos est√°n acostumbrados a reemplazar una letra con otra en el editor, presionar la compilaci√≥n, y el programa ya modificado funciona. <br><br>  Resulta que al cambiar el c√≥digo, se necesitan muchas acciones adicionales: preparar un archivo Docker;  Ejecute Docker para que construya la imagen;  empujarlo a alguna parte;  implementar en el cl√∫ster de Kubernetes.  Y solo entonces obtendr√° lo que desea en Producci√≥n, y podr√° verificar el c√≥digo. <br><br>  Todav√≠a hay inconvenientes debido a la <strong>actualizaci√≥n destructiva</strong> helm upgrade.  Miraste c√≥mo funciona todo, a trav√©s de kubectl exec miraste dentro del contenedor, todo est√° bien.  En este punto, comienza la actualizaci√≥n, se descarga una nueva imagen, se inician nuevos recursos y se eliminan los antiguos; debe comenzar todo desde el principio. <br><br>  El mayor dolor son las <strong>grandes im√°genes</strong> .  La mayor√≠a de las empresas no trabajan con aplicaciones peque√±as.  A menudo, si no es un supermonolito, entonces al menos un peque√±o monol√≠tico.  Con el tiempo, los anillos anuales crecen, la base del c√≥digo aumenta y gradualmente la aplicaci√≥n se vuelve bastante grande.  En repetidas ocasiones me encontr√© con im√°genes de Docker de m√°s de 2 GB.  Imagine ahora que est√° realizando un cambio en un byte en su programa, presione un bot√≥n y una imagen Docker de dos gigabytes comienza a ensamblarse.  Luego presiona el bot√≥n Siguiente y comienza la transferencia de 2 GB al servidor. <br><br>  Docker le permite trabajar con capas, es decir  comprueba si hay una capa u otra y env√≠a la que falta.  Pero el mundo es tal que la mayor√≠a de las veces ser√° una gran capa.  Mientras que 2 GB ir√°n al servidor, mientras que ir√°n a Kubernetes con el registro Docker, se implementar√°n de todas las formas, hasta que finalmente comience, puede beber t√© con seguridad. <br><br>  Helm no ofrece ninguna ayuda con im√°genes Docker grandes.  Creo que esto no deber√≠a ser as√≠, pero los desarrolladores de Helm lo saben mejor que todos los usuarios, y Steve Jobs le sonr√≠e. <br><br><img src="https://habrastorage.org/webt/xk/wk/4z/xkwk4zdrvxa1xpejhdf02ogsdgo.png"><br><br>  El bloque con el desarrollo tambi√©n se volvi√≥ rojo. <br><br><img src="https://habrastorage.org/webt/pu/o2/ha/puo2ha8r-gmi9cqnkr_sfdv_mpq.png"><br><br><h3>  Automatizaci√≥n Ambiental <br></h3><br>  La √∫ltima direcci√≥n, la automatizaci√≥n del medio ambiente, es un √°rea interesante.  Antes del mundo de Docker (y Kubernetes, como modelo relacionado), no hab√≠a forma de decir: "¬°Quiero instalar mi aplicaci√≥n en este servidor o en estos servidores para que haya n r√©plicas, 50 dependencias, y todo funciona autom√°ticamente!"  Tal, se podr√≠a decir, ¬°qu√© fue, pero no fue! <br><br>  Kubernetes proporciona esto y es l√≥gico usarlo de alguna manera, por ejemplo, para decir: "Estoy implementando un nuevo entorno aqu√≠ y quiero que todos los equipos de desarrollo que han preparado sus aplicaciones puedan hacer clic en un bot√≥n y todas estas aplicaciones se instalar√°n autom√°ticamente en el nuevo entorno" .  Te√≥ricamente, Helm deber√≠a ayudar en esto, de modo que la configuraci√≥n se pueda tomar de una fuente de datos externa, S3, GitHub, desde cualquier lugar. <br><br>  Es recomendable que haya un bot√≥n especial en Helm "¬°Hazme el bien, finalmente!"  - e inmediatamente se volver√≠a bueno.  Kubernetes te permite hacer esto. <br><br>  Esto es especialmente conveniente porque Kubernetes se puede ejecutar en cualquier lugar y funciona a trav√©s de la API.  Al iniciar minikube localmente, ya sea en AWS o en Google Cloud Engine, obtienes Kubernetes de inmediato y funciona igual en todas partes: presiona un bot√≥n y todo est√° bien de inmediato. <br><br>  Parece que, naturalmente, Helm te permite hacer esto.  Porque de lo contrario, ¬øqu√© sentido ten√≠a crear Helm en general? <br><br>  Pero resulta que no! <br><img src="https://habrastorage.org/webt/xs/mf/h5/xsmfh5898yrlawroqge2dn6v_iw.png"><br><br>  No hay automatizaci√≥n del medio ambiente. <br><br><h2>  Alternativas <br></h2><br>  Cuando hay una aplicaci√≥n de Kubernetes que todos usan (ahora es de hecho la soluci√≥n n√∫mero 1), pero Helm tiene los problemas discutidos anteriormente, la comunidad no pudo evitar responder.  Comenz√≥ a crear herramientas y soluciones alternativas. <br><br><h3>  Motores de plantillas <br></h3><br>  Parecer√≠a que, como motor de plantillas, Helm resolvi√≥ todos los problemas, pero a√∫n as√≠ la comunidad crea alternativas.  Perm√≠teme recordarte los problemas del motor de plantillas: verbosidad y reutilizaci√≥n de c√≥digo. <br><br>  Un buen representante aqu√≠ es <strong>Ksonnet.</strong>  Utiliza un modelo de datos y conceptos fundamentalmente diferente, y no funciona con los recursos de Kubernetes, sino con sus propias definiciones: <br>  <em>prototipo (params) -&gt; componente -&gt; aplicaci√≥n -&gt; entornos.</em> <em><br></em> <br><br>  Hay partes que componen el prototipo.  El prototipo est√° parametrizado por datos externos y aparece el componente.  Varios componentes componen una aplicaci√≥n que puede ejecutar.  Se ejecuta en diferentes entornos.  Aqu√≠ hay algunos enlaces claros a los recursos de Kubernetes, pero puede que no haya una analog√≠a directa. <br><br>  El objetivo principal de Ksonnet era, por supuesto, <strong>reutilizar recursos</strong> .  Quer√≠an asegurarse de que una vez que escribiste el c√≥digo, pudieras usarlo en cualquier lugar, lo que aumenta la velocidad de desarrollo.  Si crea una gran biblioteca externa, las personas pueden publicar constantemente sus recursos all√≠, y toda la comunidad podr√° reutilizarlos. <br><br>  Te√≥ricamente, esto es conveniente.     . <br><br><h3>   <br></h3><br>  ,    ‚Äî   ,  ,  .  Ksonnet  .  Ksonnet    Helm ,         ,       ..   ,    ,     ,       . <br><img src="https://habrastorage.org/webt/-e/ed/76/-eed76zagrsnj_ydzkcqedelf1g.png"><br><br>    ,   ,  ,    ,   .      .    ,      ,   ,      0.1. ,     . <br><img src="https://habrastorage.org/webt/-c/om/sm/-comsmfipyfxjxvsbit48zbwhoe.png"><br><br> ,   ‚Äî  <strong>KubePack</strong> ,       . <br><br><h3>  Desarrollo <br></h3><br>      : <br><br><ol><li>    Helm; <br></li><li>  Helm; <br></li><li>    ,        ; <br></li><li>   ,   . <br></li></ol><br><h4> 1.   Helm <br></h4><br>   ‚Äî  <strong>Draft</strong> .   ‚Äî      ,   ,     . Draft    ‚Äî Heroku-style: <br><br><ul><li>      (pack); </li><li> , ,  Python ¬´Hello, world!¬ª; </li><li>  ,   Docker- (   ); </li><li>   ,   ,   docker-registry,     ; </li><li>    . </li></ul><br>        ,   ,   . <br><br>          Helm,   Draft  Helm-,        production ready,   ,  Draft   Helm-,  .       . <br><br> ,  Draft           ,      Helm-. Draft ‚Äî     . <br><br><h4> 2.   Helm <br></h4><br>   Helm Charts      Kubernetes-,       Helm Charts.   : <br><br><ul><li> GitKube; </li><li> Skaffold; </li><li> Forge. </li></ul><br>      Helm,    .  ,   ,     command line interface,  Chart ,     git push   . <br><br>   ,     docker build, docker push  kubectl rollout.   ,     Helm,   .        . <br><br><h4> 3.     <br></h4><br>   ‚Äî    .    ‚Äî <strong>Metaparticle</strong> . ,     Python,    Python  ,     . <br><br><blockquote>       ,          ,      ,      sysconfig  ..    . <br></blockquote><br>     ,     ,    ,  -           Kubernetes-. <br><br>    :   ,     ;   ,      ;        .. <br><img src="https://habrastorage.org/webt/wn/vg/4-/wnvg4-72i7bhg5dabn9_1zinijw.png"><br><br>   ,  ,     ,    -  ,   Python-     Kubernetes-.     ? <br><br>     - ,    .    . ,  ,       preinstall ,   -     .      Kubernetes-,       Metaparticle,   . <br><br>     ,    ,   Kubernetes-   .  ,       ,  Metaparticle. <br><br><img src="https://habrastorage.org/webt/l1/py/fi/l1pyfi0l2xjkhgatomlhj6sil3s.png"><br><br>    Metaparticle,      Helm .   ,       . <br><br> <strong>Telepresence/Ksync</strong> ‚Äî   . ,      ,  Helm-,   .   ,   -  ,       - , ,      . ,     Production-,     Production - . <br><br>  Kubernetes  ,        Docker,  registry,   Kubernetes.          .      ,    . <br><br> , ,       ,    Development     .    :  ,   ,   ,     ,     ‚Äî   ,   ,   ,   Helm,  ,     . <br><br>   ,    . <br><br><h4> 4.   Kubernetes  Kubernetes <br></h4><br>   ,      Kubernetes  Kubernetes.  ,       Helm-    ,         .          ,      .     ,    Docker-compose . <br><br>    Docker-compose ,       ,    ,    ,       Docker,     Kubernetes,    Docker-compose,   .     ,    .   ,       Docker.     . <br><br>        minikube   ,      Docker-compose,    .  ,   ,  Docker-compose ‚Äî  10     .         ,   . <br><img src="https://habrastorage.org/webt/m2/h4/tt/m2h4tthsizav7rv4tubxlkfo0qg.png"><br><br>     Docker-compose,    ,         . <br><br><h3>    <br></h3><br> ,    ‚Äî   Helm, , ,  Helm -  .       CI/CD,   ,   .     ‚Äî      Helm,     ? ,     ,    . <br><br>     CI/CD,     ,      docker',  set-,         ,    ‚Äî   . <br><br> CI/CD ‚Äî       ,     . <br><br><h2>  Resumen <br></h2><br><img src="https://habrastorage.org/webt/fy/pc/ba/fypcbahu2fgsz16tn-imk2a5vpy.png"><br><br>  5   Helm   .   ,    .     ,  ,       .     ,          ,  ,   . <br><br><h2>  Helm <br></h2><br> ,       ,   Helm  .   ,  Helm    ,   . ,     ,   ,     Helm. <br><br> ,     Road Map.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kuberneres Helm  community</a> ,          ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Helm V3</a> . <br><br><h3>   Tiller,  cli <br></h3><br>      ,   .  Helm    : <br><br><ol><li>  ,       (cmd  ..). <br></li><li> Tiller ‚Äî  ,      Kubernetes. <br></li></ol><br> Tiller  ,     Command Line Interface.    : ¬´     Chart¬ª ‚Äî   Helm  , ,  Tiller',    : ¬´,  - ! ,      Kubernetes-¬ª ‚Äî  . <br><br>    Helm,    Tiller       ,    .    ,   ,    ,     ,   Tiller' ‚Äî   namespace .  Tiller      namespace,    ,       .      ,     . <br><br>    V3 Tiller  . <br><img src="https://habrastorage.org/webt/k2/rs/3d/k2rs3djfuxajcdf1cgr2whzob58.png"><br><br>     ?  ,   ,   Command Line Interface,  ,     Kubernetes. ,   Kubernetes      ,    Tiller.      kubectl cli    . <br><br>  Tiller  <strong> </strong> .    ,     Kubernetes  Command Line Interface  : , , , pre-  post-.    . <br><br><h3> Lua-  Chart <br></h3><br>       ,  ‚Äî ,       <strong>lua-</strong> .    Chart    lua-,     .       . ,  .   ,   ,    ,      . <br><img src="https://habrastorage.org/webt/cr/ie/h1/crieh1qr2o9qc9oocuti_i9bhhm.png"><br><br> Lua      ,      ,   ,  - ,    ,      . <br><br>  ,   ,   .  ,           .       Kubernetes,    - ,    ,    ,   ,    .  Veamos que pasa. <br><br><h3> Release- + secret   <br></h3><br>  ,     ,  <strong>Release-</strong>    ,  Release  .   ,     Release-,     ,  ,   CRD,  , . <br><br><h3>   namespace  <br></h3><br>  Release-     namespace,     ,   -  <strong>   Tiller'</strong>  namespace ‚Äî  ,      . <br><br><h3> CRD: controller <br></h3><br>        ,   CRD-controller  Helm   ,       push-.        . <br><br><h2>   <br></h2><br>  ,     . <br><img src="https://habrastorage.org/webt/c-/kk/zv/c-kkzvsvdzuwr3werccbixl1an4.png"><br><br>  ,  <strong>Helm</strong> .   ,      ,     ,     .  ,       ,      .  Helm ‚Äî  -   Kubernetes.      -  ,  ,  . <br><br>  , <strong>CI/CD</strong> ,    .      <strong>  Slack</strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tenemos un bot que informa cuando una nueva compilaci√≥n pas√≥ en master, y que todas las pruebas fueron exitosas. </font><font style="vertical-align: inherit;">Usted le dice: "Quiero instalar esto en la puesta en escena", y √©l instala, usted dice: "¬°Quiero ejecutar una prueba all√≠!" </font><font style="vertical-align: inherit;">- Y √©l comienza. </font><font style="vertical-align: inherit;">Bastante comodo </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para el desarrollo, use </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker-compose o Telepresence.</font></font></strong> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Varias versiones de un servicio. </font></font><br></h2><br><img src="https://habrastorage.org/webt/gg/cq/wv/ggcqwvrbonamtzi4wudhx3t9jly.png"><br><br>  Al final, analizaremos la situaci√≥n cuando hay dos aplicaciones A y B, que dependen de C, pero C de diferentes versiones.  Necesito resolver este problema: <br><br><ul><li>  para el desarrollo, porque de hecho tenemos que desarrollar lo mismo, pero dos versiones diferentes; </li><li>  para liberar; </li><li>  para un conflicto de nombres, porque en todos los administradores de paquetes est√°ndar, instalar dos paquetes de versiones diferentes puede causar problemas. </li></ul><br>  De hecho, Kubernetes decide todo por nosotros, solo necesita usarlo correctamente. <br><br><img src="https://habrastorage.org/webt/wq/ra/mr/wqramrfg3yh1izbnppjmxeuc9hs.png"><br><br>  Aconsejar√≠a crear 4 Gr√°ficos en t√©rminos de Helm, 3 repositorios (para el repositorio C, esto solo ser√°n dos ramas diferentes).  Lo que es m√°s interesante, todas las instalaciones para v1 y para v2 deben contener informaci√≥n sobre la versi√≥n o para qu√© servicio se cre√≥.  Una soluci√≥n en la diapositiva, ap√©ndice C;  el nombre de la versi√≥n indica que esta es la versi√≥n v1 para el servicio A;  El nombre del servicio tambi√©n contiene la versi√≥n.  Este es el ejemplo m√°s simple, puede hacerlo de manera completamente diferente.  Pero lo m√°s importante es que los nombres son √∫nicos. <br><br>  El segundo son las dependencias transitivas, y aqu√≠ es m√°s complicado. <br><img src="https://habrastorage.org/webt/pi/5l/ya/pi5lyafuuagwemrrfdhkdb_zby4.png"><br><br>  Por ejemplo, est√° desarrollando una cadena de servicios y desea probar A. Para esto, debe transferir todas las dependencias de las que depende A, incluida la transitiva, a la definici√≥n Helm de su paquete.  Pero al mismo tiempo, desea desarrollar B y tambi√©n probarlo: c√≥mo hacerlo es incomprensible, porque tambi√©n necesita poner todas las dependencias transitivas en √©l. <br><br>  Por lo tanto, le aconsejo que no agregue todas las dependencias dentro de cada paquete, sino que las haga independientes y desde el exterior controlen lo que se est√° ejecutando.  Esto es inconveniente, pero es el menor de dos males. <br><br><h2>  Enlaces utiles <br></h2><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Borrador</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitKube</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tim√≥n</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ksonnet</a> <br><br>  ‚Ä¢ Pegatinas de Telegram: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dos</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sig-Apps</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">KubePack</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Metapart√≠culas</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Skaffold</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Helm v3</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Docker-componer</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ksync</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">telepresencia</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Drone</a> <br><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fragua</a> <br><br>  Perfil del orador Ivan Glushkov en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> , en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">twitter</a> , en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Habr</a> . <br><br><blockquote>  Buenas noticias <br><br>  En nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal de YouTube,</a> <strong>abrimos un video de todos los informes sobre DevOps del festival RIT ++</strong> .  Esta es una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lista de reproducci√≥n</a> separada, pero en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lista completa de</a> videos hay muchas cosas √∫tiles de otras conferencias. <br><br>  Mejor a√∫n, suscr√≠base al canal y al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bolet√≠n</a> , porque en el pr√≥ximo a√±o <strong>veremos muchos devops</strong> : en mayo, el marco de RIT ++;  en primavera, verano y oto√±o como una secci√≥n de HighLoad ++, y un oto√±o independiente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DevOpsConf Rusia</a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es431540/">https://habr.com/ru/post/es431540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es431530/index.html">Lecci√≥n abierta "Dise√±o de material Android: resumen de actualizaci√≥n"</a></li>
<li><a href="../es431532/index.html">Memorias que constan de piezas de 2 nm de espesor.</a></li>
<li><a href="../es431534/index.html">Identidades problem√°ticas entre desarrolladores</a></li>
<li><a href="../es431536/index.html">Ceph. Anatom√≠a del desastre</a></li>
<li><a href="../es431538/index.html">Case Rate & Goods y Mobio: aumento gradual en todos los indicadores</a></li>
<li><a href="../es431542/index.html">Desarrollo efectivo y mantenimiento de roles Ansible</a></li>
<li><a href="../es431544/index.html">Llevar DevOps a las masas</a></li>
<li><a href="../es431546/index.html">¬øPor qu√© estamos diciendo bien?</a></li>
<li><a href="../es431548/index.html">Solar Dozor - ¬øQu√© hay detr√°s de las estrellas?</a></li>
<li><a href="../es431550/index.html">Moldeo por inyecci√≥n de pel√≠cula (IMD): c√≥mo funciona</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>