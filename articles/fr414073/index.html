<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎳 🕷️ 🤮 Migration de jQuery vers Vue.js 👩🏾‍🤝‍👨🏻 👨🏼‍⚖️ 👣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur de l'article, dont nous publions la traduction aujourd'hui, estime qu'il existe de nombreux autres programmeurs dans le monde qui, lorsqu'ils...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Migration de jQuery vers Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/414073/">  L'auteur de l'article, dont nous publions la traduction aujourd'hui, estime qu'il existe de nombreux autres programmeurs dans le monde qui, lorsqu'ils ont besoin de développer une application Web simple, se tournent vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jQuery</a> .  Habituellement, cela se produit lorsqu'une certaine page doit être équipée de fonctionnalités interactives simples, mais l'utilisation d'une sorte de framework JavaScript semble exagérée.  Après tout, ce sont des kilo-octets de code inutile, des modèles, des outils pour construire des projets, des outils pour emballer des modules ... En même temps, se connecter à une page jQuery en utilisant une ressource CDN est aussi simple que de peler des poires. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ar/by/h5/arbyh52jbxw4u2v4d3ogudt1evu.jpeg"></a> <br><br>  Cet article explique comment traduire un projet créé à l'aide de jQuery en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vue.js.</a>  Ce projet sera créé sur jQuery, puis repensé à l'aide de Vue.  L'auteur du matériel veut démontrer à tout le monde que l'utilisation de Vue, même dans des projets relativement petits, ne signifie pas nécessairement une augmentation excessive de la taille du code de tels projets et une charge supplémentaire importante pour le programmeur.  Ceci, au contraire, avec presque la même taille de code auxiliaire que lors de l'utilisation de jQuery, vous permet d'augmenter la productivité et d'améliorer la qualité des applications. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Aperçu du projet</font> </h2><br>  Nous allons développer un simple compte électronique basé sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> modèle open source de Sparksuite. <br><br>  Souvent, ces études de cas utilisent toutes sortes de listes de tâches.  J'espère qu'un départ de cette tradition rendra l'histoire plus fraîche et plus intéressante, et, en même temps, notre tâche sera assez difficile pour démontrer les avantages d'utiliser quelque chose comme Vue pour développer de petits projets.  Le manuel est conçu pour que tout le monde sans difficultés particulières puisse le reproduire et maîtriser les méthodes de travail proposées. <br><br>  Voici le modèle de compte avec lequel nous voulons travailler. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/147/ed9/165/147ed9165a5b64c03ae0c5bbabe761bd.png"></div><br>  <i><font color="#999999">Facture électronique</font></i> <br><br>  Nous allons lui ajouter des fonctionnalités interactives, afin qu'il soit possible de choisir un produit, sa quantité et son prix unitaire.  Lors de la modification des valeurs, le coût total des marchandises et le montant total du document seront recalculés.  De plus, nous ajouterons ici un bouton qui vous permet d'insérer de nouvelles lignes vides dans le compte. <br><br>  J'ai modifié le modèle en convertissant le code HTML de la chaîne vide au format suivant: <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>$<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>$0.00<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Développement de projet JQuery</font> </h2><br>  Voyons d'abord comment résoudre notre problème à l'aide de jQuery. <br><br><pre> <code class="hljs scala">$(<span class="hljs-symbol"><span class="hljs-symbol">'tabl</span></span>e').on(<span class="hljs-symbol"><span class="hljs-symbol">'mouseup</span></span> keyup', <span class="hljs-symbol"><span class="hljs-symbol">'input</span></span>[<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=number</span></span></span><span class="hljs-class">]', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">calculateTotals</span></span></span><span class="hljs-class">)</span></span>;</code> </pre> <br>  Nous connectons l'écouteur d'événements à la table.  Cet auditeur appellera la fonction <code>calculateTotals</code> lorsque les valeurs correspondant au coût unitaire du produit ou à sa quantité changent: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateTotals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)  </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> subtotals = $(<span class="hljs-string"><span class="hljs-string">'.item'</span></span>).map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">idx, val</span></span></span><span class="hljs-function">)  =&gt;</span></span> calculateSubtotal(val)).get(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> total = subtotals.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, v</span></span></span><span class="hljs-function">)  =&gt;</span></span> a + <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(v), <span class="hljs-number"><span class="hljs-number">0</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.total td:eq(1)'</span></span>).text(formatAsCurrency(total)); }</code> </pre> <br>  La fonction prend les lignes du tableau et les parcourt, en passant chacune des lignes à la fonction <code>calculateSubtotal</code> et en résumant les résultats.  Le résultat du calcul tombe dans la constante constante.  Par conséquent, le montant total du document est remplacé dans le champ correspondant du compte. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateSubtotal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(row)</span></span></span></span> { const <span class="hljs-variable"><span class="hljs-variable">$row</span></span> = <span class="hljs-variable"><span class="hljs-variable">$</span></span>(row); const inputs = <span class="hljs-variable"><span class="hljs-variable">$row</span></span>.find(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); const subtotal = inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>].value * inputs[<span class="hljs-number"><span class="hljs-number">2</span></span>].value; <span class="hljs-variable"><span class="hljs-variable">$row</span></span>.find(<span class="hljs-string"><span class="hljs-string">'td:last'</span></span>).text(formatAsCurrency(subtotal)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> subtotal; }</code> </pre> <br>  Dans ce code, nous prenons des références à tous les champs <code>&lt;input&gt;</code> présents dans la ligne, puis nous multiplions les valeurs stockées dans les deuxième et troisième champs pour obtenir la valeur de <code>subtotal</code> - <code>subtotal</code> .  Cette valeur est ensuite insérée dans la dernière cellule de la ligne.  Nous formater cette valeur à l'aide de la fonction <code>formatAsCurrency</code> .  Voici son code: <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatAsCurrency</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(amount)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> `$<span class="hljs-variable"><span class="hljs-variable">$</span></span>{Number(amount).toFixed(<span class="hljs-number"><span class="hljs-number">2</span></span>)}`; }</code> </pre> <br>  De plus, nous avons une petite fonction auxiliaire que nous utilisons afin d'assurer la même apparence des champs avec les montants pour les marchandises et pour le document dans son ensemble.  À savoir, nous devons avoir le signe $ devant les nombres dans ces champs, et que ce soient des nombres décimaux avec deux décimales. <br><br><pre> <code class="hljs php">$(<span class="hljs-string"><span class="hljs-string">'.btn-add-row'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $lastRow = $(<span class="hljs-string"><span class="hljs-string">'.item:last'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $newRow = $lastRow.<span class="hljs-keyword"><span class="hljs-keyword">clone</span></span>(); $newRow.find(<span class="hljs-string"><span class="hljs-string">'input'</span></span>).val(<span class="hljs-string"><span class="hljs-string">''</span></span>); $newRow.find(<span class="hljs-string"><span class="hljs-string">'td:last'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'$0.00'</span></span>); $newRow.insertAfter($lastRow); $newRow.find(<span class="hljs-string"><span class="hljs-string">'input:first'</span></span>).focus(); });</code> </pre> <br>  Et enfin, nous avons un gestionnaire d'événements pour cliquer sur le bouton <code>Add row</code> , qui sert à ajouter une nouvelle ligne au document.  Ici, nous prenons la dernière ligne du tableau contenant les données du produit et en faisons une copie.  Dans le même temps, nous insérons des données standard dans les champs de cette nouvelle ligne.  De plus, nous pouvons prendre soin de la commodité de l'utilisateur et mettre l'accent sur le premier champ d'une nouvelle ligne, ce qui permettra à l'utilisateur, immédiatement après l'ajout d'une nouvelle ligne, de commencer à saisir des données dans son premier champ. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> exemple de travail d'un compte dont les fonctionnalités interactives sont implémentées à l'aide des outils jQuery. <br><br><h2>  <font color="#3AC1EF">Inconvénients de la solution basée sur jQuery</font> </h2><br>  Demandons-nous quels sont les inconvénients de l'approche ci-dessus, ou plutôt, comment améliorer notre projet. <br><br>  Vous avez peut-être entendu parler de nouvelles bibliothèques, comme Vue et React, qui leur permettraient de fonctionner dans un style déclaratif plutôt qu'impératif.  Si vous regardez le code jQuery ci-dessus, il est clair qu'il est principalement lu comme un ensemble d'instructions décrivant la manipulation du DOM.  Le but de chaque section de ce code, c'est-à-dire la réponse à la question de ce qu'il fait, est souvent assez difficile à comprendre en regardant comment il le fait.  Bien sûr, vous pouvez clarifier les intentions des fragments de code utilisés en les divisant en fonctions avec des noms soigneusement choisis.  Cependant, si vous laissez ce code pendant un certain temps, puis y revenez, il s'avère que pour le comprendre, vous devez encore faire quelques efforts. <br><br>  Un autre problème avec ce code est que l'état de l'application est stocké dans le DOM.  Les informations sur les produits que l'utilisateur souhaite commander n'existent que dans le cadre du balisage HTML dans l'interface utilisateur.  Si tout ce dont nous avons besoin est de produire des données en un seul endroit, ce problème ne semble pas si grave.  Cependant, dès qu'il devient nécessaire d'afficher ces données à plusieurs endroits de l'application, nous sommes confrontés à la tâche de synchronisation des données.  Sans, comme dans notre cas, une source unique de données fiables, il est très difficile de les maintenir à jour tout au long de l'application. <br><br>  En utilisant jQuery, rien ne nous empêche de stocker l'état de l'application en dehors du DOM et d'éviter le problème décrit ci-dessus, des bibliothèques telles que Vue fournissent des fonctionnalités qui aident à créer des applications avec une bonne architecture.  Ces bibliothèques aident le programmeur à écrire du code plus propre et plus structuré. <br><br><h2>  <font color="#3AC1EF">Traduction de projet sur Vue</font> </h2><br>  Voyons maintenant comment recréer la même fonctionnalité sur Vue.  Afin de tirer parti des capacités de Vue, connectez simplement cette bibliothèque à une page Web standard, comme vous le faites avec jQuery.  Autrement dit, il n'est pas nécessaire d'utiliser le système pour emballer des modules ou un transpilateur; vous n'avez pas besoin de diviser l'application en composants et de décomposer leur code en fichiers .vue. <br><br>  Nous commençons à traduire le projet en Vue en remplaçant le contenu de la <code>&lt;script&gt;</code> : <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  L'étape suivante consiste à créer une nouvelle instance de Vue: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ el: <span class="hljs-string"><span class="hljs-string">'table'</span></span> });</code> </pre> <br>  Le seul paramètre à passer au constructeur de la nouvelle instance de Vue est <code>el</code> .  Il s'agit d'un sélecteur (le même que celui utilisé dans jQuery) qui identifie la partie du document que nous voulons contrôler avec Vue. <br><br>  Vue peut être affecté à des tâches de différentes tailles - de la gestion d'une page entière (dans le cas, par exemple, d'une application d'une seule page) à un petit fragment enfermé dans une <code>&lt;div&gt;</code> .  Dans notre exemple, Vue sera responsable de travailler avec la table HTML. <br><br><h2>  <font color="#3AC1EF">Les données</font> </h2><br>  Ajoutez des données conditionnelles pour trois lignes du document à l'instance Vue: <br><br><pre> <code class="hljs powershell">const app = new Vue({ el: <span class="hljs-string"><span class="hljs-string">'table'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>: {   items: [     { <span class="hljs-type"><span class="hljs-type">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Website design'</span></span>, <span class="hljs-type"><span class="hljs-type">quantity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">price</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> },     { <span class="hljs-type"><span class="hljs-type">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Hosting (3 months)'</span></span>, <span class="hljs-type"><span class="hljs-type">quantity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">price</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span> },     { <span class="hljs-type"><span class="hljs-type">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Domain name (1 year)'</span></span>, <span class="hljs-type"><span class="hljs-type">quantity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">price</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> },   ] } });</code> </pre> <br>  La propriété <code>data</code> est l'endroit où nous stockons l'état de l'application.  L'état comprend non seulement les données avec lesquelles notre application doit fonctionner, mais également des informations sur l'état de l'interface utilisateur (par exemple, quelle section de l'application, composée de plusieurs onglets, est actuellement active, ou si un certain widget est minimisé, comme un "accordéon", ou élargi). <br><br>  Vue permet de garder l'état de l'application distinct de sa présentation (c'est-à-dire du DOM) et aide à stocker l'état de manière centralisée en un seul endroit, qui est une source unique de données fiables. <br><br><h2>  <font color="#3AC1EF">Modification du modèle</font> </h2><br>  Configurez maintenant le modèle pour qu'il affiche les données stockées dans l'objet de <code>data</code> .  Puisque nous avons dit au framework que nous voulions travailler avec la table en utilisant l'instance de Vue, nous pouvons utiliser la syntaxe du modèle Vue dans le code HTML qui décrit cette table afin de dire à Vue comment rendre la table et comment l'utiliser au travail. <br><br>  En utilisant l'attribut <code>v-for</code> , nous pouvons déduire un bloc de code HTML pour chaque élément du tableau des <code>items</code> : <br><br><pre> <code class="hljs javascript">&lt;tr <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"item"</span></span> v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"item in items"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Vue répétera ce balisage pour chaque élément du tableau (ou objet) transmis à <code>v-for</code> .  Cela nous permet de faire référence à chaque élément de la boucle.  Dans ce cas, cet élément est représenté par la variable <code>item</code> .  Étant donné que Vue supervise les propriétés de l'objet de <code>data</code> , le framework met à jour dynamiquement le balisage lorsque le contenu du tableau d' <code>items</code> change.  Tout ce que nous devons faire est de modifier l'état en ajoutant ou en supprimant des éléments, et Vue mettra automatiquement à jour l'interface utilisateur. <br><br>  De plus, nous devons ajouter des champs de saisie que l'utilisateur pourrait remplir en entrant une description du produit, le prix unitaire, la quantité: <br><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item.description"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">$</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item.price"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item.quantity"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">$</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.price * item.quantity }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Ici, nous utilisons l'attribut <code>v-model</code> pour configurer la liaison de données bidirectionnelle entre les champs d'entrée et les propriétés dans le modèle de données.  Cela signifie que la modification des données dans les champs de saisie entraînera leur modification dans le modèle, et vice versa. <br><br>  Dans la dernière cellule, nous utilisons des accolades <code>{{}}</code> , nous les utilisons pour afficher du texte.  Vous pouvez utiliser n'importe quelle expression JavaScript fonctionnelle entre parenthèses.  Dans ce cas, nous multiplions les deux propriétés de l'élément et produisons ce qui s'est passé.  Encore une fois, Vue supervise le modèle de données; la modification d'une propriété recomptera automatiquement l'expression. <br><br><h2>  <font color="#3AC1EF">Événements et méthodes</font> </h2><br>  Nous avons maintenant un modèle prêt à afficher la collection d' <code>items</code> et nous sommes confrontés à la question de savoir comment ajouter de nouvelles lignes au tableau.  Puisque Vue affichera tout ce qui se trouve dans le tableau des <code>items</code> sur la page, afin d'afficher une chaîne vide sur la page, il suffit de passer l'objet Vue avec toutes les valeurs qui devraient être présentes dans le tableau des <code>items</code> . <br><br>  Afin de créer une fonction accessible à partir du modèle, vous devez passer cette fonction à l'instance Vue en tant que propriété de l'objet <code>methods</code> : <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-comment"><span class="hljs-comment">// ... methods: {   myMethod() {} }, // ... })</span></span></code> </pre> <br>  <code>addRow</code> méthode <code>addRow</code> , qui peut être appelée pour ajouter un nouvel élément au tableau d' <code>items</code> : <br><br><pre> <code class="hljs kotlin">methods: { addRow() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.push({ description: <span class="hljs-string"><span class="hljs-string">''</span></span>, quantity: <span class="hljs-number"><span class="hljs-number">1</span></span>, price: <span class="hljs-number"><span class="hljs-number">0</span></span> }); }, },</code> </pre> <br>  Veuillez noter que toutes les méthodes que nous créons seront automatiquement liées à l'instance Vue, ce qui nous permettra d'accéder aux propriétés de l'objet de <code>data</code> et d'autres méthodes en tant que propriétés de <code>this</code> ci à partir de ces méthodes. <br><br>  Nous avons donc maintenant une méthode.  Comment l'appeler en cliquant sur le bouton <code>Add row</code> ?  Pour ajouter des écouteurs d'événements aux contrôles dans un modèle, Vue utilise la syntaxe <code>v-on:event-name</code> . <br><br><pre> <code class="hljs pgsql">&lt;button <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="btn-add-row" @click="addRow"&gt;<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>&lt;/button&gt;</code> </pre> <br>  Vue fournit également un raccourci pour la construction <code>v-on</code> : qui ressemble à <code>@</code> .  Il est utilisé dans l'extrait de code ci-dessus.  Vous pouvez utiliser n'importe quelle méthode de l'instance Vue comme gestionnaire d'événements. <br><br><h2>  <font color="#3AC1EF">Propriétés calculées</font> </h2><br>  Il ne nous reste plus qu'à retirer le montant total du document au bas de la facture.  Cela peut être fait dans le modèle lui-même.  Comme déjà mentionné, Vue vous permet de placer n'importe quelle expression JS fonctionnelle dans les constructions à partir de crochets.  Cependant, il est préférable de suivre une approche dans laquelle seule une logique très simple et rien de plus est stockée dans le modèle.  Si la logique est séparée du modèle, le code sera plus propre, il sera plus facile à tester. <br><br>  À cette fin, nous pouvons utiliser la méthode habituelle, mais je pense que dans ce cas, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">propriété</a> dite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">calculée</a> est la meilleure pour nous.  Le travail avec de telles propriétés ressemble au travail ci-dessus avec les méthodes.  A savoir, pour créer de telles propriétés, un objet <code>computed</code> est passé à l' <code>computed</code> Vue, contenant des fonctions dont nous voulons utiliser les résultats d'exécution dans le modèle: <br><br><pre> <code class="hljs coffeescript">const app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ... computed: {   total() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.reduce(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(acc, item)</span></span></span><span class="hljs-function"> =&gt;</span></span> acc + (item.price * item.quantity), <span class="hljs-number"><span class="hljs-number">0</span></span>);   } } });</code> </pre> <br>  Maintenant, la propriété calculée peut être référencée à partir du modèle: <br><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"total"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">colspan</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"3"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Total: $</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ total }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Comme vous l'avez peut-être remarqué, les propriétés calculées dans le modèle fonctionnent comme s'il s'agissait de données.  Dans ce cas, vous n'avez pas besoin d'appeler quoi que ce soit dans le modèle.  L'utilisation de propriétés calculées présente un autre avantage.  Vue est un système assez intelligent, il met en cache les valeurs retournées et ne les raconte que si les propriétés dont dépendent les valeurs des propriétés calculées sont modifiées. <br><br>  Si nous utilisions la méthode pour calculer le montant total du document, les calculs seraient effectués à chaque sortie du modèle.  Mais, puisque nous utilisons la propriété calculée, le montant total est recalculé uniquement lors de la modification des valeurs de <code>quantity</code> ou de <code>price</code> dans les lignes du tableau. <br><br><h2>  <font color="#3AC1EF">Filtres</font> </h2><br>  Vous avez peut-être remarqué qu'il y a une petite erreur dans l'implémentation de notre projet créé à l'aide de Vue.  Cela consiste dans le fait que lorsque les prix des marchandises individuelles sont exprimés en nombres entiers, les valeurs calculées des montants totaux en lignes et le montant total dans le document sont affichés en dollars entiers, sans cents.  Nous aimerions, comme dans l'exemple jQuery, ces nombres contiennent toujours deux décimales. <br><br>  Au lieu de modifier le code responsable du calcul de la valeur totale de la ligne et le code qui calcule le montant total du document, nous pouvons tirer parti des fonctionnalités pratiques de formatage des données de Vue.  Il s'agit de filtres. <br><br>  Comme vous l'avez probablement déjà compris, pour créer un filtre, il suffit de passer un objet (des <code>filters</code> dans ce cas) avec la clé correspondante à l'instance Vue: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-comment"><span class="hljs-comment">// ... filters: {   currency(value) {     return value.toFixed(2);   } } });</span></span></code> </pre> <br>  Ici, nous avons créé un filtre très simple appelé <code>currency</code> .  Il appelle la fonction <code>toFixed(2)</code> pour la valeur numérique qui lui est transmise et renvoie le résultat.  Vous pouvez utiliser ce filtre dans le modèle comme suit: <br><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Total: $</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ total | currency }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici l'</a> implémentation terminée de notre projet sur Vue. <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  Si vous comparez deux versions du projet, l'une créée à l'aide de jQuery et la seconde écrite dans Vue, vous remarquerez les points forts suivants de l'application basée sur Vue: <br><br><ul><li>  Une séparation claire entre l'interface utilisateur, la logique et les données qui contrôlent l'interface.  Le code est plus clair, il sera plus facile à tester. </li><li>  Une description déclarative de l'interface.  Le programmeur a seulement besoin de savoir comment décrire ce qu'il veut voir à l'écran, et non comment accéder au DOM afin de donner à la page d'application l'apparence souhaitée. </li></ul><br>  Les bibliothèques Vue et jQuery ont presque la même taille (en kilo-octets).  Bien sûr, la taille de jQuery peut être réduite en utilisant notre propre assemblage de bibliothèque, mais même dans des projets relativement simples, comme notre exemple de compte électronique, je pense que la facilité de développement et la lisibilité du code justifient une légère augmentation de la taille de l'application. <br><br>  De plus, les capacités de Vue sont beaucoup plus larges que celles que nous avons décrites ici.  La force de ce cadre réside dans le fait qu'il vous permet de créer des composants d'interface utilisateur modulaires et réutilisables à partir desquels vous pouvez créer des applications clientes complexes. <br><br>  Si vous êtes intéressé par le sujet du développement d'applications Web sur Vue, jetez un œil à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce matériel</a> .  De plus, si vous envisagez de déplacer des projets de JS pur vers Vue, voici notre récente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publication</a> sur ce sujet. <br><br>  <b>Chers lecteurs!</b>  Utilisez-vous jQuery?  Et, si vous l'utilisez, prévoyez-vous de changer cette bibliothèque en autre chose, par exemple - en Vue? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414073/">https://habr.com/ru/post/fr414073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414063/index.html">Commandant du matin</a></li>
<li><a href="../fr414065/index.html">Le meilleur smartphone chinois "jusqu'à 10 mille roubles" avec AliExpress vs Xiaomi Redmi 5</a></li>
<li><a href="../fr414067/index.html">Lancez le reciblage mobile avec Adjust: paramètres, rapports et liens</a></li>
<li><a href="../fr414069/index.html">Restrictions sur le drone pendant la Coupe du Monde de la FIFA 2018 (FIFA 2018)</a></li>
<li><a href="../fr414071/index.html">De la surveillance à la gestion des incidents. Rapport du Meetup DevOps Moscou</a></li>
<li><a href="../fr414079/index.html">Caractéristiques du travail et du périphérique interne express.js</a></li>
<li><a href="../fr414081/index.html">Développement de chatbot pour Facebook Messenger sur node.js</a></li>
<li><a href="../fr414083/index.html">Mitap d'été Apache Ignite à Saint-Pétersbourg</a></li>
<li><a href="../fr414085/index.html">Comment créer des échantillons pour le système biométrique unifié et pourquoi il peut être dangereux</a></li>
<li><a href="../fr414087/index.html">Automatisez-le immédiatement ou comment les entreprises peuvent travailler en ligne dès aujourd'hui</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>