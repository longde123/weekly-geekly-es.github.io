<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👸🏽 💞 😥 Wie kann man ein riesiges Finanzdiagramm mit Geldwäschemustern erstellen? ⏩ 👩🏿‍🏫 🤞🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor einigen Jahren hatten mein Team (Compliance bei einer der Schweizer Banken) und ich eine interessante Aufgabe zu implementieren - wir mussten ein ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie kann man ein riesiges Finanzdiagramm mit Geldwäschemustern erstellen?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447798/"><img src="https://habrastorage.org/getpro/habr/post_images/1f7/2b3/6c7/1f72b36c76729f1460d83fd2f3251cfa.jpg" alt="Bild"><br><br>  Vor einigen Jahren hatten mein Team (Compliance bei einer der Schweizer Banken) und ich eine interessante Aufgabe zu implementieren - wir mussten ein riesiges zufälliges Diagramm der Finanztransaktionen zwischen Kunden, Unternehmen und Geldautomaten erstellen.  Darüber hinaus wollten wir, dass dieses Diagramm neben der Beschreibung der Knoten wie Namen, Adressen, Währungen usw. auch einige Muster der Geldwäsche und anderer Finanzkriminalität enthält.  Offensichtlich sollten alle Daten zufällig von Grund auf neu generiert werden, solange wir aus offensichtlichen Gründen keine echten Daten verwenden konnten. <br><br>  Als Lösung haben wir einen Generator geschrieben, den ich gerne mit Ihnen teilen würde.  In diesem Artikel wird erklärt, warum wir ihn benötigt haben und wie dieser Generator funktioniert. Wenn Sie ihn jedoch nicht lesen und selbst ausprobieren möchten, finden Sie hier den Code: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/MGrin/transactions-graph- Generator</a> .  Ich hoffe, dass unsere Erfahrung für jeden von Ihnen hilfreich sein wird. <br><a name="habracut"></a><br><h2>  Warum haben wir uns für einen solchen Generator interessiert? </h2><br>  Unser Team hat beschlossen, das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LauzHack-</a> Hackaton zu sponsern.  Eine der Bedingungen für Sponsoren war die Bereitstellung einer echten Geschäftsaufgabe für die Teilnehmer, und zufällig hatten wir gleichzeitig ein interessantes Projekt im Zusammenhang mit der Entdeckung von Geldwäsche in der Grafik der Transaktion.  Natürlich haben wir uns entschlossen, Hackaton-Teilnehmern die gleiche Aufgabe zu übertragen. <br><br>  Wie ich bereits sagte, konnten wir keine realen Daten verwenden, daher mussten wir sie erstellen.  Um die Aufgabe so realitätsnah wie möglich zu gestalten, haben wir einige Statistiken aus unseren Daten erstellt und versucht, generierte Daten so zu erstellen, dass sie ähnlichen Verteilungen folgen.  Außerdem wollten wir kein kleines Diagramm haben - wir arbeiten täglich mit Milliarden von Transaktionen zwischen Millionen von Knoten und wollten den Teilnehmern die Möglichkeit geben, ihre Ideen im gleichen Maßstab auszuprobieren. <br><br><h2>  Was haben wir als Ergebnis bekommen? </h2><br>  Wir könnten einen ziemlich schnellen, interessanten und konfigurierbaren Graphgenerator bauen!  Sehen wir uns das genauer an: <br><br><h3>  Knotentypen </h3><br>  Teilnehmer unseres generierten Finanzsystems: <br><br><ul><li>  Kunde - ein Konto eines abstrakten Bankkunden.  Enthält Felder wie Name, E-Mail, Alter, Beruf, Ausbildung, Nationalität und Adresse. </li><li>  Unternehmen - eine Geschäftseinheit in unserem Finanzsystem.  Enthält Felder wie Typ, Name und Land. </li><li>  Geldautomat - ein Ausgangspunkt für das Geld aus unserem Finanzdiagramm nach draußen, wo es nicht mehr verfolgt werden kann.  Enthält GPS-Koordinaten. </li><li>  Transaktion - Aufzeichnung des Geldtransfers zwischen 2 Grafikknoten.  Enthält Zeiger auf Quell- und Zielknoten, Betrag, Währung sowie Datum und Uhrzeit der Ausführung. </li></ul><br>  Um diese Daten zu generieren, haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mimesis verwendet</a> , eine großartige Bibliothek zur Erzeugung gefälschter Daten. <br><br><h3>  Graphgenerierung: grundlegende Entitäten </h3><br>  Der Generator beginnt mit der Erstellung grundlegender Einheiten - Kunden, Unternehmen und Geldautomaten.  Das Skript verwendet eine gewünschte Anzahl von Clients als Eingabe und berechnet basierend auf dieser Anzahl die Anzahl der zu generierenden Unternehmen und Geldautomaten.  Wir haben festgestellt, dass die Anzahl der Unternehmen 2,5% der Gesamtzahl der Kunden und die Anzahl der Geldautomaten 0,05% entspricht.  Diese Parameter sind ziemlich gemittelt und im Generator selbst fest codiert. <br><br>  Alle generierten Informationen werden in CSV-Dateien gespeichert.  Das Schreiben in diese Dateien erfolgt durch Stapel von k Zeilen, wobei k ein konfigurierbarer Parameter ist.  Außerdem wird jeder Knotentyp parallel generiert, um den gesamten Prozess zu beschleunigen. <br><br><h3>  Diagrammgenerierung: Kanten zwischen Objekten </h3><br>  Nach der Erstellung der Basisentitäten beginnen wir, diese miteinander zu verbinden.  Derzeit generieren wir noch keine Transaktionen, sondern nur die Tatsache, dass zwei Knoten verbunden sind.  Wir haben dies auf diese Weise getan, um den Prozess zu beschleunigen, und es funktioniert wie folgt: Wenn zwischen zwei Knoten eine Kante vorhanden ist, werden einige Transaktionen zeitlich getrennt.  Kein Vorteil - überhaupt keine Transaktionen. <br><br>  Die Wahrscheinlichkeit, ob und Kante zwischen zwei Knoten und mögliche Kantentypen sind: <br><br><ul><li>  Kunde -&gt; Kunde, p = 0,4% </li><li>  Kunde -&gt; Unternehmen, p = 1% </li><li>  Kunde -&gt; Geldautomat, p = 3% </li><li>  Firma -&gt; Kunde, p = 0,5% </li></ul><br>  Diese Wahrscheinlichkeiten können mithilfe von Generatorparametern konfiguriert werden. <br><br>  Genau wie bei Knoten werden alle Kantentypen parallel generiert und stapelweise in Dateien geschrieben. <br><br><h3>  Graphgenerierung: Transaktionen </h3><br>  Wenn Knoten und Kanten eine gewünschte Verteilung haben, können wir mit der Generierung von Transaktionen beginnen.  Der Prozess ist einfach zu implementieren, lässt sich jedoch nur schwer parallelisieren.  Aus diesem Grund arbeiten derzeit nur zwei Threads - einer für die Generierung von Client-Sourcing-Transaktionen und einer für die Generierung von Transaktionen für Unternehmen.  Die Anzahl der Transaktionen für eine Kante ist zufällig und zeitlich zufällig getrennt. <br><br>  Wie oben beschrieben, werden generierte Transaktionen stapelweise in CSV-Dateien geschrieben. <br><br><h3>  Graphgenerierung: Muster </h3><br>  Hier wird es interessant.  Wir haben drei Muster definiert, die wir in unserem Diagramm haben wollten: <br><br><ul><li>  Fluss - Ein großer Geldbetrag wird vom Quellknoten an N Knoten gesendet, und jeder dieser N Knoten sendet Geld an andere K Knoten usw.  bis die letzte Schicht dieses Netzwerks das gesamte empfangene Geld an einen Zielknoten sendet. </li><li>  Rundschreiben - Ein großer Geldbetrag fließt durch verschiedene Knoten und kehrt zum Quellknoten zurück. </li><li>  Zeit - Ein Teil wird mehrmals von Knoten A zu Knoten B übertragen, getrennt durch eine pseudozufällige Zeit. </li></ul><br>  Lassen Sie uns diese Muster einzeln entdecken. <br><br><h4>  Flow </h4><br>  Wir beginnen mit der Auswahl einer Reihe von Schichten des Netzwerks.  In unserer Erkenntnis ist es eine Zufallszahl zwischen 2 und 6, und diese Werte sind nicht konfigurierbar.  Dann wählen wir zufällig 2 Knoten aus - Quelle und Ziel.  Auch der Betrag, der von einem Quellknoten ausgegeben wird, wird zufällig als 50000 * random () + 50000 * random () generiert. <br><br>  Jeder Teilnehmer dieses Netzwerks nimmt eine Zahlung für seinen Dienst entgegen.  Nach unserer Erkenntnis wird die Gesamtzahlung für die gesamte Netzwerknutzung 10% des Quellbetrags nicht überschreiten. <br><br>  Alle generierten Transaktionen werden zeitlich von einer Schicht zur anderen verzögert.  Die Verzögerungen sind zufällig und betragen höchstens 5 Tage. <br><br><h4>  Rundschreiben </h4><br>  Ist dem Flussmuster ähnlich, außer dass der Quell- und der Zielknoten identisch sind und es nur einen Knoten pro Zwischenschicht gibt. <br><br><h4>  Zeit </h4><br>  Das einfachste Muster.  Ein zufälliger Betrag wird mehrmals von Knoten A an Knoten B gesendet (Zufallszahl zwischen 5 und 50, nicht konfigurierbar) mit pseudozufälligen Verzögerungen zwischen Transaktionen. <br><br><h3>  Randomisierung der endgültigen Transaktionen </h3><br>  Zu diesem Zeitpunkt haben wir eine Reihe von CSV-Dateien: <br><br><ul><li>  3 Dateien mit Knoteninformationen (Kunden, Unternehmen, Geldautomaten) </li><li>  4 Dateien mit Transaktionen: eine für normale Transaktionen und 3 für Transaktionen aus generierten Mustern. </li></ul><br>  Es gibt ein anderes Skript, das alle Transaktionen zufällig sortiert und in einer Transaktionsdatei zusammenfasst. <br><br><h2>  Was tun mit der Leistung dieses Generators? </h2><br>  Am Ende des Tages haben wir 4 wunderschöne CSV-Dateien mit Diagrammknoten und Transaktionen.  Wir können dieses Diagramm in Neo4J importieren oder über die REST-API bereitstellen - im Grunde können wir alles damit machen!  Die Größe des Diagramms kann beliebig groß sein (wir haben schließlich ein Diagramm mit 2 Milliarden Clients erstellt und es hat auf meinem MacBook 2014 ungefähr 8 Stunden gedauert). <br><br>  Wir haben viele positive Rückmeldungen von Hackaton-Teilnehmern sowie einige wirklich gute Lösungen für Mustererkennungsprobleme in großen Graphen. <br><br>  Vielen Dank für Ihre Zeit und hier ist der Link zum Generator: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/MGrin/transactions-graph-generator</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447798/">https://habr.com/ru/post/de447798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447786/index.html">Hintergrund: Robot Fedor, was bist du?</a></li>
<li><a href="../de447788/index.html">Wir haben einen Nachrichtenaggregator mit Schwerpunkt auf Kryptowährungen erstellt - intwt.com</a></li>
<li><a href="../de447790/index.html">Lernen, Waves Smart-Verträge auf RIDE und RIDE4DAPPS zu schreiben. Teil 1 (Multiuser Wallet)</a></li>
<li><a href="../de447792/index.html">Dunkle Muster und das Gesetz: Wie US-Regulierungsbehörden versuchen, die Produktmechanik zu kontrollieren und den Einfluss von Technologieunternehmen zu verringern</a></li>
<li><a href="../de447794/index.html">Über einfache Dinge, kompliziert. Ein Brief eines Chemikers an einen 3D-Drucker. Lösungsmittel für Kunststoffe und Schutz gegen diese</a></li>
<li><a href="../de447802/index.html">Isabella 2</a></li>
<li><a href="../de447804/index.html">Die Zwergenfestung verzichtet auf Textgrafiken, aber nicht auf deren Essenz</a></li>
<li><a href="../de447806/index.html">Beschleunigung der Leistung neuronaler Netze durch Hashing</a></li>
<li><a href="../de447808/index.html">Lernen, Waves Smart-Verträge auf RIDE und RIDE4DAPPS zu schreiben. Teil 2 (DAO - Dezentrale Autonome Organisation)</a></li>
<li><a href="../de447810/index.html">Analytics für Azure DevOps Services ist jetzt öffentlich verfügbar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>