<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   C贸mo Methodius se convirti贸 en Anna: la experiencia de desarrollar y lanzar clasificadores de mensajes de voz. Parte 1   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Meta y objetivo 


 En una serie de art铆culos, consideramos los clasificadores de las llamadas de voz, por qu茅 son necesarios, c贸mo llevarlos r谩pidame...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C贸mo Methodius se convirti贸 en Anna: la experiencia de desarrollar y lanzar clasificadores de mensajes de voz. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472350/"><h2 id="cel-i-zadacha">  Meta y objetivo </h2><br><p>  En una serie de art铆culos, consideramos los clasificadores de las llamadas de voz, por qu茅 son necesarios, c贸mo llevarlos r谩pidamente a la productividad.  Le contar茅 acerca de los enfoques que reducir谩n el tiempo desde la configuraci贸n de una tarea hasta el lanzamiento de un modelo y la obtenci贸n de un resultado comercial. <br>  Para este art铆culo, puede ver el informe en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace</a> </p><br><h2 id="kak-mefodiy-stal-annoy-seriya-1">  C贸mo Metodio se convirti贸 en Anna.  Serie No. 1 </h2><br><p>  隆Empecemos! </p><a name="habracut"></a><br><p>  Mi nombre es Julia, soy ingeniera en el departamento de aprendizaje autom谩tico de un gran proveedor.  Alrededor de 3.000 llamadas de clientes llegan a nuestro centro de llamadas por d铆a.  Cada operador recibe un promedio de 100 llamadas por d铆a.  驴Y qu茅?  Parece que esto acepta 100 llamadas.  Pero hay muchos temas de llamadas a la empresa, el operador necesita comprender todos los productos, servicios y procesos de la empresa.  Si tomamos las solicitudes de clientes m谩s t铆picas, entonces se pueden agrupar en 40 (!) Temas, y todav铆a hay aplicaciones at铆picas que tambi茅n deben poder procesarse. <br><img src="https://habrastorage.org/webt/am/_q/zw/am_qzwief7p9jpxjyebcxr3hfrs.png" alt="imagen"></p><br><p>  Debido a la variedad de temas, la capacitaci贸n del operador tom贸 tres meses.  Primero debe estudiar todas las instrucciones y solo entonces se le permite recibir llamadas.  Se est谩 gastando una gran cantidad de recursos para crear un nuevo operador competente.  Entonces surgi贸 la idea de poner al operador en l铆nea gradualmente.  Es decir, recibir谩 llamadas solo sobre aquellos temas que haya dominado, con el tiempo aumentando su habilidad, estudiando otros temas. </p><br><p>  Buena idea, 驴por qu茅 no hacer ... un IVR simple?  (un sistema de mensajes de voz pregrabados que enruta las llamadas dentro del centro de llamadas usando la informaci贸n ingresada por el cliente en el teclado del tel茅fono usando la marcaci贸n por tonos. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">wiki</a> ) </p><br><p><img src="https://habrastorage.org/webt/40/bi/ht/40bihtr4r_2jnzh0_knc4ksavpw.png" alt="imagen"></p><br><p>  Pero a pocas personas les gusta escuchar una voz grabada durante mucho tiempo, esperar, qu茅 cifra se debe presionar, pero al final todav铆a no obtienen la informaci贸n necesaria. </p><br><p>  No quer铆amos atormentar a nuestros clientes con IVR y establecimos la tarea: clasificar la solicitud del suscriptor de acuerdo con la primera oraci贸n.  Por lo tanto, de acuerdo con la solicitud expresada, se producir谩 un enrutamiento entre operadores. </p><br><h3 id="dannye">  Datos </h3><br><p>  Los operadores de soporte t茅cnico sobre el resultado de cada llamada han estado exponiendo el tema de la llamada durante aproximadamente 10 a帽os.  Identificamos los 16 grupos m谩s numerosos, y aparecieron marcas de estos temas.  Luego cargamos registros de 120k conversaciones sobre diversos temas, reconocimos la grabaci贸n de la conversaci贸n de un cliente usando Yandex.SpeechKit y los dividimos en frases por silencio.  Entonces obtuvimos piezas de audio con frases separadas. </p><br><p>  Perm铆tame recordarle que mi objetivo era clasificar la solicitud inicial del cliente, por lo que solo se seleccion贸 la primera frase de cada llamada.  En total, los datos fueron 120k frases de clientes en formato de texto con marcado de los operadores.  Preprocesamiento de texto est谩ndar: eliminar palabras de detenci贸n, normalizar texto (trucos: adjuntar una part铆cula "no" a la siguiente palabra) y los datos est谩n listos.  Te contar茅 m谩s sobre nuestro proceso de preprocesamiento en otro art铆culo. </p><br><h3 id="klassifikaciya">  Clasificaci贸n </h3><br><p>  Luego, despu茅s de recibir el texto procesado, realizamos muchos experimentos, ordenados a trav茅s de varias configuraciones de modelos e incrustaciones. </p><br><div class="spoiler">  <b class="spoiler_title">Tabla con comparaci贸n de resultados experimentales.</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><th></th><th>  Bayes ingenuos </th><th>  SVM </th><th>  Regresi贸n log铆stica </th><th>  Bosque al azar </th><th>  Lightgbm </th><th>  XGBoost </th><th>  Red neuronal </th></tr><tr><th>  TF-IDF unigram </th><td>  66,9 </td><td>  69,6 </td><td>  69,7 </td><td>  64,3 </td><td>  68,2 </td><td>  68,2 </td><td>  70,3 </td></tr><tr><th>  TF-IDF bigram </th><td>  68,4 </td><td>  70,4 </td><td>  70,5 </td><td>  64,3 </td><td>  68,4 </td><td>  68,3 </td><td>  70,5 </td></tr><tr><th>  TF-IDF trigram </th><td>  68,4 </td><td>  70,3 </td><td>  70,5 </td><td>  64,2 </td><td>  68,3 </td><td>  68,1 </td><td>  70,5 </td></tr><tr><th>  Word2vec </th><td>  67,9 </td><td>  69,3 </td><td>  69,6 </td><td>  68,7 </td><td>  70,2 </td><td>  69,3 </td><td>  70,7 </td></tr><tr><th>  Word2Vec + TF-IDF </th><td>  66,4 </td><td>  69,8 </td><td>  69,4 </td><td>  68,3 </td><td>  70,2 </td><td>  69,9 </td><td>  70,3 </td></tr><tr><th>  Contexto TF-IDF + </th><td>  70,6 </td><td>  71,7 </td><th>  72,4 </th><td>  67,3 </td><td>  71,3 </td><td>  70,3 </td><td>  71,2 </td></tr><tr><th>  Word2Vec + contexto </th><td>  69,2 </td><td>  71,8 </td><td>  71,1 </td><td>  69,2 </td><td>  71,4 </td><td>  70,9 </td><td>  72,1 </td></tr><tr><th>  Word2Vec + TF-IDF + contexto </th><td>  69,7 </td><td>  70,4 </td><td>  71,0 </td><td>  70,3 </td><td>  71,2 </td><td>  71,3 </td><td>  71,8 </td></tr></tbody></table></div></div></div><br><p>  El mejor resultado fue dado por el conjunto est谩ndar de TF-IDF y la regresi贸n log铆stica.  La tabla muestra la m茅trica del puntaje f.  En algunos experimentos, adem谩s del texto, se agregaron 11 signos adicionales sobre el cliente (contexto) en el momento de la llamada.  Con la esperanza de que esto de alguna manera eleve la calidad.  Contexto: estos son signos booleanos, si el cliente tiene un saldo negativo ahora, si la reparaci贸n est谩 asignada a la direcci贸n y otras que caracterizan al cliente en este momento.  Pero incluso con el contexto, la calidad es pobre, solo se logr贸 el 72%. </p><br><h3 id="analiz-oshibok">  An谩lisis de errores </h3><br><p>  Sin un an谩lisis de error, la calidad de la clasificaci贸n no mejor贸.  Tras examinar los casos en que los modelos est谩n equivocados, identificamos los siguientes problemas t铆picos: </p><br><ul><li>  mal marcado </li><li>  desequilibrio de clase </li><li>  es dif铆cil para las personas formular un pensamiento </li><li>  reconocimiento de voz </li></ul><br><h4 id="razmetka">  Marcado </h4><br><p>  El marcado a menudo era incorrecto debido al hecho de que la conversaci贸n pod铆a comenzar con un tema y terminar con otro, y el operador defini贸 el tema de la llamada, que se dijo al final del di谩logo.  Redistribuy贸 manualmente tales casos y el problema desapareci贸. </p><br><h4 id="balans-klassov">  Saldo de clase </h4><br><p>  Hay varios enfoques para equilibrar las clases. </p><br><div class="spoiler">  <b class="spoiler_title">M谩s detalles</b> <div class="spoiler_text"><ol><li>  Submuestreo  Eliminaci贸n aleatoria de ejemplos de clases grandes. </li><li>  Sobremuestreo.  Adici贸n aleatoria de ejemplos de clases menores. </li><li>  Sobremuestreo de minor铆as sint茅ticas.  Adici贸n aleatoria de ejemplos de las clases m谩s peque帽as, pero cambi谩ndolos ligeramente. </li></ol></div></div><br><p>  El enfoque a elegir depende de la tarea y la cantidad de datos.  Como parte de esta tarea, fue posible equilibrar el conjunto de datos eliminando ejemplos de las clases de mayor frecuencia al valor medio del n煤mero de ejemplos, pero las clases menores permanecieron sin cambios. </p><br><h4 id="lyudyam-slozhno-formulirovat-mysli">  Es dif铆cil para las personas formular pensamientos </h4><br><p>  Despu茅s de leer las primeras frases, notamos que el 36% de las consultas conten铆an texto no informativo, por ejemplo: "Hola, hola" o "Hola, tengo una pregunta".  Solo despu茅s de que el operador pregunt贸: "驴cu谩l es su pregunta?", El cliente formul贸 el problema. </p><br><p>  Por lo tanto, fue incorrecto tomar solo la primera frase del cliente de la conversaci贸n; alguien simplemente no pudo formular una solicitud de inmediato.  Por lo tanto, para cada primera frase, se calcul贸 la "informatividad".  Si el modelo no atribuy贸 la solicitud con alta confianza a ninguna de las clases, es decir, todas las clases recibieron un valor de probabilidad igual, entonces el mensaje no es informativo y debe tomar la segunda frase.  Y si la clase ya est谩 determinada con alta probabilidad, entonces la primera frase es suficiente. </p><br><p>  Aqu铆 puede aparecer la pregunta correcta, pero qu茅 hacer en el producto, porque habr谩 las mismas consultas no informativas.  Hablar茅 de esto m谩s adelante en el pr贸ximo art铆culo. </p><br><h4 id="raspoznavanie-rechi">  Reconocimiento de voz </h4><br><p>  Al analizar los errores, notamos imprecisiones en el reconocimiento de texto, debido a que la clase se defini贸 incorrectamente.  Por ejemplo, la palabra "equilibrio" a veces se reemplaz贸 por "pl谩tano".  Decidimos comparar el reconocimiento de Yandex y Google.  Google se mostr贸 mejor en nuestros datos, pero no tanto como para pagar de m谩s por ellos, el precio es casi el doble. </p><br><div class="spoiler">  <b class="spoiler_title">Comparaci贸n del reconocimiento de voz entre dos sistemas.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/uf/t4/pu/uft4pul6klzmqzioyzdlwjoayqu.png" alt="imagen"></p></div></div><br><h3 id="itogi-analiza-oshibok">  Resumen de an谩lisis de errores </h3><br><p>  Despu茅s de analizar y corregir los errores, pudimos mejorar la calidad a un puntaje f promedio de 84%; la mejor calidad a煤n fue el resultado de la regresi贸n log铆stica. </p><br><div class="spoiler">  <b class="spoiler_title">Ganancia de calidad para cada clase</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><th>  Clase </th><th>  Era </th><th>  Se ha convertido </th></tr><tr><th>  Problemas de internet </th><td>  59,97 </td><td>  86,5 </td></tr><tr><th>  Problemas con KTV </th><td>  86,71 </td><td>  89,02 </td></tr><tr><th>  Intercomunicadores </th><td>  51,5 </td><td>  85,74 </td></tr><tr><th>  Contrato </th><td>  57.81 </td><td>  69,13 </td></tr><tr><th>  Pago </th><td>  46,81 </td><td>  74,26 </td></tr><tr><th>  ... </th><td>  ... </td><td>  ... </td></tr><tr><th>  promedio </th><td>  72,44 </td><td>  84,39 </td></tr></tbody></table></div></div></div><br><h2 id="vyvody">  Conclusiones </h2><br><p>  Resumiendo la primera etapa de desarrollo, podemos sacar la siguiente conclusi贸n. </p><br><p>  <strong>En primer lugar, debe lidiar con los datos y el marcado.</strong>  No debe entrenar inmediatamente las redes neuronales, con datos incorrectos no habr谩 mucho beneficio de esto.  Para evitar perder tiempo y energ铆a, es suficiente analizar los errores en los modelos "simples". </p><br><p>  Nos vemos en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">segunda serie</a> , donde hablaremos sobre c贸mo ejecutar un modelo entrenado de forma productiva.  Escucharemos ejemplos de c贸mo Methodius el robot recibe llamadas, y entenderemos por qu茅 se convirti贸 en Anna. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472350/">https://habr.com/ru/post/472350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472334/index.html">La vida por cupones o c贸mo optimizamos el trabajo de los servicios sociales</a></li>
<li><a href="../472336/index.html">Aceleraci贸n instagram.com. Parte 3</a></li>
<li><a href="../472338/index.html">驴Qui茅n es el asesino de JavaScript?</a></li>
<li><a href="../472340/index.html">驴GraphQL perdi贸 relevancia en la era HTTP / 2?</a></li>
<li><a href="../472344/index.html">Dos "Compa帽eros" o Flogisto de la Guerra Civil</a></li>
<li><a href="../472352/index.html">TechnoText, episodio II. Contamos c贸mo viven y trabajan los autores de Habr en art铆culos</a></li>
<li><a href="../472354/index.html">Entre la silla y el monitor se encuentra la principal vulnerabilidad en el sistema: VAP-person</a></li>
<li><a href="../472356/index.html">Microsoft vs IBM: cambios importantes en el soporte de Java</a></li>
<li><a href="../472358/index.html">30 de octubre a las 17:00 seminario web "Implemente el cl煤ster de Kubernetes en una hora en la nube CROC"</a></li>
<li><a href="../472360/index.html">Escaneando el c贸digo de Orchard CMS en busca de errores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>