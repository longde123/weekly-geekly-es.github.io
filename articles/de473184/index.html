<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÖüèæ üçñ üÜï Docker + php-fpm + PhpStorm + Xdebug üöã üé∞ üï¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor nicht allzu langer Zeit sagte der Teamleiter: Leute, ich m√∂chte, dass jeder die gleiche Entwicklungsumgebung f√ºr unsere Kampfprojekte hat. Wir m√ºs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker + php-fpm + PhpStorm + Xdebug</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473184/">  Vor nicht allzu langer Zeit sagte der Teamleiter: Leute, ich m√∂chte, dass jeder die gleiche Entwicklungsumgebung f√ºr unsere Kampfprojekte hat. Wir m√ºssen in der Lage sein, alles zu debuggen - sowohl Webanwendungen als auch API-Anfragen und Konsolenskripte, um unsere Nerven und Zeit zu sparen.  Und helfen Sie uns mit diesem Docker. <br><br>  Kaum gesagt als getan.  Details unter dem Schnitt. <br><a name="habracut"></a><br>  Es gibt viele Containerisierungshandb√ºcher im Netzwerk, aber wie kann man sie auf die echte Kampfentwicklung anwenden?  Schreiben Sie f√ºr jedes Projekt Ihre eigene docker-compose.yml?  Aber alle unsere Projekte kommunizieren √ºber API miteinander. Sie verwenden alle den Standard-Technologie-Stack: nginx + php-fpm + mysql. <br><br>  Lassen Sie uns daher die Bedingungen des Problems kl√§ren: <br><br><ol><li>  Wir arbeiten in einer Firma, in einem Team, begleiten mehrere Kampfprojekte.  Wir arbeiten alle unter Ubuntu + PhpStorm </li><li>  F√ºr die lokale Entwicklung m√∂chten wir den Docker verwenden, um f√ºr jedes Teammitglied dieselbe Entwicklungsumgebung zu haben, und damit ein neuer Entwickler bei Ankunft schnell eine Arbeitsumgebung bereitstellen kann </li><li>  Wir wollen mit Komfort entwickeln, wir wollen alles deb√ºtieren: sowohl Webanwendungen als auch Konsolenskripte und API-Anfragen. </li></ol><br>  Noch einmal: Wir wollen <b>mehrere</b> Arbeitsprojekte in den Docker bringen. <br><br>  Auf Kampfservern wird das Standardpaket nginx + php-fpm + mysql verwendet.  Und was ist das Problem? <br><br>  Wir stellen genau dieselbe Umgebung + Xdebug auf dem lokalen Computer bereit, konfigurieren unsere Projekte in PhpStorm und arbeiten.  Schalten Sie zum Debuggen die "Tube" in PhpStorm ein, alles funktioniert sofort, alles ist in Ordnung. <br><br><img src="https://habrastorage.org/webt/4m/tv/4e/4mtv4efpe_tiqc8mnwskabrxoqu.png"><br><br>  All dies ist wahr - alles funktioniert sofort.  Aber lassen Sie uns versuchen, unter die Haube unserer Arbeitsumgebung zu schauen. <br><br>  Nginx + php-fpm kommunizieren √ºber den Socket, xdebug lauscht auf Port 9000, PhpStorm lauscht standardm√§√üig auf Port 9000 zum Debuggen und alles scheint in Ordnung zu sein.  Und wenn in PhpStorm mehrere Anwendungen ge√∂ffnet sind und das Abh√∂ren ("Tube" "f√ºr mehrere Anwendungen aktiviert ist?  Was wird PhpStorm tun?  Er wird schw√∂ren, dass eine neue Verbindung f√ºr Xdebug erkannt wurde. M√∂chten Sie diese ignorieren oder nicht? <br><br>  Das hei√üt, mit den Standardeinstellungen in PhpStorm kann ich zu einem bestimmten Zeitpunkt nur eine Anwendung deb√ºtieren.  F√ºr alle anderen offenen Anwendungen muss das Debuggen deaktiviert sein.  Verdammt, aber es ist unpraktisch.  Ich m√∂chte alle Anwendungen zum Debuggen anh√∂ren, und wenn in einer von ihnen ein Haltepunkt vorhanden ist, m√∂chte ich, dass PhpStorm in dieser Anwendung in der Zeile stoppt, in der ich ihn ben√∂tige. <br><br>  Und was wird daf√ºr ben√∂tigt?  Sie ben√∂tigen jedoch jede Anwendung, um mit ihren eigenen Einstellungen f√ºr Xdebug zu beginnen.  Damit jede Anwendung ihren Port abh√∂rt, nach ihrem Server sucht und nicht alles gemeinsam hat, alles auf einem Haufen. <br><br>  Und daf√ºr gibt es einen wunderbaren Hafenarbeiter!  Wir k√∂nnen jede unserer Kampfanwendungen in einem separaten Container starten, basierend auf einem gemeinsamen Bild, zum Beispiel php: 7.1-fpm.  Dank der Docker-Technologie k√∂nnen wir unsere Anwendungen mit minimalem Overhead isolieren. <br><br>  Ok, lassen Sie uns unsere Kampfprojekte unter dem Docker starten, jedes Projekt in einem separaten Container ausf√ºhren, jedes Projekt in PhpStorm so konfigurieren, dass es einzeln debuggt. Alles sollte in Ordnung sein. <br><br>  Und, oops, das erste Problem: Die Container im Docker werden als Root ausgef√ºhrt, und lokal arbeiten wir, normalerweise als Benutzer mit UID 1000, GID 1000. Anwendungen k√§mpfen, und es ist keine Option, jeder Anwendung 777 Rechte f√ºr alles zu geben.  Unsere Anwendungen befinden sich unter dem Git, und wenn wir die Rechte 777 lokal vergeben, zeichnet der Git all dies auf und √ºbertr√§gt es auf den Battle Server. <br><br>  Kr√ºcken, hier ist ein Beispiel f√ºr ein PHP-Bild: 7.1-fpm, das kompiliert wird. <br><br><h4>  Update </h4><br>  Wie die Community zu Recht betont hat, besteht absolut keine Notwendigkeit, hart zu kr√ºcken. <br>  Zum Beispiel 1vertrovert <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">habrozer</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im Kommentar</a> <br><br><div class="spoiler">  <b class="spoiler_title">Beispiel f√ºr ein erstes PHP-Bild: 7.1-fpm (UID und GID sind fest codiert)</b> <div class="spoiler_text"><pre><code class="php hljs">FROM php:<span class="hljs-number"><span class="hljs-number">7.1</span></span>-fpm RUN apt-get update &amp;&amp; apt-get install -y \ git \ curl \ wget \ libfreetype6-dev \ libjpeg62-turbo-dev \ libmcrypt-dev \ libpng-dev zlib1g-dev libicu-dev g++ libmagickwand-dev libxml2-dev \ &amp;&amp; docker-php-ext-configure intl \ &amp;&amp; docker-php-ext-install intl \ &amp;&amp; docker-php-ext-install mbstring zip xml gd mcrypt pdo_mysql \ &amp;&amp; docker-php-ext-configure gd --with-freetype-dir=/usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/ --with-jpeg-dir=/usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/ \ &amp;&amp; docker-php-ext-install -j$(nproc) gd \ &amp;&amp; pecl install imagick \ &amp;&amp; docker-php-ext-enable imagick \ &amp;&amp; pecl install xdebug \ &amp;&amp; docker-php-ext-enable xdebug ADD ./php.ini /usr/local/etc/php/php.ini RUN wget https:<span class="hljs-comment"><span class="hljs-comment">//getcomposer.org/installer -O - -q \ | php -- --install-dir=/bin --filename=composer --quiet RUN usermod -u 1000 www-data &amp;&amp; groupmod -g 1000 www-data WORKDIR /var/www USER 1000:1000 CMD ["php-fpm"]</span></span></code> </pre> <br></div></div><br><br>  Beispiel f√ºr ein korrigiertes Dockerfile <br><br><pre> <code class="bash hljs">FROM php:7.1-fpm ARG USER_ID ARG GROUP_ID RUN apt-get update &amp;&amp; apt-get install -y \ git \ curl \ wget \ libfreetype6-dev \ libjpeg62-turbo-dev \ libmcrypt-dev \ libpng-dev zlib1g-dev libicu-dev g++ libmagickwand-dev --no-install-recommends libxml2-dev \ &amp;&amp; docker-php-ext-configure intl \ &amp;&amp; docker-php-ext-install intl \ &amp;&amp; docker-php-ext-install mbstring zip xml gd mcrypt pdo_mysql \ &amp;&amp; pecl install imagick \ &amp;&amp; docker-php-ext-enable imagick \ &amp;&amp; pecl install xdebug-2.5.0 \ &amp;&amp; docker-php-ext-enable xdebug ADD ./php.ini /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/etc/php/php.ini RUN wget https://getcomposer.org/installer -O - -q \ | php -- --install-dir=/bin --filename=composer --quiet RUN usermod -u <span class="hljs-variable"><span class="hljs-variable">${USER_ID}</span></span> www-data &amp;&amp; groupmod -g <span class="hljs-variable"><span class="hljs-variable">${GROUP_ID}</span></span> www-data WORKDIR /var/www USER <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${USER_ID}</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${GROUP_ID}</span></span></span><span class="hljs-string">"</span></span> CMD [<span class="hljs-string"><span class="hljs-string">"php-fpm"</span></span>]</code> </pre><br><br>  <s>Wenn ein Container von diesem Image aus gestartet wird, erh√§lt der Benutzer von www-data uid = 1000, gid = 1000.</s>  <s>Normalerweise hat der erste unter Linux erstellte Benutzer diese Rechte.</s>  <s>Und genau mit solchen Rechten funktionieren unsere PHP-Fpm-Container.</s>  <s>Ich w√§re sehr dankbar, wenn mir jemand sagen w√ºrde, wie man ohne Kr√ºcken mit Zugriffsrechten auf den Docker arbeitet.</s> <br><br>  Wenn ein Container von diesem Image aus gestartet wird, erh√§lt der Benutzer von www-data uid und gid, die von au√üen √ºbertragen werden. <br><br>  <b>Auch in den Kommentaren wurde das Thema angesprochen</b> : Warum die Rechte des WWW-Datenbenutzers √ºberhaupt √§ndern, warum die Standardrechte nicht zu 33 passen. Nur eines: Wenn wir in den Container gehen und beispielsweise eine Migrationsdatei erstellen, sind wir nicht der Eigent√ºmer der Datei auf dem Hostcomputer.  Und jedes Mal wird es notwendig sein, so etwas auszuf√ºhren <pre> <code class="bash hljs"> sudo chown -R user:user ./</code> </pre> <br><br>  Und das zweite kleine Problem: Damit Xdebug ordnungsgem√§√ü funktioniert, m√ºssen Sie die richtige IP-Adresse f√ºr den Host-Computer registrieren.  Jedes Mitglied des Teams ist anders.  127.0.0.1 rollt nicht.  Und hier kommt uns der Hafenarbeiter selbst zu Hilfe.  Zum Beispiel k√∂nnen wir das Netzwerk explizit konfigurieren - 192.168.220.0/28.  Und dann hat unsere Maschine immer die Adresse 192.168.220.1.  Wir werden diese Adresse verwenden, um PhpStorm sowie andere Anwendungen zu konfigurieren.  Zum Beispiel bei der Arbeit mit MySQL. <br><br>  Docker-compose.yml selbst sieht nach Ber√ºcksichtigung der Kommentare folgenderma√üen aus: <br><br><pre> <code class="python hljs">version: <span class="hljs-string"><span class="hljs-string">'3'</span></span> services: php71-first: build: context: ./images/php71 args: - USER_ID - GROUP_ID volumes: - ./www:/var/www - ./aliases/php71/bash.bashrc:/etc/bash.bashrc environment: XDEBUG_CONFIG: <span class="hljs-string"><span class="hljs-string">"remote_host=192.168.220.1 remote_enable=1 remote_autostart=off remote_port=9008"</span></span> PHP_IDE_CONFIG: <span class="hljs-string"><span class="hljs-string">"serverName=first"</span></span> networks: - test-network php71-two: build: context: ./images/php71 args: - USER_ID - GROUP_ID volumes: - ./www:/var/www - ./aliases/php71/bash.bashrc:/etc/bash.bashrc environment: XDEBUG_CONFIG: <span class="hljs-string"><span class="hljs-string">"remote_host=192.168.220.1 remote_enable=1 remote_autostart=off remote_port=9009"</span></span> PHP_IDE_CONFIG: <span class="hljs-string"><span class="hljs-string">"serverName=two"</span></span> networks: - test-network nginx-test: image: nginx volumes: - ./hosts:/etc/nginx/conf.d - ./www:/var/www - ./logs:/var/log/nginx ports: - <span class="hljs-string"><span class="hljs-string">"8080:80"</span></span> depends_on: - php71-first - php71-two networks: test-network: aliases: <span class="hljs-comment"><span class="hljs-comment">#         . ,    api - first.loc - two.loc # mysql: # image: mysql:5.7 # ports: # - "3306:3306" # volumes: # - ./mysql/data:/var/lib/mysql # environment: # MYSQL_ROOT_PASSWORD: secret # networks: # - test-network networks: test-network: driver: bridge ipam: driver: default config: - subnet: 192.168.220.0/28</span></span></code> </pre><br><br>  Wir sehen, dass in dieser Konfiguration zwei Container php71-first und php71-two erstellt werden, basierend auf einem PHP-Image: 7.1-fpm.  Jeder Container hat seine eigenen Einstellungen f√ºr Xdebug.  Jeder einzelne Container wartet beim Debuggen auf seinen Port und seinen Server. <br><br>  Ich mache Sie auch auf die Richtlinien aufmerksam <br><pre> <code class="python hljs"> args: - USER_ID - GROUP_ID</code> </pre><br><br>  Ohne diese Variablen wird das php-fpm-Image nicht gestartet.  Frage: Wie √ºbergebe ich sie an docker-compose.yml?  Antwort: da es f√ºr Sie bequemer ist.  Sie k√∂nnen beim Start: <br><pre> <code class="bash hljs">USER_ID=$(id -u) GROUP_ID=$(id -g) docker-compose up -d</code> </pre> <br>  Sie k√∂nnen diese Variablen in die ENV-Datei schreiben, die sich auf derselben Ebene befindet wie die Datei docker-compose.yml <br> <code>USER_ID=1000 <br> GROUP_ID=1000 <br></code> <br>  Ich mag die Version mit der .env-Datei mehr.  Nat√ºrlich k√∂nnen Sie das Makefile verwenden.  Wie du mehr magst. <br><br>  Der vollst√§ndige Code f√ºr die Demoversion ist auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github ver√∂ffentlicht</a> . <br><br>  Listing Demo-Projekt: <br><br><img src="https://habrastorage.org/webt/-k/ky/wz/-kkywzcbln7nintf6fbwgpagv_k.png"><br><br>  Gehen Sie kurz die Liste des Projekts durch. <br><br>  Aliase -&gt; php71 -&gt; Verzeichnis bash.bashrc.  Umstrittener Moment.  Ich bevorzuge die Kommunikation mit PHP-Fpm-Containern √ºber Aliase. <br><br>  Diese Datei wird an docker-compose.yml weitergeleitet: - ./aliases/php71/bash.bashrc:/etc/bash.bashrc <br>  Linux Standard Tool. <br><br>  Das Hosts-Verzeichnis - Konfigurationsdateien f√ºr Nginx.  Jede Konfiguration hat einen eigenen PHP-Fpm-Container.  Ein Beispiel: <br><br><pre> <code class="php hljs">server { listen <span class="hljs-number"><span class="hljs-number">80</span></span>; index index.php; server_name first.loc; error_log /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/log/nginx/first_error.log; root /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/www/first.loc; location / { try_files $uri /index.php?$args; } location ~ \.php$ { fastcgi_split_path_info ^(.+\.php)(/.+)$; <span class="hljs-comment"><span class="hljs-comment">#  php-fpm fastcgi_pass php71-first:9000; fastcgi_index index.php; fastcgi_read_timeout 1000; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param PATH_INFO $fastcgi_path_info; } }</span></span></code> </pre><br>  Das Bilderverzeichnis - Anweisungen zum Zusammenstellen von PHP-Fpm-Bildern, das MySQL-Verzeichnis - Wir speichern die Datenbanken, das WWW-Verzeichnis - alle unsere Webprojekte, in unserem Beispiel first.loc und two.loc. <br><br>  <b>Lassen Sie uns die Zwischenergebnisse zusammenfassen</b> : Mit den Funktionen des Dockers haben wir alle unsere Arbeitsprojekte in einer Umgebung gestartet.  Alle unsere Projekte sehen sich gegenseitig. F√ºr jedes Projekt werden eindeutige Einstellungen f√ºr Xdebug registriert. <br><br>  Es bleibt, PhpStorm f√ºr jedes der Projekte korrekt zu konfigurieren.  Bei der Einrichtung m√ºssen wir den Port f√ºr das Debuggen und den Servernamen an mehreren Stellen registrieren. <br><br>  Erstellen Sie ein Projekt in PhpStorm <br><br><img src="https://habrastorage.org/webt/_j/8p/is/_j8piswn2nem_vwbnj08oh8i7uu.png"><br><br><img src="https://habrastorage.org/webt/wl/3k/yd/wl3kydjytydrmthhcpzsfe3v85m.png"><br><br><img src="https://habrastorage.org/webt/_j/np/ra/_jnpranostnhpzg7l2hecdbsgb8.png"><br><br>  Wir werden die Men√ºbereiche konfigurieren <br>  - PHP (Sie m√ºssen den CLI-Interpreter korrekt registrieren), <br>  - Debuggen (√§ndern Sie den Port auf 9008, wie in der Datei docker-compose.yml), <br>  <s>- DBGp-Proxy (IDE-Schl√ºssel, Host, Port),</s> <br>  <b>Update</b> Dank des CrazyLazy Hub- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Browsers</a> f√ºr den wichtigen Punkt.  Der Men√ºpunkt DBGp-Proxy muss nicht konfiguriert werden. <br>  - Server (Sie m√ºssen den Servernamen wie in der Datei docker-compose.yml korrekt angeben und Pfadzuordnungen verwenden.) <br><br><img src="https://habrastorage.org/webt/lj/k1/qi/ljk1qiesnz_oqzeoi-i0ytmxgey.png"><br><br>  Ich werde alle weiteren Screenshots unter dem Spoiler verstecken. <br><br><div class="spoiler">  <b class="spoiler_title">Konfigurieren des CLI-Interpreters aus der Datei docker-compose.yml</b> <div class="spoiler_text">  Es gibt nichts Schwieriges - es ist wichtig, dass Sie beim Einrichten das gew√ºnschte Image ausw√§hlen und den Servernamen korrekt registrieren.  Standardm√§√üig haben wir den Namen des Docker-Servers. <br><br><img src="https://habrastorage.org/webt/qn/ot/08/qnot080fzz-bymkgbtsevyzwkla.png"><br><br><img src="https://habrastorage.org/webt/-r/e-/wn/-re-wnhsmpa5xowhv9y0hc4zqjg.png"><br><br><img src="https://habrastorage.org/webt/o7/rd/ah/o7rdahdcbjltlgvgksjdymqb92w.png"><br><br><img src="https://habrastorage.org/webt/bu/eh/md/buehmdu3ohudyx_9ezu9wz7mk-u.png"><br><br><img src="https://habrastorage.org/webt/1i/xi/qh/1ixiqhy2psmqjjhiftuttkk8nhu.png"><br><br><img src="https://habrastorage.org/webt/3b/_t/17/3b_t17w1nt6ju_86gddfmxkzo-y.png"><br><br><img src="https://habrastorage.org/webt/bs/6m/_v/bs6m_vv-zfuhuqrddsqh1d1zwic.png"><br><br><img src="https://habrastorage.org/webt/ml/va/ch/mlvach925rq-t52s3s6nnajlzlm.png"><br><br><img src="https://habrastorage.org/webt/rf/zg/5n/rfzg5n1utpkmtq3bbcucqtkfla0.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Richten Sie den Debug-Men√ºbereich ein</b> <div class="spoiler_text">  Auch hier schreiben wir alles aus den Einstellungen von docker-compose.yml f√ºr einen bestimmten Container vor.  Im selben Schritt √ºberpr√ºfen wir, wie unser Debug funktioniert. <br><br><img src="https://habrastorage.org/webt/t8/76/d3/t876d3mggafgcrw6vn_prztxowa.png"><br><br><img src="https://habrastorage.org/webt/h9/sz/e3/h9sze3ekrkttlvs1mxqlccinqxk.png"><br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Richten Sie den Men√ºbereich Server ein</b> <div class="spoiler_text">  Es ist wichtig, die Pfadzuordnungen f√ºr die Verwendung korrekt zu registrieren. Auch hier √ºbernehmen wir den Servernamen aus den Einstellungen <br><br><img src="https://habrastorage.org/webt/qf/7-/on/qf7-onhf100vot3sqjs0zpminpy.png"><br><br><img src="https://habrastorage.org/webt/qb/p7/7x/qbp77xg1h1usxej75fua3o-2mm8.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Wir verlassen den Men√ºbereich Datei -&gt; Einstellungen, gehen zum Men√ºabschnitt Ausf√ºhren -&gt; Konfiguration bearbeiten, erstellen eine PHP-Webseite</b> <div class="spoiler_text">  Wir w√§hlen unseren Server aus, der im vorherigen Schritt erstellt wurde. <br><br><img src="https://habrastorage.org/webt/y4/df/hh/y4dfhhqmp_20nf5-eqkfateeepw.png"><br><br><img src="https://habrastorage.org/webt/9e/xm/b4/9exmb4ftet-yw1798zr1-qxse-s.png"><br><br><img src="https://habrastorage.org/webt/0s/wy/r8/0swyr8zrk65k0-jcilaqjjyqjtw.png"><br></div></div><br><h4>  Nun, das ist alles.  Es sind viele Briefe geschrieben, es scheint, dass nicht alles einfach ist </h4><br>  In der Tat ist die Hauptsache, eine sehr einfache Sache zu verstehen.  Dank der Docker-Technologie k√∂nnen wir alle unsere Arbeitsanwendungen in einem einzigen Bereich ausf√ºhren, jedoch mit unterschiedlichen Einstellungen f√ºr Xdebug.  Jede Anwendung arbeitet in einem eigenen Container, und wir m√ºssen die Einstellungen f√ºr jede Anwendung in PhpStorm sorgf√§ltig vorschreiben. <br><br>  Und am Ausgang bekommen wir ein wunderbares Bild. <br><br>  1. Wir klonen ein Repository auf einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> .  Erstellen Sie eine .env-Datei mit Variablen <br> <code>USER_ID= uid <br> GROUP_ID= gid <br></code> <br><br>  2. Wir registrieren die Knoten first.loc und two.loc in der Datei / etc / hosts <br><br><pre> <code class="plaintext hljs">127.0.0.1 first.loc 127.0.0.1 two.loc</code> </pre> <br>  3. F√ºhren Sie im Ordner git den <code>docker-compose up -d</code> <br><br>  4. Wir konfigurieren beide Projekte first.loc und two.loc in PhpStorm, wie oben beschrieben, und f√ºhren beide Projekte in PhpStorm aus.  Das hei√üt,  Wir haben zwei ge√∂ffnete PhpStorm-Fenster mit zwei Projekten, von denen jedes auf eingehende Verbindungen wartet (das Mobilteil ist eingeschaltet). <br><br>  5. Im Projekt two.loc setzen wir einen Haltepunkt in die zweite Zeile, zum Beispiel.  Im ersten Projekt first.loc starten wir die http-Anfrage aus der Datei http.http <br><br>  Und siehe da!  Wir werden an unserem Haltepunkt in das zweite Projekt hineingeworfen. <br><br>  Zum Debuggen von Konsolenskripten machen wir genau das Gleiche.  Wir aktivieren das Abh√∂ren zum Abh√∂ren, setzen einen Haltepunkt, gehen zum richtigen Container und f√ºhren das richtige Skript aus. <br><br>  So etwas wie: <br><br><pre> <code class="bash hljs">alex@alex-Aspire-ES1-572 ~ $ php71first www-data@a0e771cfac72:~$ cdf www-data@a0e771cfac72:~/first.loc$ php index.php I<span class="hljs-string"><span class="hljs-string">'am first host www-data@a0e771cfac72:~/first.loc$</span></span></code> </pre><br>  Wobei php71first der Alias ‚Äã‚Äãauf dem Hostcomputer ist: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> php71first=<span class="hljs-string"><span class="hljs-string">"cd ~/docker_git &amp;&amp; docker-compose exec php71-first bash"</span></span></code> </pre> <br>  <code>cdf</code> - ein Alias, der in einem Container funktioniert.  Ich habe oben geschrieben, dass ich lieber Aliase verwende, um mit Containern zu kommunizieren. <br><br>  Das ist alles, konstruktive Kritik, Kommentare sind willkommen. <br><br>  PS Ich m√∂chte Denis Bondar meinen tiefen Dank f√ºr seinen Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PhpStorm + Docker + Xdebug aussprechen</a> , der der Ausgangspunkt f√ºr das Schreiben dieses Tutorials war. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473184/">https://habr.com/ru/post/de473184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473156/index.html">Wie man Wissen in der Praxis testet, Vorteile f√ºr die Zulassung zum Masterstudiengang und Stelleneinladungen erh√§lt</a></li>
<li><a href="../de473160/index.html">Pers√∂nliche Marke zur Unterst√ºtzung des Gesch√§fts: 8 Schritte zur Erstellung eines Konzepts</a></li>
<li><a href="../de473166/index.html">Kompilieren von FFmpeg zu WebAssembly (= ffmpeg.js): Teil 3 - Konvertieren von AVI in MP4</a></li>
<li><a href="../de473174/index.html">Was ist ein Validator-Spiel oder wie wird eine Proof-of-Stake-Blockchain ausgef√ºhrt?</a></li>
<li><a href="../de473182/index.html">Das Prinzip der Erh√∂hung der Flexibilit√§t der Eigenschaften moderner Automobil-ICEs</a></li>
<li><a href="../de473186/index.html">Nicht triviales Layout von Elementen auf der Flexbox ohne Medienanforderungen</a></li>
<li><a href="../de473188/index.html">Vor- und Nachteile von Atlassian-Tools. Verwendung im Nicht-IT-Gesch√§ft</a></li>
<li><a href="../de473190/index.html">TAME Metformin Projekt: Meinungen sind geteilt</a></li>
<li><a href="../de473196/index.html">Skripte in sch√∂ne Werkzeuge f√ºr maschinelles Lernen verwandeln</a></li>
<li><a href="../de473198/index.html">Schrittmotortreiber. Testen des L9110-Chips</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>