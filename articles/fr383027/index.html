<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👋🏻 👩‍✈️ 🥡 L'IoT pour un sou: un guide pratique. Partie 2, logiciel 👬 🏛️ 🤴🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous continuons la série d'articles de guide dans lesquels nous considérons comment mettre en œuvre à partir de zéro un appareil IoT contrôlé par le c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'IoT pour un sou: un guide pratique. Partie 2, logiciel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/383027/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous continuons la série d'articles de guide dans lesquels nous considérons comment mettre en œuvre à partir de zéro un appareil IoT contrôlé par le cloud simple et bon marché avec un grand potentiel - sans soudure et difficultés inutiles. Prenez une micropuce propre ESP8266, installez le firmware depuis DeviceHive, configurez et écrivez une simple application Web pour accéder au serveur cloud. Nous assemblons et connectons un simple appareil à la puce électronique, qui peut être contrôlé en quelques clics dans le navigateur. Voici la deuxième partie du cycle, qui décrit quel logiciel est nécessaire, comment le démarrer, comment flasher ESP8266 et se lier d'amitié avec le serveur.</font></font></i><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/VuReziKXvos%3Ffeature%3Doembed&amp;usg=ALkJrhirfmUMxUQyjZq0tHT9e9rquayxkg" frameborder="0" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'auteur de l'article montre ce qui sera discuté aujourd'hui. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les premiers articles de la série: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT pour un sou, ou ce que DeviceHive peut faire. </font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT pour un sou: un guide pratique. </font><font style="vertical-align: inherit;">Partie 1, matériel.</font></font></a><br>
<a name="habracut"></a><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer un serveur</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Allons de l'avant et utilisons le terrain de jeu gratuit DeviceHive. </font><font style="vertical-align: inherit;">Pour ce faire, rendez-vous </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et inscrivez-vous. </font><font style="vertical-align: inherit;">Après cela, connectez-vous et accédez à cette page:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/844/419/90d/84441990d53945c1b48f2fae010472ff.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes nos félicitations! </font><font style="vertical-align: inherit;">Vous avez maintenant votre propre terrain de jeu sur DeviceHive. </font><font style="vertical-align: inherit;">Pour vous connecter au groupe de jeu de l'extérieur, utilisez le lien API Url. </font><font style="vertical-align: inherit;">Il s'agit de l'adresse que nous utilisons pour accéder au serveur depuis ESP8266 et l'application client. </font><font style="vertical-align: inherit;">Pour accéder au panneau d'administration (à Admin Url), utilisez la connexion spécifiée (connexion initiale) et le mot de passe (mot de passe initial). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une petite digression: le serveur peut être déployé localement ou sur un service cloud. </font><font style="vertical-align: inherit;">Recherchez les instructions d'installation </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous pouvez le rendre plus facile - démarrez le serveur en utilisant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur une seule ligne: </font><font style="vertical-align: inherit;">
regardez </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">ici</font></a><font style="vertical-align: inherit;"> pour une description complète </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
DeviceHive est un projet entièrement open source. </font><font style="vertical-align: inherit;">Cela signifie que le serveur peut être déployé à la maison et dans un service cloud, par exemple, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Azure</font></a></font><br>
<br>
<code>docker run -d --name=devicehive -p 8080:80 -p 9001:9001 devicehive/devicehive-standalone<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de faire le firmware. Pour ce faire, nous devons connecter l'ESP8266 à l'ordinateur, puis connecter l'adaptateur USB-&gt; UART, l'alimentation et le module ESP8266. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez le pilote de votre adaptateur. Les utilisateurs Linux sont plus faciles ici, car le noyau inclut déjà la plupart de ces pilotes. Mais les utilisateurs de Windows et OS X devront installer le pilote de l'adaptateur eux-mêmes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liens vers les pages de téléchargement officielles des puces les plus populaires: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CP210x: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.silabs.com/products/mcu/pages/usbtouartbridgevcpdrivers.aspx</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PL230x: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.prolific.com.tw/US/ShowProduct.aspx?pcid=41</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
FTDI: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www. ftdichip.com/Drivers/VCP.htm</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
CH341: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.wch.cn/index.php?s=/page-search_content-keyword-CH341SER.html</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Connectez l'adaptateur et assurez-vous que le pilote fonctionne correctement. Sous Linux, le périphérique doit apparaître sur le système de fichiers / dev / ttyUSB *, sous OS X /dev/tty.* et sous Windows, un port COM supplémentaire doit apparaître dans le gestionnaire de périphériques. Si tout va bien, déconnectez l'adaptateur de l'ordinateur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, connectez la sortie de l'alimentation (3,3 Volts) à l'ESP8266 avec deux fils. Pour que le module s'allume, lorsqu'il est sous tension, il doit être autorisé à fonctionner en fournissant un niveau élevé à la sortie de CH_PD. Il est nécessaire d'informer le module que nous utiliserons la mémoire interne, donc lorsqu'il est allumé, le GPIO15 doit être faible. Et pour entrer en mode de programmation, nous devons appliquer un niveau bas à GPIO0. Nous n'avons besoin de ce dernier que pendant le firmware. Cela semble effrayant, mais en réalité, nous avons seulement besoin de connecter les trois fils de CH_PD au plus de l'alimentation, et de connecter GPIO0 et GPIO15 à la masse (moins) de l'alimentation. Enfin, nous connectons l'adaptateur USB-&gt; UART à l'aide de trois fils supplémentaires: nous connectons les bornes moins la source (GND) à la masse de l'adaptateur,la sortie de l'adaptateur RX est connectée à la sortie du module TX de l'ESP8266 et la sortie de l'adaptateur TX à la sortie du module RX. Nous obtenons le schéma de connexion final pour trois modules standard différents. Si une sortie manque, elle est probablement déjà connectée à l'intérieur du module, le fil violet est la connexion la plus temporaire pour entrer en mode de programmation.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e1/9f3/512/8e19f3512588495b876d97a3e9ab806f.png"></div><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/c11/6df/510/c116df510f854c09b2e12ea14b5c5d23.png"></div><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8fb/a10/7b3/8fba107b32ee43199ff3d113922f5880.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple de l'exécution d'une telle connexion:</font></font><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/482/644/75f/48264475fcfa4d408b58d46b85b38046.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, rien n'était nécessaire pour souder, toutes les connexions peuvent être faites avec des connecteurs ordinaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, allumez la source d'alimentation, connectez l'adaptateur à l'ordinateur et téléchargez le micrologiciel DeviceHive recompilé pour ESP8266. </font><font style="vertical-align: inherit;">Au moment de la publication, la première et dernière version est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nouvelles versions précompilées peuvent toujours être trouvées sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous pouvez également prendre l'intégralité du référentiel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , compiler le firmware vous-même et le modifier à votre guise. </font><font style="vertical-align: inherit;">Tout le code dans le référentiel est sous licence MIT.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Décompressez l'archive téléchargée à partir du lien ci-dessus dans un répertoire séparé, exécutez esp-flasher- &lt;votre nom de système d'exploitation&gt; à partir de la console (les utilisateurs de Windows peuvent simplement double-cliquer sur esp-flasher-win.exe). Par conséquent, vous devriez avoir quelque chose comme ceci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e2/0d2/3ab/8e20d23ab58341e595662a60778544af.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de l'utilitaire inclus pour le firmware ESP8266, vous pouvez utiliser n'importe quel autre, par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esptool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Félicitations - le firmware est installé et fonctionne déjà! Déconnectez maintenant la masse de la broche GPIO0 (elle ne sera plus nécessaire) afin que le module ne revienne pas en mode programmation. Pour vous connecter au terminal ESP8266, exécutez esp-terminal- &lt;votre nom de système d'exploitation&gt; ou tout autre terminal de port série qui prend en charge les caractères d'échappement, par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou l''écran 'de l'utilitaire GNU. Paramètres de port: vitesse 115200, 8N1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux utilitaires inclus sont capables de détecter automatiquement le port auquel l'ESP8266 est connecté, c'est-à-dire aucun paramètre n'est requis au démarrage. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au démarrage du terminal, nous verrons l'invitation:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/89a/fa8/916/89afa8916b634d60877dabb7ac9ff577.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il s'agit d'un terminal similaire à Unix qui prend en charge la saisie semi-automatique (touche Tab) et l'historique (touches haut, bas). </font><font style="vertical-align: inherit;">Mais en fait, il n'y a ni fichier ni système d'exploitation. </font><font style="vertical-align: inherit;">Une liste des commandes disponibles est disponible dans 'help':</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3ab/5fe/a19/3ab5fea19fbb4c9cb662c9136c4364e3.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes intéressés par la commande 'configure'. </font><font style="vertical-align: inherit;">Exécutez-le pour configurer l'appareil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilitaire posera cinq questions simples:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le nom de votre réseau Wi-Fi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de passe de votre réseau Wi-Fi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'adresse API de votre serveur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeviceID de votre appareil.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeviceKey de votre appareil.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l '"URL du serveur DeviceHive", entrez l' "URL de l'API" du serveur. </font><font style="vertical-align: inherit;">Dans «DeviceID» - un identifiant d'appareil unique pour le serveur, c'est avec ce nom que nous distinguerons les appareils sur le serveur. </font><font style="vertical-align: inherit;">«DeviceID» peut être en texte brut. </font><font style="vertical-align: inherit;">En particulier, vous pouvez générer un GUID texte en cliquant sur Tab. </font><font style="vertical-align: inherit;">Et à la dernière demande de DeviceKey, entrez le mot de passe sélectionné. </font><font style="vertical-align: inherit;">Il peut être généré en appuyant sur la touche Tab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, il vaut la peine de faire une petite digression. </font><font style="vertical-align: inherit;">ESP8266 utilise l'authentification du serveur par DeviceID. </font><font style="vertical-align: inherit;">Dès que DeviceID et DeviceKey sont enregistrés sur le serveur, aucun autre appareil avec le même DeviceID mais avec un mot de passe différent ne peut se connecter. </font><font style="vertical-align: inherit;">À l'avenir, un mot de passe DeviceKey peut être requis uniquement si vous souhaitez remplacer le périphérique physique par un autre périphérique avec le même DeviceID.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici à quoi ressemble la configuration:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7f0/f03/fb1/7f0f03fb17254a9aaedfccd4ae78e0b2.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous avons tout fait correctement, nous pouvons examiner la sortie de débogage et nous assurer que le périphérique s'est correctement connecté au serveur. Voici la sortie de débogage d'un périphérique connecté avec succès:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/664/ea5/a6e/664ea5a6eccb456c9826c2357cf108e3.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'adaptateur USB-&gt; UART peut maintenant être désactivé. Vous pouvez le laisser si vous souhaitez pouvoir consulter la sortie de débogage ou l'état du réseau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, dans l'onglet "Appareils" du panneau d'administration, le premier appareil apparaîtra. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essayons d'envoyer la première commande à l'appareil</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pour ce faire, accédez au panneau d'administration de la manière suivante: "Périphériques" -&gt; "ESP" -&gt; "détails" -&gt; "commandes" -&gt; "entrer une nouvelle commande". Dans le champ "nom", spécifiez "gpio / read" et appuyez sur "push". L'équipe envoyée! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La réponse viendra très rapidement, mais les résultats des commandes du panneau d'administration ne sont pas automatiquement mis à jour. Pour cela, il y a un bouton de rafraîchissement en face de la commande. Cliquez dessus une ou deux secondes après l'envoi et vous verrez cet écran:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/745/de9/39a/745de939a7a743c99b45cee26b346440.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-il arrivé? En appuyant sur le bouton-poussoir, vous avez envoyé une commande du panneau d'administration (qui dans ce cas est le client du serveur) à la commande du serveur. ESP8266 l'a récupéré, exécuté et transmis le résultat au serveur. En cliquant sur le bouton Actualiser, vous avez demandé au serveur le résultat de la commande: La </font><font style="vertical-align: inherit;">
liste des commandes disponibles se trouve dans le fichier PDF fourni avec le firmware. Il est également disponible </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">ici</font></a><font style="vertical-align: inherit;"> , mais peut ne pas correspondre à la version de votre firmware.</font></font><br>
<br>
<code>{"0":"1","1":"0","2":"1","3":"0","4":"1","5":"1","12":"0","13":"0","14":"0","15":"0"}<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par une bonne tradition, nous allumerons la LED sur la carte. Dans la plupart des modules ESP8266, la LED est sur une sortie de type TX, et nous nous en occuperons. Il s'allume lorsqu'un niveau bas apparaît sur la sortie de la puce. Dans le document, nous verrons que GPIO1 n'est rien d'autre que la même sortie TX, alors définissons un zéro logique dessus. Dans ce cas, la LED s'allume sans aucun problème. Après cela, le terminal du module cessera de fonctionner jusqu'au redémarrage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous définissons la commande </font><font style="vertical-align: inherit;">également indiquée dans le document. Dans le champ "nom", nous définissons </font><font style="vertical-align: inherit;">et dans le champ "paramètres" - </font><font style="vertical-align: inherit;">. Après avoir exécuté la commande, la LED sur la carte doit s'allumer, comme sur la photo ci-dessous.</font></font><code>"gpio/write"<br>
</code><font style="vertical-align: inherit;"></font><code>"gpio/write"<br>
</code><font style="vertical-align: inherit;"></font><code>{"1":"0"}<br>
</code><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/284/6cd/b84/2846cdb8454e4b48922ea951e8fa832e.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une LED bleue sous quartz, à côté de laquelle une rouge brille toujours, qui indique que la carte est alimentée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir sur la photo, seuls deux fils avec alimentation et deux cavaliers sont connectés au module pour allumer le module dans le mode correct. </font><font style="vertical-align: inherit;">Pour désactiver, envoyez une commande avec un paramètre </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le format des paramètres de commande est JSON ordinaire. </font><font style="vertical-align: inherit;">Les champs pouvant être remplis, ainsi que leurs valeurs possibles, sont décrits dans le fichier PDF. </font><font style="vertical-align: inherit;">
Aujourd'hui, nous avons découvert comment envoyer les commandes les plus simples du panneau d'administration à l'appareil. </font><font style="vertical-align: inherit;">Dans le prochain article, nous vous expliquerons comment écrire une application cliente simple pour le serveur qui vous permet d'accéder à l'appareil, et d'implémenter un appareil un peu plus sérieux (rappelez-vous le laser du premier article?). </font><font style="vertical-align: inherit;">
Restez à l'écoute, ce sera intéressant!</font></font><code>{"1":"1"}<br>
</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Publié par Nikolai Khabarov, développeur principal embarqué.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr383027/">https://habr.com/ru/post/fr383027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr383011/index.html">Des lance-flammes à main sont apparus en vente aux USA</a></li>
<li><a href="../fr383013/index.html">IBM publie les mainframes LinuxOne et les contrats avec Canonical</a></li>
<li><a href="../fr383017/index.html">L'intelligence artificielle est-elle un génie mauvais ou bon?</a></li>
<li><a href="../fr383023/index.html">Robotique en agriculture</a></li>
<li><a href="../fr383025/index.html">Examen du vrai Android TV sur l'exemple du Sony 55w807c</a></li>
<li><a href="../fr383033/index.html">Le supraconducteur malodorant fonctionne à -70 ° C</a></li>
<li><a href="../fr383035/index.html">Alternatives à Google Play et à l'App Store ou comment la Chine vit sans Google Play</a></li>
<li><a href="../fr383039/index.html">Labyrinthe de carte postale. Un cadeau qui ne peut être ouvert sans résoudre le puzzle</a></li>
<li><a href="../fr383041/index.html">Demandez à Ethan n ° 25: où aller dans notre galaxie?</a></li>
<li><a href="../fr383045/index.html">Comment Tesla va changer le monde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>