<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§í üèÅ ü§£ Programaci√≥n con PyUSB 1.0 üè´ ‚ùé üéß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Del traductor : 
 Esta es una traducci√≥n del manual de Programaci√≥n con PyUSB 1.0 
 Esta gu√≠a fue escrita por los desarrolladores de PyUSB, pero r√°pid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programaci√≥n con PyUSB 1.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430528/">  <i><b>Del traductor</b> :</i> <i><br></i>  <i>Esta es una traducci√≥n del <a href="">manual de Programaci√≥n con PyUSB 1.0</a></i> <i><br></i>  <i>Esta gu√≠a fue escrita por los desarrolladores de PyUSB, pero r√°pidamente ejecut√°ndose a trav√©s de los commits, creo que walac es el autor principal.</i> <br><br><h2>  D√©jame presentarme </h2><br>  <b>PyUSB 1.0</b> es una biblioteca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Python</a> que proporciona un f√°cil acceso a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">USB</a> .  PyUSB proporciona varias funciones: <br><br><ul><li>  <i><b>100% escrito en Python:</b></i> <br>  A diferencia de las versiones 0.x que se escribieron en C, la versi√≥n 1.0 se escribe en Python.  Esto permite a los programadores de Python sin experiencia en C comprender mejor c√≥mo funciona PyUSB. </li><li> <i><b>Neutralidad de plataforma:</b></i> <br>  La versi√≥n 1.0 incluye un esquema de back-end front-end.  A√≠sla la API de los detalles de implementaci√≥n espec√≠ficos del sistema.  La interfaz <u>IBackend</u> conecta estas dos capas.  PyUSB viene con backends integrados para libusb 0.1, libusb 1.0 y OpenUSB.  Puede escribir su propio backend si lo desea. </li><li>  <i><b>Portabilidad:</b></i> <br>  PyUSB debe ejecutarse en cualquier plataforma con Python&gt; = 2.4, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ctypes</a> y al menos uno de los backends integrados compatibles. </li><li>  <i><b>Simplicidad:</b></i> <br>  ¬°La interacci√≥n con un dispositivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">USB</a> nunca ha sido tan f√°cil!  USB es un protocolo complejo, y PyUSB tiene buenos ajustes preestablecidos para las configuraciones m√°s comunes. </li><li>  <i><b>Soporte de engranaje is√≥crono:</b></i> <br>  PyUSB admite transferencias is√≥cronas si el backend subyacente las admite. </li></ul><br>  Aunque PyUSB hace que la programaci√≥n de USB sea menos dolorosa, este tutorial asume que tiene un conocimiento m√≠nimo del protocolo USB.  Si no sabe nada sobre USB, le recomiendo <b>el excelente</b> libro <b>USB Complete de</b> Jan Axelson. <br><a name="habracut"></a><br><h2>  Basta de hablar, ¬°vamos a escribir el c√≥digo! </h2><br><h3>  Quien es quien </h3><br>  Para comenzar, demos una descripci√≥n de los m√≥dulos PyUSB.  Todos los m√≥dulos PyUSB est√°n bajo <u>usb</u> , con los siguientes m√≥dulos: <br><table><tbody><tr><th>  Modulo </th><th>  Descripci√≥n </th></tr><tr><td>  n√∫cleo </td><td>  El m√≥dulo USB principal. </td></tr><tr><td>  util </td><td>  Funciones auxiliares </td></tr><tr><td>  control </td><td>  Solicitudes de gesti√≥n est√°ndar. </td></tr><tr><td>  legado </td><td>  Capa de compatibilidad de la versi√≥n 0.x. </td></tr><tr><td>  backend </td><td>  Un subpaquete que contiene backends integrados. </td></tr></tbody></table><br>  Por ejemplo, para importar un m√≥dulo <u>central</u> , ingrese lo siguiente: <br><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.core &gt;&gt;&gt; dev = usb.core.find()</code> </pre> <br><h3>  Bueno, empecemos </h3><br>  El siguiente es un programa simple que env√≠a la cadena 'prueba' al primer origen de datos encontrado (punto final OUT): <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.core <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.util <span class="hljs-comment"><span class="hljs-comment">#    dev = usb.core.find(idVendor=0xfffe, idProduct=0x0001) #   ? if dev is None: raise ValueError('Device not found') #   .  ,   #    dev.set_configuration() #    cfg = dev.get_active_configuration() intf = cfg[(0,0)] ep = usb.util.find_descriptor( intf, #     custom_match = \ lambda e: \ usb.util.endpoint_direction(e.bEndpointAddress) == \ usb.util.ENDPOINT_OUT) assert ep is not None #   ep.write('test')</span></span></code> </pre><br>  Las dos primeras l√≠neas importan los m√≥dulos del paquete PyUSB.  <u>usb.core</u> es el m√≥dulo principal, y <u>usb.util</u> contiene funciones auxiliares.  El siguiente comando busca nuestro dispositivo y devuelve una instancia del objeto si lo encuentra.  Si no, devuelve <u>Ninguno</u> .  A continuaci√≥n, establecemos la configuraci√≥n que utilizaremos.  Nota: la ausencia de argumentos significa que la configuraci√≥n deseada se estableci√≥ de forma predeterminada.  Como ver√°, muchas caracter√≠sticas de PyUSB tienen configuraciones predeterminadas para los dispositivos m√°s comunes.  En este caso, se establece la primera configuraci√≥n encontrada. <br><br>  Luego, buscamos el punto final en el que estamos interesados.  Lo estamos buscando dentro de la primera interfaz que tenemos.  Despu√©s de encontrar este punto, le enviamos datos. <br><br>  Si conocemos la direcci√≥n del punto final de antemano, simplemente podemos llamar a la funci√≥n de <u>escritura</u> del objeto del dispositivo: <br><br><pre> <code class="python hljs">dev.write(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'test'</span></span>)</code> </pre><br>  Aqu√≠ escribimos la cadena 'prueba' en el punto de interrupci√≥n en la direcci√≥n <i>1</i> .  Todas estas funciones se discutir√°n mejor en las siguientes secciones. <br><br><h3>  Que esta mal </h3><br>  Cada funci√≥n en PyUSB arroja una excepci√≥n en caso de error.  Adem√°s de las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">excepciones est√°ndar de Python</a> , PyUSB define <u>usb.core.USBError</u> para errores relacionados con USB. <br><br>  Tambi√©n puede usar las funciones de registro de PyUSB.  Utiliza el m√≥dulo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">registro</a> .  Para usarlo, defina la <u>variable de</u> entorno <u>PYUSB_DEBUG</u> con uno de los siguientes niveles de registro: <u>cr√≠tico</u> , <u>error</u> , <u>advertencia</u> , <u>informaci√≥n</u> o <u>depuraci√≥n</u> . <br><br>  Por defecto, los mensajes se env√≠an a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sys.stderr</a> .  Si lo desea, puede redirigir los mensajes de registro a un archivo definiendo la variable de entorno <u>PYUSB_LOG_FILENAME</u> .  Si su valor es la ruta correcta al archivo, los mensajes se escribir√°n all√≠; de lo contrario, se enviar√°n a <u>sys.stderr</u> . <br><br><h3>  Donde estas </h3><br>  La funci√≥n <u>find ()</u> en el m√≥dulo <u>central</u> se usa para buscar y numerar dispositivos conectados al sistema.  Por ejemplo, supongamos que nuestro dispositivo tiene una ID de proveedor con un valor de 0xfffe y una ID de producto de 0x0001.  Si necesitamos encontrar este dispositivo haremos esto: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.core dev = usb.core.find(idVendor=<span class="hljs-number"><span class="hljs-number">0xfffe</span></span>, idProduct=<span class="hljs-number"><span class="hljs-number">0x0001</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dev <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">'Our device is not connected'</span></span>)</code> </pre><br>  Eso es todo, la funci√≥n devolver√° el objeto <u>usb.core.Device</u> que representa nuestro dispositivo.  Si no se encuentra el dispositivo, devolver√° <u>Ninguno</u> .  De hecho, puede usar cualquier campo de la clase <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descriptor de</a> dispositivo que desee.  Por ejemplo, ¬øqu√© pasa si queremos saber si hay una impresora USB conectada al sistema?  Es muy f√°cil: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ,   if usb.core.find(bDeviceClass=7) is None: raise ValueError('No printer found')</span></span></code> </pre><br>  7 es el c√≥digo para la clase de impresora seg√∫n la especificaci√≥n USB.  Oh, espera, ¬øy si quiero numerar todas las impresoras disponibles?  No hay problema <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     ... printers = usb.core.find(find_all=True, bDeviceClass=7) # Python 2, Python 3,     import sys sys.stdout.write('There are ' + len(printers) + ' in the system\n.')</span></span></code> </pre><br>  Que paso  Bueno, es hora de una peque√±a explicaci√≥n ... <u>find</u> tiene un par√°metro llamado <u>find_all</u> y su valor predeterminado es False.  Cuando es falso <a name="orig1"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[1]</a> , <u>find</u> devolver√° el primer dispositivo que coincida con los criterios especificados (hablaremos de esto pronto).  Si pasa un valor <i>verdadero</i> al par√°metro, <u>find en su</u> lugar devolver√° una lista de todos los dispositivos que coinciden con los criterios.  Eso es todo!  Simple, ¬øverdad? <br><br>  Hemos terminado?  No!  Todav√≠a no lo he contado todo: muchos dispositivos ponen su informaci√≥n de clase en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descriptor de</a> interfaz en lugar del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descriptor</a> de dispositivo.  Entonces, para encontrar verdaderamente todas las impresoras conectadas al sistema, necesitaremos revisar todas las configuraciones, as√≠ como todas las interfaces, y verificar si una de las interfaces est√° configurada en bInterfaceClass 7. Si usted es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">programador</a> como yo, puede preguntarse: ¬øHay alguna manera m√°s f√°cil de implementar esto?  Respuesta: s√≠, lo es.  Para comenzar, veamos el c√≥digo listo para encontrar todas las impresoras conectadas: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.core <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.util <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find_class</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, class_)</span></span></span><span class="hljs-function">:</span></span> self._class = class_ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, device)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,   if device.bDeviceClass == self._class: return True # ,   ,   # ,     for cfg in device: # find_descriptor:  ? intf = usb.util.find_descriptor( cfg, bInterfaceClass=self._class ) if intf is not None: return True return False printers = usb.core.find(find_all=1, custom_match=find_class(7))</span></span></code> </pre><br>  El par√°metro <u>custom_match</u> acepta cualquier objeto llamado que recibe el objeto del dispositivo.  Debe devolver verdadero para un dispositivo adecuado y falso para un inadecuado.  Tambi√©n puede combinar <u>custom_match</u> con campos de dispositivo si desea: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,    : printers = usb.core.find(find_all=1, custom_match=find_class(7), idVendor=0xfffe)</span></span></code> </pre><br>  Aqu√≠ nos interesan las impresoras del proveedor 0xfffe. <br><br><h3>  Describete a ti mismo </h3><br>  Ok, encontramos nuestro dispositivo, pero antes de interactuar con √©l, nos gustar√≠a saber m√°s sobre √©l.  Bueno, ya sabes, configuraciones, interfaces, puntos finales, tipos de flujos de datos ... <br>  Si tiene un dispositivo, puede acceder a cualquier campo del descriptor del dispositivo como propiedades del objeto: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>dev.bLength &gt;&gt;&gt; dev.bNumConfigurations &gt;&gt;&gt; dev.bDeviceClass &gt;&gt;&gt; <span class="hljs-comment"><span class="hljs-comment"># ...</span></span></code> </pre><br>  Para acceder a las configuraciones disponibles en el dispositivo, puede iterar el dispositivo: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> cfg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dev: sys.stdout.write(str(cfg.bConfigurationValue) + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>)</code> </pre><br>  Del mismo modo, puede iterar la configuraci√≥n para acceder a las interfaces, as√≠ como iterar las interfaces para acceder a sus puntos de control.  Cada tipo de objeto tiene campos del descriptor correspondiente como atributos.  Echa un vistazo a un ejemplo: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> cfg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dev: sys.stdout.write(str(cfg.bConfigurationValue) + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> intf <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cfg: sys.stdout.write(<span class="hljs-string"><span class="hljs-string">'\t'</span></span> + \ str(intf.bInterfaceNumber) + \ <span class="hljs-string"><span class="hljs-string">','</span></span> + \ str(intf.bAlternateSetting) + \ <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ep <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> intf: sys.stdout.write(<span class="hljs-string"><span class="hljs-string">'\t\t'</span></span> + \ str(ep.bEndpointAddress) + \ <span class="hljs-string"><span class="hljs-string">'\n'</span></span>)</code> </pre><br>  Tambi√©n puede usar √≠ndices para acceso aleatorio a descriptores, como aqu√≠: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-comment"><span class="hljs-comment">#      &gt;&gt;&gt; cfg = dev[1] &gt;&gt;&gt; #      &gt;&gt;&gt; intf = cfg[(0,0)] &gt;&gt;&gt; #    &gt;&gt;&gt; ep = intf[2]</span></span></code> </pre><br>  Como puede ver, los √≠ndices se cuentan desde 0. ¬°Pero espere!  Hay algo extra√±o en la forma en que obtengo acceso a la interfaz ... S√≠, tiene raz√≥n, el √≠ndice de Configuraci√≥n toma una serie de dos valores, de los cuales el primero es el √≠ndice de la Interfaz, y el segundo es una configuraci√≥n alternativa.  En general, para acceder a la primera interfaz, pero con la segunda configuraci√≥n, escribiremos <u>cfg [(0,1)]</u> . <br><br>  Ahora es el momento de aprender una forma poderosa de buscar descriptores, una √∫til funci√≥n <u>find_descriptor</u> .  Ya lo hemos visto en el ejemplo de b√∫squeda de impresoras.  <u>find_descriptor</u> funciona casi igual que <u>find</u> , con dos excepciones: <br><br><ul><li>  <u>find_descriptor</u> recibe como primer par√°metro el descriptor de origen que buscar√°. </li><li>  No hay ning√∫n par√°metro de fondo en √©l <a name="orig2"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[2]</a> </li></ul><br>  Por ejemplo, si tenemos un descriptor de configuraci√≥n de <u>cfg</u> y queremos encontrar todas las configuraciones alternativas para la interfaz 1, haremos esto: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.util alt = usb.util.find_descriptor(cfg, find_all=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, bInterfaceNumber=<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  Tenga en cuenta que <u>find_descriptor</u> est√° en el m√≥dulo <u>usb.util</u> .  Tambi√©n acepta el par√°metro <u>custom_match</u> descrito anteriormente. <br><br>  <b>Nos ocupamos de m√∫ltiples dispositivos id√©nticos</b> <br><br>  A veces puede tener dos dispositivos id√©nticos conectados a una computadora.  ¬øC√≥mo puedes distinguir entre ellos?  <u>Los</u> objetos del <u>dispositivo</u> vienen con dos atributos adicionales que no forman parte de la especificaci√≥n USB, pero son muy √∫tiles: los atributos de <u>bus</u> y <u>direcci√≥n</u> .  En primer lugar, vale la pena decir que estos atributos provienen del backend, y el backend puede no admitirlos, en este caso est√°n configurados en <u>Ninguno</u> .  Sin embargo, estos atributos representan el n√∫mero y la direcci√≥n del bus del dispositivo y, como habr√°s adivinado, se pueden usar para distinguir entre dos dispositivos con los mismos valores de atributo <u>idVendor</u> e <u>idProduct</u> . <br><br><h3>  ¬øComo deber√≠a trabajar? </h3><br>  Despu√©s de conectarse, los dispositivos USB deben configurarse utilizando algunas consultas est√°ndar.  Cuando comenc√© a estudiar la especificaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">USB</a> , los descriptores, configuraciones, interfaces, configuraciones alternativas, tipos de transferencia y todo eso me desanimaron ... Y lo peor de todo es que no puedes ignorarlos: ¬°el dispositivo no funciona sin establecer la configuraci√≥n, incluso si es una!  PyUSB est√° tratando de hacer tu vida lo m√°s simple posible.  Por ejemplo, despu√©s de recibir el objeto de su dispositivo, en primer lugar, antes de interactuar con √©l, debe enviar una solicitud <u>set_configuration</u> .  El par√°metro de configuraci√≥n para esta consulta que le interesa es <u>bConfigurationValue</u> .  La mayor√≠a de los dispositivos no tienen m√°s de una configuraci√≥n, y el seguimiento del valor de configuraci√≥n a usar es molesto (aunque la mayor√≠a del c√≥digo que vi acaba de codificar esto).  Por lo tanto, en PyUSB, simplemente puede enviar una solicitud <u>set_configuration</u> sin argumentos.  En este caso, instalar√° la primera configuraci√≥n encontrada (si su dispositivo tiene solo una, no necesita preocuparse por el valor de la configuraci√≥n).  Por ejemplo, suponga que tiene un dispositivo con un descriptor de configuraci√≥n, y su campo bConfigurationValue es 5 <a name="orig3"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[3]</a> , las consultas posteriores funcionar√°n igual: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>dev.set_configuration(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-comment"><span class="hljs-comment">#  &gt;&gt;&gt; dev.set_configuration() #  ,   5 -  #  &gt;&gt;&gt; cfg = util.find_descriptor(dev, bConfigurationValue=5) &gt;&gt;&gt; cfg.set() #  &gt;&gt;&gt; cfg = util.find_descriptor(dev, bConfigurationValue=5) &gt;&gt;&gt; dev.set_configuration(cfg)</span></span></code> </pre><br>  Wow!  ¬°Puede usar el objeto de <u>configuraci√≥n</u> como par√°metro para <u>configurar_configuraci√≥n</u> !  S√≠, tambi√©n tiene un m√©todo <u>establecido</u> para configurarse en la configuraci√≥n actual. <br><br>  Otra opci√≥n que necesita o no necesitar√° configurar es la opci√≥n de cambiar las interfaces.  Cada dispositivo puede tener solo una configuraci√≥n activada a la vez, y cada configuraci√≥n puede tener m√°s de una interfaz, y puede usar todas las interfaces al mismo tiempo.  Comprender√° mejor este concepto si piensa en la interfaz como un dispositivo l√≥gico.  Por ejemplo, imaginemos una impresora multifunci√≥n, que al mismo tiempo es tanto una impresora como un esc√°ner.  Para no complicarlo (o al menos hacerlo lo m√°s simple posible), supongamos que solo tiene una configuraci√≥n.  Porque  Tenemos una impresora y un esc√°ner, la configuraci√≥n tiene 2 interfaces: una para la impresora y otra para el esc√°ner.  Un dispositivo con m√°s de una interfaz se llama dispositivo compuesto.  Cuando conecta su impresora multifunci√≥n a su computadora, el sistema operativo cargar√° dos controladores diferentes: uno para cada dispositivo perif√©rico "l√≥gico" que tenga <a name="orig4"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[4]</a> <br><br>  ¬øQu√© pasa con la configuraci√≥n de interfaz alternativa?  Qu√© bueno que preguntaste.  Una interfaz tiene una o m√°s configuraciones alternativas.  Se considera que una interfaz con solo una configuraci√≥n alternativa no tiene configuraciones alternativas <a name="orig5"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[5]</a>  Configuraciones alternativas para interfaces como una configuraci√≥n para dispositivos, es decir, para cada interfaz solo puede tener una configuraci√≥n alternativa activa.  Por ejemplo, la especificaci√≥n USB sugiere que un dispositivo no puede tener un punto de control is√≥crono en su configuraci√≥n alternativa primaria <a name="orig6"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[6]</a> , de modo que el dispositivo de transmisi√≥n debe tener al menos dos configuraciones alternativas, con una segunda configuraci√≥n que tenga un punto de control is√≥crono.  Pero, a diferencia de las configuraciones, las interfaces con una sola configuraci√≥n alternativa no necesitan ser configuradas <a name="orig7"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[7]</a>  Seleccione una configuraci√≥n de interfaz alternativa utilizando la funci√≥n <u>set_interface_altsetting</u> : <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>dev.set_interface_altsetting(interface = <span class="hljs-number"><span class="hljs-number">0</span></span>, alternate_setting = <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br>  <b>Advertencia</b> <br><br>  La especificaci√≥n USB dice que el dispositivo puede devolver un error si recibe una solicitud SET_INTERFACE para una interfaz que no tiene configuraciones alternativas adicionales.  Entonces, si no est√° seguro de que la interfaz tiene m√°s de una configuraci√≥n alternativa o de que acepta la solicitud SET_INTERFACE, el m√©todo m√°s seguro es llamar a <u>set_interface_altsetting</u> dentro del bloque try-except, como aqu√≠: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: dev.set_interface_altsetting(...) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> USBError: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Tambi√©n puede usar el objeto <u>Interface</u> como par√°metro de funci√≥n, la <u>interfaz</u> y <u>los</u> par√°metros <u>alternate_setting</u> se heredan autom√°ticamente de los <u>campos</u> <u>bInterfaceNumber</u> y <u>bAlternateSetting</u> .  Un ejemplo: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>intf = find_descriptor(...) &gt;&gt;&gt; dev.set_interface_altsetting(intf) &gt;&gt;&gt; intf.set_altsetting() <span class="hljs-comment"><span class="hljs-comment"># !       </span></span></code> </pre><br>  <b>Advertencia</b> <br><br>  El objeto de <u>interfaz</u> debe pertenecer al descriptor de configuraci√≥n activo. <br><br><h3>  H√°blame cari√±o </h3><br>  Y ahora es hora de que comprendamos c√≥mo interactuar con dispositivos USB.  USB tiene cuatro tipos de flujos de datos: transferencia masiva, transferencia de interrupci√≥n, transferencia is√≥crona y transferencia de control.  No planeo explicar el prop√≥sito de cada hilo y las diferencias entre ellos.  Por lo tanto, supongo que tiene al menos conocimientos b√°sicos de flujos de datos USB. <br><br>  El flujo de datos de control es el √∫nico flujo cuya estructura se describe en la especificaci√≥n, el resto simplemente env√≠a y recibe datos sin procesar desde un punto de vista USB.  Por lo tanto, tiene varias funciones para trabajar con flujos de control, y el resto de los flujos son procesados ‚Äã‚Äãpor las mismas funciones. <br><br>  Puede acceder a la secuencia de datos de control utilizando el m√©todo <u>ctrl_transfer</u> .  Se utiliza tanto para flujos salientes (OUT) como entrantes (IN).  La direcci√≥n del flujo est√° determinada por el par√°metro <u>bmRequestType</u> . <br><br>  Los par√°metros <u>ctrl_transfer</u> casi coinciden con la estructura de la solicitud de control.  El siguiente es un ejemplo de c√≥mo organizar un flujo de datos de control. <a name="orig8"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[8]</a> : <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>msg = <span class="hljs-string"><span class="hljs-string">'test'</span></span> &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> dev.ctrl_transfer(<span class="hljs-number"><span class="hljs-number">0x40</span></span>, CTRL_LOOPBACK_WRITE, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, msg) == len(msg) &gt;&gt;&gt; ret = dev.ctrl_transfer(<span class="hljs-number"><span class="hljs-number">0xC0</span></span>, CTRL_LOOPBACK_READ, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, len(msg)) &gt;&gt;&gt; sret = <span class="hljs-string"><span class="hljs-string">''</span></span>.join([chr(x) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ret]) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> sret == msg</code> </pre><br>  Este ejemplo supone que nuestro dispositivo incluye dos solicitudes de control de usuario que act√∫an como una tuber√≠a de bucle invertido.  Lo que escribes con el mensaje <u>CTRL_LOOPBACK_WRITE</u> , puedes leerlo con el mensaje <u>CTRL_LOOPBACK_READ</u> . <br><br>  Los primeros cuatro par√°metros ( <u>bmRequestType</u> , <u>bmRequest</u> , <u>wValue</u> y <u>wIndex</u> ) son los campos de la estructura est√°ndar de la secuencia de control.  El quinto par√°metro son los datos que se transfieren para el flujo de datos salientes o el n√∫mero de datos que se leen en el flujo entrante.  Los datos transmitidos pueden ser cualquier tipo de secuencia, que se puede alimentar como par√°metro a la entrada del m√©todo <u>__init__</u> para la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">matriz</a> .  Si no se transfieren datos, el par√°metro debe establecerse en <u>Ninguno</u> (o 0 en el caso de un flujo de datos entrante).  Hay otro par√°metro opcional que indica el tiempo de espera de la operaci√≥n.  Si no lo pasa, se usar√° el tiempo de espera predeterminado (m√°s sobre esto m√°s adelante).  En el flujo de datos salientes, el valor de retorno es el n√∫mero de bytes realmente enviados al dispositivo.  En la secuencia entrante, el valor de retorno es una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">matriz</a> con los datos le√≠dos. <br><br>  Para otras transmisiones, puede usar los m√©todos de <u>escritura</u> y <u>lectura</u> , respectivamente, para escribir y leer datos.  No necesita preocuparse por el tipo de transmisi√≥n: la direcci√≥n del punto de control lo detecta autom√°ticamente.  Aqu√≠ est√° nuestro ejemplo de bucle invertido, siempre que tengamos una tuber√≠a de bucle invertido en el punto de interrupci√≥n 1: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>msg = <span class="hljs-string"><span class="hljs-string">'test'</span></span> &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(dev.write(<span class="hljs-number"><span class="hljs-number">1</span></span>, msg, <span class="hljs-number"><span class="hljs-number">100</span></span>)) == len(msg) &gt;&gt;&gt; ret = dev.read(<span class="hljs-number"><span class="hljs-number">0x81</span></span>, len(msg), <span class="hljs-number"><span class="hljs-number">100</span></span>) &gt;&gt;&gt; sret = <span class="hljs-string"><span class="hljs-string">''</span></span>.join([chr(x) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ret]) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> sret == msg</code> </pre><br>  El primer y el tercer par√°metro son los mismos para ambos m√©todos: esta es la direcci√≥n del punto de control y el tiempo de espera, respectivamente.  El segundo par√°metro son los datos transmitidos (escritura) o el n√∫mero de bytes a leer (leer).  Los datos devueltos ser√°n una instancia de un objeto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">matriz</a> para el m√©todo de <u>lectura</u> o el n√∫mero de bytes escritos para el m√©todo de <u>escritura</u> . <br><br>  Con las versiones beta 2, en lugar de la cantidad de bytes, puede pasar para <u>leer</u> o <u>ctrl_transferir</u> un objeto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">matriz</a> en el que se leer√°n los datos.  En este caso, el n√∫mero de bytes a leer ser√° la longitud de la matriz multiplicada por el valor de <u>array.itemsize</u> . <br><br>  En <u>ctrl_transfer</u> , el par√°metro de <u>tiempo de espera</u> es opcional.  Cuando <u>se</u> omite el <u>tiempo de espera</u> , la propiedad <u>Device.default_timeout</u> se <u>usa</u> como tiempo de espera operativo. <br><br><h3>  Contr√≥late </h3><br>  Adem√°s de las funciones de <u>flujo de</u> datos, el m√≥dulo <u>usb.control</u> proporciona funciones que incluyen solicitudes de control USB est√°ndar, y el m√≥dulo <u>usb.util</u> tiene una conveniente funci√≥n <u>get_string que</u> muestra espec√≠ficamente descriptores de l√≠nea. <br><br><h2>  Temas adicionales </h2><br><h3>  Detr√°s de cada gran abstracci√≥n hay una gran realizaci√≥n </h3><br>  Anteriormente, solo hab√≠a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libusb</a> .  Luego vino libusb 1.0 y ten√≠amos libusb 0.1 y 1.0.  Despu√©s de eso, creamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OpenUSB</a> y ahora vivimos en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Torre de Babel de la</a> Biblioteca USB <a name="orig9"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[9]</a>  ¬øC√≥mo maneja PyUSB esto?  Bueno, PyUSB es una biblioteca democr√°tica, puedes elegir qu√© biblioteca quieres.  De hecho, puede escribir su propia biblioteca USB desde cero y decirle a PyUSB que la use. <br><br>  La funci√≥n de <u>b√∫squeda</u> tiene otro par√°metro, del que no te habl√©.  Este es el par√°metro de fondo.  Si no lo transfiere, se utilizar√° uno de los backends integrados.  Un backend es un objeto heredado de <u>usb.backend.IBackend</u> , responsable de la introducci√≥n de basura USB espec√≠fica del sistema operativo.  Como habr√°s adivinado, el libusb 0.1 incorporado, libusb 1.0 y OpenUSB son backends. <br><br>  Puedes escribir tu propio backend y usarlo.  Simplemente herede de <u>IBackend</u> y habilite los m√©todos necesarios.  Es posible que deba consultar la documentaci√≥n de <u>usb.backend</u> para comprender c√≥mo se hace. <br><br><h3>  No seas ego√≠sta </h3><br>  Python tiene lo que llamamos <i>administraci√≥n autom√°tica de memoria</i> .  Esto significa que la m√°quina virtual decidir√° cu√°ndo descargar objetos de la memoria.  Bajo el cap√≥, PyUSB gestiona todos los recursos de bajo nivel con los que necesita trabajar (aprobando la interfaz, ajustando el dispositivo, etc.) y la mayor√≠a de los usuarios no necesitan preocuparse por ello.  Pero, debido a la naturaleza indefinida de la destrucci√≥n autom√°tica de objetos por Python, los usuarios no pueden predecir cu√°ndo se liberar√°n los recursos asignados.  Algunas aplicaciones necesitan asignar y liberar recursos de manera determinista.  Para tales aplicaciones, el m√≥dulo <u>usb.util</u> proporciona funciones para interactuar con la gesti√≥n de recursos. <br><br>  Si desea solicitar y liberar interfaces manualmente, puede usar las <u>funciones</u> <u>Claim_interface</u> y <u>release_interface</u> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La funci√≥n </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Claim_interface</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solicitar√° la interfaz especificada si el dispositivo a√∫n no lo ha hecho. Si el dispositivo ya ha solicitado una interfaz, no hace nada. Tambi√©n </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">release_interface</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lanzar√° la interfaz especificada, si se solicita. Si no se solicita la interfaz, no hace nada. Puede usar la consulta manual de la interfaz para resolver el </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">problema de selecci√≥n de configuraci√≥n</font></a><font style="vertical-align: inherit;"> descrito en la documentaci√≥n de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libusb</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si desea liberar todos los recursos asignados por el objeto del dispositivo (incluidas las interfaces solicitadas), puede utilizar la funci√≥n </font><u><font style="vertical-align: inherit;">dispose_resources</font></u></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Libera todos los recursos asignados y coloca el objeto del dispositivo (pero no en el hardware del propio dispositivo) en el estado en el que se devolvi√≥ despu√©s de usar la funci√≥n de </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b√∫squeda</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Definici√≥n de biblioteca manual </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En general, un back-end es un contenedor sobre una biblioteca compartida que implementa una API para acceder a USB. Por defecto, los usos de back-end </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ctypes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cuentan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">find_library ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En Linux y otros sistemas operativos similares a Unix, </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">find_library</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> intenta ejecutar programas externos (como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ sbin / ldconfig</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gcc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objdump</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) para encontrar el archivo de la biblioteca. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En los sistemas en los que faltan estos programas y / o el cach√© de la biblioteca est√° deshabilitado, esta funci√≥n no se puede usar. Para superar las limitaciones, PyUSB le permite enviar la funci√≥n personalizada find_library () al backend. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un ejemplo de tal escenario ser√≠a:</font></font><br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.core &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usb.backend.libusb1 &gt;&gt;&gt; &gt;&gt;&gt; backend = usb.backend.libusb1.get_backend(find_library=<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: <span class="hljs-string"><span class="hljs-string">"/usr/lib/libusb-1.0.so"</span></span>) &gt;&gt;&gt; dev = usb.core.find(..., backend=backend)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tenga en cuenta que find_library es un argumento para la funci√≥n get_backend (), en la que proporciona la funci√≥n responsable de encontrar la biblioteca correcta para el backend. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reglas de la vieja escuela </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si est√° escribiendo una aplicaci√≥n utilizando las antiguas API de PyUSB (0. algo all√≠), es posible que se pregunte si necesita actualizar su c√≥digo para usar la nueva API. </font><font style="vertical-align: inherit;">Bueno, deber√≠as hacerlo, pero no es necesario. </font><font style="vertical-align: inherit;">PyUSB 1.0 viene con el </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√≥dulo de</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compatibilidad </font><u><font style="vertical-align: inherit;">usb.legacy</font></u><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Incluye la antigua API basada en la nueva API. </font><font style="vertical-align: inherit;">"Bueno, ¬ødeber√≠a reemplazar mi l√≠nea de </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">importaci√≥n usb</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import usb.legacy como usb</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que mi aplicaci√≥n funcione?", Pregunta. </font><font style="vertical-align: inherit;">La respuesta es s√≠, funcionar√°, pero no es necesario. </font><font style="vertical-align: inherit;">Si ejecuta su aplicaci√≥n sin cambios, funcionar√° porque la l√≠nea de </font><font style="vertical-align: inherit;">importaci√≥n </font><font style="vertical-align: inherit;">de </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> importa todos los s√≠mbolos p√∫blicos de </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usb.legacy</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si encuentra un problema, lo m√°s probable es que haya encontrado un error.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ayudame por favor </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si necesita ayuda, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no me escriba un correo electr√≥nico</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , hay una lista de correo para esto. </font><font style="vertical-align: inherit;">Las instrucciones de suscripci√≥n se pueden encontrar en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">PyUSB</font></a><font style="vertical-align: inherit;"> .</font></font><br><br><a name="prim"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cuando escribo Verdadero o Falso (con una letra may√∫scula), me refiero a los valores correspondientes del lenguaje Python. Y cuando digo verdadero (verdadero) o falso (falso), me refiero a cualquier expresi√≥n de Python que se considere verdadera o falsa. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Esta similitud tuvo lugar en el original y ayuda a comprender los conceptos de verdadero y falso en la traducci√≥n. - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Consulte la documentaci√≥n espec√≠fica del backend. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[3]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La especificaci√≥n USB no impone ning√∫n valor espec√≠fico en el valor de configuraci√≥n. Lo mismo es cierto para los n√∫meros de interfaz y configuraciones alternativas. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[4]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En realidad, todo es un poco m√°s complicado, pero esto es solo una explicaci√≥n para nosotros. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[5]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S√© que esto suena raro.</font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[6]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esto se debe a que si no hay ancho de banda para los flujos de datos is√≥cronos durante la configuraci√≥n del dispositivo, puede numerarse con √©xito. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[7]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esto no sucede para la configuraci√≥n porque el dispositivo puede estar en un estado no configurado. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[8]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En PyUSB, los flujos de datos de control acceden al punto de control 0. Muy, muy raramente, un dispositivo tiene un punto de control de control alternativo (nunca he conocido un dispositivo de este tipo). </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[9]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esto es solo una broma, no te lo tomes en serio. </font><font style="vertical-align: inherit;">Las mejores opciones son mejores que no tener opciones.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430528/">https://habr.com/ru/post/es430528/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430518/index.html">C√≥mo renderizar el marco de la Tierra Media: Shadow of Mordor</a></li>
<li><a href="../es430520/index.html">Presentamos Spring Data MongoDB</a></li>
<li><a href="../es430522/index.html">¬øNecesitas una cultura corporativa en TI? Confesi√≥n del gerente de marca del estudio Krasnodar Plarium</a></li>
<li><a href="../es430524/index.html">Arquitectura de red neuronal</a></li>
<li><a href="../es430526/index.html">M√°quinas tragamonedas: de d√≥nde vinieron en la URSS y c√≥mo est√°n organizadas</a></li>
<li><a href="../es430530/index.html">Servidor simulado para la automatizaci√≥n de pruebas m√≥viles</a></li>
<li><a href="../es430532/index.html">Seguridad en aplicaciones iOS</a></li>
<li><a href="../es430534/index.html">Crear una plantilla para Zabbix usando el SDK Trassir de DVR como ejemplo</a></li>
<li><a href="../es430536/index.html">Dise√±o de funciones de ventana sumadas en una unidad con un nivel dado de superposici√≥n</a></li>
<li><a href="../es430538/index.html">¬øLees Scaladoc para m√©todos de recolecci√≥n "obvios"? O por qu√© la pereza no siempre es buena</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>