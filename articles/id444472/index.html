<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😷 🛡️ ⬅️ Meniru layanan web Amazon dalam proses JVM. Menghindari Roskomnadzor dan mempercepat pengembangan dan pengujian 🏯 〽️ 🐬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mengapa Anda perlu meniru infrastruktur layanan web Amazon? 

 Pertama-tama, ini menghemat - menghemat waktu untuk pengembangan dan debugging, dan yan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Meniru layanan web Amazon dalam proses JVM. Menghindari Roskomnadzor dan mempercepat pengembangan dan pengujian</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444472/"> Mengapa Anda perlu meniru infrastruktur layanan web Amazon? <br><br>  Pertama-tama, ini menghemat - menghemat waktu untuk pengembangan dan debugging, dan yang sama pentingnya - menghemat uang dari anggaran proyek.  Jelas bahwa emulator tidak akan 100% identik dengan lingkungan asli yang kami coba tiru.  Tetapi untuk tujuan mempercepat pengembangan dan otomatisasi proses, kesamaan yang ada sudah cukup.  Hal paling topikal yang terjadi pada tahun 2018 dengan AWS adalah pemblokiran oleh penyedia IP dari alamat IP dari subnet AWS di Federasi Rusia.  Dan kunci ini memengaruhi infrastruktur kami yang terletak di cloud Amazon.  Jika Anda berencana untuk menggunakan teknologi AWS dan menempatkan proyek di cloud ini, maka untuk pengembangan dan pengujian emulasi lebih dari terbayar. <br><br><img src="https://habrastorage.org/webt/jz/ty/k7/jztyk798xcq9yqietemgy-6133m.png"><br><br>  Dalam publikasi ini saya akan memberi tahu Anda bagaimana kami berhasil menyelesaikan trik seperti itu dengan layanan S3, SQS, RDS PostgreSQL, dan Redshift ketika memigrasi gudang data yang ada ke AWS selama bertahun-tahun. <br><a name="habracut"></a><br>  Ini hanya bagian dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertemuan</a> tahun lalu saya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">peta</a> , yang sesuai dengan tema AWS dan hub Java.  Bagian kedua berkaitan dengan database PostgreSQL, Redshift dan kolom, dan versi teksnya dapat dipublikasikan di hub, video, dan slide yang sesuai ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web konferensi</a> . <br><br>  Ketika mengembangkan aplikasi untuk AWS selama memblokir subnet AWS, tim praktis tidak memperhatikan mereka dalam proses harian mengembangkan fungsionalitas baru.  Tes juga berhasil dan Anda dapat men-debug aplikasi.  Dan hanya ketika mencoba untuk melihat log aplikasi di logentries, metrik di SignalFX atau analisis data di Redshift / PostgreSQL RDS kecewa - layanan tidak tersedia melalui jaringan penyedia Rusia.  Emulasi AWS membantu kami tidak memperhatikan hal ini dan menghindari penundaan yang jauh lebih besar ketika bekerja dengan cloud Amazon melalui jaringan VPN. <br><br>  Setiap penyedia cloud "di bawah tenda" memiliki banyak naga dan Anda tidak boleh menyerah pada iklan.  Anda perlu memahami mengapa semua ini diperlukan untuk penyedia layanan.  Tentu saja, infrastruktur Amazon, Microsoft dan Google yang ada memiliki kelebihan.  Dan ketika mereka memberi tahu Anda bahwa semuanya dilakukan hanya untuk membuatnya nyaman bagi Anda untuk berkembang, mereka kemungkinan besar mencoba untuk menempatkan Anda pada jarum Anda dan memberikan dosis pertama secara gratis.  Sehingga nantinya mereka tidak turun dari infrastruktur dan teknologi tertentu.  Karena itu, kami akan mencoba untuk menghindari vendor lock-in.  Jelas bahwa tidak selalu mungkin untuk sepenuhnya abstrak dari keputusan tertentu dan saya pikir cukup sering untuk abstrak hampir 90% dalam sebuah proyek.  Tetapi 10% sisanya dari proyek, terkait dengan penyedia teknologi yang sangat penting, adalah mengoptimalkan kinerja aplikasi atau fitur unik yang tidak ada di tempat lain.  Mereka harus selalu mengingat kelebihan dan kekurangan teknologi dan melindungi diri mereka sebanyak mungkin, bukan "duduk" di API tertentu dari penyedia infrastruktur cloud. <br><br>  Amazon menulis tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemrosesan pesan</a> di situs webnya.  Esensi dan abstraksi teknologi pertukaran pesan adalah sama di mana-mana, meskipun ada nuansa - pesan yang melewati antrian atau melalui topik.  Jadi, AWS merekomendasikan menggunakan Apache ActiveMQ yang disediakan dan dikelola untuk memigrasikan aplikasi dari broker perpesanan yang ada, dan untuk aplikasi Amazon SQS / SNS baru.  Ini adalah contoh dari pengikatan ke API mereka sendiri, bukan JMS API standar dan protokol AMQP, MMQT, STOMP.  Jelas bahwa penyedia ini dengan solusinya mungkin memiliki kinerja lebih tinggi, mendukung skalabilitas, dll.  Dari sudut pandang saya, jika Anda menggunakan perpustakaan mereka, dan bukan API standar, maka akan ada lebih banyak masalah. <br><br>  AWS memiliki database Redshift.  Ini adalah database terdistribusi dengan arsitektur paralel masif.  Anda dapat mengunggah sejumlah besar data Anda ke tabel di beberapa situs Redshft di Amazon dan melakukan kueri analitik pada set data besar.  Ini bukan sistem OLTP di mana penting bagi Anda untuk melakukan permintaan kecil pada sejumlah kecil catatan yang cukup sering dengan jaminan ACID.  Saat bekerja dengan Redshift, diasumsikan bahwa Anda tidak memiliki sejumlah besar kueri per unit waktu, tetapi mereka dapat membaca agregat pada sejumlah besar data.  Sistem ini diposisikan oleh vendor untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">meningkatkan</a> gudang data <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda</a> (gudang) di AWS dan menjanjikan pemuatan data sederhana.  Sama sekali tidak benar. <br><br>  Kutipan dari dokumentasi tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jenis apa</a> yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">didukung</a> Amazon Redshift.  Set yang agak sedikit, dan jika Anda perlu sesuatu untuk menyimpan dan memproses data yang tidak tercantum di sini, akan sulit bagi Anda untuk bekerja.  Misalnya GUID. <br><br>  Pertanyaan dari aula, “Dan JSON?” <br><br>  - JSON hanya dapat ditulis sebagai VARCHAR dan ada beberapa fungsi untuk bekerja dengan JSON. <br>  Komentar dari audiens: "Postgres memiliki dukungan JSON normal." <br><br>  - Ya, ia memiliki dukungan untuk jenis data dan fungsi ini.  Tetapi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Redshift didasarkan</a> pada PostgreSQL 8.0.2.  Ada proyek ParAccel, jika saya tidak salah, teknologi 2005 ini adalah garpu postgres yang memiliki penjadwal untuk permintaan yang didistribusikan berdasarkan arsitektur paralel-besar.  5-6 tahun berlalu dan proyek ini dilisensikan untuk platform Amazon Web Servces dan diberi nama Redshift.  Sesuatu telah dihapus dari Postgres asli, banyak yang telah ditambahkan.  Mereka menambahkan bahwa terkait dengan otentikasi / otorisasi di AWS, dengan peran, keamanan di Amazon berfungsi dengan baik.  Tetapi jika Anda perlu, misalnya, untuk terhubung dari Redshift ke database lain menggunakan Sumber Data Asing, maka Anda tidak akan menemukan ini.  Tidak ada fungsi untuk bekerja dengan XML, fungsi untuk bekerja dengan JSON dua kali dan salah perhitungan. <br><br>  Saat mengembangkan aplikasi, cobalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">untuk tidak bergantung pada implementasi spesifik,</a> dan kode aplikasi hanya bergantung pada abstraksi.  Anda dapat membuat sendiri fasad dan abstraksi ini, tetapi dalam hal ini ada banyak perpustakaan siap pakai - fasad.  Yang abstrak kode dari implementasi spesifik, dari kerangka kerja tertentu. Jelas bahwa mereka mungkin tidak mendukung semua fungsi, sebagai "common denominator" untuk teknologi.  Lebih baik mengembangkan perangkat lunak yang mengandalkan abstraksi untuk menyederhanakan pengujian. <br><br>  Untuk meniru AWS, saya akan menyebutkan dua opsi.  Yang pertama lebih jujur ​​dan benar, tetapi bekerja lebih lambat.  Yang kedua kotor dan cepat.  Saya akan memberi tahu Anda tentang opsi peretasan - kami mencoba membuat seluruh infrastruktur dalam satu proses - pengujian dan opsi lintas platform akan bekerja lebih cepat dengan pekerjaan di Windows (di mana buruh pelabuhan tidak selalu dapat menghasilkan uang dari Anda). <br><br>  Metode pertama sangat cocok jika Anda mengembangkan di linux / macos dan Anda memiliki buruh pelabuhan, akan lebih baik menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">atlassian localstack</a> .  Lebih mudah menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">testcontainers</a> untuk mengintegrasikan localstack ke dalam JVM. <br><br>  Saya dihentikan dari menggunakan lockalstack di buruh pelabuhan pada proyek yang pengembangannya berada di bawah Windows dan tidak ada yang menjamin versi alpha dari buruh pelabuhan ketika proyek ini dimulai ... Mungkin juga mereka tidak akan diizinkan untuk menginstal mesin virtual dengan linux dan buruh pelabuhan di perusahaan mana pun yang serius tentang untuk keamanan informasi.  Saya tidak berbicara tentang bekerja di lingkungan yang aman di bank investasi dan melarang hampir semua firewall lalu lintas di sana. <br><br>  Mari kita pertimbangkan opsi bagaimana meniru S3 penyimpanan sederhana.  Ini bukan sistem file Amazon biasa, melainkan toko objek terdistribusi.  Di mana Anda menempatkan data Anda sebagai Gumpalan, tanpa kemungkinan modifikasi dan penambahan data.  Ada penyimpanan terdistribusi lengkap yang serupa dari produsen lain.  Sebagai contoh, penyimpanan objek terdistribusi Ceph memungkinkan Anda untuk bekerja dengan fungsinya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">protokol S3 REST</a> dan klien yang ada dengan modifikasi minimal.  Tapi ini adalah solusi yang agak berat untuk pengembangan dan pengujian aplikasi java. <br><br>  Proyek yang lebih cepat dan lebih cocok adalah perpustakaan java <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">s3proxy</a> .  Ini mengemulasi protokol S3 REST dan menerjemahkannya ke dalam panggilan API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jcloud yang</a> sesuai dan memungkinkan Anda untuk menggunakan banyak implementasi untuk pembacaan dan penyimpanan data yang nyata.  Ini dapat menyiarkan panggilan ke Google App Engine API, Microsoft Azure API, tetapi untuk pengujian lebih mudah menggunakan penyimpanan sementara jcloud di RAM.  Anda juga perlu mengkonfigurasi versi protokol otentikasi AWS S3 dan menentukan nilai kunci dan rahasia, juga mengkonfigurasi titik akhir - port dan antarmuka tempat Proxy S3 ini akan mendengarkan.  Dengan demikian, kode Anda menggunakan klien AWS SDK harus terhubung dalam tes ke titik akhir S3 AWS, bukan wilayah AWS.  Sekali lagi, ingat bahwa s3proxy tidak mendukung semua fitur API S3, tetapi semua skenario penggunaan kami meniru dengan sempurna!  Bahkan pengunggahan Multipart untuk file besar didukung oleh s3proxy. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a85/65d/9ce/a8565d9ceabaa944dfc993c88e00d738.png"></div><br><br>  Layanan Antrian Sederhana Amazon adalah layanan antrian.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">layanan</a> antrian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">elasticmq</a> yang ditulis dalam scala dan dapat disajikan ke aplikasi Anda menggunakan protokol Amazon SQS.  Saya tidak menggunakannya dalam proyek, jadi saya akan memberikan kode inisialisasi, mempercayai informasi dari pengembangnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7eb/11d/adf/7eb11dadfac303746ecc755fccee6384.png"></div><br><br>  Dalam proyek ini, saya pergi ke arah lain dan kode tergantung pada abstraksi spring-jms dari JmsTemplate dan JmsListener dan dependensi proyek menentukan driver JMS untuk SQS com.amazonaws: amazon-sqs-java-messaging-lib.  Inilah yang menyangkut kode aplikasi utama. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/08d/3ca/64b/08d3ca64b9c7f355cc3661ce692768ae.png"></div><br><br>  Dalam pengujian, kami menghubungkan Artemis-jms-server sebagai server JMS tertanam untuk pengujian, dan dalam konteks uji Spring, alih-alih pabrik koneksi SQS, kami menggunakan pabrik koneksi Artemis.  Artemis adalah versi selanjutnya dari Apache ActiveMQ, sebuah Middleware Message Oriented Middleware modern yang lengkap - tidak hanya solusi pengujian.  Mungkin kita akan beralih ke penggunaannya di masa depan, tidak hanya di autotests.  Dengan demikian, menggunakan abstraksi JMS bersama dengan Spring, kami telah menyederhanakan kode aplikasi dan kemampuan untuk dengan mudah mengujinya.  Anda hanya perlu menambahkan dependensi org.springframework.boot: spring-boot-starter-artemis dan org.apache.activemq: artemis-jms-server. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/245/a8f/d3c/245a8fd3c8cb56a4b6fa460018d48f94.png"></div><br><br>  Dalam beberapa tes, PostgreSQL dapat ditiru dengan menggantinya dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">H2Database</a> .  Ini akan bekerja jika tes tidak diterima dan tidak menggunakan fungsi PG tertentu.  Pada saat yang sama, H2 dapat meniru sebagian dari protokol kawat PostgreSQL tanpa dukungan untuk tipe dan fungsi data.  Dalam proyek kami, kami menggunakan Pembungkus Data Foreing, jadi metode ini tidak berfungsi untuk kami. <br><br>  Anda dapat menjalankan PostgreSQL nyata.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">postgresql-embedded</a> mengunduh distribusi sebenarnya, atau lebih tepatnya arsip dengan file biner untuk platform yang kita jalankan, membukanya.  Di linux pada tempfs di RAM, di windows di% TEMP%, proses server postgresql dimulai, mengkonfigurasi pengaturan server dan parameter database.  Karena fitur distribusi distribusi, versi yang lebih tua dari PG 11 tidak berfungsi di Linux.  Untuk saya sendiri, saya membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perpustakaan pembungkus</a> yang memungkinkan Anda untuk mendapatkan rakitan biner PostgreSQL tidak hanya dari server HTTP tetapi juga dari repositori maven.  Yang bisa sangat berguna ketika bekerja di jaringan terisolasi dan membangun server CI tanpa akses Internet.  Kenyamanan lain dalam bekerja dengan pembungkus saya adalah penjelasan komponen CDI, yang membuatnya mudah untuk menggunakan komponen dalam konteks Spring misalnya.  Implementasi antarmuka server AutoClosable muncul lebih awal daripada di proyek asli.  Tidak perlu ingat untuk menghentikan server, itu akan berhenti ketika konteks Spring ditutup secara otomatis. <br><br>  Saat memulai, Anda dapat membuat database berdasarkan skrip, melengkapi konteks Spring dengan properti yang sesuai.  Kami sekarang membuat skema database menggunakan skrip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">flyway</a> untuk memigrasi skema database, yang diluncurkan setiap kali database dibuat dalam pengujian. <br><br>  Untuk memverifikasi data setelah menjalankan tes, kami menggunakan pustaka uji-semi-dbunit.  Dalam anotasi pada metode pengujian, kami mengindikasikan dengan unggahan mana yang membandingkan kondisi database.  Ini menghilangkan kebutuhan untuk menulis kode untuk bekerja dengan dbunit, Anda hanya perlu menambahkan pendengar perpustakaan ke kode tes.  Anda dapat menentukan urutan data dari tabel yang dihapus setelah metode pengujian selesai, jika konteks database digunakan kembali di antara tes.  Pada 2019, ada pendekatan yang lebih modern diimplementasikan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">database-rider</a> yang bekerja dengan junit5.  Anda dapat melihat contoh penggunaan, misalnya di <a href="">sini</a> . <br><br>  Yang paling sulit adalah meniru Amazon Redshift.  Ada proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">driver redshift-fake-palsu.Proyek</a> ini berfokus pada meniru pemuatan data batch ke dalam database analitik dari AWS.  Dalam jdbc: emulator protokol postgresqlredshift, perintah COPY, UNLOAD diimplementasikan, semua perintah lainnya didelegasikan ke driver JDBC PostgreSQL biasa. <br><br>  Oleh karena itu, tes tidak akan bekerja dengan cara yang sama seperti di Redshift, operasi pembaruan, yang menggunakan tabel berbeda sebagai sumber data untuk memperbarui (sintaksnya berbeda dalam Redshift dan PostgreSQL 9+. Saya juga melihat interpretasi yang berbeda dari kutipan garis dalam perintah SQL di antara database ini. <br><br>  Karena arsitektur database Redshift nyata, operasi memasukkan, memperbarui, dan menghapus data agak lambat dan "mahal" dalam hal I / O.  Dimungkinkan untuk memasukkan data dengan kinerja yang dapat diterima hanya dalam "paket" besar dan perintah COPY hanya memungkinkan Anda untuk mengunduh data dari sistem file S3 terdistribusi.  Perintah ini dalam database mendukung beberapa format data AVRO, CSV, JSON, Parket, ORC, dan TXT.  Dan proyek emulator berfokus pada CSV, TXT, JSON. <br><br>  Jadi, untuk meniru Redshift dalam tes, Anda perlu memulai database PostgreSQL seperti yang dijelaskan sebelumnya dan memulai emulasi repositori S3, dan ketika membuat koneksi ke postgres, Anda hanya perlu menambahkan driver redshift-palsu di classpath dan tentukan kelas driver jp.ne.opt.redshiftfake.postgres. FakePostgresqlDriver.  Setelah itu, Anda dapat menggunakan jalur terbang yang sama untuk memigrasi skema database, dan dbunit sudah terbiasa untuk membandingkan data setelah menjalankan tes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17e/d0b/20a/17ed0b20a1e7bb4f4205747122a22a70.png"></div><br><br>  Saya bertanya-tanya berapa banyak pembaca yang menggunakan AWS dan Redshift dalam pekerjaan mereka?  Tulis di komentar tentang pengalaman Anda. <br><br>  Hanya menggunakan proyek Open Source, tim dapat mempercepat pengembangan di lingkungan AWS, menghemat uang dari anggaran proyek dan tidak menghentikan tim dari bekerja ketika subnet AWS diblokir oleh Roskomnadzor. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444472/">https://habr.com/ru/post/id444472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444462/index.html">Menguji Samsung Galaxy S10 - Kapan smartphone akan menyusul kamera?</a></li>
<li><a href="../id444464/index.html">Cara lain untuk menembak kaki Anda menggunakan std :: thread</a></li>
<li><a href="../id444466/index.html">Maaf, semua basis data Anda dimiliki oleh Google. Google Presentation di Game Development Conference 2019, Stadia Project</a></li>
<li><a href="../id444468/index.html">Nvidia Neural Network Mengubah Sketsa Sederhana Menjadi Lanskap Indah</a></li>
<li><a href="../id444470/index.html">20 kebiasaan untuk menjaga kebersihan: cara menggunakan teknologi, tetapi jangan biarkan mereka mengambil waktu dan perhatian mereka</a></li>
<li><a href="../id444474/index.html">Pembangunan jalur komunikasi Sakhalin-Kuril. Tur Segero - Kereta Gantung</a></li>
<li><a href="../id444476/index.html">Persaingan dari RUSNANO: mengambil kursus online tentang mikroelektronika modern, kemudian tur praktis dengan FPGA, dapatkan hadiah</a></li>
<li><a href="../id444480/index.html">Bagaimana mengurangi bobot elemen struktural pesawat hingga sepertiga</a></li>
<li><a href="../id444482/index.html">Apa yang mengembang memori di Ruby?</a></li>
<li><a href="../id444486/index.html">Proyek SIRIUS-19 adalah simulasi empat bulan ekspedisi ke bulan di sebuah kompleks berbasis-tanah di Moskow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>