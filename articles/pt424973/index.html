<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛽️ 👩🏾‍🤝‍👨🏽 🙏🏾 Detecção de rosto em vídeo: Raspberry Pi e Neural Compute Stick 👏🏽 🍇 🎳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Há cerca de um ano, a Intel Movidius lançou um dispositivo para inferência eficiente de redes neurais convolucionais - Movidius Neural Compute Stick (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Detecção de rosto em vídeo: Raspberry Pi e Neural Compute Stick</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424973/">  Há cerca de um ano, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Intel Movidius</a> lançou um dispositivo para inferência eficiente de redes neurais convolucionais - Movidius Neural Compute Stick (NCS).  Este dispositivo permite o uso de redes neurais para o reconhecimento ou detecção de objetos em condições de consumo limitado de energia, inclusive em tarefas de robótica.  O NCS possui uma interface USB e consome não mais que 1 watt.  Neste artigo, falarei sobre a experiência de usar o NCS com o Raspberry Pi para a tarefa de detectar rostos em vídeo, incluindo o treinamento do detector Mobilenet-SSD e o lançamento no Raspberry. <br><br>  Todo o código pode ser encontrado em meus dois repositórios: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">treinamento de detectores</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">demonstrações de detecção de faces</a> . <br><br><img src="https://habrastorage.org/webt/qu/b_/tj/qub_tj1u6ztw9irfy9ivtaaidcc.jpeg"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">No meu primeiro artigo,</a> eu já escrevi sobre detecção de rosto usando o NCS: então estávamos conversando sobre um detector <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YOLOv2</a> , que converti do formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Darknet</a> para o formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caffe</a> e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iniciei</a> no NCS.  O processo de conversão acabou não sendo trivial: como esses dois formatos definem a última camada do detector de maneiras diferentes, a saída da rede neural teve que ser analisada separadamente, na CPU, usando um pedaço de código da Darknet.  Além disso, esse detector não me satisfez em velocidade (até 5,1 FPS no meu laptop) e em precisão - mais tarde fiquei convencido de que, devido à sua sensibilidade à qualidade da imagem, era difícil obter um bom resultado no Raspberry Pi. <br><br>  No final, eu decidi apenas treinar meu detector.  A escolha foi feita no detector <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSD</a> com o codificador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mobilenet</a> : a convolução leve do Mobilenet permite alcançar alta velocidade sem perda de qualidade, e o detector SSD não é inferior ao YOLO e funciona no NCS imediatamente. <br><br><div class="spoiler">  <b class="spoiler_title">Como o detector Mobilenet-SSD funciona</b> <div class="spoiler_text">  Vamos começar com a Mobilenet.  Nesta arquitetura está completa <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.379ex" height="2.074ex" viewBox="0 -772.3 3607.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="3107" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> 3 \ vezes 3 </script>  convolução (em todos os canais) é substituída por duas convoluções leves: primeiro <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.379ex" height="2.074ex" viewBox="0 -772.3 3607.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="3107" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> 3 \ vezes 3 </script>  separadamente para cada canal e, em seguida, conclua <math></math><img src="https://habrastorage.org/getpro/habr/formulas/125/f92/b2c/125f92b2c5dbfe2ebdb17a2f3cec4ec9.svg" alt="US $ 1 \ vezes 1 $" data-tex="inline">  convolução.  Após cada convolução, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BatchNorm</a> e Não Linearidade (ReLU) são usados.  A primeira convolução de rede que recebe uma imagem como entrada geralmente é deixada completa.  Essa arquitetura pode reduzir significativamente a complexidade dos cálculos devido a uma ligeira diminuição na qualidade das previsões.  Existe uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">opção mais avançada</a> , mas ainda não a tentei. <br><br>  O SSD (Single Shot Detector) funciona assim: nas saídas de vários codificadores de convolução são pendurados em dois <math></math><img src="https://habrastorage.org/getpro/habr/formulas/125/f92/b2c/125f92b2c5dbfe2ebdb17a2f3cec4ec9.svg" alt="US $ 1 \ vezes 1 $" data-tex="inline">  camada convolucional: um prevê as probabilidades das classes, o outro - as coordenadas da caixa delimitadora.  Há uma terceira camada que fornece as coordenadas e posições dos quadros padrão no nível atual.  O significado é: a saída de qualquer camada é naturalmente dividida em células;  mais perto do final da rede neural, eles estão se tornando menores (neste caso, devido à convolução com <code>stride=2</code> ), e o campo de visão de cada célula aumenta.  Para cada célula em cada uma das várias camadas selecionadas, definimos vários quadros padrão de tamanhos diferentes e com diferentes proporções, e usamos camadas convolucionais adicionais para corrigir coordenadas e prever probabilidades de classe para cada um desses quadros.  Portanto, um detector SSD (como o YOLO) sempre considera o mesmo número de quadros.  O mesmo objeto pode ser detectado em diferentes camadas: durante o treinamento, o sinal é enviado a todos os quadros que se cruzam fortemente com o objeto e, durante a aplicação, as detecções são combinadas usando a não supressão máxima (NMS).  A camada final combina as detecções de todas as camadas, considera suas coordenadas completas, corta o limiar de probabilidade e produz NMS. <br></div></div><br><h2>  Treinamento de detectores </h2><br><h3>  Arquitetura </h3><br>  O código para treinar o detector está localizado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Decidi usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">detector Mobilenet-SSD pronto para treinamento,</a> treinado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PASCAL VOC0712,</a> e treiná-lo para detectar rostos.  Primeiro, ajuda a treinar a rede muito mais rapidamente e, segundo, você não precisa reinventar a roda. <br><br>  O projeto original incluiu o script <code>gen.py</code> , que coletou literalmente o arquivo de modelo <code>.prototxt</code> , substituindo os parâmetros de entrada.  Transferi para o meu projeto, expandindo um pouco a funcionalidade.  Este script permite gerar quatro tipos de arquivos de configuração: <br><br><ul><li>  <b>train</b> : na entrada - uma base LMDB de treinamento, na saída - uma camada com o cálculo da função de perda e seus gradientes, existe o BatchNorm </li><li>  <b>teste</b> : na entrada - a base LMDB de teste, na saída - a camada com o cálculo da qualidade (precisão média média), existe o BatchNorm </li><li>  <b>deploy</b> : na entrada - a imagem, na saída - a camada com previsões, o BatchNorm está ausente </li><li>  <b>deploy_bn</b> : na entrada - a imagem, na saída - a camada com previsões, existe o BatchNorm </li></ul><br>  Adicionei a última opção posteriormente, para que nos scripts você pudesse carregar e converter a grade do BatchNorm sem tocar no banco de dados LMDB - caso contrário, na ausência do banco de dados, nada funcionaria.  (Em geral, me parece estranho que no Caffe a fonte de dados esteja definida na arquitetura de rede - isso é pelo menos pouco prático). <br><br><div class="spoiler">  <b class="spoiler_title">Como é a arquitetura da rede (curta)</b> <div class="spoiler_text"><ul><li>  Login: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>300</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>300</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.245ex" height="2.074ex" viewBox="0 -772.3 8716.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="1751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2237" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="2703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="3172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="3638" y="0"></use><g transform="translate(4108,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="5859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="6345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="6811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="7280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="7746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="8216" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>300</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>300</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> 300 \ vezes 300 \ vezes 3 </script></li><li>  <b>Conv conv conv</b> : 32 canais, <code>stride=2</code> </li><li>  Mobil1 convolução <b>conv1 - conv11</b> : 64, 128, 128, 256, 256, 512 ... 512 canais, alguns têm <code>stride=2</code> </li><li>  Camada de detecção: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>19</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>19</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.245ex" height="2.074ex" viewBox="0 -772.3 8716.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-39" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="2203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="3138" y="0"></use><g transform="translate(3607,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-39" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="4858" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="5810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="6279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="6745" y="0"></use><g transform="translate(7215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>19</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>19</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math></span></span><script type="math/tex" id="MathJax-Element-4"> 19 \ vezes 19 \ vezes 512 </script></li><li>  Convolução <b>Mobilenet conv12, conv13</b> : 1024 canais, <b>conv12</b> tem <code>stride=2</code> </li><li>  Camada de detecção: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>10</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>10</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1024</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.407ex" height="2.074ex" viewBox="0 -772.3 9217 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="2203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="3138" y="0"></use><g transform="translate(3607,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="4858" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="5810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="6279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="6745" y="0"></use><g transform="translate(7215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1501" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>10</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>10</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1024</mn></math></span></span><script type="math/tex" id="MathJax-Element-5"> 10 \ vezes 10 \ vezes 1024 </script></li><li>  Convolução completa <b>conv14_1, conv14_2</b> : 256, 512 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detecção: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>5</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>5</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>5</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>5</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math></span></span><script type="math/tex" id="MathJax-Element-6"> 5 \ vezes 5 \ vezes 512 </script></li><li>  Convolução completa <b>conv15_1, conv15_2</b> : 128, 256 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detecção: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math></span></span><script type="math/tex" id="MathJax-Element-7"> 3 \ vezes 3 \ vezes 256 </script></li><li>  <b>Convoluções</b> completas <b>conv16_1, conv16_2</b> : 128, 256 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detecção: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>2</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math></span></span><script type="math/tex" id="MathJax-Element-8"> 2 \ vezes 2 \ vezes 256 </script></li><li>  Convolução completa <b>conv17_1, conv17_2</b> : 64, 128 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detecção: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>128</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-38" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>128</mn></math></span></span><script type="math/tex" id="MathJax-Element-9"> 1 \ vezes 1 \ vezes 128 </script></li><li>  Saída de detecção da camada final </li></ul><br></div></div><br>  Corrigi levemente a arquitetura da rede.  Lista de alterações: <br><br><ul><li>  Obviamente, o número de classes mudou para 1 (sem contar o plano de fundo). </li><li>  Limitações na proporção das manchas cortadas durante o treinamento: alterado de <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>5</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>0</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.045ex" height="2.66ex" viewBox="0 -832 3894.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="2670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5D" x="3616" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>5</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>0</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-10"> [0,5,2,0] </script>  em <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>7</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>4</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.045ex" height="2.66ex" viewBox="0 -832 3894.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-37" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="2670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5D" x="3616" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>7</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>4</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-11"> [0,7,1,4] </script>  (Decidi simplificar um pouco a tarefa e não aprender com fotos muito esticadas). </li><li>  Dos quadros padrão, apenas os quadrados permaneceram, dois para cada célula.  Reduzi bastante seus tamanhos, pois os rostos são significativamente menores que os objetos no problema clássico de detecção de objetos. </li></ul><br>  O Caffe calcula os tamanhos de quadro padrão da seguinte maneira: ter um tamanho de quadro mínimo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> s </script>  e máximo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> L </script>  , cria um quadro pequeno e grande com dimensões <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> s </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>L</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.302ex" height="2.419ex" viewBox="0 -780.1 3144 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-74" x="1631" y="0"></use><g transform="translate(1993,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-4C" x="469" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>L</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-15"> \ sqrt {sL} </script>  .  Como eu queria detectar o mínimo possível de faces, calculei o <code>stride</code> completo para cada camada de detecção e igualei o tamanho mínimo do quadro a ela.  Com esses parâmetros, os pequenos quadros padrão serão localizados próximos um do outro e não se cruzarão.  Portanto, temos pelo menos uma garantia de que a interseção com o objeto existirá para algum tipo de estrutura.  Defino o tamanho máximo duas vezes mais.  Para as camadas <b>conv16_2, conv17_2,</b> defino as dimensões no olho como iguais.  Desta maneira <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi><mo>,</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.707ex" height="2.419ex" viewBox="0 -780.1 1596.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-4C" x="914" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi><mo>,</mo><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> s, L </script>  para todas as camadas foram: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>16</mn><mo>,</mo><mn>32</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>32</mn><mo>,</mo><mn>64</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>64</mn><mo>,</mo><mn>128</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>128</mn><mo>,</mo><mn>214</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>214</mn><mo>,</mo><mn>300</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>214</mn><mo>,</mo><mn>300</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="57.361ex" height="2.66ex" viewBox="0 -832 24696.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="1390" y="0"></use><g transform="translate(1835,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="2836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="3671" y="0"></use><g transform="translate(4060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="5061" y="0"></use><g transform="translate(5507,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="6508" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="6897" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="7342" y="0"></use><g transform="translate(7732,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="8733" y="0"></use><g transform="translate(9178,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-38" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="10679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="11069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="11514" y="0"></use><g transform="translate(11904,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-38" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="13405" y="0"></use><g transform="translate(13850,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="15352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="15741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="16186" y="0"></use><g transform="translate(16576,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="18077" y="0"></use><g transform="translate(18523,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="20024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="20414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="20859" y="0"></use><g transform="translate(21248,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="22750" y="0"></use><g transform="translate(23195,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>16</mn><mo>,</mo><mn>32</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>32</mn><mo>,</mo><mn>64</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>64</mn><mo>,</mo><mn>128</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>128</mn><mo>,</mo><mn>214</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>214</mn><mo>,</mo><mn>300</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>214</mn><mo>,</mo><mn>300</mn></math></span></span><script type="math/tex" id="MathJax-Element-17"> (16,32), (32,64), (64,128), (128,214), (214,300), (214,300</script><br><br><div class="spoiler">  <b class="spoiler_title">Aparência de alguns quadros padrão (ruído para maior clareza)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j9/ti/gj/j9tigjn9tq7sdz6m3tyxa1v2r9s.png"><br></div></div><br><h3>  Dados </h3><br>  Eu usei dois <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conjuntos de dados</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WIDER Face</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FDDB</a> .  O WIDER contém muitas fotos com rostos muito pequenos e embaçados, e o FDDB é mais inclinado a imagens grandes de rostos (e uma ordem de magnitude menor que o WIDER).  O formato da anotação é um pouco diferente, mas esses já são detalhes. <br><br>  Para o treinamento, não usei todos os dados: joguei rostos muito pequenos (menos de seis pixels ou menos de 2% da largura da imagem), joguei todas as imagens com uma proporção de menos de 0,5 ou mais que 2, joguei fora todas as imagens marcadas como "embaçadas" no conjunto de dados WIDER, já que eles correspondiam em grande parte a pessoas muito pequenas, e eu tive que pelo menos de alguma maneira alinhar a proporção de rostos pequenos e grandes.  Depois disso, fiz todos os quadros quadrados, expandindo o lado menor: decidi que não estava muito interessado em proporções faciais e a tarefa para a rede neural foi um pouco simplificada.  Também expulsei todas as imagens em preto e branco, das quais havia poucas e nas quais o script de construção do banco de dados falha. <br><br>  Para usá-los para treinamento e teste, você precisa montar uma base LMDB a partir deles.  Como fazer: <br><br><ul><li>  Para cada imagem, a marcação é criada no formato <code>.xml</code> . </li><li>  Um arquivo <code>train.txt</code> é <code>train.txt</code> com linhas no formato <code>"path/to/image.png path/to/labels.xml"</code> , o mesmo é criado para teste. </li><li>  Um arquivo <code>test_name_size.txt</code> é <code>test_name_size.txt</code> com linhas no formato <code>"test_image_name height width"</code> </li><li>  Cria um arquivo <code>labelmap.prototxt</code> com correspondências numéricas de <code>labelmap.prototxt</code> </li></ul><br><br>  O <code>ssd-caffe/scripts/create_annoset.py</code> (exemplo no Makefile): <br><br><pre> <code class="bash hljs">python3 /opt/movidius/ssd-caffe/scripts/create_annoset.py --anno-type=detection \ --label-map-file=$(wider_dir)/labelmap.prototxt --min-dim=0 --max-dim=0 \ --resize-width=0 --resize-height=0 --check-label --encode-type=jpg --encoded \ --redo $(wider_dir) \ $(wider_dir)/trainval.txt $(wider_dir)/WIDER_train/lmdb/wider_train_lmdb ./data</code> </pre><br><div class="spoiler">  <b class="spoiler_title">labelmap.prototxt</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">item</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: <span class="hljs-string"><span class="hljs-string">"none_of_the_above"</span></span> label: <span class="hljs-number"><span class="hljs-number">0</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"background"</span></span> } <span class="hljs-selector-tag"><span class="hljs-selector-tag">item</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: <span class="hljs-string"><span class="hljs-string">"face"</span></span> label: <span class="hljs-number"><span class="hljs-number">1</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"face"</span></span> }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Exemplo de marcação .xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">annotation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">size</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>348<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>450<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depth</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depth</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">size</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>face<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bndbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmin</span></span></span><span class="hljs-tag">&gt;</span></span>161<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymin</span></span></span><span class="hljs-tag">&gt;</span></span>43<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmax</span></span></span><span class="hljs-tag">&gt;</span></span>241<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymax</span></span></span><span class="hljs-tag">&gt;</span></span>123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bndbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">annotation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  O uso de dois conjuntos de dados ao mesmo tempo significa apenas que você precisa mesclar cuidadosamente os arquivos correspondentes em pares, não esquecendo de registrar corretamente os caminhos e embaralhar o arquivo para treinamento. <br><br>  Depois disso, você pode começar o treinamento. <br><br><h3>  Treinamento </h3><br>  O código para o treinamento de modelos pode ser encontrado no meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Colab Notebook</a> . <br><br>  Fiz o treinamento no Google Colaboratory, porque meu laptop mal fez os testes da grade e, geralmente, desligou o treinamento.  O Colaboratory me permitiu treinar a rede de maneira rápida e gratuita.  O único problema é que tive que escrever um script de compilação SSD-Caffe para o Colaboratory (incluindo coisas estranhas como recompilar o impulso e editar a fonte), o que leva cerca de 40 minutos.  Mais detalhes podem ser encontrados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">na minha publicação anterior</a> . <br><br>  O Colaboratório tem mais uma característica: após 12 horas, o carro morre, apagando permanentemente todos os dados.  A melhor maneira de evitar a perda de dados é montar seu disco do Google no sistema e salvar os pesos da rede a cada 500-1000 iterações de treinamento. <br><br>  Quanto ao meu detector, em uma sessão no Colaboratory, ele conseguiu desaprender 4.500 iterações e foi totalmente treinado em duas sessões. <br><br>  A qualidade das previsões (precisão média média) no conjunto de dados de teste que destaquei (mesclou o WIDER e o FDDB com as restrições listadas acima) foi de cerca de 0,87 para o melhor modelo.  Para medir o mAP nas escalas salvas durante o treinamento, existe um script <code>scripts/plot_map.py</code> . <br><br>  O detector funciona em um exemplo (muito estranho) de um conjunto de dados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nw/kc/jy/nwkcjyrtsz09v2fivdbs4uny3lc.png" width="60%"></div><br><h2>  Lançamento no NCS </h2><br>  Uma demonstração de detecção de rosto está <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Para compilar uma rede neural para o Neural Compute Stick, é necessário o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Movidius NCSDK</a> : ele contém utilitários para compilar e criar perfis de redes neurais, bem como as APIs C ++ e Python.  Vale ressaltar que a segunda versão foi lançada recentemente, o que não é compatível com a primeira: todas as funções da API foram renomeadas por algum motivo, o formato interno das redes neurais mudou, o FIFO foi adicionado para interagir com o NCS e (finalmente) a conversão automática de float 32 bits para float 16 bits, que faltava em C ++.  Atualizei todos os meus projetos para a segunda versão, mas deixei algumas muletas para compatibilidade com a primeira. <br><br>  Após o treinamento do detector, vale a pena mesclar as camadas BatchNorm com as convoluções adjacentes para acelerar a rede neural.  O script <code>merge_bn.py</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso daqui</a> , que também emprestei do projeto Mobilenet-SSD. <br><br>  Então você precisa chamar o utilitário <code>mvNCCompile</code> , por exemplo: <br><br><pre> <code class="bash hljs">mvNCCompile -s 12 -o graph_ssd -w ssd-face.caffemodel ssd-face.prototxt</code> </pre><br>  Há uma meta <code>graph_ssd</code> para isso no Makefile do projeto.  O arquivo <code>graph_ssd</code> resultante é uma descrição da rede neural em um formato entendido pelo NCS. <br><br>  Agora, sobre como interagir com o próprio dispositivo.  O processo não é muito complicado, mas requer uma quantidade bastante grande de código.  A sequência de ações é aproximadamente a seguinte: <br><br><ul><li>  Obter descritor de dispositivo pelo número de série </li><li>  Dispositivo aberto </li><li>  Leia o arquivo de rede neural compilado no buffer (como um arquivo binário) </li><li>  Crie um gráfico de cálculo vazio para o NCS </li><li>  Coloque o gráfico no dispositivo usando os dados do arquivo e selecione FIFO na entrada / saída;  o buffer com o conteúdo do arquivo agora pode ser liberado </li><li>  Início do detector: <br><ul><li>  Obtenha a imagem da câmera (ou de qualquer outra fonte) </li><li>  Processe: dimensione para o tamanho desejado, converta para float32 e faça a conversão para o intervalo [-1,1] </li><li>  Carregar imagem no dispositivo e solicitar inferência </li><li>  Solicitar um resultado (o programa será bloqueado até que o resultado seja recebido) </li><li>  Analise o resultado, selecione os quadros dos objetos (sobre o formato - mais adiante) </li><li>  Exibir previsões </li></ul><br></li><li>  Libere todos os recursos: remova o FIFO e o gráfico de cálculo, feche o dispositivo e remova sua alça </li></ul><br>  Quase todas as ações com o NCS têm sua própria função separada, e no C ++ parece muito complicado, e você precisa monitorar cuidadosamente a liberação de todos os recursos.  Para não sobrecarregar o código, criei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma classe de wrapper para trabalhar com o NCS</a> .  Nele, todo o trabalho de inicialização está oculto no construtor e na função <code>load_file</code> , e na liberação de recursos - no destruidor, e o trabalho com o NCS é reduzido a chamar 2-3 métodos de classe.  Além disso, existe uma função conveniente para explicar os erros que ocorreram. <br><br>  Crie um wrapper passando o tamanho da entrada e o tamanho da saída (número de elementos) para o construtor: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">NCSWrapper </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NCS</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(NETWORK_INPUT_SIZE*NETWORK_INPUT_SIZE*</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, NETWORK_OUTPUT_SIZE)</span></span></span></span>;</code> </pre><br>  Carregamos o arquivo compilado com a rede neural, inicializando simultaneamente tudo o que precisamos: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!NCS.load_file(<span class="hljs-string"><span class="hljs-string">"./models/face/graph_ssd"</span></span>)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  Convertemos a imagem em float32 (a <code>image</code> é <code>cv::Mat</code> no formato <code>CV_32FC3</code> ) e a transferimos para o dispositivo: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!NCS.load_tensor_nowait((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>*)image.data)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  Obtemos o resultado ( <code>result</code> é um ponteiro de <code>float</code> livre, o buffer de resultado é suportado pelo wrapper);  até o final dos cálculos, o programa está bloqueado: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!NCS.get_result(result)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  De fato, o wrapper também possui um método que permite carregar dados e obter o resultado ao mesmo tempo: <code>load_tensor((float*)image.data, result)</code> .  Recusei-me a usá-lo por um motivo: usando métodos separados, você pode acelerar um pouco a execução do código.  Depois de carregar a imagem, a CPU permanecerá ociosa até que o resultado da execução com o NCS chegue (neste caso, são cerca de 100 ms) e, nesse momento, você pode fazer um trabalho útil: leia um novo quadro e converta-o, além de exibir detecções anteriores .  É exatamente assim que o programa de demonstração é implementado, no meu caso, aumenta ligeiramente o FPS.  Você pode ir além e iniciar o processamento de imagens e o detector de rosto de forma assíncrona em dois fluxos diferentes - isso realmente funciona e permite acelerar um pouco mais, mas não é implementado no programa de demonstração. <br><br>  O detector, como resultado, retorna uma matriz flutuante de tamanho <code>7*(keep_top_k+1)</code> .  Aqui, <code>keep_top_k</code> é o parâmetro especificado no arquivo <code>.prototxt</code> do modelo e mostra quantas detecções (na ordem de confiança decrescente) devem ser retornadas.  Esse parâmetro, assim como o parâmetro responsável por filtrar detecções pelo valor mínimo de confiança e parâmetros de supressão não máximos, podem ser configurados no arquivo <code>.prototxt</code> do modelo na última camada.  Vale ressaltar que, se o Caffe retornar tantas detecções quanto as encontradas na imagem, o NCS sempre retornará <code>keep_top_k</code> detecções para que o tamanho da matriz seja constante. <br><br>  A matriz de resultados em si é <code>keep_top_k+1</code> seguinte forma: se a considerarmos como uma matriz com <code>keep_top_k+1</code> linhas e 7 colunas, na primeira linha, no primeiro elemento, haverá o número de detecções e, a partir da segunda linha, haverá as próprias detecções no formato <code>"garbage, class_index, class_probability, x_min, y_min, x_max, y_max"</code> .  As coordenadas são especificadas no intervalo [0,1], portanto, elas precisam ser multiplicadas pela altura / largura da imagem.  Os elementos restantes da matriz serão lixo.  Nesse caso, a supressão não máxima é realizada automaticamente, mesmo antes de o resultado ser obtido (ao que parece, diretamente no NCS). <br><br><div class="spoiler">  <b class="spoiler_title">Análise de Detector</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_detection_boxes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">* predictions, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> thresh, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;&amp; probs, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;cv::Rect&gt;&amp; boxes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> num = predictions[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cls = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i&lt;num+<span class="hljs-number"><span class="hljs-number">1</span></span>; i++) { score = predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>]; cls = predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (score&gt;thresh &amp;&amp; cls&lt;=<span class="hljs-number"><span class="hljs-number">1</span></span>) { probs.push_back(score); boxes.push_back(Rect(predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>]*w, predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span>]*h, (predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>]-predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>])*w, (predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">6</span></span>]-predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span>])*h)); } } }</code> </pre><br></div></div><br><h2>  Recursos de lançamento do Raspberry Pi </h2><br>  O programa de demonstração em si pode ser executado em um computador ou laptop comum com o Ubuntu ou em um Raspberry Pi com um Raspbian Stretch.  Estou usando um Raspberry Pi 2 modelo B, mas a demonstração deve funcionar em outros modelos também.  O makefile do projeto contém dois objetivos para alternar os modos: <code>make switch_desk</code> para o computador / laptop e <code>make switch_rpi</code> para o Raspberry Pi.  A diferença fundamental no código do programa é que, no primeiro caso, o OpenCV é usado para ler dados da câmera e, no segundo caso, da biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RaspiCam</a> .  Para executar a demonstração no Raspberry, você deve compilar e instalar. <br><br>  Agora, um ponto muito importante: a instalação do NCSDK.  Se você seguir as instruções de instalação padrão do Raspberry Pi, nada de bom terminará: o instalador tentará arrastar e compilar SSD-Caffe e Tensorflow.  Em vez disso, o NCSDK precisa ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">compilado no modo somente API</a> .  Nesse modo, apenas as APIs C ++ e Python estarão disponíveis (ou seja, não será possível compilar e criar gráficos de redes neurais).  Isso significa que o gráfico da rede neural deve primeiro ser compilado em um computador comum e depois copiado para o Raspberry.  Por conveniência, adicionei dois arquivos compilados ao repositório, para YOLO e SSD. <br><br>  Outro ponto interessante é a conexão puramente física do NCS ao Raspberry.  Parece que não é difícil conectá-lo a um conector USB, mas é preciso lembrar que o gabinete bloqueará os outros três conectores (é bastante saudável, pois desempenha a função de um radiador).  A saída mais fácil é conectá-lo através de um cabo USB. <br><br>  Também é importante lembrar que a velocidade de execução variará para diferentes versões do USB (para esta rede neural específica: 102 ms para USB 3.0, 92 ms para USB 2.0). <br><br>  Agora, sobre o poder do NCS.  De acordo com a documentação, consome até 1 watt (a 5 volts no conector USB será de até 200 ma; para comparação: a câmera Raspberry consome até 250 ma).  Quando alimentado por um carregador regular de 5 volts, 2 amperes, tudo funciona muito bem.  No entanto, tentar conectar dois ou mais NCSs ao Raspberry pode causar problemas.  Nesse caso, é recomendável usar um divisor USB com a possibilidade de alimentação externa. <br><br>  No Raspberry, a demonstração é mais lenta que em um computador / laptop: 7,2 FPS versus 10,4 FPS.  Isso se deve a vários fatores: primeiro, é impossível livrar-se dos cálculos na CPU, mas eles são realizados muito mais lentamente;  segundo, a velocidade de transferência de dados afeta (para USB 2.0). <br><br>  Além disso, para comparação, tentei executar um detector de rosto no Raspberry YOLOv2 no meu primeiro artigo, mas funcionou muito mal: a uma velocidade de 3,6 FPS, ele perde muitos rostos, mesmo em quadros simples.  Aparentemente, é muito sensível aos parâmetros da imagem de entrada, cuja qualidade no caso da câmera Raspberry está longe de ser ideal.  O SSD funciona muito mais estável, embora eu tenha que ajustar um pouco as configurações de vídeo nas configurações do RapiCam.  ele também sente falta dos rostos no quadro, mas faz isso muito raramente.  Para aumentar a estabilidade em aplicativos reais, você pode adicionar um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rastreador de centróide</a> simples. <br><br>  A propósito: a mesma coisa pode ser reproduzida no Python, há um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutorial no PyImageSearch</a> (o Mobilenet-SSD é usado para a tarefa de detecção de objetos). <br><br><h4>  Outras ideias </h4><br>  Também testei algumas idéias para acelerar a própria rede neural: <br><br>  Primeira idéia: você pode deixar apenas a detecção das camadas <code>conv11</code> e <code>conv13</code> e remover todas as camadas extras.  Você receberá um detector que detecta apenas rostos pequenos e funciona um pouco mais rápido.  Em suma, não vale a pena. <br><br>  A segunda ideia foi interessante, mas não deu certo: tentei lançar convoluções da rede neural com pesos próximos a zero, esperando que se tornasse mais rápido.  No entanto, houve poucas complicações, e sua remoção apenas diminuiu a velocidade da rede neural (o único palpite: isso se deve ao fato de o número de canais ter deixado de ser uma potência de dois). <br><br><h2>  Conclusão </h2><br>  Pensei em detectar rostos no Raspberry por um longo tempo, como uma subtarefa do meu projeto robótico.  Não gostei dos detectores clássicos em termos de velocidade e qualidade e decidi experimentar métodos de rede neural, ao mesmo tempo testando o Neural Compute Stick, como resultado dos quais havia dois projetos no GitHub e três artigos no Habré (incluindo o atual).  Em geral, o resultado combina comigo - provavelmente, usarei esse detector no meu robô (talvez haja outro artigo sobre ele).  Vale ressaltar que minha solução pode não ser ótima - no entanto, este é um projeto de treinamento, feito em parte por curiosidade para o NCS.  No entanto, espero que este artigo seja útil para alguém. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt424973/">https://habr.com/ru/post/pt424973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt424963/index.html">Zuckerberg Funding: Construindo Ferramentas para a Ciência Juntos</a></li>
<li><a href="../pt424965/index.html">Reagir o desenvolvimento de aplicativos usando ReasonReact</a></li>
<li><a href="../pt424967/index.html">Atalhos de JavaScript para iniciantes</a></li>
<li><a href="../pt424969/index.html">Guia Node.js, parte 9: Trabalhando com o sistema de arquivos</a></li>
<li><a href="../pt424971/index.html">Habrokast "Pôr do sol manualmente" # 1. Tentando configurar um ambiente para desenvolver um brinquedo para Windows</a></li>
<li><a href="../pt424975/index.html">Profundidades do SIEM: correlações prontas para uso. Parte 2. Esquema de dados como reflexo do modelo "mundo"</a></li>
<li><a href="../pt424977/index.html">Aprendendo com os erros: otimizando aplicativos na App Store e no Google Play</a></li>
<li><a href="../pt424979/index.html">Elm. Confortável e estranho. Http, Tarefa</a></li>
<li><a href="../pt424981/index.html">Ovo de Páscoa RPG de texto no Google Search Engine Code</a></li>
<li><a href="../pt424985/index.html">Em um importante precedente judicial, as agências de inteligência dos EUA não foram capazes de escutar chamadas telefônicas no messenger</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>