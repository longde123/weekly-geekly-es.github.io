<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õΩÔ∏è üë©üèæ‚Äçü§ù‚Äçüë®üèΩ üôèüèæ Detec√ß√£o de rosto em v√≠deo: Raspberry Pi e Neural Compute Stick üëèüèΩ üçá üé≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° cerca de um ano, a Intel Movidius lan√ßou um dispositivo para infer√™ncia eficiente de redes neurais convolucionais - Movidius Neural Compute Stick (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Detec√ß√£o de rosto em v√≠deo: Raspberry Pi e Neural Compute Stick</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424973/">  H√° cerca de um ano, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Intel Movidius</a> lan√ßou um dispositivo para infer√™ncia eficiente de redes neurais convolucionais - Movidius Neural Compute Stick (NCS).  Este dispositivo permite o uso de redes neurais para o reconhecimento ou detec√ß√£o de objetos em condi√ß√µes de consumo limitado de energia, inclusive em tarefas de rob√≥tica.  O NCS possui uma interface USB e consome n√£o mais que 1 watt.  Neste artigo, falarei sobre a experi√™ncia de usar o NCS com o Raspberry Pi para a tarefa de detectar rostos em v√≠deo, incluindo o treinamento do detector Mobilenet-SSD e o lan√ßamento no Raspberry. <br><br>  Todo o c√≥digo pode ser encontrado em meus dois reposit√≥rios: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">treinamento de detectores</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">demonstra√ß√µes de detec√ß√£o de faces</a> . <br><br><img src="https://habrastorage.org/webt/qu/b_/tj/qub_tj1u6ztw9irfy9ivtaaidcc.jpeg"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">No meu primeiro artigo,</a> eu j√° escrevi sobre detec√ß√£o de rosto usando o NCS: ent√£o est√°vamos conversando sobre um detector <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YOLOv2</a> , que converti do formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Darknet</a> para o formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caffe</a> e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iniciei</a> no NCS.  O processo de convers√£o acabou n√£o sendo trivial: como esses dois formatos definem a √∫ltima camada do detector de maneiras diferentes, a sa√≠da da rede neural teve que ser analisada separadamente, na CPU, usando um peda√ßo de c√≥digo da Darknet.  Al√©m disso, esse detector n√£o me satisfez em velocidade (at√© 5,1 FPS no meu laptop) e em precis√£o - mais tarde fiquei convencido de que, devido √† sua sensibilidade √† qualidade da imagem, era dif√≠cil obter um bom resultado no Raspberry Pi. <br><br>  No final, eu decidi apenas treinar meu detector.  A escolha foi feita no detector <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSD</a> com o codificador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mobilenet</a> : a convolu√ß√£o leve do Mobilenet permite alcan√ßar alta velocidade sem perda de qualidade, e o detector SSD n√£o √© inferior ao YOLO e funciona no NCS imediatamente. <br><br><div class="spoiler">  <b class="spoiler_title">Como o detector Mobilenet-SSD funciona</b> <div class="spoiler_text">  Vamos come√ßar com a Mobilenet.  Nesta arquitetura est√° completa <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.379ex" height="2.074ex" viewBox="0 -772.3 3607.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="3107" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> 3 \ vezes 3 </script>  convolu√ß√£o (em todos os canais) √© substitu√≠da por duas convolu√ß√µes leves: primeiro <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.379ex" height="2.074ex" viewBox="0 -772.3 3607.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="3107" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> 3 \ vezes 3 </script>  separadamente para cada canal e, em seguida, conclua <math></math><img src="https://habrastorage.org/getpro/habr/formulas/125/f92/b2c/125f92b2c5dbfe2ebdb17a2f3cec4ec9.svg" alt="US $ 1 \ vezes 1 $" data-tex="inline">  convolu√ß√£o.  Ap√≥s cada convolu√ß√£o, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BatchNorm</a> e N√£o Linearidade (ReLU) s√£o usados.  A primeira convolu√ß√£o de rede que recebe uma imagem como entrada geralmente √© deixada completa.  Essa arquitetura pode reduzir significativamente a complexidade dos c√°lculos devido a uma ligeira diminui√ß√£o na qualidade das previs√µes.  Existe uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">op√ß√£o mais avan√ßada</a> , mas ainda n√£o a tentei. <br><br>  O SSD (Single Shot Detector) funciona assim: nas sa√≠das de v√°rios codificadores de convolu√ß√£o s√£o pendurados em dois <math></math><img src="https://habrastorage.org/getpro/habr/formulas/125/f92/b2c/125f92b2c5dbfe2ebdb17a2f3cec4ec9.svg" alt="US $ 1 \ vezes 1 $" data-tex="inline">  camada convolucional: um prev√™ as probabilidades das classes, o outro - as coordenadas da caixa delimitadora.  H√° uma terceira camada que fornece as coordenadas e posi√ß√µes dos quadros padr√£o no n√≠vel atual.  O significado √©: a sa√≠da de qualquer camada √© naturalmente dividida em c√©lulas;  mais perto do final da rede neural, eles est√£o se tornando menores (neste caso, devido √† convolu√ß√£o com <code>stride=2</code> ), e o campo de vis√£o de cada c√©lula aumenta.  Para cada c√©lula em cada uma das v√°rias camadas selecionadas, definimos v√°rios quadros padr√£o de tamanhos diferentes e com diferentes propor√ß√µes, e usamos camadas convolucionais adicionais para corrigir coordenadas e prever probabilidades de classe para cada um desses quadros.  Portanto, um detector SSD (como o YOLO) sempre considera o mesmo n√∫mero de quadros.  O mesmo objeto pode ser detectado em diferentes camadas: durante o treinamento, o sinal √© enviado a todos os quadros que se cruzam fortemente com o objeto e, durante a aplica√ß√£o, as detec√ß√µes s√£o combinadas usando a n√£o supress√£o m√°xima (NMS).  A camada final combina as detec√ß√µes de todas as camadas, considera suas coordenadas completas, corta o limiar de probabilidade e produz NMS. <br></div></div><br><h2>  Treinamento de detectores </h2><br><h3>  Arquitetura </h3><br>  O c√≥digo para treinar o detector est√° localizado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Decidi usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">detector Mobilenet-SSD pronto para treinamento,</a> treinado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PASCAL VOC0712,</a> e trein√°-lo para detectar rostos.  Primeiro, ajuda a treinar a rede muito mais rapidamente e, segundo, voc√™ n√£o precisa reinventar a roda. <br><br>  O projeto original incluiu o script <code>gen.py</code> , que coletou literalmente o arquivo de modelo <code>.prototxt</code> , substituindo os par√¢metros de entrada.  Transferi para o meu projeto, expandindo um pouco a funcionalidade.  Este script permite gerar quatro tipos de arquivos de configura√ß√£o: <br><br><ul><li>  <b>train</b> : na entrada - uma base LMDB de treinamento, na sa√≠da - uma camada com o c√°lculo da fun√ß√£o de perda e seus gradientes, existe o BatchNorm </li><li>  <b>teste</b> : na entrada - a base LMDB de teste, na sa√≠da - a camada com o c√°lculo da qualidade (precis√£o m√©dia m√©dia), existe o BatchNorm </li><li>  <b>deploy</b> : na entrada - a imagem, na sa√≠da - a camada com previs√µes, o BatchNorm est√° ausente </li><li>  <b>deploy_bn</b> : na entrada - a imagem, na sa√≠da - a camada com previs√µes, existe o BatchNorm </li></ul><br>  Adicionei a √∫ltima op√ß√£o posteriormente, para que nos scripts voc√™ pudesse carregar e converter a grade do BatchNorm sem tocar no banco de dados LMDB - caso contr√°rio, na aus√™ncia do banco de dados, nada funcionaria.  (Em geral, me parece estranho que no Caffe a fonte de dados esteja definida na arquitetura de rede - isso √© pelo menos pouco pr√°tico). <br><br><div class="spoiler">  <b class="spoiler_title">Como √© a arquitetura da rede (curta)</b> <div class="spoiler_text"><ul><li>  Login: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>300</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>300</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.245ex" height="2.074ex" viewBox="0 -772.3 8716.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="1751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2237" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="2703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="3172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="3638" y="0"></use><g transform="translate(4108,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="5859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="6345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="6811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="7280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="7746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="8216" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>300</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>300</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> 300 \ vezes 300 \ vezes 3 </script></li><li>  <b>Conv conv conv</b> : 32 canais, <code>stride=2</code> </li><li>  Mobil1 convolu√ß√£o <b>conv1 - conv11</b> : 64, 128, 128, 256, 256, 512 ... 512 canais, alguns t√™m <code>stride=2</code> </li><li>  Camada de detec√ß√£o: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>19</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>19</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.245ex" height="2.074ex" viewBox="0 -772.3 8716.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-39" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="2203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="3138" y="0"></use><g transform="translate(3607,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-39" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="4858" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="5810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="6279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="6745" y="0"></use><g transform="translate(7215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>19</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>19</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math></span></span><script type="math/tex" id="MathJax-Element-4"> 19 \ vezes 19 \ vezes 512 </script></li><li>  Convolu√ß√£o <b>Mobilenet conv12, conv13</b> : 1024 canais, <b>conv12</b> tem <code>stride=2</code> </li><li>  Camada de detec√ß√£o: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>10</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>10</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1024</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.407ex" height="2.074ex" viewBox="0 -772.3 9217 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="2203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="3138" y="0"></use><g transform="translate(3607,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="4858" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="5810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="6279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="6745" y="0"></use><g transform="translate(7215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1501" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>10</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>10</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1024</mn></math></span></span><script type="math/tex" id="MathJax-Element-5"> 10 \ vezes 10 \ vezes 1024 </script></li><li>  Convolu√ß√£o completa <b>conv14_1, conv14_2</b> : 256, 512 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detec√ß√£o: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>5</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>5</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>5</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>5</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>512</mn></math></span></span><script type="math/tex" id="MathJax-Element-6"> 5 \ vezes 5 \ vezes 512 </script></li><li>  Convolu√ß√£o completa <b>conv15_1, conv15_2</b> : 128, 256 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detec√ß√£o: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>3</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math></span></span><script type="math/tex" id="MathJax-Element-7"> 3 \ vezes 3 \ vezes 256 </script></li><li>  <b>Convolu√ß√µes</b> completas <b>conv16_1, conv16_2</b> : 128, 256 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detec√ß√£o: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>2</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>256</mn></math></span></span><script type="math/tex" id="MathJax-Element-8"> 2 \ vezes 2 \ vezes 256 </script></li><li>  Convolu√ß√£o completa <b>conv17_1, conv17_2</b> : 64, 128 canais, o primeiro <code>kernel_size=1</code> , o segundo <code>stride=2</code> </li><li>  Camada de detec√ß√£o: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1</mn><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>128</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.92ex" height="2.074ex" viewBox="0 -772.3 7715.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-76" x="3857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="4343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-7A" x="4809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-65" x="5278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="5744" y="0"></use><g transform="translate(6214,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-38" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>1</mn><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mn>128</mn></math></span></span><script type="math/tex" id="MathJax-Element-9"> 1 \ vezes 1 \ vezes 128 </script></li><li>  Sa√≠da de detec√ß√£o da camada final </li></ul><br></div></div><br>  Corrigi levemente a arquitetura da rede.  Lista de altera√ß√µes: <br><br><ul><li>  Obviamente, o n√∫mero de classes mudou para 1 (sem contar o plano de fundo). </li><li>  Limita√ß√µes na propor√ß√£o das manchas cortadas durante o treinamento: alterado de <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>5</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>0</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.045ex" height="2.66ex" viewBox="0 -832 3894.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-35" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="2670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5D" x="3616" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>5</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>0</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-10"> [0,5,2,0] </script>  em <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>7</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>4</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.045ex" height="2.66ex" viewBox="0 -832 3894.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-37" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="2670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-5D" x="3616" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>7</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>4</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-11"> [0,7,1,4] </script>  (Decidi simplificar um pouco a tarefa e n√£o aprender com fotos muito esticadas). </li><li>  Dos quadros padr√£o, apenas os quadrados permaneceram, dois para cada c√©lula.  Reduzi bastante seus tamanhos, pois os rostos s√£o significativamente menores que os objetos no problema cl√°ssico de detec√ß√£o de objetos. </li></ul><br>  O Caffe calcula os tamanhos de quadro padr√£o da seguinte maneira: ter um tamanho de quadro m√≠nimo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> s </script>  e m√°ximo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> L </script>  , cria um quadro pequeno e grande com dimens√µes <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> s </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>L</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.302ex" height="2.419ex" viewBox="0 -780.1 3144 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-74" x="1631" y="0"></use><g transform="translate(1993,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-4C" x="469" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>L</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-15"> \ sqrt {sL} </script>  .  Como eu queria detectar o m√≠nimo poss√≠vel de faces, calculei o <code>stride</code> completo para cada camada de detec√ß√£o e igualei o tamanho m√≠nimo do quadro a ela.  Com esses par√¢metros, os pequenos quadros padr√£o ser√£o localizados pr√≥ximos um do outro e n√£o se cruzar√£o.  Portanto, temos pelo menos uma garantia de que a interse√ß√£o com o objeto existir√° para algum tipo de estrutura.  Defino o tamanho m√°ximo duas vezes mais.  Para as camadas <b>conv16_2, conv17_2,</b> defino as dimens√µes no olho como iguais.  Desta maneira <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi><mo>,</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.707ex" height="2.419ex" viewBox="0 -780.1 1596.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMATHI-4C" x="914" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi><mo>,</mo><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> s, L </script>  para todas as camadas foram: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>16</mn><mo>,</mo><mn>32</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>32</mn><mo>,</mo><mn>64</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>64</mn><mo>,</mo><mn>128</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>128</mn><mo>,</mo><mn>214</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>214</mn><mo>,</mo><mn>300</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mn>214</mn><mo>,</mo><mn>300</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="57.361ex" height="2.66ex" viewBox="0 -832 24696.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="1390" y="0"></use><g transform="translate(1835,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="2836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="3671" y="0"></use><g transform="translate(4060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="5061" y="0"></use><g transform="translate(5507,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="6508" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="6897" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="7342" y="0"></use><g transform="translate(7732,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="8733" y="0"></use><g transform="translate(9178,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-38" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="10679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="11069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="11514" y="0"></use><g transform="translate(11904,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-38" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="13405" y="0"></use><g transform="translate(13850,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="15352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="15741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="16186" y="0"></use><g transform="translate(16576,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="18077" y="0"></use><g transform="translate(18523,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-29" x="20024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="20414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-28" x="20859" y="0"></use><g transform="translate(21248,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-34" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-2C" x="22750" y="0"></use><g transform="translate(23195,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhjE4vRaQolJK1ELcTimoT-ZYwf4pg#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>16</mn><mo>,</mo><mn>32</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>32</mn><mo>,</mo><mn>64</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>64</mn><mo>,</mo><mn>128</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>128</mn><mo>,</mo><mn>214</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>214</mn><mo>,</mo><mn>300</mn><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mn>214</mn><mo>,</mo><mn>300</mn></math></span></span><script type="math/tex" id="MathJax-Element-17"> (16,32), (32,64), (64,128), (128,214), (214,300), (214,300</script><br><br><div class="spoiler">  <b class="spoiler_title">Apar√™ncia de alguns quadros padr√£o (ru√≠do para maior clareza)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j9/ti/gj/j9tigjn9tq7sdz6m3tyxa1v2r9s.png"><br></div></div><br><h3>  Dados </h3><br>  Eu usei dois <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conjuntos de dados</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WIDER Face</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FDDB</a> .  O WIDER cont√©m muitas fotos com rostos muito pequenos e emba√ßados, e o FDDB √© mais inclinado a imagens grandes de rostos (e uma ordem de magnitude menor que o WIDER).  O formato da anota√ß√£o √© um pouco diferente, mas esses j√° s√£o detalhes. <br><br>  Para o treinamento, n√£o usei todos os dados: joguei rostos muito pequenos (menos de seis pixels ou menos de 2% da largura da imagem), joguei todas as imagens com uma propor√ß√£o de menos de 0,5 ou mais que 2, joguei fora todas as imagens marcadas como "emba√ßadas" no conjunto de dados WIDER, j√° que eles correspondiam em grande parte a pessoas muito pequenas, e eu tive que pelo menos de alguma maneira alinhar a propor√ß√£o de rostos pequenos e grandes.  Depois disso, fiz todos os quadros quadrados, expandindo o lado menor: decidi que n√£o estava muito interessado em propor√ß√µes faciais e a tarefa para a rede neural foi um pouco simplificada.  Tamb√©m expulsei todas as imagens em preto e branco, das quais havia poucas e nas quais o script de constru√ß√£o do banco de dados falha. <br><br>  Para us√°-los para treinamento e teste, voc√™ precisa montar uma base LMDB a partir deles.  Como fazer: <br><br><ul><li>  Para cada imagem, a marca√ß√£o √© criada no formato <code>.xml</code> . </li><li>  Um arquivo <code>train.txt</code> √© <code>train.txt</code> com linhas no formato <code>"path/to/image.png path/to/labels.xml"</code> , o mesmo √© criado para teste. </li><li>  Um arquivo <code>test_name_size.txt</code> √© <code>test_name_size.txt</code> com linhas no formato <code>"test_image_name height width"</code> </li><li>  Cria um arquivo <code>labelmap.prototxt</code> com correspond√™ncias num√©ricas de <code>labelmap.prototxt</code> </li></ul><br><br>  O <code>ssd-caffe/scripts/create_annoset.py</code> (exemplo no Makefile): <br><br><pre> <code class="bash hljs">python3 /opt/movidius/ssd-caffe/scripts/create_annoset.py --anno-type=detection \ --label-map-file=$(wider_dir)/labelmap.prototxt --min-dim=0 --max-dim=0 \ --resize-width=0 --resize-height=0 --check-label --encode-type=jpg --encoded \ --redo $(wider_dir) \ $(wider_dir)/trainval.txt $(wider_dir)/WIDER_train/lmdb/wider_train_lmdb ./data</code> </pre><br><div class="spoiler">  <b class="spoiler_title">labelmap.prototxt</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">item</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: <span class="hljs-string"><span class="hljs-string">"none_of_the_above"</span></span> label: <span class="hljs-number"><span class="hljs-number">0</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"background"</span></span> } <span class="hljs-selector-tag"><span class="hljs-selector-tag">item</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: <span class="hljs-string"><span class="hljs-string">"face"</span></span> label: <span class="hljs-number"><span class="hljs-number">1</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"face"</span></span> }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Exemplo de marca√ß√£o .xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">annotation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">size</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>348<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>450<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depth</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depth</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">size</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>face<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bndbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmin</span></span></span><span class="hljs-tag">&gt;</span></span>161<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymin</span></span></span><span class="hljs-tag">&gt;</span></span>43<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmax</span></span></span><span class="hljs-tag">&gt;</span></span>241<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymax</span></span></span><span class="hljs-tag">&gt;</span></span>123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bndbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">annotation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  O uso de dois conjuntos de dados ao mesmo tempo significa apenas que voc√™ precisa mesclar cuidadosamente os arquivos correspondentes em pares, n√£o esquecendo de registrar corretamente os caminhos e embaralhar o arquivo para treinamento. <br><br>  Depois disso, voc√™ pode come√ßar o treinamento. <br><br><h3>  Treinamento </h3><br>  O c√≥digo para o treinamento de modelos pode ser encontrado no meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Colab Notebook</a> . <br><br>  Fiz o treinamento no Google Colaboratory, porque meu laptop mal fez os testes da grade e, geralmente, desligou o treinamento.  O Colaboratory me permitiu treinar a rede de maneira r√°pida e gratuita.  O √∫nico problema √© que tive que escrever um script de compila√ß√£o SSD-Caffe para o Colaboratory (incluindo coisas estranhas como recompilar o impulso e editar a fonte), o que leva cerca de 40 minutos.  Mais detalhes podem ser encontrados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">na minha publica√ß√£o anterior</a> . <br><br>  O Colaborat√≥rio tem mais uma caracter√≠stica: ap√≥s 12 horas, o carro morre, apagando permanentemente todos os dados.  A melhor maneira de evitar a perda de dados √© montar seu disco do Google no sistema e salvar os pesos da rede a cada 500-1000 itera√ß√µes de treinamento. <br><br>  Quanto ao meu detector, em uma sess√£o no Colaboratory, ele conseguiu desaprender 4.500 itera√ß√µes e foi totalmente treinado em duas sess√µes. <br><br>  A qualidade das previs√µes (precis√£o m√©dia m√©dia) no conjunto de dados de teste que destaquei (mesclou o WIDER e o FDDB com as restri√ß√µes listadas acima) foi de cerca de 0,87 para o melhor modelo.  Para medir o mAP nas escalas salvas durante o treinamento, existe um script <code>scripts/plot_map.py</code> . <br><br>  O detector funciona em um exemplo (muito estranho) de um conjunto de dados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nw/kc/jy/nwkcjyrtsz09v2fivdbs4uny3lc.png" width="60%"></div><br><h2>  Lan√ßamento no NCS </h2><br>  Uma demonstra√ß√£o de detec√ß√£o de rosto est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Para compilar uma rede neural para o Neural Compute Stick, √© necess√°rio o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Movidius NCSDK</a> : ele cont√©m utilit√°rios para compilar e criar perfis de redes neurais, bem como as APIs C ++ e Python.  Vale ressaltar que a segunda vers√£o foi lan√ßada recentemente, o que n√£o √© compat√≠vel com a primeira: todas as fun√ß√µes da API foram renomeadas por algum motivo, o formato interno das redes neurais mudou, o FIFO foi adicionado para interagir com o NCS e (finalmente) a convers√£o autom√°tica de float 32 bits para float 16 bits, que faltava em C ++.  Atualizei todos os meus projetos para a segunda vers√£o, mas deixei algumas muletas para compatibilidade com a primeira. <br><br>  Ap√≥s o treinamento do detector, vale a pena mesclar as camadas BatchNorm com as convolu√ß√µes adjacentes para acelerar a rede neural.  O script <code>merge_bn.py</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso daqui</a> , que tamb√©m emprestei do projeto Mobilenet-SSD. <br><br>  Ent√£o voc√™ precisa chamar o utilit√°rio <code>mvNCCompile</code> , por exemplo: <br><br><pre> <code class="bash hljs">mvNCCompile -s 12 -o graph_ssd -w ssd-face.caffemodel ssd-face.prototxt</code> </pre><br>  H√° uma meta <code>graph_ssd</code> para isso no Makefile do projeto.  O arquivo <code>graph_ssd</code> resultante √© uma descri√ß√£o da rede neural em um formato entendido pelo NCS. <br><br>  Agora, sobre como interagir com o pr√≥prio dispositivo.  O processo n√£o √© muito complicado, mas requer uma quantidade bastante grande de c√≥digo.  A sequ√™ncia de a√ß√µes √© aproximadamente a seguinte: <br><br><ul><li>  Obter descritor de dispositivo pelo n√∫mero de s√©rie </li><li>  Dispositivo aberto </li><li>  Leia o arquivo de rede neural compilado no buffer (como um arquivo bin√°rio) </li><li>  Crie um gr√°fico de c√°lculo vazio para o NCS </li><li>  Coloque o gr√°fico no dispositivo usando os dados do arquivo e selecione FIFO na entrada / sa√≠da;  o buffer com o conte√∫do do arquivo agora pode ser liberado </li><li>  In√≠cio do detector: <br><ul><li>  Obtenha a imagem da c√¢mera (ou de qualquer outra fonte) </li><li>  Processe: dimensione para o tamanho desejado, converta para float32 e fa√ßa a convers√£o para o intervalo [-1,1] </li><li>  Carregar imagem no dispositivo e solicitar infer√™ncia </li><li>  Solicitar um resultado (o programa ser√° bloqueado at√© que o resultado seja recebido) </li><li>  Analise o resultado, selecione os quadros dos objetos (sobre o formato - mais adiante) </li><li>  Exibir previs√µes </li></ul><br></li><li>  Libere todos os recursos: remova o FIFO e o gr√°fico de c√°lculo, feche o dispositivo e remova sua al√ßa </li></ul><br>  Quase todas as a√ß√µes com o NCS t√™m sua pr√≥pria fun√ß√£o separada, e no C ++ parece muito complicado, e voc√™ precisa monitorar cuidadosamente a libera√ß√£o de todos os recursos.  Para n√£o sobrecarregar o c√≥digo, criei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma classe de wrapper para trabalhar com o NCS</a> .  Nele, todo o trabalho de inicializa√ß√£o est√° oculto no construtor e na fun√ß√£o <code>load_file</code> , e na libera√ß√£o de recursos - no destruidor, e o trabalho com o NCS √© reduzido a chamar 2-3 m√©todos de classe.  Al√©m disso, existe uma fun√ß√£o conveniente para explicar os erros que ocorreram. <br><br>  Crie um wrapper passando o tamanho da entrada e o tamanho da sa√≠da (n√∫mero de elementos) para o construtor: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">NCSWrapper </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NCS</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(NETWORK_INPUT_SIZE*NETWORK_INPUT_SIZE*</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, NETWORK_OUTPUT_SIZE)</span></span></span></span>;</code> </pre><br>  Carregamos o arquivo compilado com a rede neural, inicializando simultaneamente tudo o que precisamos: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!NCS.load_file(<span class="hljs-string"><span class="hljs-string">"./models/face/graph_ssd"</span></span>)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  Convertemos a imagem em float32 (a <code>image</code> √© <code>cv::Mat</code> no formato <code>CV_32FC3</code> ) e a transferimos para o dispositivo: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!NCS.load_tensor_nowait((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>*)image.data)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  Obtemos o resultado ( <code>result</code> √© um ponteiro de <code>float</code> livre, o buffer de resultado √© suportado pelo wrapper);  at√© o final dos c√°lculos, o programa est√° bloqueado: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!NCS.get_result(result)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  De fato, o wrapper tamb√©m possui um m√©todo que permite carregar dados e obter o resultado ao mesmo tempo: <code>load_tensor((float*)image.data, result)</code> .  Recusei-me a us√°-lo por um motivo: usando m√©todos separados, voc√™ pode acelerar um pouco a execu√ß√£o do c√≥digo.  Depois de carregar a imagem, a CPU permanecer√° ociosa at√© que o resultado da execu√ß√£o com o NCS chegue (neste caso, s√£o cerca de 100 ms) e, nesse momento, voc√™ pode fazer um trabalho √∫til: leia um novo quadro e converta-o, al√©m de exibir detec√ß√µes anteriores .  √â exatamente assim que o programa de demonstra√ß√£o √© implementado, no meu caso, aumenta ligeiramente o FPS.  Voc√™ pode ir al√©m e iniciar o processamento de imagens e o detector de rosto de forma ass√≠ncrona em dois fluxos diferentes - isso realmente funciona e permite acelerar um pouco mais, mas n√£o √© implementado no programa de demonstra√ß√£o. <br><br>  O detector, como resultado, retorna uma matriz flutuante de tamanho <code>7*(keep_top_k+1)</code> .  Aqui, <code>keep_top_k</code> √© o par√¢metro especificado no arquivo <code>.prototxt</code> do modelo e mostra quantas detec√ß√µes (na ordem de confian√ßa decrescente) devem ser retornadas.  Esse par√¢metro, assim como o par√¢metro respons√°vel por filtrar detec√ß√µes pelo valor m√≠nimo de confian√ßa e par√¢metros de supress√£o n√£o m√°ximos, podem ser configurados no arquivo <code>.prototxt</code> do modelo na √∫ltima camada.  Vale ressaltar que, se o Caffe retornar tantas detec√ß√µes quanto as encontradas na imagem, o NCS sempre retornar√° <code>keep_top_k</code> detec√ß√µes para que o tamanho da matriz seja constante. <br><br>  A matriz de resultados em si √© <code>keep_top_k+1</code> seguinte forma: se a considerarmos como uma matriz com <code>keep_top_k+1</code> linhas e 7 colunas, na primeira linha, no primeiro elemento, haver√° o n√∫mero de detec√ß√µes e, a partir da segunda linha, haver√° as pr√≥prias detec√ß√µes no formato <code>"garbage, class_index, class_probability, x_min, y_min, x_max, y_max"</code> .  As coordenadas s√£o especificadas no intervalo [0,1], portanto, elas precisam ser multiplicadas pela altura / largura da imagem.  Os elementos restantes da matriz ser√£o lixo.  Nesse caso, a supress√£o n√£o m√°xima √© realizada automaticamente, mesmo antes de o resultado ser obtido (ao que parece, diretamente no NCS). <br><br><div class="spoiler">  <b class="spoiler_title">An√°lise de Detector</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_detection_boxes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">* predictions, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> thresh, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;&amp; probs, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;cv::Rect&gt;&amp; boxes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> num = predictions[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cls = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i&lt;num+<span class="hljs-number"><span class="hljs-number">1</span></span>; i++) { score = predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>]; cls = predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (score&gt;thresh &amp;&amp; cls&lt;=<span class="hljs-number"><span class="hljs-number">1</span></span>) { probs.push_back(score); boxes.push_back(Rect(predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>]*w, predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span>]*h, (predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>]-predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>])*w, (predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">6</span></span>]-predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span>])*h)); } } }</code> </pre><br></div></div><br><h2>  Recursos de lan√ßamento do Raspberry Pi </h2><br>  O programa de demonstra√ß√£o em si pode ser executado em um computador ou laptop comum com o Ubuntu ou em um Raspberry Pi com um Raspbian Stretch.  Estou usando um Raspberry Pi 2 modelo B, mas a demonstra√ß√£o deve funcionar em outros modelos tamb√©m.  O makefile do projeto cont√©m dois objetivos para alternar os modos: <code>make switch_desk</code> para o computador / laptop e <code>make switch_rpi</code> para o Raspberry Pi.  A diferen√ßa fundamental no c√≥digo do programa √© que, no primeiro caso, o OpenCV √© usado para ler dados da c√¢mera e, no segundo caso, da biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RaspiCam</a> .  Para executar a demonstra√ß√£o no Raspberry, voc√™ deve compilar e instalar. <br><br>  Agora, um ponto muito importante: a instala√ß√£o do NCSDK.  Se voc√™ seguir as instru√ß√µes de instala√ß√£o padr√£o do Raspberry Pi, nada de bom terminar√°: o instalador tentar√° arrastar e compilar SSD-Caffe e Tensorflow.  Em vez disso, o NCSDK precisa ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">compilado no modo somente API</a> .  Nesse modo, apenas as APIs C ++ e Python estar√£o dispon√≠veis (ou seja, n√£o ser√° poss√≠vel compilar e criar gr√°ficos de redes neurais).  Isso significa que o gr√°fico da rede neural deve primeiro ser compilado em um computador comum e depois copiado para o Raspberry.  Por conveni√™ncia, adicionei dois arquivos compilados ao reposit√≥rio, para YOLO e SSD. <br><br>  Outro ponto interessante √© a conex√£o puramente f√≠sica do NCS ao Raspberry.  Parece que n√£o √© dif√≠cil conect√°-lo a um conector USB, mas √© preciso lembrar que o gabinete bloquear√° os outros tr√™s conectores (√© bastante saud√°vel, pois desempenha a fun√ß√£o de um radiador).  A sa√≠da mais f√°cil √© conect√°-lo atrav√©s de um cabo USB. <br><br>  Tamb√©m √© importante lembrar que a velocidade de execu√ß√£o variar√° para diferentes vers√µes do USB (para esta rede neural espec√≠fica: 102 ms para USB 3.0, 92 ms para USB 2.0). <br><br>  Agora, sobre o poder do NCS.  De acordo com a documenta√ß√£o, consome at√© 1 watt (a 5 volts no conector USB ser√° de at√© 200 ma; para compara√ß√£o: a c√¢mera Raspberry consome at√© 250 ma).  Quando alimentado por um carregador regular de 5 volts, 2 amperes, tudo funciona muito bem.  No entanto, tentar conectar dois ou mais NCSs ao Raspberry pode causar problemas.  Nesse caso, √© recomend√°vel usar um divisor USB com a possibilidade de alimenta√ß√£o externa. <br><br>  No Raspberry, a demonstra√ß√£o √© mais lenta que em um computador / laptop: 7,2 FPS versus 10,4 FPS.  Isso se deve a v√°rios fatores: primeiro, √© imposs√≠vel livrar-se dos c√°lculos na CPU, mas eles s√£o realizados muito mais lentamente;  segundo, a velocidade de transfer√™ncia de dados afeta (para USB 2.0). <br><br>  Al√©m disso, para compara√ß√£o, tentei executar um detector de rosto no Raspberry YOLOv2 no meu primeiro artigo, mas funcionou muito mal: a uma velocidade de 3,6 FPS, ele perde muitos rostos, mesmo em quadros simples.  Aparentemente, √© muito sens√≠vel aos par√¢metros da imagem de entrada, cuja qualidade no caso da c√¢mera Raspberry est√° longe de ser ideal.  O SSD funciona muito mais est√°vel, embora eu tenha que ajustar um pouco as configura√ß√µes de v√≠deo nas configura√ß√µes do RapiCam.  ele tamb√©m sente falta dos rostos no quadro, mas faz isso muito raramente.  Para aumentar a estabilidade em aplicativos reais, voc√™ pode adicionar um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rastreador de centr√≥ide</a> simples. <br><br>  A prop√≥sito: a mesma coisa pode ser reproduzida no Python, h√° um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutorial no PyImageSearch</a> (o Mobilenet-SSD √© usado para a tarefa de detec√ß√£o de objetos). <br><br><h4>  Outras ideias </h4><br>  Tamb√©m testei algumas id√©ias para acelerar a pr√≥pria rede neural: <br><br>  Primeira id√©ia: voc√™ pode deixar apenas a detec√ß√£o das camadas <code>conv11</code> e <code>conv13</code> e remover todas as camadas extras.  Voc√™ receber√° um detector que detecta apenas rostos pequenos e funciona um pouco mais r√°pido.  Em suma, n√£o vale a pena. <br><br>  A segunda ideia foi interessante, mas n√£o deu certo: tentei lan√ßar convolu√ß√µes da rede neural com pesos pr√≥ximos a zero, esperando que se tornasse mais r√°pido.  No entanto, houve poucas complica√ß√µes, e sua remo√ß√£o apenas diminuiu a velocidade da rede neural (o √∫nico palpite: isso se deve ao fato de o n√∫mero de canais ter deixado de ser uma pot√™ncia de dois). <br><br><h2>  Conclus√£o </h2><br>  Pensei em detectar rostos no Raspberry por um longo tempo, como uma subtarefa do meu projeto rob√≥tico.  N√£o gostei dos detectores cl√°ssicos em termos de velocidade e qualidade e decidi experimentar m√©todos de rede neural, ao mesmo tempo testando o Neural Compute Stick, como resultado dos quais havia dois projetos no GitHub e tr√™s artigos no Habr√© (incluindo o atual).  Em geral, o resultado combina comigo - provavelmente, usarei esse detector no meu rob√¥ (talvez haja outro artigo sobre ele).  Vale ressaltar que minha solu√ß√£o pode n√£o ser √≥tima - no entanto, este √© um projeto de treinamento, feito em parte por curiosidade para o NCS.  No entanto, espero que este artigo seja √∫til para algu√©m. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt424973/">https://habr.com/ru/post/pt424973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt424963/index.html">Zuckerberg Funding: Construindo Ferramentas para a Ci√™ncia Juntos</a></li>
<li><a href="../pt424965/index.html">Reagir o desenvolvimento de aplicativos usando ReasonReact</a></li>
<li><a href="../pt424967/index.html">Atalhos de JavaScript para iniciantes</a></li>
<li><a href="../pt424969/index.html">Guia Node.js, parte 9: Trabalhando com o sistema de arquivos</a></li>
<li><a href="../pt424971/index.html">Habrokast "P√¥r do sol manualmente" # 1. Tentando configurar um ambiente para desenvolver um brinquedo para Windows</a></li>
<li><a href="../pt424975/index.html">Profundidades do SIEM: correla√ß√µes prontas para uso. Parte 2. Esquema de dados como reflexo do modelo "mundo"</a></li>
<li><a href="../pt424977/index.html">Aprendendo com os erros: otimizando aplicativos na App Store e no Google Play</a></li>
<li><a href="../pt424979/index.html">Elm. Confort√°vel e estranho. Http, Tarefa</a></li>
<li><a href="../pt424981/index.html">Ovo de P√°scoa RPG de texto no Google Search Engine Code</a></li>
<li><a href="../pt424985/index.html">Em um importante precedente judicial, as ag√™ncias de intelig√™ncia dos EUA n√£o foram capazes de escutar chamadas telef√¥nicas no messenger</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>