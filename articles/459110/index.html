<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💻 🤷 🚖 Estamos escribiendo un bot de pesca en el juego Albion Online en Python 💳 🔸 🤹🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos, soy un usuario feliz del sistema operativo GNU / Linux. Y como mucha gente sabe, hay muchos menos juguetes yendo a Linux sin bailes adic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estamos escribiendo un bot de pesca en el juego Albion Online en Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459110/"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/d19/0a2/dbbd190a2f9638019018783a7cd87d6e.jpg" alt="imagen"><br><br>  Hola a todos, soy un usuario feliz del sistema operativo GNU / Linux. Y como mucha gente sabe, hay muchos menos juguetes yendo a Linux sin bailes adicionales con una pandereta que en Windows. <br><br>  Y aún menos juegos en el género MMORPG. <br><br>  Sin embargo, hace aproximadamente medio año o un año, descubrí que habían portado el juego Albion Online a Linux. <br>  El juego es muy entretenido, pero lleva bastante tiempo.  Y para no desperdiciar mis preciosas horas de vida en vano, decidí escribir un bot.  ¿Quién me dedicará recursos mientras realizo mis actividades? <br><br>  El juego tiene muchos tipos de manualidades, puedes cortar madera, cavar piedras e incluso cultivar jardines, pero mi elección fue a favor de la pesca. <br><a name="habracut"></a><br>  Por lo tanto, la esencia de la pesca en línea en Albion es simple, tomar una caña de pescar, ir al estanque, mantener presionado el botón para lanzar el cebo, esperar un cierto tiempo de mordisco. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cef/bb4/9f2/cefbb49f2112b5f63ca0a793f6fa9799.png" alt="imagen"><br><br>  Al picotear, debes presionar nuevamente los botones y jugar un mini-juego. <br><br>  Aquí deberá tirar alternativamente, luego no tire de la caña de pescar, dependiendo de los movimientos del flotador.  El flotador siempre se mueve al azar, con diferentes secuencias y velocidades.  Y si haces todo bien y el flotador no va más allá de la zona permitida, entonces pescarás. <br><br>  Entonces, automatizaremos todo este negocio.  Mediante el lenguaje informático python.  Decidí comenzar desde lo más difícil, es decir, desde el momento en que el juego comienza con un flotador.  Aquí nuevamente, mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">biblioteca</a> favorita de visión por computadora <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OpenCV</a> vino a mi rescate.  Al iniciarlo, podemos detectar objetos, por ejemplo, en imágenes.  Sin embargo, la biblioteca en sí misma no sabe exactamente qué necesitamos descubrir.  Por supuesto, hay muchos patrones donde se presentan varios objetos para definirlos.  Sin embargo, definitivamente no hay carrozas para Albion Online. <br><br>  Pero en esta biblioteca hay una maravillosa función de búsqueda para una plantilla determinada.  Y como plantilla, acabo de tomar una captura de pantalla de nuestro flotador. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b0/47a/5d9/7b047a5d988af0b78f2a7ff897df05e9.png" alt="imagen"><br><br>  Y como vemos, todo se encontró perfectamente en la imagen. <br><br>  Y la diferencia entre la imagen y la transmisión de video no es grande, porque de hecho es solo una secuencia de imágenes con una velocidad muy rápida y unas pocas líneas de código.  Y ahora ya podemos encontrar el flotador en la transmisión de video. <br><br><div class="spoiler">  <b class="spoiler_title">Código</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> mss.linux <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MSS <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Image <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyautogui <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy template = cv2.imread(<span class="hljs-string"><span class="hljs-string">"2019-07-02_06-55_1.png"</span></span>, cv2.IMREAD_GRAYSCALE) w, h = template.shape[::<span class="hljs-number"><span class="hljs-number">-1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> mss.mss() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sct: monitor = {<span class="hljs-string"><span class="hljs-string">"top"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-string"><span class="hljs-string">"left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">800</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">"Screen capturing"</span></span>: last_time = time.time() img = numpy.array(sct.grab(monitor)) cv2.imshow(<span class="hljs-string"><span class="hljs-string">"OpenCV/Numpy normal"</span></span>, img) print(<span class="hljs-string"><span class="hljs-string">"fps: {}"</span></span>.format(<span class="hljs-number"><span class="hljs-number">1</span></span> / (time.time() - last_time))) gray_frame = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) res = cv2.matchTemplate(gray_frame, template, cv2.TM_CCOEFF_NORMED) loc = np.where(res &gt;= <span class="hljs-number"><span class="hljs-number">0.7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> pt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(*loc[::<span class="hljs-number"><span class="hljs-number">-1</span></span>]): cv2.rectangle(img, pt, (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>] + w, pt[<span class="hljs-number"><span class="hljs-number">1</span></span>] + h), (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">3</span></span>) cv2.imshow(<span class="hljs-string"><span class="hljs-string">"Frame"</span></span>, img) key = cv2.waitKey(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">"q"</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span></code> </pre> <br></div></div><br>  Vamos más allá  El flotador se mueve hacia adelante y hacia atrás y también debemos moverlo presionando el botón del mouse. <br><br>  Y por lo tanto, necesitamos sus coordenadas.  Y para esto, estas líneas nos ayudan. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> img: pts = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>],pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) x = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>]) y = (pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (x) cv2.circle(template,pts,<span class="hljs-number"><span class="hljs-number">5</span></span>,(<span class="hljs-number"><span class="hljs-number">200</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>),<span class="hljs-number"><span class="hljs-number">2</span></span>) cv2.putText(img, <span class="hljs-string"><span class="hljs-string">"%d-%d"</span></span> % (x,y), (x+<span class="hljs-number"><span class="hljs-number">10</span></span>,y<span class="hljs-number"><span class="hljs-number">-10</span></span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number"><span class="hljs-number">1</span></span>, color_yellow, <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  Luego solo usamos la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PyAutoGUI</a> , que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">apretará</a> el botón del mouse y lo presionará con cierta frecuencia. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> &lt; x &lt; <span class="hljs-number"><span class="hljs-number">500</span></span>: pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) x = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  Y el mini-juego en sí mismo se ganó con éxito. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/012/b6b/a40/012b6ba4054f6db696a76bd196205a7d.png" alt="imagen"><br><br>  Ponemos todo en una función y lo dejamos por ahora. <br><br>  Luego volvemos a la parte original, donde debemos monitorear el flotador. <br><br>  Todo es un poco diferente, por ejemplo, podemos determinar dónde se lanzará el flotador e intentar analizar esa parte de la pantalla en busca de la presencia del flotador.  Sin embargo, el flotador arrojado al agua aparece en diferentes ángulos y se balancea constantemente. <br><br>  En este caso, tomaremos ese método ligeramente diferente.  Su esencia es que analizamos, digamos la diferencia en píxeles dentro del fragmento rastreado.  Que, si no hay flotante, se acerca a cero. <br><br>  Como resultado, se encontró el valor óptimo en el cual, con la desaparición del flotador, podemos realizar acciones. <br><br><div class="spoiler">  <b class="spoiler_title">Código</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">screen_record</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> sct = mss.mss() last_time = time.time() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): img = sct.grab(mon) print(<span class="hljs-string"><span class="hljs-string">'loop took {} seconds'</span></span>.format(time.time() - last_time)) last_time = time.time() img = np.array(img) processed_image = process_image(img) mean = np.mean(processed_image) print(<span class="hljs-string"><span class="hljs-string">'mean = '</span></span>, mean) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mean &lt;= float(<span class="hljs-number"><span class="hljs-number">0.11</span></span>): print(<span class="hljs-string"><span class="hljs-string">'SSSSSSSS '</span></span>) pyautogui.click(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">'q'</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span></code> </pre><br></div></div><br>  Y los producimos, a saber, haga clic en el botón del mouse.  También ponemos esto en la función. <br><br>  Y finalmente, en conclusión, simplemente escribimos un guión donde en un bucle infinito lanzamos una caña de pescar y realizamos la primera y la segunda funciones alternativamente. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">431</span></span>,<span class="hljs-number"><span class="hljs-number">175</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">450.200</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) screen_record() time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) ss()</code> </pre><br>  Aquí hay una instrucción de video completa y un ejemplo del trabajo de este bot: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/92XnJ3s0vX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Realmente hay algunos matices en el sentido de que necesita chamanizar con números, ya que estos números se seleccionan para mi monitor, ubicación, personaje y equipo.  Pero creo que para un pitonista competente esto no será un problema. <br><br>  El guión completo: <br><br><div class="spoiler">  <b class="spoiler_title">Código</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> mss.linux <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MSS <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Image <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyautogui <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> imutils <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mss <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyautogui template = cv2.imread(<span class="hljs-string"><span class="hljs-string">"2019-07-02_06-55_1.png"</span></span>, cv2.IMREAD_GRAYSCALE) w, h = template.shape[::<span class="hljs-number"><span class="hljs-number">-1</span></span>] color_yellow = (<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>) mon = {<span class="hljs-string"><span class="hljs-string">'top'</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-string"><span class="hljs-string">'left'</span></span>: <span class="hljs-number"><span class="hljs-number">350</span></span>, <span class="hljs-string"><span class="hljs-string">'width'</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-string"><span class="hljs-string">'height'</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(original_image)</span></span></span><span class="hljs-function">:</span></span> processed_image = cv2.cvtColor(original_image, cv2.COLOR_BGR2GRAY) processed_image = cv2.Canny(processed_image, threshold1=<span class="hljs-number"><span class="hljs-number">200</span></span>, threshold2=<span class="hljs-number"><span class="hljs-number">300</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> processed_image <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> op = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> mss.mss() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sct: monitor = {<span class="hljs-string"><span class="hljs-string">"top"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-string"><span class="hljs-string">"left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">800</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">"Screen capturing"</span></span>: last_time = time.time() img = numpy.array(sct.grab(monitor)) gray_frame = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) res = cv2.matchTemplate(gray_frame, template, cv2.TM_CCOEFF_NORMED) loc = np.where(res &gt;= <span class="hljs-number"><span class="hljs-number">0.7</span></span>) op += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (op) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> pt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(*loc[::<span class="hljs-number"><span class="hljs-number">-1</span></span>]): cv2.rectangle(img, pt, (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>] + w, pt[<span class="hljs-number"><span class="hljs-number">1</span></span>] + h), (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> img: pts = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>],pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) x = (pt[<span class="hljs-number"><span class="hljs-number">0</span></span>]) y = (pt[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (x) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> &lt; x &lt; <span class="hljs-number"><span class="hljs-number">490</span></span>: pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) x = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> key = cv2.waitKey(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">"q"</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op &gt; <span class="hljs-number"><span class="hljs-number">35</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">screen_record</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> sct = mss.mss() last_time = time.time() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): img = sct.grab(mon) print(<span class="hljs-string"><span class="hljs-string">'loop took {} seconds'</span></span>.format(time.time() - last_time)) last_time = time.time() img = np.array(img) processed_image = process_image(img) mean = np.mean(processed_image) print(<span class="hljs-string"><span class="hljs-string">'mean = '</span></span>, mean) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mean &lt;= float(<span class="hljs-number"><span class="hljs-number">0.11</span></span>): print(<span class="hljs-string"><span class="hljs-string">'SSSSSSSS '</span></span>) pyautogui.click(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cv2.waitKey(<span class="hljs-number"><span class="hljs-number">25</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span> == ord(<span class="hljs-string"><span class="hljs-string">'q'</span></span>): cv2.destroyAllWindows() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">431</span></span>,<span class="hljs-number"><span class="hljs-number">175</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseDown(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) pyautogui.moveTo(<span class="hljs-number"><span class="hljs-number">450.200</span></span>,duration=<span class="hljs-number"><span class="hljs-number">1</span></span>) pyautogui.mouseUp(button=<span class="hljs-string"><span class="hljs-string">'left'</span></span>) time.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) screen_record() time.sleep(<span class="hljs-number"><span class="hljs-number">0.01</span></span>) ss()</code> </pre><br></div></div><br>  Aquellos a quienes les gusta decir que esto es una pérdida de tiempo, notaré que esto es solo una herramienta, pueden usar estas bibliotecas en otros proyectos.  La visión por computadora en sí misma se usa tanto en los misiles balísticos como en los programas para ayudar a las personas con discapacidades.  Donde decidas aplicarlos, solo tu deseo. <br><br>  Gracias a todos por su atención. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/459110/">https://habr.com/ru/post/459110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459098/index.html">GitHub Package Registry admitirá paquetes Swift</a></li>
<li><a href="../459100/index.html">GitHub Package Registry admitirá paquetes Swift</a></li>
<li><a href="../459102/index.html">Plato de regalo o música gratis para los amantes de la cola y desayunos preparados.</a></li>
<li><a href="../459104/index.html">C # o Java? ¿TypeScript o JavaScript? La clasificación de los lenguajes de programación basados ​​en el aprendizaje automático.</a></li>
<li><a href="../459108/index.html">Tesla presentará varias sorpresas a la vez en la segunda mitad de este año</a></li>
<li><a href="../459112/index.html">Comprender las características de Google Chrome Convertir HTML a PDF</a></li>
<li><a href="../459114/index.html">14 mejores plugins de WordPress SEO en 2019</a></li>
<li><a href="../459116/index.html">Un paso más cerca de la reparación del timo</a></li>
<li><a href="../459118/index.html">Cómo diseñamos e implementamos la nueva red en Huawei en la oficina de Moscú, parte 2</a></li>
<li><a href="../459120/index.html">Computadoras modulares integradas de la serie UNO-1000/2000</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>