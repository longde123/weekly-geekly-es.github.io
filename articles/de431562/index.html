<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈🏾 👰🏾 🚬 Wie man mit altem Code rollt, wenn gestern ein Projekt benötigt wurde 🏙️ 🎱 😗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo. Mein Name ist Ivan Melnichuk, ich bin Leiter der Entwicklungsabteilung eines ukrainischen IT-Unternehmens. In der Veröffentlichung möchte ich m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man mit altem Code rollt, wenn gestern ein Projekt benötigt wurde</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431562/">  Hallo.  Mein Name ist Ivan Melnichuk, ich bin Leiter der Entwicklungsabteilung eines ukrainischen IT-Unternehmens.  In der Veröffentlichung möchte ich meine persönlichen beruflichen Ansätze zur Lösung des Legacy-Code-Problems im Kontext der raschen Entwicklung des Projekts erläutern und über die Techniken berichten, auf die unser Team in Fällen zurückgreift, in denen „Funktionen für gestern übergeben werden müssen“. <br><br><h3>  Wir beschäftigen uns mit dem Projekt </h3><br>  Um zu vermitteln, wie genau, nachdenklich und mühsam die Arbeit mit dem Erbe sein sollte, werde ich eine Analogie mit einem Kartenhaus geben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/e10/658/dbbe10658bed914e04ba9514627493f7.jpg" alt="Bild"></div><br>  So sieht Legacy-Code aus.  Wenn wir uns entscheiden, mindestens eine Karte aus diesem Gebäude zu entfernen oder zu ersetzen, laufen wir Gefahr, das gesamte Haus zu überwältigen und seine Überreste mit dem Boden in Einklang zu bringen. <br><br>  Vermächtnis verhält sich ungefähr gleich.  Daher sollte die Arbeit eines Programmierers, der die Aufgabe übernahm, das Projekt zu modernisieren und ihm ein zweites Leben einzuhauchen, in gewissem Maße Schmuck sein.  Die meisten Programmierer versuchen, technische Schulden zu vermeiden und generell vom Thema abzuspringen.  Sogar eine Hitparade der häufigsten Zitate zusammengestellt, die von Programmierern gehört werden mussten, die unter alten Bedingungen gefangen waren: <br><a name="habracut"></a><br><ol><li>  <i>Wir haben eine "einfache" Seite erstellt, und jetzt möchten Sie ein neues "Brötchen" erhalten, und wir müssen all dies neu schreiben, da wir Vermächtnis haben ...</i> </li><li>  <i>Niemand weiß, wie das funktioniert ..</i> </li><li>  <i>Um ein Modul hinzuzufügen, müssen Sie die gesamte Site überprüfen - nur auf diese Weise verstehen wir, was und wo es herauskommen kann ...</i> </li><li>  <i>Ich werde auf keinen Fall dorthin gehen, dort ist schon alles schlecht ...</i> </li></ol><br>  Die Erfahrung in der Programmierung zeigt jedoch, dass ein Leben nach dem Erbe existiert.  Es gibt keine Probleme mit der Programmierung.  Es gibt nur Aufgaben, die angegangen werden müssen.  Und bevor Sie einen Aktionsplan „zur Überwindung des Vererbungscodes“ erstellen, müssen Sie verstehen, wie schlimm das gesamte Projekt ist.  Im Laufe der Praxis identifizierte er 6 Phasen des Projektproblems: <br><br><ol><li>  <i>Keine technische Dokumentation.</i>  Die niedrigste Schwelle für Probleme, da Sie testen und vorläufige Vermutungen anstellen können, wie dies funktionieren sollte. </li><li>  <i>Keine Geschäftsdokumentation.</i>  Wenn die gesamte Dokumentation (sowohl technisch als auch geschäftlich) fehlt, entsteht unfreiwillig das Gefühl, „wir scheinen in der Geschichte zu stecken“.  Selbst ein Unternehmen kann sich nicht erinnern, wie es funktionieren soll, was bedeutet, dass das Team zumindest kein Verständnis für das erwartete Ergebnis hat. </li><li>  <i>Es gibt niemanden, der das entworfen hat.</i>  Wenn es neben der fehlenden Dokumentation auch keinen Entwickler gibt, der erklären könnte, wie das Projekt funktionieren soll, dann riecht es bereits gebraten. </li><li>  <i>Wir wissen nicht, was der Benutzer letztendlich bekommen soll.</i>  Es ist eine Sache, wenn Fragen nur im Backend auftauchen, aber wenn wir immer noch absolut keine Ahnung haben, was auf der Vorderseite angezeigt werden soll, dann ist dies bereits nahe an dem Zustand „Der Patient ist eher tot als lebendig“. </li><li>  <i>200+ Nutzung jeder Funktion und sie heißen getA</i> .  Fünfter Schwierigkeitsgrad: Wenn Sie in Legacy einsteigen, sehen Sie die Verwendung von Funktion A und 200, und niemand weiß, warum es so ist ... </li><li>  <i>Es gibt keine Programmierer, die sich entwickeln möchten / könnten.</i>  Keine Kommentare. </li></ol><br><h3>  Geschäft verstehen </h3><br>  Geschäft zählt Geld.  Unternehmen möchten keine zusätzlichen finanziellen Ressourcen ausgeben, um das zu wiederholen, was bereits funktioniert.  Ein Unternehmen wird niemals die Idee kaufen: „Ich werde es auf eine neue Art und Weise tun, weil es mir nicht gefällt.“  Bieten Sie deshalb immer mehr an. <br><br>  Oft treiben Entwickler das Geschäft zu nutzlosen Ideen.  Bei dieser Gelegenheit gibt es einen separaten „Fund of Golden Quotes“. <br><br><ul><li>  <i>Wir stellen ein neues Team für das hochwertige „Sägen“ des Codes ein.</i>  Das heißt, wir brauchen ein Team von Spezialisten, die das Projekt parallel zum bestehenden Team durchführen.  Nicht die Tatsache, dass das Ergebnis anders sein wird, aber das Geschäft sollte bereits zwei Projekte enthalten. </li><li>  <i>Wir hören auf, Funktionen hinzuzufügen, jetzt nur noch Refactoring!</i>  Offiziell erklären Sie dem Geschäft: Absolutes Tabu in Bezug auf Funktionen, es ist nur möglich, "Dinge in Ordnung zu bringen".  Inoffiziell sagten Sie, dass es keine umfangreichen Verbesserungen und Verbesserungen am Projekt geben wird, sondern nur lokal „reparieren“ wird. </li><li>  <i>Ich habe bereits alles, was ich in WP brauche. Ich muss nur die Datenbank migrieren.</i>  Dies ist ein „Symptom“ eines Anfängers.  Junis Lieblingslied: Es ist eine so einfache Seite, dass es nur ein oder zwei Stunden funktioniert ... </li></ul><br>  Um mit dem Unternehmen über die Reinkarnation eines veralteten Codes zu verhandeln, der unter der Sauce neuer profitabler Funktionen bereitgestellt wird, ist es aus der Position heraus erforderlich, neue Geschäftshorizonte zu eröffnen.  Vor den Verhandlungen müssen jedoch folgende Fragen beantwortet werden: <br><br><ol><li>  <b>Ist das Geschäft bereit zu wachsen?</b>  Sie müssen verstehen: Hat das Unternehmen eine Anfrage zur Erhöhung des Finanzstandards oder benötigt es nur den Service, um kompetenter zu arbeiten? </li><li>  <b>Prototypenstadium?</b>  Oft bestellt ein Unternehmen einen einfachen Prototyp, mit dem es den Markt zum Zeitpunkt der Relevanz des Produkts „untersuchen“ möchte.  Und nur wenn er anfängt, Geld zu verdienen, ist das Unternehmen bereit, die Funktion zu einem fortschrittlicheren und vollständigeren Projekt zu entwickeln. </li><li>  <b>Entwicklung abgeschlossen und jetzt nur noch Unterstützung?</b>  Es ist wichtig, alle Aufgaben zu verstehen. </li><li>  <b>Gibt es genug Feuer in unseren Augen und wird es nicht ausgehen?</b>  Das Projekt sollte inspirieren, nicht demotivieren.  Es ist sehr wichtig, dass Ihr Team sich an der Reinkarnation von Legacy beteiligen möchte, da sich die Leute sonst allmählich in interessantere Projekte für sie zerstreuen. </li><li>  <b>Gibt es einen Architekten?</b>  Dies ist die wichtigste Frage: Haben Sie eine Person, die die richtige Architektur erstellen und bereits guten Code schreiben kann?  Es macht keinen Sinn, überhaupt zu versuchen, anzufangen, wenn es keinen Architekten gibt.  Andernfalls werden Sie in einer Woche derjenige, der das Problem-Erbe erstellt hat. </li></ol><br>  Wenn Sie Ideen an Unternehmen verkaufen, konzentrieren Sie sich auf die Nachrichten "Neu, Erstellen, Hinzufügen" ... Das Unternehmen reagiert sehr gut auf Angebote aus der Serie: "Wir machen Sie zu einer neuen Funktion und Projekt X wird schneller ..." und "Um die Conversion zu erhöhen, fügen Sie eine neue hinzu ..." ” <br><br><h3>  P - Planung </h3><br>  Um schnell und effizient mit technischen Schulden arbeiten zu können, benötigen Sie einen Plan. <br><br>  1. <i>Definition von Aufgaben, bei denen wir parasitieren werden.</i>  Warum parasitieren?  Es kommt oft vor: Wir haben ein Feature verkauft und damit teilweise Refactoring. <br><br>  2. <i>Definition von Anforderungen auf hoher Ebene.</i>  Es ist notwendig, eine eindeutige Geschäftsanfrage für einen „hohen Standard“ zu registrieren, um die korrekte Dokumentation zu erstellen. <br><br>  3. <i>Definition der Hauptmodule des Systems, Auferlegung von Modulen.</i>  Bevor Sie mit dem Refactoring beginnen, müssen Sie die Hauptmodule des Systems verstehen: Wo, wie, was und mit was kann der Code interagieren und in Abschnitte unterteilen. <br><br>  4. <i>Definition der Integration.</i>  Wenn wir ein bestimmtes Modul erstellen, müssen wir im Voraus darüber nachdenken, ob es in ein benachbartes Erbe eingebunden werden kann. <br><br>  5. <i>Teamdefinition.</i>  Einer im Refactoring-Bereich ist kein Krieger.  Team ist ein sehr wichtiges Element für ein erfolgreiches Ergebnis.  Leidenschaft, Teamgeist und exzellente Interaktion zwischen den Teilnehmern des Must-Have-Prozesses. <br><br>  6. <i>Wie werden wir testen?</i>  Wenn Sie ein qualitativ hochwertiges Projekt durchführen möchten, müssen Sie vorausdenken und Produkttests durchführen. <br><br>  Neben dem oben Gesagten ist es auch wichtig, das gewünschte Endergebnis zu bestimmen, einen Skalierungsplan zu erstellen und die Engpässe des Projekts zu registrieren.  Im Fall der Codeskalierung ist es beispielsweise wichtig zu verstehen, wo unter Hochlastbedingungen möglicherweise Probleme auftreten können (es kann sich um eine Datenbank, umfangreiche Abfragen, ein Raster oder eine andere Zwischenverbindung handeln, die „ausfallen“ kann). <cut></cut><br><br>  Ebenso wichtig ist es, die Grenzen des Projekts zu bestimmen, wo es den alten Code gab und wo es eine neue Ebene des „Meisterwerks“ geben wird.  Sie sollten auch Ansätze für Microservices oder DDD in Betracht ziehen, oder Sie benötigen möglicherweise etwas mehr „Nanomagie“. <br><br><h3>  Ninja Legacy-Techniken </h3><br>  Nach der „Vorarbeit“ kommen wir zu den Techniken, die den Prozess des Sparens technischer Schulden erleichtern.  Ein universelles Rezept und Allheilmittel für alle Krankheiten in Legacy gibt es nicht, aber im Verlauf der Arbeit an Hochlastprojekten habe ich eine Liste von Zutaten erstellt, mit denen Sie einen wirklich „leckeren“ Code erstellen können. <br><br>  1. <b>Das Rad nicht neu erfinden.</b>  Für mich ist dies der wichtigste Hack im Leben, um Code zu schreiben.  Alles wurde vor Ihnen erfunden. Tanzen Sie nicht mit Tamburinen und anderen Experimenten, um Probleme mit Legacy-Code zu lösen. <br><br>  2. <b>Der Code ist Standard.</b>  Ohne einen einzigen Standard schreibt jeder Entwickler auf seine eigene Weise.  "Author's Style" wird zum Chaos beitragen und noch mehr Code-Müll verursachen. <br><br>  3. <b>Codeüberprüfung.</b>  Nicht nur eine Präsenz des Codestandards.  Es ist auch notwendig, dass das Team für die Überprüfung verantwortlich war.  Andernfalls kehrt alles zum Normalzustand zurück, dh zur Ebene des alten Codes. <br><br>  4. <b>Static Code-Analysatoren, PHP-Messdetektor usw. (anstelle von tausend Büchern)</b> .  Diese und andere automatische Techniken werden benötigt, um den Prozess zu beschleunigen, insbesondere mit demselben Überprüfungscode. <br><br>  5. <b>Wir versuchen Microservices.</b>  Separat kann es auch Module oder Bibliotheken geben.  Warum Microservices?  Ihr Vorteil besteht darin, die Logik so weit wie möglich zu isolieren und auf eine bestimmte API zu beschränken.  Letzteres hat den Vorteil, dass die API im Vergleich zum „Adapter im Code, der repariert werden kann“ eine monolithischere Einheit ist.  Die API hat jedoch einen Nachteil in Form zusätzlicher Netzwerkkosten. <cut></cut><br><br>  6. <b>Datenbankarchitektur, Datenquellen.</b>  Es ist die Datenbank, die ich als den ersten Engpass eines Vermächtnisses betrachte.  Aber jeder entwirft, wie er will, und selbst in SQL können Sie unkonzentrierte Fehler finden.  Hier einige Tipps zum Arbeiten mit der neuen Datenbank: <br><br><ul><li>  <i>Scheiß auf nichts, Durst nach allem.</i>  Wenn Sie die alte falsche Datenstruktur schneller und produktiver in ein neues Datenformat ändern möchten, haben Sie zwei Möglichkeiten.  Die erste besteht darin, eine neue Basis einzurichten und die alte vollständig zu entfernen, und was auch immer passiert.  Die zweite - im Falle eines harten Erbes - führen Sie parallel ein neues Format ein.  Im übertragenen Sinne, um einen neuen in der Nähe eines alten Baumes zu pflanzen.  Warum ist der zweite Weg gerechtfertigt und vielversprechender?  Da alles Neue effizient funktioniert und Probleme während der Bereitstellung oder in der Integrationsphase auftreten, können Sie den Code einfach zurücksetzen, und es ist nicht erforderlich, alle komplexen Datenbankmigrationen zurückzusetzen. </li><li>  <i>Eine neue Datenbank wird in der richtigen Struktur erstellt.</i>  Beim Erstellen einer neuen Ressource ist es wichtig, die Stellen zu steuern, an denen wir die neue Struktur schreiben.  Parallel dazu ist es notwendig, Unterstützung für die alte Struktur zu schaffen, da es unpraktisch ist, sie vollständig loszuwerden.  Das heißt, wir schreiben weiterhin neues Material und unterstützen gleichzeitig die alte Vorlage, in die wir alles Neue übersetzen, und lassen damit auch die alte arbeiten - wie auf die alte Art, aber die neue Struktur. </li><li>  <i>Wir kontrollieren die gesamte Aufnahme.</i>  Wir verpassen nicht die Details aus dem Bereich der Aufmerksamkeit, um die Unterstützung der Datenbank zu gewährleisten. </li></ul><br>  7. <b>Aber SQL?</b>  Wenn Sie aus architektonischer Sicht mit Entitäten arbeiten können - arbeiten Sie.  Das Konzept von etwas Bestimmtem und Endlichem hilft Ihnen dabei, keine unnötigen, doppelten Beziehungen zu erstellen. <cut></cut><br><br>  8. <b>Dekorateure, Adapter, Picks ...</b> Diese Muster sind eines der wichtigsten für die Integration des neuen Codes in das alte Erbe. <br><br>  9. <b>Plan B oder Rollback-Plan für die Integration.</b>  Viele machen den Fehler, es zu vergessen.  Es ist wichtig in der Situation, „wenn etwas schief geht“, wenn neues Material eingegossen wird.  Das heißt, sobald wir mit dem Aufbau der Architektur beginnen, sollten wir bereits in diesem Stadium verstehen, wie wir sie im Falle eines Fehlers zurücksetzen werden. <br><br>  10. <b>Ein neuer Code ohne (Dock-) Tests wird in einer Woche zum Vermächtnis.</b>  Egal wie schön Ihr Code wäre, ohne Dokumentation in einer Woche befindet er sich im Status "Legacy" - aufgrund seiner Unverständlichkeit. <br><br>  11. <b>Testen.</b>  Wenn Unit-Tests zu teuer sind, verwenden wir Rauch-, Funktions- und Integrationstests.  Wie realistisch ist es, Unit-Tests an ein Unternehmen mit Sauce zu verkaufen, um „einen Job schön zu machen“?  In unserer Realität ist dies eher eine Seltenheit als ein Muster.  Wenn es aus irgendeinem Grund mit „Einheiten“ nicht funktioniert, wenden wir uns Rauch-, Funktions- oder Integrationstests zu und vergessen auch nicht, dass wir die Aufgabe beispielsweise an einen manuellen Tester delegieren können. <br><br><h3>  Anstelle eines Nachworts </h3><br>  Das Wichtigste in dieser Geschichte ist, die Arbeit zu erledigen und nicht das Erbe von 6 problematischen Phasen (in der Reihenfolge von einfach bis komplex aufgelistet) zurückzulassen: <br><br><ul><li>  Keine technische Dokumentation </li><li>  Keine Geschäftsdokumentation </li><li>  Es gibt niemanden, der dies entwickelt hat </li><li>  Wir wissen nicht, was der Benutzer erhalten soll. </li><li>  200 + Nutzung jeder Funktion und sie heißen getA () </li><li>  Es gibt niemanden, der dies entwickeln möchte / könnte. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431562/">https://habr.com/ru/post/de431562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431550/index.html">Film Injection Moulding (IMD): Wie es funktioniert</a></li>
<li><a href="../de431554/index.html">Facebook wie Zähler von einem alten Stromzähler</a></li>
<li><a href="../de431556/index.html">Sidenis über die Zusammenarbeit mit Versicherungsunternehmen, agiles Coaching und verbotene Technologien</a></li>
<li><a href="../de431558/index.html">Wenn man eine Programmiersprache des 21. Jahrhunderts erfindet</a></li>
<li><a href="../de431560/index.html">Zugriff auf SS7-Signalisierungsnetzwerke über das Funksubsystem - jetzt ist es möglich</a></li>
<li><a href="../de431564/index.html">Größter Fehler in der Geschichte der Physik</a></li>
<li><a href="../de431566/index.html">MEMS-Beschleunigungsmesser und Gyroskope - Verstehen der Spezifikationen</a></li>
<li><a href="../de431568/index.html">Fintech Digest: Telefon bezahlen, Geldautomaten erneut angreifen, Institutionalisierung der Kryptosphäre</a></li>
<li><a href="../de431570/index.html">Studie zur Sicherheit von Parkgebühren</a></li>
<li><a href="../de431572/index.html">So schreiben Sie funktionale Anforderungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>