<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüè≠ üõµ üï¥üèº VPN para dispositivos m√≥viles a nivel de red üë®üèª‚Äçüé§ üßìüèª üßòüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todav√≠a hay sorprendentemente poco material en Runet sobre una tecnolog√≠a tan antigua y simple, pero conveniente, segura y especialmente relevante en ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VPN para dispositivos m√≥viles a nivel de red</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444946/">  Todav√≠a hay sorprendentemente poco material en Runet sobre una tecnolog√≠a tan antigua y simple, pero conveniente, segura y especialmente relevante en relaci√≥n con el desarrollo de Internet de las cosas, como la VPN m√≥vil (red privada virtual).  En este art√≠culo, describir√© c√≥mo y por qu√© puede configurar el acceso a su red privada a cualquier dispositivo con una tarjeta SIM sin la necesidad de configurar un software especializado en ella. <br><img src="https://habrastorage.org/webt/vn/it/qi/vnitqitwtv8qnzwhufihgww6h0g.png"><br><a name="habracut"></a><br><h2>  Tareas y limitaciones </h2><br>  Para empezar, responder√© la pregunta "¬øpor qu√©?".  La VPN como tecnolog√≠a se utiliza para resolver una variedad de problemas de red, unidos por una caracter√≠stica com√∫n: la transferencia aislada de datos entre dos dispositivos a trav√©s de una gran cantidad de nodos intermedios.  En base a esto, ya se est√°n construyendo soluciones m√°s complejas y se est√°n resolviendo las tareas muy diferentes.  En el caso habitual que es habitual para todos, se utiliza una red de operador de l√≠nea fija para construir una VPN (hay un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">excelente material para</a> aquellos que lo deseen) o muchos protocolos de red diferentes (GRE, IPSec, L2TP y otros, el mismo autor al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">respecto</a> ) y los productos de software que trabajan con ellos (Cisco AnyConnect, OpenVPN, TOR (bueno, usted mismo lo sabe), pero su uso en un dispositivo terminal espec√≠fico plantea de inmediato una serie de requisitos, cuyo incumplimiento conlleva ciertas restricciones. <br><br>  La primera limitaci√≥n seria es que el dispositivo debe poder trabajar con al menos uno de estos protocolos a nivel de hardware y software.  Esto suele estar determinado por un software que es f√°cil de encontrar para una computadora port√°til o tel√©fono inteligente, pero hay casos en los que la tarea se enfrenta a un dispositivo que es demasiado simple desde el punto de vista del hardware, o su software tiene limitaciones: el medidor de agua quiere usar una VPN para transmitir su desafortunado byte de lecturas una vez al mes, no menos de lo que desea usar una VPN para editar su perfil de LinkedIn. <br><br>  Otra limitaci√≥n importante es la necesidad de personalizaci√≥n.  Funciona tanto para dispositivos "est√∫pidos" del primer p√°rrafo como para tel√©fonos inteligentes y computadoras cl√°sicos para los que se desconoce la restricci√≥n anterior.  Y si con el primero todo es relativamente simple y depende de la cantidad de tiempo dedicado a la configuraci√≥n, entonces con el √∫ltimo hay opciones.  A menudo, las organizaciones usan VPN con fines de seguridad para proteger el terminal de servicio del acceso a la red p√∫blica sin la protecci√≥n corporativa adecuada o de la transferencia de datos del servicio a trav√©s de canales p√∫blicos.  Sin embargo, los usuarios finales pueden, por alguna raz√≥n, desconectarse u olvidarse de habilitar VPN, como resultado de lo cual muchos de los sistemas de seguridad de la compa√±√≠a pueden quedar atr√°s. <br><br>  Ambas restricciones pueden eliminarse f√°cilmente si se proporciona acceso a la VPN a nivel de red.  En el caso de las comunicaciones m√≥viles, esto se puede implementar utilizando la "VPN m√≥vil".  Un dispositivo de cualquier complejidad capaz de transmitir datos lo transmitir√° a la red correcta.  No importa qu√© ajustes se realicen en el dispositivo, si la red est√° configurada correctamente, en cualquier caso los transferir√° a donde desee y a ning√∫n otro lugar. <br><br>  Y como una buena ventaja, el dispositivo recibir√° una direcci√≥n de la red interna, configurada de forma remota, y el acceso a ella solo ser√° posible desde esta red (o f√≠sicamente).  Para una cierta clase de dispositivos, esto es muy importante. <br><br><h2>  Como funciona </h2><br><h3>  PS Core </h3><br>  Parece que VPN es un servicio cl√°sico de todos los operadores de telecomunicaciones para el segmento B2B, y ¬øpor qu√©, entonces, centrarse en esto?  La cuesti√≥n es c√≥mo se organiza la red de datos para dispositivos conectados a trav√©s de GPRS, HSPA, LTE u otra tecnolog√≠a de comunicaci√≥n m√≥vil.  No hay un vlan familiar para todos los administradores de red, no hay conmutadores, ni siquiera hay enrutadores en su significado habitual.  Pero hay una red de acceso de radio (RAN) y un n√∫cleo de paquetes (PS Core). <br><br><img src="https://habrastorage.org/webt/_d/yn/mx/_dynmxtvymlk1yu5fwschjzwlsa.png"><br>  <i>Un diagrama simplificado de una red de paquetes de un operador m√≥vil.</i>  <i>Es ligeramente diferente para LTE, pero el significado general sigue siendo el mismo.</i> <br><br>  En general, cada dispositivo con una tarjeta SIM registrada en la red de paquetes (despu√©s de haber pasado el procedimiento de conexi√≥n GPRS o similar), antes de comenzar a transferir datos en alg√∫n lugar, debe iniciar la creaci√≥n de una sesi√≥n de transferencia de datos (contexto PDP) en el enrutador central de la red de paquetes, GGSN .  Los detalles y el prop√≥sito de estos procesos se describen muy bien aqu√≠ en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este art√≠culo</a> .  Lo que es importante para nosotros: al iniciar una sesi√≥n, la solicitud a GGSN, entre otros, incluye par√°metros que muchos vieron en sus tel√©fonos o incluso abordaron al configurar, por ejemplo, m√≥dems usb.  Estos son tres campos: APN, inicio de sesi√≥n y contrase√±a.  El APN (punto de acceso) es una entidad muy importante en la l√≥gica del GGSN: dependiendo del APN con el que se inicia la sesi√≥n, el GGSN act√∫a de diferentes maneras.  Como resultado del procesamiento exitoso de una solicitud de usuario, el GGSN debe activar una sesi√≥n de transferencia de datos e informar al dispositivo de sus par√°metros, en particular, la direcci√≥n IP y las direcciones DNS dadas al dispositivo.  Hay una serie de caracter√≠sticas importantes muy importantes: <br><br><ul><li>  En una solicitud para iniciar una sesi√≥n, el dispositivo nunca pregunta qu√© direcci√≥n IP le gustar√≠a recibir; </li><li>  Adem√°s de los campos "APN", "inicio de sesi√≥n" y "contrase√±a" especificados en la configuraci√≥n del dispositivo, la solicitud a GGSN tambi√©n transfiere el n√∫mero de tel√©fono (MSISDN) del suscriptor (en adelante "suscriptor" es el usuario final, un dispositivo con una tarjeta SIM, y "Cliente": la organizaci√≥n-cliente del servicio, que incluye suscriptores); </li><li>  Cuando se activa una sesi√≥n, GGSN crea un registro de la nueva direcci√≥n IP en su tabla de enrutamiento.  Todos los suscriptores en el GGSN se indican mediante entradas en la tabla de enrutamiento con el prefijo / 32, es decir  1 suscriptor - 1 entrada en la tabla.  GGSN es un enrutador muy productivo; </li><li>  La red de un operador puede en diferentes etapas (tanto en SGSN como en GGSN) cambiar el campo APN por varias razones en una solicitud para iniciar una sesi√≥n.  Esto permite en algunos casos reducir y, en algunos casos, excluir por completo la configuraci√≥n de red en dispositivos con una tarjeta SIM. </li></ul><br>  En los primeros tres puntos, surge la pregunta inmediata: ¬øqu√© tipo de direcci√≥n IP se emite al suscriptor? <br>  Esto est√° determinado por la configuraci√≥n del APN con el que lleg√≥ la solicitud para activar la sesi√≥n.  Alrededor del 99% de los usuarios de datos m√≥viles utilizan el acceso regular a Internet.  Estos son internet.mts.ru, internet.beeline.ru, etc., puntos de acceso conocidos.  En el caso del acceso a Internet, GGSN emite direcciones de acuerdo con el principio cl√°sico de DHCP desde las subredes grises especificadas en la configuraci√≥n.  Al acceder a la red p√∫blica, est√°n cerrados por el NAT cl√°sico (o m√°s bien, por su versi√≥n, que es PAT). <br><br>  Pero GGSN es capaz de m√°s.  Para seleccionar una direcci√≥n IP, puede hacer una solicitud AAA al servidor de autorizaci√≥n (Radius, por ejemplo).  Esta l√≥gica est√° configurada para APN individuales dependiendo de su prop√≥sito.  El caso m√°s simple es el servicio de proporcionar una direcci√≥n IP p√∫blica permanente.  Tales direcciones, por regla general, se asignan a los suscriptores en la facturaci√≥n del operador (BSS) y, seg√∫n la arquitectura de TI, terminan en una base de datos particular, a la que se accede mediante la solicitud GGSN.  Debido al hecho de que conoce el MSISDN (n√∫mero de tel√©fono) del suscriptor, que se incluir√° en la solicitud, dicha base de datos ser√° bastante simple y puede contener solo un mont√≥n de n√∫meros y direcciones.  Adem√°s, si el cliente planea usar una tarjeta SIM para conectar varios dispositivos (si la tarjeta SIM se encuentra en el enrutador WiFi de la oficina remota, por ejemplo), esta tabla tambi√©n puede contener la llamada "ruta enmarcada": el prefijo de red ubicado " para "una tarjeta SIM, que se anunciar√° a todos los dispositivos de la red mediante protocolos de enrutamiento din√°mico. <br><br><h3>  Ni un solo GGSN </h3><br>  Adem√°s de emitir direcciones, tambi√©n es necesario entregar tr√°fico de suscriptores a las redes de los clientes, cada una por su cuenta.  Aqu√≠ todo funciona mucho m√°s tradicionalmente.  En GGSN, el tr√°fico especializado para trabajar con VPN APN se enruta a un enrutador separado de la red del operador (se le puede llamar de manera diferente, a veces es un enrutador VPN), que a su vez realiza la funci√≥n de un PE cl√°sico en el esquema L3VPN.  Agrega las etiquetas, encabezados necesarios, y eso es todo, y env√≠a todo este flujo de tr√°fico a trav√©s de los enrutadores de la red de transporte a las juntas o t√∫neles preconfigurados a la red del cliente.  Esta parte ya es mucho m√°s tradicional y muchas veces se describe en otra parte, por lo que no me centrar√© en ella en este material. <br><br>  Teniendo en cuenta todos estos detalles, puede haber varias formas de organizar una VPN m√≥vil, y ser√°n diferentes entre s√≠ por una combinaci√≥n de las siguientes caracter√≠sticas: <br><br><ul><li>  Las direcciones IP, como ya se describi√≥, se pueden emitir din√°micamente (cada vez que una direcci√≥n diferente de una subred dada) y est√°ticamente (cada vez la misma direcci√≥n para un suscriptor en particular), que se determina por ambas / o las configuraciones APN y / o las configuraciones del servidor Radius ; </li><li>  Las direcciones IP pueden ser emitidas por un servidor Radius bajo el control del operador o bajo el control del cliente; </li><li>  Los dispositivos conectados a una VPN m√≥vil pueden interactuar solo entre s√≠ o tener acceso a una red de cliente L3VPN normal a trav√©s de una interfaz directa (puerto VPN) con un operador o mediante t√∫neles a trav√©s de Internet; </li><li>  En algunos casos, puede ser necesario utilizar un nombre de usuario y una contrase√±a para activar una sesi√≥n con √©xito, y a veces ni siquiera es necesario completar el campo "APN". </li></ul><br>  Hay varias docenas de combinaciones de este tipo con diferentes tipos de t√∫neles, equilibrando el tr√°fico entre los canales de acceso al cliente VPN "principal" y el principio de emisi√≥n de direcciones.  Para la mayor√≠a de los casos, el esquema general es el siguiente: <br><br><img src="https://habrastorage.org/webt/47/ez/7d/47ez7dugxs7whtjaghvrapuihcs.png"><br><br>  Como resultado, despu√©s de un proceso bastante r√°pido de registrarse en la red y obtener una direcci√≥n IP, el dispositivo obtiene acceso a la red del cliente, y la red del cliente obtiene acceso al dispositivo.  Al mismo tiempo, el suscriptor est√° aislado de todos los dem√°s suscriptores del operador que no est√°n relacionados con un cliente en particular, no necesita ninguna configuraci√≥n adicional y todo el tr√°fico se env√≠a a la red del cliente sin otra alternativa, donde se procesa de acuerdo con las pol√≠ticas internas del cliente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/444946/">https://habr.com/ru/post/444946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444936/index.html">Firmware ZXHN H118N de Dom.ru sin soldador y programador</a></li>
<li><a href="../444938/index.html">Servicios √∫tiles y poco p√∫blicos.</a></li>
<li><a href="../444940/index.html">Consejos y trucos forenses digitales: c√≥mo conectar una imagen Encase a la m√°quina virtual</a></li>
<li><a href="../444942/index.html">Cuando visit√© la legendaria Escuela 42: "piscina", gatos e Internet en lugar de maestros</a></li>
<li><a href="../444944/index.html">Cuando visit√© la legendaria Escuela 42: "piscina", gatos e Internet en lugar de maestros. Parte 2</a></li>
<li><a href="../444950/index.html">Termux paso a paso (Parte 1)</a></li>
<li><a href="../444954/index.html">Revisi√≥n de sistemas abiertos de gesti√≥n de video</a></li>
<li><a href="../444956/index.html">Para trabajar en bicicleta. Otra opinion</a></li>
<li><a href="../444958/index.html">Compre un dispositivo electr√≥nico y obtenga los datos de forma gratuita: la informaci√≥n personal permanece en los dispositivos donados</a></li>
<li><a href="../444960/index.html">Llame al espacio profundo: c√≥mo la NASA acelera la comunicaci√≥n interplanetaria</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>