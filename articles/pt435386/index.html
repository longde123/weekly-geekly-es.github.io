<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÆ üíÉüèΩ üå± Como compartilhar arquitetura e implementa√ß√£o sem brigar ü§õüèø üíª üì¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Criar um novo sistema √© um processo de v√°rias etapas: elabora√ß√£o do conceito e design, design da arquitetura, implementa√ß√£o, teste e libera√ß√£o. O desi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como compartilhar arquitetura e implementa√ß√£o sem brigar</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435386/"><p>  Criar um novo sistema √© um processo de v√°rias etapas: elabora√ß√£o do conceito e design, design da arquitetura, implementa√ß√£o, teste e libera√ß√£o.  O design e a implementa√ß√£o da arquitetura s√£o os est√°gios com os quais os desenvolvedores se preocupam principalmente. </p><br><p>  A maioria dos desenvolvedores gosta de se engajar na arquitetura, pensar em como o sistema ou parte dele ser√° organizado do zero.  Se algu√©m que pensou na arquitetura do sistema e a implementou, n√£o h√° problemas de motiva√ß√£o: o programador ficar√° satisfeito com a realiza√ß√£o de suas id√©ias.  Mas se um pensou em arquitetura e outro se engajou na implementa√ß√£o, ent√£o o √∫ltimo pode ter uma indigna√ß√£o natural: eles pensaram em tudo para mim, mas posso fazer o que est√° escrito? </p><br><p><img src="https://habrastorage.org/webt/vj/ii/ox/vjiioxfop6iqofh1irlgn_kuueo.jpeg"></p><br><p>  Como evitar tais situa√ß√µes, por que a implementa√ß√£o n√£o pode ser menos interessante que a elabora√ß√£o da arquitetura e, √†s vezes, mais, ser√° discutida neste artigo. </p><a name="habracut"></a><br><h1 id="vvedenie">  1. Introdu√ß√£o </h1><br><p>  Uma arquitetura bem pensada pode ser usada como base para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tarefas de detalhamento</a> : a implementa√ß√£o de cada componente suficientemente separado se torna uma subtarefa separada. </p><br><p>  Por exemplo, se houver um pipeline de processamento de consultas projetado no estilo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pipes e filtros</a> , as subtarefas ser√£o a implementa√ß√£o de etapas individuais de processamento (cada etapa possui sua pr√≥pria subtarefa) e outra subtarefa para conectar todas as etapas. </p><br><p>  Embora uma arquitetura bem planejada e a divis√£o em subtarefas tenham uma id√©ia geral de como criar um sistema e permitir que voc√™ avalie os custos de m√£o-de-obra, eles n√£o s√£o suficientes para implementar o plano.  A descri√ß√£o da subtarefa dir√° o que o componente deve fazer, pode conter requisitos para velocidade e consumo de mem√≥ria, mas n√£o fornecer√° instru√ß√µes abrangentes sobre como faz√™-lo. </p><br><p>  O fato √© que existem muitas op√ß√µes para criar um componente que atenda aos requisitos especificados.  Depende muito de como ser√° implementado: flexibilidade de c√≥digo, extensibilidade, facilidade de suporte etc.  Chegamos perto do conceito <em>de design de c√≥digo</em> . </p><br><h1 id="koncepciya-dizayna-koda">  C√≥digo Design Concept </h1><br><p>  √Äs vezes, o design de c√≥digo √© chamado de arquitetura ou organiza√ß√£o de c√≥digo, √†s vezes at√© apenas arquitetura.  Eu mantenho o termo <em>design de c√≥digo</em> porque ele o contrasta com a arquitetura do sistema e tra√ßa uma linha clara entre eles.  Para ser mais espec√≠fico, considere um exemplo. </p><br><p>  Digamos que estamos desenvolvendo o back-end de um site que est√° ganhando popularidade.  O n√∫mero de servidores j√° excedeu v√°rias dezenas, o p√∫blico est√° crescendo e decidimos que queremos coletar an√°lises sobre o comportamento do usu√°rio no site: popularidade das p√°ginas de visita, frequ√™ncia de uso dos recursos, dependendo do perfil do usu√°rio etc. </p><br><p>  Surgem v√°rias quest√µes arquiteturais e tecnol√≥gicas: onde armazenar m√©tricas, como transferi-las pela rede, o que fazer se o armazenamento de m√©tricas n√£o estiver dispon√≠vel, como o servi√ßo de back-end registrar√° m√©tricas etc.  A arquitetura s√≥ precisa responder a essas perguntas, determinar os componentes da solu√ß√£o e definir requisitos para elas. </p><br><p>  Suponha que desenvolvamos uma arquitetura: usaremos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">InfluxDB</a> como armazenamento, transferiremos m√©tricas pela rede usando UDP para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">telegraf</a> e, para contornar a inacessibilidade do armazenamento, armazenaremos as m√©tricas no Kafka replicadas em v√°rios servidores.  Todas as m√©tricas seguir√£o o caminho do servi√ßo de back-end -&gt; telegraf -&gt; Kafka -&gt; InfluxDB.  Para escrever as m√©tricas, o back-end decidiu escrever um m√≥dulo que implementa a fun√ß√£o de transfer√™ncia de m√©tricas no telegraf usando UDP. </p><br><p>  O m√≥dulo para registrar m√©tricas √© um componente separado do sistema, sua escrita √© uma subtarefa separada que pode ser confiada ao desenvolvedor.  Essa subtarefa tem muitas solu√ß√µes e perguntas que precisam ser respondidas: as m√©tricas ser√£o enviadas de forma s√≠ncrona ou ass√≠ncrona;  como o acesso simult√¢neo de v√°rios segmentos de back-end ser√° sincronizado, quais ser√£o as principais classes / fun√ß√µes. </p><br><p>  Essas perguntas est√£o al√©m da descri√ß√£o da arquitetura da solu√ß√£o, mas as respostas para elas t√™m consequ√™ncias de longo alcance.  Por exemplo, se durante a opera√ß√£o de uma solu√ß√£o ficar claro que a pilha de tecnologia n√£o √© √≥tima e voc√™ precisar substituir o telegraf por uma solu√ß√£o alternativa, a divis√£o incorreta do m√≥dulo em classes n√£o permitir√° isso sem reescrever o m√≥dulo inteiro.  As respostas para essas perguntas s√£o o <strong>dom√≠nio do design de c√≥digo</strong> . </p><br><p>  <strong>O desenvolvimento do design de c√≥digo √© um est√°gio de design separado</strong> , que fica entre o desenvolvimento da arquitetura do sistema e a codifica√ß√£o.  Desenhar uma linha entre arquitetura e design de c√≥digo permite projetar um sistema sem considerar todos os detalhes e avaliar os custos de m√£o-de-obra em um tempo limitado.  Por outro lado, destacar o desenvolvimento do design de c√≥digo como um est√°gio de implementa√ß√£o separado permite aumentar a qualidade da implementa√ß√£o do sistema, reduzir o custo de outras melhorias e aumentar a facilidade de suporte. </p><br><p>  A necessidade de refletir sobre o design do c√≥digo no est√°gio de implementa√ß√£o antes da codifica√ß√£o <strong>torna a implementa√ß√£o interessante</strong> : as tarefas de projetar um design de c√≥digo podem n√£o ser menos interessantes do que projetar um sistema inteiro no n√≠vel da arquitetura.  Essa id√©ia foi expressa por Brooks no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≠tico homem-m√™s</a> . </p><br><p>  Obviamente, tra√ßar uma linha entre arquitetura e design de c√≥digo pode n√£o ser t√£o f√°cil, vamos dar uma olhada mais de perto nesta quest√£o. </p><br><h1 id="granica-mezhdu-arhitekturoy-i-dizaynom-koda">  A fronteira entre arquitetura e design de c√≥digo </h1><br><p>  Ideologicamente, arquitetura e design de c√≥digo est√£o em diferentes n√≠veis de design: a arquitetura √© pensada no est√°gio inicial, quando h√° pouca certeza, e pensar sobre o design de c√≥digo adiciona detalhes.  Assim, eles s√£o executados em diferentes momentos: a arquitetura est√° mais pr√≥xima do in√≠cio e o design do c√≥digo durante a implementa√ß√£o das subtarefas. </p><br><p>  O estabelecimento de um limite entre esses dois est√°gios do design depende de v√°rios fatores, eis os principais: </p><br><ul><li>  O grau em que o componente afeta o sistema.  √Äs vezes, o dispositivo de todo o sistema pode depender significativamente do dispositivo de seu componente individual.  Nesse caso, voc√™ precisa projetar o componente no est√°gio de desenvolvimento arquitetural, e n√£o no est√°gio de implementa√ß√£o. </li><li>  A presen√ßa de uma interface clara para o componente.  √â poss√≠vel isolar o design de um componente como uma subtarefa apenas se estiver claramente definido o que esse componente deve fazer e como ele ir√° interagir com o restante do sistema. </li><li>  Estimativas realistas do esfor√ßo para concluir a subtarefa.  A tarefa pode ser muito grande para poder avaliar os custos de m√£o-de-obra com precis√£o suficiente.  Nesse caso, √© melhor projetar a tarefa com mais detalhes e dividi-la em suas pr√≥prias subtarefas para fornecer uma avalia√ß√£o mais adequada dos custos de m√£o-de-obra. </li></ul><br><p>  Existem v√°rios casos especiais em que voc√™ pode tra√ßar uma boa linha entre o projeto de arquitetura e o design de c√≥digo. </p><br><p>  <strong>O componente tem uma API estrita.</strong> <br>  Por exemplo, na minha pr√°tica, havia uma tarefa: implementar em cima de uma API de soquete UNIX para capturar / liberar recursos do sistema operacional usados ‚Äã‚Äãpor um daemon existente.  Essa tarefa surgiu dentro da estrutura da arquitetura escolhida para o novo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recurso √©pico</a> .  Dentro da estrutura da arquitetura, era bastante alto o n√≠vel de descri√ß√£o da API, e o design detalhado foi feito posteriormente, durante a implementa√ß√£o. </p><br><p>  <strong>M√≥dulo / classe com uma determinada interface</strong> <br>  A maneira mais f√°cil de delegar o design de uma parte de um sistema monol√≠tico √© destacar um m√≥dulo ou classe, descrever sua interface e tarefas.  Um m√≥dulo alocado como uma subtarefa separada n√£o deve ser muito grande.  Por exemplo, a biblioteca cliente para acesso ao banco de dados shard √©, sem d√∫vida, um m√≥dulo separado, mas ser√° dif√≠cil avaliar a tarefa de implementar essa biblioteca pelos custos de m√£o-de-obra sem um design mais detalhado.  Por outro lado, a tarefa de implementar uma classe muito pequena ser√° trivial.  Por exemplo, se a subtarefa "para implementar uma fun√ß√£o que verifica a exist√™ncia de uma determinada pasta por um determinado caminho" surgir, a arquitetura ser√° claramente pensada em muitos detalhes. </p><br><p>  <strong>Componente pequeno com requisitos fixos</strong> <br>  Se o componente for pequeno o suficiente e o problema resolvido for estritamente definido, os custos de m√£o-de-obra para a implementa√ß√£o poder√£o ser estimados com precis√£o suficiente, e a implementa√ß√£o do pr√≥prio componente deixar√° espa√ßo para o design.  Exemplo: um processo em execu√ß√£o em uma coroa e excluindo recursivamente arquivos e diret√≥rios antigos em um determinado caminho. </p><br><h1 id="antipatterny">  Antipatterns </h1><br><p>  Existem cen√°rios em que a distribui√ß√£o entre pensar sobre a arquitetura e a implementa√ß√£o n√£o est√° correta, alguns deles s√£o discutidos abaixo. </p><br><p>  <strong>Tudo foi projetado nos m√≠nimos detalhes.</strong> <br>  Diagramas UML detalhados foram constru√≠dos, a assinatura de cada m√©todo de cada classe foi especificada, os algoritmos para a implementa√ß√£o de m√©todos individuais foram descritos ... De acordo com uma descri√ß√£o t√£o detalhada, voc√™ pode implementar o sistema o mais r√°pido, realmente, porque tudo √© planejado com tantos detalhes que n√£o h√° espa√ßo para a criatividade, aceite-o e fa√ßa-o escrito.  Se o objetivo √© que o desenvolvedor codifique o que eles dizem para ele o mais r√°pido poss√≠vel, sim, voc√™ pode. </p><br><p>  No entanto, se voc√™ se aprofundar um pouco mais, ficar√° claro um n√∫mero de defici√™ncias na organiza√ß√£o do trabalho dessa maneira.  Primeiro, para projetar tudo com esses detalhes, voc√™ precisar√° gastar muito tempo no pr√≥prio design.  No que o desenvolvedor geralmente pensa antes da implementa√ß√£o, o arquiteto pensa nesse esquema: todo o design se aproxima do in√≠cio do projeto, o que pode aumentar sua dura√ß√£o.  Afinal, se voc√™ n√£o dividir o trabalho de design em partes, n√£o poder√° paralelizar.  Em segundo lugar, a falta de trabalho de design durante a implementa√ß√£o reduzir√° bastante a motiva√ß√£o dos desenvolvedores: fazer exatamente o que eles dizem pode ser √∫til para iniciantes, mas desenvolvedores experientes ficar√£o entediados.  Em terceiro lugar, essa abordagem geralmente pode reduzir a qualidade da produ√ß√£o: o sistema, que n√£o √© dividido em componentes suficientemente independentes, ser√° mais dif√≠cil de manter e expandir. </p><br><p>  <strong>A arquitetura √© sempre projetada por um desenvolvedor, o resto</strong> <del>  <strong>fumar de lado</strong> </del>  <strong>s√≥ percebe</strong> <br>  Primeiro de tudo, v√°rios casos devem ser observados quando isso pode ser √∫til.  Em primeiro lugar, √© uma equipe em que h√° muitos iniciantes e apenas um programador experiente.  Nesse caso, os iniciantes n√£o t√™m experi√™ncia suficiente para projetar a arquitetura para executar o trabalho com qualidade suficiente, enquanto, ao mesmo tempo, a implementa√ß√£o de uma arquitetura bem pensada os ajudar√° a aumentar seu n√≠vel.  Em segundo lugar, esses s√£o grandes projetos nos quais v√°rias equipes est√£o envolvidas.  Em seguida, o design da arquitetura do projeto √© dividido em dois n√≠veis: o arquiteto pensa nele como um todo e em cada equipe - a arquitetura dos componentes dentro de sua √°rea de responsabilidade. </p><br><p>  Mas considere uma equipe composta por especialistas suficientemente experientes.  Se as tarefas de arquitetura sempre ser√£o atribu√≠das a apenas um, digamos, o desenvolvedor mais experiente, outros desenvolvedores n√£o poder√£o revelar completamente seus recursos.  A arquitetura do sistema ser√° unilateral, porque todo mundo tem um conjunto de t√©cnicas que ele aplica.  Se diferentes desenvolvedores pensassem na arquitetura de diferentes componentes / subsistemas, isso facilitaria a troca de experi√™ncias e o desenvolvimento dos membros da equipe.  √Äs vezes, mesmo os membros da equipe n√£o muito experientes devem receber tarefas de arquitetura: isso aumentar√° seu n√≠vel e aumentar√° o envolvimento no projeto. </p><br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><p>  A presen√ßa do est√°gio de design na implementa√ß√£o √© o principal fator que torna as tarefas de implementa√ß√£o interessantes.  √â claro que existem outras: o uso de novas tecnologias, tarefas de pesquisa, mas, em regra, s√£o muito menos comuns.  Se as tarefas de implementa√ß√£o n√£o exigirem design e consistirem em codifica√ß√£o simples, isso afetar√° bastante a motiva√ß√£o dos desenvolvedores e n√£o permitir√° o uso de suas habilidades. </p><br><p>  A cria√ß√£o de um design de c√≥digo no est√°gio de implementa√ß√£o permite fazer rapidamente estimativas adequadas dos custos de m√£o-de-obra, paralelizar com mais efici√™ncia o trabalho e, geralmente, melhorar a qualidade do sistema. <br>  A necessidade de projetar um design de c√≥digo durante a implementa√ß√£o √© exatamente o que torna a implementa√ß√£o interessante nos olhos dos desenvolvedores. </p><br><p>  N√£o vale a pena cometer erros, excluindo o trabalho de design da implementa√ß√£o de subtarefas, assim como voc√™ nem sempre deve confiar tarefas de arquitetura apenas ao desenvolvedor mais experiente. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435386/">https://habr.com/ru/post/pt435386/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435372/index.html">Algumas palavras sobre o FastPath e o FastTrack no MikroTik</a></li>
<li><a href="../pt435374/index.html">A matem√°tica em Gamedev √© simples. Triangula√ß√£o e Triangle.Net em Unity</a></li>
<li><a href="../pt435376/index.html">Space 2019: naves tripuladas, novos foguetes e sondas lunares</a></li>
<li><a href="../pt435380/index.html">Contas gratuitas no GitHub poder√£o [quase] sem restri√ß√µes trabalhar com reposit√≥rios privados</a></li>
<li><a href="../pt435384/index.html">Como eu criei meu jogo online. Parte 1: Rede</a></li>
<li><a href="../pt435388/index.html">Internet em Cuba. De revolu√ß√£o em revolu√ß√£o</a></li>
<li><a href="../pt435390/index.html">Mecanismo 3D dentro da consulta SQL</a></li>
<li><a href="../pt435394/index.html">Resultados f√≠sicos do ano</a></li>
<li><a href="../pt435398/index.html">Meta-jogos: minha experi√™ncia na cria√ß√£o de concursos para gerentes de vendas</a></li>
<li><a href="../pt435400/index.html">Recompensa de US $ 1 milh√£o anunciada por informa√ß√µes de hackers do WhatsApp e do iMessage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>