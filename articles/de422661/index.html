<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèº ü§° üë®üèΩ‚Äç‚úàÔ∏è Praktische Verwendung des Currying in js am Beispiel des http-Anforderungsmoduls üõ•Ô∏è üíÜüèΩ ü§∞üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Es ist f√ºr niemanden ein Geheimnis, dass es in der Programmierwelt viele Techniken, Praktiken und Programmiermuster (Design) gibt, a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Praktische Verwendung des Currying in js am Beispiel des http-Anforderungsmoduls</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422661/"><p>  Hallo allerseits!  Es ist f√ºr niemanden ein Geheimnis, dass es in der Programmierwelt viele Techniken, Praktiken und Programmiermuster (Design) gibt, aber wenn man etwas Neues lernt, ist oft nicht klar, wo und wie man dieses Neue anwendet. </p><br><p>  Anhand des Beispiels der Erstellung eines kleinen Wrapper-Moduls f√ºr die Arbeit mit http-Anforderungen werden wir heute die tats√§chlichen Vorteile des Curry analysieren - den Empfang der funktionalen Programmierung. </p><br><p>  An alle Neulinge und diejenigen, die daran interessiert sind, funktionale Programmierung in der Praxis einzusetzen - willkommen, diejenigen, die genau verstehen, was Currying ist -, freue ich mich auf Ihre Kommentare zum Code, denn wie sie sagen - der Perfektion sind keine Grenzen gesetzt. <a name="habracut"></a></p><br><h2 id="itak-nachnem">  Also fangen wir an </h2><br><p>  Aber nicht aus dem Konzept des Currying, sondern aus der Aussage des Problems, wo wir es anwenden k√∂nnen. </p><br><p>  Wir haben eine bestimmte Blog-API, die nach dem folgenden Prinzip arbeitet (alle √úbereinstimmungen mit echten APIs sind ein Unfall): </p><br><ul><li> Eine Anfrage an <code>/api/v1/index/</code> gibt Daten f√ºr die Hauptseite zur√ºck </li><li>  Eine Anfrage an <code>/api/v1/news/</code> gibt Daten f√ºr die Nachrichtenseite zur√ºck </li><li>  Eine Anfrage an <code>/api/v1/articles/</code> gibt Daten f√ºr die Artikelliste zur√ºck </li><li>  Die Anforderung an <code>/api/v1/article/222/</code> gibt die Artikelseite mit der ID 222 zur√ºck </li><li>  Eine Anfrage an <code>/api/v1/article/edit/222/</code> gibt ein Artikelbearbeitungsformular mit der ID 222 zur√ºck <br>  ... und so weiter, weiter, weiter </li></ul><br><p>  Wie Sie sehen k√∂nnen, m√ºssen wir uns f√ºr den Zugriff auf die API der API <strong>einer</strong> bestimmten Version <strong>v1</strong> zuwenden (wie wenig sie w√§chst und eine neue Version ver√∂ffentlicht wird) und dann die Datenanforderung weiter entwerfen. </p><br><p>  Um in js-Code Daten zu erhalten, z. B. einen Artikel mit der <strong>ID 222,</strong> m√ºssen wir daher schreiben (um das Beispiel so weit wie m√∂glich zu vereinfachen, verwenden wir die native js-Abrufmethode): </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">fetch</span></span>(<span class="hljs-string"><span class="hljs-string">'/api/v1/article/222/'</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* success */</span></span>) .catch(<span class="hljs-comment"><span class="hljs-comment">/* error */</span></span>)</code> </pre> <br><p>  Um denselben Artikel zu bearbeiten, fordern wir Folgendes an: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">fetch</span></span>(<span class="hljs-string"><span class="hljs-string">'/api/v1/article/edit/222/'</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* success */</span></span>) .catch(<span class="hljs-comment"><span class="hljs-comment">/* error */</span></span>)</code> </pre> <br><p>  Sicher haben Sie bereits bemerkt, dass es in unseren Anfragen viele doppelte Pfade gibt.  Zum Beispiel den Pfad und die Version zu unserer API <code>/api/v1/</code> und die Arbeit mit einem Artikel <code>/api/v1/article/</code> und <code>/api/v1/article/edit/</code> . </p><br><h3 id="sleduya-nashemu-lyubimomu-pravilu-dry-dont-repeat-yourself-kak-optimizirovat-kod-zaprosov-k-api">  Wie kann der API-Anforderungscode gem√§√ü unserer bevorzugten DRY-Regel (Don't Repeat Yourself) optimiert werden? </h3><br><p>  Wir k√∂nnen Konstanten Abfrageteile hinzuf√ºgen, zum Beispiel: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> API = <span class="hljs-string"><span class="hljs-string">'/api'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> VERSION = <span class="hljs-string"><span class="hljs-string">'/v1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ARTICLE = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${API}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${VERSION}</span></span></span><span class="hljs-string">/article`</span></span></code> </pre> <br><p>  Und jetzt k√∂nnen wir die obigen Beispiele folgenderma√üen umschreiben: </p><br><p>  <strong>Artikelanfrage</strong> </p><br><pre> <code class="hljs javascript">fetch(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ARTICLE}</span></span></span><span class="hljs-string">/222/`</span></span>)</code> </pre> <br><p>  <strong>Artikelbearbeitungsanforderung</strong> </p><br><pre> <code class="hljs javascript">fetch(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ARTICLE}</span></span></span><span class="hljs-string">/edit/222/`</span></span>)</code> </pre> <br><p>  Der Code scheint weniger zu sein, es gibt Konstanten im Zusammenhang mit der API, aber Sie und ich wissen, was viel bequemer gemacht werden kann. </p><br><p>  Ich glaube, dass es noch M√∂glichkeiten gibt, das Problem zu l√∂sen, aber unsere Aufgabe ist es, die L√∂sung mithilfe von Currying zu pr√ºfen. </p><br><h2 id="princip-postroeniya-zaprosov-na-osnove-http-servisov">  Das Prinzip der Erstellung von Anforderungen basierend auf http-Diensten </h2><br><p>  Die Strategie besteht darin, eine bestimmte Funktion zu erstellen, indem wir API-Anforderungen aufrufen. </p><br><h3 id="kak-eto-dolzhno-rabotat">  Wie es funktionieren soll </h3><br><p>  Wir konstruieren die Anforderung, indem wir die Wrapper-Funktion √ºber den nativen Abruf aufrufen (nennen wir sie http. Unten finden Sie den vollst√§ndigen Code f√ºr diese Funktion), in deren Argumenten wir die Anforderungsparameter √ºbergeben: </p><br><pre> <code class="hljs pgsql">cosnt httpToArticleId222 = http({ url: <span class="hljs-string"><span class="hljs-string">'/api/v1/article/222/'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span> })</code> </pre> <br><p>  Bitte beachten Sie, dass das Ergebnis dieser http-Funktion eine Funktion ist, die die Einstellungen f√ºr URL und Methodenanforderung enth√§lt. </p><br><p>  Durch Aufrufen von <code>httpToArticleId222()</code> senden wir die Anforderung nun tats√§chlich an die API. </p><br><p>  Sie k√∂nnen schwierigere und schrittweise Designabfragen durchf√ºhren.  Auf diese Weise k√∂nnen wir eine Reihe vorgefertigter Funktionen mit verkabelten API-Pfaden erstellen.  Wir werden sie http-Dienste nennen. </p><br><p>  Zun√§chst erstellen wir einen API-Aufrufdienst (und f√ºgen gleichzeitig Anforderungsparameter hinzu, die f√ºr alle nachfolgenden Anforderungen unver√§ndert bleiben, z. B. eine Methode). </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPI = http({ url: <span class="hljs-string"><span class="hljs-string">'/api'</span></span>, method: <span class="hljs-string"><span class="hljs-string">'POST'</span></span> })</code> </pre> <br><p>  Jetzt erstellen wir den Dienst f√ºr den Zugriff auf die API der ersten Version.  In Zukunft k√∂nnen wir einen separaten Anforderungszweig vom httpAPI-Dienst zu einer anderen Version der API erstellen. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPIv1 = httpAPI({ url: <span class="hljs-string"><span class="hljs-string">'/v1'</span></span> })</code> </pre> <br><p>  Der Dienst f√ºr den Zugriff auf die API der ersten Version ist bereit.  Jetzt erstellen wir daraus Dienste f√ºr den Rest der Daten (denken Sie an die improvisierte Liste am Anfang des Artikels). </p><br><p>  <strong>Homepage-Daten</strong> </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPIv1Main = httpAPIv1({ url: <span class="hljs-string"><span class="hljs-string">'/index'</span></span> })</code> </pre> <br><p>  <strong>News Page Daten</strong> </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPIv1News = httpAPIv1({ url: <span class="hljs-string"><span class="hljs-string">'/news'</span></span> })</code> </pre> <br><p>  <strong>Artikellistendaten</strong> </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPIv1Articles = httpAPIv1({ url: <span class="hljs-string"><span class="hljs-string">'/articles'</span></span> })</code> </pre> <br><p>  Schlie√ülich kommen wir zu unserem Hauptbeispiel, den <strong>Daten f√ºr das Material</strong> </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPIv1Article = httpAPIv1({ url: <span class="hljs-string"><span class="hljs-string">'/article'</span></span> })</code> </pre> <br><p>  Wie erhalte ich den Weg zur Artikelbearbeitung?  Sie haben es erraten, wir laden nat√ºrlich Daten aus der zuvor erstellten Funktion <strong>httpAPIv1Article</strong> </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> httpAPIv1ArticleEdit = httpAPIv1({ url: <span class="hljs-string"><span class="hljs-string">'/edit'</span></span> })</code> </pre> <br><h3 id="nebolshoy-logicheskiy-itog">  Ein kleines logisches Ergebnis </h3><br><p>  Wir haben also eine sch√∂ne Liste von Diensten, die sich zum Beispiel in einer separaten Datei befinden, was uns √ºberhaupt nicht st√∂rt.  Wenn etwas in der Anfrage ge√§ndert werden muss, wei√ü ich genau, wo ich es bearbeiten muss. </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> { httpAPIv1Main, httpAPIv1News, httpAPIv1Articles, httpAPIv1Article, httpAPIv1ArticleEdit }</code> </pre> <br><p>  Ich importiere einen Dienst mit einer bestimmten Funktion </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { httpAPIv1Article } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'services'</span></span></code> </pre> <br><p>  Und ich f√ºhre die Anfrage aus, rekonstruiere sie zuerst, indem ich die ID des Materials hinzuf√ºge, und rufe dann die Funktion auf, um die Anfrage zu senden (wie sie sagen: "einfach") </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">httpAPIv1Article</span></span>({ <span class="hljs-attribute"><span class="hljs-attribute">url</span></span>: ArticleID // id  -   })() <span class="hljs-selector-class"><span class="hljs-selector-class">.then</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* success */</span></span>) <span class="hljs-selector-class"><span class="hljs-selector-class">.catch</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* error */</span></span>)</code> </pre> <br><p>  Sauber, sch√∂n, verst√§ndlich (keine Werbung) </p><br><h2 id="kak-eto-rabotaet">  Wie funktioniert es? </h2><br><p>  Wir k√∂nnen eine Funktion mit Daten genau aufgrund von Currying ‚Äûladen‚Äú. </p><br><p>  Ein bisschen Theorie. <br>  <em>Currying ist eine M√∂glichkeit, eine Funktion mit der F√§higkeit zu konstruieren, ihre Argumente schrittweise anzuwenden.</em>  <em>Dies wird erreicht, indem die Funktion nach dem Aufruf zur√ºckgegeben wird.</em> </p><br><p>  Ein klassisches Beispiel ist die Hinzuf√ºgung. <br>  Wir haben eine Summenfunktion. Beim ersten Aufruf √ºbergeben wir die erste Nummer f√ºr das anschlie√üende Falten.  Nach dem Aufruf erhalten wir eine neue Funktion, die erwartet, dass eine zweite Zahl die Summe berechnet.  Hier ist ihr Code (ES6-Syntax) </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sum = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> b =&gt; a + b</code> </pre> <br><p>  Wir nennen es das erste Mal (Teilanwendung) und speichern das Ergebnis in einer Variablen, zum Beispiel sum13 </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sum13 = sum(<span class="hljs-number"><span class="hljs-number">13</span></span>)</code> </pre> <br><p>  Jetzt <strong>k√∂nnen</strong> wir <strong>sum13</strong> auch mit der fehlenden Nummer im Argument aufrufen, deren Ergebnis 13 + das zweite Argument ist </p><br><pre> <code class="hljs objectivec">sum13(<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-comment"><span class="hljs-comment">// =&gt;  20</span></span></code> </pre> <br><h3 id="horosho-kak-eto-primenit-k-nashey-zadache">  Wie kann man das auf unsere Aufgabe anwenden? </h3><br><p>  Wir erstellen die <strong>http-</strong> Funktion, die der Wrapper √ºber Fetch sein wird </p><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(paramUser)</span></span></span></span> {}</code> </pre> <br><p>  Dabei sind <strong>paramUser</strong> Anforderungsparameter, die zum Zeitpunkt des Funktionsaufrufs √ºbergeben wurden </p><br><p>  Beginnen wir damit, unserer Funktion Logik hinzuzuf√ºgen. </p><br><p>  Standardm√§√üig angeforderte Anforderungsparameter hinzuf√ºgen. </p><br><pre> <code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(paramUser)</span></span></span></span> { /** *  -,    * @<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>} */ let param = { method: <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, credentials: <span class="hljs-string"><span class="hljs-string">'same-origin'</span></span> } }</code> </pre> <br><p>  Und dann die <strong>paramGen-</strong> Funktion, die Anforderungsparameter aus den standardm√§√üig festgelegten und benutzerdefinierten Parametern generiert (tats√§chlich nur eine Zusammenf√ºhrung von zwei Objekten). </p><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(paramUser)</span></span></span></span> { /** *  -,    * @type {string} */ let <span class="hljs-keyword"><span class="hljs-keyword">param</span></span> = { method: <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, credentials: <span class="hljs-string"><span class="hljs-string">'same-origin'</span></span> } /** *   , *  url  ,          * * @<span class="hljs-keyword"><span class="hljs-keyword">param</span></span> {object} <span class="hljs-keyword"><span class="hljs-keyword">param</span></span>   * @<span class="hljs-keyword"><span class="hljs-keyword">param</span></span> {object} paramUser ,    * * @<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {object}     */ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paramGen</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(param, paramUser)</span></span></span></span> { let url = param.url || <span class="hljs-string"><span class="hljs-string">''</span></span> let newParam = Object.assign({}, <span class="hljs-keyword"><span class="hljs-keyword">param</span></span>, paramUser) url += paramUser.url || <span class="hljs-string"><span class="hljs-string">''</span></span> newParam.url = url <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> newParam } }</code> </pre> <br><h3 id="perehodim-k-samomu-glavnomu-opisyvaem-karrirovanie">  Wir gehen zum Wichtigsten √ºber, wir beschreiben Curry </h3><br><p>  Die Funktion, die zum Beispiel <strong>Fabric</strong> aufgerufen und von der <strong>http-</strong> Funktion zur√ºckgegeben wird, hilft uns dabei. </p><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(paramUser)</span></span></span></span> { /** *  -,    * @type {string} */ let <span class="hljs-keyword"><span class="hljs-keyword">param</span></span> = { method: <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, credentials: <span class="hljs-string"><span class="hljs-string">'same-origin'</span></span> } /** *   , *  url  ,          * * @<span class="hljs-keyword"><span class="hljs-keyword">param</span></span> {object} <span class="hljs-keyword"><span class="hljs-keyword">param</span></span>   * @<span class="hljs-keyword"><span class="hljs-keyword">param</span></span> {object} paramUser ,    * * @<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {object}     */ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paramGen</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(param, paramUser)</span></span></span></span> { let url = param.url || <span class="hljs-string"><span class="hljs-string">''</span></span> url += paramUser.url || <span class="hljs-string"><span class="hljs-string">''</span></span> let newParam = Object.assign({}, <span class="hljs-keyword"><span class="hljs-keyword">param</span></span>, paramUser); newParam.url = url <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> newParam } /** *  ,     *  ,      * *  : * * -    ,        ,     * -   ,           * -   ,      * * @<span class="hljs-keyword"><span class="hljs-keyword">param</span></span> {object} <span class="hljs-keyword"><span class="hljs-keyword">param</span></span> ,       * @<span class="hljs-keyword"><span class="hljs-keyword">param</span></span> {object} paramUser ,   * * @<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> || </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">promise</span></span></span><span class="hljs-function">}   ,    </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fetch)</span></span></span><span class="hljs-function">,     */ </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fabric</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(param, paramUser)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (paramUser) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (typeof paramUser === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fabric.bind(null, paramGen(<span class="hljs-keyword"><span class="hljs-keyword">param</span></span>, { url: paramUser })) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fabric.bind(null, paramGen(<span class="hljs-keyword"><span class="hljs-keyword">param</span></span>, paramUser)) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //  ,   ,   <span class="hljs-keyword"><span class="hljs-keyword">param</span></span>    url, //       :) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetch(param.url, <span class="hljs-keyword"><span class="hljs-keyword">param</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fabric.bind(null, paramGen(<span class="hljs-keyword"><span class="hljs-keyword">param</span></span>, paramUser)) }</code> </pre> <br><p>  Der erste Aufruf der <strong>http-</strong> Funktion gibt die <strong>Fabric-</strong> Funktion zur√ºck, an <strong>die</strong> Parameterparameter √ºbergeben (und von der <strong>paramGen-</strong> Funktion konfiguriert) werden, die auf ihre Funktion warten <del>  Stunden </del>  sp√§ter anrufen. </p><br><p>  Konfigurieren Sie beispielsweise die Anforderung </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> httpGift = http({ url: '<span class="hljs-comment"><span class="hljs-comment">//omozon.ru/givemegift/' })</span></span></code> </pre> <br><p>  Beim Aufruf von <strong>httpGift</strong> werden die √ºbergebenen Parameter angewendet. Als Ergebnis geben wir <strong>fetch zur√ºck</strong> . Wenn wir die Anforderung neu konfigurieren m√∂chten, √ºbergeben wir die neuen Parameter einfach an die generierte <strong>httpGift-</strong> Funktion und erwarten, dass sie ohne Argumente aufgerufen wird </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">httpGift</span></span>() <span class="hljs-selector-class"><span class="hljs-selector-class">.then</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* success */</span></span>) <span class="hljs-selector-class"><span class="hljs-selector-class">.catch</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* error */</span></span>)</code> </pre> <br><h2 id="itogi">  Zusammenfassung </h2><br><p>  Dank des Einsatzes von Curry bei der Entwicklung verschiedener Module k√∂nnen wir eine hohe Flexibilit√§t bei der Verwendung von Modulen und eine einfache Pr√ºfung erreichen.  Wie zum Beispiel beim Organisieren der Architektur von Diensten f√ºr die Arbeit mit der API. </p><br><p>  Es ist, als w√ºrden wir eine Minibibliothek erstellen, mit deren Werkzeugen wir eine einzige Infrastruktur f√ºr unsere Anwendung erstellen. </p><br><p>  Ich hoffe die Informationen waren n√ºtzlich, nicht hart treffen, dies ist mein erster Artikel in meinem Leben :) </p><br><p>  Alles kompilierte Code, bis bald! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422661/">https://habr.com/ru/post/de422661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422649/index.html">Multiplayer VR: Wie implementiere ich?</a></li>
<li><a href="../de422651/index.html">Gurke 3 + Java</a></li>
<li><a href="../de422653/index.html">Krieg gegen die Krankheit: Alte Ansichten neu definieren</a></li>
<li><a href="../de422655/index.html">Matrix der Entwicklermotivationswerte</a></li>
<li><a href="../de422659/index.html">√úber die richtige Haltung, Muskelaufbau und Dehnung</a></li>
<li><a href="../de422665/index.html">Die Kosten f√ºr die Vers√∂hnung in Teams</a></li>
<li><a href="../de422667/index.html">Ich werde Ihre Garbage Query Language nicht lernen</a></li>
<li><a href="../de422669/index.html">Oracle gegen PostgreSQL. Warum die Wahl von Oracle eine kluge Entscheidung sein k√∂nnte</a></li>
<li><a href="../de422671/index.html">5G kann Kabel ersetzen - aber nicht √ºberall</a></li>
<li><a href="../de422675/index.html">Made in Space: Wer macht die Faser auf der ISS?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>