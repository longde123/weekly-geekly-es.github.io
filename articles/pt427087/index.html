<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎛️ 🙍🏻 🛍️ Curso MIT "Segurança de sistemas de computadores". Palestra 12: Segurança de Rede, Parte 2 ☝🏼 🌪️ 🌹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula nº 6.858. "Segurança de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Segurança de sistemas de computadores". Palestra 12: Segurança de Rede, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427087/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula nº 6.858.  "Segurança de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security é um curso sobre o desenvolvimento e implementação de sistemas de computador seguros.  As palestras abrangem modelos de ameaças, ataques que comprometem a segurança e técnicas de segurança baseadas em trabalhos científicos recentes.  Os tópicos incluem segurança do sistema operacional (SO), recursos, gerenciamento de fluxo de informações, segurança de idiomas, protocolos de rede, segurança de hardware e segurança de aplicativos da web. <br><br>  Palestra 1: “Introdução: modelos de ameaças” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: “Controle de ataques de hackers” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: “Estouros de Buffer: Explorações e Proteção” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: “Separação de Privilégios” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: “De onde vêm os sistemas de segurança?” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: “Oportunidades” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: “Sandbox do Cliente Nativo” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: “Modelo de Segurança de Rede” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: “Segurança de aplicativos da Web” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: “Execução Simbólica” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: “Linguagem de Programação Ur / Web” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 12: Segurança de rede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>Aluno:</b> talvez você ainda tenha um problema de conflito de interesses, porque poderia usar 32 bits para endereços pares e ter muitas portas para cada um deles.  Você provavelmente tem um conflito de números de sequência de todas essas conexões que obtém? <br><br>  <b>Professor:</b> verifica <b>-</b> se que esses números de sequência são específicos para o endereço IP e o número da porta do par de origem / destino.  Portanto, se essas são portas diferentes, elas não interferem uma com a outra.  Especificamente, as portas têm números de série mais baixos. <br><br><img src="https://habrastorage.org/webt/ln/rp/sm/lnrpsmdw6g-ionqcpock0lqzf-s.jpeg"><br><br>  <b>Aluno:</b> se os números de série forem globais, o invasor poderá entrar na conexão entre outros clientes? <br><br>  <b>Professor:</b> Sim, este é um bom ponto.  De fato, se o servidor aumenta o número de série, por exemplo, em 64k para cada conexão, você se conecta ao servidor e, em seguida, outras 5 pessoas se conectam a ele, e aqui você pode organizar um ataque.  Então, até certo ponto, você está certo, é um pouco problemático.  Por outro lado, você provavelmente poderia fazer com que um pacote da última linha de S-&gt; A fosse entregue imediatamente antes desse pacote na primeira linha de C-&gt; S.  Se você enviar seus pacotes um após o outro, há uma boa chance de que eles cheguem ao servidor um por um também. <br><br>  O servidor receberá S-&gt; A e responderá com este número de sequência (SNs).  Será diferente dos (SNs) na segunda linha, mas com o número de série imediatamente a seguir.  E então você saberá exatamente qual número de sequência (SNs) deve ser incluído no terceiro pacote da sua sequência. <br>  Portanto, acho que essa não é uma maneira muito confiável de conectar-se ao servidor, é baseada em suposições.  Mas se você organizar cuidadosamente seus pacotes da maneira certa, poderá adivinhar facilmente a sequência.  Ou talvez você tente várias vezes e tenha sorte. <br><br>  <b>Aluno:</b> mesmo que os números sejam gerados por acaso, você precisa adivinhar um dos 4 bilhões de números possíveis.  Isso não é demais, certo?  Eu acho que dentro de um ano você provavelmente poderá entrar nessa rede. <br><br>  <b>Professor:</b> sim, você está absolutamente certo.  Você não deve confiar muito no TCP em termos de segurança.  Porque você está certo, são apenas 4 bilhões de palpites.  E você provavelmente pode enviar muitos pacotes durante o dia se tiver uma conexão razoavelmente rápida. <br><br>  Então, aqui temos um tipo de argumento interessante sobre a falta de confiabilidade do TCP, porque só temos 32 bits.  Não podemos protegê-lo de nenhuma maneira.  Mas acho que muitos aplicativos que dependem desse protocolo suficientemente não pensam em segurança, e isso realmente se torna um problema. <br><br>  Mas você está absolutamente certo.  Na prática, você deseja usar algum tipo de criptografia, além de obter garantias mais sérias de que ninguém falsificou seus dados, pois você usa chaves de criptografia com mais de 32 bits.  Na maioria dos casos, isso ainda é eficaz na prevenção de violações da conexão TCP. <br><br>  Vamos ver agora por que é ruim se as pessoas podem falsificar conexões TCP a partir de endereços arbitrários? <br><br>  Uma das razões pelas quais isso é ruim é que ela pode afetar a autorização com base no endereço IP quando o servidor verifica qual o endereço da solicitação.  Se um servidor decidir se deve permitir ou negar a conexão com base no endereço IP, isso pode ser um problema para um invasor que falsificou a conexão a partir de um endereço de origem arbitrário. <br><br>  Portanto, um exemplo em que isso foi um problema, hoje esse problema está basicamente resolvido, é o uso de uma família de comandos r, como o rlogin.  Antes, era possível executar algo como o rlogin em um computador em, digamos, athena.dialup.mit.edu.  E se sua conexão vier do host do MIT, esse comando rlogin será bem-sucedido se você disser: "Sim, sou o usuário de Alice neste computador, deixe-me fazer login como usuário de Alice em outro computador".  E essa operação será permitida, pois todos os computadores da rede mit.edu são confiáveis ​​para fazer essas declarações. <br><br>  Devo dizer que a conexão discada nunca teve esse problema.  Este composto usou Cerberus desde o início.  Mas outros sistemas, é claro, tinham esses problemas.  E este é um exemplo de uso de um endereço IP em um mecanismo de autenticação de conexão quando o sistema verifica se o cliente que está chamando o servidor é confiável.  Então, o que costumava ser um problema não é mais um problema.  Mas confiar no IP ainda parece um plano ruim. <br><br><img src="https://habrastorage.org/webt/xp/zi/_1/xpzi_1guskiwnqi-52aokxflicq.jpeg"><br><br>  Agora o rlogin não está mais em uso, foi recentemente substituído pelo shell SSH seguro, que é um excelente protocolo de camada de rede.  Por outro lado, existem muitos outros exemplos de protocolos que dependem de autorização baseada em endereço IP.  Um deles é o SMTP.  Ao enviar um email, você usa o SMTP para conversar com algum servidor de email para enviar mensagens.  Para evitar spam, muitos servidores SMTP aceitam apenas mensagens recebidas de um endereço IP de origem específico.  Por exemplo, o servidor de email Comcast aceita apenas emails de endereços IP da Comcast.  O mesmo vale para servidores de correio MIT - eles aceitarão apenas emails de endereços IP do MIT.  Mas tínhamos pelo menos um servidor que não funcionava como deveria, usando autenticação IP. <br><br>  Tudo aqui não é tão ruim.  Na pior das hipóteses, você enviará algum spam pelo servidor de email.  Portanto, é provavelmente por isso que eles ainda estão usando o rlogin, enquanto as coisas que permitem que você efetue login em uma conta arbitrária pararam de usar a autenticação baseada em IP. <br><br>  Então, por que esse mecanismo de autenticação é um plano ruim?  Como suposição, suponha que algum servidor usasse rlogin.  O que você faria para atacar?  Que mal poderia acontecer? <br><br>  <b>Aluno:</b> um invasor pode simplesmente entrar no seu computador, falsificar um usuário que entrará na rede com seu nome de usuário e obter acesso à rede. <br><br>  <b>Professor:</b> sim, basicamente um invasor assume o controle de um computador.  Ele sintetiza dados que se parecem com um conjunto válido de comandos rlogin que dizem: "Efetue login como usuário e execute este comando no meu shell Unix". <br><br>  Você sintetiza esses dados (SNc + 1), monta todo o ataque e envia esses dados como se um usuário legítimo interagisse com o cliente rlogin e, em seguida, continue. <br><br><img src="https://habrastorage.org/webt/8v/b-/ws/8vb-ws9vmaat0zscptpwoh8-cze.jpeg"><br><br>  Bem, essa é uma das razões pelas quais você não deseja que seus números de sequência TCP sejam adivinhados.  Outro problema é que esses ataques de redefinição redefinem o ataque.  Da mesma maneira que poderíamos enviar um pacote SYN, se soubermos o número de série de alguém, podemos enviar um pacote de redefinição da mesma maneira. <br><br>  Mencionamos brevemente um cliente legal que envia um pacote de redefinição de conexão falso que um invasor estabeleceu.  Um invasor pode tentar enviar pacotes de descarte para uma conexão existente, se de alguma forma souber que o seu número de sequência está nessa conexão.  De fato, não está claro o tamanho desse problema. <br><br>  Em algum nível, você deve assumir que todas as suas conexões TCP podem ser interrompidas em qualquer caso e a qualquer momento, ou seja, não parece que sua rede é confiável.  Portanto, talvez você deva esperar uma desconexão. <br><br>  No caso em que os roteadores "conversam" entre si, essa suposição é especialmente crítica.  Se você possui muitos roteadores que se comunicam usando alguns protocolos de roteamento, existem algumas conexões físicas entre eles.  Mas, além dessas conexões físicas, eles se comunicam através de um protocolo de rede que funciona através de TCP.  De fato, em cada uma dessas conexões físicas que os roteadores usam para trocar informações de roteamento, uma sessão TCP é iniciada.  O protocolo BGP é usado aqui, sobre o qual falaremos mais adiante. <br><br>  Este protocolo BGP usa o fato de que, se a conexão TCP estiver ativa, a conexão física também estará ativa.  Portanto, se uma conexão TCP for interrompida, o roteador acredita que a conexão está interrompida e começa a recontar todas as suas tabelas de roteamento. <br><br><img src="https://habrastorage.org/webt/v6/wj/cc/v6wjccjolqvci5pvynpn_uui-pm.jpeg"><br><br>  Portanto, se o adversário deseja organizar algum tipo de ataque de negação de serviço do DoS, ele pode tentar adivinhar os números de série desses roteadores e interromper essas sessões.  Se a sessão TCP entre os dois roteadores estiver desativada, os dois roteadores consideram esta conexão morta e devem recontar todas as tabelas de roteamento, o que fará com que as rotas mudem.  Depois disso, o invasor pode redefinir outra conexão e assim por diante. <br><br>  Portanto, este é um ataque um tanto alarmante, e não porque viola o segredo de outra pessoa e assim por diante, pelo menos não diretamente, mas porque realmente causa muitos problemas de acesso para outros usuários do sistema. <br><br>  <b>Aluno:</b> se você é um invasor e deseja organizar um ataque direcionado contra um usuário específico, você pode simplesmente continuar enviando solicitações para se conectar ao servidor em nome do endereço IP e forçá-lo a redefinir a conexão com o servidor? <br><br>  <b>Professor:</b> suponha que eu use o Gmail e você queira impedir que eu receba qualquer informação do Gmail; basta enviar pacotes para minha máquina, fingindo que eles vêm do servidor do Gmail.  Nesse caso, você deve adivinhar os números de porta de origem e destino corretos. <br><br>  O número da porta de destino é provavelmente 443 porque eu uso HTTPS.  Mas o número da porta de origem será algo aleatório de 16 bits.  Além disso, os números de série variam.  Portanto, se você não adivinhar o número de sequência que está na minha janela TCP e que é dezenas de kilobytes, não terá êxito. <br><br>  Então você tem que adivinhar uma quantidade razoável de coisas.  Não há acesso Oracle aqui.  Você não pode simplesmente pedir ao servidor o número de série desse cara.  Esta é a razão pela qual isso também não funcionará. <br><br>  Portanto, muitos desses problemas foram corrigidos, incluindo esse item baseado em RST, especialmente para roteadores BGP.  Na verdade, havia duas correções engraçadas.  Uma coisa realmente mostra como você pode explorar coisas existentes ou usá-las para corrigir problemas específicos.  Ele usa a propriedade que esses roteadores se comunicam apenas entre si e não com mais ninguém na rede.  Como resultado, se o pacote não chegar de um roteador localizado na outra extremidade da conexão, esse pacote será descartado. <br><br>  A implementação bem-sucedida dos desenvolvedores desses protocolos é uma área maravilhosa do pacote chamada "tempo de vida", ou TTL.  Este é um campo de 8 bits decrementado por cada roteador para garantir que os pacotes não terminem em um loop infinito.  O valor TTL máximo é 255 e diminui ainda mais. <br><br>  Então, o que estou fazendo com esses protocolos inteligentes?  Eles descartam qualquer pacote com um valor TTL que não seja igual a 255. Como se o pacote tiver um valor de 255, ele poderá vir apenas de um roteador do outro lado desta conexão.  E se o adversário tentar injetar qualquer outro pacote na conexão BGP existente, ele terá um valor TTL menor que 255, porque esse valor será reduzido por outros roteadores localizados ao longo do caminho de roteamento, incluindo este roteador.  Portanto, este pacote será simplesmente rejeitado pelo destinatário. <br><br>  Portanto, este é um exemplo de uma combinação inteligente de técnicas compatíveis com versões anteriores que resolvem esse problema muito específico. <br><br><img src="https://habrastorage.org/webt/k4/ix/mo/k4ixmopv2goqdgdhy48-lh1wol4.jpeg"><br><br>  <b>Aluno:</b> O roteador inferior direito não envia algo com um TTL de 255? <br><br>  <b>Professor:</b> Este é um roteador físico.  E ele sabe que essas são conexões separadas, então ele analisa o TTL e de onde veio o pacote.  Portanto, se o pacote vier do roteador superior esquerdo, ele não será aceito para uma conexão TCP entre ele e o roteador superior direito. <br><br>  Na maioria das vezes, esses roteadores confiam nos vizinhos imediatos e esse processo pode ser controlado usando o mecanismo de roteamento de caminhos múltiplos do Auto Pan. <br><br>  Outras correções para o BGP são implementar alguma forma de cabeçalho de autenticação, incluindo um cabeçalho de autenticação MD5.  Mas, na realidade, os desenvolvedores se concentraram nesse aplicativo em particular, para o qual um ataque de redefinição é especialmente crítico. <br><br>  Esse problema persiste hoje.  Se houver alguma conexão de longo prazo e eu quero interrompê-la, só preciso enviar um grande número de pacotes RST, aproximadamente centenas de milhares, mas provavelmente não 4 bilhões.  Como os servidores são realmente um pouco vulneráveis ​​a qual número de sequência eles aceitam para redefinição. <br><br>  Pode ser qualquer pacote em uma janela específica.  Nesse caso, o invasor pode interromper essa conexão sem muito esforço.  Esse ainda é um problema para o qual não existe uma solução realmente boa. <br><br>  E a última coisa ruim que pode acontecer devido à previsibilidade dos números de sequência é a injeção de dados nas conexões existentes.  Suponha que tenhamos um protocolo hipotético semelhante ao rlogin, que na verdade não executa autenticação baseada em IP, portanto, você deve digitar sua senha para efetuar login. <br><br>  O problema é que, assim que você digita sua senha, talvez sua conexão TCP seja simplesmente estabelecida e possa aceitar dados arbitrários.  Portanto, o invasor só precisa esperar até que um de vocês faça logon no computador digitando sua senha. <br><br>  O invasor não sabe qual é a senha, mas assim que você estabelece uma conexão TCP, ele imediatamente tenta adivinhar seu número de série e insere alguns dados na conexão existente.  Portanto, se eu puder adivinhar corretamente seu número de série, isso permitirá que eu finja que não sou eu, mas você inseriu algum comando depois de se autenticar corretamente com uma senha. <br><br><img src="https://habrastorage.org/webt/ao/0n/xw/ao0nxw7zfmyfhjhmb56s6ht7l7s.jpeg"><br><br>  Tudo isso indica por que você realmente não deseja confiar nesses números de sequência de 32 bits no sentido de segurança.  Mas vamos ver o que as modernas pilhas TCP realmente fazem para mitigar esse problema.  Uma abordagem para o problema que abordaremos nas próximas 2 palestras é implementar algum grau de segurança no nível do aplicativo.  Nesse nível, usaremos criptografia para autenticar, criptografar, assinar e verificar mensagens sem muito envolvimento do TCP. <br><br>  Alguns dos aplicativos existentes também ajudam a resolver problemas de segurança ou, pelo menos, tornam mais difícil para um invasor explorar esses problemas.  As pessoas colocam isso em prática hoje, por exemplo, no Linux e Windows, mantendo diferentes números de sequência inicial para cada par de origem / destino. <br><br>  Portanto, a maioria das implementações TCP SYN ainda calcula esse número de sequência ISN inicial da mesma maneira que fizemos anteriormente.  Portanto, este é um estilo antigo do ISN, digamos assim.  E para realmente gerar um número de série para qualquer conexão em particular, adicionamos a esse ISN antigo um deslocamento aleatório de 32 bits.  Ou seja, adicionamos uma função a ela - algo como uma função hash ou SHA-1, ou algo melhor. <br><br><img src="https://habrastorage.org/webt/lm/wp/fm/lmwpfmcij_lsb9m2hggzeic9duy.jpeg"><br><br>  Esse recurso inclui o endereço IP de origem, o número da porta de origem, o endereço IP de destino, o número da porta de destino e alguma chave secreta que apenas o servidor conhece.  Assim, criamos uma boa oportunidade para qualquer conexão específica determinar o endereço IP e a porta do par de origem / destino, preservando todas as boas propriedades desse algoritmo de atribuição de número de série no estilo antigo. <br><br>  Mas se você tiver conexões de diferentes conjuntos de origem / destino, não há nada que permita descobrir o valor exato do número de série de outro conjunto de conexões.  Na verdade, você precisa adivinhar essa chave para calcular esse valor. <br><br>  Espero que o kernel do sistema operacional do servidor armazene essa chave em algum lugar da memória e não a entregue a ninguém.  É assim que a maioria das pilhas TCP hoje resolve esse problema específico no campo dos números de sequência comuns de 32 bits.  Isso não é muito bom, mas funciona. <br><br>  <b>Aluno:</b> você poderia repetir isso de novo?  Sobre a exclusividade da chave ... <br><br>  <b>Professor:</b> quando minha máquina é inicializada ou quando qualquer máquina é inicializada, gera uma chave aleatória.  Cada vez que você recarrega, ele gera uma nova chave.  Isso significa que cada vez que os números de série de um determinado par de origem / destino mudam com a mesma frequência de deslocamento.  Assim, para um determinado par de origem / destino, os parâmetros de função são fixos.  Então, você segue a sequência quando os números evoluem de acordo com os números de sequência iniciais para novos compostos, mudando de acordo com um algoritmo específico.  Assim, é fornecida proteção contra a injeção de pacotes antigos de conexões anteriores em novas conexões, bem como proteção contra a reatribuição de pacotes. <br><br>  A única coisa para a qual precisamos desse número de série da amostra antiga é a escolha do algoritmo para evitar problemas com esses pacotes duplicados.  Anteriormente, consideramos que, se você obtiver um número de série para uma conexão A: A -&gt; S: SYN (...), poderá concluir uma conclusão sobre o número de série da conexão ACK (SNs). <br><br><img src="https://habrastorage.org/webt/a0/w1/-x/a0w1-xenwugh56twqvkfkgzkai0.jpeg"><br><br>    ,         32-   ,     F.  ,         ,      . <br><br> <b>:</b>       ? <br><br> <b>:</b>     ,      .      F,    ,    F  ,   ,   ,       . <br><br> <b>:</b>      ,        … <br><br> <b>:</b>  ,     F  -    -,     .            -,   ,         .  , ,  ,   ,        .       ,     F     . <br><br> ,           TCP,      .          ,    ,   -  . <br><br>   ,        .   ,   TCP    ,       DNS,        .    ,  DNS   UDP –   . UDP —     ,      ,     .  UDP         .  ,    ,       ,        .     ,              ,       .         DNS-.       DNS? <br><br><img src="https://habrastorage.org/webt/zg/um/eo/zgumeoz-kafodeqfjnjyhkjotjs.jpeg"><br><br> ,   DNS-  C: C53 -&gt; S53     mit.edu,        53. <br><br>      S: S53 -&gt; C53       IP-,      –  . <br><br>    ,         ,  ,     ,      .   ,      mit.edu,         . <br><br>   ,  DNS-   .     IP-,       ,    .        IP-  mit.edu  IP-.        ,     ,   ,      ,       .      ,                . <br><br><img src="https://habrastorage.org/webt/n0/f3/6e/n0f36e0r8uoipzszlz4mdtywwcm.jpeg"><br><br>   ,      ,   .           IP-. ,   ,   DNS-  .  ,       ,          IP- mit.edu. <br><br> <b>:</b>            ,    ,    ? <br><br> <b>:</b>   ,   . ,    ,    .       DNS-,    ,       .    2  .  —    ,   16  .           ,    16 .      ID,    16 ,      . <br><br>  ,     ,        32  . ,  ,    ,          ,        . <br><br><img src="https://habrastorage.org/webt/py/ca/my/pycamyquozaz7jj41b01zovow7q.jpeg"><br><br>  ,    ,         . <br><br>  ,         DNS    DNS   .  ,          ,  DNS     . ,  DNS SEC,       .  ,         ,  ,   DNS-     .    ,  ,        . <br><br>           origin.  DNS    ,       IP-,  : „,     “.  ,     ,   ,     ,     ,     ,    .      ,        ,        ? <br><br>  ,    –    DNS- ,     . , ,   .    -,    DNS-,    .   ,    DNS SEC,   ,         ,    DNS-   .  DNS-     , ,     ,      –     ,      . <br><br>  DNS SEC       ,   NSEC.   ,     . , NSEC  ,     foo.mit.edu,         goo.mit.edu,          ,    . <br><br><img src="https://habrastorage.org/webt/vy/w6/a1/vyw6a1qrruintd6iwnsg8exluzs.jpeg"><br><br> ,    ,      ,    ,        ,       ,         „,     “. <br><br>         .       ,    foo.mit.edu -&gt; goo.mit.edu — &gt;….  : » ,    ,       gooa.mit.edu".    , ,         . <br><br>          ,       DNS          .        NSEC3,       – -  , -  . <br><br> 52:00  <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Segurança de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 12: « »,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . <br><br>  Obrigado por ficar conosco.  Você gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usuários da Habr em um análogo exclusivo de servidores básicos que inventamos para você:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as opções estão disponíveis com RAID1 e RAID10, até 24 núcleos e até 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD de 1Gbps até dezembro de graça</b> quando pagar por um período de seis meses, você pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente nós temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um prédio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427087/">https://habr.com/ru/post/pt427087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427069/index.html">Repositório local do NPM em 5 minutos com seus pacotes e cache</a></li>
<li><a href="../pt427075/index.html">A história de um desenvolvimento</a></li>
<li><a href="../pt427077/index.html">Laplace Blur - É possível blub Laplace em vez de Gauss, quantas vezes é mais rápido e vale a pena a perda da precisão de 1/32</a></li>
<li><a href="../pt427079/index.html">NetApp Insight 2018</a></li>
<li><a href="../pt427081/index.html">Critérios da mente humana, do ponto de vista de um programador</a></li>
<li><a href="../pt427091/index.html">Verificação numérica da hipótese abc (sim, essa)</a></li>
<li><a href="../pt427093/index.html">Curso MIT "Segurança de sistemas de computadores". Aula 12: Segurança de Rede, Parte 3</a></li>
<li><a href="../pt427095/index.html">Antimônio - CAD de um mundo paralelo</a></li>
<li><a href="../pt427097/index.html">O aplicativo móvel ajuda a detectar depressão e outros problemas psicológicos nos estágios iniciais.</a></li>
<li><a href="../pt427101/index.html">O Google planeja cobrar dos fabricantes de dispositivos móveis até US $ 40 por cada dispositivo vendido</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>