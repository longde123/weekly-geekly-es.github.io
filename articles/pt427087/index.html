<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéõÔ∏è üôçüèª üõçÔ∏è Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 12: Seguran√ßa de Rede, Parte 2 ‚òùüèº üå™Ô∏è üåπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 12: Seguran√ßa de Rede, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427087/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: ‚ÄúModelo de Seguran√ßa de Rede‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: ‚ÄúSeguran√ßa de aplicativos da Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: ‚ÄúExecu√ß√£o Simb√≥lica‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: ‚ÄúLinguagem de Programa√ß√£o Ur / Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 12: Seguran√ßa de rede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>Aluno:</b> talvez voc√™ ainda tenha um problema de conflito de interesses, porque poderia usar 32 bits para endere√ßos pares e ter muitas portas para cada um deles.  Voc√™ provavelmente tem um conflito de n√∫meros de sequ√™ncia de todas essas conex√µes que obt√©m? <br><br>  <b>Professor:</b> verifica <b>-</b> se que esses n√∫meros de sequ√™ncia s√£o espec√≠ficos para o endere√ßo IP e o n√∫mero da porta do par de origem / destino.  Portanto, se essas s√£o portas diferentes, elas n√£o interferem uma com a outra.  Especificamente, as portas t√™m n√∫meros de s√©rie mais baixos. <br><br><img src="https://habrastorage.org/webt/ln/rp/sm/lnrpsmdw6g-ionqcpock0lqzf-s.jpeg"><br><br>  <b>Aluno:</b> se os n√∫meros de s√©rie forem globais, o invasor poder√° entrar na conex√£o entre outros clientes? <br><br>  <b>Professor:</b> Sim, este √© um bom ponto.  De fato, se o servidor aumenta o n√∫mero de s√©rie, por exemplo, em 64k para cada conex√£o, voc√™ se conecta ao servidor e, em seguida, outras 5 pessoas se conectam a ele, e aqui voc√™ pode organizar um ataque.  Ent√£o, at√© certo ponto, voc√™ est√° certo, √© um pouco problem√°tico.  Por outro lado, voc√™ provavelmente poderia fazer com que um pacote da √∫ltima linha de S-&gt; A fosse entregue imediatamente antes desse pacote na primeira linha de C-&gt; S.  Se voc√™ enviar seus pacotes um ap√≥s o outro, h√° uma boa chance de que eles cheguem ao servidor um por um tamb√©m. <br><br>  O servidor receber√° S-&gt; A e responder√° com este n√∫mero de sequ√™ncia (SNs).  Ser√° diferente dos (SNs) na segunda linha, mas com o n√∫mero de s√©rie imediatamente a seguir.  E ent√£o voc√™ saber√° exatamente qual n√∫mero de sequ√™ncia (SNs) deve ser inclu√≠do no terceiro pacote da sua sequ√™ncia. <br>  Portanto, acho que essa n√£o √© uma maneira muito confi√°vel de conectar-se ao servidor, √© baseada em suposi√ß√µes.  Mas se voc√™ organizar cuidadosamente seus pacotes da maneira certa, poder√° adivinhar facilmente a sequ√™ncia.  Ou talvez voc√™ tente v√°rias vezes e tenha sorte. <br><br>  <b>Aluno:</b> mesmo que os n√∫meros sejam gerados por acaso, voc√™ precisa adivinhar um dos 4 bilh√µes de n√∫meros poss√≠veis.  Isso n√£o √© demais, certo?  Eu acho que dentro de um ano voc√™ provavelmente poder√° entrar nessa rede. <br><br>  <b>Professor:</b> sim, voc√™ est√° absolutamente certo.  Voc√™ n√£o deve confiar muito no TCP em termos de seguran√ßa.  Porque voc√™ est√° certo, s√£o apenas 4 bilh√µes de palpites.  E voc√™ provavelmente pode enviar muitos pacotes durante o dia se tiver uma conex√£o razoavelmente r√°pida. <br><br>  Ent√£o, aqui temos um tipo de argumento interessante sobre a falta de confiabilidade do TCP, porque s√≥ temos 32 bits.  N√£o podemos proteg√™-lo de nenhuma maneira.  Mas acho que muitos aplicativos que dependem desse protocolo suficientemente n√£o pensam em seguran√ßa, e isso realmente se torna um problema. <br><br>  Mas voc√™ est√° absolutamente certo.  Na pr√°tica, voc√™ deseja usar algum tipo de criptografia, al√©m de obter garantias mais s√©rias de que ningu√©m falsificou seus dados, pois voc√™ usa chaves de criptografia com mais de 32 bits.  Na maioria dos casos, isso ainda √© eficaz na preven√ß√£o de viola√ß√µes da conex√£o TCP. <br><br>  Vamos ver agora por que √© ruim se as pessoas podem falsificar conex√µes TCP a partir de endere√ßos arbitr√°rios? <br><br>  Uma das raz√µes pelas quais isso √© ruim √© que ela pode afetar a autoriza√ß√£o com base no endere√ßo IP quando o servidor verifica qual o endere√ßo da solicita√ß√£o.  Se um servidor decidir se deve permitir ou negar a conex√£o com base no endere√ßo IP, isso pode ser um problema para um invasor que falsificou a conex√£o a partir de um endere√ßo de origem arbitr√°rio. <br><br>  Portanto, um exemplo em que isso foi um problema, hoje esse problema est√° basicamente resolvido, √© o uso de uma fam√≠lia de comandos r, como o rlogin.  Antes, era poss√≠vel executar algo como o rlogin em um computador em, digamos, athena.dialup.mit.edu.  E se sua conex√£o vier do host do MIT, esse comando rlogin ser√° bem-sucedido se voc√™ disser: "Sim, sou o usu√°rio de Alice neste computador, deixe-me fazer login como usu√°rio de Alice em outro computador".  E essa opera√ß√£o ser√° permitida, pois todos os computadores da rede mit.edu s√£o confi√°veis ‚Äã‚Äãpara fazer essas declara√ß√µes. <br><br>  Devo dizer que a conex√£o discada nunca teve esse problema.  Este composto usou Cerberus desde o in√≠cio.  Mas outros sistemas, √© claro, tinham esses problemas.  E este √© um exemplo de uso de um endere√ßo IP em um mecanismo de autentica√ß√£o de conex√£o quando o sistema verifica se o cliente que est√° chamando o servidor √© confi√°vel.  Ent√£o, o que costumava ser um problema n√£o √© mais um problema.  Mas confiar no IP ainda parece um plano ruim. <br><br><img src="https://habrastorage.org/webt/xp/zi/_1/xpzi_1guskiwnqi-52aokxflicq.jpeg"><br><br>  Agora o rlogin n√£o est√° mais em uso, foi recentemente substitu√≠do pelo shell SSH seguro, que √© um excelente protocolo de camada de rede.  Por outro lado, existem muitos outros exemplos de protocolos que dependem de autoriza√ß√£o baseada em endere√ßo IP.  Um deles √© o SMTP.  Ao enviar um email, voc√™ usa o SMTP para conversar com algum servidor de email para enviar mensagens.  Para evitar spam, muitos servidores SMTP aceitam apenas mensagens recebidas de um endere√ßo IP de origem espec√≠fico.  Por exemplo, o servidor de email Comcast aceita apenas emails de endere√ßos IP da Comcast.  O mesmo vale para servidores de correio MIT - eles aceitar√£o apenas emails de endere√ßos IP do MIT.  Mas t√≠nhamos pelo menos um servidor que n√£o funcionava como deveria, usando autentica√ß√£o IP. <br><br>  Tudo aqui n√£o √© t√£o ruim.  Na pior das hip√≥teses, voc√™ enviar√° algum spam pelo servidor de email.  Portanto, √© provavelmente por isso que eles ainda est√£o usando o rlogin, enquanto as coisas que permitem que voc√™ efetue login em uma conta arbitr√°ria pararam de usar a autentica√ß√£o baseada em IP. <br><br>  Ent√£o, por que esse mecanismo de autentica√ß√£o √© um plano ruim?  Como suposi√ß√£o, suponha que algum servidor usasse rlogin.  O que voc√™ faria para atacar?  Que mal poderia acontecer? <br><br>  <b>Aluno:</b> um invasor pode simplesmente entrar no seu computador, falsificar um usu√°rio que entrar√° na rede com seu nome de usu√°rio e obter acesso √† rede. <br><br>  <b>Professor:</b> sim, basicamente um invasor assume o controle de um computador.  Ele sintetiza dados que se parecem com um conjunto v√°lido de comandos rlogin que dizem: "Efetue login como usu√°rio e execute este comando no meu shell Unix". <br><br>  Voc√™ sintetiza esses dados (SNc + 1), monta todo o ataque e envia esses dados como se um usu√°rio leg√≠timo interagisse com o cliente rlogin e, em seguida, continue. <br><br><img src="https://habrastorage.org/webt/8v/b-/ws/8vb-ws9vmaat0zscptpwoh8-cze.jpeg"><br><br>  Bem, essa √© uma das raz√µes pelas quais voc√™ n√£o deseja que seus n√∫meros de sequ√™ncia TCP sejam adivinhados.  Outro problema √© que esses ataques de redefini√ß√£o redefinem o ataque.  Da mesma maneira que poder√≠amos enviar um pacote SYN, se soubermos o n√∫mero de s√©rie de algu√©m, podemos enviar um pacote de redefini√ß√£o da mesma maneira. <br><br>  Mencionamos brevemente um cliente legal que envia um pacote de redefini√ß√£o de conex√£o falso que um invasor estabeleceu.  Um invasor pode tentar enviar pacotes de descarte para uma conex√£o existente, se de alguma forma souber que o seu n√∫mero de sequ√™ncia est√° nessa conex√£o.  De fato, n√£o est√° claro o tamanho desse problema. <br><br>  Em algum n√≠vel, voc√™ deve assumir que todas as suas conex√µes TCP podem ser interrompidas em qualquer caso e a qualquer momento, ou seja, n√£o parece que sua rede √© confi√°vel.  Portanto, talvez voc√™ deva esperar uma desconex√£o. <br><br>  No caso em que os roteadores "conversam" entre si, essa suposi√ß√£o √© especialmente cr√≠tica.  Se voc√™ possui muitos roteadores que se comunicam usando alguns protocolos de roteamento, existem algumas conex√µes f√≠sicas entre eles.  Mas, al√©m dessas conex√µes f√≠sicas, eles se comunicam atrav√©s de um protocolo de rede que funciona atrav√©s de TCP.  De fato, em cada uma dessas conex√µes f√≠sicas que os roteadores usam para trocar informa√ß√µes de roteamento, uma sess√£o TCP √© iniciada.  O protocolo BGP √© usado aqui, sobre o qual falaremos mais adiante. <br><br>  Este protocolo BGP usa o fato de que, se a conex√£o TCP estiver ativa, a conex√£o f√≠sica tamb√©m estar√° ativa.  Portanto, se uma conex√£o TCP for interrompida, o roteador acredita que a conex√£o est√° interrompida e come√ßa a recontar todas as suas tabelas de roteamento. <br><br><img src="https://habrastorage.org/webt/v6/wj/cc/v6wjccjolqvci5pvynpn_uui-pm.jpeg"><br><br>  Portanto, se o advers√°rio deseja organizar algum tipo de ataque de nega√ß√£o de servi√ßo do DoS, ele pode tentar adivinhar os n√∫meros de s√©rie desses roteadores e interromper essas sess√µes.  Se a sess√£o TCP entre os dois roteadores estiver desativada, os dois roteadores consideram esta conex√£o morta e devem recontar todas as tabelas de roteamento, o que far√° com que as rotas mudem.  Depois disso, o invasor pode redefinir outra conex√£o e assim por diante. <br><br>  Portanto, este √© um ataque um tanto alarmante, e n√£o porque viola o segredo de outra pessoa e assim por diante, pelo menos n√£o diretamente, mas porque realmente causa muitos problemas de acesso para outros usu√°rios do sistema. <br><br>  <b>Aluno:</b> se voc√™ √© um invasor e deseja organizar um ataque direcionado contra um usu√°rio espec√≠fico, voc√™ pode simplesmente continuar enviando solicita√ß√µes para se conectar ao servidor em nome do endere√ßo IP e for√ß√°-lo a redefinir a conex√£o com o servidor? <br><br>  <b>Professor:</b> suponha que eu use o Gmail e voc√™ queira impedir que eu receba qualquer informa√ß√£o do Gmail; basta enviar pacotes para minha m√°quina, fingindo que eles v√™m do servidor do Gmail.  Nesse caso, voc√™ deve adivinhar os n√∫meros de porta de origem e destino corretos. <br><br>  O n√∫mero da porta de destino √© provavelmente 443 porque eu uso HTTPS.  Mas o n√∫mero da porta de origem ser√° algo aleat√≥rio de 16 bits.  Al√©m disso, os n√∫meros de s√©rie variam.  Portanto, se voc√™ n√£o adivinhar o n√∫mero de sequ√™ncia que est√° na minha janela TCP e que √© dezenas de kilobytes, n√£o ter√° √™xito. <br><br>  Ent√£o voc√™ tem que adivinhar uma quantidade razo√°vel de coisas.  N√£o h√° acesso Oracle aqui.  Voc√™ n√£o pode simplesmente pedir ao servidor o n√∫mero de s√©rie desse cara.  Esta √© a raz√£o pela qual isso tamb√©m n√£o funcionar√°. <br><br>  Portanto, muitos desses problemas foram corrigidos, incluindo esse item baseado em RST, especialmente para roteadores BGP.  Na verdade, havia duas corre√ß√µes engra√ßadas.  Uma coisa realmente mostra como voc√™ pode explorar coisas existentes ou us√°-las para corrigir problemas espec√≠ficos.  Ele usa a propriedade que esses roteadores se comunicam apenas entre si e n√£o com mais ningu√©m na rede.  Como resultado, se o pacote n√£o chegar de um roteador localizado na outra extremidade da conex√£o, esse pacote ser√° descartado. <br><br>  A implementa√ß√£o bem-sucedida dos desenvolvedores desses protocolos √© uma √°rea maravilhosa do pacote chamada "tempo de vida", ou TTL.  Este √© um campo de 8 bits decrementado por cada roteador para garantir que os pacotes n√£o terminem em um loop infinito.  O valor TTL m√°ximo √© 255 e diminui ainda mais. <br><br>  Ent√£o, o que estou fazendo com esses protocolos inteligentes?  Eles descartam qualquer pacote com um valor TTL que n√£o seja igual a 255. Como se o pacote tiver um valor de 255, ele poder√° vir apenas de um roteador do outro lado desta conex√£o.  E se o advers√°rio tentar injetar qualquer outro pacote na conex√£o BGP existente, ele ter√° um valor TTL menor que 255, porque esse valor ser√° reduzido por outros roteadores localizados ao longo do caminho de roteamento, incluindo este roteador.  Portanto, este pacote ser√° simplesmente rejeitado pelo destinat√°rio. <br><br>  Portanto, este √© um exemplo de uma combina√ß√£o inteligente de t√©cnicas compat√≠veis com vers√µes anteriores que resolvem esse problema muito espec√≠fico. <br><br><img src="https://habrastorage.org/webt/k4/ix/mo/k4ixmopv2goqdgdhy48-lh1wol4.jpeg"><br><br>  <b>Aluno:</b> O roteador inferior direito n√£o envia algo com um TTL de 255? <br><br>  <b>Professor:</b> Este √© um roteador f√≠sico.  E ele sabe que essas s√£o conex√µes separadas, ent√£o ele analisa o TTL e de onde veio o pacote.  Portanto, se o pacote vier do roteador superior esquerdo, ele n√£o ser√° aceito para uma conex√£o TCP entre ele e o roteador superior direito. <br><br>  Na maioria das vezes, esses roteadores confiam nos vizinhos imediatos e esse processo pode ser controlado usando o mecanismo de roteamento de caminhos m√∫ltiplos do Auto Pan. <br><br>  Outras corre√ß√µes para o BGP s√£o implementar alguma forma de cabe√ßalho de autentica√ß√£o, incluindo um cabe√ßalho de autentica√ß√£o MD5.  Mas, na realidade, os desenvolvedores se concentraram nesse aplicativo em particular, para o qual um ataque de redefini√ß√£o √© especialmente cr√≠tico. <br><br>  Esse problema persiste hoje.  Se houver alguma conex√£o de longo prazo e eu quero interromp√™-la, s√≥ preciso enviar um grande n√∫mero de pacotes RST, aproximadamente centenas de milhares, mas provavelmente n√£o 4 bilh√µes.  Como os servidores s√£o realmente um pouco vulner√°veis ‚Äã‚Äãa qual n√∫mero de sequ√™ncia eles aceitam para redefini√ß√£o. <br><br>  Pode ser qualquer pacote em uma janela espec√≠fica.  Nesse caso, o invasor pode interromper essa conex√£o sem muito esfor√ßo.  Esse ainda √© um problema para o qual n√£o existe uma solu√ß√£o realmente boa. <br><br>  E a √∫ltima coisa ruim que pode acontecer devido √† previsibilidade dos n√∫meros de sequ√™ncia √© a inje√ß√£o de dados nas conex√µes existentes.  Suponha que tenhamos um protocolo hipot√©tico semelhante ao rlogin, que na verdade n√£o executa autentica√ß√£o baseada em IP, portanto, voc√™ deve digitar sua senha para efetuar login. <br><br>  O problema √© que, assim que voc√™ digita sua senha, talvez sua conex√£o TCP seja simplesmente estabelecida e possa aceitar dados arbitr√°rios.  Portanto, o invasor s√≥ precisa esperar at√© que um de voc√™s fa√ßa logon no computador digitando sua senha. <br><br>  O invasor n√£o sabe qual √© a senha, mas assim que voc√™ estabelece uma conex√£o TCP, ele imediatamente tenta adivinhar seu n√∫mero de s√©rie e insere alguns dados na conex√£o existente.  Portanto, se eu puder adivinhar corretamente seu n√∫mero de s√©rie, isso permitir√° que eu finja que n√£o sou eu, mas voc√™ inseriu algum comando depois de se autenticar corretamente com uma senha. <br><br><img src="https://habrastorage.org/webt/ao/0n/xw/ao0nxw7zfmyfhjhmb56s6ht7l7s.jpeg"><br><br>  Tudo isso indica por que voc√™ realmente n√£o deseja confiar nesses n√∫meros de sequ√™ncia de 32 bits no sentido de seguran√ßa.  Mas vamos ver o que as modernas pilhas TCP realmente fazem para mitigar esse problema.  Uma abordagem para o problema que abordaremos nas pr√≥ximas 2 palestras √© implementar algum grau de seguran√ßa no n√≠vel do aplicativo.  Nesse n√≠vel, usaremos criptografia para autenticar, criptografar, assinar e verificar mensagens sem muito envolvimento do TCP. <br><br>  Alguns dos aplicativos existentes tamb√©m ajudam a resolver problemas de seguran√ßa ou, pelo menos, tornam mais dif√≠cil para um invasor explorar esses problemas.  As pessoas colocam isso em pr√°tica hoje, por exemplo, no Linux e Windows, mantendo diferentes n√∫meros de sequ√™ncia inicial para cada par de origem / destino. <br><br>  Portanto, a maioria das implementa√ß√µes TCP SYN ainda calcula esse n√∫mero de sequ√™ncia ISN inicial da mesma maneira que fizemos anteriormente.  Portanto, este √© um estilo antigo do ISN, digamos assim.  E para realmente gerar um n√∫mero de s√©rie para qualquer conex√£o em particular, adicionamos a esse ISN antigo um deslocamento aleat√≥rio de 32 bits.  Ou seja, adicionamos uma fun√ß√£o a ela - algo como uma fun√ß√£o hash ou SHA-1, ou algo melhor. <br><br><img src="https://habrastorage.org/webt/lm/wp/fm/lmwpfmcij_lsb9m2hggzeic9duy.jpeg"><br><br>  Esse recurso inclui o endere√ßo IP de origem, o n√∫mero da porta de origem, o endere√ßo IP de destino, o n√∫mero da porta de destino e alguma chave secreta que apenas o servidor conhece.  Assim, criamos uma boa oportunidade para qualquer conex√£o espec√≠fica determinar o endere√ßo IP e a porta do par de origem / destino, preservando todas as boas propriedades desse algoritmo de atribui√ß√£o de n√∫mero de s√©rie no estilo antigo. <br><br>  Mas se voc√™ tiver conex√µes de diferentes conjuntos de origem / destino, n√£o h√° nada que permita descobrir o valor exato do n√∫mero de s√©rie de outro conjunto de conex√µes.  Na verdade, voc√™ precisa adivinhar essa chave para calcular esse valor. <br><br>  Espero que o kernel do sistema operacional do servidor armazene essa chave em algum lugar da mem√≥ria e n√£o a entregue a ningu√©m.  √â assim que a maioria das pilhas TCP hoje resolve esse problema espec√≠fico no campo dos n√∫meros de sequ√™ncia comuns de 32 bits.  Isso n√£o √© muito bom, mas funciona. <br><br>  <b>Aluno:</b> voc√™ poderia repetir isso de novo?  Sobre a exclusividade da chave ... <br><br>  <b>Professor:</b> quando minha m√°quina √© inicializada ou quando qualquer m√°quina √© inicializada, gera uma chave aleat√≥ria.  Cada vez que voc√™ recarrega, ele gera uma nova chave.  Isso significa que cada vez que os n√∫meros de s√©rie de um determinado par de origem / destino mudam com a mesma frequ√™ncia de deslocamento.  Assim, para um determinado par de origem / destino, os par√¢metros de fun√ß√£o s√£o fixos.  Ent√£o, voc√™ segue a sequ√™ncia quando os n√∫meros evoluem de acordo com os n√∫meros de sequ√™ncia iniciais para novos compostos, mudando de acordo com um algoritmo espec√≠fico.  Assim, √© fornecida prote√ß√£o contra a inje√ß√£o de pacotes antigos de conex√µes anteriores em novas conex√µes, bem como prote√ß√£o contra a reatribui√ß√£o de pacotes. <br><br>  A √∫nica coisa para a qual precisamos desse n√∫mero de s√©rie da amostra antiga √© a escolha do algoritmo para evitar problemas com esses pacotes duplicados.  Anteriormente, consideramos que, se voc√™ obtiver um n√∫mero de s√©rie para uma conex√£o A: A -&gt; S: SYN (...), poder√° concluir uma conclus√£o sobre o n√∫mero de s√©rie da conex√£o ACK (SNs). <br><br><img src="https://habrastorage.org/webt/a0/w1/-x/a0w1-xenwugh56twqvkfkgzkai0.jpeg"><br><br>    ,         32-   ,     F.  ,         ,      . <br><br> <b>:</b>       ? <br><br> <b>:</b>     ,      .      F,    ,    F  ,   ,   ,       . <br><br> <b>:</b>      ,        ‚Ä¶ <br><br> <b>:</b>  ,     F  -    -,     .            -,   ,         .  , ,  ,   ,        .       ,     F     . <br><br> ,           TCP,      .          ,    ,   -  . <br><br>   ,        .   ,   TCP    ,       DNS,        .    ,  DNS   UDP ‚Äì   . UDP ‚Äî     ,      ,     .  UDP         .  ,    ,       ,        .     ,              ,       .         DNS-.       DNS? <br><br><img src="https://habrastorage.org/webt/zg/um/eo/zgumeoz-kafodeqfjnjyhkjotjs.jpeg"><br><br> ,   DNS-  C: C53 -&gt; S53     mit.edu,        53. <br><br>      S: S53 -&gt; C53       IP-,      ‚Äì  . <br><br>    ,         ,  ,     ,      .   ,      mit.edu,         . <br><br>   ,  DNS-   .     IP-,       ,    .        IP-  mit.edu  IP-.        ,     ,   ,      ,       .      ,                . <br><br><img src="https://habrastorage.org/webt/n0/f3/6e/n0f36e0r8uoipzszlz4mdtywwcm.jpeg"><br><br>   ,      ,   .           IP-. ,   ,   DNS-  .  ,       ,          IP- mit.edu. <br><br> <b>:</b>            ,    ,    ? <br><br> <b>:</b>   ,   . ,    ,    .       DNS-,    ,       .    2  .  ‚Äî    ,   16  .           ,    16 .      ID,    16 ,      . <br><br>  ,     ,        32  . ,  ,    ,          ,        . <br><br><img src="https://habrastorage.org/webt/py/ca/my/pycamyquozaz7jj41b01zovow7q.jpeg"><br><br>  ,    ,         . <br><br>  ,         DNS    DNS   .  ,          ,  DNS     . ,  DNS SEC,       .  ,         ,  ,   DNS-     .    ,  ,        . <br><br>           origin.  DNS    ,       IP-,  : ‚Äû,     ‚Äú.  ,     ,   ,     ,     ,     ,    .      ,        ,        ? <br><br>  ,    ‚Äì    DNS- ,     . , ,   .    -,    DNS-,    .   ,    DNS SEC,   ,         ,    DNS-   .  DNS-     , ,     ,      ‚Äì     ,      . <br><br>  DNS SEC       ,   NSEC.   ,     . , NSEC  ,     foo.mit.edu,         goo.mit.edu,          ,    . <br><br><img src="https://habrastorage.org/webt/vy/w6/a1/vyw6a1qrruintd6iwnsg8exluzs.jpeg"><br><br> ,    ,      ,    ,        ,       ,         ‚Äû,     ‚Äú. <br><br>         .       ,    foo.mit.edu -&gt; goo.mit.edu ‚Äî &gt;‚Ä¶.  : ¬ª ,    ,       gooa.mit.edu".    , ,         . <br><br>          ,       DNS          .        NSEC3,       ‚Äì -  , -  . <br><br> 52:00  <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Seguran√ßa de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 12: ¬´ ¬ª,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . <br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD de 1Gbps at√© dezembro de gra√ßa</b> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427087/">https://habr.com/ru/post/pt427087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427069/index.html">Reposit√≥rio local do NPM em 5 minutos com seus pacotes e cache</a></li>
<li><a href="../pt427075/index.html">A hist√≥ria de um desenvolvimento</a></li>
<li><a href="../pt427077/index.html">Laplace Blur - √â poss√≠vel blub Laplace em vez de Gauss, quantas vezes √© mais r√°pido e vale a pena a perda da precis√£o de 1/32</a></li>
<li><a href="../pt427079/index.html">NetApp Insight 2018</a></li>
<li><a href="../pt427081/index.html">Crit√©rios da mente humana, do ponto de vista de um programador</a></li>
<li><a href="../pt427091/index.html">Verifica√ß√£o num√©rica da hip√≥tese abc (sim, essa)</a></li>
<li><a href="../pt427093/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 12: Seguran√ßa de Rede, Parte 3</a></li>
<li><a href="../pt427095/index.html">Antim√¥nio - CAD de um mundo paralelo</a></li>
<li><a href="../pt427097/index.html">O aplicativo m√≥vel ajuda a detectar depress√£o e outros problemas psicol√≥gicos nos est√°gios iniciais.</a></li>
<li><a href="../pt427101/index.html">O Google planeja cobrar dos fabricantes de dispositivos m√≥veis at√© US $ 40 por cada dispositivo vendido</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>