<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🍳 🧑🏿‍🤝‍🧑🏻 👨🏼‍🎤 Bermigrasi ke Zimbra dengan imapsync 🕔 ⏮️ 🐄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selain fitur yang telah lama ditunggu-tunggu seperti Hierarchical Address Book dan dukungan resmi untuk Ubuntu 18.10 LTS, rilis Zimbra 8.8.12 memberi ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bermigrasi ke Zimbra dengan imapsync</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/458912/">  Selain fitur yang telah lama ditunggu-tunggu seperti Hierarchical Address Book dan dukungan resmi untuk Ubuntu 18.10 LTS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rilis Zimbra 8.8.12</a> memberi kami kabar tentang penghapusan yang akan datang dari dukungan sejumlah utilitas yang diperlukan untuk migrasi dari sistem surat lain ke Suite Kolaborasi Zimbra.  Secara khusus, dukungan untuk ZCS Migration Wizard untuk Domino sepenuhnya dihentikan, dan ZCS Migration Wizard untuk Exchange sekarang hanya akan mendukung mengimpor file PST dari Outlook.  Untuk menerapkan migrasi penuh, pengembang Zimbra Collaboration Suite menawarkan untuk menggunakan layanan online berbayar, tetapi tidak setiap perusahaan siap untuk memberikan data kotak surat mereka kepada pihak ketiga untuk alasan keamanan, dan tidak setiap perusahaan dapat membayar biaya tambahan terkait dengan migrasi ke Zimbra.  Khusus untuk pengguna tersebut, ada program imapsync, yang mampu menyediakan migrasi inkremental yang andal dari sistem email apa pun ke Zimbra. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="gambar"><a name="habracut"></a><br><br>  Imapsync adalah utilitas gratis dan gratis yang tersedia di repositori setiap distribusi Zimbra Linux yang didukung secara resmi.  Tujuan dari program ini adalah untuk mentransfer email antara server mail yang berbeda dan mengatasinya dengan sempurna.  Berkat fleksibilitas pengaturan, surat dapat ditransfer secara bertahap dan dalam mode yang sepenuhnya otomatis.  Mari kita lihat bagaimana Anda dapat menggunakan imapsync untuk bermigrasi dari Lotus Domino dan MS Exchange ke Zimbra Collaboration Suite. <br><br><h3>  Bermigrasi dari MS Exchange ke Zimbra </h3><br>  Agar migrasi email berhasil, Anda harus menyelesaikan serangkaian persiapan.  Pertama-tama, kita perlu membuat pengguna yang sama di server Zimbra seperti pada server MS Exchange dengan kata sandi yang sama.  Dalam melakukan tugas ini, sangat berguna untuk mengkonfigurasi otomatis pengguna Zimbra menggunakan AD.  Proses penyetelan otomatis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dijelaskan</a> dalam salah satu artikel kami sebelumnya. <br><br>  Setelah semua akun dari AD atau Exchange dimigrasikan, Anda perlu menginstal paket imapsync di server dengan Zimbra.  Jika Anda menggunakan Ubuntu sebagai OS untuk Zimbra, Anda dapat menginstal program menggunakan perintah <b>sudo apt-get install imapsync -y</b> , di CentOS dan RHEL, instalasi akan dilakukan dengan menggunakan perintah <b>sudo yum install imapsync -y</b> . <br><br>  Ketika instalasi paket dan semua dependensi selesai, mari kita lanjutkan untuk mengkonfigurasi server Exchange.  Untuk itu, kita perlu mengaktifkan layanan IMAP4.  Ini dilakukan dengan menjalankan file <b>services.msc</b> , setelah itu Anda harus pergi ke Tools&gt; Services -&gt; IMAP4 Microsoft Exchange -&gt; Mulai.  Setelah itu, Anda harus memberikan administrator akses ke kotak surat pengguna untuk menghindari penggunaan kata sandi pengguna selama migrasi, dan juga menonaktifkan atau mengkonfigurasi kebijakan batas kecepatan sehingga mereka tidak mengganggu migrasi.  Sekarang Anda dapat mulai mentransfer surat dari server ke server. <br><br>  Dalam infrastruktur kami, MS Exchange akan berlokasi di host <b>exchange.company.ru</b> , dan Zimbra akan berlokasi di host <b>zimbra.company.ru</b> .  Pengguna akan ditransfer satu per satu menggunakan baris perintah, di mana kami akan menjalankan utilitas imapsync dengan sejumlah parameter yang diperlukan untuk migrasi.  Pertama-tama, perlu dicatat bahwa di Zimbra, seperti di MS Exchange, akun administrator memiliki akses ke semua kotak surat pengguna, yang berarti bahwa untuk bermigrasi ke server surat baru, administrator sistem tidak perlu mengetahui kata sandi dari akun pengguna biasa.  Itulah sebabnya migrasi setiap pengguna dari MS Exchange ke Zimbra akan dilakukan menggunakan perintah dari formulir berikut: <br><br><pre><code class="plaintext hljs">imapsync --host1 exchange.company.ru --user1 "xxxxx" --authuser1 "yyyyy" --password1 "zzzzz" --nosslcheck --host2 zimbra.company.ru --user2 "XXXXX" --authuser1 "YYYYY" --password2 "ZZZZZ"</code> </pre> <br>  Dalam perintah ini, kami menetapkan host sumber ( <b>--host1</b> ) yang darinya imapsync akan mengambil data akun, serta host ( <b>--host2</b> ) tempat data ini akan ditulis.  Kami juga menentukan nama pengguna ( <b>--user1</b> ) pada host pertama dan nama pengguna yang sesuai ( <b>--user2</b> ) pada host kedua.  Untuk mengakses datanya, kami menentukan nama akun administrator ( <b>--authuser1</b> ) dan kata sandi administrator ( <b>--password1</b> ) dari host pertama, dan untuk merekam data yang dikirimkan, nama akun administrator ( <b>--authuser2</b> ) dan kata sandi administrator ( <b>--password2</b> ) dari host kedua. <br><br>  Dalam dunia yang ideal, perintah seperti itu akan cukup untuk mentransfer data pengguna antara server dengan MS Exchange dan Zimbra, tetapi, seperti yang sering terjadi, perbedaan antara solusi membuat koreksi sendiri dan oleh karena itu transfer data sederhana dari MS Exchange akan menyebabkan kekacauan yang mengerikan di kotak surat Zimbra .  Blok sandungan dalam hal ini adalah berbagai nama folder di kotak surat.  Untuk menghindari kebingungan selama transfer data, perlu membawa tim kami ke sekitar formulir berikut: <br><br><pre> <code class="plaintext hljs">imapsync --subscribe_all --maxmessagespersecond 4 --addheader --f1f2 "Inbox=INBOX" \ --f1f2 "Sent Items=Sent" --f1f2 "Sent items=Sent" --exclude "^Journal|^Tasks|^Trash|Contacts|Calendar|RSS Feeds" \ --useheader "Message-ID" --buffersize 8192000 --nosyncacls --allowsizemismatch --usecache --syncinternaldates --skipsize --nofoldersizes \ --tls1 --port1 143 --user1 "xxxxxxxxxx" --authuser1 "besadmin" --password1 "XXXXXXX" \ --host2 'xxxxxxx' --user2 "xxxxxx" --authuser2 "XXXXXX" --password2 "XXXX" --tls2 --port2 7143 \ --regextrans2 "s/Inbox1/INBOX/i" --regextrans2 "s/Sent Items/Sent/i" --regextrans2 "s/sent-mail/Sent/i" --regextrans2 "s/Deleted Items/Trash/i" --regextrans2 "s/Deleted Messages/Trash/" \ --delete2duplicates --timeout 600 --pidfile "impasync.local.pid" --logfile "imapsync.log" --sep1 "/" --errorsmax "100"</code> </pre> <br>  Perhatikan bahwa ini bukan skrip universal yang akan bekerja dengan sempurna di infrastruktur apa pun.  Banyak hal di dalamnya mungkin tergantung pada berbagai fitur infrastruktur Anda.  Itulah sebabnya, sebelum memulai migrasi skala penuh, pastikan untuk menguji transfer data antar sistem pada sejumlah akun bisnis yang tidak penting. <br><br>  Biarkan banyak parameter dengan imapsync diluncurkan tidak membuat Anda takut.  kebanyakan dari mereka dibutuhkan secara tepat sehingga ketika mentransfer folder dari kotak surat tidak ada kebingungan dan semua elemen dari MS Exchange ditransfer ke Zimbra.  Misalnya, parameter <b>--subscribe_all</b> memungkinkan imapsync untuk mendapatkan semua folder di akun Anda sehingga Anda dapat menggunakannya nanti.  <b>Opsi --f1f2</b> memungkinkan <b>Anda</b> mengubah nama folder selama sinkronisasi.  Artinya, saat melakukan sinkronisasi, misalnya.  folder Terkirim mengubah namanya menjadi Terkirim, yang memungkinkan Anda untuk menyesuaikan isinya dengan sempurna ke dalam struktur folder Zimbra Collaboration Suite.  Parameter <b>--regextrans2</b> juga memungkinkan Anda untuk mengubah nama folder dan didasarkan pada mekanisme regex dari bahasa pemrograman Perl, sehingga mereka yang terbiasa dengan bahasa ini akan dengan mudah mempelajari parameter ini. <br><br>  Untuk menjelaskan apa yang <b>dilakukan opsi --addheader</b> dan <b>--useheader</b> , perlu <b>diselidiki</b> bagaimana tepatnya sinkronisasi huruf dalam imapsync terjadi.  Faktanya adalah bahwa untuk menyinkronkan imapsync, perlu mengidentifikasi huruf pada kedua server untuk memutuskan apakah akan menyinkronkannya atau tidak.  Untuk memverifikasi mereka, utilitas ini menggunakan parameter seperti "Id-Pesan:" dan "Diterima:" (nomor identifikasi dan waktu penerimaan), yang tidak ada dalam email seperti itu, seperti konsep.  Untuk menyinkronkannya secara normal, kita memerlukan perintah --addheader.  Ini memungkinkan Anda untuk menambahkan nomor identifikasi kepada mereka untuk mengidentifikasi dan membandingkan surat-surat semacam itu selama sinkronisasi.  Parameter --useheader memungkinkan Anda membandingkan huruf menggunakan hanya satu dari dua parameter selama sinkronisasi. <br><br>  Setelah menulis skrip yang sempurna yang akan memungkinkan kami mentransfer transfer akun yang sempurna dari MS Exchange ke Zimbra, masalah yang signifikan tetap ada, yang terkait dengan fakta bahwa kami masih harus mentransfer pengguna antar server satu per satu.  Ini tidak terlalu optimal, terutama di perusahaan-perusahaan di mana terdapat banyak karyawan dan jumlah kotak surat diukur dalam ribuan.  Namun, proses ini dapat dioptimalkan secara signifikan dengan membuat daftar akun, dan kemudian menulis skrip kecil yang secara otomatis mentransfer surat berdasarkan nama akun.  Untuk melakukan ini, kita akan membuat file <b>imap_users</b> dan menambahkan semua data yang diperlukan untuk itu dalam bentuk berikut: <br><br><pre> <code class="plaintext hljs">domains=( domain1\ domain2) users=( user1@domain1\ user2@domain1\ user3@domain1\ user1@domain2\ user2@domain2\ user3@domain2)</code> </pre> <br>  Setelah itu, kita akan menulis skripnya sendiri.  Kami mendapat sesuatu seperti ini: <br><br><pre> <code class="plaintext hljs">. imap_users src_srv = exchange.company.ru dest_srv = zimbra.company.ru for ((i = 0; i &lt; ${#users[@]}; i++ )) do /usr/bin/imapsync --subscribe_all --maxmessagespersecond 4 --addheader --f1f2 "Inbox=INBOX" \ --f1f2 "Sent Items=Sent" --f1f2 "Sent items=Sent" --exclude "^Journal|^Tasks|^Trash|Contacts|Calendar|RSS Feeds" \ --useheader "Message-ID" --buffersize 8192000 --nosyncacls --allowsizemismatch --usecache --syncinternaldates --skipsize --nofoldersizes \ --tls1 --port1 143 --host1 $src_srv --user1 ${users[$i]} --authuser1 "besadmin" --password1 "XXXXXXX" --nosslcheck \ --host2 $dest_srv --user2 ${users[$i]} --authuser2 "XXXXXX" --password2 "XXXX" --tls2 --port2 7143 \ --regextrans2 "s/Inbox1/INBOX/i" --regextrans2 "s/Sent Items/Sent/i" --regextrans2 "s/sent-mail/Sent/i" --regextrans2 "s/Deleted Items/Trash/i" --regextrans2 "s/Deleted Messages/Trash/" \ --delete2duplicates --timeout 600 --pidfile "impasync.local.pid" --logfile "imapsync.log" --sep1 "/" --errorsmax "100" done</code> </pre> <br>  Karena transfer data bersifat inkremental, pertama-tama Anda dapat mentransfer sebagian besar data di antara server, dan kemudian, dalam jeda teknis singkat, mentransfer sejumlah kecil data yang telah terakumulasi sejak sinkronisasi terakhir, mentransfer semua surat masuk ke Zimbra dan menjadikannya sistem surat utama.  Kami mengingatkan Anda bahwa sebelum bermigrasi ke sistem surat baru, Anda perlu memberi tahu karyawan tentang transisi yang akan datang, melakukan pelatihan dengan mereka, dan juga menyiapkan memo tentang di mana di Zimbra fungsi-fungsi biasa mereka berada.  Berkat ini, migrasi akan berjalan lebih lancar dan tidak menciptakan masalah bagi bisnis. <br><br><h3>  Bermigrasi dari Lotus / Domino ke Zimbra </h3><br>  Dalam banyak hal, proses migrasi dari sistem surat IBM menggunakan imapsync mengulangi proses migrasi dari MS Exchange dan sistem surat lainnya.  Namun, dalam proses migrasi langsung, banyak administrator menemukan kesalahan dengan pemutusan melalui IMAP dan, karenanya, penghentian sinkronisasi.  Pada saat yang sama, tidak ada pesan kesalahan muncul di log.  Jika selama migrasi dari Lotus / Domino Anda mengalami masalah ini, maka tindakan berikut akan membantu menyelesaikan masalah ini: <br><br><ul><li>  Luncurkan Lotus Notes dengan hak administrator dan pergi ke Buku Alamat. </li><li>  Dalam pengaturan Buku Alamat, ubah format pesan default ke “Preferred MIME” </li><li>  Dalam Lotus Notes yang sama yang berjalan dengan hak administrator, ubah format database pengguna ke Mail (R6), yang diambil dari server, dan bukan dari klien email </li><li>  Matikan Lotus Domino Router dari konsol administrasi Domino menggunakan perintah berhenti router </li><li>  Kemas basis data pengguna dari konsol administrasi Domino menggunakan perintah "load compact userdb.nsf" </li><li>  Periksa database untuk kesalahan dengan menjalankan perintah fixup userdb.nsf dari konsol Domino (bukan dari konsol administrator) </li><li>  Dari konsol administrasi Domino, jalankan perintah "convert -e userdb.nsf" untuk menyiapkan basis data untuk transfer imap </li><li>  Dari konsol administrasi Domino, jalankan perintah "convert -h userdb.nsf" untuk menambahkan header imap ke semua pesan. </li></ul><br>  Setelah menyelesaikan semua langkah ini, mentransfer surat dari Lotus / Domino ke Zimbra menggunakan imapsync harus lulus tanpa masalah. <br><br>  Selain utilitas untuk migrasi, klien Zimbra untuk komputer desktop dan perangkat seluler dibiarkan tanpa dukungan.  Juga, klien web HTML telah dihapus dari dukungan, yang digunakan untuk memastikan kompatibilitas dengan browser yang lebih lama dan perangkat berdaya rendah.  Semuanya dapat dengan mudah diganti oleh pelanggan pihak ketiga, karena fakta bahwa Zimbra mendukung hampir semua standar dan protokol terbuka. <br><br>  Ingatlah bahwa migrasi antara server Zimbra dapat dilakukan dengan menggunakan Alat Migrasi Zextras gratis, yang dapat Anda unduh di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web</a> resmi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Zextras</a> . <br><br>  Untuk semua pertanyaan yang terkait dengan Zextras Suite, Anda dapat menghubungi perwakilan Zextras Katerina Triandafilidi melalui email katerina@zextras.com </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458912/">https://habr.com/ru/post/id458912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458902/index.html">5 Kesalahan Umum Pemula Python</a></li>
<li><a href="../id458904/index.html">Visualisasi jumlah kemenangan untuk tim NBA menggunakan grafik batang animasi di R</a></li>
<li><a href="../id458906/index.html">[Yekaterinburg, pengumuman] Flutteron - sebuah lokakarya tentang pengembangan Flutter</a></li>
<li><a href="../id458908/index.html">Memindai dokumen melalui jaringan</a></li>
<li><a href="../id458910/index.html">Benchmarking PostgreSQL dengan halaman Linux yang besar</a></li>
<li><a href="../id458914/index.html">Apa (tidak) yang perlu Anda ketahui untuk membuat game di Unity</a></li>
<li><a href="../id458916/index.html">Di bawah kap React. Kami menulis implementasi kami dari awal</a></li>
<li><a href="../id458918/index.html">Apa yang bisa Anda pelajari dari desain gim kasual</a></li>
<li><a href="../id458920/index.html">Konferensi untuk penggemar DevOps</a></li>
<li><a href="../id458922/index.html">Cara pindah dari ESXi ke KVM / LXD dan tidak kehilangan akal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>