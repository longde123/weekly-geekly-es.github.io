<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÑ üçΩÔ∏è üè¢ Private Methoden ohne Unterstriche und Schnittstellen in Python üëé üé≠ üòå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr. Vor kurzem war ich verr√ºckt nach Design - Zugriffsmodifikatoren und Schnittstellen, dann habe ich es in die Programmiersprache Python port...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Private Methoden ohne Unterstriche und Schnittstellen in Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443192/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/o_/g4/oi/o_g4oiajcfginaa8zihikokzwau.png"></div><br><br>  Hallo Habr.  Vor kurzem war ich verr√ºckt nach Design - Zugriffsmodifikatoren und Schnittstellen, dann habe ich es in die Programmiersprache Python portiert.  Ich frage unter kat - ich teile die Ergebnisse und wie es funktioniert.  F√ºr Interessierte gibt es am Ende des Artikels einen Link zum Projekt auf Github. <br><a name="habracut"></a><br><h2>  Zugriffsmodifikatoren </h2><br>  Zugriffsmodifikatoren beschr√§nken den Zugriff auf Objekte - auf Methoden ihrer Klasse oder auf untergeordnete Klassen - auf Methoden ihrer √ºbergeordneten Klasse.  Durch die Verwendung von Zugriffsmodifikatoren k√∂nnen Daten in der Klasse ausgeblendet werden, sodass niemand au√üerhalb die Arbeit dieser Klasse st√∂ren kann. <br><br>  <b>Private</b> Methoden sind nur innerhalb der Klasse verf√ºgbar, <b>gesch√ºtzt</b> (innerhalb) - innerhalb der Klasse und in untergeordneten Klassen. <br><br><h3>  Wie private und gesch√ºtzte Methoden in Python implementiert werden </h3><br>  Spoiler - auf der Ebene der √úbereinstimmung, dass Erwachsene sie einfach nicht au√üerhalb des Klassenzimmers anrufen.  Vor privaten Methoden m√ºssen Sie einen doppelten Unterstrich schreiben, bevor Sie einen gesch√ºtzten.  Und Sie k√∂nnen trotz ihres "eingeschr√§nkten" Zugriffs weiterhin auf die Methoden zugreifen. <br><br><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_start_engine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Engine's sound."</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self._start_engine() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: car = Car() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">"Engine's sound."</span></span> == car.run() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">"Engine's sound."</span></span> == car._start_engine()</code> </pre> <br>  Folgende Nachteile k√∂nnen festgestellt werden: <br><br><ul><li>  Wenn die Methode <b>_start_engine</b> einige Klassenvariablen aktualisiert oder den Status beibehalten und nicht nur eine ‚Äûdumme Berechnung‚Äú zur√ºckgegeben hat, k√∂nnten Sie etwas f√ºr die zuk√ºnftige Arbeit mit der Klasse <b>besch√§digt</b> haben.  Sie erlauben sich nicht, etwas im Motor Ihres Autos zu reparieren, weil Sie dann nirgendwo hingehen, oder? </li><li>  Der Flie√üpunkt des vorherigen - um sicherzustellen, dass Sie "sicher" (das Aufrufen der Methode schadet der Klasse selbst nicht) eine gesch√ºtzte Methode verwenden k√∂nnen - m√ºssen Sie den Code untersuchen und Zeit verbringen. </li><li>  Die Autoren der Bibliotheken hoffen, dass niemand die gesch√ºtzten und privaten Methoden der Klassen verwendet, die Sie in Ihren Projekten verwenden.  Daher k√∂nnen sie die Implementierung in jeder Version √§ndern (was sich aufgrund der Abw√§rtskompatibilit√§t nicht auf √∂ffentliche Methoden auswirkt, aber Sie werden darunter leiden). </li><li>  Der Autor der Klasse, Ihr Kollege, erwartet, dass Sie die technische Verschuldung des Projekts nicht durch eine gesch√ºtzte oder private Methode au√üerhalb der von ihm erstellten Klasse erh√∂hen.  Schlie√ülich muss derjenige, der es umgestaltet oder modifiziert (private Klassenmethode), sicherstellen (z. B. durch Tests), dass seine √Ñnderungen Ihren Code nicht besch√§digen.  Und wenn sie es brechen, muss er Zeit damit verbringen, dieses Problem zu l√∂sen (mit einer Kr√ºcke, weil er es gestern braucht). </li><li>  Vielleicht stellen Sie sicher, dass andere Programmierer keine gesch√ºtzten oder privaten Methoden f√ºr die Code√ºberpr√ºfung verwenden und ‚Äûdaf√ºr schlagen‚Äú, also verbringen Sie Zeit. </li></ul><br><h3>  So implementieren Sie gesch√ºtzte Methoden mithilfe einer Bibliothek </h3><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> accessify <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> protected <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class">:</span></span> @protected <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start_engine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Engine's sound."</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.start_engine() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: car = Car() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">"Engine's sound."</span></span> == car.run() car.start_engine()</code> </pre><br>  Der Versuch, die Methode <b>start_engine</b> au√üerhalb der Klasse <b>aufzurufen</b> , f√ºhrt zu folgendem Fehler (die Methode ist gem√§√ü der Zugriffsrichtlinie nicht verf√ºgbar): <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"examples/access/private.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; car.start_engine() File <span class="hljs-string"><span class="hljs-string">"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/accessify/main.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">92</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> private_wrapper class_name=instance_class.__name__, method_name=method.__name__, accessify.errors.InaccessibleDueToItsProtectionLevelException: Car.start_engine() <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> inaccessible due to its protection level</code> </pre><br>  Verwenden der Bibliothek: <br><br><ul><li>  Sie m√ºssen keine h√§sslichen (subjektiven) Unterstriche oder doppelten Unterstriche verwenden. </li><li>  Sie erhalten eine sch√∂ne (subjektive) Methode zum Implementieren von Zugriffsmodifikatoren im Code - <b>private</b> und <b>gesch√ºtzte</b> Dekorateure. </li><li>  √úbertragen Sie die Verantwortung von der Person auf den Dolmetscher. </li></ul><br>  Wie es funktioniert: <br><br><ol><li>  Der <b>private</b> oder <b>gesch√ºtzte</b> Dekorator - der "h√∂chste" Dekorator - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wird vor der Klassenmethode ausgel√∂st</a> , die als privater oder gesch√ºtzter Zugriffsmodifikator deklariert wurde. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yn/gd/7m/yngd7mlnbovpjmmzvl4prwhrqjs.png"></div><br></li><li>  Mithilfe der integrierten <b>Inspect-</b> Bibliothek <b>ruft</b> der Dekorateur <b>das</b> aktuelle Objekt aus dem Aufrufstapel ab - <b>inspect.currentframe ()</b> .  Dieses Objekt verf√ºgt √ºber die folgenden Attribute, die f√ºr uns n√ºtzlich sind: den Namespace (lokale) und den Link zum vorherigen Objekt aus dem Aufrufstapel (das Objekt, das die Methode mit dem Zugriffsmodifikator aufruft). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h5/tp/v8/h5tpv83v549-ozspfwcbxabvh6c.png"></div><br>  <i>(Sehr vereinfachte Darstellung)</i> <br></li><li>  <b>inspect.currentframe (). f_back</b> - Verwenden Sie dieses Attribut, um zu √ºberpr√ºfen, ob sich das vorherige Objekt aus dem Aufrufstapel im Klassenk√∂rper befindet oder nicht.  Schauen Sie sich dazu den Namespace - <b>f_locals an</b> .  Wenn der Namespace ein <b>self-</b> Attribut enth√§lt, wird die Methode innerhalb der Klasse aufgerufen, wenn nicht, au√üerhalb der Klasse.  Wenn Sie eine Methode mit einem privaten oder gesch√ºtzten Zugriffsmodifikator au√üerhalb der Klasse aufrufen, tritt ein Zugriffsrichtlinienfehler auf. </li></ol><br><h2>  Schnittstellen </h2><br>  Schnittstellen sind ein Vertrag √ºber die Interaktion mit einer Klasse, die sie implementiert.  Die Schnittstelle enth√§lt die Methodensignaturen (den Namen der Funktionen, die Eingabeargumente) und die Klasse, die die Schnittstelle implementiert, implementiert nach den Signaturen die Logik.  Zusammenfassend k√∂nnen Sie sicher sein, dass beide Objekte dieser Klassen dieselben Methoden haben, wenn zwei Klassen dieselbe Schnittstelle implementieren. <br><br><h3>  Beispiel </h3><br>  Wir haben eine <b>Benutzerklasse</b> , die das <b>Speicherobjekt verwendet</b> , um einen neuen Benutzer zu erstellen. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, storage)</span></span></span><span class="hljs-function">:</span></span> self.storage = storage <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storage.create_with_name(name=name)</code> </pre><br>  Sie k√∂nnen den Benutzer mit <b>DatabaseStorage.create_with_name</b> in der Datenbank speichern. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DatabaseStorage</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_with_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre><br>  Sie k√∂nnen den Benutzer mit <b>FileStorage.create_with_name</b> in Dateien <b>speichern</b> . <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileStorage</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_with_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre><br>  Aufgrund der Tatsache, dass die Signaturen der Methoden <b>create_with_name</b> (Name, Argumente) f√ºr die Klassen gleich sind, muss sich die <b>Benutzerklasse</b> keine Gedanken dar√ºber machen, f√ºr welches Objekt sie ersetzt wurde, wenn beide dieselben Methoden haben.  Dies kann erreicht werden, wenn die Klassen <b>FileStorage</b> und <b>DatabaseStorage</b> dieselbe Schnittstelle implementieren ( <b>dh</b> sie sind an den Vertrag gebunden, um eine Methode mit Logik darin zu definieren). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> settings.config.storage = FileStorage: storage = FileStorage() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> settings.config.storage = DatabaseStorage: storage = DatabaseStorage() user = User(storage=storage) user.create_with_name(name=...)</code> </pre><br><h3>  So arbeiten Sie mit Schnittstellen mithilfe der Bibliothek </h3><br>  Wenn eine Klasse eine Schnittstelle implementiert, muss die Klasse <b>alle Methoden der Schnittstelle enthalten</b> .  Im folgenden Beispiel enth√§lt die HumanInterface-Schnittstelle die eat-Methode, und die Human-Klasse implementiert sie, implementiert jedoch nicht die eat-Methode. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> accessify <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> implements <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanInterface</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(food, *args, allergy=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: @implements(HumanInterface) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Das Skript wird mit folgendem Fehler beendet: <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"examples/interfaces/single.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; @implements(HumanInterface) File <span class="hljs-string"><span class="hljs-string">"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/accessify/interfaces.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> decorator interface_method_arguments=interface_method.arguments_as_string, accessify.errors.InterfaceMemberHasNotBeenImplementedException: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">does</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">not</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implement</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">member</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanInterface</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(food, args, allergy, kwargs)</span></span></span></span></code> </pre><br>  Wenn eine Klasse eine Schnittstelle implementiert, muss die Klasse alle Methoden der Schnittstelle enthalten, <b>einschlie√ülich aller eingehenden Argumente</b> .  Im folgenden Beispiel enth√§lt die HumanInterface-Schnittstelle die eat-Methode, die 4 Argumente f√ºr die Eingabe verwendet, und die Human-Klasse implementiert sie, implementiert jedoch die eat-Methode mit nur 1 Argument. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> accessify <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> implements <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanInterface</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(food, *args, allergy=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: @implements(HumanInterface) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(food)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Das Skript wird mit folgendem Fehler beendet: <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"examples/interfaces/single_arguments.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; @implements(HumanInterface) File <span class="hljs-string"><span class="hljs-string">"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/accessify/interfaces.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">87</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> decorator interface_method_arguments=interface_method.arguments_as_string, accessify.errors.InterfaceMemberHasNotBeenImplementedWithMismatchedArgumentsException: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">member</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanInterface</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(food, args, allergy, kwargs)</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mismatched</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arguments</span></span></span></span></code> </pre><br>  Wenn eine Klasse eine Schnittstelle implementiert, muss die Klasse alle Methoden der Schnittstelle enthalten, einschlie√ülich eingehender Argumente und <b>Zugriffsmodifikatoren</b> .  Im folgenden Beispiel enth√§lt die HumanInterface-Schnittstelle die private eat-Methode, und die Human-Klasse implementiert sie, implementiert jedoch nicht den privaten Zugriffsmodifikator f√ºr die eat-Methode. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> accessify <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> implements, private <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanInterface</span></span></span><span class="hljs-class">:</span></span> @private @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(food, *args, allergy=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: @implements(HumanInterface) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(food, *args, allergy=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Das Skript wird mit folgendem Fehler beendet: <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"examples/interfaces/single_access.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; @implements(HumanInterface) File <span class="hljs-string"><span class="hljs-string">"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/accessify/interfaces.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">77</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> decorator interface_method_name=interface_method.name, accessify.errors.ImplementedInterfaceMemberHasIncorrectAccessModifierException: Human.eat(food, args, allergy, kwargs) mismatches HumanInterface.eat() member access modifier.</code> </pre><br>  Eine Klasse kann mehrere (unbegrenzt viele) Schnittstellen implementieren.  Wenn eine Klasse mehrere Schnittstellen implementiert, muss die Klasse <b>alle Methoden aller Schnittstellen enthalten, einschlie√ülich eingehender Argumente und Zugriffsmodifikatoren</b> .  Im folgenden Beispiel implementiert die Human-Klasse die eat-Methode der HumanBasicsInterface-Schnittstelle, implementiert jedoch nicht die Love-Methode der HumanSoulInterface-Schnittstelle. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> accessify <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> implements <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanSoulInterface</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">love</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, who, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanBasicsInterface</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(food, *args, allergy=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: @implements(HumanSoulInterface, HumanBasicsInterface) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">love</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, who, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Das Skript wird mit folgendem Fehler beendet: <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"examples/interfaces/multiple.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; @implements(HumanSoulInterface, HumanBasicsInterface) File <span class="hljs-string"><span class="hljs-string">"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/accessify/interfaces.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> decorator interface_method_arguments=interface_method.arguments_as_string, accessify.errors.InterfaceMemberHasNotBeenImplementedException: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">does</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">not</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implement</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">member</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanBasicsInterface</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eat</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(food, args, allergy, kwargs)</span></span></span></span></code> </pre><br>  Killer-Feature - Eine Schnittstellenmethode kann "angeben", welche Fehler eine Methode einer Klasse, die sie implementiert, "werfen" soll.  Im folgenden Beispiel wird "deklariert", dass die "love" -Methode der "HumanInterface" -Schnittstelle eine "HumanDoesNotExistError" -Ausnahme und ausl√∂sen soll <br>  "HumanAlreadyInLoveError", aber die "Liebes" -Methode der "Human" -Klasse "wirft" keinen von ihnen. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> accessify <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> implements, throws <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanDoesNotExistError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Exception)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanAlreadyInLoveError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Exception)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HumanInterface</span></span></span><span class="hljs-class">:</span></span> @throws(HumanDoesNotExistError, HumanAlreadyInLoveError) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">love</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, who, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: @implements(HumanInterface) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">love</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, who, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> who <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> HumanDoesNotExistError(<span class="hljs-string"><span class="hljs-string">'Human whom need to love does not exist'</span></span>)</code> </pre><br>  Das Skript wird mit folgendem Fehler beendet: <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"examples/interfaces/throws.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">21</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; @implements(HumanInterface) File <span class="hljs-string"><span class="hljs-string">"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/accessify/interfaces.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">103</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> decorator class_method_arguments=class_member.arguments_as_string, accessify.errors.DeclaredInterfaceExceptionHasNotBeenImplementedException: Declared exception HumanAlreadyInLoveError by HumanInterface.love() member has <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> been implemented by Human.love(self, who, args, kwargs)</code> </pre><br>  Zusammenfassend l√§sst sich sagen, dass Sie die Bibliothek verwenden: <br><br><ul><li>  Sie k√∂nnen eine oder mehrere Schnittstellen implementieren. </li><li>  Schnittstellen werden mit Zugriffsmodifikatoren kombiniert. </li><li>  Sie erhalten eine Trennung von Schnittstellen und abstrakten Klassen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">abc-Modul in Python</a> ). Jetzt m√ºssen Sie keine abstrakten Klassen mehr als Schnittstellen verwenden, wenn Sie dies getan haben (ich habe es getan). </li><li>  Im Vergleich zu abstrakten Klassen.  Wenn Sie nicht alle Methodenargumente √ºber die Schnittstelle definiert haben, wird bei Verwendung einer abstrakten Klasse eine Fehlermeldung angezeigt - Nr. </li><li>  Im Vergleich zu abstrakten Klassen.  Bei Verwendung von Schnittstellen wird beim Erstellen der Klasse eine Fehlermeldung angezeigt (wenn Sie die Klasse geschrieben und die <b>* .py-</b> Datei aufgerufen haben).  In abstrakten Klassen wird bereits beim Aufrufen einer Methode eines Klassenobjekts ein Fehler angezeigt. </li></ul><br>  Wie es funktioniert: <br><br><ol><li>  Mit der integrierten <b>Integrationsbibliothek</b> im <b>Implementierungsdekorator</b> werden alle Methoden der Klasse und ihrer Schnittstellen - <b>inspect.getmembers ()</b> - <b>abgerufen</b> .  Ein eindeutiger Index einer Methode ist eine Kombination aus Name und Typ (statische Methode, Eigenschaft usw.). </li><li>  Und mit <b>inspect.signature ()</b> die Argumente zur Methode. </li><li>  Wir durchlaufen alle Methoden der Schnittstelle und pr√ºfen, ob es in der Klasse, die die Schnittstelle implementiert, eine solche Methode (anhand eines eindeutigen Index) gibt, ob die eingehenden Argumente identisch sind, ob die Zugriffsmodifikatoren identisch sind und ob die Methode die deklarierten Fehler in der Schnittstellenmethode implementiert. </li></ol><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit auf den Artikel.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zum Projekt auf Github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de443192/">https://habr.com/ru/post/de443192/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de443182/index.html">Ziehen Sie YPbPr vom Commodore 64</a></li>
<li><a href="../de443184/index.html">Von der Liebe zur Kontrolle einen Schritt</a></li>
<li><a href="../de443186/index.html">3CX Technical Support antwortet - 5 IP PBX-Sicherheitsregeln</a></li>
<li><a href="../de443188/index.html">Drei Augen h√§ngen an einer S√§ule oder die Geschichte, dass f√ºnf Beine von ATtiny13 ausreichen</a></li>
<li><a href="../de443190/index.html">Einf√ºhrung in die Kubernetes-Netzwerkrichtlinien f√ºr Sicherheitsexperten</a></li>
<li><a href="../de443194/index.html">Die WFIRM-Ingenieure haben einen Bioprinter erfunden, der die Haut direkt auf eine Wunde druckt</a></li>
<li><a href="../de443196/index.html">Keine Minute offline - Auswahl eines industriellen LTE-Routers</a></li>
<li><a href="../de443198/index.html">Laut Mark Zuckerberg arbeitet Facebook an einer neuronalen Schnittstelle zum Lesen von Gedanken</a></li>
<li><a href="../de443200/index.html">Iranische Hacker stehlen Terabyte an Daten von Citrix</a></li>
<li><a href="../de443202/index.html">Kundgebung gegen die Isolation von Runet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>