<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง๐ฝ โข๏ธ ๐ Fort Byte Car (ูุฃูุซุฑ) ุฃูุฑููุง ุงูุฃุตููุฉ โช๏ธ ๐ โช</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุนู ุ ูุนู ุ ุฅูู "ุงูุจุงูุช" ููู ุจุงููุบุฉ ุงูููุฏูุฉ (ูููุณ ุงูููุฏูุฉ). ุณุฃุจุฏุฃ ุจุงูุชุฑุชูุจ. ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ููุง ุ ุนูู Habrรฉ ุ ุจุฏุฃุช ุชุธูุฑ ููุงูุงุช ุญูู bytecode. ุฐุงุช ูุฑุฉ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fort Byte Car (ูุฃูุซุฑ) ุฃูุฑููุง ุงูุฃุตููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431932/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/a59/e93/dbba59e932ecdb4b0c28896a7e6fc3e3.jpg" alt="ุงูุตูุฑุฉ"><br><br>  ูุนู ุ ูุนู ุ ุฅูู "ุงูุจุงูุช" ููู ุจุงููุบุฉ ุงูููุฏูุฉ (ูููุณ ุงูููุฏูุฉ).  ุณุฃุจุฏุฃ ุจุงูุชุฑุชูุจ.  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ููุง ุ ุนูู Habrรฉ ุ ุจุฏุฃุช ุชุธูุฑ ููุงูุงุช ุญูู bytecode.  ุฐุงุช ูุฑุฉ ุ ููุช ุฃุณุชูุชุน ุจูุชุงุจุฉ ุฃูุธูุฉ Fort.  ุจุงูุทุจุน ุ ูู ุงููุฌูุน.  ูุงููุง 16 ุจุช.  ุฃูุง ูู ูุจุฑูุฌุฉ ุนูู x86-64.  ุญุชู ูุน 32 ูุง ูููู ุฃู ุชูุนุจ.  ุฅุฐู ุฌุงุก ุงูููุฑ - ูู ูุงุ  ููุงุฐุง ูุง ุชุซูุฑ ุงูุญุตู 64 ุจุช ุ ูุญุชู ูุน ุงูุฑูุฒ ุงููุฑุนูุ  ูุนู ุ ูุนูู ูุธุงู Linux ุ ุญูุซ ูู ุฃูุชุจ ูุธุงู ุฃู ุดูุก ุฃูุถูุง. <br><br>  ูุฏู ุฎุงุฏู ููุฒูู ูุน ูุธุงู Linux.  ุจุดูู ุนุงู ุ ุบูุบู ููููุงู ูุงูุชุดูุช ุฃู ุงููุฌูุน ุนูู Linux ูุณูู GAS ุ ูุงูุฃูุฑ as.  ุฃูุง ุฃุชุตู ุนุจุฑ SSH ุจุงูุฎุงุฏู ุ ููุชุงุจุชู - ูุนู!  ูุฏู ุจุงููุนู ุชุซุจูุชู.  ูุง ุฒูุช ุจุญุงุฌุฉ ุฅูู ุฑุงุจุท ุ ุงูุชุจ ld - ูุนู!  ูุฐูู ุ ููุญุงููุฉ ูุชุงุจุฉ ุดูุก ูุซูุฑ ููุงูุชูุงู ูู ุงููุฌูุน.  ุจุฏูู ุญุถุงุฑุฉ ุ ููุท ุบุงุจุฉ ุ ูุซู ุงููููุฏ ุงูุญูููููู :) ุจุฏูู ุจูุฆุฉ ุชุทููุฑ ุ ููุท ุณุทุฑ ุงูุฃูุงูุฑ ููุงุฆุฏ ููุชุตู ุงูููู.  ุณูููู ุงููุญุฑุฑ ูู Nano ุ ูุงูุฐู ูุชู ุชุนูููู ุนูู F4 ูู mc.  ููู ุชุบูู ูุฑูุฉ "ุฒูุฑู"ุ  ุงูููุฏู ุงูุญูููู ูุญุชุงุฌ ุฅูู ุดูุก ูุงุญุฏ ููุท ... ูุงุฐุง ูุญุชุงุฌ ุงูููุฏู ุงูุญููููุ  ุจุงูุทุจุน ุ ูุตุญุญ ุฃุฎุทุงุก.  ูุญู ุงูุชุจ gdb - ูู!  ุญุณููุง ุ ุงุถุบุท ุนูู Shift + F4 ุ ูุงูุชูู! <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุนูุงุฑุฉ </h2><br>  ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ุฏุนููุง ููุฑุฑ ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ.  ูุน ุฃุนูุงู ุงูุจุช ุงููุญุฏุฏุฉ ุจุงููุนู ุ 64 ุจุช.  ูู ุชุทุจููุงุช Fort ุงูููุงุณูููุฉ ุ ุชููู ุดุฑูุญุฉ ุงูุจูุงูุงุช ูุงูุฑูุฒ ูู ููุณูุง.  ูููู ุ ุณูุญุงูู ุงูููุงู ุจุฐูู ุจุดูู ุตุญูุญ.  ุณูููู ูุฏููุง ููุท ุงูููุฏ ูู ููุทุน ุงูููุฏ ุ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ููุทุน ุงูุจูุงูุงุช.  ูุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ููุงุฉ ูููุธุงู ุงูุฃุณุงุณู ูุฑูุฒ ุจุงูุช ูุณุชูู ุชูุงููุง ุนู ุงููุธุงู ุงูุฃุณุงุณู. <br><br>  ุฏุนููุง ูุญุงูู ุฌุนู ุฃุณุฑุน ุขูุฉ ุจุงูุช ููุฏุณุฉ (ูููู ุจุฏูู JIT).  ูุฐูู ุ ุณูููู ูุฏููุง ุฌุฏูู ูุญุชูู ุนูู 256 ุนููุงููุง - ุนููุงู ููู ุฃูุฑ ุจุงูุช.  ุฃูู ูู ุฃู ุดูุก - ูุญุต ุฅุถุงูู ุ ูุฐุง ูู 1-2 ุชุนูููุงุช ุงููุนุงูุฌ.  ููุญู ุจุญุงุฌุฉ ุจุณุฑุนุฉ ุ ุฏูู ุญู ูุณุท. <br><br><h4 style=";text-align:right;direction:rtl">  ุฃููุงู </h4><br>  ุนุงุฏุฉ ุ ูู ุชุทุจููุงุช Fort ุ ูุชู ุงุณุชุฎุฏุงู ููุฏุณ ุฅุฑุฌุงุน ุงููุนุงูุฌ (* SP) ูููุฏุณ ุจูุงูุงุช ุ ููุชู ุชุทุจูู ููุฏุณ ุฅุฑุฌุงุน ูุธุงู ุงูุญุตู ุจุงุณุชุฎุฏุงู ูุณุงุฆู ุฃุฎุฑู.  ูู ุงููุงูุน ุ ุณูุชู ุชูุฏูุณ ุงูุฌูุงุฒ ุงูุฎุงุต ุจูุง ุ ูุงูุนูู ุงูุฑุฆูุณู ูู ุนูู ูููุฉ ุงูุจูุงูุงุช.  ูุฐูู ุ ุฏุนููุง ููุนู ุงูุดูุก ููุณู - RSP ุณูููู ููุฏุณ ุงูุจูุงูุงุช.  ุญุณููุง ุ ุฏุน ุฑุตุฉ ุงูุฅุฑุฌุงุน ุชููู RBP ุ ูุงูุชู ุชุนูู ุฃูุถูุง ุงูุชุฑุงุถููุง ูุน ููุทุน ุงูุฑุตุฉ.  ูุจุงูุชุงูู ุ ุณูููู ูุฏููุง ุซูุงุซ ุดุฑุงุฆุญ ููุฐุงูุฑุฉ: ููุทุน ุดูุฑุฉ ุ ููุทุน ุจูุงูุงุช ูููุทุน ููุฏุณ (ุณูููู ุจู ูููุฉ ุจูุงูุงุช ูููุฏุณ ุฅุฑุฌุงุน). <br><br><h4 style=";text-align:right;direction:rtl">  ุณุฌูุงุช </h4><br>  ุฃุฐูุจ ุฅูู ูุตู ุณุฌูุงุช x86-64 ุ ู ุนููุง!  ููุฌุฏ ูุง ูุตู ุฅูู 8 ุณุฌูุงุช ููุฃุบุฑุงุถ ุงูุนุงูุฉ ุงูุฅุถุงููุฉ (R8 - R16) ุ ููุงุฑูุฉ ูุน ุฃูุถุงุน 32 ุฃู 16 ุจุช. ููุณ ุณูุฆูุง ... <br><br>  ูุฑุฑุช ุจุงููุนู ุฃููุง ุณุชุญุชุงุฌ ุฅูู RSP ู RBP.  ูุง ุชุฒุงู ุจุญุงุฌุฉ ุฅูู ูุคุดุฑ (ุนุฏุงุฏ) ูุฃูุงูุฑ bytecode.  ูู ุงูุนูููุงุช ุนูู ูุฐุง ุงูุณุฌู ุ ููุงู ุญุงุฌุฉ ููุท ููุฑุงุกุฉ ุงูุฐุงูุฑุฉ.  ุชุนุฏ ุงูุณุฌูุงุช ุงูุฑุฆูุณูุฉ (RAX ุ RBX ุ RCX ุ RDX ุ RSI ุ RDI) ุฃูุซุฑ ูุฑููุฉ ุ ุนุงูููุฉ ุ ูุนูู ุงูุนุฏูุฏ ูู ุงูุฃูุงูุฑ ุงูุฎุงุตุฉ.  ุณุชููู ูููุฏุฉ ููุง ูู ุงูุนุฏูุฏ ูู ุงูููุงู ุ ูุจุงููุณุจุฉ ูุนุฏุงุฏ ุชุนูููุงุช bytecode ุ ูุฃุฎุฐ ูุงุญุฏุฉ ูู ุงูุณุฌูุงุช ุงูุฌุฏูุฏุฉ ุจุงููุณุจุฉ ูู ุ ููููู R8. <br><br><h2 style=";text-align:right;direction:rtl">  ููุจุฏุฃ </h2><br>  ููุณ ูุฏู ุฃู ุฎุจุฑุฉ ูู ุงูุจุฑูุฌุฉ ุจูุบุฉ Linux ูู ูุบุฉ ุงูุชุฌููุน.  ูุฐูู ุ ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ุณูุฌุฏ "Helloุ world" ุงูููุงุฆู ูููู ููููุฉ ุจุฏุก ุงูุจุฑูุงูุฌ ูุนุฑุถ ุงููุต.  ุจุดูู ุบูุฑ ูุชููุน ุจุงููุณุจุฉ ูู ุ ููุฏ ูุฌุฏุช ุฎูุงุฑุงุช ูุน ุจูุงุก ุฌููุฉ ุบุฑูุจ ุญูุซ ูุชู ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงููุตุฏุฑ ูุงููุชููู.  ููุง ุงุชุถุญ ุ ูุฐุง ูู ุจูุงุก ุฌููุฉ AT &amp; T ุ ููู ููุชูุจ ุจุดูู ุฃุณุงุณู ุชุญุช GAS ุนููู.  ูููู ูุชู ุฏุนู ุฎูุงุฑ ุจูุงุก ุฌููุฉ ุขุฎุฑ ุ ูุทูู ุนููู ุจูุงุก ุฌููุฉ Intel.  ุฃููุฑ ุ ูุฑุฑุช ุฃู ุฃุณุชุฎุฏููุง ูููุง.  ุญุณูุง ุ ุงูุชุจ ูู ุจุฏุงูุฉ .intel_syntax noprefix. <br><br>  ูู ุจุชุฌููุน ูุชูููุฐ "Helloุ world" ููุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู.  ูู ุฎูุงู ูุฑุงุกุฉ ุงูุชุนูููุงุช ูุงูุชุฌุงุฑุจ ุ ุจุฏุฃุช ูู ุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงูุชุงูู ููุชุฑุฌูุฉ: <br> <code>$ as fort.asm -o fort.o -g -ahlsm &gt;list.txt</code> <br>  ููุง ุ ูุดูุฑ ุฑูุฒ ุงูุชุจุฏูู -o ุฅูู ููู ุงููุชุงุฆุฌ ุ ููุฑุดุฏ ุฑูุฒ ุงูุชุจุฏูู -g ุฅูู ุฅูุดุงุก ูุนูููุงุช ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ููููู ุฑูุฒ ุงูุชุจุฏูู -ahlsm ุจุชุนููู ุชูุณูู ุงููุงุฆูุฉ.  ูุฃุญุชูุธ ุจุงูุฅุฎุฑุงุฌ ูู ุงููุงุฆูุฉ ุ ุญูุซ ููููู ุฑุคูุฉ ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููููุฏุฉ.  ุฃุนุชุฑู ุ ูู ุจุฏุงูุฉ ุงูุนูู ุ ูู ุฃูู ุจุฅุฏุฎุงู ุงููุงุฆูุฉ ุ ููู ุฃุญุฏุฏ ุญุชู ุฑูุฒ ุงูุชุจุฏูู -g.  ุจุฏุฃุช ูู ุงุณุชุฎุฏุงู ุฑูุฒ ุงูุชุจุฏูู -g ุจุนุฏ ุฃูู ุงุณุชุฎุฏุงู ููุตุญุญ ุงูุฃุฎุทุงุก ุ ูุจุฏุฃุช ูู ุนูู ุงููุงุฆูุฉ ุจุนุฏ ุธููุฑ ูุญุฏุงุช ุงููุงูุฑู ูู ุงูููุฏ :) <br><br>  ุจุนุฏ ุฐูู ุ ูุณุชุฎุฏู ุงูุฑุงุจุท ุ ููู ููุง ููุณ ุฃูุซุฑ ุจุณุงุทุฉ: <br><br> <code>$ ld forth.o -o forth</code> <br>  ุญุณูุง ุ ุฑูุถ! <br> <code>$ ./forth <br> Hello, world!</code> <br>  ุฅูู ูุนูู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงู ูุฐุง ูู ุฃูู ูุง ูุดุจู. (ูู ุงููุงูุน ูู "ูุง ุนุงูู!" ุ ุจุงูุทุจุน)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.intel_syntax noprefix .section .data msg: .ascii <span class="hljs-string"><span class="hljs-string">"Hello, world!\n"</span></span> len = . - msg #  len    .section .text .global _start #     _start: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, OFFSET FLAT:msg #     mov edx, len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit xor ebx, ebx #    <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #  </code> </pre> <br>  ุจุงูููุงุณุจุฉ ุ ุจุนุฏ ุฐูู ุจูููู ุงูุชุดูุช ุฃูู ูู ุงููุชุฑุฉ ูู 86 ุฅูู 64 ุนุงููุง ุ ูุงู ูู ุงูุตุญูุญ ุงุณุชุฎุฏุงู syscall ูุฅุฌุฑุงุก ููุงููุฉ ูุธุงู ุ ุจุฏูุงู ูู int 0x80.  ุชุนุชุจุฑ ุงุณุชุฏุนุงุก 0x80 ูุฏููุฉ ููุฐู ุงูุจููุฉ ุ ุนูู ุงูุฑุบู ูู ุฃููุง ูุฏุนููุฉ. <br></div></div><br>  ููุฏ ุชู ุงูุจุฏุก ุ ูุงูุขู ... <br><br><h2 style=";text-align:right;direction:rtl">  ุฏุนูุง ูุฐูุจ! </h2><br>  ุฃูู ุณูููู ููุงู ุจุนุถ ุงูุชูุงุตูู ุนูู ุงูุฃูู ุ ุณูู ููุชุจ ุดูุฑุฉ ุฃูุฑ ุจุงูุช ูุงุญุฏ.  ููููู ูููุฉ Fort "0" ุ ูุน ูุถุน 0 ุฃุนูู ุงูููุฏุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">bcmd_num0: push <span class="hljs-number"><span class="hljs-number">0</span></span> jmp _next</code> </pre><br>  ูู ุงูููุช ุงูุฐู ูุชู ููู ุชูููุฐ ูุฐุง ุงูุฃูุฑ ุ ูุดูุฑ R8 ุจุงููุนู ุฅูู ุฃูุฑ ุงูุจุงูุช ุงูุชุงูู.  ูู ุงูุถุฑูุฑู ูุฑุงุกุชูุง ุ ูุฒูุงุฏุฉ R8 ุ ูุชุญุฏูุฏ ุงูุนููุงู ุงููุงุจู ููุชูููุฐ ุจูุงุณุทุฉ ุฑูุฒ ุฃูุฑ ุงูุจุงูุช ุ ูููู ุงูุชุญูู ุฅููู. <br><br>  ูููู ... ูุง ุนูู ุงูุจุช ุณูููู ุฌุฏูู ุนููุงู ุจุงูุช ุงูุฃูุฑุ  ุซู ุงุถุทุฑุฑุช ููุญูุฑ ูู ูุธุงู ููุงุฏุฉ x86-64 ุงูุฌุฏูุฏ ุจุงููุณุจุฉ ูู.  ููุฃุณู ุ ูู ุฃุฌุฏ ุฃูุงูุฑ ุชุณูุญ ูู ุจุงูุฐูุงุจ ุฅูู ุงูุฅุฒุงุญุฉ ูู ุงูุฐุงูุฑุฉ.  ูุฐูู ุ ุฅูุง ุญุณุงุจ ุงูุนููุงู ุ ุฃู ุฃู ุงูุนููุงู ุณูููู ุฌุงูุฒูุง - 64 ุจุช.  ููุณ ููุงู ููุช ููุง ูุญุณุงุจ ุ ููู ูุง ูุนูู - 64 ุจุช.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุญุฌู ุงูุฌุฏูู 256 * 8 = 4096 ุจุงูุช.  ุญุณููุง ุ ุฃุฎูุฑูุง ุ ูู ุจุชุฑููุฒ ุงุณุชุฏุนุงุก _next: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">_next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*<span class="hljs-number"><span class="hljs-number">8</span></span>] <span class="hljs-meta"><span class="hljs-meta"># bcmd -   -</span></span></code> </pre><br>  ููุณ ุณูุฆูุง ุ ูุจุฏู ูู ... ูุง ููุฌุฏ ุณูู ุซูุงุซุฉ ุชุนูููุงุช ูููุนุงูุฌ ุ ุนูุฏ ุงูุชุจุฏูู ูู ุฃูุฑ ุจุงูุช ูุงุญุฏ ุฅูู ุขุฎุฑ. <br><br>  ูู ุงููุงูุน ุ ูู ุชูู ูุฐู ุงูุฃูุงูุฑ ุณููุฉ ุจุงููุณุจุฉ ูู.  ุงุถุทุฑุฑุช ุฅูู ุงูุฎูุถ ูู ูุธุงู ุงูุฃูุงูุฑ 0x86-64 ูุฑุฉ ุฃุฎุฑู ูุงูุนุซูุฑ ุนูู ุฃูุฑ MOVZX ุฌุฏูุฏ ุจุงููุณุจุฉ ูู.  ูู ุงููุงูุน ุ ูุญูู ูุฐุง ุงูุฃูุฑ ูููุฉ 8 ุฃู 16 ุฃู 32 ุจุช ุฅูู ุณุฌู 64 ุจุช.  ููุงู ููุนุงู ูุฎุชููุงู ูู ูุฐุง ุงูุฃูุฑ: ุบูุฑ ูููุนูู ุ ุญูุซ ูุชู ุชุนุจุฆุฉ ุงูุฃุฑูุงู ุงูุนููุง ุจุงูุฃุตูุงุฑ ุ ูุงูุฃุฑูุงู ุงููููุนุฉ ูู MOVSX.  ูู ูุชุบูุฑ ุงูุฅุดุงุฑุฉ ุ ุชุชูุณุน ุงูุฅุดุงุฑุฉ ุ ุฃู ุจุงููุณุจุฉ ููุฃุฑูุงู ุงูููุฌุจุฉ ุ ุณุชุฐูุจ ุงูุฃุตูุงุฑ ุฅูู ุงูุฃุฑูุงู ุงูุนููุง ูุงูุฃุฑูุงู ุงูุณุงูุจุฉ.  ูุฐุง ุงูุฎูุงุฑ ูููุฏ ููุง ุฃูุถูุง ูุฃูุฑ ุจุงูุช ุงููุถุงุก. <br><br>  ุจุงูููุงุณุจุฉ ุ ูู ูุฐุง ุงูุฎูุงุฑ ูู ุงูุฃุณุฑุนุ  ุฑุจูุง ุดุฎุต ูุง ุณูู ุชูุญู ุฃุณุฑุนุ <br><br>  ุญุณููุง ุ ูุฏููุง ุงูุขู ุขูุฉ ุจุงูุช ูููู ุชุดุบูููุง ุนุจุฑ ุณูุณูุฉ ูู ุฃูุงูุฑ ุงูุจุงูุช ูุชูููุฐูุง.  ูู ุงูุถุฑูุฑู ุงุฎุชุจุงุฑู ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุฅุฌุจุงุฑ ุนูู ุชูููุฐ ูุฑูู ูุงุญุฏ ุนูู ุงูุฃูู.  ููู ุฃู ูุงุญุฏุ  ุตูุฑ ุนูู ุงูููุฏุณุ  ูููู ููุง ูุง ุชุนุฑู ุงููุชูุฌุฉ ุ ูุฅุฐุง ูู ุชูุธุฑ ุฅูู ุงูููุฏุณ ุฃุณูู ูุตุญุญ ุงูุฃุฎุทุงุก ... ูููู ูู ุญุงูุฉ ุจุฏุก ุชุดุบูู ุงูุจุฑูุงูุฌ ุ ูููู ุฅููุงูู :) <br><br>  ููุชุจ ุฃูุฑูุง ูุฏุงุนูุง ูููู ุงูุจุฑูุงูุฌ ูููุชุจ ุนูู ุ ุฎุงุตุฉู ูุฃู ูุฏููุง "ุนุงูู ุฑุงุฆุน!". <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">bcmd_bye: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bye #     mov edx, msg_bye_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> #    <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #  </code> </pre><br>  ุงูุดูุก ุงููุญูุฏ ุงููุชุจูู ูู ุฅูุดุงุก ุฌุฏูู ุนูุงููู ุฃูุฑ ุงูุจุงูุช ูุชููุฆุฉ ุงูุณุฌูุงุช ูุจุฏุก ุชุดุบูู ุขูุฉ ุงูุจุงูุช.  ูุฐูู ... ููุงู 256 ูููุฉ ูู ุงูุฌุฏูู ุ ูููุงู ุฃูุฑูู.  ูุงุฐุง ูู ุงูุฎูุงูุง ุงูุฃุฎุฑูุ <br>  ุณูููู ููุจุงูู ุฑูุฒ ุชุดุบูู ุบูุฑ ุตุงูุญ.  ููู ุ ูุง ููููู ุฅุฌุฑุงุก ูุญุต ุนููู ุ ููุฐู ูุฑู ุฅุถุงููุฉ ุ ููุฏููุง ุงูุขู ุซูุงุซุฉ ูุฑู ุ ูุณูุตุจุญ ุงูุนุฏุฏ ุฎูุณุฉ.  ูุฐูู ุ ุณูู ูุฌุนู ูุซู ูุฐุง ุงูุฃูุฑ ุฑูุชูููุง - ูุฑูู ุณูุก.  ุฃููุงู ุ ูููุฃ ุงูุฌุฏูู ุจุฃูููู ูุฐูู ุ ุซู ูุจุฏุฃ ูู ุดุบู ุงูุฎูุงูุง ุจุฃูุงูุฑ ูููุฏุฉ.  ุงุณูุญ ููุฑูู ุณูุก ุจุงูุญุตูู ุนูู ุงูุฑูุฒ 0x00 ุ ูุณูุญุตู ุงููุฑูู ุนูู ุงูุฑูุฒ 0x01 ุ ูุณูุญุตู ุงูุฑูุฒ "0" ุนูู ุงูุฑูุฒ 0x02 ุ ุจูุฌุฑุฏ ูุชุงุจุชู ุจุงููุนู.  ุณูููู ุงููุฑูู ุงูุณูุฆ ูู ุงูููุช ุงูุญุงูู ุจุงูููุงู ุจููุณ ุงูุดูุก ูุซู ูุฏุงุนูุง ุ ููุท ูุน ุฑูุฒ ุฅุชูุงู ููุต ูุฎุชูู (ุณุฃุถุนู ูู ุงูููุณุฏ ุ ูููุณ ุงูุดูุก ูุน ูุฏุงุนูุง): <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">bcmd_bad</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">bcmd_bad: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bad_byte #     mov edx, msg_bad_byte_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #  </code> </pre> </div></div>  ุงุฑุณู ุงูุขู ุฌุฏูู ุงูุนูุงููู.  ููุฑุงุญุฉ ุ ุณูุถุน ุซูุงููุฉ ุตููู ูู ูู ุตู ุ ูุณูููู ููุงู 16 ุตููุง ุ ูุงูุฌุฏูู ูุจูุฑ ุฌุฏูุง ูู ุงูุญุฌู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุจุงูุช ุนููุงู ุฌุฏูู ุงูุฃูุงูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">bcmd: .quad bcmd_bad, bcmd_bye, bcmd_num0, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad</code> </pre> </div></div>  ููุชุจ ูุต ุจุฑูุงูุฌ ุจุงูุช.  ููููุงู ุจุฐูู ุ ูู ุจุชุนููู ุฑููุฒ ุงูุฃูุงูุฑ ููุชุบูุฑุงุช ุงููุฌููุน.  ุณูููู ูุฏููุง ุงูุงุชูุงููุงุช ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุจุฏุฃ ุนูุงููู ุชูููุฐ ุฃูุงูุฑ ุงูุจุงูุช ุนูู bcmd_ </li><li style=";text-align:right;direction:rtl">  ุณูุชู ุชุฎุฒูู ุฑููุฒ ุงูุฃูุงูุฑ ููุณูุง ูู ูุชุบูุฑุงุช ุชุจุฏุฃ ุจู b_ </li></ul><br>  ูุจุงูุชุงูู ุ ุณูููู ูุต ุจุฑูุงูุฌ ุงูุจุงูุช ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">start: .byte b_bye</code> </pre><br>  ูู ุจุชุนุฑูู ุญุฌู ููุฏุณ ุงูุจูุงูุงุช ููุง stack_size.  ููููู 1024 ุญุชู ุงูุขู. ูู ุงูุชููุฆุฉ ุ ุณููุนู RBP = RSP - stack_size. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูู ุงููุงูุน ุ ูุญุตู ุนูู ุฑูุฒ ุงูุจุฑูุงูุฌ ูุฐุง (forth.asm)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.intel_syntax noprefix stack_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> .section .data msg_bad_byte: .ascii <span class="hljs-string"><span class="hljs-string">"Bad byte code!\n"</span></span> msg_bad_byte_len = . - msg_bad_byte #  len    msg_bye: .ascii <span class="hljs-string"><span class="hljs-string">"bye!\n"</span></span> msg_bye_len = . - msg_bye msg_hello: .ascii <span class="hljs-string"><span class="hljs-string">"Hello, world!\n"</span></span> msg_hello_len = . - msg_hello bcmd: .quad bcmd_bad, bcmd_bye, bcmd_num0, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad start: .byte b_bye .section .text .global _start #     _start: mov rbp, rsp sub rbp, stack_size lea r8, start jmp _next _next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*<span class="hljs-number"><span class="hljs-number">8</span></span>] b_bad = <span class="hljs-number"><span class="hljs-number">0x00</span></span> bcmd_bad: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bad_byte #     mov edx, msg_bad_byte_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_bye = <span class="hljs-number"><span class="hljs-number">0x01</span></span> bcmd_bye: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bye #     mov edx, msg_bye_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> #    <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_num0 = <span class="hljs-number"><span class="hljs-number">0x02</span></span> bcmd_num0: push <span class="hljs-number"><span class="hljs-number">0</span></span> jmp _next</code> </pre><br></div></div><br>  ุชุฑุฌูุฉ ุ ุชุดุบูู: <br><br> <code>$ as fort.asm -o fort.o -g -ahlsm &gt;list.txt <br> $ ld forth.o -o forth <br> $ ./forth <br> bye! <br></code> <br>  ุฅูู ูุนูู!  ุชู ุฅุทูุงู ุจุฑูุงูุฌ bytecode ุงูุฃูู ูู ุจุงูุช ูุงุญุฏ :) <br>  ุจุงูุทุจุน ุ ุณูููู ูุฐุง ูู ุงูุญุงู ุฅุฐุง ุชู ูู ุดูุก ุจุดูู ุตุญูุญ.  ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููู ุงููุฑุฌุญ ุฃู ุชููู ุงููุชูุฌุฉ ูู: <br><br> <code>$ ./forth <br>   <br></code> <br>  ุจุงูุทุจุน ุ ููุงู ุฎูุงุฑุงุช ุฃุฎุฑู ููููุฉ ุ ูููู ุตุงุฏูุช ุฐูู ูู ุฃุบูุจ ุงูุฃุญูุงู.  ููุญู ุจุญุงุฌุฉ ุฅูู ูุตุญุญ ุฃุฎุทุงุก. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูููุงุช ูุตุญุญ ุงูุฃุฎุทุงุก</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ููุง ุณุจู ุฐูุฑู ุ ุงุนุชุฏุช GDB.  ูุฐุง ูู ูุตุญุญ ุฃุฎุทุงุก ูููุฉ ุฌุฏุง ุ ูููู ูุน ูุงุฌูุฉ ุณุทุฑ ุงูุฃูุงูุฑ.  ุชุดุบููู ุจุณูุท ููุบุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ gdb ./forth GNU gdb (Ubuntu 7.11.1-0ubuntu1~16.5) 7.11.1 Copyright (C) 2016 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Type "show copying" and "show warranty" for details. This GDB was configured as "x86_64-linux-gnu". Type "show configuration" for configuration details. For bug reporting instructions, please see: &lt;http://www.gnu.org/software/gdb/bugs/&gt;. Find the GDB manual and other documentation resources online at: &lt;http://www.gnu.org/software/gdb/documentation/&gt;. For help, type "help". Type "apropos word" to search for commands related to "word"... Reading symbols from ./forth...done. (gdb)</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ุนู ุทุฑูู ุฅุฏุฎุงู ุงูุฃูุงูุฑ ุ ูููู ุจุชุตุญูุญ ุงูุฃุฎุทุงุก.  ูุงู ูุฏู ุณุงุนุงุช ูุงููุฉ ููุนุซูุฑ ุนูู ุจุนุถ ุงูุฃูุงูุฑ ุงููุงุฒูุฉ ููุนุฑูุฉ ููููุฉ ุงุณุชุฎุฏุงููุง ูุชุตุญูุญ ุงูุฃุฎุทุงุก.  ูุง ูู: <br>  ุจ &lt;label&gt; - ุชุนููู ููุทุฉ ุชููู <br>  ู &lt;label&gt; - ุนุฑุถ ุดูุฑุฉ ุงููุตุฏุฑ <br>  ุต - ุจุฏุก ุฃู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจุฑูุงูุฌ <br>  ุงูุฃุดุนุฉ ุชุญุช ุงูุญูุฑุงุก - ุงููุนุงูุฌ ูุณุฌู ุญุงูุฉ <br>  ู - ุงูุฎุทูุฉ <br><br>  ุจุงูููุงุณุจุฉ ุ ุชุฐูุฑ ุฃูู ุจุญุงุฌุฉ ุฅูู ุชุฑุฌูุฉ ุงูุจุฑูุงูุฌ ูุน ุฑูุฒ ุงูุชุจุฏูู -gุ  ุฎูุงู ุฐูู ุ ูู ุชููู ุงูุนูุงูุงุช ูุงูููุฏ ุงููุตุฏุฑู ูุชุงุญูุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ูู ุงููููู ุชุตุญูุญ ุงูุฃุฎุทุงุก ููุท ุนู ุทุฑูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูููููุฉ ูุงุณุชุฎุฏุงู ุงูุนูุงููู ูู ุงูุฐุงูุฑุฉ.  ุจุงูุทุจุน ุ ูุญู ูููุฏ ุ ููู ููุณ ุจุงููุฏุฑ ููุณู ... </div></div><br>  ูููู ุจุทุฑููุฉ ูุง ุงูุจุฑูุงูุฌ ูุง ููุนู ุณูู ุงููููู ุฌุฏุง.  ูููู ููุท "ูุฑุญุจุงู" ููุง ุ ูุชููู ุนูู ุงูููุฑ "ูุฏุงุนุงู!".  ููุฌุนู ุงูุนุงูู ุงูุญูููู "Hello Hello!"  ุนูู bytecode.  ููููุงู ุจุฐูู ุ ุถุน ุงูุนููุงู ูุทูู ุงูุณูุณูุฉ ุนูู ุงูููุฏุณ ุ ุซู ูู ุจุชูููุฐ ุงูุฃูุฑ ุงูุฐู ูุนุฑุถ ุงูุณูุณูุฉ ุ ุซู ุงูุฃูุฑ bye.  ููููุงู ุจูู ูุฐุง ุ ููุงู ุฃูุงูุฑ ุฌุฏูุฏุฉ ูุทููุจุฉ: ุงูุชุจ ูุฅุฎุฑุงุฌ ุงูุณูุณูุฉ ุ ูุฃุถุงุกุช ููุถุน ุนููุงู ุงูุณูุณูุฉ ูุทูููุง.  ุฃููุง ููุชุจ ููุน ุ ูุงุณูุญูุง ุฑูุฒูุง ูููู 0x80.  ูุญู ุ ูุฑุฉ ุฃุฎุฑู ุ ูุญุชุงุฌ ุฅูู ูุฐู ุงูุดูุฑุฉ ูุน ุงุณุชุฏุนุงุก sys_write: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_type = <span class="hljs-number"><span class="hljs-number">0x80</span></span> bcmd_type: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> pop rdx pop rcx push r8 <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   pop r8 jmp _next</code> </pre><br>  ููุง ูุฃุฎุฐ ุงูุนููุงู ูุทูู ุงูุณูุณูุฉ ูู ููุฏุณ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ POP.  ูููู ุงุณุชุฏุนุงุก int 0x80 ุชุบููุฑ ุณุฌู R8 ุ ูุฐูู ูุญู ุญูุธู.  ูู ููุนู ุฐูู ูู ูุจู ูุฃู ุงูุจุฑูุงูุฌ ุงูุชูู.  ูุญุชููุงุช ูุฐู ุงูุณุฌูุงุช ูู ุชูุชู.  ุงูุขู ูุฐุง ุฃูุฑ ุจุงูุช ุนุงุฏู ุ ูุจุนุฏ ุฐูู ูุณุชูุฑ ุชูููุฐ ุดูุฑุฉ ุงูุจุงูุช ุ ูุนููู ุฃู ุชุชุตุฑู ุจููุณู. <br><br>  ุงูุขู ูููุชุจ ุงูุถูุก.  ุณูููู ูุฐุง ุงููุฑูู ุงูุฃูู ูุฏููุง ูุน ุงููุนููุงุช.  ุจุนุฏ ุงูุจุงูุช ุงูุฐู ูุญุชูู ุนูู ุฑูุฒ ูุฐุง ุงูุฃูุฑ ุ ุณูููู ููุงู ุจุงูุช ุชุญุชูู ุนูู ุงูุฑูู ุงูุฐู ุณุชุถุนู ุนูู ุงูููุฏุณ.  ุงูุณุคุงู ุงูุฐู ูุทุฑุญ ููุณู ุนูู ุงูููุฑ - ูุง ูู ุนูู ุงูุจุช ุงููุทููุจ ููุงุ  ููุถุน ุฃู ุฑูู ุ ุชุญุชุงุฌ 64 ุจุช.  ููู ุ ูู ูู ูุฑุฉ ูุดุบู ูููุง ุงูุฃูุฑ 9 ุจุงูุช ุ ูุง ุงูุฐู ุณูุถุน ุฑูููุง ูุงุญุฏูุงุ  ูุฐูู ููุฏูุง ุงูุงูุชูุงุฒ ุ ูุงุญุฏุฉ ูู ุงูุฎุตุงุฆุต ุงูุฑุฆูุณูุฉ ู bytecode ุ ูุฑูุฒ ุงูุญุตู ุฃูุถูุง ... <br><br>  ุงูุญู ุจุณูุท - ุณูููู ุจุนูู ุนุฏุฉ ุฃูุงูุฑ ูุฃุนูุงู ุงูุจุช ุงููุฎุชููุฉ.  ุณุชููู ูุฐู lit8 ู lit16 ู lit32 ู lit64.  ุจุงููุณุจุฉ ููุฃุนุฏุงุฏ ุงูุตุบูุฑุฉ ุ ุณูู ูุณุชุฎุฏู lit8 ู lit16 ุ ููุฃุนุฏุงุฏ ุงูุฃูุจุฑ - lit32 ู lit64.  ุบุงูุจูุง ูุง ูุชู ุงุณุชุฎุฏุงู ุงูุฃุฑูุงู ุงูุตุบูุฑุฉ ุ ูุณูููู ููุงู ุฃูุตุฑ ุงูุฃูุงูุฑ ุจุงููุณุจุฉ ุฅูููู ุ ูุงูุชู ุชุฃุฎุฐ ูุญุฏุชู ุจุงูุช.  ููุณ ุณูุฆูุง! .. ุณูุฌุนู ุฃููุงุฏ ูุฐู ุงูุฃูุงูุฑ ูู 0x08 ุฅูู 0x0B. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_lit8 = <span class="hljs-number"><span class="hljs-number">0x08</span></span> bcmd_lit8: movsx rax, byte ptr [r8] inc r8 push rax jmp _next b_lit16 = <span class="hljs-number"><span class="hljs-number">0x09</span></span> bcmd_lit16: movsx rax, word ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> push rax jmp _next b_lit32 = <span class="hljs-number"><span class="hljs-number">0x0A</span></span> bcmd_lit32: movsx rax, dword ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> push rax jmp _next b_lit64 = <span class="hljs-number"><span class="hljs-number">0x0B</span></span> bcmd_lit64: mov rax, [r8] add r8, <span class="hljs-number"><span class="hljs-number">8</span></span> push rax jmp _next</code> </pre> <br>  ูุญู ููุง ูุณุชุฎุฏู ุฃูุฑ MOVSX - ูุฐุง ูู ุงูุฅุตุฏุงุฑ ุงูุฃููููู ูุฃูุฑ MOVZX ุงููุนุฑูู ุจุงููุนู ูุฏููุง.  R8 ูุฏููุง ุนุฏุงุฏ ููุงุฏุฉ ุจุงูุช.  ูููู ุจุชุญููู ูููุฉ ุงูุญุฌู ุงููุทููุจ ุนูููุง ุ ููููููุง ุฅูู ุงูุฃูุฑ ุงูุชุงูู ุ ููุถุน ุงููููุฉ ุงููุญููุฉ ุฅูู 64 ุจุช ุนูู ุงูููุฏุณ. <br><br>  <b>ูุง ุชูุณ ุฅุถุงูุฉ ุนูุงููู ุงููุฑู ุงูุฌุฏูุฏุฉ ูู ุงูุฌุฏูู ุฅูู ุงูููุงุถุน ุงููุทููุจุฉ.</b> <br><br>  ูุฐุง ูู ุดูุก ุฌุงูุฒ ููุชุงุจุฉ ุจุฑูุงูุฌู ุงูุฃูู "Helloุ world!"  ุนูู bytecode ูุฏููุง.  ุฏุนููุง ูุนูู ูุน ุงููุชุฑุฌู!  :) <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">start: .byte b_lit64 .quad msg_hello .byte b_lit8 .byte msg_hello_len .byte b_type .byte b_bye</code> </pre> <br>  ูุญู ูุณุชุฎุฏู ุฃูุฑูู ูุฎุชูููู: lit64 ุ ูุงูุฐู ูู ุดุฃูู ุฃู ูุถุน ุนููุงู ุงูุณูุณูุฉ ุนูู ุงูููุฏุณ ุ ู lit8 ุ ุญูุซ ูุถุน ุทูู ุงูููุฏุณ.  ุจุนุฏ ุฐูู ุ ูููู ุจุชูููุฐ ุฃูุฑูู ุจุงูุช ุขุฎุฑูู: type and bye. <br>  ุชุฑุฌูุฉ ุ ุชุดุบูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ as fort.asm -o fort.o -g -ahlsm &gt;list.txt $ ld forth.o -o forth $ ./forth Hello, world! bye!</code> </pre><br>  ุญุตู ุนูู bytecode ูุฏููุง!  ูุฐู ูู ุงููุชูุฌุฉ ุงูุชู ูุฌุจ ุฃู ุชููู ุฅุฐุง ูุงู ูู ุดูุก ุทุจูุนููุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุตุฏุฑ ุงููุงูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.intel_syntax noprefix stack_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> .section .data msg_bad_byte: .ascii <span class="hljs-string"><span class="hljs-string">"Bad byte code!\n"</span></span> msg_bad_byte_len = . - msg_bad_byte #  len    msg_bye: .ascii <span class="hljs-string"><span class="hljs-string">"bye!\n"</span></span> msg_bye_len = . - msg_bye msg_hello: .ascii <span class="hljs-string"><span class="hljs-string">"Hello, world!\n"</span></span> msg_hello_len = . - msg_hello bcmd: .quad bcmd_bad, bcmd_bye, bcmd_num0, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x00</span></span> .quad bcmd_lit8, bcmd_lit16, bcmd_lit32, bcmd_lit64, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x10</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x20</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x30</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x40</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x60</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_type, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x80</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad start: .byte b_lit64 .quad msg_hello .byte b_lit8 .byte msg_hello_len .byte b_type .byte b_bye .section .text .global _start #     _start: mov rbp, rsp sub rbp, stack_size lea r8, start jmp _next _next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*<span class="hljs-number"><span class="hljs-number">8</span></span>] b_bad = <span class="hljs-number"><span class="hljs-number">0x00</span></span> bcmd_bad: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bad_byte #     mov edx, msg_bad_byte_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_bye = <span class="hljs-number"><span class="hljs-number">0x01</span></span> bcmd_bye: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bye #     mov edx, msg_bye_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> #    <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_num0 = <span class="hljs-number"><span class="hljs-number">0x02</span></span> bcmd_num0: push <span class="hljs-number"><span class="hljs-number">0</span></span> jmp _next b_lit8 = <span class="hljs-number"><span class="hljs-number">0x08</span></span> bcmd_lit8: movsx rax, byte ptr [r8] inc r8 push rax jmp _next b_lit16 = <span class="hljs-number"><span class="hljs-number">0x09</span></span> bcmd_lit16: movsx rax, word ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> push rax jmp _next b_lit32 = <span class="hljs-number"><span class="hljs-number">0x0A</span></span> bcmd_lit32: movsx rax, dword ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> push rax jmp _next b_lit64 = <span class="hljs-number"><span class="hljs-number">0x0B</span></span> bcmd_lit64: mov rax, [r8] add r8, <span class="hljs-number"><span class="hljs-number">8</span></span> push rax jmp _next b_type = <span class="hljs-number"><span class="hljs-number">0x80</span></span> bcmd_type: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> pop rdx pop rcx push r8 <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   pop r8 jmp _next</code> </pre> <br></div></div><br>  ููู ุงูุงุญุชูุงูุงุช ูุง ุชุฒุงู ุจุฏุงุฆูุฉ ููุบุงูุฉ ุ ูุง ููููู ูุถุน ุดุฑุท ุ ุฏูุฑุฉ. <br><br>  ููู ูููู ุฐูู ูุณุชุญููุงูุ  ููููู ุ ูู ุดูุก ูู ุฃูุฏููุง!  ุฏุนููุง ููุนู ูุฐุง ุงูุฎุท ูู ุงูุญููุฉ 10 ูุฑุงุช.  ุณูุชุทูุจ ูุฐุง ุงูุฃูุฑ ุฃูุฑูุง ุจูุฑุน ุงููุฑุน ุงูุดุฑุทู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฌุฒุก ูู ุญุณุงุจ ุงูููุฏุณ: ุฃูุฑ ูุฎูุถ ุงููููุฉ ุนูู ุงูููุฏุณ ุจููุฏุงุฑ 1 (ูู ุงูุญุตู "1-") ูุฃูุฑ ุงูุงุฒุฏูุงุฌ ูู ุงูุฑุฃุณ ("dup"). <br><br>  ูุน ุงูุญุณุงุจ ุ ูู ุดูุก ุจุณูุท ุ ูู ุฃุนูู ุญุชู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_dup = <span class="hljs-number"><span class="hljs-number">0x18</span></span> bcmd_dup: push [rsp] jmp _next b_wm = <span class="hljs-number"><span class="hljs-number">0x20</span></span> bcmd_wm: decq [rsp] jmp _next</code> </pre> <br>  ุงูุขู ููุฒุฉ ูุดุฑูุทุฉ.  ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ููุฌุนู ุงููููุฉ ุฃูุซุฑ ุจุณุงุทุฉ - ุงูุชูุงู ุบูุฑ ูุดุฑูุท.  ุจูุถูุญ ุ ุชุญุชุงุฌ ููุท ุฅูู ุชุบููุฑ ูููุฉ ุงูุชุณุฌูู R8.  ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุฃูุฑ ุงูุจุงูุช ุ ูููู ูุนููุฉ - ุนููุงู ุงูููู ูู 64 ุจุช.  ูุฑุฉ ุฃุฎุฑู ุชุณุนุฉ ุจุงูุช.  ูู ูุญุชุงุฌ ุฅูู ูุฐู ุงูุจุงูุชุงุช ุงูุชุณุนุฉุ  ุชุญุฏุซ ุงูุชุญููุงุช ุนุงุฏุฉ ุนูู ูุณุงูุงุช ูุตูุฑุฉ ุ ุบุงูุจูุง ูู ุจุถุน ูุฆุงุช ูู ุงูุจุงูุชุงุช.  ูุฐูู ุ ุณูู ูุณุชุฎุฏู ููุณ ุงูุนููุงู ุ ูููู ุงูุฅุฒุงุญุฉ! <br><br>  ุนูู ููููุงุ  ูู ูุซูุฑ ูู ุงูุญุงูุงุช ุ ุณุชููู 8 ุจุชุงุช (127 ููุฃูุงู / ููุฎูู) ูุงููุฉ ุ ููู ูู ุจุนุถ ุงูุฃุญูุงู ูู ูููู ูุฐุง ูุงููุงู.  ูุฐูู ุ ุณููุนู ุงูุดูุก ููุณู ููุง ูู ุงูุญุงู ูุน ุงูุฃูุฑ lit ุ ุณูููู ุจุนูู ุฎูุงุฑูู - 8 ู 16 ุฑูููุง ุ ุณุชููู ุฑููุฒ ุงูุฃูุงูุฑ ูู 0x10 ู 0x11: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_branch8 = <span class="hljs-number"><span class="hljs-number">0x10</span></span> bcmd_branch8: movsx rax, byte ptr [r8] add r8, rax jmp _next b_branch16 = <span class="hljs-number"><span class="hljs-number">0x11</span></span> bcmd_branch16: movsx rax, word ptr [r8] add r8, rax jmp _next</code> </pre>  ุงูุขู ุงูุงูุชูุงู ุงููุดุฑูุท ุณูู ุงูุชูููุฐ.  ุฅุฐุง ูุงูุช ุงููููุฉ 0 ุ ูุงูุชูู ุฅูู _next ุ ูุฅุฐุง ูู ุชูู ูุฐูู ุ ูุงูุชูู ุฅูู ุงูุฃูุฑ branch! <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_qbranch8 = <span class="hljs-number"><span class="hljs-number">0x12</span></span> bcmd_qbranch8: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jnz bcmd_branch8 inc r8 jmp _next b_qbranch16 = <span class="hljs-number"><span class="hljs-number">0x13</span></span> bcmd_qbranch16: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jnz bcmd_branch16 add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> jmp _next</code> </pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูุฏููุง ูู ุดูุก ูุนูู ุญููุฉ: </font></font><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">start: .byte b_lit8 .byte <span class="hljs-number"><span class="hljs-number">10</span></span> #  #  m0: .byte b_lit64 .quad msg_hello .byte b_lit8 .byte msg_hello_len .byte b_type .byte b_wm .byte b_dup .byte b_qbranch8 .byte m0 - . .byte b_bye</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ุฃูุฑูู - ูุถุนูุง ุนุฏุงุฏ ุงูุญููุฉ ุนูู ุงูููุฏุณ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุงุทุจุน ุงูุณูุณูุฉ Hello. </font><font style="vertical-align: inherit;">ุซู ูุทุฑุญ 1 ูู ุงูุนุฏุงุฏ ูููุฑุฑู ููููุฐ (ุฃู ูุง ูููุฐ) ุงูุงูุชูุงู. </font><font style="vertical-align: inherit;">ูุทููุจ ุงูุฃูุฑ ุงูุงุฒุฏูุงุฌูุฉ ูุฃู ุฃูุฑ ุงููุฑุน ุงูุดุฑุทู ูุฃุฎุฐ ุงููููุฉ ูู ุฃุนูู ุงูููุฏุณ. </font><font style="vertical-align: inherit;">ุงูุงูุชูุงู ููุง ูู ุซูุงููุฉ ุจุช ุ ูุฃู ุงููุณุงูุฉ ููุณุช ุณูู ุจุถุน ุจุงูุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถุน ุนูุงููู ุงูุฃูุงูุฑ ุงูุฌุฏูุฏุฉ ูู ุฌุฏูู ุ ูุฌูุน ููููุฐ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ุฃุถุนูุง ูู ุฌูุงุญ ุ ูุฅูุง ููุฏ ุฃุตุจุญ ุจุฑูุงูุฌูุง ูุทูููุง)</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ as fort.asm -o fort.o -g -ahlsm &gt;list.txt $ ld forth.o -o forth $ ./forth Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! bye!</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุณูุง ุ ูููููุง ุฃู ููุนู ุจุงููุนู ุงูุธุฑูู ูุฏูุฑุงุช! </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุตุฏุฑ ุงููุงูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.intel_syntax noprefix stack_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> .section .data msg_bad_byte: .ascii <span class="hljs-string"><span class="hljs-string">"Bad byte code!\n"</span></span> msg_bad_byte_len = . - msg_bad_byte #  len    msg_bye: .ascii <span class="hljs-string"><span class="hljs-string">"bye!\n"</span></span> msg_bye_len = . - msg_bye msg_hello: .ascii <span class="hljs-string"><span class="hljs-string">"Hello, world!\n"</span></span> msg_hello_len = . - msg_hello bcmd: .quad bcmd_bad, bcmd_bye, bcmd_num0, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x00</span></span> .quad bcmd_lit8, bcmd_lit16, bcmd_lit32, bcmd_lit64, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_branch8, bcmd_branch16, bcmd_qbranch8, bcmd_qbranch16, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x10</span></span> .quad bcmd_dup, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_wm, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x20</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x30</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x40</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x60</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_type, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x80</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad start: .byte b_lit8 .byte <span class="hljs-number"><span class="hljs-number">10</span></span> #  #  m0: .byte b_lit64 .quad msg_hello .byte b_lit8 .byte msg_hello_len .byte b_type .byte b_wm .byte b_dup .byte b_qbranch8 .byte m0 - . .byte b_bye .section .text .global _start #     _start: mov rbp, rsp sub rbp, stack_size lea r8, start jmp _next _next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*<span class="hljs-number"><span class="hljs-number">8</span></span>] b_bad = <span class="hljs-number"><span class="hljs-number">0x00</span></span> bcmd_bad: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bad_byte #     mov edx, msg_bad_byte_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_bye = <span class="hljs-number"><span class="hljs-number">0x01</span></span> bcmd_bye: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bye #     mov edx, msg_bye_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> #    <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_num0 = <span class="hljs-number"><span class="hljs-number">0x02</span></span> bcmd_num0: push <span class="hljs-number"><span class="hljs-number">0</span></span> jmp _next b_lit8 = <span class="hljs-number"><span class="hljs-number">0x08</span></span> bcmd_lit8: movsx rax, byte ptr [r8] inc r8 push rax jmp _next b_lit16 = <span class="hljs-number"><span class="hljs-number">0x09</span></span> bcmd_lit16: movsx rax, word ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> push rax jmp _next b_lit32 = <span class="hljs-number"><span class="hljs-number">0x0A</span></span> bcmd_lit32: movsx rax, dword ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> push rax jmp _next b_lit64 = <span class="hljs-number"><span class="hljs-number">0x0B</span></span> bcmd_lit64: mov rax, [r8] add r8, <span class="hljs-number"><span class="hljs-number">8</span></span> push rax jmp _next b_type = <span class="hljs-number"><span class="hljs-number">0x80</span></span> bcmd_type: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> pop rdx pop rcx push r8 <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   pop r8 jmp _next b_dup = <span class="hljs-number"><span class="hljs-number">0x18</span></span> bcmd_dup: push [rsp] jmp _next b_wm = <span class="hljs-number"><span class="hljs-number">0x20</span></span> bcmd_wm: decq [rsp] jmp _next b_branch8 = <span class="hljs-number"><span class="hljs-number">0x10</span></span> bcmd_branch8: movsx rax, byte ptr [r8] add r8, rax jmp _next b_branch16 = <span class="hljs-number"><span class="hljs-number">0x11</span></span> bcmd_branch16: movsx rax, word ptr [r8] add r8, rax jmp _next b_qbranch8 = <span class="hljs-number"><span class="hljs-number">0x12</span></span> bcmd_qbranch8: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jnz bcmd_branch8 inc r8 jmp _next b_qbranch16 = <span class="hljs-number"><span class="hljs-number">0x13</span></span> bcmd_qbranch16: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jnz bcmd_branch16 add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> jmp _next</code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุญุชู ููุชูุฏ ุงูุฌูุงุฒ ุงูุจุงูุช ูุธููุฉ ุฃุฎุฑู ูููุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุง ูููููุง ุงุณุชุฏุนุงุก ุขุฎุฑ ูู ุงูุฑูุฒ ุงูุจุฑูุฏู. </font><font style="vertical-align: inherit;">ููุณ ูุฏููุง ูุง ูุณูู ุงูุฅุฌุฑุงุกุงุช ุ ุงูุฅุฌุฑุงุกุงุช ุ ุฅูุฎ. </font><font style="vertical-align: inherit;">ููู ุงูุญุตู ุ ุจุฏูู ูุฐุง ุ ูุง ูููููุง ุงุณุชุฎุฏุงู ูููุงุช ุบูุฑ ูููุงุช kernel ูู ุจุนุถ ุงููููุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุชู ุงูุนูู ุฅูู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ููุง ูุฃูู ูุฑุฉ ูุญุชุงุฌ ุฅูู ูููุฉ ูู ุงูุนุงุฆุฏุงุช. </font><font style="vertical-align: inherit;">ููุงู ุญุงุฌุฉ ุฅูู ุฃูุฑูู - ุงูุฃูุฑ call ูุฃูุฑ ุงูุฅุฑุฌุงุน (call and exit).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุฃูุฑ call ุ ูู ุญูุซ ุงููุจุฏุฃ ุ ุจุงูุดูุก ููุณู ุงูุฐู ูููู ุจู ุงููุฑุน - ุจููู ุงูุชุญูู ุฅูู ุฌุฒุก ุขุฎุฑ ูู ุงูุฑูุฒ ุงููุฑุนู. </font><font style="vertical-align: inherit;">ูููู ุ ุจุฎูุงู ุงููุฑุน ุ ูุง ุชุฒุงู ุจุญุงุฌุฉ ุฅูู ุญูุธ ุนููุงู ุงููุฑุณู ูู ููุฏุณ ุงูุฅุฑุฌุงุน ุญุชู ุชุชููู ูู ุงูุนูุฏุฉ ููุชุงุจุนุฉ ุงูุชูููุฐ. </font><font style="vertical-align: inherit;">ููุงู ูุฑู ุขุฎุฑ - ูุซู ูุฐู ุงูููุงููุงุช ูููู ุฃู ุชุญุฏุซ ุนูู ูุณุงูุงุช ุฃูุจุฑ ุจูุซูุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฌุนู ุงูุฃูุฑ call ูู ุดุจู ุงููุฑุน ุ ูููู ูู ุซูุงุซุฉ ุฅุตุฏุงุฑุงุช - 8 ู 16 ู 32 ุจุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_call8 = <span class="hljs-number"><span class="hljs-number">0x0C</span></span> bcmd_call8: movsx rax, byte ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> inc r8 mov [rbp], r8 add r8, rax jmp _next b_call16 = <span class="hljs-number"><span class="hljs-number">0x0D</span></span> bcmd_call16: movsx rax, word ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> mov [rbp], r8 add r8, rax jmp _next b_call32 = <span class="hljs-number"><span class="hljs-number">0x0E</span></span> bcmd_call32: movsx rax, dword ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> mov [rbp], r8 add r8, rax jmp _next</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุชุฑูู ุ ููุง ุ ุนูู ุนูุณ ุงูุชุญููุงุช ุ ุชุชู ุฅุถุงูุฉ 3 ูุฑู. ูููู ุฃุญุฏูู ุจุฅุนุงุฏุฉ ุชุฑุชูุจ R8 ุฅูู ุฃูุฑ ุงูุจุงูุช ุงูุชุงูู ุ ููููู ุงููุฎุฒูุงู ุงููุชุจููุงู ุจุชุฎุฒูู ุงููููุฉ ุงููุณุชููุฉ ูู ููุฏุณ ุงูุฅุฑุฌุงุน. ุจุงูููุงุณุจุฉ ุ ุญุงููุช ููุง ุฃูุง ุฃุถุน ุฅุฑุดุงุฏุงุช ุงููุนุงูุฌ ุนูู ุจุนุถูุง ุงูุจุนุถ ุฌูุจูุง ุฅูู ุฌูุจ ุ ุญุชู ูุชููู ูุงูู ุงููุนุงูุฌ ูู ุชูููุฐ ุงูุฃูุงูุฑ ุจุงูุชูุงุฒู. ููููู ูุง ุฃุนุฑู ููุฏุงุฑ ุชุฃุซูุฑ ุฐูู. ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ููููู ุงูุชุญูู ูู ุงูุงุฎุชุจุงุฑุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุคุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃู ุชูููู ูุณูุทุฉ ูุฃูุฑ call ูุฎุชูู ุจุนุถ ุงูุดูุก ุนู ุงููุฑุน. ุจุงููุณุจุฉ ูููุฑุน ุ ูุชู ุญุณุงุจ ุงูุฅุฒุงุญุฉ ูุงููุฑู ุจูู ุนููุงู ุงููุฑุน ูุนููุงู ุงูุจุงูุช ุงูุฐู ูุชุจุน ุงูุฃูุฑ ุงูุจุงูุช. ููุฃูุฑ call ุ ูุฐุง ูู ุงููุฑู ุจูู ุนููุงู ุงูููุฒ ูุนููุงู ุงูุฃูุฑ ุงูุชุงูู.</font></font> ููุงุฐุง ูุฐุง ูุทููุจุ<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุฌ ุนู ุฐูู ุนุฏุฏ ุฃูู ูู ุฅุฑุดุงุฏุงุช ุงููุนุงูุฌ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุฃูุฑ ุงูุฅุฑุฌุงุน. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุฅู ูุธููุชูุง ูู ุงุณุชุนุงุฏุฉ R8 ูู ููุฏุณ ุงูุฅุฑุฌุงุน ูููู ุงูุชุญูู ุฅูู ุงูุฌูุงุฒ ุงูุจุงูุช ุจุดูู ุฅุถุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_exit = <span class="hljs-number"><span class="hljs-number">0x1F</span></span> bcmd_exit: mov r8, [rbp] add rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> jmp _next</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุฃูุงูุฑ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ููุฌุจ ุชุญุณูููุง ุฅูู ุงูุญุฏ ุงูุฃูุตู. </font><font style="vertical-align: inherit;">ูุดุบู ุฃูุฑ ุฎุฑูุฌ ุงูุจุงูุช ุซูุงุซุฉ ุชุนูููุงุช ููุฌูุงุฒ. </font><font style="vertical-align: inherit;">ูู ูู ุงููููู ุชูููู ุดูุก ููุงุ </font><font style="vertical-align: inherit;">ุงุชุถุญ ุฃูู ุชุณุชุทูุน! </font><font style="vertical-align: inherit;">ููููู ุจุจุณุงุทุฉ ุฅุฒุงูุฉ ุฃูุฑ ุงูุงูุชูุงู :) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุถุนู ุฃุนูู ููุทุฉ ุฅุฏุฎุงู ุงูุฌูุงุฒ ุจุงูุช _next:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_exit = <span class="hljs-number"><span class="hljs-number">0x1F</span></span> bcmd_exit: mov r8, [rbp] add rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> _next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*<span class="hljs-number"><span class="hljs-number">8</span></span>]</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูููุงุณุจุฉ ุ ูุฌุจ ูุถุน ุงูุฃูุงูุฑ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง ูุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง (ุนูู ุณุจูู ุงููุซุงู ุ ูุซู call) ุจุงููุฑุจ ูู ุงูุจุงูุช ุ ุจุญูุซ ูููู ูููุชุฑุฌู ุฃู ูุดูู ุฃูุฑ ููุฒุฉ ูุตูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุฑุฆู ุจูุถูุญ ูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ููุง ูุซุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-number"><span class="hljs-number">262</span></span> <span class="hljs-number"><span class="hljs-number">0084</span></span> <span class="hljs-number"><span class="hljs-number">490F</span></span>BE00 bcmd_lit8: movsx rax, byte ptr [r8] <span class="hljs-number"><span class="hljs-number">263</span></span> <span class="hljs-number"><span class="hljs-number">0088</span></span> <span class="hljs-number"><span class="hljs-number">49F</span></span>FC0 inc r8 <span class="hljs-number"><span class="hljs-number">264</span></span> <span class="hljs-number"><span class="hljs-number">008b</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> push rax <span class="hljs-number"><span class="hljs-number">265</span></span> <span class="hljs-number"><span class="hljs-number">008</span></span>c EB90 jmp _next <span class="hljs-number"><span class="hljs-number">266</span></span> <span class="hljs-number"><span class="hljs-number">267</span></span> b_lit16 = <span class="hljs-number"><span class="hljs-number">0x09</span></span> <span class="hljs-number"><span class="hljs-number">268</span></span> <span class="hljs-number"><span class="hljs-number">008</span></span>e <span class="hljs-number"><span class="hljs-number">490F</span></span>BF00 bcmd_lit16: movsx rax, word ptr [r8] <span class="hljs-number"><span class="hljs-number">269</span></span> <span class="hljs-number"><span class="hljs-number">0092</span></span> <span class="hljs-number"><span class="hljs-number">4983</span></span>C002 add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">270</span></span> <span class="hljs-number"><span class="hljs-number">0096</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> push rax <span class="hljs-number"><span class="hljs-number">271</span></span> <span class="hljs-number"><span class="hljs-number">0097</span></span> EB85 jmp _next <span class="hljs-number"><span class="hljs-number">272</span></span> <span class="hljs-number"><span class="hljs-number">273</span></span> b_lit32 = <span class="hljs-number"><span class="hljs-number">0x0A</span></span> <span class="hljs-number"><span class="hljs-number">274</span></span> <span class="hljs-number"><span class="hljs-number">0099</span></span> <span class="hljs-number"><span class="hljs-number">496300</span></span> bcmd_lit32: movsx rax, dword ptr [r8] <span class="hljs-number"><span class="hljs-number">275</span></span> <span class="hljs-number"><span class="hljs-number">009</span></span>c <span class="hljs-number"><span class="hljs-number">4983</span></span>C004 add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">276</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>a0 <span class="hljs-number"><span class="hljs-number">50</span></span> push rax <span class="hljs-number"><span class="hljs-number">277</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>a1 E978FFFF jmp _next <span class="hljs-number"><span class="hljs-number">277</span></span> FF <span class="hljs-number"><span class="hljs-number">278</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุ ุนูู ุงูุฎุท 265 ู 271 ุ ูุฃุฎุฐ ุงูุฃูุฑ jmp 2 ุจุงูุช ููู ููููุง ุ ููู ุงูุณุทุฑ 277 ุ ูุชู ุชุฌููุน ููุณ ุงูุฃูุฑ ุจุงููุนู ุฅูู 5 ุจุงูุช ุ ูุฃู ูุณุงูุฉ ุงูุงูุชูุงู ุชุฌุงูุฒุช ุทูู ุงูุฃูุฑ ุงููุตูุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ูุชู ุฅุนุงุฏุฉ ุชุฑุชูุจ ุฃูุงูุฑ ุงูุจุงูุช ูุซู ุงูุณูุฆุฉ ุ ูุฏุงุนุง ุ ูุงูููุน ุ ููุซู ุงูุฏุนูุฉ ุ ูุฑุน ุ ูุถุงุกุฉ ุฃูุฑุจ. ูุณูุก ุงูุญุธ ุ ูุง ููุฌุฏ ุงููุซูุฑ ุงูุฐู ูููู ุฃู ูุตูุญ ูู ุงูุชูุงู 127 ุจุงูุช. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูู ุฃูุงูุฑ ุฌุฏูุฏุฉ ุฅูู ุฌุฏูู ุนูุงููู ุงูุฃูุงูุฑ ููููุง ูุฑููุฒูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ูุฏููุง ุงูุขู ุชุญุฏ ูุนูุฏุฉ ุ ูุณูู ูุฎุชุจุฑูุง! ููููุงู ุจุฐูู ุ ุญุฏุฏ ุฎุท ุงูุทุจุงุนุฉ ูู ุฅุฌุฑุงุก ูููุตู ุ ูุณูู ูุณูููุง ูู ุญููุฉ ูุฑุชูู. ููุชู ุชูููู ุนุฏุฏ ูุฑุงุช ุชูุฑุงุฑ ุงูุฏูุฑุฉ ุฅูู ุซูุงุซุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">start: .byte b_lit8 .byte <span class="hljs-number"><span class="hljs-number">3</span></span> #  #  m0: .byte b_call16 .word sub_hello - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word sub_hello - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_wm .byte b_dup .byte b_qbranch8 .byte m0 - . .byte b_bye sub_hello: .byte b_lit64 .quad msg_hello .byte b_lit8 .byte msg_hello_len .byte b_type .byte b_exit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงุณุชุฎุฏุงู Call8 ููุง ุ ููููู ูุฑุฑุช ุงุณุชุฎุฏุงู call16 ุจุงุนุชุจุงุฑู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง. </font><font style="vertical-align: inherit;">ุชูุทุฑุญ ุงููููุฉ 2 ูุธุฑูุง ูุฎุตุงุฆุต ุญุณุงุจ ุนููุงู ุฃูุฑ ุจุงูุช ุงูุงุณุชุฏุนุงุก ุงูุฐู ูุชุจุช ุนูู. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ุฅูู call8 ุ ุณูุชู ุฎุตู 1 ููุง ูู ุฃุฌู call32 ุ ุนูู ุงูุชูุงูู ุ 4. ูุญู ูุฌูุน </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทูุจ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ as forth.asm -o forth.o -g -ahlsm&gt;list.txt $ ld forth.o -o forth $ ./forth Hello, world! Bad byte code!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุง ... ููุง ูููููู ุ ุญุฏุซ ุฎุทุฃ ูุง :) ุญุณููุง ุ ูุทูู GDB ููุฑู ูุง ูุญุฏุซ ููุงู. </font><font style="vertical-align: inherit;">ููุฏ ููุช ุจุชุนููู ููุทุฉ ุชููู ููุฑูุง ุนูู bcmd_exit ุ ูุฃูู ูู ุงููุงุถุญ ุฃู ุงุณุชุฏุนุงุก sub-hello ููุฑ ุ ูุฃู ูุต ุงูุฅุฌุฑุงุก ูููุฐ ... ุชู ุฅุทูุงูู ... ููู ูุตู ุงูุจุฑูุงูุฌ ุฅูู ููุทุฉ ุงูุฅููุงู ูุฐู. </font><font style="vertical-align: inherit;">ุนูู ุงูููุฑ ูุงู ููุงู ุดู ูู ูุฌูุฏ ุฑูุฒ ุฃูุฑ ุจุงูุช. </font><font style="vertical-align: inherit;">ูุจุงููุนู ุ ูุงู ุงูุณุจุจ ููู. </font><font style="vertical-align: inherit;">b_exit ููุช ุจุชุนููู ุงููููุฉ 0x1f ุ ูุชู ูุถุน ุงูุนููุงู ููุณู ูู ุฑูู ุฎููุฉ ุงูุฌุฏูู 0x17. </font><font style="vertical-align: inherit;">ุญุณููุง ุ ุณุฃููู ุจุชุตุญูุญ ูููุฉ b_exit ุฅูู 0x17 ูุฃุนุฏ ุงููุญุงููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ as forth.asm -o forth.o -g -ahlsm&gt;list.txt $ ld forth.o -o forth $ ./forth Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! Hello, world! bye!</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุถุจุท ุณุช ูุฑุงุช ุชุญูุฉ ุ ูุฏุงุนุง ูุฑุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ููุง ููุจุบู ุฃู ูููู :)</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุตุฏุฑ ุงููุงูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.intel_syntax noprefix stack_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> .section .data msg_bad_byte: .ascii <span class="hljs-string"><span class="hljs-string">"Bad byte code!\n"</span></span> msg_bad_byte_len = . - msg_bad_byte #  len    msg_bye: .ascii <span class="hljs-string"><span class="hljs-string">"bye!\n"</span></span> msg_bye_len = . - msg_bye msg_hello: .ascii <span class="hljs-string"><span class="hljs-string">"Hello, world!\n"</span></span> msg_hello_len = . - msg_hello bcmd: .quad bcmd_bad, bcmd_bye, bcmd_num0, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x00</span></span> .quad bcmd_lit8, bcmd_lit16, bcmd_lit32, bcmd_lit64, bcmd_call8, bcmd_call16, bcmd_call32, bcmd_bad .quad bcmd_branch8, bcmd_branch16, bcmd_qbranch8, bcmd_qbranch16, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_exit # <span class="hljs-number"><span class="hljs-number">0x10</span></span> .quad bcmd_dup, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_wm, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x20</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x30</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x40</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x60</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_type, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad # <span class="hljs-number"><span class="hljs-number">0x80</span></span> .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad .quad bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad, bcmd_bad start: .byte b_lit8 .byte <span class="hljs-number"><span class="hljs-number">3</span></span> #  #  m0: .byte b_call16 .word sub_hello - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word sub_hello - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_wm .byte b_dup .byte b_qbranch8 .byte m0 - . .byte b_bye sub_hello: .byte b_lit64 .quad msg_hello .byte b_lit8 .byte msg_hello_len .byte b_type .byte b_exit .section .text .global _start #     _start: mov rbp, rsp sub rbp, stack_size lea r8, start jmp _next b_exit = <span class="hljs-number"><span class="hljs-number">0x17</span></span> bcmd_exit: mov r8, [rbp] add rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> _next: movzx rcx, byte ptr [r8] inc r8 jmp [bcmd + rcx*<span class="hljs-number"><span class="hljs-number">8</span></span>] b_num0 = <span class="hljs-number"><span class="hljs-number">0x02</span></span> bcmd_num0: push <span class="hljs-number"><span class="hljs-number">0</span></span> jmp _next b_lit8 = <span class="hljs-number"><span class="hljs-number">0x08</span></span> bcmd_lit8: movsx rax, byte ptr [r8] inc r8 push rax jmp _next b_lit16 = <span class="hljs-number"><span class="hljs-number">0x09</span></span> bcmd_lit16: movsx rax, word ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> push rax jmp _next b_call8 = <span class="hljs-number"><span class="hljs-number">0x0C</span></span> bcmd_call8: movsx rax, byte ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> inc r8 mov [rbp], r8 add r8, rax jmp _next b_call16 = <span class="hljs-number"><span class="hljs-number">0x0D</span></span> bcmd_call16: movsx rax, word ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> mov [rbp], r8 add r8, rax jmp _next b_call32 = <span class="hljs-number"><span class="hljs-number">0x0E</span></span> bcmd_call32: movsx rax, dword ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> mov [rbp], r8 add r8, rax jmp _next b_lit32 = <span class="hljs-number"><span class="hljs-number">0x0A</span></span> bcmd_lit32: movsx rax, dword ptr [r8] add r8, <span class="hljs-number"><span class="hljs-number">4</span></span> push rax jmp _next b_lit64 = <span class="hljs-number"><span class="hljs-number">0x0B</span></span> bcmd_lit64: mov rax, [r8] add r8, <span class="hljs-number"><span class="hljs-number">8</span></span> push rax jmp _next b_dup = <span class="hljs-number"><span class="hljs-number">0x18</span></span> bcmd_dup: push [rsp] jmp _next b_wm = <span class="hljs-number"><span class="hljs-number">0x20</span></span> bcmd_wm: decq [rsp] jmp _next b_branch8 = <span class="hljs-number"><span class="hljs-number">0x10</span></span> bcmd_branch8: movsx rax, byte ptr [r8] add r8, rax jmp _next b_branch16 = <span class="hljs-number"><span class="hljs-number">0x11</span></span> bcmd_branch16: movsx rax, word ptr [r8] add r8, rax jmp _next b_qbranch8 = <span class="hljs-number"><span class="hljs-number">0x12</span></span> bcmd_qbranch8: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jnz bcmd_branch8 inc r8 jmp _next b_qbranch16 = <span class="hljs-number"><span class="hljs-number">0x13</span></span> bcmd_qbranch16: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rax, rax jnz bcmd_branch16 add r8, <span class="hljs-number"><span class="hljs-number">2</span></span> jmp _next b_bad = <span class="hljs-number"><span class="hljs-number">0x00</span></span> bcmd_bad: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bad_byte #     mov edx, msg_bad_byte_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_bye = <span class="hljs-number"><span class="hljs-number">0x01</span></span> bcmd_bye: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> mov ecx, offset msg_bye #     mov edx, msg_bye_len #   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> #   โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ sys_exit mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> #    <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   b_type = <span class="hljs-number"><span class="hljs-number">0x80</span></span> bcmd_type: mov eax, <span class="hljs-number"><span class="hljs-number">4</span></span> #   โ <span class="hljs-number"><span class="hljs-number">4</span></span> โ sys_write mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> #  โ <span class="hljs-number"><span class="hljs-number">1</span></span> โ <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> pop rdx pop rcx push r8 <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> #   pop r8 jmp _next</code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูู ุงููุชูุฌุฉ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ูููุง ุจุงุฎุชุจุงุฑ ุขูุฉ ุจุงูุช ููุฏุณ 64 ุจุช ูุงููุฉ ูุณุฑูุนุฉ ุฅูู ุญุฏ ูุง. ูู ุงูุณุฑุนุฉ ุ ุฑุจูุง ุชููู ุขูุฉ ุงูุจุงูุช ูุฐู ูุงุญุฏุฉ ูู ุฃุณุฑุน ุงูุฃุฌูุฒุฉ ูู ูุฆุชูุง (ุขูุฉ ุจุงูุช ููุฏุณ ุจุฏูู JIT). ุฅููุง ุชุนุฑู ููููุฉ ุชูููุฐ ุงูุฃูุงูุฑ ุจุงูุชุณูุณู ุ ูุงูุงูุชูุงู ุงูุดุฑุทู ูุบูุฑ ุงููุดุฑูุท ุ ูุฅุฌุฑุงุกุงุช ุงูุงุชุตุงู ุ ูุงูุนูุฏุฉ ูููุง. ูู ุงูููุช ููุณู ุ ูููู ุงูุฑูุฒ ุงูุซุงููู ุงููุณุชุฎุฏู ูุถุบูุทูุง ุฅูู ุญุฏ ูุนููู. ูู ุงูุฃุณุงุณ ุ ุชุฃุฎุฐ ุฃูุงูุฑ ุงูุจุงูุช 1-3 ุจุงูุช ุ ูุฃูุซุฑ ูุงุฏุฑ ุฌุฏูุง (ุงูุฃุฑูุงู ุงููุจูุฑุฉ ููุท ุ ูุงุณุชุฏุนุงุกุงุช ุงูุฅุฌุฑุงุกุงุช ุงูุจุนูุฏุฉ ุฌุฏูุง). ูุชู ุฃูุถูุง ุฑุณู ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุฃูุงูุฑ ุงูุจุงูุช ุ ูุงูุชู ูุณูู ุชูุณูุนูุง. ุงูุชุฑุถ ุฃู ุฌููุน ุงูุฃูุงูุฑ ุงูุฃุณุงุณูุฉ ููุนูู ูุน ุงูุญุฒูุฉ (ูููู ุฅุณูุงุทูุง ูุฅุณูุงุทูุง ูุฅุบูุงููุง ูุฅุบูุงููุง ููุง ุฅูู ุฐูู ูู 20 ุฏูููุฉ ุ ูุณูุฐูุจ ููุณ ุงููุจูุบ ุฅูู ุฃูุงูุฑ ุนุฏุฏ ุตุญูุญ ุญุณุงุจู).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุฉ ุฃุฎุฑู ูููุฉ. ูุง ูุญุชูู ุงูููุฏ ุงูุฌุงูุจู ุ ุนูู ุนูุณ ุฑูุฒ ุงูุญุตู ุงููุฎูุท ุงููุจุงุดุฑ ุงูููุงุณููู ุ ุนูู ุชุนูููุงุช ุงููุงูููุฉ ุ ูุฐูู ูููู ูููู ุฏูู ุฅุนุงุฏุฉ ุชุฌููุนู ุฅูู ููุตุฉ ุฃุฎุฑู. ูููู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูููุงุฉ ูุฑุฉ ูุงุญุฏุฉ ุฅูู ูุธุงู ุงูุชุนูููุงุช ุงูุฎุงุต ุจุงููุนุงูุฌ ุงูุฌุฏูุฏ ุ ููููู ุงูููุงู ุจุฐูู ุจุณุฑุนุฉ ูุจูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู ุฌูุงุฒ ุงูุจุงูุช ูุง ููุชุตุฑ ุนูู ุฃู ูุบุฉ ูุนููุฉ. ููููู ุฃุฑุบุจ ูู ุชูููุฐ ูุบุฉ Fort ุนูู ุฐูู ูุฃู ูุฏู ุฎุจุฑุฉ ูู ุฐูู ุ ููููู ุฅุฌุฑุงุก ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ุจุณุฑุนุฉ ูุจูุฑุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ุงูุชูุงู ุจูุฐุง ุ ุงุณุชูุงุฏูุง ุฅูู ูุฐุง ุงูุฌูุงุฒ ุ ูู ุงูููุงูุฉ ุงูุชุงููุฉ ุ ูุณูู ุฃููู ุจุฅุฏุฎุงู ูุฏุฎูุงุช ูู ุงูุณูุงุณู ูุงูุฃุฑูุงู ููุงููุณ ุงูุญุตู ููุชุฑุฌู ููุฑู. ููููู "ููุณ" ุงููุฑูู ุจูุฏูู. ุญุณููุง ุ ูู ุงููุงุฏุฉ ุงูุซุงูุซุฉ ุ ุณูููู ุจุฅูุดุงุก ูุชุฑุฌู ุ ูุณูุญุตู ุนูู ูุธุงู ุญุตู ูุงูู ุชูุฑูุจูุง. ุจุนุฏ ุฐูู ุ ุณูููู ูู ุงููููู ูุชุงุจุฉ ูุชุฌููุน ุจุนุถ ุงูุฎูุงุฑุฒููุงุช ุงูููุงุณูุฉ ูููุงุฑูุฉ ุงูุฃุฏุงุก ุจุงููุบุงุช ูุงูุฃูุธูุฉ ุงูุฃุฎุฑู. ููููู ุงุณุชุฎุฏุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุบุฑุจุงู ุฅุฑุงุชูุณุชููุณ ุ ููุง ุดุงุจู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุซูุฑ ููุงูุชูุงู ุชุฌุฑุจุฉ ุงูุฎูุงุฑุงุช. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุงุฌุนู ุฌุฏูู ุงูุฃูุงูุฑ 16 ุจุช ุ ูุงูุธุฑ ููู ุณูุคุซุฑ ูุฐุง ุนูู ุงูุฃุฏุงุก. </font><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ุชุญููู ููุทุฉ ุฅุฏุฎุงู _next ุฅูู ูุงูุฑู ุ ููู ูุฐู ุงูุญุงูุฉ ุ ุณูุฒุฏุงุฏ ุญุฌู ุฑูุฒ ุงูุฌูุงุฒ ููู ุฃูุฑ ูู ูุญุฏุงุช ุงูุจุงูุช ุจุฃูุฑูู (ูุฎุตูููุง ูู ุงูุงูุชูุงู ุจุงูุฅุถุงูุฉ ุฅูู ุซูุงุซุฉ ุฃูุงูุฑ ูู _next). </font><font style="vertical-align: inherit;">ุจูุนูู ุฃูู ูู ุงูููุงูุฉ ูู ูููู ููุงู ุงูุชูุงู ุฅูู _next ุ ูููู ูุญุชููุงุช ููุทุฉ _next ููุณูุง (ูุฐู ูู 14 ุจุงูุช). </font><font style="vertical-align: inherit;">ูู ุงููุซูุฑ ููุงูุชูุงู ูุนุฑูุฉ ููู ุณูุคุซุฑ ูุฐุง ุนูู ุงูุฃุฏุงุก. </font><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ูุญุงููุฉ ุงูููุงู ุจุงูุชุญุณูู ุจุงุณุชุฎุฏุงู ุงูุณุฌูุงุช. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุชููู ุญููุฉ ููุงุณูุฉ ูุน ุนุฏุงุฏ ูู ุงูุญุตู ุจุชุฎุฒูู ุงูุนุฏุงุฏ ูู ููุฏุณ ุงูุฅุฑุฌุงุน. </font><font style="vertical-align: inherit;">ููููู ุนูู ูุณุฎุฉ ูู ุงูุณุฌู ูุงุฎุชุจุงุฑู ุฃูุถูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ุฅูุดุงุก ูุชุฑุฌู ุงูุชุนุจูุฑุงุช ุงูููุชูุจุฉ ูู ุงููููุฐุฌ ุงูููุงุณููู (ุนูู ุณุจูู ุงููุซุงู ุ A = 5 + (B + C * 4)).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุดูู ุนุงู ุ ููุงู ูุฌุงู ููุชุฌุฑูุจ! </font></font> :) <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุฑุงุฑ: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขูุฉ ุจุงูุช ููุญุตู (ูููุณ ููุท) ูู ุฃูุฑููุง ุงูุฃุตููุฉ (ุงูุฌุฒุก 2)</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar431932/">https://habr.com/ru/post/ar431932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar431920/index.html">Frontend Mix - ุชูุงุฑูุฑ ุนู Node.js ุ ูุงูุชุฏุฑุฌูุฉ ูุดุจูุฉ ุงูุฅูุชุฑูุช ุงูุฃุตููุฉ</a></li>
<li><a href="../ar431922/index.html">ูุง ูู ุทุฑููุฉ ููุงุจุถ ูู ุฌุงูุง</a></li>
<li><a href="../ar431924/index.html">ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุนุงุช ุจุงุณุชุฎุฏุงู CQRS ู Sourcing Event. ุนูููุฉ ุงูุชูููุฉ</a></li>
<li><a href="../ar431928/index.html">ุงูุชุนุจ ูู ุงูููุงุฏ ุงูุงุณุชููุงููุฉ. ุฃู ูุตูุฏุฉ A.S. ูุงูุงุฑูููู</a></li>
<li><a href="../ar431930/index.html">ูุฌุชูุน DevOps ูู ุณุงู ุจุทุฑุณุจุฑุฌ</a></li>
<li><a href="../ar431934/index.html">ููู ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ุงูุนูู ูุน ุงููุซุงุฆู ุงููุงููููุฉุ ูุญุงุถุฑุฉ ูุฅูุฌูุฑ ุจูุฏููููู ูู ABBYY</a></li>
<li><a href="../ar431936/index.html">ูุชุงุฆุฌ ูุณุงุจูุฉ TechnoText</a></li>
<li><a href="../ar431938/index.html">ุนุฏุฏ ุตุญูุญ ููุนุจ ุงูุฌุฐุฑ ูู ููุฑูููุฌ</a></li>
<li><a href="../ar431940/index.html">ูุญุชุฑู ุงููุงุณ ุฅุฐุง ูู ูุดุนุฑูุง ุจูููุชูุง. ูุงุฐุง ุชูุนู ุญูุงู ุฐููุ</a></li>
<li><a href="../ar431942/index.html">ุญูู ุงูุชุจุนูุฉ ุงููุฑููุฉ ูู React ู MobX State Tree ููููุฐุฌ ูุฌุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>