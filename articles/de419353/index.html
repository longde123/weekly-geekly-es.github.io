<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😿 👏🏿 💛 Was Sie vor, nach und während des Übergangs zu Kubernetes erwartet - Business Note 🦑 👎🏽 😺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! 

 In diesem Artikel haben wir uns entschlossen, ein wenig darüber zu spekulieren, wann und warum Unternehmen Kubernetes benötigen. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was Sie vor, nach und während des Übergangs zu Kubernetes erwartet - Business Note</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/419353/">  Hallo allerseits! <br><br>  In diesem Artikel haben wir uns entschlossen, ein wenig darüber zu spekulieren, wann und warum Unternehmen Kubernetes benötigen.  Wie schwierig ist die Technologie für den Einstieg, wie schnell und wie wird sie sich auszahlen.  Lohnt es sich und was alles bedroht?  Wir haben uns nicht die Aufgabe gestellt, eine eingehende technische Überprüfung zu schreiben, von der es viele gibt, aber in den folgenden Materialien werden wir definitiv unsere Best Practices in Bezug auf Anwendungsarchitektur und Stabilität unter Kubernetes teilen.  Jetzt konzentrieren wir uns darauf, ob das Spiel die Kerze wert ist und was wir auf dem Weg nach draußen bekommen. <br><br><img src="https://habrastorage.org/webt/tn/tb/cj/tntbcjekwq04x9inchtup9hyahi.png"><br><a name="habracut"></a><br>  Time-to-Market - die Geschwindigkeit, mit der Aktualisierungen auf den Markt gebracht werden - wird heute zu einem Schlüsselfaktor für die Effektivität von IT-Lösungen.  Das Produkt muss jeden Tag verbessert werden: Fügen Sie neue Funktionen und Module hinzu, halten Sie die Dokumentation und Skripte in einwandfreiem Zustand.  Gleichzeitig sollten Online-Systeme reibungslos funktionieren und aktualisiert werden, ohne die Benutzer zu beeinträchtigen. <br><br>  Wächter des unauffälligen kontinuierlichen Updates sind Microservices, Container und die Infrastruktur für ihre Orchestrierung - Kubernetes (oder K8S, wie es in technischen Kreisen genannt wird). <br><br><h2>  Wie Kubernetes kontinuierliche Systemaktualisierungen bereitstellt </h2><br>  Die Hauptaufgabe beim Aktualisieren einer IT-Lösung besteht darin, den ordnungsgemäßen Betrieb nach der Übertragung von der Entwicklungsumgebung auf die Produktplattform sicherzustellen.  Und auch im reibungslosen Betrieb des Systems zum Zeitpunkt der Produktaktualisierung. <br><br>  Das Problem liegt in der Tatsache, dass die Einstellungen der Entwicklungsumgebung und der Industrieserver häufig nicht übereinstimmen.  Container beheben dieses Problem, indem sie alle Softwarekomponenten in einem Paket kombinieren, das von der externen Umgebung isoliert ist.  Auf diese Weise können Sie Anwendungen schnell und zuverlässig in jeder Infrastruktur bereitstellen und die Codebasis des Systems aktualisieren. <br><br>  Von Benutzern nicht bemerkt, erfolgen Aktualisierungen durch Duplizieren von Containern und sequentielle Umleitung von Benutzern von einem zum anderen.  Für die Containerverwaltung (Orchestrierung) verwenden wir Kuberenetes.  Letztendlich erleichtert es das Lösungsmanagement, die Bereitstellung und Aktualisierung, die Leistungsüberwachung und das Debuggen im Fehlerfall. <br><br><h2>  Wenn ein Unternehmen Kubernetes braucht </h2><br>  Es ist Zeit für Unternehmen, über einen Wechsel zur Kubernetes-Plattform nachzudenken, wenn: <br><br><ul><li>  Ein Projekt oder System ist ein wichtiges Werkzeug für Unternehmen und muss daher fehlertolerant sein und weiter funktionieren, auch wenn ein Teil nicht in Ordnung ist. </li><li>  Das System ist stark ausgelastet und behält schnelle Updates oder Verbesserungen bei. </li><li>  Das System benötigt regelmäßig zusätzliche Kapazität.  Und braucht sie sofort. </li><li>  Und mit all dem wird die Geschwindigkeit der Bereitstellung von Updates für die industrielle Umgebung in Wochen, Monaten, Jahren, aber niemals - Stunden oder Tagen - gemessen. </li></ul><br>  Sie benötigen Kubernetes auch als Werkzeug zur Automatisierung und Standardisierung der Arbeit mit der Lösung, wenn zusätzlich zu den oben genannten: <br><br><ul><li>  Es gibt keine Isolation zwischen den IT-Systemen des Unternehmens und beide können sich gegenseitig beeinflussen. </li><li>  Wenn Sie jedes Mal ein separates Skript schreiben müssen, um mit den Parametern des Servers zu kommunizieren, auf dem das System bereitgestellt wird, können Sie diesen Prozess nur von Hand skalieren. </li><li>  Es gibt Schlüsselpersonen im Entwicklungsteam - Träger von „geheimem Wissen“ über das Projekt oder System, und sie scheinen einzigartig und unersetzlich. </li></ul><br>  Der Wechsel zu Kubernetes ist im Wesentlichen ein Muss für Unternehmen, die Online-Informationssysteme rund um die Uhr unterstützen müssen. <br><br><h2>  Warum Kubernetes? </h2><br>  Kubernetes ist nicht die einzige Alternative für die kontinuierliche Integration und Bereitstellung (CI / CD).  Aber es war Kubernetes, das zum Industriestandard für die Verwaltung von Systemen wurde, die eine hohe Verfügbarkeit erfordern. <br><br>  Für uns als Entwickler sind die entscheidenden Argumente für Kubernetes folgende: <br><br><ul><li>  Die Plattform konzentriert sich auf Anwendungen, nicht auf die Infrastruktur. </li><li>  Kubernetes eignet sich für die Arbeit mit einem Rechenzentrum sowie mit mehreren Rechenzentren, die in verschiedenen Städten verteilt sind. </li><li>  Einfache Lösungsunterstützung durch klare Dokumentation und eine aktive Community. </li><li>  Flexible Konfiguration verschiedener Anwendungen, sichere Verkehrsverteilung. </li><li>  Docker-Container-Unterstützung. </li></ul><br><h2>  Was sind die Vorteile des Kubernetes-Geschäfts? </h2><br><ul><li>  Flexible Konfiguration und automatisierter Update-Prozess <br>  Sie bestimmen selbst, welcher Teil des Systems in Betrieb genommen werden soll.  Mit Kubernetes können Sie einen kurzen Release-Zyklus durchführen.  Alle Vorgänge - vom Quellcode des Systems bis zur Freigabe in die Produktumgebung - erfolgen automatisch.  Sie benötigen kein Team von Ingenieuren, damit das System funktioniert.  Aktuelle Updates wirken sich nicht auf die Leistung des Systems aus und können jederzeit für Entwickler durchgeführt werden. </li><li>  Platzierung und Skalierung des Systems <br>  Das System kann sowohl von der Rechenleistung des Kunden (oder im Rechenzentrum) als auch von jedem Cloud-Anbieter, z. B. Amazon oder Azure, abhängig gemacht werden.  Jedes Maß an Leistung und Fehlertoleranz kann leicht durch Skalieren des Clusters erreicht werden. </li><li>  Standardisierung und Selbstdokumentation <br>  Die Lösung erfordert keine Anweisungen.  Es ist selbstdokumentierend und wird sofort automatisch in eine Nutzungseinheit - einen Container - verpackt.  Wir beschreiben die Konfiguration in Kubernetes als Plan / Diagramm.  Wir schreiben keine Skripte, die die Umgebung vorbereiten, wie es vor Kubernetes war.  Stattdessen geben wir an Kubernetes Informationen (ein Diagramm) weiter, wie die Lösung funktionieren soll.  Und er selbst setzt dieses Schema um. <br><br>  Entwickler schreiben jetzt eine Anwendung, um in einem Container zu arbeiten.  Die Entwickler von DevOps schreiben ein Diagramm, wie eine Anwendung in einem Container funktionieren soll, und Kubernetes selbst führt die Aufgaben zum Erstellen einer Lösung aus. <br><br>  Die Kubernetes-Technologie ist standardisiert.  Es ist für Sie einfach, einen neuen Mitarbeiter in Ihrem Freigabesystem zu schulen oder das System an einen neuen Auftragnehmer zu übertragen. <br><br>  Die endgültige Konfigurationsbeschreibung, die Kubernetes erstellt, ist auch die Dokumentation für das System.  Aus den Namen geht sofort hervor, welche Parameter konfiguriert sind und wofür sie bestimmt sind. <br><br>  Aus diesem Grund universalisiert die Kubernetes-Plattform insgesamt Releases, Updates und Releases der Anwendung. </li></ul><br><ul><li>  Schmerzlose Live-Tests <br>  Der Testprozess der Lösung hat sich geändert.  Entwickler können bei Bedarf Umgebungen für automatisierte Tests erstellen, die mit den Produktumgebungen identisch sind.  Die allgemeinen Protokolle zur Funktionsweise der Anwendung und zur Funktionsweise von Kubernetes mit der Anwendung helfen dabei, Probleme zu untersuchen und Fehler noch schneller zu finden. </li></ul><br><h2>  Was für eine Geschäftsumstellung auf Kubernetes erforderlich ist </h2><br>  Kubernetes selbst wird nur ein kleiner Teil Ihres neuen Systems sein.  Sie müssen darauf vorbereitet sein, dass Kubernetes als Tool zur Standardisierung des gesamten Entwicklungszyklus, zum Aktualisieren und Veröffentlichen von Anwendungen zum Zeitpunkt des Übergangs eine Änderung in allen Bereichen mit sich bringt: Softwarearchitektur, Entwicklungsprozess und Wartung der Infrastruktur. <br><br><ul><li>  Lösungsarchitektur <br>  Aus Sicht des Produkts ist der Übergang nur möglich, wenn das System implementiert oder auf eine Microservice-Architektur aktualisiert wird, die auf Diensten basiert, die in Containern verpackt werden können (zustandslose Dienste). </li><li>  Entwicklungsprozess <br>  Aus Sicht des Entwicklungsprozesses beinhaltet der Übergang in erster Linie eine Änderung des Denkens.  Jegliche im letzten Moment hinzugefügten Situationsverbesserungen und „Krücken“ sind vollständig ausgeschlossen.  Ein IT-Lösungsentwickler kann nur als ein Team arbeiten, das zunächst ein zunächst getestetes, unterstütztes, verpacktes und zerlegbares Produkt herstellt.  Alles sollte logisch von der ersten Codezeile bis zur Operation erstellt werden. </li><li>  Aktualisierungsprozess <br>  Bereits in der Phase der Entwicklung der Anwendungsarchitektur müssen Sie darüber nachdenken, wie Sie die Lösung aktualisieren können, ohne anzuhalten.  Und verstehen Sie sofort, wie Sie die Datenbank und die API aktualisieren, wie logisch es ist, mehrere Versionen der Anwendung zu unterstützen, und berücksichtigen Sie dabei, dass Benutzer während des Updates mit dem System arbeiten und in verschiedene Versionen fallen können. <br><br>  Eine weitere Überlegung hängt mit der Tatsache zusammen, dass beim Wechsel zu Kubernetes die Infrastruktur im schreibgeschützten Modus funktioniert. Um das System zu aktualisieren, müssen Sie neue Versionen der Anwendungsabbilder erstellen und Kubernetes anweisen, die neue Version zu verwenden. Später wird die alte Version und deaktiviert wird sich selbst löschen. </li></ul><br><br>  Damit können Systemverbesserungen und Änderungen in der Arbeitstechnologie nicht vermieden werden.  Das Bewegen wird nicht schnell sein.  Sie müssen das Paradigma jedoch nur einmal ändern. <br><br><h2>  Fall.  Wie wir das Microservice-System auf Kubernetes übertragen haben </h2><br>  Wir betreiben in einer Produktumgebung eine hoch ausgelastete Lösung, die auf einer Microservice-Architektur basiert und mehr als 300.000 Transaktionen pro Tag und zu Spitzenzeiten von 60 bis 80.000 pro Stunde überträgt.  Wir aktualisieren das Produkt regelmäßig. Es gibt auch dringendere Versionen, die zuvor erforderlich waren, um das System oder einen Teil seiner Funktionalität für eine Weile auszusetzen. <br><br>  Wir sind ohne K8S in die Lebensmittelumgebung gegangen, aber wir haben das System zunächst mit einem Auge entwickelt.  Die Übersetzung der Lösung in Kubernetes dauerte 6 Wochen.  Wir haben uns in folgende Richtungen bewegt: <br><br><h4>  1) Einrichten der Bereitstellungspipeline </h4><br>  a.  Konfigurieren der Pipeline für die kontinuierliche Montage, Prüfung und Anwendungsaktualisierung (CI / CD) in Testumgebungen. <br>  b.  Richten Sie kontinuierliche Updates in einer industriellen Umgebung ein. <br>  c.  Vorbereitung und Konfiguration der Umgebung so nah wie möglich an der industriellen Umgebung (Preprod).  Wir haben den Cluster neben den aktuellen virtuellen Maschinen bereitgestellt und getestet. <br>  d.  Entwicklung eines Plans für die Migration in ein industrielles Umfeld. <br><br>  Alles scheint einfach zu sein, wir haben eine CI / CD-Pipeline für alle Umgebungen und Sie können wechseln, aber es ist zu früh! <br><br><h4>  2) Auswahl der Clusterkonfiguration </h4><br>  Einige Wochen haben wir uns mit der Auswahl der stabilsten Konfiguration von Komponenten und Versionen des Kubernetes-Clusters befasst: Betriebssystem + Docker + Kubernetes. <br><br>  Wir haben 3 verschiedene Konfigurationen von Betriebssystemen getestet (Ubuntu, CentOS, neueste Versionen von Oracle Linux).  Auf jedem Betriebssystem wurden zwei verschiedene Versionen von Docker und Kubernetes überprüft - diejenige, die in den neuesten Versionen der Standardbetriebssystempakete geliefert wurde, und die neueste Version des Herstellers.  Infolgedessen zeigten die Konfigurationen aus der Standarddistribution von Oracle Linux die größte Stabilität, und wir haben uns für sie entschieden. <br><br><h4>  3) Konfigurieren der Containereinstellungen </h4><br>  Wir haben mehr Zeit damit verbracht, die Parameter des Containers zu optimieren - wir haben die Anforderungen für Speicher, Festplatte und Prozesse festgelegt. <br><br>  Und erst nachdem wir dies alles getan und verschiedene Parameter der Systemfunktion (Stabilität, Fehlertoleranz und andere) in der Vorprode unter Last in der Nähe der Kampflasten getestet hatten und das System stabil funktionierte, gingen wir zur Endphase über - der Migration. <br><br>  Dann war alles einfach. <br><br><h4>  Tag C. Migration </h4><br>  Für die Kampfmigration haben wir die Zeit mit der minimalen Systemlast gewählt: die minimale Anzahl von Benutzern und das Fehlen einer erhöhten Last gemäß dem Zeitplan der internen Arbeit der Systemalgorithmen. <br><br>  Die Ausfallzeit des Systems betrug ungefähr eine Stunde und hatte praktisch keine Auswirkungen auf die Benutzer.  Die Migration selbst bestand darin, Benutzer von einem System auf ein anderes zu wechseln und festzustellen, dass alles in Ordnung war. <br><br><h4>  Leben mit Kubernetes </h4><br>  Jetzt hat der Aktualisierungsprozess keine Auswirkungen auf die Systemleistung. Er kann jederzeit für Entwickler ausgeführt werden und sieht wie folgt aus: <br><br><ol><li>  Die Entwickler haben eine Überarbeitung vorgenommen, diese getestet und den Code an die Veröffentlichung gesendet. </li><li>  Der Code wurde automatisch zusammengestellt, in Docker-Images verpackt und in einem privaten Docker-Repository veröffentlicht. </li><li>  Kubernetes löst automatisch neue Versionen von Diensten aus, überprüft, ob die Dienste ordnungsgemäß funktionieren, schaltet Benutzer auf die Verwendung neuer Versionen von Diensten um, stoppt die Arbeit alter Versionen und entfernt sie aus dem Cluster.  Das Update hat stattgefunden. </li></ol><br><h2>  Zusammenfassung unserer Erfahrungen </h2><br>  Sie benötigen Kubernetes, wenn: <br><br><ol><li>  Eine hohe Verfügbarkeit des Systems ist erforderlich. </li><li>  Das System entwickelt sich dynamisch und Sie müssen Änderungen an der Produktumgebung mit geschlossenen Augen vornehmen. </li><li>  Sie möchten als ein einziges Team vom Code bis zur Produktumgebung arbeiten. </li><li>  Sie erstellen ein dynamisches, sich weiterentwickelndes System, das Sie jahrelang betreiben werden. </li></ol><br>  Kubernetes ist „teuer“, da für den Einstieg in die Technologie Folgendes erforderlich ist: <br><br><ol><li>  Studieren durch Entwickler verwandter Technologien. </li><li>  Überprüfung der Prozesse für Design, Entwicklung, Bereitstellung, Test und Umweltmanagement. </li><li>  Erfahrung im Betrieb von Kubernetes selbst: Jetzt müssen Sie nicht nur Ihr System, sondern auch die Kubernetes-Anwendungsdienste überwachen. </li></ol><br>  Kubernetes sehr schnell zurückzahlen: <br><br><ol><li>  Das Systemaktualisierungsverfahren ist viel einfacher und schneller.  Entwickler werden von einem ganzen Arbeitsblock befreit. </li><li>  Jeder neue Spezialist wird das Projekt bereits auf Schienen betreten. </li><li>  Der Förderer ist transparent und automatisiert. </li><li>  Die Erfahrung wird von Ihrem Team für andere Systeme wiederholt. </li><li>  Sie aktualisieren das System, ohne es außer Betrieb zu setzen, was bedeutet, dass Sie das Geschäft nicht stoppen. </li></ol><br>  PS Praktischer Rat: Teilen Sie den Zugang zur Technologie in zwei Phasen: Entwickeln Sie ein System mit der richtigen Microservice-Architektur und verschieben Sie es unter die Kontrolle von K8S.  Somit wird der Übergang unter Kubernetes nicht zu einem globalen Refactoring. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419353/">https://habr.com/ru/post/de419353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419339/index.html">Boeing Challenges und SpaceX-Erfolge auf der Konferenz der Aerospace Security Advisory Group</a></li>
<li><a href="../de419341/index.html">Was sie nicht über den Tesla-Bericht sagen</a></li>
<li><a href="../de419345/index.html">Bericht des Club of Rome 2018, Kapitel 3.8: „Closed-Loop-Ökonomie erfordert eine andere Logik“</a></li>
<li><a href="../de419347/index.html">UE4 | Inventar für Multiplayer # 3 | Interaktionsstruktur</a></li>
<li><a href="../de419349/index.html">Warum Arbeits- und Wertpriorisierung nicht funktioniert</a></li>
<li><a href="../de419357/index.html">3CX Webmeeting Update: Verbesserte Statistik für Benutzeroberfläche, Multimedia-Leiste und Kommunikationsqualität</a></li>
<li><a href="../de419359/index.html">PHP Digest Nr. 136 (24. Juli - 6. August 2018)</a></li>
<li><a href="../de419361/index.html">thindf - neues Textdatenformat (Alternative zu JSON)</a></li>
<li><a href="../de419363/index.html">GitLab 11.1: Sicherheitssteuerung und erweiterte Suche veröffentlicht</a></li>
<li><a href="../de419365/index.html">Geschichten eines IT-Anwalts. Life-Outsourcing-Geschäft. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>