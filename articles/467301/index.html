<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💷 🆙 🔺 Cómo funciona la IA en Hitman (2016) 🐵 👶🏽 🚶🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lanzado por IO Interactive en 2016, Hitman ha devuelto la franquicia a sus raíces: creando escenarios ricos e interesantes en los que el Agente 47 tie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cómo funciona la IA en Hitman (2016)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467301/">  Lanzado por IO Interactive en 2016, <em>Hitman ha</em> devuelto la franquicia a sus raíces: creando escenarios ricos e interesantes en los que el Agente 47 tiene que eliminar sus objetivos, a menudo de manera improvisada y poco práctica.  Para resolver este problema, se utilizan muchos sistemas de IA dentro del juego, y los estudiaremos con precisión.  Profundizaremos en la estructura de los sistemas de IA que son responsables de varias funciones en la última generación de juegos de <em>Hitman</em> : la creación de NPC que responden a la situación, guardaespaldas, sistemas de multitudes, animaciones controladas por inteligencia artificial y mucho más. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/576/cfd/b1f/576cfdb1f04d610632ddb9b9b14c1792.png"></div><br><h1>  Sobre Hitman </h1><br>  Los jugadores en <em>Hitman tienen</em> la tarea de matar personalidades crueles y sin principios, de cuya muerte nadie se arrepentirá particularmente.  Pero en cada caso, el significado es más en historias únicas que el jugador puede crear por sí mismo, destruyendo objetivos de una manera compleja o divertida.  <em>Hitman está</em> plagado de sistemas que permiten al jugador experimentar, improvisar y responder a los cambios en la imagen más amplia que se desarrolla.  Disfrázate de camarero y envenena a la víctima con una bebida, rompe su cuello fingiendo ser un masajista, asusta al objetivo retratando a un médico de la peste o incluso ganando la confianza del equipo de grabación tocando la batería.  El juego proporciona a los usuarios una amplia gama de métodos de penetración interesantes y a menudo prenegociados, u oculta información de ellos en escenarios más complejos y largos. <a name="habracut"></a>  Ya sea que esté caminando en la pasarela de una semana de la moda en París o actuando en medio de un golpe político en Marrakech, sus objetivos siempre están en escenas densamente pobladas, vivas y complejas donde hay guardias personales y agencias locales de aplicación de la ley, sin mencionar a los civiles que interfieren bajo los pies.  Pero precisamente por esto, el juego se vuelve realmente interesante: los jugadores deben fusionarse con el entorno, disfrazarse y manipular el mundo que los rodea, para estar un paso más cerca de la meta, infligir retribución kármica en ellos y luego escapar hasta que el mundo a su alrededor sospeche la presencia del Agente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cda/a29/471/cdaa29471f072eacbd04307d6de0b0aa.png"></div><br>  <em>Hitman</em> brinda el mayor placer cuando la preparación y la planificación son correctas y se implementan perfectamente, y para esto necesita muchos sistemas de inteligencia artificial.  En este artículo, veremos cuatro elementos clave, explicaremos cómo funcionan y ayudaremos a crear el juego de <em>Hitman</em> : <br><br><ul><li>  Un sistema de árboles de comportamiento basado en la situación, en el que más de 300 personajes de nivel pueden tomar decisiones sobre sus acciones futuras en función de lo que sucede a su alrededor y responder a los eventos, que a menudo están en manos del jugador. </li><li>  Sistemas receptivos y prácticos de guardias y guardaespaldas que complican el trabajo del Agente y se distribuyen para proteger al jugador que complica llegar al objetivo. </li><li>  Un poderoso sistema para controlar y simular el comportamiento de las multitudes, que le permite usar en un nivel de multitud de hasta 1000 NPC que responden a las acciones de los jugadores. </li><li>  Y, por último, un marco de animación cuidadosamente ajustado que proporciona a todos estos personajes la apariencia y el comportamiento más realistas. </li></ul><br>  Explicaré cómo funcionan todos estos sistemas, y hablaré sobre las configuraciones más finas utilizadas tanto en el juego de 2016 como en la secuela de 2018.  Sin embargo, antes de comenzar una conversación sobre la IA de cualquier juego, debes mirar la fuente desde la que comienza la cadena de herramientas de IA y estudiar los principios básicos de su diseño.  Por lo tanto, comenzaremos con <em>Hitman Absolution</em> . <br><br>  Lanzado en 2012, <em>Hitman Absolution</em> implementó una interpretación más fluida y lineal de la fórmula de la franquicia.  A pesar de su popularidad relativamente baja en comparación con los juegos más nuevos, se ha convertido en la base de las tecnologías y herramientas básicas utilizadas en los juegos en 2016 y 2018.  Una de las razones más importantes para esto fue que Absolution fue el primer juego de franquicia después de <em>Hitman: Blood Money en</em> 2006 (entre ellos, IO Interactive jugó juegos en la serie <em>Kane &amp; Lynch</em> y <em>Mini Ninjas</em> . Por lo tanto, se crearon nuevas herramientas para <em>Absolution</em> y sistemas que reflejan mejor las ambiciones del equipo para el futuro La arquitectura básica de los personajes no jugadores de <em>Hitman</em> AI, así como sistemas para multitudes y animaciones, fueron creados para <em>Absolution</em> y mejorados para los lanzamientos de 2016 y 2018. <br><br><h1>  Arquitectura básica de IA </h1><br>  <em>Hitman</em> AI fue diseñado para aprovechar los diferentes estilos de pase que estaban disponibles en <em>Absolution</em> y juegos posteriores.  Esto significa que el sistema le permite usar el sigilo, disfrazarse y fusionarse con el entorno (los desarrolladores lo llaman "sigilo social") o elegir un enfoque más agresivo y sacudir las armas. <br><br>  Además, debe permitir que el NPC viva una vida normal, a veces incluso tenga procedimientos de comportamiento bien establecidos: sirven bebidas, aplican maquillaje, protegen las entradas, preparan la comida, es decir, hacen lo que es apropiado para el entorno de la escena.  Estos procedimientos deben ser predecibles y confiables, porque en los juegos de sigilo, los jugadores deben confiar en dicha previsibilidad.  Al mismo tiempo, la IA debe poder interrumpirlos cuando descubre uno de los muchos elementos que el jugador puede manipular en el mundo.  Por ejemplo, cuando un jugador apaga el motor, o bloquea el drenaje en el fregadero, o atraviesa el tanque de combustible, o enciende el video.  Dependiendo del tipo de interacción, atraerá inmediatamente a los personajes, ya que interfiere con sus acciones o cambia la secuencia de sus acciones más adelante, para que el jugador pueda usarla.  Esto es útil para algunas acciones específicas que le permiten atraer objetivos al lugar correcto.  El jugador no querrá esperar el resultado de 20 minutos, pero la reacción instantánea de los personajes habría parecido demasiado poco natural. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b13/2ee/5e5/b132ee5e54b675576344a207d6eeffec.png"></div><br>  <em>Hitman</em> Fundamental AI utiliza árboles de comportamiento, uno de los formatos de gestión de comportamiento de IA más comunes en los juegos modernos.  En los árboles de comportamiento, se construye una estructura de arriba hacia abajo que determina las reacciones de los personajes a diversas condiciones.  Los comportamientos se seleccionan según las condiciones específicas del mundo circundante y conducen a una acción o cadena de acciones como reacción a las acciones del jugador y otros sistemas de juego. <br><br>  Pero antes de que el árbol de comportamiento pueda tomar una decisión, cada personaje debe descubrir qué está sucediendo en el mundo que lo rodea.  Para esto, cada personaje de IA activo en el mundo tiene una base de conocimiento.  La base de conocimiento se compone de dos conjuntos de datos: conocimiento general, es decir, información públicamente conocida sobre un objeto o personaje, así como información que refleja su condición.  Pero también hay conocimiento privado de que el personaje retiene sobre las últimas posiciones conocidas de objetos o personajes.  También mantiene una historia de conocimiento sobre temas específicos.  En consecuencia, el personaje comienza a notar que las cosas cercanas desaparecen o se mueven;  Del mismo modo, no intentará encontrar personajes que hayan desaparecido o muerto, y también interactuará con ellos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/291/57f/28e29157f78212fae2e2bf0288f216f4.png"></div><br>  La base de conocimiento se acumula al recopilar toda la información que está sucediendo actualmente en un determinado punto del mundo del juego, con su posterior filtrado utilizando sensores y servicios.  Los sensores permiten a los personajes actualizar sus datos personales y responder a los cambios que notan, así como escuchar lo que sucede cerca.  Los servicios actualizan una base de conocimiento común.  Los tres servicios más comunes son Disfraz (disfraz), Deadbody (cadáver) y Hitman (asesino).  El servicio Disfraz se usa cuando el Agente 47 se transforma en un disfraz;  ayuda al personaje a saber si el disfraz del Agente debe sospechar de él.  El servicio Deadbody ayuda a los personajes cercanos a darse cuenta de que recientemente se ha encontrado un cadáver cerca de ellos.  Finalmente, el servicio Hitman le permite compartir conocimientos generales sobre el Agente 47, por ejemplo, información sobre si un jugador se vio comprometido y dónde fue visto por última vez.  Una característica divertida de los sensores es que proporcionan un curioso equilibrio de conocimiento contextual, al mismo tiempo que dejan huecos que el jugador puede explorar.  Los sensores proporcionan información directa sobre el mundo, pero su acción puede interrumpirse bloqueando el alcance o distrayendo a los personajes.  Los servicios no son omnipotentes y se actualizan solo a ciertos intervalos.  Por lo tanto, la mayoría de la información recibida de los servicios queda obsoleta con bastante rapidez, lo que permite al jugador manipular a los personajes en su interés. <br><br>  Pero cuando la IA recibe toda esta información, necesita tomar decisiones sobre sus acciones.  Cada personaje de IA puede incluir un conjunto de objetivos para sí mismo, que controla sus decisiones.  Después de seleccionar estos objetivos, utiliza el árbol de comportamiento para tomar decisiones sobre el comportamiento futuro.  Hasta ahora no he explicado esto, pero luego llegaremos a este tema. <br><br>  Para diversificar la jugabilidad, el juego divide las IA de NPC administradas en dos tipos principales: civiles y guardias de seguridad.  Esta separación afecta la información almacenada en su base de conocimiento y los tipos de objetivos que pueden elegir por sí mismos. <br><br>  Comencemos con los civiles.  Estos personajes suelen ser de naturaleza pasiva, pero notan el comportamiento más provocativo, considerándolo sospechoso o alarmante.  Al mismo tiempo, pueden tener objetivos como oponerse al jugador o advertir a los guardias, pero esto no les permite participar en la batalla.  Buenos ejemplos de esto son los niveles en el desfile de moda de París y en el hotel Bangkok 2016 en Bangkok.  En ellos, los civiles con diferentes perfiles de base de conocimiento presentan diferentes comportamientos.  Los invitados son mucho más pasivos, pero todos reaccionan al comportamiento más atroz del jugador, mientras que el personal y las personas que rodean el objetivo del Agente tienen más probabilidades de reaccionar a sus payasadas y tratar de contrarrestarlo. <br><br>  Pasemos a los guardias.  Naturalmente, son los principales oponentes del jugador y entran en batalla con él, reaccionando a las condiciones más extremas, por ejemplo, el descubrimiento de un cadáver o personas inconscientes, así como armas y otros elementos estratégicos que se encuentran en el mundo abierto.  Como se mencionó anteriormente, en 2016 <em>Hitman</em> apareció guardaespaldas de IA, siguiendo activamente al VIP y protegiéndolo cuando se mueve por el nivel.  Al mismo tiempo, todavía tienen libre albedrío y pueden explorar el mundo de forma independiente.  Para implementar esto, se requiere un sistema completamente diferente, y un poco más adelante hablaremos de ello. <br><br>  Entonces, después de haber recibido toda esta información y haber activado los objetivos, el juego construye un sistema de árboles de comportamiento que permite a los personajes actuar de acuerdo con una de dos opciones: ejecutar los comportamientos por su cuenta o unirse a "situaciones" en las que los comportamientos son coordinados por el grupo.  El comportamiento es una o más acciones, por ejemplo, girar hacia un jugador, interactuar o hablar con él, moverse a lugares del mundo, cambiar al modo de batalla o interactuar con objetos que el jugador manipuló.  Al jugar, notarás que muchos de los objetivos cumplen los comportamientos establecidos después de que el jugador manipula el mundo de cierta manera.  Esto sucede porque corresponde a los objetivos establecidos que los objetivos deben cumplir en caso de ciertas condiciones.  Es decir, se ponen intencionalmente en una posición de riesgo para que el jugador pueda matarlos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce0/3b9/eee/ce03b9eee115f6e62b51f8e76fa48bf0.png"></div><br>  Al mismo tiempo, las situaciones a menudo surgen cuando los eventos que ocurren en el mundo tienen un impacto más amplio, por ejemplo, cuando los personajes descubren cadáveres, cuando un jugador se ve comprometido o cuando el objetivo se da cuenta de que lo está buscando y trata de escapar.  En tales casos, los personajes son conscientes de lo que sucede a su alrededor y se unen a la situación.  La situación dicta acciones para cada uno de ellos y todos juegan su parte en esta actuación.  Por ejemplo, en el caso de que un jugador abra fuego en un desfile de modas, los invitados y el personal a menudo intentan escapar y pedir ayuda, y los guardias de seguridad comienzan a buscar al jugador y disparan. <br><br>  El sistema de árboles de comportamiento apareció por primera vez en Absolution y se mejoró mucho y se complementó con el lanzamiento de juegos en 2016 y 2018.  Utiliza un sistema de niveles de detalle (LOD).  Esto significa que cuando en el nivel hay más de 300 personajes de IA activos controlados por árboles de comportamiento, aquellos ubicados lejos del jugador actualizan su comportamiento con menos frecuencia, y la prioridad de los recursos de la CPU para actualizar la IA se otorga a los personajes más cercanos.  Además, para estos personajes lejanos de IA, las animaciones se simplifican o se desactivan por completo.  Como se mencionó anteriormente, la gran mayoría de los personajes en el nivel están controlados por el sistema de IA de la multitud, pero si es necesario, cada personaje de la multitud puede estar dotado de un árbol de comportamiento AI, lo que aumenta su capacidad para un personaje receptivo y coordinado. <br><br><h1>  Multitudes </h1><br>  Ahora, antes de pasar a los sistemas diseñados para el juego de 2016, echemos un vistazo al segundo sistema básico creado para Absolution: el marco de inteligencia artificial de multitudes.  En Absolution, podía soportar hasta 1200 agentes en una multitud, y 500 de ellos podían ser visibles al mismo tiempo.  Todavía no he dicho esto, pero los sistemas de multitudes son muy difíciles de implementar correctamente.  Las multitudes a menudo consisten en una multitud de muñecos de IA, que no se pueden comparar mentalmente con los personajes de IA comunes.  Esto se debe principalmente al hecho de que hay demasiados, pero a menudo también es bastante lógico: las personas en la multitud simplemente obedecen el instinto de la multitud y se mueven en el espacio hacia su objetivo.  Pero los desarrolladores de <em>Hitman</em> se propusieron difuminar la línea entre las multitudes y el comportamiento del árbol de IA. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/108/706/177/1087061777522d55cad496d23c34cac3.png"></div><br>  Los personajes se colocan en una multitud como individuos, capaces de caminar, detenerse y reconocer objetos en el espacio.  También hay grupos sobre los cuales los diseñadores tienen más control.  Un grupo es muy útil cuando hay una acción específica que varios personajes deben realizar en una multitud, por ejemplo, mirar en algún punto y al mismo tiempo formar una determinada forma, por ejemplo, una gran figura o configuración.  Cada personaje de personalidad implementa un sistema similar a una máquina de estados finitos simple, que tiene solo tres estados básicos de comportamiento: inactividad, caminar y "esperar para caminar".  El último estado es útil en situaciones donde el personaje quiere moverse, pero no se le permite hacer esto con una multitud de multitudes.  Si los personajes están atrapados en la multitud, entonces deciden la mejor dirección de movimiento y esperan una oportunidad que les permita volver a caminar nuevamente.  De hecho, todo es más complicado de lo que describo, porque en el proceso de movimiento, los personajes necesitan ajustar su velocidad.  Por lo tanto, cada personaje puede establecer la velocidad preferida y máxima que se utilizan para mantener el flujo de la multitud.  Tal sistema es aún más útil en caso de pánico, cuando las personas comienzan a correr al azar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/499/e6b/048/499e6b0486b1460aac182fb01f00a08f.png"></div><br>  Uno de los peligros reales de tener tantos agentes en un sistema de control de multitudes es que interrogan a un nomesch para encontrar una forma o simplemente verifican si pueden llegar al punto deseado.  Navigations Meshes es un sistema comúnmente utilizado en juegos 3D para mover personajes alrededor de entornos.  La compañía IO se dio cuenta de que este era un momento bastante crítico, por lo tanto, superpuso una cuadrícula de toma de decisiones en 2D que informaba al personaje de IA si era posible atravesar un espacio determinado, si debía evitarse (si se trata de un área protegida), puntos de salida para NPC y áreas prohibidas en caso de pánico causado por el Agente 47; sería extraño que la gente corriera tranquilamente a su lado.  La inteligencia artificial de las multitudes y los árboles de comportamiento tienen cuadrículas de toma de decisiones.  Para los árboles de comportamiento, las cuadrículas proporcionan una forma rápida y efectiva de realizar comprobaciones de visibilidad, buscar ubicaciones adecuadas cerca de puntos importantes y encontrar ubicaciones tácticas en relación con un personaje dado sin tensión excesiva sobre la bisagra. <br><br>  Pero la parte más difícil comienza cuando el Agente 47 se agrega al sistema. La multitud lo rodea y se ocupa de sus asuntos, pero cuando el jugador comienza a causar estragos, los sistemas de inteligencia artificial deben poder responder a él.  Los personajes en las inmediaciones del jugador deberían verse aterrados e intentar escapar, pero esto tendrá un efecto acumulativo en toda la multitud: comenzará a moverse por el espacio tan pronto como cada personaje cercano se escape de la fuente de la alarma.  Este problema se resuelve mediante dos sistemas llamados zonas de comportamiento y flujos de pánico. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/576/cfd/b1f/576cfdb1f04d610632ddb9b9b14c1792.png"></div><br>  Primero, cualquier acción en el mundo que debería influir en la multitud crea una o más zonas de comportamiento en el medio ambiente.  La zona de comportamiento envía un impulso con un cierto radio y ángulo en relación con la fuente del evento, que determina cómo debe reaccionar cada multitud que interactúa con la IA.  Por ejemplo, cuando los fuegos artificiales comienzan a hacer ruido, entonces todos los personajes dentro de un cierto radio giran hacia un punto importante para observar sus explosiones.  Si un jugador, mientras tanto, saca un arma y lo dirige a un espectador inocente, tres zonas de comportamiento funcionarán: <br><br><ul><li>  El primero hace que los que están en la línea de fuego caigan al suelo. </li><li>  El segundo hace que el personaje en las inmediaciones del jugador entre en pánico. </li><li>  El tercero hace que todos, dentro de un cierto radio del jugador, aprendan sobre la situación y entren en un estado de mayor ansiedad. </li></ul><br>  Cuando el Agente se mueve por el espacio con armas, estas zonas de comportamiento continúan enviando impulsos desde el jugador y hacen que otros personajes de IA de la multitud reaccionen ante él.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La zona de comportamiento puede causar muchas reacciones en la multitud AI: mire un punto importante, evite la fuente de la zona de comportamiento, notifíquelo, asuste o caiga al suelo. Si la IA de la multitud se encuentra entre varias zonas de comportamiento, prefiere la acción, que afectará más su estado de ánimo. Además, según mi investigación, si un jugador ahuyenta a los personajes, no será posible calmarlos, por lo tanto, solo puede hacerse peor y es imposible mejorar la situación. El jugador tiene un impacto negativo en la multitud. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los diseñadores crean estas zonas de comportamiento para cada nivel, porque son necesarias para que los personajes reaccionen a los eventos del mundo, pero sus reacciones tendrían sentido en un contexto específico. Por ejemplo, si en </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En 2016, comenzará una pelea en el bar en el desfile de modas, esto resultará muy inapropiado y la multitud reaccionará de manera bastante negativa. Si un jugador comienza un desastre en el iVixen Club en </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman Absolution</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces no se tomará tan en serio, porque las barras de striptease tienen una atmósfera adecuada y las personas pueden comportarse como cerdos allí.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero cuando un jugador crea caos, la multitud quiere salir de su camino, y los flujos de pánico entran aquí. </font><font style="vertical-align: inherit;">Los flujos de pánico se crean sobre la base de la cuadrícula de decisión, que mencioné anteriormente, en la que cada salida publicada por los diseñadores hace que cada celda del mapa calcule la ruta más corta a esta salida usando una variante del algoritmo de Dijkstra. </font><font style="vertical-align: inherit;">Estos caminos hacia las salidas son corrientes de pánico, y la multitud AI elige el mejor flujo a seguir en caso de peligro. </font><font style="vertical-align: inherit;">Dichos flujos se calculan para todas las salidas en un espacio dado, lo que permite que la IA de la multitud cambie dinámicamente a otra salida en caso de un "atasco de tráfico", así como para resolver situaciones en las que un jugador decide bloquear la salida más cercana.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guardaespaldas y VIP </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Después de mejorar los sistemas de IA de los árboles de comportamiento y la IA de la multitud para </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2016, quedaba por agregar otra función importante: el sistema VIP y los guardaespaldas. Muchos objetivos importantes en </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman están</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> acompañados por uno o más guardaespaldas, lo que agrega otro nivel de dificultad para el jugador. Por supuesto, cada nivel está diseñado para que pueda encontrar formas de sortearlos, a menudo obligándolos a moverse a posiciones más débiles o vistiéndose con un traje que les permita pasar desapercibidos. Pero para agregar este nuevo nivel de complejidad, era necesario integrar un sistema completamente diferente en el marco de IA terminado.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/1ca/180/0db1ca180d1fb3ced18fa78dfc4008fb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los desarrolladores necesitaban resolver el problema de crear una relación entre guardaespaldas y VIP. Anteriormente, los personajes de IA no sabían sobre la existencia del otro. La IA de la multitud solo sabía que algo impedía que se moviera alrededor del mundo, y la IA del árbol de comportamiento nunca supo lo que otros personajes estaban haciendo. Como se mencionó anteriormente, gracias al sistema de situaciones, parecía que estaban coordinados y respondían a eventos en el mundo, pero no podían unirse significativamente a otros personajes para participar en esta situación y no se comunicaban entre sí, porque solo usaban sensores y servicios. Simplemente le permiten agregarse a la situación y un sistema separado los selecciona según su posición local y otros criterios. Pero en este caso, necesitamos implementar una relación entre los dos tipos de IA. Los guardaespaldas siempre deben seguir al VIP y verificar su estado,si no lo has visto por un tiempo. Al mismo tiempo, muchas reacciones sistémicas a los sistemas de juego no deben ser manejadas por el propio VIP (después de todo, él es finalmente el jefe), simplemente ordena a sus guardaespaldas que se encarguen de ellos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto requirió situaciones de escolta VIP y evacuación completamente nuevas que deben integrarse en el sistema principal de IA. En este caso, las situaciones deben tener reglas muy específicas que determinen su trabajo. Para implementarlos, IO creó dos tipos especiales de caracteres. VIP es un tipo de IA civil que responde a las situaciones de manera un poco diferente, incluida una nueva capacidad para comandar a otras personas. Los guardaespaldas son un tipo de guardias de IA que tienen un conjunto de comportamientos ligeramente modificados y controlan activamente su VIP actual.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En primer lugar, el sistema te permite crear una situación llamada Ambient VIP Escort, en la que los guardaespaldas acompañan al VIP en el nivel. Los guardaespaldas usan los sistemas de búsqueda de nomeshme y camino para mantenerse cerca del personaje y seguirlo. Si el VIP decide detenerse, los guardaespaldas cambian a comportamientos pasivos y esperan hasta que necesiten seguirlo más. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, esto significa que los VIP nunca se pueden dejar solos. Naturalmente, un VIP puede necesitar quedarse solo para hacer negocios, lo que ayuda al jugador en su tarea. Por lo tanto, el VIP puede ordenar a los guardaespaldas que no lo sigan a ciertas áreas; los diseñadores de nivel colocaron notas en el mapa diciéndoles a los guardaespaldas dónde debían esperar al jefe.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero esto revela otro punto débil: el VIP puede perderse si los guardaespaldas simplemente se paran y no verifican si el jefe todavía está vivo. Esto es contrario a su propósito. Por lo tanto, se agregó otra situación al juego: el comportamiento de Escort-Search. Si el juego comprende que el VIP no puede continuar su patrulla en el mapa (porque fue impedido, está inconsciente o, muy probablemente, muerto), entonces el temporizador comienza. Cuando alcanza un cierto valor, el guardia más cercano comienza a verificar la última ubicación conocida del VIP, y si no la encuentra, otros guardaespaldas se unen a él y se dispersan para buscar una lista más amplia de ubicaciones cercanas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si encuentran un VIP y todo está en orden con él, el proceso continúa de la manera habitual. Si el VIP está muerto, se activa el modo de búsqueda activa, pero si el VIP se encuentra inconsciente, los guardaespaldas implementarán la última situación añadida al juego de 2016: Evacuar VIP.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ce/430/06e/6ce43006eacbfb5957ca7e947f6d2361.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La situación de evacuación se creó para que los guardaespaldas pudieran mover el VIP a un lugar seguro. Comienza cuando el VIP se entera del atentado contra su vida, en el caso de disparos, explosiones y otras señales de peligro que surgieron cerca. En una situación de evacuación, los guardias más cercanos rodean al VIP, después de lo cual este grupo se traslada a una habitación segura. Las habitaciones seguras son ubicaciones que los diseñadores de niveles han calificado como un buen lugar para esconderse VIP. Cuando un grupo está a punto de trasladarse a una habitación segura, el sistema calcula el espacio de su impacto en la cuadrícula de decisiones, prefiriendo los caminos con menos aglomeración para evitar crear embotellamientos en la multitud. Las rutas calculadas están dispuestas deliberadamente para que el grupo evite ser presionado en las esquinas, porque cuando varios guardaespaldas protegen a un VIP,No deben acumularse y colisionar entre sí. Si es imposible encontrar una habitación segura o construir un camino hacia ella, deciden que la mejor ruta de escape es mantener la posición hasta que se presente una nueva oportunidad de retiro.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sea como fuere, para comenzar la evacuación, los guardaespaldas deben alinearse. Para hacer esto, necesitan un edificio, que se maneja mediante un sistema de construcción separado, que asigna a cada personaje su propio espacio y crea la prioridad de su incorporación al grupo. Luego, otro sistema entra en juego, apoyando la velocidad de movimiento y preservando la construcción del grupo tanto como sea posible; El punto de partida es VIP. Sin embargo, si el jugador decide perseguirlos, los guardaespaldas pueden salirse de la línea para detenerse y aceptar la batalla.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Después de llegar a una habitación segura, todos los guardias asignados son asignados a la habitación y realizan un comportamiento defensivo para proteger al VIP. </font><font style="vertical-align: inherit;">Si después de esto aparece un jugador y pone en peligro esta sala, el sistema comienza el proceso de evacuación nuevamente, después de lo cual los NPC crean un edificio y calculan una nueva sala y el camino hacia ella.</font></font><br><br><h1>  Animaciones </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El último componente importante de la inteligencia artificial de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> son los sistemas de animación que el jugador ve en primer lugar. </font><font style="vertical-align: inherit;">Las animaciones en los juegos son muy importantes para demostrar las decisiones tomadas por los personajes; </font><font style="vertical-align: inherit;">son especialmente importantes en los juegos de sigilo, donde el jugador debe entender lo que está pensando, porque esto afecta su estrategia en general.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tradicionalmente, la animación se controla a través de un controlador: el sistema sabe que en ciertos contextos un personaje pasa de un estado de espera pasiva a caminar y correr. Para esto, los programadores y animadores generalmente necesitan construir tales sistemas de tal manera que cada personaje no solo conozca la animación que necesita reproducir, sino que también entienda cómo realizar transiciones suaves entre animaciones, así como hacer frente a muchas condiciones bajo las cuales necesita mezclar juntos Varias animaciones para lograr el efecto deseado. Si el sistema funciona mal, entonces los personajes se ven poco naturales y torpes, pero para su correcta implementación para cada personaje se requiere mucho trabajo. La tarea se vuelve aún más difícil cuando los personajes pueden estar en nuevas condiciones únicas y se agregan nuevas animaciones al sistema.Id Software resolvió este problema agregando a</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOOM 2016</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un controlador de animación basado en animación que minimiza la cantidad de animaciones creadas para cada personaje y le permite calcular la mejor manera de administrarlas en el contexto actual. Pero una </font><font style="vertical-align: inherit;">característica </font><font style="vertical-align: inherit;">única para </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fue que IO Interactive no podía permitirse el lujo de tener más de mil controladores de animación complejos al mismo tiempo. Por lo tanto, necesitaba algo menos costoso y, en el caso ideal, calculado de antemano para reducir la carga en la CPU.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd6/cb5/845/fd6cb5845a1b887a7891a88c7c987857.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo tanto, IO Interactive decidió investigar un sistema llamado Motion Graphs, en el que la tarea de los diseñadores era conectar todas las animaciones, y la tarea de AI era descubrir cómo mezclarlas todas. La idea subyacente es bastante simple: después de grabar todas estas animaciones, forzaremos al algoritmo a encontrar cuadros en los que dos animaciones estén lo suficientemente cerca una de la otra para que puedan usarse como transición. Esto se logra buscando un par de cuadros (uno de cada animación), cuya diferencia es mínima. Al mismo tiempo, se buscan no los cuadros más similares entre sí, sino los menos distintos teniendo en cuenta la duración y la velocidad. Después de que la métrica de discrepancia selecciona el par con el valor más bajo, lo agrega al gráfico de posibles transiciones. Cuando se completa el gráfico de movimiento,el personaje simplemente puede actuar en el juego y determinar la secuencia de animaciones necesarias para lograr el efecto deseado.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aquí es donde la IA entra en acción, porque a pesar del hecho de que el gráfico de movimiento elimina la parte del diseño del problema, todavía necesitamos un sistema para realizar las animaciones necesarias. </font><font style="vertical-align: inherit;">Por lo tanto, comenzando con Absolution, se integró un nuevo controlador de animación en la serie de juegos, utilizando aprendizaje automático reforzado. </font><font style="vertical-align: inherit;">Si el sistema conoce la animación actual, la dirección y velocidad actuales, entonces necesita cumplir las condiciones de la dirección y velocidad necesarias, y también averiguar en qué animación actual debe permanecer y con qué dirección y velocidad. </font><font style="vertical-align: inherit;">La primera versión del sistema utiliza una variación simple de la política codiciosa estándar, pero más tarde los desarrolladores estudiaron las posibilidades de Q-learning y aproximar una función expandiéndola a un sistema de funciones básicas (aproximación de funciones básicas), que puede aplicarse en nuevas versiones.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hitman 2 </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el proceso de pasar de Absolution a </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2016, se mejoraron los sistemas básicos de IA, se optimizó el sistema de multitudes y se agregaron sistemas de guardaespaldas y VIP. El mismo proceso continuó durante el desarrollo de la secuela de 2018 llamada </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman 2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al momento de escribir, los detalles aún se desconocen, pero se han realizado cambios significativos en el juego, y cada sistema ha sido revisado e integrado nuevamente. El cambio más notable fue la mayor optimización del sistema de multitudes, que ahora puede manejar más de 2000 NPC, y esto demuestra completamente el segundo nivel del juego con la pista de carreras en Miami.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/345/0dc/a55/3450dca55887ea925689352d5b55a41c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sistema de sensores también fue revisado: ahora puedes quitarte las miradas sospechosas del NPC, simplemente alejándote de ellos, ya no necesitas abandonar su campo de visión. Además, el jugador ahora puede esconderse mejor en la multitud, así como aprovechar la vegetación. A su vez, los NPC aprendieron a ver al jugador en los espejos, lo que hace que su comportamiento sea mucho más realista. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La tercera misión en Colombia eleva las apuestas particularmente altas: tiene hasta tres objetivos, cada uno de los cuales se mueve a lo largo de una ruta de patrulla bastante grande. El jugador necesita más flexibilidad, porque los sistemas de juego interrumpen estas rutas objetivo si resulta obvio que el jugador está tratando de usarlas.</font></font><br><br><h1>  En conclusión </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En última instancia, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitman</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una de las características más ricas y los juegos más complejos que he encontrado en la serie AI y Games. </font><font style="vertical-align: inherit;">Utiliza una gran cantidad de sistemas optimizados y cuidadosamente ajustados que administran una gran cantidad de NPC, al tiempo que proporciona una pequeña carga en la computadora. </font><font style="vertical-align: inherit;">Establece un nuevo estándar para el tamaño y la escala de los personajes de IA en tiempo real, y espero que este no sea el último juego de la franquicia IO Interactive.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Referencias </font></font></h1><br><ul><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Creando la IA para el mundo vivo, la respiración de la absolución de Hitman"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por Mika Vehkala, GDC Europe 2013.</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Multitudes en Hitman: Absolución"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por Kasper Fauerby, Game / AI Conference 2012</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Refuerzo del aprendizaje basado en la locomoción de personajes en Hitman: Absolución"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por Michael Büttner, Game / AI Conference 2012.</font></font></li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Guardaespaldas y VIP: una mirada al comportamiento ambiental, de alerta y de evacuación de la IA en Hitman"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por Jason Schroder y Thomas Egeskov Petersen. </font><font style="vertical-align: inherit;">nucl.AI Conference 2016.</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467301/">https://habr.com/ru/post/467301/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467283/index.html">Cómo explicarle a tu abuela la diferencia entre SQL y NoSQL</a></li>
<li><a href="../467289/index.html">Desarrollo de un sistema operativo monolítico similar a Unix: GDT e IDT (5)</a></li>
<li><a href="../467291/index.html">iOS para la creatividad: dibujar</a></li>
<li><a href="../467295/index.html">El enlace de vistas tan esperado en Android</a></li>
<li><a href="../467299/index.html">Conceptos: simplificar la implementación de las clases de utilidad STD</a></li>
<li><a href="../467303/index.html">La historia del programador más joven de PSB: el hackathon se convirtió en la puerta del banco</a></li>
<li><a href="../467305/index.html">Cuando la ciudad es inteligente: la experiencia de las megaciudades</a></li>
<li><a href="../467313/index.html">Replicación cruzada entre PostgreSQL y MySQL</a></li>
<li><a href="../467317/index.html">Cómo SoftBank se tragó el mundo</a></li>
<li><a href="../467323/index.html">Descripción general de las características de programación del microcontrolador Qt Creator 4.10 y QBS 1.14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>