<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‚ğŸ½ ğŸ‘¦ğŸ» ğŸ Rapide et furieux: Forza Horizon 4 accÃ©lÃ¨re avec les shaders de fenÃªtre ğŸ¥ âœ‹ğŸ½ ğŸ›¢ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gareth Harwood - Directeur artistique technique, Playground Games 

 L'action de Forza Horizon 4 se dÃ©roule dans la belle Grande-Bretagne, remplie de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rapide et furieux: Forza Horizon 4 accÃ©lÃ¨re avec les shaders de fenÃªtre</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433164/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/33d/7eb/d63/33d7ebd6329f3c8d50c3f25d84501c06.jpg" alt="image"></div><br>  <em><strong>Gareth Harwood - Directeur artistique technique, Playground Games</strong></em> <br><br>  L'action de <em>Forza Horizon 4</em> se dÃ©roule dans la belle Grande-Bretagne, remplie de lieux et d'attractions immÃ©diatement reconnaissables, y compris le modÃ¨le de la ville d'Ã‰dimbourg dans la version de Playground Games. <br><br>  Dans la plupart des jeux en monde ouvert, une attention particuliÃ¨re doit Ãªtre accordÃ©e Ã  la vitesse de diffusion des donnÃ©es, et <em>Forza Horizon 4</em> avec sa ville dÃ©taillÃ©e et colorÃ©e n'a pas fait exception.  Pour dessiner les bÃ¢timents d'Ã‰dimbourg, de nouvelles capacitÃ©s Ã©taient nÃ©cessaires pour assembler les ressources, le rendu, ainsi qu'un moteur fonctionnel qui permettait de charger des modÃ¨les lors de leur dÃ©placement Ã  une vitesse de 300 miles par heure. <br><a name="habracut"></a><br><h1>  Solution modulaire qui rÃ©duit la charge mÃ©moire </h1><br>  Les bÃ¢timents ont Ã©tÃ© crÃ©Ã©s selon les rÃ©fÃ©rences du monde rÃ©el.  Pour ce faire, il a fallu photographier et rÃ©aliser de nombreuses maisons, mais on peut crÃ©er et stocker physiquement un nombre limitÃ© de bÃ¢timents sur disque.  Pour faire face Ã  cette limitation, tout en conservant la variabilitÃ©, <strong>nous avons crÃ©Ã© un ensemble modulaire interchangeable d'objets qui sont ajoutÃ©s aux bÃ¢timents</strong> ;  il s'agit notamment d'objets tels que des cadres de fenÃªtres, des porches, des antennes et des alarmes antivol.  Nous avons Ã©galement fourni la possibilitÃ© de changer les couleurs et les nuances des parties de ces objets.  Un tel systÃ¨me Ã©tait idÃ©alement adaptÃ© pour crÃ©er une sÃ©rie de maisons avec terrasses, chacune ayant une porte de sa propre couleur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d2/bcb/fc0/9d2bcbfc023261b85c8a76d53c48f8b5.jpg"></div><br>  Ã€ Ã‰dimbourg, nous devions crÃ©er un grand nombre de bÃ¢timents dans une zone relativement petite.  Le tÃ©lÃ©chargement de ces bÃ¢timents pour une petite partie de notre monde ouvert a considÃ©rablement augmentÃ© la quantitÃ© de mÃ©moire requise.  Pour y faire face, nous avons construit des bÃ¢timents Ã  partir de modules provenant des bibliothÃ¨ques des premiers Ã©tages, des Ã©tages supÃ©rieurs et des toits, qui pouvaient Ãªtre connectÃ©s de diffÃ©rentes maniÃ¨res, obtenant ainsi une variabilitÃ© et une image intÃ©ressante avec de faibles besoins en mÃ©moire. <br><br>  De plus, cela nous a permis de dÃ©placer la complexitÃ© des modÃ¨les plus prÃ¨s des premiers Ã©tages;  les fenÃªtres Ã  cÃ´tÃ© desquelles passe le joueur ont plus de dÃ©tails que les toits qui ne sont visibles qu'Ã  distance.  Des bÃ¢timents uniques comme le Scottish Monument et la National Gallery combinÃ©s Ã  des bÃ¢timents modulaires <strong>rÃ©duisent la monotonie de l'image, tout en maximisant la rÃ©utilisation des ressources et la variabilitÃ©</strong> . <br><br><h1>  Mettre en Å“uvre des textures de parallaxe </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/710/9b0/506/7109b05063cf8eeff856b8b8e2fff196.jpg"></div><br>  Les mondes rÃ©alistes ont toujours Ã©tÃ© une caractÃ©ristique forte des jeux <em>Forza Horizon</em> , et une faÃ§on de les crÃ©er Ã©tait d'ajouter des intÃ©rieurs aux bÃ¢timents. <br><br>  Nous savions que dans <em>Forza Horizon 4,</em> Ã‰dimbourg serait si densÃ©ment construit et dÃ©taillÃ© que les intÃ©rieurs physiquement modÃ©lisÃ©s mettraient un stress inutile.  Par consÃ©quent, nous avons dÃ©cidÃ© d'utiliser une autre technique appelÃ©e Â«textures de parallaxeÂ».  <strong>Ils nous ont donnÃ© un Ã©norme avantage dans la crÃ©ation d'intÃ©rieurs.</strong>  <strong>Lors de leur cuisson dans une texture, ils ne sont pas limitÃ©s par le nombre de polygones et la complexitÃ© des matÃ©riaux</strong> .  Le rendu de telles textures est moins coÃ»teux que la crÃ©ation de gÃ©omÃ©trie, il peut donc y avoir plus d'intÃ©rieurs dans le jeu.  Auparavant, il Ã©tait nÃ©cessaire de couvrir les fenÃªtres avec des rideaux ou de les ombrer, mais maintenant nous avons des intÃ©rieurs complÃ¨tement parallaxe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/029/05f/5ef/02905f5ef40802b0ebaf3e722d186834.jpg"></div><br>  Les matÃ©riaux des intÃ©rieurs de parallaxe se composent de trois couches, chacune Ã©tant sÃ©lectionnÃ©e individuellement par des artistes pour chacune des fenÃªtres.  Ã‰tant donnÃ© que chaque couche a plusieurs variantes diffÃ©rentes, elles crÃ©ent des centaines d'apparences possibles pour chaque fenÃªtre, mÃªme si un petit nombre d'atlas de texture est utilisÃ©. <br><br>  La premiÃ¨re couche est simple, elle ne contient qu'un cadre de fenÃªtre et du verre.  Il ajoute des nuances telles que le vitrail et le verre au plomb, caractÃ©ristiques de l'ancienne architecture britannique.  Cette couche a diffus, alpha, rugositÃ©, mÃ©tal et passe normale.  Le passage normal contient une variation de chaque vitrail pour ajouter une variabilitÃ© rÃ©aliste des angles de rÃ©flexion du verre, ce qui est particuliÃ¨rement visible dans les vieux vitraux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/35d/0dd/fd8/35d0ddfd863eebaad7e5d2a279750a52.jpg"></div><br>  La deuxiÃ¨me couche est utilisÃ©e pour les rideaux ou les rideaux.  Ils ont diffus et alpha, ainsi qu'une texture de transmission de lumiÃ¨re qui est utilisÃ©e la nuit pour montrer l'Ã©paisseur des rideaux.  Nous avons des rideaux denses qui ne permettent pas la lumiÃ¨re, des rideaux translucides et mÃªme des rideaux avec des dÃ©corations que nous avons crÃ©Ã©es Ã  partir d'ouvertures qui transmettent partiellement la lumiÃ¨re. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/162/91c/fde/16291cfde7ef2bc0842a9e4d084f2c4a.jpg"></div><br>  Dans la derniÃ¨re couche, toute la magie du shader est crÃ©Ã©e - elle consiste en une texture plate qui imite un intÃ©rieur en trois dimensions.  Les intÃ©rieurs sont d'abord modÃ©lisÃ©s en 3D Ã  la mÃªme Ã©chelle, puis rendus dans un format de texture unique pris en charge par nos shaders intÃ©rieurs parallaxe.  Comme dans tous les autres calques, dans ce calque, nous crÃ©ons des atlas contenant jusqu'Ã  huit intÃ©rieurs diffÃ©rents du mÃªme style pour rÃ©duire le nombre d'appels de tirage. <br><br>  Nous avons plusieurs atlas de village qui sont rendus sur des maisons de village, des atlas pour des maisons de ville, ainsi que plusieurs atlas d'Ã©tablissements commerciaux qui chevauchent des magasins, des restaurants et des pubs britanniques classiques.  Nous avons Ã©galement deux profondeurs principales des intÃ©rieurs.  Un pour les chambres standard, l'autre pour les vitrines peu profondes.  Les artistes peuvent choisir la partie de l'atlas qu'ils souhaitent utiliser pour chaque fenÃªtre du bÃ¢timent, puis spÃ©cifier les matÃ©riaux en utilisant les propriÃ©tÃ©s du modÃ¨le polygonal de chaque fenÃªtre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f22/9d5/380/f229d53800397bbb5c05f54ba5078ef5.jpg"></div><br>  <strong>Le shader calcule l'angle sous lequel le joueur regarde dans la piÃ¨ce et modifie les coordonnÃ©es UV de sorte qu'il ne voit que la partie de l'intÃ©rieur qui serait visible sous cet angle.</strong>  Cette technique a plusieurs limites que nous avons traitÃ©es. <br><br>  PremiÃ¨rement, l'astuce du shader devient perceptible dans les coins trÃ¨s pointus.  Dans de tels cas limites, nous avons amÃ©liorÃ© l'effet Fresnel naturel du verre pour montrer une image plus rÃ©flÃ©chie que l'intÃ©rieur.  DeuxiÃ¨mement, Ã  mesure que les angles augmentent, les dÃ©tails au centre de la piÃ¨ce commencent Ã  se dÃ©former.  Nous avons rÃ©duit cet effet en dÃ©plaÃ§ant l'accent sur les murs et les coins, assombrissant le sol.  Comme dans la vraie vie, l'effet de parallaxe vous permet de combiner des lignes tombant dans un point focal.  Dans nos images, nous en avons profitÃ©, en utilisant autant que possible des lignes parallÃ¨les: dans les carreaux, les Ã©tagÃ¨res, le parquet et les motifs de papier peint. <br><br>  Chaque texture intÃ©rieure a Ã©galement une texture d'Ã©clairage pour la lumiÃ¨re du soir.  En raison des avantages de la cuisson de texture, nous pourrions utiliser n'importe quel nombre de sources de lumiÃ¨re, car en consÃ©quence, toutes s'avÃ¨rent Ãªtre enregistrÃ©es dans la texture.  Chaque bÃ¢timent a des variations de lumiÃ¨re allumÃ©e et Ã©teinte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/33d/7eb/d63/33d7ebd6329f3c8d50c3f25d84501c06.jpg"></div><br>  Les artistes Ã©taient libres de choisir n'importe quelle combinaison de types de fenÃªtres, rideaux et intÃ©rieurs, mais ils ont suivi des rÃ¨gles simples: les chambres sont gÃ©nÃ©ralement situÃ©es aux Ã©tages supÃ©rieurs, vous ne pouvez pas utiliser les mÃªmes piÃ¨ces dans chaque fenÃªtre et aux Ã©tages supÃ©rieurs, il ne peut y avoir aucun escalier menant.  Nous avons Ã©galement examinÃ© Ã  quel point chaque piÃ¨ce est convaincante.  Par exemple, nous ne pouvions pas avoir un petit chalet avec deux chambres, dans lequel dix fenÃªtres ou plus mÃ¨nent Ã  des piÃ¨ces diffÃ©rentes, alors les artistes ont crÃ©Ã© les fenÃªtres pour qu'elles ressemblent Ã  diffÃ©rentes parties de la mÃªme piÃ¨ce. <br><br>  Enfin, pour amÃ©liorer les performances lors de l'Ã©loignement du joueur du bÃ¢timent, nous devions rÃ©duire non seulement la complexitÃ© du maillage, mais Ã©galement la complexitÃ© des shaders et des matÃ©riaux.  Pour ce faire, nous avons dÃ©sactivÃ© l'effet de parallaxe et remplacÃ© la fenÃªtre par une image plate contenant dans une couche une fenÃªtre, des rideaux et un intÃ©rieur.  Le remplacement se produit lorsque la fenÃªtre occupe peu d'espace sur l'Ã©cran et est invisible pour le lecteur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e10/1e3/58b/e101e358be34bbcb93d21fcbc2fc96d5.jpg"></div><br>  Que vous voyagiez tranquillement autour d'Ã‰dimbourg dans votre roadster vintage, que vous examiniez chaque vitrine ou que vous vous prÃ©cipitiez Ã  une vitesse de 300 miles par heure dans une supercar pour un million de livres, <em>Forza Horizon 4</em> recrÃ©era un environnement magnifique, rÃ©aliste et intÃ©ressant.  Chaque technologie, mÃ©thode de rendu, shader et texture fonctionne en harmonie, crÃ©ant l'une des parties les plus complexes sur le plan technique de la carte <em>Forza Horizon 4</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8cc/3ca/a08/8cc3caa080fa7f58fa6507c8a3fc2457.jpg"></div><br><br>  <i>D'un traducteur: pour plus de clartÃ©, j'ai trouvÃ© une vidÃ©o qui montre les intÃ©rieurs du jeu.</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/J77tEV369G4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433164/">https://habr.com/ru/post/fr433164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433146/index.html">[compÃ©tition] Top 25 des consoles de jeux (secouez les temps anciens)</a></li>
<li><a href="../fr433152/index.html">Nous transfÃ©rons Zimbra d'une infrastructure Ã  serveur unique vers une infrastructure Ã  serveurs multiples</a></li>
<li><a href="../fr433154/index.html">ExpÃ©rience utilisateur 5G NR attendue dans le monde rÃ©el</a></li>
<li><a href="../fr433156/index.html">Dell devient public et se dirige vers le cloud hybride</a></li>
<li><a href="../fr433158/index.html">Parodies musicales de SUSE sur Kubernetes, Linus Torvalds et autres</a></li>
<li><a href="../fr433166/index.html">PrÃ©dire le temps de solution de ticket Ã  l'aide du Machine Learning</a></li>
<li><a href="../fr433168/index.html">Pourquoi un programmeur fait-il un stage en cuisine - une conversation avec Dodo Pizza sur le gemba, .NET et l'ouverture</a></li>
<li><a href="../fr433172/index.html">Nous attachons le multijoueur au jeu mobile "Make words from words" sur iOS et Android, Ã©crit en C ++</a></li>
<li><a href="../fr433174/index.html">Tous les correctifs ne sont pas Ã©galement utiles.</a></li>
<li><a href="../fr433178/index.html">Comment nous avons restaurÃ© un fichier .wav endommagÃ©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>