<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∞üèª ‚õ∫Ô∏è üçº Wie wir das Infrastrukturmanagement auf Terraform setzen - und anfangen zu leben üìú üòÅ üëÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir hatten 4 Amazon-Konten, 9 VPCs und 30 leistungsst√§rkste Entwicklungsumgebungen, Phasen und Regressionen - insgesamt mehr als 1000 EC2-Instanzen al...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir das Infrastrukturmanagement auf Terraform setzen - und anfangen zu leben</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dins/blog/470543/"><img src="https://habrastorage.org/webt/os/gu/yk/osguyk_s9ckyitafq3rayiqhxw0.png" alt="Bild"><br>  Wir hatten 4 Amazon-Konten, 9 VPCs und 30 leistungsst√§rkste Entwicklungsumgebungen, Phasen und Regressionen - insgesamt mehr als 1000 EC2-Instanzen aller Farben und Schattierungen.  Seit ich Cloud-L√∂sungen f√ºr Unternehmen sammle, muss ich mein Hobby bis zum Ende fortsetzen und dar√ºber nachdenken, wie ich all dies automatisieren kann. <br><br>  Hallo!  Mein Name ist Kirill Kazarin, ich arbeite als Ingenieur bei DINS.  Wir entwickeln Cloud-basierte Gesch√§ftskommunikationsl√∂sungen.  In unserer Arbeit nutzen wir aktiv Terraform, mit dem wir unsere Infrastruktur flexibel verwalten.  Ich werde meine Erfahrungen mit dieser L√∂sung teilen. <br><br>  Der Artikel ist lang, also tanken Sie <s>Popcorn-</s> Tee und los geht's! <br><br>  Und noch eine Nuance - der Artikel wurde auf der Basis von Version 0.11 geschrieben, in frischem 0.12 hat sich viel ge√§ndert, aber die wichtigsten Praktiken und Tipps sind immer noch relevant.  Das Problem der Migration von 0,11 auf 0,12 verdient einen separaten Artikel! <br><a name="habracut"></a><br><h3>  Was ist Terraform? </h3><br>  <b>Terraform</b> ist ein beliebtes Hashicorp-Tool, das 2014 ver√∂ffentlicht wurde. <br><br>  Mit diesem Dienstprogramm k√∂nnen Sie Ihre Cloud-Infrastruktur in der <i>Infrastruktur als Code-</i> Paradigma in einer sehr benutzerfreundlichen, leicht lesbaren deklarativen Sprache verwalten.  Die Anwendung bietet Ihnen eine einheitliche Art von Ressourcen und die Anwendung von Code-Praktiken f√ºr das Infrastrukturmanagement, die seit langem von der Entwicklergemeinde entwickelt wurden.  Terraform unterst√ºtzt alle modernen Cloud-Plattformen und erm√∂glicht es Ihnen, die Infrastruktur sicher und vorhersehbar zu √§ndern. <br><br>  Beim Start liest Terraform den Code und bringt Ihre Infrastruktur mithilfe der von den Cloud-Dienstanbietern bereitgestellten Plug-Ins in den beschriebenen Zustand, indem die erforderlichen API-Aufrufe ausgef√ºhrt werden. <br><br>  Unser Projekt befindet sich vollst√§ndig in Amazon und wird auf der Grundlage von AWS-Diensten bereitgestellt. Daher schreibe ich √ºber die Verwendung von Terraform in diesem Sinne.  Separat stelle ich fest, dass es nicht nur f√ºr Amazon verwendet werden kann.  Sie k√∂nnen damit alles verwalten, was √ºber eine API verf√ºgt. <br><br>  Dar√ºber hinaus verwalten wir VPC-Einstellungen, IAM-Richtlinien und Rollen.  Wir verwalten Routing-Tabellen, Zertifikate und Netzwerk-ACLs.  Wir verwalten die Einstellungen unserer Webanwendungs-Firewall, des S3-Buckets und der SQS-Warteschlangen - alles, was unser Service in Amazon verwenden kann.  Ich habe noch keine Funktionen bei Amazon gesehen, die Terraform in Bezug auf die Infrastruktur nicht beschreiben konnte. <br><br>  Es stellt sich heraus, dass die Infrastruktur ziemlich gro√ü ist und mit Ihren H√§nden leicht zu unterst√ºtzen ist.  Aber mit Terraform ist es bequem und einfach. <br><br><h3>  Woraus Terraform besteht </h3><br>  <b>Anbieter</b> sind Plugins f√ºr die Arbeit mit der API eines Dienstes.  Ich habe sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehr als 100 gez√§hlt</a> .  Darunter sind Anbieter f√ºr Amazon, Google, DigitalOcean, VMware Vsphere und Docker.  Ich habe sogar einen Anbieter auf dieser offiziellen Liste gefunden, mit dem Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Regeln f√ºr den Cisco ASA verwalten k√∂nnen</a> ! <br><br>  Unter anderem k√∂nnen Sie steuern: <br><br><ul><li>  Dashboards, Datenquelle und Warnungen in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grafana</a> . </li><li>  Projekte auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitLab</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RabbitMQ</a> . </li><li>  Datenbanken, Benutzer und Rechte in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MySQL</a> . </li></ul><br>  Und das sind nur offizielle Anbieter, es gibt noch mehr inoffizielle Anbieter.  W√§hrend der Experimente stie√ü ich auf GitHub auf einen Drittanbieter, der nicht im offiziellen Listenanbieter enthalten war und der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Arbeit mit DNS von GoDaddy</a> sowie mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Proxmox-Ressourcen erm√∂glichte</a> . <br><br>  Innerhalb eines Terraform-Projekts k√∂nnen Sie verschiedene Anbieter und entsprechend die Ressourcen verschiedener Dienstleister oder Technologien verwenden.  Beispielsweise k√∂nnen Sie Ihre Infrastruktur in AWS mit externem DNS von GoDaddy verwalten.  Und morgen hat Ihr Unternehmen ein Startup gekauft, das in DO oder Azure gehostet wird.  Und w√§hrend Sie sich entscheiden, dies auf AWS zu migrieren oder nicht, k√∂nnen Sie dies auch mit demselben Tool unterst√ºtzen! <br><br>  <b>Ressourcen.</b>  Dies sind Cloud-Entit√§ten, die Sie mit Terraform erstellen k√∂nnen.  Ihre Liste, Syntax und Eigenschaften h√§ngen vom verwendeten Anbieter ab - tats√§chlich von der verwendeten Cloud.  Oder nicht nur Wolken. <br><br>  <b>Module</b>  Mit diesen Entit√§ten k√∂nnen Sie mit Terraform Ihre Konfiguration vorlegen.  Mit Vorlagen k√∂nnen Sie Ihren Code also verkleinern und wiederverwenden.  Nun, sie helfen, bequem mit ihm zu arbeiten. <br><br><h3>  Warum wir uns f√ºr Terraform entschieden haben </h3><br>  F√ºr uns haben wir 5 Hauptgr√ºnde identifiziert.  Vielleicht scheinen aus Ihrer Sicht nicht alle von Bedeutung zu sein: <br><br><ul><li>  <b>Terraform ist ein <s>Cloud Agnostic-</s> Dienstprogramm zur Unterst√ºtzung mehrerer Clouds (danke f√ºr den wertvollen Kommentar in den Kommentaren)</b> .  Als wir uns f√ºr dieses Tool entschieden haben, dachten wir: - Und was passiert, wenn das Management morgen oder eine Woche zu uns kommt und sagt: ‚Äû <i>Leute, wir dachten - lasst uns nicht nur bei Amazon bereitstellen. Wir haben eine Art Projekt, Wo wir die Infrastruktur in Google Cloud oder in Azure ben√∂tigen - das wissen Sie nie</i> . "  Wir haben uns f√ºr ein Tool entschieden, das nicht fest an einen Cloud-Service gebunden ist. </li><li>  <b>Open Source</b> .  Terraform ist eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Open Source-L√∂sung</a> .  Das Projekt-Repository hat eine Bewertung von mehr als 16.000 Sternen. Dies ist eine gute Best√§tigung f√ºr den Ruf des Projekts. <br><br>  Wir sind mehr als ein- oder zweimal auf die Tatsache gesto√üen, dass es in einigen Versionen Fehler oder nicht ganz verst√§ndliches Verhalten gibt.  Mit einem offenen Repository k√∂nnen Sie sicherstellen, dass dies wirklich ein Fehler ist, und wir k√∂nnen das Problem l√∂sen, indem wir einfach die Engine oder die Version des Plugins aktualisieren.  Oder dass dies ein Fehler ist, aber "Leute, warte, buchst√§blich zwei Tage sp√§ter wird eine neue Version ver√∂ffentlicht und wir werden sie beheben."  Oder: "Ja, das ist etwas Unverst√§ndliches, Seltsames, sie kl√§ren es, aber es gibt Abhilfe."  Es ist sehr bequem. </li><li>  <b>Kontrolle</b> .  Terraform als Dienstprogramm liegt vollst√§ndig unter Ihrer Kontrolle.  Es kann auf einem Laptop installiert werden, auf einem Server, es kann einfach in Ihre Pipeline integriert werden, was auf der Basis eines beliebigen Tools erfolgen kann.  Zum Beispiel verwenden wir es in GitLab CI. </li><li>  <b>√úberpr√ºfen des Status der Infrastruktur</b> .  Terraform kann und √ºberpr√ºft den Zustand Ihrer Infrastruktur. <br><br>  Angenommen, Sie haben Terraform in Ihrem Team verwendet.  Sie erstellen eine Beschreibung einer Ressource in Amazon, z. B. Sicherheitsgruppe, und wenden sie an. Sie wird f√ºr Sie erstellt. Alles ist in Ordnung.  Und hier - bam!  Ihr Kollege, der gestern aus dem Urlaub zur√ºckgekehrt ist und noch nicht wei√ü, dass Sie hier alles so sch√∂n arrangiert haben, oder sogar ein Kollege aus einer anderen Abteilung kommt herein und √§ndert die Einstellungen f√ºr diese Sicherheitsgruppe von Hand. <br><br>  Und ohne sich mit ihm zu treffen, ohne zu sprechen oder sp√§ter ein bestimmtes Problem anzunehmen, werden Sie in einer normalen Situation nie davon erfahren.  Wenn Sie jedoch Terraform verwenden, zeigt Ihnen das Ausf√ºhren eines Plans im Leerlauf f√ºr diese Ressource, dass sich √Ñnderungen in der Arbeitsumgebung ergeben. <br><br>  Wenn Terraform Ihren Code betrachtet, ruft es gleichzeitig die API des Cloud-Anbieters auf, empf√§ngt den Status der Objekte von ihm und vergleicht: "Und jetzt gibt es dasselbe, was ich zuvor getan habe. Woran erinnere ich mich?"  Dann vergleicht er es mit dem Code und schaut sich an, was noch ge√§ndert werden muss.  Und wenn zum Beispiel in seiner Geschichte, in seinem Ged√§chtnis und in Ihrem Code alles gleich ist, es dort aber √Ñnderungen gibt, wird er es Ihnen zeigen und anbieten, es zur√ºckzusetzen.  Meiner Meinung nach auch eine sehr gute Immobilie.  Dies ist f√ºr uns pers√∂nlich ein weiterer Schritt, um sicherzustellen, dass wir √ºber eine unver√§nderliche Infrastruktur verf√ºgen. </li><li>  Ein weiteres sehr wichtiges Merkmal sind <b>die Module, die</b> ich erw√§hnt habe und die z√§hlen.  Ich werde etwas sp√§ter dar√ºber sprechen.  Wann werde ich mit den Werkzeugen vergleichen. </li></ul><br>  Und auch eine Kirsche auf dem Kuchen: Terraform hat eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ziemlich gro√üe Liste von eingebauten Funktionen</a> .  Diese Funktionen erm√∂glichen es uns, trotz der deklarativen Sprache einige zu implementieren, nicht programmatisch, sondern logisch. <br><br>  Zum Beispiel einige automatische Berechnungen, geteilte Linien, Umwandlung in Klein- und Gro√übuchstaben, Entfernen von Zeichen aus dieser Linie.  Wir nutzen es sehr aktiv.  Sie erleichtern das Leben erheblich, insbesondere wenn Sie ein Modul schreiben, das sp√§ter in verschiedenen Umgebungen wiederverwendet wird. <br><br><h3>  Terraform vs CloudFormation </h3><br>  Das Netzwerk vergleicht Terraform h√§ufig mit CloudFormation.  Diese Frage haben wir auch bei der Auswahl gestellt.  Und hier ist das Ergebnis unseres Vergleichs. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Vergleich </th><th>  Terraform </th><th>  Wolkenbildung </th></tr><tr><td>  Unterst√ºtzung f√ºr mehrere Clouds </td><td>  Durch die Verwendung verschiedener Anbieter k√∂nnen Plug-Ins mit jedem gro√üen Cloud-Anbieter zusammenarbeiten. <br></td><td>  Fest mit Amazon verbunden. </td></tr><tr><td>  Tracking √§ndern </td><td>  Wenn Sie eine √Ñnderung haben <br>  Nicht im TF-Code, sondern in der von ihm erstellten Ressource kann TF dies erkennen und es Ihnen erm√∂glichen, die Situation zu korrigieren <br></td><td>  Eine √§hnliche Funktion erschien <br>  nur im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">November 2018</a> . <br></td></tr><tr><td>  Bedingungen </td><td>  Keine Unterst√ºtzung f√ºr Bedingungen (nur <br>  in Form von tern√§ren Operatoren). </td><td>  Bedingungen werden unterst√ºtzt. </td></tr><tr><td>  Lagerung <br>  Staaten </td><td>  Erm√∂glicht die Auswahl mehrerer Backend-Typen, z. B. lokal <br>  auf Ihrem Computer (dies ist das Standardverhalten), auf einer Dateifreigabe, <br>  in S3 und anderswo. <br><br>  Dies ist manchmal n√ºtzlich, da tfstate Terraform als gro√üe Textdatei mit einer JSON-√§hnlichen Struktur dargestellt wird.  Und manchmal ist es manchmal n√ºtzlich, sich darauf einzulassen, es zu lesen - und zumindest in der Lage zu sein, es zu sichern, weil man nie wei√ü, was.  Pers√∂nlich bin ich zum Beispiel ruhiger, weil dies an einem von mir kontrollierten Ort ist. <br></td><td>  Status nur irgendwo in AWS speichern </td></tr><tr><td>  Ressourcenimport </td><td>  Terraform erleichtert den Import von Ressourcen.  Sie k√∂nnen alle Ressourcen unter Ihre Kontrolle bringen.  Sie schreiben einfach den Code, der dieses Objekt charakterisiert, oder verwenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraforming</a> . <br>  Sie geht zu demselben Amazon, nimmt von dort Informationen √ºber die Umgebung entgegen und gibt sie dann in Form von Code aus. <br>  Es ist maschinengeneriert, nicht optimiert, aber dies ist ein guter erster Schritt, um die Migration zu starten.  Und dann geben Sie einfach den Importbefehl.  Terraform vergleicht, bringt diese Umgebung in ihren Zustand - und kontrolliert sie jetzt. <br></td><td>  CloudFormation wei√ü nicht wie.  Wenn <br>  Sie haben schon einmal etwas mit Ihren H√§nden gemacht, entweder schlagen Sie es und erstellen es mit CloudFormation neu oder Sie leben weiter.  Leider keine Optionen. </td></tr></tbody></table></div><br><h3>  Erste Schritte mit Terraform </h3><br>  Im Allgemeinen ist der Einstieg ziemlich einfach.  Hier sind die ersten Schritte kurz: <br><br><ol><li>  Erstellen Sie zun√§chst ein Git-Repository und speichern Sie sofort alle Ihre √Ñnderungen, Experimente und alles. </li><li>  Lesen Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kurzanleitung</a> .  Es ist klein, einfach, ziemlich detailliert und beschreibt gut, wie Sie mit diesem Dienstprogramm beginnen k√∂nnen. </li><li>  Schreiben Sie eine Demo, einen Arbeitscode.  Sie k√∂nnen sogar ein Beispiel kopieren, um sp√§ter damit zu spielen. </li></ol><br><h3>  Unsere Praxis mit Terraform </h3><br><h4>  Quellcode </h4><br>  Sie haben Ihr erstes Projekt gestartet und alles in einer gro√üen main.tf-Datei gespeichert.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist ein typisches Beispiel</a> (ich habe ehrlich gesagt das erste genommen, das ich von GitHub bekommen habe). <br><br>  Nichts falsches, aber die Gr√∂√üe der Codebasis w√§chst mit der Zeit.  Die Abh√§ngigkeiten zwischen Ressourcen nehmen ebenfalls zu.  Nach einiger Zeit wird die Datei riesig, komplex, unlesbar, schlecht gewartet - und eine unachtsame √Ñnderung an einem Ort kann zu Problemen f√ºhren. <br><br>  Als erstes empfehle ich, das sogenannte Kern-Repository oder den Kernstatus Ihres Projekts, Ihre Umgebung, hervorzuheben.  Sobald Sie mit dem Erstellen oder Importieren einer Infrastruktur mit Terraform beginnen, werden Sie sofort feststellen, dass einige Entit√§ten nach der Bereitstellung und Konfiguration selten ge√§ndert werden.  Dies sind beispielsweise VPC-Einstellungen oder VPC selbst.  Dies sind Netzwerke, grundlegende allgemeine Sicherheitsgruppen wie SSH-Zugriff - Sie k√∂nnen eine ziemlich gro√üe Liste zusammenstellen. <br><br>  Es macht keinen Sinn, dies im selben Repository zu halten wie die Dienste, die Sie h√§ufig √§ndern.  W√§hlen Sie sie in einem separaten Repository aus und docken Sie sie √ºber eine Terraform-Funktion wie den Remote-Status an. <br><br><ul><li>  Sie reduzieren die Codebasis des Teils des Projekts, mit dem Sie h√§ufig direkt arbeiten. </li><li>  Anstelle einer gro√üen tfstate-Datei, die eine Beschreibung des Status Ihrer Infrastruktur enth√§lt, zwei kleinerer Dateien, und zu einem bestimmten Zeitpunkt arbeiten Sie mit einer davon. </li></ul><br>  Was ist der Trick?  Wenn Terraform einen Plan erstellt, dh berechnet, berechnet, was ge√§ndert werden soll, angewendet wird, wird dieser Status vollst√§ndig wiedergegeben, anhand des Codes √ºberpr√ºft und anhand des Status in AWS √ºberpr√ºft.  Je gr√∂√üer Ihr Bundesstaat ist, desto l√§nger dauert der Plan. <br><br>  Wir kamen zu dieser Praxis, als wir 20 Minuten brauchten, um einen Plan f√ºr die gesamte Umgebung in der Produktion zu erstellen.  Aufgrund der Tatsache, dass wir alles, was wir nicht h√§ufig √§ndern, in einen separaten Kern gezogen haben, haben wir die Zeit f√ºr die Erstellung eines Plans um die H√§lfte reduziert.  Wir haben eine Idee, wie es weiter reduziert werden kann, indem wir nicht nur in Kern- und Nicht-Kernsysteme, sondern auch nach Subsystemen zerlegen, weil wir sie miteinander verbunden haben und uns normalerweise gemeinsam √§ndern.  Wir sagen also, wir werden 10 Minuten in 3 Minuten verwandeln. Wir sind jedoch noch dabei, eine solche L√∂sung zu implementieren. <br><br><h4>  Weniger Code - einfacher zu lesen </h4><br>  Kleiner Code ist einfacher zu verstehen und bequemer zu bearbeiten.  Wenn Sie ein gro√ües Team haben und Leute mit unterschiedlichen Erfahrungsstufen haben - nehmen Sie das, was Sie selten √§ndern, aber global, in einer separaten R√ºbe heraus und bieten Sie einen engeren Zugang. <br><br>  Angenommen, Sie haben Junioren in Ihrem Team und geben ihnen keinen Zugriff auf das globale Repository, in dem die VPC-Einstellungen beschrieben werden. Auf diese Weise versichern Sie sich gegen Fehler.  Wenn ein Ingenieur beim Schreiben der Instanz einen Fehler macht und etwas falsch erstellt wird, ist dies nicht be√§ngstigend.  Und wenn er bei den Optionen, die auf allen Computern installiert sind, einen Fehler macht, die Einstellungen der Subnetze oder das Routing unterbricht oder etwas unternimmt, ist dies viel schmerzhafter. <br><br>  Die Auswahl des Kern-Repositorys erfolgt in mehreren Schritten. <br><br>  <b>Stufe 1</b> .  Erstellen Sie ein separates Repository.  Speichern Sie den gesamten Code separat darin - und beschreiben Sie die Entit√§ten, die mit dieser Ausgabe in einem Repository eines Drittanbieters wiederverwendet werden sollen.  Angenommen, wir erstellen eine AWS-Subnetzressource, in der wir beschreiben, wo sie sich befindet, welche Verf√ºgbarkeitszone und welcher Adressraum. <br><br><pre><code class="go hljs">resource <span class="hljs-string"><span class="hljs-string">"aws_subnet"</span></span> <span class="hljs-string"><span class="hljs-string">"lab_pub1a"</span></span> { vpc_id = <span class="hljs-string"><span class="hljs-string">"${aws_vpc.lab.id}"</span></span> cidr_block = <span class="hljs-string"><span class="hljs-string">"10.10.10.0/24"</span></span> Availability_zone = <span class="hljs-string"><span class="hljs-string">"us-east-1a"</span></span> ... } output <span class="hljs-string"><span class="hljs-string">"sn_lab_pub1a-id"</span></span> { value = <span class="hljs-string"><span class="hljs-string">"${aws_subnet.lab_pub1a.id}"</span></span> }</code> </pre> <br>  Und dann sagen wir, dass wir die ID dieses Objekts zur Ausgabe senden.  Sie k√∂nnen f√ºr jeden Parameter, den Sie ben√∂tigen, eine Ausgabe durchf√ºhren. <br><br>  Was ist der Trick hier?  Wenn Sie einen Wert beschreiben, speichert Terraform ihn separat im Statuskern.  Und wenn Sie sich an ihn wenden, muss er nicht synchronisieren, erz√§hlen - er kann Ihnen diese Angelegenheit sofort aus diesem Zustand heraus geben.  Ferner beschreiben Sie in dem Repository, das kein Kern ist, eine solche Verbindung mit dem entfernten Zustand: Sie haben einen entfernten Zustand wie diesen und solchen, er liegt im S3-Bucket so und so, so und so einem Schl√ºssel und einer Region. <br><br>  <b>Stufe 2</b> .  In einem Nicht-Kernprojekt erstellen wir eine Verkn√ºpfung zum Status des Kernprojekts, damit wir auf die durch die Ausgabe exportierten Parameter verweisen k√∂nnen. <br><br><pre> <code class="go hljs">data <span class="hljs-string"><span class="hljs-string">"terraform_remote_state"</span></span> <span class="hljs-string"><span class="hljs-string">"lab_core"</span></span> { backend = <span class="hljs-string"><span class="hljs-string">"s3"</span></span> config { bucket = <span class="hljs-string"><span class="hljs-string">"lab-core-terraform-state"</span></span> key = <span class="hljs-string"><span class="hljs-string">"terraform.tfstate"</span></span> region = <span class="hljs-string"><span class="hljs-string">"us-east-1"</span></span> } }</code> </pre><br>  <b>Stufe 3</b> .  Erste Schritte!  Wenn ich eine neue Netzwerkschnittstelle f√ºr eine Instanz in einem bestimmten Subnetz bereitstellen muss, sage ich: Hier ist der Datenfernstatus, suchen Sie den Namen dieses Status darin, suchen Sie diesen Parameter darin, der tats√§chlich mit diesem Namen √ºbereinstimmt. <br><br><pre> <code class="go hljs">resource <span class="hljs-string"><span class="hljs-string">"aws_network_interface"</span></span> <span class="hljs-string"><span class="hljs-string">"fwl01"</span></span> { ... subnet_id = <span class="hljs-string"><span class="hljs-string">"${data.terraform_remote_state.lab_core.sn_lab_pub1a-id}"</span></span> }</code> </pre><br>  Und wenn ich einen Plan f√ºr √Ñnderungen in meinem Nicht-Core-Repository erstelle, wird dieser Wert f√ºr Terraform zu einer Konstante daf√ºr.  Wenn Sie es √§ndern m√∂chten, m√ºssen Sie es im Repository dieses nat√ºrlich Kerns tun.  Da sich dies jedoch selten √§ndert, st√∂rt es Sie nicht viel. <br><br><h4>  Module </h4><br>  Ich m√∂chte Sie daran erinnern, dass ein Modul eine eigenst√§ndige Konfiguration ist, die aus einer oder mehreren verwandten Ressourcen besteht.  Es wird als Gruppe verwaltet: <br><br>  Ein Modul ist √§u√üerst praktisch, da Sie selten einfach so eine Ressource erstellen. In einem Vakuum ist es normalerweise logisch mit etwas verbunden. <br><br><pre> <code class="go hljs">module <span class="hljs-string"><span class="hljs-string">"AAA"</span></span> { source = <span class="hljs-string"><span class="hljs-string">"..."</span></span> count = <span class="hljs-string"><span class="hljs-string">"3"</span></span> count_offset = <span class="hljs-string"><span class="hljs-string">"0"</span></span> host_name_prefix = <span class="hljs-string"><span class="hljs-string">"XXX-YYY-AAA"</span></span> ami_id = <span class="hljs-string"><span class="hljs-string">"${data.terraform_remote_state.lab_core.ami-base-ami_XXXX-id}"</span></span> subnet_ids = [<span class="hljs-string"><span class="hljs-string">"${data.terraform_remote_state.lab_core.sn_lab_pub1a-id}"</span></span>, <span class="hljs-string"><span class="hljs-string">"${data.terraform_remote_state.lab_core.sn_lab_pub1b-id}"</span></span>] instance_type = <span class="hljs-string"><span class="hljs-string">"t2.large"</span></span> sgs_ids = [ <span class="hljs-string"><span class="hljs-string">"${data.terraform_remote_state.lab_core.sg_ssh_lab-id}"</span></span>, <span class="hljs-string"><span class="hljs-string">"${aws_security_group.XXX_lab.id}"</span></span> ] boot_device = {volume_size = <span class="hljs-string"><span class="hljs-string">"50"</span></span> volume_type = <span class="hljs-string"><span class="hljs-string">"gp2"</span></span>} root_device = {device_name = <span class="hljs-string"><span class="hljs-string">"/dev/sdb"</span></span> volume_size = <span class="hljs-string"><span class="hljs-string">"50"</span></span> volume_type = <span class="hljs-string"><span class="hljs-string">"gp2"</span></span> encrypted = <span class="hljs-string"><span class="hljs-string">"true"</span></span>} tags = <span class="hljs-string"><span class="hljs-string">"${var.gas_tags}"</span></span> }</code> </pre><br>  Beispiel: Wenn wir eine neue EC2-Instanz bereitstellen, erstellen wir eine Netzwerkschnittstelle und einen Anhang daf√ºr, erstellen h√§ufig eine elastische IP-Adresse daf√ºr, erstellen einen Route-53-Datensatz und etwas anderes.  Das hei√üt, wir erhalten mindestens 4 Entit√§ten. <br><br>  Jedes Mal ist es unpraktisch, sie in vier Codeteilen zu beschreiben.  Au√üerdem sind sie ziemlich typisch.  Es bittet darum, eine Vorlage zu erstellen und dann einfach auf diese Vorlage zu verweisen und Parameter zu √ºbergeben: einen Namen, in welches Raster verschoben werden soll, welche Sicherheitsgruppe daran h√§ngen soll.  Es ist sehr bequem. <br><br>  Terraform verf√ºgt √ºber eine Z√§hlfunktion, mit der Sie Ihren Status weiter reduzieren k√∂nnen.  Sie k√∂nnen ein gro√ües B√ºndel von Instanzen mit einem Code beschreiben.  Angenommen, ich muss 20 Computer des gleichen Typs bereitstellen.  Ich werde nicht einmal aus einer Vorlage 20 Code schreiben, ich werde 1 Code schreiben, ich werde Count und die Nummer darin angeben - wie viel ich tun muss. <br><br>  Beispielsweise gibt es einige Module, die auf eine Vorlage verweisen.  Ich √ºbergebe nur bestimmte Parameter: ID-Subnetz;  AMI zum Bereitstellen mit;  Art der Instanz;  Sicherheitsgruppeneinstellungen;  alles andere und geben Sie an, wie viele dieser Dinge mir anzutun sind.  Gro√üartig, nahm sie und drehte sie um! <br><br>  Morgen kommen Entwickler zu mir und sagen: "H√∂ren Sie, wir wollen mit der Last experimentieren, bitte geben Sie uns zwei weitere davon."  Was ich tun muss: Ich √§ndere eine Ziffer auf 5. Die Codemenge bleibt genau gleich. <br><br>  Herk√∂mmlicherweise k√∂nnen Module in zwei Typen unterteilt werden - Ressource und Infrastruktur.  Aus Sicht des Codes gibt es keinen Unterschied, sondern die √ºbergeordneten Konzepte, die der Bediener selbst einf√ºhrt. <br>  Ressourcenmodule bieten eine standardisierte und parametrisierte, logisch zusammenh√§ngende Sammlung von Ressourcen.  Das obige Beispiel ist ein typisches Ressourcenmodul.  Wie man mit ihnen arbeitet: <br><br><ul><li>  Wir geben den Pfad zum Modul - die Quelle seiner Konfiguration - √ºber die Source-Direktive an. </li><li>  Wir geben die Version an - ja, und der Betrieb nach dem Prinzip ‚ÄûNeueste und Gr√∂√üte‚Äú ist hier nicht die beste Option.  Sie nehmen nicht jedes Mal die neueste Version der Bibliothek in Ihr Projekt auf?  Aber dazu sp√§ter mehr. </li><li>  Wir geben ihm Argumente. </li></ul><br>  Wir sind an die Version des Moduls gebunden und nehmen nur die letzte - die Infrastruktur muss versioniert werden (Ressourcen k√∂nnen nicht versioniert werden, Code jedoch).  Eine Ressource kann gel√∂scht oder neu erstellt werden.  Das ist alles!  Wir m√ºssen auch klar wissen, welche Version wir f√ºr jede Infrastruktur erstellt haben. <br><br>  Infrastrukturmodule sind recht einfach.  Sie bestehen aus Ressourcen und enthalten Unternehmensstandards (z. B. Tags, Listen mit Standardwerten, akzeptierte Standardeinstellungen usw.). <br><br>  In Bezug auf unser Projekt und unsere Erfahrung haben wir lange und fest auf die Verwendung von Ressourcenmodulen f√ºr alles umgestellt, was mit einem sehr strengen Versions- und √úberpr√ºfungsprozess m√∂glich ist.  Und jetzt f√ºhren wir aktiv die Praxis von Infrastrukturmodulen auf der Ebene von Labor und Staging ein. <br><br>  Empfehlungen zur Verwendung von Modulen <br><br><ol><li>  Wenn Sie nicht schreiben k√∂nnen, sondern vorgefertigte verwenden, schreiben Sie nicht.  Vor allem, wenn Sie neu in diesem Bereich sind.  Vertrauen Sie den vorgefertigten Modulen oder sehen Sie zumindest, wie sie es Ihnen angetan haben.  Wenn Sie jedoch immer noch Ihre eigenen schreiben m√ºssen, verwenden Sie den Anruf bei Anbietern nicht intern und gehen Sie vorsichtig mit Dienstanbietern um. </li><li>  Stellen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sicher,</a> dass die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraform-Registrierung</a> kein vorgefertigtes Ressourcenmodul enth√§lt. </li><li>  Wenn Sie Ihr Modul schreiben, verstecken Sie die Details unter der Haube.  Der Endbenutzer muss sich keine Gedanken dar√ºber machen, was und wie Sie intern implementieren. </li><li>  F√ºhren Sie Eingabeparameter und Ausgabewerte von Ihrem Modul aus.  Und es ist besser, wenn es sich um separate Dateien handelt.  So bequem. </li><li>  Wenn Sie Ihre Module schreiben, speichern Sie sie im Repository und in der Version.  Besser ein separates Repository f√ºr das Modul. </li><li>  Verwenden Sie keine lokalen Module - sie werden nicht versioniert oder wiederverwendet. </li><li>  Vermeiden Sie die Verwendung von Anbieterbeschreibungen im Modul, da Verbindungsanmeldeinformationen f√ºr verschiedene Personen unterschiedlich konfiguriert und angewendet werden k√∂nnen.  Jemand verwendet hierf√ºr Umgebungsvariablen, und jemand impliziert, dass seine Schl√ºssel und Geheimnisse in Dateien mit vorgeschriebenen Pfaden gespeichert werden.  Dies muss auf einer h√∂heren Ebene angezeigt werden. </li><li>  Verwenden Sie den lokalen Provisioner vorsichtig.  Es wird lokal auf dem Computer ausgef√ºhrt, auf dem Terraform ausgef√ºhrt wird. Die Ausf√ºhrungsumgebung f√ºr verschiedene Benutzer kann jedoch unterschiedlich sein.  Bis Sie es in CI einbetten, k√∂nnen Sie auf verschiedene Artefakte sto√üen: zum Beispiel auf local exec und ansible.  Und jemand hat eine andere Distribution, eine andere Shell, eine andere Version von Ansible oder sogar Windows. </li></ol><br>  Anzeichen eines guten Moduls (hier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">etwas ausf√ºhrlicher</a> ): <br><br><ul><li>  Gute Module haben Dokumentation und Beispiele.  Wenn jedes als separates Repository konzipiert ist, ist dies einfacher. </li><li>  Sie haben keine fest codierten Einstellungen (z. B. AWS-Region). </li><li>  Verwenden Sie angemessene Standardeinstellungen, die als Standardeinstellungen ausgelegt sind.  Beispielsweise erstellt das Modul f√ºr die EC2-Instanz standardm√§√üig keine virtuelle Maschine vom Typ m5d.24xlarge f√ºr Sie, sondern verwendet hierf√ºr einen der minimalen t2- oder t3-Typen. </li><li>  Der Code ist ‚Äûsauber‚Äú - strukturiert, mit Kommentaren versehen, nicht unn√∂tig verwirrt und im gleichen Stil gestaltet. </li><li>  Es ist sehr w√ºnschenswert, dass es mit Tests ausgestattet wird, obwohl es schwierig ist.  Leider sind wir noch nicht dazu gekommen. </li></ul><br><h4>  Markieren </h4><br>  Tags sind wichtig. <br><br>  Tagging ist Abrechnung.  AWS verf√ºgt √ºber Tools, mit denen Sie sehen k√∂nnen, wie viel Geld Sie f√ºr Ihre Infrastruktur ausgeben.  Und unser Management wollte wirklich ein Werkzeug, mit dem sie es deterministisch sehen k√∂nnen.  Zum Beispiel, wie viel Geld solche und solche Komponenten verbrauchen oder wie und so ein Subsystem, so und so ein Team, so und so eine Umgebung <br><br><img src="https://habrastorage.org/webt/3q/mn/9e/3qmn9ej1ao0cmn8irggvgl8ztj4.png" alt="Bild"><br><br>  Tagging ist die Dokumentation Ihres Systems.  Damit vereinfachen Sie Ihre Suche.  Selbst in der AWS-Konsole, in der diese Tags √ºbersichtlich auf Ihrem Bildschirm angezeigt werden, k√∂nnen Sie leichter verstehen, worauf sich diese oder jene Art von Instanz bezieht.  Wenn neue Kollegen kommen, k√∂nnen Sie dies leichter erkl√§ren, indem Sie zeigen: "Schauen Sie, das ist es - hier."  Wir haben angefangen, Tags wie folgt zu erstellen - wir haben ein Array von Tags f√ºr jeden Ressourcentyp erstellt. <br><br>  Ein Beispiel: <br><br><pre> <code class="go hljs">variable <span class="hljs-string"><span class="hljs-string">"XXX_tags"</span></span> { description = <span class="hljs-string"><span class="hljs-string">"The set of XXX tags."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> = <span class="hljs-string"><span class="hljs-string">"map"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> = { <span class="hljs-string"><span class="hljs-string">"TerminationDate"</span></span> = <span class="hljs-string"><span class="hljs-string">"03.23.2018"</span></span>, <span class="hljs-string"><span class="hljs-string">"Environment"</span></span> = <span class="hljs-string"><span class="hljs-string">"env_name_here"</span></span>, <span class="hljs-string"><span class="hljs-string">"Department"</span></span> = <span class="hljs-string"><span class="hljs-string">"dev"</span></span>, <span class="hljs-string"><span class="hljs-string">"Subsystem"</span></span> = <span class="hljs-string"><span class="hljs-string">"subsystem_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Component"</span></span> = <span class="hljs-string"><span class="hljs-string">"XXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"Type"</span></span> = <span class="hljs-string"><span class="hljs-string">"application"</span></span>, <span class="hljs-string"><span class="hljs-string">"Team"</span></span> = <span class="hljs-string"><span class="hljs-string">"team_name"</span></span> } }</code> </pre><br>  Es ist vorgekommen, dass in unserem Unternehmen mehr als eines unserer Teams AWS verwendet und es eine Liste der erforderlichen Tags gibt. <br><br><ol><li>  Team - Welches Team verwendet wie viele Ressourcen? </li><li>  Abteilung - √§hnlich einer Abteilung. </li><li>  Umgebung - Ressourcen schlagen in "Umgebungen", aber Sie k√∂nnen sie beispielsweise durch ein Projekt oder √§hnliches ersetzen. </li><li>  Subsystem - das Subsystem, zu dem die Komponente geh√∂rt.  Komponenten k√∂nnen zu einem Subsystem geh√∂ren.  Zum Beispiel wollen wir sehen, wie viel dieses Subsystem und seine Entit√§ten zu verbrauchen beginnen.  So ist es beispielsweise im Vormonat pl√∂tzlich deutlich gewachsen.  Wir m√ºssen zu den Entwicklern gehen und sagen: ‚ÄûLeute, es ist teuer.  Das Budget ist schon nahe beieinander, lasst uns die Logik irgendwie optimieren. ‚Äú </li><li>  Typ - Typ der Komponente: Balancer, Speicher, Anwendung oder Datenbank. </li><li>  Komponente - die Komponente selbst, ihr Name in interner Notation. </li><li>  K√ºndigungsdatum - Uhrzeit, zu der es gel√∂scht werden soll, im Datumsformat.  Wenn das Entfernen nicht erwartet wird, stellen Sie "Permanent" ein.  Wir haben es eingef√ºhrt, weil wir in Entwicklungsumgebungen und sogar in einigen Phasenumgebungen eine Stresstestphase haben, die w√§hrend Stresssitzungen ansteigt, dh wir halten diese Maschinen nicht regelm√§√üig.  Wir geben das Datum an, an dem die Ressource zerst√∂rt werden soll.  Dar√ºber hinaus k√∂nnen Sie die Automatisierung basierend auf Lambda, einigen externen Skripten, die √ºber die AWS-Befehlszeilenschnittstelle arbeiten, beschleunigen, wodurch diese Ressourcen automatisch zerst√∂rt werden. </li></ol><br>  Nun - wie man taggt. <br><br>  Wir haben beschlossen, f√ºr jede Komponente eine eigene Tag-Map zu erstellen, in der wir alle angegebenen Tags auflisten: Wann soll sie beendet werden, worauf bezieht sie sich?  Sie erkannten schnell, dass es unpraktisch war.  Weil die Codebasis w√§chst, weil wir mehr als 30 Komponenten haben und 30 solcher Codeteile unpraktisch sind.  Wenn Sie etwas √§ndern m√ºssen, laufen Sie und √§ndern. <br><br>  Um gut zu markieren, verwenden wir die Entit√§t <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Locals</a> . <br><br><pre> <code class="go hljs">locals { common_tags = {<span class="hljs-string"><span class="hljs-string">"TerminationDate"</span></span> = <span class="hljs-string"><span class="hljs-string">"XX.XX.XXXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"Environment"</span></span> = <span class="hljs-string"><span class="hljs-string">"env_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Department"</span></span> = <span class="hljs-string"><span class="hljs-string">"dev"</span></span>, <span class="hljs-string"><span class="hljs-string">"Team"</span></span> = <span class="hljs-string"><span class="hljs-string">"team_name"</span></span>} subsystem_1_tags = <span class="hljs-string"><span class="hljs-string">"${merge(local.common_tags, map("</span></span>Subsystem<span class="hljs-string"><span class="hljs-string">", "</span></span>subsystem_1_name<span class="hljs-string"><span class="hljs-string">"))}"</span></span> subsystem_2_tags = <span class="hljs-string"><span class="hljs-string">"${merge(local.common_tags, map("</span></span>Subsystem<span class="hljs-string"><span class="hljs-string">", "</span></span>subsystem_2_name<span class="hljs-string"><span class="hljs-string">"))}"</span></span> }</code> </pre><br>  Darin k√∂nnen Sie eine Teilmenge auflisten und sie dann miteinander verwenden. <br><br>  Zum Beispiel haben wir einige g√§ngige Tags in eine solche Struktur entfernt und dann bestimmte von Subsystemen.  Wir sagen: "Nehmen Sie diesen Block und f√ºgen Sie beispielsweise Subsystem 1 hinzu. F√ºgen Sie f√ºr Subsystem 2 Subsystem 2 hinzu."  Wir sagen: "Tags, bitte nehmen Sie die allgemeinen und f√ºgen Sie Typ, Anwendung, Name, Komponente und wer es ist zu ihnen hinzu."  Es stellt sich sehr kurz, klar und zentral heraus, wenn es pl√∂tzlich erforderlich ist. <br><br><pre> <code class="go hljs">module <span class="hljs-string"><span class="hljs-string">"ZZZ02"</span></span> { count = <span class="hljs-number"><span class="hljs-number">1</span></span> count_offset = <span class="hljs-number"><span class="hljs-number">1</span></span> name = <span class="hljs-string"><span class="hljs-string">"XXX-YYY-ZZZ"</span></span> ... tags = <span class="hljs-string"><span class="hljs-string">"${merge(local.core_tags, map("</span></span>Type<span class="hljs-string"><span class="hljs-string">", "</span></span>application<span class="hljs-string"><span class="hljs-string">", "</span></span>Component<span class="hljs-string"><span class="hljs-string">", "</span></span>XXX<span class="hljs-string"><span class="hljs-string">"))}"</span></span> }</code> </pre><br><img src="https://habrastorage.org/webt/ka/sq/4o/kasq4ocxxl3hht59z9p6o5bzjfs.png" alt="Bild"><br><br><h4>  Versionskontrolle </h4><br>  Ihre Vorlagenmodule m√ºssen, wenn Sie sie verwenden, irgendwo gespeichert werden.  Der einfachste Weg, den wahrscheinlich jeder startet, ist der lokale Speicher.  Nur im selben Verzeichnis, nur in einem Unterverzeichnis, in dem Sie beispielsweise eine Vorlage f√ºr einen Dienst beschreiben.  Dies ist kein guter Weg.  Es ist praktisch, kann schnell repariert und getestet werden, aber es ist schwierig, es sp√§ter wiederzuverwenden und schwer zu kontrollieren <br><br><pre> <code class="go hljs">module <span class="hljs-string"><span class="hljs-string">"ZZZ02"</span></span> { source = <span class="hljs-string"><span class="hljs-string">"./modules/srvroles/ZZZ"</span></span> name = <span class="hljs-string"><span class="hljs-string">"XXX-YYY-ZZZ"</span></span> }</code> </pre><br>  Angenommen, Entwickler kamen zu Ihnen und sagten: "Wir brauchen also eine solche Entit√§t in einer solchen Konfiguration in unserer Infrastruktur."  Sie haben es geschrieben und in Form eines lokalen Moduls im Repository ihres Projekts erstellt.  Bereitgestellt - ausgezeichnet.  Sie testeten und sagten: ‚ÄûEs wird!  In der Produktion. "  Wir kommen auf die B√ºhne, Stresstests, Produktion.  Jedes Mal, wenn Strg-C, Strg-V;  Strg-C, Strg-V.  W√§hrend wir zum Verkauf kamen, nahm unser Kollege ihn, kopierte den Code aus der Laborumgebung, √ºbertrug ihn an einen anderen Ort und √§nderte ihn dort.  Und wir bekommen einen bereits inkonsistenten Zustand.  Bei horizontaler Skalierung ist es nur ein Problem, wenn Sie so viele Laborumgebungen haben wie wir. <br><br>  Daher ist es eine gute M√∂glichkeit, f√ºr jedes Ihrer Module ein separates Git-Repository zu erstellen und dann einfach darauf zu verweisen.  Wir √§ndern alles an einem Ort - gut, bequem, kontrolliert. <br><br><pre> <code class="go hljs">module <span class="hljs-string"><span class="hljs-string">"ZZZ"</span></span> { source = <span class="hljs-string"><span class="hljs-string">"git::ssh://git@GIT_SERVER_FQDN/terraform/modules/general-vm/2-disks.git"</span></span> host_name_prefix = <span class="hljs-string"><span class="hljs-string">"XXX-YYY-ZZZ"</span></span></code> </pre><br>  Vorwegnahme der Frage, wie Ihr Code die Produktion erreicht.  Hierzu wird ein separates Projekt erstellt, das vorbereitete und getestete Module wiederverwendet. <br><br>  Gro√üartig, wir haben eine Codequelle, die sich zentral √§ndert.  Ich habe genommen, geschrieben, vorbereitet und mich darauf eingestellt, dass ich morgen fr√ºh in der Produktion eingesetzt werde.  Einen Plan erstellt, getestet - gro√üartig, lass uns gehen.  In diesem Moment hat mein Kollege, ausschlie√ülich von guten Absichten geleitet, etwas optimiert und zu diesem Modul hinzugef√ºgt.  Und so kam es, dass diese √Ñnderungen die Abw√§rtskompatibilit√§t beeintr√§chtigten. <br><br>  Zum Beispiel hat er die notwendigen Parameter hinzugef√ºgt, die er √ºbergeben muss, sonst wird das Modul nicht zusammengesetzt.  Oder er hat die Namen dieser Parameter ge√§ndert.  Ich komme am Morgen herein, ich habe streng begrenzte Zeit f√ºr √Ñnderungen, beginne mit der Erstellung eines Plans und Terraform ruft Statusmodule von Git auf, beginnt mit der Erstellung eines Plans und sagt: "Ups, ich kann nicht.  Nicht genug f√ºr dich, du hast umbenannt. "  Ich bin √ºberrascht: "Aber ich habe es nicht getan, wie soll ich damit umgehen?"  Und wenn dies eine Ressource ist, die vor langer Zeit erstellt wurde, m√ºssen Sie nach solchen √Ñnderungen alle Umgebungen durchlaufen, sich irgendwie √§ndern und zu einem einzigen Blick f√ºhren.  Dies ist unpraktisch. <br><br>  Dies kann mithilfe von Git-Tags behoben werden.  Wir haben uns f√ºr die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SemVer-Notation entschieden</a> und eine einfache Regel ausgearbeitet: Sobald die Konfiguration unseres Moduls einen bestimmten stabilen Zustand erreicht, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dh</a> wir k√∂nnen ihn verwenden, setzen wir ein Tag auf dieses Commit.  Wenn wir √Ñnderungen vornehmen und diese die Abw√§rtskompatibilit√§t nicht beeintr√§chtigen, √§ndern wir die Nebennummer am Tag. Wenn sie nicht funktionieren, √§ndern wir die Hauptzahl. <br><br>  F√ºgen Sie in der Quelladresse ein bestimmtes Tag hinzu, und wenn Sie zumindest etwas angeben, das Sie zuvor hatten, wird es immer gesammelt.  Lassen Sie die Modulversion fortfahren, aber zum richtigen Zeitpunkt werden wir kommen, und wenn wir sie wirklich brauchen, werden wir sie √§ndern.  Und was vorher funktionierte, wird zumindest nicht kaputt gehen.  Das ist bequem.  So sieht es in unserem GitLab aus. <br><br><img src="https://habrastorage.org/webt/qb/vc/yh/qbvcyhrhgdblv8ewvwlr1gkxsmc.png" alt="Bild"><br><br><h4>  Verzweigung </h4><br>  Die Verwendung der Verzweigung ist eine weitere wichtige Praxis.  Wir haben f√ºr uns selbst die Regel entwickelt, dass Sie √Ñnderungen nur vom Master aus vornehmen sollten.  Aber f√ºr jede √Ñnderung, die Sie vornehmen und testen m√∂chten, erstellen Sie bitte einen separaten Zweig, spielen Sie damit, experimentieren Sie, machen Sie Pl√§ne und sehen Sie, wie es l√§uft.  F√ºhren Sie dann eine Zusammenf√ºhrungsanforderung durch und lassen Sie einen Kollegen den Code und die Hilfe anzeigen. <br><br><img src="https://habrastorage.org/webt/ty/vf/je/tyvfjel4g_uhzcrf7ifnkdxd230.png" alt="Bild"><br><br><h4>  Wo tfstate speichern </h4><br>  Sie sollten Ihren Status nicht lokal speichern.  Sie sollten Ihren Status nicht in Git speichern. <br><br>  Wir haben uns daran verbrannt, als jemand beim Ausrollen der Zweige eines Nicht-Masters seinen Status erh√§lt, in dem der Zustand gespeichert ist - dann schaltet er ihn durch Zusammenf√ºhren ein, jemand f√ºgt seinen eigenen hinzu, es stellt sich heraus, dass Konflikte zusammengef√ºhrt werden.  Oder es stellt sich ohne sie heraus, aber ein inkonsistenter Zustand, denn "er hat es bereits, ich habe es noch nicht", und dann ist es eine unangenehme Praxis, alles zu reparieren.  Aus diesem Grund haben wir beschlossen, es an einem sicheren Ort zu lagern, versioniert, aber au√üerhalb von Git. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">S3</a> passt perfekt dazu: Es ist verf√ºgbar, es hat HA, soweit ich mich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">genau</a> an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vier Neunen</a> erinnere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, vielleicht f√ºnf</a> .  Selbst wenn Sie Ihren Status brechen, k√∂nnen Sie jederzeit einen Rollback durchf√ºhren.  Und er gibt auch eine sehr wichtige Sache in Kombination mit DynamoDB, das meiner Meinung nach diese Terraform seit Version 0.8 gelernt hat.  In DynamoDB haben Sie ein Typenschild, in dem Terraform aufzeichnet, dass es den Status blockiert. <br><br>  Angenommen, ich m√∂chte einige √Ñnderungen vornehmen.  Ich fange an, einen Plan zu erstellen oder ihn anzuwenden. Terraform geht zu DynamoDB und sagt, dass in diesem Schild angegeben wird, dass dieser Status blockiert ist.  Benutzer, Computer, Zeit.  In diesem Moment entschied mein Kollege, der remote oder vielleicht an ein paar Tischen von mir arbeitet, sich aber auf die Arbeit konzentriert und nicht sieht, was ich tue, auch, dass etwas ge√§ndert werden muss.  Er macht einen Plan, startet ihn aber etwas sp√§ter. <br><br>  Terraform geht in die Dynamik, sieht - Lock, bricht ab, sagt dem Benutzer: "Sorry, tfstate ist durch etwas blockiert."  Ein Kollege sieht, dass ich jetzt arbeite, er kann auf mich zukommen und sagen: "H√∂ren Sie, mein Wechsler ist wichtiger, geben Sie mir bitte nach."  Ich sage: ‚ÄûGut‚Äú, ich storniere den Plan, entferne den Block, auch wenn er bei korrekter Ausf√ºhrung automatisch entfernt wird, ohne Strg-C zu unterbrechen.  Ein Kollege geht und tut.  So versichern wir uns gegen eine Situation, in der Sie beide etwas √§ndern. <br><br><h4>  Zusammenf√ºhrungsanforderung </h4><br>  Wir verwenden die Verzweigung in Git.  Wir weisen unsere Zusammenf√ºhrungsanfragen Kollegen zu.  Dar√ºber hinaus verwenden wir in Gitlab fast alle Tools, die uns zur Verf√ºgung stehen, um zusammenzuarbeiten, f√ºr Zusammenf√ºhrungsanforderungen oder auch nur f√ºr einige Pools: Ihren Code zu diskutieren, ihn zu √ºberpr√ºfen, laufende oder problematische Einstellungen vorzunehmen, so etwas.  Es ist sehr n√ºtzlich, es hilft bei der Arbeit. <br><br>  In diesem Fall ist das Rollback au√üerdem einfacher. Sie k√∂nnen zum vorherigen Commit zur√ºckkehren. Wenn Sie beispielsweise entschieden haben, die √Ñnderungen nicht nur vom Assistenten zu √ºbernehmen, k√∂nnen Sie einfach zu einem stabilen Zweig wechseln.  Sie haben beispielsweise einen Feature-Zweig erstellt und beschlossen, zuerst √Ñnderungen am Feature-Zweig vorzunehmen.  Und dann nehmen die √Ñnderungen, nachdem alles gut funktioniert hat, den Meister vor.  Sie haben die √Ñnderungen in Ihrer Filiale √ºbernommen, festgestellt, dass etwas nicht stimmt, sind zum Master gewechselt - keine √Ñnderungen, sagte √úbernehmen - er ist zur√ºckgekehrt. <br><br><h4>  Pipelines </h4><br><img src="https://habrastorage.org/webt/qx/g1/ex/qxg1exw6vesornrgdhc7ynmjg80.png" alt="Bild"><br><br>  Wir haben beschlossen, dass wir den CI-Prozess verwenden m√ºssen, um unsere √Ñnderungen anzuwenden.  Zu diesem Zweck schreiben wir basierend auf Gitlab CI eine Pipeline, die die Anwendung von √Ñnderungen automatisiert.  Bisher haben wir zwei Arten von ihnen: <br><br><ul><li>  Pipeline f√ºr den Hauptzweig (Master-Pipeline) </li><li>  Pipeline f√ºr alle anderen Filialen (Filialpipeline) </li></ul><br>  Was macht die Brunch-Pipeline?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es startet die automatische Code√ºberpr√ºfung (zum Beispiel dumm nach Tippfehlern suchen). Und dann beginnt es mit der Erstellung eines Plans. Und der Kollege, der Ihre Zusammenf√ºhrungsanforderung √ºberwacht, kann den erstellten Plan sofort √∂ffnen und nicht nur den Code anzeigen, sondern auch das, was Sie hinzuf√ºgen. Er wird auch sehen, wie es auf Ihre Infrastruktur fallen wird. Es ist klar und n√ºtzlich.</font></font><br><br><img src="https://habrastorage.org/webt/vt/0_/hq/vt0_hqcdpurvppbglcxwgwtqiyi.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Assistenten wird hier ein weiterer Schritt hinzugef√ºgt. </font><font style="vertical-align: inherit;">Der Unterschied besteht darin, dass Ihr Plan nicht nur generiert, sondern auch als Artefakt gespeichert wird. </font><font style="vertical-align: inherit;">Eine weitere sehr n√ºtzliche Funktion von Terraform ist, dass der Plan als Datei gespeichert und dann angewendet werden kann. </font><font style="vertical-align: inherit;">Angenommen, Sie haben eine Zusammenf√ºhrungsanforderung gestellt und diese beiseite gelegt. </font><font style="vertical-align: inherit;">Einen Monat sp√§ter erinnerten sie sich an ihn und beschlossen zur√ºckzukehren. </font><font style="vertical-align: inherit;">Ihr Code ist bereits weit fortgeschritten. </font><font style="vertical-align: inherit;">Aufgrund der Tatsache, dass Sie das Artefakt des Plans behalten, k√∂nnen Sie es auf das anwenden, was Sie gerade wollten. </font></font><br><br><img src="https://habrastorage.org/webt/67/9z/ub/679zubdsyvuldaiwzcpimtbvjmu.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In unserem Fall wird dieses Artefakt dann in den n√§chsten Schritt √ºbertragen, der von Hand ausgef√ºhrt wird. </font><font style="vertical-align: inherit;">Das hei√üt, wir erhalten einen einzigen Anwendungspunkt f√ºr unsere √Ñnderungen.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nachteile von Terraform </font></font></h3><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Trotz der Tatsache, dass Terraform eine ziemlich gro√üe Anzahl integrierter Funktionen hat, sind nicht alle so gut, wie wir gerne denken w√ºrden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es hat unangenehme Funktionen, zum Beispiel das ‚ÄûElement‚Äú - in einigen Situationen, in denen es an Erfahrung mangelt, entspricht sein Verhalten m√∂glicherweise nicht genau Ihren Erwartungen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie beispielsweise ein Modul verwenden, wird die Anzahl an das Modul √ºbergeben - wie viele Instanzen bereitgestellt werden sollen, und beispielsweise wird eine Liste der nach Verf√ºgbarkeitszonen aufgeschl√ºsselten Subnetze √ºbertragen. √úbertragen, angewendet, die Anzahl erh√∂ht, noch angewendet. Und jetzt haben Sie beschlossen, die erweiterte Liste der Subnetze darauf zu √ºbertragen. Du hast ein Gitter, du hast dich entschieden, noch ein AZ zu verwenden. Der zweite Teil der Liste √§ndert sich, und die Anzahl wird dieser Liste √ºber ein Element zugeordnet.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angenommen, Sie hatten zuvor 4 AZ und 5 Instanzen, und dann haben Sie eine weitere AZ hinzugef√ºgt - die ersten 4, die bereits in Ordnung waren, bleiben √ºbrig. Und ungef√§hr am f√ºnften wird er sagen: "Und jetzt werde ich es neu erstellen." Und du wolltest nicht! Sie wollten, dass nur neue kommen. Solche Fehler sind auf die Art der Arbeit von Terraform mit Listen zur√ºckzuf√ºhren. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tern√§rer Operator.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eine Bedingung ist nur ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tern√§rer Operator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Uns fehlen wirklich Bedingungen. Trotzdem h√§tte ich gerne ein vertrauteres If und Else. Schade, dass sie nicht da sind - sie k√∂nnten mitfahren. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Herausforderungen der Teamarbeit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn Sie ein gro√ües Team oder ein gro√ües Projekt f√ºr eine gro√üe Anzahl von Umgebungen oder beides haben, wird es f√ºr Sie schwierig, Terraform ohne Verwendung eines CI zu verwenden.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ohne CI nehmen Sie von Ihrem Computer aus √Ñnderungen an Ihrer lokalen Umgebung vor. Nach unserer Erfahrung f√ºhrt dies dazu, dass Sie einen Zweig f√ºr sich selbst erstellt, ihn gestartet, damit experimentiert haben - und vergessen haben, eine Zusammenf√ºhrung vorzunehmen, und vergessen haben, die √Ñnderungen voranzutreiben. Das tut weh. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum Beispiel hatten Sie und Ihr Kollege dieselbe Version auf Maschinen. Dann hat ein Kollege auf meiner Website die Version aktualisiert. Wenn Sie am n√§chsten Tag √Ñnderungen vornehmen, √ºberpr√ºft Terraform, ob in tfstate die erforderliche Version von Terraform h√∂her ist, und sagt: "Nein, ich kann mich nicht aktualisieren." Wenn Sie ein kleines Fenster zum Vornehmen von √Ñnderungen haben, ist es nicht leicht zu erkennen, dass Sie zuerst das Dienstprogramm aktualisieren m√ºssen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie √ºber CI verf√ºgen, befindet sich beispielsweise eine einzelne Entit√§t in Ihrem Pipeline-Container. Sie versichern sich, dass solche Versionen nicht im Dienstprogramm enthalten sind. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und schlie√ülich kann sich im Assistenten ein fehlerhafter oder nicht verwendeter Code ansammeln. Sie werden jedes Mal von Ihrem Platz aus faul sein, bis ein Plan f√ºr die gesamte Umgebung erstellt wird. Sie werden versuchen, √ºber die Zieloption die Anwendung nur auf dem aufzubauen, was Sie ge√§ndert haben. Sie haben beispielsweise eine Instanz hinzugef√ºgt und gesagt: "Terraform-Zielinstanz anwenden" oder Sicherheitsgruppe. Wenn in diesem Fall jedoch eine St√∂rung auftritt (z. B. ist eine Konfiguration veraltet), wird dies beim Erstellen des vollst√§ndigen Plans angezeigt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie m√ºssen viel M√ºhe und Zeit aufwenden, um dies auf den neuesten Stand zu bringen. </font><font style="vertical-align: inherit;">Keine Notwendigkeit, dies zur Sprache zu bringen. </font><font style="vertical-align: inherit;">Wenn es ein CI gibt - darin sagen wir einfach mit Nachdruck, dass Terraform den Plan vollst√§ndig erstellen wird, Sie dr√ºcken die √Ñnderungen. </font><font style="vertical-align: inherit;">Und lass ihn seinen Plan aufbauen, du gehst und machst etwas anderes. </font><font style="vertical-align: inherit;">Er hat es gebaut, du hast es gesehen, du hast es in Form eines Artefakts und du bist gegangen, um es anzuwenden. </font><font style="vertical-align: inherit;">Es diszipliniert.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Terraform ist keine Silberkugel </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Was er dir nicht erlauben wird: </font></font><br><br><ul><li> Terraform       ,      .  , ,  .    ,        ,   ,   .       ,    ,  ,         . <br><br>  ,      ‚Äî       Tfstate,       ,        .         .   ¬´   ,    ¬ª ‚Äî  . <br><br>                 , -,  ,  - ‚Äî   .      ,          .     ,               ‚Äî    . </li><li> Terraform    ,      .  Terraform    .  Warum?           ,    .     . ,   ,    AZ    - -. ,   North Virginia,     6  .          .    ,   ,  : ¬´,   ¬ª.       ‚Äî .   ‚Äî      ,  , Terraform     . </li><li> Terraform        . ,    ‚Äî 200 ,    198 ,    5.    .       ,         API .  Leider. </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au√üerdem kann er nicht ber√ºcksichtigen, dass einige Namen eindeutig sein m√ºssen. </font><font style="vertical-align: inherit;">Sie m√∂chten beispielsweise einen S3-Bucket erstellen. </font><font style="vertical-align: inherit;">Dies ist ein globaler Dienst f√ºr die Region, und selbst wenn Sie keinen Dienst mit diesem Namen in Ihrem Konto erstellt haben, ist es keine Tatsache, dass jemand anderes ihn nicht erstellt hat. </font><font style="vertical-align: inherit;">Und wenn Sie es mit Terraform erstellen, wird es perfekt einen Plan erstellen, mit der Erstellung beginnen und Amazon wird sagen: "Entschuldigung, jemand hat dies bereits." </font><font style="vertical-align: inherit;">Dies kann nicht im Voraus vorausgesehen werden. </font><font style="vertical-align: inherit;">Nur wenn Sie versuchen, dies im Voraus mit Ihren H√§nden zu tun, obwohl dies der Praxis widerspricht.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf jeden Fall ist Terraform das Beste, was es jetzt gibt. </font><font style="vertical-align: inherit;">Und wir benutzen es weiterhin, es hilft uns sehr.</font></font><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470543/">https://habr.com/ru/post/de470543/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470529/index.html">Wie wir ein Legacy-Projekt in GraphQL √ºbersetzt haben</a></li>
<li><a href="../de470531/index.html">Der Neurophysiologe diskutiert das Neuralink-Projekt und spricht √ºber die Arbeit des Gehirns ‚Äûan den Fingern‚Äú.</a></li>
<li><a href="../de470535/index.html">M√∂glichkeiten zum Erstellen von Balkendiagrammen mit Python</a></li>
<li><a href="../de470537/index.html">Neues Validierungspaket f√ºr React on Mobx @ quantumart / mobx-form-validation-kit</a></li>
<li><a href="../de470541/index.html">Grundlagen der Arbeit mit Neo4j in einem Browser</a></li>
<li><a href="../de470547/index.html">Sellerie-Aufgaben: Neuer Dekorateur, neue Funktionen</a></li>
<li><a href="../de470549/index.html">TSMC hofft, Moores Gesetz f√ºr die kommenden Jahrzehnte befolgen zu k√∂nnen</a></li>
<li><a href="../de470553/index.html">Euler-Poisson-Integral. Details zu Berechnungsmethoden</a></li>
<li><a href="../de470555/index.html">Joker 2019 R√ºckblick: Planetenparade oder was uns erwartet</a></li>
<li><a href="../de470557/index.html">Lichtsteuerung: Eine neue Art von optischen Elementen, die auf Metamaterialien basieren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>