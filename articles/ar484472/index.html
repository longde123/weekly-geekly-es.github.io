<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โด๏ธ ๐ ๐ง ุงุณุชุฎุฏุงู ุบูุฑ ูุชุฒุงูู ูุฅูุดุงุก ุจุฑุงูุฌ ุชุดุบูู ุงูุฃุฌูุฒุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุนูู MicroPython v.1.12 ๐ฌ ๐ ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃุซูุงุก ุฏุฑุงุณุฉ ุฅููุงููุงุช MicroPython ูุฃุบุฑุงุถูุง ุ ุตุงุฏูุช ุฃุญุฏ ุชุทุจููุงุช ููุชุจุฉ asyncio ุ ูุจุนุฏ ูุฑุงุณูุงุช ูุตูุฑุฉ ูุน Piter Hinch ุ ูุคูู ุงูููุชุจุฉ ุ ุฃุฏุฑูุช ุฃููู ุจุญุงุฌุฉ ุฅูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุณุชุฎุฏุงู ุบูุฑ ูุชุฒุงูู ูุฅูุดุงุก ุจุฑุงูุฌ ุชุดุบูู ุงูุฃุฌูุฒุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุนูู MicroPython v.1.12</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484472/" style=";text-align:right;direction:rtl"> <i>ุฃุซูุงุก ุฏุฑุงุณุฉ ุฅููุงููุงุช <b>MicroPython</b> ูุฃุบุฑุงุถูุง ุ ุตุงุฏูุช ุฃุญุฏ <b>ุชุทุจููุงุช</b> ููุชุจุฉ <b>asyncio</b> ุ ูุจุนุฏ ูุฑุงุณูุงุช ูุตูุฑุฉ ูุน <b>Piter Hinch</b> ุ ูุคูู ุงูููุชุจุฉ ุ ุฃุฏุฑูุช ุฃููู ุจุญุงุฌุฉ ุฅูู ููู ุงููุจุงุฏุฆ ูุงูููุงููู ุงูุฃุณุงุณูุฉ ูุงูุฃุฎุทุงุก ุงููููุฐุฌูุฉ ุจุดูู ุฃูุจุฑ ูุงุณุชุฎุฏุงู ุทุฑู ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ.</i>  <i>ุนูุงูุฉ ุนูู ุฐูู ุ ูุณู ุงููุจุชุฏุฆูู ูุฎุตุต ูู ููุท.</i> <br><br>  ูุฐุง ุงูุฏููู ูุฎุตุต ูููุณุชุฎุฏููู ุฐูู ูุณุชููุงุช ูุฎุชููุฉ ูู ุงูุฎุจุฑุฉ ูู <i><b>ุงููุฒุงููุฉ</b></i> ุ ุจูุง ูู ุฐูู ูุณู ุฎุงุต ูููุจุชุฏุฆูู. <br><a name="habracut"></a><br>  <b>ูุญุชูู</b> <br>  <b>0. ููุฏูุฉ</b> <br>  0.1. <i><b>___</b></i> ุชุซุจูุช <i><b>uasyncio</b></i> ุนูู ุฌูุงุฒ ูุงุฑุบ (ุงูุฃุฌูุฒุฉ) <br>  <b>1. ุงูุชุฎุทูุท ูุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุดุชุฑู</b> <br>  1.1 <br>  <b>2. ููุชุจุฉ <i>uasyncio</i></b> <br>  2.1. ___ ูููู ุงูุจุฑูุงูุฌ: ุฏูุฑุฉ ูุนุงูุฌุฉ ุงูุฃุญุฏุงุซ <br>  2.2 <br>  2.2.1. ____ ูุงุฆูุฉ ุงูุชุธุงุฑ <i>coroutines ูููุดุงุฑูุฉ ูู ุงูุชุฎุทูุท</i> <br>  2.2.2. ___ <i>ุจุฏุก <i>ุฑุฏ ุงุชุตุงู</i> ูุธููุฉ ( <i>ุฑุฏ ุงุชุตุงู</i> )</i> <br>  2.2.3. ___ <i>ุงูููุงุญุธุงุช: coroutines</i> ูุทุฑู <i>ุฐุงุช ุตูุฉ.</i>  <i>ููู ุงูุฅุฑุฌุงุน.</i> <br>  2.3. ุงูุชุฃุฎูุฑ <br>  <b>3. ุงูุชุฒุงูู ููุฆุงุชู</b> <br>  3.1 <br>  3.1.1 <br>  3.2 <br>  3.2.1 <br>  3.3. ___ ุญุงุฌุฒ <i><b>ุงูุฌุฏุงุฑ</b></i> <br>  3.4 .___ <i><b>ุฅุดุงุฑุฉ</b></i> <br>  3.4.1 <br>  3.5. ___ ูุงุฆูุฉ <i><b>ุงูุชุธุงุฑ</b></i> <br>  3.6 .___ ูุฆุงุช ุงููุฒุงููุฉ ุงูุฃุฎุฑู <br>  <b>4. ุชุทููุฑ ุงูุตู <i>ููุชุฒุงูู</i></b> <br>  4.1. ___ ุงููุตูู ุงูุชู ุชุณุชุฎุฏู ูู <i>ุงูุชุธุงุฑ</i> <br>  4.1.1 <br>  4.1.2 <br>  4.2. ___ ุงูุชูุฑุงุฑุงุช ุบูุฑ ุงููุชุฒุงููุฉ <br>  4.3. ___ ูุฏุฑุงุก ุงูุณูุงู ุบูุฑ ุงููุชุฒุงูู <br>  <b>5. ุงุณุชุซูุงุกุงุช ูู ุงููููุงุช ูุจุณุจุจ ุฅูุบุงุก ุงููููุฉ</b> <br>  5.1. ___ ุงุณุชุซูุงุกุงุช <br>  5.2. ___ ุงุณุชุซูุงุกุงุช ุจุณุจุจ ุงูููู ูุจุณุจุจ ุฅูุบุงุก ุงูููุงู <br>  5.2.1 <br>  5.2.2 .______ <i>Coroutines ูุน ูููุงุช</i> <br>  <b>6. ุงูุชูุงุนู ูุน ุงูุฃุฌูุฒุฉ</b> <br>  6.1. ___ ูุดุงูู ุงููุฒุงููุฉ <br>  6.2. ___ ุฃุฌูุฒุฉ ุงูุงูุชุฑุงุน ูุน coroutines <br>  6.3. __ ุจุงุณุชุฎุฏุงู ูุญุฑู ุงูุฏูู <br>  6.3.1 <br>  6.4 .___ ุชุทููุฑ ุจุฑูุงูุฌ ุงูุชุดุบูู ูุฌูุงุฒ ุงูุฏูู <br>  6.5. <i>___</i> ูุซุงู ูุงูู: ุจุฑูุงูุฌ ุชุดุบูู <i>aremote.py</i> ูุฌูุงุฒ ุงูุงุณุชูุจุงู ููุชุญูู ุนู ุจุนุฏ <i>ุจุงูุฃุดุนุฉ</i> ุชุญุช ุงูุญูุฑุงุก. <br>  6.6 .___ ุณุงุฆู ุฌูุงุฒ ุงุณุชุดุนุงุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ HTU21D. <br>  <b>7. ูุตุงุฆุญ ูุงูุฎุฏุน</b> <br>  7.1. ___ ุงูุจุฑูุงูุฌ ูุชุฌูุฏ <br>  7.2. <b><i>__ uasyncio</i></b> ูุญูุธ ุงูุญุงูุฉ <br>  7.3. ___ ุฌูุน ุงูููุงูุฉ <br>  7.4 <br>  7.5. ___ ุฎุทุฃ ุดุงุฆุน.  ูููู ุฃู ูููู ูู ุงูุตุนุจ ุงูุนุซูุฑ ุนูููุง. <br>  7.6. ___ ุงูุจุฑูุฌุฉ ุจุงุณุชุฎุฏุงู ูุขุฎุฐ ( <i>ูุขุฎุฐ</i> ) <br>  7.6.1 <br>  7.7. __ โโูุณูุทุงุช ููุดุฆ ุญููุฉ ุงูุญุฏุซ <br>  <b>8. ููุงุญุธุงุช ูููุจุชุฏุฆูู</b> <br>  8.1. ___ ุงููุดููุฉ 1: ุญููุงุช ุงูุญุฏุซ <br>  8.2. ___ ุงููุดููุฉ 2: ุทุฑู ุงูููู <br>  8.3. <b><i>__</i></b> ููุฌ <b><i>uasyncio</i></b> <br>  8.4 .___ ุงูุชุฎุทูุท ูู <b><i>uasyncio</i></b> <br>  8.5 .___ ููุงุฐุง ุงูุฌุฏููุฉ ุงูุชุนุงูููุฉ ุ ูููุณ ุงููุงุฆูุฉ ุนูู <i>ุณูุณูุฉ ุงูุฑุณุงุฆู</i> ( <i>_thread</i> )ุ <br>  8.6. ___ ุงูุชูุงุนู <br>  8.7. _ <i>ุงูุงูุชุฑุงุน</i> <br><br>  <b>0. ููุฏูุฉ</b> <br><br>  ููุชุฑุถ ูุนุธู ูุฐุง ุงููุณุชูุฏ ุจุนุถ ุงูุฅููุงู ุจุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ.  ูููุจุชุฏุฆูู ุ ูููู ุงูุนุซูุฑ ุนูู ููุฏูุฉ ูู ุงููุณู 7. <br><br>  ุชุชุถูู ููุชุจุฉ <i><b>uasyncio</b></i> ูู <b>MicroPython</b> ูุฌููุนุฉ ูุฑุนูุฉ ูู ููุชุจุฉ <b><i>Asyncio</i></b> <b>Python</b> ููู ูุฎุตุตุฉ ููุงุณุชุฎุฏุงู ุนูู ุงููุชุญููุงุช ุงูุฏูููุฉ.  ุนูู ูุฐุง ุงููุญู ุ ูุฅูู ูุฃุฎุฐ ูููุฉ ุตุบูุฑุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููุชู ุชููููู ููุชุจุฏูู ุจุณุฑุนุฉ ุงูุณูุงูุงุช ูุน ุชุฎุตูุต ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุตูุฑ. <br><br>  ูุตู ูุฐุง ุงููุณุชูุฏ ุงุณุชุฎุฏุงู <i><b>uasyncio</b></i> ูุน ุงูุชุฑููุฒ ุนูู ุฅูุดุงุก ุจุฑุงูุฌ ุชุดุบูู ููุฃุฌูุฒุฉ. <br><br>  ุงููุฏู ูู ุฐูู ูู ุชุตููู ุจุฑุงูุฌ ุงูุชุดุบูู ุจุญูุซ ูุณุชูุฑ ุงูุชุทุจูู ูู ุงูุนูู ุจูููุง ููุชุธุฑ ุจุฑูุงูุฌ ุงูุชุดุบูู ุงุณุชุฌุงุจุฉ ูู ุงูุฌูุงุฒ.  ูู ุงูููุช ููุณู ุ ูุธู ุงูุชุทุจูู ุญุณุงุณูุง ููุฃุญุฏุงุซ ุงูุฃุฎุฑู ูุชูุงุนู ุงููุณุชุฎุฏู. <br><br>  ูุฌุงู ูุงู ุขุฎุฑ ูุชุทุจูู <b><i>ุงูุชุฒุงูู</i></b> ูู ุจุฑูุฌุฉ ุงูุดุจูุงุช: ุนูู ุงูุฅูุชุฑูุช ุ ููููู ุงูุนุซูุฑ ุนูู ูุนูููุงุช ูุงููุฉ ุญูู ูุฐุง ุงูููุถูุน. <br><br>  ูุงุญุธ ุฃู <b>MicroPython</b> ูุนุชูุฏ ุนูู <b>Python 3.4</b> ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฅุถุงูุงุช <b>Python 3.5</b> .  ุจุงุณุชุซูุงุก ูุง ูู ููุตู ุฃุฏูุงู ุ ูุง ูุชู ุฏุนู ูุธุงุฆู ุงูุฅุตุฏุงุฑุงุช <b><i>ุงููุชุฒุงููุฉ</i></b> ุงูุฃูุฏู ูู 3.4.  ูุญุฏุฏ ูุฐุง ุงููุณุชูุฏ ุงูููุฒุงุช ุงููุฏุนููุฉ ูู ูุฐู ุงููุฌููุนุฉ ุงููุฑุนูุฉ. <br><br>  ุงูุบุฑุถ ูู ูุฐุง ุงูุฏููู ูู ุชูุฏูู ุฃุณููุจ ุจุฑูุฌุฉ ูุชูุงูู ูุน <b>CPython V3.5</b> ูุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ. <br><br>  <b>0.1 ุชุซุจูุช <b><i>uasyncio</i></b> ุนูู ุฌูุงุฒ ูุงุฑุบ (ุงูุฃุฌูุฒุฉ)</b> <br><br>  ููุตู ุจุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ <b>MicroPython V1.11</b> ุฃู ุงูุฃุญุฏุซ.  ูู ุงูุนุฏูุฏ ูู ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุ ุงูุชุซุจูุช ุบูุฑ ูุทููุจ ุ ูุธุฑูุง ูุฃู <b><i>uasyncio ูุชุฑุฌู</i></b> ุจุงููุนู ูู ุงูุชุฌููุน.  ููุชุญูู ุ ููุท ุงูุชุจ ูู REPL <br><br><pre style=";text-align:right;direction:rtl"><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio</code> </pre> <br>  ุชุบุทู ุงูุฅุฑุดุงุฏุงุช ุงูุชุงููุฉ ุญุงูุงุช ุนุฏู ุชุซุจูุช ุงููุญุฏุงุช ูุณุจููุง.  <b><i>ููุงุฆู ุงูุงูุชุธุงุฑ</i></b> ููุญุฏุงุช <b><i>ุงูุชุฒุงูู</i></b> ุงุฎุชูุงุฑูุฉ ุ ูููููุง ูุทููุจุฉ ูุชุดุบูู ุงูุฃูุซูุฉ ุงููุงุฑุฏุฉ ููุง. <br><br>  <b>ุฌูุงุฒ ูุชุตู ุจุงูุฅูุชุฑูุช</b> <br><br>  ุนูู ุฌูุงุฒ ูุชุตู ุจุงูุฅูุชุฑูุช ูุชุดุบูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ V1.11 ุฃู ุงูุฃุญุฏุซ ุ ููููู ุงูุชุซุจูุช ุจุงุณุชุฎุฏุงู ุฅุตุฏุงุฑ <i>upup ุงููุฏูุฌ</i> .  ุงูุชุฃูุฏ ูู ุฃู ุงูุฌูุงุฒ ูุชุตู ุจุดุจูุชู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> upip upip.install ( <span class="hljs-string"><span class="hljs-string">'micropython-uasyncio'</span></span> ) upip.install ( <span class="hljs-string"><span class="hljs-string">'micropython-uasyncio.synchro'</span></span> ) upip.install ( <span class="hljs-string"><span class="hljs-string">'micropython-uasyncio.queues'</span></span> )</code> </pre><br>  ุฑุณุงุฆู ุงูุฎุทุฃ ูู <i>upip</i> ููุณุช ูููุฏุฉ ููุบุงูุฉ.  ุฅุฐุง ุญุตูุช ุนูู ุฎุทุฃ ุบูุฑ ููููู ุ ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช ูุฑุฉ ุฃุฎุฑู. <br><br>  <b>ุฃุฌูุฒุฉ ุจุฏูู ุงุชุตุงู ุจุงูุฅูุชุฑูุช ( <i>micropip</i> )</b> <br><br>  ุฅุฐุง ูู ููู ูุฏู ุงูุฌูุงุฒ ุงุชุตุงู ุจุงูุฅูุชุฑูุช (ุนูู ุณุจูู ุงููุซุงู ุ <b>Pyboard V1.x</b> ) ุ ูุฅู ุฃุณูู ุทุฑููุฉ ูู ุจุฏุก ุชุซุจูุช <i>micropip.py</i> ุนูู ุงูููุจููุชุฑ ุฅูู ุงูุฏููู ุงูุฐู ุชุฎุชุงุฑู ุ ุซู ูุณุฎ ุจููุฉ ุงูุฏููู ุงููุงุชุฌ ุฅูู ุงูุฌูุงุฒ ุงููุฏู.  ุชุนูู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ <i>micropip.py</i> ุนูู <b>Python 3.2</b> ุฃู ุฅุตุฏุงุฑ ุฃุญุฏุซ ูุชุนูู ุนูู ุฃูุธูุฉ Linux ู Windows ู OSX.  ูููู ุงูุงุทูุงุน ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช <a href="https://github.com/peterhinch/micropython-samples/tree/master/micropip" rel="nofollow">ููุง</a> . <br><br>  ููุงููุฉ ูููุฐุฌูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">$ micropip.py install -p ~/rats micropython-uasyncio $ micropip.py install -p ~/rats micropython-uasyncio.synchro $ micropip.py install -p ~/rats micropython-uasyncio.queues</code> </pre><br>  <b>ุฌูุงุฒ ุจุฏูู ุงุชุตุงู ุจุงูุฅูุชุฑูุช (ูุตุฏุฑ ุงููุณุฎ)</b> <br><br>  ุฅุฐุง ููุช ูุง ุชุณุชุฎุฏู <i>micropip.py</i> ุ ููุฌุจ ูุณุฎ ุงููููุงุช ูู ุงููุตุฏุฑ.  ุชุตู ุงูุฅุฑุดุงุฏุงุช ุงูุชุงููุฉ ููููุฉ ูุณุฎ ุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุงููููุงุช ุฅูู ุงูุฌูุงุฒ ุงููุณุชูุฏู ุ ููุฐูู ุงูุญุงูุฉ ุงูุชู ูุญุชุงุฌ ูููุง ุถุบุท <b><i>uasyncio</i></b> ุฅูู ูุฌููุนุฉ ูุชุฑุฌูุฉ ูู ุดูู <b><i>ุฑูุฒ ุซุงููู</i></b> ูุชูููู ุงููุณุงุญุฉ ุงููุดุบููุฉ.  ููุญุตูู ุนูู ุฃุญุฏุซ ุฅุตุฏุงุฑ ูุชูุงูู ูุน ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฑุณููุฉ ุ ูุฌุจ ูุณุฎ ุงููููุงุช ูู ูููุน <a href="http://github.com/micropython/micropython-lib" rel="nofollow">micropython-lib</a> ุงูุฑุณูู. <br><br>  ุงุณุชูุณุงุฎ ุงูููุชุจุฉ ุฅูู ุงูููุจููุชุฑ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">$ git clone https://github.com/micropython/micropython-lib.git</code> </pre><br>  ุนูู ุงูุฌูุงุฒ ุงููุฏู ุ ุฃูุดุฆ ุฏููู <b><i>uasyncio</i></b> (ุงุฎุชูุงุฑู ูู ุฏููู lib) ูุงูุณุฎ ุงููููุงุช ุงูุชุงููุฉ ููู: <br><br>  <b>โข uasyncio / uasyncio / __ init__.py</b> <b><br></b>  <b>โข uasyncio.core / uasyncio / core.py</b> <b><br></b>  <b>โข uasyncio.synchro / uasyncio / synchro.py</b> <b><br></b>  <b>โข uasyncio.queues / uasyncio / queues.py</b> <b><br></b> <br><br>  ูููู ุถุบุท ูุญุฏุงุช <b><i>uasyncio</i></b> ูุฐู ูู <b><i>ุฑูุฒ</i></b> bytecode ุนู ุทุฑูู ูุถุน ุฏููู <b><i>uasyncio</i></b> ููุญุชููุงุชู ูู ูููุฐ ุฏููู <i>ุงููุญุฏุงุช ุงูููุทูุฉ</i> ูุฅุนุงุฏุฉ ุชุฑุฌูุฉ ุงููุญุชููุงุช. <br><br>  <b>1. ุงูุชุฎุทูุท ุงููุดุชุฑู</b> <br><br>  ูุชู ุงุณุชุฎุฏุงู ุชูููุฉ ุงูุชูููุฐ ุงููุดุชุฑู ููุนุฏูุฏ ูู ุงูููุงู ุนูู ูุทุงู ูุงุณุน ูู ุงูุฃูุธูุฉ ุงููุฏูุฌุฉ ุ ูุงูุชู ุชููุฑ <b>ููุฏุงุฑ ุญูู</b> ุฃูู ูู ุฌุฏููุฉ ุงูุฎููุท ( <b>_thread</b> ) ุ ูุชุฌูุจ ุงูุนุฏูุฏ ูู ุงููุฒุงูู ุงููุฑุชุจุทุฉ <b>ุจุณูุณูุฉ ูุคุดุฑุงุช</b> ุงูุชุฑุงุจุท ุบูุฑ ุงููุชุฒุงููุฉ ุจุงููุนู. <br><br>  <b>1.1 ูุญุฏุงุช</b> <br><br>  ูููุง ููู ูุงุฆูุฉ ุจุงููุญุฏุงุช ุงูููุทูุฉ ุงูุชู ูููู ุชุดุบูููุง ุนูู ุงูุฌูุงุฒ ุงููุฏู. <br><br>  <b><u>ุงูููุชุจุงุช</u></b> <br><br>  1. <b><i>asyn.py</i></b> ูููุฑ <i><b>ุชุฃููู ุ ุญุฏุซ ุ ุญุงุฌุฒ ุ ุฅุดุงุฑุฉ ุ BoundedSemaphore ุ ุดุฑุท ุ ุฌูุน ุจุฏุงุฆู</b></i> ุงูุชุฒุงูู.  ูููุฑ ุงูุฏุนู ูุฅูุบุงุก ุงูููุงู ูู ุฎูุงู <i><b>ูุตูู NamedTask</b></i> ู <i><b>Cancellable</b></i> . <br><br>  2. <b><i>aswitch.py</i></b> ููุซู ุงูุทุจูุงุช ูููุงุชูุญ ุงูุชุจุฏูู ูุงูุฃุฒุฑุงุฑ ุ ููุฐูู ูุงุฆู ุงูุจุฑูุงูุฌ ูุน ุฅููุงููุฉ ุงูุชุฃุฎูุฑ ุงููุชูุฑุฑ.  ุงูุฃุฒุฑุงุฑ ูู ุชุนููู ููููุงุชูุญ ุงูุชู ุชููุฑ ุญุงูุฉ ููุทููุฉ ุจุฏูุงู ูู ุงูุญุงูุฉ ุงููุงุฏูุฉ ุ ููุฐูู ุงูุฃุญุฏุงุซ ุงูุชู ุชุญุฏุซ ุจุณุจุจ ุงูุถุบุท ุงููุฒุฏูุฌ ูุงูุทููู. <br><br>  <b>ุงูุจุฑุงูุฌ ุงูุชุฌุฑูุจูุฉ</b> <br><br>  ุฃููููุง ูููุฏ ููุบุงูุฉ ุญูุซ ุฃูููุง ูุนุทูุงู ูุชุงุฆุฌ ูุฑุฆูุฉ ุนูุฏ ุงููุตูู ุฅูู <b>ุฃุฌูุฒุฉ Pyboard</b> . <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b><i>ูููุถ aledflash.py</i></b> ุฃุฑุจุนุฉ ูุคุดุฑุงุช <b>Pyboard</b> ุจุดูู ุบูุฑ ูุชุฒุงูู ููุฏุฉ 10 ุซูุงูู.  ุฃุจุณุท ูุธุงูุฑุฉ <b>uasyncio</b> .  ุงุณุชูุฑุงุฏู ูุชุดุบูู. </li><li style=";text-align:right;direction:rtl">  <b><i>apoll.py</i></b> ุจุฑูุงูุฌ ุชุดุบูู <b><i>ุงูุฌูุงุฒ</i></b> ุงูุฎุงุต <b>ุจุชุณุงุฑุน Pyboard</b> .  ููุถุญ ุงุณุชุฎุฏุงู coroutines ููุงุณุชุนูุงู ุนู ุงูุฌูุงุฒ.  ูุนูู ููุฏุฉ 20 ุซุงููุฉ.  ุงุณุชูุฑุงุฏู ูุชุดุบูู.  ูุชุทูุจ <b>Pyboard V1.x.</b> </li><li style=";text-align:right;direction:rtl">  <b><i>astests.py</i></b> ุจุฑุงูุฌ ุงุฎุชุจุงุฑ / ุชุฌุฑูุจู ููุญุฏุฉ <b><i>aswitch</i></b> . </li><li style=";text-align:right;direction:rtl">  <b><i>asyn_demos.py</i></b> ุนุฑูุถ ุจุณูุทุฉ ูุฅูุบุงุก ุงูููุงู. </li><li style=";text-align:right;direction:rtl">  <b><i>roundrobin.py</i></b> ูุธุงูุฑุฉ ุงูุชุฎุทูุท ุงูุฏุงุฆุฑู.  ุฃูุถุง ูุนูุงุฑ ูุชุฎุทูุท ุงูุฃุฏุงุก. </li><li style=";text-align:right;direction:rtl">  <b><i>awaitable.py</i></b> ูุธุงูุฑุฉ ูู ูุฆุฉ ูุน ุงูุงูุชุธุงุฑ.  ุทุฑููุฉ ูุงุญุฏุฉ ูุชูููุฐ ุจุฑูุงูุฌ ุชุดุบูู ุฌูุงุฒ ูุณุชูุตู ูุงุฌูุฉ. </li><li style=";text-align:right;direction:rtl">  <b><i>chain.py</i></b> ูุณุฎ ูู ูุซุงุฆู <b>ุจูุซูู</b> .  ูุธุงูุฑุฉ ุณูุณูุฉ ููุฑูุชูู. </li><li style=";text-align:right;direction:rtl">  <b><i>aqtest.py</i></b> ุนุฑุถ <b><i>ุชูุถูุญู</i></b> ููุฆุฉ <b><i>ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</i></b> ูู ููุชุจุฉ <i><b>uasyncio</b></i> . </li><li style=";text-align:right;direction:rtl">  <b><i>aremote.py</i></b> ูุซุงู ุจุฑูุงูุฌ ุชุดุบูู ุงูุฌูุงุฒ ูุจุฑูุชูููู NEC IR. </li><li style=";text-align:right;direction:rtl">  <b><i>auart.py</i></b> ูุธุงูุฑุฉ ุชุฏูู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช ูู ุฎูุงู <b>Pyboard UART</b> . </li><li style=";text-align:right;direction:rtl">  <b><i>auart_hd.py</i></b> ุงุณุชุฎุฏุงู <b>Pyboard UART</b> ููุงุชุตุงู ุจุฌูุงุฒ ุจุงุณุชุฎุฏุงู ุจุฑูุชูููู <b>ุฃุญุงุฏู</b> ุงูุงุชุฌุงู.  ููุงุณุจ ููุฃุฌูุฒุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ุฃูุงูุฑ AT modem. </li><li style=";text-align:right;direction:rtl">  <b><i>iorw.py</i></b> ุนุฑุถ <b><i>ุชูุถูุญู ูุฌูุงุฒ</i></b> ูุงุฑุฆ / ูุงุชุจ ุจุงุณุชุฎุฏุงู ุชุฏูู I / O. </li></ol><br>  <b>ุงุฎุชุจุงุฑ ุงูุจุฑุงูุฌ</b> <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b><i>asyntest.py</i></b> ุงุฎุชุจุงุฑุงุช ููุฆุงุช ุงููุฒุงููุฉ ูู <b><i>asyn.py.</i></b> </li><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑุงุช ุฅูุบุงุก ุงููุธููุฉ. </li></ol><br>  <b>ูุงุฆุฏุฉ</b> <br><br>  1. <b><i>check_async_code.py</i></b> ุชุชู ูุชุงุจุฉ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ูู <b>Python3</b> ูุงูุชุดุงู ุฃุฎุทุงุก ุงูุชุฑููุฒ ุงููุญุฏุฏุฉ ุงูุชู ูุตุนุจ ุงูุนุซูุฑ ุนูููุง.  ุงูุธุฑ ุงููุณู 7.5. <br><br>  <b>ุณูุทุฑุฉ</b> <br><br>  ูุญุชูู ุฏููู <a href="" rel="nofollow"><i>ุงููุนุงููุฑ</i></a> ุนูู ุจุฑุงูุฌ ูุตูุฉ ููุญุต ูุชูุตูู ุจุฑูุงูุฌ <i><b>ุฌุฏููุฉ uasyncio</b></i> . <br><br><cut></cut><br>  <b>2. ููุชุจุฉ <i>uasyncio</i></b> <br><br>  <i>ูุนุชูุฏ</i> ููููู <i>ุงูุชุฒุงูู</i> ุนูู ุชูุธูู ุงูุชุฎุทูุท ููุชูููุฐ ุงููุดุชุฑู ููุนุฏูุฏ ูู ุงูููุงู ุ ูุงูุชู ุชุณูู ูู ูุฐู ุงููุซููุฉ <b>coroutines</b> . <br><br>  <b>2.1 ูููู ุงูุจุฑูุงูุฌ: ุญููุฉ ุงูุญุฏุซ</b> <br><br>  ุงููุธุฑ ูู ุงููุซุงู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> : count + = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> ( count ) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep ( <span class="hljs-number"><span class="hljs-number">1</span></span> ) <span class="hljs-comment"><span class="hljs-comment">#  1 loop = asyncio.get_event_loop () loop.create_task ( bar ()) #     loop.run_forever ()</span></span></code> </pre><br>  ูุณุชูุฑ ุชูููุฐ ุงูุจุฑูุงูุฌ ุญุชู <i>ูุชู ุงุณุชุฏุนุงุก loop.run_forever</i> .  ูู ูุฐู ุงููุฑุญูุฉ ุ ูุชู ุงูุชุญูู ูู ุงูุชูููุฐ ุจูุงุณุทุฉ ุงููุฌุฏูู.  ูู ูุชู ุชูููุฐ ุงูุณุทุฑ ุจุนุฏ <i>loop.run_forever</i> ุฃุจุฏูุง.  ูููู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ุจุชูููุฐ ุงูุฑูุฒ <i>ุงูุดุฑูุทู</i> ูุฃูู ุชู <i>ูุถุนู</i> ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูู ุจุฑูุงูุฌ <i>ุฌุฏููุฉ loop.create_task</i> .  ูู ูุฐุง ุงููุซุงู ุงูุชุงูู ุ ููุงู <i>ุดุฑูุท</i> coroutine ูุงุญุฏ ููุท.  ุฅุฐุง ูุงู ููุงู ุขุฎุฑูู ุ ูุณูู ูููุฐูู ุงููุฌุฏูู ุฎูุงู ุงููุชุฑุงุช ุงูุชู ุชู ูููุง ุฅููุงู <i>ุงูุดุฑูุท</i> ูุคูุชูุง. <br><br>  ุชุญุชูู ูุนุธู ุงูุชุทุจููุงุช ุงููุถููุฉ ุนูู ุญููุฉ ุญุฏุซ ูุณุชูุฑ.  ูููู ุฃูุถูุง ุจุฏุก ุญููุฉ ุญุฏุซ ุจุทุฑููุฉ ุชุณูุญ <i>ุจุงูุฅููุงู</i> ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุญููุฉ ุงูุญุฏุซ <i>run_until_complete</i> ุ  ููู ุชุณุชุฎุฏู ุฃุณุงุณุง ูู ุงูุงุฎุชุจุงุฑ.  ูููู ุงูุนุซูุฑ ุนูู ุฃูุซูุฉ ูู ูุญุฏุฉ <a href="https://github.com/peterhinch/micropython-async/blob/master/astests.py" rel="nofollow"><b><i>astests.py</i></b></a> . <br><br>  ูุซูู ุญููุฉ ุงูุญุฏุซ ูู ูุงุฆู ูุงุญุฏ ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุงูุงุณุชุฏุนุงุก ุงูุฃูู ุฅูู <i>asyncio.get_event_loop ()</i> ูุน ูุณูุทุฉ ุนุฏุฏ ุตุญูุญ ุงุฎุชูุงุฑู ุชุดูุฑ ุฅูู ุนุฏุฏ coroutines ูู ููุงุฆู ุงูุงูุชุธุงุฑ ุงุซููู - ุงูุจุฏุงูุฉ ูุงูุงูุชุธุงุฑ.  ุนุงุฏุฉ ุ ุณูููู ูููุชุง ุงููุณูุทุชูู ููุณ ุงููููุฉ ุ ูุณุงููุฉ ูุนุฏุฏ ุนูู ุงูุฃูู ูู coroutines ุงููููุฐุฉ ูู ููุช ูุงุญุฏ ูู ุงูุชุทุจูู.  ุนุงุฏุฉู ูุง ุชููู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ 16 ูุงููุฉ. ูู ุญุงูุฉ ุงุณุชุฎุฏุงู ุงูููู ุบูุฑ ุงูุงูุชุฑุงุถูุฉ ุ ุฑุงุฌุน ูุณูุทุงุช ูููุดุฆ ุญููุฉ ุงูุญุฏุซ (ุงููุณู 7.7.). <br><br>  ุฅุฐุง ูุงู coroutine ูุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก ุฃุณููุจ ุญููุฉ ุงูุญุฏุซ (ุนุงุฏุฉู <i>ุฅูุดุงุก_t_task</i> ) ุ ูุฅู ุงุณุชุฏุนุงุก <i>asyncio.get_event_loop ()</i> (ุจุฏูู ูุณูุทุงุช) <i>ุณูุนูุฏู</i> ุจุดูู ูุนุงู. <br><br>  <b>2.2 Coroutines</b> <br><br>  ูุชู ุฅูุดุงุก coroutine ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( delay_secs )</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep ( delay_secs ) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> ( <span class="hljs-string"><span class="hljs-string">'Hello'</span></span> )</code> </pre><br>  ูููู ู coroutine ุฃู ูุณูุญ ุจุชุดุบูู coroutines ุฃุฎุฑู ุจุงุณุชุฎุฏุงู ุจูุงู <i>ุงูุงูุชุธุงุฑ</i> .  ูุฌุจ ุฃู ูุญุชูู coroutine ุนูู ุจูุงู <i>ุงูุชุธุงุฑ</i> ูุงุญุฏ ุนูู ุงูุฃูู.  ูุฐุง ูุคุฏู ุฅูู ุชูููุฐ coroutine ูุจู ุงูุงูุชูุงุก ุ ูุจู ุชูููุฐ ุงูุชูููุฐ ุฅูู ุงูุนุจุงุฑุฉ ุงูุชุงููุฉ.  ุงููุธุฑ ูู ูุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep ( delay_secs ) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep ( <span class="hljs-number"><span class="hljs-number">0</span></span> )</code> </pre><br>  ูุคุฏู ุงูุณุทุฑ ุงูุฃูู ุฅูู ุชููู ุงูุดูุฑุฉ ูุคูุชูุง ููุชุฑุฉ ุชุฃุฎูุฑ ุ ูู ุญูู ูุณุชุฎุฏู ููุฑููู ุขุฎุฑูู ูุฐุง ุงูููุช ูุชูููุฐูุง.  ูุคุฏู ุงูุชุฃุฎูุฑ 0 ุฅูู ุชูููุฐ ุฌููุน ุงูุฎุทูุท ุงููุนููุฉ ูู ุชุฑุชูุจ ุฏูุฑู ุญุชู ูุชู ุชูููุฐ ุงูุณุทุฑ ุงูุชุงูู.  ุงูุธุฑ ูุซุงู <i><b>roundrobin.py</b></i> . <br><br>  <b>2.2.1.</b>  <b>ูุงุฆูุฉ ุงูุชุธุงุฑ ููุชุฎุทูุท coroutine</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <i>EventLoop.create_task</i> ูุณูุทุฉ: Coroutine ูุชุดุบูู.  ูุตุทู ุงููุฌุฏูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุจุฏุก ูู ุฃุณุฑุน ููุช ูููู.  ุงุณุชุฏุนุงุก <i>create_task</i> ูุนูุฏ ุนูู ุงูููุฑ.  ูุชู ุชุญุฏูุฏ coroutine ูู ุงููุณูุทุฉ ุจุงุณุชุฎุฏุงู ุจูุงุก ุฌููุฉ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ูุน ุงููุณุงุฆุท ุงูุถุฑูุฑูุฉ. </li><li style=";text-align:right;direction:rtl">  <i>EventLoop.run_until_complete</i> ูุณูุทุฉ: Coroutine ูุชุดุบูู.  ูุตุทู ุงููุฌุฏูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุจุฏุก ูู ุฃุณุฑุน ููุช ูููู.  ูุชู ุชุญุฏูุฏ coroutine ูู ุงููุณูุทุฉ ุจุงุณุชุฎุฏุงู ุจูุงุก ุฌููุฉ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ูุน ุงููุณุงุฆุท ุงูุถุฑูุฑูุฉ.  ุฅุฑุฌุงุน ุงูููุงููุฉ <i>un_until_complete</i> ุนูุฏ ุงูุชูุงู coroutine: ุชููุฑ ูุฐู ุงูุทุฑููุฉ ุทุฑููุฉ ูุฅููุงุก ุจุฑูุงูุฌ ุงูุฌุฏููุฉ. </li><li style=";text-align:right;direction:rtl">  <i>ูู ุงูุชุธุงุฑ</i> ูุณูุทุฉ: coroutine ูุชุดุบูู ุ ุงููุญุฏุฏ ุจุงุณุชุฎุฏุงู ุจูุงุก ุฌููุฉ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ.  ูุจุฏุฃ coroutine ูู ุฃูุฑุจ ููุช ูููู.  ูุชู ุญุธุฑ coroutine ุงููุนููุฉ ุญุชู ููุชูู ุฃุญุฏ coroutines ุงููุชููุน. </li></ul><br>  ูุง ุณุจู ูุชูุงูู ูุน <b>CPython</b> .  <b><i>ูุชูุงูุด</i></b> ุฃุณุงููุจ <b><i>uasyncio</i></b> ุฅุถุงููุฉ ูู ุงูููุงุญุธุงุช (ุงููุณู 2.2.3.). <br><br>  <b>2.2.2 ุจุฏุก ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู</b> <br><br>  ูุฌุจ ุฃู ุชููู ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช ูุธุงุฆู <b>Python</b> ูุตููุฉ ููุชูููุฐ ูู ูุชุฑุฉ ุฒูููุฉ ูุตูุฑุฉ.  ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู coroutines ูู ุชููู ูุงุฏุฑุฉ ุนูู ุงูุนูู ุทูุงู ูุฏุฉ ุชูููุฐ ูุฐู ุงููุธููุฉ. <br><br>  ุงุณุชุฎุฏุงู <b><i>ุฃุณุงููุจ</i></b> ูุฆุฉ <b><i>EventLoop</i></b> ุงูุชุงููุฉ ุฑุฏ ุงูุงุชุตุงู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <i>call_soon</i> - ุงุณุชุฏุนุงุก ูู ุฃูุฑุจ ููุช ูููู.  Args: <i>ุฑุฏ ุงูุงุชุตุงู</i> callback ูุชุดุบูู ุ <i>* args</i> ูููู ุฃู ูุชุจุน ุฃู ูุณูุทุงุช <i>ููุถุนูุฉ</i> ุจูุงุตูุฉ. </li><li style=";text-align:right;direction:rtl">  <i>call_later</i> - ุงุณุชุฏุนุงุก ุจุนุฏ ุชุฃุฎูุฑ ูู ุซูุงู.  Args: <i>ุงูุชุฃุฎูุฑ ุ ุฑุฏ ุงูุงุชุตุงู ุ * args</i> </li><li style=";text-align:right;direction:rtl">  <i>call_later_ms</i> - ููุงููุฉ ุจุนุฏ ุชุฃุฎูุฑ ูู ูููู ุซุงููุฉ.  Args: <i>ุงูุชุฃุฎูุฑ ุ ุฑุฏ ุงูุงุชุตุงู ุ * args</i> . </li></ol><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">loop = asyncio.get_event_loop () loop.call_soon ( foo , <span class="hljs-number"><span class="hljs-number">5</span></span> ) <span class="hljs-comment"><span class="hljs-comment">#    'foo'      5. loop.call_later ( 2 , foo , 5 ) #   2 . loop.call_later_ms ( 50 , foo , 5 ) #   50 . loop.run_forever ()</span></span></code> </pre><br>  <b>2.2.3 ููุงุญุธุงุช</b> <br><br>  ูุฏ ูุญุชูู coroutine ุนูู ุนุจุงุฑุฉ <i>ุฅุฑุฌุงุน</i> ูุน ููู ุงูุฅุฑุฌุงุน ุงูุชุนุณูู.  ููุญุตูู ุนูู ูุฐู ุงููููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> my_coro ()</code> </pre><br>  ูููู ุฃู ูููู coroutine ูุญุฏูุฏูุง ุจุงูุทุฑู ููุฌุจ ุฃู ูุญุชูู ุนูู ุจูุงู <i>ุงูุชุธุงุฑ</i> ูุงุญุฏ ุนูู ุงูุฃูู. <br><br>  <b>2.3 ุงูุชุฃุฎูุฑ</b> <br><br>  ููุงู ุฎูุงุฑุงู ูุชูุธูู ุงูุชุฃุฎูุฑ ูู coroutines.  ููุชุฃุฎูุฑุงุช ุงูุฃุทูู ููู ุงูุญุงูุงุช ุงูุชู ูุง ุชุญุชุงุฌ ูููุง ุฅูู ุฃู ุชููู ุงููุฏุฉ ุฏูููุฉ ุ ููููู ุงุณุชุฎุฏุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( delay_secs , delay_ms )</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep ( delay_secs ) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> ( <span class="hljs-string"><span class="hljs-string">'Hello'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep_ms ( delay_ms )</code> </pre><br>  ุฎูุงู ูุซู ูุฐู ุงูุชุฃุฎูุฑุงุช ุ ุณูู ูููู ุงููุฌุฏูู ุจุชูููุฐ ุจุฑุงูุฌ ุฃุฎุฑู.  ูููู ุฃู ูุคุฏู ูุฐุง ุฅูู ุนุฏู ุงููููู ูู ุงูููุช ุ ุญูุซ ูู ูุชู ุชุดุบูู coroutine ุงูุงุณุชุฏุนุงุก ุฅูุง ุนูุฏ ุชูููุฐ ุงูุฐู ูุชู ุชุดุบููู ุญุงูููุง.  ูุนุชูุฏ ููุฏุงุฑ ุงูุชุฃุฎูุฑ ุนูู ูุทูุฑ ุงูุชุทุจูู ุ ูููู ูู ุงููุญุชูู ุฃู ูููู ุญุณุจ ุชุฑุชูุจ ุนุดุฑุงุช ุฃู ูุฆุงุช ูููู ุซุงููุฉ ุ  ุชูุช ููุงูุดุฉ ุฐูู ุจุดูู ุฃูุจุฑ ูู ุงูุชูุงุนู ูุน ุฃุฌูุฒุฉ ุงูุฃุฌูุฒุฉ (ุงููุณู 6). <br><br>  ูููู ุฅุฌุฑุงุก ุชุฃุฎูุฑ ุฏููู ููุบุงูุฉ ุจุงุณุชุฎุฏุงู ูุธุงุฆู <i>utime</i> - <i>sleep_ms</i> ู <i>sleep_us</i> .  ูู ุงูุฃูุณุจ ููุชุฃุฎูุฑุงุช ุงููุตูุฑุฉ ุ ุญูุซ ุฃู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ูู ูููู ูุงุฏุฑูุง ุนูู ุชูููุฐ ุจุฑุงูุฌ ุฃุฎุฑู ุฃุซูุงุก ุงูุชุฃุฌูู. <br><br>  <b>3.Sinhronizatsiya</b> <br><br>  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ููุงู ุญุงุฌุฉ ูุถูุงู ุงูุชุฒุงูู ุจูู coroutines.  ูุซุงู ุดุงุฆุน ูู ุชุฌูุจ ูุง ูุณูู "ุดุฑูุท ุงูุณุจุงู" ุนูุฏูุง ุชุชุทูุจ ุงูุนุฏูุฏ ูู coroutines ูู ููุช ูุงุญุฏ ุงููุตูู ุฅูู ููุณ ุงูููุฑุฏ.  ูุชู ุชูููุฑ ูุซุงู ูู <b><i>astests.py</i></b> ูุชูุงูุด ูู <a href="" rel="nofollow">ุงููุซุงุฆู</a> .  ุฎุทุฑ ุขุฎุฑ ูู "ุงูุนูุงู ุงูููุช" ุนูุฏูุง ููุชุธุฑ ูู coroutine ุงูุขุฎุฑ ูุฅููุงู. <br><br>  ูู ุงูุชุทุจููุงุช ุงูุจุณูุทุฉ ุ ูููู ุชุญููู ุงูุชุฒุงูู ุจุงุณุชุฎุฏุงู ุงูุฃุนูุงู ุงูุนุงูููุฉ ุฃู ุงููุชุบูุฑุงุช ุฐุงุช ุงูุตูุฉ.  ุฃุณููุจ ุฃูุซุฑ ุฃูุงูุฉ ูู ุงุณุชุฎุฏุงู ูุฆุงุช ุงูุชุฒุงูู.  ุชูุฏู ุงููุญุฏุฉ ุงูููุทูุฉ <b><i>asyn.py ุชุทุจููุงุช</i></b> "ูุชูุงููุฉ ุงูุตุบุฑ" ููุฆุงุช <i><b>ุงูุฃุญุฏุงุซ ุ ูุงูุญุงุฌุฒ ุ</b></i> <b><i>ูุงูุฅุดุงุฑุฉ</i></b> ุ <b><i>ููููุฏูุชููุณ</i></b> ุ ุงููุนุฏุฉ ููุงุณุชุฎุฏุงู ูุน <b><i>ุงููุชุฒุงูู</i></b> ููุท.  ููู ููุณุช ููุฌูุฉ ูุญู ูุคุดุฑ ุงูุชุฑุงุจุท ููุฌุจ ุนุฏู ุงุณุชุฎุฏุงููุง ูุน ุงููุญุฏุฉ ุงูููุทูุฉ <b><i>_thread</i></b> ุฃู ูุนุงูุฌ ุงูููุงุทุนุฉ ุ ูุง ูู ููุต ุนูู ุฎูุงู ุฐูู.  ูุชู ุชุทุจูู ูุฆุฉ <i><b>ุงูููู</b></i> ุฃูุถูุง ุ ููู ุจุฏูู ููุชุทุจูู ุงูุฑุณูู. <br><br>  ุชูุดุฃ ูุดููุฉ ุชุฒุงูู ุฃุฎุฑู ูุน ููุชุฌู coroutine ูุงููุณุชููููู coroutine.  ููุชุฌ coroutine ูููุฏ ุงูุจูุงูุงุช ุงูุชู ูุณุชุฎุฏููุง ุงููุณุชููู coroutine.  ููููุงู ุจุฐูู ุ ูููุฑ <b><i>asyncio</i></b> ูุฆุฉ <i><b>ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</b></i> .  ูุถุน ููุชุฌ coroutine ุงูุจูุงูุงุช ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ุจูููุง ููุชุธุฑ ุงููุณุชููู coroutine ุฅููุงูู (ูุน ุนูููุงุช ุฃุฎุฑู ูุฌุฏููุฉ ูู ุงูููุช ุงููุญุฏุฏ).  ุชููุฑ ูุฆุฉ <i><b>ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</b></i> ุถูุงูุงุช ูุฅุฒุงูุฉ ุงูุนูุงุตุฑ ุจุงูุชุฑุชูุจ ุงูุฐู ูุฑุฏุช ุจู.  ุจุฏูุงู ูู ุฐูู ุ ููููู ุงุณุชุฎุฏุงู ูุฆุฉ <i><b>Barrier</b></i> ุฅุฐุง ูุงู ูุฌุจ ุนูู coroutine ุงูููุชุฌ ุงูุงูุชุธุงุฑ ุญุชู ูุตุจุญ coroutine ุงููุณุชููู ุฌุงูุฒูุง ูููุตูู ุฅูู ุงูุจูุงูุงุช. <br><br>  ููุฑุฏ ููุญุฉ ููุฌุฒุฉ ุนู ุงูุทุจูุงุช ุฃุฏูุงู.  ูุฒูุฏ ูู ุงูุชูุงุตูู ูู <a href="" rel="nofollow">ุงููุซุงุฆู ุงููุงููุฉ</a> . <br><br>  <b>3.1 <a href="" rel="nofollow"><i>ููู</i></a></b> <br><br>  ูุถูู <i><b>ููู</b></i> ุงููุตูู ุงููุฑูุฏ ุฅูู ููุฑุฏ ูุดุชุฑู.  ูููู ูุซุงู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงูู ุจุฅูุดุงุก ูุซูู <i>ูููู ุชุฃููู</i> ุงููุฆุฉ ุงูุฐู ูุชู ุชูุฑูุฑู ุฅูู ูุงูุฉ ุงูุนููุงุก ุงูุฐูู ูุฑุบุจูู ูู ุงููุตูู ุฅูู ุงูููุฑุฏ ุงููุดุชุฑู.  ูุญุงูู ูู coroutine ุงูุชูุงุท ุงูููู ุ ูุน ุฅููุงู ุงูุชูููุฐ ูุคูุชูุง ุญุชู ููุฌุญ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> uasyncio.synchro <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Lock <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">task</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i, lock)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> lock.acquire() print(<span class="hljs-string"><span class="hljs-string">"Acquired lock in task"</span></span>, i) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) lock.release() <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">killer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">10</span></span>) loop = asyncio.get_event_loop() lock = Lock() <span class="hljs-comment"><span class="hljs-comment"># The global Lock instance loop.create_task(task(1, lock)) loop.create_task(task(2, lock)) loop.create_task(task(3, lock)) loop.run_until_complete(killer()) #  10s</span></span></code> </pre><br>  <b>3.1.1.Lock ูุงููููุฉ</b> <br><br>  ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุชูุฑูุฑ (5 ูุงููู ุงูุซุงูู (ููุงูุฑ) 2018 ุ ูู ูุชู ุฅููุงู ุชุทููุฑ ูุฆุฉ <i>ุชุฃููู</i> <i><b>uasycio</b></i> <i>Lock</i> ุฑุณูููุง.  ุฅุฐุง ูุงู ููููุฑูุชููู <u>ูููุฉ (ุงููุณู 5.2.2.)</u> ุ ุนูุฏ ุงูุชุธุงุฑ ุงูููู ุนูุฏ ุงูุชุดุบูู ุ ูุฅู ุงููููุฉ ุณุชููู ุบูุฑ ูุนุงูุฉ.  ูู ุชุชููู <i>TimeoutError</i> ุญุชู ูุชููู ุชุฃููู.  ุงูุฃูุฑ ููุณู ููุทุจู ุนูู ุฅูุบุงุก ุงููููุฉ. <br><br>  ุชูุฏู ุงููุญุฏุฉ ุงูููุทูุฉ <b><i>asyn.py</i></b> ูุฆุฉ <b><i>ุงูุชุฃููู</i></b> ุ ูุงูุชู ุชุนูู ูู ูุฐู ุงูุญุงูุงุช.  ูุฐุง ุงูุชุทุจูู ูููุฆุฉ ุฃูู ููุงุกุฉ ูู ุงููุตู ุงูุฑุณูู ุ ูููู ูุฏุนู ูุงุฌูุงุช ุฅุถุงููุฉ ููููุง ูุฅุตุฏุงุฑ <b>CPython</b> ุ ุจูุง ูู ุฐูู ุงุณุชุฎุฏุงู ูุฏูุฑ ุงูุณูุงู. <br><br>  <b>3.2 ุงูุญุฏุซ</b> <br><br>  <b><i>ุงูุญุฏุซ</i></b> ูุฎูู ูุฑุตุฉ ูุงุญุฏุฉ ุฃู ุนุฏุฉ coroutines ูุฅููุงู ุ ูู ุญูู ูุนุทู ุขุฎุฑ ุฅุดุงุฑุฉ ุญูู ุงุณุชูุฑุงุฑูุง.  ูุตุจุญ ูุซูู <b>ุงูุญุฏุซ</b> ูุชุงุญูุง ูุฌููุน coroutines ุงูุฐูู ูุณุชุฎุฏูููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyn event = asyn.Event ()</code> </pre><br>  ููุชุธุฑ coroutine ุญุฏุซูุง ุนู ุทุฑูู ุฅุนูุงู <i>ุญุฏุซ ุงูุชุธุงุฑ</i> ุ ูุจุนุฏ ุฐูู ูุชููู ุงูุชูููุฐ ูุคูุชูุง ุฅูู ุฃู ูุนูู coroutines ุขุฎุฑ <i>event.set ()</i> .  <a href="" rel="nofollow">ูุนูููุงุช ูุงููุฉ</a> <br><br>  ูุฏ ุชูุดุฃ ูุดููุฉ ุฅุฐุง ุชู ุฅุตุฏุงุฑ <i>event.set ()</i> ูู ุฅูุดุงุก ุญููุงุช ุ  ูุฌุจ ุฃู ููุชุธุฑ ุงูุฑูุฒ ุญุชู ุชุชููู ุฌููุน ุงููุงุฆูุงุช ุงููุนููุฉ ูู ุงููุตูู ุฅูู ุงูุญุฏุซ ูุจู ุถุจุทู ูุฑุฉ ุฃุฎุฑู.  ูู ุงูุญุงูุฉ ุงูุชู ูุชููุน ูููุง <b>coro</b> ุญุฏูุซ ุญุฏุซ ุ ูููู ุชุญููู ุฐูู ูู ุฎูุงู ุชููู ุญุฏุซ <b>coro ููุณุญ</b> ุงูุญุฏุซ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eventwait</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( event )</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> event event.clear()</code> </pre><br>  ูุชุญูู coroutine ุงูุฐู ูุทูู ุงูุญุฏุซ ูู ุฃูู ูุฏ ุชูุช ุฎุฏูุชู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( event )</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> : <span class="hljs-comment"><span class="hljs-comment">#   - while event.is_set (): await asyncio.sleep ( 1 ) # ,  coro   event.set ()</span></span></code> </pre><br>  ูู ุญุงูุฉ ุงูุชุธุงุฑ ุงูุนุฏูุฏ ูู <b>coros</b> ููุฒุงููุฉ ุญุฏุซ ูุงุญุฏ ุ ูููู ุญู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ุญุฏุซ ุงูุชุฃููุฏ.  ูุญุชุงุฌ ูู <b>coro</b> ุฅูู ุญุฏุซ ูููุตู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eventwait</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(  , ack_event )</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> event ack_event.set ()</code> </pre><br>  ูุชู ุฅุนุทุงุก ูุซุงู ุนูู ุฐูู ูู ุฏุงูุฉ <i><b>event_test</b></i> ูู <i><b>asyntest.py</b></i> .  ูุฐุง ูุฑูู ูู ูุนุธู ุงูุญุงูุงุช - ุญุชู ูุน ูุฌูุฏ <b>coro</b> ุงูุชุธุงุฑ ูุงุญุฏ - ุชูุฏู ูุฆุฉ <b>Barrier</b> ุ ุงูููุถุญุฉ ุฃุฏูุงู ุ ุทุฑููุฉ ุฃูุซุฑ ุจุณุงุทุฉ. <br>  ูููู ุฃู ูููุฑ ุงูุญุฏุซ ุฃูุถูุง ูุณููุฉ ุงุชุตุงู ุจูู ูุนุงูุฌ ุงูููุงุทุนุฉ ู <b>coro</b> .  ูุญุงูุธ ุงููุนุงูุฌ ุนูู ุงูุฃุฌูุฒุฉ ููููู ุจุชุนููู ุงูุญุฏุซ ุ ูุงูุฐู ูุชู ุงูุชุญูู ููู ุจูุงุณุทุฉ <b>coro</b> ุจุงููุนู ูู ุงููุถุน ุงูุนุงุฏู. <br><br>  <b>3.2.1 ููู ุงูุญุฏุซ</b> <br><br>  ูููู ุฃู ุชุฃุฎุฐ ุทุฑููุฉ <i>event.set ()</i> ูููุฉ ุจูุงูุงุช ุงุฎุชูุงุฑูุฉ ูู ุฃู ููุน.  <b>ูููู Coro</b> ุ ูู ุงูุชุธุงุฑ ุญุฏุซ ุ ุงูุญุตูู ุนููู ูุน <i>event.value ()</i> .  ูุงุญุธ ุฃูู ุณูุชู ุชุนููู <i>event.clear ()</i> ุฅูู ุจูุง.  ุงูุงุณุชุฎุฏุงู ุงููููุฐุฌู ููุฐุง ุงูุฅุนุฏุงุฏ <i>coro</i> ููุญุฏุซ ูู ุฅุตุฏุงุฑ <i>event.set (utime.ticks_ms ())</i> .  ูููู ูุฃู <b>coro</b> ุชูุชุธุฑ ุญุฏุซ ุชุญุฏูุฏ ุงูุชุฃุฎูุฑ ุงูุฐู ุญุฏุซ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุชุนููุถ ุนู ูุฐุง. <br><br>  <b>3.3 <a href="" rel="nofollow"><i>ุงูุญุงุฌุฒ</i></a></b> <br><br>  ููุงู ููุนุงู ูู ุงูุงุณุชุฎุฏุงูุงุช ููุฆุฉ <b><i>ุงูุญุงุฌุฒ</i></b> . <br><br>  ุฃููุงู ุ ููููู ุชุนููู coroutine ุญุชู ูุชู ุงูุงูุชูุงุก ูู ูุงุญุฏ ุฃู ุนุฏุฉ coroutines ุฃุฎุฑู. <br><br>  ุซุงููุงู ุ ูุณูุญ ููุนุฏูุฏ ูู coroutines ุจุงูุงูุชูุงุก ุนูุฏ ููุทุฉ ูุนููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ููููุชุฌ ูุงููุณุชููู ุฅุฌุฑุงุก ุงููุฒุงููุฉ ุนูุฏ ุงูููุทุฉ ุงูุชู ูููู ูููุง ููููุชุฌ ุจูุงูุงุช ุ ูุงููุณุชููู ุฌุงูุฒ ูุงุณุชุฎุฏุงููุง.  ูู ููุช ุงูุชูููุฐ ุ ูุฏ ูุตุฏุฑ <b>ุงูุฌุฏุงุฑ</b> ุฑุฏ ุงุชุตุงู ุฅุถุงูู ูุจู ุฅุฒุงูุฉ ุงูุญุงุฌุฒ ููุฏ ุชุณุชูุฑ ุฌููุน ุงูุฃุญุฏุงุซ ุงููุนููุฉ. <br><br>  ูููู ุฃู ูููู ุฑุฏ ุงูุงุชุตุงู ูุธููุฉ ุฃู coroutine.  ูู ูุนุธู ุงูุชุทุจููุงุช ุ ุณูุชู ุงุณุชุฎุฏุงู ุงููุธููุฉ ุนูู ุงูุฃุฑุฌุญ: ูููู ุถูุงู ุฃู ูุชู ุชูููุฐูุง ูุจู ุงูุงูุชูุงุก ุ ูุจู ุฅุฒุงูุฉ ุงูุญุงุฌุฒ. <br><br>  ูุซุงู ุนูู ุฐูู ูู <i>barrier_test</i> ูุธููุฉ ูู <i><b>asyntest.py</b></i> .  ูู ููุชุทู ุงูุดูุฑุฉ ููุฐุง ุงูุจุฑูุงูุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyn <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text)</span></span></span><span class="hljs-function">:</span></span> print(text) barrier = asyn.Barrier(<span class="hljs-number"><span class="hljs-number">3</span></span>, callback, (<span class="hljs-string"><span class="hljs-string">'Synch'</span></span>,)) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">report</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">5</span></span>): print(<span class="hljs-string"><span class="hljs-string">'{} '</span></span>.format(i), end=<span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> barrier</code> </pre> <br>  ุชููู ุนุฏุฉ ูุซููุงุช <i>ููุชูุฑูุฑ</i> ุจุทุจุงุนุฉ ูุชูุฌุชูุง ูุชููููุง ูุคูุชูุง ุญุชู ุชูุชูู ูุซููุงุช ุฃุฎุฑู ูุชูุชุธุฑ ุงุณุชูุฑุงุฑ <b>ุงูุญุงุฌุฒ</b> .  ูู ูุฐู ุงููุฑุญูุฉ ุ ูุชู ุฅุฌุฑุงุก ุฑุฏ ุงุชุตุงู.  ุนูุฏ ุงูุงูุชูุงุก ุ ูุณุชุฃูู coroutine ุงูุฃุตูู. <br><br>  <b>3.4 ุฅุดุงุฑุฉ</b> <br><br>  ูุญุฏ ุงูุฅุดุงุฑุฉ ูู ุนุฏุฏ coroutines ุงูุชู ูููููุง ุงููุตูู ุฅูู ุงูููุฑุฏ.  ูููู ุงุณุชุฎุฏุงูู ููุญุฏ ูู ุนุฏุฏ ุญุงูุงุช coroutine ูุนููุฉ ุงูุชู ูููู ุฃู ุชุนูู ูู ููุช ูุงุญุฏ.  ูุชู ุฐูู ุจุงุณุชุฎุฏุงู ุนุฏุงุฏ ูุตูู ุ ูุชู ุชููุฆุชู ุจูุงุณุทุฉ ุงูููุดุฆ ููุชู ุชููููู ูู ูู ูุฑุฉ ูุชููู ูููุง coroutine ุฅุดุงุฑุฉ. <br><br>  ุฃุณูู ุทุฑููุฉ ูุงุณุชุฎุฏุงููุง ูู ูุฏูุฑ ุงูุณูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyn sema = asyn.Semaphore(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sema)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> sema: <span class="hljs-comment"><span class="hljs-comment">#   </span></span></code> </pre><br>  ูุซุงู ุนูู ุฐูู ูู ูุธููุฉ <i>semaphore_test</i> ูู <i><b>asyntest.py</b></i> . <br><br>  <b>3.4.1 ( <a href="" rel="nofollow"><i>ูุญุฏูุฏ</i></a> ) ุฅุดุงุฑุฉ</b> <br><br>  ุฅูู ูุนูู ุจุดูู ูุดุงุจู ููุฆุฉ <i><b>Semaphore</b></i> ูููุง ุนุฏุง ุฃูู ุฅุฐุง <i>ุชุณุจุจุช</i> ุทุฑููุฉ <i>ุงูุฅุตุฏุงุฑ</i> ูู ุชุฌุงูุฒ ุนุฏุงุฏ ุงููุตูู ุนู ูููุชู ุงูุฃูููุฉ ุ <i>ูุชู</i> ุชุนููู <i>ValueError</i> . <br><br>  <b>3.5 ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</b> <br><br>  ุชุชู ุงููุญุงูุธุฉ ุนูู ูุฆุฉ <i><b>ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</b></i> ุจูุงุณุทุฉ <i><b>uasycio</b></i> ุงูุฑุณูู <i><b>ูููุถุญ</b></i> ุจุฑูุงูุฌ ุนููุฉ <i><b>aqtest.py</b></i> ุงุณุชุฎุฏุงูู.  ูุชู ุฅูุดุงุก ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> uasyncio.queues <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Queue q = Queue ()</code> </pre><br>  coroutine ุงูุดุฑูุฉ ุงููุตูุนุฉ ูููุฐุฌู ูููู ุฃู ุชุนูู ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(q)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> slow_process() <span class="hljs-comment"><span class="hljs-comment">#       await q.put(result) #  ,       </span></span></code> </pre><br>  ู coroutine ุงููุณุชููู ูููู ุฃู ุชุนูู ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(q)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span>(q.get()) <span class="hljs-comment"><span class="hljs-comment"># ,  q  print('Result was {}'.format(result))</span></span></code> </pre><br>  ุชููุฑ ูุฆุฉ <i><b>ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</b></i> ูุธุงุฆู ุฅุถุงููุฉ ูุงูุฉ ุนูุฏูุง ูููู ุญุฌู ููุงุฆู ุงูุงูุชุธุงุฑ ูุญุฏูุฏูุง ููููู ุงุณุชูุตุงุก ุงูุญุงูุฉ.  ูููู ุงูุชุญูู ูู ุงูุณููู ุจุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุชุธุงุฑ ูุงุฑุบุฉ (ุฅุฐุง ูุงู ุงูุญุฌู ูุญุฏูุฏูุง) ููููู ุงูุชุญูู ูู ุงูุณููู ุจุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุชุธุงุฑ ูุงููุฉ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงุฆู ุญูู ูุฐุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6 ูุฆุงุช ุงูุชุฒุงูู ุงูุฃุฎุฑู</font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููุฑ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุจุฉ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asyn.py ุชุทุจูููุง ุตุบุฑููุง</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจุนุถ ููุฒุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุฎุฑู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุณูุญ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฆุฉ </font></font><a href="" rel="nofollow"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุงูุฉ</font></font></i></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู coroutine ุจุฅุฎุทุงุฑ coroutines ุงูุขุฎุฑูู ุจุงูุชุธุงุฑ ููุฑุฏ ูุบูู. ุจุนุฏ ุชููู ุงูุฅุดุนุงุฑ ุ ุณูุชููููู ูู ุงููุตูู ุฅูู ุงูููุฑุฏ ูุฅูุบุงุก ูููู ุจุฏูุฑู. ูุฏ ูุญุฏ coroutine ุงูุฅุนูุงู ูู ุนุฏุฏ coroutines ููุชู ุฅุนูุงูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฆุฉ </font></font><a href="" rel="nofollow"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gather</font></font></i></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชูุญ ูู ุชุดุบูู ูุงุฆูุฉ ูู coroutines. ุนูุฏ ุงูุงูุชูุงุก ูู ูุฐุง ุงูุฃุฎูุฑ ุ ุณูุชู ุฅุฑุฌุงุน ูุงุฆูุฉ ุงููุชุงุฆุฌ. ูุณุชุฎุฏู ูุฐุง ุงูุชุทุจูู "ุงูุตุบูุฑ" ุจูุงุก ุฌููุฉ ูุฎุชูู. ุงููููุงุช ูููู ุชุทุจูููุง ุนูู ุฃู ูู coroutines.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 ุชุทููุฑ ูุตูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุฒุงูู</font></font></i></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุณูุงู ุชุทููุฑ ุจุฑุงูุฌ ุชุดุบูู ุงูุฃุฌูุฒุฉ ุ ุงููุฏู ูู ุงูุชุฃูุฏ ูู ุฃููุง ุชุนูู ุฏูู ุญุธุฑ. ูุฌุจ ุฃู ูุถูู ุจุฑูุงูุฌ ุงูุชุดุบูู coroutine ุฃู ูุชู ุชูููุฐ coroutines ุงูุฃุฎุฑู ุฃุซูุงุก ุงูุชุธุงุฑ ุจุฑูุงูุฌ ุงูุชุดุบูู ููุฌูุงุฒ ูุชูููุฐ ุนูููุงุช ุงูุฃุฌูุฒุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุจ ุฃู ุชุณูุญ ุงููููุฉ ุงูุชู ุชูุชุธุฑ ูุตูู ุงูุจูุงูุงุช ุฅูู UART ุ ุฃู ููุงู ุงููุณุชุฎุฏู ุจุงูุถุบุท ุนูู ุฒุฑ ุ ุจุฌุฏููุฉ ุงูุฃุญุฏุงุซ ุงูุฃุฎุฑู ุญุชู ูููุน ุงูุญุฏุซ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1 ุงููุตูู ุงูุชู ุชุณุชุฎุฏู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ</font></font></i></b> <font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;"> ุงูุงูุชุธุงุฑ</font></b></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุฃู ูููู </font><b><i><font style="vertical-align: inherit;">coroutine</font></i></b><font style="vertical-align: inherit;"> ุจุฅููุงู ุงูุชูููุฐ ูุคูุชูุง ุฃุซูุงุก ุงูุชุธุงุฑ ูุงุฆู ูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุถูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุฅูุดุงุก </font><font style="vertical-align: inherit;">ูุฆุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุตุตุฉ </font><font style="vertical-align: inherit;">ุนู ุทุฑูู ุชุทุจูู ุงูุฃุณููุจ </font><i><font style="vertical-align: inherit;">__await__</font></i><font style="vertical-align: inherit;"> ุงูุฎุงุต</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฐู ูุนูุฏ ุงููููุฏ. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏุงู </font><font style="vertical-align: inherit;">ุงููุฆุฉ ุงูุชู </font><i><font style="vertical-align: inherit;">ุชูุชุธุฑ ุงูุงูุชุธุงุฑ ุนูู</font></i><font style="vertical-align: inherit;"> ุงููุญู ุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__await__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">5</span></span>): print(<span class="hljs-string"><span class="hljs-string">'__await__ called'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-comment"><span class="hljs-comment">#     return 42 __iter__ = __await__ # .   async def bar(): foo = Foo() # Foo - awaitable  print('waiting for foo') res = await foo #   print('done', res) loop = asyncio.get_event_loop() loop.run_until_complete(bar())</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงููุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูุฏุนู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__await__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="http://github.com/micropython/micropython/issues/2678" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูุฉ # 2678</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุงูุญู ูุงุณุชุฎุฏุงููุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__iter__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชููุฑ ุงูุณูุณูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__iter__ = __await__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅููุงููุฉ ุงูููู ุจูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฃูุซูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉุ ุฑุงุฌุน ุงูุทุจูุงุช </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏุซุ ุงูุญุงุฌุฒุ ุงูุฅูุบุงุกุ ุงูุญุงูุฉ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asyn.py</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.1 ุงูุงุณุชุฎุฏุงู ูู ูุฏูุฑู ุงูุณูุงู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงุณุชุฎุฏุงู ุงููุงุฆูุงุช ุงููุชููุนุฉ ูู ูุฏูุฑู ุงูุณูุงู ุงููุชุฒุงูู ุฃู ุบูุฑ ุงููุชุฒุงูู ุ ูุชูููุฑ ุงูุทุฑู ุงูุฎุงุตุฉ ุงููุงุฒูุฉ. </font><font style="vertical-align: inherit;">ุจูุงุก ุงูุฌููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> awaitable <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a: <span class="hljs-comment"><span class="hljs-comment">#  'as'   #    async with awaitable as a: #    (.) #  -</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญููู ุฐูู ุ </font><font style="vertical-align: inherit;">ูุฌุจ ุนูู ุงููููุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__await__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฑุฌุงุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุชู ุชูุฑูุฑ ูุฐุง ุฅูู ุฃู ูุชุบูุฑ ูู </font><font style="vertical-align: inherit;">ุฌููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุณูุญ ุฃูุถุง ุฃุณุงููุจ ุฎุงุตุฉ ููุนูู. ุฑุงุฌุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asyn.Condition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asyntest.condition_test</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุซ </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font><font style="vertical-align: inherit;">ูุฆุฉ </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุงูุฉ ูู</font></font></i></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุธุงุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู ุงุณุชุฎุฏุงูู ูู ูุฏูุฑ ุณูุงู ูุชุฒุงูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.2 coroutine ููุชุธุฑ ูู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุบุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุซูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุทูุจ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__await__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุช ูุธููุฉ ุงููููุฏ. ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููููุฏุงุช ู coroutines ูุชุทุงุจูุฉ ุ ูุจุงูุชุงูู ูุฅู ุงูุญู ูู ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุงุฆุฏ ูู coro (args)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุบุฑุถ ูู ูุฐุง ุงูุฏููู ูู ุชูุฏูู ุฑูุฒ ูุญููู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython 3.5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุฅุตุฏุงุฑ ุฃุญุฏุซ. ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููููุฏุงุช ู coroutines ุชุฎุชูู ูู ุงููุนูู. ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุชูู coroutine ุนูู </font><font style="vertical-align: inherit;">ุทุฑููุฉ ุฎุงุตุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__await__ ูุณุชุฑุฌุนูุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููููุฏ. ูุฐุง ูุญููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">up = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-comment"><span class="hljs-comment">#   MicroPython? try: import uasyncio as asyncio up = True #    sys.implementation.name except ImportError: import asyncio async def times_two(n): # Coro   await asyncio.sleep(1) return 2 * n class Foo(): def __await__(self): res = 1 for n in range(5): print('__await__ called') if up: # MicroPython res = yield from times_two(res) else: # CPython res = yield from times_two(res).__await__() return res __iter__ = __await__ async def bar(): foo = Foo() # foo is awaitable print('waiting for foo') res = await foo #   print('done', res) loop = asyncio.get_event_loop() loop.run_until_complete(bar())</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__await__ ุ ุงูุนุงุฆุฏ ูู asyncio.sleep (1)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณููุญ ุจู ุจูุงุณุทุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุง ุฒูุช ูุง ุฃููู ููู ูุชุญูู ูุฐุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2 ุฃุฏูุงุช ุงูุชูุฑุงุฑ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุบูุฑ ุงููุชุฒุงููุฉ ุชููุฑ ุฃุฏูุงุช ุงูุชูุฑุงุฑ ุบูุฑ ุงููุชุฒุงููุฉ ูุณููุฉ ูุฅุฑุฌุงุน ุชุณูุณู ูุญุฏุฏ ุฃู ุบูุฑ ูุญุฏูุฏ ูู ุงูููู ููููู ุงุณุชุฎุฏุงููุง ููุณููุฉ ูุงุณุชุฑุฏุงุฏ ุนูุงุตุฑ ุงูุจูุงูุงุช ุงููุชุณูุณูุฉ ุนูุฏูุง ุชุฃุชู ูู ุฌูุงุฒ ูููุฑุงุกุฉ ููุท. </font><font style="vertical-align: inherit;">ูุณุชุฏุนู ููุฑุฑ ุบูุฑ ูุชุฒุงูู ุฑูุฒ ุบูุฑ ูุชุฒุงูู ูู ุทุฑููุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฌุจ ุนูู ุงููุตู ุชูุจูุฉ ุงููุชุทูุจุงุช ุงูุชุงููุฉ:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู ุนูู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__aiter__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุนุฑูุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุบูุฑ ุงููุชุฒุงูู ูุฅุฑุฌุงุน ููุฑุฑ ุบูุฑ ูุชุฒุงูู.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู ุนูู ุฃุณููุจ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__anext__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ุจุญุฏ ุฐุงุชู ุนุจุงุฑุฉ ุนู coroutine - ุฃู ุ ูุชู ุชุนุฑููู ุนุจุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def async def</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุถูู ุนุจุงุฑุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุญุฏุฉ ุนูู ุงูุฃูู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฅููุงู ุงูุชูุฑุงุฑ ุ ูุฌุจ ุฑูุน </font><font style="vertical-align: inherit;">ุงุณุชุซูุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StopAsyncIteration</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฑุฏุงุฏ ุงูููู ุงูุชุณูุณููุฉ ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฒุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ูู ููุถุญ ุฃุฏูุงู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncIterable</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.data = (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) self.index = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__aiter__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__anext__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> self.fetch_data() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> StopAsyncIteration <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0.1</span></span>) <span class="hljs-comment"><span class="hljs-comment">#     if self.index &gt;= len(self.data): return None x = self.data[self.index] self.index += 1 return x async def run(): ai = AsyncIterable() async for x in ai: print(x)</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3 ูุฏุฑุงุก ุงูุณูุงู ุบูุฑ ุงููุชุฒุงูููู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุชุตููู ุงููุฆุงุช ูุฏุนู ูุฏุฑุงุก ุงูุณูุงู ุบูุฑ ุงููุชุฒุงูููู ุงูุฐูู ูุฏููู ุฅุฌุฑุงุกุงุช ููุฏุฎูู ูุงูุฎุฑูุฌ ููู ุจุฑุงูุฌ ูุดุชุฑูุฉ. ูุซุงู ุนูู ุฐูู ูู </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃููู</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุจูุฉ </font><font style="vertical-align: inherit;">ุงููุฐููุฑุฉ ุฃุนูุงู. ูุญุชูู ุนูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__aenter__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coroutine </font><font style="vertical-align: inherit;">ุ ููู ุฃูุฑ ูุทููุจ ููุทููุง ููุชุดุบูู ุบูุฑ ุงููุชุฒุงูู. ูุฏุนู ุงูุจุฑูุชูููู ุบูุฑ ุงููุชุฒุงูู ููุฏูุฑ ุงูุณูุงู ุ </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__aexit__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎุงุตุฉ </font><i><font style="vertical-align: inherit;">ุจูุง</font></i><font style="vertical-align: inherit;"> ุฃูุถูุง ุนุจุงุฑุฉ ุนู coroutine ุ ููุชุญูู ุฐูู ุนู ุทุฑูู ุชุถููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ asyncio.sleep (0)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููู ุงููุตูู ุฅูู ูุฐู ุงููุฆุงุช ูู ุฏุงุฎู coroutine ุจุงุณุชุฎุฏุงู ุจูุงุก ุงูุฌููุฉ ุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( lock )</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> lock: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> ( ยซ bar ยป )</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ูุฏูุฑู ุงูุณูุงู ุงูุนุงุฏููู ุ ูุฅู ุทุฑููุฉ ุงูุฎุฑูุฌ ูุถูููุฉ ููุชู ุงุณุชุฏุนุงุคูุง ุนูุฏูุง ูููู ูุฏูุฑ ุงูุณูุงู ุนููู ุ ูุงููุนุชุงุฏ ุ ููู ุฎูุงู ุงุณุชุซูุงุก. ูุชุญููู ูุฐุง ุงููุฏู ุ </font><font style="vertical-align: inherit;">ูุชู </font><i><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู</font></i><font style="vertical-align: inherit;"> ุงูุฃุณุงููุจ ุงูุฎุงุตุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__aenter__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__aexit__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชู ูุฌุจ ุชุนุฑูููุง ุนูู ุฃููุง coroutines ูู ุงูุชุธุงุฑ </font><font style="vertical-align: inherit;">ูุงุฆู </font><font style="vertical-align: inherit;">coroutine ุขุฎุฑ ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุงูุชุธุงุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐุง ุงููุซุงู ูุฃุฎูุฐ ูู ูุฆุฉ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฃููู</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__aenter__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> self.acquire() <span class="hljs-comment"><span class="hljs-comment"># a coro    async def return self async def __aexit__(self, *args): self.release() #   await asyncio.sleep_ms(0)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุฒุงูู ูุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุชูู ุนูู ุฌููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุบูุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญุตู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุชุบูุฑ ุนูู ุงููููุฉ ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ </font><i><font style="vertical-align: inherit;">__aenter__</font></i><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูุงู ุงูุณููู ุงูุตุญูุญ ุ ูุฌุจ ุฃู ุชููู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ V1.9.10 ุฃู ุฃุญุฏุซ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. ุงุณุชุซูุงุกุงุช ูู ุงููููุงุช ูุจุณุจุจ ุฅูุบุงุก ุงูููุงู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฑุชุจุท ูุฐู ุงูููุงุถูุน: </font><font style="vertical-align: inherit;">ูุดุชูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio ุนูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุบุงุก ุงูููุงู ูุชุทุจูู ูููุฉ ููููุฉ ุ ูุน ุงุณุชุซูุงุก ุงุณุชุซูุงุก ูููููุฉ ุจุทุฑููุฉ ุฎุงุตุฉ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1 ุงุณุชุซูุงุกุงุช</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุญุฏูุซ ุงุณุชุซูุงุก ูู coroutine ุ ูุฌุจ ูุนุงูุฌุชู ุฅูุง ูู ูุฐุง coroutine ุฃู ูู coroutine ูู ุงูุชุธุงุฑ ุงูุชูุงูู. ูุฐุง ูุถูู ุฃู ุงูุงุณุชุซูุงุก ูุง ููุทุจู ุนูู ุงููุฌุฏูู. ูู ุญุงูุฉ ุญุฏูุซ ุงุณุชุซูุงุก ุ ุณูุชููู ุงููุฌุฏูู ุนู ุงูุนูู ุจุชูุฑูุฑ ุงูุงุณุชุซูุงุก ุฅูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุจุฏุฃูุง ุงููุฌุฏูู. ูุฐูู ุ ูุชุฌูุจ ุชููู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ุ ูุฌุจ ุนูู coroutine ุงูุฐู ุชู ุฅุทูุงูู ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loop.create_task ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูุงุท ุฃู ุงุณุชุซูุงุกุงุช ูู ุงูุฏุงุฎู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุจ </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">ูุฑูู</font></i><font style="vertical-align: inherit;"> ุงุณุชุซูุงุก ูู coroutine ุฃูุฑ ุบูุฑ ูุนููู. ูุฐุง ูุฏูุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุง ูุคุฏู ุฅูู ุจุฏุก coroutine ูุฑุจูุง </font><b><font style="vertical-align: inherit;">ุงูุฎุฑูุฌ</font></b><font style="vertical-align: inherit;"> ุนูุฏูุง ูุง ูุฒุงู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุชูููุฐ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถุญ ุงููุซุงู ุฃุนูุงู ูุฐุง ุงููููู. ุฅุฐุง ุณูุญ ููุนูู ุญุชู ุงูููุงูุฉ ุ ูุนูู ููุง ูู ูุชููุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">3</span></span>) print(<span class="hljs-string"><span class="hljs-string">'About to throw exception.'</span></span>) <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> foo() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ZeroDivisionError: print(<span class="hljs-string"><span class="hljs-string">'foo  -   0'</span></span>) <span class="hljs-comment"><span class="hljs-comment"># ! raise #     . except KeyboardInterrupt: print('foo was interrupted by ctrl-c') #   ! raise async def shutdown(): print('Shutdown is running.') #     await asyncio.sleep(1) print('done') loop = asyncio.get_event_loop() try: loop.run_until_complete(bar()) except ZeroDivisionError: loop.run_until_complete(shutdown()) except KeyboardInterrupt: print('Keyboard interrupt at loop level.') loop.run_until_complete(shutdown())</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุคุฏู ุฅุตุฏุงุฑ ููุงุทุนุฉ ููุญุฉ ุงูููุงุชูุญ ุฅูู ุญุฏูุซ ุงุณุชุซูุงุก ูู ุญููุฉ ุงูุญุฏุซ. ูุฐูู ูุฃู ุชูููุฐ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio.sleep</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุชูุฑูุฑู ุฅูู ุญููุฉ ุงูุญุฏุซ. ูุฐูู ุ ูุฌุจ ุฃู ุชูุชูุท ุงูุชุทุจููุงุช ุงูุชู ุชุชุทูุจ ุฑูุฒูุง ูุงุถุญูุง ุงุณุชุฌุงุจุฉ ูููุงุทุนุฉ ููุญุฉ ุงูููุงุชูุญ ุงุณุชุซูุงุกูุง ุนูู ูุณุชูู ุญููุฉ ุงูุญุฏุซ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2 </font></font></b> <font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ุงูุฅูุบุงุก ูุงููููุฉ</font></b></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ุฐูุฑ ุฃุนูุงู ุ ุชุนูู ูุฐู ุงููุธุงุฆู ุนู ุทุฑูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑุญ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุซูุงุก ูููููุฉ ุจุทุฑููุฉ ุฎุงุตุฉ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coroutine </font><i><font style="vertical-align: inherit;">pend_throw ุงูุฎุงุตุฉ</font></i><font style="vertical-align: inherit;"> . ููู ูุนูู ูุนุชูุฏ ุนูู ุงูุฅุตุฏุงุฑ. ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุตุฏุงุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณูู </font><b><font style="vertical-align: inherit;">uasyncio v.2.0 ุ</font></b><font style="vertical-align: inherit;"> ูุง ุชุชู ูุนุงูุฌุฉ ุงุณุชุซูุงุก ุญุชู ุงููููุฉ ุงููุฌุฏููุฉ ุงูุชุงููุฉ. ูุฐุง ููุฑุถ ุชุฃุฎูุฑูุง ุฅุฐุง ูุงูุช ุงููููุฉ ุชุชููุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช. </font><font style="vertical-align: inherit;">ุงููููุงุช ูุฏ ุชุชุฌุงูุฒ ุงููุชุฑุฉ ุงูุงุณููุฉ. </font><font style="vertical-align: inherit;">ูุง ูููู ุชุญุฏูุฏ ูููุฉ ุงูุชุฑุงุฌุน ุนู ุงูููุงู ุงูุฃุฎุฑู ุนูุฏ ุงูุชูุงู ุงูุชุฑุงุฌุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฌุฏ ุญูุงู ุญูุงู ุญุงูููุง.</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญู ุงูุจุฏูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><font style="vertical-align: inherit;">ุชููุฑ </font><font style="vertical-align: inherit;">ููุชุจุฉ </font><b><font style="vertical-align: inherit;">asyn</font></b><font style="vertical-align: inherit;"> ูุณููุฉ ูุงูุชุธุงุฑ ุงูููุงู ุฃู ูุฌููุนุงุช ุงูููุงู ูุฅูุบุงุก. </font><font style="vertical-align: inherit;">ุงูุธุฑ ุฅูุบุงุก ูุธููุฉ (ุงููุณู 5.2.1.).</font></font></li><li style=";text-align:right;direction:rtl"> <a href="http://github.com/pfalcon/pycopy-lib" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุฑ </font><a href="http://github.com/pfalcon/pycopy-lib" rel="nofollow"><font style="vertical-align: inherit;">ููุชุจุฉ ุจูู ุณููููููุณูู </font></a></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio v2.4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ูุฐุง ูุชุทูุจ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pycopy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li style=";text-align:right;direction:rtl"> <a href="" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fast_io</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุจุฉ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุฐู ุงููุดููุฉ ูู</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุซูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุฃูู ุจุทุฑููุฉ ุฃูููุฉ) ูุชุดุบูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฑุณููุฉ.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุณูุณู ุงููุฑูู ููุงุณุชุซูุงุกุงุช ุงููุณุชุฎุฏูุฉ ููุง ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exception-CancelledError-TimeoutError</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.1 ุฅูุบุงุก ูุธููุฉ</font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููุฑ </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ูุธููุฉ </font></b></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุบุงุก (coro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐุง ูุนูู ุนู ุทุฑูู ุฑูู ุงุณุชุซูุงุก ูุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pend_throw</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coroutine </font><font style="vertical-align: inherit;">. ููุง ุฃูู ูุนูู ูุน coroutines ุงููุชุฏุงุฎูุฉ. ุงูุงุณุชุฎุฏุงู ููุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-comment"><span class="hljs-comment">#  -  10 secs await asyncio.sleep(10) async def bar(loop): foo_instance = foo() #   coro loop.create_task(foo_instance) # code omitted asyncio.cancel(foo_instance)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชุดุบูู ูุฐุง ุงููุซุงู ุชุญุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio V2.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุนูุฏูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุฑูุท</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุชุตุฏุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุบุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃููุง ูุง ุชุตุจุญ ูุงูุฐุฉ ุงูููุนูู ุญุชู ุงูููุฑุฑ ุงูููุจู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุญุงูุงุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุฃู ูููู ุชุฃุฎูุฑ ููุฏุฉ ุชุตู ุฅูู 10 ุซุงููุฉ. ุณูุญุฏุซ ูุตุฏุฑ ุชุฃุฎูุฑ ุขุฎุฑ ุฅุฐุง ูุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุธุฑ ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ. ุฃูููุง ุญุฏุซ ุงูุชุฃุฎูุฑ ุ </font><font style="vertical-align: inherit;">ูู ูุชููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุดุฑูุท</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุบุงุก </font><i><font style="vertical-align: inherit;">foo</font></i><font style="vertical-align: inherit;"> . ููู ูู ุจุนุถ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงุณุชุฎุฏุงู </font><b><font style="vertical-align: inherit;">ููุชุจุงุช </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Sokolovsky</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast_io ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงุณุชุฎุฏุงู sleep (0):</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-comment"><span class="hljs-comment">#  -  10 secs await asyncio.sleep(10) async def bar(loop): foo_instance = foo() #   coro loop.create_task(foo_instance) #    asyncio.cancel(foo_instance) await asyncio.sleep(0) #   </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูุนูู ูุฐุง ุฃูุถูุง ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุตุฏุงุฑ uasyncio v2.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ูู ูุนุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coroutine ูุนูููุง </font><font style="vertical-align: inherit;">) </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ููุชุธุฑ I / O. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุซ ุงูุณููู ุงูุฐู ูุฏ ููุงุฌุฆ ุงูุฅููุงู ุนูุฏูุง ููุชููุน ุฅูุบุงุก coroutine ุงูุฐู ูุชู ุชุดุบููู ุจูุงุณุทุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">create_task</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ูุถุน ุงูุงุณุชุนุฏุงุฏ. </font><font style="vertical-align: inherit;">ุงููุธุฑ ูู ูุฐุง ุงูููุชุทู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-comment"><span class="hljs-comment">#  -  10 secs await asyncio.sleep(10) async def foo_runner(foo_instance): await foo_instance print('   ') async def bar(loop): foo_instance = foo() loop.create_task(foo_runner(foo_instance)) #    asyncio.cancel(foo_instance)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ </font><font style="vertical-align: inherit;">ุฅูุบุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุชุชู ุฅุฒุงูุชู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงููุฌุฏูู ุ </font><font style="vertical-align: inherit;">ูุฃูู ููุชูุฑ ุฅูู </font><font style="vertical-align: inherit;">ุจูุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุฑุฌุงุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><font style="vertical-align: inherit;">ูุง ูุณุชุฃูู </font><font style="vertical-align: inherit;">ุฅุฌุฑุงุก ุงูุงุณุชุฏุนุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo_runner</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุจุฏูุง. </font><font style="vertical-align: inherit;">ููุตู ุฏุงุฆููุง ุจุงุณุชุจุนุงุฏ ุงูุงุณุชุซูุงุก ุงูููุฌูุฏ ูู ุฃูุตู ูุทุงู ูููุธููุฉ ููุชุฑุงุฌุน:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> my_coro <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> asyncio.CancelledError: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ </font><font style="vertical-align: inherit;">ูุง ูุญุชุงุฌ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my_coro</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุงูุงุณุชุซูุงุก ุ ุญูุซ ุณูุชู ูุดุฑู ุนูู ููุงุฉ ุงูุงุชุตุงู </font><i><font style="vertical-align: inherit;">ูุงูุชูุงุทู</font></i><font style="vertical-align: inherit;"> ููุงู.</font></font><br><br>  ุงููุฐูุฑุฉ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุณุชุฎุฏู ุฃุณุงููุจ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุจุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coroutine ุชูููุงุช ุนูุฏ ุงุณุชุฎุฏุงู ุฌุฏููุฉ coroutine. ูุฐุง ูููุถ ุฌุฏููุฉ ุ ููุง ุงุถุทุฑ coroutine ูุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ุญุชู ูู ูู ููู ูู ุงูููุฑุฑ. ูุฏ ูููู ููุฐุง ุนูุงูุจ ุบูุฑ ูุฑุบูุจ ูููุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.2 Coroutines ูุน ูููุฉ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุฉ ุชูููุฐูุง ุจุงุณุชุฎุฏุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทุฑู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.wait_for ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.wait_for_ms ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฃููุง ุชุฃุฎุฐ coroutine ูุงููููู ูู ุซูุงู ุฃู ูููู ุซุงููุฉ ุ ุนูู ุงูุชูุงูู ุ ููุณุงุฆุท. ูู ุญุงูุฉ ุงูุชูุงุก ุงููููุฉ ุ </font><font style="vertical-align: inherit;">ุณูุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑุญ TimeoutError</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู coroutine ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pend_throw</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฌุจ ุงูุชุดุงู ูุฐุง ุงูุงุณุชุซูุงุก ูู ูุจู ุงููุณุชุฎุฏู ุฃู ุงููุชุตู. </font><font style="vertical-align: inherit;">ูุนุฏ ูุฐุง ุถุฑูุฑููุง ููุณุจุจ ุงูููุถุญ ุฃุนูุงู: ุฅุฐุง ุงูุชูุช ุงููููุฉ ุ ูุณูุชู ุฅูุบุงุคูุง. </font><font style="vertical-align: inherit;">ูุง ูู ูุชู ุงูุชุดุงู ุงูุฎุทุฃ ูุฅุนุงุฏุชู ุ ูุฅู ุงูุทุฑููุฉ ุงููุญูุฏุฉ ุงูุชู ูุณุชุทูุน ุงููุชุตู ูู ุฎูุงููุง ูุชุงุจุนุฉ ุงูุงุณุชุซูุงุก ููุณู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชู ุงูุชุดุงู ุงูุงุณุชุซูุงุก ุจูุงุณุทุฉ coroutine ุ ูุงู ูุฏู ุฅุฎูุงูุงุช ุบูุฑ ูุงุถุญุฉ ุฅุฐุง ูู ูุชู ุงูุงุณุชุซูุงุก ูู ุงููุทุงู ุงูุฎุงุฑุฌู ุ ููุง ูู ููุถุญ ุฃุฏูุงู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">forever</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: print(<span class="hljs-string"><span class="hljs-string">'Starting'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep_ms(<span class="hljs-number"><span class="hljs-number">300</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Got here'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> asyncio.TimeoutError: print(<span class="hljs-string"><span class="hljs-string">'Got timeout'</span></span>) <span class="hljs-comment"><span class="hljs-comment"># And return async def foo(): await asyncio.wait_for(forever(), 5) await asyncio.sleep(2) loop = asyncio.get_event_loop() loop.run_until_complete(foo())</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏูุงู ูู ุฐูู ุ ููููู ุงุนุชุฑุงุถ ูุธููุฉ ุงูุงุชุตุงู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">forever</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Starting'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep_ms(<span class="hljs-number"><span class="hljs-number">300</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Got here'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait_for(forever(), <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> asyncio.TimeoutError: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> print(<span class="hljs-string"><span class="hljs-string">'Timeout elapsed.'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) loop = asyncio.get_event_loop() loop.run_until_complete(foo())</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uasyncio v2.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููุทุจู ูุฐุง ุนูู </font><b><font style="vertical-align: inherit;">ููุชุจุงุช </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Sokolovsky</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast_io</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุจุฏุฃ coroutine ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ asyncio.sleep (t)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุน ุชุฃุฎูุฑ ุทููู t ุ ููู ุชุชู ุฅุนุงุฏุฉ ุชุดุบูู coroutine ุญุชู ุชูุชูู ุตูุงุญูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุญุงูุฉ ุงููุถุงุก ุงููููุฉ ูุจู ุงูุชูุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุญุฏุซ TimeoutError</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู coroutine - ุฃู ุนูุฏูุง ุชูุชูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุงูููุช ุงูุญูููู ููู ููุธูุฑ ุงููุชุตู ุ </font><font style="vertical-align: inherit;">ุณูุชู ุชุฃุฎูุฑ </font><font style="vertical-align: inherit;">ุงุณุชุฌุงุจุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimeoutError ุงูุฎุงุตุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฐุง ููููุง ููุชุทุจูู ุ ููู ุจุฅูุดุงุก ุชุฃุฎูุฑ ุทููู ุฃุซูุงุก ุงูุชุธุงุฑ ูุชุฑุฉ ูุตูุฑุฉ ูู ุงูุญููุฉ. coroutine</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asyn.sleep</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏุนู ูุฐุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 ุงูุชูุงุนู ูุน ุงููุนุฏุงุช</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅู ุฃุณุงุณ ุงูุชูุงุนู ุจูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุญุฏุงุซ uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุฃุญุฏุงุซ ุบูุฑ ุงููุชุฒุงููุฉ ุงูุฎุงุฑุฌูุฉ ูู ุงูุงูุชุฑุงุน. ูุฏ ุชุณุชุฎุฏู ุงูุฃุฌูุฒุฉ ุงูุชู ุชุชุทูุจ ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ ููุงุทุนุฉ. ููู ุงูุชูุงุนู ุจูู ุฑูุชูู ุงูููุงุทุนุฉ (ISR) ู coroutine ุงููุณุชุฎุฏู ุณูู ูุนุชูุฏ ุนูู ุงุณุชุทูุงุนุงุช ุงูุฑุฃู. ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ูููู ISR ุจุงุณุชุฏุนุงุก </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุชุนููู ุนูุงูุฉ ุนููููุฉ ุ ูู ุญูู ูููู coroutine ูู ุงูุชุธุงุฑ ูุชูุฌุฉ ูุง ุจุงุณุชูุตุงุก ูุงุฆู ูู ูู ูุฑุฉ ูุชู ูููุง ุฌุฏููุฉ ุทูุจ ูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฅุฌุฑุงุก ุงูุงุณุชุฌูุงุจ ุจุทุฑููุชูู ุ ุตุฑูุญุฉ ุฃู ุถูููุฉ. ูุชู ุงูุฃุฎูุฑ ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูู I / O</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขููุฉุ ููู ูุธุงู ูุชุฏูู ุงูุฃุฌูุฒุฉ ูุซู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UART</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุขุฎุฐ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุฃุจุณุท ุงุณุชุทูุงุน ุตุฑูุญ ุ ูุฏ ูุชููู ุงูููุฏ ุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poll_my_device</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> my_flag <span class="hljs-comment"><span class="hljs-comment">#   ISR while True: if my_flag: my_flag = False # service the device await asyncio.sleep(0)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุนูุงูุฉ ุนููููุฉ ุ ููููู ุงุณุชุฎุฏุงู ูุชุบูุฑ ูุซูู ููุฆุฉ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุญุฏุงุซ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ูุซูู ููุฆุฉ ุชุณุชุฎุฏู ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ููุงูุด ูุณุญ ูุงุถุญ ุฃุฏูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชููู ุงูุงุณุชูุตุงุก ุงูุถููู ูู ุชุทููุฑ ุจุฑูุงูุฌ ุชุดุบูู ูุนูู ูุฌูุงุฒ ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ ูุชุฏูู ุ ูุซู </font><i><font style="vertical-align: inherit;">ููุจุณ </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UART</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font><i><font style="vertical-align: inherit;">ุชูุงุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ</font></i><font style="vertical-align: inherit;"> ุ ุงูุฐู ูุณุชูุตู ุงูุฃุฌูุฒุฉ ุจุงุณุชุฎุฏุงู ูุธุงู </font><i><font style="vertical-align: inherit;">select.poll </font></i><b><font style="vertical-align: inherit;">Python</font></b><font style="vertical-align: inherit;"> : ูุธุฑูุง ูุฃู ุงูุงูุชุฑุงุน ูุชู ุฅุฌุฑุงุคู ูู C ุ ููู ุฃุณุฑุน ูุฃูุซุฑ ููุงุกุฉ ูู ุงุณุชุทูุงุน ูุงุถุญ. ุชูุช ููุงูุดุฉ ุงุณุชุฎุฏุงู ุงูุฏูู I / O ูู ุงููุณู 6.3.</font></font><i><font style="vertical-align: inherit;"></font></i> <i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i> <b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ููุนุงููุชู ุ ูููุฑ ุงูุงุณุชูุตุงุก ุงูุถููู ููุฒุฉ ูุฃุณุฑุน ุจุฑุงูุฌ ุชุดุบูู ุฃุฌูุฒุฉ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ: ูููู ุฅูุดุงุก ุจุฑุงูุฌ ุชุดุบูู ุฏูู ููุนุฏูุฏ ูู ุงูุฃุฌูุฒุฉ ุงูุชู ูุง ุชุนุชุจุฑ ุนุงุฏุฉู ุฃุฌูุฒุฉ ุฏูู. ุชูุช ููุงูุดุฉ ูุฐุง ุจูุฒูุฏ ูู ุงูุชูุตูู ูู ุงููุณู 6.4. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1 ูุดููุงุช ุงููุฒุงููุฉ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุงูุงุณุชุทูุงุนุงุช ุงูุตุฑูุญุฉ ูุงูุถูููุฉ ุชุณุชูุฏ ุญุงูููุง ุฅูู ุงูุชุฎุทูุท ุงูุฏูุฑู. ุงูุชุฑุถ ุฃู I / O ูุนูู ูู ููุช ูุงุญุฏ ูุน coroutines N ูุฎุตุตุฉ ุ ูู ูููุง ูุนูู ูุน ุตูุฑ ุชุฃุฎูุฑ. ุนูุฏูุง ูุชู ุชูุฏูู I / O ุ ุณูุชู ุจุนุฏ ุฐูู ุงูุงุณุชุทูุงุน ุจูุฌุฑุฏ ุฌุฏููุฉ ุฌููุน ุนูููุงุช ุงููุณุชุฎุฏู. ูุฌุจ ูุฑุงุนุงุฉ ุงูุชุฃุฎูุฑ ุงูููุฏุฑ ุนูุฏ ุงูุชุตููู. ูุฏ ุชุชุทูุจ ูููุงุช I / O ุงูุชุฎุฒูู ุงููุคูุช ุ ูุน ุชูููุฑ ูุนุฏุงุช ISR ูู ุงูููุช ุงููุนูู ูู ุงููุฎุงุฒู ุงููุคูุชุฉ ู coroutines ุ ูููุก ุฃู ุชุญุฑูุฑ ุงููุฎุงุฒู ุงููุคูุชุฉ ูู ููุช ุฃุจุทุฃ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุถุฑูุฑู ุฃูุถูุง ุงูุชูููุฑ ูู ุฅููุงููุฉ ุชุฌุงูุฒ ุฐูู: ูุฐุง ูู ุงูุญุงู ุนูุฏูุง ูุญุฏุซ ุดูุก ูุชู ุงุณุชุฌูุงุจู ุจูุงุณุทุฉ coroutine ุฃูุซุฑ ูู ูุฑุฉ ูุจู ุฃู ูุชู ุงูุชุฎุทูุท ูู ุจุงููุนู ุจูุงุณุทุฉ coroutine.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูุฉ ุชูููุช ุฃุฎุฑู ูู ุฏูุฉ ุงููููู. ุฅุฐุง ูุงูุช ุงููุถุงูุง coroutine</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep_ms ( t ) <span class="hljs-comment"><span class="hljs-comment">#  </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ุชุนููู ุงูุชูููุฐ ููุฏุฉ ูุง ุชูู ุนู t ms. ูุฏ ูููู ุงูุชุฃุฎูุฑ ุงููุนูู ุฃูุจุฑ ูู t ุ ูุงูุฐู ูุนุชูุฏ ุนูู ุชุญููู ุงููุธุงู ุงูุญุงูู. ุฅุฐุง ูุงู ููุงู ุดุฑูุงุช ุฃุฎุฑู ูู ูุฐุง ุงูููุช ุชูุชุธุฑ ุงูุงูุชูุงุก ูู ุงูุชุฃุฎูุฑ ุบูุฑ ุงูุตูุฑ ุ ูุณูุชู ุฌุฏููุฉ ุงูุณุทุฑ ุงูุชุงูู ุนูู ุงูููุฑ ููุชูููุฐ. ูููู ุฅุฐุง ูุงูุช ุดุฑูุงุช ุฃุฎุฑู ูุง ุชุฒุงู ุชูุชุธุฑ ุงูุชูููุฐ (ุฅูุง ูุฃููุง ุชุณุจุจุช ูู ุชุฃุฎูุฑ ุตูุฑู ุฃู ุจุณุจุจ ุงููุถุงุก ููุชูู ุฃูุถูุง) ุ ููุฏ ูููู ูู ุงูููุฑุฑ ุชูููุฐูุง ูู ููุช ูุจูุฑ. ูุฐุง ููุฏู ุนุฏู ุงููููู ุงูุชุฒุงูู ูู </font><font style="vertical-align: inherit;">ูุธุงุฆู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sleep ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sleep_ms ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููู ุญุณุงุจ ูููุฉ ุงูุญุงูุฉ ุงูุฃุณูุฃ ููุฐุง ุงููุงุฆุถ ูู ุฎูุงู ุฌูุน ููู ููุช ุงูุชุดุบูู ูุฌููุน ูุฐู coroutines ูุชุญุฏูุฏ ููุช ุฅุฑุณุงู ุงูุญุงูุฉ ุงูุฃุณูุฃ ุฅูู ุงููุฌุฏูู.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุตุฏุงุฑ </font><b><font style="vertical-align: inherit;">fast_io</font></b><font style="vertical-align: inherit;"> ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐุง ุงูุณูุงู ุทุฑููุฉ ููุชุฃูุฏ ูู ุฃู ุชุฏูู I / O ุณูุชู ุงุณุชุทูุงุนู ูู ูู ุชูุฑุงุฑ ูู ุงููุฌุฏูู. ูู ุงููุฃููู ุฃู </font><font style="vertical-align: inherit;">ููุจู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณูู </font><font style="vertical-align: inherit;">ุงูุชุนุฏููุงุช ุฐุงุช ุงูุตูุฉ ูู ุงูููุช ุงูููุงุณุจ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2 ุงุณุชุฌูุงุจ ุงูุฃุฌูุฒุฉ ุจุงุณุชุฎุฏุงู coroutines</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูู ุงูุฃุณููุจ ุงูุจุณูุท ุงูุฃูุซุฑ ููุงุกูุฉ ููุฃุฌูุฒุฉ ุงูุชู ูููู ุงุณุชุฌูุงุจูุง ุจุณุฑุนุฉ ููุฎูุถุฉ ูุณุจููุง. ูุฐุง ูุฑุฌุน ูู ุงูููุงู ุงูุฃูู ุฅูู ุญูููุฉ ุฃู ุงูุงุณุชูุตุงุก ุจูุงุตู ุงุณุชูุตุงุก ูุตูุฑ (ุฃู ุตูุฑ) ูููู ุฃู ูุคุฏู ุฅูู ุญูููุฉ ุฃู coroutine ูุณุชููู ููุชูุง ูููุนุงูุฌ ุฃูุซุฑ ููุง ูู ูุฑุบูุจ ููู ูููููุน ูู ุงููุงุตู ุงูุฒููู. </font><font style="vertical-align: inherit;">ููุถุญ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุซุงู </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apoll.py</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ุงูุฃุณููุจ ุนู ุทุฑูู ุงูุงุณุชุนูุงู ุนู ูููุงุณ ุงูุชุณุงุฑุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ูุงุตู ูู 100 ูููู ุซุงููุฉ. ูููุฐ ุงูุชุตููุฉ ุงูุจุณูุทุฉ ูุชุฌุงูู ุงูุถูุถุงุก ุ ููุทุจุน ุฑุณุงูุฉ ูู ุซุงููุชูู ูู ุญุงูุฉ ุนุฏู ุญุฏูุซ ุญุฑูุฉ. </font><font style="vertical-align: inherit;">ูููุฑ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุซุงู </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aswitch.py</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฑุงูุฌ ุชุดุบูู ูุฃุฌูุฒุฉ ุงูุชุจุฏูู ูุฃุฌูุฒุฉ ุงูุฃุฒุฑุงุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ููู ูุซุงู ูุจุฑูุงูุฌ ุงูุชุดุบูู ูุฌูุงุฒ ูุงุฏุฑ ุนูู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ. ูุณูููุฉ ุงูุงุฎุชุจุงุฑ ุ ูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UART 4 โโุจูุญุงูุงุฉ ุงูุฌูุงุฒ ุงูุดุฑุทู. ูููุฐ ุงูุณุงุฆู </font><b><i><font style="vertical-align: inherit;">RecordOrientedUart</font></i></b><font style="vertical-align: inherit;"> Class</font></font><b><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุญูุซ ูุชู ุชูููุฑ ุงูุจูุงูุงุช ูู ุณุฌูุงุช ูุชุบูุฑุฉ ุงูุทูู ุชุชููู ูู ูุซููุงุช ุงูุจุงูุช. ูุถูู ุงููุงุฆู ูุญุฏุฏูุง ูุจู ุฅุฑุณุงู ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ูุชุฎุฒูููุง ูุคูุชูุง ุญุชู ูุชู ุชููู ูุญุฏุฏ ุฅุถุงูู. ูุฐุง ูุฌุฑุฏ ุนุฑุถ ุชุฌุฑูุจู ูุบูุฑ ูุนุงู ูุงุณุชุฎุฏุงู UART ููุงุฑูุฉ ุจุชุฏูู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุธูุงุฑ ุงูููู ุบูุฑ ุงููุชุฒุงูู ุ ููุชุฑุถ ุฃู ุงูุฌูุงุฒ ุงูุฐู ุชูุช ูุญุงูุงุชู ูุฏูู ูุณููุฉ ููุชุญูู ูู ุงูุชูุงู ุนูููุฉ ุงูููู ูุฃู ุงูุชุทุจูู ูุชุทูุจ ููุง ุงูุงูุชุธุงุฑ. ูุง ููุฌุฏ ุฃู ูู ุงูุงูุชุฑุงุถุงุช ุตุญูุญ ูู ูุฐุง ุงููุซุงู ุ ููู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฒูููุง ุจุงูุชุธุงุฑ asyncio.sleep (0.1)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุก ุ ูุง ุชูุณ ุชูุตูู ูุฎุฑุฌุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> X1 ู X2 (UART Txd ู Rxd)</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pyb <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UART <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RecordOrientedUart</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">:</span></span> DELIMITER = <span class="hljs-string"><span class="hljs-string">b'\0'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.uart = UART(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">9600</span></span>) self.data = <span class="hljs-string"><span class="hljs-string">b''</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__iter__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Not __await__ issue #2678 data = b'' while not data.endswith(self.DELIMITER): yield from asyncio.sleep(0) # ,  : while not self.uart.any(): yield from asyncio.sleep(0) # timing may mean this is never called data = b''.join((data, self.uart.read(self.uart.any()))) self.data = data async def send_record(self, data): data = b''.join((data, self.DELIMITER)) self.uart.write(data) await self._send_complete() #          #        await asyncio.sleep(0) async def _send_complete(self): await asyncio.sleep(0.1) def read_record(self): # Synchronous: await the object before calling return self.data[0:-1] # Discard delimiter async def run(): foo = RecordOrientedUart() rx_data = b'' await foo.send_record(b'A line of text.') for _ in range(20): await foo #  coros       foo rx_data = foo.read_record() print('Got: {}'.format(rx_data)) await foo.send_record(rx_data) rx_data = b'' loop = asyncio.get_event_loop() loop.run_until_complete(run())</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3 ุงุณุชุฎุฏุงู ุขููุฉ ุงูุชุฏูู ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุถุญ ุงููุซุงู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช ุงููุชุฒุงููุฉ ุนูู UART ูุงุญุฏ ูู ุงููุนุงูุฌ ุงูุตุบุฑู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุก ุ ูู ุจุชูุตูู ูุฎุฑุฌุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> X1 ู X2 (UART Txd ู Rxd)</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pyb <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UART uart = UART(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">9600</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sender</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> swriter = asyncio.StreamWriter(uart, {}) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> swriter.awrite(<span class="hljs-string"><span class="hljs-string">'Hello uart\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receiver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> sreader = asyncio.StreamReader(uart) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> sreader.readline() print(<span class="hljs-string"><span class="hljs-string">'Received'</span></span>, res) loop = asyncio.get_event_loop() loop.create_task(sender()) loop.create_task(receiver()) loop.run_forever()</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุนุซูุฑ ุนูู ุฑูุฒ ุงูุฏุนู ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__init__.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font><font style="vertical-align: inherit;">ููุชุจุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุขููุฉ ุชุนูู ุจุดูู ุฌูุฏ ูุซู ุจุฑูุงูุฌ ุชุดุบูู ุฌูุงุฒ (ููุชูุจ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุชููุฐ ุงูุทุฑู ุงูุชุงููุฉ: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IOCTLุ ูุฑุงุกุฉุ ูููู readline</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุงุจุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงููุณู 6.4: ูุชุงุจุฉ ุจุฑูุงูุฌ ุชุดุบูู ุฌูุงุฒ ุงูุฌุฑู ููุดู ุชูุงุตูู ุญูู ููููุฉ ูุชุงุจุฉ ุจุฑุงูุฌ ุงูุชุดุบูู ูุฐู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุซูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู UART ุชููู ุงูุจูุงูุงุช ูู ุฃู ููุช. ุชููู ุขููุฉ I / O ุงููุชุฏููุฉ ุจุงูุชุญูู ูู ุงูุญุฑูู ุงููุงุฑุฏุฉ ุงููุนููุฉ ูููุง ุชููู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ูู ุงูุชุญูู. ุนูุฏูุง ูุชู ุชุดุบูู coroutine ุ ุงูุฑูุชูู ุงูููุงุทุนุฉ ุงูููุงุทุนุฉ ุงูุฃุญุฑู ุงููุงุฑุฏุฉุ ุณูุชู ุญุฐููุง ุนูุฏูุง ููุณุญ coroutine ุงูุทุฑูู ุฅูู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ. ูุฐูู ุ ูุฌุจ ุชุตููู ุชุทุจููุงุช UART ุจุญูุซ ูููู coroutines ุงูููุช ุจูู ุนูููุงุช ุงูููู ุฅูู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ูู ุฃุฌู ุชุฌูุจ ุชุฌุงูุฒุงุช ุงููุฎุฒู ุงููุคูุช ูููุฏุงู ุงูุจูุงูุงุช. ูููู ุชุญุณูู ูุฐุง ุจุงุณุชุฎุฏุงู ูุฎุฒู ูุคูุช ุฃูุจุฑ ูุฑุงุกุฉ UART ุฃู ูุนุฏู ุจูุงูุงุช ุฃูู. ุจุฏูุงู ูู ุฐูู ุ ุณูููุฑ ุงูุชุญูู ูู ุชุฏูู ุงูุฃุฌูุฒุฉ ุญูุงู ุฅุฐุง ูุงู ูุตุฏุฑ ุงูุจูุงูุงุช ูุฏุนูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3.1 ูุซุงู ุนูู UART ุณุงุฆู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฑูุงูุฌ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auart_hd.py</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถุญ ุทุฑููุฉ ุงุชุตุงู ุจุฌูุงุฒ ุฃุญุงุฏู ุงูุงุชุฌุงู ุ ูุซู ุฌูุงุฒ ูุณุชุฌูุจ ููุฌููุนุฉ ุฃูุงูุฑ AT modem. ูุดูุฑ ูุตุทูุญ "ูุตู ูุฒุฏูุฌ" ุฅูู ุฃู ุงูุฌูุงุฒ ูุง ูุฑุณู ุฃุจุฏูุง ุจูุงูุงุช ุบูุฑ ูุทููุจุฉ: ูุชู ุชูููุฐ ุนูููุงุช ุงูููู ุฏุงุฆููุง ุงุณุชุฌุงุจุฉู ูุฃูุฑ ุชู ุงุณุชูุงูู ูู ุงูุณูุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ูุญุงูุงุฉ ุงูุฌูุงุฒ ุนู ุทุฑูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน </font><b><font style="vertical-align: inherit;">ุงุชุตุงููู ุณููููู</font></b><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฌูุจ ุงูุฌูุงุฒ (ุงููุจุณุท ุฌุฏูุง) ุงููุถุงูุงุฉ ูุฃู ุฃูุฑ ุนู ุทุฑูู ุฅุฑุณุงู ุฃุฑุจุนุฉ ุณุทูุฑ ูู ุงูุจูุงูุงุช ูุน ุชููู ูุคูุช ุจูู ูู ููููุง ููุญุงูุงุฉ ุงููุนุงูุฌุฉ ุงูุจุทูุฆุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุณู ุงููุนุงูุฌ ุฃูุฑูุง ุ ูููู ูุง ูุนุฑู ููุฏููุง ุนุฏุฏ ุตููู ุงูุจูุงูุงุช ุงูุชู ุณูุชู ุฅุฑุฌุงุนูุง. ุฅูู ูุจุฏุฃ ูุคูุช ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุฐู ูุชู ุฅุนุงุฏุฉ ุชุดุบููู ูู ูู ูุฑุฉ ูุชู ูููุง ุชููู ุณุทุฑ. ุนูุฏ ุงูุชูุงุก ุงููููุช ุ ูู ุงูููุชุฑุถ ุฃู ูููู ุงูุฌูุงุฒ ูุฏ ุงูุชูู ุงูุฅุฑุณุงู ููุชู ุฅุฑุฌุงุน ูุงุฆูุฉ ุงูุฎุทูุท ุงููุณุชููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฃูุถูุง ุฅุธูุงุฑ ุญุงูุฉ ูุดู ุงูุฌูุงุฒ ุ ูุงูุชู ูุชู ุชุญููููุง ุนู ุทุฑูู ุชุฎุทู ุงูุฅุฑุณุงู ูุจู ุงูุชุธุงุฑ ุงูุฑุฏ. ุจุนุฏ ุงูุชูุงุก ุงููููุฉ ุ ูุชู ุฅุฑุฌุงุน ูุงุฆูุฉ ูุงุฑุบุฉ. ุงูุธุฑ ุงูุชุนูููุงุช ุฑูุฒ ููุฒูุฏ ูู ุงูุชูุงุตูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4 ุชุทููุฑ ุชุฏูู (ุงูุณุงุฆููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชุฑูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุญุฏุฉ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุงุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุขููุฉ ( </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุฑ I / O</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ููุณูุทุฑุฉ ุนูู ุนูููุฉ ุชุฏูู I / O ุงูุฃุฌูุฒุฉ ูุซู UART ูููุงุจุณ ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุจุณ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). ูููู ุงุณุชุฎุฏุงู ูุฐู ุงูุขููุฉ ุจูุงุณุทุฉ ุจุฑุงูุฌ ุชุดุบูู ุฃู ุฌูุงุฒ ุชู ุงุณุชุทูุงุน ุขุฑุงุฆู ุจุงูุชุธุงู ุนู ุทุฑูู ุชูููุถ ุงููุฌุฏูู ุงูุฐู ูุณุชุฎุฏู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญุฏูุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุงุณุชูุตุงุก ุนู ุงุณุชุนุฏุงุฏ ุฃู ุฃุฌูุฒุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. ูุฐุง ุฃูุซุฑ ูุงุนููุฉ ูู ุฅุฌุฑุงุก ุงูุนุฏูุฏ ูู ุนูููุงุช coroutine ุ ุญูุซ ุชููู ูู ูููุง ุจุงุณุชุทูุงุนุงุช ุงูุฌูุงุฒ ุ ููุฑุฌุน ุฐูู ุฌุฒุฆููุง ุฅูู ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุชูุจ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฃูุถูุง ุจุณุจุจ ุชุฃุฌูู coroutine ุงูุฐู ูููู ุจุฅุฌุฑุงุก ุงูุงุณุชูุตุงุก ุญุชู ูุนูุฏ ุงููุงุฆู ุงูุฐู ุชู ุงุณุชุทูุงุนู ุฅูู ุญุงูุฉ ุฌุงูุฒุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถู ุฃู ูุฏุนู ุจุฑูุงูุฌ ุชุดุบูู ุงูุฌูุงุฒ ุงููุงุฏุฑ ุนูู ุฎุฏูุฉ ุขููุฉ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงููุชุฏูู ุงูุทุฑู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamReaderุ StreamWriter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฌุจ ุฃู ูููุฑ ุงูุฌูุงุฒ ุงููุงุจู ูููุฑุงุกุฉ ุฅุญุฏู ุงูุทุฑู ุงูุชุงููุฉ ุนูู ุงูุฃูู. ูุฑุฌู ููุงุญุธุฉ ุฃู ูุฐู ูู ุทุฑู ูุชุฒุงููุฉ. ุชุถูู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioctl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุงูุธุฑ ุฃุฏูุงู) ุฃู ูุชู ุงุณุชุฏุนุงุคูุง ููุท ุนูุฏ ุชููุฑ ุงูุจูุงูุงุช. ูุฌุจ ุฅุฑุฌุงุน ุงูุทุฑู ุจุฃุณุฑุน ููุช ูููู ุ ุจุงุณุชุฎุฏุงู ุฃูุจุฑ ูุฏุฑ ูููู ูู ุงูุจูุงูุงุช ุงููุชุงุญุฉ. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readline ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฑุฌุงุน ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูุฃุญุฑู ุ ุญุชู ุฃู ุญุฑู ุณุทุฑ ุฌุฏูุฏ. ูุทููุจ ุฅุฐุง ูุงู ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamReader.readline () </font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">read (n)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฑุฌุงุน ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูุฃุญุฑู ุ ููู ููุณ ุฃูุซุฑ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุทููุจ ูู ุญุงูุฉ ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamReader.read ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamReader.readexactly ()</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููุฑ ุจุฑูุงูุฌ ุงูุชุดุบูู ุงูุฐู ุชู ุฅูุดุงุคู ุงูุทุฑููุฉ ุงููุชุฒุงููุฉ ุงูุชุงููุฉ ูุน ุงูุฅุฑุฌุงุน ุงูููุฑู: </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุงุจุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงุณุชุฎุฏุงู ุงููุณุงุฆุท </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buf ุ off ุ sz</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุซ: </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงููุฎุฒู ุงููุคูุช ูููุชุงุจุฉ. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงูุฅุฒุงุญุฉ ูู ุงููุฎุฒู ุงููุคูุช ูู ุงูุญุฑู ุงูุฃูู ุฅูู ุงููุชุงุจุฉ. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฒ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงูุนุฏุฏ ุงููุทููุจ ูู ุงูุดุฎุตูุงุช ููุชุงุจุฉ. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ ุงูุฅุฑุฌุงุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุนุฏุฏ ุงูุฃุญุฑู ุงูููุชูุจุฉ ุจุงููุนู (ุฑุจูุง 1 ุฅุฐุง ูุงู ุงูุฌูุงุฒ ุจุทูุฆูุง). </font><font style="vertical-align: inherit;">ุชุถูู </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioctl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูู ูู ูุชู ุงุณุชุฏุนุงุคู ุฅูุง ุนูุฏูุง ูููู ุงูุฌูุงุฒ ุฌุงูุฒูุง ูุงุณุชูุจุงู ุงูุจูุงูุงุช.</font></font><br><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููุฑ ุฌููุน ุงูุฃุฌูุฒุฉ ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioctl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููู ุจุงุณุชูุตุงุก ุงููุนุฏุงุช ูุชุญุฏูุฏ ุญุงูุฉ ุชููุฑูุง. </font><font style="vertical-align: inherit;">ูุซุงู ูููุฐุฌู ูุจุฑูุงูุฌ ุชุดุบูู ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io MP_STREAM_POLL_RD = const(<span class="hljs-number"><span class="hljs-number">1</span></span>) MP_STREAM_POLL_WR = const(<span class="hljs-number"><span class="hljs-number">4</span></span>) MP_STREAM_POLL = const(<span class="hljs-number"><span class="hljs-number">3</span></span>) MP_STREAM_ERROR = const(<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyIO</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(io.IOBase)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#    def ioctl(self, req, arg): # see ports/stm32/uart.c ret = MP_STREAM_ERROR if req == MP_STREAM_POLL: ret = 0 if arg &amp; MP_STREAM_POLL_RD: if hardware_has_at_least_one_char_to_read: ret |= MP_STREAM_POLL_RD if arg &amp; MP_STREAM_POLL_WR: if hardware_can_accept_at_least_one_write_character: ret |= MP_STREAM_POLL_WR return ret</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ููู ูุตู </font><font style="vertical-align: inherit;">ูุชุฃุฎูุฑ ุงูุชุธุงุฑ </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MillisecTimer</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Class </font><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> utime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io MP_STREAM_POLL_RD = const(<span class="hljs-number"><span class="hljs-number">1</span></span>) MP_STREAM_POLL = const(<span class="hljs-number"><span class="hljs-number">3</span></span>) MP_STREAM_ERROR = const(<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MillisecTimer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(io.IOBase)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.end = <span class="hljs-number"><span class="hljs-number">0</span></span> self.sreader = asyncio.StreamReader(self) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__iter__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> self.sreader.readline() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, ms)</span></span></span><span class="hljs-function">:</span></span> self.end = utime.ticks_add(utime.ticks_ms(), ms) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readline</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">b'\n'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ioctl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, req, arg)</span></span></span><span class="hljs-function">:</span></span> ret = MP_STREAM_ERROR <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req == MP_STREAM_POLL: ret = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg &amp; MP_STREAM_POLL_RD: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> utime.ticks_diff(utime.ticks_ms(), self.end) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>: ret |= MP_STREAM_POLL_RD <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุชู ูููู ุงุณุชุฎุฏุงููุง ุนูู ุงููุญู ุงูุชุงูู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">timer_test</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( n )</span></span></span><span class="hljs-function">:</span></span> timer = ms_timer.MillisecTimer () <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> timer ( <span class="hljs-number"><span class="hljs-number">30</span></span> ) <span class="hljs-comment"><span class="hljs-comment">#  30 </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูููุงุฑูุฉ ูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณููุฉ </font><b><font style="vertical-align: inherit;">ุ ูุฅู</font></b><font style="vertical-align: inherit;"> ูุฐุง ุงูุชุทุจูู ูุง ููุฏู ุฃู ูุฒุงูุง ููุงุฑูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุชุธุงุฑ asyncio.sleep_ms ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููุฑ ุงุณุชุฎุฏุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast_io</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฃุฎูุฑุงุช ุฃูุซุฑ ุฏูุฉ ุจูุซูุฑ ูู ููุท ุงูุงุณุชุฎุฏุงู ุงูุนุงุฏู ุ ุนูุฏูุง ูุชููุน coroutines ุชุฃุฎูุฑ ุตูุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ุฌุฏููุฉ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูุฑุจุท ุญุฏุซ ูุน ุฑุฏ ุงุชุตุงู. ูุฐุง ุฃูุซุฑ ููุงุกุฉ ูู ุฏูุฑุฉ ุงูุงูุชุฑุงุน ุ ูุฃู ุงูุงูุชุฑุงุน ุบูุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุชู </font><font style="vertical-align: inherit;">ุนูุฏุฉ </font><i><font style="vertical-align: inherit;">ioctl</font></i><font style="vertical-align: inherit;"> ุฌุงูุฒุฉ. ุจุนุฏ ุฐูู ุ ูุชู ุชูููุฐ ุฑุฏ ุงุชุตุงู ุนูุฏูุง ุชุชุบูุฑ ุญุงูุฉ ุฑุฏ ุงูุงุชุตุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io MP_STREAM_POLL_RD = const(<span class="hljs-number"><span class="hljs-number">1</span></span>) MP_STREAM_POLL = const(<span class="hljs-number"><span class="hljs-number">3</span></span>) MP_STREAM_ERROR = const(<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PinCall</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(io.IOBase)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, pin, *, cb_rise=None, cbr_args=</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span><span class="hljs-function"><span class="hljs-params">, cb_fall=None, cbf_args=</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> self.pin = pin self.cb_rise = cb_rise self.cbr_args = cbr_args self.cb_fall = cb_fall self.cbf_args = cbf_args self.pinval = pin.value() self.sreader = asyncio.StreamReader(self) loop = asyncio.get_event_loop() loop.create_task(self.run()) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> self.sreader.read(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, _)</span></span></span><span class="hljs-function">:</span></span> v = self.pinval <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> v <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self.cb_rise <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: self.cb_rise(*self.cbr_args) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">b'\n'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> v <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self.cb_fall <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: self.cb_fall(*self.cbf_args) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">b'\n'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ioctl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, req, arg)</span></span></span><span class="hljs-function">:</span></span> ret = MP_STREAM_ERROR <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req == MP_STREAM_POLL: ret = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg &amp; MP_STREAM_POLL_RD: v = self.pin.value() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> v != self.pinval: self.pinval = v ret = MP_STREAM_POLL_RD <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑุฉ ุฃุฎุฑู - ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณููุฉ </font><b><font style="vertical-align: inherit;">ุ</font></b><font style="vertical-align: inherit;"> ูุฏ ูููู ุงูุชุฃุฎูุฑ ุนุงููุงู. ุงุนุชูุงุฏูุง ุนูู ุชุตููู ุงูุชุทุจูู ุ </font><font style="vertical-align: inherit;">ูุฏ ูููู </font><font style="vertical-align: inherit;">ุฅุตุฏุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast_io</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุซุฑ ููุงุกุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฑูุงูุฌ ูุธุงูุฑุฉ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iorw.py</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธูุฑ ูุซุงู ูุงููุฉ. ูุฑุฌู ููุงุญุธุฉ ุฃูู ุงุนุชุจุงุฑุง ูู ูุชุงุจุฉ ูุฐู ุงูุณุทูุฑ ูู ุงููุณุคูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงู ุฎุทุฃุ ูุฃู ูู ุงูุฐู </font></font><a href="http://github.com/micropython/pull/3836" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุนูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ููุงู ุญูุงู. ูุชูุซู ุงูุญู ุงูุจุฏูู ูู ูุชุงุจุฉ ุจุฑูุงูุฌูู ูููุตููู ุ ุฃุญุฏููุง ูููุฑุงุกุฉ ููุท ูุงูุขุฎุฑ ูููุชุงุจุฉ ููุท. ูุงูุซุงูู ูู ุงุณุชุฎุฏุงู </font></font><a href="" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast_io</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุฐู ูุญู ูุฐู ุงููุดููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณููุฉ </font><b><font style="vertical-align: inherit;">ุ</font></b><font style="vertical-align: inherit;"> ูุชู ุชุฎุทูุท ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ </font></font><a href="http://github.com/micropython/micropython/issues/2664" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฏุฑุงู ูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5 ุงููุซุงู ุงููุงูู: aremote.py</font></font></b> <br><br> <a href="" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุตููู</font><a href="" rel="nofollow"><b><font style="vertical-align: inherit;"> ุจุฑูุงูุฌ ุงูุชุดุบูู</font></b></a><font style="vertical-align: inherit;"> ูุงุณุชูุจุงู / ูู ุชุดููุฑ ุงูุฅุดุงุฑุงุช ูู ุฌูุงุฒ ุงูุชุญูู ุนู ุจุนุฏ ุจุงูุฃุดุนุฉ ุชุญุช ุงูุญูุฑุงุก. ุณุงุฆู</font></font><a href="http://github.com/peterhinch/micropython-async/blob/master/nec_ir/aremote.py" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aremote.py ููุณู</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงูููุงุญุธุงุช ุงูุชุงููุฉ ูููุฉ ูููุง ูุชุนูู ุจุงุณุชุฎุฏุงู</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุฒุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุฌู ุงูููุงุทุนุฉ ุนูู ุฌูุฉ ุงูุงุชุตุงู ููุช ุชุบููุฑ ุงูุญุงูุฉ (ุจุงููููุฑูุซุงููุฉ) ูุชุนููู ุงูุญุฏุซ ุ ูุชุฎุทู ุงูููุช ุงูุฐู ุญุฏุซ ููู ุชุบููุฑ ุงูุญุงูุฉ ุงูุฃููู. ููุชุธุฑ coroutine ูุญุฏูุซ ูุง ุ ููุจูุบ ูุฏุฉ ุญุฒูุฉ ุงูุจูุงูุงุช ุ ุซู ูู ุชุดููุฑ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุจู ุงุณุชุฏุนุงุก ุฑุฏ ุงูุงุชุตุงู ุงููุญุฏุฏ ูู ูุจู ุงููุณุชุฎุฏู.</font><font style="vertical-align: inherit;">ูุชูุญ</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฑ ุงูููุช ููุซูู</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญุฏุซ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ูููู coroutine ุจุงูุชุนููุถ ุนู ุฃู</font><font style="vertical-align: inherit;">ุชุฃุฎูุฑ ุบูุฑ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุฒุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุชุนููู ูุชุฑุฉ ุงูุชุฃุฎูุฑ.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6.6 HTU21D ุงุณุชุดุนุงุฑ ุงูุจูุฆุฉ</font></font></b> <br><br> <a href="http://github.com/peterhinch/micropython-async/blob/master/nec_ir/aremote.py" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุงุฆู</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุฑ ุฑูุงูุฉ HTU21D ุงูููุงุณ ุงูุฏููู ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุงูุดุฑูุญุฉ ุฅูู ุญูุงูู 120 ูููู ุซุงููุฉ ูุชููู ููุงู ูู ุนูุงุตุฑ ุงูุจูุงูุงุช. ูุนูู ุจุฑูุงูุฌ ุงูุชุดุบูู ุจุดูู ุบูุฑ ูุชุฒุงูู ุ ุญูุซ ูุจุฏุฃ ูู ุงุณุชูุงู ูุงุณุชุฎุฏุงู</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุธุงุฑ asyncio.sleep (t)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจู ูุฑุงุกุฉ ุงูุจูุงูุงุช ุ ููููู ุจุชุญุฏูุซ ูุชุบูุฑุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ ุ ูุงูุชู ูููู ุงููุตูู ุฅูููุง ูู ุฃู ููุช ุ ููุง ูุชูุญ ุจุฏุก ุชุดุบูู coroutines ุฃุฎุฑู ุฃุซูุงุก ุชุดุบูู ุจุฑูุงูุฌ ุชุดุบูู ุงูุฑูุงูุฉ.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. ุงููุตุงุฆุญ ูุงูุฎุฏุน </font></font></b> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.1 ุงูุจุฑูุงูุฌ ูุชุฌูุฏ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุซ</font><b><font style="vertical-align: inherit;"> ุงูุชุฌููุฏ</font></b><font style="vertical-align: inherit;"> ุนุงุฏุฉู ูุฃู ุงููููุฉ ูุญุธูุฑุฉ ุจุฏูู ุงูุชูุงุฒ: ุณูุคุฏู ุฐูู ุฅูู ุชุฌููุฏ ุงููุธุงู ุจุฃูููู. ุนูุฏ ุงูุชุทููุฑ ุ ูู ุงููููุฏ ุฃู ูููู ูุฏูู coroutine ูุนูู ุจุดูู ุฏูุฑู ุนูู ุฅุถุงุกุฉ LED ุงููุฏูุฌุฉ. ูุฐุง ูููุฑ ุงูุชุฃููุฏ ุนูู ุฃู ุงููุฌุฏูู ูุง ูุฒุงู ููุฏ ุงูุชุดุบูู.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.2 ูุญูุธ uasyncio ุงูุญุงูุฉ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุจุฑุงูุฌ ุจุงุณุชุฎุฏุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู REPL ุ ูู ุจุฅุฌุฑุงุก ุฅุนุงุฏุฉ ุชุนููู ูุงุนูุฉ (ctrl-D) ุจูู ุงูุจุฏุงูุงุช. ูุธุฑูุง ูุญูููุฉ ุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุงูุธ ุนูู ุงูุญุงูุฉ ุจูู ุงูุจุฏุงูุงุช ุ ููุฏ ูุญุฏุซ ุณููู ุบูุฑ ูุชููุน ูู ุงูุจุฏุงูุฉ ุงูุชุงููุฉ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.3 ุฌูุน ุงูููุงูุฉ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู ุชูููุฐ coroutine ุนู ุทุฑูู ุชุญุฏูุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชูุฑุงุฏ gc ุฃููุงู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">gc.collect () gc.treshold ( gc.mem_free () // <span class="hljs-number"><span class="hljs-number">4</span></span> + gc.mem_alloc ())</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุช ููุงูุดุฉ ุงูุบุฑุถ ูู ูุฐุง </font></font><a href="http://docs.micropython.org/en/latest/reference/constrained.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุณู ุงููููุฉ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4 ุงูุงุฎุชุจุงุฑ ูู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุณุชุญุณู ุงูุชุฃูุฏ ูู ุฃู ุจุฑูุงูุฌ ุชุดุบูู ุงูุฌูุงุฒ ูุญุชูุธ ุจุงูุชุญูู ุนูุฏ ุงูุถุฑูุฑุฉ ุ ูุงูุฐู ูููู ุงูููุงู ุจู ูู ุฎูุงู ุชุดุบูู ูุณุฎุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ูู ุงููุณุฎ ุงูุชูุถูุญูุฉ ุงูููููุฉ ุงูุชู ุชุจุฏุฃ ุฏูุฑุฉ ุทุจุงุนุฉ ุงูุฑุณุงุฆู ูุงูุชุฃูุฏ ูู ุชุดุบูููุง ุฃุซูุงุก ูุชุฑุงุช ูุฌูุฏ ุจุฑูุงูุฌ ุงูุชุดุบูู ูู ูุถุน ุงูุงุณุชุนุฏุงุฏ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: print(<span class="hljs-string"><span class="hljs-string">'Roundrobin '</span></span>, n) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุซุงู ุนูู ููุน ุงูุฎุทุฑ ุงูุฐู ูุฏ ููุดุฃ ุ ูู ุงููุซุงู ุฃุนูุงู ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุช </font></font></i> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุงุจุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทุฑููุฉ </font><i><font style="vertical-align: inherit;">RecordOrientedUart </font></i><i><font style="vertical-align: inherit;">__await__</font></i><font style="vertical-align: inherit;"> ูู ุงูุฃุตู ุนูู ุงููุญู ุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__await__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> data = <span class="hljs-string"><span class="hljs-string">b''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> data.endswith(self.DELIMITER): <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.uart.any(): <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0</span></span>) data = <span class="hljs-string"><span class="hljs-string">b''</span></span>.join((data, self.uart.read(self.uart.any()))) self.data = data</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฌุฉ ูุฐูู ุ ูุชู ุชูููุฐ ุงูุชูููุฐ ุญุชู ูุชู ุงุณุชูุงู ุงูุณุฌู ุจุงููุงูู ุ ููุฐูู ุญูููุฉ ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uart.any ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฑุฌุน ุฏุงุฆููุง ุนุฏุฏูุง ุบูุฑ ุตูุฑู ูู ุงูุฃุญุฑู ุงููุณุชููุฉ. ุจุญููู ููุช ุงูููุงููุฉ ุ ุฑุจูุง ุชููู ุฌููุน ุงูุฃุญุฑู ูุฏ ุชู ุงุณุชูุงููุง ุจุงููุนู. ูููู ุญู ูุฐุง ุงููููู ุจุงุณุชุฎุฏุงู ุญููุฉ ุฎุงุฑุฌูุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__await__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> data = <span class="hljs-string"><span class="hljs-string">b''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> data.endswith(self.DELIMITER): <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment"># ,  : while not self.uart.any(): yield from asyncio.sleep(0) #        data = b''.join((data, self.uart.read(self.uart.any()))) self.data = data</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ูููู ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ุฃู ูุฐุง ุงูุฎุทุฃ ูู ููู ูุงุถุญูุง ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุฏ ุชู ุฅุฑุณุงููุง ุฅูู UART ุจุณุฑุนุฉ ุฃูู ุ ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุงุฎุชุจุงุฑ ุงูููุงุญุธุงุช. ูุฑุญุจุง ุจูู ูู ุฃูุฑุงุญ ุงูุจุฑูุฌุฉ ูู ุงูููุช ุงูุญูููู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5 ุฎุทุฃ ุดุงุฆุน</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ุชู ุชุนุฑูู ุฏุงูุฉ ุฃู ุทุฑููุฉ ุจูุงุณุทุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async def</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุซู ุชู ุงุณุชุฏุนุงุคูุง ูููุง ุจุนุฏ ููุง ูู ูุงูุช ููุงููุฉ ุนุงุฏูุฉ (ูุชุฒุงููุฉ) ุ </font><font style="vertical-align: inherit;">ูุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ MicroPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฑุณุงูุฉ ุฎุทุฃ. ูุฐุง ุญุณุจ ุงูุชุตููู. ุนุงุฏุฉ ูุง ูุคุฏู ูุฐุง ุฅูู ุญูููุฉ ุฃู ุงูุจุฑูุงูุฌ ุจุตูุช ูุง ูุนูู ุจุดูู ุตุญูุญ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># code loop.create_task(foo) #  1 1: foo     foo() #  2: .</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏู </font></font><a href="http://github.com/micropython-lib/pull/292" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฑุงุญ</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุฑุญ ุฅุตูุงุญ ุงููููู ูู ุงูุฎูุงุฑ 1 ุจุงุณุชุฎุฏุงู </font></font><a href="" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast_io</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชุญุงูู </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">check_async_code.py</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุดุงู ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงููุดููู ูููุง ููููุฑูุชููุงุช. ูู ููุชูุจ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุตูู ููุนูู ุนูู ุฌูุงุฒ ููุจููุชุฑ. ูุณุชุฎุฏู ูู ูุตูุต ููุชูุจุฉ ููููุง ููุฅุฑุดุงุฏุงุช ุงูููุถุญุฉ ูู ูุฐุง ุงูุฏููู ูุน coroutines ุงููุตุฑุญ ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async def</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงููุญุฏุฉ ุงูููุทูุฉ ุชุฃุฎุฐ ูุณูุทุฉ ูุงุญุฏุฉ ุ ุงููุณุงุฑ ุฅูู ููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุตุฏุฑ </font><font style="vertical-align: inherit;">(ุฃู - </font><b><font style="vertical-align: inherit;">help</font></b><font style="vertical-align: inherit;"> ).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุฃูู ุบูุฑ ููุฐุจ ุฅูู ุญุฏ ูุง ููููุตุฏ ุงุณุชุฎุฏุงูู ูู ููู ุตุญูุญ ุจูุงุกู ุ ูุงูุฐู ูุง ูุจุฏุฃ ุงูุชุฑุงุถููุง. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏู ุฃุฏุงุฉ ุ ูุซู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pylint ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุญูู ูู ุจูุงุก ุงูุฌููุฉ ุงูุนุงู ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pylint</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณ ูุฏููุง ูุฐุง ุงูุฎุทุฃ ุญุงูููุง). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณููุงุฑูู ููุชุฌ ุงูุฌุงุจูุงุช ูุงุฐุจุฉ. </font><font style="vertical-align: inherit;">ููููุง ููุฎุทุฉ ุ ูุฅู coroutines ูู ูุงุฆูุงุช ูู ุงููุณุชูู ุงูุฃูู ุ ูููู ููููุง ุฅูู ูุธุงุฆู ูุชุฎุฒูููุง ูู ููุงูู ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ุงุนุชูุงุฏูุง ุนูู ููุทู ุงูุจุฑูุงูุฌ ุ ููููู ุญูุธ ุงููุธููุฉ ุฃู ูุชูุฌุฉ ุชูููุฐูุง. </font><font style="vertical-align: inherit;">ูุง ูููู ููุจุฑูุงูุฌ ุงููุตู ุชุญุฏูุฏ ุงููุตุฏ. </font><font style="vertical-align: inherit;">ููุฏู ุฅูู ุชุฌุงูู ุงูุญุงูุงุช ุงูุชู ุชุจุฏู ุตุญูุญุฉ ุนูุฏ ุชุญุฏูุฏ ุงูุญุงูุงุช ุงูุฃุฎุฑู ุงูุชู ูุฌุจ ูุฑุงุนุงุชูุง. </font><font style="vertical-align: inherit;">ูููุชุฑุถ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุซ ูุชู ุงูุฅุนูุงู ุนู coroutine ุบูุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฒุงูู def</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">loop.run_until_complete(foo()) <span class="hljs-comment"><span class="hljs-comment">#   bar(foo) #     ,      bar(foo()) z = (foo,) z = (foo(),) foo() #  :   .</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฌุฏูุง ูููุฏุฉ ููุง ูู ุ ููู ุงูุชุญุณููุงุช ูุฑุญุจ ุจูุง ุฏุงุฆููุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6 ุงูุจุฑูุฌุฉ ูุน ูุขุฎุฐ ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุขุฎุฐ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงู ููุฌูู ุฃุณุงุณููู ูุจุฑูุฌุฉ ูุขุฎุฐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงูุชุฑุงุถููุง ุ ูุชู ุญุธุฑ ุงููุขุฎุฐ ุญุชู ุชูุชูู ุนูููุฉ ุงููุฑุงุกุฉ ุฃู ุงููุชุงุจุฉ ุงููุญุฏุฏุฉ. </font><font style="vertical-align: inherit;">ูุฏุนู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ุงูููุจุณ ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">select.poll</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุน ุงููุฌุฏูู ูู ุญุธุฑูุง. ูู ูุนุธู ุงูุญุงูุงุช ุ ุชููู ูุฐู ุงูุขููุฉ ุฃุณูู ูู ุงูุงุณุชุฎุฏุงู. ูููู ุงูุนุซูุฑ ุนูู ูุซุงู ููุนููู ูุฑูุฒ ุงูุฎุงุฏู ูู ุฏููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_server</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Userver</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏุงูุงุช ุชุทุจูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">select.poll</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงุณุชุนูุงู ุตุฑุงุญุฉ ูุฃุฎุฐ ุงูุฎุงุฏู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชุฎุฏู ูุขุฎุฐ ุงูุนููู ุจุดูู ุถููู ุจูุนูู ุฃู ูุญุฑู ุชุฏูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุชุฎุฏูู ูุจุงุดุฑุฉู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">socket.getaddrinfo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุธูุฑ ุญุงููุง. ุณูููู ุงูุญุฏ ุงูุฃุฏูู ููููุช ูู ูููุฐุฌ ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุ ูููู ุฅุฐุง ูุงู ุงูุจุญุซ ุนู DNS ูุทููุจูุง ุ ููุฏ ุชููู ูุชุฑุฉ ุงูุญุธุฑ ูุจูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุซุงููุฉ ูุจุฑูุฌุฉ ุงูููุจุณ ูู ุงุณุชุฎุฏุงู ูุขุฎุฐ ุงูุชูุตูู ุบูุฑ ุงููุญุฌูุจุฉ. ูุถูู ูุฐุง ุงูุชุนููุฏ ุ ูููู ุถุฑูุฑู ูู ุจุนุถ ุงูุชุทุจููุงุช ุ ุฎุงุตุฉู ุฅุฐุง ูุงู ุงูุงุชุตุงู ุนุจุฑ WiFi (ุงูุธุฑ ุฃุฏูุงู). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุชูุฑูุฑ (ูุงุฑุณ 2019) ุ ูุงู ุฏุนู TLS ูููุขุฎุฐ ุบูุฑ ุงููููุฏุฉ ููุฏ ุงูุชุทููุฑ. ูุถุนูุง ุงูุฏููู ุบูุฑ ูุนุฑูู (ุจุงููุณุจุฉ ูู).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุทูุจ ุงุณุชุฎุฏุงู ูุขุฎุฐ ุงูุชูุตูู ุบูุฑ ุงููููุฏุฉ ุจุนุถ ุงูุงูุชูุงู ุจุงูุชูุงุตูู. ูู ุญุงูุฉ ุญุฏูุซ ูุฑุงุกุงุช ุบูุฑ ูุงูุนุฉ ููุญุธุฑ ุจุณุจุจ ุฒูู ุงููุตูู ููุฎุงุฏู ุ ููุง ููุฌุฏ ูุง ูุถูู ุฅุนุงุฏุฉ ุฌููุน (ุฃู ุฃู) ุงูุจูุงูุงุช ุงููุทููุจุฉ. ูุจุงููุซู ุ ูุฏ ูุง ุชูุชูู ุงูุฅุฏุฎุงูุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ูุฌุจ ุฃู ุชููู ุทุฑู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุจุฅุฌุฑุงุก ุนูููุฉ ุญุธุฑ ุบูุฑ ูุชูุฑุฑุฉ ุญุชู ุชุชู ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงููุทููุจุฉ ุฃู ูุชุงุจุชูุง. ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุฏ ุชููู ููุงู ุญุงุฌุฉ ุฅูู ูููุฉ ููุชุนุงูู ูุน ุงููุทุงุน ุงูุฎุงุฏู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุถุงุนูุงุช ุงูุฃุฎุฑู ุชุชูุซู ูู ุฃู ูููุฐ ESP32 ูุฏูู ูุดุงูู ุชุชุทูุจ ุนูููุงุช ุชููู ุณูุฆุฉ ููุบุงูุฉ ููุชุดุบูู ุงูุฎุงูู ูู ุงูุฃุฎุทุงุก. ุฃูุง ูู ุชุฎุชุจุฑ ูุง ุฅุฐุง ูุงู ูุฐุง ูุง ูุฒุงู ูู ุงูุญุงู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฉ </font></font><a href="" rel="nofollow"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sock_nonblock.py</font></font></b></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถุญ ุงูุทุฑู ุงููุทููุจุฉ. ูุฐุง ููุณ ุนุฑุถูุง ุนููููุง ุ ููู ุงููุญุชูู ุฃู ุชุนุชูุฏ ุงููุฑุงุฑุงุช ุนูู ุงูุชุทุจูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6.1 ูุดุงูู ูุน ุดุจูุฉ WiFi </font></font></b> <font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ููุณุช</font></b></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุขููุฉ ุชุฏูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎูุงุฑ ุงูุฃูุถู ุนูุฏ ุงูุชุดุงู ุงููุทุงุน </font><b><font style="vertical-align: inherit;">ุดุจูุงุช</font></b><font style="vertical-align: inherit;"> WiFi. ููุฏ ูุฌุฏุช ุฃูู ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงู ูุขุฎุฐ ุงูุชูุตูู ุบูุฑ ุงููุญุธูุฑุฉ ูุชูููุฑ ุนูููุฉ ุขููุฉ ูู ุงููุดู ูุฅุนุงุฏุฉ ุงูุงุชุตุงู ุจุงูุนููู ูู ุญุงูุฉ ุญุฏูุซ ุฃุนุทุงู. </font><font style="vertical-align: inherit;">ูุตู </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง </font></font><a href="" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชูุฏ</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุดููุงุช ุงูุชู ูุงุฌูุชูุง ูู ุชุทุจููุงุช WiFi ุงูุชู ุชุจูู ุงูููุงุจุณ ููุชูุญุฉ ููุชุฑุงุช ุทูููุฉ ูุชุญุฏุฏ ุงูุญู. </font></font><br><br> <a href="http://guthub.com/peterhinch/micropython-mqtt" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pltcm</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฑ ุนููู MQTT ูุชุฒุงูู ููู ูููุฑ ุชูุงูู ุงูุฑุณุงุฆู ุฃุซูุงุก ูุดู WiFi. ููุตู ุฑุงุจุท ุชุณูุณูู ูุฒุฏูุฌ ุงูุงุชุฌุงู ุบูุฑ ูุชุฒุงูู ุจุณูุท ุจูู ุนููู ูุงุณููู ูุฎุงุฏู ุณููู ูุน ุชุณููู ุงูุฑุณุงูุฉ ูุถูููุฉ. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7 ูุณูุทุงุช ููุดุฆ ุญููุฉ ุงูุญุฏุซ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏ ูุญุฏุซ ุฎุทุฃ ุตุบูุฑ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ุญููุฉ ุญุฏุซ ูุน ุงูููู ุงูุชู ุชุฎุชูู ุนู ุงูููู ุงูุงูุชุฑุงุถูุฉ. ูุฌุจ ุงูุฅุนูุงู ุนู ูุฐู ุงูุญููุฉ ูุจู ุชุดุบูู ุฃู ููุฏ ุขุฎุฑ ุจุงุณุชุฎุฏุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฒุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃู ูุฐู ุงูููู ูุฏ ุชููู ูุทููุจุฉ ูู ูุฐุง ุงูุฑูุฒ. ูุฅูุง ุ ุณูุชู ุชููุฆุฉ ุงูููุฏ ุจุงุณุชุฎุฏุงู ุงูููู ุงูุงูุชุฑุงุถูุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> some_module bar = some_module.Bar() <span class="hljs-comment"><span class="hljs-comment">#   get_event_loop() #     loop = asyncio.get_event_loop(runq_len=40, waitq_len=40)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงุณุชูุฑุงุฏ ูุญุฏุฉ ููุทูุฉ ููููู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุฅู ุงูุทุฑููุฉ ุงูุฃูุซุฑ ุฃูุงููุง ูู ุฅูุดุงุก ุญููุฉ ุญุฏุซ ุนูู ุงูููุฑ ุจุนุฏ ุงุณุชูุฑุงุฏ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio loop = asyncio.get_event_loop(runq_len=<span class="hljs-number"><span class="hljs-number">40</span></span>, waitq_len=<span class="hljs-number"><span class="hljs-number">40</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> some_module bar = some_module.Bar() <span class="hljs-comment"><span class="hljs-comment"># get_event_loop()   </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ูุชุงุจุฉ ุงููุญุฏุงุช ุงูููุทูุฉ ููุงุณุชุฎุฏุงู ุจูุงุณุทุฉ ุงูุจุฑุงูุฌ ุงูุฃุฎุฑู ุ ุฃูุถู ุชุฌูุจ ุชุดุบูู ุดูุฑุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงูุงุณุชูุฑุงุฏ. </font><font style="vertical-align: inherit;">ุงูุชุจ ูุธุงุฆู ูุทุฑู ุงูุชุธุงุฑ ุญููุฉ ุญุฏุซ ููุณูุทุฉ. </font><font style="vertical-align: inherit;">ุซู ุชุฃูุฏ ูู ุฃู ุชุทุจููุงุช ุงููุณุชูู ุงูุฃุนูู ูู ููุท ุงูุชู ุชุชุตู ุจู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_event_loop</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_module <span class="hljs-comment"><span class="hljs-comment">#      loop = asyncio.get_event_loop(runq_len=40, waitq_len=40) bar = my_module.Bar(loop)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุช ููุงูุดุฉ ูุฐู ุงููุดููุฉ </font></font><a href="http://github.com/micropython/micropython-lib/issues/295" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 ููุงุญุธุงุช ูููุจุชุฏุฆูู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐู ุงูููุงุญุธุงุช ูุฎุตุตุฉ ูููุจุชุฏุฆูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูุชุจุฏุฃ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุตููุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุดุงูู ุงูุชู ูุญุงูู ุงููุฎุทุทูู ุญููุง ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชูุฏูู ูุธุฑุฉ ุนุงูุฉ </font><b><font style="vertical-align: inherit;">ุนูู</font></b><font style="vertical-align: inherit;"> ููุฌ </font><b><font style="vertical-align: inherit;">uasyncio</font></b><font style="vertical-align: inherit;"> ููุญููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงูุด ุงููุณู 8.5 ุงููุฒุงูุง ุงููุณุจูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุฏุงุช uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู _ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thread</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุฐูู ููุงุฐุง ูุฏ ุชูุถู ุงุณุชุฎุฏุงู coroutines </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฌุฏููุฉ ุงุณุชุจุงููุฉ (_thread). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1 ุงููุดููุฉ 1: ุญููุงุช ุงูุญุฏุซ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ุชุทุจูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงููููุฐุฌู ุจุดูู ูุณุชูุฑ ููู ุงูููุช ููุณู ูุฌุจ ุฃู ูุณุชุฌูุจ ููุฃุญุฏุงุซ ุงูุฎุงุฑุฌูุฉ ุ ูุงูุชู ูุฏ ุชุดูู ุชุบููุฑูุง ูู ุงูุฌูุฏ ุนูู ADC ุฃู ุธููุฑ ููุงุทุนุฉ ููุฌูุงุฒ ุฃู ุฑูุฒูุง ุชู ุงุณุชูุงูู ูู UART ุฃู ุงูุจูุงูุงุช ุงููุชููุฑุฉ ุนูู ุงูููุจุณ. ุชุญุฏุซ ูุฐู ุงูุฃุญุฏุงุซ ุจุดูู ุบูุฑ ูุชุฒุงูู ุ ููุฌุจ ุฃู ูููู ุงูุฑูุฒ ูุงุฏุฑุงู ุนูู ุงูุงุณุชุฌุงุจุฉ ุจุบุถ ุงููุธุฑ ุนู ุงูุชุฑุชูุจ ุงูุฐู ุชุญุฏุซ ุจู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏ ุชููู ููุงู ุญุงุฌุฉ ุฅูู ููุงู ุชุนุชูุฏ ุนูู ุงูููุช ุ ูุซู ุงููุตุงุจูุญ ุงููุงูุถุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงููุงุถุญุฉ ููููุงู ุจุฐูู ูู ูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฏุซ </font><b><font style="vertical-align: inherit;">uasycio</font></b><font style="vertical-align: inherit;"> . ูุฐุง ุงููุซุงู ููุณ ุฑูุฒูุง ุนููููุง ุ ููููู ูุฎุฏู ูู ุชูุถูุญ ุงูุดูู ุงูุนุงู ูุญููุฉ ุงูุญุฏุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">event_loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> led_1_time = <span class="hljs-number"><span class="hljs-number">0</span></span> led_1_period = <span class="hljs-number"><span class="hljs-number">20</span></span> led_2_time = <span class="hljs-number"><span class="hljs-number">0</span></span> led_2_period = <span class="hljs-number"><span class="hljs-number">30</span></span> switch_state = switch.state() <span class="hljs-comment"><span class="hljs-comment">#    while True: time_now = utime.time() if time_now &gt;= led_1_time: #  LED #1 led1.toggle() led_1_time = time_now + led_1_period if time_now &gt;= led_2_time: #  LED #2 led2.toggle() led_2_time = time_now + led_2_period #    LEDs if switch.value() != switch_state: switch_state = switch.value() #  - if uart.any(): #    UART</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนูู ูุซู ูุฐู ุงูุญููุฉ ุนูู ุฃูุซูุฉ ุจุณูุทุฉ ุ ูููู ูุน ุฒูุงุฏุฉ ุนุฏุฏ ุงูุฃุญุฏุงุซ ุ ูุตุจุญ ุงูุฑูุฒ ุจุณุฑุนุฉ ูุฑูููุง. ููุง ุฃููุง ุชูุชูู ูุจุงุฏุฆ ุงูุจุฑูุฌุฉ ุงูููุฌูุฉ ูููุงุฆูุงุช ุนู ุทุฑูู ุงูุฌูุน ุจูู ูุนุธู ููุทู ุงูุจุฑูุงูุฌ ูู ููุงู ูุงุญุฏ ุ ุจุฏูุงู ูู ุฑุจุท ุงูููุฏ ุจูุงุฆู ูุชุญูู ููู. ูุฑูุฏ ุชุทููุฑ ูุฆุฉ ููุตุจุงุญ LED ูููุถ ูููู ุฅุฏุฑุงุฌู ูู ูุญุฏุฉ ููุทูุฉ ูุงุณุชูุฑุงุฏู. ูุฏ ุชุจุฏู ุทุฑููุฉ OOP ูู ูููุถ LED ููุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyb <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LED_flashable</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, led_no)</span></span></span><span class="hljs-function">:</span></span> self.led = pyb.LED(led_no) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">flash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, period)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: self.led.toggle() <span class="hljs-comment"><span class="hljs-comment"># -     period, #         </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุฑูุงูุฌ </font><font style="vertical-align: inherit;">ุงูุฌุฏููุฉ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅูุดุงุก ูุฐู ุงููุฆุงุช. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2 ุงููุดููุฉ 2: ุญุธุฑ ุงูุทุฑู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุฑุถ ุฃูู ุจุญุงุฌุฉ ุฅูู ูุฑุงุกุฉ ุนุฏุฏ ูุนูู ูู ูุญุฏุงุช ุงูุจุงูุช ูู ูุฃุฎุฐ ุงูุชูุตูู. ุฅุฐุง ููุช ุจุงูุงุชุตุงู ุจู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">socket.read (n)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจููุจุณ ุงูุญุฌุจ ุงูุชุฑุงุถููุง ุ ูุณูุชู ุญุธุฑู (ุฃู ูู ูููู ูุงุฏุฑูุง ุนูู ุงูุฅููุงุก) ุญุชู ูุชู ุชููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุช. ุฎูุงู ูุฐู ุงููุชุฑุฉ ุ ูู ูุณุชุฌูุจ ุงูุชุทุจูู ูุฃุญุฏุงุซ ุฃุฎุฑู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ููุจุณ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุบูุฑ </font><b><font style="vertical-align: inherit;">ุงููุญุฌูุจ ุ</font></b><font style="vertical-align: inherit;"> ููููู ูุชุงุจุฉ ุทุฑููุฉ ูุฑุงุกุฉ ุบูุฑ ูุชุฒุงููุฉ. ุณูุชู ุญุธุฑ ุงููููุฉ ุงูุชู ุชุชุทูุจ ุงูุจูุงูุงุช (ุจุงูุถุฑูุฑุฉ) ุฅูู ุฃู ูุชู ุงุณุชูุงููุง ุ ูููู ุณูุชู ุชูููุฐ ููุงู ุฃุฎุฑู ุฎูุงู ูุฐู ุงููุชุฑุฉ ุ ููุง ุณูุณูุญ ููุชุทุจูู ุจุงูุงุณุชุฌุงุจุฉ.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3. ุทุฑู Uasyncio</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุชูู ุงููุฆุฉ ุงูุชุงููุฉ ุนูู ูุคุดุฑ LED ูููู ุชุดุบููู ูุฅููุงู ุชุดุบููู ุ ููุง ููููู ุฃูุถูุง ูููุถ ุฃู ุณุฑุนุฉ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font><font style="vertical-align: inherit;">ูุซูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED_async</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุดุบูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุชู ูููู ุงุณุชุฎุฏุงููุง ููุชุดุบูู ุงููุณุชูุฑ. ูููู ุงูุณูุทุฑุฉ ุนูู ุงูุณููู ุจููุงุฏุฉ ุงูุทุฑู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ()ุ ูุจุงูุฉ ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุด (ุซุงููุฉ)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyb <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LED_async</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, led_no)</span></span></span><span class="hljs-function">:</span></span> self.led = pyb.LED(led_no) self.rate = <span class="hljs-number"><span class="hljs-number">0</span></span> loop = asyncio.get_event_loop() loop.create_task(self.run()) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.rate &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep_ms(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.led.toggle() <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep_ms(int(<span class="hljs-number"><span class="hljs-number">500</span></span> / self.rate)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">flash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, rate)</span></span></span><span class="hljs-function">:</span></span> self.rate = rate <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.led.on() self.rate = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">off</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.led.off() self.rate = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ()ุ ูุจุงูุฉ ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุด ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุซู ุชูููุงุช ูุชุฒุงูู ุงูุชูููุฏูุฉ. ูุบูุฑูู ุณููู LED ุ ููููู ูุนูุฏูู ุนูู ุงูููุฑ. ูุญุฏุซ ุงููููุถ "ูู ุงูุฎูููุฉ". ููุฐุง ููุถุญ ุจุงูุชูุตูู ูู ุงููุณู ุงูุชุงูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุงูู ุงููุตู ูุน ูุจุฏุฃ OOP ุ ูุงูุฐู ูุชุฃูู ูู ุชุฎุฒูู ุงูููุทู ุงููุฑุชุจุท ุจุงูุฌูุงุฒ ูู ุงููุตู. ูู ุงูููุช ููุณู ุ </font><font style="vertical-align: inherit;">ูุถูู </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ูุณุชุฌูุจ ุงูุชุทุจูู ููุฃุญุฏุงุซ ุงูุฃุฎุฑู ุฃุซูุงุก ูููุถ ูุคุดุฑ LED. ูููุถ ุงูุจุฑูุงูุฌ ุฃุฏูุงู ูุน ุฃุฑุจุนุฉ ูุคุดุฑุงุช LED </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุชุฑุฏุฏุงุช ูุฎุชููุฉ ุ ููุณุชุฌูุจ ุฃูุถูุง ูุฒุฑ USR ุ ุงูุฐู ููููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyb <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uasyncio <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> led_async <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> LED_async <span class="hljs-comment"><span class="hljs-comment"># ,   async def killer(): # ,      sw = pyb.Switch() while not sw.value(): await asyncio.sleep_ms(100) leds = [LED_async(n) for n in range(1, 4)] for n, led in enumerate(leds): led.flash(0.7 + n/4) loop = asyncio.get_event_loop() loop.run_until_complete(killer())</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุนูุณ ุงููุซุงู ุงูุฃูู ูู ุญููุฉ ุงูุญุฏุซ ุ ูุฅู ุงูููุทู ุงููุฑุชุจุท ุจุงูููุชุงุญ ููุฌูุฏ ูู ูุธููุฉ ูููุตูุฉ ุนู ูุธููุฉ ูุคุดุฑ LED. </font><font style="vertical-align: inherit;">ุงูุชุจู ุฅูู ุงูููุฏ ุงููุณุชุฎุฏู ูุจุฏุก ุงููุฌุฏูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">loop = asyncio.get_event_loop() loop.run_until_complete(killer()) <span class="hljs-comment"><span class="hljs-comment">#    #       killer (), #   .</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4 ูุฏุนู ุงูุชุฎุทูุท ูู uasyncio </font></font></b> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python 3.5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู ุงููุธููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ูุงููุนุฑูู ุฃูุถูุง ุจุงุณู coroutine ุฃู ุงููููุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชุถูู coroutine ุจูุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุญุฏ ุนูู ุงูุฃูู </font><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">10</span></span>): print(<span class="hljs-string"><span class="hljs-string">'Hello world.'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจุน ูุฐู ุงููุธููุฉ ุฑุณุงูุฉ ุนุดุฑ ูุฑุงุช ุนูู ููุงุตู ุฒูููุฉ ูุฏุชูุง ุซุงููุฉ ูุงุญุฏุฉ. ูู ุญูู ุฃู ุงููุธููุฉ ูุชูููุฉ ูุคูุชูุง ุชุญุณุจุงู ููุชุฃุฎูุฑ ุ ูุฅู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฏููุฉ ุงูุชุฒุงูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุชููู ุจููุงู ุฃุฎุฑู ุ ููุง ูุฎูู ููู ุชุดุบูููุง ูู ููุช ูุงุญุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชุธุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดููุงุช coroutine </font><i><font style="vertical-align: inherit;">asyncio.sleep_ms ()</font></i><font style="vertical-align: inherit;"> ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชุธุฑ asyncio.sleep () ุ ูุฅู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููููุฉ ุงูุญุงููุฉ ูุชูููุฉ ูุคูุชูุง ูุชูุถุน ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูุฑุชุจุฉ ุญุณุจ ุงูููุช ููุชุงุจุนุฉ ุงูุชูููุฐ ูููููุฉ ูู ุฃุนูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. ุชู ุชุตููู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุทุฑููุฉ ุ ุญุชู ูู ูุงู ูุถุน ุงูุณููู ุงููุญุฏุฏ ุตูุฑูุง ุ ุณูุชู ุชูููุฐ ุงูููุงู ุงูุฃุฎุฑู ุฐุงุช ุงูุตูุฉ ุญุชู ูุณุชุฃูู ุงูุชูุงุฑ. ูุฐุง ูู ุงูุชุฎุทูุท "ุฏุงุฆุฑูุฉ ุตุงุฏูุฉ". ูู ููุงุฑุณุฉ ุดุงุฆุนุฉ ูุชุดุบูู </font><i><font style="vertical-align: inherit;">ุงูุชุธุงุฑ asyncio.sleep (0)</font></i><font style="vertical-align: inherit;"> ุงูุญููุงุช.</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูุง ุชุคุฎุฑ ุงููููุฉ ุงูุชูููุฐ. </font><font style="vertical-align: inherit;">ุงูุชุงูู ุนุจุงุฑุฉ ุนู ุญููุฉ ุงูุชุธุงุฑ ูุดุบูู ุงูุชุธุงุฑ ูููุฉ ุฃุฎุฑู ูุชุนููู ูุชุบูุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนูููู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุฃุณู ุ ูุญุชูุฑ ุงููุนุงูุฌ ุ ููููุน ุฅุทูุงู coroutines ุงูุฃุฎุฑู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bad_code</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> flag <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> flag: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-comment"><span class="hljs-comment">#  flag = False #    </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดููุฉ ููุง ูู ุฃูู ุฅูู ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญููุฉ </font><i><font style="vertical-align: inherit;">flagis False ุจุชูุฑูุฑ</font></i><font style="vertical-align: inherit;"> ุงูุชุญูู ุฅูู ุงููุฌุฏูู ุ ููู ุชุจุฏุฃ ุฃู ูููุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุงูููุฌ ุงูุตุญูุญ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">good_code</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> flag <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> flag: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">#  flag = False #    </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุณุจุจ ููุณู ุ ูู ุงูููุงุฑุณุงุช ุงูุณูุฆุฉ ุชุนููู ุงูุชุฃุฎูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utime.sleep (1)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃูู ูุญุธุฑ ุงูููุงู ุงูุฃุฎุฑู ููุฏุฉ ุซุงููุฉ ูุงุญุฏุฉ ุ ูู ุงูุฃุตุญ ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ asyncio.sleep (1)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุง ุจุฃู ุงูุชุฃุฎูุฑ ุงููุงุชุฌุฉ ุนู ุงูุทุฑู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uasyncio </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sleep_ms</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏ ุชุชุฌุงูุฒ ูู ุงููุงูุน ุงูููุช ุงููุญุฏุฏ. ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู ุงูููุงู ุงูุฃุฎุฑู ุณูุชู ุชูููุฐูุง ุฃุซูุงุก ุงูุชุฃุฎูุฑ. ุจุนุฏ ุงููุถุงุก ูุชุฑุฉ ุงูุชุฃุฎูุฑ ุ ูู ูุชู ุงุณุชุฆูุงู ุงูุชูููุฐ ุญุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชุธุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุชูุชูู </font><font style="vertical-align: inherit;">ูููุฉ ุงููููุฉ ููุฏ ุงูุชุดุบูู </font><font style="vertical-align: inherit;">. ุณูู coroutine ุญุณู ุงูุชุตุฑู ุชุนูู ุฏุงุฆูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชุธุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ูุชุฑุงุช ููุชุธูุฉ. ุนูุฏูุง ูููู ุงูุชุฃุฎูุฑ ูุทููุจูุง ุ ูุง ุณููุง ุฅุฐุง ูุงู ุฃุญุฏููุง ุฃูู ูู ุจุถุน ูููู ุซุงููุฉ ุ ููุฏ ูููู ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utime.sleep_us (ููุง)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5 ููุงุฐุง ุงูุชุนุงูููุฉ ุ ูููุณ ุงูุฌุฏููุฉ ุงููุงุฆูุฉ ุนูู ููุถูุน ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_thread</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ุ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฑุฏ ูุนู ุงููุจุชุฏุฆูู ุงูุฃููู ูููุฑุฉ coroutines ุงูุชุฎุทูุท ุงููุดุชุฑู ุบุงูุจุง ูุง ูููู ูุฎูุจุง ููุขูุงู. ุจุงูุชุฃููุฏ ุชุฏูู ุงูุชุฎุทูุท ูู ุฃูุถูุ ููุงุฐุง ูุฌุจ ุฃู ุฃุชุญูู ุตุฑุงุญุฉู ูู ุงูุชุญูู ูู ุงูุทุฑููุฉ ุฅุฐุง ูุงู ุงูุฌูุงุฒ ุงูุธุงูุฑู Python ููููู ุงูููุงู ุจุฐูู ูู ุฃุฌููุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุงูุฃูุธูุฉ ุงููุฏูุฌุฉ ุ ูุฅู ูููุฐุฌ ุงูุชุนุงูู ูู ููุฒุชุงู.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูู ูู ุงููุฒู ุงูุฎููู. ูู ุงููููู ุฃู ูููู ููุงู ุนุฏุฏ ูุจูุฑ ูู coroutines ุ ูุฃูู ุนูู ุนูุณ ุงูุฎููุท ุงููุฌุฏููุฉ ุ ุชุดุบู coroutines ุงููุนูู ูุณุงุญุฉ ุฃูู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงููุงู ุ ูุชุฌูุจ ูุฐุง ุจุนุถ ุงููุดููุงุช ุงูุฏูููุฉ ุงููุฑุชุจุทุฉ ุจุฌุฏููุฉ ุงูุฌุฏููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุงูููุงู ุงููุชุนุฏุฏุฉ ุงูุชุนุงูููุฉ ุนูู ูุทุงู ูุงุณุน ุ ุฎุงุตุฉ ูู ุชุทุจููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูุงุนูุง ุนู ูููุฐุฌ ุชุฎุทูุท ุงูุจุซ ุ ุณุฃุนุฑุถ ููุฒุฉ ูุงุญุฏุฉ: ุฅุฐุง ูุชุจ ุดุฎุต ูุง</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range ( <span class="hljs-number"><span class="hljs-number">1000000</span></span> ): <span class="hljs-comment"><span class="hljs-comment">#  - </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชููุน ุงูููุงู ุงูุฃุฎุฑู. ููุชุฑุถ ูููุฐุฌ ุงูุชุนุงูู ุฃู ุงูุญููุฉ ูุฌุจ ุฃู ุชููุญ ูู ุนูุตุฑ ุชุญูู ูู ุงููููุฉ ุตุฑุงุญุฉ ุนุฏุฏูุง ูุนูููุง ูู ุงูุชูุฑุงุฑุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุถุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู coroutine ูุงูุฅุตุฏุงุฑ ุงูุฏูุฑู ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุธุงุฑ asyncio.sleep (0)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฃุณู ุ ูุฐู ุงูููุฒุฉ ุชุชุถุงุกู ุจุงูููุงุฑูุฉ ูุน ุงูุนููุจ. ูุชู ูุตู ุจุนุถ ูุฐู ูู ูุซุงุฆู ููุชุงุจุฉ </font></font><a href="http://docs.micropython.org/en/latest/reference/isr_rules.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุงุช ุงูููุงุทุนุฉ.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ูููุฐุฌ ุฌุฏููุฉ ุงูุชุฏูู ุ ูููู ููู ูุคุดุฑ ุชุฑุงุจุท ููุงุทุนุฉ ุฃู ูุคุดุฑ ุชุฑุงุจุท ุขุฎุฑ ุ ูุชุบููุฑ ุงูุจูุงูุงุช ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงูุฃุฎุฑู. ููุงุนุฏุฉ ุนุงูุฉ ุ ูู ุงูุฃุณูู ุจูุซูุฑ ุงูุนุซูุฑ ุนูู ุงูููู ุงูุฐู ูุญุฏุซ ูุชูุฌุฉ ูุฎุทุฃ ูุง ูุนุทู ูุชูุฌุฉ ูู ุงูุชุดุงู ุฃุฎุทุงุก ูู ุจุนุถ ุงูุฃุญูุงู ูุงุนูุฉ ููุบุงูุฉ ููุงุฏุฑุงู ูุง ุชุตุงุฏู ูุงูุชู ูููู ุฃู ุชุญุฏุซ ูู ุฑูุฒ ููุชูุจ ูู ุฅุทุงุฑ ูููุฐุฌ ูุน ุชุฎุทูุท ุงูุชุฏูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุจุณุงุทุฉ ุ ุฅุฐุง ูุชุจุช coroutine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroPython</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููููู ุฃู ุชุชุฃูุฏ ูู ุฃู ุงููุชุบูุฑุงุช ูู ุชุชุบูุฑ ูุฌุฃุฉ ุจูุงุณุทุฉ coroutine ุขุฎุฑ: coroutine ุงูุฎุงุต ุจู ูุฏูู ุงูุณูุทุฑุฉ ุงููุงููุฉ ุญุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุฏ ูู ุงูุชุธุงุฑ asyncio.sleep (0)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุน ูู ุงุนุชุจุงุฑู ุฃู ูุนุงูุฌุงุช ุงูููุงุทุนุฉ ุงุณุชุจุงููุฉ. ููุทุจู ูุฐุง ุนูู ููุงุทุนุงุช ุงูุฃุฌูุฒุฉ ูุงูุจุฑุงูุฌ ุงูุชู ูููู ุฃู ุชุญุฏุซ ูู ุฃู ููุงู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุงุทูุงุน </font></font><a href="http://glyph.twistedmatrix.com/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุนูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงูุดุฉ ุจููุบุฉ ููุถุงูุง ุชุฎุทูุท ุงูุชุฏูู </font><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.6 ุงูุชูุงุนู</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุชุทุจููุงุช ุบูุฑ ุงูุชุงููุฉ ุ ูุฌุจ ุฃู ุชุชูุงุนู coroutines. ุทุฑู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุซูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูููุฏูุฉ ูููู ุงุณุชุฎุฏุงููุง </font><font style="vertical-align: inherit;">. ูุชุถูู ุฐูู ุงุณุชุฎุฏุงู ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ุฃู ุชุนุฑูู coroutines ูุทุฑู ูุงุฆู: ูููููู ูุดุงุฑูุฉ ูุชุบูุฑุงุช ุงููุซูู. ุจุฏูุงู ูู ุฐูู ุ ูุฏ ูุชู ุชูุฑูุฑ ูุงุฆู ูุงุจู ููุชุบููุฑ ููุณูุทุฉ ุฅูู coroutine.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุทูุจ ูููุฐุฌ ุชุฎุทูุท ุงูุจุซ ุงููุชุฎุตุตูู ุงูุชุฃูุฏ ูู ุฃู ุงููุตูู ุชููุฑ ุงุชุตุงูุงู ุขูููุง ุ </font><font style="vertical-align: inherit;">ูู ูููุฐุฌ ุงูุชุนุงูู ุ ูุงุฏุฑูุง ูุง ูููู ุฐูู ูุทููุจูุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.7. </font><font style="vertical-align: inherit;">ุงุณุชูุชุงุก ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงูุชุฑุงุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุถ ุงูุฃุฌูุฒุฉ ูุซู ุฌูุงุฒ ุงูุชุณุงุฑุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุง ุชุฏุนู ุงูููุงุทุนุงุชุ ููุฐุง ููุจุบู ุงุณุชุทูุงุน ุขุฑุงุก (ุฃู ูุญุต ุฏูุฑู). </font><font style="vertical-align: inherit;">ูููู ุฃูุถูุง ุงุณุชุฎุฏุงู ุงูุงูุชุฑุงุน ุจุงูุงูุชุฑุงู ูุน ูุนุงูุฌุงุช ุงูููุงุทุนุฉ: ูุญุงูุธ ูุนุงูุฌ ุงูููุงุทุนุฉ ุนูู ุงููุนุฏุงุช ููุถุน ุนูุงูุฉ. </font><font style="vertical-align: inherit;">ูุณุชุทูุน coroutine ุงูุนูู - ุฅุฐุง ุชู ุชุนูููู ุ ุชุชู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุชุนููู ุงูุนูู. </font><font style="vertical-align: inherit;">ุฃูุถู ุทุฑููุฉ ูู ุงุณุชุฎุฏุงู ูุฆุฉ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุญุฏุงุซ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar484472/">https://habr.com/ru/post/ar484472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar484462/index.html">ูุดุท ุฌูุซุจ: ุงูุจุญุซ ุนู "ุฃุณุฑุงุฑ" ูุชุทููุฑ</a></li>
<li><a href="../ar484464/index.html">ูุฒุงุฏุงุช ุงูุฏุฑุงุฌุงุช ุงููุงุฑูุฉ ุงููุงุจุงููุฉ ุ ููู ูุญุฏุซ ูู ุฐูู</a></li>
<li><a href="../ar484466/index.html">ุฌุงูุง ุณูุฑูุจุช ูุนูุฏ ูููุฉ ูุฌุจ ุนูู ุงูุฌููุน ูุนุฑูุชูุง</a></li>
<li><a href="../ar484468/index.html">ุซูุงูุฉ ุงูุดุฑูุงุช ุงูุญูุฑุงุก ูู ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ููุฃุนูุงู ุงูุชุฌุงุฑูุฉ ุงูุฑูุณูุฉ (ุงูุฌุฒุก 2)</a></li>
<li><a href="../ar484470/index.html">ููุญูุงุช ุงูููุณุนุฉ ูู ุฌุงูุง ุณูุฑูุจุช</a></li>
<li><a href="../ar484480/index.html">ุชุฌุงูุฒุช ุงููููุฉ ุงูุณูููุฉ ูุฃูุจุฑ 5 ุดุฑูุงุช ุชูููููุฌูุฉ ุฃูุฑูููุฉ 5 ุชุฑูููููุงุช ุฏููุงุฑ</a></li>
<li><a href="../ar484482/index.html">ุจุฑูุงูุฌ ุชุนูููู ุตุบูุฑ ุญูู ูุนุงูุฌุฉ ุงูููุงู</a></li>
<li><a href="../ar484484/index.html">ุฃูุจููุชู ููุณ ูู ุฃูุถู ููููุณ ุนูู ุณุทุญ ุงูููุชุจ</a></li>
<li><a href="../ar484486/index.html">ุฌูุงุฒ ููุจููุชุฑ ูุฑูุถ ุงูููุช</a></li>
<li><a href="../ar484488/index.html">ููู ูุฑุจูุฉ ูู ูุธุงู ุงูููุ ูุฏ ูุง ุชููู ุงูุฅุฌุงุจุฉ ูุงุจูุฉ ููุญุณุงุจ.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>