<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐝 🎵 🤑 Imprimimos fotos usando Arduino 🚴🏾 🥨 🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante mucho tiempo quise hacer algún tipo de proyecto en Ardoino, para que todo funcionara y funcionara. Y, después de un par de meses de diseño, pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Imprimimos fotos usando Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383877/"><iframe width="560" height="315" src="https://www.youtube.com/embed/AlBPFC41FsM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante mucho tiempo quise hacer algún tipo de proyecto en Ardoino, para que todo funcionara y funcionara. </font><font style="vertical-align: inherit;">Y, después de un par de meses de diseño, programación y montaje, obtuvimos una mini impresora con la que puede imprimir una variedad de imágenes y texto en las pegatinas más comunes. </font><font style="vertical-align: inherit;">Si después de ver el video tienes un gran deseo de hacer algo como esto, te pido un gato.</font></font><br>
<a name="habracut"></a><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qué necesitamos</font></font></b></h3><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Uno. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para este proyecto, utilicé la placa original italiana Arduino Uno. </font><font style="vertical-align: inherit;">No puedo garantizar el trabajo en otras juntas.</font></font></li>
<li><b> sg-90 — 3 .</b>         .</li>
<li><b> .</b>       5 ,       </li>
<li><b>.</b>      3  :   , -     ,        .          -   «».</li>
<li><b> .</b>         ,    — .</li>
<li><b>   ().</b>        —  ,         ,    .       .      1-   .</li>
<li><b>.</b>        </li>
<li><b>     .</b>     «» ,            </li>
<li><b> 4 .</b>      -. ,    , , .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planos. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo enviaré sin cargo y a pedido, si escribe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí.</font></font></a></li>
</ul><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realmente implementación</font></font></b></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fabricación de piezas</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta etapa depende de tu deseo y tus capacidades. </font><font style="vertical-align: inherit;">Puede cortarlo en la máquina o cortar todas las piezas manualmente. </font><font style="vertical-align: inherit;">Lo principal que debe tenerse en cuenta aquí es que la calidad y el rendimiento de este proyecto dependerán directamente de su precisión. </font><font style="vertical-align: inherit;">También debe tener en cuenta este punto: algunos de los detalles que ve en las fotografías pueden diferir ligeramente de los que aparecerán en los dibujos. </font><font style="vertical-align: inherit;">Cabe señalar de inmediato que los detalles que se muestran en las fotografías pueden diferir ligeramente de los que se adjuntan a los dibujos.</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5fa/11b/e02/5fa11be02d2e4c47b94749eaa1f6f10f.png"></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para aquellos que planean hacer todo manualmente</font></font></b><div class="spoiler_text"> ,    , :  ( ),  ( ), ,    .<br>
<br>
   —  -     .<br>
<br>
  .  ,    .         .    ,    ,    (   )    .     , / ,    .     ,  —     .<br>
<br>
      ,     :<br>
<br>
<img width="23%" src="https://habrastorage.org/files/43d/912/7be/43d9127be30e479982e0a183e0d0845e.png"> <img width="23%" src="https://habrastorage.org/files/0a7/6f2/bbf/0a76f2bbfe314d36ab3edb1b2dce5fe1.png"> <img width="23%" src="https://habrastorage.org/files/a0e/215/483/a0e21548302a4139943de723ad494c5b.png"> <img width="23%" src="https://habrastorage.org/files/924/eba/2eb/924eba2ebead49b28d12fc2f60763207.png"><br>
<br>
<img width="23%" src="https://habrastorage.org/files/14f/d24/125/14fd241250c94f1f9ca402b97ff2c0c8.png"> <img width="23%" src="https://habrastorage.org/files/675/b20/f1e/675b20f1e19f4fcb8acdeed5e33224bd.png"> <img width="23%" src="https://habrastorage.org/files/570/189/1ca/5701891ca1db40c3a01126ee4da06064.png"><br>
</div></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recogemos las paredes laterales</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, todo es simple: toma las partes y pégalas. </font><font style="vertical-align: inherit;">Tenga cuidado de asegurarse de que no quede exceso de pegamento en las piezas.</font></font><br>
<img width="45%" src="https://habrastorage.org/files/58d/5da/3fa/58d5da3fae1342c6a5616cd595fb25e0.png"> <img width="45%" src="https://habrastorage.org/files/9ca/7a7/3c6/9ca7a73c6c804a8194f93dd2825a7c59.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pega las piernas a la base</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas patas representan solo un valor estético. </font><font style="vertical-align: inherit;">Si desea ahorrar algo de tiempo, puede omitir este paso.</font></font><br>
<img width="45%" src="https://habrastorage.org/files/30a/64d/66e/30a64d66ee624345ae30818c248fb291.png"> <img width="45%" src="https://habrastorage.org/files/85b/7b0/a8c/85b7b0a8ccee46fc8010941e967b4e87.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armar el caso</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El texto en las placas frontal y posterior se puede cambiar a su gusto.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/561/df1/6f8/561df16f82cc42b7a49f407239f6c08c.png"> <img width="45%" src="https://habrastorage.org/files/033/aca/376/033aca376e304c158fc8072171aa1b36.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/60d/699/5fe/60d6995fee9543a387bf09ca48a39ac6.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacer una almohadilla para papel</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta etapa requiere una precisión y minuciosidad especiales del trabajo. </font><font style="vertical-align: inherit;">De particular dificultad son los rieles en forma de "G" en los que se sostendrá toda esta plataforma. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debe pegar cuidadosamente las tiras finas exactamente de acuerdo con los riesgos indicados en el dibujo. </font><font style="vertical-align: inherit;">Para obtener el mejor efecto, utilicé pinzas para la ropa inusuales, pero puedes hacerlo sin ellas. </font><font style="vertical-align: inherit;">Lo principal es eliminar el exceso de pegamento y asegurarse de que las tiras no se muevan a ningún lado. </font><font style="vertical-align: inherit;">Además, unimos las tiras más anchas: la tecnología aquí es la misma.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/352/c3e/cd7/352c3ecd719143ed91f29927dfacd1c2.png"> <img width="45%" src="https://habrastorage.org/files/a72/0be/597/a720be597c4d42048d6f40b04785cdd3.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/0a4/40e/3d8/0a440e3d833848829fcfd035a1825e33.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de que el pegamento se seque (al menos 20 minutos), intente insertar la almohadilla en el cuerpo. Si ella va allí como un reloj y puede hacer movimientos claros de un lado a otro, entonces tienes mucha suerte: esto es exactamente lo que necesitas. De lo contrario, tomamos papel de lija en nuestras manos y hojeamos los lugares de los rieles de las orugas en las que se acuña. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No debería haber problemas con el encolado de cremalleras. Asegúrese de que se peguen perpendicularmente. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/316/8f7/f3a/3168f7f3a48342888827ab53bb6b7dbc.png"> <img width="45%" src="https://habrastorage.org/files/62b/c95/1e7/62bc951e7c254d1fb7aae11d4b9d4aef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Procedemos al montaje del mecanismo que sostiene el papel. No deberían surgir problemas si recolecta todo en este orden. Primero pegamos los bastidores, fijamos las palancas en ellos. Luego les pegamos una tira de madera contrachapada que sujetará los zorros de papel. Y solo entonces pegamos la parte en la que se apoyarán los resortes.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/4f2/e73/999/4f2e73999837402397ddb4dc1ad1a049.png"> <img width="45%" src="https://habrastorage.org/files/ace/8cf/239/ace8cf2390464da9a91e0d8167243ada.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algunas fotos más para aclarar cómo recolectar todo esto:</font></font></b><div class="spoiler_text"><img width="45%" src="https://habrastorage.org/files/821/ac3/87f/821ac387f768404bbb6978fb6df40c16.jpg"> <img width="45%" src="https://habrastorage.org/files/8e3/925/549/8e392554935a4f6dbf22356b85f958f8.jpg"> <img width="45%" src="https://habrastorage.org/files/69a/2fd/37a/69a2fd37a7544cee96664910280a9750.jpg"> <img width="45%" src="https://habrastorage.org/files/c19/4ac/4f8/c194ac4f8dcf4d39a7f8082b49429f3b.jpg"> <img width="45%" src="https://habrastorage.org/files/11c/a38/755/11ca38755d4a47b88560f2cc6cb87e3f.jpg"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo se hizo correctamente, su impresora debería verse así:</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/85d/5f7/0fe/85d5f70fe94644f391ce0771b3ffdfc2.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mecanismo de brochado</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Así que finalmente llegamos a los engranajes ... Solo deben colocarse en una varilla preparada de aproximadamente 110 mm de largo como se muestra en la foto a continuación y pegada a superpegamento (debe aplicarse uniformemente a las paredes del orificio central del engranaje). </font><font style="vertical-align: inherit;">Asegúrese de que los dientes del engranaje encajen en la cremallera. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/ccc/8cd/68c/ccc8cd68cf67488ababeaf449da6a27a.png"> <img width="45%" src="https://habrastorage.org/files/24d/490/beb/24d490beb4b84eea8a9fbf1236c12f3a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de que se seque el pegamento, intente desplazar suavemente la varilla; la plataforma debe moverse.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala el primer servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, debe preparar el engranaje para el motor. </font><font style="vertical-align: inherit;">Cada servo viene con varios columpios de plástico. </font><font style="vertical-align: inherit;">Deben cortarse y girarse como se muestra en la figura a continuación. </font><font style="vertical-align: inherit;">Y luego pegarlo en el engranaje. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/eeb/77f/9d1/eeb77f9d10f643889e50bb21f5df4c99.png"> <img width="45%" src="https://habrastorage.org/files/dec/d86/b2f/decd86b2fab64b969c0c87025308f8fd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora pasamos a instalar la unidad. </font><font style="vertical-align: inherit;">Para comenzar, empuje la almohadilla de papel hasta el fondo de la impresora y desplace el servo en sentido antihorario hasta que se detenga. </font><font style="vertical-align: inherit;">Luego, debe elegir la posición óptima de la unidad, es decir, arreglar el servo para que los engranajes no tengan una gran reacción, pero no se apoyen entre sí.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/36f/860/244/36f860244b1546aa86ac326b1f12038c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora puedes comprobar si todo funciona para nosotros. </font><font style="vertical-align: inherit;">Para hacer esto, conecte el servo a su Arduino a través del pin9 y cargue el boceto desde Patrones: Servo&gt; Barrido. </font><font style="vertical-align: inherit;">Por si acaso, le doy su código a continuación.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servo barrido</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MIN_ANGLE 0</span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_ANGLE 180</span><font></font>
<font></font>
Servo servo;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <font></font>
  servo.attach(<span class="hljs-number">9</span>);<font></font>
} <font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{ <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MIN_ANGLE; i&lt;=MAX_ANGLE; ++i) {<font></font>
    servo.write(i); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MAX_ANGLE; i&gt;=MIN_ANGLE; --i) {                                <font></font>
    servo.write(i);<font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
} <font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo funcionó, genial. </font><font style="vertical-align: inherit;">De lo contrario, intente cambiar la posición del variador o los valores MIN_ANGLE y MAX_ANGLE en el código.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala el segundo servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí todo se hace de manera similar con el primer motor. </font><font style="vertical-align: inherit;">La única diferencia es que necesita un eje pequeño de ~ 12 mm de largo para asegurar los dos engranajes.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e73/db2/47e/e73db247e6f243f29b0dbb3ecd9d8b4b.png"> <img width="45%" src="https://habrastorage.org/files/db0/854/2f0/db08542f0d8b4c69ac52d45c77f4d0a6.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ponemos un carro de imprenta</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si lograste llegar a esta etapa, entonces no deberías tener ninguna dificultad especial aquí. </font><font style="vertical-align: inherit;">Lo más difícil aquí es ensamblar cuidadosamente el carro (para que no se cuelgue y se acuñe), puede que tenga que trabajar con papel de lija. </font><font style="vertical-align: inherit;">El siguiente problema posible es una cremallera mal pegada. </font><font style="vertical-align: inherit;">Debe ir estrictamente paralelo a la base de la carcasa, es mejor pegarlo cuando el carro está en la posición más alejada del servoaccionamiento. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e6d/a7b/c97/e6da7bc97edb46318be775ca4bbdc8f2.png"> <img width="45%" src="https://habrastorage.org/files/c0e/bef/92a/c0ebef92a0c443a5825ecf08168b1cc1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos este ensamblaje usando Arduino y el boceto mencionado anteriormente, si todo funciona como debería, entonces procedemos al siguiente paso. </font><font style="vertical-align: inherit;">De lo contrario, el problema probablemente se deba a engranajes o cremallera pegada incorrectamente.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Último servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, recogemos la palanca para el rotulador. </font><font style="vertical-align: inherit;">Necesitamos poder perforar un orificio lateral para el tornillo, con el cual apretaremos el tornillo. </font><font style="vertical-align: inherit;">Intente asegurarse de que en el estado en que se baja el rotulador, el servo tiene una posición de 90 grados, luego no tiene que hacer correcciones innecesarias en el código. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/b04/5d1/e50/b045d1e503934c88a6f9cdc0a8fd7eaf.png"> <img width="45%" src="https://habrastorage.org/files/d33/bab/b92/d33babb92f6245c4a7bc6237796996f7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de instalar el motor, nuestra impresora estará casi lista. </font><font style="vertical-align: inherit;">Recomiendo pegar la superficie de la almohadilla de papel con cinta adhesiva; durante el proceso de depuración, la impresora puede ensuciarse seriamente.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/f0e/986/256/f0e986256d1e40af9c88d6d94e47a744.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primera ejecución y depuración</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar, conectamos el servo a nuestro Arduino Uno, no es necesario colocarlo dentro de la impresora en esta etapa, será un inconveniente trabajar. </font><font style="vertical-align: inherit;">Conectamos el primer motor al pin2, el segundo al pin4, el tercero al pin6. </font><font style="vertical-align: inherit;">A continuación, descargue este boceto. </font><font style="vertical-align: inherit;">¡Atención! </font><font style="vertical-align: inherit;">Este código no funciona en el IDE, más reciente 1.6.4 (intenté comentar en detalle y todo el código claramente, no voy a entrar en gran parte de él):</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dame la vuelta</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">/*</span><font></font><span class="hljs-comment">
*  MiniPrinter</span><font></font><span class="hljs-comment">
*  Designed in May 2015</span><font></font><span class="hljs-comment">
*  By Alexandrow Yegor</span><font></font><span class="hljs-comment">
*/</span><font></font>
<font></font>
<span class="hljs-comment">// ,        Servo</span><font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> {</span><font></font>
  <span class="hljs-keyword">int</span> min_angle, max_angle;<font></font>
  Servo servo;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_W 64 <span class="hljs-comment">// </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_H 64 <span class="hljs-comment">// </span></span><font></font>
<span class="hljs-keyword">int</span> STEP = <span class="hljs-number">2</span>;    <span class="hljs-comment">//    1 </span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IDLING_MS 4 <span class="hljs-comment">// ,     1 </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WRITING_MS 8</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">motor_x</span>, <span class="hljs-title">motor_y</span>, <span class="hljs-title">motor_p</span>;</span><font></font>
byte img[IMG_W/<span class="hljs-number">8</span>]; <span class="hljs-comment">//  </span><font></font>
                   <span class="hljs-comment">//  =  </span><font></font>
<font></font>
<span class="hljs-function">struct Motor <span class="hljs-title">newMotor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pin, <span class="hljs-keyword">int</span> a1, <span class="hljs-keyword">int</span> a2)</span> </span>{ <span class="hljs-comment">// </span><font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">m</span>;</span><font></font>
<font></font>
  m.servo.attach(pin);<font></font>
  m.min_angle = a1;<font></font>
  m.max_angle = a2;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> m;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">gotoStart</span><span class="hljs-params">()</span> </span>{<font></font>
   motor_p.servo.write(motor_p.max_angle); <span class="hljs-comment">// </span><font></font>
   delay(<span class="hljs-number">15</span>);<font></font>
   <font></font>
   <span class="hljs-comment">//   (0; 0)</span><font></font>
   motor_x.servo.write(motor_x.min_angle);<font></font>
   motor_y.servo.write(motor_y.min_angle); <font></font>
   delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
    motor_x.servo.write(motor_x.min_angle);<font></font>
    motor_y.servo.write(motor_y.max_angle);<font></font>
    delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">//</span><font></font>
  Serial.begin(<span class="hljs-number">9600</span>);<font></font>
  motor_y = newMotor(<span class="hljs-number">2</span>, <span class="hljs-number">50</span>, <span class="hljs-number">180</span>);<font></font>
  motor_x = newMotor(<span class="hljs-number">4</span>, <span class="hljs-number">30</span>, <span class="hljs-number">160</span>);<font></font>
  motor_p = newMotor(<span class="hljs-number">6</span>, <span class="hljs-number">90</span>, <span class="hljs-number">99</span>);<font></font>
  gotoStart();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//,      ,     </span><font></font>
<span class="hljs-function">boolean <span class="hljs-title">nextWayIsEmpty</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>{<font></font>
  <span class="hljs-keyword">for</span>(; i&lt;IMG_W; ++i) {<font></font>
    <span class="hljs-keyword">if</span>(!(img[i/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(i%<span class="hljs-number">8</span>)))) <span class="hljs-keyword">continue</span>;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printImg</span><span class="hljs-params">()</span> </span>{<font></font>
  gotoStart();<font></font>
  <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;<font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> y=<span class="hljs-number">0</span>; y&lt;IMG_H; ++y) {<font></font>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;IMG_W/<span class="hljs-number">8</span>; ++i) img[i] = Serial.read();<font></font>
      Serial.write(<span class="hljs-number">61</span>);<span class="hljs-comment">//  ,          </span><font></font>
      <font></font>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;STEP; ++i) { <span class="hljs-comment">//       ,  STEP</span><font></font>
          motor_x.servo.write(motor_x.min_angle); <span class="hljs-comment">//   </span><font></font>
          motor_y.servo.write(motor_y.min_angle + y*STEP + i); <font></font>
          delay(IDLING_MS * STEP * x + <span class="hljs-number">30</span>);<font></font>
          <font></font>
          <span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>; x&lt;IMG_W; ++x) {<font></font>
            <font></font>
            <span class="hljs-keyword">if</span>(nextWayIsEmpty(x)) {<font></font>
              motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
              <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
            <font></font>
            <span class="hljs-comment">//  (/),    </span><font></font>
            motor_p.servo.write((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? motor_p.min_angle : motor_p.max_angle);<font></font>
            delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
            <font></font>
            <span class="hljs-comment">//     X</span><font></font>
            motor_x.servo.write(motor_x.min_angle + x*STEP);<font></font>
            delay(((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? WRITING_MS : IDLING_MS) * STEP); <font></font>
        }<font></font>
        <font></font>
        <span class="hljs-comment">// </span><font></font>
        motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
      }<font></font>
    <font></font>
    <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
  }<font></font>
    <font></font>
  gotoStart();<font></font>
  Serial.flush();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  </span><font></font>
<span class="hljs-comment">//     ,    </span><font></font>
<span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">checkMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    <span class="hljs-keyword">if</span>(Serial.available()) {<font></font>
      delay(<span class="hljs-number">10</span>);<font></font>
      byte msg[] = {Serial.read(), Serial.read()};<font></font>
      <font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'R'</span>) printImg(); <span class="hljs-comment">//</span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) gotoStart(); <span class="hljs-comment">//   (0; 0)</span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'C'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'L'</span>) finish(); <span class="hljs-comment">//" "</span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'Z'</span>) STEP = Serial.read(); <span class="hljs-comment">//    </span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) { <span class="hljs-comment">//     (PT+1 -   , PT-2  2  )</span><font></font>
        <span class="hljs-keyword">if</span>(Serial.read() == <span class="hljs-string">'+'</span>) {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle += b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle += b-<span class="hljs-string">'0'</span>;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
        }<font></font>
      }  <font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
  checkMessage();<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ya ha probado y depurado todos los sistemas hasta este punto, entonces no debería haber problemas: la almohadilla de papel debería moverse ligeramente y el carro de impresión debería ocupar la posición más a la izquierda. Si alguno de los anteriores no llega a los bordes o, por el contrario, se apoya contra las paredes, intente seleccionar los parámetros en la función setup (). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si encuentra problemas más serios, le recomiendo que vuelva a leer cuidadosamente todo el tutorial nuevamente y verifique si hizo todo correctamente. Además, será bueno revisar cada motor nuevamente usando la primera lista (Servo Sweep). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, conectamos nuestra impresora a la computadora y ejecutamos este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (necesitamos Java instalado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, seleccionamos el puerto serie al que está conectada la impresora y presionamos el botón "Aceptar", después de lo cual la impresora debe girar ligeramente la almohadilla de papel. Luego haga clic en el botón "Iniciar sesión". Hemos abierto una ventana de terminal. Luego, ingrese el comando CL: la impresora debe empujar la almohadilla hacia adentro. Si ingresa ST, la impresora volverá a su posición original. También puede enviar varios comandos seguidos, por ejemplo: CLSTCL. Lo principal es no usar espacios y otros personajes entre los equipos.</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5ba/ec2/3be/5baec23be65546d09251c02a11c6406c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si logramos hacer esto, adelante: instale la palanca con un rotulador. Primero, fije el rotulador en la palanca. La distancia desde su punta hasta el borde inferior de la palanca debe ser de unos 25 mm. Luego debe atornillar el tornillo para que el rotulador quede fijo y no se haya ido. Ahora solo coloque esta palanca en el eje del servo: la distancia desde la punta del rotulador hasta el papel debe ser de aproximadamente 7 mm. Más precisamente, la altura se puede ajustar con los comandos PT + 1 y PT-1. Ajustan el ángulo del marcador, en lugar de 1 puede haber cualquier número del 0 al 9. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora ha llegado el momento más crucial: imprimir la primera imagen. Las imágenes pequeñas de 64x64 son las más adecuadas. Recomiendo usar este Mario: </font></font><br>
<br>
<img src="https://habrastorage.org/files/8d2/7de/3f6/8d27de3f6dc04c9b892e31bdf4271f53.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Primero necesitas abrir la imagen:</font></font><br>
<br>
<div style="text-align:center;"><img width="60%" src="https://habrastorage.org/files/c39/95e/7dd/c3995e7ddc784328a3b1d5c38440fdaa.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando los controles deslizantes de la derecha, puede ajustar el contraste de la imagen a su gusto. Vale la pena recordar que cuantos más píxeles negros, más tiempo se imprimirá la imagen.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/c73/666/cf5/c73666cf5293464fa2a4c017caa1b70d.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es todo </font><font style="vertical-align: inherit;">Luego, simplemente presione el botón "Imprimir" y admire cómo funciona su creación. </font><font style="vertical-align: inherit;">El único problema posible en esta etapa es presionar el rotulador. </font><font style="vertical-align: inherit;">Él empujará demasiado fuerte o no empujará en absoluto. </font><font style="vertical-align: inherit;">Además de controlar la altura del rotulador a través del terminal, puede intentar ajustar la altura manualmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, bajo su propio riesgo, puede cambiar los valores de las variables globales en el boceto: juegue con la velocidad y el tamaño de la impresión. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tan pronto como esté satisfecho con la calidad de la imagen resultante, puede colocar de forma segura el Arduino en la carcasa de la impresora atornillándolo con tornillos; esto puede considerarse su proyecto, ¡puede presumir ante todos sus amigos!</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusión</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo, espero que te haya interesado este proyecto. </font><font style="vertical-align: inherit;">Por supuesto, tiene sus </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconvenientes de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> las características </font><s><font style="vertical-align: inherit;">de</font></s><font style="vertical-align: inherit;"> implementación, por lo que todavía hay espacio para mejoras, mejoras y desarrollo. </font><font style="vertical-align: inherit;">Estaré encantado de cualquier consejo, pregunta y sugerencia en los comentarios.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es383877/">https://habr.com/ru/post/es383877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es383865/index.html">Los sismólogos de Berkeley han creado un mapa 3D de las capas profundas de la Tierra.</a></li>
<li><a href="../es383867/index.html">El sexo en la realidad virtual está en camino: los juguetes están listos (18+)</a></li>
<li><a href="../es383871/index.html">Smartphone DEXP Ixion ML2 5 ”: una batería potente para un récord de 5,200 mAh, pantalla HD y una semana de autonomía</a></li>
<li><a href="../es383873/index.html">La impresión 3D de metal utiliza un sistema láser y robótica avanzada</a></li>
<li><a href="../es383875/index.html">Versión HTML5 de StarCraft</a></li>
<li><a href="../es383881/index.html">Configuración inalámbrica de ESP8266 en el firmware DeviceHive v 0.3</a></li>
<li><a href="../es383885/index.html">¿Cómo hacer un descubrimiento científico sin salir de casa?</a></li>
<li><a href="../es383891/index.html">Steve Wozniak finalmente le gustó la película sobre Steve Jobs con Michael Fassbender en el papel principal.</a></li>
<li><a href="../es383893/index.html">Competiciones amateur de rovers de Marte en Polonia</a></li>
<li><a href="../es383895/index.html">Análisis de la tableta ASUS ZenPad C 7.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>