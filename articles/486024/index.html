<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèΩ üç≤ ‚öΩÔ∏è Gr√°ficos realmente simples en R para ciencia y periodismo. üë©‚Äçüè≠ üé¨ ü§πüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R es una herramienta muy poderosa para trabajar con estad√≠sticas: desde el preprocesamiento hasta la construcci√≥n de modelos de cualquier complejidad ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gr√°ficos realmente simples en R para ciencia y periodismo.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486024/"><p>  R es una herramienta muy poderosa para trabajar con estad√≠sticas: desde el preprocesamiento hasta la construcci√≥n de modelos de cualquier complejidad y los gr√°ficos correspondientes. </p><br><p>  Una simple solicitud de Google proporcionar√° una gran cantidad de literatura sobre c√≥mo "usar R f√°cil y r√°pidamente". Habr√° enormes libros y numerosas notas sobre el <a href="https://stackoverflow.com/questions/tagged/r">desbordamiento de pila</a> , que, a primera vista, parecen un dep√≥sito interminable de ejemplos, cada uno de los cuales cuenta en dos recopilar√° el c√≥digo necesario para resolver un problema espec√≠fico.  Sin embargo, en realidad esto no es del todo cierto.  Hay muy pocos materiales que indiquen, por ejemplo, c√≥mo construir un programa simple "desde cero" con recetas listas para resolver las dificultades que surgir√°n en el curso de la soluci√≥n de este problema. </p><br><p>  Para resolver problemas pr√°cticos, se necesitan instrucciones espec√≠ficas paso a paso, no una descripci√≥n detallada de la potencia total de un paquete.  Adem√°s, los ejemplos de capacitaci√≥n prefabricados (los mismos <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2580%25D0%25B8%25D1%2581%25D1%258B_%25D0%25A4%25D0%25B8%25D1%2588%25D0%25B5%25D1%2580%25D0%25B0">iris</a> ) a menudo son de poca utilidad, ya que se saltan inmediatamente una de las etapas m√°s importantes del trabajo con estad√≠sticas: la recopilaci√≥n y el procesamiento preliminares de los datos en s√≠.  ¬°Pero es precisamente para este trabajo que casi una gran parte de todo el tiempo a menudo toma!  Otro problema es la creaci√≥n de horarios que corresponden a est√°ndares formales, y m√°s a menudo informales, de un determinado entorno profesional. </p><br><p>  Mis colegas y yo regularmente necesitamos hacer m√°s y m√°s visualizaciones de estad√≠sticas y modelos basados ‚Äã‚Äãen ellos para publicar resultados cient√≠ficos.  Dado que los estudios se refieren a la econom√≠a, muchos de estos trabajos son similares al periodismo profesional. </p><br><p>  En alg√∫n momento, qued√≥ claro que para un trabajo en equipo efectivo se necesita una especie de proceso de procesamiento de estad√≠sticas completo.  Este art√≠culo naci√≥ como una gu√≠a introductoria para colegas y una hoja de trucos para m√≠ mismo para ejecutar este transportador.  Parece que este material puede ser √∫til para un p√∫blico m√°s amplio. </p><a name="habracut"></a><br><h1 id="grafika-v-r-bez-boli-poshagovoe-rukovodstvo">  R Gr√°ficos sin dolor: tutorial </h1><br><h2 id="bazovaya-nastroyka-r">  Ajuste b√°sico R </h2><br><p>  Para trabajar, necesita un paquete est√°ndar: <a href="https://www.r-project.org/">R</a> + <a href="https://rstudio.com/products/rstudio/download/">RStudio</a> .  Est√°n disponibles de forma gratuita para todas las plataformas comunes.  R se instala primero, luego RStudio.  Generalmente no hay problemas. </p><br><p>  Antes de trabajar, es mejor guardar inmediatamente el nuevo script en alg√∫n lugar de su sistema de archivos e instalar inmediatamente el directorio de trabajo R en la carpeta donde est√° almacenado el script (Men√∫ de sesi√≥n - Establecer directorio de trabajo - A la ubicaci√≥n del archivo de origen).  La √∫ltima nota es importante, porque de lo contrario, no se iniciar√° ning√∫n script externo o nativo despu√©s de reiniciar RStudio.  Por alguna raz√≥n, RStudio no hace esto por defecto, lo que ser√≠a l√≥gico. </p><br><p>  Incluso en el paquete b√°sico R hay herramientas de visualizaci√≥n est√°ndar (funci√≥n de <em>trazado</em> ) que le permiten construir muchos tipos de gr√°ficos, pero, sin embargo, estas caracter√≠sticas claramente no son suficientes para ilustraciones completas y altamente personalizables. </p><br><p>  La biblioteca m√°s utilizada para gr√°ficos en R es el paquete <a href="https://ggplot2.tidyverse.org/">ggplot2</a> , que tambi√©n utilizaremos. </p><br><p>  Tambi√©n vale la pena instalar inmediatamente los paquetes <em>readxl</em> (para leer archivos .xls, .xlsx) y <em>dplyr</em> (para trabajar con matrices), <em>escalas</em> (para trabajar con diferentes escalas de datos), <em>Cairo</em> (para dibujar gr√°ficos de ggplot a archivos).  Todo esto se puede hacer con un solo comando: </p><br><pre><code class="plaintext hljs">install.packages("ggplot2", "readxl", "scales", "dplyr", "Cairo")</code> </pre> <br><h2 id="sbor-i-podgotovka-dannyh">  Recopilaci√≥n y preparaci√≥n de datos. </h2><br><p>  Lo m√°s sorprendente es que esta etapa en cualquier literatura, ya sea un libro te√≥rico serio sobre estad√≠stica te√≥rica aplicada o una gu√≠a de paquetes estad√≠sticos espec√≠ficos, est√° dedicada a un espacio y tiempo catastr√≥ficamente peque√±os.  Sin embargo, seg√∫n la experiencia de la investigaci√≥n independiente y el liderazgo de estudiantes y colegas junior, se sabe que es en esta etapa que la mayor parte del tiempo y el esfuerzo pueden caer, por lo tanto, es muy importante salvarlos incluso cuando se resuelven problemas puramente t√©cnicos. </p><br><p>  Aqu√≠ hay dos preguntas: </p><br><ol><li>  ¬øC√≥mo elegir el formato de archivo correcto? </li><li>  ¬øCu√°l es la mejor manera de estructurar datos? </li></ol><br><p>  Con el formato, el dilema es simple: CSV versus Microsoft Excel (no tan importante, "nuevo" .xlsx antiguo .xls).  Mucha gente piensa que CSV se beneficia de la simplicidad (de hecho, este es un archivo de texto normal en el que los valores de las columnas est√°n separados por una coma o punto y coma) y la velocidad.  Pero elijo Excel por dos razones: en primer lugar, en este archivo puede almacenar varias tablas simult√°neamente en diferentes pesta√±as y, en segundo lugar, lo m√°s importante es que no tiene que pensar en elegir el separador de columna y el lugar decimal correctos.  Para CSV, esto a menudo tiene que escribirse manualmente en el c√≥digo R y asegurarse de que el archivo de datos se guarde con la misma configuraci√≥n. </p><br><p>  La estructuraci√≥n de datos es un tema m√°s complejo, que requiere una comprensi√≥n b√°sica de c√≥mo deben organizarse las bases de datos. <del>  Si no entras en la teor√≠a de las bases de datos relacionales sobre diferentes formas normales, entonces </del>  La tabla de datos debe ser <em>redundante,</em> es decir <em>,</em> contener columnas adicionales.  Esto es necesario para que m√°s adelante en el script en R pueda seleccionar de manera flexible ciertos datos para su posterior procesamiento.  Por ejemplo, si queremos representar una serie temporal primitiva, debemos hacer columnas que correspondan a todas las caracter√≠sticas de agrupaci√≥n posibles.  Por ejemplo, si se trata de una serie de observaciones anuales sobre la poblaci√≥n de la ciudad condicional de Severovostochinsk, necesitaremos las siguientes columnas: <em>a√±o</em> (a√±o), <em>var</em> (nombre del indicador), <em>valor</em> (valor del indicador). </p><br><div class="scrollable-table"><table><thead><tr><th>  a√±o </th><th>  var </th><th>  valor </th></tr></thead><tbody><tr><td>  1990 </td><td>  Tama√±o de la poblaci√≥n </td><td>  102 </td></tr><tr><td>  1991 </td><td>  Tama√±o de la poblaci√≥n </td><td>  103 </td></tr><tr><td>  1992 </td><td>  Tama√±o de la poblaci√≥n </td><td>  104 </td></tr></tbody></table></div><br><p>  Proporcionaremos cualquier dato de entrada a este estilo de presentaci√≥n de informaci√≥n. </p><br><h2 id="primer">  Ejemplo </h2><br><p>  <strong>Objetivo:</strong> construir una comparaci√≥n de la din√°mica de los vol√∫menes de cosecha en Rusia, el Distrito Federal de Siberia y el Territorio de Krasnoyarsk en 2009-2018. </p><br><p>  Obtener datos para esta tarea es bastante simple: solo busque el indicador correspondiente en el <a href="https://fedstat.ru/indicator/37848">Sistema Estad√≠stico e Informaci√≥n Interdepartamental Unificado</a> .  La sutileza viene despu√©s.  Puede descargar inmediatamente los datos en formato .xlsx y luego estructurarlos manualmente como se muestra arriba.  Afortunadamente, algunas fuentes de informaci√≥n (por ejemplo, EMISS) le permiten hacer esto con las capacidades del servicio en s√≠, lo que simplifica enormemente el trabajo y reduce el tiempo requerido para completarlo. </p><br><p>  Por lo tanto, para EMISS es suficiente ir al modo "Configuraci√≥n" (el bot√≥n correspondiente en la esquina superior derecha de la p√°gina de datos) y mover todos los signos, excepto el "Per√≠odo" de la columna "Columnas" a la columna "Filas".  Resulta una tabla que est√° casi lista para nuestro trabajo futuro.  Adem√°s, ya en Excel (o cualquier otro editor adecuado), tiene sentido llevar la estructura de la tabla a una forma similar a la presentada anteriormente y asegurarse de que la primera l√≠nea contenga solo los nombres de las variables, adem√°s, los datos en lat√≠n (en principio, R puede funcionar con encabezados en ruso) pero esto es inconveniente al escribir c√≥digo).  El resultado fue una tabla de este tipo (se da un fragmento en varias filas). </p><br><div class="scrollable-table"><table><thead><tr><th>  titulo </th><th>  ubicaci√≥n </th><th>  a√±o </th><th>  valor </th></tr></thead><tbody><tr><td>  Madera cosechada </td><td>  Rusia en su conjunto </td><td>  2009 </td><td>  158868.3 </td></tr><tr><td>  Madera cosechada </td><td>  Rusia en su conjunto </td><td>  2010 </td><td>  173633.7 </td></tr><tr><td>  Madera cosechada </td><td>  FD siberiano </td><td>  2009 </td><td>  47161.58 </td></tr><tr><td>  Madera cosechada </td><td>  Territorio de Krasnoyarsk </td><td>  2009 </td><td>  12111.48 </td></tr><tr><td>  Madera cosechada </td><td>  Territorio de Krasnoyarsk </td><td>  2010 </td><td>  12078,6 </td></tr></tbody></table></div><br><p>  Ahora puede llamar a esta hoja de <code>logging</code> , guardar todo el libro en el archivo <code>graphs.xlsx</code> e ir a RStudio. </p><br><p>  Conectamos las bibliotecas necesarias. </p><br><pre> <code class="plaintext hljs">library(ggplot2) library(readxl) library(Cairo) library(scales) library(dplyr)</code> </pre> <br><p>  Si se est√° preparando una programaci√≥n para una publicaci√≥n en ruso, definitivamente debe configurar la configuraci√≥n regional adecuada.  La opci√≥n m√°s moderna que funcionar√° en la mayor√≠a de los casos es, por supuesto, la codificaci√≥n UTF-8: </p><br><pre> <code class="plaintext hljs">Sys.setlocale("LC_ALL", "ru_RU.UTF-8")</code> </pre> <br><p>  Si el sistema es antiguo (algunos Windows o Linux antiguos), entonces primero deber√° comprender qu√© codificaci√≥n se usa de manera predeterminada; esta no es una tarea tan simple, que est√° lejos del prop√≥sito de este art√≠culo. </p><br><p>  Ahora necesita cargar los datos en R. </p><br><pre> <code class="plaintext hljs">df_logging &lt;- read_excel("graphs.xlsx", sheet ="logging")</code> </pre> <br><p>  La opci√≥n de <code>sheet</code> aqu√≠ establece el nombre de la hoja dentro del libro de Excel desde el que se cargar√°n los datos. </p><br><p>  Construimos la versi√≥n m√°s simple del horario requerido. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location))</code> </pre> <br><img src="https://habrastorage.org/webt/us/fr/of/usfrof2gizhjlejcid_nvctyf6y.png"><br><p>  En principio, casi "fuera de la caja" result√≥ ser un programa muy valioso, que es bastante adecuado para un an√°lisis inicial del proceso en estudio, pero desde el punto de vista de una posible publicaci√≥n, a√∫n requiere un refinamiento significativo. </p><br><p>  Primero, acerquemos el estilo gr√°fico a uno m√°s acad√©mico.  El paquete <code>ggplot2</code> tiene varios <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">temas</a> b√°sicos listos para <code>ggplot2</code> .  El tema de <code>theme_classic</code> puede ser reconocido como el m√°s adecuado para nuestro caso.  Como parte de su configuraci√≥n, puede establecer inmediatamente el tama√±o base de la fuente y sus auriculares.  Mis preferencias personales pertenecen al moderno sistema de fuentes <a href="http://rus.paratype.ru/pt-sans-pt-serif">PT Sans, PT Serif, PT Mono</a> .  Pero, por supuesto, puedes pedir un Times o Helvetica m√°s cl√°sico.  Adem√°s, la publicaci√≥n en la que est√° prevista la publicaci√≥n puede tener instrucciones especiales a este respecto.  El punto base se determina emp√≠ricamente como 12 pt. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12)</code> </pre> <br><img src="https://habrastorage.org/webt/qi/iu/xo/qiiuxoipgdyjymilgxmuobd1eqm.png"><br><p>  A continuaci√≥n, mueva la leyenda desde el campo derecho del gr√°fico hacia abajo (usando la instrucci√≥n del <code>theme</code> ) y al mismo tiempo asigne nombres significativos a los ejes (instrucci√≥n de <code>labs</code> ).  A lo largo del eje Y, escribimos el nombre del indicador con unidades de medida ("Vol√∫menes de registro, millones de metros c√∫bicos") y eliminamos las etiquetas a lo largo del eje X, ya que est√° claro que los a√±os est√°n marcados all√≠. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + labs(x = "", y = " , . . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/ia/lb/ww/ialbww1uazrcpr094vbiivbkw84.png"><br><p>  Para que las unidades de medida sean m√°s convenientes para la percepci√≥n, nos moveremos desde mil metros c√∫bicos.  m a millones.  Para hacer esto, simplemente divida los valores entre 1000, es decir, ajuste la primera l√≠nea de nuestro c√≥digo de la siguiente manera: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000))</code> </pre> <br><p>  Al mismo tiempo, debe cambiar las unidades en la inscripci√≥n: </p><br><pre> <code class="plaintext hljs">labs(x = "", y = " ,  . ", color="")</code> </pre> <br><p>  E inmediatamente mejoraremos ligeramente el estilo de la imagen agregando puntos para indicar cada valor observado, para lo cual agregaremos una instrucci√≥n: </p><br><pre> <code class="plaintext hljs">geom_point(size=2)</code> </pre> <br><p>  Tambi√©n puede establecer expl√≠citamente el estilo de las l√≠neas mismas.  Es l√≥gico hacer que el indicador para Rusia sea una l√≠nea s√≥lida, y para el Distrito Federal de Siberia y el Territorio de Krasnoyarsk: diferentes versiones de intermitente: </p><br><pre> <code class="plaintext hljs">scale_linetype_manual(values=c("twodash", "solid", "dotted"))</code> </pre> <br><p>  Ahora el c√≥digo general y el gr√°fico se ven as√≠: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/x_/0i/-q/x_0i-qbvghhild9wwm3jab5kpcc.png"><br><p>  Queda por resolver una tarea m√°s sustantiva: aumentar el contenido de informaci√≥n de nuestro horario.  Ahora se puede ver que, en general, el indicador para todos los objetos de observaci√≥n ha crecido, adem√°s, desde aproximadamente 2014 es m√°s fuerte que antes.  Pero ser√≠a mucho m√°s claro si representamos directamente en el gr√°fico tambi√©n los valores en el primer y √∫ltimo a√±o y, por ejemplo, en el pico de 2011.  La nueva declaraci√≥n <code>geom_text</code> ayudar√° a: </p><br><pre> <code class="plaintext hljs">geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8)</code> </pre> <br><p>  A primera vista, parece bastante complicado, y debo decir que realmente no fue tan f√°cil ensamblarlo.  Tratar√© de explicar lo que est√° sucediendo aqu√≠.  Por s√≠ solo, <code>geom_text</code> agrega etiquetas de texto al gr√°fico.  Para esta instrucci√≥n, se necesita un conjunto de datos.  Si especificamos <code>df_logging</code> directamente en √©l, obtendr√≠amos inscripciones sobre cada punto.  Esto se hace con bastante frecuencia, pero para series de tiempo bastante simples como la nuestra, este enfoque solo crear√° ruido visual innecesario sin proporcionarnos nueva informaci√≥n sobre el comportamiento del indicador observado.  Por lo tanto, solo tomaremos aquellos a√±os que son esenciales para comprender la din√°mica del indicador: 2009 (comienzo de las observaciones), 2011 (pico local), 2018 (fin de las observaciones).  Esto ayudar√° al <code>subset</code> est√°ndar. </p><br><p>  Para la visualizaci√≥n correcta de los n√∫meros de acuerdo con la tradici√≥n de habla rusa, necesitamos una coma como separador de las partes enteras y decimales ( <code>decimal.mark</code> ), y para cortar el n√∫mero de lugares decimales, la instrucci√≥n de d√≠gitos.  Diversos experimentos con √©l, incluido el uso de la funci√≥n <code>round</code> , llevaron al hecho de que si necesitamos un decimal, debemos pasar el valor <code>3</code> a los <code>digits</code> . </p><br><p>  La opci√≥n <code>check_overlap</code> no se necesita directamente aqu√≠, pero puede ser √∫til en otros casos: es un control autom√°tico de etiquetas superpuestas.  La opci√≥n vjust controla la colocaci√≥n de etiquetas verticalmente.  El valor se selecciona en funci√≥n de las consideraciones de sabor. </p><br><img src="https://habrastorage.org/webt/fk/m2/fb/fkm2fbzy05xdbulnx1rs8mznimu.png"><br><p>  ¬°Ahora el calendario es realmente interesante de considerar! </p><br><p>  Pero se descubri√≥ un problema inesperado: el valor superior derecho est√° "cortado" por el tama√±o vertical de la imagen.  Hay varias formas de resolver este problema.  Sal√≠ con un ligero estiramiento de la escala del eje vertical con un l√≠mite superior expl√≠cito de 250 millones de metros c√∫bicos.  m: </p><br><pre> <code class="plaintext hljs">scale_y_continuous(limits = c(0,250))</code> </pre> <br><img src="https://habrastorage.org/webt/nm/sv/il/nmsvilg49qwuzhj3biqrhohepao.png"><br><p>  Hecho  Entonces, el c√≥digo final se ve as√≠: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + scale_y_continuous(limits = c(0,250)) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><blockquote>  La imagen resultante se incluye en la monograf√≠a: Modernizaci√≥n estructural como factor para aumentar la competitividad de la regi√≥n (en el ejemplo del Territorio de Krasnoyarsk) / ed.  Shishatsky N.G. - Novosibirsk: IEOPP SB RAS, 2020 (en prensa). </blockquote><br><h2 id="eksport">  Exportar </h2><br><p>  El complemento de visualizaci√≥n de gr√°ficos integrado en RStudio le permite exportar im√°genes en varios formatos sin comandos adicionales, con solo unos pocos clics.  El problema es que para tareas pr√°cticas este servicio es pr√°cticamente in√∫til.  Al guardar en formatos r√°ster (.jpg, .png), la resoluci√≥n se establece en muy baja de forma predeterminada, por lo que cuando importe una imagen, por ejemplo, en Word, se ver√° borrosa.  Con los vectores .eps o .pdf, la situaci√≥n es francamente peor: el guardado se produce con errores que no permiten abrir el archivo o se guarda sin la posibilidad de utilizar inscripciones en ruso. </p><br><p>  La soluci√≥n es usar la funci√≥n <code>ggplot</code> paquete <code>ggplot</code> . </p><br><p>  Si la salida requiere un archivo r√°ster regular, por ejemplo, del formato .png, todo es bastante simple: </p><br><pre> <code class="plaintext hljs">ggsave("logging.png", width=709, height=549, units="px")</code> </pre> <br><p>  La geometr√≠a ( <code>width</code> y <code>height</code> opciones) y las unidades de medida ( <code>units</code> ) se pueden omitir, pero de manera predeterminada la imagen se exportar√° al cuadrado, lo cual no es conveniente.  Por lo tanto, es mejor obtener su propia proporci√≥n y el tama√±o requerido y establecer estos par√°metros manualmente, como se hace en la l√≠nea de c√≥digo anterior. </p><br><p>  Para el uso posterior de la imagen en publicaciones en papel, es razonable exportar la imagen en formatos vectoriales, de modo que m√°s adelante en el dise√±o existe la posibilidad de cambiar libremente la geometr√≠a de la imagen.  Muchas revistas prefieren el formato .eps; tambi√©n es conveniente usarlo para exportar a Word.  Necesitaremos el controlador Cairo ya instalado y conectado: </p><br><pre> <code class="plaintext hljs">ggsave(filename = "export.eps", width=15, height=11.6, units="cm", device = cairo_ps)</code> </pre> <br><p>  Los archivos se guardar√°n en el directorio actual donde se encuentra el script R. </p><br><h1 id="chto-esche-pochitat">  Que mas leer </h1><br><p>  La literatura sobre gr√°ficos en R es bastante.  Aqu√≠ hay algunos ejemplos, el primero de los cuales es el autor del paquete ggplot: </p><br><ul><li>  <a href="https://ggplot2-book.org/">Wickham, Hadley.</a>  <a href="https://ggplot2-book.org/">ggplot2: Gr√°ficos elegantes para an√°lisis de datos</a> ; </li><li>  <a href="https://r-graphics.org/">Chang, Winston.</a>  <a href="https://r-graphics.org/">R Graphics Cookbook, 2a edici√≥n</a> ; </li><li>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Prabhakaran, Selva.</a>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Las 50 principales visualizaciones de ggplot2: la lista maestra (con c√≥digo R completo)</a> . </li></ul><br><p>  Probablemente el mejor y m√°s detallado libro sobre gr√°ficos en ruso en ruso es el libro de <a href="https://tsamsonov.github.io/r-geo-course/">Timofei Samsonov.</a>  <a href="https://tsamsonov.github.io/r-geo-course/">Visualizaci√≥n y an√°lisis de datos geogr√°ficos en lenguaje R.</a>  Esta es una excelente gu√≠a detallada de muchos problemas comunes y espec√≠ficos que se pueden resolver con R. </p><br><p>  Tambi√©n puede recomendar un libro en ruso sobre R en general: <br>  <a href="https://github.com/ranalytics/data-mining">Shitikov V.K., Mastitsky S.E.Clasificaci√≥n, regresi√≥n, algoritmos de miner√≠a de datos con R. 2017</a> . </p><br><p>  Un ejemplo interesante y motivador es una <a href="http://johnburnmurdoch.github.io/slides/r-ggplot/">presentaci√≥n poderosa sobre el uso de ggplot2 en la preparaci√≥n de dibujos para el influyente peri√≥dico Financial Times</a> . </p></div></div><p>Source: <a href="https://habr.com/ru/post/486024/">https://habr.com/ru/post/486024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../486000/index.html">ADSM3. Sistemas IPAM / DCIM</a></li>
<li><a href="../486006/index.html">Almacenar el estado del chat en la pila</a></li>
<li><a href="../486010/index.html">Hacer una demostraci√≥n para un tel√©fono antiguo - AONDEMO</a></li>
<li><a href="../486014/index.html">Recorrido de SLAC: Laboratorio nacional de aceleraci√≥n del Departamento de Energ√≠a de EE. UU. En Stanford</a></li>
<li><a href="../486018/index.html">Resultados de la encuesta de la sesi√≥n</a></li>
<li><a href="../486028/index.html">Redes neuronales en la producci√≥n de pr√≥tesis dentales.</a></li>
<li><a href="../486030/index.html">TL-SREET 55 5K LED Farola revisi√≥n</a></li>
<li><a href="../486032/index.html">C√≥mo convertirse en un dise√±ador de di√°logos</a></li>
<li><a href="../486034/index.html">Entrada r√°pida a la gesti√≥n de productos a trav√©s del c√≥digo abierto</a></li>
<li><a href="../486036/index.html">An√°lisis de sentimiento de texto en Node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>