<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèø üôèüèæ üò≠ Banco de dados KDB +: do setor financeiro √† f√≥rmula 1 üìÆ üê∫ ‚öúÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O KDB +, um produto KX , √© um banco de dados de colunas conhecido por c√≠rculo estreito e extremamente r√°pido, projetado para armazenar s√©ries temporai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Banco de dados KDB +: do setor financeiro √† f√≥rmula 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dbtc/blog/446412/">  O KDB +, um produto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">KX</a> , √© um banco de dados de colunas conhecido por c√≠rculo estreito e extremamente r√°pido, projetado para armazenar s√©ries temporais e c√°lculos anal√≠ticos com base neles.  Inicialmente, ele gozou (e goza) de grande popularidade no setor financeiro - √© usado por todos os 10 principais bancos de investimento e por muitos hedge funds, bolsas e outras organiza√ß√µes bem conhecidas.  Recentemente, a KX decidiu expandir sua base de clientes e agora oferece solu√ß√µes em outras √°reas onde h√° uma grande quantidade de dados classificados por tempo ou de outra maneira - telecomunica√ß√µes, bioinform√°tica, produ√ß√£o, etc.  Em particular, eles se tornaram um parceiro da equipe da Aston Martin Red Bull Racing na F√≥rmula 1, onde ajudam a coletar e processar dados de sensores de autom√≥veis e analisar testes em um t√∫nel de vento.  Neste artigo, quero dizer quais recursos do KDB + o tornam superprodutivo, por que as empresas est√£o dispostas a gastar muito dinheiro com ele e, finalmente, por que esse n√£o √© realmente um banco de dados. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efa/f84/839/efaf84839e64d7c0026568d2b8019cd9.jpg"><br><a name="habracut"></a><br>  Neste artigo, tentarei dizer em geral o que √© o KDB +, quais recursos e limita√ß√µes ele possui, qual √© o seu benef√≠cio para as empresas que desejam processar grandes volumes de dados.  N√£o entrarei nos detalhes da implementa√ß√£o do KDB + e nos detalhes de sua linguagem de programa√ß√£o Q. Ambos os t√≥picos s√£o muito extensos e merecem artigos separados.  Muitas informa√ß√µes sobre esses t√≥picos podem ser encontradas em code.kx.com, incluindo um livro sobre o Q-Q For Mortals (veja o link abaixo). <br><br><h2>  Alguns termos </h2><br><ul><li> <b>Banco de dados na mem√≥ria.</b>  Um banco de dados que armazena dados na RAM para acesso mais r√°pido.  As vantagens desse banco de dados s√£o compreens√≠veis e as desvantagens s√£o a possibilidade de perda de dados, a necessidade de ter muita mem√≥ria no servidor. <br></li><li>  <b>Banco de dados da coluna.</b>  Um banco de dados em que os dados s√£o armazenados em s√©rie, n√£o registrados por registro.  A principal vantagem desse banco de dados √© que os dados de uma coluna s√£o armazenados juntos no disco e na mem√≥ria, o que acelera bastante o acesso a eles.  N√£o h√° necessidade de carregar colunas que n√£o s√£o usadas na solicita√ß√£o.  A principal desvantagem √© que √© dif√≠cil modificar e excluir registros. <br></li><li>  <b>S√©ries temporais.</b>  Dados com uma coluna como data ou hora.  Como regra, a ordem no tempo √© importante para esses dados, para que voc√™ possa determinar facilmente qual registro precede ou segue a corrente ou aplicar fun√ß√µes cujo resultado depende da ordem dos registros.  Os bancos de dados cl√°ssicos s√£o criados com base em um princ√≠pio completamente diferente - representando um conjunto de registros como um conjunto, em que a ordem dos registros n√£o √© definida em princ√≠pio. <br></li><li>  <b>Vector.</b>  No contexto, o KDB + √© uma lista de elementos do mesmo tipo at√¥mico, por exemplo, n√∫meros.  Em outras palavras, uma matriz de elementos.  As matrizes, ao contr√°rio das listas, podem ser armazenadas de forma compacta e processadas usando as instru√ß√µes do processador vetorial. <br></li></ul><br><h2>  Antecedentes hist√≥ricos </h2><br>  O KX foi fundado em 1993 por Arthur Whitney, que anteriormente trabalhou no Morgan Stanley Bank no A +, o sucessor do APL, uma linguagem muito original e popular no mundo financeiro.  Obviamente, no KX, Arthur continuou com o mesmo esp√≠rito e criou a linguagem funcional do vetor K, guiada pelas id√©ias do minimalismo radical.  Os programas K parecem um conjunto bagun√ßado de sinais de pontua√ß√£o e caracteres especiais, o significado de caracteres e fun√ß√µes depende do contexto e cada opera√ß√£o possui muito mais significado do que nas linguagens de programa√ß√£o comuns.  Devido a isso, o programa K ocupa um espa√ßo m√≠nimo - v√°rias linhas podem substituir as p√°ginas de texto de uma linguagem detalhada como Java - e √© uma implementa√ß√£o super concentrada do algoritmo. <br><br>  Uma fun√ß√£o em K que implementa a maioria do gerador de analisador LL1 de acordo com uma dada gram√°tica: <br><br><pre><code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> pp:{q:{(x;p3(),y)};r:$[<span class="hljs-number"><span class="hljs-number">-11</span></span>=@x;$x;<span class="hljs-number"><span class="hljs-number">11</span></span>=@x;q[`N;$*x];<span class="hljs-number"><span class="hljs-number">10</span></span>=abs@@x;q[`N;x]  <span class="hljs-number"><span class="hljs-number">2.</span></span>   ($)~*x;(`P;p3 x <span class="hljs-number"><span class="hljs-number">1</span></span>);(<span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-meta"><span class="hljs-meta">#x)&amp;11=@*x;pp[{(1#x;$[2=#x;;,:]1_x)}@*x]  3.      (?)~*x;(`Q;pp[x 1]);(*)~*x;(`M;pp[x 1]);(+)~*x;(`MP;pp[x 1]);(!)~*x;(`Y;p3 x 1)  4.      (2=#x)&amp;(@x 1)in 100 101 107 7 -7h;($[(@x 1)in 100 101 107h;`Ff;`Fi];p3 x 1;pp[*x])  5.      (|)~*x;`S,(pp'1_x);2=#x;`C,{@[@[x;-1+#x;{x,")"}];0;"(",]}({$[".sC"~4#x;6_-2_x;x]}'pp'x);'`pp];  6.   $[@r;r;($[1&lt;#r;".s.";""],$*r),$[1&lt;#r;"[",(";"/:1_r),"]";""]]}</span></span></code> </pre> <br>  Arthur tamb√©m incorporou essa filosofia de extrema efici√™ncia com um m√≠nimo de movimentos corporais no KDB +, que apareceu em 2003 (acho que agora est√° claro de onde vem a letra K) e n√£o h√° nada al√©m de um int√©rprete da quarta vers√£o da linguagem K. Uma vers√£o mais agrad√°vel aos olhos do usu√°rio √© adicionada a K K, com o nome Q. Q tamb√©m adiciona suporte para um dialeto SQL espec√≠fico - QSQL, e no int√©rprete - suporte para tabelas como um tipo de dados do sistema, ferramentas para trabalhar com tabelas na mem√≥ria e no disco, etc. <br><br>  Portanto, do ponto de vista do usu√°rio, o KDB + √© apenas um int√©rprete Q com suporte para tabelas e express√µes no estilo LINQ do tipo SQL do C #.  Essa √© a diferen√ßa mais importante entre o KDB + e outros bancos de dados e sua principal vantagem competitiva, que geralmente √© negligenciada.  Este n√£o √© um banco de dados + uma linguagem auxiliar que est√° desabilitada, mas uma poderosa linguagem de programa√ß√£o completa + suporte interno para fun√ß√µes de banco de dados.  Essa diferen√ßa ter√° um papel decisivo na listagem de todos os benef√≠cios do KDB +.  Por exemplo ... <br><br><h2>  Tamanho </h2><br>  Pelos padr√µes modernos, o KDB + √© apenas um tamanho microsc√≥pico.  Este √© literalmente um arquivo execut√°vel menor que um megabyte e um pequeno arquivo de texto com algumas fun√ß√µes do sistema.  Na verdade - menos de um megabyte e, para esse programa, as empresas pagam dezenas de milhares de d√≥lares por ano por um processador no servidor. <br><br><ul><li>  Esse tamanho permite que o KDB + se sinta bem em qualquer hardware - do microcomputador Pi aos servidores com terabytes de mem√≥ria.  Isso n√£o afeta a funcionalidade de nenhuma maneira; al√©m disso, o Q √© iniciado instantaneamente, o que permite que ele seja usado inclusive como uma linguagem de script. <br></li><li>  Com esse tamanho, o int√©rprete Q √© completamente colocado no cache do processador, o que acelera a execu√ß√£o dos programas. <br></li><li>  Com esse tamanho do arquivo execut√°vel, o processo Q ocupa um espa√ßo de mem√≥ria insignificante; voc√™ pode execut√°-los em centenas.  Ao mesmo tempo, se necess√°rio, o Q pode operar com dezenas ou centenas de gigabytes de mem√≥ria em um processo. <br></li></ul><br><h2>  Versatilidade </h2><br>  Q √© perfeito para uma variedade de tarefas.  O processo Q pode servir como um banco de dados hist√≥rico e fornecer acesso r√°pido a terabytes de informa√ß√µes.  Por exemplo, temos dezenas de bancos de dados hist√≥ricos, em alguns dos quais um dia n√£o compactado de dados leva mais de 100 gigabytes.  No entanto, com restri√ß√µes razo√°veis, a consulta ao banco de dados ser√° executada em dezenas a centenas de milissegundos.  Em geral, temos um tempo limite universal para solicita√ß√µes de usu√°rios - 30 segundos - e isso funciona muito raramente. <br><br>  Com a mesma facilidade, Q pode ser um banco de dados na mem√≥ria.  Adicionar novos dados a tabelas na mem√≥ria √© t√£o r√°pido que as consultas do usu√°rio s√£o um fator limitante.  Os dados nas tabelas s√£o armazenados em colunas, o que significa que qualquer opera√ß√£o na coluna utilizar√° o cache do processador na capacidade total.  Al√©m disso, o KX tentou implementar todas as opera√ß√µes b√°sicas, como a aritm√©tica, atrav√©s de instru√ß√µes do processador vetorial, maximizando sua velocidade.  O Q pode executar tarefas que n√£o s√£o caracter√≠sticas dos bancos de dados - por exemplo, processar dados de fluxo cont√≠nuo e calcular em ‚Äútempo real‚Äù (com um atraso de dezenas de milissegundos a v√°rios segundos, dependendo da tarefa) v√°rias fun√ß√µes agregadas para instrumentos financeiros por diferentes intervalos de tempo ou criar um modelo do impacto da perfeita transa√ß√µes ao mercado e realizar seus perfis quase imediatamente ap√≥s sua conclus√£o.  Nesses problemas, na maioria das vezes o atraso principal n√£o √© Q, mas a necessidade de sincronizar dados de diferentes fontes.  A alta velocidade √© alcan√ßada devido ao fato de que os dados e fun√ß√µes que os processam est√£o no mesmo processo e o processamento √© reduzido √† execu√ß√£o de v√°rias express√µes e jun√ß√µes QSQL que n√£o s√£o interpretadas, mas s√£o executadas em c√≥digo bin√°rio. <br><br>  Por fim, qualquer processo de servi√ßo tamb√©m pode ser escrito em Q.  Por exemplo, processos de gateway que distribuem automaticamente solicita√ß√µes de usu√°rio para os bancos de dados e servidores necess√°rios.  O programador tem total liberdade para implementar qualquer algoritmo para equilibrar, priorizar, toler√¢ncia a falhas, direitos de acesso, cotas e geralmente o que seu cora√ß√£o deseja.  O principal problema aqui √© que voc√™ deve implementar tudo isso sozinho. <br><br>  Por exemplo, listarei quais tipos de processos temos.  Todos eles s√£o usados ‚Äã‚Äãativamente e trabalham juntos, combinando dezenas de bancos de dados diferentes, processando dados de v√°rias fontes e atendendo a centenas de usu√°rios e aplicativos. <br><br><ul><li>  <b>Conectores (manipulador de feeds) para fontes de dados.</b>  Esses processos geralmente usam bibliotecas externas carregadas no Q. A interface C no Q √© extremamente simples e permite criar facilmente fun√ß√µes de proxy para qualquer biblioteca C / C ++.  Q √© r√°pido o suficiente para manipular, por exemplo, o processamento do fluxo de mensagens FIX de todas as bolsas de valores europeias simultaneamente. <br></li><li>  <b>Distribuidores Tickerplant,</b> que servem como um elo intermedi√°rio entre conectores e consumidores.  Ao mesmo tempo, eles gravam dados recebidos em um log bin√°rio especial, fornecendo resist√™ncia para os consumidores perderem ou reiniciarem a conex√£o. <br></li><li>  <b>Banco de dados na mem√≥ria (rdb).</b>  Esses bancos de dados fornecem o acesso mais r√°pido a dados brutos e frescos, armazenando-os na mem√≥ria.  Como regra, eles acumulam dados em tabelas durante o dia e os zeram √† noite. <br></li><li>  <b>Persistir banco de dados (pdb).</b>  Esses bancos de dados fornecem armazenamento de dados hoje no banco de dados hist√≥rico.  Como regra, diferentemente do rdb, eles n√£o armazenam dados na mem√≥ria, mas usam um cache especial no disco por um dia e copiam os dados √† meia-noite no banco de dados hist√≥rico. <br></li><li>  <b>Bases hist√≥ricas (hdb).</b>  Esses bancos de dados fornecem acesso aos dados para dias, meses e anos anteriores.  Seu tamanho (em dias) √© limitado apenas pelo tamanho dos discos r√≠gidos.  Os dados podem ser localizados em qualquer lugar, principalmente em discos diferentes, para acesso mais r√°pido.  √â poss√≠vel compactar dados usando v√°rios algoritmos para escolher.  A estrutura do banco de dados √© bem documentada e simples, os dados s√£o armazenados por unidade em arquivos comuns, para que possam ser processados, inclusive usando o sistema operacional. <br></li><li>  <b>Bancos de dados com informa√ß√µes agregadas.</b>  V√°rias agrega√ß√µes s√£o armazenadas, geralmente com, agrupadas por nome do instrumento e intervalo de tempo.  Os bancos de dados na mem√≥ria atualizam seu status a cada mensagem recebida, e os hist√≥ricos armazenam dados pr√©-calculados para acelerar o acesso aos dados hist√≥ricos. <br></li><li>  Por fim, <b>processos de gateway que</b> atendem a aplicativos e usu√°rios.  O Q permite implementar o processamento completamente ass√≠ncrono das mensagens recebidas, distribuindo-as entre os bancos de dados, verificando os direitos de acesso etc.  Observo que as mensagens n√£o s√£o limitadas e, na maioria das vezes, n√£o s√£o instru√ß√µes SQL, como √© o caso em outros bancos de dados.  Na maioria das vezes, a express√£o SQL √© oculta em uma fun√ß√£o especial e √© constru√≠da com base nos par√¢metros solicitados pelo usu√°rio - o tempo √© convertido, filtrado, os dados s√£o normalizados (por exemplo, o pre√ßo das a√ß√µes √© igualado se os dividendos forem pagos) etc. <br></li></ul><br>  Arquitetura t√≠pica para um tipo de dados: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99a/13e/5e9/99a13e5e9813f09a2d40b676669c052a.png"><br><br><h2>  Velocidade </h2><br>  Embora Q seja uma linguagem interpretada, √© simultaneamente uma linguagem vetorial.  Isso significa que muitas fun√ß√µes internas, em particular aritm√©tica, aceitam argumentos de qualquer forma - n√∫meros, vetores, matrizes, listas e o programador deve implementar o programa como opera√ß√µes em matrizes.  Nesse idioma, se voc√™ adicionar dois vetores em um milh√£o de elementos, n√£o importa mais que o idioma seja interpretado, a adi√ß√£o ser√° realizada por uma fun√ß√£o bin√°ria super-otimizada.  Como a maior parte do tempo nos programas Q √© gasta em opera√ß√µes com tabelas usando essas fun√ß√µes vetorizadas b√°sicas, temos uma velocidade de produ√ß√£o bastante decente que nos permite processar uma enorme quantidade de dados, mesmo em um processo.  Isso √© semelhante √†s bibliotecas matem√°ticas em python - embora o pr√≥prio python seja uma linguagem muito lenta, ele possui muitas bibliotecas numpy excelentes que permitem processar dados num√©ricos na velocidade de uma linguagem compilada (a prop√≥sito, numpy √© ideologicamente pr√≥ximo de Q). <br><br>  Al√©m disso, o KX abordou com muito cuidado o design das tabelas e otimizou o trabalho com elas.  Primeiramente, v√°rios tipos de √≠ndices s√£o suportados, que s√£o suportados por fun√ß√µes internas e podem ser aplicados n√£o apenas √†s colunas da tabela, mas tamb√©m a quaisquer vetores - agrupamento, classifica√ß√£o, atributo de exclusividade e agrupamento especial para bancos de dados hist√≥ricos.  O √≠ndice √© sobreposto elementarmente e √© ajustado automaticamente ao adicionar elementos √† coluna / vetor.  Os √≠ndices tamb√©m podem sobrepor colunas da tabela na mem√≥ria e no disco.  Ao executar uma consulta QSQL, os √≠ndices s√£o usados ‚Äã‚Äãautomaticamente, se poss√≠vel.  Em segundo lugar, o trabalho com dados hist√≥ricos √© feito atrav√©s do mecanismo de mapeamento de arquivos do SO (mapa de mem√≥ria).  As tabelas grandes nunca s√£o carregadas na mem√≥ria; em vez disso, as colunas necess√°rias s√£o mapeadas diretamente na mem√≥ria e somente essa parte delas √© realmente carregada (os √≠ndices tamb√©m ajudam aqui).  N√£o h√° diferen√ßa para o programador, quer os dados estejam na mem√≥ria ou n√£o, o mecanismo para trabalhar com o mmap est√° completamente oculto nas entranhas do Q. <br><br>  O KDB + n√£o √© um banco de dados relacional, as tabelas podem conter dados arbitr√°rios, enquanto a ordem das linhas na tabela n√£o muda quando novos elementos s√£o adicionados e pode e deve ser usada ao escrever consultas.  Esse recurso √© necess√°rio com urg√™ncia para trabalhar com s√©ries temporais (dados de trocas, telemetria, logs de eventos), porque se os dados s√£o classificados por tempo, o usu√°rio n√£o precisa usar nenhum truque SQL para encontrar a primeira ou a √∫ltima linha ou N linhas na tabela , determine qual linha segue a en√©sima linha etc.  Jun√ß√µes de tabelas s√£o ainda mais simplificadas, por exemplo, encontrando para 16.000 transa√ß√µes VOD.L (Vodafone) a √∫ltima cota√ß√£o em uma tabela de 500 milh√µes de elementos que leva cerca de um segundo no disco e uma d√∫zia de milissegundos na mem√≥ria. <br><br>  Um exemplo de jun√ß√£o de tempo √© que a tabela de cota√ß√µes √© mapeada para a mem√≥ria; portanto, n√£o h√° necessidade de especificar VOD.L em que local, o √≠ndice na coluna sym √© usado implicitamente e o fato de os dados serem classificados por tempo.  Quase todas as jun√ß√µes em Q s√£o fun√ß√µes comuns, n√£o fazem parte da instru√ß√£o select: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> aj[`sym`time;<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> trade <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> date=<span class="hljs-number"><span class="hljs-number">2019.03</span></span><span class="hljs-number"><span class="hljs-number">.26</span></span>, sym=`VOD.L;<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> quote <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> date=<span class="hljs-number"><span class="hljs-number">2019.03</span></span><span class="hljs-number"><span class="hljs-number">.26</span></span>]</code> </pre><br>  Finalmente, vale a pena notar que os engenheiros da KX, come√ßando com o pr√≥prio Arthur Whitney, s√£o realmente obcecados por efici√™ncia e est√£o fazendo todos os esfor√ßos para tirar o m√°ximo proveito das fun√ß√µes Q padr√£o e otimizar os padr√µes de uso mais comuns. <br><br><h2>  Sum√°rio </h2><br>  O KDB + √© popular entre as empresas principalmente devido √† sua versatilidade excepcional - serve igualmente bem como base na mem√≥ria e como base para armazenar terabytes de dados hist√≥ricos e como plataforma para an√°lise de dados.  Devido ao fato de o processamento de dados ocorrer diretamente no banco de dados, √© obtida uma alta velocidade de opera√ß√£o e economia de recursos.  Uma linguagem de programa√ß√£o completa, integrada √†s fun√ß√µes do banco de dados, permite implementar na mesma plataforma toda a pilha de processos necess√°rios - do recebimento de dados ao processamento de solicita√ß√µes do usu√°rio. <br><br><h2>  Informa√ß√µes Adicionais </h2><br><h3>  Desvantagens </h3><br>  Uma desvantagem significativa do KDB + / Q √© seu alto limite de entrada.  A linguagem possui uma sintaxe estranha, algumas fun√ß√µes est√£o sobrecarregadas (o valor, por exemplo, possui cerca de 11 casos de uso).  Mais importante ainda, requer uma abordagem radicalmente diferente para escrever programas.  Em uma linguagem vetorial, voc√™ precisa pensar o tempo todo em termos de transforma√ß√µes de array, implementar todos os ciclos atrav√©s de v√°rias op√ß√µes de fun√ß√µes de mapear / reduzir (chamadas adv√©rbios em Q), nunca tentar economizar dinheiro substituindo opera√ß√µes vetoriais por opera√ß√µes at√¥micas.  Por exemplo, para encontrar o √≠ndice da en√©sima ocorr√™ncia de um elemento em uma matriz, escreva: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">where</span></span> element=vector)[N]</code> </pre><br>  embora isso pare√ßa terrivelmente ineficiente para os padr√µes C / Java (= cria um vetor booleano, onde retorna os √≠ndices dos elementos verdadeiros nele).  Mas esse registro torna o significado da express√£o mais compreens√≠vel e voc√™ usa opera√ß√µes de vetor r√°pidas em vez de opera√ß√µes at√¥micas lentas.  A diferen√ßa conceitual entre a linguagem vetorial e o restante √© compar√°vel √† diferen√ßa entre as abordagens imperativa e funcional da programa√ß√£o, e voc√™ precisa estar preparado para isso. <br><br>  Alguns usu√°rios tamb√©m n√£o est√£o satisfeitos com o QSQL.  O fato √© que ele parece apenas com SQL real.  Na verdade, √© apenas um int√©rprete de express√µes semelhantes a SQL que n√£o suporta a otimiza√ß√£o de consultas.  O pr√≥prio usu√°rio deve escrever as consultas ideais e no Q, para as quais muitas n√£o est√£o prontas.  Por outro lado, √© claro, voc√™ sempre pode escrever sua pr√≥pria consulta ideal e n√£o confiar em um otimizador de caixa preta. <br><br>  Al√©m disso, um livro sobre Q-Q For Mortals est√° dispon√≠vel gratuitamente no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site da empresa</a> , e tamb√©m existem muitos outros materiais √∫teis. <br><br>  Outro grande ponto negativo √© o custo da licen√ßa.  S√£o dezenas de milhares de d√≥lares por ano para uma CPU.  Somente grandes empresas podem arcar com essas despesas.  Recentemente, a KX tornou a pol√≠tica de licenciamento mais flex√≠vel e oferece a capacidade de pagar apenas pelo tempo de uso ou alugar o KDB + nas nuvens do Google e da Amazon.  O KX tamb√©m oferece o download de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vers√£o gratuita para fins n√£o comerciais</a> (vers√£o de 32 bits ou 64 bits, mediante solicita√ß√£o). <br><br><h3>  Concorrentes </h3><br>  Existem alguns bancos de dados especializados constru√≠dos sobre princ√≠pios semelhantes - colunar, na mem√≥ria, focados em quantidades muito grandes de dados.  O problema √© que esses s√£o bancos de dados especializados.  Um excelente exemplo √© o Clickhouse.  Esse banco de dados tem um princ√≠pio muito semelhante ao KDB + de armazenar dados no disco e criar o √≠ndice; ele realiza algumas consultas mais rapidamente que o KDB +, embora n√£o significativamente.  Mas mesmo que o banco de dados Clickhouse seja mais especializado que o KDB + - an√°lise da web versus s√©ries temporais arbitr√°rias (essa diferen√ßa √© muito importante - por causa disso, por exemplo, n√£o h√° como usar a ordena√ß√£o de registros no Clickhouse).  Mas, o mais importante, o Clickhouse n√£o possui a universalidade do KDB +, uma linguagem que permitiria processar dados diretamente no banco de dados, em vez de carreg√°-los anteriormente em um aplicativo separado, construindo express√µes SQL arbitr√°rias, aplicando fun√ß√µes arbitr√°rias em uma consulta, criando processos n√£o relacionados √† execu√ß√£o de fun√ß√µes hist√≥ricas do banco de dados .  Portanto, √© dif√≠cil comparar o KDB + com outros bancos de dados, eles podem ser melhores em casos de uso separados ou simplesmente melhores se estivermos falando sobre as tarefas dos bancos de dados cl√°ssicos, mas n√£o conhe√ßo outra ferramenta igualmente eficaz e universal para processar dados tempor√°rios. <br><br><h3>  Integra√ß√£o Python </h3><br>  Para tornar o KDB + mais f√°cil para quem √© iniciante em tecnologia, o KX criou bibliotecas para uma forte integra√ß√£o com o Python em um √∫nico processo.  Voc√™ pode chamar qualquer fun√ß√£o python do Q ou vice-versa - chamar qualquer fun√ß√£o Q do Python (em particular express√µes QSQL).  As bibliotecas convertem, se necess√°rio (por uma quest√£o de efici√™ncia nem sempre), os dados do formato de um idioma para o formato de outro.  Como resultado, Q e Python vivem em uma simbiose t√£o estreita que os limites entre eles s√£o apagados.  Como resultado, um programador, por um lado, tem acesso total a in√∫meras bibliotecas √∫teis do Python; por outro, ele obt√©m uma base r√°pida para trabalhar com big data integrado no Python, o que √© especialmente √∫til para os envolvidos no aprendizado ou modelagem de m√°quinas. <br><br>  Trabalhando com Q em Python: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> &gt;&gt;&gt; q() <span class="hljs-number"><span class="hljs-number">2.</span></span>q)trade:([]date:();sym:();qty:()) <span class="hljs-number"><span class="hljs-number">3.</span></span> q)\ <span class="hljs-number"><span class="hljs-number">4.</span></span> &gt;&gt;&gt; q.insert(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, (date(<span class="hljs-number"><span class="hljs-number">2006</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>)) <span class="hljs-number"><span class="hljs-number">5.</span></span> k(<span class="hljs-string"><span class="hljs-string">',0'</span></span>) <span class="hljs-number"><span class="hljs-number">6.</span></span> &gt;&gt;&gt; q.insert(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, (date(<span class="hljs-number"><span class="hljs-number">2006</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">'MSFT'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>)) <span class="hljs-number"><span class="hljs-number">7.</span></span> k(<span class="hljs-string"><span class="hljs-string">',1'</span></span>)</code> </pre><br><h3>  Refer√™ncias </h3><br>  Site da empresa - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://kx.com/</a> <br>  Site para desenvolvedores - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://code.kx.com/v2/</a> <br>  Livro Q For Mortals (em ingl√™s) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://code.kx.com/q4m3/</a> <br>  Artigos sobre o t√≥pico de aplicativos KDB + / Q de funcion√°rios da kx - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://code.kx.com/v2/wp/</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446412/">https://habr.com/ru/post/pt446412/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446396/index.html">Zerar o contador da semana GPS</a></li>
<li><a href="../pt446400/index.html">Dmitry Dumik, Chatfuel: Sobre o Y Combinator, empreendedorismo tecnol√≥gico, mudan√ßa comportamental e conscientiza√ß√£o</a></li>
<li><a href="../pt446402/index.html">Aplicativos multil√≠ngues em Angular</a></li>
<li><a href="../pt446404/index.html">Alternativas modernas ao PGP</a></li>
<li><a href="../pt446408/index.html">DRO universal baseado em Arduino Nano - shDRO</a></li>
<li><a href="../pt446414/index.html">Uma coisa boa n√£o √© chamada de ferrugem</a></li>
<li><a href="../pt446418/index.html">Cloudflare introduziu seu pr√≥prio servi√ßo VPN com base no aplicativo 1.1.1.1 para dispositivos m√≥veis</a></li>
<li><a href="../pt446422/index.html">QuietOn - fones de ouvido que matam ...</a></li>
<li><a href="../pt446424/index.html">Hist√≥rico de um relat√≥rio</a></li>
<li><a href="../pt446428/index.html">Como a planta do zang√£o de RH foi constru√≠da</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>