<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçä ü§µ üôéüèª Usando Fastify e Preact para prototipar aplicativos da Web rapidamente üë¥üèΩ üëâüèæ üöµüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O autor do material, cuja tradu√ß√£o publicamos hoje, deseja compartilhar uma hist√≥ria sobre quais tecnologias ele usa para desenvolver rapidamente prot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Usando Fastify e Preact para prototipar aplicativos da Web rapidamente</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/442652/">  O autor do material, cuja tradu√ß√£o publicamos hoje, deseja compartilhar uma hist√≥ria sobre quais tecnologias ele usa para desenvolver rapidamente prot√≥tipos de aplicativos da web.  Essas tecnologias incluem as bibliotecas Fastify e Preact.  Ele tamb√©m usa a biblioteca htm.  Ele se integra facilmente ao Preact e √© usado para descrever elementos DOM usando constru√ß√µes intuitivas que lembram JSX.  No entanto, para trabalhar com isso, voc√™ n√£o precisa de um transpiler como o Babel.  Tendo demonstrado as ferramentas de desenvolvimento de prototipagem e os m√©todos para trabalhar com ele, o autor do material mostrar√° como empacotar esses aplicativos em cont√™ineres do Docker.  Isso facilita a demonstra√ß√£o de aplicativos para todos os interessados. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/iq/mq/4a/iqmq4a-j0p_qnlayhqdbmbb2au4.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Iniciar</font> </h2><br>  Cheguei ao uso do conjunto de tecnologias acima mencionado, h√° algumas semanas, quando precisava criar um prot√≥tipo de aplicativo da Web muito simples, projetado para testar, juntamente com meus colegas, algumas suposi√ß√µes. <br><br>  Minha experi√™ncia foi extremamente bem-sucedida.  Consegui criar um prot√≥tipo muito rapidamente, meus colegas puderam experiment√°-lo convenientemente, eles conseguiram expressar rapidamente suas impress√µes sobre ele.  Ao mesmo tempo, eles poderiam testar o projeto mesmo se o Node.js e o NPM n√£o estivessem instalados em seus computadores. <br><br>  Tudo isso me levou √† ideia de que eu deveria escrever material sobre minha abordagem √† prototipagem r√°pida de aplicativos da web.  √â poss√≠vel que essa abordagem seja √∫til para outra pessoa.  Para aqueles que j√° est√£o familiarizados com o Fastify e o Preact, descreverei imediatamente o mais importante, o que lhes permitir√° colocar imediatamente minhas id√©ias em pr√°tica. <br><br><h2>  <font color="#3AC1EF">Id√©ias principais</font> </h2><br>  Se voc√™ j√° conhece o Fastify e o Preact e deseja aprender sobre como organizar o desenvolvimento de projetos com base nessas tecnologias, voc√™ est√° literalmente a alguns passos do que deseja.  Ou seja, estamos falando dos seguintes comandos: <br><br><pre><code class="plaintext hljs">git clone https://github.com/lmammino/fastify-preact-htm-boilerplate.git my-new-project cd my-new-project rm -rf .git npm install</code> </pre> <br>  Obviamente, voc√™ pode alterar o nome do projeto, <code>my-new-project</code> , para o nome do seu projeto. <br><br>  Depois de instalar tudo o que voc√™ precisa, voc√™ pode come√ßar a trabalhar no projeto.  Ou seja, estamos falando sobre o seguinte: <br><br><ul><li>  A pasta <code>src/ui</code> cont√©m arquivos da parte do cliente do aplicativo (aqui s√£o usados ‚Äã‚Äão Preact e o htm). </li><li>  A pasta <code>src/server</code> cont√©m arquivos relacionados ao lado do servidor do aplicativo (o Fastify √© usado aqui). </li></ul><br>  Editando os arquivos apropriados, voc√™ pode executar o projeto: <br><br><pre> <code class="plaintext hljs">npm start</code> </pre> <br>  Depois disso, voc√™ pode test√°-lo acessando o endere√ßo <code>localhost:3000</code> no navegador. <br><br>  E mais uma coisa.  Se voc√™ gostou do meu desenvolvimento, ficarei imensamente grato pela estrela no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> . <br><br>  Agora, vejamos as tecnologias usadas aqui e os recursos de trabalhar com elas. <br><br><h2>  <font color="#3AC1EF">Fastify</font> </h2><br>  Fastify √© uma estrutura da web r√°pida e econ√¥mica para Node.js.  Este projeto foi originalmente criado por dois programadores.  Agora, a equipe de quem trabalha nele tem 10 pessoas, mais de 130 pessoas ajudam no desenvolvimento do projeto, ele coletou quase 10.000 estrelas no GitHub. <br><br>  O Fastify foi influenciado por estruturas do Node.js. como Express e Hapi, que j√° existem h√° algum tempo.  Ele foi originalmente destinado √† produtividade, √† conveni√™ncia dos programadores e √† expans√£o de seus recursos com a ajuda de plugins.  A prop√≥sito, esse √© um dos meus recursos favoritos do Fastify. <br><br>  Se voc√™ n√£o estiver familiarizado com a estrutura Fastify ou quiser conhec√™-la melhor, posso recomendar sua <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> oficial. <br><br>  Note-se que eu estou relacionado ao Fastify.  Sou membro da equipe principal de desenvolvimento e estou principalmente comprometido em apoiar o site do projeto e trabalhar em sua documenta√ß√£o. <br><br><h2>  <font color="#3AC1EF">Preact</font> </h2><br>  O Preact √© uma biblioteca para o desenvolvimento de interfaces de usu√°rio para projetos da Web, criada por uma pessoa como um substituto compacto e r√°pido para o React.  Esse projeto acabou sendo bastante bem-sucedido, agora toda uma equipe de desenvolvedores est√° envolvida nele, no GitHub ele marcou mais de 20.000 estrelas. <br><br>  Uma das raz√µes pelas quais eu gosto do Preact √© que esta biblioteca possui uma camada extens√≠vel para descrever os componentes visuais do aplicativo.  Em circunst√¢ncias normais, essa biblioteca pode ser usada usando JSX em combina√ß√£o com Babel para traduzir o c√≥digo, mas se voc√™ n√£o deseja instalar o Babel e configurar o processo de cria√ß√£o do aplicativo, pode usar o Preact, por exemplo, junto com a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">htm</a> , que usa literais de modelo e n√£o requer transpila√ß√£o ao iniciar projetos nos quais √© usado em navegadores modernos. <br><br>  Neste artigo, usaremos a biblioteca htm e em breve consideraremos alguns exemplos. <br><br><h2>  <font color="#3AC1EF">Vis√£o Geral do Projeto</font> </h2><br>  Aqui, examinamos todo o processo de cria√ß√£o de um projeto.  Nosso objetivo ser√° desenvolver um aplicativo Web simples que exiba informa√ß√µes sobre a hora no servidor no momento de seu lan√ßamento.  Aqui, para tornar mais claro o que procuraremos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d8/9fe/c12/4d89fec1291d3ab9b66f7673af992d06.png"></div><br>  <i><font color="#999999">Aplicativo no navegador</font></i> <br><br>  Este √© um SPA (aplicativo de p√°gina √∫nica), no qual Preact e htm s√£o usados ‚Äã‚Äãpara formar sua parte do cliente, e o Fastify √© usado para criar uma API projetada para receber o tempo do servidor. <br><br>  Um leitor atento pode perceber que a p√°gina mostrada na figura anterior tem um √≠cone favicon bastante.  √â verdade que ele √© muito pequeno l√°, ent√£o vou facilitar a tarefa para aqueles que, quebrando os olhos, est√£o tentando decifrar.  Aqui est√° uma vers√£o ampliada dele. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aaa/3a8/c3b/aaa3a8c3b25bba5f361af23d9af0f22b.jpg"></div><br>  <i><font color="#999999">Favicon</font></i> <br><br><h2>  <font color="#3AC1EF">Configurando o Lado do Servidor do Aplicativo</font> </h2><br>  Vamos come√ßar criando uma nova pasta: <br><br><pre> <code class="plaintext hljs">mkdir server-time cd server-time</code> </pre> <br>  Agora inicialize o projeto NPM e instale o Fastify: <br><br><pre> <code class="plaintext hljs">npm init -y npm i --save fastify@next fastify-static@next fastify-cli</code> </pre> <br>  Observe que eu usei a constru√ß√£o <code>@next</code> ao descrever alguns <code>@next</code> depend√™ncia.  Isso √© feito para que o projeto use a biblioteca Fastify 2, que est√° atualmente em um estado candidato a lan√ßamento, mas que em breve se tornar√° a principal vers√£o est√°vel. <br><br>  Observe que voc√™ tamb√©m pode criar um novo projeto baseado no Fastify usando a <code>fastify-cli</code> comando <code>fastify-cli</code> : <br><br><pre> <code class="plaintext hljs">npx fastify-cli generate server-time</code> </pre> <br>  No momento da reda√ß√£o deste material, essa equipe cria um projeto projetado para usar o Fastify 1.x, mas muito em breve, ap√≥s o lan√ßamento do Fastify 2, essa ferramenta ser√° atualizada. <br><br>  Vamos analisar os pacotes instalados: <br><br><ul><li>  <code>fastify</code> √© um componente central da estrutura. </li><li>  <code>fastify-static</code> √© um plug-in adicional que permite a veicula√ß√£o conveniente de arquivos est√°ticos com o servidor Fastify. </li><li>  <code>fastify-cli</code> √© uma ferramenta de linha de comando que permite criar projetos com base no Fastify. </li></ul><br>  No momento, estamos prontos para criar uma API baseada no Fastify.  Ent√£o, vamos colocar o c√≥digo do <code>src/server/server.js</code> : <br><br><pre> <code class="plaintext hljs">const path = require('path') module.exports = async function(fastify, opts) { //      `src/ui` fastify.register(require('fastify-static'), {   root: path.join(__dirname, '..', 'ui'), }) //     API fastify.get('/api/time', async (request, reply) =&gt; {   return { time: new Date().toISOString() } }) }</code> </pre> <br>  Acredito que o c√≥digo acima se explica bem, mas h√° alguns detalhes interessantes que merecem ser discutidos.  Isso ser√° especialmente √∫til para aqueles que n√£o t√™m experi√™ncia com o Fastify. <br><br>  A primeira coisa em que voc√™ pode prestar aten√ß√£o neste c√≥digo √© que a palavra <code>async</code> chave <code>async</code> √© usada aqui.  O Fastify suporta o desenvolvimento de estilo ass√≠ncrono / aguardado e uma abordagem de retorno de chamada mais tradicional.  O que exatamente escolher depende das prefer√™ncias de um desenvolvedor em particular. <br><br>  Outro detalhe interessante √© que definimos o servidor aqui como um m√≥dulo exportado.  Este m√≥dulo (no jarg√£o do Fastify, isso √© chamado de "plugin") √© uma fun√ß√£o que assume como argumento uma inst√¢ncia do <code>fastify</code> ( <code>fastify</code> ) e um conjunto de op√ß√µes ( <code>opts</code> ).  Dentro da declara√ß√£o do m√≥dulo, podemos usar uma inst√¢ncia de <code>fastify</code> para registrar plugins.  √â exatamente o que acontece com o <code>fastify-static</code> in <code>fastify-static</code> .  Tamb√©m podemos descrever pontos de extremidade HTTP usando m√©todos especiais como <code>fastify.get</code> e <code>fastify.post</code> . <br><br>  A abordagem modular usada aqui, embora pare√ßa um pouco incomum, tem suas vantagens.  Para come√ßar, deve-se notar que ele permite combinar v√°rios servidores.  Imagine que voc√™ criou um servidor projetado para servir um blog e outro para um f√≥rum.  Eles podem ser facilmente integrados a um aplicativo existente, anexando-os a caminhos como <code>/blog</code> e <code>/forum</code> . <br><br>  Al√©m disso, essa abordagem permite abstrair aplicativos e subaplica√ß√µes das liga√ß√µes do servidor (por exemplo, liga√ß√£o de soquete), passando a solu√ß√£o para esta tarefa para o aplicativo raiz ou para o <code>fastify-cli</code> . <br><br>  Inicie o servidor usando a <code>fastify</code> linha de comando <code>fastify</code> : <br><br><pre> <code class="plaintext hljs">node_modules/.bin/fastify start --log-level info src/server/server.js</code> </pre> <br>  Para simplificar nossa vida, podemos adicionar este comando √† se√ß√£o de <code>scripts</code> do nosso arquivo <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">{ "scripts": {   "start": "fastify start --log-level info src/server/server.js" } }</code> </pre> <br>  Antes de realmente iniciar o servidor, precisamos garantir que haja uma pasta na qual os recursos est√°ticos estejam localizados.  Caso contr√°rio, o <code>fastify-static</code> gerar√° <code>fastify-static</code> erro.  Crie esta pasta: <br><br><pre> <code class="plaintext hljs">mkdir src/ui</code> </pre> <br>  Agora podemos iniciar o aplicativo com o comando <code>npm start</code> e navegar usando o navegador para <code>localhost:3000/api/time</code> . <br><br>  Se tudo funcionar corretamente, no navegador voc√™ poder√° ver algo como o seguinte: <br><br><pre> <code class="plaintext hljs">{ "time": "2019-02-17T19:32:03.354Z" }</code> </pre> <br>  Neste ponto, voc√™ pode apreciar outro recurso interessante do Fastify.  Est√° no fato de que a serializa√ß√£o JSON, no caso de uma determinada rota retornar um objeto, √© aplicada automaticamente. <br><br>  Agora, o trabalho na API do servidor est√° conclu√≠do.  Vamos ter um frontend. <br><br><h2>  <font color="#3AC1EF">Configura√ß√£o de front-end</font> </h2><br>  Todo o c√≥digo do nosso projeto relacionado ao frontend estar√° localizado na pasta <code>src/ui</code> .  Ele ser√° composto por 5 arquivos: <br><br><ul><li>  <code>app.js</code> - pr√©-c√≥digo do aplicativo. </li><li>  <code>bootstrap.min.css</code> - c√≥digo CSS para estilizar o aplicativo (√© retirado diretamente da estrutura do Bootstrap). </li><li>  <code>favicon.ico</code> - arquivo favicon.  Se voc√™ estiver desenvolvendo um aplicativo s√©rio, n√£o poder√° ficar sem um bom arquivo favicon. </li><li>  <code>index.html</code> √© o principal arquivo HTML do nosso aplicativo de uma p√°gina. </li><li>  <code>preacthtm.js</code> - c√≥digo das bibliotecas Preact e htm. </li></ul><br>  Primeiro, coloque os arquivos na pasta, que s√£o estilos, bibliotecas e o √≠cone favicon: <br><br><pre> <code class="plaintext hljs">curl "https://unpkg.com/htm@2.0.0/preact/standalone.js" &gt; src/ui/preacthtm.js curl "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" &gt; src/ui/bootstrap.min.css curl "https://github.com/lmammino/fastify-preact-htm-boilerplate/blob/master/src/ui/favicon.ico?raw=true" &gt; src/ui/favicon.ico</code> </pre> <br>  Agora crie o arquivo <code>src/ui/index.html</code> : <br><br><pre> <code class="plaintext hljs">&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;   &lt;meta charset="utf-8" /&gt;   &lt;meta     name="viewport"     content="width=device-width, initial-scale=1, shrink-to-fit=no"   /&gt;   &lt;!-- Bootstrap CSS --&gt;   &lt;link rel="stylesheet" href="/bootstrap.min.css" /&gt;   &lt;title&gt;My awesome server time&lt;/title&gt; &lt;/head&gt; &lt;body&gt;   &lt;div id="app"&gt;&lt;/div&gt;   &lt;!-- JavaScript --&gt;   &lt;script src="/preacthtm.js"&gt;&lt;/script&gt;   &lt;script src="/app.js"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  Temos diante de n√≥s uma p√°gina HTML muito comum com a qual carregamos todos os recursos (CSS e JS) e criamos um elemento <code>&lt;div&gt;</code> vazio com o <code>app</code> identificador, no qual produziremos nosso aplicativo durante a execu√ß√£o do projeto. <br><br>  Agora d√™ uma olhada no c√≥digo do aplicativo, que deve estar no <code>src/ui/app.js</code> : <br><br><pre> <code class="plaintext hljs">/*  htmPreact */ const { html, Component, render } = htmPreact class App extends Component { componentDidMount() {   this.setState({ loading: true, time: null })   fetch('/api/time')     .then(response =&gt; response.json())     .then(data =&gt; this.setState({ loading: false, time: data.time })) } render(props, state) {   return html`     &lt;div class="container mt-5"&gt;       &lt;div class="row justify-content-center"&gt;         &lt;div class="col"&gt;           &lt;h1&gt;Hello from your new App&lt;/h1&gt;           &lt;div&gt;             ${state.loading &amp;&amp;               html`                 &lt;p&gt;Loading time from server...&lt;/p&gt;               `} ${state.time &amp;&amp;               html`                 &lt;p&gt;Time from server: &lt;i&gt;&lt;font color="#999999"&gt;${state.time}&lt;/font&gt;&lt;/i&gt; &lt;/p&gt;               `}           &lt;/div&gt;           &lt;hr /&gt;           &lt;div&gt;             Have fun changing the code from this boilerplate:             &lt;ul&gt;               &lt;li&gt;UI code available at &lt;code&gt;/src/ui&lt;/code&gt;&lt;/li&gt;               &lt;li&gt;Server-side code available at &lt;code&gt;/src/server&lt;/code&gt;&lt;/li&gt;             &lt;/ul&gt;           &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   ` } } render( html`   &lt;${App} /&gt; `, document.getElementById('app') )</code> </pre> <br>  H√° apenas um componente est√°vel neste aplicativo chamado <code>App</code> .  O estado deste componente inclui 2 vari√°veis: <br><br><ul><li>  <code>loading</code> √© uma vari√°vel l√≥gica usada para indicar se uma solicita√ß√£o para a API do servidor est√° sendo executada em um determinado momento para obter informa√ß√µes sobre a hora do servidor. </li><li>  <code>time</code> - uma sequ√™ncia que cont√©m as informa√ß√µes de hora mais recentes recebidas do servidor. </li></ul><br>  Se voc√™ estiver familiarizado com o React, poder√° entender facilmente o c√≥digo acima. <br>  Usando Preact e htm, podemos criar componentes declarando classes que estendem a classe <code>Component</code> interna. <br><br>  Nesta classe, podemos descrever o comportamento de um componente usando m√©todos de ciclo de vida como <code>componentDidMount()</code> e tamb√©m usar um m√©todo que se comporta como um m√©todo <code>render()</code> regular do React. <br><br>  No nosso caso, assim que o componente √© anexado √† p√°gina (m√©todo <code>componentDidMount()</code> ), configuramos a propriedade de <code>loading</code> status e executamos uma solicita√ß√£o de API usando <code>fetch</code> . <br>  Depois que a solicita√ß√£o √© conclu√≠da, configuramos o valor da propriedade do estado do <code>time</code> e redefinimos a propriedade de <code>loading</code> como <code>false</code> . <br><br>  O m√©todo <code>render()</code> √© chamado automaticamente sempre que um estado de componente √© alterado ou quando novas propriedades s√£o passadas para ele.  Neste m√©todo, descrevemos o componente DOM usando htm. <br><br>  A biblioteca htm permite descrever n√≥s DOM usando literais de modelo com uma tag especial - <code>html</code> .  Dentro do nosso modelo literal, express√µes din√¢micas podem estar presentes, como aquelas que usamos para verificar o status e decidir o que exibir se o aplicativo estiver carregando dados do servidor e se os dados j√° est√£o carregado. <br><br>  Tamb√©m √© importante notar que precisamos criar uma inst√¢ncia do aplicativo e exibi-la em uma p√°gina HTML.  Isso √© feito usando a fun√ß√£o <code>render()</code> do objeto global <code>htmPreact</code> . <br><br>  Agora, o trabalho no aplicativo front-end est√° conclu√≠do.  Voc√™ pode reiniciar o servidor, v√° para <code>localhost:3000</code> e experimente o que acabamos de criar.  Por exemplo, voc√™ pode desenvolver o seu pr√≥prio com base neste aplicativo.  E quando o que voc√™ cria parecer interessante o suficiente para mostr√°-lo a outra pessoa, provavelmente ser√° √∫til embalar seu aplicativo em um cont√™iner do Docker. <br><br><h2>  <font color="#3AC1EF">Cont√™iner de aplicativos</font> </h2><br>  Acredito que a melhor maneira de mostrar aos outros seus novos pequenos projetos √© usar os recursos do Docker para esse fim. <br><br>  Gra√ßas ao Docker, qualquer pessoa que tentar executar seu aplicativo em casa ficar√° livre de pensar se ele possui a vers√£o apropriada do Node.js e do NPM instalados, ele n√£o precisar√° fazer o download do c√≥digo-fonte do aplicativo para garantir que, digitando a sequ√™ncia correta de comandos , instale suas depend√™ncias e inicie o servidor. <br><br>  Para compactar o aplicativo no cont√™iner do Docker, precisamos criar um <code>Dockerfile</code> muito simples na pasta raiz do nosso projeto: <br><br><pre> <code class="plaintext hljs">FROM node:11-alpine WORKDIR /app COPY . /app RUN npm install --production EXPOSE 3000 CMD ["npm", "start"]</code> </pre> <br>  Aqui descrevemos as seguintes a√ß√µes: <br><br><ul><li>  A imagem √© criada com base na imagem do Node.js. 11, constru√≠da com base no Alpine Linux. </li><li>  Tudo da pasta atual √© copiado para a pasta <code>/app</code> do cont√™iner. </li><li>  Depois disso, executamos o comando <code>npm install</code> para baixar e instalar as depend√™ncias.  O uso do sinalizador <code>--production</code> leva ao fato de que apenas as depend√™ncias necess√°rias para a implanta√ß√£o do projeto na produ√ß√£o ser√£o instaladas.  Isso acelera a cria√ß√£o da imagem se o projeto usar muitas depend√™ncias de desenvolvimento. </li><li>  Indicamos que o cont√™iner deve ter poro aberto 3000, no qual, por padr√£o, o servidor funcionar√°. </li><li>  No final, descrevemos um comando, <code>npm start</code> , que ser√° executado quando o cont√™iner iniciar.  Ela lan√ßa o aplicativo. </li></ul><br>  Para coletar a imagem para o cont√™iner, execute o seguinte comando: <br><br><pre> <code class="plaintext hljs">docker build -t server-time .</code> </pre> <br>  Ap√≥s alguns segundos, a imagem deve estar pronta e voc√™ poder√° iniciar o cont√™iner: <br><br><pre> <code class="plaintext hljs">docker run -it -p 3000:3000 server-time</code> </pre> <br>  A <code>-p</code> permite configurar a conex√£o entre a porta do cont√™iner 3000 e a porta local 3000. Isso permitir√° acessar o aplicativo em cont√™iner no <code>localhost:3000</code> . <br>  Agora voc√™ est√° pronto para compartilhar seu aplicativo com outras pessoas.  Para execut√°-lo no ambiente do Docker, basta, desde que o Docker esteja instalado no computador, executar os dois comandos acima em sua pasta. <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  Neste artigo, falamos sobre como criar um ambiente para o r√°pido desenvolvimento de aplicativos da Web usando o Fastify e o Preact.  Al√©m disso, falamos sobre como compartilhar o aplicativo com outras pessoas usando o Docker. <br><br>  Como mencionado acima, as ferramentas propostas s√£o projetadas para prototipagem r√°pida, ent√£o agora voc√™ deve estar se perguntando o que est√° faltando aqui para desenvolver aplicativos reais.  Provavelmente, quando voc√™ fala de "aplicativos reais", quer dizer os seguintes recursos: <br><br><ul><li>  Compila√ß√£o de recursos da parte front-end do aplicativo: cria√ß√£o de arquivos (pacotes configur√°veis) otimizados, possivelmente usando Webpack, Babel ou outras ferramentas. </li><li>  Roteamento no front-end do aplicativo. </li><li>  Renderiza√ß√£o do servidor </li><li>  Meios de armazenamento permanente de dados. </li></ul><br>  Todas essas possibilidades para o desenvolvimento de aplicativos reais ainda n√£o foram adicionadas ao conjunto de tecnologias discutido aqui, ent√£o, por enquanto, percebo isso como uma ferramenta para o desenvolvimento de prot√≥tipos.  Tenho certeza de que, se voc√™ gostou do que viu e considera tudo isso como base para aplicativos futuros que resolvem problemas reais, pode encontrar facilmente o que precisa e criar aplicativos prontos para uso em Fastify e Preact libera√ß√£o de produ√ß√£o. <br><br>  <b>Caros leitores!</b>  Como voc√™ prot√≥tipo de aplicativos da web? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt442652/">https://habr.com/ru/post/pt442652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt442642/index.html">O que ler em mar√ßo: 22 novos livros para profissionais de marketing, gerentes, desenvolvedores e designers</a></li>
<li><a href="../pt442644/index.html">A maioria das habilidades que n√£o s√£o de programa√ß√£o aumentam o valor do desenvolvedor</a></li>
<li><a href="../pt442646/index.html">Redes Kubernetes: ingresso</a></li>
<li><a href="../pt442648/index.html">Ir mecanismos de aloca√ß√£o</a></li>
<li><a href="../pt442650/index.html">An√°lise e otimiza√ß√£o de aplicativos React</a></li>
<li><a href="../pt442654/index.html">Mudando para Next.js e acelerando o carregamento da p√°gina inicial do manifold.co 7,5 vezes</a></li>
<li><a href="../pt442658/index.html">8 truques para trabalhar com CSS: paralaxe, rodap√© fixo e outros</a></li>
<li><a href="../pt442660/index.html">Matem√°tica reconciliando Newton com o mundo qu√¢ntico</a></li>
<li><a href="../pt442662/index.html">Como assistir SDDL e n√£o quebrar os olhos em ponto e v√≠rgula</a></li>
<li><a href="../pt442664/index.html">QIWI Kitchen 6 de fevereiro - como foi + apresenta√ß√µes dos palestrantes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>