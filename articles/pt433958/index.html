<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õé üõÄüèª üñïüèª Aplicativos TDD no Spring Boot: trabalhando com um banco de dados üë®üèø‚Äç‚öïÔ∏è üßïüèø üê™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O segundo artigo da s√©rie "Desenvolvimento orientado a teste de aplicativos no Spring Boot" e desta vez vou falar sobre o teste de acesso ao banco de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplicativos TDD no Spring Boot: trabalhando com um banco de dados</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433958/"><p>  O segundo artigo da s√©rie "Desenvolvimento orientado a teste de aplicativos no Spring Boot" e desta vez vou falar sobre o teste de acesso ao banco de dados, um aspecto importante do teste de integra√ß√£o.  Explicarei como determinar a interface de um servi√ßo futuro para acesso a dados por meio de testes, como usar bancos de dados incorporados na mem√≥ria para testes, trabalhar com transa√ß√µes e fazer upload de dados de teste no banco de dados. </p><a name="habracut"></a><br><p>  Eu n√£o vou falar muito sobre TDD e testes em geral, convido todos a ler o primeiro artigo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como construir uma pir√¢mide no porta-malas ou Desenvolvimento orientado a testes de aplicativos na revista Spring Boot / geek</a> </p><br><p>  Come√ßarei, como da √∫ltima vez, com uma pequena parte te√≥rica, e passarei ao teste de ponta a ponta. </p><br><h1 id="piramida-testirovaniya">  Testando a pir√¢mide </h1><br><p>  Para come√ßar, uma descri√ß√£o pequena, mas necess√°ria, de uma entidade t√£o importante em testes como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A Pir√¢mide de Testes</a> ou <em>a pir√¢mide de testes</em> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f6c/930/f2d/f6c930f2d4ae8a6068696ace34e9566e.png" alt="imagem"></p><br><p>  (extra√≠do da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pir√¢mide de teste pr√°tico</a> ) </p><br><p>  A pir√¢mide de teste √© a abordagem quando os testes s√£o organizados em v√°rios n√≠veis. </p><br><ul><li>  <strong>Os</strong> testes de <strong>interface do usu√°rio</strong> (ou de ponta a ponta, <strong>E2E</strong> ) s√£o poucos e lentos, mas testam o aplicativo real - sem zombarias e hom√≥logos de teste.  As empresas geralmente pensam nesse n√≠vel e todas as estruturas do BDD vivem aqui (consulte Pepino em um artigo anterior). </li><li>  Eles s√£o seguidos por <strong>testes de integra√ß√£o</strong> (servi√ßo, componente - cada um tem sua pr√≥pria terminologia), que j√° se concentra em um componente espec√≠fico (servi√ßo) do sistema, isolando-o de outros componentes atrav√©s de moki / doubles, mas ainda verificando a integra√ß√£o com sistemas externos reais - esses testes s√£o conectados para o banco de dados, envie solicita√ß√µes REST, eu trabalho com uma fila de mensagens.  De fato, s√£o testes que verificam a integra√ß√£o da l√≥gica de neg√≥cios com o mundo exterior. </li><li>  No fundo, h√° <strong>testes</strong> r√°pidos de <strong>unidade</strong> que testam os blocos m√≠nimos de c√≥digo (classes, m√©todos) em completo isolamento. </li></ul><br><p>  O Spring ajuda a escrever testes para cada n√≠vel - <em>mesmo para testes de unidade</em> , embora isso possa parecer estranho, porque no mundo dos testes de unidade, nenhum conhecimento sobre a estrutura deveria existir.  Depois de escrever o teste E2E, mostrarei como o Spring permite que at√© coisas t√£o puramente de "integra√ß√£o", como controladores, sejam testadas isoladamente. </p><br><p>  Mas vou come√ßar do topo da pir√¢mide - o teste lento da interface do usu√°rio, que inicia e testa um aplicativo completo. </p><br><h1 id="end-to-end-test">  Teste de ponta a ponta </h1><br><p>  Ent√£o, um novo recurso: </p><br><pre><code class="plaintext hljs">Feature: A list of available cakes Background: catalogue is updated Given the following items are promoted | Title | Price | | Red Velvet | 3.95 | | Victoria Sponge | 5.50 | Scenario: a user visiting the web-site sees the list of items Given a new user, Alice When she visits Cake Factory web-site Then she sees that "Red Velvet" is available with price ¬£3.95 And she sees that "Victoria Sponge" is available with price ¬£5.50</code> </pre> <br><blockquote>  E aqui est√° um aspecto imediatamente interessante - o que fazer com o teste anterior, sobre a sauda√ß√£o na p√°gina principal?  Parece n√£o ser mais relevante, depois de iniciar o site na p√°gina principal, j√° haver√° um diret√≥rio, n√£o uma sauda√ß√£o.  N√£o h√° uma resposta √∫nica, eu diria - depende da situa√ß√£o.  Mas o principal conselho - n√£o se apegue aos testes!  Exclua quando perderem relev√¢ncia, reescreva para facilitar a leitura.  Especialmente testes E2E - essa deve ser, de fato, uma <strong>especifica√ß√£o ativa e atual</strong> .  No meu caso, acabei de excluir os testes antigos e substitu√≠-los por novos, usando algumas das etapas anteriores e adicionando outras inexistentes. </blockquote><p>  Agora cheguei a um ponto importante - a escolha da tecnologia para armazenar dados.  De acordo com a abordagem <em>enxuta</em> , gostaria de adiar a escolha at√© o √∫ltimo momento - quando saberei com certeza se o modelo relacional ou n√£o, quais s√£o os requisitos de consist√™ncia, transacionalidade.  Em geral, existem solu√ß√µes para isso - por exemplo, a cria√ß√£o de <strong>g√™meos</strong> de <strong>teste</strong> e v√°rios armazenamentos <strong>na mem√≥ria</strong> , mas at√© agora n√£o quero complicar o artigo e escolher imediatamente a tecnologia - bancos de dados relacionais.  Mas, a fim de preservar pelo menos alguma possibilidade de escolha de um banco de dados, adicionarei uma abstra√ß√£o - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spring Data JPA</a> .  A pr√≥pria JPA √© uma especifica√ß√£o bastante abstrata para acessar bancos de dados relacionais, e o Spring Data torna seu uso ainda mais f√°cil. </p><br><blockquote>  O Spring Data JPA usa o Hibernate como um provedor por padr√£o, mas tamb√©m suporta outras tecnologias, como EclipseLink e MyBatis.  Para pessoas que n√£o est√£o muito familiarizadas com a Java Persistence API - JPA, √© como uma interface e o Hibernate √© uma classe que a implementa. </blockquote><p>  Portanto, para adicionar suporte ao JPA, adicionei algumas depend√™ncias: </p><br><pre> <code class="plaintext hljs">implementation('org.springframework.boot:spring-boot-starter-data-jpa') runtime('com.h2database:h2')</code> </pre> <br><p>  Como banco de dados, usarei o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">H2</a> - um banco de dados incorporado escrito em Java, com a capacidade de trabalhar no modo de mem√≥ria. </p><br><p>  Usando o Spring Data JPA, defino imediatamente uma interface para acessar dados: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ }</code> </pre> <br><p>  E a ess√™ncia: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"cakes"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span>(strategy = GenerationType.IDENTITY) Long id; <span class="hljs-meta"><span class="hljs-meta">@NotBlank</span></span> String title; <span class="hljs-meta"><span class="hljs-meta">@Positive</span></span> BigDecimal price; <span class="hljs-meta"><span class="hljs-meta">@NotBlank</span></span> <span class="hljs-meta"><span class="hljs-meta">@NaturalId</span></span> String sku; <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> promoted; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getClass() != o.getClass()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; CakeEntity cakeEntity = (CakeEntity) o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Objects.equals(title, cakeEntity.title); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Objects.hash(title); } }</code> </pre> <br><p>  Existem algumas coisas menos √≥bvias na descri√ß√£o da entidade. </p><br><ul><li>  <code>@NaturalId</code> para o campo <code>sku</code> .  Este campo √© usado como um "identificador natural" para verificar a igualdade de entidades - o uso de todos os campos ou campos <code>@Id</code> nos m√©todos <code>equals</code> / <code>hashCode</code> √© um anti-padr√£o.  Est√° bem escrito sobre como verificar corretamente a igualdade de entidades, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </li><li>  Para reduzir um pouco o c√≥digo padr√£o, eu uso o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Project Lombok</a> - processador de anota√ß√£o para Java.  Ele permite que voc√™ adicione v√°rias coisas √∫teis, como <code>@Builder</code> - para gerar automaticamente um construtor para uma classe e o <code>@AllArgsConstructor</code> para criar um construtor para todos os campos. </li></ul><br><p>  Uma implementa√ß√£o de interface ser√° fornecida automaticamente pelo Spring Data. </p><br><h1 id="vniz-po-piramide">  Abaixo da pir√¢mide </h1><br><p>  Agora √© a hora de descer para o pr√≥ximo n√≠vel da pir√¢mide.  Como regra geral, eu recomendaria que voc√™ <strong>sempre iniciasse com o teste e2e</strong> , pois isso permitir√° que voc√™ determine o "objetivo final" e os limites do novo recurso, mas n√£o existem mais regras r√≠gidas.  N√£o √© necess√°rio escrever um teste de integra√ß√£o primeiro, antes de passar para o n√≠vel da unidade.  Na maioria das vezes, √© mais conveniente e mais simples - e √© natural que ocorra. </p><br><p>  Mas agora, especificamente, gostaria de quebrar imediatamente essa regra e escrever um teste de unidade que ajudar√° a determinar a interface e o contrato de um novo componente que ainda n√£o existe.  O controlador deve retornar um modelo que ser√° preenchido a partir de um determinado componente X, e eu escrevi este teste: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ExtendWith</span></span>(MockitoExtension.class) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IndexControllerTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> CakeFinder cakeFinder; <span class="hljs-meta"><span class="hljs-meta">@InjectMocks</span></span> IndexController indexController; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;Cake&gt; cakes = Set.of(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(<span class="hljs-string"><span class="hljs-string">"Test 1"</span></span>, <span class="hljs-string"><span class="hljs-string">"¬£10"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(<span class="hljs-string"><span class="hljs-string">"Test 2"</span></span>, <span class="hljs-string"><span class="hljs-string">"¬£10"</span></span>)); <span class="hljs-meta"><span class="hljs-meta">@BeforeEach</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ when(cakeFinder.findPromotedCakes()).thenReturn(cakes); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldReturnAListOfFoundPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ModelAndView index = indexController.index(); assertThat(index.getModel()).extracting(<span class="hljs-string"><span class="hljs-string">"cakes"</span></span>).contains(cakes); } }</code> </pre> <br><p>  Este √© um teste de unidade puro - sem contextos, sem bancos de dados aqui, apenas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mockito</a> para mok.  E esse teste √© apenas uma boa demonstra√ß√£o de como o Spring ajuda os testes de unidade - o <em>controlador no Spring MVC √© apenas uma classe cujos m√©todos aceitam par√¢metros de tipos comuns e retornam objetos POJO - View Models</em> .  N√£o h√° solicita√ß√µes HTTP, respostas, cabe√ßalhos, JSON, XML - tudo isso ser√° aplicado automaticamente na pilha na forma de conversores e serializadores.  Sim, existe uma pequena "dica" para Spring na forma de <code>ModelAndView</code> , mas esse √© um POJO comum e voc√™ pode at√© se livrar dele, se desejar, √© necess√°rio especificamente para os controladores da interface do usu√°rio. </p><br><blockquote>  N√£o vou falar muito sobre Mockito, voc√™ pode ler tudo na documenta√ß√£o oficial.  Especificamente, existem apenas pontos interessantes neste teste - eu uso o <code>MockitoExtension.class</code> como <code>MockitoExtension.class</code> teste e ele gera automaticamente mokas para os campos anotados por <code>@Mock</code> e injeta esses mokas como depend√™ncias no construtor do objeto no campo marcado como <code>@InjectMocks</code> .  Voc√™ pode fazer tudo isso manualmente usando o m√©todo <code>Mockito.mock()</code> e, em seguida, crie uma classe. </blockquote><p>  E esse teste ajuda a determinar o m√©todo do novo componente - <code>findPromotedCakes</code> , uma lista de bolos que queremos mostrar na p√°gina principal.  Ele n√£o determina o que √© ou como deve funcionar com o banco de dados.  A √∫nica responsabilidade do controlador √© pegar o que foi transferido para ele e devolver os modelos ("bolos") em um campo espec√≠fico.  No entanto, o <code>CakeFinder</code> j√° possui o primeiro m√©todo na minha interface, o que significa que voc√™ pode escrever um teste de integra√ß√£o para ele. </p><br><blockquote>  Eu deliberadamente tornei todas as classes dentro do <strong>pacote de</strong> <code>cakes</code> <strong>privadas,</strong> para que ningu√©m fora do pacote pudesse us√°-las.  A √∫nica maneira de obter dados do banco de dados √© com a interface CakeFinder, que √© o meu ‚Äúcomponente X‚Äù para acessar o banco de dados.  Torna-se um "conector" natural, que eu posso travar facilmente se precisar testar algo isoladamente e n√£o tocar na base.  E sua √∫nica implementa√ß√£o √© o JpaCakeFinder.  E se, por exemplo, o tipo de banco de dados ou a fonte de dados mudar no futuro, ser√° necess√°rio adicionar uma implementa√ß√£o da interface <code>CakeFinder</code> sem alterar o c√≥digo que a utiliza. </blockquote><br><h1 id="integracionnyy-test-dlya-jpa-ispolzuya-datajpatest">  Teste de integra√ß√£o para JPA usando @DataJpaTest </h1><br><p>  Os testes de integra√ß√£o s√£o p√£o com manteiga.  De fato, tudo foi feito t√£o bem para testes de integra√ß√£o que, √†s vezes, os desenvolvedores n√£o querem ir para o n√≠vel da unidade ou negligenciar o n√≠vel da interface do usu√°rio.  Isso n√£o √© ruim nem bom - repito que o objetivo principal dos testes √© a confian√ßa.  E um conjunto de testes de integra√ß√£o r√°pidos e eficazes pode ser suficiente para fornecer essa confian√ßa.  No entanto, existe o perigo de que, com o tempo, esses testes sejam mais lentos ou lentos ou simplesmente iniciem o teste dos componentes isoladamente, em vez da integra√ß√£o. </p><br><p>  Os testes de integra√ß√£o podem executar o aplicativo como est√° ( <code>@SpringBootTest</code> ) ou seu componente separado (JPA, Web).  No meu caso, quero escrever um teste focado para JPA - portanto, n√£o preciso configurar controladores ou outros componentes.  A anota√ß√£o <code>@DataJpaTest</code> √© respons√°vel por isso no Spring Boot Test.  Esta √© uma <em>meta-</em> anota√ß√£o, ou seja,  Ele combina v√°rias anota√ß√µes diferentes que configuram diferentes aspectos do teste. </p><br><ul><li>  @AutoConfigureDataJpa </li><li>  @AutoConfigureTestDatabase </li><li>  @AutoConfigureCache </li><li>  @AutoConfigureTestEntityManager </li><li>  @Transactional </li></ul><br><p>  Primeiro, vou falar sobre cada um individualmente e depois mostro o teste conclu√≠do. </p><br><p>  <strong>@AutoConfigureDataJpa</strong> <br>  Ele carrega um conjunto inteiro de configura√ß√µes e define reposit√≥rios (gera√ß√£o autom√°tica de implementa√ß√µes para <code>CrudRepositories</code> ), ferramentas de migra√ß√£o para os bancos de dados FlyWay e Liquibase, conectando-se ao banco de dados usando o DataSource, o gerenciador de transa√ß√µes e, finalmente, o Hibernate.  De fato, este √© apenas um conjunto de configura√ß√µes relevantes para acessar dados - nem o <code>DispatcherServlet</code> do Web MVC, nem outros componentes est√£o inclu√≠dos aqui. </p><br><p>  <strong>@AutoConfigureTestDatabase</strong> <br>  Este √© um dos aspectos mais interessantes do teste JPA.  Essa configura√ß√£o <em>procura no caminho de classe um dos bancos de dados incorporados suportados e reconfigura o contexto para que o DataSource aponte para um banco de dados na mem√≥ria criado aleatoriamente</em> .  Como adicionei a depend√™ncia √† base H2, n√£o preciso fazer mais nada, apenas ter essa anota√ß√£o automaticamente para cada execu√ß√£o de teste fornecer√° uma base vazia, e isso √© incrivelmente conveniente. </p><br><p>  Vale lembrar que essa base estar√° completamente vazia, sem um esquema.  Para gerar o circuito, existem algumas op√ß√µes. </p><br><ol><li>  Use o recurso <strong>DDL</strong> autom√°tico do Hibernate.  O Spring Boot Test definir√° automaticamente esse valor como <code>create-drop</code> para que o Hibernate gere um esquema a partir da descri√ß√£o da entidade e o exclua no final da sess√£o.  Este √© um recurso incrivelmente poderoso do Hibernate, que √© muito √∫til para testes. </li><li>  Use migra√ß√µes criadas pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Flyway</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Liquibase</a> . </li></ol><br><p>  Voc√™ pode ler mais sobre as diferentes abordagens para inicializar o banco de dados na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . </p><br><p>  <strong>@AutoConfigureCache</strong> <br>  Apenas configura o cache para usar o NoOpCacheManager - ou seja,  n√£o armazene em cache nada.  Isso √© √∫til para evitar surpresas nos testes. </p><br><p>  <strong>@AutoConfigureTestEntityManager</strong> <br>  Adiciona um objeto <code>TestEntityManager</code> especial ao <code>TestEntityManager</code> , que por si s√≥ √© uma fera interessante.  <code>EntityManager</code> √© a classe principal da JPA, respons√°vel por adicionar entidades √† sess√£o, excluir e coisas semelhantes.  Somente quando, por exemplo, o Hibernate entra em opera√ß√£o - adicionar uma entidade a uma sess√£o n√£o significa que uma solicita√ß√£o ao banco de dados ser√° executada e o carregamento de uma sess√£o n√£o significa que uma solicita√ß√£o de sele√ß√£o ser√° executada.  Devido aos mecanismos internos do Hibernate, opera√ß√µes reais com o banco de dados ser√£o executadas no momento certo, que a pr√≥pria estrutura determinar√°.  Mas nos testes, pode ser necess√°rio enviar algo for√ßosamente ao banco de dados, porque o objetivo dos testes √© testar a integra√ß√£o.  E <code>TestEntityManager</code> √© apenas um auxiliar que ajudar√° algumas opera√ß√µes com o banco de dados a serem executadas √† for√ßa - por exemplo, <code>persistAndFlush()</code> for√ßar√° o Hibernate a executar todas as solicita√ß√µes. </p><br><p>  <strong>@Transactional</strong> <br>  Essa anota√ß√£o torna todos os testes da classe transacionais, com revers√£o autom√°tica da transa√ß√£o ap√≥s a conclus√£o do teste.  Este √© apenas um mecanismo para "limpar" o banco de dados antes de cada teste, porque, caso contr√°rio, voc√™ teria que excluir manualmente os dados de cada tabela. </p><br><blockquote>  Se um teste deve gerenciar uma transa√ß√£o n√£o √© uma pergunta t√£o simples e √≥bvia quanto parece.  Apesar da conveni√™ncia do estado ‚Äúlimpo‚Äù do banco de dados, a presen√ßa de <code>@Transactional</code> nos testes pode ser uma surpresa desagrad√°vel se o c√≥digo de ‚Äúbatalha‚Äù n√£o iniciar a transa√ß√£o em si, mas exigir uma j√° existente.  Isso pode levar ao fato de o teste de integra√ß√£o ser aprovado, mas quando o c√≥digo real √© executado a partir do controlador e n√£o do teste, o servi√ßo n√£o ter√° uma transa√ß√£o ativa e o m√©todo lan√ßar√° uma exce√ß√£o.  Embora isso pare√ßa perigoso, com testes de alto n√≠vel de testes de interface do usu√°rio, os testes transacionais n√£o s√£o t√£o ruins.  Na minha experi√™ncia, vi apenas uma vez, quando um teste de integra√ß√£o aprovado travou o c√≥digo de produ√ß√£o, o que claramente exigia a exist√™ncia de uma transa√ß√£o existente.  Mas se voc√™ ainda precisar verificar se os servi√ßos e os componentes gerenciam corretamente as transa√ß√µes, poder√° "bloquear" a anota√ß√£o <code>@Transactional</code> no teste com o modo desejado (por exemplo, n√£o inicie a transa√ß√£o). </blockquote><br><h1 id="integracionnyy-test-so-springboottest">  Teste de integra√ß√£o com @SpringBootTest </h1><br><p>  Tamb√©m quero observar que o <code>@DataJpaTest</code> n√£o √© um exemplo exclusivo de teste de integra√ß√£o focal, existem o <code>@WebMvcTest</code> , o <code>@DataMongoTest</code> e muitos outros.  Mas uma das anota√ß√µes de teste mais importantes continua sendo o <code>@SpringBootTest</code> , que inicia o aplicativo <em>"como est√°"</em> para os testes - com todos os componentes e integra√ß√µes configurados.  Uma quest√£o l√≥gica surge - se voc√™ pode executar o aplicativo inteiro, por que os testes focados no DataJpa, por exemplo?  Eu diria que n√£o h√° regras estritas aqui novamente. </p><br><p>  Se <em>for poss√≠vel</em> executar aplicativos sempre, isolar falhas nos testes, n√£o sobrecarregar e n√£o complicar novamente a instala√ß√£o do teste, √© claro que voc√™ pode e deve usar o @SpringBootTest. </p><br><p>  No entanto, na vida real, os aplicativos podem exigir muitas configura√ß√µes diferentes, conectar-se a sistemas diferentes e eu n√£o gostaria que meus testes de acesso ao banco de dados ca√≠ssem, porque  a conex√£o com a fila de mensagens n√£o est√° configurada.  Portanto, √© importante usar o bom senso e, para que o teste com a anota√ß√£o @SpringBootTest funcione, voc√™ precisa bloquear metade do sistema - isso faz sentido no @SpringBootTest? </p><br><h1 id="podgotovka-dannyh-dlya-testa">  Prepara√ß√£o de dados para o teste </h1><br><p>  Um dos pontos principais para o teste √© a prepara√ß√£o de dados.  Cada teste deve ser realizado isoladamente e preparar o ambiente antes de iniciar, levando o sistema ao estado desejado original.  A op√ß√£o mais f√°cil de fazer isso √© usar as anota√ß√µes <code>@BeforeAll</code> / <code>@BeforeAll</code> e adicionar entradas ao banco de dados usando o reposit√≥rio, <code>EntityManager</code> ou <code>TestEntityManager</code> .  Mas h√° outra op√ß√£o que permite executar um script preparado ou executar a consulta SQL desejada, que √© a anota√ß√£o <code>@Sql</code> .  Antes de executar o teste, o Spring Boot Test executar√° automaticamente o script especificado, eliminando a necessidade de adicionar o bloco <code>@BeforeAll</code> , e o <code>@Transactional</code> cuidar√° da <code>@Transactional</code> dos dados. </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@DataJpaTest</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JpaCakeFinderTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String PROMOTED_CAKE = <span class="hljs-string"><span class="hljs-string">"Red Velvet"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String NON_PROMOTED_CAKE = <span class="hljs-string"><span class="hljs-string">"Victoria Sponge"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CakeFinder finder; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> CakeRepository cakeRepository; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> TestEntityManager testEntityManager; <span class="hljs-meta"><span class="hljs-meta">@BeforeEach</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.testEntityManager.persistAndFlush(CakeEntity.builder().title(PROMOTED_CAKE) .sku(<span class="hljs-string"><span class="hljs-string">"SKU1"</span></span>).price(BigDecimal.TEN).promoted(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>).build()); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.testEntityManager.persistAndFlush(CakeEntity.builder().sku(<span class="hljs-string"><span class="hljs-string">"SKU2"</span></span>) .title(NON_PROMOTED_CAKE).price(BigDecimal.ONE).promoted(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).build()); finder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JpaCakeFinder(cakeRepository); } ... }</code> </pre> <br><h1 id="red-green-refactor-cikl">  Ciclo vermelho-verde-refatorador </h1><br><p>  Apesar dessa quantidade de texto, para o desenvolvedor, o teste ainda parece uma classe simples com a anota√ß√£o @DataJpaTest, mas espero que eu tenha sido capaz de mostrar quantas coisas √∫teis est√£o acontecendo sob o cap√¥, nas quais o desenvolvedor n√£o consegue pensar.  Agora podemos avan√ßar para o ciclo TDD e desta vez mostrarei algumas itera√ß√µes do TDD, com exemplos de refatora√ß√£o e c√≥digo m√≠nimo.  Para tornar mais claro, eu recomendo que voc√™ analise a hist√≥ria no Git, onde cada commit √© uma etapa separada e significativa com uma descri√ß√£o do que e como ele faz. </p><br><h2 id="podgotovka-dannyh">  Prepara√ß√£o de dados </h2><br><p>  Eu uso a abordagem com <code>@BeforeAll</code> / <code>@BeforeEach</code> e crio manualmente todos os registros no banco de dados.  O exemplo com a anota√ß√£o <code>@Sql</code> √© movido para uma classe separada <code>JpaCakeFinderTestWithScriptSetup</code> , ele duplica os testes, o que, √© claro, n√£o deveria existir, e existe com o √∫nico objetivo de demonstrar a abordagem. </p><br><p>  O estado inicial do sistema - h√° duas entradas no sistema, um bolo participa da promo√ß√£o e deve ser inclu√≠do no resultado retornado pelo m√©todo, o segundo - n√£o. </p><br><h2 id="pervyy-test-integracionnyy-test">  Primeiro teste de integra√ß√£o de teste </h2><br><p>  O primeiro teste √© o mais simples - <code>findPromotedCakes</code> deve incluir uma descri√ß√£o e pre√ßo do bolo participando da promo√ß√£o. </p><br><h3 id="red">  Vermelho </h3><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldReturnPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Iterable&lt;Cake&gt; promotedCakes = finder.findPromotedCakes(); assertThat(promotedCakes).extracting(Cake::getTitle).contains(PROMOTED_CAKE); assertThat(promotedCakes).extracting(Cake::getPrice).contains(<span class="hljs-string"><span class="hljs-string">"¬£10.00"</span></span>); }</code> </pre> <br><p>  O teste, √© claro, falha - a implementa√ß√£o padr√£o retorna um conjunto vazio. </p><br><h3 id="green">  Verde </h3><br><p>  Naturalmente, gostar√≠amos de escrever imediatamente a filtragem, fazer uma solicita√ß√£o ao banco de dados com <code>where</code> e assim por diante.  Mas, seguindo a pr√°tica do TDD, tenho que escrever o <em>c√≥digo m√≠nimo para que o teste seja aprovado</em> .  E esse c√≥digo m√≠nimo √© para retornar todos os registros no banco de dados.  Sim, t√£o simples e brega. </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Cake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Spliterator&lt;CakeEntity&gt; cakes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cakeRepository.findAll() .spliterator(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamSupport.stream(cakes, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).map( cakeEntity -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(cakeEntity.title, formatPrice(cakeEntity.price))) .collect(Collectors.toSet()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BigDecimal price)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"¬£"</span></span> + price.setScale(<span class="hljs-number"><span class="hljs-number">2</span></span>, RoundingMode.DOWN).toPlainString(); }</code> </pre> <br><blockquote>  Provavelmente, alguns argumentariam que aqui voc√™ pode tornar o teste verde mesmo sem uma base - apenas codifique o resultado esperado pelo teste.  Ocasionalmente ou√ßo esse argumento, mas acho que todo mundo entende que o TDD n√£o √© um dogma ou uma religi√£o, n√£o faz sentido levar isso ao ponto do absurdo.  Mas se voc√™ realmente deseja, pode, por exemplo, randomizar dados na instala√ß√£o para que n√£o sejam codificados. </blockquote><br><h3 id="refactor">  Refatorar </h3><br><p>  N√£o vejo muita refatora√ß√£o aqui, ent√£o essa fase pode ser pulada para esse teste em particular.  Mas eu ainda n√£o recomendaria ignorar esta fase, √© melhor parar e pensar sempre no estado ‚Äúverde‚Äù do sistema - √© poss√≠vel refatorar algo para torn√°-lo melhor e mais f√°cil? </p><br><h2 id="vtoroy-test">  Segundo teste </h2><br><p>  Mas o segundo teste j√° verificar√° que nenhum bolo promovido cair√° no resultado retornado por <code>findPromotedCakes</code> . </p><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldNotReturnNonPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Iterable&lt;Cake&gt; promotedCakes = finder.findPromotedCakes(); assertThat(promotedCakes).extracting(Cake::getTitle) .doesNotContain(NON_PROMOTED_CAKE); }</code> </pre> <br><h3 id="red-1">  Vermelho </h3><br><p>  O teste, como esperado, falha - h√° dois registros no banco de dados e o c√≥digo simplesmente retorna todos eles. </p><br><h3 id="green-1">  Verde </h3><br><p>  E, novamente, voc√™ pode pensar - e qual √© o c√≥digo m√≠nimo que voc√™ pode escrever para passar no teste?  Como j√° existe um fluxo e sua montagem, voc√™ pode simplesmente adicionar um bloco de <code>filter</code> l√°. </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Cake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Spliterator&lt;CakeEntity&gt; cakes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cakeRepository.findAll() .spliterator(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamSupport.stream(cakes, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .filter(cakeEntity -&gt; cakeEntity.promoted) .map(cakeEntity -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(cakeEntity.title, formatPrice(cakeEntity.price))) .collect(Collectors.toSet()); }</code> </pre> <br><p>  Reiniciamos os testes - os testes de integra√ß√£o agora est√£o verdes.  Chegou um momento importante - devido √† combina√ß√£o do teste de unidade do controlador e do teste de integra√ß√£o para trabalhar com o banco de dados, meu recurso est√° pronto - e o teste de interface do usu√°rio agora passa! </p><br><h3 id="refactor-1">  Refatorar </h3><br><p>  E como todos os testes s√£o ecol√≥gicos - √© hora de refatorar.  Eu acho que n√£o h√° necessidade de esclarecer que filtrar na mem√≥ria n√£o √© uma boa ideia, √© melhor fazer isso no banco de dados.  Para fazer isso, adicionei um novo m√©todo no <code>CakesRepository</code> - <code>findByPromotedIsTrue</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">Iterable&lt;CakeEntity&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByPromotedIsTrue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br><p>  Para esse m√©todo, o Spring Data gerou automaticamente um m√©todo que executar√° uma consulta no formul√°rio, <code>select from cakes where promoted = true</code> .  Leia mais sobre gera√ß√£o de consultas na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> do Spring Data. </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Cake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Spliterator&lt;CakeEntity&gt; cakes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cakeRepository.findByPromotedIsTrue() .spliterator(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamSupport.stream(cakes, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).map( cakeEntity -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(cakeEntity.title, formatPrice(cakeEntity.price))) .collect(Collectors.toSet()); }</code> </pre> <br><p>  Este √© um bom exemplo da flexibilidade que os testes de integra√ß√£o e a abordagem da caixa preta fornecem.  Se o reposit√≥rio estava bloqueado, a adi√ß√£o de um novo m√©todo sem alterar os testes n√£o era imposs√≠vel. </p><br><h1 id="podklyuchenie-k-production-baze">  Conex√£o √† base de produ√ß√£o </h1><br><p>  Para adicionar um pouco de "realismo" e mostrar como voc√™ pode separar a configura√ß√£o para testes e o aplicativo principal, adicionarei uma configura√ß√£o de acesso a dados para o aplicativo "produ√ß√£o". </p><br><p>  Tudo √© adicionado tradicionalmente pela se√ß√£o em <code>application.yml</code> : </p><br><pre> <code class="plaintext hljs">datasource: url: jdbc:h2:./data/cake-factory</code> </pre><br><p>  Isso salvar√° automaticamente os dados no sistema de arquivos na pasta <code>./data</code> .  Observo que esta pasta n√£o ser√° criada nos testes - o <code>@DataJpaTest</code> substituir√° automaticamente a conex√£o com o banco de dados de arquivos por um banco de dados aleat√≥rio na mem√≥ria devido √† presen√ßa da anota√ß√£o <code>@AutoConfigureTestDatabase</code> . </p><br><blockquote>   ,    ‚Äî   <code>data.sql</code>  <code>schema.sql</code> .   , Spring Boot             .          ,   , ,    . </blockquote><br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><p> ,               ,    ,       TDD . </p><br><p>      Spring Security ‚Äî                Spring,       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433958/">https://habr.com/ru/post/pt433958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433946/index.html">Cheat sheet para intelig√™ncia artificial - jogue fora o excesso, ensine o principal. T√©cnica de processamento da sequ√™ncia de treinamento</a></li>
<li><a href="../pt433948/index.html">Como tornar o pagamento mais conveniente: a experi√™ncia de um provedor de IaaS</a></li>
<li><a href="../pt433952/index.html">10 raz√µes para escolher uma solu√ß√£o para o SAP HANA da HPE. Parte 2</a></li>
<li><a href="../pt433954/index.html">Oito tecnologias de √°udio e dispositivos de √°udio que entrar√£o no Hall da Fama da TECnology em 2019</a></li>
<li><a href="../pt433956/index.html">Os modders usaram a IA para melhorar a textura nos jogos</a></li>
<li><a href="../pt433964/index.html">M√≥dulos ECMAScript no Node.js: um novo plano</a></li>
<li><a href="../pt433966/index.html">Cart√£o de Natal de Marte. A ESA mostrou uma grande acumula√ß√£o de gelo na superf√≠cie do planeta vermelho</a></li>
<li><a href="../pt433968/index.html">O jogo de comunica√ß√£o mais degenerado</a></li>
<li><a href="../pt433972/index.html">HolyJS 2018 Moscow atrav√©s dos olhos do participante</a></li>
<li><a href="../pt433974/index.html">Chatbot Obt√©m Audi√ß√£o ou Sofrimento Amador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>