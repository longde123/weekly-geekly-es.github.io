<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ûï ü§µüèº üëáüèΩ Esprit sans fil. Pr√©sentation du module ESP-8266 Witty üôèüèø üèáüèæ üë©‚Äçüë¶‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours de sa courte existence, l'ESP8266 a r√©ussi √† se transformer en de nombreuses modifications de diff√©rentes tailles et formes, avec diff√©rentes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Esprit sans fil. Pr√©sentation du module ESP-8266 Witty</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/391403/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au cours de sa courte existence, l'ESP8266 a r√©ussi √† se transformer en de nombreuses modifications de diff√©rentes tailles et formes, avec diff√©rentes capacit√©s. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Et maintenant, de Chine, un ch√¢le bas√© sur √ßa m'est venu, que je n'avais pas eu √† tenir entre mes mains auparavant. </font><font style="vertical-align: inherit;">Dans quelque chose d'int√©ressant, dans quelque chose de dr√¥le. </font><font style="vertical-align: inherit;">Faisons les choses correctement. </font></font><br>
<br>
<img src="https://habrastorage.org/files/88b/eb7/302/88beb7302ef844a5b3225849d4b0162c.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce forum a un nom propre: Witty. </font><font style="vertical-align: inherit;">Ouais, avec les cr√©ateurs, la soci√©t√© chinoise Gizwits, ne tenez pas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 En g√©n√©ral, Gizwits se positionne comme un fournisseur de solutions pour la maison intelligente, quoi que cela signifie.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Entre autres choses, cette entreprise poss√®de son propre cloud pour l'Internet des objets, qui comprend √©galement la t√©l√©commande. </font><font style="vertical-align: inherit;">Par cons√©quent, un certain nombre de p√©riph√©riques sans fil sont pris en charge. </font><font style="vertical-align: inherit;">Y compris l'ESP 8266 dans cette conception personnalis√©e.</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui sont trop paresseux pour lire, une version vid√©o de ce mat√©riel:</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/AlD3DdATObM%3Ffeature%3Doembed&amp;usg=ALkJrhg6yYVeNhiBtY0suDa6xJai5FAvRA" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module</font></font></h3><br>
<br>
<img src="https://habrastorage.org/files/84d/1ad/646/84d1ad64632547e1931f8851aa7f1e80.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La chose la plus int√©ressante dans la conception de ce module est qu'il se compose de deux cartes distinctes: la carte contr√¥leur elle-m√™me et la carte auxiliaire, qui sert au firmware et √† la communication avec l'ordinateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons-les s√©par√©ment. </font></font><br>
<img src="https://habrastorage.org/files/97c/f28/457/97cf284572ca4372b51fe4e4b4917295.jpg" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Vous pouvez imm√©diatement voir que le module bas√© sur l'ESP-12 est assembl√©. La description indique que le dernier mod√®le utilis√© au moment de la publication de ce mat√©riau √©tait l'ESP-12F. Est-ce le cas, je ne peux pas le dire, car il est difficile de distinguer visuellement l'ESP-12E et l'ESP-12F. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les conclusions de l'ESP-12 sont divorc√©es, et elles sont divis√©es par incr√©ments d'un dixi√®me de pouce, ce qui lui permettra d'√™tre mont√© sur des dispositions communes sans probl√®me. √âgalement install√© sur le module: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - capteur de lumi√®re. Une simple photor√©sistance connect√©e √† une entr√©e analogique via un diviseur; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Format LED RGB SMD5050;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - bouton, apparemment connect√© √† GPIO4. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un moment non √©vident</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sur la jambe Vcc de notre module n'est pas 3,3V, comme on pourrait le supposer, mais 5V. Et ils partent directement du LM1117, ce qui vous permet d'alimenter des charges importantes de la jambe Vcc. Si vous avez besoin de 3,3 V, vous pouvez les retirer de la jambe de CH_PD. </font></font><br>
<br>
<img src="https://habrastorage.org/files/863/526/792/8635267920504470b04493b62e2a69c0.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le c√¥t√© inf√©rieur de la carte, nous voyons: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - connecteur microUSB utilis√© pour l'alimentation; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - convertisseur 1117, r√©duisant l'entr√©e de microUSB 5V √† 3,3V en fonctionnement; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - un kit carrosserie pour LED et un capteur de lumi√®re. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deuxi√®me carte</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/a45/c72/83a/a45c7283a91c4fd490bb8b1af89c331b.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il semble qu'il ait √©t√© pr√©vu comme bouclier pour le firmware. Un connecteur microUSB de plus est visible dessus, la puce ch340 est un convertisseur USB-UART et des boutons sign√©s RESET et FLASH.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous pouvons supposer que, selon l‚Äôid√©e du fabricant, toute communication filaire avec ce module doit passer par ce bouclier. </font><font style="vertical-align: inherit;">Il est alors √©trange que ce bouclier ne soit pas fait bout √† bout pour lui permettre d'√™tre plant√© directement sur la planche √† pain. </font><font style="vertical-align: inherit;">Il s'av√®re que pour chaque mise √† jour du firmware, le module devra √™tre retir√© du circuit, ce qui n'est pas tr√®s pratique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre surprise nous attend en essayant d'installer ce module dans la maquette. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le module occupe toute la largeur de la planche d√©lirante. </font><font style="vertical-align: inherit;">En cons√©quence, il devient difficile de changer quelque chose avec des fils avec des connecteurs Dupont. </font><font style="vertical-align: inherit;">Plus pr√©cis√©ment, c'est totalement impossible. </font><font style="vertical-align: inherit;">La seule solution qui me vient √† l'esprit est de connecter plusieurs mod√®les de maquette en parall√®le et de connecter le module directement aux deux.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premier lancement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Nous avons compris la conception, maintenant nous allons alimenter le module via la carte microUSB et voir ce qui se passe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La LED s'allume - cela signifie que le module fonctionne. Id√©alement, aucune alimentation suppl√©mentaire n'est n√©cessaire, car le module doit avoir suffisamment de 500 milliamp√®res que le port USB donne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir d√©marr√© le module, je m'attendais √† voir un nouveau r√©seau, qui par d√©faut est cr√©√© par tous les 8266 sur le firmware standard, mais cela ne s'est pas produit, de nouveaux r√©seaux n'ont pas √©t√© trouv√©s dans le rayon de visibilit√©. C‚Äôest √©trange ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant connect√© au module par fil √† l‚Äôaide de l‚Äôutilitaire ESPlorer (je l‚Äôutilise pour communiquer avec la carte par habitude), j‚Äôai re√ßu quelque chose d‚Äôintelligible dans la console. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que le firmware ne soit pas standard.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, je ne vais pas me connecter au cloud chinois, donc le module du firmware est quelque chose de plus appropri√©. Par exemple, NodeMCU. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, nous collectons √† nouveau un sandwich sur deux cartes et le connectons d√©j√† via le port microUSB du module inf√©rieur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'√©tais content que le firmware ait r√©ussi, sans aucun probl√®me. L'essentiel est d'appuyer sur le bouton FLASH √† temps. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aidez √† expliquer</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors des premiers lancements (environ 2-3 heures d'exp√©riences), le module s'est r√©chauff√© de mani√®re significative. </font><font style="vertical-align: inherit;">Le tamis √† copeaux une minute apr√®s le d√©but a √©t√© ressenti √† environ 39-40 degr√©s et la temp√©rature a continu√© √† augmenter (apr√®s 20 minutes de fonctionnement continu du dholid jusqu'au niveau "Je peux √† peine toucher"). </font><font style="vertical-align: inherit;">Il est devenu int√©ressant de savoir ce qui allait se passer, alors j'ai quitt√© le module pour faire frire et j'ai fait d'autres choses. </font><font style="vertical-align: inherit;">Apr√®s un certain temps, j'ai touch√© le module - il √©tait √† temp√©rature ambiante (qui est g√©n√©ralement la traite ESP-12) et n'a pas chauff√© depuis. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quiconque a des id√©es sur ce √† quoi cela peut √™tre li√© - veuillez √©crire dans les commentaires.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Travail</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ainsi, le module r√©pond aux commandes, connect√©es √† mon wi-fi - tout semble √™tre en ordre. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Que faites-vous en premier avec votre nouveau module ou contr√¥leur pr√©f√©r√©? Ok! LED clignotante! Mais nous ne nous √©carterons pas de la tradition. En regardant les pistes sur la carte et en exp√©rimentant, j'ai trouv√© que les sorties suivantes sont utilis√©es pour contr√¥ler la lueur des LED: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GPIO12 - vert </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GPIO13 - bleu </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GPIO15 - rouge </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, le fabricant n'a pas pris la peine de mettre des r√©sistances de limitation de d√©nominations diff√©rentes pour chacune des couleurs, donc le rouge √† pleine luminosit√© est beaucoup plus sombre que les autres. Cependant, ces sorties prennent en charge PWM. Et si cela est essentiel pour quelqu'un, il peut r√©gler lui-m√™me la luminosit√© de la lueur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est maintenant au tour du capteur de lumi√®re.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme pr√©vu, ce capteur est connect√© √† la seule entr√©e analogique de la broche adc ESP-8266. </font><font style="vertical-align: inherit;">Les indications varient en fonction des changements de lumi√®re. </font><font style="vertical-align: inherit;">Voici juste une r√©sistance photosensible, qui est utilis√©e dans ce module, change ses param√®tres dans une tr√®s large gamme. </font><font style="vertical-align: inherit;">Par cons√©quent, lors de la connexion √† l'ESP-8266 via le diviseur le plus simple, comme cela se fait dans ce module, le capteur n'affichera l'√©clairage que dans une plage √©troite. </font><font style="vertical-align: inherit;">Un peu plus sombre - 0, un peu plus lumineux - maximum.</font></font><br>
<br>
<img src="https://habrastorage.org/files/4fe/74f/f7e/4fe74ff7e4bf46bcab8713cb9ecb814f.jpg" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusions</font></font></h3><br>
 <b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de Witty:</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Le module est assembl√© et pr√™t √† fonctionner. Pas besoin de chaman avec la connexion, se demandant s'il y a assez de puissance. Juste connect√© via MicroUSB et c'est parti!</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Clignotant inclus. Pas besoin de connecter un USB-UART tiers, affichez uniquement un bouton sp√©cial pour le firmware.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Capteur de lumi√®re int√©gr√©.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Taille. Plus compact que la carte NodeMCU. Bien qu'il occupe toute l'√©tendue de la mise en page.</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Moins:</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Taille. Pourtant, je voudrais avoir au moins une rang√©e de trous dans la planche √† pain gratuitement.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. N√©cessite un d√©montage de la platine pour chaque firmware (ou connexion Tx, Rx, ce qui tue l'id√©e d'une connexion pratique)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. La LED est parall√®le √† trois sorties GPIO. Soit ne les utilisez pas, soit de la musique l√©g√®re.</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour qui est-elle:</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je recommanderais cette carte √† ceux qui envisagent simplement de se familiariser avec l'ESP-8266, ils veulent comprendre du tout s'il a besoin de ce contr√¥leur. </font><font style="vertical-align: inherit;">Ainsi, le seuil d'entr√©e devient minimal. </font><font style="vertical-align: inherit;">Aucun chamanisme avec la connexion, l'alimentation et autres caprices de l'ESP-8266, ce qui d√©courage beaucoup le d√©sir de continuer √† faire connaissance avec le contr√¥leur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il sera √©galement utile dans le cadre d'un kit de prototypage rapide (pourquoi, en fait, je l'ai pris) ou pour des appareils √† usage unique (fabriqu√©s, travaill√©s, d√©mont√©s) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lien vers le magasin o√π je l'ai pris (pas publicitaire): </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ru.aliexpress.com/ article / Free-Shipping-SMD-Resistor-0805-51R-5-resistor-smd-resistor-51R-5000pcs-reel-in-stock-if-1882818309.html</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr391403/">https://habr.com/ru/post/fr391403/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr391389/index.html">Un homme heureux qui a r√©ussi √† r√©aliser tous ses r√™ves et projets. Ing√©nieur amiral et acad√©micien A.I. Berg et ki berg netika</a></li>
<li><a href="../fr391393/index.html">Mauvais miel: un apiculteur fran√ßais a appris √† faire du miel de chanvre</a></li>
<li><a href="../fr391395/index.html">PCB Ruler. La ligne de radio amateur et de crowdfunding √† Vkontakte</a></li>
<li><a href="../fr391399/index.html">Pas un bureau stupide</a></li>
<li><a href="../fr391401/index.html">HackerQuest v0.97: salle de qu√™te de niveau de difficult√© "Cauchemar"</a></li>
<li><a href="../fr391407/index.html">Supercoupe du World Drone Prix Supercup: Lot de 1 million de dollars</a></li>
<li><a href="../fr391409/index.html">La sonde Dawn √©tudie C√©r√®s pendant un an: d√©couvertes int√©ressantes et nouveaux puzzles</a></li>
<li><a href="../fr391413/index.html">Visualisation musicale du 21e si√®cle: de l'animusic √† la bo√Æte √† musique</a></li>
<li><a href="../fr391415/index.html">Google a ouvert la prochaine version d'Android pour les d√©veloppeurs</a></li>
<li><a href="../fr391423/index.html">Le parfait dvr de voiture et d√©tecteur de radar. Nous cr√©ons ensemble!¬†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>