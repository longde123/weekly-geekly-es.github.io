<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏻 ⛹🏾 🤠 6 tips kecil untuk mempersiapkan NodeJS Anda untuk beban tinggi ⏸️ 🙏🏽 👲🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Layanan pengenalan wajah Look-A-Like telah melayani ribuan pengguna secara bersamaan. 


 Berkembang di NodeJS sebagai hobi adalah kesenangan, tetapi ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>6 tips kecil untuk mempersiapkan NodeJS Anda untuk beban tinggi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456036/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f1/160/034/9f1160034811fcc55650a733a2732f41.png"></div>  <em>Layanan pengenalan wajah Look-A-Like telah melayani ribuan pengguna secara bersamaan.</em> <br><p>  Berkembang di NodeJS sebagai hobi adalah kesenangan, tetapi ketika menyangkut produksi bagi banyak pengguna, ada beberapa hal yang harus Anda ketahui untuk menghindari respons dan gangguan yang lama. </p><br><p>  Sebagai bagian dari pekerjaan kami di MyHeritage, kami mengembangkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">layanan doppelgänger</a> untuk Eurovision 2019, yang dengannya, dengan mengunggah foto selfie, Anda dapat mengetahui kontestan mana yang paling mirip dengan Anda. </p><br><p> Selain logika pengenalan wajah, aplikasi memiliki persyaratan yang sangat jelas: harus melayani puluhan ribu pengguna secara bersamaan, karena Eurovision ditonton oleh jutaan orang di seluruh dunia. </p><a name="habracut"></a><br><p>  Sangat cepat, kami menyadari bahwa penyeimbang beban di depan aplikasi yang dikonfigurasi dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penskalaan Otomatis</a> tidak cukup untuk toleransi kesalahan.  Berikut ini banyak membantu kami: </p><br><ol><li>  <strong>Berharap yang terbaik, tetapi bersiaplah untuk yang terburuk:</strong> ukur berapa banyak pengguna secara bersamaan yang dapat melayani aplikasi Anda dalam waktu X (dalam satu contoh).  Sebagai contoh, dalam kasus kami, pengujian menunjukkan bahwa kami dapat melayani 200 pengguna bersamaan di setiap instance EC2 selama 10 detik, jadi ketika kami mengetahui bahwa kami harus melayani 10.000 pengguna bersamaan, kami hanya harus menyiapkan 50 server untuk penyeimbang.  Untuk pengujian, kami menggunakan alat yang sangat baik yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JMeter</a> . <br><br>  Dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tutorial ini</a> sangat membantu dalam mempersiapkan pengukuran. </li><li> <strong>Hindari kunci:</strong> memblokir operasi (seperti <code>fs.readSync</code> ) menggoda karena kode terlihat lebih bersih, tetapi mereka benar-benar mematikan kinerja.  Sebagai gantinya, gunakan operasi <code>async</code> / <code>await</code> , karena selama operasi asinkron, CPU akan tersedia untuk tugas lain (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Loop Kejadian</a> ). <br><br>  Sebelum: <code>const res = fs.readSync('file.txt'); <br></code> <code>const res = fs.readSync('file.txt'); <br></code>  Setelah: <code>const res = await fs.readAsync('file.txt');</code> </li><li>  <strong>Tambah batas memori:</strong> <code>Node</code> dikonfigurasi secara default ke batas 1 GB.  Jika server dapat mengakses, katakanlah, 4 GB khusus untuk aplikasi Anda, Anda harus menetapkan batas memori maksimum secara manual menggunakan CLI dengan tanda berikut: <code>--max-old-space-size <br></code> <code>--max-old-space-size <br></code>  Contoh: <code>node --max-old-space-size=4096 server.js</code> </li><li>  <strong>Pastikan Anda menggunakan semua inti prosesor:</strong> secara default, <code>Node</code> berjalan di utas yang sama.  Jika Anda belum secara khusus mengkonfigurasi konfigurasi yang akan menjalankan beberapa utas, hemat uang dengan memilih server dengan 1 inti. </li><li>  <strong>Kurangi jumlah panggilan ke aplikasi:</strong> konfigurasikan HTTPS yang dipaksakan dan semua pengalihan setinggi mungkin (misalnya, di tingkat proksi).  Ini akan memungkinkan aplikasi tidak terganggu oleh berlebihan, dan, karenanya, lebih mudah diakses untuk permintaan yang benar-benar penting. </li><li>  <strong>Penanganan kesalahan:</strong> gunakan pencatatan, misalnya Logz.io/AWS CloudWatch untuk melacak kesalahan yang dapat menyebabkan kegagalan aplikasi.  JANGAN laporkan layanan seperti Slack tentang segalanya, karena pesan biasanya masuk secara massal dan dapat dengan mudah menyumbat saluran.  Kami menggunakan perpustakaan luar biasa bernama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Winston</a> untuk masuk ke NodeJS. </li></ol><br><p>  Dalam kasus kami, kiat-kiat ini mengarah pada peningkatan sepuluh kali lipat dalam produktivitas dan membantu menjaga lingkungan produksi tetap bersih bahkan ketika Anda harus melayani ribuan pengguna secara bersamaan. </p><br><p>  Terima kasih sudah membaca. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id456036/">https://habr.com/ru/post/id456036/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id456026/index.html">NeoQUEST-2019 tatap muka: menembak jatuh drone dan membuat VirusTotal seukuran saku</a></li>
<li><a href="../id456028/index.html">Dub-dub 2019: Berita WWDC dan kesan saya</a></li>
<li><a href="../id456030/index.html">Figma - sebagai satu titik kebenaran dalam desain</a></li>
<li><a href="../id456032/index.html">Presentasi sebagai kode, atau Mengapa saya tidak lagi menggunakan Powerpoint</a></li>
<li><a href="../id456034/index.html">Yekaterinburg, 10 Juli - Pertemuan Alfa-Bank tentang analisis sistem</a></li>
<li><a href="../id456038/index.html">Selamat tinggal dingin: masuknya obat ke dalam kantong virus</a></li>
<li><a href="../id456040/index.html">Tangkap aku jika kau bisa. Kelahiran Raja</a></li>
<li><a href="../id456044/index.html">@Kubernetes Meetup # 3 di Mail.ru Group: 21 Juni</a></li>
<li><a href="../id456046/index.html">Membuat tabel gulir tanpa batas tanpa pendengar acara</a></li>
<li><a href="../id456048/index.html">Vivaldi akan mempertahankan dukungan untuk pemblokir iklan pihak ketiga</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>