<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∫ üëµüèª üö∂üèΩ An√°lisis est√°tico en Go: c√≥mo ahorramos tiempo al verificar el c√≥digo üÄÑÔ∏è üëõ üë®üèø‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr Mi nombre es Sergey Rudachenko, soy un experto t√©cnico en Roistat. En los √∫ltimos dos a√±os, nuestro equipo ha estado traduciendo varias part...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>An√°lisis est√°tico en Go: c√≥mo ahorramos tiempo al verificar el c√≥digo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/roistat/blog/413175/"><p><img src="https://habrastorage.org/webt/ax/ky/rf/axkyrfxrmccrmh-vbn83run9wpe.jpeg"></p><br><p> Hola Habr  Mi nombre es Sergey Rudachenko, soy un experto t√©cnico en Roistat.  En los √∫ltimos dos a√±os, nuestro equipo ha estado traduciendo varias partes del proyecto en microservicios Go.  Son desarrollados por varios equipos, por lo que necesit√°bamos establecer una barra de calidad de c√≥digo duro.  Para hacer esto, utilizamos varias herramientas, en este art√≠culo nos centraremos en una de ellas: el an√°lisis est√°tico. </p><br><p>  El an√°lisis est√°tico es el proceso de verificar autom√°ticamente el c√≥digo fuente utilizando utilidades especiales.  Este art√≠culo hablar√° sobre sus beneficios, describir√° brevemente las herramientas populares y dar√° instrucciones para la implementaci√≥n.  Vale la pena leerlo si no se ha encontrado con herramientas similares o no las ha utilizado de manera sistem√°tica. </p><br><p>  En los art√≠culos sobre este tema, a menudo se encuentra el t√©rmino "linter".  Para nosotros, este es un nombre conveniente para herramientas simples para el an√°lisis est√°tico.  La tarea de linter es buscar errores simples y un dise√±o incorrecto. </p><a name="habracut"></a><br><h2 id="zachem-nuzhny-lintery">  ¬øPor qu√© se necesitan linters? </h2><br><p> Cuando trabajas en equipo, lo m√°s probable es que realices revisiones de c√≥digo.  Los errores omitidos en la revisi√≥n son errores potenciales.  Se perdi√≥ un <code>error</code> no controlado: no reciba un mensaje informativo y buscar√° el problema a ciegas.  Confundido en el tipo de conversi√≥n o convertido en mapa nulo, peor a√∫n, el binario caer√° del p√°nico. </p><br><p>  Los errores descritos anteriormente se pueden agregar a las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Convenciones de c√≥digo</a> , pero encontrarlos al leer la solicitud de extracci√≥n no es tan simple, ya que el revisor tendr√° que leer el c√≥digo.  Si no hay un compilador en su cabeza, algunos de los problemas ir√°n a la batalla de todos modos.  Adem√°s, la b√∫squeda de errores menores distrae la verificaci√≥n de la l√≥gica y la arquitectura.  A distancia, admitir dicho c√≥digo ser√° m√°s costoso.  Escribimos en un lenguaje escrito est√°ticamente, es extra√±o no usarlo. </p><br><h2 id="populyarnye-instrumenty">  Herramientas populares </h2><br><p>  La mayor√≠a de las herramientas para el an√°lisis est√°tico utilizan los paquetes <code>go/ast</code> y <code>go/parser</code> .  Proporcionan funciones para analizar la sintaxis de los archivos .go.  El hilo de ejecuci√≥n est√°ndar (por ejemplo, para la utilidad golint) es el siguiente: </p><br><ul><li>  se carga la lista de archivos de los paquetes requeridos </li><li>  <code>parser.ParseFile(...) (*ast.File, error)</code> se ejecuta para cada archivo </li><li>  busca reglas compatibles para cada archivo o paquete </li><li>  la verificaci√≥n pasa por cada instrucci√≥n, por ejemplo, as√≠: </li></ul><br><pre> <code class="go hljs">f, err := parser.ParseFile(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>) ast.Walk(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n *ast.Node)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> v := node.(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> *ast.FuncDecl: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> strings.Contains(v.Name, <span class="hljs-string"><span class="hljs-string">"_"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(<span class="hljs-string"><span class="hljs-string">"wrong function naming"</span></span>) } } }, f)</code> </pre> <br><p>  Adem√°s de AST, hay una asignaci√≥n est√°tica √∫nica (SSA).  Esta es una forma m√°s compleja de analizar el c√≥digo que funciona con un hilo de ejecuci√≥n en lugar de construcciones de sintaxis.  En este art√≠culo, no lo consideraremos en detalle, puede leer la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> y ver el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejemplo de la</a> utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">stackcheck</a> . </p><br><p>  A continuaci√≥n, solo se considerar√°n las utilidades populares que realizan comprobaciones √∫tiles para nosotros. </p><br><h3 id="gofmt">  gofmt </h3><br><p>  Esta es la utilidad est√°ndar del paquete go que comprueba la coincidencia de estilos y puede solucionarlo autom√°ticamente.  El cumplimiento del estilo es un requisito obligatorio para nosotros, por lo tanto, la verificaci√≥n gofmt se incluye en todos nuestros proyectos. </p><br><h3 id="typecheck">  chequeo </h3><br><p>  Typecheck verifica la coincidencia de tipos en el c√≥digo y es compatible con el proveedor (a diferencia de gotype).  Se requiere su lanzamiento para verificar la compilaci√≥n, pero no ofrece garant√≠as completas. </p><br><h3 id="go-vet">  ir veterinario </h3><br><p>  La utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">go vet</a> es parte del paquete est√°ndar y el equipo Go la recomienda para su uso.  Comprueba una serie de errores comunes, por ejemplo: </p><br><ul><li>  mal uso de printf y funciones similares </li><li>  etiquetas de compilaci√≥n incorrectas </li><li>  funci√≥n de comparaci√≥n y nula </li></ul><br><h3 id="golint">  Golint </h3><br><p>  Golint es desarrollado por el equipo de Go y valida el c√≥digo basado en los documentos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Effective Go</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CodeReviewComments</a> .  Desafortunadamente, no hay documentaci√≥n detallada, pero <a href="">el c√≥digo muestra</a> que se verifica lo siguiente: </p><br><pre> <code class="go hljs">f.lintPackageComment() f.lintImports() f.lintBlankImports() f.lintExported() f.lintNames() f.lintVarDecls() f.lintElses() f.lintRanges() f.lintErrorf() f.lintErrors() f.lintErrorStrings() f.lintReceiverNames() f.lintIncDec() f.lintErrorReturn() f.lintUnexportedReturn() f.lintTimeNames() f.lintContextKeyTypes() f.lintContextArgs()</code> </pre> <br><h3 id="staticcheck">  comprobaci√≥n est√°tica </h3><br><p>  Los propios desarrolladores presentan la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">comprobaci√≥n est√°tica</a> como un veterano mejorado.  Hay muchos controles, se dividen en grupos: </p><br><ul><li>  mal uso de bibliotecas est√°ndar </li><li>  problemas de subprocesos m√∫ltiples </li><li>  problemas con las pruebas </li><li>  c√≥digo in√∫til </li><li>  problemas de rendimiento </li><li>  dise√±os dudosos </li></ul><br><h3 id="gosimple">  gosimple </h3><br><p>  Se especializa en encontrar estructuras que valgan la pena simplificar, por ejemplo: </p><br><p>  <strong>Antes</strong> ( <a href="">c√≥digo fuente golint</a> ) </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f *file)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ffName.Name == <span class="hljs-string"><span class="hljs-string">"main"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><p>  <strong>Despues</strong> </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f *file)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ffName.Name == <span class="hljs-string"><span class="hljs-string">"main"</span></span> }</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La documentaci√≥n es</a> similar a staticcheck e incluye ejemplos detallados. </p><br><h3 id="errcheck">  errcheck </h3><br><p>  Los errores devueltos por las funciones no pueden ser ignorados.  Los motivos se describen en detalle en el documento vinculante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Effective Go</a> .  Errcheck no omitir√° el siguiente c√≥digo: </p><br><pre> <code class="go hljs">json.Unmarshal(text, &amp;val) f, _ := os.OpenFile(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>)</code> </pre> <br><h3 id="gas">  gas </h3><br><p>  Encuentra vulnerabilidades en el c√≥digo: accesos codificados, inyecciones sql y uso de funciones hash inseguras. </p><br><p>  Ejemplos de errores: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//    IP  l, err := net.Listen("tcp", ":2000") //  sql  q := fmt.Sprintf("SELECT * FROM foo where name = '%s'", name) q := "SELECT * FROM foo where name = " + name //     import "crypto/md5"</span></span></code> </pre> <br><h2 id="maligned">  difamado </h2><br><p>  En Go, el orden de los campos en las estructuras afecta el consumo de memoria.  Malignado encuentra ordenaci√≥n no √≥ptima.  Con este orden de campos: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { a <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> }</code> </pre> <br><p>  La estructura ocupar√° 32 bits en la memoria debido a la adici√≥n de bits vac√≠os despu√©s de los campos ayc. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9b9/3e3/b67/9b93e3b6777d84459548ac9247b4e76f.jpg" alt="imagen"></p><br><p>  Si cambiamos la clasificaci√≥n y juntamos dos campos bool, la estructura tomar√° solo 24 bits: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ec5/557/62b/ec555762b87fc61b410675ad4fbd8ac2.jpg" alt="imagen"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Imagen original en stackoverflow</a> </p><br><h3 id="goconst">  goconst </h3><br><p>  Las variables m√°gicas en el c√≥digo no reflejan el significado y complican la lectura.  Goconst encuentra literales y n√∫meros que aparecen en el c√≥digo 2 veces o m√°s.  Tenga en cuenta que, a menudo, incluso un solo uso puede ser un error. </p><br><h3 id="gocyclo">  gocyclo </h3><br><p>  Consideramos que la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">complejidad ciclom√°tica del</a> c√≥digo es una m√©trica importante.  Gocycle muestra complejidad para cada funci√≥n.  Solo se pueden mostrar las funciones que exceden el valor especificado. </p><br><pre> <code class="hljs pgsql">gocyclo -<span class="hljs-keyword"><span class="hljs-keyword">over</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> package/<span class="hljs-type"><span class="hljs-type">name</span></span></code> </pre> <br><p>  Elegimos un valor umbral de 7 para nosotros, porque no encontramos un c√≥digo con una mayor complejidad que no requiriera refactorizaci√≥n. </p><br><h3 id="mertvyy-kod">  C√≥digo muerto </h3><br><p>  Existen varias utilidades para encontrar c√≥digo no utilizado; su funcionalidad puede superponerse parcialmente. </p><br><ul><li>  ineffassign: verifica tareas in√∫tiles </li></ul><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} log.Println(res) res, err := loadData() <span class="hljs-comment"><span class="hljs-comment">//  res    return err }</span></span></code> </pre> <br><ul><li>  c√≥digo muerto: encuentra funciones no utilizadas </li><li>  no utilizado: encuentra funciones no utilizadas, pero lo hace mejor que el c√≥digo muerto </li></ul><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unusedFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { formallyUsedFunc() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formallyUsedFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { }</code> </pre> <br><p>  Como resultado, sin usar apuntar√° a ambas funciones a la vez, y el c√≥digo muerto solo a no utilizadoFunc.  Gracias a esto, el c√≥digo adicional se elimina en una sola pasada.  Tambi√©n no utilizado encuentra variables no utilizadas y campos de estructura. </p><br><ul><li>  varcheck: encuentra variables no utilizadas </li><li>  desconvertir: encuentra conversiones de tipo in√∫tiles </li></ul><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(res) <span class="hljs-comment"><span class="hljs-comment">// unconvert error</span></span></code> </pre> <br><p>  Si no hay una tarea que ahorrar en el tiempo que lleva iniciar las comprobaciones, es mejor ejecutarlas todas juntas.  Si se necesita optimizaci√≥n, recomiendo usar sin usar y sin convertir. </p><br><h2 id="kak-eto-vse-udobno-nastroit">  Qu√© conveniente es configurar </h2><br><p>  Ejecutar las herramientas anteriores en secuencia es inconveniente: los errores se emiten en un formato diferente, la ejecuci√≥n lleva mucho tiempo.  Verificar uno de nuestros servicios con un tama√±o de ~ 8000 l√≠neas de c√≥digo tom√≥ m√°s de dos minutos.  Tambi√©n deber√° instalar las utilidades por separado. </p><br><p>  Hay utilidades de agregaci√≥n para resolver este problema, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">goreporter</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gometalinter</a> .  Goreporter representa el informe en html y gometalinter escribe en la consola. </p><br><p>  Gometalinter todav√≠a se usa en algunos proyectos grandes (por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">docker</a> ).  √âl sabe c√≥mo instalar todas las utilidades con un solo comando, ejecutarlas en paralelo y formatear los errores de acuerdo con la plantilla.  El tiempo de ejecuci√≥n en el servicio anterior se redujo a un minuto y medio. </p><br><p>  La agregaci√≥n funciona solo por la coincidencia exacta del texto del error, por lo tanto, los errores repetidos son inevitables en la salida. </p><br><p>  En mayo de 2018, el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">golangci-lint</a> apareci√≥ en el github, que supera en gran medida la comodidad de gometalinter: </p><br><ul><li>  El tiempo de ejecuci√≥n del mismo proyecto se redujo a 16 segundos (8 veces) </li><li>  casi no hay errores duplicados </li><li>  clear yaml config </li><li>  salida de error agradable con una l√≠nea de c√≥digo y un puntero a un problema <br><img src="https://habrastorage.org/webt/nu/ro/vi/nuroviwafnlgpzkyijvsucjwzme.png"></li><li>  no es necesario instalar utilidades adicionales </li></ul><br><p>  Ahora, el aumento de la velocidad se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">obtiene</a> reutilizando SSA y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cargador</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Programa</a> , en el futuro tambi√©n se planea reutilizar el √°rbol AST, sobre el que escrib√≠ al comienzo de la secci√≥n Herramientas. </p><br><p>  Al momento de escribir este art√≠culo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hub.docker.com</a> no hab√≠a imagen con documentaci√≥n, por lo que hicimos la nuestra, personalizada de acuerdo con nuestras ideas sobre conveniencia.  En el futuro, la configuraci√≥n cambiar√°, por lo que para la producci√≥n recomendamos reemplazarla por la suya.  Para hacer esto, simplemente agregue el archivo .golangci.yaml al directorio ra√≠z del proyecto ( <a href="">un ejemplo</a> est√° en el repositorio golangci-lint). </p><br><pre> <code class="bash hljs">PACKAGE=package/name docker run --rm -t \ -v $(GOPATH)/src/$(PACKAGE):/go/src/$(PACKAGE) \ -w /go/src/$(PACKAGE) \ roistat/golangci-lint</code> </pre> <br><p>  Este comando puede probar todo el proyecto.  Por ejemplo, si est√° en <code>~/go/src/project</code> , cambie el valor de la variable a <code>PACKAGE=project</code> .  La validaci√≥n funciona de forma recursiva en todos los paquetes internos. </p><br><p>  Tenga en cuenta que este comando solo funciona correctamente cuando se utiliza el proveedor. </p><br><h1 id="vnedrenie">  Implementaci√≥n </h1><br><p>  Todos nuestros servicios de desarrollo usan docker.  Cualquier proyecto se ejecuta sin el entorno go instalado.  Para ejecutar los comandos, use el Makefile y agr√©guele el comando lint: </p><br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">lint:</span></span> @docker run --rm -t -v $(GOPATH)/src/$(PACKAGE)<span class="hljs-symbol"><span class="hljs-symbol">:/go/src/</span></span>$(PACKAGE) -w /go/src/$(PACKAGE) roistat/golangci-lint</code> </pre> <br><p>  Ahora la comprobaci√≥n se inicia con este comando: </p><br><pre> <code class="bash hljs">make lint</code> </pre> <br><p>  Hay una manera f√°cil de bloquear el c√≥digo con errores para que no entren al maestro: crear un enlace previo a la recepci√≥n.  Es adecuado si: </p><br><ol><li>  Tiene un proyecto peque√±o y pocas dependencias (o est√°n en el repositorio) </li><li>  No es un problema que espere a que se complete el comando <code>git push</code> durante unos minutos. </li></ol><br><p>  Instrucciones de configuraci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gancho</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gitlab</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bitbucket Server</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Github Enterprise</a> . </p><br><p>  En otros casos, es mejor usar CI y prohibir el c√≥digo de fusi√≥n en el que hay al menos un error.  Hacemos exactamente eso, agregando el lanzamiento de la interfaz antes de las pruebas. </p><br><h2 id="zaklyuchenie">  Conclusi√≥n </h2><br><p>  La introducci√≥n de revisiones sistem√°ticas ha reducido significativamente el per√≠odo de revisi√≥n.  Sin embargo, otra cosa es m√°s importante: ahora podemos discutir el panorama general y la arquitectura la mayor parte del tiempo.  Esto le permite pensar en el desarrollo del proyecto en lugar de tapar agujeros. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413175/">https://habr.com/ru/post/es413175/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413165/index.html">Explicaci√≥n SRTP</a></li>
<li><a href="../es413167/index.html">¬øC√≥mo integrar Zimbra con un sistema DLP?</a></li>
<li><a href="../es413169/index.html">Matriz √∫til y m√©todos de objetos en JavaScript</a></li>
<li><a href="../es413171/index.html">Tokamak JET lanza nueva campa√±a de tritio de deuterio</a></li>
<li><a href="../es413173/index.html">Monitoreo de errores de JavaScript con window.onerror</a></li>
<li><a href="../es413177/index.html">Eventos digitales en Mosc√∫ del 4 al 10 de junio</a></li>
<li><a href="../es413181/index.html">Cuando las llamadas a funciones externas son m√°s r√°pidas que las llamadas nativas en C</a></li>
<li><a href="../es413185/index.html">Juego sucio, o c√≥mo los organizadores del sorteo nos enga√±an</a></li>
<li><a href="../es413187/index.html">Entrevista con Ryan Dahl, creador de Node.js</a></li>
<li><a href="../es413189/index.html">Colecci√≥n de sombras de ojos css Box-shadows.css</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>