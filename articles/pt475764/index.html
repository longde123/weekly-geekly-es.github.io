<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õΩÔ∏è ‚úãüèæ üë∞üèΩ Cadeias de Markov para gera√ß√£o processual de edif√≠cios üìπ ü•ù üì¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota: o c√≥digo fonte completo deste projeto pode ser encontrado [ aqui ]. Como faz parte de um projeto maior, recomendo assistir ao commit no momento ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cadeias de Markov para gera√ß√£o processual de edif√≠cios</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475764/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/06b/acc/15206bacc91b6635a0f286fa21998363.gif" alt="imagem"></div><br>  Nota: o c√≥digo fonte completo deste projeto pode ser encontrado [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ].  Como faz parte de um projeto maior, recomendo assistir ao commit no momento em que este artigo foi lan√ßado, ou o arquivo <code>/source/helpers/arraymath.h</code> , bem como <code>/source/world/blueprint.cpp</code> . <br><br>  Neste artigo, quero falar em detalhes sobre os princ√≠pios do uso de cadeias e estat√≠sticas de Markov para a gera√ß√£o processual de edif√≠cios em 3D e outros sistemas. <br><br>  Vou explicar os fundamentos matem√°ticos do sistema e tentarei tornar a explica√ß√£o o mais geral poss√≠vel, para que voc√™ possa aplicar esse conceito em outras situa√ß√µes, por exemplo, para gerar masmorras 2D.  A explica√ß√£o ser√° acompanhada de imagens e c√≥digo fonte. <br><br>  Este m√©todo √© um m√©todo generalizado para a gera√ß√£o procedural de sistemas que atendem a certos requisitos, por isso recomendo a leitura pelo menos at√© o final da primeira se√ß√£o para que voc√™ possa entender se essa t√©cnica pode ser √∫til no seu caso, porque abaixo explico os requisitos necess√°rios. <br><a name="habracut"></a><br>  Os resultados ser√£o usados ‚Äã‚Äãno meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mecanismo voxel</a> para que os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rob√¥s de tarefas</a> possam construir pr√©dios e cidades.  No final do artigo, h√° um exemplo! <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2019/10/buildings.mp4" type="video/mp4"></video></div></div></div><br>  <i>Alguns exemplos com os resultados.</i> <br><br><h2>  O b√°sico </h2><br><h3>  Cadeias de Markov </h3><br>  As cadeias de Markov s√£o uma sequ√™ncia de estados pelos quais um sistema se move, descrito por transi√ß√µes no tempo.  As transi√ß√µes entre estados s√£o estoc√°sticas, ou seja, s√£o descritas por probabilidades, que s√£o uma caracter√≠stica do sistema. <br><br>  O sistema √© definido pelo espa√ßo de estado, que √© o espa√ßo de todas as configura√ß√µes poss√≠veis do sistema.  Se o sistema for descrito corretamente, tamb√©m podemos descrever as transi√ß√µes entre estados como etapas discretas. <br><br>  Deve-se notar que, a partir de um estado do sistema, muitas vezes existem v√°rias transi√ß√µes discretas poss√≠veis, cada uma das quais leva a um estado diferente do sistema. <br><br>  A probabilidade de transi√ß√£o do estado i para o estado j √© igual a: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.969ex" height="2.66ex" viewBox="0 -780.1 1278.5 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="345" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> P_ {ij} </script></p><br>  O processo de Markov √© o processo de estudar esse espa√ßo de estados com a ajuda das probabilidades transferidas para ele. <br><br>  O importante √© que os processos de Markov "n√£o t√™m mem√≥ria".  Significa apenas que as probabilidades de transi√ß√£o do estado atual para o novo dependem apenas do estado atual e n√£o mais de outras condi√ß√µes visitadas anteriormente. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.417ex" height="2.78ex" viewBox="0 -832 5346.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="345" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-3D" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-50" x="2612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-28" x="3364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="3753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-2C" x="4099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="4544" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-29" x="4956" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P_ {ij} = P (i, j) </script></p><br><h4>  Exemplo: gera√ß√£o de texto </h4><br>  Um sistema √© uma sequ√™ncia de bits.  O espa√ßo de estado √© todas as sequ√™ncias poss√≠veis de bits.  Uma transi√ß√£o discreta mudar√° um bit de 0 para 1 ou 1 para 0. Se o sistema tiver n bits, ent√£o, de cada estado, temos n transi√ß√µes poss√≠veis para um novo estado.  O processo de Markov consistir√° no estudo do espa√ßo de estados, alterando os valores dos bits em uma sequ√™ncia usando determinadas probabilidades. <br><br><h4>  Exemplo: previs√£o do tempo </h4><br>  O sistema √© as condi√ß√µes clim√°ticas atuais.  O espa√ßo de estados √© todos os estados poss√≠veis em que o clima pode estar (por exemplo, "chuvoso", "nublado", "ensolarado" etc.).  A transi√ß√£o ser√° uma mudan√ßa de qualquer estado para outro, no qual possamos definir a probabilidade da transi√ß√£o (por exemplo, "qual √© a probabilidade de que, se estiver ensolarado hoje, amanh√£ chove amanh√£, independentemente do clima de ontem?"). <br><br><h3>  M√©todo de Monte Carlo para cadeias de Markov </h3><br>  Como as transi√ß√µes entre estados s√£o determinadas pelas probabilidades, tamb√©m podemos definir a probabilidade de um "est√°vel" estar em qualquer estado (ou, se o tempo tender ao infinito, o tempo m√©dio em que estaremos em um determinado estado).  Esta √© uma distribui√ß√£o interna de estados. <br><br>  Ent√£o o algoritmo de Monte Carlo para cadeias de Markov (Markov-Chain Monte-Carlo, MCMC) √© uma t√©cnica para obter uma amostra do espa√ßo de estados.  Amostragem (amostragem) significa a escolha do estado com base na probabilidade de sele√ß√£o, levando em considera√ß√£o a distribui√ß√£o interna. <br><br>  Eles dizem que a probabilidade de estar em um estado √© proporcional * a uma determinada fun√ß√£o de custo que fornece uma "estimativa" do estado atual em que o sistema est√° localizado.  Acredita-se que, se os custos forem baixos, a probabilidade de estar nesse estado √© alta e essa propor√ß√£o √© mon√≥tona.  A fun√ß√£o de custo √© definida da seguinte forma: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.376ex" height="2.66ex" viewBox="0 -832 1884 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="1149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-29" x="1494" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> R (i) </script></p><br>  Nota: n√£o tenho certeza se a palavra "proporcional" √© usada corretamente, porque a propor√ß√£o n√£o √© necessariamente linear. <br><br>  Em seguida, uma amostra da distribui√ß√£o estadual retornar√° uma configura√ß√£o com baixos custos (ou uma boa "estimativa") com maior probabilidade! <br><br>  Mesmo com um espa√ßo de estado extremamente grande (possivelmente infinito, mas "infinitamente cont√°vel"), independentemente da complexidade do sistema, o algoritmo MCMC encontrar√° uma solu√ß√£o com custos baixos se dermos tempo suficiente para convergir. <br><br>  Fazer esse estudo do espa√ßo de estados √© uma t√©cnica padr√£o de otimiza√ß√£o estoc√°stica e tem muitas aplica√ß√µes em √°reas como aprendizado de m√°quina. <br><br><h3>  Distribui√ß√£o de Gibbs </h3><br>  Nota: se esta se√ß√£o n√£o estiver clara para voc√™, voc√™ pode ignor√°-la com seguran√ßa.  Voc√™ ainda pode tirar proveito da implementa√ß√£o do sistema. <br><br>  Depois de determinarmos os custos de uma poss√≠vel condi√ß√£o, como determinamos a probabilidade dessa condi√ß√£o? <br><br>  Solu√ß√£o: A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">distribui√ß√£o de Gibbs</a> √© a distribui√ß√£o da entropia m√°xima para um determinado conjunto de restri√ß√µes. <br><br>  Em ess√™ncia, isso significa que, se definirmos muitas restri√ß√µes sobre as probabilidades do sistema, a distribui√ß√£o de Gibbs criar√° a "menor quantidade de suposi√ß√µes" sobre o formato da distribui√ß√£o. <br><br>  Nota: a distribui√ß√£o de Gibbs tamb√©m √© a distribui√ß√£o com menor sensibilidade a varia√ß√µes de restri√ß√µes (de acordo com a m√©trica de diverg√™ncia de Kullback-Leibler). <br><br>  A √∫nica restri√ß√£o que impomos √† distribui√ß√£o de estados √© a fun√ß√£o de custo; portanto, a usamos na distribui√ß√£o de Gibbs para calcular a probabilidade de transi√ß√£o entre estados: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>T</mi></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>Z</mi><mi>i</mi></msub></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.266ex" height="2.78ex" viewBox="0 -832 18628.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="345" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-3D" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-65" x="2862" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-78" x="3329" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-70" x="3901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-28" x="4405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-2212" x="4794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-66" x="5823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-72" x="6373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-61" x="6825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-63" x="7354" y="0"></use><g transform="translate(7788,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="1149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-29" x="1561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-2212" x="2173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-52" x="3173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-28" x="3933" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="4322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-29" x="4668" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-54" x="12845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-29" x="13550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-2217" x="14162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-66" x="15134" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-72" x="15685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-61" x="16136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-63" x="16666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-31" x="17099" y="0"></use><g transform="translate(17600,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="966" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>R</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo>‚àí</mo><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>T</mi></mrow><mo stretchy="false">)</mo><mo>‚àó</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>Z</mi><mi>i</mi></msub></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> P_ {ij} = \ exp (- \ frac {R (j) -R (i)} {T}) * \ frac {1} {Z_i} </script></p><br>  Onde Z √© a fun√ß√£o de parti√ß√£o do conjunto de transi√ß√µes do estado i.  Esse √© um fator de normaliza√ß√£o que garante que a soma das probabilidades de transi√ß√£o de qualquer estado seja 1. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>Z</mi><mi>i</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.215ex" height="2.78ex" viewBox="0 -832 6981.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="966" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-3D" x="1305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-73" x="2611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-75" x="3081" y="0"></use><g transform="translate(3653,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="1242" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-28" x="4924" y="0"></use><g transform="translate(5313,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMATHI-6A" x="345" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhhjRV0DZ0lKYwqeu5DEUnycR5zviA#MJMAIN-29" x="6592" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Z</mi><mi>i</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><mo stretchy="false">(</mo><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> Z_i = \ sum_j (P_ {ij}) </script></p><br>  Observe que, se decidirmos que o pr√≥ximo estado ser√° o mesmo, os custos relativos ser√£o zero, ou seja, a probabilidade ap√≥s a normaliza√ß√£o ser√° diferente de zero (devido ao formato da distribui√ß√£o com o indicador)!  Isso significa que em muitas transi√ß√µes √© necess√°rio incluir a probabilidade de estados inalterados. <br><br>  Tamb√©m √© importante notar que a distribui√ß√£o de Gibbs √© parametrizada pela "temperatura computacional" T. <br><br>  Uma das principais vantagens do uso de probabilidades no estudo do espa√ßo de estados √© que o sistema pode realizar transi√ß√µes para estados mais caros (j√° que eles t√™m uma probabilidade de transi√ß√£o diferente de zero), transformando o algoritmo em um m√©todo de otimiza√ß√£o "n√£o ganancioso". <br><br>  Observe que, como a temperatura tende ao infinito, a probabilidade de qualquer transi√ß√£o individual tende a se unir de tal maneira que quando o conjunto de probabilidades de todas as transi√ß√µes do estado √© normalizado, elas se tornam igualmente prov√°veis ‚Äã‚Äã(ou a distribui√ß√£o de Gibbs se aproxima da distribui√ß√£o normal), apesar de seus custos serem maiores! <br><br>  √Ä medida que a temperatura computacional se aproxima de zero, transi√ß√µes com custos mais baixos se tornam mais prov√°veis, ou seja, aumenta a probabilidade de transi√ß√µes preferidas. <br><br>  Ao realizar pesquisa / otimiza√ß√£o do espa√ßo de estados, abaixamos gradualmente a temperatura.  Esse processo √© chamado de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"recozimento simulado"</a> .  Gra√ßas a isso, no come√ßo podemos sair facilmente do m√≠nimo local e, no final, podemos escolher as melhores solu√ß√µes. <br><br>  Quando a temperatura √© baixa o suficiente, todas as probabilidades tendem a zero, com exce√ß√£o da probabilidade de n√£o haver transi√ß√£o! <br><br>  Isso ocorre porque apenas a aus√™ncia de uma transi√ß√£o tem uma diferen√ßa de custo zero, ou seja, estar no mesmo estado n√£o depende da temperatura.  Devido √† forma da fun√ß√£o exponencial em T = 0, essa √© a √∫nica probabilidade com um valor diferente de zero, ou seja, ap√≥s a normaliza√ß√£o, ela se transforma em unidade.  Conseq√ºentemente, nosso sistema convergir√° para um ponto est√°vel e n√£o ser√° mais necess√°rio um resfriamento adicional.  Esta √© uma propriedade integral da gera√ß√£o de probabilidade usando a distribui√ß√£o Gibbs. <br><br>  O processo de converg√™ncia do sistema pode ser ajustado alterando a taxa de resfriamento! <br><br>  Se o resfriamento for mais lento, como resultado, geralmente chegamos a uma solu√ß√£o com custos mais baixos (at√© certo ponto), mas ao custo de mais etapas de converg√™ncia.  Se o resfriamento for mais r√°pido, √© mais prov√°vel que o sistema caia na armadilha de uma sub-regi√£o com custos mais altos, ou seja, obteremos resultados "menos √≥timos". <br><br>  Conseq√ºentemente, o processo de Markov n√£o apenas gera resultados aleat√≥rios, mas tenta gerar resultados "bons", e com alta probabilidade de sucesso! <br><br>  Por defini√ß√£o de fun√ß√µes de custo arbitr√°rias, um √≥timo √∫nico n√£o precisa existir.  Esse m√©todo de otimiza√ß√£o probabil√≠stica gera apenas aproximando-se do ideal, tentando minimizar a fun√ß√£o de custo e, devido √† amostragem, gera resultados diferentes a cada vez (se o gerador de n√∫meros aleat√≥rios tiver uma semente diferente). <br><br>  O pr√≥prio processo de amostragem pode ser realizado usando o m√©todo de transforma√ß√£o inversa sobre a fun√ß√£o de distribui√ß√£o de massa do nosso conjunto discreto de transi√ß√µes.  Mais tarde mostrarei como isso √© feito. <br><br><h3>  Gera√ß√£o processual </h3><br>  Como esse m√©todo √© √∫til para gera√ß√£o de procedimentos? <br><br>  Em alguns sistemas, geralmente √© dif√≠cil definir um algoritmo simples que gere bons resultados, especialmente no caso de sistemas complexos. <br><br>  Definir regras de gera√ß√£o arbitr√°rias n√£o √© apenas dif√≠cil, mas tamb√©m limitado apenas por nossa imagina√ß√£o e processamento de casos de fronteira. <br><br>  Se o sistema atender a um determinado conjunto de requisitos, o uso do MCMC nos permite n√£o nos preocupar com a sele√ß√£o de um algoritmo ou regras.  Em vez disso, definimos um m√©todo para gerar qualquer resultado poss√≠vel e escolhemos conscientemente um bom com base em sua "avalia√ß√£o". <br><br>  Os seguintes requisitos s√£o apresentados: <br><br><ul><li>  O sistema pode estar em uma configura√ß√£o de estado discreto (possivelmente infinito). </li><li>  Podemos definir transi√ß√µes discretas entre estados. </li><li>  Podemos definir uma fun√ß√£o de custo que estima o estado atual do sistema. </li></ul><br>  Abaixo darei outros exemplos nos quais, na minha opini√£o, esse m√©todo pode ser aplicado. <br><br><h2>  Implementa√ß√£o </h2><br><h3>  Pseudo c√≥digo </h3><br>  Em nossa implementa√ß√£o, queremos alcan√ßar o seguinte: <br><br><ul><li>  Defina o status do sistema. </li><li>  Defina todas as transi√ß√µes poss√≠veis para o pr√≥ximo estado. </li><li>  Calcule os custos do estado atual. </li><li>  Calcule os custos de todos os pr√≥ximos estados poss√≠veis (ou um subconjunto deles). </li><li>  Usando a distribui√ß√£o Gibbs, calcule a probabilidade de transi√ß√µes. </li><li>  Transi√ß√µes de amostra (amostra) usando probabilidades. </li><li>  Execute uma transi√ß√£o de amostra. </li><li>  Reduza a temperatura computacional. </li><li>  Repita as etapas at√© obter resultados satisfat√≥rios. </li></ul><br>  Na forma de pseudoc√≥digo, o algoritmo MCMC √© o seguinte: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// MCMC    T = 200; //     State s = initialState(); Transitions t[n] = {...} //n   thresh = 0.01; //  ( ) // ,      while(T &gt; thresh){ //    curcost = costfunc(s); newcost[n] = {0}; // newcost   0 probability[n] = {0}; //     0 //  for(i = 0; i &lt; n; i++){ newcost[i] = costfunc(doTransition(s, t[i])); probability[i] = exp(-(newcost[i] - curcost)/T); } //  probability /= sum(probability); //  sampled = sample_transition(t, probability); //  s = doTransition(s, sampled); //  T *= 0.975; }</span></span></code> </pre> <br><h3>  Gera√ß√£o de edif√≠cios 3D </h3><br><h4>  Espa√ßo de Estado e Transi√ß√µes </h4><br>  Para gerar edif√≠cios em 3D, eu gero muitas salas com o volume especificado pela caixa delimitadora. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Volume</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-comment"><span class="hljs-comment">//   glm::vec3 a; glm::vec3 b; void translate(glm::vec3 shift); int getVol(); }; //   int Volume::getVol(){ return abs((bx-ax)*(by-ay)*(bz-az)); } //    void Volume::translate(glm::vec3 shift){ a += shift; b += shift; }</span></span></code> </pre> <br>  Se eu gerar n salas, o estado do sistema √© a configura√ß√£o das caixas delimitadoras no espa√ßo 3D. <br><br>  Deve-se notar que as configura√ß√µes poss√≠veis para esses volumes s√£o infinitas, mas consideravelmente infinitas (elas podem ser listadas em uma quantidade infinita de tempo)! <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  (  !) std::vector&lt;Volume&gt; rooms; // N  for(int i = 0; i &lt; n; i++){ //  Volume x; xa = glm::vec3(0); xb = glm::vec3(rand()%4+5); //   //  . rooms.push_back(x); } //...</span></span></code> </pre> <br>  Muitas transi√ß√µes poss√≠veis ser√£o uma mudan√ßa de salas em uma das seis dire√ß√µes do espa√ßo em uma etapa, incluindo a aus√™ncia de uma transi√ß√£o: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//... //   std::array&lt;glm::vec3, 7&gt; moves = { glm::vec3( 0, 0, 0), //   ! glm::vec3( 1, 0, 0), glm::vec3(-1, 0, 0), glm::vec3( 0, 1, 0), glm::vec3( 0,-1, 0), glm::vec3( 0, 0, 1), glm::vec3( 0, 0,-1), }; //...</span></span></code> </pre> <br>  Nota: √© importante manter o sistema capaz de permanecer em seu estado atual! <br><br><h4>  Fun√ß√£o de custo </h4><br>  Eu queria que os volumes no espa√ßo 3D se comportassem como "√≠m√£s", ou seja: <br><br><ul><li>  Se seus volumes se cruzam, isso √© ruim. </li><li>  Se suas superf√≠cies tocarem, isso √© bom. </li><li>  Se eles n√£o tocam, isso √© ruim. </li><li>  Se eles tocam o ch√£o, isso √© bom. </li></ul><br>  Para dois cuboides no espa√ßo 3D, podemos definir facilmente uma caixa delimitadora: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Volume </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">boundingBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Volume v1, Volume v2)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   Volume bb; //   bb.ax = (v1.ax &lt; v2.ax)?v1.ax:v2.ax; bb.ay = (v1.ay &lt; v2.ay)?v1.ay:v2.ay; bb.az = (v1.az &lt; v2.az)?v1.az:v2.az; //   bb.bx = (v1.bx &gt; v2.bx)?v1.bx:v2.bx; bb.by = (v1.by &gt; v2.by)?v1.by:v2.by; bb.bz = (v1.bz &gt; v2.bz)?v1.bz:v2.bz; return bb; }</span></span></code> </pre> <br>  Usando a caixa delimitadora de volumes, podemos calcular um vetor 3D que me fornece informa√ß√µes sobre a interse√ß√£o de dois volumes. <br><br>  Se o comprimento do paralelep√≠pedo ao longo de um lado for maior que a soma dos comprimentos de dois volumes ao longo desse lado, desse lado eles n√£o se tocar√£o.  Se forem iguais, as superf√≠cies tocam e, se forem menores, os volumes se cruzam. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    3  glm::vec3 overlapVolumes(Volume v1, Volume v2){ //      Volume bb = boundingBox(v1, v2); //  glm::vec3 ext1 = glm::abs(v1.b - v1.a); // v1  3  glm::vec3 ext2 = glm::abs(v2.b - v2.a); // v2  3  glm::vec3 extbb = glm::abs(bb.b - bb.a); //   //  return ext1 + ext2 - extbb; }</span></span></code> </pre> <br>  Esse c√≥digo √© usado para calcular o n√∫mero de quantidades para as quais eu formei uma quantidade ponderada, que √© usada como custo. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volumeCostFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;Volume&gt; rooms)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// int metric[6] = { 0, //   0, //   0, //     0, //     0, // ,   0};//    int weight[6] = {2, 4, -5, -5, -5, 5}; //    for(unsigned int i = 0; i &lt; rooms.size(); i++){ //     for(unsigned int j = 0; j &lt; rooms.size(); j++){ //    ,  . if(i == j) continue; //    . glm::vec3 overlap = overlapVolumes(rooms[i], rooms[j]); //   glm::vec3 posOverlap = glm::clamp(overlap, glm::vec3(0), overlap); metric[0] += glm::abs(posOverlap.x*posOverlap.y*posOverlap.z); //   //   glm::vec3 negOverlap = glm::clamp(overlap, overlap, glm::vec3(0)); metric[1] += glm::abs(negOverlap.x*negOverlap.y*negOverlap.z); //   //   if(overlap.y == 0){ metric[2] += overlap.x*overlap.z; } //   (X) if(overlap.x == 0){ //      0,   , .. overlap.z = 0 metric[3] += overlap.z*overlap.y; } //   (Z) if(overlap.z == 0){ //      0,   , .. overlap.x = 0 metric[4] += overlap.x*overlap.y; } } //  ,   -   . if(rooms[i].ay == 0){ //  ,  ,    . metric[4] += rooms[i].ax*rooms[i].az; } //,     ! if(rooms[i].ay &lt; 0){ //,        if(rooms[i].by &lt; 0){ metric[5] += rooms[i].getVol(); } else{ metric[5] += abs(rooms[i].ay)*(rooms[i].bz-rooms[i].az)*(rooms[i].bx-rooms[i].ax); } } } // Metric * Weights return metric[0]*weight[0] + metric[1]*weight[1] + metric[2]*weight[2] + metric[3]*weight[3] + metric[4]*weight[4] + metric[5]*weight[5]; }</span></span></code> </pre> <br>  Nota: ‚Äúvolume positivo de interse√ß√£o‚Äù significa que os volumes realmente se cruzam.  ‚ÄúVolume negativo de interse√ß√£o‚Äù significa que eles n√£o tocam e a interse√ß√£o √© definida pelo volume no espa√ßo localizado entre os dois pontos mais pr√≥ximos dos dois cuboides no espa√ßo 3D. <br><br>  Os pesos s√£o escolhidos de forma a dar prioridade a uma coisa e multa a outras.  Por exemplo, aqui refino severamente os c√¥modos localizados embaixo do piso e tamb√©m aumento a prioridade daqueles cujas √°reas de superf√≠cie tocam (mais do que refino a interse√ß√£o de volumes). <br><br>  Gosto de custos para todos os pares de quartos, ignorando os quartos que est√£o emparelhados. <br><br><h4>  Encontrando uma solu√ß√£o de baixo custo </h4><br>  A converg√™ncia √© realizada conforme descrito no pseudoc√≥digo.  Ao fazer a transi√ß√£o, movo apenas uma sala de cada vez.  Isso significa que, com n salas e 7 transi√ß√µes poss√≠veis, preciso calcular 7 * n probabilidades e seleciono de todas elas, movendo apenas a sala, que √© <em>provavelmente a</em> mais prefer√≠vel. <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//  float T = 250; while(T &gt; 0.1){ //   std::vector&lt;std::array&lt;double, moves.size()&gt;&gt; probabilities; //   () int curEnergy = volumeCostFunction(rooms); //      ... for(int i = 0; i &lt; n; i++){ //    std::array&lt;double, moves.size()&gt; probability; //      ,     for(unsigned int m = 0; m &lt; moves.size(); m++){ //        . rooms[i].translate(moves[m]); //      ! probability[m] = exp(-(double)(volumeCostFunction(rooms) - curEnergy)/T); //   rooms[i].translate(-moves[m]); } //       probabilities.push_back(probability); } //  ( ) double Z = 0; for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ Z += probabilities[i][j]; } } //  for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ probabilities[i][j] /= Z; } } //    (CDF) ( ) std::vector&lt;double&gt; cdf; for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ if(cdf.empty()) cdf.push_back(probabilities[i][j]); else cdf.push_back(probabilities[i][j] + cdf.back()); } } //      std::random_device rd; std::mt19937 e2(rd()); std::uniform_real_distribution&lt;&gt; dist(0, 1); double uniform = dist(e2); int sampled_index = 0; //   CDF for(unsigned int i = 0; i &lt; cdf.size(); i++){ //    ,   ... if(cdf[i] &gt; uniform){ sampled_index = i; break; } } //     int _roomindex = sampled_index/moves.size(); int _moveindex = sampled_index%moves.size(); //  rooms[_roomindex].translate(moves[_moveindex]); // T T *= 0.99; // !!! } //!! //...</span></span></code> </pre> <br>             ;    ¬´  ¬ª. <br><br>       ,      (cumulative distribution function, CDF).             0  1.     CDF  ,   ,     ¬´    CDF       ¬ª,      .  : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/960/9fe/3cd/9609fe3cdc3a514c34ed2d8e128d8629.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em vez de uma fun√ß√£o cont√≠nua, pode haver etapas discretas. </font><font style="vertical-align: inherit;">Mais detalhes podem ser lidos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©m disso, tenho dados de volume da sala no espa√ßo 3D! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu os uso para gerar um "esquema" usando a classe blueprint, aplicando um tema a dados em massa conhecidos. </font><font style="vertical-align: inherit;">Assim, as casas aparecem. </font><font style="vertical-align: inherit;">A classe blueprint √© descrita no artigo anterior [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] ([ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tradu√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] em Habr√©). </font><font style="vertical-align: inherit;">Para gera√ß√£o completa de uma casa a partir desses volumes, consulte o c√≥digo-fonte.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resultados </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os resultados para um m√©todo t√£o generalizado s√£o bastante bons. </font><font style="vertical-align: inherit;">A √∫nica coisa que precisei configurar foi a prioridade correta e os pesos das penalidades na fun√ß√£o de custo.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/06b/acc/15206bacc91b6635a0f286fa21998363.gif" width="562" height="562"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alguns exemplos de gera√ß√£o de constru√ß√£o usando esse algoritmo e o tema aplicado a eles.</font></font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62d/1ee/92c/62d1ee92c2f422d79c27c14532346855.gif"></div><br> <i>  ( ).</i> <br><br>     ,      (3-5),           . <br><br>         ,      3D- ,      MCMC. <br><br>     ,    ,           ,       .  ,         ,   . <br><br>          .    (  ). <br><br><h2>     </h2><br> ,     3D-    2D-,      . <br><br>        ,        2D-    ‚Äî        ,    . <br><br>         ,     ,      ,     ,   ,      . <br><br>        MCMC,           ,       (             ,  ..). <br><br>   : <br><br><ul><li>  ;       ,    /   . </li><li>  ,          ,    ,   . </li><li> ,  ! </li></ul><br>  :     MCMC     ,  ¬´ ¬ª,  NP- .   ‚Äî  ,      ,   ‚Äî  ! <br><br><h2>   Task- </h2><br> ,     task-           . <br><br>   ,    ,   : <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2019/10/bot_the_builder3.mp4" type="video/mp4"></video></div></div></div><br> <i>      ( ,     ).    .        (   )     .   ,    .            ,       .    - ,     , .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475764/">https://habr.com/ru/post/pt475764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475750/index.html">Transfer√™ncia de Conhecimento e Tradu√ß√£o Autom√°tica Neural na Pr√°tica</a></li>
<li><a href="../pt475754/index.html">Shorts sobre Scrum</a></li>
<li><a href="../pt475758/index.html">N√≠veis de assinatura renov√°veis ‚Äã‚Äãautomaticamente no aplicativo iOS</a></li>
<li><a href="../pt475760/index.html">Desenvolvedores juniores - por que os contratamos e como trabalhamos com eles</a></li>
<li><a href="../pt475762/index.html">Um curr√≠culo com uma fotografia voa para uma urna. Caracter√≠sticas da procura de emprego nos EUA</a></li>
<li><a href="../pt475768/index.html">Kotlin: Como √© uma √≥tima op√ß√£o para o desenvolvimento de aplicativos Android?</a></li>
<li><a href="../pt475770/index.html">Universidade de Stanford - visita e revis√£o</a></li>
<li><a href="../pt475774/index.html">‚ÄúEssas s√£o regras tolas que incomodam a todos‚Äù: discuss√£o das pr√°ticas de campo de senha</a></li>
<li><a href="../pt475776/index.html">Fa√ßa voc√™ mesmo para tr√™s guitarras</a></li>
<li><a href="../pt475778/index.html">WebAssembly: o que e como</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>