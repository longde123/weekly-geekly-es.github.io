<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëñ ü§ï üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® C√≥mo crear mec√°nicas de juego confiables en Excel. Parte 2 üéÉ üë®üèæ‚Äçüî¨ üëø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En esta parte, resolveremos el problema de la colocaci√≥n √≥ptima de armas en el tanque, la disposici√≥n espacial de los teletransportadores en MMORPG y ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo crear mec√°nicas de juego confiables en Excel. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430114/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/uz/nc/jb/uzncjbvwkyi9mqataguysd8pjai.png"></div><br>  En esta parte, resolveremos el problema de la colocaci√≥n √≥ptima de armas en el tanque, la disposici√≥n espacial de los teletransportadores en MMORPG y equilibraremos las batallas de las cuatro clases de personajes RPG. <br><br><h2>  Tareas de colocaci√≥n de objetos </h2><br>  <i>Las hojas de c√°lculo para esta parte se pueden descargar aqu√≠: ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SuperTank</a> ) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">teletransportadores, parte 1</a> ) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">teletransportadores, parte 2</a> )</i> <br><br><h2>  SuperTank: ¬°el problema est√° resuelto! </h2><br>  En el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primer art√≠culo de la</a> serie, hablamos sobre un ejemplo de una tarea para un juego llamado SuperTank.  En la segunda parte, nos familiarizamos con los conceptos b√°sicos del modelado de decisiones y habl√© sobre resolver un ejemplo simple usando la herramienta "Buscar soluciones" en Excel. <br><br>  Ahora podemos aplicar el conocimiento adquirido en la segunda parte al problema de SuperTank, y demostrar que con su ayuda este problema puede resolverse f√°cil y r√°pidamente.  Refresca tu memoria: SuperTank es un juego en el que puedes luchar en un tanque personalizado. <a name="habracut"></a>  El supertank se parece a esto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb8/a6c/2fc/fb8a6c2fcddbb776a18893059f989afc.jpg"></div><br>  Cada supertank puede tener cualquier cantidad de armas de cinco tipos diferentes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62e/717/050/62e717050c0d1e991663a3e9ef2dfc39.png"></div><br>  Un supertank puede caber 50 toneladas de armas, y un jugador puede gastar 100 cr√©ditos.  Adem√°s, el supertank tiene 3 "ranuras cr√≠ticas", en las que se colocan pistolas especiales como MegaRocket y UltraLaser. <br><br>  La hoja de c√°lculo para este ejemplo se puede descargar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  El objetivo es recoger armas que maximicen el da√±o causado por el s√∫per tanque, sin ir m√°s all√° de los l√≠mites de 50 toneladas, 100 cr√©ditos y 3 ranuras cr√≠ticas.  Tambi√©n suponemos que esta tabla contiene toda la informaci√≥n necesaria y que factores como el rango, la frecuencia y la precisi√≥n no son relevantes o ya se tienen en cuenta en el par√°metro Da√±o del arma correspondiente. <br><br>  Para optimizar este esquema, primero ingresamos estos datos en la hoja de c√°lculo.  Justo debajo de √©l, agregaremos otra tabla, en la que habr√° un conjunto de 5 celdas "cuantitativas" para indicar la cantidad de cada uno de los 5 tipos de armas. <br><br>  Hasta que ingresemos un valor de 1 en estas celdas, solo para probar su trabajo, pero estas ser√°n nuestras celdas de decisi√≥n: le pediremos a la herramienta Solver que encuentre los valores correctos para estas celdas.  Es posible comprender que se trata de celdas de decisi√≥n en amarillo, porque seguimos las reglas de formato descritas en la segunda parte.  A la derecha de las celdas "cuantitativas", agregaremos celdas de c√°lculo que multiplicar√°n los valores de cantidad en las celdas de decisi√≥n por los valores de Da√±o, Peso, Costo y Ranuras cr√≠ticas de la tabla anterior.  Por lo tanto, cada fila de esta tabla mostrar√° correctamente el da√±o, el peso, el precio y los espacios cr√≠ticos necesarios para todas las armas usadas en todas las categor√≠as de armas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4e/342/27a/f4e34227a58768ee4d0a4f79fe6954e3.png"></div><br>  Tambi√©n crearemos una secci√≥n a continuaci√≥n, que resumir√° todos los valores de cantidad, peso, costo y ranuras cr√≠ticas de la tabla anterior, y la compararemos con los valores m√°ximos de peso, costo y ranuras cr√≠ticas especificados en las condiciones de la tarea (50, 100 y 3, respectivamente). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f6/76d/b7e/7f676db7e7034d6b9a02be24c5a1eb4b.png"></div><br>  De acuerdo con las reglas de formato de la segunda parte del art√≠culo, las celdas azules en la parte superior son los criterios de las condiciones del problema.  Las celdas grises son celdas de c√°lculo que representan el peso total, el costo y las ranuras cr√≠ticas en funci√≥n de la suma de la tabla de cantidades (es decir, los valores totales de las columnas Peso x Cantidad, Costo x Cantidad y Ranuras cr√≠ticas x Cantidad).  Finalmente, la celda naranja representa el da√±o total de nuestro s√∫per tanque recibido en funci√≥n del da√±o total de la columna Da√±o x Cantidad de la tabla anterior. <br><br>  Antes de comenzar, hagamos que nuestra hoja de c√°lculo sea m√°s f√°cil de usar.  Aprovecharemos la oportunidad de Excel para asignar un nombre a cada celda y dar nombres claros a siete celdas en la √∫ltima tabla de c√°lculo.  Esto es opcional, pero a la larga har√° que la hoja de c√°lculo se vea mucho m√°s clara (por ejemplo, si en lugar de $ F $ 21 la celda se llamar√° MaxCriticalSlots).  Para hacer esto, simplemente seleccionamos una celda y vamos al campo de entrada de nombre a la izquierda del campo de f√≥rmula, e ingresamos un nuevo nombre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/295/3bc/e19/2953bce19ac48c3e2ed4920edbb1e26b.png"></div><br>  Ahora, finalmente, vayamos a Excel Solver y busquemos una soluci√≥n (vaya al lado derecho de la pesta√±a Datos y seleccione Solver. Si no lo ve, vaya a Opciones de Excel , seleccione la categor√≠a Complementos ("Complementos"), aseg√∫rese de que los Complementos de Excel est√©n seleccionados en la lista desplegable "Administrar", haga clic en Ir ("Ir ...") y aseg√∫rese de La casilla de verificaci√≥n Complemento Solver est√° seleccionada. <br><br>  En el campo Establecer objetivo ("Optimizar la funci√≥n objetivo") seleccionaremos la celda naranja del objetivo y luego haremos clic en el bot√≥n de radio M√°x. ("M√°ximo").  En el campo Al cambiar las celdas variables, seleccione las celdas de decisi√≥n (celdas amarillas en la columna Cantidad de la segunda tabla).  A continuaci√≥n, haga clic en el bot√≥n Agregar para agregar las siguientes restricciones: <br><br><ul><li>  Los valores de las celdas de decisi√≥n deben estar en el rango de 0 a alg√∫n m√°ximo razonable (elegimos 50, aunque este es probablemente un valor l√≠mite mucho mayor que el necesario).  Tambi√©n es necesario establecer cada celda de soluci√≥n en una restricci√≥n "= entero", porque no podemos tener una parte fraccionaria del armamento, y Excel Solver considera que cada variable es un n√∫mero real por defecto, a menos que se indique lo contrario. </li></ul><br><ul><li>  Tambi√©n debemos limitar los valores del costo total, el peso total y el n√∫mero total de ranuras cr√≠ticas a los valores de las condiciones del problema.  La imagen del cuadro de di√°logo muestra que ahora tienen nombres convenientes que hemos agregado a la tabla inferior, lo que hace que el cuadro de di√°logo sea m√°s f√°cil de leer. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b88/86b/402/b8886b40290a1c34dd36245276ef9930.png"></div><br>  Ahora hacemos clic en el bot√≥n Resolver ("Encontrar una soluci√≥n") y despu√©s de una breve espera, Solver completar√° los valores de Cantidad, lo que nos dar√° lo siguiente: <br><br><ul><li>  1 ametralladora </li><li>  3 cohetes </li><li>  2 megacohetes </li><li>  1 l√°ser </li><li>  1 UltraLaser </li></ul><br>  Todo esto nos da un da√±o total de 83 unidades y requiere exactamente 50 toneladas, 100 cr√©ditos y 3 ranuras cr√≠ticas.  Puede ver que la mejor soluci√≥n no cambia con el tiempo de ejecuci√≥n de Solver.  Si restablece estos valores y realiza una segunda optimizaci√≥n, o va a Opciones y cambia la semilla, a√∫n obtendremos los mismos valores.  No podemos estar 100% seguros de que esta soluci√≥n sea √≥ptima, pero teniendo en cuenta el hecho de que Solver no logr√≥ mejorarla despu√©s de varios pases de optimizaci√≥n, es muy probable que sea un √≥ptimo real, y no solo un m√°ximo local. <br><br>  ¬°El problema est√° resuelto! <br><br><h2>  Usos Adicionales </h2><br>  Lo bueno es que no solo resolvimos el problema mucho m√°s r√°pido de lo que pudimos manejarlo manualmente, sino que tambi√©n lo configuramos de tal manera que nos permite probar qu√© armas en el juego SuperTank ser√°n m√°s √∫tiles con diferentes par√°metros (peso, costo, ranuras cr√≠ticas).  Esto significa que podemos cambiar relativamente f√°cilmente el efecto de varios cambios en estos par√°metros en el juego SuperTank, y si queremos agregar un nuevo modelo alternativo de super tanque que sea m√°s liviano, m√°s pesado o tenga un n√∫mero diferente de ranuras cr√≠ticas, entonces esto se puede hacer de manera muy simple. <br><br>  Al cambiar todos estos par√°metros, tambi√©n podemos obtener una comprensi√≥n de la utilidad relativa de cada una de estas armas, y determinar r√°pidamente cu√°l es demasiado √∫til, no lo suficientemente √∫til, tiene un precio que no es adecuado para su peso y da√±o, y as√≠ sucesivamente. <br><br>  Una vez m√°s, el punto es que dicha herramienta nos permite buscar en el espacio de dise√±o mucho m√°s r√°pido de lo que podr√≠amos hacerlo manualmente.  Nos brinda una oportunidad conveniente para evaluar el efecto de tales cambios para cualquier decisi√≥n de dise√±o incremental que podamos encontrar, ya sea cambiando los par√°metros del arma o el s√∫per tanque, agregando nuevas armas o modelos de s√∫per tanques, as√≠ como agregando nuevos par√°metros (digamos que el l√≠mite de tama√±o est√° en metros c√∫bicos). <br><br>  Para entender lo que quiero decir, vaya a la celda azul "Costo m√°ximo" y cambie su valor de 100 a 99. Ahora ejecute Solver nuevamente y obtendr√° un dise√±o de arma completamente diferente: <br><br><ul><li>  0 ametralladoras </li><li>  2 cohetes </li><li>  3 megacohetes </li><li>  3 l√°seres </li><li>  0 UltraLasers </li></ul><br>  Tal esquema da un √≠ndice de da√±o ligeramente m√°s bajo (82 en lugar de 83), pero es radicalmente diferente del anterior. <br><br>  Si establece el valor de Costo m√°ximo en 101 o 102, y realiza el c√°lculo nuevamente, entonces existe la posibilidad de que obtengamos una configuraci√≥n similar a la primera o que coincida con ella;  Sea como fuere, el da√±o seguir√° siendo igual a 83 (los esquemas pueden cambiar, porque en tales casos hay varios esquemas √≥ptimos).  Sin embargo, si establece el Costo m√°ximo en 103, deber√≠a obtener lo siguiente: <br><br><ul><li>  1 ametralladora </li><li>  4 cohetes </li><li>  2 megacohetes </li><li>  0 l√°seres </li><li>  1 UltraLaser </li></ul><br>  Lo que aumenta el da√±o total a 84. <br><br>  Esto es interesante: esta disposici√≥n de armas es muy diferente de las dos primeras. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/106/807/611/106807611d9a60e93d06f9ddeca3f7f6.png"></div><br>  Como puede ver, obtenemos un resultado inesperado: la elecci√≥n √≥ptima de armas en nuestro esquema depende en gran medida de los par√°metros del s√∫per tanque y puede variar significativamente incluso con peque√±os cambios en estos par√°metros.  Adem√°s, esto nos proporciona todo tipo de informaci√≥n √∫til: los cinco tipos de armas son √∫tiles en al menos dos de las tres configuraciones de s√∫per tanque, y los Rockets y MegaRockets son obviamente √∫tiles en los tres.  Parece que esto nos dice que los cinco tipos de armas est√°n bien equilibrados, es decir, son √∫tiles entre s√≠ y, al mismo tiempo, siguen siendo √∫nicos. <br><br>  Y como tambi√©n puede observar, este modelado y optimizaci√≥n de soluciones nos brindan una excelente oportunidad para realizar b√∫squedas r√°pidamente en un vecindario local y volver a optimizarlas.  Para algunos tipos de tareas, nos permitir√° detectar estrategias dominantes y haza√±as de jugadores que son dif√≠ciles o imposibles de encontrar de otra manera. <br><br><h2>  Teleportes - Agujeros de gusano </h2><br>  Si observa los dos √∫ltimos ejemplos (el ejemplo de las tasas impositivas en un juego estrat√©gico y SuperTank), podr√≠a pensar que tales t√©cnicas solo son aplicables en los casos en que los usuarios manejan n√∫meros.  ¬°Pero estar√°s absolutamente equivocado!  Como veremos, hay muchos ejemplos de c√≥mo puede obtener los beneficios de optimizar elementos de dise√±o que no solo no se parecen a los n√∫meros de los usuarios, sino que tampoco se parecen a ellos. <br><br>  Tambi√©n puede pensar que el modelado de decisiones solo es aplicable a las decisiones que los jugadores pueden tomar en los juegos.  Esto tampoco es cierto: en algunos casos pueden usarse para modelar con el fin de optimizar sus propias soluciones como dise√±ador. <br><br>  Supongamos que est√° trabajando en un MMORPG espacial.  Un d√≠a, su dise√±ador principal se le acerca con una ansiedad visible en su rostro.  "Estamos completando un redise√±o del sector Omega", dice.  ‚ÄúY tuvimos un problema.  Planeamos agregar algunos teletransportadores de agujeros de gusano "en este segmento del mundo, pero no podemos acordar d√≥nde colocarlos". <br><br>  "¬øCu√°ntos teletransportadores?", Preguntas. <br><br>  ‚ÄúTodav√≠a no lo sabemos.  Probablemente tres, pero puede haber de dos a cuatro.  Todav√≠a no estamos seguros ".  Luego te muestra un mapa que se ve as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/a6e/bc1/0dba6ebc16043666d174e5b3269a2965.png"></div><br>  "¬øQu√© es esto?" <br><br>  ‚ÄúEste es un mapa del sector Omega.  O al menos los sistemas estelares que un jugador puede visitar en este cuadrante.  Necesitamos determinar en qu√© c√©lulas deben estar los agujeros de gusano ". <br><br>  ‚ÄúBueno, entonces, ¬øy por qu√© reglas se colocan?  ¬øEs posible colocar el agujero de gusano en un cuadrante con el sistema estelar? <br><br>  ‚ÄúQueremos que coloque los agujeros de gusano de tal manera que minimice la distancia desde cualquier sistema estelar al agujero de gusano m√°s cercano.  Y s√≠, puedes ponerlos en el mismo cuadrante que el sistema estelar;  son solo peque√±os teletransportadores que cuelgan en el espacio, por lo que se pueden colocar en cualquier lugar.  Y recuerda que a√∫n no hemos decidido cu√°ntos deber√≠a haber, as√≠ que dame soluciones para 2, 3 y 4 agujeros de gusano ". <br><br>  ¬øC√≥mo formular este problema y c√≥mo resolverlo? <br><br><h2>  ¬°Optimizando teletransportadores! </h2><br>  Comencemos preparando c√©lulas de soluci√≥n.  Denotamos los cuatro telepuertos como A, B, C y D. Sabemos que cada telepuerto no es m√°s que las coordenadas (x, y) en el mapa estelar del sector Omega.  Tambi√©n sabemos que necesitaremos alguna forma de indicar el n√∫mero de teletransportes activos, por lo que agregaremos una celda que le permite establecer el n√∫mero de teletransportes.  Solo usamos el teletransporte D cuando se usan 4 agujeros de gusano, y C solo cuando tenemos 3 o m√°s. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e25/6b2/68d/e256b268da6878a1a79c14d2b7bfeb48.png"></div><br>  A continuaci√≥n, prepararemos una tabla para calcular la distancia desde cada sistema estelar al teletransporte m√°s cercano.  Esta tabla se ve as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cdf/4d8/410/cdf4d8410caa870a35ce2dfbe2f2be19.png"></div><br>  El azul izquierdo muestra las coordenadas de cada sistema estelar en el mapa.  Cada fila es un sistema estelar.  Simplemente los transferimos del mapa del sector Omega, que nos dio el dise√±ador l√≠der. <br><br>  A la derecha, calculamos la distancia a cada uno de los cuatro teletransportadores.  Esto es solo un teorema de Pit√°goras.  La distancia se calcula como la ra√≠z cuadrada de las distancias horizontal y vertical entre el sistema estelar y el teletransporte: <br><br><blockquote>  <b>= SQRT (($ B14-Ax) ^ 2 + ($ C14-Ay) ^ 2)</b> </blockquote><br>  (No se preocupe, ¬°prometo que esta es la matem√°tica m√°s dif√≠cil que encontraremos en la serie!) <br><br>  Tomamos las coordenadas X e Y de cada sistema estelar de las celdas azules de la tabla de arriba, y las coordenadas X e Y de cada teletransporte (celdas con los nombres Ax y Ay para el teletransporte A en la funci√≥n SQRT () que se muestra arriba) de las celdas de soluci√≥n amarilla en la parte superior. <br><br>  Finalmente, tomamos el m√≠nimo de estos cuatro valores en la columna Dist to Closest, es decir, simplemente usamos la funci√≥n MIN () para determinar el m√≠nimo de cuatro valores a la izquierda.  Luego resumimos la columna completa a continuaci√≥n;  la suma es la celda objetivo. <br><br>  Es posible que haya notado que en la captura de pantalla anterior, todas las celdas est√°n configuradas en Dist a D. ¬øLa raz√≥n es que estamos usando la celda ‚ÄúN√∫mero de teletransportadores?  en la secci√≥n superior del modelo de soluci√≥n, que le permite configurar el n√∫mero de teletransportes que se tienen en cuenta.  Si el n√∫mero de teletransportadores es 2, entonces usamos el valor 99 en Dist a C y Dist a D, y si es 3, entonces el valor 99 se usa solo en la columna Dist a D. Por lo tanto, cada sistema estelar ignorar√° todos los teletransportadores innecesarios al calcular la distancia al telepuerto m√°s cercano en el caso de 2 o 3 telepuertos. <br><br>  Ahora lanzaremos Solver: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/526/3f6/35c/5263f635cf3425abfe0f6ede918faf68.png"></div><br>  La celda objetivo es la suma en la parte inferior de la columna Dist. M√°s cercana.  Tenga en cuenta que, a diferencia de otros ejemplos, aqu√≠ queremos usar el bot√≥n de opci√≥n "Para: Min" porque necesitamos una distancia m√≠nima entre todos los sistemas estelares y teletransportadores, no un m√°ximo. <br><br>  A continuaci√≥n, indicaremos ocho celdas amarillas para resolver las coordenadas X e Y de los agujeros de gusano A, B, C y D como celdas de las soluciones (al cambiar las celdas variables). En la secci√≥n de restricciones, limitaremos cada una de las coordenadas como un valor entero en el rango de 0 a 12. Tenga en cuenta que utilizamos una restricci√≥n entera para estas celdas de soluci√≥n, porque queremos decir que el dise√±ador principal solo quiere saber en qu√© celda estar√° cada teletransporte, pero podemos omitir f√°cilmente esta restricci√≥n si el dise√±ador necesita coordenadas de material. <br><br>  Si preguntamos por "N√∫mero de teletransportadores?"  valores 2, 3 y 4, y secuencialmente lanzaremos Solver en cada valor, obtendremos las siguientes configuraciones: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/705/3d0/fb37053d0bb564a0ec27a7a45e4e8c32.png"></div><br>  Con esta informaci√≥n, podemos ir al dise√±ador l√≠der y mostrarle las ubicaciones √≥ptimas para la ubicaci√≥n de cualquier n√∫mero de teletransportadores en el rango de 2 a 4. As√≠ es como se ven las ubicaciones √≥ptimas de los "agujeros de gusano" para 2, 3 y 4 teletransportadores en el mapa (se muestra en verde). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/08d/551/6ca08d5517b7f57754deab8408117e19.png"></div><br>  La hoja de c√°lculo para este ejemplo se puede descargar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde aqu√≠</a> . <br><br><h2>  ¬øHabl√© sobre el ninja? </h2><br>  "Incre√≠ble", dice el dise√±ador principal, pero ves sufrimiento en su rostro.  ‚ÄúUh, pero olvid√© decirte que algunos de estos sistemas est√°n habitados por ninja espacial.  Y queremos que los sistemas con el ninja est√©n m√°s lejos de los "agujeros de gusano" para que los jugadores no sientan una amenaza excesiva ". <br><br>  "Wow.  Esto est√° cambiando completamente el caso ". <br><br>  "Bien.  Adem√°s, en algunos sistemas estelares no hay una sino dos colonias, es decir, son dos veces m√°s importantes que estar cerca de los teletransportadores.  O es dos veces m√°s importante ir m√°s all√° si se trata de un sistema con dos colonias de ninjas espaciales.  As√≠ es como se ve el mapa ahora: " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ab/b1c/2de/1abb1c2dea24fc72efbf45d034cb2fdb.png"></div><br>  √âl contin√∫a: ‚ÄúCada n√∫mero negativo es una colonia de ninjas espaciales.  El sistema con el n√∫mero 2 contiene dos colonias humanas, y con el n√∫mero -2 contiene dos colonias del ninja.  ¬øMe puede decir d√≥nde colocar teletransportadores en este caso? <br><br>  "Dime, al menos ya has decidido cu√°ntos teletransportes habr√°: ¬ø2, 3 o 4?", Preguntas sarc√°sticamente. <br><br>  "Me temo que a√∫n no". <br><br><h2>  Resolvemos teniendo en cuenta el ninja </h2><br>  Para resolver este problema, necesitamos agregar una nueva columna a la tabla que indique el peso de la tabla.  Lo llamaremos el "multiplicador".  Simplemente multiplicaremos este valor por el valor en la columna Dist a m√°s cercano. <br><br>  Cuando hacemos esto, Dist to Closest cambia ligeramente su significado.  Ahora, esta no es la distancia al sistema estelar m√°s cercano, porque para los sistemas estelares ninja el valor cambia en -1 veces.  Se asemeja a "puntos" (puntaje) m√°s generalizados, as√≠ que llam√©mosles as√≠. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/667/7e8/edd/6677e8edddd9fa2ac4fecf1ae499f069.png"></div><br>  Por lo tanto, los puntos ahora indican el valor acumulativo.  Al minimizarlo, hacemos que Solver se esfuerce por estar lo m√°s cerca posible de los sistemas con colonias humanas y, al mismo tiempo, lo m√°s lejos posible de los sistemas ninja poblados. <br><br>  Ahora obtenemos los siguientes resultados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/910/372/a85/910372a8558cafb6e62a3b9298c230fc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como puede ver, esto nos da la configuraci√≥n de teletransportadores, en cada caso muy diferente de las versiones m√°s simples sin un ninja. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92a/1a4/727/92a1a4727400d6279a03988381e75f5b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La hoja de c√°lculo para esta versi√≥n extendida del ejemplo de teletransporte se puede descargar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desde aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como puede ver, nuestro modelo de soluci√≥n fue capaz de resolver muy r√°pidamente esta tarea no trivial, y podemos adaptarla a los requisitos cambiantes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta tarea pertenece a la clase de tareas llamadas "tareas de asignaci√≥n de objetos", que est√°n muy bien estudiadas en el campo de la gesti√≥n operativa. </font><font style="vertical-align: inherit;">Pero como puede ver, pueden usarse potencialmente en el dise√±o de juegos, as√≠ como en el dise√±o de niveles, y la soluci√≥n es simple (si no trivial) en Excel.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Equilibrio de clase para peleas jugador contra jugador </font></font></h2><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La hoja de c√°lculo para esta parte se puede descargar desde aqu√≠: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace</font></font></a></i> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hojas de c√°lculo y simulaciones </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En las tres partes anteriores de esta serie de art√≠culos, nos presentamos el concepto de modelado y optimizaci√≥n de soluciones, as√≠ como la herramienta "Solver" del paquete Excel. </font><font style="vertical-align: inherit;">Mostramos c√≥mo se pueden usar para calcular las tasas impositivas √≥ptimas de la ciudad en la estrategia 4X, para determinar la ubicaci√≥n √≥ptima de los teletransportadores en el juego espacial y para seleccionar el dise√±o de arma √≥ptimo para la tarea de s√∫per tanque descrita en la primera parte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surge una pregunta natural: ¬øqu√© pasa con el equilibrio del juego? </font><font style="vertical-align: inherit;">¬øEs posible aplicar t√©cnicas similares a todo tipo de tareas complejas de equilibrio que se encuentran en muchos tipos diferentes de juegos, en particular, en estrategias, RPG y MMORPG?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La respuesta a esta pregunta es s√≠, por supuesto, pero con muchas reservas. Las hojas de c√°lculo en particular tienen muchas limitaciones, porque en la mayor√≠a de los casos no triviales no describen con precisi√≥n el juego. Por lo tanto, ser√° dif√≠cil para nosotros realizar un equilibrio confiable utilizando t√©cnicas de optimizaci√≥n; Las verdaderas tareas de equilibrio de la gran mayor√≠a de los juegos ir√°n mucho m√°s all√° de lo que podemos modelar en una hoja de c√°lculo. La simulaci√≥n del juego en s√≠ misma suele ser demasiado complicada, tiene muchas "partes m√≥viles" y a menudo se realiza en tiempo real, cuando tratamos de simular discretamente, podemos encontrar todo tipo de problemas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo tanto, si quisi√©ramos usar t√©cnicas similares para equilibrar clases en MMORPG como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WildStar</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o en juegos estrat√©gicos como</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aniquilaci√≥n planetaria</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para garantizar al menos cierta precisi√≥n y utilidad, tendr√≠amos que integrarlos en la simulaci√≥n del juego en s√≠.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s, la verdad es que algunos aspectos del equilibrio no pueden automatizarse; Como explicamos en la</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> primera parte del</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> art√≠culo, es imposible ajustar autom√°ticamente la experiencia del juego.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo tanto, lo mejor que podemos esperar es una demostraci√≥n de un ejemplo simple que ilustre un enfoque general para tareas de este tipo: con un ejemplo simple en Excel, aprenderemos c√≥mo abordar la formulaci√≥n de este tipo de problemas de equilibrio y optimizarlos. </font><font style="vertical-align: inherit;">Mostraremos que, al menos para un ejemplo de una batalla simple, Solver puede equilibrar varias clases de RPG entre s√≠. </font><font style="vertical-align: inherit;">Luego puede utilizar esta estructura b√°sica como base para resolver tales problemas de optimizaci√≥n con un esquema m√°s complejo y m√°s profundamente integrado en la simulaci√≥n del juego. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esperamos que con nosotros aprenda todos los trucos y vea lo que este simple ejemplo nos puede dar.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desequilibrado </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No existe una definici√≥n √∫nica y generalmente aceptada de la palabra "equilibrio". Tiene muchos significados, y la verdad generalmente depende del contexto del juego en cuesti√≥n. En diferentes condiciones, el equilibrio puede estar relacionado con la creaci√≥n de varias clases de personajes para igualar sus capacidades en un juego de rol, con el n√∫mero de fuerzas de los oponentes que luchan entre s√≠ en un juego estrat√©gico, o con el ajuste del costo de varias unidades o recursos de acuerdo con su utilidad. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La mejor definici√≥n de "equilibrio" generalmente depende de los objetivos de dise√±o del juego en cuesti√≥n, pero dado que estos objetivos pueden ser cualquiera, es imposible </font><font style="vertical-align: inherit;">determinar a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">priori</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qu√© significa realmente el equilibrio para los juegos en general.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algunos jugadores tienden a creer que equilibrarse en la batalla significa el mismo da√±o. </font><font style="vertical-align: inherit;">Esto es especialmente cierto para los MMORPG, en los que los jugadores a menudo se quejan de que el da√±o por segundo (DPS) de una clase es demasiado peque√±o o demasiado grande en relaci√≥n con los dem√°s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por supuesto, las clases no pueden ser balanceadas solo por DPS; </font><font style="vertical-align: inherit;">es aceptable que una clase tenga un DPS m√°s grande que otra, pero esto debe compensarse con otros factores que limitan la utilidad general de la clase, por ejemplo, una supervivencia reducida o menos DPS a largo plazo en comparaci√≥n con el DPS a corto plazo.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Peque√±o MMO </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagine que estamos creando un nuevo proyecto, un juego de rol en l√≠nea multijugador masivo muy simplificado llamado "Tiny MMO". </font><font style="vertical-align: inherit;">Como parte del desarrollo del dise√±o, nos esforzamos por equilibrar las cuatro clases para las peleas de jugador a jugador (PVP) para que las cuatro clases sean relativamente iguales en la batalla entre ellas, y que no haya una clase clara "mejor" o "peor" que Puedes luchar contra otras clases. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aunque Tiny MMO es un juego en tiempo real, la acci√≥n de cada jugador dura exactamente 3 segundos, por lo que podemos discretizar present√°ndola como un juego por turnos en el que cada movimiento es una parte del juego de tres segundos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los jugadores en este juego pueden elegir una de las cuatro clases de personajes:</font></font><br><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guerrero</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hace el mayor da√±o.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lanza hechizos desde la distancia y tiene el rango de ataque m√°s largo de las cuatro clases.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Healer (Healer) se</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trata autom√°ticamente, restaurando para cada turno cierta parte de su salud.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B√°rbaro (B√°rbaro)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tiene la mayor salud</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto es todo lo que sabemos sobre estas cuatro clases, y necesitamos establecer los par√°metros iniciales de salud (HP), da√±o, curaci√≥n y rango de ataques para las cuatro clases. </font><font style="vertical-align: inherit;">Necesitamos equilibrarlos de tal manera que cada clase sea √∫nica y sus caracter√≠sticas difieran significativamente de todas las otras clases, pero de modo que cada clase resulte ser lo m√°s "equilibrada" posible con respecto a las otras tres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En otras palabras, nos esforzamos por optimizar la siguiente tabla:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2a5/bb2/b9a/2a5bb2b9a8a5b91eed643b89f168cd5f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si bien utilizamos valores temporales y suponemos que cada clase comienza con 50 HP, causa 10 da√±os por turno, cura 0 HP por turno y tiene un alcance de ataque de 40 metros. Cada personaje se mueve a una velocidad de 10 metros por turno. Como el dise√±o indica que las cuatro clases de caracteres pueden moverse a la misma velocidad, consideraremos este valor constante y no ingresaremos la velocidad de movimiento en la tabla de variables de decisi√≥n.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, este es un caso de estudio con un modelo de da√±o muy simplificado. Este es un valor promedio continuo de da√±o por segundo, que ignora la diferencia entre el da√±o del pulso y el da√±o a largo plazo, as√≠ como el man√° y otras mec√°nicas que modifican las habilidades de ataque de las clases. Solo tendremos un tipo de da√±o, lo cual es bastante poco realista, porque la mayor√≠a de las clases tienen docenas de tipos de da√±o, y necesitaremos implementar un sistema de IA que seleccione el ataque en cada turno. Adem√°s, en la mayor√≠a de los juegos, el da√±o tiene un elemento de aleatoriedad, pero por ahora lo omitiremos y asumiremos que la variabilidad del da√±o no es tan grande como para afectar significativamente el resultado de la batalla entre las dos clases.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por supuesto, cualquier balance realizado en Excel es poco probable que sea ideal o consistente con el balance final del juego; </font><font style="vertical-align: inherit;">ella tendr√° que pasar por muchas iteraciones de pruebas de juego. </font><font style="vertical-align: inherit;">Pero si nos tomamos una o dos horas para obtener una </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buena</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> primera opci√≥n para nuestro juego en Excel, entonces al menos es mucho m√°s probable que nos acerquemos a los par√°metros cualitativos del saldo inicial, lo que nos acercar√° al saldo final que queremos obtener.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mesa de la victoria </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Necesitamos equilibrar cuatro clases entre s√≠ en una batalla uno a uno. </font><font style="vertical-align: inherit;">Como solo tenemos 4 clases (Guerrero, Mago, Sanador y B√°rbaro), hay 6 combinaciones posibles de diferentes clases:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerrero - Mago </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerrero - Sanador </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerrero - B√°rbaro </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mago - Sanador </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mago - B√°rbaro </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sanador - B√°rbaro </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este equilibrio puede ser bastante complicado. </font><font style="vertical-align: inherit;">Incluso en nuestro caso bastante simple con cuatro clases, tenemos seis relaciones entre clases, as√≠ como podemos dibujar seis l√≠neas entre cuatro puntos de un cuadrado.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52f/bc5/6e2/52fbc56e2c50d662a5236a089c8c9fdc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada vez que deseamos realizar incluso un peque√±o cambio en uno de los par√°metros de cualquiera de las clases, este cambio tambi√©n afectar√° el equilibrio PvP entre este par de clases y las </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otras</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dos clases. </font><font style="vertical-align: inherit;">Esta interconexi√≥n de la ley de poder solo crecer√° con un aumento en el n√∫mero de clases, y las decisiones sobre el equilibrio de PvP entre cualquier par de clases hechas "en el vac√≠o", sin tener en cuenta todas las dem√°s interacciones, pueden volverse muy peligrosas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idealmente, nos gustar√≠a crear alg√∫n tipo de </font><i><font style="vertical-align: inherit;">tabla</font></i><font style="vertical-align: inherit;"> de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">victoria</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como el que se muestra a continuaci√≥n. </font><font style="vertical-align: inherit;">Si podemos simular una batalla entre cada uno de estos 6 pares en una hoja de c√°lculo, podremos generar una determinada variable de "puntos" para cada uno de los 6 pares. </font><font style="vertical-align: inherit;">Cuantos m√°s puntos, mejor, entonces podemos combinar los seis puntos para generar una funci√≥n de objetivo.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2f/b4f/6e8/b2fb4f6e8317a42dfc6696d1c41ade97.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga en cuenta que en la tabla anterior, las celdas a lo largo de las diagonales son cero, porque denotan pares de la misma clase que se equilibrar√°n por definici√≥n. </font><font style="vertical-align: inherit;">Adem√°s, las celdas en la esquina superior derecha tambi√©n son cero, porque denotan exactamente los mismos pares que en las celdas en la esquina inferior izquierda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora preparemos el modelo para la batalla entre dos clases diferentes.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Simulador de batalla" </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organizaremos cada par de clases a una distancia de 100 metros entre s√≠. </font><font style="vertical-align: inherit;">Cada personaje tiene 3 segundos para atacar, por lo que podemos imaginar esto como una simulaci√≥n por turnos en la que cada "movimiento" significa 3 segundos. </font><font style="vertical-align: inherit;">En cada "movimiento", cada personaje ataca al otro, si est√° dentro del alcance del ataque, o contin√∫a movi√©ndose para reducir la distancia. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La simulaci√≥n se ve as√≠:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b1/7ce/236/3b17ce2366faaece720a363f57c261d9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arriba hay un par de personajes que entraron en la batalla: en este caso, Mage (clase 1) y Healer (clase 2). </font><font style="vertical-align: inherit;">La columna izquierda muestra la distancia actual entre los dos caracteres simulados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada personaje, las columnas ser√°n:</font></font><br><br><ul><li> <b>Max Range</b> :   ,     .           . </li><li> <b>Healing</b> :      ,      . </li><li> <b>HP</b> :      .      HP    ,        .         ,         . </li><li> <b>Damage</b> :  ,   ,       .   ,     0. </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los ataques? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Esta columna verifica si el personaje est√° dentro del rango de ataque. </font><font style="vertical-align: inherit;">Si es as√≠, esto significar√° que el personaje est√° atacando en el turno actual; </font><font style="vertical-align: inherit;">si no, el personaje se acerca para alcanzar a otro personaje.</font></font></li></ul><br>  Por lo tanto, ambos personajes comienzan a moverse uno hacia el otro, y luego atacan hasta que cualquiera de ellos o ambos mueren.  Cada personaje se mueve cada 3 segundos 5 metros (5 metros por "turno").  Cuando ambos personajes se mueven el uno hacia el otro, el Rango cambiar√° en cada turno en 10 unidades, y en 5 unidades si solo uno de ellos se mueve.  El juego en s√≠ est√° estructurado para que ambos personajes puedan comenzar a moverse simult√°neamente, despu√©s de lo cual se permite el movimiento al mismo tiempo, por lo que es posible que ambos personajes puedan morir al mismo tiempo. <br><br>  Luego, necesitamos establecer la puntuaci√≥n para esta tabla y generar un valor num√©rico que indique cu√°n "buena" fue la batalla;  en otras palabras, qu√© tan cerca estamos de alcanzar nuestros objetivos de dise√±o. <br><br>  Obviamente, queremos que ambos personajes est√©n muertos al final de la batalla, o al menos est√©n lo m√°s cerca posible de la muerte.  Si la batalla es equilibrada, ambas clases de lucha deber√≠an minimizar la salud del enemigo al final de la batalla. <br><br>  Sin embargo, esto solo no es suficiente.  Si organizamos la puntuaci√≥n de esta manera, ¬°entonces el optimizador simplemente maximizar√° los valores de da√±o para que ambos personajes se maten instant√°neamente!  (Si tiene curiosidad, intente cambiar la hoja de c√°lculo adjunta al art√≠culo para verlo usted mismo).  Obviamente, no luchamos por la muerte instant√°nea: necesitamos que ambos personajes est√©n muertos o casi muertos al final de la batalla, pero <i>al mismo tiempo</i> queremos que la pelea dure un tiempo razonable. <br><br>  En otras palabras, no solo nos esforzamos por garantizar un equilibrio relativamente igual de todas las clases entre s√≠;  Tambi√©n queremos hacer que el balance sea <i>interesante</i> , incluida la lucha que dura una cantidad de tiempo adecuada. <br><br>  Para generar tal estimaci√≥n de saldo, necesitamos crear varias celdas a la derecha de cada tabla.  <i>Duraci√≥n</i> indica la duraci√≥n de la batalla;  ella cuenta el n√∫mero de filas en la tabla en la que <i>ambos</i> personajes todav√≠a est√°n vivos.  <i>Total HP</i> calcula los puntos de golpe totales de los dos personajes supervivientes.  Idealmente, deber√≠a ser 0, es decir, para cuando la batalla termine, ambos personajes est√°n muriendo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/957/514/77c/95751477c6324ce2fc26e41c6979122a.png"></div><br>  Y finalmente, Score combina la duraci√≥n y la cantidad total de puntos de golpe en el formulario (Duraci√≥n / (1 + HP total)).  Observe que agregamos 1 al divisor, porque Total HP podr√≠a ser 0, y en ese caso obtendr√≠amos un error de divisi√≥n por cero.  De esta forma, podemos garantizar que recompensemos al optimizador por encontrar la duraci√≥n m√°xima de la batalla <i>y el</i> valor m√≠nimo de la suma de los puntos de golpe. <br><br>  (Tenga en cuenta que dado que tenemos 17 l√≠neas en cada "simulaci√≥n" de combate de clase a clase. Esto significa que esencialmente tomamos una decisi√≥n de dise√±o de que la pelea deber√≠a durar alrededor de 17 rondas. Si queremos que la pelea sea m√°s corta o durante m√°s tiempo, puede cambiar el n√∫mero de filas, editar la f√≥rmula para calcular el puntaje y realizar una segunda optimizaci√≥n en consecuencia). <br><br>  Finalmente, tomamos estos seis valores de Puntuaci√≥n (uno para cada tabla) y los usamos en la Tabla de Victoria anterior para mostrar los resultados de la batalla entre cada par de clases. <br><br>  Simplemente puede resumir estos seis valores de puntaje y usar el resultado como el valor de puntaje final.  Sin embargo, si hacemos esto, entonces Solver con una alta probabilidad no podr√° encontrar un buen equilibrio entre las calificaciones m√°s altas y m√°s bajas para las peleas individuales, y tambi√©n recibir√° calificaciones muy altas para algunos pares de clases y calificaciones bajas para otros.  Esto no es lo que queremos: necesitamos que <i>todas las</i> calificaciones sean altas y nos esforzamos por elevarlas todas.  Para solucionar esto, multiplicamos la suma de las calificaciones por la calificaci√≥n <i>m√°s peque√±a</i> en el grupo (usando la funci√≥n MIN () de Excel) para que Solver se enfoque en las calificaciones con el valor m√°s bajo. <br><br><h2>  Agregar restricciones </h2><br>  A√∫n no hemos terminado.  Si optimiza un modelo de soluci√≥n con los par√°metros actuales, lo m√°s probable es que las clases no se configuren correctamente; de ‚Äã‚Äãhecho, es muy probable que el modelo escriba los mismos valores de HP, Da√±o, Curaci√≥n y Rango en la tabla de variables de decisi√≥n. <br><br>  Y, por supuesto, queremos que cada clase tenga su propia personalidad.  Necesitamos que Warrior haga el mayor da√±o, Mage tiene el rango m√°s grande, Healer tiene el valor de curaci√≥n m√°ximo y Barbarian tiene el HP m√°s alto.  Tambi√©n queremos que estas diferencias no sean demasiado peque√±as, necesitamos que estas clases sean muy diferentes entre s√≠. <br><br>  Para hacer esto, crearemos una peque√±a tabla de restricciones.  Esta tabla garantiza que cada una de las cuatro clases tendr√° un atributo correspondiente, y luego dar√° una puntuaci√≥n de 0 o 1, dependiendo de si se cumple la condici√≥n de restricci√≥n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91a/a33/010/91aa330102f6855b19ddc62b21e4b1a3.png"></div><br>  La tabla Diferencia m√≠nima de la derecha muestra la diferencia m√≠nima de cada atributo de la clase en relaci√≥n con todas las dem√°s clases.  En otras palabras, Warrior debe tener al menos 4 HP m√°s de da√±o que todas las dem√°s clases, Mage debe tener un rango de ataque de al menos 10 m√°s, y as√≠ sucesivamente. <br><br>  Ahora que hemos agregado estas restricciones especiales, ¬°es hora de optimizar! <br><br><h2>  Busca soluciones </h2><br>  Ahora podemos ejecutar la herramienta Solver ("Encontrar soluciones") integrada en Excel para tratar de optimizar los par√°metros iniciales.  Como celda objetivo, seleccionaremos la celda Puntuaci√≥n, que combina los resultados de los seis torneos.  Establecimos las variables de decisi√≥n para incluir las 16 celdas en la tabla amarilla de variables de decisi√≥n que creamos al principio. <br><br>  Tambi√©n establecemos las restricciones (en el campo Sujeto a restricciones) de la siguiente manera: <br><br><ul><li>  Todas las celdas de decisi√≥n deben ser enteras con un valor m√≠nimo de 0. </li><li>  Todas las celdas de la columna HP deben tener un valor m√°ximo de 200 y un m√≠nimo de 30. </li><li>  Todas las celdas en la columna Da√±o tienen un valor m√°ximo de 20. </li><li>  Todas las celdas en la columna Curaci√≥n tienen un valor m√°ximo de 15. </li><li>  Todas las celdas en la columna Rango tienen un valor m√°ximo de 100. </li><li>  Adem√°s, las cuatro celdas en la secci√≥n Restricciones especiales deben establecerse en 1 para satisfacer sus condiciones especiales. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc0/cae/d5a/fc0caed5a1d370e16c71d9b2f3ef7933.png"></div><br>  Finalmente, configure el M√©todo de resoluci√≥n en Evolutivo y ejecute Solver.  Tenga en cuenta que, dado que se trata de un algoritmo evolutivo, existe la posibilidad de mejorar la soluci√≥n encontrada durante la segunda o tercera ejecuci√≥n de Solver, o despu√©s de configurar los par√°metros (bot√≥n Opciones) para la optimizaci√≥n evolutiva. <br><br>  Como resultado, deber√≠amos obtener algo similar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d71/2c6/0add712c65d58c0182fd01b362787d1c.png"></div><br>  ... y como por arte de magia, Solver nos dio una buena configuraci√≥n de equilibrio inicial. <br><br>  Como puedes ver, Warrior ahora hace el mayor da√±o, Mage tiene el rango m√°s grande, Healer cura mejor y Barbarian tiene la mayor cantidad de HP.  Adem√°s, puedes ver los resultados de los torneos individuales "clase contra clase" y ver c√≥mo las clases se mostraron en la batalla entre ellas;  Como puede ver, la mayor√≠a de ellos est√°n equilibrados de manera muy uniforme: al final de la batalla, ambas clases est√°n muriendo, o una de ellas apenas sobrevive.  Adem√°s, todos los torneos duran lo suficiente, ninguna de las clases puede "patear" a la otra. <br><br>  No est√° mal para unas pocas horas de trabajo, ¬øverdad? <br><br><h2>  Conclusi√≥n </h2><br>  En este ejemplo, creamos una tarea de equilibrio simple y demostramos que, de hecho, podemos resolverla con la ayuda de la simulaci√≥n y la optimizaci√≥n.  Aunque es obvio que este es un ejemplo simple, nos muestra el poder de las t√©cnicas de modelado y la optimizaci√≥n de decisiones.  Adem√°s, puede convertirse en una fuente de inspiraci√≥n que se puede utilizar en herramientas de equilibrio m√°s complejas, estrechamente integradas en la simulaci√≥n del juego.  Esperamos que pueda usar este ejemplo como gu√≠a para formular tales tareas en la pr√°ctica. <br><br>  En las siguientes dos partes de la serie, profundizaremos en el √°rea de tareas de asignaci√≥n, que est√° asociada con la selecci√≥n de asignaciones √≥ptimas de dos o m√°s conjuntos de entidades.  Mostraremos c√≥mo resolver este tipo de problemas y demostraremos c√≥mo usamos este enfoque para crear el dise√±o de la torre en nuestro juego de estrategia para iOS / Android <i>City Conquest</i> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430114/">https://habr.com/ru/post/es430114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430102/index.html">ENOG 15: "¬øPor qu√© Internet sigue en l√≠nea?"</a></li>
<li><a href="../es430104/index.html">Datos m√©dicos | No emita una tarjeta m√©dica en sus manos.</a></li>
<li><a href="../es430106/index.html">Nuevo en XYZprinting en IMTS 2018: impresoras 3D y robots</a></li>
<li><a href="../es430108/index.html">¬øPor qu√© el "joven t√©cnico" no podr√° construir un l√°ser?</a></li>
<li><a href="../es430112/index.html">C√≥mo ense√±amos a un autom√≥vil a hablar con millones de personas</a></li>
<li><a href="../es430116/index.html">Las computadoras escriben en prosa, pero siguen siendo inferiores a las personas. Por qu√©</a></li>
<li><a href="../es430118/index.html">Unity3D: Modificar delegado de aplicaci√≥n de iOS</a></li>
<li><a href="../es430120/index.html">Domar a la bestia. Lo que enfrentamos al desarrollar una aplicaci√≥n de diario personal en React Native</a></li>
<li><a href="../es430122/index.html">La adicci√≥n al trabajo es una condici√≥n dolorosa de la que no es costumbre hablar.</a></li>
<li><a href="../es430126/index.html">Otra lista de proyectos para practicar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>