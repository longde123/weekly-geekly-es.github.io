<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏾 💓 👨‍⚕️ Si Richard Hendricks était stupide, ou recherche linéaire contre binaire 🗾 🙌🏿 ◾️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je pense que sur Habré, il y a des fans de la série Silicon Valley . Cette semaine, pour la première fois en six saisons, ils ont montré un grand code...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Si Richard Hendricks était stupide, ou recherche linéaire contre binaire</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/477138/"><p><img src="https://habrastorage.org/webt/oq/v2/qx/oqv2qxmb0rlwnlbr_fqptouqp_s.jpeg"></p><br><p>  Je pense que sur Habré, il y a des fans de <strong>la série Silicon Valley</strong> .  Cette semaine, pour la première fois en six saisons, ils ont montré un grand code - bien sûr, je veux immédiatement en discuter ici. </p><br><p>  Voulant humilier le personnage principal Richard Hendrix, son ancien patron montre lors d'une réunion un fragment de son ancien code.  Là, une recherche linéaire est appliquée aux données déjà triées - la tâche sera donc terminée, mais elle semble très inefficace. </p><br><p>  Richard lui-même ne prétend pas que le code est mauvais.  Cependant, parmi les téléspectateurs de la série, sa décision a soudainement trouvé des défenseurs, et maintenant je me demande ce que Habr pense de leur position. </p><a name="habracut"></a><br><p>  L'extrait de code connu de Richard ressemble à ceci: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!element.equals(sortedList.get(index)) &amp;&amp; sortedList.size() &gt; ++index); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &lt; sortedList.size() ? index : -<span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br><p>  Ici, une recherche linéaire se tourne à son tour vers chaque élément d'une liste triée, jusqu'à ce qu'il arrive à la bonne.  En règle générale, ils préfèrent la recherche binaire sur les données triées, qui divisent à chaque fois l'ensemble en deux, rejetant la moitié inappropriée dans son ensemble (car avec une augmentation du volume de données, le nombre d'itérations dans le linéaire augmente beaucoup plus rapidement que dans le binaire).  Mais dans le subreddit / r / SiliconValleyHBO, le <a href="https://www.reddit.com/r/SiliconValleyHBO/comments/dxwufe/silicon_valley_6x04_episode_discussion/f7x8pvq/">commentaire</a> suivant est apparu: </p><br><blockquote>  «Je veux étudier un peu et souligner que« l'erreur »de Richard en utilisant la recherche linéaire au lieu de la recherche binaire sur des données triées s'avère en fait être plus productive dans de nombreux cas.  Avec des ensembles de données géants (je pense que le seuil est sur des millions d'éléments), la recherche binaire est plus rapide.  Mais en général, si votre ensemble de données n'est pas gigantesque, une recherche linéaire sera mieux mise en cache par le processeur, mieux adaptée au prédicteur de branche, et votre algorithme peut également être vectorisé.  Les recherches linéaires nécessitent plus d'itérations, mais chacune est incroyablement plus rapide qu'une itération de recherche binaire.  C'est contre-intuitif et contredit tout ce qu'on vous a enseigné à l'université, mais ça l'est. <br><br>  Ce <a href="https://youtu.be/FJJTYQYB1JQ">rapport est</a> très intéressant et montre des résultats étonnants de mesures de performances réelles. » </blockquote><p>  Et d'autres membres du fil ont soutenu le commentateur: oui, en théorie, toutes les itérations sont équivalentes, mais sur du vrai matériel avec de réelles optimisations, tout est complètement différent.  Comme, le créateur de la série, Mike Judge, a travaillé dans la vallée dans les années 80, lorsque tous ces caches L1 et la prédiction de branche n'étaient pas encore particulièrement prononcés, de sorte que le comportement du processeur était beaucoup plus proche du modèle idéal - c'est un exemple de la série. </p><br><p>  Pour moi, comme le dit le commentaire, tout cela semble contre-intuitif, mais il est devenu intéressant de savoir si Richard pouvait avoir raison.  Bien sûr, cela interfère avec le fait que tout le contexte n'est pas donné dans la série: par exemple, nous n'avons aucune idée de la quantité de données itérée.  D'une part, Richard a ensuite travaillé pour le géant de l'Internet Hooli, où il devait probablement gérer des millions d'enregistrements, mais d'autre part, c'était son premier jour ouvrable, et il ne pouvait pas être immédiatement déversé en millions.  Nous posons la question de cette façon: même si la recherche binaire est clairement meilleure pour la plupart des tâches dans Hooli, est-il probable que Richard ait pris la bonne décision pour ses conditions et que d'autres personnages se moquent de lui en vain, ne connaissant pas le contexte? </p><br><p>  Pour comprendre, j'ai ouvert un <a href="https://youtu.be/FJJTYQYB1JQ">rapport</a> cité par Reddit.  Comme promis, cela s'est avéré intéressant (pas surprenant, étant donné qu'il s'agit d'un rapport d' <strong>Andrei Alexandrescu</strong> ), mais après avoir regardé une partie et cliqué sur le reste, je n'y ai pas vu de mesures comparatives de recherche binaire et linéaire. </p><br><p>  Mais je me suis souvenu qu'à notre conférence DotNext, le même Alexandrescu avait également parlé de performance.  J'ai ouvert la <a href="https://habr.com/ru/company/jugru/blog/425191/">version texte de</a> son rapport, que nous avons faite pour Habr, et j'ai cherché le mot "linéaire".  Il s'est avéré, entre autres, qu'il donnait juste un exemple d'un scénario curieux dans lequel cette recherche serait beaucoup plus efficace qu'une recherche binaire (recherche d'éléments correspondants de deux ensembles dans le cas où ces ensembles sont identiques) - mais c'est un cas très spécifique, pour lequel il n'y a pas de conclusion générale " la recherche linéaire est sous-estimée. " </p><br><p>  Googlé ce que l'Internet moderne dit à ce sujet - mais a essentiellement trouvé des réponses à Stack Overflow, où ils écrivent simplement «utilisez le binaire, moins d'itérations».  Il y a aussi eu des cas où ils ont essayé de se comparer, mais qui ne m'ont pas semblé très convaincants. </p><br><p>  Ici, bien sûr, l'option prie "vous devez vous évaluer afin de tout voir vous-même sur du vrai matériel". </p><br><p>  Mais si pour toutes mes visites à DotNext, j'ai appris quelque chose de deux Andreev soucieux de la performance (Alexandrescu et <strong>Akinshina</strong> ), c'est une prise de conscience de la fréquence à laquelle les gens comparent incorrectement et de combien ils ne prennent pas en compte.  Par conséquent, j'ai une faible confiance dans les publications Internet aléatoires avec des repères, mais pour moi-même encore plus bas. </p><br><p>  Heureusement, il y a des gens sur Habr qui comprennent beaucoup plus que moi (par exemple, le même Andrey <a href="https://habr.com/ru/users/dreamwalker/" class="user_link">DreamWalker</a> Akinshin, qui a écrit un livre entier sur l'analyse comparative).  Par conséquent, si vous comprenez le sujet - veuillez nous dire dans les commentaires comment tout est vraiment.  À quelle taille de données une approche linéaire peut-elle toujours être un bon choix?  Quelle est la probabilité que Richard ait tout fait correctement, même si lui-même n'est pas prêt à le défendre? </p><br><p>  Et s'il n'y a pas de commentateurs avertis, je devrai attacher Akinshin à la batterie du <a href="https://dotnext-piter.ru/%3Futm_source%3Dhabr%26utm_medium%3D477138%26utm_campaign%3Ddotnext19piter">prochain</a> DotNext et faire le test. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr477138/">https://habr.com/ru/post/fr477138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr477126/index.html">Admin en 5 minutes. Frontend - react-admin, backend - Flask-RESTful</a></li>
<li><a href="../fr477128/index.html">Détective Habra le week-end</a></li>
<li><a href="../fr477130/index.html">"Eugene Onegin": inversion (histoire N.-F.)</a></li>
<li><a href="../fr477132/index.html">Données personnelles en Fédération de Russie: qui sommes-nous tous? Où allons-nous?</a></li>
<li><a href="../fr477136/index.html">Comment FL.ru trompe les utilisateurs en vendant deux fois un service, en enfreignant leurs propres règles</a></li>
<li><a href="../fr477142/index.html">Comment les modificateurs d'accès freinent le développement des jeunes professionnels</a></li>
<li><a href="../fr477144/index.html">Comment rendre votre HTML réactif en ajoutant une ligne de code CSS</a></li>
<li><a href="../fr477146/index.html">Parlez de la mort</a></li>
<li><a href="../fr477148/index.html">IntelliSense basé sur l'IA pour votre code</a></li>
<li><a href="../fr477154/index.html">Boîte pour stocker des données dans des applications go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>