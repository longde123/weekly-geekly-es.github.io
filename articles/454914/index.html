<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•î üë©üèª‚Äçüî¨ üë®üèø‚Äçüè´ Usamos Yii2. Estamos escribiendo otro CMS o un intento de acelerar significativamente el desarrollo con una sobrecarga m√≠nima üöñ üë®üèº‚Äçü§ù‚Äçüë®üèª üè∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Casi todos los desarrolladores que han estado trabajando con un determinado marco durante mucho tiempo tienen un conjunto de sus propias herramientas ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Usamos Yii2. Estamos escribiendo otro CMS o un intento de acelerar significativamente el desarrollo con una sobrecarga m√≠nima</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454914/">  Casi todos los desarrolladores que han estado trabajando con un determinado marco durante mucho tiempo tienen un conjunto de sus propias herramientas que permiten acelerar el desarrollo del sitio.  Sin embargo, a menudo, est√°n mal estructurados, no tienen documentaci√≥n y se finalizan en el "proceso" de producci√≥n. <br><br>  La idea del proyecto yicms era recopilar todos los desarrollos para el marco de trabajo Yii2, que parec√≠a conveniente en un determinado sistema, a la vanguardia de lo cual deber√≠a ponerse la facilidad de uso, la flexibilidad y la capacidad de acelerar significativamente el desarrollo de sitios est√°ndar con sus herramientas.  Este proyecto fue desarrollado por m√≠ para el "alma", pero por el momento ya est√° en beta. <br><a name="habracut"></a><br>  La esencia de yicms est√° en alg√∫n punto intermedio entre las capacidades del marco y las capacidades habituales de CMS.  Esto no es CMS en el sentido habitual de la palabra, sino solo un conjunto de m√≥dulos que pueden acelerar significativamente el desarrollo del sitio utilizando sus propias herramientas, mientras que tienen pleno "acceso" a las capacidades del marco.  Las caracter√≠sticas principales que est√°n incrustadas en yicms son el panel de administraci√≥n generado sobre la marcha y las clases con anotaciones autom√°ticas que le permiten utilizar el autocompletado IDE y tener una interfaz intuitiva. <br><br><h3>  Instalaci√≥n y configuraci√≥n </h3><br>  Entonces, comencemos con yicms instal√°ndolo.  Para las citas, la forma m√°s f√°cil es usar Open Server o cualquier otra plataforma de servidor similar.  Como yicms tiene una fuerte dependencia de Yii, primero lo instalaremos.  Para simplificar, usaremos la plantilla b√°sica: <br><br> <code>composer create-project --prefer-dist yiisoft/yii2-app-basic basic</code> <br> <br>  Despu√©s de que el compositor instale el marco, agregue la secci√≥n requerida del archivo composer.json con los cuatro m√≥dulos yicms y ejecute la actualizaci√≥n del compositor. <br><br><pre> <code class="json hljs"> <span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"php"</span></span>: <span class="hljs-string"><span class="hljs-string">"&gt;=5.4.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2-bootstrap"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2-swiftmailer"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0 || ~2.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-common"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-pages"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-essences"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-feedback"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span> },</code> </pre><br>  Cada m√≥dulo representa un conjunto de funcionalidades espec√≠ficas, que ser√°n consideradas en el futuro.  Por ahora, solo inst√°lalos todos. <br><br>  A continuaci√≥n, debe recordar configurar el servidor.  En Open Server usamos Apache y configuramos .htaccess de la siguiente manera: <br><br>  Para el archivo ra√≠z .htaccess: <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymLinks IndexIgnore */* RewriteEngine <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !^/(web) RewriteRule ^assets/(.*)$ /web/assets/<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [L] RewriteRule ^css/(.*)$ web/css/$1 [L] RewriteRule ^js/(.*)$ web/js/$1 [L] RewriteRule ^images/(.*)$ web/images/$1 [L] RewriteRule ^files/(.*)$ web/files/$1 [L] RewriteRule (.*) /web/$1 RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule . web/index.php</span></span></code> </pre><br>  Para el archivo .htaccess en el directorio web <br><br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_FILENAME}</span></span> !-f RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_FILENAME}</span></span> !-d RewriteRule . index.php</code> </pre><br>  El siguiente paso es llevar la migraci√≥n de cada m√≥dulo yicms a la base de datos.  En la consola, ejecutamos secuencialmente los siguientes comandos: <br><br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-common/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-pages/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-essences/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-feedback/Migrations</code> <br> <br>  Ahora comencemos la configuraci√≥n en el archivo config / web.php. <br><br>  La secci√≥n de m√≥dulos se configura de la siguiente manera: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'modules'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'common'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsCommon\CommonModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'pages'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsPages\PagesModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'essences'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsEssences\EssencesModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'feedback'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsFeedback\FeedbackModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'redactor'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\redactor\RedactorModule'</span></span>, ],</code> </pre><br>  La secci√≥n de arranque se configura de la siguiente manera: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'bootstrap'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'common'</span></span>, <span class="hljs-string"><span class="hljs-string">'pages'</span></span>, <span class="hljs-string"><span class="hljs-string">'essences'</span></span>, <span class="hljs-string"><span class="hljs-string">'feedback'</span></span>],</code> </pre> <br>  La secci√≥n de usuario se configura de la siguiente manera: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'identityClass'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsCommon\Base\CommonUser'</span></span>, <span class="hljs-string"><span class="hljs-string">'enableAutoLogin'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ],</code> </pre><br>  Elimine la secci√≥n de comentarios urlManager: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'urlManager'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'enablePrettyUrl'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'showScriptName'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-string"><span class="hljs-string">'rules'</span></span> =&gt; [ ], ],</code> </pre><br>  El marco Yii2 y el sistema yicms se han configurado correctamente. <br><br>  Despu√©s del primer inicio, si todo se configur√≥ correctamente, el directorio yicms debe crearse en el directorio ra√≠z del proyecto que contendr√° los archivos disponibles para los cambios del usuario y tambi√©n se crear√°n clases con anotaciones autom√°ticas. <br><br><img src="https://habrastorage.org/webt/ws/zc/n6/wszcn6cnsn9mjmguj_cq5mwkt8k.jpeg"><br><br><h3>  Descripci√≥n de los m√≥dulos comunes y de p√°ginas </h3><br>  El sistema yicms consta de dos secciones.  La secci√≥n de desarrollo, que debe ser accesible solo para el desarrollador (el c√≥digo puede estar roto en ella) y la secci√≥n de administraci√≥n debe ser accesible para el administrador del sitio (la gesti√≥n de contenido se lleva a cabo en √©l).  Para comenzar, debe ir a la secci√≥n Desarrollo, para esto debe usar la siguiente URL: <br><br> <code>http://&lt;  &gt;/web/common/dev/login-as-dev?hash=123456&amp;asDev</code> <br> <br>  Despu√©s de eso, el panel Dev deber√≠a abrir: <br><br><img src="https://habrastorage.org/webt/hy/2m/zr/hy2mzrfv8ln9m2jtpk_xbnx4b1q.jpeg"><br><br>  Ahora comencemos con la funcionalidad yicms.  Primero, en el m√≥dulo P√°ginas, crearemos una p√°gina llamada √≠ndice, que ser√° la p√°gina principal del sitio.  Vaya a la Lista de p√°ginas y cree una nueva p√°gina llamada √≠ndice.  De manera predeterminada, se crear√°n los campos t√≠tulo, meta_descripci√≥n y meta_palabras clave para la p√°gina.  Adem√°s, crearemos otro campo a trav√©s del bot√≥n Agregar nuevo campo con el texto del nombre, dejaremos todos sus par√°metros por defecto. <br><br>  Ahora si sigues el enlace <br><br> <code>http://&lt;  &gt;/web/pages/admin</code> <br> <br>  Se abrir√° la secci√≥n de administraci√≥n.  La p√°gina de √≠ndice estar√° disponible para llenar de contenido.  Rellene todos los campos con texto libre. <br><br>  En el momento de crear la secci√≥n de √≠ndice en la secci√≥n de desarrollo de la p√°gina de √≠ndice, la clase Index se cre√≥ en el directorio yicms / Pages / Models en el que tambi√©n se crearon anotaciones para los campos t√≠tulo, meta_description, meta_keywords, as√≠ como para el campo de texto que creamos sobre la marcha.  Un objeto de esta clase que podemos usar para obtener el valor de los campos.  Considere c√≥mo se puede hacer esto.  En el controlador est√°ndar SiteController de la plantilla b√°sica en actionIndex, escriba lo siguiente: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Displays homepage. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \Iliich246\YicmsPages\Base\PagesException */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $indexPage = \app\yicms\Pages\Models\Index::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'index'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'indexPage'</span></span> =&gt; $ indexPage ]); }</code> </pre><br>  Dado que la clase \ app \ yicms \ Pages \ Models \ Index se gener√≥ autom√°ticamente, la finalizaci√≥n autom√°tica para ella funcionar√° en el IDE.  Ahora $ indexPage se puede usar como √≠ndice.  Ahora abra la vista de √≠ndice.  Eliminamos todo lo innecesario de all√≠ y escribimos: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $indexPage \app\yicms\Pages\Models\Index */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;title = $indexPage-&gt;title; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerMetaTag([ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'description'</span></span>, <span class="hljs-string"><span class="hljs-string">'content'</span></span> =&gt; $indexPage-&gt;meta_description ]); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerMetaTag([ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'keywords'</span></span>, <span class="hljs-string"><span class="hljs-string">'content'</span></span> =&gt; $indexPage-&gt;meta_keywords ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jumbotron</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  La anotaci√≥n de la variable $ indexPage es necesaria para la finalizaci√≥n autom√°tica de IDE.  Ahora use el objeto $ indexPage.  Todos los campos que creamos en la secci√≥n de desarrollo para la p√°gina de √≠ndice est√°n disponibles en el objeto de la clase √çndice, que, gracias a la anotaci√≥n autom√°tica, se complementa con el IDE despu√©s de ingresar el operador de flecha. <br><br>  En total, en poco tiempo creamos una p√°gina de √≠ndice para la cual se cre√≥ autom√°ticamente un panel de administraci√≥n para editar su contenido.  Utilizamos la programaci√≥n solo para crear el objeto de p√°gina en el controlador est√°ndar del marco, y en la forma en que pod√≠amos usar r√°pidamente el objeto de p√°gina gracias al autocompletado y una interfaz intuitiva. <br><br>  Examinamos solo la parte m√°s peque√±a de las capacidades de yicms.  Ahora complicaremos un poco la p√°gina principal del sitio usando yicms. <br><br>  yicms admite el multiling√ºismo fuera de la caja.  Para activar el segundo idioma en la secci√≥n de desarrollo del m√≥dulo com√∫n, seleccione la lista de idiomas, luego seleccione el idioma ruso y act√≠velo en √©l: <br><br><img src="https://habrastorage.org/webt/ka/eh/uw/kaehuwkq6y1qeubwmue9obzqtv4.jpeg"><br><br>  Ahora en el panel de administraci√≥n podemos completar los campos para varios idiomas.  Puede crear nuevos idiomas en el sistema.  Sin embargo, ser√° necesario traducir el panel de administraci√≥n utilizando herramientas de marco regulares.  Por lo tanto, al crear un nuevo idioma, debe cumplir con ISO.  Para los controles de contenido, simplemente se agregar√° una nueva placa con un nuevo idioma. <br><br><h4>  Bloques de archivos componentes </h4><br>  A continuaci√≥n, considere el elemento de bloques de archivo.  En el panel de desarrollo de la p√°gina de √≠ndice, cree un bloque de archivo con el documento del nombre del programa.  Otras configuraciones de bloque se dejar√°n por defecto.  Ahora en el panel de administraci√≥n para la p√°gina de √≠ndice, la edici√≥n del archivo del documento est√° disponible.  Descargue un archivo arbitrario.  Ahora el enlace para descargarlo se puede mostrar en la p√°gina de √≠ndice del sitio: <br><br><pre> <code class="php hljs">‚Ä¶ &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Document</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">document</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uploadUrl</span></span></span><span class="hljs-class">() ?&gt;"&gt; &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">document</span></span></span><span class="hljs-class"> ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; ‚Ä¶ &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Ahora, en la p√°gina, el enlace cargar√° el archivo que subimos al panel de administraci√≥n.  De manera predeterminada, el bloque de archivos funciona en modo de archivo √∫nico en todos los idiomas.  Sin embargo, en el panel de desarrollo, puede cambiar el tipo de idioma al tipo traducible y luego, para cada idioma, deber√° cargar su propio archivo.  En este caso, el archivo cuyo idioma est√° actualmente activo en el sitio se descargar√° a trav√©s del enlace.  Por supuesto, puede descargar para un idioma espec√≠fico, que se discutir√° m√°s adelante. <br><br>  El siguiente paso en el panel de desarrollo es crear un bloque de archivo de recetas para el que especificaremos el tipo como tipo m√∫ltiple.  En este modo, puede cargar muchos archivos para un bloque de archivos.  Para hacer esto, en el panel de administraci√≥n, en la pesta√±a de recetas que aparece, cargue varios archivos arbitrarios. <br>  Despu√©s de eso, en forma de √≠ndice, enumeramos los archivos: <br><br><pre> <code class="php hljs">‚Ä¶ &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Recipes</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class"> ($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipes</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uploadUrl</span></span></span><span class="hljs-class">() ?&gt;"&gt; &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class"> ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; ‚Ä¶</span></span></code> </pre><br>  En el modo de tipo m√∫ltiple, se puede omitir un bloque de archivo a trav√©s de foreach o un iterador. <br><br><h4>  Componente de bloque de im√°genes </h4><br>  Ahora considere el elemento de bloque de im√°genes.  Cree un bloque de imagen para la p√°gina de √≠ndice, dejando todas las configuraciones predeterminadas.  De manera similar a los bloques de archivos en el panel de administraci√≥n, se hizo posible cargar una imagen.  Sube una imagen arbitraria.  Ahora en forma de √≠ndice escribimos lo siguiente: <br><br><pre> <code class="php hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Image</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">picture</span></span></span><span class="hljs-class"> ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">=""&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  De manera similar a los archivos de imagen, uno se carga de forma predeterminada en todos los idiomas, sin embargo, para las im√°genes, este comportamiento se puede cambiar en el panel de desarrollo y cargar su imagen para cada idioma.  Tambi√©n puedes subir muchas im√°genes en un bloque. <br><br>  Cree un bloque de galer√≠a de im√°genes en el panel de desarrollo, cuyo tipo se establecer√° como M√∫ltiples im√°genes.  Para las im√°genes, tambi√©n puede colgar campos de texto sobre la marcha.  Por lo tanto, en la ventana modal para configurar el bloque de la galer√≠a, vamos a la secci√≥n "Ver campo de bloque de imagen".  En esta secci√≥n para im√°genes, cree campos con los nombres alt y name.  Ahora en el panel de administraci√≥n para cada imagen, es posible establecer los campos de texto alternativo y de nombre.  Tambi√©n en yicms para im√°genes listas para usar est√° disponible la capacidad de "recortar" y crear miniaturas.  Por ejemplo, cree una plantilla de miniaturas para el bloque de la galer√≠a.  En la ventana modal del bloque de im√°genes, vaya a la secci√≥n "Configuraci√≥n de im√°genes en miniatura".  En √©l crearemos un configurador de miniaturas con el nombre "x2" y los par√°metros divisor = 2 y calidad = 80. Por nombre podremos acceder a la miniatura, el divisor determinar√° cu√°nto reducir el tama√±o de la imagen original, la calidad determina la calidad de compresi√≥n de la miniatura.  Luego, cree otra plantilla de miniaturas con los par√°metros: nombre_programa = "x5", divisor = 5, calidad = 50. Ahora, cuando carguemos la imagen desde el panel de administraci√≥n, se crear√°n autom√°ticamente dos miniaturas con los par√°metros que seleccionamos. <br><br>  Ahora suba algunas im√°genes al panel de administraci√≥n para el grupo de la galer√≠a.  Despu√©s de crear y cargar la imagen, puede completar los campos alt y name, cuyas plantillas creamos en el panel de desarrollo.  Veamos c√≥mo mostrar todo esto en el sitio. <br><br><pre> <code class="php hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gallery</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getImages</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">col</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lg</span></span></span><span class="hljs-class">-4"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class"> ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">width</span></span></span><span class="hljs-class">="100%" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">outputThumbnail</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x2</span></span></span><span class="hljs-class">') ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">outputThumbnail</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x5</span></span></span><span class="hljs-class">') ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">&gt;&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Aqu√≠, el m√©todo getImages () devuelve una matriz de objetos de la aplicaci√≥n de clase anotada autom√°ticamente \ yicms \ Pages \ Models \ Index \ Images \ GalleryImage en la que se crearon anotaciones para los campos alt y name que creamos sobre la marcha y la autocompletaci√≥n IDE est√° disponible para ellos.  Adem√°s, al llamar al m√©todo outputThumbnail (&lt;Nombre de plantilla de miniatura&gt;) en el objeto, cambiamos el objeto al modo de salida de miniatura. <br><br>  Para los bloques de im√°genes, es posible crear no solo campos sino tambi√©n condiciones, que consideraremos un poco m√°s adelante.  Tambi√©n se pueden crear campos y condiciones para bloques de archivos.  Funciona en un principio similar. <br><br><h4>  Condiciones de los componentes </h4><br>  Ahora considere el siguiente elemento.  Estas son las condiciones.  Las condiciones son convenientes para crear en las listas del panel de administraci√≥n, casillas de verificaci√≥n, etc.  Lo que determinar√° cierto comportamiento al trabajar p√°ginas.  Veamos un ejemplo.  Cree una condici√≥n llamada fondo en el panel de desarrollo en la p√°gina de √≠ndice.  Escriba select "seleccione el tipo desplegable".  Despu√©s de crear la condici√≥n, iremos a la secci√≥n "Opciones de configuraci√≥n de la condici√≥n".  Cree tres valores de condici√≥n con los valores transparente, rojo y verde. <br><br>  Despu√©s de eso, aparecer√° una condici√≥n con una lista desplegable con los valores TRANSPARENTE, ROJO y VERDE en el panel de administraci√≥n de la p√°gina de √≠ndice.  Se convierten en may√∫sculas, porque en la clase de anotaci√≥n autom√°tica creada se representan como constantes. <br><br>  Ahora intentemos usar la condici√≥n creada.  Lo usamos de una manera ligeramente diferente para mostrar otras posibilidades.  Dado que la p√°gina de √≠ndice es la p√°gina principal del sitio, ser√° sem√°nticamente verdadero cambiar el color de fondo del sitio desde su configuraci√≥n.  Por lo tanto, nuestra condici√≥n ser√° cambiar el color de fondo en todo el sitio, por lo que lo insertaremos en el dise√±o del controlador.  Abra el archivo de plantilla de dise√±o del marco b√°sico Yii2 y cree un objeto Index: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this \yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $content string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Alert</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">helpers</span></span>\<span class="hljs-title"><span class="hljs-title">Html</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap</span></span>\<span class="hljs-title"><span class="hljs-title">Nav</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap</span></span>\<span class="hljs-title"><span class="hljs-title">NavBar</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Breadcrumbs</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">assets</span></span>\<span class="hljs-title"><span class="hljs-title">AppAsset</span></span>; AppAsset::register(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); $pagesIndex = \app\yicms\Pages\Models\Index::getInstance(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;!DOCTYPE html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;language ?&gt;"</span></span>&gt; &lt;head&gt; &lt;meta charset=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;charset ?&gt;"</span></span>&gt; &lt;meta http-equiv=<span class="hljs-string"><span class="hljs-string">"X-UA-Compatible"</span></span> content=<span class="hljs-string"><span class="hljs-string">"IE=edge"</span></span>&gt; &lt;meta name=<span class="hljs-string"><span class="hljs-string">"viewport"</span></span> content=<span class="hljs-string"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span>&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerCsrfMetaTags() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;title&gt;<span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= Html::encode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;title) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/title&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;head() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/head&gt; &lt;body&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> ‚Ä¶</code> </pre><br>  Dado que el objeto de la clase Index es algo as√≠ como un singleton, podemos llamar al m√©todo est√°tico getInstance () todo lo que queramos sin el riesgo de realizar consultas duplicadas adicionales de la base de datos y otros gastos generales al crearlo.  Ahora, usando el objeto $ pagesIndex, cambiaremos la etiqueta agreg√°ndole un estilo en l√≠nea: <br><br><pre> <code class="php hljs">&lt;body style=<span class="hljs-string"><span class="hljs-string">"background-color: &lt;?php if ($pagesIndex-&gt;background-&gt;value() == \app\yicms\Pages\Models\Index\Conditions\Background::TRANSPARENT):?&gt; transparent; &lt;?php elseif ($pagesIndex-&gt;background-&gt;value() == \app\yicms\Pages\Models\Index\Conditions\Background::RED):?&gt; #FFD3D3 &lt;?php else: ?&gt; #BBFFC8 &lt;?php endif; ?&gt; "</span></span>&gt;</code> </pre><br>  Al llamar a $ pagesIndex-&gt; ‚Äã‚Äãbackground-&gt; value () y comparar con la constante que se cre√≥ en la clase anotada autom√°ticamente \ app \ yicms \ Pages \ Models \ Index \ Condiciones \ Background, seleccionamos el color de fondo del sitio. <br><br>  A continuaci√≥n, considere las capacidades de las clases con anotaciones autom√°ticas.  Mientras se ejecuta yicms, suceden muchos eventos que pueden ser manejados por el marco de Yii.  Damos un ejemplo. <br><br><pre> <code class="php hljs">app\yicms\Pages\Models\Index\Fields\Text</code> </pre> <br>  Este archivo fue creado por un anotador autom√°tico cuando creamos el campo de texto para la p√°gina de √≠ndice en el panel de desarrollo.  Cuando escribimos &lt;? = $ IndexPage-&gt; text?&gt; En la plantilla, se crea algo similar al singleton de esta clase en particular, que en la plantilla se convierte en una cadena usando la magia __toString (). <br><br>  Para cambiar el contenido, nos suscribimos al evento y lo procesamos a trav√©s de la funci√≥n de devoluci√≥n de llamada: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Text</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Field</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_BEFORE_OUTPUT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $event \Iliich246\YicmsCommon\Base\HookEvent */</span></span> }); } }</code> </pre><br>  El evento EVENT_BEFORE_OUTPUT ocurre antes de que se muestren los contenidos del campo.  Intentemos cambiarlo.  Para hacer esto, usamos el objeto de evento \ Iliich246 \ YicmsCommon \ Base \ HookEvent: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_BEFORE_OUTPUT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $event \Iliich246\YicmsCommon\Base\HookEvent */</span></span> $value = $event-&gt;getHook(); $value = strrev($value); $event-&gt;setHook($value); });</code> </pre><br>  El evento HookEvent obtiene el valor del campo antes de que se active el evento.  En el caso, puede obtener este valor a trav√©s de $ event-&gt; getHook (), cambiarlo y enviarlo de vuelta al objeto a trav√©s del evento usando $ event-&gt; setHook ($ value).  Por lo tanto, en el caso, giramos el texto que el campo Texto muestra al rev√©s. <br><br>  Casi todas las clases de alquiler autom√°tico tienen una serie de eventos que pueden conectarse de manera similar, pero su consideraci√≥n est√° m√°s all√° del alcance del art√≠culo de investigaci√≥n. <br><br>  En total, en este art√≠culo, examinamos dos m√≥dulos yicms, a saber, los m√≥dulos Common y Pages.  El m√≥dulo com√∫n incluye componentes como campos, bloques de archivos, bloques de im√°genes y condiciones.  El m√≥dulo P√°ginas es responsable de crear objetos de p√°gina que contengan todos los elementos del m√≥dulo Com√∫n.  Es decir  Todos los m√≥dulos yicms dependen del m√≥dulo com√∫n principal. <br><br><h3>  M√≥dulo Yii2-yicms-esencias </h3><br>  Ahora vamos a familiarizarnos con el m√≥dulo Essences.  Este m√≥dulo est√° dise√±ado para crear entidades del tipo categor√≠a-&gt; entidad, por ejemplo, la categor√≠a de bienes-&gt; bienes, tipo de veh√≠culo (autom√≥viles, motocicletas) -&gt; veh√≠culo espec√≠fico, etc.  Dentro del m√≥dulo, estos elementos se denominan categor√≠as y representaciones. <br><br>  Como ejemplo, mostramos la creaci√≥n de un cat√°logo simple de la categor√≠a-&gt; tipo de producto para una tienda en l√≠nea. <br><br>  En la secci√≥n de Desarrollo del m√≥dulo de Esencias, ve a la lista de esencias y all√≠ vamos a la secci√≥n de crear nueva esencia.  Le damos los productos con el nombre del programa y dejamos el resto de la configuraci√≥n de forma predeterminada.  Por defecto, se crea una entidad con comportamiento: una vista puede pertenecer a una categor√≠a.  Sin embargo, puede especificar otros comportamientos: solo crear vistas sin categor√≠as, o una vista puede pertenecer a varias categor√≠as. <br><br>  Las categor√≠as en s√≠ mismas se basan en un principio similar a un √°rbol, cuando cualquier categor√≠a tiene un elemento primario (excepto el superior).  Es decir  Las categor√≠as son hojas de una estructura de datos de tipo √°rbol. <br><br>  Total de productos de entidad creados.  Para ella, se crearon clases con anotaciones autom√°ticas en el directorio app \ yicms \ Essences \ Models.  A continuaci√≥n, en el panel de desarrollo, necesitamos crear plantillas de clase y plantillas de presentaci√≥n.  Todo esto es similar a la forma en que los creamos para la p√°gina de √≠ndice.  Los elementos Campos, Bloques de archivos, Bloques de im√°genes y Condiciones est√°n disponibles para ellos en el modo de creaci√≥n sobre la marcha.  Una vez que hayamos terminado de crear plantillas en el panel de administraci√≥n, estar√° disponible para crear categor√≠as y vistas con los elementos de plantilla que configuramos en el panel de desarrollo. <br><br>  Entonces, crearemos varias categor√≠as de productos.  Y para cada categor√≠a de productos hay varios productos.  Una vez hecho esto, todo se puede mostrar en el sitio principal.  Considera c√≥mo se hace esto.  En SiteController, cree una acci√≥n actionProcuts: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionProducts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $productsEssence = Products::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'products'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'productsEssence'</span></span> =&gt; $productsEssence ]); }</code> </pre><br>  Crear una vista de productos para ello <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $productsEssence \app\yicms\Essences\Models\Products */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">productsEssence</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">categories</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;: &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">represents</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt;: &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Gracias al mecanismo de anotaci√≥n autom√°tica, el m√©todo $ productsEssence-&gt; categories devuelve una matriz de objetos de la aplicaci√≥n de clase anotada autom√°ticamente \ yicms \ Essences \ Models \ ProductsCategory.  Al igual que en las clases anteriores con anotaciones autom√°ticas en esta clase, hay anotaciones en los campos que creamos sobre la marcha, el IDE podr√° usar la finalizaci√≥n autom√°tica.  Tambi√©n vale la pena se√±alar que las clases con anotaci√≥n autom√°tica se desarrollaron con la idea de que el usuario yicms podr√° colocar su propia l√≥gica de negocios en ellas, es decir.  puede escribir su propio c√≥digo en ellos, y el mecanismo de anotaci√≥n autom√°tica cambia las √°reas especialmente marcadas y ning√∫n c√≥digo de usuario se ver√° afectado. <br><br>  El m√©todo $ category-&gt; represent tambi√©n devuelve una matriz de aplicaciones \ yicms \ Essences \ Models \ ProductsRepresents objetos que tienen las mismas ventajas de anotaci√≥n autom√°tica que para las categor√≠as.  Por supuesto, hay m√©todos m√°s flexibles para obtener ideas.  Por ejemplo, $ category-&gt; getRepresentsQuery () devolver√° un objeto ActiveQuery del marco Yii2, que puede personalizarse a√∫n m√°s para refinar la consulta de la base de datos, utilizada para crear paginaci√≥n o carga diferida. <br><br>  En total, el m√≥dulo Essenses le permite crear r√°pidamente un esqueleto de la funcionalidad de la tienda, con el panel de administraci√≥n ya funcionando.  Se puede escribir l√≥gica empresarial adicional en clases con anotaciones autom√°ticas. <br><br><h3>  M√≥dulo de retroalimentaci√≥n Yii2-yicms </h3><br>  Este m√≥dulo est√° dise√±ado para que los visitantes y usuarios del sitio creen formularios de entrada de informaci√≥n en el sitio.  La ideolog√≠a del trabajo sigue siendo la misma, primero en el panel de desarrollo escribimos los campos requeridos para el formulario. <br><br>  Considere la operaci√≥n del m√≥dulo por ejemplo.  Cree un registro con los mensajes de nombre del programa en el panel de desarrollo en el m√≥dulo de comentarios.  En la p√°gina de configuraci√≥n de mensajes, podemos ver el bot√≥n de plantillas de p√°ginas de Comentarios.  Usando este enlace, podemos crear elementos del campo de tipo, bloque de archivos, bloque de im√°genes, condiciones que pueden usarse para formatear el contenido de la p√°gina de mensajes.  No son diferentes de los que consideramos para el m√≥dulo P√°ginas.  Ahora estamos m√°s interesados ‚Äã‚Äãen la secci√≥n Plantillas de entrada de comentarios.  En esta secci√≥n, podemos crear entidades como campos de entrada, archivos de entrada, im√°genes de entrada y condiciones de entrada.  Estas entidades son justo lo que necesita para crear formularios de entrada personalizados. <br><br>  Cree dos campos de entrada con los nombres nombre y apellido.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagen de entrada llamada foto. </font><font style="vertical-align: inherit;">Condici√≥n de entrada denominada acuerdo. </font><font style="vertical-align: inherit;">Por ahora, dejemos todas las configuraciones para estas entidades como predeterminadas. </font><font style="vertical-align: inherit;">M√°s adelante en este ejemplo, configuraremos validadores que tambi√©n est√°n colgados en estas entidades sobre la marcha (los validadores tambi√©n est√°n disponibles para entidades del m√≥dulo com√∫n y funcionan de acuerdo con la misma l√≥gica que para el m√≥dulo de comentarios. Lo discutiremos un poco m√°s adelante). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora aplique el m√≥dulo en nuestro sitio web. </font><font style="vertical-align: inherit;">Primero, cree una nueva acci√≥n en SiteController:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $messages = \app\yicms\Feedback\Models\Messages::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'messages'</span></span> =&gt; $messages ]); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A continuaci√≥n, cree una vista de mensaje y escriba lo siguiente en ella: </font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $message \app\yicms\Feedback\Models\Messages */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $form = \yii\bootstrap\ActiveForm::begin([ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'some-form'</span></span>, <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data-pjax'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ], ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">col</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">-12"&gt; &lt;?= \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">helpers</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Html</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">submitButton</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Save</span></span></span><span class="hljs-class">', ['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">' =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">success</span></span></span><span class="hljs-class">']) ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bootstrap</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveForm</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class">(); ?&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para crear el formulario, utilizaremos las herramientas est√°ndar del marco. </font><font style="vertical-align: inherit;">Para aprovechar el m√≥dulo de comentarios, escribiremos lo siguiente:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_name-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_name, $messages-&gt;input_name-&gt;key) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_surname-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_surname, $messages-&gt;input_surname-&gt;key) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_photo-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_photo, $messages-&gt;input_photo-&gt;key) -&gt;fileInput() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_agreement-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_agreement, $messages-&gt;input_agreement-&gt;key)-&gt;checkbox() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para las entidades de tipo input, debe usar el prefijo input_; de lo contrario, las anotaciones autom√°ticas funcionan para ellos de la misma manera que para el resto de las cosas en yicms. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al principio hay una comprobaci√≥n de actividad de campo, si el campo est√° inactivo, entonces no debe procesarse, e incluso si se procesa, los datos que se completaron no se cargar√°n en el servidor. La actividad de campo se puede activar / desactivar en el panel de desarrollo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luego est√° la forma est√°ndar del marco donde necesitas escribir as√≠</font></font><br><br><pre> <code class="php hljs">$form-&gt;field($messages-&gt;input_name, $messages-&gt;input_name-&gt;key)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ messages-&gt; input_name devolver√° un objeto de clase app \ yicms \ Feedback \ Models \ Message \ InputFields \ Name que es el descendiente del marco del Modelo Yii2 y puede usarse en formularios, $ messages-&gt; input_name-&gt; key devolver√° el valor de clave correcto, en orden para que se pueda cargar el formulario. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora, cuando vamos a la p√°gina con el formulario, se representan todos sus campos, pero la carga al servidor a√∫n no funciona. Es muy facil de hacer. Trat√© de hacer que la interfaz de trabajo de retroalimentaci√≥n sea lo m√°s similar posible a la interfaz de trabajo modelo en el marco. S√≠, tuve que "sacrificar" una peque√±a arquitectura, pero en su conjunto result√≥ as√≠:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $messages = \app\yicms\Feedback\Models\Messages::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $messages-&gt;validate()) { $messages-&gt;handle(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'messages'</span></span> =&gt; $messages ]); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora el formulario se cargar√°, validar√° y guardar√° en el servidor. </font><font style="vertical-align: inherit;">En la secci√≥n de administraci√≥n, podemos ver la informaci√≥n que se ha ingresado en el formulario. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por supuesto, puede usar una clase anotada autom√°ticamente:</font></font><br><br> <code>\app\yicms\Feedback\Models\Messages</code> <br> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Messages</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Feedback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> self instance . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::getByName(<span class="hljs-string"><span class="hljs-string">'messages'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_AFTER_HANDLE, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ Yii::$app-&gt;mailer-&gt;compose(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span> ]) -&gt;setFrom(<span class="hljs-string"><span class="hljs-string">'from@domain.com'</span></span>) -&gt;setTo(<span class="hljs-string"><span class="hljs-string">'to@domain.com'</span></span>) -&gt;setSubject(<span class="hljs-string"><span class="hljs-string">'Message subject'</span></span>) -&gt;send(); }); } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este ejemplo, nos registramos para el evento EVENT_AFTER_HANDLE. </font><font style="vertical-align: inherit;">El evento ocurre despu√©s de que los datos del formulario se hayan guardado en el servidor. </font><font style="vertical-align: inherit;">En este caso, enviamos una carta a la plantilla en la que podemos insertar los datos del formulario guardado:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this \yii\web\View view component instance */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $message \app\yicms\Feedback\Models\Message */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;h1&gt;Mail on message&lt;/h1&gt; &lt;h1&gt;Name: <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $message-&gt;input_name-&gt;value <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/h1&gt; &lt;h2&gt;Surname: <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $message-&gt;input_surname-&gt;value <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/h2&gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ message-&gt; input_name-&gt; value simplemente devuelve los datos actuales que estaban almacenados en la base de datos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora veamos c√≥mo funcionan los validadores. En el panel de desarrollo en la entidad del campo de entrada con el nombre, agregue el validador requerido. Este es el validador est√°ndar yii \ validators \ RequiredValidator. Cuando lo agregamos, a√∫n no est√° activo, porque el bot√≥n con su nombre es blanco. Para activarlo, debe hacer clic en este bot√≥n, se abrir√° la ventana de configuraci√≥n del validador. All√≠ debe instalar la casilla de verificaci√≥n y activarla. Al mismo tiempo, puede configurar todos los dem√°s par√°metros del validador, como mensajes de error en todos los idiomas del sistema, etc. Despu√©s de guardar, el icono del validador se vuelve verde, lo que significa que se ha activado y se aplicar√° al validar los formularios.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En input_condition con el acuerdo de nombre, colgamos el validador de comparaci√≥n. </font><font style="vertical-align: inherit;">Y config√∫relo para comparar con 1, escriba el n√∫mero y el operador ==. </font><font style="vertical-align: inherit;">Adem√°s, puede escribir un mensaje en los campos de texto de error, como "Debe aceptar los t√©rminos de la oferta". </font><font style="vertical-align: inherit;">Ahora en el formulario, la validaci√≥n tendr√° lugar solo cuando la casilla de verificaci√≥n del acuerdo est√© seleccionada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En total, en este art√≠culo examinamos las principales caracter√≠sticas del sistema yicms.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454914/">https://habr.com/ru/post/454914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454896/index.html">¬øPor qu√© cambi√© freelance a un equipo remoto?</a></li>
<li><a href="../454898/index.html">Programar es m√°s que codificar</a></li>
<li><a href="../454900/index.html">C√≥mo hacer que los formularios web en el sitio sean convenientes y seguros: herramientas de desarrollo y constructores</a></li>
<li><a href="../454904/index.html">Samsung lanza curso gratuito en l√≠nea de red neuronal de visi√≥n por computadora</a></li>
<li><a href="../454912/index.html">La fortaleza enana Tarn Adams habla sobre el desarrollo del juego</a></li>
<li><a href="../454916/index.html">Arquitectura de red neuronal para implementar el algoritmo RL con la capacidad de establecer acciones simult√°neas</a></li>
<li><a href="../454918/index.html">C√≥mo combinar los respaldos de dos minoristas en SAP en 12 horas</a></li>
<li><a href="../454920/index.html">Rendimiento de front-end: an√°lisis de m√©tricas importantes</a></li>
<li><a href="../454922/index.html">Historias sobre clientes extranjeros y sus caracter√≠sticas de trabajo en Rusia despu√©s de la Ley de DP</a></li>
<li><a href="../454924/index.html">Configuraci√≥n de autenticaci√≥n en Veeam Backup para Microsoft Office 365 v3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>