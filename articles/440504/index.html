<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚ÄçüöÄ üò∂ üë®üèº‚Äçüíº Docker y Kubernetes en entornos exigentes de seguridad üßó üëÇüèº üé¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : El art√≠culo original fue escrito por un ingeniero de Suecia, Christian Abdelmassih, aficionado a la arquitectura de nivel empresarial, l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker y Kubernetes en entornos exigentes de seguridad</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/440504/"> <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: El art√≠culo original fue escrito por un ingeniero de Suecia, Christian Abdelmassih, aficionado a la arquitectura de nivel empresarial, la seguridad de TI y la computaci√≥n en la nube.</i>  <i>Recientemente, recibi√≥ una maestr√≠a en Ciencias de la Computaci√≥n y tiene prisa por compartir su trabajo: una tesis de maestr√≠a, o m√°s bien, parte de ella, dedicada a los problemas de aislar una aplicaci√≥n en contenedores [y lanzada en Kubernetes].</i>  <i>Como el "cliente" para quien se prepar√≥ este trabajo de investigaci√≥n, act√∫a no menos que la polic√≠a de su tierra natal.</i> <br><br><img src="https://habrastorage.org/webt/_8/ys/gr/_8ysgrs-atvkocc6r8jpzyzzu1g.jpeg"><br><br>  La orquestaci√≥n de contenedores y la inform√°tica nativa de la nube se han vuelto muy populares en los √∫ltimos a√±os.  Su adaptaci√≥n ha alcanzado un nivel tal que incluso las empresas financieras, los bancos y el sector p√∫blico muestran inter√©s en ellos.  En comparaci√≥n con otras empresas, se distinguen por sus amplios requisitos en el campo de la seguridad de la informaci√≥n y la TI. <a name="habracut"></a><br><br>  Uno de los aspectos importantes es c√≥mo se pueden usar los contenedores en entornos de producci√≥n y, al mismo tiempo, se puede mantener la separaci√≥n del sistema entre las aplicaciones.  Dado que tales organizaciones usan entornos de nube privada basados ‚Äã‚Äãen la virtualizaci√≥n sobre metal desnudo, la p√©rdida de dicho aislamiento al migrar a un entorno con contenedores orquestados es inaceptable.  Dadas estas limitaciones, mi disertaci√≥n fue escrita, y la polic√≠a sueca es considerada como un cliente objetivo. <br><br>  El tema espec√≠fico del estudio considerado en la tesis es: <br><br><blockquote>  ¬øC√≥mo se admite la demarcaci√≥n de aplicaciones en Docker y Kubernetes en comparaci√≥n con las m√°quinas virtuales que se ejecutan sobre el hipervisor ESXi que se ejecuta en metal desnudo? </blockquote><br>  Este problema requiere un estudio cuidadoso.  Para comenzar con algo, mire el denominador com√∫n: aplicaciones. <br><br><h2>  Las aplicaciones web son confusas </h2><br>  Vulnerabilidades en aplicaciones web: un verdadero zool√≥gico de vectores de ataque.  Los riesgos m√°s significativos se presentan en OWASP Top 10 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2013</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2017</a> ).  Estos recursos ayudan a educar a los desarrolladores para reducir los riesgos t√≠picos.  Sin embargo, incluso si los desarrolladores escribieron c√≥digo perfecto, la aplicaci√≥n a√∫n puede ser vulnerable, por ejemplo, a trav√©s de dependencias de paquetes. <br><br>  David Gilbertson escribi√≥ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gran historia</a> sobre c√≥mo puede inyectar c√≥digo a trav√©s de un paquete malicioso distribuido, por ejemplo, como parte de NPM para aplicaciones basadas en Node.js.  Para detectar vulnerabilidades, puede usar esc√°neres de dependencia, pero solo <i>reducen el</i> riesgo, pero no lo eliminan por completo. <br><br>  Incluso si crea aplicaciones sin dependencias de terceros, sigue siendo poco realista creer que la aplicaci√≥n nunca ser√° vulnerable. <br><br>  <b>Debido a estos riesgos, no podemos decir que las aplicaciones web sean seguras.</b> <br><br>  En cambio, mant√©n una estrategia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>defensa en profundidad</b></a> (DID).  Echemos un vistazo al siguiente nivel: contenedores y m√°quinas virtuales. <br><br><h2>  Contenedores versus m√°quinas virtuales: una historia de aislamiento </h2><br>  Un contenedor es un entorno de espacio de usuario aislado que a menudo se implementa utilizando las capacidades del kernel.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Docker</a> usa los espacios de nombres de Linux, cgroups y capacidades para esto.  En este sentido, el aislamiento de los contenedores Docker es <b>muy diferente</b> de las m√°quinas virtuales lanzadas por hipervisores tipo 1 <i>(es decir, que trabajan directamente en hardware; hipervisores de metal desnudo)</i> . <br><br>  La diferenciaci√≥n para tales m√°quinas virtuales se puede implementar a un nivel tan bajo como en el hardware real, por ejemplo, a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Intel VT</a> .  Los contenedores Docker, a su vez, dependen del kernel de Linux para la demarcaci√≥n.  Es muy importante tener en cuenta esta diferencia cuando se trata de <i>ataques de capa por debajo</i> . <br><br>  Si un atacante puede ejecutar c√≥digo en una m√°quina virtual o contenedor, puede llegar potencialmente a un nivel inferior realizando un <i>ataque de escape</i> . <br><br><img src="https://habrastorage.org/webt/36/hl/_c/36hl_cjove9e7ufmr4g7f3vcq5q.png"><br>  <i>dependiendo de si se utilizan contenedores o m√°quinas virtuales en el hardware, la diferenciaci√≥n se implementa en diferentes niveles de infraestructura.</i> <br><br>  La posibilidad de tales ataques se prob√≥ para el hipervisor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VMware ESXi</a> durante el concurso de piratas inform√°ticos Pwn2Own 2017, as√≠ como para GeekPwn2018.  El resultado fue un par de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2017‚Äì4902</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2018‚Äì6981</a> ) que se pueden usar en ataques de capa inferior para <b>salir de m√°quinas</b> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">virtuales</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escape de m√°quina virtual</a> )</i> .  Las m√°quinas virtuales en servidores de hierro no garantizan una seguridad absoluta, a pesar de que utilizan tecnolog√≠a para diferenciar el nivel de hierro. <br><br>  Por otro lado, si miramos los vectores de ataque en un hipervisor de metal desnudo versus el kernel de Linux, es obvio que este √∫ltimo tiene una superficie de ataque mucho mayor, debido a su tama√±o [kernel de Linux] y su rango de capacidades.  Una superficie de ataque m√°s grande implica m√°s vectores de ataque potenciales para entornos de nube que usan aislamiento de contenedor.  Esto se manifiesta en la creciente atenci√≥n a los <i>ataques de escape de contenedores</i> , que fueron posibles gracias a las vulnerabilidades del kernel (por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2016‚Äì5195</a> <i>[es decir, Dirty COW - aprox. Transl.]</i> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2017‚Äì1000405</a> ) <br><br>  Se pueden utilizar m√≥dulos como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SELinux</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AppArmor</a> para aumentar el aislamiento <b>dentro del</b> contenedor.  Desafortunadamente, tales mecanismos de seguridad en el n√∫cleo no evitan los ataques de escape en el n√∫cleo mismo.  Solo limitar√°n las posibles acciones del atacante si <i>no</i> es <i>posible</i> ir m√°s all√° de los l√≠mites.  Si queremos lidiar con las salidas fuera del contenedor, <b>se</b> necesita un mecanismo de aislamiento <b>fuera del</b> contenedor o incluso el n√∫cleo.  Por ejemplo, un sandbox <i>(sandbox)</i> ! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gVisor</a> es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">espacio aislado</a> para el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tiempo de ejecuci√≥n</a> del contenedor, cuyo c√≥digo fue abierto por Google y que agrega un n√∫cleo adicional entre el contenedor y el n√∫cleo del sistema operativo.  Este tipo de sandbox puede mejorar la situaci√≥n con los ataques de contenedores fuera del l√≠mite que tienen lugar <i>a nivel del n√∫cleo</i> .  Sin embargo, los exploits principales son solo una de las herramientas del atacante. <br><br>  Para ver c√≥mo otros ataques pueden conducir a resultados similares, debe mirar una imagen m√°s general de c√≥mo se usan los contenedores en la era nativa de la nube. <br><br><h2>  El efecto de la orquestaci√≥n de contenedores en el aislamiento. </h2><br>  Para gestionar contenedores que se ejecutan en entornos con muchos nodos, introducen la orquestaci√≥n, en la que Kubernetes le da el papel principal.  Como resultado, los errores del orquestador tambi√©n pueden afectar el aislamiento del contenedor. <br><br>  Tim Allclair <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hizo</a> una presentaci√≥n maravillosa en KubeCon 2018, en la que observ√≥ algunas superficies de ataque.  En su informe, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">menciona</a> un ejemplo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2017-1002101</a> ), c√≥mo los errores de orquestaci√≥n pueden afectar el aislamiento, en este caso, a trav√©s de la capacidad de montar espacio en disco fuera del pod.  Las vulnerabilidades de este tipo son muy problem√°ticas porque  puede evitar la caja de arena en la que est√° envuelto el contenedor. <br><br>  Al presentar Kubernetes, hemos expandido la superficie de ataque.  Incluye sistemas alojados en el maestro Kubernetes.  Uno de ellos es el servidor API de Kubernetes, donde recientemente descubrieron una vulnerabilidad que podr√≠a permitir privilegios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">excesivos</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2018‚Äì1002105</a> ).  Dado que la superficie de ataque del maestro Kubernetes est√° m√°s all√° del alcance de mi disertaci√≥n, esta vulnerabilidad particular no se tiene en cuenta. <br><br>  ¬øPor qu√© son tan importantes los ataques de escape?  Los contenedores proporcionan la capacidad de ejecutar muchas aplicaciones cohospedadas dentro del mismo sistema operativo.  Por lo tanto, exist√≠a un riesgo asociado con el aislamiento de la aplicaci√≥n.  Si una aplicaci√≥n cr√≠tica para el negocio y otra aplicaci√≥n vulnerable se ejecutan en el mismo host, un atacante podr√≠a obtener acceso a una aplicaci√≥n cr√≠tica a trav√©s de un ataque a una aplicaci√≥n vulnerable. <br><br>  Dependiendo del tipo de datos con los que trabaje la organizaci√≥n, su filtraci√≥n puede da√±ar no solo a la organizaci√≥n en s√≠, sino tambi√©n a las personas y a todo el pa√≠s.  Como recordar√°n, estamos hablando del sector p√∫blico, las finanzas, los bancos ... una fuga puede afectar seriamente la vida de las personas. <br><br>  Entonces, ¬øse puede usar la orquestaci√≥n de contenedores en tales entornos?  Antes de embarcarse en una mayor reflexi√≥n, se debe realizar una evaluaci√≥n de riesgos. <br><br><h2>  ¬øQu√© riesgo es aceptable? </h2><br>  Antes de introducir medidas de seguridad, es importante pensar qu√© tipo de informaci√≥n la organizaci√≥n realmente est√° tratando de proteger.  La decisi√≥n sobre si se necesitan m√°s pasos para evitar posibles ataques de escape en los contenedores depende de los datos con los que la organizaci√≥n est√° trabajando y de los servicios que proporciona. <br><br>  A largo plazo, esto significa que para lograr la posibilidad de salir del contenedor en un host <i>configurado correctamente</i> protegido por el sandbox para el contenedor, el atacante debe: <br><br><ol><li>  ejecutar c√≥digo en un contenedor, por ejemplo, mediante inyecci√≥n de c√≥digo o utilizando vulnerabilidades en el c√≥digo de la aplicaci√≥n; </li><li>  aproveche otra vulnerabilidad, d√≠a cero, o para la cual a√∫n no se ha aplicado un parche para salir del contenedor a <i>pesar de que hay un entorno limitado</i> . </li></ol><br>  Como puede suponer, una organizaci√≥n que no considera que tal escenario sea aceptable deber√≠a trabajar con datos u ofrecer servicios que sean muy exigentes en cuanto a <b>confidencialidad</b> , <b>integridad</b> y / o <b>accesibilidad</b> . <br><br>  Dado que la disertaci√≥n est√° dedicada solo a dichos clientes, la p√©rdida del aislamiento del sistema al salir del contenedor no est√° permitida, ya que  Sus consecuencias son demasiado significativas.  ¬øQu√© pasos se pueden tomar para mejorar el aislamiento?  Para subir un nivel en la escalera de aislamiento, tambi√©n debe mirar los sandboxes en los que est√° envuelto el n√∫cleo del sistema operativo, es decir  m√°quinas virtuales! <br><br>  Las tecnolog√≠as de virtualizaci√≥n que utilizan hipervisores alojados mejorar√°n la situaci√≥n, pero queremos limitar <i>a√∫n m√°s la</i> superficie de ataque.  Por lo tanto, examinemos los hipervisores instalados en hierro y veamos a qu√© nos llevar√°n. <br><br><h2>  Hipervisores en hierro </h2><br>  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudio realizado por la</a> Agencia Sueca de Investigaci√≥n de Defensa Sueca examin√≥ los riesgos de virtualizaci√≥n en relaci√≥n con las Fuerzas Armadas suecas.  Su conclusi√≥n habl√≥ de los beneficios de estas tecnolog√≠as para los militares, incluso con los estrictos requisitos de seguridad y los riesgos que conlleva la virtualizaci√≥n. <br><br>  En este sentido, podemos decir que la virtualizaci√≥n se utiliza (hasta cierto punto) en la industria de la defensa, ya que conlleva <b>riesgos aceptables</b> .  Dado que las agencias y empresas en la industria de defensa son uno de los clientes m√°s exigentes para la seguridad de TI, tambi√©n podemos argumentar que el riesgo aceptable para ellos significa que es aceptable para los clientes considerados en la disertaci√≥n.  Y todo esto, a pesar de las posibles salidas m√°s all√° de la m√°quina virtual, discutido anteriormente. <br><br>  Si decidimos utilizar este tipo de sandbox para contenedores, hay algunas cosas a tener en cuenta en el contexto de los detalles nativos de la nube. <br><br><h2>  Sandbox nodos para m√°quinas virtuales </h2><br>  La idea es que los nodos del cl√∫ster de Kubernetes son m√°quinas virtuales que utilizan la virtualizaci√≥n de hardware.  Dado que las m√°quinas virtuales desempe√±ar√°n el papel de sandboxes para contenedores que se ejecutan en pods, cada nodo puede considerarse como un entorno protegido de sandbox. <br><br>  Una nota importante sobre estos sandboxes en el contexto de los sandboxes de contenedores ya mencionados: este enfoque le permite colocar muchos contenedores en un sandbox.  Esta flexibilidad le permite reducir los gastos generales en comparaci√≥n con el caso en que cada contenedor tiene su propia caja de arena.  Como cada sandbox trae su propio sistema operativo, queremos reducir su n√∫mero mientras mantenemos el aislamiento. <br><br><img src="https://habrastorage.org/webt/wg/2t/jr/wg2tjra8xh9y_i7vlyygm7vulzy.png"><br>  <i>Las m√°quinas virtuales instaladas en el hardware (nodos del cl√∫ster) act√∫an como cajas de arena para contenedores.</i>  <i>Los contenedores que se ejecutan en diferentes m√°quinas virtuales est√°n delimitados con un nivel de riesgo aceptable.</i>  <i>Sin embargo, esto no se aplica a los contenedores que se ejecutan en la misma m√°quina virtual.</i> <br><br>  Sin embargo, dado que Kubernetes es capaz de cambiar la ubicaci√≥n de las c√°psulas por varias razones, lo que puede <b>arruinar la idea de que se usen cajas de arena</b> , ser√° necesario agregar restricciones al mecanismo para la colocaci√≥n conjunta de las c√°psulas.  Puede lograr lo deseado de muchas maneras. <br><br>  Al momento de escribir, Kubernetes (v1.13) admite tres m√©todos principales para controlar la planificaci√≥n y / o lanzamiento de pods: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NodeSelector</a> &amp; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NodeAffinity</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manchas y tolerancias</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PodAffinity y PodAntiAffinity</a> . </li></ul><br>  El (los) m√©todo (s) a utilizar depende de la aplicaci√≥n de la organizaci√≥n.  Sin embargo, es importante tener en cuenta que los m√©todos difieren en su capacidad para descartar pods despu√©s de que entran en la etapa de ejecuci√≥n.  Ahora solo las manchas son capaces de esto, a trav√©s de la acci√≥n <code>NoExecute</code> .  Si no procesa este momento de ninguna manera y algunas etiquetas cambian, entonces todo puede conducir a una ubicaci√≥n conjunta no deseada. <br><br><h2>  Cumplimiento de los requisitos de uso compartido </h2><br>  La disertaci√≥n propone la idea de utilizar un sistema de clasificaci√≥n que muestre c√≥mo se refleja la sensibilidad en la ubicaci√≥n conjunta.  La idea es utilizar la relaci√≥n 1: 1 entre el contenedor y la c√°psula y determinar la ubicaci√≥n conjunta de las c√°psulas en funci√≥n de la clasificaci√≥n de las aplicaciones en contenedores. <br><br>  Para simplificar y reutilizar, se utiliza el siguiente sistema de clasificaci√≥n de 3 pasos: <br><br><ul><li>  <b>Clase O</b> : la aplicaci√≥n no es sensible y no tiene requisitos de aislamiento.  Se puede colocar en cualquier nodo que no pertenezca a otras clases. </li><li>  <b>Clase PG</b> <i>(grupo privado)</i> : una aplicaci√≥n, junto con un conjunto de otras aplicaciones, forma un grupo privado para el que se requiere un nodo dedicado.  Una aplicaci√≥n solo puede alojarse en nodos de clase PG que tengan el identificador de grupo privado correspondiente. </li><li>  <b>Clase P</b> <i>(privado)</i> : una aplicaci√≥n requiere un nodo privado y separado y solo se puede colocar en nodos vac√≠os de su clase (P). </li></ul><br>  Para cumplir con los requisitos de ubicaci√≥n conjunta para muchas aplicaciones clasificadas, se utilizan contaminaciones y tolerancias, con las cuales se asigna una clase a cada nodo, y PodAffinity para aplicar restricciones adicionales para las c√°psulas con aplicaciones de clase P o PG. <br><br>  Este ejemplo simplificado muestra c√≥mo las contaminaciones y las tolerancias se pueden usar para implementar el control de ubicaci√≥n conjunta: <br><br><img src="https://habrastorage.org/webt/ul/qj/ec/ulqjecbgz60kuw7upls5jyrxpik.gif"><br><br>  <i>Los pods 2 y 3 contienen aplicaciones de un grupo privado, y la aplicaci√≥n en el Pod 1 es m√°s sensible y requiere un nodo dedicado.</i> <br><br>  Sin embargo, las clases P y PG requerir√°n reglas de afinidad adicionales para garantizar que las solicitudes de demarcaci√≥n se ejecuten a medida que crecen el cl√∫ster y las aplicaciones alojadas.  Veamos c√≥mo puede implementar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estas reglas</a> para diferentes clases: <br><br><pre> <code class="plaintext hljs"># Class P affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" namespaces: ["default"] labelSelector: matchExpressions: - key: non-existing-key operator: DoesNotExist</code> </pre> <br>  Las reglas de afinidad para aplicaciones de clase P requieren nodos dedicados.  En este caso, el pod no se programar√° si sale sin <code>non-existing-key</code> .  Todo funcionar√° hasta que un solo pod tenga esta clave. <br><br><pre> <code class="plaintext hljs"># Class PG affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchLabels: class-pg-group-1: foobar podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchExpressions: - key: class-pg-group-1 operator: DoesNotExist</code> </pre> <br>  Para las aplicaciones de clase PG, las reglas de afinidad ser√°n anfitriones compartidos de pods que tengan un identificador de grupo <code>class-pg-group-1</code> y en nodos que tengan pods sin un identificador. <br><br>  Tal enfoque nos permitir√° utilizar un sistema de clasificaci√≥n para delimitar contenedores en funci√≥n de los requisitos relevantes de una aplicaci√≥n en contenedores. <br><br>  Que conseguimos <br><br><h2>  Conclusi√≥n </h2><br>  Consideramos una forma de implementar sandboxes basados ‚Äã‚Äãen el hipervisor tipo 1 (es decir, lanzado en metal desnudo) para crear nodos en grupos de Kubernetes y presentamos un sistema de clasificaci√≥n que define los requisitos para delimitar aplicaciones en contenedores.  Si comparamos este enfoque con las otras soluciones consideradas, tiene ventajas en t√©rminos de asegurar el aislamiento del sistema. <br><br>  Una conclusi√≥n importante es que la estrategia de aislamiento <i>restringe la propagaci√≥n de los</i> ataques <i>de</i> escape al contenedor.  <b>En otras palabras, no se evita dejar el contenedor solo, pero se mitigan sus efectos.</b>  Obviamente, junto con esto vienen dificultades adicionales que deben tenerse en cuenta al hacer comparaciones similares. <br><br>  Para utilizar el m√©todo especificado en un entorno de nube y proporcionar escalabilidad, se impondr√°n requisitos adicionales a la automatizaci√≥n.  Por ejemplo, para automatizar la creaci√≥n de m√°quinas virtuales y su uso en el cl√∫ster de Kubernetes.  Lo m√°s importante ser√° la implementaci√≥n y verificaci√≥n de la clasificaci√≥n <b>generalizada</b> de las aplicaciones. <br><br>  Esto es parte de mi disertaci√≥n sobre el <b>aislamiento de una aplicaci√≥n en contenedor</b> . <br><br>  Para evitar la posibilidad de que un atacante que se desconect√≥ del contenedor en un nodo ataque los servicios de otros nodos, es necesario considerar <i>los ataques propagados por la red</i> .  Para tener en cuenta estos riesgos, mi disertaci√≥n propone la <b><i>segmentaci√≥n de la red de cl√∫ster</i></b> e introduce arquitecturas en la nube, una de las cuales tiene un <b>firewall de hardware</b> . <br><br>  Aquellos que lo deseen pueden familiarizarse con el documento completo: el texto de la disertaci√≥n es de acceso p√∫blico: " <a href="">Orquestaci√≥n de contenedores en entornos exigentes de seguridad en la Autoridad de Polic√≠a de Suecia</a> ". <br><br><h2>  PD del traductor </h2><br>  Lea tambi√©n en nuestro blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vulnerabilidad CVE-2019-5736 en runc, que permite obtener privilegios de root en el host</a> "; </li><li>  "Las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">9 mejores pr√°cticas de seguridad en Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">11 maneras de (no) convertirse en una v√≠ctima del pirateo de Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Comprender RBAC en Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OPA y SPIFFE: dos nuevos proyectos en CNCF para la seguridad de aplicaciones en la nube</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vulnerable Docker VM: un juego de rompecabezas virtual de Docker y pentesting</a> ". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440504/">https://habr.com/ru/post/440504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440490/index.html">Biom√≥dulo 1-2</a></li>
<li><a href="../440492/index.html">Corea del Sur abandonar√° los autos el√©ctricos y la construcci√≥n de nuevas centrales nucleares</a></li>
<li><a href="../440498/index.html">La polic√≠a de Mosc√∫ recibir√° puntos con reconocimiento facial</a></li>
<li><a href="../440500/index.html">Primero</a></li>
<li><a href="../440502/index.html">C√≥mo lanzar su podcast, una gu√≠a para principiantes</a></li>
<li><a href="../440506/index.html">La sonda en √≥rbita lunar de la NASA tom√≥ nuevas im√°genes de la estaci√≥n china Chang'e-4, cada vez m√°s cerca</a></li>
<li><a href="../440508/index.html">C√≥mo perder tu hobby y convertirlo en un exitoso negocio en l√≠nea en los EE. UU.</a></li>
<li><a href="../440510/index.html">Qui√©n desarrolla conmutadores de 400 GbE para centros de datos</a></li>
<li><a href="../440512/index.html">Factoriales divisibles</a></li>
<li><a href="../440514/index.html">¬øQui√©n poblar√° la tierra de los cyborgs? El estado de desarrollo de la compa√±√≠a Motorika habl√≥ sobre el estado futuro de la isla Russky</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>