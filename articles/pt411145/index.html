<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚¨õÔ∏è üè™ üëãüèª Meus pequenos rel√©s: o computador Brainfuck √© uma realidade üè´ ‚è© üë©üèΩ‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Exatamente um ano se passou desde a √∫ltima publica√ß√£o e eu pensei que o primeiro de abril √© um √≥timo dia para o resumo anual dos meus tr√™s projetos ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Meus pequenos rel√©s: o computador Brainfuck √© uma realidade</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/411145/"><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/m0/ly/sf/m0lysfg74dvrhabcw-sbs1lld7g.jpeg"></a> <br>  Exatamente um ano se passou desde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a √∫ltima publica√ß√£o</a> e eu pensei que o primeiro de abril √© um √≥timo dia para o resumo anual dos meus tr√™s projetos malucos de computador.  Naquela √©poca, o projeto existia apenas no papel, mas agora definitivamente se tornou realidade. </p><br><p>  Blocos de rel√© tocando, os c√°lculos de rel√© mais r√°pidos do mundo (mas isso n√£o √© preciso), finaliza√ß√£o, indicadores de v√°cuo e LEDs piscando. </p><a name="habracut"></a><br><h1 id="istoricheskaya-spravka">  Antecedentes hist√≥ricos </h1><br><p><img src="https://habrastorage.org/webt/kh/qa/4m/khqa4myljg149ffbe7kjbmlmh_q.jpeg"><br>  <em>Figura 1: Um volume dos "Radio-Electronic Toys" de Wojciechowski, 1979, agredidos por minha vida e por mim.</em> </p><br><p>  Era uma vez, quando tudo era grande e eu era pequeno (um ano como aquele em 2002), meu pai me deu o livro de Wojciechowski, Radio-Electronic Toys.  Ent√£o eu n√£o tinha computador, mas n√£o ouvia falar da Internet, e um livro familiar para muitos acabou sendo apenas um dep√≥sito de dispositivos eletr√¥nicos divertidos.  Entre eles, havia uma descri√ß√£o de um computador eletr√¥nico e um modelo simples de circuito em rel√©s telef√¥nicos.  Este modelo, estando no meu segundo ano na universidade em 2008, reuni-me para um relat√≥rio sobre a hist√≥ria dos computadores. </p><br><p><img src="https://habrastorage.org/webt/cn/1w/-3/cn1w-35bc5xkah3gs2f8hgr8fgc.jpeg"><br>  <em>Figura 2: RCM - ALU de 4 bits</em> </p><br><p>  Naquela √©poca, eu j√° estava explorando as vastas extens√µes da Internet e conhecendo a exist√™ncia dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">computadores de retransmiss√£o</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Harry Porter</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">, computador n√∫mero 2</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">computador</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zuse</a> - eu estava pensando em construir minha pr√≥pria unidade. </p><br><p>  Para aqueles que est√£o pouco conscientes do que os outros t√™m, sugiro ver minha an√°lise em v√≠deo de computadores de retransmiss√£o caseiros.  Ao longo do ano, est√° um pouco desatualizado, mas n√£o deixou de ser menos interessante: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/whk8NKAdsB8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  No mesmo ano de 2008, nas aulas sobre os fundamentos te√≥ricos da engenharia el√©trica, decidi sobre o componente principal - um rel√© de palheta.  Em um dos laborat√≥rios, fiquei surpreso ao observar na forma de onda como o beb√™ RES55 trabalhava a uma frequ√™ncia de 50 Hz.  Isso causou uma impress√£o duradoura em mim e comecei a acumular interruptores de palheta. </p><br><h1 id="proshlo-10-let">  10 anos se passaram .... </h1><br><p>  E depois de uma d√©cada, o projeto est√° avan√ßando com grande velocidade de lan√ßamento.  Tudo mudou de um ponto morto em novembro de 2016, quando a arquitetura atual nasceu.  Infelizmente, decidi fazer todas as placas de circuito impresso por conta pr√≥pria ... como resultado, um metro quadrado inteiro de PCB de dupla face se transformou em um buraco negro e sugou para si v√°rias centenas de horas-homem de tempo livre, o que √© cerca de seis meses para um funcion√°rio.  De abril a novembro de 2k17 praticamente nada aconteceu. </p><br><h1 id="infografika">  Infogr√°ficos </h1><br><p><img src="https://habrastorage.org/webt/sl/is/nf/slisnf0apkc-ncrszkk55oxehxu.jpeg"></p><br><p>  A arquitetura da m√°quina corresponde √† m√°quina de Turing.  H√° uma fita com dados - RAM para 64 quilos (palavra de 16 bits).  RAM - armazena em cache chips de algum tipo de tapete.  placas-m√£e para Intel Pentium.  Para autenticidade, v√° para a se√ß√£o ... Autenticidade.  A RAM de microcircuito √© usada na maioria dos computadores de retransmiss√£o caseiros que conhe√ßo. </p><br><p>  O elemento central √© um somador paralelo de 16 bits.  Ele √© respons√°vel por calcular o n√∫mero da pr√≥xima instru√ß√£o e trabalha com dados e um ponteiro para ela. <br>  Nas entradas do somador, h√° um registro tempor√°rio de 16 bits e um registro de comando de 12 bits.  Tamb√©m s√£o enviados 12 bits para os 4 bits mais altos do somador, o que fornece 16 bits "completos".  √â importante que o somador funcione corretamente com adi√ß√£o e subtra√ß√£o de um n√∫mero de 12 bits. </p><br><p>  A desvantagem √© √≥bvia - em um momento, podemos pular apenas 2 ^ 12 instru√ß√µes para tr√°s ou para frente, ou alterar o ponteiro ou os dados por esse valor.  O primeiro - voc√™ precisa considerar ao escrever programas, o segundo - voc√™ sempre pode repetir o procedimento. </p><br><p>  Subtra√ß√£o est√° no c√≥digo adicional.  A transfer√™ncia paralela fornece um atraso de computa√ß√£o constante - apenas 3 rel√©s em s√©rie.  Isso n√£o passa de 2ms. </p><br><p>  O registro IP e o registro AP, bem como a entrada RAM, s√£o conectados √† sa√≠da do somador por meio de travas. </p><br><h2 id="vychisleniya">  C√°lculos </h2><br><p>  As opera√ß√µes principais s√£o exatamente duas partes.  Em um caso, trabalhamos com o c√°lculo de um novo valor de ponteiro, no outro, um novo valor de dados. </p><br><p>  Cada aresta ascendente inicia o c√°lculo de um novo n√∫mero de instru√ß√£o.  Essencialmente, o IP ++ est√° conclu√≠do.  Ap√≥s o c√°lculo, o IP √© alimentado na entrada de endere√ßo do cart√£o de mem√≥ria e, atrav√©s do barramento de dados, a instru√ß√£o entra no registro de comandos.  Os 4 bits altos determinam a instru√ß√£o futura, os 12 baixos provavelmente n√£o s√£o iguais a zero e, no futuro, o somador alterar√° o n√∫mero no registro tempor√°rio exatamente por esse valor. </p><br><p>  Cada borda descendente inicia a opera√ß√£o. </p><br><p>  Para opera√ß√µes com registradores AP e IP, a sequ√™ncia de a√ß√µes √© semelhante a esta: </p><br><ol><li>  Atrav√©s do barramento de endere√ßos, o conte√∫do do registro IP (AP) √© copiado para o registro tempor√°rio; </li><li>  Registros tempor√°rios e de comando s√£o alimentados na entrada do somador.  Ap√≥s 2 ms, a resposta estar√° pronta na sa√≠da do somador. </li><li>  A resposta √© registrada no registro IP ou AP. </li></ol><br><p>  Existem alguns recursos.  Para comandos AP + BIAS e AP-BIAS, √© exatamente esse o caso, para comandos condicionais, quando, por exemplo, IP = (* AP == 0?) IP + 1: IP + -BIAS, ainda precisamos carregar o valor atual da c√©lula de dados no barramento de dados e remover informa√ß√µes de um detector nulo. </p><br><p>  Para opera√ß√µes de <em>AP + BIAS e</em> AP-BIAS, a sequ√™ncia √© um pouco diferente. </p><br><ol><li>  Atrav√©s do barramento de dados, o valor atual da c√©lula de mem√≥ria √© gravado no registro tempor√°rio. </li><li>  Registros tempor√°rios e de comando s√£o alimentados na entrada do somador.  Ap√≥s 2 ms, a resposta estar√° pronta na sa√≠da do somador. </li><li>  O registro AP continua sendo alimentado na entrada do cart√£o de mem√≥ria.  A resposta do somador √© gravada diretamente na mem√≥ria. </li></ol><br><p>  Os c√°lculos sempre ocorrem no modo de 16 bits.  Mas o sinalizador nulo da ramifica√ß√£o condicional √© definido como: </p><br><pre><code class="cpp hljs">Z = ((<span class="hljs-number"><span class="hljs-number">16b</span></span>it?) *AP : (*AP) &amp; <span class="hljs-number"><span class="hljs-number">0x00FF</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) ;</code> </pre> <br><h1 id="konstrukciya">  Constru√ß√£o civil </h1><br><p>  Nada mudou desde a √∫ltima vez. </p><br><h2 id="modul">  M√≥dulo </h2><br><p><img src="https://habrastorage.org/webt/h1/9b/9m/h19b9mwdk162l0g8x5iwtbweypo.jpeg"><br>  <em>Figura 3: M√≥dulo do computador.</em>  <em>Da esquerda para a direita: m√≥dulo D-flip-flop, m√≥dulo de diodo, m√≥dulo 2AND / 2XOR</em> </p><br><p>  No n√∫cleo est√° um pequeno m√≥dulo de 40x64mm.  Cada m√≥dulo √© uma placa de circuito impresso com 4 rel√©s, nos quais uma simples opera√ß√£o l√≥gica √© implementada.  H√° um conector para 16 contatos (existem m√≥dulos para 12 e 14) e at√© 4 LEDs.  Todos os tamanhos s√£o estritamente fixos. </p><br><p><img src="https://habrastorage.org/webt/an/jz/uo/anjzuocj0hnbubswwexxtukvn_e.jpeg"><br>  <em>Figura 4: M√≥dulos durante a montagem</em> </p><br><p>  Por exemplo: </p><br><ol><li>  M√≥dulo 2AND / 2XOR - 2 opera√ß√µes l√≥gicas independentes - 2AND e 2XOR.  S√£o utilizadas 32 pe√ßas no bloco somador, dois m√≥dulos por bit.  No in√≠cio, todos os 4 LEDs foram soldados, mas o circuito do m√≥dulo √© tal que dois rel√©s em cada m√≥dulo s√£o conectados em paralelo e, para reduzir a energia consumida pela unidade, metade dos LEDs foram removidos. </li><li>  M√≥dulo D-trigger - 64 pe√ßas v√£o para dois blocos de registro.  Destes, 60 s√£o gatilhos sem sinal de ativa√ß√£o. </li><li>  M√≥dulo de diodo - apenas 8 diodos na placa para implementar um diodo de entrada m√∫ltipla OU.  Um truque sujo, mas permite economizar tanto em um rel√© (eu ainda tenho cerca de 400 rel√©s de reserva agora) quanto no tempo - em compara√ß√£o com um rel√©, o sinal √© transmitido para a sa√≠da de um elemento l√≥gico instantaneamente. </li><li>  M√≥dulo 2 e - Este √© o bloco b√°sico.  De fato, existem 4 rel√©s com um contato de comuta√ß√£o para implementar absolutamente qualquer circuito l√≥gico.  Eles ir√£o para blocos de l√≥gica em uma quantidade desconhecida. </li><li>  Universal 2AND / 2OR, que √© feito de tal maneira que permite implementar quase todas as fun√ß√µes l√≥gicas - 4AND, 4OR, 4AND-NOT, 4OR-NOT e assim por diante.  Ele tamb√©m ir√° para o bloco l√≥gico em uma quantidade desconhecida. </li></ol><br><p>  Como eu disse - depois de perder muito tempo produzindo placas de circuito impresso caseiras, surtei e pedi um conjunto completo de placas de circuito aos chineses.  Na primeira semana, montei os primeiros m√≥dulos.  E um m√™s depois, todos os m√≥dulos do bloco somador estavam prontos. </p><br><p><img src="https://habrastorage.org/webt/xn/72/gz/xn72gzk6fnala_kjqcga1ycq-cc.jpeg"><br>  <em>Figura 5: Bloco somador</em> </p><br><h2 id="blok">  Bloquear </h2><br><p>  32 m√≥dulos de 8 m√≥dulos em 4 linhas s√£o combinados em um bloco funcional.  Existem 5 blocos no total (no pior dos casos, 6): </p><br><ol><li>  O bloco somador √© um somador completo de 16 bits.  Duas entradas de 16 bits para n√∫meros, 1 linha de transfer√™ncia de zero bits, duas sa√≠das.  Por um lado, a opera√ß√£o de soma, por outro, o XOR entre as entradas.  Pode ser usado como uma opera√ß√£o independente. </li><li>  Bloco de registro IP / AP - Dois registradores independentes de 16 bits sem sinal de ativa√ß√£o.  As descobertas de Q e ~ Q s√£o usadas diretamente e s√£o alimentadas atrav√©s de travas at√© o local a seguir.  Foi poss√≠vel soldar 4 rel√©s, mas, para salvar o rel√©, a funcionalidade foi colocada em travas externas. </li><li>  Bloco de registros TMP / CMD - Existem tr√™s registros aqui.  Um √© um registro tempor√°rio de 16 bits.  Exatamente o mesmo que IP ou AP.  O segundo √© de 12 bits; sua sa√≠da √© conectada √† entrada do somador por meio de uma trava.  O terceiro √© de 4 bits, com um sinal de habilita√ß√£o embutido.  √â usado para armazenar a instru√ß√£o atual. </li><li>  Blocos l√≥gicos - 2 pe√ßas.  Ou tr√™s.  O esquema ainda √© desconhecido.  C√°lculos preliminares mostram que 64 m√≥dulos ser√£o suficientes (GOTO: Memory Board). </li></ol><br><p>  Na base de cada bloco, a placa de base √© de 200x150 mm, sem fia√ß√£o.  Tudo o que h√° nele s√£o 32 conectores e pinos quadrados saindo de baixo para uma instala√ß√£o envolvente. </p><br><p><img src="https://habrastorage.org/webt/s_/pn/tl/s_pntl-inevaow8u_8bnzg-710k.jpeg"><br>  <em>Figura 6: Placa base e sua cesta</em> </p><br><p>  Os m√≥dulos que se destacam no conector assim n√£o s√£o confi√°veis.  Eles ficam pendurados aqui e ali, deixam de tremer e, de todas as formas, reduzem a confiabilidade da estrutura.  Para consert√°-las, desenhei e imprimi cestas especiais com ranhuras.  Os m√≥dulos certamente n√£o v√£o a lugar nenhum - eles sobreviveram a uma viagem de trem para Moscou e voltaram sem problemas. </p><br><p>  O cesto poderia ter sido desenhado mais facilmente - com uma camada de 0,32 mm, seria impresso um pouco mais de 10 horas.  Tr√™s cestas s√£o impressas com pl√°stico PLA, mais duas com HIPS.  Este √∫ltimo, devido √† falta de uma caixa para a minha impressora, perceptivelmente distorce ao imprimir. </p><br><p>  Voc√™ pode perceber que o bloco somador n√£o possui orelhas para anexar.  A cesta para ele foi impressa pela primeira vez.  Depois, encaixe essas orelhas ou imprima uma nova cesta. <br><img src="https://habrastorage.org/webt/y3/es/a5/y3esa50tcletmcbmu5zn5nhxhrk.jpeg"><br>  <em>Figura 7: Bloco somador e bloco l√≥gico.</em> </p><br><h2 id="montazh-nakrutkoy">  Envolt√≥rio do fio </h2><br><p>  No quadro base, aguardamos 600 conclus√µes que precisam ser interconectadas.  Felizmente, √© necess√°rio conectar n√£o apenas tudo, mas apenas quase tudo.  Por outro lado, n√£o fica mais f√°cil. </p><br><p>  Pegamos uma ferramenta especial, um rolo de fio e uma perna ap√≥s uma perna, terminamos o diagrama de conex√£o. </p><br><p><img src="https://habrastorage.org/webt/wj/ak/gv/wjakgvtczgj932i6vpb77xjpb_e.jpeg"><br>  <em>Figura 8: Finaliza√ß√£o do bloco somador</em> </p><br><p>  Este √© apenas o come√ßo do trabalho.  Bem, como um come√ßo.  No in√≠cio, houve um horror silencioso - os fios estavam ao acaso, alguns jumpers s√£o longos, outros s√£o muito longos ... Depois de aprender um pouco melhor do que antes, removi a maioria dos jumpers e torci tudo de novo - comecei a esticar os jumpers com uma corda.  Portanto, os fios n√£o ficam pendurados e o resultado parece muito melhor.  Eu tentei colocar para que os fios n√£o pressionassem nos cantos dos pinos.  Como resultado, nem um √∫nico circuito.  Desde a primeira tentativa, havia apenas linhas de barro. </p><br><p><img src="https://habrastorage.org/webt/bq/6t/e3/bq6te3y4th4_ahzqaa12kto6llw.jpeg"><br>  <em>Figura 9: Finaliza√ß√£o do bloco somador.</em>  <em>Resultado final</em> </p><br><p>  No momento, n√£o √© exatamente simples, mas para o primeiro quadro um resultado muito bom, eu acho.  At√© agora, eu n√£o aprendi como colocar o fio na bobina, ou uma ferramenta de curva, ou m√£os ... </p><br><p>  No camarada  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">O UA3MQJ</a> possui um <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo detalhado</a></strong> sobre este m√©todo de instala√ß√£o. </p><br><p>  Al√©m do bloco somador, √© necess√°rio um bloco de registro.  Em vez disso, dois registros de bloco.  Mais alguns meses - e outros 64 m√≥dulos s√£o montados e testados.  Resta enrolar a placa de base. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ctT1eXD5qDE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Como foi isso? </p><br><h1 id="indikatornye-moduli">  M√≥dulos indicadores </h1><br><p><img src="https://habrastorage.org/webt/pq/u-/2i/pqu-2ianoeafpk1aubms_sevths.jpeg"><br>  <em>Figura 10: M√≥dulo indicador</em> </p><br><p>  O estado atual dos registros do processador precisa ser exibido em alguma coisa e eu decidi que os indicadores de v√°cuo estar√£o corretos.  Na placa 100x100mm (para 10 pe√ßas deste tamanho, voc√™ pode encomendar aos chineses por US $ 5), existem 6 indicadores IV-6, gatilhos K155TM8 e um microcontrolador.  A indica√ß√£o aqui √© din√¢mica. </p><br><p>  H√° tamb√©m uma entrada de 16 bits para leitura direta do status do registro e uma porta UART para receber comandos do cart√£o de mem√≥ria. </p><br><p>  Agora o firmware pode ler o status da porta de 16 bits e, no formato HEX, exibi-lo no indicador.  No total, preciso de 4 pe√ßas desses m√≥dulos.  Tr√™s exibir√£o o status atual dos registradores - IP, AP e CMD do registrador, a fim de ter uma visualiza√ß√£o mais conveniente dos valores armazenados atuais.  Quarto - mostrar√° o n√∫mero total de instru√ß√µes executadas. </p><br><h1 id="zaschelka">  Trava </h1><br><p><img src="https://habrastorage.org/webt/tt/u8/s6/ttu8s6chfwlltkbgkzbsbrldz0k.jpeg"><br>  <em>Figura 11: M√≥dulo de trava</em> </p><br><p>  O m√≥dulo de trava consiste em 8 rel√©s RES43.  Dentro s√£o dois contatos de fazer.  Esquerda e direita s√£o LEDs que exibem o estado atual da entrada e sa√≠da. </p><br><p>  O tamanho da trava √© 100x100mm.  A quantidade necess√°ria √© de 8 pe√ßas.  Dois est√£o prontos, resta recolher mais seis. </p><br><h1 id="plata-pamyati">  Placa de mem√≥ria </h1><br><p><img src="https://habrastorage.org/webt/ou/zw/vt/ouzwvtghdzcjmuywgdroiiovasi.jpeg"><br>  <em>Figura 12: Placa de mem√≥ria.</em>  <em>Vista geral</em> </p><br><p>  O maior bloco, que cont√©m principalmente dois chips de 64 Kbytes de RAM est√°tica e esquemas correspondentes para entradas de endere√ßo e uma porta de dados.  A placa abriga o microcontrolador ATmega1280.  Ele tem duas tarefas vitais: </p><br><ol><li>  Baixando o programa e os dados iniciais para a RAM.  O bin√°rio compilado deve ser colocado na mem√≥ria.  Para fazer isso, ser√° poss√≠vel conectar ao cart√£o de mem√≥ria via UART ou telnet (via Wi-Fi) e baixar o arquivo execut√°vel.  O MK ler√° o cabe√ßalho e exibir√° se√ß√µes de c√≥digo e dados na RAM.  Estou com muita pregui√ßa de fazer isso com os interruptores e bot√µes de altern√¢ncia - um programa de foder o c√©rebro que pode fazer algo mais complicado O HelloWorld cont√©m milhares de instru√ß√µes.  H√° alguns trunfos no ninho a esse respeito, mas sobre eles outra vez. </li><li>  Ele implementa comandos para ler dados do console e gravar nele.  Sim, sim, instru√ß√µes. ""  e "," s√£o implementados usando o MK.  Em vez disso, a l√≥gica do rel√© informa ao MK que agora √© necess√°rio transferir o status do barramento de dados para o console ou vice-versa para gerar o valor do console para o barramento de dados.  De fato, o MK funciona como um conversor de interface paralela no UART.  Sim, √© bem poss√≠vel executar em alguns especiais.  chip e eu vou pensar sobre isso. </li></ol><br><p>  Ainda n√£o decidi o que fazer com o modo de 16 bits.  Obviamente, a maioria dos programas √© escrita sob o c√©rebro de 8 bits e tudo √© simples - lemos e escrevemos o byte baixo.  E no modo de 16 bits, o que devo fazer?  Exibir a palavra inteira ou apenas o byte baixo tamb√©m? </p><br><p>  Al√©m das principais, o MK possui v√°rias tarefas paralelas, que voc√™ pode realizar sem, em princ√≠pio, mas elas visam a conveni√™ncia de usar a m√°quina: </p><br><ol><li>  O MK √© respons√°vel por exibir uma pequena √°rea de mem√≥ria em uma matriz de LED de 32x16 pixels.  Ele faz isso enquanto o barramento de endere√ßos e o barramento de dados n√£o est√£o ocupados pela l√≥gica principal.  Aqui, n√£o tenho certeza de que, para o MK, geralmente haja tempo no √¥nibus, ent√£o a quest√£o precisa ser verificada.  Mas no cabe√ßalho do programa, haver√° um endere√ßo de in√≠cio para exibi√ß√£o e tentarei faz√™-lo funcionar.  A indica√ß√£o √© din√¢mica.  Duas colunas de dados s√£o produzidas ao mesmo tempo em um ciclo de clock. </li><li>  Quando o sinalizador do modo de mem√≥ria protegida √© ativado no bin√°rio, no caso de uma tentativa de executar uma se√ß√£o de dados ou gravar em uma se√ß√£o de mem√≥ria, o MK gerar√° uma exce√ß√£o "Falha de segmenta√ß√£o".  Assim, podemos garantir que o programa n√£o v√° aonde n√£o deveria.  A leitura da se√ß√£o de mem√≥ria n√£o √© proibida. </li><li>  Quando o sinalizador de controle de c√≥digo √© ativado, o MK ativa o simulador e executa as mesmas instru√ß√µes que o computador, comparando os resultados esperados e recebidos.  Se o resultado for diferente, a exce√ß√£o "Erro da m√°quina" ser√° lan√ßada.  Isso significa que ocorreu um erro nos c√°lculos e talvez um m√≥dulo tenha come√ßado a falhar.  Ou tamb√©m aumentamos a frequ√™ncia do rel√≥gio e os rel√©s n√£o t√™m mais tempo para calcular.  Apenas com a ajuda dessa funcionalidade, tentarei extrair o m√°ximo do carro - algo ter√° que controlar a opera√ß√£o correta durante esse per√≠odo. </li></ol><br><p>  Ainda existe uma fun√ß√£o tempor√°ria, mas ainda vital, da placa de mem√≥ria - emulando um bloco de l√≥gica enquanto ela n√£o est√° presente.  Existem linhas de entrada e sa√≠da na placa de mem√≥ria e podemos fornecer os sinais necess√°rios para os blocos.  Portanto, conectando todas as linhas de controle √† placa de mem√≥ria e escrevendo um programa que emita a sequ√™ncia de comandos necess√°ria, o resultado ser√° no menor tempo poss√≠vel: </p><br><ol><li>  execute os primeiros programas para execu√ß√£o; </li><li>  algoritmos de depura√ß√£o e circuitos do bloco l√≥gico, o que aumentar√° as chances de sua montagem e opera√ß√£o sem erros posteriormente. </li></ol><br><p>  Depois, coletando os m√≥dulos necess√°rios dos blocos l√≥gicos, todas as fun√ß√µes ser√£o gradualmente transferidas "para o ferro".  Quando o MK deixar de ser respons√°vel pela l√≥gica, o projeto ser√° considerado conclu√≠do. </p><br><h1 id="autentichnost">  Autenticidade </h1><br><p>  O projeto n√£o foi originalmente concebido como puramente rel√©, sem o uso de transistores e microcircuitos.  Por um lado, o computador √© h√≠brido e perde resist√™ncia √† radia√ß√£o; por outro lado, a maioria dos computadores de retransmiss√£o tem uma doen√ßa semelhante.  A vers√£o final da m√°quina usar√° um chip de mem√≥ria e um microcontrolador.  A mem√≥ria de ferrite ser√° usada em outro projeto, j√° ‚ÄúSilicon-Free‚Äù. </p><br><p>  Para compensar o efeito de n√£o-canon, recebi uma m√°quina de escrever eletr√¥nica "Robotron S6130" </p><br><p><img src="https://habrastorage.org/webt/7q/sc/qp/7qscqpvy4fjdknrgucm0ryum5im.jpeg"><br>  <em>Figura 13: M√°quina de escrever eletr√¥nica do tipo camomila.</em> </p><br><p>  Infelizmente, a m√°quina foi para mim em um estado de vida gasto.  Ele foi usado por muito tempo na contabilidade, mas no final foi abandonado para morrer em espl√™ndido isolamento. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Bmlq4-TQYF0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Eu recomendo ver uma revis√£o √∫nica deste monstro. </p><br><p>  Diretamente, a mec√¢nica est√° em boas condi√ß√µes, mas a placa processadora, na qual estava um par de baterias D-0,25 NiCd, foi usada com muita for√ßa.  Eles vazaram com seguran√ßa e inundaram tudo com eletr√≥lito. </p><br><p>  Quero restaur√°-lo e us√°-lo como um terminal de entrada / sa√≠da para o computador, mas, al√©m do mau funcionamento da parte eletr√¥nica, a m√°quina possui uma margarida russa (unidade com letras) e teclas russas.  O segundo √© decidido por adesivos, o primeiro deve ser procurado e aqui ainda n√£o tenho sorte.  Sobre o fato de ser necess√°rio um cartucho com fita de tinta, geralmente fico em sil√™ncio.  Pelo menos eu tenho papel para ela .. </p><br><p>  Se for decidido pelos eletr√¥nicos que est√° irremediavelmente perdido, tentarei encontrar um doador ou desenvolverei um novo preenchimento eletr√¥nico.  Tornar um painel de controle um punhado de shagoviks n√£o √© a tarefa mais dif√≠cil.  Ser√° mais dif√≠cil traduzir um manual do alem√£o e entender o TK.  Obviamente, esta m√°quina merece um artigo separado sobre os resultados do reavivamento.  Contra ela, at√© agora √© a prioridade do trabalho realizado. </p><br><h1 id="testy">  Testes </h1><br><p>  Todos aqueles que leram at√© este local receber√£o uma recompensa na forma de rachaduras e zumbidos. </p><br><p>  Para come√ßar, vamos tentar aplicar uma onda quadrada na entrada do rel√© atrav√©s de uma cascata de transistor: </p><br><p><img src="https://habrastorage.org/webt/aa/9s/ob/aa9sobefi3g2phsqmkudkq9cafw.jpeg"><br>  <em>Figura 14: Teste de alta velocidade da chave reed RES55.</em>  <em>Um sinal amarelo est√° na bobina, azul est√° nos contatos</em> </p><br><p>  Como a entrada do oscilosc√≥pio possui uma certa capacit√¢ncia e, depois que o contato do rel√© √© aberto, ele permanece no ar e a autodescarga come√ßa, vemos o expoente oposto.  A uma frequ√™ncia de 1,7 kHz!  Para o revezamento!  Para um pequeno revezamento de palheta!  Parada normal em 20Hz ou um pouco mais alta.  A uma frequ√™ncia nominal de 100 Hz, as bordas ascendente e descendente s√£o de aproximadamente 600 ¬µs cada.  Aqui eles s√£o t√£o pequenos (200 microssegundos), porque a energia da anterior ainda permanece na bobina no momento da pr√≥xima liga√ß√£o. </p><br><p>  Aplicamos tens√£o nos blocos, cortamos os interruptores dos instrumentos de medi√ß√£o sovi√©ticos nas entradas. </p><br><p><img src="https://habrastorage.org/webt/yx/zv/pa/yxzvpakpbgnygfzcnkxcvllaxvq.jpeg"><br>  <em>Figura 15: Bloco somador e bloco registrador em opera√ß√£o</em> </p><br><p>  Isso conta!  Legal. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zqWaLdvAkPY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Ent√£o parecia da cena.  No come√ßo, eu queria refazer os switches para 16 bits.  Conecte os indicadores √† entrada e √† sa√≠da, mas ... Eu n√£o pude resistir. </p><br><p>  Bem, como tudo funciona, e o rel√© acabou sendo capaz de velocidades insanas, alimentamos o meandro da linha de transfer√™ncia: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8WnqqeKWtjw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  E n√≥s cortamos 500Hz.  O somador lida, embora o som n√£o possa ser dito.  Na verdade, o som √© n√≠tido, mas o microfone condensador pensa de maneira diferente.  At√© onde eu sei, este √© o adicionador de rel√© mais r√°pido do mundo. </p><br><h1 id="prodolzhenie-sleduet">  Para ser continuado </h1><br><p><img src="https://habrastorage.org/webt/3v/et/il/3vetilfxdaaga8060ahosnruc34.jpeg"><br>  <em>Figura 16: Projetando uma estrutura de computador</em> </p><br><p>  Gradualmente, as seis pe√ßas de travas ausentes s√£o coletadas e a estrutura da futura m√°quina come√ßa a ser projetada.  Existem seis blocos no desenho, caso 64 m√≥dulos n√£o sejam suficientes para a l√≥gica.  E se for o suficiente - o local sob o bloco central inferior permanecer√° vazio. </p><br><p>  Ao mesmo tempo, estou escrevendo um firmware para um cart√£o de mem√≥ria para que ele possa substituir um bloco l√≥gico ausente.  No ver√£o, o computador poder√° executar seu primeiro programa. </p><br><h2 id="tri-kompyutera">  Tr√™s computadores ??? </h2><br><p>  Sim tr√™s  O primeiro √© o atual BrainfuckPC.  O segundo √© um computador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pneum√°tico</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com o codinome FluidicPC</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Sobre o terceiro monstro futuro resistente √† radia√ß√£o, voc√™ j√° pode encontrar refer√™ncias na Internet, mas eu n√£o quero pulverizar entre os projetos e primeiro quero finalizar o atual - ainda n√£o o anunciei.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fn/l2/xu/fnl2xu1n17czsdx6lbs5u2yzkmi.jpeg"><br>  <em>Figura 17: Comuta√ß√£o dos decatrons A101, A102 e A103</em> <br>  Embora a partir desta imagem voc√™ j√° possa adivinhar o que ser√° discutido. </p></div></div><br><h2 id="zacheeeem">  PORQUE ???? </h2><br><img src="https://habrastorage.org/files/1fb/f24/c16/1fbf24c164974f8fabba8e7e03e5856b.jpg"><br><br><h2 id="ssylki">  Refer√™ncias </h2><br><p>  Todo o projeto continua completamente aberto.  Portanto, os principais links para o projeto: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Reposit√≥rio com diagramas de circuitos e layouts de PCB</a> .  Tamb√©m h√° firmware para o m√≥dulo indicador e o cart√£o de mem√≥ria </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Nesta p√°gina</a> , publico semanalmente e n√£o muito relat√≥rios sobre o que foi feito.  Agora voc√™ est√° lendo um artigo, um pouco mais do que completamente composto por essas notas.  Com tradu√ß√£o, coment√°rios e adi√ß√µes. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Compilador e emulador</a> . </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt411145/">https://habr.com/ru/post/pt411145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt411135/index.html">Par√¢metros</a></li>
<li><a href="../pt411137/index.html">VTC - Centro de Comunica√ß√£o por Sat√©lite (Vladivostok)</a></li>
<li><a href="../pt411139/index.html">O mist√©rio com a vida √∫til dos n√™utrons se torna mais complicado, e a mat√©ria escura ainda n√£o √© vis√≠vel</a></li>
<li><a href="../pt411141/index.html">"Casa inteligente" no Arduino para uma mudan√ßa de casa</a></li>
<li><a href="../pt411143/index.html">Programando Microcontroladores Modernos: Palestra 1</a></li>
<li><a href="../pt411147/index.html">Grandes pontos de planetas gigantes</a></li>
<li><a href="../pt411149/index.html">Previs√£o TRIZ de sistemas descentralizados e da sociedade ciber-f√≠sica de 2035</a></li>
<li><a href="../pt411151/index.html">iMX6ULL. Transi√ß√£o para m√≥dulos de processador</a></li>
<li><a href="../pt411153/index.html">Nove c√≠rculos de burocracia: como um aeroporto em Denver est√° tentando obter uma licen√ßa de espa√ßoporto</a></li>
<li><a href="../pt411155/index.html">Substitua antibi√≥ticos habituais por mol√©culas sint√©ticas da IBM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>