<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß£ üõåüèæ üë©üèª‚Äçüéì Apache Hadoop Code Quality: production VS test ‚öôÔ∏è ü§∑ üíø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour obtenir un code de production de haute qualit√©, il ne suffit pas de fournir une couverture de test maximale. Sans aucun doute, pour obtenir des r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apache Hadoop Code Quality: production VS test</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/480928/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c48/f76/cf1/c48f76cf15c8138ce1d944918b1dcc07.png" alt="Figure 1"></div><br>  Pour obtenir un code de production de haute qualit√©, il ne suffit pas de fournir une couverture de test maximale.  Sans aucun doute, pour obtenir des r√©sultats √©lev√©s, le code principal du projet et les tests doivent fonctionner en tandem parfaitement coh√©rent.  Par cons√©quent, vous devez faire attention aux tests autant qu'au code principal.  La r√©daction d'un bon test est la cl√© pour rattraper une r√©gression de la production.  Pour montrer l'importance du fait que les bogues dans les tests ne sont pas pires qu'en production, nous consid√©rerons la prochaine analyse des avertissements de l'analyseur statique PVS-Studio.  Cible: Apache Hadoop. <br><a name="habracut"></a><br><h2>  √Ä propos du projet </h2><br>  Ceux qui √©taient autrefois int√©ress√©s par le Big Data ont probablement entendu parler ou travaill√© avec un projet comme <a href="https://hadoop.apache.org/">Apache Hadoop</a> .  En bref, Hadoop est un framework qui peut √™tre utilis√© comme base pour construire et travailler avec des syst√®mes Big Data. <br><br>  Hadoop se compose de quatre modules principaux, chacun effectuant une t√¢che sp√©cifique n√©cessaire √† un syst√®me d'analyse de Big Data: <br><br><ul><li>  Hadoop commun </li><li>  Mapreduce </li><li>  Syst√®me de fichiers distribu√© Hadoop (Syst√®me de fichiers distribu√© Hadoop) </li><li>  Fil </li></ul><br>  Cependant, il existe de nombreux documents pour vous familiariser avec Internet. <br><br><h2>  √Ä propos de la v√©rification </h2><br>  Comme indiqu√© dans la <a href="https://www.viva64.com/ru/m/0044/">documentation</a> , PVS-Studio peut √™tre int√©gr√© au projet de diff√©rentes mani√®res: <br><br><ul><li>  en utilisant le plugin maven; </li><li>  en utilisant le plugin gradle; </li><li>  Utilisation d'IntellJ IDEA </li><li>  en utilisant l'analyseur directement. </li></ul><br>  Hadoop a √©t√© construit sur la base du syst√®me de construction maven, il n'y a donc eu aucune difficult√© avec la v√©rification. <br><br>  Apr√®s avoir int√©gr√© le script de la documentation et l√©g√®rement ajust√© un de pom.xml (il y avait des modules dans les d√©pendances qui n'√©taient pas l√†), l'analyse est all√©e! <br><br>  Apr√®s l'analyse, en choisissant les avertissements les plus int√©ressants, j'ai remarqu√© que j'avais le m√™me nombre d'avertissements dans le code de production et les tests.  Habituellement, je ne consid√®re pas le d√©clenchement d'un analyseur qui tombe sur des tests.  Mais, en les divisant, je ne pouvais pas manquer les avertissements de la cat√©gorie ¬´tests¬ª devant mon attention.  ¬´Pourquoi pas?¬ª, Ai-je pens√©, car les bogues dans les tests ont √©galement des cons√©quences.  Ils peuvent conduire √† des tests incorrects ou partiels, voire √† des b√™tises (juste pour le spectacle, afin qu'ils soient toujours verts). <br><br>  Ainsi, en rassemblant les avertissements les plus int√©ressants, en les divisant par code (production, test) et les quatre principaux modules Hadoop, je porte √† votre attention une analyse du fonctionnement de l'analyseur. <br><br><h2>  Code de production </h2><br><h3>  Hadoop commun </h3><br>  <a href="https://www.viva64.com/ru/w/v6033/">V6033</a> Un √©l√©ment avec la m√™me cl√© 'KDC_BIND_ADDRESS' a d√©j√† √©t√© ajout√©.  MiniKdc.java (163), MiniKdc.java (162) <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MiniKdc</span></span></span><span class="hljs-class"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Set&lt;String&gt; PROPERTIES = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;String&gt;(); .... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { PROPERTIES.add(ORG_NAME); PROPERTIES.add(ORG_DOMAIN); PROPERTIES.add(KDC_BIND_ADDRESS); PROPERTIES.add(KDC_BIND_ADDRESS); <span class="hljs-comment"><span class="hljs-comment">// &lt;= PROPERTIES.add(KDC_PORT); PROPERTIES.add(INSTANCE); .... } .... }</span></span></code> </pre> <br>  Une valeur ajout√©e deux fois √† un <i>HashSet</i> est un d√©faut courant lors de la v√©rification de projets.  En fait, le deuxi√®me ajout sera ignor√©.  Eh bien, si cette duplication est un accident absurde.  Et si cela signifiait vraiment ajouter une autre valeur? <br><br><h3>  Mapreduce </h3><br>  <a href="https://www.viva64.com/ru/w/v6072/">V6072</a> Deux fragments de code similaires ont √©t√© trouv√©s.  Il s'agit peut-√™tre d'une faute de frappe et la variable ¬´localFiles¬ª devrait √™tre utilis√©e √† la place de ¬´localArchives¬ª.  LocalDistributedCacheManager.java (183), LocalDistributedCacheManager.java (178), LocalDistributedCacheManager.java (176), LocalDistributedCacheManager.java (181) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">synchronized</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JobConf conf, JobID jobId)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ .... <span class="hljs-comment"><span class="hljs-comment">// Update the configuration object with localized data. if (!localArchives.isEmpty()) { conf.set(MRJobConfig.CACHE_LOCALARCHIVES, StringUtils .arrayToString(localArchives.toArray(new String[localArchives // &lt;= .size()]))); } if (!localFiles.isEmpty()) { conf.set(MRJobConfig.CACHE_LOCALFILES, StringUtils .arrayToString(localFiles.toArray(new String[localArchives // &lt;= .size()]))); } .... }</span></span></code> </pre> <br>  Diagnostics V6072 fait des r√©sultats parfois tr√®s int√©ressants.  L'essence du diagnostic est de rechercher le m√™me type de fragments de code qui ont √©t√© obtenus par copier-coller et en rempla√ßant une ou deux variables, mais en m√™me temps, certaines variables √©taient ¬´sous-estim√©es¬ª. <br><br>  Le code ci-dessus le d√©montre.  Dans le premier bloc, les actions sont effectu√©es avec la variable <i>localArchives</i> , dans le bloc suivant du m√™me type, avec <i>localFiles</i> .  Et si vous √©tudiez consciencieusement ce code et ne le passez pas en revue rapidement, comme c'est souvent le cas avec la r√©vision de code, notez l'endroit o√π vous avez oubli√© de remplacer la variable <i>localArchives</i> . <br><br>  Une telle omission pourrait conduire au sc√©nario suivant: <br><br><ul><li>  Supposons que nous ayons <i>localArchives</i> (taille = 4) et <i>localFiles</i> (taille = 2); </li><li>  Lors de la cr√©ation du tableau <i>localFiles.toArray (nouveau String [localArchives.size ()])</i> , nous obtenons que les 2 derniers √©l√©ments soient <i>nuls</i> (["pathToFile1", "pathToFile2", null, null]); </li><li>  Apr√®s cela, <i>org.apache.hadoop.util.StringUtils.arrayToString</i> renverra une repr√©sentation sous forme de cha√Æne de notre tableau dans laquelle les derniers noms de fichiers seront repr√©sent√©s comme "null" ("pathToFile1, pathToFile2, null, null" <i>)</i> ; </li><li>  Tout cela sera transmis, et qui sait quels contr√¥les il y a pour de tels cas =). </li></ul><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007 L'</a> expression 'children.size ()&gt; 0' est toujours vraie.  Queue.java (347) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isHierarchySameAs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Queue newState)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (children == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || children.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(children.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... } .... }</code> </pre> <br>  √âtant donn√© que la v√©rification du nombre d'√©l√©ments √† 0 est effectu√©e s√©par√©ment, une v√©rification suppl√©mentaire de <i>children.size ()&gt; 0</i> donnera toujours la valeur true. <br><br><h3>  HDFS </h3><br>  <a href="https://www.viva64.com/ru/w/v6001/">V6001</a> Il existe des sous-expressions identiques 'this.bucketSize' √† gauche et √† droite de l'op√©rateur '%'.  RollingWindow.java (79) <br><br><pre> <code class="java hljs"> RollingWindow(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> windowLenMs, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numBuckets) { buckets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bucket[numBuckets]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; numBuckets; i++) { buckets[i] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bucket(); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.windowLenMs = windowLenMs; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bucketSize = windowLenMs / numBuckets; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bucketSize % bucketSize != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= throw new IllegalArgumentException( "The bucket size in the rolling window is not integer: windowLenMs= " + windowLenMs + " numBuckets= " + numBuckets); } }</span></span></code> </pre> <br>  Ce d√©faut r√©side dans le fait que la variable est divis√©e en elle-m√™me.  Par cons√©quent, la v√©rification de la multiplicit√© passera toujours et, en cas de donn√©es d'entr√©e incorrectes ( <i>windowLenMs</i> , <i>numBuckets</i> ), l'exception ne sera pas lev√©e. <br><br><h3>  Fil </h3><br>  <a href="https://www.viva64.com/ru/w/v6067/">V6067</a> Deux ou plusieurs branches de cas effectuent les m√™mes actions.  TimelineEntityV2Converter.java (386), TimelineEntityV2Converter.java (389) <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ApplicationReport </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convertToApplicationReport</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TimelineEntity entity)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (metrics != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> vcoreSeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> memorySeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> preemptedVcoreSeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> preemptedMemorySeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (TimelineMetric metric : metrics) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (metric.getId()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationMetricsConstants.APP_CPU_METRICS: vcoreSeconds = getAverageValue(metric.getValues().values()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationMetricsConstants.APP_MEM_METRICS: memorySeconds = ....; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationMetricsConstants.APP_MEM_PREEMPT_METRICS: preemptedVcoreSeconds = ....; <span class="hljs-comment"><span class="hljs-comment">// &lt;= break; case ApplicationMetricsConstants.APP_CPU_PREEMPT_METRICS: preemptedVcoreSeconds = ....; // &lt;= break; default: // Should not happen.. break; } } .... } .... }</span></span></code> </pre> <br>  Dans deux branches de <i>cas</i> , les m√™mes fragments de code.  Cela arrive tout le temps!  Dans le nombre pr√©dominant de cas, ce n'est pas une vraie erreur, mais seulement une occasion de penser √† une refactorisation des <i>commutateurs</i> .  Mais pas pour le cas en question.  Dans les extraits de code r√©p√©titifs, la valeur de la variable <i>preemptedVcoreSeconds est d√©finie</i> .  Si vous faites attention aux noms de toutes les variables et constantes, vous pouvez conclure que dans le cas de <i>metric.getId () == APP_MEM_PREEMPT_METRICS</i> , la valeur de la variable <i>preemptedMemorySeconds</i> doit √™tre d√©finie, et non <i>preemptedVcoreSeconds</i> .  √Ä cet √©gard, <i>preemptedMemorySeconds</i> restera toujours 0 apr√®s l'ex√©cution de l'instruction 'switch', et la valeur de <i>preemptedVcoreSeconds</i> peut √™tre incorrecte. <br><br>  <a href="https://www.viva64.com/ru/w/v6046/">V6046</a> Format incorrect.  Un nombre diff√©rent d'√©l√©ments de format est attendu.  Arguments non utilis√©s: 2. AbstractSchedulerPlanFollower.java (186) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">synchronized</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">synchronizePlan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Plan plan, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shouldReplan)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { setQueueEntitlement(planQueueName, ....); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (YarnException e) { LOG.warn(<span class="hljs-string"><span class="hljs-string">"Exception while trying to size reservation for plan: {}"</span></span>, currResId, planQueueName, e); } .... }</code> </pre> <br>  Variable inutilis√©e <i>planQueueName</i> lors de la connexion.  Ici, ils ont trop copi√© ou n'ont pas modifi√© la cha√Æne de format.  Mais n√©anmoins, je suis enclin au bon vieux et, en apportant parfois un mauvais service, au copier-coller. <br><br><h2>  Code de test </h2><br><h3>  Hadoop commun </h3><br>  <a href="https://www.viva64.com/ru/w/v6072/">V6072</a> Deux fragments de code similaires ont √©t√© trouv√©s.  Il s'agit peut-√™tre d'une faute de frappe et la variable ¬´allSecretsB¬ª devrait √™tre utilis√©e √† la place de ¬´allSecretsA¬ª.  TestZKSignerSecretProvider.java (316), TestZKSignerSecretProvider.java (309), TestZKSignerSecretProvider.java (306), TestZKSignerSecretProvider.java (313) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testMultiple</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> order)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ .... currentSecretA = secretProviderA.getCurrentSecret(); allSecretsA = secretProviderA.getAllSecrets(); Assert.assertArrayEquals(secretA2, currentSecretA); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">2</span></span>, allSecretsA.length); <span class="hljs-comment"><span class="hljs-comment">// &lt;= Assert.assertArrayEquals(secretA2, allSecretsA[0]); Assert.assertArrayEquals(secretA1, allSecretsA[1]); currentSecretB = secretProviderB.getCurrentSecret(); allSecretsB = secretProviderB.getAllSecrets(); Assert.assertArrayEquals(secretA2, currentSecretB); Assert.assertEquals(2, allSecretsA.length); // &lt;= Assert.assertArrayEquals(secretA2, allSecretsB[0]); Assert.assertArrayEquals(secretA1, allSecretsB[1]); .... }</span></span></code> </pre> <br>  Et encore V6072.  Attention aux variables <i>allSecretsA</i> et <i>allSecretsB</i> . <br><br>  <a href="https://www.viva64.com/ru/w/v6043/">V6043</a> Envisagez d'inspecter l'op√©rateur ¬´pour¬ª.  Les valeurs initiales et finales de l'it√©rateur sont identiques.  TestTFile.java (235) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readPrepWithUnknownLength</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Scanner scanner, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start; i &lt; start; i++) { String key = String.format(localFormatter, i); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] read = readKey(scanner); assertTrue(<span class="hljs-string"><span class="hljs-string">"keys not equal"</span></span>, Arrays.equals(key.getBytes(), read)); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { read = readValue(scanner); assertTrue(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException ie) { <span class="hljs-comment"><span class="hljs-comment">// should have thrown exception } String value = "value" + key; read = readLongValue(scanner, value.getBytes().length); assertTrue("values nto equal", Arrays.equals(read, value.getBytes())); scanner.advance(); } return (start + n); }</span></span></code> </pre> <br>  Un test toujours vert?  =).  Le corps de la boucle, qui fait partie du test, n'est jamais ex√©cut√©.  Cela est d√ª au fait que les valeurs de d√©but et de fin du compteur correspondent dans l'instruction <i>for</i> .  Par cons√©quent, la condition <i>i &lt;start nous</i> donnera imm√©diatement faux, ce qui conduira √† ce comportement.  J'ai parcouru le fichier avec les tests et suis arriv√© √† la conclusion qu'il √©tait n√©cessaire d'√©crire dans l'√©tat de la boucle <i>i &lt;(start + n)</i> . <br><br><h3>  Mapreduce </h3><br>  a href = " <a href="https://www.viva64.com/ru/w/v6007/">www.viva64.com/en/w/v6007</a> "&gt; V6007 L'expression 'byteAm &lt;0' est toujours fausse.  DataWriter.java (322) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">GenerateOutput </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeSegment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> byteAm, OutputStream out)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> headerLen = getHeaderLength(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (byteAm &lt; headerLen) { <span class="hljs-comment"><span class="hljs-comment">// not enough bytes to write even the header return new GenerateOutput(0, 0); } // adjust for header length byteAm -= headerLen; if (byteAm &lt; 0) { // &lt;= byteAm = 0; } .... }</span></span></code> </pre> <br>  La condition <i>byteAm &lt;0 est</i> toujours fausse.  Pour comprendre, remontons le code ci-dessus.  Si l'ex√©cution du test atteint l'op√©ration <i>byteAm - = headerLen</i> , cela signifie qu'il y aura <i>byteAm&gt; = headerLen</i> .  √Ä partir de l√†, apr√®s avoir effectu√© la soustraction, la valeur de <i>byteAm</i> ne sera jamais n√©gative.  Ce qui devait prouver. <br><br><h3>  HDFS </h3><br>  <a href="https://www.viva64.com/ru/w/v6072/">V6072</a> Deux fragments de code similaires ont √©t√© trouv√©s.  Il s'agit peut-√™tre d'une faute de frappe et la variable ¬´normalFile¬ª devrait √™tre utilis√©e √† la place de ¬´normalDir¬ª.  TestWebHDFS.java (625), TestWebHDFS.java (615), TestWebHDFS.java (614), TestWebHDFS.java (624) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWebHdfsErasureCodingFiles</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Path normalDir = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Path(<span class="hljs-string"><span class="hljs-string">"/dir"</span></span>); dfs.mkdirs(normalDir); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Path normalFile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Path(normalDir, <span class="hljs-string"><span class="hljs-string">"file.log"</span></span>); .... <span class="hljs-comment"><span class="hljs-comment">// logic block #1 FileStatus expectedNormalDirStatus = dfs.getFileStatus(normalDir); FileStatus actualNormalDirStatus = webHdfs.getFileStatus(normalDir); // &lt;= Assert.assertEquals(expectedNormalDirStatus.isErasureCoded(), actualNormalDirStatus.isErasureCoded()); ContractTestUtils.assertNotErasureCoded(dfs, normalDir); assertTrue(normalDir + " should have erasure coding unset in " + ....); // logic block #2 FileStatus expectedNormalFileStatus = dfs.getFileStatus(normalFile); FileStatus actualNormalFileStatus = webHdfs.getFileStatus(normalDir); // &lt;= Assert.assertEquals(expectedNormalFileStatus.isErasureCoded(), actualNormalFileStatus.isErasureCoded()); ContractTestUtils.assertNotErasureCoded(dfs, normalFile); assertTrue( normalFile + " should have erasure coding unset in " + ....); }</span></span></code> </pre> <br>  Ne le croyez pas, et encore V6072!  Suivez simplement les <i>variables</i> <i>normalDir</i> et <i>normalFile</i> <br><br>  <a href="https://www.viva64.com/ru/w/v6027/">V6027</a> Les variables sont initialis√©es via l'appel √† la m√™me fonction.  Il s'agit probablement d'une erreur ou d'un code non optimis√©.  TestDFSAdmin.java (883), TestDFSAdmin.java (879) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">verifyNodesAndCorruptBlocks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numDn, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numLiveDn, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numCorruptBlocks, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numCorruptECBlockGroups, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> DFSClient client, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Long highestPriorityLowRedundancyReplicatedBlocks, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Long highestPriorityLowRedundancyECBlocks)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* init vars */</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String expectedCorruptedECBlockGroupsStr = String.format( <span class="hljs-string"><span class="hljs-string">"Block groups with corrupt internal blocks: %d"</span></span>, numCorruptECBlockGroups); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String highestPriorityLowRedundancyReplicatedBlocksStr = String.format( <span class="hljs-string"><span class="hljs-string">"\tLow redundancy blocks with highest priority "</span></span> + <span class="hljs-string"><span class="hljs-string">"to recover: %d"</span></span>, highestPriorityLowRedundancyReplicatedBlocks); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String highestPriorityLowRedundancyECBlocksStr = String.format( <span class="hljs-string"><span class="hljs-string">"\tLow redundancy blocks with highest priority "</span></span> + <span class="hljs-string"><span class="hljs-string">"to recover: %d"</span></span>, highestPriorityLowRedundancyReplicatedBlocks); .... }</code> </pre> <br>  Dans ce fragment, les variables le plus <i>√©lev√©PriorityLowRedundancyReplicatedBlocksStr</i> et le plus <i>√©lev√©PriorityLowRedundancyECBlocksStr sont</i> initialis√©s avec les m√™mes valeurs.  C'est souvent le cas, mais pas dans cette situation.  Les noms de variables ici sont longs et similaires les uns aux autres, donc je ne suis pas surpris qu'il n'y ait pas eu de modifications correspondantes avec le copier-coller.  Pour rem√©dier √† la situation, lors de l'initialisation de la variable <i>LowestPriorityLowRedundancyECBlocksStr,</i> vous devez utiliser le param√®tre d'entr√©e <i>LowestPriorityLowRedundancyECBlocks</i> .  En plus de cela, tr√®s probablement, vous devez toujours corriger la cha√Æne de format. <br><br>  <a href="https://www.viva64.com/ru/w/v6019/">V6019</a> Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  TestReplaceDatanodeFailureReplication.java (222) <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">verifyFileContent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...., SlowWriter[] slowwriters)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ LOG.info(<span class="hljs-string"><span class="hljs-string">"Verify the file"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; slowwriters.length; i++) { LOG.info(slowwriters[i].filepath + ....); FSDataInputStream in = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { in = fs.open(slowwriters[i].filepath); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>, x;; j++) { x = in.read(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((x) != -<span class="hljs-number"><span class="hljs-number">1</span></span>) { Assert.assertEquals(j, x); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { IOUtils.closeStream(in); } } }</code> </pre> <br>  L'analyseur jure que la modification du compteur <i>i ++</i> dans la boucle est impossible.  Cela signifie que dans une boucle <i>for (int i = 0; i &lt;slowwriters.length; i ++) {....}</i> pas plus d'une it√©ration ne sera effectu√©e.  Voyons pourquoi.  Ainsi, dans la premi√®re it√©ration, nous associons le flux au fichier correspondant aux <i>ralentisseurs [0]</i> pour une lecture plus approfondie.  √Ä travers la boucle <i>for (int j = 0, x ;; j ++), nous</i> lisons le contenu du fichier par octet, o√π: <br><br><ul><li>  si nous lisons quelque chose d'ad√©quat, alors via <i>assertEquals nous</i> comparons l'octet de lecture avec la valeur actuelle du compteur <i>j</i> (en cas de v√©rification infructueuse, nous quittons le test avec √©chec); </li><li>  si le fichier a r√©ussi le test et que nous avons atteint la fin du fichier (lire -1), nous quittons la m√©thode. </li></ul><br>  Par cons√©quent, peu importe ce qui se passe lors de la v√©rification des <i>ralentisseurs [0]</i> , il ne s'agit pas de v√©rifier les √©l√©ments suivants.  Tr√®s probablement, la <i>pause</i> devrait √™tre utilis√©e au lieu du <i>retour</i> . <br><br><h3>  Fil </h3><br>  <a href="https://www.viva64.com/ru/w/v6019/">V6019</a> Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  TestNodeManager.java (176) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCreationOfNodeLabelsProviderService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Assert.fail(<span class="hljs-string"><span class="hljs-string">"Exception caught"</span></span>); e.printStackTrace(); } }</code> </pre> <br>  Dans cette situation, stacktrace ne sera jamais imprim√© si une exception se produit, car la m√©thode <i>Assert.fail</i> interrompra le test.  S'il y a suffisamment de message que l'exception est intercept√©e, alors pour ne pas √™tre confus, l'impression stacktrace'a doit √™tre supprim√©e.  Si l'impression est n√©cessaire, il vous suffit de les √©changer. <br><br>  Il existe de nombreux endroits de ce type: <ul><li>  V6019 Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  TestResourceTrackerService.java (928) </li><li>  V6019 Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  TestResourceTrackerService.java (737) </li><li>  V6019 Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  TestResourceTrackerService.java (685) </li><li>  .... </li></ul><br>  <a href="https://www.viva64.com/ru/w/v6072/">V6072</a> Deux fragments de code similaires ont √©t√© trouv√©s.  Il s'agit peut-√™tre d'une faute de frappe et la variable ¬´publicCache¬ª devrait √™tre utilis√©e √† la place de ¬´usercache¬ª.  TestResourceLocalizationService.java (315), TestResourceLocalizationService.java (309), TestResourceLocalizationService.java (307), TestResourceLocalizationService.java (313) <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testDirectoryCleanupOnNewlyCreatedStateStore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException, URISyntaxException </span></span>{ .... <span class="hljs-comment"><span class="hljs-comment">// verify directory creation for (Path p : localDirs) { p = new Path((new URI(p.toString())).getPath()); // logic block #1 Path usercache = new Path(p, ContainerLocalizer.USERCACHE); verify(spylfs).rename(eq(usercache), any(Path.class), any()); // &lt;= verify(spylfs).mkdir(eq(usercache), ....); // logic block #2 Path publicCache = new Path(p, ContainerLocalizer.FILECACHE); verify(spylfs).rename(eq(usercache), any(Path.class), any()); // &lt;= verify(spylfs).mkdir(eq(publicCache), ....); .... } .... }</span></span></code> </pre> <br>  Et enfin, encore V6072 =).  Variables pour vous familiariser avec un fragment suspect: <i>usercache</i> et <i>publicCache</i> . <br><br><h2>  Conclusion </h2><br>  Pendant le d√©veloppement, des centaines de milliers de lignes de code sont √©crites.  Si le code de production essaie de se maintenir √† l'abri des bogues, des d√©fauts et des lacunes (le d√©veloppeur teste son propre code, proc√®de √† une r√©vision du code, et bien plus encore), alors les tests sont clairement inf√©rieurs √† cela.  Les d√©fauts dans les tests peuvent se cacher discr√®tement derri√®re une "coche verte".  Et comme vous le comprenez d'apr√®s l'analyse des avertissements d'aujourd'hui, un test r√©ussi est loin d'√™tre toujours un test garanti. <br><br>  Lors de la v√©rification de la base de code Apache Hadoop, l'analyse statique a d√©montr√© son besoin non seulement pour le code qui entre en production, mais aussi pour les tests qui jouent √©galement un r√¥le important dans le d√©veloppement. <br><br>  Donc, si vous vous souciez de la qualit√© de votre code et de votre base de test, je vous recommande de vous tourner vers l'analyse statique.  Et le premier candidat au test, je propose d'essayer <a href="https://www.viva64.com/ru/pvs-studio-download/">PVS-Studio</a> . <br><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/480918/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Maxim Stefanov.  <a href="https://habr.com/en/company/pvs-studio/blog/480918/">Apache Hadoop Code Quality: Production VS Test</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480928/">https://habr.com/ru/post/fr480928/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480918/index.html">Apache Hadoop Code Quality: Production VS Test</a></li>
<li><a href="../fr480920/index.html">Test des commutateurs TP-Link avec PoE longue port√©e. Et un peu sur les mises √† niveau des anciens mod√®les</a></li>
<li><a href="../fr480922/index.html">Evgeny Usvitsky: ¬´Tout le monde dans le monde sait o√π obtenir les g√©odonn√©es librement - uniquement dans OSM¬ª</a></li>
<li><a href="../fr480924/index.html">Comment et pourquoi les cr√©ateurs du remake de MediEvil ont repens√© le boss culte du jeu</a></li>
<li><a href="../fr480926/index.html">Th√©orie des probabilit√©s pour un rendu physiquement pr√©cis</a></li>
<li><a href="../fr480930/index.html">Tapez tout</a></li>
<li><a href="../fr480936/index.html">IntelliJ IDEA conversion rapide UPPER_CASE en camelCase</a></li>
<li><a href="../fr480938/index.html">La crypto-monnaie √† travers les yeux des juges russes</a></li>
<li><a href="../fr480940/index.html">Ex√©cutez un test d'interface utilisateur multi-navigateur avec Cucumber et Selenoid dans Gitlab CI avec rapport Allure</a></li>
<li><a href="../fr480944/index.html">Top 5 des tendances du marketing par e-mail en 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>