<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíã ‚úàÔ∏è ‚úçüèø Fazendo um projetor a laser de texto DIY ü•ó üö¥üèª üßìüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vamos descobrir como fazer um projetor a laser bastante simples com os eletr√¥nicos que voc√™ pode encontrar em casa. 



 1. Introdu√ß√£o 
 Existem duas ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fazendo um projetor a laser de texto DIY</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438618/">  Vamos descobrir como fazer um projetor a laser bastante simples com os eletr√¥nicos que voc√™ pode encontrar em casa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dn/9d/2r/dn9d2r-uteclj5p-smec6__dd2s.jpeg"></div><a name="habracut"></a><br><br><h3>  1. Introdu√ß√£o </h3><br>  Existem duas maneiras de criar uma imagem com uma varredura de vetor a laser e varredura de varredura. <br><br>  Durante a digitaliza√ß√£o vetorial, o laser se move ao longo dos contornos da imagem, apenas desligando ao passar de um contorno para o pr√≥ximo.  Isso significa que o laser est√° na maior parte do tempo, criando uma imagem resultante bastante brilhante. <br><br>  Esse m√©todo √© mais frequentemente usado em projetores industriais a laser em larga escala, mas requer o uso de um dispositivo eletromec√¢nico bastante complexo - o galvan√¥metro - para mover o laser rapidamente.  Os pre√ßos come√ßam em US $ 80 por par e √© muito impratic√°vel ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">embora poss√≠vel</a> ) fazer em casa. <br><br>  O segundo m√©todo √© a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">varredura raster</a> .  L√°, o raio laser se move de um lado para o outro, desenhando a imagem linha por linha.  Esse √© o m√©todo usado nos antigos televisores e monitores CRT. <br><br>  Como os movimentos verticais e horizontais s√£o feitos repetidamente, isso requer uma configura√ß√£o mec√¢nica muito mais simples do que a digitaliza√ß√£o vetorial.  Al√©m disso, como a imagem √© dividida em elementos separados, √© muito mais f√°cil programar. <br><br>  A principal desvantagem da digitaliza√ß√£o de varredura √© que o feixe passa por todos os elementos da imagem, mesmo aqueles que n√£o precisam ser iluminados, fazendo com que a imagem fique mais escura.  Mas, devido √† simplicidade, esse foi o m√©todo que escolhi para o meu projetor a laser. <br><br>  Para mover o feixe de laser ao longo de uma linha (horizontalmente), existe uma t√©cnica muito conveniente: √© usar um espelho girando a uma velocidade constante.  Como a rota√ß√£o √© cont√≠nua, voc√™ pode mover o feixe rapidamente.  Mas mover o feixe para outra linha √© mais dif√≠cil. <br><br>  A op√ß√£o mais f√°cil √© usar v√°rios lasers apontados para o espelho rotativo.  A desvantagem √© que o n√∫mero de linhas exibidas seria determinado pelo n√∫mero de lasers usados, o que torna a configura√ß√£o mais complicada, al√©m de que voc√™ precisaria de um espelho alto.  Mas tamb√©m existem vantagens - a √∫nica parte m√≥vel de todo o sistema √© o espelho (menos coisas para quebrar), e o uso de v√°rios lasers pode tornar a imagem mais brilhante.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° um exemplo</a> de um projetor constru√≠do dessa maneira. <br><br>  Outro m√©todo de varredura, freq√ºentemente encontrado na Internet, √© combinar varreduras verticais e horizontais usando um tambor de espelho girat√≥rio, onde "facetas" separadas s√£o colocadas em √¢ngulos diferentes do eixo rotativo.  Essa configura√ß√£o de espelho faz o raio laser refletir em diferentes √¢ngulos verticais quando o espelho est√° girando, criando uma varredura vertical. <br><br>  Mesmo que o projetor resultante seja bastante simples em ess√™ncia (voc√™ s√≥ precisa de um laser, um espelho com um motor e um sensor de sincroniza√ß√£o), esse m√©todo tem uma grande desvantagem - √© muito dif√≠cil construir um espelho multifacetado em casa.  Normalmente, a inclina√ß√£o das "facetas" deve ser ajustada perfeitamente durante a constru√ß√£o, e o n√≠vel de precis√£o exigido √© incrivelmente alto. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° um exemplo desse projetor.</a> <br><br>  Para facilitar, usei outro m√©todo de escaneamento - um espelho em rota√ß√£o constante para formar o escaneamento horizontal e um espelho periodicamente oscilante para o escaneamento vertical. <br><br><h3>  Realiza√ß√£o </h3><br><h4>  Digitaliza√ß√£o horizontal </h4><br>  Onde voc√™ pode encontrar um espelho de rota√ß√£o r√°pida?  Em uma impressora a laser antiga, √© claro!  As impressoras a laser usam um espelho poligonal, colocado em cima de um motor sem escovas, para escanear o feixe de laser ao longo do papel.  O motor √© geralmente colocado no topo da placa de circuito impresso que o controla. <br><br>  Eu j√° tinha um m√≥dulo espelho de uma impressora antiga: <br><br><img src="https://habrastorage.org/webt/es/nv/ya/esnvyasomgnjsv_djsdcjcmomya.jpeg"><br><br>  N√£o consegui encontrar a documenta√ß√£o para o m√≥dulo ou o chip dentro dele; portanto, para determinar o layout dos pinos do m√≥dulo, tive que fazer engenharia reversa.  As linhas de energia s√£o f√°ceis de localizar - elas est√£o conectadas ao √∫nico capacitor eletrol√≠tico na placa de circuito impresso.  Mas simplesmente fornecer energia ao motor n√£o √© suficiente para faz√™-lo girar - voc√™ tamb√©m precisa fornecer um sinal de rel√≥gio para definir a velocidade de rota√ß√£o.  O sinal √© um meandro simples da frequ√™ncia de 20 a 500-1000 Hz. <br><br>  Para encontrar a linha certa, peguei um gerador de impulsos configurado para 100 Hz e o conectei (atrav√©s de um resistor) a todas as linhas dispon√≠veis da porta do m√≥dulo a laser.  Quando o sinal √© fornecido na linha correta, o motor come√ßa a girar.  O espelho gira muito r√°pido para nossos prop√≥sitos - conforme medido posteriormente, ele gira a uma velocidade acima de 250 RPS.  Mas, infelizmente, a rota√ß√£o do motor tornou bastante barulhento.  N√£o √© um problema para minhas experi√™ncias, mas certamente seria percept√≠vel quando o projetor estiver completo e funcionando.  Talvez isso possa ser atenuado usando um m√≥dulo espelho mais recente ou apenas colocando o m√≥dulo em uma caixa. <br><br><h4>  Laser </h4><br>  Para testes preliminares, usei um laser de um ponteiro laser barato.  O m√≥dulo deve ser configurado para ter v√°rios graus de liberdade - para apontar corretamente o laser para o espelho. <br><br><img src="https://habrastorage.org/webt/jj/om/rm/jjomrmbcmdanknftfsoy4en335q.jpeg"><br><br>  Como usamos a varredura raster, a luz do laser √© distribu√≠da por toda a √°rea da imagem, o que torna a imagem bastante fraca - s√≥ √© vis√≠vel no escuro. <br><br>  Ent√£o, muito mais tarde, depois que desenhei com sucesso uma imagem, substitu√≠ o m√≥dulo a laser por um mais poderoso - o diodo a laser de um DVD player. <br><blockquote>  <b>Aviso: os lasers de DVD s√£o muito perigosos e podem ceg√°-lo!</b>  <b>Ao trabalhar com o laser, use √≥culos de prote√ß√£o o tempo todo!</b> </blockquote><br>  Os m√≥dulos laser e espelho poligonal foram colocados em cima de uma pequena prancha de madeira.  Depois de fornecer o sinal de ponto ao motor e a energia ao laser, voc√™ deve apontar o laser de forma que o raio atinja as bordas do espelho.  Como resultado, enquanto o espelho est√° girando, voc√™ obt√©m uma longa linha horizontal. <br><br><h4>  Fotossensor de sincroniza√ß√£o </h4><br>  Para permitir que o microcontrolador rastreie a posi√ß√£o de um feixe de laser em movimento, precisamos de um fotosensor.  Mas, para isso, usei um fotodiodo obstru√≠do por um peda√ßo de papel√£o com um pequeno orif√≠cio no meio.  √â necess√°rio rastrear o momento em que o feixe atinge o fotodiodo com mais precis√£o. <br><br>  Aqui est√° o sistema de montagem do fotodiodo (sem o cart√£o): <br><br><img src="https://habrastorage.org/webt/0e/sc/ps/0escpsgv8qc_g7m_3gx_jfhtvkq.jpeg"><br><br>  Durante a opera√ß√£o normal, o raio laser refletido deve atingir primeiro o fotodiodo, e somente ent√£o - o espelho de varredura vertical. <br><br>  Ap√≥s instalar o sensor, testei-o fornecendo tens√£o atrav√©s do resistor e observando o sinal com um oscilosc√≥pio - sua amplitude era suficiente para conectar o sensor diretamente √† entrada GPIO do microcontrolador. <br><br><h4>  Digitaliza√ß√£o vertical </h4><br>  Como mencionei anteriormente, usei um espelho periodicamente oscilante para formar a varredura vertical.  Como voc√™ dirige isso?  A maneira mais f√°cil √© usar um eletro√≠m√£.  √Äs vezes, as pessoas montam os espelhos em cima dos alto-falantes do computador, mas n√£o √© uma op√ß√£o particularmente desej√°vel (os resultados s√£o inconsistentes, muito dif√≠ceis de calibrar). <br><br>  Na minha constru√ß√£o, usei o motor BLDC de um DVD player para controlar o espelho de varredura vertical.  Como o projetor foi projetado para a sa√≠da de texto, n√£o havia muitas linhas para desenhar, o que significava que o espelho deveria estar apenas ligeiramente inclinado. <br><br>  O motor BLDC consiste em tr√™s bobinas, que juntas formam um estator.  Se uma das bobinas estiver conectada a uma fonte de energia com carga positiva e as outras duas estiverem conectadas alternadamente √† fonte com carga negativa, o rotor do motor tremer√°.  A varredura angular m√°xima √© determinada pela configura√ß√£o do motor, especificamente - o n√∫mero de p√≥los.  Para um motor de DVD, n√£o excede 30 graus.  Como esse motor √© poderoso e f√°cil de controlar (s√£o necess√°rias apenas duas chaves), ele se encaixa muito bem com a nossa finalidade de construir um projetor a laser de texto. <br><br>  √â assim que o motor com um espelho conectado se parece: <br><br><img src="https://habrastorage.org/webt/ta/2n/lz/ta2nlzcapdqar6yt07zn1uapxaa.jpeg"><br><br>  Observe que a superf√≠cie reflexiva do espelho deve estar na frente - ou seja, n√£o √© obstru√≠da pelo vidro. <br><br><h4>  Vis√£o geral </h4><br>  √â assim que o projetor parece montado: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/34d/b49/db4/34db49db473c79f3ff220c47b06e1f26.jpg"></a> <br><br>  O m√≥dulo de proje√ß√£o de perto: <br><br><img src="https://habrastorage.org/webt/9f/s6/st/9fs6stcfnkj-y1-btlsreresfry.jpeg"><br><br>  O espelho poligonal se move no sentido hor√°rio, de modo que o raio laser se move da esquerda para a direita. <br><br>  O poderoso diodo laser de DVD j√° est√° instalado (dentro do colimador).  O espelho de digitaliza√ß√£o vertical √© configurado de forma que a imagem projetada seja apontada para cima - no meu caso, para o teto do meu quarto. <br><br>  Como voc√™ pode ver na figura, o laser e as partes mec√¢nicas do projetor s√£o controlados pelo microcontrolador STM32F103 instalado em uma pequena placa de depura√ß√£o (Blue Pill).  Esta placa est√° instalada na t√°bua de p√£o. <br><br>  Esquema do dispositivo: <br><br><img src="https://habrastorage.org/webt/zm/8c/ou/zm8coube490avwqo6rwe1f28r8c.png"><br><br>  Como mencionei anteriormente, para controlar o motor de espelho poligonal, precisamos de apenas um sinal - o sinal de rel√≥gio (POLY_CLOCK) produzido por um dos temporizadores do STM32 trabalhando no modo PWM.  Sua freq√º√™ncia e taxa de funcionamento permanecem inalteradas enquanto o projetor est√° funcionando.  Para alimentar o motor, eu uso uma fonte de alimenta√ß√£o separada de 12V. <br><br>  Os dois sinais PWM para controlar o espelho de varredura vertical s√£o gerados por outro timer do microcontrolador.  Esses sinais s√£o colocados atrav√©s de um chip ULN2003A que controla o motor do DVD.  Assim, definindo diferentes taxas de servi√ßo para os canais PWM da √©poca, podemos alterar o √¢ngulo de viragem do motor. <br><br>  Infelizmente, a vers√£o atual do projetor n√£o fornece feedback sobre a localiza√ß√£o do espelho.  Isso significa que o microcontrolador pode acionar os espelhos, mas n√£o "sabe" sua posi√ß√£o atual.  A in√©rcia do rotor e a indut√¢ncia das bobinas produzem alguns atrasos na altera√ß√£o da dire√ß√£o da rota√ß√£o. <br><br>  Gra√ßas a tudo isso, h√° duas consequ√™ncias principais: <br><br><ul><li>  A densidade da linha n√£o √© constante, porque a velocidade de rota√ß√£o do espelho n√£o pode ser controlada; </li><li>  Muitas linhas n√£o est√£o operacionais.  O espelho de varredura vertical vacila em ciclos, de modo que algumas linhas podem ser exibidas de cabe√ßa para baixo e outras de cabe√ßa para baixo.  Como resultado, como n√£o podemos rastrear a posi√ß√£o, as linhas s√≥ podem ser exibidas enquanto o motor est√° girando de uma maneira espec√≠fica.  Como apenas metade das linhas est√° sendo exibida, o brilho da imagem √© reduzido pela metade. </li></ul><br>  No entanto, a falta de feedback torna o dispositivo bastante f√°cil de construir. <br><br>  O processo de forma√ß√£o da imagem tamb√©m √© bastante simples: <br><br><ul><li>  Toda vez que o raio laser atinge o fotodiodo, o microcontrolador gera uma interrup√ß√£o.  Nesta interrup√ß√£o, a velocidade de varredura horizontal atual √© calculada pelo MCU.  Depois disso, o timer de sincroniza√ß√£o especial √© redefinido. </li><li>  Esse cron√¥metro de sincroniza√ß√£o gera suas pr√≥prias interrup√ß√µes em momentos espec√≠ficos durante a varredura horizontal. <br></li><li>  Em particular, algum tempo ap√≥s a sincroniza√ß√£o, o sinal de controle do laser precisa ser formado.  Meu dispositivo o forma com um combo DMA + SPI.  Essencialmente, esses m√≥dulos transmitem uma linha da imagem na sa√≠da MOSI SPI no momento certo, um bit de cada vez. </li><li>  Depois que a sa√≠da da imagem terminar, o laser dever√° ser ligado novamente, para que o fotodiodo possa novamente aceitar seu feixe. </li></ul><br>  A modula√ß√£o a laser √© feita atrav√©s de uma das teclas do chip ULN2003A.  O resistor R3 √© necess√°rio para proteger o diodo laser contra sobrecorrente.  Est√° instalado no final do cabo do laser, isolado.  Para alimentar o laser, usei uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte de alimenta√ß√£o</a> externa.  √â importante controlar o consumo de corrente do laser e garantir que ele esteja dentro da faixa aceit√°vel para o diodo laser espec√≠fico. <br><br>  Exemplo de uma imagem (8 linhas de altura): <br><br><img src="https://habrastorage.org/webt/zt/hz/as/zthzas6tt6dssqi7vibtj513ngq.jpeg"><br><br>  O texto est√° um pouco fora de propor√ß√£o porque o projetor aponta para uma parede em √¢ngulo.  Atualmente, todo ciclo de varredura vertical tem 32 etapas (uma etapa significa girar o espelho poligonal em uma borda). <br><br>  O projetor pode exibir 14 linhas distintas: tudo depois disso come√ßa a se misturar com outras linhas, corrompendo a imagem. <br><br>  A foto no in√≠cio tamb√©m usa uma fonte de 8 linhas, o que torna poss√≠vel exibir at√© duas linhas de texto um pouco bem. <br><br>  As fontes 11x7 e 6x4 tamb√©m s√£o suportadas no c√≥digo: <br><br><img src="https://habrastorage.org/webt/h4/jm/ho/h4jmhojg2t2x-620ho09efs09qo.jpeg"><br><br>  Exemplo de "texto em execu√ß√£o": <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7rWy6-go_y8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  O v√≠deo faz a imagem tremer verticalmente, mas n√£o √© vis√≠vel na realidade. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Projeto no GitHub.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt438618/">https://habr.com/ru/post/pt438618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt438602/index.html">Desmontamos o protocolo de mensagens de pager POCSAG, parte 1</a></li>
<li><a href="../pt438604/index.html">Bitrix em um monte de Nginx + PHP-FPM, configurando o CNC, bem como um cache composto com feedback atrav√©s do nginx. Configura√ß√£o modificada</a></li>
<li><a href="../pt438606/index.html">Degrada√ß√£o graciosa. Relat√≥rio Yandex.Taxi</a></li>
<li><a href="../pt438610/index.html">Templates Figma responsivos: Criando um componente de design flex√≠vel para navega√ß√£o m√≥vel iOS</a></li>
<li><a href="../pt438614/index.html">O que √© uma anima√ß√£o ociosa de qualidade? Os desenvolvedores compartilham seus exemplos favoritos.</a></li>
<li><a href="../pt438620/index.html">Meu caminho como desenvolvedor de jogos iniciante</a></li>
<li><a href="../pt438622/index.html">Bonsai: mecanismo wiki da fam√≠lia</a></li>
<li><a href="../pt438624/index.html">N√≥s programamos o interruptor atrav√©s da passagem. MicroPython em esp8266 (sonoff) com OTA. Parte 1</a></li>
<li><a href="../pt438626/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel # 284 (28 de janeiro a 3 de fevereiro)</a></li>
<li><a href="../pt438628/index.html">Notifica√ß√£o de status de altera√ß√£o do componente SharedState</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>