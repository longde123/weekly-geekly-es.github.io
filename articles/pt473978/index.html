<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöñ üí™üèº üòø Tanta dor, tanta dor, caixa registradora como 2: 0 üë®‚Äç‚ù§Ô∏è‚Äçüë® üíÇüèº ‚òÇÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No artigo anterior , falamos sobre como o Anti-Pl√°gio escolheu "nuvens" para si. Nesta palestra, sobre um componente importante da vida de qualquer em...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tanta dor, tanta dor, caixa registradora como 2: 0</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/antiplagiat/blog/473978/">  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> anterior <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">,</a> falamos sobre como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Anti-Pl√°gio</a> escolheu "nuvens" para si.  Nesta palestra, sobre um componente importante da vida de qualquer empresa comercial - receber dinheiro dos clientes. <br><br>  Para receber pagamentos de clientes particulares, sempre usamos os servi√ßos de agregadores.  Primeiro, quer√≠amos diversificar os servi√ßos de aceita√ß√£o de pagamento, e havia requisitos para a emiss√£o de cheques eletr√¥nicos ... Em uma palavra, havia muitos desejos e requisitos de hot√©is, tanto da nossa parte como do estado.  Neste artigo, compartilharemos nossa experi√™ncia e falaremos sobre o ancinho na grama alta que tivemos que pisar e que conseguimos evitar.  Penso que a experi√™ncia descrita pode ser √∫til para todos aqueles que ainda est√£o no in√≠cio do caminho de integrar pagamentos em seu sistema. <br><br><img src="https://habrastorage.org/webt/do/wx/xn/dowxxn1fea6rbsehjclzsyr0v9e.gif" alt="Scrooge McDuck banha em ouro"><br><a name="habracut"></a><br>  <sup>Imagem de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">giphy.com</a></sup> <br><br><h3>  Havia dois caixas alegres na vov√≥ ... </h3><br>  Nossos clientes particulares verificam documentos tr√™s vezes mais corporativos.  Desde o in√≠cio de nossos neg√≥cios e at√© agora, preservamos cuidadosamente a possibilidade de uma busca gratuita de empr√©stimos na Internet.  Os servi√ßos pagos t√™m as seguintes vantagens: <br><ul><li>  maior prioridade ao verificar </li><li>  falta de restri√ß√µes quanto ao n√∫mero de documentos verificados por unidade de tempo; </li><li>  a disponibilidade de uma ampla sele√ß√£o de m√≥dulos de pesquisa para conectar. </li></ul><br><br>  O custo de um servi√ßo pago consiste em dedu√ß√µes de provedores de conte√∫do e os custos de manuten√ß√£o de uma infraestrutura de auditoria (incluindo gratuitas) para clientes particulares. <br><br>  Agora, uma verifica√ß√£o na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cole√ß√£o conjunta</a> (OK), que inclui todos os m√≥dulos de pesquisa poss√≠veis, custa 270 rublos.  As verifica√ß√µes √∫nicas s√£o suficientes para usu√°rios comuns e, para usu√°rios comuns, a verifica√ß√£o n√£o √© muito cara.  Aqueles que verificam massivamente, dividimos condicionalmente para n√≥s mesmos em duas classes: honesto e desonesto.  Se esta √© uma organiza√ß√£o que se dedica √† educa√ß√£o ou precisa de um servi√ßo de verificador de empr√©stimos para controlar a qualidade do trabalho cient√≠fico ou outro trabalho textual, oferecemos-nos nossos clientes corporativos, o que reduz os custos do cliente em termos de um cheque.  Para "sintonizadores" e gravadores personalizados (adivinhe a que categoria eles pertencem), o caminho para o segmento corporativo est√° fechado.  Esse √© o nosso princ√≠pio, n√£o conclu√≠mos contratos com empresas duvidosas, em nossa opini√£o.  Tamb√©m controlamos as atividades de nossos clientes para impedir o uso de contas corporativas para fins "comerciais" (heur√≠stica, aprendizado de m√°quina, isso √© tudo).  Em nossa hist√≥ria, houve v√°rias rescis√µes de contratos depois que descobrimos que o cliente n√£o era o que ele alegava ser.  Infelizmente, n√£o podemos concluir um contrato com cada usu√°rio particular; portanto, uma oferta √© usada para eles.  Isso √© conveniente para usu√°rios particulares, mas, ao mesmo tempo, n√£o podemos controlar quem usa o acesso pago, pois uma loja n√£o pode proibir a compra de mercadorias em exibi√ß√£o dele.  O custo das inspe√ß√µes em <b>massa</b> para clientes particulares aumentar√° constantemente.  Assim, fazemos o trabalho de escrever para pedir um prazer caro e aderimos √† nossa miss√£o de melhorar a educa√ß√£o na R√∫ssia e no mundo. <br><br><h3>  Como tudo come√ßou </h3><br>  Nosso servi√ßo transferiu alguns dos servi√ßos anteriormente gratuitos para clientes particulares para a categoria de servi√ßos pagos em 4 de maio de 2010.  At√© o momento, toda a funcionalidade estava totalmente dispon√≠vel, apenas verifica√ß√µes de cole√ß√µes externas eram pagas, pelas quais, por sua vez, pagamos os pr√≥prios provedores de conte√∫do.  Fizemos um servi√ßo pago a forma√ß√£o de um relat√≥rio completo.  Obviamente, os usu√°rios ficaram insatisfeitos e calcularam com facilidade nossas receitas fabulosas. <br><img src="https://habrastorage.org/webt/ax/_e/3i/ax_e3ink6re2jpswyruihd_cbyg.png"><br><img src="https://habrastorage.org/webt/wm/k6/w0/wmk6w09zdva7ubl7e0lmlvx7dq4.png"><br>  <sup>Capturas de tela das declara√ß√µes de abril a maio de 2010 do nosso f√≥rum.</sup> <br><br>  Infelizmente, ainda n√£o tenho im√≥veis em Chipre, apesar de ter escrito a primeira vers√£o do faturamento. <br><br><h3>  Primeiro toque do rob√¥ </h3><br>  Para lan√ßar pagamentos em massa, usamos uma solu√ß√£o j√° comprovada - integra√ß√£o com Robokassa (RK).  At√© 4 de maio de 2010, aceit√°vamos pagamentos para exames de disserta√ß√µes e documentos legais.  O servi√ßo RK nos convinha.  A integra√ß√£o era t√£o simples quanto as botas de feltro; do nosso lado, t√≠nhamos que fazer o m√≠nimo: basta redirecionar para o site do checkout e o manipulador de retorno de chamada sobre o status do pagamento.  O cen√°rio de a√ß√£o padr√£o do usu√°rio foi o seguinte: <br><ol><li>  O usu√°rio seleciona um produto no site e clica no bot√£o pagar. </li><li>  O site (com a participa√ß√£o do servi√ßo de cobran√ßa, mas isso n√£o √© t√£o importante no contexto atual) √© redirecionado para o servi√ßo Robokassa, indicando o identificador da loja, o produto e o valor do pagamento. </li><li>  O usu√°rio no site paga pelos produtos. </li><li>  O servi√ßo de caixa eletr√¥nico aceita o dinheiro e nos notifica do pagamento por meio de uma chamada de retorno (retorno de chamada, em russo). </li><li>  ... m√°gica est√° acontecendo aqui ... </li><li>  Lucro !!!  O dinheiro √© transferido para a conta da empresa menos a comiss√£o. </li></ol><br><br>  Tudo foi configurado e funcionou por anos.  E como voc√™ sabe: funciona - n√£o toque!  N√£o poderia durar para sempre, eu tive que mudar alguma coisa. <br><br><h3>  Y (et) a (outro) </h3><br>  Vivemos um tempo turbulento de mudan√ßa e oportunidade.  No final de dezembro de 2015, o processo de revoga√ß√£o de licen√ßas dos bancos estava em pleno andamento e, como qualquer sistema de pagamento est√° vinculado a um banco, decidimos que precis√°vamos de uma op√ß√£o de backup.  O plano B n√£o nos permitir√°, em algum momento, permanecer sem a capacidade de aceitar pagamentos.  Dos agregadores de pagamentos mais ou menos grandes, a escolha recaiu sobre o Yandex.Kassa (Yak).  A tarefa foi realizada em tempo recorde, nos √∫ltimos 3 dias de dezembro, e sa√≠mos de f√©rias com a traseira coberta.  A prop√≥sito, os riscos em rela√ß√£o ao Cazaquist√£o n√£o foram realizados, mas temos um sistema de pagamento alternativo.  N√£o jogue fora!  Desde ent√£o, eles trabalham juntos.  Dois gansos engra√ßados! <br><br><h3>  Experi√™ncia ainda n√£o aplicada </h3><br>  Como j√° escrevi, queremos desenvolver o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Anti-Pl√°gio</a> e ser menos distra√≠dos com as coisas paralelas.  Servi√ßos pagos para clientes particulares √© uma oportunidade para continuar a fornecer servi√ßos gratuitos. <br>  Aconteceu que implementamos a integra√ß√£o da maneira mais simples poss√≠vel que cada um dos agregadores de pagamento ofereceu.  Portanto, temos uma p√°gina de pagamento muito clara com dois mecanismos diferentes para duas mesas de dinheiro diferentes. <br><img src="https://habrastorage.org/webt/_l/aw/qb/_lawqbmeglh0evm4ko8eabrckc0.png"><br><br>  Para a Rep√∫blica do Cazaquist√£o, a escolha do m√©todo de pagamento ocorre ap√≥s acessar a p√°gina do agregador, para UC - em nossa p√°gina, antes da transi√ß√£o.  Para entender a correla√ß√£o do perfil de pagamento com a carga abaixo, azul √© a parcela do dinheiro recebido pelo Cazaquist√£o e laranja √© o n√∫mero de cheques pagos. <br><img src="https://habrastorage.org/webt/hf/v6/gf/hfv6gfdhvhbbaotpa_xcsxsxwng.png"><br><br>  Portanto, sem realmente nos preocuparmos com a implementa√ß√£o, testamos a usabilidade de duas op√ß√µes para interfaces de pagamento.  Parece que os usu√°rios preferem a op√ß√£o de UC.  Explos√µes acima de 50% s√£o caracter√≠sticas do in√≠cio do uso da UC e per√≠odos do ano com pouco carregamento, quando o n√∫mero de pagamentos √© menor.  Aparentemente, neste momento, o fato de o RC estar localizado mais alto e ser selecionado por padr√£o √© mais afetado. <br><br><h3>  Atol de Babusya FF Dekhovna </h3><br>  Fa√ßa imediatamente uma reserva: n√£o violamos as leis da f√≠sica e a Federa√ß√£o Russa.  Portanto, juntamente com todos, come√ßaram a procurar uma solu√ß√£o para emitir cheques a partir de 1¬∫ de julho de 2017, de acordo com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lei Federal n¬∫ 290</a> .  Pesquisado com anteced√™ncia, apenas durante a pr√≥xima sess√£o da primavera.  Imediatamente ficou √≥bvio que n√£o estar√≠amos colocando o caixa e sacando os cheques manualmente. <br>  No prazo estabelecido pelo estado, n√≥s, como muitas empresas do pa√≠s, n√£o cumprimos o prazo.  Isso aconteceu pelo motivo prosaico da falta de um escrit√≥rio de reservas on-line como um servi√ßo.  Naquela √©poca, muitos ofereceram v√°rias outras op√ß√µes.  Por exemplo, em Robokassa, havia uma op√ß√£o com a venda de seus produtos em sua loja.  De alguma forma, n√£o parecia muito.  Acima de tudo, ficamos impressionados com a abordagem KaaS - checkout como um servi√ßo.  Um dos primeiros (se n√£o o primeiro) tal servi√ßo foi oferecido pela Atol. <br>  Apesar da empolga√ß√£o, rapidamente conclu√≠mos um contrato, compramos e registramos uma unidade fiscal - uma unidade flash especial para armazenar todas as transa√ß√µes que foram eliminadas pela caixa registradora. <br>  Era indicativo que nossos gansos quase imediatamente come√ßaram a apoiar a integra√ß√£o com o Babusey-Atol.  Como a hist√≥ria diz: come√ßamos a viver, viver e fazer as coisas boas. <br><br><h3>  Transi√ß√£o para o FFD 1.05 </h3><br>  Todo mundo sabe que √© necess√°rio come√ßar uma nova vida em 1¬∫ de janeiro (assim que voc√™ acordar, sim).  √â verdade que esse claramente n√£o √© o melhor momento para introduzir altera√ß√µes legislativas.  No entanto, a partir de 1¬∫ de janeiro de 2019, todos tivemos que mudar para a nova vers√£o do formato de documento fiscal (FFD) 1.05.  As mudan√ßas s√£o baratas, mas ainda tremo com as lembran√ßas dos eventos desta atualiza√ß√£o. <br><br>  O estudo da quest√£o mostrou que √© necess√°rio adicionar apenas dois par√¢metros aos valores transferidos: o objeto de c√°lculo (payment_object, payment_subject) e o m√©todo de c√°lculo (payment_method, payment_mode).  Para o nosso √∫nico produto, a pontua√ß√£o do Anti-Pl√°gio, indicando que este par de par√¢metros n√£o custa nada.  Aqui est√° um esbo√ßo simples do plano para alcan√ßar a meta Go to FFD Support v1.05: <br><ol><li>  Refine o site para que ele passe algumas novas constantes nas solicita√ß√µes; </li><li>  Verifique com os agregadores que eles entendem e aceitam tudo isso; </li><li>  Alterne no formato Atole FFD para a vers√£o 1.05; </li><li>  ... m√°gica est√° acontecendo aqui ... </li><li>  Lucro !!! </li></ol><br><br>  Os par√¢metros n√£o mudam no tempo e n√£o dependem de nada, definido uma vez - e isso √© tudo, um brinde.  Ent√£o eles pensaram que, de fato, tudo acabou n√£o sendo t√£o f√°cil ... O que poderia ter dado errado? <br><ol><li>  O departamento de desenvolvimento finalizou o site do Anti-Pl√°gio, n√≥s o lan√ßamos no prod.  Verificamos com nosso suporte t√©cnico e especialistas dos dois agregadores se tudo funciona e que os novos dados s√£o transmitidos corretamente. </li><li>  No processo de mudan√ßa, um dos agregadores viu novas informa√ß√µes: o valor do campo "site" deve coincidir simbolicamente com o valor especificado em Atola (WTF <sub>1</sub> - por que o requisito para essa coincid√™ncia, porque existe um INN e todo o tipo de outras coisas?) muito importante </li><li>  Ok, vamos mudar.  No Atola, em uma p√°gina da sua conta, h√° um campo com o endere√ßo do site e uma atualiza√ß√£o sobre a transi√ß√£o para o FFD vers√£o 1.05.  √ìtimo!  Estou mudando o site para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.antiplagiat.ru</a> (removi o http que estava l√° antes, adicionei o www) e dei um pulo na transi√ß√£o para a vers√£o 1.05 do FFD.  Tr√™s dias √∫teis para uma mudan√ßa (WTF <sub>2</sub> - √© realmente que um engenheiro vai pessoalmente para l√° e muda o firmware do caixa?)!  Nuuuuu aprox.  At√© agora, exporemos os mesmos valores de site nos agregadores.  Changed.  √â isso, estamos aguardando a altera√ß√£o na 1.05. </li><li>  Na manh√£ seguinte, recebo informa√ß√µes de que os cheques n√£o foram vencidos.  O atol conseguiu mais de tr√™s dias √∫teis e alterou a vers√£o do FFD, mas n√£o mudou o endere√ßo do site: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">antiplagiat.ru</a> (WTF <sub>3</sub> - como est√°?!?! Voc√™ muda o site com as m√£os em algum lugar?).  Ao alterar o endere√ßo do site, a pr√≥pria RK adicionou discretamente "http: //": <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.antiplagiat.ru</a> (WTF <sub>4</sub> - Queria que o cheque fosse menor e sem protocolo, mas n√£o funcionaria por causa de um agregador).  Yak como bem feito, tudo funcionou como deveria <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.antiplagiat.ru</a> .  Total - as verifica√ß√µes n√£o s√£o gravadas em nenhum dos agregadores, porque em todo lugar existe um nome diferente para o site.  Mas eu fiz especificamente o mesmo no dia anterior! </li><li>  Juro com todos no telefone, o Atol √© bonito, eles t√™m uma taxa por qualquer solicita√ß√£o: 3 dias √∫teis.  Eu desligo o RK, porque eles n√£o podem mudar o site para o que est√° atualmente registrado no Atola, porque o site deve estar com http ou https.  Estou mudando o site na UC para o que est√° agora em Atola (o benef√≠cio est√° mudando rapidamente para l√° e n√£o h√° requisito de http).  Viva, cheques come√ßam a ser escritos!  O atol acabou motivado pelo meu discurso no telefone e em meia hora muda o site para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.antiplagiat.ru</a> (este formato √© adequado para a Rep√∫blica do Cazaquist√£o).  Neste momento, o cancelamento dos cheques da UC deixa de funcionar, porque  l√° o site antigo √© registrado.  Eu mudo atrav√©s da minha conta pessoal, n√£o muda, ligo para TP, eles mudam.  Ligue o RK. </li><li>  Parece que funciona em todos os lugares.  Resta lidar com cheques n√£o escritos.  Existem v√°rias centenas deles.  RK - a pedido do telefone, executa todos os seus com o novo valor do site, eles passam.  YAK: <br><img src="https://habrastorage.org/webt/2a/04/hf/2a04hfxucefoccm-fcx_4kqx9ym.jpeg">  <sup>Gato do nosso funcion√°rio</sup> <br>  Explica√ß√£o: enviamos o cheque ao Atoll, ele retornou para n√≥s, dizem eles, o cheque est√° incorreto.  Armazenamos essas informa√ß√µes conosco e agora nada pode ser feito com elas (WTF <sub>5</sub> - ainda me mata, como se o sistema deles n√£o fosse o seu).  29 de dezembro - um s√°bado de trabalho (WTF <sub>6</sub> - mas j√° √© um h√°bito, dezembro foi bem-sucedido para a dor, lembre-se do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> anterior, a a√ß√£o com nuvens ocorre paralelamente), n√£o √© o melhor dia para os procedimentos.  O que fazer com os cheques sem carimbo, vamos pensar em janeiro. </li><li>  Tudo funciona bem, com uma alma calma, vamos comemorar o ano novo.  29 de dezembro, √†s 20 horas, trai√ßoeiramente, sem declarar guerra, a UC muda o endere√ßo do site para outro.  Os cheques atrav√©s deles deixam de ser escritos. </li></ol><br><br>  Por que eles fizeram isso, eles n√£o conseguiram explicar.  Eles disseram algo sobre uma carta de Atola.  Aparentemente, esse casal queria fazer o melhor.  A Atol cuidou daqueles que n√£o estavam cientes desse requisito, pois o endere√ßo do site no agregador de pagamentos e na caixa eletr√¥nica n√£o correspondia.  Apenas os dados eram antigos, pelo menos a partir da manh√£ de 29 de dezembro. <br><br>  Na manh√£ de 10 de janeiro, temos um monte de cartas em uma caixa com mensagens da UC sobre erros na execu√ß√£o de cheques.  Grande come√ßo de ano!  Eles n√£o podem reconhecer e se (!) Encaminhar esses cheques para o Atol (bem, eles podem, quando querem).  Al√©m deste caso, n√£o foi poss√≠vel reenviar cheques UC mais de uma vez.  Pelo contr√°rio, eles me convenceram de que era imposs√≠vel!  O que precisa ser feito para ainda preencher um cheque?  Certo, dirija com as m√£os!  Em Atola, chegamos a uma p√°gina com uma d√∫zia de campos que precisam ser preenchidos.  Cheio, bem, bem, um cheque nocauteado.  Na pr√≥xima verifica√ß√£o, voc√™ precisar√° preencher tudo da mesma maneira (exceto alguns campos) novamente! <br>  Temos um monte de cartas com erros, precisamos eliminar os cheques.  Escrevemos um script que recebe cartas da UC e bate no cheque no Atoll usando-as.  Coloque na m√°quina.  Um pouco, mas se o cheque n√£o for vencido, isso √© uma viola√ß√£o da lei.  Eu tive que descobrir como tudo funciona em Athol.  Por que a UC n√£o pode enviar o cheque de lado n√£o est√° claro.  O script est√° em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio</a> p√∫blico rec√©m-criado no Github. <br><br><h3>  Yandex.Documentation contradit√≥rio </h3><br>  H√° muita documenta√ß√£o na UC, √© com belas fotos e capturas de tela.  Parece, use e se alegrar√°.  Vamos ver o que est√° escrito sobre a intera√ß√£o com as bilheterias: <br><br><img src="https://habrastorage.org/webt/bb/uh/7r/bbuh7rt35l05u5p0rbqvciuyuuc.png"><br>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Captura de tela</a> realizada em 30/10/2019.</sup> <br><br>  Na etapa 5, algumas vezes o Atol informa que nem tudo est√° bem com o cheque e, em nossa conta, o pagamento com o status "Aceito" √© exibido, mas sem um cheque.  Isso ocorre porque a maneira recomendada de enviar cheques com "3 dias de anteced√™ncia" est√° selecionada. <br><br><img src="https://habrastorage.org/webt/3_/uk/3b/3_uk3b-i9icsa6qzkxbvryhutpc.png"><br>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configura√ß√µes de</a> pagamento on-line, op√ß√£o "Com a nossa ajuda".</sup>  <sup>Captura de tela realizada em 30/10/2019.</sup> <br><br>  E, novamente, o quinto ponto, cuja descri√ß√£o n√£o funciona exatamente como descrito.  Pressionar um bot√£o na sua conta pessoal n√£o altera nada no status do cheque (consultado com o suporte t√©cnico, ela confirmou).  O cheque ainda n√£o est√° quebrado.  Pode ser eliminado manualmente.  Talvez escolha "5 minutos"?  Vamos ver o que est√° escrito na ajuda da sua conta. <br><img src="https://habrastorage.org/webt/zv/1w/0j/zv1w0jx-n7o5kdx9gcjzpng-f08.png"><br><br>  <sup>Captura de tela da sua conta pessoal.</sup> <br><br>  Acontece que para n√≥s o m√©todo "Por 3 dias" n√£o √© apenas recomendado, √© obrigat√≥rio! <br><br><h3>  Conclus√µes </h3><br>  <b>Atol.</b>  Nem tudo √© automatizado, muito √© feito √† m√£o.  Podemos ver qu√£o lenta, mas seguramente, a interface da conta pessoal est√° ficando rica.  A taxa padr√£o para qualquer altera√ß√£o √© de 3 dias √∫teis.  √Äs vezes, eles oferecem cheques para n√≥s, mas por algum motivo eles nunca os dirigiram.  Para acelerar a solu√ß√£o da solicita√ß√£o em resposta √† mensagem sobre a cria√ß√£o do ticket, voc√™ precisa enviar o TIN para a organiza√ß√£o (mesmo que j√° esteja no corpo do recurso), eles t√™m um aumento de prioridade automatizado, aparentemente dessa maneira. <br><br>  <b>Yandex.Cash.</b>  Eles n√£o podem reenviar a verifica√ß√£o em caso de problemas do lado do Atol.  Outros podem, n√£o querem, mas na realidade podem, mas provavelmente n√£o querem.  Eu tive que escrever um roteiro para eles.  H√° muita documenta√ß√£o e, provavelmente, √© inconsistente. <br><br>  <b>Robokassa.</b>  Por alguma raz√£o, eles melhoram o endere√ßo da web da loja, enquanto fazem isso completamente despercebido.  O resto s√£o caras ador√°veis. <br><br>  <b>STF.</b>  Hora original para implementa√ß√£o das mudan√ßas.  Leis e requisitos n√£o bem pensados.  Agora, as caixas registradoras eletr√¥nicas s√£o id√™nticas √†s f√≠sicas comuns.  Se em um pagamento da loja offline e em um cheque for efetuado por um dispositivo e esses dois procedimentos passam quase como uma √∫nica transa√ß√£o, ent√£o no mundo online tudo √© diferente.  O pagamento √© aceito por um servi√ßo, mas o cheque √© eliminado por outro.  Por analogia com as caixas registradoras offline para eliminar um cheque, √© concedido n√£o mais que 5 minutos.  Mais detalhes podem ser lidos, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h3>  Li√ß√µes aprendidas </h3><br>  Parece insignificante, mas por causa desses insignificantes, eu tive que gastar cerca de 60 horas no exposto acima e no desenvolvimento / depura√ß√£o do script.  Mesmo dois grandes agregadores de pagamento nacionais, juntamente com um grande provedor KaaS, n√£o podem prestar um servi√ßo no qual um usu√°rio comum receber√° o servi√ßo, entendendo minimamente a √°rea de assunto.  √â muito triste que, com qualquer altera√ß√£o, mesmo que insignificante, voc√™ tenha que estar em alerta no formato e, como resultado, fazer backup de tudo com suas pr√≥prias muletas escritas √† m√£o. <br><br>  A prop√≥sito, na rotina usual, ambas as empresas fornecem suporte t√©cnico de alta qualidade e o pr√≥prio servi√ßo.  √â f√°cil ficar ao telefone com um t√©cnico por uma hora, depurando algo ou descobrindo as causas de certas falhas devido √† falha dos sistemas de pagamento.  Tudo est√° bem com a documenta√ß√£o, com confiabilidade.  O Yandex.Kassa alerta cuidadosamente sobre todas as falhas nos sistemas de pagamento e sobre o seu pr√≥prio trabalho programado.  O caixa n√£o foi visto nessas correspond√™ncias, mas h√° menos reclama√ß√µes de nossos clientes sobre pagamentos problem√°ticos por meio dele, o que significa que tamb√©m n√£o h√° per√≠odos de inatividade. <br><br>  O que fazer depois?  No horizonte, apareceu o retorno do projeto para otimizar a escolha do agregador, dependendo da forma de pagamento escolhida pelo usu√°rio.  Talvez, nesse contexto, seja poss√≠vel conectar-se a v√°rios outros provedores (espero novos "OMG! Por que isso √© feito?!" E raz√µes para artigos sobre a dor).  Devido √† forte desigualdade do volume de pagamentos ao longo de um ano, uma tarefa interessante pode surgir para otimizar a coleta de v√°rias mochilas: qual usu√°rio deve ser enviado para onde pagar, a fim de minimizar perdas em comiss√µes e descontos para pagamentos mensais.  Se algu√©m j√° teve essa experi√™ncia e se o jogo vale a pena, compartilhe nos coment√°rios! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473978/">https://habr.com/ru/post/pt473978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473962/index.html">O modo escuro est√° agora em todo lugar. Isso √© t√£o √∫til? (no final da p√≥s-pesquisa)</a></li>
<li><a href="../pt473966/index.html">A pedido dos desenvolvedores incorporados: detectando erros no Amazon FreeRTOS</a></li>
<li><a href="../pt473972/index.html">Por ordem dos desenvolvedores incorporados: procurando bugs no Amazon FreeRTOS</a></li>
<li><a href="../pt473974/index.html">Intercom'19 - uma confer√™ncia sobre automa√ß√£o de comunica√ß√µes da Voximplant ser√° realizada em 14 de novembro</a></li>
<li><a href="../pt473976/index.html">AWS Elasticsearch: produto fundamentalmente defeituoso</a></li>
<li><a href="../pt473980/index.html">Tecnologia e o mundo real: 4 startups que est√£o mudando o futuro do design de interiores</a></li>
<li><a href="../pt473982/index.html">NB-IoT: como funciona? Parte 3: SCEF - uma √∫nica janela de acesso aos servi√ßos do operador</a></li>
<li><a href="../pt473984/index.html">Data Science Digest (outubro de 2019)</a></li>
<li><a href="../pt473986/index.html">‚ÄúMeu sonho √© ver uma pessoa atrav√©s das √°rvores‚Äù - fundadora da Lisa Alert sobre as modernas tecnologias de pesquisa</a></li>
<li><a href="../pt473988/index.html">Otimizando a Distribui√ß√£o do Servidor nos Racks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>