<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏻 ♒️ 😩 Definisi angka berdasarkan telinga: implementasi pada Arduino 🔝 👍🏻 👩🏽‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel ini, saya akan terus mewujudkan inspirasi saya dalam pekerjaan laboratorium No. 3 yang sudah di setrika. Kita berbicara tentang mendetek...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Definisi angka berdasarkan telinga: implementasi pada Arduino</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432498/">  Dalam artikel ini, saya akan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terus</a> mewujudkan inspirasi saya dalam pekerjaan laboratorium No. 3 yang sudah di setrika.  Kita berbicara tentang mendeteksi angka dengan suara dalam mode panggilan nada pada Arduino menggunakan algoritma Goertzel. <br><a name="habracut"></a><br>  Untuk mengimplementasikan ini, saya menggunakan Arduino UNO, mikrofon electret ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">adafruit</a> ) dan layar 8x8 dengan driver MAX7219. <br><br><h4>  Rencana aksi </h4><br><ul><li>  Diskritkan jumlah sampel yang cukup (menggunakan program dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> saya yakin 256 sudah cukup). </li><li>  Temukan amplitudo dari respons frekuensi yang sesuai dengan frekuensi yang diinginkan yang menyandikan karakter. </li><li>  Dua nilai maksimum amplitudo akan memberikan indeks baris dan kolom dari karakter yang diinginkan, misalnya, seperti gambar 3. <br><img src="https://habrastorage.org/webt/xd/si/op/xdsiopj44xnnd-yoabyii7_mjz8.png" alt="gambar"><br></li></ul><br><h4>  Implementasi </h4><br>  Sebelum memulai implementasi, kami menjawab pertanyaan - apakah Arduino UNO memiliki kinerja yang cukup untuk kami? <br><br>  Frekuensi Jam: 16MHz <br>  Satu siklus pengambilan sampel membutuhkan 13 siklus clock <br>  Nilai prescaler memberikan akurasi paling tinggi: 128 <br><br>  Ternyata 16 MHz / 13/128 ~ 9615 Hz - frekuensi sampling yang diinginkan, yang berarti Anda dapat bekerja dengan frekuensi hingga 4,8 kHz. <br><br><h4>  Tuning ADC </h4><br>  Ada beberapa mode operasi ADC, yang paling menarik tercantum di bawah ini (daftar lengkap dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">datasheet</a> untuk kata kunci ADCSRB) <br><br><ul><li>  baca tunggal - menggunakan metode analogRead (), tetapi ini adalah panggilan pemblokiran yang membutuhkan 100μs, dan menggunakannya tidak mungkin untuk memberikan laju pengambilan sampel yang konstan </li><li>  mode bebas lari - dalam mode ini, siklus pengambilan sampel berikutnya dimulai segera setelah akhir yang sebelumnya dan frekuensi pengambilan sampel maksimum disediakan </li><li>  timer overflow - sampling dimulai dengan timer overflow, ini memungkinkan Anda untuk menyempurnakan frekuensi sampling </li></ul><br>  Kode pengaturan ADC, untuk kesederhanaan saya menggunakan mode bebas-lari. <br><br><pre><code class="cpp hljs">ADMUX = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Channel sel, right-adj, use AREF pin ADCSRA = _BV(ADEN) | // ADC enable _BV(ADSC) | // ADC start _BV(ADATE) | // Auto trigger _BV(ADIE) | // Interrupt enable _BV(ADPS2) | _BV(ADPS1) | _BV(ADPS0); // 128:1 / 13 = 9615 Hz ADCSRB = 0; // Free-run mode DIDR0 = _BV(0); // Turn off digital input for ADC pin TIMSK0 = 0; // Timer0 off</span></span></code> </pre> <br><h4>  Pemrosesan sinyal </h4><br>  Segera setelah array penuh sampel diketik, kami mematikan interupsi oleh ADC dan menghitung amplitudo spektrum menggunakan algoritma Goertzel.  Saya tidak akan bersaing dalam deskripsi algoritma dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sumber daya yang</a> lengkap ini, tetapi saya akan memberikan implementasi saya: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goertzel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *samples, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *spectrum)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> v_0, v_1, v_2; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> re, im, amp; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; IX_LEN; k++) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span> = pgm_read_float(&amp;(<span class="hljs-keyword"><span class="hljs-keyword">cos_t</span></span>[k])); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span> = pgm_read_float(&amp;(<span class="hljs-keyword"><span class="hljs-keyword">sin_t</span></span>[k])); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a = <span class="hljs-number"><span class="hljs-number">2.</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>; v_0 = v_1 = v_2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; N; i++) { v_0 = v_1; v_1 = v_2; v_2 = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(samples[i]) + a * v_1 - v_0; } re = <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span> * v_2 - v_1; im = <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span> * v_2; amp = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(re * re + im * im); spectrum[k] = amp; } }</code> </pre><br>  Sine dan cosinus sebelumnya dihitung untuk sampel yang sesuai dengan frekuensi yang diinginkan.  Versi lengkap kode ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><h4>  Kesimpulan </h4><br>  Yang paling penting, ternyata dan sumber daya UNO Arduino cukup untuk pemrosesan suara yang sederhana. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vfhiGLL-tyk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Pelajaran utama yang saya pelajari bahwa ADC adalah hal yang sensitif, setelah berhasil mengenali dan mengirim karakter ke konsol, saya menghabiskan satu minggu men-debug-nya untuk bekerja dengan tampilan, karena saya menghubungkan ground mikrofon dan max7219 dan semua sampel langsung berubah menjadi noise. <br><br>  Mungkinkah ini lebih baik?  Ya, akan lebih tepat untuk memilih frekuensi sampling dan jumlah sampel sehingga frekuensi yang diinginkan bertepatan dengan kisi sampling, ini akan mencegah penyebaran spektrum.  Parameter tersebut sudah f = 8 kHz, N = 205, dalam hal ini Anda perlu menjalankan ADC tidak dalam mode bebas-lari, tetapi timer meluap, dan perbedaannya akan jelas. <br><br><img src="https://habrastorage.org/webt/_k/5o/rq/_k5orqgso4b-s8ee1ibvfdyms3s.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kursus</a> ini hampir berakhir, tetapi masih ada banyak ide. <br>  Terima kasih atas perhatian anda </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id432498/">https://habr.com/ru/post/id432498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id432486/index.html">Mengapa mengendarai mobil adalah tantangan bahkan untuk AI</a></li>
<li><a href="../id432488/index.html">Apa yang saya tidak suka di C dan C ++</a></li>
<li><a href="../id432492/index.html">5 buku yang disarankan oleh Bill Gates pada tahun 2018</a></li>
<li><a href="../id432494/index.html">IntelliCode sekarang juga dalam TypeScript / JavaScript</a></li>
<li><a href="../id432496/index.html">Konferensi DEFCON 18. Anda telah menghabiskan semua uang ini, tetapi mereka terus memiliki Anda. Bagian 2</a></li>
<li><a href="../id432500/index.html">Sertifikasi PMP: Audit Aplikasi</a></li>
<li><a href="../id432502/index.html">Internet mungkin memiliki masalah serius karena bahasa seperti C dan C ++ yang berkontribusi terhadap kerentanan</a></li>
<li><a href="../id432506/index.html">Microsoft Connect (); 2018: semua pengumuman konferensi cloud</a></li>
<li><a href="../id432508/index.html">Tentang hambatan penggunaan sistem tanda dalam kecerdasan buatan</a></li>
<li><a href="../id432510/index.html">Pangsa pasar Norwegia untuk kendaraan listrik plug-in hampir mencapai ketinggian baru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>