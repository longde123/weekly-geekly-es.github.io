<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßó üè¨ üèê Fonctionnement des lapins (RabbitMQ) dans le mode "Survivre √† tout prix" üíÜüèø üëâüèø üë®üèª‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="" Entreprise " - op√©rateur t√©l√©com PJSC "Megafon" 
 " Noda " est le serveur RabbitMQ. 
 Un ¬´ cluster ¬ª est une combinaison, dans notre cas de trois, d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fonctionnement des lapins (RabbitMQ) dans le mode "Survivre √† tout prix"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434016/">  " <b>Entreprise</b> " - op√©rateur t√©l√©com PJSC "Megafon" <br>  " <b>Noda</b> " est le serveur RabbitMQ. <br>  Un ¬´ <b>cluster</b> ¬ª est une combinaison, dans notre cas de trois, de n≈ìuds RabbitMQ fonctionnant dans leur ensemble. <br>  ¬´ <b>Contour</b> ¬ª - un ensemble de clusters RabbitMQ, dont les r√®gles de travail sont d√©termin√©es sur l'√©quilibreur en face d'eux. <br>  " <b>Balancer</b> ", " <b>hap</b> " - Haproxy - √©quilibreur qui remplit la fonction de commutation de la charge sur les clusters dans la boucle.  Une paire de serveurs Haproxy fonctionnant en parall√®le est utilis√©e pour chaque boucle. <br>  " <b>Sous-syst√®me</b> " - l'√©diteur et / ou consommateur de messages transmis par le lapin <br>  " <b>SYSTEM</b> " - un ensemble de sous-syst√®mes, qui est une solution logicielle et mat√©rielle unique utilis√©e par la soci√©t√©, caract√©ris√©e par sa distribution dans toute la Russie, mais avec plusieurs centres o√π toutes les informations circulent et o√π les principaux calculs et calculs ont lieu. <br>  <b>SYST√àME</b> - un syst√®me g√©ographiquement r√©parti - de Khabarovsk et Vladivostok √† Saint-P√©tersbourg et Krasnodar.  Sur le plan architectural, il s'agit de plusieurs contours centraux, divis√©s par les caract√©ristiques des sous-syst√®mes qui leur sont connect√©s. <br><a name="habracut"></a><br><h3>  Quelle est la mission du transport dans les r√©alit√©s des t√©l√©coms? </h3><br>  En bref: la r√©ponse des sous-syst√®mes √† l'action de chaque abonn√© suit, qui √† son tour informe les autres sous-syst√®mes des √©v√©nements et des changements ult√©rieurs.  Les messages sont g√©n√©r√©s par toutes les actions avec le SYST√àME, non seulement des abonn√©s, mais aussi du c√¥t√© des employ√©s de la Soci√©t√© et des sous-syst√®mes (un tr√®s grand nombre de t√¢ches sont effectu√©es automatiquement). <br><br>  Caract√©ristiques du transport dans les t√©l√©communications: grand, pas de mal, GRAND flux de donn√©es diverses transmises par transport asynchrone. <br><br>  Certains sous-syst√®mes vivent sur des clusters s√©par√©s en raison de la lourdeur des flux de messages - il n'y a tout simplement plus de ressources sur le cluster, par exemple, avec un flux de messages de 5-6 mille messages / seconde, la quantit√© de donn√©es transf√©r√©es peut atteindre 170-190 m√©gaoctets / seconde.  Avec un tel profil de charge, une tentative de d√©barquer quelqu'un d'autre sur ce cluster entra√Ænera de tristes cons√©quences: comme il n'y a pas assez de ressources pour traiter toutes les donn√©es en m√™me temps, le lapin commencera √† conduire les connexions entrantes dans un <b>flux</b> - un processus de publication simple commencera, avec toutes les cons√©quences pour tous les sous-syst√®mes et syst√®mes dans ensemble. <br><br>  Exigences de base pour le transport: <br><br><ol><li>  L'accessibilit√© des v√©hicules devrait √™tre de 99,99%.  En pratique, cela se traduit par une exigence op√©rationnelle 24/7 et la capacit√© de r√©pondre automatiquement √† toutes les situations d'urgence. </li><li>  S√©curit√© des donn√©es: le pourcentage de messages perdus sur le transport devrait tendre √† 0. </li></ol><br>  Par exemple, lors du fait d'appeler, plusieurs messages diff√©rents transitent par le transport asynchrone.  certains messages sont destin√©s √† des sous-syst√®mes vivant dans le m√™me circuit, et certains sont destin√©s √† √™tre transmis √† des n≈ìuds centraux.  Le m√™me message peut √™tre revendiqu√© par plusieurs sous-syst√®mes, par cons√©quent, au stade de la publication du message chez le lapin, il est copi√© et envoy√© √† diff√©rents consommateurs.  Et dans certains cas, la copie des messages est obligatoirement mise en ≈ìuvre sur un circuit interm√©diaire - lorsque des informations doivent √™tre transmises du circuit de Khabarovsk au circuit de Krasnodar.  La transmission se fait par l'un des contours centraux, o√π des copies des messages sont faites, pour les destinataires centraux. <br><br>  Outre les √©v√©nements provoqu√©s par les actions de l'abonn√©, les messages de service qui √©changent les sous-syst√®mes passent par le transport.  Ainsi, plusieurs milliers de routes de messagerie diff√©rentes sont obtenues, certaines se croisent, certaines existent isol√©ment.  Il suffit de nommer le nombre de files d'attente impliqu√©es dans les itin√©raires sur diff√©rents Contours pour comprendre l'√©chelle approximative de la carte de transport: Sur les circuits centraux 600, 200, 260, 15 ... et sur les Circuits distants 80-100 ... <br><br>  Avec une telle implication du transport, les exigences d'accessibilit√© √† 100% de tous les n≈ìuds de transport ne semblent plus excessives.  Nous passons √† la mise en ≈ìuvre de ces exigences. <br><br><h3>  Comment nous r√©solvons les t√¢ches </h3><br>  En plus de <i>RabbitMQ lui</i> - <i>m√™me</i> , <i>Haproxy est</i> utilis√© pour √©quilibrer la charge et fournir une r√©ponse automatique aux urgences. <br><br>  Quelques mots sur l'environnement mat√©riel et logiciel dans lequel nos lapins existent: <br><br><ul><li>  Tous les serveurs de lapin sont virtuels, avec des param√®tres de 8-12 CPU, 16 Gb Mem, 200 Gb HDD.  Comme l'exp√©rience l'a montr√©, m√™me l'utilisation de serveurs non virtuels effrayants avec 90 c≈ìurs et un tas de RAM offre une petite am√©lioration des performances √† des co√ªts nettement plus √©lev√©s.  Versions utilis√©es: 3.6.6 (en pratique - la plus stable de 3.6) avec un erlang de 18.3, 3.7.6 avec un erlang de 20.1. </li><li>  Pour Haproxy, les exigences sont beaucoup plus faibles: 2 CPU, 4 Gb Mem, la version haproxy est stable 1.8.  La charge sur les ressources sur tous les serveurs haproxy ne d√©passe pas 15% CPU / Mem. </li><li>  L'ensemble du zoo est situ√© dans 14 centres de donn√©es r√©partis sur 7 sites √† travers le pays, r√©unis en un seul r√©seau.  Dans chacun des centres de donn√©es, il existe un cluster de trois n≈ìuds et un concentrateur. </li><li>  Pour les circuits distants, 2 centres de donn√©es sont utilis√©s, pour chacun des circuits centraux - 4. </li><li>  Les circuits centraux interagissent entre eux ainsi qu'avec les circuits distants; √† leur tour, les circuits distants fonctionnent uniquement avec les circuits centraux; ils n'ont pas de communication directe entre eux. </li><li>  Les configurations de Haps et Clusters au sein d'un m√™me Circuit sont compl√®tement identiques.  Le point d'entr√©e pour chaque circuit est un alias pour plusieurs enregistrements A-DNS.  Ainsi, pour √©viter que cela ne se produise, au moins un hap et au moins un des clusters (au moins un n≈ìud du cluster) dans chaque circuit seront disponibles.  √âtant donn√© que le cas de d√©faillance de m√™me 6 serveurs dans deux centres de donn√©es en m√™me temps est extr√™mement improbable, l'acceptabilit√© est suppos√©e proche de 100%. </li></ul><br>  Il semble con√ßu (et mis en ≈ìuvre) tout cela comme ceci: <br><br><img src="https://habrastorage.org/webt/f2/rm/9i/f2rm9i0kd5jk1ikaapl2vc63yhc.jpeg" alt="image"><br><br><img src="https://habrastorage.org/webt/az/5t/ks/az5tkse8qkz0fl3ml6znbg4pz18.jpeg" alt="image"><br><br>  Maintenant quelques configs. <br><br><div class="spoiler">  <b class="spoiler_title">Configuration haproxy</b> <div class="spoiler_text"><table><tbody><tr><td>  frontend center-rmq_5672 </td><td></td></tr><tr><td></td><td>  lier </td><td>  *: 5672 </td></tr><tr><td></td><td>  mode </td><td>  TCP </td></tr><tr><td></td><td>  maxconn </td><td>  10 000 </td></tr><tr><td></td><td>  client de d√©lai d'attente </td><td>  3h </td></tr><tr><td></td><td>  option </td><td>  tcpka </td></tr><tr><td></td><td>  option </td><td>  tcplog </td></tr><tr><td></td><td>  default_backend </td><td>  center-rmq_5672 </td></tr><tr><td>  frontend center-rmq_5672_lvl_1 </td><td></td></tr><tr><td></td><td>  lier </td><td>  localhost: 56721 </td></tr><tr><td></td><td>  mode </td><td>  TCP </td></tr><tr><td></td><td>  maxconn </td><td>  10 000 </td></tr><tr><td></td><td>  client de d√©lai d'attente </td><td>  3h </td></tr><tr><td></td><td>  option </td><td>  tcpka </td></tr><tr><td></td><td>  option </td><td>  tcplog </td></tr><tr><td></td><td>  default_backend </td><td>  center-rmq_5672_lvl_1 </td></tr><tr><td>  backend center-rmq_5672 </td></tr><tr><td></td><td>  √©quilibre </td><td>  lessconn </td></tr><tr><td></td><td>  mode </td><td>  TCP </td></tr><tr><td></td><td>  fullconn </td><td>  10 000 </td></tr><tr><td></td><td>  d√©lai </td><td>  serveur 3h </td></tr><tr><td></td><td>  serveur </td><td>  srv-rmq01 10/10/10/10/106767 v√©rification inter 5s mont√©e 2 chute 3 arr√™t-sauvegarde-sessions marqu√©es </td></tr><tr><td></td><td>  serveur </td><td>  srv-rmq03 10/10/10/2011 11672 v√©rification inter 5s mont√©e 2 chute 3 arr√™t-sauvegarde-sessions balis√©es </td></tr><tr><td></td><td>  serveur </td><td>  srv-rmq05 10/10/10/126767 contr√¥le inter 5 s mont√©e 2 chute 3 arr√™t-sauvegarde-sessions marqu√©es </td></tr><tr><td></td><td>  serveur </td><td>  localhost 127.0.0.1 ‚àó 6721 check inter 5s rise 2 fall 3 backup on-marked-down shutdown-sessions </td></tr><tr><td>  backend center-rmq_5672_lvl_1 </td></tr><tr><td></td><td>  √©quilibre </td><td>  lessconn </td></tr><tr><td></td><td>  mode </td><td>  TCP </td></tr><tr><td></td><td>  fullconn </td><td>  10 000 </td></tr><tr><td></td><td>  d√©lai </td><td>  serveur 3h </td></tr><tr><td></td><td>  serveur </td><td>  srv-rmq02 10/10/10/136767 contr√¥le inter 5s mont√©e 2 chute 3 arr√™t-sauvegarde-sessions marqu√©es </td></tr><tr><td></td><td>  serveur </td><td>  srv-rmq04 10/10/10/14/1067 check inter 5s mont√©e 2 chute 3 arr√™t-sauvegarde-sessions balis√©es </td></tr><tr><td></td><td>  serveur </td><td>  srv-rmq06 10.10.10.5:0767 v√©rification inter 5 s mont√©e 2 chute 3 arr√™t-sauvegarde-sessions marqu√©es </td></tr></tbody></table><br></div></div><br>  La premi√®re section du front d√©crit le point d'entr√©e - menant au cluster principal, la deuxi√®me section est con√ßue pour √©quilibrer le niveau de r√©serve.  Si vous d√©crivez simplement tous les serveurs de sauvegarde de lapin dans la section backend (instruction de sauvegarde), cela fonctionnera de la m√™me mani√®re - si le cluster principal est compl√®tement inaccessible, les connexions iront au serveur de sauvegarde, cependant, toutes les connexions iront au premier serveur de sauvegarde de la liste.  Pour assurer l'√©quilibrage de la charge sur tous les n≈ìuds de sauvegarde, nous introduisons simplement un front suppl√©mentaire, que nous rendons disponible uniquement avec localhost, et nous lui attribuons le serveur de sauvegarde. <br><br>  L'exemple ci-dessus d√©crit l'√©quilibrage de la boucle distante - qui fonctionne dans deux centres de donn√©es: le serveur srv-rmq {01,03,05} - vivent dans le centre de donn√©es n ¬∞ 1, srv-rmq {02,04,06} - dans le centre de donn√©es n ¬∞ 2.  Ainsi, pour impl√©menter la solution √† quatre codas, nous avons seulement besoin d'ajouter deux fronts locaux suppl√©mentaires et deux sections backend des serveurs rabbit correspondants. <br><br>  Le comportement de l'√©quilibreur avec cette configuration est le suivant: tant qu'au moins un serveur principal est vivant, nous l'utilisons.  Si les serveurs principaux ne sont pas disponibles, nous travaillons avec une r√©serve.  Si au moins un serveur principal devient disponible, toutes les connexions aux serveurs de sauvegarde sont d√©connect√©es et, lorsque la connexion est restaur√©e, elles tombent d√©j√† sur le cluster principal. <br><br>  L'exp√©rience de fonctionnement de cette configuration montre une disponibilit√© de presque 100% de chacun des circuits.  Cette solution n√©cessite que les sous-syst√®mes soient parfaitement l√©gaux et simples: pouvoir se reconnecter avec le lapin apr√®s d√©connexion. <br><br>  Nous avons donc fourni l'√©quilibrage de charge √† un nombre arbitraire de clusters et bascul√© automatiquement entre eux, il est temps d'aller directement aux lapins. <br><br>  Chaque cluster est cr√©√© √† partir de trois n≈ìuds, comme le montre la pratique - le nombre de n≈ìuds le plus optimal, ce qui garantit l'√©quilibre optimal entre disponibilit√© / tol√©rance aux pannes / vitesse.  √âtant donn√© que le lapin n'√©volue pas horizontalement (les performances du cluster sont √©gales aux performances du serveur le plus lent), nous cr√©ons tous les n≈ìuds avec les m√™mes param√®tres optimaux pour CPU / Mem / Hdd.  Nous positionnons les serveurs aussi pr√®s que possible les uns des autres - dans notre cas, nous classons les machines virtuelles dans la m√™me batterie de serveurs. <br><br>  En ce qui concerne les conditions pr√©alables, √† la suite desquelles de la part des sous-syst√®mes assureront le fonctionnement le plus stable et le respect de l'exigence de sauvegarde des messages re√ßus: <br><br><ol><li>  Le travail avec le lapin se fait uniquement via le protocole amqp / amqps - via l'√©quilibrage.  Autorisation sous les comptes locaux - au sein de chaque cluster (enfin, et tout le circuit) </li><li>  Les sous-syst√®mes sont connect√©s au lapin en mode passif: aucune manipulation avec les entit√©s des lapins (cr√©ation de files d'attente / eschendzhey / bind) n'est autoris√©e et limit√©e au niveau des droits de compte - nous ne donnons tout simplement pas de droits de configuration. </li><li>  Toutes les entit√©s n√©cessaires sont cr√©√©es de mani√®re centralis√©e, et non au moyen de sous-syst√®mes, et sur tous les clusters de cluster sont effectu√©es de la m√™me mani√®re - pour assurer la commutation automatique vers le cluster de sauvegarde et vice versa.  Sinon, nous pouvons obtenir une image: nous sommes pass√©s √† la r√©serve, mais la file d'attente ou la liaison n'est pas l√†, et nous pouvons obtenir le choix d'une erreur de connexion ou d'une perte de messages. </li></ol><br><h3>  Maintenant, les param√®tres directement sur les lapins: </h3><br><ol><li>  Les h√¥tes locaux n'ont pas acc√®s √† l'interface Web </li><li>  L'acc√®s au Web est organis√© via LDAP - nous nous int√©grons √† AD et obtenons la journalisation de qui et o√π est all√© sur la webcam.  Au niveau de la configuration, nous restreignons les droits des comptes AD, non seulement nous exigeons d'√™tre dans un certain groupe, mais nous ne donnons que les droits de ¬´voir¬ª.  Les groupes de surveillance sont plus que suffisants.  Et nous suspendons les droits d'administrateur √† un autre groupe dans AD, ainsi le cercle d'influence sur le transport est consid√©rablement limit√©. </li><li>  Pour faciliter l'administration et le suivi: <br>  Sur tous les VHOST, nous suspendons imm√©diatement une politique de niveau 0 avec application √† toutes les files d'attente (mod√®le :. *): <br><br><ul><li>  <b><i>ha-mode: all</i></b> - stocke toutes les donn√©es sur tous les n≈ìuds du cluster, la vitesse de traitement des messages diminue, mais leur s√©curit√© et leur disponibilit√© sont assur√©es. </li><li>  <b><i>ha-sync-mode: automatic</i></b> - demande au robot de synchroniser automatiquement les donn√©es sur tous les n≈ìuds du cluster: la s√©curit√© et la disponibilit√© des donn√©es augmentent √©galement. </li><li>  <b><i>mode file d'attente: paresseux</i></b> - peut-√™tre l'une des options les plus utiles apparues chez les lapins depuis la version 3.6 - enregistrement imm√©diat des messages sur le disque dur.  Cette option r√©duit consid√©rablement la consommation de RAM et augmente la s√©curit√© des donn√©es lors des arr√™ts / chutes de n≈ìuds ou du cluster dans son ensemble. </li></ul><br></li><li>  Param√®tres dans le fichier de configuration ( <i>rabbitmq-main / conf / rabbitmq.config</i> ): <br><br><ul><li>  Section <b>lapin</b> : <i>{vm_memory_high_watermark_paging_ratio, 0,5}</i> - seuil de t√©l√©chargement des messages sur le disque √† 50%.  Avec <b>paresseux activ√©, il</b> sert plus d'assurance lorsque nous souscrivons une police, par exemple, niveau 1, dans laquelle nous oublions d'inclure <b>paresseux</b> . </li><li>  <i>{vm_memory_high_watermark, 0,95}</i> - nous <i>limitons</i> le lapin √† 95% de la RAM totale, car seul le lapin vit sur les serveurs, cela n'a aucun sens d'introduire des restrictions plus strictes.  5% "geste large" qu'il en soit - quittez le syst√®me d'exploitation, la surveillance et d'autres petites choses utiles.  Comme cette valeur est la limite sup√©rieure, il y en a assez pour tout le monde. </li><li>  <i>{cluster_partition_handling, pause_minority}</i> - d√©crit le comportement du cluster lorsque la partition r√©seau se produit, pour trois clusters de n≈ìuds ou plus, cet indicateur est recommand√© - il permet au cluster de se r√©cup√©rer. </li><li>  <i>{disk_free_limit, "500MB"}</i> - tout est simple, quand il y a 500 Mo d'espace disque libre - la publication des messages sera arr√™t√©e, seule la soustraction sera disponible. </li><li>  <i>{auth_backends, [rabbit_auth_backend_internal, rabbit_auth_backend_ldap]}</i> - ordre d'autorisation pour les lapins: Tout d'abord, la pr√©sence d'une √©chographie dans la base de donn√©es locale est v√©rifi√©e, et sinon, allez sur le serveur LDAP. </li><li>  Section <b>rabbitmq_auth_backend_ldap</b> - configuration de l'interaction avec AD: <i>{serveurs, ["srv_dc1", "srv_dc2"]}</i> - une liste de contr√¥leurs de domaine sur lesquels l'authentification aura lieu. </li><li>  Les param√®tres qui d√©crivent directement l'utilisateur dans AD, le port LDAP, etc. sont purement individuels et sont d√©crits en d√©tail dans la documentation. </li><li>  La chose la plus importante pour nous est une description des droits et restrictions sur l'administration et l'acc√®s √† l'interface Web des lapins: tag_queries: <br>  <i>[{administrateur, {in_group, "cn = rabbitmq-admins, ou = GRP, ou = GRP_MAIN, dc = My_domain, dc = ru"}},</i> <i><br></i>  <i>{surveillance,</i> <i><br></i>  <i>{in_group, "cn = rabbitmq-web, ou = GRP, ou = GRP_MAIN, dc = My_domain, dc = ru"}</i> <i><br></i>  <i>}]</i> - cette conception fournit des privil√®ges administratifs √† tous les utilisateurs du groupe rabbitmq-admins et des droits de surveillance (au minimum suffisants pour visualiser l'acc√®s) pour le groupe rabbitmq-web. <br></li><li>  <b>requ√™te_acc√®s_ressource</b> : <br>  <i>{pour,</i> <i><br></i>  <i>[{permission, configure, {in_group, "cn = rabbitmq-admins, ou = GRP, ou = GRP_MAIN, dc = My_domain, dc = ru"}},</i> <i><br></i>  <i>{permission, write, {in_group, "cn = rabbitmq-admins, ou = GRP, ou = GRP_MAIN, dc = My_domain, dc = ru"}},</i> <i><br></i>  <i>{permission, lecture, {constant, true}}</i> <i><br></i>  <i>]</i> <i><br></i>  <i>}</i> - nous fournissons les droits de configuration et d'√©criture uniquement au groupe d'administrateurs, √† tous ceux qui se connectent avec succ√®s, les droits sont en lecture seule - il peut lire les messages via l'interface Web. <br></li></ul></li></ol><br>  Nous obtenons un cluster configur√© (au niveau du fichier de configuration et des param√®tres dans le lapin lui-m√™me) qui maximise la disponibilit√© et la s√©curit√© des donn√©es.  Par cela, nous mettons en ≈ìuvre l'exigence - assurer la disponibilit√© et la s√©curit√© des donn√©es ... dans la plupart des cas. <br><br>  Il y a plusieurs points √† prendre en compte lors de l'utilisation de tels syst√®mes tr√®s charg√©s: <br><br><ol><li>  Il est pr√©f√©rable d'organiser toutes les propri√©t√©s suppl√©mentaires des files d'attente (TTL, expiration, longueur maximale, etc.) par les politiciens, plut√¥t que de suspendre les param√®tres lors de la cr√©ation des files d'attente.  Il en r√©sulte une structure personnalisable de mani√®re flexible qui peut √™tre personnalis√©e √† la vol√©e en fonction des r√©alit√©s changeantes. </li><li>  Utilisation de TTL.  Plus la file d'attente est longue, plus la charge sur le processeur est √©lev√©e.  Pour √©viter de "percer le plafond", il est pr√©f√©rable de limiter la longueur de la file d'attente via max-length √©galement. </li><li>  En plus du lapin lui-m√™me, un certain nombre d'applications utilitaires tournent sur le serveur, ce qui, curieusement, n√©cessite √©galement des ressources CPU.  Un lapin gourmand, par d√©faut, prend tous les noyaux disponibles ... Une situation d√©sagr√©able peut se r√©v√©ler: une lutte pour les ressources, qui peut facilement conduire √† des freins sur le lapin.  Pour √©viter l'occurrence d'une telle situation, par exemple, comme suit: Modifiez les param√®tres du lancement de l'erlang - introduisez une limite obligatoire sur le nombre de c≈ìurs utilis√©s.  Nous proc√©dons comme suit: recherchez le fichier <i>rabbitmq-env</i> , recherchez le param√®tre SERVER_ERL_ARGS = et ajoutez + sct L0-Xc0-X + SY: Y.  O√π X est le nombre de c≈ìurs-1 (le comptage commence √† 0), Y - Le nombre de c≈ìurs -1 (√† partir de 1).  + sct L0-Xc0-X - change la liaison aux noyaux, + SY: Y - change le nombre de shedulers lanc√©s par l'erlang.  Donc pour un syst√®me de 8 c≈ìurs, les param√®tres ajout√©s prendront la forme: + sct L0-6c0-6 + S 7: 7.  De cette fa√ßon, nous ne donnons au lapin que 7 c≈ìurs et nous nous attendons √† ce que le syst√®me d'exploitation, en lan√ßant d'autres processus, agisse de mani√®re optimale et les accroche sur un noyau non charg√©. </li></ol><br><h3>  Les nuances de l'exploitation du zoo r√©sultant </h3><br>  Ce que n'importe quel param√®tre ne peut pas prot√©ger, c'est la base effondr√©e de la mn√©sie - malheureusement, cela se produit avec une probabilit√© non nulle.  Un r√©sultat aussi d√©sastreux n'est pas caus√© par des d√©faillances globales (par exemple, une d√©faillance compl√®te d'un centre de donn√©es entier - la charge basculera simplement vers un autre cluster), mais davantage de d√©faillances locales - au sein du m√™me segment de r√©seau. <br><br>  De plus, ce sont les d√©faillances du r√©seau local qui font peur, car  l'arr√™t d'urgence d'un ou deux n≈ìuds n'entra√Ænera pas de cons√©quences fatales - simplement toutes les demandes iront √† un n≈ìud, et comme nous nous en souvenons, les performances d√©pendent des performances du seul n≈ìud lui-m√™me.  Les pannes de r√©seau (nous ne prenons pas en compte les petites interruptions de communication - elles se produisent sans douleur) conduisent √† une situation o√π les n≈ìuds commencent le processus de synchronisation les uns avec les autres, puis la connexion se brise encore et encore pendant quelques secondes. <br><br>  Par exemple, plusieurs clignotements du r√©seau et avec une fr√©quence de plus de 5 secondes (un tel d√©lai est d√©fini dans les param√®tres Hapov, vous pouvez certainement les lire, mais pour v√©rifier l'efficacit√©, vous devrez r√©p√©ter l'√©chec, ce que personne ne veut). <br><br>  Le cluster peut toujours r√©sister √† une ou deux it√©rations de ce type, mais plus - les chances sont d√©j√† minimes.  Dans une telle situation, l'arr√™t d'un n≈ìud tomb√© peut enregistrer, mais il est presque impossible de le faire manuellement.  Le plus souvent, le r√©sultat n'est pas seulement la perte d'un n≈ìud du cluster avec le message <b>¬´Partition r√©seau¬ª</b> , mais aussi l'image lorsque les donn√©es de la partie des files d'attente ont v√©cu uniquement ce n≈ìud et n'ont pas eu le temps de se synchroniser avec les autres.  Visuellement - dans la file d'attente, les donn√©es sont <b><i>NaN</i></b> . <br><br>  Et maintenant, c'est un signal non ambigu - basculez vers le cluster de sauvegarde.  La commutation fournira un bonheur, il vous suffit d'arr√™ter les lapins sur le cluster principal - une question de plusieurs minutes.  En cons√©quence, nous obtenons la restauration de la capacit√© de travail du transport et nous pouvons proc√©der en toute s√©curit√© √† l'analyse de l'accident et √† son √©limination. <br><br>  Afin de retirer une grappe endommag√©e de sous la charge, afin d'√©viter une d√©gradation suppl√©mentaire, la chose la plus simple est de faire fonctionner le lapin sur des ports autres que 5672. Puisque nous surveillons les lapins par le port r√©gulier, son d√©placement, par exemple, par 5673 dans les param√®tres du lapin, il vous permettra de lancer compl√®tement le cluster sans douleur et d'essayer de restaurer son op√©rabilit√© et les messages qui y restent. <br><br>  Nous le faisons en quelques √©tapes: <br><br><ol><li>  Arr√™tez tous les n≈ìuds du cluster d√©faillant - le hap basculera la charge vers le cluster de sauvegarde </li><li>  RABBITMQ_NODE_PORT=5673   <i>rabbitmq-env</i> ‚Äì       ,   Web  -    15672. </li><li>            . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au d√©marrage, les index seront reconstruits et, dans la grande majorit√© des cas, toutes les donn√©es seront enti√®rement restaur√©es. Malheureusement, des plantages se produisent, qui </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obligent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† supprimer physiquement tous les messages du disque, ne laissant que la configuration - les r√©pertoires </font><i><font style="vertical-align: inherit;">msg_store_persistent</font></i><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msg_store_transient</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">files d'attente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pour la version 3.6) ou </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msg_stores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pour la version 3.7) </font><font style="vertical-align: inherit;">sont supprim√©s dans le dossier contenant la base de donn√©es </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s une telle th√©rapie radicale, le cluster est lanc√© avec la pr√©servation de la structure interne, mais sans messages. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et l'option la plus d√©sagr√©able (observ√©e une fois): les dommages √† la base √©taient tels qu'il √©tait n√©cessaire de supprimer compl√®tement la base enti√®re et de reconstruire le cluster √† partir de z√©ro.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour la commodit√© de la gestion et de la mise √† jour des lapins, pas un assemblage pr√™t √† l'emploi en rpm n'est utilis√©, mais un lapin d√©mont√© √† l'aide de cpio et reconfigur√© (chang√© les chemins dans les scripts). La principale diff√©rence: il ne n√©cessite pas de privil√®ges root pour installer / configurer, n'est pas install√© sur le syst√®me (le lapin reconstruit est parfaitement emball√© dans tgz) et fonctionne √† partir de n'importe quel utilisateur. Cette approche vous permet de mettre √† niveau les versions de mani√®re flexible (si elle ne n√©cessite pas un arr√™t complet du cluster - dans ce cas, passez simplement au cluster de sauvegarde et mettez √† jour, sans oublier de sp√©cifier le port d√©cal√© pour le fonctionnement). Il est m√™me possible d'ex√©cuter plusieurs instances de RabbitMQ sur la m√™me machine - pour tester l'option est tr√®s pratique - vous pouvez d√©ployer une copie architecturale r√©duite du zoo de la bataille.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä la suite du chamanisme avec cpio et les chemins dans les scripts, nous avons eu une option de construction: deux dossiers rabbitmq-base (dans l'assemblage d'origine - le dossier mnesia) et rabbimq-main - ici, je mets tous les scripts n√©cessaires du lapin et erlang lui-m√™me. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans rabbimq-main / bin - liens symboliques vers des scripts lapin et erlang et un script de suivi de lapin (description ci-dessous). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans rabbimq-main / init.d - le script rabbitmq-server √† travers lequel les journaux d√©marrent / s'arr√™tent / tournent; en lib, le lapin lui-m√™me; dans lib64 - erlang (utilise une version all√©g√©e, uniquement pour le lapin, version d'erlang).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est extr√™mement facile de mettre √† jour l'assembly r√©sultant lorsque de nouvelles versions sont publi√©es - ajoutez le contenu de rabbimq-main / lib et rabbimq-main / lib64 √† partir des nouvelles versions et remplacez les liens symboliques dans bin. Si la mise √† jour affecte √©galement les scripts de contr√¥le, modifiez simplement les chemins d'acc√®s aux n√¥tres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un avantage significatif de cette approche est la continuit√© compl√®te des versions - tous les chemins, scripts, commandes de contr√¥le restent inchang√©s, ce qui vous permet d'utiliser tous les scripts utilitaires auto-√©crits sans dopage pour chaque version.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depuis la chute des lapins, bien que rare, mais survenant, il a fallu mettre en place un m√©canisme de suivi de leur bien-√™tre - remont√©e en cas de chute (tout en conservant les logs des raisons de la chute). </font><font style="vertical-align: inherit;">L'√©chec d'un n≈ìud dans 99% des cas s'accompagne d'une entr√©e de journal, voire de tuer m√™me laisse des traces, cela a permis de mettre en place une surveillance de l'√©tat du lapin √† l'aide d'un simple script. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les versions 3.6 et 3.7, le script est l√©g√®rement diff√©rent en raison des diff√©rences dans les entr√©es de journal.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour la version 3.6</font></font></b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python import subprocess import os import datetime import zipfile def LastRow(fileName,MAX_ROW=200): with open(fileName,'rb') as f: f.seek(-min(os.path.getsize(fileName),MAX_ROW),2) return (f.read().splitlines())[-1] if os.path.isfile('/data/logs/rabbitmq/startup_log'): if b'FAILED' in LastRow('/data/logs/rabbitmq/startup_log'): proc = subprocess.Popen("ps x|grep rabbitmq-server|grep -v 'grep'", shell=True, stdout=subprocess.PIPE) out = proc.stdout.readlines() if str(out) == '[]': cur_dt=datetime.datetime.now() try: os.stat('/data/logs/rabbitmq/after_crush') except: os.mkdir('/data/logs/rabbitmq/after_crush') z=zipfile.ZipFile('/data/logs/rabbitmq/after_crush/repair_log'+'-'+str(cur_dt.day).zfill(2)+str(cur_dt.month).zfill(2)+str(cur_dt.year)+'_'+str(cur_dt.hour).zfill(2)+'-'+str(cur_dt.minute).zfill(2)+'-'+str(cur_dt.second).zfill(2)+'.zip','a') z.write('/data/logs/rabbitmq/startup_err','startup_err') proc = subprocess.Popen("~/rabbitmq-main/init.d/rabbitmq-server start", shell=True, stdout=subprocess.PIPE) out = proc.stdout.readlines() z.writestr('res_restart.log',str(out)) z.close() my_file = open("/data/logs/rabbitmq/run.time", "a") my_file.write(str(cur_dt)+"\n") my_file.close()</span></span></code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Pour 3.7, seules deux lignes sont modifi√©es</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (os.path.isfile(<span class="hljs-string"><span class="hljs-string">'/data/logs/rabbitmq/startup_log'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (os.path.isfile(<span class="hljs-string"><span class="hljs-string">'/data/logs/rabbitmq/startup_err'</span></span>)): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-string"><span class="hljs-string">b' OK '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> LastRow(<span class="hljs-string"><span class="hljs-string">'/data/logs/rabbitmq/startup_log'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (<span class="hljs-string"><span class="hljs-string">b'FAILED'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> LastRow(<span class="hljs-string"><span class="hljs-string">'/data/logs/rabbitmq/startup_log'</span></span>))) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> (<span class="hljs-string"><span class="hljs-string">b'Gracefully halting Erlang VM'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> LastRow(<span class="hljs-string"><span class="hljs-string">'/data/logs/rabbitmq/startup_err'</span></span>)):</code> </pre><br></div></div><br><br>  Nous mettons en place un compte crontab sous lequel le lapin travaillera (par d√©faut rabbitmq) ex√©cutant ce script (nom du script: check_and_run) toutes les minutes (d'abord, nous demandons √† l'administrateur de donner au compte le droit d'utiliser crontab, mais si nous avons des droits root, nous le faisons nous-m√™mes): <br>  <b><i>* / 1 * * * * ~ / rabbitmq-main / bin / check_and_run</i></b> <br><br>  Le deuxi√®me point d'utilisation du lapin remont√© est la rotation des b√ªches. <br><br>  Comme nous ne sommes pas li√©s au syst√®me logrotate, nous utilisons la fonctionnalit√© fournie par le d√©veloppeur: le <b>script rabbitmq-server</b> de init.d (pour la version 3.6) <br>  En apportant de petites modifications √† <i>rotation_logs_rabbitmq ()</i> <br>  Ajouter: <br><br><pre> <code class="bash hljs"> find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/http_api/*.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.* -maxdepth 0 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f ! -name <span class="hljs-string"><span class="hljs-string">"*.gz"</span></span> | xargs -i gzip --force {} find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/*.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.*.back -maxdepth 0 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f | xargs -i gzip {} find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/*.gz -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -mtime +30 -delete find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/http_api/*.gz -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -mtime +30 -delete</code> </pre><br>  R√©sultat de l'ex√©cution du script rabbitmq-server avec la cl√© rotation-logs: les journaux sont compress√©s par gzip et ne sont stock√©s que pendant les 30 derniers jours.  <b>http_api</b> - le chemin o√π le lapin place les journaux http - configur√© dans le fichier de configuration: <i>{rabbitmq_management, [{rates_mode, d√©taill√©}, {http_log_dir, path_to_logs / http_api "}]}</i> <br><br>  Dans le m√™me temps, je fais attention √† <i>{rates_mode, <b>d√©taill√©</b> }</i> - l'option augmente l√©g√®rement la charge, mais elle vous permet de voir des informations sur qui publie des messages dans l'EXCHENGE sur l'interface WEB (et donc de passer par l'API).  L'information est extr√™mement n√©cessaire, car  toutes les connexions passent par l'√©quilibreur - nous ne verrons que l'IP des √©quilibreurs eux-m√™mes.  Et si vous cassez tous les sous-syst√®mes qui fonctionnent avec le lapin pour qu'ils remplissent les param√®tres des propri√©t√©s du client dans les propri√©t√©s de leurs connexions aux lapins, il sera possible d'obtenir des informations d√©taill√©es au niveau de la connexion qui exactement, o√π et avec quelle intensit√© publie les messages. <br><br>  Avec la sortie des nouvelles versions 3.7, il y a eu un rejet complet du script <b>rabbimq-server</b> dans init.d.  Afin de faciliter le fonctionnement (l'uniformit√© des commandes de contr√¥le quelle que soit la version du lapin) et une transition plus fluide entre les versions, dans le lapin r√©assembl√©, nous continuons √† utiliser ce script.  La v√©rit√© est encore une fois: nous <i>allons</i> changer <i>un</i> peu <i>rotation_logs_rabbitmq ()</i> , car le m√©canisme de nommage des journaux apr√®s rotation a chang√© dans 3.7: <br><br><pre> <code class="bash hljs"> mv <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/<span class="hljs-variable"><span class="hljs-variable">$NODENAME</span></span>.log.0 <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/<span class="hljs-variable"><span class="hljs-variable">$NODENAME</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.$(date +%Y%m%d-%H%M%S).back mv <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/$(<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$NODENAME</span></span>)_upgrade.log.0 <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/$(<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$NODENAME</span></span>)_upgrade.log.$(date +%Y%m%d-%H%M%S).back find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/http_api/*.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.* -maxdepth 0 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f ! -name <span class="hljs-string"><span class="hljs-string">"*.gz"</span></span> | xargs -i gzip --force {} find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/*.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.* -maxdepth 0 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f ! -name <span class="hljs-string"><span class="hljs-string">"*.gz"</span></span> | xargs -i gzip --force {} find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/*.gz -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -mtime +30 -delete find <span class="hljs-variable"><span class="hljs-variable">${RABBITMQ_LOG_BASE}</span></span>/http_api/*.gz -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -mtime +30 -delete</code> </pre><br>  Maintenant, il ne reste plus qu'√† ajouter la t√¢che de rotation des journaux √† crontab - par exemple, tous les jours √† 23h00: <br>  <b><i>00 23 * * * ~ / rabbitmq-main / init.d / rabbitmq-server rotation-journaux</i></b> <br><br>  Passons aux t√¢ches √† r√©soudre dans le cadre du fonctionnement de la "ferme aux lapins": <br><br><ol><li>  Manipulations avec des entit√©s de lapin - cr√©ation / suppression d'entit√©s de lapin: ekschendzhey, files d'attente, liaisons, pelles, utilisateurs, politiques.  Et pour ce faire, c'est absolument identique sur tous les clusters. </li><li>  Apr√®s avoir bascul√© vers / depuis le cluster de sauvegarde, il est n√©cessaire de transf√©rer les messages qui y sont rest√©s vers le cluster actuel. </li><li>  Cr√©ation de copies de sauvegarde des configurations de tous les clusters de tous les circuits </li><li>  Synchronisation compl√®te des configurations de cluster dans le contour </li><li>  Arr√™ter / d√©marrer les lapins </li><li>  Pour analyser les flux de donn√©es actuels: tous les messages vont-ils et s'ils vont, alors o√π doivent-ils aller ou ... </li><li>  Trouvez et capturez les messages qui passent en fonction de tous les crit√®res </li></ol><br>  Le fonctionnement de notre zoo et la solution des t√¢ches sond√©es au moyen du plug-in r√©gulier fourni <i>rabbitmq_management</i> est possible, mais extr√™mement g√™nant, c'est pourquoi un shell a √©t√© d√©velopp√© et mis en ≈ìuvre pour <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">contr√¥ler toute la vari√©t√© de lapins</a></b> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434016/">https://habr.com/ru/post/fr434016/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434004/index.html">Plateforme Wargaming: Hello World</a></li>
<li><a href="../fr434006/index.html">Avons-nous besoin de cookies √† l'√®re du RGPD? Nous discutons de la situation et des exigences de la loi</a></li>
<li><a href="../fr434008/index.html">Comment arr√™ter de s'inqui√©ter et commencer √† √©crire des tests bas√©s sur les propri√©t√©s</a></li>
<li><a href="../fr434010/index.html">Vous d√©veloppe ou configure les proxys Nginx pour Apache Tomcat sur Ubuntu en 5 minutes avec https et pare-feu</a></li>
<li><a href="../fr434012/index.html">PVS-Studio gratuit pour ceux qui d√©veloppent des projets open source</a></li>
<li><a href="../fr434018/index.html">Obtenez un certificat de d√©veloppeur Android associ√© Google</a></li>
<li><a href="../fr434034/index.html">Bons tutoriels sur YouTube</a></li>
<li><a href="../fr434036/index.html">Happy and end - les bo√Ætes aux lettres sur les domaines du portail Qip.ru ont migr√© vers Yandex</a></li>
<li><a href="../fr434038/index.html">Ventes de v√©hicules √©lectriques rechargeables en Chine pour novembre 2018</a></li>
<li><a href="../fr434040/index.html">Recueil universitaire ITMO: parler des projets universitaires, des succ√®s et des r√©alisations de nos dipl√¥m√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>