<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“² ğŸŒ± ğŸ  Pompa insulin, microchip yang rusak, dan radio yang ditentukan oleh perangkat lunak ğŸ˜ ğŸ›… ğŸ‘¨ğŸ½â€âœˆï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pompa Insulin Rekayasa Balik untuk Terapi DIY 

 Sekitar tiga tahun lalu, saya mendengar tentang sebuah situs web yang menawarkan hadiah karena sangat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pompa insulin, microchip yang rusak, dan radio yang ditentukan oleh perangkat lunak</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450962/">  <i>Pompa Insulin Rekayasa Balik untuk Terapi DIY</i> <br><br>  Sekitar tiga tahun lalu, saya mendengar tentang sebuah situs web yang menawarkan hadiah karena sangat dekat dengan hati saya: membalikkan komunikasi teknik dengan pompa insulin.  Saya sudah membantu menciptakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sistem</a> untuk anak perempuan saya yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Loop</a> , dengan pompa Medtronic, di mana saya membalikkan komunikasi insinyur (sebagian besar protokol komunikasi Medtronic utama diterjemahkan oleh Ben West menggunakan perangkat USB Carelink, dan saya menemukan frekuensi radio dan melakukan beberapa pekerjaan tambahan pada protokol).  Tetapi pompa Medtronic perlu dimatikan selama senam selama beberapa jam.  Desain tubeless dari pompa Omnipod ini tampak menarik bagi saya, dan saya memiliki semua alat untuk bekerja. <br><br>  Sistem Omnipod terdiri dari pompa kecil sekali pakai yang disebut modul (pod) dan unit kontrol (PDM). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/841/6a8/053/8416a805371c4dd2def86783f903bc24.jpg"></div><br><a name="habracut"></a><br>  Karena PDM berkomunikasi dengan modul melalui radio, dan modul tidak memiliki antarmuka bawaan, ini berarti bahwa itu sepenuhnya dikendalikan oleh radio.  Ada kemungkinan integrasi penuh dengan Loop, hanya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RileyLink</a> atau versi modifikasi. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">James Wedding</a> mengangkat hadiah, dan itu menarik banyak perhatian, dan kemudian orang yang tepat yang membantu dalam pekerjaan itu. <br><br><h1>  Radio yang Ditentukan Perangkat Lunak </h1><br>  SDR adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">alat yang hebat</a> .  Dia membuat dunia radio yang tersembunyi terlihat.  Ada berbagai jenis pesan yang terus mengalir di udara, dan alat-alat ini memungkinkan Anda untuk melihat-lihat, melihat pesan, dan setelah beberapa pekerjaan - men-decode flash kecil yang Anda lihat di sana.  Jika Anda mencari pesan dari perangkat tertentu, Anda perlu tahu di daerah mana untuk memulai pencarian.  Di sinilah dokumen publik FCC berguna. <br><br>  Dokumentasi FCC untuk PDM, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RBV-019</a> , mengatakan perangkat mentransmisikan dalam pita 433 MHz.  Setelah mengkonfigurasi perangkat lunak SDR untuk mendengarkan dalam rentang 433 MHz, sinyal berikut ini muncul ketika mengeluarkan status dari PDM: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/45b/3a2/f4b/45b3a2f4bc2273bfc3980fe7ce880ddf.png"><br><br>  Seperti yang akhirnya saya ketahui, dua garis terang ini menunjukkan jenis modulasi tertentu yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">frequency shift keying</a> , atau FSK.  Ini berarti bahwa frekuensi sinyal bervariasi tergantung pada informasi yang dikirimkan.  Bit 1 dikirim sebagai frekuensi yang lebih tinggi (garis atas), dan 0 dikirim dengan frekuensi yang sedikit lebih rendah (garis bawah).  Dengan menggunakan alat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">inspectrum,</a> kita dapat menganalisis data untuk lebih jelas mengenali 1 dan 0. Berikut adalah tampilan yang sangat diperbesar dari pesan pertama: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20c/80e/a0d/20c80ea0d16d084da29f5e2afdd76283.png"><br><br>  Saya menulis skrip python untuk mengekstrak bit-bit ini sehingga kita dapat melihatnya sebagai paket-paket utuh. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a9/bbc/f46/4a9bbcf46f710c93c85407fb9c4df813.png"><br><br>  Ternyata pola berulang ini adalah bagian dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pembukaan</a> .  Untuk menghemat energi, penerima sering masuk ke mode tidur dan bangun secara berkala untuk memeriksa sinyal.  Pemancar mengirimkan bukaan cukup lama untuk penerima untuk menangkapnya selama salah satu periode mendengarkan singkat.  Ketika penerima mendengar mukadimah, ia bangun sampai data nyata muncul. <br><br>  Anda harus melalui lapisan lain sebelum Anda mendapatkan data batch yang sebenarnya.  Anda tidak dapat mengirim data Anda melalui radio dengan cara yang sama seperti bit asli, karena penerima menggunakan transisi untuk menyinkronkan dalam waktu kapan harus menunggu bit berikutnya.  Jika Anda memiliki satu set nol atau satu, maka penerima mungkin tidak sinkron.  Oleh karena itu, komunikasi radio biasanya menggunakan pengodean untuk memverifikasi bahwa ada cukup transisi.  Komunikasi Omnipod menggunakan apa yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengkodean Manchester</a> .  Setiap bit dikodekan dalam dua bit.  1 dikodekan sebagai 10, dan 0 dikodekan sebagai 01. <br><br>  Butuh waktu lama untuk mengetahuinya, dan ada banyak teori di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saluran openomni di Slack</a> ketika kami mencoba mengulangi bit asli.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mark Brighton</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dan Caron,</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@larsonlr</a> telah mencapai beberapa keberhasilan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFCat</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ti Stick</a> untuk menangkap paket.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Evarist Kourjo</a> akhirnya menulis alat yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rtlomni</a> , ia menggunakan penerima USB rtl-sdr untuk mendengarkan paket dan men-decode mereka, yang ternyata sangat nyaman dan lebih dapat diandalkan daripada metode yang didasarkan pada TI Stick. <br><br><h1>  Penguraian paket </h1><br>  Setelah menerima bit yang sebenarnya, kami mulai mempelajari struktur paket.  Berdasarkan bit yang diubah antara modul yang berbeda dan tim yang berbeda, kami membuat struktur yang terlihat seperti ini: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/502/143/9c3/5021439c396b22015da60af09a84516a.png"><br><br><h1>  CRC8 </h1><br>  Radio jauh dari media transmisi yang ideal.  Ada banyak sumber gangguan yang membuat penerima mendengar 1 ketika 0 dikirim, dan sebaliknya.  Penting untuk mengetahui kapan ini terjadi, sehingga sebagian besar protokol menggunakan checksum, yang sering disebut CRC.  Penerima menghitung CRC saat data diterima, dan byte terakhir dari paket termasuk CRC yang dihitung oleh pemancar.  Jika tidak cocok, penerima membuang paket dan menunggu pengiriman ulang. <br><br>  Protokol Omnipod menggunakan CRC 8-bit standar.  Ketika kami menemukannya, kami memutuskan bahwa kami sangat dekat dengan memahami pesan.  Betapa sedikit yang kami tahu ... <br><br><h1>  Pesan, CRC16 </h1><br>  Beberapa pesan terlalu besar untuk muat dalam satu paket, sehingga mereka dibagi menjadi beberapa paket.  Kami mulai menyatukan format pesan dan memperhatikan sekumpulan bit di akhir setiap pesan, yang terlihat seperti CRC 16-bit.  Tapi itu aneh: 5 dari 16 bit tidak pernah disetel.  Kami mencoba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">berbagai metode</a> untuk mengetahui bagaimana ini dikodekan, tetapi tidak ada yang berhasil. <br><br>  Ini adalah masalah besar pertama: kami dapat terus bekerja pada bit lain dalam pesan, tetapi itu tidak akan membantu banyak untuk memahami apa yang sedang dikirim, dan kami tidak akan dapat menghasilkan paket baru sendiri, sehingga kemajuan melambat. <br><br>  Beberapa bulan berlalu hampir tidak berhasil.  Akhirnya, pada musim dingin 2016, seorang anggota grup dengan nama panggilan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@lorelai</a> melaporkan bahwa ia telah berhasil menyalin firmware dari chip ARM yang lebih besar ke PDM dan memulai proses pembongkaran yang membosankan: menerima instruksi CPU dan mengubahnya menjadi kode yang dapat dibaca manusia dengan variabel semantik dan nama fungsi.  Dia melakukan pekerjaan luar biasa menemukan berbagai metode yang digunakan untuk mengirimkan data. <br><br>  Saya melihat salah satu rutinitas tanpa judul dan memperhatikan bahwa itu tampak seperti implementasi standar perhitungan CRC dari sebuah tabel.  Dan tabel memiliki nilai untuk CRC 16-bit standar.  Saya menulis implementasi saya sendiri di atas tabel, dan itu diuji seperti CRC biasa.  Kemudian saya hati-hati melihat bagaimana fungsi itu ditulis.  Implementasi CRC yang normal terlihat seperti ini: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (len--) { crc = (crc &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ crctable[((crc &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ *c++)]; }</code> </pre> <br>  Implementasinya terlihat seperti ini :: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (len--) { crc = (crc &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ crctable[((crc &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ *c++)]; }</code> </pre> <br>  Perhatikan perbedaannya?  Apa yang seharusnya menjadi operator shift kiri bitwise entah bagaimana dikodekan sebagai shift kanan.  Ini adalah kesalahan;  Tidak ada alasan untuk melumpuhkan algoritma CRC Anda sendiri, karena ini membuat sulit untuk mengidentifikasi pesan yang rusak. <br><br>  Kami kembali beroperasi!  Dan mereka kembali bekerja pada pesan decoding, sesi rekaman dari PDM untuk pengiriman bolus [obat], basis sementara [Tingkat Basal Sementara menentukan peningkatan atau penurunan pengiriman insulin - kira-kira.  lane], penangguhan pengajuan, dll. <br><br><h1>  Nomor penggunaan tunggal </h1><br>  Semua tim pengiriman insulin memiliki sepotong data 4-byte pada awal pesan, yang tampak seperti beberapa bentuk kriptografi.  Sekali lagi, kami mencoba berbagai cara menafsirkan dan menganalisisnya dalam konteks pesan yang dikirim, tetapi itu bukan CRC (kadang-kadang kami melihat 4 byte yang sama bahkan dalam pesan yang berbeda).  Dan kadang-kadang kita melihat gambar itu berulang.  Itu terlihat, mungkin, sebagai bagian dari protokol untuk mencegah reproduksi data.  Dalam protokol lain, fungsi serupa disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">nonce</a> . <br><br>  Salah satu opsi yang kami pertimbangkan adalah merekam basis pesan untuk memutar perintah yang diberikan.  Bahkan jika alamat masing-masing modul berbeda, sekarang kami tahu cara membuat CRC, sehingga kami bisa mengambil salinan perintah sebelumnya, memasukkan alamat baru pada pesan dan menceritakan CRC.  Hanya ini yang mencegah kami menggunakan strategi ini.  Terlepas dari perintahnya, modul hanya menerima notce berikutnya dalam urutan, dan kami tidak tahu bagaimana membuat notce berikutnya. <br><br>  Tapi!  Lagipula, kita memiliki firmware PDM yang terkompilasi, kita bisa melihatnya!  Jadi, kami mempelajari firmware PDM, melacak pembuatan pesan dalam kode dan menemukan di mana empat byte ini seharusnya.  Tetapi alih-alih metode yang menghitung beberapa kriptografi, kami hanya menemukan empat karakter <code>INS.</code>  .  Omong kosong apa?!?!  Nah, entah bagaimana area pesan ini perlu diperbarui nanti dalam pipa. <br><br>  Ada chip lain di PDM, lebih dekat ke radio.  Itu adalah chip yang sama yang digunakan dalam modul, dengan pengidentifikasi SC9S08ER48, yang tidak didokumentasikan di Internet.  Itu mungkin dibuat untuk memesan Insulet.  Mungkin kita bisa menghapus firmware dari chip ini.  Sayangnya, chip itu diblokir, yang mencegah penyalinan firmware. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7fa/b0d/60c/7fab0d60c765bfaf689f79d4bdf5433a.png"><br><br>  Pekerjaan melambat lagi ... itu seperti jalan buntu yang nyata.  Kami mengerahkan semua upaya mental kami dalam hal ini, dan kami tidak memiliki petunjuk bagus dalam matematika di baliknya.  Dan chip ER48, yang (mungkin) menyimpan rahasia, diblokir, dan sulit untuk menemukan informasi publik apa pun yang akan membantu memecahkannya. <br><br><h1>  Sinar-X </h1><br>  Mencoba memahami ER48, beberapa anggota komunitas Slack menyarankan untuk mengambil x-ray.  Itu sangat keren, tapi, sayangnya, tidak membuka peluang baru. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76f/9d7/261/76f9d72614dc261b6a594d099b610514.jpg"><br>  <i><font color="gray">Tembakan umum</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8b/5ac/86b/d8b5ac86b2c595e0ab03724e22eb58de.jpg"><br>  <i><font color="gray">Tembakan terperinci</font></i> <br><br><h1>  Otopsi dan pengambilan gambar </h1><br>  Dan Caron memutuskan untuk berpaling ke seorang peneliti, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dr. Sergey Skorobogatov</a> dari University of Cambridge di Inggris.  Dan membaca bahwa dia memiliki pengalaman mengekstraksi kode dari chip yang terkunci, dan meyakinkannya untuk melihat masalah kita.  Skorobogatov melakukan penelitian di bidang penggunaan SEM (scanning electron microscope) untuk rekayasa terbalik dari mikrosirkuit.  Dia menyarankan itu mungkin, tetapi itu akan mahal, membutuhkan peralatan yang mahal dan tidak menjamin hasilnya.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Joe Moran</a> , yang baru-baru ini mulai menggunakan Loop setelah kami bertemu di hackathon Nightscout pada musim gugur 2016, setuju untuk membantu proyek tersebut.  Dia setuju dengan perusahaan Silicon Valley, Nanolab Technologies, untuk membuka dan memotret chip, dan juga dengan baik mendanai karya Nanolab dan Dr. Skorobogatov (serta modul pribadinya). <br><br>  Skorobogatov meminta Nanolab untuk menerapkan berbagai teknik pencitraan untuk mengetahui apakah mungkin untuk memecahkan perlindungan dengan metode non-invasif atau semi-invasif yang diketahui.  Hasilnya, banyak gambar muncul, beberapa di antaranya sangat indah.  Ini adalah gambar mikroskopis optik dari matriks silikon. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/21e/bfb/03121ebfb9b91c9b4b68c71664df2869.jpg"><br>  <i><font color="gray">Pandangan umum dari rangkaian mikro di bawah mikroskop optik</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d9a/131/5b7/d9a1315b7eb9403fd06e38b06229f01d.jpg"><br>  <i><font color="gray">Pandangan umum dari rangkaian mikro di bawah mikroskop optik</font></i> <br><br>  Gambar juga diambil dari area spesifik dari matriks menggunakan mikroskop elektron pemindaian.  Dengan voltase berbeda, persiapan permukaan berbeda, dan peralatan berbeda. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3a/e7a/1b0/d3ae7a1b0d68eb0bd0400c56eecad6fa.jpg"><br>  <i><font color="gray">Gambar SEM sel flash.</font></i>  <i><font color="gray">Tidak menampilkan data</font></i> <br><br>  Sayangnya, tidak ada gambar ini yang menunjukkan isi sebenarnya dari memori flash. <br><br>  Skorobogatov memiliki satu metode terakhir, yang hanya dapat digunakan jika terjadi kegagalan.  Ini adalah metode yang dipatenkan, yang penggunaannya harus mendapatkan izin dari universitas.  Skorobogatov melakukan tes awal dan mengkonfirmasi bahwa ia dapat membaca data pada chip ini.  Tetapi sebelum melanjutkan, perlu untuk menandatangani NDA, dan karena itu negosiasi diadakan tentang siapa yang akan menerima konten dari firmware yang diekstraksi. <br><br>  Pada akhirnya, NDA menandatangani yayasan Nightscout, dan mengambil tanggung jawab untuk mencegah pengungkapan yang tidak sah atas metode dan hasil ekstraksi memori. <br><br>  Hasil dari perjanjian dan pekerjaan ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">adalah artikel luar biasa yang</a> ditulis oleh Dr. Sergei Skorobogatov, serta kode firmware.  Dari pertama kali ada beberapa kesalahan dalam kode, tetapi ini sudah cukup untuk memulai.  Di Hackathon Spring Nightscout, Joe menoleh ke teman-temannya jika ada yang ingin melakukan pembongkaran.  Tidak ada yang mengangkat tangannya.  Mengubah instruksi prosesor menjadi sesuatu yang dapat dimengerti adalah pekerjaan yang melelahkan, dan sangat sedikit orang yang tahu bagaimana melakukannya.  Saya mencoba mempelajari assembler menggunakan dokumentasi CPU, tetapi saya meraih sangat sedikit dan kecewa.  Lainnya optimis meminta kode firmware dengan harapan kemajuan cepat, kemudian menyadari skala dan kompleksitas tugas - dan diam-diam jatuh. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b4/ab1/8f8/5b4ab18f82c273633dab9f193d69d331.png"><br>  <i><font color="gray">Contoh pembongkaran instruksi SC908</font></i> <br><br>  Ternyata Joe juga memiliki pengalaman luas bekerja dengan assembler, dan ia mulai melakukan tugas yang sulit ini.  Pada bulan Juli, Dr. Skorobogatov menyelesaikan operasi ekstraksi memori kedua dengan kesalahan yang jauh lebih sedikit.  Selama musim panas, Joe Moran bekerja tanpa lelah untuk menampilkan sejumlah besar instruksi prosesor dan secara bertahap mengintegrasikannya ke dalam keseluruhan gambar pseudocode modul. <br><br>  Pada akhirnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ken Shirriff</a> , seorang ahli teknik perangkat keras terbalik, bergabung dengan kami, dan ia sangat mempercepat prosesnya.  Bersama-sama, Joe dan Ken akhirnya menerjemahkan kode yang cukup untuk menemukan fungsi yang mengkode nonce.  Ini terjadi pada bulan September 2017. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d93/1d5/a00/d931d5a000713fdefa9f865744a5b6a2.gif"></div><br><br><h1>  RileyLink dan Loop </h1><br>  Kami memperbarui skrip Python openomni, tetapi sekarang saatnya untuk fokus pada RileyLink + iOS, jadi saya mulai bekerja pada OmniKit dan pembaruan firmware untuk RileyLink.  Saya percaya bahwa kami memiliki dasar-dasar protokol, dan sisanya hanya detail.  Sekali lagi, benar-benar meremehkan berapa yang akan datang. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f5/710/6d8/4f57106d8931a3e2b5f01e2a8fd8f9db.jpg"><br><br>  Saya harus menulis firmware baru yang menangani modulasi dan pengkodean modul.  Saya juga harus menulis ulang bagaimana dua chip pada RL berbicara satu sama lain untuk memproses nol, karena dalam Medtronic nol adalah ujung khusus dari paket marker.  Sebagian besar Loop harus dirancang ulang untuk mendukung banyak pompa, serta antarmuka baru untuk mendukung pemasangan, penonaktifan, dan penanganan kesalahan.  Untungnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nate Racklift</a> meletakkan dasar yang kuat di Loop untuk membuat ini semua mungkin. <br><br>  Sementara itu, pekerjaan berlanjut untuk memahami format tim.  Semuanya didokumentasikan dengan cermat pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">openomni wiki</a> , dokumentasi protokol yang paling komprehensif.  Joe, Evarist dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elke JÃ¤ger</a> telah melakukan pekerjaan yang sangat hebat dari waktu ke waktu dalam memecahkan kode pesan dan memperbarui halaman.  Berbagai anggota saluran Slack telah berkontribusi pada penangkapan paket PDM dan modul untuk membantu upaya decoding keseluruhan. <br><br>  Decoding adalah pekerjaan yang menyenangkan, dengan banyak kemenangan kecil, karena setiap komponen dari masing-masing tim mendekripsi, dan saya sangat suka mengerjakan bagian ini, secara bertahap menambahkan kode ke Loop.  Pada April 2018, saya berbagi di Slack bahwa saya membuat "kanulasi primer dipasangkan melalui iPhone + RL sesuai dengan jadwal basal yang diprogram, dan kemudian 5 unit menjadi sakit." <br><br>  Firmware RL 2.0 selesai pada Juli 2018, dan pengiriman baru sudah sesuai dengannya.  Diharapkan papan ini dapat digunakan dengan Loop dan Omnipod, tetapi antena 915 MHz yang ada terlalu buruk untuk bekerja secara efektif pada 433 MHz. <br><br>  Decoding dan implementasi telah mengalami kemajuan signifikan selama musim panas, dan Loop secara bertahap mendekati kinerja.  Joe melakukan hal yang luar biasa dengan memberi saya dana jadi saya berhenti dari pekerjaan saya dan fokus pada proyek ini, dan akhirnya saya bergabung dengan tim Tidepool yang luar biasa.  Tentu saja, di bidang DIY dan peraturan perundang-undangan tentang peralatan medis ada lebih banyak peristiwa yang tidak akan saya bahas, tetapi itu adalah musim panas yang sangat menarik! <br><br><h1>  Screamers </h1><br>  Ketika lebih banyak fungsi muncul di driver, saya menghubungkannya ke Loop, menyalakan kemampuan untuk mengkonfigurasi pengiriman tepat waktu.  Pada tahap ini, modul "mencolok" sering diperoleh ketika beberapa pemeriksaan modul internal menemukan masalah dan dia berhenti memberikan insulin. <br><br>  Tapi ini tampaknya menjadi masalah yang dapat dipecahkan, karena kami terus menemukan perbedaan kecil dalam paket Loop dan PDM asli saat mengirim perintah secara manual, dan saya berasumsi bahwa jika kami memperbaiki semuanya, "jeritan" akan berhenti. <br><br><h1>  Lingkaran kerja! </h1><br>  Pada 3 Oktober 2018, Joe mengenakan modul Loop yang dikelola dan menjadi pengguna Loop Omnipod pertama, meskipun dia tidak memberi tahu saya segera karena dia tahu bahwa saya akan khawatir.  Ketika dia memberi tahu saya, saya masih khawatir.  Kami melihat bagaimana modul bekerja, dan memahami fungsionalitas, dan algoritma dasar diuji untuk waktu yang lama, tetapi masih ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c74/adc/6ec/c74adc6ecee823d919dbf3162b120e5c.png"><br><br>  Sebulan kemudian, di hackathon Nightscout pada bulan November 2018, beberapa petualang memutuskan untuk mencobanya sendiri, dan juga menjadi bagian dari kelompok pengujian tertutup kecil yang akan tumbuh hingga lebih dari 30 orang sebelum kode diterbitkan. <br><br>  Sayangnya, kami masih menjumpai modul "jeritan", sering terjadi sebelum selesainya penggunaan tiga hari penuh, dan kami dengan hati-hati membandingkan perintah Loop dengan sampel PDM.  Dalam proses ini, Elke sangat berguna: ia menulis skrip untuk secara otomatis memeriksa perintah dengan versi asli.  Saya mulai khawatir bahwa operasi modul yang terputus-putus disebabkan oleh peningkatan kebutuhan baterai untuk komunikasi setiap lima menit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e92/90b/39b/e9290b39bd5057064ebaf3dfed0e8980.png"><br>  <i><font color="gray">Keran regulator tegangan di modul, dibor melalui plastik panel belakang, pada superglue</font></i> <br><br>  Oleh karena itu, saya mulai mengukur tegangan suplai modul menggunakan Arduino, menulis data dan menyimpannya dalam database lokal untuk visualisasi.  Saya membandingkan PDM dan Loop. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/701/02d/d09/70102dd0984ee469ff50a75f4912f8bc.png"><br>  <i><font color="gray">Perubahan jangka panjang pada tegangan pasokan modul</font></i> <br><br>  Sayangnya, ini juga menjadi jalan buntu;  menggunakan PDM dan menyuntikkan insulin dalam jumlah besar, saya bisa membawa modul ke tegangan yang lebih rendah daripada selama masa pakai modul Loop, dan tidak bisa membuat modul â€œmenjeritâ€.  Sepertinya stres itu bukan masalah, pasti ada yang lain. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc6/4bc/e44/fc64bce4473247b8d55f69a3d2bcab58.jpg"><br>  <i><font color="gray">RileyLinks dengan antena koil 955 MHz (kiri) dan 433 MHz (kanan)</font></i> <br><br>  Pada titik tertentu, saya perhatikan bahwa jika pertukaran pesan dengan modul gagal, modul terkadang terus mencoba untuk mengakhiri pertukaran dengan mengirim ulang paket berulang kali.  Log penguji juga menunjukkan banyak gangguan, jadi saya mulai bereksperimen dengan antena.  Kedua masalah tersebut harus terkait dengan kualitas komunikasi.  Saya berencana untuk mencoba antena yang berbeda dan memesannya di berbagai tempat di Internet, tetapi saya tidak punya waktu untuk mengujinya sampai ini menjadi prioritas. <br><br>  Saya memiliki beberapa antena fleksibel 433 MHz yang dapat dipasang ke bagian dalam kandang RL.  Mereka sering menunjukkan kinerja yang lebih baik dalam beberapa skenario, tetapi tidak dalam skenario lain;  terlalu tidak bisa diandalkan.  Ketika saya sampai di reel, itu menunjukkan kinerja yang baik dengan sangat konsisten dan pada rentang yang sangat menakjubkan.  Saatnya membuat kasus baru untuk RileyLink. <br><br>  Dengan antena baru dan beberapa optimasi yang mengurangi olahpesan sambil tetap melakukan penyesuaian setiap 5 menit, jeritan menjadi sangat jarang.  Mungkin sebanding dengan penggunaan modul biasa dengan PDM.  Selama 7.500 jam terakhir pengujian real-time, 94% dari modul selesai tanpa gagal. <br><br><h1>  Pengujian dan dokumentasi </h1><br>  Grup pengujian perlahan-lahan tumbuh: pengguna baru terus-menerus bergabung dengan sistem, yang dengan tampilan segar dapat mengevaluasi bagian mana yang terlihat membingungkan.  Penguji ini memasang banyak modul mencolok dan membuat kontribusi yang sangat besar untuk meningkatkan kinerja Loop dengan Omnipod.  Pada dasarnya, mereka mengirim laporan masalah dan log kerja. <br><br>  Laporan-laporan ini memiliki log pesan yang dapat dianalisis menggunakan alat yang dibuat oleh Elke.  Ini memberi ide jika kita mendapat perintah yang menyimpang, dan juga memungkinkan Anda untuk mengumpulkan statistik pada bagian tertentu dari interaksi Loop dengan modul. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Marion Barker</a> bergabung dengan kelompok pengujian dan menambahkan pelaporan khusus dan statistik tambahan tentang kemajuan pengujian - dan kami dapat menggunakan statistik modul suksesnya terhadap kegagalan agar memiliki gagasan kemajuan tingkat tinggi. <br><br>  Pada akhirnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Katie DiSimone</a> bergabung dengan kelompok pengujian.  Dia memulai restrukturisasi besar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">loopdocs.org</a> dengan dokumentasi tentang penggunaan Loop dengan banyak perangkat.  Menunggu versi Loop yang bekerja dengan Omnipod sangat tinggi, dan tanpa dokumentasi yang baik jelas bahwa kami akan kewalahan dengan pertanyaan yang sama. <br><br><h1>  Fitur Lingkaran Baru </h1><br>  Integrasi dengan Omnipod memerlukan pemikiran ulang dari beberapa elemen antarmuka dan penambahan kontrol baru.  Modul tidak melaporkan baterai, dan pengguna dapat melakukan sedikit dengan biaya rendah jika ini terjadi, jadi menampilkan widget tingkat baterai tidak masuk akal.  Selain itu, tanpa antarmuka pengguna pada pompa, pengguna harus dapat dengan cepat membatalkan bolus.  Ikon tangki menggambarkan tangki Medtronic, jadi kami ingin membuatnya kembali.  Terima kasih kepada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Paul Forgione</a> untuk mengembangkan logo modul, yang sekarang menunjukkan tingkat tangki. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ed/2ff/020/0ed2ff02079b5cbaf6606c21467577ee.png"><br><br><h1>  Ucapan Terima Kasih </h1><br>  Terima kasih kepada semua orang yang telah membantu kami melangkah sejauh ini sehingga kami menyadari tujuan yang telah kami tetapkan sejak lama.  Saya tahu bahwa saya tidak menyebutkan semua yang terlibat dan tidak semua acara.  Ini tidak mungkin dalam satu artikel, dan saya hanya punya pengalaman pribadi.  Sulit membayangkan berapa jam yang dibutuhkan.  Jika Anda menambahkan semuanya, saya yakin itu adalah angka yang mengejutkan.  Belum lagi pekerjaan menciptakan Omnipod itu sendiri, yang menurut saya, menaungi semua upaya ini.  Jadi terima kasih semuanya.  Selain itu, banyak dari jam-jam ini seharusnya dihabiskan bersama keluarga.  Saya sangat menghargai pengertian istri dan anak-anak saya karena waktu yang saya habiskan untuk itu, dan saya ingin berterima kasih kepada mereka juga. <br><br><h1>  Catatan </h1><br>  Saya harus menyebutkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Joachim Ornstedt</a> sebagai salah satu kontributor decoding openomni, serta pencipta mungkin integrasi pertama dengan omnipod.  Dia membangun perangkat yang menggunakan optical character recognition (OCR) untuk mengekstraksi data dari PDM, dan menghubungkan tombol angka ke PDM fisik melalui mikrokontroler lain.  Pendekatan ini sulit untuk diukur, tetapi sangat cerdas dan melewati banyak masalah yang harus kami hadapi dengan solusi berdasarkan RE.  Saya benar-benar mengagumi bagaimana dia mengatasi masalah dan mengatur kerja untuk sebagian kecil dari waktu yang dibutuhkan untuk membuat perangkat bekerja dengan Loop. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id450962/">https://habr.com/ru/post/id450962/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id450950/index.html">Dasar-Dasar Aliran Dart</a></li>
<li><a href="../id450952/index.html">Indeks Sedang dan Antibank</a></li>
<li><a href="../id450954/index.html">Bagaimana kami belajar mengeksploitasi Java di Docker</a></li>
<li><a href="../id450956/index.html">Perbandingan COB industri: ISIM vs Kics</a></li>
<li><a href="../id450958/index.html">AnyStub, perpustakaan rintisan koneksi Java</a></li>
<li><a href="../id450964/index.html">Pustaka intrinsik x86 SIMD baru - debug immintrin</a></li>
<li><a href="../id450966/index.html">Merekam video dari komputer lama - metode dari LGR</a></li>
<li><a href="../id450970/index.html">Cara benar-benar membandingkan harga Apple di AS dan Rusia. Pengalaman pribadi</a></li>
<li><a href="../id450972/index.html">Bagaimana cara mengatur studio foto? Kasus Studio Bolshakova</a></li>
<li><a href="../id450974/index.html">Xiaomi Sleep Tracker - Ulasan Sleepace Sleep Dot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>