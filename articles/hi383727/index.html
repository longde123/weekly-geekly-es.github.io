<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå≠ ü§∞üèª üåù ‡§á‡§Ç‡§ü‡•á‡§≤ ‡§è‡§°‡§ø‡§∏‡§® ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§µ‡§ø‡§®‡§ø‡§Æ‡§Ø ‡§°‡•á‡§ü‡§æ ü•â üíá üö¥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=", IoT- , :
 
 1. C++ OpenCV, NodeJS Arduino. , OpenCV, C++.
 
 2. , Arduino . OpenCV , Arduino .
 
 3. NodeJS -, NodeJS, .
 
 
 
 . , .
 
 (Matthias H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>‡§á‡§Ç‡§ü‡•á‡§≤ ‡§è‡§°‡§ø‡§∏‡§® ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§µ‡§ø‡§®‡§ø‡§Æ‡§Ø ‡§°‡•á‡§ü‡§æ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intel/blog/383727/">    ,     IoT-      , :<br>
<br>
<b>1.</b>         C++   OpenCV,     NodeJS  Arduino.     ,      OpenCV,   C++.<br>
<br>
<b>2.</b> ,    Arduino          .      OpenCV   ,    Arduino   .<br>
<br>
<b>3.</b>    NodeJS   -,         NodeJS,    .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><img src="https://habrastorage.org/files/355/c4d/aa6/355c4daa628f4c9083ac37259a963c38.png"></a><br>
<br>
   .   ,               .<br>
<a name="habracut"></a><br>
  (Matthias Han) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>      Arduino  C ++ .     ,  ++  Arduino   ,   Linux-.   ,    C++     .  ,         NodeJS,     C++           NodeJS.<br>
<br>
        ,       .         .           .   -    ,      .    ,          .<br>
<br>
         ¬´-¬ª        Linux.         .   ,             .<br>
<br>
<h2><font color="#0071c5"></font></h2><br>
      .  ‚Äì    ,  ‚Äì  .        .          (DW)   .           .                    , ,  ,  .             .      .           .<br>
<br>
<b> :</b><br>
<br>
<img src="https://habrastorage.org/files/0c4/849/472/0c4849472dc34522ae3299b2ded03d1b.png"><br>
<br>
<b> :</b><br>
<br>
<img src="https://habrastorage.org/files/be7/b09/70a/be7b0970a1294dad8cbcb7865d88cce8.png"><br>
<br>
      .<br>
<br>
             .  -    ,       .  ,   ,    HIGH.    -   ,  .   ,    .      .<br>
<br>
<h2><font color="#0071c5"></font></h2><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/8d7/676/b6b/8d7676b6b72ecd7f0b8c6272eea2873b.jpg"><br>
<br>
 ,   Arduino    NodeJS  .<br>
<br>
<b>     Arduino  NodeJS:</b><br>
<br>
<img src="https://habrastorage.org/files/b4d/d8f/3c5/b4dd8f3c581e4f99b544fd42b3efa9a8.png"><br>
<br>
<b>     NodeJS  Arduino:</b><br>
<br>
<img src="https://habrastorage.org/files/e95/96c/57e/e9596c57ef9d4590bc601552bdbb031f.png"><br>
<br>
 ,      Arduino,      .      NodeJS   .<br>
<br>
   Arduino   ,    ,  GPIO-. ,   Arduino      ‚Ññ3.    -  ,  Arduino           (   ),   : /arduino_notification_out.txt.<br>
<br>
    Arduino   HIGH  ‚Ññ3.     .  ‚Ññ3   ‚Ññ1.  ,       HIGH  ‚Ññ3      ‚Ññ1.<br>
<br>
<h2><font color="#0071c5"> Arduino</font></h2><br>
<pre><code class="hljs cpp"><span class="hljs-keyword">int</span> notifier_pin 	= <span class="hljs-number">3</span>;
<span class="hljs-keyword">int</span> js_subscriber_pin 	= <span class="hljs-number">6</span>;<font></font>
<font></font>
FILE *fromarduino, *toarduino;<font></font>
<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> c;<font></font>
<font></font>
<span class="hljs-comment">// the setup routine runs once when you press reset:</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{                <font></font>
  pinMode(notifier_pin, OUTPUT); <span class="hljs-comment">//Notification pin     </span>
  pinMode(js_subscriber_pin, INPUT_PULLUP); <span class="hljs-comment">//interrupt pin for reading message from JS    </span>
  attachInterrupt(js_subscriber_pin, subscriberEvent, RISING); <span class="hljs-comment">//Subscribe to interrupt notifications from JavaScript</span>
  Serial.begin(<span class="hljs-number">9600</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//Read message from js notification file</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">subscriberEvent</span><span class="hljs-params">()</span> </span>{<font></font>
  <font></font>
   toarduino = fopen(<span class="hljs-string">"/js_notification_out.txt"</span>,<span class="hljs-string">"r"</span>);  <span class="hljs-comment">//Opening message from JS</span>
   <span class="hljs-keyword">if</span> (toarduino)<font></font>
   {<font></font>
    <span class="hljs-keyword">while</span> ((c = getc(toarduino)) != EOF)<font></font>
    {<font></font>
      <span class="hljs-keyword">if</span>(c != <span class="hljs-number">10</span>)<span class="hljs-comment">//new line</span><font></font>
      {<font></font>
           Serial.print((<span class="hljs-keyword">char</span>)c);<font></font>
      }<font></font>
    }<font></font>
    Serial.println(<span class="hljs-string">""</span>);<font></font>
    Serial.println(<span class="hljs-string">"----------------"</span>);<font></font>
    fclose(toarduino);<font></font>
   }  <font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// the loop routine runs over and over again forever:</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span>(i &lt; <span class="hljs-number">50</span>)<font></font>
  {<font></font>
    i = i + <span class="hljs-number">1</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    i = <span class="hljs-number">0</span>;   <font></font>
  }<font></font>
  <font></font>
  publishData();<font></font>
  notifyWorld();  <font></font>
  delay(<span class="hljs-number">1000</span>);               <span class="hljs-comment">// wait for a second</span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">publishData</span><span class="hljs-params">()</span>
</span>{<font></font>
  fromarduino = fopen (<span class="hljs-string">"/arduino_notification_out.txt"</span>, <span class="hljs-string">"w+"</span>);
  <span class="hljs-built_in">fprintf</span>(fromarduino, <span class="hljs-string">"[%d]"</span>, i);<font></font>
  fclose(fromarduino);  <font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//Nofity any body connected to this interrupt  (C++ program and NodeJS) program</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">notifyWorld</span><span class="hljs-params">()</span>
</span>{<font></font>
    digitalWrite(notifier_pin, HIGH);<font></font>
    delay(<span class="hljs-number">200</span>);<font></font>
    digitalWrite(notifier_pin, LOW);<font></font>
}</code></pre><br>
  NodeJS      ‚Ññ1.  ,     HIGH,         Arduino. NodeJS   -   .      ¬´     Arduino  NodeJS¬ª.<br>
<br>
<h2><font color="#0071c5"> NodeJS</font></h2><br>
<pre><code class="hljs php"><span class="hljs-keyword">var</span> mraa = <span class="hljs-keyword">require</span>(<span class="hljs-string">"mraa"</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-keyword">require</span>(<span class="hljs-string">'fs'</span>);<font></font>
<font></font>
<font></font>
<span class="hljs-comment">/**********Read notification from arduino*************/</span>
<span class="hljs-keyword">var</span> subscriber_pin = <span class="hljs-keyword">new</span> mraa.Gpio(<span class="hljs-number">1</span>);<font></font>
    subscriber_pin.dir(mraa.DIR_IN);<font></font>
    subscriber_pin.isr(mraa.EDGE_RISING, subscriberEvent); <span class="hljs-comment">//Subscribe to interrupt notifications from Arduino</span><font></font>
    <font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscriberEvent</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> contents = fs.readFileSync(<span class="hljs-string">'/arduino_notification_out.txt'</span>).toString();<font></font>
    console.log(<span class="hljs-string">"Message from Arduino:"</span> + contents);        <font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/********** Trigger message sending interrupt every 20 seconds *************/</span>
<span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> notifier_pin = <span class="hljs-keyword">new</span> mraa.Gpio(<span class="hljs-number">5</span>);<font></font>
notifier_pin.dir(mraa.DIR_OUT);<font></font>
<font></font>
setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<font></font>
    counter++;<font></font>
        fs.writeFileSync(<span class="hljs-string">"/js_notification_out.txt"</span>, <span class="hljs-string">"NodeJS: ["</span> + counter + <span class="hljs-string">"]\n"</span>);<font></font>
        notifyWorld();<font></font>
        counter = <span class="hljs-number">0</span>;<font></font>
},<span class="hljs-number">20000</span>);<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notifyWorld</span>(<span class="hljs-params"></span>)
</span>{<font></font>
    notifier_pin.write(<span class="hljs-number">1</span>);<font></font>
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<font></font>
        notifier_pin.write(<span class="hljs-number">0</span>);<font></font>
    },<span class="hljs-number">200</span>);<font></font>
}</code></pre><br>
        NodeJS  Arduino.      ¬´     NodeJS  Arduino¬ª.<br>
<br>
       ,   .<br>
<br>
<h2><font color="#0071c5">  </font></h2><br>
         ,        C++      NodeJS.     .<br>
<br>
<h2><font color="#0071c5">  </font></h2><br>
  ,      .       GPIO-.          ,       GPIO-.   ,         ,     GPIO.        ,   JSON-   ,   eventsource, event data  ..  ,       .   .</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi383727/">https://habr.com/ru/post/hi383727/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi383715/index.html">‡§Ø‡§æ‡§§‡•ç‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡•à‡§ï‡•á‡§ü ‡§ï‡•ã ‡§ï‡§ø‡§ï‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§™‡§∞ $ 20 ‡§π‡§ú‡§æ‡§∞ ‡§ï‡•á ‡§¨‡§ú‡§æ‡§Ø $ 8 ‡§Æ‡§ø‡§≤‡§ø‡§Ø‡§® ‡§Æ‡§ø‡§≤‡•á</a></li>
<li><a href="../hi383717/index.html">VOICe ‡§∏‡§æ‡§â‡§Ç‡§° ‡§µ‡§ø‡§ú‡§® - ‡§¨‡•ç‡§∞‡•á‡§ï‡§•‡•ç‡§∞‡•Ç ‡§∏‡•á ‡§è‡§ï ‡§ï‡§¶‡§Æ ‡§¶‡•Ç‡§∞</a></li>
<li><a href="../hi383719/index.html">‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ Asus X555LF ‡§≤‡•à‡§™‡§ü‡•â‡§™</a></li>
<li><a href="../hi383721/index.html">‡§™‡§æ‡§∞‡•ç‡§∏‡§≤ ‡§ï‡•Ä ‡§µ‡§æ‡§™‡§∏‡•Ä</a></li>
<li><a href="../hi383725/index.html">‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§Æ‡§æ‡§µ‡•á‡§∂ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•Ä‡§¨‡•ã‡§∞‡•ç‡§° ‡§∞‡•ã‡§∂‡§®‡•Ä, ‡§≤‡•á‡§ï‡§ø‡§® "‡§¶‡§ø‡§Æ‡§æ‡§ó" ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ</a></li>
<li><a href="../hi383729/index.html">BlackBerry Priv (‡§è‡§ï‡•ç‡§∏‡§µ‡•Ä‡§®‡§ø‡§∏) ‡§®‡§µ‡§Ç‡§¨‡§∞ ‡§Æ‡•á‡§Ç ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à</a></li>
<li><a href="../hi383733/index.html">‡§™‡•É‡§•‡•ç‡§µ‡•Ä ‡§™‡§∞ ‡§™‡•á‡§°‡§º ‡§™‡§π‡§≤‡•á ‡§ï‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§∏‡•á ‡§¨‡§°‡§º‡•á ‡§™‡§∞‡§ø‡§Æ‡§æ‡§£ ‡§ï‡§æ ‡§ï‡•ç‡§∞‡§Æ ‡§¨‡§® ‡§ó‡§è</a></li>
<li><a href="../hi383735/index.html">Meizu MX5 ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç: ‡§Æ‡§ß‡•ç‡§Ø ‡§∏‡§æ‡§Æ‡•ç‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡•á ‡§Ø‡•Ç‡§∞‡•ã‡§™‡•Ä‡§Ø ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ</a></li>
<li><a href="../hi383737/index.html">‡§ï‡•à‡§∏‡•á ‡§¨‡•á‡§≤‡§æ‡§∞‡•Ç‡§∏ 3 ‡§°‡•Ä ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡§∞ ‡§ï‡•ã ‡§Æ‡§Ç‡§ú‡•Ç‡§∞‡•Ä ‡§¶‡•á ‡§¶‡•Ä</a></li>
<li><a href="../hi383741/index.html">‡§®‡§æ‡§∏‡§æ ‡§®‡•á ‡§ß‡•Ç‡§Æ‡§ï‡•á‡§§‡•Å ‡§î‡§∞ ‡§ï‡•ç‡§∑‡•Å‡§¶‡•ç‡§∞‡§ó‡•ç‡§∞‡§π‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§°‡§º‡§§‡•ç‡§µ‡•Ä‡§Ø ‡§π‡•á‡§ú‡§π‡•ã‡§ó ‡§∞‡•ã‡§¨‡•ã‡§ü ‡§ï‡§æ ‡§è‡§ï ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>