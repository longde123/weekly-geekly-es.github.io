<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïπÔ∏è üçπ üòú Raus aus dem Kaninchenbau SPA mit modernen Schienen ‚úã üîé üèµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR: Der SPA-Trail ist dunkel und voller Schrecken. Sie k√∂nnen furchtlos gegen sie k√§mpfen ... oder einen anderen Weg w√§hlen, der Sie zum richtigen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Raus aus dem Kaninchenbau SPA mit modernen Schienen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417875/"> TL; DR: Der SPA-Trail ist dunkel und voller Schrecken.  Sie k√∂nnen furchtlos gegen sie k√§mpfen ... oder einen anderen Weg w√§hlen, der Sie zum richtigen Ort f√ºhrt: moderne Schienen. <br><br><img src="https://habrastorage.org/webt/bm/nz/o6/bmnzo6gdhrpqqdufks3kgylhxjw.jpeg"><br><br>  Ich erinnere mich, dass ich dachte, Rails habe sich auf das falsche Ziel konzentriert, als DHH 2012 Turbolinks ank√ºndigte.  Dann war ich √ºberzeugt, dass die sofortige Reaktionszeit w√§hrend der Benutzerinteraktion der Schl√ºssel zu √ºberlegenem UX war.  Aufgrund von Netzwerkverz√∂gerungen ist diese Interaktivit√§t nur m√∂glich, wenn Sie die Netzwerkabh√§ngigkeit minimieren und anstelle von Netzwerkanrufen den gr√∂√üten Teil des Status auf dem Client beibehalten. <br><br>  Ich dachte, dass es f√ºr die Anwendungen notwendig war, an denen ich arbeitete.  Mit dieser Meinung habe ich viele Ans√§tze und Frameworks f√ºr die Implementierung derselben Vorlage ausprobiert: Single-Page-Anwendungen (SPA).  Ich glaubte, dass SPA die Zukunft ist.  Ein paar Jahre sp√§ter bin ich mir nicht sicher, wie die Zukunft aussehen wird, aber ich m√∂chte definitiv eine Alternative finden. <br><a name="habracut"></a><br><h2>  Kaninchenbau SPA </h2><br>  Eine einseitige Anwendung ist eine JavaScript-Anwendung, die nach dem Herunterladen die volle Kontrolle erh√§lt, ohne die Seite neu laden zu m√ºssen: Rendern, Empfangen von Daten vom Server, Verarbeiten der Benutzerinteraktion, Aktualisieren des Bildschirms ... <br><br>  Solche Anwendungen sehen nativer aus als herk√∂mmliche Webseiten, bei denen die Anwendung vom Server abh√§ngt.  Wenn Sie beispielsweise Trello verwenden, k√∂nnen Sie feststellen, wie schnell Karten erstellt werden. <br><br>  Gro√üe Verantwortung geht nat√ºrlich mit gro√üer Kraft einher.  In herk√∂mmlichen Webanwendungen enth√§lt Ihre Serveranwendung ein Dom√§nenmodell und Gesch√§ftsregeln, eine Datenzugriffstechnologie f√ºr die Arbeit mit einer Datenbank und eine Controller-Schicht, um zu steuern, wie HTML-Seiten als Antwort auf HTTP-Anforderungen zusammengestellt werden. <br><br>  C SPA ist etwas komplizierter.  Sie ben√∂tigen noch eine Serveranwendung, die Ihr Dom√§nenmodell und Ihre Regeln enth√§lt, einen Webserver, eine Datenbank und eine Art Datenzugriffstechnologie ... und eine Reihe zus√§tzlicher Dinge: <br><br>  F√ºr Server: <br><br><ul><li>  Eine API, die die Datenanforderungen Ihres Kunden erf√ºllt </li><li>  Ein JSON-Serialisierungssystem zum Datenaustausch mit dem Client und ein Caching-System, das dies unterst√ºtzt </li></ul><br>  F√ºr den neuen JavaScript-Client: <br><br><ul><li>  Vorlagensystem zum Konvertieren von Daten in HTML </li><li>  Pr√§sentation Ihres Domain-Modells und Ihrer Regeln </li><li>  Die Datenzugriffsschicht in der Clientanwendung zum √úbertragen von Daten an den Server </li><li>  System zum Aktualisieren von Ansichten bei Daten√§nderungen </li><li>  Ein System zum Verkn√ºpfen von URLs und Bildschirmen (Ich hoffe, Sie verwenden nicht f√ºr alles eine Adresse, es sieht nicht wie eine Webanwendung aus.) </li><li>  Ein System zum Verkleben aller Komponenten, die erforderlich sind, um Bildschirme anzuzeigen und Daten daf√ºr zu erhalten </li><li>  Neue Vorlagen und Architektur f√ºr die Organisation von allem, wann </li><li>  System zur Fehlerbehandlung, Protokollierung, Ausnahmeverfolgung usw. </li><li>  System zum Generieren von JSON f√ºr Serveranforderungen </li><li>  Automated Testing Framework zur Unterst√ºtzung Ihres SPA </li><li>  Eine zus√§tzliche Reihe von Tests zum Schreiben und Unterst√ºtzen </li><li>  Ein zus√§tzlicher Satz von Tools zum Zusammenstellen, Packen und Bereitstellen einer neuen Anwendung </li></ul><br>  Insgesamt haben Sie mit SPA einen weiteren Antrag auf Unterst√ºtzung.  Und eine neue Reihe von Problemen zu l√∂sen.  Beachten Sie, dass Sie eine Anwendung nicht durch eine andere ersetzen k√∂nnen.  Sie ben√∂tigen weiterhin die Serveranwendung (jetzt wird JSON anstelle von HTML gerendert). <br><br>  Wenn Sie noch nie mit SPA gearbeitet haben, k√∂nnen Sie die Schwierigkeiten, auf die Sie sto√üen werden, untersch√§tzen.  Ich wei√ü das, weil ich in der Vergangenheit die gleichen Fehler gemacht habe.  JSON rendern?  Ich kann damit umgehen.  Ein reichhaltiges Domain-Objektmodell in JavaScript?  Das klingt lustig.  Und Sie wissen, dieses Framework wird all diese Probleme l√∂sen.  Toller Kuchen! <br><br>  <b>Falsch.</b> <br><br><h2>  API und Datenaustausch. </h2><br>  Die Kommunikation zwischen Ihrer neuen Anwendung und dem Server ist ein komplexes Problem. <br><br>  Es gibt zwei entgegengesetzte Kr√§fte: <br><br><ul><li>  Sie sollten so wenig Serveranforderungen wie m√∂glich stellen, um die Leistung zu verbessern. </li><li>  Das Konvertieren eines einzelnen Datensatzes in JSON ist einfach.  Das Mischen gro√üer Modelle verschiedener Datens√§tze, um die Anzahl der Abfragen zu minimieren, ist jedoch √ºberhaupt nicht m√∂glich.  Sie m√ºssen die Serialisierungslogik sorgf√§ltig entwickeln, um die Anzahl der Datenbankabfragen zu optimieren und die Leistung auf dem Niveau zu halten. </li></ul><br>  Dar√ºber hinaus m√ºssen Sie √ºberlegen, was und wann f√ºr jeden Bildschirm heruntergeladen werden soll.  Ich meine, Sie brauchen ein Gleichgewicht zwischen Bootstrap, dem, was Sie sofort brauchen und dem, was tr√§ge geladen werden kann, und entwickeln eine API, mit der Sie dies tun k√∂nnen. <br><br>  Einige Standards k√∂nnen hier helfen.  JSON-API zur Standardisierung des JSON-Formats;  oder GraphQL, um nur die erforderlichen Daten in einer Abfrage auszuw√§hlen, die so komplex wie erforderlich sind.  Aber keiner von ihnen wird dich retten vor: <br><ul><li>  Die Ausarbeitung jedes Datenaustauschs </li><li>  Implementieren von Abfragen zur effizienten Auswahl von Daten auf dem Server </li></ul><br>  Und beide Aspekte bedeuten ausreichend zus√§tzliche Arbeit. <br><br><h2>  Startzeit </h2><br>  Die Leute sind es gewohnt, SPAs mit Geschwindigkeit zu verkn√ºpfen, aber die Wahrheit ist, dass es nicht so einfach ist, sie schnell zu laden.  Daf√ºr gibt es viele Gr√ºnde: <br><br><ul><li>  Eine Anwendung ben√∂tigt Daten, bevor etwas gerendert wird, und es braucht Zeit, um eine ausreichend gro√üe Menge an JavaScript zu analysieren. </li><li>  √úber die anf√§ngliche HTTP-Anforderung zum Herunterladen der Anwendung hinaus m√ºssen Sie normalerweise eine oder mehrere Anforderungen stellen, um die zum Rendern des Bildschirms erforderlichen JSON-Daten abzurufen. </li><li>  Der Client muss JSON in HTML konvertieren, um zumindest etwas anzuzeigen.  Abh√§ngig vom Ger√§t und der Menge des zu konvertierenden JSON kann dies zu sp√ºrbaren Verz√∂gerungen f√ºhren. </li></ul><br>  Dies bedeutet nicht, dass es unm√∂glich ist, das SPA zum schnellen Laden zu zwingen.  Ich sage nur, dass es schwierig ist und Sie sich darum k√ºmmern sollten, da es nicht mit der SPA-Architektur einhergeht. <br><br>  Zum Beispiel hat Discourse, ein Ember-basiertes SPA, fantastische Ladezeiten, aber unter anderem laden sie eine gro√üe Menge von JSON-Daten als Teil des anf√§nglichen HTML-Codes vor, um keine zus√§tzlichen Anforderungen zu stellen.  Und ich stelle fest, dass das Discourse-Team im guten Sinne der Geschwindigkeit verr√ºckt ist und ihre F√§higkeiten weit √ºber dem Durchschnitt liegen.  Denken Sie dar√ºber nach, bevor Sie dasselbe problemlos in Ihrem SPA reproduzieren k√∂nnen. <br><br>  Eine ehrgeizige L√∂sung f√ºr dieses Problem ist isomorphes JavaScript: Rendern Sie Ihre Startseite auf dem Server und geben Sie sie schnell an den Client weiter, w√§hrend sie im Hintergrund des SPA geladen wird und die volle Kontrolle erh√§lt, wenn Sie bereit sind. <br><br>  Dieser Ansatz erfordert das Ausf√ºhren der JavaScript-Laufzeit auf dem Server und ist auch nicht ohne technische Probleme.  Entwickler sollten beispielsweise SPA-Ladeereignisse ber√ºcksichtigen, wenn sich der Ladevorgang √§ndert. <br><br>  Ich mag die M√∂glichkeit, den Code in dieser Idee wiederzuverwenden, aber ich habe keine Implementierung gesehen, die es mir erm√∂glichen w√ºrde, in die entgegengesetzte Richtung zu gehen.  Au√üerdem erscheint mir dieser Seitenrenderprozess sehr lustig: <br><br>  - Server: Anfrage an die Server-API <br>  - Server: Datenbankabfrage <br>  - Server: JSON generieren <br>  - Server: Konvertiert JSON in HTML <br>  - Client: Erstes HTML anzeigen <br>  - Client: SPA herunterladen <br>  - Client: Analysieren Sie den anf√§nglichen HTML-Code und abonnieren Sie DOM-Ereignisse <br><br>  K√∂nnten Sie einfach die Daten aus der Datenbank anfordern, den HTML-Code generieren und mit der Arbeit beginnen? <br><br>  Dies ist nicht ganz fair, weil Sie kein SPA sein werden und weil der gr√∂√üte Teil dieser Magie hinter dem Framework verborgen ist, aber es scheint mir immer noch falsch. <br><br><h2>  Architektur </h2><br>  Das Entwickeln von Anwendungen mit einer umfangreichen Benutzeroberfl√§che ist schwierig.  Dies alles ist darauf zur√ºckzuf√ºhren, dass dies eines der Probleme ist, die zur Entstehung eines objektorientierten Ansatzes und vieler Entwurfsmuster gef√ºhrt haben. <br><br>  Das Verwalten des Kundenstatus ist schwierig.  Herk√∂mmliche Websites konzentrieren sich normalerweise auf Bildschirme mit Einzelverantwortung, die beim Neustart ihren Status verlieren.  In SPA ist die Anwendung daf√ºr verantwortlich, dass alle Status- und Bildschirmaktualisierungen w√§hrend der Verwendung konsistent sind und reibungslos verlaufen. <br><br>  Wenn Sie in der Praxis damit begonnen haben, JavaScript in kleinen Teilen zu schreiben, um die Interaktion zu verbessern, m√ºssen Sie in SPA Tonnen zus√§tzlichen JavaScript-Code schreiben.  Hier sollten Sie sicherstellen, dass Sie alles richtig machen. <br><br>  Es gibt so viele verschiedene Architekturen wie SPA-Frameworks: <br><br><ul><li>  Die meisten Frameworks unterscheiden sich von der herk√∂mmlichen MVC-Vorlage.  Ember war urspr√ºnglich von Cocoa MVC inspiriert, hat aber in den letzten Versionen sein Programmiermodell stark ver√§ndert. </li><li>  Es besteht die Tendenz, dass Entwickler Komponenten der herk√∂mmlichen Trennung von Controller und Pr√§sentation vorziehen (einige Frameworks wie Ember und Angular haben in neueren Versionen diesen Ansatz gew√§hlt).  Alle Frameworks implementieren eine Art Einweg-Datenbindung.  Eine doppelseitige Bindung wird aufgrund von Nebenwirkungen, die dazu beitragen k√∂nnen, nicht empfohlen. </li><li>  Die meisten Frameworks enthalten ein Routing-System, mit dem Sie URLs und Bildschirme zuordnen und festlegen k√∂nnen, wie Komponenten f√ºr das Rendern instanziiert werden sollen.  Dies ist ein einzigartiger Webansatz, der auf herk√∂mmlichen Desktop-Schnittstellen nicht vorhanden ist. </li><li>  Die meisten Frameworks trennen HTML-Vorlagen vom JavaScript-Code, aber React mischt HTML-Generierung und JavaScript und ist aufgrund seiner weit verbreiteten Verwendung recht erfolgreich.  Es gibt auch einen Hype um das Einbetten von CSS in JavaScript.  Facebook mit seiner Flux-Architektur hat die Branche stark beeinflusst, und Container wie Redux, Vuex usw. sind stark davon beeinflusst. </li></ul><br>  Von allen Frameworks, die ich gesehen habe, ist Ember mein Favorit.  Ich verehre seine Best√§ndigkeit und die Tatsache, dass er ziemlich stur ist.  Ich mag auch sein Programmiermodell in neueren Versionen, das traditionelle MVC, Komponenten und Routing kombiniert. <br><br>  Andererseits bin ich stark gegen das Flux / Redux-Lager.  Ich habe so viele kluge Leute gesehen, die sie benutzt haben, dass ich mich bem√ºht habe, sie zu studieren und zu verstehen, und nicht ein einziges Mal.  Ich kann nicht anders, als frustriert den Kopf zu sch√ºtteln, wenn ich den Code sehe.  Ich sehe mich beim Schreiben eines solchen Codes nicht gl√ºcklich. <br><br>  Schlie√ülich kann ich die Mischung aus HTML und CSS in Komponenten voller JavaScript-Logik nicht ertragen.  Ich verstehe, welches Problem dies l√∂st, aber die Probleme, die dieser Ansatz mit sich bringt, machen es nicht wert. <br><br>  Lassen wir die pers√∂nlichen Einstellungen. Unter dem Strich haben Sie bei der Auswahl des SPA-Pfads ein sehr schwieriges Problem: die Architektur Ihrer neuen Anwendung korrekt zu erstellen.  Und die Branche ist weit davon entfernt, sich darauf zu einigen.  Jedes Jahr erscheinen neue Frameworks, Vorlagen und Versionen von Frameworks, wodurch sich das Programmiermodell geringf√ºgig √§ndert.  Sie m√ºssen eine Menge Code schreiben und verwalten, der auf Ihrer Architektur basiert. Denken Sie also richtig dar√ºber nach. <br><br><h2>  Codeduplizierung </h2><br>  Wenn Sie mit SPA arbeiten, werden Sie wahrscheinlich auf Codeduplizierungen sto√üen. <br><br>  F√ºr Ihre SPA-Logik m√∂chten Sie ein umfangreiches Modell von Objekten erstellen, die Ihren Dom√§nenbereich und Ihre Gesch√§ftslogik darstellen.  Und f√ºr die Serverlogik ben√∂tigen Sie immer noch dasselbe.  Und es ist eine Frage der Zeit, bis Sie mit dem Kopieren des Codes beginnen. <br><br>  Angenommen, Sie arbeiten mit Rechnungen.  Sie haben wahrscheinlich eine Rechnungsklasse in JavaScript, die eine Gesamtmethode enth√§lt, die den Preis aller Elemente zusammenfasst, damit Sie den Wert rendern k√∂nnen.  Auf dem Server ben√∂tigen Sie au√üerdem die Rechnungsklasse mit der Gesamtmethode, um diese Kosten zu berechnen und per E-Mail zu senden.  Siehst du?  Die Rechnungsclient- und Serverklassen implementieren dieselbe Logik.  Codeduplizierung. <br><br>  Wie oben erw√§hnt, k√∂nnte isomorphes JavaScript dieses Problem mindern und die Wiederverwendung von Code erleichtern.  Und ich sage zu Level, weil die Korrespondenz zwischen dem Client und dem Server nicht immer 1 zu 1 ist.  Sie sollten sicherstellen, dass Code niemals den Server verl√§sst.  Eine gro√üe Menge an Code ist nur f√ºr den Client sinnvoll.  Au√üerdem sind einige Aspekte einfach unterschiedlich (z. B. kann das Serverelement Daten in der Datenbank speichern und der Client kann die Remote-API verwenden).  Die Wiederverwendung von Code, auch wenn dies m√∂glich ist, ist ein komplexes Problem. <br><br>  Sie k√∂nnen darauf wetten, dass Sie kein umfangreiches Modell in Ihrem SPA ben√∂tigen und stattdessen direkt mit JSON / JavaScript-Objekten arbeiten und die Logik auf die Komponenten der Benutzeroberfl√§che verteilen.  Jetzt haben Sie die gleiche Codeduplizierung mit Ihrem UI-Code gemischt, viel Gl√ºck damit. <br><br>  Das Gleiche passiert, wenn Sie Vorlagen zum Rendern von HTML zwischen dem Server und dem Client w√ºnschen.  Wie w√§re es beispielsweise mit der Generierung von Seiten auf dem Server f√ºr Suchmaschinen f√ºr SEO?  Sie m√ºssen Ihre Vorlagen auf dem Server neu schreiben und sicherstellen, dass sie mit dem Client synchronisiert sind.  Wieder Vervielf√§ltigung des Codes. <br><br>  Die Notwendigkeit, die Logik der Muster auf dem Server und dem Client zu reproduzieren, ist meiner Erfahrung nach die Ursache f√ºr das wachsende Ungl√ºck der Programmierer.  Dies einmal zu tun ist normal.  Wenn Sie dies zum 20. Mal tun, werden Sie Ihren Kopf umklammern.  Nachdem Sie dies zum 50. Mal getan haben, werden Sie dar√ºber nachdenken, ob all diese SPA-Teile ben√∂tigt werden. <br><br><h2>  Zerbrechlichkeit </h2><br>  Nach meiner Erfahrung ist die Entwicklung guter SPAs eine viel kompliziertere Aufgabe als das Schreiben von Webanwendungen mit Servergenerierung. <br><br>  Erstens, egal wie vorsichtig Sie sind, egal wie viele Tests Sie schreiben.  Je mehr Code Sie schreiben, desto mehr Fehler werden Sie haben.  Und SPA repr√§sentiert (sorry, wenn ich hart dr√ºcke) einen riesigen Stapel Code zum Schreiben und Unterst√ºtzen. <br><br>  Zweitens ist die Entwicklung einer umfangreichen Benutzeroberfl√§che, wie oben erw√§hnt, kompliziert und f√ºhrt zu komplexen Systemen, die aus vielen miteinander interagierenden Elementen bestehen.  Je komplexer das von Ihnen erstellte System ist, desto mehr Fehler treten auf.  Und im Vergleich zu herk√∂mmlichen Webanwendungen mit MVC ist die SPA-Komplexit√§t einfach verr√ºckt. <br><br>  Um beispielsweise die Konsistenz auf dem Server zu gew√§hrleisten, k√∂nnen Sie Einschr√§nkungen in der Datenbank, der Modellvalidierung und den Transaktionen verwenden.  Wenn etwas schief geht, antworten Sie mit einer Fehlermeldung.  Im Client ist alles etwas komplizierter.  So viel kann schief gehen, weil zu viel passiert.  Es kann sein, dass ein Datensatz erfolgreich gespeichert wurde und ein anderer Datensatz nicht.  Vielleicht sind Sie mitten in einer Operation offline gegangen.  Sie m√ºssen sicherstellen, dass die Benutzeroberfl√§che konsistent bleibt und die Anwendung nach einem Fehler wiederhergestellt wird.  All dies ist nat√ºrlich nur viel komplizierter m√∂glich. <br><br><h2>  Organisatorische Herausforderungen </h2><br>  Es klingt albern, aber um ein SPA zu entwickeln, ben√∂tigen Sie Entwickler, die wissen, was damit zu tun ist.  Gleichzeitig sollten Sie die Komplexit√§t von SPA nicht untersch√§tzen. Sie sollten nicht glauben, dass ein erfahrener Webentwickler mit der richtigen Motivation und dem richtigen Verst√§ndnis ein gro√üartiges SPA von Grund auf neu schreiben kann.  Sie ben√∂tigen die richtigen F√§higkeiten und Erfahrungen oder erwarten wichtige Fehler.  Ich wei√ü das, weil es genau mein Fall ist. <br><br>  Dies ist vielleicht eine wichtigere Herausforderung f√ºr Ihr Unternehmen als Sie denken.  Der SPA-Ansatz ermutigt hochspezialisierte Teams anstelle von Teams von Generalisten: <br><br><ul><li>  SPA-Frameworks sind komplexe Softwareteile, f√ºr deren Produktivit√§t unz√§hlige Stunden Erfahrung erforderlich sind.  Nur die Personen in Ihrem Unternehmen, die diese Stunden mit dem Code verbringen, k√∂nnen diese Anwendungen unterst√ºtzen. </li><li>  SPA-Frameworks erfordern durchdachte und produktive APIs.  Um diese Anforderungen zu erf√ºllen, sind ganz andere F√§higkeiten erforderlich als f√ºr die Arbeit mit SPA. </li></ul><br>  Es besteht die M√∂glichkeit, dass Sie mit Personen zusammen sind, die nicht mit SPA arbeiten k√∂nnen und die nicht auf der Serverseite arbeiten k√∂nnen, einfach weil sie nicht wissen, wie. <br><br>  Diese Spezialisierung ist ideal f√ºr Facebook oder Google und deren Teams, die aus mehreren Schichten von Ingenieurtruppen bestehen.  Aber wird es gut f√ºr Ihr 6-k√∂pfiges Team sein? <br><br><h2>  Moderne Schienen </h2><br>  Es gibt drei Dinge in modernen Rails, die Ihre Meinung √ºber die Entwicklung moderner Webanwendungen √§ndern k√∂nnen: <br><ul><li>  Einer von ihnen ist Turbolinks und dies ist eine Gehirnexplosion </li><li>  Der andere ist ein alter Freund, der heute √ºbersehen wird: SJR-Antworten und einfache AJAX-Anfragen zum Rendern </li><li>  und der letzte wurde k√ºrzlich hinzugef√ºgt: Stimulus </li></ul><br>  Es ist schwer zu verstehen, was es hei√üt, einen Ansatz anzuwenden, ohne damit zu spielen.  Daher werde ich in den folgenden Abschnitten einige Verweise auf Basecamp machen.  Ich habe nichts mit Basecamp zu tun, au√üer als gl√ºcklicher Benutzer.  Dieser Artikel ist nur ein gutes Live-Beispiel f√ºr moderne Rails, das Sie kostenlos ausprobieren k√∂nnen. <br><br><h2>  Turbolinks </h2><br>  Die Idee hinter Turbolinks ist einfach: Beschleunigen Sie Ihre Anwendung, indem Sie das Neuladen von Seiten vollst√§ndig durch AJAX-Anforderungen ersetzen, die das `` -Element ersetzen.  Die innere Hexerei, die diese Arbeit macht, ist verborgen.  Als Entwickler k√∂nnen Sie sich auf die traditionelle serverseitige Programmierung konzentrieren. <br><br>  Turbolinks ist von pjax inspiriert und wurde mehrfach √ºberarbeitet. <br><br>  Fr√ºher habe ich mir Sorgen um die Leistung gemacht.  Ich habe mich geirrt  Die Beschleunigung ist enorm.  Was mich √ºberzeugt hat, war, wie ich es im Projekt verwendet habe, aber Sie k√∂nnen einfach die Testversion in Basecamp ausprobieren und damit spielen.  Versuchen Sie, ein Projekt mit einigen Elementen zu erstellen, und navigieren Sie dann durch diese, indem Sie auf Abschnitte klicken.  Dies gibt Ihnen eine gute Vorstellung davon, wie Turbolinks aussehen. <br><br>  Ich denke nicht, dass Turbolinks mit seiner Neuheit (pjax - 8 Jahre) einfach unglaublich ist.  Oder seine technische Raffinesse.  Es √ºberrascht mich, wie eine einfache Idee Ihre Produktivit√§t im Vergleich zur Alternative zu SPA um eine Gr√∂√üenordnung steigern kann. <br><br>  Lassen Sie mich einige der Probleme hervorheben, die dadurch behoben werden: <br><br><ul><li>  Datenaustausch.  Du hast es nicht.  Sie m√ºssen JSON nicht serialisieren, APIs erstellen oder √ºber Datenanforderungen nachdenken, die die Kundenanforderungen hinsichtlich der Leistung erf√ºllen. </li><li>  Anfangslast.  Im Gegensatz zu SPA stimuliert dieser Ansatz schnelle Ladezeiten (vom Design her).  Zum Rendern des Bildschirms k√∂nnen Sie die ben√∂tigten Daten direkt aus der Datenbank abrufen.           HTML ‚Äî    . </li><li> :         JavaScript-.           ,         SPA. </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die MVC auf dem Server ist in der von Rails und vielen anderen Frameworks verwendeten Version viel einfacher als alle f√ºr die umfangreiche GUI-Architektur verwendeten Vorlagen: Erhalten Sie eine Anfrage, arbeiten Sie mit der Datenbank, um sie zu erf√ºllen, und zeigen Sie die HTML-Seite als Antwort an. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlie√ülich hat die Einschr√§nkung, die immer ersetzt wird, einen wunderbaren Effekt: Sie k√∂nnen sich auf das anf√§ngliche Rendern von Seiten konzentrieren, anstatt bestimmte Abschnitte zu aktualisieren (oder einige Bedingungen in der SPA-Welt zu aktualisieren). </font><font style="vertical-align: inherit;">Im Allgemeinen macht er einfach alles.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codeduplizierung. </font><font style="vertical-align: inherit;">Es gibt nur eine Ansicht Ihrer Anwendung, die sich auf dem Server befindet. </font><font style="vertical-align: inherit;">Ihr Domain-Modell, seine Regeln, Anwendungsbildschirme usw. </font><font style="vertical-align: inherit;">Es ist nicht erforderlich, Konzepte im Client zu duplizieren.</font></font></li><li> .    SPA, JavaScript            ,    .  ,         ,    ,   . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie, dass ich nicht √ºber Namensprobleme spreche, sondern √ºber deren Behebung. Zum Beispiel sind GraphQL- oder SPA-Rehydratisierung super intelligente L√∂sungen f√ºr sehr komplexe Probleme. Aber was ist, wenn Sie, anstatt zu versuchen, eine L√∂sung zu finden, sich in eine Situation versetzen, in der diese Probleme nicht existieren? Dies ist eine √Ñnderung der Herangehensweise an das Problem. Und ich habe Jahre gebraucht, um die F√§higkeit dieses Ansatzes zur L√∂sung von Problemen voll zu w√ºrdigen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nat√ºrlich ist Turbolinks keine problemlose Silberkugel. Das gr√∂√üte Problem ist, dass vorhandener JavaScript-Code besch√§digt werden kann:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turbolinks werden mit dem benutzerdefinierten Ereignis "Seitenladen" ausgeliefert, und vorhandene Plugins, die auf regul√§ren Seitenladevorg√§ngen beruhen, funktionieren nicht. </font><font style="vertical-align: inherit;">Heutzutage gibt es bessere M√∂glichkeiten, dem DOM Verhalten hinzuzuf√ºgen, aber √§ltere Widgets funktionieren nicht, wenn sie nicht angepasst werden.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript-Code, der das DOM √§ndert, muss idempotent sein, da er mehrmals ausgef√ºhrt werden kann. </font><font style="vertical-align: inherit;">Dies macht wiederum viele vorhandene JavaScript ung√ºltig.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Geschwindigkeit ist ausgezeichnet, aber nicht ganz so wie in SPA, wo einige Interaktionen ohne Laden des Servers verarbeitet werden k√∂nnen. </font><font style="vertical-align: inherit;">Ich werde sp√§ter mehr √ºber Kompromisse sprechen.</font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AJAX-Rendering und SJR-Antworten </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erinnern Sie sich, als das Rendern von HTML √ºber Ajax vor 15 Jahren im Trend lag? </font><font style="vertical-align: inherit;">Wei√üt du was? </font><font style="vertical-align: inherit;">Dies ist immer noch ein gro√üartiges Werkzeug in Ihrem Arsenal:</font></font><br><ul><li>   HTML       DOM,   ( 100 ). </li><li>    HTML  ,              . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen sehen, wie sich dieser Ansatz in Basecamp anf√ºhlt, indem Sie Ihr Profilmen√º √∂ffnen, indem Sie auf die Schaltfl√§che oben rechts klicken: </font></font><br><br><img src="https://habrastorage.org/webt/yc/6b/th/yc6bth2x9on2cvks1r34w937xey.gif"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wird sofort </font><font style="vertical-align: inherit;">ge√∂ffnet </font><font style="vertical-align: inherit;">. Auf der Entwicklungsseite m√ºssen Sie sich nicht um die JSON-Serialisierung und die Clientseite k√ºmmern. Sie k√∂nnen dieses Fragment einfach auf dem Server anzeigen und dabei alle Funktionen von Rails nutzen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein √§hnliches Tool, das Rails im Laufe der Jahre integriert hat, sind serverseitige JavaScript-Antworten (SJR). Mit ihnen k√∂nnen Sie auf Ajax-Anfragen (normalerweise Formulareingaben) mit JavaScript antworten, das vom Client ausgef√ºhrt wird. Es bietet die gleichen Vorteile wie das AJAX-Rendering von HTML-Snippets: Es l√§uft sehr schnell, Sie k√∂nnen den Code auf der Serverseite wiederverwenden und Sie k√∂nnen direkt auf die Datenbank zugreifen, um eine Antwort zu erstellen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen sehen, wie dies geschieht, wenn Sie in Basecamp gehen und versuchen, eine neue Aufgabe zu erstellen. </font><font style="vertical-align: inherit;">Nachdem Sie auf "Aufgabe hinzuf√ºgen" geklickt haben, speichert der Server die Aufgabe und antwortet mit einem JavaScript-Fragment, das dem DOM eine neue Aufgabe hinzuf√ºgt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich denke, viele Entwickler betrachten AJAX-Rendering und SJR-Antworten heute mit Verachtung. </font><font style="vertical-align: inherit;">Ich erinnere mich auch daran. </font><font style="vertical-align: inherit;">Sie sind ein Werkzeug und k√∂nnen als solches missbraucht werden. </font><font style="vertical-align: inherit;">Bei richtiger Anwendung ist dies jedoch eine hervorragende L√∂sung. </font><font style="vertical-align: inherit;">Sie k√∂nnen gro√üartige UX und Interaktivit√§t zu einem sehr niedrigen Preis anbieten. </font><font style="vertical-align: inherit;">Leider sind sie wie Turbolinks schwer zu bewerten, wenn Sie noch nicht gegen SPA gek√§mpft haben.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reiz </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus ist ein JavaScript-Framework, das vor einigen Monaten ver√∂ffentlicht wurde. </font><font style="vertical-align: inherit;">Rendering oder JavaScript-basierte Statusverwaltung sind nicht wichtig. </font><font style="vertical-align: inherit;">Stattdessen ist es nur eine sch√∂ne, moderne Art, JavaScript zu organisieren, mit dem Sie HTML hinzuf√ºgen:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es verwendet MutationObserver, um das Verhalten an das DOM zu binden, was bedeutet, dass es egal ist, wie der HTML-Code auf der Seite angezeigt wird. </font><font style="vertical-align: inherit;">Nat√ºrlich funktioniert dies hervorragend mit Turbolinks.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie sparen eine Menge Boilerplate-Code zum Anh√§ngen des Verhaltens an das DOM, zum Anh√§ngen von Ereignishandlern an Ereignisse und zum Platzieren von Elementen im angegebenen Container. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ziel ist es, Ihren HTML-Code lesbar und verst√§ndlich zu machen. Dies ist hilfreich, wenn Sie jemals auf das Problem gesto√üen sind, herauszufinden, welcher Teil von JavaScript auf dieses verdammte Element einwirkt. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es f√∂rdert die Beharrlichkeit im DOM. </font><font style="vertical-align: inherit;">Dies bedeutet wiederum, dass es ihm egal ist, wie der HTML-Code generiert wird, was f√ºr viele Szenarien, einschlie√ülich Turbolinks, geeignet ist.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie den Rails-Pfad akzeptieren, konzentriert sich Ihr JavaScript darauf, den serverseitigen HTML-Code zu √§ndern und die Interaktion zu verbessern (mit etwas JavaScript). </font><font style="vertical-align: inherit;">Stimulus wurde entwickelt, um solchen Code zu organisieren. </font><font style="vertical-align: inherit;">Dies ist kein SPA-System und gibt nicht vor, eines zu sein. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe Stimulus in mehreren Projekten verwendet und es gef√§llt mir sehr gut. </font><font style="vertical-align: inherit;">Es eliminiert eine Menge Boilerplate-Code, basiert auf den neuesten Webstandards und liest sich sehr sch√∂n. </font><font style="vertical-align: inherit;">Und etwas, das ich besonders liebe: Jetzt ist dies die Standardmethode, um etwas zu tun, das in jeder Anwendung noch gel√∂st werden musste.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kompromissspiel </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turbolinks werden normalerweise als "Nutzen Sie alle Vorteile von SPA ohne Unannehmlichkeiten" verkauft. </font><font style="vertical-align: inherit;">Ich denke nicht, dass dies v√∂llig wahr ist:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anwendungen, die mit modernen Rails erstellt wurden, sehen schnell aus, aber SPA reagiert immer noch schneller auf Interaktionen, die vom Server unabh√§ngig sind. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt Szenarien, in denen SPA sinnvoller ist. </font><font style="vertical-align: inherit;">Wenn Sie ein hohes Ma√ü an Interaktivit√§t bieten m√∂chten, m√ºssen Sie eine gro√üe Anzahl von Status verwalten, komplexe Logik auf der Clientseite ausf√ºhren usw. Das SPA-Framework erleichtert Ihnen das Leben.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt ist Entwicklung ein Kompromissspiel. </font><font style="vertical-align: inherit;">Und in diesem Spiel:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mit Modern Rails k√∂nnen Sie Anwendungen erstellen, die schnell genug sind und gut aussehen. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mit Rails k√∂nnen Sie f√ºr eine Vielzahl von Anwendungen dieselben Funktionen mit weniger Code und weniger Komplexit√§t implementieren. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich glaube, dass Sie mit Rails mit 10% Aufwand 90% des Angebots von SPA erhalten k√∂nnen. </font><font style="vertical-align: inherit;">In Bezug auf die Leistung t√∂tet Rails SPA. </font><font style="vertical-align: inherit;">Was UX betrifft, denke ich, dass viele Entwickler den gleichen Fehler wie ich machen, vorausgesetzt, SPA UX ist un√ºbertroffen.</font></font> Es ist nicht so.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie oben erl√§utert, wissen Sie besser, was Sie beim Erstellen Ihres SPA tun, oder UX wird tats√§chlich schlechter. </font></font><br><br><h2>  Fazit </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich beobachte, wie Unternehmen SPA-Frameworks massiv akzeptieren, und sehe unz√§hlige Artikel dar√ºber, wie man ausgefallene Dinge im SPA-Stil macht. Ich denke, es gibt viele ‚ÄûVerwendungen des falschen Tools f√ºr den Job‚Äú, da ich fest davon √ºberzeugt bin, dass die Arten von Anwendungen, die die Verwendung von SPA rechtfertigen, begrenzt sind. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und ich sage, sie rechtfertigen es, weil SPAs komplex sind. Ich hoffe auf jeden Fall, dass ich Sie davon √ºberzeugt habe. Ich sage nicht, dass es unm√∂glich ist, gro√üartige SPA-Anwendungen zu erstellen, oder dass moderne Rails-Anwendungen per Definition gro√üartig sind. Nur ein Ansatz ist sehr kompliziert und der andere viel einfacher. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei der Vorbereitung dieses Artikels bin ich auf diesen Tweet gesto√üen:</font></font><br><br><img src="https://habrastorage.org/webt/px/54/rc/px54rc9odiplrsororeiozro--c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es brachte mich zum Lachen, weil ich die ersten Optionen w√§hlen w√ºrde, wenn die Alternative nicht gerechtfertigt w√§re. Er ist auch ein Vertreter der Denkweise von Entwicklern, die Komplexit√§t lieben und davon leben, bis hin zu dem Gedanken, dass andere Menschen mit anderen Kriterien verr√ºckt sind. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach vielen Jahren wurde mir klar, dass Komplexit√§t oft eine Wahl ist. In der Programmierwelt ist es jedoch √ºberraschend schwierig, die Einfachheit zu w√§hlen. Wir sch√§tzen Komplexit√§t so sehr, dass wir durch das Akzeptieren von Einfachheit oft anders denken, was per Definition schwierig ist.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denken Sie daran, dass Sie √Ñrger loswerden k√∂nnen. </font><font style="vertical-align: inherit;">Wenn Sie den SPA-Pfad w√§hlen, stellen Sie sicher, dass er gerechtfertigt ist und Sie die Probleme verstehen. </font><font style="vertical-align: inherit;">Wenn Sie sich nicht sicher sind, experimentieren Sie mit verschiedenen Ans√§tzen und √ºberzeugen Sie sich selbst. </font><font style="vertical-align: inherit;">Vielleicht haben Facebook oder Google in ihrer Gr√∂√üenordnung nicht den Luxus, solche Entscheidungen zu treffen, aber Sie k√∂nnen es wahrscheinlich. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und wenn Sie ein Rails-Entwickler sind, der Rails vor vielen Jahren verlassen hat, empfehle ich Ihnen, dorthin zur√ºckzukehren. </font><font style="vertical-align: inherit;">Ich denke, Sie werden begeistert sein.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417875/">https://habr.com/ru/post/de417875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417865/index.html">Android-Barrierefreiheit - ein Wolf im Schafspelz? Yandex Vortrag</a></li>
<li><a href="../de417867/index.html">Wie man die Dauer eines IT-Projekts bewertet und wann es sich √ºberhaupt nicht lohnt</a></li>
<li><a href="../de417869/index.html">So debuggen Sie WebRTC</a></li>
<li><a href="../de417871/index.html">An der Ziellinie des suborbitalen Tourismus</a></li>
<li><a href="../de417873/index.html">M√∂glichkeiten zum Erstellen von PopUp-Fenstern</a></li>
<li><a href="../de417877/index.html">Wie Tinder (leicht) Ihren Standort verbirgt</a></li>
<li><a href="../de417879/index.html">Kostenlose Pr√ºfung von Microsoft [zum Beispiel ein k√ºrzlich durchgef√ºhrter Wettbewerb]</a></li>
<li><a href="../de417881/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends in den letzten zwei Wochen Nr. 323 (8. - 22. Juli 2018)</a></li>
<li><a href="../de417883/index.html">Erstellen eines Dialogs zur Auswahl eines Klingeltons</a></li>
<li><a href="../de417885/index.html">√úber M und √ºber V und ein wenig √ºber C.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>