<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóº ‚òÄÔ∏è üçØ Qt QJSEngine ‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ üë©üèæ‚Äçü§ù‚Äçüë®üèº üé∑ üöÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‡§Ø‡§π ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§è‡§Æ‡•§ ‡§∂‡§ø‡§≤‡•á ‡§ï‡•Ä ‡§™‡•Å‡§∏‡•ç‡§§‡§ï "‡§ï‡•ç‡§Ø‡•Ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§ï‡•ç‡§Ø‡•Ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó" "‡§ü‡§∞‡•ç‡§ü‡§≤ ‡§ó‡•ç‡§∞‡§æ‡§´‡§ø‡§ï‡•ç‡§∏" ‡§ï‡•á ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§π‡•à‡•§ ‡§ï‡§æ‡§Æ ‡§ï‡•Ä ‡§¨‡•á‡§π‡§§‡§∞ ‡§∏‡§Æ‡§ù ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã "‡§ï‡•ç‡§Ø‡•Ç ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qt QJSEngine ‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481142/">  ‡§Ø‡§π ‡§â‡§¶‡§æ‡§π‡§∞‡§£ <i>‡§è‡§Æ‡•§ ‡§∂‡§ø‡§≤‡•á ‡§ï‡•Ä</i> ‡§™‡•Å‡§∏‡•ç‡§§‡§ï <i>"‡§ï‡•ç‡§Ø‡•Ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§ï‡•ç‡§Ø‡•Ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó" "‡§ü‡§∞‡•ç‡§ü‡§≤ ‡§ó‡•ç‡§∞‡§æ‡§´‡§ø‡§ï‡•ç‡§∏" ‡§ï‡•á</i> ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§π‡•à‡•§  ‡§ï‡§æ‡§Æ ‡§ï‡•Ä ‡§¨‡•á‡§π‡§§‡§∞ ‡§∏‡§Æ‡§ù ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã "‡§ï‡•ç‡§Ø‡•Ç ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§∏ ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§≤‡•à‡§Ç‡§ó‡•ç‡§µ‡•á‡§ú" ‡§ñ‡§Ç‡§° ‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§¶‡•á‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ <br><br>  ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§Æ‡•á‡§Ç, ‡§è‡§ï ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§Ü‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§® ‡§ï‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§â‡§∏‡•Ä ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§  ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§á‡§Ç‡§ü‡§∞‡§´‡§º‡•á‡§∏ QML ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§®‡•ç‡§µ‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ <br><br>  <b>‡§ï‡•ç‡§Ø‡•Ç‡§ü‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ï ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç</b> <br><br><img src="https://habrastorage.org/webt/dt/gp/5z/dtgp5zaslbsxythd63as-b5wi2w.png" alt="‡§õ‡§µ‡§ø"><br><br>  <b>‡§π‡§Æ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§</b>  <b>Main.qml ‡§´‡§º‡§æ‡§á‡§≤:</b> <br><a name="habracut"></a><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Window <span class="hljs-number"><span class="hljs-number">2.12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">2.0</span></span> Window { id: window visible: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> width: Screen.width/<span class="hljs-number"><span class="hljs-number">2</span></span> height: Screen.height/<span class="hljs-number"><span class="hljs-number">2</span></span> title: qsTr(<span class="hljs-string"><span class="hljs-string">" jsEnjine"</span></span>) property string consoleFontFamily: <span class="hljs-string"><span class="hljs-string">"Consolas"</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fontPixelSize: <span class="hljs-number"><span class="hljs-number">14</span></span> TextArea { id: textAreaLog anchors.bottom: rectangle.top anchors.bottomMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> anchors.right: parent.right anchors.rightMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> anchors.left: parent.left anchors.leftMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> anchors.top: parent.top anchors.topMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> readOnly: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } Rectangle { id: rectangle height: <span class="hljs-number"><span class="hljs-number">25</span></span> anchors.right: parent.right anchors.rightMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> anchors.left: parent.left anchors.leftMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> anchors.bottom: parent.bottom anchors.bottomMargin: <span class="hljs-number"><span class="hljs-number">3</span></span> border.color: <span class="hljs-string"><span class="hljs-string">"#0c0a0a"</span></span> TextEdit { id: textEditInput anchors.right: parent.right anchors.rightMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> anchors.left: parent.left anchors.leftMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> anchors.bottom: parent.bottom anchors.bottomMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> anchors.top: parent.top anchors.topMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> font.pixelSize: fontPixelSize } } }</code> </pre> <br>  <b>‡§Ü‡§ï‡§æ‡§∞</b> <br><br><img src="https://habrastorage.org/webt/le/te/dp/letedp7s_mkgrckhmjklqmghsv4.png" alt="‡§õ‡§µ‡§ø"><br><br>  <b>AppCore</b> ‡§î‡§∞ <b>Console</b> ‡§ï‡•ç‡§≤‡§æ‡§∏ ‡§ï‡•ã ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç, ‡§•‡•ã‡§°‡§º‡§æ <b>main.c</b> ‡§ú‡•ã‡§°‡§º‡•á‡§Ç <br><br><pre> <code class="javascript hljs">#include &lt;QGuiApplication&gt; #include &lt;QQmlApplicationEngine&gt; #include &lt;QQmlContext&gt; #include <span class="hljs-string"><span class="hljs-string">"appcore.h"</span></span> int main(int argc, char *argv[]) { <span class="hljs-attr"><span class="hljs-attr">QCoreApplication</span></span>::setAttribute(Qt::AA_EnableHighDpiScaling); QGuiApplication app(argc, argv); AppCore appCore; QQmlApplicationEngine engine; QQmlContext *context = engine.rootContext();<span class="hljs-comment"><span class="hljs-comment">//   //      ,  //    //     context-&gt;setContextProperty("appCore",&amp;appCore); engine.load(QUrl(QStringLiteral("qrc:/main.qml"))); if(engine.rootObjects().isEmpty()) return -1; return app.exec(); }</span></span></code> </pre><br>  <b>appcore.h</b> <br><br><pre> <code class="java hljs">#ifndef APPCORE_H #define APPCORE_H #include &lt;QObject&gt; #include &lt;QJSEngine&gt; #include <span class="hljs-string"><span class="hljs-string">"console.h"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCore</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QObject</span></span></span><span class="hljs-class"> </span></span>{ Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-function">explicit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AppCore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QObject *parent = nullptr)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: QJSEngine appScriptEngine; Console *userConsole; signals: <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appEndTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString&amp; text)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> slots: <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">slotEvaluate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString&amp; code)</span></span></span></span>; }; #endif <span class="hljs-comment"><span class="hljs-comment">// APPCORE_H</span></span></code> </pre><br>  <b>appcore.c</b> <br><br><pre> <code class="java hljs">#include <span class="hljs-string"><span class="hljs-string">"appcore.h"</span></span> AppCore::AppCore(QObject *parent) : QObject(parent) { userConsole = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Console(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); QJSValue val = appScriptEngine.newQObject(userConsole); appScriptEngine.globalObject().setProperty(<span class="hljs-string"><span class="hljs-string">"console"</span></span>,val); connect(userConsole, SIGNAL(appEndTextArea(QString)),<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>,SIGNAL(appEndTextArea(QString))); connect(userConsole, SIGNAL(clearTextArea()),<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>,SIGNAL(clearTextArea())); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AppCore::slotEvaluate(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; code) { QJSValue result = appScriptEngine.evaluate(code); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(result.isError()){ QString er = QString(<span class="hljs-string"><span class="hljs-string">"   %1: %2"</span></span>).arg(result.property(<span class="hljs-string"><span class="hljs-string">"lineNumber"</span></span>).toInt()).arg(result.toString()); <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appEndTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(er)</span></span></span></span>; } }</code> </pre><br>  <b>console.h</b> <br><br><pre> <code class="java hljs">#ifndef CONSOLE_H #define CONSOLE_H #include &lt;QObject&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Console</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QObject</span></span></span><span class="hljs-class"> </span></span>{ Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-function">explicit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Console</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QObject *parent = nullptr)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString&amp; message)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; signals: <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appEndTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString&amp; text)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }; #endif <span class="hljs-comment"><span class="hljs-comment">// CONSOLE_H</span></span></code> </pre><br>  <b>console.cpp</b> <br><br><pre> <code class="java hljs">#include <span class="hljs-string"><span class="hljs-string">"console.h"</span></span> Console::Console(QObject *parent) : QObject(parent) { } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Console::log(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; message) { <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appEndTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(message)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Console::clear() { <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearTextArea</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  <b>AppCore</b> ‡§ï‡•ç‡§≤‡§æ‡§∏ ‡§ï‡•á ‡§ï‡§Ç‡§∏‡•ç‡§ü‡•ç‡§∞‡§ï‡•ç‡§ü‡§∞ ‡§Æ‡•á‡§Ç <b>,</b> ‡§π‡§Æ‡§®‡•á <b>QJSEngine</b> ‡§ï‡•ã <b>‡§ï‡§Ç‡§∏‡•ã‡§≤</b> ‡§ï‡•ç‡§≤‡§æ‡§∏ ‡§ï‡§æ ‡§è‡§ï ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ú‡•ã‡§°‡§º‡§æ, ‡§î‡§∞ ‡§π‡§Æ‡§®‡•á ‡§Ø‡§π ‡§≠‡•Ä ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ï‡§ø ‡§π‡§Æ ‡§á‡§∏ ‡§ï‡•ç‡§≤‡§æ‡§∏ ‡§ï‡•á ‡§§‡§∞‡•Ä‡§ï‡•ã‡§Ç ‡§ï‡•ã <i>"‡§ï‡§Ç‡§∏‡•ã‡§≤" ‡§ï‡•á</i> ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§ <br><br><pre> <code class="java hljs">QJSValue val = appScriptEngine.newQObject(userConsole); appScriptEngine.globalObject().setProperty(<span class="hljs-string"><span class="hljs-string">"console"</span></span>,val);</code> </pre><br>  ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ <i>appEndTextArea (const QString &amp; text)</i> - ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã <u>‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü</u> ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç <br>  <b>main.qml</b> <br><br>  ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ <i>‡§ï‡•ç‡§≤‡§ø‡§Ø‡§∞‡§ü‡•á‡§ï‡•ç‡§Ö‡§∞‡•á‡§Ü ()</i> - <u>text.reaLog</u> ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü <u>‡§è‡§∞‡§ø‡§Ø‡§æ</u> ‡§ï‡•ã <b>main.qml</b> ‡§Æ‡•á‡§Ç <b>‡§ï‡•ç‡§≤‡§ø‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç</b> ‡•§ <br><br>  ‡§∏‡•ç‡§≤‡•â‡§ü <i>‡§∏‡•ç‡§≤‡•â‡§ü‡§è‡§µ‡§≤‡§ø‡§ï‡•á‡§ü (const QString ‡§î‡§∞ ‡§ï‡•ã‡§°)</i> - <u>‡§Æ‡•Å‡§ñ‡•ç‡§Ø .qml</u> ‡§Æ‡•á‡§Ç <b>textEditInput</b> ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§ø‡§è ‡§ó‡§è js ‡§ï‡•ã‡§° ‡§ï‡§æ ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§®‡•§ <br><br>  ‡§Ü‡§á‡§è <b>main.qml</b> ‡§Æ‡•á‡§Ç ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ ‡§π‡•à‡§Ç‡§°‡§≤‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç: <br><br><pre> <code class="java hljs">Connections{ target: appCore onAppEndTextArea:{ textAreaLog.cursorPosition = textAreaLog.length; textAreaLog.append(text); } onClearTextArea:{ textAreaLog.cursorPosition=<span class="hljs-number"><span class="hljs-number">0</span></span>; textAreaLog.text = <span class="hljs-string"><span class="hljs-string">""</span></span>; } }</code> </pre><br>  ‡§π‡§Æ <u>textEditInput</u> ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§≠‡•Ä ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç, <i>‡§∂‡•Ç‡§®‡•ç‡§Ø ‡§∏‡•ç‡§≤‡•â‡§ü</i> ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç <br><br><pre> <code class="java hljs">TextEdit { id: textEditInput anchors.right: parent.right anchors.rightMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> anchors.left: parent.left anchors.leftMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> anchors.bottom: parent.bottom anchors.bottomMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> anchors.top: parent.top anchors.topMargin: <span class="hljs-number"><span class="hljs-number">5</span></span> font.pixelSize: fontPixelSize Keys.onReturnPressed:{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(textEditInput.text == <span class="hljs-string"><span class="hljs-string">""</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; appCore.slotEvaluate(text) clear() } Keys.onEscapePressed: clear() }</code> </pre><br>  ‡§Ö‡§¨ ‡§ú‡§¨ ‡§Ü‡§™ <u>textEditInput</u> ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§è‡§Ç‡§ü‡§∞ ‡§¶‡§¨‡§æ‡§§‡•á ‡§π‡•à‡§Ç <i>, ‡§§‡•ã</i> ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§ï‡•ã <i>AppCore</i> ‡§Æ‡•á‡§Ç <b>‡§∏‡•ç‡§≤‡•â‡§ü‡§è‡§µ‡§≤‡§ø‡§ï‡•á‡§ü ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ</b> ‡•§  ‡§ú‡§¨ ‡§Ü‡§™ ESC ‡§¶‡§¨‡§æ‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã <u>textEditInput</u> ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§∏‡§æ‡§´‡§º ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§ <br><br>  ‡§ú‡§¨ ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§Ö‡§ó‡§∞ ‡§π‡§Æ <i>textEditInput</i> ‡§Æ‡•á‡§Ç <i>‡§ï‡§Ç‡§∏‡•ã‡§≤.‡§≤‡•â‡§ó</i> ("‡§π‡•à‡§≤‡•ã ‡§µ‡§∞‡•ç‡§≤‡•ç‡§°") <i>‡§ï‡§Æ‡§æ‡§Ç‡§°</i> ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ <i>‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü‡§è‡§∞‡§ø‡§Ø‡§æ‡§≤‡•â‡§ó</i> ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•à‡§≤‡•ã ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§¶‡•á‡§ñ‡•á‡§Ç‡§ó‡•á‡•§  ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ <i>QJSEngine ‡§ï‡§Æ‡§æ‡§Ç‡§°</i> ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø <i>‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§</i> ‡§π‡•ã‡§ó‡•Ä‡•§ <br><br><img src="https://habrastorage.org/webt/mz/v7/sz/mzv7szd8iemu9j3ntyu94vtr8fu.png" alt="‡§õ‡§µ‡§ø"><br><br>  <b>‡§á‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞,</b> ‡§π‡§Æ‡§®‡•á ‡§è‡§ï ‡§Ü‡§µ‡•á‡§¶‡§® ‡§≤‡§ø‡§ñ‡§æ ‡§π‡•à ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§π‡§Æ QJSEngine ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á ‡§µ‡§∞‡•ç‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§§‡§∞‡•Ä‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§á‡§® ‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§  ‡§ï‡•ã‡§à ‡§ï‡§π‡•á‡§ó‡§æ <i>"‡§ú‡•á‡§è‡§∏ ‡§ï‡§æ ‡§á‡§∏‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§≤‡•á‡§®‡§æ-‡§¶‡•á‡§®‡§æ ‡§π‡•à?"</i>  <i>‡§Ü‡§ñ‡§ø‡§∞‡§ï‡§æ‡§∞, C ++ ‡§Æ‡•á‡§Ç ‡§ï‡§ï‡•ç‡§∑‡§æ‡§è‡§Ç ‡§≤‡§ø‡§ñ‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç? ‚Äù</i> , ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ø‡§π ‡§è‡§ï ‡§î‡§∞ ‡§ï‡§π‡§æ‡§®‡•Ä ‡§π‡•à‚Ä¶ <br><br>  <a href="">‡§ó‡§ø‡§§‡•Å‡§¨ ‡§™‡§∞ ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi481142/">https://habr.com/ru/post/hi481142/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi481126/index.html">‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§∞ ‡§Ø‡•Ç‡§®‡§ø‡§Ø‡§®? ‡§Æ‡•á‡§∞‡•Ä ‡§ö‡§™‡•ç‡§™‡§≤ ‡§Æ‡§§ ‡§¨‡§§‡§æ‡§ì</a></li>
<li><a href="../hi481130/index.html">TOP12 ‡§Ö‡§Ç‡§§‡§É‡§µ‡§ø‡§∑‡§Ø ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§ñ‡•ã‡§ú‡•ã‡§Ç 2019</a></li>
<li><a href="../hi481134/index.html">‡§∏‡•á‡§µ‡§æ ‡§ï‡•Ä ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§ï‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§≤‡•ã‡§° ‡§ï‡•á ‡§§‡§π‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§§‡•á ‡§π‡•à‡§Ç</a></li>
<li><a href="../hi481138/index.html">‡§Ø‡•á ‡§≤‡•ã‡§ó ‡§ï‡•É‡§§‡•ç‡§∞‡§ø‡§Æ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ - ‡§è‡§Ü‡§à ‡§î‡§∞ ‡§è‡§Æ‡§è‡§≤ ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û‡•ã‡§Ç ‡§ï‡•Ä 4 ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Ç ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç</a></li>
<li><a href="../hi481140/index.html">‡§™‡§æ‡§Ø‡§•‡§® ‡§°‡•á‡§ü‡§æ ‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™ ‡§ß‡•ã‡§ñ‡§æ ‡§∂‡•Ä‡§ü</a></li>
<li><a href="../hi481146/index.html">‡§è‡§ï ‡§Ö‡§®‡•ç‡§Ø ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡§æ‡§∞ ‡§®‡•á IPv4 ‡§™‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§¶‡§ø‡§Ø‡§æ</a></li>
<li><a href="../hi481148/index.html">‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§∏‡•ã‡§ö ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§≠‡•å‡§§‡§ø‡§ï‡•Ä ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§è‡§Ç (‡§∏‡•ç‡§ï‡•Ç‡§≤‡•Ä ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è)</a></li>
<li><a href="../hi481150/index.html">‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡§ø‡§® ‡§ï‡•á ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§î‡§∞ ‡§¨‡•á‡§Ç‡§ö‡§Æ‡§æ‡§∞‡•ç‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§™‡§ï‡§∞‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§Ö‡§µ‡§≤‡•ã‡§ï‡§®</a></li>
<li><a href="../hi481154/index.html">‡§∏‡§æ‡§Ç‡§§‡§æ ‡§ï‡•á ‡§ñ‡•ã‡§Ø‡•á ‡§π‡•Å‡§è ‡§â‡§™‡§π‡§æ‡§∞: ‡§®‡§è ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§Ü‡§à‡§ü‡•Ä ‡§ï‡•ç‡§µ‡•á‡§∏‡•ç‡§ü ‡§´‡§º‡•ç‡§≤‡•à‡§Ç‡§ü ‡§∏‡•á</a></li>
<li><a href="../hi481156/index.html">Yandex.Taxi ‡§î‡§∞ ‡§® ‡§ï‡•á‡§µ‡§≤: ‡§ï‡•ç‡§Ø‡§æ 2020 ‡§Æ‡•á‡§Ç ‡§∞‡•Ç‡§∏‡•Ä ‡§ï‡§Ç‡§™‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§Ü‡§à‡§™‡•Ä‡§ì ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>