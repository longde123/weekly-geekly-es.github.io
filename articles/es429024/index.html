<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüíª üëáüèΩ üè∑Ô∏è Crea GIFs con OpenCV üí† üßëüèø üßî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este tutorial le mostrar√° c√≥mo crear GIF animados usando OpenCV, Python e ImageMagick. ¬°Luego combina estos m√©todos para crear un generador de memes c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crea GIFs con OpenCV</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429024/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g1/sx/hd/g1sxhdlqfra2bohbg5d7yjliv6g.gif"></div><br><br>  Este tutorial le mostrar√° c√≥mo crear GIF animados usando OpenCV, Python e ImageMagick.  ¬°Luego combina estos m√©todos para crear un generador de memes con OpenCV! <br><br>  Todos necesitamos re√≠rnos de vez en cuando.  Y quiz√°s la mejor manera de encontrar a Lulza es con memes.  Algunos de mis favoritos: <br><br><ul><li>  Kermit the Frog: "Pero no es asunto m√≠o" </li><li>  Gato gru√±√≥n </li><li>  Fracaso √©pico </li><li>  Buen chico greg </li></ul><br>  <b>Pero para m√≠ personalmente, ninguno de estos memes puede compararse con el meme "Lidia con √©l" ("Lidia con √©l" o "Comprendelo t√∫ mismo"), un ejemplo del cual se da al comienzo del art√≠culo.</b> <br><a name="habracut"></a><br>  Por lo general, se usa en los siguientes casos: <br><br><ol><li>  Como una respuesta u objeci√≥n a alguien que no aprueba algo que usted ha hecho / dicho ("Enfr√©ntelo") </li><li>  Ponerse las gafas como si se fuera y dejar a la persona sola con el problema ("Comprenda usted mismo") </li></ol><br>  Hace unos a√±os le√≠ un art√≠culo divertido en el blog del autor, que no recuerdo c√≥mo generar esos memes usando la visi√≥n por computadora.  La semana pasada no pude encontrar esta gu√≠a en ning√∫n lado, as√≠ que como blogger, experto en visi√≥n artificial y conocedor de memes, ¬°decid√≠ escribir un tutorial yo mismo!  (Por cierto, si accidentalmente conoce la fuente original, av√≠seme para agradecerle al autor. <b>UPD:</b> Acabo de encontrar el art√≠culo original del blog <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MakeArtWithPython</a> de Kirk Kaiser). <br><br>  El desarrollo de un generador de memes en OpenCV nos ense√±ar√° varias habilidades pr√°cticas valiosas, que incluyen: <br><br><ol><li>  Detecci√≥n de rostros utilizando t√©cnicas de aprendizaje profundo </li><li>  Usando la biblioteca dlib para detectar puntos de referencia faciales y extraer √°reas de los ojos </li><li>  C√≥mo calcular el √°ngulo de rotaci√≥n entre los ojos en funci√≥n de la informaci√≥n recibida </li><li>  Y finalmente, c√≥mo generar GIF animados usando OpenCV (con un poco de ayuda de ImageMagick) </li></ol><br>  Esta gu√≠a debe ser divertida y entretenida y, al mismo tiempo, ense√±arle valiosas habilidades de programaci√≥n de visi√≥n por computadora que son √∫tiles en el mundo real. <br><br><h1>  Crear GIF con OpenCV </h1><br>  En la primera parte de la gu√≠a, discutiremos las condiciones y dependencias necesarias para este proyecto, incluida la configuraci√≥n adecuada del entorno de desarrollo. <br><br>  Luego considere la estructura del proyecto / cat√°logo para nuestro generador de GIF OpenCV. <br><br>  Tan pronto como comprendamos la estructura del proyecto, consideraremos: 1) nuestro archivo de configuraci√≥n;  2) el script Python responsable de crear GIF con OpenCV. <br><br>  Finalmente, evaluaremos los resultados del programa sobre el popular meme "Deal With It". <br><br><h4>  Prerrequisitos y dependencias </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/ad6/c3e/193/ad6c3e193373bc04c877e60070d73071.png"><br>  <b>Fig.</b>  <b>1. Usaremos OpenCV, dlib e ImageMagick para crear GIF</b> <br><br><h3>  Opencv y dlib </h3><br>  Se necesita OpenCV para determinar las caras en el marco y el procesamiento b√°sico de im√°genes.  Siga una de mis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gu√≠as de instalaci√≥n de OpenCV si OpenCV</a> no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√°</a> instalado en el sistema. <br><br>  Usamos Dlib para detectar puntos de referencia faciales, lo que nos permite encontrar dos ojos en la cara y ponernos gafas de sol.  Puede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">instalar dlib usando estas instrucciones</a> . <br><br><h4>  Imagemagick </h4><br>  Si no est√° familiarizado con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ImageMagick</a> , entonces en vano.  Es una herramienta de l√≠nea de comandos multiplataforma con muchas funciones de procesamiento de im√°genes. <br><br>  ¬øQuieres convertir PNG / JPG a PDF con un solo comando?  No hay problema <br><br>  ¬øHay varias im√°genes de las que necesita hacer un PDF de varias p√°ginas?  F√°cilmente <br><br>  ¬øNecesita dibujar pol√≠gonos, l√≠neas y otras formas?  Y es posible. <br><br>  ¬øQu√© tal la clasificaci√≥n de color por lotes o el cambio de tama√±o de todas las im√°genes con un comando?  Para hacer esto, no necesita escribir algunas l√≠neas en Python para OpenCV. <br><br>  ImageMagick tambi√©n genera GIF a partir de cualquier imagen. <br><br>  Para instalar ImageMagick en Ubuntu (o Raspbian) simplemente use apt: <br><br>  Crear GIF con OpenCVShell <br><br><pre><code class="bash hljs">$ sudo apt-get install imagemagick</code> </pre> <br>  En macOS, puede usar HomeBrew: <br><br><pre> <code class="bash hljs">$ brew install imagemagick</code> </pre> <br><h4>  in√∫tiles </h4><br>  En la mayor√≠a de los art√≠culos, cursos y libros, utilizo mi conveniente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">paquete de</a> procesamiento de im√°genes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">imutils</a> .  Se instala en un sistema o entorno virtual utilizando pip: <br><br><pre> <code class="bash hljs">$ pip install imutils</code> </pre> <br><h2>  Estructura del proyecto </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e42/281/af0/e42281af07fb94c9ae60a526098f662d.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">2. La estructura del proyecto incluye dos directorios, un archivo de configuraci√≥n y un script Python</font></i> <br><br>  Hay dos cat√°logos en nuestro proyecto: <br><br><ul><li>  <code>images/</code> : ejemplos de im√°genes de entrada para las que queremos hacer un GIF animado.  Encontr√© algunas im√°genes conmigo, pero si√©ntase libre de agregar las suyas. </li><li>  <code>assets/</code> : esta carpeta contiene nuestro detector de rostro, detector de hito facial y todas las im√°genes + m√°scaras relacionadas.  Con estos recursos, colocaremos puntos y texto en las im√°genes originales de la primera carpeta. </li></ul><br>  Debido a la gran cantidad de par√°metros configurables, decid√≠ crear un archivo de configuraci√≥n JSON, que: 1) facilitar√° la edici√≥n de par√°metros;  2) requerir√° menos argumentos de l√≠nea de comando.  Todos los par√°metros de configuraci√≥n necesarios para este proyecto est√°n contenidos en <code>config.json</code> . <br><br>  Considere los contenidos de <code>config.json</code> y <code>create_gif.py</code> . <br><br><a name="1"></a>  <font color="gray">Nota</font>  <font color="gray">Per .: El c√≥digo del proyecto y el manual de 17 p√°ginas sobre visi√≥n por computadora, aprendizaje autom√°tico y OpenCV se emiten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">despu√©s del registro</a> (espejo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥digo fuente</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">manual</a> ).</font> <br><br><h2>  Generaci√≥n GIF con OpenCV </h2><br>  ¬°Entonces, continuemos y comencemos a crear nuestro generador de GIF OpenCV! <br><br><h4>  Contenido del archivo de configuraci√≥n JSON </h4><br>  Comencemos con el archivo de configuraci√≥n JSON y luego pasemos al script Python. <br><br>  Abra un nuevo archivo <code>config.json</code> e inserte los siguientes pares clave / valor: <br><br>  Crear GIF con OpenCVPython <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"face_detector_prototxt"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deploy.prototxt"</span></span>, <span class="hljs-string"><span class="hljs-string">"face_detector_weights"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/res10_300x300_ssd_iter_140000.caffemodel"</span></span>, <span class="hljs-string"><span class="hljs-string">"landmark_predictor"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/shape_predictor_68_face_landmarks.dat"</span></span>,</code> </pre> <br>  Estos son archivos de modelo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">detector de rostro OpenCV en aprendizaje profundo</a> . <br><br>  La √∫ltima l√≠nea es la ruta al predictor de cara dlib. <br><br>  Y ahora tenemos algunas rutas a los archivos de imagen: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"sunglasses"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"sunglasses_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses_mask.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it_mask.png"</span></span>,</code> </pre> <br>  Estos son los caminos a nuestras gafas de sol, texto y m√°scaras a juego para ellos, que se muestran a continuaci√≥n. <br><br>  En primer lugar, gafas de sol elegantes y una m√°scara: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c18/c4c/647/c18c4c6471e203aedea66a80c9080192.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">3. ¬øNo te gustan las gafas con p√≠xeles?</font></i>  <i><font color="gray">Solo aguantalo</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58b/91a/d9c/58b91ad9c2e66238b3f3ac22fe1ee439.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">4. ¬øNo entiendes por qu√© necesitas una m√°scara para gafas de sol?</font></i>  <i><font color="gray">Solo aguantalo, o lee el resto del art√≠culo para obtener la respuesta.</font></i> <br><br>  Y ahora nuestro texto es "TRATE CON √âL" y la m√°scara: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec3/4e4/923/ec34e4923e2d05a5b33c065de8f5af66.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">5. ¬øOdias Helvetica Neue Condensed?</font></i>  <i><font color="gray">Lidiar con eso</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/f70/819/c6cf708198bda68d849029b3ded02265.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">6: Esta m√°scara te permite dibujar un borde alrededor del texto.</font></i>  <i><font color="gray">Oh, tal vez no quieras, ¬øquieres un borde?</font></i>  <i><font color="gray">Bueno, aguantalo</font></i> <br><br>  Se necesitan m√°scaras para superponer la imagen correspondiente en la foto: trataremos esto m√°s adelante. <br><br>  Ahora configure algunos par√°metros para el generador de memes: <br><br><pre> <code class="python hljs"> <span class="hljs-string"><span class="hljs-string">"min_confidence"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">"steps"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"delay"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">"final_delay"</span></span>: <span class="hljs-number"><span class="hljs-number">250</span></span>, <span class="hljs-string"><span class="hljs-string">"loop"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"temp_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"temp"</span></span> }</code> </pre> <br>  Aqu√≠ est√°n las definiciones para cada uno de los par√°metros: <br><br><ul><li>  <code>min_confidence</code> : <code>min_confidence</code> m√≠nima requerida de detecci√≥n de rostros. </li><li>  <code>steps</code> : n√∫mero de cuadros en la animaci√≥n final.  Cada "paso" mueve las gafas de sol desde el borde superior hacia el objetivo (es decir, hacia los ojos). </li><li>  <code>delay</code> : retraso entre cuadros en cent√©simas de segundo. </li><li>  <code>final_delay</code> : retraso del √∫ltimo fotograma en cent√©simas de segundo (√∫til en este contexto, ya que queremos que el texto se muestre m√°s tiempo que el resto de los fotogramas). </li><li>  <code>loop</code> : un valor cero indica que el GIF se repite para siempre; de ‚Äã‚Äãlo contrario, especifique un n√∫mero entero positivo para el n√∫mero de repeticiones de la animaci√≥n. </li><li>  <code>temp_dir</code> : el directorio temporal en el que se almacenar√°n cada uno de los marcos antes de crear el GIF final. </li></ul><br><h4>  Memes, GIF y OpenCV </h4><br>  Creamos el archivo de configuraci√≥n JSON, ahora pasemos al c√≥digo real. <br><br>  Abra un nuevo archivo, <code>create_gif.py</code> nombre <code>create_gif.py</code> y pegue el siguiente c√≥digo: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    from imutils import face_utils from imutils import paths import numpy as np import argparse import imutils import shutil import json import dlib import cv2 import sys import os</span></span></code> </pre> <br>  Aqu√≠ importamos los paquetes necesarios.  En particular, usaremos imutils, dlib y OpenCV.  Para instalar estas dependencias, consulte la secci√≥n Requisitos previos y dependencias m√°s arriba. <br><br>  Ahora el script tiene los paquetes necesarios, as√≠ <code>overlay_image</code> definamos la funci√≥n <code>overlay_image</code> : <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">overlay_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bg, fg, fgMask, coords)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     (, )  #    (sH, sW) = fg.shape[:2] (x, y) = coords #          #  ,   , **  # ,    overlay = np.zeros(bg.shape, dtype="uint8") overlay[y:y + sH, x:x + sW] = fg # - , **  ** # ,    ,    # ,       alpha = np.zeros(bg.shape[:2], dtype="uint8") alpha[y:y + sH, x:x + sW] = fgMask alpha = np.dstack([alpha] * 3) #  -   , #   - output = alpha_blend(overlay, bg, alpha) #   return output</span></span></code> </pre> <br>  La funci√≥n <code>overlay_image</code> impone un primer plano ( <code>fg</code> ) en la parte superior de la imagen de fondo ( <code>bg</code> ) en las coordenadas de las coordenadas <i>(</i> coordenadas <i>(x, y)</i> ), realizando la transparencia alfa sobre la m√°scara de primer plano <code>fgMask</code> . <br><br>  Para familiarizarse con los conceptos b√°sicos de OpenCV, como trabajar con m√°scaras, aseg√∫rese de leer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta gu√≠a</a> . <br><br>  Para completar el proceso de mezcla, realice una mezcla alfa: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alpha_blend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fg, bg, alpha)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,    - #        [0, 1] fg = fg.astype("float") bg = bg.astype("float") alpha = alpha.astype("float") / 255 #  - fg = cv2.multiply(alpha, fg) bg = cv2.multiply(1 - alpha, bg) #     ,    output = cv2.add(fg, bg) #   return output.astype("uint8")</span></span></code> </pre> <br>  Esta implementaci√≥n de mezcla alfa tambi√©n est√° disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el blog LearnOpenCV</a> . <br><br>  En esencia, convertiremos el primer plano, el fondo y el canal alfa a n√∫meros de coma flotante en el rango <i>[0, 1]</i> .  Luego realizamos una mezcla alfa, agregamos el primer plano y el fondo para obtener el resultado de que volvemos a la funci√≥n de llamada. <br><br>  Tambi√©n crearemos una funci√≥n auxiliar que permita generar GIF a partir de un conjunto de rutas de imagen utilizando ImageMagick y el comando de <code>convert</code> : <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_gif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(inputPath, outputPath, delay, finalDelay, loop)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#        imagePaths = sorted(list(paths.list_images(inputPath))) #      lastPath = imagePaths[-1] imagePaths = imagePaths[:-1] #   imagemagick 'convert'  #  GIF      #   ( ) cmd = "convert -delay {} {} -delay {} {} -loop {} {}".format( delay, " ".join(imagePaths), finalDelay, lastPath, loop, outputPath) os.system(cmd)</span></span></code> </pre> <br>  La funci√≥n <code>create_gif</code> toma un conjunto de im√°genes y las recopila en animaciones GIF con un retraso especificado entre cuadros y bucles.  ImageMagick procesa todo esto: simplemente envolvemos el comando de <code>convert</code> en una funci√≥n que procesa din√°micamente varios par√°metros. <br><br>  Para ver los argumentos de <code>convert</code> disponibles, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">consulte la documentaci√≥n</a> .  ¬°All√≠ ver√° cu√°ntas funciones tiene este equipo! <br><br>  Espec√≠ficamente en esta funci√≥n, nosotros: <br><br><ul><li>  Tome <code>imagePaths</code> . </li><li>  Elija la ruta de la √∫ltima imagen, que tendr√° un retraso por separado. </li><li>  Reasigne <code>imagePaths</code> para excluir la √∫ltima ruta. </li><li>  Ensamblamos un comando con argumentos de l√≠nea de comando y luego le indicamos al sistema operativo que <code>convert</code> para crear animaciones GIF. </li></ul><br>  Asigne al script sus propios argumentos de l√≠nea de comando: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ap = argparse.ArgumentParser() ap.add_argument("-c", "--config", required=True, help="path to configuration file") ap.add_argument("-i", "--image", required=True, help="path to input image") ap.add_argument("-o", "--output", required=True, help="path to output GIF") args = vars(ap.parse_args())</span></span></code> </pre> <br>  Tenemos tres argumentos de l√≠nea de comandos que se procesan en tiempo de ejecuci√≥n: <br><br><ul><li>  <code>--config</code> : ruta al archivo de configuraci√≥n JSON.  Revisamos el archivo de configuraci√≥n en la secci√≥n anterior. </li><li>  <code>--image</code> : ruta a la imagen de entrada contra la cual se crea la animaci√≥n (es decir, detectar una cara, agregar gafas de sol y luego texto). </li><li>  <code>--output</code> : ruta al GIF resultante. </li></ul><br>  Cada uno de estos argumentos es obligatorio al ejecutar el script en la l√≠nea de comando / terminal. <br><br>  Descargue el archivo de configuraci√≥n, as√≠ como las gafas y la m√°scara correspondiente: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    JSON, #     config = json.loads(open(args["config"]).read()) sg = cv2.imread(config["sunglasses"]) sgMask = cv2.imread(config["sunglasses_mask"]) #    (  ),   #  ,  ,     #   GIF- shutil.rmtree(config["temp_dir"], ignore_errors=True) os.makedirs(config["temp_dir"])</span></span></code> </pre> <br>  Aqu√≠ cargamos el archivo de configuraci√≥n (que puede estar disponible en el futuro como un diccionario Python).  Luego cargue las gafas de sol y la m√°scara. <br><br>  Si queda algo del script anterior, elimine el directorio temporal y vuelva a crear el directorio temporal vac√≠o.  La carpeta temporal contendr√° cada cuadro individual de la animaci√≥n GIF. <br><br>  Ahora cargue el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">detector facial de aprendizaje profundo OpenCV</a> en la memoria: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># load our OpenCV face detector and dlib facial landmark predictor print("[INFO] loading models...") detector = cv2.dnn.readNetFromCaffe(config["face_detector_prototxt"], config["face_detector_weights"]) predictor = dlib.shape_predictor(config["landmark_predictor"])</span></span></code> </pre> <br>  Para hacer esto, llame a <code>cv2.dnn.readNetFromCaffe</code> .  El m√≥dulo <code>dnn</code> solo est√° disponible en OpenCV 3.3 o posterior.  Un detector de rostros detectar√° la presencia de rostros en la imagen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a91/d3a/0cd/a91d3a0cde3dcb3cac9799c823e47c8c.jpg"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">7. Operaci√≥n del detector de rostros usando OpenCV DNN</font></i> <br><br>  A continuaci√≥n, cargue el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">predictor de hito de cara dlib</a> .  Le permitir√° localizar estructuras individuales: ojos, cejas, nariz, boca y ment√≥n: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/056/816/890/0568168909b7f01d2f70f6e58faa9ed9.jpg"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">8. Los puntos de referencia descubiertos por dlib se superponen en mi cara</font></i> <br><br>  M√°s adelante en este gui√≥n extraemos solo el √°rea de los ojos. <br><br>  Continuando, busquemos la cara: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       image = cv2.imread(args["image"]) (H, W) = image.shape[:2] blob = cv2.dnn.blobFromImage(cv2.resize(image, (300, 300)), 1.0, (300, 300), (104.0, 177.0, 123.0)) #        print("[INFO] computing object detections...") detector.setInput(blob) detections = detector.forward() #       ,  #  ,      i = np.argmax(detections[0, 0, :, 2]) confidence = detections[0, 0, i, 2] #    if confidence &lt; config["min_confidence"]: print("[INFO] no reliable faces found") sys.exit(0)</span></span></code> </pre> <br>  En este bloque hacemos lo siguiente: <br><br><ul><li>  Descargue la <code>image</code> original. </li><li>  Construimos una <code>blob</code> para enviar al detector facial de una red neuronal.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Este art√≠culo</a> describe c√≥mo funciona <code>blobFromImage</code> de OpenCV. </li><li>  Realice el procedimiento de detecci√≥n de rostros. </li><li>  Encontramos a la persona con el valor de probabilidad m√°s alto y lo comparamos con el umbral de probabilidad m√≠nimo aceptable.  Si no se cumplen los criterios, simplemente salga del script.  De lo contrario, contin√∫e. </li></ul><br>  Ahora extraeremos la cara y calcularemos los puntos de referencia: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   (x, y)  #    box = detections[0, 0, i, 3:7] * np.array([W, H, W, H]) (startX, startY, endX, endY) = box.astype("int") #    dlib    #       rect = dlib.rectangle(int(startX), int(startY), int(endX), int(endY)) shape = predictor(image, rect) shape = face_utils.shape_to_np(shape) #        ,  #     (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS["left_eye"] (rStart, rEnd) = face_utils.FACIAL_LANDMARKS_IDXS["right_eye"] leftEyePts = shape[lStart:lEnd] rightEyePts = shape[rStart:rEnd]</span></span></code> </pre> <br>  Para extraer la cara y encontrar puntos de referencia faciales, hacemos lo siguiente: <br><br><ul><li>  Extraemos las coordenadas del cuadro delimitador alrededor de la cara. </li><li>  Cree un objeto <code>rectangle</code> en dlib y aplique la localizaci√≥n de caras. </li><li>  Recuperamos las coordenadas <i>(x, y)</i> de <code>leftEyePts</code> y <code>rightEyePts</code> , respectivamente. </li></ul><br>  Dadas las coordenadas de los ojos, puede calcular d√≥nde y c√≥mo colocar las gafas de sol: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       leftEyeCenter = leftEyePts.mean(axis=0).astype("int") rightEyeCenter = rightEyePts.mean(axis=0).astype("int") #      dY = rightEyeCenter[1] - leftEyeCenter[1] dX = rightEyeCenter[0] - leftEyeCenter[0] angle = np.degrees(np.arctan2(dY, dX)) - 180 #      ,  #      sg = imutils.rotate_bound(sg, angle) #     **  ,    #   ‚Äî       # 90%       sgW = int((endX - startX) * 0.9) sg = imutils.resize(sg, width=sgW) #      ( ,   #  ),      #     - ‚Äî   #       , #     sgMask = cv2.cvtColor(sgMask, cv2.COLOR_BGR2GRAY) sgMask = cv2.threshold(sgMask, 0, 255, cv2.THRESH_BINARY)[1] sgMask = imutils.rotate_bound(sgMask, angle) sgMask = imutils.resize(sgMask, width=sgW, inter=cv2.INTER_NEAREST)</span></span></code> </pre> <br>  Primero, calculamos el centro de cada ojo, luego el √°ngulo entre los centroides.  La misma operaci√≥n se realiza con la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">alineaci√≥n</a> horizontal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de la cara en el marco</a> . <br><br>  Ahora puede rotar y cambiar el tama√±o de las gafas.  Tenga en cuenta que utilizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la funci√≥n rotate_bound</a> , no solo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">rotate</a> , de modo que OpenCV no recorta partes que no son visibles despu√©s de la conversi√≥n af√≠n. <br><br>  Las mismas operaciones que se aplicaron a las gafas, se aplican a la m√°scara.  Pero primero debe convertirlo a tonos de gris y binarizar, porque las m√°scaras siempre son binarias.  Luego giramos y redimensionamos la m√°scara de la misma manera que lo hicimos con los anteojos. <br><br>  <i><b>Nota:</b> tenga en cuenta que al cambiar el tama√±o de la m√°scara, usamos interpolaci√≥n para los puntos vecinos m√°s cercanos, porque la m√°scara debe tener solo dos valores (0 y 255).</i>  <i>Otros m√©todos de interpolaci√≥n son m√°s est√©ticos, pero no adecuados para m√°scaras.</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠</a> puede obtener informaci√≥n adicional sobre la interpolaci√≥n en los puntos vecinos m√°s cercanos.</i> <br><br>  Los tres bloques de c√≥digo restantes crean marcos para la animaci√≥n GIF: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    ,   #  N       #    steps = np.linspace(0, rightEyeCenter[1], config["steps"], dtype="int") # start looping over the steps for (i, y) in enumerate(steps): #      #  ,    **    #  ,       #   shiftX = int(sg.shape[1] * 0.25) shiftY = int(sg.shape[0] * 0.35) y = max(0, y - shiftY) # add the sunglasses to the image output = overlay_image(image, sg, sgMask, (rightEyeCenter[0] - shiftX, y))</span></span></code> </pre> <br>  Las gafas caen desde la parte superior de la imagen.  En cada cuadro, se muestran m√°s cerca de la cara hasta que cubren sus ojos.  Usando la variable <code>"steps"</code> en el archivo de configuraci√≥n JSON, generamos coordenadas y para cada cuadro.  Para hacer esto, sin mucho esfuerzo, usamos la funci√≥n <code>linspace</code> de NumPy. <br><br>  Las l√≠neas con un ligero desplazamiento hacia la izquierda y hacia arriba pueden parecer un poco extra√±as, pero son necesarias para garantizar que las gafas cubran los ojos en su conjunto y no solo se muevan hasta el punto donde se encuentra el centro del ojo.  Determin√© emp√≠ricamente porcentajes para calcular el desplazamiento a lo largo de cada eje.  La siguiente l√≠nea asegura que no haya valores negativos. <br><br>  Usando la funci√≥n <code>overlay_image</code> , generamos el marco de <code>output</code> final. <br><br>  Ahora aplique el texto "TRATE CON EL" usando otra m√°scara: <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#    ,    #  "DEAL WITH IT"   if i == len(steps) - 1: #   "DEAL WITH IT"  , #   dwi = cv2.imread(config["deal_with_it"]) dwiMask = cv2.imread(config["deal_with_it_mask"]) dwiMask = cv2.cvtColor(dwiMask, cv2.COLOR_BGR2GRAY) dwiMask = cv2.threshold(dwiMask, 0, 255, cv2.THRESH_BINARY)[1] #       80%   #  oW = int(W * 0.8) dwi = imutils.resize(dwi, width=oW) dwiMask = imutils.resize(dwiMask, width=oW, inter=cv2.INTER_NEAREST) #  ,   ,  #   oX = int(W * 0.1) oY = int(H * 0.8) output = overlay_image(output, dwi, dwiMask, (oX, oY))</span></span></code> </pre> <br>  En el √∫ltimo paso, imponemos el texto, que en realidad es otra imagen. <br><br>  Decid√≠ usar una imagen porque las capacidades de representaci√≥n de las fuentes OpenCV son bastante limitadas.  Adem√°s, quer√≠a agregar una sombra y un borde alrededor del texto, que de nuevo OpenCV no sabe c√≥mo. <br><br>  En el resto de este c√≥digo, cargamos tanto la imagen como la m√°scara, y luego realizamos una mezcla alfa para generar el resultado final. <br><br>  Solo queda guardar cada fotograma en el disco con la creaci√≥n posterior de animaci√≥n GIF: <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#      p = os.path.sep.join([config["temp_dir"], "{}.jpg".format( str(i).zfill(8))]) cv2.imwrite(p, output) #      ,     #   GIF- print("[INFO] creating GIF...") create_gif(config["temp_dir"], args["output"], config["delay"], config["final_delay"], config["loop"]) #  --    print("[INFO] cleaning up...") shutil.rmtree(config["temp_dir"], ignore_errors=True)</span></span></code> </pre> <br>  Escribimos el resultado en el disco.  Despu√©s de generar todos los cuadros, llamamos a la funci√≥n <code>create_gif</code> para crear el archivo de animaci√≥n GIF.  Recuerde que este es un shell que pasa par√°metros a la herramienta de l√≠nea de comandos de <code>convert</code> ImageMagick. <br><br>  Finalmente, elimine el directorio de salida temporal y los archivos de imagen individuales. <br><br><h2>  Resultados </h2><br>  Ahora la parte divertida: ¬°veamos qu√© cre√≥ nuestro generador de memes! <br><br>  Aseg√∫rese de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descargar el</a> c√≥digo fuente, las im√°genes de muestra y los modelos de aprendizaje profundo.  Luego abra una terminal y ejecute el siguiente comando: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/dca/b24/46e/dcab2446ec5dc96065e37a473375eea6.gif"><br>  <i><font color="gray">Figura 9. Animaci√≥n GIF generada con OpenCV e ImageMagick con este script de Python</font></i> <br><br>  Aqu√≠ puede ver el GIF creado con OpenCV e ImageMagick.  Se realizan las siguientes acciones en √©l: <br><br><ol><li>  Detecci√≥n correcta de mi cara. </li><li>  Localizaci√≥n de los ojos y c√°lculo de sus centros. </li><li>  Las gafas caen correctamente sobre la cara. </li></ol><br>  Los lectores de mi blog saben que soy un gran nerd en Jurassic Park y a menudo lo mencionan en mis libros, cursos y gu√≠as de estudio. <br><br>  ¬øNo te gusta <i>Jurassic Park</i> ? <br><br>  Ok, aqu√≠ est√° mi respuesta: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian_jp.jpg \ --output adrian_jp_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/da9/0d7/740/da90d7740e8ac813b9f99a727b9e04bc.gif"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">10. Animaci√≥n GIF de OpenCV basada en una fotograf√≠a de la proyecci√≥n reciente de Jurassic World 2</font></i> <br><br>  Aqu√≠ estoy en el espect√°culo "Jurassic World: 2" en una camiseta tem√°tica, con un vaso de luz y un libro de colecci√≥n. <br><br>  Historia divertida: <br><br>  Hace cinco o seis a√±os, mi esposa y yo visitamos el parque tem√°tico Epcot Center en Disney World, Florida. <br><br>  Decidimos hacer un viaje para alejarnos de los duros inviernos en Connecticut, y necesit√°bamos desesperadamente la luz del sol. <br><br>  Desafortunadamente, en Florida llovi√≥ todo el tiempo y la temperatura apenas super√≥ los 10 ¬∞ C. <br><br>  Cerca de los jardines canadienses, Trisha me tom√≥ una foto: dice que me veo como un vampiro con piel p√°lida, ropa oscura y una capucha, en el contexto de los exuberantes jardines detr√°s: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/vampire.jpg \ --output vampire_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ad1/1ce/ca2/ad11ceca2ed48792a5aa28c0c8dc7f40.gif"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">11. Usando OpenCV y Python, puedes crear este meme u otro GIF animado</font></i> <br><br>  Esa misma tarde, Trisha public√≥ una foto en las redes sociales, tuve que aguantarla. <br><br>  Aquellos de ustedes que asistieron a PyImageConf 2018 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lea la rese√±a</a> ) saben que siempre estoy abierto a bromas.  Aqu√≠ hay un ejemplo: <br><br>  <i>Pregunta: ¬øPor qu√© el gallo cruza la calle?</i> <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/rooster.jpg \ --output rooster_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/5dd/e92/ef0/5dde92ef04cb35436e87b0b70cc5926d.gif"><br>  <i><font color="gray">Fig.</font></i> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. La cara se reconoce incluso con poco contraste, y OpenCV procesa correctamente la foto y baja las gafas de sol.</font></font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Respuesta: No dir√© la respuesta, aguanta esto. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, concluimos la gu√≠a de hoy con un buen meme. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hace unos seis a√±os, mi padre y yo adoptamos un peque√±o beagle, Gemma. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ puedes ver a Gemma en mi hombro:</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/pupper.jpg \ --output pupper_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/08a/b5a/728/08ab5a728e8bd48ac2550a2962e76165.gif"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">13. Gemma es deliciosa. </font><font style="vertical-align: inherit;">¬øNo te parece? </font><font style="vertical-align: inherit;">Entonces "¬°ac√©ptalo!" </font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øNo est√°s de acuerdo con que ella es linda? </font><font style="vertical-align: inherit;">Tratar con eso.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øTiene un error AttributeError? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No te preocupes! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si viste este error:</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif ... Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"create_gif.py"</span></span>, line 142, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS[<span class="hljs-string"><span class="hljs-string">"left_eye"</span></span>] AttributeError: module <span class="hljs-string"><span class="hljs-string">'imutils.face_utils'</span></span> has no attribute <span class="hljs-string"><span class="hljs-string">'FACIAL_LANDMARKS_IDXS'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... entonces solo necesita actualizar el paquete imutils: </font></font><br><br><pre> <code class="bash hljs">$ pip install --upgrade imutils Collecting imutils ... Successfully installed imutils-0.5.1</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por qu√© </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por defecto, </font></font><code>imutils.face_utils</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliza un detector de puntos de referencia de 68 puntos integrado en dlib (como en este art√≠culo). </font><font style="vertical-align: inherit;">Hay </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un detector de 5 puntos m√°s r√°pido</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que ahora tambi√©n funciona con imutils. </font><font style="vertical-align: inherit;">Recientemente actualic√© imutils para admitir ambos detectores (por lo que puede ver un error).</font></font><br><br><h1>  Resumen </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el tutorial de hoy, aprendiste a crear GIF usando OpenCV. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para que la lecci√≥n sea divertida, utilizamos OpenCV para generar la animaci√≥n GIF "Deal With It", un meme popular (y mi favorito) que se encuentra de una forma u otra en casi todos los sitios de redes sociales. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el proceso, utilizamos la visi√≥n por computadora y el aprendizaje profundo para resolver varios problemas pr√°cticos:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Identificaci√≥n de personas </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pronosticar puntos de referencia en la cara </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Identificaci√≥n de √°reas de la cara (en este caso, el ojo) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Calcular el √°ngulo entre los ojos para alinear la cara </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crea mezclas transparentes con mezcla alfa </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, tomamos un conjunto de im√°genes generadas y creamos un GIF animado usando OpenCV e ImageMagick. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Espero que hayas disfrutado el tutorial de hoy! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si te gust√≥, deja un comentario y av√≠same. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bueno, si no te gust√≥, no importa, solo aguanta.</font></font> ;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es429024/">https://habr.com/ru/post/es429024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es429014/index.html">Git subtree en detalle</a></li>
<li><a href="../es429016/index.html">Volvo y Baidu desarrollar√°n veh√≠culos no tripulados juntos</a></li>
<li><a href="../es429018/index.html">¬øPor qu√© el nuevo dise√±o de Gmail es tan lento?</a></li>
<li><a href="../es429020/index.html">¬øQu√© es un setter fluido?</a></li>
<li><a href="../es429022/index.html">GridGain en Highload: d√≥nde hablar sobre DBMS distribuidos, en memoria y de c√≥digo abierto</a></li>
<li><a href="../es429028/index.html">Korolev Medicina para la web</a></li>
<li><a href="../es429030/index.html">Logomachine hace logotipos gratis por comentario</a></li>
<li><a href="../es429032/index.html">Splunk Essentials para la aplicaci√≥n de la industria de servicios financieros, o c√≥mo Splunk ingresa al mercado de an√°lisis financiero</a></li>
<li><a href="../es429034/index.html">Algunas historias sobre programadores underground</a></li>
<li><a href="../es429036/index.html">Conf√≠a en m√≠, s√© lo que estoy haciendo: autoadaptaci√≥n de un robot modular al entorno de ejecuci√≥n de tareas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>