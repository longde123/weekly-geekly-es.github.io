<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏸 👩🏻‍💻 👩🏽‍🤝‍👨🏻 Je voulais un beau morceau de fer. Il s'est avéré 👴🏿 🏮 📎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Partie 1 >> Partie 2 >> Vous êtes ici 


 Une fois que la femme bien-aimée d'amis du pays a trouvé un slinka de printemps arc-en-ciel. Je me suis souv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Je voulais un beau morceau de fer. Il s'est avéré</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423775/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Où rien ne s'est vraiment passé">Partie 1</a> &gt;&gt; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Dans lequel Winnie l'Ourson réfléchit sur de belles pièces de fer en général">Partie 2</a> &gt;&gt; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Eh bien, si beau">Vous êtes ici</a> </p><br><p> <em>Une fois que la femme bien-aimée d'amis du pays a trouvé un slinka de printemps arc-en-ciel.</em>  <em>Je me suis souvenu de mon enfance, je suis allé dans les escaliers et j'ai commencé.</em>  <em>Miracle, mais le ressort de la première fois ressort parfaitement à chaque pas.</em> <em><br></em>  <em>- C'est avéré!</em>  <em>- avec une joyeuse surprise s'est exclamé tous ceux qui étaient à proximité.</em> <em><br></em>  <em>Ma fille de trois ans voulait aussi l'essayer.</em>  <em>Elle prit le ressort, monta les escaliers et le lança.</em>  <em>Une source a survolé les escaliers et s'est affalée sur l'herbe.</em> <em><br></em>  <em>- C'est avéré!</em>  <em>- la fille a pleuré joyeusement.</em> </p><br><p>  Un an s'est écoulé depuis le début de mon projet de fan.  Ça s'est avéré!  Ce très beau morceau de fer ressemble à ceci: <br><img src="https://habrastorage.org/webt/q8/r7/dt/q8r7dtlicz88928wpwny63sp6dw.png" alt="Ma beauté"></p><br><p>  À première vue, ce n'est peut-être pas clair.  Mais supposons que ce soit une hache.  Et avec l'aide de cette hache et quelques détails à la fin, je reçois de la bouillie. <a name="habracut"></a></p><br><p>  Et pour une bonne bouillie de hache, des céréales sont nécessaires. </p><br><h1 id="wifi-slot">  Emplacement WiFi </h1><br><p><img src="https://habrastorage.org/webt/5g/2-/le/5g2-led7lwkzbxjqlxzacvundjo.png"></p><br><p>  Tout le monde connaît l'ESP8266.  Cette carte a plusieurs différences. </p><br><ol><li>  Les modules Troyka y sont connectés.  Et il y en a beaucoup. </li><li>  Il peut y avoir 4 modules de ce type. </li><li>  Il dispose de 8 canaux ADC, avec une plage de mesure de 0 à 3,3 V. Et pour l'ESP8266 nu, c'est très inhabituel. </li><li>  Il existe deux bus d'alimentation: alimentation 5 V, numérique-analogique 3,3 V. </li><li>  L'un se transforme en un autre via DC / DC.  J'ai été personnellement dégoûté par ces régulateurs de chaudière.  Salut haute efficacité. </li><li>  Et cela signifie que vous pouvez entraîner des moteurs directement à partir de celui-ci.  Et je vais vous montrer comment. </li><li>  Il prend en charge Slot Connector.  C'est génial. </li></ol><br><p>  En bref, je peux y coller 4 potentiomètres, et ça aura l'air magnifique.  Après tout, pour un arc cool, tout a commencé. </p><br><h1 id="i2cio">  i2cio </h1><br><p>  Et voici mon STM32F030F4P6 préféré. </p><br><p><img src="https://habrastorage.org/webt/oc/by/rv/ocbyrvyuj1pn7ba3qom4gmycprm.png"><br><img src="https://habrastorage.org/webt/yb/tt/7-/ybtt7-tkdkvrs9w83lhuh8obqas.png"></p><br><p>  Dans l'image, il y a deux cartes avec le même firmware i2cio.  Il s'agit d'un extenseur de port d'E / S. <br>  9 broches de contrôle de cette chose peuvent: </p><br><ol><li>  ADC 12 bits </li><li>  PWM 16 bits, avec une fréquence réglable très cool.  Accrochez au moins les servos là-bas (DC / DC aide ici), au moins faites tourner les moteurs DC, jouez au moins le son. <br>  De plus, ces 9 et une autre peuvent être entrées / sorties numériques. </li></ol><br><p>  En outre, Slot Expander prend en charge les connecteurs Troyka et la séparation de l'alimentation en parties d'alimentation et analogiques. </p><br><p>  Ahhh ... j'ai oublié.  Ces expanseurs peuvent être connectés à un morceau de fer d'un peu plus de 100 pièces.  Et ils sont tous triés automatiquement par adresses I2C, fournissant un adressage à broche plate.  Autrement dit, vous pouvez écrire </p><br><pre><code class="hljs objectivec">i2cio.digitalWrite(<span class="hljs-number"><span class="hljs-number">852</span></span>, HIGH); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tooMuchForAnalogPinNumber_areYouReallyShureQuestion = i2cio.analogRead(<span class="hljs-number"><span class="hljs-number">942</span></span>);</code> </pre> <br><p>  Et en même temps, tout se passera. <br>  Eh bien, la pierre fait 33 roubles.  Et vous pouvez faire avec, par exemple, un cavalier le long de la ligne avec le plus grand nombre de capteurs d'ombre grise au monde.  Avec CAN 12 bits et réglage de sensibilité 16 bits.  Sans changer le firmware. </p><br><div class="spoiler">  <b class="spoiler_title">En-tête de spoiler</b> <div class="spoiler_text"><p>  Ce que je montrerai certainement dans la prochaine série. </p></div></div><br><p>  Nous allons plus loin. </p><br><h1 id="ekshn">  Action </h1><br><p>  Un ami m'a demandé de lui faire une télécommande pour Traktor, son programme de disc-jockey préféré.  Je pensais que si je ne pouvais pas réussir à le faire rapidement et magnifiquement, alors cela s’est avéré être un non-sens, et pas un beau morceau de fer. </p><br><h2 id="skruchivaem-vsyo-vmeste">  Tournez le tout ensemble </h2><br><p><img src="https://habrastorage.org/webt/p1/ao/lg/p1aolgxxxwwncvsyu9p8j2zksfm.jpeg"></p><br><p>  <em>Remarque: ci-après, il est entendu que le texte ci-dessus n'a jamais été</em> </p><br><p>  Pour ce faire, j'ai besoin d'une carte mère avec des cerveaux esp8266 (à <em>gauche</em> ).  Sa différence avec le reste est qu'il est carré, dispose de 8 entrées ADC et est alimenté en 5 V via un convertisseur DC / DC.  Et vous pouvez y connecter la même carte d'extension carrée sur mon stm32f030f4p6 préféré ( <em>à droite</em> ) à travers un beau morceau de fer (au <em>centre</em> ). </p><br><h2 id="dobavim-kuchu-potenciometrov">  Ajoutez un tas de potentiomètres </h2><br><p>  Une autre caractéristique de ces presse-étoupes est qu'il est très facile d'y insérer des modules standard.  J'ai de nombreux modules différents.  J'ai pris un tas de potentiomètres.  Parce que <em>tout le monde aime un tas de potentiomètres</em> (c). </p><br><p><img src="https://habrastorage.org/webt/gz/8_/-q/gz8_-qc9q_qzo2catvmrb17vehw.jpeg"></p><br><p>  Plus de potentiomètres au dieu des potentiomètres! </p><br><p><img src="https://habrastorage.org/webt/rj/mr/mo/rjmrmos5zqz3xubcnk3ua6pdx1k.jpeg"></p><br><h2 id="sol">  Du sel </h2><br><p>  Le point de montage le plus long.  Si vous voulez tout faire exactement comme moi, vous devrez faire ce qui suit: </p><br><ol><li>  Achetez à Leroy un coin en bois avec un côté de 2 cm </li><li>  Prenez une scie et essayez de la scier à 45 degrés </li><li>  Comprendre que ce n'est pas si simple.  Commencez à courir et recherchez une boîte à onglets. </li><li>  Tournez la boîte à onglets du concepteur de métal soviétique. </li><li>  Couper presque tout le coin du mariage, car il ne vous est pas donné, Vasily, de faire quelque chose de beau avec vos mains. </li><li>  Achetez enfin une boîte à onglets. </li><li>  GOTO 5. Parce qu'il ne vous est pas donné, Basil.  Rien à essayer. </li></ol><br><p>  Voici ce qui s'est passé: </p><br><p><img src="https://habrastorage.org/webt/4w/cv/wx/4wcvwxqkvqtnh71bqakrcuyx11w.jpeg"></p><br><h2 id="erunda-peredelat">  Non-sens, refaire </h2><br><p>  Un ami dit: «Qu'est-ce que c'est, une télécommande pour un tracteur, oui?  Ce n'est pas comme quelque chose. " </p><br><p>  Bon travail.  Recommencez. </p><br><p>  Nous prenons 4 cartes d'extension supplémentaires, fixons.  Nous prenons un tas de modules et poussons n'importe où. </p><br><p>  Il s'est avéré ceci: <br><img src="https://habrastorage.org/webt/jq/gm/kw/jqgmkwsnlvp9khto6xipgd5l8-u.jpeg"></p><br><p>  Percez soigneusement un trou pour le connecteur micro-USB afin de programmer la carte mère et, par la suite, de charger la batterie. </p><br><p><img src="https://habrastorage.org/webt/g5/7w/cf/g57wcfpyvkr0dv7n-sodjq2qtmi.jpeg"></p><br><p>  Oh, pas donné, Basil, pas donné ... </p><br><h2 id="demonstraciya-raboty">  Démonstration de travail </h2><br><p>  Le résultat est une télécommande sans fil pour le tracteur.  Il contrôle le tracteur via WiFi via Open Sound Control. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FNeMSCDS_2M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="ishodnyy-kod">  Code source </h2><br><p>  Code source sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gitHub</a> .  Complètement rempli dans le dossier de travail, afin de ne pas chercher de bibliothèques partout sur Internet. </p><br><h2 id="a-kak-voobsche-eto-rabotaet">  Mais comment ça marche? </h2><br><p>  Un beau morceau de fer n'est qu'un connecteur qui peut transmettre deux signaux et de l'énergie à l'aide de quatre boulons.  Deux signaux sont I2C.  La carte mère peut disperser toutes les cartes d'extension sur des adresses I2C séquentielles et, par la suite, faire quelque chose avec elles.  Par exemple, lisez un signal analogique 12 bits à partir (presque) de chaque branche de l'extenseur.  Ou contrôlez un PWM 16 bits sur chaque branche de l'extenseur.  Eh bien, ou utilisez simplement ces jambes comme entrée / sortie numérique.  Vous pouvez utiliser ces extenseurs si vous n'avez tout simplement pas assez de pieds sur votre microcontrôleur préféré. </p><br><p>  Le micrologiciel stm32f030f4p6 installé sur la carte d'extension est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><p>  La bibliothèque pour travailler avec des expanseurs de ports dans l'IDE Arduino est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><p>  Si ce sera intéressant pour les Habrachiens respectés, je vais certainement vous en dire plus.  Mais pas aujourd'hui. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423775/">https://habr.com/ru/post/fr423775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423763/index.html">Ce qu'Uber Cash enseigne aux innovateurs</a></li>
<li><a href="../fr423765/index.html">Nous écrivons une application pour le contrôle à distance du lecteur MPV de RetroOrangePi</a></li>
<li><a href="../fr423767/index.html">Des pirates ont attaqué British Airways: 380 000 cartes bancaires de clients volées</a></li>
<li><a href="../fr423769/index.html">Connexion d'OpenSSL à Mono</a></li>
<li><a href="../fr423771/index.html">Encore une fois, l'analyseur PVS-Studio s'est avéré être plus attentif qu'une personne</a></li>
<li><a href="../fr423777/index.html">Projet Keystone: environnement sécurisé pour l'exécution d'applications basées sur RISC-V</a></li>
<li><a href="../fr423779/index.html">Sauvegarde cloud à cloud: de quoi s'agit-il et pourquoi est-il nécessaire</a></li>
<li><a href="../fr423781/index.html">Notes du fournisseur IoT. Cas: nous créons un réseau LoRa pour un distributeur de carburant à Tcheliabinsk</a></li>
<li><a href="../fr423783/index.html">Splunk: l'apprentissage automatique au niveau supérieur</a></li>
<li><a href="../fr423785/index.html">Créez une batterie de serveurs prête pour le réseau pour Kubernetes à l'aide de LTSP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>