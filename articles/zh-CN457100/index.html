<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☦️ 🎊 👩🏽‍🤝‍👩🏼 AWS Lambda-理论，相识 💃🏾 👵🏻 🗄️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="AWS Lambda快速浏览 
 这是什么 
 AWS Lambda：这是一项计算服务，使您可以为几乎任何类型的应用程序或服务器服务运行代码-全部无需管理。 AWS Lambda为您执行所有管理，包括服务器和操作系统维护，资源分配和自动扩展，代码监视和日志记录。 您所要做的就是以AWS Lambda...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AWS Lambda-理论，相识</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457100/"><h2>  AWS Lambda快速浏览 </h2><br><h3> 这是什么 </h3><br>  <b>AWS Lambda：</b>这是一项计算服务，使您可以为几乎任何类型的应用程序或服务器服务运行代码-全部无需管理。  AWS Lambda为您执行所有管理，包括服务器和操作系统维护，资源分配和自动扩展，代码监视和日志记录。 您所要做的就是以AWS Lambda支持的一种语言提交代码。 <br><br><h3> 为什么要使用它？ </h3><br><ul><li>  <b>钱</b> 您只需为服务运行的时间付费。 </li><li>  <b>速度</b>  Lambda本身会上升并且工作非常快。 </li><li>  <b>方便。</b>  Lambda具有许多与AWS服务集成的功能。 </li><li>  <b>性能。</b> 并行执行，取决于区域，最多可以执行1000到3000份。 并且，如果您愿意，可以通过写支持来提高此限制。 </li></ul><br><blockquote> 这种方法有其缺点，您无法控制在其上执行代码的操作系统，也无法控制CPU，内存和资源。 所有这些都是由AWS完成的。 <br><br> 您所能做的就是从受支持的AWS Lambda中选择一种语言。 </blockquote><br><h2> 可以吗 </h2><br>  <b>以下是AWS Lambda的主要功能的简要列表。</b>  <b>接下来，我们将按顺序考虑所有事项。</b> <br><br><img src="https://habrastorage.org/webt/lk/ke/ur/lkkeurxtlx9itiqksndcmjbn2rq.png"><br><a name="habracut"></a><br><h3>  1.触发器 </h3><br>  <b>触发因素</b>是lambda的“病原体”。 从某种意义上说，lambda可以与PHP进行比较，因为它对我们来说可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">运行并死亡</a> 。 接下来，我们将详细考虑工作机制。 现在，您需要了解lambda是应触发器请求执行的功能。 <br><br>  <b>以下是所有可能的触发器的列表：</b> <br><br>  API网关 <br>  AWS IoT <br>  Alexa技能套件 <br>  Alexa智能家居 <br> 应用程序负载均衡器 <br> 云前 <br>  Cloudwatch活动 <br>  Cloudwatch日志 <br> 代码提交 <br>  Cognito同步触发 <br> 强力莫德 <br> 运动学 <br>  S3 <br> 社交网络 <br>  SQS <br><br> 对于它们中的每一个，您将需要配置可用于这些触发器的唯一参数。 您还可以在一个Lambda上配置多个触发器。  lambda是同步执行还是异步执行取决于触发器的类型。 <br><blockquote>  <b>注意：</b>请注意，可以通过在手动模式下使用AWS CLI和AWS开发工具包传递所有必需的参数来执行lambda。 包括它是否将同步运行 </blockquote><br><h4> 让我们看一个例子： </h4><br>  <b>1.网关API-</b>允许您在http请求中提取lambda，并要求将结果返回给用户。 这样的操作不能异步执行，因为 需要一个答案。 对于同步操作，某些功能不可用。 <br><br>  <b>2. SQS-</b>例如，如果我们的lambda处理来自SQS的消息，则您无需在任何地方返回结果，并且可以异步执行结果。 通过异步执行，出现了几个新功能，例如，我们可以在出现错误的情况下配置重复执行，或将此类请求进一步发送到“死” <b>SQS</b>队列。 <br><br><h3>  2.对AWS服务的权限 </h3><br> 这些是lambda具有默认访问权限的AWS服务。 这是什么意思？ 您始终可以将AWS开发工具包连接到将要编写的功能，而无需任何键或任何授权参数，就可以使用可用的服务。 您可以在用于此Lambda的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IAM角色</a>中定义所有可用服务。 <br><br> 所使用的每种语言都有自己的SDK，可以与主要的AWS服务进行通信。 <br><blockquote>  <b>注意：</b>对于每个Lambda，您都将由运行Lambda的人员配置<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IAM角色</a> </blockquote><br><h3>  3. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VPC</a> </h3><br> 您可以为lambda配置虚拟网络，例如，以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">安全地连接</a>到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RDS</a> 。 <br><br><h3>  4.在线编辑 </h3><br>  AWS Lambda还提供了直接从浏览器界面中编辑功能代码的功能。 <br><br><img src="https://habrastorage.org/webt/yy/hs/4y/yyhs4ymw2tzhj7hrsb8glnpttfm.png"><br><br><h3>  5.记录 </h3><br> 所有对lambda的请求都记录到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CloudWatch中</a> ，有关运行时和内存的数据也记录在其中，该数据对于设置限制非常有用。 此外，该代码还可以记录您自己的数据（例如，通过console.log在Node.js中）。 <br><br> 此外，您始终可以在“ <b>监视”</b>选项卡上查看有关lambda使用情况的统计信息。 <br><br><h3>  6.环境变量 </h3><br> 您有机会将环境变量安全地传输到代码中，这使您可以在不交付代码的情况下配置系统的重要部分。 可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">通过密钥对环境变量</a>进行<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">加密。</a> <br><blockquote>  <b>注意：</b>请注意，这里有一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">预定义的</a>环境变量列表 </blockquote><br><h3>  7.代码 </h3><br>  <b>现在最有趣的部分是lambda本身由几个部分组成。</b> <br><br>  <b>1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">图层</a></b> -底层。 不必要，但是如果您需要添加一些库来使用lambda，则需要将它们与主代码分开放置，这样可以大大节省主代码的数量和函数本身的速度。 <br><br>  AWS Lambda中的图层与docker中的图层有些相似，因为它们对于功能而言是永久的，并且需要分别进行更改。 它们也可以在其他lambda中重用。 <br><br>  <b>2.函数环境</b> -代码必须必须包含一个函数，该函数将在每次启动lambda <b>（处理程序）</b>时直接执行。 关于她下面。 在她面前是我们所要求的环境。 事实是，资源管理以一种方式实现，即该环境在完成后会与功能分开存储一段时间。 在下一次启动时，它将继续进行，而无需花费时间和资源进行初始化。 因此，所有可能的事情都需要初始化为函数本身，例如配置，连接库等。 <br><br>  <b>3.处理程序</b> -直接执行的代码本身（取决于语言）的定义不同。 例如，以Node.Js为例。 为了执行代码，您需要： <br><br><ol><li>  js文件-1个 </li><li>  exports.yourFunction =（）=&gt; {//您的代码}-1个 </li></ol><br> 默认情况下，将启动index.js并在其中查找一个称为“ handler”的函数。 然后执行它。 您的函数可能在代码中是异步的。 这不会影响lambda的同步执行。 <br><br> 下面是一个示例代码，我将尝试描述那里发生的事情： <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//AWS SDK  ,     e var AWS = require('aws-sdk'); //   //   ,    //   API Gateway. // ,    http  exports.handler = async(event, context) =&gt; { // event       // context     aws lambda : //   ,      console.log('testing cloud watch'); // ^       Cloud Watch   return { //     http ,     statusCode: 200, body: 'Hello world', headers: {} }; }; exports.handler = (event, context, callback) =&gt; { //    callback, // -      callback( null, //&lt;-  ,       { //     statusCode: 200, body: 'Hello world' } ); };</span></span></code> </pre> <br><h3>  8.版本控制 </h3><br> 该服务支持便捷的版本控制。 简而言之，我们可以为每个下载的副本发布一个版本。 并添加指向某个版本的别名。 如何运作？ 请参见下表。 <br><br><img src="https://habrastorage.org/webt/9n/m-/5r/9nm-5r9vatuospaqdnmjk_l5rys.png"><br><br><h3> 因此，现在让我们弄清楚需要做些什么才能获得图中所示的内容 </h3><br><h4> 状态一 </h4><br><ol><li> 创建我们的lambda的第一个版本。 与第一个版本一起，我们创建一个指向<b>“ $ LATEST”</b>版本的指针。 它始终指示添加的最新版本。 </li><li> 添加别名<b>“ Dev”</b> 。 在这里，我们选择绑定的位置，我们有几个选项-创建一个指向特定版本号的指针，在我们的例子中是<b>“ 1”</b> ，将指针绑定到<b>“ $ LATEST”</b> ，或者绑定到另一个别名。 在这种情况下，我们附加到<b>“ $ LATEST”</b>指针，现在我们的<b>“ Dev”</b>别名将始终指向最后一个分支，因此我们可以始终在开发环境中使用最新版本的lambda测试我们的应用程序。 如果突然需要检查它在旧版本上的工作方式，只需在触发器中切换别名或更改别名中版本的链接，而无需触摸我们的应用程序 </li><li> 添加<b>舞台</b>别名并将其绑定到我们的lambda的第一个版本 </li><li> 添加别名<b>“ Prod”，</b>并重复我们对<b>“ Stage”</b>所做的操作 </li></ol><br><blockquote>  <b>注意：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>描述了如何在实践中使用别名。 关于lambda的实用部分将与SQS一起在下一篇文章中 </blockquote><br>  <b>因此，现在我们有点难以理解，实际上3个别名是指一个版本，尚不清楚。</b>  <b>但是什么都没有，一切都井井有条</b> <br><br><h4> 第二状态 </h4><br><ol><li> 创建我们的lambda的第二个版本（可以添加“ Hello world”的第二个输出）。 在这里，我要指出， <b>“ $ LATEST”</b>此刻将立即查看第二个版本。 由于<b>“ Dev”</b>与<b>“ $ LATEST”相关联</b> ，因此他还将查看第二个版本。 </li><li> 接下来，我们希望我们的<b>舞台</b>讨论第二个版本。 现在，它与版本<b>“ 1”</b>绑定在一起。 在这里，我们需要手动更改<b>“ Stage</b> ”指示的版本。 </li><li> 欢喜 我们得到了图表中第二个状态。 也就是说，我们的<b>“产品”</b>着眼于第一个版本，而<b>“ Dev”</b>和<b>“ Stage”则</b>着眼于第二个版本。 </li></ol><br><h4> 第三国 </h4><br> 现在，要获得第三个状态，我们只需要在代码中添加几行，便会有lambda的第三个版本。 现在， <b>“ Dev”</b>会看着她。 <br><br><h2> 总结一下 </h2><br> 那么我们有什么呢？ <br><br> 一点。 快点 比较便宜。 自动缩放。 版本化。 功能。 <br> 在本文中，我们仅考虑了理论部分，即对该服务的熟悉程度。 与上一篇文章中的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SQS</a>相同。 在下一篇文章中，我们将考虑这两种服务如何相互交互，并以实用的形式学习如何配置和使用它们。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN457100/">https://habr.com/ru/post/zh-CN457100/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN457090/index.html">安全婴儿床：JWT</a></li>
<li><a href="../zh-CN457092/index.html">我们研究MITRE ATT＆CK。 移动矩阵：设备访问权限。 第5部分</a></li>
<li><a href="../zh-CN457094/index.html">Excel加载项，使用多维数据集（VBA）时可以轻松设置过滤器</a></li>
<li><a href="../zh-CN457096/index.html">我们将精力分配给了几位分析师：API Livy，用于实现典型银行业务的自动化</a></li>
<li><a href="../zh-CN457098/index.html">使用Either monad进行优雅的JavaScript错误处理</a></li>
<li><a href="../zh-CN457102/index.html">QVD文件-内部内容，第3部分</a></li>
<li><a href="../zh-CN457106/index.html">美国自动电话大战-谁获胜，为什么获胜</a></li>
<li><a href="../zh-CN457108/index.html">WWDC19：XCTest的测试计划入门</a></li>
<li><a href="../zh-CN457110/index.html">使用特性对C ++和模拟注入模式进行单元测试</a></li>
<li><a href="../zh-CN457112/index.html">HolyJS 2019 Piter的结果</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>