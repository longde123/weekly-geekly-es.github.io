<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¾ ğŸ‘²ğŸ¾ ğŸ„ Apakah mungkin tanpa Redux? ğŸ”› ğŸ˜– ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘¨ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari ini Anda dapat menemukan banyak posisi di mana reaksi / reduks diperlukan. Bereaksi hebat, tidak ada pertanyaan. Pertanyaan untuk Redux adalah ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apakah mungkin tanpa Redux?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455176/"> Hari ini Anda dapat menemukan banyak posisi di mana reaksi / reduks diperlukan.  Bereaksi hebat, tidak ada pertanyaan.  Pertanyaan untuk Redux adalah apakah mungkin tanpa itu.  Jika Anda sedikit google, ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel yang</a> solid <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di HabrÃ©</a> , di mana penulis mengajukan pertanyaan yang sama.  Dalam artikel dengan contoh sederhana (todoList), metode this.updateViews () dipanggil terlalu sering (tujuh hingga delapan kali) dan tampaknya lebih mudah dilakukan. <br><br>  Gagasan utama di sini adalah model yang dapat diamati, bereaksi bertanggung jawab atas yang dapat diamati, satu-satunya yang tersisa adalah membuat model. <br><br>  Sebelum membuat model, beberapa kata tentang desain (arsitektur) klien: <br><br>  indeks - data mentah <br>  sejarah - larik [model] <br>  pengamat - model <br>  lihat - kesalahan, fokus, bendera <br><br>  index.jsx - titik masuk program untuk layar pengguna.  Indeks membuat semua komponen dengan data default, membuat kueri sinkron, menggambar ulang komponen dengan data baru. <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// index.jsx &lt;History&gt; &lt;Observer&gt; &lt;HeaderView /&gt; &lt;MainView /&gt; &lt;/Observer&gt; &lt;/History&gt;</span></span></code> </pre> <a name="habracut"></a><br>  Observer.jsx bertanggung jawab untuk menyinkronkan model untuk beberapa tampilan.  Misalnya, Petya mengisi formulir penawaran dan melihat pratinjau waktu-nyata di header halaman.  Pengamat menyimpan objek model, menyediakan api: onModelChange (bidang, nilai) ke komponen turunan. <br><br>  History.jsx adalah tumpukan objek model, di mana api: commit dan rollback. <br><br>  Model.js adalah apa yang dapat dimasukkan oleh pengguna dengan pena - yaitu yang paling berharga.  Data lain dalam model tidak perlu disimpan.  Model bukan komponen reaksi, tetapi kelas js biasa. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(other = {}) {} <span class="hljs-comment"><span class="hljs-comment">// copy constructor (and default too) isEqual(other) {} // operator == less(other) {} // operator&lt; swap(other) {} hash() {} fieldNameConstrains() {} //see below please }</span></span></code> </pre><br>  Pembuat salinan setidaknya diperlukan untuk Riwayat.  Metode isEqual adalah untuk popup-unsaved-changes (yang jauh lebih nyaman daripada flag in state).  Metode fieldNameConstrains adalah untuk bidang dependen. <br><br>  Secara kasar, jika ada bidang dependen, mereka perlu diubah semua berturut-turut. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// constrains // distance &lt;== velocity * time velocityConstrains(newVelocity) { this.velocity = newVelocity; this.distance = this.velocity * this.time; } timeConstrains(newTime) { â€¦ } distanceConstrains(newDistance) { this.distance = newDistance; this.time = this.distance / this.velocity; } }</span></span></code> </pre><br>  Dari pengalaman pribadi, sesuatu seperti model.field.onchange tidak berfungsi, karena kadang-kadang Anda perlu memanggil pembuat salinan dan acara pertukaran tidak diperlukan sama sekali. <br><br>  Lihat.jsx <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">errors</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">focus</span></span>: {}, â€¦ } render() { â€¦ &lt;input value={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.model.title} onChange={e =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onModelChange(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, e.target.value)} /&gt; â€¦ } }</code> </pre><br>  Validasi  Validasi tidak perlu dilakukan dalam model.  Ini harus dilakukan dalam tampilan (jangan lupa bahwa tampilan adalah layar pengguna dan tidak seluruh model dapat ditampilkan di layar).  Validator adalah seperangkat predikat.  Hanya ada dua algoritma untuk validasi: 1) kami menemukan semua kesalahan dalam formulir atau 2) kami menemukan kesalahan pertama.  Sebagai contoh <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ onClickSaveButton() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapper = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> model.title.length &amp;&amp; !maxLenValidator(model.title, <span class="hljs-number"><span class="hljs-number">25</span></span>), <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> !<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">model.price % </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">40</span></span></span></span><span class="hljs-function"><span class="hljs-params"> == </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">), </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> !urlValidator(model.url), â€¦ } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> errors = map(mapper, (validator, key) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> validator() ? key : <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>; }).filter(<span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>); } <span class="hljs-comment"><span class="hljs-comment">//      </span></span></code> </pre><br>  Hak akses.  Hal utama di sini adalah tetap tinggal dan tidak menggunakan warisan.  Idenya adalah bahwa model tersebut berisi semua bidang dan kami memangkas bidang untuk peran.  Artinya, ini adalah daftar putih, bidang yang tersisa dalam model tetap secara default.  Satu langkah ditambahkan untuk validasi - kami membuat proyeksi objek validasi (itu juga mapper, lihat di atas), yaitu, kami hanya memvalidasi bidang yang diperlukan. <br><br>  Tentang produksi.  Pendekatan ini telah berputar dalam produksi selama satu tahun sekarang - ini adalah antarmuka untuk membuat kampanye iklan, termasuk spanduk.  Bentuk kompleksitas yang berbeda-beda - mulai dari satu model ke layar, diakhiri dengan banyak model dari jenis yang berbeda.  Di sini Anda dapat menambahkan bahwa backend suka mengirim struktur bersarang, Anda tidak boleh malu dan hanya menyimpan struktur datar dalam tampilan. <br><br>  Tentang metode model isEqual.  Di suatu tempat di utils.js akan ada metode isEqual dan isEqualArray: <br><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isEqual</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">left, right</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left.isEqual(right); } isEqualArray(v1, v2) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v1.length !== v2.length) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k != v1.length; k++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isEqual(v1[k], v2[k])) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre><br>  Anda perlu mencoba untuk tidak membuat model bersarang.  Jangan lupa bahwa modelnya adalah data pengguna, bukan struktur data. <br><br>  Referensi: <br><br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Waktu</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dua</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id455176/">https://habr.com/ru/post/id455176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id455164/index.html">Elena Balashova: "Para aktivis mengajukan pertanyaan bahwa data portal GIS kami harus terbuka untuk OpenStreetMap"</a></li>
<li><a href="../id455166/index.html">VPN pada router Beeline untuk memotong kunci</a></li>
<li><a href="../id455168/index.html">Demo 492 byte pada ATtiny5</a></li>
<li><a href="../id455170/index.html">Arsitektur baru untuk akses byte ke SSD - cara kerjanya</a></li>
<li><a href="../id455172/index.html">Pohon pencarian biner seimbang: implementasi pada Julia</a></li>
<li><a href="../id455178/index.html">Tangkap aku jika kau bisa. Versi Direktur</a></li>
<li><a href="../id455184/index.html">Printer 3D seharga $ 250 kamar</a></li>
<li><a href="../id455186/index.html">Printer 3D MIT: hingga 10 bahan per model</a></li>
<li><a href="../id455190/index.html">Pencetakan 3D sel otot jantung</a></li>
<li><a href="../id455194/index.html">Amazon meluncurkan pengiriman drone. Bagaimana cara kerjanya?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>