<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë• üßê ü§≥ Castlevania Bot ‚ÄºÔ∏è üå† üëãüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was ist das 
 CastlevaniaBot ist ein Plugin f√ºr den NES Nintaco-Emulator , der in Castlevania gespielt wird. Wenn Sie es auf dem Begr√º√üungsbildschirm ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Castlevania Bot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432784/"><h1>  Was ist das </h1><br>  CastlevaniaBot ist ein Plugin f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den NES Nintaco-Emulator</a> , der in Castlevania gespielt wird.  Wenn Sie es auf dem Begr√º√üungsbildschirm ausf√ºhren, durchl√§uft das Plugin das gesamte Spiel von Anfang bis Ende.  Oder Sie k√∂nnen es √ºberall im Spiel ausf√ºhren, damit es einen Teil davon durchl√§uft. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/UrtgTGmv1GQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  In diesem Artikel werde ich Ihnen erkl√§ren, wie Sie einen Bot erstellen, der Castlevania passieren kann, und wie Sie f√ºr jedes Spiel auf NES etwas √Ñhnliches erstellen k√∂nnen. <br><a name="habracut"></a><br><hr><br><h1>  Wissensbasierte Struktur </h1><br>  Dieses Projekt verwendete kein maschinelles Lernen.  Entwicklung kann vielmehr als "maschinelles Lernen" bezeichnet werden.  Ich wei√ü, wie man an Castlevania vorbeikommt.  Die Schwierigkeit bestand darin, mein Wissen in ein Computerprogramm zu schreiben.  Das Ergebnis war ein System, das denselben Entscheidungsprozess simuliert, den ich mit dem Controller in meinen H√§nden durchf√ºhre.  Um es zu erstellen, mussten die detaillierten Details der Physik, die die Bitwelt von Simon Belmont steuert, und alle Taktiken, die f√ºr einen erfahrenen Vampirj√§ger erforderlich sind, klar angegeben werden. <br><br>  CastlevaniaBot hat Zugriff auf eine Reihe von Strategien, um mit einer Vielzahl von Situationen umzugehen.  Die meisten von ihnen sind f√ºr die Arbeit mit einer bestimmten Art von Spielobjekten ausgelegt.  Zum Beispiel gibt es eine Skelettkontrollstrategie, eine andere f√ºr Fischmenschen, zum Brechen von Kerzen, zum Sammeln von Herzen und so weiter. <br><br>  CastlevaniaBot √ºberwacht st√§ndig den Stand des Spiels und wechselt bei Bedarf zwischen verschiedenen Strategien.  Bei der Entscheidungsfindung wird die Fitnessfunktion verwendet, mit der alle Spielobjekte auf dem Bildschirm eingestuft werden.  Ganz oben auf der Liste steht das Hauptziel, und wenn es sich √§ndert, √§ndert der Bot seine Strategie.  Zum Beispiel k√∂nnte CastlevaniaBot bereit sein, die Kerzen zu schlagen, wenn eine Fledermaus in den Rahmen fliegt.  Abh√§ngig von der Entfernung zur Fledermaus kann CastlevaniaBot von einer Kerzenstrategie zu einer Fledermausstrategie wechseln.  Er wird die Fledermaus zerst√∂ren und weiterhin mit Kerzen arbeiten. <br><br>  Bevor CastlevaniaBot sich f√ºr einen Wechsel entscheidet, √ºberpr√ºft es sein aktuelles Ziel und seine Strategie.  Wenn er keinen Erfolg hat, kann er in einem endlosen Zyklus stecken bleiben und zwischen zwei Zielen mit gleicher oder fast gleicher Priorit√§t hin und her wechseln.  Um dies zu vermeiden, kann CastlevaniaBot beschlie√üen, die aktuelle Strategie fortzusetzen, wenn ein neues Hauptziel angezeigt wird, dessen Priorit√§t nur geringf√ºgig h√∂her ist als das aktuelle Ziel. <br><br>  Einige Strategien werden automatisch gestartet, wenn sie in einen bestimmten Bereich fallen.  In der Regel sind sie f√ºr die gleichzeitige Bearbeitung mehrerer Spielobjekte vorgesehen.  In einem Korridor mit einem Haufen fliegender Quallenk√∂pfe ist es beispielsweise am besten, einfach weiterzumachen und nicht auf jeden Kopf einzeln zu zielen. <br><br>  Einige Strategien k√∂nnen abh√§ngig von der aktuellen Sekund√§rwaffe und der Anzahl der gesammelten Herzen variieren, insbesondere bei Bossk√§mpfen.  CastlevaniaBot versucht, basierend auf den verf√ºgbaren Tools und der aktuellen Situation die beste Entscheidung zu treffen. <br><br><hr><br><h1>  Planen einer 8-Bit-Welt </h1><br>  Bei der Arbeit an solchen Projekten versuche ich in erster Linie, die Aufgabe zu vereinfachen.  Ich stellte mir vor, wie Castlevania aussehen w√ºrde, wenn es auf den Levels keine Feinde, Kerzen oder Gegenst√§nde zum Sammeln g√§be.  Alles was in diesem Fall ben√∂tigt wird, ist einfach vom Anfang bis zum Ende des Levels zu kommen.  Ich fragte mich: Wenn ich dem Bot beibringen kann, wie das geht, wie schwierig wird es sein, mehrere Feinde auf dem Weg zu zerst√∂ren? <br><br>  Um dem Bot das Bewegen beizubringen, brauchte ich Kachel-Hintergrundkarten und ein Verst√§ndnis daf√ºr, wie die Level organisiert sind.  Das Spiel besteht aus sechs Levels, von denen jedes mit einem Boss endet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09b/644/665/09b644665551ebb424b3813af0205173.png"></div><br>  Jedes Level ist in 3 oder 4 Stufen unterteilt.  Die B√ºhnen sind normalerweise durch Holzt√ºren getrennt, die sich knarrend √∂ffnen und hinter dem R√ºcken des Spielers zuschlagen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/207/5fb/a46/2075fba46c9ef8ccd9a496df6aadcf07.png"></div><br>  T√ºren sind Kontrollpunkte (Checkpoints).  Wenn ein Spieler get√∂tet wird, kehrt er zum Beginn der Phase zur√ºck, aber nur, wenn er sein Leben nicht beendet hat.  Wenn Sie das Spiel nach dem Spielende fortsetzen, wird der Spieler an den Anfang des Levels geschickt. <br><br>  Die Stufennummer gibt die Gesamtzahl der seit Spielbeginn abgeschlossenen Kontrollpunkte an.  Die letzte Stufe ist Nummer 18. Wenn Sie jedoch Dracula t√∂ten, beginnt das Spiel im schwierigen Modus von vorne und die Anzahl der Stufen steigt weiter auf 19 und dar√ºber hinaus.  Wenn Sie den schwierigen Modus durchlaufen, wird der dritte Zyklus des Spiels nicht schwieriger, aber die Anzahl der Stufen steigt weiter an. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/447/6a5/3c5/4476a53c571dc062a4bc2287f5e02587.png"></div><br>  Jede Stufe besteht aus einer oder mehreren horizontalen Bildlaufleisten des Hintergrunds, die ich als "Unterschritte" bezeichne.  Wenn Sie den Bildschirm √ºber die Treppe nach oben oder unten verlassen, wechselt das Spiel von einer Unterstufe zur n√§chsten und rollt nicht vertikal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/751/5d8/7607515d8da99df95877d7eef8214f3f.png"></div><br>  Das Spiel verwendet 3 Bytes, um die Spielzyklusnummer, die Stufennummer und die Unterstufennummer zu verfolgen.  Der Spielzyklus im Normalmodus (Normalmodus) hat den Wert 0;  Werte von 1 und h√∂her zeigen den schwierigen Modus an.  Unabh√§ngig vom Spielzyklus haben die Schritte immer eine Nummerierung von 0 bis 18. Und die Unterschritte haben immer einen Wert von 0 oder 1, da die Schritte nie mehr als 2 horizontale Streifen enthalten.  CastlevaniaBot verfolgt diese Bytes, um zu wissen, wo sie sich befinden. <br><br>  Der Einfachheit halber habe ich den Hintergrundstreifen jeder Unterstufe in einer separaten Grafikdatei aufgezeichnet.  Wenn ich die genauen Koordinaten eines Objekts herausfinden musste, konnte ich sie mit einem grafischen Editor schnell herausfinden.  Ich habe die Dateien mit dem in Nintaco integrierten Map Maker-Tool aufgenommen.  Ich schaltete es ein und ging dann das ganze Spiel durch.  Einige der resultierenden Bilder enthielten mehrere miteinander verbundene Teilschritte, die leicht auseinander zu brechen waren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a53/3de/57e/a533de57e49c26f55eea024465dd3cf6.png" alt="Nintacos Map Maker"></div><br>  Nachdem ich die Hintergrundbilder untersucht hatte, stellte ich fest, dass die einzigen wichtigen Kacheln Plattformen und Treppen sind.  Alles andere kann als leerer Raum betrachtet werden.  Es gibt zwei Arten von Treppen: vorw√§rts oder r√ºckw√§rts (sie k√∂nnen als linker und rechter Rand eines gleichschenkligen Dreiecks dargestellt werden).  Manchmal endet die Treppe mit einer Plattform, auf der der Spieler gehen kann. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6e/6fa/76b/c6e6fa76bcd6d6c3457060763eb6f993.png"></div><br>  Es gibt nur 5 wichtige Arten von Kacheln, und auf jeder Ebene haben sie ein anderes Aussehen.  Ich habe sie kopiert und in separate 16 √ó 16-Bilddateien eingef√ºgt.  Dann habe ich ein Programm geschrieben, das jede Kachel in jedem Unterschritt mit dem entsprechenden Satz von Bildern vergleicht.  Also habe ich die Matrix-Kacheltypen f√ºr alle Unterschritte erhalten. <br><br>  Die Matrizen konnten direkt aus dem ROM extrahiert werden, aber ich konnte die Dokumentation dar√ºber, wie und wo die Daten gespeichert sind, nicht finden.  Da der ROM-Speicherplatz begrenzt ist, werden Level-Daten normalerweise in komprimierter Form dargestellt, die einem Vektorgrafikformat √§hnelt.  Jedes Spiel verwendet ein eigenes Format, daher hielt ich es nicht f√ºr notwendig, Nachforschungen anzustellen, da ich Map Maker hatte.  Au√üerdem brauchte ich noch grafische Bilder der Unterschritte.  Wenn ich die Hintergrundstreifen nicht erfasst h√§tte, m√ºsste ich ein Programm schreiben, das Bilder aus Matrizen generiert. <br><br><hr><br><h1>  Wegfindung </h1><br>  Nachdem ich die Matrizen erstellt hatte, wollte ich den Pfad-Suchalgorithmus anwenden, n√§mlich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Floyd-Warshall-Algorithmus</a> , der die Ausgabetabelle mit den k√ºrzesten Pfaden zwischen jedem der Eckpunktpaare des gerichteten Graphen mit gewichteten Kanten liefert.  Die Idee war, Tabellen vorab zu berechnen, in Dateien zu schreiben und sie dann w√§hrend des Spiels zu laden.  Mit Tabellen im Speicher kann der Bot den k√ºrzesten Weg zwischen zwei beliebigen Plattformkacheln suchen und sofort herausfinden. <br><br>  Das Diagramm besteht aus Kanten und Eckpunkten.  Wenn Plattformkacheln Eckpunkte sind, sind Kanten nur die Operationen, die Simon ausf√ºhren kann, um von einer Plattform zur anderen zu wechseln.  Operationen, die nur innerhalb einer Kachel ausgef√ºhrt werden, sind verboten.  In einer Ebene aus Kacheln kann Simon beispielsweise nur eine Kachel nach links oder eine Kachel nach rechts verschieben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe2/fa3/03d/fe2fa303d199d5c1cb826da8003acd3a.png"></div><br>  Wenn Simon auf der Treppe ist, kann er ein Pl√§ttchen in eine von zwei m√∂glichen Richtungen bewegen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a68/f17/502/a68f175026f789811cf3c7b032f76898.png"></div><br>  Dies sind g√ºltige Operationen.  Aktionen wie das Verschieben vom Mittelpunkt der Kachel zum Rand der Kachel sind jedoch zu fraktioniert, da sie nicht dem √úbergang von einem Scheitelpunkt des Diagramms zu einem anderen entsprechen. <br><br>  Simon kann nicht nur nach links und rechts gehen, Treppen hinunter- und hinaufsteigen, sondern auch zu einem anderen Pl√§ttchen springen.  Und er kann von jedem der 16 Pixel der Kacheloberfl√§che nach links oder rechts springen.  Um die Anzahl der Kanten im Diagramm (und die Gr√∂√üe der Nachschlagetabelle) zu verringern, habe ich nur f√ºnf m√∂gliche Absto√üungspunkte ber√ºcksichtigt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/012/37d/aab/01237daabc08e79e6ccd6de83b6a1c0e.png"></div><br>  Durch Hinzuf√ºgen der Operation "nichts tun" habe ich 15 Operationen erhalten.  Alle von ihnen sind einfach genug, so dass der Bot leicht die Reihenfolge der Tastendr√ºcke bestimmen kann, die f√ºr ihre Ausf√ºhrung w√§hrend der Ausf√ºhrung des Spiels erforderlich sind. <br><br>  Um ein vollst√§ndiges Diagramm zu erstellen, habe ich eine sehr einfache Simulation der Physik der Welt von Simon erstellt.  In dieser Simulation werden alle 15 Operationen ausgehend von jeder Plattformkachel ausgef√ºhrt.  Der Graph wird erstellt, indem einfach beobachtet wird, wo sich Simon befindet.  Insbesondere gibt die Simulation bei der Angabe der Anfangskoordinaten und der Operation die Endkoordinaten am Ausgang an.  Wenn es keine endg√ºltigen Koordinaten gibt, wenn Simon beispielsweise versucht, in eine Wand oder in ein Loch zu gehen, gibt das Programm zur√ºck, dass die Operation ung√ºltig ist und diese Kante nicht Teil des Diagramms ist. <br><br>  Um diese Simulation zu erstellen, war eine gr√ºndliche Untersuchung von Simon Belmont erforderlich.  Im Gegensatz zu anderen klassischen Plattformspielern, bei denen der Spieler vom Gehen zum Laufen beschleunigen kann, bewegt sich Simon bei horizontaler Bewegung immer genau 1 Pixel pro Bild.  Dies gilt f√ºr das Gehen, Springen, Treppensteigen und sogar beim Zur√ºckwerfen, wenn Feinde angegriffen werden. <br><br>  Die Begrenzung der horizontalen Geschwindigkeit vereinfacht die Erkennung von Hindernissen erheblich.  Das Spiel pr√ºft, ob sich in einem Pixel vor dem Charakter eine Wand befindet, und stoppt gegebenenfalls die Bewegung.  Der Test wird unterhalb der Kopfh√∂he durchgef√ºhrt, wodurch der Kopf unter niedrigen Decken hindurchgehen kann, ohne die horizontale Bewegung zu beeintr√§chtigen. <br><br>  Die vertikale Bewegung ist etwas komplizierter.  Wenn Simon vom Rand der Plattform herunterkommt, anstatt allm√§hlich zu beschleunigen, f√§llt er sofort mit einer Geschwindigkeit von 8 Pixel pro Bild herunter.  Da jede Kachel eine H√∂he von 16 Pixel hat (was einem Vielfachen von 8 entspricht), wird die Bodenerkennung vereinfacht.  Gleichzeitig beh√§lt der Spieler eine horizontale Geschwindigkeit von 1 Pixel pro Bild in der Richtung bei, die unmittelbar vor dem Fall erhalten wurde. <br><br>  Simons Sprite ist 16 Pixel breit und kann von seinem Mittelpunkt aus maximal ¬± 4 Pixel √ºber dem Block schweben.  Wenn Sie sich etwas mehr bewegen, f√§llt es darunter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd8/b2a/0a4/fd8b2a0a48035271fc78e7209d980dd5.png"></div><br>  Es ist interessant, dass er bei der Landung nicht genau auf dem Block steht, wenn er die Plattform verl√§sst und genau 1 Pl√§ttchen mit einer Geschwindigkeit von 1 horizontalen und 8 vertikalen Pixeln pro Frame f√§llt.  Eines seiner Beine bleibt bis zu einer Tiefe von 2 Pixeln in der Wand. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da0/a27/458/da0a274588a45b4e448fbe46ef9e48ca.png"></div><br>  Danach kann er die Mauer verlassen, aber nicht hineingehen. <br><br>  Simon kann w√§hrend des Sprunges die Richtung nicht √§ndern.  Nach dem Dr√ºcken von Knopf A macht er einen festen Weg entlang der Parabel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/041/db3/a4a/041db3a4afa0f0f93e0533f0ee1dbd48.png"></div><br>  Oben steigt Simon um 36 Pixel an, wodurch er auf Plattformen mit einer H√∂he von 2 Kacheln springen kann.  Und die Oberseite der "Parabel" ist √ºberraschend flach.  Es scheint, dass es im Raum f√ºr 9 Vollbilder einfriert, m√∂glicherweise um Peitschenschl√§ge in der Luft zu vereinfachen.  Wenn Simon nichts zum Landen hat, wird die Parabelbewegung fortgesetzt, bis er zu seiner urspr√ºnglichen Gr√∂√üe zur√ºckkehrt.  Danach beginnt es mit einer Geschwindigkeit von 8 Pixeln pro Bild zu fallen, dh mit der gleichen konstanten Geschwindigkeit, mit der es von der Plattform f√§llt. <br><br>  Wenn sich eine Plattform direkt √ºber dem Kopf des Charakters befindet, ist das Springen nicht erlaubt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e06/358/0ba/e063580bac81a0ec963336e2886c0e2a.png"></div><br>  Ansonsten ‚Äûspringt‚Äú er teilweise in die Plattformkacheln. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/651/56a/f41/65156af41893e3c9008a4836d67efca1.png"></div><br>  Wie bereits erw√§hnt, bewegt sich Simon nicht mehr horizontal, wenn er mehr als die Oberseite seines Kopfes ber√ºhrt.  Dies ist am Ende der ersten Stufe von Level 4 ziemlich √§rgerlich, wenn der Spieler versucht, aus der H√∂hle herauszukommen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c6/d41/331/1c6d413312f17f67d6247f9a33000499.png"></div><br>  √úber Treppen k√∂nnen Sie sich frei vertikal zwischen Plattformen bewegen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05c/5e1/2fc/05c5e12fc0bd66681054052354e13a14.png"></div><br>  In einem Fall geht Simon die Treppe hinauf und geht durch die Plattformkachel.  Auf der Treppe kann er frei durch die Wand gehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/522/872/438/5228724383d3d908b5298c62dc73e015.png"></div><br>  Auf mobilen Plattformen der Stufe 4 kauert der Spieler normalerweise unter tief h√§ngenden Stalaktiten.  Sie k√∂nnen sich jedoch erheben und sich gegen sie ausruhen.  In einer solchen Situation schr√§nkt das Spiel die horizontale Bewegung ein und zieht Simon schnell in eine Wasserfalle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/feb/dcd/85f/febdcd85f8f47c08806d00343a74fc02.png"></div><br>  Ein Physiksimulator, der orientierte Graphen erzeugt, betrachtet Simon als Rechteck.  Die Bewegung dieses Rechtecks ‚Äã‚Äãwird durch die oben beschriebenen Bewegungsregeln begrenzt.  Damit der Bot nicht wie ein Kaninchen von Ort zu Ort springt, wurden den R√§ndern der Spr√ºnge des Grafen h√∂here Kosten zugewiesen als den R√§ndern des Gehens und Bewegens entlang der Treppe. <br><br>  Die vom Pfadsuchalgorithmus generierte Tabelle enth√§lt die k√ºrzeste Entfernung f√ºr jede Start- und Endkachel (Gesamtkosten des Pfads) und eine Beschreibung des ersten Schritts des Pfads.  Diese Beschreibung enth√§lt die erste Operation, die auf diesem Pfad ausgef√ºhrt werden muss, und die Kachel, auf der sich das Zeichen nach Abschluss befindet.  Der gesamte Pfad kann durch wiederholte Suche in der Tabelle neu erstellt werden, von denen jede den n√§chsten Schritt in Richtung der endg√ºltigen Kachel gibt. <br><br>  In einigen Unterschritten sind die Spalten nicht vollst√§ndig verbunden.  Auf Ebene 4 sind beispielsweise Plattformen die einzige M√∂glichkeit, den Abgrund zu √ºberqueren.  In solchen Unterschritten enth√§lt die Tabelle Methoden zum Bewegen um jede der Inseln, jedoch nicht zwischen ihnen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e0f/098/f72/e0f098f72ffb3a91bb86d2cf5fa1921b.png"></div><br>  Einige zerst√∂rbare Bl√∂cke enthalten versteckte Objekte.  Und die Zerst√∂rung der Bl√∂cke ver√§ndert diesen Graphen.  Um dieses Problem zu umgehen, wurde ein Algorithmus zum Finden von Pfaden mit und ohne geteilte Bl√∂cke auf die Unterschritte angewendet.  Zur Laufzeit √ºberwacht CastlevaniaBot die Zust√§nde der zu teilenden Bl√∂cke und verwendet die entsprechende Nachschlagetabelle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aca/ac4/8a1/acaac48a1c7f4acd0849f06dab3a9d0a.png"></div><br><hr><br><h1>  Spielstatus </h1><br>  CastlevaniaBot l√§sst sich √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">seine API</a> in Nintaco integrieren.  Es registriert die Implementierung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>FrameListener</code></a> , um in jedem Frame eine R√ºckgabe zu erhalten.  Da der Emulator mit etwa 60 Bildern pro Sekunde ausgef√ºhrt wird, muss dieser Listener rechtzeitig zur√ºckgegeben werden.  Lange Berechnungen oder Ausfallzeiten verlangsamen oder blockieren den Emulator.  In kurzer Zeit liest CastlevaniaBot den Status des Spiels, bestimmt sein Hauptziel, wechselt die Strategie, wenn sich das Ziel ge√§ndert hat, und erf√ºllt die aktuelle Strategie. <br><br>  CastlevaniaBot liest den aktuellen Status von Simon Belmont direkt aus dem RAM des Prozessors.  Aber ich kann nicht feststellen, wie andere Spielobjekte im Speicher dargestellt werden.  Daher liest CastlevaniaBot direkt aus dem Speicher der Attribute von Objekten (Object Attribute Memory, OAM) - einem Bereich, in dem eine Liste der angezeigten Sprites gespeichert ist. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/296/b58/46a/296b5846a26530aa657294d619e5ad63.png"></div><br>  Diese Technik funktioniert und ist allgemein auf andere Spiele anwendbar, hat jedoch viele Nachteile.  Die Reihenfolge der Sprites in OAM √§ndert sich st√§ndig.  Wenn mehrere Instanzen desselben Feindtyps gleichzeitig auf dem Bildschirm angezeigt werden, besteht die einzige M√∂glichkeit, sie zu verfolgen, darin, ihre N√§he zu bestimmen und die letzten Koordinaten des Sprites mit den Koordinaten aus dem vorherigen Frame zu vergleichen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46d/236/258/46d23625808baf3abb91916e4f80baed.png"></div><br>  Einige Spielobjekte bestehen aus sich wiederholenden Sprites, wie z. B. Knochent√ºrmen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b7/49a/dcb/1b749adcb05680e5a22247c783d8bac2.png"></div><br>  Bewegliche Plattformen bestehen aus einem Sprite, das sich viermal wiederholt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e0/f85/ea8/7e0f85ea889b5e824a010d04e26f03d2.png"></div><br>  Das Sortieren dieser beiden F√§lle erfordert zus√§tzliche Logik, die einfach zu implementieren ist.  Sekund√§rwaffen-Upgrades und einige Arten von Sekund√§rwaffen verwenden dieselben Sprites.  Schlimmer noch, auf Stufe 5 leihen sich die Ritter Simons sekund√§re Waffen-Sprites aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44c/cd1/08e/44ccd108ea9b25c442a5653d79f0c49e.png"></div><br>  Gl√ºcklicherweise verwendet CastlevaniaBot mit Ausnahme von Weihwasser nur Sekund√§rwaffen, bei denen Upgrades normalerweise nicht verf√ºgbar sind, beispielsweise bei Bossk√§mpfen.  Und das Sprite zur Aufr√ºstung des Weihwassers unterscheidet sich von dem Sprite, das beim Wirken verwendet wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/014/1d2/faf/0141d2faf5e0168ae8d4046cdbfbe278.png"></div><br>  Einige Spielobjekte blinken w√§hrend der Erstellung, zum Beispiel Kristallkugeln am Ende von Bossk√§mpfen, Todesz√∂pfe und Draculas K√∂rper.  Blinkende Sprites erscheinen und verschwinden in OAM, daher ist zus√§tzliche Logik erforderlich, um diese Objekte zu verfolgen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b80/5f1/f8b/b805f1f8bf89efb9c021b716a0d39e25.png"></div><br>  Es ist auch erw√§hnenswert, dass NES aufgrund von Hardwareeinschr√§nkungen nur 8 Sprites pro Rasterzeile anzeigen kann.  Da die Priorit√§t von Sprites teilweise von ihren Indizes in OAM abh√§ngt, wird die Reihenfolge in jedem Frame zuf√§llig gemischt, um eine Verschiebung zu vermeiden, die ein Sprite st√§ndig unsichtbar macht.  Mehrere Sprites blinken nacheinander und √§ndern allm√§hlich ihre Priorit√§t.  Dieses Blinken wirkt sich nicht auf das Lesen von Sprites aus OAM aus.  Die Daten bleiben weiterhin dort, werden jedoch von der emulierten Hardware nicht angezeigt.  Dies unterscheidet sich von der oben beschriebenen Situation durch Blinken beim Erstellen von Sprites.  Dar√ºber hinaus verf√ºgt Nintaco √ºber eine Option, die das Flashen der Hardware erheblich reduziert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b9/527/fe6/6b9527fe61e614012f1fd50d1ad0625e.png"></div><br>  Und schlie√ülich wird ein kleiner Teil des Spielstatus aus den PPU-Namenstabellen gelesen - einem Speicherbereich, der alle Hintergrunddaten enth√§lt.  Dies beinhaltet die √úberpr√ºfung zerst√∂rbarer Bl√∂cke und die Verfolgung der Positionen des ‚ÄûQuetschens‚Äú auf Stufe 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d35/f3c/378/d35f3c378b284474c8d2b5386a78fb57.png"></div><br><hr><br><h1>  Heuristische Zustandsmaschinen </h1><br>  Strategien sind Zustandsmaschinen.  CastlevaniaBot definiert sie als abstrakte Klasse mit <code>init</code> und <code>step</code> Methoden.  Die <code>init</code> Methode wird aufgerufen, wenn CastlevaniaBot zur entsprechenden Strategie wechselt und die Zustandsmaschine zur√ºckgesetzt werden kann.  Und die <code>step</code> f√ºhrt die Strategie aus.  Beispielsweise √ºberpr√ºft die <code>step</code> f√ºr Fischmenschen, ob sich ein Fisch im Bereich einer Peitsche befindet, und wenn ja, schl√§gt der Bot mit einer Peitsche.  Andernfalls wird gepr√ºft, ob es m√∂glich ist, die Schlagdistanz durch einen Sprung zu erreichen, und wenn ja, springt der Bot.  Und schlie√ülich, wenn der Bot dem Feind zu nahe ist, bewegt er sich von ihm weg.  Mit diesen einfachen Regeln besiegt CastlevaniaBot den menschlichen Fisch. <br><br>  Um die Schreibstrategien so weit wie m√∂glich zu vereinfachen, habe ich eine Bibliothek mit m√∂glichen Aktionen erstellt.  Anstatt beispielsweise die Taste A zum Springen zu dr√ºcken und loszulassen, ruft der Bot einfach die Sprungmethode aus der Bibliothek auf.  Und vorher fragt er die Bibliothek, ob Simon auf der Plattform ist und springen kann. <br><br>  Ann√§herung und Entfernung vom Ziel sind Standardaktionen, die unter Verwendung von Operationen aus der vom Pfadsuchalgorithmus erstellten Tabelle ausgef√ºhrt werden.  Beispielsweise verwendet die Kerzenstrategie die Bibliotheksmethode <code>routeAndFace</code> , die Simon nicht nur zu bestimmten angegebenen Koordinaten leitet, sondern diese auch nach dem Schlagen nach links oder rechts dreht.  Abh√§ngig von der H√∂he der Kerzen f√ºhrt die Strategie au√üerdem einen Sprung oder eine Hocke aus, bevor eine Peitsche getroffen wird.  Ein Gegenstand, der von Kerzen gefallen ist, wird in der Luft erzeugt und f√§llt oder f√§llt langsam zu Boden.  Eine Pickup-Strategie f√ºhrt Simon zum n√§chsten Pl√§ttchen direkt unter ihm, bevor der Gegenstand den Boden ber√ºhrt. <br><br>  Um sich von Feinden zu entfernen, muss die Bibliothek wissen, wie man sich nach links oder rechts bewegt, ohne in die Box zu fallen.  Im Allgemeinen wird dies erreicht, indem nach Pfaden zum linken oder rechten Rand der Unterstufe gesucht wird.  In einigen Bereichen muss der k√ºrzeste Weg zum linken Rand zun√§chst nach rechts und umgekehrt verschoben werden.  Als solche Probleme auftraten, f√ºgte ich Logik speziell f√ºr die Teilstufen hinzu und leitete Simon an den linken und rechten Rand der aktuellen Plattform. <br><br><hr><br><h1>  Exemplarische Vorgehensweise </h1><br>  In diesem Abschnitt werde ich die von CastlevaniaBot verwendeten Strategien ausf√ºhrlich beschreiben und die gesamte exemplarische Vorgehensweise kommentieren. <br><br>  Das Spiel beginnt im Hof ‚Äã‚Äãvor dem Schloss.  Die Objekte im Rahmen sind so angeordnet, dass sie das Hauptziel ausw√§hlen, in diesem Fall eine S√§ule mit einer Flamme.  Die Spaltenstrategie weist den Bot an, sich der Spalte zu n√§hern und die Peitsche zu verwenden, wenn sie in Reichweite ist. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14c/647/750/14c6477507cee1d822e6cadbcafbda5a.png"></div><br>  Nachdem Sie die Peitsche getroffen und die S√§ule zerst√∂rt haben, wird ein Gegenstand erstellt.  Die Priorit√§t aller Elemente ist h√∂her als die der Flammens√§ulen.  Folglich reagiert CastlevaniaBot darauf mit einer Strategie, um das angezeigte Objekt zu sammeln, bevor Sie mit den n√§chsten Spalten fortfahren. <br><br>  Beim Ranking von Objekten ber√ºcksichtigt CastlevaniaBot immer ein langfristiges Ziel - ein Level zu beenden, bevor die Zeit abl√§uft.  Beim Erstellen einer Liste potenzieller Ziele wird immer eine T√ºr zur n√§chsten Ebene hinzugef√ºgt.  Der T√ºr wird eine niedrige Priorit√§t zugewiesen, aber nach der Zerst√∂rung aller S√§ulen und der Sammlung aller Objekte wird sie zu einer Priorit√§t.  Mit nur einer Ausnahme: CastlevaniaBot wei√ü, wie man alle verborgenen Sch√§tze aufdeckt, und springt √ºber den Schlosseingang, um eine blinkende T√ºte Geld zu schaffen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/200/7f5/eaa/2007f5eaa4405bd611bd8711017fbe24.png"></div><br>  Nach dem Betreten der Burg sieht CastlevaniaBot Geister und Kerzen.  Kerzen und handgefertigte Gegenst√§nde haben Vorrang, bis die Geister n√§her kommen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a7/9ab/843/8a79ab84345e6a16a9231c5a7f45ceae.png"></div><br>  Es scheint oft, dass die Peitsche Feinde zerst√∂rt, ohne sie zu ber√ºhren.  Ich habe im ROM des Spiels eine Kollisionsrechteck-Tabelle gefunden, damit CastlevaniaBot genau wei√ü, wann sich etwas im Bereich der Peitsche befindet.  Und da die Kollisionsrechtecke oft etwas √ºber die Grenzen der Sprites hinausragen, kann die Peitsche den ‚Äûunsichtbaren Teil‚Äú treffen. <br><br>  In den meisten F√§llen springt CastlevaniaBot beim Zerst√∂ren von Kerzen eher vertikal als vorw√§rts.  Dies ist eine Risikovermeidungstaktik.  Da es in der Luft ist, die Bewegungsrichtung nicht zu √§ndern, kann eine Menge sich n√§hernder Feinde eine sichere Landung erschweren oder unm√∂glich machen.  Dar√ºber hinaus bleibt CastlevaniaBot bei einem vertikalen Sprung im selben Block.  Er muss nicht pr√ºfen, ob der Sprung zu einem Sturz auf die untere Plattform oder den Boden der Grube f√ºhrt. <br><br>  Wenn keine Kerzen zerst√∂rt oder Gegenst√§nde gesammelt werden m√ºssen, beginnt CastlevaniaBot, Geister zu jagen.  Aber die ‚ÄûPanther-Strategie‚Äú befiehlt ihm, still zu stehen und darauf zu warten, dass der Feind innerhalb der Grenzen eines Peitschenschlags f√§llt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/434/9a0/bd5/4349a0bd58a7078c6b0d1951845bfea2.png"></div><br>  Neben der Tatsache, dass Kerzen als Quellen f√ºr Herzen und andere Gegenst√§nde dienen, f√ºhren sie den Spieler auf dem Weg durch die B√ºhne.  Im Bild unten ‚Äûladen‚Äú die Kerzen in der oberen rechten Ecke den Spieler zum Treppensteigen ein.  Um jedoch die Treppe hinaufzusteigen, muss der Spieler zun√§chst nach links gehen, weshalb die Kerzen vom Bildschirm verschwinden.  Da CastlevaniaBot-L√∂sungen auf der Priorisierung von auf dem Bildschirm sichtbaren Objekten basieren, kann diese Situation zu einem endlosen Zyklus f√ºhren, in dem der Bot abwechselnd den k√ºrzesten Weg zu den Kerzen (links) oder den k√ºrzesten Weg zur Ausgangst√ºr (rechts) ausw√§hlt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/309/d1a/8e7/309d1a8e7f1f5a39a8b34411108b94b8.png"></div><br>  √Ñhnliche Probleme k√∂nnen auf verschiedene Arten gel√∂st werden.  Zum Beispiel kann CastlevaniaBot mit dem Speichern von Objekten ausgestattet werden, um zu verstehen, dass Objekte weiterhin existieren, auch wenn sie nicht sichtbar sind.  Trotzdem m√ºssen sie von Anfang an gesehen werden.  Wenn die Kerzen noch weiter rechts w√§ren, w√§re es nach ihrer Entdeckung notwendig, noch weiter zur√ºckzugehen. <br><br>  Vor diesem Hintergrund habe ich Anreize hinzugef√ºgt, die CastlevaniaBot dazu bringen, Bereiche der B√ºhne zu erkunden, die er normalerweise ignorieren w√ºrde.  Diese Anreize funktionieren √§hnlich wie Ausgangst√ºren und ziehen CastlevaniaBot dahin, wo es hingeh√∂rt.  Au√üerdem habe ich Regeln hinzugef√ºgt, nach denen er Kerzen und Objekte ignoriert, die zu weit entfernt sind (in Bezug auf die zur√ºckgelegte Entfernung und nicht in einer geraden Linie). <br><br>  Nach dem Treppensteigen und der Zerst√∂rung der Kerzen entsteht Weihwasser - die wertvollste aller Sekund√§rwaffen.  CastlevaniaBot w√§hlt es aus, indem es einen Dolch gegen es austauscht. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c5/575/00a/4c557500adad3a899c43ea80b983d6fb.png"></div><br>  Wie bei der Geldtasche zu Beginn des Spiels kennt CastlevaniaBot alle zerst√∂rbaren Bl√∂cke mit versteckten Objekten. Um Bl√∂cke mit einer Peitsche zu zerst√∂ren, wird eine Strategie verwendet, die der Strategie f√ºr Kerzen √§hnelt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1eb/007/d43/1eb007d4384996127451979738a3c6ea.png"></div><br>  Mit der weiteren Bewegung von CastlevaniaBot werden Sie feststellen, dass es anf√§ngt, Weihwasser zu verwenden, um Geister und Kerzen zu zerst√∂ren.  Dies mag √ºberfl√ºssig erscheinen, dient aber einem wichtigen Zweck.  Castlevania belohnt Spieler f√ºr den Einsatz von Sekund√§rwaffen mit Doppel- und Dreifachbelichtung.  Mit anderen Worten, CastlevaniaBot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schleift</a> sekund√§re Waffen-Upgrades. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a7/186/be0/6a7186be0588f46012a241cc9745d586.png"></div><br>  Nach dem Dr√ºcken von Taste B gibt es eine Verz√∂gerung von 16 Bildern, bevor eine Peitsche getroffen wird.  Die Peitsche bleibt f√ºr weitere 10 Frames lang, ist aber nur in der ersten dieser zehn g√ºltig.  CastlevaniaBot nutzt diese Tatsache, um das Zielen zu verbessern.  Insbesondere wird die Geschwindigkeit aller Objekte im Rahmen verfolgt, vorausgesetzt, das Hauptziel bewegt sich weiterhin auf einem linearen Pfad.  Dann dr√ºckt er Knopf B 16 Frames, bevor das Ziel eine Peitsche treffen muss.  Der Feind kann w√§hrend dieser 16 Frames immer die Richtung √§ndern, aber normalerweise funktioniert diese einfache Heuristik. <br><br>  Nach dem Betreten der T√ºr trifft CastlevaniaBot jedoch auf rote Flederm√§use.  Wie die K√∂pfe von Quallen fliegen rote Flederm√§use √ºber den Bildschirm und durch eine Sinuskurve durch Plattformen und Treppen.  Um vorherzusagen, wo sich die rote Fledermaus nach 16 Bildern befindet, habe ich die Bewegung eines von ihnen in einer Tabelle aufgezeichnet.  W√§hrend der Ausf√ºhrung des Spiels verfolgt CastlevaniaBot Flederm√§use und wartet auf Spitzen oder Tiefs der Flugbahn, bei denen die vertikale Geschwindigkeit ihr Vorzeichen √§ndert.  Anschlie√üend kann er die Koordinaten mit den Werten in einer vorab erstellten Tabelle vergleichen.  Dies erm√∂glicht es der geeigneten Strategie, den roten Schl√§ger mit einer Peitsche zu schlagen, sich dar√ºber zu beugen oder dar√ºber zu springen. <br><br>  W√§hrend der Passage (Speedrana) von Castlevania f√ºhren die Spieler Man√∂ver durch, die das Spiel so deterministisch wie m√∂glich machen.  Zum Beispiel stellten sie fest, dass sich der Boss gem√§√ü dem gew√ºnschten Muster verh√§lt, wenn er am Ende von Level 1 einen Block zerst√∂rt und in einer bestimmten Zeitsequenz ein Waffen-Upgrade aufnimmt, sodass er schnell besiegen kann. <br><br>  Egal wie erfahren Menschen sind, sie k√∂nnen den Zufallszahlengenerator nicht vollst√§ndig z√§hmen.  Da CastlevaniaBot das Dr√ºcken von Tasten Bild f√ºr Bild genau steuern kann, kann es das Konzept des Geschwindigkeits√ºbergangs jedes Mal, wenn es das Spiel auf absolut identische Weise passiert, an seine Grenzen bringen.  Wenn er das tat, w√§re es nicht besser, als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TAS zu bestehen</a> .  Daher f√ºgt CastlevaniaBot seinen Aktionen mithilfe eines externen Zufallszahlengenerators willk√ºrlich Fehler und Verz√∂gerungen hinzu, um deterministisches Gameplay zu vermeiden.  Wenn er beispielsweise mit einer Peitsche eine hoch gelegene Kerze schl√§gt, f√ºgt er dem Sprung und dem Schlag absichtlich eine Verz√∂gerung f√ºr eine zuf√§llige Anzahl von Bildern hinzu.  Diese winzigen √Ñnderungen wirken sich erheblich auf den Fortschritt des Spiels aus. <br><br>  Obwohl CastlevaniaBot versucht, Determinismus zu vermeiden, hat er sich dennoch ein Konzept aus dem Speedrunning entlehnt: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schadenssteigerungen</a> .  In 50% der F√§lle vermeidet CastlevaniaBot den Durchgang des Verlieses menschlicher Fische vollst√§ndig, indem er zur√ºck auf die rote Fledermaus springt, die sie auf eine ansonsten nicht erreichbare Plattform wirft. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/733/1ed/3757331edfa439d3ed9eb1ef3be8443e.png"></div><br>  In der anderen H√§lfte der F√§lle k√§mpft CastlevaniaBot mit menschlichen Fischen.  Ihre Feuerb√§lle haben hohe Priorit√§t und CastlevaniaBot schl√§gt sie je nach Situation mit einer Peitsche, weicht aus oder h√ºpft. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e4/f51/077/6e4f51077f42c471bc0484e64aaa14b6.png"></div><br>  Aufgrund der Unvorhersehbarkeit der Schaffung von Feinden und ihren Feuerb√§llen f√ºhren die meisten Spieler normalerweise einen Teil mit menschlichen Fischen aus.  Aber CastlevaniaBot verbringt viel Zeit mit ihnen, sammelt alle Herzen und sogar einen verborgenen Schatz am rechten Rand.  Der Bot wei√ü genau, welche Gegenst√§nde in jeder Kerze enthalten sind, und da er lieber Weihwasser verwendet, √ºberspringt er die Kerzen, in denen die Chronometer versteckt sind.  Wenn Sie jedoch in diesem Teil bleiben und mit Fischleuten k√§mpfen, k√∂nnen Sie manchmal unweigerlich einen Chronometer in die Hand nehmen. <br><br>  Stufen enden oft mit Kreuzen, die alle Feinde auf dem Bildschirm zerst√∂ren.  Falls Sie neugierig sind, kann ich sagen, dass Kreuze am Ende eines Levels keine Bosse t√∂ten k√∂nnen.  Tats√§chlich werden manchmal sogar w√§hrend Bossk√§mpfen Kreuze erzeugt.  Zum Beispiel erscheinen im Kampf mit der Medusa manchmal Kreuze, wenn Schlangen get√∂tet werden.  Aber diese Kreuze k√∂nnen nur andere Schlangen t√∂ten. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c3e/328/e31/c3e328e311c90509ffc2450e4b991436.png"></div><br>  Nachdem CastlevaniaBot durch die T√ºr gegangen ist, trifft er erneut auf Geister.  Im Screenshot unten m√∂chte er zur unteren Plattform springen, aber Geister hindern ihn daran, sich zu bewegen.  Wenn eine von einem Pfadsuchalgorithmus erstellte Tabelle CastlevaniaBot zum Springen auffordert, wird der Raum um die Zielplattform untersucht.  Wenn sich herausstellt, dass er auf Feinden landet, wird der Sprung nicht ausgef√ºhrt.  In diesem Fall l√§sst dieser Mechanismus CastlevaniaBot warten, bis die Geister ihren Platz frei haben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c3b/2ef/817/c3b2ef81726485f94f1f391efa1ab2e6.png"></div><br>  Diese Regel ‚ÄûVor dem Springen nach Feinden suchen‚Äú veranschaulicht eines der Prinzipien der CastlevaniaBot-Struktur: Sie sollte durch einfache, m√∂glichst allgemeine Regeln geregelt werden.  In einigen Teilen des Spiels ist es notwendig, einmalige Strategien zu verwenden, die sehr spezifische Probleme l√∂sen.  Aber im gr√∂√üten Teil des Spiels werden Bot-Aktionen von wiederverwendbaren Heuristiken gesteuert.  Ich habe kein Team geschrieben, das ihn dazu brachte, an diesem bestimmten Punkt anzuhalten und darauf zu warten, dass die Geister ihnen aus dem Weg gehen.  Dieses Verhalten ist auf Heuristiken zur√ºckzuf√ºhren. <br><br>  CastlevaniaBot beendet das Level, indem es die Phantomfledermaus mit dreifachem Weihwasser t√∂tet.  Seine Angriffsstrategie wird jedoch von seiner Sekund√§rwaffe bestimmt.  Wenn er keine Sekund√§rwaffe hatte, war er bereit, den Boss mit einer einzigen Peitsche zu t√∂ten.  Ein besonders interessanter Fall ist das T√∂ten einer Phantomfledermaus mit einer Axt.  √Ñhnlich wie bei der roten Fledermaus habe ich in der Tabelle die Bewegung der Axt entlang der Parabel aufgezeichnet.  W√§hrend der Ausf√ºhrung des Spiels f√ºhrt CastlevaniaBot einen Tabellenversatz durch, indem es mit jedem der Bodenfliesen abgeglichen wird.  Auf diese Weise k√∂nnen Sie den optimalen Punkt berechnen, um den Boss mit einer Axt zu t√∂ten. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0c/480/2de/d0c4802de26d9629ca4376a67513106f.png"></div><br>  Kurz bevor CastlevaniaBot die Kristallkugel aufnimmt, wirft er die Sekund√§rwaffe in verschiedene Richtungen und wei√ü, dass sie in der Luft gefriert, nachdem sie die Kugel ber√ºhrt hat.  Dann springt er wiederholt nach dem Zufallsprinzip und schl√§gt mit einer Peitsche, in der Hoffnung, in einer seltsamen Pose einzufrieren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f90/83b/d56/f9083bd561d92261d581128157bdf205.png"></div><br>  Zu Beginn von Level 2 vermeidet CastlevaniaBot die ersten Kerzen, in denen der Bumerang versteckt ist.  Die Strategie, mit einem Ritter-Speerf√ºhrer zu arbeiten, ist eine Kampagne gegen die Strategien von Geistern oder Fischmenschen, aber dies ist der erste Feind, der zwei Treffer ben√∂tigt.  Die schwarze Fledermaus macht ein Nickerchen, bis Sie sich ihr n√§hern. Danach hebt sie ab und bewegt sich linear genug, um mit einer Peitsche mit den oben genannten einfachen Heuristiken get√∂tet zu werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3e/d23/01e/a3ed2301ee4a6689ef64648439eb1939.png"></div><br>  CastlevaniaBot hat in 50% der F√§lle die Ziegel der Mauer zerst√∂rt und scheint den Raum zu verlassen, ohne die Krone zu heben.  Aber ist das so?  Tats√§chlich nimmt er in solchen F√§llen die Krone mit dem Fehler des Spiels auf.  Da das Ende der oberen Leiter horizontal mit der Position der Krone zusammenf√§llt, ist der Spieler beim Passieren und hinter dem Bildschirm vor√ºbergehend unten.  Wenn Sie den Ton h√∂ren oder auf die Brille schauen, k√∂nnen Sie sehen, dass der Bot tats√§chlich die Krone nimmt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/348/459/ef8/348459ef8dc72330b2d1bf99c63eb07d.png"></div><br>  Auf Stufe 2 greifen Feinde den Spieler nicht an, wenn er sich auf einer sich bewegenden Plattform befindet.  CastlevaniaBot muss nur warten, bis sich die Plattform n√§hert, die Plattform betreten, warten, bis sie die andere Seite erreicht, und dann aussteigen.  Es gibt eine geringf√ºgige Abweichung f√ºr Plattformen, die keine Kacheln ber√ºhren.  In solchen F√§llen steigt CastlevaniaBot nicht ab, sondern springt von der Plattform. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/161/7e3/f4c/1617e3f4c2b0f50832dba59992438aa7.png"></div><br>  Eine T√ºr f√ºhrt in einen Korridor voller fliegender K√∂pfe, und CastlevaniaBot reagiert darauf, indem er sich vorw√§rts bewegt.  Wie bei mobilen Plattformen wei√ü CastlevaniaBot, dass diese Strategie basierend auf ihrer Position angewendet werden muss, anstatt Spielobjekte auf dem Bildschirm zu priorisieren.  Sobald jedoch alle K√∂pfe der Quallen vorbeifliegen, wechselt er zur√ºck zu dieser Technik, um die Strategie zu w√§hlen, die weiter angewendet wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c33/0ce/dd8/c330cedd8cdb3748b08988787e1b58df.png"></div><br>  Eine andere Strategie wird je nach Position ausgel√∂st, nachdem die n√§chste Leiter hinaufgestiegen ist, die zu dem mit Quallenk√∂pfen gef√ºllten Bereich f√ºhrt.  In 50% der F√§lle springt CastlevaniaBot absichtlich auf den Kopf einer Qualle, um einen Schadensschub zu erhalten, und schiebt ihn auf die obere Plattform neben der T√ºr, die zur n√§chsten Stufe f√ºhrt.  Dies sind die einzigen zwei Schadenssch√ºbe, die CastlevaniaBot kennt.  Im Gegensatz zu Speedrunnern wird es nicht ausgef√ºhrt, um Zeit zu sparen. Dies ist nur ein weiterer Beitrag zum Nichtdeterminismus der Passage. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ea/e45/c5c/0eae45c5c564301aa03fa376b85f43f2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Durchlaufen des Schwarms ist eine interessante positionsbasierte Strategie, die dreimal wiederholt wird. </font><font style="vertical-align: inherit;">CastlevaniaBot wartet, bis der n√§chste "Schwarm" links davon die gew√ºnschte Position erreicht, wonach er durchl√§uft. </font><font style="vertical-align: inherit;">Nachdem er es passiert hat, h√§lt er an, dreht sich um, schl√§gt mit einer Peitsche auf die Kerzen, nimmt das erstellte Objekt auf und wiederholt den Vorgang mit dem anschlie√üenden ‚ÄûQuetschen‚Äú. </font><font style="vertical-align: inherit;">Eines der Objekte k√∂nnte m√∂glicherweise Weihwasser sein, daher werden diese Kerzen immer zerst√∂rt.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d2/2b4/303/7d22b4303c14e5f460b4b090918ef1fb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach dem ‚ÄûCrush‚Äú erscheinen zuerst Geister und Knochent√ºrme. </font><font style="vertical-align: inherit;">Geister sind sehr leicht zu zielen, aber um sie zu t√∂ten, braucht man ein paar Treffer. </font><font style="vertical-align: inherit;">Es ist noch einfacher, auf die Knochent√ºrme zu zielen, weil sie sich nicht bewegen. </font><font style="vertical-align: inherit;">F√ºr ihre Feuerb√§lle wird die gleiche Strategie angewendet wie f√ºr die Fisch-Menschen-B√§lle.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b1/0ad/931/7b10ad9316ab8e0ef3f53007740ffd4a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Level 2 endet normalerweise damit, dass CastlevaniaBot Medusa sofort mit einem endlosen Strom von Weihwasser t√∂tet. </font><font style="vertical-align: inherit;">Er ist jedoch bereit, mit jeder anderen Art von Sekund√§rwaffe zu arbeiten.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46a/02c/a28/46a02ca28233821148bd64afcf43ef65.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf Stufe 3 erscheinen Jumper. </font><font style="vertical-align: inherit;">CastlevaniaBot reagiert auf sie und wartet darauf, dass sie an die Grenzen der Peitsche springen. </font><font style="vertical-align: inherit;">Wenn die Springer den Spieler springen, bewegt sich CastlevaniaBot in die entgegengesetzte Richtung und schl√§gt sie mit einer Peitsche, bevor sie den Boden ber√ºhren.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/863/ec4/58e/863ec458ebc43b8c3959750018c9952e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dann erscheinen wei√üe Skelette. </font><font style="vertical-align: inherit;">Sie haben ein sehr zuf√§lliges Muster. </font><font style="vertical-align: inherit;">Au√üerdem werfen sie Knochen. </font><font style="vertical-align: inherit;">Auf Stufe 3 versucht CastlevaniaBot zu vermeiden, getroffen zu werden. </font><font style="vertical-align: inherit;">Aber ich habe festgestellt, dass die Knochen in sp√§teren Levels nur ablenken und es effizienter ist, sie einfach zu ignorieren. </font><font style="vertical-align: inherit;">CastlevaniaBots Strategie f√ºr wei√üe Skelette besteht darin, sie einfach zu schlagen.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c4d/eaf/9e4/c4deaf9e44458c08487d89d22b5a9618.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot wartet darauf, dass die Kr√§hen hochfliegen. </font><font style="vertical-align: inherit;">Basierend auf der Gr√∂√üe des Raben im Verh√§ltnis zum Spieler berechnet er dann genau, wann er nach dem Sprung mit einer Peitsche schlagen muss.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0b/7ce/78c/d0b7ce78cf8ea65a6001ca63a0a1d087.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach dem √úbergang zur n√§chsten Stufe schl√§gt CastlevaniaBot unabh√§ngig auf die Kerzen, aus denen der Chronometer erscheint, und wartet, bis er verschwindet. </font><font style="vertical-align: inherit;">Ein St√ºck vor und hinter dem Bildschirm ist ein Rabe. </font><font style="vertical-align: inherit;">Der Bot zerst√∂rt Kerzen vor einem Rabenkampf, um das Risiko zu verringern, sie versehentlich zu treffen und unerw√ºnschte Sekund√§rwaffen zu erhalten.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/a6a/c85/fb3a6ac852c7633a530ea2666f3cf3c0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direkt vor dem Standort der Mumien geht CastlevaniaBot nach links auf die Plattform, um das Erscheinen eines versteckten Geldbeutels auszul√∂sen. </font><font style="vertical-align: inherit;">Er tut dies nur aus Gr√ºnden des Interesses, weil er es in keiner Weise anheben kann.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f4/62d/ebe/2f462debef355d502ee9969489c0fa9b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als n√§chstes schl√§gt CastlevaniaBot absichtlich auf die Kerzen, von denen der Dolch f√§llt. </font><font style="vertical-align: inherit;">Wie beim Chronometer tut er dies, um es bei nachfolgenden Aktionen nicht zuf√§llig aufzunehmen.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/094/9c7/0fa/0949c70faa3fcc414107b04ae8e1be68.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Und schlie√ülich werden die Mumien vom Regen aus Weihwasser besiegt. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee4/0a6/75a/ee40a675a2432df6a4a3c24d2681c682.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot ist bereit, mit jeder Sekund√§rwaffe gegen alle Bosse zu k√§mpfen. </font><font style="vertical-align: inherit;">Tats√§chlich √§ndern sich die Strategien f√ºr den Einsatz von Sekund√§rwaffen vollst√§ndig, wenn aus irgendeinem Grund ein Block mit einem St√ºck Schweinefleisch zerst√∂rt wird. </font><font style="vertical-align: inherit;">Ohne diesen Block ist es unm√∂glich, die obere Plattform zu besteigen, weshalb Sie auf der unteren Ebene k√§mpfen m√ºssen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf Stufe 4 kehren mobile Plattformen zur√ºck. </font><font style="vertical-align: inherit;">Und diesmal besteht die M√∂glichkeit, dass rote Flederm√§use auf dem Weg erscheinen. </font><font style="vertical-align: inherit;">Um die Wahrscheinlichkeit ihres Angriffs zu verringern, erwartet er, dass die Ankunft der Plattform mit der Zerst√∂rung der roten Fledermaus zusammenf√§llt. </font><font style="vertical-align: inherit;">Da rote M√§use in festgelegten Abst√§nden erscheinen, hat CastlevaniaBot gen√ºgend Zeit, um die Wassergrube ohne Flederm√§use zu √ºberqueren. </font><font style="vertical-align: inherit;">Er ist bereit, mit Flederm√§usen und zuf√§llig erscheinenden Fischmenschen auf der Plattform umzugehen, aber dies macht das Springen auf und von der Plattform sehr gef√§hrlich. </font><font style="vertical-align: inherit;">Die von CastlevaniaBot verwendete Strategie erh√∂ht die Erfolgswahrscheinlichkeit.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4a/cb3/35b/f4acb335ba2cf17e29d42dfffe51d689.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die gleiche Strategie wird in der Mitte der Phase wiederholt. </font><font style="vertical-align: inherit;">Diesmal ist der Sprung zur beweglichen Plattform viel l√§nger, daher ist es wichtig, die rote Fledermaus vor dem Sprung zu zerst√∂ren.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b0/42c/e0d/6b042ce0d1ee7845c83d5ff1ea5c65cf.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie im obigen Screenshot gezeigt, befinden sich Kerzen immer in einem Abstand von 64 Pixel voneinander. M√∂glicherweise ist dies ein Artefakt der Tatsache, dass die Level-Daten im ROM in einem Format dargestellt werden, das Vektorgrafiken √§hnelt, wodurch Platz gespart wird. Aus irgendeinem Grund beschlossen die Designer, die Kerzen nicht an den Zentren, sondern an den Kanten der Fliesen auszurichten. In diesem Fall sind die Kerzen an beiden Enden der Plattform ausgerichtet. Daher kann ein Objekt, das erscheint, nach dem Auftreffen direkt in den Abgrund unter ihnen fallen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich denke, dass die Designer dieses Problem irgendwann erkannt haben. Bis dahin kann das Verschieben der gesamten Kerzenserie auf allen fertigen Ebenen, um sie an den Fliesenmitten auszurichten, andere Probleme verursachen. Stattdessen haben sie beschlossen, die Kerzen zuf√§llig um ein Pixel nach rechts oder links von der Stelle zu verschieben, an der sie erstellt wurden. Daher besteht nach dem Schlagen der Kerzen auf der rechten Seite des Screenshots eine 50% ige Wahrscheinlichkeit, dass das darin enthaltene Weihwasser auf die Plattform f√§llt. In der restlichen H√§lfte der F√§lle f√§llt es ins Wasser. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot vermeidet diese Kerzen normalerweise vollst√§ndig, da es erfolgreich Weihwasser konserviert. Aber wenn er es braucht, kommt er diesen Kerzen sehr nahe, um die Auswahl des heiligen Wassers zu garantieren, das von ihnen gefallen ist.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als n√§chstes trifft CastlevaniaBot ein paar Springer. </font><font style="vertical-align: inherit;">In diesem Bereich erscheinen nach dem T√∂ten von Jumpern h√§ufig √Ñxte. </font><font style="vertical-align: inherit;">CastlevaniaBot vermeidet sie, weil Weihwasser besonders n√ºtzlich ist, wenn man gegen den Boss k√§mpft.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/182/f5f/50e182f5fe39bc3e3145bb68aae819d7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beim √úbergang zur letzten Stufe des Levels ignoriert CastlevaniaBot den Knochendrachen vollst√§ndig. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/093/45e/a6c/09345ea6ca0024888d7be0f8d25785f6.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aber er wird die n√§chsten beiden mit schnellen Peitschenschl√§gen los. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5f/0e5/d57/d5f0e5d5706307c36d5d9dd9c19052e7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frankensteins Monster und Igor werden durch einen st√§ndigen Strom von Schl√§gen mit einer Peitsche und Weihwasser zerst√∂rt. </font><font style="vertical-align: inherit;">Wie bei anderen Bossen kann CastlevaniaBot auch mit anderen Sekund√§rwaffen oder √ºberhaupt nicht umgehen. </font><font style="vertical-align: inherit;">Die √úberlebenschancen ohne Weihwasser sind jedoch geringer.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/23f/606/220/23f6062203ce695c2a38c9d2d170926e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf Stufe 5 befasst sich CastlevaniaBot erneut mit wei√üen Skeletten. </font><font style="vertical-align: inherit;">Diesmal verwendet er jedoch Strategievarianten, die auf Stufe 3 selten zu sehen sind. Je nachdem, wo sie erscheinen, wirft CastlevaniaBot Weihwasser und tritt dann zur√ºck, um Skelette in Flammen zu ziehen. </font><font style="vertical-align: inherit;">In der N√§he der Treppe geht er unter den Skeletten hindurch, um sie dorthin zu lenken, wo sie sein sollten.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/64e/c6c/610/64ec6c6100a72265aab1f024c6561718.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf Stufe 5 erscheinen zuerst wiedergeborene rote Skelette. </font><font style="vertical-align: inherit;">CastlevaniaBot verfolgt die Zeit des letzten Treffers, um zu wissen, wann es sicher ist, durch die roten Knochen zu gehen.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8b6/628/54c/8b662854cf5582b93cf299b0852964c9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der erste Raum der Stufe 14 wird vollst√§ndig von einer gro√üen Strategie bearbeitet. CastlevaniaBot t√∂tet zuerst den Springer. Dann wartet er darauf, dass der untere Ritter die Axt wirft, mit einer Peitsche auf die Axt schl√§gt und langsam die untere Treppe hinaufsteigt. Dies dr√ºckt den unteren Ritter hinter den Bildschirm, was zu seinem Verschwinden f√ºhrt. Dann wartet er, bis der obere Bereich frei von √Ñxten ist, schl√§gt auf die Kerzen und sammelt die Gegenst√§nde ein, die erschienen sind. Dann n√§hert er sich dem Fu√ü der Treppe, die zum oberen Ritter f√ºhrt. Als der oberste Ritter die Axt hoch wirft, rennt CastlevaniaBot hinter ihm her. Dies dr√ºckt den oberen Ritter nach links und fast vollst√§ndig vom Bildschirm, zerst√∂rt ihn aber nicht. CastlevaniaBot biegt sich unter die zur√ºckkehrende Axt und m√∂glicherweise unter die zweite verlassene Axt und n√§hert sich schlie√ülich der Treppe zur n√§chsten Unterstufe.</font></font> Hurra! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93a/727/488/93a727488c3cd37cd381668415c1261b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach mehreren Treppen trifft CastlevaniaBot erneut auf einen Ritter mit einer Axt. </font><font style="vertical-align: inherit;">Er benutzt Weihwasser, um ihn zu bet√§uben, und beendet ihn dann mit einer Peitsche. </font><font style="vertical-align: inherit;">Wenn es kein heiliges Wasser gibt, schl√§gt er weiter mit einer Peitsche und jagt den Ritter, bis er stirbt.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/81c/992/8d6/81c9928d6a77554910fb989df1fd4932.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot muss oft warten, bis sich das rote Skelett von der Ober- oder Unterseite der Treppe entfernt hat. </font><font style="vertical-align: inherit;">Gegen Ende des Levels macht der Knochenturm diese Aufgabe noch schwieriger. </font><font style="vertical-align: inherit;">Je nachdem, wie sich die Skelette bewegen, geht CastlevaniaBot die Treppe hinunter und hinauf, bis sie passieren kann.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65a/cd8/ed8/65acd8ed8ae89e882702cb9387b8c432.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Gruppen roter Skelette zu verarbeiten, ist zus√§tzliche Logik erforderlich, damit der Bot nicht in eine Endlosschleife f√§llt. Wenn CastlevaniaBot sie separat mit einer Peitsche schl√§gt, mit einem solchen Intervall, dass der erste Treffer Zeit hat, sich wiederzubeleben, f√§llt er in einen Zyklus, in dem er weiterhin endlos wiederbelebende Skelette zerst√∂rt. Um dies zu vermeiden, wird CastlevaniaBot nicht mit einer Peitsche eines roten Skeletts getroffen, das neben einem Haufen roter Knochen steht. Diese Regel erm√∂glicht es, die roten Knochen neben dem noch lebenden roten Skelett wiedergeboren zu werden, so dass beide gleichzeitig getroffen werden k√∂nnen. Ohne ein Intervall zwischen ihrer Zerst√∂rung wird kein Zyklus erstellt.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/446/82b/18d/44682b18de7a81b58d01dd734e4f57f3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den Quallenk√∂pfen im langen Korridor, der zum Tod f√ºhrt, auszuweichen, h√§lt der Bot nie an und bet√§ubt die Ritter, die normalerweise unterwegs erscheinen. </font><font style="vertical-align: inherit;">Er nutzt die Tatsache aus, dass der Spieler durch von Weihwasser bet√§ubte Feinde gehen kann, ohne Schaden zu nehmen.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/d68/587/cabd685876fb241b8362a9f2f83482d5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn es kein Weihwasser gibt, kann CastlevaniaBot direkt vor dem Korridor einen Bumerang nehmen. </font><font style="vertical-align: inherit;">Unter erfolgreichen Umst√§nden nutzt er es, um die Ritter zu zerst√∂ren und Waffen-Upgrades zu erhalten.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/444/738/a60/444738a60282b741af01e775ebfe70b2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot bet√§ubt den Tod mit Weihwasser, bevor sie anf√§ngt, Z√∂pfe zu werfen, und t√∂tet sie schnell. </font><font style="vertical-align: inherit;">Er kann den Tod auch mit einem dreifachen Bumerang besiegen, dies erfordert jedoch normalerweise mehrere Versuche.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72a/fdb/57a/72afdb57a40c4f9613a71c6edd5beb17.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Hauptstrategie von CastlevaniaBot, die Br√ºcke zu Beginn von Level 6 zu passieren, besteht darin, sich weiter zu bewegen. </font><font style="vertical-align: inherit;">Er schl√§gt eine Peitsche mit riesigen Flederm√§usen von oben, um sie zu bet√§uben, und springt dann √ºber die riesigen Flederm√§use, die von unten erscheinen. </font><font style="vertical-align: inherit;">Au√üerdem muss er von Zeit zu Zeit Feuerb√§llen ausweichen, die von Flederm√§usen geworfen werden, oder sie mit einer Peitsche schlagen.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/507/fa3/c82/507fa3c822d5a767e6b6a4916d1d2857.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Durchgang √ºber die Br√ºcke ist nicht garantiert. </font><font style="vertical-align: inherit;">Es h√§ngt alles davon ab, wie freundlich die riesigen Flederm√§use sein werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im n√§chsten Unterschritt verwendet CastlevaniaBot den Chronographen der Br√ºcke zwei- oder mehrmals, um durch Adler und Springer zu fahren. </font><font style="vertical-align: inherit;">Ohne Chronographen versucht er sich mit einer Peitsche zurechtzufinden.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d06/4fd/3f3/d064fd3f3b249a76112632c100b34ccd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wenn CastlevaniaBot den Turm von Dracula erreicht, kann er die Treppe mehrmals hinauf- und hinuntersteigen, um wieder Kerzen herzustellen, mit denen Sie mindestens 20 Herzen sammeln k√∂nnen. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/338/cf3/525/338cf3525c8b5c0361cb98c23681f8b3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Kerzen ganz rechts in den Kammern von Dracula geben Weihwasser, das notwendig ist, um die zweite Form von Dracula zu bek√§mpfen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die erste Form von Dracula zu besiegen, sind 16 Schl√§ge auf den Kopf erforderlich. </font><font style="vertical-align: inherit;">CastlevaniaBot n√§hert sich Dracula mehrmals, wartet darauf, dass er mit Feuerb√§llen schie√üt, springt dann √ºber die B√§lle und schl√§gt Draculas Kopf mit einer Peitsche.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ad/47e/af9/8ad47eaf9a2a962288480bbf49b844fc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite Form von Dracula, Cookie Monster genannt, wird vom Bot vom Weihwasser bet√§ubt und schl√§gt mehrmals mit einer Peitsche auf den Kopf. </font><font style="vertical-align: inherit;">Von Zeit zu Zeit springt Cookie Monster zum Spieler, w√§hrend CastlevaniaBot ausweicht. </font><font style="vertical-align: inherit;">Cookie Monster wirft auch Feuerb√§lle, die normalerweise mit Weihwasser und einer Peitsche zerst√∂rt werden k√∂nnen. </font><font style="vertical-align: inherit;">Manchmal kann man ein Waffen-Upgrade bekommen. </font><font style="vertical-align: inherit;">Und doppeltes Weihwasser f√§ngt Cookie Monster in einem konstanten Bet√§ubungszyklus, was zu einem schnellen Sieg f√ºhrt.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bdf/05b/266/bdf05b2661aff44a2b0804865013b95b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot kann den schwierigen Modus, der nach dem Abspann beginnt, nicht durchlaufen. </font><font style="vertical-align: inherit;">Nach dem Neustart des Spiels im Schlosshof wird das Spielzyklusbyte jedoch auf Null zur√ºckgesetzt und in den Normalmodus geschaltet. </font><font style="vertical-align: inherit;">Dadurch kann CastlevaniaBot endlos spielen.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c6/3a6/c4a/4c63a6c4ad709d26e0256a6ecdf07a61.png"></div><br><hr><br><h1>  Dateien </h1><br> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot_2018-12-09.zip</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Datei </font></font><code>.zip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enth√§lt:</font></font><br><br><ul><li> <code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Quellbaum. </font></font></li><li> <code>CastlevaniaBot.jar</code> ‚Äî   . </li><li> <code>lgpl-2.1.txt</code> ‚Äî    . </li></ul><br><hr><br><h1>  Starten </h1><br><h2>   </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nintaco</a> ‚Äî  NES. </li><li> <code>Castlevania (U) (PRG1) [!].nes</code> ‚Äî ROM . </li></ul><br><h2>   </h2><br><ol><li>  Nintaco   <code>Castlevania (U) (PRG1) [!].nes</code> . </li><li>  <code>CastlevaniaBot.jar</code>   <code>.zip</code> . </li><li>   Run Program,  Tools | Run Program... </li><li>       JAR   ,    Find JAR.... </li><li>  Load JAR,   . </li><li>  Run. </li></ol><hr><table><tbody><tr><td> Copyright ¬© 2018 meatfighter.com <br><br>      .     /      LGPLv2.1. </td></tr></tbody></table></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432784/">https://habr.com/ru/post/de432784/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432774/index.html">Frontend DevDay. Berichtsaufzeichnung</a></li>
<li><a href="../de432776/index.html">Das Buch "Reagieren in Aktion"</a></li>
<li><a href="../de432778/index.html">Entwicklung eines Tiefsetzstellers auf STM32F334: Funktionsprinzip, Berechnungen, Prototyping</a></li>
<li><a href="../de432780/index.html">Warum Empathie in der Technologiewelt gefragt ist</a></li>
<li><a href="../de432782/index.html">Installation der Zimbra Collaboration Suite mit mehreren Servern</a></li>
<li><a href="../de432786/index.html">.NET - Lokalisierung ohne Schmerzen. (N) gettext + poedit</a></li>
<li><a href="../de432788/index.html">Prototypen: So erstellen Sie ein erfolgreiches Produkt und sparen</a></li>
<li><a href="../de432790/index.html">Supraleiter + Ferromagnet: die Untersuchung von Triplett-Cooper-Paaren</a></li>
<li><a href="../de432794/index.html">Bret Victor: Ein paar Worte zu Douglas Engelbart</a></li>
<li><a href="../de432796/index.html">Rechenmodul, Modelle 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>