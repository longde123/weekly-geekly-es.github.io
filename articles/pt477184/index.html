<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçº üç¥ üñ≤Ô∏è Fil√≥sofo bot para vk.com üéº üíä üç©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Com base em muitos artigos dedicados ao botovodame ... 

 Recentemente, desenvolvi o ‚Äúturnkey‚Äù, um projeto interessante dedicado √† rede social vk.com....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fil√≥sofo bot para vk.com</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477184/"> Com base em muitos artigos dedicados ao botovodame ... <br><br>  Recentemente, desenvolvi o ‚Äúturnkey‚Äù, um projeto interessante dedicado √† rede social vk.com.  A tarefa √© simples - criar um bot que possa ser adicionado √† conversa e que fornecer√° aspas aleat√≥rias.  Mas parecia muito simples, ent√£o tive que reviver o grande fil√≥sofo Friedrich Nietzsche, que faria um bot de um bot - overbot ... <br><br><img src="https://habrastorage.org/webt/mt/s2/bu/mts2buh2gnljp2ocjmctu-adzss.jpeg" alt="imagem"><br><a name="habracut"></a><br>  Como n√£o vi nada de complicado nisso, um script desse tipo foi rapidamente escrito: <br>  <b>Autoriza√ß√£o -&gt; lendo mensagens -&gt; analisando e gerando uma resposta -&gt; resposta</b> <br>  Tudo isso foi feito usando a <b>API de retorno de chamada VK v.5.80</b> ( <i>nada de novo</i> ) <br>  O ponto mais dif√≠cil foi "an√°lise e forma√ß√£o de respostas".  De fato, isso √© a coisa mais importante. <br>  Mas o fato √© que eu queria criar um "bot mais ou menos inteligente" do que simplesmente emitir uma frase aleat√≥ria do dicion√°rio. <br><br>  ‚ÄúComo eu fiz e funcionou?‚Äù - leia por favor ... <br><br>  Ent√£o, vamos come√ßar! <br><br>  Em princ√≠pio, o bot tem uma funcionalidade bastante simples, mas √© simples apenas superficialmente.  Se voc√™ for mais fundo, tudo ser√° muito mais complicado, porque escreveremos em <b>PHP</b> ( <i></i> ) <br><br>  Repito que n√£o preciso apenas de um gerador de cota√ß√µes, ent√£o decidi perguntar ao bot alguma l√≥gica.  No entanto, eu tamb√©m n√£o preciso de uma rede neural, porque o treinamento √© uma tarefa assustadora. <br><br>  Resolvi o problema com criatividade quando tentei reviver o grande fil√≥sofo do s√©culo XIX - Friedrich Nietzsche. <br><br>  Sim, √© Nietzsche quem estar√° no papel do bot e, portanto, at√© cita√ß√µes aleat√≥rias parecer√£o mais inteligentes. <br>  Mas eu queria de alguma forma unir o interlocutor e o bot, criar uma conex√£o entre eles ... <br><br>  Assim, a frase do interlocutor foi tomada como base, transformada por filtros em palavras-chave, nas quais foram encontradas frases de uma base preparada anteriormente. <br><br>  Assim, como se a resposta para a pergunta do questionador fosse formada. <br><br>  Recebi uma nova mensagem do usu√°rio assim: <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  case 'message_new': //... id   $user_id = $data-&gt;object-&gt;peer_id; //   $body = $data-&gt;object-&gt;text;</span></span></code> </pre> <br>  E ent√£o ele trouxe a mensagem de forma adequada para destacar as palavras-chave e aliment√°-las em uma pesquisa no banco de dados. <br><br>  Primeiro, me livrei completamente dos finais " <i>a, e, s, sou, yami, ah, oh ...</i> " e assim por diante ... removi sinais de pontua√ß√£o e outros personagens. <br><br>  Em segundo lugar, n√£o levei em considera√ß√£o as preposi√ß√µes.  Primeiro, limitei as palavras ao comprimento - at√© 3 letras.  Mas isso estava errado, porque as filosofias de Nietzsche eram caracterizadas por palavras como: " <i>deus, mundo, rock, s√©culo etc.</i> ".  Al√©m disso, ap√≥s filtrar palavras de quatro letras, havia palavras de tr√™s letras, porque os finais foram descartados.  Depois, limitei minha pesquisa a palavras como: " <i>mais, o que, sobre, como, onde, etc.</i> ". <br><br>  Em terceiro lugar, Nietzsche escreveu mais em seus livros por conta pr√≥pria; portanto, substituiu palavras recebidas como " <i>seu, seu, voc√™, amor, voc√™ pode" por "meu, meu, eu amo, posso</i> " <i>,</i> respectivamente. <br><br>  Assim, √© obtido um tipo de di√°logo. <br><br>  Al√©m disso - era necess√°rio criar uma base, um dicion√°rio de frases / cita√ß√µes / declara√ß√µes a partir de trechos dos livros de Nietzsche. <br><br>  Baixei os livros de Nietzsche no formato <u>txt</u> de litros.  Reuniu-os e depois filtrou: <br><br>  1 cita√ß√£o = 1 frase ( <i>usou o delimitador como</i> <i>".", "! ',"? "</i> ) <br><br>  Descobriu-se que a base √© sobre esse tipo: <br><br> <code> -  ,     , -    <br>  ,    ,  , ,     <br>    ,   ,   :      ,      <br>    ,  </code> <br> <br>  Bem, h√° um banco de dados e uma mensagem filtrada do usu√°rio. <br><br> <code> : ",      ?" <br>  : "  "</code> <br> <br>  Resta prender o sistema de busca.  Foi dif√≠cil com isso, porque configura√ß√µes diferentes deram resultados diferentes.  E se um c√≥digo deu a resposta correta, o outro pedido n√£o forneceu o que era necess√°rio. <br><br>  Foi decidido n√£o usar express√µes regulares, mas us√°-las em conjunto com fun√ß√µes internas como: <br><br> <code>substr <br> stripos <br> substr_count <br></code> <br><br>  e outros recursos de texto ... <br><br>  Com a ajuda de longas condi√ß√µes de compara√ß√£o e ciclos infinitamente longos, consegui aproximadamente o resultado desejado. <br><br>  A l√≥gica de pesquisa √© mais ou menos assim: percorra cada frase e encontre as palavras da mensagem que est√° presente nessa frase. <br><br>  Se a palavra for encontrada, +1 ser√° adicionado como o "peso da vari√°vel". <br><br>  Portanto, quanto mais palavras s√£o encontradas na frase, maior √© o ‚Äúpeso da vari√°vel‚Äù. <br><br>  Isso sugere que, se as palavras "moralidade e vida" foram encontradas em alguma frase do banco de dados, essa √© uma resposta de 100% que ser√° emitida. <br><br>  Mas se as palavras estavam no t√≥pico e produzissem muitos 100% dos resultados, o m√©todo random () era emitido pelo m√©todo rand (). <br><br>  Al√©m disso, essas nem sempre eram frases pequenas, ent√£o eu tive que aparar a resposta, mais ou menos com esses regulares: <br><br><pre> <code class="php hljs"> preg_match(<span class="hljs-string"><span class="hljs-string">'/(?:^|\.\s+)([^\.]*?'</span></span>.$wordpattern.<span class="hljs-string"><span class="hljs-string">'[^\.]*?\.+)\s+/i'</span></span>, $text , $matches);</code> </pre> <br>  Ent√£o tudo √© autom√°tico: <br>  enviando mensagem <br><br><pre> <code class="php hljs">$request_params = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; $matches[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-comment"><span class="hljs-comment">#'message' =&gt; $find[0], 'peer_id' =&gt; $user_id, 'access_token' =&gt; $token, 'v' =&gt; '5.80' ); $get_params = http_build_query($request_params); file_get_contents('https://api.vk.com/method/messages.send?'. $get_params); header("HTTP/1.1 200 OK"); echo('ok');</span></span></code> </pre><br>  Eu especificamente n√£o carreguei todo o c√≥digo, mas √© relativamente pequeno.  O objetivo era criar um mecanismo de resposta sob demanda, em vez de intelig√™ncia treinada artificialmente. <br><br>  Voc√™ pode testar o bot <a href="http://vk.com/public189002559">neste link</a> .  Basta escrever uma mensagem para ele.  √â importante saber que no in√≠cio da frase voc√™ precisa colocar "Nietzsche", como se estivesse se referindo a ela, somente ent√£o o bot responder√°. <br><br>  Esta √© uma vers√£o de teste e, portanto, incompleta, portanto, tapetes, g√≠rias juvenis, erros de palavras etc. - o bot n√£o leva em considera√ß√£o e a base √© de apenas 10.000 frases. <br><br>  Como exemplos, posso dar os di√°logos: <br><br><img src="https://habrastorage.org/webt/pk/sf/lf/pksflfu977kmdx1fkalpzfyimd8.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/qi/bo/hy/qibohyxceqes_tfp1ssk2ahxvpi.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/nh/3q/kw/nh3qkw3lo1psfd91n1zemcmm244.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/su/yf/-q/suyf-qgn2vqhxsezugd88eauw1g.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/p0/y7/he/p0y7heepmhe-fee55gj0urquuxs.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/fo/6v/g2/fo6vg2bsus5g1yekhvidrgd0nou.png" alt="imagem"><br><br>  Conclus√£o: Sim, o bot n√£o possui comunica√ß√£o bidirecional com o usu√°rio - n√£o √© intelig√™ncia artificial.  Mas em uma conversa de um grande n√∫mero de participantes, o bot se tornar√° um bom "interlocutor". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477184/">https://habr.com/ru/post/pt477184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477170/index.html">Como eu fui a uma reuni√£o na Escola 21</a></li>
<li><a href="../pt477176/index.html">Quais ferramentas ajudar√£o a atender o GDPR</a></li>
<li><a href="../pt477178/index.html">Programa√ß√£o moderna: um olhar ap√≥s 25 anos de pausa ou como escrevi o bot para Telegram</a></li>
<li><a href="../pt477180/index.html">Hist√≥rico: o que √© QoE e por que um provedor deve trabalhar com ele</a></li>
<li><a href="../pt477182/index.html">[Pelas docas] Flutter. Parte 2. Para desenvolvedores do iOS</a></li>
<li><a href="../pt477186/index.html">10 anos em um site remoto e o que veio dele</a></li>
<li><a href="../pt477190/index.html">Outra maneira - LFS, multiusu√°rio e o progresso atual do Indie Action / RPG</a></li>
<li><a href="../pt477192/index.html">M√©todos dos m√≠nimos quadrados: texto escrito por um programador para programadores</a></li>
<li><a href="../pt477194/index.html">Vamos conversar Sobre decad√™ncia e depress√£o</a></li>
<li><a href="../pt477198/index.html">Keylogger com uma surpresa: an√°lise do keylogger e decano de seu desenvolvedor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>