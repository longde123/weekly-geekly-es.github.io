<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª üî£ üìª PVS-Studio pour Visual Studio üíáüèΩ üöû üëºüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup de nos articles sont consacr√©s √† tout, mais pas √† l'outil PVS-Studio lui-m√™me. Mais nous faisons beaucoup pour que les d√©veloppeurs utilisent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio pour Visual Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/458070/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b55/042/8ad/b550428adfba0288bfdfce8d5f15e6fa.png"></div><br>  Beaucoup de nos articles sont consacr√©s √† tout, mais pas √† l'outil PVS-Studio lui-m√™me.  Mais nous faisons beaucoup pour que les d√©veloppeurs utilisent facilement notre outil.  Mais c'est pr√©cis√©ment ce qui se passe souvent dans les coulisses.  J'ai d√©cid√© de corriger cette situation et de parler du plugin PVS-Studio pour Visual Studio.  Si vous utilisez Visual Studio, cet article est fait pour vous. <br><a name="habracut"></a><br><h2>  Qu'est-ce que l'analyse de code statique et pourquoi est-elle n√©cessaire </h2><br>  L'analyse de code statique est le processus d'identification des erreurs et des lacunes dans le code source des programmes.  L'analyse statique peut √™tre consid√©r√©e comme un processus automatis√© de r√©vision de code.  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">examen</a> collaboratif du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code</a> est une excellente m√©thodologie.  Mais il pr√©sente √©galement un inconv√©nient important - un co√ªt √©lev√©.  Il est n√©cessaire de rassembler r√©guli√®rement plusieurs programmeurs pour revoir le nouveau code ou r√©examiner le code apr√®s avoir fait des recommandations. <br><br>  D'une part, je souhaite revoir r√©guli√®rement le code.  En revanche, c'est trop cher.  Le compromis est les outils d'analyse de code statique.  Ils traitent inlassablement le code source des programmes et donnent au programmeur des recommandations pour accorder une attention accrue √† certaines sections du code.  Bien s√ªr, le programme ne remplace pas un examen complet du code ex√©cut√© par une √©quipe de programmeurs.  Cependant, le rapport avantages / prix fait de l'utilisation de l'analyse statique une pratique tr√®s utile pour de nombreuses entreprises.  Si le lecteur est int√©ress√© par des chiffres pr√©cis, je vous propose de vous familiariser avec l'article " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio ROI</a> ". <br><br>  Il existe un grand nombre d'analyseurs de code statique commerciaux et gratuits.  Une grande liste d'analyseurs statiques est disponible sur Wikipedia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liste d'outils pour l'analyse de code statique</a> .  La liste des langages pour lesquels existent des analyseurs de code statiques est √©galement assez longue (C, C ++, C #, Java, Ada, Fortran, Perl, Ruby, ...).  Naturellement, nous vous parlerons de l'analyseur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio</a> . <br><br>  Le principal avantage de l'analyse statique est la possibilit√© d'une r√©duction significative du co√ªt d'√©limination des d√©fauts du programme.  Plus l'erreur est identifi√©e t√¥t, plus le co√ªt de sa correction est faible.  Ainsi, selon les donn√©es fournies dans le livre de McConnell ¬´Perfect Code¬ª, la correction d'une erreur au stade des tests co√ªtera dix fois plus qu'au stade de la construction (√©criture): <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72f/052/97a/72f05297a5d450c312e31c5a2ee9fab3.png" alt="Figure 1. Le co√ªt moyen de r√©paration des d√©fauts en fonction du moment de leur introduction et de leur d√©tection (les donn√©es du tableau sont extraites du livre de S. McConnell &quot;Perfect Code&quot;)."></div><br>  <font color="#999999"><i>Figure 1. Le co√ªt moyen de r√©paration des d√©fauts en fonction du moment de leur introduction et de leur d√©tection (les donn√©es du tableau sont extraites du livre de S. McConnell "Perfect Code").</i></font> <br><br>  Les outils d'analyse statique vous permettent d'identifier un grand nombre d'erreurs dans la phase de conception, ce qui r√©duit consid√©rablement le co√ªt de d√©veloppement de l'ensemble du projet.  Par exemple, l'analyseur de code statique PVS-Studio peut d√©marrer en arri√®re-plan imm√©diatement apr√®s la compilation, et si une erreur potentielle est d√©tect√©e, il en informera le programmeur.  Plus d'informations sur ce mode seront d√©crites ci-dessous. <br><br><h2>  Analyseur de code statique PVS-Studio </h2><br>  PVS-Studio est un analyseur statique qui d√©tecte les erreurs et les vuln√©rabilit√©s potentielles dans le code source des applications en C, C ++ (les extensions sont √©galement prises en charge: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ / CLI</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ / CX</a> ), C # et Java sur les plateformes Windows, Linux et macOS.  L'analyseur s'int√®gre parfaitement avec Visual Studio 2010-2019 et IntelliJ IDEA.  Dans cet article, nous examinerons de plus pr√®s le travail de PVS-Studio pour v√©rifier le code en C, C ++ et C #.  Vous pouvez lire ici comment utiliser PVS-Studio pour tester le code Java dans IntelliJ IDEA. <br><br>  Apr√®s avoir install√© PVS-Studio et int√©gr√© √† Visual Studio, les utilisateurs re√ßoivent un √©l√©ment suppl√©mentaire ¬´PVS-Studio¬ª dans le menu principal et une fen√™tre pour travailler avec les messages de diagnostic (voir Figure 2). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/943/589/d81/943589d818ec8e95fe078ed08585fe5c.png" alt="Figure 2. Les principaux √©l√©ments ajout√©s par l'analyseur PVS-Studio lors de l'int√©gration dans Visual Studio."></div><br>  <font color="#999999"><i>Figure 2. Les principaux √©l√©ments ajout√©s par l'analyseur PVS-Studio lors de l'int√©gration dans Visual Studio.</i></font> <br><br><h3>  Param√®tres initiaux </h3><br>  L'analyseur est pr√™t √† fonctionner imm√©diatement apr√®s l'installation.  Dans la plupart des cas, vous n'avez rien √† configurer pour terminer la premi√®re ex√©cution.  La seule configuration dont vous pourriez avoir besoin au d√©but est l'exclusion des biblioth√®ques tierces.  Apr√®s tout, vous ne modifierez toujours rien dans les fichiers source, par exemple, la biblioth√®que jpeg, il n'est donc pas n√©cessaire de le v√©rifier.  De plus, l'exclusion de dossiers suppl√©mentaires r√©duira le temps d'analyse du projet.  Les r√©pertoires exclus de l'analyse sont d√©finis ici: PVS-Studio&gt; Options ...&gt; Ne pas v√©rifier les fichiers&gt; PathMasks (voir Figure 3). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/c57/d08/ee5c57d087ce5294b2de1cc455fbd662.png" alt="Figure 3. Modification d'une liste de r√©pertoires que l'analyseur ne v√©rifiera pas."></div><br>  <font color="#999999"><i>Figure 3. Modification d'une liste de r√©pertoires que l'analyseur ne v√©rifiera pas.</i></font> <br><br>  Si l'un des noms sp√©cifi√©s se trouve dans le chemin d'acc√®s complet du fichier, l'analyse ne sera pas effectu√©e.  Par d√©faut, les noms de certains r√©pertoires sont d√©j√† inclus dans la liste.  Cependant, dans votre projet, le dossier contenant la biblioth√®que ZLib peut ne pas s'appeler ¬´zlib¬ª, mais, par exemple, ¬´zip_lib¬ª.  Par cons√©quent, vous devez modifier cette liste.  Pour commencer l'√©dition, cliquez sur le bouton avec trois points. <br><br>  Exemples de masques valides pour la liste PathMasks: <br><br><ul><li>  c: \ Libs \ - tous les fichiers de projet situ√©s dans ce dossier et ses sous-dossiers seront exclus. </li><li>  \ Libs \ ou * \ Libs \ * - tous les fichiers situ√©s dans des r√©pertoires dont le chemin vers lequel contient le sous-dossier Libs seront exclus.  Si les caract√®res "*" ne sont pas sp√©cifi√©s, ils seront toujours ajout√©s automatiquement, donc les deux options d'enregistrement sont les m√™mes. </li><li>  Libs ou * Libs * - tous les fichiers contenant un sous-dossier ayant ¬´Libs¬ª comme nom ou un fragment de nom seront exclus.  Dans ce cas √©galement, les fichiers contenant des Libs dans le nom seront exclus, par exemple, c: \ project \ mylibs.cpp.  Pour √©viter toute confusion, nous vous recommandons de toujours utiliser des barres obliques. </li></ul><br>  En plus d'exclure des dossiers entiers, vous pouvez sp√©cifier des masques pour exclure des fichiers individuels.  Pour cela, il existe un param√®tre FileNameMasks.  Pour plus de d√©tails sur l'utilisation des listes d'exclusion, consultez la documentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Param√®tres: ne pas v√©rifier les fichiers</a> . <br><br><h3>  V√©rification du projet </h3><br>  Une fois les r√©glages initiaux termin√©s, vous pouvez commencer √† v√©rifier le projet.  PVS-Studio pour Visual Studio prend en charge la v√©rification des projets C ++ (.vcxproj) et C # (.csproj).  Vous pouvez √©galement essayer imm√©diatement de v√©rifier une solution qui contient des projets de ces types dans leur int√©gralit√©.  Pour ce faire, s√©lectionnez l'√©l√©ment de menu Extensions&gt; PVS-Studio&gt; V√©rifier&gt; Solution (voir figure 4). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/ee3/2d8/716ee32d88dcc6bac832be8356dfaca6.png" alt="Figure 4. V√©rification de la solution √† l'aide de l'analyseur PVS-Studio."></div><br>  <font color="#999999"><i>Figure 4. V√©rification de la solution √† l'aide de l'analyseur PVS-Studio.</i></font> <br><br>  En cas de difficult√©s avec la v√©rification, nous vous recommandons de vous r√©f√©rer √† la section " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vous ne pouvez pas v√©rifier?</a> " De notre site Web.  Ce ne sont pas des prises ¬´v√©rifier que la fiche est branch√©e¬ª.  La section d√©crit les situations typiques avec lesquelles les utilisateurs nous ont contact√©s et ont sugg√©r√© des options d'action. <br><br><h3>  Utilisation d'une liste de messages de diagnostic </h3><br>  Apr√®s v√©rification, tous les messages de diagnostic seront affich√©s dans une fen√™tre sp√©ciale.  Une fen√™tre poss√®de de nombreux contr√¥les.  Tous servent √† afficher exactement les messages de diagnostic qui int√©ressent l'utilisateur.  Cependant, au d√©but, la fen√™tre peut sembler compliqu√©e.  Examinons tous les contr√¥les (voir la figure 5). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/700/7c4/b287007c4520a416cd531e31962c01ca.png" alt="Figure 5. Une fen√™tre avec des messages de diagnostic."></div><br>  <font color="#999999"><i>Figure 5. Une fen√™tre avec des messages de diagnostic.</i></font> <br><br><ol><li>  En fait, la fen√™tre PVS-Studio. </li><li>  Menu suppl√©mentaire.  Vous permet d'acc√©der √† des options telles que: marquer un avertissement comme faux, masquer les messages, ajouter des fichiers aux exceptions (voir ci-dessous). </li><li>  Le bouton inclut le message ¬´quelque chose s'est mal pass√©¬ª.  Par exemple, vous ne pouvez pas pr√©traiter l'un des fichiers. </li><li>  Acc√©dez au message pr√©c√©dent / suivant.  Cela ouvre le fichier correspondant et le curseur est plac√© sur la ligne avec une erreur potentielle.  Vous pouvez √©galement toujours s√©lectionner des diagnostics dans la liste en double-cliquant.  Vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">attribuer des raccourcis clavier</a> pour passer au message pr√©c√©dent / suivant.  Par d√©faut, ce sont Alt + '[' et Alt + ']'. </li><li>  Boutons qui incluent des alertes √† diff√©rents niveaux.  Maintenant, les deux premiers niveaux de diagnostic sont inclus.  Dans le m√™me temps, 90 avertissements du premier niveau et 6700 avertissements du deuxi√®me niveau sont affich√©s dans la fen√™tre.  Le niveau du message est affich√© sur le c√¥t√© gauche de la fen√™tre, sous la forme d'une barre correspondant √† la couleur de la barre sur le bouton du niveau correspondant.  Pourquoi y a-t-il tant de points positifs?  D'o√π proviennent les 6700 avertissements?  Pour d√©montrer les capacit√©s de l'interface, un ensemble de r√®gles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MISRA</a> est inclus, ce qui est contre-indiqu√© pour les applications ordinaires :). </li><li>  Ensembles actifs de r√®gles de diagnostic.  G√©n√©ral - diagnostics √† usage g√©n√©ral, optimisation - microoptimisation, diagnostics 64 bits - 64 bits, diagnostics standard MISRA - MISRA C et MISRA C ++.  Maintenant, la fen√™tre affiche tous les types d'alertes. </li><li>  Affiche le nombre de messages marqu√©s comme fausses alarmes.  Vous pouvez activer / d√©sactiver l'affichage des messages balis√©s dans les param√®tres, PVS-Studio&gt; Options ...&gt; Param√®tres sp√©cifiques de l'analyseur&gt; Afficher les fausses alarmes. </li><li>  Filtres rapides.  Par exemple, vous pouvez laisser dans la liste uniquement les messages avec le code V501 et qui se trouvent dans le projet XYZ. </li><li>  Certains diagnostics sugg√®rent de pr√™ter attention non pas √† une, mais √† plusieurs lignes.  Dans ce cas, une ellipse appara√Æt √† c√¥t√© du num√©ro de ligne.  En cliquant dessus avec la souris, vous pouvez voir une liste de lignes et en s√©lectionner une. </li></ol><br>  Le tableau avec les messages de diagnostic est divis√© dans les colonnes suivantes: <br><br><ul><li>  <b>Niveau.</b>  Niveau de fiabilit√© que l'erreur est trouv√©e.  1er niveau (rouge) - les endroits les plus suspects.  3e niveau (jaune) - tr√®s probablement une inexactitude mineure dans le code. </li><li>  <b>Ast√©risque</b>  Elle n'a aucun but pr√©cis.  L'utilisateur peut l'interpr√©ter √† sa discr√©tion.  Par exemple, il peut signaler les avertissements les plus int√©ressants pour une analyse plus approfondie.  Une analogie consiste √† marquer des lettres avec un ast√©risque dans un programme de messagerie tel que Thunderbird ou Outlook. </li><li>  <b>Identifiant</b>  Num√©ro de message unique.  Cela peut √™tre utile lorsque vous travaillez avec une grande liste.  Par exemple, vous pouvez acc√©der au message avec un num√©ro sp√©cifique (voir l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©l√©ment</a> "Naviguer vers ID ..." dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">menu contextuel</a> ). </li><li>  <b>Code</b>  Code de message  Si vous cliquez dessus avec la souris, une page avec une description de l'avertissement s'ouvrira. </li><li>  <b>CWE.</b>  Identifie un avertissement √† l'aide du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code CWE</a> (Common Weakness Enumeration).  En cliquant sur le lien, vous pouvez voir une description de ce CWE sur le r√©seau. </li><li>  <b>Misra.</b>  Identique √† ci-dessus, mais uniquement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour la norme MISRA</a> . </li><li>  <b>Message</b>  Le texte du message de diagnostic. </li><li>  <b>Projet</b>  Nom du projet (vous pouvez d√©sactiver cette colonne √† l'aide du menu contextuel). </li><li>  <b>Fichier</b>  Nom de fichier. </li><li>  <b>Ligne</b>  Num√©ro de ligne.  <b>Important!</b>  Veuillez noter qu'apr√®s certaines lignes, il y a des points de suspension.  Exemple: "123 (...)".  En cliquant sur ce num√©ro, vous obtiendrez une liste de toutes les lignes de code li√©es √† ce message.  Dans ce cas, il est possible d'acc√©der √† chacune des lignes de la liste. </li></ul><br>  Oui, lire tout cela √©tait fatigant.  Cependant, je vous assure qu'en commen√ßant √† l'utiliser, vous vous familiarisez rapidement avec l'outil.  Et vous appuierez rarement sur quelque chose pour configurer. <br><br><h3>  Menu contextuel </h3><br>  Ainsi, en double-cliquant sur le message, vous acc√©dez au fragment de code souhait√©.  En appuyant sur le bouton droit de la souris, un menu contextuel s'ouvre. <br><br>  Le menu est assez simple et vous ne devez pas surcharger l'article avec une description de chacun des √©l√©ments.  Si quelque chose n'est pas clair, vous pouvez consulter la documentation. <br><br>  Cependant, je veux m'attarder sur une caract√©ristique tr√®s utile.  N'oubliez pas que dans les param√®tres, vous pouvez ajouter des dossiers / fichiers √† exclure (voir figure 2).  Donc, ajouter quelque chose est beaucoup plus facile qu'il n'y para√Æt! <br><br>  Faites attention √† l'√©l√©ment "Ne pas v√©rifier les fichiers et masquer tous les messages de ...".  Lorsque vous cliquez dessus, une liste de chemins peut √™tre ajout√©e qui peut √™tre ajout√©e √† l'exception (voir figure 6). <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ce3/581/300/ce35813002196bdbd53fcb666a33f58b.png" alt="Figure 6. Exclusion de fichiers de l'analyse."></p><br>  <font color="#999999"><i>Figure 6. Exclusion de fichiers de l'analyse.</i></font> <br><br>  Vous pouvez s√©lectionner un seul fichier ou l'un des r√©pertoires.  La figure montre que le dossier "SDL2-2.0.9 \ src \ haptic \ windows" est s√©lectionn√©.  Cela signifie que tous les fichiers de ce dossier et tous les sous-dossiers seront exclus de l'analyse.  De plus, tous les messages li√©s √† ces fichiers dispara√Ætront imm√©diatement de la liste.  Tr√®s confortable.  Vous n'avez pas besoin de red√©marrer l'analyse pour supprimer tous les messages li√©s au test. <br><br><h2>  Mode d'analyse incr√©mentale </h2><br>  L'introduction √† PVS-Studio sera incompl√®te si vous ne parlez pas de l'une des fonctionnalit√©s les plus importantes - l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyse de</a> code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">incr√©mentielle</a> . <br><br>  Plus l'erreur est d√©tect√©e t√¥t, moins il est co√ªteux de la corriger.  Il est id√©al de souligner imm√©diatement les erreurs dans le texte √©dit√© du programme.  Cependant, c'est techniquement difficile et gourmand en ressources.  Par cons√©quent, PVS-Studio d√©marre en arri√®re-plan au moment o√π le code corrig√© a √©t√© compil√© avec succ√®s.  Ainsi, les erreurs sont recherch√©es dans le code qui vient d'√™tre modifi√©.  Le fait que l'analyse soit en cours peut √™tre jug√© par l'ic√¥ne dans la zone de notification du syst√®me. <br><br>  Lorsqu'une erreur est d√©tect√©e, une fen√™tre contextuelle s'affiche pour vous avertir du danger (voir figure 7). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61b/394/8bd/61b3948bd26a9ed4c410446e46b5eb3b.png" alt="Figure 7. Un message contextuel indiquant que des endroits suspects ont √©t√© trouv√©s dans les fichiers modifi√©s."></div><br>  <font color="#999999"><i>Figure 7. Un message contextuel indiquant que des endroits suspects ont √©t√© trouv√©s dans les fichiers modifi√©s.</i></font> <br><br>  Si vous cliquez sur l'ic√¥ne, l'IDE s'ouvrira avec le r√©sultat de la v√©rification du projet (voir figure 2) et il sera possible d'examiner les fragments de code suspects. <br><br>  En fait, plut√¥t que de d√©crire ce mode, il est plus facile d'essayer de travailler avec lui.  Vous √©crivez le code comme pr√©c√©demment.  Et si n√©cessaire, l'analyseur vous d√©rangera.  Essayez-le! <br><br>  Nous utilisons nous-m√™mes constamment ce mode.  Oui, nous faisons aussi parfois des erreurs de codage.  Et la possibilit√© de les corriger imm√©diatement r√©duit consid√©rablement le temps de d√©tection d'un d√©faut et la tentative de comprendre pourquoi le programme ne se comporte pas comme pr√©vu.  Il est dommage de consacrer 15 √† 20 minutes au d√©bogage, puis de trouver une faute de frappe dans l'index.  Voici l'un des cas o√π PVS-Studio a trouv√© une erreur dans PVS-Studio juste apr√®s son apparition dans le code: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'.'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span>) { in += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Mais ce sont bien s√ªr des fleurs.  L'analyseur PVS-Studio peut parfois √™tre beaucoup plus utile.  Voici l'un des commentaires sur notre analyseur: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un exemple d'utilisation d'un analyseur statique</a> ."  Le texte vous fait r√©fl√©chir. <br><br>  Je r√©sume.  L'analyse incr√©mentale est quelque chose que vous devez absolument essayer.  Vous l'aimerez d√®s que vous trouverez quelques erreurs dans le nouveau code. <br><br><h2>  Fonctionnalit√©s de PVS-Studio </h2><br>  Soyons brefs.  Il est impossible de d√©crire de mani√®re concise tous les diagnostics disponibles dans PVS-Studio.  Une liste compl√®te des diagnostics et leur description d√©taill√©e se trouvent dans la documentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Description des erreurs diagnostiqu√©es</a> .  Nous nous limitons √† une table dans laquelle les diagnostics sont regroup√©s par type.  Certains diagnostics sont inclus dans plusieurs groupes.  Le fait est que la division est tr√®s arbitraire.  Par exemple, une faute de frappe peut conduire √† l'utilisation de m√©moire non initialis√©e.  Au contraire, certaines erreurs n'ont pas trouv√© de place dans le tableau, elles sont trop sp√©cifiques.  N√©anmoins, le tableau dans son ensemble donne une id√©e de la fonctionnalit√© d'un analyseur de code statique (voir Figure 8). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/a44/f24/ee5a44f24dff71c09d5491dc9294b4f2.png" alt="Figure 8. Fonctionnalit√©s de PVS-Studio."></div><br>  <font color="#999999"><i>Figure 8. Fonctionnalit√©s de PVS-Studio.</i></font> <br><br>  Comme vous pouvez le voir, l'analyseur se manifeste autant que possible dans des domaines tels que la recherche d'erreurs survenues en raison de fautes de frappe, du copier-coller.  Il diagnostique les probl√®mes li√©s √† la s√©curit√© du code. <br><br>  Vous pouvez d√©couvrir comment tout cela fonctionne dans la pratique en consultant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la base de donn√©es des erreurs</a> .  Nous collectons dans cette base de donn√©es toutes les erreurs que nous avons constat√©es en v√©rifiant divers projets Open-Source. <br><br><h2>  SAST </h2><br>  PVS-Studio est un outil de test statique de s√©curit√© des applications (SAST) - l'analyseur peut identifier les vuln√©rabilit√©s potentielles dans le code du projet et afficher l'identificateur d'erreur correspondant dans une certaine classification. <br><br>  PVS-Studio prend en charge les classifications d'erreur suivantes: <br><br><ol><li>  CWE </li><li>  SEI CERT </li><li>  Misra </li></ol><br>  Vous pouvez activer l'affichage des codes CWE √† l'aide du menu contextuel dans la fen√™tre de l'analyseur sous Afficher les colonnes&gt; CWE <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/919/85b/e34/91985be349bf7385fa7f3878ef57dcde.png" alt="Figure 9. Menu contextuel et un exemple de sortie des codes CWE."></div><br>  <font color="#999999"><i>Figure 9. Menu contextuel et un exemple de sortie des codes CWE.</i></font> <br><br>  Ou dans le menu ci-dessus (Extensions&gt; PVS-Studio&gt; Afficher les codes CWE dans la fen√™tre de sortie) <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b6/582/d8c/0b6582d8c2626066567dfd111439cbc6.png" alt="Figure 10. Le menu d'extension."></div><br>  <font color="#999999"><i>Figure 10. Le menu d'extension.</i></font> <br><br>  Les diagnostics MISRA sont inclus s√©par√©ment dans les param√®tres: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b89/898/709/b89898709db7045f949fb564c6c80059.png" alt="Figure 11. Liste des erreurs d√©tect√©es."></div><br>  <font color="#999999"><i>Figure 11. Liste des erreurs d√©tect√©es.</i></font> <br><br>  En savoir plus sur ces classifications <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  V√©rification des projets √† partir de la ligne de commande </h2><br>  PVS-Studio_Cmd.exe est un utilitaire de v√©rification des projets Visual Studio C ++ / C # (.vcxproj / .csproj) et des solutions .sln √† partir de la ligne de commande.  Il peut √™tre utile pour automatiser l'analyse.  Le programme se trouve dans le r√©pertoire o√π l'installation a √©t√© effectu√©e - par d√©faut, il est 'C: \ Program Files (x86) \ PVS-Studio'. <br><br>  Le programme a de nombreux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">param√®tres</a> , mais d'abord nous n'en avons besoin que de 3: <br><br><ul><li>  --target: le projet ou le fichier de solution √† v√©rifier. </li><li>  --output: le fichier plog o√π vous souhaitez √©crire le rapport. </li><li>  --progress: affiche la progression de la v√©rification. </li></ul><br>  Voici √† quoi ressemblera le lancement: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ce/ee2/aa1/3ceee2aa11c0bf9f887ad8959d7cdd65.png" alt="Figure 12. La sortie du programme PVS-Studio_Cmd.exe"></div><br>  <font color="#999999"><i>Figure 12. La sortie du programme PVS-Studio_Cmd.exe</i></font> <br><br>  Apr√®s l'ex√©cution, nous obtiendrons un fichier plog avec le rapport, le chemin vers lequel nous avons sp√©cifi√© dans les options de lancement.  Ce rapport peut √™tre converti dans d'autres formats √† l'aide de l'utilitaire PlogConverter.exe, et pour afficher le rapport dans l'EDI, il suffit de double-cliquer sur le fichier plog dans l'Explorateur. <br><br>  Vous pouvez √©galement ouvrir le fichier de rapport dans le menu d'extension sous Extensions&gt; PVS-Studio&gt; Ouvrir / Enregistrer&gt; Ouvrir le rapport d'analyse ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/490/7ac/cc5/4907accc516b05ccfedf52acc9c85d9f.png" alt="Image 4"></div><br><br>  Des informations d√©taill√©es sur l'utilitaire et ses param√®tres se trouvent dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br><h2>  Suppression des fausses alertes </h2><br>  Certains messages √©mis par l'analyseur seront in√©vitablement faux.  On ne peut rien y faire.  Un analyseur statique est juste un programme qui n'a pas d'intelligence artificielle et ne peut pas d√©terminer exactement s'il a trouv√© une erreur r√©elle ou non. <br><br>  Pour lutter contre les faux positifs, l'analyseur propose un ensemble de m√©canismes diff√©rents.  Ils sont d√©crits en d√©tail dans les sections suivantes de la documentation: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©glage fin</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une m√©thode approximative</a> qui vous permet de travailler uniquement avec des avertissements li√©s au code nouveau ou modifi√©. </li></ul><br><h2>  Conclusion </h2><br>  Bien s√ªr, ici, nous n'avons pas tout dit sur l'instrument.  Si vous dites tout, l'article se transformera en documentation.  L'objectif √©tait de montrer √† quel point il est facile de travailler avec l'outil dans l'environnement Visual Studio.  Vous pouvez lire sur d'autres environnements et modes de fonctionnement dans la documentation et d'autres articles situ√©s sur notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site Web</a> .  Il y a d'ailleurs beaucoup de choses int√©ressantes pour les programmeurs.  Venez vous promener. <br><br>  Il convient de noter que PVS-Studio ne fonctionne pas uniquement dans l'environnement de Microsoft.  Nous prenons √©galement en charge le langage Java, nous pouvons travailler sous Linux et macOS, int√©grer dans CMake et bien plus encore.  Pour plus d'informations, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br>  Je vous souhaite un code sans code et j'esp√®re que vous appr√©cierez PVS-Studio.  Si vous avez des questions, nous vous aiderons et vous r√©pondrons toujours.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√âcrivez-nous</a> . <br><br><h2>  Ressources suppl√©mentaires: </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Examen du code</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyse de code statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Outils d'analyse de code statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAST</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Technologies utilis√©es dans l'analyseur PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√©l√©chargez PVS-Studio</a> et essayez-le. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prise en charge de Visual Studio 2019</a> . </li><li>  Discutez du prix de l'analyseur PVS-Studio pour votre √©quipe et comment l'acheter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">achetez PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un exemple d'utilisation d'un analyseur statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©ponses</a> aux questions fr√©quemment pos√©es lors des conf√©rences. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment d√©marrer PVS-Studio Java</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment ex√©cuter PVS-Studio sur Linux et macOS</a> </li></ol><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Sergey Larin.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio pour Visual Studio</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458070/">https://habr.com/ru/post/fr458070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458056/index.html">La grande interview de Martin Kleppmann: ¬´Comprendre l'avenir des syst√®mes de donn√©es distribu√©s¬ª</a></li>
<li><a href="../fr458060/index.html">Cr√©ation d'un shader d'herbe dans le moteur Unity</a></li>
<li><a href="../fr458062/index.html">Pr√©sentation de la plateforme UserGate</a></li>
<li><a href="../fr458064/index.html">PVS-Studio dans les nuages ‚Äã‚Äã- Ex√©cution de l'analyse sur Travis CI</a></li>
<li><a href="../fr458068/index.html">PVS-Studio pour Visual Studio</a></li>
<li><a href="../fr458072/index.html">PVS-Studio passe aux nuages ‚Äã‚Äã- lancement de l'analyse sur Travis CI</a></li>
<li><a href="../fr458074/index.html">Aller langue: s√©lection ORM</a></li>
<li><a href="../fr458076/index.html">Marketing avec prise de d√©cision ML</a></li>
<li><a href="../fr458080/index.html">25 juillet, Moscou - Meetup QIWI iOS</a></li>
<li><a href="../fr458084/index.html">50 mat√©riaux s√©lectionn√©s sur les gains des musiciens, le son dans les jeux et les films, les instruments inhabituels et les vieux oubli√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>