<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÅ üë®üèª‚Äçüè´ ‚úçüèΩ Comment nous avons scann√© tout Internet et ce que nous avons appris üê± ‚ùî ü§±üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Combien de sites utilisez-vous quotidiennement? Un couple de r√©seaux sociaux, un moteur de recherche, plusieurs √©diteurs pr√©f√©r√©s, environ 5 services ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons scann√© tout Internet et ce que nous avons appris</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413739/"> Combien de sites utilisez-vous quotidiennement?  Un couple de r√©seaux sociaux, un moteur de recherche, plusieurs √©diteurs pr√©f√©r√©s, environ 5 services de travail.  Il est peut-√™tre peu probable que plus de 20 sites soient dactylographi√©s. <br><br><img src="https://habrastorage.org/webt/yn/iz/nt/ynizntnbhhxhz3dzd9yufybt8m8.jpeg"><br><br>  Vous √™tes-vous d√©j√† demand√© combien de sites sur Internet et ce qui leur arrive? <br><a name="habracut"></a><br>  P√©riodiquement, des articles proposent des √©tudes bas√©es sur un √©chantillon de diff√©rents sites 1M.  Mais je me demandais toujours s'il √©tait possible de parcourir tous les domaines Internet sans construire d'analyse sur un tr√®s petit √©chantillon. <br><br>  J'ai pos√© cette question pour la premi√®re fois il y a plus d'un an.  Nous avons commenc√© √† d√©velopper un robot pour les sites Web et nous devions le tester sur de gros volumes.  En prenant le c≈ìur du robot, pour la premi√®re fois, je suis all√© sur les domaines Runet - c'est 5,5 millions de domaines, et apr√®s tout 213 millions de domaines (√† l'automne 2017). <br><br>  Au cours du temps pass√©, beaucoup d'efforts et d'argent ont √©t√© investis dans le d√©veloppement, les algorithmes sont devenus meilleurs, j'ai d√©cid√© de revenir √† l'analyse d'Internet et de collecter encore plus de donn√©es. <br><br>  Le but de cette collecte d'informations est d'obtenir un √©chantillon fiable principalement des h√¥tes, des redirections, des en-t√™tes de serveur et des x-powered. <br><br><h2>  M√©thode de collecte </h2><br>  L'application elle-m√™me est √©crite en Go, en utilisant ses propres impl√©mentations pour travailler avec le client DNS et http.  En tant que file d'attente redis, db est mysql. <br><br>  Au d√©part, il n'y a qu'un domaine nu, tel que example.com.  L'analyse comprend plusieurs √©tapes: <br><br><ol><li> v√©rifier la disponibilit√© de <code>http://example.com, http://www.example.com, https://example.com, https://www.example.com</code> </li><li>  si au moins une des options a r√©ussi √† se connecter, alors: <br>  - analyser /robots.txt <br>  - v√©rifier la pr√©sence de /sitemap.xml <br></li></ol><br>  Environ <b>100 000 domaines</b> apparaissent et suppriment chaque jour.  De toute √©vidence, il est presque impossible de faire une conversion instantan√©e de l'√©tat du r√©seau, mais vous devez le faire le plus rapidement possible. <br><br>  Nous avons d√©ploy√© un cluster suppl√©mentaire de serveurs d'exploration, ce qui nous a permis d'atteindre une vitesse moyenne de <b>2 000 domaines par seconde</b> .  Ainsi, la v√©rification de <b>252 millions de domaines a pris environ un jour et demi</b> . <br><br><div class="spoiler">  <b class="spoiler_title">Digression lyrique</b> <div class="spoiler_text">  Parall√®lement √† l'exploration, la comp√©tence ¬´1001 fa√ßons de r√©pondre aux abus¬ª se d√©veloppe.  Ce n'est que le fl√©au de toute analyse plus ou moins importante.  Cela a valu beaucoup d'efforts pour modifier l'algorithme afin qu'il ne tombe pas sur le m√™me ip en peu de temps ou ne frappe pas plusieurs fois sur https. <br></div></div><br><h2>  Les donn√©es </h2><br>  Le chiffre le plus important dans l'analyse de r√©seau est le nombre de domaines ¬´actifs¬ª.  Nous appelons le domaine ¬´live¬ª auquel IP se r√©sout et au moins une des versions www / sans www_ http / https donne un code de r√©ponse. <br><br><img src="https://habrastorage.org/webt/r7/nq/wr/r7nqwrde9xwwww1tbckko7cmic4.png"><br><br>  Bien s√ªr, vous ne pouvez pas oublier le code 418 - mannequins: 2227 pi√®ces. <br><br>  Au total, <b>13,2 millions d'adresses IP</b> ont √©t√© trouv√©es.  Il convient de noter que pour certains domaines, plusieurs adresses IP sont donn√©es √† la fois, pour d'autres une seule, mais chaque fois est diff√©rente. <br>  Ainsi, la <s>temp√©rature moyenne dans l'h√¥pital</s> , en moyenne, 16 sites sont situ√©s sur une IP. <br><br>  L'image par codes d'√©tat est la suivante: <br><br><img src="https://habrastorage.org/webt/v8/kg/tn/v8kgtnpueiolgvohjiirjahfcqc.png"><br><br>  le montant est sup√©rieur au nombre total de domaines,  chaque h√¥te peut donner 4 codes de statut diff√©rents (combinaisons www / non www, http / https) <br><br><h2>  Https </h2><br>  La transition vers https est une tendance de ces derni√®res ann√©es.  Les moteurs de recherche promeuvent activement la mise en ≈ìuvre d'un protocole s√©curis√©, et Google Chrome va bient√¥t commencer √† marquer les sites http comme non s√©curis√©s. <br><br><img src="https://habrastorage.org/webt/ud/jv/ac/udjvac448hxjvpxcyybc7qhck88.png"><br><br>  Ainsi, la part des sites de travail sur https a atteint <b>73%</b> du nombre de sites travaillant sur http. <br><br>  Le plus gros probl√®me de transition est le rabattement presque in√©vitable du trafic,  pour les moteurs de recherche, http / https, m√™me sur le m√™me domaine, sont des sites techniquement diff√©rents.  Les nouveaux projets d√©marrent g√©n√©ralement imm√©diatement sur https. <br><br><h2>  www ou sans www? </h2><br>  Le sous-domaine www est n√© avec Internet lui-m√™me, mais m√™me maintenant, certaines personnes n'acceptent pas les adresses sans www. <br><br>  Dans le m√™me temps, le code de r√©ponse 200 pour la version <b>sans www donne 118,6 millions</b> .  domaines, et <b>avec www - 119,1 millions de domaines</b> . <br><br>  √Ä 4,3 millions de domaines, ip n'est pas li√© √† la version sans www, c'est-√†-dire  Vous n'allez pas sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">example.com</a> .  3 millions de domaines ne sont pas li√©s ip au sous-domaine www. <br><br>  Un point important est la pr√©sence de redirections entre les versions.  Parce que  si 200 codes sont donn√©s dans les deux cas, alors pour un moteur de recherche ce sont deux sites diff√©rents avec un contenu en double.  Je veux vous rappeler, n'oubliez pas de configurer les redirections correctes. <br>  Redirige avec <b>www-&gt; sans www 32 millions</b> , <b>sans www-&gt; www 38 millions</b> <br><br>  En regardant ces chiffres, il m'est difficile de dire qui a gagn√© - www ou sans www. <br><br><h2>  Redirige </h2><br>  Dans les cercles de r√©f√©rencement, il y a une opinion que la m√©thode la plus efficace de promotion de site Web est de publier des redirections vers celui-ci √† partir de sites presque th√©matiques. <br><br>  <b>35,8 millions de domaines seront redirig√©s vers d'autres h√¥tes</b> et si nous les groupons par objectif, nous voyons les leaders: <br><br><img src="https://habrastorage.org/webt/km/m7/mn/kmm7mng4kp7rva2hych-jfvqt8k.png"><br><br>  Traditionnellement, les premiers sont les registraires de domaine et les parkings. <br><br>  Si vous regardez en haut pour moins de 10 000 redirections entrantes, vous pouvez voir de nombreux sites familiers comme booking.com. <br><br>  Et dans le top jusqu'√† 1000, il y a des casinos et d'autres sites de divertissement. <br><br><h2>  En-t√™te de serveur </h2><br>  Enfin arriv√© √† la partie amusante! <br><br>  <b>186 millions de domaines ne donnent pas un titre d'en-t√™te vide</b> .  Cela repr√©sente 87% de tous les domaines vivants, un √©chantillon assez fiable. <br><br>  Si vous regroupez simplement par valeur, nous obtenons: <br><br><img src="https://habrastorage.org/webt/4z/uc/ty/4zuctyd5cvpybbpxou36_cxr098.png"><br><br>  Les leaders sont 20 serveurs, qui ont ensemble 96%: <br><br><img src="https://habrastorage.org/webt/s9/pe/ll/s9pelldyq0fklw54oiahcsb2cle.png"><br><br>  Le leader mondial est Apache, argent √† Nginx et ferme la trinit√© d'IIS.  Au total, ces trois serveurs h√©bergent <b>87% de l‚Äô</b> Internet dans <b>le</b> monde. <br><br>  Pays conservateurs: <br><br><img src="https://habrastorage.org/webt/ac/6t/p9/ac6tp9wpwn0bknbbeflqtibf1mo.png"><br><br>  Il est √† noter que dans Runet, l'image est diff√©rente: <br><br><img src="https://habrastorage.org/webt/ni/f4/0k/nif40ksgrlitslad_9jmxoeeu9o.png"><br><br>  Ici, Nginx est le leader absolu, apache a une part de trois fois moins. <br><br>  O√π d'autre aimez-vous Nginx: <br><br><img src="https://habrastorage.org/webt/za/py/en/zapyenn34hcy_ui02bwdvf1wiwk.png"><br><br>  Les serveurs restants sont r√©partis comme suit: <br><br><img src="https://habrastorage.org/webt/n8/4t/cc/n84tccic1kke0o17mwvysq1rv7s.png"><br><br><h2>  X-Powered-By </h2><br>  <b>Seuls 57,3 millions d'h√¥tes ont l'en-</b> t√™te <b>X-Powered-By</b> , ce qui repr√©sente environ 27% des domaines actifs. <br><br>  Leaders bruts: <br><br><img src="https://habrastorage.org/webt/zd/b3/j4/zdb3j4d7pu0ncgfksmwnzaqrksq.png"><br><br>  si vous traitez les donn√©es et jetez les ordures - alors php gagne: <br><br><img src="https://habrastorage.org/webt/jo/mv/6f/jomv6f4xbhqvaxhbl3h1nvmewzm.png"><br><br>  Versions PHP: <br><br><img src="https://habrastorage.org/webt/ke/z7/ow/kez7owyzdyzc1khumdgywc9x4le.png"><br><br>  Personnellement, je suis quelque peu surpris par une telle popularit√© de 5,6 et en m√™me temps, il est agr√©able que la part totale des sept augmente. <br><br>  Il y a aussi un site dans Runet qui dit que cela fonctionne sur php / 1.0, mais la v√©racit√© de ce chiffre est discutable. <br><br><h2>  Les cookies </h2><br><img src="https://habrastorage.org/webt/gf/v3/pq/gfv3pqd-uj2_xpf1bwfiq-l69v4.png"><br><br><h2>  Conclusion </h2><br>  Je n'ai montr√© qu'une tr√®s petite partie des informations trouv√©es.  Creuser dans ces donn√©es, c'est comme creuser dans un tas d'ordures afin de trouver des artefacts int√©ressants. <br><br>  Les sujets concernant le blocage des robots des moteurs de recherche et les services d'analyse (ahrefs, majestueux et autres) n'ont pas √©t√© ouverts.  Sur cet exemple, il existe de nombreux r√©seaux satellites diff√©rents, peu importe comment vous essayez de masquer les empreintes, mais sur des milliers de domaines, vous pouvez voir des mod√®les. <br><br>  Dans un futur proche, pour collecter encore plus de donn√©es, notamment sur les liens, les mots, les syst√®mes publicitaires, les codes analytiques, et bien plus encore. <br><br>  Je serai heureux d'entendre vos commentaires et commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413739/">https://habr.com/ru/post/fr413739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413723/index.html">Saga des services √©lectroniques et de leurs emplacements. Partie 2. Armoire √©lectronique</a></li>
<li><a href="../fr413725/index.html">Travailler avec des tableaux dans bash</a></li>
<li><a href="../fr413729/index.html">Comment et pourquoi nous avons √©crit notre ECS</a></li>
<li><a href="../fr413731/index.html">√âtude du march√© du travail BA / SA</a></li>
<li><a href="../fr413733/index.html">Mikrosh, Krista, Apogee, Lviv - les premiers ordinateurs sovi√©tiques √† emporter</a></li>
<li><a href="../fr413741/index.html">Qu'est-ce que c'√©tait et comment: impressions de l'√©quipe WWDC Redmadrobot</a></li>
<li><a href="../fr413743/index.html">Lancez LAMP et des centaines d'autres applications Web en quelques clics</a></li>
<li><a href="../fr413745/index.html">Un syst√®me d'alimentation sans fil a √©t√© d√©velopp√© pour tous les appareils √©lectroniques du corps humain √† la fois</a></li>
<li><a href="../fr413747/index.html">Passer par NULL</a></li>
<li><a href="../fr413749/index.html">Arbre B + dans un vrai projet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>