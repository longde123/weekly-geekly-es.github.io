<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèúÔ∏è ü§öüèø ü§© Control de recursos. Personaliza SwiftGen üì® üïç üå∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probablemente, en cada gran proyecto de iOS, el de larga duraci√≥n puede tropezar con iconos que no se utilizan en ning√∫n lugar, o acceder a teclas de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Control de recursos. Personaliza SwiftGen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/423381/"><p>  Probablemente, en cada gran proyecto de iOS, el de larga duraci√≥n puede tropezar con iconos que no se utilizan en ning√∫n lugar, o acceder a teclas de localizaci√≥n que no han existido durante mucho tiempo.  Muy a menudo, tales situaciones surgen de la falta de atenci√≥n, y la automatizaci√≥n es la mejor cura para la falta de atenci√≥n. </p><br><p>  En el equipo iOS de HeadHunter, prestamos gran atenci√≥n a la automatizaci√≥n de las tareas de rutina que un desarrollador puede encontrar.  Con este art√≠culo queremos comenzar un ciclo de historias sobre esas herramientas y enfoques que simplifican nuestro trabajo diario. </p><br><p>  Hace alg√∫n tiempo, logramos tomar el control de los recursos de la aplicaci√≥n utilizando la utilidad SwiftGen.  Sobre c√≥mo configurarlo, c√≥mo vivir con √©l y c√≥mo esta utilidad ayuda a cambiar la verificaci√≥n de la relevancia de los recursos para el compilador, y hablaremos sobre cat. </p><br><p><img src="https://habrastorage.org/webt/dl/sy/-c/dlsy-cocqhwmu02tsyr4aoukf-y.jpeg"></p><a name="habracut"></a><br><p>  SwiftGen es una utilidad que le permite generar c√≥digo Swift para acceder a varios recursos de un proyecto Xcode, entre ellos: </p><br><ul><li>  fuentes </li><li>  colores </li><li>  guiones gr√°ficos; </li><li>  cadenas de localizaci√≥n; </li><li>  activos. </li></ul><br><p>  Todos podr√≠an escribir un c√≥digo similar para inicializar im√°genes o cadenas de localizaci√≥n: </p><br><pre><code class="swift hljs">logoImageView.image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named: <span class="hljs-string"><span class="hljs-string">"Swift"</span></span>) nameLabel.text = <span class="hljs-type"><span class="hljs-type">String</span></span>( format: <span class="hljs-type"><span class="hljs-type">NSLocalizedString</span></span>(<span class="hljs-string"><span class="hljs-string">"languages.swift.name"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>), locale: <span class="hljs-type"><span class="hljs-type">Locale</span></span>.current )</code> </pre> <br><p>  Para indicar el nombre de la imagen o la clave de localizaci√≥n, usamos cadenas literales.  Lo que est√° escrito entre comillas dobles no est√° validado por el compilador o el entorno de desarrollo (Xcode).  Ah√≠ radica el siguiente conjunto de problemas: </p><br><ul><li>  Puedes hacer un error tipogr√°fico; </li><li>  Es posible que olvide actualizar el uso del c√≥digo despu√©s de editar o eliminar la clave / imagen. </li></ul><br><p>  Veamos c√≥mo podemos mejorar este c√≥digo con SwiftGen. </p><br><p>  Para nuestro equipo, la generaci√≥n solo era relevante para cadenas y activos, y ser√°n discutidos en el art√≠culo.  La generaci√≥n de otros tipos de recursos es similar y, si se desea, se domina f√°cilmente de forma independiente. </p><br><h2 id="vnedrenie-v-proekt">  Implementaci√≥n de proyecto </h2><br><p>  Primero necesitas instalar SwiftGen.  Elegimos instalarlo a trav√©s de CocoaPods como una forma conveniente de distribuir la utilidad entre todos los miembros del equipo.  Pero esto se puede hacer de otras maneras, que se describen en detalle en la <a href="">documentaci√≥n</a> .  En nuestro caso, todo lo que hay que hacer es agregar el <code>pod 'SwiftGen'</code> , y luego agregar una nueva fase de <code>Build Phase</code> ( <code>Build Phase</code> ) que lanzar√° SwiftGen antes de construir el proyecto. </p><br><pre> <code class="plaintext hljs">"$PODS_ROOT"/SwiftGen/bin/swiftgen</code> </pre> <br><p>  Es importante ejecutar SwiftGen antes de comenzar la fase de <code>Compile Sources</code> para evitar errores al compilar el proyecto. </p><br><p><img src="https://habrastorage.org/webt/gx/1t/xw/gx1txw1lfcxmghilpakndv_wnck.png"></p><br><p>  Ahora estamos listos para adaptar SwiftGen a nuestro proyecto. </p><br><h2 id="nastroyka-swiftgen">  Configurar SwiftGen </h2><br><p>  En primer lugar, debe configurar las plantillas mediante las cuales se generar√° el c√≥digo para acceder a los recursos.  La utilidad ya contiene un conjunto de plantillas para generar c√≥digo, todas se pueden ver en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> y, en principio, est√°n listas para usar.  Las plantillas est√°n escritas en el lenguaje <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Stencil</a> , puede estar familiarizado con ellas si us√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sourcery</a> o jug√≥ con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kitura</a> .  Si lo desea, cada una de las plantillas se puede adaptar a sus propias gu√≠as. <br>  Por ejemplo, tome la plantilla que <code>enum</code> genera para acceder a las cadenas de localizaci√≥n.  Nos pareci√≥ que en el est√°ndar hay demasiado superfluo y puede simplificarse.  Un ejemplo simplificado con comentarios explicativos est√° debajo del spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de plantilla</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{#      #} {% set accessModifier %}{% if param.publicAccess %}public{% else %}internal{% endif %}{% endset %} {#    #} {% macro parametersBlock types %}{% filter removeNewlines:"leading" %} {% for type in types %} _ p{{forloop.counter}}: {{type}}{% if not forloop.last %}, {% endif %} {% endfor %} {% endfilter %}{% endmacro %} {% macro argumentsBlock types %}{% filter removeNewlines:"leading" %} {% for type in types %} p{{forloop.counter}}{% if not forloop.last %}, {% endif %} {% endfor %} {% endfilter %}{% endmacro %} {#       enum        #} {% macro recursiveBlock table item sp %} {{sp}}{% for string in item.strings %} {{sp}}{% if not param.noComments %} {{sp}}/// {{string.translation}} {{sp}}{% endif %} {{sp}}{% if string.types %} {{sp}}{{accessModifier}} static func {{string.name|swiftIdentifier:"pretty"|lowerFirstWord|escapeReservedKeywords}}({% call parametersBlock string.types %}) -&gt; String { {{sp}} return localize("{{string.key}}", {% call argumentsBlock string.types %}) {{sp}}} {{sp}}{% else %} {{sp}}{{accessModifier}} static let {{string.name|swiftIdentifier:"pretty"|lowerFirstWord|escapeReservedKeywords}} = localize("{{string.key}}") {{sp}}{% endif %} {{sp}}{% endfor %} {{sp}}{% for child in item.children %} {{sp}}{{accessModifier}} enum {{child.name|swiftIdentifier:"pretty"|escapeReservedKeywords}} { {{sp}}{% set sp2 %}{{sp}} {% endset %} {{sp}}{% call recursiveBlock table child sp2 %} {{sp}}} {{sp}}{% endfor %} {% endmacro %} import Foundation {#   enum #} {% set enumName %}{{param.enumName|default:"L10n"}}{% endset %} {{accessModifier}} enum {{enumName}} { {% if tables.count &gt; 1 %} {% for table in tables %} {{accessModifier}} enum {{table.name|swiftIdentifier:"pretty"|escapeReservedKeywords}} { {% call recursiveBlock table.name table.levels " " %} } {% endfor %} {% else %} {% call recursiveBlock tables.first.name tables.first.levels " " %} {% endif %} } {#  enum Localization         #} extension Localization { fileprivate static func localize(_ key: String, _ args: CVarArg...) -&gt; String { return String( format: NSLocalizedString(key, comment: ""), locale: Locale.current, arguments: args ) } }</code> </pre> </div></div><br><p>  Es conveniente guardar el archivo de plantilla en la ra√≠z del proyecto, por ejemplo, en la carpeta <code>SwiftGen/Templates</code> para que esta plantilla est√© disponible para todos los que trabajan en el proyecto. <br>  La utilidad admite la configuraci√≥n mediante el archivo YAML <code>swiftgen.yml</code> , en el que puede especificar las rutas a los archivos de origen, plantillas y par√°metros adicionales.  <code>Swiftgen</code> en la ra√≠z del proyecto en la carpeta <code>Swiftgen</code> y luego <code>Swiftgen</code> otros archivos relacionados con el script en la misma carpeta. <br>  Para nuestro proyecto, este archivo puede verse as√≠: </p><br><pre> <code class="plaintext hljs">xcassets: - paths: ../SwiftGenExample/Assets.xcassets templatePath: Templates/ImageAssets.stencil output: ../SwiftGenExample/Image.swift params: enumName: Image publicAccess: 1 noAllValues: 1 strings: - paths: ../SwiftGenExample/en.lproj/Localizable.strings templatePath: Templates/LocalizableStrings.stencil output: ../SwiftGenExample/Localization.swift params: enumName: Localization publicAccess: 1 noComments: 0</code> </pre> <br><p>  De hecho, las rutas a los archivos y las plantillas se indican all√≠, as√≠ como los par√°metros adicionales que se pasan al contexto de la plantilla. <br>  Como el archivo no est√° en la ra√≠z del proyecto, debemos especificar la ruta al iniciar Swiftgen.  Cambia nuestro script de inicio: </p><br><pre> <code class="plaintext hljs">"$PODS_ROOT"/SwiftGen/bin/swiftgen config run --config SwiftGen/swiftgen.yml</code> </pre> <br><p>  Ahora nuestro proyecto puede ser ensamblado.  Despu√©s del ensamblaje, deben aparecer dos archivos <code>Localization.swift</code> e <code>Image.swift</code> en la carpeta del proyecto a lo largo de las rutas especificadas en <code>Image.swift</code> .  Deben agregarse al proyecto Xcode.  En nuestro caso, los archivos generados contienen lo siguiente: </p><br><div class="spoiler">  <b class="spoiler_title">Para cuerdas:</b> <div class="spoiler_text"><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Localization</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Languages</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectiveC</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// General-purpose, object-oriented programming language that adds Smalltalk-style messaging to the C programming language public static let description = localize("languages.objective-c.description") /// https://en.wikipedia.org/wiki/Objective-C public static let link = localize("languages.objective-c.link") /// Objective-C public static let name = localize("languages.objective-c.name") } public enum Swift { /// General-purpose, multi-paradigm, compiled programming language developed by Apple Inc. for iOS, macOS, watchOS, tvOS, and Linux public static let description = localize("languages.swift.description") /// https://en.wikipedia.org/wiki/Swift_(programming_language) public static let link = localize("languages.swift.link") /// Swift public static let name = localize("languages.swift.name") } } public enum MainScreen { /// Language public static let title = localize("main-screen.title") public enum Button { /// View in Wikipedia public static let title = localize("main-screen.button.title") } } } extension Localization { fileprivate static func localize(_ key: String, _ args: CVarArg...) -&gt; String { return String( format: NSLocalizedString(key, comment: ""), locale: Locale.current, arguments: args ) } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Para im√°genes:</b> <div class="spoiler_text"><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Image</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logos</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectiveC: <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image(named: <span class="hljs-string"><span class="hljs-string">"ObjectiveC"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> swift: <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image(named: <span class="hljs-string"><span class="hljs-string">"Swift"</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(named name: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bundle = <span class="hljs-type"><span class="hljs-type">Bundle</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">BundleToken</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named: name, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: bundle, compatibleWith: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"Unable to load image named \(name)."</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BundleToken</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> </div></div><br><p>  Ahora puede reemplazar todos los usos de las cadenas de localizaci√≥n e inicializaci√≥n de im√°genes del formulario <code>UIImage(named: "")</code> con lo que generamos.  Esto nos facilitar√° el seguimiento de los cambios o la eliminaci√≥n de las claves de cadena de localizaci√≥n.  En cualquiera de estos casos, el proyecto simplemente no se ensamblar√° hasta que se hayan solucionado todos los errores asociados con los cambios. <br>  Despu√©s de los cambios, nuestro c√≥digo se ve as√≠: </p><br><pre> <code class="swift hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> logos = <span class="hljs-type"><span class="hljs-type">Image</span></span>.<span class="hljs-type"><span class="hljs-type">Logos</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> localization = <span class="hljs-type"><span class="hljs-type">Localization</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupWithLanguage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> language: ProgrammingLanguage)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> language { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">Swift</span></span>: logoImageView.image = logos.swift nameLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.name descriptionLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.description wikiUrl = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.link.toURL() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>: logoImageView.image = logos.objectiveC nameLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.name descriptionLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.description wikiUrl = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.link.toURL() } }</code> </pre> <br><h2 id="nastroyka-proekta-v-xcode">  Configurar un proyecto en Xcode </h2><br><p>  Hay un problema con los archivos generados: pueden cambiarse manualmente por error, y dado que se sobrescriben desde cero con cada compilaci√≥n, estos cambios pueden perderse.  Para evitar esto, puede bloquear archivos para escribir despu√©s de <code>SwiftGen</code> script <code>SwiftGen</code> . <br>  Esto se puede lograr usando el <code>chmod</code> .  Reescribimos nuestra <code>Build Phase</code> con el lanzamiento de SwiftGen de la siguiente manera: </p><br><pre> <code class="plaintext hljs">PODSROOT="$1" OUTPUT_FILES=() COUNTER=0 while [ $COUNTER -lt ${SCRIPT_OUTPUT_FILE_COUNT} ]; do tmp="SCRIPT_OUTPUT_FILE_$COUNTER" OUTPUT_FILES+=(${!tmp}) COUNTER=$[$COUNTER+1] done for file in "${OUTPUT_FILES[@]}" do if [ -f $file ] then chmod a=rw "$file" fi done $PODSROOT/SwiftGen/bin/swiftgen config run --config SwiftGen/swiftgen.yml for file in "${OUTPUT_FILES[@]}" do chmod a=r "$file" done</code> </pre> <br><p>  El gui√≥n es bastante simple.  Antes de comenzar la generaci√≥n, si los archivos existen, les damos permisos de escritura.  Despu√©s de ejecutar el script, bloqueamos la capacidad de modificar archivos. <br>  Para facilitar la edici√≥n y verificar el script para su revisi√≥n, es conveniente colocarlo en un archivo <code>runswiftgen.sh</code> separado.  La versi√≥n final del script con modificaciones menores se puede encontrar <a href="">aqu√≠</a> .  Ahora nuestra <code>Build Phase</code> se ver√° as√≠: pasamos la ruta a la carpeta Pods a la entrada del script: </p><br><pre> <code class="plaintext hljs">"$SRCROOT"/SwiftGen/runswiftgen.sh "$PODS_ROOT"</code> </pre> <br><p>  Reconstruimos el proyecto y ahora, cuando intenta modificar manualmente el archivo generado, aparece una advertencia: </p><br><p><img src="https://habrastorage.org/webt/-n/ly/km/-nlykmdjarer-97mhderydx5psq.png"></p><br><p>  Por lo tanto, la carpeta con Swiftgen ahora contiene un archivo de configuraci√≥n, un script para bloquear archivos e iniciar <code>Swiftgen</code> y una carpeta con plantillas personalizadas.  Es conveniente agregarlo al proyecto para su posterior edici√≥n si es necesario. </p><br><p><img src="https://habrastorage.org/webt/yw/dk/kq/ywdkkqfdjws_a32syu94hscr4cm.png"></p><br><p>  Y dado que los <code>Image.swift</code> <code>Localization.swift</code> e <code>Image.swift</code> generan autom√°ticamente, puede agregarlos a .gitignore para que no tenga que resolver conflictos despu√©s de que <code>git merge</code> nuevamente. </p><br><p>  Tambi√©n me gustar√≠a llamar la atenci√≥n sobre la necesidad de especificar archivos de entrada / salida para la compilaci√≥n de la fase SwiftGen si su proyecto utiliza el sistema Xcode New Build System (es el sistema de compilaci√≥n predeterminado con Xcode 10).  En la lista Archivos de entrada, debe especificar todos los archivos en funci√≥n de los cuales se genera el c√≥digo.  En nuestro caso, este es el script en s√≠, la configuraci√≥n, las plantillas, las cadenas y los archivos .xcassets: </p><br><pre> <code class="plaintext hljs">$(SRCROOT)/SwiftGen/runswiftgen.sh $(SRCROOT)/SwiftGen/swiftgen.yml $(SRCROOT)/SwiftGen/Templates/ImageAssets.stencil $(SRCROOT)/SwiftGen/Templates/LocalizableStrings.stencil $(SRCROOT)/SwiftGenExample/en.lproj/Localizable.strings $(SRCROOT)/SwiftGenExample/Assets.xcassets</code> </pre> <br><p>  En los archivos de salida colocamos los archivos en los que SwiftGen genera el c√≥digo: </p><br><pre> <code class="plaintext hljs">$(SRCROOT)/SwiftGenExample/Image.swift $(SRCROOT)/SwiftGenExample/Localization.swift</code> </pre> <br><p>  Es necesario indicar estos archivos para que el sistema de compilaci√≥n pueda decidir si ejecutar el script, dependiendo de la presencia o ausencia de cambios en los archivos, y en qu√© punto del ensamblaje del proyecto se debe ejecutar este script. </p><br><h2 id="itogi">  Resumen </h2><br><p>  SwiftGen es una buena herramienta para protegernos de nuestro descuido cuando trabajamos con recursos del proyecto.  Con √©l, pudimos generar autom√°ticamente c√≥digo para acceder a los recursos de la aplicaci√≥n y transferir parte del trabajo para verificar la relevancia de los recursos para el compilador, lo que significa simplificar un poco nuestro trabajo.  Adem√°s, configuramos el proyecto Xcode para que sea m√°s conveniente seguir trabajando con la herramienta. </p><br><p>  <strong>Pros:</strong> </p><br><ol><li>  M√°s f√°cil de controlar los recursos del proyecto. </li><li>  Se reducen los errores tipogr√°ficos, se hace posible utilizar la sustituci√≥n autom√°tica. </li><li>  Los errores se verifican en la etapa de compilaci√≥n. </li></ol><br><p>  <strong>Contras:</strong> </p><br><ol><li>  No hay soporte para Localizable.stringsdict. </li><li>  Los recursos que no se utilizan no se tienen en cuenta. </li></ol><br><p>  El ejemplo completo se puede ver en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423381/">https://habr.com/ru/post/es423381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423371/index.html">Volvo presenta un cami√≥n el√©ctrico aut√≥nomo sin cabina</a></li>
<li><a href="../es423373/index.html">Razonamiento artificial sin defectos fatales sin redes neuronales.</a></li>
<li><a href="../es423375/index.html">Cient√≠ficos coreanos han encontrado una manera de evitar da√±os a las paredes del tokamak debido a la inestabilidad del plasma.</a></li>
<li><a href="../es423377/index.html">Asamblea PgModeler</a></li>
<li><a href="../es423379/index.html">Por qu√© una exenci√≥n completa de efectivo puede ser demasiado costosa para los pa√≠ses en desarrollo</a></li>
<li><a href="../es423383/index.html">Ajax js modificaci√≥n para ajax Asp .net mvc</a></li>
<li><a href="../es423385/index.html">Curso "Fundamentos de programaci√≥n"</a></li>
<li><a href="../es423391/index.html">CLRium # 4: .Net Community Meeting</a></li>
<li><a href="../es423393/index.html">Redes neuronales basadas en reglas</a></li>
<li><a href="../es423395/index.html">Tesla establece r√©cord trimestral para autom√≥viles el√©ctricos producidos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>