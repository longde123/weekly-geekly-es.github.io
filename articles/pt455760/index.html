<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíö üõãÔ∏è üç∞ A m√°gica do SwiftUI ou sobre os construtores de fun√ß√µes üò∑ üßù üçâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voc√™ tentou adicionar mais de 10 visualiza√ß√µes ao VStack? 


 var body: some View { VStack { Text("Placeholder1") Text("Placeholder2") // ... 3 10 . ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>A m√°gica do SwiftUI ou sobre os construtores de fun√ß√µes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/455760/"><p><img src="https://habrastorage.org/webt/v6/cb/zn/v6cbzndwivy3oaimq_h-t4kik9u.jpeg"></p><br><p> Voc√™ tentou adicionar mais de 10 visualiza√ß√µes ao VStack? </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder1"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder2"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ...    3  10 . . . Text("Placeholder11") } }</span></span></code> </pre> <br><p>  Eu tentei - n√£o compila.  Sim, tamb√©m fiquei surpreso no come√ßo e mergulhei no estudo do f√≥rum Swift e do github.  O resultado do meu estudo foi - "ele ainda n√£o compila <code>¬Ø\_(„ÉÑ)_/¬Ø</code> ".  Mas espere, vamos ver o porqu√™. </p><a name="habracut"></a><br><h2 id="function-builder">  Construtor de fun√ß√µes </h2><br><p>  Para come√ßar, vale a pena entender como essa sintaxe se tornou geralmente dispon√≠vel.  A base dessa cria√ß√£o declarativa de elementos t√£o incomuns para n√≥s √© o mecanismo do <strong>Function Builder</strong> . <br>  No github em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">r√°pida evolu√ß√£o,</a> h√° uma proposta de John McCall e Doug Gregor - <a href="">Construtores de fun√ß√µes (Proposta: SE-XXXX)</a> , na qual eles descrevem em detalhes qual problema estavam enfrentando, por que foi decidido usar o Functions Builder e o que era tal. </p><br><h3 id="itak-chto-eto">  Ent√£o o que √© isso? </h3><br><p>  √â dif√≠cil descrev√™-lo em poucas palavras, mas em resumo - este √© um mecanismo que permite listar argumentos, algum conte√∫do no corpo de um tesouro e fornecer um resultado geral de tudo isso. <br>  Cita√ß√£o da <a href="">proposta: SE-XXXX</a> : </p><br><blockquote>  A id√©ia principal √© que pegamos o resultado da express√£o, incluindo express√µes aninhadas como if e switch, e as transformamos em um resultado, que se torna o valor de retorno da fun√ß√£o atual.  Essa "constru√ß√£o" √© controlada pelo construtor de fun√ß√µes, que √© um atributo customizado. </blockquote><br><div class="spoiler">  <b class="spoiler_title">O original</b> <div class="spoiler_text"><blockquote>  a id√©ia b√°sica √© que tomemos os resultados da express√£o "ignorada" de um bloco de instru√ß√µes - inclusive em posi√ß√µes aninhadas, como os corpos das declara√ß√µes de comutadores - e os constru√≠mos em um √∫nico valor de resultado que se torna o valor de retorno da fun√ß√£o atual.  A maneira como essa cole√ß√£o √© executada √© controlada pelo afunction builder, que √© apenas um novo tipo de atributo personalizado; </blockquote></div></div><br><p>  Esse mecanismo permite escrever c√≥digo declarativo do tipo √°rvore, sem caracteres de pontua√ß√£o desnecess√°rios: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myBody = body { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> chapter = spellOutChapter ? <span class="hljs-string"><span class="hljs-string">"Chapter"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span> div { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> useChapterTitles { h1(chapter + <span class="hljs-string"><span class="hljs-string">"1. Loomings."</span></span>) } p { <span class="hljs-string"><span class="hljs-string">"Call me Ishmael. Some years ago"</span></span> } p { <span class="hljs-string"><span class="hljs-string">"There is now your insular city"</span></span> } } }</code> </pre> <br><p>  Isso est√° dispon√≠vel gra√ßas ao novo atributo <code>@_functionBuilder</code> .  Este atributo marca algum construtor, pode ser uma estrutura.  Este construtor implementa v√°rios m√©todos espec√≠ficos.  Al√©m disso, esse construtor √© usado por si s√≥, como um atributo do usu√°rio em v√°rias situa√ß√µes. <br>  Abaixo, mostrarei como funciona e como organizar esse c√≥digo. </p><br><h3 id="zachem-eto">  Por que isso? </h3><br><p>  Portanto, a Apple quer dar suporte ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DSL de</a> <em>idioma espec√≠fico do dom√≠nio</em> incorporado. <br>  John McCall e Doug Gregor apontam que esse c√≥digo √© muito mais f√°cil de ler e escrever - isso simplifica a sintaxe, torna-o mais conciso e, como resultado, o c√≥digo se torna mais suportado.  Ao mesmo tempo, eles observam que sua solu√ß√£o n√£o √© uma DSL universal. <br>  Esta solu√ß√£o se concentra em um conjunto espec√≠fico de problemas, incluindo a descri√ß√£o de estruturas lineares e em √°rvore, como XML, JSON, hierarquias de exibi√ß√£o etc. </p><br><h3 id="kak-s-etim-rabotat">  Como trabalhar com isso? </h3><br><p>  Voc√™ pode criar seu pr√≥prio construtor de fun√ß√µes, foi mais f√°cil para mim entender como funciona.  Considere um exemplo primitivo de um construtor que concatena cadeias. </p><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// 1.  Builder @_functionBuilder struct MyBuilder { static func buildBlock(_ atrs: String...) -&gt; String { return atrs.reduce("", + ) } }</span></span></code> </pre> <br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// 2.          func stringsReduce(@MyBuilder block: () -&gt; String) -&gt; String { return block() }</span></span></code> </pre> <br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// 3.     let result = stringsReduce { "1" "2" } print(result) // "12"</span></span></code> </pre> <br><p>  Sob o cap√¥, isso funcionar√° assim: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> result = stringsReduce { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">MyBuilder</span></span>.build(<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"2"</span></span>) }</code> </pre> <br><p>  √â importante que, na implementa√ß√£o do construtor, os m√©todos sejam exatamente est√°ticos, com nomes espec√≠ficos e <a href="">com um tipo espec√≠fico de par√¢metros nessa lista</a> .  Voc√™ pode alterar apenas o tipo e o nome do par√¢metro de entrada. </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildBlock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &lt;*atrs*&gt;: &lt;*String*&gt;...)</span></span></span></span> -&gt; &lt;*<span class="hljs-type"><span class="hljs-type">String</span></span>*&gt;</code> </pre> <br><p>  Nomes de m√©todos espec√≠ficos ser√£o pesquisados ‚Äã‚Äãno construtor e substitu√≠dos no est√°gio de compila√ß√£o.  E se o m√©todo n√£o for encontrado, ocorrer√° um erro de compila√ß√£o. <br>  E isso √© m√°gico.  Quando voc√™ implementa o construtor, o compilador n√£o informa nada.  Ele n√£o informar√° sobre os m√©todos dispon√≠veis, n√£o ajudar√° no preenchimento autom√°tico.  Somente quando voc√™ escreve um c√≥digo do cliente que n√£o pode ser processado por esse construtor, voc√™ recebe um erro indistinto. <br>  At√© agora, a √∫nica solu√ß√£o que encontrei √© ser guiada por uma <a href="">lista de m√©todos</a> . <br>  Ent√£o, por que precisamos de outros m√©todos?  Bem, por exemplo, para suportar esse c√≥digo com verifica√ß√µes </p><br><pre> <code class="swift hljs">stringsReduce { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .random() { <span class="hljs-comment"><span class="hljs-comment">//   Bool "one string" } else { "another one" } "fixed string" }</span></span></code> </pre> <br><p>  Para suportar esta sintaxe, o construtor precisa implementar os <code>buildEither(first:/second:)</code> </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildEither</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(first: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildEither</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(second: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> second }</code> </pre> <br><h3 id="reakciya-soobschestva">  Resposta da comunidade </h3><br><p>  O engra√ßado √© que isso ainda n√£o est√° no Swift 5.1, ou seja, uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solicita√ß√£o de recebimento</a> com esse recurso ainda n√£o foi enviada, mas, no entanto, a Apple j√° o adicionou ao Xcode 11 beta.  E em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Criadores de fun√ß√µes ‚Üí Lan√ßamentos ‚Üí F√≥runs r√°pidos,</a> voc√™ pode ver a rea√ß√£o da comunidade a essa proposta. </p><br><h2 id="viewbuilder">  ViewBuilder </h2><br><p>  Agora volte ao <code>VStack</code> e veja a documenta√ß√£o de seu inicializador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">init (alignment: spacing: content :)</a> . <br>  √â assim: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(alignment: <span class="hljs-type"><span class="hljs-type">HorizontalAlignment</span></span> = .center, spacing: ? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, @<span class="hljs-type"><span class="hljs-type">ViewBuilder</span></span> content: () -&gt; <span class="hljs-type"><span class="hljs-type">Content</span></span>)</code> </pre> <br><p>  E antes da tabela de conte√∫do, existe um atributo personalizado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@ViewBuilder</a> <br>  √â declarado da seguinte forma: </p><br><pre> <code class="swift hljs">@_functionBuilder <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// Builds an empty view from an block containing no statements, `{ }`. public static func buildBlock() -&gt; EmptyView /// Passes a single view written as a child view (e..g, `{ Text("Hello") }`) through /// unmodified. public static func buildBlock&lt;Content&gt;(_ content: Content) -&gt; Content where Content : View }</span></span></code> </pre> <br><p>  O atributo de usu√°rio √© @ <code>_functionBuilder</code> , registrado no in√≠cio de sua declara√ß√£o. </p><br><p>  E se voc√™ examinar a documenta√ß√£o ainda mais, poder√° ver muitos m√©todos est√°ticos de <code>buildBlock</code> que diferem no n√∫mero de argumentos. </p><br><p>  Isso significa que o c√≥digo de exibi√ß√£o </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder1"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder2"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder3"</span></span>) } }</code> </pre> <br><p>  sob o cap√¥ √© convertido em tal </p><br><pre> <code class="swift hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>(alignment: .leading) { <span class="hljs-type"><span class="hljs-type">ViewBuilder</span></span>.buildBlock(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder1"</span></span>), <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder2"</span></span>), <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder3"</span></span>)) } }</code> </pre> <br><p>  I.e.  cumpre o m√©todo do construtor buildBlock <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(:: _ :)</a> . </p><br><p>  Da lista inteira, o m√©todo com o n√∫mero m√°ximo de argumentos √© esse cara <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">buildBlock (:::::::: :) :)</a> (10 argumentos): </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildBlock</span></span></span><span class="hljs-function">&lt;C0, C1, C2, C3, C4, C5, C6, C7, C8, C9&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c0: C0, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c1: C1, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c2: C2, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c3: C3, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c4: C4, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c5: C5, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c6: C6, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c7: C7, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c8: C8, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c9: C9)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">TupleView</span></span>&lt;(<span class="hljs-type"><span class="hljs-type">C0</span></span>, <span class="hljs-type"><span class="hljs-type">C1</span></span>, <span class="hljs-type"><span class="hljs-type">C2</span></span>, <span class="hljs-type"><span class="hljs-type">C3</span></span>, <span class="hljs-type"><span class="hljs-type">C4</span></span>, <span class="hljs-type"><span class="hljs-type">C5</span></span>, <span class="hljs-type"><span class="hljs-type">C6</span></span>, <span class="hljs-type"><span class="hljs-type">C7</span></span>, <span class="hljs-type"><span class="hljs-type">C8</span></span>, <span class="hljs-type"><span class="hljs-type">C9</span></span>)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-type"><span class="hljs-type">C0</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C1</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C2</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C3</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C4</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C5</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C6</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C7</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C8</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span>, <span class="hljs-type"><span class="hljs-type">C9</span></span> : <span class="hljs-type"><span class="hljs-type">View</span></span> }</code> </pre> <br><p>  E, voltando ao exemplo original, quando voc√™ tenta aumentar o <code>VStack</code> e onze visualiza√ß√µes, o compilador tenta encontrar o m√©todo ViewBuilder'a <code>buildBlock</code> , que possui 11 argumentos de entrada.  Mas n√£o existe esse m√©todo: da√≠ o erro de compila√ß√£o. <br>  Isso √© verdadeiro para todas as cole√ß√µes que usam a inicializa√ß√£o com o atributo @ViewBuilder no inicializador: V | H | Z-Stack, List, Group e outros, dentro dos quais voc√™ pode declarar mais de uma exibi√ß√£o como uma enumera√ß√£o. <br>  E isso √© triste. </p><br><p>  <strong>MEM</strong> (desculpe, n√£o encontrei um meme decente) </p><br><h2 id="kak-byt">  Como ser </h2><br><p>  Podemos contornar essa limita√ß√£o usando o <code>ForEach</code> </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">ForEach</span></span>(texts) { i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Text</span></span>(¬´\(i)¬ª) } } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> texts: [<span class="hljs-type"><span class="hljs-type">Int</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result: [<span class="hljs-type"><span class="hljs-type">Int</span></span>] = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>...<span class="hljs-number"><span class="hljs-number">150</span></span> { result.append(i) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result } }</code> </pre> <br><p>  Ou aninhando cole√ß√µes: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder_1"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Placeholder_2"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   8 } Group { Text("11") Text("12") //   8 } } }</span></span></code> </pre> <br><p>  Mas essas decis√µes parecem muletas e h√° apenas esperan√ßa para um futuro melhor.  Mas como √© esse futuro? <br>  Swift j√° possui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">par√¢metros Variadic</a> .  Essa √© a capacidade de um m√©todo para aceitar argumentos por enumera√ß√£o.  Por exemplo, o m√©todo de <code>print</code> conhecido por todos permite que voc√™ escreva <code>print(1, 2)</code> e <code>print(1, 2, 3, 4)</code> e isso sem sobrecargas desnecess√°rias do m√©todo. </p><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(items: <span class="hljs-type"><span class="hljs-type">Any</span></span>...)</code> </pre> <br><p>  Mas esse recurso da linguagem n√£o √© suficiente, pois o m√©todo <code>buildBlock</code> aceita diferentes argumentos gen√©ricos como entrada. <br>  Adicionar <a href="">gen√©ricos Variadic</a> resolveria esse problema.  Os gen√©ricos vari√°veis ‚Äã‚Äãpermitem que voc√™ abstraia de muitos tipos gen√©ricos, por exemplo, algo como isto: </p><br><pre> <code class="swift hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildBlock</span></span></span><span class="hljs-function">&lt;‚Ä¶Component&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Component...)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">TupleView</span></span>&lt;(<span class="hljs-type"><span class="hljs-type">Component</span></span>...)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-type"><span class="hljs-type">Component</span></span>: <span class="hljs-type"><span class="hljs-type">View</span></span></code> </pre> <br><p>  E a Apple √© simplesmente obrigada a adicionar isso.  Tudo repousa contra esse mecanismo agora.  E parece-me que eles simplesmente n√£o conseguiram termin√°-lo at√© a WWDC 2019 (mas isso √© apenas especula√ß√£o). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt455760/">https://habr.com/ru/post/pt455760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt455744/index.html">Sistema de gera√ß√£o de paisagem de labirinto com realismo visual aprimorado [tradu√ß√£o do artigo de Jinmo Kim]</a></li>
<li><a href="../pt455746/index.html">Celesta 7.x: ORM, migra√ß√£o e teste ‚Äúem um pacote‚Äù</a></li>
<li><a href="../pt455754/index.html">Testes de um estratostato √† deriva. Lan√ßamento de Rogozin e LoRa na estratosfera</a></li>
<li><a href="../pt455756/index.html">√â a favor</a></li>
<li><a href="../pt455758/index.html">Hacking de crescimento no foguete de varejo: da pesquisa de hip√≥teses √†s t√©cnicas de teste</a></li>
<li><a href="../pt455762/index.html">Uma breve introdu√ß√£o √†s cadeias de Markov</a></li>
<li><a href="../pt455764/index.html">Pesquisa de c√≥digo de barras incrivelmente precisa, r√°pida e leve atrav√©s de segmenta√ß√£o sem√¢ntica</a></li>
<li><a href="../pt455768/index.html">Fatores essenciais de SEO no local</a></li>
<li><a href="../pt455770/index.html">AERODISCO: aguardando vs. realidade</a></li>
<li><a href="../pt455774/index.html">Motores de turbina a g√°s para aeronaves</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>