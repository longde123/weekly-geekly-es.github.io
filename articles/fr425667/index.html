<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÉ üìª üë®üèø‚Äçüíº Guide Node.js, partie 10: modules standard, flux, bases de donn√©es, NODE_ENV üàπ ‚òîÔ∏è ‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ce document conclut la s√©rie de traductions du manuel Node.js. Aujourd'hui, nous allons parler des syst√®mes d'exploitation, des √©v√©nements et des modu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guide Node.js, partie 10: modules standard, flux, bases de donn√©es, NODE_ENV</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/425667/">  Ce document conclut la s√©rie de traductions du manuel Node.js.  Aujourd'hui, nous allons parler des syst√®mes d'exploitation, des √©v√©nements et des modules http, discuter de l'utilisation des flux et des bases de donn√©es et discuter de l'utilisation de Node.js dans le d√©veloppement et la production d'applications. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/he/di/2j/hedi2j_qyfbnwfo_jqnnqd3ub6o.png"></a> <br><br><div class="spoiler">  <b class="spoiler_title">[Nous vous conseillons de lire] Autres parties du cycle</b> <div class="spoiler_text">  Partie 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Informations g√©n√©rales et mise en route</a> <br>  Partie 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript, V8, quelques astuces de d√©veloppement</a> <br>  Partie 3: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">H√©bergement, REPL, travailler avec la console, les modules</a> <br>  Partie 4: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fichiers npm, package.json et package-lock.json</a> <br>  Partie 5: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npm et npx</a> <br>  Partie 6: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">boucle d'√©v√©nements, pile d'appels, temporisateurs</a> <br>  Partie 7: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Programmation asynchrone</a> <br>  Partie 8: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Protocoles HTTP et WebSocket</a> <br>  Partie 9: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">travailler avec le syst√®me de fichiers</a> <br>  Partie 10: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modules standard, threads, bases de donn√©es, NODE_ENV</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PDF complet du guide Node.js</a> <br></div></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Module OS Node.js</font> </h2><br>  Le module <code>os</code> donne acc√®s √† de nombreuses fonctions qui peuvent √™tre utilis√©es pour obtenir des informations sur le syst√®me d'exploitation et le mat√©riel de l'ordinateur ex√©cutant Node.js.  Il s'agit d'un module standard, vous n'avez pas besoin de l'installer, pour travailler avec lui √† partir du code, il suffit de le connecter: <br><br><pre> <code class="hljs lua">const <span class="hljs-built_in"><span class="hljs-built_in">os</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'os'</span></span>)</code> </pre> <br>  Il existe plusieurs propri√©t√©s utiles ici, qui, en particulier, peuvent √™tre utiles lorsque vous travaillez avec des fichiers. <br><br>  Ainsi, la propri√©t√© <code>os.EOL</code> permet de conna√Ætre le s√©parateur de ligne utilis√© dans le syst√®me (un <code>os.EOL</code> ligne).  Sous Linux et macOS, c'est <code>\n</code> , sous Windows, <code>\r\n</code> . <br><br>  Il convient de noter que lorsque nous mentionnons ¬´Linux et macOS¬ª ici, nous parlons de plates-formes compatibles POSIX.  Par souci de concision, nous ne mentionnons pas ici les plateformes moins populaires. <br><br>  La propri√©t√© <code>os.constants.signals</code> fournit des informations sur les constantes utilis√©es pour traiter les signaux de processus tels que <code>SIGHUP</code> , <code>SIGKILL</code> , etc.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici</a> vous pouvez trouver des d√©tails √† leur sujet. <br><br>  La propri√©t√© <code>os.constants.errno</code> contient les constantes utilis√©es pour les messages d'erreur - comme <code>EADDRINUSE</code> , <code>EOVERFLOW</code> . <br><br>  Consid√©rons maintenant les principales m√©thodes du module <code>os</code> . <br><br><h3>  <font color="#3AC1EF">‚ñços.arch ()</font> </h3><br>  Cette m√©thode renvoie une cha√Æne identifiant l'architecture du syst√®me, par exemple, <code>arm</code> , <code>x64</code> , <code>arm64</code> . <br><br><h3>  <font color="#3AC1EF">‚ñços.cpus ()</font> </h3><br>  Renvoie des informations sur les processeurs disponibles dans le syst√®me.  Par exemple, ces informations peuvent ressembler √† ceci: <br><br><pre> <code class="hljs powershell">[ { <span class="hljs-type"><span class="hljs-type">model</span></span>: <span class="hljs-string"><span class="hljs-string">'Intel(R) Core(TM)2 Duo CPU     P8600 @ 2.40GHz'</span></span>,   <span class="hljs-type"><span class="hljs-type">speed</span></span>: <span class="hljs-number"><span class="hljs-number">2400</span></span>,   <span class="hljs-type"><span class="hljs-type">times</span></span>:    { <span class="hljs-type"><span class="hljs-type">user</span></span>: <span class="hljs-number"><span class="hljs-number">281685380</span></span>,      <span class="hljs-type"><span class="hljs-type">nice</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>,      <span class="hljs-type"><span class="hljs-type">sys</span></span>: <span class="hljs-number"><span class="hljs-number">187986530</span></span>,      <span class="hljs-type"><span class="hljs-type">idle</span></span>: <span class="hljs-number"><span class="hljs-number">685833750</span></span>,      <span class="hljs-type"><span class="hljs-type">irq</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } }, { <span class="hljs-type"><span class="hljs-type">model</span></span>: <span class="hljs-string"><span class="hljs-string">'Intel(R) Core(TM)2 Duo CPU     P8600 @ 2.40GHz'</span></span>,   <span class="hljs-type"><span class="hljs-type">speed</span></span>: <span class="hljs-number"><span class="hljs-number">2400</span></span>,   <span class="hljs-type"><span class="hljs-type">times</span></span>:    { <span class="hljs-type"><span class="hljs-type">user</span></span>: <span class="hljs-number"><span class="hljs-number">282348700</span></span>,      <span class="hljs-type"><span class="hljs-type">nice</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>,      <span class="hljs-type"><span class="hljs-type">sys</span></span>: <span class="hljs-number"><span class="hljs-number">161800480</span></span>,      <span class="hljs-type"><span class="hljs-type">idle</span></span>: <span class="hljs-number"><span class="hljs-number">703509470</span></span>,      <span class="hljs-type"><span class="hljs-type">irq</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } } ]</code> </pre><br><h3>  <font color="#3AC1EF">‚ñços.endianness ()</font> </h3><br>  Renvoie <code>BE</code> ou <code>LE</code> fonction de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ordre des octets</a> (Big Engian ou Little Endian) utilis√© pour compiler le fichier binaire Node.js. <br><br><h3>  <font color="#3AC1EF">‚ñços.freemem ()</font> </h3><br>  Renvoie la quantit√© de m√©moire syst√®me libre en octets. <br><br><h3>  <font color="#3AC1EF">‚ñços.homedir ()</font> </h3><br>  Renvoie le chemin d'acc√®s au r√©pertoire personnel de l'utilisateur actuel.  Par exemple, <code>'/Users/flavio'</code> . <br><br><h3>  <font color="#3AC1EF">‚ñços.hostname ()</font> </h3><br>  Renvoie le nom d'h√¥te. <br><br><h3>  <font color="#3AC1EF">‚ñços.loadavg ()</font> </h3><br>  Renvoie, dans un tableau, les donn√©es de charge moyenne calcul√©es par le syst√®me d'exploitation.  Ces informations n'ont de sens que sous Linux et macOS.  Cela peut ressembler √† ceci: <br><br><pre> <code class="hljs json">[ <span class="hljs-number"><span class="hljs-number">3.68798828125</span></span>, <span class="hljs-number"><span class="hljs-number">4.00244140625</span></span>, <span class="hljs-number"><span class="hljs-number">11.1181640625</span></span> ]</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñços.networkInterfaces ()</font> </h3><br>  Renvoie des informations sur les interfaces r√©seau disponibles sur le syst√®me.  Par exemple: <br><br><pre> <code class="hljs powershell">{ lo0:  [ { <span class="hljs-type"><span class="hljs-type">address</span></span>: <span class="hljs-string"><span class="hljs-string">'127.0.0.1'</span></span>,      <span class="hljs-type"><span class="hljs-type">netmask</span></span>: <span class="hljs-string"><span class="hljs-string">'255.0.0.0'</span></span>,      <span class="hljs-type"><span class="hljs-type">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv4'</span></span>,      <span class="hljs-type"><span class="hljs-type">mac</span></span>: <span class="hljs-string"><span class="hljs-string">'fe:82:00:00:00:00'</span></span>,      <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">ernal</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span> },    { <span class="hljs-type"><span class="hljs-type">address</span></span>: <span class="hljs-string"><span class="hljs-string">'::1'</span></span>,      <span class="hljs-type"><span class="hljs-type">netmask</span></span>: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff'</span></span>,      <span class="hljs-type"><span class="hljs-type">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      <span class="hljs-type"><span class="hljs-type">mac</span></span>: <span class="hljs-string"><span class="hljs-string">'fe:82:00:00:00:00'</span></span>,      <span class="hljs-type"><span class="hljs-type">scopeid</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>,      <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">ernal</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span> },    { <span class="hljs-type"><span class="hljs-type">address</span></span>: <span class="hljs-string"><span class="hljs-string">'fe80::1'</span></span>,      <span class="hljs-type"><span class="hljs-type">netmask</span></span>: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff::'</span></span>,      <span class="hljs-type"><span class="hljs-type">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      <span class="hljs-type"><span class="hljs-type">mac</span></span>: <span class="hljs-string"><span class="hljs-string">'fe:82:00:00:00:00'</span></span>,      <span class="hljs-type"><span class="hljs-type">scopeid</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>,      <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">ernal</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span> } ], en1:  [ { <span class="hljs-type"><span class="hljs-type">address</span></span>: <span class="hljs-string"><span class="hljs-string">'fe82::9b:8282:d7e6:496e'</span></span>,      <span class="hljs-type"><span class="hljs-type">netmask</span></span>: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff::'</span></span>,      <span class="hljs-type"><span class="hljs-type">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      <span class="hljs-type"><span class="hljs-type">mac</span></span>: <span class="hljs-string"><span class="hljs-string">'06:00:00:02:0e:00'</span></span>,      <span class="hljs-type"><span class="hljs-type">scopeid</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>,      <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">ernal</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> },    { <span class="hljs-type"><span class="hljs-type">address</span></span>: <span class="hljs-string"><span class="hljs-string">'192.168.1.38'</span></span>,      <span class="hljs-type"><span class="hljs-type">netmask</span></span>: <span class="hljs-string"><span class="hljs-string">'255.255.255.0'</span></span>,      <span class="hljs-type"><span class="hljs-type">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv4'</span></span>,      <span class="hljs-type"><span class="hljs-type">mac</span></span>: <span class="hljs-string"><span class="hljs-string">'06:00:00:02:0e:00'</span></span>,      <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">ernal</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> } ], utun0:  [ { <span class="hljs-type"><span class="hljs-type">address</span></span>: <span class="hljs-string"><span class="hljs-string">'fe80::2513:72bc:f405:61d0'</span></span>,      <span class="hljs-type"><span class="hljs-type">netmask</span></span>: <span class="hljs-string"><span class="hljs-string">'ffff:ffff:ffff:ffff::'</span></span>,      <span class="hljs-type"><span class="hljs-type">family</span></span>: <span class="hljs-string"><span class="hljs-string">'IPv6'</span></span>,      <span class="hljs-type"><span class="hljs-type">mac</span></span>: <span class="hljs-string"><span class="hljs-string">'fe:80:00:20:00:00'</span></span>,      <span class="hljs-type"><span class="hljs-type">scopeid</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>,      <span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">ernal</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> } ] }</code> </pre><br><h3>  <font color="#3AC1EF">‚ñços.platform ()</font> </h3><br>  Renvoie des informations sur la plate-forme pour laquelle Node.js. a √©t√© compil√©.  Voici quelques-unes des valeurs de retour possibles: <br><br><ul><li>  Darwin </li><li>  freebsd </li><li>  linux </li><li>  openbsd </li><li>  win32 </li></ul><br><h3>  <font color="#3AC1EF">‚ñços.release ()</font> </h3><br>  Renvoie une cha√Æne identifiant le num√©ro de version du syst√®me d'exploitation. <br><br><h3>  <font color="#3AC1EF">‚ñços.tmpdir ()</font> </h3><br>  Renvoie le chemin d'acc√®s au r√©pertoire sp√©cifi√© dans le syst√®me pour le stockage des fichiers temporaires. <br><br><h3>  <font color="#3AC1EF">‚ñços.totalmem ()</font> </h3><br>  Renvoie la quantit√© totale de m√©moire syst√®me en octets. <br><br><h3>  <font color="#3AC1EF">‚ñços.type ()</font> </h3><br>  Renvoie des informations qui identifient le syst√®me d'exploitation.  Par exemple: <br><br><ul><li>  <code>Linux</code> - Linux. </li><li>  <code>Darwin</code> - macOS. </li><li>  <code>Windows_NT</code> - Windows. </li></ul><br><h3>  <font color="#3AC1EF">‚ñços.uptime ()</font> </h3><br>  Renvoie la disponibilit√© du syst√®me en secondes depuis le dernier red√©marrage. <br><br><h2>  <font color="#3AC1EF">Module d'√©v√©nements Node.js</font> </h2><br>  Le module d' <code>events</code> nous fournit la classe <code>EventEmitter</code> , qui est con√ßue pour fonctionner avec des √©v√©nements sur la plate-forme Node.js.  Nous avons d√©j√† parl√© un peu de ce module dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">septi√®me</a> de cette s√©rie de documents.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici la</a> documentation pour cela.  Ici, nous regardons l'API de ce module.  Rappelez-vous que pour l'utiliser dans le code, vous devez le connecter, comme c'est g√©n√©ralement le cas avec les modules standard.  Apr√®s cela, vous devez cr√©er un nouvel objet <code>EventEmitter</code> .  Cela ressemble √† ceci: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EventEmitter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'events'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> door = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter()</code> </pre> <br>  L'objet de la classe <code>EventEmitter</code> utilise des m√©canismes standard, en particulier les √©v√©nements suivants: <br><br><ul><li>  <code>newListener</code> - cet √©v√©nement est <code>newListener</code> lorsqu'un gestionnaire d'√©v√©nements est ajout√©. </li><li>  <code>removeListener</code> - appel√© lorsque le gestionnaire est supprim√©. </li></ul><br>  Consid√©rez les m√©thodes d'objets les plus utiles de la classe <code>EventEmitter</code> (un objet similaire dans les noms des m√©thodes est indiqu√© comme <code>emitter</code> ). <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.addListener ()</font> </h3><br>  Un alias pour la m√©thode <code>emitter.on()</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.emit ()</font> </h3><br>  G√©n√®re un √©v√©nement.  Appelle tous les gestionnaires d'√©v√©nements de mani√®re synchrone dans l'ordre dans lequel ils ont √©t√© enregistr√©s. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.eventNames ()</font> </h3><br>  Renvoie un tableau contenant les √©v√©nements enregistr√©s. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.getMaxListeners ()</font> </h3><br>  Renvoie le nombre maximal de gestionnaires pouvant √™tre ajout√©s √† un objet de la classe <code>EventEmitter</code> .  La valeur par d√©faut est 10. Si n√©cessaire, ce param√®tre peut √™tre augment√© ou diminu√© √† l'aide de la m√©thode <code>setMaxListeners()</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.listenerCount ()</font> </h3><br>  Renvoie le nombre de gestionnaires d'√©v√©nements dont le nom est transmis √† cette m√©thode en tant que param√®tre: <br><br><pre> <code class="hljs swift">door.listenerCount('<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>')</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.listeners ()</font> </h3><br>  Renvoie un tableau de gestionnaires d'√©v√©nements pour l'√©v√©nement correspondant, dont le nom est transmis √† cette m√©thode: <br><br><pre> <code class="hljs swift">door.listeners('<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>')</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.off ()</font> </h3><br>  Un alias pour la m√©thode <code>emitter.removeListener()</code> , introduite dans le n≈ìud 10. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.on ()</font> </h3><br>  Enregistrez un rappel qui est appel√© lorsqu'un √©v√©nement est g√©n√©r√©.  Voici comment l'utiliser: <br><br><pre> <code class="hljs coffeescript">door.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'open'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Door was opened'</span></span>) })</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.once ()</font> </h3><br>  Il enregistre un rappel qui n'est appel√© qu'une seule fois - lors de la premi√®re occurrence d'un √©v√©nement pour lequel ce rappel est enregistr√©.  Par exemple: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EventEmitter = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'events'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ee = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter() ee.once(<span class="hljs-string"><span class="hljs-string">'my-event'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//         })</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.prependListener ()</font> </h3><br>  Lors de l'inscription d'un gestionnaire √† l'aide des m√©thodes <code>on()</code> ou <code>addListener()</code> , ce gestionnaire est ajout√© √† la fin de la file d'attente du gestionnaire et est appel√© en dernier pour g√©rer l'√©v√©nement correspondant.  Lorsque vous utilisez la m√©thode <code>prependListener()</code> , le gestionnaire est ajout√© √† l'avant de la file d'attente, ce qui le fait √™tre appel√© en premier pour traiter l'√©v√©nement. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.prependOnceListener ()</font> </h3><br>  Cette m√©thode est similaire √† la pr√©c√©dente.  √Ä savoir, lorsqu'un gestionnaire destin√© √† un seul appel est enregistr√© √† l'aide de la m√©thode <code>once()</code> , il s'av√®re qu'il est le dernier dans la file d'attente des gestionnaires et le dernier √† √™tre appel√©.  La m√©thode <code>prependOnceListener()</code> vous permet d'ajouter un tel gestionnaire √† l'avant de la file d'attente. <br><br><h3>  <font color="#3AC1EF">‚ñçemitter.removeAllListeners ()</font> </h3><br>  Cette m√©thode supprime tous les gestionnaires d'un √©v√©nement donn√© enregistr√©s dans l'objet correspondant.  Ils l'utilisent comme ceci: <br><br><pre> <code class="hljs swift">door.removeAllListeners('<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>')</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.removeListener ()</font> </h3><br>  Supprime le gestionnaire sp√©cifi√© √† transmettre √† cette m√©thode.  Afin de sauvegarder le gestionnaire pour une suppression ult√©rieure, le rappel correspondant peut √™tre affect√© √† une variable.  Cela ressemble √† ceci: <br><br><pre> <code class="hljs coffeescript">const doSomething = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {} door.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'open'</span></span>, doSomething) door.removeListener(<span class="hljs-string"><span class="hljs-string">'open'</span></span>, doSomething)</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçemitter.setMaxListeners ()</font> </h3><br>  Cette m√©thode vous permet de sp√©cifier le nombre maximal de gestionnaires pouvant √™tre ajout√©s √† un seul √©v√©nement dans une instance de la classe <code>EventEmitter</code> .  Par d√©faut, comme d√©j√† mentionn√©, vous pouvez ajouter jusqu'√† 10 gestionnaires pour un √©v√©nement particulier.  Cette valeur peut √™tre modifi√©e.  Utilisez cette m√©thode comme suit: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">door</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setMaxListeners</span></span>(50)</code> </pre> <br><h2>  <font color="#3AC1EF">Module http Node.js</font> </h2><br>  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">huiti√®me</a> partie de cette s√©rie de documents, nous avons d√©j√† parl√© du module <code>http</code> Node.js standard.  Il met √† disposition des m√©canismes de d√©veloppement destin√©s √† cr√©er des serveurs HTTP.  C'est le module principal utilis√© pour r√©soudre les probl√®mes d'√©change de donn√©es sur le r√©seau dans Node.js.  Vous pouvez le connecter dans le code comme ceci: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>)</code> </pre> <br>  Il se compose de propri√©t√©s, de m√©thodes et de classes.  Parlons-en. <br><br><h3>  <font color="#3AC1EF">‚ñçPropri√©t√©s</font> </h3><br><h4>  http.METHODS </h4><br>  Cette propri√©t√© r√©pertorie toutes les m√©thodes HTTP prises en charge: <br><br><pre> <code class="hljs perl">&gt; <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).METHODS [ <span class="hljs-string"><span class="hljs-string">'ACL'</span></span>, <span class="hljs-string"><span class="hljs-string">'BIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'CHECKOUT'</span></span>, <span class="hljs-string"><span class="hljs-string">'CONNECT'</span></span>, <span class="hljs-string"><span class="hljs-string">'COPY'</span></span>, <span class="hljs-string"><span class="hljs-string">'DELETE'</span></span>, <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, <span class="hljs-string"><span class="hljs-string">'HEAD'</span></span>, <span class="hljs-string"><span class="hljs-string">'LINK'</span></span>, <span class="hljs-string"><span class="hljs-string">'LOCK'</span></span>, <span class="hljs-string"><span class="hljs-string">'M-SEARCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'MERGE'</span></span>, <span class="hljs-string"><span class="hljs-string">'MKACTIVITY'</span></span>, <span class="hljs-string"><span class="hljs-string">'MKCALENDAR'</span></span>, <span class="hljs-string"><span class="hljs-string">'MKCOL'</span></span>, <span class="hljs-string"><span class="hljs-string">'MOVE'</span></span>, <span class="hljs-string"><span class="hljs-string">'NOTIFY'</span></span>, <span class="hljs-string"><span class="hljs-string">'OPTIONS'</span></span>, <span class="hljs-string"><span class="hljs-string">'PATCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-string"><span class="hljs-string">'PROPFIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'PROPPATCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'PURGE'</span></span>, <span class="hljs-string"><span class="hljs-string">'PUT'</span></span>, <span class="hljs-string"><span class="hljs-string">'REBIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'REPORT'</span></span>, <span class="hljs-string"><span class="hljs-string">'SEARCH'</span></span>, <span class="hljs-string"><span class="hljs-string">'SUBSCRIBE'</span></span>, <span class="hljs-string"><span class="hljs-string">'TRACE'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNBIND'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNLINK'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNLOCK'</span></span>, <span class="hljs-string"><span class="hljs-string">'UNSUBSCRIBE'</span></span> ]</code> </pre> <br><h4>  http.STATUS_CODES </h4><br>  Il contient les codes d'√©tat HTTP et leurs descriptions: <br><br><pre> <code class="hljs pgsql">&gt; require(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).STATUS_CODES { <span class="hljs-string"><span class="hljs-string">'100'</span></span>: <span class="hljs-string"><span class="hljs-string">'Continue'</span></span>, <span class="hljs-string"><span class="hljs-string">'101'</span></span>: <span class="hljs-string"><span class="hljs-string">'Switching Protocols'</span></span>, <span class="hljs-string"><span class="hljs-string">'102'</span></span>: <span class="hljs-string"><span class="hljs-string">'Processing'</span></span>, <span class="hljs-string"><span class="hljs-string">'200'</span></span>: <span class="hljs-string"><span class="hljs-string">'OK'</span></span>, <span class="hljs-string"><span class="hljs-string">'201'</span></span>: <span class="hljs-string"><span class="hljs-string">'Created'</span></span>, <span class="hljs-string"><span class="hljs-string">'202'</span></span>: <span class="hljs-string"><span class="hljs-string">'Accepted'</span></span>, <span class="hljs-string"><span class="hljs-string">'203'</span></span>: <span class="hljs-string"><span class="hljs-string">'Non-Authoritative Information'</span></span>, <span class="hljs-string"><span class="hljs-string">'204'</span></span>: <span class="hljs-string"><span class="hljs-string">'No Content'</span></span>, <span class="hljs-string"><span class="hljs-string">'205'</span></span>: <span class="hljs-string"><span class="hljs-string">'Reset Content'</span></span>, <span class="hljs-string"><span class="hljs-string">'206'</span></span>: <span class="hljs-string"><span class="hljs-string">'Partial Content'</span></span>, <span class="hljs-string"><span class="hljs-string">'207'</span></span>: <span class="hljs-string"><span class="hljs-string">'Multi-Status'</span></span>, <span class="hljs-string"><span class="hljs-string">'208'</span></span>: <span class="hljs-string"><span class="hljs-string">'Already Reported'</span></span>, <span class="hljs-string"><span class="hljs-string">'226'</span></span>: <span class="hljs-string"><span class="hljs-string">'IM Used'</span></span>, <span class="hljs-string"><span class="hljs-string">'300'</span></span>: <span class="hljs-string"><span class="hljs-string">'Multiple Choices'</span></span>, <span class="hljs-string"><span class="hljs-string">'301'</span></span>: <span class="hljs-string"><span class="hljs-string">'Moved Permanently'</span></span>, <span class="hljs-string"><span class="hljs-string">'302'</span></span>: <span class="hljs-string"><span class="hljs-string">'Found'</span></span>, <span class="hljs-string"><span class="hljs-string">'303'</span></span>: <span class="hljs-string"><span class="hljs-string">'See Other'</span></span>, <span class="hljs-string"><span class="hljs-string">'304'</span></span>: <span class="hljs-string"><span class="hljs-string">'Not Modified'</span></span>, <span class="hljs-string"><span class="hljs-string">'305'</span></span>: <span class="hljs-string"><span class="hljs-string">'Use Proxy'</span></span>, <span class="hljs-string"><span class="hljs-string">'307'</span></span>: <span class="hljs-string"><span class="hljs-string">'Temporary Redirect'</span></span>, <span class="hljs-string"><span class="hljs-string">'308'</span></span>: <span class="hljs-string"><span class="hljs-string">'Permanent Redirect'</span></span>, <span class="hljs-string"><span class="hljs-string">'400'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bad Request'</span></span>, <span class="hljs-string"><span class="hljs-string">'401'</span></span>: <span class="hljs-string"><span class="hljs-string">'Unauthorized'</span></span>, <span class="hljs-string"><span class="hljs-string">'402'</span></span>: <span class="hljs-string"><span class="hljs-string">'Payment Required'</span></span>, <span class="hljs-string"><span class="hljs-string">'403'</span></span>: <span class="hljs-string"><span class="hljs-string">'Forbidden'</span></span>, <span class="hljs-string"><span class="hljs-string">'404'</span></span>: <span class="hljs-string"><span class="hljs-string">'Not Found'</span></span>, <span class="hljs-string"><span class="hljs-string">'405'</span></span>: <span class="hljs-string"><span class="hljs-string">'Method Not Allowed'</span></span>, <span class="hljs-string"><span class="hljs-string">'406'</span></span>: <span class="hljs-string"><span class="hljs-string">'Not Acceptable'</span></span>, <span class="hljs-string"><span class="hljs-string">'407'</span></span>: <span class="hljs-string"><span class="hljs-string">'Proxy Authentication Required'</span></span>, <span class="hljs-string"><span class="hljs-string">'408'</span></span>: <span class="hljs-string"><span class="hljs-string">'Request Timeout'</span></span>, <span class="hljs-string"><span class="hljs-string">'409'</span></span>: <span class="hljs-string"><span class="hljs-string">'Conflict'</span></span>, <span class="hljs-string"><span class="hljs-string">'410'</span></span>: <span class="hljs-string"><span class="hljs-string">'Gone'</span></span>, <span class="hljs-string"><span class="hljs-string">'411'</span></span>: <span class="hljs-string"><span class="hljs-string">'Length Required'</span></span>, <span class="hljs-string"><span class="hljs-string">'412'</span></span>: <span class="hljs-string"><span class="hljs-string">'Precondition Failed'</span></span>, <span class="hljs-string"><span class="hljs-string">'413'</span></span>: <span class="hljs-string"><span class="hljs-string">'Payload Too Large'</span></span>, <span class="hljs-string"><span class="hljs-string">'414'</span></span>: <span class="hljs-string"><span class="hljs-string">'URI Too Long'</span></span>, <span class="hljs-string"><span class="hljs-string">'415'</span></span>: <span class="hljs-string"><span class="hljs-string">'Unsupported Media Type'</span></span>, <span class="hljs-string"><span class="hljs-string">'416'</span></span>: <span class="hljs-string"><span class="hljs-string">'Range Not Satisfiable'</span></span>, <span class="hljs-string"><span class="hljs-string">'417'</span></span>: <span class="hljs-string"><span class="hljs-string">'Expectation Failed'</span></span>, <span class="hljs-string"><span class="hljs-string">'418'</span></span>: <span class="hljs-string"><span class="hljs-string">'I\'</span></span>ma teapot<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">421</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Misdirected Request<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">422</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Unprocessable Entity<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">423</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Locked<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">424</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Failed Dependency<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">425</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Unordered Collection<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">426</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Upgrade Required<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">428</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Precondition Required<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">429</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Too Many Requests<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">431</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Request <span class="hljs-keyword"><span class="hljs-keyword">Header</span></span> Fields Too Larg<span class="hljs-string"><span class="hljs-string">e', '</span></span><span class="hljs-number"><span class="hljs-number">451</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Unavailable <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> Legal Reasons<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">500</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-type"><span class="hljs-type">Internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Server</span></span> Error<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">501</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Implemented<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">502</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Bad Gateway<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">503</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Service Unavailabl<span class="hljs-string"><span class="hljs-string">e', '</span></span><span class="hljs-number"><span class="hljs-number">504</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Gateway Timeout<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">505</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>HTTP <span class="hljs-keyword"><span class="hljs-keyword">Version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Supported<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">506</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Variant <span class="hljs-keyword"><span class="hljs-keyword">Also</span></span> Negotiates<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">507</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Insufficient Storag<span class="hljs-string"><span class="hljs-string">e', '</span></span><span class="hljs-number"><span class="hljs-number">508</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-keyword"><span class="hljs-keyword">Loop</span></span> Detected<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">509</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Bandwidth <span class="hljs-keyword"><span class="hljs-keyword">Limit</span></span> Exceeded<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">510</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span><span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Extended<span class="hljs-string"><span class="hljs-string">', '</span></span><span class="hljs-number"><span class="hljs-number">511</span></span><span class="hljs-string"><span class="hljs-string">': '</span></span>Network Authentication Required<span class="hljs-string"><span class="hljs-string">' }</span></span></code> </pre> <br><h4>  http.globalAgent </h4><br>  Cette propri√©t√© pointe vers l'instance globale de la classe <code>http.Agent</code> .  Il est utilis√© pour g√©rer les connexions.  Il peut √™tre consid√©r√© comme un composant cl√© du sous-syst√®me HTTP Node.js.  Nous parlerons plus en d√©tail de la classe <code>http.Agent</code> ci-dessous. <br><br><h3>  <font color="#3AC1EF">‚ñçM√©thodes</font> </h3><br><h4>  http.createServer () </h4><br>  Renvoie une nouvelle instance de la classe <code>http.Server</code> .  Voici comment utiliser cette m√©thode pour cr√©er un serveur HTTP: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      })</span></span></code> </pre> <br><h4>  http.request () </h4><br>  Vous permet de faire une requ√™te HTTP au serveur en cr√©ant une instance de la classe <code>http.ClientRequest</code> . <br><br><h4>  http.get () </h4><br>  Cette m√©thode est similaire √† <code>http.request()</code> , mais elle d√©finit automatiquement la m√©thode HTTP sur <code>GET</code> et appelle automatiquement une commande de la forme <code>req.end()</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Classes</font> </h3><br>  Le module HTTP fournit 5 classes - <code>Agent</code> , <code>ClientRequest</code> , <code>Server</code> , <code>ServerResponse</code> et <code>IncomingMessage</code> .  Consid√©rez-les. <br><br><h4>  http.Agent </h4><br>  L'instance globale de la classe <code>http.Agent</code> cr√©√©e par Node.js est utilis√©e pour g√©rer les connexions.  Il est utilis√© comme valeur par d√©faut pour toutes les requ√™tes HTTP et fournit la mise en file d'attente et la r√©utilisation des sockets.  De plus, il prend en charge un pool de sockets, qui permet des performances √©lev√©es du sous-syst√®me r√©seau Node.js.  Si n√©cessaire, vous pouvez cr√©er votre propre objet <code>http.Agent</code> . <br><br><h4>  http.ClientRequest </h4><br>  Un objet de la classe <code>http.ClientRequest</code> , qui est une demande en cours d'ex√©cution, est cr√©√© lorsque les <code>http.request()</code> ou <code>http.get()</code> sont appel√©es.  Lorsqu'une r√©ponse √† une demande est re√ßue, l'√©v√©nement de r√©ponse est d√©clench√©, dans lequel la r√©ponse est transmise - une instance de <code>http.IncomingMessage</code> .  Les donn√©es obtenues une fois la requ√™te termin√©e peuvent √™tre trait√©es de deux mani√®res: <br><br><ul><li>  Vous pouvez appeler la m√©thode <code>response.read()</code> . </li><li>  Dans le gestionnaire d'√©v√©nements de <code>response</code> , vous pouvez configurer un √©couteur pour l'√©v√©nement de <code>data</code> , ce qui vous permet de travailler avec des donn√©es en streaming. </li></ul><br><h4>  http.Server </h4><br>  Les instances de cette classe sont utilis√©es pour cr√©er des serveurs √† l'aide de la commande <code>http.createServer()</code> .  Apr√®s avoir un objet serveur, nous pouvons utiliser ses m√©thodes: <br><br><ul><li>  La m√©thode <code>listen()</code> est utilis√©e pour d√©marrer le serveur et organiser l'attente et le traitement des requ√™tes entrantes. </li><li>  La m√©thode <code>close()</code> arr√™te le serveur. </li></ul><br><h4>  http.ServerResponse </h4><br>  Cet objet est cr√©√© par la classe <code>http.Server</code> et transmis en tant que deuxi√®me param√®tre √† l'√©v√©nement de <code>request</code> lorsqu'il se produit.  En r√®gle g√©n√©rale, ces objets dans le code re√ßoivent le nom <code>res</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//res -   http.ServerResponse })</span></span></code> </pre> <br>  Dans ces gestionnaires, une fois que la r√©ponse du serveur est pr√™te √† √™tre envoy√©e au client, la m√©thode <code>end()</code> est appel√©e, ce qui termine la r√©ponse.  Cette m√©thode doit √™tre appel√©e apr√®s la fin de chaque r√©ponse. <br><br>  Voici les m√©thodes utilis√©es pour travailler avec les en-t√™tes HTTP: <br><br><ul><li>  <code>getHeaderNames()</code> - retourne une liste de noms d'en-t√™tes install√©s. </li><li>  <code>getHeaders()</code> - renvoie une copie des en-t√™tes HTTP d√©finis. </li><li>  <code>setHeader('headername', value)</code> - d√©finit la valeur de l'en-t√™te sp√©cifi√©. </li><li>  <code>getHeader('headername')</code> - renvoie l'en-t√™te d√©fini. </li><li>  <code>removeHeader('headername')</code> - supprime l'en-t√™te install√©. </li><li>  <code>hasHeader('headername')</code> - renvoie <code>true</code> si la r√©ponse a d√©j√† un en-t√™te dont le nom est pass√© √† cette m√©thode. </li><li>  <code>headersSent()</code> - renvoie <code>true</code> si les en-t√™tes sont d√©j√† envoy√©s au client. </li></ul><br>  Apr√®s avoir trait√© les en-t√™tes, ils peuvent √™tre envoy√©s au client en appelant la m√©thode <code>response.writeHead()</code> , qui, en tant que premier param√®tre, prend un code d'√©tat.  En tant que deuxi√®me et troisi√®me param√®tres, un message correspondant au code d'√©tat et aux en-t√™tes peut lui √™tre transmis. <br><br>  Pour envoyer des donn√©es au client, la m√©thode <code>write()</code> est utilis√©e dans le corps de la r√©ponse.  Il envoie des donn√©es en m√©moire tampon au flux de r√©ponse HTTP. <br><br>  Si les en-t√™tes n'ont pas encore √©t√© d√©finis avec la commande <code>response.writeHead()</code> , les en-t√™tes avec le code d'√©tat et le message sp√©cifi√©s dans la demande seront envoy√©s en premier.  Vous pouvez d√©finir leurs valeurs en d√©finissant des valeurs pour les <code>statusMessage</code> <code>statusCode</code> et <code>statusMessage</code> : <br><br><pre> <code class="hljs vbscript"><span class="hljs-built_in"><span class="hljs-built_in">response</span></span>.statusCode = <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-built_in"><span class="hljs-built_in">response</span></span>.statusMessage = <span class="hljs-comment"><span class="hljs-comment">'Internal Server Error'</span></span></code> </pre> <br><h4>  http.IncomingMessage </h4><br>  Un objet de la classe <code>http.IncomingMessage</code> est cr√©√© au cours des m√©canismes suivants: <br><br><ul><li>  <code>http.Server</code> - lors du traitement de l'√©v√©nement de <code>request</code> . </li><li>  <code>http.ClientRequest</code> - lors de la gestion de l'√©v√©nement de <code>response</code> . </li></ul><br>  Il peut √™tre utilis√© pour travailler avec des donn√©es de r√©ponse.  √Ä savoir: <br><br><ul><li>  Afin de conna√Ætre le code d'√©tat de r√©ponse et le message correspondant, les propri√©t√©s <code>statusCode</code> et <code>statusMessage</code> sont utilis√©es. </li><li>  Vous pouvez voir les en- <code>headers</code> r√©ponse <code>headers</code> <code>rawHearders</code> <code>headers</code> ou <code>rawHearders</code> (pour une liste des en-t√™tes raw). </li><li>  Vous pouvez d√©couvrir la m√©thode de demande √† l'aide de la propri√©t√© <code>method</code> . </li><li>  Pour savoir quelle version de HTTP est utilis√©e, utilisez la propri√©t√© <code>httpVersion</code> . </li><li>  Pour obtenir l'URL, la propri√©t√© <code>url</code> est destin√©e. </li><li>  La propri√©t√© <code>socket</code> vous permet d'obtenir l'objet <code>net.Socket</code> associ√© √† la connexion. </li></ul><br>  Les donn√©es de r√©ponse sont pr√©sent√©es sous forme de flux, car l'objet <code>http.IncomingMessage</code> impl√©mente l'interface <code>Readable Stream</code> . <br><br><h2>  <font color="#3AC1EF">Travailler avec des flux dans Node.js</font> </h2><br>  Les threads sont l'un des concepts fondamentaux utilis√©s dans les applications Node.js.  Les flux sont des outils qui vous permettent de lire et d'√©crire des fichiers, d'organiser la mise en r√©seau entre les syst√®mes et, en g√©n√©ral, de mettre en ≈ìuvre efficacement des op√©rations d'√©change de donn√©es. <br><br>  Le concept de threads n'est pas unique √† Node.js.  Ils sont apparus sur la famille d'OS Unix il y a des d√©cennies.  En particulier, les programmes peuvent interagir les uns avec les autres, en transmettant des flux de donn√©es √† l'aide de pipelines (en utilisant le caract√®re pipe - <code>|</code> ). <br><br>  Si vous imaginez, disons, lire un fichier sans utiliser de flux, alors, pendant l'ex√©cution de la commande correspondante, le contenu du fichier sera enti√®rement lu en m√©moire, apr√®s quoi vous pourrez travailler avec ce contenu. <br><br>  Gr√¢ce √† l'utilisation du m√©canisme de flux, les fichiers peuvent √™tre lus et trait√©s en plusieurs parties, ce qui √©limine le besoin de stocker de grandes quantit√©s de donn√©es en m√©moire. <br><br>  Le module de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flux</a> Node.js est la base sur laquelle toutes les API prenant en charge le streaming sont construites. <br><br><h3>  <font color="#3AC1EF">‚ñç√Ä propos des points forts de l'utilisation des flux</font> </h3><br>  Les flux, par rapport √† d'autres m√©thodes de traitement des donn√©es, pr√©sentent les avantages suivants: <br><br><ul><li>  Utilisation efficace de la m√©moire.  Travailler avec un flux n'implique pas de stocker en m√©moire de grandes quantit√©s de donn√©es charg√©es √† l'avance, avant qu'il ne devienne possible de les traiter. </li><li>  Gain de temps.  Les donn√©es re√ßues du flux peuvent √™tre trait√©es beaucoup plus rapidement que lorsque vous devez attendre qu'elles soient enti√®rement charg√©es pour commencer √† les traiter. </li></ul><br><h3>  <font color="#3AC1EF">‚ñç Exemple de travail avec des flux</font> </h3><br>  Un exemple traditionnel de travail avec des flux montre la lecture d'un fichier √† partir du disque. <br><br>  Tout d'abord, consid√©rez le code dans lequel les threads ne sont pas utilis√©s.  Le module standard Node.js <code>fs</code> vous permet de lire un fichier, apr√®s quoi il peut √™tre transf√©r√© via HTTP en r√©ponse √† une requ√™te re√ßue par un serveur HTTP: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(req, res)</span></span></span><span class="hljs-function"> </span></span>{ fs.readFile(__dirname + <span class="hljs-string"><span class="hljs-string">'/data.txt'</span></span>, (err, data) =&gt; {   res.end(data) }) }) server.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>)</code> </pre> <br>  La m√©thode <code>readFile()</code> utilis√©e ici vous permet de lire l'int√©gralit√© du fichier.  Une fois la lecture termin√©e, il appelle le rappel correspondant. <br><br>  La <code>res.end(data)</code> , appel√©e dans le rappel, envoie le contenu du fichier au client. <br><br>  Si la taille du fichier est importante, cette op√©ration prendra beaucoup de temps.  Voici le m√™me exemple r√©√©crit √† l'aide de flux: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http.createServer(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stream = fs.createReadStream(__dirname + <span class="hljs-string"><span class="hljs-string">'/data.txt'</span></span>) stream.pipe(res) }) server.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>)</code> </pre> <br>  Au lieu d'attendre le moment o√π le fichier est enti√®rement lu, nous commen√ßons √† transf√©rer ses donn√©es au client imm√©diatement apr√®s que la premi√®re partie de ces donn√©es est pr√™te pour l'envoi. <br><br><h3>  <font color="#3AC1EF">M√©thode MethodPipe ()</font> </h3><br>  Dans l'exemple pr√©c√©dent, nous avons utilis√© une construction de la forme <code>stream.pipe(res)</code> , dans laquelle la m√©thode de flux de fichiers <code>pipe()</code> est appel√©e.  Cette m√©thode prend les donn√©es de sa source et les envoie √† la destination. <br><br>  Il s'agit d'un flux repr√©sentant une source de donn√©es.  Dans ce cas, il s'agit du flux de fichiers envoy√© √† la r√©ponse HTTP. <br><br>  La valeur de retour de la m√©thode <code>pipe()</code> est le flux cible.  C'est tr√®s pratique, car cela vous permet de cha√Æner plusieurs appels √† la m√©thode <code>pipe()</code> : <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">src</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest1</span></span>)<span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest2</span></span>)</code> </pre> <br>  Cela √©quivaut √† une telle conception: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">src</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">dest1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">dest2</span></span>)</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçAPI Node.js qui utilise des flux</font> </h3><br>  Les threads sont un m√©canisme utile; par cons√©quent, de nombreux modules du noyau Node.js offrent des capacit√©s de threading standard.  Nous en √©num√©rons quelques-uns: <br><br><ul><li>  <code>process.stdin</code> - retourne un thread connect√© √† <code>stdin</code> . </li><li>  <code>process.stdout</code> - Retourne le thread connect√© √† <code>stdout</code> . </li><li>  <code>process.stderr</code> - retourne un thread connect√© √† <code>stderr</code> . </li><li>  <code>fs.createReadStream()</code> - cr√©e un flux lisible pour travailler avec un fichier. </li><li>  <code>fs.createWriteStream()</code> - cr√©e un flux inscriptible pour travailler avec un fichier. </li><li>  <code>net.connect()</code> - initie une connexion bas√©e sur le flux. </li><li>  <code>http.request()</code> - renvoie une instance de la classe <code>http.ClientRequest</code> qui donne acc√®s au flux en cours d'√©criture. </li><li>  <code>zlib.createGzip()</code> - compresse les donn√©es √† l'aide de l'algorithme <code>gzip</code> et les envoie au flux. </li><li>  <code>zlib.createGunzip()</code> - d√©compresse un flux <code>gzip</code> . </li><li>  <code>zlib.createDeflate()</code> - compresse les donn√©es en utilisant l'algorithme de <code>deflate</code> et les envoie au flux. </li><li>  <code>zlib.createInflate()</code> - d√©compresse un flux de <code>zlib.createInflate()</code> . </li></ul><br><h3>  <font color="#3AC1EF">‚ñçDivers types de flux</font> </h3><br>  Il existe quatre types de flux: <br><br><ul><li>  Un flux lisible est un flux √† partir duquel des donn√©es peuvent √™tre lues.  Vous ne pouvez pas √©crire de donn√©es dans un tel flux.  Lorsque des donn√©es arrivent dans un tel flux, elles sont mises en m√©moire tampon jusqu'√† ce que le consommateur de donn√©es commence √† les lire. </li><li>  Un flux d'√©criture ( <code>Writable</code> ) est un flux dans lequel vous pouvez envoyer des donn√©es.  Vous ne pouvez pas en lire les donn√©es. </li><li>  Flux duplex ( <code>Duplex</code> ) - dans ce flux, vous pouvez envoyer des donn√©es et les lire.  Il s'agit essentiellement d'une combinaison d'un flux de lecture et d'un flux d'√©criture. </li><li>  Transformer le flux ( <code>Transform</code> ) - ces flux sont similaires aux flux duplex, la diff√©rence est que ce qui vient √† l'entr√©e de ces flux transformera ce qui peut √™tre lu √† partir d'eux. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçCr√©er un flux de lecture</font> </h3><br>       ,    <code>stream</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Stream = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'stream'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> readableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Readable()</code> </pre> <br>      ,       : <br><br><pre> <code class="hljs cs">readableStream.push(<span class="hljs-string"><span class="hljs-string">'hi!'</span></span>) readableStream.push(<span class="hljs-string"><span class="hljs-string">'ho!'</span></span>)</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç   </font> </h3><br>           <code>Writable</code>     <code>_write()</code> .      : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Stream = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'stream'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Writable()</code> </pre> <br>     <code>_write()</code> : <br><br><pre> <code class="hljs coffeescript">writableStream._write = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(chunk, encoding, next)</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(chunk.toString())   next() }</code> </pre> <br>       ,   : <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">process</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.stdin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pipe</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">writableStream</span></span>)</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç     </font> </h3><br>       ,   ,    : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Stream = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'stream'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> readableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Readable() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writableStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stream.Writable() writableStream._write = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">chunk, encoding, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(chunk.toString())   next() } readableStream.pipe(writableStream) readableStream.push(<span class="hljs-string"><span class="hljs-string">'hi!'</span></span>) readableStream.push(<span class="hljs-string"><span class="hljs-string">'ho!'</span></span>) readableStream.push(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)</code> </pre> <br>  <code>readableStream.push(null)</code>     . <br><br>        ,   <code>readable</code> : <br><br><pre> <code class="hljs coffeescript">readableStream.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'readable'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(readableStream.read()) })</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç     </font> </h3><br>          <code>write()</code> : <br><br><pre> <code class="hljs pgsql">writableStream.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'hey!\n'</span></span>)</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç     ,    </font> </h3><br>         ,      ,     <code>end()</code> : <br><br><pre> <code class="hljs pgsql">writableStream.<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>()</code> </pre> <br>      .  ,      ,     . <br><br><h2> <font color="#3AC1EF">   MySQL  Node.js</font> </h2><br> MySQL        .   Node.js   ,     MySQL-,   ‚Äî    ,        . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mysqljs/mysql</a> .  ,     ,   12000   GitHub.      ,   MySQL-. <br><br><h3> <font color="#3AC1EF">‚ñç </font> </h3><br>       : <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> mysql</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç    </font> </h3><br>     : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mysql = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'mysql'</span></span>)</code> </pre> <br>    : <br><br><pre> <code class="hljs pgsql">const <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_password'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_database_name'</span></span> } const <span class="hljs-keyword"><span class="hljs-keyword">connection</span></span> = mysql.createConnection(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>)</code> </pre> <br>      : <br><br><pre> <code class="hljs javascript">connection.connect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while connecting to the DB'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> err } }</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç </font> </h3><br>     <code>options</code>    : <br><br><pre> <code class="hljs pgsql">const <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_user_password'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>: <span class="hljs-string"><span class="hljs-string">'the_mysql_database_name'</span></span> }</code> </pre> <br>        .    ‚Äî : <br><br><ul><li> <code>host</code> ‚Äî  ,    MySQL-,   ‚Äî <code>localhost</code> . </li><li> <code>port</code> ‚Äî   ,   ‚Äî <code>3306</code> . </li><li> <code>socketPath</code> ‚Äî     Unix    . </li><li> <code>debug</code> ‚Äî     ,     . </li><li> <code>trace</code> ‚Äî         ,     . </li><li> <code>ssl</code> ‚Äî    SSL-  . </li></ul><br><h3> <font color="#3AC1EF">‚ñç  SELECT</font> </h3><br>      SQL-   .       <code>query</code> ,     .     ‚Äî       ,   .         .          : <br><br><pre> <code class="hljs coffeescript">connection.query(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM todos'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, todos, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todos) })</code> </pre> <br>      ,       : <br><br><pre> <code class="hljs coffeescript">const id = <span class="hljs-number"><span class="hljs-number">223</span></span> connection.query(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM todos WHERE id = ?'</span></span>, [id], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, todos, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todos) })</code> </pre> <br>       ,    ,  : <br><br><pre> <code class="hljs coffeescript">const id = <span class="hljs-number"><span class="hljs-number">223</span></span> const author = <span class="hljs-string"><span class="hljs-string">'Flavio'</span></span> connection.query(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM todos WHERE id = ? AND author = ?'</span></span>, [id, author], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, todos, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todos) })</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç  INSERT</font> </h3><br>  <code>INSERT</code>      . ,     : <br><br><pre> <code class="hljs coffeescript">const todo = { thing: <span class="hljs-string"><span class="hljs-string">'Buy the milk'</span></span> author: <span class="hljs-string"><span class="hljs-string">'Flavio'</span></span> } connection.query(<span class="hljs-string"><span class="hljs-string">'INSERT INTO todos SET ?'</span></span>, todo, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, results, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error } })</code> </pre> <br>   ,    ,      <code>auto_increment</code> ,       <code>results.insertId</code> : <br><br><pre> <code class="hljs coffeescript">const todo = { thing: <span class="hljs-string"><span class="hljs-string">'Buy the milk'</span></span> author: <span class="hljs-string"><span class="hljs-string">'Flavio'</span></span> } connection.query(<span class="hljs-string"><span class="hljs-string">'INSERT INTO todos SET ?'</span></span>, todo, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error, results, fields)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'An error occurred while executing the query'</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> error }} const id = results.resultId <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(id) )</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç    </font> </h3><br>              ‚Äî    <code>end()</code> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>()</code> </pre> <br>         . <br><br><h2> <font color="#3AC1EF">      -</font> </h2><br>     Node.js         -. <br><br>    Node.js    .       ,     -,     <code>NODE_ENV</code> : <br><br><pre> <code class="hljs">NODE_ENV=production</code> </pre> <br>      .  Linux, ,   : <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> NODE_ENV=production</code> </pre> <br> , ,        <code>.bash_profile</code> (  Bash),            . <br><br>     ,      : <br><br><pre> <code class="hljs">NODE_ENV=production node app.js</code> </pre> <br>          Node.js.  <code>NODE_ENV</code>   <code>production</code>   : <br><br><ul><li>    . </li><li>       . </li></ul><br> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pug</a> ‚Äî     ,  Express,         ,   <code>NODE_ENV</code>     <code>production</code> .  Express,   ,     .  -  .      . <br><br> Express      . ,    ,    <code>NODE_ENV</code> : <br><br><pre> <code class="hljs coffeescript">app.configure(<span class="hljs-string"><span class="hljs-string">'development'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... }) app.configure(<span class="hljs-string"><span class="hljs-string">'production'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... }) app.configure(<span class="hljs-string"><span class="hljs-string">'production'</span></span>, <span class="hljs-string"><span class="hljs-string">'staging'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... })</code> </pre> <br> ,           : <br><br><pre> <code class="hljs coffeescript">app.configure(<span class="hljs-string"><span class="hljs-string">'development'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { app.use(express.errorHandler({ dumpExceptions: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, showStack: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })); }) app.configure(<span class="hljs-string"><span class="hljs-string">'production'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { app.use(express.errorHandler()) })</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç</font> </h3><br> ,   ,     Node.js    ,      . ,  ,        ,     Node.js,    - ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  Node.js. <br><br>  <b>Chers lecteurs!</b>      ,       Node.js,    ,      . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425667/">https://habr.com/ru/post/fr425667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425657/index.html">L'in√©vitabilit√© de la punition, l'efficacit√© des contr√¥les brusques</a></li>
<li><a href="../fr425659/index.html">La conception interactive ne doit pas √™tre compliqu√©e.</a></li>
<li><a href="../fr425661/index.html">22 conseils pour un d√©veloppeur Angular. Partie 1</a></li>
<li><a href="../fr425663/index.html">22 conseils pour un d√©veloppeur Angular. 2e partie</a></li>
<li><a href="../fr425665/index.html">Git: correction de bugs et correction de commits</a></li>
<li><a href="../fr425669/index.html">Guide de conception Web pour les non-concepteurs</a></li>
<li><a href="../fr425671/index.html">MBLT DEV 2018: Rapport Robot</a></li>
<li><a href="../fr425673/index.html">[Peter] Rencontre JUG.ru avec Venkat Subramaniam - Design Patterns √† la lumi√®re des expressions Lambda</a></li>
<li><a href="../fr425675/index.html">Loi Turing: la Californie interdit aux robots de clavardage de faire semblant d'√™tre des gens</a></li>
<li><a href="../fr425677/index.html">Jouets DARPA pr√©f√©r√©s depuis 60 ans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>