<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴🏻 ✌🏾 🛀🏼 Von Null bis "Aktionen bei Google" Held: Starten 🤹🏿 👩🏼‍🎨 ☸️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google Hackathon und alles, was Sie brauchen, um Ihre Anwendungen für einen Assistenten zu entwickeln. 


 Google hat einen Hackathon organisiert, der...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Von Null bis "Aktionen bei Google" Held: Starten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redmadrobot/blog/419773/"><img src="https://habrastorage.org/webt/ek/p5/kq/ekp5kqbvvl0p4mdidicbmgfw5b0.png" alt="Bild"><br><p>  Google Hackathon und alles, was Sie brauchen, um Ihre Anwendungen für einen Assistenten zu entwickeln. </p><br><p>  Google hat einen Hackathon organisiert, der sich der Actions On Google-Technologie widmet.  Dies ist eine gute Gelegenheit, um Erfahrungen zu sammeln und darüber nachzudenken, wie Sie mit der Erstellung der CUI (Conversation User Interface) für unsere Anwendungen beginnen können.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Aus diesem</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Grund haben</a> wir ein Team von zwei Android-Entwicklern zusammengestellt: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">shipa_o</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">raenardev</a> und designer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">comradeguest</a> und sind zur Teilnahme gegangen. </p><a name="habracut"></a><br><h2>  Was sind Aktionen bei Google? </h2><br><p>  Aktionen bei Google (AoG) ist eine Möglichkeit, Ihre Aktion dem Assistenten hinzuzufügen. <br>  Sie können dies mit 4 Werkzeugen tun: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inhaltsaktionen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheiben</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">App-Aktionen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fähigkeit für Google Assistant</a> . </li></ul><br><p>  Beim Hackathon haben wir eine Fertigkeit entwickelt - eine Anwendung, die die Fähigkeiten eines Assistenten erweitert, also werden wir dort aufhören. </p><br><p> Nach dem Appell „Ok Google.  Ich möchte mit <code>${_}</code> sprechen “, öffnet der Assistent die Fähigkeit, mit der der Benutzer einen Dialog führt: </p><br><img src="https://habrastorage.org/webt/l2/vw/es/l2vwesoe1sywaswq0_8bmgjhhga.jpeg" alt="Bild" width="50%"><br><h3>  Wie schreibe ich eine Fähigkeit? <br></h3><br><p>  Sie benötigen zwei Fähigkeiten: <br>  - Verständnis der Conversational User Interface (CUI), der Fähigkeit, sie zu entwerfen; <br>  - Fähigkeit, mit Natural Language Processing (NLP) zu arbeiten, z. B. Dialogflow. </p><br><h4>  Stufe 1: Design </h4><br><p>  Damit Ihre Fähigkeiten jemals einen Protein-Gesprächspartner haben, ist es besser, jetzt über die Zukunft nachzudenken.  Die Nachfrage wird diejenigen sein, die den Nutzungskontext berücksichtigen.  Dialogschnittstellen werden verwendet, wenn es möglich ist, lauter zu sprechen und mit Geräten bequemer und schneller mit Geräten zu interagieren als mit Händen, Augen und anderen Körperteilen. </p><br><p>  Die Sprachschnittstelle ist seriell.  Wenn es möglich ist, die gesamte Form der Bestellung auf einer Grafik anzuzeigen, und die Person selbst auswählt, was zuerst und dann was angezeigt werden soll, können Sie nur nacheinander Fragen stellen.  Um eine beliebte und bequeme Anwendung zu entwickeln, müssen Sie den Schnittpunkt zwischen den Anforderungen des Benutzers und der Fähigkeit zur Verwendung der Sprachschnittstelle (oder der Unfähigkeit, andere zu verwenden) ermitteln. </p><br><p>  Das erste, was mir in den Sinn kommt, ist ein Sprachassistent für Blinde, der bei der Lösung alltäglicher Probleme hilft.  Geben Sie beispielsweise eine Bestellung in einem Geschäft auf, rufen Sie ein Taxi und rufen Sie Verwandte an.  Das zweite ist ein sprechendes Rezeptbuch für Hausfrauen mit Händen in Mehl.  Drittens Spiele, in denen Sie etwas erklären müssen. </p><br><p>  Wir haben uns für einen einfachen entschieden und einen Roboter entwickelt, der Menschen bei guten Filmen berät.  Wir besiegen die Unvollkommenheit von Sprachsynthesizern: Unser Assistent gibt nicht einmal vor, ein Mann zu sein, und betont in jeder Hinsicht seine lebendige elektronische Persönlichkeit. </p><br><p>  Google hat hervorragende <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Richtlinien</a> für die Entwicklung interaktiver Benutzeroberflächen verfasst.  Und wir werden darüber sprechen, wie wir unser Gespräch als Erstgeborener gestaltet haben. </p><br><p>  <b>1. Aufruf</b> </p><br><p>  Zuerst müssen Sie einen Assistenten anrufen.  Der Aufruf kann explizit (expliziter Aufruf) und indirekt (impliziter Aufruf) sein.  Menschen werden explizit behandelt, wenn sie die Anwendung bereits kennen.  Indirekt kann der Google-Assistent in einer bestimmten Situation eine geeignete Anwendung empfehlen.  Richtig gewählte Optionen für indirekte Attraktivität - wie die richtigen Keywords in der kontextbezogenen Werbung - sind nur „menschlicher“. </p><br><div class="scrollable-table"><table><tbody><tr><td>  Art der Beschwerde </td><td><p>  Beschreibung </p><br></td><td>  Beispiel </td></tr><tr><td>  Expliziter Aufruf </td><td>  Mit dem Namen des Assistenten </td><td><p><br>  Ok Google, ich möchte mit dem Red Passionate Movie Robot sprechen. <br>  Nennen Sie mich einen Filmroboter. <br>  Wo ist rot und leidenschaftlich dort? </p><br></td></tr><tr><td><br>  Impliziter Aufruf </td><td><br>  Im Zusammenhang mit dem Zeitpunkt, an dem Sie einen Assistenten benötigen </td><td><br>  Ok Google, rate mir einen Film. <br>  Ich möchte eine lustige Komödie sehen. <br>  Was für einen Film mit einem Mädchen? </td></tr></tbody></table></div><br><p>  Es ist wichtig, dass indirekte Anrufe nicht zu allgemein sind.  Wie allgemeine Keywords in der Kontextwerbung verhindern sie nur, dass Sie die richtige Anwendung finden, und senken die Bewertung der Anwendung bei der Ausgabe des Assistenten. </p><br><p>  Anrufe können eine tiefe Verknüpfung zu einzelnen Funktionen des Sprachassistenten enthalten.  Zum Beispiel beginnt unser Filmroboter normalerweise die Kommunikation mit der Tatsache, dass er einer Person die Wahl eines Genres anbietet.  Wenn er jedoch zu einem indirekten Aufruf aufgefordert wird: "Ich möchte eine lustige Komödie sehen", ist es logisch, einen Dialog mit dem Angebot eines garantiert guten Films des genannten Genres zu beginnen. </p><br><p>  <b>2. Erste Begrüßung</b> </p><br><p>  Die erste Begrüßung ist das, was die Anwendung der Person unmittelbar nach dem Anruf mitteilt. <br>  Zuerst müssen Sie den Benutzer wissen lassen, dass der Assistent bereits hier ist: </p><br><blockquote>  Hallo, eine Proteinform des Lebens.  Ich bin ein roter leidenschaftlicher Filmroboter.  Der Zweck meiner Existenz ist es, biologische Filme über gute Filme zu beraten. </blockquote><p>  Und dann - schlagen Sie vor, was als nächstes zu tun ist.  Unser Roboter sucht nach Filmen nach Genre, daher schlagen wir vor, mit welcher Anfrage eine Person noch weiter gehen kann: <br>  Was willst du sehen: vielleicht Comedy, Action oder Horror? </p><br><p>  Neue und erfahrene Benutzer können auf viele Arten begrüßt werden.  Wenn eine Person zum ersten Mal mit Ihrem Assistenten spricht, können Sie ein wenig über sich selbst sprechen.  Wenn nicht der erste - ein langer Gruß wird ihn nerven.  So können Sie sofort zur Sache kommen: </p><br><div class="scrollable-table"><table><tbody><tr><td>  Ersten Mal </td><td><p>  Wiederholt </p><br></td></tr><tr><td>  Hallo, eine Proteinform des Lebens.  Ich bin ein roter leidenschaftlicher Filmroboter.  Der Zweck meiner Existenz ist es, biologische Filme über gute Filme zu beraten.  Was willst du sehen: vielleicht Comedy, Action oder Horror? </td><td><br>  Grüße, Mann!  Für welches Genre interessierst du dich? </td></tr></tbody></table></div><br><p>  <b>3. Menschliches Gespräch</b> </p><br><p>  Bringen Sie Ihrem Assistenten bei, die natürliche Sprache zu verstehen und das Gespräch aufrechtzuerhalten.  Der einfachste Weg, dies zu tun, besteht darin, bereits vor Beginn der Entwicklung mit Personen aus der Zielgruppe zu kommunizieren.  Darüber hinaus ist es mündlich und nicht schriftlich wünschenswert, da die umgangssprachliche Sprache seltener als mündlich ist.  Spielen Sie die Rolle des Roboters und bitten Sie den Gesprächspartner, sich vorzustellen, dass er Ihre zukünftige Anwendung verwendet.  Zeichnen Sie alle Dialoge auf dem Rekorder auf und entschlüsseln Sie sie anschließend.  Auf diese Weise können Sie ein typisches Konversationsdiagramm entwerfen und herausfinden, wo Zweige angezeigt werden können. </p><br><h4>  Stufe 2: Entwicklung </h4><br><p>  Es gibt verschiedene Möglichkeiten, Ihre Aktion für einen Assistenten zu entwickeln: </p><br><ul><li>  Mit Dialogflow. </li><li>  Mit Aktionen im Google SDK. </li><li>  Text kann unabhängig verarbeitet werden - beispielsweise wenn Sie eine eigene Lösung für die Verarbeitung natürlicher Sprache haben (NLP - Natural Language Processing). </li></ul><br><p>  Das Folgende ist die Interaktion eines Assistenten mit Ihren Fähigkeiten. <br>  Der Dialog sieht ungefähr so ​​aus: </p><br><ol><li><p>  Der Assistent übersetzt die Rede in Text und sendet sie an Ihre Aktion. </p><br></li><li><p>  Der Text wird auf eine der oben genannten Arten verarbeitet.  In diesem Diagramm über Dialogflow. </p><br></li><li><p>  Dialogflow definiert die Absicht (die spezifische Absicht des Benutzers) und empfängt <br>  daraus Entitäten (Parameter). </p><br></li><li><p>  (Optional) Dialogflow kann den entsprechenden Webhook aufrufen, die Daten im Backend verarbeiten und eine Antwort erhalten. </p><br></li><li><p>  Dialogflow bildet die Antwort. </p><br></li><li><p>  Der Assistent gibt die Antwort, schaltet das Mikrofon ein und hört zu, was der Benutzer sagt. </p><br></li></ol><br><img src="https://habrastorage.org/webt/ib/us/uf/ibusuffx_dlpg1eewj7ev4xcpzc.png" alt="Bild"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Assistent Aktionsdiagramm</a> </p><br><h4>  Dialogfluss </h4><br><p>  Wir werden die Grundlagen von Dialogflow nicht näher erläutern - Google hat gute Tutorial-Videos veröffentlicht. </p><br><ol><li>  Absichten - über das Erkennen von Absichten, wie genau Dialogflow versteht, was der Benutzer fragt oder welche Aktion er ausführen möchte. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entitäten</a> - über das Erkennen von Parametern innerhalb einer Phrase.  Wenn Sie beispielsweise Filme empfehlen, ist dies ein bestimmtes Genre. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dialogsteuerung</a> - Informationen zum Kontextmechanismus (siehe unten) und zur Erfüllung: Informationen zum Verarbeiten der Benutzeranforderung selbst durch Zugriff auf Ihr Backend und zum Zurückgeben von etwas Interessanterem als einer Textantwort. </li></ol><br><p>  Wir gehen davon aus, dass Sie das Video bereits angesehen und die Dialogflow-Konsole herausgefunden haben.  Schauen wir uns die Probleme an, die in den einzelnen Teilen des Implementierungsprozesses aufgetreten sind, und was interessant ist, kann festgestellt werden. </p><br><p>  Denken Sie auch an die Regeln für den Aufbau eines guten Dialogs, wenn Sie mit der Implementierung fortfahren. Dies wirkt sich auf die Anzahl der Absichten, die Menge der Entitäten und deren Verwendung in Antworten, die Verwendung von Kontexten und alles andere aus. </p><br><h4>  Absichten </h4><br><p>  Es gibt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Empfehlungen</a> - eine detailliertere Begrüßung für den neuen Benutzer und für den Rest eine präzisere Begrüßung.  Wie implementiere ich das? </p><br><p>  In der Dialogflow-Konsole kann diese Logik nicht ermittelt werden.  Dies kann innerhalb der Erfüllung aus willkommenen Gründen erfolgen.  Mit anderen Worten, Sie müssen dies mit Ihren Händen tun. </p><br><p>  Dies gilt auch für die Fehlerbehandlung.  Zum Beispiel können Sie zum ersten Mal einfach erneut fragen und zum zweiten Mal feststellen, welche Art von Antwort Sie vom Benutzer erwarten. </p><br><p>  Sie tun dies nicht durch Antworten - es wird eine zufällige Antwort ausgewählt.  Sie können es durch Erfüllung oder etwas kniffliger tun, indem Sie es an den Kontext binden (mehr dazu weiter unten). </p><br><h4>  Entitäten </h4><br><p>  <b>"Automatisierte Erweiterung zulassen" und sys.Any</b> </p><br><p>  Wenn der Ausdruck in seiner Struktur ähnlich ist, kann beim Aktivieren von "Automatisierte Erweiterung zulassen" als anerkannte Entität etwas hineingelangen, das immer noch nicht mit Gewinn verarbeitet werden kann. </p><br><p>  Beispielsweise erkennt Ihre Anwendung den Ausdruck "Schlagen Sie mir etwas von &lt;genre&gt; vor" für Filmtipps.  Wenn Sie sagen "Raten Sie mir etwas vom Essen", dann erhalten Sie als Parameter "Genre" nicht das, was Sie erwarten würden.  Dies ist sinnvoll, wenn die Genres, die Sie im Backend ständig dynamisch aktualisieren, und die Antwort des Benutzers dort verarbeitet werden, Sie jedoch keine Zeit haben, die Entität zu aktualisieren. </p><br><p>  Eine andere Lösung ist die Verwendung von sys.Any.  In diesem Fall wird er alles übermitteln, was nach dem erwarteten Entwurf war, was der gesamte Vorschlag sein kann.  Dies bietet mehr Möglichkeiten als eine automatisierte Erweiterung, aber es gibt auch mehr Nachteile. </p><br><p>  <b>Singular und Plural, Fälle, Geschlecht</b> </p><br><p>  Lassen Sie uns ein einfaches Beispiel finden.  Wir werden über Ihre Lieblingsfrüchte sprechen und die Anwendung wird antworten, wie cool sie sind.  In den folgenden Beispielen ist P der Benutzer, A ist unsere Aktion. </p><br><blockquote>  P: Ananas sind am leckersten. <br>  A: Ja, Ananas sind die coolsten Früchte! <br></blockquote><p>  In diesem Beispiel haben wir Entität: Ananas <br>  Aber was ist, wenn der Benutzer "Ananas" sagt?  Wir können ein Synonym hinzufügen. </p><br><blockquote>  P: Ich mochte die Ananas. <br>  A: Ja, Ananas sind die coolsten Früchte! </blockquote><p>  Der Standardwert ist das Referenzformular - d. H.  es ist die ursprüngliche Form, nicht ihre Synonyme.  Deshalb sagt die Anwendung nicht "Ja, Ananas ist die coolste Frucht!" </p><br><p>  Es ist auch eine Überlegung wert, wenn Sie Antworten schreiben.  Wenn wir die Antwort „Ja, $ Obst ist das coolste!“ Hätten, würden wir Folgendes erhalten: </p><br><blockquote>  P: Ich mochte die Ananas. <br>  A: Ja, Ananas sind die coolsten! </blockquote><p>  Und vergessen Sie nicht die Fälle: </p><br><blockquote>  P: Ich will Drama <br>  A: Hier ist ein cooles Drama ... <br></blockquote><p>  Daher sollten Sie sowohl die Anfangswerte der Entität als auch die Antworten in einer konsistenten Form schreiben.  Zum Beispiel können wir alle ursprünglichen Entitätsformen für Früchte im Plural und Synonyme in jedem machen. </p><br><p>  Wir werden im Nominativ Genres auf Russisch machen, aber in beliebiger Anzahl (Drama, Horror). </p><br><p>  Wenn wir zu den Antworten kommen, schreiben wir nicht "Ja, $ Obst ist die coolste Frucht!"  und "Ja, $ Obst ist das coolste!"  - Früchte sind immer im Plural. </p><br><p>  Bei der russischen Sprache lohnt es sich, noch weiter zu gehen und darüber nachzudenken, wie man eine vereinbarte Antwort schreibt - wir haben nicht nur Fälle (Drama / Drama), sondern auch Geschlecht (Drama / Western). </p><br><blockquote>  P: Ich möchte einen Western <br>  A: Hier ist ein cooler Western ... <br></blockquote><br><blockquote>  P: Ich möchte einen Western <br>  A: Westlich?  Ok, hier ist ein cooler Film ... </blockquote><p>  Aber wie kann man genau das Entitätsformular zurückgeben, das der Benutzer gesagt hat? </p><br><p>  Im Fall von Genres könnte das Synonym für "Science Fiction" "Aliens" sein.  Wenn der Benutzer dann "Aliens" sagt, wird "Science Fiction" als Parameter zurückgegeben. <br>  Wenn wir die Entität in der Form erhalten möchten, in der der Benutzer sie angegeben hat, lohnt es sich, den Wert von $ entity.original zu wählen </p><br><img src="https://habrastorage.org/webt/vf/eq/9f/vfeq9fm3m3dbgzmmyik5qxvvd0q.png" alt="Bild"><br><p>  Dann kann es jedoch zu Problemen mit der Inkonsistenz der Anzahl und (insbesondere) der Inkonsistenz der Fälle kommen.  Ist es wirklich notwendig?  Wenn ja, erstellen Sie eine Entität für Singular, Plural und Groß- / Kleinschreibung.  Die Antworten müssen auch mit dem von ihnen verwendeten Entitätsformular übereinstimmen. </p><br><h4>  Kontexte </h4><br><p>  Vielleicht damit die meisten Probleme. </p><br><p>  <b>Eingabekontext</b> </p><br><p>  Dies ist der Kontext, an den eine bestimmte Absicht gebunden ist.  Mehrere Absichten können auf dieselbe Phrase reagieren, und die mit dem aktiven Eingabekontext wird höchstwahrscheinlich funktionieren. <br>  So können Sie beispielsweise einer bestimmten Frage eine Ja / Nein-Antwort hinzufügen, die in Dialogflow mithilfe der Folgeabsicht erfolgt </p><br><p>  <b>Ausgabekontext</b> </p><br><p>  Dies ist der Kontext, der aktiviert wird, wenn die Absicht ausgelöst wird.  Auf diese Weise werden Kontexte in der Dialogflow-Konsole aktiviert (dies kann auch in Erfüllung erfolgen).  Wir geben die Anzahl der Umdrehungen des Dialogs an, in denen er aktiv ist, und nach dem Zurücksetzen des Zählers oder nach 20 Minuten wird er deaktiviert.  Dies bedeutet, dass die Daten in diesem Kontext nicht mehr verfügbar sind und Absichten, für die sie eingegeben werden, nicht funktionieren. </p><br><p>  Ein weiterer Trick ist mit demselben verbunden: Sie können einen Kontext mit einer Absicht aktivieren und manuell mit einer anderen deaktivieren, indem Sie ihn einfach als Ausgabekontext für die zweite Absicht mit der Anzahl der Antworten 0 angeben. </p><br><p>  Wenn Sie keinen Code in Erfüllung schreiben möchten, können Sie auf diese Weise eine interessante Logik implementieren, z. B. den Kontext als Zähler verwenden und die Fehlerbehandlung implementieren, wenn der Assistent den Benutzer nicht versteht. </p><br><h4>  Dialogflow-Tipps </h4><br><ul><li><p>  Es ist nicht erforderlich, die Seite mit der Assistentenvorschau neu zu starten. Wenn Sie Änderungen am Dialogflow-Agenten vorgenommen haben, können Sie warten, bis das Training abgeschlossen ist, und die nicht erkannte Phrase im Simulator sofort wiederholen.  Dialogflow kann als Backend betrachtet werden, auf das sich ein Assistent bezieht. </p><br></li><li><p>  Verwenden Sie vorgefertigte Agenten - dort können Sie sehen, wie Sie ein typisches Szenario implementieren. </p><br></li><li><p>  Seien Sie vorsichtig mit dem Abschnitt Small Talk.  Durch die Verwendung wird das Mikrofon am Ende des Gesprächs nicht ausgeschaltet, und solche Antworten enthalten normalerweise keine Handlungsaufforderung.  Sie leiten den Benutzer nicht zur nächsten Dialogrunde, und es ist ihm nicht ganz klar, was weiter gesagt werden soll.  Aus diesem Grund können Sie die Überprüfung mit hoher Wahrscheinlichkeit nicht bestehen.  Es ist besser, separate Absichten dafür zu machen, wenn Sie sie in den Dialog eingeben können. </p><br></li><li><p>  Bearbeiten Sie nicht dieselbe Absicht gleichzeitig.  Jetzt wird die gleichzeitige Arbeit mehrerer Personen nicht unterstützt - es ist nicht bekannt, wessen Änderungen überschrieben werden. </p><br></li><li><p>  Wenn es notwendig ist, die Arbeit mit Absicht zu parallelisieren, kann sie in separaten Projekten ausgeführt werden. Wählen Sie dann einfach die erforderlichen aus und übertragen Sie sie.  Importieren und exportieren Sie Entitäten auch in json / xml und importieren / exportieren Sie sie absichtlich. </p><br></li><li><p>  Es lohnt sich sofort zu berücksichtigen, dass Sie Aktionen für eine bestimmte Sprache schreiben.  Das Schreiben von Antworten auf Russisch hat zusätzliche Nuancen.  Die Lokalisierung der Aktion scheint daher schwieriger zu sein als mit der Benutzeroberfläche der mobilen Anwendung. </p><br></li><li><p>  Berücksichtigen Sie die Entwurfsregeln für Sprachschnittstellen - sie wirken sich nicht nur auf die Replikate aus, sondern auch auf die gesamte Struktur.  Sie bauen einen Dialog auf, daher sollte jede Antwort einen Aufruf zum Handeln hinterlassen, damit der Benutzer versteht, was er sagen soll. </p><br></li><li><p>  Wenn alles fertig ist und Sie mit dem Testen beginnen, haben Sie keine Angst mehr, einzelne Zweige des Dialogs oder der Frageformulare aufzugeben.  Vielleicht werden Sie in der Testphase verstehen, wie Sie Absichten verbinden und was zur Vereinfachung der Verwendung fehlt. </p><br></li></ul><br><h4>  Serververbindung </h4><br><p>  Um den Server zu verbinden, müssen Sie Fulfillment verwenden.  Hierfür gibt es zwei Möglichkeiten: </p><br><ul><li>  <strong>Webhook-Client</strong> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Viele</a> Sprachen werden unterstützt. </li><li>  <strong>Inline-Editor</strong> zu Cloud-Funktionen für Firebase (node.js). </li></ul><br><p>  Betrachten wir den einfachsten - den Inline-Editor. </p><br><p>  Wir geben nicht vor, ein Experte für node.js zu sein. Das Beheben von Fehlern in Kommentaren ist willkommen. </p><br><p>  Es ist wichtig, auf die Version der Dialogflow-API zu achten. <br>  Neueste Version v2.  Alles, was für Version v1 geschrieben wurde, funktioniert nicht damit. <br>  Lesen Sie hier mehr über Migration. </p><br><p>  Nützliche Links: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentations- und Bibliotheksquellcode für die Arbeit mit Dialogflow-Fulfillment</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erste Schritte mit der Dialogflow-Erfüllung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiele</a> </li><li>  Protokolle können hier angezeigt werden: <a href="">Gehen Sie zur Firebase-Konsole neben der Schaltfläche Bereitstellen</a> </li></ul><br><h4>  Analysieren Sie die Standardvorlage </h4><br><div class="spoiler">  <b class="spoiler_title">Wenn Sie den Abschnitt Erfüllung öffnen, wird der folgende Code in der Datei / Registerkarte `index.js` angezeigt:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">'use strict'; const functions = require('firebase-functions'); const {WebhookClient} = require('dialogflow-fulfillment'); const {Card, Suggestion} = require('dialogflow-fulfillment'); process.env.DEBUG = 'dialogflow:debug'; // enables lib debugging statements exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { const agent = new WebhookClient({ request, response }); console.log('Dialogflow Request headers: ' + JSON.stringify(request.headers)); console.log('Dialogflow Request body: ' + JSON.stringify(request.body)); function welcome(agent) { agent.add(`Welcome to my agent!`); } function fallback(agent) { agent.add(`I didn't understand`); agent.add(`I'm sorry, can you try again?`); } // // Uncomment and edit to make your own intent handler // // uncomment `intentMap.set('your intent name here', yourFunctionHandler);` // // below to get this function to be run when a Dialogflow intent is matched // function yourFunctionHandler(agent) { // agent.add(`This message is from Dialogflow's Cloud Functions for Firebase editor!`); // agent.add(new Card({ // title: `Title: this is a card title`, // imageUrl: 'https://developers.google.com/actions/images/badges/XPM_BADGING_GoogleAssistant_VER.png', // text: `This is the body text of a card. You can even use line\n breaks and emoji! `, // buttonText: 'This is a button', // buttonUrl: 'https://assistant.google.com/' // }) // ); // agent.add(new Suggestion(`Quick Reply`)); // agent.add(new Suggestion(`Suggestion`)); // agent.setContext({ name: 'weather', lifespan: 2, parameters: { city: 'Rome' }}); // } // // Uncomment and edit to make your own Google Assistant intent handler // // uncomment `intentMap.set('your intent name here', googleAssistantHandler);` // // below to get this function to be run when a Dialogflow intent is matched // function googleAssistantHandler(agent) { // let conv = agent.conv(); // Get Actions on Google library conv instance // conv.ask('Hello from the Actions on Google client library!') // Use Actions on Google library // agent.add(conv); // Add Actions on Google library responses to your agent's response // } // // See https://github.com/dialogflow/dialogflow-fulfillment-nodejs/tree/master/samples/actions-on-google // // for a complete Dialogflow fulfillment library Actions on Google client library v2 integration sample // Run the proper function handler based on the matched Dialogflow intent name let intentMap = new Map(); intentMap.set('Default Welcome Intent', welcome); intentMap.set('Default Fallback Intent', fallback); // intentMap.set('your intent name here', yourFunctionHandler); // intentMap.set('your intent name here', googleAssistantHandler); agent.handleRequest(intentMap); });</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Und solche Abhängigkeiten in der Datei / Registerkarte `package.json`:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{ "name": "dialogflowFirebaseFulfillment", "description": "This is the default fulfillment for a Dialogflow agents using Cloud Functions for Firebase", "version": "0.0.1", "private": true, "license": "Apache Version 2.0", "author": "Google Inc.", "engines": { "node": "~6.0" }, "scripts": { "start": "firebase serve --only functions:dialogflowFirebaseFulfillment", "deploy": "firebase deploy --only functions:dialogflowFirebaseFulfillment" }, "dependencies": { "actions-on-google": "2.0.0-alpha.4", "firebase-admin": "^4.2.1", "firebase-functions": "^0.5.7", "dialogflow": "^0.1.0", "dialogflow-fulfillment": "0.3.0-beta.3" } }</code> </pre> </div></div><br><p>  Aktualisieren Sie zunächst die Alpha- und Beta-Abhängigkeiten auf die neuesten stabilen. </p><br><div class="spoiler">  <b class="spoiler_title">Hier sind die aktuellsten Versionen.</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{ "dependencies": { "actions-on-google": "^2.2.0", "firebase-admin": "^5.2.1", "firebase-functions": "^0.6.2", "dialogflow": "^0.6.0", "dialogflow-fulfillment": "^0.5.0" } }</code> </pre> </div></div><br><p>  Und jetzt schauen wir uns den Code genauer an. </p><br><div class="spoiler">  <b class="spoiler_title">Oben ist das Importieren von Abhängigkeiten abgeschlossen</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// Cloud Functions  Firebase library const functions = require('firebase-functions'); //       const {WebhookClient} = require('dialogflow-fulfillment'); //       const {Card, Suggestion} = require('dialogflow-fulfillment');</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Der springende Punkt bei der Erfüllung ist das Überschreiben des Rückrufs - ein "dialogflowFirebaseFulfillment"</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { console.log('Dialogflow Request headers: ' + JSON.stringify(request.headers)); console.log('Dialogflow Request body: ' + JSON.stringify(request.body)); //   . const agent = new WebhookClient({ request, response }); //   let result = request.body.queryResult; //  action  entities https://dialogflow.com/docs/actions-and-parameters let action = result.action; let parameters = result.parameters; //    https://dialogflow.com/docs/contexts let outputContexts = result.outputContexts; //       let intentRequest = request.body.originalDetectIntentRequest; });</code> </pre> </div></div><br><p>  Dieser Rückruf wird für diejenigen Absichten aufgerufen, für die Sie die vollständige Erfüllung aktivieren. </p><br><div class="spoiler">  <b class="spoiler_title">Definieren Sie nun die Antwort auf die Absicht neu</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { const agent = new WebhookClient({ request, response }); function welcome(agent) { //   agent.add(`Welcome to my agent!`); } function fallback(agent) { agent.add(`I didn't understand`); agent.add(`I'm sorry, can you try again?`); } //   ,  : // key -   intent-. // value -   ,   . let intentMap = new Map(); intentMap.set('Default Welcome Intent', welcome); intentMap.set('Default Fallback Intent', fallback); agent.handleRequest(intentMap); });</code> </pre> </div></div><br><p>  Gleichzeitig ersetzt der Code die Absichtsantwort aus dem Abschnitt "Antworten" vollständig. <br>  Antworten werden nur aufgerufen, wenn der Rückruf fehlschlägt, sodass Sie dort eine Fehlerbehandlung durchführen können. </p><br><p>  Wir entfernen die Intent-Verarbeitungsfunktionen aus dem Rückruf. <br>  Die Begrüßungs- und Fallback-Funktionen befinden sich im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abschluss</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Um sie aus dem Rückruf zu entfernen, müssen Sie die Übertragung des Kontexts der Funktion und der Parameter über `bind` hinzufügen</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { const agent = new WebhookClient({ request, response }); let intentMap = new Map(); //  set  Map.      intentMap .set('Default Welcome Intent', welcome.bind(this, agent)) .set('Default Fallback Intent', fallback.bind(this, agent)); agent.handleRequest(intentMap); }); function welcome(agent) { agent.add(`Welcome to my agent!`); } function fallback(agent) { //   2   add    agent.add([ `I didn't understand`, `I'm sorry, can you try again?` ]); }</code> </pre> </div></div><br><p> ,     ,       Google Assistant.  ,       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419773/">https://habr.com/ru/post/de419773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419763/index.html">Beispiele für die Berechnung des "Verfügbarkeitsfaktors" für Netzwerkgeräte</a></li>
<li><a href="../de419765/index.html">Der Kurs "Web-Programmiersprachen" (basierend auf Ruby) von MSTU. N. E. Bauman auf dem Technostream-Kanal</a></li>
<li><a href="../de419767/index.html">Der Wikipedia-Ersteller beantwortet Fragen: Programmieren, Schlafen, Bücher, Tipps fürs Leben</a></li>
<li><a href="../de419769/index.html">WireGuard wird zum Linux-Kernel "kommen" - warum?</a></li>
<li><a href="../de419771/index.html">Fintech Digest: Die Zentralbank beschleunigt die Erfassung von Kundenbiometrien, Kryptowährungen fallen und der Markt für das Internet der Dinge wächst</a></li>
<li><a href="../de419775/index.html">Meine Version des „Geräts für klare Träume“ ist eine kurze Geschichte und Beschreibung der ersten Version</a></li>
<li><a href="../de419777/index.html">Wie man NNN-Server in den Niederlanden verkauft und nicht mit bloßer Begeisterung zurückgelassen wird: Verkaufsgeheimnisse</a></li>
<li><a href="../de419779/index.html">Die gewachsenen Lungen wurden erfolgreich einem Schwein transplantiert, nach 5 Jahren sind Versuche am Menschen möglich</a></li>
<li><a href="../de419781/index.html">SpaceX veranstaltete den ersten Mars-Workshop</a></li>
<li><a href="../de419783/index.html">Mensch gegen Maschine: Eine neue Ethik für Cybersicherheit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>