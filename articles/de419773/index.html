<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö¥üèª ‚úåüèæ üõÄüèº Von Null bis "Aktionen bei Google" Held: Starten ü§πüèø üë©üèº‚Äçüé® ‚ò∏Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google Hackathon und alles, was Sie brauchen, um Ihre Anwendungen f√ºr einen Assistenten zu entwickeln. 


 Google hat einen Hackathon organisiert, der...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Von Null bis "Aktionen bei Google" Held: Starten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redmadrobot/blog/419773/"><img src="https://habrastorage.org/webt/ek/p5/kq/ekp5kqbvvl0p4mdidicbmgfw5b0.png" alt="Bild"><br><p>  Google Hackathon und alles, was Sie brauchen, um Ihre Anwendungen f√ºr einen Assistenten zu entwickeln. </p><br><p>  Google hat einen Hackathon organisiert, der sich der Actions On Google-Technologie widmet.  Dies ist eine gute Gelegenheit, um Erfahrungen zu sammeln und dar√ºber nachzudenken, wie Sie mit der Erstellung der CUI (Conversation User Interface) f√ºr unsere Anwendungen beginnen k√∂nnen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Aus diesem</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Grund haben</a> wir ein Team von zwei Android-Entwicklern zusammengestellt: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">shipa_o</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">raenardev</a> und designer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">comradeguest</a> und sind zur Teilnahme gegangen. </p><a name="habracut"></a><br><h2>  Was sind Aktionen bei Google? </h2><br><p>  Aktionen bei Google (AoG) ist eine M√∂glichkeit, Ihre Aktion dem Assistenten hinzuzuf√ºgen. <br>  Sie k√∂nnen dies mit 4 Werkzeugen tun: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inhaltsaktionen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheiben</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">App-Aktionen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">F√§higkeit f√ºr Google Assistant</a> . </li></ul><br><p>  Beim Hackathon haben wir eine Fertigkeit entwickelt - eine Anwendung, die die F√§higkeiten eines Assistenten erweitert, also werden wir dort aufh√∂ren. </p><br><p> Nach dem Appell ‚ÄûOk Google.  Ich m√∂chte mit <code>${_}</code> sprechen ‚Äú, √∂ffnet der Assistent die F√§higkeit, mit der der Benutzer einen Dialog f√ºhrt: </p><br><img src="https://habrastorage.org/webt/l2/vw/es/l2vwesoe1sywaswq0_8bmgjhhga.jpeg" alt="Bild" width="50%"><br><h3>  Wie schreibe ich eine F√§higkeit? <br></h3><br><p>  Sie ben√∂tigen zwei F√§higkeiten: <br>  - Verst√§ndnis der Conversational User Interface (CUI), der F√§higkeit, sie zu entwerfen; <br>  - F√§higkeit, mit Natural Language Processing (NLP) zu arbeiten, z. B. Dialogflow. </p><br><h4>  Stufe 1: Design </h4><br><p>  Damit Ihre F√§higkeiten jemals einen Protein-Gespr√§chspartner haben, ist es besser, jetzt √ºber die Zukunft nachzudenken.  Die Nachfrage wird diejenigen sein, die den Nutzungskontext ber√ºcksichtigen.  Dialogschnittstellen werden verwendet, wenn es m√∂glich ist, lauter zu sprechen und mit Ger√§ten bequemer und schneller mit Ger√§ten zu interagieren als mit H√§nden, Augen und anderen K√∂rperteilen. </p><br><p>  Die Sprachschnittstelle ist seriell.  Wenn es m√∂glich ist, die gesamte Form der Bestellung auf einer Grafik anzuzeigen, und die Person selbst ausw√§hlt, was zuerst und dann was angezeigt werden soll, k√∂nnen Sie nur nacheinander Fragen stellen.  Um eine beliebte und bequeme Anwendung zu entwickeln, m√ºssen Sie den Schnittpunkt zwischen den Anforderungen des Benutzers und der F√§higkeit zur Verwendung der Sprachschnittstelle (oder der Unf√§higkeit, andere zu verwenden) ermitteln. </p><br><p>  Das erste, was mir in den Sinn kommt, ist ein Sprachassistent f√ºr Blinde, der bei der L√∂sung allt√§glicher Probleme hilft.  Geben Sie beispielsweise eine Bestellung in einem Gesch√§ft auf, rufen Sie ein Taxi und rufen Sie Verwandte an.  Das zweite ist ein sprechendes Rezeptbuch f√ºr Hausfrauen mit H√§nden in Mehl.  Drittens Spiele, in denen Sie etwas erkl√§ren m√ºssen. </p><br><p>  Wir haben uns f√ºr einen einfachen entschieden und einen Roboter entwickelt, der Menschen bei guten Filmen ber√§t.  Wir besiegen die Unvollkommenheit von Sprachsynthesizern: Unser Assistent gibt nicht einmal vor, ein Mann zu sein, und betont in jeder Hinsicht seine lebendige elektronische Pers√∂nlichkeit. </p><br><p>  Google hat hervorragende <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Richtlinien</a> f√ºr die Entwicklung interaktiver Benutzeroberfl√§chen verfasst.  Und wir werden dar√ºber sprechen, wie wir unser Gespr√§ch als Erstgeborener gestaltet haben. </p><br><p>  <b>1. Aufruf</b> </p><br><p>  Zuerst m√ºssen Sie einen Assistenten anrufen.  Der Aufruf kann explizit (expliziter Aufruf) und indirekt (impliziter Aufruf) sein.  Menschen werden explizit behandelt, wenn sie die Anwendung bereits kennen.  Indirekt kann der Google-Assistent in einer bestimmten Situation eine geeignete Anwendung empfehlen.  Richtig gew√§hlte Optionen f√ºr indirekte Attraktivit√§t - wie die richtigen Keywords in der kontextbezogenen Werbung - sind nur ‚Äûmenschlicher‚Äú. </p><br><div class="scrollable-table"><table><tbody><tr><td>  Art der Beschwerde </td><td><p>  Beschreibung </p><br></td><td>  Beispiel </td></tr><tr><td>  Expliziter Aufruf </td><td>  Mit dem Namen des Assistenten </td><td><p><br>  Ok Google, ich m√∂chte mit dem Red Passionate Movie Robot sprechen. <br>  Nennen Sie mich einen Filmroboter. <br>  Wo ist rot und leidenschaftlich dort? </p><br></td></tr><tr><td><br>  Impliziter Aufruf </td><td><br>  Im Zusammenhang mit dem Zeitpunkt, an dem Sie einen Assistenten ben√∂tigen </td><td><br>  Ok Google, rate mir einen Film. <br>  Ich m√∂chte eine lustige Kom√∂die sehen. <br>  Was f√ºr einen Film mit einem M√§dchen? </td></tr></tbody></table></div><br><p>  Es ist wichtig, dass indirekte Anrufe nicht zu allgemein sind.  Wie allgemeine Keywords in der Kontextwerbung verhindern sie nur, dass Sie die richtige Anwendung finden, und senken die Bewertung der Anwendung bei der Ausgabe des Assistenten. </p><br><p>  Anrufe k√∂nnen eine tiefe Verkn√ºpfung zu einzelnen Funktionen des Sprachassistenten enthalten.  Zum Beispiel beginnt unser Filmroboter normalerweise die Kommunikation mit der Tatsache, dass er einer Person die Wahl eines Genres anbietet.  Wenn er jedoch zu einem indirekten Aufruf aufgefordert wird: "Ich m√∂chte eine lustige Kom√∂die sehen", ist es logisch, einen Dialog mit dem Angebot eines garantiert guten Films des genannten Genres zu beginnen. </p><br><p>  <b>2. Erste Begr√º√üung</b> </p><br><p>  Die erste Begr√º√üung ist das, was die Anwendung der Person unmittelbar nach dem Anruf mitteilt. <br>  Zuerst m√ºssen Sie den Benutzer wissen lassen, dass der Assistent bereits hier ist: </p><br><blockquote>  Hallo, eine Proteinform des Lebens.  Ich bin ein roter leidenschaftlicher Filmroboter.  Der Zweck meiner Existenz ist es, biologische Filme √ºber gute Filme zu beraten. </blockquote><p>  Und dann - schlagen Sie vor, was als n√§chstes zu tun ist.  Unser Roboter sucht nach Filmen nach Genre, daher schlagen wir vor, mit welcher Anfrage eine Person noch weiter gehen kann: <br>  Was willst du sehen: vielleicht Comedy, Action oder Horror? </p><br><p>  Neue und erfahrene Benutzer k√∂nnen auf viele Arten begr√º√üt werden.  Wenn eine Person zum ersten Mal mit Ihrem Assistenten spricht, k√∂nnen Sie ein wenig √ºber sich selbst sprechen.  Wenn nicht der erste - ein langer Gru√ü wird ihn nerven.  So k√∂nnen Sie sofort zur Sache kommen: </p><br><div class="scrollable-table"><table><tbody><tr><td>  Ersten Mal </td><td><p>  Wiederholt </p><br></td></tr><tr><td>  Hallo, eine Proteinform des Lebens.  Ich bin ein roter leidenschaftlicher Filmroboter.  Der Zweck meiner Existenz ist es, biologische Filme √ºber gute Filme zu beraten.  Was willst du sehen: vielleicht Comedy, Action oder Horror? </td><td><br>  Gr√º√üe, Mann!  F√ºr welches Genre interessierst du dich? </td></tr></tbody></table></div><br><p>  <b>3. Menschliches Gespr√§ch</b> </p><br><p>  Bringen Sie Ihrem Assistenten bei, die nat√ºrliche Sprache zu verstehen und das Gespr√§ch aufrechtzuerhalten.  Der einfachste Weg, dies zu tun, besteht darin, bereits vor Beginn der Entwicklung mit Personen aus der Zielgruppe zu kommunizieren.  Dar√ºber hinaus ist es m√ºndlich und nicht schriftlich w√ºnschenswert, da die umgangssprachliche Sprache seltener als m√ºndlich ist.  Spielen Sie die Rolle des Roboters und bitten Sie den Gespr√§chspartner, sich vorzustellen, dass er Ihre zuk√ºnftige Anwendung verwendet.  Zeichnen Sie alle Dialoge auf dem Rekorder auf und entschl√ºsseln Sie sie anschlie√üend.  Auf diese Weise k√∂nnen Sie ein typisches Konversationsdiagramm entwerfen und herausfinden, wo Zweige angezeigt werden k√∂nnen. </p><br><h4>  Stufe 2: Entwicklung </h4><br><p>  Es gibt verschiedene M√∂glichkeiten, Ihre Aktion f√ºr einen Assistenten zu entwickeln: </p><br><ul><li>  Mit Dialogflow. </li><li>  Mit Aktionen im Google SDK. </li><li>  Text kann unabh√§ngig verarbeitet werden - beispielsweise wenn Sie eine eigene L√∂sung f√ºr die Verarbeitung nat√ºrlicher Sprache haben (NLP - Natural Language Processing). </li></ul><br><p>  Das Folgende ist die Interaktion eines Assistenten mit Ihren F√§higkeiten. <br>  Der Dialog sieht ungef√§hr so ‚Äã‚Äãaus: </p><br><ol><li><p>  Der Assistent √ºbersetzt die Rede in Text und sendet sie an Ihre Aktion. </p><br></li><li><p>  Der Text wird auf eine der oben genannten Arten verarbeitet.  In diesem Diagramm √ºber Dialogflow. </p><br></li><li><p>  Dialogflow definiert die Absicht (die spezifische Absicht des Benutzers) und empf√§ngt <br>  daraus Entit√§ten (Parameter). </p><br></li><li><p>  (Optional) Dialogflow kann den entsprechenden Webhook aufrufen, die Daten im Backend verarbeiten und eine Antwort erhalten. </p><br></li><li><p>  Dialogflow bildet die Antwort. </p><br></li><li><p>  Der Assistent gibt die Antwort, schaltet das Mikrofon ein und h√∂rt zu, was der Benutzer sagt. </p><br></li></ol><br><img src="https://habrastorage.org/webt/ib/us/uf/ibusuffx_dlpg1eewj7ev4xcpzc.png" alt="Bild"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Assistent Aktionsdiagramm</a> </p><br><h4>  Dialogfluss </h4><br><p>  Wir werden die Grundlagen von Dialogflow nicht n√§her erl√§utern - Google hat gute Tutorial-Videos ver√∂ffentlicht. </p><br><ol><li>  Absichten - √ºber das Erkennen von Absichten, wie genau Dialogflow versteht, was der Benutzer fragt oder welche Aktion er ausf√ºhren m√∂chte. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entit√§ten</a> - √ºber das Erkennen von Parametern innerhalb einer Phrase.  Wenn Sie beispielsweise Filme empfehlen, ist dies ein bestimmtes Genre. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dialogsteuerung</a> - Informationen zum Kontextmechanismus (siehe unten) und zur Erf√ºllung: Informationen zum Verarbeiten der Benutzeranforderung selbst durch Zugriff auf Ihr Backend und zum Zur√ºckgeben von etwas Interessanterem als einer Textantwort. </li></ol><br><p>  Wir gehen davon aus, dass Sie das Video bereits angesehen und die Dialogflow-Konsole herausgefunden haben.  Schauen wir uns die Probleme an, die in den einzelnen Teilen des Implementierungsprozesses aufgetreten sind, und was interessant ist, kann festgestellt werden. </p><br><p>  Denken Sie auch an die Regeln f√ºr den Aufbau eines guten Dialogs, wenn Sie mit der Implementierung fortfahren. Dies wirkt sich auf die Anzahl der Absichten, die Menge der Entit√§ten und deren Verwendung in Antworten, die Verwendung von Kontexten und alles andere aus. </p><br><h4>  Absichten </h4><br><p>  Es gibt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Empfehlungen</a> - eine detailliertere Begr√º√üung f√ºr den neuen Benutzer und f√ºr den Rest eine pr√§zisere Begr√º√üung.  Wie implementiere ich das? </p><br><p>  In der Dialogflow-Konsole kann diese Logik nicht ermittelt werden.  Dies kann innerhalb der Erf√ºllung aus willkommenen Gr√ºnden erfolgen.  Mit anderen Worten, Sie m√ºssen dies mit Ihren H√§nden tun. </p><br><p>  Dies gilt auch f√ºr die Fehlerbehandlung.  Zum Beispiel k√∂nnen Sie zum ersten Mal einfach erneut fragen und zum zweiten Mal feststellen, welche Art von Antwort Sie vom Benutzer erwarten. </p><br><p>  Sie tun dies nicht durch Antworten - es wird eine zuf√§llige Antwort ausgew√§hlt.  Sie k√∂nnen es durch Erf√ºllung oder etwas kniffliger tun, indem Sie es an den Kontext binden (mehr dazu weiter unten). </p><br><h4>  Entit√§ten </h4><br><p>  <b>"Automatisierte Erweiterung zulassen" und sys.Any</b> </p><br><p>  Wenn der Ausdruck in seiner Struktur √§hnlich ist, kann beim Aktivieren von "Automatisierte Erweiterung zulassen" als anerkannte Entit√§t etwas hineingelangen, das immer noch nicht mit Gewinn verarbeitet werden kann. </p><br><p>  Beispielsweise erkennt Ihre Anwendung den Ausdruck "Schlagen Sie mir etwas von &lt;genre&gt; vor" f√ºr Filmtipps.  Wenn Sie sagen "Raten Sie mir etwas vom Essen", dann erhalten Sie als Parameter "Genre" nicht das, was Sie erwarten w√ºrden.  Dies ist sinnvoll, wenn die Genres, die Sie im Backend st√§ndig dynamisch aktualisieren, und die Antwort des Benutzers dort verarbeitet werden, Sie jedoch keine Zeit haben, die Entit√§t zu aktualisieren. </p><br><p>  Eine andere L√∂sung ist die Verwendung von sys.Any.  In diesem Fall wird er alles √ºbermitteln, was nach dem erwarteten Entwurf war, was der gesamte Vorschlag sein kann.  Dies bietet mehr M√∂glichkeiten als eine automatisierte Erweiterung, aber es gibt auch mehr Nachteile. </p><br><p>  <b>Singular und Plural, F√§lle, Geschlecht</b> </p><br><p>  Lassen Sie uns ein einfaches Beispiel finden.  Wir werden √ºber Ihre Lieblingsfr√ºchte sprechen und die Anwendung wird antworten, wie cool sie sind.  In den folgenden Beispielen ist P der Benutzer, A ist unsere Aktion. </p><br><blockquote>  P: Ananas sind am leckersten. <br>  A: Ja, Ananas sind die coolsten Fr√ºchte! <br></blockquote><p>  In diesem Beispiel haben wir Entit√§t: Ananas <br>  Aber was ist, wenn der Benutzer "Ananas" sagt?  Wir k√∂nnen ein Synonym hinzuf√ºgen. </p><br><blockquote>  P: Ich mochte die Ananas. <br>  A: Ja, Ananas sind die coolsten Fr√ºchte! </blockquote><p>  Der Standardwert ist das Referenzformular - d. H.  es ist die urspr√ºngliche Form, nicht ihre Synonyme.  Deshalb sagt die Anwendung nicht "Ja, Ananas ist die coolste Frucht!" </p><br><p>  Es ist auch eine √úberlegung wert, wenn Sie Antworten schreiben.  Wenn wir die Antwort ‚ÄûJa, $ Obst ist das coolste!‚Äú H√§tten, w√ºrden wir Folgendes erhalten: </p><br><blockquote>  P: Ich mochte die Ananas. <br>  A: Ja, Ananas sind die coolsten! </blockquote><p>  Und vergessen Sie nicht die F√§lle: </p><br><blockquote>  P: Ich will Drama <br>  A: Hier ist ein cooles Drama ... <br></blockquote><p>  Daher sollten Sie sowohl die Anfangswerte der Entit√§t als auch die Antworten in einer konsistenten Form schreiben.  Zum Beispiel k√∂nnen wir alle urspr√ºnglichen Entit√§tsformen f√ºr Fr√ºchte im Plural und Synonyme in jedem machen. </p><br><p>  Wir werden im Nominativ Genres auf Russisch machen, aber in beliebiger Anzahl (Drama, Horror). </p><br><p>  Wenn wir zu den Antworten kommen, schreiben wir nicht "Ja, $ Obst ist die coolste Frucht!"  und "Ja, $ Obst ist das coolste!"  - Fr√ºchte sind immer im Plural. </p><br><p>  Bei der russischen Sprache lohnt es sich, noch weiter zu gehen und dar√ºber nachzudenken, wie man eine vereinbarte Antwort schreibt - wir haben nicht nur F√§lle (Drama / Drama), sondern auch Geschlecht (Drama / Western). </p><br><blockquote>  P: Ich m√∂chte einen Western <br>  A: Hier ist ein cooler Western ... <br></blockquote><br><blockquote>  P: Ich m√∂chte einen Western <br>  A: Westlich?  Ok, hier ist ein cooler Film ... </blockquote><p>  Aber wie kann man genau das Entit√§tsformular zur√ºckgeben, das der Benutzer gesagt hat? </p><br><p>  Im Fall von Genres k√∂nnte das Synonym f√ºr "Science Fiction" "Aliens" sein.  Wenn der Benutzer dann "Aliens" sagt, wird "Science Fiction" als Parameter zur√ºckgegeben. <br>  Wenn wir die Entit√§t in der Form erhalten m√∂chten, in der der Benutzer sie angegeben hat, lohnt es sich, den Wert von $ entity.original zu w√§hlen </p><br><img src="https://habrastorage.org/webt/vf/eq/9f/vfeq9fm3m3dbgzmmyik5qxvvd0q.png" alt="Bild"><br><p>  Dann kann es jedoch zu Problemen mit der Inkonsistenz der Anzahl und (insbesondere) der Inkonsistenz der F√§lle kommen.  Ist es wirklich notwendig?  Wenn ja, erstellen Sie eine Entit√§t f√ºr Singular, Plural und Gro√ü- / Kleinschreibung.  Die Antworten m√ºssen auch mit dem von ihnen verwendeten Entit√§tsformular √ºbereinstimmen. </p><br><h4>  Kontexte </h4><br><p>  Vielleicht damit die meisten Probleme. </p><br><p>  <b>Eingabekontext</b> </p><br><p>  Dies ist der Kontext, an den eine bestimmte Absicht gebunden ist.  Mehrere Absichten k√∂nnen auf dieselbe Phrase reagieren, und die mit dem aktiven Eingabekontext wird h√∂chstwahrscheinlich funktionieren. <br>  So k√∂nnen Sie beispielsweise einer bestimmten Frage eine Ja / Nein-Antwort hinzuf√ºgen, die in Dialogflow mithilfe der Folgeabsicht erfolgt </p><br><p>  <b>Ausgabekontext</b> </p><br><p>  Dies ist der Kontext, der aktiviert wird, wenn die Absicht ausgel√∂st wird.  Auf diese Weise werden Kontexte in der Dialogflow-Konsole aktiviert (dies kann auch in Erf√ºllung erfolgen).  Wir geben die Anzahl der Umdrehungen des Dialogs an, in denen er aktiv ist, und nach dem Zur√ºcksetzen des Z√§hlers oder nach 20 Minuten wird er deaktiviert.  Dies bedeutet, dass die Daten in diesem Kontext nicht mehr verf√ºgbar sind und Absichten, f√ºr die sie eingegeben werden, nicht funktionieren. </p><br><p>  Ein weiterer Trick ist mit demselben verbunden: Sie k√∂nnen einen Kontext mit einer Absicht aktivieren und manuell mit einer anderen deaktivieren, indem Sie ihn einfach als Ausgabekontext f√ºr die zweite Absicht mit der Anzahl der Antworten 0 angeben. </p><br><p>  Wenn Sie keinen Code in Erf√ºllung schreiben m√∂chten, k√∂nnen Sie auf diese Weise eine interessante Logik implementieren, z. B. den Kontext als Z√§hler verwenden und die Fehlerbehandlung implementieren, wenn der Assistent den Benutzer nicht versteht. </p><br><h4>  Dialogflow-Tipps </h4><br><ul><li><p>  Es ist nicht erforderlich, die Seite mit der Assistentenvorschau neu zu starten. Wenn Sie √Ñnderungen am Dialogflow-Agenten vorgenommen haben, k√∂nnen Sie warten, bis das Training abgeschlossen ist, und die nicht erkannte Phrase im Simulator sofort wiederholen.  Dialogflow kann als Backend betrachtet werden, auf das sich ein Assistent bezieht. </p><br></li><li><p>  Verwenden Sie vorgefertigte Agenten - dort k√∂nnen Sie sehen, wie Sie ein typisches Szenario implementieren. </p><br></li><li><p>  Seien Sie vorsichtig mit dem Abschnitt Small Talk.  Durch die Verwendung wird das Mikrofon am Ende des Gespr√§chs nicht ausgeschaltet, und solche Antworten enthalten normalerweise keine Handlungsaufforderung.  Sie leiten den Benutzer nicht zur n√§chsten Dialogrunde, und es ist ihm nicht ganz klar, was weiter gesagt werden soll.  Aus diesem Grund k√∂nnen Sie die √úberpr√ºfung mit hoher Wahrscheinlichkeit nicht bestehen.  Es ist besser, separate Absichten daf√ºr zu machen, wenn Sie sie in den Dialog eingeben k√∂nnen. </p><br></li><li><p>  Bearbeiten Sie nicht dieselbe Absicht gleichzeitig.  Jetzt wird die gleichzeitige Arbeit mehrerer Personen nicht unterst√ºtzt - es ist nicht bekannt, wessen √Ñnderungen √ºberschrieben werden. </p><br></li><li><p>  Wenn es notwendig ist, die Arbeit mit Absicht zu parallelisieren, kann sie in separaten Projekten ausgef√ºhrt werden. W√§hlen Sie dann einfach die erforderlichen aus und √ºbertragen Sie sie.  Importieren und exportieren Sie Entit√§ten auch in json / xml und importieren / exportieren Sie sie absichtlich. </p><br></li><li><p>  Es lohnt sich sofort zu ber√ºcksichtigen, dass Sie Aktionen f√ºr eine bestimmte Sprache schreiben.  Das Schreiben von Antworten auf Russisch hat zus√§tzliche Nuancen.  Die Lokalisierung der Aktion scheint daher schwieriger zu sein als mit der Benutzeroberfl√§che der mobilen Anwendung. </p><br></li><li><p>  Ber√ºcksichtigen Sie die Entwurfsregeln f√ºr Sprachschnittstellen - sie wirken sich nicht nur auf die Replikate aus, sondern auch auf die gesamte Struktur.  Sie bauen einen Dialog auf, daher sollte jede Antwort einen Aufruf zum Handeln hinterlassen, damit der Benutzer versteht, was er sagen soll. </p><br></li><li><p>  Wenn alles fertig ist und Sie mit dem Testen beginnen, haben Sie keine Angst mehr, einzelne Zweige des Dialogs oder der Frageformulare aufzugeben.  Vielleicht werden Sie in der Testphase verstehen, wie Sie Absichten verbinden und was zur Vereinfachung der Verwendung fehlt. </p><br></li></ul><br><h4>  Serververbindung </h4><br><p>  Um den Server zu verbinden, m√ºssen Sie Fulfillment verwenden.  Hierf√ºr gibt es zwei M√∂glichkeiten: </p><br><ul><li>  <strong>Webhook-Client</strong> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Viele</a> Sprachen werden unterst√ºtzt. </li><li>  <strong>Inline-Editor</strong> zu Cloud-Funktionen f√ºr Firebase (node.js). </li></ul><br><p>  Betrachten wir den einfachsten - den Inline-Editor. </p><br><p>  Wir geben nicht vor, ein Experte f√ºr node.js zu sein. Das Beheben von Fehlern in Kommentaren ist willkommen. </p><br><p>  Es ist wichtig, auf die Version der Dialogflow-API zu achten. <br>  Neueste Version v2.  Alles, was f√ºr Version v1 geschrieben wurde, funktioniert nicht damit. <br>  Lesen Sie hier mehr √ºber Migration. </p><br><p>  N√ºtzliche Links: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentations- und Bibliotheksquellcode f√ºr die Arbeit mit Dialogflow-Fulfillment</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erste Schritte mit der Dialogflow-Erf√ºllung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiele</a> </li><li>  Protokolle k√∂nnen hier angezeigt werden: <a href="">Gehen Sie zur Firebase-Konsole neben der Schaltfl√§che Bereitstellen</a> </li></ul><br><h4>  Analysieren Sie die Standardvorlage </h4><br><div class="spoiler">  <b class="spoiler_title">Wenn Sie den Abschnitt Erf√ºllung √∂ffnen, wird der folgende Code in der Datei / Registerkarte `index.js` angezeigt:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">'use strict'; const functions = require('firebase-functions'); const {WebhookClient} = require('dialogflow-fulfillment'); const {Card, Suggestion} = require('dialogflow-fulfillment'); process.env.DEBUG = 'dialogflow:debug'; // enables lib debugging statements exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { const agent = new WebhookClient({ request, response }); console.log('Dialogflow Request headers: ' + JSON.stringify(request.headers)); console.log('Dialogflow Request body: ' + JSON.stringify(request.body)); function welcome(agent) { agent.add(`Welcome to my agent!`); } function fallback(agent) { agent.add(`I didn't understand`); agent.add(`I'm sorry, can you try again?`); } // // Uncomment and edit to make your own intent handler // // uncomment `intentMap.set('your intent name here', yourFunctionHandler);` // // below to get this function to be run when a Dialogflow intent is matched // function yourFunctionHandler(agent) { // agent.add(`This message is from Dialogflow's Cloud Functions for Firebase editor!`); // agent.add(new Card({ // title: `Title: this is a card title`, // imageUrl: 'https://developers.google.com/actions/images/badges/XPM_BADGING_GoogleAssistant_VER.png', // text: `This is the body text of a card. You can even use line\n breaks and emoji! `, // buttonText: 'This is a button', // buttonUrl: 'https://assistant.google.com/' // }) // ); // agent.add(new Suggestion(`Quick Reply`)); // agent.add(new Suggestion(`Suggestion`)); // agent.setContext({ name: 'weather', lifespan: 2, parameters: { city: 'Rome' }}); // } // // Uncomment and edit to make your own Google Assistant intent handler // // uncomment `intentMap.set('your intent name here', googleAssistantHandler);` // // below to get this function to be run when a Dialogflow intent is matched // function googleAssistantHandler(agent) { // let conv = agent.conv(); // Get Actions on Google library conv instance // conv.ask('Hello from the Actions on Google client library!') // Use Actions on Google library // agent.add(conv); // Add Actions on Google library responses to your agent's response // } // // See https://github.com/dialogflow/dialogflow-fulfillment-nodejs/tree/master/samples/actions-on-google // // for a complete Dialogflow fulfillment library Actions on Google client library v2 integration sample // Run the proper function handler based on the matched Dialogflow intent name let intentMap = new Map(); intentMap.set('Default Welcome Intent', welcome); intentMap.set('Default Fallback Intent', fallback); // intentMap.set('your intent name here', yourFunctionHandler); // intentMap.set('your intent name here', googleAssistantHandler); agent.handleRequest(intentMap); });</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Und solche Abh√§ngigkeiten in der Datei / Registerkarte `package.json`:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{ "name": "dialogflowFirebaseFulfillment", "description": "This is the default fulfillment for a Dialogflow agents using Cloud Functions for Firebase", "version": "0.0.1", "private": true, "license": "Apache Version 2.0", "author": "Google Inc.", "engines": { "node": "~6.0" }, "scripts": { "start": "firebase serve --only functions:dialogflowFirebaseFulfillment", "deploy": "firebase deploy --only functions:dialogflowFirebaseFulfillment" }, "dependencies": { "actions-on-google": "2.0.0-alpha.4", "firebase-admin": "^4.2.1", "firebase-functions": "^0.5.7", "dialogflow": "^0.1.0", "dialogflow-fulfillment": "0.3.0-beta.3" } }</code> </pre> </div></div><br><p>  Aktualisieren Sie zun√§chst die Alpha- und Beta-Abh√§ngigkeiten auf die neuesten stabilen. </p><br><div class="spoiler">  <b class="spoiler_title">Hier sind die aktuellsten Versionen.</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{ "dependencies": { "actions-on-google": "^2.2.0", "firebase-admin": "^5.2.1", "firebase-functions": "^0.6.2", "dialogflow": "^0.6.0", "dialogflow-fulfillment": "^0.5.0" } }</code> </pre> </div></div><br><p>  Und jetzt schauen wir uns den Code genauer an. </p><br><div class="spoiler">  <b class="spoiler_title">Oben ist das Importieren von Abh√§ngigkeiten abgeschlossen</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// Cloud Functions  Firebase library const functions = require('firebase-functions'); //       const {WebhookClient} = require('dialogflow-fulfillment'); //       const {Card, Suggestion} = require('dialogflow-fulfillment');</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Der springende Punkt bei der Erf√ºllung ist das √úberschreiben des R√ºckrufs - ein "dialogflowFirebaseFulfillment"</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { console.log('Dialogflow Request headers: ' + JSON.stringify(request.headers)); console.log('Dialogflow Request body: ' + JSON.stringify(request.body)); //   . const agent = new WebhookClient({ request, response }); //   let result = request.body.queryResult; //  action  entities https://dialogflow.com/docs/actions-and-parameters let action = result.action; let parameters = result.parameters; //    https://dialogflow.com/docs/contexts let outputContexts = result.outputContexts; //       let intentRequest = request.body.originalDetectIntentRequest; });</code> </pre> </div></div><br><p>  Dieser R√ºckruf wird f√ºr diejenigen Absichten aufgerufen, f√ºr die Sie die vollst√§ndige Erf√ºllung aktivieren. </p><br><div class="spoiler">  <b class="spoiler_title">Definieren Sie nun die Antwort auf die Absicht neu</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { const agent = new WebhookClient({ request, response }); function welcome(agent) { //   agent.add(`Welcome to my agent!`); } function fallback(agent) { agent.add(`I didn't understand`); agent.add(`I'm sorry, can you try again?`); } //   ,  : // key -   intent-. // value -   ,   . let intentMap = new Map(); intentMap.set('Default Welcome Intent', welcome); intentMap.set('Default Fallback Intent', fallback); agent.handleRequest(intentMap); });</code> </pre> </div></div><br><p>  Gleichzeitig ersetzt der Code die Absichtsantwort aus dem Abschnitt "Antworten" vollst√§ndig. <br>  Antworten werden nur aufgerufen, wenn der R√ºckruf fehlschl√§gt, sodass Sie dort eine Fehlerbehandlung durchf√ºhren k√∂nnen. </p><br><p>  Wir entfernen die Intent-Verarbeitungsfunktionen aus dem R√ºckruf. <br>  Die Begr√º√üungs- und Fallback-Funktionen befinden sich im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abschluss</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Um sie aus dem R√ºckruf zu entfernen, m√ºssen Sie die √úbertragung des Kontexts der Funktion und der Parameter √ºber `bind` hinzuf√ºgen</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) =&gt; { const agent = new WebhookClient({ request, response }); let intentMap = new Map(); //  set  Map.      intentMap .set('Default Welcome Intent', welcome.bind(this, agent)) .set('Default Fallback Intent', fallback.bind(this, agent)); agent.handleRequest(intentMap); }); function welcome(agent) { agent.add(`Welcome to my agent!`); } function fallback(agent) { //   2   add    agent.add([ `I didn't understand`, `I'm sorry, can you try again?` ]); }</code> </pre> </div></div><br><p> ,     ,       Google Assistant.  ,       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419773/">https://habr.com/ru/post/de419773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419763/index.html">Beispiele f√ºr die Berechnung des "Verf√ºgbarkeitsfaktors" f√ºr Netzwerkger√§te</a></li>
<li><a href="../de419765/index.html">Der Kurs "Web-Programmiersprachen" (basierend auf Ruby) von MSTU. N. E. Bauman auf dem Technostream-Kanal</a></li>
<li><a href="../de419767/index.html">Der Wikipedia-Ersteller beantwortet Fragen: Programmieren, Schlafen, B√ºcher, Tipps f√ºrs Leben</a></li>
<li><a href="../de419769/index.html">WireGuard wird zum Linux-Kernel "kommen" - warum?</a></li>
<li><a href="../de419771/index.html">Fintech Digest: Die Zentralbank beschleunigt die Erfassung von Kundenbiometrien, Kryptow√§hrungen fallen und der Markt f√ºr das Internet der Dinge w√§chst</a></li>
<li><a href="../de419775/index.html">Meine Version des ‚ÄûGer√§ts f√ºr klare Tr√§ume‚Äú ist eine kurze Geschichte und Beschreibung der ersten Version</a></li>
<li><a href="../de419777/index.html">Wie man NNN-Server in den Niederlanden verkauft und nicht mit blo√üer Begeisterung zur√ºckgelassen wird: Verkaufsgeheimnisse</a></li>
<li><a href="../de419779/index.html">Die gewachsenen Lungen wurden erfolgreich einem Schwein transplantiert, nach 5 Jahren sind Versuche am Menschen m√∂glich</a></li>
<li><a href="../de419781/index.html">SpaceX veranstaltete den ersten Mars-Workshop</a></li>
<li><a href="../de419783/index.html">Mensch gegen Maschine: Eine neue Ethik f√ºr Cybersicherheit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>