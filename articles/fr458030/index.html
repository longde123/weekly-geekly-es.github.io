<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñïüèº üíØ üë®üèº‚Äçüè≠ JavaScript fonctionnel: cinq fa√ßons de trouver la moyenne arithm√©tique des √©l√©ments d'un tableau et la m√©thode .reduce () üíø üÉè üåò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les m√©thodes d'it√©ration des tableaux sont similaires aux ¬´m√©dicaments de d√©part¬ª (bien s√ªr, ce ne sont pas des m√©dicaments; et je ne dis pas que les ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JavaScript fonctionnel: cinq fa√ßons de trouver la moyenne arithm√©tique des √©l√©ments d'un tableau et la m√©thode .reduce ()</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458030/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les m√©thodes d'it√©ration des tableaux sont</a> similaires aux ¬´m√©dicaments de d√©part¬ª (bien s√ªr, ce ne sont pas des m√©dicaments; et je ne dis pas que les m√©dicaments sont bons; ils ne sont qu'une figure de style).  √Ä cause d'eux, beaucoup de ¬´s'asseoir¬ª sur la programmation fonctionnelle.  Le fait est qu'ils sont incroyablement pratiques.  De plus, la plupart de ces m√©thodes sont tr√®s faciles √† comprendre.  Des m√©thodes comme <code>.map()</code> et <code>.filter()</code> n'acceptent qu'un seul argument de rappel et vous permettent de r√©soudre des probl√®mes simples.  Mais il y a un sentiment que la m√©thode <code>.reduce()</code> cause des difficult√©s √† beaucoup.  Le comprendre est un peu plus difficile. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/zd/ig/jp/zdigjpelbgmyf4qdprvkrxo5bu4.png"></a> <br><a name="habracut"></a><br>  J'ai d√©j√† <code>.reduce()</code> pourquoi je pense que <code>.reduce()</code> cr√©e beaucoup de probl√®mes.  Cela est d√ª en partie au fait que de nombreux manuels d√©montrent l'utilisation de <code>.reduce()</code> uniquement lors de la gestion des nombres.  Par cons√©quent, j'ai √©crit combien de t√¢ches qui n'impliquent pas d'op√©rations arithm√©tiques peuvent √™tre r√©solues en utilisant <code>.reduce()</code> .  Mais que faire si vous avez absolument besoin de travailler avec des chiffres? <br><br>  Une utilisation typique de <code>.reduce()</code> ressemble √† un calcul de la moyenne arithm√©tique des √©l√©ments d'un tableau.  √Ä premi√®re vue, il semble qu'il n'y ait rien de sp√©cial dans cette t√¢che.  Mais elle n'est pas si simple.  Le fait est qu'avant de calculer la moyenne, vous devez trouver les indicateurs suivants: <br><br><ol><li>  Le montant total des valeurs des √©l√©ments du tableau. </li><li>  La longueur du tableau. </li></ol><br>  D√©couvrir tout cela est assez simple.  Et le calcul des valeurs moyennes pour les tableaux num√©riques n'est pas non plus une op√©ration difficile.  Voici un exemple √©l√©mentaire: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">average</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">nums</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nums.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a + b)) / nums.length; }</code> </pre> <br>  Comme vous pouvez le voir, il n'y a pas d'incompr√©hensions particuli√®res ici.  Mais la t√¢che devient plus difficile si vous devez travailler avec des structures de donn√©es plus complexes.  Et si nous avons un tableau d'objets?  Que faire si certains objets de ce tableau doivent √™tre filtr√©s?  Que faire si vous devez extraire certaines valeurs num√©riques d'objets?  Dans cette situation, le calcul de la valeur moyenne des √©l√©ments du tableau est d√©j√† une t√¢che un peu plus compliqu√©e. <br><br>  Pour r√©soudre ce probl√®me, nous allons r√©soudre le probl√®me de formation (il est bas√© sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> t√¢che avec FreeCodeCamp).  Nous allons le r√©soudre de cinq mani√®res diff√©rentes.  Chacun d'eux a ses propres avantages et inconv√©nients.  Une analyse de ces cinq approches pour r√©soudre ce probl√®me montrera √† quel point JavaScript peut √™tre flexible.  Et j'esp√®re que l'analyse des solutions vous donnera mati√®re √† r√©flexion sur la mani√®re d'utiliser <code>.reduce()</code> dans des projets r√©els. <br><br><h2>  <font color="#3AC1EF">Aper√ßu des t√¢ches</font> </h2><br>  Supposons que nous ayons un tableau d'objets qui d√©crivent des expressions d'argot victorien.  Vous devez filtrer les expressions qui ne se trouvent pas dans Google Livres (la propri√©t√© <code>found</code> des objets correspondants est <code>false</code> ) et trouver une note moyenne pour la popularit√© des expressions.  Voici √† quoi pourraient ressembler ces donn√©es (prises √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> victorianSlang = [           term: <span class="hljs-string"><span class="hljs-string">'doing the bear'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-number"><span class="hljs-number">108</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'katterzem'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'bone shaker'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-number"><span class="hljs-number">609</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'smothering a parrot'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'damfino'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-number"><span class="hljs-number">232</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'rain napper'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'donkey'</span></span>s breakfast<span class="hljs-string"><span class="hljs-string">',        found: true,        popularity: 787,    },           term: '</span></span>rational costume<span class="hljs-string"><span class="hljs-string">',        found: true,        popularity: 513,    },           term: '</span></span>mind the grease<span class="hljs-string"><span class="hljs-string">',        found: true,        popularity: 154,    }, ];</span></span></code> </pre> <br>  Consid√©rez 5 fa√ßons de trouver la valeur moyenne de l'√©valuation de la popularit√© des expressions de ce tableau. <br><br><h2>  <font color="#3AC1EF">1. R√©soudre un probl√®me sans utiliser .reduce () (boucle imp√©rative)</font> </h2><br>  Dans notre premi√®re approche pour r√©soudre le probl√®me, la m√©thode <code>.reduce()</code> ne sera pas utilis√©e.  Si vous n'avez jamais rencontr√© de m√©thodes d'it√©ration de tableaux auparavant, j'esp√®re que l'analyse de cet exemple clarifiera un peu la situation pour vous. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> popularitySum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> itemsFound = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> len = victorianSlang.length; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> item = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; len; i++) {    item = victorianSlang[i];    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.found) {        popularitySum = item.popularity + popularitySum;        itemsFound = itemsFound + <span class="hljs-number"><span class="hljs-number">1</span></span>;   } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> averagePopularity = popularitySum / itemsFound; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Average popularity:"</span></span>, averagePopularity);</code> </pre> <br>  Si vous connaissez JavaScript, vous comprendrez facilement cet exemple.  En fait, ce qui suit se produit ici: <br><br><ol><li>  Nous initialisons les variables <code>itemsFound</code> et <code>itemsFound</code> .  La premi√®re variable, <code>popularitySum</code> , stocke la note globale de popularit√© des expressions.  Et la deuxi√®me variable, <code>itemsFound</code> , (c'est une surprise) stocke le nombre d'expressions trouv√©es. </li><li>  Ensuite, nous initialisons la constante <code>len</code> et l' <code>item</code> variable, qui nous sont utiles lors de la travers√©e du tableau. </li><li>  Dans une boucle <code>for</code> , le compteur <code>i</code> incr√©ment√© jusqu'√† ce que sa valeur atteigne la valeur d'index du dernier √©l√©ment du tableau. </li><li>  √Ä l'int√©rieur de la boucle, nous prenons l'√©l√©ment du tableau que nous voulons explorer.  Nous acc√©dons √† l'√©l√©ment en utilisant la construction <code>victorianSlang[i]</code> . </li><li>  Nous d√©couvrons ensuite si cette expression se retrouve dans la collection de livres. </li><li>  Si une expression appara√Æt dans les livres, nous prenons la valeur de sa cote de popularit√© et ajoutons √† la valeur de la variable <code>popularitySum</code> . </li><li>  Dans le m√™me temps, nous <code>itemsFound</code> √©galement le compteur des expressions trouv√©es - <code>itemsFound</code> . </li><li>  Et enfin, nous trouvons la moyenne en divisant la <code>popularitySum</code> par les <code>itemsFound</code> . </li></ol><br>  Nous avons donc fait face √† la t√¢che.  Peut-√™tre que notre d√©cision n'√©tait pas particuli√®rement belle, mais elle fait son travail.  L'utilisation de m√©thodes pour parcourir les tableaux le rendra un peu plus propre.  Voyons si nous r√©ussissons, et la v√©rit√© est, pour ¬´nettoyer¬ª cette d√©cision. <br><br><h2>  <font color="#3AC1EF">2. Solution simple n ¬∞ 1: .filter (), .map () et recherche du montant √† l'aide de .reduce ()</font> </h2><br>  Disons, avant la premi√®re tentative d'utiliser les m√©thodes de tableaux pour r√©soudre le probl√®me, nous le divisons en petites parties.  √Ä savoir, voici ce que nous devons faire: <br><br><ol><li>  S√©lectionnez des objets repr√©sentant des expressions qui se trouvent dans la collection Google Livres.  Ici, vous pouvez utiliser la m√©thode <code>.filter()</code> . </li><li>  Extraire des objets l'√©valuation de la popularit√© des expressions.  Pour r√©soudre cette sous-t√¢che, la m√©thode <code>.map()</code> convient. </li><li>  Calculez la somme des notes.  Ici, nous pouvons recourir √† l'aide de notre vieil ami <code>.reduce()</code> . </li><li>  Et enfin, trouvez la valeur moyenne des estimations. </li></ol><br>  Voici √† quoi cela ressemble dans le code: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   // ---------------------------------------------------------------------------- function isFound(item) {    return item.found; }; function getPopularity(item) {    return item.popularity; } function addScores(runningTotal, popularity) {    return runningTotal + popularity; } //  // ---------------------------------------------------------------------------- //  ,      . const foundSlangTerms = victorianSlang.filter(isFound); //   ,   . const popularityScores = foundSlangTerms.map(getPopularity); //     .    ,    //   ,  reduce     ,  0. const scoresTotal = popularityScores.reduce(addScores, 0); //       . const averagePopularity = scoresTotal / popularityScores.length; console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br>  <code>addScore</code> ≈ìil √† la fonction <code>addScore</code> et √† la ligne o√π <code>.reduce()</code> appel√©.  Notez que <code>addScore</code> accepte deux param√®tres.  Le premier, <code>runningTotal</code> , est connu sous le nom de batterie.  Il stocke la somme des valeurs.  Sa valeur change √† chaque fois que nous parcourons le tableau et ex√©cutons l' <code>return</code> .  Le deuxi√®me param√®tre, la <code>popularity</code> , est un √©l√©ment distinct du tableau que nous traitons.  Au tout d√©but de l' <code>addScore</code> sur le tableau, l' <code>return</code> <code>addScore</code> dans <code>addScore</code> n'a jamais √©t√© ex√©cut√©e.  Cela signifie que <code>runningTotal</code> pas encore √©t√© d√©fini automatiquement.  Par cons√©quent, en appelant <code>.reduce()</code> , nous transmettons √† cette m√©thode la valeur qui doit √™tre √©crite dans <code>runningTotal</code> au tout d√©but.  Il s'agit du deuxi√®me param√®tre pass√© √† <code>.reduce()</code> . <br><br>  Nous avons donc appliqu√© les m√©thodes d'it√©ration des tableaux pour r√©soudre le probl√®me.  La nouvelle version de la solution s'est av√©r√©e beaucoup plus propre que la pr√©c√©dente.  En d'autres termes, la d√©cision s'est av√©r√©e plus d√©clarative.  Nous ne disons pas √† JavaScript exactement comment ex√©cuter la boucle; nous ne suivons pas les index des √©l√©ments du tableau.  Au lieu de cela, nous d√©clarons des fonctions d'assistance simples de petite taille et les combinons.  Tout le travail acharn√© est fait pour nous par les m√©thodes de tableau <code>.filter()</code> , <code>.map()</code> et <code>.reduce()</code> .  Cette approche pour r√©soudre de tels probl√®mes est plus expressive.  Ces m√©thodes de tableau sont beaucoup plus compl√®tes que la boucle ne peut le faire, elles nous renseignent sur l'intention √©nonc√©e dans le code. <br><br><h2>  <font color="#3AC1EF">3. Solution facile n ¬∞ 2: utilisation de plusieurs batteries</font> </h2><br>  Dans la version pr√©c√©dente de la solution, nous avons cr√©√© tout un tas de variables interm√©diaires.  Par exemple, <code>foundSlangTerms</code> et <code>popularityScores</code> .  Dans notre cas, une telle solution est tout √† fait acceptable.  Mais que se passe-t-il si nous nous fixons un objectif plus complexe concernant la conception de code?  Ce serait bien si nous pouvions utiliser le mod√®le de conception d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interface fluide</a> dans le programme.  Avec cette approche, nous serions en mesure de cha√Æner les appels de toutes les fonctions et de pouvoir nous passer de variables interm√©diaires.  Cependant, un probl√®me nous attend ici.  Notez que nous devons obtenir la valeur de <code>popularityScores.length</code> .  Si nous allons tout encha√Æner, nous avons besoin d'une autre fa√ßon de trouver le nombre d'√©l√©ments dans le tableau.  Le nombre d'√©l√©ments dans le tableau joue le r√¥le d'un diviseur dans le calcul de la valeur moyenne.  Voyons si nous pouvons changer l'approche pour r√©soudre le probl√®me afin que tout puisse √™tre fait en combinant les appels de m√©thode dans une cha√Æne.  Nous le ferons en suivant deux valeurs lors de l'it√©ration sur les √©l√©ments du tableau, c'est-√†-dire en utilisant la ¬´double batterie¬ª. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   // --------------------------------------------------------------------------------- function isFound(item) {    return item.found; }; function getPopularity(item) {    return item.popularity; } //    ,  return,   . function addScores({totalPopularity, itemCount}, popularity) {    return {        totalPopularity: totalPopularity + popularity,        itemCount:    itemCount + 1,    }; } //  // --------------------------------------------------------------------------------- const initialInfo  = {totalPopularity: 0, itemCount: 0}; const popularityInfo = victorianSlang.filter(isFound)    .map(getPopularity)    .reduce(addScores, initialInfo); //       . const {totalPopularity, itemCount} = popularityInfo; const averagePopularity = totalPopularity / itemCount; console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br>  Ici, pour travailler avec deux valeurs, nous avons utilis√© l'objet dans la fonction de r√©duction.  √Ä chaque passage dans le tableau effectu√© √† l'aide d' <code>addScrores</code> , nous mettons √† jour la valeur totale de la cote de popularit√© et le nombre d'√©l√©ments.  Il est important de noter que ces deux valeurs sont repr√©sent√©es comme un seul objet.  Avec cette approche, nous pouvons ¬´tromper¬ª le syst√®me et stocker deux entit√©s dans la m√™me valeur de retour. <br><br>  La fonction <code>addScrores</code> √™tre un peu plus compliqu√©e que la fonction du m√™me nom dans l'exemple pr√©c√©dent.  Mais maintenant, il s'av√®re que nous pouvons utiliser une seule cha√Æne d'appels de m√©thode pour effectuer toutes les op√©rations avec le tableau.  √Ä la suite du traitement du tableau, nous obtenons l'objet popularInfo, qui stocke tout ce dont vous avez besoin pour trouver la moyenne.  Cela rend la cha√Æne d'appel nette et simple. <br><br>  Si vous ressentez le d√©sir d'am√©liorer ce code, vous pouvez l'exp√©rimenter.  Par exemple - vous pouvez le refaire afin de vous d√©barrasser de nombreuses variables interm√©diaires.  Vous pouvez m√™me essayer de mettre ce code sur une seule ligne. <br><br><h2>  <font color="#3AC1EF">4. Composition des fonctions sans utiliser la notation par points</font> </h2><br>  Si vous √™tes nouveau dans la programmation fonctionnelle, ou s'il vous semble que la programmation fonctionnelle est trop compliqu√©e, vous pouvez ignorer cette section.  Son analyse vous sera utile si vous √™tes d√©j√† familier avec <code>curry()</code> et <code>compose()</code> .  Si vous souhaitez approfondir ce sujet, jetez un ≈ìil √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> mat√©riel sur la programmation fonctionnelle en JavaScript et, en particulier, √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">troisi√®me</a> partie de la s√©rie dans laquelle il est inclus. <br><br>  Nous sommes des programmeurs qui adoptent une approche fonctionnelle.  Cela signifie que nous nous effor√ßons de cr√©er des fonctions complexes √† partir d'autres fonctions - petites et simples.  Jusqu'√† pr√©sent, au cours de l'examen de diverses options pour r√©soudre le probl√®me, nous avons r√©duit le nombre de variables interm√©diaires.  En cons√©quence, le code de la solution est devenu plus simple et plus facile.  Mais que se passe-t-il si cette id√©e est pouss√©e √† l'extr√™me?  Et si vous essayez de vous d√©barrasser de toutes les variables interm√©diaires?  Et m√™me essayer de s'√©loigner de certains param√®tres? <br><br>  Vous pouvez cr√©er une fonction pour calculer la moyenne en utilisant la fonction <code>compose()</code> seule, sans utiliser de variables.  Nous appelons cela ¬´programmation sans utiliser de notation √† grain fin¬ª ou ¬´programmation implicite¬ª.  Pour √©crire de tels programmes, vous aurez besoin de nombreuses fonctions auxiliaires. <br><br>  Parfois, un tel code choque les gens.  Cela est d√ª au fait qu'une telle approche est tr√®s diff√©rente de celle g√©n√©ralement accept√©e.  Mais j'ai d√©couvert que l'√©criture de code dans le style de la programmation implicite est l'un des moyens les plus rapides pour comprendre l'essence de la programmation fonctionnelle.  Par cons√©quent, je peux vous conseiller d'essayer cette technique dans un projet personnel.  Mais je veux dire que vous ne devriez peut-√™tre pas √©crire dans le style de programmation implicite le code que les autres doivent lire. <br><br>  Revenons donc √† notre t√¢che de construire un syst√®me de calcul des moyennes.  Par souci d'√©conomie d'espace, nous allons passer ici √† l'utilisation des fonctions fl√®ches.  En r√®gle g√©n√©rale, il est pr√©f√©rable d'utiliser des fonctions nomm√©es.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon article sur ce sujet.  Cela vous permet d'obtenir de meilleurs r√©sultats de trace de pile en cas d'erreurs. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   // ---------------------------------------------------------------------------- const filter = p =&gt; a =&gt; a.filter(p); const map   = f =&gt; a =&gt; a.map(f); const prop  = k =&gt; x =&gt; x[k]; const reduce = r =&gt; i =&gt; a =&gt; a.reduce(r, i); const compose = (...fns) =&gt; (arg) =&gt; fns.reduceRight((arg, fn) =&gt; fn(arg), arg); //  -   "blackbird combinator". //     : https://jrsinclair.com/articles/2019/compose-js-functions-multiple-parameters/ const B1 = f =&gt; g =&gt; h =&gt; x =&gt; f(g(x))(h(x)); //  // ---------------------------------------------------------------------------- //   sum,    . const sum = reduce((a, i) =&gt; a + i)(0); //     . const length = a =&gt; a.length; //       . const div = a =&gt; b =&gt; a / b; //   compose()        . //    compose()     . const calcPopularity = compose(    B1(div)(sum)(length),    map(prop('popularity')),    filter(prop('found')), ); const averagePopularity = calcPopularity(victorianSlang); console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br>  Si tout ce code vous semble compl√®tement insens√©, ne vous en faites pas.  Je l'ai inclus ici comme un exercice intellectuel, et non pour vous d√©ranger. <br><br>  Dans ce cas, le travail principal est dans la fonction <code>compose()</code> .  Si vous lisez son contenu de bas en haut, il s'av√®re que les calculs commencent par filtrer le tableau par la propri√©t√© de ses √©l√©ments <code>found</code> .  Ensuite, nous r√©cup√©rons la propri√©t√© de l'√©l√©ment de <code>popularity</code> aide de <code>map()</code> .  Apr√®s cela, nous utilisons le soi-disant ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">combinateur merle</a> ¬ª.  Cette entit√© est repr√©sent√©e comme une fonction <code>B1</code> , qui est utilis√©e pour effectuer deux passes de calculs sur un ensemble de donn√©es d'entr√©e.  Pour mieux comprendre cela, jetez un ≈ìil √† ces exemples: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,  , : const avg1 = B1(div)(sum)(length); const avg2 = arr =&gt; div(sum(arr))(length(arr)); const avg3 = arr =&gt; ( sum(arr) / length(arr) ); const avg4 = arr =&gt; arr.reduce((a, x) =&gt; a + x, 0) / arr.length;</span></span></code> </pre> <br>  Encore une fois, si vous ne comprenez plus rien - ne vous inqui√©tez pas.  Ceci est juste une d√©monstration que JavaScript peut √™tre √©crit de diff√©rentes mani√®res.  De ces caract√©ristiques, c'est la beaut√© de ce langage. <br><br><h2>  <font color="#3AC1EF">5. R√©soudre le probl√®me en un seul passage avec le calcul de la valeur moyenne cumul√©e</font> </h2><br>  Toutes les constructions de logiciels ci-dessus font un bon travail de r√©solution de notre probl√®me (y compris le cycle imp√©ratif).  Ceux qui utilisent la m√©thode <code>.reduce()</code> ont quelque chose en commun.  Ils sont bas√©s sur la division du probl√®me en petits fragments.  Ces fragments sont ensuite assembl√©s de diff√©rentes mani√®res.  En analysant ces solutions, vous remarquerez peut-√™tre que nous parcourons le tableau trois fois.  On a l'impression que c'est inefficace.  Ce serait bien s'il y avait un moyen de traiter le tableau et de retourner le r√©sultat en une seule passe.  Cette m√©thode existe, mais son application n√©cessitera le recours aux math√©matiques. <br><br>  Afin de calculer la valeur moyenne des √©l√©ments du tableau en un seul passage, nous avons besoin d'une nouvelle m√©thode.  Vous devez trouver un moyen de calculer la moyenne en utilisant la moyenne pr√©c√©demment calcul√©e et la nouvelle valeur.  Nous recherchons cette m√©thode en utilisant l'alg√®bre. <br><br>  La valeur moyenne de <code>n</code> nombres peut √™tre trouv√©e en utilisant cette formule: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea8/922/a8a/ea8922a8ad59e55aa604bf01c72b55e4.png"></div><br>  Afin de conna√Ætre le nombre moyen de <code>n + 1</code> , la m√™me formule fera l'affaire, mais dans une entr√©e diff√©rente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77c/ee8/a1f/77cee8a1fe717b88a55b2f2af6f222e2.png"></div><br>  Cette formule est la m√™me que celle-ci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/651/b3a/0ca/651b3a0caa501b140e23cbce68a96720.png"></div><br>  Et la m√™me chose que celle-ci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f7b/e1b/da4/f7be1bda4b12343eee3dde51d80f95c0.png"></div><br>  Si vous convertissez cela un peu, vous obtenez ce qui suit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/038/165/1b5/0381651b520c5136458129c1882a44af.png"></div><br>  Si vous ne voyez pas l'int√©r√™t de tout cela, alors √ßa va.  Le r√©sultat de toutes ces transformations est qu'√† l'aide de la derni√®re formule, nous pouvons calculer la valeur moyenne au cours d'une seule travers√©e du tableau.  Pour ce faire, vous devez conna√Ætre la valeur de l'√©l√©ment actuel, la valeur moyenne calcul√©e √† l'√©tape pr√©c√©dente et le nombre d'√©l√©ments.  De plus, la plupart des calculs peuvent √™tre effectu√©s dans la fonction r√©ducteur: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      // ---------------------------------------------------------------------------- function averageScores({avg, n}, slangTermInfo) {    if (!slangTermInfo.found) {        return {avg, n};       return {        avg: (slangTermInfo.popularity + n * avg) / (n + 1),        n:  n + 1,    }; } //  // ---------------------------------------------------------------------------- //       . const initialVals    = {avg: 0, n: 0}; const averagePopularity = victorianSlang.reduce(averageScores, initialVals).avg; console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br>  Gr√¢ce √† cette approche, la valeur n√©cessaire peut √™tre trouv√©e en contournant le tableau une seule fois.  D'autres approches utilisent une passe pour filtrer le tableau, une autre pour en extraire les donn√©es n√©cessaires et une autre pour trouver la somme des valeurs des √©l√©ments.  Ici, tout rentre dans un passage √† travers le tableau. <br><br>  Veuillez noter que cela ne rend pas n√©cessairement les calculs plus efficaces.  Avec cette approche, plus de calculs doivent √™tre effectu√©s.  Lorsque chaque nouvelle valeur arrive, nous effectuons les op√©rations de multiplication et de division, ce faisant pour maintenir la valeur moyenne actuelle dans l'√©tat actuel.  Dans d'autres solutions √† ce probl√®me, nous divisons un num√©ro en un autre une seule fois - √† la fin du programme.  Mais cette approche est beaucoup plus efficace en termes d'utilisation de la m√©moire.  Les tableaux interm√©diaires ne sont pas utilis√©s ici, par cons√©quent, nous devons stocker en m√©moire uniquement un objet avec deux valeurs. <br><br>         .        .     ,     .   .  ,   ,      . <br><br><h2> <font color="#3AC1EF"> ?</font> </h2><br>              ?   ,     . ,    -  . , ,      ,       .         ,       .       ,           .          ,      ,       . <br><br> ,  -     ,           .       ,         ?   .      .  ‚Äî   . <br><br><h2> <font color="#3AC1EF"></font> </h2><br>         : <br><br><ol><li>   <code>.reduce()</code> . </li><li>    <code>.filter()</code>  <code>.map()</code> ,   ‚Äî  <code>.reduce()</code>       . </li><li>   ,      . </li><li>     . </li><li>         . </li></ol><br>  , -,     ?    ‚Äî  .      -  ‚Äî     ,          : <br><br><ol><li>    ,     .      ‚Äî   . </li><li>    ,    ,    ‚Äî     . </li><li> , ,        ‚Äî   ,     . </li></ol><br> <b> !</b>        JavaScript-? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/a09/9e4/5a8/a099e45a81c9dafd3a3673edd5ea415b.jpg"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458030/">https://habr.com/ru/post/fr458030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458014/index.html">Robot FEDOR - formation avec le nouvel √©quipage de l'ISS et les premi√®res t√¢ches spatiales</a></li>
<li><a href="../fr458018/index.html">composer vs npm: d√©veloppement multi-modules</a></li>
<li><a href="../fr458020/index.html">R√©sum√© des √©v√©nements informatiques de juillet</a></li>
<li><a href="../fr458022/index.html">Empreintes digitales √† travers des banni√®res publicitaires? Maintenant, c'est courant</a></li>
<li><a href="../fr458026/index.html">Comparaison des formats de s√©rialisation</a></li>
<li><a href="../fr458040/index.html">De Moscou √† Tomsk. L'histoire d'un mouvement</a></li>
<li><a href="../fr458042/index.html">Comment j'ai organis√© une formation en apprentissage automatique √† NSU</a></li>
<li><a href="../fr458044/index.html">S√©curit√© de l'information provinciale - stagnation ou d√©veloppement?</a></li>
<li><a href="../fr458046/index.html">Gradle Cheat Sheet</a></li>
<li><a href="../fr458048/index.html">La d√©l√©gation comme outil de gestion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>