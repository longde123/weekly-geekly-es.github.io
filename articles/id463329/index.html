<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘µğŸ¾ âœğŸ¿ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ¿ Pengembangan diagram pohon dinamis menggunakan SVG dan Vue.js ğŸ’£ ğŸ›´ ğŸ—½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bahan, terjemahan yang kami terbitkan hari ini, dikhususkan untuk proses pengembangan sistem visualisasi untuk diagram pohon yang dinamis. Untuk mengg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengembangan diagram pohon dinamis menggunakan SVG dan Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/463329/">  Bahan, terjemahan yang kami terbitkan hari ini, dikhususkan untuk proses pengembangan sistem visualisasi untuk diagram pohon yang dinamis.  Untuk menggambar kurva Bezier kubik, teknologi SVG (Scalable Vector Graphics, scalable vector graphics) digunakan di sini.  Pekerjaan reaktif dengan data diatur oleh Vue.js. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ini adalah</a> versi demo dari sistem yang dapat digunakan untuk percobaan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/917/18f/9bb/91718f9bbe30a79beeeb537f7b49b07e.png"></div><br>  <i><font color="#999999">Bagan Pohon Interaktif</font></i> <br><a name="habracut"></a><br>  Kombinasi fitur kuat dari SVG dan kerangka kerja Vue.js memungkinkan kami untuk membuat sistem untuk membangun diagram yang berbasis data, interaktif, dan dapat disesuaikan. <br><br>  Diagram adalah kumpulan kurva Bezier kubik mulai dari satu titik.  Kurva berakhir pada titik yang berbeda berjarak sama satu sama lain.  Posisi akhir mereka tergantung pada data yang dimasukkan oleh pengguna.  Akibatnya, bagan ini dapat bereaksi secara reaktif terhadap perubahan data. <br><br>  Pertama, kita akan berbicara tentang bagaimana kurva kubik Bezier terbentuk, kemudian kita akan mencari cara untuk merepresentasikannya dalam sistem koordinat elemen <code>&lt;svg&gt;</code> , dan berbicara tentang membuat topeng untuk gambar. <br><br>  Penulis materi mengatakan bahwa dia menyiapkan banyak ilustrasi untuknya, berusaha membuatnya dimengerti dan menarik.  Tujuan dari materi ini adalah untuk membantu semua orang mendapatkan pengetahuan dan keterampilan yang diperlukan untuk mengembangkan sistem diagram mereka sendiri. <br><br><h2>  <font color="#3AC1EF">Svg</font> </h2><br><h3>  <font color="#3AC1EF">â– Bagaimana kurva Bezier kubik terbentuk?</font> </h3><br>  Kurva yang digunakan dalam proyek ini disebut Cubic Bezier Curve.  Gambar berikut menunjukkan elemen kunci dari kurva ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f5/36f/6b1/6f536f6b1bf9ce9198e78640a17e49e6.png"></div><br>  <i><font color="#999999">Elemen Kunci dari Kurva Kubik Bezier</font></i> <br><br>  Kurva digambarkan oleh empat pasang koordinat.  Pasangan pertama <code>(x0, y0)</code> adalah titik awal jangkar kurva.  Pasangan koordinat terakhir <code>(x3, y3)</code> adalah titik referensi akhir. <br><br>  Di antara titik-titik ini, Anda dapat melihat apa yang disebut titik kontrol.  Ini intinya <code>(x1, y1)</code> dan intinya <code>(x2, y2)</code> . <br><br>  Lokasi titik kontrol sehubungan dengan titik kontrol menentukan bentuk kurva.  Jika kurva ditetapkan hanya oleh titik awal dan akhir, koordinat <code>(x0, y0)</code> dan <code>(x3, y3)</code> , maka kurva ini akan terlihat seperti segmen lurus yang terletak di diagonal. <br><br>  Sekarang kita akan menggunakan koordinat dari empat titik yang dijelaskan di atas untuk memplot kurva menggunakan elemen <code>&lt;path&gt;</code> SVG.  Berikut adalah sintaks yang digunakan dalam elemen <code>&lt;path&gt;</code> untuk membangun kurva Bezier kubik: <br><br><pre> <code class="javascript hljs">&lt;path D=<span class="hljs-string"><span class="hljs-string">"M x0,y0 C x1,y1 x2,y2 x3,y3"</span></span> /&gt;</code> </pre> <br>  Huruf <code></code> , yang dapat dilihat dalam kode, adalah singkatan dari Cubic Bezier Curve.  Huruf kecil ( <code>c</code> ) berarti penggunaan nilai relatif, huruf besar ( <code>C</code> ) berarti penggunaan nilai absolut.  Saya menggunakan nilai absolut untuk membangun diagram, ini ditunjukkan dengan huruf kapital yang digunakan dalam contoh. <br><br><h3>  <font color="#3AC1EF">â–Membuat diagram simetris</font> </h3><br>  Simetri adalah aspek kunci dari proyek ini.  Untuk membangun diagram simetris, saya hanya menggunakan satu variabel, menerima atas dasar nilai-nilai seperti tinggi, lebar atau koordinat pusat dari objek tertentu. <br><br>  Beri nama <code>size</code> variabel ini.  Karena bagan diorientasikan secara horizontal - variabel <code>size</code> dapat dianggap sebagai seluruh ruang horisontal yang tersedia untuk bagan. <br><br>  Tetapkan nilai yang realistis untuk variabel ini.  Kami akan menggunakan nilai ini untuk menghitung koordinat elemen bagan. <br><br><pre> <code class="javascript hljs">size = <span class="hljs-number"><span class="hljs-number">1000</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Menemukan koordinat elemen bagan</font> </h2><br>  Sebelum kita dapat menemukan koordinat yang diperlukan untuk membangun diagram, kita perlu berurusan dengan sistem koordinat SVG. <br><br><h3>  <font color="#3AC1EF">â–Sistem koordinasi dan kotak tampilan</font> </h3><br>  Atribut <code>&lt;svg&gt; viewBox</code> sangat penting dalam proyek kami.  Faktanya adalah ini menggambarkan sistem koordinat pengguna dari gambar SVG.  Sederhananya, <code>viewBox</code> menentukan posisi dan ukuran ruang di mana gambar SVG terlihat di layar akan dibuat. <br><br>  Atribut <code>viewBox</code> terdiri dari empat angka yang menentukan parameter sistem koordinat dan berikut ini dalam urutan ini: <code>min-x</code> , <code>min-y</code> , <code>width</code> , <code>height</code> .  Parameter <code>min-x</code> dan <code>min-y</code> mengatur asal sistem koordinat pengguna, parameter <code>width</code> dan <code>height</code> mengatur lebar dan tinggi gambar yang ditampilkan.  Di sini akan terlihat seperti apa atribut <code>viewBox</code> : <br><br><pre> <code class="javascript hljs">&lt;svg viewBox=<span class="hljs-string"><span class="hljs-string">"min-x min-y width height"</span></span>&gt;...&lt;<span class="hljs-regexp"><span class="hljs-regexp">/svg&gt;</span></span></code> </pre> <br>  Variabel <code>size</code> yang kami jelaskan di atas akan digunakan untuk mengontrol parameter <code>width</code> dan <code>height</code> sistem koordinat ini. <br><br>  Kemudian, di bagian Vue.js, kita akan mengikat <code>viewBox</code> ke properti yang dihitung untuk menentukan nilai <code>width</code> dan <code>height</code> .  Selain itu, dalam proyek kami, properti <code>min-x</code> dan <code>min-y</code> akan selalu disetel ke 0. <br><br>  Perhatikan bahwa kita tidak menggunakan atribut <code>height</code> dan <code>width</code> dari elemen <code>&lt;svg&gt;</code> itu sendiri.  Kami akan mengaturnya menjadi <code>width: 100%</code> dan <code>height: 100%</code> menggunakan CSS.  Ini akan memungkinkan kami untuk membuat gambar SVG yang secara fleksibel menyesuaikan dengan ukuran halaman. <br><br>  Sekarang setelah sistem koordinat pengguna siap untuk menggambar bagan, mari kita bicara tentang menggunakan variabel <code>size</code> untuk menghitung koordinat elemen-elemen bagan. <br><br><h3>  <font color="#3AC1EF">Coordinates Koordinat tidak berubah dan dinamis</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efc/a82/d19/efca82d1952a08d5c3582acf7fcab49e.png"></div><br>  <i><font color="#999999">Konsep bagan</font></i> <br><br>  Lingkaran di mana gambar ditampilkan adalah bagian dari diagram.  Itulah mengapa penting untuk memasukkannya dalam perhitungan sejak awal.  Mari kita, berdasarkan ilustrasi di atas, mencari koordinat untuk lingkaran dan satu kurva eksperimental. <br><br>  Ketinggian grafik dibagi menjadi dua bagian.  Ini adalah <code>topHeight</code> ( <code>size</code> 20%) dan <code>bottomHeight</code> (ukuran 80% sisanya).  Lebar total diagram dibagi menjadi 2 bagian - panjang masing-masing adalah 50% dari <code>size</code> . <br><br>  Ini membuat kesimpulan dari parameter lingkaran tidak memerlukan penjelasan khusus (di sini indikator <code>topHeight</code> dan <code>topHeight</code> digunakan).  Parameter <code>radius</code> diatur ke setengah nilai <code>topHeight</code> .  Berkat ini, lingkarannya sangat cocok dengan ruang yang tersedia. <br><br>  Sekarang mari kita lihat koordinat kurva. <br><br><ul><li>  Koordinat <code>(x0, y0)</code> menentukan titik referensi awal dari kurva.  Koordinat ini tetap konstan sepanjang waktu.  Koordinat <code>x0</code> adalah pusat bagan (setengah <code>size</code> ), dan <code>y0</code> adalah koordinat di mana bagian bawah lingkaran berakhir.  Oleh karena itu, dalam rumus untuk menghitung koordinat ini, jari-jari lingkaran digunakan.  Hasilnya, koordinat titik ini dapat ditemukan dengan rumus berikut <code>: (50% size, 20% size + radius)</code> . </li><li>  Koordinat <code>(x1, y1)</code> adalah titik kontrol pertama dari kurva.  Itu juga tetap tidak berubah untuk semua kurva.  Jika kita tidak lupa bahwa kurva harus simetris, ternyata nilai <code>x1</code> dan <code>y1</code> selalu sama dengan setengah dari nilai <code>size</code> .  Maka rumus untuk perhitungan mereka: <code>(50% size, 50% size)</code> . </li><li>  Koordinat <code>(x2, y2)</code> mewakili titik kontrol kedua dari kurva Bezier.  Di sini <code>x2</code> menunjukkan bentuk kurva yang seharusnya.  Indikator ini dihitung secara dinamis untuk setiap kurva.  Dan indikator <code>y2</code> , seperti sebelumnya, akan menjadi setengah <code>size</code> .  Maka rumus berikut untuk menghitung koordinat ini: <code>(x2, 50% size)</code> . </li><li>  Koordinat <code>(x3, y3)</code> adalah titik referensi ujung kurva.  Koordinat ini menunjukkan di mana Anda ingin selesai menggambar garis.  Di sini, nilai <code>x3</code> , seperti <code>x2</code> , dihitung secara dinamis.  Dan <code>y3</code> mengambil nilai yang sama dengan <code>size</code> 80%.  Hasilnya, kami memperoleh rumus berikut: <code>(x3, 80% size)</code> . </li></ul><br>  Kami menulis ulang, secara umum, kode untuk elemen <code>&lt;path&gt;</code> , dengan mempertimbangkan formula yang baru saja kami peroleh.  Persentase yang digunakan di atas disajikan di sini dengan membaginya dengan 100. <br><br><pre> <code class="javascript hljs">&lt;path d=<span class="hljs-string"><span class="hljs-string">"M size*0.5, (size*0.2) + radius          C size*0.5, size*0.5           x2,    size*0.5           x3,    size*0.8"</span></span> &gt;</code> </pre> <br>  Harap perhatikan bahwa pada pandangan pertama, penggunaan persentase dalam formula kami mungkin tampak opsional, hanya berdasarkan pendapat saya sendiri.  Namun, nilai-nilai ini tidak diterapkan pada kemauan, tetapi karena penggunaannya membantu mencapai simetri dan proporsi diagram yang benar.  Setelah Anda merasakan peran mereka dalam pembuatan bagan, Anda dapat mencoba nilai persentase Anda sendiri dan memeriksa hasil yang diperoleh dengan menerapkannya. <br><br>  Sekarang mari kita bicara tentang bagaimana kita akan mencari koordinat <code>x2</code> dan <code>x3</code> .  Mereka memungkinkan Anda untuk secara dinamis membuat banyak kurva berdasarkan <code>index</code> elemen dalam array yang sesuai. <br><br>  Membagi ruang horisontal yang tersedia dari bagan menjadi bagian yang sama didasarkan pada jumlah elemen dalam array.  Akibatnya, setiap bagian menerima ruang yang sama di sepanjang sumbu x. <br><br>  Rumus yang kami peroleh selanjutnya harus bekerja dengan sejumlah elemen.  Tapi di sini kita akan bereksperimen dengan array yang mengandung 5 elemen: <code>[0,1,2,3,4]</code> .  Visualisasi array seperti itu berarti perlu menggambar 5 kurva. <br><br><h3>  <font color="#3AC1EF">â–Menemukan koordinat dinamis (x2 dan x3)</font> </h3><br>  Pertama, saya membagi <code>size</code> dengan jumlah elemen, yaitu dengan panjang array.  Saya menyebut <code>distance</code> variabel ini.  Ini mewakili jarak antara dua elemen. <br><br><pre> <code class="javascript hljs">distance = size/arrayLength <span class="hljs-comment"><span class="hljs-comment">// distance = 1000/5 = 200</span></span></code> </pre> <br>  Lalu saya berjalan di sekitar array dan mengalikan indeks masing-masing elemen ( <code>index</code> ) dengan <code>distance</code> .  Untuk kesederhanaan, saya cukup memanggil <code>x</code> baik parameter <code>x2</code> dan parameter <code>x3</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  x2  x3 x = index * distance</span></span></code> </pre> <br>  Jika Anda menerapkan nilai yang diperoleh saat membuat diagram, yaitu, menggunakan nilai <code>x</code> dihitung di atas untuk <code>x2</code> dan <code>x3</code> , itu akan terlihat sedikit aneh. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/311/f53/1c6/311f531c60f80f01f519f0a128cfc164.png"></div><br>  <i><font color="#999999">Diagram asimetris</font></i> <br><br>  Seperti yang Anda lihat, elemen-elemen tersebut berada di area di mana seharusnya mereka berada, tetapi diagram tersebut ternyata asimetris.  Tampaknya di bagian kirinya ada lebih banyak elemen daripada di kanan. <br><br>  Sekarang saya perlu membuat nilai <code>x3</code> terletak di tengah segmen yang sesuai, yang panjangnya diatur menggunakan variabel <code>distance</code> . <br><br>  Untuk membawa diagram ke bentuk yang saya butuhkan, saya hanya menambahkan <code>x</code> setengah nilai <code>distance</code> . <br><br><pre> <code class="javascript hljs">x = index * distance + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  Akibatnya, saya menemukan pusat segmen <code>distance</code> dan menempatkan koordinat <code>x3</code> di dalamnya.  Selain itu, saya membawa ke formulir yang kita butuhkan koordinat <code>x2</code> untuk kurva No. 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e80/f69/f9d/e80f69f9d18b790c7634a9b12b2afc53.png"></div><br>  <i><font color="#999999">Bagan simetris</font></i> <br><br>  Menambahkan setengah nilai <code>distance</code> ke koordinat <code>x2</code> dan <code>x3</code> membuat rumus perhitungan untuk koordinat ini cocok untuk memvisualisasikan array yang berisi elemen genap dan ganjil. <br><br><h3>  <font color="#3AC1EF">â– Penyembunyian gambar</font> </h3><br>  Kita perlu gambar tertentu untuk ditampilkan di bagian atas diagram, di dalam lingkaran.  Untuk mengatasi masalah ini, saya membuat topeng kliping yang berisi lingkaran. <br><br><pre> <code class="javascript hljs">&lt;defs&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">mask</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"svg-mask"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">circle</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"radius"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:cx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"halfSize"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:cy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"topHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"white"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">mask</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Kemudian, dengan menggunakan tag <code>&lt;image&gt;</code> dari elemen <code>&lt;image&gt;</code> <code>&lt;svg&gt;</code> <code>&lt;image&gt;</code> untuk menampilkan gambar, saya menautkan gambar ke elemen <code>&lt;mask&gt;</code> yang dibuat di atas menggunakan atribut <code>mask</code> dari elemen <code>&lt;image&gt;</code> . <br><br><pre> <code class="javascript hljs">&lt;image mask=<span class="hljs-string"><span class="hljs-string">"url(#svg-mask)"</span></span>      :x=<span class="hljs-string"><span class="hljs-string">"(halfSize-radius)"</span></span>      :y=<span class="hljs-string"><span class="hljs-string">"(topHeight-radius)"</span></span> ... &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">image</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Karena kami mencoba menyesuaikan gambar persegi menjadi "jendela" bundar, saya menyesuaikan posisi elemen dengan mengurangi parameter <code>radius</code> dari parameter yang sesuai.  Hasilnya, gambar terlihat melalui topeng yang dibuat dalam bentuk lingkaran. <br><br>  Mari kita kumpulkan semua yang kita bicarakan dalam satu gambar.  Ini akan membantu kita melihat gambaran keseluruhan dari kemajuan pekerjaan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/38b/27e/37f/38b27e37ff2a7da017e0f67b7ac68b7e.png"></div><br>  <i><font color="#999999">Data yang digunakan dalam menghitung parameter grafik</font></i> <br><br><h2>  <font color="#3AC1EF">Membuat gambar SVG dinamis menggunakan Vue.js</font> </h2><br>  Pada titik ini, kami menemukan kurva Bezier kubik dan melakukan perhitungan yang diperlukan untuk membentuk diagram.  Akibatnya, kita sekarang dapat membuat diagram SVG statis.  Jika kita menggabungkan kemampuan SVG dan Vue.js, kita dapat membuat diagram yang didorong oleh data.  Grafik statis akan menjadi dinamis. <br><br>  Pada bagian ini, kami merevisi diagram SVG, menyajikannya sebagai satu set komponen Vue.  Kami juga akan melampirkan atribut SVG ke properti yang dihitung dan membuat bagan menanggapi perubahan data. <br><br>  Selain itu, pada akhir proyek, kami akan membuat komponen yang merupakan panel konfigurasi.  Komponen ini akan digunakan untuk memasukkan data yang akan dikirim ke bagan. <br><br><h3>  <font color="#3AC1EF">â–Mengikat data dengan melihat parameter Box</font> </h3><br>  Mari kita mulai dengan menyesuaikan sistem koordinat.  Tanpa melakukan ini, kita tidak akan bisa menggambar gambar SVG.  Properti <code>viewbox</code> dikomputasi akan mengembalikan apa yang kita butuhkan menggunakan variabel <code>size</code> .  Akan ada empat nilai yang dipisahkan oleh spasi.  Semua ini akan menjadi nilai atribut <code>viewBox</code> dari elemen <code>&lt;svg&gt;</code> . <br><br><pre> <code class="javascript hljs">viewbox() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"0 0 "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size; }</code> </pre> <br>  Di SVG, nama atribut <code>viewBox</code> sudah ditulis menggunakan gaya unta. <br><br><pre> <code class="javascript hljs">&lt;svg viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 1000 1000"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Oleh karena itu, untuk mengikat atribut ini dengan benar ke properti yang dihitung, saya menuliskan nama atribut dalam gaya kebab dan menempatkan pengubah <code>.camel</code> setelahnya.  Dengan pendekatan ini, dimungkinkan untuk "menipu" HTML dan menerapkan ikatan atribut dengan benar. <br><br><pre> <code class="javascript hljs">&lt;svg :view-box.camel=<span class="hljs-string"><span class="hljs-string">"viewbox"</span></span>&gt;   ... &lt;<span class="hljs-regexp"><span class="hljs-regexp">/svg&gt;</span></span></code> </pre> <br>  Sekarang ketika mengubah <code>size</code> bagan dikonfigurasi ulang secara independen.  Kami tidak perlu mengubah tata letak secara manual. <br><br><h3>  <font color="#3AC1EF">â– Penghitungan parameter kurva</font> </h3><br>  Karena sebagian besar nilai yang diperlukan untuk membangun kurva dihitung berdasarkan variabel tunggal ( <code>size</code> ), saya biasa mencari semua koordinat tetap dengan properti yang dihitung.  Apa yang kita sebut "koordinat tetap" di sini dihitung berdasarkan <code>size</code> , dan setelah itu tidak berubah dan tidak tergantung pada berapa banyak kurva yang akan dimasukkan oleh diagram. <br><br>  Jika Anda mengubah <code>size</code> - "koordinat tetap" akan dihitung ulang.  Setelah itu, mereka tidak akan berubah sampai <code>size</code> berikutnya berubah.  Diberikan di atas, berikut adalah lima nilai yang perlu kita gambar kurva Bezier: <br><br><ul><li> <code>topHeight â€” size * 0.2</code> </li> <li> <code>bottomHeight â€” size * 0.8</code> </li> <li> <code>width â€” size</code> </li> <li> <code>halfSize â€” size * 0.5</code> </li> <li> <code>distance â€” size/arrayLength</code> </li> </ul><br>  Sekarang kita hanya memiliki dua nilai yang tidak diketahui yang tersisa - <code>x2</code> dan <code>x3</code> .  Rumus untuk menghitungnya telah kami peroleh: <br><br><pre> <code class="javascript hljs">x = index * distance + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  Untuk menemukan nilai tertentu, kita perlu mengganti indeks elemen array dalam rumus ini. <br><br>  Sekarang mari kita bertanya pada diri sendiri apakah properti yang dihitung tepat untuk kita temukan <code>x</code> .  Jawab dengan singkat pertanyaan ini, lalu - tidak, itu tidak akan berhasil. <br><br>  Properti yang dihitung tidak dapat melewati parameter.  Faktanya adalah bahwa ini adalah properti, bukan fungsi.  Selain itu, kebutuhan untuk menggunakan parameter untuk menghitung sesuatu berarti bahwa tidak ada keuntungan nyata dari menggunakan properti yang dihitung dalam hal caching. <br><br>  Harap dicatat bahwa ada pengecualian terkait prinsip di atas.  Ini tentang Vuex.  Jika Anda menggunakan Vuex getter yang mengembalikan fungsi, Anda bisa meneruskan parameter kepada mereka. <br><br>  Dalam hal ini, kami tidak menggunakan Vuex.  Tetapi bahkan dalam situasi ini, kami memiliki beberapa cara untuk menyelesaikan masalah ini. <br><br><h3>  <font color="#3AC1EF">â– Opsi nomor 1</font> </h3><br>  Anda dapat mendeklarasikan fungsi ke mana <code>index</code> dilewatkan sebagai argumen, dan yang mengembalikan hasil yang kita butuhkan.  Pendekatan ini terlihat lebih bersih jika kita akan menggunakan nilai yang dikembalikan oleh fungsi serupa di beberapa tempat di templat. <br><br><pre> <code class="javascript hljs">&lt;g v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"(item, i) in itemArray"</span></span>&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"'M' + halfSize + ','     + (topHeight+r) +' '+            'C' + halfSize + ','     + halfSize +' '+                     calculateXPos(i) + ',' + halfSize +' '+                  calculateXPos(i) + ',' + bottomHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">  /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Metode <code>calculateXPos()</code> akan melakukan perhitungan setiap kali dipanggil.  Metode ini sebagai argumen indeks elemen - <code>i</code> . <br><br><pre> <code class="javascript hljs">&lt;script&gt;  methods: {    calculateXPos (i)    {      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance * i + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)    }  } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berikut adalah</a> contoh pada CodePen yang menggunakan solusi ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/dd6/b8c/28edd6b8cb97d3352108946cfb50a9cd.png"></div><br>  <i><font color="#999999">Layar untuk varian aplikasi pertama</font></i> <br><br><h3>  <font color="#3AC1EF">â– Opsi nomor 2</font> </h3><br>  Opsi ini lebih baik daripada yang pertama.  Kita dapat mengekstrak markup SVG kecil yang diperlukan untuk membangun kurva menjadi komponen anak kecil yang terpisah dan meneruskan <code>index</code> kepadanya sebagai salah satu properti. <br><br>  Dengan pendekatan ini, Anda bahkan dapat menggunakan properti yang dihitung untuk menemukan <code>x2</code> dan <code>x3</code> . <br><br><pre> <code class="javascript hljs">&lt;g v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"(item, i) in items"</span></span>&gt;    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">cubic-bezier</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:index</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"i"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:half-size</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"halfSize"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:top-height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"topHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:bottom-height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"bottomHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"radius"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"distance"</span></span></span></span><span class="xml"><span class="hljs-tag">     &gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">cubic-bezier</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Opsi ini memberi kita kesempatan untuk mengatur kode dengan lebih baik.  Misalnya, kita bisa membuat komponen anak lain untuk topeng: <br><br><pre> <code class="javascript hljs">&lt;clip-mask :title=<span class="hljs-string"><span class="hljs-string">"title"</span></span>           :half-size=<span class="hljs-string"><span class="hljs-string">"halfSize"</span></span>           :top-height=<span class="hljs-string"><span class="hljs-string">"topHeight"</span></span>                               :r=<span class="hljs-string"><span class="hljs-string">"radius"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">clip-mask</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><h3>  <font color="#3AC1EF">â– Panel konfigurasi</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/7e6/54f/d047e654fc2c1cda88bb618db3668fda.png"></div><br>  <i><font color="#999999">Panel konfigurasi</font></i> <br><br>  Anda mungkin sudah melihat panel konfigurasi, dipanggil oleh tombol yang terletak di sudut kiri atas layar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh di</a> atas.  Panel ini memudahkan untuk menambahkan elemen ke array dan menghapusnya dari itu.  Mengikuti ide-ide yang dibahas di bagian "Opsi # 2", saya membuat komponen turunan untuk panel konfigurasi.  Berkat ini, komponen tingkat atas bersih dan mudah dibaca.  Hasilnya, komponen Vue kami yang kecil dan bagus terlihat seperti di bawah ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5af/fe8/172/5affe817227430e34e81425910a2b525.png"></div><br>  <i><font color="#999999">Pohon Komponen Proyek</font></i> <br><br>  Ingin melihat kode yang mengimplementasikan versi proyek ini?  Jika demikian, lihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4e/f1a/18b/e4ef1a18b00c15730adfc48077994608.png"></div><br>  <i><font color="#999999">Layar untuk varian aplikasi kedua</font></i> <br><br><h2>  <font color="#3AC1EF">Repositori proyek</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ini adalah</a> repositori GitHub proyek ("Opsi # 2" diimplementasikan di sini).  Saya percaya ini akan berguna bagi Anda untuk melihatnya sebelum Anda melanjutkan ke bagian selanjutnya. <br><br><h2>  <font color="#3AC1EF">PR</font> </h2><br>  Cobalah untuk membuat diagram yang sama dengan yang kami jelaskan di sini, tetapi buatlah itu berorientasi vertikal.  Manfaatkan ide-ide yang diuraikan dalam artikel ini. <br><br>  Jika Anda berpikir bahwa ini adalah tugas yang mudah, bahwa untuk membangun diagram seperti itu cukup untuk menukar koordinat <code>x</code> dan <code>y</code> , maka Anda benar.  Mempertimbangkan bahwa proyek yang dipertimbangkan di sini tidak dibuat sebagai universal, setelah mengubah koordinat di mana Anda membutuhkannya, Anda juga perlu mengedit kode dengan mengganti nama beberapa variabel dan metode. <br><br>  Berkat Vue.js, bagan sederhana kami dapat dilengkapi dengan fitur tambahan.  Misalnya, berikut ini: <br><br><ul><li>  Anda dapat membuat mekanisme yang memungkinkan Anda untuk beralih antara mode grafik horizontal dan vertikal. </li><li>  Kurva dapat mencoba menghidupkan.  Misalnya, menggunakan GSAP. </li><li>  Anda dapat menyesuaikan properti kurva (katakan - warna dan lebar garis) dari panel konfigurasi. </li><li>  Anda dapat menggunakan perpustakaan eksternal untuk mengatur penyimpanan diagram dalam format grafik apa pun atau sebagai file PDF.  Bahan-bahan ini dapat diunduh untuk mereka yang bekerja dengan bagan. </li></ul><br>  Coba pekerjaan rumah ini.  Dan jika Anda memiliki masalah - di bawah ini akan diberikan tautan ke solusinya. <br><br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Elemen <code>&lt;path&gt;</code> adalah salah satu fitur kuat dari SVG.  Elemen ini memungkinkan Anda membuat berbagai gambar dengan akurasi tinggi.  Di sini kami menemukan bagaimana kurva Bezier terstruktur, dan bagaimana mempraktikkannya untuk membuat diagram Anda sendiri. <br><br>       ,  ,   JavaScript-.  Vue.js     .  ,   ,         , ,    DOM.        ,  â€”        . <br><br> ,    ,   ,  ,   ,      Vue.js  SVG.      â€”   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> ,      Vue.js.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> â€”   . <br><br>   ,       - ,   ,        ,   â€” . <br><br>  <b>Pembaca yang budiman!</b>      ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id463329/">https://habr.com/ru/post/id463329/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id463313/index.html">Pendekatan alternatif untuk berlangganan acara, atau apakah EventObject benar-benar diperlukan?</a></li>
<li><a href="../id463317/index.html">Rincian teknis peretasan bank Capital One di AWS</a></li>
<li><a href="../id463321/index.html">Keranjang kegunaan dan checkout: analisis dari 20 toko online teratas Rusia</a></li>
<li><a href="../id463325/index.html">Game Designer Reflection: Karakter untuk Game yang Belum Keluar</a></li>
<li><a href="../id463327/index.html">Vue.js: 3 anti-pola</a></li>
<li><a href="../id463331/index.html">Klien Apollo. Sekarang dengan React hooks</a></li>
<li><a href="../id463333/index.html">Memilih sistem manajemen pengujian pada 2019</a></li>
<li><a href="../id463335/index.html">Menggunakan analisa statis PVS-Studio dalam pengembangan untuk sistem tertanam dalam C dan C ++</a></li>
<li><a href="../id463337/index.html">Menggunakan Immer untuk Mengelola Status Aplikasi Bereaksi</a></li>
<li><a href="../id463347/index.html">Membuka serangkaian kursus pelatihan bersama Group-IB dan Belkasoft di bidang forensik komputer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>