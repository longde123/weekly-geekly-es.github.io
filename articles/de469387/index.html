<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùóÔ∏è ‚¨ÖÔ∏è üìØ Die Geschichte eines "Entwicklers" oder wie ein Neuling eine Anwendung f√ºr iOS schreibt üöµüèº üëó ü•©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Also, Mai 2018. In 7 Jahren wurden 7 Versuche unternommen, etwas f√ºr iOS zu programmieren. Und jedes Mal das Gleiche: Objective-C ist etwas Unheimlich...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die Geschichte eines "Entwicklers" oder wie ein Neuling eine Anwendung f√ºr iOS schreibt</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469387/"><img src="https://habrastorage.org/webt/oe/bp/os/oebpos7zdtlt8gx_bn3xaeeqct0.png"><br><br>  Also, Mai 2018.  In 7 Jahren wurden 7 Versuche unternommen, etwas f√ºr iOS zu programmieren.  Und jedes Mal das Gleiche: Objective-C ist etwas Unheimliches und Unverst√§ndliches, dann gibt es keine Ahnung.  Und dann, Hallo Welt, einmal im Jahr, im Allgemeinen ging es nicht ... <br><br>  Diesmal ein neuer Xcode und eine neue Sprache f√ºr mich Swift ... Und eine neue Idee, ich m√∂chte Benachrichtigungen f√ºr meinen Zabbix-Server pushen.  Es gibt keinen offiziellen Bestand und zu diesem Zeitpunkt gab es keine Kunden ... <br><br>  Zuvor schickte der Bot die Telegramme an den Push, aber es begann zu verschrotten und Roskomnadzor kam rechtzeitig an ... Die Blockierung des Wagens spielt keine besondere Rolle, weil  Es gibt Mikrotik und es wurde sofort "repariert". <br><br>  Es wurde beschlossen, eine Zabbix-Benachrichtigung zu schreiben, die dann nicht nur f√ºr Benachrichtigungen gilt. <br><a name="habracut"></a><br>  Wie sich herausstellte, funktioniert es nicht, nur Benachrichtigungen zu werfen.  Sie m√ºssen eine Anwendung schreiben, installieren, ein Token daraus entnehmen, Ihren Server f√ºr das Senden von Push-Benachrichtigungen erh√∂hen ... <br><br>  Programmiererfahrung war nur in PHP.  Swift ist anders, aber es sah damals nicht so einsch√ºchternd aus wie Objective-C.  Und Xcode selbst ist gut als IDE, die Code von alt nach neu konvertiert und Hinweise gibt. <br><br>  Zun√§chst Schulungsvideos, das Erlernen der Zabbix-API selbst.  Aber dann, ein Artikel nach dem anderen, wie NSURLSession funktioniert, welche Frameworks existieren. <br><br>  Die erste Version konnte sich nur beim Zabbix-Server anmelden und Trigger und Hosts angeben.  Dann wurden Ansichten von Grafiken, Werten usw. hinzugef√ºgt. <br><br>  Ich werde auf einige Punkte eingehen, auf die ich beim Schreiben der Bewerbung gesto√üen bin. <br><br><h2>  Frameworks </h2><br>  Die Frameworks wurden nicht eingegeben.  Sie sind "cool", komfortabel, aber ich m√∂chte das Projekt sp√§ter nicht reparieren, da sich etwas ge√§ndert hat.  Und das ist schon passiert.  F√ºr mich selbst habe ich beschlossen, sie nicht zu benutzen, und es ist besser, mein Fahrrad zu erfinden, um zu verstehen, wie alles funktioniert.  F√ºr JSON-Anfragen gibt es Alamofire, aber ich verwende die integrierte NSURLSession, weil  es ist genug f√ºr alles <br><br><h2>  Tests </h2><br>  Bis dahin ist mehr als ein Jahr vergangen, als ich mich entschied, Tests hinzuzuf√ºgen :) <br>  Ich dachte, dass dieses faszinierende Ding die Welt retten w√ºrde ... Aber ... ich habe verschiedene Tests geschrieben, es hier angesto√üen ... und Faulheit kam.  Ich sehe bisher keine Aufgaben in einem so kleinen Projekt, um so viel Zeit f√ºr Tests zuzuweisen ... Und dies ist nur Zeit f√ºr Codetests, ganz zu schweigen von UI-Tests. <br><br><img src="https://habrastorage.org/webt/o1/un/zo/o1unzoeht1dafvq0rfojui5fonk.png" alt="Bild"><br><h2>  Verschl√ºsselung </h2><br>  Die Verschl√ºsselung hatte mehrere Punkte. <br><br>  Apple m√∂chte in seinen Handb√ºchern, dass alle Anfragen verschl√ºsselt werden.  Und das ist richtig.  Aber wie die Praxis gezeigt hat, wollten nicht alle https f√ºr ihren Zabbix machen.  Am Anfang hatte ich nicht die Option (App Transport Security Settings), die reinen http-Verkehr zulie√ü, f√ºr den ich in den Bewertungen im AppStore gekreuzigt wurde. Dann habe ich sie nicht ohne Abenteuer aktiviert.  Xcode hat meine Zeile erst wahrgenommen, als ich gerade die gesamte Info.plist-Datei neu erstellt habe. <br><br>  Au√üerdem m√∂chte Apple alles √ºber Ihre Anwendung wissen, der √ºbliche https-Verkehr f√§llt nicht darunter.  Wenn Sie jedoch etwas "auf knifflige Weise" verschl√ºsseln m√∂chten, melden Sie dies bitte den US-Beh√∂rden. <br><br><img src="https://habrastorage.org/webt/vo/ok/q5/vookq5vegfsrnnm6zvovrcmpwro.png" alt="Bild"><br><br>  Bei der Kommunikation mit einem der Benutzer der Anwendung wurde die End-to-End-Verschl√ºsselung von PUSH-Nachrichten angefordert.  Die Nachricht muss auf dem Zabbix-Server verschl√ºsselt und nur auf dem Telefon entschl√ºsselt werden.  F√ºr so etwas hat Apple "ver√§nderbare" Benachrichtigungen.  Das hei√üt,  Wenn "ver√§nderlicher Inhalt" eingetroffen ist, m√ºssen Sie im Push etwas √§ndern, das dem entspricht, was Sie schreiben.  Ich hatte es die Nachricht entschl√ºsseln. <br><br>  Die Apple-Richtlinie ist hier nicht gegen die Verwendung von Standardverschl√ºsselungstypen.  Willst du etwas Eigenes, wie ich oben geschrieben habe, gib mir ein St√ºck Papier und kannst mir den Schl√ºssel zeigen? ... <br><br>  Ich habe die integrierte CommonCrypto-Bibliothek verwendet, daher wird dies als Standardverschl√ºsselungstyp angesehen.  Ich musste mich mit dem Code anlegen, weil  Die meisten Beispiele sind entweder sehr veraltet oder Xcode rief, dass es nicht sicher sei, nichts direkt mit Bytes und Daten zu tun habe oder Spa√ü mit IV OpenSSL-a habe. Der Offset stimmte nicht, dann stimmte etwas anderes nicht.  Infolgedessen war es m√∂glich, nicht schw√∂renden Code zu erstellen und beim Verschl√ºsseln von Nachrichten korrekt mit OpenSSL zu arbeiten. <br><br><h2>  Kurzschl√ºsse </h2><br>  Und das aufregendste Thema f√ºr mich ... Ich konnte keinen asynchronen Code schreiben ...  Zumindest habe ich bisher nicht viel verstanden, wie diese Verschl√ºsse funktionieren. <br><br><img src="https://habrastorage.org/webt/9b/gk/ob/9bgkobrxhssqlmyif-lm7glk09u.png" alt="Bild"><br><br>  Standardm√§√üig ist NSURLSession nur asynchron und ich konnte sp√§ter nicht verstehen, wie ich damit arbeiten soll ... Ich habe DispatchSemaphore verwendet, um den Code synchron zu machen ... Nat√ºrlich gab es viele Beschwerden von Benutzern, dass er abst√ºrzt und abst√ºrzt ... <br><br>  Trotzdem wurde mir klar, was und wie es auf der Rennstrecke funktionierte, welche Zeit√ºberschreitung in NSURLSession und was was.  Der Code wurde vollst√§ndig durch normale ersetzt, Fehlerbehandlungsroutinen wurden hinzugef√ºgt.  Und das Leben ist besser geworden, das Leben hat mehr Spa√ü gemacht. <br><br><h2>  Layout </h2><br><img src="https://habrastorage.org/webt/7t/my/fz/7tmyfzxt8je0azn4ygnesshmf0g.png"><br><br>  Ja, ich habe alles in einem Storyboard.  Ich wei√ü, dass dies nicht sehr ist, aber bisher gibt es nur wenige Bildschirme.  Vielleicht werde ich es sp√§ter in xibs setzen. <br><br>  iOS 13 hat √Ñnderungen an den Bildschirmanzeigen gebracht.  Zuvor wurden alle neuen Bildschirme als PUSH angezeigt, d. H.  Vollbild.  Jetzt kann dieser Bildschirm heruntergezogen werden und er wird geschlossen. <br><br>  Im Allgemeinen gab es einen Fehler, wenn Sie auf LogOut klicken und das Anmeldeformular einfach wieder reduzieren k√∂nnen.  Dies geschieht nur, wenn der letzte Xcode zusammengestellt wurde. 11. Dies wird einfach korrigiert, indem die Ansichtsoption so eingestellt wird, dass sie nur im Vollbildmodus angezeigt wird. <br><br>  SwiftUI erschien auch in iOS 13, aber wenn Sie die Anwendung jetzt wiederholen, bedeutet dies, dass Sie diejenigen vergessen, die die Anwendung auf alten Ger√§ten mit alter Firmware verwenden ... <br><br><h2>  AppStore-Layout </h2><br>  Obwohl ich die Anwendung f√ºr mich selbst geschrieben habe, habe ich mich entschlossen, sie im AppStore zu ver√∂ffentlichen.  Es ist alles nur 100 Dollar pro Jahr zu zahlen und es auszulegen.  Die Wahrheit ist immer noch, die Anwendung zu √ºberpr√ºfen, zu erkl√§ren, warum diese Anwendung usw. <br><br>  Weil  Anwendung f√ºr Zabbix, auf dem Logo wollte ich etwas verwenden, das √ºber Zabbix sagt.  Aber es war nicht da.  Ich schrieb einen Brief an Zabbix und bat ihn, die Form des Buchstabens Z zu verwenden ... Aber nein.  Deshalb habe ich mein Symbol gemalt, eine schr√§ge Kurve, aber meine) <br><br><h2>  Finanzen </h2><br>  Die Anwendung ist fast 2 Jahre alt.  Ich habe 200 US-Dollar ausgegeben, um die Anwendung im AppStore zu haben.  Abgesehen von Entwicklung und Push-Server. <br><br><img src="https://habrastorage.org/webt/pl/mi/vf/plmivfphkjfbv-f2wxo8gsjqamk.png" alt="Bild"><br>  Die Anwendung hat eine Werbung von Google ... die ... ... $ 5 brachte <br>  Das Deaktivieren von Werbung brachte 88 US-Dollar ... Die Auszahlungsschwelle liegt jedoch bei 150 US-Dollar. <br>  Dann werde ich Anzeigen im Allgemeinen l√∂schen, sobald ich die Auszahlungsschwelle erreicht habe. <br><br><h2>  Push-Server </h2><br>  Ja, ja, alles begann f√ºr ihn ... Push-Benachrichtigungen sind gefragt.  Sobald dies erledigt ist, damit Sie aufdringlich verschl√ºsseln k√∂nnen, haben viele auf verschl√ºsselt umgestellt. <br><br>  Es gibt 2 Server, Moskau und die Niederlande bei 2 Rubel / Tag.  DNS-Balancing, Nginx c Let's Encrypt, PHP-Skript zum Empfangen und Senden. <br><br>  Anfangs gab es bei Amazon einen kostenlosen Server (15 Gig Verkehr ...), aber als es soweit war, kaufte ich mir ein VPS-ku, um dorthin zu ziehen.  Und ich fand den Moment, in dem DDOS zum Hosting-Anbieter ging und vps 12 Stunden lang nicht verf√ºgbar war ... 2 Rubel, von denen ich mehr m√∂chte.  Nun, ich war immer noch bei Amazon und es hat mich noch nicht betroffen.  Daher wurde dann ein anderer f√ºr 2 Rubel pro Tag aber an einem anderen Ort genommen.  Zumindest etwas Fehlertoleranz und 15-Gigabyte-Verkehr ... Die Hauptbedenken f√ºr Amazon-Verkehr, Micro-Ddos und Sie haben Geld. <br><br>  Ich wollte Cloudflare als Balancer verwenden, aber sie m√∂chten die Delegierung der gesamten Dom√§ne an sie und nicht unter der Dom√§ne. <br><br><h2>  Einige Statistiken </h2><br>  Insgesamt fast 6.000 Downloads.  Und Brasilien ist an der Spitze ... wer h√§tte das gedacht) <br><br><img src="https://habrastorage.org/webt/zn/sd/ef/znsdefftcax1rqoctbocrnt3dp8.png" alt="Bild"><br><br><h2>  Schlussfolgerungen </h2><br><ul><li>  Swift ist nichts dergleichen) </li><li>  Die F√ºlle an Artikeln und die Bequemlichkeit der IDE in der modernen Welt erm√∂glichen Ihnen einen schnellen ersten Start. </li><li>  Die Anwendung wurde urspr√ºnglich f√ºr mich selbst geschrieben, aber es stellte sich heraus, dass es eine gute Erfahrung mit der Entwicklung und dem Auslegen im AppStore mit positiven und negativen Bewertungen war. </li><li>  Entwicklung reinigt das Gehirn gut. </li><li>  Es ist besser, die Docks zu lesen und nicht aus asynchronem Code synchron zu machen :) </li><li>  Im Allgemeinen schreiben, kopieren, studieren.  Nur so kann man in der Praxis verstehen, was was ist. </li><li>  * Kommunizieren Sie mehr mit Benutzern, sie werden definitiv sagen, warum sie es brauchen und wie sie es sehen wollen.  Ich habe ein Drittel der Funktionalit√§t der Anwendung genau nach den W√ºnschen der Benutzer hinzugef√ºgt. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469387/">https://habr.com/ru/post/de469387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469373/index.html">Die Ergebnisse des Projekts zur Schaffung einer neuronalen Schnittstelle f√ºr vollst√§ndig gel√§hmte Patienten wurden in Frage gestellt</a></li>
<li><a href="../de469375/index.html">Warum stellen Mozilla, Coil und Creative Commons 100 Millionen US-Dollar f√ºr Open Source-Projekte zur Verf√ºgung?</a></li>
<li><a href="../de469379/index.html">Anwendung formaler Modellvalidierungsmethoden f√ºr die Benutzeroberfl√§che</a></li>
<li><a href="../de469381/index.html">Agones, erstellen Sie einen Mehrbenutzer-Spieleserver. Architektur und Installation</a></li>
<li><a href="../de469383/index.html">Hyperkonvergente L√∂sung AERODISK vAIR. Basis - ARDFS-Dateisystem</a></li>
<li><a href="../de469389/index.html">Parametrisierung eines physikalischen Modells durch ein neuronales Netzwerk zur L√∂sung eines topologischen Optimierungsproblems</a></li>
<li><a href="../de469391/index.html">Audio-Schnittstellen: Ton als Informationsquelle auf der Stra√üe, im B√ºro und am Himmel</a></li>
<li><a href="../de469393/index.html">Flare-On 2019 Zuschreibung</a></li>
<li><a href="../de469395/index.html">Wo und wie werden Mehrspalten verwendet (CSS-Spalten)</a></li>
<li><a href="../de469399/index.html">Wi-Fi im Arkhangelskoye Museum-Estate</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>