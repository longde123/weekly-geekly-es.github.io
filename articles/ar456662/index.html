<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ป ๐ฏ ๐๐ฝ ููููุฉ ุชูููุฑ ุงููุงู ุนูู ุงููุนุงูุฌ ุจุงุณุชุฎุฏุงู ุชุทููุฑ ูุญุฑููุง ุงูุงุฎุชุจุงุฑ ๐จ๐ฝโโ๏ธ โฆ๏ธ ๐ฑ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุณุจู ูู ุฃู ูุงู ูุฐุง ุงูุดุฑุทุ 


 ุฃุฑูุฏ ุฃู ุฃูุถุญ ูู ููู ูููู ูู TDD ุชุญุณูู ุฌูุฏุฉ ุงูุดูุฑุฉ ุจุงุณุชุฎุฏุงู ูุซุงู ูุญุฏุฏ. 
 ูุฃู ูู ูุง ุงูุชููุช ุจู ุฃุซูุงุก ุฏุฑุงุณุฉ ุงููุถูุฉ ูุงู ูุธุฑ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุชูููุฑ ุงููุงู ุนูู ุงููุนุงูุฌ ุจุงุณุชุฎุฏุงู ุชุทููุฑ ูุญุฑููุง ุงูุงุฎุชุจุงุฑ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/leroy_merlin/blog/456662/" style=";text-align:right;direction:rtl">  ูู ุณุจู ูู ุฃู ูุงู ูุฐุง ุงูุดุฑุทุ <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bl/td/so/bltdsone5ewlnnqa_aamnii9rl8.jpeg" alt="ุตูุฑุฉ"></div><br>  ุฃุฑูุฏ ุฃู ุฃูุถุญ ูู ููู ูููู ูู TDD ุชุญุณูู ุฌูุฏุฉ ุงูุดูุฑุฉ ุจุงุณุชุฎุฏุงู ูุซุงู ูุญุฏุฏ. <br>  ูุฃู ูู ูุง ุงูุชููุช ุจู ุฃุซูุงุก ุฏุฑุงุณุฉ ุงููุถูุฉ ูุงู ูุธุฑููุง ุชูุงููุง. <br>  ููุฏ ุญุฏุซ ุฃู ูุชุจุช ุชุทุจูููู ูุชุทุงุจููู ุชูุฑูุจูุง: ุฃุญุฏููุง ูุชุจ ุนูู ุงูุทุฑุงุฒ ุงูููุงุณููู ุ ุญูุซ ุฃููู ูู ุฃูู ุฃุนุฑู TDD ุจุนุฏ ุฐูู ุ ูุงูุซุงูู - ููุท ุจุงุณุชุฎุฏุงู TDD. <br><br>  ุฃุฏูุงู ุณูู ุชุธูุฑ ุญูุซ ูุงูุช ุฃูุจุฑ ุงูุงุฎุชูุงูุงุช. <br><br>  ุดุฎุตูุงู ุ ูุงู ูุฐุง ุงูุฃูุฑ ููููุง ุจุงููุณุจุฉ ูู ุ ูุฃูู ูู ูู ูุฑุฉ ูุนุซุฑ ูููุง ุดุฎุต ูุง ุนูู ุฎุทุฃ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู ุ ูุงุญุธุช ุงูุฎูุงุถูุง ูุจูุฑูุง ูู ุชูุฏูุฑ ุงูุฐุงุช.  ูุนู ุ ูููุช ุฃู ุงูุฃุฎุทุงุก ุทุจูุนูุฉ ุ ูุงูุฌููุน ููุชุจูููุง ุ ููู ุงูุดุนูุฑ ุจุงูููุต ูู ูุฎุชู.  ุฃูุถูุง ุ ุฃุซูุงุก ุนูููุฉ ุชุทูุฑ ุงูุฎุฏูุฉ ุ ุฃุฏุฑูุช ูู ุจุนุถ ุงูุฃุญูุงู ุฃููู ุดุฎุตูุงู ูุชุจุช ูุงุญุฏุฉ ุชุญุซ ุญูุฉ ูุฏู ุนูู ุงูุชุฎูุต ูู ูู ุดูุก ูุฅุนุงุฏุฉ ูุชุงุจุชู ูุฑุฉ ุฃุฎุฑู.  ูููู ุญุฏุซ ุฐูู ุบูุฑ ููููู.  ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ูู ุงูุจุฏุงูุฉ ุ ูููู ุจุนุฏ ุจุถุน ููุฒุงุช ูุจุนุฏ ูุชุฑุฉ ูุง ููููู ุฅููุงุก ูุธุฑุฉ ุนูู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุฏูู ุฏููุน.  ุนูู ุงูุฑุบู ูู ุฃู ูู ุฎุทูุฉ ูู ุฎุทูุงุช ุงูุชุบููุฑ ูุงูุช ููุทููุฉ.  ุงูุดุนูุฑ ุงูุฐู ูู ูุนุฌุจูู ูุงุชุฌ ุนููู ูุงู ูุชุฏูู ุจุณูุงุณุฉ ุฅูู ุงูุดุนูุฑ ุจุฃู ุงููุจุฑูุฌ ูุงู ููู ุ ุฃุนุฐุฑูู ุ ูุซู ุฑุตุงุตุฉ ูู ุงููุฑู. <br><br>  ุงุชุถุญ ุฃููู ูุณุช ุงููุญูุฏ ูุงููุซูุฑ ูู ุฒููุงุฆู ูุฏููู ุฃุญุงุณูุณ ููุงุซูุฉ.  ุซู ูุฑุฑุช ุฅูุง ุฃู ุฃุชุนูู ุงููุชุงุจุฉ ุจุดูู ุทุจูุนู ุ ุฃู ุญุงู ุงูููุช ูุชุบููุฑ ูููุชู.  ุญุงููุช ุชุทููุฑูุง ูุนุชูุฏูุง ุนูู ุงูุงุฎุชุจุงุฑ ูู ูุญุงููุฉ ูุชุบููุฑ ุดูุก ูุง ูู ุทุฑููุฉ ุงูุจุฑูุฌุฉ ุงูุฎุงุตุฉ ุจู. <br><br>  ุจุงููุธุฑ ุฅูู ุงููุณุชูุจู ุ ุงุณุชูุงุฏูุง ุฅูู ูุชุงุฆุฌ ุงูุนุฏูุฏ ูู ุงููุดุงุฑูุน ุ ูููููู ุงูููู ุฃู TDD ุชููุฑ ุจููุฉ ุฃูุธู ุ ููููุง ุชุจุทุฆ ุนูููุฉ ุงูุชุทููุฑ.  ูุงููุง ููุณุช ุฏุงุฆูุง ููุงุณุจุฉ ูููุณ ููุฌููุน. <br><a name="habracut"></a><br><h1 style=";text-align:right;direction:rtl">  ูุง ูู TDD ูุฑุฉ ุฃุฎุฑู </h1><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f39/01c/4ed/f3901c4ed2fee96d90b1a40fc30e9270.jpg" alt="ุตูุฑุฉ"></div><br><br>  TDD - ุงูุชูููุฉ ูู ุฎูุงู ุงูุงุฎุชุจุงุฑ.  ููุงูุฉ ูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br>  ุชุชูุซู ุงูุทุฑููุฉ ุงูููุงุณูููุฉ ูู ูุชุงุจุฉ ุทูุจ ุฃููุงู ุ ุซู ุชุบุทูุชู ุจุงุฎุชุจุงุฑุงุช. <br><br>  ููุฌ TDD - ููุชุจ ุฃููุงู ุงุฎุชุจุงุฑุงุช ูููุตู ุ ุซู ุงูุชูููุฐ.  ููุชูู ุนุจุฑ ูุณุชููุงุช ุงูุชุฌุฑูุฏ - ูู ุงูุฃุนูู ุฅูู ุงูุชุทุจููู ุ ููู ููุณ ุงูููุช ููุณู ุงูุชุทุจูู ุฅูู ุทุจูุงุช ุทุจูุงุช ูุฑุชุจ ูููุง ุงูุณููู ุงูุฐู ูุญุชุงุฌ ุฅููู ุ ููุชุญุฑุฑ ูู ุชุทุจูู ูุนูู. <br><br>  ูุฅุฐุง ูุฑุฃุช ูุฐุง ูููุฑุฉ ุงูุฃููู ุ ููู ุฃููู ุดูุฆูุง ุฃูุถูุง. <br>  ุงููุซูุฑ ูู ุงููููุงุช ุงููุฌุฑุฏุฉ: ุฏุนูุง ููุธุฑ ุฅูู ูุซุงู. <br>  ุณููุชุจ ุชุทุจูููุง ุฑุจูุนููุง ุญูููููุง ูู Java ุ ูุณููุชุจู ูู TDD ุ ูุณุฃุญุงูู ุฅุธูุงุฑ ุนูููุฉ ุชูููุฑู ุฃุซูุงุก ุนูููุฉ ุงูุชุทููุฑ ูุงุณุชุฎูุงุต ุงุณุชูุชุงุฌุงุช ูู ุงูููุงูุฉ ุณูุงุก ูุงู ูู ุงูููุทูู ูุถุงุก ุจุนุถ ุงูููุช ุนูู TDD ุฃู ูุง. <br><br><h1 style=";text-align:right;direction:rtl">  ูููุฉ ุนูููุฉ </h1><br>  ูููุชุฑุถ ุฃููุง ูุญุธูุธูู ููุบุงูุฉ ุจุญูุซ ูุฏููุง ุงูุดุฑูุท ุงููุฑุฌุนูุฉ ููุง ูุญุชุงุฌ ุฅูู ุชุทููุฑู.  ุนุงุฏุฉ ุ ูุง ููุชู ุงููุญูููู ุจูุง ุ ููุจุฏู ุงูุฃูุฑ ููุง ููู: <br><br>  <i>ูู ุงูุถุฑูุฑู ุชุทููุฑ ุฎุฏูุฉ microservice ุชุญุณุจ ุฅููุงููุฉ ุจูุน ุงูุจุถุงุฆุน ูุน ุงูุชุณููู ุงููุงุญู ููุนููู ูู ุงูููุฒู.</i>  <i>ูุฌุจ ุฅุฑุณุงู ูุนูููุงุช ุญูู ูุฐู ุงูููุฒุฉ ุฅูู ูุธุงู ุจูุงูุงุช ุฌูุฉ ุฎุงุฑุฌูุฉ.</i> <br><br>  ูููู ููุทู ุงูุนูู ููุง ููู: ูุชููุฑ ุนูุตุฑ ููุจูุน ูุน ุงูุชุณููู ุฅุฐุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูููุชุฌ ูู ูู ุงููุฎุฒูู </li><li style=";text-align:right;direction:rtl">  ูุฏู ุงูููุงูู (ุนูู ุณุจูู ุงููุซุงู ุ ุดุฑูุฉ DostavchenKO) ุงููุฑุตุฉ ูููููุง ุฅูู ุงูุนููู </li><li style=";text-align:right;direction:rtl">  ููู ุงูููุชุฌ - ูููุณ ุงูุฃุฒุฑู (ูุง ูุญุจ ุงูุฃุฒุฑู) </li></ul><br>  ุณูุชู ุฅุฎุทุงุฑ ุฎุฏูุงุชูุง ุงููููุฑููุฉ ุจุงูุชุบููุฑ ูู ูููุฉ ุงูุจุถุงุฆุน ุนูู ุฑู ุงููุชุฌุฑ ุนุจุฑ ุทูุจ http. <br><br>  ูุฐุง ุงูุฅุดุนุงุฑ ูู ูุดุบู ูุญุณุงุจ ุชูุงูุฑ. <br><br>  ุฒุงุฆุฏ ุ ุจุญูุซ ูุง ูุจุฏู ุฃู ุงูุญูุงุฉ ูู ุงูุนุณู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู ูุงุฏุฑูุง ุนูู ุชุนุทูู ุจุนุถ ุงูููุชุฌุงุช ูุฏูููุง. </li><li style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุนุฏู ุงูุจุฑูุฏ ุงูุนุดูุงุฆู ุ ุชุญุชุงุฌ ููุท ุฅูู ุฅุฑุณุงู ุจูุงูุงุช ุงูุชููุฑ ูุชูู ุงูููุชุฌุงุช ุงูุชู ุชุบูุฑุช. </li></ul><br>  ููุฑุฃ ุจุถุน ูุฑุงุช ุงููุนุงุฑู ุงูุชูููุฏูุฉ - ููุฐูุจ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/10/xa/vc/10xavc46--r-thnqp--lbfzw4co.png"></div><br><br><h1 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุชูุงูู </h1><br>  ูู TDD ุ ุฃุญุฏ ุฃูู ุงูุฃุณุฆูุฉ ุงูุชู ูุฌุจ ุนููู ุทุฑุญูุง ุนูู ูู ูุง ุชูุชุจู ูู: "ูุงุฐุง ุฃุฑูุฏ ูู ...ุ" <br><br>  ูุงูุณุคุงู ุงูุฃูู ุงูุฐู ูุทุฑุญู ูู ููุท ููุชุทุจูู ุจุฃูููู. <br>  ุงูุณุคุงู ูู: <br><br>  <i>ูุงุฐุง ุฃุฑูุฏ ูู ุฎุฏูุฉ microservice ุงูุฎุงุตุฉ ุจูุ</i> <br><br>  ุงูุฌูุงุจ ูู: <br><br>  ูู ุงููุงูุน ุงููุซูุฑ ูู ุงูุฃุดูุงุก.  ุญุชู ูุฐุง ุงูููุทู ุงูุจุณูุท ูุนุทู ุงููุซูุฑ ูู ุงูุฎูุงุฑุงุช ุ ูุญุงููุฉ ููุชุงุจุฉ ูุงูุชู ุ ูุญุชู ุฃูุซุฑ ูู ุฐูู ูุฅูุดุงุก ุงุฎุชุจุงุฑุงุช ููุฌููุน ุ ูููู ุฃู ุชููู ูููุฉ ูุณุชุญููุฉ.  ูุฐูู ุ ููุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู ุนูู ูุณุชูู ุงูุชุทุจูู ุ ุณูุฎุชุงุฑ ููุท ุญุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุฑุฆูุณูุฉ. <br><br>  ุฃู ุฃููุง ููุชุฑุถ ุฃู ุฌููุน ุจูุงูุงุช ุงูุฅุฏุฎุงู ุตุญูุญุฉ ุ ูุฃูุธูุฉ ุงูุฌูุงุช ุงูุฎุงุฑุฌูุฉ ุชุณุชุฌูุจ ุจุดูู ุทุจูุนู ุ ููู ุชูู ููุงู ูู ุงูุณุงุจู ูุนูููุงุช ุนู ุงูููุชุฌ. <br><br>  <i>ูุฐูู ุ ุฃุฑูุฏ ุฃู:</i> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุฏ ูุตู ุญุฏุซ ุฃูู ูุง ููุฌุฏ ููุชุฌ ุนูู ุงูุฑู.  ูุฎุทุฑ ุฃู ุงูุชุณููู ุบูุฑ ูุชููุฑ. </li><li style=";text-align:right;direction:rtl">  ุฌุงุก ุงูุญุฏุซ ุฃู ุงูููุชุฌ ุงูุฃุตูุฑ ูู ุงููุฎุฒูู ุ DostavchenKO ุนูู ุงุณุชุนุฏุงุฏ ูุงุชุฎุงุฐ ุฐูู.  ูุฎุทุฑ ุญูู ุชูุงูุฑ ุงูุณูุน. </li><li style=";text-align:right;direction:rtl">  ุฌุงุกุช ุฑุณุงูุชุงู ุนูู ุงูุชูุงูู - ูุน ูุฌูุฏ ูููุฉ ููุฌุจุฉ ูู ุงูุจุถุงุฆุน ูู ุงููุชุฌุฑ.  ุฃุฑุณูุช ุฑุณุงูุฉ ูุงุญุฏุฉ ููุท. </li><li style=";text-align:right;direction:rtl">  ูุตูุช ุฑุณุงูุชุงู: ูู ุงูุฃููู ููุฌุฏ ููุชุฌ ูู ุงููุชุฌุฑ ุ ูู ุงูุซุงููุฉ - ูู ูุนุฏ ููุงู.  ูุฑุณู ุฑุณุงูุชูู: ุงูุฃููู - ูุชููุฑุฉ ุ ุซู - ูุง. </li><li style=";text-align:right;direction:rtl">  ูููููู ุชุนุทูู ุงูููุชุฌ ูุฏูููุง ุ ููู ูุนุฏ ูุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช. </li><li style=";text-align:right;direction:rtl">  ... </li></ul><br>  ุงูุดูุก ุงูุฑุฆูุณู ููุง ูู ุงูุชููู ูู ุงูููุช ุงููุญุฏุฏ: ููุง ูุชุจุช ุจุงููุนู ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ุ ูููุณ ูู ุงูููุทูู ูุตููุง ุฌููุนูุง ููุง - ููุท ุงูุฎูุงุฑุงุช ุงูุฃุณุงุณูุฉ.  ูู ุงููุณุชูุจู ุ ุนูุฏูุง ููุชุจ ุงุฎุชุจุงุฑุงุช ูููุทู ุงูุฃุนูุงู ุ ูู ุงููุญุชูู ุฃู ุชุบุทู ุชููููุงุชูุง ูู ุดูุก ูุฃุชู ุฅููู ููุง.  ุงูุฏุงูุน ุงูุฑุฆูุณู ููุง ูู ุงูุชุฃูุฏ ูู ุฃูู ุฅุฐุง ูุฌุญุช ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุ ูุฅู ุงูุชุทุจูู ูุนูู ุญุณุจ ุญุงุฌุชูุง. <br><br>  ูู ูุฐู ุงูุงูููุงุช ุณูููู ุงูุขู ุจุงูุชูุทูุฑ ูู ุงูุงุฎุชุจุงุฑุงุช.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุธุฑูุง ูุฃู ูุฐุง ูู ูุงุฆูุฉ ุงูุงูููุงุช ุนูู ูุณุชูู ุงูุชุทุจูู ุ ูุณูู ูุฌุฑู ุงุฎุชุจุงุฑุงุช ูุฑูุน ุณูุงู ุงูุฑุจูุน ุ ููุฐุง ุซููู ููุบุงูุฉ. <br>  ููุฐุง ุ ููุฃุณู ุ ุจุงููุณุจุฉ ููุนุฏูุฏ ูู ููุงูุงุช TDD ุ ูุฃู ูุชุงุจุฉ ุงุฎุชุจุงุฑ ุงูุงูุฏูุงุฌ ูุฐุง ุ ุชุญุชุงุฌ ุฅูู ุงููุซูุฑ ูู ุงูุฌูุฏ ุงูุฐู ูุง ูุฑุบุจ ุงููุงุณ ุฏุงุฆููุง ูู ุฅููุงูู.  ููุนู ุ ูุฐู ูู ุงูุฎุทูุฉ ุงูุฃูุซุฑ ุตุนูุจุฉ ุ ูููู ุ ุตุฏูููู ุ ุจุนุฏ ุฃู ุชูุฑ ุจูุง ุ ุณุชูุชุจ ุงูุดูุฑุฉ ููุณูุง ุชูุฑูุจูุง ุ ูุณูู ุชููู ูุชุฃูุฏูุง ูู ุฃู ุงูุชุทุจูู ุงูุฎุงุต ุจู ุณูุนูู ุจุงูุทุฑููุฉ ุงูุชู ุชุฑูุฏูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/r2/hg/db/r2hgdbqezd8esoynflanwv-so8e.jpeg"></div><br>  ูู ุนูููุฉ ุงูุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู ุ ููููู ุจุงููุนู ุจุฏุก ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ูุตู ุงูุฑุจูุน ุงูุฃููู ุงูุฐู ุชู ุฅูุดุงุคู.  ุฃุณูุงุก ุงูุงุฎุชุจุงุฑ ูู ูุฌุฑุฏ ูุงุฆูุฉ ุงูุฃูููุงุช ูุฏููุง.  ุงูุขู ุ ููุท ูู ุจุฅูุดุงุก ุทุฑู ูุงุฑุบุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductQuantityIsZero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyAvailableYellowProductIfPositiveQuantityAndDostavchenkoApproved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyOnceOnSeveralEqualProductMessages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyFirstAvailableThenNotIfProductQuantityMovedFromPositiveToZero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noNotificationOnDisabledProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br>  ูููุง ูุชุนูู ุจุชุณููุฉ ุงูุฃุณุงููุจ: ุฃูุตุญู ุจุดุฏุฉ ุฃู ุชุฌุนููุง ูููุฏุฉ ุ ุจุฏูุงู ูู test1 () ุ test2 () ุ ูุฃูู ูู ููุช ูุงุญู ุ ุนูุฏูุง ุชูุณู ุงููุตู ุงูุฐู ูุชุจุชู ููุง ูู ุงููุณุคููุฉ ุนูู ุ ุณุชุชุงุญ ูู ุงููุฑุตุฉ ุจุฏูุงู ูู ุญุงูู ุชุญููู ุงูุฑูุฒ ูุจุงุดุฑุฉ ุ ููุท ุงูุชุญ ุงูุงุฎุชุจุงุฑ ููุฑุงุกุฉ ุทุฑููุฉ ุงูุนูุฏ ุงูุชู ูุฑุถููุง ุงููุตู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุจุฏุก ูู ููุก ุงูุงุฎุชุจุงุฑุงุช </h2><br>  ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ูู ูุญุงูุงุฉ ูู ุดูุก ุฎุงุฑุฌู ูู ุฃุฌู ุงูุชุญูู ููุง ูุญุฏุซ ูู ุงูุฏุงุฎู. <br><br>  "ุงูุฎุงุฑุฌูุฉ" ูููุง ูุชุนูู ุจุฎุฏูุชูุง ูู ูู ูุง ูุง ููุซู ุงูุฎุฏูุฉ ุงููููุฑููุฉ ููุณูุง ุ ููููู ูุชุตู ุจู ูุจุงุดุฑุฉ. <br><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุงูุฎุงุฑุฌู ูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุธุงู ุงูุฐู ุณุชููู ุฎุฏูุชูุง ุจุฅุฎุทุงุฑู ุญูู ุงูุชุบููุฑุงุช ูู ูููุฉ ุงูุจุถุงุฆุน </li><li style=";text-align:right;direction:rtl">  ุงูุนููู ุงูุฐู ุณูููู ุจูุตู ุงูุจุถุงุฆุน ูุฏูููุง </li><li style=";text-align:right;direction:rtl">  ูุธุงู DostavchenKO ุงูุทุฑู ุงูุซุงูุซ </li></ul><br>  ููุถุงูุงุฉ ุทูุจุงุช ุงูุฃูููู ุ ูุณุชุฎุฏู springing MockMvc. <br>  ููุญุงูุงุฉ DostavchenKO ูุณุชุฎุฏู wiremock ุฃู MockRestServiceServer. <br><br>  ูุชูุฌุฉ ูุฐูู ุ ูุจุฏู ุงุฎุชุจุงุฑ ุงูุงูุฏูุงุฌ ูุฏููุง ููุง ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ ุงูุชูุงูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureMockMvc</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureWireMock</span></span>(port = <span class="hljs-number"><span class="hljs-number">8090</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TddExampleApplicationTests</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MockMvc mockMvc; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ WireMock.reset(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductQuantityIsZero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ stubNotification( <span class="hljs-comment"><span class="hljs-comment">// language=JSON "{\n" + " \"productId\": 111,\n" + " \"available\": false\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 111,\n" + " \"color\" : \"red\", \n" + " \"productQuantity\": 0\n" + "}"); verify(1, postRequestedFor(urlEqualTo("/notify"))); } @Test public void notifyAvailableYellowProductIfPositiveQuantityAndDostavchenkoApproved() throws Exception { stubDostavchenko("112"); stubNotification( // language=JSON "{\n" + " \"productId\": 112,\n" + " \"available\": true\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 112,\n" + " \"color\" : \"Yellow\", \n" + " \"productQuantity\": 10\n" + "}"); verify(1, postRequestedFor(urlEqualTo("/notify"))); } @Test public void notifyOnceOnSeveralEqualProductMessages() throws Exception { stubDostavchenko("113"); stubNotification( // language=JSON "{\n" + " \"productId\": 113,\n" + " \"available\": true\n" + "}"); for (int i = 0; i &lt; 5; i++) { performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 113,\n" + " \"color\" : \"Yellow\", \n" + " \"productQuantity\": 10\n" + "}"); } verify(1, postRequestedFor(urlEqualTo("/notify"))); } @Test public void notifyFirstAvailableThenNotIfProductQuantityMovedFromPositiveToZero() throws Exception { stubDostavchenko("114"); stubNotification( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"available\": true\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"color\" : \"Yellow\",\n" + " \"productQuantity\": 10\n" + "}"); stubNotification( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"available\": false\n" + "}"); performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 114,\n" + " \"color\" : \"Yellow\",\n" + " \"productQuantity\": 0\n" + "}"); verify(2, postRequestedFor(urlEqualTo("/notify"))); } @Test public void noNotificationOnDisabledProduct() throws Exception { stubNotification( // language=JSON "{\n" + " \"productId\": 115,\n" + " \"available\": false\n" + "}"); disableProduct(115); for (int i = 0; i &lt; 5; i++) { performQuantityUpdateRequest( // language=JSON "{\n" + " \"productId\": 115,\n" + " \"color\" : \"Yellow\",\n" + " \"productQuantity\": " + i + "\n" + "}"); } verify(1, postRequestedFor(urlEqualTo("/notify"))); } private void disableProduct(int productId) throws Exception { mockMvc.perform( post("/disableProduct?productId=" + productId) ).andDo( print() ).andExpect( status().isOk() ); } private void performQuantityUpdateRequest(String content) throws Exception { mockMvc.perform( post("/product-quantity-update") .contentType(MediaType.APPLICATION_JSON) .content(content) ).andDo( print() ).andExpect( status().isOk() ); } private void stubNotification(String content) { stubFor(WireMock.post(urlEqualTo("/notify")) .withHeader("Content-Type", equalTo(MediaType.APPLICATION_JSON_UTF8_VALUE)) .withRequestBody(equalToJson(content)) .willReturn(aResponse().withStatus(HttpStatus.OK_200))); } private void stubDostavchenko(final String productId) { stubFor(get(urlEqualTo("/isDeliveryAvailable?productId=" + productId)) .willReturn(aResponse().withStatus(HttpStatus.OK_200).withBody("true"))); } }</span></span></code> </pre> </div></div><br><h1 style=";text-align:right;direction:rtl">  ูุงุฐุง ุญุฏุซ ููุชูุ </h1><br>  ููุฏ ูุชุจูุง ุงุฎุชุจุงุฑ ุชูุงูู ุ ูุงูุฐู ูุถูู ููุง ูุฑูุฑู ุฅููุงููุฉ ุชุดุบูู ุงููุธุงู ููููุง ููุตุต ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ.  ููุนููุง ุฐูู ูุจู ุฃู ูุจุฏุฃ ูู ุชูููุฐ ุงูุฎุฏูุฉ. <br><br>  ูุงุญุฏุฉ ูู ูุฒุงูุง ูุฐุง ุงูููุฌ ูู ุฃูู ุฃุซูุงุก ุนูููุฉ ุงููุชุงุจุฉ ุงุถุทุฑุฑุช ููุฐูุงุจ ุฅูู DostavchenKO <b>ุงูุญูููู</b> ูุงูุญุตูู ุนูู ุฅุฌุงุจุฉ <b>ุญููููุฉ</b> ูู ููุงู ุฅูู ุงูุทูุจ <b>ุงูุญูููู</b> ุงูุฐู ูุฏููุงู ูู ูุนุจ ุฑูุชูููุง.  ุฅูู ูุฃูุฑ ุฌูุฏ ููุบุงูุฉ ุฃููุง ุงุนุชูููุง ุจูุฐุง ูู ุจุฏุงูุฉ ุงูุชุทููุฑ ุ ูููุณ ุจุนุฏ ูุชุงุจุฉ ุงูููุฏ.  ูููุง ุงุชุถุญ ุฃู ุงูุชูุณูู ููุณ ูู ุงูุชูุณูู ุงููุญุฏุฏ ูู TOR ุ ุฃู ุฃู ุงูุฎุฏูุฉ ุบูุฑ ูุชููุฑุฉ ุจุดูู ุนุงู ุ ุฃู ุฃู ุดูุก ุขุฎุฑ. <br><br>  ุฃูุฏ ุฃูุถูุง ุฃู ุฃุดูุฑ ุฅูู ุฃููุง ูู ููุชุจ ููุท ุณุทุฑูุง <b>ูุงุญุฏูุง</b> ูู ุงูููุฏ ุงูุฐู ุณููุชูู ูุงุญููุง ุฅูู ุงูููุชุฌ ุ ููููุง ูู ููู ุญุชู ุจุงูุชุฑุงุถ <b>ูุงุญุฏ</b> ุญูู ููููุฉ ุชุฑุชูุจ ุฎุฏูุงุชูุง ุงููููุฑููุฉ ูู ุงูุฏุงุฎู: ูุง ูู ุงูุทุจูุงุช ุงูููุฌูุฏุฉ ุ ุณูุงุก ูุญู ูุณุชุฎุฏู ุงูุฃุณุงุณ ุ ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ุฃู ูุงุญุฏ ุ ููุง ุฅูู ุฐูู. ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุงุฎุชุจุงุฑ ุ ูุญู ูุณุชุฎูุตูู ูู ุงูุชุทุจูู ุ ูููุง ุณูุฑู ูุงุญููุง ุ ูููู ุฃู ูููุฑ ูุฐุง ุนุฏุฏูุง ูู ุงููุฒุงูุง ุงููุนูุงุฑูุฉ. <br><br>  ุนูู ุงููููุถ ูู TDD ุงูููุณู ุ ุญูุซ ูุชู ูุชุงุจุฉ ุงูุชูููุฐ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุงุฎุชุจุงุฑ ุ ูู ูุณุชุบุฑู ุงุฎุชุจุงุฑ ุงูุชูุงูู ููุชูุง ุทูููุงู ููุบุงูุฉ.  ูู ุงููุงูุน ุ ูู ุชุชุญูู ุฅูู ุงูููู ุงูุฃุฎุถุฑ ุญุชู ููุงูุฉ ุงูุชุทููุฑ ุ ุญุชู ูุชู ูุชุงุจุฉ ูู ุดูุก ุนูู ุงูุฅุทูุงู ุ ุจูุง ูู ุฐูู ุงููููุงุช. <br>  ูุญู ูุฐูุจ ุฃุจุนุฏ ูู ุฐูู. <br><br><h1 style=";text-align:right;direction:rtl">  ูุฑุงูุจ </h1><br>  ุจุนุฏ ุฃู ูุชุจูุง ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุซูุฉ ุงูุขู ุฃูู ุจุนุฏ ุงุฌุชูุงุฒ ุงููููุฉ ุ ูููููุง ุงูููู ุจุณูุงู ูู ุงูููู ุ ููุฏ ุญุงู ุงูููุช ูุจุฏุก ุจุฑูุฌุฉ ุงูุทุจูุงุช.  ูุงูุทุจูุฉ ุงูุฃููู ุงูุชู ุณูููุฐูุง ูู ูุญุฏุฉ ุงูุชุญูู.  ููุงุฐุง ุจุงูุถุจุท ููุ  ูุฃู ูุฐุง ูู ููุทุฉ ุงูุฏุฎูู ุฅูู ุงูุจุฑูุงูุฌ.  ูุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ูู ุงูุฃุนูู ุฅูู ุงูุฃุณูู ุ ูู ุงูุทุจูุฉ ุงูุฃููู ุงูุชู ุณูุชูุงุนู ูุนูุง ุงููุณุชุฎุฏู ุ ุฅูู ุขุฎุฑูุง. <br>  ูุฐุง ููู. <br><br>  ููุฑุฉ ุฃุฎุฑู ุ ูู ูุฐุง ูุจุฏุฃ ุจููุณ ุงูุณุคุงู: <br><br>  <i>ูุงุฐุง ุฃุฑูุฏ ูู ูุญุฏุฉ ุงูุชุญููุ</i> <br><br>  ุงูุฌูุงุจ ูู: <br><br>  ูุญู ูุนูู ุฃู ูุญุฏุฉ ุงูุชุญูู ููุฎุฑุทุฉ ูู ุงูุชูุงุตู ูุน ุงููุณุชุฎุฏู ูุงูุชุญูู ูู ุตุญุฉ ูุชุญููู ุจูุงูุงุช ุงูุฅุฏุฎุงู ููุง ุชุญุชูู ุนูู ููุทู ุงูุนูู.  ูุฐูู ูุฏ ูููู ุงูุฌูุงุจ ุนูู ูุฐุง ุงูุณุคุงู ุดูุก ูู ูุฐุง ุงููุจูู: <br><br>  <i>ุฃุฑูุฏ ุฃู:</i> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนุงุฏ BAD_REQUEST ุฅูู ุงููุณุชุฎุฏู ุนูุฏ ูุญุงููุฉ ูุทุน ุงุชุตุงู ููุชุฌ ุจูุนุฑู ุบูุฑ ุตุงูุญ </li><li style=";text-align:right;direction:rtl">  BAD_REQUEST ุนูุฏ ูุญุงููุฉ ุงูุฅุจูุงุบ ุนู ุชุบููุฑ ุงูุจุถุงุฆุน ุฐุงุช ุงููุนุฑู ุบูุฑ ุตุงูุญ </li><li style=";text-align:right;direction:rtl">  BAD_REQUEST ุนูุฏ ูุญุงููุฉ ุงูุฅุนูุงู ุจูููุฉ ุณุงูุจุฉ </li><li style=";text-align:right;direction:rtl">  INTERNAL_SERVER_ERROR ุฅุฐุง ูุงู DostavchenKO ุบูุฑ ูุชููุฑ </li><li style=";text-align:right;direction:rtl">  INTERNAL_SERVER_ERROR ุ ุฅุฐุง ุชุนุฐุฑ ุฅุฑุณุงููุง ุฅูู DATA </li></ul><br>  ูุธุฑูุง ูุฃููุง ูุฑูุฏ ุฃู ูููู ุณูู ุงูุงุณุชุฎุฏุงู ุ ุจุงููุณุจุฉ ูุฌููุน ุงูุนูุงุตุฑ ุงููุฐููุฑุฉ ุฃุนูุงู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฑูุฒ http ุ ุชุญุชุงุฌ ุฅูู ุนุฑุถ ุฑุณุงูุฉ ูุฎุตุตุฉ ุชุตู ุงููุดููุฉ ุญุชู ูููู ุงููุณุชุฎุฏู ูุงููุฉ ุงููุดููุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  200 ุฅุฐุง ูุงูุช ุงููุนุงูุฌุฉ ูุงุฌุญุฉ </li><li style=";text-align:right;direction:rtl">  INTERNAL_SERVER_ERROR ูุน ุฑุณุงูุฉ ุงูุชุฑุงุถูุฉ ูู ุฌููุน ุงูุญุงูุงุช ุงูุฃุฎุฑู ุ ุญุชู ูุง ุชุชุฃูู </li></ul><br>  ุฅูู ุฃู ุจุฏุฃุช ุงููุชุงุจุฉ ุนูู TDD ุ ูุงู ุขุฎุฑ ุดูุก ููุช ุฃููุฑ ููู ูู ูุง ุงูุฐู ุณูุธูุฑู ูุธุงูู ูููุณุชุฎุฏู ูู ุจุนุถ ุงูุญุงูุงุช ุงูุฎุงุตุฉ ุ ููู ุบูุฑ ุงููุฑุฌุญ ูููููุฉ ุงูุฃููู.  ูู ุฃููุฑ ูุณุจุจ ูุงุญุฏ ุจุณูุท - ูู ุงูุตุนุจ ููุบุงูุฉ ูุชุงุจุฉ ุชูููุฐ ุ ูู ุฃุฌู ุฃู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงูุญุงูุงุช ุงููุทููุฉ ุ ูุฃุญูุงููุง ูุง ุชูุฌุฏ ุฐุงูุฑุฉ RAM ูุงููุฉ ูู ุงููุฎ.  ูุจุนุฏ ุงูุชูููุฐ ุงููุชุงุจู ุ ูุง ูุฒุงู ุชุญููู ุงูุดูุฑุฉ ูุดูุก ูุง ูู ุชููุฑ ููู ููุฏููุง ูู ุฏูุงุนู ุณุฑูุฑู: ูุนุชูุฏ ุฌููุนูุง ุฃููุง ููุชุจ ุงูุดูุฑุฉ ุงููุซุงููุฉ ุนูู ุงูููุฑ).  ุนูู ุงูุฑุบู ูู ุนุฏู ูุฌูุฏ ุชุทุจูู ุ ููุณุช ููุงู ุญุงุฌุฉ ููุชูููุฑ ููู ุ ููุง ููุฌุฏ ุฃู ุฃูู ูุชุบููุฑู ุ ุฅุฐุง ูุงู ุฐูู.  ุจุนุฏ ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑ ุฃููุงู ุ ูู ุชุถุทุฑ ุฅูู ุงูุงูุชุธุงุฑ ุญุชู ุชุชูุงุฑุจ ุงููุฌูู ุ ูุจุนุฏ ุงูุงูุณุญุงุจ ุฅูู ุงูููุชุฌ ุ ุณูู ููุดู ุนุฏุฏ ูุนูู ูู ุงูุฃูุธูุฉ ุ ูุณูุฃุชู ุงูุนููู ุฅููู ุจุทูุจ ูุทูุจ ุฅุตูุงุญ ุดูุก ูุง.  ููุฐุง ููุทุจู ููุณ ููุท ุนูู ูุญุฏุฉ ุชุญูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงุจุฏุฃ ูู ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช </h2><br>  ูู ุดูุก ูุงุถุญ ูุน ุงูุซูุงุซุฉ ุงูุฃููู: ูุณุชุฎุฏู ุงูุชุญูู ูู ุงูุฑุจูุน ุ ุฅุฐุง ูุตู ุทูุจ ุบูุฑ ุตุงูุญ ุ ูุณูููู ุงูุชุทุจูู ุจุฅูุบุงุก ุงุณุชุซูุงุก ุ ูุงูุฐู ุณููุงุญุธู ูู ูุนุงูุฌ ุงุณุชุซูุงุก.  ููุง ุ ููุง ูููููู ุ ูู ุดูุก ูุนูู ูู ุชููุงุก ููุณู ุ ูููู ููู ุชุนุฑู ูุญุฏุฉ ุงูุชุญูู ุฃู ุจุนุถ ูุธุงู ุงูุทุฑู ุงูุซุงูุซ ุบูุฑ ูุชููุฑุ <br><br>  ููู ุงููุงุถุญ ุฃู ูุญุฏุฉ ุงูุชุญูู ููุณูุง ูุฌุจ ุฃู ูุง ุชุนุฑู ุฃู ุดูุก ุนู ุฃูุธูุฉ ุงูุทุฑู ุงูุซุงูุซ ุ ูุฃูู  ูุง ูู ุงููุธุงู ุงูุฐู ูุฌุจ ุทุฑุญู ููุง ูู ููุทู ุงูุนูู ุ ุฃู ุฃูู ูุฌุจ ุฃู ูููู ููุงู ููุน ูู ุงููุณูุท.  ูุฐุง ุงููุณูุท ูู ุงูุฎุฏูุฉ.  ูุณูู ููุชุจ ุงุฎุชุจุงุฑุงุช ุนูู ูุญุฏุฉ ุงูุชุญูู ุจุงุณุชุฎุฏุงู ูููู ูู ูุฐู ุงูุฎุฏูุฉ ุ ููุญุงูุงุฉ ุณููููุง ูู ุจุนุถ ุงูุญุงูุงุช.  ูุฐูู ุ ูุฌุจ ุฃู ุชุฎุจุฑ ุงูุฎุฏูุฉ ูุญุฏุฉ ุงูุชุญูู ุจุทุฑููุฉ ูุง ุฃู ุงููุธุงู ุบูุฑ ูุชููุฑ.  ููููู ุงูููุงู ุจุฐูู ุจุทุฑู ูุฎุชููุฉ ุ ูููู ุฃุณูู ุทุฑููุฉ ูุฑูู ุงูุชูููุฐ ุงููุฎุตุต.  ุณููุชุจ ุงุฎุชุจุงุฑูุง ูุณููู ุฌูุงุฒ ุงูุชุญูู ูุฐุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ ูุฎุทุฃ ุงูุงุชุตุงู ูุน ูุธุงู ุจูุงูุงุช ุฌูุฉ ุฎุงุฑุฌูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@WebMvcTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureMockMvc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnServerErrorOnDataCommunicationError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ doThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataCommunicationException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( <span class="hljs-comment"><span class="hljs-comment">//language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"Can't communicate with Data system\"\n" + " }\n" + " ]\n" + "}") ); } }</span></span></code> </pre><br></div></div><br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ุธูุฑุช ุนุฏุฉ ุฃุดูุงุก ูู ุญุฏ ุฐุงุชูุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฎุฏูุฉ ูุชู ุญูููุง ูู ูุญุฏุฉ ุงูุชุญูู ูุณูุชู ุชูููุถูุง ููุนุงูุฌุฉ ุฑุณุงูุฉ ูุงุฑุฏุฉ ููููุฉ ุฌุฏูุฏุฉ ูู ุงูุจุถุงุฆุน. </li><li style=";text-align:right;direction:rtl">  ุทุฑููุฉ ูุฐู ุงูุฎุฏูุฉ ุ ูุจุงูุชุงูู ุชูููุนูุง ุ ูุงูุชู ุณุชุฌุฑู ูุฐู ุงููุนุงูุฌุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฏุฑุงู ุฃู ุงูุฃุณููุจ ูุฌุจ ุฃู ูุฑูู ุชูููุฐ ูุฎุตุต ุนูุฏูุง ูููู ุงููุธุงู ุบูุฑ ูุชููุฑ. </li><li style=";text-align:right;direction:rtl">  ูุฐุง ุงูุชูููุฐ ูุฎุตุต ููุณู. </li></ul><br>  ููุงุฐุง ููุญุฏููุ  ูุฃูู ุ ููุง ุชุชุฐูุฑ ุ ูู ููุชุจ ุชุทุจูููุง ุจุนุฏ.  ูุธูุฑุช ูู ูุฐู ุงูููุงูุงุช ูู ุนูููุฉ ุงุฎุชุจุงุฑ ุงูุจุฑูุงูุฌ.  ุญุชู ูุง ููุณู ุงููุชุฑุฌู ุ ูู ุงูููุฏ ุงูุญูููู ุ ุณูุชุนูู ุนูููุง ุฅูุดุงุก ูู ูุง ูู ููุถุญ ุฃุนูุงู.  ูุญุณู ุงูุญุธ ุ ุณูู ูุณุงุนุฏูุง ุฃู IDE ุชูุฑูุจูุง ุนูู ุฅูุดุงุก ุงูููุงูุงุช ุงููุงุฒูุฉ.  ูุจุงูุชุงูู ุ ูุญู ููุน ูู ุงุฎุชุจุงุฑ ุงููุชุงุจุฉ - ููุชู ููุก ุงูุชุทุจูู ูุน ุงูุทุจูุงุช ูุงูุฃุณุงููุจ. <br><br>  ูู ุงููุฌููุน ุ ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ุงูุชุญูู ูู ููุง ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@WebMvcTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@AutoConfigureMockMvc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@InjectMocks</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Controller controller; <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MockMvc mvc; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnBadRequestOnDisableWithInvalidProductId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ mvc.perform( post(<span class="hljs-string"><span class="hljs-string">"/disableProduct?productId=-443"</span></span>) ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json(getInvalidProductIdJsonContent()) ); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnBadRequestOnNotifyWithInvalidProductId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ performUpdate( <span class="hljs-comment"><span class="hljs-comment">//language=JSON "{\n" + " \"productId\": -1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 0\n" + "}" ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json(getInvalidProductIdJsonContent()) ); } @Test public void returnBadRequestOnNotifyWithNegativeProductQuantity() throws Exception { performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": -10\n" + "}" ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"productQuantity is invalid\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void returnServerErrorOnDostavchenkoCommunicationError() throws Exception { doThrow(new DostavchenkoException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"DostavchenKO communication exception\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void returnServerErrorOnDataCommunicationError() throws Exception { doThrow(new DataCommunicationException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"Can't communicate with Data system\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void return200OnSuccess() throws Exception { performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isOk() ); } @Test public void returnServerErrorOnUnexpectedException() throws Exception { doThrow(new RuntimeException()).when(updateProcessorService).processUpdate(any(Update.class)); performUpdate( //language=JSON "{\n" + " \"productId\": 1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": 10\n" + "}" ).andDo( print() ).andExpect( status().isInternalServerError() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"Internal Server Error\"\n" + " }\n" + " ]\n" + "}") ); } @Test public void returnTwoErrorMessagesOnInvalidProductIdAndNegativeQuantity() throws Exception { performUpdate( //language=JSON "{\n" + " \"productId\": -1,\n" + " \"color\": \"red\",\n" + " \"productQuantity\": -10\n" + "}" ).andDo( print() ).andExpect( status().isBadRequest() ).andExpect( content().json("{\n" + " \"errors\": [\n" + " { \"message\": \"productQuantity is invalid\" },\n" + " { \"message\": \"productId is invalid\" }\n" + " ]\n" + "}") ); } private ResultActions performUpdate(String jsonContent) throws Exception { return mvc.perform( post("/product-quantity-update") .contentType(MediaType.APPLICATION_JSON_UTF8_VALUE) .content(jsonContent) ); } private String getInvalidProductIdJsonContent() { return //language=JSON "{\n" + " \"errors\": [\n" + " {\n" + " \"message\": \"productId is invalid\"\n" + " }\n" + " ]\n" + "}"; } }</span></span></code> </pre> </div></div><br>  ุงูุขู ูููููุง ูุชุงุจุฉ ุงูุชูููุฐ ูุงูุชุฃูุฏ ูู ูุฌุงุญ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช: <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุทุจูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Validated</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@PostMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/product-quantity-update"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateQuantity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestBody @Valid Update update)</span></span></span><span class="hljs-function"> </span></span>{ updateProcessorService.processUpdate(update); } <span class="hljs-meta"><span class="hljs-meta">@PostMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/disableProduct"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestParam(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"productId"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Long productId) </span></span>{ updateProcessorService.disableProduct(Long.valueOf(productId)); } }</code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุนุงูุฌ ุงุณุชุซูุงุก</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ControllerAdvice</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationExceptionHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(ConstraintViolationException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onConstraintViolationException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConstraintViolationException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"Constraint Violation"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(exception.getConstraintViolations().stream() .map(constraintViolation -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message( ((PathImpl) constraintViolation.getPropertyPath()).getLeafNode().toString() + <span class="hljs-string"><span class="hljs-string">" is invalid"</span></span>)) .collect(Collectors.toList())); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(value = MethodArgumentNotValidException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(value = HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMethodArgumentNotValidException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodArgumentNotValidException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.info(exception.getMessage()); List&lt;ErrorResponse.Message&gt; fieldErrors = exception.getBindingResult().getFieldErrors().stream() .map(fieldError -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(fieldError.getField() + <span class="hljs-string"><span class="hljs-string">" is invalid"</span></span>)) .collect(Collectors.toList()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(fieldErrors); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(DostavchenkoException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.INTERNAL_SERVER_ERROR) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDostavchenkoCommunicationException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DostavchenkoException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.error(<span class="hljs-string"><span class="hljs-string">"DostavchenKO communication exception"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(Collections.singletonList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(<span class="hljs-string"><span class="hljs-string">"DostavchenKO communication exception"</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(DataCommunicationException.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.INTERNAL_SERVER_ERROR) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDataCommunicationException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataCommunicationException exception)</span></span></span><span class="hljs-function"> </span></span>{ log.error(<span class="hljs-string"><span class="hljs-string">"DostavchenKO communication exception"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(Collections.singletonList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(<span class="hljs-string"><span class="hljs-string">"Can't communicate with Data system"</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span>(Exception.class) <span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.INTERNAL_SERVER_ERROR) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Exception exception)</span></span></span><span class="hljs-function"> </span></span>{ log.error(<span class="hljs-string"><span class="hljs-string">"Error while processing"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse(Collections.singletonList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorResponse.Message(HttpStatus.INTERNAL_SERVER_ERROR.getReasonPhrase()))); } }</code> </pre> <br></div></div><br><h1 style=";text-align:right;direction:rtl">  ูุงุฐุง ุญุฏุซ ููุชูุ </h1><br>  <b>ูู TDD ุ ูุง ูุชุนูู ุนููู ุงูุงุญุชูุงุธ ุจุฌููุน ุงูุดูุฑุงุช ูู ุฑุฃุณู.</b> <br><br>  ุฏุนูุง ูุฑุฉ ุฃุฎุฑู: ูุง ุชุจูู ุงููููู ุจุฃูููู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู.  ูุฌุฑุฏ ุฅููุงุก ูุธุฑุฉ ุนูู ุทุจูุฉ ูุงุญุฏุฉ.  ุฅูู ุจุณูุท. <br><br>  ูู ุงูุนูููุฉ ุงููุนุชุงุฏุฉ ุ ูุง ูููู ุงูุฏูุงุบ ุ ูุฃู ููุงู ุงููุซูุฑ ูู ุงูุชุทุจููุงุช.  ุฅุฐุง ููุช ุจุทููุง ุฎุงุฑููุง ููููู ุฃู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงููุฑูู ุงูุฏูููุฉ ูู ูุดุฑูุน ูุจูุฑ ูู ุฑุฃุณู ุ ูุฅู TDD ููุณ ุถุฑูุฑููุง.  ูุง ุงุนุฑู ููู  ูููุง ูุงู ุงููุดุฑูุน ุฃูุจุฑ ุ ูููุง ููุช ูุฎุทุฆูุง. <br><br>  ุจุนุฏ ุฅุฏุฑุงู ุฃูู ุจุญุงุฌุฉ ุฅูู ููู ูุง ุชุญุชุงุฌู ุงูุทุจูุฉ ุงูุชุงููุฉ ููุท ุ ูุฃุชู ุงูุชูููุฑ ูู ุงูุญูุงุฉ.  ูุงูุญูููุฉ ูู ุฃู ูุฐุง ุงูููุฌ ูุณูุญ ูู ุจุนุฏู ุงูููุงู ุจุฃุดูุงุก ุบูุฑ ุถุฑูุฑูุฉ.  ููุง ุชุชุญุฏุซ ูุน ูุชุงุฉ.  ุชููู ุดูุฆุง ุนู ูุดููุฉ ูู ุงูุนูู.  ูููุช ุชููุฑ ูู ููููุฉ ุญููุง ุ ุฃูุช ุฑู ุนููู.  ููู ูุง ุชุญุชุงุฌ ุฅูู ุญููุง ุ ุฅููุง ุจุญุงุฌุฉ ููุท ุฅูู ุฃู ุชุฎุจุฑูุง.  ููุฐุง ูู ุดูุก.  ุฃุฑุงุฏุช ููุท ูุดุงุฑูุฉ ุดูุก ูุง.  ุชุนูู ูุฐุง ูู ุงููุฑุญูุฉ ุงูุฃููู ูู ุงูุงุณุชูุงุน () ูุง ููุฏุฑ ุจุซูู.  ููู ุดูุก ุขุฎุฑ ... ุญุณูุง ุ ุฃูุช ุชุนุฑู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qx/bk/fb/qxbkfb93hkn7folrvbn1pjd8hxm.png"></div><br><h1 style=";text-align:right;direction:rtl">  ุฎุฏูุฉ </h1><br>  ุจุนุฏ ุฐูู ูููู ุจุชูููุฐ ุงูุฎุฏูุฉ. <br><br>  <i>ูุงุฐุง ูุฑูุฏ ูู ุงูุฎุฏูุฉุ</i> <br><br>  ูุฑูุฏู ุฃู ูุชุนุงูู ูุน ููุทู ุงูุนูู ุ ุฃู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงู ูุนุฑู ููููุฉ ูุตู ุงูุจุถุงุฆุน ุ <u>ููุง</u> ุฃุนูู <u>ุญูู</u> : </li><li style=";text-align:right;direction:rtl">  ุงูุชููุฑ ุ ุฅุฐุง ูุงู ุงูููุชุฌ ุบูุฑ ููุตูู ุ ูููู ูู ุงููุฎุฒูู ุ ูููู ุงูููุชุฌ ุฃุตูุฑ ุ ู DostavchenKO ุฌุงูุฒ ููุชุณููู. </li><li style=";text-align:right;direction:rtl">  ุนุฏู ุฅููุงููุฉ ุงููุตูู ุ ุฅุฐุง ูุงูุช ุงูุจุถุงุนุฉ ุบูุฑ ูุชููุฑุฉ ุจุบุถ ุงููุธุฑ ุนู ุฃู ุดูุก. </li><li style=";text-align:right;direction:rtl">  ุนุฏู ุฅููุงููุฉ ุงููุตูู ุ ุฅุฐุง ูุงู ุงูููุชุฌ ุจุงูููู ุงูุฃุฒุฑู. </li><li style=";text-align:right;direction:rtl">  ุนุฏู ุฅููุงููุฉ ุงููุตูู ุฅุฐุง ุฑูุถ DostavchenKO ุญููู. </li><li style=";text-align:right;direction:rtl">  ุนุฏู ุฅููุงููุฉ ุงููุตูู ุฅุฐุง ุชู ูุตู ุงูุจุถุงุนุฉ ูุฏูููุง. </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูุฑูุฏ ูู ุงูุฎุฏูุฉ ุชูููุฐ ุนูููุฉ ุงูุชูููุฐ ูู ุญุงูุฉ ุนุฏู ุชููุฑ ุฃู ูู ุงูุฃูุธูุฉ. </li><li style=";text-align:right;direction:rtl">  ูุฃูุถูุง ุ ุญุชู ูุง ุชููุช ุงูุจูุงูุงุช ุบูุฑ ุงููุฑุบูุจ ูููุง ุ ููุฒูู ุชูุธูู ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ุ ููู: </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุงุนุชุฏูุง ุฃู ูุฑุณู ุงูุจุถุงุฆุน ุงููุชุงุญุฉ ููุจุถุงุฆุน ุ ูุงูุขู ูููุง ุจุญุณุงุจ ูุง ูู ูุชุงุญ ุ ููู ูุฑุณู ุฃู ุดูุก. </li><li style=";text-align:right;direction:rtl">  ูุฅุฐุง ูู ููู ูุชุงุญูุง ูู ูุจู ุ ููููู ุงูุขู ูุชุงุญ ุ ูุณูุฑุณูู. </li><li style=";text-align:right;direction:rtl">  ูุชุญุชุงุฌ ุฅูู ูุชุงุจุชูุง ูู ููุงู ูุง ... </li></ol><br>  <b>ุฅููุงู!</b> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/if/ek/y1/ifeky128w2kgpc2gw2jcxwvzkia.jpeg"></div><br>  ุฃูุง ุชุนุชูุฏ ุฃู ุฎุฏูุชูุง ุจุฏุฃุช ุชูุนู ุงููุซูุฑุ <br><br>  ุงูุทูุงููุง ูู ูุงุฆูุฉ ุงูุฃูููุงุช ูุฏููุง ุ ููู ูุนุฑู ููููุฉ ุฅููุงู ุชุดุบูู ุงูุจุถุงุฆุน ุ ูููุธุฑ ูู ุฅููุงููุฉ ุงููุตูู ุ ููุถูู ุฃูู ูุง ูุฑุณู ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ูุณุจููุง.  ูุฐุง ููุณ ุงูุชูุงุณู ุนุงููุฉ.  ูู ุงูุถุฑูุฑู ููู ุงููุธุงุฆู ุบูุฑ ุงููุชุฌุงูุณุฉ ุฅูู ูุฆุงุช ูุฎุชููุฉ ุ ูุจุงูุชุงูู ูุฌุจ ุฃู ูููู ููุงู ุจุงููุนู ุซูุงุซ ุฎุฏูุงุช: ูุงุญุฏุฉ ุชุชุนุงูู ูุน ูุตู ุงูุจุถุงุฆุน ุ ูุงูุขุฎุฑ ุณูุญุณุจ ุฅููุงููุฉ ุงูุชุณููู ูููุฑุฑูุง ุฅูู ุฎุฏูุฉ ุชูุฑุฑ ุฅุฑุณุงููุง ุฃู ุนุฏู ุฅุฑุณุงููุง.  ุจุงูููุงุณุจุฉ ุ ูุจูุฐู ุงูุทุฑููุฉ ุ ูู ุชุนุฑู ุฎุฏูุฉ ููุทู ุงูุฃุนูุงู ุฃู ุดูุก ุนู ูุธุงู ุงูุจูุงูุงุช ุ ูุงูุฐู ูุนุฏ ุฃูุถูุง ููุฒุฉ ุฅุถุงููุฉ ูุญุฏุฏุฉ. <br><br>  ูู ุชุฌุฑุจุชู ุ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ุจุนุฏ ุฃู ุฏุฎูุช ุญูุฒ ุงูุชูููุฐ ุ ูู ุงูุณูู ุงูุชุบุงุถู ุนู ุงููุญุธุงุช ุงููุนูุงุฑูุฉ.  ุฅุฐุง ูุชุจูุง ุงูุฎุฏูุฉ ุนูู ุงูููุฑ ุ ุฏูู ุงูุชูููุฑ ูู ูุง ููุจุบู ุฃู ุชูุนูู ุ ูุงูุฃูู ูู ุฐูู ุ ูุฌุจ ุฃูุง ูุฒูุฏ ุฐูู ุ ูุฅู ุงุญุชูุงู ุชุฏุงุฎู ูุฌุงูุงุช ุงููุณุคูููุฉ ุณูุฒุฏุงุฏ.  ุฃูุฏ ุฃู ุฃุถูู ููุงุจุฉ ุนูู ุฃู ูุฐุง ุงููุซุงู ูู ูุง ุญุฏุซ ูู ูู ุงูููุงุฑุณุฉ ุงููุนููุฉ ูุงููุฑู ุงูููุนู ุจูู ูุชุงุฆุฌ TDD ูุฃุณุงููุจ ุงูุจุฑูุฌุฉ ุงููุชุณูุณูุฉ ุงูุชู ุฃูููุชูู ููุชุงุจุฉ ูุฐุง ุงูููุดูุฑ. <br><br><h1 style=";text-align:right;direction:rtl">  ููุทู ุงูุนูู </h1><br>  ุจุงูุชูููุฑ ูู ุฎุฏูุฉ ููุทู ุงูุฃุนูุงู ูููุณ ุฃุณุจุงุจ ุงูุชูุงุณู ุงูุนุงูู ุ ูุญู ูููู ุฃููุง ุจุญุงุฌุฉ ุฅูู ูุณุชูู ุฃูุซุฑ ูู ุงูุชุฌุฑูุฏ ุจูููุง ูุจูู DostavchenKO ุงูุญูููู.  ูุจูุง ุฃููุง ูููู ุจุชุตููู ุงูุฎุฏูุฉ <b>ุฃููุงู</b> ุ ูููููุง ุฃู ูุทูุจ ูู ุนููู DostavchenKO ูุซู ูุฐุง ุงูุนูุฏ ุงูุฏุงุฎูู ุงูุฐู ูุฑูุฏู.  ูู ุนูููุฉ ูุชุงุจุฉ ุงุฎุชุจุงุฑ ูููุทู ุงูุนูู ุ ุณูู ูููู ูุง ูุฑูุฏ ูู ุนููู ุงูุชูููุน ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAvailableForTransportation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{...}</code> </pre><br>  ุนูู ูุณุชูู ุงูุฎุฏูุฉ ุ ูุง ููููุง ููู ุชุฌูุจ DostavchenKO ุงูุญููููุฉ: ูู ุงููุณุชูุจู ุ ุณุชุญุตู ูููุฉ ุงูุนููู ุจุทุฑููุฉ ูุง ุนูู ูุฐู ุงููุนูููุงุช ููู.  ุจูุฌุฑุฏ ุฃู ูููู ุงูุฃูุฑ ุจุณูุทูุง ุ ููู ูู ููุช ูุง ุณูููู ูู ุงูุถุฑูุฑู ุชูุฏูู ุนุฏุฉ ุทูุจุงุช: ูู ุงูููุช ุงูุญุงูู ุ ูุชู ุฎูุงุตูุง ูู ูุฐุง. <br><br>  ูุฑูุฏ ุชูููุนูุง ูุดุงุจููุง ูู ุฎุฏูุฉ ุชุชุนุงูู ูุน ุงูุจุถุงุฆุน ุบูุฑ ุงููุชุตูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isProductEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{...}</code> </pre><br>  ูุฐุง ุ ูุฅู ุงูุฃุณุฆูุฉ "ูุงุฐุง ุฃุฑูุฏ ูู ุฎุฏูุฉ ููุทู ุงูุฃุนูุงูุ" ุงููุณุฌูุฉ ูู ุงูุงุฎุชุจุงุฑุงุช ุชุจุฏู ููุง ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑุงุช ุงูุฎุฏูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(MockitoJUnitRunner.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdateProcessorServiceTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@InjectMocks</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UpdateProcessorService updateProcessorService; <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ManualExclusionService manualExclusionService; <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DostavchenkoClient dostavchenkoClient; <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyAvailableIfYellowProductIsEnabledAndReadyForTransportation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(dostavchenkoClient.isAvailableForTransportation(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsAbsent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">0L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); verifyNoMoreInteractions(manualExclusionService); verifyNoMoreInteractions(dostavchenkoClient); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsBlue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Blue"</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); verifyNoMoreInteractions(manualExclusionService); verifyNoMoreInteractions(dostavchenkoClient); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsDisabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); verifyNoMoreInteractions(dostavchenkoClient); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyNotAvailableIfProductIsNotReadyForTransportation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(dostavchenkoClient.isAvailableForTransportation(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); updateProcessorService.processUpdate(testProduct); verify(availabilityNotifier, only()).notify(eq(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(testProduct.getProductId(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>))); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(expected = DostavchenkoException.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throwCustomExceptionIfDostavchenkoCommunicationFailed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Update testProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Update(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>, <span class="hljs-string"><span class="hljs-string">"Yellow"</span></span>); when(dostavchenkoClient.isAvailableForTransportation(testProduct.getProductId())) .thenThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RestClientException(<span class="hljs-string"><span class="hljs-string">"Something's wrong"</span></span>)); when(manualExclusionService.isProductEnabled(testProduct.getProductId())).thenReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); updateProcessorService.processUpdate(testProduct); } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐู ุงููุฑุญูุฉ ุ ููุฏูุง ุจุฃููุณูู: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนููู DostavchenKO ูุน singatura ุงูุตุฏููุฉ ููุฎุฏูุฉ </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุฏูุฉ ูููู ูู ุงูุถุฑูุฑู ูููุง ุชูููุฐ ููุทู ุงูุฅุฑุณุงู ุงูุจุทูุก ุ ุงูุฐู ุณุชุฑุณู ุฅููู ุงูุฎุฏูุฉ ุงููุตููุฉ ูุชุงุฆุฌ ุนูููุง </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุฏูุฉ ุงูุจุถุงุฆุน ุงููููุตูุฉ ูุชูููุนูุง </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูููุฐ: </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequiredArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdateProcessorService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> DostavchenkoClient dostavchenkoClient; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ManualExclusionService manualExclusionService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processUpdate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Update update)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (update.getProductQuantity() &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { availabilityNotifier.notify(getNotAvailableProduct(update.getProductId())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"Blue"</span></span>.equals(update.getColor())) { availabilityNotifier.notify(getNotAvailableProduct(update.getProductId())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!manualExclusionService.isProductEnabled(update.getProductId())) { availabilityNotifier.notify(getNotAvailableProduct(update.getProductId())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> availableForTransportation = dostavchenkoClient.isAvailableForTransportation(update.getProductId()); availabilityNotifier.notify(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(update.getProductId(), availableForTransportation)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception exception) { log.warn(<span class="hljs-string"><span class="hljs-string">"Problems communicating with DostavchenKO"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DostavchenkoException(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> ProductAvailability </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNotAvailableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(productId, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } }</code> </pre><br></div></div><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุทูู ุงูููุชุฌุงุช </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุญุงู ุงูููุช ูุฅุญุฏู ูุฑุงุญู TDD ุงูุญุชููุฉ - ุฅุนุงุฏุฉ ุงูุจูุงุก. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุชุฐูุฑ ุ ุจุนุฏ ุชูููุฐ ูุญุฏุฉ ุงูุชุญูู ุ ุจุฏุง ุนูุฏ ุงูุฎุฏูุฉ ููุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> productId)</span></span></span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุขู ูุฑุฑูุง ููู ููุทู ุงูุงููุตุงู ุฅูู ุฎุฏูุฉ ูููุตูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูุฎุฏูุฉ ูู ูุฐู ุงููุฑุญูุฉ ูุฑูุฏ ูุง ููู:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฏุฑุฉ ุนูู ุฅููุงู ุงูุจุถุงุฆุน. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑูุฏู ุฃู ูุนูุฏ ุฅูู ุฃู ุงูุจุถุงุฆุน ููุตููุฉ ุฅุฐุง ุชู ูุตูู ูู ููุช ุณุงุจู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑูุฏู ุฃู ูุนูุฏ ุฅูู ุฃู ุงูุจุถุงุฆุน ูุชููุฑุฉ ุฅุฐุง ูู ููู ููุงู ุงููุทุงุน ูู ูุจู. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงููุธุฑ ุฅูู ูุงุฆูุฉ ุงูุฃูููุงุช ุ ูุงูุชู ูู ูุชูุฌุฉ ูุจุงุดุฑุฉ ููุนูุฏ ุจูู ุฎุฏูุฉ ููุทู ุงูุฃุนูุงู ูุงูุฎุฏูุฉ ุงููุชููุนุฉ ุ ุฃูุฏ ุฃู ุฃุดูุฑ ุฅูู ูุง ููู: </font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ุงููุงุถุญ ุนูู ุงูููุฑ ุฃู ุงูุชุทุจูู ูุฏ ููุงุฌู ูุดููุงุช ุฅุฐุง ุฃุฑุงุฏ ุดุฎุต ูุง ุฅููุงู ุชุดุบูู ุงูููุชุฌ ุงูุฐู ุชู ูุทุน ุงุชุตุงูู ุ ูุฃู ูุฐู ุงูุฎุฏูุฉ ูุง ุชุนุฑู ูู ุงูููุช ุงูุญุงูู ููููุฉ ุงูููุงู ุจุฐูู. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃูู ุฑุจูุง ูุณุชุญู ุงูุฃูุฑ ููุงูุดุฉ ูุฐู ุงููุณุฃูุฉ ูุน ุงููุญูู ุงูุฐู ุญุฏุฏ ูููุฉ ุงูุชุทููุฑ. </font><font style="vertical-align: inherit;">ุฃุฏุฑู ุฃูู ูู ูุฐู ุงูุญุงูุฉ ูุงู ูุฌุจ ุฃู ูููู ูุฐุง ุงูุณุคุงู ูุฏ ูุดุฃ ูุจุงุดุฑุฉ ุจุนุฏ ุงููุฑุงุกุฉ ุงูุฃููู ูู ToR ุ ููููุง ูุตูู ูุธุงููุง ุจุณูุทูุง ุฅูู ุญุฏ ูุง ุ ูุฏ ูุง ูููู ูุฐุง ูุงุถุญูุง ูู ุงููุดุฑูุนุงุช ุงููุจูุฑุฉ. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูู ููู ูุนุฑู ุฃูู ุณูููู ูุฏููุง ููุงู ูุณุคูู ููุท ุนู ูุธููุฉ ูุตู ุงูุจุถุงุฆุน: ุฃุฐูุฑ ุฃููุง ููุฏูุง ููุท ูู ุนูููุฉ ุงูุชุทููุฑ.</font></font></li><li style=";text-align:right;direction:rtl"> -,       .           โ   ,         .  ,  , ,       ,      ,      , . . ProductAvailability.    ,      . . .,  ,   god object,    ,        ,      ,     TDD,          ,     .   ,  , ยซยป โ     : ยซ    ...ยป     , ,  TDD,     . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงุฎุชุจุงุฑุงุช ูุงูุชูููุฐ ุจุณูุทุฉ ููุบุงูุฉ: </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑุงุช</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ManualExclusionServiceTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ManualExclusionService service; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ManualExclusionRepository manualExclusionRepository; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearDb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ manualExclusionRepository.deleteAll(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Long productId = <span class="hljs-number"><span class="hljs-number">100L</span></span>; service.disableProduct(productId); assertThat(service.isProductEnabled(productId), is(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnEnabledIfProductWasNotDisabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThat(service.isProductEnabled(<span class="hljs-number"><span class="hljs-number">100L</span></span>), is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)); assertThat(service.isProductEnabled(<span class="hljs-number"><span class="hljs-number">200L</span></span>), is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)); } }</code> </pre> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ManualExclusionService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ManualExclusionRepository manualExclusionRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isProductEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long productId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !manualExclusionRepository.exists(productId); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disableProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> productId)</span></span></span><span class="hljs-function"> </span></span>{ manualExclusionRepository.save(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ManualExclusion(productId)); } }</code> </pre><br></div></div><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณูู ุชูุฏูู ุงูุฎุฏูุฉ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ูุตููุง ุฅูู ุงูุฎุฏูุฉ ุงูุฃุฎูุฑุฉ ุ ูุงูุชู ุณุชุถูู ุฃู ูุธุงู ุงูุจูุงูุงุช ุบูุฑ ูุฑุบูุจ ููู ุจููุณ ุงูุฑุณุงุฆู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณูุญูุง ูู ุฃู ุฃุฐูุฑู ุจุฃู ูุชูุฌุฉ ุนูู ุฎุฏูุฉ ููุทู ุงูุฃุนูุงู ุ ุฃู ูุงุฆู ProductAvailable ุ ุญูุซ ููุฌุฏ ููุท ุญููุงู: productId ู isAvailable ุ ุชู ูููููุง ุจุงููุนู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ููุชูุงููุฏ ุงููุฏููุฉ ุงูุฌูุฏุฉ ุ ูุจุฏุฃ ูู ุงูุชูููุฑ ูููุง ูุฑูุฏ ูู ูุฐู ุงูุฎุฏูุฉ:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฃูู ูุฑุฉ ูู ุฃู ุญุงู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฑุณุงู ุฅุดุนุงุฑ ุฅุฐุง ูุงู ุชูุงูุฑ ุงูููุชุฌ ูุฏ ุชุบูุฑ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุง ูุฑุณู ุฃู ุดูุก ุฅู ูู ููู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ุงูุชูู ุงูุฅุฑุณุงู ุฅูู ูุธุงู ุฌูุฉ ุฎุงุฑุฌูุฉ ูุน ุงุณุชุซูุงุก ุ ููุฌุจ ุฃูุง ูุชู ุชุถููู ุงูุฅุดุนุงุฑ ุงูุฐู ุชุณุจุจ ูู ุงูุงุณุชุซูุงุก ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุถูุง ุ ุนูุฏ ุงูุชูููุฐ ูู ุฌุงูุจ DATA ุ ุชุญุชุงุฌ ุงูุฎุฏูุฉ ุฅูู ุฑูู DataCommunicationException ุงูุฎุงุต ุจู. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ููุง ุจุณูุท ูุณุจููุง ุ ููู ุฃูุฏ ุงูุฅุดุงุฑุฉ ุฅูู ููุทุฉ ูุงุญุฏุฉ: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ูุนูููุงุช ุญูู ูุง ุฃุฑุณููุงู ูุณุจููุง ุ ููุง ูุนูู ุฃูู ุณูููู ูุฏููุง ูุณุชูุฏุน ูููุฑ ููู ุงูุญุณุงุจุงุช ุงูุณุงุจูุฉ ุนูู ุชููุฑ ุงูุณูุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู ProductAvailable ุบูุฑ ููุงุณุจ ููุญูุธ ุ ูุฃูู ุนูู ุงูุฃูู ูุง ููุฌุฏ ูุนุฑูู ุ ููุง ูุนูู ุฃูู ูู ุงูููุทูู ุฅูุดุงุก ูุนุฑู ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุงูุดูุก ุงูุฑุฆูุณู ููุง ูู ุนุฏู ุงูุฎูู ูุนุฏู ุฅุถุงูุฉ ูุฐุง ุงููุนุฑู ูุนDocument (ุณูุณุชุฎุฏู MongoDb ููุงุนุฏุฉ) ูุงูููุงุฑุณ ูู ProductAvailable ููุณูุง.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ุฃู ูุงุฆู ProductAvailable ูุน ุฌููุน ุงูุญููู ุงูููููุฉ ุชู ุฅูุดุงุคู ูู ูุฑุญูุฉ ุชุตููู ูุฆุงุช ุฃุนูู ูู ุงูุชุณูุณู ุงููุฑูู ููููุงููุงุช ูู ุชูู ุงูุชู ูููู ุจุชุตููููุง ุญุงูููุง. ูุง ุชุญุชุงุฌ ูุฐู ุงููุฆุงุช ุฅูู ูุนุฑูุฉ ุฃู ุดูุก ุนู ุงูุญููู ุงูุฎุงุตุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุธุฑูุง ูุฃู ูุฐู ุงููุนูููุงุช ูู ุชูู ูุทููุจุฉ ุนูุฏ ุงูุชุตููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ูุฐุง ูู ุงูููุงู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงููุซูุฑ ููุงูุชูุงู ุ ูุธุฑูุง ูุฃููุง ูุฏ ูุชุจูุง ุจุงููุนู ูุฌููุนุฉ ูู ุงูุงุฎุชุจุงุฑุงุช ูุน ProductAvailable ุงูุชู ูููู ุจููููุง ุฅูู ุงูุฎุฏูุฉ ุงูุขู ุ ูุฅู ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ ุฅูููุง ูุนูู ุฃู ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุณุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุฅุนุงุฏุฉ ุชุดููููุง ุ ุงูุฃูุฑ ุงูุฐู ูุฏ ูุชุทูุจ ุจุนุถ ุงูุฌูุฏ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุณูููู ููุงู ุนุฏุฏ ุฃูู ุจูุซูุฑ ูู ุงูุฃุดุฎุงุต ุงูุฐูู ูุฑุบุจูู ูู ุฌุนู ุฅูู ูุนุชุฑุถ ุนูู ProductAvailable ููุง ูู ุฃููู ูุชุจูุง ุงูุชูููุฐ ุนูู ุงูููุฑ: ุนูู ุงูุนูุณ ูู ุฐูู ุ ูุฅู ุฅุถุงูุฉ ุญูู ุฅูู ูุงุฆู ููุฌูุฏ ุณูููู ุฃุณูู ูู ุฅูุดุงุก ูุฆุฉ ุฃุฎุฑู.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑุงุช</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringRunner.class) <span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LazyAvailabilityNotifierTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LazyAvailabilityNotifier lazyAvailabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> <span class="hljs-meta"><span class="hljs-meta">@Qualifier</span></span>(<span class="hljs-string"><span class="hljs-string">"dataClient"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AvailabilityRepository availabilityRepository; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearDb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ availabilityRepository.deleteAll(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyIfFirstTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ sendNotificationAndVerifyDataBase(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyIfAvailabilityChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ProductAvailability oldProductAvailability = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); sendNotificationAndVerifyDataBase(oldProductAvailability); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ProductAvailability newProductAvailability = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); sendNotificationAndVerifyDataBase(newProductAvailability); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doNotNotifyIfAvailabilityDoesNotChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ProductAvailability productAvailability = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); sendNotificationAndVerifyDataBase(productAvailability); sendNotificationAndVerifyDataBase(productAvailability); sendNotificationAndVerifyDataBase(productAvailability); sendNotificationAndVerifyDataBase(productAvailability); verify(availabilityNotifier, only()).notify(eq(productAvailability)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doNotSaveIfSentWithException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ doThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException()).when(availabilityNotifier).notify(anyObject()); <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> exceptionThrown = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { availabilityNotifier.notify(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (RuntimeException exception) { exceptionThrown = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } assertTrue(<span class="hljs-string"><span class="hljs-string">"Exception was not thrown"</span></span>, exceptionThrown); assertThat(availabilityRepository.findAll(), hasSize(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(expected = DataCommunicationException.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wrapDataException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ doThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RestClientException(<span class="hljs-string"><span class="hljs-string">"Something wrong"</span></span>)).when(availabilityNotifier).notify(anyObject()); lazyAvailabilityNotifier.notify(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductAvailability(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendNotificationAndVerifyDataBase</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ lazyAvailabilityNotifier.notify(productAvailability); verify(availabilityNotifier).notify(eq(productAvailability)); assertThat(availabilityRepository.findAll(), hasSize(<span class="hljs-number"><span class="hljs-number">1</span></span>)); assertThat(availabilityRepository.findAll().get(<span class="hljs-number"><span class="hljs-number">0</span></span>), hasProperty(<span class="hljs-string"><span class="hljs-string">"productId"</span></span>, is(productAvailability.getProductId()))); assertThat(availabilityRepository.findAll().get(<span class="hljs-number"><span class="hljs-number">0</span></span>), hasProperty(<span class="hljs-string"><span class="hljs-string">"availability"</span></span>, is(productAvailability.isAvailable()))); } }</code> </pre> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LazyAvailabilityNotifier</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityNotifier</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityRepository availabilityRepository; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityNotifier availabilityNotifier; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> AvailabilityPersistenceObject persistedProductAvailability = availabilityRepository .findByProductId(productAvailability.getProductId()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (persistedProductAvailability == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { notifyWith(productAvailability); availabilityRepository.save(createObjectFromProductAvailability(productAvailability)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (persistedProductAvailability.isAvailability() != productAvailability.isAvailable()) { notifyWith(productAvailability); persistedProductAvailability.setAvailability(productAvailability.isAvailable()); availabilityRepository.save(persistedProductAvailability); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyWith</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { availabilityNotifier.notify(productAvailability); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (RestClientException exception) { log.error(<span class="hljs-string"><span class="hljs-string">"Couldn't notify"</span></span>, exception); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataCommunicationException(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> AvailabilityPersistenceObject </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createObjectFromProductAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProductAvailability productAvailability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AvailabilityPersistenceObject(productAvailability.getProductId(), productAvailability.isAvailable()); } }</code> </pre> <br></div></div><br><h1 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/eq/cq/u-/eqcqu-xh6fu5mybs440rhhfob-g.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูู ููุงุซู ูุงู ูุงุจุฏ ูู ูุชุงุจุชูุง ูู ุงูููุงุฑุณุฉ. ูุงุชุถุญ ุฃูู ูู ุงูุจุฏุงูุฉ ูุงู ููุชูุจูุง ุจุฏูู TDD ุ ุซู ูุงู ุงูุนูู ุฅูู ูู ููู ุถุฑูุฑููุง ุ ูุจุนุฏ ุณุชุฉ ุฃุดูุฑ ุชุบูุฑุช ุงููุชุทูุจุงุช ุ ูุชูุฑุฑ ุฅุนุงุฏุฉ ูุชุงุจุชูุง ูุฑุฉ ุฃุฎุฑู ูู ููุทุฉ ุงูุตูุฑ (ุงููุงุฆุฏุฉ ูู ุจููุฉ microservice ุ ููู ููู ุฃูุฑูุง ูุฎูููุง ุงูุชุฎูุต ูู ุดูุก ูุง) . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนู ุทุฑูู ูุชุงุจุฉ ููุณ ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู ุชูููุงุช ูุฎุชููุฉ ุ ูููููู ุฃู ุฃูุฏุฑ ุฎูุงูุงุชูู. ูู ููุงุฑุณุชู ุ ุฑุฃูุช ููู ูุณุงุนุฏ TDD ูู ุจูุงุก ุงูุจููุฉ ุ ููุง ูุจุฏู ูู ุ ุจุดูู ุตุญูุญ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููู ุฃู ุฃูุชุฑุถ ุฃู ุงูุณุจุจ ูู ุฐูู ููุณ ุฅูุดุงุก ุงุฎุชุจุงุฑุงุช ูุจู ุงูุชูููุฐ ุ ูููู ุจุนุฏ ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ูู ุงูุจุฏุงูุฉ ุ ูููุฑ ุฃููุงู ูู ูุง ุณุชูุนูู ุงูุทุจูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง. ุฃูุถูุง ุ ุนูู ุงูุฑุบู ูู ุนุฏู ูุฌูุฏ ุชุทุจูู ุ ูููููุง ุญููุง "ุชุฑุชูุจ" ูู ุงููุงุฆูุงุช ุงููุณูุงุฉ ุงูุนูุฏ ุงูุฏููู ุงูุฐู ูุญุชุงุฌู ุงููุงุฆู ุ ุฏูู ุฅุบุฑุงุก ูุฅุถุงูุฉ ุดูุก ุจุณุฑุนุฉ ูู ููุงู ูุง ูุงูุญุตูู ุนูู ููุงู ูุชุนุงูู ูุน ุงูุนุฏูุฏ ูู ุงูููุงู ูู ููุณ ุงูููุช.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุงุญุฏุฉ ูู ุฃูู ูุฒุงูุง TDD ุจููุณู ุ ูููููู ุฃู ุฃุคูุฏ ุฃููู ุฃุตุจุญุช ุจุงููุนู ุฃูุซุฑ ุซูุฉ ูู ุงูููุชุฌ ุงูุฐู ุฃูุชุฌู. ูุฏ ูููู ูุฐุง ุจุณุจุจ ุญูููุฉ ุฃู ุงูุดูุฑุฉ ุงููุชูุณุทุฉ ุงูููุชูุจุฉ ุนูู TDD ุฑุจูุง ุชููู ูุบุทุงุฉ ุจุดูู ุฃูุถู ูู ุฎูุงู ุงูุงุฎุชุจุงุฑุงุช ุ ูููู ุจุนุฏ ุฃู ุจุฏุฃุช ุงููุชุงุจุฉ ุนูู TDD ุชู ุชุฎููุถ ุนุฏุฏ ุงูุชุนุฏููุงุช ุงูุชู ุฃุฌุฑูุชูุง ุนูู ุงูุดูุฑุฉ ุจุนุฏ ุฃู ูุฏูุช ุงุฎุชุจุงุฑูุง ุชูุฑูุจุง ุฅูู ุงูุตูุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุดูู ุนุงู ุ ูุงู ููุงู ุดุนูุฑ ุจุฃููู ููุทูุฑ ุฃุตุจุญุช ุฃูุถู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ุงูุชุทุจูู ูููู ุงูุนุซูุฑ ุนููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูุฑูุฏูู ุฃู ูููููุง ููู ุชู ุฅูุดุงุคู ูู ุฎุทูุงุช ุ ุฃูุตู ุจุฅููุงุก ุงูุงูุชูุงู ูุชุงุฑูุฎ ุงูุฅูุชุฒุงูุงุช ุ ุจุนุฏ ุชุญููู ุฃู ุนูููุฉ ุฅูุดุงุก ุชุทุจูู TDD ูููุฐุฌู ุ ูุขูู ุฃู ุชููู ุฃูุซุฑ ูุงุจููุฉ ููููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูููุฏ ุฌุฏุง</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุน ููุฏูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุตู ุจูุดุงูุฏุชู ูุฃู ุดุฎุต ูุฑูุฏ ุงูุงูุบูุงุณ ูู ุนุงูู TDD. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุฏ ุฑูุฒ ุงูุชุทุจูู ุงุณุชุฎุฏุงู ุณูุณูุฉ ููุณูุฉ ูุซู json. </font><font style="vertical-align: inherit;">ูุนุฏ ุฐูู ุถุฑูุฑููุง ููุชุญูู ูู ููููุฉ ุชุญููู ุงูุชุทุจูู json ุนูู ูุงุฆูุงุช POJO. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุณุชุฎุฏู IDEA ุ ูุจุดูู ุณุฑูุน ูุจุฏูู ุฃูู ุ ูููู ุชุญููู ุงูุชูุณูู ุงููุงุฒู ุจุงุณุชุฎุฏุงู ุญูู ูุบุฉ JSON.</font></font><br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูู ุนููุจ ุงูููุฌุ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ููุช ุทููู ูุชุทููุฑ. ุงูุจุฑูุฌุฉ ูู ุงููููุฐุฌ ุงูููุงุณู ุ ูููู ูุฒูููู ุชุญูู ูุถุน ุงูุฎุฏูุฉ ูููุฎุชุจุฑูู ููุงุฎุชุจุงุฑ ุฏูู ุงุฎุชุจุงุฑุงุช ุนูู ุงูุฅุทูุงู ุ ุฅุถุงูุชูู ุนูู ุทูู ุงูุทุฑูู. ูุงู ุณุฑูุน ุฌุฏุง. ุนูู TDD ูุฐุง ูู ููุฌุญ. ุฅุฐุง ูุงู ูุฏูู ููุงุนูุฏ ููุงุฆูุฉ ุถููุฉ ุ ููู ูููู ูุฏูุฑู ุฑุงุถูู. ููุง ุ ุงูููุงุถูุฉ ุจูู ุงูุฃุฏุงุก ุงูุฌูุฏ ุนูู ุงูููุฑ ุ ูููู ููุชุฑุฉ ุทูููุฉ ูููุณ ุฌูุฏุฉ ุฌุฏุง ุ ูููู ุจุณุฑุนุฉ. ุงุฎุชุฑุช ุงูุฃูู ูููุณู ุ ูุฃู ุงูุซุงููุฉ ููุชูุฌุฉ ุฃุทูู. ููุน ุงูุฃุนุตุงุจ ุงููุจูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ููุดุงุนุฑู ุ ูุฅู TDD ุบูุฑ ููุงุณุจ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุงูุนุฏูุฏ ูู ุฅุนุงุฏุฉ ุงูุจูุงุก: ูุฃูู ุจุฎูุงู ุชุทุจูู ุชู ุฅูุดุงุคู ูู ููุทุฉ ุงูุตูุฑ ุ ููุณ ูู ุงููุงุถุญ ูุง ูู ุงูุทุฑููุฉ ุงูุชู ูุฌุจ ุงุชุจุงุนูุง ูุงูุจุฏุก ูู ุงูููุงู ุจูุง ุฃููุงู. ูุฏ ูุชุถุญ ุฃูู ุชุนูู ุนูู ุงุฎุชุจุงุฑ ุตูู ุ ููุชูุฌุฉ ูุฐูู ุ ูู ุจุญุฐูู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD ููุณ ุฑุตุงุตุฉ ูุถูุฉ. </font><font style="vertical-align: inherit;">ูุฐู ูุตุฉ ุชุฏู ุนูู ุงูุดูุฑุฉ ุงููุงุถุญุฉ ูุงููุงุจูุฉ ูููุฑุงุกุฉ ูุงูุชู ูููู ุฃู ุชุฎูู ูุดุงูู ูู ุงูุฃุฏุงุก. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููุช ุจุฅูุดุงุก ูุฆุงุช N ุ ูุงูุชู ุ ููุง ูู ุงูุญุงู ูู Fowler ุ ูููู ูู ูููุง ุจุนูู ุดูุก ุฎุงุต ุจู. </font><font style="vertical-align: inherit;">ุซู ุงุชุถุญ ุฃูู ูู ุฃุฌู ุงูููุงู ุจุนูููู ุ ูุญุชุงุฌูู ุฅูู ุงูุฌููุน ููุฐูุงุจ ุฅูู ุงููุงุนุฏุฉ. </font><font style="vertical-align: inherit;">ูุณูููู ูุฏูู ุงุณุชูุณุงุฑุงุช N ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ุจุฏูุง ูู ุตูุน ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุงุฆู ุฅูู ูุงุญุฏ ูุงูุฐูุงุจ 1 ูุฑุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชูุงุชู ูู ุฃุฌู ูููู ุซุงููุฉ ุ ุซู ุจุงุณุชุฎุฏุงู TDD ุ ูุฌุจ ุฃู ุชุฃุฎุฐ ุฐูู ูู ุงูุงุนุชุจุงุฑ: ุงูููุฏ ุงููุงุจู ูููุฑุงุกุฉ ููุณ ูู ุงูุฃุณุฑุน ุฏุงุฆููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูู ุงูุตุนุจ ุงูุชุจุฏูู ุฅูู ูุฐู ุงููููุฌูุฉ - ุชุญุชุงุฌ ุฅูู ุชุนููู ููุณู ุฃู ุชููุฑ ุจุทุฑููุฉ ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูุนุธู ุงูุฃูู ูู ุงููุฑุญูุฉ ุงูุฃููู. </font><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงูุฃูู ูุชุจุช 1.5 ุฃูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุณูุง ุ ุงููุงุถู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุณุชุฎุฏู TDD ูุงูุฑูุฒ ุงูุฎุงุต ุจู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฒุงู ุบูุฑ ุฌุฏุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ูุฏ ูุง ุชููู ุงููุณุฃูุฉ ูู ุงููููุฌูุฉ. </font><font style="vertical-align: inherit;">ููููุง ุณุงุนุฏุชูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/je/ix/2n/jeix2nwpo0ui_ehjeisprshkrvk.jpeg"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar456662/">https://habr.com/ru/post/ar456662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar456650/index.html">ุงุฎุชูุงุฑ ููุฒุงููุฉ ุงูุฌูุจ ุงูุฐุจุฐุจุงุช</a></li>
<li><a href="../ar456652/index.html">ุงูููุช ูุง ููุชุธุฑ: ูู ูููุฏูุฒ 10 ุงูุฌุฏูู ุงูุฒููู ูููู ุฃู ุชููู ูููุฏุฉ ููุฌุงูู</a></li>
<li><a href="../ar456654/index.html">ููุณ ูุฎูู ุฌุฏุง ูุดุฑูุน ุชุฎุทูุท ููุงุฑุฏ ุงููุคุณุณุงุช ููุง ุฑุณูุช</a></li>
<li><a href="../ar456656/index.html">ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ ุญูู SDL 2: ุงูุฏุฑุณ 4 - ุชูุฏูุฏ PNG</a></li>
<li><a href="../ar456658/index.html">ุงูููู: ููู ูููู ุงูููุงุฑุงุช ูู ุงููุฑูู</a></li>
<li><a href="../ar456664/index.html">ูู ููุงุถู ุนูุฏูุง ูููุฏ ุงูุฑูุจูุช ุฃููุงูู</a></li>
<li><a href="../ar456668/index.html">Microsoft ML Spark: ุงูุชุฏุงุฏ Spark ุงูุฐู ูุฌุนู SparkML ุฃูุซุฑ ุฅูุณุงููุฉ ู LightGBM ูููุงูุฃุฉ</a></li>
<li><a href="../ar456670/index.html">ุญูู ุทุฑููุฉ ูุตุงุฏูุฉ ุชุฌุณุณ ุฌุฏุง</a></li>
<li><a href="../ar456672/index.html">ูุตูุงุช Nginx: ุฅุนูุงูุงุช ุบูุฑ ูุชุฒุงููุฉ ูู PostgreSQL ุฅูู websocket</a></li>
<li><a href="../ar456674/index.html">ูุฑุต ุฌุฏูุฏุฉ ููุชุฑููุฉ ุนูู Facebook ูู ุชูู ุชุนุฑููุง</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>