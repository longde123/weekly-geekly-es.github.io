<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∏üèæ ‚ùî üåÜ O interior dos jogos retr√¥: Punch-Out para NES üíÜ üò§ ‚ôäÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parte 1. Senhas 
 O jogo NES, Mike Tyson, Punch-Out usa um sistema de senha que permite aos jogadores continuar o jogo a partir de um ponto espec√≠fico...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O interior dos jogos retr√¥: Punch-Out para NES</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434550/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0b/41b/4f2/b0b41b4f285c002424e55b62ff530362.png" alt="imagem"></div><br><h2>  Parte 1. Senhas </h2><br>  O jogo NES, Mike Tyson, Punch-Out usa um sistema de senha que permite aos jogadores continuar o jogo a partir de um ponto espec√≠fico.  Cada senha consiste em 10 d√≠gitos, que podem variar de 0 a 9. O jogo pode aceitar dois tipos de senhas, que eu chamo de senhas ‚Äúnormais‚Äù e ‚Äúespeciais‚Äù.  Senhas especiais s√£o certas combina√ß√µes de 10 d√≠gitos, cuja entrada o jogo reage de uma maneira √∫nica.  Uma lista completa de senhas especiais √© assim: <br><br><ul><li>  075 541 6113 - sinal de ocupado 1 </li><li>  800 422 2602 - sinal de ocupado 2 </li><li>  206 882 2040 - sinal de ocupado 3 </li><li>  135 792 4680 - jogo em um torneio oculto: ‚ÄúAnother World Circuit‚Äù (para que a senha seja aceita, voc√™ deve pressionar o bot√£o Selecionar e pressionar A + B) </li><li>  106 113 0120 - exibi√ß√£o de t√≠tulos (para que a senha seja aceita, voc√™ deve manter pressionado o bot√£o Selecionar e pressionar A + B) </li><li>  007 373 5963 - transfere o jogador para a batalha com Mike Tyson </li></ul><br>  O segundo tipo de senhas aceitas pelo jogo s√£o senhas regulares.  Em senhas regulares, o progresso que o jogador fez no jogo √© codificado.  Os seguintes dados do jogo s√£o codificados em uma senha regular: <br><br><ul><li>  N√∫mero de vit√≥rias na carreira </li><li>  N√∫mero de perdas de carreira </li><li>  Vit√≥rias por nocaute </li><li>  Pr√≥ximo oponente </li></ul><br><h2>  Codifica√ß√£o de senha </h2><br>  Como exemplo, para estudar a gera√ß√£o de senhas, usamos um jogo com 24 vit√≥rias, 1 derrota, 19 nocautes e come√ßando no torneio mundial com uma batalha contra o Super Macho Man. <br><a name="habracut"></a><br>  O processo de codifica√ß√£o do estado de um jogo em uma senha come√ßa com a coleta do n√∫mero de vit√≥rias, derrotas e nocautes no buffer.  O jogo apresenta cada n√∫mero na forma de um <a title="Decimal com c√≥digo bin√°rio" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo decimal bin√°rio</a> formado por 8 bits por d√≠gito e 2 d√≠gitos para cada valor.  Ou seja, para 24 vit√≥rias, voc√™ precisa de um byte com um valor de 2 e um segundo byte com um valor de 4. O mesmo ocorre com pares de bytes para perdas e nocautes, ou seja, √© obtido um total de 6 bytes de dados.  No diagrama abaixo, esses 6 bytes s√£o indicados com valores em decimal e bin√°rio. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/489/fab/198/489fab1987ec36a598e9f53353ddab14.png"></div><br>  O pr√≥ximo passo √© gerar uma soma de verifica√ß√£o para esses 6 bytes.  O byte da soma de verifica√ß√£o √© calculado adicionando 6 bytes separados e subtraindo o resultado de 255. No nosso caso, 2 + 4 + 0 + 1 + 1 + 9 = 17, ou seja, 255 - 17 = 238. <br><br>  Em seguida, escrevemos alguns bits de 6 bytes em um novo buffer.  Esse buffer pode ser interpretado como um valor intermedi√°rio de 28 bits, que preencheremos passo a passo.  Os bits do primeiro buffer s√£o divididos em grupos de dois e s√£o movidos para diferentes posi√ß√µes codificadas do segundo buffer.  Esta √© a primeira de v√°rias etapas cuja √∫nica tarefa √© simplesmente ofuscar os dados para complicar o processo de gera√ß√£o de senhas para os jogadores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/369/41d/366/36941d366047379b7279a42b1305ea86.png"></div><br>  Observe que nem todos os bits do buffer original s√£o transferidos para o novo buffer intermedi√°rio.  Esses bits s√£o ignorados, porque sabe-se que eles sempre s√£o 0. Gra√ßas √†s regras do jogo, basta transmitir o n√∫mero de perdas na senha com apenas 2 bits de informa√ß√£o.  Se a quantidade total de perdas atingir 3, o game over ocorre e o jogador n√£o recebe uma senha.  Portanto, basta descrever o n√∫mero de perdas com os n√∫meros 0, 1 e 2 e, para isso, apenas 2 bits s√£o suficientes. <br><br>  Em seguida, escrevemos outros pares de bits no buffer intermedi√°rio.  Os quatro primeiros pares s√£o obtidos do valor da soma de verifica√ß√£o calculado anteriormente.  Outro par √© retirado do valor do inimigo.  O valor de um advers√°rio √© um n√∫mero que indica qual advers√°rio um jogador lutar√° ap√≥s inserir uma senha.  Tr√™s poss√≠veis valores inimigos podem ser usados: <br><br>  0 - DON FLAMENCO (primeira luta do torneio principal) <br><br>  1 - PISTON HONDA (primeira luta do torneio mundial) <br><br>  2 - SUPER MACHO MAN (√∫ltima luta do torneio mundial) <br><br>  Como queremos gerar uma senha que nos confronte com o Super Macho Man, usamos 2 como o valor do advers√°rio.Em seguida, os bits de soma de verifica√ß√£o e os valores do advers√°rio s√£o gravados nos bits intermedi√°rios da seguinte maneira: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e5/e6c/b30/0e5e6cb30922b23fc4f27cb10edfa383.png"></div><br>  O pr√≥ximo passo √© executar v√°rias permuta√ß√µes c√≠clicas dos bits intermedi√°rios √† esquerda.  Uma permuta√ß√£o c√≠clica para a esquerda significa que todos os bits s√£o deslocados uma posi√ß√£o para a esquerda, e o bit que foi o mais √† esquerda se move e se torna o mais √† direita.  Para calcular o n√∫mero de permuta√ß√µes para a esquerda, pegamos a soma do valor do oponente e o n√∫mero de perdas, adicionamos 1 e dividimos por 3 esse resultado.  No nosso caso, resulta 2 + 1 + 1 = 4. Ent√£o o restante de 4/3 √© 1, ent√£o alternamos ciclicamente os bits intermedi√°rios para a esquerda uma vez. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b6/877/748/9b68777488be3ba29882276e1bb9f3be.png"></div><br>  Neste ponto, os bits intermedi√°rios j√° est√£o completamente misturados e √© hora de come√ßar a quebr√°-los para obter os n√∫meros que comp√µem a senha.  As senhas devem consistir em 10 d√≠gitos, portanto, dividiremos 28 bits intermedi√°rios em 10 n√∫meros separados, que chamaremos de valores de senha P0, P1, P2 etc.  Cada um dos nove primeiros valores da senha recebe 3 bits de dados e o √∫ltimo obt√©m apenas um dos bits intermedi√°rios.  Para completar o valor da senha final, tamb√©m incluiremos bits indicando o n√∫mero de permuta√ß√µes realizadas na etapa anterior. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/afe/071/3ee/afe0713eea345b68c5a429b804b146c5.png"></div><br>  Por fim, adicionamos a cada valor de senha um deslocamento exclusivo e codificado.  O d√≠gito da senha final ser√° o restante dessa soma da divis√£o por 10. Por exemplo, na s√©tima posi√ß√£o, usamos o deslocamento 1, ou seja, obtemos 5 + 1 = 6, e o d√≠gito final √© o restante de 6/10, ou seja, 6. Na quarta posi√ß√£o, usamos deslocamento 7, ou seja, obtemos 5 + 7 = 12, e o n√∫mero final √© igual ao restante 12/10, ou seja, 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f08/767/d3f/f08767d3fb4dff169947863869e2d7db.png"></div><br>  Ent√£o, temos d√≠gitos de senha prontos que podem ser verificados no jogo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70f/3df/4d4/70f3df4d44e3dee701740b7d1408a8c4.png"></div><br><h2>  Decodifica√ß√£o de senha </h2><br>  O processo de decodifica√ß√£o de senhas para o n√∫mero de vit√≥rias / derrotas / nocautes e o valor do oponente √© uma implementa√ß√£o simples na ordem inversa de todas as etapas descritas acima.  Vou deixar isso como uma tarefa para os leitores.  No entanto, o jogo tem dois erros not√°veis ‚Äã‚Äãque ele faz ao decodificar e verificar as senhas inseridas pelo jogador. <br><br>  O primeiro erro ocorre na primeira etapa de decodifica√ß√£o da senha, ou seja, ao subtrair compensa√ß√µes para retornar aos valores da senha.  Os valores iniciais da senha continham 3 bits de dados cada, ou seja, seus valores antes de aplicar as compensa√ß√µes devem estar no intervalo de 0 a 7.  No entanto, o jogador pode inserir uma senha que, ap√≥s subtrair o deslocamento, resulta em um valor de senha de 8 ou 9 (dividindo por 10 com o restante).  Em vez de rejeitar imediatamente essa senha, o jogo por engano n√£o verifica esse caso e permite adicionar um bit de dados adicional ao valor da senha que pode poluir o conjunto de bits intermedi√°rios de forma que as senhas n√£o sejam mais exclusivas.  Como certos bits intermedi√°rios podem ser configurados com o d√≠gito correspondente da senha, OU com um bit adicional do valor da senha vizinha, h√° muitas senhas que podem ser convertidas no mesmo conjunto de bits intermedi√°rios.  √â por isso que voc√™ pode encontrar senhas diferentes que d√£o o mesmo resultado no jogo, embora devessem ser √∫nicas. <br><br>  O segundo erro √© um erro na l√≥gica que o jogo usa para verificar os dados ap√≥s decodificar a senha.  O jogo est√° tentando aplicar as seguintes condi√ß√µes: <br><br><ul><li>  a soma de verifica√ß√£o armazenada na senha corresponde √† soma de verifica√ß√£o que deve ser obtida levando em considera√ß√£o o n√∫mero de vit√≥rias / derrotas / nocautes armazenados na senha </li><li>  o valor da perda √© 0, 1 ou 2 </li><li>  valor inimigo √© 0, 1 ou 2 </li><li>  o n√∫mero de permuta√ß√µes c√≠clicas armazenadas na senha √© o n√∫mero correto, levando em considera√ß√£o o valor das perdas e o valor do oponente armazenado na senha </li><li>  todos os n√∫meros de vit√≥ria / perda / nocaute armazenados na senha est√£o no intervalo de 0 a 9 </li><li>  vit√≥rias&gt; = 3 </li><li>  vit√≥rias&gt; = nocautes </li></ul><br>  Se alguma dessas condi√ß√µes n√£o for atendida, o jogo dever√° rejeitar a senha.  No entanto, h√° um erro na implementa√ß√£o da verifica√ß√£o final (ou seja, ao verificar os n√∫meros codificados pelo BCD.) Em vez de verificar a vit√≥ria&gt; = nocautes, o jogo permite casos em que o n√∫mero superior de vit√≥rias √© 0, o n√∫mero mais baixo de vit√≥rias&gt; = 3 e o n√∫mero superior de nocautes √© menor que o n√∫mero mais baixo vit√≥rias.  Por exemplo, um registro com 3 vit√≥rias, 0 derrota e 23 nocautes ser√° aceito pelo jogo (que comprova a senha 099 837 5823), embora deva ser rejeitado (j√° que √© imposs√≠vel vencer 23 lutas por nocaute se voc√™ venceu em apenas 3 lutas). <br><br><h2>  Conclus√£o </h2><br>  Os detalhes espec√≠ficos desse esquema de codifica√ß√£o s√£o exclusivos do Punch-Out, mas a ideia geral de obter bits importantes do estado do jogo, convertendo-os com a possibilidade de restaura√ß√£o para ofuscar o estado inicial e us√°-los para gerar um certo n√∫mero de caracteres para demonstrar ao jogador como uma senha √© uma abordagem bastante universal.  Voc√™ pode usar somas de verifica√ß√£o para que altera√ß√µes acidentais de senha (por exemplo, se um jogador cometer um erro) geralmente levem √† sua rejei√ß√£o, em vez de criar outra senha com um estado aleat√≥rio do jogo. <br><br><h2>  Parte 2. Vis√£o Geral do Punch-Out </h2><br>  Todo lutador no Punch-Out de Mike Tyson !!!  controlado por um ou mais scripts de bytecode interpretados.  O personagem do jogador, Little Mac, executa um script simples que cont√©m a l√≥gica de cada a√ß√£o dispon√≠vel para o jogador (evas√£o, bloqueios, socos etc.) Os personagens dos oponentes s√£o controlados por 3 n√≠veis de scripts independentes que juntos criam o comportamento do personagem. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0b/c1e/911/d0bc1e9118006e13ce453f7ed991cead.png"></div><br><h2>  Script de correspond√™ncia </h2><br>  O script inimigo de mais alto n√≠vel √© executado em todas as 3 rodadas de batalha e controla as mudan√ßas mais ambiciosas no comportamento do oponente.  Vou chamar esse script de "script de correspond√™ncia".  Sua principal tarefa √© escolher os comportamentos que o inimigo executar√° em resposta a v√°rios eventos durante a batalha.  Por exemplo, um determinado comportamento ser√° acionado instantaneamente depois que o oponente se levantar ap√≥s um knockdown ou quando o jogador ficar sem cora√ß√µes e ficar cansado.  Esses comportamentos s√£o gravados na tabela e s√£o chamados pelo mecanismo de jogo em resposta aos eventos correspondentes.  O script de partida tamb√©m define os valores iniciais para as op√ß√µes de configura√ß√£o relacionadas √† complexidade da batalha (por exemplo, a quantidade de tempo que o oponente permanece vulner√°vel ap√≥s um ataque perdido.) Finalmente, o script de partida come√ßa a esperar por determinados marcadores tempor√°rios durante a batalha para fazer altera√ß√µes nos valores definidos anteriormente . <br><br><h2>  Script de comportamento </h2><br>  O script de um n√≠vel inferior de um advers√°rio √© um "script de comportamento".  Esse n√≠vel √© respons√°vel pela sequ√™ncia de certos golpes e ataques que o oponente deve executar dentro da estrutura do comportamento atual (definido pelo script de partida.) Os scripts de comportamento executam comandos como ‚Äúaplique o jab certo, pause por 28 quadros, aplique aleatoriamente o uppercut esquerdo ou direito, repita tudo s√£o 5 vezes. "  O script tamb√©m possui comandos para ler e gravar em qualquer endere√ßo na mem√≥ria do mecanismo do jogo, para que o comportamento possa ser muito din√¢mico. <br><br><h2>  Script de anima√ß√£o </h2><br>  O script do advers√°rio de n√≠vel mais baixo √© um "script de anima√ß√£o".  Esses scripts executam os detalhes de cada golpe individual, bloqueio ou ataque especial como parte do comportamento (definido pelo script de comportamento.) Nesse n√≠vel, comandos como "atribuem o sprite 23 ao quadro atual da anima√ß√£o do inimigo, mova-o para baixo e para a direita por 1 pixel a cada segundo quadro em para os pr√≥ximos 10 quadros, altere o quadro de anima√ß√£o para sprite 24, toque o efeito de som 7 ".  Al√©m dos comandos de anima√ß√£o, os scripts de anima√ß√£o tamb√©m executam sequ√™ncias de v√°rias mudan√ßas nos estados de jogabilidade que est√£o intimamente relacionados aos movimentos inimigos.  Por exemplo, em uma longa anima√ß√£o de um ataque especial, um script de anima√ß√£o pode inserir comandos que tornam o inimigo vulner√°vel a knockdowns com um golpe por um per√≠odo muito curto.  Assim como os scripts de comportamento, os scripts de anima√ß√£o podem ler e gravar endere√ßos de mem√≥ria arbitr√°rios no mecanismo do jogo para obter efeitos mais din√¢micos. <br><br><h2>  Script Little Mac </h2><br>  O script executado pelo personagem do Little Mac player √© mais parecido com os scripts de anima√ß√£o inimigos.  Ele altera o quadro atual da anima√ß√£o refletida e move o player pela tela.  Como os scripts de anima√ß√£o, o script do Little Mac executa sequ√™ncias de determinados eventos de jogabilidade, por exemplo, em que momento espec√≠fico o Mac deve atingir o inimigo ou quando deve executar um bloqueio ou evas√£o.  O script do Little Mac controla a entrada do jogador, semelhante √† maneira como os scripts comportamentais controlam os scripts de anima√ß√£o inimigos. <br><br>  Cada um desses quatro scripts √© processado por seu pr√≥prio int√©rprete.  Embora muitos deles tenham a mesma funcionalidade, por exemplo, controle de controle b√°sico e acesso direto √† mem√≥ria, cada um dos sistemas implementa sua pr√≥pria vers√£o e n√£o compartilha o c√≥digo comum (ou o espa√ßo do opcode) com outros sistemas.  Isso permite que cada tipo de script seja muito espec√≠fico e use efetivamente um pequeno conjunto de comandos de destino.  Os dados de script comp√µem cerca de 22% dos dados n√£o gr√°ficos do cartucho de jogo (o c√≥digo da m√°quina para o pr√≥prio mecanismo de jogo leva apenas 17%), por isso era muito importante que os scripts tivessem uma apar√™ncia compacta. <br><br><h2>  Parte 3. Script de correspond√™ncia de punchout </h2><br>  O script da partida controla o comportamento do oponente no n√≠vel mais alto.  A principal opera√ß√£o que ele executa repetidamente est√° aguardando um certo tempo da rodada e fazendo altera√ß√µes nos dados de configura√ß√£o do oponente naquele momento.  O v√≠deo mostra a primeira rodada da primeira batalha contra o Bald Bull, junto com um script de partida que controla seu comportamento geral. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/99DN0sM9ep8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Existem tr√™s opera√ß√µes principais que um script de correspond√™ncia pode executar.  O primeiro √© aguardar at√© que o cron√¥metro redondo atinja um determinado valor.  O segundo √© perguntar se o comportamento atual do advers√°rio mudou.  Os comportamentos s√£o registrados na tabela de configura√ß√£o da batalha na mem√≥ria e, em seguida, chamados em momentos diferentes pelos scripts de partida e pelo pr√≥prio mecanismo de jogo.  A tabela possui dois segmentos de comportamento usados ‚Äã‚Äãpelos scripts de correspond√™ncia.  Eu os chamo de comportamento "b√°sico" e "especial".  Comportamentos especiais s√£o, por exemplo, um ataque de Bull Charge de um oponente da Bald Bull ou Honda Rush de um oponente da Piston Honda, e os principais comportamentos s√£o os acertos habituais que o oponente realiza pelo resto do tempo.  Os scripts comportamentais espec√≠ficos usados ‚Äã‚Äãpara implementar esses tipos de comportamento podem ser alterados pelo script de partida diretamente durante a batalha, para que os lutadores possam come√ßar com um comportamento principal e depois mudar para outro (conforme notado no v√≠deo, Bald Bull faz isso quando o cron√¥metro chega a 0 : 20.) <br><br>  Uma caracter√≠stica das mudan√ßas de comportamento executadas pelos scripts de correspond√™ncia √© que elas podem ser substitu√≠das por mudan√ßas comportamentais solicitadas pelo mecanismo de jogo.  O mecanismo de jogo usa quatro segmentos comportamentais para solicitar novos comportamentos quando o Mac perde todo o cora√ß√£o e se cansa, e tamb√©m quando o oponente se levanta ap√≥s um knockdown.  Se o script de partida atender √† solicita√ß√£o para alterar o comportamento, mas um desses quatro eventos do mecanismo de jogo ocorrer antes do processamento da solicita√ß√£o (as solicita√ß√µes n√£o poder√£o ser processadas at√© que o oponente entre no estado de espera), o mecanismo de jogo definir√° o comportamento desejado e a solicita√ß√£o para o script de partida ser√° rejeitada.  Alguns lutadores, como o Bald Bull, solicitam comportamentos especiais v√°rias vezes durante um curto per√≠odo de tempo.  Parece que isso √© necess√°rio apenas para reduzir a probabilidade de que qualquer uma dessas solicita√ß√µes seja descartada acidentalmente. <br><br>  A terceira opera√ß√£o principal do script de correspond√™ncia √© a corre√ß√£o de mem√≥ria.  A maioria dos patches de mem√≥ria afeta a tabela de configura√ß√£o de batalha, na qual os scripts de comportamento s√£o registrados.  Al√©m de conjuntos de comportamentos, a tabela cont√©m dados relacionados √† complexidade da batalha.  Por exemplo, quando o cron√¥metro do v√≠deo atinge 0:30, o Bald Bull altera suas configura√ß√µes de seguran√ßa.  Isso leva ao fato de que o jogador n√£o pode mais engan√°-lo pressionando e, em seguida, dando um golpe no corpo.  Al√©m disso, os scripts de correspond√™ncia t√™m a capacidade de corrigir endere√ßos de mem√≥ria arbitr√°rios, mas essa fun√ß√£o √© usada apenas uma vez - no in√≠cio do segundo turno com Mike Tyson, para que o jogador receba uma estrela pela primeira vez quando o atinge, que est√° no modo de espera. <br><br><h2>  Parte 4. Script de comportamento de perfura√ß√£o </h2><br>  Agora, examinamos os scripts de comportamento diretamente envolvidos na implementa√ß√£o de comportamentos. <br><br>  O v√≠deo mostra uma interpreta√ß√£o de como pode ser o script de comportamento rival do Piston Honda 1 nas equipes inglesas. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_Q9_7vSLndQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Comandos de anima√ß√£o </h2><br>  Os scripts comportamentais s√£o respons√°veis ‚Äã‚Äãpelo lan√ßamento sequencial de anima√ß√µes da mesma maneira que os scripts de correspond√™ncia foram respons√°veis ‚Äã‚Äãpelo lan√ßamento das anima√ß√µes.  O comando <code>anim</code> reproduz uma anima√ß√£o espec√≠fica e o comando <code>anim_rnd</code> executa uma anima√ß√£o selecionada aleatoriamente em uma lista de 8 op√ß√µes.  No v√≠deo acima, no momento de uma sele√ß√£o aleat√≥ria de uma lista de op√ß√µes, a op√ß√£o selecionada √© destacada momentaneamente em vermelho.  Quando a Piston Honda aplica seus dois primeiros jabs, o <code>anim</code> usado para cada um deles.  Depois disso, ele usa <code>anim_rnd</code> para selecionar aleatoriamente um conjunto contendo 6 anima√ß√µes de gancho e 2 anima√ß√µes vazias.  Como resultado disso, ele fica viciado em 75% das vezes e n√£o faz nada em 25% das vezes. <br><br>  Do ponto de vista do script de comportamento, as anima√ß√µes s√£o reproduzidas de forma s√≠ncrona, porque quando o sistema de anima√ß√£o n√£o est√° no modo ocioso, o interpretador de scripts √© pausado. <br><br><h2>  Comandos de controle de execu√ß√£o </h2><br>  Existem v√°rios comandos que modificam a execu√ß√£o do pr√≥prio script de comportamento.  <code>pause</code> comandos <code>pause</code> podem pausar a execu√ß√£o do script para um determinado n√∫mero de quadros ou para o n√∫mero de quadros selecionados aleatoriamente em uma lista de 2 op√ß√µes. <br><br>  Existem v√°rios comandos de ramifica√ß√£o que, sob certas condi√ß√µes, alternam opcionalmente para diferentes partes do script de comportamento.  O <code>branch_rnd</code> tem uma probabilidade determinada de que um branch ocorra toda vez que for executado.  Um caso especial de ramifica√ß√£o probabil√≠stica √© o comando <code>branch_always</code> , que tem 100% de probabilidade de ramifica√ß√£o. <br><br>  Um mecanismo de loop simples √© incorporado ao interpretador de scripts de comportamento.  O comando <code>set_loop_count</code> define o valor atual do contador de loop.  Cada vez que o comando <code>branch_while_loop</code> √© <code>branch_while_loop</code> ele diminui o valor do contador de loop em um e executa ramifica√ß√£o apenas se o valor do contador for maior que zero. <br><br>  O √∫ltimo tipo de ramifica√ß√£o verifica o conte√∫do da mem√≥ria para tomar uma decis√£o sobre ramifica√ß√£o.  Piston Honda usa esse comando <code>branch_mem_test</code> para verificar se seu √∫ltimo golpe em um determinado comportamento foi bem-sucedido.  Se o acerto atingir o alvo, ele se ramifica para o pr√≥ximo acerto.  Se a <code>branch_while_loop</code> n√£o tiver sido bem-sucedida, ele usar√° o comando <code>branch_while_loop</code> para continuar <code>branch_while_loop</code> apenas quando cinco <code>branch_while_loop</code> com <code>branch_while_loop</code> acumuladas. <br><br><h2>  Comandos de comportamento </h2><br>  Existem dois comandos pelos quais os scripts de comportamento podem controlar o pr√≥prio sistema de comportamento.  O comando <code>begin_behavior_main</code> usado para finalizar o comportamento atual do execut√°vel e iniciar o comportamento principal.  Isso difere da ramifica√ß√£o no script de comportamento, porque a parte do script considerada o comportamento "principal" atual pode ser alterada durante a correspond√™ncia pelo script de correspond√™ncia (consulte a parte anterior do artigo sobre scripts de correspond√™ncia). <br><br>  Outro comando relacionado ao comportamento √© <code>enable_behavior_change</code> .  Quando um novo comportamento √© iniciado, ele come√ßa com um estado de bloqueio, quando todas as outras solicita√ß√µes de altera√ß√£o de comportamento s√£o bloqueadas.  Usando o comando <code>enable_behavior_change</code> script sinaliza que est√° pronto para permitir outros comportamentos.  Por exemplo, no comportamento especial da Piston Honda, o comando <code>enable_behavior_change</code> nunca <code>enable_behavior_change</code> executado; portanto, se o Mac estiver cansado naquele momento, o comportamento especial continuar√°.  No entanto, eventos de knockdown ignoram esse sistema, portanto, se durante o comportamento especial do Piston Honda o personagem principal for derrubado, o comportamento ser√° alterado em qualquer caso. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434550/">https://habr.com/ru/post/pt434550/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434538/index.html">A luta pelo espa√ßo: o que est√° acontecendo no mercado da Internet via sat√©lite</a></li>
<li><a href="../pt434540/index.html">O que fazer com pessoas que ser√£o substitu√≠das por rob√¥s?</a></li>
<li><a href="../pt434542/index.html">Automa√ß√£o do processo de controle de qualidade de dados de armazenamento corporativo</a></li>
<li><a href="../pt434544/index.html">‚ÄúN√≥s n√£o queremos guerra‚Äù - Entrevista com Ben Williams, diretor do Adblock Plus</a></li>
<li><a href="../pt434548/index.html">Patriota do Zimb√°bue gasta US $ 5.000 para digitalizar pa√≠s nativo no Google Street View</a></li>
<li><a href="../pt434552/index.html">GDG SPb. O que conseguimos fazer em um ano</a></li>
<li><a href="../pt434558/index.html">Comunidade de suporte da Sib√©ria: start</a></li>
<li><a href="../pt434560/index.html">O que 2018 ensinou, ou etapas pr√°ticas sobre como come√ßar a implementar tecnologias digitais em 2019</a></li>
<li><a href="../pt434562/index.html">Samsung SSD 860 QVO 1 TB e 4 TB: o primeiro consumidor SATA QLC (1 parte)</a></li>
<li><a href="../pt434564/index.html">Desenhar √© 10% do trabalho do designer de UX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>