<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍓 🧕🏽 👩🏾‍✈️ Git Subrepo 🏂🏿 👲🏽 🖐🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="git-subrepo项目已经存在很长时间了，但是很少引用它。 git-subrepo的作者是IngydötNet 。 



 如果您查看该项目的master分支的提交历史，则该项目似乎在2年前就已停止开发。 但是，该项目的工作正在进行中，我希望0.4.0版能尽快发布。 



 该工具的一个重要...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Git Subrepo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428493/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b>git-subrepo项目已经</b></a>存在很长时间了，但是很少引用它。  <b>git-subrepo</b>的作者是<b>IngydötNet</b> 。 <br></p><br><p> 如果您查看该项目的master分支的提交历史，则该项目似乎在2年前就已停止开发。 但是，该项目的工作正在进行中，我希望<a href="" rel="nofollow"><b>0.4.0</b></a>版能尽快发布。 <br></p><br><p> 该工具的一个重要属性是，在用户决定在子项目的上游存储库中进行提交之前，用户<b>无需</b>安装<b>git-subrepo</b> 。 此外，在使用标准<em><b>git-clone（1）</b></em>命令复制主存储库时，用户会收到准备充分并已配置好的源树。 <br></p><a name="habracut"></a><br><p>在选择支持主容器存储库的子模块/子树/子项目的方法时，开发人员首先确定该机制提供的可能性范围，并给出以下问题的答案： <br></p><br><ul><li> 是否有必要将子项目的完整历史记录保留在主存储库中，或者是否有足够的压缩提交； </li><li> 是否需要将更改从子项目传递到子树的上游存储库的能力； </li><li> 是否需要连接子项目上游存储库的固定标签，或者是否可以连接分支？ </li><li> 是否有必要进一步删除这两个子项目本身，以及是否有必要删除这些子项目历史的一部分； </li><li> 克隆主项目的存储库后，用户是否必须采取任何措施手动配置子项目； </li><li> 分析连接子项目的历史以及子项目所源自的特定修订版本的工作量将是多么艰巨； </li><li> 该工具或该工具将如何影响“源配置管理”策略以及该工具将使工程师的日常工作复杂化的程度。 </li></ul><br><p> 当然，这个问题清单不能反映正确选择所必需的输入参数<b>的完整性</b> ，但是对于现有工具的初步审查来说，这已经足够了，就<b>git-subrepo项目而言</b> ，我们敦促读者从这些角度考虑这个项目。 <br></p><br><h2>  Git-subrepo安装 </h2><br><p>  <b>git-subrepo软件包</b> （在开发人员方面）既可以本地安装，也可以安装在其主目录中，也可以安装在系统级别。 <br></p><br><p> 在第一种情况下，将<b>git-subrepo信息库克隆</b>到所需目录就足够了，例如<b>〜/ bin</b> ： <br></p><br><pre><code class="bash hljs">bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/bin bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ingydotnet/git-subrepo.git</code> </pre> <br><p> 并设置环境变量 <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim subrepo-env.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh export GIT_SUBREPO_ROOT="/home/username/bin/git-subrepo" export PATH="/home/username/bin/git-subrepo/lib:$PATH" export MANPATH="/home/username/bin/git-subrepo/man:$MANPATH" :wq bash-4.4$ source ./subrepo-env.sh</span></span></code> </pre><br><p> 如果您查看<b>git-subrepo Makefile中</b>定义的变量： <br></p><br><pre> <code class="plaintext hljs"># Install variables: PREFIX ?= /usr/local INSTALL_LIB ?= $(DESTDIR)$(shell git --exec-path) INSTALL_EXT ?= $(INSTALL_LIB)/$(NAME).d INSTALL_MAN1 ?= $(DESTDIR)$(PREFIX)/share/man/man1</code> </pre><br><p> 很容易发现，在系统级别， <b>git-subrepo</b>安装在<b>Git</b>所在的目录中： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git --<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span>-path /usr/libexec/git-core bash-4.4$</code> </pre><br><p> 因此，用于安装<b>git-subrepo</b>的命令可能如下所示： <br></p><br><pre> <code class="bash hljs">bash-4.4$ make PREFIX=/usr install</code> </pre><br><p>  <b>DESTDIR</b>变量的存在使您无需<b>付出</b>额外的努力（当然，如果我们不在跨环境中）就可以为任何Linux <b>发行版</b>制作软件包，这对于DevOps工程师而言非常有用。 <br></p><br><p> 以root身份安装<b>git-subrepo</b> ： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> git-subrepo/ bash-4.4$ make PREFIX=/usr install install -C -d -m 0755 /usr/libexec/git-core/ install -C -m 0755 lib/git-subrepo /usr/libexec/git-core/ install -C -d -m 0755 /usr/libexec/git-core/git-subrepo.d/ install -C -m 0755 lib/git-subrepo.d/<span class="hljs-built_in"><span class="hljs-built_in">help</span></span>-functions.bash lib/git-subrepo.d/bash+.bash /usr/libexec/git-core/git-subrepo.d/ install -C -d -m 0755 /usr/share/man/man1/ install -C -m 0644 man/man1/git-subrepo.1 /usr/share/man/man1/ bash-4.4$</code> </pre><br><p> 要分析<b>git-subrepo</b>的功能<b>，</b>我们需要一个简单的测试环境，在其中可以重现标准操作方案。 <br></p><br><h3> 测试环境 </h3><br><p> 我们创建三个目录<b>owner</b> ， <b>remote</b> ， <b>user</b> ，在其中放置开发人员和用户的上游和本地存储库的模型。 <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim _init.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh CWD=`pwd` mkdir remote owner user cd remote git init --bare build-system.git git init --bare platform.git cd ../owner git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd build-system echo -e "\n[master] build-system 1.0.0\n" &gt;README git add README git commit -m "init build-system master 1.0.0" git push cd ../platform echo -e "\n[master] platform 1.0.0\n" &gt;README git add README git commit -m "init platform master 1.0.0" git push cd ../../user git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd $CWD :wq bash-4.4$ bash-4.4$ ./_init.sh bash-4.4$</span></span></code> </pre><br><br><p> 在这里 <br></p><br><div class="scrollable-table"><table><tbody><tr><td>  <b><nobr>拥有者</nobr></b> </td><td>  -- </td><td> 项目作者的工作目录； </td></tr><tr><td>  <b><nobr>遥远的</nobr></b> </td><td>  -- </td><td> 代表项目作者服务器的目录，主项目<b>platform.git</b>和子项目<b>build-system.git</b>的上游存储库<b>位于该目录中</b> ； </td></tr><tr><td>  <b><nobr>使用者</nobr></b> </td><td>  -- </td><td> 用户或开发团队成员的工作目录。 </td></tr></tbody></table></div><br><p> 项目的作者和用户在其计算机上拥有自己的上游存储库副本，在我们的示例中分别在<b>所有者</b>目录和<b>用户</b>目录中提供了副本。 <br></p><br><p> 作者的任务是通过在主树中包含<b>builld-system</b>子项目，在<b>平台</b>的主树中包括以下功能： <br></p><br><ul><li> 用结构中包含的<b>构建系统</b>子项目克隆主存储库，不必担心设置版本或修订版。 也就是说， <b>平台</b>存储库的每个分支都应对应于<b>构建系统</b>存储库的特定分支的特定版本，并且用户应在一个<em><b>git-clone（1）</b></em>操作中接收自定义的源树，而无需执行任何其他操作。 </li><li> 将它们的更改交付到上游项目存储库，无论是在主项目库还是在辅助项目库中。 </li><li> 当然，如果其他项目参与者或用户拥有适当的权利，则他们会收到更改。 </li></ul><br><p> 考虑作者为实现这些要求必须执行的动作。 <br></p><br><h3> 子项目连接 </h3><br><p> 要连接新的子树，请使用<b>git subrepo clone</b>命令，该命令的用途类似于<em><b>git-clone（1）</b></em>命令。 该命令的必需参数是远程存储库的<b>URL</b> 。 您还可以指定子项目和远程存储库分支所在的目录。 我们将使用master分支，因此，在我们的示例中，我们省略了不必要的命令参数。 <br></p><br><p> 因此，项目的作者可以在其工作计算机上使用<b>git subrepo clone ../../remote/build-system.git/ build-system命令</b>连接<b>构建系统</b>子项目： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git/ build-system Subrepo <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master) cloned into <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>. bash-4.4$</code> </pre><br><p> 考虑一下本地<b>平台</b>存储库中发生了什么更改： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ bash-4.4$ git subrepo status 1 subrepo: Git subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>: Remote URL: ../../remote/build-system.git Upstream Ref: b2f5079 Tracking Branch: master Pulled Commit: b2f5079 Pull Parent: b5e76a7 bash-4.4$</code> </pre><br><p>  <b>构建系统</b>子项目的历史记录未传递到主树中；我们只有一个压缩的提交，并附带背景信息。 此信息受文件<b>./build-system/.gitrepo/config</b>中的版本控制： <br></p><br><pre> <code class="plaintext hljs">[subrepo] remote = ../../remote/build-system.git branch = master commit = b2f507918f2821cb7dd90c33223ed5cc3c9922a2 parent = b5e76a713f895565b06ee3ccfa29f19131ba06dd method = merge cmdver = 0.4.1</code> </pre><br><p> 可以使用<b>git subrepo config命令</b>获取有关子项目的信息，例如，使用以下<b>命令</b>找出刚刚到达主存储库的上游项目<b>remote / build-system.git</b>的修订版： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><blockquote>  <em>应该提到的是，原始的<b>git-subrepo</b>软件包不会将有关子项目的信息保存在<b>.gitrepo / config</b>文件中，而是保存在<b>.gitrepo</b>文件中。</em> <br></blockquote><br><p> 因此，我们获得了上游存储库<b>remote / build-system.git</b>的master分支的最新版本，并将其放在主<b>平台</b>项目的<b>build-system</b>子目录中。 <br></p><br><p> 要将这些更改传递到上游资源库<b>remote / platform.git</b> ，作者需要运行<b>git push</b>命令： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git push Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 849 bytes | 849.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; master -&gt; master bash-4.4$</code> </pre><br><p> 可以从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ReadMe.pod</a>文件或在命令行中获取有关<b>git subrepo命令的</b>更多信息。 <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>&gt;</code> </pre><br><p> 例如： <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span></code> </pre><br><p> 现在考虑用户方面正在发生的事情。 <br></p><br><br><h3> 用户获取代码 </h3><br><p> 目前，当用户尚未收到上游存储库<b>platform.git</b>的更新时，其副本包含一个<b>README文件。</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> user/platform/ bash-4.4$ ls README bash-4.4$</code> </pre><br><p> 包含一行： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ cat README [master] platform 1.0.0 bash-4.4$</code> </pre><br><p> 中断上游存储库更改后 <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 6 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (6/6), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/platform b5e76a7..6b831e4 master -&gt; origin/master Updating &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; Fast-forward build-system/.gitrepo/config | 12 ++++++++++++ build-system/README | 3 +++ 2 files changed, 15 insertions(+) create mode 100644 build-system/.gitrepo/config create mode 100644 build-system/README bash-4.4$</code> </pre><br><p> 用户将可以使用该<b>版本的构建系统</b>子项目的代码，该<b>版本</b>正是该项目的作者确定的。 用户可以随时使用<b>config</b>命令更新当前修订： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system/ commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><p> 值得注意的是，用户不需要进行其他设置，而他可以依靠项目的作者为他提供了当前<b>平台</b>正常工作所必需的<b>构建系统</b>修订版这一事实。 <br></p><br><p> 这正是该项目的作者所追求的。 <br></p><br><h3> 将更改交付到上游项目 </h3><br><p> 现在假设我们的用户是项目的成员，并且不仅可以将更改传递到上游存储库<b>remote / platform.git</b> ，而且还可以传递到<b>remote / build-system.git子项目</b>的上游存储库。 <br></p><br><p> 然后，如果用户进行更改： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build-system/ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.1 bash-4.4$ bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update BS version to 1.0.1"</span></span> [master d30b001] update BS version to 1.0.1 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d30b001286b08708f5c30c1f5346a90e4339f969 (HEAD -&gt; master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 . . . bash-4.4$</code> </pre><br><p> 他将能够将它们放置在上游存储库中，如下所示： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo push build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pushed to <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$</code> </pre><br><div class="spoiler">  <b class="spoiler_title">在这里重要的是要注意...</b> <div class="spoiler_text"><p> 由于子项目<b>.gitrepo / config</b>的配置文件存储在版本控制下，因此用户需要将子项目的状态更改发送到主项目<b>remote / platform.git</b>的上游存储库。 <br></p><br><p> 也就是说，用户不应忘记检查本地存储库的状态并及时执行<em><b>git-push（1）</b></em>命令。 <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 2 commits. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ git push Enumerating objects: 14, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (14/14), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (9/9), 992 bytes | 992.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 9 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git d00be9f..deccb66 master -&gt; master bash-4.4$</code> </pre><br><p> 否则，下次您对上游存储库进行更改时，它将收到合并冲突。 <br></p><br><p> 当然，这里没有什么异常，但是，执行<b>git subrepo push ...</b>命令后，很容易忘记主存储库的本地副本的状态。 <br></p><br></div></div><br><br><h3> 直接使用上游存储库 </h3><br><p> 现在考虑上游存储库<b>remote / build-system.git中发生的情况</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 3 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (3/3), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/build-system b2f5079..d229920 master -&gt; origin/master Updating b2f5079..d229920 Fast-forward README | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d229920c7de34405bc7b8d47f36d420987687908 (HEAD -&gt; master, origin/master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 commit b2f507918f2821cb7dd90c33223ed5cc3c9922a2 Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:05:30 2018 +0300 init build-system master 1.0.0 bash-4.4$</code> </pre><br><p> 也就是说，项目的作者收到了项目参与者所做的更改。 <br></p><br><p> 当然，作者可以直接对<b>构建系统</b>项目的上游存储库进行更改： <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.2 bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update build-system version to 1.0.2"</span></span> [master 8255f59] update build-system version to 1.0.2 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ git push Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (3/3), 281 bytes | 281.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 3 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/build-system.git d229920..8255f59 master -&gt; master bash-4.4$</code> </pre><br><p> 所有参与者以及主项目的用户都可以使用<b>git subrepo pull命令</b>接收这些更改。 <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ bash-4.4$ git subrepo pull build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pulled from <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ git push Enumerating objects: 11, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (11/11), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 670 bytes | 670.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git 6b831e4..b6f4a7b master -&gt; master bash-4.4$</code> </pre><br><h2> 结论 </h2><br><p> 如果开发人员不需要在主存储库中存储子项目的历史记录，并且在交付代码时，他使用分支而不是固定标签进行操作，那么<b>git-subrepo</b>非常适合组织日常工作。 <br></p><br><p> 有条件地， <b>git-subrepo</b>的缺点之一是<b>git subrepo克隆</b>操作仅在子项目分支上才是可能的。 换句话说，用户不能参考其固定标签或特定修订版来连接子项目，即，诸如 <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system -t 1.0.1 bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system 7f5d1113eb0bc6</code> </pre><br><p> 无效。 <br></p><br><h3> 文学作品： </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Git-子树合并</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">掌握git子树</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">掌握git子模块</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Git Subrepo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">大型项目的分支和git模块管理模型</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428493/">https://habr.com/ru/post/zh-CN428493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428481/index.html">数字合同：非律师快速指南</a></li>
<li><a href="../zh-CN428485/index.html">大多数令人讨厌的人是无关紧要的广告和公共场所使用小工具的人</a></li>
<li><a href="../zh-CN428487/index.html">为什么Ruby on Rails很好，以及它如何加快开发速度</a></li>
<li><a href="../zh-CN428489/index.html">图标的稀薄程度。 Sketch Pro，渲染功能和具有线条粗细的游戏</a></li>
<li><a href="../zh-CN428491/index.html">主动Oracle数据库性能优化</a></li>
<li><a href="../zh-CN428495/index.html">我做了13年的足球模拟器</a></li>
<li><a href="../zh-CN428497/index.html">Noolite SUF-1-300定制无线调光器</a></li>
<li><a href="../zh-CN428499/index.html">令人毛骨悚然的蓝色巨人可以揭示恒星进化的秘密</a></li>
<li><a href="../zh-CN428501/index.html">DartUP：12月1日在圣彼得堡举行的有关Dart和Flutter的第一次俄语会议</a></li>
<li><a href="../zh-CN428503/index.html">机器学习算法参考向量法（SVM）概述</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>