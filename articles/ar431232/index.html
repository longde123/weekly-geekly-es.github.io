<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ข โ๏ธ ูููู ุจุฅูุดุงุก ุนูุงุตุฑ ูุงุฆุจุฉ SVG ุฌูููุฉ ุนูู Node.js โคต๏ธ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุนุฏ ุงุณุชุฎุฏุงู ุตูุฑ SVG ูุนูุงุตุฑ ูุงุฆุจุฉ ููุฑุฉ ุฌูุฏุฉ ุฌุฏูุง ุ ุฎุงุตุฉ ูู ุนุงูููุง ุ ุนูุฏูุง ุชุชููู ุฌููุน ุงูููุงูุน ุชูุฑูุจูุง ูู ูุฌููุนุฉ ูู ุงูุตูุฑ ุงูุชู ูุญุงูู ุชุญููููุง ุจุดูู ุบูุฑ ูุชุฒ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูููู ุจุฅูุดุงุก ุนูุงุตุฑ ูุงุฆุจุฉ SVG ุฌูููุฉ ุนูู Node.js</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431232/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ko/6n/vo/ko6nvoj9m3q1bdzvbeogrcbt09i.jpeg"></p><br><p style=";text-align:right;direction:rtl"> ูุนุฏ ุงุณุชุฎุฏุงู ุตูุฑ SVG ูุนูุงุตุฑ ูุงุฆุจุฉ ููุฑุฉ ุฌูุฏุฉ ุฌุฏูุง ุ ุฎุงุตุฉ ูู ุนุงูููุง ุ ุนูุฏูุง ุชุชููู ุฌููุน ุงูููุงูุน ุชูุฑูุจูุง ูู ูุฌููุนุฉ ูู ุงูุตูุฑ ุงูุชู ูุญุงูู ุชุญููููุง ุจุดูู ุบูุฑ ูุชุฒุงูู.  ูููุง ุฒุงุฏุช ุงูุตูุฑ ููููุง ุฒุงุฏ ุญุฌููุง ุ ุฒุงุฏุช ุงุญุชูุงููุฉ ุงูุญุตูู ุนูู ูุดุงูู ูุฎุชููุฉ ุ ุจุฏุกูุง ูู ุญูููุฉ ุฃู ุงููุณุชุฎุฏู ูุง ูููู ุชูุงููุง ูุง ูุชู ุชุญูููู ููุงู ุ ูููุชูู ุจุงูููุฒุฉ ุงูุดููุฑุฉ ูููุงุฌูุฉ ุจุฃููููุง ุจุนุฏ ุชุญููู ุงูุตูุฑ.  ุฎุงุตุฉ ุนูู ุงูุฅูุชุฑูุช ุงูุณูุฆ ูู ูุงุชูู - ูููู ุฃู ูุทูุฑ ุนูู ุดุงุดุงุช ูุชุนุฏุฏุฉ.  ูู ูุซู ูุฐู ุงููุญุธุงุช ุชุฃุชู ุงูุฅููุงุฐ.  ุฎูุงุฑ ุขุฎุฑ ูุงุณุชุฎุฏุงููุง ูู ุงูุฑูุงุจุฉ.  ููุงู ุฃููุงุช ุชุญุชุงุฌ ูููุง ุฅูู ุฅุฎูุงุก ุตูุฑุฉ ุนู ุงููุณุชุฎุฏู ุ ูููู ุฃุฑุบุจ ูู ุงูุญูุงุธ ุนูู ุงูููุท ุงูุนุงู ููุตูุญุฉ ูุงูุฃููุงู ูุงูููุงู ุงูุฐู ุชุดุบูู ุงูุตูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูู ูุนุธู ุงูููุงูุงุช ุ ูุชุญุฏุซ ุงูุฌููุน ุนู ุงููุธุฑูุฉ ุ ุฃูู ุณูููู ูู ุงููุทูู ุฅุฏุฑุงุฌ ุฌููุน ูุฐู ุงูุตูุฑ ุงูุนููุฏุฉ ูู ุงูุตูุญุงุช ูู ุงูุณุทุฑ ุ ูุงูููู ุณูุฑู ุนููููุง ููู ููููู ุชูููุฏูุง ุญุณุจ ุฐููู ููููู ุจุงุณุชุฎุฏุงู Node.js.  ุณููุดุฆ ููุงูุจ ุงูููุงูุฏ ูู ุตูุฑ SVG ููููุฃูุง ุจุทุฑู ูุฎุชููุฉ ุ ูู ุงูุชุนุจุฆุฉ ุงูุจุณูุทุฉ ุจุงูุฃููุงู ุฃู ุงูุชุฏุฑุฌ ุฅูู ุงูุชุซููุซ ุ ูุณููุณุงุก Voronoi ูุงุณุชุฎุฏุงู ุงูููุงุชุฑ.  ุณูุชู ูุฑุฒ ุฌููุน ุงูุฅุฌุฑุงุกุงุช ูู ุฎุทูุงุช.  ุฃุนุชูุฏ ุฃู ูุฐู ุงูููุงูุฉ ุณุชููู ูุซูุฑุฉ ููุงูุชูุงู ูููุจุชุฏุฆูู ุงูููุชููู ุจููููุฉ ุงูููุงู ุจุฐูู ููุญุชุงุฌูู ุฅูู ุชุญููู ููุตู ููุฅุฌุฑุงุกุงุช ุ ูููู ุงููุทูุฑูู ุฐูู ุงูุฎุจุฑุฉ ูุฏ ูุญุจูู ุฃูุถูุง ุจุนุถ ุงูุฃููุงุฑ. </p><a name="habracut"></a><br><h2 id="podgotovka" style=";text-align:right;direction:rtl">  ุงูุชุญุถูุฑ </h2><br><p style=";text-align:right;direction:rtl"> ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณูู ูุฐูุจ ุฅูู ูุณุชูุฏุน ูุง ููุงูุฉ ูู ูุฌููุน ุฃููุงุน ุงูุฃุดูุงุก ุชุณูู NPM.  ูุธุฑูุง ูุฃู ูููุฉ ุฅูุดุงุก ุตูุฑ ูุนุจ ุงูุฑูุชูู ุชุชุถูู ุฌูููุง ููุฑุฉ ูุงุญุฏุฉ ูููุง ุนูู ุฌุงูุจ ุงูุฎุงุฏู (ุฃู ุญุชู ุนูู ุฌูุงุฒ ุงููุทูุฑ ุ ุฅุฐุง ููุง ูุชุญุฏุซ ุนู ูููุน ุซุงุจุช ุชูุฑูุจูุง) ุ ููู ูุชุนุงูู ูุน ุงูุชุญุณูู ุงููุจูุฑ.  ุณูุฑุจุท ูู ูุง ูุญุจ.  ูุฐุง ุ ูุจุฏุฃ <code>npm init</code> ุงุฎุชูุงุฑ ุงูุชุจุนูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ูุฐุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ColorThief</a> .  ุฑุจูุง ุณูุนุช ุนูู ุจุงููุนู.  ููุชุจุฉ ุฑุงุฆุนุฉ ูููููุง ุนุฒู ููุญุฉ ุฃููุงู ุงูุฃููุงู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง ูู ุงูุตูุฑุฉ.  ูุญู ููุท ุจุญุงุฌุฉ ุฅูู ุดูุก ูู ูุฐุง ุงููุจูู ูุจุฏุงูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save color-thief</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชุซุจูุช ูุฐู ุงูุญุฒูุฉ ูู Linux ุ ูุงูุช ููุงู ูุดููุฉ - ุจุนุถ ุญุฒูุฉ ุงููุงูุฑุฉ ุงูููููุฏุฉ ุ ูุงูุชู ููุณุช ูู ุฏููู NPM.  ุชู ุญู ูุฐุง ุงูุฎุทุฃ ุงูุบุฑูุจ ุนู ุทุฑูู ุชุซุจูุช ุฅุตุฏุงุฑุงุช ุงูุชุทููุฑ ูุจุนุถ ุงูููุชุจุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sudo apt install libcairo2-dev libjpeg-dev libgif-dev</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชุชู ูุฑุงูุจุฉ ููููุฉ ุนูู ูุฐู ุงูุฃุฏุงุฉ ูู ูุฐู ุงูุนูููุฉ.  ูููู ูู ูููู ูู ุบูุฑ ุงูุถุฑูุฑู ุชูุตูู ุญุฒูุฉ rgb-hex ุนูู ุงูููุฑ ูุชุญููู ุชูุณูู ุงูุฃููุงู ูู RGB ุฅูู Hex ุ ููู ุฃูุฑ ูุงุถุญ ูู ุงุณูู.  ูู ูุดุงุฑู ูู ุฑููุจ ุงูุฏุฑุงุฌุงุช ุจูุฐู ุงููุธุงุฆู ุงูุจุณูุทุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save rgb-hex</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ูู ูุฌูุฉ ูุธุฑ ุงูุชุฏุฑูุจ ุ ูู ุงููููุฏ ุฃู ุชูุชุจ ูุซู ูุฐู ุงูุฃุดูุงุก ุจููุณู ุ ูููู ุนูุฏูุง ุชููู ุงููููุฉ ูู ุชุฌููุน ูููุฐุฌ ุฃููู ูุนูู ุจุดูู ุถุฆูู ุ ูุฅู ุฑุจุท ูู ุดูุก ูู ูุชุงููุฌ NPM ููุฑุฉ ุฌูุฏุฉ.  ูููุฑ ุงููุซูุฑ ูู ุงูููุช. </blockquote><p style=";text-align:right;direction:rtl">  ูุงุญุฏุฉ ูู ุฃูู ุงููุนููุงุช ูููุณุจ ูู ุงููุณุจ.  ูุฌุจ ุฃู ุชุชุทุงุจู ูุน ูุณุจ ุงูุตูุฑุฉ ุงูุฃุตููุฉ.  ูุจูุงุกู ุนูู ุฐูู ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุญุฌูู.  ุณูุณุชุฎุฏู ุญุฒูุฉ ุญุฌู ุงูุตูุฑุฉ ูุญู ูุฐู ุงููุดููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save image-size</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃููุง ุณูุญุงูู ุฅูุดุงุก ุฅุตุฏุงุฑุงุช ูุฎุชููุฉ ูู ุงูุตูุฑ ูุณุชููู ุฌููุนูุง ุจุชูุณูู SVG ุ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ุณูุธูุฑ ุณุคุงู ุนู ุงูููุงุฐุฌ ุงูุฎุงุตุฉ ุจูู.  ููููู ุจุงูุทุจุน ุงููุฑุงูุบุฉ ูุน ุณูุงุณู ุงูุฃููุงุท ูู JS ุ ูููู ููุงุฐุง ูู ูุฐุงุ  ูู ุงูุฃูุถู ุฃู ุชุฃุฎุฐ ูุญุฑู ูููุฐุฌ "ุนุงุฏู".  ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฏ</a> .  ุจุณูุทุฉ ููุฐูุฐุฉ ุ ูุฃู ูููุชูุง ุณุชููู ุตุญูุญุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save handlebars</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูููู ุนูู ุงูููุฑ ุจุชุฑุชูุจ ููุน ูู ุงูุนูุงุฑุฉ ุงููุนูุฏุฉ ููุฐู ุงูุชุฌุฑุจุฉ.  ูููู ุจุฅูุดุงุก ููู main.js ูุงุณุชูุฑุงุฏ ุฌููุน ุชุจุนูุงุชูุง ููุงู ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุญุฏุฉ ููุนูู ูุน ูุธุงู ุงููููุงุช. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ColorThief = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'color-thief'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Handlebars = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'handlebars'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rgbHex = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'rgb-hex'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sizeOf = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'image-size'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุทูุจ ColorThief ุชููุฆุฉ ุฅุถุงููุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> thief = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ColorThief();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุณ ูู ุงูุตุนุจ ุงุณุชุฎุฏุงู ุงูุชุจุนูุงุช ุงูุชู ูููุง ุจุชูุตูููุง ุ ูุญู ูุดุงูู "ุชุญููู ุตูุฑุฉ ุฅูู ุจุฑูุงูุฌ ูุตู" ู "ุงูุญุตูู ุนูู ุญุฌููุง".  ูููุชุฑุถ ุฃู ูุฏููุง ุตูุฑุฉ 1.jpg: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> image = fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'1.jpg'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> size = sizeOf(<span class="hljs-string"><span class="hljs-string">'1.jpg'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> height = size.height; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> width = size.width;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ููุฃุดุฎุงุต ุบูุฑ ุงููุนุชุงุฏูู ุนูู Node.js ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูู ุดูุก ูุชุนูู ุจูุธุงู ุงููููุงุช ูููู ุฃู ูุญุฏุซ ุจุดูู ูุชุฒุงูู ุฃู ุบูุฑ ูุชุฒุงูู.  ุจุงููุณุจุฉ ููุทุฑู ุงููุชุฒุงููุฉ ุ ุชุชู ุฅุถุงูุฉ "Sync" ูู ููุงูุฉ ุงูุงุณู.  ุณูุณุชุฎุฏููุง ุญุชู ูุง ููุงุฌู ุชุนููุฏุงุช ูุง ุฏุงุนู ููุง ููุง ูุฎุฑุฌ ุนููููุง ูู ูุฑุงุบ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุชูู ุฅูู ุงููุซุงู ุงูุฃูู. </p><br><h2 id="zalivka-cvetom" style=";text-align:right;direction:rtl">  ุชุนุจุฆุฉ ุงูููู </h2><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xa/1p/7g/xa1p7gmnqwkm9rcdntn9qbtnrjm.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณูู ูุญู ูุดููุฉ ููุก ูุณุชุทูู ุจุณูุท.  ุณุชุญุชูู ุตูุฑุชูุง ุนูู ุซูุงุซ ูุนููุงุช - ุงูุนุฑุถ ูุงูุงุฑุชูุงุน ูููู ุงูุชุนุจุฆุฉ.  ูููู ุจุนูู ุตูุฑุฉ SVG ูุน ูุณุชุทูู ุ ูููู ุจุฏูุงู ูู ูุฐู ุงูููู ูุณุชุจุฏู ุฃุฒูุงุฌ ุงูุฃููุงุณ ูุฃุณูุงุก ุงูุญููู ุงูุชู ุณุชุญุชูู ุนูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ูู ุงูุจุฑูุงูุฌ ุงููุตู.  ุฑุจูุง ุชููู ูุฏ ุดุงูุฏุช ุจุงููุนู ุจูุงุก ุงูุฌููุฉ ูุฐุง ูุน HTML ุงูุชูููุฏู (ุนูู ุณุจูู ุงููุซุงู ุ ูุณุชุฎุฏู Vue ุดูุฆูุง ูุดุงุจููุง) ุ ูููู ูุง ุฃุญุฏ ูุฒุนุฌ ุงุณุชุฎุฏุงูู ูุน ุตูุฑุฉ SVG - ูุง ููุชู ูุญุฑู ุงููุงูุจ ุจูุง ุณูููู ุนููู ุนูู ุงููุฏู ุงูุทููู.  ุงููุต ูู ูุงููุต ูู ุฅูุฑูููุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'1.1'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'http://www.w3.org/2000/svg'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0 0 100 100'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">preserveAspectRatio</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'none'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ height }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ width }}'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'100'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'100'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ color }}'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุทููุง ูุฐุง ุงูููู ุฃุญุฏ ุฃูุซุฑ ุงูุฃููุงู ุดููุนูุง ุ ูู ุงููุซุงู ูู ุงูููู ุงูุฑูุงุฏู.  ูู ุฃุฌู ุงุณุชุฎุฏุงู ุงููุงูุจ ุ ููุฑุฃ ุงูููู ูุนู ุ ุนูู ุณุจูู ุงููุซุงู ุงูููุงูุฏ ุจุญูุซ ุชููู ูุฐู ุงูููุชุจุฉ ุจุชุฌููุนู ุซู ููุดุฆ ุฎุทูุง ูุน ูุนุจ SVG ุงูููุงุฆู.  ูุณุชุจุฏู ูุญุฑู ุงููุงูุจ ููุณู ุจูุงูุงุชูุง (ุงูููู ูุงูุญุฌู) ูู ุงูุฃูุงูู ุงูููุงุณุจุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateOneColor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rgb = thief.getColor(image); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> color = <span class="hljs-string"><span class="hljs-string">'#'</span></span> + rgbHex(...rgb); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = Handlebars.compile(fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'template-one-color.svg'</span></span>, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> svg = template({ height, width, color }); fs.writeFileSync(<span class="hljs-string"><span class="hljs-string">'1-one-color.svg'</span></span>, svg, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจูู ููุท ููุชุงุจุฉ ุงููุชูุฌุฉ ุฅูู ููู.  ููุง ุชุฑู ุ ูุฅู ุงูุนูู ูุน SVG ุฃูุฑ ุฑุงุฆุน - ูู ุงููููุงุช ูุตูุฉ ุ ููููู ูุฑุงุกุชูุง ููุชุงุจุชูุง ุจุณูููุฉ.  ูุงููุชูุฌุฉ ูู ุตูุฑุฉ ูุณุชุทูู.  ูุง ููุฌุฏ ุดูุก ูุซูุฑ ููุงูุชูุงู ุ ูููู ุนูู ุงูุฃูู ุชุฃูุฏูุง ูู ุฃู ุงูููุฌ ูุงู ูุนูู (ุณูููู ููุงู ุฑุงุจุท ุฅูู ุงููุตุงุฏุฑ ุงููุงููุฉ ูู ููุงูุฉ ุงูููุงูุฉ). </p><br><h2 id="zalivka-gradientom" style=";text-align:right;direction:rtl">  ุชุนุจุฆุฉ ูุชุฏุฑุฌุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุงูุชุฏุฑุฌุงุช ูู ููุฌ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู.  ููุง ูููููุง ุงุณุชุฎุฏุงู ุฒูุฌูู ูู ุงูุฃููุงู ุงูุดุงุฆุนุฉ ูู ุงูุตูุฑุฉ ูุฅุฌุฑุงุก ุงูุชูุงู ุณูุณ ูู ูุงุญุฏ ุฅูู ุขุฎุฑ.  ูููู ุงูุนุซูุฑ ุนูู ูุฐุง ูู ุจุนุถ ุงูุฃุญูุงู ุนูู ุงูููุงูุน ุงูุชู ุชููู ุจุชุญููู ุฃุดุฑุทุฉ ุทูููุฉ ูู ุงูุตูุฑ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/_e/hk/dp/_ehkdpgdhchgknqkcvbadu8dwpq.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุชู ุชูุณูุน ูุงูุจ SVG ุงูุฎุงุต ุจูุง ุงูุขู ูุน ูุฐุง ุงูุชุฏุฑุฌ.  ุนูู ุณุจูู ุงููุซุงู ุ ุณูุณุชุฎุฏู ุงูุชุฏุฑุฌ ุงูุฎุทู ุงููุนุชุงุฏ.  ูุญู ููุชููู ุจูุนููุชูู ููุท - ุงูููู ูู ุงูุจุฏุงูุฉ ูุงูููู ูู ุงูููุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linearGradient</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'my-gradient'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x1</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0%'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y1</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0%'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x2</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'100%'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y2</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0%'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gradientTransform</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'rotate(45)'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stop</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">offset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0%'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'stop-color:{{ startColor }};stop-opacity:1'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stop</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">offset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'100%'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'stop-color:{{ endColor }};stop-opacity:1'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linearGradient</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'100'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'100'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'url(#my-gradient)'</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุงูุญุตูู ุนูู ุงูุฃููุงู ููุณูุง ุจุงุณุชุฎุฏุงู ColorThief ููุณู.  ูุญุชูู ุนูู ูุถุนูู ููุชุดุบูู - ุฅูุง ุฃูู ูููุญูุง ููููุง ุฃุณุงุณููุง ูุงุญุฏูุง ุ ุฃู ููุญุฉ ุชุญุชูู ุนูู ุนุฏุฏ ุงูุฃููุงู ุงูุชู ูุญุฏุฏูุง.  ูุฑูุญ ุจูุง ููู ุงูููุงูุฉ.  ุจุงููุณุจุฉ ุฅูู ุงูุชุฏุฑุฌ ุ ูุญุชุงุฌ ุฅูู ููููู. </p><br><p style=";text-align:right;direction:rtl">  ุฎูุงู ุฐูู ุ ูุฐุง ุงููุซุงู ูุดุงุจู ูููุซุงู ุงูุณุงุจู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateGradient</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> palette = thief.getPalette(image, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> startColor = <span class="hljs-string"><span class="hljs-string">'#'</span></span> + rgbHex(...palette[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> endColor = <span class="hljs-string"><span class="hljs-string">'#'</span></span> + rgbHex(...palette[<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = Handlebars.compile(fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'template-gradient.svg'</span></span>, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> svg = template({ height, width, startColor, endColor }); <span class="hljs-comment"><span class="hljs-comment">// . . .</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูุฐู ุงูุทุฑููุฉ ุ ููููู ุฅูุดุงุก ุฌููุน ุฃููุงุน ุงูุชุฏุฑุฌุงุช - ูููุณ ุจุงูุถุฑูุฑุฉ ุฃู ุชููู ุฎุทูุฉ.  ูููู ูุง ุชุฒุงู ูุฐู ูุชูุฌุฉ ูููุฉ ุฅูู ุญุฏ ูุง.  ุณูููู ูู ุงูุฑุงุฆุน ุฅูุดุงุก ููุน ูู ุงููุณููุณุงุก ูุดุจู ุนู ุจุนุฏ ุงูุตูุฑุฉ ุงูุฃุตููุฉ. </p><br><h2 id="mozaika-iz-pryamougolnikov" style=";text-align:right;direction:rtl">  ูุณููุณุงุก ูุณุชุทูู </h2><br><p style=";text-align:right;direction:rtl">  ููุจุฏุก ุ ุฏุนูุง ููุท ูุตูุน ุงููุซูุฑ ูู ุงููุณุชุทููุงุช ููููุฃูุง ุจุฃููุงู ูู ุงูููุญุฉ ุงูุชู ุณุชูุฏููุง ููุง ููุณ ุงูููุชุจุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/l6/w2/hd/l6w2hd1l4bgc-pand_tz2gixe3s.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ุชุคุฏู ุงูููุงูุฏ ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก ุงููุฎุชููุฉ ุ ุนูู ูุฌู ุงูุฎุตูุต ููุง ุฏูุฑุงุช.  ุณููุฑุฑู ุจูุฌููุนุฉ ูู ุงูุฅุญุฏุงุซูุงุช ูุงูุฃููุงู ุ ูุจุนุฏ ุฐูู ุณูู ููุชุดููุง.  ูุญู ููุท ููู ุงููุณุชุทูู ุงูุฎุงุต ุจูุง ูู ุงููุงูุจ ูู ูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">{{# each rects }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ x }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ y }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'11'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'11'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ color }}'</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{/each }}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููุง ูุฐูู ุ ูู ุงูุจุฑูุงูุฌ ุงููุตู ููุณู ุ ูุฏููุง ุงูุขู ููุญุฉ ุฃููุงู ูุงููุฉ ุ ุญููุฉ ูู ุฎูุงู ุฅุญุฏุงุซูุงุช X / Y ูุฅูุดุงุก ูุณุชุทูู ุจููู ุนุดูุงุฆู ูู ุงูููุญุฉ.  ูู ุดูุก ุจุณูุท ููุบุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateMosaic</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> palette = thief.getPalette(image, <span class="hljs-number"><span class="hljs-number">16</span></span>); palette.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">color, index</span></span></span><span class="hljs-function">) </span></span>{ palette[index] = <span class="hljs-string"><span class="hljs-string">'#'</span></span> + rgbHex(...color); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rects = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; x += <span class="hljs-number"><span class="hljs-number">10</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; y += <span class="hljs-number"><span class="hljs-number">10</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> color = palette[<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">15</span></span>)]; rects.push({ x, y, color }); } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = Handlebars.compile(fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'template-mosaic.svg'</span></span>, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> svg = template({ height, width, rects }); <span class="hljs-comment"><span class="hljs-comment">// . . .</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ุฃู ุงููุณููุณุงุก ุ ุนูู ุงูุฑุบู ูู ุชุดุงุจููุง ูู ุงูููู ูุน ุงูุตูุฑุฉ ุ ูููู ูุน ุชุฑุชูุจ ุงูุฃููุงู ุ ูู ุดูุก ููุณ ุนูู ุงูุฅุทูุงู ููุง ููุฏ.  ูุฏุฑุงุช ColorThief ูู ูุฐุง ุงููุฌุงู ูุญุฏูุฏุฉ.  ุฃูุฏ ุงูุญุตูู ุนูู ูุณููุณุงุก ูุชู ูููุง ุชุฎููู ุงูุตูุฑุฉ ุงูุฃุตููุฉ ุ ูููุณ ูุฌุฑุฏ ูุฌููุนุฉ ูู ุงูุทูุจ ูู ููุณ ุงูุฃููุงู ุชูุฑูุจูุง. </p><br><h2 id="uluchshaem-mozaiku" style=";text-align:right;direction:rtl">  ุชุญุณูู ุงููุณููุณุงุก </h2><br><p style=";text-align:right;direction:rtl">  ููุง ูุฌุจ ุฃู ูุชุนูู ููููุงู ููุญุตู ุนูู ุงูุฃููุงู ูู ุงูุจูุณู ูู ุงูุตูุฑุฉ ... </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qf/mt/60/qfmt60p4wqhi0yil0r28wtdjskq.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃูู ูู ุงููุงุถุญ ุฃูู ููุณ ูุฏููุง ููุญุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุงูุชู ูุญุตู ุนุงุฏุฉู ุนูู ูุฐู ุงูุจูุงูุงุช ูููุง ุ ูุณูุณุชุฎุฏู ุงููุณุงุนุฏุฉ ูู ุดูู ุญุฒูุฉ get-pixels.  ููููู ุณุญุจ ุงููุนูููุงุช ุงููุงุฒูุฉ ูู ุงููุฎุฒู ุงููุคูุช ูุน ุตูุฑุฉ ูุฏููุง ุจุงููุนู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save get-pixels</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุจุฏู ุดูุก ูู ูุฐุง ุงููุจูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">getPixels(image, <span class="hljs-string"><span class="hljs-string">'image/jpg'</span></span>, (err, pixels) =&gt; { <span class="hljs-comment"><span class="hljs-comment">// . . . });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุตู ุนูู ูุงุฆู ูุญุชูู ุนูู ุญูู ุงูุจูุงูุงุช - ุตููู ูู ุงูุจูุณู ุ ููุณ ูุง ูุญุตู ุนููู ูู ููุงุด.  ุฏุนูู ุฃุฐูุฑู ุฃูู ูู ุฃุฌู ุงูุญุตูู ุนูู ููู ุจูุณู ุจูุงุณุทุฉ ุงูุฅุญุฏุงุซูุงุช (X ุ Y) ุ ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุญุณุงุจุงุช ุจุณูุทุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pixelPosition = <span class="hljs-number"><span class="hljs-number">4</span></span> * (y * width + x); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rgb = [ pixels.data[pixelPosition], pixels.data[pixelPosition + <span class="hljs-number"><span class="hljs-number">1</span></span>], pixels.data[pixelPosition + <span class="hljs-number"><span class="hljs-number">2</span></span>] ];</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ููู ูุณุชุทูู ุ ูููููุง ุฃุฎุฐ ุงูููู ููุณ ูู ุงูููุญุฉ ุ ูููู ูุจุงุดุฑุฉ ูู ุงูุตูุฑุฉ ุ ูุงุณุชุฎุฏุงูู.  ุณุชุญุตู ุนูู ุดูุก ูุซู ูุฐุง (ุงูุดูุก ุงูุฑุฆูุณู ููุง ูู ุฃูุง ุชูุณู ุฃู ุงูุฅุญุฏุงุซูุงุช ูู ุงูุตูุฑุฉ ุชุฎุชูู ุนู "ุงููุนุฏู" ูุฏููุง ูู 0 ุฅูู 100): </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateImprovedMosaic</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ getPixels(image, <span class="hljs-string"><span class="hljs-string">'image/jpg'</span></span>, (err, pixels) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(err); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rects = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; x += <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> realX = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(x * width / <span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; y += <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> realY = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(y * height / <span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pixelPosition = <span class="hljs-number"><span class="hljs-number">4</span></span> * (realY * width + realX); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rgb = [ pixels.data[pixelPosition], pixels.data[pixelPosition + <span class="hljs-number"><span class="hljs-number">1</span></span>], pixels.data[pixelPosition + <span class="hljs-number"><span class="hljs-number">2</span></span>] ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> color = <span class="hljs-string"><span class="hljs-string">'#'</span></span> + rgbHex(...rgb); rects.push({ x, y, color }); } } <span class="hljs-comment"><span class="hljs-comment">// . . .</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฒูุฏ ูู ุงูุฌูุงู ุ ูููููุง ุฒูุงุฏุฉ ุนุฏุฏ "ุงูุทูุจ" ููููุงู ุ ููุง ูููู ุญุฌูู.  ูุธุฑูุง ูุฃููุง ูุง ููุฑุฑ ูุฐุง ุงูุญุฌู ุฅูู ุงููุงูุจ (ุจุงูุทุจุน ุ ุณูููู ูู ุงููููุฏ ุฌุนูู ููุณ ุงููุนููุฉ ูุซู ุนุฑุถ ุฃู ุงุฑุชูุงุน ุงูุตูุฑุฉ) ุ ุณูููู ุจุชุบููุฑ ููู ุงูุญุฌู ูู ุงููุงูุจ ููุณู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">{{# each rects }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ x }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ y }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'6'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'6'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ color }}'</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{/each }}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุฏููุง ูุณููุณุงุก ุชุดุจู ุงูุตูุฑุฉ ุงูุฃุตููุฉ ุญููุง ุ ูููู ูู ููุณ ุงูููุช ุชุฃุฎุฐ ุชุฑุชูุจูุง ุจุญุฌู ุฃูู. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุง ุชูุณ ุฃู GZIP ูุถุบุท ูุซู ูุฐู ุงูุชุณูุณูุงุช ุงููุชูุฑุฑุฉ ูู ุงููููุงุช ุงููุตูุฉ ุฌูุฏูุง ุ ุจุญูุซ ุนูุฏ ุงูููู ุฅูู ุงููุชุตูุญ ุ ุณูุตุจุญ ุญุฌู ูุฐู ุงููุนุงููุฉ ุฃุตุบุฑ. </blockquote><p style=";text-align:right;direction:rtl">  ููู ุฏุนูุง ููุชูู. </p><br><h2 id="triangulyaciya" style=";text-align:right;direction:rtl">  ุงูุชุซููุซ </h2><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/by/h7/dq/byh7dqqiigv_3v5ayf-1lw8deyw.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุงููุณุชุทููุงุช ุฌูุฏุฉ ุ ููู ุงููุซูุซุงุช ุชุนุทู ูุชุงุฆุฌ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู.  ูุฐุง ุฏุนููุง ูุญุงูู ุตูุน ูุณููุณุงุก ูู ูููุฉ ูู ุงููุซูุซุงุช.  ููุงู ุทุฑู ูุฎุชููุฉ ููุฐู ุงููุณุฃูุฉ ุ ุณูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุซููุซ Delaunay</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save delaunay-triangulate</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ููุฎูุงุฑุฒููุฉ ุงูุชู ุณูุณุชุฎุฏููุง ูู ุฃููุง ุชุชุฌูุจ ุงููุซูุซุงุช ุฐุงุช ุงูุฒูุงูุง ุงูุญุงุฏุฉ ุฌุฏูุง ูุงููููุฑุฌุฉ ูููุง ุฃููู ุฐูู.  ููุญุตูู ุนูู ุตูุฑุฉ ุฌูููุฉ ุ ูุง ูุญุชุงุฌ ุฅูู ูุซูุซุงุช ุถููุฉ ูุทูููุฉ. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุฐู ูุงุญุฏุฉ ูู ุชูู ุงููุญุธุงุช ุนูุฏูุง ูููู ูู ุงููููุฏ ูุนุฑูุฉ ูุง ูู ุงูุฎูุงุฑุฒููุงุช ุงูุฑูุงุถูุฉ ุงูููุฌูุฏุฉ ูู ูุฌุงููุง ููุง ุงููุฑู ุจููููุง.  ููุณ ูู ุงูุถุฑูุฑู ุชุฐูุฑ ุฌููุน ุนูููุงุช ุงูุชูููุฐ ุงูุฎุงุตุฉ ุจูุง ุ ูููู ุนูู ุงูุฃูู ูู ุงููููุฏ ูุนุฑูุฉ ูุง ูุฌุจ ุงูุจุญุซ ุนูู. </blockquote><p style=";text-align:right;direction:rtl">  ุชูุณูู ูููุชูุง ุฅูู ููุงู ุฃุตุบุฑ.  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ููุงุท ูุฑุคูุณ ุงููุซูุซุงุช.  ูุณูููู ูู ุงููุทูู ุฅุถุงูุฉ ุจุนุถ ุงูุนุดูุงุฆูุฉ ุฅูู ุฅุญุฏุงุซูุงุชูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateTriangulation</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// . . . const basePoints = []; for (let x = 0; x &lt;= 100; x += 5) { for (let y = 0; y &lt;= 100; y += 5) { const point = [x, y]; if ((x &gt;= 5) &amp;&amp; (x &lt;= 95)) { point[0] += Math.floor(10 * Math.random() - 5); } if ((y &gt;= 5) &amp;&amp; (y &lt;= 95)) { point[1] += Math.floor(10 * Math.random() - 5); } basePoints.push(point); } } const triangles = triangulate(basePoints); // . . .</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ูุฑุงุฌุนุฉ ูููู ุงููุตูููุฉ ูุน ุงููุซูุซุงุช (console.log ููุณุงุนุฏุชูุง) ุ ูุฌุฏ ุฃููุณูุง ููุงุทูุง ูุฃุฎุฐ ูููุง ููู ุงูุจูุณู.  ููููู ุจุจุณุงุทุฉ ุญุณุงุจ ุงููุชูุณุท โโุงูุญุณุงุจู ูุฅุญุฏุงุซูุงุช ุฑุคูุณ ุงููุซูุซุงุช.  ุซู ูููู ุงูููุงุท ุงูุฅุถุงููุฉ ูู ุงูุญุฏูุฏ ุงููุตูู ุจุญูุซ ูุง ุชุฎุฑุฌ ูู ุฃู ููุงู ุ ูุจุนุฏ ุชููู ุฅุญุฏุงุซูุงุช ุญููููุฉ ุบูุฑ ุทุจูุนูุฉ ุ ูุญุตู ุนูู ููู ุงูุจูุณู ุ ูุงูุฐู ุณูุตุจุญ ููู ุงููุซูุซ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> polygons = []; triangles.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">triangle</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor((basePoints[triangle[<span class="hljs-number"><span class="hljs-number">0</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>] + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">1</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>] + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">2</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>]) / <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor((basePoints[triangle[<span class="hljs-number"><span class="hljs-number">0</span></span>]][<span class="hljs-number"><span class="hljs-number">1</span></span>] + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">1</span></span>]][<span class="hljs-number"><span class="hljs-number">1</span></span>] + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">2</span></span>]][<span class="hljs-number"><span class="hljs-number">1</span></span>]) / <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x === <span class="hljs-number"><span class="hljs-number">100</span></span>) { x = <span class="hljs-number"><span class="hljs-number">99</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y === <span class="hljs-number"><span class="hljs-number">100</span></span>) { y = <span class="hljs-number"><span class="hljs-number">99</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> realX = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(x * width / <span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> realY = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(y * height / <span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pixelPosition = <span class="hljs-number"><span class="hljs-number">4</span></span> * (realY * width + realX); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rgb = [ pixels.data[pixelPosition], pixels.data[pixelPosition + <span class="hljs-number"><span class="hljs-number">1</span></span>], pixels.data[pixelPosition + <span class="hljs-number"><span class="hljs-number">2</span></span>] ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> color = <span class="hljs-string"><span class="hljs-string">'#'</span></span> + rgbHex(...rgb); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> points = <span class="hljs-string"><span class="hljs-string">' '</span></span> + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">0</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>] + <span class="hljs-string"><span class="hljs-string">','</span></span> + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">0</span></span>]][<span class="hljs-number"><span class="hljs-number">1</span></span>] + <span class="hljs-string"><span class="hljs-string">' '</span></span> + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">1</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>] + <span class="hljs-string"><span class="hljs-string">','</span></span> + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">1</span></span>]][<span class="hljs-number"><span class="hljs-number">1</span></span>] + <span class="hljs-string"><span class="hljs-string">' '</span></span> + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">2</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>] + <span class="hljs-string"><span class="hljs-string">','</span></span> + basePoints[triangle[<span class="hljs-number"><span class="hljs-number">2</span></span>]][<span class="hljs-number"><span class="hljs-number">1</span></span>]; polygons.push({ points, color }); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจูู ููุท ูุฌูุน ุฅุญุฏุงุซูุงุช ุงูููุงุท ุงููุทููุจุฉ ูู ุณูุณูุฉ ูุฅุฑุณุงููุง ูุน ุงูููู ุฅูู ุงูููุงูุฏ ูููุนุงูุฌุฉ ุ ููุง ูุนููุง ูู ูุจู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุจ ููุณู ุ ูู ูููู ูุฏููุง ุงูุขู ูุณุชุทููุงุช ุ ูููู ูุถูุนุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">{{# each polygons }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polygon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ points }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'stroke-width:0.1;stroke:{{ color }};fill:{{ color }}'</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{/each }}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุชุซููุซ ุดูุก ูุซูุฑ ููุงูุชูุงู.  ูู ุฎูุงู ุฒูุงุฏุฉ ุนุฏุฏ ุงููุซูุซุงุช ุ ููููู ุงูุญุตูู ุนูู ุตูุฑ ุฌูููุฉ ููุท ุ ูุฃูู ูุง ุฃุญุฏ ูููู ุฃูู ูุฌุจ ุนูููุง ุงุณุชุฎุฏุงููุง ููุท ูุนูุตุฑ. </p><br><h2 id="mozaika-voronogo" style=";text-align:right;direction:rtl">  ูุณููุณุงุก Voronoi </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ูุดููุฉ ุ ูุฑุขุฉ ุงูุณุงุจูุฉ - ูุณู ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณููุณุงุก Voronoi</a> .  ููุฏ ุงุณุชุฎุฏููุงู ุจุงููุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูุฏ ุงูุนูู ูุน ุชุธููู</a> ุ ูููู ููุง ูููู ุฃู ูููู ูููุฏูุง ุฃูุถูุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ij/-y/4m/ij-y4mnhq9tlbbkewlmfeyn-q0k.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ููุง ูู ุงูุญุงู ูุน ุงูุฎูุงุฑุฒููุงุช ุงููุนุฑููุฉ ุงูุฃุฎุฑู ุ ูุฏููุง ุชูููุฐ ุฌุงูุฒ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i --save voronoi</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชููู ุงูุฅุฌุฑุงุกุงุช ุงูุฃุฎุฑู ูุดุงุจูุฉ ุฌุฏูุง ููุง ูุนููุงู ูู ุงููุซุงู ุงูุณุงุจู.  ุงููุฑู ุงููุญูุฏ ูู ุฃูู ูุฏููุง ุงูุขู ุจููุฉ ูุฎุชููุฉ - ุจุฏูุงู ูู ูุฌููุนุฉ ูู ุงููุซูุซุงุช ูุฏููุง ูุงุฆู ูุนูุฏ.  ูุงูุฎูุงุฑุงุช ูุฎุชููุฉ ููููุงู.  ุฎูุงู ุฐูู ุ ูู ุดูุก ูู ููุณู ุชูุฑูุจุง.  ูุชู ุฅูุดุงุก ูุตูููุฉ ูู ุงูููุงุท ุงูุฃุณุงุณูุฉ ุจููุณ ุงูุทุฑููุฉ ุ ุชุฎุทููุง ุญุชู ูุง ุชุฌุนู ุงููุงุฆูุฉ ุทูููุฉ ุฌุฏูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateVoronoi</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// . . . const box = { xl: 0, xr: 100, yt: 0, yb: 100 }; const diagram = voronoi.compute(basePoints, box); const polygons = []; diagram.cells.forEach((cell) =&gt; { let x = cell.site.x; let y = cell.site.y; if (x === 100) { x = 99; } if (y === 100) { y = 99; } const realX = Math.floor(x * width / 100); const realY = Math.floor(y * height / 100); const pixelPosition = 4 * (realY * width + realX); const rgb = [ pixels.data[pixelPosition], pixels.data[pixelPosition + 1], pixels.data[pixelPosition + 2] ]; const color = '#' + rgbHex(...rgb); let points = ''; cell.halfedges.forEach((halfedge) =&gt; { const endPoint = halfedge.getEndpoint(); points += endPoint.x.toFixed(2) + ',' + endPoint.y.toFixed(2) + ' '; }); polygons.push({ points, color }); }); // . . .</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ูุณููุณุงุก ูู ุงููุถูุนุงุช ุงููุญุฏุจุฉ.  ุฃูุถุง ูุชูุฌุฉ ูุซูุฑุฉ ุฌุฏุง ููุงูุชูุงู. </p><br><blockquote style=";text-align:right;direction:rtl">  ูู ุงููููุฏ ุชูุฑูุจ ุฌููุน ุงูุฃุฑูุงู ุฅูู ุฃุนุฏุงุฏ ุตุญูุญุฉ ุฃู ุนูู ุงูุฃูู ุฅูู ููุฒููู ุนุดุฑููู.  ุงูุฏูุฉ ุงูููุฑุทุฉ ูู SVG ุบูุฑ ุถุฑูุฑูุฉ ุชูุงููุง ููุง ุ ููู ุณุชุฒูุฏ ููุท ูู ุญุฌู ุงูุตูุฑ. </blockquote><br><h2 id="razmytaya-mozaika" style=";text-align:right;direction:rtl">  ูุณููุณุงุก ุบูุฑ ูุงุถุญุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงููุซุงู ุงูุฃุฎูุฑ ุงูุฐู ุณูุฑุงู ูู ูุณููุณุงุก ุถุจุงุจูุฉ.  ูุฏููุง ูู ููุฉ SVG ูู ุฃูุฏููุง ุ ูููุงุฐุง ูุง ุชุณุชุฎุฏู ุงููุฑุดุญุงุชุ </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xt/us/k1/xtusk1lqy7g9zsolqqanjrmqcva.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุฎุฐ ุงููุณููุณุงุก ุงูุฃููู ูููุณุชุทููุงุช ูุฃุถู ูุฑุดุญ "ุงูุชูููู" ุงูููุงุณู ุฅูููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'my-filter'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">feGaussianBlur</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">in</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'SourceGraphic'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stdDeviation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'2'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'url(#my-filter)'</span></span></span><span class="hljs-tag">&gt;</span></span> {{# each rects }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ x }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ y }}'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'6'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'6'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{{ color }}'</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{/each }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงููุชูุฌุฉ ูู ูุนุงููุฉ ุถุจุงุจูุฉ ููุงุถุญุฉ ูุตูุฑุชูุง ุ ููู ุชุดุบู ูุณุงุญุฉ ุฃูู 10 ูุฑุงุช ุชูุฑูุจูุง (ุจุฏูู ุถุบุท) ููุชุฌู ูุชูุชุฏ ุฅูู ุฃู ุญุฌู ููุดุงุดุฉ.  ุจููุณ ุงูุทุฑููุฉ ุ ููููู ุทูุณ ุจููุฉ ุงููุณููุณุงุก ูุฏููุง. </p><br><blockquote style=";text-align:right;direction:rtl">  ุนูุฏ ุชุทุจูู ูุซู ูุฐุง ุงููุฑุดุญ ุนูู ูุณููุณุงุก ููุชุธูุฉ ูู ุงููุณุชุทููุงุช ุ ูููู ุฃู ูุชุญูู "ุชุฃุซูุฑ ุงูุฌูุจ" ุ ูุฐูู ุฅุฐุง ููุช ุชุณุชุฎุฏู ุดูุฆูุง ููุฐุง ูู ุงูุฅูุชุงุฌ ุ ุฎุงุตุฉ ุนูู ุงูุตูุฑ ูุจูุฑุฉ ุงูุญุฌู ุ ููุฏ ูููู ูู ุงูุฃูุถู ุชุทุจูู ุงูุชูููู ููุณ ุนููู ุ ูููู ุนูู ุชูุณูู Voronoi. </blockquote><br><h2 id="vmesto-zaklyucheniya" style=";text-align:right;direction:rtl">  ุจุฏูุง ูู ุงูุงุณุชูุชุงุฌ </h2><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูููุงูุฉ ุ ูุธุฑูุง ูู ููููุฉ ุฅูุดุงุก ุฌููุน ุฃููุงุน ุตูุฑ ูุนุจ SVG ุนูู Node.js ูุชุฃูุฏูุง ูู ุฃู ูุฐู ููุณุช ูููุฉ ุตุนุจุฉ ุฅุฐุง ูู ุชูุชุจ ูู ุดูุก ูุฏูููุง ุ ูุฅุฐุง ุฃููู ุ ูู ุจุชุฌููุน ุงููุญุฏุงุช ุงูุฌุงูุฒุฉ.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุชููุฑ</a> ูุตุงุฏุฑ ูุงููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ุฌูุซุจ</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar431232/">https://habr.com/ru/post/ar431232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar431220/index.html">ูุธุฑุฉ ุนุงูู ุงูุฃุญูุงุก ุฅูู ุฌุฐูุฑ ุดูุฎูุฎุฉูุง</a></li>
<li><a href="../ar431222/index.html">ุฃุฑุดูุฉ ุงููููุน</a></li>
<li><a href="../ar431226/index.html">ูุนุจุฉ ุงูุซุนุจุงู ูู FPGA Cyclone IV (ูุน VGA ู SPI ุฌููุณุชูู)</a></li>
<li><a href="../ar431228/index.html">ุชุดุบูู ุนูุจุฉ ููุถูุก: ุจููุฑุงุช ุณุงุฆูุฉ ูููุณุงุนุฏุฉ</a></li>
<li><a href="../ar431230/index.html">ุงูุชุฎุฒูู ููุจููุฉ ุงูุชุญุชูุฉ HPC ุ ุฃู ููู ุฌูุนูุง 65 PB ุงูุชุฎุฒูู ูู ูุฑูุฒ RIKEN ููุฃุจุญุงุซ ุงููุงุจุงููุฉ</a></li>
<li><a href="../ar431234/index.html">11 ุฏูุณูุจุฑ ุ ููุณูู - Alfa JS MeetUp</a></li>
<li><a href="../ar431236/index.html">ููููุฉ ุงููุชุงุจุฉ ุนูู ุงููุฏู ุฌูู ูู 2018. ุงูุฌุฒุก ุงูุฃูู</a></li>
<li><a href="../ar431238/index.html">ููุฎุต ุงูุฃุญุฏุงุซ ููุชุฎุตุตู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูู ูุฌุงู ุชูููููุฌูุง ุงููุนูููุงุช ูุดูุฑ ุฏูุณูุจุฑ 2018</a></li>
<li><a href="../ar431242/index.html">ุดูุงุฏุงุช TLS ูุดุจูุฉ ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar431244/index.html">"ุงุซูุงู ุจุฏูู ุชุตููุฉ" ุฃู ุทุฑููุฉ ุณููุฉ ูุงุทูุงู ุงููุงุฑ ุนูู ุณุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>