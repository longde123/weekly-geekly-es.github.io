<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç† üëï üí¶ Pengambilan DIY kunci kripto Mifare dan penyalinan do-it-yourself dari kunci doorphone IronLogic üßë‚Äçü§ù‚Äçüßë ‚§¥Ô∏è üë©‚Äçüë¶‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hampir tidak bisa meraih kunci kripto dan menyalin cincin kunci Mifare untuk interkom tentu saja mustahil, tetapi sangat mungkin untuk merakit perangk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengambilan DIY kunci kripto Mifare dan penyalinan do-it-yourself dari kunci doorphone IronLogic</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479370/">  Hampir tidak bisa meraih kunci kripto dan menyalin cincin kunci Mifare untuk interkom tentu saja mustahil, tetapi sangat mungkin untuk merakit perangkat yang akan melakukan ini.  Saya tidak akan berbicara di sini tentang apa Mifare itu dan masuk ke rincian teknis, saya hanya akan mengatakan bahwa teknologi ini digunakan sekarang, misalnya, dalam interkom, dan untuk menyalin gantungan kunci interkom, Anda perlu mengetahui kunci kriptografi yang dengannya ditutup. <br><blockquote>  Perhatian!  Artikel ini hanya untuk tujuan pendidikan.  Kami mengingatkan Anda bahwa penetrasi apa pun ke dalam sistem informasi dapat dituntut secara hukum. </blockquote>  Banyak orang yang tertarik pada teknologi MIfare mungkin memiliki pembaca kartu / kunci Mifare yang paling sederhana untuk membaca dan menulis, yang terdiri dari modul PN532 dan adaptor USB-UART: <br><br><img src="https://habrastorage.org/webt/05/xq/ra/05xqrajis6urtbznevn5vfgy8xi.jpeg"><br><br>  Dengan perbaikan sederhana dan murah, perangkat ini dapat dibuat untuk menangkap <br>  Data autentikasi pembaca, dengan bantuan yang mana kunci kripto dihitung, sangat diperlukan untuk membaca dan menyalin.  Ada juga perangkat yang tersedia secara komersial untuk tujuan ini - SMKey, Proxmark3, Chameleon dan beberapa lainnya.  Ini adalah perangkat dengan banyak fungsi, nyaman, tetapi tidak murah. <br><br>  Saya memperhatikan opsi anggaran yang lebih banyak berdasarkan ‚Äúset pria kecil‚Äù yang serupa dari modul PN532 dan adaptor USB-UART, yang memungkinkan Anda untuk mengambil data dari pembaca Mifare, seperti interkom, dan menghitung kunci kriptografi yang digunakan pembaca untuk merujuk pada tag. <br><a name="habracut"></a><br>  Perangkat yang dikembangkan pada dasarnya memiliki papan debugging murah, "populer" berdasarkan pada prosesor STM32F103C8T6, juga disebut "BluePill" dengan modul PN532 dan adaptor USB-UART yang terhubung dengannya.  Unit ini terhubung melalui kabel USB-OTG ke smartphone di Android.  Semua ini disusun dalam versi mock-up tanpa penyolderan, dengan bantuan jumper, dan memiliki sesuatu seperti ini, meskipun tidak dapat ditampilkan, tetapi cukup berfungsi: <br><br><img src="https://habrastorage.org/webt/91/je/bh/91jebhmz4putgxatntmyldqvnas.jpeg"><br><br>  Diagram perakitan sangat sederhana dan disajikan dalam bentuk teks: <br><br>  PN532 ___________________STM32F103C8T6 <br><br>  SCK _____________________ PA5 (SPI1_SCK) <br>  MISO ____________________ PA6 (SPI1_MISO) <br>  MOSI ____________________ PA7 (SPI1_MOSI) <br>  SS ______________________ PB0 (GPIO_OUTPUT) <br>  SIGIN ___________________ PB11 (TIM2_CH4) <br>  SIGOUT __________________ PA12 (TIM1_ETR) <br>  SIGOUT __________________ PA0 (TIM2_ETR) <br>  VCC _____________________ + 5V <br>  GND_____________________GND <br><br><br>  USB-UART ________________ STM32F103C8T6 <br><br>  RX ______________________ PA9 (USART1_TX) <br>  TX ______________________ PA10 (USART1_RX) <br>  + 5V _____________________ + 5V <br>  GND_____________________GND <br><br>  PENTING!  Sakelar antarmuka PN532 harus disetel ke mode SPI!  Anda dapat mem-flash STM32 menggunakan utilitas FlashLoaderDemonstrator melalui adaptor USB-UART yang ada. <br><br>  Berikut ini adalah demo menangkap kunci kripto dari simulator pembaca telepon (Arduino + PN532): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/aUDXUIzN1kc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Karena pembaca IronLogic (IL), untuk bekerja dengan siapa perangkat ini dikembangkan, mencoba membaca tag dengan kunci kripto yang dihitung berdasarkan UID dari tag ini, UID ini harus terlebih dahulu disetel.  Anda dapat melakukan ini dengan dua cara - secara manual atau membaca dari tag.  Setelah itu, kami melakukan penangkapan dan menunggu perhitungan kunci kripto. <br><br>  Tab selanjutnya dari program "Record on Classic" menggunakan kemampuan versi pembaca IL sebelumnya untuk menulis salinan ke blanko Mifare Classic yang murah.  Metode ini didasarkan pada kenyataan bahwa pembaca IL setelah otorisasi mengirim ke interkom bukan UID asli dari tag, tetapi informasi yang direkam di blok pertama (dalam kasus umum, sama dengan UID dari aslinya).  Untuk melakukan ini, kita perlu menangkap dan menghitung kunci kripto label, yang akan berfungsi sebagai kosong, tutup sektor nol dengan itu, dan menulis empat byte UID label, yang berfungsi sebagai prototipe, ke dalam blok pertama label ini.  Untuk melakukan ini, kita bahkan tidak perlu mengambil kunci cryptocurrency asli dan menghapus dumpnya, itu cukup untuk mengetahui UID-nya, tetapi ini hanya berlaku jika aslinya adalah "asli" dan bukan salinan, maka Anda masih harus membaca blok pertama dan sudah menulis ke salinan.  Untuk membuatnya lebih jelas, perhatikan contoh ini - misalkan kita ingin membuat salinan kunci asli dengan UID 0xEBD52AC5, yang juga ditulis di blok pertama dari aslinya, pada label Mifare Classic reguler dengan UID, katakan 0x12345678.  Untuk melakukan ini, dengan bantuan perangkat yang disajikan, tepat dipanggil oleh satu kawan Shaitan-Mashina, kami menemukan cryptocurrency untuk UID ini dan untuk objek tertentu (pintu masuk, rumah ...) yang kami butuhkan.  Biarkan kunci crypto menjadi 0xABCDEF098765, lalu edit sektor nol dari tempat pembuangan salinan sebagai berikut: <br><br><img src="https://habrastorage.org/webt/rc/sh/lb/rcshlbqwctujngjr0dkvnhlb8zk.jpeg"><br><br>  Di blok pertama, kami menulis UID dari 0xEBD52AC5 asli, dan di blok ketiga enam byte kunci kripto yang ditemukan untuk benda kerja ini adalah 0xABCDEF098765.  Kami menulis dump ke tempat kosong, dan mendapatkan salinan kunci interkom.  Sesuatu seperti SMKey ini membuat salinan IronLogic ke Mifare Classic reguler, dan inilah yang dilakukan oleh program rekaman ini.  Di bidang "Kode", kami secara manual memasukkan atau membaca 4 byte UID dari kunci asli, yang akan direkam dalam blok pertama salinan.  Kami memulai dan kemudian mengikuti petunjuk program.  Pertama kita membaca UID benda kerja, kemudian kita membawa perangkat ke interkom dan menangkap data otentikasi.  Setelah perhitungan selesai, program akan menawarkan untuk membawa blanko untuk perekaman data.  Jika lebih dari satu kunci kriptografi ditemukan, maka setelah merekam opsi pertama, itu akan diberikan kesempatan untuk memverifikasi salinan yang diterima.  Jika salinannya tidak pas, maka Anda harus mencoba kunci terhitung berikutnya, atau menghapus (mengembalikan) blank untuk penggunaan di masa mendatang.  Salinan mungkin juga tidak berfungsi karena kode yang ditulis di blok ke-1 dari salinan tidak didefinisikan dengan benar - misalnya, jika Anda mencoba untuk menulis UID asli bukan fob kunci asli, tetapi salinan dibuat menggunakan metode di atas. Dalam hal ini, Anda tidak boleh menggunakan UID label, dan data dari blok 1, yang dapat diperoleh di bagian "Menyalin sektor". <br><br>  Metode ini juga tidak akan berfungsi untuk versi terbaru dari perangkat lunak pembaca IL.  Dalam hal ini, salinan dapat dibuat dengan menyalin seluruh sektor ke-0 (4 blok) ke benda kerja yang memungkinkan Anda untuk merekam sektor ke-0 menggunakan bagian aplikasi "Salin Sektor".  Di sini, kita juga pertama-tama menemukan kunci cryptocurrency asli, membaca sektor nol dan kemudian menulis ke kosong.  Karena kurangnya OTP dan OTP-2.0 kosong di tangan, fitur ini sejauh ini telah diuji hanya pada NOL kosong, meskipun versi pembaca yang lebih baru membutuhkan penggunaan OTP-2.0. <br><br>  Nah, untuk permulaan - bagian aplikasi "UID Record" memungkinkan Anda untuk mengubah UID, mengembalikan blok ke-0 yang rusak dan mengatur ulang kunci benda kerja NOL crypto ke default. <br><br>  Jadi - untuk meringkas secara singkat.  Untuk membuat perangkat seperti itu, kami membeli atau mencari modul PN532, USB-UART adapter FTDI, PL2303, CH340 atau CP2102, papan debug STM32F103C8T6, satu setengah lusin jumper, adaptor USB-OTG dan smartphone (tablet) di Android dengan OTG.  Kami merakit perangkat itu sendiri sesuai dengan diagram di atas, flash * .bin dengan file STM32 dan menginstal aplikasi * .apk dari <a href="https://yadi.sk/d/1qKtoRTPWBYBpg">arsip</a> <br><cut>  pada smartphone.  Untuk operasi yang benar, aplikasi pada smartphone harus diluncurkan ketika adaptor USB-UART terhubung, baik secara default, atau dengan pemilihan manual, jika tidak aplikasi tidak akan mendapatkan akses ke adaptor. <br><br>  Saya ingin mengatakan beberapa kata tentang modul PN532 - tidak semua modul ini ‚Äúsama-sama bermanfaat‚Äù!  Dari tiga modul (seperti pada foto di atas) yang saya beli, satu tidak membaca dan menulis tag, terutama ZERO dan OTP-2.0, tetapi bekerja normal dalam mode pasif dengan pembaca interkom, yang lain berperilaku sebaliknya, dan hanya yang ketiga lagi- kurang mengatasi tag dan interkom (meskipun lebih buruk dari dua yang pertama).  Mungkin saya kurang beruntung dan kumpulan modul ini ternyata bukan kualitas terbaik, tetapi orang lain mengeluhkannya.  Namun - bagi seseorang yang beruntung.  Apa yang saya katakan  Modul PN532 muncul untuk dijual dengan tata letak yang sedikit berbeda, yang lebih mahal, tetapi, menurut ulasan, mereka tidak memiliki masalah seperti itu: <br><br><img src="https://habrastorage.org/webt/jr/vi/9s/jrvi9sfl-57ao-v8t0otqa0mm8a.jpeg"><br><br>  Jika seseorang menemukan PN532, yang tidak menulis dan membaca label dengan baik, saya dapat menyarankan menambahkan modul RC522 ke perangkat, yang bernilai satu sen, tetapi menjalankan fungsinya dengan sempurna, sesuai dengan skema berikut: <br><br>  RC522____________________STM32F103C8T6 <br><br>  RST ______________________ PB12 (GPIO_OUTPUT) <br>  SCK ______________________ PB13 (SPI2_SCK) <br>  MISO _____________________ PB14 (SPI2_MISO) <br>  MOSI _____________________ PB15 (SPI2_MOSI) <br>  SDA ______________________ PA8 (GPIO_OUTPUT) <br>  VCC ______________________ + 5V <br>  GND______________________GND <br>  Dalam hal ini, PN532 hanya akan berfungsi saat mengambil data dari pembaca, dan seluruh beban bekerja dengan tag akan jatuh di pundak RC522. <br><br>  Sebagai kesimpulan, saya ingin mengatakan bahwa kinerja perangkat dalam kondisi nyata diuji hanya pada pembaca IronLogic generasi pertama, tanpa filter NOL, OTP, OTP-2.0.  Versi lain sama sekali tidak memiliki akses, jadi untuk pembaca IL yang lebih modern, pengembangan perangkat lunak akan diperlukan, dan, tentu saja, kehadiran pembaca ini. <br><br>  <a href="https://yadi.sk/d/1qKtoRTPWBYBpg">Arsipkan</a> </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479370/">https://habr.com/ru/post/id479370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479358/index.html">Referensi cepat kategori nilai C ++: Bagian 2</a></li>
<li><a href="../id479360/index.html">Buat proyek sumber terbuka untuk Malaikat dalam beberapa klik</a></li>
<li><a href="../id479364/index.html">Peringkat CPU terbaik untuk PC gaming pada 2019</a></li>
<li><a href="../id479366/index.html">Hasil Survei Seluler Jumat</a></li>
<li><a href="../id479368/index.html">Cara mencapai CMM Level 5 QA dan Pengujian</a></li>
<li><a href="../id479374/index.html">Jaga dongle Anda: Studi keamanan penerima keyboard Logitech</a></li>
<li><a href="../id479376/index.html">Diamankan oleh Knox - Mekanisme Keamanan Seluler Samsung</a></li>
<li><a href="../id479378/index.html">Pikirkan SRE: lihat proyek melalui mata seorang insinyur SRE</a></li>
<li><a href="../id479382/index.html">Pengembangan yang Dipercepat dengan Dev Boot Musim Semi</a></li>
<li><a href="../id479384/index.html">Apa yang dilakukan Big Data di MegaFon dan bagaimana menuju ke sana?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>