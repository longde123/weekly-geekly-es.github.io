<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐พโโ๏ธ ๐๏ธ ๐ฉ๐พโ๐ป ุงูุนูู ูุน ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ูู Unity3D ๐บ ๐ง ๐ฅฉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ูุฑุญุจูุง ุฃููุง ุงููุฑุงุก ุงูุฃุนุฒุงุก ุ ุณูุชุญุฏุซ ุงูููู ุนู ุงูุนูู ูุน ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ูู ุจูุฆุฉ ุงููุญุฏุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ. 

 ุญุณุจ ุงูุชูุงููุฏ ุ ูู ุงูุจุฏุงูุฉ ุ ุณูุญุฏุฏ ูุง ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุนูู ูุน ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ูู Unity3D</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433366/" style=";text-align:right;direction:rtl"><h2 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h2><br>  ูุฑุญุจูุง ุฃููุง ุงููุฑุงุก ุงูุฃุนุฒุงุก ุ ุณูุชุญุฏุซ ุงูููู ุนู ุงูุนูู ูุน ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ูู ุจูุฆุฉ ุงููุญุฏุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ. <br><br>  ุญุณุจ ุงูุชูุงููุฏ ุ ูู ุงูุจุฏุงูุฉ ุ ุณูุญุฏุฏ ูุง ูู ูููุงุฐุง ูุญุชุงุฌู.  ูุฐูู ุ ูุง ูู ุจุงูุถุจุท ูุฐู ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ.  ูุฌุฒุก ูู ุชุทููุฑ ุงููุนุจุฉ ุ ูููู ุฃู ุชููู ูุฐู ุงูููุงุฑุฏ ูู ูู ูุง ูู ูุทููุจ ุญุชู ูุนูู ุงูุชุทุจูู ููุฌุจ ุฃูุง ูุชู ุชุฎุฒููู ูู ุงูุฅูุดุงุก ุงูููุงุฆู ูููุดุฑูุน.  ูููู ุงูุนุซูุฑ ุนูู ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ุนูู ุงููุฑุต ุงูุซุงุจุช ูุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจุงููุณุชุฎุฏู ูุนูู ุฎุงุฏู ููุจ ุฎุงุฑุฌู.  ูู ุงูุญุงูุฉ ุงูุนุงูุฉ ุ ูุฐู ุงูููุงุฑุฏ ูู ุฃู ููู ุฃู ูุฌููุนุฉ ุจูุงูุงุช ูููู ุจุชุญููููุง ูู ุชุทุจูููุง ููุฏ ุงูุชุดุบูู ุจุงููุนู.  ุนูุฏ ุงูุชุญุฏุซ ูู ุฅุทุงุฑ Unity 3d ุ ูููู ุฃู ูููููุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููู ูุตู </li><li style=";text-align:right;direction:rtl">  ููู ุงููููุณ </li><li style=";text-align:right;direction:rtl">  ููู ุงูุตูุช </li><li style=";text-align:right;direction:rtl">  ูุฌููุนุฉ ุจุงูุช </li><li style=";text-align:right;direction:rtl">  AssetBundle (ุงูุฃุฑุดูู ูุน ุฃุตูู ูุดุฑูุน ุงููุญุฏุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ) </li></ul><br>  ุฃุฏูุงู ุ ุณูู ูุฏุฑุณ ุจูุฒูุฏ ูู ุงูุชูุตูู ุงูุขููุงุช ุงููุถููุฉ ููุนูู ูุน ูุฐู ุงูููุงุฑุฏ ุงูููุฌูุฏุฉ ูู Unity 3D ุ ููุฐูู ูุชุงุจุฉ ูุฏูุฑูู ุจุณูุทูู ููุชูุงุนู ูุน ุฎุงุฏู ุงูููุจ ูุชุญููู ุงูููุงุฑุฏ ูู ุงูุชุทุจูู. <br><br>  <b>ููุงุญุธุฉ</b> : ุชุณุชุฎุฏู <i>ุจููุฉ ูุฐู ุงูููุงูุฉ ุชุนูููุฉ ุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู C # 7+ ููู ูุตููุฉ ููุชุฑุฌู Roslyn ุงููุณุชุฎุฏู ูู Unity3d ูู ุงูุฅุตุฏุงุฑุงุช 2018.3+.</i> <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ููุงูุญ ุงููุญุฏุฉ 3D </h2><br>  ูุจู Unity 2017 ุ ุชู ุงุณุชุฎุฏุงู ุขููุฉ ูุงุญุฏุฉ (ุจุงุณุชุซูุงุก ุงููุตู ุงูุฐุงุชู) ููุนูู ูุน ุจูุงูุงุช ุงูุฎุงุฏู ูุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ุ ูุงูุชู ุชู ุชุถููููุง ูู ุงููุญุฑู - ูุฐู ูู ูุฆุฉ WWW.  ุณูุญุช ูุฐู ุงููุฆุฉ ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ http ุงููุฎุชููุฉ (get ุ post ุ put ุ ุฅูุฎ.) ุจุดูู ูุชุฒุงูู ุฃู ุบูุฑ ูุชุฒุงูู (ุนุจุฑ Coroutine).  ูุงู ุงูุนูู ูุน ูุฐู ุงููุฆุฉ ุจุณูุทูุง ููุจุงุดุฑูุง. <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadFromServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> www = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(url); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> www; Debug.Log(www.text); }</code> </pre> <br>  ูุจุงููุซู ุ ูุง ููููู ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุงููุตูุฉ ููุท ุ ูููู ุฃูุถูุง ุงูุจูุงูุงุช ุงูุฃุฎุฑู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงูุช ุตููู - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.bytes</a> </li><li style=";text-align:right;direction:rtl">  ูุณูุฌ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.texture</a> </li><li style=";text-align:right;direction:rtl">  ุงูุตูุช - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.GetAudioClip</a> () </li><li style=";text-align:right;direction:rtl">  ุงูุฃุตูู - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.assetBundle</a> </li></ul><br>  ููุน ุฐูู ุ ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 2017 ุ ูุฏู Unity ูุธุงู ุฎุงุฏู ุฌุฏูุฏ ููุฏู ูู ูุฆุฉ <b>UnityWebRequest</b> ุ ูุงูุฐู ููุน ูู ูุณุงุญุฉ ุฃุณูุงุก ุงูุดุจูุงุช.  ุญุชู Unity 2018 ุ ูุงูุช ููุฌูุฏุฉ ุฅูู ุฌุงูุจ <b>WWW</b> ุ ูููู ูู ุงูุฅุตุฏุงุฑ ุงูุฃุฎูุฑ ูู ูุญุฑู <b>WWW</b> ุฃุตุจุญ ุบูุฑ ูุณุชุญุณู ุ ูุณูุชู ุฅุฒุงูุชู ุจุงููุงูู ูู ุงููุณุชูุจู.  ูุฐูู ุ ุณูู ูุฑูุฒ ุฃูุถูุง ุนูู <b>UnityWebRequest</b> (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจู UWR). <br><br>  ุงูุนูู ูุน UWR ููู ูุดุจู WWW ูู ุฌููุฑู ุ ูููู ููุงู ุงุฎุชูุงูุงุช ุ ูุงูุชู ุณูุชู ููุงูุดุชูุง ูุงุญููุง.  ููุฌุฏ ุฃุฏูุงู ูุซุงู ูุดุงุจู ูุชุญููู ุงููุต. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadFromServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityWebRequest(url); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); Debug.Log(request.downloadHandler.text); request.Dispose(); }</code> </pre><br>  ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ ุงูุชู ุฃุฏุฎููุง ูุธุงู UWR ุงูุฌุฏูุฏ (ุจุงูุฅุถุงูุฉ ุฅูู ุชุบููุฑ ูุจุฏุฃ ุงูุนูู ูู ุงูุฏุงุฎู) ูู ุงููุฏุฑุฉ ุนูู ุชุนููู ูุนุงูุฌุงุช ูุชุญููู ูุชูุฒูู ุงูุจูุงูุงุช ูู ุงูุฎุงุฏู ููุณู ุ ูููู ูุฑุงุกุฉ ุงููุฒูุฏ ูู ุงูุชูุงุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> .  ุจุดูู ุงูุชุฑุงุถู ุ ูุฐู ูู ูุฆุงุช <b>UploadHandler</b> ู <b>DownloadHandler</b> .  ุชููุฑ ุงููุญุฏุฉ ููุณูุง ูุฌููุนุฉ ูู ุงูุชุฏุงุฏุงุช ูุฐู ุงููุฆุงุช ููุนูู ูุน ุงูุจูุงูุงุช ุงููุฎุชููุฉ ุ ูุซู ุงูุตูุช ุ ูุงูููุงู ุ ูุงูุฃุตูู ุ ุฅูุฎ.  ุฏุนููุง ูููุฑ ูู ุงูุนูู ูุนูู ุจูุฒูุฏ ูู ุงูุชูุงุตูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุนูู ูุน ุงูููุงุฑุฏ </h2><br><h3 style=";text-align:right;direction:rtl">  ุงููุต </h3><br>  ุงูุนูู ูุน ุงููุต ูู ูุงุญุฏ ูู ุฃุณูู ุงูุฎูุงุฑุงุช.  ุชู ุจุงููุนู ูุตู ุทุฑููุฉ ุชูุฒููู ุฃุนูุงู.  ูุนูุฏ ูุชุงุจุชู ููููุงู ุจุงุณุชุฎุฏุงู ุฅูุดุงุก ุทูุจ ุงูุญุตูู ุนูู http ูุจุงุดุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadTextFromServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequest.Get(url); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!request.isHttpError &amp;&amp; !request.isNetworkError) { response(uwr.downloadHandler.text); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogErrorFormat(<span class="hljs-string"><span class="hljs-string">"error request [{0}, {1}]"</span></span>, url, request.error); response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } request.Dispose(); }</code> </pre><br>  ููุง ุชุฑู ูู ุงูููุฏ ุ ูุชู ุงุณุชุฎุฏุงู <b>DownloadHandler</b> ุงูุงูุชุฑุงุถู ููุง.  ุฎุงุตูุฉ ุงููุต ุนุจุงุฑุฉ ุนู getter ูุญูู ุตููู ุจุงูุช ุฅูู ูุต ูุดูุฑ UTF8.  ุงูุงุณุชุฎุฏุงู ุงูุฑุฆูุณู ูุชุญููู ุงููุต ูู ุงูุฎุงุฏู ูู ุชููู ููู json (ุงูุชูุซูู ุงููุชุณูุณู ููุจูุงูุงุช ูู ูููุฐุฌ ูุตู).  ููููู ุงูุญุตูู ุนูู ูุฐู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ูุฆุฉ Unity <b>JsonUtility</b> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = JsonUtility.FromJson&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-comment"><span class="hljs-comment">// T  ,    .</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงูุตูุช </h3><br>  ููุนูู ูุน ุงูุตูุช ุ ูุฌุจ ุฃู ุชุณุชุฎุฏู ุงูุทุฑููุฉ ุงูุฎุงุตุฉ ูุฅูุดุงุก ุทูุจ <b>UnityWebRequestMultimedia.GetAudioClip</b> ุ <b>ูููุญุตูู</b> ุนูู ุชูุซูู ุงูุจูุงูุงุช ูู ุงููููุฐุฌ ุงูุถุฑูุฑู ููุนูู ูู Unity ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู <b>DownloadHandlerAudioClip</b> .  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูุฏ ุฅูุดุงุก ุทูุจ ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ููุน ุจูุงูุงุช ุงูุตูุช ุงูููุซูุฉ ูู ุชุนุฏุงุฏ <b>AudioType</b> ุ ูุงูุฐู ูุญุฏุฏ ุงูุชูุณูู (wav ุ aiff ุ oggvorbis ุ ุฅูุฎ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadAudioFromServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, AudioType audioType, Action&lt;AudioClip&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequestMultimedia.GetAudioClip(url, audioType); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!request.isHttpError &amp;&amp; !request.isNetworkError) { response(DownloadHandlerAudioClip.GetContent(request)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogErrorFormat(<span class="hljs-string"><span class="hljs-string">"error request [{0}, {1}]"</span></span>, url, request.error); response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } request.Dispose(); }</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงููููุณ </h3><br>  ูุดุจู ุชูุฒูู ููุงุฏ ุชุดุจู ุชูู ุงูุฎุงุตุฉ ุจุงููููุงุช ุงูุตูุชูุฉ.  ูุชู ุฅูุดุงุก ุงูุทูุจ ุจุงุณุชุฎุฏุงู <b>UnityWebRequestTexture.GetTexture</b> .  ููุญุตูู ุนูู ุงูุจูุงูุงุช ูู ุงููููุฐุฌ ุงูุถุฑูุฑู ูููุญุฏุฉ ุ <b>ูุชู</b> ุงุณุชุฎุฏุงู <b>DownloadHandlerTexture</b> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadTextureFromServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;Texture2D&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequestTexture.GetTexture(url); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!request.isHttpError &amp;&amp; !request.isNetworkError) { response(DownloadHandlerTexture.GetContent(request)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogErrorFormat(<span class="hljs-string"><span class="hljs-string">"error request [{0}, {1}]"</span></span>, url, request.error); response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } request.Dispose(); }</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุญุฒูุฉ ุงูุฃุตูู </h3><br>  ููุง ุฐูุฑูุง ุณุงุจููุง ุ ูุฅู ุงูุญุฒูุฉ ูู ูู ุงููุงูุน ุฃุฑุดูู ุจู ููุงุฑุฏ Unity ูููู ุงุณุชุฎุฏุงููุง ูู ูุนุจุฉ ููุฏ ุงูุชุดุบูู ุจุงููุนู.  ูููู ุฃู ุชููู ูุฐู ุงูููุงุฑุฏ ุฃู ุฃุตูู ูููุดุฑูุน ุ ุจูุง ูู ุฐูู ุงููุดุงูุฏ.  ุงูุงุณุชุซูุงุก ูู ุงูุจุฑุงูุฌ ุงููุตูุฉ C # ุ ูุง ูููู ุชูุฑูุฑูุง.  ูุชุญููู <b>AssetBundle</b> ุ ูุชู ุงุณุชุฎุฏุงู ุงุณุชุนูุงู ูุชู ุฅูุดุงุคู ุจุงุณุชุฎุฏุงู <b>UnityWebRequestAssetBundle.GetAssetBundle.</b>  ูุณุชุฎุฏู <b>DownloadHandlerAssetBundle</b> ููุญุตูู ุนูู ุงูุจูุงูุงุช ุจุงูุดูู ุงูุถุฑูุฑู ูููุญุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadBundleFromServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;AssetBundle&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequestAssetBundle.GetAssetBundle(url); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!request.isHttpError &amp;&amp; !request.isNetworkError) { response(DownloadHandlerAssetBundle.GetContent(request)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogErrorFormat(<span class="hljs-string"><span class="hljs-string">"error request [{0}, {1}]"</span></span>, url, request.error); response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } request.Dispose(); }</code> </pre><br><h2 style=";text-align:right;direction:rtl">  ุงููุดุงูู ูุงูุญููู ุงูุฑุฆูุณูุฉ ุนูุฏ ุงูุนูู ูุน ุฎุงุฏู ุงูููุจ ูุงูุจูุงูุงุช ุงูุฎุงุฑุฌูุฉ </h2><br>  ุชู ูุตู ุงูุทุฑู ุงูุจุณูุทุฉ ููุชูุงุนู ุจูู ุงูุชุทุจูู ูุงูุฎุงุฏู ูู ุญูุซ ุชุญููู ุงูููุงุฑุฏ ุงููุฎุชููุฉ ุฃุนูุงู.  ููุน ุฐูู ุ ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ุงูุฃููุฑ ุฃูุซุฑ ุชุนููุฏูุง ุจูุซูุฑ.  ููุฑ ูู ุงููุดููุงุช ุงูุฑุฆูุณูุฉ ุงูุชู ุชุตุงุญุจ ุงููุทูุฑูู ูุงุณุชูุดู ุทุฑู ุญููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุง ูุณุงุญุฉ ุญุฑุฉ ูุงููุฉ </h3><br>  ุชุชูุซู ุฅุญุฏู ุงููุดููุงุช ุงูุฃููู ุนูุฏ ุชูุฒูู ุงูุจูุงูุงุช ูู ุงูุฎุงุฏู ูู ุงุญุชูุงู ูุฌูุฏ ูุณุงุญุฉ ุฎุงููุฉ ุนูู ุงูุฌูุงุฒ.  ุบุงูุจูุง ูุง ูุญุฏุซ ุฃู ูุณุชุฎุฏู ุงููุณุชุฎุฏู ุฃุฌูุฒุฉ ูุฏููุฉ ููุฃูุนุงุจ (ุฎุงุตุฉ ุนูู Android) ุ ููุง ุฃู ุญุฌู ุงููููุงุช ุงูุชู ุชู ุชูุฒูููุง ุจุญุฏ ุฐุงุชู ูุจูุฑ ุฌุฏูุง (ูุฑุญุจูุง ุจุฌูุงุฒ ุงูููุจููุชุฑ ุงูุดุฎุตู).  ูู ุฃู ุญุงู ุ ูุฌุจ ูุนุงูุฌุฉ ูุฐุง ุงููููู ุจุดูู ุตุญูุญ ููุฌุจ ุฅุจูุงุบ ุงููุงุนุจ ููุฏููุง ุจุฃูู ูุง ุชูุฌุฏ ูุณุงุญุฉ ูุงููุฉ ูููุฏุงุฑ ุงููุณุงุญุฉ.  ููู ููุนู ุฐููุ  ุฃูู ูุง ุชุญุชุงุฌ ุฅูู ูุนุฑูุชู ูู ุญุฌู ุงูููู ุงูุฐู ุชู ุชูุฒููู ุ ููุชู ุฐูู ุนู ุทุฑูู ุทูุจ <b>UnityWebRequest.Head ()</b> .  ุฃุฏูุงู ูู ุฑูุฒ ููุญุตูู ุนูู ุงูุญุฌู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetConntentLength</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequest.Head(url); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!request.isHttpError &amp;&amp; !request.isNetworkError) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentLength = request.GetResponseHeader(<span class="hljs-string"><span class="hljs-string">"Content-Length"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.TryParse(contentLength, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> returnValue)) { response(returnValue); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { response(<span class="hljs-number"><span class="hljs-number">-1</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogErrorFormat(<span class="hljs-string"><span class="hljs-string">"error request [{0}, {1}]"</span></span>, url, request.error); response(<span class="hljs-number"><span class="hljs-number">-1</span></span>); } }</code> </pre><br>  ูู ุงูููู ุงูุฅุดุงุฑุฉ ุฅูู ุดูุก ูุงุญุฏ ููุง ุ ููู ูุนูู ุงูุทูุจ ุจุดูู ุตุญูุญ ุ ูุฌุจ ุฃู ูููู ุงูุฎุงุฏู ูุงุฏุฑุงู ุนูู ุฅุฑุฌุงุน ุญุฌู ุงููุญุชูู ุ ูุฅูุง (ููุง ูู ุงููุงูุน ุ ูุนุฑุถ ุงูุชูุฏู) ุ ุณูุชู ุฅุฑุฌุงุน ุงููููุฉ ุงูุฎุทุฃ. <br><br>  ุจุนุฏ ุฃู ูุญุตู ุนูู ุญุฌู ุงูุจูุงูุงุช ุงูุชู ุชู ุชูุฒูููุง ุ ูููููุง ููุงุฑูุชูุง ุจุญุฌู ูุณุงุญุฉ ุงููุฑุต ุงูุญุฑุฉ.  ููุญุตูู ุนูู ุงูุฃุฎูุฑ ุ ุฃุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููููู ุงูุฅุถุงูู ุงููุฌุงูู ูู Asset Store</a> . <br><br>  <b>ููุงุญุธุฉ</b> : <i>ููููู ุงุณุชุฎุฏุงู ูุฆุฉ <b>ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช</b> ูู Unity3d ุ ููููู ุฃู ุชุธูุฑ ูุณุงุญุฉ ุชุฎุฒูู ุญุฑุฉ ููุณุชุฎุฏูุฉ.</i>  <i>ููุน ุฐูู ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐู ุงูุจูุงูุงุช ูุณุจูุฉ.</i>  <i>ูุชู ุญุณุงุจูุง ุจูุงุกู ุนูู ุญุฌู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุณูุง ุ ุงูุชุฑุงุถููุง ููู 4 ุฌูุฌุงุจุงูุช.</i>  <i>ุฅุฐุง ูุงู ูุฏู ุงููุณุชุฎุฏู ูุณุงุญุฉ ุฎุงููุฉ ุฃูุจุฑ ูู ุญุฌู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููู ุชููู ููุงู ูุดุงูู ุ ูููู ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุฏ ุชุฃุฎุฐ ุงูููู ููููุง ุบูุฑ ุตุญูุญุฉ ุจุงููุณุจุฉ ููุญุงูุฉ ุงูุญููููุฉ ููุฃููุฑ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุงุฎุชูุงุฑ ุงููุตูู ุฅูู ุงูุฅูุชุฑูุช </h3><br>  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูุจู ุชูุฒูู ุฃู ุดูุก ูู ุงูุฎุงุฏู ุ ูู ุงูุถุฑูุฑู ูุนุงูุฌุฉ ูุถุน ุนุฏู ุงููุตูู ุฅูู ุงูุฅูุชุฑูุช.  ููุงู ุนุฏุฉ ุทุฑู ููููุงู ุจุฐูู: ูู ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุนุจุฑ ุนููุงู ุ ุฅูู ุทูุจ GET ุฅูู google.ru.  ููุน ุฐูู ุ ูู ุฑุฃูู ุ ูุฅู ุงููุชูุฌุฉ ุงูุฃูุซุฑ ุฏูุฉ ูุฅุนุทุงุก ุณุฑุนุฉ ูุซุจุงุช ูู ุชูุฒูู ููู ุตุบูุฑ ูู ุงูุฎุงุฏู ุงูุฎุงุต ุจู (ููุณ ุงูููู ุงูุฐู ุณูุชู ุชูุฒูู ุงููููุงุช ููู).  ุชู ุดุฑุญ ููููุฉ ุงูููุงู ุจุฐูู ุฃุนูุงู ูู ุงููุณู ุงูุฎุงุต ุจุงูุชุนุงูู ูุน ุงููุต. <br>  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุญูู ูู ุญูููุฉ ูุฌูุฏ ุฅููุงููุฉ ุงููุตูู ุฅูู ุงูุฅูุชุฑูุช ุ ูู ุงูุถุฑูุฑู ุฃูุถูุง ุชุญุฏูุฏ ููุนู (ุฌูุงู ุฃู WiFi) ุ ูุฃูู ูู ุบูุฑ ุงููุญุชูู ุฃู ูุฑุบุจ ุงููุดุบู ูู ุชูุฒูู ุนุฏุฉ ูุฆุงุช ูู ุงูููุฌุงุจุงูุช ุนูู ุญุฑูุฉ ูุฑูุฑ ุงููุงุชู ุงููุญููู.  ูููู ุงูููุงู ุจุฐูู ูู ุฎูุงู ุฎุงุตูุฉ <b>Application.internetReachability</b> . <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุฎุฒูู ุงููุคูุช </h3><br>  ุงูุชุงูู ุ ูุฃุญุฏ ุฃูู ุงููุดููุงุช ุ ูู ุงูุชุฎุฒูู ุงููุคูุช ูููููุงุช ุงูุชู ุชู ุชูุฒูููุง.  ูุง ูู ูุฐุง ุงูุชุฎุฒูู ุงููุคูุช ูุ <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญูุธ ุญุฑูุฉ ุงููุฑูุฑ (ูุง ุชูู ุจุชูุฒูู ุงูุจูุงูุงุช ุงูุชู ุชู ุชูุฒูููุง ุจุงููุนู) </li><li style=";text-align:right;direction:rtl">  ุถูุงู ุงูุนูู ูู ุบูุงุจ ุงูุฅูุชุฑูุช (ููููู ุนุฑุถ ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช). </li></ol><br>  ูุง ูุฌุจ ุฃู ูููู ูุคูุชุงุ  ุงูุฅุฌุงุจุฉ ุนูู ูุฐุง ุงูุณุคุงู ูู ูู ุดูุก ุ ูุฌุจ ุชุฎุฒูู ุฌููุน ุงููููุงุช ุงูุชู ููุช ุจุชูุฒูููุง ูุคูุชูุง.  ููููุฉ ุงูููุงู ุจุฐูู ุ ููุฑ ูู ูุง ููู ุ ูุงุจุฏุฃ ุจูููุงุช ูุตูุฉ ุจุณูุทุฉ. <br>  ูุณูุก ุงูุญุธ ุ ููุณ ูุฏู Unity ุขููุฉ ูุถููุฉ ููุชุฎุฒูู ุงููุคูุช ูููุต ุ ููุฐูู ุงูููุงู ููููุงุช ุงูุตูุช.  ูุฐูู ุ ูู ุงูุถุฑูุฑู ููุฐู ุงูููุงุฑุฏ ุฃู ุชูุชุจ ูุธุงูู ุ ุฃู ูุง ุชูุชุจ ุ ููููุง ูุงุญุชูุงุฌุงุช ุงููุดุฑูุน.  ูู ุฃุจุณุท ุงูุญุงูุงุช ุ ููุชุจ ุจุจุณุงุทุฉ ุงูููู ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููู ุบูุงุจ ุงูุฅูุชุฑูุช ุ ูุฃุฎุฐ ุงูููู ููู.  ูู ุฅุตุฏุงุฑ ุฃูุซุฑ ุชุนููุฏูุง ููููุงู (ุงุณุชุฎุฏูู ูู ุงููุดุงุฑูุน) ุ ูุฑุณู ุทูุจูุง ุฅูู ุงูุฎุงุฏู ุ ูุงูุฐู ูุนุฑุถ json ููุฅุดุงุฑุฉ ุฅูู ุฅุตุฏุงุฑุงุช ุงููููุงุช ุงููุฎุฒูุฉ ุนูู ุงูุฎุงุฏู.  ููููู ูุชุงุจุฉ ููุฑุงุกุฉ ุงููููุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุจุงุณุชุฎุฏุงู ูุฆุฉ C # ููุฆุฉ <b>ุงูููู</b> ุฃู ุจุฃู ุทุฑููุฉ ุฃุฎุฑู ูุฑูุญุฉ ูููุจููุฉ ูู ูุจู ูุฑููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CacheText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cacheFilePath = Path.Combine(<span class="hljs-string"><span class="hljs-string">"CachePath"</span></span>, <span class="hljs-string"><span class="hljs-string">"{0}.text"</span></span>.Fmt(fileName)); File.WriteAllText(cacheFilePath, data); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CacheTexture</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cacheFilePath = Path.Combine(<span class="hljs-string"><span class="hljs-string">"CachePath"</span></span>, <span class="hljs-string"><span class="hljs-string">"{0}.texture"</span></span>.Fmt(fileName)); File.WriteAllBytes(cacheFilePath, data); }</code> </pre><br>  ูุจุงููุซู ุ ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTextFromCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cacheFilePath = Path.Combine(Utils.Path.Cache, <span class="hljs-string"><span class="hljs-string">"{0}.text"</span></span>.Fmt(fileName)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (File.Exists(cacheFilePath)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> File.ReadAllText(cacheFilePath); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Texture2D </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTextureFromCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cacheFilePath = Path.Combine(Utils.Path.Cache, <span class="hljs-string"><span class="hljs-string">"{0}.texture"</span></span>.Fmt(fileName)); Texture2D texture = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (File.Exists(cacheFilePath)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = File.ReadAllBytes(cacheFilePath); texture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture2D(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); texture.LoadImage(data, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> texture; }</code> </pre><br>  <b>ููุงุญุธุฉ</b> : <i>ููุงุฐุง ูุง ูุชู ุงุณุชุฎุฏุงู ููุณ UWR ูุน ุนููุงู url ูููู ุงููููุฐุฌ: // ูุชุญููู ุงูููุงู.</i>  <i>ูู ุงูููุช ุงูุญุงูู ุ ููุงู ูุดุงูู ูู ูุฐุง ุ ุงูููู ุจุจุณุงุทุฉ ูุง ูุชู ุชุญูููู ุ ูุฐูู ุงุถุทุฑุฑุช ุฅูู ุฅูุฌุงุฏ ุญู ุจุฏูู.</i> <br><br>  <b>ููุงุญุธุฉ</b> : <i>ูุง ุฃุณุชุฎุฏู ุงูุชุญููู ุงููุจุงุดุฑ ูุจุฑูุงูุฌ AudioClip ูู ุงููุดุฑูุนุงุช ุ ูุฃูุง ุฃุฎุฒู ูู ูุฐู ุงูุจูุงูุงุช ูู AssetBundle.</i>  <i>ููุน ุฐูู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ุงูููุงู ุจุฐูู ุจุณูููุฉ ุจุงุณุชุฎุฏุงู ูุธุงุฆู ุงููุฆุฉ AudioClip GetData ู SetData.</i> <i><br></i> <br>  ููุงุฑุฏ Unity ุงูุจุณูุทุฉ ูู <b>AssetBundle</b> ุ ูุฏู Unity ุขููุฉ ุชุฎุฒูู ูุฏูุฌุฉ.  ูููุธุฑ ูู ุงูุฃูุฑ ุจูุฒูุฏ ูู ุงูุชูุตูู. <br><br>  ูู ุงูุฃุณุงุณ ุ ูููู ููุฐู ุงูุขููุฉ ุงุณุชุฎุฏุงู ุทุฑููุชูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุงุชูุงููุฉ ุญููู ุงูุทูู ูุฑูู ุงูุฅุตุฏุงุฑ </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ููู ุงูุชุฌุฒุฆุฉ </li></ol><br>  ูู ุญูุซ ุงููุจุฏุฃ ุ ููููู ุงุณุชุฎุฏุงู ุฃู ูููุง ุ ููููู ูุฑุฑุช ุจููุณู ุฃู ูุงุด ูู ุงูุฃูุซุฑ ูุจููุง ุ ูุฃู ูุฏู ูุธุงู ุงูุฅุตุฏุงุฑ ุงูุฎุงุต ุจู ููุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ููุณ ููุท ุฅุตุฏุงุฑ <b>AssetBundle</b> ุ ูููู ุฃูุถุง ุฅุตุฏุงุฑ ุงูุชุทุจูู ุ ูุฃูู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูุฏ ูุง ุชููู ุงูุญุฒูุฉ ูุชูุงููุฉ ูุน ุงูุฅุตุฏุงุฑ ุ ุงูููุฏูุฉ ูู ุงููุชุงุฌุฑ. <br><br>  ูุฐูู ุ ููู ูุชู ุงูุชุฎุฒูู ุงููุคูุช ุงูููุงู ุจู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุทูุจ ููู ุญุฒูุฉ ูู ุฎุงุฏู ุงูุจูุงู (ูุชู ุฅูุดุงุก ูุฐุง ุงูููู ุชููุงุฆููุง ุนูุฏ ุฅูุดุงุฆู ููุญุชูู ุนูู ูุตู ููุฃุตูู ุงูุชู ูุญุชูู ุนูููุง ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุฌุฒุฆุฉ ุ ู crc ุ ูุงูุญุฌู ุ ุฅูุฎ).  ุงูููู ูู ููุณ ุงุณู ุงูุญุฒูุฉ ุจุงูุฅุถุงูุฉ ุฅูู ููุญู ุงูุจูุงู. </li><li style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู ูููุฉ hash128 ูู ุงูุจูุงู </li><li style=";text-align:right;direction:rtl">  ูููู ุจุฅูุดุงุก ุทูุจ ุฅูู ุงูุฎุงุฏู ููุญุตูู ุนูู AssetBundle ุ ุญูุซ ุจุงูุฅุถุงูุฉ ุฅูู ุนููุงู url ุ ุญุฏุฏ ูููุฉ hash128 ุงููุณุชููุฉ </li></ol><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ ุงูุฎูุงุฑุฒููุฉ ุงูููุถุญุฉ ุฃุนูุงู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadAssetBundleFromServerWithCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;AssetBundle&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,    while (!Caching.ready) { yield return null; } //     var request = UnityWebRequest.Get(url + ".manifest"); yield return request.SendWebRequest(); if (!request.isHttpError &amp;&amp; !request.isNetworkError) { Hash128 hash = default; // hash var hashRow = request.downloadHandler.text.ToString().Split("\n".ToCharArray())[5]; hash = Hash128.Parse(hashRow.Split(':')[1].Trim()); if (hash.isValid == true) { request.Dispose(); request = UnityWebRequestAssetBundle.GetAssetBundle(url, hash, 0); yield return request.SendWebRequest(); if (!request.isHttpError &amp;&amp; !request.isNetworkError) { response(DownloadHandlerAssetBundle.GetContent(request)); } else { response(null); } } else { response(null); } } else { response(null); } request.Dispose(); }</span></span></code> </pre><br></div></div><br>  ูู ุงููุซุงู ุฃุนูุงู ุ ูุจุญุซ Unity ุ ุจูุงุกู ุนูู ุทูุจ ุฅูู ุงูุฎุงุฏู ุ ุฃููุงู ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ููุงู ููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุจูููุฉ hash128 ุงููุญุฏุฏุฉ ุ ุฅุฐุง ูุงู ูุฐูู ุ ูุณูุชู ุฅุฑุฌุงุนู ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุณูุชู ุชูุฒูู ุงูููู ุงูุฐู ุชู ุชุญุฏูุซู.  ูุฅุฏุงุฑุฉ ุฌููุน ูููุงุช ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุงููุญุฏุฉ ุ ุชูุฌุฏ ูุฆุฉ ุฐุงูุฑุฉ <b>ุงูุชุฎุฒูู ุงููุคูุช</b> ุ ูุงูุชู ูููููุง ูู ุฎูุงููุง ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ููุงู ููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ุฃู ุงูุญุตูู ุนูู ุฌููุน ุงูุฅุตุฏุงุฑุงุช ุงููุฎุฒูุฉ ูุคูุชูุง ุ ููุฐูู ุญุฐู ุงููุณุฎ ุบูุฑ ุงูุถุฑูุฑูุฉ ุ ุฃู ูุญููุง ุชูุงููุง. <br><br>  <b>ููุงุญุธุฉ</b> : <i>ููุงุฐุง ูุฐู ุงูุทุฑููุฉ ุงูุบุฑูุจุฉ ููุญุตูู ุนูู ููู ุงูุชุฌุฒุฆุฉุ</i>  <i>ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู ุงูุญุตูู ุนูู hash128 ุจุงูุทุฑููุฉ ุงูููุถุญุฉ ูู ุงููุซุงุฆู ูุชุทูุจ ุชุญููู ุงูุญุฒูุฉ ุจุงููุงูู ุ ุซู ุงุณุชูุงู ุฃุตู <b>AssetBundleManifest</b> ููู ููู ููุงู ุจุงููุนู ููู hash.</i>  <i>ุงูุฌุงูุจ ุงูุณูุจู ููุฐุง ุงูููุฌ ูู ุฃู AssetBundle ุจุฃูููู ูุชุฃุฑุฌุญ ุ ููููุง ูุญุชุงุฌ ููุท ุฃู ูุง ูููู.</i>  <i>ูุฐูู ุ ูููู ุฃููุงู ุจุชูุฒูู ููู ุงูุจูุงู ููุท ูู ุงูุฎุงุฏู ุ ููุฃุฎุฐ ููู ูุงุด 128 ุ ูุจุนุฏ ุฐูู ููุท ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูุฒูู ููู ุงูุญุฒูุฉ ุ ููุฌุจ ุณุญุจ ูููุฉ hash128 ูู ุฎูุงู ุชูุณูุฑ ุงูุฎุทูุท.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุนูู ูุน ุงูููุงุฑุฏ ูู ูุถุน ุงููุญุฑุฑ </h3><br>  ุงููุดููุฉ ุงูุฃุฎูุฑุฉ ุ ุฃู ุจุงูุฃุญุฑู ูุณุฃูุฉ ุชุตุญูุญ ุงูุฃุฎุทุงุก ูุฑุงุญุฉ ุงูุชุทููุฑ ุ ูู ุงูุนูู ูุน ุงูููุงุฑุฏ ุงููุงุจูุฉ ููุชูุฒูู ูู ูุถุน ุงููุญุฑุฑ ุ ุฅุฐุง ูู ุชูู ููุงู ูุดุงูู ูุน ุงููููุงุช ุงูุนุงุฏูุฉ ุ ูุฅู ุงูุฃููุฑ ููุณุช ุจูุฐู ุงูุจุณุงุทุฉ ูู ุงูุญุฒู.  ุจุงูุทุจุน ุ ููููู ุฅูุดุงุก ุจูุงุฆูุง ูู ูู ูุฑุฉ ุ ูุชุญูููู ุนูู ุงูุฎุงุฏู ูุฅุทูุงู ุงูุชุทุจูู ูู ูุญุฑุฑ Unity ููุดุงูุฏุฉ ููู ูุนูู ูู ุดูุก ุ ูููู ุญุชู ูุฐุง ุงููุตู ูุจุฏู ููุฃูู "ุนูุงุฒ".  ููุงู ุญุงุฌุฉ ุฅูู ุงูููุงู ุจุดูุก ูุง ููุฐุง <b>ุงูุบุฑุถ ุ</b> ูุณูู ุชุณุงุนุฏูุง ูุฆุฉ <b>AssetDatabase</b> . <br><br>  ูู ุฃุฌู ุชูุญูุฏ ุงูุนูู ูุน ุงูุญุฒู ุ ุตูุนุช ุบูุงููุง ุฎุงุตูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AssetBundleWrapper</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> AssetBundle _assetBundle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AssetBundleWrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AssetBundle assetBundle</span></span></span><span class="hljs-function">)</span></span> { _assetBundle = assetBundle; } }</code> </pre><br>  ูุญุชุงุฌ ุงูุขู ุฅูู ุฅุถุงูุฉ ูุถุนูู ููุนูู ูุน ุงูุฃุตูู ุ ุงุนุชูุงุฏูุง ุนูู ูุง ุฅุฐุง ููุง ูู ุงููุญุฑุฑ ุฃู ูู ุงูุจููุฉ.  ุจุงููุณุจุฉ ููุจูุงุก ุ ูุณุชุฎุฏู ุงูุฃุบููุฉ ุนูู ูุธุงุฆู ูุฆุฉ <b>AssetBundle</b> ุ ูุจุงููุณุจุฉ ูููุญุฑุฑ ูุณุชุฎุฏู ูุฆุฉ <b>AssetDatabase</b> ุงููุฐููุฑุฉ ุฃุนูุงู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุจุงูุชุงูู ุ ูุญุตู ุนูู ุงูููุฏ ุงูุชุงูู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AssetBundleWrapper</span></span> { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR private readonly List&lt;string&gt; _assets; public AssetBundleWrapper(string url) { var uri = new Uri(url); var bundleName = Path.GetFileNameWithoutExtension(uri.LocalPath); _assets = new List&lt;string&gt;(AssetDatabase.GetAssetPathsFromAssetBundle(bundleName)); } public T LoadAsset&lt;T&gt;(string name) where T : UnityEngine.Object { var assetPath = _assets.Find(item =&gt; { var assetName = Path.GetFileNameWithoutExtension(item); return string.CompareOrdinal(name, assetName) == 0; }); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!string.IsNullOrEmpty(assetPath)) { return AssetDatabase.LoadAssetAtPath&lt;T&gt;(assetPath); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { return default; } } public T[] LoadAssets&lt;T&gt;() where T : UnityEngine.Object { var returnedValues = new List&lt;T&gt;(); foreach(var assetPath in _assets) { returnedValues.Add(AssetDatabase.LoadAssetAtPath&lt;T&gt;(assetPath)); } return returnedValues.ToArray(); } public void LoadAssetAsync&lt;T&gt;(string name, Action&lt;T&gt; result) where T : UnityEngine.Object { result(LoadAsset&lt;T&gt;(name)); } public void LoadAssetsAsync&lt;T&gt;(Action&lt;T[]&gt; result) where T : UnityEngine.Object { result(LoadAssets&lt;T&gt;()); } public string[] GetAllScenePaths() { return _assets.ToArray(); } public void Unload(bool includeAllLoadedAssets = false) { _assets.Clear(); } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> private readonly AssetBundle _assetBundle; public AssetBundleWrapper(AssetBundle assetBundle) { _assetBundle = assetBundle; } public T LoadAsset&lt;T&gt;(string name) where T : UnityEngine.Object { return _assetBundle.LoadAsset&lt;T&gt;(name); } public T[] LoadAssets&lt;T&gt;() where T : UnityEngine.Object { return _assetBundle.LoadAllAssets&lt;T&gt;(); } public void LoadAssetAsync&lt;T&gt;(string name, Action&lt;T&gt; result) where T : UnityEngine.Object { var request = _assetBundle.LoadAssetAsync&lt;T&gt;(name); TaskManager.Task.Create(request) .Subscribe(() =&gt; { result(request.asset as T); Unload(false); }) .Start(); } public void LoadAssetsAsync&lt;T&gt;(Action&lt;T[]&gt; result) where T : UnityEngine.Object { var request = _assetBundle.LoadAllAssetsAsync&lt;T&gt;(); TaskManager.Task.Create(request) .Subscribe(() =&gt; { var assets = new T[request.allAssets.Length]; for (var i = 0; i &lt; request.allAssets.Length; i++) { assets[i] = request.allAssets[i] as T; } result(assets); Unload(false); }) .Start(); } public string[] GetAllScenePaths() { return _assetBundle.GetAllScenePaths(); } public void Unload(bool includeAllLoadedAssets = false) { _assetBundle.Unload(includeAllLoadedAssets); } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> }</span></span></code> </pre><br></div></div><br>  <b>ููุงุญุธุฉ</b> : ูุณุชุฎุฏู <b>ุงูููุฏ</b> ูุฆุฉ <b>TaskManager</b> ุ ูุณูุชู ููุงูุดุชู ุฃุฏูุงู ุ ุจุงุฎุชุตุงุฑ ุ ูุฐุง ููู <b>ูุบูู</b> ููุนูู ูุน <b>Coroutine</b> . <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ูุง ุณุจู ุ ูู ุงููููุฏ ุฃูุถูุง ุฃุซูุงุก ุงูุชุทููุฑ ุงููุธุฑ ุฅูู ูุง ูููุง ุจุชูุฒููู ููุง ููุฌุฏ ุญุงูููุง ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ููุฐุง ุงูุบุฑุถ ุ ููููู ุงูุงุณุชูุงุฏุฉ ูู ุงููุฏุฑุฉ ุนูู ุชุนููู ุงููุฌูุฏ ุงูุฎุงุต ุจู ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ููุชุฎุฒูู ุงููุคูุช (ููููู ุฃูุถูุง ูุชุงุจุฉ ุงููุต ุงูุฐู ุชู ุชูุฒููู ูุงููููุงุช ุงูุฃุฎุฑู ุฅูู ููุณ ุงููุฌูุฏ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR var path = Path.Combine(Directory.GetParent(Application.dataPath).FullName, "_EditorCache"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> var path = Path.Combine(Application.persistentDataPath, "_AppCache"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> Caching.currentCacheForWriting = Caching.AddCache(path);</span></span></code> </pre><br><h2 style=";text-align:right;direction:rtl">  ููุชุจ ูุฏูุฑ ุทูุจ ุงูุดุจูุฉ ุฃู ูุนูู ูุน ุฎุงุฏู ููุจ </h2><br>  ุฃุนูุงู ุฏุฑุณูุง ุงูุฌูุงูุจ ุงูุฑุฆูุณูุฉ ููุนูู ูุน ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ูู ุงููุญุฏุฉ ุ ูุงูุขู ุฃูุฏ ุฃู ุฃุชูุงูู ุชูููุฐ API ุ ุงูุฐู ูุนูู ูููุญุฏ ูู ูุง ุณุจู.  ุฃููุงู ุ ุฏุนูุง ูุชุญุฏุซ ุนู ูุฏูุฑ ุงุณุชุนูุงู ุงูุดุจูุฉ. <br><br>  <b>ููุงุญุธุฉ</b> : <i>ูููุง ููู ุ ูุณุชุฎุฏู ุงููุฌูุน ุนูู <b>Coroutine</b> ููุฆุฉ ูู <b>TaskManager</b> .</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุจุช ุนู ูุฐุง ุงููุฌูุน ูู ููุงู ุขุฎุฑ</a> .</i> <br><br>  ุฏุนูุง ูุญุตู ุนูู ุงููุตู ุงูููุงุจู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Network</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> NetworkTypeEnum { None, Mobile, WiFi } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> NetworkTypeEnum NetworkType; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> TaskManager _taskManager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TaskManager(); }</code> </pre><br>  ุญูู ุซุงุจุช <b>NetworkType</b> ูุทููุจ ููุชุทุจูู ูุชููู ูุนูููุงุช ุญูู ููุน ุงุชุตุงู ุงูุฅูุชุฑูุช.  ูู ุญูุซ ุงููุจุฏุฃ ุ ูููู ุชุฎุฒูู ูุฐู ุงููููุฉ ูู ุฃู ููุงู ุ ูุฑุฑุช ุฃูู ูู ุงูููุงู ูู ูุฆุฉ <b>ุงูุดุจูุฉ</b> . <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃุถู ุงููุธููุฉ ุงูุฃุณุงุณูุฉ ูุฅุฑุณุงู ุทูุจ ุฅูู ุงูุฎุงุฏู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WebRequest</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnityWebRequest request, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action&lt;UnityWebRequest&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!Caching.ready) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (progress != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { request.SendWebRequest(); _currentRequests.Add(request); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!request.isDone) { progress(request.downloadProgress); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } progress(<span class="hljs-number"><span class="hljs-number">1f</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.SendWebRequest(); } response(request); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_currentRequests.Contains(request)) { _currentRequests.Remove(request); } request.Dispose(); }</code> </pre><br></div></div><br>  ููุง ุชุฑู ูู ุงูููุฏ ุ ูุฅู ุทุฑููุฉ ูุนุงูุฌุฉ ุฅุชูุงู ุงูุทูุจ ูุฏ ุชุบูุฑุช ููุงุฑูุฉู ุจุงูููุฏ ูู ุงูุฃูุณุงู ุงูุณุงุจูุฉ.  ูุฐุง ูู ุฅุธูุงุฑ ุงูุชูุฏู ูู ุชุญููู ุงูุจูุงูุงุช.  ุฃูุถูุง ุ ูุชู ุชุฎุฒูู ุฌููุน ุงูุทูุจุงุช ุงููุฑุณูุฉ ูู ูุงุฆูุฉ ุจุญูุซ ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ุฅูุบุงุคูุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุถุงูุฉ ูุธููุฉ ุฅูุดุงุก ุงุณุชุนูุงู ูุณุชูุฏ ุฅูู ุงูุงุฑุชุจุงุท ูู AssetBundle:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WebRequestBundle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Hash128 hash, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action&lt;UnityWebRequest&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequestAssetBundle.GetAssetBundle(url, hash, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WebRequest(request, progress, response); }</code> </pre><br></div></div><br>  ูุจุงููุซู ุ ูุชู ุฅูุดุงุก ูุธุงุฆู ูููุณูุฌ ุ ูุงูุตูุช ุ ูุงููุต ุ ููุฌููุนุฉ ุงูุจุงูุช. <br><br>  ุฃูุช ุงูุขู ุจุญุงุฌุฉ ุฅูู ุงูุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ูุฑุณู ุงูุจูุงูุงุช ูู ุฎูุงู ุฃูุฑ ุงููุดุฑ.  ุบุงูุจูุง ูุง ุชุญุชุงุฌ ุฅูู ููู ุดูุก ุฅูู ุงูุฎุงุฏู ุ ูุงุนุชูุงุฏูุง ุนูู ูุง ูู ุจุงูุถุจุท ุ ุงุญุตู ุนูู ุฅุฌุงุจุฉ.  ุฃุถู ุงููุธุงุฆู ุงูููุงุณุจุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฑุณุงู ุงูุจูุงูุงุช ูู ุดูู ูุฌููุนุฉ ูููุฉ ููุชุงุญ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WebRequestPost</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Dictionary&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; formFields, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action&lt;UnityWebRequest&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequest.Post(url, formFields); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WebRequest(request, progress, response); }</code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฑุณุงู ุงูุจูุงูุงุช ูู json:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WebRequestPost</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action&lt;UnityWebRequest&gt; response</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityWebRequest(url, UnityWebRequest.kHttpVerbPOST) { uploadHandler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UploadHandlerRaw(Encoding.UTF8.GetBytes(data)), downloadHandler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DownloadHandlerBuffer() }; request.uploadHandler.contentType = <span class="hljs-string"><span class="hljs-string">"application/json"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WebRequest(request, progress, response); }</code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุณูุถูู ุงูุขู ุงูุฃุณุงููุจ ุงูุนุงูุฉ ุงูุชู ุณูููู ุจุชุญููู ุงูุจูุงูุงุช ุจูุง ุ ูุฎุงุตุฉ AssetBundle</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Request</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Hash128 hash, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action&lt;AssetBundle&gt; response, TaskManager.TaskPriorityEnum priority = TaskManager.TaskPriorityEnum.Default</span></span></span><span class="hljs-function">)</span></span> { _taskManager.AddTask(WebRequestBundle(url, hash, progress, (uwr) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!uwr.isHttpError &amp;&amp; !uwr.isNetworkError) { response(DownloadHandlerAssetBundle.GetContent(uwr)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogWarningFormat(<span class="hljs-string"><span class="hljs-string">"[Netowrk]: error request [{0}]"</span></span>, uwr.error); response(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } }), priority); }</code> </pre><br></div></div><br>  ูุจุงููุซู ุ ูุชู ุฅุถุงูุฉ ุทุฑู ูููููุณ ุ ูููู ุงูุตูุช ุ ูุงููุต ุ ุฅูุฎ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฃุฎูุฑูุง ุ ูุถูู ูุธููุฉ ุงูุญุตูู ุนูู ุญุฌู ุงูููู ุงูุฐู ุชู ุชูุฒููู ููุธููุฉ ุงูุชูุธูู ูุฅููุงู ุฌููุน ุงูุทูุจุงุช ุงูุชู ุชู ุฅูุดุงุคูุง.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Request</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; response, TaskManager.TaskPriorityEnum priority = TaskManager.TaskPriorityEnum.Default</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = UnityWebRequest.Head(url); _taskManager.AddTask(WebRequest(request, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, uwr =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentLength = uwr.GetResponseHeader(<span class="hljs-string"><span class="hljs-string">"Content-Length"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.TryParse(contentLength, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> returnValue)) { response(returnValue); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { response(<span class="hljs-number"><span class="hljs-number">-1</span></span>); } }), priority); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _taskManager.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _currentRequests) { request.Abort(); request.Dispose(); } _currentRequests.Clear(); }</code> </pre><br></div></div><br>  ุนูู ูุฐุง ุ ุงูุชูุงู ูุฏูุฑูุง ููุนูู ูุน ุทูุจุงุช ุงูุดุจูุฉ.  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ููู ูุธุงู ูุฑุนู ููุนุจุฉ ูุชุทูุจ ุงูุนูู ูุน ุงูุฎุงุฏู ุฅูุดุงุก ูุซููุงุช ุฎุงุตุฉ ุจู ูู ุงููุตู. <br><br><h2 style=";text-align:right;direction:rtl">  ููุชุจ ูุฏูุฑ ุชุญููู ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ </h2><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุงููุตู ุงูููุถุญ ุฃุนูุงู ุ ููุนูู ุจุดูู ูุงูู ูุน ุงูุจูุงูุงุช ุงูุฎุงุฑุฌูุฉ ุ ูุญุชุงุฌ ุฅูู ูุฏูุฑ ูููุตู ูู ูููู ุจุชูุฒูู ุงูุจูุงูุงุช ููุท ุ ูููู ุฃูุถูุง ูุฎุทุฑ ุงูุชุทุจูู ุจุจุฏุก ุงูุชุญููู ูุงูุฅููุงู ูุงูุชูุฏู ูููุต ุงููุณุงุญุฉ ุงูุญุฑุฉ ูุฃูุถูุง ุงูุชุนุงูู ูุน ูุดููุงุช ุงูุชุฎุฒูู ุงููุคูุช. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุจุฏุฃ ุงููุตู ุงูููุงุจู ุ ููู ูู ุญุงูุชู ููุฑุฏุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ExternalResourceManager</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> ResourceEnumType { Text, Texture, AssetBundle } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Network _network = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Network(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExternalResourceManager</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR var path = Path.Combine(Directory.GetParent(Application.dataPath).FullName, "_EditorCache"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> var path = Path.Combine(Application.persistentDataPath, "_AppCache"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!System.IO.Directory.Exists(path)) { System.IO.Directory.CreateDirectory(path); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_IOS UnityEngine.iOS.Device.SetNoBackupFlag(path); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> } Caching.currentCacheForWriting = Caching.AddCache(path); } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุชุฑู ุ ูููู ุงููุตูู ุจุชุนููู ุงููุฌูุฏ ููุชุฎุฒูู ุงููุคูุช ุ ุงุนุชูุงุฏูุง ุนูู ูุง ุฅุฐุง ููุง ูู ุงููุญุฑุฑ ุฃู ูุง. </font><font style="vertical-align: inherit;">ุฃูุถูุง ุ ุฃูุดุฃูุง ุญูููุง ุฎุงุตูุง ููุซูู ูุฆุฉ ุงูุดุจูุฉ ุ ูุงูุฐู ูุตููุงู ุณุงุจููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุงูุขู ุจุฅุถุงูุฉ ูุธุงุฆู ูุณุงุนุฏุฉ ููุนูู ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููุฐูู ุชุญุฏูุฏ ุญุฌู ุงูููู ุงูุฐู ุชู ุชูุฒููู ูุงูุชุญูู ูู ุงููุณุงุญุฉ ุงูุฎุงููุฉ ูู. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ุฃุฏูุงู ุ ูุชู ุชูุฏูู ุงูููุฏ ุนูู ูุซุงู ููุนูู ูุน AssetBundle ุ ุจุงููุณุจุฉ ูุจููุฉ ุงูููุงุฑุฏ ุ ูุชู ูู ุดูุก ุนู ุทุฑูู ุงูููุงุณ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุนุฏ ุฑูุฒ ุงููุธููุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClearAssetBundleCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fileName = GetFileNameFromUrl(url); Caching.ClearAllCachedVersions(fileName); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClearAllRequest</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _network.Clear(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AssetBundleIsCached</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; result</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> manifestFileUrl = <span class="hljs-string"><span class="hljs-string">"{0}.manifest"</span></span>.Fmt(url); _network.Request(manifestFileUrl, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> manifest) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hash = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(manifest) ? <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> : GetHashFromManifest(manifest); result(Caching.IsVersionCached(url, hash)); } , TaskManager.TaskPriorityEnum.RunOutQueue); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckFreeSpace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; result</span></span></span><span class="hljs-function">)</span></span> { GetSize(url, lengthInMb =&gt; { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR_WIN var logicalDrive = Path.GetPathRoot(Utils.Path.Cache); var availableSpace = SimpleDiskUtils.DiskUtils.CheckAvailableSpace(logicalDrive); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> UNITY_EDITOR_OSX var availableSpace = SimpleDiskUtils.DiskUtils.CheckAvailableSpace(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> UNITY_IOS var availableSpace = SimpleDiskUtils.DiskUtils.CheckAvailableSpace(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> UNITY_ANDROID var availableSpace = SimpleDiskUtils.DiskUtils.CheckAvailableSpace(true); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> result(availableSpace &gt; lengthInMb, lengthInMb); }); } public void GetSize(string url, Action&lt;float&gt; result) { _network.Request(url, length =&gt; result(length / 1048576f)); } private string GetFileNameFromUrl(string url) { var uri = new Uri(url); var fileName = Path.GetFileNameWithoutExtension(uri.LocalPath); return fileName; } private Hash128 GetHashFromManifest(string manifest) { var hashRow = manifest.Split("\n".ToCharArray())[5]; var hash = Hash128.Parse(hashRow.Split(':')[1].Trim()); return hash; }</span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุฏุนููุง ูุถูู ูุธุงุฆู ุชุญููู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ูุซุงู AssetBundle.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetAssetBundle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url, Action start, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action stop, Action&lt;AssetBundleWrapper&gt; result, TaskManager.TaskPriorityEnum taskPriority = TaskManager.TaskPriorityEnum.Default</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> DONT_USE_SERVER_IN_EDITOR start?.Invoke(); result(new AssetBundleWrapper(url)); stop?.Invoke(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> void loadAssetBundle(Hash128 bundleHash) { start?.Invoke(); _network.Request(url, bundleHash, progress, (AssetBundle value) =&gt; { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(value != null) { _externalResourcesStorage.SetCachedHash(url, bundleHash); } result(new AssetBundleWrapper(value)); stop?.Invoke(); }, taskPriority); }; var manifestFileUrl = "{0}.manifest".Fmt(url); _network.Request(manifestFileUrl, null, (string manifest) =&gt; { var hash = string.IsNullOrEmpty(manifest) ? default : GetHashFromManifest(manifest); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!hash.isValid || hash == default) { hash = _externalResourcesStorage.GetCachedHash(url); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!hash.isValid || hash == default) { result(new AssetBundleWrapper(null)); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { loadAssetBundle(hash); } } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (Caching.IsVersionCached(url, hash)) { loadAssetBundle(hash); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { CheckFreeSpace(url, (spaceAvailable, length) =&gt; { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (spaceAvailable) { loadAssetBundle(hash); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { result(new AssetBundleWrapper(null)); NotEnoughDiskSpace.Call(); } }); } } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐู ูุง ูุญุฏุซ ูู ูุฐู ุงููุธููุฉ: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุงุณุชุฎุฏุงู ุชูุฌูู ุงูุชุฌููุน ุงููุณุจู DONT_USE_SERVER_IN_EDITOR ูุชุนุทูู ุงูุชุญููู ุงููุนูู ููุญุฒู ูู ุงูุฎุงุฏู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎุทูุฉ ุงูุฃููู ูู ุชูุฏูู ุทูุจ ุฅูู ุงูุฎุงุฏู ููุญุตูู ุนูู ููู ุงูุจูุงู ุงูุฎุงุต ุจุงูุจุงูุฉ </font></font></li><li style=";text-align:right;direction:rtl">    -    ,    ,   -   ( <b>_externalResourcesStorage</b> )  ,  ,               (  ,     ),  ,   null  </li><li style=";text-align:right;direction:rtl">     ,     Caching      ,       ,         (   ) </li><li style=";text-align:right;direction:rtl">  ,     ,      ,   ,             -       (   ).   ,              (     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a> ) </li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู ุฃู ูููู ููุงุฐุง ูุชู ุชุฎุฒูู ูููุฉ ุงูุชุฌุฒุฆุฉ ุจุดูู ูููุตู. </font><font style="vertical-align: inherit;">ูุนุฏ ูุฐุง ุถุฑูุฑููุง ููุญุงูุฉ ุงูุชู ูุง ููุฌุฏ ูููุง ุฅูุชุฑูุช ุ ุฃู ุฃู ุงูุงุชุตุงู ุบูุฑ ูุณุชูุฑ ุ ุฃู ูุงู ููุงู ุฎุทุฃ ูุง ูู ุงูุดุจูุฉ ููู ูุชููู ูู ุชูุฒูู ุงูุญุฒูุฉ ูู ุงูุฎุงุฏู ุ ููู ูุฐู ุงูุญุงูุฉ ูุถูู ุชูุฒูู ุงูุญุฒูุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุญุงูุฉ ูุฌูุฏูุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุบุฑุงุฑ ุงูุทุฑููุฉ ุงูููุถุญุฉ ุฃุนูุงู ุ ูู ุงููุฏูุฑ ุ ููููู / ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ูุธุงุฆู ุฃุฎุฑู ููุนูู ูุน ุงูุจูุงูุงุช: GetJson ุ GetTexture ุ GetText ุ GetAudio ุ ุฅูุฎ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎูุฑูุง ุ ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ุทุฑููุฉ ุชุณูุญ ูู ุจุชูุฒูู ูุฌููุนุงุช ุงูููุงุฑุฏ. </font><font style="vertical-align: inherit;">ุณุชููู ูุฐู ุงูุทุฑููุฉ ูููุฏุฉ ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุชูุฒูู ุฃู ุชุญุฏูุซ ุดูุก ูุง ูู ุจุฏุงูุฉ ุงูุชุทุจูู.</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPack</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Dictionary&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, ResourceEnumType&gt; urls, Action start, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; progress, Action stop, Action&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; result</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> commonProgress = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)urls.Count; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentProgress = <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> completeCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">progressHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { currentProgress += <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; progress?.Invoke(currentProgress / commonProgress); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">completeHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { completeCounter++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (completeCounter == urls.Count) { stop?.Invoke(); } }; start?.Invoke(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> urls.Keys) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> resourceType = urls[url]; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (resourceType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ResourceEnumType.Text: { GetText(url, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, progressHandler, completeHandler, (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, isCached) =&gt; { result(url, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, isCached); }); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ResourceEnumType.Texture: { GetTexture(url, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, progressHandler, completeHandler, (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, isCached) =&gt; { result(url, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, isCached); }); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ResourceEnumType.AssetBundle: { GetAssetBundle(url, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, progressHandler, completeHandler, (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) =&gt; { result(url, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }</code> </pre><br></div></div><br>      <b>TaskManager</b> ,      ,    ,     .      . <br><br> <b></b> :  ,    <b>Coroutine</b> ,       <b>async/await</b> ,    ,           (  ). <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎุงุชูุฉ </h2><br>                .       ,        .        ,       (    f2p ),     ,        , ,       ,         . <br><br> <b>,   </b> : <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">assetstore.unity.com/packages/tools/simple-disk-utils-59382</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/post/352296</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/post/282524</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433366/">https://habr.com/ru/post/ar433366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433356/index.html">ุชุนูู ุงูููุงุฌููู ุชุฌุงูุฒ ุงููุตุงุฏูุฉ ุซูุงุฆูุฉ ุนุงูู Yahoo Mail ู Gmail</a></li>
<li><a href="../ar433358/index.html">ุงูุฃููุฉ ูุน ุงุฎุชุจุงุฑ ูู ุจูุซูู. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar433360/index.html">ููุฏ ุญุงูู ุงูุนููุงุก ุงูุชูุจุค ูุชู ุณุชุตุจุญ ุงูุทุงุฆุฑุงุช ุงูููุฑุจุงุฆูุฉ ุญูููุฉ ูุงูุนุฉ</a></li>
<li><a href="../ar433362/index.html">9 ูุจุงุฏุฆ ุงูุฌูุงู ูุงูุจุณุงุทุฉ ูุงูุฑุนุงูุฉ ูู UX</a></li>
<li><a href="../ar433364/index.html">LDraw + ุงููุญุฏุฉ. ููู ููุฏุช ููุบู</a></li>
<li><a href="../ar433368/index.html">ููููุฉ ุชุทุจูู ุชูููุฑ ุงูุจูุงูุฉ ุนูู ุงูุนุงูู: ูุซุงู ุนูู ูููุต ูู ุงูููุน ุงูุซููู</a></li>
<li><a href="../ar433370/index.html">ูุธุฑูุฉ ุงูุชูุงุณู</a></li>
<li><a href="../ar433372/index.html">ุฏุฑุงุฌุฉ ุณูุงุฑุฉ</a></li>
<li><a href="../ar433374/index.html">ุงูุญูููุฉ ูุงููุฉ ุญูู RTOS. ุงููุงุฏุฉ ุฑูู 26. ุงููููุงุช: ุงูุฎุฏูุงุช ุงููุณุงุนุฏุฉ ูููุงูู ุงูุจูุงูุงุช</a></li>
<li><a href="../ar433376/index.html">ูุนูุฏ ูุงุณุงุชุดูุณุชุณ ููุชูููููุฌูุง ุจุงูุทุจุน "ุฃูู ุฃูุธูุฉ ุงูููุจููุชุฑ". ูุญุงุถุฑุฉ 21: ุชุชุจุน ุงูุจูุงูุงุช ุ ุงูุฌุฒุก 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>