<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🏫 🏴󠁧󠁢󠁷󠁬󠁳󠁿 📢 基于研华人机界面的人机界面控制面板 👮 🔎 👨🏽‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您的浏览器不支持HTML5视频。 
 视频：Habr管理面板。 允许您调整业力，等级和禁止用户。 

 TL; DR：在本文中，我将尝试使用Webaccess / HMI Designer工业开发环境和WebOP终端为Habr创建一个喜剧控制面板。 

 人机界面（HMI）是一组用于与受控机器进行人...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>基于研华人机界面的人机界面控制面板</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/advantech/blog/449408/"><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"> 您的浏览器不支持HTML5视频。 <source src="https://zhovner.com/forever/webop_habr_control_audio.mp4" type="video/mp4"></video></div></div></div><br>  <font color="999999">视频：Habr管理面板。</font>  <font color="999999">允许您调整业力，等级和禁止用户。</font> <br><br>  <b>TL; DR：</b>在本文中，我将尝试使用Webaccess / HMI Designer工业开发环境和WebOP终端为Habr创建一个喜剧控制面板。 <br><br> 人机界面（HMI）是一组用于与受控机器进行人机交互的系统。 通常，此术语用于具有操作员和控制面板的工业系统。 <br><br>  <b>WebOP</b>是用于创建人机界面的独立工业终端。 它用于创建生产控制面板，监视系统，控制室，智能家居控制器等。 它支持与工业设备的直接连接，可以作为SCADA系统的一部分工作。 <br><br><a name="habracut"></a><br><h2>  WebOP终端-硬件 </h2><br><br><img align="left" width="300" src="https://habrastorage.org/webt/lx/it/jb/lxitjb27xg6wlrwcfkrintlebdc.jpeg">  WebOP终端是基于ARM处理器的低功耗计算机，在单个情况下具有监视器和触摸屏，旨在通过HMI Designer中创建的图形界面运行程序。 根据型号的不同，端子板上有各种工业接口：RS-232 / 422/485，用于连接到汽车系统的CAN总线，用于连接其他外围设备的USB主机端口，用于将端子连接到计算机的USB客户端端口，音频输入和音频输出，MicroSD读卡器用于非易失性存储器和传输设置。 <br><br> 设备的定位是整体块的预算替代品，用于不需要强大处理器和功能强大的台式机资源的任务。  WebOP可以用作管理和输入/输出数据的独立终端，也可以与其他WebOP配对使用，也可以作为SCADA系统的一部分。 <br><br><img src="https://habrastorage.org/webt/i7/sf/w9/i7sfw9jlwldmdj7laj0aepompxo.png"><br>  <font color="9999999">WebOP终端可以直接连接到工业设备</font> <br><br><h2> 被动冷却和IP66保护 </h2><br> 由于其低散热，某些WebOP型号完全是在没有主动空气冷却的情况下制成的。 这使您可以将设备安装在对噪声水平至关重要的物体上，并减少掉入机箱中的灰尘量。 <br><br> 前面板没有缝隙和接缝，防护等级为IP66，可在压力下直接与水接触。 <br><br><img src="https://habrastorage.org/webt/ec/cf/re/eccfreahsjr_0x2cyz5vkjip6hq.jpeg"><br>  <font color="999999">WOP-3100T终端的后面板</font> <br><br><h2> 非易失性存储器 </h2><br> 为防止WebOP中的数据丢失，有128KB的非易失性存储器，您可以使用与RAM相同的方式来使用。 它可以存储仪表读数和其他关键数据。 发生电源故障时，重启后将保存并恢复数据。 <br><br><h2> 远程更新 </h2><br> 可以通过以太网或串行RS-232 / 485接口远程更新在终端上运行的程序。 这简化了维护，因为无需旁路所有终端进行软件更新。 <br><br><h2>  WebOP模型 </h2><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/kq/rb/z0/kqrbz0qzsc_uvyisefircw_pstc.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2000T系列</a>是在HMI RTOS实时操作系统之上构建的最实惠的设备。 该系列以WebOP- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2040T</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2070T</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2080T</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2100T表示</a> ，屏幕对角线分别为4.3英寸，7英寸，8英寸和10.1英寸。 <br><br><img src="https://habrastorage.org/webt/ga/hd/-n/gahd-n3yvkdcyf_rdruge4nw4hu.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3000T系列</a>是基于Windows CE操作系统的更高级的型号。 它们与2000T系列的不同之处在于大量的硬件接口，并且板上带有CAN接口。 该设备可在扩展温度范围（-20〜60°C）下运行，并具有防静电保护（空气：15KV /触点：8KV）。 该生产线完全符合IEC-61000标准的要求，该标准允许在存在静电放电问题的半导体制造中使用这些设备。 该系列由WebOP- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3070T</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3100T</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3120T型号代表</a> ，屏幕对角线分别为7英寸，10.1英寸和12.1英寸。 <br><br><h2>  WebAccess / HMI Designer开发环境 </h2><br>  WebOP终端开箱即用，只是一台低功耗ARM计算机，您可以在其上运行任何软件，但是此解决方案的重点在于专有的WebAcess / HMI工业接口开发环境。 该系统包含两个组件： <br><br><ul><li>  <b>HMI Designer</b>是用于开发接口和编程逻辑的环境。 它可以在Windows上的计算机程序员下工作。 最终程序被编译成单个文件，并传输到终端以执行运行时。 该程序有俄语版本。 </li><li>  <b>HMI运行时</b> -在终端上运行已编译程序的运行时。 它不仅可以在WebOP终端上运行，而且可以在研华UNO，MIC计算机和普通台式计算机上运行。 有适用于Linux，Windows，Windows CE的运行时版本。 </li></ul><br><img src="https://habrastorage.org/webt/pc/5v/uq/pc5vuqpsp7hrddzwaou74jkfxpg.png"><br><br><h3>  Hello world-创建一个项目 </h3><br> 让我们开始为Habr控制面板创建一个测试界面。 我将在运行WinCE的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WebOP-3100T</a>终端上运行该程序。 首先，在HMI Designer中创建一个新项目。 要在WebOP上运行程序，选择正确的模型很重要，最终文件的格式将取决于此。 在这一步，您还可以选择一个桌面体系结构，然后将在X86运行时下编译生成的文件。 <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/getpro/habr/post_images/848/783/cb5/848783cb5071d58b8324fc92dac68653.png"></div><br>  <font color="99999">创建一个新项目并选择架构</font> <br><br> 选择通信协议，通过该协议将已编译的程序加载到WebOP中。 在此步骤中，您可以选择一个串行接口，或指定终端的IP地址。 <br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/tw/nq/xg/twnqxgcq0jnle801dsknwpxwq1k.png"></div><br><br> 项目创建界面。 左侧是将来程序的组件的树状图。 虽然我们仅对“屏幕”项感兴趣，但是这些是带有GUI元素的直接屏幕，这些元素将显示在终端上。 <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/md/ps/hr/mdpshrpqggd2uwjrojqpvvdzcl8.png"></div><br><br> 首先，使用文本“ Hello World”创建两个屏幕，并使用按钮在两个屏幕之间切换。 为此，添加一个新的屏幕屏幕＃2，并在每个屏幕上添加一个文本元素和两个用于在屏幕之间切换的按钮（屏幕按钮）。 每个按钮均配置为切换到下一个屏幕。 <br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/cf/fi/sv/cffisvhro8epfo5ybycpdcdyxxu.png"></div><br>  <font color="99999">用于设置屏幕切换按钮的界面</font> <br><br>  Hello World程序已准备就绪，现在您可以编译并运行它。 在编译阶段，如果变量或地址指定不正确，则可能会出现错误。 任何错误都被认为是致命的，只有在没有错误的情况下程序才会被编译。 <br> 该环境提供了模拟终端的功能，以便您可以在本地计算机上调试程序。 有两种类型的模拟： <br><br><ul><li>  <b>在线模拟</b> -将涉及程序中指定的所有外部数据源。 这些可以是<abbr title="对象通讯设备">USO</abbr>或通过串行接口或Modbus TCP连接的设备。 </li><li>  <b>离线模拟</b> -不使用外部设备进行模拟。 </li></ul><br> 尽管我们没有外部数据，但是在编译程序之后，我们使用了离线模拟。 最终程序将位于项目文件夹中，名称为<b>ProjectName_Program Name.px3</b> <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/se/cp/kr/secpkrlcsrrk9rsv8bcciynophy.png"></div><br> 仿真中启动的程序可以用鼠标光标控制，其方式与在WebOP终端的触摸屏上相同。 我们看到一切都按预期进行。 太好了 <br> 要将程序下载到物理终端，只需单击“下载”按钮。 但是由于我没有配置终端到开发环境的连接，因此您可以简单地使用USB闪存驱动器或microSD存储卡传输文件。 <br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/de/8z/8n/de8z8nefdsiwaohista1h_m-5ww.gif"></div><br> 程序界面直观，我不会分解每个图形块。 使用类似于Word的程序的任何人都可以清楚地创建背景，形状，文本。 创建图形界面不需要编程技能，所有元素都可以通过在表单上拖放来添加。 <br><br><h2> 处理内存 </h2><br> 现在我们已经能够创建图形元素，我们将学习使用动态内容和脚本语言。 创建一个条形图，显示变量<b>U $ 100中的数据</b> 。 在图表设置中，选择数据类型：16位整数，以及图表值的范围：从0到10。 <br><br><img src="https://habrastorage.org/webt/s9/mk/md/s9mkmddeqv7vmsey6l2wvmtffuy.png"><br><br> 该程序支持使用三种语言编写脚本：VBScript，JavaScript和其自己的语言。 我将使用第三个选项，因为为此，在文档中有示例，并在编辑器中提供了有关语法的自动帮助。 <br><br> 添加一个新的宏： <br><br><img width="250" src="https://habrastorage.org/webt/87/bg/9b/87bg9bpo3zqjbcl6wq3rwpf2tau.png"><br><br> 我们将编写一个简单的代码来逐步更改变量中的数据，该变量可以在图中跟踪。 我们将变量添加10，如果变量大于100，则添加零。 <br><br><pre><code class="plaintext hljs">$U100=$U100+10 IF $U100&gt;100 $U100=0 ENDIF</code> </pre> <br> 要循环执行该脚本，请将其安装在“常规设置”设置中作为“主宏”，执行间隔为250ms。 <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/gm/cs/lu/gmcslupd_exzgpl5bjj6omaq6f4.png"></div><br> 在模拟器中编译并运行程序： <br><br><img src="https://habrastorage.org/webt/i9/cv/d8/i9cvd8ew12qprxiate32jyydyew.gif"><br><br> 在这一阶段，我们学习了如何操作内存中的数据并以可视形式显示它们。 这足以创建一个简单的监视系统，从外部设备（传感器，控制器）接收数据并将其写入内存。 在HMI Designer中，可以使用各种数据显示单位：带有箭头的圆形刻度盘，各种图表，图形。 使用JavaScript脚本，您可以通过HTTP从外部源实现数据加载。 <br><br><h2> 哈伯控制面板 </h2><br> 使用获得的技能，我们将在Habrom的管理面板中创建一个漫画界面。 <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/jn/j2/d4/jnj2d46lsqgprhyrfbqoavk65my.jpeg"></div><br><br> 我们的遥控器必须能够： <br><br><ul><li> 切换用户个人资料 </li><li> 存储业力和排名数据 </li><li> 使用滑块更改业力和等级值 </li><li> 当您单击禁止按钮时，个人资料应标记为已禁止，个人资料图片应更改为划线 </li></ul><br> 每个配置文件将显示在单独的页面上，因此我们将为每个配置文件创建一个页面。 我们将业力和等级存储在内存中的局部变量中，当程序启动时，将使用Setup Macro对其进行初始化。 <br><br> <a href=""><img src="https://habrastorage.org/webt/ek/rh/ic/ekrhicsqjotcanzgpq0og0svhxu.png"></a> <br>  <font color="999999">可点击的图片</font> <br><br><h3> 调整业力和等级 </h3><br> 要调整业力，我们将使用滑块（Slid Switch）。 作为记录地址，我们指定在设置宏中初始化的变量。 我们将滑块的值范围限制为0到1500。现在，当滑块移动时，新数据将被写入内存。 在这种情况下，滑块的初始状态将对应于存储器中变量的值。 <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/e2/cw/dc/e2cwdcmgzpygxrylqkcmjv1jpog.png"></div><br> 要显示业力和等级的数值，我们将使用数字显示元素。 其操作原理与Hello World程序示例中的图相似；我们仅在Monitor Address中指示变量的地址。 <br><br><h3> 禁止按钮 </h3><br> 禁止按钮是使用Toggle Switch元素实现的。 数据存储的原理与上面的示例相似。 在设置中，可以根据按钮的状态选择不同的文本，颜色或图像。 <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/i1/zs/5t/i1zs5toqcuyiqz_othub0ls0wk4.png"></div><br> 在按下按钮的那一刻，化身必须用红色划掉。 使用图片显示单元很容易实现。 它允许您指定与“切换开关”按钮的状态相关的多个图像。 为此，为该块提供与具有按钮的块相同的地址，以及状态数。 配置类似的图片，头像下方带有铭牌。 <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/sw/6v/q8/sw6vq8bdfx1ucdntuquowja93-0.gif"></div><br><h2> 结论 </h2><br> 总的来说，我喜欢这个产品。 以前，我曾使用Android平板电脑完成类似任务，但是为它开发界面要复杂得多，并且浏览器API不允许完全访问外围设备。 一个WebOP终端可以替换Android平板电脑，计算机和控制器中的捆绑软件。 <br><br> 尽管具有过时的设计，HMI Designer还是相当先进的。 如果没有特殊的编程技能，则可以快速勾勒出工作界面。 本文没有考虑所有的图形块，其中有很多：动画管道，圆柱体，图形，切换开关。 它开箱即用，支持许多流行的工业控制器，包含数据库连接器。 <br><br><h2> 参考文献 </h2><br>  WebAccess / HMI Designer和Runtime开发环境可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>下载 <br><br>  → <a href="">Habrom控制面板项目的来源</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN449408/">https://habr.com/ru/post/zh-CN449408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN449386/index.html">夏季居民的互联网。 我们在4G网络中获得最高速度。 第1部分。选择正确的路由器</a></li>
<li><a href="../zh-CN449388/index.html">打印...激情？</a></li>
<li><a href="../zh-CN449390/index.html">基准测试</a></li>
<li><a href="../zh-CN449392/index.html">使用Python按天从Yandex.Direct API获取所有客户端的统计信息</a></li>
<li><a href="../zh-CN449398/index.html">Circles.is的Mikhail Larionov：关于Facebook上的职业，创业精神，社区建设和产品思维</a></li>
<li><a href="../zh-CN449410/index.html">采访：斯威夫特。 问与答</a></li>
<li><a href="../zh-CN449412/index.html">消费者社区为破坏开源软件所做的工作</a></li>
<li><a href="../zh-CN449414/index.html">阴道根部微生物</a></li>
<li><a href="../zh-CN449418/index.html">使用自定义CSS属性创建窗口小部件：将自定义链接嵌入到NHL网站</a></li>
<li><a href="../zh-CN449422/index.html">报警！ 警报！：鱼如何警告亲戚危险</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>