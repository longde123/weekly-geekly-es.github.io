<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆕 🙆🏿 🏔️ «J'étais très négatif envers les coroutines»: Artyom Zinnatullin sur le développement Android 👈🏻 🤧 👋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parmi les développeurs Android, Artyom Zinnatullin est tellement respecté que vous pouvez composer un analogue des «faits sur Chuck Norris» à son suje...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>«J'étais très négatif envers les coroutines»: Artyom Zinnatullin sur le développement Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/437948/"><img src="https://habrastorage.org/webt/jw/rj/ax/jwrjax9dcgvxn3uvakuy9veflvu.jpeg"><br><br>  Parmi les développeurs Android, <b>Artyom Zinnatullin</b> est tellement respecté que vous pouvez composer un analogue des «faits sur Chuck Norris» à son sujet - quelque chose comme ceci: <br><br><ul><li>  Artyom est si sévère que quand il le voit, le github lui-même devient vert (lequel d'entre nous peut se vanter d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un tel</a> calendrier de contributions?) </li><li>  Artyom est si dur que pour lui, Git est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un messager</a> . </li><li>  Artyom est si sévère que dans son contexte d'applications est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">podcast</a> . </li></ul><br>  Lorsque nous l'avons interviewé lors de notre conférence Mobius, il était destiné à une diffusion en ligne.  Mais après avoir vu comment ils s'y réfèrent dans le chat Android, nous avons décidé que cela pourrait également intéresser beaucoup de gens sur Habré, et avons fait une version texte pour vous (nous joignons également l'enregistrement vidéo). <br><br>  Comment vivre avec un projet sur un million de lignes de code?  Quel est l'inconvénient de la corotine Kotlin?  Quel est le problème avec Google?  En quoi le développement à San Francisco est-il différent du russe?  De quoi parlait Mobius?  Sous la coupe - à propos de tout cela. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3VzT_IFtf5Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Evgeny Trifonov</b> : À ce Mobius, j'ai raté votre discours «Android builds at Lyft», mais après cela, j'ai vu une foule de personnes souhaitant poser une question dans la zone de discussion.  Et je voulais clarifier: mais après tout, la plupart des téléspectateurs ne travaillent pas dans un projet géant comme Lyft, cette expérience était-elle pertinente pour eux de toute façon? <br><br>  <b>Artyom</b> : C'est une chose intéressante.  Les grandes lignes du rapport dans ma tête et la façon dont je l'ai finalement mis en œuvre sont très différentes grâce à votre comité de programme chic. <br><br>  Au départ, j'allais vous dire comment tout a commencé chez Lyft, pourquoi nous sommes arrivés à certaines solutions techniques.  Il a parlé à Sergey Boishtyan du comité de programme pendant deux heures, il a écouté et a dit: "Cool, bien sûr, mais vous avez fait un discours."  Et à la fin, j'ai réalisé qu'un tel rapport, bien sûr, est intéressant à écouter, mais il n'est vraiment pertinent pour personne. <br><br>  Et puis je l'ai refait, en mettant l'accent sur les approches d'ingénierie fondamentales pour le choix des systèmes d'assemblage, d'autres systèmes.  Je n'avais pas pour objectif de dire quels outils nous utilisons spécifiquement.  Je ne veux pas que quelqu'un les prenne et commence à les utiliser aveuglément, puis écris-moi de formidables lettres qui ne fonctionnent pas comme je te l'ai dit.  Je voulais transmettre exactement les pratiques d'ingénierie sur la façon de faire un choix et ce qui est important à mon avis (naturellement, subjectif).  Par conséquent, j'espère qu'à la fin l'expérience sera pertinente pour plus de gens, et pas seulement "le mec de Lyft est sorti et a dit quelque chose". <br><br>  <b>Oleg <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">olegchir</a> Chirukhin</b> : Existe-t-il des choix Lyft inhabituels difficiles à faire pour les autres? <br><br>  <b>Artyom</b> : Oui, bien sûr.  Nous avons deux systèmes de construction dans le projet en même temps, je ne recommande absolument personne <i>(rires)</i> . <br><br>  C'est très douloureux à entretenir: on poursuit constamment deux oiseaux avec une pierre, dans les deux, quelque chose ne marche pas jusqu'au bout.  Mais c'est notre état actuel, donc historiquement, parce qu'un système de construction a commencé à se taire sur une partie des tâches, nous avons dû en démarrer un deuxième.  J'ai expliqué comment éviter cela et migrer correctement vers l'un d'eux. <br><br>  <b>Oleg</b> : Et quel genre de systèmes de construction? <br><br>  <b>Artyom</b> : Nous utilisons Gradle et Buck, et j'ai parlé de comment venir à Bazel depuis Google. <br><br>  <b>Oleg</b> : C'est une sorte de mouvement vers le mal: de la jolie Gradle à Bazel, dans laquelle il n'y a même pas de dépendances normales. <br><br>  <b>Artyom</b> : Maintenant, il y en a plus ou moins.  Eh bien, oui, bien sûr, il y a des compromis, et, bien sûr, Gradle a ses mérites.  Tout dépend du type de projet.  Certains Gradle conviendront mieux que Buck et Bazel, car ils ont des points fondamentaux qu'ils ne collecteront pas progressivement dans le même module, mais Gradle le sera, et pour beaucoup, c'est très important.  Et c'est cool que Gradle puisse faire ça. <br><br>  Une autre chose est que lorsque vous ajoutez des modules - plus, plus de modules, huit cent, mille - Gradle est tellement repensé qu'il ralentit linéairement l'assemblage à certains endroits.  Mais il me semble que Gradle peut arranger tout cela si la communauté fait pression sur eux - ce que je fais peut-être.  Voyons voir.  <i>(note: quelques jours après cette interview, Artyom a écrit un long <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">post</a> sur les problèmes de Gradle)</i> <br><br>  <b>Oleg:</b> Autrement dit, Bazel uniquement parce que je veux prendre en charge un grand nombre de modules? <br><br>  <b>Artyom</b> : Disons simplement que dans notre cas, nous ne le «voulons» pas, mais la division du projet en modules permet à notre entreprise de progresser plus rapidement.  Fondamentalement, si je comprends bien, il s'agit d'isolement afin qu'il ne fonctionne pas sur les spaghettis, qui est alors difficile à entretenir.  Les modules donnent plus de contrôle sur les parties du code qui interagissent avec lesquelles.  Nous avons près d'un million de lignes de code.  Si c'était dans un module, je devrais spaghetti.  Parce qu'en plus du langage - Java, Kotlin - il faudra liquider quelque chose pour interdire les appels entre packages, entre lesquels personne ne les attendait.  De plus, la question se posera que Gradle ne supprimera pas autant de code dans un module.  Il ne le collectera pas en parallèle, l'assemblera progressivement à l'intérieur du module. <br><br>  Chaque solution a des compromis.  Dans notre cas, il me semble que c'est la bonne solution, mais il y a un problème: nous prenons actuellement en charge deux systèmes de build. <br><br>  <b>Oleg</b> : Et quoi de mieux pour des centaines de modules: monorepo ou plusieurs référentiels? <br><br>  <b>Artyom</b> : C'est un point très sensible.  Un référentiel est probablement meilleur du point de vue du fait que vous n'avez pas à penser au versioning et il n'y a pas cet enfer de dépendance lorsque vous allez cloner une douzaine de référentiels pour effectuer un changement, puis ouvrir une demande de tirage et dix autres après.  La «friction» est supprimée du système et les gens n'ont pas peur de changer le code.  Pour eux, une atomicité de changements se produit: tout est regroupé en un seul projet, et les modifications d'un module sont automatiquement transférées à d'autres sans leur consentement explicite.  Dans le même temps, toutes les vérifications que vous avez écrites automatiquement dans CI seront exécutées et vérifieront que le code est compilé, testé et tout cela. <br><br>  <b>Oleg</b> : Et si vous n'arrivez pas au fait que vous, comme dans certains Chrome, les branches vont changer pendant deux minutes, pendant que vous buvez du thé? <br><br>  <b>Artyom</b> : Oui, bien sûr, il y a une possibilité.  Mais ici, probablement, la question est déjà dans la taille du produit: Chrome doit-il contenir autant de code?  Peut-être vaut-il la peine de mettre en évidence certaines parties dans des instruments distincts, qu'elles resserrent périodiquement lorsque des changements majeurs se produisent dans ces instruments?  C'est probablement une question pour l'organisation du projet.  Un bel exemple, au fait.  J'en ai un similaire: correspondance avec des mecs de Yandex.Browser, où ils ont aussi de gros plugs. <br><br>  Chrome peut être divisé en plusieurs composants, et si vous prenez du V8 - je ne suis pas un grand spécialiste, mais pour autant que je sache, ce pourrait être un projet distinct en général, non?  Et pourquoi, alors, l'interface graphique devrait-elle connaître le moteur, le remonter à chaque fois et penser au code source se trouvant quelque part à proximité?  Soit dit en passant, Bazel le soutient également. <br><br>  En général, maintenant tous les grands systèmes de construction - ce Gradle, ce Buck, ce Bazel - prennent en charge une chose telle que les constructions composites lorsque vous vous référez, par exemple, à un autre assemblage Bazel.  C'est une situation délicate, mais, néanmoins, cela fonctionne, cela vous permet de supprimer une partie des fichiers du référentiel, de réduire la taille.  L'IDE, par exemple, va devenir fou pour indexer tous ces fichiers, donc je veux les séparer en quelque sorte du composant général du projet. <br><br>  Mais nous en sommes loin.  Il me semble que nous pouvons tranquillement calculer encore cinq ans.  Il est peu probable que nous nous heurtions encore à un paiement de deux minutes.  Nous n'avons pas beaucoup de monde. <br><br>  <b>Eugene</b> : Lyft a-t-il toujours ses propres spécificités, en plus de deux systèmes de construction? <br><br>  <b>Artyom</b> : Oui, il y a quelques histoires atypiques là-bas.  Il se trouve que les personnes qui sont venues dans l'entreprise (de Google, Facebook, partout dans le monde) détestent les mono-référentiels.  En conséquence, chez Lyft, nous avons trois mono-référentiels: Android, iOS et L5 (ce sont nos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voitures autonomes</a> ). <br><br>  Et tout le reste représente plus de 1 500 dépôts git: pour tous les microservices, pour toutes les bibliothèques séparément.  C'est historiquement le cas.  Cela a son propre prix énorme que nous payons: pousser les changements à travers eux est vraiment difficile.  D'un autre côté, lorsque vous travaillez avec chacun d'eux, vous avez un clone git instantané, un push git instantané, tout est très rapide, les index IDE par seconde.  Je peux dire que c'est vraiment une partie intéressante.  Des mecs de San Francisco, je m'attendrais à un seul référentiel. <br><br>  <b>Oleg</b> : Et lorsque l'un de ces référentiels séparés est mis à jour - l'API change, par exemple - comment ce changement s'applique-t-il au reste de l'entreprise? <br><br>  <b>Artyom:</b> Ça fait mal.  <i>(rires)</i> Eh bien, je ne suis pas un développeur de backend dans la mesure où je n'écris pas de backends de fonctionnalités, j'écris des backends d'infrastructure - ils sont généralement assez autonomes à cet égard. <br><br>  En règle générale, ce n'est qu'un tas de rassemblements, d'interactions croisées, puis de planification. <br><br>  <b>Oleg: Les</b> rassemblements font donc partie du système d'assemblage?  (rire) <br><br>  <b>Artyom</b> : Oui, nous devons d'abord assembler un rallye, puis assembler un référentiel.  De plus, malheureusement, historiquement, nous avons beaucoup de ces microservices - c'est Python, qui a aussi ses propres blagues. <br><br>  <b>Oleg</b> : Certains n'aiment pas Python. <br><br>  <b>Artyom</b> : Plutôt détester pour la frappe dynamique.  Python, pas Python - cela ne fait aucune différence, mais la saisie dynamique est une chose douloureuse. <br><br><img src="https://habrastorage.org/webt/u9/sf/06/u9sf06jtant0vryrcaqy1xpx1uo.jpeg"><br><br>  <b>Eugene</b> : Et ça a glissé «pour une entreprise de San Francisco», et il est curieux de se poser la question: mais en termes de développement, les entreprises de San Francisco diffèrent des entreprises de Russie, y a-t-il une différence notable? <br><br>  <b>Artyom</b> : Une très grande différence.  Je ne suis pas un grand fan de le classer comme ça, mais il me semble que voici une école d'ingénieurs plus correcte. <br><br>  <b>Oleg</b> : Ici - où est-il? <br><br>  <b>Artyom</b> : En Russie, dans les pays de l'ex-URSS.  Les gens accordent plus d'attention aux aspects techniques du fonctionnement des composants de leur système.  Et aux États-Unis, il arrive souvent que certaines bibliothèques résolvent un problème, et les gens ne voient même pas comment il est mis en œuvre.  En règle générale, ils ne se soucient absolument pas que cela ralentisse ou qu'ils l'utilisent incorrectement. <br><br>  J'y interviewerai beaucoup de gens, car cela fait partie du travail, et le niveau général de connaissances, peut-être, est encore plus bas.  Il y a quelque chose à changer.  Chaque fois qu'une personne vient d'Europe de l'Est, cela devient plus intéressant lors des entretiens, car les gens n'ont pas peur de résister, de discuter quelque part.  Bien que très souvent, les candidats américains ne répondent pas du tout aux questions ou répondent «Je ne me souviens pas de la dernière fois où je l'ai utilisé».  Pour des questions comme "Comment fonctionne une requête HTTP?"  ou "Quel format de données choisirez-vous?"  ils ne peuvent pas donner de réponses d'ingénierie normales, mais disent: "Eh bien, je l'ai utilisé pendant les cinq dernières années."  Cool, bien sûr, mais le seigneur ne tire pas. <br><br>  D'un autre côté, il y a des projets qui ont mis des années à se comparer à ce que nous faisons ici.  Les gens fabriquent plus de produits de masse et il y a simplement plus d'échelle.  Par exemple, Chrome ou Uber - ils ont déjà plus d'un millier de modules là-bas.  Ce n'est que l'ampleur des problèmes.  Disons dans Uber moins de trois cents développeurs Android.  La question se pose: pourquoi?  <i>(rires)</i> Mais, néanmoins, ils ont réussi à faire fonctionner ce colosse, à le relâcher constamment.  Je dirais que de tels problèmes sont moins fréquemment résolus ici. <br><br>  Ici, Yandex est un bon exemple.  J'ai un ami sur Yandex.Maps: dix personnes font une application Android.  Dans Google, une centaine sont probablement assis.  Et en même temps, Yandex.Mart a plus de fonctionnalités.  C'est la différence, à mon avis. <br><br>  <b>Eugene</b> : De plus, la vallée est également associée aux start-ups, et elles ont une approche «bouger vite et casser les choses», et il semble que cela devrait également affecter le développement: vivre à la pointe du progrès, utiliser les dernières.  Est-ce vrai? <br><br>  <b>Artyom</b> : Je ne travaillais pas dans des startups, Lyft est difficile d'appeler cela: il y a déjà trois mille trois personnes, quelque part plus d'un millier d'entre elles sont des ingénieurs.  Autrement dit, c'est une entreprise déjà formée. <br><br>  C'est une technologie de pointe qui est rarement utilisée.  Si la technologie est en vogue, alors oui.  Si la technologie est de niche, mais cool, très souvent non.  Jusqu'à ce que toutes les conférences en parlent, très peu de gens l'utiliseront. <br><br>  Mais en même temps, ce que j'aime vraiment (à San Francisco et en partie dans la vallée) - beaucoup de problèmes sont résolus du fait que les entreprises sont physiquement proches.  Très souvent, vous écrivez à quelqu'un dans une salle de discussion: «Allons déjeuner ensemble chez nous ou dans votre bureau et décidons, nous avancerons une question», puis une fois - un projet open source ou une demande de pull apparaît dans un autre projet, quelque chose fixe. <br><br>  Ce qui est intéressant: les gens discutent souvent de choses qui ne devraient en fait pas être discutées sur la NDA.  Mais c'est ainsi que toute la vallée se déplace, à la fin tout le monde comprend où va le reste et toute l'industrie va de pair.  Disons que les mobilisateurs de Lyft et Uber parlent constamment de choses techniques, car nous utilisons l'open source d'Uber.  Et, bien sûr, il y a directement des experts hardcore dans certaines technologies.  C'est aussi cool: vous pouvez simplement croiser avec eux. <br><br>  J'adore ça, et cela ne m'a pas suffi dans certaines villes où j'habitais.  Ici, à Saint-Pétersbourg, il y avait un groupe d'utilisateurs Java très cool (je ne sais pas comment c'est maintenant): vous venez après le travail, et Shipilev sort votre cerveau, et quelque chose est bien! <br><br>  Et là, il apparaît à nouveau: par exemple, il a également son propre groupe d'utilisateurs Java, et il y a souvent des mecs, par exemple, d'Oracle, qui ont filmé un nouveau Reactive JDBC.  Et vous vous asseyez, argumentez-vous, parce qu'un chef de projet Reactor ou un chef réactif au printemps est assis au même endroit, une discussion chaude est en cours, et c'est cool. <br><br>  <b>Oleg</b> : Je vais poser une question sur autre chose: j'ai regardé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le référentiel</a> Mainframer, et Rust y est utilisé.  Pourquoi tout cela n'est-il pas écrit sur la bienheureuse Javka, mais sur une sorte de rouille? <br><br>  <b>Artyom</b> : Récemment, je suis allé du côté du fait que le programme devrait avoir une quantité minimale de ressources.  Autrement dit, je veux être très proche de la façon dont le fer digère les octets.  Et en Java, beaucoup de choses se passent autour (je ne parle même pas de la collecte des ordures), c'est-à-dire JIT et tout ça.  J'aime vraiment que Java se dirige maintenant vers le fait qu'il y aura également une compilation à l'avance.  Il me semble que ce sera très cool, par exemple, de commencer le lancement d'un microservice en téléchargeant depuis le cache sa compilation anticipée, qui s'est produite à l'origine sur d'autres machines, et en la démarrant très rapidement, sans s'échauffer.  C'est cool, mais Java a un prix.  Je ne peux pas simplement demander aux personnes qui construisent un projet iOS d’avoir Java sur leur système. <br><br>  Mainframer a été à l'origine écrit dans le dialecte Bash.  Mais je voulais le réécrire dans un langage système pour obtenir un multithreading normal, la possibilité d'écrire des tests unitaires normaux, et pas seulement des tests d'intégration en plus de l'utilitaire ... <br><br>  <b>Oleg</b> : Et on pourrait prendre, par exemple, Python. <br><br>  <b>Artyom</b> : Oui.  Mais alors la question se poserait avec le fait que, d'une part, il s'agit de typage dynamique, et d'autre part ... <br><br>  <b>Oleg</b> : Donc dans Bash aussi, la frappe dynamique. <br><br>  <b>Artyom</b> : Je voulais donc le réécrire.  Et en plus de cela, il y a un problème avec le fait que Python est maintenant deux: sur macOS, par défaut le deuxième, et presque tout sur Linux est maintenant le troisième.  Il y a toutes sortes de blagues.  Si j'ai besoin d'une sorte de dépendance pour me lier, je demanderai aux gens d'exécuter pip?  Ou vais-je devoir la frapper? <br><br>  Je voulais prendre un langage système qui ne nécessite aucune dépendance, afin que je puisse mettre un binaire qui pèsera, conditionnellement, moins d'un mégaoctet, et fonctionnera avec un minimum de surcharge. <br><br>  <b>Oleg</b> : Vous pourriez prendre Golang, au moins il y a un ramasse-miettes. <br><br>  <b>Artyom</b> : C'est exactement pourquoi je voulais essayer Rust.  Et ça a marché.  De plus, Golang est un peu triste avec les génériques. <br><br>  <b>Eugene</b> : Depuis qu'ils ont commencé à discuter des langages ... Dans le contexte du développement Android, la question "Kotlin ou Java" est déjà fatiguée, mais je vais quand même la poser afin de passer à la question suivante. <br><br>  <b>Artyom</b> : Eh bien, Kotlin, bien sûr. <br><br>  <b>Eugene</b> : Maintenant, la question qui intéresse vraiment.  Récemment, à Kotlin, les coroutines sont devenues stables et les voix «Hourra, éloignons-nous de RxJava» se font entendre.  Par conséquent, quand je vois une personne en face de moi qui est très proche de RxJava, je veux immédiatement lui demander son avis sur les coroutines. <br><br>  <b>Artyom</b> : J'étais très négatif envers les coroutines.  En principe, il est toujours majoritairement négatif, mais cela a en partie changé la très longue conversation avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Roma Elizarov</a> , qui y travaille. <br><br>  En tant qu'utilisateur de programmes, je veux qu'ils soient aussi non bloquants que possible, pour utiliser les ressources aussi correctement que possible.  J'entends par là à la fois le parallélisme et le fait qu'ils utilisent les bonnes API du système d'exploitation pour l'accès non bloquant au réseau ou aux fichiers - il y a beaucoup de problèmes avec cela dans les systèmes d'exploitation, mais, néanmoins, il existe de telles API.  Qu'est-ce que cela résout exactement?  En tant qu'utilisateur, cela n'a pas d'importance pour moi - si seulement les développeurs pouvaient résoudre ce problème d'une manière qui les rendait confortables.  Je n'ai pas de gros problèmes avec ça.  Et c'est la vision de Roma Elizarov.  Après cette conversation, je l'ai en quelque sorte laissé tomber. <br><br>  Avant cela, comme mon ami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Arthur Dremov</a> , cela me semblait un pas en arrière après plusieurs années d'utilisation de Java en production: le code redevient impératif, impur, il perd la compréhension du pipeline, il redevient un gâchis, que le compilateur transforme pour vous en un gâchis asynchrone. <br><br>  Je n'utilise pas de coroutines, mais tous les exemples que j'observe maintenant sont passés à une approche structurée, quand vous ne voyez même pas quel morceau de code de cette coroutine.  Pour être honnête, j’ai très peur de le regarder.  Parce que j'ouvre la demande de pull sur GitHub, certaines méthodes sont appelées pour télécharger l'image et le profil, l'une d'entre elles va au réseau, et l'autre va au SQLite local, et ici le SQLite local peut facilement être bloquant.  Je ne vois pas cela dans le code, car les coroutines sont conçues pour que vous ne les voyiez pas.  C'est peut-être bien, mais pour moi, c'est toujours un inconvénient de la conception, car dans les approches Rx, c'est très évident: comprenez-vous si cela fait partie du pipeline synchrone ou non. <br><br>  C'est peut-être ma seule plainte aux coroutines: je veux voir quand mon asynchronie se produit, et quand ce n'est pas le cas.  Idéalement, je veux que les gens écrivent du code plus fonctionnel quand il y a de petites pièces réutilisables, ou du moins testables qui se combinent avec d'autres.  Et nous revenons au fait que tout cela est intégré dans la logique, puis le compilateur le retourne simplement. <br><br>  <b>Oleg</b> : Permettez-moi de vous opposer un peu.  Le code hérité est bien plus que nouveau.  Et si nous prenons des choses comme travailler avec le réseau, travailler avec des fichiers, etc., personne ne réécrira rapidement tout cela, par exemple, en utilisant RxJava.  Et si nous avons des routines automatiques, nous pouvons, par exemple, suivre tous les appels système, les envelopper automatiquement et les envoyer à la serrure pour le stationnement. <br><br>  <b>Artyom</b> : Vrai, dans tous les cas, vous devrez appeler des fonctions à partir du contexte de la corutine.  Mais c'est une pensée intéressante, oui. <br><br>  <b>Oleg</b> : Peut-être qu'ils devraient être combinés d'une manière ou d'une autre?  L'API de niveau supérieur sera sur RxJava et l'API de bas niveau sur les coroutines. <br><br>  <b>Artyom</b> : Oui, il y a maintenant de tels changements.  Mais alors la question se pose, car pour le moment, RxJava peut faire tout ce que font les coroutines, et les coroutines ne peuvent pas faire tout ce que fait RxJava.       ,    — .  ,  ,    ,     -  Rx  Kotlin.    .     forEach    - map,        . , ,   Java-      ,     .         . <br><br>   ,   Kotlin  —  .   ,    Go  ,    ,   API,   ,   :       .   , ,  ,    ,      legacy,   ,   .  ,      Java   Kotlin —  legacy,     ,     .   ,  .   - ,  . <br><br> ,      ,     .   ,      ,    ,      —    .       . <br><br><img src="https://habrastorage.org/webt/1u/1f/ef/1u1fefbs3dvxrvd8brcinbvw3ue.jpeg"><br><br> <b></b> :   ,  .   ,    ,  :       Android-? ,         . <br><br> <b></b> :  …  .   ,     Android-   .     ,        .    ,       :    ,    .    RxJava    ,        :   -          .    ,  ,  . <br><br>  ,     iOS.    ,     Lyft iOS-      dependency injection  RxSwift.    2019-.    iOS-,     ,    , clean,   .   , Android    —     . <br><br> , ,     —    Google.      «  opinionated,  ,  :   ,     ,    ».         — ,   , . <br><br>    ,     «RxJava —  ,  ...»      : «,    LiveData».  ,  —       RxJava,  ,   . ,   ,  Google ,    . <br><br>     : «,  Google  MVVM».       ,   MVVM     ,   ,    ,  MVVM  .       ,    Google. <br><br>  ,     ,   scope .          . <br><br>        : , Room        .  - Architecture Components —    ,         .  Google   ,      ?     . <br><br> <b>:</b> ,          . ,      .   ! <br><br> <b>:</b>   . <br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le prochain </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mobius</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se tiendra </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à Saint-Pétersbourg les 22 et 23 mai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Maintenant, son programme n'a pas encore été annoncé, mais c'est le moment le plus rentable pour acheter un billet: le 1er février, le prix des billets va augmenter. </font><font style="vertical-align: inherit;">Et puis, comme le programme n'est pas encore terminé, le moment est également propice pour y entrer nous-mêmes: nous sommes en plein essor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acceptant les candidatures</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aux rapports. </font><font style="vertical-align: inherit;">Toutes les informations sur la conférence et les billets sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437948/">https://habr.com/ru/post/fr437948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437938/index.html">Douze façons de comprendre que vous êtes en réalité virtuelle</a></li>
<li><a href="../fr437940/index.html">Un autre GitHub: des référentiels sur la science des données, la visualisation des données et le Deep Learning</a></li>
<li><a href="../fr437942/index.html">Quoi de neuf dans Swift 5?</a></li>
<li><a href="../fr437944/index.html">Mathématiques de la peau: croissance de l'épiderme basée sur la modélisation mathématique</a></li>
<li><a href="../fr437946/index.html">Un compte Admin@kremlin.ru trouvé dans des milliers de bases de données MongoDB</a></li>
<li><a href="../fr437950/index.html">"Préparez" correctement le prototype. Technologies de prototypage de cas</a></li>
<li><a href="../fr437952/index.html">Comment tester dans AutoCar: MindMap, analyse de code statique et MockServer</a></li>
<li><a href="../fr437956/index.html">"Implémentation de Splunk 7" - le premier livre sur Splunk en russe</a></li>
<li><a href="../fr437958/index.html">Autorisation en EIES sur un serveur terminal avec signature numérique conformément à GOST-2012</a></li>
<li><a href="../fr437960/index.html">Conseils du directeur technique d'une entreprise informatique aux diplômés du bootcamp</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>