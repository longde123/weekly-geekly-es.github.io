<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíö üé© üìã Inside Quake: Sichtbare Oberfl√§chen definieren ü§≥ üîΩ üç∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Veteran der dreidimensionalen Grafikprogrammierung, Michael Abrash, spricht am Beispiel der Entwicklung des ersten Quake √ºber die Notwendigkeit kr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inside Quake: Sichtbare Oberfl√§chen definieren</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435760/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/tr/43/0h/tr430h9jofgiadwjb0nh59bltoc.png" alt="Bild"></div><br>  <i>Der Veteran der dreidimensionalen Grafikprogrammierung, Michael Abrash, spricht am Beispiel der Entwicklung des ersten Quake √ºber die Notwendigkeit kreativen Denkens bei der Programmierung.</i> <br><br>  Vor vielen Jahren arbeitete ich f√ºr die inzwischen aufgel√∂ste Videoadapterfirma Video Seven.  Dort half ich bei der Entwicklung eines VGA-Klons.  Mein Kollege Tom Wilson, der viele Monate rund um die Uhr an der Entwicklung des Video Seven VGA-Chips arbeitete, versuchte, VGA so schnell wie m√∂glich zu machen, und war sich sicher, dass seine Leistung fast maximal optimiert wurde.  Als Tom jedoch bereits den letzten Schliff f√ºr das Chipdesign gab, h√∂rten wir Ger√ºchte, dass unser Konkurrent Paradise in seinem Entwicklungsklon durch Hinzuf√ºgen von FIFO eine noch h√∂here Leistung erzielt hatte. <br><br>  Dies war das Ende der Ger√ºchte - wir wussten nicht, was FIFO war oder wie sehr er half, sonst nichts.  Tom, normalerweise eine freundliche und entspannte Person, wurde jedoch zu einem aktiven, besessenen Fanatiker mit zu viel Koffein im Blut.  Anhand dieser Informationen versuchte er herauszufinden, was das Paradies konnte.  Am Ende kam er zu dem Schluss, dass Paradise wahrscheinlich einen FIFO-Schreibpuffer zwischen dem Systembus und VGA eingef√ºgt hat, sodass die zu schreibenden Daten beim Aufzeichnen der CPU in den Videospeicher sofort in den FIFO gelangen und die CPU die Verarbeitung fortsetzen kann, anstatt jedes Mal im Leerlauf zu stehen als er in den Anzeigespeicher schrieb. <br><br>  Tom hatte weder logische Elemente noch gen√ºgend Zeit, um einen vollst√§ndigen FIFO zu implementieren, aber er schaffte es, FIFO mit einer einzigen Operationstiefe zu implementieren, wodurch der Prozessor den VGA-Chip durch eine Schreiboperation √ºberholen konnte.  Tom war sich nicht sicher, ob dies zu guten Ergebnissen f√ºhren w√ºrde, aber das war das einzige, was er tun konnte. Deshalb implementierte er dieses System und √ºbertrug den Chip in die Produktion. <br><a name="habracut"></a><br>  Es stellte sich heraus, dass FIFO f√ºr eine Operation unglaublich cool funktioniert: Zu dieser Zeit waren Video Seven VGA-Chips die schnellsten auf dem Markt;  Sie wurden zu Beweisen f√ºr Toms Genie und zu Beweisen daf√ºr, wozu der Sch√∂pfer unter dem Druck der Umst√§nde f√§hig ist.  Das Tolle an dieser Geschichte ist jedoch, dass das Paradise FIFO-Design nichts mit dem Tom-Design zu tun hatte und <u>√ºberhaupt nicht funktionierte</u> .  Paradise f√ºgte einen <u>Lese-</u> FIFO-Puffer zwischen dem Anzeigespeicher und der Videoausgangsstufe des VGA-Chips ein, der es erm√∂glichte, die Videoausgabe im Voraus zu lesen, so dass die Pixel aus dem FIFO entnommen werden konnten, wenn die CPU auf den Anzeigespeicher zugreifen musste, und der CPU-Befehl sofort ausgef√ºhrt wurde.  Dies verbesserte tats√§chlich die Leistung, jedoch nicht so stark wie Toms FIFO-Schreibpuffer. <br><br>  Und dieser Fall kann als eine gute Parabel √ºber die Natur des kreativen Prozesses angesehen werden, den eine Person erreichen kann.  Nachrichtenfetzen √ºber den Paradise-Chip enthielten fast keine sachlichen Informationen, aber sie zwangen Tom, √ºber die Grenzen hinauszugehen, die er unbewusst gesetzt hatte, und das urspr√ºngliche Design des Chips zu entwickeln.  Ich glaube, dass dies das wichtigste Element eines genialen Designs ist, sei es auf dem Gebiet der Hardware, Software oder einer anderen kreativen Sph√§re, und er war es, der in den Tom-Nachrichten √ºber das Paradies geboren wurde: die F√§higkeit, die Grenzen zu erkennen, die Sie bei der Arbeit an dem Projekt aufgebaut haben, und diese zu √ºberwinden Grenzen. <br><br>  Das Problem ist nat√ºrlich, wie man die Grenzen √ºberwindet, deren Existenz man nicht einmal kennt.  Es gibt keine Erfolgsformel, aber zwei Prinzipien k√∂nnen diesem Zweck gut dienen: erstens vereinfachen, zweitens st√§ndig etwas Neues ausprobieren. <br><br>  Wenn Sie das Gef√ºhl haben, dass der Code kompliziert wird, nehmen Sie normalerweise geringf√ºgige √Ñnderungen an der eingefrorenen Struktur vor. Es besteht eine hohe Wahrscheinlichkeit, dass Sie die Produktivit√§t steigern und die Codemenge reduzieren k√∂nnen, indem Sie das Design erneut erfinden.  Eine wirklich gute Struktur sollte einen Moment tiefer Zufriedenheit bringen, wenn alles zusammenpasst, und Sie sind √ºberrascht, wie wenig Code ben√∂tigt wird und wie gut alle Grenzf√§lle funktionieren. <br><br>  Bei der √úberpr√ºfung der Struktur ist es wichtig, alle Ideen zu untersuchen, die mir in den Sinn kommen, egal wie verr√ºckt sie erscheinen m√∂gen.  Viele der wirklich gro√üartigen Ideen, die ich zuerst h√∂rte, schienen Unsinn zu sein, weil sie nicht in mein bestehendes Bild der Welt passten.  Oft sind diese Ideen wirklich verr√ºckt, aber genau wie die Paradise-Chip-Nachrichten Toms Fantasie anregten, kann die aggressive Erforschung scheinbar wahnhafter Ideen neue M√∂glichkeiten f√ºr Sie er√∂ffnen. <br><br>  Gute Illustration: Die Entwicklung der Quake 3D-Grafik-Engine. <br><br><h2>  Die komplexeste 3D-Grafikaufgabe der Welt </h2><br>  Ich habe die letzten sieben Monate an Quake gearbeitet, dem Erben von DOOM von id Software, und ich gehe davon aus, dass Quake drei weitere Monate sp√§ter, wenn Sie diesen Artikel lesen, als Shareware ver√∂ffentlicht wird. <br><br>  In Bezug auf die Grafik wird Quake f√ºr DOOM das sein, was DOOM f√ºr seinen Vorg√§nger Wolfenstein 3D war.  Quake f√ºgt echte willk√ºrliche 3D-Bilder (der Spieler kann nach oben und unten schauen, sich zur Seite lehnen und sogar zur Seite fallen), detaillierte Beleuchtung und Schatten, 3D-Monster und Charaktere anstelle von DOOM-Sprites hinzu.  Bald werde ich ausf√ºhrlicher dar√ºber sprechen, aber diesen Monat m√∂chte ich √ºber das Problem sprechen, das ich in meinem Buch als das schwierigste in dreidimensionalen Grafiken bezeichne: das Bestimmen sichtbarer Oberfl√§chen (Zeichnen der entsprechenden Oberfl√§che f√ºr jedes Pixel) und √ºber eine Aufgabe, die sehr nahe daran liegt - ungef√§hr Clipping (so schnell wie m√∂glich unsichtbare Polygone verwerfen, um die Bestimmung sichtbarer Oberfl√§chen zu beschleunigen).  Der K√ºrze halber werde ich die Abk√ºrzung VSD verwenden, um die Definition der Bestimmung und Keulung der sichtbaren Oberfl√§che zu bezeichnen. <br><br>  Warum halte ich VSD f√ºr die schwierigste Aufgabe von 3D-Grafiken?  Obwohl die Aufgaben der Rasterung, beispielsweise das Textur-Mapping, ebenso erstaunlich und wichtig sind, sind sie in ihrem Umfang recht begrenzt, und nach dem Aufkommen von 3D-Beschleunigern wird ihre L√∂sung auf die Hardware √ºbertragen.  Au√üerdem h√§ngt ihr Ma√üstab nur von der Bildschirmaufl√∂sung ab, das hei√üt, sie sind recht bescheiden. <br><br>  Im Gegensatz dazu ist VSD eine unbegrenzte Aufgabe, und Dutzende von Ans√§tzen werden verwendet, um sie zu l√∂sen.  Noch wichtiger ist jedoch, dass die VSD-Leistung in einer naiven L√∂sung von der Komplexit√§t der Szene abh√§ngt, die normalerweise als quadratische oder kubische Funktion zunimmt und daher schnell zum begrenzenden Faktor bei der Erstellung realistischer Welten wird.  Ich glaube, dass VSD in den n√§chsten Jahren ein zunehmend dominantes Problem bei 3D-Echtzeitgrafiken f√ºr PCs sein wird, da die Details von 3D-Welten st√§ndig zunehmen werden.  Bereits heute kann ein Quake-Level mit fester Gr√∂√üe etwa 10.000 Polygone enthalten, dh fast dreimal so viel wie ein vergleichbares DOOM-Level. <br><br><h2>  Struktur auf Bebenebene </h2><br>  Bevor ich mich mit dem VSD befasse, m√∂chte ich erw√§hnen, dass jede Ebene von Quake als ein riesiger dreidimensionaler BSP-Baum gespeichert ist.  Dieser BSP-Baum teilt wie jeder andere BSP den Raum in diesem Fall entlang der Ebenen der Polygone.  Im Gegensatz zum BSP-Baum, den ich zuvor demonstriert habe, speichert der Quake-BSP-Baum jedoch keine Polygone in den Baumknoten als Teil der Teilungsebenen, sondern in leeren (ungef√ºllten) Bl√§ttern, wie in Abbildung 1 in der Draufsicht dargestellt. <br><br><div style="text-align:center;"><img src="https://www.bluesnews.com/abrash/images/fig1.gif"></div><br>  <i>Abbildung 1. In Quake werden Polygone in leeren Bl√§ttern gespeichert.</i>  <i>Dunkle Bereiche sind gef√ºllte Bl√§tter (gef√ºllte Volumen, z. B. die Innenseiten von W√§nden).</i> <br><br>  Die richtige Renderreihenfolge erhalten Sie, indem Sie die Bl√§tter in der BSP-Reihenfolge ‚Äûvon vorne nach hinten‚Äú oder ‚Äûvon hinten nach vorne‚Äú rendern.  Da BSP-Bl√§tter immer konvex sind und Polygone die Grenzen von BSP-Bl√§ttern sind, die nach innen schauen, k√∂nnen sich die Polygone eines Blattes niemals √ºberlappen und in beliebiger Reihenfolge gezeichnet werden.  (Dies ist eine allgemeine Eigenschaft von konvexen Polyedern.) <br><br><h2>  Beschneiden und Definieren sichtbarer Fl√§chen </h2><br>  Im Idealfall sollte der VSD-Prozess wie folgt funktionieren: Zun√§chst m√ºssen Sie alle Polygone verwerfen, die sich au√üerhalb der Sichtbarkeitspyramide befinden, und alle unsichtbaren Teile der Polygone abschneiden, die teilweise sichtbar sind.  Dann m√ºssen Sie nur die Pixel jedes Polygons zeichnen, die vom aktuellen Standpunkt aus tats√§chlich sichtbar sind, wie in Abbildung 2 in der Draufsicht dargestellt, ohne Zeit damit zu verschwenden, die Pixel wiederholt neu zu zeichnen.  Beachten Sie, wie wenige Polygone in Abbildung 2 Sie zeichnen m√ºssen.  Und schlie√ülich sollte in einer idealen Welt die √úberpr√ºfung der Sichtbarkeit von Teilen von Polygonen kosteng√ºnstig sein und die Verarbeitungszeit f√ºr alle m√∂glichen Gesichtspunkte gleich sein, damit das Spiel reibungslos funktioniert. <br><br><div style="text-align:center;"><img src="https://www.bluesnews.com/abrash/images/fig2.gif"></div><br>  <i>Abbildung 2. Die ideale VSD-Architektur rendert nur die sichtbaren Teile der sichtbaren Polygone.</i> <br><br>  Bei der Ausf√ºhrung dieser Aufgabe ist es einfach zu bestimmen, welche der Polygone vollst√§ndig au√üerhalb des Bereichs der Sichtbarkeitspyramide liegen oder teilweise abgeschnitten sind, und es ist vollst√§ndig m√∂glich, genau herauszufinden, welche Pixel gezeichnet werden sollen.  Leider ist die Welt alles andere als ideal, und all diese √úberpr√ºfungen sind kostspielig. Der Trick besteht also darin, verschiedene √úberpr√ºfungen zu beschleunigen oder zu √ºberspringen, um das notwendige Ergebnis zu erzielen. <br><br>  Wie ich in fr√ºheren Artikeln ausf√ºhrlich erkl√§rt habe, k√∂nnen Sie mit einem BSP einfach und kosteng√ºnstig in der Reihenfolge von vorne nach hinten oder von hinten nach vorne um die Welt gehen.  Die einfachste VSD-L√∂sung besteht darin, den Baum einfach von hinten nach vorne zu durchlaufen, jedes Polygon mit einer Sichtbarkeitspyramide abzuschneiden und es zu zeichnen, wenn sein Gesicht in die Kamera gerichtet und nicht vollst√§ndig abgeschnitten ist (K√ºnstleralgorithmus).  Aber ist das eine ad√§quate L√∂sung? <br><br>  F√ºr relativ einfache Welten ist es durchaus anwendbar.  Es skaliert jedoch nicht gut.  Eines der Probleme besteht darin, dass immer mehr Transformationen und √úberpr√ºfungen erforderlich sind, wenn der Welt neue Polygone hinzugef√ºgt werden, um unsichtbare Polygone abzuschneiden.  Ab einem bestimmten Schwellenwert wird dies die Leistung erheblich verlangsamen. <br><br>  Gl√ºcklicherweise hat dieses spezielle Problem eine gute Problemumgehung.  Wie oben erw√§hnt, beschreibt jedes Blatt im BSP-Baum einen konvexen Unterraum, und die mit dem Blatt verbundenen Knoten begrenzen den Raum.  Weniger offensichtlich ist, dass jeder Knoten im BSP-Baum auch einen Unterraum beschreibt - einen Unterraum, der aus allen untergeordneten Knoten des Knotens besteht (siehe Abbildung 3). Sie k√∂nnen dies folgenderma√üen tun: Jeder Knoten teilt den Unterraum, der von den oben in Baum und die untergeordneten Elemente des Knotens rahmen diesen Unterraum weiter in alle vom Knoten kommenden Bl√§tter ein. <br><br><div style="text-align:center;"><img src="https://www.bluesnews.com/abrash/images/fig3.gif"></div><br>  <i>Abbildung 3: Knoten E beschreibt einen abgedunkelten Unterraum, der die Bl√§tter 5, 6, 7 und den Knoten F enth√§lt.</i> <br><br>  Da der Unterraum des Knotens begrenzt und konvex ist, k√∂nnen wir pr√ºfen, ob er vollst√§ndig au√üerhalb der Sichtbarkeitspyramide liegt.  Wenn ja, werden <u>alle</u> untergeordneten Knoten des Knotens definitiv vollst√§ndig abgeschnitten und k√∂nnen ohne zus√§tzliche Verarbeitung verworfen werden.  Da sich der Hauptteil der Welt normalerweise au√üerhalb der Sichtbarkeitspyramide befindet, k√∂nnen viele Polygone der Welt durch riesige Fragmente von Teilr√§umen von Knoten fast kostenlos abgeschnitten werden.  Das Durchf√ºhren einer idealen Pr√ºfung zum Abschneiden von Teilr√§umen ist ziemlich kostspielig, daher werden normalerweise f√ºr jeden Knoten einschr√§nkende Parallelogramme oder Kugeln zum Beschneiden von Pr√ºfungen verwendet. <br><br>  Das hei√üt, das Abschneiden entlang der Sichtbarkeitspyramide ist kein Problem, und Sie k√∂nnen BSP verwenden, um r√ºckw√§rts zu zeichnen.  Was ist das Problem? <br><br><h2>  Neu zeichnen </h2><br>  Das Problem, mit dem der Hauptautor der DOOM- und Quake-Technologien John Carmack bei der Entwicklung von Quake konfrontiert war, bestand darin, dass in einer komplexen Welt viele Szenen in der Pyramide der Sichtbarkeit eine gro√üe Anzahl von Polygonen aufweisen.  Die meisten dieser Polygone werden teilweise oder vollst√§ndig von anderen Polygonen √ºberlappt. Der oben beschriebene Algorithmus des K√ºnstlers erfordert jedoch das Zeichnen jedes Pixels jedes Polygons in der Sichtbarkeitspyramide.  Sie werden jedoch oft nur gerendert, um von anderen neu gezeichnet zu werden.  Bei einem Quake-Level von 10.000 Polygonen ist es leicht, den schlimmsten Fall des Neuzeichnens zu erhalten, wenn Pixel zehnmal oder √∂fter gezeichnet werden.  Das hei√üt, in einigen Frames wird jedes Pixel im Durchschnitt zehnmal oder √∂fter gezeichnet.  Kein Raster ist schnell genug, um die Gr√∂√üenordnung zu kompensieren, die zum Rendern einer Szene erforderlich ist.  Schlimmer noch, der Algorithmus des K√ºnstlers erzeugt gro√üe Leistungsunterschiede zwischen dem besten und dem schlechtesten Fall, was zu einer signifikanten √Ñnderung der Bildrate beim Bewegen des Betrachters f√ºhrt. <br><br>  John stand also vor dem Problem, die Anzahl der Neuzeichnungen auf ein akzeptables Ma√ü zu reduzieren.  Im Idealfall sollte jedes Pixel nur einmal gezeichnet werden, im schlimmsten Fall jedoch nicht mehr als zwei- oder dreimal.  F√ºr das Durchschneiden der Sichtbarkeitspyramide war es idealerweise erforderlich, dass alle in der Pyramide unsichtbaren Polygone fast ohne zus√§tzliche Kosten abgeschnitten wurden.  Ein Plus w√§re auch, dass es m√∂glich w√§re, nur die sichtbaren Teile von teilweise sichtbaren Polygonen zu zeichnen, gleichzeitig aber ein Gleichgewicht aufrechtzuerhalten: Die Operation sollte weniger als das Neuzeichnen ausgeben. <br><br>  Als ich Anfang M√§rz zu id kam, hatte John bereits einen Prototyp des Motors und einen Umrissplan, daher ging ich davon aus, dass unsere Arbeit einfach darin bestehen w√ºrde, diesen Motor fertigzustellen und zu optimieren.  Wenn ich jedoch die Geschichte von id kennen w√ºrde, k√∂nnte ich herausfinden, was was ist.  John hat nicht nur DOOM erstellt, sondern auch Engines f√ºr Wolf 3D und mehrere andere fr√ºhere Spiele. W√§hrend des Entwicklungsprozesses hat er mehrere verschiedene Versionen jeder Engine erstellt (nachdem er in vier Wochen vier Engines erstellt hat), dh in vier Jahren hat er ungef√§hr 20 Engines geschrieben .  Johns unerm√ºdlicher Wunsch nach immer mehr neuen und hochwertigen Technologien der Quake-Engine wird erst nach der Ver√∂ffentlichung des Spiels enden. <br><br>  Drei Monate nach meiner Ankunft blieb nur ein Element der urspr√ºnglichen VSD-Struktur im Motor, und Johns Wunsch, ‚Äûneue Dinge auszuprobieren‚Äú, ging so weit, dass ich so etwas noch nie zuvor gesehen hatte. <br><br><h2>  B√ºndelbaum </h2><br>  In Johns urspr√ºnglichem Quake-Projekt wurde das Rendern von vorne nach hinten mithilfe eines zweiten BSP-Baums durchgef√ºhrt, der bereits gezeichnete und noch leere Teile des Bildschirms verfolgt, die mit den verbleibenden Polygonen gef√ºllt werden mussten.  Logischerweise kann dieser BSP-Baum als zweidimensionaler Bereich betrachtet werden, der die gef√ºllten und leeren Teile des Bildschirms beschreibt, wie in Abbildung 4 dargestellt. Tats√§chlich handelt es sich jedoch um einen dreidimensionalen Baum, der als ‚ÄûStrahlbaum‚Äú bezeichnet wird.  Ein Strahlbaum ist eine Reihe von 3D-Sektoren (B√ºndeln), die durch Ebenen begrenzt sind, die von einem zentralen Punkt (in unserem Fall dem Ansichtspunkt) projiziert werden (siehe Abbildung 5). <br><br><div style="text-align:center;"><img src="https://www.bluesnews.com/abrash/images/fig4.gif"></div><br>  <i>Abbildung 4. Der Quake Beam-Baum teilt den Bildschirm effektiv in einen 2D-Bereich auf</i> <br><br><div style="text-align:center;"><img src="https://www.bluesnews.com/abrash/images/fig5.gif"></div><br>  <i>Abbildung 5. Der Bebenstrahlbaum besteht aus 3D-Sektoren oder Strahlen, die vom Ansichtspunkt zu den Kanten der Polygone projiziert werden.</i> <br><br>  In Johns Projekt besteht ein Garbenbaum zun√§chst aus einer einzelnen Garbe, die die Pyramide der Sichtbarkeit beschreibt.  Alles au√üerhalb dieses B√ºndels wird als gef√ºllt betrachtet (dh es muss dort nichts gezeichnet werden), und alles innerhalb des B√ºndels wird als leer betrachtet.  Wenn ein neues Polygon erreicht wurde, indem der BSP-Baum der Welt von vorne nach hinten umrundet wurde, wurde dieses Polygon in einen Strahl umgewandelt, indem Ebenen von seinen Kanten durch den Blickpunkt gezogen wurden, und alle Teile des Strahls, die leere Strahlen im Strahlbaum kreuzten, wurden als gezeichnet betrachtet und dem Strahlbaum als gef√ºllter Strahl hinzugef√ºgt.  Dies ging weiter, entweder bis die Polygone endeten oder bis der Garbenbaum vollst√§ndig voll wurde.  Nachdem der Balkenbaum fertiggestellt war, wurden die sichtbaren Teile der im Balkenbaum eingeschlossenen Polygone gezeichnet. <br><br>  Der Vorteil der Arbeit mit einem dreidimensionalen B√ºndelbaum anstelle des 2D-Bereichs bestand darin, dass zur Bestimmung der Seite der B√ºndelebene, auf der sich der Scheitelpunkt des Polygons befindet, das Vorzeichen des Vektorprodukts des Strahls zum Scheitelpunkt und die Normale zur Ebene √ºberpr√ºft werden muss, da alle B√ºndelebenen durch den Anfang verlaufen Koordinaten (Standpunkt).  Da die Strahlenebene vollst√§ndig durch eine einzelne Normale beschrieben ist, reicht au√üerdem aus, um einen Strahl von der Kante des Polygons zu erzeugen, nur das Skalarprodukt der Kante und der Strahl von dieser Kante zum Gesichtspunkt.  Schlie√ülich kann man f√ºr das Gruppenbeschneiden durch die oben beschriebene Sichtbarkeitspyramide die Begrenzungskugeln von BSP-Knoten verwenden. <br><br>  Zun√§chst schien die Bundle-Tree-Eigenschaft (die endet, wenn der Bundle-Tree voll wird) attraktiv, da sie die Leistung im schlimmsten Fall einschr√§nken w√ºrde.  Leider waren immer noch Szenen m√∂glich, in denen man alles bis zum Himmel oder zur R√ºckwand der Welt sehen konnte. Im schlimmsten Fall mussten Sie immer noch alle Polygone in der Sichtbarkeitspyramide in Bezug auf den Haufenbaum √ºberpr√ºfen.  √Ñhnliche Probleme k√∂nnen auch bei kleinen Rissen aufgrund von Einschr√§nkungen der numerischen Genauigkeit auftreten.  Es wird ziemlich viel Zeit f√ºr das Durchschneiden des Strahlbaums aufgewendet, und in Szenen mit einem hohen Sichtbereich, z. B. von oben gesehen, reduzierten die Gesamtkosten f√ºr die Verarbeitung der Strahlen die Bildrate von Quake auf Schildkr√∂tengeschwindigkeit.  Das hei√üt, am Ende stellte sich heraus, dass die L√∂sung mit B√ºndelb√§umen an fast denselben Krankheiten leidet wie der Algorithmus des K√ºnstlers: Der schlimmste Fall ist viel schlimmer als der Durchschnittsfall und l√§sst sich mit zunehmender Komplexit√§t des Levels nicht gut skalieren. <br><br><h2>  T√§glich neue 3D-Engine </h2><br>  Nachdem der Beam Tree seine Arbeit aufgenommen hatte, arbeitete John unerm√ºdlich daran, die 3D-Engine zu beschleunigen, und versuchte st√§ndig, ihre Struktur zu verbessern, anstatt √Ñnderungen an der Implementierung vorzunehmen.      ,     ,       : ¬´     ,    ...¬ª,   ,       .       ,    ,        ,   .     ,        .         ,      .     .       , ,       ,  FIFO-  Paradise    . <br><br> <b> raycast</b> :  ,    8x8,  ;    ,        ,    BSP-,    ,      .         ,      ,   ,          ,       ;      ,    ,  .     ,    ,    .     :   ,        . <br><br> <b> </b> :       .                .          (       ),         . <br><br> <b> </b> :   z-,       , ,     .   ,       ,      ,    ,     .   :              ,          256      0-8 ;         x86        8 . <br><br> <b>   </b> :    ,            ,        .      ,             .    ,     ;  ,        . <br><br> <b></b> :  ,      ,          .    ,    ,         ,       .             ,       . <br><br><h2>  </h2><br>     ,    ‚Äî    ,  ,     BSP- ,             BSP- .     ,       DOOM (2D),      BSP- DOOM  2D-   .       3D     ,                 .      BSP      ,       ,        .        ,    ,          BSP. <br><br>        ,    ,    ,   -  .          BSP,     ,      ,    .  3:30   ,         ,    ,            ,    ,                ,      ,     . <br><br>    :       (potentially visible set, PVS)   .  PVS        1   .            .      BSP ,      .    ,      ,        ,     ,        .         ,   BSP    ,     ,     PVS      20 . <br><br>     20         (      PVS),            (PVS     ,     ,    ,   50%,     150%).   ,    PVS    ;       ,        VSD,            .        ,       ‚Äî  ,       ,    ,   . <br><br>  ,   PVS    ,   ,    ¬´¬ª  .   ,     ,   ,           ,   ,     ¬´¬ª ,     . <br><br><h2>    -  </h2><br>  Was bedeutet das?  ,     :    - .   PVS    ,     (   PVS ‚Äî   ,      ).  ,       PVS ‚Äî      .   ,      ? <br><br>  √úberhaupt nicht.         ,    ,   .             ,    ,      . <br><br>       ,         ,          .         :         ‚Äî       ,       .      ,         ,      ¬´¬ª  .      ,  ¬´        ¬ª;     .         VSD,       ,      .      ,      ¬´ ¬ª  ,        ( , ) PVS     . <br><br>     ‚Äî   ,         ,  .  ,           ,   .       ,     3D-   ,   ;  ,    ,          . <br><br>         . <br><br><h2>  ,   </h2><br>    ,        .   , Dr. Dobb's Journal    ,      ‚Äî  .    ,       Tiny C ,  D-Flat ,   -    <u>DDJ</u> . (   , .)          ‚Äî    ,     <u>DDJ</u>     . <br><br>    id Software        ,   Quake     .    id     Wolfenstein 3D  ftp.idsoftware.com/idstuff/source <i>[. .:     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> ]</i> ;       ,   ,     ;   wolfsrc.txt   ,    ,    . <br><br>  :   ,         .       ,      ,  ,  ,    ,     .       ;       ‚Äî ,    .    ,   ! <br><br><h2>  Referenzen </h2><br> Foley, James D., <u>et al.</u> , <u>Computer Graphics: Principles and Practice</u> , Addison Wesley, 1990, ISBN 0-201-12110-7 (, BSP-, VSD). <br><br> Teller, Seth, <u>Visibility Computations in Densely Occluded Polyhedral Environments</u> (),   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://theory.lcs.mit.edu/~seth/</a>       . <br><br> Teller, Seth, <u>Visibility Preprocessing for Interactive Walkthroughs</u> , SIGGRAPH 91 proceedings, pp. 61-69. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de435760/">https://habr.com/ru/post/de435760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de435746/index.html">Dynamische DAG-Erzeugung im Luftstrom</a></li>
<li><a href="../de435748/index.html">Metasploit Framework 5.0 ver√∂ffentlicht</a></li>
<li><a href="../de435750/index.html">Januar IT Events Digest</a></li>
<li><a href="../de435752/index.html">Moscow Python Conf ++ 2019 - die erste Konferenz, auf der wir einige Redner von Grund auf selbst vorbereiten</a></li>
<li><a href="../de435756/index.html">Old New Year Sale</a></li>
<li><a href="../de435764/index.html">Hallo Welt! Oder Habr in Englisch, v1.0</a></li>
<li><a href="../de435766/index.html">Hallo Welt! Oder englischsprachiger Habr, v1.0</a></li>
<li><a href="../de435770/index.html">Geheime Hacks VS Code</a></li>
<li><a href="../de435774/index.html">Pico Island: Wie man aus der Basalth√∂lle ein gem√ºtliches Tussent macht</a></li>
<li><a href="../de435776/index.html">On-Board-Video der Vorbereitungs- und Landevorg√§nge sowie ein Panorama der Mondr√ºckseite von Chang'e-4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>