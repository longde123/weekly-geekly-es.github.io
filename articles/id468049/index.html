<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👇🏿 🕒 💥 Menggunakan werf untuk meluncurkan grafik Helm yang kompleks 🧐 🥢 🆎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini dikhususkan untuk pengembangan grafik Helm untuk Kubernetes menggunakan solusi yang sudah jadi dari repositori grafik. Dengan pendekatan i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menggunakan werf untuk meluncurkan grafik Helm yang kompleks</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/468049/"><img src="https://habrastorage.org/webt/ea/ps/gb/eapsgbnltm63hd2ntcfco7qxgla.png"><br><br>  Artikel ini dikhususkan untuk pengembangan grafik Helm untuk Kubernetes menggunakan solusi yang sudah jadi dari repositori grafik.  Dengan pendekatan ini, pengguna menerapkan resep komunitas atau resepnya sendiri, memastikan pembaruan tepat waktu dari komponen standar semua proyeknya dan kenyamanan mempertahankan solusi secara umum. <br><br>  Fitur nyaman seperti itu sekarang dibangun ke dalam utilitas GitOps werf kami, yang seharusnya menyederhanakan seluruh proses pengoperasian infrastruktur untuk aplikasi yang dirakit dan diluncurkan ke Kubernetes. <a name="habracut"></a><br><br><h2>  Helm built-in </h2><br>  Mungkin keberhasilan utama Helm - "manajer paket untuk Kubernetes" - dikaitkan tidak banyak dengan fungsinya seperti dengan <b>repositori grafik</b> resmi <b>dan dukungan untuk repositori</b> pada umumnya.  Pengaturan resep dan bagan disertai oleh komunitas besar.  Spesialis mendukung solusi terkini yang dibutuhkan oleh pengguna akhir.  Setiap bagan dari repositori resmi distandarisasi dan didokumentasikan dengan baik. <br><br>  Dalam kasus sepele, pengguna bahkan tidak perlu membuat bagan untuk meluncurkan aplikasi: ia hanya menemukan solusi yang sudah jadi, membaca dokumentasi, menyiapkan pengaturan dan menggunakan bagan resmi. <br><br>  Untuk waktu yang lama, kami telah secara aktif menggunakan Helm di dalam werf untuk meluncurkan infrastruktur aplikasi dan sekarang kami melangkah lebih jauh.  Dimulai dengan versi <a href="">v1.0.4-alpha.10</a> , <b>perintah untuk bekerja dengan dependensi dan repositori bagan</b> telah ditambahkan ke werf untuk sepenuhnya meninggalkan klien Helm. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Perintah utama</a> untuk ini: <br><br><ul><li> <code>werf helm repo</code> <br> <br><pre> <code class="plaintext hljs">add Add a chart repository fetch Download a chart from a repository and (optionally) unpack it in local directory init Init default chart repositories configuration list List chart repositories remove Remove a chart repository search Search for a keyword in charts update Update information of available charts locally from chart repositories</code> </pre> </li><li> <code>werf helm dependency</code> <br> <br><pre> <code class="plaintext hljs">build Rebuild the charts/ directory based on the requirements.lock file list List the dependencies update Update charts/ based on the contents of requirements.yaml</code> </pre> </li></ul><br>  Plus, dukungan untuk <i>referensi grafik telah</i> ditambahkan ke perintah <code>werf helm deploy-chart</code> . <br><br>  Dan di sini adalah bagaimana semua sihir ini terlihat beraksi - lebih tepatnya, di sini kami menunjukkan perbandingan peluncuran grafik yang sama di werf (kiri) dan di Helm (kanan): <br><br><img src="https://habrastorage.org/webt/qu/ob/ww/quobww_lgdhujjzz0l0kzxm3ick.gif" alt="gambar"><br><br><h2>  Lebih banyak latihan </h2><br>  Kembali ke kenyamanan menggunakan solusi siap pakai untuk meluncurkan seluruh aplikasi - <b>contoh yang biasa dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WordPress</a></b> .  Meluncurkan bagan Helm-nya ke kluster Kubernetes menggunakan werf mungkin terlihat seperti ini: <br><br><pre> <code class="bash hljs">$ cat &lt;&lt; EOF &gt; values.yaml wordpressBlogName: flant wordpressUsername: admin wordpressPassword: password mariadb: mariadbRootPassword: password EOF $ werf helm deploy-chart --values values.yaml stable/wordpress my-web-app</code> </pre> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Demonstrasi dalam asciicinema</a> . <br><br>  Karena repositori berisi <b>banyak solusi</b> , Anda dapat <b>membangun</b> aplikasi Anda sendiri dari mereka sebagai kubus, di mana kubus akan menjadi berbagai bagan Helm di mana seluruh sistem bergantung.  Kemungkinan besar, Anda hanya perlu mengkonfigurasi komponen dengan benar sesuai kebutuhan Anda. <br><br>  Misalnya, aplikasi web memerlukan antrian, cache, dan penyimpanan data.  Bagaimana kita menyebarkan komponen-komponen ini melalui werf? <br><br>  Untuk memulai - mari percepat pencarian untuk semua yang Anda butuhkan menggunakan CLI: <br><br><pre> <code class="bash hljs">$ werf helm repo search queue NAME CHART VERSION APP VERSION DESCRIPTION stable/rabbitmq 6.4.1 3.7.17 Open <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> message broker software that implements the A... stable/rabbitmq-ha 1.31.0 3.7.15 Highly available RabbitMQ cluster, the open <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> messag...</code> </pre> <br>  Dengan analogi, kita akan menemukan komponen yang tersisa untuk semua repositori bagan terdaftar (daftar repositori yang digunakan dapat dilihat dengan menjalankan perintah <code>werf helm repo list</code> ). <br><br>  Setelah semuanya ditemukan, tinggal menambahkannya ke bagan.  Ada beberapa cara untuk melakukan ini: tambahkan diagram komponen ke direktori grafik atau buat file <code>requirements.yaml</code> dan jelaskan dependensinya, lalu berinteraksi dengan mereka menggunakan perintah khusus <code>werf helm dependency build|list|update</code> . <br><br>  Ilustrasi jalur kedua: <br><br><pre> <code class="bash hljs">$ cat &lt;&lt; EOF &gt; .helm/requirements.yaml dependencies: - name: mysql version: 0.3.4 repository: <span class="hljs-string"><span class="hljs-string">"@stable"</span></span> - name: redis version: 1.1.11 repository: <span class="hljs-string"><span class="hljs-string">"@stable"</span></span> - name: rabbitmq version: 0.6.16 repository: <span class="hljs-string"><span class="hljs-string">"@stable"</span></span> EOF $ werf helm dependency build $ werf deploy --env <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Demonstrasi dalam asciicinema</a> . <br><br>  Selama proses peluncuran, werf <b>akan membuat semua dependensi dan melacaknya</b> bersama dengan sumber daya lainnya - tidak diperlukan tindakan tambahan. <br><br>  Akibatnya, dengan mempertimbangkan keahlian komunitas yang berpengalaman, Anda secara signifikan menghemat waktu dalam pengembangan dan pemeliharaan grafik.  Namun, tidak ada yang membatasi Anda untuk menggunakan bagan publik: Anda dapat menggelar bagan Anda dengan kesuksesan yang sama, konfigurasi yang disiapkan dengan mempertimbangkan spesifikasi yang diperlukan. <br><br>  <b>Dokumentasi</b> tentang perintah repositori dan dependensi di werf disajikan di <a href="">sini</a> .  Anda mungkin juga tertarik membaca dokumentasi untuk detail lebih lanjut tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">peluncuran ke werf</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perbedaan utama dari Helm</a> . <br><br><h2>  Kesimpulan </h2><br>  Tidak adanya fitur yang penting bagi kami dalam solusi Open Source yang ada memaksa kami untuk membuat kapabilitas, binding, dan integrasi yang sesuai.  Proyek werf dibuat dan didukung, pertama-tama, untuk menyelesaikan tugas sehari-hari para insinyur DevOps kami. <br><br>  Sebagai contoh, kami telah bekerja untuk waktu yang lama (tahun kedua!) Sehingga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proposal kami</a> <b>untuk melacak sumber daya di Helm</b> diterima sebagai mode alternatif di basis kode utama proyek (hulu).  Masyarakat menerima dan mendukung gagasan itu, seperti  banyak yang membutuhkan kesempatan ini.  Namun, kemajuan ke arah ini dimulai di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Helm 3</a> dan baru sekarang ... <br><br>  Hingga saat ini, penerapan ide ini di Helm telah diblokir oleh pengembang.  Namun, selama ini kami telah mengembangkan fungsi yang sesuai untuk melacak sumber daya di pustaka Open Source yang terpisah - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kubedog</a> - dan kami sudah menggunakannya di werf.  Dan dilihat dari aktivitas di GitHub, perpustakaan menemukan minat di antara pengguna Kubernet / Helm lainnya, yang sangat menyenangkan. <br><br>  Anda dapat mendukung ide kami (dan implementasi) dengan menempatkan bintang pada proyek kubedog di GitHub dan / atau acungan jempol dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">masalah asli</a> di Helm.  Terima kasih <br><br><h2>  PS </h2><br>  Baca juga di blog kami: <br><br><ul><li>  Serangkaian catatan tentang inovasi di werf: <br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dukungan untuk monorepo dan multirepo di werf dan apa hubungannya dengan Docker Registry dengan itu</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sekarang Anda dapat merakit gambar Docker di werf menggunakan Dockerfile yang biasa</a> "; </li></ul></li><li>  "Pandangan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sadar pada Helm 2:" Itulah itu ... "</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengantar praktis untuk manajer paket untuk Kubernetes - Helm</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Memperkenalkan perpustakaan kubedog untuk melacak sumber daya Kubernetes.</a> " </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id468049/">https://habr.com/ru/post/id468049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id468031/index.html">Kami port game multi-pemain dari C ++ ke web dengan Cheerp, WebRTC, dan Firebase</a></li>
<li><a href="../id468035/index.html">Unduh pers menggunakan pengontrol permainan, atau 8 paten yang tidak biasa untuk perangkat input</a></li>
<li><a href="../id468041/index.html">Pengumuman antarmuka web Kubernetes Web View (dan ikhtisar singkat tentang UI web lain untuk Kubernetes)</a></li>
<li><a href="../id468043/index.html">Cara membuat kit UI yang dijual. Tahapan mengembangkan sistem desain komersial</a></li>
<li><a href="../id468047/index.html">Bekerja dengan hierarki di lsFusion</a></li>
<li><a href="../id468051/index.html">VDS dengan Windows Server berlisensi untuk 100 rubel: mitos atau kenyataan?</a></li>
<li><a href="../id468053/index.html">Pembelajaran Mesin untuk berburu flat Anda. Bagian 1</a></li>
<li><a href="../id468057/index.html">Pengembangan OS seperti Unix - Multitasking dan panggilan sistem (7)</a></li>
<li><a href="../id468061/index.html">Cron di Linux: History, Usage, dan Device</a></li>
<li><a href="../id468063/index.html">Angulareact</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>