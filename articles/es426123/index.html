<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍💻 🚣🏼 🍋 Aprende OpenGL. Leccion 6.1. PBR o renderizado físicamente correcto. Teoría 🐻 👨🏽‍🍳 👨‍👩‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Representación físicamente correcta 


 PBR, o representación basada físicamente, es un conjunto de técnicas de visualización basadas en una teoría qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprende OpenGL. Leccion 6.1. PBR o renderizado físicamente correcto. Teoría</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426123/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br><h2>  Representación físicamente correcta </h2><br><p>  PBR, o representación basada físicamente, es un conjunto de técnicas de visualización basadas en una teoría que concuerda bastante bien con la teoría real de la propagación de la luz.  Dado que el propósito de PBR es una simulación de luz físicamente confiable, parece mucho más realista en comparación con los modelos de iluminación Phong y Blinn-Fong que utilizamos anteriormente.  No solo se ve mejor, sino que también brinda una buena aproximación a la física real, lo que nos permite (y a los artistas en particular) crear materiales basados ​​en las propiedades físicas de las superficies sin recurrir a trucos baratos para hacer que la iluminación se vea realista.  La principal ventaja de este enfoque es que los materiales que creamos se verán según lo planeado, independientemente de las condiciones de iluminación, lo que no se puede decir sobre otros enfoques, no PBR. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Contenido</b> <div class="spoiler_text"><p>  <strong>Parte 1. Comenzando</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creación de ventanas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola ventana</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola triangulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreadores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Transformaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cámara</a> </li></ol><br><p>  <strong>Parte 2. Iluminación básica</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conceptos básicos de iluminación</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Materiales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Múltiples fuentes de iluminación</a> </li></ol><br><p>  <strong>Parte 3. Descargar modelos 3D</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de polígono de malla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de modelo 3D</a> </li></ol><br><p>  <strong>Parte 4. Características avanzadas de OpenGL</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de profundidad</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de plantilla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mezcla de colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Caras de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Buffer de trama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tarjetas cúbicas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manejo avanzado de datos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GLSL avanzado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreador geométrico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Instancia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Suavizado</a> </li></ol><br><p>  <strong>Parte 5. Iluminación avanzada</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Iluminación avanzada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Corrección gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cartas de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de sombras omnidireccionales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo de paralaje</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Renderizado diferido</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SSAO</a> </li></ol><br><p>  <strong>Parte 6. PBR</strong> </p><br><ol><li>  Teoría </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes analíticas de iluminación</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Radiación difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Exposición al espejo.</a> </li></ol><br></div></div><br><p>  Sin embargo, PBR sigue siendo una aproximación de la realidad (basada en las leyes de la física), por lo que se llama representación físicamente correcta en lugar de representación física.  Para que el modelo de iluminación pueda llamarse físicamente correcto, debe cumplir 3 condiciones (no se preocupe, las veremos pronto): <br><br></p><ul><li>  Basado en un modelo de micro facetas reflectantes. </li><li>  Obedecer la ley de conservación de la energía. </li><li>  Utilice la función de distribución de reflectancia de doble haz (BRDF) </li></ul><br>  En esta serie de tutoriales, nos centraremos en el enfoque PBR, desarrollado originalmente en Disney y adaptado para la visualización en tiempo real por Epic Games.  Su enfoque, basado en un <i>flujo de trabajo dieléctrico de metal</i> ( <i>flujo de trabajo de</i> Ing. Metallic, <i>no pudo encontrar una mejor traducción, aprox. Ed.</i> ), <i>Está</i> bien documentado, ampliamente aceptado en muchos motores populares y se ve increíble.  Al final de esta sección, obtenemos algo similar a esto: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dn/0c/0c/dn0c0ctjrjf1o3uzwl7b0eyinwm.png"></div><br><p>  Tenga en cuenta que los artículos de esta sección son bastante avanzados, por lo que se recomienda que comprenda bien OpenGL y la iluminación del sombreador.  Estos son algunos de los conocimientos que necesitará para estudiar esta sección: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">búfer de cuadros</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mapas cúbicos</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">corrección gamma</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDR</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mapas normales</a> .  También profundizaremos un poco en las matemáticas, pero prometo hacer todo lo posible para explicar todo lo más claramente posible. </p><br><h3>  Modelo de micro facetas reflectantes </h3><br><p>  Todas las técnicas de PBR se basan en la teoría de las micro caras.  Esta teoría dice que cada superficie a gran aumento puede representarse como un conjunto de espejos microscópicos llamados <b>micro caras</b> .  Debido a la rugosidad de la superficie, estos micro-espejos pueden orientarse en diferentes direcciones: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y4/ph/jk/y4phjkuajlfpqqhljbnxy3em7ya.png"></div><br><p>  Cuanto más rugosa es la superficie, más al azar se orientan sus microcaras.  El resultado de esta disposición de estos pequeños espejos es (en particular cuando se trata de destellos y reflejos especulares) que los rayos de luz incidentes se dispersan en diferentes direcciones en superficies rugosas, lo que conduce a un destello especular más amplio.  Y viceversa: en superficies lisas, es más probable que los rayos incidentes se reflejen en una dirección, lo que dará un resplandor más pequeño y más nítido: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ip/l3/bc/ipl3bc72ratqe4nh3sf_1nzogxq.png"></div><br><p>  A nivel microscópico, no hay superficies absolutamente lisas, pero dado que las microcaras son lo suficientemente pequeñas y no podemos distinguirlas dentro de nuestro espacio de píxeles, aproximamos estadísticamente la rugosidad de la superficie al introducir un coeficiente de <b>rugosidad</b> .  Usando este coeficiente, podemos calcular la fracción de microcaras orientadas en la dirección de un determinado vector <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-68" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> h </script>  .  Este vector <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-68" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> h </script>  nada más que un vector mediano que yace en el medio entre la dirección de la luz incidente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> l </script>  y dirección del observador <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-76" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> v </script>  .  Hablamos de eso anteriormente en una lección sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iluminación avanzada</a> , donde lo definimos como la relación de la suma de vectores <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> l </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-76" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> v </script>  a la longitud del vector resultante: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-15" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;">f </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;">c </font></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">l </font></span></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;">v </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">| </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-28"><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">El | </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;">l </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mo" id="MJXp-Span-31" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;">v </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-33"><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">| </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-35"><span class="MJXp-mo" id="MJXp-Span-36" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">El |</font></span></span></span></font><span class="MJXp-mtext" id="MJXp-Span-16">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-28"><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-31" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-33"><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-35"><span class="MJXp-mo" id="MJXp-Span-36" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.492ex" height="2.66ex" viewBox="0 -832 9253.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-3D" x="854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-66" x="2160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-72" x="2711" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="3162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-63" x="3692" y="0"></use><g transform="translate(4125,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-2B" x="520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-76" x="1521" y="0"></use></g><g transform="translate(6132,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-7C" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6C" x="557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-2B" x="1077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-76" x="2078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-7C" x="2563" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-7C" x="2842" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> h = \ frac {l + v} {|| l + v ||} </script></p><br><p>  Cuantas más micro caras estén orientadas en la dirección del vector mediano, más nítido y brillante será el resaltado especular.  Debido al coeficiente de rugosidad, que se encuentra entre 0 y 1, podemos aproximar estadísticamente la orientación de las micro caras: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/xh/kr/soxhkr5idspt29qlldjrkq4rhqm.png"></div><br><p>  Como puede ver, un valor más alto del coeficiente de rugosidad proporciona un punto de reflejo de espejo de mayor tamaño, en comparación con un punto pequeño y afilado en superficies lisas. </p><br><h3>  Conservación de energía. </h3><br><p>  Usar la aproximación teniendo en cuenta las microcaras ya conlleva una cierta forma de conservación de energía: la energía de la luz reflejada nunca excederá la energía de la luz incidente (si la superficie no brilla por sí misma).  Mirando la imagen de arriba, vemos que con un aumento en la rugosidad de la superficie, aumenta el punto de luz reflejada, pero al mismo tiempo disminuye su brillo.  Si la intensidad de la luz reflejada fuera la misma para todos los píxeles, independientemente del tamaño del punto, las superficies más rugosas emitirían mucha más energía, lo que violaría la ley de conservación de la energía.  Por lo tanto, los reflejos especulares son más brillantes en superficies lisas y tenues en superficies rugosas. </p><br><p>  Para que se conserve la energía, debemos hacer una separación clara entre los componentes difusos y espejos.  En ese momento, cuando un rayo de luz alcanza la superficie, se divide en componentes <i>reflejados</i> y <i>refractados</i> .  El componente reflejado es la luz reflejada directamente y no penetra en la superficie; lo conocemos como un componente espejo de la luz.  El componente refractado es la luz que penetra en la superficie y es absorbida por ella; es conocido por nosotros como el componente difuso de la luz. </p><br><p>  Pero hay algunos matices asociados con la absorción de luz: no ocurre instantáneamente, tan pronto como la luz toca la superficie.  Desde el curso de la física, sabemos que la luz puede describirse como un haz de fotones con energía que se mueve en línea recta hasta que pierde toda la energía como resultado de una colisión con obstáculos.  Cada material consta de micropartículas que pueden interactuar con un rayo de luz, como se muestra en la figura a continuación.  Estas partículas absorben parte o la totalidad de la energía de la luz en cada colisión, convirtiéndola en calor. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_z/xx/px/_zxxpxhlbmarr70ym_wdp_ndrio.png"></div><br><p>  En el caso general, no toda la energía se absorbe, y la luz continúa dispersándose en direcciones (predominantemente) aleatorias, donde nuevamente choca con otras partículas hasta que se queda sin energía o sale de la superficie nuevamente.  Por lo tanto, la superficie comienza a reemitir rayos de luz, haciendo una contribución en forma del color observado (difuso) de la superficie.  Usando PBR, hacemos la suposición simplificada de que toda la luz refractada es absorbida y dispersada en un área de influencia pequeña, ignorando el efecto de la luz dispersa que abandona la superficie a una distancia de esta área.  Las técnicas especiales de sombreado que tienen esto en cuenta, conocidas como técnicas de <i>dispersión subsuperficial</i> , mejoran significativamente la calidad visual de materiales como cuero, mármol, cera, pero son caras en términos de rendimiento. </p><br><p>  Aparecen sutilezas adicionales cuando la luz se refracta y se refleja en superficies <i>metálicas</i> .  Las superficies metálicas interactúan de manera diferente con la luz que <i>no metálica</i> (es decir, dieléctricos).  Obedecen las mismas leyes de refracción y reflexión, con una excepción: toda la luz refractada es absorbida por la superficie sin dispersarse, solo queda la luz reflejada en el espejo;  en otras palabras, las superficies metálicas no tienen un color difuso.  Debido a esta obvia diferencia entre metales y dieléctricos, se procesarán de manera diferente en el transportador PBR en el que iremos más adelante en el curso de este artículo. </p><br><p>  Esta diferencia entre luz reflejada y refractada nos lleva a otra observación con respecto a la conservación de energía: sus valores son mutuamente excluyentes.  La energía de la luz reflejada no puede ser absorbida por el material.  Por lo tanto, la energía absorbida por la superficie en forma de luz refractada es la energía restante después de tener en cuenta la luz reflejada. <br>  Usamos esta relación, calculando primero la parte reflejada como un porcentaje de la energía de los rayos incidentes reflejados por la superficie, y luego la fracción de la luz refractada directamente del reflejado, como: </p><br><pre><code class="plaintext hljs">float kS = calculateSpecularComponent(...); // /  float kD = 1.0 - kS; // / </code> </pre> <br><p>  De esta manera, aprendemos los significados de las partes reflejadas y refractadas gracias a la ley de conservación de la energía.  Con este enfoque, ni la parte refractada (difusa) ni la reflejada excederán 1.0, asegurando que su energía total no exceda el valor de la energía de luz incidente, que no pudimos tener en cuenta en lecciones anteriores. </p><br><h3>  Ecuación de reflexión </h3><br><p>  Lo anterior nos lleva a la llamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ecuación de representación</a> : una ecuación compleja inventada por muchachos muy inteligentes, y hoy es el mejor modelo para simular la iluminación.  PBR sigue estrictamente una versión más específica de esta ecuación, conocida como <b>la ecuación de reflexión</b> .  Para comprender bien el PBR, es importante tener una comprensión completa de la ecuación de reflexión: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-37"><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">p</span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">g</span><span class="MJXp-msubsup" id="MJXp-Span-49"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-51" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-54">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">t</span><span class="MJXp-mtext" id="MJXp-Span-58">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">t</span><span class="MJXp-msubsup" id="MJXp-Span-64"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65" style="margin-right: 0.05em;">s</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-66" style="vertical-align: -0.4em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">a</span><span class="MJXp-msubsup" id="MJXp-Span-72"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-74" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-75" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76">p</span><span class="MJXp-mo" id="MJXp-Span-77" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-78">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">g</span><span class="MJXp-msubsup" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-85" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-87">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">g</span><span class="MJXp-msubsup" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-94" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-95" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-96"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-98" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">p</span><span class="MJXp-mo" id="MJXp-Span-101" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-102">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">g</span><span class="MJXp-msubsup" id="MJXp-Span-107"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-109" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">n</span><span class="MJXp-mtext" id="MJXp-Span-112">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">t</span><span class="MJXp-mtext" id="MJXp-Span-117">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">g</span><span class="MJXp-msubsup" id="MJXp-Span-122"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-124" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">d</span><span class="MJXp-mtext" id="MJXp-Span-126">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">g</span><span class="MJXp-msubsup" id="MJXp-Span-131"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-133" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="97.508ex" height="2.66ex" viewBox="0 -832 41982.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-73" x="0" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-4F" x="12576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="13340" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="14218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="14685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="15165" y="0"></use><g transform="translate(15695,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-28" x="16605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-70" x="16994" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-2C" x="17498" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="18193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="18678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="19557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="20023" y="0"></use><g transform="translate(20504,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-2C" x="21378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="22073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="22558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="23437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="23903" y="0"></use><g transform="translate(24384,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-29" x="25357" y="0"></use><g transform="translate(25746,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-28" x="26772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-70" x="27161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-2C" x="27665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="28360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="28845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="29724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="30190" y="0"></use><g transform="translate(30671,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-29" x="31545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6E" x="31934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-63" x="32785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-64" x="33218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="33742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-74" x="34227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="34839" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="35324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="36203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="36669" y="0"></use><g transform="translate(37150,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-64" x="38024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="38797" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="39283" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="40161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="40628" y="0"></use><g transform="translate(41108,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> L_o (p, \ omega_o) = \ int \ limits_ \ Omega f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_id \ omega_i </script></p><br><p>  Al principio parece aterrador, pero lo desmontaremos gradualmente, en partes, y verá cuán lentamente comenzará a tener sentido.  Para entender esta ecuación tendremos que profundizar un poco más en la radiometría.  <b>La radiometría</b> es la ciencia de medir la radiación electromagnética (incluida la luz visible).  Hay varias cantidades radiométricas que podemos usar para medir la iluminación, pero solo usaremos una relacionada con la ecuación de reflexión, conocida como Energy Luminance (inglés radiance) y designada aquí por la letra L. EI se usa para cuantificar la magnitud o intensidad de la luz, viniendo de cierta dirección.  EJ, a su vez, es una combinación de varias cantidades físicas, y para que nos resulte más fácil imaginarlo, nos centraremos en cada una de ellas individualmente. </p><br><h4>  Flujo radiante </h4><br><p>  Flujo de radiación ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-134"><span class="MJXp-mtext" id="MJXp-Span-135">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.468ex" height="2.057ex" viewBox="0 -780.1 1923.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-50" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-68" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="1578" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ Phi </script>  ) es el poder de la energía transmitida por la luz, medida en vatios.  La energía total de la luz consta de muchos términos para diferentes longitudes de onda, cada una de las cuales corresponde a su propio color del espectro.  La energía emitida por la fuente de luz, en este caso, puede representarse en función de todas estas longitudes de onda.  Las longitudes de onda de 390 nm a 700 nm constituyen la parte visible del espectro, es decir, la radiación en este rango puede ser percibida por el ojo humano.  En la imagen a continuación puede ver los valores de las energías para diferentes longitudes de onda que componen la luz del día: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j2/zh/ua/j2zhuav_87v_hkjgtnrfdx6zfku.png"></div><br><p>  El flujo de radiación corresponde al área bajo el gráfico de esta función para todas las longitudes de onda.  El uso directo de las longitudes de onda de la luz como entrada en los gráficos de computadora no es práctico, por lo que recurrimos a una representación simplificada del flujo de radiación, en lugar de utilizar una función de todas las longitudes de onda, un triplete de colores, conocido como RGB (o, como generalmente lo llamamos, el color de la iluminación).  Tal vista conduce a una pérdida de información, pero en general afectará ligeramente la imagen final. </p><br><h4>  Ángulo sólido </h4><br><p>  <b>Ángulo sólido</b> denotado por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-139"><span class="MJXp-mtext" id="MJXp-Span-140">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="2561" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> \ omega </script>  nos da el tamaño o área de la figura proyectada en la esfera de la unidad.  Puedes imaginarlo como una dirección que tiene un volumen de: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/ny/ye/wenyyer9rdwbemjnf2tphc1w834.png"></div><br><p>  Imagina que estás en el centro de una esfera y estás mirando en la dirección de la figura.  El tamaño de la silueta resultante será un ángulo sólido. </p><br><h4>  Intensidad de la radiación </h4><br><p>  La fuerza de radiación mide la cantidad de flujo de radiación por ángulo sólido, o la fuerza de una fuente de luz por unidad de área definida por el ángulo sólido.  Por ejemplo, para una fuente de luz omnidireccional que emite igualmente en todas las direcciones, la fuerza de radiación significa la energía de la luz por área específica (ángulo sólido): </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/su/lr/ehsulrpsqjeqji2j0cypfxonzxa.png"></div><br><p>  La ecuación que describe la fuerza de la radiación se ve así: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-146"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">I</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-149">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">c</span><span class="MJXp-mrow" id="MJXp-Span-154"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">d</span><span class="MJXp-mtext" id="MJXp-Span-156">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">i</span></span><span class="MJXp-mrow" id="MJXp-Span-160"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">d</span><span class="MJXp-mtext" id="MJXp-Span-162">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">a</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.492ex" height="2.419ex" viewBox="0 -780.1 10114.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-66" x="2088" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-72" x="2639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-63" x="3620" y="0"></use><g transform="translate(4053,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-50" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-68" x="1525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-69" x="2101" y="0"></use></g><g transform="translate(6500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="2604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="3084" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> I = \ frac {d \ Phi} {d \ omega} </script></p><br><p>  , donde I es el flujo de radiación f por ángulo sólido <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-168"><span class="MJXp-mrow" id="MJXp-Span-169"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">d</span><span class="MJXp-mtext" id="MJXp-Span-171">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">a</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.394ex" height="2.419ex" viewBox="0 -780.1 3614 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-67" x="2604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhhhM0JtbBVUyqRo0cd4c2oNCd8JNg#MJMATHI-61" x="3084" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> {d \ omega} </script></p><br><p>  Conociendo el flujo de radiación, la fuerza y ​​el ángulo sólido, podemos describir la ecuación de brillo de energía que describe la energía total observada en el área A, limitada por el ángulo sólido O para la luz por la fuerza <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-177"><span class="MJXp-mtext" id="MJXp-Span-178">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> \ Phi </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-182"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">L</span><span class="MJXp-mo" id="MJXp-Span-184" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-185">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">c</span><span class="MJXp-mrow" id="MJXp-Span-190"><span class="MJXp-msubsup" id="MJXp-Span-191"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192" style="margin-right: 0.05em;">d</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-193" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-194">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">i</span></span><span class="MJXp-mrow" id="MJXp-Span-198"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">d</span><span class="MJXp-mtext" id="MJXp-Span-202">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">a</span><span class="MJXp-mtext" id="MJXp-Span-208">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">s</span><span class="MJXp-mtext" id="MJXp-Span-212">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">a</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> L = \ frac {d ^ 2 \ Phi} {dA d \ omega \ cos \ theta} </script></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sv/lk/lf/svlklfokpxawonv99tzx8a2fg-a.png"></div><br><p>  El brillo energético es la cantidad radiométrica de luz en un área que depende del ángulo de la luz incidente. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-218"><span class="MJXp-mtext" id="MJXp-Span-219">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> \ theta </script>  (ángulo entre la dirección de la luz y la normal a la superficie) a través <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">s</span><span class="MJXp-mtext" id="MJXp-Span-229">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> cos \ theta </script>  : La luz es más débil cuando se emite a lo largo de la superficie y es más fuerte cuando está perpendicular a ella.  Esto es similar a nuestros cálculos para luz difusa en el tutorial sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conceptos básicos de iluminación</a> desde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-235"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">s</span><span class="MJXp-mtext" id="MJXp-Span-239">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> cos \ theta </script>  nada más que un producto escalar entre la dirección de la luz y el vector normal a la superficie: <br></p><pre> <code class="plaintext hljs">float cosTheta = dot(lightDir, N);</code> </pre> <br><p>  La ecuación de brillo de energía es muy útil para nosotros, porque contiene la mayoría de las cantidades físicas que nos interesan.  Si suponemos que el ángulo sólido ω y el área A son infinitesimales, podemos usar el EE para medir el flujo de un rayo de luz por un punto en el espacio.  Esto nos permitirá calcular la IE de un solo rayo de luz que actúa sobre un único punto (fragmento);  en realidad traducimos el ángulo sólido <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-245"><span class="MJXp-mtext" id="MJXp-Span-246">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> \ omega </script>  en vector de dirección <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-252"><span class="MJXp-mtext" id="MJXp-Span-253">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> \ omega </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-259"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">A</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> A </script>  hasta el punto <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> p </script>  .  Por lo tanto, podemos usar directamente la EI en nuestros sombreadores para calcular la contribución de un solo rayo de luz para cada fragmento. </p><br><p>  De hecho, cuando se trata de EE, generalmente estamos interesados ​​en todo el incidente de luz entrante en el punto p, que es la suma de todo el EE, y se conoce como irradiancia.  Conociendo la IE y la irradiación, podemos volver a la ecuación de reflexión: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-263"><span class="MJXp-msubsup" id="MJXp-Span-264"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-266" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">p</span><span class="MJXp-mo" id="MJXp-Span-269" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-270">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">g</span><span class="MJXp-msubsup" id="MJXp-Span-275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-277" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-278" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-279" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-280">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">t</span><span class="MJXp-mtext" id="MJXp-Span-284">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">t</span><span class="MJXp-msubsup" id="MJXp-Span-290"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291" style="margin-right: 0.05em;">s</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-292" style="vertical-align: -0.4em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">a</span><span class="MJXp-msubsup" id="MJXp-Span-298"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-300" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-301" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">p</span><span class="MJXp-mo" id="MJXp-Span-303" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-304">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">g</span><span class="MJXp-msubsup" id="MJXp-Span-309"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-311" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-312" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-313">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">g</span><span class="MJXp-msubsup" id="MJXp-Span-318"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-320" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-322"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-324" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-325" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">p</span><span class="MJXp-mo" id="MJXp-Span-327" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-328">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">g</span><span class="MJXp-msubsup" id="MJXp-Span-333"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-335" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-336" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">n</span><span class="MJXp-mtext" id="MJXp-Span-338">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">t</span><span class="MJXp-mtext" id="MJXp-Span-343">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">g</span><span class="MJXp-msubsup" id="MJXp-Span-348"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-350" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">d</span><span class="MJXp-mtext" id="MJXp-Span-352">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">g</span><span class="MJXp-msubsup" id="MJXp-Span-357"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-359" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-22"> L_o (p, \ omega_o) = \ int \ limits_ \ Omega f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_id \ omega_i </script></p><br><p>  Ahora sabemos que <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-360"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-361">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> L </script>  en la ecuación de representación es la EI para algún punto de la superficie py un ángulo sólido infinitamente pequeño de la luz entrante <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-362"><span class="MJXp-mtext" id="MJXp-Span-363">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367">g</span><span class="MJXp-msubsup" id="MJXp-Span-368"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-370" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> \ omega_i </script>  , que puede considerarse como un vector de dirección de entrada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-371"><span class="MJXp-mtext" id="MJXp-Span-372">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">g</span><span class="MJXp-msubsup" id="MJXp-Span-377"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-379" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> \ omega_i </script>  .  Recuerda que la energía se multiplica por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-380"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">s</span><span class="MJXp-mtext" id="MJXp-Span-384">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> cos \ theta </script>  - el ángulo entre la dirección de incidencia de la luz y la normal a la superficie, que se expresa en la ecuación de reflexión del producto <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-390"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">n</span><span class="MJXp-mtext" id="MJXp-Span-392">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">t</span><span class="MJXp-mtext" id="MJXp-Span-397">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">g</span><span class="MJXp-msubsup" id="MJXp-Span-402"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-404" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> n \ cdot \ omega_i </script>  .  La ecuación de reflexión calcula la suma de la EI reflejada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-405"><span class="MJXp-msubsup" id="MJXp-Span-406"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-408" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-409" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">p</span><span class="MJXp-mo" id="MJXp-Span-411" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-412">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">g</span><span class="MJXp-msubsup" id="MJXp-Span-417"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-419" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> L_o (p, \ omega_o) </script>  puntos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-421"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> p </script>  hacia <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-423"><span class="MJXp-msubsup" id="MJXp-Span-424"><span class="MJXp-mrow" id="MJXp-Span-425" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-426" style="margin-left: 0em; margin-right: 0em;">ω</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-427" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> ω_o </script>  , que es la dirección saliente para el observador.  O si no: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-428"><span class="MJXp-msubsup" id="MJXp-Span-429"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-431" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> L_o </script>  mide la irradiancia reflejada de un punto <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> p </script>  si se ve desde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-434"><span class="MJXp-mtext" id="MJXp-Span-435">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">g</span><span class="MJXp-msubsup" id="MJXp-Span-440"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-442" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ omega_o </script>  . </p><br><p>  Dado que la ecuación de reflexión se basa en la irradiación, que es la suma de toda la radiación entrante, medimos la luz no solo de una dirección de luz entrante, sino de todas las direcciones de luz entrantes dentro del hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-443"><span class="MJXp-mtext" id="MJXp-Span-444">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> \ Omega </script>  centrado en <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-450"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> p </script>  .  Se puede describir como media esfera orientada a lo largo de la superficie normal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-452"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> n </script>  : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/nq/lo/gtnqlobxm8_ovo8fu5p2xtrls1i.png"></div><br><p>  Para calcular la suma de todos los valores dentro de la región o, en el caso de un hemisferio, el volumen, integramos la ecuación en todas las direcciones entrantes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-454"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">d</span><span class="MJXp-mtext" id="MJXp-Span-456">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">g</span><span class="MJXp-msubsup" id="MJXp-Span-461"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-463" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> d \ omega_i </script>  dentro del hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-464"><span class="MJXp-mtext" id="MJXp-Span-465">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> \ Omega </script>  .  Como no existe una solución analítica tanto para la ecuación de render como para la ecuación de reflexión, resolveremos la integral numéricamente.  Esto significa que obtendremos resultados para pequeños pasos discretos de la ecuación de reflexión del hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-471"><span class="MJXp-mtext" id="MJXp-Span-472">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> \ Omega </script>  y promediarlos sobre el tamaño del paso.  Esto se llama la <b>suma de Riemann</b> , que podemos representar aproximadamente con el siguiente código: </p><br><pre> <code class="plaintext hljs">int steps = 100; float sum = 0.0f; vec3 P = ...; vec3 Wo = ...; vec3 N = ...; float dW = 1.0f / steps; for(int i = 0; i &lt; steps; ++i) { vec3 Wi = getNextIncomingLightDir(i); sum += Fr(P, Wi, Wo) * L(P, Wi) * dot(N, Wi) * dW; }</code> </pre><br><p>  dW para cada paso discreto puede considerarse como <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-478"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">d</span><span class="MJXp-mtext" id="MJXp-Span-480">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">g</span><span class="MJXp-msubsup" id="MJXp-Span-485"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-487" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> d \ omega_i </script>  en la ecuación de reflexión.  Matemáticamente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-488"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">d</span><span class="MJXp-mtext" id="MJXp-Span-490">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">g</span><span class="MJXp-msubsup" id="MJXp-Span-495"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-497" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> d \ omega_i </script>  es el diferencial por el cual calculamos la integral, y aunque no es lo mismo que dW en el código (ya que este es un paso discreto de la suma de Riemann), podemos considerarlo como tal para facilitar el cálculo.  Tenga en cuenta que el uso de pasos discretos siempre nos dará una cantidad aproximada, no el valor exacto de la integral.  Un lector atento notará que podemos aumentar la precisión de la suma de Riemann al aumentar el número de pasos. </p><br><p>  La ecuación de reflexión resume la radiación de todas las direcciones de luz entrantes. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-498"><span class="MJXp-mtext" id="MJXp-Span-499">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">g</span><span class="MJXp-msubsup" id="MJXp-Span-504"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-506" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> \ omega_i </script>  hemisferio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-507"><span class="MJXp-mtext" id="MJXp-Span-508">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> \ Omega </script>  eso llega al punto <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-514"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> p </script>  y devuelve la cantidad de luz reflejada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-516"><span class="MJXp-msubsup" id="MJXp-Span-517"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-519" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> L_o </script>  hacia el espectador.  La radiación entrante puede provenir de fuentes de luz con las que ya estamos familiarizados, o de mapas ambientales que determinan el EI de cada dirección entrante, de lo que hablaremos en el tutorial de IBL. </p><br><p>  Ahora lo único desconocido a la izquierda es el símbolo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-520"><span class="MJXp-msubsup" id="MJXp-Span-521"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-523" style="vertical-align: -0.4em;">r</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46"> f_r </script>  , conocida como la función <b>BRDF</b> o la <b>función de reflectancia de dos haces</b> , que escala (o pesa) el valor de la radiación entrante en función de las propiedades del material de la superficie. </p><br><h3>  BRDF </h3><br><p>  BRDF es una función que acepta la dirección de la luz incidente. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-524"><span class="MJXp-mtext" id="MJXp-Span-525">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">g</span><span class="MJXp-msubsup" id="MJXp-Span-530"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-532" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> \ omega_i </script>  , dirección al observador <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-533"><span class="MJXp-mtext" id="MJXp-Span-534">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">g</span><span class="MJXp-msubsup" id="MJXp-Span-539"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-540" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-541" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> \ omega_o </script>  normal a la superficie <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-542"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> n </script>  y parámetro <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-544"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-545">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> a </script>  , que es la rugosidad de la superficie.  BRDF se aproxima a la cantidad de cada haz de luz individual <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-546"><span class="MJXp-mtext" id="MJXp-Span-547">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551">g</span><span class="MJXp-msubsup" id="MJXp-Span-552"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-554" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> \ omega_i </script>  contribuye a la luz reflejada final de una superficie opaca, teniendo en cuenta las propiedades de su material.  Por ejemplo, si la superficie es completamente lisa (casi como un espejo), la función BRDF devolverá 0.0 para todos los rayos de luz entrantes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-555"><span class="MJXp-mtext" id="MJXp-Span-556">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">g</span><span class="MJXp-msubsup" id="MJXp-Span-561"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-563" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> \ omega_i </script>  excepto uno que tenga el mismo ángulo (después de la reflexión) que el haz <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-564"><span class="MJXp-mtext" id="MJXp-Span-565">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569">g</span><span class="MJXp-msubsup" id="MJXp-Span-570"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-572" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> \ omega_o </script>  para lo cual la función devolverá 1.0. </p><br><p>  BRDF se aproxima a las propiedades reflectantes y refractivas de un material basado en la teoría de micro caras mencionada anteriormente.  Para que el BRDF sea físicamente plausible, debe obedecer la ley de conservación de la energía, es decir, la energía total de la luz reflejada nunca debe exceder la energía de la luz incidente.  Técnicamente, el modelo Blinn-Fong se considera un BRDF que acepta lo mismo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-573"><span class="MJXp-mtext" id="MJXp-Span-574">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578">g</span><span class="MJXp-msubsup" id="MJXp-Span-579"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-581" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54"> \ omega_i </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-582"><span class="MJXp-mtext" id="MJXp-Span-583">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">g</span><span class="MJXp-msubsup" id="MJXp-Span-588"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-590" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> \ omega_o </script>  en la entrada  Sin embargo, el modelo Blinn-Fong no se considera físicamente correcto, ya que no garantiza el cumplimiento de la ley de conservación de energía.  Hay varios BRDF físicamente correctos para aproximar la respuesta de la superficie a la iluminación.  Sin embargo, casi todas las canalizaciones de gráficos en tiempo real utilizan el BRDF, conocido como <b>Cook-Torrance BRDF</b> . </p><br><p>  Cook-Torrens BRDF contiene una parte difusa y una espejo: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-591"><span class="MJXp-msubsup" id="MJXp-Span-592"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-594" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-595" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-596"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-597" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-598" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-msubsup" id="MJXp-Span-599"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-601" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608">t</span></span></span><span class="MJXp-mo" id="MJXp-Span-609" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-610"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-612" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-msubsup" id="MJXp-Span-613"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-615" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-622">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">o</span><span class="MJXp-mo" id="MJXp-Span-624">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-632">e</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-56"> f_r = k_df_ {lambert} + k_sf_ {cocinero - torrance} </script></p><br><p>  aqui <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-633"><span class="MJXp-msubsup" id="MJXp-Span-634"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-636" style="vertical-align: -0.4em;">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> k_d </script>  - fracción refractada de la energía luminosa entrante, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-637"><span class="MJXp-msubsup" id="MJXp-Span-638"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-640" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> k_s </script>  - reflejado.  El lado izquierdo del BRDF contiene la parte difusa de la ecuación, denotada aquí como <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-641"><span class="MJXp-msubsup" id="MJXp-Span-642"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-644" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">t</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> f_ {lambert} </script>  .  Esta es la llamada dispersión de Lambert.  Es similar a lo que usamos para la iluminación difusa, y es constante: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-652"><span class="MJXp-msubsup" id="MJXp-Span-653"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-655" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-658">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-660">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-661">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">t</span></span></span><span class="MJXp-mo" id="MJXp-Span-663" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-664">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">c</span><span class="MJXp-mrow" id="MJXp-Span-669"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">c</span></span><span class="MJXp-mrow" id="MJXp-Span-671"><span class="MJXp-mtext" id="MJXp-Span-672">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-674">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-60"> f_ {lambert} = \ frac {c} {\ pi} </script></p><br><p>  donde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-675"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676">c</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61"> c </script>  - albedo o color superficial (textura superficial difusa).  División por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-677"><span class="MJXp-mtext" id="MJXp-Span-678">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> \ pi </script>  necesario para normalizar la luz dispersa, ya que la integral que contiene BRDF anteriormente indicada se multiplica por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-681"><span class="MJXp-mtext" id="MJXp-Span-682">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-683">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63"> \ pi </script>  (llegaremos a esto en el tutorial de IBL). </p><br><blockquote>  Puede que se sorprenda de cómo esta dispersión lambertiana se asemeja a la expresión de iluminación difusa que usamos antes: el color de la superficie multiplicado por el producto escalar entre la superficie normal y la dirección de la luz.  El producto escalar todavía está presente, pero se infiere del BRDF, ya que tenemos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-685"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">n</span><span class="MJXp-mtext" id="MJXp-Span-687">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-689">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-691">t</span><span class="MJXp-mtext" id="MJXp-Span-692">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-693">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">g</span><span class="MJXp-msubsup" id="MJXp-Span-697"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-698" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-699" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64"> n \ cdot \ omega_i </script>  en la integral <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-700"><span class="MJXp-msubsup" id="MJXp-Span-701"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-703" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65"> L_o </script>  . </blockquote><br><p>  Hay varias ecuaciones para la parte difusa de BRDF que parecen más realistas, pero son más caras en términos de rendimiento.  Además, como concluyeron los Epic Games: la dispersión lambertiana es suficiente para la mayoría de los propósitos de renderizado en tiempo real. </p><br><p>  La porción del espejo del Cook-Torrens BRDF se mejora ligeramente y se describe como: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-704"><span class="MJXp-msubsup" id="MJXp-Span-705"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-707" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-711">k</span><span class="MJXp-mo" id="MJXp-Span-712">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-713">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-716">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720">e</span></span></span><span class="MJXp-mo" id="MJXp-Span-721" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-722">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-725">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-726">c</span><span class="MJXp-mrow" id="MJXp-Span-727"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-728">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730">G</span></span><span class="MJXp-mrow" id="MJXp-Span-731"><span class="MJXp-mn" id="MJXp-Span-732">4</span><span class="MJXp-mo" id="MJXp-Span-733" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-734">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738">g</span><span class="MJXp-msubsup" id="MJXp-Span-739"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-741" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-742">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-743">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">n</span><span class="MJXp-mo" id="MJXp-Span-748" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-749" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-750">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-751">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-752">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754">g</span><span class="MJXp-msubsup" id="MJXp-Span-755"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-757" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-758">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-759">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-761">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763">n</span><span class="MJXp-mo" id="MJXp-Span-764" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-66"> f_ {cook - torrance} = \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br><p>  Consta de tres funciones y un coeficiente de estandarización en el denominador.  Cada una de las letras D, F y G representa un cierto tipo de función que se aproxima a una cierta parte de las propiedades reflectantes de la superficie.  Se conocen como la función de distribución normal (NDF), la ecuación de Fresnel y la función de geometría: <br></p><ul><li>  Función de distribución normal: aproxima el número de microfaces de superficie orientadas a lo largo del vector mediano, en función de la rugosidad de la superficie;  Esta es la función principal que se aproxima a las micro caras. </li><li>  Función de geometría: describe la propiedad de sombreado automático de las micro caras.  Cuando la superficie es bastante rugosa, algunas microcaras de la superficie pueden superponerse a otras, reduciendo así la cantidad de luz reflejada por la superficie. </li><li>  Ecuación de Fresnel: describe el coeficiente de reflexión de la superficie en diferentes ángulos. </li></ul><br><p>  Cada una de estas funciones es una aproximación de su equivalente físico, y para ellas hay varias implementaciones destinadas a una aproximación más precisa al modelo físico subyacente;  algunos dan resultados más realistas, otros son más efectivos en términos de rendimiento.  Brian Caris, de Epic Games, ha investigado mucho sobre diferentes tipos de aproximaciones, sobre las que puede obtener más información <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> .  Utilizaremos las mismas funciones que en Unreal Engine 4 de Epic Games, a saber: <i>Trowbridge-Reitz GGX</i> para D, aproximación de <i>Fresnel-Schlick</i> para F y <i>Smith's Schlick-GGX</i> para G. </p><br><h3>  Función de distribución normal </h3><br><p>  La función de distribución normal D aproxima estadísticamente el área de superficie relativa de las micro caras que están orientadas con precisión a lo largo del vector mediano <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-765"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-766">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67"> h </script>  .  Hay muchos NDF que determinan la aproximación estadística de la alineación general de las micro caras teniendo en cuenta algunos parámetros de rugosidad.  Utilizaremos uno conocido como Trowbridge-Reitz GGX: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-767"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-768">N</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769">D</span><span class="MJXp-msubsup" id="MJXp-Span-770"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-771" style="margin-right: 0.05em;">F</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-772" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-773">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-774">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775">X</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-776">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-777">R</span></span></span><span class="MJXp-mo" id="MJXp-Span-778" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-779">n</span><span class="MJXp-mo" id="MJXp-Span-780" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-781">h</span><span class="MJXp-mo" id="MJXp-Span-782" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-783">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-784">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788">a</span><span class="MJXp-mo" id="MJXp-Span-789" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-790" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-791">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-793">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-794">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795">c</span><span class="MJXp-mrow" id="MJXp-Span-796"><span class="MJXp-mtext" id="MJXp-Span-797">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-800">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801">h</span><span class="MJXp-msubsup" id="MJXp-Span-802"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-803" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-804" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-805"><span class="MJXp-mtext" id="MJXp-Span-806">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-807">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808">i</span><span class="MJXp-mo" id="MJXp-Span-809" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-810" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811">n</span><span class="MJXp-mtext" id="MJXp-Span-812">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-813">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-814">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-816">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-817">h</span><span class="MJXp-msubsup" id="MJXp-Span-818"><span class="MJXp-mo" id="MJXp-Span-819" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-820" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-821" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-822">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-823">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-824">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-825">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826">h</span><span class="MJXp-msubsup" id="MJXp-Span-827"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-829" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-830" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-831">1</span><span class="MJXp-mo" id="MJXp-Span-832" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-833" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-834">1</span><span class="MJXp-msubsup" id="MJXp-Span-835"><span class="MJXp-mo" id="MJXp-Span-836" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-837" style="vertical-align: 0.5em;">2</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-68-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-68"> NDF_ {GGXTR} (n, h, \ alpha) = \ frac {\ alpha ^ 2} {\ pi ((n \ cdot h) ^ 2 (\ alpha ^ 2−1) +1) ^ 2} </script></p><br><p>  aqui <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-838"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-69-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-69"> h </script>  Es el vector mediano <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-840"><span class="MJXp-mtext" id="MJXp-Span-841">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-843">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-845">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-70"> \ alpha </script>  - valor de la rugosidad de la superficie.  Si elegimos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-847"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-848">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-71"> h </script>  como el vector mediano entre lo normal a la superficie y la dirección de la luz, luego cambiando el parámetro de rugosidad, obtenemos la siguiente imagen: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/xh/kr/soxhkr5idspt29qlldjrkq4rhqm.png"></div><br><p>  Cuando la rugosidad es pequeña (es decir, la superficie es lisa), las micro caras orientadas en la dirección del vector mediano se concentran en un radio pequeño.  Debido a esta alta concentración, NDF da un punto muy brillante.  En una superficie rugosa, donde las micro caras están orientadas en direcciones más aleatorias, encontrará un número mucho mayor de micro caras orientadas en la dirección del vector mediano <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-849"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-72"> h </script>  pero ubicado en un radio mayor, lo que hace que el color plano sea más gris. </p><br><p>  En el código GLSL, la función de distribución normal Trowbridge-Reitz GGX se verá así: </p><br><pre> <code class="plaintext hljs">float DistributionGGX(vec3 N, vec3 H, float a) { float a2 = a*a; float NdotH = max(dot(N, H), 0.0); float NdotH2 = NdotH*NdotH; float nom = a2; float denom = (NdotH2 * (a2 - 1.0) + 1.0); denom = PI * denom * denom; return nom / denom; }</code> </pre> <br><h3>  Función de geometría </h3><br><p>  La función de geometría se aproxima estadísticamente al área de superficie relativa, donde se superponen sus irregularidades microscópicas, lo que evita que penetren los rayos de luz. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4v/gq/zv/4vgqzvlt9uye7cbn_ejq9v6b8cm.png"></div><br><p>  Como en el caso de NDF, la función de geometría acepta el coeficiente de rugosidad de la superficie como entrada, lo que en este caso significa lo siguiente: las superficies más rugosas tendrán una mayor probabilidad de sombrear las microcaras.  La función de geometría que utilizaremos es una combinación de las aproximaciones de GGX y Schlick-Beckmann, y se conoce como Schlick-GGX: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-851"><span class="MJXp-msubsup" id="MJXp-Span-852"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-854" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-856">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-857">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-858">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-859">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-860">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-861">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-862">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-863">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864">X</span></span></span><span class="MJXp-mo" id="MJXp-Span-865" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-866">n</span><span class="MJXp-mo" id="MJXp-Span-867" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868">v</span><span class="MJXp-mo" id="MJXp-Span-869" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870">k</span><span class="MJXp-mo" id="MJXp-Span-871" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-872" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-873">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-875">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-876">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-877">c</span><span class="MJXp-mrow" id="MJXp-Span-878"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-879">n</span><span class="MJXp-mtext" id="MJXp-Span-880">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-882">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-883">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-884">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-885">v</span></span><span class="MJXp-mrow" id="MJXp-Span-886"><span class="MJXp-mo" id="MJXp-Span-887" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-888">n</span><span class="MJXp-mtext" id="MJXp-Span-889">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-890">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-892">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-893">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-894">v</span><span class="MJXp-mo" id="MJXp-Span-895" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-896" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-897">1</span><span class="MJXp-mo" id="MJXp-Span-898" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-899">k</span><span class="MJXp-mo" id="MJXp-Span-900" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-901" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-902">k</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-73-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-73"> G_ {SchlickGGX} (n, v, k) = \ frac {n \ cdot v} {(n \ cdot v) (1 - k) + k} </script></p><br><p>  Aqui <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-903"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-904">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-74-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-74"> k </script>  es una redesignación <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-905"><span class="MJXp-mtext" id="MJXp-Span-906">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-907">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-908">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-909">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-910">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-75-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-75"> \ alpha </script>  dependiendo de si usamos la función de geometría para iluminación directa o iluminación IBL: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-912"><span class="MJXp-msubsup" id="MJXp-Span-913"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-914" style="margin-right: 0.05em;">k</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-915" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-916">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-917">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-921">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-923" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-924">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-926">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-928">c</span><span class="MJXp-mrow" id="MJXp-Span-929"><span class="MJXp-mo" id="MJXp-Span-930" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-931">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-932">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-933">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-934">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-935">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936">a</span><span class="MJXp-mo" id="MJXp-Span-937" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-938">1</span><span class="MJXp-msubsup" id="MJXp-Span-939"><span class="MJXp-mo" id="MJXp-Span-940" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-941" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-942"><span class="MJXp-mn" id="MJXp-Span-943">8</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-76-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-76"> k_ {directo} = \ frac {(\ alpha + 1) ^ 2} {8} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-944"><span class="MJXp-msubsup" id="MJXp-Span-945"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946" style="margin-right: 0.05em;">k</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-947" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-949">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-950">L</span></span></span><span class="MJXp-mo" id="MJXp-Span-951" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-952">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-953">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-954">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-955">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-956">c</span><span class="MJXp-mrow" id="MJXp-Span-957"><span class="MJXp-mtext" id="MJXp-Span-958">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-959">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-960">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-961">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-962">h</span><span class="MJXp-msubsup" id="MJXp-Span-963"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-964" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-965" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-966"><span class="MJXp-mn" id="MJXp-Span-967">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-77-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-77"> k_ {IBL} = \ frac {\ alpha ^ 2} {2} </script></p><br><p>  Tenga en cuenta que el valor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-968"><span class="MJXp-mtext" id="MJXp-Span-969">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-970">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-971">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-973">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-974">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-78-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-78"> \ alpha </script>  puede variar dependiendo de cómo su motor traduzca la aspereza en <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-975"><span class="MJXp-mtext" id="MJXp-Span-976">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-977">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-978">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-979">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-980">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-981">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-79-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-79"> \ alpha </script>  .  En las siguientes lecciones discutiremos en detalle cómo y dónde esta reasignación se vuelve relevante. </p><br><p>  Para aproximar efectivamente la geometría, debemos tener en cuenta tanto la dirección de la vista (geometría superpuesta) como el vector de dirección de la luz (auto-sombreado de la geometría).  Podemos considerar ambos casos utilizando <i>el método Smith</i> : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-982"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-983">G</span><span class="MJXp-mo" id="MJXp-Span-984" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-985">n</span><span class="MJXp-mo" id="MJXp-Span-986" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-987">v</span><span class="MJXp-mo" id="MJXp-Span-988" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-989">l</span><span class="MJXp-mo" id="MJXp-Span-990" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-991">k</span><span class="MJXp-mo" id="MJXp-Span-992" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-993" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-994"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-995" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-996" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-997">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-999">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-1000" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001">n</span><span class="MJXp-mo" id="MJXp-Span-1002" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1003">v</span><span class="MJXp-mo" id="MJXp-Span-1004" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1005">k</span><span class="MJXp-mo" id="MJXp-Span-1006" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1007"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1008" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1009" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1010">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1011">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1012">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-1013" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1014">n</span><span class="MJXp-mo" id="MJXp-Span-1015" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1016">l</span><span class="MJXp-mo" id="MJXp-Span-1017" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1018">k</span><span class="MJXp-mo" id="MJXp-Span-1019" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-80-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-80"> G (n, v, l, k) = G_ {sub} (n, v, k) G_ {sub} (n, l, k) </script></p><br><p>  Usando el Método Smith con Schlick-GGX como <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1020"><span class="MJXp-msubsup" id="MJXp-Span-1021"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1022" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1023" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1024">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1025">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1026">b</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-81-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-81"> G_ {sub} </script>  da la siguiente imagen con diferente rugosidad R: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vk/st/b5/vkstb5lml6vvdrr5i9aiexawkuq.png"></div><br><p>  La función de geometría es un factor entre [0.0, 1.0], donde el blanco (o 1.0) significa que no hay sombreado de las micro-caras, y el negro (o 0.0) significa el sombreado completo de las micro-caras. </p><br><p>  En GLSL, una función de geometría se convierte al siguiente código: </p><br><pre> <code class="plaintext hljs">float GeometrySchlickGGX(float NdotV, float k) { float nom = NdotV; float denom = NdotV * (1.0 - k) + k; return nom / denom; } float GeometrySmith(vec3 N, vec3 V, vec3 L, float k) { float NdotV = max(dot(N, V), 0.0); float NdotL = max(dot(N, L), 0.0); float ggx1 = GeometrySchlickGGX(NdotV, k); float ggx2 = GeometrySchlickGGX(NdotL, k); return ggx1 * ggx2; }</code> </pre><br><h3>  Ecuación de Fresnel </h3><br><p>  La ecuación de Fresnel describe la proporción de luz reflejada y refractada, que depende del ángulo en el que miramos la superficie.  Cuando la luz golpea una superficie, la ecuación de Fresnel nos da el porcentaje de luz reflejada en función del ángulo en el que vemos esta superficie.  A partir de esta relación de reflexión y la ley de conservación de la energía, podemos obtener directamente la parte refractada de la luz, que será igual a la energía restante. </p><br><p>  Cada superficie o material tiene un nivel de <i>reflectividad básica</i> , que se observa cuando se mira directamente a la superficie, pero si se observa la superficie en ángulo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">todas las</a> reflexiones se vuelven más notables.  Puede verificar esto usted mismo mirando su mesa probablemente de madera o metal primero perpendicularmente y luego en un ángulo cercano a 90 grados.  Verá que los reflejos se vuelven mucho más notables.  Todas las superficies, teóricamente, reflejan completamente la luz cuando se ven desde ellas en un ángulo ideal de 90 grados.  Este efecto se llama Fresnel y se describe <b>mediante la ecuación de Fresnel</b> . </p><br><p>  La ecuación de Fresnel es bastante compleja, pero, afortunadamente, se puede simplificar usando <b>la aproximación de Fresnel-Schlick</b> : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1027"><span class="MJXp-msubsup" id="MJXp-Span-1028"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1029" style="margin-right: 0.05em;">F</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1030" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1031">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1033">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1034">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1035">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1036">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-1038" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1039">h</span><span class="MJXp-mo" id="MJXp-Span-1040" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1041">v</span><span class="MJXp-mo" id="MJXp-Span-1042" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1043"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1044" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1045" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1046" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1047" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1048"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1049" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1050" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1051" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1052" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1053">1</span><span class="MJXp-mo" id="MJXp-Span-1054" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-1055"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1056" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1057" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1058" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1059" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1060">1</span><span class="MJXp-mo" id="MJXp-Span-1061" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mo" id="MJXp-Span-1062" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1063">h</span><span class="MJXp-mtext" id="MJXp-Span-1064">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1065">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1066">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1067">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1068">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1069">v</span><span class="MJXp-mo" id="MJXp-Span-1070" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1071"><span class="MJXp-mo" id="MJXp-Span-1072" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1073" style="vertical-align: 0.5em;">5</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-82-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-82"> F_ {Schlick} (h, v, F_0) = F_0 + (1 - F_0) (1− (h \ cdot v)) ^ 5 </script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1074"><span class="MJXp-msubsup" id="MJXp-Span-1075"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1076" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1077" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-83-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-83"> F_0 </script>  representa la reflectividad básica de la superficie, que calculamos utilizando algo llamado índices de refracción o <b>IOR</b> (índices de refracción) y, como puede ver en la superficie de la esfera, cuanto más cerca esté la dirección de visualización de los límites de la esfera visible (el ángulo entre la dirección de visualización y la mediana)   90  ),     , , : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xv/mq/ii/xvmqiib7njmsiwhb0c3scdmc53c.png"></div><br><p>   ,    .    ,   -    <i></i>   .    (),          ,         .   ,           ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1078"><span class="MJXp-msubsup" id="MJXp-Span-1079"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1080" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1081" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-84-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-84">F_0</script> ) (  0 ,        )             -,             ,    . </p><br><p>                  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> .   ,  ,       : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/on/0f/zz/on0fzzo6gxv4qtilz0jwu4s-nqc.png"></div><br><p>  :            0.17,    ,  ,            ( )     0.5  1.0.  ,         “”,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1082"><span class="MJXp-msubsup" id="MJXp-Span-1083"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1084" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1085" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-85-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-85">F_0</script>    RGB (           ). </p><br><p>           ,  metallic workflow:        ,    (metalness),  ,     . </p><br><blockquote>       :   ,  ;      ,  .   ,          0.0  1.0.     -         , ,      ,    .          ,      . <br></blockquote><br><p>   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1086"><span class="MJXp-msubsup" id="MJXp-Span-1087"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1088" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1089" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-86-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-86">F_0</script>   ,    ,         -    ,       ,      .      : </p><br><pre> <code class="plaintext hljs">vec3 F0 = vec3(0.04); F0 = mix(F0, surfaceColor.rgb, metalness);</code> </pre><br><p>     ,      .    ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1090"><span class="MJXp-msubsup" id="MJXp-Span-1091"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1092" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1093" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-87-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-87">F_0</script>     .    0.04               . ,     ,       ,   F0   .       ,     ,             . </p><br><p>   -  : </p><br><pre> <code class="plaintext hljs">vec3 fresnelSchlick(float cosTheta, vec3 F0) { return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0); }</code> </pre><br><p>  cosTheta           . </p><br><h3>   - </h3><br><p>    BRDF -        : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1094"><span class="MJXp-msubsup" id="MJXp-Span-1095"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1096" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1097" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1098" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1099">p</span><span class="MJXp-mo" id="MJXp-Span-1100" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1102" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1103" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1104" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1105" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-munderover" id="MJXp-Span-1106"><span class=""><span class="MJXp-mo" id="MJXp-Span-1107" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">∫</span></span></span><span class=" MJXp-script"><span class="MJXp-mi" id="MJXp-Span-1108" style="margin-left: 0px;">Ω</span></span></span><span class="MJXp-mo" id="MJXp-Span-1109" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1110"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1111" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1112" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mfrac" id="MJXp-Span-1113" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1114">c</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1115">π</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1116" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-1117"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1118" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1119" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mfrac" id="MJXp-Span-1120" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1121">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1122">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1123">G</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1124">4</span><span class="MJXp-mo" id="MJXp-Span-1125" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1127" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1128" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1129" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1130">n</span><span class="MJXp-mo" id="MJXp-Span-1131" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1132" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1133"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1134" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1135" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1136" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1137">n</span><span class="MJXp-mo" id="MJXp-Span-1138" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1139" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1141" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1142" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1143" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1144">p</span><span class="MJXp-mo" id="MJXp-Span-1145" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1146"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1147" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1148" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1149" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1150">n</span><span class="MJXp-mo" id="MJXp-Span-1151" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-msubsup" id="MJXp-Span-1152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1153" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1154" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1155">d</span><span class="MJXp-msubsup" id="MJXp-Span-1156"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1157" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1158" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-88-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-88">L_o(p,\omega_o)=\int\limits_\Omega(k_d\frac{c}{\pi}+k_s\frac{DFG}{4(\omega_o\cdot n)(\omega_i \cdot n)}) L_i(p, \omega_i)n\cdot \omega_i d\omega_i</script></p><br><p>       . ,  ,    F       .       <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1159"><span class="MJXp-msubsup" id="MJXp-Span-1160"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1161" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1162" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-89-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-89">k_s</script> ,  ,        <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1163"><span class="MJXp-msubsup" id="MJXp-Span-1164"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1165" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1166" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-90-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-90">k_s</script>  .  ,      : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1167"><span class="MJXp-msubsup" id="MJXp-Span-1168"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1169" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1170" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1171" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1172">p</span><span class="MJXp-mo" id="MJXp-Span-1173" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1174"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1175" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1176" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1177" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1178" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-munderover" id="MJXp-Span-1179"><span class=""><span class="MJXp-mo" id="MJXp-Span-1180" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">∫</span></span></span><span class=" MJXp-script"><span class="MJXp-mi" id="MJXp-Span-1181" style="margin-left: 0px;">Ω</span></span></span><span class="MJXp-mo" id="MJXp-Span-1182" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1183"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1184" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1185" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mfrac" id="MJXp-Span-1186" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1187">c</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1188">π</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1189" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mfrac" id="MJXp-Span-1190" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1191">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1192">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193">G</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1194">4</span><span class="MJXp-mo" id="MJXp-Span-1195" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1196"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1197" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1198" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1199" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1200">n</span><span class="MJXp-mo" id="MJXp-Span-1201" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1202" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1203"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1204" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1205" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1206" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207">n</span><span class="MJXp-mo" id="MJXp-Span-1208" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1209" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1210"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1211" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1212" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1213" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1214">p</span><span class="MJXp-mo" id="MJXp-Span-1215" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1216"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1217" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1218" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1219" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1220">n</span><span class="MJXp-mo" id="MJXp-Span-1221" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-msubsup" id="MJXp-Span-1222"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1223" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1224" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1225">d</span><span class="MJXp-msubsup" id="MJXp-Span-1226"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1227" style="margin-right: 0.05em;">ω</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1228" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-91-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-91">L_o(p,\omega_o)=\int\limits_\Omega(k_d\frac{c}{\pi}+\frac{DFG}{4(\omega_o\cdot n)(\omega_i \cdot n)}) L_i(p, \omega_i)n\cdot \omega_i d\omega_i</script></p><br><p>         ,         PBR.  ,      ,          .         ,          ,        . </p><br><h3>    PBR </h3><br><p> ,     PBR,     ,       ,        PBR.    ,      PBR,      .        ,         :    ,             . </p><br><p>     ,       PBR,     : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/rt/jn/wlrtjnjhkbjfj-8lsqe1xanv_30.png"></div><br><p> <b></b> :            ,    .          ,        .           ,      ;      . </p><br><p> <b></b> :   ,   ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> .          ,   ,    . </p><br><p> <b></b> :        .    ,   PBR-,       ,     :   . </p><br><p> <b></b> :   ,       .          .          ,         .  PBR-      ,       ,       (1.0 — )   . </p><br><p> <b>AO (ambient occlusion)</b> :     AO        .      , ,            .  AO      ,     .             .         ,      3D-. </p><br><p>                    .        PBR,              ,        . ,    PBR,       PBR-,       ,    ,       . </p><br><h4>  Materiales relacionados </h4><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Background: Physics and Math of Shading by Naty Hoffmann:</a>   ,      ,      ;                 PBR,   must-read  . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Real shading in Unreal Engine 4</a> :   PBR,  Epic Games  Unreal Engine 4. PBR,       ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Marmoset: PBR Theory</a> :   PBR.     , ,   ,  . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Coding Labs: Physically based rendering</a> :     ,     PBR. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Coding Labs: Physically Based Rendering — Cook–Torrance</a> :   BRDF - </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wolfire Games — Physically based rendering</a> :   PBR  Lukas Orsvärn. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[SH17C] Physically Based Shading</a> :   shadertoy (:   )  Krzysztof Narkowi,      PBR. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426123/">https://habr.com/ru/post/es426123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426113/index.html">Google News y Leo Tolstoy: visualización de representaciones vectoriales de palabras con t-SNE</a></li>
<li><a href="../es426115/index.html">La práctica de usar el modelo de actor en la plataforma de backend de Quake Champions</a></li>
<li><a href="../es426117/index.html">El Defensor del Pueblo propone bloquear anuncios con productos para bebés potencialmente peligrosos</a></li>
<li><a href="../es426119/index.html">Antigüedades: Cryptonomicon Iron</a></li>
<li><a href="../es426121/index.html">MC.exe (compilador de mensajes), rc.exe, link.exe para generar .dll para EventMessageFile</a></li>
<li><a href="../es426125/index.html">Carrera de esteroides. Ascensores</a></li>
<li><a href="../es426131/index.html">Descargue la configuración a FPGA a través de USB o desmonte FTDI MPSSE</a></li>
<li><a href="../es426133/index.html">Presentación de la versión alfa de instantáneas de volumen en Kubernetes</a></li>
<li><a href="../es426135/index.html">Nube privada para Internet de las cosas</a></li>
<li><a href="../es426137/index.html">Era de la honestidad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>