<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèæ ü§∂üèº üé± Soul Mikrotik contre ILV sans √¢me et le m√™me fournisseur üë©üèª‚Äçüé® üîá ü§ï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'article d√©crit un moyen d'acc√©der √† des ressources tombant par erreur dans la distribution de petits pains par Roskomnadzor (ci-apr√®s RKN). Il est p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Soul Mikrotik contre ILV sans √¢me et le m√™me fournisseur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467471/">  L'article d√©crit un moyen d'acc√©der √† des ressources tombant par erreur dans la distribution de petits pains par Roskomnadzor (ci-apr√®s RKN).  Il est pris par erreur.  Nous sommes des citoyens respectueux des lois et n'allons pas l√† o√π nos agences gouvernementales nous l'interdisent.  Donc, si vous d√©cidez soudainement d'utiliser la m√©thode pour acc√©der √† une sorte de ressources bloqu√©es ¬´l√©galement¬ª, l'√©p√©e dure de la justice volera probablement au-dessus de votre t√™te et je ne suis pas √† bl√¢mer pour cela, car en ce moment je vous ai pr√©venu! <br><a name="habracut"></a><br>  Le probl√®me est survenu de fa√ßon inattendue lorsque notre bureau central a d√©m√©nag√© dans un autre endroit et, par cons√©quent, a chang√© de fournisseur.  Les employ√©s en masse ont commenc√© √† me plaindre qu'ils ne pouvaient pas acc√©der aux sites auxquels ils avaient pr√©c√©demment acc√®s.  Dans le m√™me temps, depuis nos autres bureaux assis sur d'autres prestataires, des sites √©taient toujours disponibles. <br><br>  Pendant un certain temps, √† cause des tracas de d√©m√©nager, j'ai ignor√© le probl√®me, mais lorsque le service comptable a commenc√© √† se plaindre (avez-vous √©galement le service comptable en importance apr√®s la gestion de l'entreprise?), J'ai d√ª le r√©gler. <br><br>  Tout d'abord, les soup√ßons portaient sur des probl√®mes avec MTU et MSS.  Mais avec eux, heureusement, tout s'est av√©r√© √™tre en ordre.  J'ai frapp√© un domaine probl√©matique bas√© sur ILV, √©galement OK, le domaine est propre.  J'ai ouvert le site via les passerelles d'autres agences (3 prestataires diff√©rents), il ouvre.  Mais gr√¢ce √† notre fournisseur pour le domaine IP, m√™me les pings ne vont pas.  Et puis j'ai devin√© de percer le domaine de probl√®me IP ILV.  Vous avez d√©j√† devin√© que l'IP √©tait dans la base de donn√©es? <br><br>  Mais o√π se trouve alors une redirection vers une page indiquant que cette ressource est bloqu√©e, etc.  etc., demandez-vous.  Et j'ai demand√©.  Au d√©but, j'ai vraiment essay√© d'ouvrir plusieurs sites o√π auparavant, quand c'√©tait possible, nous cherchions tous quelque chose √† voir ou √† t√©l√©charger.  Et en veillant √† ce qu'il n'y ait aucun avertissement concernant le blocage sur ces sites, j'ai appel√© le fournisseur. <br><br>  Le prestataire m'a √©cout√©, a admis qu'il y avait un probl√®me, mais il n'y a pas d'avertissement. <br><br>  J'ai sympathis√© avec ma situation, mais j'ai refus√© de corriger quelque chose.  Par exemple, nous respectons l'exigence de blocage, mais il n'y a aucune exigence de notification.  Sur lequel nous avons dit au revoir. <br><br>  Bien s√ªr, j'avais un d√©sir de lutter avec le fournisseur, mais la paresse et le manque de temps libre ont profond√©ment pouss√© ce d√©sir.  √Ä peu pr√®s au m√™me endroit o√π j'ai envoy√© un fournisseur avec son Internet dans mon c≈ìur, l√† o√π le soleil ne brille pas. <br><br>  Le probl√®me devait √™tre r√©solu d'une mani√®re ou d'une autre.  Notre entreprise utilise Mikrotiki comme passerelles-routeurs, peu importe lesquels, le routeur OS est le m√™me pour tout le monde.  Apr√®s avoir fouill√© autour de Habr√©, j'ai trouv√© quelques articles sur la fa√ßon de contourner les verrous ILV, de g√©n√©rer et de charger la base de donn√©es ILV dans Mikrotik.  Dans le m√™me temps, le routage a bloqu√© le trafic vers les passerelles o√π il n'y a pas de verrous.  Par int√©r√™t, j'ai essay√© cette m√©thode.  Cela fonctionne, mais ne convient pas. <br>  Premi√®rement, le volume de base de 60000 ip (au d√©but de l'√©t√© 2019) a envoy√© mon Mikrotik dans un coma profond.  Le routeur CHR OS avec une grande capacit√© de m√©moire et plusieurs c≈ìurs s'est senti l√©g√®rement mieux, mais a pr√©cis√© qu'avec une telle attitude consciencieuse de l'ILV envers ses fonctions, il ne durerait pas longtemps. <br><br>  Deuxi√®mement, l'acc√®s a √©t√© obtenu √† toutes les ressources bloqu√©es, y compris celles qui ont √©t√© bloqu√©es pour des motifs ¬´l√©gaux¬ª.  Que moi, en tant que citoyen respectueux des lois, ne me convenait pas non plus. <br><br>  Mais l'id√©e m√™me de diriger le trafic vers des sites autoris√©s via ces passerelles o√π il n'est pas bloqu√© me vient √† l'esprit. <br><br>  Que pouvons-nous faire pour cela? <br><br>  La premi√®re chose qui me vient √† l'esprit est de d√©couvrir l'IP de la ressource et de d√©terminer la passerelle pour celle-ci dans le routage pour elle.  Pas une option, une ressource peut avoir plusieurs ip et elles peuvent changer, parfois souvent.  Fatigu√© d'ajouter. <br><br>  La seconde consiste √† analyser IP en utilisant la couche 7 dans le pare-feu, en les entrant dans la liste d'adresses.  D√©j√† mieux, mais la couche 7 a une fonctionnalit√© d√©sagr√©able.  S'il y a plusieurs r√®gles, alors il commence √† se rapporter aux ressources du processeur de la m√™me mani√®re que certaines femmes se rapportent au salaire de leur mari.  En cons√©quence, des querelles, des scandales et d'autres probl√®mes commencent dans la famille. <br><br>  Diriger tout le trafic via la passerelle distante est √©galement pr√©judiciable. <br><br>  Heureusement, au MUM de septembre, l'un des orateurs a r√©v√©l√© un terrible secret.  Il s'av√®re que Mikrotiki a appris pendant un certain temps √† analyser un domaine IP directement de son nom dans la feuille d'adresse, en ajoutant IP √† la m√™me feuille!  Arm√© des informations que j'ai re√ßues, j'ai finalement r√©solu le probl√®me. <br><br>  Voici un exemple de solution: <br><br>  1. Nous cr√©ons dans le pare-feu la feuille d'adresse avec le domaine souhait√©. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="t√©l√©charger une photo"><img src="https://habrastorage.org/getpro/habr/post_images/2d2/80f/c04/2d280fc0483cd7b2f29ac5a25760b845.png" alt="alist.png"></a> <br><br>  2. Dans le Firewall \ Mangle, cr√©ez une r√®gle, cha√Æne: pr√©-routage, avanc√©: Dst.Address list = notre nom de feuille, action: marquer le routage, New Routing Mark = nom de marque <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="partage de photos"><img src="https://habrastorage.org/getpro/habr/post_images/77e/27b/c92/77e27bc9239c0dc916ea08a37809f116.png" alt="Oui"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="t√©l√©charger un selfie"><img src="https://habrastorage.org/getpro/habr/post_images/71b/9d8/0a4/71b9d80a4ec662ed262743b089292ff5.png" alt="Oui"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="h√©bergement d'images"><img src="https://habrastorage.org/getpro/habr/post_images/622/462/778/6224627781f3e0ee32df90b9160d7636.png" alt="Oui"></a> <br><br>  3. Nous allons √† IP \ Routes.  Cr√©ez une nouvelle route par d√©faut.  Adresse Dst = 0.0.0.0 / 0, Gateway = Gateway IP, Routing Mark = Your Brand <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="t√©l√©charger une photo"><img src="https://habrastorage.org/getpro/habr/post_images/681/514/307/6815143074027220adef8abc76be0a8b.png" alt="route.png"></a> <br><br>  C‚Äôest tout.  Maintenant, votre Mikrotik analysera l'IP du domaine souhait√© sur la feuille d'adresse que vous avez cr√©√©e pour cela, marquera les itin√©raires vers cette IP et les enverra via la passerelle dont vous avez besoin.  Avez-vous une passerelle de sauvegarde?  Sourire <br><br>  Cela a √©t√© fait sur le firmware 6.45.5 <br><br>  Merci de votre attention. <cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467471/">https://habr.com/ru/post/fr467471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467457/index.html">Le chemin de la chirurgie au d√©veloppement de jeux ou la premi√®re exp√©rience de d√©veloppement mobile sur Unity</a></li>
<li><a href="../fr467459/index.html">Comment un microcontr√¥leur peut lire des donn√©es √† 1,6 Gbit / s</a></li>
<li><a href="../fr467461/index.html">RubyRussia 2019. Julian Pokrovsky: comment optimiser un monolithe</a></li>
<li><a href="../fr467463/index.html">Juste la division, ou comment cr√©er une th√©orie math√©matique et y gagner 400 000 $. Troisi√®me s√©rie, finale</a></li>
<li><a href="../fr467465/index.html">Le cloud sauvera-t-il les smartphones ultra-√©conomiques</a></li>
<li><a href="../fr467473/index.html">Et plus sur les sortes</a></li>
<li><a href="../fr467475/index.html">Renvoyez Thread.Abort () √† .NET Core. Livraison d'applications avec sa version de CoreCLR et CoreFX</a></li>
<li><a href="../fr467477/index.html">Kubernetes 1.16: Aper√ßu des faits saillants</a></li>
<li><a href="../fr467479/index.html">Kir Shatrov: Shopify a commenc√© avec Rails et ici, ils aiment sinc√®rement ce cadre.</a></li>
<li><a href="../fr467485/index.html">R√©solution de probl√®mes avec pwnable.kr 23 - calculatrice md5. Nous traitons avec Stack Canary. Connexion des biblioth√®ques C en python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>