<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßöüèΩ üë©‚Äçüë©‚Äçüëß‚Äçüë¶ üåÑ Noch einmal √ºber passport.js üßïüèø üåí üóûÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="K√ºrzlich haben sie mich bei einem Projekt auf express.js unterst√ºtzt. Beim Studium des Projektcodes fand ich eine etwas verwirrende Arbeit mit der Aut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Noch einmal √ºber passport.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435106/"> K√ºrzlich haben sie mich bei einem Projekt auf express.js unterst√ºtzt.  Beim Studium des Projektcodes fand ich eine etwas verwirrende Arbeit mit der Authentifizierung / Autorisierung, die wie 99,999% der F√§lle auf der Bibliothek passport.js basierte.  Dieser Code hat funktioniert, und nach dem Prinzip "Arbeit - nicht anfassen" habe ich ihn unver√§ndert gelassen.  Als ich ein paar Tage sp√§ter die Aufgabe erhielt, zwei weitere Autorisierungsstrategien hinzuzuf√ºgen.  Und dann begann ich mich daran zu erinnern, dass ich bereits einen √§hnlichen Job machte und mehrere Codezeilen ben√∂tigte.  Nachdem ich die Dokumentation auf passport.js durchgesehen hatte, r√ºhrte ich mich fast nicht, was und wie zu tun ist, weil  Dort betrachteten sie F√§lle, in denen genau eine Strategie angewendet wird, f√ºr die f√ºr jede Person Beispiele gegeben werden.  Aber wie man mehrere Strategien kombiniert, warum man die logIn () -Methode verwenden muss (die mit login () identisch ist) - es wurde noch nicht gekl√§rt.  Um dies jetzt zu verstehen und nicht immer wieder dieselbe Suche zu wiederholen, habe ich diese Notizen f√ºr mich zusammengestellt. <br><a name="habracut"></a><br>  Ein bisschen Geschichte.  Anf√§nglich verwendeten Webanwendungen zwei Arten der Authentifizierung / Autorisierung: 1) Basic und 2) Sitzungen mit Cookies.  Bei der Standardauthentifizierung / -autorisierung wird in jeder Anforderung ein Header gesendet, und daher wird in jeder Anforderung eine Clientauthentifizierung durchgef√ºhrt.  Bei Verwendung von Sitzungen wird die Clientauthentifizierung nur einmal durchgef√ºhrt (die Methoden k√∂nnen sehr unterschiedlich sein, einschlie√ülich Basic sowie Name und Kennwort, die im Formular gesendet werden, und Tausende anderer Methoden, die in Bezug auf passport.js als Strategien bezeichnet werden).  Die Hauptsache ist, dass der Client nach der Authentifizierung die Sitzungskennung im Cookie (oder in einigen Implementierungen die Sitzungsdaten) identifiziert und die Benutzerkennung in den Sitzungsdaten gespeichert wird. <br><br>  Zun√§chst m√ºssen Sie entscheiden, ob Sie Sitzungen in Ihrer Anwendung zur Authentifizierung / Autorisierung verwenden m√∂chten.  Wenn Sie ein Backend f√ºr eine mobile Anwendung entwickeln, ist dies h√∂chstwahrscheinlich nicht der Fall.  Wenn dies eine Webanwendung ist, dann h√∂chstwahrscheinlich ja.  Um Sitzungen verwenden zu k√∂nnen, m√ºssen Sie den Cookie-Parser und die Sitzungs-Middleware aktivieren und die Sitzung initialisieren: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sessionMiddleware = session({ <span class="hljs-attr"><span class="hljs-attr">store</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisStore({<span class="hljs-attr"><span class="hljs-attr">client</span></span>: redisClient}), secret, <span class="hljs-attr"><span class="hljs-attr">resave</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">rolling</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">saveUninitialized</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">cookie</span></span>: { <span class="hljs-attr"><span class="hljs-attr">maxAge</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-attr"><span class="hljs-attr">httpOnly</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, }, }); app.use(cookieParser()); app.use(sessionMiddleware); app.use(passport.initialize()); app.use(passport.session());</code> </pre> <br>  Hier m√ºssen Sie einige wichtige Erkl√§rungen geben.  Wenn Sie nicht m√∂chten, dass Redis in ein paar Jahren den gesamten Arbeitsspeicher verbraucht, m√ºssen Sie sich um das rechtzeitige L√∂schen der Sitzungsdaten k√ºmmern.  Verantwortlich daf√ºr ist der Parameter maxAge, der diesen Wert sowohl f√ºr das Cookie als auch f√ºr den in redis gespeicherten Wert gleicherma√üen festlegt.  Durch Festlegen der Werte resave: true, running: true wird die G√ºltigkeitsdauer bei jeder neuen Anforderung um den angegebenen maxAge-Wert verl√§ngert (falls erforderlich).  Andernfalls wird die Client-Sitzung regelm√§√üig unterbrochen.  Schlie√ülich werden mit dem Parameter saveUninitialized: false keine leeren Sitzungen in redis platziert.  Auf diese Weise k√∂nnen Sie die Initialisierung von Sitzungen und passport.js auf Anwendungsebene platzieren, ohne Redis mit unn√∂tigen Daten zu verstopfen.  Auf Routenebene ist es sinnvoll, die Initialisierung nur dann durchzuf√ºhren, wenn die Methode passport.initialize () mit unterschiedlichen Parametern aufgerufen werden muss. <br><br>  Wenn die Sitzung nicht verwendet wird, wird die Initialisierung erheblich reduziert: <br><br><pre> <code class="javascript hljs">app.use(passport.initialize());</code> </pre><br><br>  Als N√§chstes m√ºssen Sie ein Strategieobjekt erstellen (da passport.js die Authentifizierungsmethode in der Terminologie aufruft).  Jede Strategie hat ihre eigenen Konfigurationsfunktionen.  Das einzige, was unver√§ndert bleibt, ist, dass die R√ºckruffunktion an den Strategiekonstruktor √ºbergeben wird, der das Benutzerobjekt bildet, auf das als request.user f√ºr die folgenden Middleware-Warteschlangen zugegriffen werden kann: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> jwtStrategy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JwtStrategy(params, (payload, done) =&gt; UserModel.findOne({<span class="hljs-attr"><span class="hljs-attr">where</span></span>: {<span class="hljs-attr"><span class="hljs-attr">id</span></span>: payload.userId}}) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> { done(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user); }) .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> { done(error, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); }) );</code> </pre><br><br>  Wir m√ºssen uns bewusst sein, dass diese Methode jedes Mal aufgerufen wird, wenn auf eine gesch√ºtzte Ressource zugegriffen wird, wenn eine Sitzung nicht verwendet wird, und dass eine Datenbankabfrage (wie im Beispiel) die Anwendungsleistung erheblich beeintr√§chtigt. <br><br>  Als n√§chstes m√ºssen Sie einen Befehl geben, um die Strategie zu verwenden.  Jede Strategie hat einen Standardnamen.  Es kann aber auch explizit festgelegt werden, wodurch eine Strategie mit unterschiedlichen Parametern und der Logik der R√ºckruffunktion verwendet werden kann: <br><br><pre> <code class="javascript hljs">passport.use(<span class="hljs-string"><span class="hljs-string">'jwt'</span></span>, jwtStrategy); passport.use(<span class="hljs-string"><span class="hljs-string">'simple-jwt'</span></span>, simpleJwtStrategy);</code> </pre><br><br>  Als N√§chstes m√ºssen Sie f√ºr die gesch√ºtzte Route eine Authentifizierungsstrategie und einen wichtigen Sitzungsparameter festlegen (Standard ist true): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authenticate = passport.authenticate(<span class="hljs-string"><span class="hljs-string">'jwt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">session</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}); router.use(<span class="hljs-string"><span class="hljs-string">'/hello'</span></span>, authenticate, (req, res) =&gt; { res.send(<span class="hljs-string"><span class="hljs-string">'hello'</span></span>); });</code> </pre><br><br>  Wenn die Sitzung nicht verwendet wird, muss die Authentifizierung durch alle eingeschr√§nkten Zugriffswege gesch√ºtzt werden.  Wenn die Sitzung verwendet wird, erfolgt die Authentifizierung einmal, und hierf√ºr wird eine spezielle Route festgelegt, z. B. Anmeldung: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authenticate = passport.authenticate(<span class="hljs-string"><span class="hljs-string">'local'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">session</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}); router.post(<span class="hljs-string"><span class="hljs-string">'/login'</span></span>, authenticate, (req, res) =&gt; { res.send({}) ; }); router.post(<span class="hljs-string"><span class="hljs-string">'/logout'</span></span>, mustAuthenticated, (req, res) =&gt; { req.logOut(); res.send({}); });</code> </pre><br><br>  Bei Verwendung einer Sitzung auf gesch√ºtzten Routen wird in der Regel eine sehr pr√§zise Middleware verwendet (die aus irgendeinem Grund nicht in der Bibliothek passport.js enthalten ist): <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mustAuthenticated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!req.isAuthenticated()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.status(HTTPStatus.UNAUTHORIZED).send({}); } next(); }</code> </pre><br><br>  Es gab also einen letzten Moment - Serialisierung und Deserialisierung des request.user-Objekts zur / von der Sitzung: <br><br><pre> <code class="javascript hljs">passport.serializeUser(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user, done</span></span></span><span class="hljs-function">) =&gt;</span></span> { done(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user.id); }); passport.deserializeUser(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, done</span></span></span><span class="hljs-function">) =&gt;</span></span> { UserModel.findOne({<span class="hljs-attr"><span class="hljs-attr">where</span></span>: {id}}).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) =&gt;</span></span> { done(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }); });</code> </pre><br><br>  Ich m√∂chte noch einmal betonen, dass Serialisierung und Deserialisierung nur mit Strategien funktionieren, f√ºr die das Attribut {session: true} festgelegt ist.  Die Serialisierung wird unmittelbar nach der Authentifizierung genau einmal durchgef√ºhrt.  Daher ist das Aktualisieren der in der Sitzung gespeicherten Daten sehr problematisch, in Verbindung damit nur die Benutzer-ID (die sich nicht √§ndert) gespeichert wird.  Die Deserialisierung wird bei jeder Anforderung an eine sichere Route durchgef√ºhrt.  In diesem Zusammenhang wirken sich Datenbankabfragen (wie im Beispiel) erheblich auf die Anwendungsleistung aus. <br><br>  Bemerkung.  Wenn Sie mehrere Strategien gleichzeitig verwenden, funktioniert f√ºr alle diese Strategien derselbe Serialisierungs- / Deserialisierungscode.  Um beispielsweise die Strategie zu ber√ºcksichtigen, mit der die Authentifizierung durchgef√ºhrt wurde, k√∂nnen Sie dem Benutzerobjekt ein Strategieattribut hinzuf√ºgen.  Es macht auch keinen Sinn, die Methode initialize () mehrmals mit unterschiedlichen Werten aufzurufen.  Es wird weiterhin mit den Werten des letzten Aufrufs neu geschrieben. <br><br>  Dies k√∂nnte das Ende der Geschichte sein.  Weil  Zus√§tzlich zu dem, was gesagt wurde, ist in der Praxis nichts anderes erforderlich.  Auf Anfrage der Front-End-Entwickler musste ich der 401-Antwort jedoch ein Objekt mit einer Beschreibung des Fehlers hinzuf√ºgen (standardm√§√üig ist dies die Zeile "Nicht autorisiert").  Und das kann, wie sich herausstellte, nicht einfach gemacht werden.  In solchen F√§llen m√ºssen Sie etwas tiefer in den Kern der Bibliothek vordringen, was nicht so sch√∂n ist.  Die Methode passport.authenticate verf√ºgt √ºber einen dritten optionalen Parameter: eine R√ºckruffunktion mit der Signaturfunktion (Fehler, Benutzer, Info).  Das kleine Problem ist, dass weder das Antwortobjekt noch eine Funktion wie done () / next () an diese Funktion √ºbergeben wird und Sie sie daher selbst in Middleware konvertieren m√ºssen: <br><br><pre> <code class="javascript hljs">route.post(<span class="hljs-string"><span class="hljs-string">'/hello'</span></span>, authenticate(<span class="hljs-string"><span class="hljs-string">'jwt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">session</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}), (req, res) =&gt; { res.send({}) ; }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">authenticate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">strategy, options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ passport.authenticate(strategy, options, (error, user , info) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(error); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!user) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TranslatableError(<span class="hljs-string"><span class="hljs-string">'unauthorised'</span></span>, HTTPStatus.UNAUTHORIZED)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.session) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> req.logIn(user, (err) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(err); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(); }); } req.user = user; next(); })(req, res, next); }; }</code> </pre><br><br>  N√ºtzliche Links: <br><br>  1) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">toon.io/understanding-passportjs-authentication-flow</a> <br>  2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/post/201206</a> <br>  3) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/company/ruvds/blog/335434</a> <br>  4) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/post/262979</a> <br>  5) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/company/Voximplant/blog/323160</a> <br>  6) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/company/dataart/blog/262817</a> <br>  7) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tools.ietf.org/html/draft-ietf-oauth-pop-architecture-08</a> <br>  8) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">oauth.net/articles/authentication</a> <br><br>  apapacy@gmail.com <br>  4. Januar 2019 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de435106/">https://habr.com/ru/post/de435106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de435090/index.html">Die Hyundai Motor Group f√ºhrte das Konzept des drahtlosen Ladens und des autonomen Parkens ein</a></li>
<li><a href="../de435094/index.html">Gamepad von Sega Mega Drive und Raspberry Pi Part 2 (letzte Sechs-Tasten)</a></li>
<li><a href="../de435096/index.html">Die Wirkung von warmem R√∂hrenradio</a></li>
<li><a href="../de435098/index.html">ADB gegen Spy Cam & Mic</a></li>
<li><a href="../de435102/index.html">Ein bisschen √ºber lexikalische Analyse</a></li>
<li><a href="../de435108/index.html">Mit Prolog</a></li>
<li><a href="../de435112/index.html">Unternehmensinterview</a></li>
<li><a href="../de435114/index.html">Federdaten jpa</a></li>
<li><a href="../de435118/index.html">Save File Me - ein kostenloser Sicherungsdienst mit clientseitiger Verschl√ºsselung</a></li>
<li><a href="../de435120/index.html">Lambda funktioniert in SQL ... denken wir mal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>