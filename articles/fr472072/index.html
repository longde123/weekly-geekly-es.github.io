<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüíª ‚ôéÔ∏è üßëüèª PG12: une douzaine de patchs de Postgres Professional üóûÔ∏è üì∏ üò≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C'est agr√©able de voir des noms familiers dans la liste Remerciements de la version officielle de PostgreSQL 12. Nous avons d√©cid√© de rassembler les i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PG12: une douzaine de patchs de Postgres Professional</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/472072/">  <i>C'est agr√©able de voir des noms familiers dans la liste Remerciements de la version officielle de PostgreSQL 12. Nous avons d√©cid√© de rassembler les innovations et quelques corrections de bugs sur lesquelles nos d√©veloppeurs ont travaill√©.</i> <br><br><h3>  1. Prise en charge de JSONPath </h3><br>  (Dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notes de publication,</a> cela ressemble √† <i>Ajouter une prise en charge du langage de chemin SQL / JSON (Nikita Glukhov, Teodor Sigaev, Alexander Korotkov, Oleg Bartunov, Liudmila Mantrova)</i> <br><br>  Ce correctif lui-m√™me, les fonctionnalit√©s JSONPath et l'historique du probl√®me ont √©t√© discut√©s en d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans un article s√©par√©</a> ici sur le hub  JSONPath est une r√©alisation majeure de Postgres Professional et l'une des principales innovations de PostgreSQL 12 en g√©n√©ral. <br><br>  En 2014, A. Korotkov, O. Bartunov et F. Sigaev ont d√©velopp√© l'extension <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jsquery</a> , qui a √©t√© incluse √† la suite dans Postgres Pro Standard 9.5 (et dans les versions ult√©rieures de Standard et Enterprise).  Il fournit des fonctionnalit√©s suppl√©mentaires tr√®s larges pour travailler avec json (b). <br><br>  Lorsque la norme SQL: 2016 est apparue, il s'est av√©r√© que sa s√©mantique n'√©tait pas si diff√©rente de la n√¥tre dans l'extension jsquery.  Il est possible que les auteurs de la norme aient jet√© un coup d'≈ìil √† jsquery, inventant JSONPath.  Notre √©quipe a d√ª mettre en ≈ìuvre un peu diff√©remment ce que nous avions d√©j√† et, bien s√ªr, beaucoup de nouvelles choses aussi. <br><br>  Bien qu'un correctif sp√©cial avec des fonctions n'ait pas encore √©t√© valid√©, le correctif JSONPath poss√®de d√©j√† des fonctions cl√©s pour travailler avec JSON (B), par exemple: <br><br><pre><code class="pgsql hljs">jsonb_path_query(<span class="hljs-string"><span class="hljs-string">'{"a": [1,2,3,4,5]}'</span></span>, <span class="hljs-string"><span class="hljs-string">'$.a[*] ? (@ &gt; 2)'</span></span>)  <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> jsonb_path_query(<span class="hljs-string"><span class="hljs-string">'{"a": [1,2,3,4,5]}'</span></span>, <span class="hljs-string"><span class="hljs-string">'$.a[*] ? (@ &gt; 5)'</span></span>)  <span class="hljs-number"><span class="hljs-number">0</span></span> </code> </pre> <br>  De plus, certaines fonctions qui avaient d√©j√† fonctionn√© avec JSON auparavant <a href="">ont √©t√© optimis√©es</a> .  Cela a √©t√© fait avec succ√®s par Nikita Glukhov. <br><br>  Par exemple, l'op√©rateur <code>#&gt;&gt;</code> , correspondant aux fonctions <code>jsonb_each_text()</code> et <code>jsonb_array_elements_text()</code> , utilis√© pour convertir rapidement JsonbValue en texte, mais fonctionnait lentement avec d'autres types.  Maintenant, tout fonctionne rapidement. <br><a name="habracut"></a><br><h3>  2. Prise en charge de la recherche rapide des voisins les plus proches dans les index SP-GiST (KNN) </h3><br>  <i>(Ajout de la prise en charge des recherches d'index SP-GiST par le plus proche voisin (KNN). Nikita Glukhov, Alexander Korotkov, Vlad Sterzhanov)</i> <br><br>  Nikita Glukhov et Alexander Korotkov de notre entreprise ont poursuivi le travail commenc√© par Vlad Sterzhanov de Minsk (alias Quadrocube).  Postgres a √©t√© le premier SGBD √† rechercher ses voisins les plus proches - anciennement Oracle et MS, et de mani√®re beaucoup plus directe et pratique - et c'√©tait le m√©rite d'Oleg Bartunov et de son √©quipe.  L'id√©e de cette recherche se trouve dans l'algorithme de travers√©e de l'arbre d'origine, qui dans la plupart des cas donne un gain √©norme.  La recherche de voisins les plus proches est souvent utilis√©e, mais dans le SIG, elle est particuli√®rement courante. <br><br>  Vlad a cr√©√© un patch de recherche KNN pour travailler avec les index spatiaux SP-GiST pour les quadruples, lorsque l'avion est divis√© en carr√©s de taille fixe, et pour les arbres KD, c'est-√†-dire les arbres √† dimensions k. <br><br>  Alexander Korotkov, mentor du GSoC de Vlad (Google Summer of Code), a poursuivi le d√©veloppement avec un coll√®gue de Postgres Professional Nikita Glukhov.  La fonctionnalit√© a √©t√© s√©rieusement enrichie: la mise en cache des donn√©es internes a √©t√© am√©lior√©e lors de la travers√©e de l'arbre, des classes d'op√©rateurs pour les cercles et les polygones avec classement par distance ont √©t√© ajout√©es. <br><br>  Pour utiliser l'algorithme de recherche du plus proche voisin, il suffit d'√©crire <code>ORDER BY [,   ]</code> , puis l'optimiseur connectera automatiquement cet algorithme.  Par exemple <br><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> polygons <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> poly &lt;-&gt; <span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(0,0)'</span></span>;</code> </pre><br>  Des correctifs de Nikita Glukhov peuvent √™tre vus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le github</a> . <br><br><h3>  3. Optimisation des verrous pour acc√©l√©rer l'insertion dans les indices B-Tree </h3><br>  <i>(Dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notes de publication,</a> il s'agit d'am√©liorer la vitesse des insertions d'index btree en r√©duisant les frais g√©n√©raux de verrouillage. Alexander Korotkov)</i> <br><br>  Alexander Korotkov, architecte en chef des syst√®mes chez Postgres Professional, a r√©ussi √† trouver un algorithme de verrouillage plus raisonnable lors de l'insertion dans les index B-tree.  Le gain apr√®s application de ce patch est perceptible dans les cas o√π l'insertion se produit plus ou moins "en ligne".  Les mesures sur un serveur √† 72 c≈ìurs ont montr√© que dans ce cas le gain atteint 50%.  Avec une insertion chaotique, le gain n'est pas si perceptible. <br><br><h3>  4. WAL √©conomique </h3><br>  <i>(R√©duire la surcharge d'√©criture WAL de la cr√©ation d'index GiST, GIN et SP-GiST. Anastasia Lubennikova, Andrey V. Lepikhov)</i> <br><br>  Cette s√©rie de correctifs <a href="">r√©duit le trafic WAL</a> g√©n√©r√© lors de la cr√©ation d'index GiST, GIN et SP-GiST.  D√©sormais, vous ne pouvez enregistrer les pages de ces index qu'une seule fois - √† la fin, lorsque l'index est d√©j√† cr√©√©.  Et en cas d'erreur lors de la construction de l'index des entr√©es dans le WAL, les tentatives infructueuses n'appara√Ætront pas du tout.  Auparavant, cela n'√©tait possible que lors de la cr√©ation d'un arbre B et d'un RUM.  Les correctifs utilisent le m√©canisme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">g√©n√©rique WAL</a> . <br><br>  Des scripts sont <code>xlog</code> pour v√©rifier la taille de <code>xlog</code> .  Les tests sur la base de donn√©es IMDB (format JSON), dans lesquels 4M + enregistrements occupant 4 Go, ont montr√©: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> imdb <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> gin(jb jsonb_path_ops);</code> </pre> <br>  l'ancienne m√©thode ex√©cutait 205 secondes, WAL 3,2 Go et le nouvel algorithme donnait 133 secondes et WAL 0,4 Go. <br><br><h3>  5. Optimisation de l'analyse index√©e uniquement dans le cas de plusieurs colonnes. </h3><br>  <i>(Permettre aux analyses d'index uniquement d'√™tre plus efficaces sur les index comportant de nombreuses colonnes. Konstantin Knizhnik)</i> <br><br>  Lors de l'analyse du fonctionnement de la base de donn√©es de l'un des clients de notre soci√©t√©, il a √©t√© <a href="">constat√©</a> que la m√™me requ√™te est ex√©cut√©e dans certains cas plus longtemps de 25% avec un index uniquement qu'avec un index (enable_indexonlyscan = off). <br>  Cela s'est produit lorsque SELECT a √©t√© effectu√© sur de nombreux champs, qui √©taient principalement du type <code>bytea</code> , et que leur d√©calage n'√©tait pas mis en cache, car ces champs n'ont pas de d√©calage fixe (voir √©galement le rapport de Nikolai Shaplov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´What's Inside It¬ª</a> ).  Pour d√©compresser l'attribut k-√®me, vous devez d√©compresser le k-1 pr√©c√©dent.  Le d√©compactage d'un enregistrement par un attribut n√©cessite un temps O (N * N), o√π N est le nombre de champs.  Ces 25% se sont d√©j√† produits dans 10 champs. <br><br>  Konstantin Knizhnik a utilis√© l'algorithme utilis√© pour travailler avec la hanche: lors de l'acc√®s √† l'attribut k-√®me, les k-1 pr√©c√©dents sont pris et m√©moris√©s, le temps cro√Æt lin√©airement avec le nombre de champs.  Apr√®s avoir appliqu√© le correctif, le temps d'ex√©cution avec l'analyse d'index et l'analyse d'index uniquement est pratiquement le m√™me. <br><br><h3>  6. Contr√¥lez le dumping des segments WAL sur le disque </h3><br>  <i>(Ajouter un √©v√©nement d'attente pour fsync des segments WAL. Konstantin Knizhnik)</i> <br><br>  Le noyau PostgreSQL surveille l'√©criture dans le WAL, mais ne surveille pas le vidage des segments WAL de la m√©moire vers le disque, c'est-√†-dire <code>fsync</code> .  K. Knizhnik a fait un patch qui cr√©e un nouveau type d'√©v√©nement, il s'appelle maintenant WALSync (le nom interne de la variable est WAIT_EVENT_WAL_SYNC).  Vous pouvez le voir dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tiquette d'√©v√©nement PG</a> avec l'explication ¬´En attente du vidage du fichier WAL vers un stockage fiable¬ª.  Ce probl√®me a √©t√© <a href="">discut√©</a> sur la liste de diffusion des <i>pirates</i> . <br><br>  La dur√©e de la r√©initialisation est g√©n√©ralement inconnue: PostgreSQL standard ne sait pas comment agr√©ger de telles statistiques.  Mais il existe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une extension pg_wait_sampling</a> √©crite dans Postgres Professional.  Il peut parler des √©v√©nements sur lesquels Postgres passe du temps.  Maintenant que l'√©v√©nement est ajout√©, vous pouvez suivre <code>fsync</code> . <br><br><h3>  7. Prise en charge de nouvelles langues dans les dictionnaires stemmer </h3><br>  <i>(Mise √† jour des dictionnaires de Snowball stemmer avec prise en charge de nouvelles langues. Arthur Zakirov)</i> <br><br>  Puisque les conf√©rences Postgres se tiennent au N√©pal, il est beaucoup plus naturel d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouter le</a> n√©palais √† la base de donn√©es!  Cela a √©t√© fait.  Gr√¢ce aux efforts d'Arthur Zakirov, vous pouvez maintenant utiliser le dictionnaire stemming n√©palais sur <i>Snowball</i> . <br><br><h3>  8. Les fonctions to_timestamp () / to_date () sont devenues plus tol√©rantes aux donn√©es </h3><br>  <i>(Ajustez les fonctions to_timestamp () / to_date () pour √™tre plus indulgent des discordances de mod√®les, Artur Zakirov, Alexander Korotkov, Liudmila Mantrova)</i> <br><br>  La fonction <code>to_timestamp()</code> ne fonctionnait pas si la cha√Æne de format √©tait trait√©e avec des espaces suppl√©mentaires.  La discussion du bogue dans <code>to_timestamp()</code> entra√Æn√© une <a href="">longue discussion</a> sur le comportement des fonctions <code>to_timestamp()</code> et, en m√™me temps, <code>to_date()</code> √™tre consid√©r√©es comme correctes.  Dans l'int√©r√™t de tous, les deux fonctions sont devenues plus tol√©rantes aux espaces suppl√©mentaires dans la ligne de format et la ligne d'entr√©e. <br><br><h3>  9. Les journaux peuvent √™tre tourn√©s via pg_ctl </h3><br>  <i>(Autoriser le contr√¥le de la rotation des fichiers journaux via pg_ctl. Kyotaro Horiguchi, Alexander Kuzmenkov, Alexander Korotkov)</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">En d'autres termes, l'</a> utilitaire <code>pg_ctl</code> a acquis une nouvelle option: <br><br><pre> <code class="plaintext hljs">pg_ctl logrotate [-D _] [-s]</code> </pre> <br>  Lorsque cette commande est ex√©cut√©e, le serveur bascule vers un nouveau fichier journal ou rouvre le fichier existant, selon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la configuration de la journalisation</a> .  Cela peut √™tre n√©cessaire dans les situations d'urgence, en particulier lorsque d'√©normes fichiers journaux √† croissance rapide doivent, par exemple, √™tre transf√©r√©s pour diagnostic. <br><br><h3>  10. La possibilit√© de cr√©er de nouveaux types de tables (stockage enfichable) </h3><br>  <i>(Ajouter la commande CREATE ACCESS METHOD pour cr√©er de nouveaux types de tables. Andres Freund, Haribabu Kommi, √Ålvaro Herrera, Alexander Korotkov, Dmitry Dolgov)</i> <br><br>  Ce correctif important est un √©l√©ment essentiel de l'infrastructure de l'API de stockage enfichable, d'o√π la composition internationale des d√©veloppeurs de correctifs.  La commande CREATE ACCESS METHOD est en cours d'ex√©cution sur Postgres depuis la version 9.6.  Mais jusqu'au 12, vous ne pouviez cr√©er que des m√©thodes d'acc√®s aux index.  Voici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la documentation de la 11√®me version</a> : <br><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ACCESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">METHOD</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> __ <span class="hljs-keyword"><span class="hljs-keyword">HANDLER</span></span> _ &lt; ... &gt; __       .      <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span>.</code> </pre> <br>  Et dans la documentation du 12 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©j√† lu</a> : <i>actuellement seuls TABLE et INDEX sont support√©s.</i>  Par ailleurs, dans la 11e commande CREATE ACCESS METHOD a √©t√© fournie par l'extension Postgres Pro, et dans la 12e d√©j√† PostgreSQL. <br><br>  L'ex√©cution de l'op√©ration d√©pend du type de m√©thode d'acc√®s;  s'il s'agit d'un type TABLE, alors <code>table_am_handler</code> le <code>table_am_handler</code> et s'il s'agit d'un type INDEX, alors <code>index_am_handler</code> (plus t√¥t: pour les m√©thodes d'acc√®s de type INDEX, il doit s'agir de <code>index_am_handler</code> ).  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chapitre</a> entier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est apparu dans la documentation</a> sur les m√©thodes de table. <br><br>  Lors de la cr√©ation d'une table, vous pouvez d√©sormais sp√©cifier son type: <br><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> [ [ <span class="hljs-keyword"><span class="hljs-keyword">GLOBAL</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">LOCAL</span></span> ] { <span class="hljs-keyword"><span class="hljs-keyword">TEMPORARY</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">TEMP</span></span> } | <span class="hljs-keyword"><span class="hljs-keyword">UNLOGGED</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> ] _ ( [ &lt; ... &gt; [ <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span>  ]</code> </pre> <br>  <i>la m√©thode</i> est de type TABLE - il s'agit d'une r√©f√©rence au stockage enfichable.  Maintenant, c'est un <code>heap</code> par d√©faut, et avant l'autre, en fait, ce n'√©tait pas le cas.  √Ä propos des classes d'op√©rateurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> <br><br> <code>default_table_access_method (string)</code> <br> <br>  Ce param√®tre d√©finit la m√©thode d'acc√®s aux tables par d√©faut qui sera utilis√©e lors de la cr√©ation de tables ou de vues mat√©rialis√©es si la m√©thode d'acc√®s n'est pas explicitement sp√©cifi√©e dans la commande CREATE, ou lors de l'ex√©cution de la commande SELECT ... INTO, dans laquelle la m√©thode d'acc√®s ne peut pas √™tre explicitement d√©finie.  La valeur par d√©faut est <code>heap</code> .  La grande discussion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chez les pirates</a> aide √† obtenir les d√©tails. <br><br>  Jusqu'√† ce moment, nous parlions d'innovations.  Mais les corrections de bogues grugent √©galement les ressources du temps des programmeurs.  Les principaux sont: <br><br><h3>  11. Bug: une erreur dans l'une des structures </h3><br>  <i>Extra quote_all_identifiers dans _dumpOptions.</i>  <i>Arthur Zakirov)</i> <br><br>  En g√©n√©ral, rien de sp√©cial, une erreur a √©t√© trouv√©e dans l'une des structures <code>pg_dump</code> par <code>pg_dump</code> - elle a √©t√© manqu√©e par le compilateur.  Mais Bruce Momjyan lui-m√™me a <a href="">fait l'√©loge</a> de la d√©couverte. <br><br>  D'autres probl√®mes avec <code>DumpOptions</code> peuvent √™tre trouv√©s <a href="">ici</a> . <br><br><h3>  12. Bogue dans la r√©plication: </h3><br>  <i>(xlogreader: ne lisez pas deux fois un bloc de fichiers. Arthur Zakirov)</i> <br><br>  Un autre employ√© de notre entreprise, le d√©veloppeur de pg_probackup, Grigory Smolkin, a d√©couvert que l'un de nos utilitaires est ralenti lorsque xlogreader lit les archives zlib.  Il s'est av√©r√© que parfois il lit deux fois les blocs de fichiers WAL. <br><br>  Si les archives sont lues de mani√®re incoh√©rente, les performances sont m√©diocres.  La lecture r√©p√©t√©e du bloc est toujours incoh√©rente, car vous devez revenir √† la position pass√©e en appelant la fonction <code>gzseek()</code> .  <a href="">Maintenant,</a> la relecture inutile ne se produit pas. <br><br>  <i>PS Je ne vais pas dissimuler: une dizaine de correctifs (√† proprement parler une douzaine de s√©ries de correctifs) ne sont pas qu'une simple co√Øncidence accidentelle avec le num√©ro de version de Postgres.</i>  <i>La liste pourrait bien √™tre une sous-douzaine ou une sur-douzaine.</i>  <i>Je pensais que ce serait plus beau, et la beaut√© est en partie le moteur de la programmation, sans parler d'autres domaines de l'activit√© humaine.</i> <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr472072/">https://habr.com/ru/post/fr472072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr472054/index.html">Organisateurs et assistants p√©dagogiques sur les programmes en ligne du CS Center</a></li>
<li><a href="../fr472060/index.html">La police allemande a pris d'assaut un bunker militaire, qui abritait le centre de donn√©es nouvellement d√©clar√©</a></li>
<li><a href="../fr472062/index.html">Monitoring + stress tests = pr√©vision et pas d'√©checs</a></li>
<li><a href="../fr472064/index.html">Ansible + auto git pull in virtual machine cluster in the cloud</a></li>
<li><a href="../fr472068/index.html">Utilisation du SSD NVME en tant que lecteur syst√®me sur les ordinateurs dot√©s d'un ancien BIOS et d'un syst√®me d'exploitation Linux</a></li>
<li><a href="../fr472076/index.html">Le livre "Java pour tous"</a></li>
<li><a href="../fr472078/index.html">Risques bancaires ouverts</a></li>
<li><a href="../fr472084/index.html">Vuln√©rabilit√©s des smartphones</a></li>
<li><a href="../fr472086/index.html">Utilisation des lois de la psychologie gestaltique dans la conception de l'interface utilisateur</a></li>
<li><a href="../fr472088/index.html">Comment nous avons choisi ServiceDesk. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>