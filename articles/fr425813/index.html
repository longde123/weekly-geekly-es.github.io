<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç¥ üë©üèº‚Äç‚öïÔ∏è ‚åõÔ∏è CICD: d√©ploiement transparent sur des syst√®mes de cluster distribu√©s sans temps d'arr√™t üë¶üèø üêÑ üêß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je poste le deuxi√®me rapport de notre premier mitap , qui s'est tenu en septembre. La derni√®re fois que vous avez pu lire (et voir) comment utiliser C...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>CICD: d√©ploiement transparent sur des syst√®mes de cluster distribu√©s sans temps d'arr√™t</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/425813/">  Je poste le deuxi√®me rapport de notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">premier mitap</a> , qui s'est tenu en septembre.  La derni√®re fois que vous avez pu lire (et voir) comment <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utiliser Consul pour faire √©voluer les services avec √©tat</a> d'Ivan Bubnov de BIT.GAMES, et aujourd'hui nous parlerons de CICD.  Plus pr√©cis√©ment, notre administrateur syst√®me Egor Panov en parlera, qui est responsable de la disponibilit√© des infrastructures et des services dans Pixonic.  Sous la coupe - d√©codage de la performance. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U6AE8J7q81M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  Pour commencer, l'industrie du jeu est plus risqu√©e - vous ne savez jamais exactement ce qui va sombrer dans le c≈ìur du joueur.  Et donc nous cr√©ons de nombreux prototypes.  Bien s√ªr, nous cr√©ons des prototypes sur le genou de b√¢tons, cordes et autres mat√©riaux improvis√©s. <br><br>  Il semblerait qu'avec cette approche, faire quelque chose qui peut ensuite √™tre soutenu est g√©n√©ralement impossible.  Mais m√™me √† ce stade, nous tenons bon.  Nous nous appuyons sur trois piliers: <br><br><ol><li>  excellente expertise des testeurs; </li><li>  interaction √©troite avec eux; </li><li>  le temps que nous donnons pour les tests. </li></ol><br>  En cons√©quence, si nous ne construisons pas nos processus, par exemple, le d√©ploiement ou l'IC (int√©gration continue), nous arriverons t√¥t ou tard √† la conclusion que la dur√©e des tests augmentera et augmentera tout le temps.  Et nous allons soit tout faire lentement et perdre le march√©, soit nous exploserons simplement √† chaque d√©ploiement. <br><br>  Mais construire un processus CICD n'est pas si simple.  Certains diront, eh bien, oui, je vais mettre Jenkins, je vais appeler rapidement quelque chose, maintenant je suis pr√™t CICD.  Non, ce n'est pas seulement un outil, c'est aussi une pratique.  Commen√ßons dans l'ordre. <br><br><img src="https://habrastorage.org/webt/3e/di/1h/3edi1hvgrx4zntc1usxtekz-09w.png"><br>  Le premier.  De nombreux articles √©crivent que tout doit √™tre conserv√© dans un r√©f√©rentiel: le code, les tests, le d√©ploiement et m√™me le sch√©ma de base de donn√©es et les param√®tres IDE communs √† tous.  Nous avons suivi notre propre chemin. <br><br>  Nous avons allou√© diff√©rents r√©f√©rentiels: d√©ploiement dans notre r√©f√©rentiel, tests dans un autre.  √áa marche plus vite.  Cela ne vous convient peut-√™tre pas, mais pour nous, c'est beaucoup plus pratique.  Parce qu'il y a un point important √† ce stade - vous devez cr√©er un simple et transparent pour tous les hitflows.  Bien s√ªr, vous pouvez t√©l√©charger le fichier fini quelque part, mais dans tous les cas, vous devez le r√©gler vous-m√™me, l'am√©liorer.  Pour nous, par exemple, un d√©ploiement vit sur son propre gitflow, qui ressemble plus √† un flux GitHub, et le d√©veloppement de serveur vit sur son propre gitflow. <br><br>  Le paragraphe suivant.  Vous devez configurer une version enti√®rement automatique.  Il est clair qu'√† la premi√®re √©tape, le d√©veloppeur lui-m√™me recueille personnellement le projet, puis il le d√©ploie personnellement avec l'aide de SCP, le lance lui-m√™me, l'envoie √† celui qui en a besoin.  Cette option n'a pas dur√© longtemps, un script bash est apparu.  Eh bien, comme l'environnement des d√©veloppeurs est en constante √©volution, un serveur de construction d√©di√© sp√©cial est apparu.  Il a v√©cu tr√®s longtemps, pendant ce temps, nous avons r√©ussi √† augmenter jusqu'√† 500 serveurs, √† configurer les configurations de serveur sur Puppet, √† accumuler l'h√©ritage sur Puppet, √† refuser Puppet, √† passer √† Ansible, et ce buildserver a continu√© √† vivre. <br><br>  Ils ont d√©cid√© de tout changer apr√®s deux appels, ils n'ont pas attendu un troisi√®me.  L'histoire est claire: le buildserver est un point de d√©faillance unique et, bien s√ªr, lorsque nous devions d√©ployer quelque chose, le centre de donn√©es est compl√®tement tomb√© avec notre buildserver.  Et le deuxi√®me appel: nous devions mettre √† jour la version Java - nous l'avons mise √† jour sur le buildserver, l'avons install√©e sur la sc√®ne, tout est cool, tout est super et l√† nous avons d√ª commencer un petit bugfix sur le prod.  Bien s√ªr, nous avons oubli√© de reculer et tout s'est effondr√©. <br><br>  Apr√®s cela, ils ont tout r√©√©crit pour que la construction enti√®re puisse se produire sur absolument n'importe quel agent TeamCity et l'ont r√©√©crit sur Ansible, car il a √©t√© configur√© sur Ansible, pourquoi ne pas utiliser le m√™me outil pour le d√©ploiement aussi. <br><br>  La r√®gle suivante: plus vous vous engagez souvent, mieux c'est.  Pourquoi?  Parce qu'il y en a un quatri√®me: chaque commit est collect√©.  Et en fait, encore plus que chaque commit.  J'ai d√©j√† dit que nous avons TeamCity, et cela vous permet d'ex√©cuter un commit √† partir de votre IDE pr√©f√©r√© (vous devinez ce que je veux dire).  En fait, une r√©troaction rapide, tout est super. <br><br>  Une construction cass√©e est r√©par√©e imm√©diatement.  D√®s que vous configurez le d√©ploiement automatique, vous devez configurer la notification automatique dans Slack.  Nous savons tous tr√®s bien qu'un d√©veloppeur ne sait comment son code fonctionne qu'au moment o√π il l'√©crit.  Par cons√©quent: la personne a d√©couvert - imm√©diatement r√©par√©e. <br><br>  Nous testons l'environnement en r√©p√©tant prod.  C'est simple, nous avons choisi Ansible et AWX.  Quelqu'un pourrait demander, mais qu'en est-il de Docker, Kubernetes, OpenShift, o√π tous les probl√®mes hors de la bo√Æte ont √©t√© r√©solus depuis longtemps?  J'ai oubli√© de dire que nous avons des composants √† la fois Linux et Windows.  Et, par exemple, le serveur Photon, qui est sous Windows, nous n'avons que r√©cemment pu emballer plus ou moins normalement dans un conteneur Docker de 10 Go.  En cons√©quence, nous avons une application Windows qui ne s‚Äôemballe pas bien dans un conteneur;  Il existe une application sous Linux (qui est en Java), qui est parfaitement packag√©e, mais il n'y a aucune raison de le faire, elle fonctionne bien partout o√π vous l'ex√©cutez.  C'est Java. <br><br>  Ensuite, nous avons choisi entre Ansible et Chef.  Ils fonctionnent tous les deux correctement avec Windows, mais Ansible s'est av√©r√© beaucoup plus facile pour nous.  Lorsque nous avons d√©j√† install√© AWX - en g√©n√©ral, tous les incendies sont devenus.  AWX a des secrets, des graphismes, de l'histoire.  Vous pouvez montrer √† une personne loin de tout cela, il verra imm√©diatement tout et tout deviendra clair. <br><br>  Et vous devez toujours garder la construction rapide.  Je ne sais pas pourquoi, mais chaque fois que vous lancez un nouveau projet, vous oubliez compl√®tement le serveur de build, les agents et s√©lectionnez un ordinateur qui tra√Ænait - voici notre serveur de build.  Il n'est pas souhaitable de r√©p√©ter cette erreur, car tout ce dont je parle (commentaires rapides, avantages) - tout ne sera pas si pertinent si l'assemblage d√©marre sur votre propre ordinateur portable beaucoup plus rapidement que sur une sorte de batterie de serveurs. <br><br><img src="https://habrastorage.org/webt/ll/ab/zl/llabzlqv49woxdlukv36uohavcg.png"><br>  7 points - et nous avons d√©j√† construit une sorte de processus CI.  Super  Le diagramme suivant n'est pas visible, mais il y a toujours Graylog sur le c√¥t√©.  Qui lit nos articles sur Habr√©, qui a d√©j√† vu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comment nous avons choisi Graylog</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comment installer</a> .  Dans tous les cas, cela aide √† d√©vier si un probl√®me persiste. <br><br><img src="https://habrastorage.org/webt/7d/g7/vo/7dg7vonpatitv6azg812qcycovw.png"><br>  Maintenant, sur cette base, il est d√©j√† possible de proc√©der au d√©ploiement. <br><br><img src="https://habrastorage.org/webt/z4/9d/ey/z49deyle1javphwp9unxx8stk24.png"><br>  Mais j'ai d√©j√† parl√© du d√©ploiement dans le deuxi√®me paragraphe, je ne m'attarderai donc pas l√†-dessus.  Je dirai une chose √† propos de la vie: si vous utilisez Ansible, assurez-vous d'ajouter cette s√©rie, qui est sur la diapositive.  Il est arriv√© plus d'une fois que vous d√©marriez quelque chose, puis vous comprenez, mais je l'ai d√©marr√© √† tort, ou √† tort, ou √† tort, et vous voyez que ce n'est qu'un serveur.  Et nous pouvons facilement perdre un serveur et vous venez de le t√©l√©charger √† nouveau, personne ne l'a remarqu√©. <br><br>  De plus, ils ont install√© le r√©f√©rentiel d'artefacts sur Nexus - c'est un point d'entr√©e unique pour absolument tout le monde, pas seulement CI. <br><br><img src="https://habrastorage.org/webt/vd/gn/bx/vdgnbxlqrwunngs2a2qwec-rqqa.gif"><br>  Et cela nous aide beaucoup √† assurer la r√©p√©tabilit√©.  Eh bien, comme Nexus peut fonctionner en tant que services proxy dans diff√©rentes r√©gions, ils acc√©l√®rent le d√©ploiement, l'installation de packages rpm, les images de docker, etc. <br><br>  Lorsque vous d√©posez un nouveau projet, il est conseill√© de choisir des composants faciles √† automatiser.  Par exemple, nous n'avons pas r√©ussi avec le serveur Photon.  En tout cas, c'√©tait la meilleure solution √† d'autres √©gards.  Mais Cassandra, par exemple, est tr√®s facilement mise √† jour et automatis√©e. <br><br><img src="https://habrastorage.org/webt/47/0d/dp/470ddpcmyhjgdxscckex6l_drow.png"><br>  Voici un exemple de l'un de nos projets.  Le client arrive sur le serveur APP, o√π il a un profil dans la base de donn√©es Cassandra, puis se rend sur le serveur ma√Ætre, qui, avec l'aide du matchmaking, lui donne un serveur de jeu avec une sorte d'espace.  Tous les autres services sont r√©alis√©s sous la forme d'une ¬´application - base de donn√©es¬ª et sont mis √† jour exactement de la m√™me mani√®re. <br><br>  Deuxi√®me point: vous devez fournir une architecture de d√©ploiement simple et faiblement coupl√©e.  Nous avons r√©ussi. <br><br><img src="https://habrastorage.org/webt/hi/_u/gg/hi_uggurj1cdydwxnel9t_wfawi.png"><br>  Voir, mettre √† jour par exemple le serveur d'applications.  Nous avons des services de d√©couverte d√©di√©s qui reconfigurent l'√©quilibreur, nous allons donc simplement sur le serveur d'applications, l'extinction, il se bloque de l'√©quilibrage, nous mettons √† jour tout.  Et donc avec chacun individuellement. <br><br>  Les serveurs ma√Ætres sont mis √† jour presque √† l'identique.  Le client envoie un ping √† chaque serveur ma√Ætre de la r√©gion et passe √† celui sur lequel le ping est le meilleur.  En cons√©quence, si nous mettons √† jour le serveur ma√Ætre, alors le jeu ira peut-√™tre un peu plus lentement, mais il est mis √† jour facilement et simplement. <br><br>  Les serveurs de jeux sont mis √† jour un peu diff√©remment car il y a toujours un jeu en cours.  Nous allons au matchmaking, lui demandons de mettre un certain serveur hors service, de venir sur le serveur de jeu, d'attendre que les jeux deviennent exactement z√©ro et de mettre √† jour.  Ensuite, nous revenons √† l'√©quilibre. <br><br><img src="https://habrastorage.org/webt/yk/iv/eu/ykiveufay9i9b2xbtv11e09pw58.gif"><br>  Le point cl√© ici est les points d'extr√©mit√© que poss√®de chacun des composants et avec lesquels il est facile et simple de communiquer.  Si vous avez besoin d'un exemple, il existe un cluster Elasticsearch.  En utilisant des requ√™tes http r√©guli√®res dans JSON, vous pouvez facilement communiquer avec lui.  Et il donne imm√©diatement dans le m√™me JSON toutes sortes de m√©triques diff√©rentes et des informations de haut niveau sur le cluster: vert, jaune, rouge. <br><br>  Apr√®s avoir termin√© ces 12 √©tapes, nous avons augment√© le nombre d'environnements, commenc√© √† tester davantage, le d√©ploiement a √©t√© acc√©l√©r√©, les gens ont commenc√© √† recevoir des commentaires rapides. <br><br><img src="https://habrastorage.org/webt/ax/sx/jh/axsxjh2bd2vw8cazn5tdf1kcguq.png"><br>  Ce qui est tr√®s important, nous avons obtenu la simplicit√© et la rapidit√© des exp√©riences.  Et cela est tr√®s important, car lorsqu'il y a beaucoup d'exp√©riences, nous pouvons facilement filtrer les id√©es erron√©es et nous concentrer sur les bonnes.  Et non sur la base d‚Äô√©valuations subjectives, mais sur la base d‚Äôindicateurs objectifs. <br><br>  En fait, je ne suis plus lorsque nous avons un d√©ploiement l√†-bas, lors de la sortie.  Il n'y a pas de ¬´oh, rel√¢chez!¬ª Sentiment, tout est r√©uni et la chair de poule.  Maintenant, c'est une telle op√©ration de routine, je vois p√©riodiquement dans une salle de chat que quelque chose s'est produit, d'accord.  C'est vraiment cool.  Vos administrateurs syst√®me rugiront de joie lorsque vous le ferez. <br><br>  Mais le monde ne reste pas immobile, il rebondit parfois.  Nous avons quelque chose √† am√©liorer.  Par exemple, je voudrais √©galement mettre les journaux de la construction dans Graylog.  Cela n√©cessitera un raffinement suppl√©mentaire de la journalisation afin qu'il n'y ait pas d'histoire distincte, mais clairement: c'est ainsi que la construction a √©t√© assembl√©e, donc elle a √©t√© test√©e, elle a √©t√© d√©ploy√©e, et donc elle se comporte sur la prod.  Et une surveillance continue - c'est une histoire plus compliqu√©e. <br><br><img src="https://habrastorage.org/webt/bk/b1/pn/bkb1pnqqin9etc8d-ze3jcjl0wa.png"><br>  Nous utilisons Zabbix, et il n'est pas du tout pr√™t pour de telles approches.  La 4e version sortira bient√¥t, nous d√©couvrirons ce qui s'y trouve et si tout va mal, nous trouverons une solution diff√©rente.  Je vais vous dire comment cela se passera lors de la prochaine r√©union. <br><br><h4>  Questions du public </h4><br>  <b>Et que se passe-t-il lorsque vous jetez des ordures en production?</b>  <b>Par exemple, vous n'avez pas calcul√© quelque chose en fonction des performances et tout va bien pour l'int√©gration, mais en production, regardez - vos serveurs commencent √† planter.</b>  <b>Comment recule-t-on?</b>  <b>Y a-t-il un bouton de sauvegarde?</b> <br><br>  Nous avons essay√© de faire l'automatisation de la restauration.  Vous pouvez ensuite parler de rapports sur la fa√ßon dont cela fonctionne, √† quel point tout est merveilleux.  Mais d'abord, nous concevons pour que les versions soient r√©trocompatibles et testons cela.  Et quand nous avons fait cette chose enti√®rement automatique, qui v√©rifie quelque chose et la fait reculer, puis a commenc√© √† vivre avec, nous avons r√©alis√© que nous y mettions beaucoup plus d'efforts que si nous prenions simplement l'ancienne version avec la m√™me p√©dale . <br><br>  <b>Concernant la mise √† jour automatique du d√©ploiement: pourquoi apportez-vous des modifications au serveur actuel, sans en ajouter un nouveau et simplement l'ajouter au groupe cible ou √† l'√©quilibreur?</b> <br><br>  Si vite. <br><br>  <b>Par exemple, si vous devez mettre √† jour la version Java, vous changez l'√©tat de l'instance sur Amazon, la mise √† jour de la version Java ou autre chose, alors comment voulez-vous revenir dans ce cas?</b>  <b>Apportez-vous des modifications sur le serveur de production?</b> <br><br>  Oui, chaque composant fonctionne bien avec la nouvelle version et l'ancienne.  Oui, vous devrez peut-√™tre recharger le serveur. <br><br>  <b>Il y a des changements d'√©tat quand de gros probl√®mes sont possibles ...</b> <br><br>  Alors explosez. <br><br>  <b>Il me semble simplement ajouter un nouveau serveur et simplement le mettre sur le groupe cible dans le groupe cible - une petite t√¢che de complexit√© et une assez bonne pratique.</b> <br><br>  Nous sommes h√©berg√©s sur du mat√©riel, pas dans les nuages.  Nous pouvons ajouter un serveur - c'est possible, mais un peu plus longtemps qu'un simple clic dans le cloud.  Par cons√©quent, nous prenons notre serveur actuel (nous n'avons pas une telle charge pour ne pas pouvoir retirer certaines machines) - nous retirons certaines machines, les mettons √† jour, y mettons le trafic de vente, voyons comment cela fonctionne, si tout va bien, alors nous continuerons √† tout faire d'autres voitures. <br><br>  <b>Vous dites que si chaque commit est collect√© et si tout est mauvais - le d√©veloppeur r√®gle tout tout de suite.</b>  <b>Comprenez-vous que tout va mal?</b>  <b>Quels sont les commits?</b> <br><br>  Naturellement, au d√©but c'√©tait une sorte de test manuel, le feedback est lent.  Ensuite, avec une sorte de tests automatiques sur Appium, tout cela est couvert, cela fonctionne et donne une sorte de r√©troaction sur la chute ou non des tests. <br><br>  <b>C'est-√†-dire</b>  <b>Tout d'abord, chaque commit est d√©ploy√© et les testeurs le regardent-ils?</b> <br><br>  Eh bien, pas tout le monde, c'est de la pratique.  Nous avons fait une pratique sur ces 12 points - acc√©l√©r√©e.  En fait, c'est un travail long et difficile, peut-√™tre au cours de l'ann√©e.  Mais id√©alement, vous arrivez √† cela et tout fonctionne.  Oui, nous avons besoin d'une sorte d'autotests, au moins un ensemble minimal, pour que tout fonctionne pour vous. <br><br>  <b>Et la question est plus petite: il y a un serveur d'application dans l'image et ainsi de suite, est-ce ce qui m'int√©resse l√†-bas?</b>  <b>Vous avez dit que vous ne semblez pas avoir Docker, qu'est-ce qu'un serveur?</b>  <b>Java nu ou quoi?</b> <br><br>  Quelque part, c'est Photon sur Windows (un serveur de jeux), le serveur d'applications est une application Java sur Tomcat. <br><br>  <b>C'est-√†-dire</b>  <b>pas de virtualoks, pas de conteneurs, rien?</b> <br><br>  Eh bien, Java est, pourrait-on dire, un conteneur. <br><br>  <b>Et tout se d√©roule-t-il avec Ansible?</b> <br><br>  Oui  C'est-√†-dire  √† un certain moment, nous n'avons tout simplement pas investi dans l'orchestration, car pourquoi?  Si dans tous les cas, Windows devra √™tre g√©r√© s√©par√©ment de la m√™me mani√®re, et ici absolument tout est couvert par un seul outil. <br><br>  <b>Et comment la base de donn√©es est-elle d√©ploy√©e?</b>  <b>D√©pendance √† l'√©gard d'un composant ou d'un service?</b> <br><br>  Il existe un sch√©ma dans le service lui-m√™me qui se d√©ploiera lorsqu'il appara√Ætra et doit √™tre d√©velopp√© pour que rien ne soit supprim√©, mais juste quelque chose soit ajout√© et il soit r√©trocompatible. <br><br>  <b>Votre base est-elle √©galement en fer ou est-elle quelque part dans le cloud d'Amazon?</b> <br><br>  La plus grande base est le fer, mais il y en a d'autres.  Il y en a de petits, RDS n'est plus du fer, du virtuel.  Ces petits services que j'ai montr√©s: chats, ligues, bavarder avec Facebook, clans, l'un d'eux est RDS. <br><br>  <b>Serveur ma√Ætre - √† quoi ressemble-t-il?</b> <br><br>  En fait, c'est le m√™me serveur de jeu, seulement avec un signe du ma√Ætre et c'est un √©quilibreur.  C'est-√†-dire  le client envoie un ping √† tous les ma√Ætres, puis il re√ßoit celui auquel le ping est le moins, et d√©j√† le serveur ma√Ætre utilisant le matchmaking recueille les salles sur les serveurs de jeu et envoie le joueur. <br><br>  <b>Je comprends bien que pour chaque d√©ploiement, vous √©crivez (si des fonctionnalit√©s apparaissent) une migration pour mettre √† jour les donn√©es?</b>  <b>Vous avez dit que vous prenez d'anciens artefacts et que vous les remplissez - qu'advient-il des donn√©es?</b>  <b>Ecrivez-vous une migration pour restaurer la base?</b> <br><br>  Il s'agit d'une op√©ration de restauration tr√®s rare.  Oui, vous √©crivez la migration des plumes et quoi faire. <br><br>  <b>Comment une mise √† jour du serveur se synchronise-t-elle avec les mises √† jour du client?</b>  <b>C'est-√†-dire</b>  <b>vous devez sortir une nouvelle version du jeu - allez-vous d'abord mettre √† jour tous les serveurs, puis les clients seront mis √† jour?</b>  <b>Le serveur prend-il en charge √† la fois l'ancienne et la nouvelle version?</b> <br><br>  Oui, nous d√©veloppons le basculement et la gradation des fonctionnalit√©s c.  C'est-√†-dire  Il s'agit d'une poign√©e sp√©ciale, un levier qui vous permet d'activer certaines fonctionnalit√©s plus tard.  Vous pouvez absolument mettre √† niveau calmement, voir que tout fonctionne pour vous, mais n'incluez pas cette fonctionnalit√©.  Et lorsque vous avez d√©j√† dispers√© le client, vous pouvez resserrer de 10% en fiddning, voir que tout va bien, puis au maximum. <br><br>  <b>Vous dites que vous avez stock√© s√©par√©ment des parties du projet dans diff√©rents r√©f√©rentiels, c'est-√†-dire</b>  <b>avez-vous une sorte de processus de d√©veloppement?</b>  <b>Si vous modifiez le projet lui-m√™me, vos tests devraient tomber car vous avez modifi√© le projet.</b>  <b>Les tests qui se trouvent s√©par√©ment doivent donc √™tre corrig√©s le plus rapidement possible.</b> <br><br>  Je vous ai parl√© de la baleine "interaction √©troite avec les testeurs."  Ce sch√©ma avec diff√©rents r√©f√©rentiels ne fonctionne tr√®s bien que s'il existe une communication tr√®s dense.  Ce n'est pas un probl√®me pour nous, tout le monde communique facilement les uns avec les autres, il y a une bonne communication. <br><br>  <b>C'est-√†-dire</b>  <b>les testeurs prennent-ils en charge le r√©f√©rentiel de tests de votre √©quipe?</b>  <b>Et les autotests se trouvent s√©par√©ment?</b> <br><br>  Oui  Vous avez cr√©√© une fonctionnalit√© et vous pouvez collecter exactement les autotests dont vous avez besoin dans le r√©f√©rentiel des testeurs, et ne pas tout v√©rifier. <br><br>  <b>Une telle approche, lorsque tout se d√©roule rapidement - vous pouvez vous permettre d'aller imm√©diatement au prod pour chaque commit.</b>  <b>Suivez-vous de telles tactiques ou composez-vous des versions?</b>  <b>C'est-√†-dire</b>  <b>une fois par semaine, pas le vendredi, pas le week-end, avez-vous des tactiques de sortie ou la fonctionnalit√© est-elle pr√™te, puis-je la sortir?</b>  <b>Parce que si vous faites une petite version √† partir de petites fonctionnalit√©s, vous avez moins de chances que tout se brise, et si quelque chose se brise, vous savez certainement quoi.</b> <br><br>  Forcer les utilisateurs clients √† t√©l√©charger une nouvelle version toutes les cinq minutes ou tous les jours n'est pas une bonne id√©e.  Dans tous les cas, vous serez attach√© au client.  C'est formidable lorsque vous avez un projet Web dans lequel vous pouvez mettre √† jour au moins tous les jours et n'avez rien √† faire.  L'histoire est plus compliqu√©e avec le client, nous avons une sorte de tactique de lib√©ration et nous nous y tenons. <br><br>  <b>Vous avez parl√© de d√©ployer l'automatisation sur les serveurs de produits et (si je comprends bien), il y a √©galement le d√©ploiement de l'automatisation pour un test - qu'en est-il des environnements de d√©veloppement?</b>  <b>Y a-t-il une sorte d'automatisation d√©ploy√©e par les d√©veloppeurs?</b> <br><br>  Presque la m√™me chose.  La seule chose n'est pas les serveurs de fer, mais dans la machine virtuelle, mais l'essence est √† peu pr√®s la m√™me.  En m√™me temps, sur le m√™me Ansible, nous avons √©crit (nous avons Ovirt) la cr√©ation de cette machine virtuelle et son moletage. <br><br>  <b>Avez-vous toute l'histoire stock√©e dans un projet avec les prods Ansible et les configurations de test, ou est-ce qu'elle vit et se d√©veloppe s√©par√©ment?</b> <br><br>  On peut dire que ce sont des projets s√©par√©s.  Dev (nous l'appelons devbox) est une histoire quand tout est dans un seul pack, et sur la prod c'est une histoire distribu√©e. <br><br><h3>  Plus d'entretiens avec Pixonic DevGAMM Talks </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Utiliser Consul pour faire √©voluer les services avec √©tat</a> (Ivan Bubnov, DevOps chez BIT.GAMES); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La pratique de l'utilisation du mod√®le d'acteur dans la plateforme backend du jeu Quake Champions</a> (Roman Rogozin, d√©veloppeur backend Saber Interactive); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Architecture de m√©ta-serveur de tir en ligne mobile Tacticool</a> (Pavel Platto, ing√©nieur logiciel principal chez PanzerDog); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment ECS, C # Job System et SRP changent l'approche de l'architecture</a> (Valentin Simonov, Field Engineer chez Unity); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Principe KISS en d√©veloppement</a> (Konstantin Gladyshev, Lead Game Programmer chez 1C Game Studios); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Logique de jeu g√©n√©rale sur le client et le serveur</a> (Anton Grigoriev, directeur technique adjoint chez Pixonic). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Concombre dans le cloud: utilisation des scripts BDD pour les tests de</a> r√©sistance des produits (Anton Kosyakin, chef de produit technique sur la plate-forme ALICE). </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425813/">https://habr.com/ru/post/fr425813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425803/index.html">La lutte pour les ressources, partie 3: il y a peu de m√©moire</a></li>
<li><a href="../fr425805/index.html">DevOops 2018: streaming en ligne gratuit, f√™te et plus</a></li>
<li><a href="../fr425807/index.html">Complexit√© des syst√®mes et m√©thodes de ¬´lutte¬ª avec elle</a></li>
<li><a href="../fr425809/index.html">Apprentissage des langages de programmation dans le processus: d√©veloppeur de logiciels sur des projets complexes</a></li>
<li><a href="../fr425811/index.html">Un autre probl√®me d'affichage du MacBook Pro</a></li>
<li><a href="../fr425815/index.html">Qui n'a pas besoin de r√©f√©rencement, comment choisir un optimiseur et tester son travail</a></li>
<li><a href="../fr425817/index.html">Glissez et d√©posez dans vos applications iOS</a></li>
<li><a href="../fr425819/index.html">GitLab 11.3 publi√© avec le r√©f√©rentiel Maven et des environnements s√©curis√©s</a></li>
<li><a href="../fr425821/index.html">Comment devenir d√©veloppeur React en 2018</a></li>
<li><a href="../fr425823/index.html">Statistiques IPO 2018: 45 milliards de dollars lev√©s, Dropbox a lev√© moins d'argent que les soci√©t√©s pharmaceutiques et les vendeurs immobiliers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>