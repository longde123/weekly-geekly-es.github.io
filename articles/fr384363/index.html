<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↖️ 🖐🏿 🆒 Blindage LCD intelligent pour Arduino 👩‍🎤 🕊️ 🈁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je connais l'opinion de nombreux experts techniques sur Arduino et partage dans une certaine mesure leur point de vue. Néanmoins, par exemple, pour un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blindage LCD intelligent pour Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384363/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je connais l'opinion de nombreux experts techniques sur Arduino et partage dans une certaine mesure leur point de vue. </font><font style="vertical-align: inherit;">Néanmoins, par exemple, pour une automatisation rapide, cette plate-forme est très utile: elle, comme le concepteur d'un enfant, vous permet d'assembler et de programmer un appareil en quelques heures sans perdre de temps sur diverses «références indéfinies à __bss_start__» et «Appareil non détecté». </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois, pour automatiser une autre routine, j'avais besoin d'un affichage. </font><font style="vertical-align: inherit;">J'ai feuilleté Aliexpress et je n'ai toujours pas trouvé de bouclier approprié pour Arduno.</font></font><br>
<img src="https://habrastorage.org/files/d26/794/34a/d2679434ac0b4fccb0a515c371f8050a.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chat pour attirer l'attention</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les problèmes de down and out ont commencé</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, j'avais besoin d'une interface utilisateur de dialogue et, en plus, rapidement. </font><font style="vertical-align: inherit;">(Le chat devait attirer l'attention, il a été remarqué - cela fonctionne.) Comme si c'était exprès, tous les fabricants ont suggéré de dessiner manuellement des champs de saisie et des barres de progression, de programmer des gestionnaires de boutons et, en un mot, de faire tout ce que je ne voulais pas. </font><font style="vertical-align: inherit;">Étonnamment, pourquoi ne pas fournir une bibliothèque de haut niveau qui répond à ces préoccupations? </font><font style="vertical-align: inherit;">Probablement dans 80% des cas, toutes les tâches se résument à une séquence simple:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Affichez un formulaire avec des champs de saisie.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attendez que l'utilisateur modifie le champ Foo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtenez la nouvelle valeur du champ Foo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faites quelque chose en retour.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le manque de bibliothèque n'était pas le seul obstacle. </font><font style="vertical-align: inherit;">Les rares réserves de ROM de mon Arduino Uno (et la même situation avec Leonardo, Ethernet, Pro) étaient au mieux suffisantes pour stocker une image à une résolution de 128x128 pixels. </font><font style="vertical-align: inherit;">Et il n'y avait plus de place pour le code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir parcouru un large front à travers Aliexpress, DX et les magasins similaires, j'ai finalement trouvé, dans le langage des développeurs de réseaux, des </font><font style="vertical-align: inherit;">boucliers </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"minces"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"trop ​​gros"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les premiers ne résolvent pas le problème, mais sont bon marché. </font><font style="vertical-align: inherit;">Ces derniers sont comme un système de missile antiaérien, et vous devrez payer un montant équitable pour cette redondance. </font><font style="vertical-align: inherit;">Si je pouvais mettre les lèvres de Nikanor Ivanovich sur le nez d'Ivan Kuzmich ... Après quelques hésitations, j'ai décidé de combler cette lacune marketing ennuyeuse.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que devons-nous construire un bouclier</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai écarté la planche, commandé les premiers échantillons pour des expériences, essayé. </font></font><br>
<img src="https://habrastorage.org/files/0ff/634/66d/0ff63466d12c41fd8f7e53d2c9aa3dd5.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'idée a progressivement pris forme. </font><font style="vertical-align: inherit;">Ainsi, la solution doit être facile à utiliser et toujours bon marché (à propos de laquelle ci-dessous):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À bord du bouclier devrait être un microcontrôleur avec une marge de mémoire pour au moins quelques écrans.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour vous assurer qu'il n'y a aucun problème avec la mémoire, vous pouvez ajouter un slot microSD.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De plus, juste sur le bouclier, vous devez placer quelques boutons.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le microcontrôleur doit faire le «travail noir», rendre les champs de formulaire et traiter les pressions de bouton de telle manière que, uniquement en alimentant le bouclier cousu, il serait possible de feuilleter les formulaires, de modifier les champs de saisie, de mettre un oiseau dans la case à cocher, etc.</font></font></li>
<li>      Arduino      : I2C, SPI  UART.       Arduino; (,      ).</li>
<li>   Arduino           GPIO,      .</li>
<li>     , ,    « Vim,  !»,   ,      ,       GTK Glade             .</li>
</ul><br>
<img src="https://habrastorage.org/files/03a/da3/2c1/03ada32c13a94c31a08f3db52816529f.png"><br>
<br>
<h4>   </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le composant le plus fondamental du bouclier est le module d'affichage. Tant le prix que les caractéristiques techniques du produit en dépendent le plus. Lors de la recherche d'un module adapté, je voulais manger du poisson et monter à cheval: d'une part, je suis parti du critère de disponibilité, d'autre part, le coût du module devrait être minime. Fondamentalement, ces critères se contredisent: des magasins comme Terraelectronics, avec des bureaux dans tout le pays, ont offert un certain ensemble d'écrans couleur pour les modèles courants, mais leurs prix étaient de 2000 roubles et plus; d'autre part, il y avait beaucoup de bonnes options sur le même Aliexpress, mais elles avaient toutes le même inconvénient: il y avait un abîme entre eux et nos malheureux utilisateurs, dans lequel plus d'un millier de cartons sont morts, et dont le comportement était tout aussi facilement prévisible,comme le comportement des citations de pétrole ou de la météo.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chacun comprenait bien sûr de quoi il s'agissait.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Donc, mon idée n'était encore qu'une idée.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme cela arrive souvent, le bavardage de la cuisine autour d'une tasse de thé se révèle fatal. </font><font style="vertical-align: inherit;">Un ami a raconté au passage comment il avait changé un écran cassé sur son HTC. </font><font style="vertical-align: inherit;">Il s'est avéré que les écrans de smartphone, ayant sans aucun doute de meilleures caractéristiques que les produits des catalogues Terraelectronics, coûtaient deux à trois fois moins cher! </font><font style="vertical-align: inherit;">Ce fut une révélation. </font><font style="vertical-align: inherit;">Après cela, un affichage a été assez rapidement trouvé, qui en Russie peut être acheté à presque chaque étape pour un sou; </font><font style="vertical-align: inherit;">Il a été installé sur les téléphones Nokia 2600/2650/3100/3200/5100/5140/6100/6220/6610/7210/7250. </font><font style="vertical-align: inherit;">(Comme il s'est avéré plus tard, j'ai redécouvert l'Amérique, car cet écran est utilisé dans de nombreux boucliers pour Arduino.) Sa résolution - 128 × 128 pixels - est suffisante pour afficher un formulaire avec trois ou quatre champs d'entrée.</font></font><br>
<img src="https://habrastorage.org/files/3fd/cf9/4da/3fdcf94da39b4634b906d22190e4bc25.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le vitrage vaut mieux que le vantard</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup, probablement, ne comprennent toujours pas comment utiliser le gadget décrit. </font><font style="vertical-align: inherit;">La façon la plus simple d'illustrer cela est peut-être avec deux situations standard:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons un thermomètre numérique, il est nécessaire d'afficher ses lectures sur l'écran.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a un servo variateur, vous devez définir les paramètres de son fonctionnement. </font><font style="vertical-align: inherit;">Par exemple, sa position.</font></font></li>
</ul><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thermomètre</font></font></h5><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;intelcd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;OneWire.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;DallasTemperature.h&gt;</span></span><font></font>
 <font></font>
<span class="hljs-comment">//     2 Arduino   1-Wire</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ONE_WIRE_BUS 2</span><font></font>
 <font></font>
<span class="hljs-comment">/*************************************************************
*     ,                      * 
*      :                      *
*************************************************************/</span>
<span class="hljs-comment">//  ,   . </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FORM_TERMO 0</span>
<span class="hljs-comment">//  ,    </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FIELD_TERMO 0</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-comment">//   oneWire     oneWire</span>
<span class="hljs-function">OneWire <span class="hljs-title">oneWire</span><span class="hljs-params">(ONE_WIRE_BUS)</span></span>; 
<span class="hljs-comment">//   sensor    </span>
<span class="hljs-function">DallasTemperature <span class="hljs-title">sensor</span><span class="hljs-params">(&amp;oneWire)</span></span>;
<span class="hljs-comment">//   lcd   LCD </span><font></font>
InteLCD lcd;<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
    lcd.init(); <font></font>
    sensor.begin(); <font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-comment">//   </span><font></font>
    sensor.requestTemperatures();<font></font>
 <font></font>
    <span class="hljs-comment">//     </span>
    lcd.update(FORM_TERMO, FIELD_TERMO, sensor.getTempCByIndex(<span class="hljs-number">0</span>));<font></font>
    delay(<span class="hljs-number">1000</span>);<font></font>
}<font></font>
</code></pre><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servo</font></font></h5><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;InteLCD.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
 <font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FORM_SERVO 0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FIELD_SERVO 0</span><font></font>
 <font></font>
InteLCD lcd; <span class="hljs-comment">//   lcd   LCD </span>
Servo myservo; <span class="hljs-comment">//   servo   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lcdEvent</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>; <span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
    myservo.attach(<span class="hljs-number">9</span>); <span class="hljs-comment">// ,    9 </span>
    lcd.init(); <span class="hljs-comment">//  lcd</span><font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lcdEvent</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">switch</span> (lcd.event.code) {
        <span class="hljs-keyword">case</span> InteLCD::FIELD_UPDATED:
		<span class="hljs-comment">//    0  1</span>
		<span class="hljs-keyword">if</span> (lcd.event.formid == FORM_SERVO &amp;&amp; lcd.event.fieldid == FIELD_SERVO) <font></font>
               {<font></font>
    	            <span class="hljs-comment">//      </span>
        	    <span class="hljs-comment">//      </span>
            	    myservo.write(lcd.event.arg[<span class="hljs-number">0</span>]); <font></font>
 <font></font>
    	            <span class="hljs-comment">//       </span>
        	    delay(<span class="hljs-number">15</span>); <font></font>
	    	}<font></font>
 <font></font>
            <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À la fin</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À mon avis, l'électronique DIY devrait évoluer vers la plus grande modularité, où chaque module est extrêmement simple et complet. </font><font style="vertical-align: inherit;">Ensuite, alors que l'enfant érige son château de jouets à partir des différentes pièces Lego, l'utilisateur doit assembler son appareil en briques, mais sans utiliser de marteau et de lime. </font><font style="vertical-align: inherit;">Mon bouclier est un petit pas dans cette direction. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je serai heureux d'entendre de précieux conseils et de comprendre qui d'autre que moi manque une chose si utile.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr384363/">https://habr.com/ru/post/fr384363/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr384351/index.html">Le programmeur a mis en place un réseau de neurones pour l'appariement automatique des paires dans Tinder</a></li>
<li><a href="../fr384353/index.html">Pénétrer l'esprit d'un adversaire: le légendaire Bletchley Park</a></li>
<li><a href="../fr384355/index.html">Le savon antibactérien ne résiste pas mieux à la contamination bactérienne que d'habitude</a></li>
<li><a href="../fr384359/index.html">Amour et robots (18+)</a></li>
<li><a href="../fr384361/index.html">Nouveaux panneaux solaires double face canadiens</a></li>
<li><a href="../fr384365/index.html">Un programmeur de 70 ans essaie de préserver l'ancien langage de programmation sur GitHub</a></li>
<li><a href="../fr384367/index.html">Hyperloop - boucle temporelle</a></li>
<li><a href="../fr384369/index.html">Projet "Eye" partie 13</a></li>
<li><a href="../fr384371/index.html">Windows 10 build 10547 доступен инсайдерам на ПК</a></li>
<li><a href="../fr384377/index.html">La Grande Campagne-6 a lancé des microsatellites en orbite pour étudiants en Chine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>