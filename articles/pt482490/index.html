<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò∞ üïäÔ∏è üòº O que √© MISRA e como cozinh√°-lo üë®‚Äçüéì üë®üèæ‚Äçüè´ üõ£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Talvez todo desenvolvedor de programas para microcontroladores tenha provavelmente ouvido pelo menos uma vez falar sobre padr√µes especiais de codifica...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que √© MISRA e como cozinh√°-lo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/482490/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/5bc/021/cf95bc0219fd9e34f03d5cfc316f7e71.png" alt="Figura 1"></div><br><br>  Talvez todo desenvolvedor de programas para microcontroladores tenha provavelmente ouvido pelo menos uma vez falar sobre padr√µes especiais de codifica√ß√£o projetados para ajudar a aumentar a seguran√ßa e a portabilidade do seu c√≥digo.  Um desses padr√µes √© o MISRA.  Neste artigo, examinaremos em mais detalhes o que √© esse padr√£o, qual √© a sua filosofia e como us√°-lo em seus projetos. <br><a name="habracut"></a><br>  Muitos de nossos leitores ouviram dizer que o PVS-Studio suporta a classifica√ß√£o de seus alertas de acordo com o padr√£o MISRA.  Atualmente, o PVS-Studio <a href="https://www.viva64.com/ru/misra/">cobre</a> mais de 100 regras MISRA C: 2012 e MISRA C ++: 2008. <br><br>  Este artigo tem como objetivo matar tr√™s coelhos com uma cajadada: <br><br><ol><li>  Diga o que √© MISRA para aqueles que n√£o est√£o familiarizados com esse padr√£o; </li><li>  Lembre o mundo incorporado do que somos capazes; </li><li>  Ajudar a aprofundar o curso dos neg√≥cios para novos funcion√°rios que tamb√©m desenvolver√£o ainda mais nosso analisador MISRA; </li></ol><br>  Espero poder torn√°-lo interessante.  Ent√£o, vamos come√ßar! <br><br><h2>  Hist√≥ria MISRA </h2><br>  A hist√≥ria do MISRA come√ßou h√° muito tempo.  Ent√£o, no in√≠cio dos anos 90, o programa do governo do Reino Unido, com o nome indicativo "TI Segura", alocou financiamento para v√°rios projetos, de uma forma ou de outra relacionados √† seguran√ßa dos sistemas eletr√¥nicos.  O projeto MISRA (Associa√ß√£o de Confiabilidade de Software da Ind√∫stria Automobil√≠stica) foi criado para criar um guia para o desenvolvimento de software para microcontroladores em ve√≠culos terrestres - em carros, em geral. <br><br>  Tendo recebido financiamento do estado, a equipe do MISRA come√ßou a trabalhar e, em novembro de 1994, lan√ßou seu primeiro guia: " <a href="https://pdfs.semanticscholar.org/f7ab/6319c0ab1fb546e406a3f65463cd0e5d2f0c.pdf">Diretrizes de desenvolvimento para software baseado em ve√≠culo</a> ".  Este guia ainda n√£o foi vinculado a um idioma espec√≠fico, mas devo admitir: o trabalho foi impressionante e provavelmente envolveu todos os aspectos poss√≠veis do desenvolvimento de software incorporado.  A prop√≥sito, os desenvolvedores deste guia <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">comemoraram</a> recentemente <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">o 25¬∫ anivers√°rio de</a> uma data t√£o importante para eles. <br><br>  Quando o financiamento do estado terminou, os membros do MISRA decidiram continuar trabalhando juntos de maneira informal - isso continua at√© hoje.  De fato, o MISRA (como organiza√ß√£o) √© uma comunidade de partes interessadas de v√°rias ind√∫strias de autom√≥veis e aeronaves.  Agora essas festas s√£o: <br><br><ul><li>  Bentley autom√≥veis </li><li>  Ford Motor Company </li><li> Jaguar land rover </li><li>  Delphi diesel systems </li><li>  HORIBA MIRA </li><li>  Protean electric </li><li>  Servi√ßos de engenharia Visteon </li><li>  Universidade de leeds </li><li>  Ricardo uk </li><li>  ZF TRW </li></ul><br>  Participantes de mercado muito fortes, n√£o √©?  N√£o √© de surpreender que seu primeiro padr√£o relacionado ao idioma, MISRA C, tenha sido amplamente aceito entre desenvolvedores embarcados de miss√£o cr√≠tica.  MISRA C ++ apareceu um pouco mais tarde.  Gradualmente, as vers√µes dos padr√µes foram atualizadas e refinadas para cobrir os novos recursos dos idiomas.  No momento da reda√ß√£o deste artigo, as vers√µes atuais s√£o MISRA C: 2012 e MISRA C ++: 2008. <br><br><h2>  Filosofia e exemplos de regras </h2><br>  As caracter√≠sticas mais distintas do MISRA s√£o sua incr√≠vel aten√ß√£o aos detalhes e extrema meticulosidade para garantir a seguran√ßa.  Os autores n√£o apenas reuniram em um s√≥ lugar todos os ‚Äúburacos‚Äù C e C ++ que vieram √† mente (como, por exemplo, os autores do CERT) - eles elaboraram cuidadosamente os padr√µes internacionais dessas linguagens e anotaram todas as maneiras conceb√≠veis e impens√°veis ‚Äã‚Äãde cometer erros.  E ent√£o eles pegaram e adicionaram as regras sobre a legibilidade do c√≥digo de cima - para dificultar a introdu√ß√£o de um novo erro no c√≥digo j√° limpo. <br><br>  Para entender a extens√£o da seriedade, considere algumas regras retiradas do padr√£o. <br><br>  Por um lado, existem muitas regras boas e adequadas que sempre devem ser seguidas o tempo todo, independentemente do objetivo do seu projeto.  Na maioria das vezes, eles s√£o projetados para eliminar comportamentos indefinidos / n√£o especificados / dependentes da implementa√ß√£o.  Por exemplo: <br><br><ul><li>  N√£o use o valor de uma vari√°vel n√£o inicializada </li><li>  N√£o use o ponteiro FILE ap√≥s fechar o fluxo </li><li>  Todas as fun√ß√µes n√£o nulas devem retornar um valor. </li><li>  O contador de loop n√£o deve ter um tipo de ponto flutuante </li><li>  ... etc. </li></ul><br>  Por outro lado, existem regras, cujos benef√≠cios est√£o na superf√≠cie, mas que (do ponto de vista de projetos comuns) n√£o s√£o t√£o pecaminosos para quebrar: <br><br><ul><li>  N√£o use goto e longjmp </li><li>  Cada op√ß√£o deve terminar com o padr√£o </li><li>  N√£o escreva c√≥digo inacess√≠vel </li><li>  N√£o use fun√ß√µes vari√°veis </li><li>  N√£o use aritm√©tica de endere√ßo (exceto <i>[]</i> e <i>++</i> ) </li><li>  ... </li></ul><br>  Essas regras tamb√©m n√£o s√£o ruins e, em combina√ß√£o com as anteriores, elas j√° oferecem um aumento tang√≠vel na seguran√ßa, mas isso √© suficiente para sistemas embarcados altamente respons√°veis?  Eles s√£o usados ‚Äã‚Äãn√£o apenas na ind√∫stria automotiva, mas tamb√©m na fabrica√ß√£o de aeronaves, aeroespacial, militar e m√©dica. <br><br>  N√£o queremos que, devido a um erro de software, algumas m√°quinas de raios X <a href="https://www.viva64.com/ru/b/0438/">irradiem pacientes com uma dose de 20.000 rad</a> , para que as regras "cotidianas" usuais n√£o sejam mais suficientes.  Est√° em jogo vidas humanas e enormes quantias de dinheiro, e meticulosidade deve ser inclu√≠da.  Aqui, o restante das regras do MISRA entra em cena: <br><ul><li>  O sufixo 'L' no literal deve sempre estar em mai√∫sculas (o pequeno 'l' pode ser confundido com a unidade) </li><li>  N√£o use o operador de v√≠rgula (aumenta a chance de cometer um erro) </li><li>  N√£o use recurs√£o (uma pequena pilha de microcontroladores pode transbordar facilmente) </li><li>  Os corpos das <i>instru√ß√µes</i> <i>if</i> , <i>else</i> , <i>for</i> , <i>while</i> , <i>do</i> , <i>switch</i> devem ser colocados entre chaves (voc√™ pode cometer um erro se o <a href="https://www.viva64.com/ru/w/v2507/">c√≥digo n√£o estiver alinhado corretamente</a> ) </li><li>  N√£o use mem√≥ria din√¢mica (porque h√° uma chance de aloc√°-la sem √™xito da pilha, especialmente em microcontroladores) </li><li>  ... e muitas, muitas dessas regras. </li></ul><br>  Muitas vezes, as pessoas que encontram MISRA t√™m uma opini√£o de que a filosofia do padr√£o √© "proibir isso e proibir isso".  De fato, √© assim, mas apenas em parte. <br><br>  Sim, o padr√£o tem muitas regras semelhantes, mas seu objetivo n√£o √© proibir tudo o que √© poss√≠vel, mas listar todas as formas poss√≠veis de alguma forma violar a seguran√ßa do c√≥digo.  Para a maioria das regras, voc√™ escolhe se as segue ou n√£o.  Vou explicar isso em mais detalhes. <br><br>  No MISRA C, as regras se enquadram em tr√™s categorias principais: Obrigat√≥rio, Requerido e Consultivo.  Obrigat√≥rio - s√£o regras que n√£o devem ser violadas sob nenhum pretexto.  Por exemplo, esta se√ß√£o inclui a regra "n√£o use o valor de uma vari√°vel n√£o inicializada".  As regras necess√°rias s√£o menos rigorosas: elas permitem a possibilidade de rejei√ß√£o, mas somente se esses desvios forem cuidadosamente documentados e justificados por escrito.  As regras restantes est√£o inclu√≠das na categoria Consultivo - s√£o regras que n√£o precisam ser seguidas. <br><br>  O MISRA C ++ √© um pouco diferente: a categoria Obrigat√≥ria est√° ausente e a maioria das regras pertence √† categoria Necess√°ria.  Portanto, de fato, voc√™ tem o direito de violar qualquer regra - lembre-se de documentar os desvios.  H√° tamb√©m uma categoria Documento - estas s√£o regras obrigat√≥rias (desvios n√£o s√£o permitidos), associadas a pr√°ticas comuns como ‚ÄúCada uso do assembler deve ser documentado‚Äù ou ‚Äúa biblioteca de plug-ins deve estar em conformidade com o MISRA C ++‚Äù. <br><br><h2>  O que mais h√° </h2><br>  De fato, MISRA n√£o consiste apenas de um conjunto de regras.  De fato, este √© um manual para escrever c√≥digo seguro para microcontroladores e, portanto, est√° cheio de todos os tipos de utilidades.  Vamos olhar para eles em detalhes. <br><br>  Em primeiro lugar, o padr√£o cont√©m uma descri√ß√£o bastante completa do plano de fundo: para o que o padr√£o foi criado, por que o C ou C ++ foi escolhido, as vantagens e desvantagens dessas linguagens. <br><br>  Estamos bem cientes das virtudes dessas l√≠nguas.  Sim, e tamb√©m sobre as defici√™ncias em geral :) Quais s√£o a alta complexidade, a especifica√ß√£o incompleta do padr√£o e a sintaxe que tornam muito f√°cil cometer um erro e, em seguida, procurar um erro longo.  Por exemplo, voc√™ pode escrever acidentalmente isso: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; ++i); { do_something(); }</code> </pre> <br>  Ainda assim, h√° uma chance de uma pessoa n√£o notar um <a href="https://www.viva64.com/ru/w/v529/">ponto</a> e <a href="https://www.viva64.com/ru/w/v529/">v√≠rgula extra</a> , certo?  Voc√™ tamb√©m pode escrever <a href="https://www.viva64.com/ru/w/v559/">assim</a> : <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpendTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> doWantToKillPeople)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doWantToKillPeople = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { StartNuclearWar(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { PlayComputerGames(); } }</code> </pre> <br>  √â bom que o <a href="https://www.viva64.com/ru/w/v2507/">primeiro</a> e o <a href="https://www.viva64.com/ru/w/v2561/">segundo</a> casos sejam facilmente capturados pelas regras MISRA (o primeiro √© MISRA C: 13.4 / MISRA C ++: 6.2.1, o segundo √© MISRA C: 13.4 / MISRA C ++: 6.2.1). <br><br>  Al√©m de descrever os problemas, o padr√£o cont√©m um grande n√∫mero de dicas sobre o que voc√™ precisa saber antes de come√ßar: sobre como configurar o processo de desenvolvimento MISRA, sobre o uso de analisadores est√°ticos para verificar o c√≥digo de conformidade, quais documentos voc√™ precisa manter e como preencher, e assim por diante. <br><br>  Tamb√©m no final, existem aplicativos que cont√™m: uma lista curta e uma tabela de regras resumida, uma pequena lista de vulnerabilidades do C / C ++, um exemplo de desvio da documenta√ß√£o da regra e v√°rias listas de verifica√ß√£o projetadas para ajudar voc√™ a n√£o se perder em toda a burocracia. <br><br>  Como voc√™ pode ver, o MISRA n√£o √© apenas um conjunto de regras, mas quase toda uma infraestrutura para escrever c√≥digo seguro para sistemas embarcados. <br><br><h2>  Use em seus projetos </h2><br>  Imagine uma situa√ß√£o: voc√™ ir√° escrever um programa para um sistema embarcado muito necess√°rio e respons√°vel.  Ou voc√™ j√° tem um programa, mas precisa ‚Äútransferi-lo‚Äù para o MISRA.  Como verificar seu c√≥digo quanto √† conformidade com o padr√£o?  Voc√™ realmente tem que fazer isso manualmente? <br><br>  A verifica√ß√£o manual de c√≥digo n√£o √© uma tarefa f√°cil e potencialmente imposs√≠vel.  Cada revisor n√£o apenas teria que examinar cuidadosamente todas as linhas de c√≥digo, mas tamb√©m teria que conhecer o padr√£o de cor.  Horror! <br><br>  Portanto, os pr√≥prios desenvolvedores do MISRA s√£o aconselhados a usar a an√°lise est√°tica para testar seu c√≥digo.  De fato, a an√°lise est√°tica √© um processo automatizado de revis√£o de c√≥digo.  Voc√™ simplesmente executa o analisador em seu programa e em alguns minutos receber√° um relat√≥rio sobre poss√≠veis viola√ß√µes do padr√£o.  O que voc√™ precisa, certo?  Voc√™ apenas precisa visualizar o log e corrigir a resposta. <br><br>  Pr√≥xima pergunta: em que ponto voc√™ come√ßa a usar o MISRA?  A resposta √© simples: quanto mais cedo melhor.  Idealmente, antes mesmo de come√ßar a escrever o c√≥digo, porque o MISRA assume que voc√™ segue o padr√£o ao longo da vida √∫til do seu c√≥digo. <br><br>  Obviamente, nem sempre √© poss√≠vel escrever MISRA desde o in√≠cio.  Por exemplo, muitas vezes acontece que um projeto j√° foi parcial ou totalmente implementado, mas o cliente desejou que o projeto estivesse em conformidade com o padr√£o.  Nesse caso, voc√™ ter√° que fazer uma refatora√ß√£o completa do c√≥digo existente. <br><br>  √â aqui que a armadilha aparece.  Eu diria mesmo que uma pedra subaqu√°tica aparece.  O que acontece se voc√™ pegar um analisador est√°tico e verificar o projeto "comum" quanto √† conformidade com o padr√£o MISRA?  Spoiler: voc√™ pode se assustar. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44e/2b7/7d9/44e2b77d90cd9804e1ec0a5a38f166a2.png" alt="Figura 5"></div><br><br>  Obviamente, o exemplo na imagem √© exagerado.  Aqui voc√™ pode ver o resultado da verifica√ß√£o de um projeto suficientemente grande, que na verdade nunca foi pensado para trabalhar em microcontroladores.  No entanto, ao verificar um c√≥digo existente, voc√™ pode ver uma, duas, cinco ou at√© dez mil opera√ß√µes do analisador.  E em toda essa pilha novas opera√ß√µes ser√£o perdidas que foram emitidas para o c√≥digo que acabou de ser escrito ou alterado. <br><br>  O que fazer sobre isso?  √â realmente necess√°rio deixar de lado todas as coisas e sentar-se para corrigir todos os aspectos positivos antigos? <br><br>  Sabemos que na primeira vez que um projeto √© verificado, muitos aspectos positivos aparecem com bastante frequ√™ncia e desenvolvemos uma solu√ß√£o que o ajudar√° a obter o benef√≠cio do analisador imediatamente, sem interromper o trabalho.  Essa solu√ß√£o √© chamada de "suprimir base". <br><br>  Suprimir bases √© o mecanismo PVS-Studio que permite suprimir massivamente as mensagens do analisador.  Se voc√™ estiver verificando o projeto pela primeira vez e descobrindo v√°rios milhares de pontos positivos l√°, basta adicion√°-los √† base suprimida e, na pr√≥xima vez em que executar o analisador, ele emitir√° zero avisos. <br><br>  Assim, voc√™ pode continuar escrevendo e modificando o c√≥digo da maneira usual e, ao mesmo tempo, ver√° avisos apenas sobre os erros que acabaram de ser introduzidos no projeto.  Ao mesmo tempo, voc√™ obter√° o m√°ximo benef√≠cio do analisador aqui e agora, sem se distrair com a corre√ß√£o de erros antigos.  Alguns cliques - e o analisador est√° implementado!  Voc√™ pode ler instru√ß√µes detalhadas sobre isso <a href="https://www.viva64.com/ru/m/0032/">aqui</a> . <br><br>  Voc√™ provavelmente pode perguntar: ‚ÄúEspere, o que fazer com respostas ocultas?‚Äù A resposta √© bastante simples: n√£o as esque√ßa e corrija-as silenciosamente.  Voc√™ pode, por exemplo, estabelecer a base de supress√£o no sistema de controle de vers√£o e permitir apenas as confirma√ß√µes que n√£o aumentam o n√∫mero de opera√ß√µes.  Assim, gradualmente, sua "rocha subaqu√°tica", mais cedo ou mais tarde, √© drenada e n√£o haver√° vest√≠gios dela. <br><br>  Ok, o analisador est√° implementado e agora estamos prontos para continuar.  O que fazer depois?  Neg√≥cio claro - para trabalhar com o c√≥digo.  Mas o que √© necess√°rio para poder declarar conformidade com o padr√£o?  Como provar que seu projeto est√° em conformidade com MISRA? <br><br>  O fato √© que n√£o h√° um "certificado" especial que seu c√≥digo esteja em conformidade com MISRA.  Conforme o pr√≥prio padr√£o estipula, o rastreamento do c√≥digo de conformidade deve ser realizado por duas partes: o cliente do software e o fornecedor do software.  O fornecedor desenvolve software que cumpre com a norma e preenche os documentos necess√°rios.  O cliente, por sua vez, deve garantir que os dados desses documentos sejam verdadeiros. <br><br>  Se voc√™ √© um cliente e um desenvolvedor de seu pr√≥prio software, a responsabilidade pela conformidade com o padr√£o fica apenas em seus ombros :) <br><br>  Em geral, para provar a conformidade do seu projeto, voc√™ precisar√° de documentos de prova.  A lista de documentos que os desenvolvedores do projeto devem preparar pode variar, mas o MISRA oferece alguns como refer√™ncia.  Vamos considerar esse conjunto com mais detalhes. <br><br>  Para reivindicar a conformidade com o padr√£o, voc√™ precisar√° de algumas coisas: <br><br><ul><li>  Na verdade, um projeto cujo c√≥digo est√° em conformidade com as regras obrigat√≥rias e obrigat√≥rias </li><li>  Guie plano de execu√ß√£o </li><li>  Documenta√ß√£o de todos os avisos do compilador e do analisador est√°tico </li><li>  Documenta√ß√£o de todos os desvios das regras necess√°rias </li><li>  Resumo de conformidade com as diretrizes </li></ul><br>  O primeiro √© um plano de conformidade.  Esta √© a sua tabela mais importante e ser√° a que enviar√° o examinador para todos os outros documentos.  Na primeira coluna, h√° uma lista de regras MISRA; no restante, √© observado se algum desvio dessas regras foi identificado.  Esta tabela √© mais ou menos assim: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/341/643/231/3416432314b7841327af4659356de62c.png" alt="Figura 8"></div><br>  O padr√£o recomenda a cria√ß√£o do seu projeto com v√°rios compiladores, al√©m do uso de dois ou mais analisadores est√°ticos para verificar a conformidade do seu c√≥digo.  Se o compilador ou analisador gerar algum tipo de aviso associado √† regra, observe isso na tabela e no documento: por que a opera√ß√£o n√£o pode ser eliminada, se √© falsa etc. <br><br>  Se alguma das regras n√£o puder ser verificada com um analisador est√°tico, voc√™ precisar√° executar o procedimento de revis√£o de c√≥digo.  Este procedimento tamb√©m deve ser documentado, ap√≥s o qual um link para esta documenta√ß√£o deve ser adicionado ao plano de conformidade. <br><br>  Se o compilador ou o analisador est√°tico estiver correto, ou se forem encontradas viola√ß√µes reais do c√≥digo durante o processo de revis√£o de c√≥digo, voc√™ dever√° corrigi-las ou document√°-las.  Novamente, anexando um link √† documenta√ß√£o na tabela. <br><br>  Portanto, um plano de conformidade √© um documento pelo qual voc√™ pode encontrar documenta√ß√£o para qualquer desvio identificado no seu c√≥digo. <br><br>  Agora um pouco sobre a documenta√ß√£o dos desvios das regras.  Como j√° mencionei, essa documenta√ß√£o √© necess√°ria apenas para as regras necess√°rias, porque voc√™ n√£o pode violar as regras de n√≠vel obrigat√≥rio e as regras de consultoria n√£o podem ser seguidas sem nenhuma documenta√ß√£o. <br><br>  Se voc√™ decidir se desviar da regra, a documenta√ß√£o dever√° conter: <br><br><ul><li>  N√∫mero de regra quebrada </li><li>  Local de desvio exato </li><li>  A validade do desvio </li><li>  Evid√™ncia de que o desvio n√£o comprometa a seguran√ßa </li><li>  Implica√ß√µes potenciais do usu√°rio </li></ul><br>  Como voc√™ pode ver, essa abordagem da documenta√ß√£o faz com que voc√™ pense seriamente se a viola√ß√£o vale a pena.  Isso √© feito especificamente para violar as regras necess√°rias n√£o eram boas :) <br><br>  Agora, sobre o resumo da conformidade com as regras.  Este documento √© talvez o mais f√°cil de preencher: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3d/77e/e05/f3d77ee05c3639efdc6df19706d60450.png" alt="Figura 2"></div><br>  A coluna central √© preenchida antes de voc√™ come√ßar a trabalhar com o c√≥digo e a coluna mais √† direita √© depois que seu projeto est√° pronto. <br><br>  √â bastante razo√°vel fazer uma pergunta: por que voc√™ precisa especificar categorias de regras, se elas j√° est√£o especificadas no pr√≥prio padr√£o?  O fato √© que o padr√£o permite o "aumento" da regra em uma categoria mais rigorosa.  Por exemplo, um cliente pode solicitar que voc√™ mova uma regra de consultoria para uma categoria.  Esse "aumento" deve ser feito antes de se trabalhar com o c√≥digo, e um resumo da conformidade com as regras permite que isso seja claramente observado. <br><br>  Com a √∫ltima coluna, tudo √© simples: basta observar se a regra √© usada e, em caso afirmativo, h√° desvios. <br><br>  Essa tabela inteira √© necess√°ria para que voc√™ possa ver rapidamente quais prioridades as regras t√™m e se o c√≥digo corresponde a elas.  Se de repente voc√™ se interessar em saber o motivo exato da rejei√ß√£o, sempre poder√° consultar o plano de conformidade e encontrar a documenta√ß√£o necess√°ria. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b4/c84/ca8/5b4c84ca873358cbb9b5dd6349330da4.png" alt="Figura 3"></div><br>  Ent√£o, voc√™ escreveu o c√≥digo cuidadosamente, seguindo as regras MISRA.  Voc√™ fez um plano de conformidade, documentou tudo o que podia documentar e preencheu um resumo de conformidade.  Se isso for verdade, voc√™ recebeu um c√≥digo muito limpo, leg√≠vel e muito confi√°vel, que voc√™ agora odeia :) <br><br>  Onde seu programa vai morar agora?  Em uma m√°quina de resson√¢ncia magn√©tica?  Em um sensor de velocidade comum ou no sistema de piloto autom√°tico de algum sat√©lite espacial?  Sim, voc√™ passou por um caminho burocr√°tico s√©rio, mas esses s√£o insignificantes.  Como n√£o ser meticuloso quando vidas humanas reais est√£o em jogo? <br><br>  Se voc√™ conseguiu e conseguiu chegar a um fim vitorioso, parabenizo sinceramente: voc√™ escreve um c√≥digo de seguran√ßa de alta qualidade.  Obrigada <br><br><h2>  O futuro dos padr√µes </h2><br>  Por fim, quero falar um pouco sobre o futuro dos padr√µes. <br><br>  MISRA est√° atualmente vivendo e se desenvolvendo.  Por exemplo, no in√≠cio de 2019, foi anunciada a "The MISRA C: 2012 Third Edition (First Revision)" - uma atualiza√ß√£o e complementada pelas novas regras 2012 padr√£o.  Ao mesmo tempo, eles anunciaram o pr√≥ximo lan√ßamento da MISRA C: 2012 Altera√ß√£o 2 - C11 Core, o padr√£o de 2012, no qual ser√£o adicionadas regras que abranger√£o as vers√µes do idioma C para 2011 e 2018 pela primeira vez. <br><br>  N√£o fica parado e o MISRA C ++.  Como voc√™ sabe, o padr√£o MISRA C ++ mais recente data de 2008, portanto, a vers√£o mais antiga do idioma que ele cobre √© C ++ 03.  Por esse motivo, existe outro padr√£o, semelhante ao MISRA, e √© chamado AUTOSAR C ++.  Foi originalmente concebido como uma continua√ß√£o do MISRA C ++ e pretendia abranger vers√µes posteriores da linguagem.  Ao contr√°rio de sua mente ideal, o AUTOSAR C ++ √© atualizado duas vezes por ano e atualmente suporta C ++ 14.  Uma atualiza√ß√£o adicional est√° planejada para C ++ 17, C ++ 20 e assim por diante. <br><br>  O que eu comecei sobre algum outro padr√£o?  O fato √© que, h√° pouco menos de um ano, ambas as organiza√ß√µes anunciaram a unifica√ß√£o de seus padr√µes em um.  Agora o MISRA C ++ e o AUTOSAR C ++ se tornar√£o um √∫nico padr√£o e agora ser√£o desenvolvidos juntos.  Eu acho que essas s√£o √≥timas not√≠cias para desenvolvedores que escrevem sob microcontroladores C ++ e n√£o menos √≥timas para desenvolvedores de analisadores est√°ticos.  Ainda h√° muito trabalho favorito pela frente!  :) <br><br><h2>  Conclus√£o </h2><br>  Hoje aprendemos muito sobre o MISRA: lemos a hist√≥ria de sua ocorr√™ncia, estudamos exemplos de regras e a filosofia do padr√£o, consideramos tudo o que voc√™ precisa para usar o MISRA em seus projetos e at√© olhamos um pouco para o futuro.  Espero que agora voc√™ entenda melhor o que √© MISRA e como cozinh√°-lo! <br><br>  De acordo com a antiga tradi√ß√£o, deixarei um link aqui para o nosso analisador est√°tico PVS-Studio.  √â capaz de encontrar n√£o apenas desvios do padr√£o MISRA, mas tamb√©m uma <a href="https://www.viva64.com/ru/examples/">enorme variedade de</a> erros e vulnerabilidades.  Se voc√™ estiver interessado em experimentar o PVS-Studio, fa√ßa o <a href="https://www.viva64.com/ru/pvs-studio-download/">download da</a> vers√£o demo e verifique seu projeto. <br><br>  Isso conclui meu artigo.  Desejo a todos os leitores um feliz Ano Novo e um feliz fim de semana! <br><br><h2>  Sitelinks </h2><br><ol><li>  Georgy Gribkov - " <a href="http://0x1.tv/%25D0%2591%25D0%25B5%25D0%25B7%25D0%25BE%25D0%25BF%25D0%25B0%25D1%2581%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%25BD%25D0%25B0_%25D0%25BC%25D0%25B0%25D0%25BA%25D1%2581%25D0%25B8%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25BA%25D0%25B0%25D1%2585_%25E2%2580%2594_%25D0%25BA%25D0%25B0%25D0%25BA_%25D0%25BF%25D0%25B8%25D1%2581%25D0%25B0%25D1%2582%25D1%258C_%25D0%25BD%25D0%25B0%25D0%25B4%25D0%25B5%25D0%25B6%25D0%25BD%25D1%258B%25D0%25B9_C/C%252B%252B_%25D0%25BA%25D0%25BE%25D0%25B4_%25D0%25B4%25D0%25BB%25D1%258F_%25D0%25B2%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25B8%25D0%25B2%25D0%25B0%25D0%25B5%25D0%25BC%25D1%258B%25D1%2585_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC_(%25D0%2593%25D0%25B5%25D0%25BE%25D1%2580%25D0%25B3%25D0%25B8%25D0%25B9_%25D0%2593%25D1%2580%25D0%25B8%25D0%25B1%25D0%25BA%25D0%25BE%25D0%25B2,_SECR-2019)">Seguran√ßa na velocidade m√°xima - como escrever c√≥digo C / C ++ confi√°vel para sistemas embarcados</a> ". </li><li>  <a href="https://youtu.be/c5sJd4Abr8c">O PVS-Studio √© um analisador de c√≥digo est√°tico</a> . </li><li>  <a href="https://youtu.be/9h7yObKAADU">Colabora√ß√£o PVS-Studio e KEIL 5</a> . </li></ol><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/482486/"><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  Se voc√™ deseja compartilhar este artigo com um p√∫blico que fala ingl√™s, use o link para a tradu√ß√£o: George Gribkov.  <a href="https://habr.com/en/company/pvs-studio/blog/482486/">O que √© o MISRA e como cozinh√°-lo</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt482490/">https://habr.com/ru/post/pt482490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt482476/index.html">ActivityLifecycleCallbacks - um ponto cego na API p√∫blica</a></li>
<li><a href="../pt482478/index.html">Iteraptor: biblioteca para redus transparente profundo do mapa</a></li>
<li><a href="../pt482480/index.html">Toques c√≥smicos do ano cessante</a></li>
<li><a href="../pt482482/index.html">RPG</a></li>
<li><a href="../pt482484/index.html">Como aumentar a efici√™ncia do desenvolvimento usando a teoria das restri√ß√µes</a></li>
<li><a href="../pt482492/index.html">Degelo do permafrost e emiss√µes de gases de efeito estufa</a></li>
<li><a href="../pt482494/index.html">Atualizar resultados da pesquisa</a></li>
<li><a href="../pt482496/index.html">Resultados: 9 grandes avan√ßos tecnol√≥gicos de 2019</a></li>
<li><a href="../pt482498/index.html">Hist√≥ria da evolu√ß√£o das interfaces em Java</a></li>
<li><a href="../pt482500/index.html">Python ou R: Qual √© a melhor escolha para a ci√™ncia de dados?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>