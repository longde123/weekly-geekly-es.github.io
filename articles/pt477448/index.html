<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèµÔ∏è üöã üë©üèª‚Äçüé® Teoria da Programa√ß√£o: Variante üî£ üß• üåï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√°, meu nome √© Dmitry Karlovsky e eu ... quero falar sobre as caracter√≠sticas fundamentais dos sistemas de tipos, que geralmente n√£o entendem ou n√£o ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Teoria da Programa√ß√£o: Variante</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477448/"><p> Ol√°, meu nome √© Dmitry Karlovsky e eu ... quero falar sobre as caracter√≠sticas fundamentais dos sistemas de tipos, que geralmente n√£o entendem ou n√£o entendem corretamente atrav√©s do prisma da implementa√ß√£o de uma linguagem espec√≠fica que, devido ao desenvolvimento evolutivo, possui muitos atavismos.  Portanto, mesmo que voc√™ pense que sabe o que √© "varia√ß√£o", tente analisar os problemas com uma nova apar√™ncia.  Come√ßaremos do b√°sico, para que mesmo um iniciante entenda tudo.  E continuamos sem √°gua, para que at√© os profissionais sejam √∫teis para estruturar seus conhecimentos.  Os exemplos de c√≥digo estar√£o em uma pseudo-linguagem semelhante ao TypeScript.  Em seguida, as abordagens de v√°rias l√≠nguas reais ser√£o examinadas.  E se voc√™ estiver desenvolvendo seu pr√≥prio idioma, este artigo o ajudar√° a n√£o pisar no rake de outra pessoa. </p><br><p><img src="https://habrastorage.org/webt/uz/yw/ly/uzywlybdb47qium0-khvukslzwc.png" alt="e se houver raposas?"></p><a name="habracut"></a><br><h1 id="argumenty-i-parametry">  Argumentos e Par√¢metros </h1><br><p>  <strong>O par√¢metro</strong> √© o que aceitamos.  Descrevendo o tipo de par√¢metro, definimos uma restri√ß√£o no conjunto de tipos que podem ser passados ‚Äã‚Äãpara n√≥s.  Alguns exemplos: </p><br><pre><code class="plaintext hljs">//   function log( id : string | number ) {} //   class Logger { constructor( readonly id : Natural ) {} } //   class Node&lt; Id extends Number &gt; { id : Id }</code> </pre> <br><p>  <strong>Um argumento</strong> √© o que transmitimos.  No momento da transfer√™ncia, o argumento sempre tem algum tipo espec√≠fico.  No entanto, na an√°lise est√°tica, um tipo espec√≠fico pode n√£o ser conhecido, e √© por isso que o compilador opera novamente com restri√ß√µes de tipo.  Alguns exemplos: </p><br><pre> <code class="plaintext hljs">log( 123 ) //   new Logger( promptStringOrNumber( 'Enter id' ) ) //       new Node( 'root' ) //   ,  </code> </pre> <br><h1 id="podtipy">  Subtipos </h1><br><p>  Tipos podem formar uma hierarquia.  <em>Um subtipo</em> √© um caso especial de um <em>supertipo</em> .  Um subtipo pode ser formado <strong>restringindo o</strong> conjunto de valores poss√≠veis de um supertipo.  Por exemplo, o tipo Natural √© um subtipo de Inteiro e Positivo.  E todos os tr√™s s√£o subtipos de Real ao mesmo tempo.  E o tipo Prime √© um subtipo de todos os itens acima.  Ao mesmo tempo, os tipos Positivo e Inteiro se sobrep√µem, mas nenhum deles restringe o outro. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ca8/220/c10/ca8220c10205146b59dc7f9b4a479c4b.png" alt="imagem"></p><br><p>  Outra maneira de formar um subtipo √© <strong>expandi-</strong> lo combinando-o com outro tipo ortogonal a ele.  Por exemplo, existe uma "figura colorida" com a propriedade "cor" e existe um "quadrado" com a propriedade "altura".  Ao combinar esses tipos, obtemos um "quadrado colorido".  E adicionando um "c√≠rculo" com seu "raio", podemos obter um "cilindro colorido". </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/484/181/21d/48418121d846dc7aa19d4cd7472638c6.png" alt="imagem"></p><br><h1 id="ierarhii">  Hierarquias </h1><br><p>  Para uma narra√ß√£o adicional, precisamos de uma pequena hierarquia de animais e uma hierarquia semelhante de c√©lulas. </p><br><pre> <code class="plaintext hljs">abstract class Animal {} abstract class Pet extends Animal {} class Cat extends Pet {} class Dog extends Pet {} class Fox extends Animal {} class AnimalCage { content : Animal } class PetCage extends AnimalCage { content : Pet } class CatCage extends PetCage { content : Cat } class DogCage extends PetCage { content : Dog } class FoxCage extends AnimalCage { content : Fox }</code> </pre> <br><p>  Tudo abaixo √© um estreitamento do tipo acima.  Uma gaiola com um animal de estima√ß√£o pode conter apenas animais dom√©sticos, mas n√£o animais selvagens.  Uma gaiola com um cachorro s√≥ pode conter c√£es. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/397/a01/046/397a01046371d0316d2231db9771de24.png" alt="imagem"></p><br><h1 id="kovariantnost">  Covari√¢ncia </h1><br><p>  O mais simples e mais compreens√≠vel √© a <strong>restri√ß√£o de um supertipo</strong> ou covari√¢ncia.  No exemplo a seguir, o par√¢metro de fun√ß√£o √© covariante para o tipo especificado para ele.  Ou seja, a fun√ß√£o pode aceitar esse tipo em si e qualquer subtipo dele, mas n√£o pode aceitar supertipos ou outros tipos. </p><br><pre> <code class="plaintext hljs">function touchPet( cage : PetCage ) : void { log( `touch ${cage.content}` ) } touchPet( new AnimalCage ) // forbid touchPet( new PetCage ) // allow touchPet( new CatCage ) // allow touchPet( new DogCage ) // allow touchPet( new FoxCage ) // forbid</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/a68/94b/667/a6894b667d46336844466ff63a972011.png" alt="imagem"></p><br><p>  Como n√£o mudamos nada na gaiola, podemos transferir com seguran√ßa as fun√ß√µes para a gaiola com o gato, pois nada mais √© do que um caso especial da gaiola com um animal de estima√ß√£o. </p><br><h1 id="kontravariantnost">  Contravari√¢ncia </h1><br><p>  √â um pouco mais dif√≠cil entender <strong>restri√ß√£o</strong> ou contravari√¢ncia de <strong>subtipo</strong> .  No exemplo a seguir, o par√¢metro de fun√ß√£o √© contr√°rio ao tipo especificado para ele.  Ou seja, a fun√ß√£o pode aceitar esse tipo em si e qualquer um de seus supertipos, mas n√£o pode aceitar subtipos ou outros tipos. </p><br><pre> <code class="plaintext hljs">function pushPet( cage : PetCage ) : void { const Pet = random() &gt; .5 ? Cat : Dog cage.content = new Pet } pushPet( new AnimalCage ) // allow pushPet( new PetCage ) // allow pushPet( new CatCage ) // forbid pushPet( new DogCage ) // forbid pushPet( new FoxCage ) // forbid</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/e9b/a03/b2d/e9ba03b2d3e4f0b82a6f3d9a4f85c05f.png" alt="imagem"></p><br><p>  N√£o podemos passar a gaiola com o gato, pois a fun√ß√£o pode colocar o cachorro ali, o que n√£o √© permitido.  Mas a gaiola com qualquer animal pode ser transferida com seguran√ßa, pois o gato e o cachorro podem ser colocados l√°. </p><br><h1 id="invariantnost">  Invari√¢ncia </h1><br><p>  <strong>Limitar subtipo e supertipo</strong> podem ser simultaneamente.  Tal caso √© chamado invari√¢ncia.  No exemplo a seguir, o par√¢metro de fun√ß√£o √© invari√°vel para o tipo especificado para ele.  Ou seja, a fun√ß√£o pode aceitar apenas o tipo especificado e n√£o mais. </p><br><pre> <code class="plaintext hljs">function replacePet( cage : PetCage ) : void { touchPet( cage ) pushPet( cage ) } replacePet( new AnimalCage ) // forbid replacePet( new PetCage ) // allow replacePet( new CatCage ) // forbid replacePet( new DogCage ) // forbid replacePet( new FoxCage ) // forbid</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/3c3/bec/d6d/3c3becd6de5faa045963dc7c45774d19.png" alt="imagem"></p><br><p>  A fun√ß√£o <code>replacePet</code> herda as limita√ß√µes daquelas fun√ß√µes que usa internamente: tomou a restri√ß√£o no tipo do <code>pushPet</code> e a restri√ß√£o no subtipo pelo <code>pushPet</code> .  Se dermos a ela uma gaiola com qualquer animal, ela n√£o poder√° transferi-la para a fun√ß√£o touchPet, que n√£o sabe trabalhar com raposas (um animal selvagem simplesmente morder√° um dedo).  E se transferirmos a gaiola com o gato, n√£o funcionar√° para chamar <code>pushPet</code> . </p><br><h1 id="bivariantnost">  Bivariance </h1><br><p>  N√£o se pode deixar de mencionar a ex√≥tica <strong>aus√™ncia de restri√ß√µes</strong> - a diverg√™ncia.  No exemplo a seguir, uma fun√ß√£o pode aceitar qualquer tipo que seja um subtipo ou subtipo. </p><br><pre> <code class="plaintext hljs">function enshurePet( cage : PetCage ) : void { if( cage.content instanceof Pet ) return pushPet( cage ) } replacePet( new AnimalCage ) // allow replacePet( new PetCage ) // allow replacePet( new CatCage ) // allow replacePet( new DogCage ) // allow replacePet( new FoxCage ) // forbid</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/8b8/b85/66f/8b8b8566f8c6db9cd3959f1152202957.png" alt="imagem"></p><br><p>  Nele voc√™ pode transferir a gaiola com o animal.  Ent√£o ela verificar√° se h√° um animal de estima√ß√£o na gaiola, caso contr√°rio, ela o colocar√° dentro de um animal de estima√ß√£o aleat√≥rio.  E voc√™ pode transferir, por exemplo, uma gaiola com um gato, ent√£o ela simplesmente n√£o far√° nada. </p><br><h1 id="obobscheniya">  Generaliza√ß√µes </h1><br><p>  Alguns acreditam que a varia√ß√£o est√° de alguma forma relacionada a generaliza√ß√µes.  Muitas vezes, porque a varia√ß√£o √© explicada usando cont√™ineres gen√©ricos como exemplo.  No entanto, em toda a hist√≥ria ainda n√£o tivemos uma √∫nica generaliza√ß√£o - s√£o classes inteiramente concretas: </p><br><pre> <code class="plaintext hljs">class AnimalCage { content : Animal } class PetCage extends AnimalCage { content : Pet } class CatCage extends PetCage { content : Cat } class DogCage extends PetCage { content : Dog } class FoxCage extends AnimalCage { content : Fox }</code> </pre> <br><p>  Isso foi feito para mostrar que os problemas de varia√ß√£o n√£o est√£o relacionados √†s generaliza√ß√µes.  Generaliza√ß√µes s√£o necess√°rias apenas para reduzir copiar e colar.  Por exemplo, o c√≥digo acima pode ser reescrito atrav√©s de uma simples generaliza√ß√£o: </p><br><pre> <code class="plaintext hljs">class Cage&lt;Animal&gt; { content : Animal }</code> </pre> <br><p>  E agora voc√™ pode criar inst√¢ncias de qualquer c√©lula: </p><br><pre> <code class="plaintext hljs">const animalCage = new Cage&lt;Animal&gt;() const petCage = new Cage&lt;Pet&gt;() const catCage = new Cage&lt;Cat&gt;() const dogCage = new Cage&lt;Dog&gt;() const foxCage = new Cage&lt;Fox&gt;()</code> </pre> <br><h1 id="deklaraciya-ogranicheniy">  Declara√ß√£o de limita√ß√µes </h1><br><p>  Observe que as assinaturas de todas as quatro fun√ß√µes listadas anteriormente s√£o exatamente as mesmas: </p><br><pre> <code class="plaintext hljs">( cage : PetCage )=&gt; void</code> </pre> <br><p>  Ou seja, essa descri√ß√£o dos par√¢metros aceitos da fun√ß√£o n√£o tem abrang√™ncia - n√£o se pode dizer que possa ser transferida para a fun√ß√£o.  Bem, a menos que seja claramente visto que definitivamente n√£o vale a pena passar a gaiola com a raposa para dentro. </p><br><p>  Portanto, nas linguagens modernas, existe um meio de indicar explicitamente quais restri√ß√µes de tipo um par√¢metro possui.  Por exemplo, os modificadores de <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-generic-modifier">entrada</a> e <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-generic-modifier">sa√≠da</a> <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/in-generic-modifier">em</a> C #: </p><br><pre> <code class="plaintext hljs">interface ICageIn&lt;in T&gt; { T content { set; } } // contravariant generic parameter interface ICageOut&lt;out T&gt; { T content { get; } } // covariant generic parameter interface ICageInOut&lt;T&gt; { T content { get; set; } } // invariant generic parameter</code> </pre> <br><p>  Infelizmente, em C # para cada variante de modificador, √© necess√°rio iniciar em uma interface separada.  Al√©m disso, pelo que entendi, a diverg√™ncia em C # geralmente √© inef√°vel. </p><br><h1 id="vyhodnye-parametry">  Par√¢metros de sa√≠da </h1><br><p>  As fun√ß√µes podem n√£o apenas aceitar, mas tamb√©m retornar valores.  Em geral, o valor de retorno pode n√£o ser um.  Como exemplo, tome a fun√ß√£o de pegar uma gaiola com um animal de estima√ß√£o e devolver dois animais de estima√ß√£o. </p><br><pre> <code class="plaintext hljs">function getPets( input : PetCage ) : [ Pet , Pet ] { return [ input.content , new Cat ] }</code> </pre> <br><p>  Essa fun√ß√£o √© equivalente a uma fun√ß√£o que recebe, al√©m de um par√¢metro de entrada, mais duas sa√≠das. </p><br><pre> <code class="plaintext hljs">function getPets( input : PetCage , output1 : PetCage , output2 : PetCage ) : void { output1.content = input.content output2.content = new Cat }</code> </pre> <br><p>  O c√≥digo externo aloca mem√≥ria adicional na pilha para que a fun√ß√£o coloque tudo o que deseja retornar nela.  E, ap√≥s a conclus√£o, o c√≥digo de chamada j√° poder√° usar esses cont√™ineres para seus pr√≥prios fins. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2c3/292/0b5/2c32920b5a5aeb4ed22923ac97de9267.png" alt="imagem"></p><br><p>  A partir da equival√™ncia dessas duas fun√ß√µes, segue-se que os valores retornados pela fun√ß√£o, em contraste com os par√¢metros, sempre s√£o contr√°rios ao tipo de sa√≠da especificado.  Para uma fun√ß√£o pode escrever para eles, mas n√£o pode ler a partir deles. </p><br><h1 id="metody-obektov">  M√©todos de objeto </h1><br><p>  M√©todos de objeto s√£o fun√ß√µes que levam um ponteiro adicional para um objeto como um par√¢metro impl√≠cito.  Ou seja, as duas fun√ß√µes a seguir s√£o equivalentes. </p><br><pre> <code class="plaintext hljs">class PetCage { pushPet() : void { const Pet = random() &gt; .5 ? Cat : Dog this.content = new Pet } }</code> </pre> <br><pre> <code class="plaintext hljs">function pushPet( this : PetCage ) : void { const Pet = random() &gt; .5 ? Cat : Dog this.content = new Pet }</code> </pre> <br><p>  No entanto, √© importante observar que um m√©todo, diferentemente de uma fun√ß√£o regular, tamb√©m √© um membro da classe, que √© uma extens√£o do tipo.  Isso leva ao fato de que uma restri√ß√£o adicional de supertipo aparece para fun√ß√µes que chamam este m√©todo: </p><br><pre> <code class="plaintext hljs">function fillPetCage( cage : PetCage ) { cage.pushPet() }</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/44e/f44/c67/44ef44c670ebef55ab1d8f248da44b11.png" alt="imagem"></p><br><p>  N√£o podemos passar esse tipo de <code>pushPet</code> para ele onde o m√©todo <code>pushPet</code> ainda n√£o est√° definido.  Isso √© semelhante ao caso da invari√¢ncia, pois existe uma restri√ß√£o de baixo e de cima.  No entanto, a localiza√ß√£o do m√©todo <code>pushPet</code> pode ser mais alta na hierarquia.  E √© a√≠ que estar√° a limita√ß√£o do excesso de tipo. </p><br><h1 id="princip-podstanovki--barbary-liskov-lsp">  Princ√≠pio de substitui√ß√£o de Barbara Lisk (LSP) </h1><br><p>  Muitas pessoas pensam que a propor√ß√£o de um subtipo para um subtipo √© determinada n√£o com base nos m√©todos mencionados anteriormente de restringir e expandir o tipo, mas sim pela possibilidade de substituir o subtipo em qualquer local em que o supertipo seja usado.  Aparentemente, a raz√£o para esse erro est√° precisamente no LSP.  No entanto, vamos ler a defini√ß√£o desse princ√≠pio com aten√ß√£o, prestando aten√ß√£o no que √© prim√°rio e no que √© secund√°rio: </p><br><blockquote>  As fun√ß√µes que usam o tipo base devem poder usar subtipos do tipo base sem conhec√™-lo e sem violar a corre√ß√£o do programa. </blockquote><p>  Para objetos imut√°veis ‚Äã‚Äã(incluindo aqueles que n√£o fazem refer√™ncia a mut√°veis), esse princ√≠pio √© executado automaticamente, pois n√£o h√° lugar para se retirar a restri√ß√£o de subtipo. </p><br><p>  Com mut√°veis, √© cada vez mais dif√≠cil, pois as duas situa√ß√µes a seguir s√£o mutuamente exclusivas para o princ√≠pio LSP: </p><br><ol><li>  <code>A</code> classe <code>A</code> possui uma subclasse <code>B</code> , onde o campo <code>B::foo</code> √© um subtipo de <code>A::foo</code> . </li><li>  <code>A</code> classe <code>A</code> possui um m√©todo que pode alterar o campo <code>A::foo</code> . </li></ol><br><p>  Consequentemente, existem apenas tr√™s maneiras restantes: </p><br><ol><li>  Impedir que objetos herdem restrinja seus tipos de campo.  Mas ent√£o voc√™ pode enfiar um elefante na gaiola para um gato. </li><li>  Guiado n√£o pelo LSP, mas pela variabilidade de cada par√¢metro de cada fun√ß√£o separadamente.  Mas voc√™ precisa pensar muito e explicar ao compilador onde est√£o as restri√ß√µes de tipo. </li><li>  Cuspa em tudo e v√° para <del>  o mosteiro </del>  programa√ß√£o funcional, onde todos os objetos s√£o imut√°veis, o que significa que seus par√¢metros aceitos s√£o covariantes ao tipo declarado. </li></ol><br><h1 id="typescript">  TypeScript </h1><br><p>  No script de tempo, a l√≥gica √© simples: todos os par√¢metros da fun√ß√£o s√£o considerados covariantes (o que n√£o √© verdadeiro) e os valores de retorno s√£o considerados contravariantes (o que √© verdadeiro).  Foi mostrado anteriormente que os par√¢metros de uma fun√ß√£o podem ter absolutamente qualquer varia√ß√£o, dependendo do que essa fun√ß√£o faz com esses par√¢metros.  Portanto, estes s√£o os seguintes incidentes: </p><br><pre> <code class="plaintext hljs">abstract class Animal { is! : 'cat' | 'dog' | 'fox' } abstract class Pet extends Animal { is! : 'cat' | 'dog' } class Cat extends Pet { is! : 'cat' } class Dog extends Pet { is! : 'dog' } class Fox extends Animal { is! : 'fox' } class Cage&lt;Animal&gt; { content! : Animal } function pushPet( cage : Cage&lt;Pet&gt; ) : void { const Pet = Math.random() &gt; .5 ? Cat : Dog cage.content = new Pet } pushPet( new Cage&lt;Animal&gt;() ) // forbid to push Pet to Animal Cage :-( pushPet( new Cage&lt;Cat&gt;() ) // allow to push Dog to Cat Cage :-(</code> </pre> <br><p>  Para resolver esse problema, voc√™ precisa ajudar o compilador com c√≥digo n√£o trivial: </p><br><pre> <code class="plaintext hljs">function pushPet&lt; PetCage extends Cage&lt;Animal&gt; &gt;( cage: Cage&lt;Pet&gt; extends PetCage ? PetCage : never ): void { const Pet = Math.random() &gt; .5 ? Cat : Dog cage.content = new Pet } pushPet( new Cage&lt;Animal&gt;() ) // allow :-) pushPet( new Cage&lt;Pet&gt;() ) // allow :-) pushPet( new Cage&lt;Cat&gt;() ) // forbid :-) pushPet( new Cage&lt;Dog&gt;() ) // forbid :-) pushPet( new Cage&lt;Fox&gt;() ) // forbid :-)</code> </pre> <br><p>  <a href="https://tinyurl.com/uesu87y"><strong>Experimente on-line</strong></a> </p><br><h1 id="flowjs">  Flowjs </h1><br><p>  O FlowJS possui um sistema de tipo mais avan√ßado.  Em particular, na <a href="https://flow.org/en/docs/types/generics/">descri√ß√£o</a> do <a href="https://flow.org/en/docs/types/generics/">tipo, √© poss√≠vel indicar sua variabilidade</a> para par√¢metros generalizados e para campos de objetos.  No nosso exemplo de c√©lula, √© algo parecido com isto: </p><br><pre> <code class="plaintext hljs">class Animal {} class Pet extends Animal {} class Cat extends Pet {} class Dog extends Pet {} class Fox extends Animal {} class Cage&lt; Animal &gt; { content : Animal } function touchPet( cage : { +content : Pet } ) : void { console.log( `touch ${typeof cage.content}` ) } function pushPet( cage: { -content: Pet } ): void { const Pet = Number((0: any)) &gt; .5 ? Cat : Dog cage.content = new Pet } function replacePet( cage : { content : Pet } ) : void { touchPet( cage ) pushPet( cage ) } touchPet( new Cage&lt;Animal&gt; ) // forbid :-) touchPet( new Cage&lt;Pet&gt; ) // allow :-) touchPet( new Cage&lt;Cat&gt; ) // allow :-) touchPet( new Cage&lt;Dog&gt; ) // allow :-) touchPet( new Cage&lt;Fox&gt; ) // forbid :-) pushPet( new Cage&lt;Animal&gt; ) // allow :-) pushPet( new Cage&lt;Pet&gt; ) // allow :-) pushPet( new Cage&lt;Cat&gt; ) // forbid :-) pushPet( new Cage&lt;Dog&gt; ) // forbid :-) pushPet( new Cage&lt;Fox&gt; ) // forbid :-) replacePet( new Cage&lt;Animal&gt; ) // forbid :-) replacePet( new Cage&lt;Pet&gt; ) // allow :-) replacePet( new Cage&lt;Cat&gt; ) // forbid :-) replacePet( new Cage&lt;Dog&gt; ) // forbid :-) replacePet( new Cage&lt;Fox&gt;) // forbid :-)</code> </pre> <br><p>  <a href="https://tinyurl.com/uak4hne"><strong>Experimente on-line</strong></a> </p><br><p>  Bivari√¢ncia aqui √© inexprim√≠vel.  Infelizmente, n√£o foi poss√≠vel encontrar uma maneira de definir a varia√ß√£o de maneira mais conveniente sem descrever explicitamente os tipos de todos os campos.  Por exemplo, algo como isto: </p><br><pre> <code class="plaintext hljs">function pushPet( cage: Contra&lt; Cage&lt;Pet&gt; , 'content' &gt; ): void { const Pet = Number((0: any)) &gt; .5 ? Cat : Dog cage.content = new Pet }</code> </pre> <br><h1 id="c-sharp">  C afiado </h1><br><p>  O C # foi originalmente projetado sem nenhum entendimento de varia√ß√£o.  No entanto, posteriormente, foram adicionados modificadores de par√¢metro, que permitiram ao compilador verificar corretamente os tipos de argumentos passados.  Infelizmente, o uso desses modificadores novamente n√£o √© muito conveniente. </p><br><pre> <code class="plaintext hljs">using System; abstract class Animal {} abstract class Pet : Animal {} class Cat : Pet {} class Dog : Pet {} class Fox : Animal {} interface ICageIn&lt;in T&gt; { T content { set; } } interface ICageOut&lt;out T&gt; { T content { get; } } interface ICageInOut&lt;T&gt; { T content { get; set; } } class Cage&lt;T&gt; : ICageIn&lt;T&gt;, ICageOut&lt;T&gt;, ICageInOut&lt;T&gt; { public T content { get; set; } } public class Program { static void touchPet( ICageOut&lt;Pet&gt; cage ) { Console.WriteLine( cage.content ); } static void pushPet( ICageIn&lt;Pet&gt; cage ) { cage.content = new Dog(); } static void replacePet( ICageInOut&lt;Pet&gt; cage ) { touchPet( cage as ICageOut&lt;Pet&gt; ); pushPet( cage as ICageIn&lt;Pet&gt; ); } void enshurePet( Cage&lt;Pet&gt; cage ) { if( cage.content is Pet ) return; pushPet( cage as ICageIn&lt;Pet&gt; ); } public static void Main() { var animalCage = new Cage&lt;Animal&gt;(); var petCage = new Cage&lt;Pet&gt;(); var catCage = new Cage&lt;Cat&gt;(); var dogCage = new Cage&lt;Dog&gt;(); var foxCage = new Cage&lt;Fox&gt;(); touchPet( animalCage ); // forbid :-) touchPet( petCage ); // allow :-) touchPet( catCage ); // allow :-) touchPet( dogCage ); // allow :-) touchPet( foxCage ); // forbid :-) pushPet( animalCage ); // allow :-) pushPet( petCage ); // allow :-) pushPet( catCage ); // forbid :-) pushPet( dogCage ); // forbid :-) pushPet( foxCage ); // forbid :-) replacePet( animalCage ); // forbid :-) replacePet( petCage ); // allow :-) replacePet( catCage ); // forbid :-) replacePet( dogCage ); // forbid :-) replacePet( foxCage ); // forbid :-) } }</code> </pre> <br><p>  <a href="https://dotnetfiddle.net/jAx53p"><strong>Experimente on-line</strong></a> </p><br><h1 id="java">  Java </h1><br><p>  Para Java, a capacidade de alternar varia√ß√µes foi adicionada bastante tarde e apenas para par√¢metros generalizados, que apareceram relativamente recentemente.  Se o par√¢metro n√£o for generalizado, problemas. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pet</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pet</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dog</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pet</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fox</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cage</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T content; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchPet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Cage&lt;? extends Pet&gt; cage )</span></span></span><span class="hljs-function"> </span></span>{ System.out.println( cage.content ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pushPet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Cage&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Pet&gt; cage )</span></span></span><span class="hljs-function"> </span></span>{ cage.content = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">replacePet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Cage&lt;Pet&gt; cage )</span></span></span><span class="hljs-function"> </span></span>{ touchPet( cage ); pushPet( cage ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enshurePet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Cage&lt;Pet&gt; cage )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( cage.content <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Pet ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; pushPet( cage ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ Cage&lt;Animal&gt; animalCage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cage&lt;Animal&gt;(); Cage&lt;Pet&gt; petCage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cage&lt;Pet&gt;(); Cage&lt;Cat&gt; catCage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cage&lt;Cat&gt;(); Cage&lt;Dog&gt; dogCage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cage&lt;Dog&gt;(); Cage&lt;Fox&gt; foxCage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cage&lt;Fox&gt;(); touchPet( animalCage ); <span class="hljs-comment"><span class="hljs-comment">// forbid :-) touchPet( petCage ); // allow :-) touchPet( catCage ); // allow :-) touchPet( dogCage ); // allow :-) touchPet( foxCage ); // forbid :-) pushPet( animalCage ); // allow :-) pushPet( petCage ); // allow :-) pushPet( catCage ); // forbid :-) pushPet( dogCage ); // forbid :-) pushPet( foxCage ); // forbid :-) replacePet( animalCage ); // forbid :-) replacePet( petCage ); // allow :-) replacePet( catCage ); // forbid :-) replacePet( dogCage ); // forbid :-) replacePet( foxCage ); // forbid :-) } }</span></span></code> </pre> <br><p>  <a href="https://paiza.io/projects/pIBVVcjarSB0j0RJY8iNTw%3Flanguage%3Djava"><strong>Experimente on-line</strong></a> </p><br><h1 id="c">  C ++ </h1><br><p>  O C ++, gra√ßas ao seu poderoso sistema de modelos, pode expressar v√°rias varia√ß√µes, mas √© claro que h√° muito c√≥digo. </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;typeinfo&gt; #include &lt;type_traits&gt; class Animal {}; class Pet: public Animal {}; class Cat: public Pet {}; class Dog: public Pet {}; class Fox: public Animal {}; template&lt;class T&gt; class Cage { public: T *content; }; template&lt;class T, class = std::enable_if_t&lt;std::is_base_of&lt;Pet, T&gt;::value&gt;&gt; void touchPet(const Cage&lt;T&gt; &amp;cage) { std::cout &lt;&lt; typeid(T).name(); } template&lt;class T, class = std::enable_if_t&lt;std::is_base_of&lt;T, Pet&gt;::value&gt;&gt; void pushPet(Cage&lt;T&gt; &amp;cage) { cage.content = new Dog(); } void replacePet(Cage&lt;Pet&gt; &amp;cage) { touchPet(cage); pushPet(cage); } int main(void) { Cage&lt;Animal&gt; animalCage {new Fox()}; Cage&lt;Pet&gt; petCage {new Cat()}; Cage&lt;Cat&gt; catCage {new Cat()}; Cage&lt;Dog&gt; dogCage {new Dog()}; Cage&lt;Fox&gt; foxCage {new Fox()}; touchPet( animalCage ); // forbid :-) touchPet( petCage ); // allow :-) touchPet( catCage ); // allow :-) touchPet( dogCage ); // allow :-) touchPet( foxCage ); // forbid :-) pushPet( animalCage ); // allow :-) pushPet( petCage ); // allow :-) pushPet( catCage ); // forbid :-) pushPet( dogCage ); // forbid :-) pushPet( foxCage ); // forbid :-) replacePet( animalCage ); // forbid :-) replacePet( petCage ); // allow :-) replacePet( catCage ); // forbid :-) replacePet( dogCage ); // forbid :-) replacePet( foxCage ); // forbid :-) return 0; }</span></span></span></span></code> </pre> <br><p>  <a href="http://cpp.sh/8aqxm"><strong>Experimente on-line</strong></a> </p><br><h1 id="d">  D </h1><br><p>  D n√£o possui meios s√£os de indicar explicitamente varia√ß√£o, mas ele sabe como inferir tipos com base em seu uso. </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.stdio, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>.random; abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> {</span></span>} abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pet</span></span></span><span class="hljs-class"> :</span></span> Animal { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> name; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> :</span></span> Pet {} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dog</span></span></span><span class="hljs-class"> :</span></span> Pet {} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fox</span></span></span><span class="hljs-class"> :</span></span> Animal {} <span class="hljs-function"><span class="hljs-function">class </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function"> </span></span>{ T content; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">touchPet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PetCage )</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PetCage cage )</span></span></span><span class="hljs-function"> </span></span>{ writeln( cage.content.name ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pushPet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PetCage )</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PetCage cage )</span></span></span><span class="hljs-function"> </span></span>{ cage.content = ( uniform(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ) ? <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog() : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cat(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">replacePet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PetCage )</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PetCage cage )</span></span></span><span class="hljs-function"> </span></span>{ touchPet( cage ); pushPet( cage); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Cage!Animal animalCage; Cage!Pet petCage; Cage!Cat catCage; Cage!Dog dogCage; Cage!Fox foxCage; animalCage.touchPet(); <span class="hljs-comment"><span class="hljs-comment">// forbid :-) petCage.touchPet(); // allow :-) catCage.touchPet(); // allow :-) dogCage.touchPet(); // allow :-) foxCage.touchPet(); // forbid :-) animalCage.pushPet(); // allow :-) petCage.pushPet(); // allow :-) catCage.pushPet(); // forbid :-) dogCage.pushPet(); // forbid :-) foxCage.pushPet(); // forbid :-) animalCage.replacePet(); // forbid :-) petCage.replacePet(); // allow :-) catCage.replacePet(); // forbid :-) dogCage.replacePet(); // forbid :-) foxCage.replacePet(); // forbid :-) }</span></span></code> </pre> <br><p>  <a href="https://tinyurl.com/qwxwzqg"><strong>Experimente on-line</strong></a> </p><br><h1 id="epilog">  Ep√≠logo </h1><br><p>  Por enquanto √© tudo.  Espero que o material apresentado tenha ajudado voc√™ a entender melhor as restri√ß√µes de tipos e como elas s√£o implementadas em diferentes idiomas.  Em algum lugar melhor, em algum lugar pior, em algum lugar de jeito nenhum, mas no todo - mais ou menos.  Talvez seja voc√™ quem desenvolver√° a linguagem na qual tudo isso ser√° implementado de maneira conveniente e segura para o tipo.  Enquanto isso, participe do nosso <a href="https://teleg.run/lang_idioms">bate-papo por telegrama, onde √†s vezes discutimos os conceitos te√≥ricos das linguagens de programa√ß√£o</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477448/">https://habr.com/ru/post/pt477448/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477434/index.html">Malha de servi√ßo para microsservi√ßos. Parte II, no√ß√µes b√°sicas de trabalho com o Istio</a></li>
<li><a href="../pt477436/index.html">Como escrever uma calculadora simples cliente-servidor (JavaFX + EJB + WildFly)</a></li>
<li><a href="../pt477438/index.html">Como recuperar o controle e reduzir a depend√™ncia de smartphones e notifica√ß√µes</a></li>
<li><a href="../pt477440/index.html">Flipper Zero - tomagotchi patsan multitool para pentester</a></li>
<li><a href="../pt477442/index.html">56 projetos Python de c√≥digo aberto</a></li>
<li><a href="../pt477450/index.html">9 abordagens para detectar anomalias</a></li>
<li><a href="../pt477452/index.html">O segundo campeonato de programa√ß√£o: analisamos as tarefas da pista ML</a></li>
<li><a href="../pt477454/index.html">Arquivos de configura√ß√£o. Biblioteca Libconfig e defini√ß√£o de configura√ß√µes n√£o utilizadas</a></li>
<li><a href="../pt477458/index.html">Pr√≥s e contras da vida de TI na Esc√≥cia</a></li>
<li><a href="../pt477460/index.html">Edi√ß√£o 26: Treinamento em TI - problemas e desafios atuais das principais empresas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>