<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€âš–ï¸ â˜¸ï¸ ğŸ¦† Comment transfÃ©rer une variable d'un fragment Ã  une activitÃ© dans Android? ğŸ¤˜ğŸ¿ ğŸ¦‚ ğŸ¤²ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une histoire sur la faÃ§on dont dans Android pour transfÃ©rer des informations d'un fragment (Fragment) Ã  une activitÃ© (Activity). Les informations sero...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment transfÃ©rer une variable d'un fragment Ã  une activitÃ© dans Android?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448744/">  Une histoire sur la faÃ§on dont dans Android pour transfÃ©rer des informations d'un fragment (Fragment) Ã  une activitÃ© (Activity).  Les informations seront utiles pour les dÃ©butants (juniors), maÃ®trisant la programmation pour Android, et ne devraient pas Ãªtre intÃ©ressantes pour les intermÃ©diaires et les seniors. <br><br>  Lancez l'IDE (environnement de dÃ©veloppement intÃ©grÃ©) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android Studio</a> .  CrÃ©ez un nouveau projet: Fichier -&gt; Nouveau -&gt; Nouveau projet.  SÃ©lectionnez "ActivitÃ© vide", cliquez sur "Suivant". <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/cg/ke/e2/cgkee2qhgl99tnppykdclbuqm-m.gif"><br><br>  Remplissez les champs Â«NomÂ», Â«Nom du packageÂ», Â«Enregistrer l'emplacementÂ». <br><br><img src="https://habrastorage.org/webt/lm/fs/bk/lmfsbkgnztagfar9zebozvr0388.gif"><br><br>  L'EDI crÃ©era automatiquement deux fichiers: Â«MainActivity.javaÂ» dans le rÃ©pertoire Â«java / [nom du package]Â», Â«activity_main.xmlÂ» dans le rÃ©pertoire Â«res / layoutÂ». <br><br><img src="https://habrastorage.org/webt/b3/ku/tg/b3kutgfol159_bc6u5wikjyfvg8.jpeg"><br><br><img src="https://habrastorage.org/webt/nq/a5/iq/nqa5iqsksg74xzkkiyo2yhbchzo.jpeg"><br><br>  Le fichier Java dÃ©termine ce que fait l'application, xml - Ã  quoi elle <i><b>ressemble</b></i> .  Il fait jusqu'Ã  prÃ©sent trÃ¨s peu, seulement "setContentView (R.layout.activity_main);".  Cette ligne indique Ã  l'application d'utiliser la disposition activity_main.xml au dÃ©marrage.  Et, comme la mise en page ne contient qu'un seul widget de type "TextView" avec le texte "Hello World!", Notre application a Ã©galement l'air trÃ¨s modeste. <br><br><img src="https://habrastorage.org/webt/ne/vk/dp/nevkdph0t9qydcj1jnn8kqsxdzu.gif"><br><br>  Dans le dossier du projet, crÃ©ez un fragment avec le nom "Fragment1". <br><br><img src="https://habrastorage.org/webt/4f/jj/ws/4fjjwsspunm4e3up2bzd-sycpwc.jpeg"><br><br><img src="https://habrastorage.org/webt/bd/xt/to/bdxttophoj-6r7_vu5faxiyrnxo.gif"><br><br>  L'IDE va â€‹â€‹crÃ©er deux fichiers: "Fragment1" et "fragment_fragment1.xml". <br><br><img src="https://habrastorage.org/webt/gk/z9/vl/gkz9vluu61zdz7kja9od3dtsomk.jpeg"><br><br><img src="https://habrastorage.org/webt/bc/cy/8l/bccy8ljhhmlponiixf522a5z7lm.jpeg"><br><br>  Ouvrez le fichier de disposition des fragments et supprimez le widget "TextView" dont nous n'avons pas besoin avec une ligne de bienvenue. <br><br><img src="https://habrastorage.org/webt/y0/-k/kk/y0-kkkfjxdhvccgc2yflvcnl8pi.jpeg"><br><br>  Passez en mode conception et faites glisser le bouton (Bouton) sur la mise en page. <br><br><img src="https://habrastorage.org/webt/gs/8g/yn/gs8gynbw8fylpdugjpqwzzktb4c.jpeg"><br><br>  L'IDE va â€‹â€‹crÃ©er un bouton avec l'identifiant "bouton1". <br><br><img src="https://habrastorage.org/webt/a_/ng/fb/a_ngfbvqvgv52zful83hsuxpwmo.jpeg"><br><br>  Modifiez maintenant la disposition de l'activitÃ© principale, c'est-Ã -dire  fichier "activity_main.xml" <br><br><img src="https://habrastorage.org/webt/wa/-z/vr/wa-zvrhls1y0cy22xaa4oqcsyls.jpeg"><br><br>  DÃ©placez le widget texte plus haut et ajoutez le fragment que nous avons crÃ©Ã© Ã  la mise en page (pour ce faire, faites glisser l'Ã©lÃ©ment "&lt;&gt;" sur la mise en page, sÃ©lectionnez "Fragment1" et cliquez sur "OK"). <br><br><img src="https://habrastorage.org/webt/pm/fj/wg/pmfjwgcfvfvfbnimdhl78bjh08u.jpeg"><br><br>  Dans la disposition des activitÃ©s dans les paramÃ¨tres du fragment, dÃ©finissez layout_height = "wrap_content" et modifiez son emplacement Ã  votre goÃ»t.  Nous changerons Ã©galement l'identifiant du champ de texte en Â«textReportÂ» et le fragment en Â«fragmentWithButtonÂ». <br><br><img src="https://habrastorage.org/webt/dk/au/mg/dkaumgt8t_rpixwewkiyd_ozcdc.jpeg"><br><br>  ExÃ©cutez l'Ã©mulateur (Shift + F10) et voyez ce qui s'est passÃ©. <br><br><img src="https://habrastorage.org/webt/c2/yc/ax/c2ycaxbgia70bz0xe0tzs1veai4.gif"><br><br>  L'application affiche l'inscription "Hello World!"  et le bouton BOUTON.  L'inscription est dÃ©duite de l' <i><b>activitÃ©</b></i> , le bouton appartient Ã  un <i><b>fragment</b></i> .  Le bouton est enfoncÃ©, mais jusqu'Ã  prÃ©sent, il n'a aucun effet.  Essayons de programmer l'inscription pour afficher le nombre d'appuis sur les boutons.  Pour ce faire, nous devrons <i><b>envoyer un message sur le clic du bouton du fragment Ã  l'activitÃ©</b></i> . <br><br>  Tout d'abord, nous allons apprendre au fragment Ã  compter le nombre de clics sur les boutons.  Ouvrez le fichier Â«Fragment1.javaÂ». <br><br><img src="https://habrastorage.org/webt/6f/ti/eo/6ftieohuhycuf_tpcwnu6s1bm0y.jpeg"><br><br>  Ajoutez la variable "compteur".  Dans la mÃ©thode Â«onCreateViewÂ», qui est appelÃ©e immÃ©diatement aprÃ¨s la crÃ©ation du fragment, crÃ©ez le bouton Â«Ã©couteurÂ».  L'IDE nÃ©cessitera l'implÃ©mentation de View.OnClickListener - d'accord (Alt + EntrÃ©e).  CrÃ©ons (redÃ©finissons) la mÃ©thode onClick, qui augmentera la valeur de la variable Â«compteurÂ» Ã  chaque clic du bouton et affichera un message pop-up. <br><br><img src="https://habrastorage.org/webt/is/lw/bg/islwbg0ijjtbojfcvsis1i2gacq.jpeg"><br><br>  VÃ©rifions dans l'Ã©mulateur (encore une fois Shift + F10) comment cela fonctionne.  En appuyant sur le bouton, le message contextuel "Nombre de clics sur le bouton: ..." apparaÃ®tra en bas de l'Ã©cran de l'application. <br><br><img src="https://habrastorage.org/webt/vo/j5/ul/voj5uljhsxmwgzg_m1ycafmg5p0.gif"><br><br>  Super, continue.  Notre objectif principal est de transfÃ©rer des informations (dans ce cas, le nombre de clics sur les boutons) de l'instance de fragment vers l'instance d'activitÃ©.  HÃ©las, les cycles de vie des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">activitÃ©s</a> et des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fragments sont</a> organisÃ©s de maniÃ¨re Ã  ce qu'Android (presque) ne permette pas Ã  l'activitÃ© et Ã  un fragment de communiquer directement, nous avons donc besoin d'une interface intermÃ©diaire.  Appelons-le Â«facteurÂ» (facteur).  L'interface peut Ãªtre crÃ©Ã©e soit dans un fichier sÃ©parÃ©, soit dans un fichier avec un code de fragment;  nous choisirons la premiÃ¨re option.  Notre interface Postman contiendra une seule mÃ©thode abstraite (sans "corps") de "fragmentMail". <br><br><img src="https://habrastorage.org/webt/m4/7y/ze/m47yzelbzced44wwarahc5incwe.jpeg"><br><br>  Nous utiliserons la variable "numberOfClicks" comme "enveloppe" pour transfÃ©rer les messages du fragment vers l'activitÃ©. <br><br>  Ouvrez le fichier avec le code d'activitÃ© "MainActivity.java".  Comme nous nous en souvenons, cela ressemble Ã  ceci: <br><br><img src="https://habrastorage.org/webt/tl/h3/s9/tlh3s9pb3alrn_busz9f2pmq9t0.jpeg"><br><br>  Nous implÃ©mentons l'interface Postman et ajoutons la mÃ©thode d'interface fragmentMail Ã  l'activitÃ©, en la redÃ©finissant ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Override</a> ). <br><br><img src="https://habrastorage.org/webt/fw/1u/vq/fw1uvq544wgtximbhjtslbszmrs.jpeg"><br><br>  Maintenant, dÃ¨s que l'activitÃ© "voit" une nouvelle valeur dans la variable "numberOfClicks", elle affichera un message mis Ã  jour dans le champ de texte textReport. <br><br>  Mais nous devons encore Â«mettre la lettre dans l'enveloppeÂ», c'est-Ã -dire  passez Ã  la variable le nombre de clics sur le bouton.  Et nous le faisons dans le code de fragment.  Ouvrez le fichier "Fragment1.java". <br><br>  DÌ¶oÌ¶bÌ¶aÌ¶vÌ¶lÌ¶yaÌ¶eÌ¶mÌ¶ Â¯V Podpis Klassa Ì¶iÌ¶mÌ¶pÌ¶lÌ¶eÌ¶mÌ¶eÌ¶nÌ¶tÌ¶aÌ¶tsÌ¶iÌ¶yuÌ¶ Ì¶iÌ¶nÌ¶tÌ¶eÌ¶rÌ¶fÌ¶eÌ¶yÌ¶sÌ¶aÌ¶ Ì¶ Â«PostmanÂ». Ide Ì¶pÌ¶oÌ¶tÌ¶rÌ¶eÌ¶bÌ¶uÌ¶eÌ¶tÌ¶ Ì¶pÌ¶eÌ¶rÌ¶eÌ¶oÌ¶pÌ¶rÌ¶eÌ¶dÌ¶eÌ¶lÌ¶iÌ¶tÌ¶Ì¶ Metod Ì¶iÌ¶nÌ¶tÌ¶eÌ¶rÌ¶fÌ¶eÌ¶yÌ¶sÌ¶aÌ¶ Ì¶ Â«Ì¶fÌ¶rÌ¶aÌ¶gÌ¶mÌ¶eÌ¶nÌ¶tÌ¶MÌ¶aÌ¶iÌ¶lÌ¶Â» Ì¶, Ì¶ NÃ´ delat Â¯V Nominal nichego Má»¹ nÃ¨ budem, Ì¶ Ì¶pÌ¶oÌ¶eÌ¶tÌ¶oÌ¶mÌ¶uÌ¶ Ì¶oÌ¶sÌ¶tÌ¶aÌ¶vÌ¶iÌ¶mÌ¶ EGO Telo Ì¶pÌ¶uÌ¶sÌ¶tÌ¶yÌ¶mÌ¶.  <i>[SupprimÃ©, voir Â«Note 1 du 20/04/2019Â»]</i> <br><br>  Nous aurons besoin d'un lien vers une instance d'activitÃ©.  Nous l'obtiendrons lorsqu'un fragment est attachÃ© Ã  une activitÃ© comme celle-ci: <br><img src="https://habrastorage.org/webt/yl/jh/fr/yljhfr9cyl1pzhptlzzi6h0ejhy.jpeg"><br><br>  Dans la mÃ©thode Â«onClickÂ» (la mÃªme que celle qui est appelÃ©e lorsque le bouton de notre fragment est cliquÃ©), nous ajoutons un appel Ã  l'interface Ã  partir d'une instance d'activitÃ©. <br><br><img src="https://habrastorage.org/webt/je/o2/k8/jeo2k8ssprrdoyrzi9ab3v3e4kc.jpeg"><br><br>  Le code final du fragment aprÃ¨s la suppression (pour des raisons de compacitÃ©) des commentaires ressemble Ã  ceci: <br><img src="https://habrastorage.org/webt/wb/7r/3d/wb7r3digdzwfbscmtcpwy7qzqj4.jpeg"><br><br>  Maintenant, notre <i>fragment compte le nombre de clics sur les boutons</i> , les affiche dans un message contextuel, puis utilise l'interface Postman pour <i>transfÃ©rer la valeur de la variable de compteur Ã  la variable numberOfClicks</i> , qui sert de conteneur d'enveloppe pour envoyer des messages du fragment Ã  l'activitÃ©.  L'activitÃ©, recevant un nouveau message, l'affiche immÃ©diatement dans son champ de texte de widget avec l'identifiant "textReport".  Le but est atteint! <br><img src="https://habrastorage.org/webt/ur/vh/mc/urvhmcy7fbx4rmt7sgkdnb_t2v0.gif"><br><br>  PS: Changer le langage de programmation de Java Ã  Kotlin peut rÃ©duire considÃ©rablement le fragment de code: <br><br><img src="https://habrastorage.org/webt/3g/zu/dr/3gzudr28v2o8c3xvmbewzpzqusg.jpeg"><br><br>  PPS: TÃ©lÃ©chargez les fichiers du projet ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Java</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kotlin</a> . <br><br><h4>  Note 1 du 20/04/2019: </h4><br>  L'implÃ©mentation de l'interface Postman a Ã©tÃ© supprimÃ©e du code de fragment. <br>  Un fragment fonctionne avec une interface via une activitÃ© dans laquelle cette interface est dÃ©jÃ  implÃ©mentÃ©e. <br>  Merci Ã  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">mikaakim</a> pour ses <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commentaires</a> . <br>  Les fichiers mis Ã  jour peuvent Ãªtre tÃ©lÃ©chargÃ©s depuis github sur les liens ci-dessus. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448744/">https://habr.com/ru/post/fr448744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448732/index.html">Hernie intervertÃ©brale? Travailler sur elle</a></li>
<li><a href="../fr448734/index.html">Des drones et des robots aident Ã  sauver la cathÃ©drale Notre-Dame de Paris</a></li>
<li><a href="../fr448738/index.html">Qui chasse les startups?</a></li>
<li><a href="../fr448740/index.html">Nous Ã©coutons de la musique SID (Commodore 64) via OPL3 sur des PC modernes</a></li>
<li><a href="../fr448742/index.html">Pandora's Box: nous analysons l'exploitation de la vulnÃ©rabilitÃ© WinRAR Ã  l'aide de l'exemple du job NeoQUEST-2019</a></li>
<li><a href="../fr448746/index.html">Index dans PostgreSQL - 7 (GIN)</a></li>
<li><a href="../fr448750/index.html">Ã€ propos d'une vulnÃ©rabilitÃ© qui n'est pas</a></li>
<li><a href="../fr448754/index.html">Qui est qui en open source: biographies de geek</a></li>
<li><a href="../fr448756/index.html">Contexte: pourquoi Apple et Qualcomm se sont disputÃ©s, puis se sont rÃ©conciliÃ©s</a></li>
<li><a href="../fr448758/index.html">Montre intelligente avec BASIC sur 6502 physique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>