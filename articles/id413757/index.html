<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛎ 👤 ↖️ Database dalam proyek komersial: apa yang harus dilakukan? ⏏️ 💃🏼 🖐️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Semua dengan akhir liburan! ... Beberapa orang akan mengatakan bahwa selamat ini begitu-begitu. Tapi, pasti, banyak yang akan segera berlibur, jadi am...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Database dalam proyek komersial: apa yang harus dilakukan?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/413757/">  Semua dengan akhir liburan! ... Beberapa orang akan mengatakan bahwa selamat ini begitu-begitu.  Tapi, pasti, banyak yang akan segera berlibur, jadi ambil sedikit lagi.  Ya, kami tidak kehilangan momentum dan pada hari yang hangat ini kami berbagi pengalaman dengan mitra kami.  Ini akan menjadi tentang mengoptimalkan pekerjaan dengan database.  Lebih detail di bawah cut! <br><br><img src="https://habrastorage.org/webt/ea/ms/5v/eams5vve4rwkpzitmhnv4bl0-ki.jpeg"><a name="habracut"></a><br><br>  <i>Saya memberikan lantai kepada penulis.</i> <br><br>  Kami menyambut Anda, para pembaca Habr!  Kami adalah tim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WaveAccess</a> , dalam artikel ini kami akan berbagi dengan Anda pengalaman menggunakan layanan database Azure Cosmos DB (DB) dalam proyek komersial.  Kami akan memberi tahu Anda mengapa database dimaksudkan, dan nuansa yang harus kami hadapi selama pengembangan. <br><br><h2>  Apa itu Azure Cosmos DB </h2><br>  Azure Cosmos DB adalah layanan database komersial yang didistribusikan secara global dengan paradigma multi-model, yang disediakan sebagai solusi PaaS.  Dia adalah generasi selanjutnya dari Azure DocumentDB. <br><br>  Basis data dikembangkan pada 2017 oleh Microsoft dengan partisipasi Leslie Lamport, Ph.D dalam Ilmu Komputer (pemenang Turing Prize 2013 untuk kontribusi mendasar pada teori sistem terdistribusi, pengembang LaTex, pencipta spesifikasi TLA +). <br><br>  Karakteristik utama Azure Cosmos DB adalah: <br><br><ul><li>  Database non-relasional; </li><li>  Dokumen di dalamnya disimpan sebagai JSON; </li><li>  Penskalaan horisontal dengan pilihan wilayah geografis; <br><br><img src="https://habrastorage.org/webt/nl/dy/3g/nldy3g3u0sgafl2hucspvk5bcdc.jpeg"><br><br></li><li>  Paradigma data multi-model: nilai kunci, dokumen, grafik, keluarga kolom; </li><li>  Latensi rendah untuk 99% permintaan: kurang dari 10 ms untuk operasi baca dan kurang dari 15 ms untuk operasi tulis (diindeks); </li><li>  Dirancang untuk throughput tinggi; </li><li>  Ini menjamin ketersediaan, konsistensi data, latensi pada tingkat SLA 99,999%; </li><li>  Bandwidth yang bisa dikonfigurasi </li><li>  Replikasi otomatis (master-slave); </li><li>  Pengindeksan data otomatis; </li><li>  Tingkat konsistensi data yang dapat disesuaikan.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5 level yang berbeda</a> (Kuat, Staleness Terbatas, Sesi, Awalan Konsisten, Akhirnya); </li></ul><br>  Pada grafik, Anda dapat melihat ketergantungan berbagai tingkat konsistensi pada ketersediaan, kinerja, dan konsistensi data. <br><br><img src="https://habrastorage.org/webt/aj/mn/3a/ajmn3abjqxczqnngqpexk7hrdfu.jpeg"><br><br><ul><li>  Untuk transisi yang mudah ke Cosmos DB dari database-nya, ada banyak API untuk mengakses data: SQL, JavaScript, GREMLIN, MongoDB, Cassandra, Azure Blob; </li><li>  Firewall yang dapat disesuaikan; </li><li>  Ukuran basis data khusus. </li></ul><br><h2>  Tugas yang kami selesaikan </h2><br>  Ribuan sensor yang terletak di seluruh dunia mengirimkan informasi (pemberitahuan selanjutnya) setiap beberapa detik.  Pemberitahuan ini harus disimpan dalam database, dan kemudian mencarinya dan menampilkannya di UI operator sistem. <br><br>  Persyaratan Pelanggan: <br><br><ul><li>  Menggunakan tumpukan teknologi Microsoft, termasuk cloud Azure; </li><li>  Throughput 100 permintaan per detik; </li><li>  Notifikasi tidak memiliki struktur yang jelas dan dapat berkembang lebih jauh; </li><li>  Untuk pemberitahuan kritis, kecepatan pemrosesan adalah penting; </li><li>  Ketahanan sistem yang tinggi. </li></ul><br>  Berdasarkan kebutuhan pelanggan, kami secara ideal didekati dengan database komersial yang non-relasional, terdistribusi secara global, dan dapat diandalkan. <br><br><img src="https://habrastorage.org/webt/x8/fe/no/x8fenovzxodrhh7fvpxqvpjtrcg.jpeg"><br><br>  Jika kita melihat basis data yang mirip dengan Cosmos DB, kita dapat memanggil Amazon DynamoDB, Google Cloud Spanner.  Tetapi Amazon DynamoDB tidak terdistribusi secara global, dan Google Cloud Spanner memiliki tingkat konsistensi dan tipe model data yang lebih sedikit (hanya tabular, relasional). <br><br>  Untuk alasan ini, kami memilih Azure Cosmos DB.  Untuk berinteraksi dengan database, kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggunakan Azure Cosmos DB SDK untuk .NET</a> , karena backend ditulis dalam .NET. <br><br><h2>  Nuansa yang kami temui </h2><br>  <b>1. Manajemen Basis Data</b> <br><br>  Untuk mulai menggunakan database, pertama-tama, Anda harus memilih alat untuk mengelolanya.  Kami menggunakan Azure Cosmos DB Data Explorer di portal Azure dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DocumentDbExplorer</a> .  Ada juga utilitas Azure Storage Explorer. <br><br><img src="https://habrastorage.org/webt/rc/pv/wo/rcpvwozefe9cykihsulmvtmmxgs.jpeg"><br><br>  <b>2. Menyiapkan koleksi database</b> <br><br>  Di Cosmos DB, setiap basis data terdiri dari koleksi dan dokumen. <br><br>  Fitur koleksi yang dapat disesuaikan untuk diperhatikan: <br><br><ul><li>  Ukuran koleksi: tetap atau tidak terbatas; </li><li>  Bandwidth dalam satuan permintaan per detik RU / s (dari 400 RU / s); <br><br><img src="https://habrastorage.org/webt/i3/pk/xt/i3pkxtag0v2kvwtjyuclvhzoojk.jpeg"><br><br></li><li>  Kebijakan pengindeksan (termasuk atau mengecualikan dokumen dan jalur ke dan dari indeks, mengatur berbagai jenis indeks, mengatur mode pembaruan indeks). </li></ul><br>  Contoh Indeks Khas <br><br><pre><code class="cs hljs">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"datas"</span></span>, <span class="hljs-string"><span class="hljs-string">"indexingPolicy"</span></span>: { <span class="hljs-string"><span class="hljs-string">"indexingMode"</span></span>: <span class="hljs-string"><span class="hljs-string">"consistent"</span></span>, <span class="hljs-string"><span class="hljs-string">"automatic"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"includedPaths"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"/*"</span></span>, <span class="hljs-string"><span class="hljs-string">"indexes"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Range"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>: <span class="hljs-string"><span class="hljs-string">"Number"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>: <span class="hljs-number"><span class="hljs-number">-1</span></span> }, { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hash"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Spatial"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>: <span class="hljs-string"><span class="hljs-string">"Point"</span></span> } ] } ], <span class="hljs-string"><span class="hljs-string">"excludedPaths"</span></span>: [] } }</code> </pre> <br>  Agar pencarian substring berfungsi, untuk bidang string Anda perlu menggunakan indeks Hash ("kind": "Hash"). <br><br>  <b>3. Transaksi basis data</b> <br><br>  Transaksi diimplementasikan dalam basis data pada tingkat prosedur tersimpan (mengeksekusi prosedur tersimpan adalah operasi atom).  Prosedur tersimpan JavaScript <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> helloWorldStoredProc = { id: <span class="hljs-string"><span class="hljs-string">"helloWorld"</span></span>, body: function () { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = getContext(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> response = context.getResponse(); response.setBody(<span class="hljs-string"><span class="hljs-string">"Hello, World"</span></span>); } }</code> </pre> <br>  <b>4. Saluran perubahan basis data</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ubah Feed</a> mendengarkan perubahan dalam koleksi.  Ketika perubahan pada dokumen pengumpulan terjadi, database melempar acara tentang perubahan ke semua pelanggan saluran ini. <br><br>  Kami menggunakan Ubah Umpan untuk melacak perubahan koleksi.  Saat membuat saluran, Anda harus terlebih dahulu membuat koleksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AUX</a> tambahan yang mengoordinasikan pemrosesan saluran perubahan untuk beberapa peran kerja. <br><br>  <b>5. Batasan basis data:</b> <br><br><ul><li>  Kurangnya operasi massal (prosedur tersimpan yang digunakan untuk <a href="">penghapusan massal</a> , memperbarui dokumen); </li><li>  Kurangnya pembaruan sebagian dokumen; </li><li>  Tidak ada operasi SKIP (kompleksitas implementasi pagination).  Untuk menerapkan pagination dalam permintaan notifikasi, kami menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RequestContinuation</a> (tautan ke elemen terakhir sebagai hasil dari penerbitan) dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MaxItemCount</a> (jumlah elemen yang dikembalikan dari database).  Secara default, hasilnya dikembalikan dalam batch (tidak lebih dari 100 item dan tidak lebih dari 1 MB di setiap paket).  Jumlah item yang dikembalikan dapat ditingkatkan menjadi 1000 menggunakan parameter MaxItemCount. </li></ul><br>  <b>6. Memproses kesalahan basis data ke-429</b> <br><br>  Ketika bandwidth pengumpulan mencapai maksimum, database mulai menghasilkan kesalahan "429 permintaan terlalu banyak".  Untuk memprosesnya, Anda dapat menggunakan pengaturan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RetryOptions</a> di SDK, di mana MaxRetryAttemptsOnThrottledRequests adalah jumlah upaya untuk menyelesaikan permintaan, dan MaxRetryWaitTimeInSeconds adalah total waktu upaya koneksi. <br><br>  <b>7. Prakiraan biaya penggunaan basis data</b> <br><br>  Untuk memperkirakan biaya menggunakan database, kami menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kalkulator online</a> RU / s.  Dalam rencana dasar, satu unit permintaan untuk elemen 1 KB sesuai dengan perintah GET sederhana dengan tautan ke dirinya sendiri atau pengidentifikasi elemen ini. <br><br><h2>  Kesimpulan </h2><br>  Azure Cosmos DB mudah digunakan, mudah dan fleksibel untuk dikonfigurasi melalui portal Azure.  Banyaknya API akses data memudahkan untuk bermigrasi ke Cosmos DB.  Tidak perlu melibatkan administrator basis data untuk memelihara basis data.  Jaminan keuangan SLA, penskalaan horizontal global membuat basis data ini sangat menarik di pasar.  Sangat cocok untuk digunakan dalam aplikasi perusahaan dan global yang menuntut toleransi kesalahan dan bandwidth yang tinggi.  Kami di WaveAccess terus menggunakan Cosmos DB dalam proyek kami. <br><br><h2>  Tentang penulis </h2><br>  Tim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WaveAccess</a> menciptakan perangkat lunak yang secara teknis canggih, sangat sarat, dan toleran terhadap kesalahan untuk perusahaan di seluruh dunia.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Alexander Azarov</a> , wakil presiden senior pengembangan perangkat lunak di WaveAccess, berkomentar: <br><br><blockquote>  Sekilas, tugas-tugas sulit dapat diselesaikan dengan metode yang relatif sederhana.  Penting tidak hanya mempelajari alat-alat baru, tetapi juga untuk menyempurnakan pengetahuan teknologi yang sudah dikenal. </blockquote><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Blog perusahaan</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413757/">https://habr.com/ru/post/id413757/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413745/index.html">Sistem daya nirkabel dikembangkan untuk semua elektronik dalam tubuh manusia sekaligus</a></li>
<li><a href="../id413747/index.html">Melalui NULL</a></li>
<li><a href="../id413749/index.html">B + tree dalam proyek nyata</a></li>
<li><a href="../id413751/index.html">Ruslan Cheremin dan Maxim Gramin - bekerja dengan lingkungan di jug.msk.ru</a></li>
<li><a href="../id413753/index.html">Eye in the Sky: Drone patroli dengan pengakuan kekerasan di kerumunan dan tempat-tempat umum</a></li>
<li><a href="../id413759/index.html">Keingintahuan menemukan organik di Mars, yang berusia miliaran tahun</a></li>
<li><a href="../id413761/index.html">Bagaimana mencegah Windows 10 memulai kembali setelah pembaruan</a></li>
<li><a href="../id413763/index.html">Apa yang kami baca di bulan Mei: ulasan Ivy, rilis Nest 5, dan teks bermanfaat lainnya untuk pengembang Angular</a></li>
<li><a href="../id413765/index.html">Rantai Tanggung Jawab dalam templat variadic C ++</a></li>
<li><a href="../id413767/index.html">Pakar PRNG Kanada mengkritik pihak berwenang karena menggunakan algoritma Excel kuno untuk menggambar visa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>