<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆🏽 🚱 👊🏿 Chorda. Versuch es deklarativ zu machen 👩‍🏭 🙏🏽 👨‍👨‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jedes Mal, wenn ich mich hinsetzen muss, um eine neue Anwendung zu erstellen, bin ich leichtsinnig. In meinem Kopf dreht sich alles um die Frage, welc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chorda. Versuch es deklarativ zu machen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480856/"><p>  Jedes Mal, wenn ich mich hinsetzen muss, um eine neue Anwendung zu erstellen, bin ich leichtsinnig.  In meinem Kopf dreht sich alles um die Frage, welche Bibliothek oder welches Framework diesmal benötigt wird.  Das letzte Mal, als ich über die X-Bibliothek schrieb, aber jetzt ist das Y-Framework erwachsen und übergeben worden, und es gibt immer noch ein cooles UI-Kit Z, und eine Menge Arbeit ist von früheren Projekten übrig geblieben. </p><br><p>  Irgendwann wurde mir klar, dass das Framework keine Rolle spielt - was ich brauche, kann ich auf jedem von ihnen tun.  Hier scheint es, als sollte man glücklich sein, etwas mit dem Maximum an Sternen auf den Github nehmen und sich beruhigen.  Trotzdem entsteht immer wieder der unwiderstehliche Wunsch, etwas Eigenes zu tun, sein eigenes Fahrrad.  Na dann.  Einige allgemeine Gedanken zu diesem Thema und ein Rahmen namens Chorda warten auf Sie unter dem Schnitt. </p><a name="habracut"></a><br><p>  In der Tat ist das Problem nicht, dass die Entscheidung eines anderen schlecht oder unwirksam ist.  Nein.  Das Problem ist, dass uns die Entscheidung eines anderen dazu bringt, auf eine Weise zu denken, die für uns möglicherweise unpraktisch ist.  Aber warte.  Was bedeutet „bequem-unbequem“ und wie kann sich dies überhaupt auf die Entwicklung auswirken?  Denken Sie daran, dass es in der Tat so etwas wie DX gibt - eine Reihe etablierter persönlicher und allgemein akzeptierter Praktiken.  Von hier aus können wir sagen, dass es für uns bequem ist, wenn unser eigenes DX mit dem DX des Autors der Bibliothek oder des Frameworks übereinstimmt.  Und in dem Fall, in dem sie auseinander gehen, entsteht das Unbehagen, die Verärgerung und die Suche nach etwas Neuem. </p><br><h3 id="nemnozhko-istorii">  Ein bisschen Geschichte </h3><br><p>  Wenn Sie eine Benutzeroberfläche für eine Unternehmensanwendung entwickeln, werden Sie mit einer großen Anzahl von Benutzerformularen konfrontiert.  Und eines Tages taucht ein brillanter Gedanke in meinem Kopf auf: Warum erstelle ich jedes Mal ein Webformular, wenn ich einfach die Felder in JSON auflisten und die resultierende Struktur dem Generator zuführen kann?  Und obwohl dieser Ansatz in der Welt des blutigen Unternehmertums nicht allzu gut funktioniert (warum das so ist, ist dies eine separate Konversation), ist die Idee, von einem imperativen zu einem deklarativen Stil zu wechseln, im Allgemeinen nicht schlecht.  Ein Beweis dafür ist die große Anzahl von Generatoren von Webformularen, -seiten und sogar ganzen Websites, die im Web leicht zu finden sind. </p><br><p>  Irgendwann war mir also der Wunsch, meinen Code aufgrund des Übergangs zur Deklarativität zu verbessern, nicht fremd.  Sobald wir jedoch nicht nur Standard-HTML-Elemente, sondern auch komplexe und interaktive Widget-Komponenten benötigten, konnten wir mit einem einfachen Generator nicht mehr davonkommen.  Die Anforderungen an Code-Wiederverwendbarkeit, Integrierbarkeit, Erweiterbarkeit usw. kamen schnell hinzu.  Die Entwicklung einer eigenen Komponentenbibliothek mit einer deklarativen API ließ nicht lange auf sich warten. </p><br><p>  Aber hier geschah kein Glück.  Die wahrscheinlich beste Situation spiegelt die Meinung meines Kollegen wider, der die erstellte Bibliothek nutzen sollte.  Er schaute sich die Beispiele an, die Dokumentation und sagte: "Die Bibliothek ist cool. Schön, dynamisch. Aber wie kann ich jetzt eine Anwendung daraus machen?"  Und er hatte recht.  Es stellte sich heraus, dass es nicht gleichbedeutend ist, mehrere Komponenten zu kombinieren, damit sie nahtlos funktionieren. </p><br><p>  Seitdem ist viel Zeit vergangen.  Und als ich wieder einmal von dem Wunsch besucht wurde, Gedanken und Ideen zusammenzubringen, beschloss ich, etwas anderes zu machen und nicht von unten nach oben zu gehen, sondern von oben nach unten. </p><br><h3 id="upravlenie-prilozheniem--upravlenie-sostoyaniyami">  Anwendungsverwaltung == Statusverwaltung </h3><br><p>  Ich bin eher daran gewöhnt, die Anwendung als eine Finite-State-Maschine mit einigen Klonzuständen zu betrachten.  Und die Arbeit der Anwendung als eine Reihe von Übergängen von einem Zustand in einen anderen, bei denen das Ändern des Modells zur Erstellung einer neuen Version der Ansicht führt.  In Zukunft werde ich einige feste <strong>Daten</strong> (ein Objekt, ein Array, einen primitiven Typ usw.) aufrufen, die sich auf ihre einzige Darstellung beziehen - ein <strong>Dokument</strong> . </p><br><p>  Es gibt ein offensichtliches Problem: Für viele Werte des Modells müssen viele Optionen für das Dokument beschrieben werden.  Hier werden üblicherweise zwei Ansätze verwendet: </p><br><ol><li>  Vorlagen.  Wir verwenden unsere bevorzugte Auszeichnungssprache und ergänzen sie mit Verzweigungs- und Schleifenanweisungen. </li><li>  Funktionen  Wir beschreiben in unseren Funktionen unsere Zweige und Schleifen in unserer bevorzugten Programmiersprache. </li></ol><br><p>  Beide Ansätze werden in der Regel deklarativ deklariert.  Die erste wird als deklarativ angesehen, da sie auf, wenn auch etwas erweiterten, Regeln der Auszeichnungssprache basiert.  Die zweite - weil sie sich auf die Zusammensetzung von Funktionen konzentriert, von denen einige als Regeln fungieren.  Bemerkenswerterweise gibt es derzeit keine klare Grenze zwischen Vorlagen und Funktionen. </p><br><p>  Einerseits mag ich Vorlagen, andererseits wollte ich die Funktionen von Javascript irgendwie nutzen.  Zum Beispiel so etwas: </p><br><pre><code class="javascript hljs">createFromConfig({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Alice'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">tag</span></span>: <span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'clickable box'</span></span>, <span class="hljs-attr"><span class="hljs-attr">onClick</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Click'</span></span>) } })</code> </pre> <br><p>  Das Ergebnis ist eine JS-Konfiguration, die einen bestimmten <strong>Zustand beschreibt</strong> .  Um die vielen Zustände zu beschreiben, muss die Erweiterbarkeit dieser Konfiguration erreicht werden.  Und was ist der bequemste Weg, eine Reihe von Optionen erweiterbar zu machen?  Wir werden hier nichts erfinden - Überladungsmöglichkeiten gibt es schon lange.  Wie es funktioniert, zeigt das Beispiel von Vue mit seiner Options-API.  Aber im Gegensatz zu demselben Vue habe ich mich gefragt, ob der vollständige Zustand, einschließlich der Daten und des Dokuments, auf die gleiche Weise beschrieben werden kann. </p><br><h3 id="struktura-prilozheniya-i-deklarativnost">  Antragsstruktur und Deklarativität </h3><br><blockquote>  Der Begriff „Komponente“ ist zu vage geworden, insbesondere nach dem Auftreten des sogenannten  funktionale Komponenten.  Im weiteren Verlauf der Struktur der Anwendung werde ich die Komponente als <strong>Strukturelement bezeichnen</strong> . </blockquote><p>  Sehr schnell kam ich zu dem Schluss, dass das Strukturelement (Komponente) kein Dokumentelement ist, sondern eine Entität, die: </p><br><ol><li>  kombiniert Daten und Dokumente (Bindung und Ereignisse) </li><li>  verbunden mit anderen ähnlichen Entitäten (Baumstruktur) </li></ol><br><p>  Wie ich bereits erwähnt habe, müssen Sie für diese Zustände eine Beschreibungsmethode haben, wenn Sie die Anwendung als eine Reihe von Zuständen wahrnehmen.  Darüber hinaus ist es notwendig, ein solches Verfahren so zu finden, dass es keine "falschen" Imperativoperatoren enthält.  Wir sprechen über die sehr <em>hilfreichen</em> Elemente, die in die Vorlagen <em>eingefügt werden</em> - <em>#if</em> , <em>#elsif</em> , <em>v-for</em> usw.  Ich denke, viele Leute kennen die Lösung bereits - es ist notwendig, die Logik auf das Modell zu übertragen und auf der Präsentationsebene eine API zu belassen, mit der Sie Strukturelemente über einfache Datentypen steuern können. </p><br><p>  Unter Management verstehe ich das Vorhandensein von Variabilität und Zyklizität. </p><br><h4 id="variativnost-if-else">  Variabilität (wenn-sonst) </h4><br><p>  Schauen wir uns an, wie Sie die Anzeigeoptionen am Beispiel einer Kartenkomponente in Chorda steuern können: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isHeaderOnly = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> card = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">$header</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-attr"><span class="hljs-attr">$footer</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-attr"><span class="hljs-attr">components</span></span>: {<span class="hljs-attr"><span class="hljs-attr">header</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">footer</span></span>: !isHeaderOnly} <span class="hljs-comment"><span class="hljs-comment">//    })</span></span></code> </pre> <br><p>  Durch Festlegen des Werts der <em>Komponentenoption</em> können Sie die angezeigten Komponenten steuern.  Und wenn wir <em>Komponenten</em> mit reaktivem Speicher verknüpfen, erhalten wir, dass unsere Struktur unter Datenmanagement fällt.  Es gibt eine Einschränkung: Object wird als Wert verwendet, und die Schlüssel darin sind nicht geordnet, was die <em>Komponenten</em> einschränkt. </p><br><h4 id="ciklichnost-for">  Zyklus (für) </h4><br><p>  Wenn Sie mit Daten arbeiten, deren Menge nur zur Laufzeit bekannt ist, müssen Sie die Listen iterieren. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> drinks = [<span class="hljs-string"><span class="hljs-string">'Coffee'</span></span>, <span class="hljs-string"><span class="hljs-string">'Tea'</span></span>, <span class="hljs-string"><span class="hljs-string">'Milk'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">html</span></span>: <span class="hljs-string"><span class="hljs-string">'ul'</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>: <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">defaultItem</span></span>: { <span class="hljs-attr"><span class="hljs-attr">html</span></span>: <span class="hljs-string"><span class="hljs-string">'li'</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>: <span class="hljs-string"><span class="hljs-string">'list-item'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">items</span></span>: drinks })</code> </pre> <br><p>  Der Wert der Option <em>items</em> ist Array, bzw. wir erhalten einen geordneten Komponentensatz.  Das Binden von <em>Gegenständen</em> an den Speicher, wie im Fall von <em>Komponenten,</em> überträgt die Kontrolle auf die Daten. </p><br><p>  Strukturelemente sind in einer Baumstruktur miteinander verbunden.  Wenn wir die vorherigen Beispiele kombinieren, erhalten wir zum Anzeigen der Liste im Hauptteil der Karte Folgendes: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   const state = { struct: { header: true, footer: false, }, drinks: ['Coffee', 'Tea', 'Milk'] } //  const card = new Html({ $header: { /*  */ }, $content: { html: 'ul', css: 'list', defaultItem: { html: 'li', css: 'list-item' }, items: state.drinks }, $footer: { /*  */ }, components: state.struct })</span></span></code> </pre> <br><p>  Ungefähr auf diese Weise wird die Datenstruktur der Anwendung erstellt.  Es ist ausreichend, zwei Arten von Generatoren zu haben - basierend auf Object und basierend auf Array.  Es bleibt nur zu verstehen, wie die Umwandlung von Strukturelementen in ein Dokument erfolgt. </p><br><h3 id="kogda-vse-uzhe-pridumano-za-nas">  Wenn für uns schon alles erfunden ist </h3><br><p>  Im Allgemeinen befürworte ich die Tatsache, dass das Dokument-Rendering-System auf Browserebene implementiert werden sollte (wenn auch mindestens auf der gleichen VDOM-Ebene).  Und unsere Aufgabe wird es nur sein, es sorgfältig mit dem Komponentenbaum zu verbinden.  Denn egal wie schnell die Bibliothek wächst, der Browser hat es trotzdem mehr. </p><br><p>  Ich habe ehrlich gesagt irgendwann versucht, meine Rendering-Funktion zu aktivieren, aber nach einer Weile habe ich aufgegeben, weil ich nicht schneller zeichnen kann als VanillaJS (leider!).  Jetzt ist es in Mode, VDOM zum Rendern zu verwenden, und seine Implementierungen sind möglicherweise sogar im Überfluss vorhanden.  Also, plus einer weiteren Implementierung des virtuellen Baums, habe ich beschlossen, ihn nicht zum Sparschwein des Githubs hinzuzufügen - nur das nächste Framework reicht aus. </p><br><p>  Anfänglich wurde in Chorda ein Adapter für die Maquette-Bibliothek zum Rendern erstellt. Sobald jedoch Aufgaben "aus der realen Welt" auftauchten, stellte sich heraus, dass es praktischer war, eine Schublade für React zu haben.  In diesem Fall können Sie beispielsweise einfach die vorhandenen React DevTools verwenden und keine eigenen schreiben. </p><br><p>  Um VDOM mit Strukturelementen zu verbinden, benötigen Sie so etwas wie <strong>Layout</strong> .  Es kann als Dokumentfunktion eines Strukturelements bezeichnet werden.  Wichtig ist eine reine Funktion. </p><br><p>  Stellen Sie sich ein Beispiel mit einer Karte vor, die einen Kopf, einen Körper und einen Keller hat.  Es wurde bereits erwähnt, dass die Komponenten nicht bestellt sind, d.h.  Wenn wir die Komponenten während des Betriebs ein- und ausschalten, werden sie jedes Mal in einer neuen Reihenfolge angezeigt.  Mal sehen, wie das durch das Layout gelöst wird: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orderedByKeyLayout</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, type, props, components</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(type, props, components.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a.key - b.key).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.render())) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">$header</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">$content</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">$footer</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">layout</span></span>: orderedByKeyLayout <span class="hljs-comment"><span class="hljs-comment">//     })</span></span></code> </pre> <br><p>  Das Layout ermöglicht es Ihnen, die sogenannten zu konfigurieren  Das Host-Element, dem die Komponente zugeordnet ist, und ihre untergeordneten <em>Elemente</em> ( <em>Elemente</em> und <em>Komponenten</em> ).  Normalerweise reicht auch ein Standardlayout aus, aber in einigen Fällen erfordert das Layout das Vorhandensein von Wrapper-Elementen (z. B. für Raster) oder die Zuweisung spezieller Klassen, die wir nicht auf die Ebene der Komponenten anwenden möchten. </p><br><h3 id="schepotka-reaktivnosti">  Eine Prise Reaktivität </h3><br><p>  Nachdem wir die Struktur der Komponenten deklariert und gezeichnet haben, erhalten wir einen Status, der einem bestimmten Datensatz entspricht.  Als nächstes müssen wir die vielen Datensätze und die Reaktion auf ihre Änderung beschreiben. </p><br><p>  Beim Arbeiten mit Daten haben mir zwei Dinge nicht gefallen: </p><br><ul><li>  Immunität.  Eine gute Sache, um Änderungen im Auge zu behalten, ist die Versionierung für die Armen, die sich hervorragend für primitive und flache Objekte eignet.  Sobald jedoch die Struktur komplexer wird und die Anzahl der Investitionen zunimmt, wird es schwierig, die Immunität eines komplexen Objekts aufrechtzuerhalten. </li><li>  Substitution.  Wenn ich ein Objekt in das Data Warehouse lege, kann ich auf meine Anfrage hin eine Kopie davon oder ein anderes Objekt oder einen Proxy im Allgemeinen zurückgeben, das / der strukturelle Ähnlichkeiten aufweist. </li></ul><br><p>  Ich wollte ein Repository, das sich wie unveränderlich verhält, aber darin veränderbare Daten enthält, die auch die Persistenz der Links aufrechterhalten.  Im Idealfall sieht das so aus: Ich erstelle ein Repository, schreibe ein leeres Objekt hinein, beginne mit der Eingabe von Daten aus dem Antragsformular und nach dem Klicken auf die Schaltfläche "Senden" erhalte ich dasselbe Objekt (verlinke dasselbe!) Mit den ausgefüllten Eigenschaften.  Ich nenne diesen Fall ideal, da es nicht oft vorkommt, dass das Speichermodell mit dem Präsentationsmodell übereinstimmt. </p><br><p>  Eine weitere Aufgabe, die gelöst werden muss, besteht darin, Daten aus dem Speicher an die Strukturelemente zu liefern.  Auch hier werden wir nichts erfinden und den Ansatz der Verbindung zu einem gemeinsamen <strong>Kontext verwenden</strong> .  Im Fall von Chorda haben wir keinen Zugriff auf den Kontext selbst, sondern nur auf dessen Anzeige, <strong>den Scope</strong> .  Darüber hinaus ist der Bereich der Komponente der Kontext für ihre untergeordneten Komponenten.  Dieser Ansatz ermöglicht es Ihnen, verwandte Daten auf jeder Ebene unserer Anwendung einzugrenzen, zu erweitern oder zu ersetzen, und diese Änderungen werden isoliert. </p><br><p>  Ein Beispiel für die Verteilung von Kontextdaten über einen Komponentenbaum: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-comment"><span class="hljs-comment">//     scope: { drink: 'Coffee' }, $component1: { scope: { cups: 2 }, $content: { $myDrink: { //      ,    drinkChanged: function (v) { //    drink   text this.opt('text', v) } }, $numCups: { cupsChanged: function (v) { this.opt('text', v + ' cups') } } } }, $component2: { scope: { drink: 'Tea' //      drink }, drinkChanged: function (v) { //    drink   text this.opt('text', v) } } }) //    // &lt;div&gt; // &lt;div&gt; // &lt;div&gt; // &lt;div&gt;Coffee&lt;/div&gt; // &lt;div&gt;2 cups&lt;/div&gt; // &lt;/div&gt; // &lt;/div&gt; // &lt;div&gt;Tea&lt;/div&gt; // &lt;/div&gt;</span></span></code> </pre><br><p>  Am schwierigsten zu verstehen ist, dass jede Komponente ihren eigenen Kontext hat und nicht den, der ganz oben in der Struktur deklariert ist, wie wir es normalerweise bei der Arbeit mit Vorlagen tun. </p><br><h3 id="chto-tam-bylo-naschet-peregruzki-opciy">  Was ist mit der Überladung von Optionen? </h3><br><p>  Sicherlich haben Sie es mit einer Situation zu tun, in der eine große Komponente vorhanden ist und eine kleine verschachtelte Komponente irgendwo tief im Inneren geändert werden muss.  Sie sagen, dass Granulierung und Zusammensetzung hier helfen sollten.  Außerdem müssen Komponenten und Architektur sofort entworfen werden.  Die Situation wird sehr traurig, wenn die große Komponente nicht Ihnen gehört, sondern Teil einer Bibliothek ist, die von einem anderen Team oder sogar einer unabhängigen Community entwickelt wurde.  Was wäre, wenn sie Änderungen an der Basiskomponente vornehmen könnten, auch wenn sie ursprünglich nicht geplant waren? </p><br><p>  Normalerweise werden Komponenten in Bibliotheken als Klassen entworfen und können dann als Grundlage für die Erstellung neuer Komponenten verwendet werden.  Aber hier ist ein kleines Feature versteckt, das ich nie gemocht habe: Manchmal erstellen wir eine Klasse, um sie nur an einem einzigen Ort anzuwenden.  Es ist seltsam.  Zum Beispiel bin ich es gewohnt, Klassen zum Schreiben zu verwenden, Beziehungen zwischen Gruppen von Objekten aufzubauen und sie nicht zu verwenden, um das Zerlegungsproblem zu lösen. </p><br><p>  Mal sehen, wie Klassen mit der Konfiguration in Chorda arbeiten. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      class Card extends Html { config () { return { css: 'box', $header: {}, $content: {}, $footer: {} } } } const html = new Html({ css: 'panel', $card: { as: Card, $header: { //       title $title: { css: 'title', text: 'Card title' } } } })</span></span></code> </pre> <br><p>  Ich mag diese Option mehr als das Erstellen einer speziellen TitledCard-Klasse, die nur einmal verwendet wird.  Und wenn Sie einen Teil der Optionen nutzen möchten, können Sie den Verunreinigungsmechanismus verwenden.  Nun, niemand hat Object.assign abgebrochen. </p><br><p>  In Chorda ist eine Klasse im Wesentlichen ein Container für die Konfiguration und spielt die Rolle einer besonderen Art von Verunreinigung. </p><br><h3 id="pochemu-esche-odin-freymvork">  Warum ein anderes Framework? </h3><br><p>  Ich wiederhole, dass es meiner Meinung nach mehr um das Denken und Erleben als um Technologie geht.  Meine Gewohnheiten und DX verlangten Deklarativität in JS, die ich in anderen Lösungen nicht finden konnte.  Aber die Implementierung eines Features brachte neue mit sich, und nach einer Weile passten sie einfach nicht mehr in den Rahmen einer Spezialbibliothek. </p><br><p>  Derzeit befindet sich Chorda in der aktiven Entwicklung.  Die Hauptrichtungen sind bereits sichtbar, aber die Details ändern sich ständig. </p><br><p>  Vielen Dank für das Lesen bis zum Ende.  Ich würde mich über Bewertungen freuen. </p><br><h3 id="gde-mozhno-posmotret">  Wo kann ich sehen </h3><br><p>  <a href="https://eliace.github.io/chorda-docs/">Die Dokumentation</a> </p><br><p>  <a href="https://github.com/eliace/chorda/tree/master/packages/chorda-core">GitHub-Quellen</a> </p><br><p>  <a href="https://codepen.io/collection/DkGzvo">CodePen Beispiele</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480856/">https://habr.com/ru/post/de480856/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480838/index.html">SQL-Abfragen sind schnell. Teil 1</a></li>
<li><a href="../de480840/index.html">Cyberangriffe auf hydroakustische Systeme: Mythen und Realität</a></li>
<li><a href="../de480844/index.html">Habr Quest {concept}</a></li>
<li><a href="../de480848/index.html">Bausätze und Konstrukteure für Einsteiger zwischen 6 und 10 Jahren. Was ist im Handel erhältlich</a></li>
<li><a href="../de480852/index.html">Schnelle Entwicklung von Webanwendungen auf Vaadin und Spring Boot</a></li>
<li><a href="../de480858/index.html">Starten Sie Linux in einem Browser - der jor1k-Emulator hilft (mit integriertem Monkey Island, Doom und Frontier Elite II)</a></li>
<li><a href="../de480860/index.html">Theorie des Rostschutzes</a></li>
<li><a href="../de480866/index.html">Eine neue Ära der Webentwicklung oder "alles ist schon da"</a></li>
<li><a href="../de480870/index.html">Jahrzehntelange Ergebnisse</a></li>
<li><a href="../de480872/index.html">Intel hat eine Sicherheitslücke geschlossen, die vor sechs Monaten gemeldet wurde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>