<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¦ ğŸ˜¶ ğŸ›ŒğŸ¿ SNMP + Java-ä¸ªäººç»éªŒã€‚ ç¼–å†™MIBæ–‡ä»¶è§£æå™¨ ğŸ¾ ğŸ‘†ğŸ» ğŸ˜¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SNMPå¹¶ä¸æ˜¯æœ€ç”¨æˆ·å‹å¥½çš„åè®®ï¼šMIBæ–‡ä»¶å¤ªé•¿ä¸”ä»¤äººå›°æƒ‘ï¼Œå¹¶ä¸”OIDç®€ç›´æ— æ³•è®°ä½ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨Javaä¸­ä½¿ç”¨SNMPï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ ä¾‹å¦‚ï¼Œç¼–å†™è‡ªåŠ¨æµ‹è¯•ä»¥æ£€æŸ¥SNMPæœåŠ¡å™¨APIã€‚ 

 é€šè¿‡åå¤è¯•éªŒï¼Œå¦‚æœå…³äºè¯¥ä¸»é¢˜çš„ä¿¡æ¯å¾ˆå°‘ï¼Œæˆ‘ä»¬ä»ç„¶æƒ³å‡ºäº†å¦‚ä½•ä½¿Javaå’ŒSNMPæˆä¸ºæœ‹å‹ã€‚ 

 åœ¨æœ¬ç³»åˆ—æ–‡ç« ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SNMP + Java-ä¸ªäººç»éªŒã€‚ ç¼–å†™MIBæ–‡ä»¶è§£æå™¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427267/">  SNMPå¹¶ä¸æ˜¯æœ€ç”¨æˆ·å‹å¥½çš„åè®®ï¼šMIBæ–‡ä»¶å¤ªé•¿ä¸”ä»¤äººå›°æƒ‘ï¼Œå¹¶ä¸”OIDç®€ç›´æ— æ³•è®°ä½ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨Javaä¸­ä½¿ç”¨SNMPï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ ä¾‹å¦‚ï¼Œç¼–å†™è‡ªåŠ¨æµ‹è¯•ä»¥æ£€æŸ¥SNMPæœåŠ¡å™¨APIã€‚ <br><br> é€šè¿‡åå¤è¯•éªŒï¼Œå¦‚æœå…³äºè¯¥ä¸»é¢˜çš„ä¿¡æ¯å¾ˆå°‘ï¼Œæˆ‘ä»¬ä»ç„¶æƒ³å‡ºäº†å¦‚ä½•ä½¿Javaå’ŒSNMPæˆä¸ºæœ‹å‹ã€‚ <br><br> åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘å°†å°è¯•åˆ†äº«è¯¥åè®®è·å¾—çš„ç»éªŒã€‚ è¯¥ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« å°†ä¸“é—¨ä»‹ç»Javaä¸­MIBæ–‡ä»¶è§£æå™¨çš„å®ç°ã€‚ åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†è®¨è®ºç¼–å†™SNMPå®¢æˆ·ç«¯ã€‚ åœ¨ç¬¬ä¸‰éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€ä¸ªä½¿ç”¨ä¹¦é¢åº“çš„çœŸå®ç¤ºä¾‹ï¼šè‡ªåŠ¨æµ‹è¯•ä»¥é€šè¿‡SNMPéªŒè¯ä¸è®¾å¤‡çš„äº¤äº’ã€‚ <br><br><img src="https://habrastorage.org/webt/tv/lq/ai/tvlqaihbpnaqtlie8wr7hulxyhg.jpeg"><br><a name="habracut"></a><br><h2> å‚èµ›ä½œå“ </h2><br> è¿™ä¸€åˆ‡éƒ½å§‹äºç¼–å†™è‡ªæˆ‘æµ‹è¯•ä»¥é€šè¿‡SNMPéªŒè¯éŸ³é¢‘è§†é¢‘è®°å½•å™¨çš„æ“ä½œçš„ä»»åŠ¡ã€‚ ä½¿æƒ…å†µå¤æ‚åŒ–çš„æ˜¯ï¼Œåœ¨Javaä¸­ä¸SNMPäº¤äº’çš„ä¿¡æ¯å¹¶ä¸å¤šï¼Œå°¤å…¶æ˜¯åœ¨Internetçš„ä¿„è¯­éƒ¨åˆ†ã€‚ å½“ç„¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Cï¼ƒæˆ–Pythonã€‚ ä½†æ˜¯åœ¨Cï¼ƒä¸­ï¼Œåè®®æƒ…å†µä¸Javaä¸­ä¸€æ ·å¤æ‚ã€‚  pythonä¸­æœ‰å‡ ä¸ªä¸é”™çš„åº“ï¼Œä½†æ˜¯æˆ‘ä»¬å·²ç»æœ‰äº†Javaå¯¹è¯¥è®¾å¤‡çš„REST APIè‡ªåŠ¨æµ‹è¯•çš„ç°æˆåŸºç¡€ç»“æ„ã€‚ <br><br> ä¸ä»»ä½•å…¶ä»–ç½‘ç»œé€šä¿¡åè®®ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦SNMPå®¢æˆ·ç«¯æ¥å¤„ç†å„ç§ç±»å‹çš„è¯·æ±‚ã€‚ è‡ªåŠ¨æµ‹è¯•åº”è¯¥èƒ½å¤ŸéªŒè¯å¯¹æ ‡é‡å’Œè¡¨å‚æ•°çš„GETå’ŒSETè¯·æ±‚æ˜¯å¦æˆåŠŸã€‚ å¯¹äºè¡¨ï¼Œå¦‚æœè¡¨æœ¬èº«å…è®¸è¿›è¡Œè¿™äº›æ“ä½œï¼Œåˆ™è¿˜éœ€è¦èƒ½å¤ŸéªŒè¯è®°å½•çš„æ·»åŠ å’Œåˆ é™¤ã€‚ <br><br> ä½†æ˜¯é™¤äº†å®¢æˆ·ç«¯ä¹‹å¤–ï¼Œè¯¥åº“è¿˜å¿…é¡»åŒ…å«ä¸€ä¸ªç”¨äºå¤„ç†MIBæ–‡ä»¶çš„ç±»ã€‚ æ­¤ç±»åº”èƒ½å¤Ÿè§£æMIBæ–‡ä»¶ä»¥è·å¾—æ•°æ®ç±»å‹ï¼Œå¯æ¥å—å€¼çš„è¾¹ç•Œç­‰ï¼Œä»¥å…ç¡¬ç¼–ç æ€»æ˜¯å¯ä»¥æ›´æ”¹çš„å†…å®¹ã€‚ <br><br> åœ¨å¯»æ‰¾é€‚ç”¨äºJavaçš„åº“æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æ‰¾åˆ°å¯ä»¥åŒæ—¶å¤„ç†è¯·æ±‚å’ŒMIBæ–‡ä»¶çš„åº“ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ä¸¤ä¸ªä¸åŒçš„åº“ã€‚ å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œé€‰æ‹©å¹¿æ³›ä½¿ç”¨çš„org.snmp4j.snmp4jï¼ˆhttps://www.snmp4j.orgï¼‰ä¼¼ä¹æ˜¯åˆä¹é€»è¾‘çš„ï¼Œå¯¹äºMIBæ–‡ä»¶çš„è§£æå™¨ï¼Œé€‰æ‹©æ˜¯å¯¹ä¸å¤ªçŸ¥åçš„net.percederberg.mibbleåº“ï¼ˆhttpsï¼š// wwwã€‚ mibble.orgï¼‰ã€‚ å¦‚æœä½¿ç”¨snmp4jçš„é€‰æ‹©æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œé‚£ä¹ˆé€‰æ‹©mibbleæ˜¯ä¸ºäº†è·å¾—è¶³å¤Ÿè¯¦ç»†ï¼ˆå¸¦æœ‰è‹±è¯­ï¼‰æ–‡æ¡£å’Œç¤ºä¾‹çš„å¯ç”¨æ€§ã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚ <br><br><h2> ç¼–å†™MIBæ–‡ä»¶è§£æå™¨ </h2><br> æ›¾ç»çœ‹è¿‡MIBæ–‡ä»¶çš„æ¯ä¸ªäººéƒ½çŸ¥é“è¿™å¾ˆç—›è‹¦ã€‚ è®©æˆ‘ä»¬å°è¯•åœ¨ä¸€ä¸ªç®€å•çš„è§£æå™¨çš„å¸®åŠ©ä¸‹è§£å†³æ­¤é—®é¢˜ï¼Œè¯¥è§£æå™¨å°†æå¤§åœ°æ–¹ä¾¿ä»æ–‡ä»¶ä¸­æœç´¢ä¿¡æ¯ï¼Œå¹¶å°†å…¶å‡å°‘ä¸ºè°ƒç”¨ç‰¹å®šæ–¹æ³•ã€‚ <br><br> è¿™æ ·çš„è§£æå™¨å¯ä»¥ç”¨ä½œå¤„ç†MIBæ–‡ä»¶çš„å•ç‹¬å®ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥åŒ…å«åœ¨SNMPä¸‹çš„ä»»ä½•å…¶ä»–é¡¹ç›®ä¸­ï¼Œä¾‹å¦‚ï¼Œåœ¨ç¼–å†™SNMPå®¢æˆ·ç«¯æˆ–æµ‹è¯•è‡ªåŠ¨åŒ–æ—¶ã€‚ <br><br><h4> é¡¹ç›®å‡†å¤‡ </h4><br> ä¸ºäº†ä¾¿äºç»„è£…ï¼Œæˆ‘ä»¬ä½¿ç”¨Mavenã€‚ å–å†³äºæ·»åŠ çš„net.percederberg.mibbleåº“ï¼ˆhttps://www.mibble.orgï¼‰ï¼Œè¿™å°†ä½¿æˆ‘ä»¬æ›´è½»æ¾åœ°ä½¿ç”¨MIBæ–‡ä»¶ï¼š <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>net.percederberg.mibble<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mibble<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.9.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> ç”±äºå®ƒä¸åœ¨ä¸­å¤®Mavenå­˜å‚¨åº“ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°pom.xmlä¸­ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repositories</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>opennms<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>OpenNMS<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span>http://repo.opennms.org/maven2/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repositories</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> å¦‚æœä½¿ç”¨Mavenæ­£ç¡®ç»„è£…äº†é¡¹ç›®ï¼Œåˆ™ä¸€åˆ‡å‡†å¤‡å°±ç»ªã€‚ å‰©ä¸‹çš„åªæ˜¯åˆ›å»ºä¸€ä¸ªè§£æå™¨ç±»ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºMIBParserï¼‰å¹¶å¯¼å…¥æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼Œå³ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> net.percederberg.mibble.*;</code> </pre> <br><h4> ä¸‹è½½å¹¶éªŒè¯MIBæ–‡ä»¶ </h4><br> åœ¨è¯¥ç±»å†…ï¼Œå°†åªæœ‰ä¸€ä¸ªå­—æ®µ-ä¸€ä¸ªnet.percederberg.mibble.Mibç±»å‹çš„å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ä¸‹è½½çš„MIBæ–‡ä»¶ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Mib mib;</code> </pre><br> è¦ä¸Šä¼ æ–‡ä»¶ï¼Œæˆ‘ä»¬ç¼–å†™æ­¤æ–¹æ³•ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Mib </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadMib</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MibLoaderException, IOException </span></span>{ MibLoader loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MibLoader(); Mib mib; file = file.getAbsoluteFile(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { loader.addDir(file.getParentFile()); mib = loader.load(file); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MibLoaderException e) { e.getLog().printTo(System.err); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> e; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { e.printStackTrace(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> e; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mib; }</code> </pre><br>  net.percederberg.mibble.MIBLoaderç±»ä¼šéªŒè¯æˆ‘ä»¬å°è¯•åŠ è½½çš„æ–‡ä»¶ï¼Œå¹¶åœ¨å‘ç°ä»»ä½•é”™è¯¯ï¼ˆåŒ…æ‹¬ä»å…¶ä»–MIBæ–‡ä»¶å¯¼å…¥çš„é”™è¯¯ï¼‰â€‹â€‹æ—¶æŠ›å‡ºnet.percederberg.mibble.MibLoaderExceptionå¼‚å¸¸ã€‚ä¸è¦ä½äºåŒä¸€ç›®å½•ä¸­æˆ–ä¸åŒ…å«å¯¼å…¥çš„MIBå­—ç¬¦ã€‚ <br><br> åœ¨loadMibæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ•è·äº†æ‰€æœ‰å¼‚å¸¸ï¼Œå°†å…¶å†™å…¥æ—¥å¿—å¹¶è¿›ä¸€æ­¥è½¬å‘ï¼Œå› ä¸º åœ¨æ­¤é˜¶æ®µï¼Œæ— æ³•ç»§ç»­å·¥ä½œ-è¯¥æ–‡ä»¶æ— æ•ˆã€‚ <br><br> æˆ‘ä»¬åœ¨è§£æå™¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ä¹¦é¢æ–¹æ³•ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MIBParser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> MibLoaderException, IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!file.exists()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileNotFoundException(<span class="hljs-string"><span class="hljs-string">"File not found in location: "</span></span> + file.getAbsolutePath()); mib = loadMib(file.getAbsoluteFile()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!mib.isLoaded()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MibLoaderException(file, <span class="hljs-string"><span class="hljs-string">"Not loaded."</span></span>); }</code> </pre><br> å¦‚æœæ–‡ä»¶å·²æˆåŠŸä¸‹è½½å¹¶è§£æï¼Œè¯·ç»§ç»­å·¥ä½œã€‚ <br><br><h4> ä»MIBæ–‡ä»¶æ£€ç´¢ä¿¡æ¯çš„æ–¹æ³• </h4><br> ä½¿ç”¨net.percederberg.mibble.Mibç±»çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ†åˆ«é€šè¿‡è°ƒç”¨getSymbolï¼ˆå­—ç¬¦ä¸²åç§°ï¼‰æˆ–getSymbolByOidï¼ˆå­—ç¬¦ä¸²oidï¼‰æ–¹æ³•ï¼Œé€šè¿‡åç§°æˆ–OIDæœç´¢MIBæ–‡ä»¶çš„å„ä¸ªå­—ç¬¦ã€‚ è¿™äº›æ–¹æ³•è¿”å›net.percederberg.mibble.MibSymbolå¯¹è±¡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¯¥æ–¹æ³•æ¥è·å–æœ‰å…³ç‰¹å®šMIBç¬¦å·çš„å¿…è¦ä¿¡æ¯ã€‚ <br><br> è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„writeæ–¹æ³•å¼€å§‹ï¼Œè¯¥æ–¹æ³•ç”¨äºé€šè¿‡ç¬¦å·çš„OIDè·å–ç¬¦å·çš„åç§°ï¼Œåä¹‹ï¼Œé€šè¿‡åç§°è·å–OIDï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String oid)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mib.getSymbolByOid(oid).getName(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ String oid = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; MibSymbol s = mib.getSymbol(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> MibValueSymbol) { oid = ((MibValueSymbol) s).getValue().toString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((MibValueSymbol) s).isScalar()) oid = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(oid).append(<span class="hljs-number"><span class="hljs-number">0</span></span>).toDottedString(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> oid; }</code> </pre><br> ä¹Ÿè®¸è¿™äº›æ˜¯æˆ‘éœ€è¦ä½¿ç”¨çš„ç‰¹å®šMIBæ–‡ä»¶çš„åŠŸèƒ½ï¼Œä½†æ˜¯ç”±äºæŸäº›åŸå› ï¼Œæ ‡é‡å‚æ•°è¿”å›çš„OIDæœ€ç»ˆä¸å¸¦é›¶ï¼Œå› æ­¤å°†ä»£ç æ·»åŠ åˆ°è·å–OIDçš„æ–¹æ³•ä¸­ï¼Œå¦‚æœMIBè¯¥å­—ç¬¦æ˜¯æ ‡é‡ï¼Œå®ƒåªæ˜¯ä½¿ç”¨net.percederberg.mibble.OIDç±»ä¸­çš„appendï¼ˆint indexï¼‰æ–¹æ³•å°†â€œ .0â€æ·»åŠ åˆ°æ¥æ”¶çš„OIDä¸­ã€‚ å¦‚æœå®ƒå¯¹æ‚¨æ²¡æœ‰å¸®åŠ©ï¼Œé‚£ä¹ˆæ­å–œæ‚¨ï¼š) <br><br> ä¸ºäº†è·å¾—ç¬¦å·ä¸Šçš„å…¶ä½™æ•°æ®ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ï¼Œå³è·å¾—å¯¹è±¡net.percederberg.mibble.snmp.SnmpObjectTypeï¼Œè¯¥å¯¹è±¡åŒ…å«æœ‰å…³ä»ä¸­è·å–ç¬¦å·çš„MIBç¬¦å·çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> SnmpObjectType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSnmpObjectType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MibSymbol symbol)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (symbol <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> MibValueSymbol) { MibType type = ((MibValueSymbol) symbol).getType(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> SnmpObjectType) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (SnmpObjectType) type; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br> ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è·å–MIBç¬¦å·çš„ç±»å‹ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ MibSymbol s = mib.getSymbol(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getSnmpObjectType(s).getSyntax().getReferenceSymbol() == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getSnmpObjectType(s).getSyntax().getName(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getSnmpObjectType(s).getSyntax().getReferenceSymbol().getName(); }</code> </pre><br> æœ‰ä¸¤ç§è·å–ç±»å‹çš„æ–¹æ³•ï¼Œå› ä¸º å¯¹äºåŸºæœ¬ç±»å‹ï¼Œç¬¬ä¸€ä¸ªé€‰é¡¹æœ‰æ•ˆï¼š <br><br><pre> <code class="java hljs">getSnmpObjectType(s).getSyntax().getName();</code> </pre><br> å¯¹äºè¿›å£çš„ï¼Œç¬¬äºŒä¸ªï¼š <br><br><pre> <code class="java hljs">getSnmpObjectType(s).getSyntax().getReferenceSymbol().getName();</code> </pre><br> æ‚¨å¯ä»¥è·å–è§’è‰²çš„è®¿é—®çº§åˆ«ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAccess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ MibSymbol s = mib.getSymbol(name); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getSnmpObjectType(s).getAccess().toString(); }</code> </pre><br> æ•°å­—å‚æ•°çš„æœ€å°æœ‰æ•ˆå€¼ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDigitMinValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ MibSymbol s = mib.getSymbol(name); String syntax = getSnmpObjectType(s).getSyntax().toString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (syntax.contains(<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; Pattern p = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"(-?\\d+)..(-?\\d+)"</span></span>); Matcher m = p.matcher(syntax); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m.find()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Integer.parseInt(m.group(<span class="hljs-number"><span class="hljs-number">1</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br> æ•°å­—å‚æ•°çš„æœ€å¤§å…è®¸å€¼ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDigitMaxValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ MibSymbol s = mib.getSymbol(name); String syntax = getSnmpObjectType(s).getSyntax().toString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (syntax.contains(<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; Pattern p = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"(-?\\d+)..(-?\\d+)"</span></span>); Matcher m = p.matcher(syntax); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m.find()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Integer.parseInt(m.group(<span class="hljs-number"><span class="hljs-number">2</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br> å…è®¸çš„æœ€å°å­—ç¬¦ä¸²é•¿åº¦ï¼ˆå–å†³äºå­—ç¬¦ä¸²çš„ç±»å‹ï¼‰ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStringMinLength</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ MibSymbol s = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mib.getSymbol(name); String syntax = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getSnmpObjectType(s).getSyntax().toString(); Pattern p = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"(-?\\d+)..(-?\\d+)"</span></span>); Matcher m = p.matcher(syntax); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> syntax.contains(<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>) &amp;&amp; m.find()?Integer.valueOf(Integer.parseInt(m.group(<span class="hljs-number"><span class="hljs-number">1</span></span>))):<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br> å…è®¸çš„æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼ˆå–å†³äºå­—ç¬¦ä¸²çš„ç±»å‹ï¼‰ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStringMaxLength</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ MibSymbol s = mib.getSymbol(name); String syntax = getSnmpObjectType(s).getSyntax().toString(); Pattern p = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"(-?\\d+)..(-?\\d+)"</span></span>); Matcher m = p.matcher(syntax); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (syntax.contains(<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>) &amp;&amp; m.find()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Integer.parseInt(m.group(<span class="hljs-number"><span class="hljs-number">2</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br> æ‚¨è¿˜å¯ä»¥é€šè¿‡å…¶åç§°è·å–è¡¨ä¸­æ‰€æœ‰åˆ—çš„åç§°ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ArrayList&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTableColumnNames</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String tableName)</span></span></span><span class="hljs-function"> </span></span>{ ArrayList&lt;String&gt; mibSymbolNamesList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); MibValueSymbol table = (MibValueSymbol) mib.findSymbol(tableName, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (table.isTable() &amp;&amp; table.getChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).isTableRow()) { MibValueSymbol[] symbols = table.getChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).getChildren(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MibValueSymbol mvs : symbols) { mibSymbolNamesList.add(mvs.getName()); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mibSymbolNamesList; }</code> </pre><br> é¦–å…ˆï¼Œä»¥ä¸€ç§æ ‡å‡†æ–¹å¼ï¼Œé€šè¿‡åç§°è·å¾—ä¸€ä¸ªMIBç¬¦å·ï¼š <br><br><pre> <code class="java hljs">MibValueSymbol table = (MibValueSymbol) mib.findSymbol(tableName, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);</code> </pre><br> ç„¶åæˆ‘ä»¬æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªè¡¨ï¼Œå¹¶ä¸”å­MIBç¬¦å·æ˜¯å¦æ˜¯è¯¥è¡¨çš„ä¸€è¡Œï¼Œå¦‚æœæ¡ä»¶è¿”å›trueï¼Œåˆ™åœ¨å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬éå†è¡¨è¡Œçš„å­é¡¹ï¼Œå¹¶å°†å…ƒç´ åç§°æ·»åŠ åˆ°ç»“æœæ•°ç»„ä¸­ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (table.isTable() &amp;&amp; table.getChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).isTableRow()) { MibValueSymbol[] symbols = table.getChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).getChildren(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MibValueSymbol mvs : symbols) { mibSymbolNamesList.add(mvs.getName()); } }</code> </pre><br><h2> æ€»ç»“ </h2><br> è¿™äº›æ–¹æ³•è¶³ä»¥ä»MIBæ–‡ä»¶ä¸­è·å–æ¯ä¸ªç‰¹å®šå­—ç¬¦çš„ä»»ä½•ä¿¡æ¯ï¼Œè€Œä»…çŸ¥é“å…¶åç§°ã€‚ ä¾‹å¦‚ï¼Œç¼–å†™SNMPå®¢æˆ·ç«¯æ—¶ï¼Œå¯ä»¥åœ¨å…¶ä¸­åŒ…å«è¿™æ ·çš„è§£æå™¨ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯æ–¹æ³•ä¸æ¥å—OIDï¼Œä½†æ¥å—MIBç¬¦å·åã€‚ è¿™å°†æé«˜ä»£ç çš„å¯é æ€§ï¼Œå› ä¸º  OIDä¸­çš„é”™å­—å¯èƒ½ä¸ä¼šå¯¼è‡´æˆ‘ä»¬è¦å¼•ç”¨çš„å­—ç¬¦ã€‚ è€Œä¸”æ²¡æœ‰OID-æ²¡æœ‰é—®é¢˜ã€‚ <br><br> åŠ ä¸Šæ˜¯ä»£ç çš„å¯è¯»æ€§ï¼Œè¿™æ„å‘³ç€ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ å¦‚æœä»£ç ä»¥äººåæ“ä½œï¼Œåˆ™æ›´å®¹æ˜“ç†è§£é¡¹ç›®çš„æœ¬è´¨ã€‚ <br><br> å¦ä¸€ä¸ªåº”ç”¨æ˜¯æµ‹è¯•è‡ªåŠ¨åŒ–ã€‚ åœ¨æµ‹è¯•æ•°æ®ä¸­ï¼Œå¯ä»¥ä»MIBæ–‡ä»¶ä¸­åŠ¨æ€è·å–æ•°å€¼å‚æ•°çš„è¾¹ç•Œå€¼ã€‚ å› æ­¤ï¼Œå¦‚æœæ–°ç‰ˆæœ¬çš„å·²æµ‹è¯•ç»„ä»¶ä¸­æŸäº›MIBç¬¦å·çš„è¾¹ç•Œå€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æ— éœ€æ›´æ”¹è‡ªåŠ¨æµ‹è¯•ä»£ç ã€‚ <br><br> é€šå¸¸ï¼Œä½¿ç”¨è§£æå™¨æ¥å¤„ç†MIBæ–‡ä»¶å˜å¾—æ›´åŠ æ„‰å¿«ï¼Œå¹¶ä¸”å®ƒä»¬ä¸å†æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN427267/">https://habr.com/ru/post/zh-CN427267/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN427255/index.html">Cowon D2ï¼šéŸ³ä¹é•¿å¯¿</a></li>
<li><a href="../zh-CN427257/index.html">å¡æ¢…éš†Â·å…‹é›·æ ¼ï¼ˆCameron Craigï¼‰ï¼š10å¹´çš„è‹¹æœå…¬å…³ç®¡ç†ç»éªŒæ•™è®­</a></li>
<li><a href="../zh-CN427259/index.html">å›¾çµæµ‹è¯•çœŸæ­£æ£€æŸ¥çš„å†…å®¹</a></li>
<li><a href="../zh-CN427263/index.html">æˆä¸ºå®‰å…¨å¿è€…ï¼šç½‘ç»œç ”è®¨ä¼šè®°å½•å’Œå¥–é‡‘çº§åˆ«</a></li>
<li><a href="../zh-CN427265/index.html">Protobuffersé”™è¯¯</a></li>
<li><a href="../zh-CN427269/index.html">äº”å¹´åçš„Google OKRè§†é¢‘-å›é¡¾å®æ–½OKRçš„Google Venturesç»éªŒï¼ˆ2012-2017ï¼‰</a></li>
<li><a href="../zh-CN427271/index.html">ä½¿ç”¨æœºå™¨ç¿»è¯‘çš„å†å²å’Œç»éªŒã€‚ Yandexè®²åº§</a></li>
<li><a href="../zh-CN427273/index.html">äººå·¥æ™ºèƒ½å¯ä»¥ä½¿åº„å®¶å¤±å»å·¥ä½œå—ï¼Ÿ</a></li>
<li><a href="../zh-CN427275/index.html">äº’è”ç½‘ä¿¡æ¯æ¶æ„ç¬¬3éƒ¨åˆ†</a></li>
<li><a href="../zh-CN427277/index.html">åœ¨ç´ çš„åˆ†å¸ƒä¸­å‘ç°äº†è¡å°„å›¾ï¼Œç±»ä¼¼äºå‡†æ™¶ä½“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>