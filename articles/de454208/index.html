<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ üó≥Ô∏è üîù RISC-V von Grund auf neu ü§µüèΩ üëÅ‚Äçüó® ü§üüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel untersuchen wir verschiedene Konzepte auf niedriger Ebene (Kompilierung und Layout, primitive Laufzeiten, Assembler usw.) anhand des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RISC-V von Grund auf neu</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454208/">  In diesem Artikel untersuchen wir verschiedene Konzepte auf niedriger Ebene (Kompilierung und Layout, primitive Laufzeiten, Assembler usw.) anhand des Prismas der RISC-V-Architektur und ihres √ñkosystems.  Ich bin selbst Webentwickler, mache nichts bei der Arbeit, aber es ist sehr interessant f√ºr mich, hier kommt der Artikel her!  Begleite mich auf dieser hektischen Reise in die Tiefen des Chaos auf niedriger Ebene. <br><br>  Lassen Sie uns zun√§chst ein wenig √ºber RISC-V und die Bedeutung dieser Architektur sprechen, die RISC-V-Toolchain einrichten und ein einfaches C-Programm auf emulierter RISC-V-Hardware ausf√ºhren. <br><a name="habracut"></a><br><h1>  Inhalt </h1><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was ist RISC-V?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konfigurieren der QEMU- und RISC-V-Tools</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hallo RISC-V!</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Naiver Ansatz</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorhang aufheben -v</a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Durchsuchen Sie unseren Stapel</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Layout</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">H√∂r auf!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><s>Hammertime!</s></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laufzeit!</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Debug aber jetzt echt</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was weiter?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Optional</a> </li></ol><br><a name="1"></a><h1>  Was ist RISC-V? </h1><br>  RISC-V ist eine kostenlose Befehlssatzarchitektur.  Das Projekt entstand 2010 an der University of California in Berkeley.  Eine wichtige Rolle f√ºr den Erfolg spielte die Offenheit des Codes und die Nutzungsfreiheit, die sich stark von vielen anderen Architekturen unterschied.  Nehmen Sie ARM: Um einen kompatiblen Prozessor zu erstellen, m√ºssen Sie eine Vorabgeb√ºhr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von 1 bis 10 Millionen US-Dollar sowie Lizenzgeb√ºhren von 0,5 bis 2% auf den Umsatz zahlen</a> .  Ein kostenloses und offenes Modell macht RISC-V f√ºr viele zu einer attraktiven Option, einschlie√ülich Startups, die keine Lizenz f√ºr ARM oder einen anderen Prozessor bezahlen k√∂nnen, f√ºr akademische Forscher und (offensichtlich) f√ºr die Open Source-Community. <br><br>  Das schnelle Wachstum der Popularit√§t von RISC-V blieb nicht unbemerkt.  ARM <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hat eine Site gestartet</a> , die (ziemlich erfolglos) versucht hat, die angeblichen Vorteile von ARM gegen√ºber RISC-V hervorzuheben (die Site ist bereits geschlossen).  Das RISC-V-Projekt wird von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vielen gro√üen Unternehmen unterst√ºtzt</a> , darunter Google, Nvidia und Western Digital. <br><br><a name="2"></a><h1>  Konfigurieren der QEMU- und RISC-V-Tools </h1><br>  Wir k√∂nnen den Code erst auf dem RISC-V-Prozessor ausf√ºhren, wenn wir die Umgebung eingerichtet haben.  Gl√ºcklicherweise erfordert dies keinen physischen RISC-V-Prozessor, stattdessen nehmen wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qemu</a> .  Befolgen Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anweisungen</a> zur Installation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ihres Betriebssystems</a> .  Ich habe MacOS, also geben Sie einfach einen Befehl ein: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># also available via MacPorts - `sudo port install qemu` brew install qemu</span></span></code> </pre> <br>  Praktischerweise wird <code>qemu</code> mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehreren betriebsbereiten Maschinen</a> <code>qemu-system-riscv32 -machine</code> (siehe die <code>qemu-system-riscv32 -machine</code> ). <br><br>  Installieren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie als</a> N√§chstes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenOCD</a> f√ºr die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tools</a> RISC-V und RISC-V. <br><br>  Laden Sie hier vorgefertigte Baugruppen der RISC-V OpenOCD- und RISC-V-Tools herunter. <br>  Wir extrahieren die Dateien in jedes Verzeichnis, ich habe es <code>~/usys/riscv</code> .  Denken Sie daran f√ºr die zuk√ºnftige Verwendung. <br><br><pre> <code class="bash hljs">mkdir -p ~/usys/riscv <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Downloads cp openocd-&lt;date&gt;-&lt;platform&gt;.tar.gz ~/usys/riscv cp riscv64-unknown-elf-gcc-&lt;date&gt;-&lt;platform&gt;.tar.gz ~/usys/riscv <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/usys/riscv tar -xvf openocd-&lt;date&gt;-&lt;platform&gt;.tar.gz tar -xvf riscv64-unknown-elf-gcc-&lt;date&gt;-&lt;platform&gt;.tar.gz</code> </pre> <br>  <code>RISCV_OPENOCD_PATH</code> Sie die Umgebungsvariablen <code>RISCV_OPENOCD_PATH</code> und <code>RISCV_PATH</code> so ein, dass andere Programme unsere <code>RISCV_PATH</code> finden k√∂nnen.  Dies kann je nach Betriebssystem und Shell unterschiedlich aussehen: Ich habe die Pfade zur <code>~/.zshenv</code> . <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># I put these two exports directly in my ~/.zshenv file - you may have to do something else. export RISCV_OPENOCD_PATH="$HOME/usys/riscv/openocd-&lt;date&gt;-&lt;version&gt;" export RISCV_PATH="$HOME/usys/riscv/riscv64-unknown-elf-gcc-&lt;date&gt;-&lt;version&gt;" # Reload .zshenv with our new environment variables. Restarting your shell will have a similar effect. source ~/.zshenv</span></span></code> </pre> <br>  Erstellen Sie in <code>/usr/local/bin</code> einen symbolischen Link f√ºr diese ausf√ºhrbare Datei, damit Sie sie jederzeit ausf√ºhren k√∂nnen, ohne den vollst√§ndigen Pfad zu <code>~/usys/riscv/riscv64-unknown-elf-gcc-&lt;date&gt;-&lt;version&gt;/bin/riscv64-unknown-elf-gcc</code> . <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Symbolically link our gcc executable into /usr/local/bin. Repeat this process for any other executables you want to quickly access. ln -s ~/usys/riscv/riscv64-unknown-elf-gcc-8.2.0-&lt;date&gt;-&lt;version&gt;/bin/riscv64-unknown-elf-gcc /usr/local/bin</span></span></code> </pre> <br>  Und voila, wir haben ein funktionierendes RISC-V-Toolkit!  Alle unsere ausf√ºhrbaren Dateien, wie z. B. <code>riscv64-unknown-elf-gcc</code> , <code>riscv64-unknown-elf-gdb</code> , <code>riscv64-unknown-elf-ld</code> und andere, befinden sich in <code>~/usys/riscv/riscv64-unknown-elf-gcc-&lt;date&gt;-&lt;version&gt;/bin/</code> . <br><br><a name="3"></a><h1>  Hallo RISC-V! </h1><br>  <i>26. Mai 2019 Patch:</i> <i><br><br></i>  <i>Leider <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">funktioniert</a> das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Freedom-e-SDK-Programm</a> "Hallo Welt" in QEMU aufgrund eines Fehlers in RISC-V QEMU nicht mehr.</i>  <i>Es wurde ein Patch ver√∂ffentlicht, um dieses Problem zu l√∂sen. √úberspringen Sie diesen Abschnitt jedoch vorerst.</i>  <i>Dieses Programm wird in den folgenden Abschnitten des Artikels nicht ben√∂tigt.</i>  <i>Ich verfolge die Situation und aktualisiere den Artikel, nachdem ich den Fehler behoben habe.</i> <i><br><br></i>  <i>Weitere Informationen finden Sie in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Kommentar</a> .</i> <br><br>  Lassen Sie uns mit den eingerichteten Tools das einfache RISC-V-Programm ausf√ºhren.  Beginnen wir mit dem Klonen des SiFive <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Freedom-e-SDK-</a> Repositorys: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/wherever/you/want/to/<span class="hljs-built_in"><span class="hljs-built_in">clone</span></span>/this git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> --recursive https://github.com/sifive/freedom<span class="hljs-_"><span class="hljs-_">-e</span></span>-sdk.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> freedom<span class="hljs-_"><span class="hljs-_">-e</span></span>-sdk</code> </pre> <br>  Beginnen wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">traditionell</a> mit dem Programm "Hallo Welt" aus dem <code>freedom-e-sdk</code> Repository.  Wir verwenden das vorgefertigte <code>Makefile</code> , das sie zum Kompilieren dieses Programms im Debug-Modus bereitstellen: <br><br><pre> <code class="bash hljs">make PROGRAM=hello TARGET=sifive-hifive1 CONFIGURATION=debug software</code> </pre> <br>  Und in QEMU ausf√ºhren: <br><br><pre> <code class="bash hljs">qemu-system-riscv32 -nographic -machine sifive_e -kernel software/hello/debug/hello.elf Hello, World!</code> </pre> <br>  Dies ist ein guter Anfang.  Sie k√∂nnen andere Beispiele von <code>freedom-e-sdk</code> .  Danach werden wir schreiben und versuchen, unser eigenes Programm in C zu debuggen. <br><br><h1>  Naiver Ansatz </h1><br>  Beginnen wir mit einem einfachen Programm, das unendlich zwei Zahlen hinzuf√ºgt. <br><br><pre> <code class="cpp hljs">cat add.<span class="hljs-function"><span class="hljs-function">c </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">12</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c = a + b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  Wir m√∂chten dieses Programm ausf√ºhren und als erstes m√ºssen wir es f√ºr den RISC-V-Prozessor kompilieren. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># -O0 to disable all optimizations. Without this, GCC might optimize # away our infinite addition since the result 'c' is never used. # -g to tell GCC to preserve debug info in our executable. riscv64-unknown-elf-gcc add.c -O0 -g</span></span></code> </pre> <br>  Dadurch wird die Datei <code>a.out</code> erstellt, f√ºr die <code>gcc</code> standardm√§√üig ausf√ºhrbare Dateien verwendet.  F√ºhren Sie nun diese Datei in <code>qemu</code> : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># -machine tells QEMU which among our list of available machines we want to # run our executable against. Run qemu-system-riscv64 -machine help to list # all available machines. # -m is the amount of memory to allocate to our virtual machine. # -gdb tcp::1234 tells QEMU to also start a GDB server on localhost:1234 where # TCP is the means of communication. # -kernel tells QEMU what we're looking to run, even if our executable isn't # exactly a "kernel". qemu-system-riscv64 -machine virt -m 128M -gdb tcp::1234 -kernel a.out</span></span></code> </pre> <br>  Wir haben uns f√ºr die <code>virt</code> Maschine entschieden, mit der <code>riscv-qemu</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">urspr√ºnglich</a> <code>riscv-qemu</code> . <br><br>  Nachdem unser Programm in QEMU mit dem GDB-Server auf <code>localhost:1234</code> , stellen wir √ºber ein separates Terminal eine Verbindung mit dem RISC-V GDB-Client her: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># --tui gives us a (t)extual (ui) for our GDB session. # While we can start GDB without any arguments, specifying 'a.out' tells GDB # to load debug symbols from that file for the newly created session. riscv64-unknown-elf-gdb --tui a.out</span></span></code> </pre> <br>  Und wir sind in GDB! <br><br><pre>  Diese GDB wurde als "--host = x86_64-apple-darwin17.7.0 --target = riscv64-unknown-elf" konfiguriert.  ‚îÇ
 Geben Sie "show configuration" f√ºr Konfigurationsdetails ein.  ‚îÇ
 Anweisungen zur Fehlerberichterstattung finden Sie unter: ‚îÇ
 &lt;http://www.gnu.org/software/gdb/bugs/&gt;.  ‚îÇ
 Das GDB-Handbuch und andere Dokumentationsressourcen finden Sie online unter: ‚îÇ
     &lt;http://www.gnu.org/software/gdb/documentation/&gt;.  ‚îÇ
                                                                                                       ‚îÇ
 Um Hilfe zu erhalten, geben Sie "help" ein.  ‚îÇ
 Geben Sie "apropos word" ein, um nach Befehlen zu suchen, die sich auf "word" beziehen ... ‚îÇ
 Lesen von Symbolen aus a.out ... ‚îÇ
 (gdb) </pre><br>  Wir k√∂nnen versuchen, die Befehle <code>run</code> oder <code>start</code> f√ºr die ausf√ºhrbare Datei <code>a.out</code> in GDB auszuf√ºhren, aber im Moment funktioniert dies aus einem offensichtlichen Grund nicht.  Wir haben das Programm als <code>riscv64-unknown-elf-gcc</code> kompiliert, daher sollte der Host auf einer <code>riscv64</code> Architektur ausgef√ºhrt werden. <br><br>  Aber es gibt einen Ausweg!  Diese Situation ist einer der Hauptgr√ºnde f√ºr die Existenz des Client-Server-Modells von GDB.  Wir k√∂nnen die ausf√ºhrbare Datei <code>riscv64-unknown-elf-gdb</code> verwenden und statt sie auf dem Host zu starten, ein Remote-Ziel (GDB-Server) angeben.  Wie Sie sich erinnern, haben wir gerade <code>riscv-qemu</code> und uns angewiesen, den GDB-Server auf <code>localhost:1234</code> zu starten <code>localhost:1234</code> .  Stellen Sie einfach eine Verbindung zu diesem Server her: <br><br><pre>  (gdb) Zielfernbedienung: 1234 ‚îÇ
 Remote-Debugging mit: 1234 </pre><br>  Jetzt k√∂nnen Sie einige Haltepunkte setzen: <br><br><pre> <code class="bash hljs">(gdb) b main Breakpoint 1 at 0x1018e: file add.c, line 2. (gdb) b 5 <span class="hljs-comment"><span class="hljs-comment"># this is the line within the forever-while loop. int c = a + b; Breakpoint 2 at 0x1019a: file add.c, line 5.</span></span></code> </pre> <br>  Geben Sie abschlie√üend GDB <code>continue</code> (abgek√ºrzter Befehl <code>c</code> ) an, bis wir den Haltepunkt erreichen: <br><br><pre> <code class="bash hljs">(gdb) c Continuing.</code> </pre> <br>  Sie werden schnell feststellen, dass der Prozess in keiner Weise endet.  Das ist seltsam ... sollten wir nicht sofort den Haltepunkt <code>b 5</code> ?  Was ist passiert? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a53/834/210/a538342106336ef7ed1b8f9e53a47f48.png"><br><br>  Hier sehen Sie einige Probleme: <br><br><ol><li>  Die Text-Benutzeroberfl√§che kann die Quelle nicht finden.  Die Schnittstelle sollte unseren Code und alle in der N√§he befindlichen Haltepunkte anzeigen. <br></li><li>  GDB sieht die aktuelle Ausf√ºhrungszeile ( <code>L??</code> ) nicht und zeigt den Z√§hler 0x0 ( <code>PC: 0x0</code> ) an. <br></li><li>  Einige Texte in der Eingabezeile, die in ihrer Gesamtheit so aussehen: <code>0x0000000000000000 in ?? ()</code> <code>0x0000000000000000 in ?? ()</code> </li></ol><br>  In Kombination mit der Tatsache, dass wir den Haltepunkt nicht erreichen k√∂nnen, zeigen diese Indikatoren an: Wir haben <i>etwas</i> falsch gemacht.  Aber was? <br><br><a name="5"></a><h1>  Vorhang aufheben -v </h1><br>  Um zu verstehen, was passiert, m√ºssen Sie einen Schritt zur√ºcktreten und dar√ºber sprechen, wie unser einfaches C-Programm unter der Haube tats√§chlich funktioniert.  Die Hauptfunktion macht eine einfache Erg√§nzung, aber was ist es wirklich?  Warum sollte es <code>main</code> hei√üen, nicht <code>origin</code> oder <code>begin</code> ?  Gem√§√ü der Konvention werden alle ausf√ºhrbaren Dateien mit der <code>main</code> ausgef√ºhrt, aber welche Magie bietet dieses Verhalten? <br><br>  Um diese Fragen zu beantworten, wiederholen wir unser GCC-Team mit dem Flag <code>-v</code> , um eine detailliertere Ausgabe dessen zu erhalten, was tats√§chlich passiert. <br><br><pre> <code class="bash hljs">riscv64-unknown-elf-gcc add.c -O0 -g -v</code> </pre> <br>  Die Ausgabe ist gro√ü, daher wird nicht die gesamte Liste angezeigt.  Es ist wichtig zu beachten, dass GCC zwar formal ein Compiler ist, aber standardm√§√üig auch kompiliert wird (um sich auf Kompilierung und Assembly zu beschr√§nken, m√ºssen Sie das Flag <code>-c</code> angeben).  Warum ist das wichtig?  Schauen Sie sich das Snippet aus der detaillierten Ausgabe von <code>gcc</code> : <br><br><pre>  # Der eigentliche Befehl `gcc -v` gibt vollst√§ndige Pfade aus, aber diese sind ziemlich
 # long, also tun Sie so, als ob diese Variablen existieren.
 # $ RV_GCC_BIN_PATH = / Users / twilcock / usys / riscv / riscv64-unknown-elf-gcc- &lt;Datum&gt; - &lt;Version&gt; / bin /
 # $ RV_GCC_LIB_PATH = $ RV_GCC_BIN_PATH /../ lib / gcc / riscv64-unknown-elf / 8.2.0<font></font>
<font></font>
 $ RV_GCC_BIN_PATH /../ libexec / gcc / riscv64-unknown-elf / 8.2.0 / collect2 \
   ... abgeschnitten ... 
   $ RV_GCC_LIB_PATH /../../../../ riscv64-unknown-elf / lib / rv64imafdc / lp64d / crt0.o \ 
   $ RV_GCC_LIB_PATH / riscv64-unknown-elf / 8.2.0 / rv64imafdc / lp64d / crtbegin.o \
   -lgcc --start-group -lc -lgloss --end-group -lgcc \ 
   $ RV_GCC_LIB_PATH / rv64imafdc / lp64d / crtend.o
   ... abgeschnitten ...
 COLLECT_GCC_OPTIONS = '- O0' '-g' '-v' '-march = rv64imafdc' '-mabi = lp64d' </pre><br>  Ich verstehe, dass dies auch in Kurzform viel ist, also lassen Sie mich das erkl√§ren.  In der ersten Zeile f√ºhrt <code>gcc</code> das Programm <code>collect2</code> aus und √ºbergibt die Argumente <code>crt0.o</code> , <code>crtbegin.o</code> und <code>crtend.o</code> sowie die <code>-lgcc</code> und <code>--start-group</code> .  Die Beschreibung von collect2 finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> : Kurz gesagt, collect2 organisiert beim Start verschiedene Initialisierungsfunktionen und erstellt das Layout in einem oder mehreren Durchg√§ngen. <br><br>  Daher kompiliert GCC mehrere <code>crt</code> Dateien mit unserem Code.  Wie Sie sich <code>crt</code> k√∂nnen, bedeutet <code>crt</code> "C-Laufzeit".  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier wird</a> detailliert beschrieben, wof√ºr jedes <code>crt</code> , aber wir sind an <code>crt</code> interessiert, das eine wichtige Sache tut: <br><br><blockquote>  <i>"Es wird erwartet, dass dieses [crt0] -Objekt das Zeichen <code>_start</code> , das den Bootstrap des Programms angibt."</i> </blockquote><br>  Das Wesen des ‚ÄûBootstraps‚Äú ist plattformabh√§ngig, beinhaltet jedoch normalerweise wichtige Aufgaben wie das Einrichten eines Stapelrahmens, das √úbergeben von Befehlszeilenargumenten und das Aufrufen von <code>main</code> .  Ja, wir haben <i>endlich</i> die Antwort auf die Frage gefunden: Es ist <code>_start</code> der unsere Hauptfunktion aufruft! <br><br><a name="6"></a><h1>  Durchsuchen Sie unseren Stapel </h1><br>  Wir haben ein R√§tsel gel√∂st, aber wie bringt uns dies dem urspr√ºnglichen Ziel n√§her - ein einfaches C-Programm in <code>gdb</code> auszuf√ºhren?  Es bleibt noch einige Probleme zu l√∂sen: Das erste h√§ngt damit zusammen, wie <code>crt0</code> unseren Stack konfiguriert. <br><br>  Wie wir oben gesehen haben, verwendet <code>gcc</code> standardm√§√üig die <code>crt0</code> .  Standardparameter werden basierend auf mehreren Faktoren ausgew√§hlt: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zieldriplett</a> entsprechend der Struktur des <code>machine-vendor-operatingsystem</code> .  Wir haben es <code>riscv64-unknown-elf</code> <br></li><li>  <code>rv64imafdc</code> , <code>rv64imafdc</code> <br></li><li>  Ziel ABI, <code>lp64d</code> </li></ul><br>  Normalerweise funktioniert alles einwandfrei, aber nicht f√ºr jeden RISC-V-Prozessor.  Wie bereits erw√§hnt, besteht eine der Aufgaben von <code>crt0</code> darin, den Stack zu konfigurieren.  Aber er wei√ü nicht, wo genau der Stack f√ºr unsere CPU ( <code>-machine</code> ) sein soll?  Er kann es nicht ohne unsere Hilfe tun. <br><br>  Im <code>qemu-system-riscv64 -machine virt -m 128M -gdb tcp::1234 -kernel a.out</code> wir die <code>virt</code> Maschine verwendet.  Gl√ºcklicherweise macht es <code>qemu</code> einfach, Maschineninformationen in einen <code>dtb</code> Dump (Ger√§tebaum-Blob) zu <code>dtb</code> . <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Go to the ~/usys/riscv folder we created before and create a new dir # for our machine information. cd ~/usys/riscv &amp;&amp; mkdir machines cd machines # Use qemu to dump info about the 'virt' machine in dtb (device tree blob) # format. # The data in this file represents hardware components of a given # machine / device / board. qemu-system-riscv64 -machine virt -machine dumpdtb=riscv64-virt.dtb</span></span></code> </pre> <br>  Dtb-Daten sind schwer zu lesen, da es sich im Grunde genommen um ein Bin√§rformat handelt. Es gibt jedoch ein <code>dtc</code> Befehlszeilenprogramm (Ger√§tebaum-Compiler), mit dem die Datei in etwas besser lesbares konvertiert werden kann. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># I'm running MacOS, so I use Homebrew to install this. If you're # running another OS you may need to do something else. brew install dtc # Convert our .dtb into a human-readable .dts (device tree source) file. dtc -I dtb -O dts -o riscv64-virt.dts riscv64-virt.dtb</span></span></code> </pre> <br>  Die Ausgabedatei ist <code>riscv64-virt.dts</code> , wo wir viele interessante Informationen √ºber <code>virt</code> : die Anzahl der verf√ºgbaren Prozessorkerne, den Speicherort verschiedener Peripherieger√§te wie UART, den Speicherort des internen Speichers (RAM).  Der Stapel sollte sich in diesem Speicher befinden, suchen Sie ihn also mit <code>grep</code> : <br><br><pre> <code class="bash hljs">grep memory riscv64-virt.dts -A 3 memory@80000000 { device_type = <span class="hljs-string"><span class="hljs-string">"memory"</span></span>; reg = &lt;0x00 0x80000000 0x00 0x8000000&gt;; };</code> </pre> <br>  Wie Sie sehen k√∂nnen, hat dieser Knoten 'Speicher' als <code>device_type</code> .  Anscheinend haben wir gefunden, wonach wir gesucht haben.  Durch die Werte in <code>reg = &lt;...&gt; ;</code>  Sie k√∂nnen bestimmen, wo die Speicherbank beginnt und wie lang sie ist. <br><br>  In <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Devicetree-Spezifikation sehen wir</a> , dass die <code>reg</code> Syntax eine beliebige Anzahl von Paaren ist <code>(base_address, length)</code> .  Es gibt jedoch vier Bedeutungen in <code>reg</code> .  Seltsam, reichen nicht zwei Werte f√ºr eine Speicherbank aus? <br><br>  Wiederum ergibt sich aus der Ger√§tebaumspezifikation (Suche nach der <code>reg</code> Eigenschaft), dass die Anzahl der <code>&lt;u32&gt;</code> -Zellen zum Angeben der Adresse und L√§nge durch die Eigenschaften <code>#address-cells</code> und <code>#size-cells</code> <code>&lt;u32&gt;</code> im √ºbergeordneten Knoten (oder im Knoten selbst) bestimmt wird.  Diese Werte sind in unserem Speicherknoten nicht angegeben, und der √ºbergeordnete Speicherknoten ist einfach das Stammverzeichnis der Datei.  Schauen wir uns diese Werte an: <br><br><pre> <code class="plaintext hljs">head -n8 riscv64-virt.dts /dts-v1/; / { #address-cells = &lt;0x02&gt;; #size-cells = &lt;0x02&gt;; compatible = "riscv-virtio"; model = "riscv-virtio,qemu";</code> </pre> <br>  Es stellt sich heraus, dass sowohl die Adresse als auch die L√§nge zwei 32-Bit-Werte erfordern.  Dies bedeutet, dass mit <code>reg = &lt;0x00 0x80000000 0x00 0x8000000&gt;;</code>  Unser Speicher beginnt <code> 0x00 + 0x80000000 (0x80000000)</code> und belegt <code>0x00 + 0x8000000 (0x8000000)</code> Bytes, d. <code>0x88000000</code> endet bei <code>0x88000000</code> , was 128 Megabyte entspricht. <br><br><a name="7"></a><h1>  Layout </h1><br>  Mit <code>qemu</code> und <code>dtc</code> wir die RAM-Adressen in der virtuellen Virtuellen Maschine gefunden.  Wir wissen auch, dass <code>gcc</code> standardm√§√üig <code>crt0</code> , ohne den Stack nach Bedarf zu konfigurieren.  Aber wie kann man diese Informationen verwenden, um das Programm schlie√ülich auszuf√ºhren und zu debuggen? <br><br>  Da <code>crt0</code> nicht zu uns passt, gibt es eine offensichtliche Option: Schreiben Sie Ihren eigenen Code und komponieren Sie ihn dann mit der Objektdatei, die wir nach dem Kompilieren unseres einfachen Programms erhalten haben.  Unser <code>crt0</code> muss wissen, wo die Oberseite des Stapels beginnt, um ihn richtig zu initialisieren.  Wir k√∂nnten <code>crt0</code> Wert <code>0x80000000</code> direkt in <code>crt0</code> <code>0x80000000</code> , aber dies ist keine sehr geeignete L√∂sung, da √Ñnderungen ber√ºcksichtigt werden, die m√∂glicherweise in Zukunft erforderlich sind.  Was ist, wenn wir eine andere CPU wie <code>sifive_e</code> mit unterschiedlichen Eigenschaften im Emulator verwenden <code>sifive_e</code> ? <br><br>  Gl√ºcklicherweise sind wir nicht die Ersten, die diese Frage stellen, und es gibt bereits eine gute L√∂sung.  Mit dem GNU <code>ld</code> Linker <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">k√∂nnen Sie das in</a> unserem <code>crt0</code> verf√ºgbare <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zeichen definieren</a> .  Wir k√∂nnen das <code>__stack_top</code> Symbol definieren, das f√ºr verschiedene Prozessoren geeignet ist. <br><br>  Anstatt Ihre eigene Linker-Datei von Grund auf neu zu schreiben, ist es sinnvoll, das Standard-Skript mit <code>ld</code> und es ein wenig zu √§ndern, um zus√§tzliche Zeichen zu unterst√ºtzen.  Was ist ein Linker-Skript?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=http://www.scoberlin.de/content/media/">Hier ist eine gute Beschreibung</a> : <br><br><blockquote>  <i>Der Hauptzweck des Linkerskripts besteht darin, zu beschreiben, wie Dateibereiche in Eingabe und Ausgabe √ºbereinstimmen, und das Layout des Speichers der Ausgabedatei zu steuern.</i> </blockquote><br>  Wenn Sie dies wissen, kopieren wir das Standard-Linker-Skript <code>riscv64-unknown-elf-ld</code> in eine neue Datei: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/usys/riscv <span class="hljs-comment"><span class="hljs-comment"># Make a new dir for custom linker scripts out RISC-V CPUs may require. mkdir ld &amp;&amp; cd ld # Copy the default linker script into riscv64-virt.ld riscv64-unknown-elf-ld --verbose &gt; riscv64-virt.ld</span></span></code> </pre> <br>  Diese Datei enth√§lt <i>viele</i> interessante Informationen, viel mehr als wir in diesem Artikel diskutieren k√∂nnen.  Die detaillierte Ausgabe mit der <code>--Verbose</code> enth√§lt Informationen zur <code>ld</code> Version, unterst√ºtzten Architekturen und vielem mehr.  Das ist alles gut zu wissen, aber eine solche Syntax ist im Linker-Skript nicht akzeptabel. √ñffnen Sie daher einen Texteditor und l√∂schen Sie alles √úberfl√ºssige aus der Datei. <br><br><pre>  vim riscv64-virt.ld<font></font>
<font></font>
 # Entfernen Sie alles √ºber und einschlie√ülich der Zeile ==============
 GNU ld (GNU Binutils) 2.32
   Unterst√ºtzte Emulationen:
    elf64lriscv
    elf32lriscv
 mit internem Linker-Skript:
 ==================================================
 / * Skript f√ºr -z combreloc: Kombiniere und sortiere Reloc-Abschnitte * /
 / * Copyright (C) 2014-2019 Freie Software Foundation, Inc.
    Kopieren und Verteilen dieses Skripts mit oder ohne √Ñnderung,
    sind in jedem Medium ohne Lizenzgeb√ºhr zul√§ssig, sofern das Urheberrecht besteht
    Bekanntmachung und diese Bekanntmachung bleiben erhalten.  * /
 OUTPUT_FORMAT ("elf64-littleriscv", "elf64-littleriscv",
	       "elf64-littleriscv")
 ... Rest des Linker-Skripts ... </pre><br>  F√ºhren Sie danach den Befehl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MEMORY aus,</a> um manuell zu bestimmen, wo sich <code>__stack_top</code> befindet.  Suchen Sie die Zeile, die mit <code>OUTPUT_ARCH(riscv)</code> beginnt. Sie sollte sich oben in der Datei befinden, und f√ºgen Sie den Befehl <code>MEMORY</code> darunter hinzu: <br><br><pre> <code class="plaintext hljs">OUTPUT_ARCH(riscv) /* &gt;&gt;&gt; Our addition. &lt;&lt;&lt; */ MEMORY { /* qemu-system-risc64 virt machine */ RAM (rwx) : ORIGIN = 0x80000000, LENGTH = 128M } /* &gt;&gt;&gt; End of our addition. &lt;&lt;&lt; */ ENTRY(_start)</code> </pre> <br>  Wir haben einen Speicherblock namens <code>RAM</code> , f√ºr den das Lesen ( <code>r</code> ), Schreiben ( <code>w</code> ) und Speichern von ausf√ºhrbarem Code ( <code>x</code> ) zul√§ssig ist. <br><br>  Gro√üartig, wir haben ein Speicherlayout definiert, das den Spezifikationen unserer <code>virt</code> RISC-V-Maschine entspricht.  Jetzt k√∂nnen Sie es verwenden.  Wir wollen unseren Stack in Erinnerung behalten. <br><br>  Sie m√ºssen das Zeichen <code>__stack_top</code> definieren.  √ñffnen Sie Ihr Linker-Skript ( <code>riscv64-virt.ld</code> ) in einem Texteditor und f√ºgen Sie einige Zeilen hinzu: <br><br><pre> <code class="plaintext hljs">SECTIONS { /* Read-only sections, merged into text segment: */ PROVIDE (__executable_start = SEGMENT_START("text-segment", 0x10000)); . = SEGMENT_START("text-segment", 0x10000) + SIZEOF_HEADERS; /* &gt;&gt;&gt; Our addition. &lt;&lt;&lt; */ PROVIDE(__stack_top = ORIGIN(RAM) + LENGTH(RAM)); /* &gt;&gt;&gt; End of our addition. &lt;&lt;&lt; */ .interp : { *(.interp) } .note.gnu.build-id : { *(.note.gnu.build-id) }</code> </pre> <br>  Wie Sie sehen k√∂nnen, definieren wir <code>__stack_top</code> mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Befehl PROVIDE</a> .  Auf das Symbol kann von jedem Programm aus <code>__stack_top</code> , das diesem Skript zugeordnet ist (vorausgesetzt, das Programm selbst bestimmt nichts mit dem Namen <code>__stack_top</code> ).  Setzen Sie <code>__stack_top</code> auf <code>ORIGIN(RAM)</code> .  Wir wissen, dass dieser Wert <code>0x80000000</code> plus <code>LENGTH(RAM)</code> , was 128 Megabyte ( <code>0x8000000</code> Bytes) entspricht.  Dies bedeutet, dass unser <code>__stack_top</code> auf <code>0x88000000</code> . <br><br>  Der K√ºrze halber werde ich hier nicht die gesamte Linker-Datei <a href="">auflisten</a> , Sie k√∂nnen sie <a href="">hier</a> anzeigen. <br><br><a name="8"></a><h1>  H√∂r auf!  <s>Hammertime!</s>  Laufzeit! </h1><br>  Jetzt haben wir alles, was wir brauchen, um unsere eigene C-Laufzeit zu erstellen. Eigentlich ist dies eine ziemlich einfache Aufgabe, hier ist die gesamte Datei <code>crt0.s</code> : <br><br><pre> <code class="plaintext hljs">.section .init, "ax" .global _start _start: .cfi_startproc .cfi_undefined ra .option push .option norelax la gp, __global_pointer$ .option pop la sp, __stack_top add s0, sp, zero jal zero, main .cfi_endproc .end</code> </pre> <br>  Zieht sofort eine gro√üe Anzahl von Zeilen an, die mit einem Punkt beginnen.  Dies ist eine Datei f√ºr Assembler <code>as</code> .  Zeilen mit Punkten werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Assembler-Anweisungen genannt</a> : Sie liefern Informationen f√ºr Assembler.  Dies ist kein ausf√ºhrbarer Code wie RISC-V-Assembler-Anweisungen wie <code>jal</code> und <code>add</code> . <br><br>  Lassen Sie uns die Datei Zeile f√ºr Zeile durchgehen.  Wir werden mit verschiedenen Standard-RISC-V-Registern arbeiten. Schauen Sie sich also <a href="">diese Tabelle an</a> , die alle Register und ihren Zweck abdeckt. <br><br><pre> <code class="plaintext hljs">.section .init, "ax"</code> </pre> <br>  Wie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Handbuch des GNU-Assemblers 'as' angegeben,</a> weist diese Zeile den Assembler an, den folgenden Code in den Abschnitt <code>.init</code> , der zugewiesen ( <code>a</code> ) und ausf√ºhrbar ( <code>x</code> ) ist.  Dieser Abschnitt ist eine weitere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">g√§ngige Konvention</a> zum Ausf√ºhren von Code innerhalb des Betriebssystems.  Wir arbeiten mit reiner Hardware ohne Betriebssystem, daher ist eine solche Anweisung in unserem Fall m√∂glicherweise nicht unbedingt erforderlich, aber in jedem Fall ist dies eine gute Praxis. <br><br><pre> <code class="plaintext hljs">.global _start _start:</code> </pre> <br>  <code>.global</code> stellt <code>ld</code> das folgende Zeichen zur Verf√ºgung.  Ohne dies funktioniert der Link nicht, da der <code>ENTRY(_start)</code> im <code>_start</code> auf das Symbol <code>_start</code> als Einstiegspunkt in die ausf√ºhrbare Datei verweist.  Die n√§chste Zeile teilt dem Assembler mit, dass wir mit der Definition des Zeichens <code>_start</code> . <br><br><pre> <code class="plaintext hljs">_start: .cfi_startproc .cfi_undefined ra ...other stuff... .cfi_endproc</code> </pre> <br>  Diese <code>.cfi</code> Anweisungen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">informieren Sie</a> √ºber die Struktur des Frames und dessen Handhabung.  Die <code>.cfi_startproc</code> und <code>.cfi_endproc</code> signalisieren den Beginn und das Ende einer Funktion, und <code>.cfi_undefined ra</code> teilt dem Assembler mit, dass das <code>ra</code> Register vor dem <code>_start</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht auf den</a> darin enthaltenen Wert <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wiederhergestellt werden</a> <code>_start</code> . <br><br><pre> <code class="plaintext hljs">.option push .option norelax la gp, __global_pointer$ .option pop</code> </pre> <br>  Diese <code>.option</code> Anweisungen √§ndern das Verhalten des Assemblers gem√§√ü dem Code, wenn Sie einen bestimmten Satz von Optionen anwenden m√ºssen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier finden Sie eine</a> detaillierte Beschreibung, warum die Verwendung von <code>.option</code> in diesem Segment wichtig ist: <br><br><blockquote>  <i>... da wir m√∂glicherweise die Adressierung von Sequenzen auf k√ºrzere Sequenzen relativ zum GP lockern, sollte die anf√§ngliche Belastung des GP nicht geschw√§cht werden und sollte ungef√§hr so ‚Äã‚Äãaussehen:</i> <i><br><br></i> <pre> <code class="plaintext hljs">.option push .option norelax la gp, __global_pointer$ .option pop</code> </pre> <br>  so dass Sie nach der Entspannung den folgenden Code erhalten: <br><br><pre> <code class="plaintext hljs">auipc gp, %pcrel_hi(__global_pointer$) addi gp, gp, %pcrel_lo(__global_pointer$)</code> </pre> <br>  statt einfach: <br><br><pre> <code class="plaintext hljs">addi gp, gp, 0</code> </pre> </blockquote><br>  Und jetzt der letzte Teil unserer <code>crt0.s</code> : <br><br><pre> <code class="plaintext hljs">_start: ...other stuff... la sp, __stack_top add s0, sp, zero jal zero, main .cfi_endproc .end</code> </pre> <br>  Hier k√∂nnen wir endlich das Symbol <code>__stack_top</code> , an dessen Erstellung wir so hart gearbeitet haben.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der Pseudobefehl</a> <code>la</code> (Ladeadresse) l√§dt den Wert <code>__stack_top</code> in das Register <code>sp</code> (Stapelzeiger) und setzt ihn f√ºr die Verwendung im Rest des Programms. <br><br>  Dann <code>add s0, sp, zero</code> die Werte der Register <code>sp</code> und <code>zero</code> (was eigentlich ein Register <code>x0</code> mit einer harten Referenz auf 0 ist) und <code>s0</code> das Ergebnis in das Register <code>s0</code> .  Dies ist ein <a href="">spezielles Register</a> , das in mehrfacher Hinsicht ungew√∂hnlich ist.  Erstens handelt es sich um ein ‚Äûbest√§ndiges Register‚Äú, das hei√üt, es wird bei Funktionsaufrufen gespeichert.  Zweitens fungiert <code>s0</code> manchmal als Rahmenzeiger, der jedem Funktionsaufruf einen kleinen Platz im Stapel gibt, um die an diese Funktion √ºbergebenen Parameter zu speichern.  Wie Funktionsaufrufe mit den Stapel- und Rahmenzeigern funktionieren, ist ein sehr interessantes Thema, das Sie leicht einem separaten Artikel widmen <code>s0</code> . <code>s0</code> Sie jedoch, dass es in unserer Laufzeit wichtig ist, den Rahmenzeiger <code>s0</code> zu initialisieren. <br><br>  Als n√§chstes sehen wir die <code>jal zero, main</code> .  Hier bedeutet <code>jal</code> springen und verkn√ºpfen.  Der Befehl erwartet Operanden in Form von <code>jal rd (destination register), offset_address</code> .  Funktionell schreibt <code>jal</code> den Wert des n√§chsten Befehls ( <code>pc</code> Register plus vier) in <code>rd</code> und setzt dann das <code>pc</code> Register auf den aktuellen <code>pc</code> Wert plus Offset-Adresse mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorzeichenerweiterung</a> , <code>jal</code> diese Adresse effektiv "aufgerufen" wird. <br><br>  Wie oben erw√§hnt, ist <code>x0</code> eng an den <code>x0</code> 0 gebunden, und das Schreiben darauf ist nutzlos.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher mag es seltsam erscheinen, dass wir ein Register als Zielregister verwenden </font></font><code>zero</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, das die RISC-V-Assembler als Register interpretieren </font></font><code>x0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dies bedeutet schlie√ülich einen bedingungslosen √úbergang zu </font></font><code>offset_address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Warum tun Sie das, weil es in anderen Architekturen eine explizite Anweisung f√ºr einen bedingungslosen √úbergang gibt? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieses seltsame Muster </font></font><code>jal zero, offset_address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist eigentlich eine kluge Optimierung. Die Unterst√ºtzung f√ºr jeden neuen Befehl bedeutet eine Erh√∂hung und folglich eine Erh√∂hung der Kosten des Prozessors. Je einfacher die ISA, desto besser. Anstatt den Befehlsraum mit zwei Befehlen </font></font><code>jal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und zu </font><font style="vertical-align: inherit;">verschmutzen </font></font><code>unconditional jump</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, unterst√ºtzt die RISC-V-Architektur nur </font></font><code>jal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und bedingungslose Spr√ºnge werden durch unterst√ºtzt </font></font><code>jal zero, main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RISC-V verf√ºgt √ºber viele solcher Optimierungen, von denen die meisten in Form von sogenannten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pseudo-Anweisungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vorliegen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Assembler wissen, wie man sie in echte Hardwareanweisungen √ºbersetzt. </font><font style="vertical-align: inherit;">Beispielsweise √ºbersetzen </font></font><code>j offset_address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RISC-V-Assembler </font><font style="vertical-align: inherit;">Pseudobefehle </font><font style="vertical-align: inherit;">f√ºr </font><font style="vertical-align: inherit;">bedingungslose </font><font style="vertical-align: inherit;">Spr√ºnge nach </font></font><code>jal zero, offset_address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eine vollst√§ndige Liste der offiziell unterst√ºtzten Pseudoanweisungen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie in </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">der RISC-V-Spezifikation (Version 2.2)</font></a><font style="vertical-align: inherit;"> .</font></font><br><br><pre> <code class="plaintext hljs">_start: ...other stuff... jal zero, main .cfi_endproc .end</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere letzte Zeile ist die Assembler-Direktive </font></font><code>.end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die einfach das Ende der Datei markiert.</font></font><br><br><a name="9"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Debug aber jetzt echt </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beim Versuch, ein einfaches C-Programm auf einem RISC-V-Prozessor zu debuggen, haben wir viele Probleme gel√∂st. </font><font style="vertical-align: inherit;">Zuerst verwenden </font></font><code>qemu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>dtc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finden Sie unseren Speicher in der virtuellen </font></font><code>virt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RISC-V- </font><font style="vertical-align: inherit;">Maschine </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Anschlie√üend haben wir diese Informationen verwendet, um die Speicherzuordnung in unserer Version des Standardskripts des Linkers manuell zu steuern </font></font><code>riscv64-unknown-elf-ld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sodass wir das Symbol genau bestimmen konnten </font></font><code>__stack_top</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dann haben wir dieses Symbol in unserer eigenen Version verwendet </font></font><code>crt0.s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die unseren Stack und unsere globalen Zeiger einrichtet, und schlie√ülich die Funktion aufgerufen </font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Jetzt k√∂nnen Sie Ihr Ziel erreichen und mit dem Debuggen unseres einfachen Programms in GDB beginnen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denken Sie daran, hier ist das C-Programm selbst:</font></font><br><br><pre> <code class="cpp hljs">cat add.<span class="hljs-function"><span class="hljs-function">c </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">12</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c = a + b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kompilieren und Verkn√ºpfen: </font></font><br><br><pre> <code class="bash hljs">riscv64-unknown-elf-gcc -g -ffreestanding -O0 -Wl,--gc-sections -nostartfiles -nostdlib -nodefaultlibs -Wl,-T,riscv64-virt.ld crt0.s add.c</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier haben wir viel mehr Flaggen als beim letzten Mal angegeben, also gehen wir die durch, die wir vorher nicht beschrieben haben. </font></font><br><br> <code>-ffreestanding</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teilt dem Compiler mit, dass die Standardbibliothek m√∂glicherweise nicht vorhanden ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sodass keine Annahmen √ºber ihre obligatorische Pr√§senz getroffen werden m√ºssen. Dieser Parameter ist nicht erforderlich, wenn die Anwendung auf ihrem Host (im Betriebssystem) gestartet wird. In diesem Fall ist dies jedoch nicht der Fall. Daher ist es wichtig, den Compiler √ºber diese Informationen zu informieren. </font></font><br><br> <code>-Wl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Eine durch Kommas getrennte Liste von Flags, die an den Linker ( </font></font><code>ld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) √ºbergeben werden sollen. Hier </font></font><code>--gc-sections</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bedeutet es "Garbage Collection-Abschnitte" und </font></font><code>ld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird angewiesen, nicht verwendete Abschnitte nach dem Verkn√ºpfen zu entfernen. Flaggen </font></font><code>-nostartfiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>-nostdlib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>-nodefaultlibs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Linker nicht die Standard - </font><font style="vertical-align: inherit;">Systemstart - </font><font style="vertical-align: inherit;">Dateien verarbeiten (zB Standard</font></font><code>crt0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), Standardimplementierungen von System stdlib und standardm√§√üig verkn√ºpften Standardbibliotheken. </font><font style="vertical-align: inherit;">Wir haben ein eigenes Skript </font></font><code>crt0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font><font style="vertical-align: inherit;">einen eigenen </font><font style="vertical-align: inherit;">Linker. Daher ist es wichtig, diese Flags zu √ºbergeben, damit die Standardwerte nicht mit unseren Benutzereinstellungen in Konflikt stehen. </font></font><br><br> <code>-T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt den Pfad zu unserem Linker-Skript an, was in unserem Fall einfach ist </font></font><code>riscv64-virt.ld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Schlie√ülich geben wir die Dateien an, die wir kompilieren, kompilieren und komponieren m√∂chten: </font></font><code>crt0.s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>add.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nach wie vor ist das Ergebnis eine vollst√§ndige und sofort einsatzbereite Datei mit dem Namen </font></font><code>a.out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºhren Sie jetzt unsere h√ºbsche neue brandneue ausf√ºhrbare Datei aus in </font></font><code>qemu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># -S freezes execution of our executable (-kernel) until we explicitly tell # it to start with a 'continue' or 'c' from our gdb client qemu-system-riscv64 -machine virt -m 128M -gdb tcp::1234 -S -kernel a.out</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denken Sie jetzt daran </font></font><code>gdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die Debugging-Symbole f√ºr zu laden </font></font><code>a.out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und mit dem letzten Argument anzugeben:</font></font><br><br><pre> <code class="bash hljs">riscv64-unknown-elf-gdb --tui a.out GNU gdb (GDB) 8.2.90.20190228-git Copyright (C) 2019 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Type <span class="hljs-string"><span class="hljs-string">"show copying"</span></span> and <span class="hljs-string"><span class="hljs-string">"show warranty"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> details. This GDB was configured as <span class="hljs-string"><span class="hljs-string">"--host=x86_64-apple-darwin17.7.0 --target=riscv64-unknown-elf"</span></span>. Type <span class="hljs-string"><span class="hljs-string">"show configuration"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> configuration details. For bug reporting instructions, please see: &lt;http://www.gnu.org/software/gdb/bugs/&gt;. Find the GDB manual and other documentation resources online at: &lt;http://www.gnu.org/software/gdb/documentation/&gt;. For <span class="hljs-built_in"><span class="hljs-built_in">help</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> <span class="hljs-string"><span class="hljs-string">"help"</span></span>. Type <span class="hljs-string"><span class="hljs-string">"apropos word"</span></span> to search <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> commands related to <span class="hljs-string"><span class="hljs-string">"word"</span></span>... Reading symbols from a.out... (gdb)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbinden Sie dann unseren Client </font></font><code>gdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit dem Server </font></font><code>gdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, den wir als Teil des Befehls gestartet haben </font></font><code>qemu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="bash hljs">(gdb) target remote :1234 ‚îÇ Remote debugging using :1234</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setzen Sie einen Haltepunkt in main: </font></font><br><br><pre> <code class="bash hljs">(gdb) b main Breakpoint 1 at 0x8000001e: file add.c, line 2.</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Und starten Sie das Programm: </font></font><br><br><pre> <code class="bash hljs">(gdb) c Continuing. Breakpoint 1, main () at add.c:2</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aus der gegebenen Ausgabe geht hervor, dass wir den Haltepunkt in Zeile 2 erfolgreich erreicht haben! </font><font style="vertical-align: inherit;">Dies ist auch in der Textoberfl√§che sichtbar, schlie√ülich haben wir die richtige Zeile </font></font><code>L</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der Wert </font></font><code>PC:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist </font></font><code>L2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>PC:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>0x8000001e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn Sie alles wie im Artikel beschrieben haben, </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bd8/aa9/78d/bd8aa978df4289f584b5c422cdb6e44c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sieht </font><font style="vertical-align: inherit;">die Ausgabe folgenderma√üen aus: </font><font style="vertical-align: inherit;">Von nun an k√∂nnen Sie sie </font></font><code>gdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wie gewohnt verwenden: </font></font><code>-s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fahren Sie mit der n√§chsten Anweisung fort, </font></font><code>info all-registers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºberpr√ºfen Sie die Werte in den Registern, w√§hrend das Programm ausgef√ºhrt wird usw. Experimentieren Sie zu Ihrem Vergn√ºgen ... wir nat√ºrlich habe viel daf√ºr gearbeitet!</font></font><br><br><a name="10"></a><h1>  Was weiter? </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heute haben wir viel erreicht und hoffentlich viel gelernt! Ich hatte nie einen formellen Plan f√ºr diesen und nachfolgende Artikel, ich folgte einfach dem, was f√ºr mich in jedem Moment am interessantesten war. Daher bin ich mir nicht sicher, was als n√§chstes passieren wird. Besonders gut hat mir das tiefe Eintauchen in die Anleitung gefallen. </font></font><code>jal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielleicht werden wir im n√§chsten Artikel das hier gewonnene Wissen zugrunde legen, es aber durch </font></font><code>add.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein Programm in einem reinen RISC-V-Assembler </font><font style="vertical-align: inherit;">ersetzen </font><font style="vertical-align: inherit;">. Wenn Sie etwas Bestimmtes haben, das Sie sehen m√∂chten oder Fragen haben, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√∂ffnen Sie Tickets</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danke f√ºrs Lesen! Ich hoffe, im n√§chsten Artikel zu treffen!</font></font><br><br><a name="11"></a><h1>  Optional </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Ihnen der Artikel gefallen hat und Sie mehr wissen m√∂chten, lesen Sie die Pr√§sentation von Matt Godbolt mit dem Titel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûBits Between Bits: Wie wir zu main () kommen‚Äú</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von der CppCon2018-Konferenz. </font><font style="vertical-align: inherit;">Sie geht das Thema etwas anders an als wir hier. </font><font style="vertical-align: inherit;">Wirklich guter Vortrag, √ºberzeugen Sie sich selbst!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454208/">https://habr.com/ru/post/de454208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454190/index.html">Was Sie nicht tun m√ºssen, wenn Ihr Telefon gestohlen wird</a></li>
<li><a href="../de454196/index.html">3D-Druck von Elektronik am Beispiel einer Drohne: Dr√§hte und Platinen werden nicht mehr ben√∂tigt</a></li>
<li><a href="../de454198/index.html">Erstellen eines Gradle SpringBoot + Angular-Projekts mit mehreren Modulen in IDEA</a></li>
<li><a href="../de454204/index.html">Verhaltens-Crawlen ist kein Allheilmittel?</a></li>
<li><a href="../de454206/index.html">PHDays 9: AI CTF-Analyse</a></li>
<li><a href="../de454210/index.html">Vergessene Verzauberungen + neues 1C-Bitrix = Spiel zur Kundenmotivation</a></li>
<li><a href="../de454214/index.html">Ich hasse fast alle Software</a></li>
<li><a href="../de454216/index.html">Es wurden Beweise daf√ºr gefunden, dass alle √Ñnderungen eine Mischung aus Ordnung und Zufall sind</a></li>
<li><a href="../de454220/index.html">Zweistelliges Thermometer</a></li>
<li><a href="../de454222/index.html">Aktualisieren Sie das Festplattensubsystem des alten Servers mit dem PCIe 1.0 - 2.0-Bus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>