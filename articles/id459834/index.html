<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🎤 🗓️ 👉🏾 Mendeteksi di C ++ apakah suatu tipe didefinisikan: Memprakarsai hal-hal yang ingin Anda selidiki 🌫️ 🔠 🤠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Terakhir kali , kami menggunakan SFINAE untuk mendeteksi apakah suatu tipe memiliki definisi, dan kami menggunakannya dalam kombinasi dengan if conste...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mendeteksi di C ++ apakah suatu tipe didefinisikan: Memprakarsai hal-hal yang ingin Anda selidiki</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/459834/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Terakhir kali</a> , kami menggunakan SFINAE untuk mendeteksi apakah suatu tipe memiliki definisi, dan kami menggunakannya dalam kombinasi dengan <code>if constexpr</code> dan <code>if constexpr</code> generik sehingga kode dapat menggunakan tipe itu jika didefinisikan, sementara masih diterima oleh kompiler (dan dibuang) ) jika jenisnya tidak ditentukan. <br><br>  Namun, penggunaan kami memiliki beberapa masalah, beberapa gangguan kecil, beberapa lebih membuat frustrasi. <br><br><ul><li>  Anda harus mengatakan <code>struct</code> sepanjang waktu. </li><li>  Jika jenisnya tidak ada, tindakan penamaan itu menyebabkan jenis yang akan disuntikkan ke namespace <i>saat ini</i> , bukan namespace tempat Anda mengharapkan tipe tersebut. </li><li>  Anda harus menggunakan teknik <code>struct</code> dengan nama yang tidak memenuhi syarat.  Anda tidak dapat menggunakannya untuk menyelidiki tipe yang tidak Anda impor ke namespace saat ini. </li></ul><br>  Kami dapat memperbaiki ketiga masalah dengan satu solusi: Memprediksi jenis di namespace yang diinginkan. <br><br><img src="https://habrastorage.org/webt/pn/ng/uf/pnngufu06qzz6g2xqdripu_mfws.jpeg"><a name="habracut"></a><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// awesome.h namespace awesome { // might or might not contain struct special { ... }; } // your code namespace awesome { // ensure declarations for types we // conditionalize on. struct special; }</span></span></code> </pre><br>  Setelah Anda melakukan ini, Anda tidak perlu mengatakan <code>struct</code> karena struct pasti telah dinyatakan.  Penggunaan Anda sebagai parameter tipe templat di <code>call_if_defined</code> tidak akan membuat deklarasi baru, karena sudah dideklarasikan.  Dan karena telah dinyatakan, Anda dapat mengaksesnya melalui nama yang tidak memenuhi syarat, nama namespace lengkapnya, atau apa pun di antaranya.  Juga tipe alias atau tipe dependen.  (Maaf, itu tidak ada di antaranya.) <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> app { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ call_if_defined&lt;awesome::special&gt;([&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>* p) { <span class="hljs-comment"><span class="hljs-comment">// this code is compiled only if "awesome::special" // is defined. Create a local name for "special" // by inferring it from the dummy parameter. using special = std::decay_t&lt;decltype(*p)&gt;; // You can now use the local name "special" to access // the features of "awesome::special". special::do_something(); }); } }</span></span></code> </pre><br>  Bagi mereka yang telah mengikuti seri dari awal, Anda mungkin telah memperhatikan bahwa metode <code>call_if_defined</code> tidak cukup sama dengan versi yang kami tulis sebelumnya.  Versi baru mendukung beberapa parameter tipe dan memanggil lambda hanya jika semua tipe didefinisikan. <br><br>  Mari kita lihat lebih dekat: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> TLambda&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call_if_defined</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TLambda&amp;&amp; lambda)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((... &amp;&amp; is_complete_type_v&lt;T&gt;))</span></span></span><span class="hljs-function"> </span></span>{ lambda(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>)...); } }</code> </pre><br>  Tanda kurung ganda di if constexpr ((...)) terlihat aneh, tapi itu wajib.  Tanda kurung luar diperlukan oleh pernyataan <code>if constexpr</code> , dan tanda kurung bagian dalam diperlukan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ekspresi lipatan</a> .  Ekspresi lipatan diperluas ke <br><br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( (is_complete_type_v&lt;T1&gt; &amp;&amp; is_complete_type_v&lt;T2&gt; &amp;&amp; ... is_complete_type_v&lt;Tn&gt;))</span></span></span></span></code> </pre><br>  Permintaan lambda menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ekspansi paket parameter</a> : <br><br><pre> <code class="cpp hljs"> lambda(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>)...);</code> </pre><br>  Ini berkembang menjadi <br><br><pre> <code class="cpp hljs"> lambda(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T1*&gt;(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T2*&gt;(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>), ..., <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Tn*&gt;(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>));</code> </pre><br>  di mana <code>static_cast&lt;T*&gt;(nullptr)</code> diulangi sekali untuk setiap jenis. <br><br>  Seperti yang saya sebutkan sebelumnya, kita dapat menggunakan fungsi ini untuk memanggil lambda jika <i>semua</i> tipe didefinisikan: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Source </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; source)</span></span></span><span class="hljs-function"> </span></span>{ call_if_defined&lt;special, magic&gt;( [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>* p1, <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>* p2) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> special = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">decay_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(*p1)&gt;; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> magic = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">decay_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(*p2)&gt;; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> s = source.try_get&lt;special&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s) magic::add_magic(s); }); }</code> </pre><br>  C ++ 20 memungkinkan Anda untuk menulis ini sebagai <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Source </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; source)</span></span></span><span class="hljs-function"> </span></span>{ call_if_defined&lt;special, magic&gt;( [&amp;]&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> special, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> magic&gt; (special*, magic*) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> s = source.try_get&lt;special&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s) magic::add_magic(s); }); }</code> </pre><br>  yang memungkinkan Anda memberi nama jenis templat, dengan demikian menghemat kesulitan karena harus mengembalikannya dengan memainkan <code>std::decay_t</code> games. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lain kali</a> , kita akan menggunakan ini sebagai batu loncatan dan memperpanjang polanya. <br><br><hr><br>  <b>Catatan untuk mereka yang tiba di sini melalui mesin pencari</b> : Ini adalah bagian terakhir dari bagian inti dari seri, tetapi masih ada bagian yang akan datang.  Untuk yang tidak sabar, berikut ini hal-hal yang harus disalin-tempel: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> is_type_complete_v = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> is_type_complete_v &lt;T, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">void_t</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(T))&gt;&gt; = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> TLambda&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call_if_defined</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TLambda&amp;&amp; lambda)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((... &amp;&amp; is_complete_type_v&lt;T&gt;))</span></span></span><span class="hljs-function"> </span></span>{ lambda(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>)...); } }</code> </pre> <br><h2>  Omong-omong, kami memiliki lowongan yang keren [Dublin] </h2><br>  Havok telah menjadi yang terdepan dalam inovasi dalam pengembangan game dan 3D interaktif selama lebih dari satu dekade.  Sebagai bagian dari Cognition, tim yang bertanggung jawab atas HoloLens, kami sekarang menggabungkan keahlian itu dengan kekuatan Azure Cloud untuk mengembangkan banyak layanan menarik yang mendorong pengalaman Realita Campuran seperti layanan Azure Remote Rendering yang baru diumumkan.  Kami bersemangat tentang konvergensi teknologi AR, VR, dan cloud untuk memungkinkan terciptanya pengalaman Realita Campuran yang memukau. <br><br>  <b>Bekerja di Havok:</b> <br><br><ul><li>  Anda akan bekerja dalam tim kecil yang berfokus dengan pengembang berbakat </li><li>  Anda akan memiliki kesempatan untuk bekerja dengan teknologi baru pada beragam platform dan perangkat keras terdepan </li><li>  Anda akan berupaya memecahkan masalah teknis yang menantang dengan cakupan luas </li><li>  Anda akan berkolaborasi dengan tim-tim berbakat di seluruh dunia </li></ul><br><h4>  Tanggung jawab </h4><br><ul><li>  Desain, kembangkan, uji, dan berikan kode C ++ multiplatform berkualitas tinggi, efisien dan bersih </li><li>  Kembangkan layanan Azure yang sangat skalabel </li><li>  Bekerja secara langsung dengan pelanggan internal dan eksternal untuk mendorong pengembangan produk </li></ul><br><h4>  Kualifikasi </h4><br><ul><li>  C ++ keterampilan coding dan debugging </li><li>  Kemampuan untuk bekerja di lingkungan tim berdasarkan basis kode bersama </li><li>  Pengalaman dengan teknologi cloud dan layanan terdistribusi (mis. Azure Batch, Azure Blob Storage, Docker, Telemetry) </li></ul><br><h4>  Poin bonus </h4><br>  Ada banyak keterampilan lain yang tidak diperlukan, tetapi yang berharga di seluruh tim dan ini termasuk: <br><br><ul><li>  C #, ASP.Net, JavaScript, TypeScript, React </li><li>  Mesin game Unity, Unreal atau terkait </li><li>  Pengalaman dalam 3D, AR, atau VR interaktif </li><li>  Layanan jaringan dan backend </li><li>  Optimalisasi kinerja </li></ul><br>  Anda dapat memperoleh informasi lebih lanjut dan mengirimkan CV Anda di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459834/">https://habr.com/ru/post/id459834/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459822/index.html">Contoh jaringan saraf sederhana, sebagai hasilnya, mencari tahu apa itu</a></li>
<li><a href="../id459824/index.html">Daftar periksa untuk menulis ekstensi Visual Studio yang hebat</a></li>
<li><a href="../id459828/index.html">Berita mingguan: Harga tiket Hyperloop di Rusia, penambangan arus utama komputer Apollo, bot AI di StarCraft II</a></li>
<li><a href="../id459830/index.html">Tentu saja, mereka memberi kekuatan dan garis dari senapan mesin. Kanker dan banyak lagi ... pengalaman dengan obat-obatan</a></li>
<li><a href="../id459832/index.html">9 aturan ekstensi keren untuk Visual Studio</a></li>
<li><a href="../id459836/index.html">Mengumumkan XAML Hot Reload untuk Xamarin.Forms</a></li>
<li><a href="../id459838/index.html">Tulis Kode Lebih Baik Lebih Cepat dengan Roslyn Analyzers</a></li>
<li><a href="../id459840/index.html">XAML Hot Reload untuk Xamarin.Form Dirilis</a></li>
<li><a href="../id459842/index.html">Luxor</a></li>
<li><a href="../id459844/index.html">Penguin di jendela: tentang potensi dan prospek WSL2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>