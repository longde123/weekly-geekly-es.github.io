<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฒ๏ธ ๐ ๐ฉ๐พโ๐ ุจูุงุกู ุนูู ุทูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS ๐ ๐๐พ ๐ฆ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃู ุดุฎุต ูููู ุจุจุฑุงูุฌ ูููุฑูููุชุฑููุฑ ุฑุจูุง ูุนุฑู ุนู FreeRTOS ุ ุฃู ุนูู ุงูุฃูู ุณูุน ุนู ูุธุงู ุงูุชุดุบูู ูุฐุง. ูุฑุฑ ูุทูุฑู Amazon ุชุนุฒูุฒ ูุฏุฑุงุช ูุธุงู ุงูุชุดุบูู ูุฐุง ุนูู ุงูุนูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุจูุงุกู ุนูู ุทูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/473966/" style=";text-align:right;direction:rtl">  ุฃู ุดุฎุต ูููู ุจุจุฑุงูุฌ ูููุฑูููุชุฑููุฑ ุฑุจูุง ูุนุฑู ุนู FreeRTOS ุ ุฃู ุนูู ุงูุฃูู ุณูุน ุนู ูุธุงู ุงูุชุดุบูู ูุฐุง.  ูุฑุฑ ูุทูุฑู Amazon ุชุนุฒูุฒ ูุฏุฑุงุช ูุธุงู ุงูุชุดุบูู ูุฐุง ุนูู ุงูุนูู ูุน ุฎุฏูุงุช AWS Internet of Things.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุธูุฑุช ุฃูุงุฒูู FreeRTOS.  ุทููุจ ููุง ุ ูุทูุฑู ูุญูู ุงูุดูุฑุฉ ุงูุซุงุจุชุฉ ูู PVS-Studio ุ ุจุงูุจุฑูุฏ ููู ุงูุชุนูููุงุช ููุชุญูู ูู ูุฐู ุงููุดุงุฑูุน.  ุญุณูุง ุ ุงูุขู ุงูุญุตูู ุนูู ูุง ุทูุจุช.  ุงุณุชูุฑ ูู ุงููุฑุงุกุฉ ููุนุฑูุฉ ูุง ุฎุฑุฌ ููู. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cee/9b7/a98/cee9b7a984f45dc365b4baea89adb019.png"></div><br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุจุงุฎุชุตุงุฑ ุนู ุงููุดุงุฑูุน </h2><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณูู ุฃุฎุจุฑูู ููููุงู ุนู ุฑุงุฆุฏ ุงููุดุฑูุน ุงูุฌุงุฑู ุงุฎุชุจุงุฑู - FreeRTOS (ุงูููุฏ ุงููุตุฏุฑู ูุชุงุญ ููุง ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุงุจุท</a> ).  ููุง ุชูุต ููููุจูุฏูุง ุ ูุฅู FreeRTOS ูู ูุธุงู ุชุดุบูู ูุชุนุฏุฏ ุงูููุงู ูู ุงูููุช ุงููุนูู ููุฃูุธูุฉ ุงููุฏูุฌุฉ. <br><br>  ูู ููุชูุจ ูู C ุงููุฏููุฉ ุงูุฌูุฏุฉ ุ ููู ุฃูุฑ ุบูุฑ ูุณุชุบุฑุจ - ูุฌุจ ุฃู ูุนูู ูุธุงู ุงูุชุดุบูู ูุฐุง ูู ุธุฑูู ูููุฐุฌูุฉ ูู ูููุฑูููุชุฑููุฑ: ุงูุฎูุงุถ ููุฉ ุงููุนุงูุฌุฉ ุ ููููุฉ ุตุบูุฑุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ููุง ุดุงุจู ุฐูู.  ุชุณูุญ ูู ูุบุฉ C ุจุงูุนูู ูุน ุงูููุงุฑุฏ ุจูุณุชูู ููุฎูุถ ููุฏููุง ุฃุฏุงุก ุนุงูู ุ ูุฐูู ููู ุงูุฃูุณุจ ูุชุทููุฑ ูุธุงู ุงูุชุดุบูู ูุฐุง. <br><br>  ุนุงุฏ ุงูุขู ุฅูู ููุทูุฉ Amazon ุ ุงูุชู ุชุนูู ุฏุงุฆููุง ุนูู ุชุทููุฑ ุงุชุฌุงูุงุช ูุงุนุฏุฉ ูุฎุชููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชุนูู Amazon ุนูู ุชุทููุฑ ูุญุฑู Amazon Lumberyard AAA ุ ูุงูุฐู ูุญุตูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃูุถูุง</a> . <br><br>  ุฃุญุฏ ูุฐู ุงูุงุชุฌุงูุงุช ูู Internet of Things (IoT).  ููุชุทููุฑ ูู ูุฐุง ุงููุฌุงู ุ ูุฑุฑุช ุฃูุงุฒูู ูุชุงุจุฉ ูุธุงู ุงูุชุดุบูู ุงูุฎุงุต ุจูู - ูุฃุฎุฐูุง FreeRTOS ุงูุฃุณุงุณูุฉ ูุฃุณุงุณ. <br><br>  ูุชู ูุถุน ุงููุธุงู ุงููุงุชุฌ ุ Amazon FreeRTOS ุ "ูุชูููุฑ ุงุชุตุงู ุขูู ูุฎุฏูุงุช ุงูููุจ ูู Amazon ุ ูุซู AWS IoT Core ุฃู AWS IoT Greengrass."  ุงูููุฏ ุงููุตุฏุฑู ููุฐุง ุงููุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุงุญ</a> ุนูู ุฌูุซุจ. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณููุชุดู ูุง ุฅุฐุง ูุงูุช ููุงู ุฃุฎุทุงุก ูู FreeRTOS ููุฐูู ูุฏู ุฃูุงู ูุธุงู ุงูุชุดุบูู Amazon ูู ุญูุซ ุชุญููู ุงูุดูุฑุฉ ุงูุซุงุจุชุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุณุงุฑ ุงูุดูู </h2><br>  ุชู ุฅุฌุฑุงุก ุงููุญุต ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุจุญุซ ุงูุชููุงุฆู ุนู ุงูุฃุฎุทุงุก - ูุญูู ุงูุดูุฑุฉ ุงูุซุงุจุชุฉ ูู PVS-Studio.  ุฅูู ูุงุฏุฑ ุนูู ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู ุงูุจุฑุงูุฌ ุงูููุชูุจุฉ ุจูุบุงุช C ู C ++ ู C # ู Java. <br><br>  ูุจู ุงูุชุญููู ุ ูุชุนูู ุนูููุง ุจูุงุก ุงููุดุฑูุน.  ุจูุฐู ุงูุทุฑููุฉ ุ ุณุฃููู ูุงุซููุง ูู ุฃููู ุจุญุงุฌุฉ ุฅูู ุฌููุน ุงูุชุจุนูุงุช ูุฃู ุงููุดุฑูุน ุฌุงูุฒ ูููุญุต.  ูููู ูููุฑุก ุงูุชุญูู ูู ุงููุดุฑูุน ุจุนุฏุฉ ุทุฑู - ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ูุธุงู ูุฑุงูุจุฉ ุงูุชุฑุฌูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ููุช ุจุฅุฌุฑุงุก ุงูุชุญููู ุจุงุณุชุฎุฏุงู ุงููููู ุงูุฅุถุงูู ูุจุฑูุงูุฌ Visual Studio - ูู ุงูุฌูุฏ ุฃู ุชุญุชูู ูุณุชูุฏุนุงุช ููุง ุงููุดุฑูุนูู ุนูู ูุฌููุนุงุช ูู ูููุงุช ุงููุดุฑูุน ุงูุชู ุชุณูู ุฅูุดุงุกูุง ูู ูุธุงู Windows. <br><br>  ูุงู ุนููู ููุท ุจูุงุก ูุดุงุฑูุน ููุชุฃูุฏ ูู ุฃู ูู ุดูุก ุฌุงูุฒ ูููุญุต.  ุจุนุฏ ุฐูู ุฑูุถุช ุงูุชุญููู ู - ููููุง!  - ูุฏู ุชูุฑูุฑ ูุญูู ุฌุงูุฒ ุฃูุงูู. <br><br>  ูููู ุฃู ุชุญุชูู ููุชุจุงุช ุงูุทุฑู ุงูุซุงูุซ ุงููุถููุฉ ูู ูุฐู ุงููุดุงุฑูุน ุฃูุถูุง ุนูู ุฃุฎุทุงุก ุ ููุง ูููููุง ุจุงูุทุจุน ุงูุชุฃุซูุฑ ุนูู ุงูุจุฑูุงูุฌ.  ููุน ุฐูู ุ ููุฏ ุงุณุชุซููุชูู โโูู ุงูุชุญููู ูู ุฃุฌู ููุงุก ุงูุณุฑุฏ. <br><br>  ูุฐูู ุ ูุชู ุชุญููู ุงููุดุงุฑูุน ุ ุชููู ุงูุชูุงุฑูุฑ ุ ูุชุณููุท ุงูุถูุก ุนูู ุฃุฎุทุงุก ูุซูุฑุฉ ููุงูุชูุงู.  ุญุงู ุงูููุช ููุญุตูู ุนูู ุงุณุชุนุฑุงุถูู! <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ูุฎูู FreeRTOS </h2><br>  ูู ุงูุจุฏุงูุฉ ุ ููุช ุฃุชููุน ุฃู ุฃูุชุจ ููุงูุชูู ูููุตูุชูู: ูุงุญุฏุฉ ููู ูุธุงู ุชุดุบูู.  ููุช ุจุงููุนู ูุฑู ูุฏูุ  ูุฃูุง ุนูู ุงุณุชุนุฏุงุฏ ููุชุงุจุฉ ููุงู ุฌูุฏ ุญูู FreeRTOS.  ุฃุชููุน ุงูุชุดุงู ูุง ูุง ููู ุนู ุงุซููู ูู ุงูุฎูู ุงูุนุตูุฑ (ูุซู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CWE-457</a> ) ุ ููุช ุฃุจุญุซ ูู ุฎูุงู ุชุญุฐูุฑุงุช ูุชูุฑูุฉ ูููุญูู ุ ู ... ูู ุฃุฌุฏ ุดูุฆูุง.  ูู ุฃุฌุฏ ุฃู ุฎุทุฃ ูุซูุฑ ููุงูุชูุงู. <br><br>  ุงูุนุฏูุฏ ูู ุงูุชุญุฐูุฑุงุช ุงูุตุงุฏุฑุฉ ุนู ุงููุญูู ูู ุชูู ุฐุงุช ุตูุฉ ุจู FreeRTOS.  ุนูู ุณุจูู ุงููุซุงู ุ ูุงูุช ูุฐู ุงูุชุญุฐูุฑุงุช ุนุจุงุฑุฉ ุนู ุนููุจ 64 ุจุช ูุซู casting <i>size_t</i> ุฅูู <i>uint32_t</i> .  ุฅูู ูุฑุชุจุท ุจุญูููุฉ ุฃู FreeRTOS ููุฏู ุฅูู ุงูุนูู ุนูู ุฃุฌูุฒุฉ ุจุญุฌู ูุคุดุฑ ูุง ูุฒูุฏ ุนู 32 ุจุช. <br><br>  ููุฏ ุฑุงุฌุนุช ุจุฏูุฉ ุฌููุน ุงูุชุญุฐูุฑุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V1027 ุงูุชู</a> ุชุดูุฑ ุฅูู ุงูุตุจ ุจูู ุงููุคุดุฑุงุช ุฅูู ุงูููุงูู ุบูุฑ ุฐุงุช ุงูุตูุฉ.  ุฅุฐุง ูุงูุช ุงูููุงูู ุงููุตุจูุจุฉ ููุง ููุณ ุงููุญุงุฐุงุฉ ุ ูุฅู ูุซู ูุฐุง ุงูุฎุทุฃ ูููู ุฎุทุฃ.  ููู ุฃุฌุฏ ุตุจูุง ุฎุทูุฑูุง ูุงุญุฏูุง! <br><br>  ุชู ุฑุจุท ุฌููุน ุงูุฃูุงูู ุงููุดุจููุฉ ุงูุฃุฎุฑู ุจุฃุณููุจ ุงูุชุฑููุฒ ุฃู ุชู ุชุฒููุฏูุง ุจุชุนููู ูุดุฑุญ ุณุจุจ ุงูููุงู ุจุฐูู ุจูุฐู ุงูุทุฑููุฉ ูููุงุฐุง ูู ููู ุฎุทุฃู. <br><br>  ูุฐูู ุฃูุฏ ุฃู ุฃูุงุดุฏ ูุทูุฑู FreeRTOS.  ุงูุฑุฌุงู ุ ุฃูุช ุฑุงุฆุน!  ุจุงููุงุฏ ุฑุฃููุง ูุดุงุฑูุน ูุธููุฉ ูุนุงููุฉ ุงูุฌูุฏุฉ ูุซู ูุดุงุฑูุนู.  ููุงู ูู ุฏูุงุนู ุณุฑูุฑู ูุฑุงุกุฉ ุงูููุฏ ุงููุธูู ูุงูุฃููู ูุงูููุซู ุฌูุฏูุง.  ุงููุจุนุงุช ูุจุงูุฉ ูุง ุฑูุงู. <br><br>  ุนูู ุงูุฑุบู ูู ุฃููู ูู ุฃุชููู ูู ุงูุนุซูุฑ ุนูู ุฃู ุฃุฎุทุงุก ูุซูุฑุฉ ููุงูุชูุงู ูู ุฐูู ุงูููู ุ ููุช ุฃุนุฑู ุฃููู ูู ุฃุชููู ุนูุฏ ูุฐุง ุงูุญุฏ.  ููุช ุฐุงูุจูุง ุฅูู ุงูููุฒู ุจุซูุฉ ุฑุงุณุฎุฉ ูู ุฃู ูุณุฎุฉ ุฃูุงุฒูู ุณุชุญุธู ุจูุณุจุฉ 100ูช ุจุดูุก ูุซูุฑ ููุงูุชูุงู ุ ูุฃูู ุบุฏุงู ุณุฃูุชูุท ุจุงูุชุฃููุฏ ุฃุฎุทุงุก ูุงููุฉ ููุฐู ุงูููุงูุฉ.  ููุง ููุช ูุฏ ุฎููุช ุ ููุช ุนูู ุญู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ูุฎูู ุฃูุงุฒูู FreeRTOS </h2><br>  ุชุญููุช ูุณุฎุฉ ุฃูุงุฒูู ูู ุงููุธุงู ุฅูู ... ุจุนุจุงุฑุฉ ููุทูุฉ ุ ุฃุณูุฃ ููููุงู.  ุธู ุชุฑุงุซ FreeRTOS ูุธูููุง ูู ุญูู ุฃุฎููุช ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ ุงููุซูุฑ ูู ุงููุดููุงุช ุงููุซูุฑุฉ ููุงูุชูุงู. <br><br>  ุจุนุถ ุงูุฃุฌุฒุงุก ูุงูุช ููุทู ุงูุจุฑูุงูุฌ ููุณูุฑุฉ ุ ุจุนุถ ุงููุคุดุฑุงุช ุงูุชู ุชู ุงูุชุนุงูู ูุนูุง ุจุดูู ุบูุฑ ุตุญูุญ.  ูู ุจุนุถ ุงูุฃูุงูู ุ ูููู ุฃู ุชุคุฏู ุงูุดูุฑุฉ ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ ุ ููุงูุช ููุงู ุญุงูุงุช ูู ูุนุฑู ูููุง ุงููุจุฑูุฌ ุจุจุณุงุทุฉ ุนู ููุท ุงูุฎุทุฃ ุงูุฐู ุงุฑุชูุจู.  ููุฏ ูุฌุฏุช ุงูุนุฏูุฏ ูู ููุงุท ุงูุถุนู ุงููุญุชููุฉ ุงูุฎุทูุฑุฉ. <br><br>  ูุจุฏู ุฃููู ุดุฏุฏุช ูุน ููุฏูุฉ.  ููุจุฏุฃ ูู ุงูุชุดุงู ุงูุฃุฎุทุงุก! <br><br><h3 style=";text-align:right;direction:rtl">  ูุณุฑ ููุทู ุงูุจุฑูุงูุฌ </h3><br>  ููุจุฏุฃ ุจูุดุงูู ุงูุฃูุงูู ุงูุชู ุชุดูุฑ ุจูุถูุญ ุฅูู ุฃู ุงูุจุฑูุงูุฌ ูุง ูุนูู ุจุงูุทุฑููุฉ ุงูุชู ุชููุนูุง ุงููุจุฑูุฌ.  ุงูุชุนุงูู ูุน ูุฌููุนุฉ ูุดุจููุฉ ุณูุฃุชู ุฃููุงู: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * @brief Pool of request and associated response buffers, * handles, and configurations. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> _requestPool_t _requestPool = { <span class="hljs-number"><span class="hljs-number">0</span></span> }; .... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _scheduleAsyncRequest(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> reqIndex, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> currentRange) { .... <span class="hljs-comment"><span class="hljs-comment">/* Set the user private data to use in the asynchronous callback context. */</span></span> _requestPool.pRequestDatas[reqIndex].pConnHandle = &amp;_connHandle; _requestPool.pRequestDatas[reqIndex].pConnConfig = &amp;_connConfig; _requestPool.pRequestDatas[reqIndex].reqNum = reqIndex; _requestPool.pRequestDatas[reqIndex].currRange = currentRange; _requestPool.pRequestDatas[reqIndex].currDownloaded = <span class="hljs-number"><span class="hljs-number">0</span></span>; _requestPool.pRequestDatas[reqIndex].numReqBytes = numReqBytes; .... _requestPool.pRequestDatas-&gt;scheduled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; .... }</code> </pre> <br>  ุฃุตุฏุฑ PVS-Studio ุชุญุฐูุฑูู ููุฐุง ุงูุฌุฒุก ูู ุงูููุฏ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V619 ูุชู ุงุณุชุฎุฏุงู ุงูุตููู '_requestPool.pRequestDatas' ููุคุดุฑ ููุงุฆู ููุฑุฏ.  iot_demo_https_s3_download_async.c 973 </li><li style=";text-align:right;direction:rtl">  V574 ูุชู ุงุณุชุฎุฏุงู ูุคุดุฑ '_requestPool.pRequestDatas' ูู ููุณ ุงูููุช ูุตููู ูููุคุดุฑ ููุงุฆู ูุงุญุฏ.  ุฎุทูุท ุงูุชุญูู: 931 ุ 973. iot_demo_https_s3_download_async.c 973 </li></ul><br>  ููุท ูู ุญุงูุฉ ุงุณูุญ ูู ุฃู ุฃุฐูุฑูู: ุงุณู ุงูุตููู ูู ุงููุคุดุฑ ุฅูู ุงูุนูุตุฑ ุงูุฃูู.  ูุฐุง ุฅุฐุง ูุงู <i>_requestPool.pRequestDatas</i> ุนุจุงุฑุฉ ุนู ุตููู ูู ุงูููุงูู ุ ูุฅู <i>_requestPool.pRequestDatas [i] .scheduled</i> ูู ุชูููู ููุนุถู <i>ุงููุฌุฏูู</i> ูู ุจููุฉ ุงูุตููู <i>i.</i> ูุฅุฐุง <i>ูุชุจูุง _requestPool.pRequestDatas-&gt; ูุฌุฏููุฉ</i> ุ ูุณูู ูุชุญูู ุฐูู ุฅูู ุณูุชู ุงููุตูู ุฅูููู ูู ูููู ุงูุตููู ุงูุฃูู. <br><br>  ูู ููุชุทู ูู ุงูููุฏ ุฃุนูุงู ุ ูุฐุง ูุง ูุญุฏุซ.  ูู ุงูุณุทุฑ ุงูุฃุฎูุฑ ุ ูุชู ุชุบููุฑ ูููุฉ ุนุถู ุจููุฉ ุงูุตููู ุงูุฃูู ููุท.  ูู ุญุฏ ุฐุงุชู ุ ูููู ุงููุตูู ูุดุจูููุง ุจุงููุนู ุ ููู ุงูุญุงูุฉ ููุง ุฃูุซุฑ ูุถูุญูุง: ูุชู ุชูููู ุตููู <i>_requestPool.pRequestDatas ุจุงูููุฑุณ</i> ูู <i>ูุงูู</i> ูุต ุงููุธููุฉ.  ูููู ูู ุงูููุงูุฉ ุชู ูุณูุงู ุนูููุฉ ุงูููุฑุณุฉ. <br><br>  ููุง ุฃููููุง ุ ูุฌุจ ุฃู ูุจุฏู ุงูุณุทุฑ ุงูุฃุฎูุฑ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">_requestPool.pRequestDatas[reqIndex].scheduled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre> <br>  ุงูุฎุทุฃ ุงูุชุงูู ูููู ูู ูุธููุฉ ุตุบูุฑุฉ ุ ูุฐูู ุณุฃุนุทูู ุจุงููุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Return true if the string " pcString" is found * inside the token pxTok in JSON file pcJson. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> BaseType_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prvGGDJsoneq</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pcJson, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">jsmntok_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pxTok, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pcString )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ulStringSize = ( <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ) pxTok-&gt;end - ( <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ) pxTok-&gt;start; BaseType_t xStatus = pdFALSE; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( pxTok-&gt;type == JSMN_STRING ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ( <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ) <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>( pcString ) == ulStringSize ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ( <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> ) <span class="hljs-built_in"><span class="hljs-built_in">strncmp</span></span>( &amp;pcJson[ pxTok-&gt;start ], <span class="hljs-comment"><span class="hljs-comment">// &lt;= pcString, ulStringSize ) == 0 ) { xStatus = pdTRUE; } } } return xStatus; }</span></span></code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V642 [CWE-197] ูุนุฏ ุญูุธ ูุชูุฌุฉ ุฏุงูุฉ strncmp ุฏุงุฎู ูุชุบูุฑ ุงูููุน "ุงููุตูุฑ" ุบูุฑ ููุงุณุจ.  ูููู ุฃู ุชุถูุน ุงูุจุชุงุช ูุจูุฑุฉ ูุณุฑ ููุทู ุงูุจุฑูุงูุฌ.  aws_greengrass_discovery.c 637 <br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชุนุฑูู ูุธููุฉ strncmp: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">strncmp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *lhs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *rhs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count )</span></span></span></span>;</code> </pre> <br>  ูู ุงููุซุงู ุ ูุชู ุชุญููู ูุชูุฌุฉ <i>int int</i> ุ ูุงูุชู ูุจูุบ ุญุฌููุง 32 ุจุช ูู ูุชุบูุฑ ูู ุงูููุน <i>int16_t</i> .  ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุชุญููู "ุงูุถูู" ุ ุณูุชู ููุฏ ูุญุฏุงุช ุงูุจุชุงุช ุงูุฃูุฏู ูู ุงููููุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงูุช ุฏุงูุฉ <i>strncmp</i> ุชูุฑุฌุน <i>0x00010000</i> ุ <i>ูุณุชููุฏ</i> ุงููุญุฏุฉ ุฃุซูุงุก ุงูุชุญููู ุ ูุณูุชู ุชูููุฐ ุงูุดุฑุท. <br><br>  ูู ุงูุบุฑูุจ ุฃู ูุฑู ูุซู ูุฐุง ุงูุตุจ ูู ุงูุญุงูุฉ.  ููุงุฐุง ูู ูุทููุจ ูู ุฃู ููุช ูุถู ููุง ุ ุฅุฐุง ูุงู ูููู ููุงุฑูุฉ <i>ูุซุงูุฉ ุงูุนูููุงุช</i> ุงูุนุงุฏูุฉ ูุน ุงูุตูุฑุ  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฅุฐุง ุฃุฑุงุฏ ูุจุฑูุฌ ุฃู ุชุนูุฏ ูุฐู ุงููุธููุฉ ุฅูู <i>ุญูููุฉ</i> ูู ุจุนุถ ุงูุฃุญูุงู ุญุชู ูู ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูููุงุฐุง ูุง ูุฏุนู ูุฐุง ุงูุณููู ุงูุตุนุจ ูุน ุงูุชุนูููุ  ูููู ุจูุฐู ุงูุทุฑููุฉ ูู ููุน ูู ุงูุจุงุจ ุงูุฎููู.  ุนูู ุฃู ุญุงู ุ ุฃูุง ุฃููู ุฅูู ุงูุงุนุชูุงุฏ ุจุฃูู ุฎุทุฃ.  ูุง ุฑุงูู <br><br><h3 style=";text-align:right;direction:rtl">  ุณููู ุบูุฑ ูุญุฏุฏ ููุคุดุฑุงุช </h3><br>  ููุง ูุฃุชู ูุซุงู ูุจูุฑ.  ุฅููุง ุชุบุทู dereference ูุคุดุฑ ุงููุญุชููุฉ ูุงุฑุบุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _networkReceiveCallback(....) { IotHttpsReturnCode_t status = IOT_HTTPS_OK; _httpsResponse_t* pCurrentHttpsResponse = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; IotLink_t* pQItem = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... <span class="hljs-comment"><span class="hljs-comment">/* Get the response from the response queue. */</span></span> IotMutex_Lock(&amp;(pHttpsConnection-&gt;connectionMutex)); pQItem = IotDeQueue_PeekHead(&amp;(pHttpsConnection-&gt;respQ)); IotMutex_Unlock(&amp;(pHttpsConnection-&gt;connectionMutex)); <span class="hljs-comment"><span class="hljs-comment">/* If the receive callback is invoked * and there is no response expected, * then this a violation of the HTTP/1.1 protocol. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pQItem == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { IotLogError(....); fatalDisconnect = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; status = IOT_HTTPS_NETWORK_ERROR; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> iotCleanup; } .... iotCleanup : <span class="hljs-comment"><span class="hljs-comment">/* Report errors back to the application. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status != IOT_HTTPS_OK) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pCurrentHttpsResponse-&gt;isAsync &amp;&amp; pCurrentHttpsResponse-&gt;pCallbacks-&gt;errorCallback) { pCurrentHttpsResponse-&gt;pCallbacks-&gt;errorCallback(....); } pCurrentHttpsResponse-&gt;syncStatus = status; } .... }</code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V522 [CWE-690] ูุฏ ูููู ููุงู ุฅูุบุงุก ูุฑุฌุนูุฉ ููุคุดุฑ ูุงุฑุบ ูุญุชูู "pCurrentHttpsResponse".  iot_https_client.c 1184 <br><br>  ุขุฎุฑ ูุชูุฉ <i>ุฅุฐุง ูุงู</i> ูุญุชูู ุนูู dereferences ุฅุดูุงููุฉ.  ุฏุนููุง ูุนุฑูุฉ ูุง ูุญุฏุซ ููุง. <br><br>  ุชุจุฏุฃ ุงููุธููุฉ <i>ุจูุชุบูุฑุงุช pCurrentHttpsResponse</i> ู <i>pQItem</i> ุงูุชู ุชูุช ุชููุฆุชูุง ุจุงููููุฉ <i>NULL</i> ููุชู ุชููุฆุฉ ูุชุบูุฑ <i>ุงูุญุงูุฉ</i> ุจูุงุณุทุฉ ูููุฉ <i>IOT_HTTPS_OK</i> ุ ููุง ูุนูู ุฃู ุงูุฃูุฑ ููู ุตุญูุญ. <br><br>  ูุชู ุชุนููู ูููุฉ <i>pQItem</i> ุฃุฎุฑู ุ ูุชู ุฅุฑุฌุงุนูุง ูู ุฏุงูุฉ <i>IotDeQueue_PeekHead</i> ุ ูุงูุชู ุชูุฑุฌุน ุงููุคุดุฑ ุฅูู ุจุฏุงูุฉ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงููุฒุฏูุฌุฉ ุงูุงุฑุชุจุงุท. <br><br>  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูุงูุช ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุงุฑุบุฉุ  ูู ูุฐู ุงูุญุงูุฉ ุ <i>ุชุฑุฌุน</i> ุงูุฏุงูุฉ <i>IotDeQueue_PeekHead</i> <i>NULL:</i> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> IotLink_t* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IotDeQueue_PeekHead</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IotDeQueue_t* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pQueue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IotListDouble_PeekHead(pQueue); } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> IotLink_t* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IotListDouble_PeekHead</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IotListDouble_t* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pList)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">/* @[declare_linear_containers_list_double_peekhead] */</span></span></span><span class="hljs-function"> </span></span>{ IotLink_t* pHead = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pList != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IotListDouble_IsEmpty(pList) == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { pHead = pList-&gt;pNext; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pHead; }</code> </pre> <br>  ุนูุงูุฉ ุนูู ุฐูู ุ <i>ุณุชุตุจุญ</i> ุงูุญุงูุฉ <i>pQItem == NULL</i> ุตุญูุญุฉ ูุณูุชู ุชูุฑูุฑ ุชุฏูู ุงูุชุญูู ุจูุงุณุทุฉ ุงูุงูุชูุงู ุฅูู ุงูุฌุฒุก ุงูุณููู ูู ุงููุธููุฉ.  ุจุญููู ูุฐุง ุงูููุช ุ <i>ุณูุธู</i> ูุคุดุฑ <i>pCurrentHttpsResponse</i> ุฎุงูููุง ุ ูู ุญูู ุฃู <i>ุงูุญุงูุฉ</i> ูู ุชููู ูุณุงููุฉ ูู <i>IOT_HTTPS_OK</i> .  ูู ุงูููุงูุฉ ุ ุณูุตู ุฅูู ููุณ ุงูุดูุก <i>ุฅุฐุง ูุงู</i> ุงููุฑุน ุ ู ... ุงูุทูุฑุฉ!  ุญุณูุง ุ ุฃูุช ุชุนุฑู ุนู ุนูุงูุจ ูุซู ูุฐุง dereference. <br><br>  ุญุณูุง.  ููุฏ ูุงู ูุซุงููุง ุตุนุจูุง ุจุนุถ ุงูุดูุก.  ุงูุขู ุฃูุชุฑุญ ุนููู ุฅููุงุก ูุธุฑุฉ ุนูู ุฅูุบุงุก ุชุณุฌูู ูุญุชูู ุจุณูุท ููุบุงูุฉ ูููููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PKI_mbedTLSSignatureToPkcs11Signature</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pxSignaturePKCS, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pxMbedSignature )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xReturn = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> * pxNextLength; <span class="hljs-comment"><span class="hljs-comment">/* The 4th byte contains the length of the R component */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> ucSigComponentLength = pxMbedSignature[ <span class="hljs-number"><span class="hljs-number">3</span></span> ]; <span class="hljs-comment"><span class="hljs-comment">// &lt;= if( ( pxSignaturePKCS == NULL ) || ( pxMbedSignature == NULL ) ) { xReturn = FAILURE; } .... }</span></span></code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V595 [CWE-476] ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "pxMbedSignature" ูุจู ุฃู ูุชู ุงูุชุญูู ููู ุถุฏ nullptr.  ุฎุทูุท ุงูุชุญูู: 52 ุ 54. iot_pki_utils.c 52 <br><br>  ุชุณุชูุจู ูุฐู ุงููุธููุฉ ูุคุดุฑุงุช ุฅูู <i>uint8_t</i> .  ูุชู ุงูุชุญูู ูู ููุง ุงููุคุดุฑูู ูู <i>NULL</i> ุ ููู ููุงุฑุณุฉ ุฌูุฏุฉ - ูุฌุจ ุญู ูุฐู ุงูููุงูู ุนูู ุงูููุฑ. <br><br>  ูููู ูุฐู ูู ุงููุดููุฉ: ุจุญููู ุงูููุช ุงูุฐู ูุชู ููู ุชุญุฏูุฏ <i>pxMbedSignature</i> ุ ุณูุชู ุจุงููุนู <i>ุฅูุบุงุก ุชุฃุฌูููุง</i> ุญุฑูููุง ุณุทุฑ ูุงุญุฏ ุฃุนูุงู.  ุชุง-DAA! <br><br>  ูุซุงู ุขุฎุฑ ุนูู ููุฏ ุงููุถุงุฑุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">CK_RV </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vAppendSHA256AlgorithmIdentifierSequence</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * x32ByteHashedMessage, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * x51ByteHashOidBuffer )</span></span></span><span class="hljs-function"> </span></span>{ CK_RV xResult = CKR_OK; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> xOidSequence[] = pkcs11STUFF_APPENDED_TO_RSA_SIG; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ( x32ByteHashedMessage == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) || ( x51ByteHashOidBuffer == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) ) { xResult = CKR_ARGUMENTS_BAD; } <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>( x51ByteHashOidBuffer, xOidSequence, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>( xOidSequence ) ); <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>( &amp;x51ByteHashOidBuffer[ <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>( xOidSequence ) ], x32ByteHashedMessage, <span class="hljs-number"><span class="hljs-number">32</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> xResult; }</code> </pre> <br>  <b>ุชุญุฐูุฑุงุช PVS-Studio:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V1004 [CWE-628] ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ 'x51ByteHashOidBuffer' ุจุทุฑููุฉ ุบูุฑ ุขููุฉ ุจุนุฏ ุฃู ุชู ุงูุชุญูู ููู ุถุฏ nullptr.  ุฎุทูุท ุงูุชุญูู: 275 ุ 280. iot_pkcs11.c 280 </li><li style=";text-align:right;direction:rtl">  V1004 [CWE-628] ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ 'x32ByteHashedMessage' ุจุทุฑููุฉ ุบูุฑ ุขููุฉ ุจุนุฏ ุฃู ุชู ุงูุชุญูู ููู ุถุฏ nullptr.  ุฎุทูุท ุงูุชุญูู: 275 ุ 281. iot_pkcs11.c 281 </li></ul><br>  ูุญุฐุฑ ุงููุญูู ูู ุฃู ุงููุนููุงุช ุงูุฏุงูุฉ ุงูุชู ูู ูุคุดุฑุงุช ุ ูุชู ุงุณุชุฎุฏุงููุง ุจุดูู ุบูุฑ ุขูู ุจุนุฏ ุงูุชุญูู ูู <i>NULL</i> .  ูู ุงููุงูุน ุ ูุชู ูุญุต ุงูุญุฌุฌ.  ูููู ูู ุญุงูุฉ ุฅุฐุง ูู ููู ุฃู ูููู <i>ูุงุฑุบูุง</i> ุ ููู ูุชู ุงุชุฎุงุฐ ุฃู ุฅุฌุฑุงุก ุจุงุณุชุซูุงุก ุงููุชุงุจุฉ ูู <i>xResult.</i>  ูุฐุง ุงููุณู ูู ุงูููุฏ ูู ููุน ูููู: "ูุนู ุ ูุฐูู ุชุจูู ุฃู ุงูุญุฌุฌ ุณูุฆุฉ.  ุณููุงุญุธ ุฐูู ุงูุขู ุ ูุฃูุช - ุชุณุชูุฑ ุ ุงุณุชูุฑ. " <br><br>  ุงููุชูุฌุฉ: ุณูุชู ุชูุฑูุฑ <i>NULL</i> ุฅูู <i>memcpy.</i>  ูุง ูููู ุฃู ูุฃุชู ูููุ  ุฃูู ุณูุชู ูุณุฎ ุงูููู ูุฃููุงุ  ูู ุงููุงูุน ุ ูู ูุณุงุนุฏ ุงูุชุฎููู ุ ุญูุซ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุต</a> ุงููุนูุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุถูุญ ุนูู</a> ุฃู ูุซู ูุฐู ุงูุฏุนูุฉ ุชุคุฏู ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ (ุงูุธุฑ ุงููุณู 1). <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cf7/7d6/856/cf77d6856666f6a1529a1744832bd5bf.png" alt="ุงูุดูู 3"></div><br><br>  ููุงู ุฃูุซูุฉ ุฃุฎุฑู ููุคุดุฑุงุช ุบูุฑ ุตุญูุญุฉ ูุชู ุงูุชุนุงูู ูุนูุง ูู ุชูุฑูุฑ ุงููุญูู ุงูููุฌูุฏ ูู Amazon FreeRTOS ุ ููููู ุฃุนุชูุฏ ุฃู ุงูุฃูุซูุฉ ุงูููุฏูุฉ ูุงููุฉ ูุฅุธูุงุฑ ูุฏุฑุงุช PVS-Studio ูู ุงูุชุดุงู ูุซู ูุฐู ุงูุฃุฎุทุงุก.  ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุดูุก ุฌุฏูุฏ. <br><br><h3 style=";text-align:right;direction:rtl">  ุตุญูุญ! = 1 </h3><br>  ูุงู ููุงู ุงูุนุฏูุฏ ูู ุงูุฃุฎุทุงุก ุงููุชุนููุฉ ุจุงูููุท ุ ูุงูุชู ุ ููุฃุณู ุ ุบุงูุจุงู ูุง ูุชู ุชุฌุงููู. <br><br>  ุงูุญูููุฉ ูู ุฃู ููุน <i>bool</i> (ูู C ++) ูุฎุชูู ุนู ููุน <i>BOOL</i> (ูุดูุน ุงุณุชุฎุฏุงูู ูู C).  ุงูุฃูู ูููู ุฃู ูุญุชูู ููุท ุนูู ูููุฉ <i>ุตุญูุญุฉ</i> ุฃู <i>ุฎุงุทุฆุฉ</i> .  ุงูููุน ุงูุซุงูู ูู typedef ูููุน ุนุฏุฏ ุตุญูุญ ( <i>int</i> ุ <i>long</i> ุ ูุบูุฑูุง).  ุงููููุฉ <i>0</i> ูู "false" ููุง ุ ูุฃู ูููุฉ ุฃุฎุฑู ูุฎุชููุฉ ุนู ุงูุตูุฑ ูู "true". <br><br>  ูุธุฑูุง ูุนุฏู ูุฌูุฏ ููุน ููุทูู ูุฏูุฌ ูู C ุ ูุชู ุชุนุฑูู ูุฐู ุงูุซูุงุจุช ููุฑุงุญุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> FALSE 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TRUE 1</span></span></code> </pre> <br>  ููููู ูุธุฑุฉ ุนูู ุงููุซุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mbedtls_hardware_poll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* output, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> len, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">* olen)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lStatus = MBEDTLS_ERR_ENTROPY_SOURCE_FAILED; HCRYPTPROV hProv = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Unferenced parameter. */</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)data; <span class="hljs-comment"><span class="hljs-comment">/* * This is port-specific for the Windows simulator, * so just use Crypto API. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TRUE == CryptAcquireContextA( &amp;hProv, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TRUE == CryptGenRandom(hProv, len, output)) { lStatus = <span class="hljs-number"><span class="hljs-number">0</span></span>; *olen = len; } CryptReleaseContext(hProv, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lStatus; }</code> </pre> <br>  <b>ุชุญุฐูุฑุงุช PVS-Studio:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V676 [CWE-253] ูู ุงูุฎุทุฃ ููุงุฑูุฉ ูุชุบูุฑ ููุน BOOL ูุน TRUE.  aws_entropy_hardware_poll.c 48 </li><li style=";text-align:right;direction:rtl">  V676 [CWE-253] ูู ุงูุฎุทุฃ ููุงุฑูุฉ ูุชุบูุฑ ููุน BOOL ูุน TRUE.  ุงูุชุนุจูุฑ ุงูุตุญูุญ ูู: 'FALSE! = CryptGenRandom (hProv ุ len ุ ุงูุฅุฎุฑุงุฌ)'.  aws_entropy_hardware_poll.c 51 </li></ul><br>  ูู ูุฌุฏุช ุฎุทุฃุ  ูุง ุดู ุ ุฅููุง ููุง :) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i>ุงูุฏุงูุชุงู CryptAcquireContextA</i></a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i>CryptGenRandom</i></a> ูู ูุธุงุฆู ููุงุณูุฉ ูู ุฑุฃุณ <i>wincrypt.h</i> .  ุฅุฐุง ูุฌุญุช ุ ูุฅููุง ุชูุฑุฌุน ุงููููุฉ ุบูุฑ ุงูุตูุฑูุฉ.  ุงุณูุญูุง ูู ุฃู ุฃุคูุฏ ุฃูู ููุณ <i>ุตูุฑุง</i> .  ูุฐูู ุ ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูููู ุฃู ุชููู ุฃู ูููุฉ ูุฎุชููุฉ ุนู ุงูุตูุฑ: <i>1</i> ุ <i>314</i> ุ <i>42</i> ุ <i>420</i> . <br><br>  ุนูู ูุง ูุจุฏู ุ ูู ููู ุงููุจุฑูุฌ ุงูุฐู ูุงู ููุชุจ ุงููุธููุฉ ูู ุงููุซุงู ุ ูููุฑ ูู ุฐูู ุ ููู ุงูููุงูุฉ ุ ุชุชู ููุงุฑูุฉ ุงูููู ุงููุงุชุฌุฉ ูุน ูุงุญุฏุฉ. <br><br>  ูุง ูุฏู ุงุญุชูุงู ุนุฏู ุงุณุชููุงุก ุดุฑุท <i>TRUE == CryptGenRandom (....)</i> ุ  ูู ุงูุตุนุจ ุงูููู.  ุฑุจูุง ุ ูุฏ <i>ููุฑุฌุน CryptGenRandom</i> 1 ุฃูุซุฑ ูู ุงูููู ุงูุฃุฎุฑู ุ ููู ุฑุจูุง ูุฏ ูุฑุฌุน 1 ููุท. ูุง ูููููุง ูุนุฑูุฉ ูุฐุง ุจุงูุชุฃููุฏ: ุชูููุฐ ูุฐู ุงููุธููุฉ ุงููุดูุฑุฉ ูุฎูู ุนู ุฃุนูู ุงููุจุฑูุฌูู ุงูุจุดุฑ :) <br><br>  ูู ุงูููู ุฃู ูุชุฐูุฑ ุฃู ูุฐู ุงูููุงุฑูุงุช ูุฏ ุชููู ุฎุทูุฑุฉ.  ุจุฏูุง ูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TRUE == GetBOOL())</code> </pre> <br>  ุงุณุชุฎุฏู ูุณุฎุฉ ุฃูุซุฑ ุฃูุงููุง ูู ุงูููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FALSE != GetBOOL())</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ูุดุงูู ุงูุชุญุณูู </h3><br>  ุงุฑุชุจุทุช ุนุฏุฉ ุชุญุฐูุฑุงุช ูู ูุญูู ูููุงูู ุงูุชุดุบูู ุจุจุทุก.  ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _IotHttpsDemo_GetS3ObjectFileSize(....) { .... pFileSizeStr = <span class="hljs-built_in"><span class="hljs-built_in">strstr</span></span>(contentRangeValStr, <span class="hljs-string"><span class="hljs-string">"/"</span></span>); .... }</code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V817 ูุนุฏ ุงูุจุญุซ ุนู ุญุฑู "/" ุฃูุซุฑ ูุนุงููุฉ ูู ุณูุณูุฉ.  iot_demo_https_common.c 205 <br><br>  ุงููุง ูุตูุฑุฉ ูุจุณูุทุฉ ุ ุฃููุณ ูุฐููุ  ูุชู ุงุณุชุฎุฏุงู ูุธููุฉ <i>strstr</i> ููุง ููุจุญุซ ุนู ุญุฑู ูุงุญุฏ ููุท ุ ูุชู ุชูุฑูุฑู ูู ุงููุนููุฉ ูุณูุณูุฉ (ูููู ูู ุนูุงูุงุช ุงูุชุจุงุณ ูุฒุฏูุฌุฉ). <br><br>  ูููู ุชุญุณูู ูุฐุง ุงูููุงู ุนู ุทุฑูู ุงุณุชุจุฏุงู <i>strstr</i> ุจู <i>strchr</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _IotHttpsDemo_GetS3ObjectFileSize(....) { .... pFileSizeStr = <span class="hljs-built_in"><span class="hljs-built_in">strchr</span></span>(contentRangeValStr, <span class="hljs-string"><span class="hljs-string">'/'</span></span>); .... }</code> </pre> <br>  ุจูุฐู ุงูุทุฑููุฉ ุ ุณูุนูู ุงูุจุญุซ ุจุดูู ุฃุณุฑุน ููููุงู.  ุดูุก ุตุบูุฑ ุ ููู ูุทูู. <br><br>  ุญุณููุง ุ ุชุนุฏ ูุซู ูุฐู ุงูุชุญุณููุงุช ุฌูุฏุฉ ุ ููู ุงููุญูู ูุฏ ูุฌุฏ ุฃูุถูุง ููุงููุง ุขุฎุฑ ุ ูุงูุฐู ูููู ุชุญุณููู ุจุทุฑููุฉ ุฃูุซุฑ ูุถูุญูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vRunOTAUpdateDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; ; ) { .... xConnectInfo.cleanSession = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; xConnectInfo.clientIdentifierLength = (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span>)<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(clientcredentialIOT_THING_NAME); xConnectInfo.pClientIdentifier = clientcredentialIOT_THING_NAME; .... } }</code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V814 ุงูุฎูุงุถ ุงูุฃุฏุงุก.  ุชู ุงุณุชุฏุนุงุก ุงููุธููุฉ "strlen" ุนุฏุฉ ูุฑุงุช ุฏุงุฎู ุฌุณู ุงูุญููุฉ.  aws_iot_ota_update_demo.c 235 <br><br>  ูู ... ุฏุงุฎู ุงูุญููุฉ ุ ูุน ูู <i>strlen</i> ูุณูู ุชูุฑุงุฑ ุงูุฐู ูููู ุทูู ููุณ ุงูุฎุท ูู ูู ูุฑุฉ.  ููุณุช ุงูุนูููุฉ ุงูุฃูุซุฑ ูุนุงููุฉ :) <br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชุนุฑูู <i>clientcredentialIOT_THING_NAME</i> : <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* * @brief Host name. * * @todo Set this to the unique name of your IoT Thing. */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> clientcredentialIOT_THING_NAME </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span></span></code> </pre> <br>  ูุทูุจ ูู ุงููุณุชุฎุฏู ุฅุฏุฎุงู ุงุณู ุฃุฌูุฒุชูู ููุง.  ุจุดูู ุงูุชุฑุงุถู ุ ุฅูู ูุงุฑุบ ุ ููู ูุฐู ุงูุญุงูุฉ ุ ูู ุดูุก ุนูู ูุง ูุฑุงู.  ูุงุฐุง ูู ุฃุฑุงุฏ ุงููุณุชุฎุฏู ุฅุฏุฎุงู ุงุณู ุทููู ูุฌููู ููุงูุ  ุนูู ุณุจูู ุงููุซุงู ุ ุฃุญุจ ุฃู ุฃุณูู ูู ุจูุงุช ุฃููุงุฑู " <i>ุขูุฉ ุงููููุฉ ุงููุชุญูุณุฉ ูุงููุชุทูุฑุฉ BarBarista-N061E The Ultimate Edition</i> ."  ูู ููููู ุฃู ุชุชุฎูู ูุง ุณูููู ุนููู ุงูููุงุฌุฃุฉ ุฅุฐุง ุจุฏุฃุช ุขูุฉ ุงููููุฉ ุงูุฌูููุฉ ูู ุงูุนูู ุจุดูู ุฃุจุทุฃ ููููุงู ุจุนุฏ ุฐููุ  ุงุฒุนุงุฌ! <br><br>  ูุชุตุญูุญ ุงูุฎุทุฃ ุ ูุฌุฏุฑ ุฃุฎุฐ <i>strlen</i> ุฎุงุฑุฌ ุญููุฉ ุงูุฌุณู.  ุจุนุฏ ูู ุดูุก ุ ูุง ูุชุบูุฑ ุงุณู ุงูุฌูุงุฒ ุฃุซูุงุก ุนูู ุงูุจุฑูุงูุฌ.  ุฃูู ุ <i>ุณูู constexpr</i> ูู C ++ ุชูุงุณุจ ุชูุงูุง ููุง ... <br><br>  ุญุณููุง ุ ุญุณููุง ุ ูุง ูุฐูุจ ุฅูู ุงูุฒูุจู.  ููุง ูุงุญุธ ุฒูููู ุฃูุฏุฑู ูุงุฑุจูู ุ ูุนุฑู <i>ุงููุชุฑุฌููู</i> ุงูุนุตุฑููู ูุง ูู <i>ุดุงู</i> ุ <i>ูุดุงูุฏูู</i> ุดุฎุตูุงู ุจุงุณุชุฎุฏุงู ุซุงุจุช ูู ุงูููุฏ ุงูุซูุงุฆู ุฅุฐุง ุญุตููุง ุนูู ุฃู ุทูู ุงูุฎุท ูุง ูููู ุฃู ูุชุบูุฑ.  ูุฐูู ููุงู ูุฑุตุฉ ุฌูุฏุฉ ูู ูุถุน ุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ ุ ุจุฏูุงู ูู ุชูููู ุทูู ุงูุฎุท ุงูุญูููู ุ ุณูุชู ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุชู ุชู ุชูููููุง ูุณุจููุง.  ููุน ุฐูู ุ ูุง ูุนูู ูุฐุง ุฏุงุฆููุง ุ ูุฐุง ูุฅู ูุชุงุจุฉ ูุฐู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุณุช ููุงุฑุณุฉ ุฌูุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุถุน ูููุงุช ุนู ููุณุฑุง </h2><br>  ูุญุชูู ูุญูู PVS-Studio ุนูู ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูููุงุนุฏ ููุชุญูู ูู ุดูุฑุชู ููุชุฃูุฏ ูู ุงูุชุซุงููุง ููุนุงููุฑ MISRA C ู MISRA C.  ูุง ูู ูุฐู ุงููุนุงููุฑุ <br><br>  MISRA ูู ูุนูุงุฑ ุงูุชุฑููุฒ ููุฃูุธูุฉ ุงููุฏูุฌุฉ ุนุงููุฉ ุงููุณุคูููุฉ.  ุฃูู ูุญุชูู ุนูู ูุฌููุนุฉ ูู ุงูููุงุนุฏ ูุงูุฅุฑุดุงุฏุงุช ุงูุตุงุฑูุฉ ููุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุฅุนุฏุงุฏ ุนูููุฉ ุงูุชุทููุฑ.  ูุฐู ุงูููุงุนุฏ ูุซูุฑุฉ ุฌุฏูุง ุ ููู ูุง ุชูุฏู ููุท ุฅูู ุงููุถุงุก ุนูู ุงูุฃุฎุทุงุก ุงูุฎุทูุฑุฉ ุ ูููู ุฃูุถูุง ุฅูู "ุฑูุงุฆุญ ุงูููุฏ" ุงููุฎุชููุฉ.  ูููุฏู ุฃูุถูุง ุฅูู ูุชุงุจุฉ ุงูููุฏ ุงูุฃูุซุฑ ูุงุจููุฉ ููููู ููุฑุงุกุฉ. <br><br>  ูุจุงูุชุงูู ุ ูุฅู ูุนูุงุฑ MISRA ุงูุชุงูู ูุง ูุณุงุนุฏ ููุท ูู ุชุฌูุจ ุงูุฃุฎุทุงุก ูููุงุท ุงูุถุนู ุ ูููู ุฃูุถูุง ูููู ุจุดูู ูุจูุฑ ูู ุงุญุชูุงู ุธููุฑูุง ูู ุงูููุฏ ุงูููุฌูุฏ ุจุงููุนู. <br><br>  ูุณุชุฎุฏู MISRA ูู ุงูุตูุงุนุงุช ุงูุฌููุฉ ูุงูุทุจูุฉ ูุงูุนุณูุฑูุฉ ุ ุญูุซ ุชุนุชูุฏ ุญูุงุฉ ุงูุจุดุฑ ุนูู ุฌูุฏุฉ ุงูุจุฑุงูุฌ ุงููุฏูุฌุฉ. <br><br>  ุนูู ูุง ูุจุฏู ุ ูุนุฑู ูุทูุฑู Amazon FreeRTOS ุจูุฐุง ุงููุนูุงุฑ ุ ููุชุงุจุนููู ูู ูุนุธู ุงูุฃุญูุงู.  ูุซู ูุฐุง ุงูููุฌ ูุนููู ุชูุงููุง: ุฅุฐุง ูุชุจุช ูุธุงู ุชุดุบูู ุนุฑูุถ ุงููุงุนุฏุฉ ููุฃูุธูุฉ ุงููุฏูุฌุฉ ุ ููุฌุจ ุนููู ุงูุชูููุฑ ูู ุงูุฃูุงู. <br><br>  ููุน ุฐูู ุ ููุฏ ูุฌุฏุช ุงููุซูุฑ ูู ุงูุงูุชูุงูุงุช ููุนูุงุฑ MISRA.  ูู ุฃุนุทู ุฃูุซูุฉ ุนูู ููุงุนุฏ ูุซู "ูุง ุชุณุชุฎุฏู ุงูุงุชุญุงุฏ" ุฃู "ุงููุธููุฉ ูุฌุจ ุฃู ูููู ููุง ุนุงุฆุฏ ูุงุญุฏ ููุท ูู ููุงูุฉ ุงูุฌุณู" - ูุณูุก ุงูุญุธ ุ ููู ููุณุช ูุฐููุฉ ุ ููุง ูู ุงูุญุงู ูุน ูุนุธู ููุงุนุฏ MISRA.  ุฃูุถู ุฃู ุฃุนุทูู ุฃูุซูุฉ ุนูู ุงูุงูุชูุงูุงุช ุงูุชู ูุฏ ุชุคุฏู ุฅูู ุนูุงูุจ ูุฎููุฉ. <br><br>  ููุจุฏุฃ ูุน ูุญุฏุงุช ุงููุงูุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> FreeRTOS_ms_to_tick(ms) ( ( ms * configTICK_RATE_HZ + 500 ) / 1000 )</span></span></code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SOCKETS_htonl( ulIn ) ( ( uint32_t ) \ ( ( ( ulIn &amp; 0xFF ) </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt; 24 ) | ( ( ulIn &amp; 0xFF00 ) &lt;&lt; 8 ) \ | ( ( ulIn &amp; 0xFF0000 ) &gt;&gt; 8 ) | ( ( ulIn &amp; 0xFF000000 ) &gt;&gt; 24 ) ) )</span></span></span></span></code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LEFT_ROTATE( x, c ) ( ( x </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt; c ) | ( x &gt;&gt; ( 32 - c ) ) )</span></span></span></span></code> </pre> <br>  <b>ุชุญุฐูุฑุงุช PVS-Studio:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V2546 [MISRA C 20.7] ูุฌุจ ูุถุน ุงููุงูุฑู ููุนููุงุชู ุจูู ููุณูู.  ุงููุธุฑ ูู ูุญุต ุงููุนููุฉ "ูููู ุซุงููุฉ" ูู ุงููุงูุฑู "FreeRTOS_ms_to_tick".  FreeRTOS_IP.h 201 </li><li style=";text-align:right;direction:rtl">  V2546 [MISRA C 20.7] ูุฌุจ ูุถุน ุงููุงูุฑู ููุนููุงุชู ุจูู ููุณูู.  ุงููุธุฑ ูู ูุญุต ุงููุนููุฉ 'ulIn' ูู ุงููุงูุฑู 'SOCKETS_htonl'.  iot_secure_sockets.h 512 </li><li style=";text-align:right;direction:rtl">  V2546 [MISRA C 20.7] ูุฌุจ ูุถุน ุงููุงูุฑู ููุนููุงุชู ุจูู ููุณูู.  ุถุน ูู ุงุนุชุจุงุฑู ูุญุต ุงููุนููุงุช 'x' ู 'c' ูููุงูุฑู 'LEFT_ROTATE'.  iot_device_metrics.c 90 </li></ul><br>  ูุนู ุ ูุฐุง ุจุงูุถุจุท ูุง ุชููุฑ ููู.  ูุนููุงุช ูุญุฏุงุช ุงููุงูุฑู ูุฐู ููุณุช ุจูู ููุณูู.  ุฅุฐุง ูุงู ุดุฎุต ูุง ููุชุจ ุนู ุทุฑูู ุงูุฎุทุฃ ุดูุก ูู ูุฐุง ุงููุจูู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">val = LEFT_ROTATE(A[i] | <span class="hljs-number"><span class="hljs-number">1</span></span>, B);</code> </pre> <br>  ุณูุชู ุชูุณูุน "ุงุณุชุฏุนุงุก" ูุงูุฑู ุฅูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">val = ( ( A[i] | <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; B ) | ( A[i] | <span class="hljs-number"><span class="hljs-number">1</span></span> &gt;&gt; ( <span class="hljs-number"><span class="hljs-number">32</span></span> - B ) ) );</code> </pre> <br>  ุชุฐูุฑ ุฃููููุงุช ุงูุนูููุงุชุ  ุฃููุงู ุ ูุชู ุฅุฌุฑุงุก ุชุญูู bitwise ุ ูููุท ุจุนุฏ ุฐูู - "bitwise" ุฃู "bit".  ูุฐูู ุ ุณูุชู ูุณุฑ ููุทู ุงูุจุฑูุงูุฌ.  ูุซุงู ุฃุจุณุท: ูุงุฐุง ุณูุญุฏุซ ุฅุฐุง ุชู ุชูุฑูุฑ ุงูุชุนุจูุฑ " <i>x + y</i> " ูู ุงููุงูุฑู <i>FreeRTOS_ms_to_tick</i> ุ  ุฃุญุฏ ุงูุฃูุฏุงู ุงูุฑุฆูุณูุฉ ูู MISRA ูู ููุน ูุซู ูุฐู ุงูุญุงูุงุช. <br><br>  ูุฏ ูุฌุงุฏู ุงูุจุนุถ ุ "ุฅุฐุง ูุงู ูุฏูู ูุจุฑูุฌูู ูุง ูุนุฑููู ุฐูู ุ ููู ูุณุงุนุฏู ุฃู ูุนูุงุฑ!"  ูู ุฃุชูู ูุน ุฐูู.  ุงููุจุฑูุฌูู ูู ุฃูุถูุง ุฃุดุฎุงุต ุ ูุจุบุถ ุงููุธุฑ ุนู ูุฏู ุฎุจุฑุฉ ุฃู ุดุฎุต ุ ูููู ุฃูุถูุง ุฃู ูุชุนุจูุง ููุฎุทุฆูุง ูู ููุงูุฉ ุงูููู.  ูุฐุง ูู ุฃุญุฏ ุงูุฃุณุจุงุจ ุงูุชู ุชุฌุนู MISRA ุชูุตู ุจุดุฏุฉ ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงูุชุญููู ุงูุชููุงุฆู ูุงุฎุชุจุงุฑ ูุดุฑูุน ููุงูุชุซุงู. <br><br>  ุงุณูุญูุง ูู ุฃู ุฃุชุทุฑู ุฅูู ูุทูุฑู Amazon FreeRTOS: ููุฏ ุนุซุฑ PVS-Studio ุนูู 12 ูุญุฏุฉ ูุงูุฑู ุฃุฎุฑู ุบูุฑ ุขููุฉ ุ ูุฐุง ุนููู ุฃู ุชููู ุญุฑูุตูุง ูุนูู :) <br><br>  ุงูุชูุงู MISRA ุขุฎุฑ ูุซูุฑ ููุงูุชูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * @brief Callback for an asynchronous request to notify * that the response is complete. * * @param[in] 0pPrivData - User private data configured * with the HTTPS Client library request configuration. * @param[in] respHandle - Identifier for the current response finished. * @param[in] rc - Return code from the HTTPS Client Library * signaling a possible error. * @param[in] status - The HTTP response status. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _responseCompleteCallback(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* pPrivData, IotHttpsResponseHandle_t respHandle, IotHttpsReturnCode_t rc, <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> status) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>* pUploadSuccess = (<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>*)pPrivData; <span class="hljs-comment"><span class="hljs-comment">/* When the remote server response with 200 OK, the file was successfully uploaded. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status == IOT_HTTPS_STATUS_OK) { *pUploadSuccess = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { *pUploadSuccess = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* Post to the semaphore that the upload is finished. */</span></span> IotSemaphore_Post(&amp;(_uploadFinishedSem)); }</code> </pre> <br>  ููููู ุฃู ุชุฌุฏ ุนูุฉ ููุณูุ <br><br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V2537 [MISRA C 2.7] ูุฌุจ ุฃูุง ุชุญุชูู ุงููุธุงุฆู ุนูู ูุนููุงุช ุบูุฑ ูุณุชุฎุฏูุฉ.  ุงููุธุฑ ูู ูุญุต ุงููุนููุฉ: 'rc'.  iot_demo_https_s3_upload_async.c 234 <br><br>  ุฃููู ูุธุฑุฉ ูุงุญุตุฉ: ูุง ุชุณุชุฎุฏู ุงููุนููุฉ <i>rc</i> ูู ุฃู ููุงู ูู ุงูุฌุณู ุงููุธููู.  ุจูููุง ูููู ุชุนููู ุงููุธููุฉ ุจูุถูุญ ุฃู ูุฐู ุงููุนููุฉ ูู ุฑูุฒ ุฅุฑุฌุงุน ููุธููุฉ ุฃุฎุฑู ุ ูุฃูู ูููู ุฃู ูุดูุฑ ุฅูู ูุฌูุฏ ุฎุทุฃ.  ููุงุฐุง ูุง ูุชู ุงูุชุนุงูู ูุน ูุฐู ุงููุนููุฉ ุจุฃู ุดูู ูู ุงูุฃุดูุงูุ  ููุงู ุฎุทุฃ ูุง ุจูุถูุญ ููุง. <br><br>  ููุน ุฐูู ุ ุญุชู ุจุฏูู ูุฐู ุงูุชุนูููุงุช ุ ุบุงูุจูุง ูุง ุชุดูุฑ ุงููุนููุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ุฅูู ุงูููุทู ุงููุนุทูุจ ููุจุฑูุงูุฌ.  ูุฅูุง ุ ููุงุฐุง ุชุญุชุงุฌูุง ูู ุชูููุน ุงููุธููุฉุ <br><br>  ููุฏ ูุฏูุช ููุง ูุธููุฉ ุตุบูุฑุฉ ุฌูุฏุฉ ููุญุตูู ุนูู ูุซุงู ูู ุงูููุงู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุฏ ูุฌุฏุช 10 ุงููุนููุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ุงูุฃุฎุฑู.  ูุชู ุงุณุชุฎุฏุงู ุงููุซูุฑ ูููุง ูู ูุธุงุฆู ุฃูุจุฑ ุ ูููุณ ูู ุงูุณูู ุงูุชุดุงููุง. <br><br>  ุจุดูู ูุซูุฑ ููุฑูุจุฉ ุ ูู ูุชู ุงูุนุซูุฑ ุนูููุง ูู ูุจู.  ุจุนุฏ ูู ุดูุก ุ ุจุณูููุฉ ูุชุฑุฌููู ุงูุชุดุงู ูุซู ูุฐู ุงูุญุงูุงุช. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b80/6c7/bb9/b806c7bb94c335ce2712e9b46cffc560.png" alt="ุงูุดูู 1"></div><br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ูู ุชูู ูุฐู ุฌููุน ุงููุดููุงุช ุงูุชู ูุฌุฏูุง ุงููุญูู ุ ูููู ุชุจูู ุฃู ุงูููุงูุฉ ูุจูุฑุฉ ุฌุฏูุง ุจุงููุนู.  ุขูู ุฃู ูุชููู ูุทูุฑู amazon FreeRTOS ุจูุถู ุฐูู ูู ุชุตุญูุญ ุจุนุถ ุฃูุฌู ุงููุตูุฑ ุ ููุฏ ูุฑุบุจูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฌุฑุจุฉ ุจุฑูุงูุฌ PVS-Studio</a> ููุญุฏูู.  ุจูุฐู ุงูุทุฑููุฉ ุณูููู ุฃูุซุฑ ููุงุกูุฉ ููุชุญููู ุจุฏูุฉ ุงูุชุญุฐูุฑุงุช.  ูู ูุงูุน ุงูุฃูุฑ - ุงูุนูู ูุน ูุงุฌูุฉ ูุฑูุญุฉ ุฃุณูู ุจูุซูุฑ ูู ุงููุธุฑ ูู ุชูุฑูุฑ ูุตู. <br><br>  ุดูุฑุง ููุฑุงุกุฉ ููุงูุงุชูุง!  ูุฑุงูู ูู ุงูููุดูุฑ ุงูุชุงูู: ุฏ <br><br>  ููุงุญุธุฉ: ููุฏ ุญุฏุซ ูุฐุง ุงูููุงู ูู 31 ุฃูุชูุจุฑ. ูุงุจู ูุงูููู ุ ุดุจุงุจ ูุจูุงุช! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar473966/">https://habr.com/ru/post/ar473966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar473952/index.html">ููุง ูุชุจุช ููุธูุฉ ุงูุนูู ุงูุฏูููุฉ ูุงุณุชุฑุงุชูุฌูุฉ ุจุฏูุฑูุง ุงููุงุฆู</a></li>
<li><a href="../ar473956/index.html">ูุนูููุงุช ุณุฑูุฉ ูู ุดุฑูุฉ ูุงุชู ุชุงุฌุฑ ูุฎุฏุฑุงุช</a></li>
<li><a href="../ar473958/index.html">ูุฏู ุงููุงุจุงูููู ูู NICT ูุฌููุนุฉ ููููุฉ ุนุงููุฉ ุจุนุฑุถ ูุทุงู ูุฏุฑู 1 Pbit / s</a></li>
<li><a href="../ar473960/index.html">ุงุณุชุฑุงุชูุฌูุงุช ุชุนุฑูุจ ุงููุญุชูู</a></li>
<li><a href="../ar473962/index.html">ูุถุน ุงูุธูุงู ูู ุงูุขู ูู ูู ููุงู. ูู ูู ูููุฏ ุฌุฏุงุ (ูู ููุงูุฉ ุงูุงุณุชุทูุงุน ุงููุงุญู)</a></li>
<li><a href="../ar473972/index.html">ุญุณุจ ุชุฑุชูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุจุญุซ ุนู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS</a></li>
<li><a href="../ar473974/index.html">ุฅูุชุฑููู 19 - ุณูุนูุฏ ูุคุชูุฑ ุญูู ุฃุชูุชุฉ ุงูุงุชุตุงูุงุช ูู Voximplant ูู 14 ููููุจุฑ</a></li>
<li><a href="../ar473976/index.html">AWS Elasticsearch: ุงูููุชุฌ ุงููุนูุจ ุจุดูู ุฃุณุงุณู</a></li>
<li><a href="../ar473978/index.html">ูุซู ูุฐุง ุงูุฃูู ุ ูุซู ูุฐุง ุงูุฃูู ุ ุชุณุฌูู ุงูููุฏูุฉ ูุฎุฏูุฉ 2: 0</a></li>
<li><a href="../ar473980/index.html">ุงูุชูููููุฌูุง ูุงูุนุงูู ุงูุญูููู: 4 ุดุฑูุงุช ูุงุดุฆุฉ ุชุนูู ุนูู ุชุบููุฑ ูุณุชูุจู ุงูุชุตููู ุงูุฏุงุฎูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>