<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👃🏻 👇🏼 🐰 C ++中的Google样式指南。 第9部分 🏕️ 🤹 💅🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="第1部分。简介 
 ... 
 第8部分。命名 
 第9部分。注释 
 ... 


 本文是将C ++中的Google样式指南的一部分翻译成俄语的。 
 原始文章 （github上的fork）， 更新了翻译 。 

 留言 
 该代码需要注释（如果您打算阅读的话）。 以下规则描述了您应该评论的内容...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C ++中的Google样式指南。 第9部分</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480424/">  <a href="https://habr.com/ru/post/480422/">第1部分。简介</a> <br>  ... <br>  <a href="https://habr.com/ru/post/477722/">第8部分。命名</a> <br>  <b>第9部分。注释</b> <br>  ... <br><img src="https://habrastorage.org/webt/xw/iw/gv/xwiwgvrv9mtijocibex24w3tgu8.jpeg"><br><br> 本文是将C ++中的Google样式指南的一部分翻译成俄语的。 <br>  <a href="https://github.com/evgenykislov/styleguide/blob/gh-pages/cppguide.html">原始文章</a> （github上的fork）， <a href="https://evgenykislov.com/wp-content/custom/cpp_codestyle/cppguide_ru.html">更新了翻译</a> 。 <br><a name="habracut"></a><br><h2> 留言 </h2><br> 该代码需要注释（如果您打算阅读的话）。 以下规则描述了您应该评论的内容和方式。 但是请记住：尽管注释非常重要，但是完美的代码是自记录的。 对于类型和变量，使用“交谈”名称要好于晦涩的名称，后者需要在注释中进行描述。 <br><br> 根据以下读者的意见对代码进行评论：需要了解您的代码的程序员。 请记住，您可以成为下一个读者！ <br><br><h3> 评论风格 </h3><br> 使用<b>//</b>或<b>/ * * /</b>直到违反均匀性。 <br><br> 您可以使用<b>//</b>或<b>/ ** /</b> ，但是<b>//是</b> <em>更</em>可取的。 但是，请始终将注释样式与现有代码对齐。 <br><br><h3> 文件标题中的注释 </h3><br> 在每个文件的顶部插入许可证标头。 <br><br> 文件中的注释应描述其内容。 如果文件声明，描述或测试一种抽象（已经有注释），则无需在文件头中进行附加描述。 否则，请在文件顶部插入内容描述。 <br><br><h4> 法律信息和作者列表 </h4><br> 每个文件必须包含许可证信息。 描述的格式取决于项目中使用的许可证。 每个许可证（Apache 2.0，BSD，LGPL，GPL等）可能都有自己的设计要求。 <br><br> 如果您对该文件进行了重大更改，请考虑删除以前的作者列表。 更新的文件可能不再包含版权和作者列表。 <br><br><h4> 文件内容 </h4><br> 如果<b>.h</b>声明了多个抽象，则文件头中的注释通常应描述文件的内容以及抽象之间的关系。 评论中的一两个句子通常就足够了。 更详细的信息在其他位置（不在文件头中）签名。 <br><br> 不要在<b>.h</b>和<b>.cc</b>文件中重复注释-随着时间的流逝，注释会变得不同。 <br><br><h3> 类评论 </h3><br> 每个类声明（非常明显的声明除外）都应附带注释，该类的用途以及如何使用它。 <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   GargantuanTable. // : // GargantuanTableIterator* iter = table-&gt;NewIterator(); // for (iter-&gt;Seek("foo"); !iter-&gt;done(); iter-&gt;Next()) { // process(iter-&gt;key(), iter-&gt;value()); // } // delete iter; class GargantuanTableIterator { ... };</span></span></code> </pre> <br> 有关该类的注释应足以理解：如何以及何时使用该类，以及正确使用该类的其他要求。 如果需要，请描述类中的同步限制（假设）。 如果可以从不同的线程使用该类的实例，请确保写下多线程规则。 <br><br> 您还可以在类注释中提供简短的代码示例，以显示使用该类的难度。 <br><br> 通常，在不同的文件（ <b>.h</b>和<b>.cc</b> ）中声明/定义一个类。 描述该类使用的注释应该在接口定义旁边。 关于实现的复杂性的注释应与方法本身的代码接近。 <br><br><h3> 功能注释 </h3><br> 对函数声明的注释应描述函数的使用（在最明显的情况下除外）。 有关功能定义的注释描述了实现。 <br><br><h4> 功能声明 </h4><br> 每个函数的声明应有一个注释（在声明之前），函数的功能以及如何使用它。 仅当函数很简单并且其用法很明显时（例如，减去变量值的函数），才可以省略注释。 尝试以指示性的心情开始评论（“打开文件”）。 不建议使用命令式的情绪（“打开文件”）。 注释描述的是功能的本质，而不是功能的实现方式。 <br><br> 在函数声明的注释中，注意以下几点： <br><br><ul><li> 将什么输入到函数的输入中，并作为结果返回。 </li><li> 对于类的成员函数：实例是否保留引用参数， <br> 我需要释放内存吗？ </li><li> 函数是否分配调用代码应删除的内存。 </li><li> 是否可以有nullptr参数。 </li><li>  （算法）函数的复杂性。 </li><li> 是否可以同时允许来自不同线程的调用？ 同步呢？ </li></ul><br> 一个例子： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    .    //   .    //    GargantuanTable  . // //      . // //    : // Iterator* iter = table-&gt;NewIterator(); // iter-&gt;Seek(""); // return iter; //         , //    NewIterator()     . Iterator* GetIterator() const;</span></span></code> </pre><br> 但是，不要咀嚼明显的东西。 <br><br> 在记录重载函数时，请对原始函数进行主要的顽固更改。 而且，如果没有更改（经常发生），则根本不需要其他注释。 <br><br> 在评论构造函数和析构函数时，请记住，代码阅读器知道它们的用途。 因此，“破坏该对象”类型的注释是愚蠢的。 您可以描述构造函数的自变量（例如，更改指针的所有权）或析构函数进行的清除操作的方式。如果一切都清楚，则不要发表评论。 通常，析构函数通常没有注释（声明时）。 <br><br><h4> 功能定义 </h4><br> 如果在函数的实现中有任何技巧，可以在定义中添加解释性注释。 在其中，您可以使用代码描述技巧，概述计算的所有阶段，解释该实现或该实现的选择（特别是如果有更好的选择）。 您可以描述代码同步的原理（在这里我们进行了阻塞，但在此处进行了总结）。 <br><br> 请注意，您<em>不应</em>重复对函数声明的注释（来自<b>.h</b>文件等），可以简要地描述函数的作用，但主要应该是函数的作用。 <br><br><h3> 变量注释 </h3><br> 很好的方法是，变量名应立即说明其含义和原因，但是在某些情况下，还需要附加注释。 <br><br><h4> 类数据成员 </h4><br> 每个班级成员的目的应该很明显。 如果存在非显而易见的微妙之处（特殊含义，与其他成员的联系，对生存期的限制），则需要对所有这些进行评论。 但是，如果类型和名称足够，则无需添加注释。 <br><br> 另一方面，对特殊（非显而易见）值（nullptr或-1）的描述将很有用。 例如： <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-comment"><span class="hljs-comment">//       // -1 - ,         int num_total_entries_;</span></span></code> </pre><br><h4> 全局变量 </h4><br> 应该注释所有全局变量的目的以及（如果不明显的话）为什么应该是全局变量，例如： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,     const int kNumTestCases = 6;</span></span></code> </pre><br><h3> 实施意见 </h3><br> 在非显而易见，有趣，重要的代码段的情况下，评论函数或算法的实现。 <br><br><h4> 描述性评论 </h4><br> 复杂或非标准的代码块之前应加注释。 例如： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    2.  x    for (int i = 0; i &lt; result-&gt;size(); ++i) { x = (x &lt;&lt; 8) + (*result)[i]; (*result)[i] = x &gt;&gt; 1; x &amp;= 1; }</span></span></code> </pre><br><h4> 行注释 </h4><br> 建议用注释（通常位于行的末尾）来补充含义不明显的代码行，此注释应与代码分隔2个空格。 例如： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,    mmap_budget = max&lt;int64&gt;(0, mmap_budget - index_-&gt;length()); if (mmap_budget &gt;= data_size_ &amp;&amp; !MmapData(mmap_chunk_bytes, mlock)) return; //   </span></span></code> </pre><br> 请注意，在代码块上有2条注释：一条描述了代码的作用，另一条回顾了该函数返回时错误已在日志中。 <br><br><h4> 关于功能参数的评论 </h4><br> 当为函数分配参数不明显时，请考虑以下选项： <br><br><ul><li> 如果参数是固定值（文字常数）且该值 <br> 用在不同的代码块中（可以理解，该值是同一件事） <br> 您应该创建一个常量并明确使用它。 </li><li> 也许您应该将<b>bool</b>类型的参数替换为 <br>  <b>枚举</b> 。 这将使论点具有自决性。 </li><li> 对于在参数中使用多个配置选项的函数，您可以 <br> 创建一个单独的包含所有选项的类（或结构）。 并传递功能 <br> 该类的一个实例。 <br> 这种方法有几个优点：选项由名称指示，这说明了 <br> 他们的目的。 该函数中的参数数量减少了-代码更易于编写和阅读。 <br> 而且，如果您需要添加更多选项，则不必更改函数调用本身。 <br></li><li> 不要在参数中使用复杂的表达式，而应使用为其分配表达式的中间变量。 </li><li> 作为最后的选择，请在调用位置写注释以阐明参数的目的。 </li></ul><br> 请考虑以下示例： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    ? const DecimalNumber product = CalculateProduct(values, 7, false, nullptr);</span></span></code> </pre><br> 让我们尝试合并代码： <br><br><pre> <code class="cpp hljs">ProductOptions options; options.set_precision_decimals(<span class="hljs-number"><span class="hljs-number">7</span></span>); options.set_use_cache(ProductOptions::kDontUseCache); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DecimalNumber product = CalculateProduct(values, options, <span class="hljs-comment"><span class="hljs-comment">/*completion_callback=*/</span></span><span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>);</code> </pre><br><h4> 不该做什么 </h4><br> 不说明明显。 特别是，没有必要解释对了解C ++的人显而易见的事情。 相反，您可以描述此代码<i>为什么</i>这样做（甚至使代码自描述）。 <br><br> 比较： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    . &lt;-- :  ! auto iter = std::find(v.begin(), v.end(), element); if (iter != v.end()) { Process(element); }</span></span></code> </pre><br> 与此： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  (Process) "element"     auto iter = std::find(v.begin(), v.end(), element); if (iter != v.end()) { Process(element); }</span></span></code> </pre><br> 自描述代码根本不需要注释。 <br> 对上面代码的注释通常是显而易见的（并非必需）： <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsAlreadyProcessed(element)) { Process(element); }</code> </pre><br><h3> 标点，拼写和语法 </h3><br> 注意标点符号，拼写和语法：正确阅读书面注释要容易得多。 <br><br> 评论应写成故事：正确安排大写字母和标点符号。 在大多数情况下，完整的句子比短语片段更容易理解。 简短的评论（例如逐行）可能不太正式，但仍应遵循通用的风格。 <br><br> 尽管代码审查员过分强调使用逗号而不是分号可能会有些烦人，但保持较高的可读性和可理解性很重要。 正确的标点符号，拼写和语法可以大大促进这一点。 <br><br><h3> 评论TODO </h3><br> 使用<b>TODO</b>注释作为临时代码或足够好的（中间的，不是完美的）解决方案。 <br><br> 注释应包括<b>TODO</b>行（所有大写字母），后跟名称，电子邮件地址，缺陷ID或其他信息，以识别开发人员和<b>TODO</b>所写问题的性质，此描述的目的是以后可以查找更多详细信息。并不意味着指定的程序员将解决此问题。 因此，当您创建<b>TODO时</b> ，通常的名称就是您的名字。 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// TODO(kl@gmail.com):  "*"  . // TODO(Zeke)   . // TODO(bug 12345):   " ".</span></span></code> </pre><br> 如果您的<b>TODO</b>看起来像“让我们将来做不同的事情”，请指明一个特定的日期（“ 2005年11月更正”）或一个事件（“在所有客户端将处理XML请求时删除该代码”）。 <br><br> 注意事项： <br>  -链接可能会导致手册中尚未翻译的部分。 <br>  -对一般问题的讨论最好在<a href="https://habr.com/ru/post/480422/">第1部分中进行。</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN480424/">https://habr.com/ru/post/zh-CN480424/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN480412/index.html">Alexei Ragozin在jug.msk.ru会议上讨论OpenJDK 11中Java Flight Recorder的新功能和旧功能</a></li>
<li><a href="../zh-CN480414/index.html">上周第393期（2019年12月9日至15日）来自前端世界的新鲜材料摘要</a></li>
<li><a href="../zh-CN480416/index.html">C＃中的不安全通用数学</a></li>
<li><a href="../zh-CN480420/index.html">Matthew“ Oki” O'Connor的动脉粥样硬化及其治疗访谈</a></li>
<li><a href="../zh-CN480422/index.html">C ++中的Google样式指南。 第一部分</a></li>
<li><a href="../zh-CN480428/index.html">最简单的速记方法。 她的字母和字体。</a></li>
<li><a href="../zh-CN480430/index.html">视频编解码器的工作方式。 第2部分。什么，为什么，如何</a></li>
<li><a href="../zh-CN480432/index.html">第一个查看器的问题，或WebRTC视频流难以转换为HLS</a></li>
<li><a href="../zh-CN480438/index.html">12月16日至22日在莫斯科举行的数字活动</a></li>
<li><a href="../zh-CN480440/index.html">12月16日至22日在圣彼得堡举行的数字活动</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>