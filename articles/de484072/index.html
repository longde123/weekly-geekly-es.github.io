<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÉ üñïüèª üçá 5. Fortinet Getting Started v6.0. NAT üë©üèΩ üè° üë©‚Äç‚ù§Ô∏è‚Äçüë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gr√º√üe Willkommen zur f√ºnften Lektion von Fortinet Getting Started . In der letzten Lektion haben wir herausgefunden, wie Sicherheitsrichtlinien funkti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>5. Fortinet Getting Started v6.0. NAT</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/484072/"><img src="https://habrastorage.org/webt/zp/hu/i4/zphui4qn8xzxkrnibtvd4j44noq.png"><br><br>  Gr√º√üe  Willkommen zur f√ºnften Lektion von <a href="https://fortiservice.com/news/fortinet-getting-started-vvedenie/">Fortinet Getting Started</a> .  In der <a href="https://habr.com/ru/company/tssolution/blog/481882/">letzten Lektion haben</a> wir herausgefunden, wie Sicherheitsrichtlinien funktionieren.  Jetzt ist es Zeit, lokale Benutzer im Internet freizugeben.  Zu diesem Zweck werden wir in dieser Lektion untersuchen, wie der NAT-Mechanismus funktioniert. <br>  Neben der Freigabe von Benutzern f√ºr das Internet werden wir auch die Methode zur Ver√∂ffentlichung interner Dienste in Betracht ziehen.  Unter der Katze wird eine kurze Theorie aus dem Video sowie die Videolektion selbst vorgestellt. <a name="habracut"></a><br>  Network Address Translation (NAT) ist ein Mechanismus zum √úbersetzen von IP-Adressen von Netzwerkpaketen.  In Bezug auf Fortinet NAT wird es in zwei Typen unterteilt: Quell-NAT und Ziel-NAT. <br><br>  Die Namen sprechen f√ºr sich - bei Verwendung von Source NAT √§ndert sich die Adresse der Quelle, bei Verwendung von Destination NAT die Zieladresse. <br><br>  Dar√ºber hinaus gibt es mehrere NAT-Konfigurationsoptionen - Firewall Policy NAT und Central NAT. <br><br><img src="https://habrastorage.org/webt/wd/xo/bg/wdxobgt4wt5bshbcblbnwjo_pd8.png"><br><br>  Bei Verwendung der ersten Option m√ºssen Quell- und Ziel-NAT f√ºr jede Sicherheitsrichtlinie konfiguriert werden.  In diesem Fall verwendet Source NAT entweder die IP-Adresse der ausgehenden Schnittstelle oder den vorkonfigurierten IP-Pool.  Das Ziel-NAT verwendet ein vorkonfiguriertes Objekt (VIP - Virtual IP) als Zieladresse. <br><br>  Bei Verwendung von Central NAT wird die Konfiguration von Quell- und Ziel-NAT sofort f√ºr das gesamte Ger√§t (oder die virtuelle Dom√§ne) durchgef√ºhrt.  In diesem Fall gelten die NAT-Einstellungen f√ºr alle Richtlinien, abh√§ngig von den NAT-Quell- und -Zielregeln. <br><br>  Quell-NAT-Regeln werden in der zentralen Quell-NAT-Richtlinie konfiguriert.  Das Ziel-NAT wird √ºber das DNAT-Men√º mithilfe von IP-Adressen konfiguriert. <br><br>  In dieser Lektion werden wir nur Firewall-Richtlinien-NAT betrachten - wie die Praxis zeigt, ist diese Konfigurationsoption viel h√§ufiger als Central-NAT. <br><br>  Wie bereits erw√§hnt, gibt es beim Konfigurieren von Firewall Policy Source NAT zwei Konfigurationsoptionen: Ersetzen der IP-Adresse durch die Adresse der ausgehenden Schnittstelle oder durch die IP-Adresse aus dem vorkonfigurierten Pool von IP-Adressen.  Es sieht ungef√§hr so ‚Äã‚Äãaus wie auf dem Bild unten.  Als n√§chstes werde ich kurz auf m√∂gliche Pools eingehen, aber in der Praxis werden wir nur die Option mit der Adresse der ausgehenden Schnittstelle in Betracht ziehen - auf unserem Layout ben√∂tigen wir keine IP-Adresspools. <br><br><img src="https://habrastorage.org/webt/wc/yf/_w/wcyf_w3n-tloy66twrczoj7mlle.png"><br><br>  Der IP-Pool definiert eine oder mehrere IP-Adressen, die w√§hrend der Sitzung als Quelladresse verwendet werden.  Diese IP-Adressen werden anstelle der IP-Adresse der ausgehenden FortiGate-Schnittstelle verwendet. <br><br>  Es gibt 4 Arten von IP-Pools, die in FortiGate konfiguriert werden k√∂nnen: <br><br><ul><li>  √úberlastung </li><li>  Eins zu eins </li><li>  Feste Portreichweite </li><li>  Zuweisung von Portbl√∂cken </li></ul><br>  √úberlast ist der Haupt-IP-Pool.  In ihr werden IP-Adressen nach dem Schema viele zu einer oder viele zu mehreren konvertiert.  Port-√úbersetzung wird ebenfalls verwendet.  Betrachten Sie die in der folgenden Abbildung gezeigte Schaltung.  Wir haben ein Paket mit bestimmten Feldern Quelle und Ziel.  Wenn eine Firewall-Richtlinie f√ºr diesen Paketzugriff auf ein externes Netzwerk gilt, wird die NAT-Regel auf dieses Netzwerk angewendet.  Infolgedessen wird in diesem Paket das Feld "Quelle" durch eine der im IP-Pool angegebenen IP-Adressen ersetzt. <br><br><img src="https://habrastorage.org/webt/8z/i1/af/8zi1afghepy-mwhlpbyar_hqcqy.png"><br><br>  Ein Pool vom Typ Eins zu Eins definiert auch viele externe IP-Adressen.  Wenn ein Paket einer Firewall-Richtlinie mit aktivierter NAT-Regel unterliegt, wird die IP-Adresse im Feld Quelle in eine der Adressen ge√§ndert, die zu diesem Pool geh√∂ren.  Die Ersetzung erfolgt nach der Regel - "zuerst eingegeben, zuerst zugestellt".  Betrachten Sie zur Verdeutlichung ein Beispiel. <br><br>  Ein Computer aus dem lokalen Netzwerk mit der IP-Adresse 192.168.1.25 sendet das Paket an das externe Netzwerk.  Es f√§llt unter die NAT-Regel, und das Feld "Quelle" √§ndert sich in die erste IP-Adresse aus dem Pool. In unserem Fall lautet sie 83.235.123.5.  Es ist zu beachten, dass bei Verwendung dieses IP-Pools keine Port-√úbersetzung verwendet wird.  Wenn danach ein Computer aus demselben lokalen Netzwerk mit einer Adresse, z. B. 192.168.1.35, ein Paket an ein externes Netzwerk sendet und ebenfalls unter diese NAT-Regel f√§llt, √§ndert sich die IP-Adresse im Feld Quelle dieses Pakets in 83.235.123.6.  Befinden sich keine Adressen mehr im Pool, werden nachfolgende Verbindungen abgelehnt.  Das hei√üt, in diesem Fall k√∂nnen unter unserer NAT-Regel 4 Computer gleichzeitig abst√ºrzen. <br><br><img src="https://habrastorage.org/webt/ay/s2/6k/ays26khdzqemcgga0ouwn-7ejxg.png"><br><br>  Der feste Portbereich verbindet interne und externe Bereiche von IP-Adressen.  Die Port-√úbersetzung ist ebenfalls deaktiviert.  Auf diese Weise k√∂nnen Sie den Anfang oder das Ende des Pools interner IP-Adressen mit dem Anfang oder dem Ende des Pools externer IP-Adressen verbinden.  Im folgenden Beispiel wird der interne Adresspool 192.168.1.25 - 192.168.1.28 dem externen Adresspool 83.235.123.5 - 83.235.125.8 zugeordnet. <br><br><img src="https://habrastorage.org/webt/3h/hn/l8/3hhnl8bdcl7wmalr2dqj_dz1gl4.png"><br><br>  Zuweisung von Port-Bl√∂cken - Dieser IP-Pool wird verwendet, um Benutzern des IP-Pools einen Block von Ports zuzuweisen.  Neben dem IP-Pool selbst sollten hier auch zwei Parameter angegeben werden - die Blockgr√∂√üe und die Anzahl der f√ºr jeden Benutzer zugewiesenen Bl√∂cke. <br><br><img src="https://habrastorage.org/webt/js/jm/dg/jsjmdg6atbpwe_tgv9bqswkshxo.png"><br><br>  Betrachten Sie nun die Technologie von Destination NAT.  Es basiert auf virtuellen IP-Adressen (VIP).  Bei Paketen, die unter die NAT-Zielregeln fallen, √§ndert sich die IP-Adresse im Feld Ziel: In der Regel wird die √∂ffentliche Internetadresse in die Adresse des privaten Servers ge√§ndert.  Virtuelle IP-Adressen werden in Firewall-Richtlinien als Zielfeld verwendet. <br><br>  Der Standardtyp der virtuellen IP-Adresse ist Statisches NAT.  Diese Entsprechung von externen und internen Adressen ist eins zu eins. <br><br>  Anstelle von statischem NAT k√∂nnen virtuelle Adressen auf die Weiterleitung bestimmter Ports beschr√§nkt werden.  Verkn√ºpfen Sie beispielsweise Verbindungen zu einer externen Adresse an Port 8080 mit einer Verbindung zu einer internen IP-Adresse an Port 80. <br><br>  Im folgenden Beispiel versucht der Computer mit der Adresse 172.17.10.25, auf die Adresse 83.235.123.20 an Port 80 zuzugreifen.  Diese Verbindung unterliegt der DNAT-Regel, sodass sich die Ziel-IP-Adresse in 10.10.10.10 √§ndert. <br><br><img src="https://habrastorage.org/webt/ps/fa/17/psfa17kfl1nfpqa5qbbkw_a3sow.png"><br><br>  Das Video beschreibt die Theorie und bietet praktische Beispiele f√ºr die Einstellung von Quell- und Ziel-NAT. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/oQrHyhPpIHo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  In der n√§chsten Lektion werden wir uns mit der Gew√§hrleistung der Benutzersicherheit im Internet befassen.  Insbesondere werden wir uns in der n√§chsten Lektion mit den Funktionen der Webfilterung und der Anwendungssteuerung befassen.  Um dies nicht zu verpassen, sollten Sie auf den folgenden Kan√§len auf dem Laufenden bleiben: <br><br>  <a href="https://www.youtube.com/channel/UCKOESE8nBWQPuQmi994_YMA">Youtube</a> <br>  <a href="https://vk.com/fortiservice">VKontakte-Gruppe</a> <br>  <a href="https://zen.yandex.ru/id/5c7d2162fa818600ae386a52">Yandex Zen</a> <br>  <a href="https://fortiservice.com/">Unsere Seite</a> <br>  <a href="https://www.t.me/tssolution">Telegrammkanal</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484072/">https://habr.com/ru/post/de484072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484062/index.html">Englisch lernen mit MEMASICS</a></li>
<li><a href="../de484064/index.html">Wie bereite ich ein Spiel f√ºr die Lokalisierung vor? 10 Grundregeln</a></li>
<li><a href="../de484066/index.html">Geld gegen Team. Nicht die offensichtlichsten Aspekte des Verh√§ltnisses von Unternehmern, Gr√ºndern und Investoren</a></li>
<li><a href="../de484068/index.html">gRPC als dienst√ºbergreifendes Kommunikationsprotokoll. Yandex-Bericht</a></li>
<li><a href="../de484070/index.html">Wie wir ein Betrugsbek√§mpfungssystem in vier H√§nden und drei K√∂pfen geschrieben haben</a></li>
<li><a href="../de484076/index.html">Speicherort f√ºr Kryptow√§hrung: Besteuerung von Kryptow√§hrungen in verschiedenen L√§ndern</a></li>
<li><a href="../de484084/index.html">1C-Bitrix und ein Versuch, es einzuf√ºhren</a></li>
<li><a href="../de484088/index.html">Passwort-Hit-Parade (Analyse von ~ 5 Milliarden Passw√∂rtern nach Undichtigkeiten)</a></li>
<li><a href="../de484090/index.html">Neue IT-Infrastruktur f√ºr das Russian Post Data Center</a></li>
<li><a href="../de484092/index.html">Etwas gekleidete F√ºrsten und Adlige</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>