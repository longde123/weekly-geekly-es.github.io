<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí° üíÖüèæ ‚õ¥Ô∏è Flatterintegrationstests - ganz einfach ü•ù üìÇ üñ≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich denke, viele Leute sind mit Flutter bereits vertraut und haben, zumindest aus Interesse, einfache Anwendungen darauf gestartet. Es ist an der Zeit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Flatterintegrationstests - ganz einfach</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483468/"><p>  Ich denke, viele Leute sind mit Flutter bereits vertraut und haben, zumindest aus Interesse, einfache Anwendungen darauf gestartet.  Es ist an der Zeit sicherzustellen, dass alles so funktioniert, wie es ben√∂tigt wird, und Integrationstests helfen uns dabei. <br><img src="https://habrastorage.org/webt/rc/uh/yo/rcuhyopuvni8ghulnrotc1hfiru.png"></p><a name="habracut"></a><br><p>  Integrationstests f√ºr Flutter werden mit dem Flutter-Treiber geschrieben, f√ºr den es <a href="https://flutter.dev/docs/cookbook/testing/integration/introduction" rel="nofollow">auf der offiziellen Website</a> ein <a href="https://flutter.dev/docs/cookbook/testing/integration/introduction" rel="nofollow">einfaches und verst√§ndliches Tutorial gibt</a> .  Solche Tests √§hneln in ihrer Struktur <a href="https://developer.android.com/training/testing/espresso" rel="nofollow">Espresso</a> aus der Android-Welt.  Zuerst m√ºssen Sie die UI-Elemente auf dem Bildschirm finden: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder button = find.byValueKey(<span class="hljs-string"><span class="hljs-string">"button"</span></span>);</code> </pre> <br><p>  F√ºhren Sie dann einige Aktionen mit ihnen aus: </p><br><pre> <code class="java hljs">driver = await FlutterDriver.connect(); ... await driver.tap(button);</code> </pre> <br><p>  und vergewissern Sie sich, dass die erforderlichen Benutzeroberfl√§chenelemente den gew√ºnschten Status haben: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder text = find.byValueKey(<span class="hljs-string"><span class="hljs-string">"text"</span></span>); expect(await driver.getText(text), <span class="hljs-string"><span class="hljs-string">"some text"</span></span>);</code> </pre> <br><p>  Mit einem einfachen Beispiel sieht nat√ºrlich alles elementar aus.  Angesichts des Wachstums der getesteten Anwendung und der zunehmenden Anzahl von Tests m√∂chte ich die Suche nach Benutzeroberfl√§chenelementen jedoch nicht vor jedem Test wiederholen.  Au√üerdem m√ºssen Sie diese UI-Elemente strukturieren, da es viele Bildschirme geben kann.  Machen Sie es sich dazu bequemer, Tests zu schreiben. </p><br><h2 id="screen-objects">  Bildschirmobjekte </h2><br><p>  In Android ( <a href="https://github.com/agoda-com/Kakao" rel="nofollow">Kakao</a> ) wird dieses Problem durch Gruppieren von Benutzeroberfl√§chenelementen von jedem Bildschirm in Bildschirm ( <a href="https://github.com/agoda-com/Kakao" rel="nofollow">Seitenobjekt</a> ) gel√∂st.  Ein √§hnlicher Ansatz kann hier angewendet werden, mit der Ausnahme, dass Sie in Flutter zum Ausf√ºhren von Aktionen mit UI-Elementen nicht nur <code>Finder</code> (zum Suchen nach einem UI-Element), sondern auch <code>FlutterDriver</code> (zum Ausf√ºhren einer Aktion) ben√∂tigen, sodass Sie einen Link zu <code>FlutterDriver</code> in speichern <code>FlutterDriver</code> <code>Screen</code> . </p><br><p>  Um jedes UI-Element zu definieren, f√ºgen wir die <a href="" rel="nofollow"><code>DWidget</code></a> Klasse hinzu (D - in diesem Fall vom Wort Dart).  Um ein <code>DWidget</code> zu erstellen <code>DWidget</code> ben√∂tigen Sie einen <code>FlutterDriver</code> , mit dem Aktionen auf diesem UI-Element ausgef√ºhrt werden, sowie einen <code>ValueKey</code> , der mit dem <code>ValueKey</code> Flutter des Widgets aus der Anwendung √ºbereinstimmt, mit der wir interagieren m√∂chten: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder _finder; DWidget(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._driver, dynamic valueKey) : _finder = find.byValueKey(valueKey); ...</code> </pre> <br><p>  <code>find.byValueKey(‚Ä¶)</code> beim manuellen Erstellen jedes <code>DWidget</code> unpraktisch. <code>DWidget</code> daher den <code>ValueKey</code> Wert <code>ValueKey</code> an den <code>ValueKey</code> , und das <code>DWidget</code> selbst erh√§lt den gew√ºnschten <code>SerializableFinder</code> .  Es ist auch nicht sehr praktisch, <code>FlutterDriver</code> beim Erstellen jedes <code>DWidget</code> manuell zu √ºbergeben. Sie k√∂nnen <code>FlutterDriver</code> in <a href="" rel="nofollow"><code>BaseScreen</code></a> speichern <code>FlutterDriver</code> in <a href="" rel="nofollow"><code>BaseScreen</code></a> √ºbertragen und <code>DWidget</code> eine neue Methode <code>BaseScreen</code> , um <code>BaseScreen</code> zu erstellen: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; BaseScreen(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._driver); <span class="hljs-function"><span class="hljs-function">DWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dWidget</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dynamic key)</span></span></span><span class="hljs-function"> </span></span>=&gt; DWidget(_driver, key); ...</code> </pre> <br><p>  So wird das Erstellen von Screens-Klassen und das Abrufen von UI-Elementen viel einfacher: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ MainScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get button =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'button'</span></span>); DWidget get textField =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'text_field'</span></span>); ... }</code> </pre> <br><h2 id="izbavlyaemsya-ot-await">  Das Warten loswerden </h2><br><p>  Eine weitere <code>FlutterDriver</code> Sache beim Schreiben von Tests mit <code>FlutterDriver</code> ist die Notwendigkeit, vor jeder Aktion eine <code>FlutterDriver</code> hinzuzuf√ºgen: </p><br><pre> <code class="java hljs">await driver.tap(button); await driver.scrollUntilVisible(list, checkBox); await driver.tap(checkBox); await driver.tap(text); await driver.enterText(<span class="hljs-string"><span class="hljs-string">"some text"</span></span>);</code> </pre> <br><p>  Das Vergessen des <code>await</code> ist einfach, und ohne dies funktionieren die Tests nicht ordnungsgem√§√ü, da <code>driver</code> <code>Future&lt;void&gt;</code> Wenn sie ohne <code>await</code> aufgerufen werden <code>await</code> bis zum ersten <code>await</code> in der Methode ausgef√ºhrt und der Rest der Methode wird auf sp√§ter verschoben. </p><br><p>  Sie k√∂nnen dies <a href="" rel="nofollow"><code>TestAction</code></a> indem Sie eine <a href="" rel="nofollow"><code>TestAction</code></a> , die <code>Future</code> " <a href="" rel="nofollow"><code>TestAction</code></a> ", sodass wir warten k√∂nnen, bis eine Aktion abgeschlossen ist, bevor wir zur n√§chsten <a href="" rel="nofollow"><code>TestAction</code></a> : </p><br><pre> <code class="java hljs">typedef TestAction = <span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre> <br><p>  ( <code>TestAction</code> ist im Wesentlichen jede Funktion (oder Lambda), die eine <code>Future&lt;void&gt;</code> zur√ºckgibt.) </p><br><p>  Jetzt k√∂nnen Sie die <code>TestAction</code> Sequenz ganz einfach <code>TestAction</code> , ohne unn√∂tig warten zu m√ºssen: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterable&lt;TestAction&gt; actions)</span></span></span><span class="hljs-function"> async </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">final</span></span> action in actions) { <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } }</code> </pre> <br><h2 id="ispolzuem-testaction-v-dwidget">  Verwenden von <code>TestAction</code> in einem <code>DWidget</code> </h2><br><p>  <code>DWidget</code> zur Interaktion mit UI-Elementen verwendet. Es ist sehr praktisch, wenn diese Aktionen <code>TestAction</code> damit sie in der <code>runTestAction</code> Methode verwendet werden k√∂nnen.  Zu diesem <code>DWidget</code> verf√ºgt die <code>DWidget</code> Klasse √ºber folgende Aktionsmethoden: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder _finder; ... <span class="hljs-function"><span class="hljs-function">TestAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">({Duration timeout})</span></span></span><span class="hljs-function"> </span></span>=&gt; () =&gt; _driver.tap(_finder, timeout: timeout); <span class="hljs-function"><span class="hljs-function">TestAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text, {Duration timeout})</span></span></span><span class="hljs-function"> </span></span>=&gt; () async { await _driver.tap(_finder, timeout: timeout); await _driver.enterText(text ?? <span class="hljs-string"><span class="hljs-string">""</span></span>, timeout: timeout); }; ... }</code> </pre> <br><p>  Jetzt k√∂nnen Sie Tests wie folgt schreiben: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ MainScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get field_1 =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'field_1'</span></span>); DWidget get field_2 =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'field_2'</span></span>); <span class="hljs-function"><span class="hljs-function">DWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field2Variant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>=&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'variant_$i'</span></span>); DWidget get result =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'result'</span></span>); } ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> mainScreen = MainScreen(driver); <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ mainScreen.result.hasText(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, mainScreen.field_1.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"3"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, mainScreen.field_2.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, mainScreen.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field2Variant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, mainScreen.result.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 5"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, ])</span></span>;</code> </pre> <br><p>  Wenn Sie in <code>runTestActions</code> eine Aktion <code>runTestActions</code> , die nicht mit <code>DWidget</code> , m√ºssen Sie nur ein Lambda erstellen, das ein <code>Future&lt;void&gt;</code> <code>DWidget</code> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ mainScreen.result.hasText(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>=&gt; driver.requestData(<span class="hljs-string"><span class="hljs-string">"some_message"</span></span>), () async =&gt; print(<span class="hljs-string"><span class="hljs-string">"some_text"</span></span>), mainScreen.field_1.setText(<span class="hljs-string"><span class="hljs-string">"3"</span></span>), ]);</code> </pre> <br><h2 id="flutterdriverhelper">  FlutterDriverHelper </h2><br><p>  <code>FlutterDriver</code> bietet verschiedene Methoden f√ºr die Interaktion mit <code>FlutterDriver</code> (Dr√ºcken, Empfangen und Eingeben von Text, Scrollen usw.). F√ºr diese Methoden verf√ºgt <code>DWidget</code> √ºber entsprechende Methoden, die <code>TestAction</code> . </p><br><p>  Der <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow"><code>FlutterDriverHelper</code> halber wird</a> der <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow"><code>FlutterDriverHelper</code></a> in diesem Artikel beschriebene Code als <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow"><code>FlutterDriverHelper</code></a> Bibliothek <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow">auf pub.dev ver√∂ffentlicht</a> . </p><br><p>  Um durch Listen zu scrollen, in denen Elemente dynamisch erstellt werden (z. B. <code>ListView.builder</code> ), verf√ºgt <code>FlutterDriver</code> √ºber eine <code>scrollUntilVisible</code> Methode: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrollUntilVisible</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( SerializableFinder scrollable, SerializableFinder item, { </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> alignment = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dxScroll = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dyScroll = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Duration timeout, })</span></span></span><span class="hljs-function"> async </span></span>{ ... }</code> </pre> <br><p>  Diese Methode scrollt das scrollbare Widget in die angegebene Richtung, bis das <code>item</code> Widget auf dem Bildschirm angezeigt wird (oder bis eine <code>timeout</code> ).  Um nicht bei jedem Bildlauf einen <code>DWidget</code> , wurde die DScrollItem-Klasse hinzugef√ºgt, die ein <code>DWidget</code> erbt und ein Listenelement darstellt.  Es enth√§lt einen Link zu <code>scrollable</code> , so dass beim Scrollen nur <code>dyScroll</code> oder <code>dxScroll</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecondScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ SecondScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get list =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">"list"</span></span>); <span class="hljs-function"><span class="hljs-function">DScrollItem </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">item</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>=&gt; dScrollItem(<span class="hljs-string"><span class="hljs-string">'item_$index'</span></span>, list); } ... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> secondScreen = SecondScreen(driver); <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ secondScreen.item(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">42</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrollUntilVisible</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dyScroll: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-300</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, ... ])</span></span>;</code> </pre> <br><p>  W√§hrend der Tests k√∂nnen Sie Screenshots der Anwendung machen, und <code>FlutterDriverHelper</code> verf√ºgt √ºber einen <a href="" rel="nofollow"><code>Screenshoter</code></a> , der Screenshots mit der aktuellen Uhrzeit im richtigen Ordner speichert und mit <code>TestAction</code> . </p><br><h2 id="drugie-problemy-i-ih-resheniya">  Andere Probleme und ihre L√∂sungen </h2><br><ul><li>  Ich konnte keine Standardmethode zum Klicken auf Schaltfl√§chen in den Zeit- / Datumsdialogen finden - ich muss <a href="" rel="nofollow"><code>TestHooks</code></a> .  <code>TestHooks</code> k√∂nnen auch n√ºtzlich sein, um die aktuelle Uhrzeit / das aktuelle Datum w√§hrend des Tests zu √§ndern. </li><li>  In der Dropdown-Liste f√ºr <code>DropdownButtonFormField</code> Sie den <code>key</code> nicht f√ºr <code>DropdownMenuItem</code> , sondern f√ºr das <code>DropdownMenuItem</code> dieses <code>DropdownMenuItem</code> , da der <code>Flutter Driver</code> ihn sonst nicht finden kann.  Au√üerdem funktioniert das Scrollen in der Dropdown-Liste noch nicht ( <a href="https://github.com/flutter/flutter/issues/37903" rel="nofollow">Problem bei github.com</a> ). </li><li>  Die <code>FlutterDriver.getCenter</code> Methode gibt <code>Future&lt;DriverOffset&gt;</code> , aber <code>DriverOffset</code> nicht Teil der √∂ffentlichen API ( <code>DriverOffset</code> <a href="https://github.com/flutter/flutter/issues/44367" rel="nofollow">auf github.com</a> ) </li><li>  Es gibt einige problematischere und nicht offensichtliche Dinge, die bereits existieren.  Sie k√∂nnen dar√ºber in einem <a href="https://medium.com/flutter-community/blazingly-fast-flutter-driver-tests-5e375c833aa" rel="nofollow">wunderbaren Artikel</a> lesen.  Besonders n√ºtzlich war die M√∂glichkeit, Tests auf dem Desktop auszuf√ºhren und den Status der Anwendung vor dem Start jedes Tests zur√ºckzusetzen. </li><li>  Sie k√∂nnen Tests mit Github-Aktionen ausf√ºhren.  Weitere Details <a href="https://medium.com/flutter-community/run-flutter-driver-tests-on-github-actions-13c639c7e4ab" rel="nofollow">hier</a> . </li></ul><br><h2 id="todo">  Todo </h2><br><p>  Zuk√ºnftige <code>FlutterDriverHelper</code> f√ºr <code>FlutterDriverHelper</code> beinhalten: </p><br><ul><li>  Automatisches Scrollen zum gew√ºnschten Listenelement, wenn es zum Zeitpunkt des Zugriffs nicht auf dem Bildschirm angezeigt wird (wie in der <a href="https://github.com/KasperskyLab/Kaspresso" rel="nofollow">Kaspresso-</a> Bibliothek f√ºr Android).  Wenn m√∂glich, dann auch in beide Richtungen. </li><li>  Interceptors f√ºr Aktionen, die mit einem <code>Dwidget</code> oder <code>DscrollItem</code> . </li></ul><br><p>  <em>Kommentare und konstruktives Feedback sind willkommen.</em> </p><br><p>  <strong>Update (15.01.2020)</strong> : In Version <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow">1.1.0 wurde</a> <code>TestAction</code> zu einer Klasse mit dem Feld <code>String name</code> .  Und dank dessen wurde die Protokollierung aller in der <code>runTestActions</code> Methode ausgef√ºhrten Aktionen <code>runTestActions</code> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de483468/">https://habr.com/ru/post/de483468/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de483454/index.html">Wechseln von Mercurial zu GIT in Atlassian Bitbucket mit Speichern von Dateien in kyrillischer Sprache</a></li>
<li><a href="../de483458/index.html">GreenPig-Datenbankassistent</a></li>
<li><a href="../de483460/index.html">SQL HowTo: Erstellen von Ketten mit Fensterfunktionen</a></li>
<li><a href="../de483462/index.html">Halt die Klappe und nimm mein Geld</a></li>
<li><a href="../de483466/index.html">Einf√ºhrung in die Backpropagation-Methode</a></li>
<li><a href="../de483470/index.html">Fliesen effizient verlegen (Pro CSS, SVG, Muster und mehr)</a></li>
<li><a href="../de483472/index.html">Alles l√∂schen: So l√∂schen Sie Daten und setzen die NVMe-SSD auf die Werkseinstellungen zur√ºck</a></li>
<li><a href="../de483476/index.html">Die Moral des Robotertransports: Das Problem des Wagens, Risiken und Konsequenzen</a></li>
<li><a href="../de483478/index.html">Sonne, Wind und Wasser ver 0.1</a></li>
<li><a href="../de483480/index.html">Kreuzwortr√§tsel "F√ºhlen Sie sich wie ein SOC-Analyst"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>