<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👨🏾 ⏲️ 👏🏿 Bekerja dengan string pada tahap kompilasi dalam C ++ modern 👨🏻‍🏫 💵 👩‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika Anda memprogram dalam C ++, Anda mungkin bertanya-tanya mengapa Anda tidak dapat membandingkan dua string literal atau melakukan penggabungannya:...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bekerja dengan string pada tahap kompilasi dalam C ++ modern</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428846/"><p><img src="https://habrastorage.org/webt/4i/nz/cv/4inzcv5q6x14bvgcv4b4l5fbzdi.jpeg"></p><br><p>  Jika Anda memprogram dalam C ++, Anda mungkin bertanya-tanya mengapa Anda tidak dapat membandingkan dua string literal atau melakukan penggabungannya: </p><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = <span class="hljs-string"><span class="hljs-string">"hello"</span></span> + <span class="hljs-string"><span class="hljs-string">"world"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   if ("hello" &lt; "world") { // ,    ,   // ... }</span></span></code> </pre> <br><p>  Namun, seperti yang mereka katakan, "itu tidak mungkin, tetapi jika Anda benar-benar ingin, maka Anda bisa."  Kami akan mematahkan stereotip di bawah potongan, dan tepat di tahap kompilasi. </p><a name="habracut"></a><br><h3 id="zachem-vse-eto-nuzhno">  Kenapa semua ini dibutuhkan </h3><br><p>  Di salah satu proyek yang sedang saya kerjakan, sudah biasa menggunakan std :: string sebagai konstanta string.  Proyek ini memiliki beberapa modul yang mendefinisikan konstanta string global: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// plugin.h const std::string PLUGIN_PATH = "/usr/local/lib/project/plugins/"; // ...</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// sample_plugin.h const std::string SAMPLE_PLUGIN_LIB = PLUGIN_PATH + "sample.so"; // ...</span></span></code> </pre> <br><p>  Saya pikir Anda sudah menebak apa yang terjadi suatu hari.  <code>SAMPLE_PLUGIN_PATH</code> mengambil nilai <code>"sample.so"</code> , terlepas dari kenyataan bahwa <code>PLUGIN_PATH</code> memiliki nilai <code>"/usr/local/lib/project/plugins/"</code> , seperti yang diharapkan.  Bagaimana ini bisa terjadi?  Semuanya sangat sederhana, urutan inisialisasi objek global tidak ditentukan, pada saat inisialisasi <code>SAMPLE_PLUGIN_PATH</code> variabel <code>PLUGIN_PATH</code> kosong. </p><br><p>  Selain itu, pendekatan ini memiliki sejumlah kelemahan.  Pertama, pengecualian yang dilemparkan saat membuat objek global tidak tertangkap.  Kedua, inisialisasi terjadi selama eksekusi program, yang menghabiskan waktu prosesor yang berharga. </p><br><p>  Saat itulah saya memiliki ide untuk bekerja dengan string pada tahap kompilasi, yang akhirnya mengarah pada penulisan artikel ini. </p><br><p>  Pada artikel ini, kami akan mempertimbangkan jalur yang dapat dioperasikan pada tahap kompilasi.  Kami akan menyebut saluran tersebut statis. </p><br><p>  Semua operasi yang diterapkan dimasukkan dalam perpustakaan untuk bekerja dengan string statis.  Kode sumber perpustakaan tersedia di github, tautannya ada di akhir artikel. </p><br><p>  Setidaknya C ++ 14 diperlukan untuk menggunakan perpustakaan. </p><br><h3 id="opredelenie-staticheskoy-stroki">  Definisi String Statis </h3><br><p>  Kami mendefinisikan string statis sebagai array karakter, untuk kenyamanan kami menganggap bahwa string selalu berakhir dengan karakter nol: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> static_string = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, Size&gt;; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-number"><span class="hljs-number">6</span></span>&gt; hello = {<span class="hljs-string"><span class="hljs-string">'H'</span></span>, <span class="hljs-string"><span class="hljs-string">'e'</span></span>, <span class="hljs-string"><span class="hljs-string">'l'</span></span>, <span class="hljs-string"><span class="hljs-string">'l'</span></span>, <span class="hljs-string"><span class="hljs-string">'o'</span></span>, <span class="hljs-string"><span class="hljs-string">'\0'</span></span>};</code> </pre> <br><p>  Di sini Anda dapat pergi dengan cara yang berbeda, dan mendefinisikan string sebagai tupel karakter.  Pilihan ini bagi saya lebih memakan waktu dan kurang nyaman.  Karena itu, tidak akan dipertimbangkan di sini. </p><br><h3 id="sozdanie-staticheskoy-stroki">  Membuat string statis </h3><br><p>  Lihatlah definisi garis halo di atas, itu hanya mengerikan.  Pertama, kita perlu terlebih dahulu menghitung panjang array.  Kedua, Anda harus ingat untuk menulis karakter nol di bagian akhir.  Ketiga, semua koma, tanda kurung, dan tanda kutip ini.  Pasti ada sesuatu yang harus dilakukan tentang ini.  Saya ingin menulis sesuatu seperti ini: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello = make_static_string(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>);</code> </pre> <br><p>  Di sini salah satu bentuk templat variabel akan membantu kami, yang memungkinkan kami memperluas argumen templat sebagai indeks untuk inisialisasi agregat string statis kami dari string literal: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Indexes) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> (&amp; str)[Size]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str[Indexes] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; } <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello = make_static_string&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// hello == "hello"</span></span></code> </pre> <br><p>  Sudah lebih baik, tetapi indeks masih harus ditulis dengan tangan.  Di sini kami juga mencatat bahwa jika Anda tidak menentukan semua indeks, Anda bisa mendapatkan substring dari string literal, dan jika Anda menuliskannya dalam urutan terbalik, maka kebalikannya: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> hello1 = make_static_string&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// hello1 == "ell" constexpr hello2 = make_static_string&lt;4, 3, 2, 1, 0&gt;("hello"); // hello2 == "olleh"</span></span></code> </pre> <br><p>  Pertimbangan ini akan sangat bermanfaat bagi kita di masa depan. </p><br><p>  Sekarang kita perlu entah bagaimana menghasilkan urutan indeks baris.  Untuk melakukan ini, terapkan trik pewarisan.  Tentukan struktur kosong (Anda perlu mewarisi sesuatu) dengan satu set indeks yang diperlukan sebagai parameter templat: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index_sequence</span></span></span><span class="hljs-class"> {</span></span>};</code> </pre> <br><p>  Kami mendefinisikan struktur generator yang akan menghasilkan indeks satu per satu, menyimpan penghitung di parameter pertama: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_sequence</span></span></span><span class="hljs-class"> :</span></span> make_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, Indexes ...&gt; {};</code> </pre> <br><p>  Kami juga akan menangani titik akhir rekursi, ketika semua indeks dihasilkan (penghitung adalah nol), kami membuang penghitung dan generator berubah menjadi urutan yang kami butuhkan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_sequence</span></span></span><span class="hljs-class">&lt;0, Indexes ...&gt; :</span></span> index_sequence&lt;Indexes ...&gt; {};</code> </pre> <br><p>  Akibatnya, fungsi membuat string statis akan terlihat seperti ini: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Indexes) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> (&amp; str)[Size], index_sequence&lt;Indexes ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str[Indexes] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Kami akan menulis fungsi serupa untuk string statis, ini akan berguna bagi kami lebih lanjut: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Indexes) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size&gt;&amp; str, index_sequence&lt;Indexes ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str[Indexes] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Selanjutnya, untuk setiap fungsi yang mengambil string literal <code>foo(const char (&amp; str)[Size])</code> kita akan menulis fungsi serupa yang mengambil string <code>foo(const static_string&lt;Size&gt;&amp; str)</code> statis <code>foo(const static_string&lt;Size&gt;&amp; str)</code> .  Tetapi untuk singkatnya, saya tidak akan menyebutkan ini. </p><br><p>  Karena kita mengetahui panjang string literal, kita dapat secara otomatis menghasilkan urutan indeks, kita akan menulis pembungkus untuk fungsi di atas: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;Size&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> (&amp; str)[Size]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(str, make_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}); }</code> </pre> <br><p>  Fungsi ini memungkinkan kita untuk melakukan apa yang kita inginkan di awal bab ini. </p><br><p>  Jika tidak ada argumen, kami akan mengembalikan string statis kosong, yang hanya terdiri dari karakter nol: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Kita juga perlu membuat string dari sejumlah karakter: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Chars) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(char_sequence&lt;Chars ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {Chars ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Ngomong-ngomong, segala sesuatu yang akan dijelaskan nanti dalam artikel ini didasarkan pada teknik yang dijelaskan dalam bab ini.  Karena itu, jika sesuatu tetap tidak dapat dipahami, lebih baik membaca kembali bab ini. </p><br><h3 id="vyvod-staticheskoy-stroki-v-potok">  Keluarkan string statis ke aliran </h3><br><p>  Semuanya sederhana di sini.  Karena string kami diakhiri dengan karakter nol, itu cukup untuk menampilkan data array ke aliran: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::ostream&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;&lt;(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::ostream&amp; os, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size&gt;&amp; str) { os &lt;&lt; str.data(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> os; }</code> </pre> <br><h3 id="preobrazovanie-staticheskoy-stroki-v-stdstring">  Ubah string statis menjadi std :: string </h3><br><p>  Tidak ada yang rumit di sini.  Kami menginisialisasi string dengan data array: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(str.data()); }</code> </pre> <br><h3 id="sravnenie-staticheskih-strok">  Perbandingan String Statis </h3><br><p>  Kami akan membandingkan karakter garis demi karakter sampai kami menemukan perbedaannya, atau sampai kami mencapai paling tidak satu dari garis tersebut.  Karena constexpr untuk belum ditemukan, kami menggunakan rekursi dan operator ternary: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_compare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size1&gt;&amp; str1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size2&gt;&amp; str2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &gt;= Size1 &amp;&amp; index &gt;= Size2 ? <span class="hljs-number"><span class="hljs-number">0</span></span> : index &gt;= Size1 ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : index &gt;= Size2 ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index] &gt; str2[index] ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index] &lt; str2[index] ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : static_string_compare(str1, str2, index + <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><p>  Di masa mendatang, kami akan memerlukan versi komparator yang diperluas, kami akan memperkenalkan indeks individual untuk setiap baris mereka, dan kami juga akan membatasi jumlah karakter yang dibandingkan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_compare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size1&gt;&amp; str1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size2&gt;&amp; str2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cur_length, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_length)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cur_length &gt; max_length || (index1 &gt;= Size1 &amp;&amp; index2 &gt;= Size2) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : index1 &gt;= Size1 ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : index2 &gt;= Size2 ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index1] &gt; str2[index2] ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index1] &lt; str2[index2] ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : static_string_compare(str1, index1 + <span class="hljs-number"><span class="hljs-number">1</span></span>, str2, index2 + <span class="hljs-number"><span class="hljs-number">1</span></span>, cur_length + <span class="hljs-number"><span class="hljs-number">1</span></span>, max_length); }</code> </pre> <br><p>  Versi komparator ini akan memungkinkan kita untuk membandingkan tidak hanya seluruh string, tetapi juga masing-masing substring. </p><br><h3 id="konkatenaciya-staticheskih-strok">  Rangkaian string statis </h3><br><p>  Untuk penggabungan, kami menggunakan templat variabel yang sama seperti pada bab tentang membuat string statis.  Inisialisasi array terlebih dahulu dengan karakter dari baris pertama (tidak termasuk karakter null), kemudian yang kedua, dan akhirnya tambahkan karakter null ke akhir: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes2&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;Size1 + Size2 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; static_string_concat_2( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size1&gt;&amp; str1, index_sequence&lt;Indexes1 ...&gt;, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size2&gt;&amp; str2, index_sequence&lt;Indexes2 ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str1[Indexes1] ..., str2[Indexes2] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;Size1 + Size2 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; static_string_concat_2( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size1&gt;&amp; str1, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size2&gt;&amp; str2) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_concat_2(str1, make_index_sequence&lt;Size1 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}, str2, make_index_sequence&lt;Size2 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}); }</code> </pre> <br><p>  Kami juga menerapkan templat variabel untuk menggabungkan jumlah string atau string string yang sewenang-wenang: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Arg, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Arg&amp;&amp; arg, Args&amp;&amp; ... args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_concat_2(make_static_string(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Arg&gt;(arg)), static_string_concat(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args) ...)); }</code> </pre> <br><h3 id="operacii-poiska-v-staticheskoy-stroke">  Operasi Pencarian String Statis </h3><br><p>  Pertimbangkan operasi pencarian karakter dan substring dalam string statis. </p><br><h4 id="poisk-simvola-v-staticheskoy-stroke">  Cari karakter dalam string statis </h4><br><p>  Pencarian karakter tidak terlalu sulit, periksa karakter secara rekursif untuk semua indeks dan kembalikan indeks pertama jika ada kecocokan.  Kami juga akan memberikan kesempatan untuk mengatur posisi awal pencarian dan nomor urut pertandingan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || from &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? static_string_npos : str[from] != ch ? static_string_find(str, ch, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_find(str, ch, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><p>  The <code>static_string_npos</code> konstan menunjukkan bahwa pencarian tidak berhasil.  Kami mendefinisikannya sebagai berikut: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> static_string_npos = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::numeric_limits&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;::max();</code> </pre> <br><p>  Demikian pula, kami menerapkan pencarian ke arah yang berlawanan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || from &gt; Size - <span class="hljs-number"><span class="hljs-number">2</span></span> ? static_string_npos : str[from] != ch ? static_string_rfind(str, ch, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_rfind(str, ch, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><h4 id="opredelenie-vhozhdeniya-simvola-v-staticheskuyu-stroku">  Menentukan kemunculan karakter dalam string statis </h4><br><p>  Untuk menentukan kemunculan karakter, coba cari saja: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(str, ch) != static_string_npos; }</code> </pre> <br><h4 id="podschet-kolichestva-vhozhdeniy-simvola-v-staticheskuyu-stroku">  Hitung jumlah kemunculan karakter dalam string statis </h4><br><p>  Menghitung jumlah kejadian diimplementasikan sepele: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (str[index] == ch ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>) + static_string_count(str, ch, index + <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><h4 id="poisk-podstroki-v-staticheskoy-stroke">  Cari substring dalam string statis </h4><br><p>  Karena diasumsikan bahwa baris statis akan relatif kecil, kami tidak akan mengimplementasikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">algoritma Knut-Morris-Pratt di</a> sini, kami akan menerapkan algoritma kuadratik yang paling sederhana: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; SubSize || from &gt; Size - SubSize ? static_string_npos : static_string_compare(str, from, substr, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_find(str, substr, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_find(str, substr, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><p>  Demikian pula, kami menerapkan pencarian ke arah yang berlawanan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; SubSize || from &gt; Size - SubSize ? static_string_npos : static_string_compare(str, from, substr, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_rfind(str, substr, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_rfind(str, substr, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><h4 id="opredelenie-vhozhdeniya-podstroki-v-staticheskuyu-stroku">  Menentukan terjadinya substring dalam string statis </h4><br><p>  Untuk menentukan terjadinya substring, coba saja mencarinya: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(str, substr) != static_string_npos; }</code> </pre> <br><h4 id="opredelenie-nachinaetsyakonchaetsya-li-staticheskaya-stroka-sna-zadannoy-podstroki">  Menentukan apakah string statis dimulai / diakhiri dengan / pada substring yang diberikan </h4><br><p>  Menerapkan pembanding yang dijelaskan sebelumnya, kita dapat menentukan apakah string statis dimulai dengan substring yang diberikan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_starts_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; prefix)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubSize &gt; Size ? <span class="hljs-literal"><span class="hljs-literal">false</span></span> : static_string_compare(str, <span class="hljs-number"><span class="hljs-number">0</span></span>, prefix, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Demikian pula untuk mengakhiri garis statis: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_ends_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; suffix)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubSize &gt; Size ? <span class="hljs-literal"><span class="hljs-literal">false</span></span> : static_string_compare(str, Size - SubSize, suffix, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><h3 id="rabota-s-podstrokami-staticheskoy-stroki">  Bekerja dengan substring string statis </h3><br><p>  Di sini kita melihat operasi yang terkait dengan substring dari string statis. </p><br><h4 id="poluchenie-podstroki-prefiksa-i-suffiksa-staticheskoy-stroki">  Mendapatkan substring, awalan, dan akhiran dari string statis </h4><br><p>  Seperti yang kami catat sebelumnya, untuk mendapatkan substring, Anda perlu membuat urutan indeks, dengan indeks awal dan akhir yang diberikan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_subsequence</span></span></span><span class="hljs-class"> :</span></span> make_index_subsequence&lt;Begin, End - <span class="hljs-number"><span class="hljs-number">1</span></span>, End - <span class="hljs-number"><span class="hljs-number">1</span></span>, Indexes ...&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Pos, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_subsequence</span></span></span><span class="hljs-class">&lt;Pos, Pos, Indexes ...&gt; :</span></span> index_sequence&lt;Indexes ...&gt; {};</code> </pre> <br><p>  Kami menerapkan memperoleh substring dengan memeriksa awal dan akhir substring menggunakan <code>static_assert</code> : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_substring</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(Begin &lt;= End, <span class="hljs-string"><span class="hljs-string">"Begin is greater than End (Begin &gt; End)"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(End &lt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"End is greater than string length (End &gt; Size - 1)"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(str, make_index_subsequence&lt;Begin, End&gt;{}); }</code> </pre> <br><p>  Awalan adalah substring yang permulaannya bertepatan dengan awal garis statis asli: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_prefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_substring&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>, End&gt;(str); }</code> </pre> <br><p>  Demikian pula untuk sufiks, hanya yang cocok: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_suffix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_substring&lt;Begin, Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;(str); }</code> </pre> <br><h4 id="razdelenie-staticheskoy-stroki-na-dve-chasti-po-zadannomu-indeksu">  Memisahkan string statis menjadi dua bagian pada indeks yang diberikan </h4><br><p>  Untuk memecah string statis pada indeks yang diberikan, cukup untuk mengembalikan awalan dan akhiran: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Index, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_split</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(static_string_prefix&lt;Index&gt;(str), static_string_suffix&lt;Index + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;(str)); }</code> </pre> <br><h4 id="reversirovanie-staticheskoy-stroki">  Pembalikan String Statis </h4><br><p>  Untuk membalikkan string statis, kami menulis generator indeks yang menghasilkan indeks dalam urutan terbalik: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_reverse_index_sequence</span></span></span><span class="hljs-class"> :</span></span> make_reverse_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, Indexes ..., Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_reverse_index_sequence</span></span></span><span class="hljs-class">&lt;0, Indexes ...&gt; :</span></span> index_sequence&lt;Indexes ...&gt; {};</code> </pre> <br><p>  Sekarang kita mengimplementasikan fungsi yang membalikkan string statis: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(str, make_reverse_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}); }</code> </pre> <br><h3 id="vychislenie-hesha-staticheskoy-stroki">  Perhitungan String Hash Statis </h3><br><p>  Kami akan menghitung hash menggunakan rumus berikut: </p><br><p>  H (s) = (s <sub>0</sub> + 1) ⋅ 33 <sup>0</sup> + (s <sub>1</sub> + 1) ⋅ 33 <sup>1</sup> + ... + (s <sub>n - 1</sub> + 1) ⋅ 33 <sup>n - 1</sup> + 5381 ⋅ 33 <sup>n</sup> mod 2 <sup>64</sup> </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_hash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">5381U</span></span>LL : static_string_hash(str, index + <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">33U</span></span>LL + str[index] + <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br><h3 id="preobrazovanie-chisla-v-staticheskuyu-stroku-i-obratno">  Konversi angka menjadi string statis dan sebaliknya </h3><br><p>  Dalam bab ini, kita melihat konversi string statis menjadi integer, serta invers.  Untuk kesederhanaan, kami mengasumsikan bahwa angka-angka diwakili oleh tipe <code>long long</code> dan <code>unsigned long long</code> , ini adalah jenis kapasitas besar, yaitu, mereka cocok untuk kebanyakan kasus. </p><br><h4 id="preobrazovanie-chisla-v-staticheskuyu-stroku">  Ubah angka menjadi string statis </h4><br><p>  Untuk mengonversi angka menjadi string statis, kita perlu mendapatkan semua digit angka, mengonversinya menjadi karakter yang sesuai dan membuat string karakter-karakter ini. </p><br><p>  Untuk mendapatkan semua digit angka, kita akan menggunakan generator yang mirip dengan generator urutan indeks.  Tentukan urutan karakter: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">char_sequence</span></span></span><span class="hljs-class"> {</span></span>};</code> </pre> <br><p>  Kami menerapkan generator karakter digit, menyimpan angka saat ini di parameter pertama, dan angka-angka di berikut ini, digit berikutnya ditambahkan ke awal urutan, dan jumlahnya dibagi sepuluh: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_unsigned_int_char_sequence</span></span></span><span class="hljs-class"> :</span></span> make_unsigned_int_char_sequence&lt;Value / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span> + Value % <span class="hljs-number"><span class="hljs-number">10</span></span>, Chars ...&gt; {};</code> </pre> <br><p>  Jika angka saat ini adalah 0, maka kami membuangnya, mengembalikan urutan angka, tidak ada lagi yang perlu dikonversi: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_unsigned_int_char_sequence</span></span></span><span class="hljs-class">&lt;0, Chars ...&gt; :</span></span> char_sequence&lt;Chars ...&gt; {};</code> </pre> <br><p>  Anda juga harus mempertimbangkan kasing ketika angka awal nol, dalam hal ini Anda harus mengembalikan karakter nol, jika tidak nol akan dikonversi ke urutan karakter kosong, dan kemudian ke string kosong: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_unsigned_int_char_sequence</span></span></span><span class="hljs-class">&lt;0&gt; :</span></span> char_sequence&lt;<span class="hljs-string"><span class="hljs-string">'0'</span></span>&gt; {};</code> </pre> <br><p>  Generator yang diimplementasikan berfungsi baik untuk bilangan positif, tetapi tidak cocok untuk yang negatif.  Kami mendefinisikan generator baru dengan menambahkan satu lagi parameter template ke awal - tanda nomor yang dikonversi: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Negative, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class"> {</span></span>};</code> </pre> <br><p>  Kami akan memproses nomor seperti yang ditunjukkan di atas, tetapi dengan mempertimbangkan tanda: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;true, Value, Chars ...&gt; :</span></span> make_signed_int_char_sequence&lt;<span class="hljs-literal"><span class="hljs-literal">true</span></span>, Value / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span> + -(Value % <span class="hljs-number"><span class="hljs-number">10</span></span>), Chars ...&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;false, Value, Chars ...&gt; :</span></span> make_signed_int_char_sequence&lt;<span class="hljs-literal"><span class="hljs-literal">false</span></span>, Value / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span> + Value % <span class="hljs-number"><span class="hljs-number">10</span></span>, Chars ...&gt; {};</code> </pre> <br><p>  Ada satu titik halus di sini, perhatikan <code>-(Value % 10)</code> .  Di sini, Anda tidak dapat <code>-Value % 10</code> , karena rentang angka negatif adalah satu angka lebih lebar dari kisaran positif dan modulus angka minimum jatuh dari himpunan nilai yang valid. </p><br><p>  Kami membuang nomor setelah diproses, jika negatif, tambahkan simbol tanda minus: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;true, 0, Chars ...&gt; :</span></span> char_sequence&lt;<span class="hljs-string"><span class="hljs-string">'-'</span></span>, Chars ...&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;false, 0, Chars ...&gt; :</span></span> char_sequence&lt;Chars ...&gt; {};</code> </pre> <br><p>  Secara terpisah, kami menjaga konversi nol: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;false, 0&gt; :</span></span> char_sequence&lt;<span class="hljs-string"><span class="hljs-string">'0'</span></span>&gt; {};</code> </pre> <br><p>  Akhirnya, kami menerapkan fungsi konversi: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uint_to_static_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(make_unsigned_int_char_sequence&lt;Value&gt;{}); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int_to_static_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(make_signed_int_char_sequence&lt;(Value &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>), Value&gt;{}); }</code> </pre> <br><h4 id="preobrazovanie-staticheskoy-stroki-v-chislo">  Ubah string statis menjadi angka </h4><br><p>  Untuk mengonversi string statis menjadi angka, Anda perlu mengubah karakter menjadi angka, dan kemudian menambahkannya, setelah sebelumnya dikalikan puluhan oleh kekuatan yang sesuai.  Kami melakukan semua tindakan secara rekursif, untuk string kosong kami mengembalikan nol: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_uint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (str[index] - <span class="hljs-string"><span class="hljs-string">'0'</span></span>) + <span class="hljs-number"><span class="hljs-number">10U</span></span>LL * static_string_to_uint(str, index - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_uint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_to_uint(str, Size - <span class="hljs-number"><span class="hljs-number">2</span></span>); }</code> </pre> <br><p>  Untuk mengonversi angka yang ditandatangani, perhatikan bahwa angka negatif dimulai dengan tanda minus: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> first)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &lt; first || index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : first == <span class="hljs-number"><span class="hljs-number">0</span></span> ? (str[index] - <span class="hljs-string"><span class="hljs-string">'0'</span></span>) + <span class="hljs-number"><span class="hljs-number">10L</span></span>L * static_string_to_int(str, index - <span class="hljs-number"><span class="hljs-number">1</span></span>, first) : -(str[index] - <span class="hljs-string"><span class="hljs-string">'0'</span></span>) + <span class="hljs-number"><span class="hljs-number">10L</span></span>L * static_string_to_int(str, index - <span class="hljs-number"><span class="hljs-number">1</span></span>, first); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : str[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'-'</span></span> ? static_string_to_int(str, Size - <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) : static_string_to_int(str, Size - <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); }</code> </pre> <br><h3 id="voprosy-udobstva-ispolzovaniya-biblioteki">  Pertimbangan Kegunaan Perpustakaan </h3><br><p>  Pada titik ini, sudah dimungkinkan untuk sepenuhnya menggunakan perpustakaan, tetapi beberapa titik tidak nyaman.  Dalam bab ini, kita akan melihat bagaimana Anda dapat membuat menggunakan perpustakaan lebih nyaman. </p><br><h4 id="obekt-staticheskoy-stroki">  Objek String Statis </h4><br><p>  Kemas string dan metode yang diimplementasikan ke dalam objek.  Ini akan memungkinkan penggunaan nama metode yang lebih pendek, serta mengimplementasikan operator pembanding: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">static_string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">length</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">begin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rbegin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size - <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::numeric_limits&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;::max(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">empty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_reverse(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">substring</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_substring&lt;Begin, End&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_prefix&lt;End&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">suffix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_suffix&lt;Begin&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; substr)[SubSize], </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = Size - </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_rfind(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = Size - SubSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_rfind(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; substr)[SubSize], </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = Size - SubSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_rfind(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_contains(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_contains(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; substr)[SubSize])</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_contains(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">starts_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; prefix)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_starts_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, prefix); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">starts_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; prefix)[SubSize])</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_starts_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, prefix); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ends_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; suffix)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_ends_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, suffix); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ends_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; suffix)[SubSize])</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_ends_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, suffix); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_count(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Index&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">split</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_split&lt;Index&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_hash(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>[](<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> index) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data[index]; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">str</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> to_string(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, Size&gt; data; };</code> </pre> <br><h4 id="operatory-sravneniya">   </h4><br><p>        .    : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size1&gt;&amp; str1, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size2&gt;&amp; str2) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_compare(str1, str2) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>     &gt; &lt;= &gt;= == !=,         .      - . </p><br><h4 id="makrosy-raboty-s-chislami">     </h4><br><p>            : </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ITOSS(x) int_to_static_string</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;(x)&gt;() #define UTOSS(x) uint_to_static_string&lt;(x)&gt;() #define SSTOI(x) static_string_to_int((x)) #define SSTOU(x) static_string_to_uint((x))</span></span></span></span></code> </pre> <br><h3 id="primery-ispolzovaniya-biblioteki">    </h3><br><p>       . </p><br><p>      : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello = make_static_string(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> world = make_static_string(<span class="hljs-string"><span class="hljs-string">"World"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> greeting = hello + <span class="hljs-string"><span class="hljs-string">", "</span></span> + world + <span class="hljs-string"><span class="hljs-string">"!"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// greeting == "Hello, World!"</span></span></code> </pre> <br><p>   ,    : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> apples = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> oranges = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> message = static_string_concat(<span class="hljs-string"><span class="hljs-string">"I have "</span></span>, ITOSS(apples), <span class="hljs-string"><span class="hljs-string">" apples and "</span></span>, ITOSS(oranges), <span class="hljs-string"><span class="hljs-string">", so I have "</span></span>, ITOSS(apples + oranges), <span class="hljs-string"><span class="hljs-string">" fruits"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// message = "I have 5 apples and 7 oranges, so I have 12 fruits"</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> width = <span class="hljs-number"><span class="hljs-number">123456789U</span></span>LL; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> height = <span class="hljs-number"><span class="hljs-number">987654321U</span></span>LL; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> message = static_string_concat(<span class="hljs-string"><span class="hljs-string">"A rectangle with width "</span></span>, UTOSS(width), <span class="hljs-string"><span class="hljs-string">" and height "</span></span>, UTOSS(height), <span class="hljs-string"><span class="hljs-string">" has area "</span></span>, UTOSS(width * height)); <span class="hljs-comment"><span class="hljs-comment">// message = "A rectangle with width 123456789 and height 987654321 has area 121932631112635269"</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> revenue = <span class="hljs-number"><span class="hljs-number">1'000'000L</span></span>L; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> costs = <span class="hljs-number"><span class="hljs-number">1'200'000L</span></span>L; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> profit = revenue - costs; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> message = static_string_concat(<span class="hljs-string"><span class="hljs-string">"The first quarter has ended with net "</span></span>, (profit &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-string"><span class="hljs-string">"profit"</span></span> : <span class="hljs-string"><span class="hljs-string">"loss "</span></span>), <span class="hljs-string"><span class="hljs-string">" of $"</span></span>, ITOSS(profit &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? -profit : profit)); <span class="hljs-comment"><span class="hljs-comment">// message == "The first quarter has ended with net loss of $200000"</span></span></code> </pre> <br><p>  URL: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> url = make_static_string(<span class="hljs-string"><span class="hljs-string">"http://www.server.com:8080"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = url.find(<span class="hljs-string"><span class="hljs-string">"://"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> protocol = url.prefix&lt;p&gt;(); <span class="hljs-comment"><span class="hljs-comment">// protocol == "http" constexpr auto sockaddr = url.suffix&lt;p + 3&gt;(); constexpr auto hp = sockaddr.split&lt;sockaddr.find(':')&gt;(); constexpr auto host = hp.first; // host == "www.server.com" constexpr int port = SSTOI(hp.second); // port == 8080</span></span></code> </pre> <br><p>      : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = make_static_string(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = str.begin(); i != str.end(); ++i) <span class="hljs-comment"><span class="hljs-comment">//  std::cout &lt;&lt; str[i]; std::cout &lt;&lt; std::endl; // Hello for (size_t i = str.rbegin(); i != str.rend(); --i) //  std::cout &lt;&lt; str[i]; std::cout &lt;&lt; std::endl; // olleH</span></span></code> </pre> <br><h3 id="ssylki">  Referensi </h3><br><p> ,   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> </p><br><p>   ,    . </p><br><h3 id="update"> Update </h3><br><p>    _ss       : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Char, Char ... Chars&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> basic_static_string&lt;Char, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Chars) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span><span class="hljs-string"><span class="hljs-string">""</span></span> _ss() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {Chars ..., <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Char&gt;(<span class="hljs-string"><span class="hljs-string">'\0'</span></span>)}; };</code> </pre> <br><p>  make_static_string()    ,    : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello_world = <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>_ss + <span class="hljs-string"><span class="hljs-string">" World"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"Hello"</span></span> &lt; <span class="hljs-string"><span class="hljs-string">"World"</span></span>_ss) { ... } <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hash = <span class="hljs-string"><span class="hljs-string">"VeryLongString"</span></span>_ss.hash();</code> </pre> <br><p>    Char  char: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Char, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">basic_static_string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// ... std::array&lt;const Char, Size&gt; data; };</span></span></code> </pre> <br><p>    char  whar_t,     ,    concat,      : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_string_t</span></span> = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, Size&gt;; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_wstring_t</span></span> = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span>, Size&gt;; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> static_string = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>&gt;; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> static_wstring = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>&gt;;</code> </pre> <br><p>      "" : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> wide_string = <span class="hljs-string"><span class="hljs-string">L"WideString"</span></span>_ss; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> apples = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> oranges = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fruits = apples + oranges; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str3 = static_wstring::concat(<span class="hljs-string"><span class="hljs-string">L"I have "</span></span>, ITOSW(apples), <span class="hljs-string"><span class="hljs-string">L" apples and "</span></span>, ITOSW(oranges), <span class="hljs-string"><span class="hljs-string">L" oranges, so I have "</span></span>, ITOSW(fruits), <span class="hljs-string"><span class="hljs-string">L" fruits"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(str3 == <span class="hljs-string"><span class="hljs-string">L"I have 5 apples and 7 oranges, so I have 12 fruits"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::wcout &lt;&lt; str3 &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;</code> </pre> <br><p>   size(),  size()  length()       ,       sizeof(): </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> ss1 = <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>_ss; <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(ss1.length() == <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(ss1.size() == <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(ss1) == <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre> <br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> <br>     . </p><br><h3 id="update-2"> Update 2 </h3><br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">AndreySu</a>       ,      : </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; using namespace std; template&lt;typename Char, Char ... Chars&gt; struct static_string{}; template&lt;typename Char, Char ... Chars1, Char ... Chars2&gt; constexpr static_string&lt;Char, Chars1 ..., Chars2 ... &gt; operator+( const static_string&lt;Char, Chars1 ... &gt;&amp; str1, const static_string&lt;Char, Chars2 ... &gt;&amp; str2) { return static_string&lt;Char, Chars1 ..., Chars2 ...&gt;{}; } template&lt;typename Char, Char ch, Char ... Chars&gt; std::basic_ostream&lt;Char&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;Char&gt;&amp; bos, const static_string&lt;Char, ch, Chars ...&gt;&amp; str) { bos &lt;&lt; ch &lt;&lt; static_string&lt;Char, Chars ... &gt;{}; return bos; } template&lt;typename Char&gt; std::basic_ostream&lt;Char&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;Char&gt;&amp; bos, const static_string&lt;Char&gt;&amp; str) { return bos; } template&lt;typename Char, Char ... Chars&gt; constexpr static_string&lt;Char, Chars ... &gt; operator"" _ss() { return static_string&lt;Char, Chars ... &gt;{}; }; int main() { constexpr auto str1 = "abc"_ss; constexpr auto str2 = "def"_ss; constexpr auto str = str1 + str2 + str1; std::cout &lt;&lt; str &lt;&lt; std::endl; return 0; }</span></span></span></span></code> </pre> <br><p>        ,  ,  -       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428846/">https://habr.com/ru/post/id428846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428834/index.html">Setengah dari mobil dijual di Norwegia - mobil listrik</a></li>
<li><a href="../id428836/index.html">AI dilatih untuk mengobati keracunan darah dan mendiagnosis patah tulang</a></li>
<li><a href="../id428840/index.html">Meninggalkan - pergi? Bicara malam tentang PHK</a></li>
<li><a href="../id428842/index.html">Acara digital di Moskow dari 6 hingga 11 November</a></li>
<li><a href="../id428844/index.html">Pembacaan meter rumah</a></li>
<li><a href="../id428848/index.html">Catatan dari penyedia IoT: bagaimana cara membuat jaringan LoRa di kota tanpa jaringan dalam satu hari?</a></li>
<li><a href="../id428850/index.html">Manajemen pengembangan dalam proyek besar</a></li>
<li><a href="../id428852/index.html">Buka siaran aula utama HighLoad ++ 2018</a></li>
<li><a href="../id428854/index.html">Cara memotong lampu di pusat data kecil: cara murah untuk menyebarkan darurat</a></li>
<li><a href="../id428856/index.html">Trik luar biasa untuk menjadikan pengelola proyek sumber terbuka sehari</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>