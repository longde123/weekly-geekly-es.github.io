<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗓️ 🙏🏼 🔫 Memutakhirkan Django dari Versi 1.9 ke Versi 2.0 🏨 🧖🏾 🏳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, hari ini saya ingin memberi tahu Anda tentang cara meningkatkan proyek dari versi 1.9 ke 2.0. Apa nuansa utama yang perlu dipertimbangkan dan di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Memutakhirkan Django dari Versi 1.9 ke Versi 2.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417837/">  Halo, hari ini saya ingin memberi tahu Anda tentang cara meningkatkan proyek dari versi 1.9 ke 2.0.  Apa nuansa utama yang perlu dipertimbangkan dan ditulis ulang agar proyek dapat dimulai pada versi baru Django. <br><br><h3>  Langkah pertama </h3><br>  Ini adalah pembaruan Django ke versi 2.0, serta pembaruan dari semua paket terkait Anda yang digunakan dalam proyek, seperti  Saya menggunakan lingkungan virtual dan requirement.txt, maka bagi saya ini adalah satu cara, bagi Anda mungkin berbeda. <br><br>  Setelah Anda memperbarui semua paket, Anda tidak boleh memulai proyek, itu tidak akan memulai, jadi segera mulai untuk memperbaiki semua poin utama agar proyek dapat dimulai. <a name="habracut"></a><br><br><h3>  Langkah kedua.  Memperbarui semua urls.py proyek Anda </h3><br>  Di urls.py utama Anda, tempat Anda memasukkan url dari aplikasi lain, kami terhubung: <br>  dari django.urls import re_path, path. <br><br>  Dan kami mengubah url ke path, serta menghapus ekspresi reguler dalam koneksi ini. <br><br><pre><code class="python hljs">url(<span class="hljs-string"><span class="hljs-string">r'^ some/'</span></span>, include(<span class="hljs-string"><span class="hljs-string">'some.urls'</span></span>)), <span class="hljs-comment"><span class="hljs-comment">#   path('some/', include('some.urls')),</span></span></code> </pre> <br>  Jika Anda menggunakan tampilan langsung dari aplikasi ini, yang membutuhkan pelanggan tetap, maka kami menggunakan: <br><br><pre> <code class="python hljs">re_path(<span class="hljs-string"><span class="hljs-string">r'^app/$'</span></span>, App.as_view(), name=<span class="hljs-string"><span class="hljs-string">'app'</span></span>)</code> </pre> <br>  Dalam aplikasi plug-in (misalnya, some / urls.py), dalam file urls.py, kami menggunakan: <br><br><pre> <code class="python hljs">re_path(<span class="hljs-string"><span class="hljs-string">r'^create/$'</span></span>, Create.as_view(), name=<span class="hljs-string"><span class="hljs-string">'create'</span></span>)</code> </pre> <br>  Jika Anda menggunakan namespace dalam url selama inklusi, hapus dari sana dan transfer langsung ke aplikasi yang terhubung.  Kami pergi ke urls.py dari aplikasi ini dan menulisnya di atas urlpatterns = [] <br><br><pre> <code class="python hljs">app_name = <span class="hljs-string"><span class="hljs-string">'app-application'</span></span></code> </pre> <br>  Baris ini bertindak sebagai pengganti namespace dan dirancang untuk membuat urls.py utama lebih bersih dan mudah dibaca, serta untuk kemudahan mengubah nama di satu tempat. <br><br><h3>  Langkah ketiga </h3><br>  Kami menggunakan pencarian di seluruh proyek, tergantung pada editor kode Anda yang Anda gunakan selama pengembangan, ini bisa hotkey yang berbeda, saya pikir Anda tahu mereka, jadi saya tidak akan berhenti di sini. <br><br>  Kami berkendara di: <br><br><pre> <code class="python hljs">is_authenticated()</code> </pre> <br>  Dan ubah ke <code>is_authenticated</code> .  Sekarang ini bukan metode, tetapi properti.  Kesalahan ini akan menimbulkan pengecualian. <br><br>  Lebih lanjut dalam proyek ini kami mencari: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.core.urlresolvers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reverse</code> </pre> <br>  Dan ubah ke: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reverse</code> </pre> <br><h3>  Langkah keempat </h3><br>  Sekarang di semua model. Sebelumnya, harus ada argumen posisi wajib "on_delete" misalnya: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">on_delete=models.CASCADE on_delete=models.DO_NOTHING on_delete=models.SET_NULL</span></span></code> </pre> <br>  Selanjutnya kita lakukan: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">python manage.py makemigrations python manage.py migrate</span></span></code> </pre> <br><h3>  Langkah kelima </h3><br>  Jika Anda mencoba untuk memulai proyek, maka itu seharusnya sudah mulai, tetapi segera itu akan memberi Anda kesalahan segera setelah Anda pergi ke 127.0.0.1:8000. <br><br>  Kesalahannya adalah sebagai berikut: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">AttributeError at / 'WSGIRequest' object has no attribute 'user'</span></span></code> </pre> <br>  Karena Anda perlu mengganti nama MIDDLEWARE_CLASSES menjadi MIDDLEWARE <br>  Selanjutnya, Anda akan mendapatkan kesalahan berikut di konsol: <br><br> <code>django.core.exceptions.ImproperlyConfigured: WSGI application 'application' could not be loaded; Error importing module: 'application doesn't look like a module path</code> <br> <br>  Kesalahan ini terjadi karena Anda memiliki middleware lama, dan Anda harus memperbaruinya ke: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">'django.contrib.sessions.middleware.SessionMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.common.CommonMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.csrf.CsrfViewMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.contrib.auth.middleware.AuthenticationMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.contrib.messages.middleware.MessageMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.security.SecurityMiddleware'</span></span></code> </pre> <br><h3>  Langkah keenam </h3><br>  Jika Anda menggunakan middleware Anda sendiri dalam proyek, maka middleware Anda harus diwarisi dari MiddlewareMixin, dan bukan dari objek (Anda juga dapat menggunakan objek, tetapi kemudian Anda harus mendaftarkan metode tambahan yang diperlukan). <br><br>  Impor: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.utils.deprecation <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MiddlewareMixin</code> </pre> <br>  Itu saja!  :) <br><br>  Tentu saja, jika Anda memiliki proyek yang sangat besar dan Anda menggunakan sejumlah besar paket, maka Anda akan memiliki lebih banyak masalah, tetapi sudah ada rantai kesalahan di konsol yang akan membantu Anda menyelesaikannya dan memulai proyek dalam mode yang tepat.  Panduan ini menjelaskan kesalahan utama dan cara untuk menyelesaikannya, yang relevan untuk semua proyek dengan Django 1.9 (beberapa poin tidak relevan untuk Django versi 1.11), dan akan membantu untuk dengan cepat mentransfer proyek ke Django 2.0, serta menghindari hilangnya waktu yang tidak perlu untuk penguraian dan pencarian solusi untuk kesalahan umum. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id417837/">https://habr.com/ru/post/id417837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id417825/index.html">"Memperluas batas": rentang 6 GHz akan diberikan untuk kebutuhan Wi-Fi</a></li>
<li><a href="../id417827/index.html">Wi-Fi gratis: Pengadilan Jerman menghapus hukuman untuk kedai kopi untuk pelanggaran hak cipta pelanggan</a></li>
<li><a href="../id417829/index.html">Kurangi jumlah lapisan arsitektur dari 5 menjadi 2</a></li>
<li><a href="../id417831/index.html">Hidup dengan Java SE 8 dan Java SE 11 dengan harga $ 25 per prosesor per bulan</a></li>
<li><a href="../id417835/index.html">"Empire in depth": mengapa perusahaan IT besar meletakkan kabel bawah laut mereka</a></li>
<li><a href="../id417839/index.html">Penyerang menggunakan game "Clash of Clans" untuk mencuci uang dari kartu kredit curian</a></li>
<li><a href="../id417841/index.html">Kami melarang govnokod, atau plug-in yang berguna untuk ESLint</a></li>
<li><a href="../id417845/index.html">Kurangi ukuran APK (dalam batas wajar)</a></li>
<li><a href="../id417849/index.html">Bobbiniki: sejarah singkat dari tape recorder reel dan minat yang tumbuh pada gadget audio saat ini</a></li>
<li><a href="../id417851/index.html">Intisari materi menarik untuk pengembang seluler # 262 (16 Juli - 22 Juli)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>