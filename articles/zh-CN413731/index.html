<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌞 💃 👩🏻‍🤝‍👨🏼 BA / SA就业市场研究 👂 ♥️ 👧🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大型或小型公司一位非常真实的首席分析师的任务是“研究分析师空缺市场”。 解析器使用hh手动打包数十个工作描述，根据要求的技能将其分散，并在相应的电子表格列中增加计数器。 


 我在这项任务中看到了一个自动化的好领域，因此决定尝试以更少的血液来轻松，简单地应对它。 


 我对本研究中提出的以下问题...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>BA / SA就业市场研究</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413731/"><p> 大型或小型公司一位非常真实的首席分析师的任务是“研究分析师空缺市场”。 解析器使用hh手动打包数十个工作描述，根据要求的技能将其分散，并在相应的电子表格列中增加计数器。 </p><br><p> 我在这项任务中看到了一个自动化的好领域，因此决定尝试以更少的血液来轻松，简单地应对它。 </p><br><p> 我对本研究中提出的以下问题感兴趣： </p><br><ul><li> 业务和系统分析师的平均工资， </li><li> 在这个职位上最需要的技能和个人素质， </li><li> 某些技能和薪水水平之间的依赖关系（如果有）。 </li></ul><br><p> 剧透：它并不容易，简单地解决。 </p><a name="habracut"></a><br><h1 id="podgotovka-dannyh"> 资料准备 </h1><br><p> 如果我们要收集有关职位空缺的大量数据，那么逻辑上是不受限制的。 但是，对于 <del> 实验纯度 </del> 简单起见，我们从此资源开始。 </p><br><h2 id="sbor"> 收藏品 </h2><br><p> 为了收集数据，我们将通过hh API使用<a href="">职位搜索</a> 。 </p><br><p> 我将使用简单的文本查询“系统分析师”，“业务分析师”和“产品负责人”进行搜索，因为通常这些职位的活动和职责范围重叠。 </p><br><p>为此，创建一个格式为<code>https://api.hh.ru/vacancies?text="systems+analyst"</code>的请求，然后解析接收到的JSON。 </p><br><p> 为了获得样本中最相关的空缺，我们将在搜索中添加<code>search_field=name</code>参数，仅在空缺标题中进行搜索。 </p><br><p>  <a href="">在这里，</a>您可以查看为该请求返回的空缺字段。 我选择了以下内容： </p><br><ul><li> 职称 </li><li> 城市 </li><li> 出版日期 </li><li> 薪水-上下限 </li><li> 表示工资的货币 </li><li> 总-T / F </li><li> 公司 </li><li> 责任 </li><li> 候选人要求 </li></ul><br><p> 此外，我想进一步分析“关键技能”部分中指示的技能，但是此部分仅在完整的职位描述中可用。 因此，我还将保留指向找到的职位的链接，以便随后获得每个职位的技能列表。 </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#     :) library(jsonlite) library(curl) library(dplyr) library(ggplot2) library(RColorBrewer) library(plotly) hh.getjobs &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(query, paid = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>) { # Makes a <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> hh API <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> gets the list <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> vacancies based <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the given <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> queries df &lt;- data.frame( query = <span class="hljs-type"><span class="hljs-type">character</span></span>() #    , URL = <span class="hljs-type"><span class="hljs-type">character</span></span>() #    , id = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() # id  , <span class="hljs-type"><span class="hljs-type">Name</span></span> = <span class="hljs-type"><span class="hljs-type">character</span></span>() #   , City = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Published = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Currency = <span class="hljs-type"><span class="hljs-type">character</span></span>() , <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() # .    , <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() # .  , Gross = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Company = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Responsibility = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Requerement = <span class="hljs-type"><span class="hljs-type">character</span></span>() , stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (q <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> query) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (pageNum <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">99</span></span>) { try( { data &lt;- fromJSON(paste0("https://api.hh.ru/vacancies?search_field=name&amp;text=\"" , q , "\"&amp;search_field=name" , "&amp;only_with_salary=", paid ,"&amp;page=" , pageNum)) df &lt;- rbind(df, data.frame( q, data$items$<span class="pgsql"><span class="pgsql">url, </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">as</span></span></span><span class="pgsql">.numeric(data$items$</span><span class="undefined"></span></span><span class="pgsql"><span class="undefined"></span></span>id), data$items$<span class="pgsql"><span class="hljs-type"><span class="pgsql"><span class="hljs-type">name</span></span></span><span class="pgsql">, data$items$</span><span class="undefined"></span></span><span class="pgsql"><span class="undefined"></span></span>area$<span class="hljs-type"><span class="hljs-type">name</span></span>, data$items$<span class="perl"><span class="perl">published_at, data$items$</span></span>salary$currency, data$items$<span class="perl"><span class="perl">salary$from, data$items$</span></span>salary$<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>, data$items$<span class="perl"><span class="perl">salary$gross, data$items$</span></span>employer$<span class="hljs-type"><span class="hljs-type">name</span></span>, data$items$<span class="perl"><span class="perl">snippet$responsibility, data$items$</span></span>snippet$requirement, stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>)) }) print(paste0("Downloading page:", pageNum + <span class="hljs-number"><span class="hljs-number">1</span></span>, "; query = \"", q, "\"")) } } names &lt;- c("query", "URL", "id", "Name", "City", "Published", "Currency", "From", "To", "Gross", "Company", "Responsibility", "Requirement") colnames(df) &lt;- names <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p> 在<code>hh.getjobs()</code>函数中，输入接受我们感兴趣和精细化的搜索查询向量，我们仅对具有指定薪水或连续的职位空缺感兴趣（默认情况下，我们选择第二个选项）。 创建一个空的<code>fromJSON()</code>框架，然后<code>jsonlite</code> <code>fromJSON()</code>包的<code>fromJSON()</code>函数，该函数获取输入URL并返回结构化列表。 接下来，从该列表中的节点中，我们获得我们感兴趣的数据，并填写相应的数据框字段。 </p><br><p> 默认情况下，数据是逐页给出的，每页上有20个元素。 最多提供2,000个职位空缺。 我们收到的所有数据都记录在<code>df</code> 。 </p><br><p>  <strong>人生攻略1：</strong>完全没有应我们的要求提供2,000个空缺的事实，从某个时候开始我们将收到空白页。 在这种情况下，R发誓并跳出循环。 因此，我们小心地将内部循环的内容包装在<code>try()</code> 。 </p><br><p>  <strong>生活技巧2：</strong>在内部循环中将当前数据收集状态的输出添加到控制台也很有意义，因为这不是一项快速的业务。 我这样做： </p><br><pre> <code class="hljs lisp">print(<span class="hljs-name"><span class="hljs-name">paste0</span></span>(<span class="hljs-string"><span class="hljs-string">"Downloading page:"</span></span>, pageNum + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"; query = \""</span></span>, query, <span class="hljs-string"><span class="hljs-string">"\""</span></span>))</code> </pre> <br><p> 填写数据后，将对列进行重命名，以便于使用它们，并返回结果数据框。 </p><br><p> 我将将此功能和其他辅助功能存储在单独的<code>functions.R</code>文件中，以免使主脚本混乱，到目前为止，它看起来像这样： </p><br><pre> <code class="hljs pgsql">source("functions.R") # Step <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> data # <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> vacancies (short <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>) jobdf &lt;- hh.getjobs(query = c("business+analyst" , "systems+analyst" , "product+owner"), paid = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>)</code> </pre> <br><p> 现在，我们将从<a href="">完整的职位描述中</a>获得<code>experience</code>和<code>key_skills</code> 。 </p><br><p>  <code>hh.getxp</code>将数据帧传递给<code>hh.getxp</code>函数，通过保存的空缺链接，并从完整的描述中获得所需工作经验的价值。 结果值存储在新列中。 </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs powershell">hh.getxp &lt;- function(df) { df<span class="hljs-variable"><span class="hljs-variable">$experience</span></span> &lt;- NA <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myURL <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>( { <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> &lt;- fromJSON(myURL) df[<span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == <span class="hljs-type"><span class="hljs-type">myURL</span></span>, <span class="hljs-string"><span class="hljs-string">"experience"</span></span>] &lt;- <span class="hljs-keyword"><span class="hljs-keyword">data</span></span><span class="hljs-variable"><span class="hljs-variable">$experience</span></span><span class="hljs-variable"><span class="hljs-variable">$name</span></span> } ) print(paste0(<span class="hljs-string"><span class="hljs-string">"Filling in "</span></span>, which(df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == myURL, arr.ind = TRUE), <span class="hljs-string"><span class="hljs-string">"from "</span></span>, nrow(df))) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p> 新辅助函数的描述发送到<code>functions.R</code> ，主脚本现在可以访问它： </p><br><pre> <code class="hljs pgsql"># s<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> experience (<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">full</span></span> <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>) jobdf &lt;- hh.getxp(jobdf) # <span class="hljs-number"><span class="hljs-number">1.3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> skills (<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">full</span></span> <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills &lt;- hh.getskills(jobdf$URL)</code> </pre> <br><p> 在上面的片段中，我们还形成了一个新的数据框架<code>all.skills</code>形式为“工作<code>all.skills</code>技能”： </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs mel">hh.getskills &lt;- function(allurls) { analyst.skills &lt;- data.frame( id = <span class="hljs-keyword"><span class="hljs-keyword">character</span></span>(), # id  skill = <span class="hljs-keyword"><span class="hljs-keyword">character</span></span>() #   ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myURL <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> allurls) { data &lt;- fromJSON(myURL) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (length(data$key_skills) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) analyst.skills &lt;- rbind(analyst.skills, cbind(data$id, data$key_skills)) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(paste0(<span class="hljs-string"><span class="hljs-string">"Filling in "</span></span> , which(allurls == myURL, arr.ind = TRUE) , <span class="hljs-string"><span class="hljs-string">" out of "</span></span> , length(allurls))) } names(analyst.skills) &lt;- c(<span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-string"><span class="hljs-string">"skill"</span></span>) analyst.skills$skill &lt;- <span class="hljs-keyword"><span class="hljs-keyword">tolower</span></span>(analyst.skills$skill) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(analyst.skills) }</code> </pre> </div></div><br><h2 id="preprocessing"> 前处理 </h2><br><p> 让我们看看我们设法收集了多少数据： </p><br><pre> <code class="hljs perl">&gt; <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(unique(jobdf$id)) [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-number"><span class="hljs-number">1478</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(jobdf$id) [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-number"><span class="hljs-number">1498</span></span></code> </pre> <br><p> 几乎有半个工作！ 看起来不错 显然，有几个空缺两次进入了搜索结果-针对不同的请求。 因此，第一步是仅保留唯一的条目： <code>jobdf &lt;- jobdf[unique(jobdf$id),]</code> 。 </p><br><p> 为了比较劳动力市场分析师的薪水，我需要 </p><br><p>  1）确保所有可用薪金数据均以单一货币显示， </p><br><p>  2）在一个单独的数据框中选择要显示工资的职位空缺。 </p><br><p> 我们将更详细地考虑每个子任务。 以前，您可以使用<code>table(jobdf$Currency)</code>找出原则上在我们的数据中找到<code>table(jobdf$Currency)</code> 。 就我而言，除了卢布之外，还出现了美元，欧元，格里夫纳汇率，哈萨克坚戈甚至乌兹别克斯坦的钱。 </p><br><p> 要将薪水值转换为卢布，您需要找出当前汇率。 我们将从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">中央银行了解</a> ： </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">quotations.<span class="hljs-keyword"><span class="hljs-keyword">update</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(currencies) { # Parses the most up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-type"><span class="hljs-type">date</span></span> qutations data provided <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> the Central Bank <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Russia # <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">returns</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> currency rate against RUR doc &lt;- <span class="hljs-type"><span class="hljs-type">XML</span></span>::xmlParse("http://www.cbr.ru/scripts/XML_daily.asp") quotationsdf &lt;- <span class="hljs-type"><span class="hljs-type">XML</span></span>::xmlToDataFrame(doc, stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>) quotationsdf &lt;- <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(quotationsdf, -<span class="hljs-type"><span class="hljs-type">Name</span></span>) quotationsdf$NumCode &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(quotationsdf$NumCode) quotationsdf$Nominal &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(quotationsdf$Nominal) quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(sub(",", ".", quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span>)) quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> &lt;- quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> / quotationsdf$Nominal quotationsdf &lt;- quotationsdf %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(CharCode, <span class="hljs-keyword"><span class="hljs-keyword">Value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(quotationsdf) }</code> </pre> </div></div><br><p> 为了确保在R中正确处理课程，您需要确保小数点由点分隔。 此外，您应注意“名义”栏：1处为10或100处。这表示一英镑的价格约为85卢布，例如，对于一百亚美尼亚德拉姆，您可以购买〜13卢布。 为了方便进一步处理，我将这些值减小到相对于卢布的名义值1。 </p><br><p> 现在您可以翻译了。 我们的脚本使用<code>convert.currency()</code>函数执行此操作。 当前的汇率是从<code>quotations</code>表中获取的，在该表中我们从中央银行提供的XML中保存了数据。 同样，输入函数接受要转换的目标货币（默认情况下为RUR）和带有空缺的表，即需要产生单一货币的薪水分叉的值。 该函数返回具有更新的薪水数字的表格（已经没有“货币”列，这是不必要的）。 </p><br><p> 我不得不修改白俄罗斯卢布：在以几种方法接收到非常奇怪的数据之后，我进行了一次小型研究，发现自2016年以来白俄罗斯使用了一种新货币，这种新货币不仅汇率不同，而且缩写也不同（现在不是BYR，而是BYN）。 。 在hh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">目录中</a> ，仍使用BYR缩写，关于中央银行的XML不知道什么。 因此，在函数<code>convert.currency()</code>我 <del> 不以最优雅的方式 </del> 首先，我用当前的缩写代替缩写，然后才直接进行转换。 </p><br><p> 看起来像这样： </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs mel">convert.currency &lt;- function(targetCurrency = <span class="hljs-string"><span class="hljs-string">"RUR"</span></span>, df, quotationsdf) { cond &lt;- (!is.na(df$Currency) &amp; df$Currency == <span class="hljs-string"><span class="hljs-string">"BYR"</span></span>) df[cond, <span class="hljs-string"><span class="hljs-string">"Currency"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"BYN"</span></span> currencies &lt;- unique(na.omit(df$Currency[df$Currency != targetCurrency])) #     ( ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is.null(df$From)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (currency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currencies) { <span class="hljs-keyword"><span class="hljs-keyword">condition</span></span> &lt;- (!is.na(df$From) &amp; df$Currency == currency) try( df$From[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] &lt;- df$From[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] * quotationsdf$Value[quotationsdf$CharCode == currency] ) } } #     ( ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is.null(df$To)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (currency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currencies) { <span class="hljs-keyword"><span class="hljs-keyword">condition</span></span> &lt;- !is.na(df$To) &amp; df$Currency == currency try( df$To[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] &lt;- df$To[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] * quotationsdf$Value[quotationsdf$CharCode == currency] ) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(-Currency)) }</code> </pre> </div></div><br><p> 您还可以考虑到某些薪水数据是以总值表示的，也就是说，员工的手头薪水会少一些。 要计算俄罗斯联邦居民的净工资，必须从这些数字中扣除13％（非居民则扣除30％）。 </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">gross.<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>.net &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(df, resident = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resident == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) coef &lt;- <span class="hljs-number"><span class="hljs-number">0.87</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> coef &lt;- <span class="hljs-number"><span class="hljs-number">0.7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>(df$Gross)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>)) #     ( ) { <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> &lt;- na.omit(<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(rownames(df[!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>) &amp; df$Gross == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>,]))) df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] &lt;- df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] * coef } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) #     ( ) { <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> &lt;- na.omit(<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(rownames(df[!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>) &amp; df$Gross == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>,]))) df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] &lt;- df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] * coef } df &lt;- df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(-Gross) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p> 当然，我不会这样做，因为在这种情况下，有必要考虑不同国家（而不仅仅是俄罗斯）的税收，或者在初始搜索查询中按国家/地区添加过滤条件。 </p><br><p> 分析之前的最后一步是将找到的职位空缺分为三类：六月，中级和高级职位，并将收到的职位写在新列中。 高级职位将包括名称中出现单词“ senior”及其同义词的职位。 同样，我们将找到关键字“ junior”和同义词的起始位置，并且在中间位置中包括以下所有中间位置： </p><br><pre> <code class="hljs powershell">get.positions &lt;- function(df) { df<span class="hljs-variable"><span class="hljs-variable">$lvl</span></span> &lt;- NA df[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-string"><span class="hljs-string">"lead|senior|||"</span></span>, <span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$Name</span></span>, <span class="hljs-type"><span class="hljs-type">ignore.case</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>), <span class="hljs-string"><span class="hljs-string">"lvl"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"senior"</span></span> df[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-string"><span class="hljs-string">"junior|||"</span></span>, <span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$Name</span></span>, <span class="hljs-type"><span class="hljs-type">ignore.case</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>), <span class="hljs-string"><span class="hljs-string">"lvl"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"junior"</span></span> df[<span class="hljs-type"><span class="hljs-type">is.na</span></span>(<span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$lvl</span></span>), <span class="hljs-string"><span class="hljs-string">"lvl"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"middle"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> <br><p> 将数据准备块添加到主脚本中。 </p><br><div class="spoiler">  <b class="spoiler_title">已添加</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># Step <span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">prepare</span></span> data # <span class="hljs-number"><span class="hljs-number">2.1</span></span>. Convert <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> currencies <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> target currency # <span class="hljs-number"><span class="hljs-number">2.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-type"><span class="hljs-type">date</span></span> currency rates quotations &lt;- quotations.<span class="hljs-keyword"><span class="hljs-keyword">update</span></span>() # <span class="hljs-number"><span class="hljs-number">2.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> convert <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> RUR jobdf &lt;- convert.currency(df = jobdf, quotationsdf = quotations) # <span class="hljs-number"><span class="hljs-number">2.2</span></span> convert Gross <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Net # jobdf &lt;- gross.<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>.net(df = jobdf) # <span class="hljs-number"><span class="hljs-number">2.3</span></span> define segments jobdf &lt;- <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>.positions(jobdf)</code> </pre> </div></div><br><h1 id="analiz"> 分析方法 </h1><br><p> 如上所述，我将分析所获得数据的以下方面： </p><br><ul><li> 平均工资BA / SA， </li><li> 在这个职位上最需要的技能和个人素质， </li><li> 某些技能和薪水水平之间的依赖关系（如果有）。 </li></ul><br><h2 id="sredniy-dohod-basa">  BA / SA平均收入 </h2><br><p> 事实证明，公司不愿指出工资的上限或下限。 </p><br><p> 在我们的数据框<code>jobdf</code>这些值分别在“收件人”和“发件人”列中。 我想查找平均值并将其写入新的薪金列。 </p><br><p> 对于薪水全部显示的情况，可以使用<code>mean()</code>函数轻松完成此操作，过滤掉插头上的数据全部或部分丢失的所有其他记录。 但是在这种情况下，我们的原始样本（现在已经很小）所剩不到10％。 因此，我计算系数 <del>  Podgoniana </del>  ，它告诉您在指示完整叉的空缺中，“ To”和“ From”值平均相差多少，并且在只有一个值缺失的情况下，借助它的帮助，我可以填写缺失的数据。 </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span>.paid &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(df, suggest = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) { # <span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span> a data frame <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> average salaries <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> # optionally, can suggest <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> one <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> specified <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (suggest == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) { df &lt;- df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>) | !<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) magic.coefficient &lt;- # shows the average difference <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> max <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> min salary round(mean(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>/df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>, na.rm = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>) df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span> &lt;- df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span> * magic.coefficient df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span> &lt;- df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span> / magic.coefficient } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { df &lt;- na.omit(df) } df$salary &lt;- rowMeans(x = df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) df$salary &lt;- ceiling(df$salary / <span class="hljs-number"><span class="hljs-number">10000</span></span>) * <span class="hljs-number"><span class="hljs-number">10000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(-<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>, -<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) }</code> </pre> </div></div><br><p> 这是一个“软”数据过滤，它在<code>select.paid()</code>函数中使用<code>suggest = TRUE</code>参数进行设置。 或者，我们可以在调用函数时指定<code>suggest = FALSE</code> ，并简单地剪掉至少部分缺少薪水数据的所有行。 但是，使用软过滤和魔术系数，我设法将样本中原始数据集的近四分之一保存了下来。 </p><br><p> 我们转到视觉部分： </p><br><p><img src="https://habrastorage.org/webt/tl/kf/rl/tlkfrlmay_64qqh4ttw9sfekr70.png"></p><br><p> 在此图上，您可以直观地评估BA / SA薪水在两个首都和地区的分布密度。 但是，如果我们指定请求并比较首都的中层和高层有多少呢？ </p><br><p><img src="https://habrastorage.org/webt/9w/vu/-c/9wvu-cqh1uwtvzs7h_s67tfaysu.png"></p><br><p> 从所获得的图表中可以清楚地看出，莫斯科和圣彼得堡的中高级男性之间的薪资状况差异并没有太大差异。 因此，在圣彼得堡，中产阶级通常获得约70 tr的收入，而在莫斯科，密度峰值约为120 tr，莫斯科和圣彼得堡的高级专家的收入差异平均相差6万。 </p><br><p> 例如，我们还可以按位置查看分析师的莫斯科薪酬： </p><br><p><img src="https://habrastorage.org/webt/p8/n3/qa/p8n3qaghbsibxc74tpmlju6xnba.png"></p><br><p> 可以得出的结论是：a）今天，莫斯科对入门级分析师的需求更大； b）同时，此类专家的最高工资门槛比中级和高级员工的门槛高得多。 </p><br><p> 另一个观察结果：莫斯科中高级专家的平均相交面积相当大。 这可能表明市场在这两个步骤之间的边界相当模糊。 </p><br><p> 切割后图表的完整代码。 </p><br><div class="spoiler">  <b class="spoiler_title">检视</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># Step <span class="hljs-number"><span class="hljs-number">3</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> salaries # <span class="hljs-number"><span class="hljs-number">3.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> paid jobs (<span class="hljs-keyword"><span class="hljs-keyword">with</span></span> salaries specified) jobs.paid &lt;- <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>.paid(jobdf) # <span class="hljs-number"><span class="hljs-number">3.2</span></span> plot salaries density <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> region ggplotly(ggplot(jobs.paid, aes(salary, fill = region, colour = region)) + geom_density(alpha=<span class="hljs-number"><span class="hljs-number">.3</span></span>) + scale_fill_discrete(guide = guide_legend(<span class="hljs-keyword"><span class="hljs-keyword">reverse</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>)) + scale_x_continuous(labels = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(x) format(x, scientific = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>), <span class="hljs-type"><span class="hljs-type">name</span></span> = ", .", breaks = round(seq(min(jobs.paid$salary), max(jobs.paid$salary), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = <span class="hljs-number"><span class="hljs-number">30000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>)) + scale_y_continuous(<span class="hljs-type"><span class="hljs-type">name</span></span> = " ") + theme(axis.text.x = element_text(size=<span class="hljs-number"><span class="hljs-number">9</span></span>), axis.title = element_text(size=<span class="hljs-number"><span class="hljs-number">10</span></span>))) # <span class="hljs-number"><span class="hljs-number">3.3</span></span> compare salaries <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> middle / senior <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> capitals ggplot(jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(region %<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>% c("", "-"), lvl %<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>% c("senior", "middle")), aes(salary, fill = region, colour = region)) + facet_grid(lvl ~ .) + geom_density(alpha = <span class="hljs-number"><span class="hljs-number">.3</span></span>) + scale_x_continuous(labels = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(x) format(x, scientific = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>), <span class="hljs-type"><span class="hljs-type">name</span></span> = ", .", breaks = round(seq(min(jobs.paid$salary), max(jobs.paid$salary), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = <span class="hljs-number"><span class="hljs-number">30000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>)) + scale_y_continuous(<span class="hljs-type"><span class="hljs-type">name</span></span> = " ") + scale_fill_discrete(<span class="hljs-type"><span class="hljs-type">name</span></span> = "") + scale_color_discrete(<span class="hljs-type"><span class="hljs-type">name</span></span> = "") + guides(fill=guide_legend( keywidth=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, keyheight=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.unit="inch") ) + theme(legend.spacing = unit(<span class="hljs-number"><span class="hljs-number">1</span></span>,"inch"), axis.title = element_text(size=<span class="hljs-number"><span class="hljs-number">10</span></span>)) # <span class="hljs-number"><span class="hljs-number">3.4</span></span> plot salaries <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Moscow <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> position ggplotly(ggplot(jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(region == ""), aes(salary, fill = lvl, color = lvl)) + geom_density(alpha=<span class="hljs-number"><span class="hljs-number">.4</span></span>) + scale_fill_brewer(palette = "Set2") + scale_color_brewer(palette = "Set2") + theme_light() + scale_y_continuous(<span class="hljs-type"><span class="hljs-type">name</span></span> = " ") + scale_x_continuous(labels = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(x) format(x, scientific = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>), <span class="hljs-type"><span class="hljs-type">name</span></span> = ", .", breaks = round(seq(min(jobs.paid$salary), max(jobs.paid$salary), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = <span class="hljs-number"><span class="hljs-number">30000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>)) + theme(axis.text.x = element_text(size=<span class="hljs-number"><span class="hljs-number">9</span></span>), axis.title = element_text(size=<span class="hljs-number"><span class="hljs-number">10</span></span>)))</code> </pre> </div></div><br><h2 id="analiz-navykov-key-skills"> 关键技能分析 </h2><br><p> 我们继续研究的主要目标-确定BA / SA最受欢迎的技能。 为此，我们将分析在职位空缺的特殊领域-关键技能中明确指出的数据。 </p><br><h3 id="naibolee-populyarnye-navyki"> 最受欢迎的技能 </h3><br><p> 之前，我们收到了一个单独的数据帧<code>all.skills</code> ，在其中记录了“ job id-skill”对。 使用<code>table()</code>函数可以轻松找到最常见的技能： </p><br><pre> <code class="hljs powershell">tmp &lt;- as.data.frame(table(all.skills<span class="hljs-variable"><span class="hljs-variable">$skill</span></span>), col.names = c(<span class="hljs-string"><span class="hljs-string">"Skill"</span></span>, <span class="hljs-string"><span class="hljs-string">"Freq"</span></span>)) htmlTable::htmlTable(x = head(tmp[<span class="hljs-type"><span class="hljs-type">order</span></span>(<span class="hljs-type"><span class="hljs-type">tmp</span></span><span class="hljs-variable"><span class="hljs-variable">$Freq</span></span>, <span class="hljs-type"><span class="hljs-type">na.last</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>, <span class="hljs-type"><span class="hljs-type">decreasing</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>),]), rnames = FALSE, header = c(<span class="hljs-string"><span class="hljs-string">"Skill"</span></span>, <span class="hljs-string"><span class="hljs-string">"Freq"</span></span>), align = <span class="hljs-string"><span class="hljs-string">'l'</span></span>, css.cell = <span class="hljs-string"><span class="hljs-string">"padding-left: .5em; padding-right: 2em;"</span></span>)</code> </pre> <br><p> 您会得到如下内容： </p><br><p><img src="https://habrastorage.org/webt/fe/t1/jr/fet1jrr_wgnh7veffx3cgbaoe5y.png"></p><br><p>  Freq是“ key_skills”字段中的空缺数量，该空缺数量指示了“技能”列中的相应技能。 </p><br><p>  “但这还不是全部！”（C）很明显，在不同的空缺中可以用同义词轻松地找到相同的技能。 </p><br><p> 我为技能名称编写了一个小的同义词词典，并将其分为几类。 </p><br><p> 该词典是一个带有类别列的csv文件-以下内容之一：活动，工具，知识，标准和个人； 技能-技能的主要名称，我将使用它代替找到的所有同义词；  syn1，syn2，... syn13-每个技能的实际可能变化。 某些行可能包含同义词的空列。 </p><br><pre> <code class="hljs cs">category;skill;syn1;syn2;syn3;syn4;syn5;syn6;syn7;syn8;syn9;syn10;syn11;syn12;syn13 tools;axure;;;;;;;;;;;;; tools;lucidchart;;;;;;;;;;;;; standards;archimate;;;;;;;;;;;;; standards;uml;activity diagram;use <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> diagram;ucd;<span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">diagram</span></span>;;;;;;;;; personal;teamwork;team player;  ;;;;;;;;;;; activities;wireframing;mockup;mock-up;;-;wireframe;;ui;ux/;/ux;;;;</code> </pre> <br><p> 首先，导入字典，然后根据现有的等效项再次重新分配技能： </p><br><pre> <code class="hljs pgsql"># <span class="hljs-keyword"><span class="hljs-keyword">Analyze</span></span> skills # <span class="hljs-number"><span class="hljs-number">4.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> dict &lt;- <span class="hljs-keyword"><span class="hljs-keyword">read</span></span>.csv(file = "competencies.csv", <span class="hljs-keyword"><span class="hljs-keyword">header</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>, sep = ";", na.strings = "", encoding = "UTF-8") # <span class="hljs-number"><span class="hljs-number">4.2</span></span> match skills <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills &lt;- categorize.skills(<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills, dict)</code> </pre> <br><p> 在剪切下，您可以看到<code>categorize.skills()</code>函数的填充。 </p><br><div class="spoiler">  <b class="spoiler_title">那些胆量大！</b> <div class="spoiler_text"><pre> <code class="hljs powershell">categorize.skills &lt;- function(analyst_skills, dictionary) { analyst_skills<span class="hljs-variable"><span class="hljs-variable">$skill</span></span>.group &lt;- NA analyst_skills<span class="hljs-variable"><span class="hljs-variable">$category</span></span> &lt;- NA <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myskill <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dictionary<span class="hljs-variable"><span class="hljs-variable">$skill</span></span>) { category &lt;- dictionary[<span class="hljs-type"><span class="hljs-type">dictionary</span></span><span class="hljs-variable"><span class="hljs-variable">$skill</span></span> == <span class="hljs-type"><span class="hljs-type">myskill</span></span>, <span class="hljs-string"><span class="hljs-string">"category"</span></span>] mypattern &lt;- paste0(na.omit(t(dictionary %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(skill == myskill) %&gt;% select(starts_with(<span class="hljs-string"><span class="hljs-string">"syn"</span></span>)))), collapse = <span class="hljs-string"><span class="hljs-string">"|"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nchar(mypattern) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) mypattern &lt;- paste0(c(myskill, mypattern), collapse = <span class="hljs-string"><span class="hljs-string">"|"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mypattern &lt;- myskill <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>( { analyst_skills[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">analyst_skills</span></span><span class="hljs-variable"><span class="hljs-variable">$skill</span></span>, <span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-type"><span class="hljs-type">mypattern</span></span>),<span class="hljs-string"><span class="hljs-string">"skill.group"</span></span>] &lt;- myskill analyst_skills[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">analyst_skills</span></span><span class="hljs-variable"><span class="hljs-variable">$skill</span></span>, <span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-type"><span class="hljs-type">mypattern</span></span>),<span class="hljs-string"><span class="hljs-string">"category"</span></span>] &lt;- category } ) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(analyst_skills) }</code> </pre> </div></div><br><p> 我将类别和技能列添加到原始技能数据框中。 组-分别表示技能的类别和通用名称。 然后，我检查了导入的字典，并从同义词的每一行组成了<code>grep()</code>函数的模式。 通过将每个非空列值添加到该行，我用破折号将它们分开以获得“或”条件。 因此，对于源表中的所有技能（包括<code>uml|activity diagram|use case diagram|ucd|class diagram</code> ，我将在skill.group列中写入值“ uml”。 所有人的技能也是如此！..原始数据帧中的技能。 </p><br><p> 通过重新请求最流行的技能，您可以看到力量的排列有所变化： </p><br><p><img src="https://habrastorage.org/webt/ks/pl/xo/ksplxofujwalnkk7vsjnlyenp5c.png"></p><br><p> 这三位领导人现在拥有项目管理，业务分析和文档编制，而UML的知识已从前7名转移到了7名。 </p><br><p> 仔细研究类别并找出每种类别中最需要的技能是非常有趣的。 </p><br><p> 例如，对于知识类别，情况如下： </p><br><div class="spoiler">  <b class="spoiler_title">查看代码</b> <div class="spoiler_text"><pre> <code class="hljs mel">tmp &lt;- merge(x = all.skills, y = jobdf %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(id, lvl), by = <span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sort</span></span> = FALSE) tmp &lt;- na.omit(tmp) ggplot(as.data.frame(table(tmp %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(category == <span class="hljs-string"><span class="hljs-string">"knowledge"</span></span>) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)))) + geom_bar(colour = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span>, stat = <span class="hljs-string"><span class="hljs-string">"identity"</span></span>, aes(x = <span class="hljs-keyword"><span class="hljs-keyword">reorder</span></span>(Var1, Freq), y = Freq, fill = <span class="hljs-keyword"><span class="hljs-keyword">reorder</span></span>(Var1, -Freq))) + scale_y_continuous(name = <span class="hljs-string"><span class="hljs-string">" "</span></span>) + theme(legend.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.<span class="hljs-keyword"><span class="hljs-keyword">text</span></span> = element_text(<span class="hljs-keyword"><span class="hljs-keyword">size</span></span> = <span class="hljs-number"><span class="hljs-number">12</span></span>)) + coord_flip()</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/rc/nm/39/rcnm39xkws0pl3cl-pslehkvykk.png"></p><br><p> 该图显示对数据库，软件开发方法和1C领域的知识的最大需求。 接下来是CRM，ERP系统和编程基础方面的知识。 </p><br><p> 就标准而言，确实非常需要SQL和UML的知识，ARIS标记紧随其后，但GOST仅占据第六位。 </p><br><div class="spoiler">  <b class="spoiler_title">这是代码</b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplot(<span class="hljs-name"><span class="hljs-name">as</span></span>.data.frame(<span class="hljs-name"><span class="hljs-name">table</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"standards"</span></span>) %&gt;% select(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group)))) + geom_bar(<span class="hljs-name"><span class="hljs-name">colour</span></span> = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span>, stat = <span class="hljs-string"><span class="hljs-string">"identity"</span></span>, aes(<span class="hljs-name"><span class="hljs-name">x</span></span> = reorder(<span class="hljs-name"><span class="hljs-name">Var1</span></span>, Freq), y = Freq, fill = Var1)) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">" "</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.text = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">12</span></span>)) + coord_flip()</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/t5/ue/xu/t5uexufq4amkljtdmdngysyuwqu.png"></p><br><p> 至于使用过的工具，我们再次看到确认头是分析人员的主要工具。 一个人离不开MS Office生产线和任务跟踪系统，但是剩下的部分对于编辑人员来说无关紧要，分析师可以在其中创建自己的方案或绘制界面模型。 </p><br><div class="spoiler">  <b class="spoiler_title">这是代码</b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplot(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"tools"</span></span>)) + geom_histogram(<span class="hljs-name"><span class="hljs-name">colour</span></span> = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span>, stat = <span class="hljs-string"><span class="hljs-string">"count"</span></span>, aes(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group, fill = skill.group)) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">" "</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.text = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">12</span></span>)) + coord_flip()</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/hw/7e/jh/hw7ejh4ntj1nln-p7hbfgyb36vq.png"></p><br><h3 id="vliyanie-navykov-na-dohod"> 技能对收入的影响 </h3><br><p> , ,        .     ,      ,   ,        . </p><br><p>           <code>jobs.paid</code>   <code>all.skills</code> ,         data frame. </p><br><pre> <code class="hljs pgsql"># <span class="hljs-number"><span class="hljs-number">4.4</span></span> vizualize paid skills tmp &lt;- na.omit(merge(x = <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills, y = jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(id, salary, lvl, City), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = "id", sort = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>))</code> </pre> <br><p>    : </p><br><pre> <code class="hljs lua">&gt; head(tmp) id skill skill.group category salary lvl City <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span> android mobile <span class="hljs-built_in"><span class="hljs-built_in">os</span></span> knowledge <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span>   project management activities <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span>   project management activities <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span> ios mobile <span class="hljs-built_in"><span class="hljs-built_in">os</span></span> knowledge <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">25750025</span></span> aris aris standards <span class="hljs-number"><span class="hljs-number">70000</span></span> middle  <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">25750025</span></span> - business analysis activities <span class="hljs-number"><span class="hljs-number">70000</span></span> middle </code> </pre> <br><p>        , ..     .    : </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplotly(<span class="hljs-name"><span class="hljs-name">ggplot</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"activities"</span></span>), aes(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group, salary)) + coord_flip() + geom_count(<span class="hljs-name"><span class="hljs-name">aes</span></span>(<span class="hljs-name"><span class="hljs-name">size</span></span> = ..n.., color = City)) + scale_fill_discrete(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span>) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">", ."</span></span>) + scale_size_area(<span class="hljs-name"><span class="hljs-name">max_size</span></span> = <span class="hljs-number"><span class="hljs-number">11</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"bottom"</span></span>, axis.title = element_blank(), axis.text.y = element_text(<span class="hljs-name"><span class="hljs-name">size=10</span></span>, angle=10)))</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/kg/p5/zx/kgp5zx9_quhke3vrstg0wdqsb54.png"></p><br><p>     ,    BA/SA           . </p><br><p>      : </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplot(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"personal"</span></span>, City %in% c(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>)), aes(<span class="hljs-name"><span class="hljs-name">tools</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">:toTitleCase</span></span>(<span class="hljs-name"><span class="hljs-name">skill</span></span>), salary)) + coord_flip() + geom_count(<span class="hljs-name"><span class="hljs-name">aes</span></span>(<span class="hljs-name"><span class="hljs-name">size</span></span> = ..n.., color = skill.group)) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">breaks</span></span> = round(<span class="hljs-name"><span class="hljs-name">seq</span></span>(<span class="hljs-name"><span class="hljs-name">min</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), max(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), by = <span class="hljs-number"><span class="hljs-number">20000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>), name = <span class="hljs-string"><span class="hljs-string">", ."</span></span>) + scale_size_area(<span class="hljs-name"><span class="hljs-name">max_size</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.title = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">11</span></span>), axis.text.y = element_text(<span class="hljs-name"><span class="hljs-name">size=10</span></span>, angle=0))</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/ao/-9/de/ao-9deui5nzklciz_ia4en0aqkm.png"></p><br><p>    ,    MS Office         , —     ,      -          .  ,   ,   ,         . </p><br><p>  ,   ,   :     UML  ARIS,    SQL   (  )    ,    IDEF —     ,      "". </p><br><p><img src="https://habrastorage.org/webt/fj/de/xh/fjdexhskz6oer1ahnjx2ecsgumm.png"></p><br><h2 id="analiz-teksta-vakansiy">    </h2><br><p>   ,           ,      ,       .   ,       1478         -    key_skills.  ,          -     . </p><br><h3 id="import-i-podgotovka-opisaniy">     </h3><br><p> ,         data frame: </p><br><pre> <code class="hljs lua">&gt; jobdf$Responsibility<span class="hljs-string"><span class="hljs-string">[[1]]</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-string"><span class="hljs-string">"Training course in business analysis. ● Define needs of the user/client, understand the problem which needs to be solved. ● "</span></span> &gt; jobdf$Requirement<span class="hljs-string"><span class="hljs-string">[[1]]</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-string"><span class="hljs-string">"At least 6 months&amp;#39; experience in business analysis. ● Knowledge of qualitative methods such as usability testing, interviewing, focus groups. ● "</span></span></code> </pre> <br><p> , ,  .       URL'  ,    . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs powershell">hh.get.full.desrtion &lt;- function(df) { df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description &lt;- NA <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myURL <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>( { <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> &lt;- fromJSON(myURL) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (length(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span><span class="hljs-variable"><span class="hljs-variable">$description</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description[<span class="hljs-type"><span class="hljs-type">which</span></span>(<span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == <span class="hljs-type"><span class="hljs-type">myURL</span></span>, <span class="hljs-type"><span class="hljs-type">arr.ind</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>)] &lt;- <span class="hljs-keyword"><span class="hljs-keyword">data</span></span><span class="hljs-variable"><span class="hljs-variable">$description</span></span> } print(paste0(<span class="hljs-string"><span class="hljs-string">"Filling in "</span></span> , which(df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == myURL, arr.ind = TRUE) , <span class="hljs-string"><span class="hljs-string">" out of "</span></span> , length(df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span>))) } ) } df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description &lt;- tolower(df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p>      - , html-  .,            <code>gsub</code> : </p><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">remove</span></span>.Html &lt;- <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(htmlString)</span></span></span></span> { #<span class="hljs-built_in"><span class="hljs-built_in">remove</span></span> html tags <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;.*?&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, htmlString)) }</code> </pre> <br><p> , ,    ,           ,  .      data frame   (   df),       ,        df  "id, skill.group, category". </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs pgsql">skills.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(df, <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>) { sk &lt;- data.frame( id = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() , skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> = <span class="hljs-type"><span class="hljs-type">character</span></span>() , category = <span class="hljs-type"><span class="hljs-type">character</span></span>() ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myskill <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>$skill) { category &lt;- <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>$skill == myskill, "category"] mypattern &lt;- paste0(na.omit(t(<span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(skill == myskill) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(starts_with("syn")))), collapse = "|") <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">nchar</span></span>(mypattern) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { mypattern &lt;- paste0(c(myskill, mypattern), collapse = "|") } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { mypattern &lt;- myskill } cond = grep(x = df$<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description, pattern = mypattern) tmp &lt;- data.frame( id = df[cond, "id"], skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> = rep(myskill, length(cond)), category = rep(category, length(cond)) ) sk &lt;- rbind(sk, tmp) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(sk) }</code> </pre> </div></div><br><h3 id="snova-o-samyh-vostrebovannyh-navykah">      </h3><br><pre> <code class="hljs pgsql"># <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-type"><span class="hljs-type">text</span></span> analysis # <span class="hljs-number"><span class="hljs-number">5.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">full</span></span> descriptions jobdf &lt;- hh.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description(jobdf) jobdf$<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description &lt;- remove.Html(tolower(jobdf$<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description)) sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span> &lt;- skills.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>(jobdf, dict)</code> </pre> <br><p> ,  ? </p><br><pre> <code class="hljs pgsql">&gt; head(sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>) id skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> category <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">25638419</span></span> axure tools <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">24761526</span></span> axure tools <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">25634145</span></span> axure tools <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">24451152</span></span> axure tools <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">25630612</span></span> axure tools <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">24985548</span></span> axure tools &gt; tmp &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.data.frame(<span class="hljs-keyword"><span class="hljs-keyword">table</span></span>(sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>$skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>), col.names = c("Skill", "Freq")) &gt; htmlTable::htmlTable(x = head(tmp[<span class="hljs-keyword"><span class="hljs-keyword">order</span></span>(tmp$Freq, na.last = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, decreasing = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>),], <span class="hljs-number"><span class="hljs-number">20</span></span>), rnames = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">header</span></span> = c("Skill", "Freq"), align = <span class="hljs-string"><span class="hljs-string">'l'</span></span>, css.cell = "padding-left: .5em; padding-right: 2em;")</code> </pre> <br><p><img src="https://habrastorage.org/webt/qn/kq/np/qnkqnprl1bcfuz2lt6wk29ukcio.png"></p><br><p> ,      ! Project management,       key_skills,       (   ). </p><br><p>     ,         ,        key_skills       -5. </p><br><p>      ,         .          1478 ,    ,    key_skills,      ,     . </p><br><p><img src="https://habrastorage.org/webt/7j/0x/no/7j0xno5etsw92txe8q5pfsixqv8.png"></p><br><p>    ,     ,    BA        , -      . </p><br><p><img src="https://habrastorage.org/webt/am/ou/pc/amoupckhtlpmbkfkglhpd9tjqwg.png"></p><br><h3 id="i-snova-o-dengah">     </h3><br><p> ,         . </p><br><p>      data frame   ,    ,      .       ,      -. </p><br><pre> <code class="hljs pgsql">tmp &lt;- na.omit(merge(x = sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>, y = jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(City %<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>% c("", "-")) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(id, salary, lvl, City), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = "id", sort = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>))</code> </pre> <br><pre> <code class="hljs objectivec">&gt; head(tmp) <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> skill.group category salary lvl City <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> uml standards <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> requirements management activities <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> designing business processes activities <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> communication skills personal <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> mobile os knowledge <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> ms visio tools <span class="hljs-number"><span class="hljs-number">160000</span></span> middle </code> </pre> <br><p>     ,            ,    ,             . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplotly(<span class="hljs-name"><span class="hljs-name">ggplot</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"activities"</span></span>), aes(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group, lvl)) + geom_count(<span class="hljs-name"><span class="hljs-name">aes</span></span>(<span class="hljs-name"><span class="hljs-name">color</span></span> = salary, size = ..n..)) + scale_size_area(<span class="hljs-name"><span class="hljs-name">max_size</span></span> = <span class="hljs-number"><span class="hljs-number">13</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"right"</span></span>, legend.title = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span>), axis.title = element_blank(), axis.text.y = element_text(<span class="hljs-name"><span class="hljs-name">size=10</span></span>)) + coord_flip() + scale_color_continuous(<span class="hljs-name"><span class="hljs-name">labels</span></span> = function(<span class="hljs-name"><span class="hljs-name">x</span></span>) format(<span class="hljs-name"><span class="hljs-name">x</span></span>, scientific = FALSE), breaks = round(<span class="hljs-name"><span class="hljs-name">seq</span></span>(<span class="hljs-name"><span class="hljs-name">min</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), max(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), by = <span class="hljs-number"><span class="hljs-number">70000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>), low = <span class="hljs-string"><span class="hljs-string">"blue"</span></span>, high = <span class="hljs-string"><span class="hljs-string">"red"</span></span>, name = <span class="hljs-string"><span class="hljs-string">", ."</span></span>))</code> </pre> </div></div><br><p>      ? </p><br><p><img src="https://habrastorage.org/webt/js/eo/0o/jseo0o75saiwtj14u0a0z1fbd_c.png"></p><br><p> -, ,          -  . (    ,     ,      ,      .) </p><br><p> -,   ,  ""    -,      . </p><br><p>          ,     key_skills. </p><br><p><img src="https://habrastorage.org/webt/tm/na/lz/tmnalz2vluh5ihlax9yqe11_ita.png"></p><br><p>   ,   ,         150 ..         UML  ARIS,   IDEF,  ,        —      . </p><br><p>         : </p><br><p><img src="https://habrastorage.org/webt/45/ze/2z/45ze2zurgduh50qz03z9egc_kws.png"></p><br><p>   ,  -     ,    ,    key_skills  ,      .  ,     150 ..    ,           . </p><br><h2 id="a-kak-zhe-bescennyy-opyt">     ? </h2><br><p> ,          -   : </p><br><p><img src="https://habrastorage.org/webt/eg/fa/xn/egfaxnsxj6y03vzzmysisihdo4s.png"></p><br><p> ,      ,        ,       ?  ,           .   ,  ,       .   ,   ó    (    )     <del>   </del> . </p><br><p>  ,  -    : </p><br><p><img src="https://habrastorage.org/webt/nd/vn/b3/ndvnb3hm_ayffdszrruohuyj2go.png"></p><br><h1 id="koe-kakie-vyvody"> -  </h1><br><p>        BA/SA ,  </p><br><ul><li>          .             ,     ; </li><li>      (    )   200 .. ,    ,              ; </li><li>          ; </li><li>    — -  ( ,  ,         ) </li><li>  <code>key_skills</code>    hh   ,             ; </li><li>   ,   ,    ,          (!)  ; </li><li>       ,       -,   UX   ; </li><li>    . ,    -    150 ..; </li><li>  ,   ,   SQL,    UML &amp; ARIS.         , ..         .  , ,    ,   <del>   </del>  . </li></ul><br><pre> <code class="hljs pgsql">wordcloud2::wordcloud2(data = <span class="hljs-keyword"><span class="hljs-keyword">table</span></span>(sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>$skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>), rotateRatio = <span class="hljs-number"><span class="hljs-number">0.3</span></span>, color = <span class="hljs-string"><span class="hljs-string">'random-dark'</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/kh/07/1l/kh071lq_vp7d4lihybz-k2kx-ow.gif" alt="图片"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN413731/">https://habr.com/ru/post/zh-CN413731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN413719/index.html">C ++ 20即将发布！ 在Rapperswil Yona开会</a></li>
<li><a href="../zh-CN413721/index.html">时间检查：劫持与比特币</a></li>
<li><a href="../zh-CN413723/index.html">电子服务及其位置的传奇。 第2部分。电子柜</a></li>
<li><a href="../zh-CN413725/index.html">在bash中使用数组</a></li>
<li><a href="../zh-CN413729/index.html">我们如何以及为什么编写我们的ECS</a></li>
<li><a href="../zh-CN413733/index.html">Mikrosh，Krista，Apogee，利沃夫-第一台苏联外卖计算机</a></li>
<li><a href="../zh-CN413739/index.html">我们如何扫描整个互联网以及我们学到了什么</a></li>
<li><a href="../zh-CN413741/index.html">它是什么以及如何：WWDC Redmadrobot团队印象</a></li>
<li><a href="../zh-CN413743/index.html">只需单击几下即可启动LAMP和其他数百种Web应用程序</a></li>
<li><a href="../zh-CN413745/index.html">一次为人体所有电子设备开发了无线电源系统</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>