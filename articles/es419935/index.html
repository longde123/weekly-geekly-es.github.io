<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèæ üêΩ üë∞ Exactamente una vez NO es exactamente lo mismo: an√°lisis de art√≠culos üôéüèº üë©‚ÄçüöÄ ‚ôìÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduccion 


 Decid√≠ analizar un art√≠culo que describe algunos detalles interesantes del procesamiento de transmisi√≥n exactamente una vez: exactame...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exactamente una vez NO es exactamente lo mismo: an√°lisis de art√≠culos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419935/"><h2 id="vvedenie">  Introduccion </h2><br><p>  Decid√≠ analizar un art√≠culo que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">describe algunos detalles interesantes del procesamiento de transmisi√≥n exactamente una vez: exactamente una vez</a> .  El hecho es que algunos autores entienden los t√©rminos de manera muy extra√±a.  El an√°lisis del art√≠culo nos permitir√° aclarar muchos detalles m√°s profundamente, porque  La identificaci√≥n de inconsistencias y rarezas le permite experimentar m√°s plenamente los conceptos y el significado. </p><br><p>  Empecemos </p><br><h2 id="analiz">  An√°lisis </h2><br><p>  Todo comienza muy bien: </p><a name="habracut"></a><br><blockquote> El procesamiento de flujo de eventos distribuidos se ha convertido en un tema cada vez m√°s candente en el √°rea de Big Data.  Los motores de procesamiento de flujo (SPE) notables incluyen Apache Storm, Apache Flink, Heron, Apache Kafka (Kafka Streams) y Apache Spark (Spark Streaming).  Una de las caracter√≠sticas m√°s notables y ampliamente discutidas de los SPE es su sem√°ntica de procesamiento, con "exactamente una vez" siendo uno de los m√°s buscados y muchos SPE afirman proporcionar sem√°ntica de procesamiento "exactamente una vez". </blockquote><p>  Es decir, el procesamiento de datos es extremadamente importante, etc., y el tema en discusi√≥n es exactamente una vez.  Hablemos de ello. </p><br><blockquote>  Sin embargo, existe una gran cantidad de malentendidos y ambig√ºedades que rodean qu√© es exactamente "exactamente una vez", qu√© implica y qu√© significa realmente cuando las SPEs individuales afirman proporcionarlo. </blockquote><p>  De hecho, es muy importante entender qu√© es.  Para hacer esto, ser√≠a bueno dar la definici√≥n correcta antes de un razonamiento extenso.  ¬øY qui√©n soy yo para dar tan malditos consejos? </p><br><blockquote>  Discutir√© c√≥mo la sem√°ntica de procesamiento "exactamente una vez" difiere entre muchos SPEs populares y por qu√© "exactamente una vez" puede describirse mejor como efectivamente una vez </blockquote><p>  Inventar nuevos t√©rminos es, por supuesto, una tarea importante.  Me encanta esta cosa yo mismo.  Solo por esto, se necesita justificaci√≥n.  Intentemos encontrarlo. </p><br><p>  No describir√© las cosas obvias como gr√°ficos de procesamiento dirigido, etc.  Los lectores pueden leer el art√≠culo original por su cuenta.  Adem√°s, para el an√°lisis de estos detalles son irrelevantes.  Solo dar√© una foto: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/14b/024/a60/14b024a60f1b9403430bd43ff77cb50b.png"></p><br><p>  A continuaci√≥n, hay una descripci√≥n de la sem√°ntica: </p><br><ul><li>  A lo sumo una vez, es decir  No m√°s de una vez.  Con la aparente obviedad, este comportamiento es extremadamente dif√≠cil de garantizar en escenarios de nivel l√≠mite como fallas, interrupci√≥n de la conectividad de la red y m√°s.  Pero para el autor todo es simple: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b12/02f/cb0/b1202fcb0c735e893daf0373ba23255e.png"></p><br><ul><li>  Al menos una vez, es decir  al menos una vez  El esquema es m√°s complejo.  Y el rastrillo se puede recoger m√°s: </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/879/4cd/bd3/8794cdbd351ae965b267e7a3d51ae761.png"></p><br><ul><li>  Exactamente una vez.  ¬øQu√© es exactamente una vez? </li></ul><br><blockquote>  Se garantiza que los eventos ser√°n procesados ‚Äã‚Äã"exactamente una vez" por todos los operadores en la aplicaci√≥n de transmisi√≥n, incluso en el caso de varias fallas. </blockquote><p>  Es decir  La garant√≠a de procesamiento exactamente una vez es cuando se ha producido el procesamiento "exactamente una vez". </p><br><p>  Siente el poder de la determinaci√≥n?  Para reformular: el procesamiento una vez es cuando el procesamiento ocurre "una vez".  Bueno, s√≠, tambi√©n dice que esta garant√≠a debe preservarse en caso de fallas.  Pero para los sistemas distribuidos, esto es algo obvio.  Y las comillas insin√∫an que algo est√° mal aqu√≠.  Definir con comillas sin explicar lo que esto significa es una se√±al de un enfoque profundo y reflexivo. </p><br><p>  La siguiente es una descripci√≥n de c√≥mo implementar dicha sem√°ntica.  Y aqu√≠ me gustar√≠a hablar con m√°s detalle. </p><br><blockquote>  Por lo general, se utilizan dos mecanismos populares para lograr la sem√°ntica de procesamiento "exactamente una vez". <br><ol><li>  Instant√°nea distribuida / verificaci√≥n de estado </li><li>  Entrega de eventos al menos una vez m√°s deduplicaci√≥n de mensajes </li></ol><br></blockquote><p>  Si el primer mecanismo con respecto a las instant√°neas y los puntos de control no genera preguntas, bueno, excepto por algunos detalles como la eficiencia, entonces hay peque√±os problemas con el segundo que el autor ignor√≥. </p><br><p>  Por alguna raz√≥n, se entiende que un controlador solo puede ser determinista.  En el caso de un controlador no determinista, cada reinicio posterior dar√°, en t√©rminos generales, otros valores y estados de salida, lo que significa que la deduplicaci√≥n no funcionar√°, porque  Los valores de salida ser√°n diferentes.  Por lo tanto, el mecanismo general ser√° mucho m√°s complicado que el descrito en el art√≠culo.  O, francamente, tal mecanismo es incorrecto. </p><br><p>  Sin embargo, pasamos a lo m√°s delicioso: </p><br><blockquote><h2 id="is-exactly-once-really-exactly-once">  ¬øEs exactamente una vez realmente exactamente una vez? </h2><br><br>  Ahora reexaminemos lo que la sem√°ntica de procesamiento "exactamente una vez" realmente garantiza al usuario final.  La etiqueta "exactamente una vez" es enga√±osa al describir lo que se hace exactamente una vez. </blockquote><p>  Se dice que es hora de reconsiderar este concepto, ya que  Hay algunas inconsistencias. </p><br><blockquote>  Algunos podr√≠an pensar que "exactamente una vez" describe la garant√≠a para el procesamiento de eventos en el que cada evento en la secuencia se procesa solo una vez.  En realidad, no hay SPE que pueda garantizar exactamente el procesamiento una vez.  Garantizar que la l√≥gica definida por el usuario en cada operador solo se ejecute una vez por evento es imposible ante fallas arbitrarias, porque la ejecuci√≥n parcial del c√≥digo de usuario es una posibilidad siempre presente. </blockquote><p>  Estimado autor, vale la pena recordar c√≥mo funcionan los procesadores modernos.  Cada procesador en proceso realiza una gran cantidad de etapas paralelas.  Adem√°s, hay ramas en las que el procesador comienza a realizar acciones incorrectas si el predictor de ramas est√° equivocado.  En este caso, las acciones se revierten.  Por lo tanto, el procesador puede ejecutar el mismo c√≥digo dos veces, ¬°incluso si no se han producido fallas! </p><br><p>  El lector atento exclamar√° de inmediato: porque el escape es importante, y no c√≥mo se realiza.  Exactamente!  Lo que importa es lo que sucedi√≥ como resultado, no c√≥mo sucedi√≥ realmente.  Si el resultado es como si sucediera exactamente una vez, entonces eso significa que sucedi√≥ exactamente una vez.  No encontrar?  Y todo lo dem√°s es c√°scara, irrelevante.  Los sistemas son complejos, y las abstracciones resultantes crean solo la ilusi√≥n de ejecuci√≥n de cierta manera.  Nos parece que el c√≥digo se ejecuta secuencialmente, instrucci√≥n por instrucci√≥n, que primero lee, luego escribe y luego una nueva instrucci√≥n.  Pero esto no es as√≠, todo es mucho m√°s complicado.  Y la esencia de las abstracciones correctas es mantener la ilusi√≥n de garant√≠as simples y comprensibles, sin profundizar en cada momento, cuando necesita asignar valores a una variable. </p><br><p>  Y todo el problema de este art√≠culo radica en el hecho de que exactamente una vez es una abstracci√≥n que le permite crear aplicaciones sin pensar en duplicados y valores perdidos.  Que todo estar√° bien, incluso en caso de ca√≠da.  Y no hay necesidad de inventar nuevos t√©rminos para esto. </p><br><p>  El c√≥digo de ejemplo en el art√≠culo demuestra claramente una falta de comprensi√≥n de c√≥mo escribir controladores: </p><br><pre><code class="hljs cs">Map (Event <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) { Print <span class="hljs-string"><span class="hljs-string">"Event ID: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.getId() Return <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> }</code> </pre> <br><p>  Se invita al lector a reescribir independientemente el c√≥digo para no repetir los errores del autor del art√≠culo. </p><br><blockquote>  Entonces, ¬øqu√© garantiza SPEs cuando reclaman sem√°ntica de procesamiento "exactamente una vez"?  Si no se puede garantizar que la l√≥gica del usuario se ejecute exactamente una vez, ¬øqu√© se ejecuta exactamente una vez?  Cuando los SPE afirman una sem√°ntica de procesamiento "exactamente una vez", lo que en realidad dicen es que pueden garantizar que las actualizaciones al estado administrado por SPE se env√≠en solo una vez a una tienda de back-end duradera. </blockquote><p>  El usuario no necesita una garant√≠a de la ejecuci√≥n f√≠sica del c√≥digo.  Sabiendo c√≥mo funciona el procesador, es f√°cil concluir que esto no es posible.  Lo principal es la ejecuci√≥n l√≥gica exactamente una vez, como si no hubiera fallas en absoluto.  Atraer los conceptos de "comprometerse con el almac√©n de datos" solo agrava la falta de comprensi√≥n del autor de las cosas b√°sicas, porque  hay implementaciones de tal sem√°ntica sin la necesidad de una confirmaci√≥n. </p><br><p>  Para obtener m√°s informaci√≥n, puede leer brevemente mi art√≠culo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Procesamiento de datos competitivos heterog√©neos en tiempo real estrictamente una vez</a> . </p><br><blockquote>  En otras palabras, el procesamiento de un evento puede ocurrir m√°s de una vez, pero el efecto de ese procesamiento solo se refleja una vez en el almac√©n de estado de back-end duradero. </blockquote><p>  Que haya una "tienda de estado de back-end duradera" para el usuario es absolutamente violeta.  Solo el efecto del procesamiento es importante, es decir  Consistencia y valores de salida en todo el intervalo de procesamiento de datos de transmisi√≥n.  Vale la pena se√±alar que para algunas tareas no es necesario tener una tienda de estado de back-end duradera, y ser√≠a bueno garantizar exactamente una vez. </p><br><blockquote>  Aqu√≠ en Streamlio, hemos decidido que efectivamente, una vez, es el mejor t√©rmino para describir esta sem√°ntica de procesamiento. </blockquote><p>  Un ejemplo t√≠pico de entrada est√∫pida de conceptos: escribiremos algunos ejemplos y argumentos largos para un p√°rrafo completo, y al final agregaremos que "definimos este concepto".  La precisi√≥n y claridad de las definiciones provocan una respuesta emocional realmente v√≠vida. </p><br><h2 id="vyvody">  Conclusiones </h2><br><p>  El malentendido de la esencia de las abstracciones conduce a una distorsi√≥n del significado original de los conceptos existentes y la posterior creaci√≥n de nuevos t√©rminos desde cero. </p><br><p>  [1] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Exactamente una vez NO es exactamente lo mismo</a> . <br>  [2] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Procesamiento de datos competitivos heterog√©neos en tiempo real estrictamente una vez</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419935/">https://habr.com/ru/post/es419935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419925/index.html">Control de versiones de archivos individuales usando GitHub Gist</a></li>
<li><a href="../es419927/index.html">[DotNetBook] Excepciones: Arquitectura de sistema de tipo</a></li>
<li><a href="../es419929/index.html">[DotNetBook] Eventos de excepci√≥n y c√≥mo obtener StackOverflow y ExecutionEngineException desde cero</a></li>
<li><a href="../es419931/index.html">[DotNetBook] Tiempo para historias entretenidas: situaciones excepcionalmente excepcionales</a></li>
<li><a href="../es419933/index.html">C√≥mo hacer b√∫squedas de usuarios en Github usando Angular</a></li>
<li><a href="../es419939/index.html">C√≥mo hice que la navegaci√≥n en React Native no sea tan terrible</a></li>
<li><a href="../es419941/index.html">Recorrido fotogr√°fico por la oficina de Audiomania: primera parte</a></li>
<li><a href="../es419943/index.html">Lo que le√≠mos en julio: c√≥mo encontrar tiempo para leer, cinco libros para el liderazgo del equipo y algunos art√≠culos nuevos</a></li>
<li><a href="../es419945/index.html">C√≥mo prepararse para una entrevista en Google y no pasarla. Dos veces</a></li>
<li><a href="../es419947/index.html">Con√©ctese a PiZeroW con Raspbian Stretch Lite, sin adaptadores adicionales y un monitor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>