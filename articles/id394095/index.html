<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👃🏿 🛀🏾 👩‍⚖️ Bagaimana Anak Sekolah Hackathon NASA Membalikkan Rekayasa Gelang Kebugaran untuk Mengontrol Drone 🤸🏾 🐝 👈🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setahun yang lalu, saya membeli pelacak kebugaran SONY SmartBand SWR10. Seperti kebanyakan pelacak kebugaran lainnya, gadget tidak memainkan peran bes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana Anak Sekolah Hackathon NASA Membalikkan Rekayasa Gelang Kebugaran untuk Mengontrol Drone</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/394095/"><img src="https://habrastorage.org/getpro/geektimes/post_images/86f/4c2/625/86f4c262532981aeea3de11fbcc89bb9.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setahun yang lalu, saya membeli pelacak kebugaran SONY SmartBand SWR10. Seperti kebanyakan pelacak kebugaran lainnya, gadget tidak memainkan peran besar dalam hidup saya, pekerjaan utamanya terletak di atas meja saya. Namun, ini adalah perangkat elektronik yang menarik, dan ketika seorang teman mengundang saya untuk bergabung dengan timnya di hackathon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NASA Space Apps</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , saya memutuskan untuk menggunakan pelacak. Kami memilih bagian Do Not Crash My Drone, di mana kami perlu membuat solusi untuk mengendalikan drone. Diputuskan untuk menggunakan pelacak ini untuk mengendalikan drone.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/641/1f3/df3/6411f3df36e060d9cbe9129335e14f1e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segera setelah hackathon dimulai, saya mulai mencari API gelang saya atau alat untuk pengembang, tetapi tidak ada yang ditemukan. Beberapa pengguna forum mengatakan bahwa SONY memiliki SDK eksklusif, yang diberikan kepada pengembang yang memutuskan untuk bekerja sama dengan perusahaan, tetapi di bawah ketentuan hackathon, hanya solusi open-source yang dapat digunakan. Jadi saya memutuskan sudah waktunya untuk membuat antarmuka kontrol drone saya sendiri. Saya meluncurkan aplikasi pelacak dan menyalakan fungsi “Bluetooth HCI snoop log”. Fitur ini memungkinkan Anda mengendus lalu lintas dan menyimpan dump ke kartu SD. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menemukan log: </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ adb shell echo $ EXTERNAL_STORAGE </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ sdcard </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
~ adb pull /sdcard/btsnoop_hci.log</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
dan membukanya di WireShark:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/249/211/2a8/2492112a8f554b0fa377477d68a86254.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya transfer data dilakukan menggunakan protokol Bluetooth Low Energy, atau, lebih tepatnya, melalui protokol </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GATT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini adalah transfer data dua arah, di mana ponsel bertindak sebagai server, "GATT Server", dan periferal menerima "karakteristik GATT", yang dapat berisi data biner apa pun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memilih UUID pertama (00000208–37cb-11e3–8682–0002a5d5c51b), dan mencarinya di Google. Saya mengharapkan untuk menemukan layanan GATT standar yang biasa, tetapi menemukan sesuatu yang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lebih menarik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memutuskan bahwa kami menemukan repositori Git seseorang yang dibuat oleh orang yang merekayasa balik protokol. Dan ini sebagian benar: proyek mengandung beberapa fungsi kerja, termasuk menghubungkan, merespons gerakan tangan, membaca status baterai, dan menjaga koneksi tetap aktif. Tetapi implementasi accelerometer itu aneh. Saya menambahkan data accelerometer ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MPAndroidChart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan saya mendapatkan ini: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/b4f/fd0/f78/b4ffd0f78e643833a3288e83aefa159d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun informasi pada lereng benar, nilainya tidak ditampilkan. Setelah mempelajari kode fungsi, ternyata angka presisi tunggal 32-bit berisi tiga nilai 10-bit. Ini masuk akal, karena sebagian besar akselerometer bekerja dengan akurasi 10-bit (seperti kebanyakan ADC, konverter analog-ke-digital). Di sini adalah sumber data, perhatikan dua bit pertama:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data acc: 0b00101110 0b10110101 0b10111100 0b10111000 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
acc Data: 0b00111010 0b11110001 0b00011101 0b11101011 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data acc: 0b00111110 0b01110110 0b10100110 0b10011001 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
acc Data: 0b00001011 0b11011101 0b10111101 0b00111001</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tapi parsing data sebagai tiga nilai 10-bit cukup aneh, setiap beberapa derajat kemiringan berubah nilai 511 untuk -512, dan offset tidak berubah (apalagi, tidak ada masalah integer overflow di sini). Jadi saya memutuskan bahwa SONY mungkin menggunakan beberapa jenis metode pengemasan biner eksklusif, atau perusahaan akan menggunakan pengkodean dan kompresi aritmatika.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mencoba Protobuf, MsgPack, Thrift dan beberapa parser, tetapi tidak ada yang berhasil. Saya hanya punya satu hari untuk menghubungkan perangkat saya ke Wi-Fi drone. Sudah putus asa, saya mencoba DEX mendekompilasi aplikasi perusahaan, dan setelah setengah jam ternyata ini: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Kira-kira </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1: iconst_0 512 iconst_1 1023 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2: r1 xor iconst_0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3: istore_0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4: iload_0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5: ifneq 8 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6: r1 xor ikonst_1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7: istore_0 </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if ((data &amp; 0x200)! = 0) { </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 data = - ((data ^ 1023) +1); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
} </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
return (((float) (-data)) * 15.625f) / GRAVITY_FACTOR;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paruh pertama [0, 512] terbalik, dan karena itu situasi yang dijelaskan di atas muncul. </font><font style="vertical-align: inherit;">Saya memperbaikinya menggunakan XOR biasa dan berhasil. </font><font style="vertical-align: inherit;">Saya menambahkan faktor gravitasi, dengan hasil [-1.1] untuk ± 1 g, dan semua yang perlu dilakukan selanjutnya adalah menggunakan data accelerometer untuk mengendalikan drone.</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/kYYg1lKzZnU%3Ffeature%3Doembed&amp;usg=ALkJrhj_70YLOTqRiGn1YmgrbWhU3z7WNg" frameborder="0" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id394095/">https://habr.com/ru/post/id394095/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id394081/index.html">Hyperloop berencana untuk menguji situs pertama hari ini [UPD: pengujian berhasil]</a></li>
<li><a href="../id394083/index.html">Pencitraan termal Arduino UNO</a></li>
<li><a href="../id394087/index.html">Lapisan ramah lingkungan yang dapat dimakan menjaga buah tetap segar tanpa kulkas selama lebih dari seminggu</a></li>
<li><a href="../id394089/index.html">Roskomnadzor secara heroik mencegah bunuh diri anak-anak sekolah yang dibiakkan melalui kelompok-kelompok VKontakte</a></li>
<li><a href="../id394093/index.html">Pemotong laser DIY. Bagian nomor nol. Kekuasaan</a></li>
<li><a href="../id394097/index.html">[BENCI] Nyeri. Format RusMARC</a></li>
<li><a href="../id394101/index.html">Poll: bahasa apa yang digunakan di OS Anda</a></li>
<li><a href="../id394103/index.html">Angin dan es di Mars</a></li>
<li><a href="../id394105/index.html">Usap Bluetooth cerdas memberi tahu Anda kapan waktunya untuk berubah</a></li>
<li><a href="../id394107/index.html">Shadowplay LED Watch di Arduino Uno Platform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>