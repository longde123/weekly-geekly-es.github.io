<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎🏼 👴🏻 🕺 HATEOAS Deep Link Problem 📚 👨🏼‍🎨 🐾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Externe Verknüpfung (Deep Linking) - Im Internet ist dies die Platzierung eines Hyperlinks auf einer Website, der auf eine Seite auf einer anderen Web...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HATEOAS Deep Link Problem</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445092/"><blockquote>  Externe Verknüpfung (Deep Linking) - Im Internet ist dies die Platzierung eines Hyperlinks auf einer Website, der auf eine Seite auf einer anderen Website verweist, anstatt auf die Startseite (Startseite, Startseite) dieser Website.  Solche Links werden als externe Links (Deep Links) bezeichnet. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wikipedia</a> </blockquote>  Der Begriff <b>"Deep Links"</b> wird weiter verwendet, um der englischen Sprache "Deep Links" am nächsten zu kommen.  Dieser Artikel konzentriert sich auf die REST-API, sodass Deep Links Links zu HTTP-Ressourcen bedeuten.  Beispielsweise verweist der Deep Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/de/post/426691</a> auf einen bestimmten Artikel auf habr.com. <br><br>  <b>HATEOAS</b> ist eine Komponente der REST-Architektur, mit der API-Clients Informationen über Hypermedia bereitgestellt werden können.  Der Client kennt die einzige feste Adresse, den API-Einstiegspunkt.  Er lernt alle möglichen Aktionen aus den vom Server empfangenen Ressourcen.  Ressourcenansichten enthalten Links zu Aktionen oder anderen Ressourcen.  Der Client interagiert mit der API und wählt dynamisch eine Aktion aus den verfügbaren Links aus.  Sie können mehr über HATEOAS auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wikipedia</a> oder in diesem wunderbaren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> über Habré lesen. <br><br>  HATEOAS ist die nächste Stufe der REST-API.  Dank der Verwendung von Hypermedia beantwortet er viele Fragen, die während der Entwicklung der API auftreten: Wie kann der Zugriff auf Aktionen auf der Serverseite gesteuert werden, wie kann die enge Konnektivität zwischen Client und Server beseitigt werden, und wie können die Adressen von Ressourcen bei Bedarf geändert werden.  Es gibt jedoch keine Antwort auf die Frage, wie tief die Verknüpfung mit Ressourcen aussehen sollte. <br><a name="habracut"></a><br>  In der "klassischen" REST-Implementierung kennt der Client die Struktur der Adressen und weiß, wie eine Ressource anhand einer Kennung in der REST-API abgerufen wird.  Ein Benutzer folgt beispielsweise einem Deep Link zu einer Buchseite in einem Online-Shop.  Die URL-Leiste <code>https://domain.test/books/1</code> in der Adressleiste des Browsers angezeigt.  Der Client weiß, dass "1" die Kennung der <code>https://api.domain.test/api/books/{id}</code> . Um diese zu erhalten, müssen Sie diese Kennung in der REST-API-URL <code>https://api.domain.test/api/books/{id}</code> .  Daher sieht der tiefe Link zur Ressource dieses Buches in der REST-API folgendermaßen aus: <code>https://api.domain.test/api/books/1</code> . <br><br>  In HATEOAS kennt der Client keine Ressourcenkennungen oder Adressstrukturen.  Er codiert nicht fest, sondern "entdeckt" Links.  Darüber hinaus kann sich die Struktur von URLs ohne Wissen des Kunden ändern, was HATEOAS zulässt.  Aufgrund dieser Unterschiede können Deep Links nicht auf die gleiche Weise wie die klassische REST-API implementiert werden.  Überraschenderweise ergab eine Suche im Internet nach Rezepten für die Implementierung solcher Links in HATEOAS nicht viele Ergebnisse, sondern nur einige verwirrende Fragen zu Stackoverflow.  Daher werden wir verschiedene mögliche Optionen in Betracht ziehen und versuchen, die beste auszuwählen. <br><br>  Die Null-Option außerhalb des Wettbewerbs besteht nicht darin, Deep Links zu implementieren.  Dies ist möglicherweise für einige Administratoren oder mobile Anwendungen geeignet, für die kein direkter Wechsel zu internen Ressourcen erforderlich ist.  Dies ist ganz im Sinne von HATEOAS. Der Benutzer kann Seiten ab dem Einstiegspunkt nur nacheinander öffnen, da der Client nicht weiß, wie er direkt zur internen Ressource wechseln soll.  Diese Option ist jedoch nicht für Webanwendungen geeignet. Wir gehen davon aus, dass der Link zur internen Seite mit einem Lesezeichen versehen werden kann und die Aktualisierung der Seite uns nicht zur Hauptseite der Website zurückführt. <br><br>  Also die erste Option: der HATEOAS API URL Hardcode.  Der Client kennt die Struktur der Ressourcenadressen, für die Deep Links benötigt werden, und weiß, wie die Ressourcenkennung für die Suche abgerufen wird.  Beispielsweise gibt der Server die Adresse <code>https://api.domain.test/api/books/1</code> als Referenz auf die <code>https://api.domain.test/api/books/1</code> .  Der Kunde weiß, dass „1“ die Kennung des Buches ist und kann diese URL selbst generieren, wenn er auf den Deep Link klickt.  Dies ist sicherlich eine funktionierende Option, verstößt jedoch gegen die Grundsätze von HATEOAS.  Die Adressstruktur und die Ressourcen-ID können nicht mehr geändert werden, da sonst der Client unterbrochen wird und eine starre Verbindung besteht.  Dies ist kein HATEOAS, was bedeutet, dass die Option nicht zu uns passt. <br><br>  Die zweite Option besteht darin, die REST-API-URL durch die Client-URL zu ersetzen.  In einem Beispiel mit einem Buch sieht der Deep Link folgendermaßen aus: <code>https://domain.test/books?url=https://api.domain.test/api/books/1</code> .  Hier nimmt der Client den vom Server empfangenen Ressourcenlink und ersetzt ihn vollständig durch die Seitenadresse.  Dies ähnelt eher HATEOAS. Der Kunde kennt keine Kennungen und Adressstrukturen. Er erhält einen Link und verwendet ihn unverändert.  Wenn Sie auf einen solchen detaillierten Link klicken, erhält der Client die gewünschte Ressource über den REST-API-Link vom URL-Parameter.  Es scheint, dass die Lösung funktioniert und ganz im Sinne von HATEOAS.  Wenn Sie jedoch einen solchen Link zu Ihren Lesezeichen hinzufügen, können wir die Adresse der Ressource in der API in Zukunft nicht mehr ändern (oder wir müssen immer zu einer neuen Adresse umleiten).  Auch hier geht einer der Vorteile von HATEOAS verloren, auch diese Option ist nicht ideal. <br><br>  Daher möchten wir Permalinks haben, die sich jedoch ändern können.  Eine solche Lösung existiert und wird im Internet häufig verwendet. Viele Websites bieten kurze Links zu internen Seiten, die gemeinsam genutzt werden können.  Neben der Kürze besteht ihr Vorteil darin, dass die Website die tatsächliche Adresse der Seite ändern kann, diese Links jedoch nicht beschädigt werden.  Beispielsweise verwendet Microsoft Windows-Links, um Seiten des Formulars <code>http://go.microsoft.com/fwlink/?LinkId=XXX</code> .  Im Laufe der Jahre wurden Microsoft-Websites mehrmals neu gestaltet, aber Links in älteren Windows-Versionen funktionieren weiterhin. <br><br>  Es bleibt nur, diese Lösung an HATEOAS anzupassen.  Dies ist die dritte Option - die Verwendung eindeutiger Deep Link-IDs in der REST-API.  Jetzt sieht die Adresse der Buchseite folgendermaßen aus: <code>https://domain.test/books?deepLinkId=3f0fd552-e564-42ed-86b6-a8e3055e2763</code> .  Wenn der Client auf einen solchen <code>deepLinkId</code> Link klickt, sollte er den Server fragen: <code>deepLinkId</code> Ressourcenlink entspricht einem solchen <code>deepLinkId</code> Bezeichner?  Der Server gibt den Link <code>https://api.domain.test/api/books/1</code> (also oder sofort eine Ressource, um nicht zweimal zu gehen).  Wenn sich die Ressourcenadresse in der REST-API ändert, gibt der Server einfach einen anderen Link zurück.  In der Datenbank wird ein Datensatz gespeichert, dessen Referenzkennung 3f0fd552-e564-42ed-86b6-a8e3055e2763 der Entitätskennung von Buch 1 entspricht. <br><br>  Zu diesem <code>deepLinkId</code> müssen Ressourcen ein <code>deepLinkId</code> Feld mit den Bezeichnern ihrer Deep Links enthalten, und der Client muss sie in der Adresse der Seite ersetzen.  Diese Adresse kann sicher mit einem Lesezeichen versehen und an Freunde gesendet werden.  Es ist nicht sehr gut, dass der Client unabhängig mit bestimmten Bezeichnern arbeitet, aber dies ermöglicht es Ihnen, die Vorteile von HATEOAS für die API als Ganzes beizubehalten. <br><br><h1>  Beispiel </h1><br>  Dieser Artikel wäre ohne eine Beispielimplementierung nicht vollständig.  Betrachten Sie zum Testen des Konzepts ein Beispiel für eine hypothetische Online-Shop-Katalogseite mit einem Backend für Spring Boot / Kotlin und einem SPA-Frontend für Vue / JavaScript.  Das Geschäft verkauft Bücher und Bleistifte. Die Website verfügt über zwei Bereiche, in denen Sie die Liste der Produkte anzeigen und deren Seiten öffnen können. <br><br>  Abschnitt "Bücher": <br><br><img src="https://habrastorage.org/webt/ly/nz/v6/lynzv689wey61onndh2dazh9_og.png"><br><br>  Eine Buchseite: <br><br><img src="https://habrastorage.org/webt/th/vh/we/thvhwevb1jq9zrbpht5acjbxg_u.png"><br><br>  Für die Lagerung von Waren werden Spring Data JPA-Entitäten definiert: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityType</span></span></span><span class="hljs-class"> </span></span>{ PEN, BOOK } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pen</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.PEN, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.BOOK, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeepLink</span></span></span></span>( <span class="hljs-meta"><span class="hljs-meta">@Enumerated(EnumType.STRING)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityType: EntityType, <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityId: UUID ) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() }</code> </pre><br>  Zum Erstellen und Speichern von Deep Link- <code>DeepLink</code> wird die <code>DeepLink</code> Entität <code>DeepLink</code> , von der mit jedem <code>DeepLink</code> eine Instanz erstellt wird.  Der Bezeichner selbst wird zum Zeitpunkt der Erstellung der Entität gemäß dem UUID-Standard generiert.  Die Tabelle enthält die Kennung der Deep Link, die Kennung und den Typ der Entität, zu der die Verbindung führt. <br><br>  Die REST-API des Servers ist nach dem HATEOAS-Konzept organisiert. Der API-Einstiegspunkt enthält Links zu Produktsammlungen sowie einen <code>#deepLink</code> Link zum Bilden von Deep Links durch Ersetzen eines Bezeichners: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api { <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"pens"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/pens"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"books"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"deepLink"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/links/{id}"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"templated"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } }</code> </pre><br>  Der Client fordert beim Öffnen des Abschnitts "Bücher" eine Sammlung von Ressourcen unter dem Link <code>#books</code> am Einstiegspunkt an: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api/books ... { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Harry Potter"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"4bda3c65-e5f7-4e9b-a8ec-42d16488276f"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/1272e287-07a5-4ebc-9170-2588b9cf4e20"</span></span> } } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cryptonomicon"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"a23d92c2-0b7f-48d5-88bc-18f45df02345"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/5d04a6d0-5bbc-463e-a951-a9ff8405cc70"</span></span> } } } ...</code> </pre><br>  SPA verwendet Vue Router, für den der Pfad zur Buchseite definiert ist <code>{ path: '/books/:deepLinkId', name: 'book', component: Book, props: true }</code> , und die Links in der <code>&lt;router-link :to="{name: 'book', params: {link: book._links.self.href, deepLinkId: book.deepLinkId}}"&gt;{{ book.name }}&lt;/router-link&gt;</code> sehen folgendermaßen aus: <code>&lt;router-link :to="{name: 'book', params: {link: book._links.self.href, deepLinkId: book.deepLinkId}}"&gt;{{ book.name }}&lt;/router-link&gt;</code> . <br><br>  Das heißt, wenn Sie die Seite eines bestimmten Buches öffnen, wird die <code>#self</code> aufgerufen, die zwei Parameter empfängt: <code>link</code> (Link zur <code>#self</code> in der REST-API, Wert des <code>href</code> Felds des <code>#self</code> ) und <code>deepLinkId</code> von der Ressource). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Book = { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">`&lt;div&gt;{{ 'Book: ' + book.name }}&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">deepLinkId</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">book</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } }, mounted() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-string"><span class="hljs-string">'/api/links/'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.deepLinkId : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link; fetch(url).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json().then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.book = json }) }) } }</code> </pre><br>  Vue Router setzt den Wert von <code>deepLinkId</code> auf die Adresse der Seite <code>/books/:deepLinkId</code> , und die Komponente fordert die Ressource per direkter Verknüpfung von der <code>link</code> .  Wenn Sie eine <code>deepLinkId</code> , legt Vue Router die Komponenteneigenschaft <code>deepLinkId</code> und <code>deepLinkId</code> sie von der <code>deepLinkId</code> ab.  Die <code>link</code> Eigenschaft bleibt <code>null</code> .  Die Komponente prüft: Wenn aus der Sammlung ein direkter Link stammt, wird die Ressource darauf angefordert.  Wenn nur die Kennung <code>deepLinkId</code> , wird sie vom Einstiegspunkt aus in den Link <code>#deepLink</code> , um die Ressource über den Deep Link zu erhalten. <br><br>  Im Backend sieht die Controller-Methode für Deep Links folgendermaßen aus: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/links/{id}"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deepLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@PathVariable</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">UUID</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, response: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HttpServletResponse</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: ResponseEntity&lt;Any&gt; { id!!; response!! <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink = deepLinkRepo.getOne(id) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> path: String = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (deepLink.entityType) { EntityType.PEN -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getPen</span></span></span></span>(deepLink.entityId)) EntityType.BOOK -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getBook</span></span></span></span>(deepLink.entityId)) }.toUri().path response.sendRedirect(path) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ResponseEntity.notFound().build() }</code> </pre><br>  Durch Kennung ist die Essenz der tiefen Verbindung.  Abhängig vom Typ der Anwendungsentität wird eine Verknüpfung zur Controller-Methode hergestellt, die ihre Ressource über <code>entityId</code> .  Die Anfrage wird an diese Adresse umgeleitet.  Wenn sich also in Zukunft die Verknüpfung zum Entity-Controller ändert, kann die Logik der Verknüpfungsbildung in der <code>deepLink</code> Methode einfach <code>deepLink</code> werden. <br><br>  Der vollständige Quellcode für das Beispiel ist auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a> verfügbar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445092/">https://habr.com/ru/post/de445092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445082/index.html">Letzten Monat haben wir Zuckerberg einen Busen genannt; korrigiert: Tatsächlich sind er und sein Facebook nur eine verdammte Schande</a></li>
<li><a href="../de445084/index.html">Wer ist wer auf dem Smart Homes-Markt?</a></li>
<li><a href="../de445086/index.html">Mondmission "Bereshit" - das erste Video von der Bordkamera und neue Fotos im Weltraum</a></li>
<li><a href="../de445088/index.html">Waren Abenteuer in Ihrem Leben interessanter als in Computerspielen?</a></li>
<li><a href="../de445090/index.html">Wird YouTube so bleiben, wie wir es kennen?</a></li>
<li><a href="../de445094/index.html">Zentraler Zugriff auf digitale Signaturen und andere Schlüssel des elektronischen Schutzes über Hardware USB over IP</a></li>
<li><a href="../de445098/index.html">DynamicData: Ändern von Sammlungen, MVVM-Entwurfsmustern und reaktiven Erweiterungen</a></li>
<li><a href="../de445100/index.html">Anycubic: Photon S, 4Max Pro und große Umbenennung</a></li>
<li><a href="../de445102/index.html">Flash-Animation in Unity3D von Grund auf neu. Teil eins, lyrisch</a></li>
<li><a href="../de445104/index.html">Eine kurze Geschichte der Audiomarke Klipsch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>