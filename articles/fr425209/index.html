<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😶 🚮 🧜🏿 Sunrise Manually # 2: Hardcore pour IDE, Cmake et ma déception chez les animaux ✌🏼 👨‍🔧 🖕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article précédent, j'ai eu l'audace d'utiliser CLion comme IDE. Et puis un homme est venu en courant avec une question: oh, un métier rémunéré...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sunrise Manually # 2: Hardcore pour IDE, Cmake et ma déception chez les animaux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425209/"><p> Dans un article précédent, j'ai eu l'audace d'utiliser CLion comme IDE.  Et puis un homme est venu en courant avec une question: oh, un métier rémunéré propriétaire, vendu, ricané, etc.  En toute justice, il n'y avait qu'un seul commentaire de ce genre sur Habré, mais en réalité, il y en a des milliers.  Par exemple, le dernier compte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LOR</a> actif, je suis inscrit depuis 2010, et dans presque toutes les discussions impliquant des logiciels propriétaires, cet enfer commence.  Il est clair que je ne prouverai rien à personne, mais cela peut aider les rares vagabonds à passer. </p><br><p>  L'article est conditionnellement divisé en deux parties: socialement motivationnel et technique (comment construire CMake sur Windows sous divers IDE). </p><br><p><img src="https://habrastorage.org/webt/9g/45/pb/9g45pbrivllf4bxi6-yxx3ejxno.png"><br></p><a name="habracut"></a><br><h1 id="otkuda-vsyo-poshlo">  Où est-ce que tout est allé </h1><br><p>  Ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commentaire de l'article précédent était la</a> base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de l'article</a> : «Si le podcast est destiné aux débutants et aux non-professionnels, alors pourquoi n'avez-vous pas pris en compte la licence IDE :(» et ci-après. </p><br><p>  L'article est basé sur les résultats d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flux Twitch</a> et vos commentaires à ce sujet.  L'enregistrement est sur YouTube.  Cet article n'est pas une transcription d'un podcast, mais un produit de sa compréhension. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/y8U8iTrV9PU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h1 id="ishodnyy-posyl">  Message source </h1><br><p>  Tout d'abord, vérifions la validité de l'hypothèse d'origine: le logiciel coûte cher.  Si vous allez sur le site, il s'avère que CLion coûte 8,90 dollars par mois.  580 roubles.  Il est clair que pour une personne qui ne fait pas de programmation pour gagner sa vie - cela peut parfois montrer un montant décent qui peut être dépensé pour quelque chose de plus utile.  Achetez un repas, par exemple. </p><br><p>  Pour un professionnel, tout est complètement différent, mais laissons ce sujet.  Un journaliste se distingue d'un employé du département marketing d'une entreprise de fabrication de logiciels ou de jeux en ce qu'il ne fait pas la promotion de la politique du Parti, ne prend aucune mesure pour promouvoir le produit.  Il parle tel quel.  Comment tout cela est-il vraiment, comment un journaliste voit-il vraiment une question?  La même chose s'applique aux vrais évangélistes. </p><br><blockquote>  L'essence des phénomènes, et la chaîne d'années, <br>  Visages d'amis et masques d'ennemis, <br>  Clairement visible et ne peut pas se cacher <br>  Aux yeux du poète - le propriétaire des siècles. <br><br>  La lumière des étoiles lointaines et le début de l'aube <br>  Les secrets de la vie et les secrets de l'amour <br>  Dans un moment d'inspiration, réchauffé par le soleil - <br>  Tout se reflète dans l'âme du poète - <br>  Dans le miroir du monde ... <br><br>  (c) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Konstantin Nikolsky, Miroir du monde</a> <br></blockquote><p>  S'il est vraiment intéressant de voir comment CLion augmente vos revenus, vous trouverez quelqu'un à contacter, et ici nous parlons d'autre chose. </p><br><h1 id="tipologiya">  Typologie </h1><br><p>  Envisagez plutôt des groupes de personnes qui sont bombardées autant que possible à partir d'un logiciel fermé. </p><br><p>  Comme vous l'avez déjà compris, je ne suis pas un nifiga sociologue, et je n'ai que la typologie qui s'est développée dans le feu de l'action des confrontations du forum.  Il a seulement l'avantage qu'il est possible d'attribuer une personne à un certain groupe pratiquement sans inclure le cerveau en regardant les deux premiers commentaires. </p><br><p>  Donc, les gens sont: </p><br><ul><li>  Les combattants de la liberté et l'open source </li><li>  Honnêtement trompé </li><li>  Les animaux </li></ul><br><p>  Je suggère de ne pas considérer l’inexactitude de l’auteur.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Je suis une autre affaire</a> . </p><br><h1 id="borcy-za-svobodu-i-opensorc">  Les combattants de la liberté et l'open source </h1><br><p>  Les plus purs et les plus brillants sont les combattants de l'ouvreur.  Je suis moi-même de ceux qui, après avoir entendu le mot "Linux", corrige constamment <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"non pas Linux, mais GNU / Linux"</a> .  Le problème est que le monde réel n'est jamais noir et blanc.  Nous avons une certaine liberté, et c'est une ressource qui peut être utilisée si nécessaire.  Comme un membre de la direction de Mozilla a plaisanté (ou non), "pourquoi avons-nous besoin d'un crédit de confiance si nous ne le dépensons pas?". </p><br><p>  Exemple: il y avait une telle personne, Miguel de Icaza.  Il a créé Gnome et a contribué à la construction d'un GNU / Linux désopilant comme nous le connaissons.  Et puis il a été expulsé de la communauté, et Stallman l'a traité de «traître à la liberté»: </p><br><blockquote>  «Miguel de Icaza est essentiellement un traître à la communauté du logiciel libre.  &lt;...&gt; Le projet vise à organiser le fonctionnement de programmes soi-disant «open source» sur la plate-forme Windows;  ainsi, le temps inestimable des développeurs est consacré aux plates-formes gratuites » <br></blockquote><p>  Et où est Miguel maintenant?  Lui et son équipe travaillent côte à côte avec l'un des plus grands projets de ces dernières années: porter .NET sur GNU / Linux sous des licences permissives.  Il a vraiment passé son temps. </p><br><p>  Sur le flux, j'ai tué au moins vingt minutes pour trébucher CMake sous Visual Studio Code.  Ça n'a pas marché.  Et dans Visual Studio gratuit, mais pas gratuit, cela s'est avéré la première fois.  C'est exactement ce que nous obtenons si souvent en essayant d'utiliser des logiciels libres: dans l'open source, pour des raisons évidentes, nous n'avons pas le temps de réfléchir à des scripts de bout en bout et de prendre soin de l'ensemble du produit.  Merci aux développeurs d'avoir fait au moins quelque chose.  Mais pour nous, en tant qu'utilisateurs, nous avons toujours un choix moral et éthique: soit choisir la liberté et passer beaucoup de temps à donner un coup de pied au logiciel libre, soit, au contraire, passer notre liberté à acheter du temps, qui peut ensuite être consacré à de bonnes actions. </p><br><p>  Étant donné que ce problème dépasse le cadre des problèmes techniques, nous terminerons ici.  Une personne vraiment idéologique est fidèle à son idée. </p><br><h1 id="zhivotnye">  Les animaux </h1><br><p>  Oh, mais cette catégorie me bombarde. </p><br><blockquote>  "Les caractéristiques spécifiques d'une personne qui la distinguent des autres animaux sont la posture droite, un cerveau très développé, la pensée et la parole articulée. Une personne étudie et change elle-même et le monde qui l'entoure, crée une culture et sa propre histoire."  (c) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipédia</a> . </blockquote><p>  Malheureusement, dans une conversation sur l'IDE, il s'avère souvent que l'interlocuteur n'est pas capable de penser de manière indépendante, au lieu de parler clairement, il marmonne "et j'ai déjà des normes" et mange ce qu'elles donnent.  En raison de la position verticale, il est facile de le confondre avec une personne, mais ne vous y trompez pas. </p><br><p>  Ces créatures montent tout pour n'importe qui.  Dans les jeux, ils vendent des lootboxes et des DLC avec une musique nostalgique.  Dans les éditeurs, ils sont placés sur diverses choses occupées analement, dans le but de relier le patient à un environnement, un écosystème spécifique, et à tel point qu'aucun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">phénazépam</a> n'est nécessaire.  Ils mangeront tout.  <em>"Et les normes aussi pour moi."</em> </p><br><p>  Il est important d'ajouter que non seulement les spécialistes du marketing conduisent sur leurs oreilles, mais aussi que les trolls ou les schémas cliniques naturels.  Il y a beaucoup de schizos, vous n'en croirez pas combien. </p><br><p>  Par exemple, rappelez-vous le manifeste que Nikitonsky a récemment publié (plus précisément, sa traduction dans Habr): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ma déception pour le logiciel</a> ?  Comment je me fais bombarder de lui.  J'espère sincèrement que Nikitonsky a écrit tout cela pour toucher sciemment, et pas vraiment. </p><br><p>  Regardez quelles thèses sont là: </p><br><ul><li>  Tout est insupportablement lent - un téléphone moderne est plus puissant que les ordinateurs qui envoient des gens sur la lune; </li><li>  Tout est ÉNORME - Android pèse 6 gigaoctets; </li><li>  Tout pourrit - les vieux appareils ne fonctionnent pas ou fonctionnent mal; </li><li>  Dans la programmation du chaos, regardez les graphiques de dépendance dans npm et left-pad. </li></ul><br><p>  La pêche à la traîne est une pêche à la traîne, mais il peut ne pas être familier à quelqu'un que la taille du code source est «ce qui a amené la personne sur la lune», c'est-à-dire Apollo 11, de sorte que l'auteur voudrait à peine les lire. </p><br><p><img src="https://habrastorage.org/webt/rc/uc/fb/rcucfbhz3eka-xvpqmer_ofdnow.jpeg"><br></p><br><p>  Que les OS modernes définissent n'importe quel équipement et ont tout pour chaque occasion.  Que le ralentissement des appareils a conduit à une situation merveilleuse lorsque les capitalistes de Merissa se sont baissés et ont développé le fer à un niveau moderne, grâce auquel nous avons dans notre poche un méga-appareil pour toutes les occasions.  Même les serviettes ne sont pas nécessaires, c'est sur Google Play.  Le npm mentionné permet à une personne ordinaire d'écrire des choses d'une complexité inimaginable qui prendraient des années auparavant. </p><br><p>  Et puis à tous ces camarades qui "mangent ce qu'ils donnent", soudain, des méga idées de la liste ci-dessus commencent à me monter dans la tête.  Etendons à l'IDE: </p><br><ul><li>  Pour les applications sur Electron (Visual Studio Code, Atom), les lettres apparaissent trop lentement à l'écran, que ce soit vim ou emacs; </li><li>  Eclipse IDE ralentit; </li><li>  En général, Java ralentit - avec tout ce qui y est écrit, y compris NetBeans, IDEA et Clion; </li><li>  Tout IDE ralentit manger pour cent comme ça; </li><li>  La propriété est mauvaise; </li><li>  La liste continue. </li></ul><br><p>  Cette liste est déjà suffisante pour réviser le toit.  Ne croyez pas les ordures.  Si vim est meilleur qu'Eclipse (ou vice versa) dans certains cas, ce n'est certainement pas parce que les voisins irradient les vimers avec un micro-ondes et que les extraterrestres enlèvent des éclipseurs la nuit. </p><br><p>  Malheureusement, à la suite de longues guerres de guerres en réseau, il a été établi avec précision: il ne peut y avoir de dialogue.  À l'homme - humain et à l'animal - animal.  C'est ainsi que la vie est organisée.  La probabilité que quelqu'un lise cet article et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">change d'avis</a> est extrêmement faible, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">immolée et améliorée</a> . </p><br><h1 id="chestno-zabluzhdayuschiesya">  Honnêtement trompé </h1><br><p>  Maintenant, nous en avons fini avec les extrêmes: particulièrement intelligents de la secte Stallman d'un côté du spectre, et pas d'animaux très intelligents de l'autre, parlons des gens ordinaires. </p><br><p>  La première idée fausse est que nous sommes en quelque sorte cloués sur l'IDE.  Cela remonte à l'époque où les gens utilisaient une sorte de Delphi 7 et des versions anciennes de Microsoft Visual Studio.  Ils disent que dans la nouvelle Vizhualka, tout allait bien avec les fichiers du projet.  Bonjour, c'est maintenant l'année 2018, il n'y a plus d'esclavage. </p><br><p>  Pour se débarrasser de l'esclavage, nous avons reçu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CMake</a> d'en haut: un outil utilitaire open source multiplateforme qui vous permet de créer, tester et empaqueter des applications. </p><br><p> Cela ne dit toujours rien au débutant et ses bras atteignent l'IDE.  Tout cela par peur et incompréhension de ce qui se passe.  Je viens moi-même de Java, et je sais donc bien comment les yeux d'une personne qui a vu <code>pom.xml</code> pour la première fois se dilater pour la première fois. </p><br><p>  Voyons en quoi consiste le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet créé la dernière fois</a> et comment le construire dans toutes sortes d'IDE différents. </p><br><p>  Composition du fichier: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CMakeLists.txt</a> </li><li>  <a href="">main.cpp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">shaders.shader</a> </li></ul><br><p>  Le shader est compilé directement en runtime, <a href="">avec la fonction D3DCompile</a> .  Le D3DCompiler du SDK DirectX (qui est maintenant le SDK Windows) fonctionne.  Aucun IDE n'est nécessaire pour le construire. </p><br><p>  <code>main.cpp</code> est le seul fichier à construire.  Et il est collecté à l'aide d'informations qui se <code>CMakeLists.txt</code> entièrement dans <code>CMakeLists.txt</code> . </p><br><p>  Dans le sens inverse: il y a <code>CMakeLists.txt</code> , qui nous dit exactement ce que nous allons compiler.  L'assembly <code>main.cpp</code> enregistré.  Cela suffit pour compiler le projet.  Après la compilation, un fichier exe est obtenu qui, après le lancement, recueille le shader et l'affiche à l'écran.  Tout est extrêmement simple, l'IDE n'est pas impliqué dans cette chaîne et peut être n'importe quoi. </p><br><p>  IDE est facultatif.  Généralement.  Qu'est-ce qui est incompréhensible ici? </p><br><h1 id="sborka">  Assemblage </h1><br><h2 id="podgotovitelnye-momenty">  Moments préparatoires </h2><br><p>  Comme toujours, la préparation occupe la majeure partie du processus.  Il y a quelques choses qui doivent être clarifiées. </p><br><p>  On suppose que tout se fait sur la base de Msys2, que nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">installé la dernière fois</a> .  Si ce n'est pas le cas, vous devrez vous démêler :) </p><br><h3 id="kak-ustanovit-cmake-i-ninja">  Comment installer CMake et Ninja </h3><br><p>  Pour pouvoir collecter quelque chose, vous devez installer CMake, si vous ne l'avez pas déjà fait. </p><br><ul><li>  Téléchargez depuis le site: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://cmake.org/download</a> .  J'ai cmake-3.12.2-win64-x64; </li><li>  Décompressez et ajoutez le chemin à l'endroit où se trouve cmake.exe dans la variable d'environnement Windows PATH; </li><li>  Téléchargez sur le site le générateur ninja de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la dernière version</a> ; </li><li>  Déballez et placez quelque part dans le CHEMIN. </li></ul><br><h3 id="kak-redaktirovat-path-chtoby-ne-poehat-kukuhoy">  Comment éditer PATH pour ne pas voyager comme un coucou </h3><br><p>  La première façon est connue de tous: win + pause -&gt; Paramètres système avancés -&gt; Avancé -&gt; Variables d'environnement.  Malheureusement, même dans Windows 10, dans lequel l'éditeur de variable PATH a été ajouté, ce n'est toujours pas très pratique. </p><br><p>  Si vous jouez souvent avec PATH, l'utilisation de la fenêtre d'édition standard est très ennuyeuse.  Je vous conseille d'utiliser l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">éditeur d'environnement rapide</a> - il est gratuit et économise considérablement les nerfs. </p><br><h3 id="kak-podklyuchat-dll-iz-mingw-v-rezhime-razrabotki">  Comment connecter une DLL à partir de MinGW en mode développement </h3><br><p>  Pour démarrer l'application, vous avez besoin de fichiers dll d'au moins <code>mingw64\bin</code> . </p><br><p>  Malheureusement, je n'ai pas trouvé de solution vraiment pratique pour lancer des bibliothèques de MinGW vers PATH.  Si un sage peut le dire dans les commentaires, je vous en serai très reconnaissant. </p><br><p>  Maintenant, le moyen le plus simple consiste à attacher le répertoire bin MinGW directement à la première place dans PATH.  (Dans le cas de Visual Studio, vous pouvez simplement déposer des bibliothèques dans le répertoire d'assembly.) Malheureusement, cette méthode a un énorme inconvénient: certains logiciels de Windows commencent à tomber immédiatement après la modification de PATH.  Par exemple, Overwatch a cessé de fonctionner pour moi, et c'est une chose complètement fatale. </p><br><p>  Si vous, comme moi, vivez dans un ordinateur et que vous ne l'allumez pas uniquement pendant les heures de bureau, le schéma suivant est proposé: ajoutez MinGW à PATH avant de programmer, puis supprimez-le.  Pour faciliter le processus, vous devez créer deux fichiers batch qui peuvent être lancés en double-cliquant: </p><br><p>  before.bat: </p><br><pre> <code class="hljs tex">setx path "Z:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">msys</span></span></span></span>64<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mingw</span></span></span></span>64<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bin</span></span></span></span>;<span class="hljs-comment"><span class="hljs-comment">%path%"</span></span></code> </pre> <br><p>  after.bat: </p><br><pre> <code class="hljs pgsql">setx <span class="hljs-type"><span class="hljs-type">PATH</span></span> "%PATH:Z:\msys64\mingw64\bin;=%"</code> </pre><br><h3 id="kak-podklyuchat-dll-v-rezhime-testovogo-reliza">  Comment connecter une DLL en mode de version de test </h3><br><p>  Il est clair que la méthode précédente ne fonctionne que lorsque <code>mingw64\bin</code> est dans PATH, c'est-à-dire uniquement sur l'ordinateur du développeur.  Et même là, vous ne voulez pas toujours mutiler PATH.  Si cela commence une personne ordinaire (ou nous-mêmes après after.bat), alors quelque chose comme: </p><br><img width="400" src="https://habrastorage.org/webt/d2/ka/-b/d2ka-bup2zcih2chipoohkcj6u8.png"><br><p><img width="400" src="https://habrastorage.org/webt/tf/ia/zh/tfiazhyj4f-f_-omq2tojpkykmk.png"><br></p><br><p>  Le moyen le plus simple de résoudre ce problème consiste à placer la DLL nécessaire à côté du fichier exécutable.  Mais pour cela, vous devez savoir quelles DLL sont utilisées! </p><br><p>  Nous avons déjà quelques utilitaires conçus par Microsoft pour cela. </p><br><ul><li>  Une liste complète d'une application en cours d'exécution peut être consultée à l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">aide de ListDLL</a> , mais elle ne montre pas ce qui n'est pas encore chargé. </li><li>  Si vous faites Outils -&gt; Invite de commandes Visual Studio, <code>dumpbin /dependents "Z:\game\build\Mingw64-Debug\src.exe"</code> , alors il n'affichera que la DLL de premier niveau.  En d'autres termes, si vous ne terminez que ce que la décharge vous dit, après le lancement, il y aura toujours des erreurs - elles concerneront simplement d'autres DLL. </li></ul><br><p>  Pour parcourir les dépendances en profondeur, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il existe un tel script</a> qui peut être exécuté directement à partir de la ligne de commande (msys2, cygwin, etc. - assez pour avoir python2 / 3 et objdump installés à l'intérieur). </p><br><ul><li>  Téléchargez le script mingw-bundledlls, </li><li>  Mettez à côté du fichier, </li><li>  Dans un éditeur de texte, dans la <code>blacklist = [</code> tableau <code>blacklist = [</code> ajoutez nos pièces DirectX: <code>d3d10.dll, d3d11.dll, d3dcompiler_43.dll</code> , </li><li>  <code>chmod 755 ./mingw-bundledlls</code> , </li><li>  Pour voir les <code>./mingw-bundledlls ./src.exe</code> utilisées: <code>./mingw-bundledlls ./src.exe</code> (enfin, tout exécutable qui vous intéresse plus), </li><li>  Pour copier automatiquement et mettre ensuite: <code>./mingw-bundledlls --copy ./src.exe</code> </li><li>  PROFIT: l'exécutable est lancé comme ça, en double-cliquant sur le fichier exe, et depuis Visual Studio. </li></ul><br><p>  Il existe encore différentes façons délicates de contracter CMake pour copier la DLL elle-même, mais si vous commencez à vous plonger dans des problèmes de distribution, vous ne pourrez jamais terminer cet article. </p><br><h1 id="sborka-vruchnuyu">  Assemblage manuel </h1><br><ul><li>  before.bat </li><li>  Démarrer -&gt; Exécuter -&gt; cmd.exe </li><li> <code>cd /dz://game/src</code> </li> <li> <code>cmake -G "Ninja" -D EXECUTABLE_OUTPUT_PATH="bin" -D CMAKE_CXX_COMPILER="Z:/msys64/mingw64/bin/g++.exe" -D CMAKE_C_COMPILER="Z:/msys64/mingw64/bin/gcc.exe" .</code> </li> <li>  ninja </li><li>  Exécutez immédiatement le fichier généré dans bin ou attachez la dll selon les instructions ci-dessus et exécutez after.bat </li></ul><br><p>  Nous avons prouvé que nous ne sommes pas du tout liés à l'IDE. </p><br><h1 id="sborka-v-visual-studio">  Construire dans Visual Studio </h1><br><p>  Mais quand même, développer sans IDE n'est pas la chose.  La dernière fois, nous avons déjà créé une application de test à l'aide de CLion.  Mais c'est la propriété payante et zashkvar, non?  Oubliez ça.  Maintenant seulement gratuit. </p><br><p>  Dans Visual Studio, la séquence d'actions nécessaires est super simple. </p><br><ul><li>  before.bat </li><li>  Lancez Visual Studio; </li><li>  Fichier -&gt; Ouvrir -&gt; CMake; </li><li>  Sélectionnez CMakeLists.txt; </li><li>  Le visualiseur réfléchit et affiche le projet pendant un certain temps; </li><li>  Menu principal -&gt; Cache -&gt; Générer -&gt; nom du projet; </li><li>  Nous regardons Output et corrigeons les erreurs (par exemple, j'ai juré sur la version CMake, j'ai dû la baisser à 3.11 au lieu de 3.12); </li><li>  Menu principal -&gt; CMake -&gt; Modifier les paramètres de CMake (sélectionnez MinGW64-Debug); </li><li>  Un fichier CMakeSettings.json est généré automatiquement dans le projet.  Nous indiquons le chemin vers MinGW là (je l'avais dans la vidéo précédente "Z: \ msys64 \ mingw64"), enregistrez le fichier; </li><li>  Menu principal -&gt; Cache -&gt; Générer -&gt; CMakeLists.txt; </li><li>  Menu principal -&gt; Cache -&gt; Générer -&gt; nom du projet; </li><li>  Si tout est fait correctement, un élément avec le nom du projet apparaîtra dans le menu Sélectionner un élément de démarrage valide (à côté de la flèche verte pour lancer l'application); </li><li>  Nous commençons. </li></ul><br><p>  Comme dans le cas de la console, vous pouvez soit la démarrer correctement (en vous rappelant que MinGW est dans PATH), soit exécuter after.bat et placer les DLL nécessaires selon les instructions.  La DLL doit être placée directement dans le répertoire où l'application va.  Il peut être spécifié dans le paramètre buildRoot du fichier CMakeSettings.json. </p><br><p>  Alors, messieurs, la chose la plus importante: à partir de Visual Studio, tout se compile et fonctionne parfaitement.  Nous avons prouvé que nous ne sommes pas liés à un IDE commercial. </p><br><h1 id="sborka-v-visual-studio-code">  Construire dans Visual Studio Code </h1><br><p>  Malheureusement, Visual Studio n'est toujours pas un logiciel propriétaire fermé.  Nous devons passer à quelque chose de plus gratuit, et c'est Visual Studio Code. </p><br><p>  Premier mindfak drôle.  Si vous exécutez VSCode sur un moniteur à grande échelle (je suis assis à la maison devant la télévision, par exemple), l'interface VSCode se transformera en un gâchis.  Pour éviter cela, vous devez l'exécuter avec la clé <code>--force-device-scale-factor</code> (créez un raccourci vers le bureau, ou quelque chose comme ça). </p><br><p>  Malheureusement, je ne maîtrisais pas la gestion de PATH pour VSCode, donc la seule façon de le démarrer est de modifier PATH avec before.bat et un autre hack, que je décrirai ci-dessous. </p><br><p>  Ensuite, vous devez configurer VSCode. </p><br><ul><li>  Installer CMake Tools: Affichage -&gt; Extensions -&gt; dans la recherche, entrez "CMake Tools", cliquez sur installer devant le package créé par l'auteur de vector-of-bool. </li><li>  Affichage -&gt; Explorateur -&gt; Ouvrir le dossier (sélectionnez le répertoire avec notre projet); </li><li>  Palette de commandes (CP, raccourci Ctrl + P) -&gt; "&gt; CMake: Scan for Kits"; </li><li>  Choisissez notre "GCC 8.2.0", vers lequel il mène au bon endroit où msys2 est installé ou ce que vous y utilisez; </li><li>  Fichier&gt; Préférences&gt; Paramètres; </li><li>  Accédez à l'onglet Paramètres utilisateur; </li><li>  Cliquez sur les trois points dans le coin supérieur droit du panneau et sélectionnez "Open settings.json" dans le menu; </li><li>  Ajoutez les options suivantes: </li></ul><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"cmake.configureOnOpen"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"terminal.integrated.shell.windows"</span></span>: <span class="hljs-string"><span class="hljs-string">"D:/msys64/usr/bin/bash.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"terminal.integrated.shellArgs.windows"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"-i"</span></span> ], <span class="hljs-string"><span class="hljs-string">"terminal.integrated.env.windows"</span></span>: { <span class="hljs-string"><span class="hljs-string">"PATH"</span></span>: <span class="hljs-string"><span class="hljs-string">"/mingw64/bin;/usr/local/bin;/usr/bin;/bin;Z:/msys64/bin/;Z:/msys64/usr/local/bin;Z:/msys64/usr/bin;Z:/msys64/bin;Z:/msys64/mingw64/bin/;%PATH%"</span></span> }, <span class="hljs-string"><span class="hljs-string">"cmake.buildDirectory"</span></span>: <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">{workspaceRoot}/build/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">{buildType}"</span></span>, <span class="hljs-string"><span class="hljs-string">"cmake.clearOutputBeforeBuild"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"cmake.generator"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ninja"</span></span>, <span class="hljs-string"><span class="hljs-string">"cmake.cmakePath"</span></span>: <span class="hljs-string"><span class="hljs-string">"C:\\my\\opt\\cmake-3.12.2-win64-x64\\cmake-3.12.2-win64-x64\\bin\\cmake.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"cmake.mingwSearchDirs"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Z:/msys64/mingw64"</span></span>, ], <span class="hljs-string"><span class="hljs-string">"cmake.preferredGenerators"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Ninja"</span></span> ], <span class="hljs-string"><span class="hljs-string">"cmake.loggingLevel"</span></span>: <span class="hljs-string"><span class="hljs-string">"debug"</span></span></code> </pre> <br><ul><li>  La construction devrait se produire automatiquement et la construction sera repliée dans le répertoire de <code>build</code> .  Si cela ne se produit pas, vous devez cliquer sur le bouton <code>Build</code> avec l'engrenage dans la ligne d'état avec la souris. </li></ul><br><p>  Il est clair que vous devez spécifier directement le chemin vers mingw et cmake.  "Mais j'ai PATH!"  Veuillez simplement indiquer, s'il vous plaît, que cela résoudra toute une série de problèmes. </p><br><p>  Il existe cependant un moyen exclusif de ne pas jeter la corbeille dans PATH. </p><br><ul><li> <code>"cmake.generator": "MSYS Makefiles"</code> </li> <li> <code>"cmake.preferredGenerators": [ "MSYS Makefiles"]</code> </li> <li>  Vérifiez que MinGW n'est pas dans PATH (after.bat); </li><li>  Vérifiez que vous avez supprimé le répertoire de génération dans le projet. </li><li>  Lancez la console Msys2; </li><li>  <code>export PATH=/z/msys64/mingw64/bin;$PATH</code> (vous pouvez ensuite le saisir dans une sorte de <code>"~/.bashrc"</code> ) </li><li>  Exécutez VSCode à partir de celui-ci, par exemple, comme ceci: <code>"C:\Users\olegchir\AppData\Local\Programs\Microsoft VS Code\Code.exe"</code> </li><li>  Et puis tout est comme avant.  Le fichier doit être généré normalement. </li><li>  Lorsque vous essayez de le démarrer immédiatement à partir d'Explorer avec un double-clic, cela entraîne instantanément des erreurs de recherche de DLL - cela signifie que tout est correct, nous utilisons vraiment un CHEMIN spécial à l'intérieur de VSCode, mais pas à l'extérieur. </li></ul><br><p>  Nous avons donc prouvé que dans un IDE gratuit, nous pouvons également vivre tout à fait par nous-mêmes. </p><br><h1 id="itogi">  Résumé </h1><br><p>  En résumé, si vous êtes une personne normale, vous pouvez utiliser CMake, MinGW et ne pas souffler dans la moustache.  Tout est librement portable entre l'IDE, tout fonctionne simplement.  Nous pouvons utiliser n'importe quel IDE payant, fermé et non gratuit à tout moment, et nous ne serons rien pour cela.  Mais tout le monde en souffrira, et à juste titre. </p><br><p>  Les prochains articles tiendront compte de votre opinion.  Vous pouvez poser des questions et faire des suggestions dans les commentaires juste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pendant le flux Twitch</a> .  La pertinence de ces articles dépend de la violence avec laquelle vous faites défiler la flèche sous ce commentaire. </p><br><pre> <code class="hljs">                </code> </pre> <br><p>  © Alexander Raevsky </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425209/">https://habr.com/ru/post/fr425209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425199/index.html">Ce qui protège les acheteurs contre la fraude au paiement sans contact</a></li>
<li><a href="../fr425201/index.html">«Je lutte contre le syndrome des imposteurs depuis trois ans» - 10 questions pour un programmeur, numéro 7</a></li>
<li><a href="../fr425203/index.html">Ancienne vulnérabilité UPnP d'une nouvelle façon</a></li>
<li><a href="../fr425205/index.html">Compétences générales en gestion de projet: concept, objectifs et conseils pour une utilisation commerciale réussie</a></li>
<li><a href="../fr425207/index.html">Test de conception: Top 10 Heisenbug 2018 Piter Talks</a></li>
<li><a href="../fr425211/index.html">286 et réseau</a></li>
<li><a href="../fr425213/index.html">Plans pour la prochaine version de Vue.js</a></li>
<li><a href="../fr425215/index.html">4 conseils pour optimiser votre application webpack</a></li>
<li><a href="../fr425217/index.html">Tolérance aux pannes d'application lors de la mise à niveau du cluster Kubernetes</a></li>
<li><a href="../fr425219/index.html">Qu'est-ce que la santé mentale: une perspective de la psychologie / psychothérapie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>