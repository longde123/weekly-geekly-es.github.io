<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò∂ üöÆ üßúüèø Sunrise Manually # 2: Hardcore pour IDE, Cmake et ma d√©ception chez les animaux ‚úåüèº üë®‚Äçüîß üñï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article pr√©c√©dent, j'ai eu l'audace d'utiliser CLion comme IDE. Et puis un homme est venu en courant avec une question: oh, un m√©tier r√©mun√©r√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sunrise Manually # 2: Hardcore pour IDE, Cmake et ma d√©ception chez les animaux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425209/"><p> Dans un article pr√©c√©dent, j'ai eu l'audace d'utiliser CLion comme IDE.  Et puis un homme est venu en courant avec une question: oh, un m√©tier r√©mun√©r√© propri√©taire, vendu, rican√©, etc.  En toute justice, il n'y avait qu'un seul commentaire de ce genre sur Habr√©, mais en r√©alit√©, il y en a des milliers.  Par exemple, le dernier compte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LOR</a> actif, je suis inscrit depuis 2010, et dans presque toutes les discussions impliquant des logiciels propri√©taires, cet enfer commence.  Il est clair que je ne prouverai rien √† personne, mais cela peut aider les rares vagabonds √† passer. </p><br><p>  L'article est conditionnellement divis√© en deux parties: socialement motivationnel et technique (comment construire CMake sur Windows sous divers IDE). </p><br><p><img src="https://habrastorage.org/webt/9g/45/pb/9g45pbrivllf4bxi6-yxx3ejxno.png"><br></p><a name="habracut"></a><br><h1 id="otkuda-vsyo-poshlo">  O√π est-ce que tout est all√© </h1><br><p>  Ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commentaire de l'article pr√©c√©dent √©tait la</a> base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de l'article</a> : ¬´Si le podcast est destin√© aux d√©butants et aux non-professionnels, alors pourquoi n'avez-vous pas pris en compte la licence IDE :(¬ª et ci-apr√®s. </p><br><p>  L'article est bas√© sur les r√©sultats d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flux Twitch</a> et vos commentaires √† ce sujet.  L'enregistrement est sur YouTube.  Cet article n'est pas une transcription d'un podcast, mais un produit de sa compr√©hension. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/y8U8iTrV9PU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h1 id="ishodnyy-posyl">  Message source </h1><br><p>  Tout d'abord, v√©rifions la validit√© de l'hypoth√®se d'origine: le logiciel co√ªte cher.  Si vous allez sur le site, il s'av√®re que CLion co√ªte 8,90 dollars par mois.  580 roubles.  Il est clair que pour une personne qui ne fait pas de programmation pour gagner sa vie - cela peut parfois montrer un montant d√©cent qui peut √™tre d√©pens√© pour quelque chose de plus utile.  Achetez un repas, par exemple. </p><br><p>  Pour un professionnel, tout est compl√®tement diff√©rent, mais laissons ce sujet.  Un journaliste se distingue d'un employ√© du d√©partement marketing d'une entreprise de fabrication de logiciels ou de jeux en ce qu'il ne fait pas la promotion de la politique du Parti, ne prend aucune mesure pour promouvoir le produit.  Il parle tel quel.  Comment tout cela est-il vraiment, comment un journaliste voit-il vraiment une question?  La m√™me chose s'applique aux vrais √©vang√©listes. </p><br><blockquote>  L'essence des ph√©nom√®nes, et la cha√Æne d'ann√©es, <br>  Visages d'amis et masques d'ennemis, <br>  Clairement visible et ne peut pas se cacher <br>  Aux yeux du po√®te - le propri√©taire des si√®cles. <br><br>  La lumi√®re des √©toiles lointaines et le d√©but de l'aube <br>  Les secrets de la vie et les secrets de l'amour <br>  Dans un moment d'inspiration, r√©chauff√© par le soleil - <br>  Tout se refl√®te dans l'√¢me du po√®te - <br>  Dans le miroir du monde ... <br><br>  (c) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Konstantin Nikolsky, Miroir du monde</a> <br></blockquote><p>  S'il est vraiment int√©ressant de voir comment CLion augmente vos revenus, vous trouverez quelqu'un √† contacter, et ici nous parlons d'autre chose. </p><br><h1 id="tipologiya">  Typologie </h1><br><p>  Envisagez plut√¥t des groupes de personnes qui sont bombard√©es autant que possible √† partir d'un logiciel ferm√©. </p><br><p>  Comme vous l'avez d√©j√† compris, je ne suis pas un nifiga sociologue, et je n'ai que la typologie qui s'est d√©velopp√©e dans le feu de l'action des confrontations du forum.  Il a seulement l'avantage qu'il est possible d'attribuer une personne √† un certain groupe pratiquement sans inclure le cerveau en regardant les deux premiers commentaires. </p><br><p>  Donc, les gens sont: </p><br><ul><li>  Les combattants de la libert√© et l'open source </li><li>  Honn√™tement tromp√© </li><li>  Les animaux </li></ul><br><p>  Je sugg√®re de ne pas consid√©rer l‚Äôinexactitude de l‚Äôauteur.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Je suis une autre affaire</a> . </p><br><h1 id="borcy-za-svobodu-i-opensorc">  Les combattants de la libert√© et l'open source </h1><br><p>  Les plus purs et les plus brillants sont les combattants de l'ouvreur.  Je suis moi-m√™me de ceux qui, apr√®s avoir entendu le mot "Linux", corrige constamment <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"non pas Linux, mais GNU / Linux"</a> .  Le probl√®me est que le monde r√©el n'est jamais noir et blanc.  Nous avons une certaine libert√©, et c'est une ressource qui peut √™tre utilis√©e si n√©cessaire.  Comme un membre de la direction de Mozilla a plaisant√© (ou non), "pourquoi avons-nous besoin d'un cr√©dit de confiance si nous ne le d√©pensons pas?". </p><br><p>  Exemple: il y avait une telle personne, Miguel de Icaza.  Il a cr√©√© Gnome et a contribu√© √† la construction d'un GNU / Linux d√©sopilant comme nous le connaissons.  Et puis il a √©t√© expuls√© de la communaut√©, et Stallman l'a trait√© de ¬´tra√Ætre √† la libert√©¬ª: </p><br><blockquote>  ¬´Miguel de Icaza est essentiellement un tra√Ætre √† la communaut√© du logiciel libre.  &lt;...&gt; Le projet vise √† organiser le fonctionnement de programmes soi-disant ¬´open source¬ª sur la plate-forme Windows;  ainsi, le temps inestimable des d√©veloppeurs est consacr√© aux plates-formes gratuites ¬ª <br></blockquote><p>  Et o√π est Miguel maintenant?  Lui et son √©quipe travaillent c√¥te √† c√¥te avec l'un des plus grands projets de ces derni√®res ann√©es: porter .NET sur GNU / Linux sous des licences permissives.  Il a vraiment pass√© son temps. </p><br><p>  Sur le flux, j'ai tu√© au moins vingt minutes pour tr√©bucher CMake sous Visual Studio Code.  √áa n'a pas march√©.  Et dans Visual Studio gratuit, mais pas gratuit, cela s'est av√©r√© la premi√®re fois.  C'est exactement ce que nous obtenons si souvent en essayant d'utiliser des logiciels libres: dans l'open source, pour des raisons √©videntes, nous n'avons pas le temps de r√©fl√©chir √† des scripts de bout en bout et de prendre soin de l'ensemble du produit.  Merci aux d√©veloppeurs d'avoir fait au moins quelque chose.  Mais pour nous, en tant qu'utilisateurs, nous avons toujours un choix moral et √©thique: soit choisir la libert√© et passer beaucoup de temps √† donner un coup de pied au logiciel libre, soit, au contraire, passer notre libert√© √† acheter du temps, qui peut ensuite √™tre consacr√© √† de bonnes actions. </p><br><p>  √âtant donn√© que ce probl√®me d√©passe le cadre des probl√®mes techniques, nous terminerons ici.  Une personne vraiment id√©ologique est fid√®le √† son id√©e. </p><br><h1 id="zhivotnye">  Les animaux </h1><br><p>  Oh, mais cette cat√©gorie me bombarde. </p><br><blockquote>  "Les caract√©ristiques sp√©cifiques d'une personne qui la distinguent des autres animaux sont la posture droite, un cerveau tr√®s d√©velopp√©, la pens√©e et la parole articul√©e. Une personne √©tudie et change elle-m√™me et le monde qui l'entoure, cr√©e une culture et sa propre histoire."  (c) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikip√©dia</a> . </blockquote><p>  Malheureusement, dans une conversation sur l'IDE, il s'av√®re souvent que l'interlocuteur n'est pas capable de penser de mani√®re ind√©pendante, au lieu de parler clairement, il marmonne "et j'ai d√©j√† des normes" et mange ce qu'elles donnent.  En raison de la position verticale, il est facile de le confondre avec une personne, mais ne vous y trompez pas. </p><br><p>  Ces cr√©atures montent tout pour n'importe qui.  Dans les jeux, ils vendent des lootboxes et des DLC avec une musique nostalgique.  Dans les √©diteurs, ils sont plac√©s sur diverses choses occup√©es analement, dans le but de relier le patient √† un environnement, un √©cosyst√®me sp√©cifique, et √† tel point qu'aucun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ph√©naz√©pam</a> n'est n√©cessaire.  Ils mangeront tout.  <em>"Et les normes aussi pour moi."</em> </p><br><p>  Il est important d'ajouter que non seulement les sp√©cialistes du marketing conduisent sur leurs oreilles, mais aussi que les trolls ou les sch√©mas cliniques naturels.  Il y a beaucoup de schizos, vous n'en croirez pas combien. </p><br><p>  Par exemple, rappelez-vous le manifeste que Nikitonsky a r√©cemment publi√© (plus pr√©cis√©ment, sa traduction dans Habr): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ma d√©ception pour le logiciel</a> ?  Comment je me fais bombarder de lui.  J'esp√®re sinc√®rement que Nikitonsky a √©crit tout cela pour toucher sciemment, et pas vraiment. </p><br><p>  Regardez quelles th√®ses sont l√†: </p><br><ul><li>  Tout est insupportablement lent - un t√©l√©phone moderne est plus puissant que les ordinateurs qui envoient des gens sur la lune; </li><li>  Tout est √âNORME - Android p√®se 6 gigaoctets; </li><li>  Tout pourrit - les vieux appareils ne fonctionnent pas ou fonctionnent mal; </li><li>  Dans la programmation du chaos, regardez les graphiques de d√©pendance dans npm et left-pad. </li></ul><br><p>  La p√™che √† la tra√Æne est une p√™che √† la tra√Æne, mais il peut ne pas √™tre familier √† quelqu'un que la taille du code source est ¬´ce qui a amen√© la personne sur la lune¬ª, c'est-√†-dire Apollo 11, de sorte que l'auteur voudrait √† peine les lire. </p><br><p><img src="https://habrastorage.org/webt/rc/uc/fb/rcucfbhz3eka-xvpqmer_ofdnow.jpeg"><br></p><br><p>  Que les OS modernes d√©finissent n'importe quel √©quipement et ont tout pour chaque occasion.  Que le ralentissement des appareils a conduit √† une situation merveilleuse lorsque les capitalistes de Merissa se sont baiss√©s et ont d√©velopp√© le fer √† un niveau moderne, gr√¢ce auquel nous avons dans notre poche un m√©ga-appareil pour toutes les occasions.  M√™me les serviettes ne sont pas n√©cessaires, c'est sur Google Play.  Le npm mentionn√© permet √† une personne ordinaire d'√©crire des choses d'une complexit√© inimaginable qui prendraient des ann√©es auparavant. </p><br><p>  Et puis √† tous ces camarades qui "mangent ce qu'ils donnent", soudain, des m√©ga id√©es de la liste ci-dessus commencent √† me monter dans la t√™te.  Etendons √† l'IDE: </p><br><ul><li>  Pour les applications sur Electron (Visual Studio Code, Atom), les lettres apparaissent trop lentement √† l'√©cran, que ce soit vim ou emacs; </li><li>  Eclipse IDE ralentit; </li><li>  En g√©n√©ral, Java ralentit - avec tout ce qui y est √©crit, y compris NetBeans, IDEA et Clion; </li><li>  Tout IDE ralentit manger pour cent comme √ßa; </li><li>  La propri√©t√© est mauvaise; </li><li>  La liste continue. </li></ul><br><p>  Cette liste est d√©j√† suffisante pour r√©viser le toit.  Ne croyez pas les ordures.  Si vim est meilleur qu'Eclipse (ou vice versa) dans certains cas, ce n'est certainement pas parce que les voisins irradient les vimers avec un micro-ondes et que les extraterrestres enl√®vent des √©clipseurs la nuit. </p><br><p>  Malheureusement, √† la suite de longues guerres de guerres en r√©seau, il a √©t√© √©tabli avec pr√©cision: il ne peut y avoir de dialogue.  √Ä l'homme - humain et √† l'animal - animal.  C'est ainsi que la vie est organis√©e.  La probabilit√© que quelqu'un lise cet article et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">change d'avis</a> est extr√™mement faible, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">immol√©e et am√©lior√©e</a> . </p><br><h1 id="chestno-zabluzhdayuschiesya">  Honn√™tement tromp√© </h1><br><p>  Maintenant, nous en avons fini avec les extr√™mes: particuli√®rement intelligents de la secte Stallman d'un c√¥t√© du spectre, et pas d'animaux tr√®s intelligents de l'autre, parlons des gens ordinaires. </p><br><p>  La premi√®re id√©e fausse est que nous sommes en quelque sorte clou√©s sur l'IDE.  Cela remonte √† l'√©poque o√π les gens utilisaient une sorte de Delphi 7 et des versions anciennes de Microsoft Visual Studio.  Ils disent que dans la nouvelle Vizhualka, tout allait bien avec les fichiers du projet.  Bonjour, c'est maintenant l'ann√©e 2018, il n'y a plus d'esclavage. </p><br><p>  Pour se d√©barrasser de l'esclavage, nous avons re√ßu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CMake</a> d'en haut: un outil utilitaire open source multiplateforme qui vous permet de cr√©er, tester et empaqueter des applications. </p><br><p> Cela ne dit toujours rien au d√©butant et ses bras atteignent l'IDE.  Tout cela par peur et incompr√©hension de ce qui se passe.  Je viens moi-m√™me de Java, et je sais donc bien comment les yeux d'une personne qui a vu <code>pom.xml</code> pour la premi√®re fois se dilater pour la premi√®re fois. </p><br><p>  Voyons en quoi consiste le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet cr√©√© la derni√®re fois</a> et comment le construire dans toutes sortes d'IDE diff√©rents. </p><br><p>  Composition du fichier: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CMakeLists.txt</a> </li><li>  <a href="">main.cpp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">shaders.shader</a> </li></ul><br><p>  Le shader est compil√© directement en runtime, <a href="">avec la fonction D3DCompile</a> .  Le D3DCompiler du SDK DirectX (qui est maintenant le SDK Windows) fonctionne.  Aucun IDE n'est n√©cessaire pour le construire. </p><br><p>  <code>main.cpp</code> est le seul fichier √† construire.  Et il est collect√© √† l'aide d'informations qui se <code>CMakeLists.txt</code> enti√®rement dans <code>CMakeLists.txt</code> . </p><br><p>  Dans le sens inverse: il y a <code>CMakeLists.txt</code> , qui nous dit exactement ce que nous allons compiler.  L'assembly <code>main.cpp</code> enregistr√©.  Cela suffit pour compiler le projet.  Apr√®s la compilation, un fichier exe est obtenu qui, apr√®s le lancement, recueille le shader et l'affiche √† l'√©cran.  Tout est extr√™mement simple, l'IDE n'est pas impliqu√© dans cette cha√Æne et peut √™tre n'importe quoi. </p><br><p>  IDE est facultatif.  G√©n√©ralement.  Qu'est-ce qui est incompr√©hensible ici? </p><br><h1 id="sborka">  Assemblage </h1><br><h2 id="podgotovitelnye-momenty">  Moments pr√©paratoires </h2><br><p>  Comme toujours, la pr√©paration occupe la majeure partie du processus.  Il y a quelques choses qui doivent √™tre clarifi√©es. </p><br><p>  On suppose que tout se fait sur la base de Msys2, que nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">install√© la derni√®re fois</a> .  Si ce n'est pas le cas, vous devrez vous d√©m√™ler :) </p><br><h3 id="kak-ustanovit-cmake-i-ninja">  Comment installer CMake et Ninja </h3><br><p>  Pour pouvoir collecter quelque chose, vous devez installer CMake, si vous ne l'avez pas d√©j√† fait. </p><br><ul><li>  T√©l√©chargez depuis le site: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://cmake.org/download</a> .  J'ai cmake-3.12.2-win64-x64; </li><li>  D√©compressez et ajoutez le chemin √† l'endroit o√π se trouve cmake.exe dans la variable d'environnement Windows PATH; </li><li>  T√©l√©chargez sur le site le g√©n√©rateur ninja de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la derni√®re version</a> ; </li><li>  D√©ballez et placez quelque part dans le CHEMIN. </li></ul><br><h3 id="kak-redaktirovat-path-chtoby-ne-poehat-kukuhoy">  Comment √©diter PATH pour ne pas voyager comme un coucou </h3><br><p>  La premi√®re fa√ßon est connue de tous: win + pause -&gt; Param√®tres syst√®me avanc√©s -&gt; Avanc√© -&gt; Variables d'environnement.  Malheureusement, m√™me dans Windows 10, dans lequel l'√©diteur de variable PATH a √©t√© ajout√©, ce n'est toujours pas tr√®s pratique. </p><br><p>  Si vous jouez souvent avec PATH, l'utilisation de la fen√™tre d'√©dition standard est tr√®s ennuyeuse.  Je vous conseille d'utiliser l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©diteur d'environnement rapide</a> - il est gratuit et √©conomise consid√©rablement les nerfs. </p><br><h3 id="kak-podklyuchat-dll-iz-mingw-v-rezhime-razrabotki">  Comment connecter une DLL √† partir de MinGW en mode d√©veloppement </h3><br><p>  Pour d√©marrer l'application, vous avez besoin de fichiers dll d'au moins <code>mingw64\bin</code> . </p><br><p>  Malheureusement, je n'ai pas trouv√© de solution vraiment pratique pour lancer des biblioth√®ques de MinGW vers PATH.  Si un sage peut le dire dans les commentaires, je vous en serai tr√®s reconnaissant. </p><br><p>  Maintenant, le moyen le plus simple consiste √† attacher le r√©pertoire bin MinGW directement √† la premi√®re place dans PATH.  (Dans le cas de Visual Studio, vous pouvez simplement d√©poser des biblioth√®ques dans le r√©pertoire d'assembly.) Malheureusement, cette m√©thode a un √©norme inconv√©nient: certains logiciels de Windows commencent √† tomber imm√©diatement apr√®s la modification de PATH.  Par exemple, Overwatch a cess√© de fonctionner pour moi, et c'est une chose compl√®tement fatale. </p><br><p>  Si vous, comme moi, vivez dans un ordinateur et que vous ne l'allumez pas uniquement pendant les heures de bureau, le sch√©ma suivant est propos√©: ajoutez MinGW √† PATH avant de programmer, puis supprimez-le.  Pour faciliter le processus, vous devez cr√©er deux fichiers batch qui peuvent √™tre lanc√©s en double-cliquant: </p><br><p>  before.bat: </p><br><pre> <code class="hljs tex">setx path "Z:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">msys</span></span></span></span>64<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mingw</span></span></span></span>64<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bin</span></span></span></span>;<span class="hljs-comment"><span class="hljs-comment">%path%"</span></span></code> </pre> <br><p>  after.bat: </p><br><pre> <code class="hljs pgsql">setx <span class="hljs-type"><span class="hljs-type">PATH</span></span> "%PATH:Z:\msys64\mingw64\bin;=%"</code> </pre><br><h3 id="kak-podklyuchat-dll-v-rezhime-testovogo-reliza">  Comment connecter une DLL en mode de version de test </h3><br><p>  Il est clair que la m√©thode pr√©c√©dente ne fonctionne que lorsque <code>mingw64\bin</code> est dans PATH, c'est-√†-dire uniquement sur l'ordinateur du d√©veloppeur.  Et m√™me l√†, vous ne voulez pas toujours mutiler PATH.  Si cela commence une personne ordinaire (ou nous-m√™mes apr√®s after.bat), alors quelque chose comme: </p><br><img width="400" src="https://habrastorage.org/webt/d2/ka/-b/d2ka-bup2zcih2chipoohkcj6u8.png"><br><p><img width="400" src="https://habrastorage.org/webt/tf/ia/zh/tfiazhyj4f-f_-omq2tojpkykmk.png"><br></p><br><p>  Le moyen le plus simple de r√©soudre ce probl√®me consiste √† placer la DLL n√©cessaire √† c√¥t√© du fichier ex√©cutable.  Mais pour cela, vous devez savoir quelles DLL sont utilis√©es! </p><br><p>  Nous avons d√©j√† quelques utilitaires con√ßus par Microsoft pour cela. </p><br><ul><li>  Une liste compl√®te d'une application en cours d'ex√©cution peut √™tre consult√©e √† l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">aide de ListDLL</a> , mais elle ne montre pas ce qui n'est pas encore charg√©. </li><li>  Si vous faites Outils -&gt; Invite de commandes Visual Studio, <code>dumpbin /dependents "Z:\game\build\Mingw64-Debug\src.exe"</code> , alors il n'affichera que la DLL de premier niveau.  En d'autres termes, si vous ne terminez que ce que la d√©charge vous dit, apr√®s le lancement, il y aura toujours des erreurs - elles concerneront simplement d'autres DLL. </li></ul><br><p>  Pour parcourir les d√©pendances en profondeur, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il existe un tel script</a> qui peut √™tre ex√©cut√© directement √† partir de la ligne de commande (msys2, cygwin, etc. - assez pour avoir python2 / 3 et objdump install√©s √† l'int√©rieur). </p><br><ul><li>  T√©l√©chargez le script mingw-bundledlls, </li><li>  Mettez √† c√¥t√© du fichier, </li><li>  Dans un √©diteur de texte, dans la <code>blacklist = [</code> tableau <code>blacklist = [</code> ajoutez nos pi√®ces DirectX: <code>d3d10.dll, d3d11.dll, d3dcompiler_43.dll</code> , </li><li>  <code>chmod 755 ./mingw-bundledlls</code> , </li><li>  Pour voir les <code>./mingw-bundledlls ./src.exe</code> utilis√©es: <code>./mingw-bundledlls ./src.exe</code> (enfin, tout ex√©cutable qui vous int√©resse plus), </li><li>  Pour copier automatiquement et mettre ensuite: <code>./mingw-bundledlls --copy ./src.exe</code> </li><li>  PROFIT: l'ex√©cutable est lanc√© comme √ßa, en double-cliquant sur le fichier exe, et depuis Visual Studio. </li></ul><br><p>  Il existe encore diff√©rentes fa√ßons d√©licates de contracter CMake pour copier la DLL elle-m√™me, mais si vous commencez √† vous plonger dans des probl√®mes de distribution, vous ne pourrez jamais terminer cet article. </p><br><h1 id="sborka-vruchnuyu">  Assemblage manuel </h1><br><ul><li>  before.bat </li><li>  D√©marrer -&gt; Ex√©cuter -&gt; cmd.exe </li><li> <code>cd /dz://game/src</code> </li> <li> <code>cmake -G "Ninja" -D EXECUTABLE_OUTPUT_PATH="bin" -D CMAKE_CXX_COMPILER="Z:/msys64/mingw64/bin/g++.exe" -D CMAKE_C_COMPILER="Z:/msys64/mingw64/bin/gcc.exe" .</code> </li> <li>  ninja </li><li>  Ex√©cutez imm√©diatement le fichier g√©n√©r√© dans bin ou attachez la dll selon les instructions ci-dessus et ex√©cutez after.bat </li></ul><br><p>  Nous avons prouv√© que nous ne sommes pas du tout li√©s √† l'IDE. </p><br><h1 id="sborka-v-visual-studio">  Construire dans Visual Studio </h1><br><p>  Mais quand m√™me, d√©velopper sans IDE n'est pas la chose.  La derni√®re fois, nous avons d√©j√† cr√©√© une application de test √† l'aide de CLion.  Mais c'est la propri√©t√© payante et zashkvar, non?  Oubliez √ßa.  Maintenant seulement gratuit. </p><br><p>  Dans Visual Studio, la s√©quence d'actions n√©cessaires est super simple. </p><br><ul><li>  before.bat </li><li>  Lancez Visual Studio; </li><li>  Fichier -&gt; Ouvrir -&gt; CMake; </li><li>  S√©lectionnez CMakeLists.txt; </li><li>  Le visualiseur r√©fl√©chit et affiche le projet pendant un certain temps; </li><li>  Menu principal -&gt; Cache -&gt; G√©n√©rer -&gt; nom du projet; </li><li>  Nous regardons Output et corrigeons les erreurs (par exemple, j'ai jur√© sur la version CMake, j'ai d√ª la baisser √† 3.11 au lieu de 3.12); </li><li>  Menu principal -&gt; CMake -&gt; Modifier les param√®tres de CMake (s√©lectionnez MinGW64-Debug); </li><li>  Un fichier CMakeSettings.json est g√©n√©r√© automatiquement dans le projet.  Nous indiquons le chemin vers MinGW l√† (je l'avais dans la vid√©o pr√©c√©dente "Z: \ msys64 \ mingw64"), enregistrez le fichier; </li><li>  Menu principal -&gt; Cache -&gt; G√©n√©rer -&gt; CMakeLists.txt; </li><li>  Menu principal -&gt; Cache -&gt; G√©n√©rer -&gt; nom du projet; </li><li>  Si tout est fait correctement, un √©l√©ment avec le nom du projet appara√Ætra dans le menu S√©lectionner un √©l√©ment de d√©marrage valide (√† c√¥t√© de la fl√®che verte pour lancer l'application); </li><li>  Nous commen√ßons. </li></ul><br><p>  Comme dans le cas de la console, vous pouvez soit la d√©marrer correctement (en vous rappelant que MinGW est dans PATH), soit ex√©cuter after.bat et placer les DLL n√©cessaires selon les instructions.  La DLL doit √™tre plac√©e directement dans le r√©pertoire o√π l'application va.  Il peut √™tre sp√©cifi√© dans le param√®tre buildRoot du fichier CMakeSettings.json. </p><br><p>  Alors, messieurs, la chose la plus importante: √† partir de Visual Studio, tout se compile et fonctionne parfaitement.  Nous avons prouv√© que nous ne sommes pas li√©s √† un IDE commercial. </p><br><h1 id="sborka-v-visual-studio-code">  Construire dans Visual Studio Code </h1><br><p>  Malheureusement, Visual Studio n'est toujours pas un logiciel propri√©taire ferm√©.  Nous devons passer √† quelque chose de plus gratuit, et c'est Visual Studio Code. </p><br><p>  Premier mindfak dr√¥le.  Si vous ex√©cutez VSCode sur un moniteur √† grande √©chelle (je suis assis √† la maison devant la t√©l√©vision, par exemple), l'interface VSCode se transformera en un g√¢chis.  Pour √©viter cela, vous devez l'ex√©cuter avec la cl√© <code>--force-device-scale-factor</code> (cr√©ez un raccourci vers le bureau, ou quelque chose comme √ßa). </p><br><p>  Malheureusement, je ne ma√Ætrisais pas la gestion de PATH pour VSCode, donc la seule fa√ßon de le d√©marrer est de modifier PATH avec before.bat et un autre hack, que je d√©crirai ci-dessous. </p><br><p>  Ensuite, vous devez configurer VSCode. </p><br><ul><li>  Installer CMake Tools: Affichage -&gt; Extensions -&gt; dans la recherche, entrez "CMake Tools", cliquez sur installer devant le package cr√©√© par l'auteur de vector-of-bool. </li><li>  Affichage -&gt; Explorateur -&gt; Ouvrir le dossier (s√©lectionnez le r√©pertoire avec notre projet); </li><li>  Palette de commandes (CP, raccourci Ctrl + P) -&gt; "&gt; CMake: Scan for Kits"; </li><li>  Choisissez notre "GCC 8.2.0", vers lequel il m√®ne au bon endroit o√π msys2 est install√© ou ce que vous y utilisez; </li><li>  Fichier&gt; Pr√©f√©rences&gt; Param√®tres; </li><li>  Acc√©dez √† l'onglet Param√®tres utilisateur; </li><li>  Cliquez sur les trois points dans le coin sup√©rieur droit du panneau et s√©lectionnez "Open settings.json" dans le menu; </li><li>  Ajoutez les options suivantes: </li></ul><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"cmake.configureOnOpen"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"terminal.integrated.shell.windows"</span></span>: <span class="hljs-string"><span class="hljs-string">"D:/msys64/usr/bin/bash.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"terminal.integrated.shellArgs.windows"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"-i"</span></span> ], <span class="hljs-string"><span class="hljs-string">"terminal.integrated.env.windows"</span></span>: { <span class="hljs-string"><span class="hljs-string">"PATH"</span></span>: <span class="hljs-string"><span class="hljs-string">"/mingw64/bin;/usr/local/bin;/usr/bin;/bin;Z:/msys64/bin/;Z:/msys64/usr/local/bin;Z:/msys64/usr/bin;Z:/msys64/bin;Z:/msys64/mingw64/bin/;%PATH%"</span></span> }, <span class="hljs-string"><span class="hljs-string">"cmake.buildDirectory"</span></span>: <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">{workspaceRoot}/build/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$</span></span></span><span class="hljs-string">{buildType}"</span></span>, <span class="hljs-string"><span class="hljs-string">"cmake.clearOutputBeforeBuild"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"cmake.generator"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ninja"</span></span>, <span class="hljs-string"><span class="hljs-string">"cmake.cmakePath"</span></span>: <span class="hljs-string"><span class="hljs-string">"C:\\my\\opt\\cmake-3.12.2-win64-x64\\cmake-3.12.2-win64-x64\\bin\\cmake.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"cmake.mingwSearchDirs"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Z:/msys64/mingw64"</span></span>, ], <span class="hljs-string"><span class="hljs-string">"cmake.preferredGenerators"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Ninja"</span></span> ], <span class="hljs-string"><span class="hljs-string">"cmake.loggingLevel"</span></span>: <span class="hljs-string"><span class="hljs-string">"debug"</span></span></code> </pre> <br><ul><li>  La construction devrait se produire automatiquement et la construction sera repli√©e dans le r√©pertoire de <code>build</code> .  Si cela ne se produit pas, vous devez cliquer sur le bouton <code>Build</code> avec l'engrenage dans la ligne d'√©tat avec la souris. </li></ul><br><p>  Il est clair que vous devez sp√©cifier directement le chemin vers mingw et cmake.  "Mais j'ai PATH!"  Veuillez simplement indiquer, s'il vous pla√Æt, que cela r√©soudra toute une s√©rie de probl√®mes. </p><br><p>  Il existe cependant un moyen exclusif de ne pas jeter la corbeille dans PATH. </p><br><ul><li> <code>"cmake.generator": "MSYS Makefiles"</code> </li> <li> <code>"cmake.preferredGenerators": [ "MSYS Makefiles"]</code> </li> <li>  V√©rifiez que MinGW n'est pas dans PATH (after.bat); </li><li>  V√©rifiez que vous avez supprim√© le r√©pertoire de g√©n√©ration dans le projet. </li><li>  Lancez la console Msys2; </li><li>  <code>export PATH=/z/msys64/mingw64/bin;$PATH</code> (vous pouvez ensuite le saisir dans une sorte de <code>"~/.bashrc"</code> ) </li><li>  Ex√©cutez VSCode √† partir de celui-ci, par exemple, comme ceci: <code>"C:\Users\olegchir\AppData\Local\Programs\Microsoft VS Code\Code.exe"</code> </li><li>  Et puis tout est comme avant.  Le fichier doit √™tre g√©n√©r√© normalement. </li><li>  Lorsque vous essayez de le d√©marrer imm√©diatement √† partir d'Explorer avec un double-clic, cela entra√Æne instantan√©ment des erreurs de recherche de DLL - cela signifie que tout est correct, nous utilisons vraiment un CHEMIN sp√©cial √† l'int√©rieur de VSCode, mais pas √† l'ext√©rieur. </li></ul><br><p>  Nous avons donc prouv√© que dans un IDE gratuit, nous pouvons √©galement vivre tout √† fait par nous-m√™mes. </p><br><h1 id="itogi">  R√©sum√© </h1><br><p>  En r√©sum√©, si vous √™tes une personne normale, vous pouvez utiliser CMake, MinGW et ne pas souffler dans la moustache.  Tout est librement portable entre l'IDE, tout fonctionne simplement.  Nous pouvons utiliser n'importe quel IDE payant, ferm√© et non gratuit √† tout moment, et nous ne serons rien pour cela.  Mais tout le monde en souffrira, et √† juste titre. </p><br><p>  Les prochains articles tiendront compte de votre opinion.  Vous pouvez poser des questions et faire des suggestions dans les commentaires juste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pendant le flux Twitch</a> .  La pertinence de ces articles d√©pend de la violence avec laquelle vous faites d√©filer la fl√®che sous ce commentaire. </p><br><pre> <code class="hljs">                </code> </pre> <br><p>  ¬© Alexander Raevsky </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425209/">https://habr.com/ru/post/fr425209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425199/index.html">Ce qui prot√®ge les acheteurs contre la fraude au paiement sans contact</a></li>
<li><a href="../fr425201/index.html">¬´Je lutte contre le syndrome des imposteurs depuis trois ans¬ª - 10 questions pour un programmeur, num√©ro 7</a></li>
<li><a href="../fr425203/index.html">Ancienne vuln√©rabilit√© UPnP d'une nouvelle fa√ßon</a></li>
<li><a href="../fr425205/index.html">Comp√©tences g√©n√©rales en gestion de projet: concept, objectifs et conseils pour une utilisation commerciale r√©ussie</a></li>
<li><a href="../fr425207/index.html">Test de conception: Top 10 Heisenbug 2018 Piter Talks</a></li>
<li><a href="../fr425211/index.html">286 et r√©seau</a></li>
<li><a href="../fr425213/index.html">Plans pour la prochaine version de Vue.js</a></li>
<li><a href="../fr425215/index.html">4 conseils pour optimiser votre application webpack</a></li>
<li><a href="../fr425217/index.html">Tol√©rance aux pannes d'application lors de la mise √† niveau du cluster Kubernetes</a></li>
<li><a href="../fr425219/index.html">Qu'est-ce que la sant√© mentale: une perspective de la psychologie / psychoth√©rapie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>