<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìØ üíµ üë©üèª‚Äçüé® Unidade: conhecendo objetos program√°veis üë®‚Äçüë¶ üë©üèΩ‚Äçüíº ü§°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste tutorial, voc√™ aprender√° como criar e usar objetos Scriptable no Unity. Os objetos com script podem ajudar a melhorar seu fluxo de trabalho, red...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unidade: conhecendo objetos program√°veis</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421523/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/365/357/ddb365357b74dc1e5d86d337d90c8398.gif" alt="imagem"></div><br>  Neste tutorial, voc√™ aprender√° como criar e usar objetos Scriptable no Unity.  Os objetos com script podem ajudar a melhorar seu fluxo de trabalho, reduzir o espa√ßo ocupado na mem√≥ria e at√© permitir que voc√™ divida a arquitetura do c√≥digo. <br><br>  De acordo com a documenta√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Unity</a> , ScriptableObject √© um c√≥digo de classe que permite criar objetos Scriptable no jogo para armazenar grandes quantidades de dados compartilhados, independentes das inst√¢ncias de script. <br><br>  H√° muitos motivos para usar objetos que podem ser gravados no Unity.  Eles podem reduzir a quantidade de mem√≥ria usada para cada prefab adicional, porque o Objeto Scriptable segue essencialmente o padr√£o de design <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Flyweight</a> . <br><br>  Outra vantagem dos objetos grav√°veis, que ser√° o tema principal deste tutorial, √© o uso deles para a transfer√™ncia conveniente de dados.  Consideraremos essa propriedade como um exemplo da cria√ß√£o de uma loja de espadas, que exibir√° os par√¢metros, pre√ßos e descri√ß√µes de v√°rias espadas. <br><a name="habracut"></a><br><blockquote>  <em>Nota:</em> este tutorial sup√µe que voc√™ esteja familiarizado com o editor do Unity.  Voc√™ deve entender como editar o c√≥digo em um editor de c√≥digo e ter conhecimentos b√°sicos de C #.  Se voc√™ precisar melhorar suas habilidades no Unity, confira outros <a title="Tutoriais do Unity" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutoriais do Unity</a> . </blockquote><br><h2>  Come√ßando a trabalhar </h2><br>  Vamos come√ßar <a href="">baixando os materiais</a> que precisamos. <br><br>  Descompacte o arquivo baixado em um local conveniente para voc√™ e abra o projeto <em>Scriptable Object Tutorial-Starter</em> no Unity. <br><br>  Voc√™ dever√° ver a seguinte pasta criada como parte da aquisi√ß√£o do projeto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/046/8c3/b63/0468c3b63c16cb562f7d826a51ff8597.png"></div><br><ul><li>  <em>_Configura√ß√£o</em> : para o tutorial, essa pasta n√£o √© necess√°ria. </li><li>  <em>Cenas</em> : cont√©m uma cena do <em>comerciante de espadas</em> que abordaremos ao longo do tutorial.  Abra esta cena. </li><li>  <em>Scripts</em> : at√© o momento, existe apenas um script, mas durante o tutorial criaremos novos. </li><li>  <em>√çcones de espadas</em> : Cont√©m imagens est√°ticas de espadas individuais. </li><li>  <em>Pr√©</em> -fabricados de <em>Espadas</em> : Cont√©m as pr√©-fabricadas de todas as espadas na cena do Mercador de Espadas. </li></ul><br><h2>  Criando um objeto program√°vel </h2><br>  Para come√ßar, v√° para a cena <em>Sword Merchant</em> .  Deve ficar assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/372/6ea/e89/3726eae89b9ddb9f57a698ed5cd7626d.png"></div><br><h3>  Preparando objeto grav√°vel </h3><br>  √â hora de criar o primeiro Objeto Scriptable! <br><br>  Na pasta <em>Scripts</em> , crie um novo script chamado <em>SwordData</em> .  Esta classe ser√° usada como um cont√™iner para todos os dados da espada exibidos na loja do comerciante de espadas. <br><br>  Dentro desta classe, comece herdando de <code>ScriptableObject</code> vez de <code>MonoBehaviour</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { }</code> </pre> <br>  Essa a√ß√£o informa ao Unity que ainda queremos usar os recursos e m√©todos do Unity, assim como o MonoBehaviour comum, mas n√£o precisamos mais anexar esse script ao GameObject.  Em vez disso, ser√° processado como qualquer ativo regular, que pode ser criado da mesma maneira que a cria√ß√£o de uma pr√©-fabricada, cena ou material. <br><br>  Preencha o script com campos serializados, que conter√£o todos os dados correspondentes √†s informa√ß√µes exibidas na interface do usu√°rio do Sword Merchant. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> swordName; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> description; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sprite icon; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> goldCost; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> attackDamage; }</code> </pre> <br><ul><li>  <em>swordName</em> : <code>string</code> , na qual o nome da espada ser√° armazenado. </li><li>  <em>description</em> : <code>string</code> , na qual a descri√ß√£o da espada ser√° armazenada. </li><li>  <em>icon</em> : o sprite que conter√° o √≠cone da espada. </li><li>  <em>goldCost</em> : <code>int</code> para armazenar o valor da espada em ouro. </li><li>  <em>attackDamage</em> : <code>int</code> para armazenar dano ao atacar com uma espada. </li></ul><br><blockquote>  <em>Nota: SerializeField</em> <br><br>  No Unity, o atributo SerializeField permite que voc√™ tenha vari√°veis ‚Äã‚Äãde script privadas dispon√≠veis no Inspector.  Isso permitir√° que voc√™ defina valores no editor sem fornecer acesso √† vari√°vel de outros scripts. </blockquote><br>  Cada espada exigir√° sua pr√≥pria implementa√ß√£o exclusiva do objeto de script <em>SwordData</em> .  Por√©m, antes de podermos criar essas implementa√ß√µes, precisamos adicionar um Objeto Scriptable ao Menu de Ativos. <br><br>  Adicione nosso objeto grav√°vel ao menu de ativos adicionando o seguinte atributo √† classe <em>SwordData</em> : <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CreateAssetMenu(fileName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"New SwordData"</span></span></span><span class="hljs-meta">, menuName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Sword Data"</span></span></span><span class="hljs-meta">, order = 51)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span></code> </pre> <br><ul><li>  <em>fileName</em> : nome padr√£o ao criar ativo. </li><li>  <em>menuName</em> : nome do <em>ativo</em> exibido no menu Asset. </li><li>  <em>ordem</em> : posicionamento do ativo no menu ativo.  A unidade divide os ativos em subgrupos com um fator de 50. Ou seja, um valor de 51 coloca o novo ativo no segundo grupo do menu de ativos. </li></ul><br>  Se tudo for feito corretamente, voc√™ poder√° ir para <em>Ativos &gt;&gt; Criar</em> e ver o novo ativo <em>Sword Data</em> no menu.  Ele deve estar localizado no segundo grupo no recurso Pasta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/027/83d/d78/02783dd7809273371aeaf0fde21cbb07.png"></div><br>  Voc√™ tamb√©m pode clicar com o bot√£o direito do mouse na janela Projeto e tamb√©m ver o novo ativo Sword Data: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec8/f0c/1cf/ec8f0c1cf7b7b861517c0b6838d9c80c.png"></div><br><h3>  Adicionando dados </h3><br>  <em>Organizaremos o</em> projeto criando uma pasta chamada <em>Objetos grav√°veis</em> na pasta Scripts e, dentro dessa pasta, outra pasta chamada <em>Dados da espada</em> . <br><br>  Dentro da rec√©m criada pasta Sword Data, crie nosso primeiro ativo Sword Data. <br><br>  O novo recurso Sword Data ainda deve ter o nome padr√£o especificado anteriormente <em>fileName</em> .  Selecione um ativo e duplique seis vezes ( <i>Ctrl / Cmd + D</i> ) para criar sete ativos de Sword Data, um para cada uma das espadas.  Agora renomeie cada ativo de acordo com os prefabs: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e6/953/191/9e69531917c13064e6af81b31b58fdf7.gif"></div><br>  Clique no primeiro ativo Sword Data na pasta Sword Data e veja a janela <em>Inspector</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af3/380/b20/af3380b20efd5dc0a7485f4f3c7c971a.png"></div><br>  Aqui vemos um ativo no qual as informa√ß√µes sobre uma espada espec√≠fica ser√£o armazenadas.  Preencha as informa√ß√µes para cada espada.  Tente dar a eles uma descri√ß√£o √∫nica, valor em ouro e dano durante um ataque.  No campo Icon Sprite, use os sprites correspondentes localizados na pasta <em>Sword Icons</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b48/d31/025/b48d3102517ad8e0f0877dd6cc28faff.gif"></div><br>  Parab√©ns!  Voc√™ criou um objeto program√°vel e configurou v√°rios ativos com esse objeto program√°vel. <br><br><h2>  Usando objeto grav√°vel </h2><br>  Agora come√ßaremos a obter dados desses objetos program√°veis. <br><br>  Primeiro, precisamos adicionar alguns m√©todos getter p√∫blicos para que outros scripts possam acessar campos privados dentro do objeto program√°vel.  Abra <em>SwordData.cs</em> e adicione o seguinte nos campos adicionados anteriormente: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SwordName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> swordName; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Sprite Icon { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> icon; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GoldCost { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> goldCost; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> AttackDamage { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> attackDamage; } }</code> </pre> <br>  Abra o <em>Sword.cs</em> e adicione o seguinte c√≥digo: <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SwordData swordData; <span class="hljs-comment"><span class="hljs-comment">// 1 private void OnMouseDown() // 2 { Debug.Log(swordData.name); // 3 Debug.Log(swordData.Description); // 3 Debug.Log(swordData.Icon.name); // 3 Debug.Log(swordData.GoldCost); // 3 Debug.Log(swordData.AttackDamage); // 3 }</span></span></code> </pre> <br>  Aqui est√° o que adicionamos com este c√≥digo: <br><br><ol><li>  O cont√™iner de dados para os dados desta espada. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OnMouseDown</a> √© uma fun√ß√£o MonoBehaviour interna chamada quando o usu√°rio pressiona o bot√£o esquerdo do mouse. </li><li>  Exemplos de como obter dados do nosso recurso Objeto de Script </li></ol><br>  Volte para o Unity e v√° para a janela <em>Hierarquia</em> .  Selecione o objeto do jogo 1_Longsword no prefab da espada.  Adicione o ativo 1_Longsword Data apropriado √† vari√°vel Sword Data do script Sword.cs na janela Inspetor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89d/dca/502/89ddca5023e919e838d92da776ca4e20.png"></div><br>  Clique em Reproduzir ( <i>Ctrl / Cmd + P</i> ) no editor do Unity e, em seguida, clique na espada mais √† esquerda: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8f/2e0/336/c8f2e0336b61da17786068f13a5e787b.png"></div><br>  O console deve exibir informa√ß√µes semelhantes aos dados transferidos do ativo Sword Data. <br><br>  Objetos grav√°veis ‚Äã‚Äãfacilitam a substitui√ß√£o desses dados.  Tente inserir diferentes objetos de script da Sword Data no campo Sword Data da espada. <br><br><h2>  Objetos grav√°veis ‚Äã‚Äãde eventos </h2><br>  Ent√£o, criamos um Objeto Script√°vel e voc√™ viu como pode acessar seus dados dentro do jogo.  Mas ainda precisamos integrar o Sword Data √† interface do usu√°rio! <br><br>  Voc√™ pode usar o padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Singleton</a> r√°pido e sujo para isso.  No entanto, agora temos outras possibilidades ... <br><br>  ... ou seja, Objetos Scriptable!  Vamos us√°-los para criar um c√≥digo limpo e bem dividido. <br><br>  Nesta se√ß√£o, voc√™ aprender√° como criar eventos de jogos usando a classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UnityEvent</a> . <br><br><h3>  Eventos do Jogo e Ouvintes </h3><br>  Na pasta Scripts, crie dois scripts: <em>GameEvent.cs</em> e <em>GameEventListener.cs</em> .  Eles dependem um do outro, portanto, para se livrar dos erros, √© necess√°rio criar os dois. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"New Game Event"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Game Event"</span></span>, order = <span class="hljs-number"><span class="hljs-number">52</span></span>)] <span class="hljs-comment"><span class="hljs-comment">// 1 public class GameEvent : ScriptableObject // 2 { private List&lt;GameEventListener&gt; listeners = new List&lt;GameEventListener&gt;(); // 3 public void Raise() // 4 { for (int i = listeners.Count - 1; i &gt;= 0; i--) // 5 { listeners[i].OnEventRaised(); // 6 } } public void RegisterListener(GameEventListener listener) // 7 { listeners.Add(listener); } public void UnregisterListener(GameEventListener listener) // 8 { listeners.Remove(listener); } }</span></span></code> </pre> <br>  Aqui est√° o que o c√≥digo acima faz: <br><br><ol><li>  Adiciona um GameEvent como um ativo ao Menu de ativos. </li><li>  GameEvent √© um Objeto Scriptable, portanto, ele deve herdar de ScriptableObject. </li><li>  Lista de GameEventListeners a serem inscritos no GameEvent. </li><li>  M√©todo para chamar todos os assinantes do GameEvent. </li><li>  O √∫ltimo GameEventListener assinado ser√° o primeiro a ser chamado (√∫ltimo a chegar, primeiro a sair). </li><li>  Ligue para cada UnityEvent GameEventListeners. </li><li>  Um m√©todo que permite que GameEventListeners se inscreva neste GameEvent. </li><li>  Um m√©todo que permite que GameEventListeners cancele a inscri√ß√£o neste GameEvent. </li></ol><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events; <span class="hljs-comment"><span class="hljs-comment">// 1 public class GameEventListener : MonoBehaviour { [SerializeField] private GameEvent gameEvent; // 2 [SerializeField] private UnityEvent response; // 3 private void OnEnable() // 4 { gameEvent.RegisterListener(this); } private void OnDisable() // 5 { gameEvent.UnregisterListener(this); } public void OnEventRaised() // 6 { response.Invoke(); } }</span></span></code> </pre> <br>  No c√≥digo mostrado acima, o projeto continua a desenvolver: <br><br><ol><li>  Requisito para usar a classe UnityEvent. </li><li>  O GameEvent ao qual este GameEventListener se inscrever√°. </li><li>  A resposta UnityEvent que ser√° gerada quando o evento GameEvent lan√ßa este GameEventListener. </li><li>  Vinculando um GameEvent a um GameEventListener quando este GameObject est√° ativado. </li><li>  Vinculando um GameEvent de um GameEventListener quando este GameObject est√° desabilitado. </li><li>  Chamado quando um GameEvent √© gerado que faz com que o GameEventListener chame o evento UnityEvent. </li></ol><br>  Isso √© dif√≠cil?  Nada, voc√™ descobrir√° com o tempo! <br><br><h3>  Treinamento do Editor </h3><br>  Volte ao editor do Unity e crie uma nova pasta de <em>eventos do jogo</em> em Scripts &gt;&gt; ScriptableObjects.  Em seguida, crie sete Eventos do jogo no menu Asset, como fizemos para cada ativo Sword Data.  Coloque-os na nova pasta Game Events. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/055/47b/22a/05547b22a285c4be816e03839eeead05.png"></div><br>  Substitua o c√≥digo dentro do script <em>Sword.cs pelas</em> seguintes linhas: <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameEvent OnSwordSelected; <span class="hljs-comment"><span class="hljs-comment">// 1 private void OnMouseDown() { OnSwordSelected.Raise(); // 2 }</span></span></code> </pre> <br>  Este c√≥digo adiciona duas possibilidades √† loja do comerciante de espadas: <br><br><ol><li>  Gera√ß√£o de Evento de Jogo ao escolher uma espada. </li><li>  Gera√ß√£o de eventos quando voc√™ clica na espada. </li></ol><br>  Salve o script.  Agora, em cada Hierarchy GameObject da espada, conecte o evento OnSwordSelected correspondente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ac/f02/acd/9acf02acd43968a370dd2208793919fe.gif"></div><br>  Agora, cada espada tem um link para o evento que √© acionado quando a espada √© clicada. <br><br><h2>  Integra√ß√£o de UI </h2><br>  Agora voc√™ precisa fazer a interface do usu√°rio funcionar.  Nosso objetivo √© exibir os dados correspondentes da espada ao clicar em cada espada. <br><br><h3>  Links da interface do usu√°rio </h3><br>  Antes de atualizar a interface do usu√°rio, voc√™ deve obter um link para cada elemento da interface do usu√°rio.  Vamos come√ßar criando um novo script chamado <em>SwordMerchant.cs</em> e adicionando o seguinte c√≥digo a esse novo script: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordMerchant</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Text swordName; <span class="hljs-comment"><span class="hljs-comment">// 1 [SerializeField] private Text description; // 2 [SerializeField] private Image icon; // 3 [SerializeField] private Text goldCost; // 4 [SerializeField] private Text attackDamage; // 5 }</span></span></code> </pre> <br>  Usando esse c√≥digo, adicionamos o seguinte: <br><br><ol><li>  Uma refer√™ncia ao componente de texto do objeto de jogo <em>NameText</em> . </li><li>  Link para o componente de texto do objeto de jogo <em>DescriptionText</em> . </li><li>  Link para o componente Image do objeto de jogo <em>Sword_Icon</em> . </li><li>  Link para o componente de texto do objeto de jogo <em>GoldText</em> . </li><li>  Um link para o componente Texto do objeto de jogo <em>AttackText</em> . </li></ol><br>  Os objetos do jogo acima est√£o localizados no <em>SwordMerchantCanvas &gt;&gt; SwordMerchantPanel da</em> janela Hierarquia.  Adicione o script ao <em>GameObject SwordMerchantCanvas</em> e configure todos os links: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2b/a6f/294/f2ba6f2948bc57b02efa9a1a925453e8.png"></div><br><h3>  Ouvintes e respostas da interface do usu√°rio </h3><br>  Todas as espadas t√™m um evento no qual a interface do usu√°rio pode se inscrever usando o script <em>GameEventListener</em> .  Adicione um <em>GameEventListener</em> para cada evento OnSwordSelected a <em>GameObject SwordMerchantCanvas</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/51c/3ea/618/51c3ea618cb29226356febe1ff1aa8c1.gif"></div><br>  Como voc√™ pode ver, o nosso Event Event Listener tem dois campos: o evento do Event Game que ele escuta e a resposta que √© gerada quando o Event Game √© gerado. <br><br>  No nosso caso, a resposta ser√° atualizada pela interface do usu√°rio.  Adicione o seguinte m√©todo ao script <em>SwordMerchant.cs</em> : <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateDisplayUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SwordData swordData</span></span></span><span class="hljs-function">)</span></span> { swordName.text = swordData.SwordName; description.text = swordData.Description; icon.sprite = swordData.Icon; goldCost.text = swordData.GoldCost.ToString(); attackDamage.text = swordData.AttackDamage.ToString(); }</code> </pre> <br>  Este m√©todo recebe um ativo Sword Data e atualiza cada campo da interface do usu√°rio com o valor do campo Sword Data correspondente.  Observe que <em>GoldCost</em> e <em>AttackDamage</em> retornam um <code>int</code> , ent√£o voc√™ precisa convert√™-lo em string para texto. <br><br>  Usando nosso novo m√©todo, podemos adicionar uma resposta a cada <em>GameEventListener</em> . <br><br>  Para cada resposta adicionada, voc√™ precisa de um link para nosso objeto de jogo <em>SwordMerchantCanvas</em> como o valor do campo <em>Nenhum (Objeto)</em> .  Depois disso, selecione <em>SwordMerchant.UpdateDisplayUI</em> no menu suspenso √† direita da lista suspensa <em>Apenas tempo</em> de <em>execu√ß√£o</em> . <br><br>  Tenha cuidado e use o ativo Sword Data correto para todos os eventos <em>OnSwordSelected</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4d/ce8/e05/d4dce8e052a2440f4495a94dec1fc47d.png"></div><br>  Agora podemos come√ßar o jogo, clique na espada e veja se a interface do usu√°rio √© atualizada de acordo! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/365/357/ddb365357b74dc1e5d86d337d90c8398.gif"></div><br>  Como usamos os Game Events, voc√™ pode simplesmente <em>SwordMerchantCanvas</em> , e tudo continuar√° funcionando, apenas sem uma interface do usu√°rio.  Isso significa que os <em>prefabs</em> da espada s√£o separados dos <em>SwordMerchantCanvas</em> . <br><br><h2>  Para onde ir a seguir? </h2><br>  Se voc√™ perdeu alguma coisa durante a hist√≥ria, pode <a href="">fazer o download do projeto final</a> , que est√° nos materiais do tutorial. <br><br>  Se voc√™ quiser seguir em frente, tente fazer com que cada espada reproduza seu pr√≥prio som.  Tente expandir os Dados da Espada de Objetos <code>OnSwordSelected</code> e escute os eventos <code>OnSwordSelected</code> . <br><br>  Deseja saber mais sobre o Unity?  Confira nossa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">s√©rie de v√≠deos do</a> Unity ou leia os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutoriais do Unity</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt421523/">https://habr.com/ru/post/pt421523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt421505/index.html">Mini hacks de vida para trabalhar com o Yandex.Direct</a></li>
<li><a href="../pt421507/index.html">Quais foram os soldadores para √≥ptica</a></li>
<li><a href="../pt421513/index.html">Introdu√ß√£o suave ao scrum pelos pr√≥prios desenvolvedores (resolvemos as contradi√ß√µes, montamos a equipe, evitamos conflitos)</a></li>
<li><a href="../pt421519/index.html">O livro "Apache Kafka. Processamento de fluxo e an√°lise de dados ‚Äù</a></li>
<li><a href="../pt421521/index.html">Monstros ap√≥s as f√©rias: AMD Threadripper 2990WX 32-Core e 2950X 16-Core (parte 3 - testes)</a></li>
<li><a href="../pt421525/index.html">Um pouco sobre as diferen√ßas entre hosters russos e estrangeiros</a></li>
<li><a href="../pt421527/index.html">Lan√ßamento da transmiss√£o do projeto "Servidor nas nuvens"</a></li>
<li><a href="../pt421529/index.html">Netflix, Uber, Google e voc√™ no MBLT DEV 2018</a></li>
<li><a href="../pt421531/index.html">Como integrar o ReactJS ao 1C-Bitrix com gera√ß√£o autom√°tica de modelos no back-end usando o exemplo da rede Globus</a></li>
<li><a href="../pt421533/index.html">Escolhendo uma linguagem de programa√ß√£o: 3 dicas de um programador da Apple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>