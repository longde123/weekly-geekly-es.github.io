<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🌾 🧚🏻 🏫 Angular cli 6: por que você precisa e como usá-lo 🔼 👈🏼 📈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá pessoal! 

 A versão angular 2.0.0 foi lançada em setembro de 2016. E imediatamente um grande número de abordagens para a criação e criação de apl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Angular cli 6: por que você precisa e como usá-lo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/netcracker/blog/413543/"><img src="https://habrastorage.org/webt/bf/va/gx/bfvagxbnlceaqkqslf11prttltg.jpeg" width="400"><br><br>  Olá pessoal! <br><br>  A versão angular 2.0.0 foi lançada em setembro de 2016. E imediatamente um grande número de abordagens para a criação e criação de aplicativos nessa estrutura apareceu.  Na Internet, você pode encontrar sementes angulares para todos os gostos. <br><br>  Também criamos nossa própria semente Angular: criamos um modelo de projeto comum, obrigando todas as equipes que desenvolvem o front-end a usar a mesma estrutura de aplicativo. <br><br>  Seis meses depois, em março de 2017, a versão angular cli (cli - interface da linha de comandos) 1.0.0 foi lançada.  A ideia, tomada como base, é simplesmente excelente: sistematizar a abordagem para o desenvolvimento de aplicativos no Angular 2+.  Padronize a estrutura do aplicativo, crie entidades dentro do aplicativo e automatize a montagem do aplicativo.  Essas tarefas podem ser resolvidas pelo Angular CLI, economizando significativamente seu tempo. <br><br>  No artigo, mostrarei como atualizar para o <b>Angular cli 6</b> <br><a name="habracut"></a><br>  O desenvolvimento com uma estrutura de projeto personalizada possui algumas vantagens: <br><br><ul><li>  controle total sobre o aplicativo; </li><li>  a capacidade de configurar webpack / gulp / tudo o mais, levando em consideração todos os recursos do seu aplicativo. </li></ul><br>  Há também desvantagens: <br><br><ul><li>  se houver vários projetos, é necessário garantir que sua estrutura seja idêntica; </li><li>  é necessário monitorar as atualizações dos módulos e bibliotecas npm usados ​​(Angular e Webpack, por exemplo, estão se desenvolvendo muito dinamicamente); </li><li> você terá que lidar com a integração de módulos npm e configurar o ambiente para trabalhar com Angular, conectar substituição de módulo quente (HMR), usar o conjunto Ahead-of-Time (AOT). </li></ul><br>  Existem várias maneiras de corrigir as deficiências, uma das quais é criar um <i>modelo de projeto</i> comum.  Destaque um desenvolvedor que o atualizaria de tempos em tempos.  Obrigar todas as equipes front-end a usar a mesma estrutura de aplicativo, aplicando as melhores práticas de desenvolvimento em sua estrutura.  Neste exemplo, essa estrutura será <i>Angular</i> e o aplicativo será baseado em <i>angular-cli</i> . <br><br>  No momento em que escrevi, a sexta versão com integração ao webpack 4. foi lançada com muitas informações sobre inovações, mencionarei apenas algumas melhorias: <br><br><ul><li>  criação automática de uma biblioteca de componentes; </li><li>  a aparência do ng-update, que facilita ainda mais o suporte a projetos no Angular cli; </li><li>  integração com o webpack 4 e, portanto, um tamanho menor dos pacotes finais, uma aceleração significativa do tempo de montagem etc. Você pode ver a lista completa de atualizações <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ; </li><li>  Configuração flexível do angular cli usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esquema</a> . </li></ul><br>  Devo dizer que na sexta versão do CLI angular existem muitos bugs.  Vou contar sobre alguns deles.  Alguns deles estão relacionados ao CLI angular, outros ao webpack 4. Por exemplo, alguns carregadores populares (carregadores de webpack) atualmente não suportam a quarta versão do coletor.  Estou certo de que são dificuldades temporárias. <br><br>  Deve-se notar que a funcionalidade cli angular pronta para o uso é suficiente, na minha opinião, para resolver 95% das tarefas de um aplicativo padrão.  Se você tiver a sorte de modificar os 5% restantes, não se preocupe - você pode configurar o CLI angular para o seu projeto.  No entanto, na sexta versão da estrutura, o recurso de ejeção de ng, que permite obter o webpack.config, está temporariamente desabilitado, então você precisa quebrar um pouco a cabeça. <br><br><h4>  Preparando a transição </h4><br><ol><li>  Instale a versão do <i>node.js</i> &gt; = 8.9 </li><li>  <i>Executamos npm i –g <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">angular</a> / cli</i> (instalamos globalmente angular-cli para executar comandos no console usando ng). </li><li>  Vamos para o diretório com o projeto e executamos o <i>novo &lt;nome do seu projeto&gt;</i> (vamos chamar o projeto: angular-cli-project, exemplo de comando: <i>ng new angular-cli-project</i> - uma pasta chamada angular-cli-project aparecerá no diretório atual). </li></ol><br>  O resultado da preparação: <br><br><img src="https://habrastorage.org/webt/f1/lq/k6/f1lqk65odoehhdnttxqpgj-cleo.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Leia mais sobre a estrutura do projeto no Angular CLI e não apenas.</a> <br><br>  A seguir, faremos as configurações básicas para um desenvolvimento confortável. <br><br><h3>  Configuração do CLI </h3><br>  1) <b>Conectamos o HMR</b> (aplicamos alterações no código sem recarregar a página) de acordo com o <a href="">guia</a> .  Também no <i>package.json</i> adicione <i>hmr</i> aos scripts e ao sinalizador <i>--open para</i> que não abramos a página de origem no navegador: <br><br><img src="https://habrastorage.org/webt/tq/bd/s2/tqbds2nqlwwqntkgwtucinuh2vs.png"><br><br>  No momento da redação do artigo em A6 cli, ao configurar o HMR através do guia mencionado acima, você pode encontrar os seguintes erros: <br><br>  a) Ao conectar a configuração do HMR em angular.json <br><br><pre><code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"configurations"</span></span>: { <span class="hljs-string"><span class="hljs-string">"hmr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"hmr"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"fileReplacements"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/environments/environment.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"replaceWith"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/environments/environment.hmr.ts"</span></span> }] }, …</code> </pre> <br>  Desculpe, você recebe um erro: <br>  <i>“A validação do esquema falhou com os seguintes erros:</i> <i><br></i>  <i>O caminho de dados "" NÃO deve ter propriedades adicionais (fileReplacements) ".</i> <br><br>  Para corrigi-lo, faça o seguinte: <br><br><pre> <code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"configurations"</span></span>: { <span class="hljs-string"><span class="hljs-string">"hmr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"hmr"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"browserTarget"</span></span>: <span class="hljs-string"><span class="hljs-string">"angular-cli-project:build:hmr"</span></span> }, …</code> </pre><br>  A diferença é que você deve especificar <i>“browserTarget”: “angular-cli-project: build: hmr”</i> , em que o valor da propriedade <i>browserTarget</i> consiste em <i>&lt;project-name&gt;: build: hmr</i> . <br><br>  Além disso, a substituição do <i>ambiente HMR</i> deve ser feita não no <i>serviço</i> , mas no <i>arquiteto / build</i> : <br><br><pre> <code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"architect"</span></span>: { <span class="hljs-string"><span class="hljs-string">"build"</span></span>: { … <span class="hljs-string"><span class="hljs-string">"configurations"</span></span>: { <span class="hljs-string"><span class="hljs-string">"hmr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"fileReplacements"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/environments/environment.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"replaceWith"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/environments/environment.hmr.ts"</span></span> } ] }, …</code> </pre><br>  b) <i>Erro de</i> erro <i>no src / main.ts: Não é possível encontrar o nome 'module' é</i> corrigido da seguinte forma: no <i>tsconfig.app.json, excluímos</i> a linha <i>“types”: []</i> . <br><br>  2. <b>Conecte o pré</b> - <b>processador</b> : <br><br>  Em angular.json, adicione: <br><br><pre> <code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"projects"</span></span>: { … <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"schematics"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@schematics/angular:component"</span></span>: { <span class="hljs-string"><span class="hljs-string">"styleext"</span></span>: <span class="hljs-string"><span class="hljs-string">"less"</span></span> } } …</code> </pre><br>  Se seus estilos estiverem na pasta <i>assets</i> e forem combinados por importações em base.less ou scss, e a saída precisar de um arquivo .css, adicione <i>"extractCss": true</i> ao <i>angular.json</i> : <br><br><img src="https://habrastorage.org/webt/5f/0w/jf/5f0wjffu244tibhe5swcm9o2cya.png"><br><br>  Também no momento, no modo HMR, a atualização em menos arquivos globais importados por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">importação</a> não funcionará.  Para contornar esse problema, instale temporariamente <i>less-loader@3.0.0</i> . <br><br>  3. <b>Conectamos o <i>autoprefixer</i></b> .  Especifique quais navegadores requerem prefixos em <i>package.json</i> : <br><br><pre> <code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"browserslist"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"last 2 versions"</span></span>, <span class="hljs-string"><span class="hljs-string">"IE 10"</span></span>, <span class="hljs-string"><span class="hljs-string">"IE 11"</span></span> ], …</code> </pre><br>  4. <b>Adicione o processamento de ícones</b> usando <i>gulp e svgstore</i> , especialmente desde que finalmente saiu o <i>gulp da</i> quarta versão.  Execute <i>npm i gulp@4.0.0 gulp-inject gulp-renomeie gulp-svgmin gulp-svgstore --SD</i> e crie um pequeno <i>Gulpfile.js</i> (consulte o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo final</a> ). <br><br>  Não vamos nos debruçar sobre <i>Gulp</i> em detalhes - todas as perguntas, por favor, no comentário. <br><br>  Especifique na notação <i>index.html</i> para inserir SVG: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height: 0; width: 0; overflow: hidden; opacity: 0;position: absolute; top: 0;left: 0;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- inject:svg --&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- endinject --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Modifique o <i>package.json</i> incluindo a <i>tarefa SVG</i> : <br><br><pre> <code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { ... <span class="hljs-string"><span class="hljs-string">"svg"</span></span>: <span class="hljs-string"><span class="hljs-string">"gulp svg"</span></span>, ... …</code> </pre><br>  Agora podemos usar SVG em nossos modelos como este: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">use</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'#icon-check'</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  5) <b>Instale o webpack-bundle-analyzer</b> <br><br>  <i>Executando o</i> comando: <i>npm i webpack-bundle-analyzer –-SD</i> . <br><br>  Em <i>angular.json,</i> adicione <i>"statsJson": true</i> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"architect"</span></span>: { <span class="hljs-string"><span class="hljs-string">"build"</span></span>: { <span class="hljs-string"><span class="hljs-string">"builder"</span></span>: <span class="hljs-string"><span class="hljs-string">"@angular-devkit/build-angular:browser"</span></span>, <span class="hljs-string"><span class="hljs-string">"options"</span></span>: { ... <span class="hljs-string"><span class="hljs-string">"statsJson"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ...</code> </pre><br>  Agora podemos ver em que nosso pacote realmente consiste.  Para automatizar isso de alguma forma, adicione o script de <i>relatório</i> ao <i>package.json</i> : <br><br><pre> <code class="javascript hljs">… <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { ... <span class="hljs-string"><span class="hljs-string">"report"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack-bundle-analyzer dist/stats.json"</span></span> ... …</code> </pre><br>  Um exemplo de uso do webpack-bundle-analyzer: <br><br><img src="https://habrastorage.org/webt/up/md/p0/upmdp02genf1ghyd82xc5jkonay.png"><br><br>  A configuração da funcionalidade básica está concluída. <br><br>  Agora abra nosso aplicativo angular personalizado e copie os módulos, imagens, estilos etc. para o modelo preparado.  Copiarei tudo do rascunho final do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> . <br><br>  <i>Executamos o</i> comando: <i>npm run hmr</i> e obtemos alguns erros do rxjs, que migrou da quinta para a sexta versão.  O próximo <a href="">guia</a> ajudará a <a href="">corrigi-los</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A aplicação final</a> . <br><br>  <i>Executamos</i> o comando: <i>npm run build</i> e obtemos o resultado: <br><br><img src="https://habrastorage.org/webt/p9/f5/tu/p9f5tuoyuwkftcdaz0iw-3wcd3a.png"><br><br>  PS Como você pode ver, o tamanho do pacote ainda é grande o suficiente, no entanto, inclui roteamento, rxjs, etc. No entanto, a equipe Angular anunciou um novo mecanismo de renderização Ivy e o tamanho do aplicativo olá mundo de 2,7 Kb.  Ansioso por isso. <br><br>  Obrigado pela atenção. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt413543/">https://habr.com/ru/post/pt413543/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt413525/index.html">Ensine-me a entrevistar</a></li>
<li><a href="../pt413527/index.html">Três variantes da palavra "esconder" em inglês e outras séries sinônimas</a></li>
<li><a href="../pt413529/index.html">Por que os novos dispositivos i-SENSYS podem ser chamados de revolucionários</a></li>
<li><a href="../pt413531/index.html">O livro "Unidade para o desenvolvedor. Jogos multiplataforma para celular »</a></li>
<li><a href="../pt413539/index.html">Um controlador simples baseado em lógica difusa. Criação e customização</a></li>
<li><a href="../pt413545/index.html">Humor na marca - por que nem sempre é bom</a></li>
<li><a href="../pt413547/index.html">Experimente 2 milhões de sessões sem cabeça</a></li>
<li><a href="../pt413549/index.html">Curso de Desenvolvimento Web</a></li>
<li><a href="../pt413551/index.html">Rolagem e atenção (estudo de 2018)</a></li>
<li><a href="../pt413553/index.html">O registrador REG.RU privou o parceiro de acesso a 70 mil domínios e levou o serviço para si</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>