<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòñ üíÆ üçõ ORM: por que essa tarefa n√£o tem solu√ß√£o, mas com rela√ß√£o a ela, no entanto, algo precisa ser üöë üßôüèª ü§∑üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As modernas tecnologias da informa√ß√£o surpreendem com seu poder, s√£o oprimidas pelas oportunidades que se abrem, s√£o desencorajadas pela perfei√ß√£o t√©c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ORM: por que essa tarefa n√£o tem solu√ß√£o, mas com rela√ß√£o a ela, no entanto, algo precisa ser</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458286/"><img src="https://habrastorage.org/webt/ih/bm/-r/ihbm-rqpvgk6lhwhg43njjt3i3c.jpeg"><br><br>  As modernas tecnologias da informa√ß√£o surpreendem com seu poder, s√£o oprimidas pelas oportunidades que se abrem, s√£o desencorajadas pela perfei√ß√£o t√©cnica inerente a elas, mas h√° um ponto rid√≠culo sobre o qual a TI quebra os dentes de novo e de novo.  Mostre os dados do usu√°rio no banco de dados, obtenha informa√ß√µes dele, coloque-os novamente no banco de dados, mostre o resultado.  Campos de entrada, bot√µes, marcas de sele√ß√£o, inscri√ß√µes - parece que eles podem ser t√£o proibitivamente dif√≠ceis de exigir constru√ß√µes intrigantes, como estruturas em cima de mecanismos de modelo em cima de estruturas em cima de transpilers?  E por que, apesar de todos os tremendos esfor√ßos, temos o fato de que os exemplos de brinquedos no tutorial s√£o feitos de maneira f√°cil e agrad√°vel, mas assim que o kit de ferramentas encontra as tarefas reais da vida real ... como dizer mais suave ... com a crescente complexidade das tarefas a serem resolvidas, h√° uma forte n√£o linearidade de aumento dificuldades de implementa√ß√£o.  Bem, seria uma quest√£o de algo realmente intrigante no n√≠vel da f√≠sica te√≥rica ou da tecnologia espacial, porque n√£o existe mesmo - bot√µes e marcas de verifica√ß√£o.  Por que esse absurdo continua envenenando a vida dos cidad√£os e trabalhando coletivos por d√©cadas? <br><br>  As raz√µes, provavelmente, como sempre, s√£o muitas.  Provavelmente, todos eles s√£o dignos de considera√ß√£o de uma maneira ou de outra, mas aqui e agora falaremos sobre a tarefa Mapeamento Objeto-Relacional (ORM), que sempre est√° por tr√°s de alguns desses "bot√µes e marcas de verifica√ß√£o" de alguma forma. <br><a name="habracut"></a><br><h4>  O que sabemos sobre ORM </h4><br><ol><li>  Armazenar dados em tabelas relacionais n√£o significa dizer que √© uma quest√£o muito simples, mas, em geral, a id√©ia e os modos de sua aplica√ß√£o s√£o bastante claros e bem pesquisados. </li><li>  Com a programa√ß√£o de objetos, nem tudo √© t√£o bom (existem v√°rias abordagens concorrentes), mas, em geral, com a implementa√ß√£o e aplica√ß√£o de tecnologias, tudo tamb√©m √© mais ou menos claro. </li><li>  Tanto isso quanto outro - sobre os dados, seu armazenamento e processamento.  Isso √©, de fato, a mesma coisa. </li><li>  Parece-nos l√≥gico que deve haver uma ponte simples, compreens√≠vel, conveniente, previs√≠vel e universal entre os dois mundos. </li><li>  E sempre que encontramos essa ponte com facilidade, mas o infort√∫nio, sua simplicidade, compreensibilidade, conveni√™ncia, previsibilidade e universalidade n√£o funcionam al√©m de exemplos simples de tutoriais. </li><li>  Todo mundo sofre: os desenvolvedores, que precisam fazer um trabalho extremamente chato, e os usu√°rios, que precisam lutar com software desajeitado e com os neg√≥cios, cuja realiza√ß√£o de repente se torna insuportavelmente longa e cara, e a ind√∫stria como um todo. </li><li>  Eu j√° vi muitos ORMs diferentes, mas n√£o vi nenhum bom.  Isto √©, que, al√©m de exemplos simples, n√£o se transforma em um fardo e num leito procrustino. </li></ol><br><h4>  Por que tudo √© t√£o bizarro </h4><br>  A base ideol√≥gica da teoria e pr√°tica dos bancos de dados relacionais √© o c√°lculo predicado, ou seja, um ramo da matem√°tica.  Quanto √† POO, falta uma base ideol√≥gica semelhante.  Pode-se tentar formular a id√©ia b√°sica de OOP assim: como o mundo consiste em objetos, seria conveniente model√°-lo neste mundo criando objetos dentro de um sistema de software.  Nesse sentido, dois erros ao mesmo tempo.  Em primeiro lugar, o pr√≥prio mundo n√£o consiste e nunca consistiu em objetos.  Em segundo lugar, desculpe, mas por que o programa precisa simular o mundo?  Ou seja, temos uma afirma√ß√£o conceitualmente incorreta, perfeitamente complementada por uma afirma√ß√£o sem sentido do problema. <br><br>  Todo ORM √© uma tentativa de esticar claramente a correspond√™ncia unificada entre, de fato, o ramo da matem√°tica e um conjunto amplo de pr√°ticas diversas, com base em considera√ß√µes de conveni√™ncia, abordagens estabelecidas historicamente e tamb√©m frequentemente em lendas, opini√µes de autoridades e simplesmente conceitos err√¥neos.  In vitro, pode ser feito funcionar, mas in vivo est√° fadado a parecer pat√©tico e trazer mais tristeza do que alegria. <br><br><h4>  Sobre a inevitabilidade da orienta√ß√£o a objetos </h4><br>  No entanto, a necessidade da orienta√ß√£o a objetos do nosso software √© nossa realidade inevit√°vel.  Essa inevitabilidade √© baseada principalmente no fato de que operar com objetos √© a ess√™ncia e o fundamento de qualquer uma de nossas atividades.  O mundo em si n√£o consiste em objetos, mas para entender algo neste mundo e fazer algo com este mundo, n√≥s mesmos declaramos suas partes como objetos, os chamamos de nomes, tentamos entender seu comportamento, aplicamos a eles. esfor√ßos para obter os resultados desejados.  Esta √© a nossa maneira de funcionar, e √© imposs√≠vel deix√°-la, e n√£o √© necess√°ria.  Tudo √© um objeto, n√£o porque realmente √©, mas porque n√£o podemos fazer o contr√°rio.  Aquilo que de maneira alguma pode ser um objeto est√° completamente fora dos limites de nossa capacidade de compreender e n√£o pode servir como sujeito de nossos esfor√ßos. <br><br>  Mesmo que o programa seja escrito sem o uso de t√©cnicas de POO, inevitavelmente cont√©m objetos (no sentido amplo da palavra), manipulando o que o desenvolvedor resolve seu problema - vari√°veis, tipos de dados, operadores, algoritmos, constru√ß√µes sint√°ticas, fun√ß√µes, m√≥dulos.  Do ponto de vista do usu√°rio, o programa tamb√©m possui um conjunto de objetos com os quais interage - bot√µes, r√≥tulos, campos de entrada, p√°ginas, sites e todo o sistema. <br><br><h4>  O que armazenamos em nossos bancos de dados </h4><br>  Como mencionado acima, os bancos de dados relacionais s√£o baseados no c√°lculo de predicado.  Um predicado √© um fato formulado e, no nosso caso, armazenado em um meio.  Apenas no caso, observo que o banco de dados relacional n√£o √© apenas e n√£o muito sobre relacionamentos entre tabelas por chaves estrangeiras.  Na terminologia adequada, as rela√ß√µes s√£o o que chamamos simplesmente de tabelas.  Ou seja, mesmo que seu banco de dados tenha apenas uma tabela com duas colunas (por exemplo, nome e n√∫mero de telefone), voc√™ j√° possui um banco de dados relacional que estabelece o relacionamento entre dois conjuntos, nesse caso, conjuntos de nomes e n√∫meros de telefone.  <i>Um banco de dados relacional n√£o armazena objetos, mas fatos.</i>  Os fatos armazenados, √© claro, t√™m um objeto ("sobre o que √© esse fato?"). E quando tentamos ensinar o sistema a responder a essa pergunta, temos entidades, ou seja, objetos aos quais os fatos est√£o associados.  Se voc√™ trabalha corretamente, a estrutura de nossa base nasce de uma s√©rie de respostas √† pergunta "que tipo de fatos pretendemos manter?". E somente no pr√≥ximo est√°gio obtemos algo que se assemelha a objetos que d√£o fatos √† objetividade.  Voc√™ pode, √© claro, projetar ‚Äúa partir de objetos‚Äù, mas eu n√£o recomendaria faz√™-lo, exceto no trabalho de laborat√≥rio em assuntos n√£o diretamente relacionados ao design do banco de dados.  O perigo de erros de c√°lculo arquiteturais pesados ‚Äã‚Äã√© muito grande.  Al√©m disso, √© pelo menos inconveniente. <br><br>  <b>Uma pequena digress√£o sobre bancos de dados de objetos.</b>  Um pensamento muito simples: se estamos cansados ‚Äã‚Äãde problemas com o ORM, talvez dev√™ssemos fazer algo com a parte que √© "R"?  Que nosso banco de dados n√£o seja um monstro relacional dif√≠cil e exigente, mas algo que seja uma juventude elegante, especialmente adaptada para o armazenamento de objetos.  Algum tipo de base esquem√°tica do NoSQL, por exemplo.  Mas no final, de repente, acontece que os ORMs semelhantes a NoSQL s√£o ainda mais estranhos e artificiais do que os bons e antigos SQL.  De qualquer forma, podemos ter e com prazer operar um DBMS sem circuito, mas n√£o existem dados sem circuito na natureza.  N√£o h√° nada mais indefeso, irrespons√°vel e imoral que o ORM para bancos de dados sem circuito. <br><br><h4>  Good ORM </h4><br>  Um bom ORM √© o ORM ausente.  Bem, s√©rio.  Olhe para qualquer um dos seus sistemas ORM e tente honestamente responder √† sua pergunta: quais s√£o os benef√≠cios desse monstro?  Qual o motivo do seu uso, exceto promessas n√£o cumpridas de felicidade e desacreditadas repetidamente preconceituosas?  Certamente, existem algumas coisas √∫teis √∫teis, mas quais s√£o elas no contexto das deforma√ß√µes arquitet√¥nicas introduzidas e dos problemas de desempenho que surgem constantemente do nada? <br><br>  Como regra, a API de banco de dados de "baixo n√≠vel" √© simples, conveniente, completa e consistente.  Normalmente, dedos suficientes para listar todos os recursos.  Aprend√™-los n√£o √© uma novidade divina, √© uma tarefa. <br><br>  Vou tentar esbo√ßar um conjunto de princ√≠pios de arquitetura que permitem mapear objetos para um banco de dados sem usar o ORM: <br><br><ol><li>  <i>Armazenamos os fatos, operamos em objetos.</i>  Lembre-se de que o banco de dados armazena fatos e os modelos de objetos envolvidos no processamento de dados s√£o proje√ß√µes de conjuntos de fatos sob diferentes pontos de vista.  Por exemplo, para o exemplo dado com nomes e n√∫meros de telefone, podemos ter a classe Abonent, para a qual v√°rios n√∫meros podem ser armazenados, e tamb√©m a classe PhoneNumber, para a qual v√°rios assinantes podem ser configurados (n√£o se esque√ßa que, al√©m dos n√∫meros m√≥veis pessoais, temos onde ainda existem telefones de apartamentos e escrit√≥rios).  E a tabela no banco de dados √© apenas uma que define a rela√ß√£o muitos-para-muitos entre muitos nomes e n√∫meros de telefone.  Apenas duas proje√ß√µes diferentes.  Essa abordagem, a prop√≥sito, normalmente √© dimensionada para casos muito mais complexos, permitindo que voc√™ tenha classes √∫teis no sistema como, por exemplo, "vendas m√©dias por um determinado per√≠odo, de acordo com uma combina√ß√£o de crit√©rios". </li><li>  <i>Os fatos s√£o projetados em objetos e vice-versa por meio de uma API orientada a problemas.</i>  Sem aplicar uma solu√ß√£o que afirma ser universal.  Se voc√™ ainda n√£o sabe como compor APIs convenientes, saiba como.  E importante, ensine-se a document√°-los imediatamente. </li><li>  <i>Encomende acima de tudo.</i>  Se voc√™ usar a vers√£o cl√°ssica de um DBMS com um esquema de dados r√≠gido, esse esquema em si trar√° ordem ao trabalho com dados.  A estrutura extra codificada pela estrutura dos objetos √© simplesmente redundante.  Se voc√™ usar um DBMS sem esquemas, √© claro que ter√° que fazer alguns esfor√ßos para garantir que seu banco de dados n√£o se transforme em uma montanha de lixo devido ao fato de que diferentes desenvolvedores t√™m id√©ias diferentes sobre o que √© armazenado. </li><li>  <i>Independ√™ncia do DBMS (se necess√°rio).</i>  Se a propriedade mais interessante do ORM para voc√™ √© a independ√™ncia do DBMS, use ferramentas especiais como ODBC, JDBC, ADO ou, se isso n√£o for poss√≠vel, fa√ßa seu pr√≥prio n√≠vel de abstra√ß√£o.  N√£o √© t√£o dif√≠cil quanto pode parecer √† primeira vista.  Voc√™ n√£o precisa de suporte para absolutamente todos os recursos de absolutamente todos os DBMS para sua tarefa, certo? </li><li>  <i>N√£o se esque√ßa dos aspectos adicionais do trabalho com dados.</i>  Por exemplo, compartilhamento de acesso a dados (que podem ser arbitrariamente complexos), monitoramento, replica√ß√£o e muito mais.  Mas aqui tenho boas not√≠cias para voc√™: porque no seu ORM favorito, o complemento.  o aspecto ainda √© implementado de acordo com o princ√≠pio "voc√™ n√£o vai agradar a todos, come o que d√°", a rejei√ß√£o de um servi√ßo duvidoso com o qual voc√™ precisa lutar mais do que cooperar acabar√° sendo uma decis√£o estrategicamente correta. </li></ol><br><h4>  Total </h4><br>  ORM √© um assunto muito dolorido para a nossa ind√∫stria.  Em uma √©poca em que a intelig√™ncia artificial da nuvem agrega o blockchain qu√¢ntico, a grande maioria da for√ßa de trabalho est√° ocupada mexendo na l√≥gica de neg√≥cios e na interface do usu√°rio com bancos de dados.  Milh√µes de linhas de c√≥digo terr√≠vel, pregadas com microsc√≥pios, dor e desespero em todos os lugares acompanham esse processo criativo.  Uma das ra√≠zes desse triste estado de coisas √© o equ√≠voco extremamente persistente de que um ORM universal √©, em princ√≠pio, poss√≠vel.  Mas √© imposs√≠vel, e h√° uma raz√£o fundamental para isso, que n√£o pode ser eliminada.  A conscientiza√ß√£o desse fato √© o primeiro passo para sair desse pesadelo.  Existe uma sa√≠da, existem alternativas, mas primeiro voc√™ precisa perceber, sentir e aprender a manter o foco da aten√ß√£o. <br><br>  PS Pe√ßo sinceras desculpas aos irm√£os da profiss√£o que investiram muito tempo e esfor√ßo na cria√ß√£o de numerosos melhores universais no mundo da ORM.  Eu sinto muito mesmo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458286/">https://habr.com/ru/post/pt458286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458272/index.html">Puxa! para viajantes - a hist√≥ria de um projeto dom√©stico</a></li>
<li><a href="../pt458276/index.html">A primeira simula√ß√£o do Universo baseada em IA foi desenvolvida. Uma rede neural faz seu trabalho t√£o bem que √© at√© estranho</a></li>
<li><a href="../pt458278/index.html">Como os hackers usam o Microsoft Excel contra si pr√≥prio</a></li>
<li><a href="../pt458280/index.html">Outro passo para o fim da Lei de Moore</a></li>
<li><a href="../pt458282/index.html">Antes do Netscape: navegadores esquecidos no in√≠cio dos anos 90</a></li>
<li><a href="../pt458288/index.html">Anton Belichkov: ‚ÄúA maneira mais f√°cil de entender o poder do OpenStreetMap √© come√ßar a editar o mapa voc√™ mesmo‚Äù</a></li>
<li><a href="../pt458290/index.html">Computador biossint√©tico de n√∫cleo duplo em uma c√©lula viva</a></li>
<li><a href="../pt458292/index.html">PHP Digest No. 159 (17 de junho a 1 de julho de 2019)</a></li>
<li><a href="../pt458298/index.html">Fez uma meia engrenagem grande em pain√©is solares por 250.000 rublos (2 partes)</a></li>
<li><a href="../pt458300/index.html">Evolu√ß√£o da ferramenta mais popular de todos os desenvolvedores (no Visual Studio)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>