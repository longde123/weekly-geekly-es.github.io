<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙏🏽 👪 ☹️ Ein einfaches Sonarmodem herstellen 💮 🎣 🍪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Schatz! 
 In diesem Artikel erfahren Sie auf vielfachen Wunsch, wie Sie ein einfaches hydroakustisches Modem herstellen: ein bisschen digitale S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ein einfaches Sonarmodem herstellen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451800/"><h3>  Hallo Schatz! </h3><br>  In diesem Artikel erfahren Sie auf vielfachen Wunsch, wie Sie ein einfaches hydroakustisches Modem herstellen: ein bisschen digitale Signalverarbeitung, ein bisschen Programmierung, ein bisschen hausgemachte Leiterplatten und ein bisschen praktische Hydrologie. <br><br>  An alle Interessierten - wir bitten Sie, in der nachhallenden Welt der Unterwasserkommunikation willkommen zu sein! <br><br>  Und hier ist das relevante Bild, um Aufmerksamkeit zu erregen: <br><br><img src="https://habrastorage.org/webt/_8/0u/jz/_80ujzh-1afojo46fevq6egccvg.jpeg"><br><a name="habracut"></a><br><blockquote>  "Letztendlich besteht der Sinn unserer Existenz darin, Energie zu verbrauchen ... Und wenn möglich, wissen Sie, dass es für Sie selbst und für andere interessant ist." <br>  (C) ABS, Mittag, XXII Jahrhundert </blockquote><h3>  Sparen Sie Zeit - Zusammenfassung </h3><br><ul><li>  Akustische Modems werden bei Aliexpress noch nicht verkauft </li><li>  Es gibt ein einfaches und anspruchsloses Verfahren zur Erkennung von Tonberechnungen für Ressourcen, dessen Frequenz viermal niedriger ist als die Abtastfrequenz.  Arduino reicht für die Implementierung </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispielcode</a> für PC liegt auf GitHub </li><li>  Wir stellen Empfangs- und Sendeantennen von Tortenpflückern zu je 10 r her </li><li>  Wir kaufen (oder machen es selbst) eine Verstärkerplatine auf TDA2030 auf Ali für 50 Rubel </li><li>  Wir stellen einen LUT-Ohm-Vorverstärker mit Gesamtkosten von ~ 100 Rubel her </li><li>  Wir verbinden uns und gehen zum Teich </li><li>  Freut euch </li></ul><br><h3>  Motivationsvorspiel </h3><br>  Jetzt können Sie fast alles bei Aliexpress oder eBay kaufen.  Besonders viele verschiedene Dinge für die unabhängige Herstellung von etwas Elektronischem auf Arduino-Basis.  Sie können (wenn Sie es einfach nicht interessant kaufen) eine Milieu-Zwischenstopp-Wetterstation mit Internetverbindung, einem automatischen Katzenfutterautomat, einer Steuerung der Hausbrauerei, aber Sie können immer noch kein Sonarmodem, einen Designer für dessen Herstellung oder zumindest ein Modul für Adruino kaufen.  Schön und gut!  Und nicht - jetzt werden wir Ihnen sagen, wie es gemacht wird und wie es funktioniert. <br><br>  Wir, das ganze Labor, haben lange darüber nachgedacht, was Liebhabern für eine unabhängige Herstellung geboten werden kann.  Etwas sehr Einfaches, das von einem Schüler und von einem <s>Stock und einem Seil von dem,</s> was jeder zur Hand hat, gesammelt werden kann, aber gleichzeitig mindestens einen minimalen praktischen oder pädagogischen Wert darstellt. <br><br>  Etwas, das eine lange und aufregende Verbesserung verspricht, etwas, das später sogar auf Arduino übertragen werden kann <s>, wenn es nicht stimmt</s> . <br><br>  Wenn wir uns dem Problem materialistisch nähern, möchten wir ein detailliertes Tutorial für die Herstellung eines einfachen Geräts anbieten, das mehr oder weniger Daten in einem Flachwasserkörper übertragen kann (ein flacher Sonarkanal ist am komplexesten), was eine maximale Produktion einer Leiterplatte mit LUT bedeuten würde. mit Gesamtkosten von nicht mehr als ein paar dreihundert Rubel an minimalen Punkten. <br><br><h3>  Was werden wir heute tun? </h3><br><ul><li>  Denken Sie daran, wie man eine geeignete Sonarantenne herstellt und ein Paar herstellt. </li><li>  Schließen Sie eine der Antennen über einen Verstärker am TDA für ~ 50 Rubel an einen PC an und holen Sie sich einen Sender. </li><li>  für den zweiten machen wir einen Vorverstärker mit ~ LUT für ~ 100 Rubel; </li><li>  Wir werden <s>ein</s> einfaches Modem in C # schreiben <s>(ich habe bereits alles geschrieben und auf Git gestellt)</s> und alles im nächsten Gewässer ausprobieren. </li></ul><br><h3>  Was brauchen wir dafür? </h3><br><ul><li>  zwei piezoelektrische Elemente.  Zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von einer Uhr oder Postkarte</a> ; </li><li>  RG-174 / U-Kabel (oder ähnliches) ~ 5 Meter; </li><li>  Essigsiegel; </li><li>  wasserfester Lack; </li><li>  Folientextolit, insgesamt ca. 100x200 mm; </li><li>  einen Verstärker für TDA2030 (zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen</a> für 50 Rubel); </li><li>  Vorverstärkerkomponenten </li></ul><br><h3>  Wie funktioniert es </h3><br>  Die ganze Idee des einfachsten Modems basiert wiederum auf dem einfachsten (Zufall?) Detektor eines bestimmten Tons, von dem ich zu meiner Schande nichts gehört habe.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Hat</a> mir ganz zufällig von ihm erzählt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">andrey_9999a</a> .  Übrigens hat er auch eine Vorverstärkerplatine gemacht. <br><br>  In diesem Zusammenhang erinnerte ich mich an ein Zitat aus Leonard Sasskinds Buch „Die Schlacht am Schwarzen Loch“: <br><blockquote>  „Als Weinkenner bin ich mir mehr oder weniger sicher, dass ich auch mit geschlossenen Augen Rot von Weiß unterscheiden kann.  Noch zuverlässiger unterscheide ich Wein von Bier.  Aber dann wird mich der Geschmack im Stich lassen. “ <br></blockquote>  Ich kann mir sagen, dass ich als echter Elektronikingenieur mehr oder weniger sicher bin, dass ich definitiv zwei dicke Drähte löten kann.  Noch zuverlässiger unterscheide ich einen heißen Lötkolben von einem kalten, auch wenn ich die Augen geschlossen habe, aber dann wird mich die Fähigkeit im Stich lassen.  Daher ist alles, was mit der Entwicklung und Herstellung von Brettern zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">tun hat,</a> die Arbeit meiner Kameraden und Kollegen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">andrey_9999a</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">StDmitriev</a> . <br><br>  Also zurück zum Detektor.  Es ist ein vereinfachter Sonderfall der Berechnung des Fourier-Integrals: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><msubsup><mi>t</mi><mn>0</mn><mi>T</mi></msubsup><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mi>d</mi><mi>t</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.594ex" height="3.021ex" viewBox="0 -883.9 10589.2 1300.8" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-69" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6E" x="595" y="0"></use><g transform="translate(1196,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-54" x="511" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-66" x="2155" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-28" x="2706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-78" x="3095" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-29" x="3668" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-73" x="4057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-69" x="4527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6E" x="4872" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-28" x="5473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6F" x="6112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6D" x="6598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-65" x="7476" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-67" x="7943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-61" x="8423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-74" x="8953" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-29" x="9314" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-64" x="9704" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-74" x="10227" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><msubsup><mi>t</mi><mn>0</mn><mi>T</mi></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><mi>t</mi><mo stretchy="false">)</mo><mi>d</mi><mi>t</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ int_0 ^ Tf (x) sin (\ omega t) dt </script></p><br>  Im Fall eines digitalen Signals ist es zur Berechnung der Amplitude einer beliebigen Harmonischen erforderlich, eine diskrete Fourier-Transformation durchzuführen. Für Arduina ist dies schwierig. Der Trick besteht jedoch darin, dass <i>Fc</i> als Trägerfrequenz genau viermal kleiner als die Abtastfrequenz <i>Fs</i> ist Die Amplitude dieser Harmonischen kann dämonisch einfacher berechnet werden. <br><br>  In diesem Fall ist <i>dt = 2π * (Fs / 4) / Fs = π / 2</i> , und nur 4 Proben fallen auf die Trägerperiode: <br><br><img src="https://habrastorage.org/webt/__/zm/oe/__zmoe1u0jzgjderykrsaogn0k8.png"><br><br>  Wenn alles um <i>π / 4</i> verschoben ist <i>, nehmen</i> die Abtastwerte nur zwei Werte an: √2 / 2 und -√2 / 2. Der Einfachheit halber lassen wir nur die Vorzeichen - <b>"+" und "-"</b> . <br><br>  Das Wesentliche der Methode ist, dass wir die Sinusphase als Folge von Zeichen <b>"+" "+" "-" "-"</b> und die Cosinusphase als <b>"+" "-" "-" + "darstellen</b> . <br><br>  Wenn sich das Eingangssignal im <i>sn-</i> Puffer befindet, haben wir zwei Ringmittelungspuffer für die Sinus- und Cosinusphase - <i>bs</i> und <i>bc der</i> Größe <i>N.</i>  Zeiger auf Kopf und Schwanz sind für sie üblich - <i>bH</i> und <i>bT</i> .  Zum anfänglichen Zeitpunkt ist <i>bH = N-1, bT = 0</i> .  Mittelungszykluszähler <i>C = 0</i> . <br><br>  Wir nehmen 4 Samples aus dem Eingabepuffer und fügen sie entsprechend den Zeichenfolgen hinzu. <br><br><div class="spoiler">  <b class="spoiler_title">Codebeispiel</b> <div class="spoiler_text"><code>a = sn(i) <br> bs(bH) = a <br> bc(bH) = a <br> s1 = s1 + a - bs(bT) <br> s2 = s2 + a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N <br> <br> a = sn(i+1) <br> bs(bH) = a <br> bc(bH) = -a <br> s1 = s1 + a - bs(bT) <br> s2 = s2 - a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N <br> <br> a = sn(i+2) <br> bs(bH) = -a <br> bc(bH) = -a <br> s1 = s1 - a - bs(bT) <br> s2 = s2 - a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N <br> <br> a = sn(i+3) <br> bs(bH) = -a <br> bc(bH) = a <br> s1 = s1 - a - bs(bT) <br> s2 = s2 + a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N</code> <br> </div></div><br>  Nach jeder verarbeiteten vier Abtastung überprüfen wir den Zähler der Mittelungszyklen und wenn er <i>N</i> überschritten hat, berechnen wir die Trägeramplitude <i>cA</i> : <br><br><pre> <code class="plaintext hljs">if ++cycle &gt;= N cA = sqrt(s1 * s1 + s2 * s2) cycle = 0 end</code> </pre> <br>  So sieht es bei einem idealen Signal aus: <br><br><img src="https://habrastorage.org/webt/aj/w5/q5/ajw5q5dls4ruoi_gjzdswjay0ko.png"><br><br>  Das Signal selbst wird blau und die Trägeramplitudenwerte rot angezeigt (alles wird auf den Bereich -1..1 reduziert).  In diesem Fall ist <i>N = 2</i> seit  Es gibt keinen Lärm und alles funktioniert trotzdem gut. <br><br>  Fügen Sie nun etwas weißes Rauschen hinzu und sehen Sie, wie unser Detektor darauf reagiert: <br><br><img src="https://habrastorage.org/webt/ah/ee/0j/ahee0jsjvmnm_cm89jvyroxmrlg.png"><br><br>  Ich habe weißes Rauschen hinzugefügt, sodass das Signal-Rausch-Verhältnis 0 dB betrug.  In der obigen Abbildung ist das verrauschte Signal blau, das Quellensignal grün und der Amplitudenwert rot dargestellt.  In diesem Fall hat der Detektor bei <i>N = 2</i> bereits nichts erkannt, und das Minimum N, bei dem er ordnungsgemäß funktioniert, ist 32. Das heißt,  Die Größe des Verarbeitungsfensters in Proben betrug <i>32 · 4 = 128</i> Proben. <br><br>  Das heißt, wir können jetzt das Eingangssignal analysieren und einen Parameter auswerten, der das Vorhandensein einer Frequenz quantifiziert, viermal weniger als die Abtastfrequenz.  Wenn Sie einen bestimmten Schwellenwert für diesen Parameter festlegen, kann alles binärisiert werden. Wenn wir auf einfache Weise sprechen, können wir die Frage beantworten: Gibt es einen bestimmten Ton im Eingangssignal oder nicht? <br><br>  Das ist sehr gut, aber wir müssen Bits übertragen, und Bits können zwei Werte annehmen. <br><br>  Das Implementieren eines Systems mit zwei Signalisierungszuständen mit Hilfe eines ist eine mittelmäßige Idee, daher werden wir einen der Zustände nicht mit Stille (Pause) codieren.  Dies würde die Erkennung sehr erschweren: Es wäre notwendig, den Beginn der Prämisse irgendwie hervorzuheben, herauszufinden, wie das Ende angeordnet werden kann usw. <br><br>  Stattdessen werden "1" und "0" mit Impulsen unterschiedlicher Länge codiert, zwischen den Bits befindet sich ein sogenanntes  Schutzintervall - weil wir uns immer noch mit Mehrwegeausbreitung und Hall befassen müssen.  In einfachen Worten ist das Schutzintervall der Ort (die Zeit), an dem alle Reflexionen des vorherigen Bits, alle Nachgeräusche und Echos aussterben. <br><br>  Mit Blick auf die Zukunft stellen wir fest, dass mit einer solchen Signalstruktur der Betriebsalgorithmus des Empfängers erheblich vereinfacht wird: Wir warten auf das Erscheinen des Tons, bemerken den Anfang, warten auf das Verschwinden des Tons und notieren erneut die Zeit - wenn die empfangene Zeit eher „1“ lang ist, wahrscheinlich haben wir ein bisschen mit einem Wert von "1" genommen, wenn es eher wie "0" aussieht - dann haben wir anscheinend ein bisschen mit einem Wert von "0" gemacht. <br><br>  Im Allgemeinen können wir sagen, dass dies eine Art Morsecode ist. <br><br><h3>  Software-Teil des Modems </h3><br>  Für die Ungeduldigen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein Beispiel liegt auf GitHub</a> .  Es wurde in C # erstellt (weil ich für den PC darauf schreibe und es für mich einfach bequemer und schneller ist). <br><br>  Die wunderbare <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NAudio-</a> Bibliothek wird zum Abspielen und Aufnehmen von Ton vom Mikrofoneingang verwendet. <br><br>  Die gesamte <a href="">Modemlogik gehört zur</a> Klasse <a href="">SUAModem</a> (Simple Underwater Acoustic Modem). <br><br>  Die folgenden Parameter werden an den Konstruktor übergeben: <br><br>  doppelte sRateHz - Abtastrate in Hertz; <br>  int wSize - die Größe des Verarbeitungsfensters in Beispielen; <br>  int oneMultiplier - wie viele "Fenster" halten ein bisschen mit einem Wert von "1" <br>  int zeroMultiplier - wie viele "Fenster" dauern ein bisschen mit einem Wert von "0" <br>  double eThreshold - Schwelle, lassen Sie uns später darüber sprechen <br><br>  Um ein Signal aus einem Array von Bytes zu generieren, gibt es eine ModulateData-Methode (Byte [] -Daten), die ein Array von 16-Bit-Samples mit Vorzeichen zurückgibt. <br><br><div class="spoiler">  <b class="spoiler_title">public short [] ModulateData (Byte [] Daten)</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">short</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ModulateData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> alpha = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> phase = <span class="hljs-number"><span class="hljs-number">0</span></span>; List&lt;<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>&gt; samples = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>&gt;(); BitArray bits = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitArray(data); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bits.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sLim = (bits[i]) ? oneDurationSmp : zeroDurationSmp; alpha = <span class="hljs-number"><span class="hljs-number">0</span></span>; phase = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sIdx = <span class="hljs-number"><span class="hljs-number">0</span></span>; sIdx &lt;= sLim; sIdx++) { alpha = Math.Sin(phase); phase += delta; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt;= alimit) phase -= alimit; samples.Add(Convert.ToInt16(alpha * <span class="hljs-keyword"><span class="hljs-keyword">short</span></span>.MaxValue)); } samples.AddRange(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span>[defenseIntervalSmp]); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> samples.ToArray(); }</code> </pre><br></div></div><br>  In der Hauptschleife durch übertragene Bits wird die Abtastliste gefüllt.  Abhängig vom aktuell übertragenen Bit wird die Länge sLim des erzeugten Signals in Abtastwerten eingestellt.  Nach jedem Bit wird ein Schutzintervall hinzugefügt. <br><br><div class="spoiler">  <b class="spoiler_title">Natürlich ...</b> <div class="spoiler_text">  Viele mögen bemerken, dass man beim Erzeugen eines Signals auf die Sinusfunktion verzichten könnte, aber dieses Beispiel ermöglicht es, durch entsprechende Änderung des Delta-Werts die Frequenz des erzeugten Tons zu ändern. <br><br>  Einen Ton mit einer Frequenz erzeugen <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>n</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.713ex" height="2.349ex" viewBox="0 -772.3 1168.1 1011.3" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.555ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6E" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> F_n </script>  bei einer gegebenen Abtastrate <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>s</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.498ex" height="2.349ex" viewBox="0 -772.3 1075.5 1011.3" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.555ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-73" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> F_s </script>  entsprechender Wert <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.074ex" viewBox="0 -772.3 2429.5 892.8" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-61" x="1900" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> \ delta </script>  einfach berechnet: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mo>=</mo><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi><msub><mi>F</mi><mi>n</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><msub><mi>F</mi><mi>s</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.83ex" height="2.762ex" viewBox="0 -831.5 8107.2 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-61" x="1900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-3D" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-32" x="3763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-70" x="4514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-69" x="5017" y="0"></use><g transform="translate(5363,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-6E" x="910" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMAIN-2F" x="6531" y="0"></use><g transform="translate(7031,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhhWQU_sUIVev7WN5ulIbaQ106TLfA#MJMATHI-73" x="910" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mo>=</mo><mn>2</mn><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi><msub><mi>F</mi><mi>n</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><msub><mi>F</mi><mi>s</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> \ delta = 2 \ pi F_n / F_s </script></p><br></div></div><br>  Zum Generieren und Ausgeben eines Signals gibt es die TransmitData-Methode (Byte [] Daten), die intern ModulateData aufruft: <br><br><div class="spoiler">  <b class="spoiler_title">public double TransmitData (Byte [] Daten)</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TransmitData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> samples = ModulateData(data); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> txTime = ((<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>)samples.Length) / SampleRateHz; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rawBytes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[samples.Length * <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; samples.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bts = BitConverter.GetBytes(samples[i]); rawBytes[i * <span class="hljs-number"><span class="hljs-number">2</span></span>] = bts[<span class="hljs-number"><span class="hljs-number">0</span></span>]; rawBytes[i * <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>] = bts[<span class="hljs-number"><span class="hljs-number">1</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ms = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MemoryStream(rawBytes)) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RawSourceWaveStream(ms, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaveFormat(Convert.ToInt32(SampleRateHz), <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaveOutEvent()) { wo.Init(rs); wo.Play(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (wo.PlaybackState == PlaybackState.Playing) { Thread.SpinWait(<span class="hljs-number"><span class="hljs-number">1</span></span>); } } rs.Close(); } ms.Close(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> txTime; }</code> </pre><br></div></div><br>  Die SUAModem-Klasse meldet die Akzeptanz des nächsten Bytes mithilfe des DataReceivedEventHandler-Ereignisses. <br><br>  Eingabeproben werden mit der ProcessInputSignal-Methode (short [] data) an die Analyse gesendet und dort in den Ringpuffer geschrieben.  Die Analyse erfolgt in einem separaten Thread in der Receiver-Methode. <br><br>  Und der Empfänger selbst lebt in der Empfangsmethode: <br><br><div class="spoiler">  <b class="spoiler_title">private void Receive ()</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Receive</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> a</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (rCnt &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span>) { a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = a; dRing2[rHead] = a; s1 += a - dRing1[rTail]; s2 += a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = a; dRing2[rHead] = -a; s1 += a - dRing1[rTail]; s2 += -a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = -a; dRing2[rHead] = -a; s1 += -a - dRing1[rTail]; s2 += -a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = -a; dRing2[rHead] = a; s1 += -a - dRing1[rTail]; s2 += a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++cycle &gt;= windowSize) { cycle = <span class="hljs-number"><span class="hljs-number">0</span></span>; currentEnergy = Math.Sqrt(s1 * s1 + s2 * s2) / windowSize; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> de = currentEnergy - prevEnergy; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">region</span></span></span><span class="hljs-meta"> analysis </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (skip &gt; 0) skip -= windowSize * 4; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (isRise) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (de &gt; -Threshold) { riseSmp += windowSize * 4; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { // analyse symbol isRise = false; double oneDiff = Math.Abs(oneDurationSmp - riseSmp); double zeroDiff = Math.Abs(zeroDurationSmp - riseSmp); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (oneDiff &gt; zeroDiff) { // Mostly likely "0" AddBit(false); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { // Mostly likely "1" AddBit(true); } samplesSinceLastBit = 0; skip = defenseIntervalSmp / 2; } } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (de &gt; Threshold) { isRise = true; riseSmp = windowSize * 4; } } } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endregion</span></span></span><span class="hljs-meta"> prevEnergy = currentEnergy; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (bPos &gt; 0) { samplesSinceLastBit += 4 * windowSize; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (samplesSinceLastBit &gt;= defenseIntervalSmp * 2 + zeroDurationSmp + oneDurationSmp) { DiscardBits(); } } } } }</span></span></code> </pre><br></div></div><br>  Aus dem Code ist ersichtlich, dass die Analyse in 4 Proben durchgeführt wird. Wenn Sie möchten, können Sie den Status speichern und eine Probe verarbeiten, was bei der Übertragung auf ein schwaches MK hilfreich ist. <br>  Beim Empfang von Daten wird der Wert der Amplitude s mit einer Frequenz sRateHz / 4 berechnet.  Die Differenz zwischen dem vorherigen und dem aktuellen Wert der Amplitude wird berechnet und dann mit einem bestimmten Schwellenwert verglichen, der experimentell ausgewählt wurde.  In einem Beispiel können Sie diesen Schwellenwert in Echtzeit ändern. <br><br>  Ein starker Anstieg der Amplitude zeigt den Beginn eines „Bits“ an, ein starker (aufgrund des Nachhalls etwas weniger scharfer) Abfall zeigt das Ende eines „Bits“ an. <br><br>  Nachdem wir das nächste Bit erhalten haben, berechnen wir das Schutzintervall - wir überspringen die angegebene Anzahl von Proben - es sind alle Arten von Echos in ihnen, sie stören uns nur. <br><br><h3>  Der eiserne Teil des Modems </h3><br>  Mit der Struktur des Signals ist also alles klar, wie man es zu klar empfängt.  Die kleine Sache ist zu lernen, wie man ein Signal ins Wasser ausstrahlt und es vom Wasser empfängt. <br><br>  Wenn Sie noch keine Sonarantennen haben, ist es an der Zeit, diese in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unserem vorherigen Tutorial durchzuführen</a> . <br><br>  Ich blieb von dieser Zeit bei ihnen, also überspringe ich diesen Schritt. <br><br>  Wir verbinden die Antenne, die zur Übertragung vorgesehen ist, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mit aliexpress</a> an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Verstärkerplatine</a> .  Für einige zehn Meter (vielleicht sogar Hunderte) ist das für uns völlig ausreichend.  Hier gibt es keine Tricks - der Ausgang der Soundkarte des Laptops geht an den Eingang des Verstärkers, der von einer 12-Volt-4-Ah-Blei-Säure-Batterie gespeist wird.  Unsere hydroakustische Sendeantenne von einem Piezo-Hochtöner ist an den Ausgang angeschlossen.  In meinem Fall sieht es so aus: <br><br><img src="https://habrastorage.org/webt/za/17/0e/za170ex4xgid-pacrxgcevfkmm8.jpeg"><br><br><img src="https://habrastorage.org/webt/_8/0u/jz/_80ujzh-1afojo46fevq6egccvg.jpeg"><br><br>  Auf dem Foto oben befindet sich auf dem Bildschirm ein kleiner Spoiler für den nächsten Artikel.  Das nächste Mal werden wir auf denselben Drüsen erneut versuchen, den "Video" -Sound durch Wasser zu übertragen, jedoch auf eine völlig andere Weise als beim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">letzten Mal</a> . <br><br>  Mit einer Empfangsantenne ist das etwas komplizierter.  Obwohl Piezo-Hochtöner sehr empfindlich sind, reicht dies immer noch nicht aus.  Wir müssen eine Vorverstärkerplatine mit einem Filter im 5-35-kHz-Band zusammenbauen. <br>  Der Gewinn, den wir nehmen, ist 1000. <br><br>  Die Schaltung, das Design der Leiterplatte und die Liste der Vorverstärkerkomponenten befinden sich auf unserem GitHub: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schaltung</a> , Spuren - <a href="">oberste Schicht</a> und <a href="">unterste Schicht</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stückliste</a> . <br><br>  Die LUT- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Technologie wurde</a> hunderte Male diskutiert, aber lassen Sie uns auch unseren Beitrag leisten. <br><br><div class="spoiler">  <b class="spoiler_title">Foto verarbeiten</b> <div class="spoiler_text">  Also nehmen wir eine passende Zeitschrift, wir hatten nur diese zur Hand: <br><br><img src="https://habrastorage.org/webt/wu/72/zy/wu72zyy3twxj-iovwsbu1oplf0o.jpeg"><br><br>  Von dort nehmen wir ein paar Seiten und drucken die Schichten mit einem Laserdrucker darauf. <br><br><img src="https://habrastorage.org/webt/aq/c8/of/aqc8of9rwkf_jv4df7o6gb4zqt0.jpeg"><br><br>  Mit Nadeln kombinieren und auf einer Seite kleben, wie auf dem Foto gezeigt: <br><br><img src="https://habrastorage.org/webt/gr/g5/-l/grg5-lzyj3bpl574on7uycmo7xk.jpeg"><br><br>  Bevor wir das Eisen verwenden, befeuchten wir den Toner mit Isopropylalkohol: <br><br><img src="https://habrastorage.org/webt/7k/sp/ru/7ksprumtearv6eixwlfndk9fnoo.jpeg"><br><br>  Viermal gefaltetes A4-Blech bügeln: <br><br><img src="https://habrastorage.org/webt/ut/e5/xu/ute5xu86kbik8c542za18_omuna.jpeg"><br><br>  In warmem Wasser unter dem Wasserhahn einweichen: <br><br><img src="https://habrastorage.org/webt/rg/lg/98/rglg989tlqi-zotwzq5gwkadbo4.jpeg"><br><br>  Und wir waschen die Papierreste.  Danach bereiten wir ein Werkstück zum Ätzen vor: <br><br><img src="https://habrastorage.org/webt/dk/lv/jc/dklvjcuntfws7eg27fr4soukldo.jpeg"><br><br>  Wir schneiden den Überschuss mit Hilfe einer Metallschere ab oder für wen es bequemer ist. <br><br>  Wir vergiften Eisenchlorid.  Speziell für den Artikel, den wir frisch geworfen haben, stellte sich heraus, dass er so wählerisch war, dass Blasen aktiv vom zukünftigen Board kommen: <br><br><img src="https://habrastorage.org/webt/wc/nq/ri/wcnqrifmzqht9luucn3lt0xf1uc.jpeg"><br><br>  Als Ergebnis erhalten wir nach dem Ätzen und Waschen des Toners ein solches Halbzeug: <br><br><img src="https://habrastorage.org/webt/vk/de/k7/vkdek7hiqs1p3van-coacl4gkk4.jpeg"><br><br><img src="https://habrastorage.org/webt/ks/x-/hd/ksx-hd6m6qdijzicf1rwgnhwoy4.jpeg"><br><br>  Nach dem Löten der Komponenten und dem Waschen sieht die Platine so aus. <br><br><img src="https://habrastorage.org/webt/wn/x4/fd/wnx4fd56r1newq2ew6cjr1hmlaa.jpeg"><br></div></div><br>  Und es sieht aus wie die Baugruppe der Empfangsteile.  Die Stromversorgung erfolgt über dieselbe 12-Volt-Bleibatterie: <br><br><img src="https://habrastorage.org/webt/mc/03/dj/mc03djslty9veqpq1aqsllzbckq.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Kleiner Filter Haftungsausschluss</b> <div class="spoiler_text">  Wenn der Leser das Band ändern möchte, schlagen wir vor, den Filter 8. Ordnung, der auf einem billigen 4-Kanal-Operationsverstärker TL084C (DA2 im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diagramm</a> ), den Widerständen R10-R13, R15-R23 und den Kondensatoren C5-C8, C11, C12, C14 und 4 aufgebaut ist, wiederzugeben C15. <br><br>  Nur für den Fall, hier ist der Frequenzgang der aktuellen Filterimplementierung: <br><br><img src="https://habrastorage.org/webt/bi/pd/dy/bipddyy5zubboog4qimejpdxvjw.png"><br><br>  Und hier ist ein weiteres <a href="">Projekt</a> für diesen Filter, das in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qucs-</a> Anwendung erstellt wurde <br></div></div><br><h3>  Erfahrungen und Tests </h3><br>  Um eine Verbindung zu einem Laptop herzustellen, verwenden wir eine normale Buchse von 3,5 mm. Die Spitze ist ein Signal, die mittlere ist nicht angeschlossen, die Erde - <s>Staub zu Staub</s> zum Boden.  Alle Verstärkungen und Effekte des Mikrofons müssen ausgeschaltet sein und die Lautstärke muss abgespielt werden, um den optimalen Pegel zu erreichen.  Die Trittfrequenz sollte auftreten, wenn Sie die an den Vorverstärker angeschlossene Antenne mit Ihrem Finger berühren und leicht streicheln. <br><br>  Wenn Sie einfach ein Stück ohne Verstärker und Vorverstärker auf ein anderes setzen und diese mit dem Audioeingang und -ausgang verbinden, funktioniert alles perfekt.  Unten ist ein Abschnitt des Signals und Sie können sogar mit dem Auge bestimmen, wo die Werte der Bits sind: <br><br><img src="https://habrastorage.org/webt/ft/ny/jm/ftnyjmiapa0uoyeuyhjo2ztaeji.png"><br><br>  Das Signal selbst wird in Blau angezeigt, die Differenz zwischen den aktuellen und vorherigen Werten der Amplitude (vorne) in Rot und die Differenz zwischen den vorherigen und aktuellen Werten (Abnahme) in Grün.  Sie können diesen Teil der Prämisse leicht „demodulieren“: 1 0 0 0 1 1 0. Unsere Null ist doppelt so lang wie die Einheit, und die Dauer des Schutzintervalls entspricht der Dauer von Null. <br><br>  Auch ohne Verstärker und Vorverstärker senken wir unsere Antennen in einen Metalltank mit den Abmessungen 3x1,5x1,5.  Wir haben dies im Labor und haben die Regel aufgestellt, dass wir keine Kommunikation durchführen, wenn sie in diesem Tank irgendwie nicht arbeiten kann.  Tatsache ist, dass es in einem so geschlossenen Energievolumen keinen Weg gibt - der Schall wird wunderbar und wiederholt von den Metallwänden reflektiert und an der Empfangsstelle wird Brei erhalten.  Und angesichts der Tatsache, dass wir normalerweise vorgefertigte Geräte mit Energie prüfen, die für Tausende von Metern berechnet wurde, können Sie sich vorstellen, was dort vor sich geht. <br><br>  Zum Beispiel arbeiten zwei unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RedLINE-</a> Modems in diesem Tank nur in einer Entfernung von nicht mehr als zwei Metern stabil, und zwei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">uWAVEs</a> arbeiten stabil in einer Entfernung von etwa 1 Meter.  Während der erste im offenen Wasser bis zu 8000 Meter und der zweite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bis zu einem Kilometer arbeitet</a> . <br>  Natürlich verwenden nicht alle kommerziellen Produkte solche primitiven Modulationsschemata, die im Artikel besprochen werden und viel komplizierter sind, aber jetzt ist es wichtig, dass wir die Grundlagen verstehen und sinnvollerweise etwas mit unseren Händen tun. <br><br>  Im Allgemeinen senken wir die Antennen bis zu einer Entfernung von etwa 50 Zentimetern in den Tank und erhalten bereits etwas viel weniger Schönes als bei direktem Kontakt der Antennen: <br><br><img src="https://habrastorage.org/webt/zy/my/o9/zymyo9ptbahm3xh60dsv-5hz1mg.png"><br><br>  Obwohl hier ein viel längeres Schutzintervall verwendet wird, ist immer noch sichtbar, dass das Echo fast bis zum nächsten Bit geht, die Fronten und insbesondere die Einbrüche sehr verschwommen sind.  Sie können jedoch weiterhin den Inhalt der Nachricht bestimmen: 1 0 0 0 1 1 0 <br><br>  In beiden Fällen habe ich die Nachricht „123“ gesendet und diese sieben Bits gehören zum Einheitensymbol. <br>  Es sah ungefähr so ​​aus, dann wurde die Oberfläche leicht überarbeitet <br><br><img src="https://habrastorage.org/webt/om/ym/sw/omymswxytjqy_l6uvzbijcr1pac.png"><br><br>  Auf dem Bildschirm oben ist zu sehen, dass mit diesen Einstellungen die Meldung „Hallo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">habr</a> !!!  :-) "bestehend aus 19 Bytes dauert 9,132 Sekunden, dh die Übertragungsgeschwindigkeit betrug 16,6 Bit / s.  Damit das Modem in unserem Tank funktioniert, mussten wir übrigens das Schutzintervall erhöhen, damit die Übertragungsgeschwindigkeit auf ~ 3 Bit / s abfiel. <br><br>  Wir überprüften die hausgemachten Arbeiten im Schwimmbad, wo sie stetig 10 Meter verdienten. <br><br><img src="https://habrastorage.org/webt/bq/jh/_n/bqjh_nwss-l-zjzi5hj5m7xru44.jpeg"><br><br>  Wir haben uns auch hausgemachte Arbeiten am Teich gegönnt.  Ich habe ein aktives Hydrophon verwendet, dessen Design dem im Artikel vorgeschlagenen sehr ähnlich ist. Nur anstelle eines Piezo-Hochtöners wurde ein Sensor von den Parksensoren verwendet. Die Batterie wurde dort in einer Spule montiert, auf die das Kabel gewickelt war: <br><br><img src="https://habrastorage.org/webt/be/hk/jm/behkjmbi2kz0_sxallhxjwyoqvc.jpeg"><br><br><img src="https://habrastorage.org/webt/yu/ke/-w/yuke-wfwsgcozt5pg77d8g4cic8.png"><br><br>  Die Antenne des Empfängers und des Senders senkte sich direkt vom Ufer ab, die Tiefe dort geht stark von 0,5 bis 2 Meter.  Seltsamerweise waren in dem auf dem Foto oben gezeigten Experiment die schlechtesten Bedingungen, die Entfernung dort betrug nur etwa 5 Meter - dies war im Allgemeinen die anfängliche Einstellung.  Von den 20 übertragenen Nachrichten, jeweils 3 Bytes, wurde in sechs ein Byte geschlagen. <br><br>  Als wir dann den Empfänger an einen zweiten Laptop anschlossen und ihn auf die andere Seite des Teichs (Entfernung von etwa 30 Metern) stellten, lief die Übertragung viel besser - es gab nur ein paar Fehler mit 40 Nachrichten mit einer Größe von 3 bis 13 Byte. <br><br><img src="https://habrastorage.org/webt/wp/bz/6i/wpbz6i4wngzg4fdgfza2bxkr2h0.png"><br><br>  Auf dem nächsten Foto auf der Karte sind die Orte sichtbar, an denen sich die Antennen befanden. <br><br><img src="https://habrastorage.org/webt/-i/_u/lk/-i_ulk8o3bsyu4ni7um5tyky73c.png"><br><br><h3>  Schlussfolgerung und weitere Forschung </h3><br>  Wie versprochen haben wir für ein paar Rubel ein funktionierendes Gerät zusammengestellt.  Obwohl sein praktischer Wert zweifelhaft ist, wird der Prozess der Herstellung und Abstimmung auf einem Teich für Anfänger sehr nützlich sein.  Unter Verwendung der beschriebenen Trägererkennungsmethode ist es durchaus möglich, verschiedene einfache Navigationssysteme für den Amateurgebrauch zu entwickeln, und was besonders schön ist, die Rechenkomplexität ermöglicht es Ihnen, die Methode auf einem einfachen Mikrocontroller zu implementieren. <br><br>  Um nicht unbegründet über den Aufbau von Navigationssystemen auf einfachen Signalen zu sein, werfen Sie einen Blick auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">interessante Arbeit,</a> in der sie ein vollwertiges Fernnavigationssystem gebaut haben.  In diesem System wird die Position des Pingers bestimmt, der seine Tiefe periodisch überträgt.  Der Tiefenwert wird durch den Abstand zwischen zwei einfachen Impulsen bei einer bestimmten Frequenz codiert.  Also ja, ja, die Töpfe werden nicht von den Göttern verbrannt, die Straße wird vom Wanderer überwältigt, Geduld und Arbeit, Lernen, Lernen, Lernen - das ist alles. <br><br>  Wenn wir Zeit haben, werden wir vielleicht ein DIY-Projekt durchführen, um einen autonomen Pinger zu positionieren, der einfache Signale aussendet.  Wir haben bereits etwas Ähnliches gemacht, aber kein DIY, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">basierend auf</a> unseren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">uWAVE-</a> Modems, über die wir sogar versucht haben, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein Video</a> zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">drehen</a> .  Es wird sehr interessant sein, Ihre Meinung zu diesem Thema zu hören - es ist sehr wichtig, eine Bestätigung zu haben, dass Sie etwas tun, das nicht umsonst ist. <br><br>  Zurück zum Hauptthema stellen wir jedoch fest, was im vorgeschlagenen Schema verbessert werden könnte: <br><br><ul><li>  Schwellenwertberechnung adaptiv machen </li><li>  Signalbreiten automatisch analysieren </li><li>  Versuchen Sie, unterschiedliche Längen für unterschiedliche Bitkombinationen zu verwenden </li><li>  <s>Fehlerkorrekturcodierung festziehen</s> </li><li>  Übertragen Sie alles auf Arduino </li><li>  Die Lautstärke und der Schwellenwert müssen für eine lange und langwierige Zeit ausgewählt werden, daher wäre es schön, AGC zum Vorverstärker hinzuzufügen </li></ul><br>  Bei diesem Treffen werde ich für geschlossen erklären, und wenn Sie an dem Thema interessiert sind, finden Sie hier eine Liste unserer vorherigen Artikel: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterwasser-GPS von Grund auf neu pro Jahr</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterwasser-GPS auf einem Unterwasserroboter: Erfahrung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir haben das kleinste Sonarmodem der Welt hergestellt</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Über die Wirkung von Cyanobakterien auf die Sprachfunktionen des Präsidenten</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aus dem Müll eine einfache Sonarantenne machen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sitzung der Videoübertragung von Ton durch Wasser mit Belichtung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterwasser-GPS auf zwei Transceivern</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Navigation unter Wasser: Peilung nicht Peilung - Sie sind zum Erfolg verurteilt</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterwasser-GPS: Fortsetzung</a> <br><br><h3>  PS </h3><br>  Wie immer freuen wir uns über Kommentare und Vorschläge, fundierte Kritik und Beifall. <br><br><h3>  PPS </h3><br>  Entfernen Sie die Drüsen nicht weit - das nächste Mal werden wir sie wieder verwenden, um das "Video" durch das Wasser zu übertragen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de451800/">https://habr.com/ru/post/de451800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de451790/index.html">Die Gefahren der Datenerfassung im Spiel</a></li>
<li><a href="../de451792/index.html">Vier Javascript-Sniffer, die Sie in Online-Shops fangen</a></li>
<li><a href="../de451794/index.html">Textur-Einrückungspixel</a></li>
<li><a href="../de451796/index.html">Schreiben einer sicheren Browsererweiterung</a></li>
<li><a href="../de451798/index.html">Datenmigration mit mongoDB und Spring Boot</a></li>
<li><a href="../de451802/index.html">Die .Net Community der Raiffeisenbank lädt zu UPD mitap Broadcast ein</a></li>
<li><a href="../de451806/index.html">iOS Digest Nr. 5 (27. April - 16. Mai)</a></li>
<li><a href="../de451812/index.html">Jetzt werden gute Entwickler an Ansichten und Abonnenten gemessen - und das ist schlecht</a></li>
<li><a href="../de451814/index.html">RBKmoney Zahlungen unter der Haube - Infrastruktur der Zahlungsplattform</a></li>
<li><a href="../de451816/index.html">Fuzzing im 2000er-Stil in modernen Windows 10-Anwendungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>