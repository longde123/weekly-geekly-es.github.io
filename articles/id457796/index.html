<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🚀 😁 🙆🏿 Fitur RTC M41T56 👩🏿‍🎤 🔮 🛀🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="M41T56 adalah chip Real Time Clock, yang merupakan analog dari DS1307 yang populer. Dan meskipun pin pada sirkuit mikro adalah sama, mereka memiliki p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fitur RTC M41T56</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457796/">  M41T56 adalah chip Real Time Clock, yang merupakan analog dari DS1307 yang populer.  Dan meskipun pin pada sirkuit mikro adalah sama, mereka memiliki perbedaan yang signifikan, yang akan saya coba bicarakan. <br><a name="habracut"></a><br><h2>  Deskripsi singkat </h2><br>  Saya tidak akan memikirkan pengoperasian bus IIC, saya perhatikan hanya bahwa kedua chip memiliki alamat 0xd0.  Untuk bekerja dengan waktu, sirkuit mikro berisi tujuh register hitung dan register kontrol.  Register akun berisi angka dalam format desimal biner, namun beberapa bit memiliki arti khusus. <br><br>  <b>Daftar</b> <br>  Nilai xxx - bit tidak ditentukan. <br><div class="scrollable-table"><table><tbody><tr><th rowspan="2">  fungsi </th><th rowspan="2">  indeks </th><th colspan="8">  bit </th><th rowspan="2">  nilai yang mungkin </th></tr><tr><th>  7 </th><th>  6 </th><th>  5 </th><th>  4 </th><th>  3 </th><th>  2 </th><th>  1 </th><th>  0 </th></tr><tr><td>  detik </td><td>  0x00 </td><td>  ST </td><td colspan="3">  puluhan detik </td><td colspan="4">  satuan detik </td><td>  0 - 59 </td></tr><tr><td>  menit </td><td>  0x01 </td><td>  xxx </td><td colspan="3">  puluhan menit </td><td colspan="4">  satuan menit </td><td>  0 - 59 </td></tr><tr><td>  jam tangan </td><td>  0x02 </td><td>  Seb </td><td>  SB </td><td colspan="2">  puluhan jam </td><td colspan="4">  unit jam </td><td>  0-23 </td></tr><tr><td>  hari </td><td>  0x03 </td><td>  xxx </td><td>  xxx </td><td>  xxx </td><td>  xxx </td><td>  xxx </td><td colspan="3">  hari dalam seminggu </td><td>  1 - 7 </td></tr><tr><td>  hari dalam sebulan </td><td>  0x04 </td><td>  xxx </td><td>  xxx </td><td colspan="2">  puluhan hari </td><td colspan="4">  unit hari ini </td><td>  1 - (28 | 29 | 30 | 31) </td></tr><tr><td>  bulan </td><td>  0x05 </td><td>  xxx </td><td>  xxx </td><td>  xxx </td><td colspan="1">  des </td><td colspan="4">  unit bulan ini </td><td>  1 - 12 </td></tr><tr><td>  tahun </td><td>  0x06 </td><td colspan="4">  puluhan tahun </td><td colspan="4">  unit tahun ini </td><td>  0 - 99 </td></tr><tr><td>  daftar kontrol </td><td>  0x07 </td><td>  KELUAR </td><td>  FT </td><td>  S </td><td colspan="5">  jumlah koreksi </td><td>  - </td></tr></tbody></table></div><br>  <b>Bits</b> <br>  x - setelah diaktifkan, keadaan bit bisa apa saja. <br><div class="scrollable-table"><table><tbody><tr><th>  sedikit </th><th>  setelah reset </th><th>  deskripsi </th></tr><tr><td>  ST </td><td>  x </td><td>  Saat menulis 1 untuk bit ini, generator berhenti </td></tr><tr><td>  CEB </td><td>  x </td>
<td rowspan="2">  Ketika bit CEB (Century Enable Bit) diatur, maka ketika abad baru tercapai, bit CB (Century Bit) akan mengubah nilai kebalikannya. </td></tr><tr><td>  CB </td><td>  x </td></tr><tr><td>  KELUAR </td><td>  1 </td><td rowspan="2">  Ketika bit OUT (Level keluaran) dan FT (Uji Frekuensi) nol, pin FT / OUT ditekan ke ground.  Dengan FT = 1, output FT / OUT adalah 512 Hz dan bit OUT tidak masalah. </td></tr><tr><td>  FT </td><td>  0 </td></tr><tr><td>  S </td><td>  x </td><td>  Tanda kalibrasi stroke RTC. </td></tr></tbody></table></div><br>  Perbedaannya dimulai pada penugasan bit 7, 6 dan 5 dari clock register.  Dalam M41T56, bit 7 dan 6 digunakan untuk menunjukkan transisi ke abad baru, dan bit 5 dan 4 digunakan untuk menghitung puluhan jam.  Selain itu, penghitungan jam hanya dimungkinkan dalam mode 24, mode AM / PM tidak tersedia.  Dalam DS1307, bit 7 tidak digunakan, nol dalam bit 6 menunjukkan bahwa mode penghitungan 24 digunakan, dan dalam kasus ini, bit 5 dan 4 berisi puluhan jam.  Jika bit 6 adalah satu, maka bit 5 menjadi bendera AM / PM, dan bit 4 berisi puluhan jam. <br><br>  Perbedaan yang signifikan ada di register kontrol, yang berisi kata koreksi stroke. <br><br><h2>  Koreksi mata kuliah </h2><br>  M41T56 memungkinkan Anda untuk mengkompensasi kesalahan resonator kuarsa dalam kisaran -62 hingga +124 ppm, yang memberikan deviasi tidak lebih dari ± 5 detik per bulan.  Untuk kompensasi bertanggung jawab enam bit paling tidak signifikan dari register kontrol.  Bit 4-0 mengandung bilangan bulat yang tidak ditandatangani dari nilai koreksi, dan bit 5 menetapkan arah koreksi.  Jika bit 5 mengandung nol, maka stroke melambat dalam langkah 2,034 ppm, jika tidak RTC mempercepat dalam langkah-langkah 4,068 ppm.  Ini tidak nyaman, jadi saya membuat sketsa beberapa fungsi sederhana untuk mengkonversi dari ppm ke kata koreksi dan sebaliknya. <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/*        . */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MASK_CALIBR ((1 &lt;&lt; 4) | (1 &lt;&lt; 3) | (1 &lt;&lt; 2) | (1 &lt;&lt; 1) | (1 &lt;&lt; 0)) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/*        . */</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MASK_CALIBR_SIGN (1 &lt;&lt; 5) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/** *    . * @param caliber    RTC. * @return    ppm. */</span></span></span><span class="hljs-meta"> int8_t caliber_to_ppm(uint8_t caliber) { int8_t result = caliber &amp; MASK_CALIBR; result = (uint8_t) result * 2; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ((caliber &amp; MASK_CALIBR_SIGN) != 0) { result = -result; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { result = (uint8_t) result * 2; } return result; } </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/** *   . * @param ppm    ppm. * @return    RTC. */</span></span></span><span class="hljs-meta"> uint8_t ppm_to_caliber(int8_t ppm) { uint8_t result; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (ppm &lt; 0) { result = (uint8_t) (-ppm + 1) / 2; result |= MASK_CALIBR_SIGN; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { result = (uint8_t) (ppm + 2) / 4; } return result; }</span></span></code> </pre> <br><h2>  Deteksi kesalahan </h2><br>  Baik DS1307, tetapi M41T56 dapat mendeteksi kesalahan generasi, tetapi mereka menjamin bahwa ketika daya dihidupkan, beberapa bit akan berada dalam keadaan tertentu.  M41T56 saat diaktifkan di register kontrol akan menjadi 10xxxxxx.  Untuk melacak crash program, Anda dapat menggunakan algoritma berikut.  Jika, ketika mikrokontroler dihidupkan, register kontrol RTC berisi 10xxxxxx, maka ada kegagalan daya dan nilai harus ditulis ke dalam register yang bit-bit tingginya tidak sama dengan 10. Yang paling sederhana adalah menulis kata koreksi dengan bit 7 dan 6 sama dengan nol. <br><br><h2>  Sastra </h2><br><ul><li>  Lembar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fakta M41T56</a> </li><li>  Lembar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Data DS1307</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457796/">https://habr.com/ru/post/id457796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457776/index.html">Tambang di bawah kinerja sedang menunggu di sayap: bagian 2</a></li>
<li><a href="../id457784/index.html">Kalibrasi Pelacak Mata Kustom</a></li>
<li><a href="../id457786/index.html">Diperbarui Anet A8 Plus. Besar dan logam</a></li>
<li><a href="../id457790/index.html">Ponsel BuratinoPhone</a></li>
<li><a href="../id457794/index.html">Properti simetri dari hubungan kointegrasi</a></li>
<li><a href="../id457798/index.html">Apa yang dilakukan oleh sumber dana terbuka - berbicara tentang proyek OpenStack dan Linux Foundation baru-baru ini</a></li>
<li><a href="../id457800/index.html">Kerentanan kritis MacOS Mojave secara aktif dieksploitasi oleh penjahat cyber</a></li>
<li><a href="../id457804/index.html">ListenIt - ekstensi Google Chrome untuk secara otomatis membuat versi audio artikel</a></li>
<li><a href="../id457808/index.html">Thermal imager. Cari Thermal Compact</a></li>
<li><a href="../id457810/index.html">Pendekatan teknik untuk pengembangan perangkat lunak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>