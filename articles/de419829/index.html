<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ üìç üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë© Die Standardschl√ºsselverschl√ºsselung von OpenSSH ist schlechter als keine üññ üë®‚Äçüë¶ üïû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Autoren dieses Artikels sprechen sich gegen die Standardschl√ºsselverschl√ºsselungsmechanismen in OpenSSH aus. 


 Angreifer haben k√ºrzlich das npm-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die Standardschl√ºsselverschl√ºsselung von OpenSSH ist schlechter als keine</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirex/blog/419829/">  <i>Die Autoren dieses Artikels sprechen sich gegen die Standardschl√ºsselverschl√ºsselungsmechanismen in OpenSSH aus.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6k/km/om/6kkmom9aovguj47f3092gm95xlw.jpeg"></div><br>  Angreifer haben k√ºrzlich das npm-Paket eslint-scope verwendet, um npm-Token aus Benutzer-Home-Verzeichnissen zu stehlen.  Angesichts dieses Ereignisses haben wir begonnen, andere √§hnliche Schwachstellen zu √ºberpr√ºfen und dar√ºber nachzudenken, wie die Risiken und Folgen solcher Vorf√§lle verringert werden k√∂nnen. <br><br>  Die meisten von uns haben einen RSA-SSH-Schl√ºssel zur Hand.  Dieser Schl√ºssel bietet dem Eigent√ºmer verschiedene Berechtigungen: In der Regel wird er f√ºr den Zugriff auf die Produktionsumgebung oder in GitHub verwendet.  Im Gegensatz zu nmp-Token werden SSH-Schl√ºssel verschl√ºsselt. Daher wird allgemein angenommen, dass nichts Schlimmes passiert, selbst wenn sie in die falschen H√§nde geraten.  Aber ist es wirklich so?  Lass es uns herausfinden. <a name="habracut"></a><br><br><blockquote><code>user@work /tmp $ ssh-keygen <br> Generating public/private rsa key pair. <br> Enter file in which to save the key (/home/user/.ssh/id_rsa): mykey <br> ... <br> user@work /tmp $ head -n 5 mykey <br> -----BEGIN RSA PRIVATE KEY----- <br> Proc-Type: 4,ENCRYPTED <br> DEK-Info: AES-128-CBC,CB973D5520E952B8D5A6B86716C6223F <br> <br> +5ZVNE65kl8kwZ808e4+Y7Pr8IFstgoArpZJ/bkOs7rB9eAfYrx2CLBqLATk1RT/</code> </blockquote> <br>  Dieser Schl√ºssel ist verschl√ºsselt, wie in einer der ersten Zeilen der Datei angegeben.  Au√üerdem wird zu Beginn kein MII-Base64-Codierungsschl√ºssel in RSA verwendet.  Und nat√ºrlich f√§llt AES auf!  Es ist gut, oder?  Und CBC auf den ersten Blick mit einem zuf√§lligen Initialisierungsvektor.  Es gibt keinen Authentifizierungscode (MAC).  Na dann wird es keinen Polster-Orakelangriff geben, oder? <br><br>  Es ist nicht so einfach herauszufinden, was der Inhalt von DEK-Info wirklich bedeutet.  Eine Suche nach dem Schl√ºsselwort "DEK-Info" im openssh-portable Repository zeigt nur Beispiele f√ºr Schl√ºssel.  Der Punkt hier ist jedoch, dass der AES-Schl√ºssel nichts anderes als ein einfacher MD5-Hash ist (Passwort || Initialisierungsvektor [: 8]).  Und das ist schlecht, weil Best Practices zum Speichern von Passw√∂rtern besagen, dass Passw√∂rter in ihrer reinen Form aufgrund ihrer geringen Entropie schlechtes Verschl√ºsselungsmaterial sind.  Und um es besser zu machen, ben√∂tigen Sie eine teure Funktion wie Argon2.  Im Gegensatz zu letzterem ist MD5 jedoch leicht zu berechnen. <br><br>  Der einzige positive Punkt in diesem Schema ist, dass das Salz nach dem Passwort platziert wird. Daher funktioniert es nicht, den Zwischenzustand MD5 (IV [8:]) zu berechnen und die darauf basierenden Passw√∂rter zu finden.  Dies ist jedoch kein Trost, insbesondere in einer Zeit, in der uns Maschinen zur Verf√ºgung stehen, die Milliarden von MD5-Anrufen pro Sekunde t√§tigen - mehr als nur Passw√∂rter. <br><br>  Sie fragen sich vielleicht, wie OpenSSH dies erlebt hat.  Leider ist die Antwort einfach: Das OpenSSL-Befehlszeilentool verwendete dieses Schema urspr√ºnglich standardm√§√üig und es wurde einfach zur Norm. <br><br>  Am Ende stellt sich heraus, dass die standardm√§√üigen, kennwortverschl√ºsselten Schl√ºssel nicht besser sind als normale unverschl√ºsselte Schl√ºssel, nur weil der Verschl√ºsselungsmechanismus unwirksam ist.  Wir w√ºrden jedoch noch mutiger sprechen - sie sind schlimmer.  Und es ist leicht zu streiten. <br><br>  Es ist unwahrscheinlich, dass viele Benutzer einen Kennwortmanager verwenden, um das Kennwort f√ºr den SSH-Schl√ºssel zu speichern.  Vielmehr wird sich der Benutzer einfach daran erinnern.  Und da dies eine der gespeicherten Kombinationen ist, ist es wahrscheinlich, dass der Benutzer sie bereits an anderer Stelle verwendet hat.  M√∂glicherweise stimmt es sogar mit dem Benutzerkennwort des Ger√§ts √ºberein.  Es ist durchaus m√∂glich, es zu erraten (seine formative Funktion ist zu unzuverl√§ssig), und wenn das Passwort bekannt wird, k√∂nnen Sie es wahrscheinlich mit dem √∂ffentlichen Schl√ºssel √ºberpr√ºfen. <br><br>  Es gibt keine Beschwerden √ºber das RSA-Schl√ºsselpaar selbst: Die einzige Frage sind die Methoden zur symmetrischen Verschl√ºsselung des privaten Schl√ºssels.  Es ist unm√∂glich, den oben beschriebenen Angriff auszuf√ºhren, wenn nur der √∂ffentliche Schl√ºssel bekannt ist. <br><br><h3>  Wie kann ich die Situation beheben? </h3><br>  OpenSSH bietet ein neues Schl√ºsselformat.  Mit neu ist die Einf√ºhrung im Jahr 2013 gemeint.  Dieses Format verwendet bcrypt_pbkdf, eine im Wesentlichen nach dem PBKDF2-Standard implementierte bcrypt mit fester Komplexit√§t. <br><br>  Praktischerweise erhalten Sie beim Generieren von Ed25519-Schl√ºsseln automatisch einen Schl√ºssel in einem neuen Format, da das alte SSH-Schl√ºsselformat neuere Schl√ºsseltypen nicht unterst√ºtzt.  Dies ist ziemlich seltsam, da wir das Schl√ºsselformat nicht wirklich ben√∂tigen, um zu bestimmen, wie die Ed25519-Serialisierung funktioniert, da der Ed25519 selbst die Serialisierungsarbeit festlegt.  Aber wenn Sie wirklich eine gute pr√§gende Funktion brauchen, k√∂nnen Sie sich nicht mit solchen Kleinigkeiten besch√§ftigen.  Daher lautet eine der Antworten <i>ssh-keygen -t ed25519</i> . <br><br>  Wenn Sie aus Kompatibilit√§tsgr√ºnden RSA einhalten m√ºssen, k√∂nnen Sie ssh-keygen -o verwenden.  Somit kann auch f√ºr alte Schl√ºsseltypen ein neues Format erhalten werden.  Sie k√∂nnen alte Schl√ºssel mit dem Befehl <i>ssh-keygen -p -o -f Schl√ºsselname</i> aktualisieren.  Wenn Ihre Schl√ºssel auf Yubikey- oder Smartcards gespeichert sind, wurden diese √Ñnderungen bereits ber√ºcksichtigt. <br><br>  Auf die eine oder andere Weise streben wir einen optimaleren Ausgang an.  Einerseits gibt es ein gutes Beispiel f√ºr aws-vault, bei dem Anmeldeinformationen von der Festplatte auf Schl√ºsselanh√§nger verschoben wurden.  Es gibt einen anderen Ansatz: Verlagerung der Entwicklung in gemeinsam genutzte Umgebungen.  Schlie√ülich sollten die meisten Startups in Betracht ziehen, die Langzeitspeicherung von SSH-Schl√ºsseln aufzugeben und in ein SSH-Zertifizierungszentrum mit einer begrenzten Schl√ºsselspeicherzeit in Verbindung mit einem Single Sign-On-System zu wechseln.  Leider ist dieser Ansatz bei GitHub nicht m√∂glich. <br><br>  <b>PS</b> Es ist schwierig, diese Informationen in einer autorisierenden Quelle zu √ºberpr√ºfen, aber wenn der Speicher uns gute Dienste leistet, wirkt sich der versionierte Parameter in den privaten Schl√ºsseln des OpenSSH PEM-Formats nur auf die Verschl√ºsselungsmethode aus.  Dies spielt jedoch keine Rolle: Das Problem ist die Schl√ºsselbildungsfunktion, und wir glauben, dass dies ein weiteres Argument gegen die teilweise Er√∂rterung der Protokolle ist.  Es wird einen separaten Beitrag zu diesem Thema in unserem Blog geben. <br><br>  Und schlie√ülich - ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> zum vollst√§ndigen Schl√ºssel.  Dies ist f√ºr den Fall, dass Sie heute etwas hacken wollen. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/4bd/bf6/597/4bdbf659775744b1bdbb4d8a00a0a980.png" alt="Bild"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419829/">https://habr.com/ru/post/de419829/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419815/index.html">Geheimnisse der Fehlertoleranz unseres Front Office</a></li>
<li><a href="../de419817/index.html">Starten des RabbitMQ-Clusters in Kubernetes</a></li>
<li><a href="../de419819/index.html">Biomarker des Alterns. Panel Gebrechlichkeit. Teil 2</a></li>
<li><a href="../de419823/index.html">Ungew√∂hnliche Duett - Passphrasen und Ged√§chtnisbilder</a></li>
<li><a href="../de419825/index.html">Testen der Leistung verschiedener Laufwerkstypen in einer virtuellen Umgebung</a></li>
<li><a href="../de419831/index.html">So funktioniert JS: Benutzerdefinierte Elemente</a></li>
<li><a href="../de419833/index.html">Fernarbeit, wie es funktioniert</a></li>
<li><a href="../de419835/index.html">Wie man Autoren motiviert, mit Experten verhandelt und im Allgemeinen gute Artikel schreibt</a></li>
<li><a href="../de419837/index.html">Ich, RoboLoyer, oder wie man in Dokumenten nach Anomalien sucht</a></li>
<li><a href="../de419839/index.html">Low Level NCR ATM Hacking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>