<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📕 🤶 👯 Cungkil -> REPL untuk Ruby, yang sangat berharga 🍮 👨‍🎤 🏅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="REPL 


 REPL dalam dunia pengembangan setinggi lutut adalah untuk Baca → Evaluasi → Loop Cetak . Baca, dieksekusi, dicetak, dan berkali-kali. 


 Rub...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cungkil -> REPL untuk Ruby, yang sangat berharga</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481728/"><h3 id="repl">  REPL </h3><br><p> <code>REPL</code> dalam dunia pengembangan setinggi lutut adalah untuk <a href="https://www.allacronyms.com/REPL" rel="nofollow">Baca → Evaluasi → Loop Cetak</a> .  Baca, dieksekusi, dicetak, dan berkali-kali. </p><br><p>  Ruby, seperti banyak bahasa lainnya, hadir dengan implementasi <em>REPL</em> sendiri yang disebut <code>irb</code> .  Yang, meskipun mengatasi tugas-tugas primitif, masih tidak dapat sepenuhnya memenuhi tuntutan pengembang yang cerdas.  Tetapi ada alternatif yang jauh lebih berkembang: <a href="http://pryrepl.org/" rel="nofollow"><code>pry</code></a> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ff1/bf9/5e6/ff1bf95e6d1c4e3055b7bf9759b7673e.png" alt="Pry Logo"></p><a name="habracut"></a><br><p>  Berikut ini kutipan dari situs web resmi <code>pry</code> : </p><br><blockquote>  <em>Pry</em> adalah alternatif yang <strong>kuat</strong> untuk bungkus standar Ruby IRB.  Dengan <strong>penyorotan sintaksis</strong> , <strong>arsitektur plugin yang fleksibel</strong> , panggilan <strong>runtime,</strong> dan melihat <strong>sumber</strong> dan <strong>dokumentasi</strong> . </blockquote><p>  Dan ini bukan hanya iklan bla bla bla.  Ini benar  Saya akan menunjukkan cara menginstal dan mengkonfigurasi <code>pry</code> dengan semua lonceng dan peluit untuk memuaskan pengembang paling canggih.  Diasumsikan bahwa versi kerja Ruby saat ini diinstal dan dijalankan pada mesin target. </p><br><h3 id="podgotovka">  Persiapan </h3><br><p>  Pergi ke konsol dan jalankan perintah: </p><br><pre> <code class="plaintext hljs">$ gem install pry pry-theme awesome_print coderay</code> </pre> <br><p>  Semuanya, kami sepenuhnya siap.  Ayo jalankan ... ... dan pastikan tidak ada perbedaan dibandingkan dengan <code>irb</code> .  Tiba-tiba tidak terlalu baik. </p><br><p>  Kalau begitu, mari kita ajar anak <code>pry</code> menjadi sedikit lebih pintar. </p><br><h3 id="konfiguracionnyy-fayl">  File konfigurasi </h3><br><p>  Ini <code>.pryrc</code> .  Sudah ada file konfigurasi di direktori home yang memberi tahu cara melihat dan bagaimana berperilaku dalam masyarakat yang layak.  Jika tidak, Anda dapat membuatnya dengan perintah <code>cd &amp;&amp; touch .pryrc</code> . </p><br><h3 id="delikatnoe-napolnenie-pryrc-instrukciyami">  Mengisi instruksi <code>.pryrc</code> </h3><br><p>  Saya akan menunjukkan berbagai fitur langkah demi langkah.  Untuk yang tidak sabar: <a href="https://gist.github.com/am-kantox/5ebb68916ccde06736e8d95026693742" rel="nofollow"><code>gist   .pryrc</code></a> . </p><br><ul><li>  <a href="https://github.com/pry/pry/wiki" rel="nofollow"><code>pry</code> guide</a> : berikut adalah <a href="https://github.com/pry/pry/wiki" rel="nofollow"><code>pry</code></a> informasi berguna untuk prist yang berpengalaman, </li><li>  <a href="https://github.com/kyrylo/pry-theme/wiki" rel="nofollow">tema <code>pry</code></a> : pertanyaan, jawaban, dll. </li></ul><br><h4 id="redaktor-po-umolchaniyu">  Editor default </h4><br><pre> <code class="ruby hljs">Pry.editor = <span class="hljs-string"><span class="hljs-string">'vi'</span></span> <span class="hljs-comment"><span class="hljs-comment"># 'code', 'subl'</span></span></code> </pre> <br><p>  Mengkonfigurasi editor yang akan digunakan untuk mengedit konteks saat ini (perintah <code>edit</code> ). </p><br><h4 id="priglashenie-komandnoy-stroki">  Command prompt </h4><br><pre> <code class="ruby hljs">Pry.config.prompt = [ -&gt;(_obj, _nest_level, <span class="hljs-number"><span class="hljs-number">_</span></span>) { <span class="hljs-string"><span class="hljs-string">"✎ "</span></span> }, -&gt;(*) { <span class="hljs-string"><span class="hljs-string">" "</span></span> } ]</code> </pre> <br><p>  <code>.pryrc</code> hanyalah file <code>.pryrc</code> , sehingga proses ini dapat mengeksekusi kode apa pun yang Anda inginkan, atau bahkan menambang bitcoin saat Anda menunggu prompt berikutnya muncul. </p><br><p>  Tingkat pertama dan tingkat bersarang (blok dalam) dapat ditarik dengan cara yang berbeda.  Sebelumnya, saya menggunakan <em>segitiga berarsir hitam, yang memotong parser bodoh</em> untuk tingkat pertama dan ▷ untuk yang bersarang, tetapi secara bertahap sampai pada kesimpulan bahwa tidak adanya karakter asing di dalam snippet membuatnya lebih mudah untuk menyalin fragmen di mana saja.  Oleh karena itu begitu. </p><br><h4 id="cveta">  Warna </h4><br><p>  Untuk mendukung tema, <code>pry-theme</code> gem digunakan.  Saya menggunakan pewarnaan sintaks (dan ketika bosan, saya menjalankan <code>PRY_BW=true pry</code> ).  Untuk folder yang menjalankan <em>Rails</em> (berisi proyek <em>Rails</em> ) warnanya bisa lebih mewah, tapi saya benci <em>Rails</em> , dan karena itu apa yang terjadi di sana, saya tidak bisa mengatakannya dengan pasti. </p><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">unless</span></span> ENV[<span class="hljs-string"><span class="hljs-string">'PRY_BW'</span></span>] Pry.color = <span class="hljs-literal"><span class="hljs-literal">true</span></span> Pry.config.theme = <span class="hljs-string"><span class="hljs-string">"railscasts"</span></span> Pry.config.prompt = PryRails::RAILS_PROMPT <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">defined</span></span>?(PryRails::RAILS_PROMPT) Pry.config.prompt <span class="hljs-params"><span class="hljs-params">||</span></span>= Pry.prompt <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h4 id="istoriya">  Ceritanya </h4><br><p>  Ini hanya sebuah penemuan.  Saat dalam mode debug, atau jika perintah dijalankan segera sebelum itu, cukup tekan ⏎ dan itu akan diulang.  Ini sangat berguna untuk beralih ke kode di debugger (jika Anda, tentu saja, menggunakan debugger sama sekali, dan jangan memperbaiki semua kesalahan dengan tampilan tetap, misalnya tidak pernah meluncurkan debugger seperti saya, misalnya). </p><br><pre> <code class="ruby hljs">Pry.config.history.should_save = <span class="hljs-literal"><span class="hljs-literal">true</span></span> Pry::Commands.command /^$/, <span class="hljs-string"><span class="hljs-string">"repeat last command"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> _pry<span class="hljs-number"><span class="hljs-number">_</span></span>.run_command Pry.history.to_a.last <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h4 id="komandy">  Tim </h4><br><p>  Debugger  Motor itu bukan milik saya, saya hanya meminjam lima baris ini dari rekan setim saya, yang menghabiskan seluruh hidupnya dalam debugging, tetapi, kata mereka, itu berhasil. </p><br><pre> <code class="ruby hljs">Pry.commands.alias_command <span class="hljs-string"><span class="hljs-string">'c'</span></span>, <span class="hljs-string"><span class="hljs-string">'continue'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> Pry.commands.alias_command <span class="hljs-string"><span class="hljs-string">'s'</span></span>, <span class="hljs-string"><span class="hljs-string">'step'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> Pry.commands.alias_command <span class="hljs-string"><span class="hljs-string">'n'</span></span>, <span class="hljs-string"><span class="hljs-string">'next'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> Pry.commands.alias_command <span class="hljs-string"><span class="hljs-string">'f'</span></span>, <span class="hljs-string"><span class="hljs-string">'finish'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> Pry.commands.alias_command <span class="hljs-string"><span class="hljs-string">'l'</span></span>, <span class="hljs-string"><span class="hljs-string">'whereami'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rescue</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span></code> </pre> <br><h4 id="konfiguraciya-opisaniya-modulya--klassa">  Modul / Kelas Deskripsi Konfigurasi </h4><br><pre> <code class="ruby hljs">Pry.config.ls.separator = <span class="hljs-string"><span class="hljs-string">"\n"</span></span> <span class="hljs-comment"><span class="hljs-comment"># new lines between methods Pry.config.ls.heading_color = :magenta Pry.config.ls.public_method_color = :green Pry.config.ls.protected_method_color = :yellow Pry.config.ls.private_method_color = :bright_black</span></span></code> </pre> <br><p>  Tampaknya tidak ada yang perlu dikomentari. </p><br><h3 id="vyzov-sistemnyh-utilit">  Panggil Utilitas Sistem </h3><br><p>  <code>Pry</code> mendukung utilitas sistem panggilan (cukup tambahkan satu titik sebelum nama perintah tanpa spasi, <code>.ls</code> , atau <code>.ps axu</code> ). </p><br><h3 id="plaginy">  Plugin </h3><br><p>  Di bawah ini adalah contoh paling sederhana dari konfigurasi plugin.  Tidak ada yang suka konfigurasi kembung, kami memolesnya dan membawanya sekitar selama beberapa dekade dengan mesin yang berbeda.  Cuplikan di bawah ini hanyalah contoh (untuk plugin yang <code>awesome</code> ).  Komentar dalam kode berbicara sendiri. </p><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># `awesome_print` gem is a great syntax colorized printing # look at `~/.aprc` for more settings for awesome_print begin require 'awesome_print' # The following line enables awesome_print for all pry output, # and it also enables paging Pry.config.print = proc {|output, value| Pry::Helpers::BaseHelpers.stagger_output("=&gt; #{value.ai}", output)} # If you want awesome_print without automatic pagination, use the line below module AwesomePrint Formatter.prepend(Module.new do def awesome_self(object, type) return super(object, type) unless type == :string return super(object, type) unless </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@options</span></span></span><span class="hljs-comment">[:string_limit] return super(object, type) unless object.inspect.to_s.length &gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@options</span></span></span><span class="hljs-comment">[:string_limit] colorize(object.inspect.to_s[0..</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@options</span></span></span><span class="hljs-comment">[:string_limit]] + "...", type) end end) end AwesomePrint.defaults = { :string_limit =&gt; 80, :indent =&gt; 2, :multiline =&gt; true } AwesomePrint.pry! rescue LoadError =&gt; err puts "gem install awesome_print # &lt;-- highly recommended" end</span></span></code> </pre> <br><h3 id="polzovatelskie-komandy">  Tim khusus </h3><br><p>  Apakah saya menyebutkan bahwa mungkinkah REPL yang sangat keren?  Kita bahkan dapat mendefinisikan set perintah kita sendiri untuk digunakan di dalam <code>pry</code> .  Contoh di bawah ini menunjukkan cara membuat perintah <code>sql</code> untuk mengeksekusi SQL murni dari konsol (asalkan kita memiliki koneksi AR yang berfungsi) - dengan jumlah penekanan tombol minimum. </p><br><pre> <code class="ruby hljs">default_command_set = Pry::CommandSet.new <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> command <span class="hljs-string"><span class="hljs-string">"sql"</span></span>, <span class="hljs-string"><span class="hljs-string">"Send sql over AR."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|query|</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ENV[<span class="hljs-string"><span class="hljs-string">'RAILS_ENV'</span></span>] <span class="hljs-params"><span class="hljs-params">||</span></span> <span class="hljs-keyword"><span class="hljs-keyword">defined</span></span>?(Rails) pp ActiveRecord::Base.connection.select_all(query) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> pp <span class="hljs-string"><span class="hljs-string">"No rails env defined"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Pry.config.commands.import default_command_set</code> </pre> <br><h3 id="monkeypatches-i-globals">  Monkeipatch dan Global </h3><br><p>  Ya, kami dapat mengkustomisasi dan mengeksekusi kode Ruby apa pun dengan monkeypatch kami sendiri, yang hanya akan tersedia dalam sesi <code>pry</code> .  Sebagai contoh, saya menemukan kode ini sangat nyaman untuk menguji kode yang beroperasi dengan array dan hash. </p><br><pre> <code class="plaintext hljs">class Array def self.sample(count = 10, &amp;block) Array.new(count, &amp;(block || :succ)) end end Hash.singleton_class.prepend(Module.new def sample(count = 10) (?a...count.times.reduce(?a) { |o| o.succ }). map(&amp;:to_sym).zip(0...count).to_h end end)</code> </pre> <br><p>  <em>Catatan:</em> jika Anda berpikir cuplikan di atas terlalu rumit oleh <code>Integer#succ</code> , Anda mungkin tidak pernah berurusan dengan hash panjang dengan lebih dari 26 kunci :) </p><br><h3 id="nastroyka-cveta">  Penyesuaian warna </h3><br><p>  Semuanya di bawah ini untuk menyesuaikan warna menggunakan permata <code>coderay</code> .  Hasilnya sepadan.  Simbol-simbolnya merah, dan angkanya biru, dan semua jazz itu. </p><br><pre> <code class="ruby hljs">CodeRay.scan(<span class="hljs-string"><span class="hljs-string">"example"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:ruby</span></span>).term <span class="hljs-comment"><span class="hljs-comment"># just to load necessary files $LOAD_PATH &lt;&lt; File.dirname(File.realpath(__FILE__)) require "escaped_colors" module CodeRay module Encoders class Terminal &lt; Encoder TERM_TOKEN_COLORS.each_pair do |key, value| TOKEN_COLORS[key] = value end end end end</span></span></code> </pre> <br><h3 id="v-zaklyuchenie">  Kesimpulannya </h3><br><p>  Saya harap posting ini memberikan kesan pertama tentang apa itu <code>pry</code> dan mengapa lebih baik daripada <code>irb</code> .  Saya tidak terlalu fokus pada proses debugging, terutama karena saya tidak melakukan debugging, tetapi menulis kode yang benar dari awal.  Tapi saya harap saya bisa menarik perhatian mereka yang melihat kombinasi huruf ini - <code>pry</code> - untuk pertama kalinya - setidaknya mencoba.  Percayalah, itu sepadan. </p><br><p>  Replika yang bagus! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481728/">https://habr.com/ru/post/id481728/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481710/index.html">Singkatnya, membuat warna blockbuster seratus tahun</a></li>
<li><a href="../id481714/index.html">Mengapa video game dan permainan papan bukanlah indikator terbaik dari kemampuan AI (wawancara dengan pencipta Keras)</a></li>
<li><a href="../id481716/index.html">Pemrograman reaktif, apakah itu layak untuk menjatuhkan segalanya dan bergegas menuju mimpi</a></li>
<li><a href="../id481718/index.html">11 faktor dan peretasan kehidupan yang akan meningkatkan efektivitas Anda</a></li>
<li><a href="../id481726/index.html">Laravel Routing yang dilokalkan</a></li>
<li><a href="../id481730/index.html">Dengarkan MPow T6 - headphone TWS hebat dengan kontrol yang praktis</a></li>
<li><a href="../id481734/index.html">Pengalaman dengan printer kartu, bagian 1</a></li>
<li><a href="../id481736/index.html">Apa yang membangun infrastruktur Wi-Fi 6?</a></li>
<li><a href="../id481738/index.html">Tugas Pemrograman - Cara yang Buruk untuk Mengevaluasi Kualifikasi Pengembang Senior</a></li>
<li><a href="../id481740/index.html">Apakah cahaya biru mengganggu bioritme manusia?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>